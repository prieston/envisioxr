/**
 * @license
 * Cesium Analytics SDK
 * Version 1.133
 *
 * Copyright 2012-2020 Cesium GS, Inc.
 * All rights reserved.
 *
 * Patents US9153063B2 US9865085B1 US9449424B2 US10592242
 * Patents pending US15/829,786 US16/850,266 US16/851,958
 *
 * Portions licensed separately.
 * See https://github.com/CesiumGS/cesium/blob/main/LICENSE.md for open-source Cesium license.
 */

var c5=Object.create;var qE=Object.defineProperty;var A5=Object.getOwnPropertyDescriptor;var l5=Object.getOwnPropertyNames;var f5=Object.getPrototypeOf,u5=Object.prototype.hasOwnProperty;var ys=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),d5=(e,t)=>{for(var n in t)qE(e,n,{get:t[n],enumerable:!0})},gv=(e,t,n,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of l5(t))!u5.call(e,o)&&o!==n&&qE(e,o,{get:()=>t[o],enumerable:!(i=A5(t,o))||i.enumerable});return e};var qr=(e,t,n)=>(n=e!=null?c5(f5(e)):{},gv(t||!e||!e.__esModule?qE(n,"default",{value:e,enumerable:!0}):n,e)),h5=e=>gv(qE({},"__esModule",{value:!0}),e);var ex=ys((iMe,Cv)=>{var rl=function(e){e==null&&(e=new Date().getTime()),this.N=624,this.M=397,this.MATRIX_A=2567483615,this.UPPER_MASK=2147483648,this.LOWER_MASK=2147483647,this.mt=new Array(this.N),this.mti=this.N+1,e.constructor==Array?this.init_by_array(e,e.length):this.init_seed(e)};rl.prototype.init_seed=function(e){for(this.mt[0]=e>>>0,this.mti=1;this.mti<this.N;this.mti++){var e=this.mt[this.mti-1]^this.mt[this.mti-1]>>>30;this.mt[this.mti]=(((e&4294901760)>>>16)*1812433253<<16)+(e&65535)*1812433253+this.mti,this.mt[this.mti]>>>=0}};rl.prototype.init_by_array=function(e,t){var n,i,o;for(this.init_seed(19650218),n=1,i=0,o=this.N>t?this.N:t;o;o--){var r=this.mt[n-1]^this.mt[n-1]>>>30;this.mt[n]=(this.mt[n]^(((r&4294901760)>>>16)*1664525<<16)+(r&65535)*1664525)+e[i]+i,this.mt[n]>>>=0,n++,i++,n>=this.N&&(this.mt[0]=this.mt[this.N-1],n=1),i>=t&&(i=0)}for(o=this.N-1;o;o--){var r=this.mt[n-1]^this.mt[n-1]>>>30;this.mt[n]=(this.mt[n]^(((r&4294901760)>>>16)*1566083941<<16)+(r&65535)*1566083941)-n,this.mt[n]>>>=0,n++,n>=this.N&&(this.mt[0]=this.mt[this.N-1],n=1)}this.mt[0]=2147483648};rl.prototype.random_int=function(){var e,t=new Array(0,this.MATRIX_A);if(this.mti>=this.N){var n;for(this.mti==this.N+1&&this.init_seed(5489),n=0;n<this.N-this.M;n++)e=this.mt[n]&this.UPPER_MASK|this.mt[n+1]&this.LOWER_MASK,this.mt[n]=this.mt[n+this.M]^e>>>1^t[e&1];for(;n<this.N-1;n++)e=this.mt[n]&this.UPPER_MASK|this.mt[n+1]&this.LOWER_MASK,this.mt[n]=this.mt[n+(this.M-this.N)]^e>>>1^t[e&1];e=this.mt[this.N-1]&this.UPPER_MASK|this.mt[0]&this.LOWER_MASK,this.mt[this.N-1]=this.mt[this.M-1]^e>>>1^t[e&1],this.mti=0}return e=this.mt[this.mti++],e^=e>>>11,e^=e<<7&2636928640,e^=e<<15&4022730752,e^=e>>>18,e>>>0};rl.prototype.random_int31=function(){return this.random_int()>>>1};rl.prototype.random_incl=function(){return this.random_int()*(1/4294967295)};rl.prototype.random=function(){return this.random_int()*(1/4294967296)};rl.prototype.random_excl=function(){return(this.random_int()+.5)*(1/4294967296)};rl.prototype.random_long=function(){var e=this.random_int()>>>5,t=this.random_int()>>>6;return(e*67108864+t)*(1/9007199254740992)};Cv.exports=rl});var Vv=ys((Yh,qh)=>{/*! https://mths.be/punycode v1.4.0 by @mathias */(function(e){var t=typeof Yh=="object"&&Yh&&!Yh.nodeType&&Yh,n=typeof qh=="object"&&qh&&!qh.nodeType&&qh,i=typeof global=="object"&&global;(i.global===i||i.window===i||i.self===i)&&(e=i);var o,r=2147483647,a=36,s=1,A=26,l=38,f=700,h=72,m=128,p="-",g=/^xn--/,C=/[^\x20-\x7E]/,_=/[\x2E\u3002\uFF0E\uFF61]/g,E={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},I=a-s,y=Math.floor,b=String.fromCharCode,x;function S(z){throw new RangeError(E[z])}function P(z,K){for(var ie=z.length,le=[];ie--;)le[ie]=K(z[ie]);return le}function D(z,K){var ie=z.split("@"),le="";ie.length>1&&(le=ie[0]+"@",z=ie[1]),z=z.replace(_,".");var de=z.split("."),he=P(de,K).join(".");return le+he}function Q(z){for(var K=[],ie=0,le=z.length,de,he;ie<le;)de=z.charCodeAt(ie++),de>=55296&&de<=56319&&ie<le?(he=z.charCodeAt(ie++),(he&64512)==56320?K.push(((de&1023)<<10)+(he&1023)+65536):(K.push(de),ie--)):K.push(de);return K}function v(z){return P(z,function(K){var ie="";return K>65535&&(K-=65536,ie+=b(K>>>10&1023|55296),K=56320|K&1023),ie+=b(K),ie}).join("")}function d(z){return z-48<10?z-22:z-65<26?z-65:z-97<26?z-97:a}function B(z,K){return z+22+75*(z<26)-((K!=0)<<5)}function T(z,K,ie){var le=0;for(z=ie?y(z/f):z>>1,z+=y(z/K);z>I*A>>1;le+=a)z=y(z/I);return y(le+(I+1)*z/(z+l))}function R(z){var K=[],ie=z.length,le,de=0,he=m,Se=h,be,_e,Ct,ft,At,at,Xe,wt,zt;for(be=z.lastIndexOf(p),be<0&&(be=0),_e=0;_e<be;++_e)z.charCodeAt(_e)>=128&&S("not-basic"),K.push(z.charCodeAt(_e));for(Ct=be>0?be+1:0;Ct<ie;){for(ft=de,At=1,at=a;Ct>=ie&&S("invalid-input"),Xe=d(z.charCodeAt(Ct++)),(Xe>=a||Xe>y((r-de)/At))&&S("overflow"),de+=Xe*At,wt=at<=Se?s:at>=Se+A?A:at-Se,!(Xe<wt);at+=a)zt=a-wt,At>y(r/zt)&&S("overflow"),At*=zt;le=K.length+1,Se=T(de-ft,le,ft==0),y(de/le)>r-he&&S("overflow"),he+=y(de/le),de%=le,K.splice(de++,0,he)}return v(K)}function L(z){var K,ie,le,de,he,Se,be,_e,Ct,ft,At,at=[],Xe,wt,zt,ti;for(z=Q(z),Xe=z.length,K=m,ie=0,he=h,Se=0;Se<Xe;++Se)At=z[Se],At<128&&at.push(b(At));for(le=de=at.length,de&&at.push(p);le<Xe;){for(be=r,Se=0;Se<Xe;++Se)At=z[Se],At>=K&&At<be&&(be=At);for(wt=le+1,be-K>y((r-ie)/wt)&&S("overflow"),ie+=(be-K)*wt,K=be,Se=0;Se<Xe;++Se)if(At=z[Se],At<K&&++ie>r&&S("overflow"),At==K){for(_e=ie,Ct=a;ft=Ct<=he?s:Ct>=he+A?A:Ct-he,!(_e<ft);Ct+=a)ti=_e-ft,zt=a-ft,at.push(b(B(ft+ti%zt,0))),_e=y(ti/zt);at.push(b(B(_e,0))),he=T(ie,wt,le==de),ie=0,++le}++ie,++K}return at.join("")}function G(z){return D(z,function(K){return g.test(K)?R(K.slice(4).toLowerCase()):K})}function q(z){return D(z,function(K){return C.test(K)?"xn--"+L(K):K})}if(o={version:"1.3.2",ucs2:{decode:Q,encode:v},decode:R,encode:L,toASCII:q,toUnicode:G},typeof define=="function"&&typeof define.amd=="object"&&define.amd)define("punycode",function(){return o});else if(t&&n)if(qh.exports==t)n.exports=o;else for(x in o)o.hasOwnProperty(x)&&(t[x]=o[x]);else e.punycode=o})(Yh)});var Yv=ys((jv,mI)=>{/*!
 * URI.js - Mutating URLs
 * IPv6 Support
 *
 * Version: 1.19.11
 *
 * Author: Rodney Rehm
 * Web: http://medialize.github.io/URI.js/
 *
 * Licensed under
 *   MIT License http://www.opensource.org/licenses/mit-license
 *
 */(function(e,t){"use strict";typeof mI=="object"&&mI.exports?mI.exports=t():typeof define=="function"&&define.amd?define(t):e.IPv6=t(e)})(jv,function(e){"use strict";var t=e&&e.IPv6;function n(o){var r=o.toLowerCase(),a=r.split(":"),s=a.length,A=8;a[0]===""&&a[1]===""&&a[2]===""?(a.shift(),a.shift()):a[0]===""&&a[1]===""?a.shift():a[s-1]===""&&a[s-2]===""&&a.pop(),s=a.length,a[s-1].indexOf(".")!==-1&&(A=7);var l;for(l=0;l<s&&a[l]!=="";l++);if(l<A)for(a.splice(l,1,"0000");a.length<A;)a.splice(l,0,"0000");for(var f,h=0;h<A;h++){f=a[h].split("");for(var m=0;m<3&&(f[0]==="0"&&f.length>1);m++)f.splice(0,1);a[h]=f.join("")}var p=-1,g=0,C=0,_=-1,E=!1;for(h=0;h<A;h++)E?a[h]==="0"?C+=1:(E=!1,C>g&&(p=_,g=C)):a[h]==="0"&&(E=!0,_=h,C=1);C>g&&(p=_,g=C),g>1&&a.splice(p,g,""),s=a.length;var I="";for(a[0]===""&&(I=":"),h=0;h<s&&(I+=a[h],h!==s-1);h++)I+=":";return a[s-1]===""&&(I+=":"),I}function i(){return e.IPv6===this&&(e.IPv6=t),this}return{best:n,noConflict:i}})});var Wv=ys((qv,pI)=>{/*!
 * URI.js - Mutating URLs
 * Second Level Domain (SLD) Support
 *
 * Version: 1.19.11
 *
 * Author: Rodney Rehm
 * Web: http://medialize.github.io/URI.js/
 *
 * Licensed under
 *   MIT License http://www.opensource.org/licenses/mit-license
 *
 */(function(e,t){"use strict";typeof pI=="object"&&pI.exports?pI.exports=t():typeof define=="function"&&define.amd?define(t):e.SecondLevelDomains=t(e)})(qv,function(e){"use strict";var t=e&&e.SecondLevelDomains,n={list:{ac:" com gov mil net org ",ae:" ac co gov mil name net org pro sch ",af:" com edu gov net org ",al:" com edu gov mil net org ",ao:" co ed gv it og pb ",ar:" com edu gob gov int mil net org tur ",at:" ac co gv or ",au:" asn com csiro edu gov id net org ",ba:" co com edu gov mil net org rs unbi unmo unsa untz unze ",bb:" biz co com edu gov info net org store tv ",bh:" biz cc com edu gov info net org ",bn:" com edu gov net org ",bo:" com edu gob gov int mil net org tv ",br:" adm adv agr am arq art ato b bio blog bmd cim cng cnt com coop ecn edu eng esp etc eti far flog fm fnd fot fst g12 ggf gov imb ind inf jor jus lel mat med mil mus net nom not ntr odo org ppg pro psc psi qsl rec slg srv tmp trd tur tv vet vlog wiki zlg ",bs:" com edu gov net org ",bz:" du et om ov rg ",ca:" ab bc mb nb nf nl ns nt nu on pe qc sk yk ",ck:" biz co edu gen gov info net org ",cn:" ac ah bj com cq edu fj gd gov gs gx gz ha hb he hi hl hn jl js jx ln mil net nm nx org qh sc sd sh sn sx tj tw xj xz yn zj ",co:" com edu gov mil net nom org ",cr:" ac c co ed fi go or sa ",cy:" ac biz com ekloges gov ltd name net org parliament press pro tm ",do:" art com edu gob gov mil net org sld web ",dz:" art asso com edu gov net org pol ",ec:" com edu fin gov info med mil net org pro ",eg:" com edu eun gov mil name net org sci ",er:" com edu gov ind mil net org rochest w ",es:" com edu gob nom org ",et:" biz com edu gov info name net org ",fj:" ac biz com info mil name net org pro ",fk:" ac co gov net nom org ",fr:" asso com f gouv nom prd presse tm ",gg:" co net org ",gh:" com edu gov mil org ",gn:" ac com gov net org ",gr:" com edu gov mil net org ",gt:" com edu gob ind mil net org ",gu:" com edu gov net org ",hk:" com edu gov idv net org ",hu:" 2000 agrar bolt casino city co erotica erotika film forum games hotel info ingatlan jogasz konyvelo lakas media news org priv reklam sex shop sport suli szex tm tozsde utazas video ",id:" ac co go mil net or sch web ",il:" ac co gov idf k12 muni net org ",in:" ac co edu ernet firm gen gov i ind mil net nic org res ",iq:" com edu gov i mil net org ",ir:" ac co dnssec gov i id net org sch ",it:" edu gov ",je:" co net org ",jo:" com edu gov mil name net org sch ",jp:" ac ad co ed go gr lg ne or ",ke:" ac co go info me mobi ne or sc ",kh:" com edu gov mil net org per ",ki:" biz com de edu gov info mob net org tel ",km:" asso com coop edu gouv k medecin mil nom notaires pharmaciens presse tm veterinaire ",kn:" edu gov net org ",kr:" ac busan chungbuk chungnam co daegu daejeon es gangwon go gwangju gyeongbuk gyeonggi gyeongnam hs incheon jeju jeonbuk jeonnam k kg mil ms ne or pe re sc seoul ulsan ",kw:" com edu gov net org ",ky:" com edu gov net org ",kz:" com edu gov mil net org ",lb:" com edu gov net org ",lk:" assn com edu gov grp hotel int ltd net ngo org sch soc web ",lr:" com edu gov net org ",lv:" asn com conf edu gov id mil net org ",ly:" com edu gov id med net org plc sch ",ma:" ac co gov m net org press ",mc:" asso tm ",me:" ac co edu gov its net org priv ",mg:" com edu gov mil nom org prd tm ",mk:" com edu gov inf name net org pro ",ml:" com edu gov net org presse ",mn:" edu gov org ",mo:" com edu gov net org ",mt:" com edu gov net org ",mv:" aero biz com coop edu gov info int mil museum name net org pro ",mw:" ac co com coop edu gov int museum net org ",mx:" com edu gob net org ",my:" com edu gov mil name net org sch ",nf:" arts com firm info net other per rec store web ",ng:" biz com edu gov mil mobi name net org sch ",ni:" ac co com edu gob mil net nom org ",np:" com edu gov mil net org ",nr:" biz com edu gov info net org ",om:" ac biz co com edu gov med mil museum net org pro sch ",pe:" com edu gob mil net nom org sld ",ph:" com edu gov i mil net ngo org ",pk:" biz com edu fam gob gok gon gop gos gov net org web ",pl:" art bialystok biz com edu gda gdansk gorzow gov info katowice krakow lodz lublin mil net ngo olsztyn org poznan pwr radom slupsk szczecin torun warszawa waw wroc wroclaw zgora ",pr:" ac biz com edu est gov info isla name net org pro prof ",ps:" com edu gov net org plo sec ",pw:" belau co ed go ne or ",ro:" arts com firm info nom nt org rec store tm www ",rs:" ac co edu gov in org ",sb:" com edu gov net org ",sc:" com edu gov net org ",sh:" co com edu gov net nom org ",sl:" com edu gov net org ",st:" co com consulado edu embaixada gov mil net org principe saotome store ",sv:" com edu gob org red ",sz:" ac co org ",tr:" av bbs bel biz com dr edu gen gov info k12 name net org pol tel tsk tv web ",tt:" aero biz cat co com coop edu gov info int jobs mil mobi museum name net org pro tel travel ",tw:" club com ebiz edu game gov idv mil net org ",mu:" ac co com gov net or org ",mz:" ac co edu gov org ",na:" co com ",nz:" ac co cri geek gen govt health iwi maori mil net org parliament school ",pa:" abo ac com edu gob ing med net nom org sld ",pt:" com edu gov int net nome org publ ",py:" com edu gov mil net org ",qa:" com edu gov mil net org ",re:" asso com nom ",ru:" ac adygeya altai amur arkhangelsk astrakhan bashkiria belgorod bir bryansk buryatia cbg chel chelyabinsk chita chukotka chuvashia com dagestan e-burg edu gov grozny int irkutsk ivanovo izhevsk jar joshkar-ola kalmykia kaluga kamchatka karelia kazan kchr kemerovo khabarovsk khakassia khv kirov koenig komi kostroma kranoyarsk kuban kurgan kursk lipetsk magadan mari mari-el marine mil mordovia mosreg msk murmansk nalchik net nnov nov novosibirsk nsk omsk orenburg org oryol penza perm pp pskov ptz rnd ryazan sakhalin samara saratov simbirsk smolensk spb stavropol stv surgut tambov tatarstan tom tomsk tsaritsyn tsk tula tuva tver tyumen udm udmurtia ulan-ude vladikavkaz vladimir vladivostok volgograd vologda voronezh vrn vyatka yakutia yamal yekaterinburg yuzhno-sakhalinsk ",rw:" ac co com edu gouv gov int mil net ",sa:" com edu gov med net org pub sch ",sd:" com edu gov info med net org tv ",se:" a ac b bd c d e f g h i k l m n o org p parti pp press r s t tm u w x y z ",sg:" com edu gov idn net org per ",sn:" art com edu gouv org perso univ ",sy:" com edu gov mil net news org ",th:" ac co go in mi net or ",tj:" ac biz co com edu go gov info int mil name net nic org test web ",tn:" agrinet com defense edunet ens fin gov ind info intl mincom nat net org perso rnrt rns rnu tourism ",tz:" ac co go ne or ",ua:" biz cherkassy chernigov chernovtsy ck cn co com crimea cv dn dnepropetrovsk donetsk dp edu gov if in ivano-frankivsk kh kharkov kherson khmelnitskiy kiev kirovograd km kr ks kv lg lugansk lutsk lviv me mk net nikolaev od odessa org pl poltava pp rovno rv sebastopol sumy te ternopil uzhgorod vinnica vn zaporizhzhe zhitomir zp zt ",ug:" ac co go ne or org sc ",uk:" ac bl british-library co cym gov govt icnet jet lea ltd me mil mod national-library-scotland nel net nhs nic nls org orgn parliament plc police sch scot soc ",us:" dni fed isa kids nsn ",uy:" com edu gub mil net org ",ve:" co com edu gob info mil net org web ",vi:" co com k12 net org ",vn:" ac biz com edu gov health info int name net org pro ",ye:" co com gov ltd me net org plc ",yu:" ac co edu gov org ",za:" ac agric alt bourse city co cybernet db edu gov grondar iaccess imt inca landesign law mil net ngo nis nom olivetti org pix school tm web ",zm:" ac co com edu gov net org sch ",com:"ar br cn de eu gb gr hu jpn kr no qc ru sa se uk us uy za ",net:"gb jp se uk ",org:"ae",de:"com "},has:function(i){var o=i.lastIndexOf(".");if(o<=0||o>=i.length-1)return!1;var r=i.lastIndexOf(".",o-1);if(r<=0||r>=o-1)return!1;var a=n.list[i.slice(o+1)];return a?a.indexOf(" "+i.slice(r+1,o)+" ")>=0:!1},is:function(i){var o=i.lastIndexOf(".");if(o<=0||o>=i.length-1)return!1;var r=i.lastIndexOf(".",o-1);if(r>=0)return!1;var a=n.list[i.slice(o+1)];return a?a.indexOf(" "+i.slice(0,o)+" ")>=0:!1},get:function(i){var o=i.lastIndexOf(".");if(o<=0||o>=i.length-1)return null;var r=i.lastIndexOf(".",o-1);if(r<=0||r>=o-1)return null;var a=n.list[i.slice(o+1)];return!a||a.indexOf(" "+i.slice(r+1,o)+" ")<0?null:i.slice(r+1)},noConflict:function(){return e.SecondLevelDomains===this&&(e.SecondLevelDomains=t),this}};return n})});var pc=ys((Jv,gI)=>{/*!
 * URI.js - Mutating URLs
 *
 * Version: 1.19.11
 *
 * Author: Rodney Rehm
 * Web: http://medialize.github.io/URI.js/
 *
 * Licensed under
 *   MIT License http://www.opensource.org/licenses/mit-license
 *
 */(function(e,t){"use strict";typeof gI=="object"&&gI.exports?gI.exports=t(Vv(),Yv(),Wv()):typeof define=="function"&&define.amd?define(["./punycode","./IPv6","./SecondLevelDomains"],t):e.URI=t(e.punycode,e.IPv6,e.SecondLevelDomains,e)})(Jv,function(e,t,n,i){"use strict";var o=i&&i.URI;function r(B,T){var R=arguments.length>=1,L=arguments.length>=2;if(!(this instanceof r))return R?L?new r(B,T):new r(B):new r;if(B===void 0){if(R)throw new TypeError("undefined is not a valid argument for URI");typeof location<"u"?B=location.href+"":B=""}if(B===null&&R)throw new TypeError("null is not a valid argument for URI");return this.href(B),T!==void 0?this.absoluteTo(T):this}function a(B){return/^[0-9]+$/.test(B)}r.version="1.19.11";var s=r.prototype,A=Object.prototype.hasOwnProperty;function l(B){return B.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function f(B){return B===void 0?"Undefined":String(Object.prototype.toString.call(B)).slice(8,-1)}function h(B){return f(B)==="Array"}function m(B,T){var R={},L,G;if(f(T)==="RegExp")R=null;else if(h(T))for(L=0,G=T.length;L<G;L++)R[T[L]]=!0;else R[T]=!0;for(L=0,G=B.length;L<G;L++){var q=R&&R[B[L]]!==void 0||!R&&T.test(B[L]);q&&(B.splice(L,1),G--,L--)}return B}function p(B,T){var R,L;if(h(T)){for(R=0,L=T.length;R<L;R++)if(!p(B,T[R]))return!1;return!0}var G=f(T);for(R=0,L=B.length;R<L;R++)if(G==="RegExp"){if(typeof B[R]=="string"&&B[R].match(T))return!0}else if(B[R]===T)return!0;return!1}function g(B,T){if(!h(B)||!h(T)||B.length!==T.length)return!1;B.sort(),T.sort();for(var R=0,L=B.length;R<L;R++)if(B[R]!==T[R])return!1;return!0}function C(B){var T=/^\/+|\/+$/g;return B.replace(T,"")}r._parts=function(){return{protocol:null,username:null,password:null,hostname:null,urn:null,port:null,path:null,query:null,fragment:null,preventInvalidHostname:r.preventInvalidHostname,duplicateQueryParameters:r.duplicateQueryParameters,escapeQuerySpace:r.escapeQuerySpace}},r.preventInvalidHostname=!1,r.duplicateQueryParameters=!1,r.escapeQuerySpace=!0,r.protocol_expression=/^[a-z][a-z0-9.+-]*$/i,r.idn_expression=/[^a-z0-9\._-]/i,r.punycode_expression=/(xn--)/i,r.ip4_expression=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,r.ip6_expression=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,r.find_uri_expression=/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?«»“”‘’]))/ig,r.findUri={start:/\b(?:([a-z][a-z0-9.+-]*:\/\/)|www\.)/gi,end:/[\s\r\n]|$/,trim:/[`!()\[\]{};:'".,<>?«»“”„‘’]+$/,parens:/(\([^\)]*\)|\[[^\]]*\]|\{[^}]*\}|<[^>]*>)/g},r.leading_whitespace_expression=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,r.ascii_tab_whitespace=/[\u0009\u000A\u000D]+/g,r.defaultPorts={http:"80",https:"443",ftp:"21",gopher:"70",ws:"80",wss:"443"},r.hostProtocols=["http","https"],r.invalid_hostname_characters=/[^a-zA-Z0-9\.\-:_]/,r.domAttributes={a:"href",blockquote:"cite",link:"href",base:"href",script:"src",form:"action",img:"src",area:"href",iframe:"src",embed:"src",source:"src",track:"src",input:"src",audio:"src",video:"src"},r.getDomAttribute=function(B){if(!(!B||!B.nodeName)){var T=B.nodeName.toLowerCase();if(!(T==="input"&&B.type!=="image"))return r.domAttributes[T]}};function _(B){return escape(B)}function E(B){return encodeURIComponent(B).replace(/[!'()*]/g,_).replace(/\*/g,"%2A")}r.encode=E,r.decode=decodeURIComponent,r.iso8859=function(){r.encode=escape,r.decode=unescape},r.unicode=function(){r.encode=E,r.decode=decodeURIComponent},r.characters={pathname:{encode:{expression:/%(24|26|2B|2C|3B|3D|3A|40)/ig,map:{"%24":"$","%26":"&","%2B":"+","%2C":",","%3B":";","%3D":"=","%3A":":","%40":"@"}},decode:{expression:/[\/\?#]/g,map:{"/":"%2F","?":"%3F","#":"%23"}}},reserved:{encode:{expression:/%(21|23|24|26|27|28|29|2A|2B|2C|2F|3A|3B|3D|3F|40|5B|5D)/ig,map:{"%3A":":","%2F":"/","%3F":"?","%23":"#","%5B":"[","%5D":"]","%40":"@","%21":"!","%24":"$","%26":"&","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"="}}},urnpath:{encode:{expression:/%(21|24|27|28|29|2A|2B|2C|3B|3D|40)/ig,map:{"%21":"!","%24":"$","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"=","%40":"@"}},decode:{expression:/[\/\?#:]/g,map:{"/":"%2F","?":"%3F","#":"%23",":":"%3A"}}}},r.encodeQuery=function(B,T){var R=r.encode(B+"");return T===void 0&&(T=r.escapeQuerySpace),T?R.replace(/%20/g,"+"):R},r.decodeQuery=function(B,T){B+="",T===void 0&&(T=r.escapeQuerySpace);try{return r.decode(T?B.replace(/\+/g,"%20"):B)}catch{return B}};var I={encode:"encode",decode:"decode"},y,b=function(B,T){return function(R){try{return r[T](R+"").replace(r.characters[B][T].expression,function(L){return r.characters[B][T].map[L]})}catch{return R}}};for(y in I)r[y+"PathSegment"]=b("pathname",I[y]),r[y+"UrnPathSegment"]=b("urnpath",I[y]);var x=function(B,T,R){return function(L){var G;R?G=function(ie){return r[T](r[R](ie))}:G=r[T];for(var q=(L+"").split(B),z=0,K=q.length;z<K;z++)q[z]=G(q[z]);return q.join(B)}};r.decodePath=x("/","decodePathSegment"),r.decodeUrnPath=x(":","decodeUrnPathSegment"),r.recodePath=x("/","encodePathSegment","decode"),r.recodeUrnPath=x(":","encodeUrnPathSegment","decode"),r.encodeReserved=b("reserved","encode"),r.parse=function(B,T){var R;return T||(T={preventInvalidHostname:r.preventInvalidHostname}),B=B.replace(r.leading_whitespace_expression,""),B=B.replace(r.ascii_tab_whitespace,""),R=B.indexOf("#"),R>-1&&(T.fragment=B.substring(R+1)||null,B=B.substring(0,R)),R=B.indexOf("?"),R>-1&&(T.query=B.substring(R+1)||null,B=B.substring(0,R)),B=B.replace(/^(https?|ftp|wss?)?:+[/\\]*/i,"$1://"),B=B.replace(/^[/\\]{2,}/i,"//"),B.substring(0,2)==="//"?(T.protocol=null,B=B.substring(2),B=r.parseAuthority(B,T)):(R=B.indexOf(":"),R>-1&&(T.protocol=B.substring(0,R)||null,T.protocol&&!T.protocol.match(r.protocol_expression)?T.protocol=void 0:B.substring(R+1,R+3).replace(/\\/g,"/")==="//"?(B=B.substring(R+3),B=r.parseAuthority(B,T)):(B=B.substring(R+1),T.urn=!0))),T.path=B,T},r.parseHost=function(B,T){B||(B=""),B=B.replace(/\\/g,"/");var R=B.indexOf("/"),L,G;if(R===-1&&(R=B.length),B.charAt(0)==="[")L=B.indexOf("]"),T.hostname=B.substring(1,L)||null,T.port=B.substring(L+2,R)||null,T.port==="/"&&(T.port=null);else{var q=B.indexOf(":"),z=B.indexOf("/"),K=B.indexOf(":",q+1);K!==-1&&(z===-1||K<z)?(T.hostname=B.substring(0,R)||null,T.port=null):(G=B.substring(0,R).split(":"),T.hostname=G[0]||null,T.port=G[1]||null)}return T.hostname&&B.substring(R).charAt(0)!=="/"&&(R++,B="/"+B),T.preventInvalidHostname&&r.ensureValidHostname(T.hostname,T.protocol),T.port&&r.ensureValidPort(T.port),B.substring(R)||"/"},r.parseAuthority=function(B,T){return B=r.parseUserinfo(B,T),r.parseHost(B,T)},r.parseUserinfo=function(B,T){var R=B,L=B.indexOf("\\");L!==-1&&(B=B.replace(/\\/g,"/"));var G=B.indexOf("/"),q=B.lastIndexOf("@",G>-1?G:B.length-1),z;return q>-1&&(G===-1||q<G)?(z=B.substring(0,q).split(":"),T.username=z[0]?r.decode(z[0]):null,z.shift(),T.password=z[0]?r.decode(z.join(":")):null,B=R.substring(q+1)):(T.username=null,T.password=null),B},r.parseQuery=function(B,T){if(!B)return{};if(B=B.replace(/&+/g,"&").replace(/^\?*&*|&+$/g,""),!B)return{};for(var R={},L=B.split("&"),G=L.length,q,z,K,ie=0;ie<G;ie++)q=L[ie].split("="),z=r.decodeQuery(q.shift(),T),K=q.length?r.decodeQuery(q.join("="),T):null,z!=="__proto__"&&(A.call(R,z)?((typeof R[z]=="string"||R[z]===null)&&(R[z]=[R[z]]),R[z].push(K)):R[z]=K);return R},r.build=function(B){var T="",R=!1;return B.protocol&&(T+=B.protocol+":"),!B.urn&&(T||B.hostname)&&(T+="//",R=!0),T+=r.buildAuthority(B)||"",typeof B.path=="string"&&(B.path.charAt(0)!=="/"&&R&&(T+="/"),T+=B.path),typeof B.query=="string"&&B.query&&(T+="?"+B.query),typeof B.fragment=="string"&&B.fragment&&(T+="#"+B.fragment),T},r.buildHost=function(B){var T="";if(B.hostname)r.ip6_expression.test(B.hostname)?T+="["+B.hostname+"]":T+=B.hostname;else return"";return B.port&&(T+=":"+B.port),T},r.buildAuthority=function(B){return r.buildUserinfo(B)+r.buildHost(B)},r.buildUserinfo=function(B){var T="";return B.username&&(T+=r.encode(B.username)),B.password&&(T+=":"+r.encode(B.password)),T&&(T+="@"),T},r.buildQuery=function(B,T,R){var L="",G,q,z,K;for(q in B)if(q!=="__proto__"&&A.call(B,q))if(h(B[q]))for(G={},z=0,K=B[q].length;z<K;z++)B[q][z]!==void 0&&G[B[q][z]+""]===void 0&&(L+="&"+r.buildQueryParameter(q,B[q][z],R),T!==!0&&(G[B[q][z]+""]=!0));else B[q]!==void 0&&(L+="&"+r.buildQueryParameter(q,B[q],R));return L.substring(1)},r.buildQueryParameter=function(B,T,R){return r.encodeQuery(B,R)+(T!==null?"="+r.encodeQuery(T,R):"")},r.addQuery=function(B,T,R){if(typeof T=="object")for(var L in T)A.call(T,L)&&r.addQuery(B,L,T[L]);else if(typeof T=="string"){if(B[T]===void 0){B[T]=R;return}else typeof B[T]=="string"&&(B[T]=[B[T]]);h(R)||(R=[R]),B[T]=(B[T]||[]).concat(R)}else throw new TypeError("URI.addQuery() accepts an object, string as the name parameter")},r.setQuery=function(B,T,R){if(typeof T=="object")for(var L in T)A.call(T,L)&&r.setQuery(B,L,T[L]);else if(typeof T=="string")B[T]=R===void 0?null:R;else throw new TypeError("URI.setQuery() accepts an object, string as the name parameter")},r.removeQuery=function(B,T,R){var L,G,q;if(h(T))for(L=0,G=T.length;L<G;L++)B[T[L]]=void 0;else if(f(T)==="RegExp")for(q in B)T.test(q)&&(B[q]=void 0);else if(typeof T=="object")for(q in T)A.call(T,q)&&r.removeQuery(B,q,T[q]);else if(typeof T=="string")R!==void 0?f(R)==="RegExp"?!h(B[T])&&R.test(B[T])?B[T]=void 0:B[T]=m(B[T],R):B[T]===String(R)&&(!h(R)||R.length===1)?B[T]=void 0:h(B[T])&&(B[T]=m(B[T],R)):B[T]=void 0;else throw new TypeError("URI.removeQuery() accepts an object, string, RegExp as the first parameter")},r.hasQuery=function(B,T,R,L){switch(f(T)){case"String":break;case"RegExp":for(var G in B)if(A.call(B,G)&&T.test(G)&&(R===void 0||r.hasQuery(B,G,R)))return!0;return!1;case"Object":for(var q in T)if(A.call(T,q)&&!r.hasQuery(B,q,T[q]))return!1;return!0;default:throw new TypeError("URI.hasQuery() accepts a string, regular expression or object as the name parameter")}switch(f(R)){case"Undefined":return T in B;case"Boolean":var z=!!(h(B[T])?B[T].length:B[T]);return R===z;case"Function":return!!R(B[T],T,B);case"Array":if(!h(B[T]))return!1;var K=L?p:g;return K(B[T],R);case"RegExp":return h(B[T])?L?p(B[T],R):!1:!!(B[T]&&B[T].match(R));case"Number":R=String(R);case"String":return h(B[T])?L?p(B[T],R):!1:B[T]===R;default:throw new TypeError("URI.hasQuery() accepts undefined, boolean, string, number, RegExp, Function as the value parameter")}},r.joinPaths=function(){for(var B=[],T=[],R=0,L=0;L<arguments.length;L++){var G=new r(arguments[L]);B.push(G);for(var q=G.segment(),z=0;z<q.length;z++)typeof q[z]=="string"&&T.push(q[z]),q[z]&&R++}if(!T.length||!R)return new r("");var K=new r("").segment(T);return(B[0].path()===""||B[0].path().slice(0,1)==="/")&&K.path("/"+K.path()),K.normalize()},r.commonPath=function(B,T){var R=Math.min(B.length,T.length),L;for(L=0;L<R;L++)if(B.charAt(L)!==T.charAt(L)){L--;break}return L<1?B.charAt(0)===T.charAt(0)&&B.charAt(0)==="/"?"/":"":((B.charAt(L)!=="/"||T.charAt(L)!=="/")&&(L=B.substring(0,L).lastIndexOf("/")),B.substring(0,L+1))},r.withinString=function(B,T,R){R||(R={});var L=R.start||r.findUri.start,G=R.end||r.findUri.end,q=R.trim||r.findUri.trim,z=R.parens||r.findUri.parens,K=/[a-z0-9-]=["']?$/i;for(L.lastIndex=0;;){var ie=L.exec(B);if(!ie)break;var le=ie.index;if(R.ignoreHtml){var de=B.slice(Math.max(le-3,0),le);if(de&&K.test(de))continue}for(var he=le+B.slice(le).search(G),Se=B.slice(le,he),be=-1;;){var _e=z.exec(Se);if(!_e)break;var Ct=_e.index+_e[0].length;be=Math.max(be,Ct)}if(be>-1?Se=Se.slice(0,be)+Se.slice(be).replace(q,""):Se=Se.replace(q,""),!(Se.length<=ie[0].length)&&!(R.ignore&&R.ignore.test(Se))){he=le+Se.length;var ft=T(Se,le,he,B);if(ft===void 0){L.lastIndex=he;continue}ft=String(ft),B=B.slice(0,le)+ft+B.slice(he),L.lastIndex=le+ft.length}}return L.lastIndex=0,B},r.ensureValidHostname=function(B,T){var R=!!B,L=!!T,G=!1;if(L&&(G=p(r.hostProtocols,T)),G&&!R)throw new TypeError("Hostname cannot be empty, if protocol is "+T);if(B&&B.match(r.invalid_hostname_characters)){if(!e)throw new TypeError('Hostname "'+B+'" contains characters other than [A-Z0-9.-:_] and Punycode.js is not available');if(e.toASCII(B).match(r.invalid_hostname_characters))throw new TypeError('Hostname "'+B+'" contains characters other than [A-Z0-9.-:_]')}},r.ensureValidPort=function(B){if(B){var T=Number(B);if(!(a(T)&&T>0&&T<65536))throw new TypeError('Port "'+B+'" is not a valid port')}},r.noConflict=function(B){if(B){var T={URI:this.noConflict()};return i.URITemplate&&typeof i.URITemplate.noConflict=="function"&&(T.URITemplate=i.URITemplate.noConflict()),i.IPv6&&typeof i.IPv6.noConflict=="function"&&(T.IPv6=i.IPv6.noConflict()),i.SecondLevelDomains&&typeof i.SecondLevelDomains.noConflict=="function"&&(T.SecondLevelDomains=i.SecondLevelDomains.noConflict()),T}else i.URI===this&&(i.URI=o);return this},s.build=function(B){return B===!0?this._deferred_build=!0:(B===void 0||this._deferred_build)&&(this._string=r.build(this._parts),this._deferred_build=!1),this},s.clone=function(){return new r(this)},s.valueOf=s.toString=function(){return this.build(!1)._string};function S(B){return function(T,R){return T===void 0?this._parts[B]||"":(this._parts[B]=T||null,this.build(!R),this)}}function P(B,T){return function(R,L){return R===void 0?this._parts[B]||"":(R!==null&&(R=R+"",R.charAt(0)===T&&(R=R.substring(1))),this._parts[B]=R,this.build(!L),this)}}s.protocol=S("protocol"),s.username=S("username"),s.password=S("password"),s.hostname=S("hostname"),s.port=S("port"),s.query=P("query","?"),s.fragment=P("fragment","#"),s.search=function(B,T){var R=this.query(B,T);return typeof R=="string"&&R.length?"?"+R:R},s.hash=function(B,T){var R=this.fragment(B,T);return typeof R=="string"&&R.length?"#"+R:R},s.pathname=function(B,T){if(B===void 0||B===!0){var R=this._parts.path||(this._parts.hostname?"/":"");return B?(this._parts.urn?r.decodeUrnPath:r.decodePath)(R):R}else return this._parts.urn?this._parts.path=B?r.recodeUrnPath(B):"":this._parts.path=B?r.recodePath(B):"/",this.build(!T),this},s.path=s.pathname,s.href=function(B,T){var R;if(B===void 0)return this.toString();this._string="",this._parts=r._parts();var L=B instanceof r,G=typeof B=="object"&&(B.hostname||B.path||B.pathname);if(B.nodeName){var q=r.getDomAttribute(B);B=B[q]||"",G=!1}if(!L&&G&&B.pathname!==void 0&&(B=B.toString()),typeof B=="string"||B instanceof String)this._parts=r.parse(String(B),this._parts);else if(L||G){var z=L?B._parts:B;for(R in z)R!=="query"&&A.call(this._parts,R)&&(this._parts[R]=z[R]);z.query&&this.query(z.query,!1)}else throw new TypeError("invalid input");return this.build(!T),this},s.is=function(B){var T=!1,R=!1,L=!1,G=!1,q=!1,z=!1,K=!1,ie=!this._parts.urn;switch(this._parts.hostname&&(ie=!1,R=r.ip4_expression.test(this._parts.hostname),L=r.ip6_expression.test(this._parts.hostname),T=R||L,G=!T,q=G&&n&&n.has(this._parts.hostname),z=G&&r.idn_expression.test(this._parts.hostname),K=G&&r.punycode_expression.test(this._parts.hostname)),B.toLowerCase()){case"relative":return ie;case"absolute":return!ie;case"domain":case"name":return G;case"sld":return q;case"ip":return T;case"ip4":case"ipv4":case"inet4":return R;case"ip6":case"ipv6":case"inet6":return L;case"idn":return z;case"url":return!this._parts.urn;case"urn":return!!this._parts.urn;case"punycode":return K}return null};var D=s.protocol,Q=s.port,v=s.hostname;s.protocol=function(B,T){if(B&&(B=B.replace(/:(\/\/)?$/,""),!B.match(r.protocol_expression)))throw new TypeError('Protocol "'+B+`" contains characters other than [A-Z0-9.+-] or doesn't start with [A-Z]`);return D.call(this,B,T)},s.scheme=s.protocol,s.port=function(B,T){return this._parts.urn?B===void 0?"":this:(B!==void 0&&(B===0&&(B=null),B&&(B+="",B.charAt(0)===":"&&(B=B.substring(1)),r.ensureValidPort(B))),Q.call(this,B,T))},s.hostname=function(B,T){if(this._parts.urn)return B===void 0?"":this;if(B!==void 0){var R={preventInvalidHostname:this._parts.preventInvalidHostname},L=r.parseHost(B,R);if(L!=="/")throw new TypeError('Hostname "'+B+'" contains characters other than [A-Z0-9.-]');B=R.hostname,this._parts.preventInvalidHostname&&r.ensureValidHostname(B,this._parts.protocol)}return v.call(this,B,T)},s.origin=function(B,T){if(this._parts.urn)return B===void 0?"":this;if(B===void 0){var R=this.protocol(),L=this.authority();return L?(R?R+"://":"")+this.authority():""}else{var G=r(B);return this.protocol(G.protocol()).authority(G.authority()).build(!T),this}},s.host=function(B,T){if(this._parts.urn)return B===void 0?"":this;if(B===void 0)return this._parts.hostname?r.buildHost(this._parts):"";var R=r.parseHost(B,this._parts);if(R!=="/")throw new TypeError('Hostname "'+B+'" contains characters other than [A-Z0-9.-]');return this.build(!T),this},s.authority=function(B,T){if(this._parts.urn)return B===void 0?"":this;if(B===void 0)return this._parts.hostname?r.buildAuthority(this._parts):"";var R=r.parseAuthority(B,this._parts);if(R!=="/")throw new TypeError('Hostname "'+B+'" contains characters other than [A-Z0-9.-]');return this.build(!T),this},s.userinfo=function(B,T){if(this._parts.urn)return B===void 0?"":this;if(B===void 0){var R=r.buildUserinfo(this._parts);return R&&R.substring(0,R.length-1)}else return B[B.length-1]!=="@"&&(B+="@"),r.parseUserinfo(B,this._parts),this.build(!T),this},s.resource=function(B,T){var R;return B===void 0?this.path()+this.search()+this.hash():(R=r.parse(B),this._parts.path=R.path,this._parts.query=R.query,this._parts.fragment=R.fragment,this.build(!T),this)},s.subdomain=function(B,T){if(this._parts.urn)return B===void 0?"":this;if(B===void 0){if(!this._parts.hostname||this.is("IP"))return"";var R=this._parts.hostname.length-this.domain().length-1;return this._parts.hostname.substring(0,R)||""}else{var L=this._parts.hostname.length-this.domain().length,G=this._parts.hostname.substring(0,L),q=new RegExp("^"+l(G));if(B&&B.charAt(B.length-1)!=="."&&(B+="."),B.indexOf(":")!==-1)throw new TypeError("Domains cannot contain colons");return B&&r.ensureValidHostname(B,this._parts.protocol),this._parts.hostname=this._parts.hostname.replace(q,B),this.build(!T),this}},s.domain=function(B,T){if(this._parts.urn)return B===void 0?"":this;if(typeof B=="boolean"&&(T=B,B=void 0),B===void 0){if(!this._parts.hostname||this.is("IP"))return"";var R=this._parts.hostname.match(/\./g);if(R&&R.length<2)return this._parts.hostname;var L=this._parts.hostname.length-this.tld(T).length-1;return L=this._parts.hostname.lastIndexOf(".",L-1)+1,this._parts.hostname.substring(L)||""}else{if(!B)throw new TypeError("cannot set domain empty");if(B.indexOf(":")!==-1)throw new TypeError("Domains cannot contain colons");if(r.ensureValidHostname(B,this._parts.protocol),!this._parts.hostname||this.is("IP"))this._parts.hostname=B;else{var G=new RegExp(l(this.domain())+"$");this._parts.hostname=this._parts.hostname.replace(G,B)}return this.build(!T),this}},s.tld=function(B,T){if(this._parts.urn)return B===void 0?"":this;if(typeof B=="boolean"&&(T=B,B=void 0),B===void 0){if(!this._parts.hostname||this.is("IP"))return"";var R=this._parts.hostname.lastIndexOf("."),L=this._parts.hostname.substring(R+1);return T!==!0&&n&&n.list[L.toLowerCase()]&&n.get(this._parts.hostname)||L}else{var G;if(B)if(B.match(/[^a-zA-Z0-9-]/))if(n&&n.is(B))G=new RegExp(l(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(G,B);else throw new TypeError('TLD "'+B+'" contains characters other than [A-Z0-9]');else{if(!this._parts.hostname||this.is("IP"))throw new ReferenceError("cannot set TLD on non-domain host");G=new RegExp(l(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(G,B)}else throw new TypeError("cannot set TLD empty");return this.build(!T),this}},s.directory=function(B,T){if(this._parts.urn)return B===void 0?"":this;if(B===void 0||B===!0){if(!this._parts.path&&!this._parts.hostname)return"";if(this._parts.path==="/")return"/";var R=this._parts.path.length-this.filename().length-1,L=this._parts.path.substring(0,R)||(this._parts.hostname?"/":"");return B?r.decodePath(L):L}else{var G=this._parts.path.length-this.filename().length,q=this._parts.path.substring(0,G),z=new RegExp("^"+l(q));return this.is("relative")||(B||(B="/"),B.charAt(0)!=="/"&&(B="/"+B)),B&&B.charAt(B.length-1)!=="/"&&(B+="/"),B=r.recodePath(B),this._parts.path=this._parts.path.replace(z,B),this.build(!T),this}},s.filename=function(B,T){if(this._parts.urn)return B===void 0?"":this;if(typeof B!="string"){if(!this._parts.path||this._parts.path==="/")return"";var R=this._parts.path.lastIndexOf("/"),L=this._parts.path.substring(R+1);return B?r.decodePathSegment(L):L}else{var G=!1;B.charAt(0)==="/"&&(B=B.substring(1)),B.match(/\.?\//)&&(G=!0);var q=new RegExp(l(this.filename())+"$");return B=r.recodePath(B),this._parts.path=this._parts.path.replace(q,B),G?this.normalizePath(T):this.build(!T),this}},s.suffix=function(B,T){if(this._parts.urn)return B===void 0?"":this;if(B===void 0||B===!0){if(!this._parts.path||this._parts.path==="/")return"";var R=this.filename(),L=R.lastIndexOf("."),G,q;return L===-1?"":(G=R.substring(L+1),q=/^[a-z0-9%]+$/i.test(G)?G:"",B?r.decodePathSegment(q):q)}else{B.charAt(0)==="."&&(B=B.substring(1));var z=this.suffix(),K;if(z)B?K=new RegExp(l(z)+"$"):K=new RegExp(l("."+z)+"$");else{if(!B)return this;this._parts.path+="."+r.recodePath(B)}return K&&(B=r.recodePath(B),this._parts.path=this._parts.path.replace(K,B)),this.build(!T),this}},s.segment=function(B,T,R){var L=this._parts.urn?":":"/",G=this.path(),q=G.substring(0,1)==="/",z=G.split(L);if(B!==void 0&&typeof B!="number"&&(R=T,T=B,B=void 0),B!==void 0&&typeof B!="number")throw new Error('Bad segment "'+B+'", must be 0-based integer');if(q&&z.shift(),B<0&&(B=Math.max(z.length+B,0)),T===void 0)return B===void 0?z:z[B];if(B===null||z[B]===void 0)if(h(T)){z=[];for(var K=0,ie=T.length;K<ie;K++)!T[K].length&&(!z.length||!z[z.length-1].length)||(z.length&&!z[z.length-1].length&&z.pop(),z.push(C(T[K])))}else(T||typeof T=="string")&&(T=C(T),z[z.length-1]===""?z[z.length-1]=T:z.push(T));else T?z[B]=C(T):z.splice(B,1);return q&&z.unshift(""),this.path(z.join(L),R)},s.segmentCoded=function(B,T,R){var L,G,q;if(typeof B!="number"&&(R=T,T=B,B=void 0),T===void 0){if(L=this.segment(B,T,R),!h(L))L=L!==void 0?r.decode(L):void 0;else for(G=0,q=L.length;G<q;G++)L[G]=r.decode(L[G]);return L}if(!h(T))T=typeof T=="string"||T instanceof String?r.encode(T):T;else for(G=0,q=T.length;G<q;G++)T[G]=r.encode(T[G]);return this.segment(B,T,R)};var d=s.query;return s.query=function(B,T){if(B===!0)return r.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if(typeof B=="function"){var R=r.parseQuery(this._parts.query,this._parts.escapeQuerySpace),L=B.call(this,R);return this._parts.query=r.buildQuery(L||R,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!T),this}else return B!==void 0&&typeof B!="string"?(this._parts.query=r.buildQuery(B,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!T),this):d.call(this,B,T)},s.setQuery=function(B,T,R){var L=r.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if(typeof B=="string"||B instanceof String)L[B]=T!==void 0?T:null;else if(typeof B=="object")for(var G in B)A.call(B,G)&&(L[G]=B[G]);else throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");return this._parts.query=r.buildQuery(L,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),typeof B!="string"&&(R=T),this.build(!R),this},s.addQuery=function(B,T,R){var L=r.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return r.addQuery(L,B,T===void 0?null:T),this._parts.query=r.buildQuery(L,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),typeof B!="string"&&(R=T),this.build(!R),this},s.removeQuery=function(B,T,R){var L=r.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return r.removeQuery(L,B,T),this._parts.query=r.buildQuery(L,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),typeof B!="string"&&(R=T),this.build(!R),this},s.hasQuery=function(B,T,R){var L=r.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return r.hasQuery(L,B,T,R)},s.setSearch=s.setQuery,s.addSearch=s.addQuery,s.removeSearch=s.removeQuery,s.hasSearch=s.hasQuery,s.normalize=function(){return this._parts.urn?this.normalizeProtocol(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build():this.normalizeProtocol(!1).normalizeHostname(!1).normalizePort(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build()},s.normalizeProtocol=function(B){return typeof this._parts.protocol=="string"&&(this._parts.protocol=this._parts.protocol.toLowerCase(),this.build(!B)),this},s.normalizeHostname=function(B){return this._parts.hostname&&(this.is("IDN")&&e?this._parts.hostname=e.toASCII(this._parts.hostname):this.is("IPv6")&&t&&(this._parts.hostname=t.best(this._parts.hostname)),this._parts.hostname=this._parts.hostname.toLowerCase(),this.build(!B)),this},s.normalizePort=function(B){return typeof this._parts.protocol=="string"&&this._parts.port===r.defaultPorts[this._parts.protocol]&&(this._parts.port=null,this.build(!B)),this},s.normalizePath=function(B){var T=this._parts.path;if(!T)return this;if(this._parts.urn)return this._parts.path=r.recodeUrnPath(this._parts.path),this.build(!B),this;if(this._parts.path==="/")return this;T=r.recodePath(T);var R,L="",G,q;for(T.charAt(0)!=="/"&&(R=!0,T="/"+T),(T.slice(-3)==="/.."||T.slice(-2)==="/.")&&(T+="/"),T=T.replace(/(\/(\.\/)+)|(\/\.$)/g,"/").replace(/\/{2,}/g,"/"),R&&(L=T.substring(1).match(/^(\.\.\/)+/)||"",L&&(L=L[0]));G=T.search(/\/\.\.(\/|$)/),G!==-1;){if(G===0){T=T.substring(3);continue}q=T.substring(0,G).lastIndexOf("/"),q===-1&&(q=G),T=T.substring(0,q)+T.substring(G+3)}return R&&this.is("relative")&&(T=L+T.substring(1)),this._parts.path=T,this.build(!B),this},s.normalizePathname=s.normalizePath,s.normalizeQuery=function(B){return typeof this._parts.query=="string"&&(this._parts.query.length?this.query(r.parseQuery(this._parts.query,this._parts.escapeQuerySpace)):this._parts.query=null,this.build(!B)),this},s.normalizeFragment=function(B){return this._parts.fragment||(this._parts.fragment=null,this.build(!B)),this},s.normalizeSearch=s.normalizeQuery,s.normalizeHash=s.normalizeFragment,s.iso8859=function(){var B=r.encode,T=r.decode;r.encode=escape,r.decode=decodeURIComponent;try{this.normalize()}finally{r.encode=B,r.decode=T}return this},s.unicode=function(){var B=r.encode,T=r.decode;r.encode=E,r.decode=unescape;try{this.normalize()}finally{r.encode=B,r.decode=T}return this},s.readable=function(){var B=this.clone();B.username("").password("").normalize();var T="";if(B._parts.protocol&&(T+=B._parts.protocol+"://"),B._parts.hostname&&(B.is("punycode")&&e?(T+=e.toUnicode(B._parts.hostname),B._parts.port&&(T+=":"+B._parts.port)):T+=B.host()),B._parts.hostname&&B._parts.path&&B._parts.path.charAt(0)!=="/"&&(T+="/"),T+=B.path(!0),B._parts.query){for(var R="",L=0,G=B._parts.query.split("&"),q=G.length;L<q;L++){var z=(G[L]||"").split("=");R+="&"+r.decodeQuery(z[0],this._parts.escapeQuerySpace).replace(/&/g,"%26"),z[1]!==void 0&&(R+="="+r.decodeQuery(z[1],this._parts.escapeQuerySpace).replace(/&/g,"%26"))}T+="?"+R.substring(1)}return T+=r.decodeQuery(B.hash(),!0),T},s.absoluteTo=function(B){var T=this.clone(),R=["protocol","username","password","hostname","port"],L,G,q;if(this._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(B instanceof r||(B=new r(B)),T._parts.protocol||(T._parts.protocol=B._parts.protocol,this._parts.hostname))return T;for(G=0;q=R[G];G++)T._parts[q]=B._parts[q];return T._parts.path?(T._parts.path.substring(-2)===".."&&(T._parts.path+="/"),T.path().charAt(0)!=="/"&&(L=B.directory(),L=L||(B.path().indexOf("/")===0?"/":""),T._parts.path=(L?L+"/":"")+T._parts.path,T.normalizePath())):(T._parts.path=B._parts.path,T._parts.query||(T._parts.query=B._parts.query)),T.build(),T},s.relativeTo=function(B){var T=this.clone().normalize(),R,L,G,q,z;if(T._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(B=new r(B).normalize(),R=T._parts,L=B._parts,q=T.path(),z=B.path(),q.charAt(0)!=="/")throw new Error("URI is already relative");if(z.charAt(0)!=="/")throw new Error("Cannot calculate a URI relative to another relative URI");if(R.protocol===L.protocol&&(R.protocol=null),R.username!==L.username||R.password!==L.password||R.protocol!==null||R.username!==null||R.password!==null)return T.build();if(R.hostname===L.hostname&&R.port===L.port)R.hostname=null,R.port=null;else return T.build();if(q===z)return R.path="",T.build();if(G=r.commonPath(q,z),!G)return T.build();var K=L.path.substring(G.length).replace(/[^\/]*$/,"").replace(/.*?\//g,"../");return R.path=K+R.path.substring(G.length)||"./",T.build()},s.equals=function(B){var T=this.clone(),R=new r(B),L={},G={},q={},z,K,ie;if(T.normalize(),R.normalize(),T.toString()===R.toString())return!0;if(z=T.query(),K=R.query(),T.query(""),R.query(""),T.toString()!==R.toString()||z.length!==K.length)return!1;L=r.parseQuery(z,this._parts.escapeQuerySpace),G=r.parseQuery(K,this._parts.escapeQuerySpace);for(ie in L)if(A.call(L,ie)){if(h(L[ie])){if(!g(L[ie],G[ie]))return!1}else if(L[ie]!==G[ie])return!1;q[ie]=!0}for(ie in G)if(A.call(G,ie)&&!q[ie])return!1;return!0},s.preventInvalidHostname=function(B){return this._parts.preventInvalidHostname=!!B,this},s.duplicateQueryParameters=function(B){return this._parts.duplicateQueryParameters=!!B,this},s.escapeQuerySpace=function(B){return this._parts.escapeQuerySpace=!!B,this},r})});var cU=ys((VC,VS)=>{var Ab=(function(){"use strict";var e="b9H79Tebbbe9ok9Geueu9Geub9Gbb9Gruuuuuuueu9Gvuuuuueu9Gduueu9Gluuuueu9Gvuuuuub9Gouuuuuub9Gluuuub9GiuuueuiE8AdilveoveovrrwrrrDDoDrbqqbelve9Weiiviebeoweuec;G:Qdkr:PlCo9TW9T9VV95dbH9F9F939H79T9F9J9H229F9Jt9VV7bb8F9TW79O9V9Wt9FW9U9J9V9KW9wWVtW949c919M9MWV9mW4W2be8A9TW79O9V9Wt9FW9U9J9V9KW9wWVtW949c919M9MWVbd8F9TW79O9V9Wt9FW9U9J9V9KW9wWVtW949c919M9MWV9c9V919U9KbiE9TW79O9V9Wt9FW9U9J9V9KW9wWVtW949wWV79P9V9UblY9TW79O9V9Wt9FW9U9J9V9KW69U9KW949c919M9MWVbv8E9TW79O9V9Wt9FW9U9J9V9KW69U9KW949c919M9MWV9c9V919U9Kbo8A9TW79O9V9Wt9FW9U9J9V9KW69U9KW949wWV79P9V9UbrE9TW79O9V9Wt9FW9U9J9V9KW69U9KW949tWG91W9U9JWbwa9TW79O9V9Wt9FW9U9J9V9KW69U9KW949tWG91W9U9JW9c9V919U9KbDL9TW79O9V9Wt9FW9U9J9V9KWS9P2tWV9p9JtbqK9TW79O9V9Wt9FW9U9J9V9KWS9P2tWV9r919HtbkL9TW79O9V9Wt9FW9U9J9V9KWS9P2tWVT949WbxY9TW79O9V9Wt9FW9U9J9V9KWS9P2tWVJ9V29VVbmE9TW79O9V9Wt9F9V9Wt9P9T9P96W9wWVtW94J9H9J9OWbza9TW79O9V9Wt9F9V9Wt9P9T9P96W9wWVtW94J9H9J9OW9ttV9P9WbHa9TW79O9V9Wt9F9V9Wt9P9T9P96W9wWVtW94SWt9J9O9sW9T9H9WbOK9TW79O9V9Wt9F79W9Ht9P9H29t9VVt9sW9T9H9WbAl79IV9RbXDwebcekdKYq;i28Adbk:Bhdhud9:8Jjjjjbc;qw9Rgr8KjjjjbcbhwdnaeTmbabcbyd;C:kjjbaoaocb9iEgDc:GeV86bbarc;adfcbcjdz:xjjjb8AdnaiTmbarc;adfadalz:wjjjb8Akarc;abfalfcbcbcjdal9RalcFe0Ez:xjjjb8Aarc;abfarc;adfalz:wjjjb8AarcUf9cb83ibarc8Wf9cb83ibarcyf9cb83ibarcaf9cb83ibarcKf9cb83ibarczf9cb83ibar9cb83iwar9cb83ibcj;abal9Uc;WFbGcjdalca0Ehqdnaicd6mbavcd9imbaDTmbadcefhkaqci2gxal2hmarc;alfclfhParc;qlfceVhsarc;qofclVhzarc;qofcKfhHarc;qofczfhOcbhAincdhCcbhodnavci6mbaH9cb83ibaO9cb83ibar9cb83i;yoar9cb83i;qoadaAfgoybbhXcbhQincbhwcbhLdninaoalfhKaoybbgYaX7aLVhLawcP0meaKhoaYhXawcefgwaQfai6mbkkcbhXarc;qofhwincwh8AcwhEdnaLaX93gocFeGg3cs0mbclhEa3ci0mba3cb9hcethEkdnaocw4cFeGg3cs0mbclh8Aa3ci0mba3cb9hceth8Aka8AaEfh3awydbh5cwh8AcwhEdnaocz4cFeGg8Ecs0mbclhEa8Eci0mba8Ecb9hcethEka3a5fh3dnaocFFFFb0mbclh8AaocFFF8F0mbaocFFFr0ceth8Akawa3aEfa8AfBdbawclfhwaXcefgXcw9hmbkaKhoaYhXaQczfgQai6mbkcbhocehwazhLinawaoaLydbarc;qofaocdtfydb6EhoaLclfhLawcefgwcw9hmbkcihCkcbh3arc;qlfcbcjdz:xjjjb8Aarc;alfcwfcbBdbar9cb83i;alaoclth8Fadhaaqhhakh5inarc;qlfadcba3cufgoaoa30Eal2falz:wjjjb8Aaiahaiah6Ehgdnaqaia39Ra3aqfai6EgYcsfc9WGgoaY9nmbarc;qofaYfcbaoaY9Rz:xjjjb8Akada3al2fh8Jcbh8Kina8Ka8FVcl4hQarc;alfa8Kcdtfh8LaAh8Mcbh8Nina8NaAfhwdndndndndndna8KPldebidkasa8Mc98GgLfhoa5aLfh8Aarc;qlfawc98GgLfRbbhXcwhwinaoRbbawtaXVhXaocefhoawcwfgwca9hmbkaYTmla8Ncith8Ea8JaLfhEcbhKinaERbbhLcwhoa8AhwinawRbbaotaLVhLawcefhwaocwfgoca9hmbkarc;qofaKfaLaX7aQ93a8E486bba8Aalfh8AaEalfhEaLhXaKcefgKaY9hmbxlkkaYTmia8Mc9:Ghoa8NcitcwGhEarc;qlfawceVfRbbcwtarc;qlfawc9:GfRbbVhLarc;qofhwaghXinawa5aofRbbcwtaaaofRbbVg8AaL9RgLcetaLcztcz91cs47cFFiGaE486bbaoalfhoawcefhwa8AhLa3aXcufgX9hmbxikkaYTmda8Jawfhoarc;qlfawfRbbhLarc;qofhwaghXinawaoRbbg8AaL9RgLcetaLcKtcK91cr4786bbawcefhwaoalfhoa8AhLa3aXcufgX9hmbxdkkaYTmeka8LydbhEcbhKarc;qofhoincdhLcbhwinaLaoawfRbbcb9hfhLawcefgwcz9hmbkclhXcbhwinaXaoawfRbbcd0fhXawcefgwcz9hmbkcwh8Acbhwina8AaoawfRbbcP0fh8Aawcefgwcz9hmbkaLaXaLaX6Egwa8Aawa8A6Egwczawcz6EaEfhEaoczfhoaKczfgKaY6mbka8LaEBdbka8Mcefh8Ma8Ncefg8Ncl9hmbka8Kcefg8KaC9hmbkaaamfhaahaxfhha5amfh5a3axfg3ai6mbkcbhocehwaPhLinawaoaLydbarc;alfaocdtfydb6EhoaLclfhLawcefgXhwaCaX9hmbkaraAcd4fa8FcdVaoaocdSE86bbaAclfgAal6mbkkabaefh8Kabcefhoalcd4gecbaDEhkadcefhOarc;abfceVhHcbhmdndninaiam9nmearc;qofcbcjdz:xjjjb8Aa8Kao9Rak6mdadamal2gwfhxcbh8JaOawfhzaocbakz:xjjjbghakfh5aqaiam9Ramaqfai6Egscsfgocl4cifcd4hCaoc9WGg8LThPindndndndndndndndndndnaDTmbara8Jcd4fRbbgLciGPlbedlbkasTmdaxa8Jfhoarc;abfa8JfRbbhLarc;qofhwashXinawaoRbbg8AaL9RgLcetaLcKtcK91cr4786bbawcefhwaoalfhoa8AhLaXcufgXmbxikkasTmia8JcitcwGhEarc;abfa8JceVfRbbcwtarc;abfa8Jc9:GgofRbbVhLaxaofhoarc;qofhwashXinawao8Vbbg8AaL9RgLcetaLcztcz91cs47cFFiGaE486bbawcefhwaoalfhoa8AhLaXcufgXmbxdkkaHa8Jc98GgEfhoazaEfh8Aarc;abfaEfRbbhXcwhwinaoRbbawtaXVhXaocefhoawcwfgwca9hmbkasTmbaLcl4hYa8JcitcKGh3axaEfhEcbhKinaERbbhLcwhoa8AhwinawRbbaotaLVhLawcefhwaocwfgoca9hmbkarc;qofaKfaLaX7aY93a3486bba8Aalfh8AaEalfhEaLhXaKcefgKas9hmbkkaDmbcbhoxlka8LTmbcbhodninarc;qofaofgwcwf8Pibaw8Pib:e9qTmeaoczfgoa8L9pmdxbkkdnavmbcehoxikcbhEaChKaChYinarc;qofaEfgocwf8Pibhyao8Pibh8PcdhLcbhwinaLaoawfRbbcb9hfhLawcefgwcz9hmbkclhXcbhwinaXaoawfRbbcd0fhXawcefgwcz9hmbkcwh8Acbhwina8AaoawfRbbcP0fh8Aawcefgwcz9hmbkaLaXaLaX6Egoa8Aaoa8A6Egoczaocz6EaYfhYaocucbaya8P:e9cb9sEgwaoaw6EaKfhKaEczfgEa8L9pmdxbkkaha8Jcd4fgoaoRbbcda8JcetcoGtV86bbxikdnaKas6mbaYas6mbaha8Jcd4fgoaoRbbcia8JcetcoGtV86bba8Ka59Ras6mra5arc;qofasz:wjjjbasfh5xikaKaY9phokaha8Jcd4fgwawRbbaoa8JcetcoGtV86bbka8Ka59RaC6mla5cbaCz:xjjjbgAaCfhYdndna8LmbaPhoxekdna8KaY9RcK9pmbaPhoxekaocdtc:q1jjbfcj1jjbaDEg5ydxggcetc;:FFFeGh8Fcuh3cuagtcu7cFeGhacbh8Marc;qofhLinarc;qofa8MfhQczhEdndndnagPDbeeeeeeedekcucbaQcwf8PibaQ8Pib:e9cb9sEhExekcbhoa8FhEinaEaaaLaofRbb9nfhEaocefgocz9hmbkkcih8Ecbh8Ainczhwdndndna5a8AcdtfydbgKPDbeeeeeeedekcucbaQcwf8PibaQ8Pib:e9cb9sEhwxekaKcetc;:FFFeGhwcuaKtcu7cFeGhXcbhoinawaXaLaofRbb9nfhwaocefgocz9hmbkkdndnawaE6mbaKa39hmeawaE9hmea5a8EcdtfydbcwSmeka8Ah8EawhEka8Acefg8Aci9hmbkaAa8Mco4fgoaoRbba8Ea8Mci4coGtV86bbdndndna5a8Ecdtfydbg3PDdbbbbbbbebkdncwa39Tg8ETmbcua3tcu7hwdndna3ceSmbcbh8NaLhQinaQhoa8Eh8AcbhXinaoRbbgEawcFeGgKaEaK6EaXa3tVhXaocefhoa8Acufg8AmbkaYaX86bbaQa8EfhQaYcefhYa8Na8Efg8Ncz6mbxdkkcbh8NaLhQinaQhoa8Eh8AcbhXinaoRbbgEawcFeGgKaEaK6EaXcetVhXaocefhoa8Acufg8AmbkaYaX:T9cFe:d9c:c:qj:bw9:9c:q;c1:I1e:d9c:b:c:e1z9:9ca188bbaQa8EfhQaYcefhYa8Na8Efg8Ncz6mbkkcbhoinaYaLaofRbbgX86bbaYaXawcFeG9pfhYaocefgocz9hmbxikkdna3ceSmbinaYcb86bbaYcefhYxbkkinaYcb86bbaYcefhYxbkkaYaQ8Pbb83bbaYcwfaQcwf8Pbb83bbaYczfhYka8Mczfg8Ma8L9pgomeaLczfhLa8KaY9RcK9pmbkkaoTmlaYh5aYTmlka8Jcefg8Jal9hmbkarc;abfaxascufal2falz:wjjjb8Aasamfhma5hoa5mbkcbhwxdkdna8Kao9RakalfgwcKcaaDEgLawaL0EgX9pmbcbhwxdkdnawaL9pmbaocbaXaw9Rgwz:xjjjbawfhokaoarc;adfalz:wjjjbalfhodnaDTmbaoaraez:wjjjbaefhokaoab9Rhwxekcbhwkarc;qwf8Kjjjjbawk5babaeadaialcdcbyd;C:kjjbz:bjjjbk9reduaecd4gdaefgicaaica0Eabcj;abae9Uc;WFbGcjdaeca0Egifcufai9Uae2aiadfaicl4cifcd4f2fcefkmbcbabBd;C:kjjbk:Ese5u8Jjjjjbc;ae9Rgl8Kjjjjbcbhvdnaici9UgocHfae0mbabcbyd;m:kjjbgrc;GeV86bbalc;abfcFecjez:xjjjb8AalcUfgw9cu83ibalc8WfgD9cu83ibalcyfgq9cu83ibalcafgk9cu83ibalcKfgx9cu83ibalczfgm9cu83ibal9cu83iwal9cu83ibabaefc9WfhPabcefgsaofhednaiTmbcmcsarcb9kgzEhHcbhOcbhAcbhCcbhXcbhQindnaeaP9nmbcbhvxikaQcufhvadaCcdtfgLydbhKaLcwfydbhYaLclfydbh8AcbhEdndndninalc;abfavcsGcitfgoydlh3dndndnaoydbgoaK9hmba3a8ASmekdnaoa8A9hmba3aY9hmbaEcefhExekaoaY9hmea3aK9hmeaEcdfhEkaEc870mdaXcufhvaLaEciGcx2goc;i1jjbfydbcdtfydbh3aLaoc;e1jjbfydbcdtfydbh8AaLaoc;a1jjbfydbcdtfydbhKcbhodnindnalavcsGcdtfydba39hmbaohYxdkcuhYavcufhvaocefgocz9hmbkkaOa3aOSgvaYce9iaYaH9oVgoGfhOdndndncbcsavEaYaoEgvcs9hmbarce9imba3a3aAa3cefaASgvEgAcefSmecmcsavEhvkasavaEcdtc;WeGV86bbavcs9hmea3aA9Rgvcetavc8F917hvinaeavcFb0crtavcFbGV86bbaecefheavcje6hoavcr4hvaoTmbka3hAxvkcPhvasaEcdtcPV86bba3hAkavTmiavaH9omicdhocehEaQhYxlkavcufhvaEclfgEc;ab9hmbkkdnaLceaYaOSceta8AaOSEcx2gvc;a1jjbfydbcdtfydbgKTaLavc;e1jjbfydbcdtfydbg8AceSGaLavc;i1jjbfydbcdtfydbg3cdSGaOcb9hGazGg5ce9hmbaw9cu83ibaD9cu83ibaq9cu83ibak9cu83ibax9cu83ibam9cu83ibal9cu83iwal9cu83ibcbhOkcbhEaXcufgvhodnindnalaocsGcdtfydba8A9hmbaEhYxdkcuhYaocufhoaEcefgEcz9hmbkkcbhodnindnalavcsGcdtfydba39hmbaohExdkcuhEavcufhvaocefgocz9hmbkkaOaKaOSg8EfhLdndnaYcm0mbaYcefhYxekcbcsa8AaLSgvEhYaLavfhLkdndnaEcm0mbaEcefhExekcbcsa3aLSgvEhEaLavfhLkc9:cua8EEh8FcbhvaEaYcltVgacFeGhodndndninavc:W1jjbfRbbaoSmeavcefgvcz9hmbxdkka5aKaO9havcm0VVmbasavc;WeV86bbxekasa8F86bbaeaa86bbaecefhekdna8EmbaKaA9Rgvcetavc8F917hvinaeavcFb0gocrtavcFbGV86bbavcr4hvaecefheaombkaKhAkdnaYcs9hmba8AaA9Rgvcetavc8F917hvinaeavcFb0gocrtavcFbGV86bbavcr4hvaecefheaombka8AhAkdnaEcs9hmba3aA9Rgvcetavc8F917hvinaeavcFb0gocrtavcFbGV86bbavcr4hvaecefheaombka3hAkalaXcdtfaKBdbaXcefcsGhvdndnaYPzbeeeeeeeeeeeeeebekalavcdtfa8ABdbaXcdfcsGhvkdndnaEPzbeeeeeeeeeeeeeebekalavcdtfa3BdbavcefcsGhvkcihoalc;abfaQcitfgEaKBdlaEa8ABdbaQcefcsGhYcdhEavhXaLhOxekcdhoalaXcdtfa3BdbcehEaXcefcsGhXaQhYkalc;abfaYcitfgva8ABdlava3Bdbalc;abfaQaEfcsGcitfgva3BdlavaKBdbascefhsaQaofcsGhQaCcifgCai6mbkkdnaeaP9nmbcbhvxekcbhvinaeavfavc:W1jjbfRbb86bbavcefgvcz9hmbkaeab9Ravfhvkalc;aef8KjjjjbavkZeeucbhddninadcefgdc8F0meceadtae6mbkkadcrfcFeGcr9Uci2cdfabci9U2cHfkmbcbabBd;m:kjjbk:Adewu8Jjjjjbcz9Rhlcbhvdnaicvfae0mbcbhvabcbRb;m:kjjbc;qeV86bbal9cb83iwabcefhoabaefc98fhrdnaiTmbcbhwcbhDindnaoar6mbcbskadaDcdtfydbgqalcwfawaqav9Rgvavc8F91gv7av9Rc507gwcdtfgkydb9Rgvc8E91c9:Gavcdt7awVhvinaoavcFb0gecrtavcFbGV86bbavcr4hvaocefhoaembkakaqBdbaqhvaDcefgDai9hmbkkdnaoar9nmbcbskaocbBbbaoab9RclfhvkavkBeeucbhddninadcefgdc8F0meceadtae6mbkkadcwfcFeGcr9Uab2cvfk:bvli99dui99ludnaeTmbcuadcetcuftcu7:Zhvdndncuaicuftcu7:ZgoJbbbZMgr:lJbbb9p9DTmbar:Ohwxekcjjjj94hwkcbhicbhDinalclfIdbgrJbbbbJbbjZalIdbgq:lar:lMalcwfIdbgk:lMgr:varJbbbb9BEgrNhxaqarNhrdndnakJbbbb9GTmbaxhqxekJbbjZar:l:tgqaq:maxJbbbb9GEhqJbbjZax:l:tgxax:marJbbbb9GEhrkdndnalcxfIdbgxJbbj:;axJbbj:;9GEgkJbbjZakJbbjZ9FEavNJbbbZJbbb:;axJbbbb9GEMgx:lJbbb9p9DTmbax:Ohmxekcjjjj94hmkdndnaqJbbj:;aqJbbj:;9GEgxJbbjZaxJbbjZ9FEaoNJbbbZJbbb:;aqJbbbb9GEMgq:lJbbb9p9DTmbaq:OhPxekcjjjj94hPkdndnarJbbj:;arJbbj:;9GEgqJbbjZaqJbbjZ9FEaoNJbbbZJbbb:;arJbbbb9GEMgr:lJbbb9p9DTmbar:Ohsxekcjjjj94hskdndnadcl9hmbabaifgzas86bbazcifam86bbazcdfaw86bbazcefaP86bbxekabaDfgzas87ebazcofam87ebazclfaw87ebazcdfaP87ebkalczfhlaiclfhiaDcwfhDaecufgembkkk;hlld99eud99eudnaeTmbdndncuaicuftcu7:ZgvJbbbZMgo:lJbbb9p9DTmbao:Ohixekcjjjj94hikaic;8FiGhrinabcofcicdalclfIdb:lalIdb:l9EgialcwfIdb:lalaicdtfIdb:l9EEgialcxfIdb:lalaicdtfIdb:l9EEgiarV87ebdndnJbbj:;JbbjZalaicdtfIdbJbbbb9DEgoalaicd7cdtfIdbJ;Zl:1ZNNgwJbbj:;awJbbj:;9GEgDJbbjZaDJbbjZ9FEavNJbbbZJbbb:;awJbbbb9GEMgw:lJbbb9p9DTmbaw:Ohqxekcjjjj94hqkabcdfaq87ebdndnalaicefciGcdtfIdbJ;Zl:1ZNaoNgwJbbj:;awJbbj:;9GEgDJbbjZaDJbbjZ9FEavNJbbbZJbbb:;awJbbbb9GEMgw:lJbbb9p9DTmbaw:Ohqxekcjjjj94hqkabaq87ebdndnaoalaicufciGcdtfIdbJ;Zl:1ZNNgoJbbj:;aoJbbj:;9GEgwJbbjZawJbbjZ9FEavNJbbbZJbbb:;aoJbbbb9GEMgo:lJbbb9p9DTmbao:Ohixekcjjjj94hikabclfai87ebabcwfhbalczfhlaecufgembkkk;3viDue99eu8Jjjjjbcjd9Rgo8Kjjjjbadcd4hrdndndndnavcd9hmbadcl6meaohwarhDinawc:CuBdbawclfhwaDcufgDmbkaeTmiadcl6mdarcdthqalhkcbhxinaohwakhDarhminawawydbgPcbaDIdbgs:8cL4cFeGc:cufasJbbbb9BEgzaPaz9kEBdbaDclfhDawclfhwamcufgmmbkakaqfhkaxcefgxaeSmixbkkaeTmdxekaeTmekarcdthkavce9hhqadcl6hdcbhxindndndnaqmbadmdc:CuhDalhwarhminaDcbawIdbgs:8cL4cFeGc:cufasJbbbb9BEgPaDaP9kEhDawclfhwamcufgmmbxdkkc:CuhDdndnavPleddbdkadmdaohwalhmarhPinawcbamIdbgs:8cL4cFeGgzc;:bazc;:b0Ec:cufasJbbbb9BEBdbamclfhmawclfhwaPcufgPmbxdkkadmecbhwarhminaoawfcbalawfIdbgs:8cL4cFeGgPc8AaPc8A0Ec:cufasJbbbb9BEBdbawclfhwamcufgmmbkkadmbcbhwarhPinaDhmdnavceSmbaoawfydbhmkdndnalawfIdbgscjjj;8iamai9RcefgmcLt9R::NJbbbZJbbb:;asJbbbb9GEMgs:lJbbb9p9DTmbas:Ohzxekcjjjj94hzkabawfazcFFFrGamcKtVBdbawclfhwaPcufgPmbkkabakfhbalakfhlaxcefgxae9hmbkkaocjdf8Kjjjjbk:Ylvdud99due99iudnaeTmbceaicufgvthocuaitcu7:Zhrcuavtcu7:Zhwcbhvadcl9hhDcbhqindndnalcwfIdbgkJbbbbakJbbbb9GEgkJbbjZakJbbjZ9FEarNJbbbZMgk:lJbbb9p9DTmbak:Ohixekcjjjj94hikdndnalIdbgkJbbbbakJbbbb9GEgkJbbjZakJbbjZ9FEarNJbbbZMgk:lJbbb9p9DTmbak:Ohdxekcjjjj94hdkadai9Rcd9TgxaifhidndnalclfIdbgkJbbbbakJbbbb9GEgkJbbjZakJbbjZ9FEarNJbbbZMgk:lJbbb9p9DTmbak:Ohdxekcjjjj94hdkadai9Rcd9ThddndnalcxfIdbgkJbbbbakJbbbb9GEgkJbbjZakJbbjZ9FEawNJbbbZMgk:lJbbb9p9DTmbak:Ohmxekcjjjj94hmkadaifhiaoamVhmdndnaDmbabavfgPai86bbaPcifam86bbaPcdfad86bbaPcefax86bbxekabaqfgPai87ebaPcofam87ebaPclfad87ebaPcdfax87ebkalczfhlavclfhvaqcwfhqaecufgembkkk;YqdXui998Jjjjjbc:qd9Rgv8Kjjjjbavc:Sefcbc;Kbz:xjjjb8AcbhodnadTmbcbhoaiTmbdndnabaeSmbaehrxekavcuadcdtgwadcFFFFi0Ecbyd;q:kjjbHjjjjbbgrBd:SeavceBd:mdaraeawz:wjjjb8Akavc:GefcwfcbBdbav9cb83i:Geavc:Gefaradaiavc:Sefz:pjjjbavyd:GehDadci9Ugqcbyd;q:kjjbHjjjjbbheavc:Sefavyd:mdgkcdtfaeBdbavakcefgwBd:mdaecbaqz:xjjjbhxavc:SefawcdtfcuaicdtaicFFFFi0Ecbyd;q:kjjbHjjjjbbgmBdbavakcdfgPBd:mdalc;ebfhsaDheamhwinawalIdbasaeydbgzcwazcw6EcdtfIdbMUdbaeclfheawclfhwaicufgimbkavc:SefaPcdtfcuaqcdtadcFFFF970Ecbyd;q:kjjbHjjjjbbgPBdbdnadci6mbarheaPhwaqhiinawamaeydbcdtfIdbamaeclfydbcdtfIdbMamaecwfydbcdtfIdbMUdbaecxfheawclfhwaicufgimbkkakcifhoalc;ebfhHavc;qbfhOavheavyd:KehAavyd:OehCcbhzcbhwcbhXcehQinaehLcihkarawci2gKcdtfgeydbhsaeclfydbhdabaXcx2fgicwfaecwfydbgYBdbaiclfadBdbaiasBdbaxawfce86bbaOaYBdwaOadBdlaOasBdbaPawcdtfcbBdbdnazTmbcihkaLhiinaOakcdtfaiydbgeBdbakaeaY9haeas9haead9hGGfhkaiclfhiazcufgzmbkkaXcefhXcbhzinaCaAarazaKfcdtfydbcdtgifydbcdtfgYheaDaifgdydbgshidnasTmbdninaeydbawSmeaeclfheaicufgiTmdxbkkaeaYascdtfc98fydbBdbadadydbcufBdbkazcefgzci9hmbkdndnakTmbcuhwJbbbbh8Acbhdavyd:KehYavyd:OehKindndnaDaOadcdtfydbcdtgzfydbgembadcefhdxekadcs0hiamazfgsIdbhEasalcbadcefgdaiEcdtfIdbaHaecwaecw6EcdtfIdbMg3Udba3aE:th3aecdthiaKaYazfydbcdtfheinaPaeydbgzcdtfgsa3asIdbMgEUdbaEa8Aa8AaE9DgsEh8AazawasEhwaeclfheaic98fgimbkkadak9hmbkawcu9hmekaQaq9pmdindnaxaQfRbbmbaQhwxdkaqaQcefgQ9hmbxikkakczakcz6EhzaOheaLhOawcu9hmbkkaocdtavc:Seffc98fhedninaoTmeaeydbcbyd;u:kjjbH:bjjjbbaec98fheaocufhoxbkkavc:qdf8Kjjjjbk;IlevucuaicdtgvaicFFFFi0Egocbyd;q:kjjbHjjjjbbhralalyd9GgwcdtfarBdbalawcefBd9GabarBdbaocbyd;q:kjjbHjjjjbbhralalyd9GgocdtfarBdbalaocefBd9GabarBdlcuadcdtadcFFFFi0Ecbyd;q:kjjbHjjjjbbhralalyd9GgocdtfarBdbalaocefBd9GabarBdwabydbcbavz:xjjjb8Aadci9UhDdnadTmbabydbhoaehladhrinaoalydbcdtfgvavydbcefBdbalclfhlarcufgrmbkkdnaiTmbabydbhlabydlhrcbhvaihoinaravBdbarclfhralydbavfhvalclfhlaocufgombkkdnadci6mbabydlhrabydwhvcbhlinaecwfydbhoaeclfydbhdaraeydbcdtfgwawydbgwcefBdbavawcdtfalBdbaradcdtfgdadydbgdcefBdbavadcdtfalBdbaraocdtfgoaoydbgocefBdbavaocdtfalBdbaecxfheaDalcefgl9hmbkkdnaiTmbabydlheabydbhlinaeaeydbalydb9RBdbalclfhlaeclfheaicufgimbkkkQbabaeadaic;K1jjbz:ojjjbkQbabaeadaic;m:jjjbz:ojjjbk9DeeuabcFeaicdtz:xjjjbhlcbhbdnadTmbindnalaeydbcdtfgiydbcu9hmbaiabBdbabcefhbkaeclfheadcufgdmbkkabk:Vvioud9:du8Jjjjjbc;Wa9Rgl8Kjjjjbcbhvalcxfcbc;Kbz:xjjjb8AalcuadcitgoadcFFFFe0Ecbyd;q:kjjbHjjjjbbgrBdxalceBd2araeadaicezNjjjbalcuaoadcjjjjoGEcbyd;q:kjjbHjjjjbbgwBdzadcdthednadTmbabhiinaiavBdbaiclfhiadavcefgv9hmbkkawaefhDalabBdwalawBdl9cbhqindnadTmbaq9cq9:hkarhvaDhiadheinaiav8Pibak1:NcFrG87ebavcwfhvaicdfhiaecufgembkkalclfaq:NceGcdtfydbhxalclfaq9ce98gq:NceGcdtfydbhmalc;Wbfcbcjaz:xjjjb8AaDhvadhidnadTmbinalc;Wbfav8VebcdtfgeaeydbcefBdbavcdfhvaicufgimbkkcbhvcbhiinalc;WbfavfgeydbhoaeaiBdbaoaifhiavclfgvcja9hmbkadhvdndnadTmbinalc;WbfaDamydbgicetf8VebcdtfgeaeydbgecefBdbaxaecdtfaiBdbamclfhmavcufgvmbkaq9cv9smdcbhvinabawydbcdtfavBdbawclfhwadavcefgv9hmbxdkkaq9cv9smekkclhvdninavc98Smealcxfavfydbcbyd;u:kjjbH:bjjjbbavc98fhvxbkkalc;Waf8Kjjjjbk:Jwliuo99iud9:cbhv8Jjjjjbca9Rgoczfcwfcbyd:8:kjjbBdbaocb8Pd:0:kjjb83izaocwfcbyd;i:kjjbBdbaocb8Pd;a:kjjb83ibaicd4hrdndnadmbJFFuFhwJFFuuhDJFFuuhqJFFuFhkJFFuuhxJFFuFhmxekarcdthPaehsincbhiinaoczfaifgzasaifIdbgwazIdbgDaDaw9EEUdbaoaifgzawazIdbgDaDaw9DEUdbaiclfgicx9hmbkasaPfhsavcefgvad9hmbkaoIdKhDaoIdwhwaoIdChqaoIdlhkaoIdzhxaoIdbhmkdnadTmbJbbbbJbFu9hJbbbbamax:tgmamJbbbb9DEgmakaq:tgkakam9DEgkawaD:tgwawak9DEgw:vawJbbbb9BEhwdnalmbarcdthoindndnaeclfIdbaq:tawNJbbbZMgk:lJbbb9p9DTmbak:Ohixekcjjjj94hikai:S9cC:ghHdndnaeIdbax:tawNJbbbZMgk:lJbbb9p9DTmbak:Ohixekcjjjj94hikaHai:S:ehHdndnaecwfIdbaD:tawNJbbbZMgk:lJbbb9p9DTmbak:Ohixekcjjjj94hikabaHai:T9cy:g:e83ibaeaofheabcwfhbadcufgdmbxdkkarcdthoindndnaeIdbax:tawNJbbbZMgk:lJbbb9p9DTmbak:Ohixekcjjjj94hikai:SgH9ca:gaH9cz:g9cjjj;4s:d:eaH9cFe:d:e9cF:bj;4:pj;ar:d9c:bd9:9c:p;G:d;4j:E;ar:d9cH9:9c;d;H:W:y:m:g;d;Hb:d9cv9:9c;j:KM;j:KM;j:Kd:dhOdndnaeclfIdbaq:tawNJbbbZMgk:lJbbb9p9DTmbak:Ohixekcjjjj94hikai:SgH9ca:gaH9cz:g9cjjj;4s:d:eaH9cFe:d:e9cF:bj;4:pj;ar:d9c:bd9:9c:p;G:d;4j:E;ar:d9cH9:9c;d;H:W:y:m:g;d;Hb:d9cq9:9cM;j:KM;j:KM;jl:daO:ehOdndnaecwfIdbaD:tawNJbbbZMgk:lJbbb9p9DTmbak:Ohixekcjjjj94hikabaOai:SgH9ca:gaH9cz:g9cjjj;4s:d:eaH9cFe:d:e9cF:bj;4:pj;ar:d9c:bd9:9c:p;G:d;4j:E;ar:d9cH9:9c;d;H:W:y:m:g;d;Hb:d9cC9:9c:KM;j:KM;j:KMD:d:e83ibaeaofheabcwfhbadcufgdmbkkk9teiucbcbyd;y:kjjbgeabcifc98GfgbBd;y:kjjbdndnabZbcztgd9nmbcuhiabad9RcFFifcz4nbcuSmekaehikaik;teeeudndnaeabVciGTmbabhixekdndnadcz9pmbabhixekabhiinaiaeydbBdbaiaeydlBdlaiaeydwBdwaiaeydxBdxaeczfheaiczfhiadc9Wfgdcs0mbkkadcl6mbinaiaeydbBdbaeclfheaiclfhiadc98fgdci0mbkkdnadTmbinaiaeRbb86bbaicefhiaecefheadcufgdmbkkabk:3eedudndnabciGTmbabhixekaecFeGc:b:c:ew2hldndnadcz9pmbabhixekabhiinaialBdxaialBdwaialBdlaialBdbaiczfhiadc9Wfgdcs0mbkkadcl6mbinaialBdbaiclfhiadc98fgdci0mbkkdnadTmbinaiae86bbaicefhiadcufgdmbkkabk9teiucbcbyd;y:kjjbgeabcrfc94GfgbBd;y:kjjbdndnabZbcztgd9nmbcuhiabad9RcFFifcz4nbcuSmekaehikaik9:eiuZbhedndncbyd;y:kjjbgdaecztgi9nmbcuheadai9RcFFifcz4nbcuSmekadhekcbabae9Rcifc98Gcbyd;y:kjjbfgdBd;y:kjjbdnadZbcztge9nmbadae9RcFFifcz4nb8Akkk;Qddbcjwk;mdbbbbdbbblbbbwbbbbbbbebbbdbbblbbbwbbbbbbbbbbbbbbbb4:h9w9N94:P:gW:j9O:ye9Pbbbbbbebbbdbbbebbbdbbbbbbbdbbbbbbbebbbbbbb:l29hZ;69:9kZ;N;76Z;rg97Z;z;o9xZ8J;B85Z;:;u9yZ;b;k9HZ:2;Z9DZ9e:l9mZ59A8KZ:r;T3Z:A:zYZ79OHZ;j4::8::Y:D9V8:bbbb9s:49:Z8R:hBZ9M9M;M8:L;z;o8:;8:PG89q;x:J878R:hQ8::M:B;e87bbbbbbjZbbjZbbjZ:E;V;N8::Y:DsZ9i;H;68:xd;R8:;h0838:;W:NoZbbbb:WV9O8:uf888:9i;H;68:9c9G;L89;n;m9m89;D8Ko8:bbbbf:8tZ9m836ZS:2AZL;zPZZ818EZ9e:lxZ;U98F8:819E;68:FFuuFFuuFFuuFFuFFFuFFFuFbc;mqkzebbbebbbdbbb9G:vbb",t=new Uint8Array([32,0,65,2,1,106,34,33,3,128,11,4,13,64,6,253,10,7,15,116,127,5,8,12,40,16,19,54,20,9,27,255,113,17,42,67,24,23,146,148,18,14,22,45,70,69,56,114,101,21,25,63,75,136,108,28,118,29,73,115]);if(typeof WebAssembly!="object")return{supported:!1};var n,i=WebAssembly.instantiate(o(e),{}).then(function(p){n=p.instance,n.exports.__wasm_call_ctors(),n.exports.meshopt_encodeVertexVersion(0),n.exports.meshopt_encodeIndexVersion(1)});function o(p){for(var g=new Uint8Array(p.length),C=0;C<p.length;++C){var _=p.charCodeAt(C);g[C]=_>96?_-97:_>64?_-39:_+4}for(var E=0,C=0;C<p.length;++C)g[E++]=g[C]<60?t[g[C]]:(g[C]-60)*64+g[++C];return g.buffer.slice(0,E)}function r(p){if(!p)throw new Error("Assertion failed")}function a(p){return new Uint8Array(p.buffer,p.byteOffset,p.byteLength)}function s(p,g,C,_){var E=n.exports.sbrk,I=E(g.length*4),y=E(C*4),b=new Uint8Array(n.exports.memory.buffer),x=a(g);b.set(x,I),_&&_(I,I,g.length,C);var S=p(y,I,g.length,C);b=new Uint8Array(n.exports.memory.buffer);var P=new Uint32Array(C);new Uint8Array(P.buffer).set(b.subarray(y,y+C*4)),x.set(b.subarray(I,I+g.length*4)),E(I-E(0));for(var D=0;D<g.length;++D)g[D]=P[g[D]];return[P,S]}function A(p,g,C,_){var E=n.exports.sbrk,I=E(C*4),y=E(C*_),b=new Uint8Array(n.exports.memory.buffer);b.set(a(g),y),p(I,y,C,_),b=new Uint8Array(n.exports.memory.buffer);var x=new Uint32Array(C);return new Uint8Array(x.buffer).set(b.subarray(I,I+C*4)),E(I-E(0)),x}function l(p,g,C,_,E,I,y){var b=n.exports.sbrk,x=b(g),S=b(_*E),P=new Uint8Array(n.exports.memory.buffer);P.set(a(C),S);var D=p(x,g,S,_,E,I,y),Q=new Uint8Array(D);return Q.set(P.subarray(x,x+D)),b(x-b(0)),Q}function f(p){for(var g=0,C=0;C<p.length;++C){var _=p[C];g=g<_?_:g}return g}function h(p,g){if(r(g==2||g==4),g==4)return new Uint32Array(p.buffer,p.byteOffset,p.byteLength/4);var C=new Uint16Array(p.buffer,p.byteOffset,p.byteLength/2);return new Uint32Array(C)}function m(p,g,C,_,E,I,y){var b=n.exports.sbrk,x=b(C*_),S=b(C*I),P=new Uint8Array(n.exports.memory.buffer);P.set(a(g),S),p(x,C,_,E,S,y);var D=new Uint8Array(C*_);return D.set(P.subarray(x,x+C*_)),b(x-b(0)),D}return{ready:i,supported:!0,reorderMesh:function(p,g,C){var _=g?C?n.exports.meshopt_optimizeVertexCacheStrip:n.exports.meshopt_optimizeVertexCache:void 0;return s(n.exports.meshopt_optimizeVertexFetchRemap,p,f(p)+1,_)},reorderPoints:function(p,g){return r(p instanceof Float32Array),r(p.length%g==0),r(g>=3),A(n.exports.meshopt_spatialSortRemap,p,p.length/g,g*4)},encodeVertexBuffer:function(p,g,C){r(C>0&&C<=256),r(C%4==0);var _=n.exports.meshopt_encodeVertexBufferBound(g,C);return l(n.exports.meshopt_encodeVertexBuffer,_,p,g,C)},encodeVertexBufferLevel:function(p,g,C,_,E){r(C>0&&C<=256),r(C%4==0),r(_>=0&&_<=3),r(E===void 0||E==0||E==1);var I=n.exports.meshopt_encodeVertexBufferBound(g,C);return l(n.exports.meshopt_encodeVertexBufferLevel,I,p,g,C,_,E||0)},encodeIndexBuffer:function(p,g,C){r(C==2||C==4),r(g%3==0);var _=h(p,C),E=n.exports.meshopt_encodeIndexBufferBound(g,f(_)+1);return l(n.exports.meshopt_encodeIndexBuffer,E,_,g,4)},encodeIndexSequence:function(p,g,C){r(C==2||C==4);var _=h(p,C),E=n.exports.meshopt_encodeIndexSequenceBound(g,f(_)+1);return l(n.exports.meshopt_encodeIndexSequence,E,_,g,4)},encodeGltfBuffer:function(p,g,C,_){var E={ATTRIBUTES:this.encodeVertexBuffer,TRIANGLES:this.encodeIndexBuffer,INDICES:this.encodeIndexSequence};return r(E[_]),E[_](p,g,C)},encodeFilterOct:function(p,g,C,_){return r(C==4||C==8),r(_>=1&&_<=16),m(n.exports.meshopt_encodeFilterOct,p,g,C,_,16)},encodeFilterQuat:function(p,g,C,_){return r(C==8),r(_>=4&&_<=16),m(n.exports.meshopt_encodeFilterQuat,p,g,C,_,16)},encodeFilterExp:function(p,g,C,_,E){r(C>0&&C%4==0),r(_>=1&&_<=24);var I={Separate:0,SharedVector:1,SharedComponent:2,Clamped:3};return m(n.exports.meshopt_encodeFilterExp,p,g,C,_,C,E?I[E]:1)},encodeFilterColor:function(p,g,C,_){return r(C==4||C==8),r(_>=2&&_<=16),m(n.exports.meshopt_encodeFilterColor,p,g,C,_,16)}}})();typeof VC=="object"&&typeof VS=="object"?VS.exports=Ab:typeof define=="function"&&define.amd?define([],function(){return Ab}):typeof VC=="object"?VC.MeshoptEncoder=Ab:(typeof self<"u"?self:VC).MeshoptEncoder=Ab});var AU=ys((jC,jS)=>{var lb=(function(){"use strict";var e="b9H79Tebbbe8Fv9Gbb9Gvuuuuueu9Giuuub9Geueu9Giuuueuixkbeeeddddillviebeoweuec:W:Odkr;Neqo9TW9T9VV95dbH9F9F939H79T9F9J9H229F9Jt9VV7bb8A9TW79O9V9Wt9F9KW9J9V9KW9wWVtW949c919M9MWVbeY9TW79O9V9Wt9F9KW9J9V9KW69U9KW949c919M9MWVbdE9TW79O9V9Wt9F9KW9J9V9KW69U9KW949tWG91W9U9JWbiL9TW79O9V9Wt9F9KW9J9V9KWS9P2tWV9p9JtblK9TW79O9V9Wt9F9KW9J9V9KWS9P2tWV9r919HtbvL9TW79O9V9Wt9F9KW9J9V9KWS9P2tWVT949WboY9TW79O9V9Wt9F9KW9J9V9KWS9P2tWVJ9V29VVbrl79IV9Rbwq;BZkdbk;jYi5ud9:du8Jjjjjbcj;kb9Rgv8Kjjjjbc9:hodnalTmbcuhoaiRbbgrc;WeGc:Ge9hmbarcsGgwce0mbc9:hoalcufadcd4cbawEgDadfgrcKcaawEgqaraq0Egk6mbaicefhxcj;abad9Uc;WFbGcjdadca0EhmaialfgPar9Rgoadfhsavaoadz:jjjjbgzceVhHcbhOdndninaeaO9nmeaPax9RaD6mdamaeaO9RaOamfgoae6EgAcsfglc9WGhCabaOad2fhXaAcethQaxaDfhiaOaeaoaeao6E9RhLalcl4cifcd4hKazcj;cbfaAfhYcbh8AazcjdfhEaHh3incbhodnawTmbaxa8Acd4fRbbhokaocFeGh5cbh8Eazcj;cbfhqinaih8Fdndndndna5a8Ecet4ciGgoc9:fPdebdkaPa8F9RaA6mrazcj;cbfa8EaA2fa8FaAz:jjjjb8Aa8FaAfhixdkazcj;cbfa8EaA2fcbaAz:kjjjb8Aa8FhixekaPa8F9RaK6mva8FaKfhidnaCTmbaPai9RcK6mbaocdtc:q1jjbfcj1jjbawEhaczhrcbhlinargoc9Wfghaqfhrdndndndndndnaaa8Fahco4fRbbalcoG4ciGcdtfydbPDbedvivvvlvkar9cb83bbarcwf9cb83bbxlkarcbaiRbdai8Xbb9c:c:qj:bw9:9c:q;c1:I1e:d9c:b:c:e1z9:gg9cjjjjjz:dg8J9qE86bbaqaofgrcGfag9c8F1:NghcKtc8F91aicdfa8J9c8N1:Nfg8KRbbG86bbarcVfcba8KahcjeGcr4fghRbbag9cjjjjjl:dg8J9qE86bbarc7fcbaha8J9c8L1:NfghRbbag9cjjjjjd:dg8J9qE86bbarctfcbaha8J9c8K1:NfghRbbag9cjjjjje:dg8J9qE86bbarc91fcbaha8J9c8J1:NfghRbbag9cjjjj;ab:dg8J9qE86bbarc4fcbaha8J9cg1:NfghRbbag9cjjjja:dg8J9qE86bbarc93fcbaha8J9ch1:NfghRbbag9cjjjjz:dgg9qE86bbarc94fcbahag9ca1:NfghRbbai8Xbe9c:c:qj:bw9:9c:q;c1:I1e:d9c:b:c:e1z9:gg9cjjjjjz:dg8J9qE86bbarc95fag9c8F1:NgicKtc8F91aha8J9c8N1:NfghRbbG86bbarc96fcbahaicjeGcr4fgiRbbag9cjjjjjl:dg8J9qE86bbarc97fcbaia8J9c8L1:NfgiRbbag9cjjjjjd:dg8J9qE86bbarc98fcbaia8J9c8K1:NfgiRbbag9cjjjjje:dg8J9qE86bbarc99fcbaia8J9c8J1:NfgiRbbag9cjjjj;ab:dg8J9qE86bbarc9:fcbaia8J9cg1:NfgiRbbag9cjjjja:dg8J9qE86bbarcufcbaia8J9ch1:NfgiRbbag9cjjjjz:dgg9qE86bbaiag9ca1:NfhixikaraiRblaiRbbghco4g8Ka8KciSg8KE86bbaqaofgrcGfaiclfa8Kfg8KRbbahcl4ciGg8La8LciSg8LE86bbarcVfa8Ka8Lfg8KRbbahcd4ciGg8La8LciSg8LE86bbarc7fa8Ka8Lfg8KRbbahciGghahciSghE86bbarctfa8Kahfg8KRbbaiRbeghco4g8La8LciSg8LE86bbarc91fa8Ka8Lfg8KRbbahcl4ciGg8La8LciSg8LE86bbarc4fa8Ka8Lfg8KRbbahcd4ciGg8La8LciSg8LE86bbarc93fa8Ka8Lfg8KRbbahciGghahciSghE86bbarc94fa8Kahfg8KRbbaiRbdghco4g8La8LciSg8LE86bbarc95fa8Ka8Lfg8KRbbahcl4ciGg8La8LciSg8LE86bbarc96fa8Ka8Lfg8KRbbahcd4ciGg8La8LciSg8LE86bbarc97fa8Ka8Lfg8KRbbahciGghahciSghE86bbarc98fa8KahfghRbbaiRbigico4g8Ka8KciSg8KE86bbarc99faha8KfghRbbaicl4ciGg8Ka8KciSg8KE86bbarc9:faha8KfghRbbaicd4ciGg8Ka8KciSg8KE86bbarcufaha8KfgrRbbaiciGgiaiciSgiE86bbaraifhixdkaraiRbwaiRbbghcl4g8Ka8KcsSg8KE86bbaqaofgrcGfaicwfa8Kfg8KRbbahcsGghahcsSghE86bbarcVfa8KahfghRbbaiRbeg8Kcl4g8La8LcsSg8LE86bbarc7faha8LfghRbba8KcsGg8Ka8KcsSg8KE86bbarctfaha8KfghRbbaiRbdg8Kcl4g8La8LcsSg8LE86bbarc91faha8LfghRbba8KcsGg8Ka8KcsSg8KE86bbarc4faha8KfghRbbaiRbig8Kcl4g8La8LcsSg8LE86bbarc93faha8LfghRbba8KcsGg8Ka8KcsSg8KE86bbarc94faha8KfghRbbaiRblg8Kcl4g8La8LcsSg8LE86bbarc95faha8LfghRbba8KcsGg8Ka8KcsSg8KE86bbarc96faha8KfghRbbaiRbvg8Kcl4g8La8LcsSg8LE86bbarc97faha8LfghRbba8KcsGg8Ka8KcsSg8KE86bbarc98faha8KfghRbbaiRbog8Kcl4g8La8LcsSg8LE86bbarc99faha8LfghRbba8KcsGg8Ka8KcsSg8KE86bbarc9:faha8KfghRbbaiRbrgicl4g8Ka8KcsSg8KE86bbarcufaha8KfgrRbbaicsGgiaicsSgiE86bbaraifhixekarai8Pbb83bbarcwfaicwf8Pbb83bbaiczfhikdnaoaC9pmbalcdfhlaoczfhraPai9RcL0mekkaoaC6moaimexokaCmva8FTmvkaqaAfhqa8Ecefg8Ecl9hmbkdndndndnawTmbasa8Acd4fRbbgociGPlbedrbkaATmdaza8Afh8Fazcj;cbfhhcbh8EaEhaina8FRbbhraahocbhlinaoahalfRbbgqce4cbaqceG9R7arfgr86bbaoadfhoaAalcefgl9hmbkaacefhaa8Fcefh8FahaAfhha8Ecefg8Ecl9hmbxikkaATmeaza8Afhaazcj;cbfhhcbhoceh8EaYh8FinaEaofhlaa8Vbbhrcbhoinala8FaofRbbcwtahaofRbbgqVc;:FiGce4cbaqceG9R7arfgr87bbaladfhlaLaocefgofmbka8FaQfh8FcdhoaacdfhaahaQfhha8EceGhlcbh8EalmbxdkkaATmbcbaocl49Rh8Eaza8AfRbbhqcwhoa3hlinalRbbaotaqVhqalcefhlaocwfgoca9hmbkcbhhaEh8FaYhainazcj;cbfahfRbbhrcwhoaahlinalRbbaotarVhralaAfhlaocwfgoca9hmbkara8E93aq7hqcbhoa8Fhlinalaqao486bbalcefhlaocwfgoca9hmbka8Fadfh8FaacefhaahcefghaA9hmbkkaEclfhEa3clfh3a8Aclfg8Aad6mbkaXazcjdfaAad2z:jjjjb8AazazcjdfaAcufad2fadz:jjjjb8AaAaOfhOaihxaimbkc9:hoxdkcbc99aPax9RakSEhoxekc9:hokavcj;kbf8Kjjjjbaok:XseHu8Jjjjjbc;ae9Rgv8Kjjjjbc9:hodnaeci9UgrcHfal0mbcuhoaiRbbgwc;WeGc;Ge9hmbawcsGgDce0mbavc;abfcFecjez:kjjjb8AavcUf9cu83ibavc8Wf9cu83ibavcyf9cu83ibavcaf9cu83ibavcKf9cu83ibavczf9cu83ibav9cu83iwav9cu83ibaialfc9WfhqaicefgwarfhldnaeTmbcmcsaDceSEhkcbhxcbhmcbhrcbhicbhoindnalaq9nmbc9:hoxikdndnawRbbgDc;Ve0mbavc;abfaoaDcu7gPcl4fcsGcitfgsydlhzasydbhHdndnaDcsGgsak9pmbavaiaPfcsGcdtfydbaxasEhDaxasTgOfhxxekdndnascsSmbcehOasc987asamffcefhDxekalcefhDal8SbbgscFeGhPdndnascu9mmbaDhlxekalcvfhlaPcFbGhPcrhsdninaD8SbbgOcFbGastaPVhPaOcu9kmeaDcefhDascrfgsc8J9hmbxdkkaDcefhlkcehOaPce4cbaPceG9R7amfhDkaDhmkavc;abfaocitfgsaDBdbasazBdlavaicdtfaDBdbavc;abfaocefcsGcitfgsaHBdbasaDBdlaocdfhoaOaifhidnadcd9hmbabarcetfgsaH87ebasclfaD87ebascdfaz87ebxdkabarcdtfgsaHBdbascwfaDBdbasclfazBdbxekdnaDcpe0mbaxcefgOavaiaqaDcsGfRbbgscl49RcsGcdtfydbascz6gPEhDavaias9RcsGcdtfydbaOaPfgzascsGgOEhsaOThOdndnadcd9hmbabarcetfgHax87ebaHclfas87ebaHcdfaD87ebxekabarcdtfgHaxBdbaHcwfasBdbaHclfaDBdbkavaicdtfaxBdbavc;abfaocitfgHaDBdbaHaxBdlavaicefgicsGcdtfaDBdbavc;abfaocefcsGcitfgHasBdbaHaDBdlavaiaPfgicsGcdtfasBdbavc;abfaocdfcsGcitfgDaxBdbaDasBdlaocifhoaiaOfhiazaOfhxxekaxcbalRbbgHEgAaDc;:eSgDfhzaHcsGhCaHcl4hXdndnaHcs0mbazcefhOxekazhOavaiaX9RcsGcdtfydbhzkdndnaCmbaOcefhxxekaOhxavaiaH9RcsGcdtfydbhOkdndnaDTmbalcefhDxekalcdfhDal8SbegPcFeGhsdnaPcu9kmbalcofhAascFbGhscrhldninaD8SbbgPcFbGaltasVhsaPcu9kmeaDcefhDalcrfglc8J9hmbkaAhDxekaDcefhDkasce4cbasceG9R7amfgmhAkdndnaXcsSmbaDhsxekaDcefhsaD8SbbglcFeGhPdnalcu9kmbaDcvfhzaPcFbGhPcrhldninas8SbbgDcFbGaltaPVhPaDcu9kmeascefhsalcrfglc8J9hmbkazhsxekascefhskaPce4cbaPceG9R7amfgmhzkdndnaCcsSmbashlxekascefhlas8SbbgDcFeGhPdnaDcu9kmbascvfhOaPcFbGhPcrhDdninal8SbbgscFbGaDtaPVhPascu9kmealcefhlaDcrfgDc8J9hmbkaOhlxekalcefhlkaPce4cbaPceG9R7amfgmhOkdndnadcd9hmbabarcetfgDaA87ebaDclfaO87ebaDcdfaz87ebxekabarcdtfgDaABdbaDcwfaOBdbaDclfazBdbkavc;abfaocitfgDazBdbaDaABdlavaicdtfaABdbavc;abfaocefcsGcitfgDaOBdbaDazBdlavaicefgicsGcdtfazBdbavc;abfaocdfcsGcitfgDaABdbaDaOBdlavaiaHcz6aXcsSVfgicsGcdtfaOBdbaiaCTaCcsSVfhiaocifhokawcefhwaocsGhoaicsGhiarcifgrae6mbkkcbc99alaqSEhokavc;aef8Kjjjjbaok:clevu8Jjjjjbcz9Rhvdnaecvfal9nmbc9:skdnaiRbbc;:eGc;qeSmbcuskav9cb83iwaicefhoaialfc98fhrdnaeTmbdnadcdSmbcbhwindnaoar6mbc9:skaocefhlao8SbbgicFeGhddndnaicu9mmbalhoxekaocvfhoadcFbGhdcrhidninal8SbbgDcFbGaitadVhdaDcu9kmealcefhlaicrfgic8J9hmbxdkkalcefhokabawcdtfadc8Etc8F91adcd47avcwfadceGcdtVglydbfgiBdbalaiBdbawcefgwae9hmbxdkkcbhwindnaoar6mbc9:skaocefhlao8SbbgicFeGhddndnaicu9mmbalhoxekaocvfhoadcFbGhdcrhidninal8SbbgDcFbGaitadVhdaDcu9kmealcefhlaicrfgic8J9hmbxdkkalcefhokabawcetfadc8Etc8F91adcd47avcwfadceGcdtVglydbfgi87ebalaiBdbawcefgwae9hmbkkcbc99aoarSEk:Lvoeue99dud99eud99dndnadcl9hmbaeTmeindndnabcdfgd8Sbb:Yab8Sbbgi:Ygl:l:tabcefgv8Sbbgo:Ygr:l:tgwJbb;:9cawawNJbbbbawawJbbbb9GgDEgq:mgkaqaicb9iEalMgwawNakaqaocb9iEarMgqaqNMM:r:vglNJbbbZJbbb:;aDEMgr:lJbbb9p9DTmbar:Ohixekcjjjj94hikadai86bbdndnaqalNJbbbZJbbb:;aqJbbbb9GEMgq:lJbbb9p9DTmbaq:Ohdxekcjjjj94hdkavad86bbdndnawalNJbbbZJbbb:;awJbbbb9GEMgw:lJbbb9p9DTmbaw:Ohdxekcjjjj94hdkabad86bbabclfhbaecufgembxdkkaeTmbindndnabclfgd8Ueb:Yab8Uebgi:Ygl:l:tabcdfgv8Uebgo:Ygr:l:tgwJb;:FSawawNJbbbbawawJbbbb9GgDEgq:mgkaqaicb9iEalMgwawNakaqaocb9iEarMgqaqNMM:r:vglNJbbbZJbbb:;aDEMgr:lJbbb9p9DTmbar:Ohixekcjjjj94hikadai87ebdndnaqalNJbbbZJbbb:;aqJbbbb9GEMgq:lJbbb9p9DTmbaq:Ohdxekcjjjj94hdkavad87ebdndnawalNJbbbZJbbb:;awJbbbb9GEMgw:lJbbb9p9DTmbaw:Ohdxekcjjjj94hdkabad87ebabcwfhbaecufgembkkk;oiliui99iue99dnaeTmbcbhiabhlindndnJ;Zl81Zalcof8UebgvciV:Y:vgoal8Ueb:YNgrJb;:FSNJbbbZJbbb:;arJbbbb9GEMgw:lJbbb9p9DTmbaw:OhDxekcjjjj94hDkalclf8Uebhqalcdf8UebhkabaiavcefciGfcetfaD87ebdndnaoak:YNgwJb;:FSNJbbbZJbbb:;awJbbbb9GEMgx:lJbbb9p9DTmbax:OhDxekcjjjj94hDkabaiavciGfgkcd7cetfaD87ebdndnaoaq:YNgoJb;:FSNJbbbZJbbb:;aoJbbbb9GEMgx:lJbbb9p9DTmbax:OhDxekcjjjj94hDkabaiavcufciGfcetfaD87ebdndnJbbjZararN:tawawN:taoaoN:tgrJbbbbarJbbbb9GE:rJb;:FSNJbbbZMgr:lJbbb9p9DTmbar:Ohvxekcjjjj94hvkabakcetfav87ebalcwfhlaiclfhiaecufgembkkk9mbdnadcd4ae2gdTmbinababydbgecwtcw91:Yaece91cjjj98Gcjjj;8if::NUdbabclfhbadcufgdmbkkk:Tvirud99eudndnadcl9hmbaeTmeindndnabRbbgiabcefgl8Sbbgvabcdfgo8Sbbgrf9R:YJbbuJabcifgwRbbgdce4adVgDcd4aDVgDcl4aDVgD:Z:vgqNJbbbZMgk:lJbbb9p9DTmbak:Ohxxekcjjjj94hxkaoax86bbdndnaraif:YaqNJbbbZMgk:lJbbb9p9DTmbak:Ohoxekcjjjj94hokalao86bbdndnavaifar9R:YaqNJbbbZMgk:lJbbb9p9DTmbak:Ohixekcjjjj94hikabai86bbdndnaDadcetGadceGV:ZaqNJbbbZMgq:lJbbb9p9DTmbaq:Ohdxekcjjjj94hdkawad86bbabclfhbaecufgembxdkkaeTmbindndnab8Vebgiabcdfgl8Uebgvabclfgo8Uebgrf9R:YJbFu9habcofgw8Vebgdce4adVgDcd4aDVgDcl4aDVgDcw4aDVgD:Z:vgqNJbbbZMgk:lJbbb9p9DTmbak:Ohxxekcjjjj94hxkaoax87ebdndnaraif:YaqNJbbbZMgk:lJbbb9p9DTmbak:Ohoxekcjjjj94hokalao87ebdndnavaifar9R:YaqNJbbbZMgk:lJbbb9p9DTmbak:Ohixekcjjjj94hikabai87ebdndnaDadcetGadceGV:ZaqNJbbbZMgq:lJbbb9p9DTmbaq:Ohdxekcjjjj94hdkawad87ebabcwfhbaecufgembkkk9teiucbcbyd:K1jjbgeabcifc98GfgbBd:K1jjbdndnabZbcztgd9nmbcuhiabad9RcFFifcz4nbcuSmekaehikaik;teeeudndnaeabVciGTmbabhixekdndnadcz9pmbabhixekabhiinaiaeydbBdbaiaeydlBdlaiaeydwBdwaiaeydxBdxaeczfheaiczfhiadc9Wfgdcs0mbkkadcl6mbinaiaeydbBdbaeclfheaiclfhiadc98fgdci0mbkkdnadTmbinaiaeRbb86bbaicefhiaecefheadcufgdmbkkabk:3eedudndnabciGTmbabhixekaecFeGc:b:c:ew2hldndnadcz9pmbabhixekabhiinaialBdxaialBdwaialBdlaialBdbaiczfhiadc9Wfgdcs0mbkkadcl6mbinaialBdbaiclfhiadc98fgdci0mbkkdnadTmbinaiae86bbaicefhiadcufgdmbkkabkk81dbcjwk8Kbbbbdbbblbbbwbbbbbbbebbbdbbblbbbwbbbbc:Kwkl8WNbb",t="b9H79TebbbeKl9Gbb9Gvuuuuueu9Giuuub9Geueuixkbbebeeddddilve9Weeeviebeoweuec:q:6dkr;Neqo9TW9T9VV95dbH9F9F939H79T9F9J9H229F9Jt9VV7bb8A9TW79O9V9Wt9F9KW9J9V9KW9wWVtW949c919M9MWVbdY9TW79O9V9Wt9F9KW9J9V9KW69U9KW949c919M9MWVblE9TW79O9V9Wt9F9KW9J9V9KW69U9KW949tWG91W9U9JWbvL9TW79O9V9Wt9F9KW9J9V9KWS9P2tWV9p9JtboK9TW79O9V9Wt9F9KW9J9V9KWS9P2tWV9r919HtbrL9TW79O9V9Wt9F9KW9J9V9KWS9P2tWVT949WbwY9TW79O9V9Wt9F9KW9J9V9KWS9P2tWVJ9V29VVbDl79IV9Rbqq;Ctklbzik9:evu8Jjjjjbcz9Rhbcbheincbhdcbhiinabcwfadfaicjuaead4ceGglE86bbaialfhiadcefgdcw9hmbkaec:q:yjjbfai86bbaecitc:q1jjbfab8Piw83ibaecefgecjd9hmbkk:183lYud97dur978Jjjjjbcj;kb9Rgv8Kjjjjbc9:hodnalTmbcuhoaiRbbgrc;WeGc:Ge9hmbarcsGgwce0mbc9:hoalcufadcd4cbawEgDadfgrcKcaawEgqaraq0Egk6mbaicefhxavaialfgmar9Rgoad;8qbbcj;abad9Uc;WFbGcjdadca0EhPdndndnadTmbaoadfhscbhzinaeaz9nmdamax9RaD6miabazad2fhHaxaDfhOaPaeaz9RazaPfae6EgAcsfgocl4cifcd4hCavcj;cbfaoc9WGgXcetfhQavcj;cbfaXci2fhLavcj;cbfaXfhKcbhYaoc;ab6h8AincbhodnawTmbaxaYcd4fRbbhokaocFeGhEcbh3avcj;cbfh5indndndndnaEa3cet4ciGgoc9:fPdebdkamaO9RaX6mwavcj;cbfa3aX2faOaX;8qbbaOaAfhOxdkavcj;cbfa3aX2fcbaX;8kbxekamaO9RaC6moaoclVcbawEhraOaCfhocbhidna8Ambamao9Rc;Gb6mbcbhlina5alfhidndndndndndnaOalco4fRbbgqciGarfPDbedibledibkaipxbbbbbbbbbbbbbbbbpklbxlkaiaopbblaopbbbg8Eclp:mea8EpmbzeHdOiAlCvXoQrLg8Ecdp:mea8EpmbzeHdOiAlCvXoQrLpxiiiiiiiiiiiiiiiip9og8Fpxiiiiiiiiiiiiiiiip8Jg8Ep5b9cjF;8;4;W;G;ab9:9cU1:Ngacitc:q1jjbfpbibaac:q:yjjbfRbbgapsa8Ep5e9cjF;8;4;W;G;ab9:9cU1:Nghcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPa8Fa8Ep9spklbaaaoclffahc:q:yjjbfRbbfhoxikaiaopbbwaopbbbg8Eclp:mea8EpmbzeHdOiAlCvXoQrLpxssssssssssssssssp9og8Fpxssssssssssssssssp8Jg8Ep5b9cjF;8;4;W;G;ab9:9cU1:Ngacitc:q1jjbfpbibaac:q:yjjbfRbbgapsa8Ep5e9cjF;8;4;W;G;ab9:9cU1:Nghcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPa8Fa8Ep9spklbaaaocwffahc:q:yjjbfRbbfhoxdkaiaopbbbpklbaoczfhoxekaiaopbbdaoRbbgacitc:q1jjbfpbibaac:q:yjjbfRbbgapsaoRbeghcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPpklbaaaocdffahc:q:yjjbfRbbfhokdndndndndndnaqcd4ciGarfPDbedibledibkaiczfpxbbbbbbbbbbbbbbbbpklbxlkaiczfaopbblaopbbbg8Eclp:mea8EpmbzeHdOiAlCvXoQrLg8Ecdp:mea8EpmbzeHdOiAlCvXoQrLpxiiiiiiiiiiiiiiiip9og8Fpxiiiiiiiiiiiiiiiip8Jg8Ep5b9cjF;8;4;W;G;ab9:9cU1:Ngacitc:q1jjbfpbibaac:q:yjjbfRbbgapsa8Ep5e9cjF;8;4;W;G;ab9:9cU1:Nghcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPa8Fa8Ep9spklbaaaoclffahc:q:yjjbfRbbfhoxikaiczfaopbbwaopbbbg8Eclp:mea8EpmbzeHdOiAlCvXoQrLpxssssssssssssssssp9og8Fpxssssssssssssssssp8Jg8Ep5b9cjF;8;4;W;G;ab9:9cU1:Ngacitc:q1jjbfpbibaac:q:yjjbfRbbgapsa8Ep5e9cjF;8;4;W;G;ab9:9cU1:Nghcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPa8Fa8Ep9spklbaaaocwffahc:q:yjjbfRbbfhoxdkaiczfaopbbbpklbaoczfhoxekaiczfaopbbdaoRbbgacitc:q1jjbfpbibaac:q:yjjbfRbbgapsaoRbeghcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPpklbaaaocdffahc:q:yjjbfRbbfhokdndndndndndnaqcl4ciGarfPDbedibledibkaicafpxbbbbbbbbbbbbbbbbpklbxlkaicafaopbblaopbbbg8Eclp:mea8EpmbzeHdOiAlCvXoQrLg8Ecdp:mea8EpmbzeHdOiAlCvXoQrLpxiiiiiiiiiiiiiiiip9og8Fpxiiiiiiiiiiiiiiiip8Jg8Ep5b9cjF;8;4;W;G;ab9:9cU1:Ngacitc:q1jjbfpbibaac:q:yjjbfRbbgapsa8Ep5e9cjF;8;4;W;G;ab9:9cU1:Nghcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPa8Fa8Ep9spklbaaaoclffahc:q:yjjbfRbbfhoxikaicafaopbbwaopbbbg8Eclp:mea8EpmbzeHdOiAlCvXoQrLpxssssssssssssssssp9og8Fpxssssssssssssssssp8Jg8Ep5b9cjF;8;4;W;G;ab9:9cU1:Ngacitc:q1jjbfpbibaac:q:yjjbfRbbgapsa8Ep5e9cjF;8;4;W;G;ab9:9cU1:Nghcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPa8Fa8Ep9spklbaaaocwffahc:q:yjjbfRbbfhoxdkaicafaopbbbpklbaoczfhoxekaicafaopbbdaoRbbgacitc:q1jjbfpbibaac:q:yjjbfRbbgapsaoRbeghcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPpklbaaaocdffahc:q:yjjbfRbbfhokdndndndndndnaqco4arfPDbedibledibkaic8Wfpxbbbbbbbbbbbbbbbbpklbxlkaic8Wfaopbblaopbbbg8Eclp:mea8EpmbzeHdOiAlCvXoQrLg8Ecdp:mea8EpmbzeHdOiAlCvXoQrLpxiiiiiiiiiiiiiiiip9og8Fpxiiiiiiiiiiiiiiiip8Jg8Ep5b9cjF;8;4;W;G;ab9:9cU1:Ngicitc:q1jjbfpbibaic:q:yjjbfRbbgipsa8Ep5e9cjF;8;4;W;G;ab9:9cU1:Ngqcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPa8Fa8Ep9spklbaiaoclffaqc:q:yjjbfRbbfhoxikaic8Wfaopbbwaopbbbg8Eclp:mea8EpmbzeHdOiAlCvXoQrLpxssssssssssssssssp9og8Fpxssssssssssssssssp8Jg8Ep5b9cjF;8;4;W;G;ab9:9cU1:Ngicitc:q1jjbfpbibaic:q:yjjbfRbbgipsa8Ep5e9cjF;8;4;W;G;ab9:9cU1:Ngqcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPa8Fa8Ep9spklbaiaocwffaqc:q:yjjbfRbbfhoxdkaic8Wfaopbbbpklbaoczfhoxekaic8WfaopbbdaoRbbgicitc:q1jjbfpbibaic:q:yjjbfRbbgipsaoRbegqcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPpklbaiaocdffaqc:q:yjjbfRbbfhokalc;abfhialcjefaX0meaihlamao9Rc;Fb0mbkkdnaiaX9pmbaici4hlinamao9RcK6mwa5aifhqdndndndndndnaOaico4fRbbalcoG4ciGarfPDbedibledibkaqpxbbbbbbbbbbbbbbbbpkbbxlkaqaopbblaopbbbg8Eclp:mea8EpmbzeHdOiAlCvXoQrLg8Ecdp:mea8EpmbzeHdOiAlCvXoQrLpxiiiiiiiiiiiiiiiip9og8Fpxiiiiiiiiiiiiiiiip8Jg8Ep5b9cjF;8;4;W;G;ab9:9cU1:Ngacitc:q1jjbfpbibaac:q:yjjbfRbbgapsa8Ep5e9cjF;8;4;W;G;ab9:9cU1:Nghcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPa8Fa8Ep9spkbbaaaoclffahc:q:yjjbfRbbfhoxikaqaopbbwaopbbbg8Eclp:mea8EpmbzeHdOiAlCvXoQrLpxssssssssssssssssp9og8Fpxssssssssssssssssp8Jg8Ep5b9cjF;8;4;W;G;ab9:9cU1:Ngacitc:q1jjbfpbibaac:q:yjjbfRbbgapsa8Ep5e9cjF;8;4;W;G;ab9:9cU1:Nghcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPa8Fa8Ep9spkbbaaaocwffahc:q:yjjbfRbbfhoxdkaqaopbbbpkbbaoczfhoxekaqaopbbdaoRbbgacitc:q1jjbfpbibaac:q:yjjbfRbbgapsaoRbeghcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPpkbbaaaocdffahc:q:yjjbfRbbfhokalcdfhlaiczfgiaX6mbkkaohOaoTmoka5aXfh5a3cefg3cl9hmbkdndndndnawTmbasaYcd4fRbbglciGPlbedwbkaXTmdavcjdfaYfhlavaYfpbdbhgcbhoinalavcj;cbfaofpblbg8JaKaofpblbg8KpmbzeHdOiAlCvXoQrLg8LaQaofpblbg8MaLaofpblbg8NpmbzeHdOiAlCvXoQrLgypmbezHdiOAlvCXorQLg8Ecep9Ta8Epxeeeeeeeeeeeeeeeeg8Fp9op9Hp9rg8Eagp9Uggp9Abbbaladfglaga8Ea8Epmlvorlvorlvorlvorp9Uggp9Abbbaladfglaga8Ea8EpmwDqkwDqkwDqkwDqkp9Uggp9Abbbaladfglaga8Ea8EpmxmPsxmPsxmPsxmPsp9Uggp9Abbbaladfglaga8LaypmwDKYqk8AExm35Ps8E8Fg8Ecep9Ta8Ea8Fp9op9Hp9rg8Ep9Uggp9Abbbaladfglaga8Ea8Epmlvorlvorlvorlvorp9Uggp9Abbbaladfglaga8Ea8EpmwDqkwDqkwDqkwDqkp9Uggp9Abbbaladfglaga8Ea8EpmxmPsxmPsxmPsxmPsp9Uggp9Abbbaladfglaga8Ja8KpmwKDYq8AkEx3m5P8Es8Fg8Ja8Ma8NpmwKDYq8AkEx3m5P8Es8Fg8KpmbezHdiOAlvCXorQLg8Ecep9Ta8Ea8Fp9op9Hp9rg8Ep9Uggp9Abbbaladfglaga8Ea8Epmlvorlvorlvorlvorp9Uggp9Abbbaladfglaga8Ea8EpmwDqkwDqkwDqkwDqkp9Uggp9Abbbaladfglaga8Ea8EpmxmPsxmPsxmPsxmPsp9Uggp9Abbbaladfglaga8Ja8KpmwDKYqk8AExm35Ps8E8Fg8Ecep9Ta8Ea8Fp9op9Hp9rg8Ep9Ug8Fp9Abbbaladfgla8Fa8Ea8Epmlvorlvorlvorlvorp9Ug8Fp9Abbbaladfgla8Fa8Ea8EpmwDqkwDqkwDqkwDqkp9Ug8Fp9Abbbaladfgla8Fa8Ea8EpmxmPsxmPsxmPsxmPsp9Uggp9AbbbaladfhlaoczfgoaX6mbxikkaXTmeavcjdfaYfhlavaYfpbdbhgcbhoinalavcj;cbfaofpblbg8JaKaofpblbg8KpmbzeHdOiAlCvXoQrLg8LaQaofpblbg8MaLaofpblbg8NpmbzeHdOiAlCvXoQrLgypmbezHdiOAlvCXorQLg8Ecep:nea8Epxebebebebebebebebg8Fp9op:bep9rg8Eagp:oeggp9Abbbaladfglaga8Ea8Epmlvorlvorlvorlvorp:oeggp9Abbbaladfglaga8Ea8EpmwDqkwDqkwDqkwDqkp:oeggp9Abbbaladfglaga8Ea8EpmxmPsxmPsxmPsxmPsp:oeggp9Abbbaladfglaga8LaypmwDKYqk8AExm35Ps8E8Fg8Ecep:nea8Ea8Fp9op:bep9rg8Ep:oeggp9Abbbaladfglaga8Ea8Epmlvorlvorlvorlvorp:oeggp9Abbbaladfglaga8Ea8EpmwDqkwDqkwDqkwDqkp:oeggp9Abbbaladfglaga8Ea8EpmxmPsxmPsxmPsxmPsp:oeggp9Abbbaladfglaga8Ja8KpmwKDYq8AkEx3m5P8Es8Fg8Ja8Ma8NpmwKDYq8AkEx3m5P8Es8Fg8KpmbezHdiOAlvCXorQLg8Ecep:nea8Ea8Fp9op:bep9rg8Ep:oeggp9Abbbaladfglaga8Ea8Epmlvorlvorlvorlvorp:oeggp9Abbbaladfglaga8Ea8EpmwDqkwDqkwDqkwDqkp:oeggp9Abbbaladfglaga8Ea8EpmxmPsxmPsxmPsxmPsp:oeggp9Abbbaladfglaga8Ja8KpmwDKYqk8AExm35Ps8E8Fg8Ecep:nea8Ea8Fp9op:bep9rg8Ep:oeg8Fp9Abbbaladfgla8Fa8Ea8Epmlvorlvorlvorlvorp:oeg8Fp9Abbbaladfgla8Fa8Ea8EpmwDqkwDqkwDqkwDqkp:oeg8Fp9Abbbaladfgla8Fa8Ea8EpmxmPsxmPsxmPsxmPsp:oeggp9AbbbaladfhlaoczfgoaX6mbxdkkaXTmbcbhocbalcl4gl9Rc8FGhiavcjdfaYfhravaYfpbdbh8Finaravcj;cbfaofpblbggaKaofpblbg8JpmbzeHdOiAlCvXoQrLg8KaQaofpblbg8LaLaofpblbg8MpmbzeHdOiAlCvXoQrLg8NpmbezHdiOAlvCXorQLg8Eaip:Rea8Ealp:Sep9qg8Ea8Fp9rg8Fp9Abbbaradfgra8Fa8Ea8Epmlvorlvorlvorlvorp9rg8Fp9Abbbaradfgra8Fa8Ea8EpmwDqkwDqkwDqkwDqkp9rg8Fp9Abbbaradfgra8Fa8Ea8EpmxmPsxmPsxmPsxmPsp9rg8Fp9Abbbaradfgra8Fa8Ka8NpmwDKYqk8AExm35Ps8E8Fg8Eaip:Rea8Ealp:Sep9qg8Ep9rg8Fp9Abbbaradfgra8Fa8Ea8Epmlvorlvorlvorlvorp9rg8Fp9Abbbaradfgra8Fa8Ea8EpmwDqkwDqkwDqkwDqkp9rg8Fp9Abbbaradfgra8Fa8Ea8EpmxmPsxmPsxmPsxmPsp9rg8Fp9Abbbaradfgra8Faga8JpmwKDYq8AkEx3m5P8Es8Fgga8La8MpmwKDYq8AkEx3m5P8Es8Fg8JpmbezHdiOAlvCXorQLg8Eaip:Rea8Ealp:Sep9qg8Ep9rg8Fp9Abbbaradfgra8Fa8Ea8Epmlvorlvorlvorlvorp9rg8Fp9Abbbaradfgra8Fa8Ea8EpmwDqkwDqkwDqkwDqkp9rg8Fp9Abbbaradfgra8Fa8Ea8EpmxmPsxmPsxmPsxmPsp9rg8Fp9Abbbaradfgra8Faga8JpmwDKYqk8AExm35Ps8E8Fg8Eaip:Rea8Ealp:Sep9qg8Ep9rg8Fp9Abbbaradfgra8Fa8Ea8Epmlvorlvorlvorlvorp9rg8Fp9Abbbaradfgra8Fa8Ea8EpmwDqkwDqkwDqkwDqkp9rg8Fp9Abbbaradfgra8Fa8Ea8EpmxmPsxmPsxmPsxmPsp9rg8Fp9AbbbaradfhraoczfgoaX6mbkkaYclfgYad6mbkaHavcjdfaAad2;8qbbavavcjdfaAcufad2fad;8qbbaAazfhzc9:hoaOhxaOmbxlkkaeTmbaDalfhrcbhocuhlinaralaD9RglfaD6mdaPaeao9RaoaPfae6Eaofgoae6mbkaial9Rhxkcbc99amax9RakSEhoxekc9:hokavcj;kbf8Kjjjjbaokwbz:bjjjbk:TseHu8Jjjjjbc;ae9Rgv8Kjjjjbc9:hodnaeci9UgrcHfal0mbcuhoaiRbbgwc;WeGc;Ge9hmbawcsGgDce0mbavc;abfcFecje;8kbavcUf9cu83ibavc8Wf9cu83ibavcyf9cu83ibavcaf9cu83ibavcKf9cu83ibavczf9cu83ibav9cu83iwav9cu83ibaialfc9WfhqaicefgwarfhldnaeTmbcmcsaDceSEhkcbhxcbhmcbhrcbhicbhoindnalaq9nmbc9:hoxikdndnawRbbgDc;Ve0mbavc;abfaoaDcu7gPcl4fcsGcitfgsydlhzasydbhHdndnaDcsGgsak9pmbavaiaPfcsGcdtfydbaxasEhDaxasTgOfhxxekdndnascsSmbcehOasc987asamffcefhDxekalcefhDal8SbbgscFeGhPdndnascu9mmbaDhlxekalcvfhlaPcFbGhPcrhsdninaD8SbbgOcFbGastaPVhPaOcu9kmeaDcefhDascrfgsc8J9hmbxdkkaDcefhlkcehOaPce4cbaPceG9R7amfhDkaDhmkavc;abfaocitfgsaDBdbasazBdlavaicdtfaDBdbavc;abfaocefcsGcitfgsaHBdbasaDBdlaocdfhoaOaifhidnadcd9hmbabarcetfgsaH87ebasclfaD87ebascdfaz87ebxdkabarcdtfgsaHBdbascwfaDBdbasclfazBdbxekdnaDcpe0mbaxcefgOavaiaqaDcsGfRbbgscl49RcsGcdtfydbascz6gPEhDavaias9RcsGcdtfydbaOaPfgzascsGgOEhsaOThOdndnadcd9hmbabarcetfgHax87ebaHclfas87ebaHcdfaD87ebxekabarcdtfgHaxBdbaHcwfasBdbaHclfaDBdbkavaicdtfaxBdbavc;abfaocitfgHaDBdbaHaxBdlavaicefgicsGcdtfaDBdbavc;abfaocefcsGcitfgHasBdbaHaDBdlavaiaPfgicsGcdtfasBdbavc;abfaocdfcsGcitfgDaxBdbaDasBdlaocifhoaiaOfhiazaOfhxxekaxcbalRbbgHEgAaDc;:eSgDfhzaHcsGhCaHcl4hXdndnaHcs0mbazcefhOxekazhOavaiaX9RcsGcdtfydbhzkdndnaCmbaOcefhxxekaOhxavaiaH9RcsGcdtfydbhOkdndnaDTmbalcefhDxekalcdfhDal8SbegPcFeGhsdnaPcu9kmbalcofhAascFbGhscrhldninaD8SbbgPcFbGaltasVhsaPcu9kmeaDcefhDalcrfglc8J9hmbkaAhDxekaDcefhDkasce4cbasceG9R7amfgmhAkdndnaXcsSmbaDhsxekaDcefhsaD8SbbglcFeGhPdnalcu9kmbaDcvfhzaPcFbGhPcrhldninas8SbbgDcFbGaltaPVhPaDcu9kmeascefhsalcrfglc8J9hmbkazhsxekascefhskaPce4cbaPceG9R7amfgmhzkdndnaCcsSmbashlxekascefhlas8SbbgDcFeGhPdnaDcu9kmbascvfhOaPcFbGhPcrhDdninal8SbbgscFbGaDtaPVhPascu9kmealcefhlaDcrfgDc8J9hmbkaOhlxekalcefhlkaPce4cbaPceG9R7amfgmhOkdndnadcd9hmbabarcetfgDaA87ebaDclfaO87ebaDcdfaz87ebxekabarcdtfgDaABdbaDcwfaOBdbaDclfazBdbkavc;abfaocitfgDazBdbaDaABdlavaicdtfaABdbavc;abfaocefcsGcitfgDaOBdbaDazBdlavaicefgicsGcdtfazBdbavc;abfaocdfcsGcitfgDaABdbaDaOBdlavaiaHcz6aXcsSVfgicsGcdtfaOBdbaiaCTaCcsSVfhiaocifhokawcefhwaocsGhoaicsGhiarcifgrae6mbkkcbc99alaqSEhokavc;aef8Kjjjjbaok:clevu8Jjjjjbcz9Rhvdnaecvfal9nmbc9:skdnaiRbbc;:eGc;qeSmbcuskav9cb83iwaicefhoaialfc98fhrdnaeTmbdnadcdSmbcbhwindnaoar6mbc9:skaocefhlao8SbbgicFeGhddndnaicu9mmbalhoxekaocvfhoadcFbGhdcrhidninal8SbbgDcFbGaitadVhdaDcu9kmealcefhlaicrfgic8J9hmbxdkkalcefhokabawcdtfadc8Etc8F91adcd47avcwfadceGcdtVglydbfgiBdbalaiBdbawcefgwae9hmbxdkkcbhwindnaoar6mbc9:skaocefhlao8SbbgicFeGhddndnaicu9mmbalhoxekaocvfhoadcFbGhdcrhidninal8SbbgDcFbGaitadVhdaDcu9kmealcefhlaicrfgic8J9hmbxdkkalcefhokabawcetfadc8Etc8F91adcd47avcwfadceGcdtVglydbfgi87ebalaiBdbawcefgwae9hmbkkcbc99aoarSEk:2Pliur97eue978Jjjjjbc8W9Rhiaec98Ghldndnadcl9hmbdnalTmbcbhvabhdinadadpbbbgocKp:RecKp:Sep;6egraocwp:RecKp:Sep;6earp;Geaoczp:RecKp:Sep;6egwp;Gep;Kep;LegDpxbbbbbbbbbbbbbbbbp:2egqarpxbbbjbbbjbbbjbbbjgkp9op9rp;Kegrpxbb;:9cbb;:9cbb;:9cbb;:9cararp;MeaDaDp;Meawaqawakp9op9rp;Kegrarp;Mep;Kep;Kep;Jep;Negwp;Mepxbbn0bbn0bbn0bbn0gqp;KepxFbbbFbbbFbbbFbbbp9oaopxbbbFbbbFbbbFbbbFp9op9qarawp;Meaqp;Kecwp:RepxbFbbbFbbbFbbbFbbp9op9qaDawp;Meaqp;Keczp:RepxbbFbbbFbbbFbbbFbp9op9qpkbbadczfhdavclfgval6mbkkalaeSmeaipxbbbbbbbbbbbbbbbbgqpklbaiabalcdtfgdaeciGglcdtgv;8qbbdnalTmbaiaipblbgocKp:RecKp:Sep;6egraocwp:RecKp:Sep;6earp;Geaoczp:RecKp:Sep;6egwp;Gep;Kep;LegDaqp:2egqarpxbbbjbbbjbbbjbbbjgkp9op9rp;Kegrpxbb;:9cbb;:9cbb;:9cbb;:9cararp;MeaDaDp;Meawaqawakp9op9rp;Kegrarp;Mep;Kep;Kep;Jep;Negwp;Mepxbbn0bbn0bbn0bbn0gqp;KepxFbbbFbbbFbbbFbbbp9oaopxbbbFbbbFbbbFbbbFp9op9qarawp;Meaqp;Kecwp:RepxbFbbbFbbbFbbbFbbp9op9qaDawp;Meaqp;Keczp:RepxbbFbbbFbbbFbbbFbp9op9qpklbkadaiav;8qbbskaipxFubbFubbFubbFubbgxpklbdnalTmbcbhvabhdinadczfgmampbbbgopxbbbbbbFFbbbbbbFFgkp9oadpbbbgDaopmbediwDqkzHOAKY8AEgwczp:Reczp:Sep;6egraipblbaDaopmlvorxmPsCXQL358E8Fp9op;6eawczp:Sep;6egwp;Gearp;Gep;Kep;Legopxbbbbbbbbbbbbbbbbp:2egqarpxbbbjbbbjbbbjbbbjgPp9op9rp;Kegrpxb;:FSb;:FSb;:FSb;:FSararp;Meaoaop;MeawaqawaPp9op9rp;Kegrarp;Mep;Kep;Kep;Jep;Negwp;Mepxbbn0bbn0bbn0bbn0gqp;KepxFFbbFFbbFFbbFFbbp9oaoawp;Meaqp;Keczp:Rep9qgoarawp;Meaqp;KepxFFbbFFbbFFbbFFbbp9ogrpmwDKYqk8AExm35Ps8E8Fp9qpkbbadaDakp9oaoarpmbezHdiOAlvCXorQLp9qpkbbadcafhdavclfgval6mbkkalaeSmbaiczfpxbbbbbbbbbbbbbbbbgopklbaiaopklbaiabalcitfgdaeciGglcitgv;8qbbaiaxpkladnalTmbaiaipblzgopxbbbbbbFFbbbbbbFFgkp9oaipblbgDaopmbediwDqkzHOAKY8AEgwczp:Reczp:Sep;6egraipblaaDaopmlvorxmPsCXQL358E8Fp9op;6eawczp:Sep;6egwp;Gearp;Gep;Kep;Legopxbbbbbbbbbbbbbbbbp:2egqarpxbbbjbbbjbbbjbbbjgPp9op9rp;Kegrpxb;:FSb;:FSb;:FSb;:FSararp;Meaoaop;MeawaqawaPp9op9rp;Kegrarp;Mep;Kep;Kep;Jep;Negwp;Mepxbbn0bbn0bbn0bbn0gqp;KepxFFbbFFbbFFbbFFbbp9oaoawp;Meaqp;Keczp:Rep9qgoarawp;Meaqp;KepxFFbbFFbbFFbbFFbbp9ogrpmwDKYqk8AExm35Ps8E8Fp9qpklzaiaDakp9oaoarpmbezHdiOAlvCXorQLp9qpklbkadaiav;8qbbkk;Iwllue97euo978Jjjjjbca9Rhidnaec98GglTmbcbhvabhoinaocKfpxbbjZbbjZbbjZbbjZpx;Zl81Z;Zl81Z;Zl81Z;Zl81ZaopbbbgraoczfgwpbbbgDpmlvorxmPsCXQL358E8Fgqczp:Segkpxibbbibbbibbbibbbp9qp;6ep;NegxaraDpmbediwDqkzHOAKY8AEgrczp:Reczp:Sep;6ep;MegDaDp;Meaxarczp:Sep;6ep;Megmamp;Meaxaqczp:Reczp:Sep;6ep;Megqaqp;Mep;Kep;Kep;Lepxbbbbbbbbbbbbbbbbp:4ep;Jepxb;:FSb;:FSb;:FSb;:FSgxp;Mepxbbn0bbn0bbn0bbn0grp;KepxFFbbFFbbFFbbFFbbgPp9oamaxp;Mearp;Keczp:Rep9qgmaDaxp;Mearp;KeaPp9oaqaxp;Mearp;Keczp:Rep9qgrpmwDKYqk8AExm35Ps8E8FgDp5eakclp:RegxpEi:T:j83ibawaDp5baxpEd:T:j83ibaocwfamarpmbezHdiOAlvCXorQLgrp5eaxpEe:T:j83ibaoarp5baxpEb:T:j83ibaocafhoavclfgval6mbkkdnalaeSmbaiczfpxbbbbbbbbbbbbbbbbgxpklbaiaxpklbaiabalcitfgoaeciGgvcitgw;8qbbdnavTmbaipxbbjZbbjZbbjZbbjZpx;Zl81Z;Zl81Z;Zl81Z;Zl81ZaipblbgraipblzgDpmlvorxmPsCXQL358E8Fgqczp:Segkpxibbbibbbibbbibbbp9qp;6ep;NegxaraDpmbediwDqkzHOAKY8AEgrczp:Reczp:Sep;6ep;MegDaDp;Meaxarczp:Sep;6ep;Megmamp;Meaxaqczp:Reczp:Sep;6ep;Megqaqp;Mep;Kep;Kep;Lepxbbbbbbbbbbbbbbbbp:4ep;Jepxb;:FSb;:FSb;:FSb;:FSgxp;Mepxbbn0bbn0bbn0bbn0grp;KepxFFbbFFbbFFbbFFbbgPp9oamaxp;Mearp;Keczp:Rep9qgmaDaxp;Mearp;KeaPp9oaqaxp;Mearp;Keczp:Rep9qgrpmwDKYqk8AExm35Ps8E8FgDp5eakclp:RegxpEi:T:j83iKaiaDp5baxpEd:T:j83izaiamarpmbezHdiOAlvCXorQLgrp5eaxpEe:T:j83iwaiarp5baxpEb:T:j83ibkaoaiaw;8qbbkk;uddiue978Jjjjjbc;ab9Rhidnadcd4ae2glc98GgvTmbcbheabhdinadadpbbbgocwp:Recwp:Sep;6eaocep:SepxbbjFbbjFbbjFbbjFp9opxbbjZbbjZbbjZbbjZp:Uep;Mepkbbadczfhdaeclfgeav6mbkkdnavalSmbaic8WfpxbbbbbbbbbbbbbbbbgopklbaicafaopklbaiczfaopklbaiaopklbaiabavcdtfgdalciGgecdtgv;8qbbdnaeTmbaiaipblbgocwp:Recwp:Sep;6eaocep:SepxbbjFbbjFbbjFbbjFp9opxbbjZbbjZbbjZbbjZp:Uep;Mepklbkadaiav;8qbbkk:CPvdue97euw97eu8Jjjjjbc8W9Rhiaec98Ghldndnadcl9hmbaipxbbbbbbbbbbbbbbbbgvpklbdnalTmbcbhoabhdinadpbbbhradpxbbuJbbuJbbuJbbuJaipblbarcKp:Tep9qgwcep:Seawp9qgDcdp:SeaDp9qgDclp:SeaDp9qgqp;6ep;NegDarcwp:RecKp:SegkarpxFbbbFbbbFbbbFbbbgxp9ogmp:Uep;6ep;Mepxbbn0bbn0bbn0bbn0gPp;Kecwp:RepxbFbbbFbbbFbbbFbbp9oaDamakp:Xearczp:RecKp:Segrp:Uep;6ep;MeaPp;Keaxp9op9qaDamakarp:Uep:Xep;6ep;MeaPp;Keczp:RepxbbFbbbFbbbFbbbFbp9op9qaDaqawcep:Rep9oawpxebbbebbbebbbebbbp9op9qp;6ep;MeaPp;KecKp:Rep9qpkbbadczfhdaoclfgoal6mbkkalaeSmeaiavpklaaicafabalcdtfgdaeciGglcdtgo;8qbbaiavpklbdnalTmbaipblahraipxbbuJbbuJbbuJbbuJaipblbarcKp:Tep9qgwcep:Seawp9qgDcdp:SeaDp9qgDclp:SeaDp9qgqp;6ep;NegDarcwp:RecKp:SegkarpxFbbbFbbbFbbbFbbbgxp9ogmp:Uep;6ep;Mepxbbn0bbn0bbn0bbn0gPp;Kecwp:RepxbFbbbFbbbFbbbFbbp9oaDamakp:Xearczp:RecKp:Segrp:Uep;6ep;MeaPp;Keaxp9op9qaDamakarp:Uep:Xep;6ep;MeaPp;Keczp:RepxbbFbbbFbbbFbbbFbp9op9qaDaqawcep:Rep9oawpxebbbebbbebbbebbbp9op9qp;6ep;MeaPp;KecKp:Rep9qpklakadaicafao;8qbbskaipxbbbbbbbbbbbbbbbbgvpklbdnalTmbcbhoabhdinadczfgspxbFu9hbFu9hbFu9hbFu9hadpbbbgDaspbbbgPpmlvorxmPsCXQL358E8Fgmczp:Teaipblbp9qgrcep:Searp9qgwcdp:Seawp9qgwclp:Seawp9qgwcwp:Seawp9qgqp;6ep;NegwaDaPpmbediwDqkzHOAKY8AEgDpxFFbbFFbbFFbbFFbbgPp9ogkaDczp:Segxp:Ueamczp:Reczp:Segmp:Xep;6ep;Mepxbbn0bbn0bbn0bbn0gDp;KeaPp9oawakaxamp:Uep:Xep;6ep;MeaDp;Keczp:Rep9qgxawaqarcep:Rep9oarpxebbbebbbebbbebbbp9op9qp;6ep;MeaDp;Keczp:Reawamakp:Uep;6ep;MeaDp;KeaPp9op9qgrpmwDKYqk8AExm35Ps8E8FpkbbadaxarpmbezHdiOAlvCXorQLpkbbadcafhdaoclfgoal6mbkkalaeSmbaiczfpxbbbbbbbbbbbbbbbbgrpklbaiarpklbaiabalcitfgdaeciGglcitgo;8qbbaiavpkladnalTmbaipxbFu9hbFu9hbFu9hbFu9haipblbgDaipblzgPpmlvorxmPsCXQL358E8Fgmczp:Teaipblap9qgrcep:Searp9qgwcdp:Seawp9qgwclp:Seawp9qgwcwp:Seawp9qgqp;6ep;NegwaDaPpmbediwDqkzHOAKY8AEgDpxFFbbFFbbFFbbFFbbgPp9ogkaDczp:Segxp:Ueamczp:Reczp:Segmp:Xep;6ep;Mepxbbn0bbn0bbn0bbn0gDp;KeaPp9oawakaxamp:Uep:Xep;6ep;MeaDp;Keczp:Rep9qgxawaqarcep:Rep9oarpxebbbebbbebbbebbbp9op9qp;6ep;MeaDp;Keczp:Reawamakp:Uep;6ep;MeaDp;KeaPp9op9qgrpmwDKYqk8AExm35Ps8E8FpklzaiaxarpmbezHdiOAlvCXorQLpklbkadaiao;8qbbkk9teiucbcbydj1jjbgeabcifc98GfgbBdj1jjbdndnabZbcztgd9nmbcuhiabad9RcFFifcz4nbcuSmekaehikaikkkebcjwklz:Dbb",n=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),i=new Uint8Array([32,0,65,2,1,106,34,33,3,128,11,4,13,64,6,253,10,7,15,116,127,5,8,12,40,16,19,54,20,9,27,255,113,17,42,67,24,23,146,148,18,14,22,45,70,69,56,114,101,21,25,63,75,136,108,28,118,29,73,115]);if(typeof WebAssembly!="object")return{supported:!1};var o=WebAssembly.validate(n)?s(t):s(e),r,a=WebAssembly.instantiate(o,{}).then(function(E){r=E.instance,r.exports.__wasm_call_ctors()});function s(E){for(var I=new Uint8Array(E.length),y=0;y<E.length;++y){var b=E.charCodeAt(y);I[y]=b>96?b-97:b>64?b-39:b+4}for(var x=0,y=0;y<E.length;++y)I[x++]=I[y]<60?i[I[y]]:(I[y]-60)*64+I[++y];return I.buffer.slice(0,x)}function A(E,I,y,b,x,S,P){var D=E.exports.sbrk,Q=b+3&-4,v=D(Q*x),d=D(S.length),B=new Uint8Array(E.exports.memory.buffer);B.set(S,d);var T=I(v,b,x,d,S.length);if(T==0&&P&&P(v,Q,x),y.set(B.subarray(v,v+b*x)),D(v-D(0)),T!=0)throw new Error("Malformed buffer data: "+T)}var l={NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp",COLOR:"meshopt_decodeFilterColor"},f={ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"},h=[],m=0;function p(E){var I={object:new Worker(E),pending:0,requests:{}};return I.object.onmessage=function(y){var b=y.data;I.pending-=b.count,I.requests[b.id][b.action](b.value),delete I.requests[b.id]},I}function g(E){for(var I="self.ready = WebAssembly.instantiate(new Uint8Array(["+new Uint8Array(o)+"]), {}).then(function(result) { result.instance.exports.__wasm_call_ctors(); return result.instance; });self.onmessage = "+_.name+";"+A.toString()+_.toString(),y=new Blob([I],{type:"text/javascript"}),b=URL.createObjectURL(y),x=h.length;x<E;++x)h[x]=p(b);for(var x=E;x<h.length;++x)h[x].object.postMessage({});h.length=E,URL.revokeObjectURL(b)}function C(E,I,y,b,x){for(var S=h[0],P=1;P<h.length;++P)h[P].pending<S.pending&&(S=h[P]);return new Promise(function(D,Q){var v=new Uint8Array(y),d=++m;S.pending+=E,S.requests[d]={resolve:D,reject:Q},S.object.postMessage({id:d,count:E,size:I,source:v,mode:b,filter:x},[v.buffer])})}function _(E){var I=E.data;if(!I.id)return self.close();self.ready.then(function(y){try{var b=new Uint8Array(I.count*I.size);A(y,y.exports[I.mode],b,I.count,I.size,I.source,y.exports[I.filter]),self.postMessage({id:I.id,count:I.count,action:"resolve",value:b},[b.buffer])}catch(x){self.postMessage({id:I.id,count:I.count,action:"reject",value:x})}})}return{ready:a,supported:!0,useWorkers:function(E){g(E)},decodeVertexBuffer:function(E,I,y,b,x){A(r,r.exports.meshopt_decodeVertexBuffer,E,I,y,b,r.exports[l[x]])},decodeIndexBuffer:function(E,I,y,b){A(r,r.exports.meshopt_decodeIndexBuffer,E,I,y,b)},decodeIndexSequence:function(E,I,y,b){A(r,r.exports.meshopt_decodeIndexSequence,E,I,y,b)},decodeGltfBuffer:function(E,I,y,b,x,S){A(r,r.exports[f[x]],E,I,y,b,r.exports[l[S]])},decodeGltfBufferAsync:function(E,I,y,b,x){return h.length>0?C(E,I,y,f[b],l[x]):a.then(function(){var S=new Uint8Array(E*I);return A(r,r.exports[f[b]],S,E,I,y,r.exports[l[x]]),S})}}})();typeof jC=="object"&&typeof jS=="object"?jS.exports=lb:typeof define=="function"&&define.amd?define([],function(){return lb}):typeof jC=="object"?jC.MeshoptDecoder=lb:(typeof self<"u"?self:jC).MeshoptDecoder=lb});var lU=ys((YC,YS)=>{var fb=(function(){"use strict";var e="b9H79Tebbbe:Gez9Geueu9Geub9Gbb9Gsuuuuuuuuuuuu99uueu9Gvuuuuub9Gruuuuuuub9Gouuuuuue999Gvuuuuueu9Gquuuuuuu99uueu9GPuuuuuuuuuuu99uueu9Gquuuuuuuu99ueu9Gruuuuuu99eu9Gwuuuuuu99ueu9Giuuue999Gluuuueu9GiuuueuiXCdilvorlwiDqkxmPbssbelve9Weiiviebeoweuec:G:Pdkr;7eko9TW9T9VV95dbH9F9F939H79T9F9J9H229F9Jt9VV7bbz9TW79O9V9Wt9F79P9T9W29P9M95br8E9TW79O9V9Wt9F79P9T9W29P9M959x9Pt9OcttV9P9I91tW7bw8A9TW79O9V9Wt9F79P9T9W29P9M959x9Pt9O9v9W9K9HtWbDQ9TW79O9V9Wt9F79P9T9W29P9M959t29V9W9W95bqX9TW79O9V9Wt9F79P9T9W29P9M959qV919UWbkQ9TW79O9V9Wt9F79P9T9W29P9M959q9V9P9Ut7bxX9TW79O9V9Wt9F79P9T9W29P9M959t9J9H2Wbma9TW79O9V9Wt9F9V9Wt9P9T9P96W9wWVtW94SWt9J9O9sW9T9H9WbPl79IV9RbsDwebcekdOAq:d;OeCdbk:J1eo3ue99euE99Cue9:8Jjjjjbcj;sb9Rgs8Kjjjjbcbhzasc:Cefcbc;Kbz:rjjjb8AdnabaeSmbabaeadcdtz:qjjjb8AkdnamcdGTmbalcrfci4gHcbyd1:jjjbHjjjjbbheasc:Cefasyd;8egOcdtfaeBdbasaOcefBd;8eaecbaHz:rjjjbhAcbhlcbhednadTmbcbhlabheadhHinaAaeydbgOci4fgCaCRbbgCceaOcrGgOtV86bbaCcu7aO4ceGalfhlaeclfheaHcufgHmbkcualcdtalcFFFFi0Ehekaecbyd1:jjjbHjjjjbbhzasc:Cefasyd;8egecdtfazBdbasaecefBd;8ealcd4alfhOcehHinaHgecethHaeaO6mbkcbhXcuaecdtgOaecFFFFi0Ecbyd1:jjjbHjjjjbbhHasc:Cefasyd;8egCcdtfaHBdbasaCcefBd;8eaHcFeaOz:rjjjbhQdnadTmbaecufhLcbhKindndnaQabaXcdtfgYydbgCc:v;t;h;Ev2aLGgOcdtfgAydbgHcuSmbceheinazaHcdtfydbaCSmdaOaefhHaecefheaQaHaLGgOcdtfgAydbgHcu9hmbkkazaKcdtfaCBdbaAaKBdbaKhHaKcefhKkaYaHBdbaXcefgXad9hmbkkaQcbyd:m:jjjbH:bjjjbbasasyd;8ecufBd;8ekcbh8AcualcefgecdtaecFFFFi0Ecbyd1:jjjbHjjjjbbhKasc:Cefasyd;8egecdtfaKBdbasaKBdNeasaecefBd;8ecuadcitadcFFFFe0Ecbyd1:jjjbHjjjjbbhEasc:Cefasyd;8egecdtfaEBdbasaEBd:yeasaecefBd;8eascNefabadalcbz:cjjjbcualcdtgealcFFFFi0Eg3cbyd1:jjjbHjjjjbbhCasc:Cefasyd;8egHcdtfaCBdbasaHcefBd;8ea3cbyd1:jjjbHjjjjbbhYasc:Cefasyd;8egHcdtfaYBdbasaHcefBd;8eaCaYaialavazasc:Cefz:djjjbalcbyd1:jjjbHjjjjbbh5asc:Cefasyd;8egHcdtfa5BdbasaHcefBd;8ea3cbyd1:jjjbHjjjjbbhHasc:Cefasyd;8egOcdtfaHBdbasaOcefBd;8ea3cbyd1:jjjbHjjjjbbhOasc:Cefasyd;8egAcdtfaOBdbasaAcefBd;8eaHcFeaez:rjjjbh8EaOcFeaez:rjjjbh8FdnalTmbaEcwfhaindnaKa8AgOcefg8AcdtfydbgAaKaOcdtgefydbgHSmbaAaH9RhhaEaHcitfhga8Faefh8Ja8Eaefh8KcbhQindndnagaQcitfydbgLaO9hmba8KaOBdba8JaOBdbxekdnaKaLcdtg8LfgeclfydbgHaeydbgeSmbaEaecitgAfydbaOSmeaHae9Rh8Maecu7aHfhXaaaAfhHcbheinaXaeSmeaecefheaHydbhAaHcwfhHaAaO9hmbkaea8M6meka8Fa8LfgeaOaLaeydbcuSEBdba8KaLaOa8KydbcuSEBdbkaQcefgQah9hmbkka8Aal9hmbkaChHaYhOa8FhAa8EhQcbheindndnaeaHydbgL9hmbdnaeaOydbgL9hmbaQydbhLdnaAydbgXcu9hmbaLcu9hmba5aefcb86bbxikdnaXcuSmbaLcuSmbaeaXSmbaCaXcdtfydbaCaLcdtfydb9hmba5aefcd86bbxika5aefh8KdnaeaXSmbaeaLSmba8Kce86bbxika8Kcl86bbxdkdnaeaYaLcdtgXfydb9hmbdnaAydbg8KcuSmbaea8KSmbaQydbghcuSmbaeahSmba8FaXfydbggcuSmbagaLSmba8EaXfydbgXcuSmbaXaLSmbdnaCa8KcdtfydbgLaCaXcdtfydb9hmbaLaCahcdtfydbgXSmbaXaCagcdtfydb9hmba5aefcd86bbxlka5aefcl86bbxika5aefcl86bbxdka5aefcl86bbxeka5aefa5aLfRbb86bbkaHclfhHaOclfhOaAclfhAaQclfhQalaecefge9hmbkdnamcaGTmbaEcwfh8Jcbh8Nindndna5a8NfgyRbbg8Pc9:fPibebekdndndnaCa8Ncdtfydbgea8N9hmbdnaqmbcbhgxdkdnazTmbcbhga8NheinagaqazaecdtgefydbfRbbcdGce4VhgaYaefydbgea8N9hmbxikkcbhga8NheinagaqaefRbbcdGce4VhgaYaecdtfydbgea8N9hmbxdkka5aefRbbhexeka8NheindnaKaecdtgafgeclfydbgHaeydbgeSmbaHae9Rh8AaEaecitfh8MaCaafh8Lcbh8Kina8Ma8KcitfydbgXhednindnaKaecdtgLfgeclfydbgHaeydbgeSmbdnaCaEaecitgOfydbcdtfydba8LydbgQ9hmbcehexikaHae9Rhhaecu7aHfhAa8JaOfhHcbheinaAaeSmeaecefheaHydbhOaHcwfhHaCaOcdtfydbaQ9hmbkaeah6hexdkaYaLfydbgeaX9hmbkcbhekagaece7Vhga8Kcefg8Ka8A9hmbkkaYaafydbgea8N9hmbka8PciagceGEhekayae86bbka8Ncefg8Nal9hmbkkdnaqTmbdndnazTmbazheaChHalhOindnaqaeydbfRbbceGTmba5aHydbfcl86bbkaeclfheaHclfhHaOcufgOmbxdkkaChealhHindnaqRbbceGTmba5aeydbfcl86bbkaqcefhqaeclfheaHcufgHmbkkaChealhOa5hHindna5aeydbfRbbcl9hmbaHcl86bbkaeclfheaHcefhHaOcufgOmbkkamceGTmba5healhHindnaeRbbce9hmbaecl86bbkaecefheaHcufgHmbkkcbhIcualcx2alc;v:Q;v:Qe0Ecbyd1:jjjbHjjjjbbhaasc:Cefasyd;8egecdtfaaBdbasaecefBd;8easc:qefcbBdbas9cb83i1eaaaialavazasc1efz:ejjjbh8RdndnaDmbcbh8Scbh8Lxekcbh8LawhecbhHindnaeIdbJbbbb9ETmbasa8LcdtfaHBdba8Lcefh8LkaeclfheaDaHcefgH9hmbkcua8Lal2gecdtaecFFFFi0Ecbyd1:jjjbHjjjjbbh8Sasc:Cefasyd;8egecdtfa8SBdbasaecefBd;8ealTmbdna8Lmbcbh8Lxekarcd4hXdnazTmba8Lcdth8KcbhLa8ShKinaoazaLcdtfydbaX2cdtfhQasheaKhHa8LhOinaHaQaeydbcdtgAfIdbawaAfIdbNUdbaeclfheaHclfhHaOcufgOmbkaKa8KfhKaLcefgLal9hmbxdkka8Lcdth8KcbhLa8ShKinaoaLaX2cdtfhQasheaKhHa8LhOinaHaQaeydbcdtgAfIdbawaAfIdbNUdbaeclfheaHclfhHaOcufgOmbkaKa8KfhKaLcefgLal9hmbkkcualc8S2gHalc;D;O;f8U0EgAcbyd1:jjjbHjjjjbbheasc:Cefasyd;8egOcdtfaeBdbasaOcefBd;8eaecbaHz:rjjjbhycbhqcbh8Ndna8LTmbcbhIaAcbyd1:jjjbHjjjjbbh8Nasc:Cefasyd;8egecdtfa8NBdbasaecefBd;8ea8NcbaHz:rjjjb8Acua8Lal2gecltgHaecFFFFb0Ecbyd1:jjjbHjjjjbbhqasc:Cefasyd;8egecdtfaqBdbasaecefBd;8eaqcbaHz:rjjjb8AamcjjjjdGTmbcualcltgealcFFFFb0Ecbyd1:jjjbHjjjjbbhIasc:Cefasyd;8egHcdtfaIBdbasaHcefBd;8eaIcbaez:rjjjb8AkdnadTmbcbhQabhHinaaaHclfydbgLcx2fgeIdbaaaHydbgKcx2fgOIdbgR:tg8UaaaHcwfydbgXcx2fgAIdlaOIdlg8V:tg8WNaAIdbaR:tg8XaeIdla8V:tg8YN:tg8Zh80aeIdwaOIdwg81:tgBa8XNaAIdwa81:tg83a8UN:tgUh8Xa8Ya83Na8WaBN:tg8Yh8Udna8Za8ZNa8Ya8YNaUaUNMM:rgBJbbbb9EgOTmba8ZaB:vh80aUaB:vh8Xa8YaB:vh8UkayaCaKcdtfydbgAc8S2fgea8UaB:rg8Wa8UNNg85aeIdbMUdbaea8Xa8Wa8XNg86Ng87aeIdlMUdlaea80a8Wa80Ng83Ng88aeIdwMUdwaea86a8UNg86aeIdxMUdxaea83a8UNg89aeIdzMUdzaea83a8XNg8:aeIdCMUdCaea8Ua8Wa80a81Na8UaRNa8Va8XNMM:mgZNg83Ng8UaeIdKMUdKaea8Xa83Ng8XaeId3MUd3aea80a83Ng80aeIdaMUdaaea83aZNg83aeId8KMUd8Kaea8WaeIdyMUdyayaCaLcdtfydbgLc8S2fgea85aeIdbMUdbaea87aeIdlMUdlaea88aeIdwMUdwaea86aeIdxMUdxaea89aeIdzMUdzaea8:aeIdCMUdCaea8UaeIdKMUdKaea8XaeId3MUd3aea80aeIdaMUdaaea83aeId8KMUd8Kaea8WaeIdyMUdyayaCaXcdtfydbgKc8S2fgea85aeIdbMUdbaea87aeIdlMUdlaea88aeIdwMUdwaea86aeIdxMUdxaea89aeIdzMUdzaea8:aeIdCMUdCaea8UaeIdKMUdKaea8XaeId3MUd3aea80aeIdaMUdaaea83aeId8KMUd8Kaea8WaeIdyMUdydnaITmbdnaOTmba8ZaB:vh8ZaUaB:vhUa8YaB:vh8YkaIaAcltfgeaBJbbbZNg8UaUNg8WaeIdlMUdlaea8Ua8ZNg8XaeIdwMUdwaea8Ua8YNg80aeIdbMUdbaea8UaR:ma8YNaUa8VN:ta81a8ZN:tNg8UaeIdxMUdxaIaLcltfgea8WaeIdlMUdlaea8XaeIdwMUdwaea80aeIdbMUdbaea8UaeIdxMUdxaIaKcltfgea8WaeIdlMUdlaea8XaeIdwMUdwaea80aeIdbMUdbaea8UaeIdxMUdxkaHcxfhHaQcifgQad6mbkkdnalTmbJ;n;m;m89J:v:;;w8ZamczGEh8YcbhOaChAaahHayheindnaOaAydb9hmbaecxfgQaQIdbJbbbbMUdbaeczfgQaQIdbJbbbbMUdbaecCfgQaQIdbJbbbbMUdbaea8YaecyfgQIdbg8ZNg8UaeIdbMUdbaeclfgLa8UaLIdbMUdbaecwfgLa8UaLIdbMUdbaecKfgLaLIdbaHIdbg8Xa8UN:tUdbaHcwfIdbh8Waec3fgLaLIdba8UaHclfIdbg80N:tUdbaecafgLaLIdba8Ua8WN:tUdbaec8KfgLIdbhUaQa8Za8UMUdbaLaUa8Ua8Wa8WNa8Xa8XNa80a80NMMNMUdbkaAclfhAaHcxfhHaec8SfhealaOcefgO9hmbkkdnadTmbcbhXabhKinabaXcdtfhLcbhHina5aLaHc:G1jjbfydbcdtfydbgOfRbbhedndna5aKaHfydbgAfRbbgQc99fcFeGcpe0mbaec99fcFeGc;:e6mekdnaQcufcFeGce0mba8EaAcdtfydbaO9hmekdnaecufcFeGce0mba8FaOcdtfydbaA9hmekJbbacJbbacJbbbZaecFeGceSEaQcFeGceSEh88aaaOcx2fgeIdwaaaAcx2fgQIdwgB:tg80:mh86aeIdlaQIdlg83:tg8Z:mh89aeIdbaQIdbgR:tgU:mh8:dnaaaLaHc:K1jjbfydbcdtfydbcx2fgeIdwaB:tg8Va80a80NaUaUNa8Za8ZNMMg8YNa8Va80NaeIdbaR:tg81aUNa8ZaeIdla83:tg85NMMg8Wa80N:tg8Xa8XNa81a8YNa8WaUN:tg8Ua8UNa85a8YNa8Wa8ZN:tg8Wa8WNMM:rg87Jbbbb9ETmba8Xa87:vh8Xa8Wa87:vh8Wa8Ua87:vh8Uka88a8Y:rNg8Ya8XaBNa8UaRNa83a8WNMM:mgZNg87aZNhZa8Xa87Nhna8Wa87Nhca8Ua87Nh9ca8Ya8XNg87a8WNhJa87a8UNh9ea8Ya8WNgTa8UNhSa8Xa87Nh87a8WaTNhTa8Ua8Ya8UNNh9hdnaUa85Na81a89NMg8Xa8XNa8Za8VNa85a86NMg8Ua8UNa80a81Na8Va8:NMg8Wa8WNMM:rg80Jbbbb9ETmba8Xa80:vh8Xa8Wa80:vh8Wa8Ua80:vh8UkayaCaAcdtfydbc8S2fgeaeIdba9ha8Ua88a80:rNg80a8UNNMgUMUdbaeaTa8Wa80a8WNg8VNMg81aeIdlMUdlaea87a8Xa80a8XNg8ZNMg85aeIdwMUdwaeaSa8Va8UNMg8VaeIdxMUdxaea9ea8Za8UNMg87aeIdzMUdzaeaJa8Za8WNMg8ZaeIdCMUdCaea9ca8Ua80a8XaBNa8UaRNa83a8WNMMgB:mNg80NMg8UaeIdKMUdKaeaca8Wa80NMg8WaeId3MUd3aeana8Xa80NMg8XaeIdaMUdaaeaZaBa80N:tg80aeId8KMUd8Kaea8YJbbbbMg8YaeIdyMUdyayaCaOcdtfydbc8S2fgeaUaeIdbMUdbaea81aeIdlMUdlaea85aeIdwMUdwaea8VaeIdxMUdxaea87aeIdzMUdzaea8ZaeIdCMUdCaea8UaeIdKMUdKaea8WaeId3MUd3aea8XaeIdaMUdaaea80aeId8KMUd8Kaea8YaeIdyMUdykaHclfgHcx9hmbkaKcxfhKaXcifgXad6mbka8LTmbcbhKinJbbbbh8YaaabaKcdtfgeclfydbgXcx2fgHIdwaaaeydbg8Kcx2fgOIdwg81:tg8Wa8WNaHIdbaOIdbg85:tg8Xa8XNaHIdlaOIdlg87:tg80a80NMMgRaaaecwfydbghcx2fgeIdwa81:tg8ZNa8Wa8Wa8ZNa8XaeIdba85:tgUNa80aeIdla87:tgBNMMg8UN:tJbbbbJbbjZaRa8Za8ZNaUaUNaBaBNMMg8VNa8Ua8UN:tg83:va83Jbbbb9BEg83Nh89a8Va8WNa8Za8UN:ta83Nh8:aRaBNa80a8UN:ta83NhZa8Va80NaBa8UN:ta83NhnaRaUNa8Xa8UN:ta83Nhca8Va8XNaUa8UN:ta83Nh9ca8XaBNaUa80N:tg8Ua8UNa80a8ZNaBa8WN:tg8Ua8UNa8WaUNa8Za8XN:tg8Ua8UNMM:rJbbbZNh8Ua8Sa8Ka8L2ggcdtfhHa8Saha8L2gEcdtfhOa8SaXa8L2g8JcdtfhAa81:mhJa87:mh9ea85:mhTcbhQa8LhLJbbbbhBJbbbbh83JbbbbhRJbbbbh8VJbbbbh81Jbbbbh85Jbbbbh87Jbbbbh88Jbbbbh86inascjdfaQfgecwfa8Ua8:aAIdbaHIdbg8Z:tg80Na89aOIdba8Z:tgUNMg8WNUdbaeclfa8Uana80NaZaUNMg8XNUdbaea8Ua9ca80NacaUNMg80NUdbaecxfa8UaJa8WNa9ea8XNa8ZaTa80NMMMg8ZNUdba8Ua8Wa8XNNa8VMh8Va8Ua8Wa80NNa81Mh81a8Ua8Xa80NNa85Mh85a8Ua8Za8ZNNa8YMh8Ya8Ua8Wa8ZNNaBMhBa8Ua8Xa8ZNNa83Mh83a8Ua80a8ZNNaRMhRa8Ua8Wa8WNNa87Mh87a8Ua8Xa8XNNa88Mh88a8Ua80a80NNa86Mh86aHclfhHaAclfhAaOclfhOaQczfhQaLcufgLmbka8Na8Kc8S2fgea86aeIdbMUdbaea88aeIdlMUdlaea87aeIdwMUdwaea85aeIdxMUdxaea81aeIdzMUdzaea8VaeIdCMUdCaeaRaeIdKMUdKaea83aeId3MUd3aeaBaeIdaMUdaaea8YaeId8KMUd8Kaea8UaeIdyMUdya8NaXc8S2fgea86aeIdbMUdbaea88aeIdlMUdlaea87aeIdwMUdwaea85aeIdxMUdxaea81aeIdzMUdzaea8VaeIdCMUdCaeaRaeIdKMUdKaea83aeId3MUd3aeaBaeIdaMUdaaea8YaeId8KMUd8Kaea8UaeIdyMUdya8Nahc8S2fgea86aeIdbMUdbaea88aeIdlMUdlaea87aeIdwMUdwaea85aeIdxMUdxaea81aeIdzMUdzaea8VaeIdCMUdCaeaRaeIdKMUdKaea83aeId3MUd3aeaBaeIdaMUdaaea8YaeId8KMUd8Kaea8UaeIdyMUdyaqagcltfhLcbhHa8LhAinaLaHfgeascjdfaHfgOIdbaeIdbMUdbaeclfgQaOclfIdbaQIdbMUdbaecwfgQaOcwfIdbaQIdbMUdbaecxfgeaOcxfIdbaeIdbMUdbaHczfhHaAcufgAmbkaqa8JcltfhLcbhHa8LhAinaLaHfgeascjdfaHfgOIdbaeIdbMUdbaeclfgQaOclfIdbaQIdbMUdbaecwfgQaOcwfIdbaQIdbMUdbaecxfgeaOcxfIdbaeIdbMUdbaHczfhHaAcufgAmbkaqaEcltfhLcbhHa8LhAinaLaHfgeascjdfaHfgOIdbaeIdbMUdbaeclfgQaOclfIdbaQIdbMUdbaecwfgQaOcwfIdbaQIdbMUdbaecxfgeaOcxfIdbaeIdbMUdbaHczfhHaAcufgAmbkaKcifgKad6mbkkcbhOdndnamcwGg9imbJbbbbh85cbh6cbh9kcbh0xekcbh6a3cbyd1:jjjbHjjjjbbh0asc:Cefasyd;8egecdtfa0BdbasaecefBd;8ecua0alabadaCz:fjjjbgAcltaAcjjjjiGEcbyd1:jjjbHjjjjbbh9kasc:Cefasyd;8egecdtfa9kBdbasaecefBd;8ea9kaAa0aaalz:gjjjbJFFuuh85aATmba9kheaAhHinaeIdbg8Ua85a85a8U9EEh85aeclfheaHcufgHmbkaAh6kasydNeh9mdnalTmba9mclfhea9mydbhAa5hHalhQcbhOincbaeydbgLaA9RaHRbbcpeGEaOfhOaHcefhHaeclfheaLhAaQcufgQmbkaOce4hOkcuadaO9Rcifg9ncx2a9nc;v:Q;v:Qe0Ecbyd1:jjjbHjjjjbbh8Pasc:Cefasyd;8egecdtfa8PBdbasaecefBd;8ecua9ncdta9ncFFFFi0Ecbyd1:jjjbHjjjjbbh9oasc:Cefasyd;8egecdtfa9oBdbasaecefBd;8ea3cbyd1:jjjbHjjjjbbhDasc:Cefasyd;8egecdtfaDBdbasaecefBd;8ealcbyd1:jjjbHjjjjbbh9pasc:Cefasyd;8egecdtfa9pBdbasaecefBd;8eaxaxNa8RJbbjZamclGEgnanN:vh88Jbbbbh86dnadak9nmbdna9nci6mbasyd:yeh9qa8Lclth9ra8Pcwfh9sJbbbbh87Jbbbbh86inascNefabadalaCz:cjjjbabh8Kcbh8Mcbh3inaba3cdtfhgcbheindnaCa8KaefydbgOcdtgXfydbgAaCagaec:W1jjbfydbcdtfydbgHcdtghfydbgQSmba5aHfRbbgKcv2a5aOfRbbgLfc;a1jjbfRbbg8JaLcv2aKfgEc;a1jjbfRbbg8AVcFeGTmbdnaQaA9nmbaEc;G1jjbfRbbcFeGmekdnaLcufcFeGce0mbaKTmba8EaXfydbaH9hmekdnaLTmbaKcufcFeGce0mba8FahfydbaO9hmeka8Pa8Mcx2fgAaHaOa8AcFeGgQEBdlaAaOaHaQEBdbaAaQa8JGcb9hBdwa8Mcefh8Mkaeclfgecx9hmbkdna3cifg3ad9pmba8Kcxfh8Ka8Mcifa9n9nmekka8MTmdcbhhinayaCa8Pahcx2fgKydbgQcdtgAfydbc8S2fgeIdwaaaKydlgLcx2fgHIdwg8XNaeIdzaHIdbg80NaeIdaMg8Ua8UMMa8XNaeIdlaHIdlg8ZNaeIdCa8XNaeId3Mg8Ua8UMMa8ZNaeIdba80NaeIdxa8ZNaeIdKMg8Ua8UMMa80NaeId8KMMM:lh8UJbbbbJbbjZaeIdyg8W:va8WJbbbb9BEh8WdndnaKydwg8KmbJFFuuh81xekJbbbbJbbjZayaCaLcdtfydbc8S2fgeIdygU:vaUJbbbb9BEaeIdwaaaQcx2fgHIdwgUNaeIdzaHIdbg8YNaeIdaMgBaBMMaUNaeIdlaHIdlgBNaeIdCaUNaeId3MgUaUMMaBNaeIdba8YNaeIdxaBNaeIdKMgUaUMMa8YNaeId8KMMM:lNh81ka8Wa8UNh8Vdna8LTmba8NaQc8S2fgHIdwa8XNaHIdza80NaHIdaMg8Ua8UMMa8XNaHIdla8ZNaHIdCa8XNaHId3Mg8Ua8UMMa8ZNaHIdba80NaHIdxa8ZNaHIdKMg8Ua8UMMa80NaHId8KMMMh8UaqaQa8L2ggcltfheaHIdyhUa8SaLa8L2gEcdtfgXhHa8LhOinaHIdbg8Wa8WaUNaecxfIdba8XaecwfIdbNa80aeIdbNa8ZaeclfIdbNMMMg8Wa8WM:tNa8UMh8UaHclfhHaeczfheaOcufgOmbkdndna8KmbJbbbbh8Wxeka8NaLc8S2fgOIdwaaaQcx2fgeIdwg8YNaOIdzaeIdbgBNaOIdaMg8Wa8WMMa8YNaOIdlaeIdlg83NaOIdCa8YNaOId3Mg8Wa8WMMa83NaOIdbaBNaOIdxa83NaOIdKMg8Wa8WMMaBNaOId8KMMMh8Wa8SagcdtfhHaqaEcltfheaOIdyhRa8LhOinaHIdbgUaUaRNaecxfIdba8YaecwfIdbNaBaeIdbNa83aeclfIdbNMMMgUaUM:tNa8WMh8WaHclfhHaeczfheaOcufgOmbka8W:lh8Wka8Va8U:lMh8Va81a8WMh81dndndna5aQfRbbc9:fPdbedkdna8Fa8Ea8EaAfydbaLSEaYaAfydbgXcdtfydbgAcu9hmbaYaLcdtfydbhAka8NaXc8S2fgOIdwaaaAcx2fgeIdwg8XNaOIdzaeIdbg80NaOIdaMg8Ua8UMMa8XNaOIdlaeIdlg8ZNaOIdCa8XNaOId3Mg8Ua8UMMa8ZNaOIdba80NaOIdxa8ZNaOIdKMg8Ua8UMMa80NaOId8KMMMh8Ua8SaAa8L2ggcdtfhHaqaXa8L2gEcltfheaOIdyhUa8LhOinaHIdbg8Wa8WaUNaecxfIdba8XaecwfIdbNa80aeIdbNa8ZaeclfIdbNMMMg8Wa8WM:tNa8UMh8UaHclfhHaeczfheaOcufgOmbkdndna8KmbJbbbbh8Wxeka8NaAc8S2fgOIdwaaaXcx2fgeIdwg80NaOIdzaeIdbg8ZNaOIdaMg8Wa8WMMa80NaOIdlaeIdlgUNaOIdCa80NaOId3Mg8Wa8WMMaUNaOIdba8ZNaOIdxaUNaOIdKMg8Wa8WMMa8ZNaOId8KMMMh8Wa8SaEcdtfhHaqagcltfheaOIdyh8Ya8LhOinaHIdbg8Xa8Xa8YNaecxfIdba80aecwfIdbNa8ZaeIdbNaUaeclfIdbNMMMg8Xa8XM:tNa8WMh8WaHclfhHaeczfheaOcufgOmbka8W:lh8Wka8Va8U:lMh8Va81a8WMh81xdkaYaAfydbgAaQSmbina8NaAc8S2fgHIdwa8XNaHIdza80NaHIdaMg8Ua8UMMa8XNaHIdla8ZNaHIdCa8XNaHId3Mg8Ua8UMMa8ZNaHIdba80NaHIdxa8ZNaHIdKMg8Ua8UMMa80NaHId8KMMMh8UaqaAa8L2cltfheaHIdyhUaXhHa8LhOinaHIdbg8Wa8WaUNaecxfIdba8XaecwfIdbNa80aeIdbNa8ZaeclfIdbNMMMg8Wa8WM:tNa8UMh8UaHclfhHaeczfheaOcufgOmbka8Va8U:lMh8VaYaAcdtfydbgAaQ9hmbkka5aLfRbbci9hmba8KTmbaYaLcdtfydbgAaLSmba8SagcdtfhXaaaQcx2fgeIdbh8XaeIdwh80aeIdlh8Zina8NaAc8S2fgHIdwa80NaHIdza8XNaHIdaMg8Ua8UMMa80NaHIdla8ZNaHIdCa80NaHId3Mg8Ua8UMMa8ZNaHIdba8XNaHIdxa8ZNaHIdKMg8Ua8UMMa8XNaHId8KMMMh8UaqaAa8L2cltfheaHIdyhUaXhHa8LhOinaHIdbg8Wa8WaUNaecxfIdba80aecwfIdbNa8XaeIdbNa8ZaeclfIdbNMMMg8Wa8WM:tNa8UMh8UaHclfhHaeczfheaOcufgOmbka81a8U:lMh81aYaAcdtfydbgAaL9hmbkkaKa81a8Va81a8V9DgeEUdwaKaQaLaea8Kcb9hGgeEBdlaKaLaQaeEBdbahcefgha8M9hmbkascjdfcbcj;qbz:rjjjb8Aa9shea8MhHinascjdfaeydbcA4cF8FGgOcFAaOcFA6EcdtfgOaOydbcefBdbaecxfheaHcufgHmbkcbhecbhHinascjdfaefgOydbhAaOaHBdbaAaHfhHaeclfgecj;qb9hmbkcbhea9shHinascjdfaHydbcA4cF8FGgOcFAaOcFA6EcdtfgOaOydbgOcefBdba9oaOcdtfaeBdbaHcxfhHa8Maecefge9hmbkadak9RgOci9Uh9tdnalTmbcbheaDhHinaHaeBdbaHclfhHalaecefge9hmbkkcbh9ua9pcbalz:rjjjbh3aOcO9Uh9va9tce4h9wcbh8Acbh8Jdnina8Pa9oa8Jcdtfydbcx2fgEIdwg8Ua889Emea8Aa9t9pmeJFFuuh8Wdna9wa8M9pmba8Pa9oa9wcdtfydbcx2fIdwJbb;aZNh8Wkdna8Ua8W9ETmba8Ua869ETmba8Aa9v0mdkdna3aCaEydlghcdtg9xfydbgAfg9yRbba3aCaEydbg8Kcdtg9zfydbgefg9ARbbVmba5a8KfRbbh9Bdna9maecdtfgHclfydbgOaHydbgHSmbaOaH9RhQaaaAcx2fhKaaaecx2fhXa9qaHcitfhecbhHcehgdnindnaDaeydbcdtfydbgOaASmbaDaeclfydbcdtfydbgLaASmbaOaLSmbaaaLcx2fgLIdbaaaOcx2fgOIdbg8X:tg8UaXIdlaOIdlg80:tg8YNaXIdba8X:tgBaLIdla80:tg8WN:tg8Za8UaKIdla80:tg83NaKIdba8X:tgRa8WN:tg80Na8WaXIdwaOIdwgU:tg8VNa8YaLIdwaU:tg8XN:tg8Ya8WaKIdwaU:tg81Na83a8XN:tg8WNa8XaBNa8Va8UN:tgUa8XaRNa81a8UN:tg8UNMMa8Za8ZNa8Ya8YNaUaUNMMa80a80Na8Wa8WNa8Ua8UNMMN:rJbbj8:N9FmdkaecwfheaHcefgHaQ6hgaQaH9hmbkkagceGTmba9wcefh9wxekdndndndna9Bc9:fPdebdka8KheinaDaecdtgefahBdbaYaefydbgea8K9hmbxikkdna8Fa8Ea8Ea9zfydbahSEaYa9zfydbg8Kcdtfydbgecu9hmbaYa9xfydbhekaDa9zfahBdbaehhkaDa8KcdtfahBdbka9Ace86bba9yce86bbaEIdwg8Ua86a86a8U9DEh86a9ucefh9ucecda9BceSEa8Afh8Aka8Jcefg8Ja8M9hmbkka9uTmddnalTmbcbhLcbhXindnaDaXcdtgefydbgOaXSmbaCaOcdtfydbh8KdnaXaCaefydb9hghmbaya8Kc8S2fgeayaXc8S2fgHIdbaeIdbMUdbaeaHIdlaeIdlMUdlaeaHIdwaeIdwMUdwaeaHIdxaeIdxMUdxaeaHIdzaeIdzMUdzaeaHIdCaeIdCMUdCaeaHIdKaeIdKMUdKaeaHId3aeId3MUd3aeaHIdaaeIdaMUdaaeaHId8KaeId8KMUd8KaeaHIdyaeIdyMUdyaITmbaIa8KcltfgeaIaXcltfgHIdbaeIdbMUdbaeaHIdlaeIdlMUdlaeaHIdwaeIdwMUdwaeaHIdxaeIdxMUdxka8LTmba8NaOc8S2fgea8NaXc8S2ggfgHIdbaeIdbMUdbaeaHIdlaeIdlMUdlaeaHIdwaeIdwMUdwaeaHIdxaeIdxMUdxaeaHIdzaeIdzMUdzaeaHIdCaeIdCMUdCaeaHIdKaeIdKMUdKaeaHId3aeId3MUd3aeaHIdaaeIdaMUdaaeaHId8KaeId8KMUd8KaeaHIdyaeIdyMUdya9raO2hKaqhHa8LhAinaHaKfgeaHaLfgOIdbaeIdbMUdbaeclfgQaOclfIdbaQIdbMUdbaecwfgQaOcwfIdbaQIdbMUdbaecxfgeaOcxfIdbaeIdbMUdbaHczfhHaAcufgAmbkahmbJbbbbJbbjZayagfgeIdyg8U:va8UJbbbb9BEaeIdwaaa8Kcx2fgHIdwg8UNaeIdzaHIdbg8WNaeIdaMg8Xa8XMMa8UNaeIdlaHIdlg8XNaeIdCa8UNaeId3Mg8Ua8UMMa8XNaeIdba8WNaeIdxa8XNaeIdKMg8Ua8UMMa8WNaeId8KMMM:lNg8Ua87a87a8U9DEh87kaLa9rfhLaXcefgXal9hmbkcbhHa8EheindnaeydbgOcuSmbdnaHaDaOcdtgAfydbgO9hmbcuhOa8EaAfydbgAcuSmbaDaAcdtfydbhOkaeaOBdbkaeclfhealaHcefgH9hmbkcbhHa8FheindnaeydbgOcuSmbdnaHaDaOcdtgAfydbgO9hmbcuhOa8FaAfydbgAcuSmbaDaAcdtfydbhOkaeaOBdbkaeclfhealaHcefgH9hmbkka87a86a8LEh87cbhHabhecbhOindnaCaDaeydbcdtfydbgLcdtfydbgAaCaDaeclfydbcdtfydbgKcdtfydbgQSmbaAaCaDaecwfydbcdtfydbg8KcdtfydbgXSmbaQaXSmbabaHcdtfgAaLBdbaAcwfa8KBdbaAclfaKBdbaHcifhHkaecxfheaOcifgOad6mbkdndna9imbaHhdxekdnaHak0mbaHhdxekdna85a879FmbaHhdxekJFFuuh85cbhdabhecbhOindna9ka0aeydbgAcdtfydbcdtfIdbg8Ua879ETmbaeclf8Pdbh9CabadcdtfgQaABdbaQclfa9C83dba8Ua85a85a8U9EEh85adcifhdkaecxfheaOcifgOaH6mbkkadak0mbxdkkascNefabadalaCz:cjjjbkdndnadak0mbadhOxekdna9imbadhOxekdna85a889FmbadhOxekcehLina85Jbb;aZNg8Ua88a8Ua889DEh8XJbbbbh8Udna6Tmba9khea6hHinaeIdbg8Wa8Ua8Wa8X9FEa8Ua8Wa8U9EEh8UaeclfheaHcufgHmbkkJFFuuh85cbhOabhecbhHindna9ka0aeydbgAcdtfydbcdtfIdbg8Wa8X9ETmbaeclf8Pdbh9CabaOcdtfgQaABdbaQclfa9C83dba8Wa85a85a8W9EEh85aOcifhOkaecxfheaHcifgHad6mbkdnaLaOad9hVceGmbadhOxdka8Ua86a86a8U9DEh86aOak9nmecbhLaOhda85a889FmbkkdnamcjjjjdGTmba9pcbalz:rjjjbhLdnaOTmbabheaOhHinaLaeydbgAfa5aAfRbbcl9h86bbaeclfheaHcufgHmbkkascNefabaOalaCz:cjjjbalTmbcbhQasyd:yehgindnaLaQfRbbTmbdna5aQfRbbgecl0mbceaetcQGmekdnaCaQcdtgKfydbgeaQSmbaaaQcx2fgHaaaecx2fge8Pdb83dbaHcwfaecwfydbBdbxekayaQc8S2fgeIdyg8Ua8UJL:3;rUNg8UMh88aeIdwa8UMhRaeIdla8UMh8VaeIdba8UMhUaeIdaa8UaaaQcx2fg8KIdwg89N:th81aeId3a8Ua8KIdlg8:N:th85aeIdKa8KIdbgZa8UN:th8YJbbbbhcaeIdCJbbbbMh87aeIdzJbbbbMhBaeIdxJbbbbMh83dndna8LTmbaQhAinJbbbba88a8NaAc8S2fgHIdyg8U:va8UJbbbb9BEh8UaqaAa8L2cltfheaHIdaa88Na81Mh81aHId3a88Na85Mh85aHIdKa88Na8YMh8YaHIdCa88Na87Mh87aHIdza88NaBMhBaHIdxa88Na83Mh83aHIdwa88NaRMhRaHIdla88Na8VMh8VaHIdba88NaUMhUa8LhHina81aecxfIdbg8ZaecwfIdbg8WNa8UN:th81a85a8ZaeclfIdbg8XNa8UN:th85a87a8Wa8XNa8UN:th87aUaeIdbg80a80Na8UN:thUa8Ya8Za80Na8UN:th8YaBa8Wa80Na8UN:thBa83a8Xa80Na8UN:th83aRa8Wa8WNa8UN:thRa8Va8Xa8XNa8UN:th8VaeczfheaHcufgHmbkaYaAcdtfydbgAaQ9hmbkaITmbaIaQcltfgeIdxhTaeIdwh9caeIdlhJaeIdbh8UxekJbbbbhTJbbbbh9cJbbbbhJJbbbbh8UkaBaU:vg8Xa8YNa81:ta87aBa83aU:vg8WN:tg81a8Va83a8WN:tg8Z:vg80a8Wa8YNa85:tg8VN:th85a9ca8Ua8XN:taJa8Ua8WN:tg83a80N:tg87aRaBa8XN:ta81a80N:tgB:vgR:mh81a83a8Z:vg9c:mhJdnJbbbba8Ua8UaU:vg9eN:ta83a9cN:ta87aRN:tg83:la88J:983:g81Ng8U9ETmba81a85NaJa8VNa9ea8YNaT:tMMa83:vhckaU:la8U9ETmba8Z:la8U9ETmbaB:la8U9ETmba9e:macNa8X:ma81acNa85aB:vMg85Na8W:maJacNa80:ma85Na8Va8Z:vMMg87Na8Y:maU:vMMMh88a9maKfgeclfydbgHaeydbge9RhXagaecitfhKJbbbbh8UdnaHaeSghmbJbbbbh8UaKheaXhAinaaaeclfydbcx2fgHIdwa89:tg8Wa8WNaHIdbaZ:tg8Wa8WNaHIdla8::tg8Wa8WNMMg8Waaaeydbcx2fgHIdwa89:tg8Xa8XNaHIdbaZ:tg8Xa8XNaHIdla8::tg8Xa8XNMMg8Xa8Ua8Ua8X9DEg8Ua8Ua8W9DEh8UaecwfheaAcufgAmbkka85a89:tg8Wa8WNa88aZ:tg8Wa8WNa87a8::tg8Wa8WNMMa8U:rg8Ua8UN9EmbdnahmbcbhAcehhdninaaaKclfydbcx2fgeIdbaaaKydbcx2fgHIdbg8X:tg8Ua8:aHIdlg80:tg8YNaZa8X:tgBaeIdla80:tg8WN:tg8Za8Ua87a80:tg83Na88a8X:tgRa8WN:tg80Na8Wa89aHIdwgU:tg8VNa8YaeIdwaU:tg8XN:tg8Ya8Wa85aU:tg81Na83a8XN:tg8WNa8XaBNa8Va8UN:tgUa8XaRNa81a8UN:tg8UNMMa8Za8ZNa8Ya8YNaUaUNMMa80a80Na8Wa8WNa8Ua8UNMMN:rJbbj8:N9FmeaKcwfhKaAcefgAaX6hhaXaA9hmbkkahceGmeka8Ka85Udwa8Ka87Udla8Ka88UdbkaQcefgQal9hmbkdndna8LTmba8LclthYa8Lcdth8KcbhKa8ShXindnaLaKfRbbTmba5aKfRbbclSmbJbbbbJbbjZa8NaKc8S2fIdyg8U:va8UJbbbb9BEh8UaaaCaKcdtfydbcx2fhHaqheaXhAa8LhQinaAa8UaecwfIdbaHIdwNaeIdbaHIdbNaeclfIdbaHIdlNMMaecxfIdbMNUdbaeczfheaAclfhAaQcufgQmbkkaqaYfhqaXa8KfhXaKcefgKal9hmbkarcd4hXavcd4hYasId:qeh8UasId:meh8WasId1eh8XazTmea8Lcdth8KcbhKindnaLaKfRbbTmbaiazaKcdtfydbgCaY2cdtfgeaaaKcx2fgHIdba8RNa8XMUdbaeaHIdla8RNa8WMUdlaeaHIdwa8RNa8UMUdwaoaCaX2cdtfhQashea8ShHa8LhCinaQaeydbcdtgAfaHIdbawaAfIdb:vUdbaeclfheaHclfhHaCcufgCmbkka8Sa8Kfh8SaKcefgKal9hmbxikkavcd4hCasId:qeh8UasId:meh8WasId1eh8XdnazTmbazheindna9pRbbTmbaiaeydbaC2cdtfgHaaIdba8RNa8XMUdbaHaaclfIdba8RNa8WMUdlaHaacwfIdba8RNa8UMUdwka9pcefh9paeclfheaacxfhaalcufglmbxikkaCcdtheindna9pRbbTmbaiaaIdba8RNa8XMUdbaiclfaaclfIdba8RNa8WMUdbaicwfaacwfIdba8RNa8UMUdbka9pcefh9paacxfhaaiaefhialcufglmbxdkka8Lcdth8KcbhKindnaLaKfRbbTmbaiaKaY2cdtfgeaaaKcx2fgHIdba8RNa8XMUdbaeaHIdla8RNa8WMUdlaeaHIdwa8RNa8UMUdwaoaKaX2cdtfhQashea8ShHa8LhCinaQaeydbcdtgAfaHIdbawaAfIdb:vUdbaeclfheaHclfhHaCcufgCmbkka8Sa8Kfh8SaKcefgKal9hmbkkdnamcjjjjlGTmbazmbaOTmbcbhLabheina5aeydbgAfRbbc3thKaecwfgXydbhHdndna8EaAcdtg8KfydbaeclfgYydbgCSmbcbhQa8FaCcdtfydbaA9hmekcjjjj94hQkaeaKaQVaAVBdba5aCfRbbc3thKdndna8EaCcdtfydbaHSmbcbhQa8FaHcdtfydbaC9hmekcjjjj94hQkaYaKaQVaCVBdba5aHfRbbc3thQdndna8EaHcdtfydbaASmbcbhCa8Fa8KfydbaH9hmekcjjjj94hCkaXaQaCVaHVBdbaecxfheaLcifgLaO6mbkkdnazTmbaOTmbaOheinabazabydbcdtfydbBdbabclfhbaecufgembkkdnaPTmbaPana86:rNUdbkasyd;8egecdtasc:Ceffc98fhHdninaeTmeaHydbcbyd:m:jjjbH:bjjjbbaHc98fhHaecufhexbkkascj;sbf8KjjjjbaOk;Yieouabydlhvabydbclfcbaicdtz:rjjjbhoadci9UhrdnadTmbdnalTmbaehwadhDinaoalawydbcdtfydbcdtfgqaqydbcefBdbawclfhwaDcufgDmbxdkkaehwadhDinaoawydbcdtfgqaqydbcefBdbawclfhwaDcufgDmbkkdnaiTmbcbhDaohwinawydbhqawaDBdbawclfhwaqaDfhDaicufgimbkkdnadci6mbinaecwfydbhwaeclfydbhDaeydbhidnalTmbalawcdtfydbhwalaDcdtfydbhDalaicdtfydbhikavaoaicdtfgqydbcitfaDBdbavaqydbcitfawBdlaqaqydbcefBdbavaoaDcdtfgqydbcitfawBdbavaqydbcitfaiBdlaqaqydbcefBdbavaoawcdtfgwydbcitfaiBdbavawydbcitfaDBdlawawydbcefBdbaecxfhearcufgrmbkkabydbcbBdbk:todDue99aicd4aifhrcehwinawgDcethwaDar6mbkcuaDcdtgraDcFFFFi0Ecbyd1:jjjbHjjjjbbhwaoaoyd9GgqcefBd9GaoaqcdtfawBdbawcFearz:rjjjbhkdnaiTmbalcd4hlaDcufhxcbhminamhDdnavTmbavamcdtfydbhDkcbadaDal2cdtfgDydlgwawcjjjj94SEgwcH4aw7c:F:b:DD2cbaDydbgwawcjjjj94SEgwcH4aw7c;D;O:B8J27cbaDydwgDaDcjjjj94SEgDcH4aD7c:3F;N8N27axGhwamcdthPdndndnavTmbakawcdtfgrydbgDcuSmeadavaPfydbal2cdtfgsIdbhzcehqinaqhrdnadavaDcdtfydbal2cdtfgqIdbaz9CmbaqIdlasIdl9CmbaqIdwasIdw9BmlkarcefhqakawarfaxGgwcdtfgrydbgDcu9hmbxdkkakawcdtfgrydbgDcuSmbadamal2cdtfgsIdbhzcehqinaqhrdnadaDal2cdtfgqIdbaz9CmbaqIdlasIdl9CmbaqIdwasIdw9BmikarcefhqakawarfaxGgwcdtfgrydbgDcu9hmbkkaramBdbamhDkabaPfaDBdbamcefgmai9hmbkkakcbyd:m:jjjbH:bjjjbbaoaoyd9GcufBd9GdnaeTmbaiTmbcbhDaehwinawaDBdbawclfhwaiaDcefgD9hmbkcbhDaehwindnaDabydbgrSmbawaearcdtfgrydbBdbaraDBdbkawclfhwabclfhbaiaDcefgD9hmbkkk:hrdvuv998Jjjjjbca9Rgoczfcwfcbyd11jjbBdbaocb8Pdj1jjb83izaocwfcbydN1jjbBdbaocb8Pd:m1jjb83ibdnadTmbaicd4hrdnabmbdnalTmbcbhwinaealawcdtfydbar2cdtfhDcbhiinaoczfaifgqaDaifIdbgkaqIdbgxaxak9EEUdbaoaifgqakaqIdbgxaxak9DEUdbaiclfgicx9hmbkawcefgwad9hmbxikkarcdthwcbhDincbhiinaoczfaifgqaeaifIdbgkaqIdbgxaxak9EEUdbaoaifgqakaqIdbgxaxak9DEUdbaiclfgicx9hmbkaeawfheaDcefgDad9hmbxdkkdnalTmbcbhwinabawcx2fgiaealawcdtfydbar2cdtfgDIdbUdbaiaDIdlUdlaiaDIdwUdwcbhiinaoczfaifgqaDaifIdbgkaqIdbgxaxak9EEUdbaoaifgqakaqIdbgxaxak9DEUdbaiclfgicx9hmbkawcefgwad9hmbxdkkarcdthlcbhwaehDinabawcx2fgiaeawar2cdtfgqIdbUdbaiaqIdlUdlaiaqIdwUdwcbhiinaoczfaifgqaDaifIdbgkaqIdbgxaxak9EEUdbaoaifgqakaqIdbgxaxak9DEUdbaiclfgicx9hmbkaDalfhDawcefgwad9hmbkkJbbbbaoIdbaoIdzgx:tgkakJbbbb9DEgkaoIdlaoIdCgm:tgPaPak9DEgkaoIdwaoIdKgP:tgsasak9DEhsdnabTmbadTmbJbbbbJbbjZas:vasJbbbb9BEhkinabakabIdbax:tNUdbabclfgoakaoIdbam:tNUdbabcwfgoakaoIdbaP:tNUdbabcxfhbadcufgdmbkkdnavTmbavaPUdwavamUdlavaxUdbkask:ZlewudnaeTmbcbhvabhoinaoavBdbaoclfhoaeavcefgv9hmbkkdnaiTmbcbhrinadarcdtfhwcbhDinalawaDcdtgvc:G1jjbfydbcdtfydbcdtfydbhodnabalawavfydbcdtfydbgqcdtfgkydbgvaqSmbinakabavgqcdtfgxydbgvBdbaxhkaqav9hmbkkdnabaocdtfgkydbgvaoSmbinakabavgocdtfgxydbgvBdbaxhkaoav9hmbkkdnaqaoSmbabaqaoaqao0Ecdtfaqaoaqao6EBdbkaDcefgDci9hmbkarcifgrai6mbkkdnaembcbskcbhxindnalaxcdtgvfydbax9hmbaxhodnabavfgDydbgvaxSmbaDhqinaqabavgocdtfgkydbgvBdbakhqaoav9hmbkkaDaoBdbkaxcefgxae9hmbkcbhvabhocbhkindndnavalydbgq9hmbdnavaoydbgq9hmbaoakBdbakcefhkxdkaoabaqcdtfydbBdbxekaoabaqcdtfydbBdbkaoclfhoalclfhlaeavcefgv9hmbkakk;Jiilud99duabcbaecltz:rjjjbhvdnalTmbadhoaihralhwinarcwfIdbhDarclfIdbhqavaoydbcltfgkarIdbakIdbMUdbakclfgxaqaxIdbMUdbakcwfgxaDaxIdbMUdbakcxfgkakIdbJbbjZMUdbaoclfhoarcxfhrawcufgwmbkkdnaeTmbavhraehkinarcxfgoIdbhDaocbBdbararIdbJbbbbJbbjZaD:vaDJbbbb9BEgDNUdbarclfgoaDaoIdbNUdbarcwfgoaDaoIdbNUdbarczfhrakcufgkmbkkdnalTmbinavadydbcltfgrcxfgkaicwfIdbarcwfIdb:tgDaDNaiIdbarIdb:tgDaDNaiclfIdbarclfIdb:tgDaDNMMgDakIdbgqaqaD9DEUdbadclfhdaicxfhialcufglmbkkdnaeTmbavcxfhrinabarIdbUdbarczfhrabclfhbaecufgembkkk8MbabaeadaialavcbcbcbcbcbaoarawaDz:bjjjbk8MbabaeadaialavaoarawaDaqakaxamaPz:bjjjbkRbababaeadaialavaoarawaDaqakaxcjjjjdVamz:bjjjbk:p8Koque99due99iuq998Jjjjjbc;Wb9Rgq8Kjjjjbcbhkaqcxfcbc;Kbz:rjjjb8Aaqcualcx2alc;v:Q;v:Qe0Ecbyd1:jjjbHjjjjbbgxBdxaqceBd2axaialavcbcbz:ejjjb8AaqcualcdtalcFFFFi0Egmcbyd1:jjjbHjjjjbbgiBdzaqcdBd2dndnJFF959eJbbjZawJbbjZawJbbjZ9DE:vawJ9VO:d869DEgw:lJbbb9p9DTmbaw:OhPxekcjjjj94hPkadci9Uhsarco9UhzdndnaombaPcd9imekdnalTmbaPcuf:YhwdnaoTmbcbhvaihHaxhOindndnaoavfRbbceGTmbavcjjjjlVhAxekdndnaOclfIdbawNJbbbZMgC:lJbbb9p9DTmbaC:OhAxekcjjjj94hAkaAcqthAdndnaOcwfIdbawNJbbbZMgC:lJbbb9p9DTmbaC:OhXxekcjjjj94hXkaAaXVhAdndnaOIdbawNJbbbZMgC:lJbbb9p9DTmbaC:OhXxekcjjjj94hXkaAaXcCtVhAkaHaABdbaHclfhHaOcxfhOalavcefgv9hmbxdkkaxhvaihOalhHindndnavIdbawNJbbbZMgC:lJbbb9p9DTmbaC:OhAxekcjjjj94hAkaAcCthAdndnavclfIdbawNJbbbZMgC:lJbbb9p9DTmbaC:OhXxekcjjjj94hXkaXcqtaAVhAdndnavcwfIdbawNJbbbZMgC:lJbbb9p9DTmbaC:OhXxekcjjjj94hXkaOaAaXVBdbavcxfhvaOclfhOaHcufgHmbkkadTmbcbhkaehvcbhOinakaiavclfydbcdtfydbgHaiavcwfydbcdtfydbgA9haiavydbcdtfydbgXaH9haXaA9hGGfhkavcxfhvaOcifgOad6mbkkarci9UhQdndnaz:Z:rJbbbZMgw:lJbbb9p9DTmbaw:Ohvxekcjjjj94hvkaQ:ZhLcbhKc:bwhHdndninashYaHhXaPhrakg8AaQ9pmeaXar9Rcd9imeavaXcufavaX9iEarcefavar9kEhzdnalTmbazcuf:YhwdnaoTmbcbhOaihPaxhvindndnaoaOfRbbceGTmbaOcjjjjlVhHxekdndnavclfIdbawNJbbbZMgC:lJbbb9p9DTmbaC:OhHxekcjjjj94hHkaHcqthHdndnavcwfIdbawNJbbbZMgC:lJbbb9p9DTmbaC:Ohsxekcjjjj94hskaHasVhHdndnavIdbawNJbbbZMgC:lJbbb9p9DTmbaC:Ohsxekcjjjj94hskaHascCtVhHkaPaHBdbaPclfhPavcxfhvalaOcefgO9hmbxdkkaxhvaihOalhPindndnavIdbawNJbbbZMgC:lJbbb9p9DTmbaC:OhHxekcjjjj94hHkaHcCthHdndnavclfIdbawNJbbbZMgC:lJbbb9p9DTmbaC:Ohsxekcjjjj94hskascqtaHVhHdndnavcwfIdbawNJbbbZMgC:lJbbb9p9DTmbaC:Ohsxekcjjjj94hskaOaHasVBdbavcxfhvaOclfhOaPcufgPmbkkcbhOdnadTmbaehvcbhPinaOaiavclfydbcdtfydbgHaiavcwfydbcdtfydbgs9haiavydbcdtfydbgAaH9haAas9hGGfhOavcxfhvaPcifgPad6mbkkaYhsaOhkaXhHazhPdnaOaQ9nmbaOhsa8AhkazhHarhPkdndnaKcl0mbdnaY:Zgwa8A:ZgC:taz:YgEar:Y:tg3aEaX:Y:tg5aO:Zg8EaL:tNNNawaL:ta5NaCa8E:tNaCaL:ta3Na8Eaw:tNM:vaEMJbbbZMgw:lJbbb9p9DTmbaw:Ohvxdkcjjjj94hvxekaPaHfcd9ThvkaKcefgKcs9hmbxdkka8AhkarhPkdndndnakmbJbbjZhwcbhicdhvaDmexdkalcd4alfhHcehOinaOgvcethOavaH6mbkcbhOaqcuavcdtgravcFFFFi0Ecbyd1:jjjbHjjjjbbgzBdCaqciBd2aqamcbyd1:jjjbHjjjjbbgXBdKaqclBd2dndndndnalTmbaPcuf:YhwaoTmecbhOaihHaxhPindndnaoaOfRbbceGTmbaOcjjjjlVhsxekdndnaPclfIdbawNJbbbZMgC:lJbbb9p9DTmbaC:Ohsxekcjjjj94hskascqthsdndnaPcwfIdbawNJbbbZMgC:lJbbb9p9DTmbaC:OhAxekcjjjj94hAkasaAVhsdndnaPIdbawNJbbbZMgC:lJbbb9p9DTmbaC:OhAxekcjjjj94hAkasaAcCtVhskaHasBdbaHclfhHaPcxfhPalaOcefgO9hmbxikkazcFearz:rjjjb8AcbhrcbhvxdkaxhOaihPalhHindndnaOIdbawNJbbbZMgC:lJbbb9p9DTmbaC:Ohsxekcjjjj94hskascCthsdndnaOclfIdbawNJbbbZMgC:lJbbb9p9DTmbaC:OhAxekcjjjj94hAkaAcqtasVhsdndnaOcwfIdbawNJbbbZMgC:lJbbb9p9DTmbaC:OhAxekcjjjj94hAkaPasaAVBdbaOcxfhOaPclfhPaHcufgHmbkkazcFearz:rjjjbhAavcufhocbhrcbhzindndndnaAaiazcdtgKfydbgHcm4aH7c:v;t;h;Ev2gvcs4av7aoGgPcdtfgsydbgOcuSmbcehvinaiaOcdtgOfydbaHSmdaPavfhOavcefhvaAaOaoGgPcdtfgsydbgOcu9hmbkkasazBdbarhvarcefhrxekaXaOfydbhvkaXaKfavBdbazcefgzal9hmbkcuarc8S2gOarc;D;O;f8U0EhvkcbhAaqavcbyd1:jjjbHjjjjbbgvBd3aqcvBd2avcbaOz:rjjjbhOdnadTmbaehiinJbbnnJbbjZaXaiydbgHcdtfydbgvaXaiclfydbgPcdtfydbgzSavaXaicwfydbgscdtfydbgKSGgoEh8FdnaxaPcx2fgPIdbaxaHcx2fgHIdbg8E:tgCaxascx2fgsIdlaHIdlg3:tgwNasIdba8E:tgEaPIdla3:tgaN:tgLaLNaaasIdwaHIdwg5:tghNawaPIdwa5:tgaN:tgwawNaaaENahaCN:tgCaCNMM:rgEJbbbb9ETmbaLaE:vhLaCaE:vhCawaE:vhwkaOavc8S2fgvavIdbawa8FaE:rNgEawNNgaMUdbavaCaEaCNghNggavIdlMUdlavaLaEaLNg8FNg8JavIdwMUdwavahawNghavIdxMUdxava8FawNg8KavIdzMUdzava8FaCNg8FavIdCMUdCavawaEaLa5Nawa8ENa3aCNMM:mg3Ng8ENgwavIdKMUdKavaCa8ENgCavId3MUd3avaLa8ENgLavIdaMUdaava8Ea3Ng8EavId8KMUd8KavaEavIdyMUdydnaombaOazc8S2fgvaaavIdbMUdbavagavIdlMUdlava8JavIdwMUdwavahavIdxMUdxava8KavIdzMUdzava8FavIdCMUdCavawavIdKMUdKavaCavId3MUd3avaLavIdaMUdaava8EavId8KMUd8KavaEavIdyMUdyaOaKc8S2fgvaaavIdbMUdbavagavIdlMUdlava8JavIdwMUdwavahavIdxMUdxava8KavIdzMUdzava8FavIdCMUdCavawavIdKMUdKavaCavId3MUd3avaLavIdaMUdaava8EavId8KMUd8KavaEavIdyMUdykaicxfhiaAcifgAad6mbkkcbhHaqcuarcdtgvarcFFFFi0Egicbyd1:jjjbHjjjjbbgPBdaaqcoBd2aqaicbyd1:jjjbHjjjjbbgiBd8KaqcrBd2aPcFeavz:rjjjbhzdnalTmbaXhPinJbbbbJbbjZaOaPydbgsc8S2fgvIdygw:vawJbbbb9BEavIdwaxcwfIdbgwNavIdzaxIdbgCNavIdaMgLaLMMawNavIdlaxclfIdbgLNavIdCawNavId3MgwawMMaLNavIdbaCNavIdxaLNavIdKMgwawMMaCNavId8KMMM:lNhwdndnazascdtgvfgsydbcuSmbaiavfIdbaw9ETmekasaHBdbaiavfawUdbkaPclfhPaxcxfhxalaHcefgH9hmbkkJbbbbhwdnarTmbinaiIdbgCawawaC9DEhwaiclfhiarcufgrmbkkakcd4akfhOcehiinaigvcethiavaO6mbkcbhiaqcuavcdtgOavcFFFFi0Ecbyd1:jjjbHjjjjbbgPBdyaPcFeaOz:rjjjbhsdnadTmbavcufhAcbhrcbhxindnaXaeaxcdtfgvydbcdtfydbgiaXavclfydbcdtfydbgOSmbaiaXavcwfydbcdtfydbgvSmbaOavSmbazavcdtfydbhHdndnazaOcdtfydbgvazaicdtfydbgi9pmbavaH9pmbaHhlaihoavhHxekdnaHai9pmbaHav9pmbaihlavhoxekavhlaHhoaihHkabarcx2fgvaHBdbavcwfaoBdbavclfalBdbdnasaoc:3F;N8N2alc:F:b:DD27aHc;D;O:B8J27aAGgOcdtfgvydbgicuSmbcehPinaPhvdnabaicx2fgiydbaH9hmbaiydlal9hmbaiydwaoSmikavcefhPasaOavfaAGgOcdtfgvydbgicu9hmbkkavarBdbarcefhrkaxcifgxad6mbkarci2hikdnaDmbcwhvxdkaw:rhwcwhvkaDawUdbkavcdthvdninavTmeavc98fgvaqcxffydbcbyd:m:jjjbH:bjjjbbxbkkaqc;Wbf8Kjjjjbaik:2ldwue9:8Jjjjjbc;Wb9Rgr8Kjjjjbcbhwarcxfcbc;Kbz:rjjjb8AdnabaeSmbabaeadcdtz:qjjjb8AkarcualcdtalcFFFFi0EgDcbyd1:jjjbHjjjjbbgqBdxarceBd2aqcbaialavcbarcxfz:djjjbcualcx2alc;v:Q;v:Qe0Ecbyd1:jjjbHjjjjbbhkarcxfaryd2gxcdtgmfakBdbaraxcefgPBd2akaialavcbcbz:ejjjb8AarcxfaPcdtfaDcbyd1:jjjbHjjjjbbgvBdbaraxcdfgiBd2arcxfaicdtfcuavalaeadaqz:fjjjbgecltaecjjjjiGEcbyd1:jjjbHjjjjbbgiBdbaiaeavakalz:gjjjbdnadTmbaoaoNhocbhwabhlcbhkindnaiavalydbgecdtfydbcdtfIdbao9ETmbalclf8PdbhsabawcdtfgqaeBdbaqclfas83dbawcifhwkalcxfhlakcifgkad6mbkkaxcifhlamarcxffcwfhkdninalTmeakydbcbyd:m:jjjbH:bjjjbbakc98fhkalcufhlxbkkarc;Wbf8Kjjjjbawk:FCoDud99rue99iul998Jjjjjbc;Wb9Rgw8KjjjjbdndnarmbcbhDxekawcxfcbc;Kbz:rjjjb8Aawcuadcx2adc;v:Q;v:Qe0Ecbyd1:jjjbHjjjjbbgqBdxawceBd2aqaeadaicbcbz:ejjjb8AawcuadcdtadcFFFFi0Egkcbyd1:jjjbHjjjjbbgxBdzawcdBd2adcd4adfhmceheinaegicetheaiam6mbkcbhPawcuaicdtgsaicFFFFi0Ecbyd1:jjjbHjjjjbbgzBdCawciBd2dndnar:ZgH:rJbbbZMgO:lJbbb9p9DTmbaO:Ohexekcjjjj94hekaicufhAc:bwhmcbhCadhXcbhQinaChLaeamgKcufaeaK9iEaPgDcefaeaD9kEhYdndnadTmbaYcuf:YhOaqhiaxheadhmindndnaiIdbaONJbbbZMg8A:lJbbb9p9DTmba8A:OhCxekcjjjj94hCkaCcCthCdndnaiclfIdbaONJbbbZMg8A:lJbbb9p9DTmba8A:OhExekcjjjj94hEkaEcqtaCVhCdndnaicwfIdbaONJbbbZMg8A:lJbbb9p9DTmba8A:OhExekcjjjj94hEkaeaCaEVBdbaicxfhiaeclfheamcufgmmbkazcFeasz:rjjjbh3cbh5cbhPindna3axaPcdtfydbgCcm4aC7c:v;t;h;Ev2gics4ai7aAGgmcdtfgEydbgecuSmbaeaCSmbcehiina3amaifaAGgmcdtfgEydbgecuSmeaicefhiaeaC9hmbkkaEaCBdba5aecuSfh5aPcefgPad9hmbxdkkazcFeasz:rjjjb8Acbh5kaDaYa5ar0giEhPaLa5aiEhCdna5arSmbaYaKaiEgmaP9Rcd9imbdndnaQcl0mbdnaX:ZgOaL:Zg8A:taY:Yg8EaD:Y:tg8Fa8EaK:Y:tgaa5:ZghaH:tNNNaOaH:taaNa8Aah:tNa8AaH:ta8FNahaO:tNM:va8EMJbbbZMgO:lJbbb9p9DTmbaO:Ohexdkcjjjj94hexekaPamfcd9Theka5aXaiEhXaQcefgQcs9hmekkdndnaCmbcihicbhDxekcbhiawakcbyd1:jjjbHjjjjbbg5BdKawclBd2aPcuf:Yh8AdndnadTmbaqhiaxheadhmindndnaiIdba8ANJbbbZMgO:lJbbb9p9DTmbaO:OhCxekcjjjj94hCkaCcCthCdndnaiclfIdba8ANJbbbZMgO:lJbbb9p9DTmbaO:OhExekcjjjj94hEkaEcqtaCVhCdndnaicwfIdba8ANJbbbZMgO:lJbbb9p9DTmbaO:OhExekcjjjj94hEkaeaCaEVBdbaicxfhiaeclfheamcufgmmbkazcFeasz:rjjjbh3cbhDcbhYindndndna3axaYcdtgKfydbgCcm4aC7c:v;t;h;Ev2gics4ai7aAGgmcdtfgEydbgecuSmbcehiinaxaecdtgefydbaCSmdamaifheaicefhia3aeaAGgmcdtfgEydbgecu9hmbkkaEaYBdbaDhiaDcefhDxeka5aefydbhika5aKfaiBdbaYcefgYad9hmbkcuaDc32giaDc;j:KM;jb0EhexekazcFeasz:rjjjb8AcbhDcbhekawaecbyd1:jjjbHjjjjbbgeBd3awcvBd2aecbaiz:rjjjbhEavcd4hKdnadTmbdnalTmbaKcdth3a5hCaqhealhmadhAinaEaCydbc32fgiaeIdbaiIdbMUdbaiaeclfIdbaiIdlMUdlaiaecwfIdbaiIdwMUdwaiamIdbaiIdxMUdxaiamclfIdbaiIdzMUdzaiamcwfIdbaiIdCMUdCaiaiIdKJbbjZMUdKaCclfhCaecxfheama3fhmaAcufgAmbxdkka5hmaqheadhCinaEamydbc32fgiaeIdbaiIdbMUdbaiaeclfIdbaiIdlMUdlaiaecwfIdbaiIdwMUdwaiaiIdxJbbbbMUdxaiaiIdzJbbbbMUdzaiaiIdCJbbbbMUdCaiaiIdKJbbjZMUdKamclfhmaecxfheaCcufgCmbkkdnaDTmbaEhiaDheinaiaiIdbJbbbbJbbjZaicKfIdbgO:vaOJbbbb9BEgONUdbaiclfgmaOamIdbNUdbaicwfgmaOamIdbNUdbaicxfgmaOamIdbNUdbaiczfgmaOamIdbNUdbaicCfgmaOamIdbNUdbaic3fhiaecufgembkkcbhCawcuaDcdtgYaDcFFFFi0Egicbyd1:jjjbHjjjjbbgeBdaawcoBd2awaicbyd1:jjjbHjjjjbbg3Bd8KaecFeaYz:rjjjbhxdnadTmbJbbjZJbbjZa8A:vaPceSEaoNgOaONh8AaKcdthPalheina8Aaec;81jjbalEgmIdwaEa5ydbgAc32fgiIdC:tgOaONamIdbaiIdx:tgOaONamIdlaiIdz:tgOaONMMNaqcwfIdbaiIdw:tgOaONaqIdbaiIdb:tgOaONaqclfIdbaiIdl:tgOaONMMMhOdndnaxaAcdtgifgmydbcuSmba3aifIdbaO9ETmekamaCBdba3aifaOUdbka5clfh5aqcxfhqaeaPfheadaCcefgC9hmbkkabaxaYz:qjjjb8AcrhikaicdthiinaiTmeaic98fgiawcxffydbcbyd:m:jjjbH:bjjjbbxbkkawc;Wbf8KjjjjbaDk:Ydidui99ducbhi8Jjjjjbca9Rglczfcwfcbyd11jjbBdbalcb8Pdj1jjb83izalcwfcbydN1jjbBdbalcb8Pd:m1jjb83ibdndnaembJbbjFhvJbbjFhoJbbjFhrxekadcd4cdthwincbhdinalczfadfgDabadfIdbgvaDIdbgoaoav9EEUdbaladfgDavaDIdbgoaoav9DEUdbadclfgdcx9hmbkabawfhbaicefgiae9hmbkalIdwalIdK:thralIdlalIdC:thoalIdbalIdz:thvkJbbbbavavJbbbb9DEgvaoaoav9DEgvararav9DEk9DeeuabcFeaicdtz:rjjjbhlcbhbdnadTmbindnalaeydbcdtfgiydbcu9hmbaiabBdbabcefhbkaeclfheadcufgdmbkkabk9teiucbcbyd:q:jjjbgeabcifc98GfgbBd:q:jjjbdndnabZbcztgd9nmbcuhiabad9RcFFifcz4nbcuSmekaehikaik;teeeudndnaeabVciGTmbabhixekdndnadcz9pmbabhixekabhiinaiaeydbBdbaiaeydlBdlaiaeydwBdwaiaeydxBdxaeczfheaiczfhiadc9Wfgdcs0mbkkadcl6mbinaiaeydbBdbaeclfheaiclfhiadc98fgdci0mbkkdnadTmbinaiaeRbb86bbaicefhiaecefheadcufgdmbkkabk:3eedudndnabciGTmbabhixekaecFeGc:b:c:ew2hldndnadcz9pmbabhixekabhiinaialBdxaialBdwaialBdlaialBdbaiczfhiadc9Wfgdcs0mbkkadcl6mbinaialBdbaiclfhiadc98fgdci0mbkkdnadTmbinaiae86bbaicefhiadcufgdmbkkabk9teiucbcbyd:q:jjjbgeabcrfc94GfgbBd:q:jjjbdndnabZbcztgd9nmbcuhiabad9RcFFifcz4nbcuSmekaehikaik9:eiuZbhedndncbyd:q:jjjbgdaecztgi9nmbcuheadai9RcFFifcz4nbcuSmekadhekcbabae9Rcifc98Gcbyd:q:jjjbfgdBd:q:jjjbdnadZbcztge9nmbadae9RcFFifcz4nb8Akkk:Iedbcjwk1eFFuuFFuuFFuuFFuFFFuFFFuFbbbbbbbbebbbdbbbbbbbebbbebbbdbbbbbbbbbbbeeeeebebbebbebebbbeebbbbbbbbbbbbeeeeeebebbeeebeebbbbebebbbbbbbbbbbbbbbbbbc1Dkxebbbdbbb:GNbb",t=new Uint8Array([32,0,65,2,1,106,34,33,3,128,11,4,13,64,6,253,10,7,15,116,127,5,8,12,40,16,19,54,20,9,27,255,113,17,42,67,24,23,146,148,18,14,22,45,70,69,56,114,101,21,25,63,75,136,108,28,118,29,73,115]);if(typeof WebAssembly!="object")return{supported:!1};var n,i=WebAssembly.instantiate(o(e),{}).then(function(E){n=E.instance,n.exports.__wasm_call_ctors()});function o(E){for(var I=new Uint8Array(E.length),y=0;y<E.length;++y){var b=E.charCodeAt(y);I[y]=b>96?b-97:b>64?b-39:b+4}for(var x=0,y=0;y<E.length;++y)I[x++]=I[y]<60?t[I[y]]:(I[y]-60)*64+I[++y];return I.buffer.slice(0,x)}function r(E){if(!E)throw new Error("Assertion failed")}function a(E){return new Uint8Array(E.buffer,E.byteOffset,E.byteLength)}function s(E,I,y){var b=n.exports.sbrk,x=b(I.length*4),S=b(y*4),P=new Uint8Array(n.exports.memory.buffer),D=a(I);P.set(D,x);var Q=E(S,x,I.length,y);P=new Uint8Array(n.exports.memory.buffer);var v=new Uint32Array(y);new Uint8Array(v.buffer).set(P.subarray(S,S+y*4)),D.set(P.subarray(x,x+I.length*4)),b(x-b(0));for(var d=0;d<I.length;++d)I[d]=v[I[d]];return[v,Q]}function A(E){for(var I=0,y=0;y<E.length;++y){var b=E[y];I=I<b?b:I}return I}function l(E,I,y,b,x,S,P,D,Q){var v=n.exports.sbrk,d=v(4),B=v(y*4),T=v(x*S),R=v(y*4),L=new Uint8Array(n.exports.memory.buffer);L.set(a(b),T),L.set(a(I),R);var G=E(B,R,y,T,x,S,P,D,Q,d);L=new Uint8Array(n.exports.memory.buffer);var q=new Uint32Array(G);a(q).set(L.subarray(B,B+G*4));var z=new Float32Array(1);return a(z).set(L.subarray(d,d+4)),v(d-v(0)),[q,z[0]]}function f(E,I,y,b,x,S,P,D,Q,v,d,B,T){var R=n.exports.sbrk,L=R(4),G=R(y*4),q=R(x*S),z=R(x*D),K=R(Q.length*4),ie=R(y*4),le=v?R(x):0,de=new Uint8Array(n.exports.memory.buffer);de.set(a(b),q),de.set(a(P),z),de.set(a(Q),K),de.set(a(I),ie),v&&de.set(a(v),le);var he=E(G,ie,y,q,x,S,z,D,K,Q.length,le,d,B,T,L);de=new Uint8Array(n.exports.memory.buffer);var Se=new Uint32Array(he);a(Se).set(de.subarray(G,G+he*4));var be=new Float32Array(1);return a(be).set(de.subarray(L,L+4)),R(L-R(0)),[Se,be[0]]}function h(E,I,y,b,x,S,P,D,Q,v,d,B,T){var R=n.exports.sbrk,L=R(4),G=R(x*S),q=R(x*D),z=R(Q.length*4),K=R(y*4),ie=v?R(x):0,le=new Uint8Array(n.exports.memory.buffer);le.set(a(b),G),le.set(a(P),q),le.set(a(Q),z),le.set(a(I),K),v&&le.set(a(v),ie);var de=E(K,y,G,x,S,q,D,z,Q.length,ie,d,B,T,L);le=new Uint8Array(n.exports.memory.buffer),a(I).set(le.subarray(K,K+de*4)),a(b).set(le.subarray(G,G+x*S)),a(P).set(le.subarray(q,q+x*D));var he=new Float32Array(1);return a(he).set(le.subarray(L,L+4)),R(L-R(0)),[de,he[0]]}function m(E,I,y,b){var x=n.exports.sbrk,S=x(y*b),P=new Uint8Array(n.exports.memory.buffer);P.set(a(I),S);var D=E(S,y,b);return x(S-x(0)),D}function p(E,I,y,b,x,S,P,D){var Q=n.exports.sbrk,v=Q(D*4),d=Q(y*b),B=Q(y*S),T=new Uint8Array(n.exports.memory.buffer);T.set(a(I),d),x&&T.set(a(x),B);var R=E(v,d,y,b,B,S,P,D);T=new Uint8Array(n.exports.memory.buffer);var L=new Uint32Array(R);return a(L).set(T.subarray(v,v+R*4)),Q(v-Q(0)),L}function g(E,I,y,b,x,S,P,D,Q){var v=n.exports.sbrk,d=v(4),B=v(y*4),T=v(x*S),R=v(y*4),L=P?v(x):0,G=new Uint8Array(n.exports.memory.buffer);G.set(a(b),T),G.set(a(I),R),P&&G.set(a(P),L);var q=E(B,R,y,T,x,S,L,D,Q,d);G=new Uint8Array(n.exports.memory.buffer);var z=new Uint32Array(q);a(z).set(G.subarray(B,B+q*4));var K=new Float32Array(1);return a(K).set(G.subarray(d,d+4)),v(d-v(0)),[z,K[0]]}function C(E,I,y,b,x,S,P){var D=n.exports.sbrk,Q=D(y*4),v=D(x*S),d=D(y*4),B=new Uint8Array(n.exports.memory.buffer);B.set(a(b),v),B.set(a(I),d);var T=E(Q,d,y,v,x,S,P);B=new Uint8Array(n.exports.memory.buffer);var R=new Uint32Array(T);return a(R).set(B.subarray(Q,Q+T*4)),D(Q-D(0)),R}var _={LockBorder:1,Sparse:2,ErrorAbsolute:4,Prune:8,Regularize:16,Permissive:32,_InternalDebug:1<<30};return{ready:i,supported:!0,compactMesh:function(E){r(E instanceof Uint32Array||E instanceof Int32Array||E instanceof Uint16Array||E instanceof Int16Array),r(E.length%3==0);var I=E.BYTES_PER_ELEMENT==4?E:new Uint32Array(E);return s(n.exports.meshopt_optimizeVertexFetchRemap,I,A(E)+1)},simplify:function(E,I,y,b,x,S){r(E instanceof Uint32Array||E instanceof Int32Array||E instanceof Uint16Array||E instanceof Int16Array),r(E.length%3==0),r(I instanceof Float32Array),r(I.length%y==0),r(y>=3),r(b>=0&&b<=E.length),r(b%3==0),r(x>=0);for(var P=0,D=0;D<(S?S.length:0);++D)r(S[D]in _),P|=_[S[D]];var Q=E.BYTES_PER_ELEMENT==4?E:new Uint32Array(E),v=l(n.exports.meshopt_simplify,Q,E.length,I,I.length/y,y*4,b,x,P);return v[0]=E instanceof Uint32Array?v[0]:new E.constructor(v[0]),v},simplifyWithAttributes:function(E,I,y,b,x,S,P,D,Q,v){r(E instanceof Uint32Array||E instanceof Int32Array||E instanceof Uint16Array||E instanceof Int16Array),r(E.length%3==0),r(I instanceof Float32Array),r(I.length%y==0),r(y>=3),r(b instanceof Float32Array),r(b.length==x*(I.length/y)),r(x>=0),r(P==null||P instanceof Uint8Array),r(P==null||P.length==I.length/y),r(D>=0&&D<=E.length),r(D%3==0),r(Q>=0),r(Array.isArray(S)),r(x>=S.length),r(S.length<=32);for(var d=0;d<S.length;++d)r(S[d]>=0);for(var B=0,d=0;d<(v?v.length:0);++d)r(v[d]in _),B|=_[v[d]];var T=E.BYTES_PER_ELEMENT==4?E:new Uint32Array(E),R=f(n.exports.meshopt_simplifyWithAttributes,T,E.length,I,I.length/y,y*4,b,x*4,new Float32Array(S),P,D,Q,B);return R[0]=E instanceof Uint32Array?R[0]:new E.constructor(R[0]),R},simplifyWithUpdate:function(E,I,y,b,x,S,P,D,Q,v){r(E instanceof Uint32Array||E instanceof Int32Array||E instanceof Uint16Array||E instanceof Int16Array),r(E.length%3==0),r(I instanceof Float32Array),r(I.length%y==0),r(y>=3),r(b instanceof Float32Array),r(b.length==x*(I.length/y)),r(x>=0),r(P==null||P instanceof Uint8Array),r(P==null||P.length==I.length/y),r(D>=0&&D<=E.length),r(D%3==0),r(Q>=0),r(Array.isArray(S)),r(x>=S.length),r(S.length<=32);for(var d=0;d<S.length;++d)r(S[d]>=0);for(var B=0,d=0;d<(v?v.length:0);++d)r(v[d]in _),B|=_[v[d]];var T=E.BYTES_PER_ELEMENT==4?E:new Uint32Array(E),R=h(n.exports.meshopt_simplifyWithUpdate,T,E.length,I,I.length/y,y*4,b,x*4,new Float32Array(S),P,D,Q,B);if(E!==T)for(var d=0;d<R[0];++d)E[d]=T[d];return R},getScale:function(E,I){return r(E instanceof Float32Array),r(E.length%I==0),r(I>=3),m(n.exports.meshopt_simplifyScale,E,E.length/I,I*4)},simplifyPoints:function(E,I,y,b,x,S){return r(E instanceof Float32Array),r(E.length%I==0),r(I>=3),r(y>=0&&y<=E.length/I),b?(r(b instanceof Float32Array),r(b.length%x==0),r(x>=3),r(E.length/I==b.length/x),p(n.exports.meshopt_simplifyPoints,E,E.length/I,I*4,b,x*4,S,y)):p(n.exports.meshopt_simplifyPoints,E,E.length/I,I*4,void 0,0,0,y)},simplifySloppy:function(E,I,y,b,x,S){r(E instanceof Uint32Array||E instanceof Int32Array||E instanceof Uint16Array||E instanceof Int16Array),r(E.length%3==0),r(I instanceof Float32Array),r(I.length%y==0),r(y>=3),r(b==null||b instanceof Uint8Array),r(b==null||b.length==I.length/y),r(x>=0&&x<=E.length),r(x%3==0),r(S>=0);var P=E.BYTES_PER_ELEMENT==4?E:new Uint32Array(E),D=g(n.exports.meshopt_simplifySloppy,P,E.length,I,I.length/y,y*4,b,x,S);return D[0]=E instanceof Uint32Array?D[0]:new E.constructor(D[0]),D},simplifyPrune:function(E,I,y,b){r(E instanceof Uint32Array||E instanceof Int32Array||E instanceof Uint16Array||E instanceof Int16Array),r(E.length%3==0),r(I instanceof Float32Array),r(I.length%y==0),r(y>=3),r(b>=0);var x=E.BYTES_PER_ELEMENT==4?E:new Uint32Array(E),S=C(n.exports.meshopt_simplifyPrune,x,E.length,I,I.length/y,y*4,b);return S=E instanceof Uint32Array?S:new E.constructor(S),S}}})();typeof YC=="object"&&typeof YS=="object"?YS.exports=fb:typeof define=="function"&&define.amd?define([],function(){return fb}):typeof YC=="object"?YC.MeshoptSimplifier=fb:(typeof self<"u"?self:YC).MeshoptSimplifier=fb});var fU=ys((qC,qS)=>{var ub=(function(){var e="b9H79TebbbeVx9Geueu9Geub9Gbb9Giuuueu9Gmuuuuuuuuuuu9999eu9Gvuuuuueu9Gwuuuuuuuub9Gxuuuuuuuuuuuueu9Gkuuuuuuuuuu99eu9Gouuuuuub9Gruuuuuuub9GluuuubiAOdilvorwDqqDkbiibeilve9Weiiviebeoweuec;G:Odkr;qeDo9TW9T9VV95dbH9F9F939H79T9F9J9H229F9Jt9VV7bb8A9TW79O9V9Wt9F9I919P29K9nW79O2Wt79c9V919U9KbeX9TW79O9V9Wt9F9I919P29K9nW79O2Wt7bo39TW79O9V9Wt9F9J9V9T9W91tWJ2917tWV9c9V919U9K7br39TW79O9V9Wt9F9J9V9T9W91tW9nW79O2Wt9c9V919U9K7bDE9TW79O9V9Wt9F9J9V9T9W91tW9t9W9OWVW9c9V919U9K7bqL9TW79O9V9Wt9F9V9Wt9P9T9P96W9nW79O2Wtbkl79IV9RbxDwebcekdszq:x9DOdbkIbabaec9:fgefcufae9Ugeabci9Uadfcufad9Ugbaeab0Ek:w8KDPue99eux99dui99euo99iu8Jjjjjbc:WD9Rgm8KjjjjbdndnalmbcbhPxekamc:Cwfcbc;Kbz:ojjjb8Adndnalcb9imbaoal9nmbamcuaocdtaocFFFFi0Egscbyd;u1jjbHjjjjbbgzBd:CwamceBd;8wamascbyd;u1jjbHjjjjbbgHBd:GwamcdBd;8wamcualcdtalcFFFFi0Ecbyd;u1jjbHjjjjbbgOBd:KwamciBd;8waihsalhAinazasydbcdtfcbBdbasclfhsaAcufgAmbkaihsalhAinazasydbcdtfgCaCydbcefBdbasclfhsaAcufgAmbkaihsalhCcbhXindnazasydbcdtgQfgAydbcb9imbaHaQfaXBdbaAaAydbgQcjjjj94VBdbaQaXfhXkasclfhsaCcufgCmbkalci9UhLdnalci6mbcbhsaihAinaAcwfydbhCaAclfydbhXaHaAydbcdtfgQaQydbgQcefBdbaOaQcdtfasBdbaHaXcdtfgXaXydbgXcefBdbaOaXcdtfasBdbaHaCcdtfgCaCydbgCcefBdbaOaCcdtfasBdbaAcxfhAaLascefgs9hmbkkaihsalhAindnazasydbcdtgCfgXydbgQcu9kmbaXaQcFFFFrGgQBdbaHaCfgCaCydbaQ9RBdbkasclfhsaAcufgAmbxdkkamcuaocdtgsaocFFFFi0EgAcbyd;u1jjbHjjjjbbgzBd:CwamceBd;8wamaAcbyd;u1jjbHjjjjbbgHBd:GwamcdBd;8wamcualcdtalcFFFFi0Ecbyd;u1jjbHjjjjbbgOBd:KwamciBd;8wazcbasz:ojjjbhXalci9UhLaihsalhAinaXasydbcdtfgCaCydbcefBdbasclfhsaAcufgAmbkdnaoTmbcbhsaHhAaXhCaohQinaAasBdbaAclfhAaCydbasfhsaCclfhCaQcufgQmbkkdnalci6mbcbhsaihAinaAcwfydbhCaAclfydbhQaHaAydbcdtfgKaKydbgKcefBdbaOaKcdtfasBdbaHaQcdtfgQaQydbgQcefBdbaOaQcdtfasBdbaHaCcdtfgCaCydbgCcefBdbaOaCcdtfasBdbaAcxfhAaLascefgs9hmbkkaoTmbcbhsaohAinaHasfgCaCydbaXasfydb9RBdbasclfhsaAcufgAmbkkamaLcbyd;u1jjbHjjjjbbgsBd:OwamclBd;8wascbaLz:ojjjbhYamcuaLcK2alcjjjjd0Ecbyd;u1jjbHjjjjbbg8ABd:SwamcvBd;8wJbbbbhEdnalci6g3mbarcd4hKaihAa8AhsaLhrJbbbbh5inavaAclfydbaK2cdtfgCIdlh8EavaAydbaK2cdtfgXIdlhEavaAcwfydbaK2cdtfgQIdlh8FaCIdwhaaXIdwhhaQIdwhgasaCIdbg8JaXIdbg8KMaQIdbg8LMJbbnn:vUdbasclfaXIdlaCIdlMaQIdlMJbbnn:vUdbaQIdwh8MaCIdwh8NaXIdwhyascxfa8EaE:tg8Eagah:tggNa8FaE:tg8Faaah:tgaN:tgEJbbbbJbbjZa8Ja8K:tg8Ja8FNa8La8K:tg8Ka8EN:tghahNaEaENaaa8KNaga8JN:tgEaENMM:rg8K:va8KJbbbb9BEg8ENUdbasczfaEa8ENUdbascCfaha8ENUdbascwfa8Maya8NMMJbbnn:vUdba5a8KMh5aAcxfhAascKfhsarcufgrmbka5aL:Z:vJbbbZNhEkamcuaLcdtalcFFFF970Ecbyd;u1jjbHjjjjbbgCBd:WwamcoBd;8waEaq:ZNhEdna3mbcbhsaChAinaAasBdbaAclfhAaLascefgs9hmbkkaE:rhhcuh8PamcuaLcltalcFFFFd0Ecbyd;u1jjbHjjjjbbgIBd:0wamcrBd;8wcbaIa8AaCaLz:djjjb8AJFFuuhyJFFuuh8RJFFuuh8Sdnalci6gXmbJFFuuh8Sa8AhsaLhAJFFuuh8RJFFuuhyinascwfIdbgEayayaE9EEhyasclfIdbgEa8Ra8RaE9EEh8RasIdbgEa8Sa8SaE9EEh8SascKfhsaAcufgAmbkkahJbbbZNhgamaocetgscuaocu9kEcbyd;u1jjbHjjjjbbgABd:4waAcFeasz:ojjjbhCdnaXmbcbhAJFFuuhEa8Ahscuh8PinascwfIdbay:tghahNasIdba8S:tghahNasclfIdba8R:tghahNMM:rghaEa8PcuSahaE9DVgXEhEaAa8PaXEh8PascKfhsaLaAcefgA9hmbkkamczfcbcjwz:ojjjb8Aamcwf9cb83ibam9cb83ibagaxNhRJbbjZak:th8Ncbh8UJbbbbh8VJbbbbh8WJbbbbh8XJbbbbh8YJbbbbh8ZJbbbbh80cbh81cbhPinJbbbbhEdna8UTmbJbbjZa8U:Z:vhEkJbbbbhhdna80a80Na8Ya8YNa8Za8ZNMMg8KJbbbb9BmbJbbjZa8K:r:vhhka8XaENh5a8WaENh8Fa8VaENhaa8PhQdndndndndna8UaPVTmbamydwgBTmea80ahNh8Ja8ZahNh8La8YahNh8Maeamydbcdtfh83cbh3JFFuuhEcvhXcuhQindnaza83a3cdtfydbcdtgsfydbgvTmbaOaHasfydbcdtfhAindndnaCaiaAydbgKcx2fgsclfydbgrcetf8Vebcs4aCasydbgLcetf8Vebcs4faCascwfydbglcetf8Vebcs4fgombcbhsxekcehsazaLcdtfydbgLceSmbcehsazarcdtfydbgrceSmbcehsazalcdtfydbglceSmbdnarcdSaLcdSfalcdSfcd6mbaocefhsxekaocdfhskdnasaX9kmba8AaKcK2fgLIdwa5:thhaLIdla8F:th8KaLIdbaa:th8EdndnakJbbbb9DTmba8E:lg8Ea8K:lg8Ka8Ea8K9EEg8Kah:lgha8Kah9EEag:vJbbjZMhhxekahahNa8Ea8ENa8Ka8KNMM:rag:va8NNJbbjZMJ9VO:d86JbbjZaLIdCa8JNaLIdxa8MNa8LaLIdzNMMakN:tghahJ9VO:d869DENhhkaKaQasaX6ahaE9DVgLEhQasaXaLEhXahaEaLEhEkaAclfhAavcufgvmbkka3cefg3aB9hmbkkaQcu9hmekama5Ud:ODama8FUd:KDamaaUd:GDamcuBd:qDamcFFF;7rBdjDaIcba8AaYamc:GDfakJbbbb9Damc:qDfamcjDfz:ejjjbamyd:qDhQdndnaxJbbbb9ETmba8UaD6mbaQcuSmeceh3amIdjDaR9EmixdkaQcu9hmekdna8UTmbdnamydlgza8Uci2fgsciGTmbadasfcba8Uazcu7fciGcefz:ojjjb8AkabaPcltfgzam8Pib83dbazcwfamcwf8Pib83dbaPcefhPkc3hzinazc98Smvamc:Cwfazfydbcbyd;y1jjbH:bjjjbbazc98fhzxbkkcbh3a8Uaq9pmbamydwaCaiaQcx2fgsydbcetf8Vebcs4aCascwfydbcetf8Vebcs4faCasclfydbcetf8Vebcs4ffaw9nmekcbhscbhAdna81TmbcbhAamczfhXinamczfaAcdtfaXydbgLBdbaXclfhXaAaYaLfRbbTfhAa81cufg81mbkkamydwhlamydbhXam9cu83i:GDam9cu83i:ODam9cu83i:qDam9cu83i:yDaAc;8eaAclfc:bd6Eh81inamcjDfasfcFFF;7rBdbasclfgscz9hmbka81cdthBdnalTmbaeaXcdtfhocbhrindnazaoarcdtfydbcdtgsfydbgvTmbaOaHasfydbcdtfhAcuhLcuhsinazaiaAydbgKcx2fgXclfydbcdtfydbazaXydbcdtfydbfazaXcwfydbcdtfydbfgXasaXas6gXEhsaKaLaXEhLaAclfhAavcufgvmbkaLcuSmba8AaLcK2fgAIdway:tgEaENaAIdba8S:tgEaENaAIdla8R:tgEaENMM:rhEcbhAindndnasamc:qDfaAfgvydbgX6mbasaX9hmeaEamcjDfaAfIdb9FTmekavasBdbamc:GDfaAfaLBdbamcjDfaAfaEUdbxdkaAclfgAcz9hmbkkarcefgral9hmbkkamczfaBfhLcbhscbhAindnamc:GDfasfydbgXcuSmbaLaAcdtfaXBdbaAcefhAkasclfgscz9hmbkaAa81fg81TmbJFFuuhhcuhKamczfhsa81hvcuhLina8AasydbgXcK2fgAIdway:tgEaENaAIdba8S:tgEaENaAIdla8R:tgEaENMM:rhEdndnazaiaXcx2fgAclfydbcdtfydbazaAydbcdtfydbfazaAcwfydbcdtfydbfgAaL6mbaAaL9hmeaEah9DTmekaEhhaAhLaXhKkasclfhsavcufgvmbkaKcuSmbaKhQkdnamaiaQcx2fgrydbarclfydbarcwfydbaCabaeadaPawaqa3z:fjjjbTmbaPcefhPJbbbbh8VJbbbbh8WJbbbbh8XJbbbbh8YJbbbbh8ZJbbbbh80kcbhXinaOaHaraXcdtfydbcdtgAfydbcdtfgKhsazaAfgvydbgLhAdnaLTmbdninasydbaQSmeasclfhsaAcufgATmdxbkkasaKaLcdtfc98fydbBdbavavydbcufBdbkaXcefgXci9hmbka8AaQcK2fgsIdbhEasIdlhhasIdwh8KasIdxh8EasIdzh5asIdCh8FaYaQfce86bba80a8FMh80a8Za5Mh8Za8Ya8EMh8Ya8Xa8KMh8Xa8WahMh8Wa8VaEMh8Vamydxh8Uxbkkamc:WDf8KjjjjbaPk;Vvivuv99lu8Jjjjjbca9Rgv8Kjjjjbdndnalcw0mbaiydbhoaeabcitfgralcdtcufBdlaraoBdbdnalcd6mbaiclfhoalcufhwarcxfhrinaoydbhDarcuBdbarc98faDBdbarcwfhraoclfhoawcufgwmbkkalabfhrxekcbhDavczfcwfcbBdbav9cb83izavcwfcbBdbav9cb83ibJbbjZhqJbbjZhkinadaiaDcdtfydbcK2fhwcbhrinavczfarfgoawarfIdbgxaoIdbgm:tgPakNamMgmUdbavarfgoaPaxam:tNaoIdbMUdbarclfgrcx9hmbkJbbjZaqJbbjZMgq:vhkaDcefgDal9hmbkcbhoadcbcecdavIdlgxavIdwgm9GEgravIdbgPam9GEaraPax9GEgscdtgrfhzavczfarfIdbhxaihralhwinaiaocdtfgDydbhHaDarydbgOBdbaraHBdbarclfhraoazaOcK2fIdbax9Dfhoawcufgwmbkaeabcitfhrdndnaocv6mbaoalc98f6mekaraiydbBdbaralcdtcufBdlaiclfhoalcufhwarcxfhrinaoydbhDarcuBdbarc98faDBdbarcwfhraoclfhoawcufgwmbkalabfhrxekaraxUdbararydlc98GasVBdlabcefaeadaiaoz:djjjbhwararydlciGawabcu7fcdtVBdlawaeadaiaocdtfalao9Rz:djjjbhrkavcaf8Kjjjjbark:;idiud99dndnabaecitfgwydlgDciGgqciSmbinabcbaDcd4gDalaqcdtfIdbawIdb:tgkJbbbb9FEgwaecefgefadaialavaoarz:ejjjbak:larIdb9FTmdabawaD7aefgecitfgwydlgDciGgqci9hmbkkabaecitfgeclfhbdnavmbcuhwindnaiaeydbgDfRbbmbadaDcK2fgqIdwalIdw:tgkakNaqIdbalIdb:tgkakNaqIdlalIdl:tgkakNMM:rgkarIdb9DTmbarakUdbaoaDBdbkaecwfheawcefgwabydbcd46mbxdkkcuhwindnaiaeydbgDfRbbmbadaDcK2fgqIdbalIdb:t:lgkaqIdlalIdl:t:lgxakax9EEgkaqIdwalIdw:t:lgxakax9EEgkarIdb9DTmbarakUdbaoaDBdbkaecwfheawcefgwabydbcd46mbkkk;llevudnabydwgxaladcetfgm8Vebcs4alaecetfgP8Vebgscs4falaicetfgz8Vebcs4ffaD0abydxaq9pVakVgDce9hmbavawcltfgxab8Pdb83dbaxcwfabcwfgx8Pdb83dbdnaxydbgqTmbaoabydbcdtfhxaqhsinalaxydbcetfcFFi87ebaxclfhxascufgsmbkkdnabydxglci2gsabydlgxfgkciGTmbarakfcbalaxcu7fciGcefz:ojjjb8Aabydxci2hsabydlhxabydwhqkab9cb83dwababydbaqfBdbabascifc98GaxfBdlaP8Vebhscbhxkdnascztcz91cu9kmbabaxcefBdwaPax87ebaoabydbcdtfaxcdtfaeBdbkdnam8Uebcu9kmbababydwgxcefBdwamax87ebaoabydbcdtfaxcdtfadBdbkdnaz8Uebcu9kmbababydwgxcefBdwazax87ebaoabydbcdtfaxcdtfaiBdbkarabydlfabydxci2faPRbb86bbarabydlfabydxci2fcefamRbb86bbarabydlfabydxci2fcdfazRbb86bbababydxcefBdxaDk8LbabaeadaialavaoarawaDaDaqJbbbbz:cjjjbk;Nkovud99euv99eul998Jjjjjbc:W;ae9Rgo8KjjjjbdndnadTmbavcd4hrcbhwcbhDindnaiaeclfydbar2cdtfgvIdbaiaeydbar2cdtfgqIdbgk:tgxaiaecwfydbar2cdtfgmIdlaqIdlgP:tgsNamIdbak:tgzavIdlaP:tgPN:tgkakNaPamIdwaqIdwgH:tgONasavIdwaH:tgHN:tgPaPNaHazNaOaxN:tgxaxNMM:rgsJbbbb9Bmbaoc:W:qefawcx2fgAakas:vUdwaAaxas:vUdlaAaPas:vUdbaoc8Wfawc8K2fgAaq8Pdb83dbaAav8Pdb83dxaAam8Pdb83dKaAcwfaqcwfydbBdbaAcCfavcwfydbBdbaAcafamcwfydbBdbawcefhwkaecxfheaDcifgDad6mbkab9cb83dbabcyf9cb83dbabcaf9cb83dbabcKf9cb83dbabczf9cb83dbabcwf9cb83dbawTmeaocbBd8Sao9cb83iKao9cb83izaoczfaoc8Wfawci2cxaoc8Sfcbcrz1jjjbaoIdKhCaoIdChXaoIdzhQao9cb83iwao9cb83ibaoaoc:W:qefawcxaoc8Sfcbciz1jjjbJbbjZhkaoIdwgPJbbbbJbbjZaPaPNaoIdbgPaPNaoIdlgsasNMM:rgx:vaxJbbbb9BEgzNhxasazNhsaPazNhzaoc:W:qefheawhvinaecwfIdbaxNaeIdbazNasaeclfIdbNMMgPakaPak9DEhkaecxfheavcufgvmbkabaCUdwabaXUdlabaQUdbabaoId3UdxdndnakJ;n;m;m899FmbJbbbbhPaoc:W:qefheaoc8WfhvinaCavcwfIdb:taecwfIdbgHNaQavIdb:taeIdbgONaXavclfIdb:taeclfIdbgLNMMaxaHNazaONasaLNMM:vgHaPaHaP9EEhPavc8KfhvaecxfheawcufgwmbkabaxUd8KabasUdaabazUd3abaCaxaPN:tUdKabaXasaPN:tUdCabaQazaPN:tUdzabJbbjZakakN:t:rgkUdydndnaxJbbj:;axJbbj:;9GEgPJbbjZaPJbbjZ9FEJbb;:9cNJbbbZJbbb:;axJbbbb9GEMgP:lJbbb9p9DTmbaP:Ohexekcjjjj94hekabae86b8UdndnasJbbj:;asJbbj:;9GEgPJbbjZaPJbbjZ9FEJbb;:9cNJbbbZJbbb:;asJbbbb9GEMgP:lJbbb9p9DTmbaP:Ohvxekcjjjj94hvkabav86bRdndnazJbbj:;azJbbj:;9GEgPJbbjZaPJbbjZ9FEJbb;:9cNJbbbZJbbb:;azJbbbb9GEMgP:lJbbb9p9DTmbaP:Ohqxekcjjjj94hqkabaq86b8SdndnaecKtcK91:YJbb;:9c:vax:t:lavcKtcK91:YJbb;:9c:vas:t:laqcKtcK91:YJbb;:9c:vaz:t:lakMMMJbb;:9cNJbbjZMgk:lJbbb9p9DTmbak:Ohexekcjjjj94hekaecFbaecFb9iEhexekabcjjj;8iBdycFbhekabae86b8Vxekab9cb83dbabcyf9cb83dbabcaf9cb83dbabcKf9cb83dbabczf9cb83dbabcwf9cb83dbkaoc:W;aef8Kjjjjbk;Iwwvul99iud99eue99eul998Jjjjjbcje9Rgr8Kjjjjbavcd4hwaicd4hDdndnaoTmbarc;abfcbaocdtgvz:ojjjb8Aarc;Gbfcbavz:ojjjb8AarhvarcafhiaohqinavcFFF97BdbaicFFF;7rBdbaiclfhiavclfhvaqcufgqmbkdnadTmbcbhkinaeakaD2cdtfgvIdwhxavIdlhmavIdbhPalakaw2cdtfIdbhsarc;abfhzarhiarc;GbfhHarcafhqcj1jjbhvaohOinasavcwfIdbaxNavIdbaPNavclfIdbamNMMgAMhCakhXdnaAas:tgAaqIdbgQ9DgLmbaHydbhXkaHaXBdbakhXdnaCaiIdbgK9EmbazydbhXaKhCkazaXBdbaiaCUdbaqaAaQaLEUdbavcxfhvaqclfhqaHclfhHaiclfhiazclfhzaOcufgOmbkakcefgkad9hmbkkadThkJbbbbhCcbhXarc;abfhvarc;Gbfhicbhqinalavydbgzaw2cdtfIdbalaiydbgHaw2cdtfIdbaeazaD2cdtfgzIdwaeaHaD2cdtfgHIdw:tgsasNazIdbaHIdb:tgsasNazIdlaHIdl:tgsasNMM:rMMgsaCasaC9EgzEhCaqaXazEhXaiclfhiavclfhvaoaqcefgq9hmbkaCJbbbZNhKxekadThkcbhXJbbbbhKkJbbbbhCdnaearc;abfaXcdtgifydbgqaD2cdtfgvIdwaearc;GbfaifydbgzaD2cdtfgiIdwgm:tgsasNavIdbaiIdbgY:tgAaANavIdlaiIdlgP:tgQaQNMM:rgxJbbbb9ETmbaxalaqaw2cdtfIdbMalazaw2cdtfIdb:taxaxM:vhCkasaCNamMhmaQaCNaPMhPaAaCNaYMhYdnakmbaDcdthvawcdthiindnalIdbg8AaecwfIdbam:tgCaCNaeIdbaY:tgsasNaeclfIdbaP:tgAaANMM:rgQMgEaK9ETmbJbbbbhxdnaQJbbbb9ETmbaEaK:taQaQM:vhxkaxaCNamMhmaxaANaPMhPaxasNaYMhYa8AaKaQMMJbbbZNhKkaeavfhealaifhladcufgdmbkkabaKUdxabamUdwabaPUdlabaYUdbarcjef8Kjjjjbkjeeiu8Jjjjjbcj8W9Rgr8Kjjjjbaici2hwdnaiTmbawceawce0EhDarhiinaiaeadRbbcdtfydbBdbadcefhdaiclfhiaDcufgDmbkkabarawaladaoz:hjjjbarcj8Wf8Kjjjjbk:Reeeu8Jjjjjbca9Rgo8Kjjjjbab9cb83dbabcyf9cb83dbabcaf9cb83dbabcKf9cb83dbabczf9cb83dbabcwf9cb83dbdnadTmbaocbBd3ao9cb83iwao9cb83ibaoaeadaialaoc3falEavcbalEcrz1jjjbabao8Pib83dbabao8Piw83dwkaocaf8Kjjjjbk:3lequ8JjjjjbcjP9Rgl8Kjjjjbcbhvalcjxfcbaiz:ojjjb8AdndnadTmbcjehoaehrincuhwarhDcuhqavhkdninawakaoalcjxfaDcefRbbfRbb9RcFeGci6aoalcjxfaDRbbfRbb9RcFeGci6faoalcjxfaDcdfRbbfRbb9RcFeGci6fgxaq9mgmEhwdnammbaxce0mdkaxaqaxaq9kEhqaDcifhDadakcefgk9hmbkkaeawci2fgDcdfRbbhqaDcefRbbhxaDRbbhkaeavci2fgDcifaDawav9Rci2z:rjjjb8Aakalcjxffaocefgo86bbaxalcjxffao86bbaDcdfaq86bbaDcefax86bbaDak86bbaqalcjxffao86bbarcifhravcefgvad9hmbkalcFeaicetz:ojjjbhoadci2gDceaDce0EhqcbhxindnaoaeRbbgkcetfgw8UebgDcu9kmbawax87ebaocjlfaxcdtfabakcdtfydbBdbaxhDaxcefhxkaeaD86bbaecefheaqcufgqmbkaxcdthDxekcbhDkabalcjlfaDz:njjjb8AalcjPf8Kjjjjbk9teiucbcbyd;C1jjbgeabcifc98GfgbBd;C1jjbdndnabZbcztgd9nmbcuhiabad9RcFFifcz4nbcuSmekaehikaik;teeeudndnaeabVciGTmbabhixekdndnadcz9pmbabhixekabhiinaiaeydbBdbaiaeydlBdlaiaeydwBdwaiaeydxBdxaeczfheaiczfhiadc9Wfgdcs0mbkkadcl6mbinaiaeydbBdbaeclfheaiclfhiadc98fgdci0mbkkdnadTmbinaiaeRbb86bbaicefhiaecefheadcufgdmbkkabk:3eedudndnabciGTmbabhixekaecFeGc:b:c:ew2hldndnadcz9pmbabhixekabhiinaialBdxaialBdwaialBdlaialBdbaiczfhiadc9Wfgdcs0mbkkadcl6mbinaialBdbaiclfhiadc98fgdci0mbkkdnadTmbinaiae86bbaicefhiadcufgdmbkkabk9teiucbcbyd;C1jjbgeabcrfc94GfgbBd;C1jjbdndnabZbcztgd9nmbcuhiabad9RcFFifcz4nbcuSmekaehikaik9:eiuZbhedndncbyd;C1jjbgdaecztgi9nmbcuheadai9RcFFifcz4nbcuSmekadhekcbabae9Rcifc98Gcbyd;C1jjbfgdBd;C1jjbdnadZbcztge9nmbadae9RcFFifcz4nb8Akk:;Deludndndnadch9pmbabaeSmdaeabadfgi9Rcbadcet9R0mekabaead;8qbbxekaeab7ciGhldndndnabae9pmbdnalTmbadhvabhixikdnabciGmbadhvabhixdkadTmiabaeRbb86bbadcufhvdnabcefgiciGmbaecefhexdkavTmiabaeRbe86beadc9:fhvdnabcdfgiciGmbaecdfhexdkavTmiabaeRbd86bdadc99fhvdnabcifgiciGmbaecifhexdkavTmiabaeRbi86biabclfhiaeclfheadc98fhvxekdnalmbdnaiciGTmbadTmlabadcufgifglaeaifRbb86bbdnalciGmbaihdxekaiTmlabadc9:fgifglaeaifRbb86bbdnalciGmbaihdxekaiTmlabadc99fgifglaeaifRbb86bbdnalciGmbaihdxekaiTmlabadc98fgdfaeadfRbb86bbkadcl6mbdnadc98fgocd4cefciGgiTmbaec98fhlabc98fhvinavadfaladfydbBdbadc98fhdaicufgimbkkaocx6mbaec9Wfhvabc9WfhoinaoadfgicxfavadfglcxfydbBdbaicwfalcwfydbBdbaiclfalclfydbBdbaialydbBdbadc9Wfgdci0mbkkadTmdadhidnadciGglTmbaecufhvabcufhoadhiinaoaifavaifRbb86bbaicufhialcufglmbkkadcl6mdaec98fhlabc98fhvinavaifgecifalaifgdcifRbb86bbaecdfadcdfRbb86bbaecefadcefRbb86bbaeadRbb86bbaic98fgimbxikkavcl6mbdnavc98fglcd4cefcrGgdTmbavadcdt9RhvinaiaeydbBdbaeclfheaiclfhiadcufgdmbkkalc36mbinaiaeydbBdbaiaeydlBdlaiaeydwBdwaiaeydxBdxaiaeydzBdzaiaeydCBdCaiaeydKBdKaiaeyd3Bd3aecafheaicafhiavc9Gfgvci0mbkkavTmbdndnavcrGgdmbavhlxekavc94GhlinaiaeRbb86bbaicefhiaecefheadcufgdmbkkavcw6mbinaiaeRbb86bbaiaeRbe86beaiaeRbd86bdaiaeRbi86biaiaeRbl86blaiaeRbv86bvaiaeRbo86boaiaeRbr86braicwfhiaecwfhealc94fglmbkkabkk9Tdbcjwk9ubbjZbbbbbbbbbbbbbbjZbbbbbbbbbbbbbbjZ86;nAZ86;nAZ86;nAZ86;nA:;86;nAZ86;nAZ86;nAZ86;nA:;86;nAZ86;nAZ86;nAZ86;nA:;bc;uwkxebbbdbbb9GNbb",t=new Uint8Array([32,0,65,2,1,106,34,33,3,128,11,4,13,64,6,253,10,7,15,116,127,5,8,12,40,16,19,54,20,9,27,255,113,17,42,67,24,23,146,148,18,14,22,45,70,69,56,114,101,21,25,63,75,136,108,28,118,29,73,115]);if(typeof WebAssembly!="object")return{supported:!1};var n,i=WebAssembly.instantiate(o(e),{}).then(function(C){n=C.instance,n.exports.__wasm_call_ctors()});function o(C){for(var _=new Uint8Array(C.length),E=0;E<C.length;++E){var I=C.charCodeAt(E);_[E]=I>96?I-97:I>64?I-39:I+4}for(var y=0,E=0;E<C.length;++E)_[y++]=_[E]<60?t[_[E]]:(_[E]-60)*64+_[++E];return _.buffer.slice(0,y)}function r(C){if(!C)throw new Error("Assertion failed")}function a(C){return new Uint8Array(C.buffer,C.byteOffset,C.byteLength)}var s=48,A=16;function l(C,_){var E=C.meshlets[_*4+0],I=C.meshlets[_*4+1],y=C.meshlets[_*4+2],b=C.meshlets[_*4+3];return{vertices:C.vertices.subarray(E,E+y),triangles:C.triangles.subarray(I,I+b*3)}}function f(C,_,E,I,y,b,x){var S=n.exports.sbrk,P=n.exports.meshopt_buildMeshletsBound(C.length,y,b),D=S(P*A),Q=S(P*y*4),v=S(P*b*3),d=S(C.byteLength),B=S(_.byteLength),T=new Uint8Array(n.exports.memory.buffer);T.set(a(C),d),T.set(a(_),B);var R=n.exports.meshopt_buildMeshlets(D,Q,v,d,C.length,B,E,I,y,b,x);T=new Uint8Array(n.exports.memory.buffer);for(var L=T.subarray(D,D+R*A),G=new Uint32Array(L.buffer,L.byteOffset,L.byteLength/4).slice(),q=0;q<R;++q){var z=G[q*4+0],K=G[q*4+1],E=G[q*4+2],ie=G[q*4+3];n.exports.meshopt_optimizeMeshlet(Q+z*4,v+K,ie,E)}var le=G[(R-1)*4+0],de=G[(R-1)*4+1],he=G[(R-1)*4+2],Se=G[(R-1)*4+3],be=le+he,_e=de+(Se*3+3&-4),Ct={meshlets:G,vertices:new Uint32Array(T.buffer,Q,be).slice(),triangles:new Uint8Array(T.buffer,v,_e*3).slice(),meshletCount:R};return S(D-S(0)),Ct}function h(C){var _=new Float32Array(n.exports.memory.buffer,C,s/4);return{centerX:_[0],centerY:_[1],centerZ:_[2],radius:_[3],coneApexX:_[4],coneApexY:_[5],coneApexZ:_[6],coneAxisX:_[7],coneAxisY:_[8],coneAxisZ:_[9],coneCutoff:_[10]}}function m(C,_,E,I){var y=n.exports.sbrk,b=[],x=y(_.byteLength),S=y(C.vertices.byteLength),P=y(C.triangles.byteLength),D=y(s),Q=new Uint8Array(n.exports.memory.buffer);Q.set(a(_),x),Q.set(a(C.vertices),S),Q.set(a(C.triangles),P);for(var v=0;v<C.meshletCount;++v){var d=C.meshlets[v*4+0],B=C.meshlets[v*4+0+1],T=C.meshlets[v*4+0+3];n.exports.meshopt_computeMeshletBounds(D,S+d*4,P+B,T,x,E,I),b.push(h(D))}return y(x-y(0)),b}function p(C,_,E,I){var y=n.exports.sbrk,b=y(s),x=y(C.byteLength),S=y(_.byteLength),P=new Uint8Array(n.exports.memory.buffer);P.set(a(C),x),P.set(a(_),S),n.exports.meshopt_computeClusterBounds(b,x,C.length,S,E,I);var D=h(b);return y(b-y(0)),D}function g(C,_,E,I,y){var b=n.exports.sbrk,x=b(s),S=b(C.byteLength),P=I?b(I.byteLength):0,D=new Uint8Array(n.exports.memory.buffer);D.set(a(C),S),I&&D.set(a(I),P),n.exports.meshopt_computeSphereBounds(x,S,_,E,P,I?y:0);var Q=h(x);return b(x-b(0)),Q}return{ready:i,supported:!0,buildMeshlets:function(C,_,E,I,y,b){r(C.length%3==0),r(_ instanceof Float32Array),r(_.length%E==0),r(E>=3),r(I<=256||I>0),r(y<=512),r(y%4==0),b=b||0;var x=C.BYTES_PER_ELEMENT==4?C:new Uint32Array(C);return f(x,_,_.length/E,E*4,I,y,b)},extractMeshlet:function(C,_){return r(_>=0&&_<C.meshletCount),l(C,_)},computeClusterBounds:function(C,_,E){r(C.length%3==0),r(C.length/3<=512),r(_ instanceof Float32Array),r(_.length%E==0),r(E>=3);var I=C.BYTES_PER_ELEMENT==4?C:new Uint32Array(C);return p(I,_,_.length/E,E*4)},computeMeshletBounds:function(C,_,E){return r(C.meshletCount!=0),r(_ instanceof Float32Array),r(_.length%E==0),r(E>=3),m(C,_,_.length/E,E*4)},computeSphereBounds:function(C,_,E,I){return r(C instanceof Float32Array),r(C.length%_==0),r(_>=3),r(!E||E instanceof Float32Array),r(!E||E.length%I==0),r(!E||I>=1),r(!E||C.length/_==E.length/I),I=I||0,g(C,C.length/_,_*4,E,I*4)}}})();typeof qC=="object"&&typeof qS=="object"?qS.exports=ub:typeof define=="function"&&define.amd?define([],function(){return ub}):typeof qC=="object"?qC.MeshoptClusterizer=ub:(typeof self<"u"?self:qC).MeshoptClusterizer=ub});var dU=ys((Grt,uU)=>{var ace=cU(),sce=AU(),cce=lU(),Ace=fU();uU.exports={MeshoptEncoder:ace,MeshoptDecoder:sce,MeshoptSimplifier:cce,MeshoptClusterizer:Ace}});var o4=ys((bNt,i4)=>{"use strict";i4.exports=fbe;var v_=1e20;function fbe(e,t){t||(t={});var n=t.cutoff==null?.25:t.cutoff,i=t.radius==null?8:t.radius,o=t.channel||0,r,a,s,A,l,f,h,m,p,g,C;if(ArrayBuffer.isView(e)||Array.isArray(e)){if(!t.width||!t.height)throw Error("For raw data width and height should be provided by options");r=t.width,a=t.height,A=e,t.stride?f=t.stride:f=Math.floor(e.length/r/a)}else window.HTMLCanvasElement&&e instanceof window.HTMLCanvasElement?(m=e,h=m.getContext("2d"),r=m.width,a=m.height,p=h.getImageData(0,0,r,a),A=p.data,f=4):window.CanvasRenderingContext2D&&e instanceof window.CanvasRenderingContext2D?(m=e.canvas,h=e,r=m.width,a=m.height,p=h.getImageData(0,0,r,a),A=p.data,f=4):window.ImageData&&e instanceof window.ImageData&&(p=e,r=e.width,a=e.height,A=p.data,f=4);if(s=Math.max(r,a),window.Uint8ClampedArray&&A instanceof window.Uint8ClampedArray||window.Uint8Array&&A instanceof window.Uint8Array)for(l=A,A=Array(r*a),g=0,C=Math.floor(l.length/f);g<C;g++)A[g]=l[g*f+o]/255;else if(f!==1)throw Error("Raw data can have only 1 value per pixel");var _=Array(r*a),E=Array(r*a),I=Array(s),y=Array(s),b=Array(s+1),x=Array(s);for(g=0,C=r*a;g<C;g++){var S=A[g];_[g]=S===1?0:S===0?v_:Math.pow(Math.max(0,.5-S),2),E[g]=S===1?v_:S===0?0:Math.pow(Math.max(0,S-.5),2)}t4(_,r,a,I,y,x,b),t4(E,r,a,I,y,x,b);var P=window.Float32Array?new Float32Array(r*a):new Array(r*a);for(g=0,C=r*a;g<C;g++)P[g]=Math.min(Math.max(1-((_[g]-E[g])/i+n),0),1);return P}function t4(e,t,n,i,o,r,a){for(var s=0;s<t;s++){for(var A=0;A<n;A++)i[A]=e[A*t+s];for(n4(i,o,r,a,n),A=0;A<n;A++)e[A*t+s]=o[A]}for(A=0;A<n;A++){for(s=0;s<t;s++)i[s]=e[A*t+s];for(n4(i,o,r,a,t),s=0;s<t;s++)e[A*t+s]=Math.sqrt(o[s])}}function n4(e,t,n,i,o){n[0]=0,i[0]=-v_,i[1]=+v_;for(var r=1,a=0;r<o;r++){for(var s=(e[r]+r*r-(e[n[a]]+n[a]*n[a]))/(2*r-2*n[a]);s<=i[a];)a--,s=(e[r]+r*r-(e[n[a]]+n[a]*n[a]))/(2*r-2*n[a]);a++,n[a]=r,i[a]=s,i[a+1]=+v_}for(r=0,a=0;r<o;r++){for(;i[a+1]<r;)a++;t[r]=(r-n[a])*(r-n[a])+e[n[a]]}}});var A4=ys((UNt,x0)=>{function ybe(){var e=0,t=1,n=2,i=3,o=4,r=5,a=6,s=7,A=8,l=9,f=10,h=11,m=12,p=13,g=14,C=15,_=16,E=17,I=0,y=1,b=2,x=3,S=4;function P(d,B){return 55296<=d.charCodeAt(B)&&d.charCodeAt(B)<=56319&&56320<=d.charCodeAt(B+1)&&d.charCodeAt(B+1)<=57343}function D(d,B){B===void 0&&(B=0);var T=d.charCodeAt(B);if(55296<=T&&T<=56319&&B<d.length-1){var R=T,L=d.charCodeAt(B+1);return 56320<=L&&L<=57343?(R-55296)*1024+(L-56320)+65536:R}if(56320<=T&&T<=57343&&B>=1){var R=d.charCodeAt(B-1),L=T;return 55296<=R&&R<=56319?(R-55296)*1024+(L-56320)+65536:L}return T}function Q(d,B,T){var R=[d].concat(B).concat([T]),L=R[R.length-2],G=T,q=R.lastIndexOf(g);if(q>1&&R.slice(1,q).every(function(ie){return ie==i})&&[i,p,E].indexOf(d)==-1)return b;var z=R.lastIndexOf(o);if(z>0&&R.slice(1,z).every(function(ie){return ie==o})&&[m,o].indexOf(L)==-1)return R.filter(function(ie){return ie==o}).length%2==1?x:S;if(L==e&&G==t)return I;if(L==n||L==e||L==t)return G==g&&B.every(function(ie){return ie==i})?b:y;if(G==n||G==e||G==t)return y;if(L==a&&(G==a||G==s||G==l||G==f))return I;if((L==l||L==s)&&(G==s||G==A))return I;if((L==f||L==A)&&G==A)return I;if(G==i||G==C)return I;if(G==r)return I;if(L==m)return I;var K=R.indexOf(i)!=-1?R.lastIndexOf(i)-1:R.length-2;return[p,E].indexOf(R[K])!=-1&&R.slice(K+1,-1).every(function(ie){return ie==i})&&G==g||L==C&&[_,E].indexOf(G)!=-1?I:B.indexOf(o)!=-1?b:L==o&&G==o?I:y}this.nextBreak=function(d,B){if(B===void 0&&(B=0),B<0)return 0;if(B>=d.length-1)return d.length;for(var T=v(D(d,B)),R=[],L=B+1;L<d.length;L++)if(!P(d,L-1)){var G=v(D(d,L));if(Q(T,R,G))return L;R.push(G)}return d.length},this.splitGraphemes=function(d){for(var B=[],T=0,R;(R=this.nextBreak(d,T))<d.length;)B.push(d.slice(T,R)),T=R;return T<d.length&&B.push(d.slice(T)),B},this.iterateGraphemes=function(d){var B=0,T={next:(function(){var R,L;return(L=this.nextBreak(d,B))<d.length?(R=d.slice(B,L),B=L,{value:R,done:!1}):B<d.length?(R=d.slice(B),B=d.length,{value:R,done:!1}):{value:void 0,done:!0}}).bind(this)};return typeof Symbol<"u"&&Symbol.iterator&&(T[Symbol.iterator]=function(){return T}),T},this.countGraphemes=function(d){for(var B=0,T=0,R;(R=this.nextBreak(d,T))<d.length;)T=R,B++;return T<d.length&&B++,B};function v(d){return 1536<=d&&d<=1541||d==1757||d==1807||d==2274||d==3406||d==69821||70082<=d&&d<=70083||d==72250||72326<=d&&d<=72329||d==73030?m:d==13?e:d==10?t:0<=d&&d<=9||11<=d&&d<=12||14<=d&&d<=31||127<=d&&d<=159||d==173||d==1564||d==6158||d==8203||8206<=d&&d<=8207||d==8232||d==8233||8234<=d&&d<=8238||8288<=d&&d<=8292||d==8293||8294<=d&&d<=8303||55296<=d&&d<=57343||d==65279||65520<=d&&d<=65528||65529<=d&&d<=65531||113824<=d&&d<=113827||119155<=d&&d<=119162||d==917504||d==917505||917506<=d&&d<=917535||917632<=d&&d<=917759||918e3<=d&&d<=921599?n:768<=d&&d<=879||1155<=d&&d<=1159||1160<=d&&d<=1161||1425<=d&&d<=1469||d==1471||1473<=d&&d<=1474||1476<=d&&d<=1477||d==1479||1552<=d&&d<=1562||1611<=d&&d<=1631||d==1648||1750<=d&&d<=1756||1759<=d&&d<=1764||1767<=d&&d<=1768||1770<=d&&d<=1773||d==1809||1840<=d&&d<=1866||1958<=d&&d<=1968||2027<=d&&d<=2035||2070<=d&&d<=2073||2075<=d&&d<=2083||2085<=d&&d<=2087||2089<=d&&d<=2093||2137<=d&&d<=2139||2260<=d&&d<=2273||2275<=d&&d<=2306||d==2362||d==2364||2369<=d&&d<=2376||d==2381||2385<=d&&d<=2391||2402<=d&&d<=2403||d==2433||d==2492||d==2494||2497<=d&&d<=2500||d==2509||d==2519||2530<=d&&d<=2531||2561<=d&&d<=2562||d==2620||2625<=d&&d<=2626||2631<=d&&d<=2632||2635<=d&&d<=2637||d==2641||2672<=d&&d<=2673||d==2677||2689<=d&&d<=2690||d==2748||2753<=d&&d<=2757||2759<=d&&d<=2760||d==2765||2786<=d&&d<=2787||2810<=d&&d<=2815||d==2817||d==2876||d==2878||d==2879||2881<=d&&d<=2884||d==2893||d==2902||d==2903||2914<=d&&d<=2915||d==2946||d==3006||d==3008||d==3021||d==3031||d==3072||3134<=d&&d<=3136||3142<=d&&d<=3144||3146<=d&&d<=3149||3157<=d&&d<=3158||3170<=d&&d<=3171||d==3201||d==3260||d==3263||d==3266||d==3270||3276<=d&&d<=3277||3285<=d&&d<=3286||3298<=d&&d<=3299||3328<=d&&d<=3329||3387<=d&&d<=3388||d==3390||3393<=d&&d<=3396||d==3405||d==3415||3426<=d&&d<=3427||d==3530||d==3535||3538<=d&&d<=3540||d==3542||d==3551||d==3633||3636<=d&&d<=3642||3655<=d&&d<=3662||d==3761||3764<=d&&d<=3769||3771<=d&&d<=3772||3784<=d&&d<=3789||3864<=d&&d<=3865||d==3893||d==3895||d==3897||3953<=d&&d<=3966||3968<=d&&d<=3972||3974<=d&&d<=3975||3981<=d&&d<=3991||3993<=d&&d<=4028||d==4038||4141<=d&&d<=4144||4146<=d&&d<=4151||4153<=d&&d<=4154||4157<=d&&d<=4158||4184<=d&&d<=4185||4190<=d&&d<=4192||4209<=d&&d<=4212||d==4226||4229<=d&&d<=4230||d==4237||d==4253||4957<=d&&d<=4959||5906<=d&&d<=5908||5938<=d&&d<=5940||5970<=d&&d<=5971||6002<=d&&d<=6003||6068<=d&&d<=6069||6071<=d&&d<=6077||d==6086||6089<=d&&d<=6099||d==6109||6155<=d&&d<=6157||6277<=d&&d<=6278||d==6313||6432<=d&&d<=6434||6439<=d&&d<=6440||d==6450||6457<=d&&d<=6459||6679<=d&&d<=6680||d==6683||d==6742||6744<=d&&d<=6750||d==6752||d==6754||6757<=d&&d<=6764||6771<=d&&d<=6780||d==6783||6832<=d&&d<=6845||d==6846||6912<=d&&d<=6915||d==6964||6966<=d&&d<=6970||d==6972||d==6978||7019<=d&&d<=7027||7040<=d&&d<=7041||7074<=d&&d<=7077||7080<=d&&d<=7081||7083<=d&&d<=7085||d==7142||7144<=d&&d<=7145||d==7149||7151<=d&&d<=7153||7212<=d&&d<=7219||7222<=d&&d<=7223||7376<=d&&d<=7378||7380<=d&&d<=7392||7394<=d&&d<=7400||d==7405||d==7412||7416<=d&&d<=7417||7616<=d&&d<=7673||7675<=d&&d<=7679||d==8204||8400<=d&&d<=8412||8413<=d&&d<=8416||d==8417||8418<=d&&d<=8420||8421<=d&&d<=8432||11503<=d&&d<=11505||d==11647||11744<=d&&d<=11775||12330<=d&&d<=12333||12334<=d&&d<=12335||12441<=d&&d<=12442||d==42607||42608<=d&&d<=42610||42612<=d&&d<=42621||42654<=d&&d<=42655||42736<=d&&d<=42737||d==43010||d==43014||d==43019||43045<=d&&d<=43046||43204<=d&&d<=43205||43232<=d&&d<=43249||43302<=d&&d<=43309||43335<=d&&d<=43345||43392<=d&&d<=43394||d==43443||43446<=d&&d<=43449||d==43452||d==43493||43561<=d&&d<=43566||43569<=d&&d<=43570||43573<=d&&d<=43574||d==43587||d==43596||d==43644||d==43696||43698<=d&&d<=43700||43703<=d&&d<=43704||43710<=d&&d<=43711||d==43713||43756<=d&&d<=43757||d==43766||d==44005||d==44008||d==44013||d==64286||65024<=d&&d<=65039||65056<=d&&d<=65071||65438<=d&&d<=65439||d==66045||d==66272||66422<=d&&d<=66426||68097<=d&&d<=68099||68101<=d&&d<=68102||68108<=d&&d<=68111||68152<=d&&d<=68154||d==68159||68325<=d&&d<=68326||d==69633||69688<=d&&d<=69702||69759<=d&&d<=69761||69811<=d&&d<=69814||69817<=d&&d<=69818||69888<=d&&d<=69890||69927<=d&&d<=69931||69933<=d&&d<=69940||d==70003||70016<=d&&d<=70017||70070<=d&&d<=70078||70090<=d&&d<=70092||70191<=d&&d<=70193||d==70196||70198<=d&&d<=70199||d==70206||d==70367||70371<=d&&d<=70378||70400<=d&&d<=70401||d==70460||d==70462||d==70464||d==70487||70502<=d&&d<=70508||70512<=d&&d<=70516||70712<=d&&d<=70719||70722<=d&&d<=70724||d==70726||d==70832||70835<=d&&d<=70840||d==70842||d==70845||70847<=d&&d<=70848||70850<=d&&d<=70851||d==71087||71090<=d&&d<=71093||71100<=d&&d<=71101||71103<=d&&d<=71104||71132<=d&&d<=71133||71219<=d&&d<=71226||d==71229||71231<=d&&d<=71232||d==71339||d==71341||71344<=d&&d<=71349||d==71351||71453<=d&&d<=71455||71458<=d&&d<=71461||71463<=d&&d<=71467||72193<=d&&d<=72198||72201<=d&&d<=72202||72243<=d&&d<=72248||72251<=d&&d<=72254||d==72263||72273<=d&&d<=72278||72281<=d&&d<=72283||72330<=d&&d<=72342||72344<=d&&d<=72345||72752<=d&&d<=72758||72760<=d&&d<=72765||d==72767||72850<=d&&d<=72871||72874<=d&&d<=72880||72882<=d&&d<=72883||72885<=d&&d<=72886||73009<=d&&d<=73014||d==73018||73020<=d&&d<=73021||73023<=d&&d<=73029||d==73031||92912<=d&&d<=92916||92976<=d&&d<=92982||94095<=d&&d<=94098||113821<=d&&d<=113822||d==119141||119143<=d&&d<=119145||119150<=d&&d<=119154||119163<=d&&d<=119170||119173<=d&&d<=119179||119210<=d&&d<=119213||119362<=d&&d<=119364||121344<=d&&d<=121398||121403<=d&&d<=121452||d==121461||d==121476||121499<=d&&d<=121503||121505<=d&&d<=121519||122880<=d&&d<=122886||122888<=d&&d<=122904||122907<=d&&d<=122913||122915<=d&&d<=122916||122918<=d&&d<=122922||125136<=d&&d<=125142||125252<=d&&d<=125258||917536<=d&&d<=917631||917760<=d&&d<=917999?i:127462<=d&&d<=127487?o:d==2307||d==2363||2366<=d&&d<=2368||2377<=d&&d<=2380||2382<=d&&d<=2383||2434<=d&&d<=2435||2495<=d&&d<=2496||2503<=d&&d<=2504||2507<=d&&d<=2508||d==2563||2622<=d&&d<=2624||d==2691||2750<=d&&d<=2752||d==2761||2763<=d&&d<=2764||2818<=d&&d<=2819||d==2880||2887<=d&&d<=2888||2891<=d&&d<=2892||d==3007||3009<=d&&d<=3010||3014<=d&&d<=3016||3018<=d&&d<=3020||3073<=d&&d<=3075||3137<=d&&d<=3140||3202<=d&&d<=3203||d==3262||3264<=d&&d<=3265||3267<=d&&d<=3268||3271<=d&&d<=3272||3274<=d&&d<=3275||3330<=d&&d<=3331||3391<=d&&d<=3392||3398<=d&&d<=3400||3402<=d&&d<=3404||3458<=d&&d<=3459||3536<=d&&d<=3537||3544<=d&&d<=3550||3570<=d&&d<=3571||d==3635||d==3763||3902<=d&&d<=3903||d==3967||d==4145||4155<=d&&d<=4156||4182<=d&&d<=4183||d==4228||d==6070||6078<=d&&d<=6085||6087<=d&&d<=6088||6435<=d&&d<=6438||6441<=d&&d<=6443||6448<=d&&d<=6449||6451<=d&&d<=6456||6681<=d&&d<=6682||d==6741||d==6743||6765<=d&&d<=6770||d==6916||d==6965||d==6971||6973<=d&&d<=6977||6979<=d&&d<=6980||d==7042||d==7073||7078<=d&&d<=7079||d==7082||d==7143||7146<=d&&d<=7148||d==7150||7154<=d&&d<=7155||7204<=d&&d<=7211||7220<=d&&d<=7221||d==7393||7410<=d&&d<=7411||d==7415||43043<=d&&d<=43044||d==43047||43136<=d&&d<=43137||43188<=d&&d<=43203||43346<=d&&d<=43347||d==43395||43444<=d&&d<=43445||43450<=d&&d<=43451||43453<=d&&d<=43456||43567<=d&&d<=43568||43571<=d&&d<=43572||d==43597||d==43755||43758<=d&&d<=43759||d==43765||44003<=d&&d<=44004||44006<=d&&d<=44007||44009<=d&&d<=44010||d==44012||d==69632||d==69634||d==69762||69808<=d&&d<=69810||69815<=d&&d<=69816||d==69932||d==70018||70067<=d&&d<=70069||70079<=d&&d<=70080||70188<=d&&d<=70190||70194<=d&&d<=70195||d==70197||70368<=d&&d<=70370||70402<=d&&d<=70403||d==70463||70465<=d&&d<=70468||70471<=d&&d<=70472||70475<=d&&d<=70477||70498<=d&&d<=70499||70709<=d&&d<=70711||70720<=d&&d<=70721||d==70725||70833<=d&&d<=70834||d==70841||70843<=d&&d<=70844||d==70846||d==70849||71088<=d&&d<=71089||71096<=d&&d<=71099||d==71102||71216<=d&&d<=71218||71227<=d&&d<=71228||d==71230||d==71340||71342<=d&&d<=71343||d==71350||71456<=d&&d<=71457||d==71462||72199<=d&&d<=72200||d==72249||72279<=d&&d<=72280||d==72343||d==72751||d==72766||d==72873||d==72881||d==72884||94033<=d&&d<=94078||d==119142||d==119149?r:4352<=d&&d<=4447||43360<=d&&d<=43388?a:4448<=d&&d<=4519||55216<=d&&d<=55238?s:4520<=d&&d<=4607||55243<=d&&d<=55291?A:d==44032||d==44060||d==44088||d==44116||d==44144||d==44172||d==44200||d==44228||d==44256||d==44284||d==44312||d==44340||d==44368||d==44396||d==44424||d==44452||d==44480||d==44508||d==44536||d==44564||d==44592||d==44620||d==44648||d==44676||d==44704||d==44732||d==44760||d==44788||d==44816||d==44844||d==44872||d==44900||d==44928||d==44956||d==44984||d==45012||d==45040||d==45068||d==45096||d==45124||d==45152||d==45180||d==45208||d==45236||d==45264||d==45292||d==45320||d==45348||d==45376||d==45404||d==45432||d==45460||d==45488||d==45516||d==45544||d==45572||d==45600||d==45628||d==45656||d==45684||d==45712||d==45740||d==45768||d==45796||d==45824||d==45852||d==45880||d==45908||d==45936||d==45964||d==45992||d==46020||d==46048||d==46076||d==46104||d==46132||d==46160||d==46188||d==46216||d==46244||d==46272||d==46300||d==46328||d==46356||d==46384||d==46412||d==46440||d==46468||d==46496||d==46524||d==46552||d==46580||d==46608||d==46636||d==46664||d==46692||d==46720||d==46748||d==46776||d==46804||d==46832||d==46860||d==46888||d==46916||d==46944||d==46972||d==47e3||d==47028||d==47056||d==47084||d==47112||d==47140||d==47168||d==47196||d==47224||d==47252||d==47280||d==47308||d==47336||d==47364||d==47392||d==47420||d==47448||d==47476||d==47504||d==47532||d==47560||d==47588||d==47616||d==47644||d==47672||d==47700||d==47728||d==47756||d==47784||d==47812||d==47840||d==47868||d==47896||d==47924||d==47952||d==47980||d==48008||d==48036||d==48064||d==48092||d==48120||d==48148||d==48176||d==48204||d==48232||d==48260||d==48288||d==48316||d==48344||d==48372||d==48400||d==48428||d==48456||d==48484||d==48512||d==48540||d==48568||d==48596||d==48624||d==48652||d==48680||d==48708||d==48736||d==48764||d==48792||d==48820||d==48848||d==48876||d==48904||d==48932||d==48960||d==48988||d==49016||d==49044||d==49072||d==49100||d==49128||d==49156||d==49184||d==49212||d==49240||d==49268||d==49296||d==49324||d==49352||d==49380||d==49408||d==49436||d==49464||d==49492||d==49520||d==49548||d==49576||d==49604||d==49632||d==49660||d==49688||d==49716||d==49744||d==49772||d==49800||d==49828||d==49856||d==49884||d==49912||d==49940||d==49968||d==49996||d==50024||d==50052||d==50080||d==50108||d==50136||d==50164||d==50192||d==50220||d==50248||d==50276||d==50304||d==50332||d==50360||d==50388||d==50416||d==50444||d==50472||d==50500||d==50528||d==50556||d==50584||d==50612||d==50640||d==50668||d==50696||d==50724||d==50752||d==50780||d==50808||d==50836||d==50864||d==50892||d==50920||d==50948||d==50976||d==51004||d==51032||d==51060||d==51088||d==51116||d==51144||d==51172||d==51200||d==51228||d==51256||d==51284||d==51312||d==51340||d==51368||d==51396||d==51424||d==51452||d==51480||d==51508||d==51536||d==51564||d==51592||d==51620||d==51648||d==51676||d==51704||d==51732||d==51760||d==51788||d==51816||d==51844||d==51872||d==51900||d==51928||d==51956||d==51984||d==52012||d==52040||d==52068||d==52096||d==52124||d==52152||d==52180||d==52208||d==52236||d==52264||d==52292||d==52320||d==52348||d==52376||d==52404||d==52432||d==52460||d==52488||d==52516||d==52544||d==52572||d==52600||d==52628||d==52656||d==52684||d==52712||d==52740||d==52768||d==52796||d==52824||d==52852||d==52880||d==52908||d==52936||d==52964||d==52992||d==53020||d==53048||d==53076||d==53104||d==53132||d==53160||d==53188||d==53216||d==53244||d==53272||d==53300||d==53328||d==53356||d==53384||d==53412||d==53440||d==53468||d==53496||d==53524||d==53552||d==53580||d==53608||d==53636||d==53664||d==53692||d==53720||d==53748||d==53776||d==53804||d==53832||d==53860||d==53888||d==53916||d==53944||d==53972||d==54e3||d==54028||d==54056||d==54084||d==54112||d==54140||d==54168||d==54196||d==54224||d==54252||d==54280||d==54308||d==54336||d==54364||d==54392||d==54420||d==54448||d==54476||d==54504||d==54532||d==54560||d==54588||d==54616||d==54644||d==54672||d==54700||d==54728||d==54756||d==54784||d==54812||d==54840||d==54868||d==54896||d==54924||d==54952||d==54980||d==55008||d==55036||d==55064||d==55092||d==55120||d==55148||d==55176?l:44033<=d&&d<=44059||44061<=d&&d<=44087||44089<=d&&d<=44115||44117<=d&&d<=44143||44145<=d&&d<=44171||44173<=d&&d<=44199||44201<=d&&d<=44227||44229<=d&&d<=44255||44257<=d&&d<=44283||44285<=d&&d<=44311||44313<=d&&d<=44339||44341<=d&&d<=44367||44369<=d&&d<=44395||44397<=d&&d<=44423||44425<=d&&d<=44451||44453<=d&&d<=44479||44481<=d&&d<=44507||44509<=d&&d<=44535||44537<=d&&d<=44563||44565<=d&&d<=44591||44593<=d&&d<=44619||44621<=d&&d<=44647||44649<=d&&d<=44675||44677<=d&&d<=44703||44705<=d&&d<=44731||44733<=d&&d<=44759||44761<=d&&d<=44787||44789<=d&&d<=44815||44817<=d&&d<=44843||44845<=d&&d<=44871||44873<=d&&d<=44899||44901<=d&&d<=44927||44929<=d&&d<=44955||44957<=d&&d<=44983||44985<=d&&d<=45011||45013<=d&&d<=45039||45041<=d&&d<=45067||45069<=d&&d<=45095||45097<=d&&d<=45123||45125<=d&&d<=45151||45153<=d&&d<=45179||45181<=d&&d<=45207||45209<=d&&d<=45235||45237<=d&&d<=45263||45265<=d&&d<=45291||45293<=d&&d<=45319||45321<=d&&d<=45347||45349<=d&&d<=45375||45377<=d&&d<=45403||45405<=d&&d<=45431||45433<=d&&d<=45459||45461<=d&&d<=45487||45489<=d&&d<=45515||45517<=d&&d<=45543||45545<=d&&d<=45571||45573<=d&&d<=45599||45601<=d&&d<=45627||45629<=d&&d<=45655||45657<=d&&d<=45683||45685<=d&&d<=45711||45713<=d&&d<=45739||45741<=d&&d<=45767||45769<=d&&d<=45795||45797<=d&&d<=45823||45825<=d&&d<=45851||45853<=d&&d<=45879||45881<=d&&d<=45907||45909<=d&&d<=45935||45937<=d&&d<=45963||45965<=d&&d<=45991||45993<=d&&d<=46019||46021<=d&&d<=46047||46049<=d&&d<=46075||46077<=d&&d<=46103||46105<=d&&d<=46131||46133<=d&&d<=46159||46161<=d&&d<=46187||46189<=d&&d<=46215||46217<=d&&d<=46243||46245<=d&&d<=46271||46273<=d&&d<=46299||46301<=d&&d<=46327||46329<=d&&d<=46355||46357<=d&&d<=46383||46385<=d&&d<=46411||46413<=d&&d<=46439||46441<=d&&d<=46467||46469<=d&&d<=46495||46497<=d&&d<=46523||46525<=d&&d<=46551||46553<=d&&d<=46579||46581<=d&&d<=46607||46609<=d&&d<=46635||46637<=d&&d<=46663||46665<=d&&d<=46691||46693<=d&&d<=46719||46721<=d&&d<=46747||46749<=d&&d<=46775||46777<=d&&d<=46803||46805<=d&&d<=46831||46833<=d&&d<=46859||46861<=d&&d<=46887||46889<=d&&d<=46915||46917<=d&&d<=46943||46945<=d&&d<=46971||46973<=d&&d<=46999||47001<=d&&d<=47027||47029<=d&&d<=47055||47057<=d&&d<=47083||47085<=d&&d<=47111||47113<=d&&d<=47139||47141<=d&&d<=47167||47169<=d&&d<=47195||47197<=d&&d<=47223||47225<=d&&d<=47251||47253<=d&&d<=47279||47281<=d&&d<=47307||47309<=d&&d<=47335||47337<=d&&d<=47363||47365<=d&&d<=47391||47393<=d&&d<=47419||47421<=d&&d<=47447||47449<=d&&d<=47475||47477<=d&&d<=47503||47505<=d&&d<=47531||47533<=d&&d<=47559||47561<=d&&d<=47587||47589<=d&&d<=47615||47617<=d&&d<=47643||47645<=d&&d<=47671||47673<=d&&d<=47699||47701<=d&&d<=47727||47729<=d&&d<=47755||47757<=d&&d<=47783||47785<=d&&d<=47811||47813<=d&&d<=47839||47841<=d&&d<=47867||47869<=d&&d<=47895||47897<=d&&d<=47923||47925<=d&&d<=47951||47953<=d&&d<=47979||47981<=d&&d<=48007||48009<=d&&d<=48035||48037<=d&&d<=48063||48065<=d&&d<=48091||48093<=d&&d<=48119||48121<=d&&d<=48147||48149<=d&&d<=48175||48177<=d&&d<=48203||48205<=d&&d<=48231||48233<=d&&d<=48259||48261<=d&&d<=48287||48289<=d&&d<=48315||48317<=d&&d<=48343||48345<=d&&d<=48371||48373<=d&&d<=48399||48401<=d&&d<=48427||48429<=d&&d<=48455||48457<=d&&d<=48483||48485<=d&&d<=48511||48513<=d&&d<=48539||48541<=d&&d<=48567||48569<=d&&d<=48595||48597<=d&&d<=48623||48625<=d&&d<=48651||48653<=d&&d<=48679||48681<=d&&d<=48707||48709<=d&&d<=48735||48737<=d&&d<=48763||48765<=d&&d<=48791||48793<=d&&d<=48819||48821<=d&&d<=48847||48849<=d&&d<=48875||48877<=d&&d<=48903||48905<=d&&d<=48931||48933<=d&&d<=48959||48961<=d&&d<=48987||48989<=d&&d<=49015||49017<=d&&d<=49043||49045<=d&&d<=49071||49073<=d&&d<=49099||49101<=d&&d<=49127||49129<=d&&d<=49155||49157<=d&&d<=49183||49185<=d&&d<=49211||49213<=d&&d<=49239||49241<=d&&d<=49267||49269<=d&&d<=49295||49297<=d&&d<=49323||49325<=d&&d<=49351||49353<=d&&d<=49379||49381<=d&&d<=49407||49409<=d&&d<=49435||49437<=d&&d<=49463||49465<=d&&d<=49491||49493<=d&&d<=49519||49521<=d&&d<=49547||49549<=d&&d<=49575||49577<=d&&d<=49603||49605<=d&&d<=49631||49633<=d&&d<=49659||49661<=d&&d<=49687||49689<=d&&d<=49715||49717<=d&&d<=49743||49745<=d&&d<=49771||49773<=d&&d<=49799||49801<=d&&d<=49827||49829<=d&&d<=49855||49857<=d&&d<=49883||49885<=d&&d<=49911||49913<=d&&d<=49939||49941<=d&&d<=49967||49969<=d&&d<=49995||49997<=d&&d<=50023||50025<=d&&d<=50051||50053<=d&&d<=50079||50081<=d&&d<=50107||50109<=d&&d<=50135||50137<=d&&d<=50163||50165<=d&&d<=50191||50193<=d&&d<=50219||50221<=d&&d<=50247||50249<=d&&d<=50275||50277<=d&&d<=50303||50305<=d&&d<=50331||50333<=d&&d<=50359||50361<=d&&d<=50387||50389<=d&&d<=50415||50417<=d&&d<=50443||50445<=d&&d<=50471||50473<=d&&d<=50499||50501<=d&&d<=50527||50529<=d&&d<=50555||50557<=d&&d<=50583||50585<=d&&d<=50611||50613<=d&&d<=50639||50641<=d&&d<=50667||50669<=d&&d<=50695||50697<=d&&d<=50723||50725<=d&&d<=50751||50753<=d&&d<=50779||50781<=d&&d<=50807||50809<=d&&d<=50835||50837<=d&&d<=50863||50865<=d&&d<=50891||50893<=d&&d<=50919||50921<=d&&d<=50947||50949<=d&&d<=50975||50977<=d&&d<=51003||51005<=d&&d<=51031||51033<=d&&d<=51059||51061<=d&&d<=51087||51089<=d&&d<=51115||51117<=d&&d<=51143||51145<=d&&d<=51171||51173<=d&&d<=51199||51201<=d&&d<=51227||51229<=d&&d<=51255||51257<=d&&d<=51283||51285<=d&&d<=51311||51313<=d&&d<=51339||51341<=d&&d<=51367||51369<=d&&d<=51395||51397<=d&&d<=51423||51425<=d&&d<=51451||51453<=d&&d<=51479||51481<=d&&d<=51507||51509<=d&&d<=51535||51537<=d&&d<=51563||51565<=d&&d<=51591||51593<=d&&d<=51619||51621<=d&&d<=51647||51649<=d&&d<=51675||51677<=d&&d<=51703||51705<=d&&d<=51731||51733<=d&&d<=51759||51761<=d&&d<=51787||51789<=d&&d<=51815||51817<=d&&d<=51843||51845<=d&&d<=51871||51873<=d&&d<=51899||51901<=d&&d<=51927||51929<=d&&d<=51955||51957<=d&&d<=51983||51985<=d&&d<=52011||52013<=d&&d<=52039||52041<=d&&d<=52067||52069<=d&&d<=52095||52097<=d&&d<=52123||52125<=d&&d<=52151||52153<=d&&d<=52179||52181<=d&&d<=52207||52209<=d&&d<=52235||52237<=d&&d<=52263||52265<=d&&d<=52291||52293<=d&&d<=52319||52321<=d&&d<=52347||52349<=d&&d<=52375||52377<=d&&d<=52403||52405<=d&&d<=52431||52433<=d&&d<=52459||52461<=d&&d<=52487||52489<=d&&d<=52515||52517<=d&&d<=52543||52545<=d&&d<=52571||52573<=d&&d<=52599||52601<=d&&d<=52627||52629<=d&&d<=52655||52657<=d&&d<=52683||52685<=d&&d<=52711||52713<=d&&d<=52739||52741<=d&&d<=52767||52769<=d&&d<=52795||52797<=d&&d<=52823||52825<=d&&d<=52851||52853<=d&&d<=52879||52881<=d&&d<=52907||52909<=d&&d<=52935||52937<=d&&d<=52963||52965<=d&&d<=52991||52993<=d&&d<=53019||53021<=d&&d<=53047||53049<=d&&d<=53075||53077<=d&&d<=53103||53105<=d&&d<=53131||53133<=d&&d<=53159||53161<=d&&d<=53187||53189<=d&&d<=53215||53217<=d&&d<=53243||53245<=d&&d<=53271||53273<=d&&d<=53299||53301<=d&&d<=53327||53329<=d&&d<=53355||53357<=d&&d<=53383||53385<=d&&d<=53411||53413<=d&&d<=53439||53441<=d&&d<=53467||53469<=d&&d<=53495||53497<=d&&d<=53523||53525<=d&&d<=53551||53553<=d&&d<=53579||53581<=d&&d<=53607||53609<=d&&d<=53635||53637<=d&&d<=53663||53665<=d&&d<=53691||53693<=d&&d<=53719||53721<=d&&d<=53747||53749<=d&&d<=53775||53777<=d&&d<=53803||53805<=d&&d<=53831||53833<=d&&d<=53859||53861<=d&&d<=53887||53889<=d&&d<=53915||53917<=d&&d<=53943||53945<=d&&d<=53971||53973<=d&&d<=53999||54001<=d&&d<=54027||54029<=d&&d<=54055||54057<=d&&d<=54083||54085<=d&&d<=54111||54113<=d&&d<=54139||54141<=d&&d<=54167||54169<=d&&d<=54195||54197<=d&&d<=54223||54225<=d&&d<=54251||54253<=d&&d<=54279||54281<=d&&d<=54307||54309<=d&&d<=54335||54337<=d&&d<=54363||54365<=d&&d<=54391||54393<=d&&d<=54419||54421<=d&&d<=54447||54449<=d&&d<=54475||54477<=d&&d<=54503||54505<=d&&d<=54531||54533<=d&&d<=54559||54561<=d&&d<=54587||54589<=d&&d<=54615||54617<=d&&d<=54643||54645<=d&&d<=54671||54673<=d&&d<=54699||54701<=d&&d<=54727||54729<=d&&d<=54755||54757<=d&&d<=54783||54785<=d&&d<=54811||54813<=d&&d<=54839||54841<=d&&d<=54867||54869<=d&&d<=54895||54897<=d&&d<=54923||54925<=d&&d<=54951||54953<=d&&d<=54979||54981<=d&&d<=55007||55009<=d&&d<=55035||55037<=d&&d<=55063||55065<=d&&d<=55091||55093<=d&&d<=55119||55121<=d&&d<=55147||55149<=d&&d<=55175||55177<=d&&d<=55203?f:d==9757||d==9977||9994<=d&&d<=9997||d==127877||127938<=d&&d<=127940||d==127943||127946<=d&&d<=127948||128066<=d&&d<=128067||128070<=d&&d<=128080||d==128110||128112<=d&&d<=128120||d==128124||128129<=d&&d<=128131||128133<=d&&d<=128135||d==128170||128372<=d&&d<=128373||d==128378||d==128400||128405<=d&&d<=128406||128581<=d&&d<=128583||128587<=d&&d<=128591||d==128675||128692<=d&&d<=128694||d==128704||d==128716||129304<=d&&d<=129308||129310<=d&&d<=129311||d==129318||129328<=d&&d<=129337||129341<=d&&d<=129342||129489<=d&&d<=129501?p:127995<=d&&d<=127999?g:d==8205?C:d==9792||d==9794||9877<=d&&d<=9878||d==9992||d==10084||d==127752||d==127806||d==127859||d==127891||d==127908||d==127912||d==127979||d==127981||d==128139||128187<=d&&d<=128188||d==128295||d==128300||d==128488||d==128640||d==128658?_:128102<=d&&d<=128105?E:h}return this}typeof x0<"u"&&x0.exports&&(x0.exports=ybe)});var JPe={};d5(JPe,{FanGeometry:()=>zB,FanGeometryUpdater:()=>VB,FanGraphics:()=>yg,FanOutlineGeometry:()=>HB,Vector:()=>jB,VectorGraphics:()=>bg,VectorVisualizer:()=>qB,initializeGeometry:()=>WB,processFan:()=>NE,processVector:()=>kE});module.exports=h5(JPe);function m5(e){return e!=null}var c=m5;function Ad(e){this.name="DeveloperError",this.message=e;let t;try{throw new Error}catch(n){t=n.stack}this.stack=t}c(Object.create)&&(Ad.prototype=Object.create(Error.prototype),Ad.prototype.constructor=Ad);Ad.prototype.toString=function(){let e=`${this.name}: ${this.message}`;return c(this.stack)&&(e+=`
${this.stack.toString()}`),e};Ad.throwInstantiationError=function(){throw new Ad("This function defines an interface and should not be called directly.")};var Ee=Ad;var yo={};yo.typeOf={};function p5(e){return`${e} is required, actual value was undefined`}function Fh(e,t,n){return`Expected ${n} to be typeof ${t}, actual typeof was ${e}`}yo.defined=function(e,t){if(!c(t))throw new Ee(p5(e))};yo.typeOf.func=function(e,t){if(typeof t!="function")throw new Ee(Fh(typeof t,"function",e))};yo.typeOf.string=function(e,t){if(typeof t!="string")throw new Ee(Fh(typeof t,"string",e))};yo.typeOf.number=function(e,t){if(typeof t!="number")throw new Ee(Fh(typeof t,"number",e))};yo.typeOf.number.lessThan=function(e,t,n){if(yo.typeOf.number(e,t),t>=n)throw new Ee(`Expected ${e} to be less than ${n}, actual value was ${t}`)};yo.typeOf.number.lessThanOrEquals=function(e,t,n){if(yo.typeOf.number(e,t),t>n)throw new Ee(`Expected ${e} to be less than or equal to ${n}, actual value was ${t}`)};yo.typeOf.number.greaterThan=function(e,t,n){if(yo.typeOf.number(e,t),t<=n)throw new Ee(`Expected ${e} to be greater than ${n}, actual value was ${t}`)};yo.typeOf.number.greaterThanOrEquals=function(e,t,n){if(yo.typeOf.number(e,t),t<n)throw new Ee(`Expected ${e} to be greater than or equal to ${n}, actual value was ${t}`)};yo.typeOf.object=function(e,t){if(typeof t!="object")throw new Ee(Fh(typeof t,"object",e))};yo.typeOf.bool=function(e,t){if(typeof t!="boolean")throw new Ee(Fh(typeof t,"boolean",e))};yo.typeOf.bigint=function(e,t){if(typeof t!="bigint")throw new Ee(Fh(typeof t,"bigint",e))};yo.typeOf.number.equals=function(e,t,n,i){if(yo.typeOf.number(e,n),yo.typeOf.number(t,i),n!==i)throw new Ee(`${e} must be equal to ${t}, the actual values are ${n} and ${i}`)};var Ei=yo;var tx=qr(ex(),1);var Le={};Le.EPSILON1=.1;Le.EPSILON2=.01;Le.EPSILON3=.001;Le.EPSILON4=1e-4;Le.EPSILON5=1e-5;Le.EPSILON6=1e-6;Le.EPSILON7=1e-7;Le.EPSILON8=1e-8;Le.EPSILON9=1e-9;Le.EPSILON10=1e-10;Le.EPSILON11=1e-11;Le.EPSILON12=1e-12;Le.EPSILON13=1e-13;Le.EPSILON14=1e-14;Le.EPSILON15=1e-15;Le.EPSILON16=1e-16;Le.EPSILON17=1e-17;Le.EPSILON18=1e-18;Le.EPSILON19=1e-19;Le.EPSILON20=1e-20;Le.EPSILON21=1e-21;Le.GRAVITATIONALPARAMETER=3986004418e5;Le.SOLAR_RADIUS=6955e5;Le.LUNAR_RADIUS=1737400;Le.SIXTY_FOUR_KILOBYTES=64*1024;Le.FOUR_GIGABYTES=4*1024*1024*1024;Le.sign=Math.sign??function(t){return t=+t,t===0||t!==t?t:t>0?1:-1};Le.signNotZero=function(e){return e<0?-1:1};Le.toSNorm=function(e,t){return t=t??255,Math.round((Le.clamp(e,-1,1)*.5+.5)*t)};Le.fromSNorm=function(e,t){return t=t??255,Le.clamp(e,0,t)/t*2-1};Le.normalize=function(e,t,n){return n=Math.max(n-t,0),n===0?0:Le.clamp((e-t)/n,0,1)};Le.sinh=Math.sinh??function(t){return(Math.exp(t)-Math.exp(-t))/2};Le.cosh=Math.cosh??function(t){return(Math.exp(t)+Math.exp(-t))/2};Le.lerp=function(e,t,n){return(1-n)*e+n*t};Le.PI=Math.PI;Le.ONE_OVER_PI=1/Math.PI;Le.PI_OVER_TWO=Math.PI/2;Le.PI_OVER_THREE=Math.PI/3;Le.PI_OVER_FOUR=Math.PI/4;Le.PI_OVER_SIX=Math.PI/6;Le.THREE_PI_OVER_TWO=3*Math.PI/2;Le.TWO_PI=2*Math.PI;Le.ONE_OVER_TWO_PI=1/(2*Math.PI);Le.RADIANS_PER_DEGREE=Math.PI/180;Le.DEGREES_PER_RADIAN=180/Math.PI;Le.RADIANS_PER_ARCSECOND=Le.RADIANS_PER_DEGREE/3600;Le.toRadians=function(e){return e*Le.RADIANS_PER_DEGREE};Le.toDegrees=function(e){return e*Le.DEGREES_PER_RADIAN};Le.convertLongitudeRange=function(e){let t=Le.TWO_PI,n=e-Math.floor(e/t)*t;return n<-Math.PI?n+t:n>=Math.PI?n-t:n};Le.clampToLatitudeRange=function(e){return Le.clamp(e,-1*Le.PI_OVER_TWO,Le.PI_OVER_TWO)};Le.negativePiToPi=function(e){return e>=-Le.PI&&e<=Le.PI?e:Le.zeroToTwoPi(e+Le.PI)-Le.PI};Le.zeroToTwoPi=function(e){if(e>=0&&e<=Le.TWO_PI)return e;let t=Le.mod(e,Le.TWO_PI);return Math.abs(t)<Le.EPSILON14&&Math.abs(e)>Le.EPSILON14?Le.TWO_PI:t};Le.mod=function(e,t){return Le.sign(e)===Le.sign(t)&&Math.abs(e)<Math.abs(t)?e:(e%t+t)%t};Le.equalsEpsilon=function(e,t,n,i){n=n??0,i=i??n;let o=Math.abs(e-t);return o<=i||o<=n*Math.max(Math.abs(e),Math.abs(t))};Le.lessThan=function(e,t,n){return e-t<-n};Le.lessThanOrEquals=function(e,t,n){return e-t<n};Le.greaterThan=function(e,t,n){return e-t>n};Le.greaterThanOrEquals=function(e,t,n){return e-t>-n};var WE=[1];Le.factorial=function(e){let t=WE.length;if(e>=t){let n=WE[t-1];for(let i=t;i<=e;i++){let o=n*i;WE.push(o),n=o}}return WE[e]};Le.incrementWrap=function(e,t,n){return n=n??0,++e,e>t&&(e=n),e};Le.isPowerOfTwo=function(e){return e!==0&&(e&e-1)===0};Le.nextPowerOfTwo=function(e){return--e,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,++e,e};Le.previousPowerOfTwo=function(e){return e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,e|=e>>32,e=(e>>>0)-(e>>>1),e};Le.clamp=function(e,t,n){return e<t?t:e>n?n:e};var _v=new tx.default;Le.setRandomNumberSeed=function(e){_v=new tx.default(e)};Le.nextRandomNumber=function(){return _v.random()};Le.randomBetween=function(e,t){return Le.nextRandomNumber()*(t-e)+e};Le.acosClamped=function(e){return Math.acos(Le.clamp(e,-1,1))};Le.asinClamped=function(e){return Math.asin(Le.clamp(e,-1,1))};Le.chordLength=function(e,t){return 2*t*Math.sin(e*.5)};Le.logBase=function(e,t){return Math.log(e)/Math.log(t)};Le.cbrt=Math.cbrt??function(t){let n=Math.pow(Math.abs(t),.3333333333333333);return t<0?-n:n};Le.log2=Math.log2??function(t){return Math.log(t)*Math.LOG2E};Le.fog=function(e,t){let n=e*t;return 1-Math.exp(-(n*n))};Le.fastApproximateAtan=function(e){return e*(-.1784*Math.abs(e)-.0663*e*e+1.0301)};Le.fastApproximateAtan2=function(e,t){let n,i=Math.abs(e);n=Math.abs(t);let o=Math.max(i,n);n=Math.min(i,n);let r=n/o;return i=Le.fastApproximateAtan(r),i=Math.abs(t)>Math.abs(e)?Le.PI_OVER_TWO-i:i,i=e<0?Le.PI-i:i,i=t<0?-i:i,i};var w=Le;function we(e,t,n){this.x=e??0,this.y=t??0,this.z=n??0}we.fromSpherical=function(e,t){c(t)||(t=new we);let n=e.clock,i=e.cone,o=e.magnitude??1,r=o*Math.sin(i);return t.x=r*Math.cos(n),t.y=r*Math.sin(n),t.z=o*Math.cos(i),t};we.fromElements=function(e,t,n,i){return c(i)?(i.x=e,i.y=t,i.z=n,i):new we(e,t,n)};we.clone=function(e,t){if(c(e))return c(t)?(t.x=e.x,t.y=e.y,t.z=e.z,t):new we(e.x,e.y,e.z)};we.fromCartesian4=we.clone;we.packedLength=3;we.pack=function(e,t,n){return n=n??0,t[n++]=e.x,t[n++]=e.y,t[n]=e.z,t};we.unpack=function(e,t,n){return t=t??0,c(n)||(n=new we),n.x=e[t++],n.y=e[t++],n.z=e[t],n};we.packArray=function(e,t){let n=e.length,i=n*3;c(t)?!Array.isArray(t)&&t.length!==i||t.length!==i&&(t.length=i):t=new Array(i);for(let o=0;o<n;++o)we.pack(e[o],t,o*3);return t};we.unpackArray=function(e,t){let n=e.length;c(t)?t.length=n/3:t=new Array(n/3);for(let i=0;i<n;i+=3){let o=i/3;t[o]=we.unpack(e,i,t[o])}return t};we.fromArray=we.unpack;we.maximumComponent=function(e){return Math.max(e.x,e.y,e.z)};we.minimumComponent=function(e){return Math.min(e.x,e.y,e.z)};we.minimumByComponent=function(e,t,n){return n.x=Math.min(e.x,t.x),n.y=Math.min(e.y,t.y),n.z=Math.min(e.z,t.z),n};we.maximumByComponent=function(e,t,n){return n.x=Math.max(e.x,t.x),n.y=Math.max(e.y,t.y),n.z=Math.max(e.z,t.z),n};we.clamp=function(e,t,n,i){let o=w.clamp(e.x,t.x,n.x),r=w.clamp(e.y,t.y,n.y),a=w.clamp(e.z,t.z,n.z);return i.x=o,i.y=r,i.z=a,i};we.magnitudeSquared=function(e){return e.x*e.x+e.y*e.y+e.z*e.z};we.magnitude=function(e){return Math.sqrt(we.magnitudeSquared(e))};var KE=new we;we.distance=function(e,t){return we.subtract(e,t,KE),we.magnitude(KE)};we.distanceSquared=function(e,t){return we.subtract(e,t,KE),we.magnitudeSquared(KE)};we.normalize=function(e,t){let n=we.magnitude(e);return t.x=e.x/n,t.y=e.y/n,t.z=e.z/n,t};we.dot=function(e,t){return e.x*t.x+e.y*t.y+e.z*t.z};we.multiplyComponents=function(e,t,n){return n.x=e.x*t.x,n.y=e.y*t.y,n.z=e.z*t.z,n};we.divideComponents=function(e,t,n){return n.x=e.x/t.x,n.y=e.y/t.y,n.z=e.z/t.z,n};we.add=function(e,t,n){return n.x=e.x+t.x,n.y=e.y+t.y,n.z=e.z+t.z,n};we.subtract=function(e,t,n){return n.x=e.x-t.x,n.y=e.y-t.y,n.z=e.z-t.z,n};we.multiplyByScalar=function(e,t,n){return n.x=e.x*t,n.y=e.y*t,n.z=e.z*t,n};we.divideByScalar=function(e,t,n){return n.x=e.x/t,n.y=e.y/t,n.z=e.z/t,n};we.negate=function(e,t){return t.x=-e.x,t.y=-e.y,t.z=-e.z,t};we.abs=function(e,t){return t.x=Math.abs(e.x),t.y=Math.abs(e.y),t.z=Math.abs(e.z),t};var Ev=new we;we.lerp=function(e,t,n,i){return we.multiplyByScalar(t,n,Ev),i=we.multiplyByScalar(e,1-n,i),we.add(Ev,i,i)};var JE=new we,nx=new we;we.angleBetween=function(e,t){we.normalize(e,JE),we.normalize(t,nx);let n=we.dot(JE,nx),i=we.magnitude(we.cross(JE,nx,JE));return Math.atan2(i,n)};var g5=new we;we.mostOrthogonalAxis=function(e,t){let n=we.normalize(e,g5);return we.abs(n,n),n.x<=n.y?n.x<=n.z?t=we.clone(we.UNIT_X,t):t=we.clone(we.UNIT_Z,t):n.y<=n.z?t=we.clone(we.UNIT_Y,t):t=we.clone(we.UNIT_Z,t),t};we.projectVector=function(e,t,n){let i=we.dot(e,t)/we.dot(t,t);return we.multiplyByScalar(t,i,n)};we.equals=function(e,t){return e===t||c(e)&&c(t)&&e.x===t.x&&e.y===t.y&&e.z===t.z};we.equalsArray=function(e,t,n){return e.x===t[n]&&e.y===t[n+1]&&e.z===t[n+2]};we.equalsEpsilon=function(e,t,n,i){return e===t||c(e)&&c(t)&&w.equalsEpsilon(e.x,t.x,n,i)&&w.equalsEpsilon(e.y,t.y,n,i)&&w.equalsEpsilon(e.z,t.z,n,i)};we.cross=function(e,t,n){let i=e.x,o=e.y,r=e.z,a=t.x,s=t.y,A=t.z,l=o*A-r*s,f=r*a-i*A,h=i*s-o*a;return n.x=l,n.y=f,n.z=h,n};we.midpoint=function(e,t,n){return n.x=(e.x+t.x)*.5,n.y=(e.y+t.y)*.5,n.z=(e.z+t.z)*.5,n};we.fromDegrees=function(e,t,n,i,o){return e=w.toRadians(e),t=w.toRadians(t),we.fromRadians(e,t,n,i,o)};var bs=new we,kh=new we;we._ellipsoidRadiiSquared=new we(6378137*6378137,6378137*6378137,6356752314245179e-9*6356752314245179e-9);we.fromRadians=function(e,t,n,i,o){n=n??0;let r=c(i)?i.radiiSquared:we._ellipsoidRadiiSquared,a=Math.cos(t);bs.x=a*Math.cos(e),bs.y=a*Math.sin(e),bs.z=Math.sin(t),bs=we.normalize(bs,bs),we.multiplyComponents(r,bs,kh);let s=Math.sqrt(we.dot(bs,kh));return kh=we.divideByScalar(kh,s,kh),bs=we.multiplyByScalar(bs,n,bs),c(o)||(o=new we),we.add(kh,bs,o)};we.fromDegreesArray=function(e,t,n){let i=e.length;c(n)?n.length=i/2:n=new Array(i/2);for(let o=0;o<i;o+=2){let r=e[o],a=e[o+1],s=o/2;n[s]=we.fromDegrees(r,a,0,t,n[s])}return n};we.fromRadiansArray=function(e,t,n){let i=e.length;c(n)?n.length=i/2:n=new Array(i/2);for(let o=0;o<i;o+=2){let r=e[o],a=e[o+1],s=o/2;n[s]=we.fromRadians(r,a,0,t,n[s])}return n};we.fromDegreesArrayHeights=function(e,t,n){let i=e.length;c(n)?n.length=i/3:n=new Array(i/3);for(let o=0;o<i;o+=3){let r=e[o],a=e[o+1],s=e[o+2],A=o/3;n[A]=we.fromDegrees(r,a,s,t,n[A])}return n};we.fromRadiansArrayHeights=function(e,t,n){let i=e.length;c(n)?n.length=i/3:n=new Array(i/3);for(let o=0;o<i;o+=3){let r=e[o],a=e[o+1],s=e[o+2],A=o/3;n[A]=we.fromRadians(r,a,s,t,n[A])}return n};we.ZERO=Object.freeze(new we(0,0,0));we.ONE=Object.freeze(new we(1,1,1));we.UNIT_X=Object.freeze(new we(1,0,0));we.UNIT_Y=Object.freeze(new we(0,1,0));we.UNIT_Z=Object.freeze(new we(0,0,1));we.prototype.clone=function(e){return we.clone(this,e)};we.prototype.equals=function(e){return we.equals(this,e)};we.prototype.equalsEpsilon=function(e,t,n){return we.equalsEpsilon(this,e,t,n)};we.prototype.toString=function(){return`(${this.x}, ${this.y}, ${this.z})`};var u=we;function je(e,t,n,i){this.x=e??0,this.y=t??0,this.z=n??0,this.w=i??0}je.fromElements=function(e,t,n,i,o){return c(o)?(o.x=e,o.y=t,o.z=n,o.w=i,o):new je(e,t,n,i)};je.fromColor=function(e,t){return c(t)?(t.x=e.red,t.y=e.green,t.z=e.blue,t.w=e.alpha,t):new je(e.red,e.green,e.blue,e.alpha)};je.clone=function(e,t){if(c(e))return c(t)?(t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t):new je(e.x,e.y,e.z,e.w)};je.packedLength=4;je.pack=function(e,t,n){return n=n??0,t[n++]=e.x,t[n++]=e.y,t[n++]=e.z,t[n]=e.w,t};je.unpack=function(e,t,n){return t=t??0,c(n)||(n=new je),n.x=e[t++],n.y=e[t++],n.z=e[t++],n.w=e[t],n};je.packArray=function(e,t){let n=e.length,i=n*4;c(t)?!Array.isArray(t)&&t.length!==i||t.length!==i&&(t.length=i):t=new Array(i);for(let o=0;o<n;++o)je.pack(e[o],t,o*4);return t};je.unpackArray=function(e,t){let n=e.length;c(t)?t.length=n/4:t=new Array(n/4);for(let i=0;i<n;i+=4){let o=i/4;t[o]=je.unpack(e,i,t[o])}return t};je.fromArray=je.unpack;je.maximumComponent=function(e){return Math.max(e.x,e.y,e.z,e.w)};je.minimumComponent=function(e){return Math.min(e.x,e.y,e.z,e.w)};je.minimumByComponent=function(e,t,n){return n.x=Math.min(e.x,t.x),n.y=Math.min(e.y,t.y),n.z=Math.min(e.z,t.z),n.w=Math.min(e.w,t.w),n};je.maximumByComponent=function(e,t,n){return n.x=Math.max(e.x,t.x),n.y=Math.max(e.y,t.y),n.z=Math.max(e.z,t.z),n.w=Math.max(e.w,t.w),n};je.clamp=function(e,t,n,i){let o=w.clamp(e.x,t.x,n.x),r=w.clamp(e.y,t.y,n.y),a=w.clamp(e.z,t.z,n.z),s=w.clamp(e.w,t.w,n.w);return i.x=o,i.y=r,i.z=a,i.w=s,i};je.magnitudeSquared=function(e){return e.x*e.x+e.y*e.y+e.z*e.z+e.w*e.w};je.magnitude=function(e){return Math.sqrt(je.magnitudeSquared(e))};var XE=new je;je.distance=function(e,t){return je.subtract(e,t,XE),je.magnitude(XE)};je.distanceSquared=function(e,t){return je.subtract(e,t,XE),je.magnitudeSquared(XE)};je.normalize=function(e,t){let n=je.magnitude(e);return t.x=e.x/n,t.y=e.y/n,t.z=e.z/n,t.w=e.w/n,t};je.dot=function(e,t){return e.x*t.x+e.y*t.y+e.z*t.z+e.w*t.w};je.multiplyComponents=function(e,t,n){return n.x=e.x*t.x,n.y=e.y*t.y,n.z=e.z*t.z,n.w=e.w*t.w,n};je.divideComponents=function(e,t,n){return n.x=e.x/t.x,n.y=e.y/t.y,n.z=e.z/t.z,n.w=e.w/t.w,n};je.add=function(e,t,n){return n.x=e.x+t.x,n.y=e.y+t.y,n.z=e.z+t.z,n.w=e.w+t.w,n};je.subtract=function(e,t,n){return n.x=e.x-t.x,n.y=e.y-t.y,n.z=e.z-t.z,n.w=e.w-t.w,n};je.multiplyByScalar=function(e,t,n){return n.x=e.x*t,n.y=e.y*t,n.z=e.z*t,n.w=e.w*t,n};je.divideByScalar=function(e,t,n){return n.x=e.x/t,n.y=e.y/t,n.z=e.z/t,n.w=e.w/t,n};je.negate=function(e,t){return t.x=-e.x,t.y=-e.y,t.z=-e.z,t.w=-e.w,t};je.abs=function(e,t){return t.x=Math.abs(e.x),t.y=Math.abs(e.y),t.z=Math.abs(e.z),t.w=Math.abs(e.w),t};var Iv=new je;je.lerp=function(e,t,n,i){return je.multiplyByScalar(t,n,Iv),i=je.multiplyByScalar(e,1-n,i),je.add(Iv,i,i)};var C5=new je;je.mostOrthogonalAxis=function(e,t){let n=je.normalize(e,C5);return je.abs(n,n),n.x<=n.y?n.x<=n.z?n.x<=n.w?t=je.clone(je.UNIT_X,t):t=je.clone(je.UNIT_W,t):n.z<=n.w?t=je.clone(je.UNIT_Z,t):t=je.clone(je.UNIT_W,t):n.y<=n.z?n.y<=n.w?t=je.clone(je.UNIT_Y,t):t=je.clone(je.UNIT_W,t):n.z<=n.w?t=je.clone(je.UNIT_Z,t):t=je.clone(je.UNIT_W,t),t};je.equals=function(e,t){return e===t||c(e)&&c(t)&&e.x===t.x&&e.y===t.y&&e.z===t.z&&e.w===t.w};je.equalsArray=function(e,t,n){return e.x===t[n]&&e.y===t[n+1]&&e.z===t[n+2]&&e.w===t[n+3]};je.equalsEpsilon=function(e,t,n,i){return e===t||c(e)&&c(t)&&w.equalsEpsilon(e.x,t.x,n,i)&&w.equalsEpsilon(e.y,t.y,n,i)&&w.equalsEpsilon(e.z,t.z,n,i)&&w.equalsEpsilon(e.w,t.w,n,i)};je.ZERO=Object.freeze(new je(0,0,0,0));je.ONE=Object.freeze(new je(1,1,1,1));je.UNIT_X=Object.freeze(new je(1,0,0,0));je.UNIT_Y=Object.freeze(new je(0,1,0,0));je.UNIT_Z=Object.freeze(new je(0,0,1,0));je.UNIT_W=Object.freeze(new je(0,0,0,1));je.prototype.clone=function(e){return je.clone(this,e)};je.prototype.equals=function(e){return je.equals(this,e)};je.prototype.equalsEpsilon=function(e,t,n){return je.equalsEpsilon(this,e,t,n)};je.prototype.toString=function(){return`(${this.x}, ${this.y}, ${this.z}, ${this.w})`};var ix=new Float32Array(1),yr=new Uint8Array(ix.buffer),_5=new Uint32Array([287454020]),E5=new Uint8Array(_5.buffer),yv=E5[0]===68;je.packFloat=function(e,t){return c(t)||(t=new je),ix[0]=e,yv?(t.x=yr[0],t.y=yr[1],t.z=yr[2],t.w=yr[3]):(t.x=yr[3],t.y=yr[2],t.z=yr[1],t.w=yr[0]),t};je.unpackFloat=function(e){return yv?(yr[0]=e.x,yr[1]=e.y,yr[2]=e.z,yr[3]=e.w):(yr[0]=e.w,yr[1]=e.z,yr[2]=e.y,yr[3]=e.x),ix[0]};var se=je;var ox={};ox.EMPTY_OBJECT=Object.freeze({});ox.EMPTY_ARRAY=Object.freeze([]);var k=ox;function Qe(e,t,n,i,o,r,a,s,A){this[0]=e??0,this[1]=i??0,this[2]=a??0,this[3]=t??0,this[4]=o??0,this[5]=s??0,this[6]=n??0,this[7]=r??0,this[8]=A??0}Qe.packedLength=9;Qe.pack=function(e,t,n){return n=n??0,t[n++]=e[0],t[n++]=e[1],t[n++]=e[2],t[n++]=e[3],t[n++]=e[4],t[n++]=e[5],t[n++]=e[6],t[n++]=e[7],t[n++]=e[8],t};Qe.unpack=function(e,t,n){return t=t??0,c(n)||(n=new Qe),n[0]=e[t++],n[1]=e[t++],n[2]=e[t++],n[3]=e[t++],n[4]=e[t++],n[5]=e[t++],n[6]=e[t++],n[7]=e[t++],n[8]=e[t++],n};Qe.packArray=function(e,t){let n=e.length,i=n*9;c(t)?!Array.isArray(t)&&t.length!==i||t.length!==i&&(t.length=i):t=new Array(i);for(let o=0;o<n;++o)Qe.pack(e[o],t,o*9);return t};Qe.unpackArray=function(e,t){let n=e.length;c(t)?t.length=n/9:t=new Array(n/9);for(let i=0;i<n;i+=9){let o=i/9;t[o]=Qe.unpack(e,i,t[o])}return t};Qe.clone=function(e,t){if(c(e))return c(t)?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t):new Qe(e[0],e[3],e[6],e[1],e[4],e[7],e[2],e[5],e[8])};Qe.fromArray=Qe.unpack;Qe.fromColumnMajorArray=function(e,t){return Qe.clone(e,t)};Qe.fromRowMajorArray=function(e,t){return c(t)?(t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],t):new Qe(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8])};Qe.fromQuaternion=function(e,t){let n=e.x*e.x,i=e.x*e.y,o=e.x*e.z,r=e.x*e.w,a=e.y*e.y,s=e.y*e.z,A=e.y*e.w,l=e.z*e.z,f=e.z*e.w,h=e.w*e.w,m=n-a-l+h,p=2*(i-f),g=2*(o+A),C=2*(i+f),_=-n+a-l+h,E=2*(s-r),I=2*(o-A),y=2*(s+r),b=-n-a+l+h;return c(t)?(t[0]=m,t[1]=C,t[2]=I,t[3]=p,t[4]=_,t[5]=y,t[6]=g,t[7]=E,t[8]=b,t):new Qe(m,p,g,C,_,E,I,y,b)};Qe.fromHeadingPitchRoll=function(e,t){let n=Math.cos(-e.pitch),i=Math.cos(-e.heading),o=Math.cos(e.roll),r=Math.sin(-e.pitch),a=Math.sin(-e.heading),s=Math.sin(e.roll),A=n*i,l=-o*a+s*r*i,f=s*a+o*r*i,h=n*a,m=o*i+s*r*a,p=-s*i+o*r*a,g=-r,C=s*n,_=o*n;return c(t)?(t[0]=A,t[1]=h,t[2]=g,t[3]=l,t[4]=m,t[5]=C,t[6]=f,t[7]=p,t[8]=_,t):new Qe(A,l,f,h,m,p,g,C,_)};Qe.fromScale=function(e,t){return c(t)?(t[0]=e.x,t[1]=0,t[2]=0,t[3]=0,t[4]=e.y,t[5]=0,t[6]=0,t[7]=0,t[8]=e.z,t):new Qe(e.x,0,0,0,e.y,0,0,0,e.z)};Qe.fromUniformScale=function(e,t){return c(t)?(t[0]=e,t[1]=0,t[2]=0,t[3]=0,t[4]=e,t[5]=0,t[6]=0,t[7]=0,t[8]=e,t):new Qe(e,0,0,0,e,0,0,0,e)};Qe.fromCrossProduct=function(e,t){return c(t)?(t[0]=0,t[1]=e.z,t[2]=-e.y,t[3]=-e.z,t[4]=0,t[5]=e.x,t[6]=e.y,t[7]=-e.x,t[8]=0,t):new Qe(0,-e.z,e.y,e.z,0,-e.x,-e.y,e.x,0)};Qe.fromRotationX=function(e,t){let n=Math.cos(e),i=Math.sin(e);return c(t)?(t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=n,t[5]=i,t[6]=0,t[7]=-i,t[8]=n,t):new Qe(1,0,0,0,n,-i,0,i,n)};Qe.fromRotationY=function(e,t){let n=Math.cos(e),i=Math.sin(e);return c(t)?(t[0]=n,t[1]=0,t[2]=-i,t[3]=0,t[4]=1,t[5]=0,t[6]=i,t[7]=0,t[8]=n,t):new Qe(n,0,i,0,1,0,-i,0,n)};Qe.fromRotationZ=function(e,t){let n=Math.cos(e),i=Math.sin(e);return c(t)?(t[0]=n,t[1]=i,t[2]=0,t[3]=-i,t[4]=n,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t):new Qe(n,-i,0,i,n,0,0,0,1)};Qe.toArray=function(e,t){return c(t)?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t):[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8]]};Qe.getElementIndex=function(e,t){return e*3+t};Qe.getColumn=function(e,t,n){let i=t*3,o=e[i],r=e[i+1],a=e[i+2];return n.x=o,n.y=r,n.z=a,n};Qe.setColumn=function(e,t,n,i){i=Qe.clone(e,i);let o=t*3;return i[o]=n.x,i[o+1]=n.y,i[o+2]=n.z,i};Qe.getRow=function(e,t,n){let i=e[t],o=e[t+3],r=e[t+6];return n.x=i,n.y=o,n.z=r,n};Qe.setRow=function(e,t,n,i){return i=Qe.clone(e,i),i[t]=n.x,i[t+3]=n.y,i[t+6]=n.z,i};var I5=new u;Qe.setScale=function(e,t,n){let i=Qe.getScale(e,I5),o=t.x/i.x,r=t.y/i.y,a=t.z/i.z;return n[0]=e[0]*o,n[1]=e[1]*o,n[2]=e[2]*o,n[3]=e[3]*r,n[4]=e[4]*r,n[5]=e[5]*r,n[6]=e[6]*a,n[7]=e[7]*a,n[8]=e[8]*a,n};var y5=new u;Qe.setUniformScale=function(e,t,n){let i=Qe.getScale(e,y5),o=t/i.x,r=t/i.y,a=t/i.z;return n[0]=e[0]*o,n[1]=e[1]*o,n[2]=e[2]*o,n[3]=e[3]*r,n[4]=e[4]*r,n[5]=e[5]*r,n[6]=e[6]*a,n[7]=e[7]*a,n[8]=e[8]*a,n};var rx=new u;Qe.getScale=function(e,t){return t.x=u.magnitude(u.fromElements(e[0],e[1],e[2],rx)),t.y=u.magnitude(u.fromElements(e[3],e[4],e[5],rx)),t.z=u.magnitude(u.fromElements(e[6],e[7],e[8],rx)),t};var bv=new u;Qe.getMaximumScale=function(e){return Qe.getScale(e,bv),u.maximumComponent(bv)};var b5=new u;Qe.setRotation=function(e,t,n){let i=Qe.getScale(e,b5);return n[0]=t[0]*i.x,n[1]=t[1]*i.x,n[2]=t[2]*i.x,n[3]=t[3]*i.y,n[4]=t[4]*i.y,n[5]=t[5]*i.y,n[6]=t[6]*i.z,n[7]=t[7]*i.z,n[8]=t[8]*i.z,n};var B5=new u;Qe.getRotation=function(e,t){let n=Qe.getScale(e,B5);return t[0]=e[0]/n.x,t[1]=e[1]/n.x,t[2]=e[2]/n.x,t[3]=e[3]/n.y,t[4]=e[4]/n.y,t[5]=e[5]/n.y,t[6]=e[6]/n.z,t[7]=e[7]/n.z,t[8]=e[8]/n.z,t};Qe.multiply=function(e,t,n){let i=e[0]*t[0]+e[3]*t[1]+e[6]*t[2],o=e[1]*t[0]+e[4]*t[1]+e[7]*t[2],r=e[2]*t[0]+e[5]*t[1]+e[8]*t[2],a=e[0]*t[3]+e[3]*t[4]+e[6]*t[5],s=e[1]*t[3]+e[4]*t[4]+e[7]*t[5],A=e[2]*t[3]+e[5]*t[4]+e[8]*t[5],l=e[0]*t[6]+e[3]*t[7]+e[6]*t[8],f=e[1]*t[6]+e[4]*t[7]+e[7]*t[8],h=e[2]*t[6]+e[5]*t[7]+e[8]*t[8];return n[0]=i,n[1]=o,n[2]=r,n[3]=a,n[4]=s,n[5]=A,n[6]=l,n[7]=f,n[8]=h,n};Qe.add=function(e,t,n){return n[0]=e[0]+t[0],n[1]=e[1]+t[1],n[2]=e[2]+t[2],n[3]=e[3]+t[3],n[4]=e[4]+t[4],n[5]=e[5]+t[5],n[6]=e[6]+t[6],n[7]=e[7]+t[7],n[8]=e[8]+t[8],n};Qe.subtract=function(e,t,n){return n[0]=e[0]-t[0],n[1]=e[1]-t[1],n[2]=e[2]-t[2],n[3]=e[3]-t[3],n[4]=e[4]-t[4],n[5]=e[5]-t[5],n[6]=e[6]-t[6],n[7]=e[7]-t[7],n[8]=e[8]-t[8],n};Qe.multiplyByVector=function(e,t,n){let i=t.x,o=t.y,r=t.z,a=e[0]*i+e[3]*o+e[6]*r,s=e[1]*i+e[4]*o+e[7]*r,A=e[2]*i+e[5]*o+e[8]*r;return n.x=a,n.y=s,n.z=A,n};Qe.multiplyByScalar=function(e,t,n){return n[0]=e[0]*t,n[1]=e[1]*t,n[2]=e[2]*t,n[3]=e[3]*t,n[4]=e[4]*t,n[5]=e[5]*t,n[6]=e[6]*t,n[7]=e[7]*t,n[8]=e[8]*t,n};Qe.multiplyByScale=function(e,t,n){return n[0]=e[0]*t.x,n[1]=e[1]*t.x,n[2]=e[2]*t.x,n[3]=e[3]*t.y,n[4]=e[4]*t.y,n[5]=e[5]*t.y,n[6]=e[6]*t.z,n[7]=e[7]*t.z,n[8]=e[8]*t.z,n};Qe.multiplyByUniformScale=function(e,t,n){return n[0]=e[0]*t,n[1]=e[1]*t,n[2]=e[2]*t,n[3]=e[3]*t,n[4]=e[4]*t,n[5]=e[5]*t,n[6]=e[6]*t,n[7]=e[7]*t,n[8]=e[8]*t,n};Qe.negate=function(e,t){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=-e[7],t[8]=-e[8],t};Qe.transpose=function(e,t){let n=e[0],i=e[3],o=e[6],r=e[1],a=e[4],s=e[7],A=e[2],l=e[5],f=e[8];return t[0]=n,t[1]=i,t[2]=o,t[3]=r,t[4]=a,t[5]=s,t[6]=A,t[7]=l,t[8]=f,t};function x5(e){let t=0;for(let n=0;n<9;++n){let i=e[n];t+=i*i}return Math.sqrt(t)}var ax=[1,0,0],sx=[2,2,1];function T5(e){let t=0;for(let n=0;n<3;++n){let i=e[Qe.getElementIndex(sx[n],ax[n])];t+=2*i*i}return Math.sqrt(t)}function S5(e,t){let n=w.EPSILON15,i=0,o=1;for(let l=0;l<3;++l){let f=Math.abs(e[Qe.getElementIndex(sx[l],ax[l])]);f>i&&(o=l,i=f)}let r=1,a=0,s=ax[o],A=sx[o];if(Math.abs(e[Qe.getElementIndex(A,s)])>n){let l=e[Qe.getElementIndex(A,A)],f=e[Qe.getElementIndex(s,s)],h=e[Qe.getElementIndex(A,s)],m=(l-f)/2/h,p;m<0?p=-1/(-m+Math.sqrt(1+m*m)):p=1/(m+Math.sqrt(1+m*m)),r=1/Math.sqrt(1+p*p),a=p*r}return t=Qe.clone(Qe.IDENTITY,t),t[Qe.getElementIndex(s,s)]=t[Qe.getElementIndex(A,A)]=r,t[Qe.getElementIndex(A,s)]=a,t[Qe.getElementIndex(s,A)]=-a,t}var ZE=new Qe,Bv=new Qe;Qe.computeEigenDecomposition=function(e,t){let n=w.EPSILON20,i=10,o=0,r=0;c(t)||(t={});let a=t.unitary=Qe.clone(Qe.IDENTITY,t.unitary),s=t.diagonal=Qe.clone(e,t.diagonal),A=n*x5(s);for(;r<i&&T5(s)>A;)S5(s,ZE),Qe.transpose(ZE,Bv),Qe.multiply(s,ZE,s),Qe.multiply(Bv,s,s),Qe.multiply(a,ZE,a),++o>2&&(++r,o=0);return t};Qe.abs=function(e,t){return t[0]=Math.abs(e[0]),t[1]=Math.abs(e[1]),t[2]=Math.abs(e[2]),t[3]=Math.abs(e[3]),t[4]=Math.abs(e[4]),t[5]=Math.abs(e[5]),t[6]=Math.abs(e[6]),t[7]=Math.abs(e[7]),t[8]=Math.abs(e[8]),t};Qe.determinant=function(e){let t=e[0],n=e[3],i=e[6],o=e[1],r=e[4],a=e[7],s=e[2],A=e[5],l=e[8];return t*(r*l-A*a)+o*(A*i-n*l)+s*(n*a-r*i)};Qe.inverse=function(e,t){let n=e[0],i=e[1],o=e[2],r=e[3],a=e[4],s=e[5],A=e[6],l=e[7],f=e[8],h=Qe.determinant(e);t[0]=a*f-l*s,t[1]=l*o-i*f,t[2]=i*s-a*o,t[3]=A*s-r*f,t[4]=n*f-A*o,t[5]=r*o-n*s,t[6]=r*l-A*a,t[7]=A*i-n*l,t[8]=n*a-r*i;let m=1/h;return Qe.multiplyByScalar(t,m,t)};var w5=new Qe;Qe.inverseTranspose=function(e,t){return Qe.inverse(Qe.transpose(e,w5),t)};Qe.equals=function(e,t){return e===t||c(e)&&c(t)&&e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]};Qe.equalsEpsilon=function(e,t,n){return n=n??0,e===t||c(e)&&c(t)&&Math.abs(e[0]-t[0])<=n&&Math.abs(e[1]-t[1])<=n&&Math.abs(e[2]-t[2])<=n&&Math.abs(e[3]-t[3])<=n&&Math.abs(e[4]-t[4])<=n&&Math.abs(e[5]-t[5])<=n&&Math.abs(e[6]-t[6])<=n&&Math.abs(e[7]-t[7])<=n&&Math.abs(e[8]-t[8])<=n};Qe.IDENTITY=Object.freeze(new Qe(1,0,0,0,1,0,0,0,1));Qe.ZERO=Object.freeze(new Qe(0,0,0,0,0,0,0,0,0));Qe.COLUMN0ROW0=0;Qe.COLUMN0ROW1=1;Qe.COLUMN0ROW2=2;Qe.COLUMN1ROW0=3;Qe.COLUMN1ROW1=4;Qe.COLUMN1ROW2=5;Qe.COLUMN2ROW0=6;Qe.COLUMN2ROW1=7;Qe.COLUMN2ROW2=8;Object.defineProperties(Qe.prototype,{length:{get:function(){return Qe.packedLength}}});Qe.prototype.clone=function(e){return Qe.clone(this,e)};Qe.prototype.equals=function(e){return Qe.equals(this,e)};Qe.equalsArray=function(e,t,n){return e[0]===t[n]&&e[1]===t[n+1]&&e[2]===t[n+2]&&e[3]===t[n+3]&&e[4]===t[n+4]&&e[5]===t[n+5]&&e[6]===t[n+6]&&e[7]===t[n+7]&&e[8]===t[n+8]};Qe.prototype.equalsEpsilon=function(e,t){return Qe.equalsEpsilon(this,e,t)};Qe.prototype.toString=function(){return`(${this[0]}, ${this[3]}, ${this[6]})
(${this[1]}, ${this[4]}, ${this[7]})
(${this[2]}, ${this[5]}, ${this[8]})`};var J=Qe;function Dg(e){this.name="RuntimeError",this.message=e;let t;try{throw new Error}catch(n){t=n.stack}this.stack=t}c(Object.create)&&(Dg.prototype=Object.create(Error.prototype),Dg.prototype.constructor=Dg);Dg.prototype.toString=function(){let e=`${this.name}: ${this.message}`;return c(this.stack)&&(e+=`
${this.stack.toString()}`),e};var oe=Dg;function De(e,t,n,i,o,r,a,s,A,l,f,h,m,p,g,C){this[0]=e??0,this[1]=o??0,this[2]=A??0,this[3]=m??0,this[4]=t??0,this[5]=r??0,this[6]=l??0,this[7]=p??0,this[8]=n??0,this[9]=a??0,this[10]=f??0,this[11]=g??0,this[12]=i??0,this[13]=s??0,this[14]=h??0,this[15]=C??0}De.packedLength=16;De.pack=function(e,t,n){return n=n??0,t[n++]=e[0],t[n++]=e[1],t[n++]=e[2],t[n++]=e[3],t[n++]=e[4],t[n++]=e[5],t[n++]=e[6],t[n++]=e[7],t[n++]=e[8],t[n++]=e[9],t[n++]=e[10],t[n++]=e[11],t[n++]=e[12],t[n++]=e[13],t[n++]=e[14],t[n]=e[15],t};De.unpack=function(e,t,n){return t=t??0,c(n)||(n=new De),n[0]=e[t++],n[1]=e[t++],n[2]=e[t++],n[3]=e[t++],n[4]=e[t++],n[5]=e[t++],n[6]=e[t++],n[7]=e[t++],n[8]=e[t++],n[9]=e[t++],n[10]=e[t++],n[11]=e[t++],n[12]=e[t++],n[13]=e[t++],n[14]=e[t++],n[15]=e[t],n};De.packArray=function(e,t){let n=e.length,i=n*16;c(t)?!Array.isArray(t)&&t.length!==i||t.length!==i&&(t.length=i):t=new Array(i);for(let o=0;o<n;++o)De.pack(e[o],t,o*16);return t};De.unpackArray=function(e,t){let n=e.length;c(t)?t.length=n/16:t=new Array(n/16);for(let i=0;i<n;i+=16){let o=i/16;t[o]=De.unpack(e,i,t[o])}return t};De.clone=function(e,t){if(c(e))return c(t)?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t):new De(e[0],e[4],e[8],e[12],e[1],e[5],e[9],e[13],e[2],e[6],e[10],e[14],e[3],e[7],e[11],e[15])};De.fromArray=De.unpack;De.fromColumnMajorArray=function(e,t){return De.clone(e,t)};De.fromRowMajorArray=function(e,t){return c(t)?(t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15],t):new De(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])};De.fromRotationTranslation=function(e,t,n){return t=t??u.ZERO,c(n)?(n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=0,n[4]=e[3],n[5]=e[4],n[6]=e[5],n[7]=0,n[8]=e[6],n[9]=e[7],n[10]=e[8],n[11]=0,n[12]=t.x,n[13]=t.y,n[14]=t.z,n[15]=1,n):new De(e[0],e[3],e[6],t.x,e[1],e[4],e[7],t.y,e[2],e[5],e[8],t.z,0,0,0,1)};De.fromTranslationQuaternionRotationScale=function(e,t,n,i){c(i)||(i=new De);let o=n.x,r=n.y,a=n.z,s=t.x*t.x,A=t.x*t.y,l=t.x*t.z,f=t.x*t.w,h=t.y*t.y,m=t.y*t.z,p=t.y*t.w,g=t.z*t.z,C=t.z*t.w,_=t.w*t.w,E=s-h-g+_,I=2*(A-C),y=2*(l+p),b=2*(A+C),x=-s+h-g+_,S=2*(m-f),P=2*(l-p),D=2*(m+f),Q=-s-h+g+_;return i[0]=E*o,i[1]=b*o,i[2]=P*o,i[3]=0,i[4]=I*r,i[5]=x*r,i[6]=D*r,i[7]=0,i[8]=y*a,i[9]=S*a,i[10]=Q*a,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,i};De.fromTranslationRotationScale=function(e,t){return De.fromTranslationQuaternionRotationScale(e.translation,e.rotation,e.scale,t)};De.fromTranslation=function(e,t){return De.fromRotationTranslation(J.IDENTITY,e,t)};De.fromScale=function(e,t){return c(t)?(t[0]=e.x,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e.y,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e.z,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t):new De(e.x,0,0,0,0,e.y,0,0,0,0,e.z,0,0,0,0,1)};De.fromUniformScale=function(e,t){return c(t)?(t[0]=e,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t):new De(e,0,0,0,0,e,0,0,0,0,e,0,0,0,0,1)};De.fromRotation=function(e,t){return c(t)||(t=new De),t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=0,t[4]=e[3],t[5]=e[4],t[6]=e[5],t[7]=0,t[8]=e[6],t[9]=e[7],t[10]=e[8],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t};var Uh=new u,Gh=new u,Qg=new u;De.fromCamera=function(e,t){let n=e.position,i=e.direction,o=e.up;u.normalize(i,Uh),u.normalize(u.cross(Uh,o,Gh),Gh),u.normalize(u.cross(Gh,Uh,Qg),Qg);let r=Gh.x,a=Gh.y,s=Gh.z,A=Uh.x,l=Uh.y,f=Uh.z,h=Qg.x,m=Qg.y,p=Qg.z,g=n.x,C=n.y,_=n.z,E=r*-g+a*-C+s*-_,I=h*-g+m*-C+p*-_,y=A*g+l*C+f*_;return c(t)?(t[0]=r,t[1]=h,t[2]=-A,t[3]=0,t[4]=a,t[5]=m,t[6]=-l,t[7]=0,t[8]=s,t[9]=p,t[10]=-f,t[11]=0,t[12]=E,t[13]=I,t[14]=y,t[15]=1,t):new De(r,a,s,E,h,m,p,I,-A,-l,-f,y,0,0,0,1)};De.computePerspectiveFieldOfView=function(e,t,n,i,o){let a=1/Math.tan(e*.5),s=a/t,A=(i+n)/(n-i),l=2*i*n/(n-i);return o[0]=s,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=a,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=A,o[11]=-1,o[12]=0,o[13]=0,o[14]=l,o[15]=0,o};De.computeOrthographicOffCenter=function(e,t,n,i,o,r,a){let s=1/(t-e),A=1/(i-n),l=1/(r-o),f=-(t+e)*s,h=-(i+n)*A,m=-(r+o)*l;return s*=2,A*=2,l*=-2,a[0]=s,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=A,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=l,a[11]=0,a[12]=f,a[13]=h,a[14]=m,a[15]=1,a};De.computePerspectiveOffCenter=function(e,t,n,i,o,r,a){let s=2*o/(t-e),A=2*o/(i-n),l=(t+e)/(t-e),f=(i+n)/(i-n),h=-(r+o)/(r-o),m=-1,p=-2*r*o/(r-o);return a[0]=s,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=A,a[6]=0,a[7]=0,a[8]=l,a[9]=f,a[10]=h,a[11]=m,a[12]=0,a[13]=0,a[14]=p,a[15]=0,a};De.computeInfinitePerspectiveOffCenter=function(e,t,n,i,o,r){let a=2*o/(t-e),s=2*o/(i-n),A=(t+e)/(t-e),l=(i+n)/(i-n),f=-1,h=-1,m=-2*o;return r[0]=a,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=s,r[6]=0,r[7]=0,r[8]=A,r[9]=l,r[10]=f,r[11]=h,r[12]=0,r[13]=0,r[14]=m,r[15]=0,r};De.computeViewportTransformation=function(e,t,n,i){c(i)||(i=new De),e=e??k.EMPTY_OBJECT;let o=e.x??0,r=e.y??0,a=e.width??0,s=e.height??0;t=t??0,n=n??1;let A=a*.5,l=s*.5,f=(n-t)*.5,h=A,m=l,p=f,g=o+A,C=r+l,_=t+f,E=1;return i[0]=h,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=m,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=p,i[11]=0,i[12]=g,i[13]=C,i[14]=_,i[15]=E,i};De.computeView=function(e,t,n,i,o){return o[0]=i.x,o[1]=n.x,o[2]=-t.x,o[3]=0,o[4]=i.y,o[5]=n.y,o[6]=-t.y,o[7]=0,o[8]=i.z,o[9]=n.z,o[10]=-t.z,o[11]=0,o[12]=-u.dot(i,e),o[13]=-u.dot(n,e),o[14]=u.dot(t,e),o[15]=1,o};De.toArray=function(e,t){return c(t)?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t):[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15]]};De.getElementIndex=function(e,t){return e*4+t};De.getColumn=function(e,t,n){let i=t*4,o=e[i],r=e[i+1],a=e[i+2],s=e[i+3];return n.x=o,n.y=r,n.z=a,n.w=s,n};De.setColumn=function(e,t,n,i){i=De.clone(e,i);let o=t*4;return i[o]=n.x,i[o+1]=n.y,i[o+2]=n.z,i[o+3]=n.w,i};De.getRow=function(e,t,n){let i=e[t],o=e[t+4],r=e[t+8],a=e[t+12];return n.x=i,n.y=o,n.z=r,n.w=a,n};De.setRow=function(e,t,n,i){return i=De.clone(e,i),i[t]=n.x,i[t+4]=n.y,i[t+8]=n.z,i[t+12]=n.w,i};De.setTranslation=function(e,t,n){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n[8]=e[8],n[9]=e[9],n[10]=e[10],n[11]=e[11],n[12]=t.x,n[13]=t.y,n[14]=t.z,n[15]=e[15],n};var D5=new u;De.setScale=function(e,t,n){let i=De.getScale(e,D5),o=t.x/i.x,r=t.y/i.y,a=t.z/i.z;return n[0]=e[0]*o,n[1]=e[1]*o,n[2]=e[2]*o,n[3]=e[3],n[4]=e[4]*r,n[5]=e[5]*r,n[6]=e[6]*r,n[7]=e[7],n[8]=e[8]*a,n[9]=e[9]*a,n[10]=e[10]*a,n[11]=e[11],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15],n};var Q5=new u;De.setUniformScale=function(e,t,n){let i=De.getScale(e,Q5),o=t/i.x,r=t/i.y,a=t/i.z;return n[0]=e[0]*o,n[1]=e[1]*o,n[2]=e[2]*o,n[3]=e[3],n[4]=e[4]*r,n[5]=e[5]*r,n[6]=e[6]*r,n[7]=e[7],n[8]=e[8]*a,n[9]=e[9]*a,n[10]=e[10]*a,n[11]=e[11],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15],n};var cx=new u;De.getScale=function(e,t){return t.x=u.magnitude(u.fromElements(e[0],e[1],e[2],cx)),t.y=u.magnitude(u.fromElements(e[4],e[5],e[6],cx)),t.z=u.magnitude(u.fromElements(e[8],e[9],e[10],cx)),t};var xv=new u;De.getMaximumScale=function(e){return De.getScale(e,xv),u.maximumComponent(xv)};var R5=new u;De.setRotation=function(e,t,n){let i=De.getScale(e,R5);return n[0]=t[0]*i.x,n[1]=t[1]*i.x,n[2]=t[2]*i.x,n[3]=e[3],n[4]=t[3]*i.y,n[5]=t[4]*i.y,n[6]=t[5]*i.y,n[7]=e[7],n[8]=t[6]*i.z,n[9]=t[7]*i.z,n[10]=t[8]*i.z,n[11]=e[11],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15],n};var v5=new u;De.getRotation=function(e,t){let n=De.getScale(e,v5);return t[0]=e[0]/n.x,t[1]=e[1]/n.x,t[2]=e[2]/n.x,t[3]=e[4]/n.y,t[4]=e[5]/n.y,t[5]=e[6]/n.y,t[6]=e[8]/n.z,t[7]=e[9]/n.z,t[8]=e[10]/n.z,t};De.multiply=function(e,t,n){let i=e[0],o=e[1],r=e[2],a=e[3],s=e[4],A=e[5],l=e[6],f=e[7],h=e[8],m=e[9],p=e[10],g=e[11],C=e[12],_=e[13],E=e[14],I=e[15],y=t[0],b=t[1],x=t[2],S=t[3],P=t[4],D=t[5],Q=t[6],v=t[7],d=t[8],B=t[9],T=t[10],R=t[11],L=t[12],G=t[13],q=t[14],z=t[15],K=i*y+s*b+h*x+C*S,ie=o*y+A*b+m*x+_*S,le=r*y+l*b+p*x+E*S,de=a*y+f*b+g*x+I*S,he=i*P+s*D+h*Q+C*v,Se=o*P+A*D+m*Q+_*v,be=r*P+l*D+p*Q+E*v,_e=a*P+f*D+g*Q+I*v,Ct=i*d+s*B+h*T+C*R,ft=o*d+A*B+m*T+_*R,At=r*d+l*B+p*T+E*R,at=a*d+f*B+g*T+I*R,Xe=i*L+s*G+h*q+C*z,wt=o*L+A*G+m*q+_*z,zt=r*L+l*G+p*q+E*z,ti=a*L+f*G+g*q+I*z;return n[0]=K,n[1]=ie,n[2]=le,n[3]=de,n[4]=he,n[5]=Se,n[6]=be,n[7]=_e,n[8]=Ct,n[9]=ft,n[10]=At,n[11]=at,n[12]=Xe,n[13]=wt,n[14]=zt,n[15]=ti,n};De.add=function(e,t,n){return n[0]=e[0]+t[0],n[1]=e[1]+t[1],n[2]=e[2]+t[2],n[3]=e[3]+t[3],n[4]=e[4]+t[4],n[5]=e[5]+t[5],n[6]=e[6]+t[6],n[7]=e[7]+t[7],n[8]=e[8]+t[8],n[9]=e[9]+t[9],n[10]=e[10]+t[10],n[11]=e[11]+t[11],n[12]=e[12]+t[12],n[13]=e[13]+t[13],n[14]=e[14]+t[14],n[15]=e[15]+t[15],n};De.subtract=function(e,t,n){return n[0]=e[0]-t[0],n[1]=e[1]-t[1],n[2]=e[2]-t[2],n[3]=e[3]-t[3],n[4]=e[4]-t[4],n[5]=e[5]-t[5],n[6]=e[6]-t[6],n[7]=e[7]-t[7],n[8]=e[8]-t[8],n[9]=e[9]-t[9],n[10]=e[10]-t[10],n[11]=e[11]-t[11],n[12]=e[12]-t[12],n[13]=e[13]-t[13],n[14]=e[14]-t[14],n[15]=e[15]-t[15],n};De.multiplyTransformation=function(e,t,n){let i=e[0],o=e[1],r=e[2],a=e[4],s=e[5],A=e[6],l=e[8],f=e[9],h=e[10],m=e[12],p=e[13],g=e[14],C=t[0],_=t[1],E=t[2],I=t[4],y=t[5],b=t[6],x=t[8],S=t[9],P=t[10],D=t[12],Q=t[13],v=t[14],d=i*C+a*_+l*E,B=o*C+s*_+f*E,T=r*C+A*_+h*E,R=i*I+a*y+l*b,L=o*I+s*y+f*b,G=r*I+A*y+h*b,q=i*x+a*S+l*P,z=o*x+s*S+f*P,K=r*x+A*S+h*P,ie=i*D+a*Q+l*v+m,le=o*D+s*Q+f*v+p,de=r*D+A*Q+h*v+g;return n[0]=d,n[1]=B,n[2]=T,n[3]=0,n[4]=R,n[5]=L,n[6]=G,n[7]=0,n[8]=q,n[9]=z,n[10]=K,n[11]=0,n[12]=ie,n[13]=le,n[14]=de,n[15]=1,n};De.multiplyByMatrix3=function(e,t,n){let i=e[0],o=e[1],r=e[2],a=e[4],s=e[5],A=e[6],l=e[8],f=e[9],h=e[10],m=t[0],p=t[1],g=t[2],C=t[3],_=t[4],E=t[5],I=t[6],y=t[7],b=t[8],x=i*m+a*p+l*g,S=o*m+s*p+f*g,P=r*m+A*p+h*g,D=i*C+a*_+l*E,Q=o*C+s*_+f*E,v=r*C+A*_+h*E,d=i*I+a*y+l*b,B=o*I+s*y+f*b,T=r*I+A*y+h*b;return n[0]=x,n[1]=S,n[2]=P,n[3]=0,n[4]=D,n[5]=Q,n[6]=v,n[7]=0,n[8]=d,n[9]=B,n[10]=T,n[11]=0,n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15],n};De.multiplyByTranslation=function(e,t,n){let i=t.x,o=t.y,r=t.z,a=i*e[0]+o*e[4]+r*e[8]+e[12],s=i*e[1]+o*e[5]+r*e[9]+e[13],A=i*e[2]+o*e[6]+r*e[10]+e[14];return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n[8]=e[8],n[9]=e[9],n[10]=e[10],n[11]=e[11],n[12]=a,n[13]=s,n[14]=A,n[15]=e[15],n};De.multiplyByScale=function(e,t,n){let i=t.x,o=t.y,r=t.z;return i===1&&o===1&&r===1?De.clone(e,n):(n[0]=i*e[0],n[1]=i*e[1],n[2]=i*e[2],n[3]=e[3],n[4]=o*e[4],n[5]=o*e[5],n[6]=o*e[6],n[7]=e[7],n[8]=r*e[8],n[9]=r*e[9],n[10]=r*e[10],n[11]=e[11],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15],n)};De.multiplyByUniformScale=function(e,t,n){return n[0]=e[0]*t,n[1]=e[1]*t,n[2]=e[2]*t,n[3]=e[3],n[4]=e[4]*t,n[5]=e[5]*t,n[6]=e[6]*t,n[7]=e[7],n[8]=e[8]*t,n[9]=e[9]*t,n[10]=e[10]*t,n[11]=e[11],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15],n};De.multiplyByVector=function(e,t,n){let i=t.x,o=t.y,r=t.z,a=t.w,s=e[0]*i+e[4]*o+e[8]*r+e[12]*a,A=e[1]*i+e[5]*o+e[9]*r+e[13]*a,l=e[2]*i+e[6]*o+e[10]*r+e[14]*a,f=e[3]*i+e[7]*o+e[11]*r+e[15]*a;return n.x=s,n.y=A,n.z=l,n.w=f,n};De.multiplyByPointAsVector=function(e,t,n){let i=t.x,o=t.y,r=t.z,a=e[0]*i+e[4]*o+e[8]*r,s=e[1]*i+e[5]*o+e[9]*r,A=e[2]*i+e[6]*o+e[10]*r;return n.x=a,n.y=s,n.z=A,n};De.multiplyByPoint=function(e,t,n){let i=t.x,o=t.y,r=t.z,a=e[0]*i+e[4]*o+e[8]*r+e[12],s=e[1]*i+e[5]*o+e[9]*r+e[13],A=e[2]*i+e[6]*o+e[10]*r+e[14];return n.x=a,n.y=s,n.z=A,n};De.multiplyByScalar=function(e,t,n){return n[0]=e[0]*t,n[1]=e[1]*t,n[2]=e[2]*t,n[3]=e[3]*t,n[4]=e[4]*t,n[5]=e[5]*t,n[6]=e[6]*t,n[7]=e[7]*t,n[8]=e[8]*t,n[9]=e[9]*t,n[10]=e[10]*t,n[11]=e[11]*t,n[12]=e[12]*t,n[13]=e[13]*t,n[14]=e[14]*t,n[15]=e[15]*t,n};De.negate=function(e,t){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=-e[7],t[8]=-e[8],t[9]=-e[9],t[10]=-e[10],t[11]=-e[11],t[12]=-e[12],t[13]=-e[13],t[14]=-e[14],t[15]=-e[15],t};De.transpose=function(e,t){let n=e[1],i=e[2],o=e[3],r=e[6],a=e[7],s=e[11];return t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=i,t[9]=r,t[10]=e[10],t[11]=e[14],t[12]=o,t[13]=a,t[14]=s,t[15]=e[15],t};De.abs=function(e,t){return t[0]=Math.abs(e[0]),t[1]=Math.abs(e[1]),t[2]=Math.abs(e[2]),t[3]=Math.abs(e[3]),t[4]=Math.abs(e[4]),t[5]=Math.abs(e[5]),t[6]=Math.abs(e[6]),t[7]=Math.abs(e[7]),t[8]=Math.abs(e[8]),t[9]=Math.abs(e[9]),t[10]=Math.abs(e[10]),t[11]=Math.abs(e[11]),t[12]=Math.abs(e[12]),t[13]=Math.abs(e[13]),t[14]=Math.abs(e[14]),t[15]=Math.abs(e[15]),t};De.equals=function(e,t){return e===t||c(e)&&c(t)&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[3]===t[3]&&e[7]===t[7]&&e[11]===t[11]&&e[15]===t[15]};De.equalsEpsilon=function(e,t,n){return n=n??0,e===t||c(e)&&c(t)&&Math.abs(e[0]-t[0])<=n&&Math.abs(e[1]-t[1])<=n&&Math.abs(e[2]-t[2])<=n&&Math.abs(e[3]-t[3])<=n&&Math.abs(e[4]-t[4])<=n&&Math.abs(e[5]-t[5])<=n&&Math.abs(e[6]-t[6])<=n&&Math.abs(e[7]-t[7])<=n&&Math.abs(e[8]-t[8])<=n&&Math.abs(e[9]-t[9])<=n&&Math.abs(e[10]-t[10])<=n&&Math.abs(e[11]-t[11])<=n&&Math.abs(e[12]-t[12])<=n&&Math.abs(e[13]-t[13])<=n&&Math.abs(e[14]-t[14])<=n&&Math.abs(e[15]-t[15])<=n};De.getTranslation=function(e,t){return t.x=e[12],t.y=e[13],t.z=e[14],t};De.getMatrix3=function(e,t){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t};var P5=new J,M5=new J,O5=new se,L5=new se(0,0,0,1);De.inverse=function(e,t){let n=e[0],i=e[4],o=e[8],r=e[12],a=e[1],s=e[5],A=e[9],l=e[13],f=e[2],h=e[6],m=e[10],p=e[14],g=e[3],C=e[7],_=e[11],E=e[15],I=m*E,y=p*_,b=h*E,x=p*C,S=h*_,P=m*C,D=f*E,Q=p*g,v=f*_,d=m*g,B=f*C,T=h*g,R=I*s+x*A+S*l-(y*s+b*A+P*l),L=y*a+D*A+d*l-(I*a+Q*A+v*l),G=b*a+Q*s+B*l-(x*a+D*s+T*l),q=P*a+v*s+T*A-(S*a+d*s+B*A),z=y*i+b*o+P*r-(I*i+x*o+S*r),K=I*n+Q*o+v*r-(y*n+D*o+d*r),ie=x*n+D*i+T*r-(b*n+Q*i+B*r),le=S*n+d*i+B*o-(P*n+v*i+T*o);I=o*l,y=r*A,b=i*l,x=r*s,S=i*A,P=o*s,D=n*l,Q=r*a,v=n*A,d=o*a,B=n*s,T=i*a;let de=I*C+x*_+S*E-(y*C+b*_+P*E),he=y*g+D*_+d*E-(I*g+Q*_+v*E),Se=b*g+Q*C+B*E-(x*g+D*C+T*E),be=P*g+v*C+T*_-(S*g+d*C+B*_),_e=b*m+P*p+y*h-(S*p+I*h+x*m),Ct=v*p+I*f+Q*m-(D*m+d*p+y*f),ft=D*h+T*p+x*f-(B*p+b*f+Q*h),At=B*m+S*f+d*h-(v*h+T*m+P*f),at=n*R+i*L+o*G+r*q;if(Math.abs(at)<w.EPSILON21){if(J.equalsEpsilon(De.getMatrix3(e,P5),M5,w.EPSILON7)&&se.equals(De.getRow(e,3,O5),L5))return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=0,t[11]=0,t[12]=-e[12],t[13]=-e[13],t[14]=-e[14],t[15]=1,t;throw new oe("matrix is not invertible because its determinate is zero.")}return at=1/at,t[0]=R*at,t[1]=L*at,t[2]=G*at,t[3]=q*at,t[4]=z*at,t[5]=K*at,t[6]=ie*at,t[7]=le*at,t[8]=de*at,t[9]=he*at,t[10]=Se*at,t[11]=be*at,t[12]=_e*at,t[13]=Ct*at,t[14]=ft*at,t[15]=At*at,t};De.inverseTransformation=function(e,t){let n=e[0],i=e[1],o=e[2],r=e[4],a=e[5],s=e[6],A=e[8],l=e[9],f=e[10],h=e[12],m=e[13],p=e[14],g=-n*h-i*m-o*p,C=-r*h-a*m-s*p,_=-A*h-l*m-f*p;return t[0]=n,t[1]=r,t[2]=A,t[3]=0,t[4]=i,t[5]=a,t[6]=l,t[7]=0,t[8]=o,t[9]=s,t[10]=f,t[11]=0,t[12]=g,t[13]=C,t[14]=_,t[15]=1,t};var N5=new De;De.inverseTranspose=function(e,t){return De.inverse(De.transpose(e,N5),t)};De.IDENTITY=Object.freeze(new De(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1));De.ZERO=Object.freeze(new De(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0));De.COLUMN0ROW0=0;De.COLUMN0ROW1=1;De.COLUMN0ROW2=2;De.COLUMN0ROW3=3;De.COLUMN1ROW0=4;De.COLUMN1ROW1=5;De.COLUMN1ROW2=6;De.COLUMN1ROW3=7;De.COLUMN2ROW0=8;De.COLUMN2ROW1=9;De.COLUMN2ROW2=10;De.COLUMN2ROW3=11;De.COLUMN3ROW0=12;De.COLUMN3ROW1=13;De.COLUMN3ROW2=14;De.COLUMN3ROW3=15;Object.defineProperties(De.prototype,{length:{get:function(){return De.packedLength}}});De.prototype.clone=function(e){return De.clone(this,e)};De.prototype.equals=function(e){return De.equals(this,e)};De.equalsArray=function(e,t,n){return e[0]===t[n]&&e[1]===t[n+1]&&e[2]===t[n+2]&&e[3]===t[n+3]&&e[4]===t[n+4]&&e[5]===t[n+5]&&e[6]===t[n+6]&&e[7]===t[n+7]&&e[8]===t[n+8]&&e[9]===t[n+9]&&e[10]===t[n+10]&&e[11]===t[n+11]&&e[12]===t[n+12]&&e[13]===t[n+13]&&e[14]===t[n+14]&&e[15]===t[n+15]};De.prototype.equalsEpsilon=function(e,t){return De.equalsEpsilon(this,e,t)};De.prototype.toString=function(){return`(${this[0]}, ${this[4]}, ${this[8]}, ${this[12]})
(${this[1]}, ${this[5]}, ${this[9]}, ${this[13]})
(${this[2]}, ${this[6]}, ${this[10]}, ${this[14]})
(${this[3]}, ${this[7]}, ${this[11]}, ${this[15]})`};var O=De;var F5={DEPTH_BUFFER_BIT:256,STENCIL_BUFFER_BIT:1024,COLOR_BUFFER_BIT:16384,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,ZERO:0,ONE:1,SRC_COLOR:768,ONE_MINUS_SRC_COLOR:769,SRC_ALPHA:770,ONE_MINUS_SRC_ALPHA:771,DST_ALPHA:772,ONE_MINUS_DST_ALPHA:773,DST_COLOR:774,ONE_MINUS_DST_COLOR:775,SRC_ALPHA_SATURATE:776,FUNC_ADD:32774,BLEND_EQUATION:32777,BLEND_EQUATION_RGB:32777,BLEND_EQUATION_ALPHA:34877,FUNC_SUBTRACT:32778,FUNC_REVERSE_SUBTRACT:32779,BLEND_DST_RGB:32968,BLEND_SRC_RGB:32969,BLEND_DST_ALPHA:32970,BLEND_SRC_ALPHA:32971,CONSTANT_COLOR:32769,ONE_MINUS_CONSTANT_COLOR:32770,CONSTANT_ALPHA:32771,ONE_MINUS_CONSTANT_ALPHA:32772,BLEND_COLOR:32773,ARRAY_BUFFER:34962,ELEMENT_ARRAY_BUFFER:34963,ARRAY_BUFFER_BINDING:34964,ELEMENT_ARRAY_BUFFER_BINDING:34965,STREAM_DRAW:35040,STATIC_DRAW:35044,DYNAMIC_DRAW:35048,BUFFER_SIZE:34660,BUFFER_USAGE:34661,CURRENT_VERTEX_ATTRIB:34342,FRONT:1028,BACK:1029,FRONT_AND_BACK:1032,CULL_FACE:2884,BLEND:3042,DITHER:3024,STENCIL_TEST:2960,DEPTH_TEST:2929,SCISSOR_TEST:3089,POLYGON_OFFSET_FILL:32823,SAMPLE_ALPHA_TO_COVERAGE:32926,SAMPLE_COVERAGE:32928,NO_ERROR:0,INVALID_ENUM:1280,INVALID_VALUE:1281,INVALID_OPERATION:1282,OUT_OF_MEMORY:1285,CW:2304,CCW:2305,LINE_WIDTH:2849,ALIASED_POINT_SIZE_RANGE:33901,ALIASED_LINE_WIDTH_RANGE:33902,CULL_FACE_MODE:2885,FRONT_FACE:2886,DEPTH_RANGE:2928,DEPTH_WRITEMASK:2930,DEPTH_CLEAR_VALUE:2931,DEPTH_FUNC:2932,STENCIL_CLEAR_VALUE:2961,STENCIL_FUNC:2962,STENCIL_FAIL:2964,STENCIL_PASS_DEPTH_FAIL:2965,STENCIL_PASS_DEPTH_PASS:2966,STENCIL_REF:2967,STENCIL_VALUE_MASK:2963,STENCIL_WRITEMASK:2968,STENCIL_BACK_FUNC:34816,STENCIL_BACK_FAIL:34817,STENCIL_BACK_PASS_DEPTH_FAIL:34818,STENCIL_BACK_PASS_DEPTH_PASS:34819,STENCIL_BACK_REF:36003,STENCIL_BACK_VALUE_MASK:36004,STENCIL_BACK_WRITEMASK:36005,VIEWPORT:2978,SCISSOR_BOX:3088,COLOR_CLEAR_VALUE:3106,COLOR_WRITEMASK:3107,UNPACK_ALIGNMENT:3317,PACK_ALIGNMENT:3333,MAX_TEXTURE_SIZE:3379,MAX_VIEWPORT_DIMS:3386,SUBPIXEL_BITS:3408,RED_BITS:3410,GREEN_BITS:3411,BLUE_BITS:3412,ALPHA_BITS:3413,DEPTH_BITS:3414,STENCIL_BITS:3415,POLYGON_OFFSET_UNITS:10752,POLYGON_OFFSET_FACTOR:32824,TEXTURE_BINDING_2D:32873,SAMPLE_BUFFERS:32936,SAMPLES:32937,SAMPLE_COVERAGE_VALUE:32938,SAMPLE_COVERAGE_INVERT:32939,COMPRESSED_TEXTURE_FORMATS:34467,DONT_CARE:4352,FASTEST:4353,NICEST:4354,GENERATE_MIPMAP_HINT:33170,BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,INT:5124,UNSIGNED_INT:5125,FLOAT:5126,DEPTH_COMPONENT:6402,ALPHA:6406,RGB:6407,RGBA:6408,LUMINANCE:6409,LUMINANCE_ALPHA:6410,UNSIGNED_SHORT_4_4_4_4:32819,UNSIGNED_SHORT_5_5_5_1:32820,UNSIGNED_SHORT_5_6_5:33635,FRAGMENT_SHADER:35632,VERTEX_SHADER:35633,MAX_VERTEX_ATTRIBS:34921,MAX_VERTEX_UNIFORM_VECTORS:36347,MAX_VARYING_VECTORS:36348,MAX_COMBINED_TEXTURE_IMAGE_UNITS:35661,MAX_VERTEX_TEXTURE_IMAGE_UNITS:35660,MAX_TEXTURE_IMAGE_UNITS:34930,MAX_FRAGMENT_UNIFORM_VECTORS:36349,SHADER_TYPE:35663,DELETE_STATUS:35712,LINK_STATUS:35714,VALIDATE_STATUS:35715,ATTACHED_SHADERS:35717,ACTIVE_UNIFORMS:35718,ACTIVE_ATTRIBUTES:35721,SHADING_LANGUAGE_VERSION:35724,CURRENT_PROGRAM:35725,NEVER:512,LESS:513,EQUAL:514,LEQUAL:515,GREATER:516,NOTEQUAL:517,GEQUAL:518,ALWAYS:519,KEEP:7680,REPLACE:7681,INCR:7682,DECR:7683,INVERT:5386,INCR_WRAP:34055,DECR_WRAP:34056,VENDOR:7936,RENDERER:7937,VERSION:7938,NEAREST:9728,LINEAR:9729,NEAREST_MIPMAP_NEAREST:9984,LINEAR_MIPMAP_NEAREST:9985,NEAREST_MIPMAP_LINEAR:9986,LINEAR_MIPMAP_LINEAR:9987,TEXTURE_MAG_FILTER:10240,TEXTURE_MIN_FILTER:10241,TEXTURE_WRAP_S:10242,TEXTURE_WRAP_T:10243,TEXTURE_2D:3553,TEXTURE:5890,TEXTURE_CUBE_MAP:34067,TEXTURE_BINDING_CUBE_MAP:34068,TEXTURE_CUBE_MAP_POSITIVE_X:34069,TEXTURE_CUBE_MAP_NEGATIVE_X:34070,TEXTURE_CUBE_MAP_POSITIVE_Y:34071,TEXTURE_CUBE_MAP_NEGATIVE_Y:34072,TEXTURE_CUBE_MAP_POSITIVE_Z:34073,TEXTURE_CUBE_MAP_NEGATIVE_Z:34074,MAX_CUBE_MAP_TEXTURE_SIZE:34076,TEXTURE0:33984,TEXTURE1:33985,TEXTURE2:33986,TEXTURE3:33987,TEXTURE4:33988,TEXTURE5:33989,TEXTURE6:33990,TEXTURE7:33991,TEXTURE8:33992,TEXTURE9:33993,TEXTURE10:33994,TEXTURE11:33995,TEXTURE12:33996,TEXTURE13:33997,TEXTURE14:33998,TEXTURE15:33999,TEXTURE16:34e3,TEXTURE17:34001,TEXTURE18:34002,TEXTURE19:34003,TEXTURE20:34004,TEXTURE21:34005,TEXTURE22:34006,TEXTURE23:34007,TEXTURE24:34008,TEXTURE25:34009,TEXTURE26:34010,TEXTURE27:34011,TEXTURE28:34012,TEXTURE29:34013,TEXTURE30:34014,TEXTURE31:34015,ACTIVE_TEXTURE:34016,REPEAT:10497,CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,INT_VEC2:35667,INT_VEC3:35668,INT_VEC4:35669,BOOL:35670,BOOL_VEC2:35671,BOOL_VEC3:35672,BOOL_VEC4:35673,FLOAT_MAT2:35674,FLOAT_MAT3:35675,FLOAT_MAT4:35676,SAMPLER_2D:35678,SAMPLER_CUBE:35680,VERTEX_ATTRIB_ARRAY_ENABLED:34338,VERTEX_ATTRIB_ARRAY_SIZE:34339,VERTEX_ATTRIB_ARRAY_STRIDE:34340,VERTEX_ATTRIB_ARRAY_TYPE:34341,VERTEX_ATTRIB_ARRAY_NORMALIZED:34922,VERTEX_ATTRIB_ARRAY_POINTER:34373,VERTEX_ATTRIB_ARRAY_BUFFER_BINDING:34975,IMPLEMENTATION_COLOR_READ_TYPE:35738,IMPLEMENTATION_COLOR_READ_FORMAT:35739,COMPILE_STATUS:35713,LOW_FLOAT:36336,MEDIUM_FLOAT:36337,HIGH_FLOAT:36338,LOW_INT:36339,MEDIUM_INT:36340,HIGH_INT:36341,FRAMEBUFFER:36160,RENDERBUFFER:36161,RGBA4:32854,RGB5_A1:32855,RGB565:36194,DEPTH_COMPONENT16:33189,STENCIL_INDEX:6401,STENCIL_INDEX8:36168,DEPTH_STENCIL:34041,RENDERBUFFER_WIDTH:36162,RENDERBUFFER_HEIGHT:36163,RENDERBUFFER_INTERNAL_FORMAT:36164,RENDERBUFFER_RED_SIZE:36176,RENDERBUFFER_GREEN_SIZE:36177,RENDERBUFFER_BLUE_SIZE:36178,RENDERBUFFER_ALPHA_SIZE:36179,RENDERBUFFER_DEPTH_SIZE:36180,RENDERBUFFER_STENCIL_SIZE:36181,FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE:36048,FRAMEBUFFER_ATTACHMENT_OBJECT_NAME:36049,FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL:36050,FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE:36051,COLOR_ATTACHMENT0:36064,DEPTH_ATTACHMENT:36096,STENCIL_ATTACHMENT:36128,DEPTH_STENCIL_ATTACHMENT:33306,NONE:0,FRAMEBUFFER_COMPLETE:36053,FRAMEBUFFER_INCOMPLETE_ATTACHMENT:36054,FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:36055,FRAMEBUFFER_INCOMPLETE_DIMENSIONS:36057,FRAMEBUFFER_UNSUPPORTED:36061,FRAMEBUFFER_BINDING:36006,RENDERBUFFER_BINDING:36007,MAX_RENDERBUFFER_SIZE:34024,INVALID_FRAMEBUFFER_OPERATION:1286,UNPACK_FLIP_Y_WEBGL:37440,UNPACK_PREMULTIPLY_ALPHA_WEBGL:37441,CONTEXT_LOST_WEBGL:37442,UNPACK_COLORSPACE_CONVERSION_WEBGL:37443,BROWSER_DEFAULT_WEBGL:37444,COMPRESSED_RGB_S3TC_DXT1_EXT:33776,COMPRESSED_RGBA_S3TC_DXT1_EXT:33777,COMPRESSED_RGBA_S3TC_DXT3_EXT:33778,COMPRESSED_RGBA_S3TC_DXT5_EXT:33779,COMPRESSED_RGB_PVRTC_4BPPV1_IMG:35840,COMPRESSED_RGB_PVRTC_2BPPV1_IMG:35841,COMPRESSED_RGBA_PVRTC_4BPPV1_IMG:35842,COMPRESSED_RGBA_PVRTC_2BPPV1_IMG:35843,COMPRESSED_RGBA_ASTC_4x4_WEBGL:37808,COMPRESSED_RGB_ETC1_WEBGL:36196,COMPRESSED_RGBA_BPTC_UNORM:36492,HALF_FLOAT_OES:36193,DOUBLE:5130,READ_BUFFER:3074,UNPACK_ROW_LENGTH:3314,UNPACK_SKIP_ROWS:3315,UNPACK_SKIP_PIXELS:3316,PACK_ROW_LENGTH:3330,PACK_SKIP_ROWS:3331,PACK_SKIP_PIXELS:3332,COLOR:6144,DEPTH:6145,STENCIL:6146,RED:6403,RGB8:32849,RGBA8:32856,RGB10_A2:32857,TEXTURE_BINDING_3D:32874,UNPACK_SKIP_IMAGES:32877,UNPACK_IMAGE_HEIGHT:32878,TEXTURE_3D:32879,TEXTURE_WRAP_R:32882,MAX_3D_TEXTURE_SIZE:32883,UNSIGNED_INT_2_10_10_10_REV:33640,MAX_ELEMENTS_VERTICES:33e3,MAX_ELEMENTS_INDICES:33001,TEXTURE_MIN_LOD:33082,TEXTURE_MAX_LOD:33083,TEXTURE_BASE_LEVEL:33084,TEXTURE_MAX_LEVEL:33085,MIN:32775,MAX:32776,DEPTH_COMPONENT24:33190,MAX_TEXTURE_LOD_BIAS:34045,TEXTURE_COMPARE_MODE:34892,TEXTURE_COMPARE_FUNC:34893,CURRENT_QUERY:34917,QUERY_RESULT:34918,QUERY_RESULT_AVAILABLE:34919,STREAM_READ:35041,STREAM_COPY:35042,STATIC_READ:35045,STATIC_COPY:35046,DYNAMIC_READ:35049,DYNAMIC_COPY:35050,MAX_DRAW_BUFFERS:34852,DRAW_BUFFER0:34853,DRAW_BUFFER1:34854,DRAW_BUFFER2:34855,DRAW_BUFFER3:34856,DRAW_BUFFER4:34857,DRAW_BUFFER5:34858,DRAW_BUFFER6:34859,DRAW_BUFFER7:34860,DRAW_BUFFER8:34861,DRAW_BUFFER9:34862,DRAW_BUFFER10:34863,DRAW_BUFFER11:34864,DRAW_BUFFER12:34865,DRAW_BUFFER13:34866,DRAW_BUFFER14:34867,DRAW_BUFFER15:34868,MAX_FRAGMENT_UNIFORM_COMPONENTS:35657,MAX_VERTEX_UNIFORM_COMPONENTS:35658,SAMPLER_3D:35679,SAMPLER_2D_SHADOW:35682,FRAGMENT_SHADER_DERIVATIVE_HINT:35723,PIXEL_PACK_BUFFER:35051,PIXEL_UNPACK_BUFFER:35052,PIXEL_PACK_BUFFER_BINDING:35053,PIXEL_UNPACK_BUFFER_BINDING:35055,FLOAT_MAT2x3:35685,FLOAT_MAT2x4:35686,FLOAT_MAT3x2:35687,FLOAT_MAT3x4:35688,FLOAT_MAT4x2:35689,FLOAT_MAT4x3:35690,SRGB:35904,SRGB8:35905,SRGB8_ALPHA8:35907,COMPARE_REF_TO_TEXTURE:34894,RGBA32F:34836,RGB32F:34837,RGBA16F:34842,RGB16F:34843,VERTEX_ATTRIB_ARRAY_INTEGER:35069,MAX_ARRAY_TEXTURE_LAYERS:35071,MIN_PROGRAM_TEXEL_OFFSET:35076,MAX_PROGRAM_TEXEL_OFFSET:35077,MAX_VARYING_COMPONENTS:35659,TEXTURE_2D_ARRAY:35866,TEXTURE_BINDING_2D_ARRAY:35869,R11F_G11F_B10F:35898,UNSIGNED_INT_10F_11F_11F_REV:35899,RGB9_E5:35901,UNSIGNED_INT_5_9_9_9_REV:35902,TRANSFORM_FEEDBACK_BUFFER_MODE:35967,MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS:35968,TRANSFORM_FEEDBACK_VARYINGS:35971,TRANSFORM_FEEDBACK_BUFFER_START:35972,TRANSFORM_FEEDBACK_BUFFER_SIZE:35973,TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN:35976,RASTERIZER_DISCARD:35977,MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS:35978,MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS:35979,INTERLEAVED_ATTRIBS:35980,SEPARATE_ATTRIBS:35981,TRANSFORM_FEEDBACK_BUFFER:35982,TRANSFORM_FEEDBACK_BUFFER_BINDING:35983,RGBA32UI:36208,RGB32UI:36209,RGBA16UI:36214,RGB16UI:36215,RGBA8UI:36220,RGB8UI:36221,RGBA32I:36226,RGB32I:36227,RGBA16I:36232,RGB16I:36233,RGBA8I:36238,RGB8I:36239,RED_INTEGER:36244,RGB_INTEGER:36248,RGBA_INTEGER:36249,SAMPLER_2D_ARRAY:36289,SAMPLER_2D_ARRAY_SHADOW:36292,SAMPLER_CUBE_SHADOW:36293,UNSIGNED_INT_VEC2:36294,UNSIGNED_INT_VEC3:36295,UNSIGNED_INT_VEC4:36296,INT_SAMPLER_2D:36298,INT_SAMPLER_3D:36299,INT_SAMPLER_CUBE:36300,INT_SAMPLER_2D_ARRAY:36303,UNSIGNED_INT_SAMPLER_2D:36306,UNSIGNED_INT_SAMPLER_3D:36307,UNSIGNED_INT_SAMPLER_CUBE:36308,UNSIGNED_INT_SAMPLER_2D_ARRAY:36311,DEPTH_COMPONENT32F:36012,DEPTH32F_STENCIL8:36013,FLOAT_32_UNSIGNED_INT_24_8_REV:36269,FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING:33296,FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE:33297,FRAMEBUFFER_ATTACHMENT_RED_SIZE:33298,FRAMEBUFFER_ATTACHMENT_GREEN_SIZE:33299,FRAMEBUFFER_ATTACHMENT_BLUE_SIZE:33300,FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE:33301,FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE:33302,FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE:33303,FRAMEBUFFER_DEFAULT:33304,UNSIGNED_INT_24_8:34042,DEPTH24_STENCIL8:35056,UNSIGNED_NORMALIZED:35863,DRAW_FRAMEBUFFER_BINDING:36006,READ_FRAMEBUFFER:36008,DRAW_FRAMEBUFFER:36009,READ_FRAMEBUFFER_BINDING:36010,RENDERBUFFER_SAMPLES:36011,FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER:36052,MAX_COLOR_ATTACHMENTS:36063,COLOR_ATTACHMENT1:36065,COLOR_ATTACHMENT2:36066,COLOR_ATTACHMENT3:36067,COLOR_ATTACHMENT4:36068,COLOR_ATTACHMENT5:36069,COLOR_ATTACHMENT6:36070,COLOR_ATTACHMENT7:36071,COLOR_ATTACHMENT8:36072,COLOR_ATTACHMENT9:36073,COLOR_ATTACHMENT10:36074,COLOR_ATTACHMENT11:36075,COLOR_ATTACHMENT12:36076,COLOR_ATTACHMENT13:36077,COLOR_ATTACHMENT14:36078,COLOR_ATTACHMENT15:36079,FRAMEBUFFER_INCOMPLETE_MULTISAMPLE:36182,MAX_SAMPLES:36183,HALF_FLOAT:5131,RG:33319,RG_INTEGER:33320,R8:33321,RG8:33323,R16F:33325,R32F:33326,RG16F:33327,RG32F:33328,R8I:33329,R8UI:33330,R16I:33331,R16UI:33332,R32I:33333,R32UI:33334,RG8I:33335,RG8UI:33336,RG16I:33337,RG16UI:33338,RG32I:33339,RG32UI:33340,VERTEX_ARRAY_BINDING:34229,R8_SNORM:36756,RG8_SNORM:36757,RGB8_SNORM:36758,RGBA8_SNORM:36759,SIGNED_NORMALIZED:36764,COPY_READ_BUFFER:36662,COPY_WRITE_BUFFER:36663,COPY_READ_BUFFER_BINDING:36662,COPY_WRITE_BUFFER_BINDING:36663,UNIFORM_BUFFER:35345,UNIFORM_BUFFER_BINDING:35368,UNIFORM_BUFFER_START:35369,UNIFORM_BUFFER_SIZE:35370,MAX_VERTEX_UNIFORM_BLOCKS:35371,MAX_FRAGMENT_UNIFORM_BLOCKS:35373,MAX_COMBINED_UNIFORM_BLOCKS:35374,MAX_UNIFORM_BUFFER_BINDINGS:35375,MAX_UNIFORM_BLOCK_SIZE:35376,MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS:35377,MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS:35379,UNIFORM_BUFFER_OFFSET_ALIGNMENT:35380,ACTIVE_UNIFORM_BLOCKS:35382,UNIFORM_TYPE:35383,UNIFORM_SIZE:35384,UNIFORM_BLOCK_INDEX:35386,UNIFORM_OFFSET:35387,UNIFORM_ARRAY_STRIDE:35388,UNIFORM_MATRIX_STRIDE:35389,UNIFORM_IS_ROW_MAJOR:35390,UNIFORM_BLOCK_BINDING:35391,UNIFORM_BLOCK_DATA_SIZE:35392,UNIFORM_BLOCK_ACTIVE_UNIFORMS:35394,UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES:35395,UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER:35396,UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER:35398,INVALID_INDEX:4294967295,MAX_VERTEX_OUTPUT_COMPONENTS:37154,MAX_FRAGMENT_INPUT_COMPONENTS:37157,MAX_SERVER_WAIT_TIMEOUT:37137,OBJECT_TYPE:37138,SYNC_CONDITION:37139,SYNC_STATUS:37140,SYNC_FLAGS:37141,SYNC_FENCE:37142,SYNC_GPU_COMMANDS_COMPLETE:37143,UNSIGNALED:37144,SIGNALED:37145,ALREADY_SIGNALED:37146,TIMEOUT_EXPIRED:37147,CONDITION_SATISFIED:37148,WAIT_FAILED:37149,SYNC_FLUSH_COMMANDS_BIT:1,VERTEX_ATTRIB_ARRAY_DIVISOR:35070,ANY_SAMPLES_PASSED:35887,ANY_SAMPLES_PASSED_CONSERVATIVE:36202,SAMPLER_BINDING:35097,RGB10_A2UI:36975,INT_2_10_10_10_REV:36255,TRANSFORM_FEEDBACK:36386,TRANSFORM_FEEDBACK_PAUSED:36387,TRANSFORM_FEEDBACK_ACTIVE:36388,TRANSFORM_FEEDBACK_BINDING:36389,COMPRESSED_R11_EAC:37488,COMPRESSED_SIGNED_R11_EAC:37489,COMPRESSED_RG11_EAC:37490,COMPRESSED_SIGNED_RG11_EAC:37491,COMPRESSED_RGB8_ETC2:37492,COMPRESSED_SRGB8_ETC2:37493,COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:37494,COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:37495,COMPRESSED_RGBA8_ETC2_EAC:37496,COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:37497,TEXTURE_IMMUTABLE_FORMAT:37167,MAX_ELEMENT_INDEX:36203,TEXTURE_IMMUTABLE_LEVELS:33503,MAX_TEXTURE_MAX_ANISOTROPY_EXT:34047},V=Object.freeze(F5);var k5=new u;function Ze(e){this._size=e.size,this._datatype=e.datatype,this.getValue=e.getValue}var Wo={};Wo[V.FLOAT]="float";Wo[V.FLOAT_VEC2]="vec2";Wo[V.FLOAT_VEC3]="vec3";Wo[V.FLOAT_VEC4]="vec4";Wo[V.INT]="int";Wo[V.INT_VEC2]="ivec2";Wo[V.INT_VEC3]="ivec3";Wo[V.INT_VEC4]="ivec4";Wo[V.BOOL]="bool";Wo[V.BOOL_VEC2]="bvec2";Wo[V.BOOL_VEC3]="bvec3";Wo[V.BOOL_VEC4]="bvec4";Wo[V.FLOAT_MAT2]="mat2";Wo[V.FLOAT_MAT3]="mat3";Wo[V.FLOAT_MAT4]="mat4";Wo[V.SAMPLER_2D]="sampler2D";Wo[V.SAMPLER_CUBE]="samplerCube";Ze.prototype.getDeclaration=function(e){let t=`uniform ${Wo[this._datatype]} ${e}`,n=this._size;return n===1?t+=";":t+=`[${n.toString()}];`,t};var U5={czm_viewport:new Ze({size:1,datatype:V.FLOAT_VEC4,getValue:function(e){return e.viewportCartesian4}}),czm_viewportOrthographic:new Ze({size:1,datatype:V.FLOAT_MAT4,getValue:function(e){return e.viewportOrthographic}}),czm_viewportTransformation:new Ze({size:1,datatype:V.FLOAT_MAT4,getValue:function(e){return e.viewportTransformation}}),czm_globeDepthTexture:new Ze({size:1,datatype:V.SAMPLER_2D,getValue:function(e){return e.globeDepthTexture}}),czm_model:new Ze({size:1,datatype:V.FLOAT_MAT4,getValue:function(e){return e.model}}),czm_inverseModel:new Ze({size:1,datatype:V.FLOAT_MAT4,getValue:function(e){return e.inverseModel}}),czm_view:new Ze({size:1,datatype:V.FLOAT_MAT4,getValue:function(e){return e.view}}),czm_view3D:new Ze({size:1,datatype:V.FLOAT_MAT4,getValue:function(e){return e.view3D}}),czm_viewRotation:new Ze({size:1,datatype:V.FLOAT_MAT3,getValue:function(e){return e.viewRotation}}),czm_viewRotation3D:new Ze({size:1,datatype:V.FLOAT_MAT3,getValue:function(e){return e.viewRotation3D}}),czm_inverseView:new Ze({size:1,datatype:V.FLOAT_MAT4,getValue:function(e){return e.inverseView}}),czm_inverseView3D:new Ze({size:1,datatype:V.FLOAT_MAT4,getValue:function(e){return e.inverseView3D}}),czm_inverseViewRotation:new Ze({size:1,datatype:V.FLOAT_MAT3,getValue:function(e){return e.inverseViewRotation}}),czm_inverseViewRotation3D:new Ze({size:1,datatype:V.FLOAT_MAT3,getValue:function(e){return e.inverseViewRotation3D}}),czm_projection:new Ze({size:1,datatype:V.FLOAT_MAT4,getValue:function(e){return e.projection}}),czm_inverseProjection:new Ze({size:1,datatype:V.FLOAT_MAT4,getValue:function(e){return e.inverseProjection}}),czm_infiniteProjection:new Ze({size:1,datatype:V.FLOAT_MAT4,getValue:function(e){return e.infiniteProjection}}),czm_modelView:new Ze({size:1,datatype:V.FLOAT_MAT4,getValue:function(e){return e.modelView}}),czm_modelView3D:new Ze({size:1,datatype:V.FLOAT_MAT4,getValue:function(e){return e.modelView3D}}),czm_modelViewRelativeToEye:new Ze({size:1,datatype:V.FLOAT_MAT4,getValue:function(e){return e.modelViewRelativeToEye}}),czm_inverseModelView:new Ze({size:1,datatype:V.FLOAT_MAT4,getValue:function(e){return e.inverseModelView}}),czm_inverseModelView3D:new Ze({size:1,datatype:V.FLOAT_MAT4,getValue:function(e){return e.inverseModelView3D}}),czm_viewProjection:new Ze({size:1,datatype:V.FLOAT_MAT4,getValue:function(e){return e.viewProjection}}),czm_inverseViewProjection:new Ze({size:1,datatype:V.FLOAT_MAT4,getValue:function(e){return e.inverseViewProjection}}),czm_modelViewProjection:new Ze({size:1,datatype:V.FLOAT_MAT4,getValue:function(e){return e.modelViewProjection}}),czm_inverseModelViewProjection:new Ze({size:1,datatype:V.FLOAT_MAT4,getValue:function(e){return e.inverseModelViewProjection}}),czm_modelViewProjectionRelativeToEye:new Ze({size:1,datatype:V.FLOAT_MAT4,getValue:function(e){return e.modelViewProjectionRelativeToEye}}),czm_modelViewInfiniteProjection:new Ze({size:1,datatype:V.FLOAT_MAT4,getValue:function(e){return e.modelViewInfiniteProjection}}),czm_orthographicIn3D:new Ze({size:1,datatype:V.FLOAT,getValue:function(e){return e.orthographicIn3D?1:0}}),czm_normal:new Ze({size:1,datatype:V.FLOAT_MAT3,getValue:function(e){return e.normal}}),czm_normal3D:new Ze({size:1,datatype:V.FLOAT_MAT3,getValue:function(e){return e.normal3D}}),czm_inverseNormal:new Ze({size:1,datatype:V.FLOAT_MAT3,getValue:function(e){return e.inverseNormal}}),czm_inverseNormal3D:new Ze({size:1,datatype:V.FLOAT_MAT3,getValue:function(e){return e.inverseNormal3D}}),czm_eyeHeight:new Ze({size:1,datatype:V.FLOAT,getValue:function(e){return e.eyeHeight}}),czm_eyeHeight2D:new Ze({size:1,datatype:V.FLOAT_VEC2,getValue:function(e){return e.eyeHeight2D}}),czm_eyeEllipsoidNormalEC:new Ze({size:1,datatype:V.FLOAT_VEC3,getValue:function(e){return e.eyeEllipsoidNormalEC}}),czm_eyeEllipsoidCurvature:new Ze({size:1,datatype:V.FLOAT_VEC2,getValue:function(e){return e.eyeEllipsoidCurvature}}),czm_modelToEnu:new Ze({size:1,datatype:V.FLOAT_MAT4,getValue:function(e){return e.modelToEnu}}),czm_enuToModel:new Ze({size:1,datatype:V.FLOAT_MAT4,getValue:function(e){return e.enuToModel}}),czm_entireFrustum:new Ze({size:1,datatype:V.FLOAT_VEC2,getValue:function(e){return e.entireFrustum}}),czm_currentFrustum:new Ze({size:1,datatype:V.FLOAT_VEC2,getValue:function(e){return e.currentFrustum}}),czm_frustumPlanes:new Ze({size:1,datatype:V.FLOAT_VEC4,getValue:function(e){return e.frustumPlanes}}),czm_farDepthFromNearPlusOne:new Ze({size:1,datatype:V.FLOAT,getValue:function(e){return e.farDepthFromNearPlusOne}}),czm_log2FarDepthFromNearPlusOne:new Ze({size:1,datatype:V.FLOAT,getValue:function(e){return e.log2FarDepthFromNearPlusOne}}),czm_oneOverLog2FarDepthFromNearPlusOne:new Ze({size:1,datatype:V.FLOAT,getValue:function(e){return e.oneOverLog2FarDepthFromNearPlusOne}}),czm_sunPositionWC:new Ze({size:1,datatype:V.FLOAT_VEC3,getValue:function(e){return e.sunPositionWC}}),czm_sunPositionColumbusView:new Ze({size:1,datatype:V.FLOAT_VEC3,getValue:function(e){return e.sunPositionColumbusView}}),czm_sunDirectionEC:new Ze({size:1,datatype:V.FLOAT_VEC3,getValue:function(e){return e.sunDirectionEC}}),czm_sunDirectionWC:new Ze({size:1,datatype:V.FLOAT_VEC3,getValue:function(e){return e.sunDirectionWC}}),czm_moonDirectionEC:new Ze({size:1,datatype:V.FLOAT_VEC3,getValue:function(e){return e.moonDirectionEC}}),czm_lightDirectionEC:new Ze({size:1,datatype:V.FLOAT_VEC3,getValue:function(e){return e.lightDirectionEC}}),czm_lightDirectionWC:new Ze({size:1,datatype:V.FLOAT_VEC3,getValue:function(e){return e.lightDirectionWC}}),czm_lightColor:new Ze({size:1,datatype:V.FLOAT_VEC3,getValue:function(e){return e.lightColor}}),czm_lightColorHdr:new Ze({size:1,datatype:V.FLOAT_VEC3,getValue:function(e){return e.lightColorHdr}}),czm_encodedCameraPositionMCHigh:new Ze({size:1,datatype:V.FLOAT_VEC3,getValue:function(e){return e.encodedCameraPositionMCHigh}}),czm_encodedCameraPositionMCLow:new Ze({size:1,datatype:V.FLOAT_VEC3,getValue:function(e){return e.encodedCameraPositionMCLow}}),czm_viewerPositionWC:new Ze({size:1,datatype:V.FLOAT_VEC3,getValue:function(e){return O.getTranslation(e.inverseView,k5)}}),czm_frameNumber:new Ze({size:1,datatype:V.FLOAT,getValue:function(e){return e.frameState.frameNumber}}),czm_morphTime:new Ze({size:1,datatype:V.FLOAT,getValue:function(e){return e.frameState.morphTime}}),czm_sceneMode:new Ze({size:1,datatype:V.FLOAT,getValue:function(e){return e.frameState.mode}}),czm_pass:new Ze({size:1,datatype:V.FLOAT,getValue:function(e){return e.pass}}),czm_backgroundColor:new Ze({size:1,datatype:V.FLOAT_VEC4,getValue:function(e){return e.backgroundColor}}),czm_brdfLut:new Ze({size:1,datatype:V.SAMPLER_2D,getValue:function(e){return e.brdfLut}}),czm_environmentMap:new Ze({size:1,datatype:V.SAMPLER_CUBE,getValue:function(e){return e.environmentMap}}),czm_specularEnvironmentMaps:new Ze({size:1,datatype:V.SAMPLER_CUBE,getValue:function(e){return e.specularEnvironmentMaps}}),czm_specularEnvironmentMapsMaximumLOD:new Ze({size:1,datatype:V.FLOAT,getValue:function(e){return e.specularEnvironmentMapsMaximumLOD}}),czm_sphericalHarmonicCoefficients:new Ze({size:9,datatype:V.FLOAT_VEC3,getValue:function(e){return e.sphericalHarmonicCoefficients}}),czm_temeToPseudoFixed:new Ze({size:1,datatype:V.FLOAT_MAT3,getValue:function(e){return e.temeToPseudoFixedMatrix}}),czm_pixelRatio:new Ze({size:1,datatype:V.FLOAT,getValue:function(e){return e.pixelRatio}}),czm_fogDensity:new Ze({size:1,datatype:V.FLOAT,getValue:function(e){return e.fogDensity}}),czm_fogVisualDensityScalar:new Ze({size:1,datatype:V.FLOAT,getValue:function(e){return e.fogVisualDensityScalar}}),czm_fogMinimumBrightness:new Ze({size:1,datatype:V.FLOAT,getValue:function(e){return e.fogMinimumBrightness}}),czm_atmosphereHsbShift:new Ze({size:1,datatype:V.FLOAT_VEC3,getValue:function(e){return e.atmosphereHsbShift}}),czm_atmosphereLightIntensity:new Ze({size:1,datatype:V.FLOAT,getValue:function(e){return e.atmosphereLightIntensity}}),czm_atmosphereRayleighCoefficient:new Ze({size:1,datatype:V.FLOAT_VEC3,getValue:function(e){return e.atmosphereRayleighCoefficient}}),czm_atmosphereRayleighScaleHeight:new Ze({size:1,datatype:V.FLOAT,getValue:function(e){return e.atmosphereRayleighScaleHeight}}),czm_atmosphereMieCoefficient:new Ze({size:1,datatype:V.FLOAT_VEC3,getValue:function(e){return e.atmosphereMieCoefficient}}),czm_atmosphereMieScaleHeight:new Ze({size:1,datatype:V.FLOAT,getValue:function(e){return e.atmosphereMieScaleHeight}}),czm_atmosphereMieAnisotropy:new Ze({size:1,datatype:V.FLOAT,getValue:function(e){return e.atmosphereMieAnisotropy}}),czm_atmosphereDynamicLighting:new Ze({size:1,datatype:V.FLOAT,getValue:function(e){return e.atmosphereDynamicLighting}}),czm_splitPosition:new Ze({size:1,datatype:V.FLOAT,getValue:function(e){return e.splitPosition}}),czm_geometricToleranceOverMeter:new Ze({size:1,datatype:V.FLOAT,getValue:function(e){return e.geometricToleranceOverMeter}}),czm_minimumDisableDepthTestDistance:new Ze({size:1,datatype:V.FLOAT,getValue:function(e){return e.minimumDisableDepthTestDistance}}),czm_invertClassificationColor:new Ze({size:1,datatype:V.FLOAT_VEC4,getValue:function(e){return e.invertClassificationColor}}),czm_gamma:new Ze({size:1,datatype:V.FLOAT,getValue:function(e){return e.gamma}}),czm_ellipsoidRadii:new Ze({size:1,datatype:V.FLOAT_VEC3,getValue:function(e){return e.ellipsoid.radii}}),czm_ellipsoidInverseRadii:new Ze({size:1,datatype:V.FLOAT_VEC3,getValue:function(e){return e.ellipsoid.oneOverRadii}})},zh=U5;function G5(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){let t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)})}var oo=G5;function z5(){return!0}function H5(e,t){t=t??"This object was destroyed, i.e., destroy() was called.";function n(){}for(let i in e)typeof e[i]=="function"&&(e[i]=n);e.isDestroyed=z5}var pe=H5;var Po={UNSIGNED_BYTE:V.UNSIGNED_BYTE,UNSIGNED_SHORT:V.UNSIGNED_SHORT,UNSIGNED_INT:V.UNSIGNED_INT};Po.getSizeInBytes=function(e){switch(e){case Po.UNSIGNED_BYTE:return Uint8Array.BYTES_PER_ELEMENT;case Po.UNSIGNED_SHORT:return Uint16Array.BYTES_PER_ELEMENT;case Po.UNSIGNED_INT:return Uint32Array.BYTES_PER_ELEMENT}};Po.fromSizeInBytes=function(e){switch(e){case 2:return Po.UNSIGNED_SHORT;case 4:return Po.UNSIGNED_INT;case 1:return Po.UNSIGNED_BYTE}};Po.validate=function(e){return c(e)&&(e===Po.UNSIGNED_BYTE||e===Po.UNSIGNED_SHORT||e===Po.UNSIGNED_INT)};Po.createTypedArray=function(e,t){return e>=w.SIXTY_FOUR_KILOBYTES?new Uint32Array(t):new Uint16Array(t)};Po.createTypedArrayFromArrayBuffer=function(e,t,n,i){return e>=w.SIXTY_FOUR_KILOBYTES?new Uint32Array(t,n,i):new Uint16Array(t,n,i)};Po.fromTypedArray=function(e){if(e instanceof Uint8Array)return Po.UNSIGNED_BYTE;if(e instanceof Uint16Array)return Po.UNSIGNED_SHORT;if(e instanceof Uint32Array)return Po.UNSIGNED_INT};var Be=Object.freeze(Po);var $E={STREAM_DRAW:V.STREAM_DRAW,STATIC_DRAW:V.STATIC_DRAW,DYNAMIC_DRAW:V.DYNAMIC_DRAW,validate:function(e){return e===$E.STREAM_DRAW||e===$E.STATIC_DRAW||e===$E.DYNAMIC_DRAW}},Me=Object.freeze($E);function Bs(e){e=e??k.EMPTY_OBJECT;let t=e.context._gl,n=e.bufferTarget,i=e.typedArray,o=e.sizeInBytes,r=e.usage,a=c(i);a&&(o=i.byteLength);let s=t.createBuffer();t.bindBuffer(n,s),t.bufferData(n,a?i:o,r),t.bindBuffer(n,null),this._id=oo(),this._gl=t,this._webgl2=e.context._webgl2,this._bufferTarget=n,this._sizeInBytes=o,this._usage=r,this._buffer=s,this.vertexArrayDestroyable=!0}Bs.createVertexBuffer=function(e){return new Bs({context:e.context,bufferTarget:V.ARRAY_BUFFER,typedArray:e.typedArray,sizeInBytes:e.sizeInBytes,usage:e.usage})};Bs.createIndexBuffer=function(e){let t=e.context,n=e.indexDatatype,i=Be.getSizeInBytes(n),o=new Bs({context:t,bufferTarget:V.ELEMENT_ARRAY_BUFFER,typedArray:e.typedArray,sizeInBytes:e.sizeInBytes,usage:e.usage}),r=o.sizeInBytes/i;return Object.defineProperties(o,{indexDatatype:{get:function(){return n}},bytesPerIndex:{get:function(){return i}},numberOfIndices:{get:function(){return r}}}),o};Object.defineProperties(Bs.prototype,{sizeInBytes:{get:function(){return this._sizeInBytes}},usage:{get:function(){return this._usage}}});Bs.prototype._getBuffer=function(){return this._buffer};Bs.prototype.copyFromArrayView=function(e,t){t=t??0;let n=this._gl,i=this._bufferTarget;n.bindBuffer(i,this._buffer),n.bufferSubData(i,t,e),n.bindBuffer(i,null)};Bs.prototype.copyFromBuffer=function(e,t,n,i){let o=V.COPY_READ_BUFFER,r=V.COPY_WRITE_BUFFER,a=this._gl;a.bindBuffer(r,this._buffer),a.bindBuffer(o,e._buffer),a.copyBufferSubData(o,r,t,n,i),a.bindBuffer(r,null),a.bindBuffer(o,null)};Bs.prototype.getBufferData=function(e,t,n,i){t=t??0,n=n??0;let o=this._gl,r=V.COPY_READ_BUFFER;o.bindBuffer(r,this._buffer),o.getBufferSubData(r,t,e,n,i),o.bindBuffer(r,null)};Bs.prototype.isDestroyed=function(){return!1};Bs.prototype.destroy=function(){return this._gl.deleteBuffer(this._buffer),pe(this)};var dt=Bs;var Qf,qi={requestFullscreen:void 0,exitFullscreen:void 0,fullscreenEnabled:void 0,fullscreenElement:void 0,fullscreenchange:void 0,fullscreenerror:void 0},Ca={};Object.defineProperties(Ca,{element:{get:function(){if(Ca.supportsFullscreen())return document[qi.fullscreenElement]}},changeEventName:{get:function(){if(Ca.supportsFullscreen())return qi.fullscreenchange}},errorEventName:{get:function(){if(Ca.supportsFullscreen())return qi.fullscreenerror}},enabled:{get:function(){if(Ca.supportsFullscreen())return document[qi.fullscreenEnabled]}},fullscreen:{get:function(){if(Ca.supportsFullscreen())return Ca.element!==null}}});Ca.supportsFullscreen=function(){if(c(Qf))return Qf;Qf=!1;let e=document.body;if(typeof e.requestFullscreen=="function")return qi.requestFullscreen="requestFullscreen",qi.exitFullscreen="exitFullscreen",qi.fullscreenEnabled="fullscreenEnabled",qi.fullscreenElement="fullscreenElement",qi.fullscreenchange="fullscreenchange",qi.fullscreenerror="fullscreenerror",Qf=!0,Qf;let t=["webkit","moz","o","ms","khtml"],n;for(let i=0,o=t.length;i<o;++i){let r=t[i];n=`${r}RequestFullscreen`,typeof e[n]=="function"?(qi.requestFullscreen=n,Qf=!0):(n=`${r}RequestFullScreen`,typeof e[n]=="function"&&(qi.requestFullscreen=n,Qf=!0)),n=`${r}ExitFullscreen`,typeof document[n]=="function"?qi.exitFullscreen=n:(n=`${r}CancelFullScreen`,typeof document[n]=="function"&&(qi.exitFullscreen=n)),n=`${r}FullscreenEnabled`,document[n]!==void 0?qi.fullscreenEnabled=n:(n=`${r}FullScreenEnabled`,document[n]!==void 0&&(qi.fullscreenEnabled=n)),n=`${r}FullscreenElement`,document[n]!==void 0?qi.fullscreenElement=n:(n=`${r}FullScreenElement`,document[n]!==void 0&&(qi.fullscreenElement=n)),n=`${r}fullscreenchange`,document[`on${n}`]!==void 0&&(r==="ms"&&(n="MSFullscreenChange"),qi.fullscreenchange=n),n=`${r}fullscreenerror`,document[`on${n}`]!==void 0&&(r==="ms"&&(n="MSFullscreenError"),qi.fullscreenerror=n)}return Qf};Ca.requestFullscreen=function(e,t){Ca.supportsFullscreen()&&e[qi.requestFullscreen]({vrDisplay:t})};Ca.exitFullscreen=function(){Ca.supportsFullscreen()&&document[qi.exitFullscreen]()};Ca._names=qi;var Tv=Ca;var br;typeof navigator<"u"?br=navigator:br={};function ld(e){let t=e.split(".");for(let n=0,i=t.length;n<i;++n)t[n]=parseInt(t[n],10);return t}var eI,Sv;function hx(){if(!c(eI)&&(eI=!1,!aI())){let e=/ Chrome\/([\.0-9]+)/.exec(br.userAgent);e!==null&&(eI=!0,Sv=ld(e[1]))}return eI}function V5(){return hx()&&Sv}var tI,wv;function Dv(){if(!c(tI)&&(tI=!1,!hx()&&!aI()&&/ Safari\/[\.0-9]+/.test(br.userAgent))){let e=/ Version\/([\.0-9]+)/.exec(br.userAgent);e!==null&&(tI=!0,wv=ld(e[1]))}return tI}function j5(){return Dv()&&wv}var nI,ux;function Qv(){if(!c(nI)){nI=!1;let e=/ AppleWebKit\/([\.0-9]+)(\+?)/.exec(br.userAgent);e!==null&&(nI=!0,ux=ld(e[1]),ux.isNightly=!!e[2])}return nI}function Y5(){return Qv()&&ux}var Rg,dx;function Rv(){if(!c(Rg)){Rg=!1;let e;br.appName==="Microsoft Internet Explorer"?(e=/MSIE ([0-9]{1,}[\.0-9]{0,})/.exec(br.userAgent),e!==null&&(Rg=!0,dx=ld(e[1]))):br.appName==="Netscape"&&(e=/Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/.exec(br.userAgent),e!==null&&(Rg=!0,dx=ld(e[1])))}return Rg}function q5(){return Rv()&&dx}var iI,vv;function aI(){if(!c(iI)){iI=!1;let e=/ Edg\/([\.0-9]+)/.exec(br.userAgent);e!==null&&(iI=!0,vv=ld(e[1]))}return iI}function W5(){return aI()&&vv}var oI,mx;function sI(){if(!c(oI)){oI=!1;let e=/Firefox\/([\.0-9]+)/.exec(br.userAgent);e!==null&&(oI=!0,mx=ld(e[1]))}return oI}var Ax;function J5(){return c(Ax)||(Ax=/Windows/i.test(br.appVersion)),Ax}var lx;function K5(){return c(lx)||(lx=navigator.platform==="iPhone"||navigator.platform==="iPod"||navigator.platform==="iPad"),lx}function X5(){return sI()&&mx}var fx;function Z5(){return c(fx)||(fx=!sI()&&typeof PointerEvent<"u"&&(!c(br.pointerEnabled)||br.pointerEnabled)),fx}var Pv,rI;function Mv(){if(!c(rI)){let e=document.createElement("canvas");e.setAttribute("style","image-rendering: -moz-crisp-edges;image-rendering: pixelated;");let t=e.style.imageRendering;rI=c(t)&&t!=="",rI&&(Pv=t)}return rI}function $5(){return Mv()?Pv:void 0}function Wr(){return Wr._result}Wr._promise=void 0;Wr._result=void 0;Wr.initialize=function(){return c(Wr._promise)||(Wr._promise=new Promise(e=>{let t=new Image;t.onload=function(){Wr._result=t.width>0&&t.height>0,e(Wr._result)},t.onerror=function(){Wr._result=!1,e(Wr._result)},t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA"})),Wr._promise};Object.defineProperties(Wr,{initialized:{get:function(){return c(Wr._result)}}});var Hh=[];typeof ArrayBuffer<"u"&&(Hh.push(Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array),typeof Uint8ClampedArray<"u"&&Hh.push(Uint8ClampedArray),typeof Uint8ClampedArray<"u"&&Hh.push(Uint8ClampedArray),typeof BigInt64Array<"u"&&Hh.push(BigInt64Array),typeof BigUint64Array<"u"&&Hh.push(BigUint64Array));var xs={isChrome:hx,chromeVersion:V5,isSafari:Dv,safariVersion:j5,isWebkit:Qv,webkitVersion:Y5,isInternetExplorer:Rv,internetExplorerVersion:q5,isEdge:aI,edgeVersion:W5,isFirefox:sI,firefoxVersion:X5,isWindows:J5,isIPadOrIOS:K5,hardwareConcurrency:br.hardwareConcurrency??3,supportsPointerEvents:Z5,supportsImageRenderingPixelated:Mv,supportsWebP:Wr,imageRenderingValue:$5,typedArrayTypes:Hh};xs.supportsBasis=function(e){return xs.supportsWebAssembly()&&e.context.supportsBasis};xs.supportsFullscreen=function(){return Tv.supportsFullscreen()};xs.supportsTypedArrays=function(){return typeof ArrayBuffer<"u"};xs.supportsBigInt64Array=function(){return typeof BigInt64Array<"u"};xs.supportsBigUint64Array=function(){return typeof BigUint64Array<"u"};xs.supportsBigInt=function(){return typeof BigInt<"u"};xs.supportsWebWorkers=function(){return typeof Worker<"u"};xs.supportsWebAssembly=function(){return typeof WebAssembly<"u"};xs.supportsWebgl2=function(e){return e.context.webgl2};xs.supportsEsmWebWorkers=function(){return!sI()||parseInt(mx)>=114};var $t=xs;function px(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n*6<1?e+(t-e)*6*n:n*2<1?t:n*3<2?e+(t-e)*(2/3-n)*6:e}function Y(e,t,n,i){this.red=e??1,this.green=t??1,this.blue=n??1,this.alpha=i??1}Y.fromCartesian4=function(e,t){return c(t)?(t.red=e.x,t.green=e.y,t.blue=e.z,t.alpha=e.w,t):new Y(e.x,e.y,e.z,e.w)};Y.fromBytes=function(e,t,n,i,o){return e=Y.byteToFloat(e??255),t=Y.byteToFloat(t??255),n=Y.byteToFloat(n??255),i=Y.byteToFloat(i??255),c(o)?(o.red=e,o.green=t,o.blue=n,o.alpha=i,o):new Y(e,t,n,i)};Y.fromAlpha=function(e,t,n){return c(n)?(n.red=e.red,n.green=e.green,n.blue=e.blue,n.alpha=t,n):new Y(e.red,e.green,e.blue,t)};var gx,Cx,al;$t.supportsTypedArrays()&&(gx=new ArrayBuffer(4),Cx=new Uint32Array(gx),al=new Uint8Array(gx));Y.fromRgba=function(e,t){return Cx[0]=e,Y.fromBytes(al[0],al[1],al[2],al[3],t)};Y.fromHsl=function(e,t,n,i,o){e=(e??0)%1,t=t??0,n=n??0,i=i??1;let r=n,a=n,s=n;if(t!==0){let A;n<.5?A=n*(1+t):A=n+t-n*t;let l=2*n-A;r=px(l,A,e+1/3),a=px(l,A,e),s=px(l,A,e-1/3)}return c(o)?(o.red=r,o.green=a,o.blue=s,o.alpha=i,o):new Y(r,a,s,i)};Y.fromRandom=function(e,t){e=e??k.EMPTY_OBJECT;let n=e.red;if(!c(n)){let a=e.minimumRed??0,s=e.maximumRed??1;n=a+w.nextRandomNumber()*(s-a)}let i=e.green;if(!c(i)){let a=e.minimumGreen??0,s=e.maximumGreen??1;i=a+w.nextRandomNumber()*(s-a)}let o=e.blue;if(!c(o)){let a=e.minimumBlue??0,s=e.maximumBlue??1;o=a+w.nextRandomNumber()*(s-a)}let r=e.alpha;if(!c(r)){let a=e.minimumAlpha??0,s=e.maximumAlpha??1;r=a+w.nextRandomNumber()*(s-a)}return c(t)?(t.red=n,t.green=i,t.blue=o,t.alpha=r,t):new Y(n,i,o,r)};var e6=/^#([0-9a-f])([0-9a-f])([0-9a-f])([0-9a-f])?$/i,t6=/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})?$/i,n6=/^rgba?\s*\(\s*([0-9.]+%?)\s*[,\s]+\s*([0-9.]+%?)\s*[,\s]+\s*([0-9.]+%?)(?:\s*[,\s/]+\s*([0-9.]+))?\s*\)$/i,i6=/^hsla?\s*\(\s*([0-9.]+)\s*[,\s]+\s*([0-9.]+%)\s*[,\s]+\s*([0-9.]+%)(?:\s*[,\s/]+\s*([0-9.]+))?\s*\)$/i;Y.fromCssColorString=function(e,t){c(t)||(t=new Y),e=e.trim();let n=Y[e.toUpperCase()];if(c(n))return Y.clone(n,t),t;let i=e6.exec(e);return i!==null?(t.red=parseInt(i[1],16)/15,t.green=parseInt(i[2],16)/15,t.blue=parseInt(i[3],16)/15,t.alpha=parseInt(i[4]??"f",16)/15,t):(i=t6.exec(e),i!==null?(t.red=parseInt(i[1],16)/255,t.green=parseInt(i[2],16)/255,t.blue=parseInt(i[3],16)/255,t.alpha=parseInt(i[4]??"ff",16)/255,t):(i=n6.exec(e),i!==null?(t.red=parseFloat(i[1])/(i[1].substr(-1)==="%"?100:255),t.green=parseFloat(i[2])/(i[2].substr(-1)==="%"?100:255),t.blue=parseFloat(i[3])/(i[3].substr(-1)==="%"?100:255),t.alpha=parseFloat(i[4]??"1.0"),t):(i=i6.exec(e),i!==null?Y.fromHsl(parseFloat(i[1])/360,parseFloat(i[2])/100,parseFloat(i[3])/100,parseFloat(i[4]??"1.0"),t):(t=void 0,t))))};Y.packedLength=4;Y.pack=function(e,t,n){return n=n??0,t[n++]=e.red,t[n++]=e.green,t[n++]=e.blue,t[n]=e.alpha,t};Y.unpack=function(e,t,n){return t=t??0,c(n)||(n=new Y),n.red=e[t++],n.green=e[t++],n.blue=e[t++],n.alpha=e[t],n};Y.byteToFloat=function(e){return e/255};Y.floatToByte=function(e){return e===1?255:e*256|0};Y.clone=function(e,t){if(c(e))return c(t)?(t.red=e.red,t.green=e.green,t.blue=e.blue,t.alpha=e.alpha,t):new Y(e.red,e.green,e.blue,e.alpha)};Y.equals=function(e,t){return e===t||c(e)&&c(t)&&e.red===t.red&&e.green===t.green&&e.blue===t.blue&&e.alpha===t.alpha};Y.equalsArray=function(e,t,n){return e.red===t[n]&&e.green===t[n+1]&&e.blue===t[n+2]&&e.alpha===t[n+3]};Y.prototype.clone=function(e){return Y.clone(this,e)};Y.prototype.equals=function(e){return Y.equals(this,e)};Y.prototype.equalsEpsilon=function(e,t){return this===e||c(e)&&Math.abs(this.red-e.red)<=t&&Math.abs(this.green-e.green)<=t&&Math.abs(this.blue-e.blue)<=t&&Math.abs(this.alpha-e.alpha)<=t};Y.prototype.toString=function(){return`(${this.red}, ${this.green}, ${this.blue}, ${this.alpha})`};Y.prototype.toCssColorString=function(){let e=Y.floatToByte(this.red),t=Y.floatToByte(this.green),n=Y.floatToByte(this.blue);return this.alpha===1?`rgb(${e},${t},${n})`:`rgba(${e},${t},${n},${this.alpha})`};Y.prototype.toCssHexString=function(){let e=Y.floatToByte(this.red).toString(16);e.length<2&&(e=`0${e}`);let t=Y.floatToByte(this.green).toString(16);t.length<2&&(t=`0${t}`);let n=Y.floatToByte(this.blue).toString(16);if(n.length<2&&(n=`0${n}`),this.alpha<1){let i=Y.floatToByte(this.alpha).toString(16);return i.length<2&&(i=`0${i}`),`#${e}${t}${n}${i}`}return`#${e}${t}${n}`};Y.prototype.toBytes=function(e){let t=Y.floatToByte(this.red),n=Y.floatToByte(this.green),i=Y.floatToByte(this.blue),o=Y.floatToByte(this.alpha);return c(e)?(e[0]=t,e[1]=n,e[2]=i,e[3]=o,e):[t,n,i,o]};Y.prototype.toRgba=function(){return al[0]=Y.floatToByte(this.red),al[1]=Y.floatToByte(this.green),al[2]=Y.floatToByte(this.blue),al[3]=Y.floatToByte(this.alpha),Cx[0]};Y.prototype.brighten=function(e,t){return e=1-e,t.red=1-(1-this.red)*e,t.green=1-(1-this.green)*e,t.blue=1-(1-this.blue)*e,t.alpha=this.alpha,t};Y.prototype.darken=function(e,t){return e=1-e,t.red=this.red*e,t.green=this.green*e,t.blue=this.blue*e,t.alpha=this.alpha,t};Y.prototype.withAlpha=function(e,t){return Y.fromAlpha(this,e,t)};Y.add=function(e,t,n){return n.red=e.red+t.red,n.green=e.green+t.green,n.blue=e.blue+t.blue,n.alpha=e.alpha+t.alpha,n};Y.subtract=function(e,t,n){return n.red=e.red-t.red,n.green=e.green-t.green,n.blue=e.blue-t.blue,n.alpha=e.alpha-t.alpha,n};Y.multiply=function(e,t,n){return n.red=e.red*t.red,n.green=e.green*t.green,n.blue=e.blue*t.blue,n.alpha=e.alpha*t.alpha,n};Y.divide=function(e,t,n){return n.red=e.red/t.red,n.green=e.green/t.green,n.blue=e.blue/t.blue,n.alpha=e.alpha/t.alpha,n};Y.mod=function(e,t,n){return n.red=e.red%t.red,n.green=e.green%t.green,n.blue=e.blue%t.blue,n.alpha=e.alpha%t.alpha,n};Y.lerp=function(e,t,n,i){return i.red=w.lerp(e.red,t.red,n),i.green=w.lerp(e.green,t.green,n),i.blue=w.lerp(e.blue,t.blue,n),i.alpha=w.lerp(e.alpha,t.alpha,n),i};Y.multiplyByScalar=function(e,t,n){return n.red=e.red*t,n.green=e.green*t,n.blue=e.blue*t,n.alpha=e.alpha*t,n};Y.divideByScalar=function(e,t,n){return n.red=e.red/t,n.green=e.green/t,n.blue=e.blue/t,n.alpha=e.alpha/t,n};Y.ALICEBLUE=Object.freeze(Y.fromCssColorString("#F0F8FF"));Y.ANTIQUEWHITE=Object.freeze(Y.fromCssColorString("#FAEBD7"));Y.AQUA=Object.freeze(Y.fromCssColorString("#00FFFF"));Y.AQUAMARINE=Object.freeze(Y.fromCssColorString("#7FFFD4"));Y.AZURE=Object.freeze(Y.fromCssColorString("#F0FFFF"));Y.BEIGE=Object.freeze(Y.fromCssColorString("#F5F5DC"));Y.BISQUE=Object.freeze(Y.fromCssColorString("#FFE4C4"));Y.BLACK=Object.freeze(Y.fromCssColorString("#000000"));Y.BLANCHEDALMOND=Object.freeze(Y.fromCssColorString("#FFEBCD"));Y.BLUE=Object.freeze(Y.fromCssColorString("#0000FF"));Y.BLUEVIOLET=Object.freeze(Y.fromCssColorString("#8A2BE2"));Y.BROWN=Object.freeze(Y.fromCssColorString("#A52A2A"));Y.BURLYWOOD=Object.freeze(Y.fromCssColorString("#DEB887"));Y.CADETBLUE=Object.freeze(Y.fromCssColorString("#5F9EA0"));Y.CHARTREUSE=Object.freeze(Y.fromCssColorString("#7FFF00"));Y.CHOCOLATE=Object.freeze(Y.fromCssColorString("#D2691E"));Y.CORAL=Object.freeze(Y.fromCssColorString("#FF7F50"));Y.CORNFLOWERBLUE=Object.freeze(Y.fromCssColorString("#6495ED"));Y.CORNSILK=Object.freeze(Y.fromCssColorString("#FFF8DC"));Y.CRIMSON=Object.freeze(Y.fromCssColorString("#DC143C"));Y.CYAN=Object.freeze(Y.fromCssColorString("#00FFFF"));Y.DARKBLUE=Object.freeze(Y.fromCssColorString("#00008B"));Y.DARKCYAN=Object.freeze(Y.fromCssColorString("#008B8B"));Y.DARKGOLDENROD=Object.freeze(Y.fromCssColorString("#B8860B"));Y.DARKGRAY=Object.freeze(Y.fromCssColorString("#A9A9A9"));Y.DARKGREEN=Object.freeze(Y.fromCssColorString("#006400"));Y.DARKGREY=Y.DARKGRAY;Y.DARKKHAKI=Object.freeze(Y.fromCssColorString("#BDB76B"));Y.DARKMAGENTA=Object.freeze(Y.fromCssColorString("#8B008B"));Y.DARKOLIVEGREEN=Object.freeze(Y.fromCssColorString("#556B2F"));Y.DARKORANGE=Object.freeze(Y.fromCssColorString("#FF8C00"));Y.DARKORCHID=Object.freeze(Y.fromCssColorString("#9932CC"));Y.DARKRED=Object.freeze(Y.fromCssColorString("#8B0000"));Y.DARKSALMON=Object.freeze(Y.fromCssColorString("#E9967A"));Y.DARKSEAGREEN=Object.freeze(Y.fromCssColorString("#8FBC8F"));Y.DARKSLATEBLUE=Object.freeze(Y.fromCssColorString("#483D8B"));Y.DARKSLATEGRAY=Object.freeze(Y.fromCssColorString("#2F4F4F"));Y.DARKSLATEGREY=Y.DARKSLATEGRAY;Y.DARKTURQUOISE=Object.freeze(Y.fromCssColorString("#00CED1"));Y.DARKVIOLET=Object.freeze(Y.fromCssColorString("#9400D3"));Y.DEEPPINK=Object.freeze(Y.fromCssColorString("#FF1493"));Y.DEEPSKYBLUE=Object.freeze(Y.fromCssColorString("#00BFFF"));Y.DIMGRAY=Object.freeze(Y.fromCssColorString("#696969"));Y.DIMGREY=Y.DIMGRAY;Y.DODGERBLUE=Object.freeze(Y.fromCssColorString("#1E90FF"));Y.FIREBRICK=Object.freeze(Y.fromCssColorString("#B22222"));Y.FLORALWHITE=Object.freeze(Y.fromCssColorString("#FFFAF0"));Y.FORESTGREEN=Object.freeze(Y.fromCssColorString("#228B22"));Y.FUCHSIA=Object.freeze(Y.fromCssColorString("#FF00FF"));Y.GAINSBORO=Object.freeze(Y.fromCssColorString("#DCDCDC"));Y.GHOSTWHITE=Object.freeze(Y.fromCssColorString("#F8F8FF"));Y.GOLD=Object.freeze(Y.fromCssColorString("#FFD700"));Y.GOLDENROD=Object.freeze(Y.fromCssColorString("#DAA520"));Y.GRAY=Object.freeze(Y.fromCssColorString("#808080"));Y.GREEN=Object.freeze(Y.fromCssColorString("#008000"));Y.GREENYELLOW=Object.freeze(Y.fromCssColorString("#ADFF2F"));Y.GREY=Y.GRAY;Y.HONEYDEW=Object.freeze(Y.fromCssColorString("#F0FFF0"));Y.HOTPINK=Object.freeze(Y.fromCssColorString("#FF69B4"));Y.INDIANRED=Object.freeze(Y.fromCssColorString("#CD5C5C"));Y.INDIGO=Object.freeze(Y.fromCssColorString("#4B0082"));Y.IVORY=Object.freeze(Y.fromCssColorString("#FFFFF0"));Y.KHAKI=Object.freeze(Y.fromCssColorString("#F0E68C"));Y.LAVENDER=Object.freeze(Y.fromCssColorString("#E6E6FA"));Y.LAVENDAR_BLUSH=Object.freeze(Y.fromCssColorString("#FFF0F5"));Y.LAWNGREEN=Object.freeze(Y.fromCssColorString("#7CFC00"));Y.LEMONCHIFFON=Object.freeze(Y.fromCssColorString("#FFFACD"));Y.LIGHTBLUE=Object.freeze(Y.fromCssColorString("#ADD8E6"));Y.LIGHTCORAL=Object.freeze(Y.fromCssColorString("#F08080"));Y.LIGHTCYAN=Object.freeze(Y.fromCssColorString("#E0FFFF"));Y.LIGHTGOLDENRODYELLOW=Object.freeze(Y.fromCssColorString("#FAFAD2"));Y.LIGHTGRAY=Object.freeze(Y.fromCssColorString("#D3D3D3"));Y.LIGHTGREEN=Object.freeze(Y.fromCssColorString("#90EE90"));Y.LIGHTGREY=Y.LIGHTGRAY;Y.LIGHTPINK=Object.freeze(Y.fromCssColorString("#FFB6C1"));Y.LIGHTSEAGREEN=Object.freeze(Y.fromCssColorString("#20B2AA"));Y.LIGHTSKYBLUE=Object.freeze(Y.fromCssColorString("#87CEFA"));Y.LIGHTSLATEGRAY=Object.freeze(Y.fromCssColorString("#778899"));Y.LIGHTSLATEGREY=Y.LIGHTSLATEGRAY;Y.LIGHTSTEELBLUE=Object.freeze(Y.fromCssColorString("#B0C4DE"));Y.LIGHTYELLOW=Object.freeze(Y.fromCssColorString("#FFFFE0"));Y.LIME=Object.freeze(Y.fromCssColorString("#00FF00"));Y.LIMEGREEN=Object.freeze(Y.fromCssColorString("#32CD32"));Y.LINEN=Object.freeze(Y.fromCssColorString("#FAF0E6"));Y.MAGENTA=Object.freeze(Y.fromCssColorString("#FF00FF"));Y.MAROON=Object.freeze(Y.fromCssColorString("#800000"));Y.MEDIUMAQUAMARINE=Object.freeze(Y.fromCssColorString("#66CDAA"));Y.MEDIUMBLUE=Object.freeze(Y.fromCssColorString("#0000CD"));Y.MEDIUMORCHID=Object.freeze(Y.fromCssColorString("#BA55D3"));Y.MEDIUMPURPLE=Object.freeze(Y.fromCssColorString("#9370DB"));Y.MEDIUMSEAGREEN=Object.freeze(Y.fromCssColorString("#3CB371"));Y.MEDIUMSLATEBLUE=Object.freeze(Y.fromCssColorString("#7B68EE"));Y.MEDIUMSPRINGGREEN=Object.freeze(Y.fromCssColorString("#00FA9A"));Y.MEDIUMTURQUOISE=Object.freeze(Y.fromCssColorString("#48D1CC"));Y.MEDIUMVIOLETRED=Object.freeze(Y.fromCssColorString("#C71585"));Y.MIDNIGHTBLUE=Object.freeze(Y.fromCssColorString("#191970"));Y.MINTCREAM=Object.freeze(Y.fromCssColorString("#F5FFFA"));Y.MISTYROSE=Object.freeze(Y.fromCssColorString("#FFE4E1"));Y.MOCCASIN=Object.freeze(Y.fromCssColorString("#FFE4B5"));Y.NAVAJOWHITE=Object.freeze(Y.fromCssColorString("#FFDEAD"));Y.NAVY=Object.freeze(Y.fromCssColorString("#000080"));Y.OLDLACE=Object.freeze(Y.fromCssColorString("#FDF5E6"));Y.OLIVE=Object.freeze(Y.fromCssColorString("#808000"));Y.OLIVEDRAB=Object.freeze(Y.fromCssColorString("#6B8E23"));Y.ORANGE=Object.freeze(Y.fromCssColorString("#FFA500"));Y.ORANGERED=Object.freeze(Y.fromCssColorString("#FF4500"));Y.ORCHID=Object.freeze(Y.fromCssColorString("#DA70D6"));Y.PALEGOLDENROD=Object.freeze(Y.fromCssColorString("#EEE8AA"));Y.PALEGREEN=Object.freeze(Y.fromCssColorString("#98FB98"));Y.PALETURQUOISE=Object.freeze(Y.fromCssColorString("#AFEEEE"));Y.PALEVIOLETRED=Object.freeze(Y.fromCssColorString("#DB7093"));Y.PAPAYAWHIP=Object.freeze(Y.fromCssColorString("#FFEFD5"));Y.PEACHPUFF=Object.freeze(Y.fromCssColorString("#FFDAB9"));Y.PERU=Object.freeze(Y.fromCssColorString("#CD853F"));Y.PINK=Object.freeze(Y.fromCssColorString("#FFC0CB"));Y.PLUM=Object.freeze(Y.fromCssColorString("#DDA0DD"));Y.POWDERBLUE=Object.freeze(Y.fromCssColorString("#B0E0E6"));Y.PURPLE=Object.freeze(Y.fromCssColorString("#800080"));Y.RED=Object.freeze(Y.fromCssColorString("#FF0000"));Y.ROSYBROWN=Object.freeze(Y.fromCssColorString("#BC8F8F"));Y.ROYALBLUE=Object.freeze(Y.fromCssColorString("#4169E1"));Y.SADDLEBROWN=Object.freeze(Y.fromCssColorString("#8B4513"));Y.SALMON=Object.freeze(Y.fromCssColorString("#FA8072"));Y.SANDYBROWN=Object.freeze(Y.fromCssColorString("#F4A460"));Y.SEAGREEN=Object.freeze(Y.fromCssColorString("#2E8B57"));Y.SEASHELL=Object.freeze(Y.fromCssColorString("#FFF5EE"));Y.SIENNA=Object.freeze(Y.fromCssColorString("#A0522D"));Y.SILVER=Object.freeze(Y.fromCssColorString("#C0C0C0"));Y.SKYBLUE=Object.freeze(Y.fromCssColorString("#87CEEB"));Y.SLATEBLUE=Object.freeze(Y.fromCssColorString("#6A5ACD"));Y.SLATEGRAY=Object.freeze(Y.fromCssColorString("#708090"));Y.SLATEGREY=Y.SLATEGRAY;Y.SNOW=Object.freeze(Y.fromCssColorString("#FFFAFA"));Y.SPRINGGREEN=Object.freeze(Y.fromCssColorString("#00FF7F"));Y.STEELBLUE=Object.freeze(Y.fromCssColorString("#4682B4"));Y.TAN=Object.freeze(Y.fromCssColorString("#D2B48C"));Y.TEAL=Object.freeze(Y.fromCssColorString("#008080"));Y.THISTLE=Object.freeze(Y.fromCssColorString("#D8BFD8"));Y.TOMATO=Object.freeze(Y.fromCssColorString("#FF6347"));Y.TURQUOISE=Object.freeze(Y.fromCssColorString("#40E0D0"));Y.VIOLET=Object.freeze(Y.fromCssColorString("#EE82EE"));Y.WHEAT=Object.freeze(Y.fromCssColorString("#F5DEB3"));Y.WHITE=Object.freeze(Y.fromCssColorString("#FFFFFF"));Y.WHITESMOKE=Object.freeze(Y.fromCssColorString("#F5F5F5"));Y.YELLOW=Object.freeze(Y.fromCssColorString("#FFFF00"));Y.YELLOWGREEN=Object.freeze(Y.fromCssColorString("#9ACD32"));Y.TRANSPARENT=Object.freeze(new Y(0,0,0,0));var F=Y;function cI(e){e=e??k.EMPTY_OBJECT,this.color=e.color,this.depth=e.depth,this.stencil=e.stencil,this.renderState=e.renderState,this.framebuffer=e.framebuffer,this.owner=e.owner,this.pass=e.pass}cI.ALL=Object.freeze(new cI({color:new F(0,0,0,0),depth:1,stencil:0}));cI.prototype.execute=function(e,t){e.clear(this,t)};var AI=cI;var o6={ENVIRONMENT:0,COMPUTE:1,GLOBE:2,TERRAIN_CLASSIFICATION:3,CESIUM_3D_TILE:4,CESIUM_3D_TILE_CLASSIFICATION:5,CESIUM_3D_TILE_CLASSIFICATION_IGNORE_SHOW:6,OPAQUE:7,TRANSLUCENT:8,VOXELS:9,GAUSSIAN_SPLATS:10,OVERLAY:11,NUMBER_OF_PASSES:12},Ye=Object.freeze(o6);function Ov(e){e=e??k.EMPTY_OBJECT,this.vertexArray=e.vertexArray,this.fragmentShaderSource=e.fragmentShaderSource,this.shaderProgram=e.shaderProgram,this.uniformMap=e.uniformMap,this.outputTexture=e.outputTexture,this.preExecute=e.preExecute,this.postExecute=e.postExecute,this.canceled=e.canceled,this.persists=e.persists??!1,this.pass=Ye.COMPUTE,this.owner=e.owner}Ov.prototype.execute=function(e){e.execute(this)};var Rf=Ov;function ot(e,t){this.x=e??0,this.y=t??0}ot.fromElements=function(e,t,n){return c(n)?(n.x=e,n.y=t,n):new ot(e,t)};ot.clone=function(e,t){if(c(e))return c(t)?(t.x=e.x,t.y=e.y,t):new ot(e.x,e.y)};ot.fromCartesian3=ot.clone;ot.fromCartesian4=ot.clone;ot.packedLength=2;ot.pack=function(e,t,n){return n=n??0,t[n++]=e.x,t[n]=e.y,t};ot.unpack=function(e,t,n){return t=t??0,c(n)||(n=new ot),n.x=e[t++],n.y=e[t],n};ot.packArray=function(e,t){let n=e.length,i=n*2;c(t)?!Array.isArray(t)&&t.length!==i||t.length!==i&&(t.length=i):t=new Array(i);for(let o=0;o<n;++o)ot.pack(e[o],t,o*2);return t};ot.unpackArray=function(e,t){let n=e.length;c(t)?t.length=n/2:t=new Array(n/2);for(let i=0;i<n;i+=2){let o=i/2;t[o]=ot.unpack(e,i,t[o])}return t};ot.fromArray=ot.unpack;ot.maximumComponent=function(e){return Math.max(e.x,e.y)};ot.minimumComponent=function(e){return Math.min(e.x,e.y)};ot.minimumByComponent=function(e,t,n){return n.x=Math.min(e.x,t.x),n.y=Math.min(e.y,t.y),n};ot.maximumByComponent=function(e,t,n){return n.x=Math.max(e.x,t.x),n.y=Math.max(e.y,t.y),n};ot.clamp=function(e,t,n,i){let o=w.clamp(e.x,t.x,n.x),r=w.clamp(e.y,t.y,n.y);return i.x=o,i.y=r,i};ot.magnitudeSquared=function(e){return e.x*e.x+e.y*e.y};ot.magnitude=function(e){return Math.sqrt(ot.magnitudeSquared(e))};var lI=new ot;ot.distance=function(e,t){return ot.subtract(e,t,lI),ot.magnitude(lI)};ot.distanceSquared=function(e,t){return ot.subtract(e,t,lI),ot.magnitudeSquared(lI)};ot.normalize=function(e,t){let n=ot.magnitude(e);return t.x=e.x/n,t.y=e.y/n,t};ot.dot=function(e,t){return e.x*t.x+e.y*t.y};ot.cross=function(e,t){return e.x*t.y-e.y*t.x};ot.multiplyComponents=function(e,t,n){return n.x=e.x*t.x,n.y=e.y*t.y,n};ot.divideComponents=function(e,t,n){return n.x=e.x/t.x,n.y=e.y/t.y,n};ot.add=function(e,t,n){return n.x=e.x+t.x,n.y=e.y+t.y,n};ot.subtract=function(e,t,n){return n.x=e.x-t.x,n.y=e.y-t.y,n};ot.multiplyByScalar=function(e,t,n){return n.x=e.x*t,n.y=e.y*t,n};ot.divideByScalar=function(e,t,n){return n.x=e.x/t,n.y=e.y/t,n};ot.negate=function(e,t){return t.x=-e.x,t.y=-e.y,t};ot.abs=function(e,t){return t.x=Math.abs(e.x),t.y=Math.abs(e.y),t};var Lv=new ot;ot.lerp=function(e,t,n,i){return ot.multiplyByScalar(t,n,Lv),i=ot.multiplyByScalar(e,1-n,i),ot.add(Lv,i,i)};var Nv=new ot,Fv=new ot;ot.angleBetween=function(e,t){return ot.normalize(e,Nv),ot.normalize(t,Fv),w.acosClamped(ot.dot(Nv,Fv))};var r6=new ot;ot.mostOrthogonalAxis=function(e,t){let n=ot.normalize(e,r6);return ot.abs(n,n),n.x<=n.y?t=ot.clone(ot.UNIT_X,t):t=ot.clone(ot.UNIT_Y,t),t};ot.equals=function(e,t){return e===t||c(e)&&c(t)&&e.x===t.x&&e.y===t.y};ot.equalsArray=function(e,t,n){return e.x===t[n]&&e.y===t[n+1]};ot.equalsEpsilon=function(e,t,n,i){return e===t||c(e)&&c(t)&&w.equalsEpsilon(e.x,t.x,n,i)&&w.equalsEpsilon(e.y,t.y,n,i)};ot.ZERO=Object.freeze(new ot(0,0));ot.ONE=Object.freeze(new ot(1,1));ot.UNIT_X=Object.freeze(new ot(1,0));ot.UNIT_Y=Object.freeze(new ot(0,1));ot.prototype.clone=function(e){return ot.clone(this,e)};ot.prototype.equals=function(e){return ot.equals(this,e)};ot.prototype.equalsEpsilon=function(e,t,n){return ot.equalsEpsilon(this,e,t,n)};ot.prototype.toString=function(){return`(${this.x}, ${this.y})`};var U=ot;var a6=new u,s6=new u;function c6(e,t,n,i,o){let r=e.x,a=e.y,s=e.z,A=t.x,l=t.y,f=t.z,h=r*r*A*A,m=a*a*l*l,p=s*s*f*f,g=h+m+p,C=Math.sqrt(1/g),_=u.multiplyByScalar(e,C,a6);if(g<i)return isFinite(C)?u.clone(_,o):void 0;let E=n.x,I=n.y,y=n.z,b=s6;b.x=_.x*E*2,b.y=_.y*I*2,b.z=_.z*y*2;let x=(1-C)*u.magnitude(e)/(.5*u.magnitude(b)),S=0,P,D,Q,v,d,B,T,R,L,G,q;do{x-=S,Q=1/(1+x*E),v=1/(1+x*I),d=1/(1+x*y),B=Q*Q,T=v*v,R=d*d,L=B*Q,G=T*v,q=R*d,P=h*B+m*T+p*R-1,D=h*L*E+m*G*I+p*q*y;let z=-2*D;S=P/z}while(Math.abs(P)>w.EPSILON12);return c(o)?(o.x=r*Q,o.y=a*v,o.z=s*d,o):new u(r*Q,a*v,s*d)}var fI=c6;function Ii(e,t,n){this.longitude=e??0,this.latitude=t??0,this.height=n??0}Ii.fromRadians=function(e,t,n,i){return n=n??0,c(i)?(i.longitude=e,i.latitude=t,i.height=n,i):new Ii(e,t,n)};Ii.fromDegrees=function(e,t,n,i){return e=w.toRadians(e),t=w.toRadians(t),Ii.fromRadians(e,t,n,i)};var A6=new u,l6=new u,f6=new u;Ii._ellipsoidOneOverRadii=new u(1/6378137,1/6378137,1/6356752314245179e-9);Ii._ellipsoidOneOverRadiiSquared=new u(1/(6378137*6378137),1/(6378137*6378137),1/(6356752314245179e-9*6356752314245179e-9));Ii._ellipsoidCenterToleranceSquared=w.EPSILON1;Ii.fromCartesian=function(e,t,n){let i=c(t)?t.oneOverRadii:Ii._ellipsoidOneOverRadii,o=c(t)?t.oneOverRadiiSquared:Ii._ellipsoidOneOverRadiiSquared,r=c(t)?t._centerToleranceSquared:Ii._ellipsoidCenterToleranceSquared,a=fI(e,i,o,r,l6);if(!c(a))return;let s=u.multiplyComponents(a,o,A6);s=u.normalize(s,s);let A=u.subtract(e,a,f6),l=Math.atan2(s.y,s.x),f=Math.asin(s.z),h=w.sign(u.dot(A,e))*u.magnitude(A);return c(n)?(n.longitude=l,n.latitude=f,n.height=h,n):new Ii(l,f,h)};Ii.toCartesian=function(e,t,n){return u.fromRadians(e.longitude,e.latitude,e.height,t,n)};Ii.clone=function(e,t){if(c(e))return c(t)?(t.longitude=e.longitude,t.latitude=e.latitude,t.height=e.height,t):new Ii(e.longitude,e.latitude,e.height)};Ii.equals=function(e,t){return e===t||c(e)&&c(t)&&e.longitude===t.longitude&&e.latitude===t.latitude&&e.height===t.height};Ii.equalsEpsilon=function(e,t,n){return n=n??0,e===t||c(e)&&c(t)&&Math.abs(e.longitude-t.longitude)<=n&&Math.abs(e.latitude-t.latitude)<=n&&Math.abs(e.height-t.height)<=n};Ii.ZERO=Object.freeze(new Ii(0,0,0));Ii.prototype.clone=function(e){return Ii.clone(this,e)};Ii.prototype.equals=function(e){return Ii.equals(this,e)};Ii.prototype.equalsEpsilon=function(e,t){return Ii.equalsEpsilon(this,e,t)};Ii.prototype.toString=function(){return`(${this.longitude}, ${this.latitude}, ${this.height})`};var ae=Ii;function Uv(e,t,n,i){t=t??0,n=n??0,i=i??0,e._radii=new u(t,n,i),e._radiiSquared=new u(t*t,n*n,i*i),e._radiiToTheFourth=new u(t*t*t*t,n*n*n*n,i*i*i*i),e._oneOverRadii=new u(t===0?0:1/t,n===0?0:1/n,i===0?0:1/i),e._oneOverRadiiSquared=new u(t===0?0:1/(t*t),n===0?0:1/(n*n),i===0?0:1/(i*i)),e._minimumRadius=Math.min(t,n,i),e._maximumRadius=Math.max(t,n,i),e._centerToleranceSquared=w.EPSILON1,e._radiiSquared.z!==0&&(e._squaredXOverSquaredZ=e._radiiSquared.x/e._radiiSquared.z)}function hn(e,t,n){this._radii=void 0,this._radiiSquared=void 0,this._radiiToTheFourth=void 0,this._oneOverRadii=void 0,this._oneOverRadiiSquared=void 0,this._minimumRadius=void 0,this._maximumRadius=void 0,this._centerToleranceSquared=void 0,this._squaredXOverSquaredZ=void 0,Uv(this,e,t,n)}Object.defineProperties(hn.prototype,{radii:{get:function(){return this._radii}},radiiSquared:{get:function(){return this._radiiSquared}},radiiToTheFourth:{get:function(){return this._radiiToTheFourth}},oneOverRadii:{get:function(){return this._oneOverRadii}},oneOverRadiiSquared:{get:function(){return this._oneOverRadiiSquared}},minimumRadius:{get:function(){return this._minimumRadius}},maximumRadius:{get:function(){return this._maximumRadius}}});hn.clone=function(e,t){if(!c(e))return;let n=e._radii;return c(t)?(u.clone(n,t._radii),u.clone(e._radiiSquared,t._radiiSquared),u.clone(e._radiiToTheFourth,t._radiiToTheFourth),u.clone(e._oneOverRadii,t._oneOverRadii),u.clone(e._oneOverRadiiSquared,t._oneOverRadiiSquared),t._minimumRadius=e._minimumRadius,t._maximumRadius=e._maximumRadius,t._centerToleranceSquared=e._centerToleranceSquared,t):new hn(n.x,n.y,n.z)};hn.fromCartesian3=function(e,t){return c(t)||(t=new hn),c(e)&&Uv(t,e.x,e.y,e.z),t};hn.WGS84=Object.freeze(new hn(6378137,6378137,6356752314245179e-9));hn.UNIT_SPHERE=Object.freeze(new hn(1,1,1));hn.MOON=Object.freeze(new hn(w.LUNAR_RADIUS,w.LUNAR_RADIUS,w.LUNAR_RADIUS));hn.MARS=Object.freeze(new hn(3396190,3396190,3376200));hn._default=hn.WGS84;Object.defineProperties(hn,{default:{get:function(){return hn._default},set:function(e){hn._default=e,u._ellipsoidRadiiSquared=e.radiiSquared,ae._ellipsoidOneOverRadii=e.oneOverRadii,ae._ellipsoidOneOverRadiiSquared=e.oneOverRadiiSquared,ae._ellipsoidCenterToleranceSquared=e._centerToleranceSquared}}});hn.prototype.clone=function(e){return hn.clone(this,e)};hn.packedLength=u.packedLength;hn.pack=function(e,t,n){return n=n??0,u.pack(e._radii,t,n),t};hn.unpack=function(e,t,n){t=t??0;let i=u.unpack(e,t);return hn.fromCartesian3(i,n)};hn.prototype.geocentricSurfaceNormal=u.normalize;hn.prototype.geodeticSurfaceNormalCartographic=function(e,t){let n=e.longitude,i=e.latitude,o=Math.cos(i),r=o*Math.cos(n),a=o*Math.sin(n),s=Math.sin(i);return c(t)||(t=new u),t.x=r,t.y=a,t.z=s,u.normalize(t,t)};hn.prototype.geodeticSurfaceNormal=function(e,t){if(!u.equalsEpsilon(e,u.ZERO,w.EPSILON14))return c(t)||(t=new u),t=u.multiplyComponents(e,this._oneOverRadiiSquared,t),u.normalize(t,t)};var u6=new u,d6=new u;hn.prototype.cartographicToCartesian=function(e,t){let n=u6,i=d6;this.geodeticSurfaceNormalCartographic(e,n),u.multiplyComponents(this._radiiSquared,n,i);let o=Math.sqrt(u.dot(n,i));return u.divideByScalar(i,o,i),u.multiplyByScalar(n,e.height,n),c(t)||(t=new u),u.add(i,n,t)};hn.prototype.cartographicArrayToCartesianArray=function(e,t){let n=e.length;c(t)?t.length=n:t=new Array(n);for(let i=0;i<n;i++)t[i]=this.cartographicToCartesian(e[i],t[i]);return t};var h6=new u,m6=new u,p6=new u;hn.prototype.cartesianToCartographic=function(e,t){let n=this.scaleToGeodeticSurface(e,m6);if(!c(n))return;let i=this.geodeticSurfaceNormal(n,h6),o=u.subtract(e,n,p6),r=Math.atan2(i.y,i.x),a=Math.asin(i.z),s=w.sign(u.dot(o,e))*u.magnitude(o);return c(t)?(t.longitude=r,t.latitude=a,t.height=s,t):new ae(r,a,s)};hn.prototype.cartesianArrayToCartographicArray=function(e,t){let n=e.length;c(t)?t.length=n:t=new Array(n);for(let i=0;i<n;++i)t[i]=this.cartesianToCartographic(e[i],t[i]);return t};hn.prototype.scaleToGeodeticSurface=function(e,t){return fI(e,this._oneOverRadii,this._oneOverRadiiSquared,this._centerToleranceSquared,t)};hn.prototype.scaleToGeocentricSurface=function(e,t){c(t)||(t=new u);let n=e.x,i=e.y,o=e.z,r=this._oneOverRadiiSquared,a=1/Math.sqrt(n*n*r.x+i*i*r.y+o*o*r.z);return u.multiplyByScalar(e,a,t)};hn.prototype.transformPositionToScaledSpace=function(e,t){return c(t)||(t=new u),u.multiplyComponents(e,this._oneOverRadii,t)};hn.prototype.transformPositionFromScaledSpace=function(e,t){return c(t)||(t=new u),u.multiplyComponents(e,this._radii,t)};hn.prototype.equals=function(e){return this===e||c(e)&&u.equals(this._radii,e._radii)};hn.prototype.toString=function(){return this._radii.toString()};hn.prototype.getSurfaceNormalIntersectionWithZAxis=function(e,t,n){t=t??0;let i=this._squaredXOverSquaredZ;if(c(n)||(n=new u),n.x=0,n.y=0,n.z=e.z*(1-i),!(Math.abs(n.z)>=this._radii.z-t))return n};var g6=new u;hn.prototype.getLocalCurvature=function(e,t){c(t)||(t=new U);let n=this.getSurfaceNormalIntersectionWithZAxis(e,0,g6),i=u.distance(e,n),o=this.minimumRadius*i/this.maximumRadius**2,r=i*o**2;return U.fromElements(1/i,1/r,t)};var C6=[.14887433898163,.43339539412925,.67940956829902,.86506336668898,.97390652851717,0],_6=[.29552422471475,.26926671930999,.21908636251598,.14945134915058,.066671344308684,0];function kv(e,t,n){let i=.5*(t+e),o=.5*(t-e),r=0;for(let a=0;a<5;a++){let s=o*C6[a];r+=_6[a]*(n(i+s)+n(i-s))}return r*=o,r}hn.prototype.surfaceArea=function(e){let t=e.west,n=e.east,i=e.south,o=e.north;for(;n<t;)n+=w.TWO_PI;let r=this._radiiSquared,a=r.x,s=r.y,A=r.z,l=a*s;return kv(i,o,function(f){let h=Math.cos(f),m=Math.sin(f);return Math.cos(f)*kv(t,n,function(p){let g=Math.cos(p),C=Math.sin(p);return Math.sqrt(l*m*m+A*(s*g*g+a*C*C)*h*h)})})};var Z=hn;function uI(e){this._ellipsoid=e??Z.default,this._semimajorAxis=this._ellipsoid.maximumRadius,this._oneOverSemimajorAxis=1/this._semimajorAxis}Object.defineProperties(uI.prototype,{ellipsoid:{get:function(){return this._ellipsoid}}});uI.prototype.project=function(e,t){let n=this._semimajorAxis,i=e.longitude*n,o=e.latitude*n,r=e.height;return c(t)?(t.x=i,t.y=o,t.z=r,t):new u(i,o,r)};uI.prototype.unproject=function(e,t){let n=this._oneOverSemimajorAxis,i=e.x*n,o=e.y*n,r=e.z;return c(t)?(t.longitude=i,t.latitude=o,t.height=r,t):new ae(i,o,r)};var Ai=uI;var E6={OUTSIDE:-1,INTERSECTING:0,INSIDE:1},vt=Object.freeze(E6);function I6(e,t,n){let i=0,o=e.length-1,r,a;for(;i<=o;){if(r=~~((i+o)/2),a=n(e[r],t),a<0){i=r+1;continue}if(a>0){o=r-1;continue}return r}return~(o+1)}var sr=I6;function y6(e,t,n,i,o){this.xPoleWander=e,this.yPoleWander=t,this.xPoleOffset=n,this.yPoleOffset=i,this.ut1MinusUtc=o}var vg=y6;function b6(e){return e%4===0&&e%100!==0||e%400===0}var vf=b6;var Gv=[31,28,31,30,31,30,31,31,30,31,30,31];function B6(e,t,n,i,o,r,a,s){e=e??1,t=t??1,n=n??1,i=i??0,o=o??0,r=r??0,a=a??0,s=s??!1,this.year=e,this.month=t,this.day=n,this.hour=i,this.minute=o,this.second=r,this.millisecond=a,this.isLeapSecond=s;function C(){Ei.typeOf.number.greaterThanOrEquals("Year",e,1),Ei.typeOf.number.lessThanOrEquals("Year",e,9999),Ei.typeOf.number.greaterThanOrEquals("Month",t,1),Ei.typeOf.number.lessThanOrEquals("Month",t,12),Ei.typeOf.number.greaterThanOrEquals("Day",n,1),Ei.typeOf.number.lessThanOrEquals("Day",n,31),Ei.typeOf.number.greaterThanOrEquals("Hour",i,0),Ei.typeOf.number.lessThanOrEquals("Hour",i,23),Ei.typeOf.number.greaterThanOrEquals("Minute",o,0),Ei.typeOf.number.lessThanOrEquals("Minute",o,59),Ei.typeOf.bool("IsLeapSecond",s),Ei.typeOf.number.greaterThanOrEquals("Second",r,0),Ei.typeOf.number.lessThanOrEquals("Second",r,s?60:59),Ei.typeOf.number.greaterThanOrEquals("Millisecond",a,0),Ei.typeOf.number.lessThan("Millisecond",a,1e3)}function _(){let E=t===2&&vf(e)?Gv[t-1]+1:Gv[t-1];if(n>E)throw new Ee("Month and Day represents invalid date")}}var Vh=B6;function x6(e,t){this.julianDate=e,this.offset=t}var Xn=x6;var T6={SECONDS_PER_MILLISECOND:.001,SECONDS_PER_MINUTE:60,MINUTES_PER_HOUR:60,HOURS_PER_DAY:24,SECONDS_PER_HOUR:3600,MINUTES_PER_DAY:1440,SECONDS_PER_DAY:86400,DAYS_PER_JULIAN_CENTURY:36525,PICOSECOND:1e-9,MODIFIED_JULIAN_DATE_DIFFERENCE:24000005e-1},yi=Object.freeze(T6);var S6={UTC:0,TAI:1},mn=Object.freeze(S6);var Hv=new Vh,_x=[31,28,31,30,31,30,31,31,30,31,30,31],Ex=29;function Ix(e,t){return et.compare(e.julianDate,t.julianDate)}var jh=new Xn;function hI(e){jh.julianDate=e;let t=et.leapSeconds,n=sr(t,jh,Ix);n<0&&(n=~n),n>=t.length&&(n=t.length-1);let i=t[n].offset;n>0&&et.secondsDifference(t[n].julianDate,e)>i&&(n--,i=t[n].offset),et.addSeconds(e,i,e)}function zv(e,t){jh.julianDate=e;let n=et.leapSeconds,i=sr(n,jh,Ix);if(i<0&&(i=~i),i===0)return et.addSeconds(e,-n[0].offset,t);if(i>=n.length)return et.addSeconds(e,-n[i-1].offset,t);let o=et.secondsDifference(n[i].julianDate,e);if(o===0)return et.addSeconds(e,-n[i].offset,t);if(!(o<=1))return et.addSeconds(e,-n[--i].offset,t)}function Pf(e,t,n){let i=t/yi.SECONDS_PER_DAY|0;return e+=i,t-=yi.SECONDS_PER_DAY*i,t<0&&(e--,t+=yi.SECONDS_PER_DAY),n.dayNumber=e,n.secondsOfDay=t,n}function yx(e,t,n,i,o,r,a){let s=(t-14)/12|0,A=e+4800+s,l=(1461*A/4|0)+(367*(t-2-12*s)/12|0)-(3*((A+100)/100|0)/4|0)+n-32075;i=i-12,i<0&&(i+=24);let f=r+(i*yi.SECONDS_PER_HOUR+o*yi.SECONDS_PER_MINUTE+a*yi.SECONDS_PER_MILLISECOND);return f>=43200&&(l-=1),[l,f]}var w6=/^(\d{4})$/,D6=/^(\d{4})-(\d{2})$/,Q6=/^(\d{4})-?(\d{3})$/,R6=/^(\d{4})-?W(\d{2})-?(\d{1})?$/,v6=/^(\d{4})-?(\d{2})-?(\d{2})$/,bx=/([Z+\-])?(\d{2})?:?(\d{2})?$/,P6=/^(\d{2})(\.\d+)?/.source+bx.source,M6=/^(\d{2}):?(\d{2})(\.\d+)?/.source+bx.source,O6=/^(\d{2}):?(\d{2}):?(\d{2})(\.\d+)?/.source+bx.source;function et(e,t,n){this.dayNumber=void 0,this.secondsOfDay=void 0,e=e??0,t=t??0,n=n??mn.UTC;let i=e|0;t=t+(e-i)*yi.SECONDS_PER_DAY,Pf(i,t,this),n===mn.UTC&&hI(this)}et.fromGregorianDate=function(e,t){let n=yx(e.year,e.month,e.day,e.hour,e.minute,e.second,e.millisecond);return c(t)?(Pf(n[0],n[1],t),hI(t),t):new et(n[0],n[1],mn.UTC)};et.fromDate=function(e,t){let n=yx(e.getUTCFullYear(),e.getUTCMonth()+1,e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds());return c(t)?(Pf(n[0],n[1],t),hI(t),t):new et(n[0],n[1],mn.UTC)};et.fromIso8601=function(e,t){e=e.replace(",",".");let n=e.split("T"),i,o=1,r=1,a=0,s=0,A=0,l=0,f=n[0],h=n[1],m,p;if(n=f.match(v6),n!==null)i=+n[1],o=+n[2],r=+n[3];else if(n=f.match(D6),n!==null)i=+n[1],o=+n[2];else if(n=f.match(w6),n!==null)i=+n[1];else{let E;if(n=f.match(Q6),n!==null)i=+n[1],E=+n[2],p=vf(i);else if(n=f.match(R6),n!==null){i=+n[1];let I=+n[2],y=+n[3]||0,b=new Date(Date.UTC(i,0,4));E=I*7+y-b.getUTCDay()-3}m=new Date(Date.UTC(i,0,1)),m.setUTCDate(E),o=m.getUTCMonth()+1,r=m.getUTCDate()}p=vf(i);let g;if(c(h)){n=h.match(O6),n!==null?(a=+n[1],s=+n[2],A=+n[3],l=+(n[4]||0)*1e3,g=5):(n=h.match(M6),n!==null?(a=+n[1],s=+n[2],A=+(n[3]||0)*60,g=4):(n=h.match(P6),n!==null&&(a=+n[1],s=+(n[2]||0)*60,g=3)));let E=n[g],I=+n[g+1],y=+(n[g+2]||0);switch(E){case"+":a=a-I,s=s-y;break;case"-":a=a+I,s=s+y;break;case"Z":break;default:s=s+new Date(Date.UTC(i,o-1,r,a,s)).getTimezoneOffset();break}}let C=A===60;for(C&&A--;s>=60;)s-=60,a++;for(;a>=24;)a-=24,r++;for(m=p&&o===2?Ex:_x[o-1];r>m;)r-=m,o++,o>12&&(o-=12,i++),m=p&&o===2?Ex:_x[o-1];for(;s<0;)s+=60,a--;for(;a<0;)a+=24,r--;for(;r<1;)o--,o<1&&(o+=12,i--),m=p&&o===2?Ex:_x[o-1],r+=m;let _=yx(i,o,r,a,s,A,l);return c(t)?(Pf(_[0],_[1],t),hI(t)):t=new et(_[0],_[1],mn.UTC),C&&et.addSeconds(t,1,t),t};et.now=function(e){return et.fromDate(new Date,e)};var dI=new et(0,0,mn.TAI);et.toGregorianDate=function(e,t){let n=!1,i=zv(e,dI);c(i)||(et.addSeconds(e,-1,dI),i=zv(dI,dI),n=!0);let o=i.dayNumber,r=i.secondsOfDay;r>=43200&&(o+=1);let a=o+68569|0,s=4*a/146097|0;a=a-((146097*s+3)/4|0)|0;let A=4e3*(a+1)/1461001|0;a=a-(1461*A/4|0)+31|0;let l=80*a/2447|0,f=a-(2447*l/80|0)|0;a=l/11|0;let h=l+2-12*a|0,m=100*(s-49)+A+a|0,p=r/yi.SECONDS_PER_HOUR|0,g=r-p*yi.SECONDS_PER_HOUR,C=g/yi.SECONDS_PER_MINUTE|0;g=g-C*yi.SECONDS_PER_MINUTE;let _=g|0,E=(g-_)/yi.SECONDS_PER_MILLISECOND;return p+=12,p>23&&(p-=24),n&&(_+=1),c(t)?(t.year=m,t.month=h,t.day=f,t.hour=p,t.minute=C,t.second=_,t.millisecond=E,t.isLeapSecond=n,t):new Vh(m,h,f,p,C,_,E,n)};et.toDate=function(e){let t=et.toGregorianDate(e,Hv),n=t.second;return t.isLeapSecond&&(n-=1),new Date(Date.UTC(t.year,t.month-1,t.day,t.hour,t.minute,n,t.millisecond))};et.toIso8601=function(e,t){let n=et.toGregorianDate(e,Hv),i=n.year,o=n.month,r=n.day,a=n.hour,s=n.minute,A=n.second,l=n.millisecond;i===1e4&&o===1&&r===1&&a===0&&s===0&&A===0&&l===0&&(i=9999,o=12,r=31,a=24);let f;if(!c(t)&&l!==0){let h=l*.01;return f=h<1e-6?h.toFixed(20).replace(".","").replace(/0+$/,""):h.toString().replace(".",""),`${i.toString().padStart(4,"0")}-${o.toString().padStart(2,"0")}-${r.toString().padStart(2,"0")}T${a.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}:${A.toString().padStart(2,"0")}.${f}Z`}return!c(t)||t===0?`${i.toString().padStart(4,"0")}-${o.toString().padStart(2,"0")}-${r.toString().padStart(2,"0")}T${a.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}:${A.toString().padStart(2,"0")}Z`:(f=(l*.01).toFixed(t).replace(".","").slice(0,t),`${i.toString().padStart(4,"0")}-${o.toString().padStart(2,"0")}-${r.toString().padStart(2,"0")}T${a.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}:${A.toString().padStart(2,"0")}.${f}Z`)};et.clone=function(e,t){if(c(e))return c(t)?(t.dayNumber=e.dayNumber,t.secondsOfDay=e.secondsOfDay,t):new et(e.dayNumber,e.secondsOfDay,mn.TAI)};et.compare=function(e,t){let n=e.dayNumber-t.dayNumber;return n!==0?n:e.secondsOfDay-t.secondsOfDay};et.equals=function(e,t){return e===t||c(e)&&c(t)&&e.dayNumber===t.dayNumber&&e.secondsOfDay===t.secondsOfDay};et.equalsEpsilon=function(e,t,n){return n=n??0,e===t||c(e)&&c(t)&&Math.abs(et.secondsDifference(e,t))<=n};et.totalDays=function(e){return e.dayNumber+e.secondsOfDay/yi.SECONDS_PER_DAY};et.secondsDifference=function(e,t){return(e.dayNumber-t.dayNumber)*yi.SECONDS_PER_DAY+(e.secondsOfDay-t.secondsOfDay)};et.daysDifference=function(e,t){let n=e.dayNumber-t.dayNumber,i=(e.secondsOfDay-t.secondsOfDay)/yi.SECONDS_PER_DAY;return n+i};et.computeTaiMinusUtc=function(e){jh.julianDate=e;let t=et.leapSeconds,n=sr(t,jh,Ix);return n<0&&(n=~n,--n,n<0&&(n=0)),t[n].offset};et.addSeconds=function(e,t,n){return Pf(e.dayNumber,e.secondsOfDay+t,n)};et.addMinutes=function(e,t,n){let i=e.secondsOfDay+t*yi.SECONDS_PER_MINUTE;return Pf(e.dayNumber,i,n)};et.addHours=function(e,t,n){let i=e.secondsOfDay+t*yi.SECONDS_PER_HOUR;return Pf(e.dayNumber,i,n)};et.addDays=function(e,t,n){let i=e.dayNumber+t;return Pf(i,e.secondsOfDay,n)};et.lessThan=function(e,t){return et.compare(e,t)<0};et.lessThanOrEquals=function(e,t){return et.compare(e,t)<=0};et.greaterThan=function(e,t){return et.compare(e,t)>0};et.greaterThanOrEquals=function(e,t){return et.compare(e,t)>=0};et.prototype.clone=function(e){return et.clone(this,e)};et.prototype.equals=function(e){return et.equals(this,e)};et.prototype.equalsEpsilon=function(e,t){return et.equalsEpsilon(this,e,t)};et.prototype.toString=function(){return et.toIso8601(this)};et.leapSeconds=[new Xn(new et(2441317,43210,mn.TAI),10),new Xn(new et(2441499,43211,mn.TAI),11),new Xn(new et(2441683,43212,mn.TAI),12),new Xn(new et(2442048,43213,mn.TAI),13),new Xn(new et(2442413,43214,mn.TAI),14),new Xn(new et(2442778,43215,mn.TAI),15),new Xn(new et(2443144,43216,mn.TAI),16),new Xn(new et(2443509,43217,mn.TAI),17),new Xn(new et(2443874,43218,mn.TAI),18),new Xn(new et(2444239,43219,mn.TAI),19),new Xn(new et(2444786,43220,mn.TAI),20),new Xn(new et(2445151,43221,mn.TAI),21),new Xn(new et(2445516,43222,mn.TAI),22),new Xn(new et(2446247,43223,mn.TAI),23),new Xn(new et(2447161,43224,mn.TAI),24),new Xn(new et(2447892,43225,mn.TAI),25),new Xn(new et(2448257,43226,mn.TAI),26),new Xn(new et(2448804,43227,mn.TAI),27),new Xn(new et(2449169,43228,mn.TAI),28),new Xn(new et(2449534,43229,mn.TAI),29),new Xn(new et(2450083,43230,mn.TAI),30),new Xn(new et(2450630,43231,mn.TAI),31),new Xn(new et(2451179,43232,mn.TAI),32),new Xn(new et(2453736,43233,mn.TAI),33),new Xn(new et(2454832,43234,mn.TAI),34),new Xn(new et(2456109,43235,mn.TAI),35),new Xn(new et(2457204,43236,mn.TAI),36),new Xn(new et(2457754,43237,mn.TAI),37)];var X=et;var pP=qr(pc(),1);function L6(e){return(e.length===0||e[e.length-1]!=="/")&&(e=`${e}/`),e}var Kv=L6;function Xv(e,t){if(e===null||typeof e!="object")return e;t=t??!1;let n=new e.constructor;for(let i in e)if(e.hasOwnProperty(i)){let o=e[i];t&&(o=Xv(o,t)),n[i]=o}return n}var Ne=Xv;function Zv(e,t,n){n=n??!1;let i={},o=c(e),r=c(t),a,s,A;if(o)for(a in e)e.hasOwnProperty(a)&&(s=e[a],r&&n&&typeof s=="object"&&t.hasOwnProperty(a)?(A=t[a],typeof A=="object"?i[a]=Zv(s,A,n):i[a]=s):i[a]=s);if(r)for(a in t)t.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(A=t[a],i[a]=A);return i}var Et=Zv;function N6(){let e,t,n=new Promise(function(i,o){e=i,t=o});return{resolve:e,reject:t,promise:n}}var fd=N6;var $v=qr(pc(),1);function Bx(e,t){let n;return typeof document<"u"&&(n=document),Bx._implementation(e,t,n)}Bx._implementation=function(e,t,n){if(!c(t)){if(typeof n>"u")return e;t=n.baseURI??n.location.href}let i=new $v.default(e);return i.scheme()!==""?i.toString():i.absoluteTo(t).toString()};var ud=Bx;var eP=qr(pc(),1);function F6(e,t){let n="",i=e.lastIndexOf("/");return i!==-1&&(n=e.substring(0,i+1)),t&&(e=new eP.default(e),e.query().length!==0&&(n+=`?${e.query()}`),e.fragment().length!==0&&(n+=`#${e.fragment()}`)),n}var tP=F6;var nP=qr(pc(),1);function k6(e){let t=new nP.default(e);t.normalize();let n=t.path(),i=n.lastIndexOf("/");return i!==-1&&(n=n.substr(i+1)),i=n.lastIndexOf("."),i===-1?n="":n=n.substr(i+1),n}var iP=k6;var oP={};function U6(e,t,n){c(t)||(t=e.width),c(n)||(n=e.height);let i=oP[t];c(i)||(i={},oP[t]=i);let o=i[n];if(!c(o)){let r=document.createElement("canvas");r.width=t,r.height=n,o=r.getContext("2d",{willReadFrequently:!0}),o.globalCompositeOperation="copy",i[n]=o}return o.drawImage(e,0,0,t,n),o.getImageData(0,0,t,n).data}var Wh=U6;var G6=/^blob:/i;function z6(e){return G6.test(e)}var CI=z6;var aA;function H6(e){c(aA)||(aA=document.createElement("a")),aA.href=window.location.href;let t=aA.host,n=aA.protocol;return aA.href=e,aA.href=aA.href,n!==aA.protocol||t!==aA.host}var Pg=H6;var V6=/^data:/i;function j6(e){return V6.test(e)}var Jh=j6;function Y6(e){let t=document.createElement("script");return t.async=!0,t.src=e,new Promise((n,i)=>{window.crossOriginIsolated&&t.setAttribute("crossorigin","anonymous");let o=document.getElementsByTagName("head")[0];t.onload=function(){t.onload=void 0,o.removeChild(t),n()},t.onerror=function(r){i(r)},o.appendChild(t)})}var rP=Y6;function q6(e){let t="";for(let n in e)if(e.hasOwnProperty(n)){let i=e[n],o=`${encodeURIComponent(n)}=`;if(Array.isArray(i))for(let r=0,a=i.length;r<a;++r)t+=`${o+encodeURIComponent(i[r])}&`;else t+=`${o+encodeURIComponent(i)}&`}return t=t.slice(0,-1),t}var aP=q6;function W6(e){let t={};if(e==="")return t;let n=e.replace(/\+/g,"%20").split(/[&;]/);for(let i=0,o=n.length;i<o;++i){let r=n[i].split("="),a=decodeURIComponent(r[0]),s=r[1];c(s)?s=decodeURIComponent(s):s="";let A=t[a];typeof A=="string"?t[a]=[A,s]:Array.isArray(A)?A.push(s):t[a]=s}return t}var sP=W6;var J6={UNISSUED:0,ISSUED:1,ACTIVE:2,RECEIVED:3,CANCELLED:4,FAILED:5},Vn=Object.freeze(J6);var K6={TERRAIN:0,IMAGERY:1,TILES3D:2,OTHER:3},sA=Object.freeze(K6);function _I(e){e=e??k.EMPTY_OBJECT;let t=e.throttleByServer??!1,n=e.throttle??!1;this.url=e.url,this.requestFunction=e.requestFunction,this.cancelFunction=e.cancelFunction,this.priorityFunction=e.priorityFunction,this.priority=e.priority??0,this.throttle=n,this.throttleByServer=t,this.type=e.type??sA.OTHER,this.serverKey=e.serverKey,this.state=Vn.UNISSUED,this.deferred=void 0,this.cancelled=!1}_I.prototype.cancel=function(){this.cancelled=!0};_I.prototype.clone=function(e){return c(e)?(e.url=this.url,e.requestFunction=this.requestFunction,e.cancelFunction=this.cancelFunction,e.priorityFunction=this.priorityFunction,e.priority=this.priority,e.throttle=this.throttle,e.throttleByServer=this.throttleByServer,e.type=this.type,e.serverKey=this.serverKey,e.state=Vn.UNISSUED,e.deferred=void 0,e.cancelled=!1,e):new _I(this)};var cA=_I;function X6(e){let t={};if(!e)return t;let n=e.split(`\r
`);for(let i=0;i<n.length;++i){let o=n[i],r=o.indexOf(": ");if(r>0){let a=o.substring(0,r),s=o.substring(r+2);t[a]=s}}return t}var cP=X6;function AP(e,t,n){this.statusCode=e,this.response=t,this.responseHeaders=n,typeof this.responseHeaders=="string"&&(this.responseHeaders=cP(this.responseHeaders))}AP.prototype.toString=function(){let e="Request has failed.";return c(this.statusCode)&&(e+=` Status Code: ${this.statusCode}`),e};var dd=AP;var EI=qr(pc(),1);function Mg(){this._listeners=[],this._scopes=[],this._toRemove=[],this._insideRaiseEvent=!1}Object.defineProperties(Mg.prototype,{numberOfListeners:{get:function(){return this._listeners.length-this._toRemove.length}}});Mg.prototype.addEventListener=function(e,t){this._listeners.push(e),this._scopes.push(t);let n=this;return function(){n.removeEventListener(e,t)}};Mg.prototype.removeEventListener=function(e,t){let n=this._listeners,i=this._scopes,o=-1;for(let r=0;r<n.length;r++)if(n[r]===e&&i[r]===t){o=r;break}return o!==-1?(this._insideRaiseEvent?(this._toRemove.push(o),n[o]=void 0,i[o]=void 0):(n.splice(o,1),i.splice(o,1)),!0):!1};function Z6(e,t){return t-e}Mg.prototype.raiseEvent=function(){this._insideRaiseEvent=!0;let e,t=this._listeners,n=this._scopes,i=t.length;for(e=0;e<i;e++){let r=t[e];c(r)&&t[e].apply(n[e],arguments)}let o=this._toRemove;if(i=o.length,i>0){for(o.sort(Z6),e=0;e<i;e++){let r=o[e];t.splice(r,1),n.splice(r,1)}o.length=0}this._insideRaiseEvent=!1};var fe=Mg;function hd(e){this._comparator=e.comparator,this._array=[],this._length=0,this._maximumLength=void 0}Object.defineProperties(hd.prototype,{length:{get:function(){return this._length}},internalArray:{get:function(){return this._array}},maximumLength:{get:function(){return this._maximumLength},set:function(e){let t=this._length;if(e<t){let n=this._array;for(let i=e;i<t;++i)n[i]=void 0;this._length=e,n.length=e}this._maximumLength=e}},comparator:{get:function(){return this._comparator}}});function xx(e,t,n){let i=e[t];e[t]=e[n],e[n]=i}hd.prototype.reserve=function(e){e=e??this._length,this._array.length=e};hd.prototype.heapify=function(e){e=e??0;let t=this._length,n=this._comparator,i=this._array,o=-1,r=!0;for(;r;){let a=2*(e+1),s=a-1;s<t&&n(i[s],i[e])<0?o=s:o=e,a<t&&n(i[a],i[o])<0&&(o=a),o!==e?(xx(i,o,e),e=o):r=!1}};hd.prototype.resort=function(){let e=this._length;for(let t=Math.ceil(e/2);t>=0;--t)this.heapify(t)};hd.prototype.insert=function(e){let t=this._array,n=this._comparator,i=this._maximumLength,o=this._length++;for(o<t.length?t[o]=e:t.push(e);o!==0;){let a=Math.floor((o-1)/2);if(n(t[o],t[a])<0)xx(t,o,a),o=a;else break}let r;return c(i)&&this._length>i&&(r=t[i],this._length=i),r};hd.prototype.pop=function(e){if(e=e??0,this._length===0)return;let t=this._array,n=t[e];return xx(t,e,--this._length),this.heapify(e),t[this._length]=void 0,n};var lP=hd;function $6(e,t){return e.priority-t.priority}var jn={numberOfAttemptedRequests:0,numberOfActiveRequests:0,numberOfCancelledRequests:0,numberOfCancelledActiveRequests:0,numberOfFailedRequests:0,numberOfActiveRequestsEver:0,lastNumberOfActiveRequests:0},Kh=20,Br=new lP({comparator:$6});Br.maximumLength=Kh;Br.reserve(Kh);var AA=[],sl={},eX=typeof document<"u"?new EI.default(document.location.href):new EI.default,II=new fe;function Di(){}Di.maximumRequests=50;Di.maximumRequestsPerServer=18;Di.requestsByServer={};Di.throttleRequests=!0;Di.debugShowStatistics=!1;Di.requestCompletedEvent=II;Object.defineProperties(Di,{statistics:{get:function(){return jn}},priorityHeapLength:{get:function(){return Kh},set:function(e){if(e<Kh)for(;Br.length>e;){let t=Br.pop();md(t)}Kh=e,Br.maximumLength=e,Br.reserve(e)}}});function fP(e){c(e.priorityFunction)&&(e.priority=e.priorityFunction())}Di.serverHasOpenSlots=function(e,t){t=t??1;let n=Di.requestsByServer[e]??Di.maximumRequestsPerServer;return sl[e]+t<=n};Di.heapHasOpenSlots=function(e){return Br.length+e<=Kh};function uP(e){return e.state===Vn.UNISSUED&&(e.state=Vn.ISSUED,e.deferred=fd()),e.deferred.promise}function tX(e){return function(t){if(e.state===Vn.CANCELLED)return;let n=e.deferred;--jn.numberOfActiveRequests,--sl[e.serverKey],II.raiseEvent(),e.state=Vn.RECEIVED,e.deferred=void 0,n.resolve(t)}}function nX(e){return function(t){e.state!==Vn.CANCELLED&&(++jn.numberOfFailedRequests,--jn.numberOfActiveRequests,--sl[e.serverKey],II.raiseEvent(t),e.state=Vn.FAILED,e.deferred.reject(t))}}function dP(e){let t=uP(e);return e.state=Vn.ACTIVE,AA.push(e),++jn.numberOfActiveRequests,++jn.numberOfActiveRequestsEver,++sl[e.serverKey],e.requestFunction().then(tX(e)).catch(nX(e)),t}function md(e){let t=e.state===Vn.ACTIVE;if(e.state=Vn.CANCELLED,++jn.numberOfCancelledRequests,c(e.deferred)){let n=e.deferred;e.deferred=void 0,n.reject()}t&&(--jn.numberOfActiveRequests,--sl[e.serverKey],++jn.numberOfCancelledActiveRequests),c(e.cancelFunction)&&e.cancelFunction()}Di.update=function(){let e,t,n=0,i=AA.length;for(e=0;e<i;++e){if(t=AA[e],t.cancelled&&md(t),t.state!==Vn.ACTIVE){++n;continue}n>0&&(AA[e-n]=t)}AA.length-=n;let o=Br.internalArray,r=Br.length;for(e=0;e<r;++e)fP(o[e]);Br.resort();let a=Math.max(Di.maximumRequests-AA.length,0),s=0;for(;s<a&&Br.length>0;){if(t=Br.pop(),t.cancelled){md(t);continue}if(t.throttleByServer&&!Di.serverHasOpenSlots(t.serverKey)){md(t);continue}dP(t),++s}iX()};Di.getServerKey=function(e){let t=new EI.default(e);t.scheme()===""&&(t=t.absoluteTo(eX),t.normalize());let n=t.authority();/:/.test(n)||(n=`${n}:${t.scheme()==="https"?"443":"80"}`);let i=sl[n];return c(i)||(sl[n]=0),n};Di.request=function(e){if(Jh(e.url)||CI(e.url))return II.raiseEvent(),e.state=Vn.RECEIVED,e.requestFunction();if(++jn.numberOfAttemptedRequests,c(e.serverKey)||(e.serverKey=Di.getServerKey(e.url)),Di.throttleRequests&&e.throttleByServer&&!Di.serverHasOpenSlots(e.serverKey))return;if(!Di.throttleRequests||!e.throttle)return dP(e);if(AA.length>=Di.maximumRequests)return;fP(e);let t=Br.insert(e);if(c(t)){if(t===e)return;md(t)}return uP(e)};function iX(){Di.debugShowStatistics&&(jn.numberOfActiveRequests===0&&jn.lastNumberOfActiveRequests>0&&(jn.numberOfAttemptedRequests>0&&(console.log(`Number of attempted requests: ${jn.numberOfAttemptedRequests}`),jn.numberOfAttemptedRequests=0),jn.numberOfCancelledRequests>0&&(console.log(`Number of cancelled requests: ${jn.numberOfCancelledRequests}`),jn.numberOfCancelledRequests=0),jn.numberOfCancelledActiveRequests>0&&(console.log(`Number of cancelled active requests: ${jn.numberOfCancelledActiveRequests}`),jn.numberOfCancelledActiveRequests=0),jn.numberOfFailedRequests>0&&(console.log(`Number of failed requests: ${jn.numberOfFailedRequests}`),jn.numberOfFailedRequests=0)),jn.lastNumberOfActiveRequests=jn.numberOfActiveRequests)}Di.clearForSpecs=function(){for(;Br.length>0;){let t=Br.pop();md(t)}let e=AA.length;for(let t=0;t<e;++t)md(AA[t]);AA.length=0,sl={},jn.numberOfAttemptedRequests=0,jn.numberOfActiveRequests=0,jn.numberOfCancelledRequests=0,jn.numberOfCancelledActiveRequests=0,jn.numberOfFailedRequests=0,jn.numberOfActiveRequestsEver=0,jn.lastNumberOfActiveRequests=0};Di.numberOfActiveRequestsByServer=function(e){return sl[e]};Di.requestHeap=Br;var lA=Di;var hP=qr(pc(),1);var Og={},Xh={};Og.add=function(e,t){let n=`${e.toLowerCase()}:${t}`;c(Xh[n])||(Xh[n]=!0)};Og.remove=function(e,t){let n=`${e.toLowerCase()}:${t}`;c(Xh[n])&&delete Xh[n]};function oX(e){let t=new hP.default(e);t.normalize();let n=t.authority();if(n.length!==0){if(t.authority(n),n.indexOf("@")!==-1&&(n=n.split("@")[1]),n.indexOf(":")===-1){let i=t.scheme();if(i.length===0&&(i=window.location.protocol,i=i.substring(0,i.length-1)),i==="http")n+=":80";else if(i==="https")n+=":443";else return}return n}}Og.contains=function(e){let t=oX(e);return!!(c(t)&&c(Xh[t]))};Og.clear=function(){Xh={}};var Tx=Og;var gP=(function(){try{let e=new XMLHttpRequest;return e.open("GET","#",!0),e.responseType="blob",e.responseType==="blob"}catch{return!1}})();function $e(e){e=e??k.EMPTY_OBJECT,typeof e=="string"&&(e={url:e}),this._url=void 0,this._templateValues=fA(e.templateValues,{}),this._queryParameters=fA(e.queryParameters,{}),this.headers=fA(e.headers,{}),this.request=e.request??new cA,this.proxy=e.proxy,this.retryCallback=e.retryCallback,this.retryAttempts=e.retryAttempts??0,this._retryCount=0,e.parseUrl??!0?this.parseUrl(e.url,!0,!0):this._url=e.url,this._credits=e.credits}function fA(e,t){return c(e)?Ne(e):t}$e.createIfNeeded=function(e){return e instanceof $e?e.getDerivedResource({request:e.request}):typeof e!="string"?e:new $e({url:e})};var Zh;$e.supportsImageBitmapOptions=function(){return c(Zh)?Zh:typeof createImageBitmap!="function"?(Zh=Promise.resolve(!1),Zh):(Zh=$e.fetchBlob({url:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAIAAACQd1PeAAAABGdBTUEAAE4g3rEiDgAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAADElEQVQI12Ng6GAAAAEUAIngE3ZiAAAAAElFTkSuQmCC"}).then(function(t){let n={imageOrientation:"flipY",premultiplyAlpha:"none",colorSpaceConversion:"none"};return Promise.all([createImageBitmap(t,n),createImageBitmap(t)])}).then(function(t){let n=Wh(t[0]),i=Wh(t[1]);return n[1]!==i[1]}).catch(function(){return!1}),Zh)};Object.defineProperties($e,{isBlobSupported:{get:function(){return gP}}});Object.defineProperties($e.prototype,{queryParameters:{get:function(){return this._queryParameters}},templateValues:{get:function(){return this._templateValues}},url:{get:function(){return this.getUrlComponent(!0,!0)},set:function(e){this.parseUrl(e,!1,!1)}},extension:{get:function(){return iP(this._url)}},isDataUri:{get:function(){return Jh(this._url)}},isBlobUri:{get:function(){return CI(this._url)}},isCrossOriginUrl:{get:function(){return Pg(this._url)}},hasHeaders:{get:function(){return Object.keys(this.headers).length>0}},credits:{get:function(){return this._credits}}});$e.prototype.toString=function(){return this.getUrlComponent(!0,!0)};$e.prototype.parseUrl=function(e,t,n,i){let o=new pP.default(e),r=rX(o.query());this._queryParameters=t?bI(r,this.queryParameters,n):r,o.search(""),o.fragment(""),c(i)&&o.scheme()===""&&(o=o.absoluteTo(ud(i))),this._url=o.toString()};function rX(e){return e.length===0?{}:e.indexOf("=")===-1?{[e]:void 0}:sP(e)}function bI(e,t,n){if(!n)return Et(e,t);let i=Ne(e,!0);for(let o in t)if(t.hasOwnProperty(o)){let r=i[o],a=t[o];c(r)?(Array.isArray(r)||(r=i[o]=[r]),i[o]=r.concat(a)):i[o]=Array.isArray(a)?a.slice():a}return i}$e.prototype.getUrlComponent=function(e,t){if(this.isDataUri)return this._url;let n=this._url;e&&(n=`${n}${aX(this.queryParameters)}`),n=n.replace(/%7B/g,"{").replace(/%7D/g,"}");let i=this._templateValues;return Object.keys(i).length>0&&(n=n.replace(/{(.*?)}/g,function(o,r){let a=i[r];return c(a)?encodeURIComponent(a):o})),t&&c(this.proxy)&&(n=this.proxy.getURL(n)),n};function aX(e){let t=Object.keys(e);return t.length===0?"":t.length===1&&!c(e[t[0]])?`?${t[0]}`:`?${aP(e)}`}$e.prototype.setQueryParameters=function(e,t){t?this._queryParameters=bI(this._queryParameters,e,!1):this._queryParameters=bI(e,this._queryParameters,!1)};$e.prototype.appendQueryParameters=function(e){this._queryParameters=bI(e,this._queryParameters,!0)};$e.prototype.setTemplateValues=function(e,t){t?this._templateValues=Et(this._templateValues,e):this._templateValues=Et(e,this._templateValues)};$e.prototype.getDerivedResource=function(e){let t=this.clone();if(t._retryCount=0,c(e.url)){let n=e.preserveQueryParameters??!1;t.parseUrl(e.url,!0,n,this._url)}return c(e.queryParameters)&&(t._queryParameters=Et(e.queryParameters,t.queryParameters)),c(e.templateValues)&&(t._templateValues=Et(e.templateValues,t.templateValues)),c(e.headers)&&(t.headers=Et(e.headers,t.headers)),c(e.proxy)&&(t.proxy=e.proxy),c(e.request)&&(t.request=e.request),c(e.retryCallback)&&(t.retryCallback=e.retryCallback),c(e.retryAttempts)&&(t.retryAttempts=e.retryAttempts),t};$e.prototype.retryOnError=function(e){let t=this.retryCallback;if(typeof t!="function"||this._retryCount>=this.retryAttempts)return Promise.resolve(!1);let n=this;return Promise.resolve(t(this,e)).then(function(i){return++n._retryCount,i})};$e.prototype.clone=function(e){return c(e)?(e._url=this._url,e._queryParameters=Ne(this._queryParameters),e._templateValues=Ne(this._templateValues),e.headers=Ne(this.headers),e.proxy=this.proxy,e.retryCallback=this.retryCallback,e.retryAttempts=this.retryAttempts,e._retryCount=0,e.request=this.request.clone(),e):new $e({url:this._url,queryParameters:this.queryParameters,templateValues:this.templateValues,headers:this.headers,proxy:this.proxy,retryCallback:this.retryCallback,retryAttempts:this.retryAttempts,request:this.request.clone(),parseUrl:!1,credits:c(this.credits)?this.credits.slice():void 0})};$e.prototype.getBaseUri=function(e){return tP(this.getUrlComponent(e),e)};$e.prototype.appendForwardSlash=function(){this._url=Kv(this._url)};$e.prototype.fetchArrayBuffer=function(){return this.fetch({responseType:"arraybuffer"})};$e.fetchArrayBuffer=function(e){return new $e(e).fetchArrayBuffer()};$e.prototype.fetchBlob=function(){return this.fetch({responseType:"blob"})};$e.fetchBlob=function(e){return new $e(e).fetchBlob()};$e.prototype.fetchImage=function(e){e=e??k.EMPTY_OBJECT;let t=e.preferImageBitmap??!1,n=e.preferBlob??!1,i=e.flipY??!1,o=e.skipColorSpaceConversion??!1;if(wx(this.request),!gP||this.isDataUri||this.isBlobUri||!this.hasHeaders&&!n)return Sx({resource:this,flipY:i,skipColorSpaceConversion:o,preferImageBitmap:t});let r=this.fetchBlob();if(!c(r))return;let a,s,A,l;return $e.supportsImageBitmapOptions().then(function(f){return a=f,s=a&&t,r}).then(function(f){if(!c(f))return;if(l=f,s)return $e.createImageBitmapFromBlob(f,{flipY:i,premultiplyAlpha:!1,skipColorSpaceConversion:o});let h=window.URL.createObjectURL(f);return A=new $e({url:h}),Sx({resource:A,flipY:i,skipColorSpaceConversion:o,preferImageBitmap:!1})}).then(function(f){if(c(f))return f.blob=l,s||window.URL.revokeObjectURL(A.url),f}).catch(function(f){return c(A)&&window.URL.revokeObjectURL(A.url),f.blob=l,Promise.reject(f)})};function Sx(e){let t=e.resource,n=e.flipY,i=e.skipColorSpaceConversion,o=e.preferImageBitmap,r=t.request;r.url=t.url,r.requestFunction=function(){let s=!1;!t.isDataUri&&!t.isBlobUri&&(s=t.isCrossOriginUrl);let A=fd();return $e._Implementations.createImage(r,s,A,n,i,o),A.promise};let a=lA.request(r);if(c(a))return a.catch(function(s){return r.state!==Vn.FAILED?Promise.reject(s):t.retryOnError(s).then(function(A){return A?(r.state=Vn.UNISSUED,r.deferred=void 0,Sx({resource:t,flipY:n,skipColorSpaceConversion:i,preferImageBitmap:o})):Promise.reject(s)})})}$e.fetchImage=function(e){return new $e(e).fetchImage({flipY:e.flipY,skipColorSpaceConversion:e.skipColorSpaceConversion,preferBlob:e.preferBlob,preferImageBitmap:e.preferImageBitmap})};$e.prototype.fetchText=function(){return this.fetch({responseType:"text"})};$e.fetchText=function(e){return new $e(e).fetchText()};$e.prototype.fetchJson=function(){let e=this.fetch({responseType:"text",headers:{Accept:"application/json,*/*;q=0.01"}});if(c(e))return e.then(function(t){if(c(t))return JSON.parse(t)})};$e.fetchJson=function(e){return new $e(e).fetchJson()};$e.prototype.fetchXML=function(){return this.fetch({responseType:"document",overrideMimeType:"text/xml"})};$e.fetchXML=function(e){return new $e(e).fetchXML()};$e.prototype.fetchJsonp=function(e){e=e??"callback",wx(this.request);let t;do t=`loadJsonp${w.nextRandomNumber().toString().substring(2,8)}`;while(c(window[t]));return CP(this,e,t)};function CP(e,t,n){let i={};i[t]=n,e.setQueryParameters(i);let o=e.request,r=e.url;o.url=r,o.requestFunction=function(){let s=fd();return window[n]=function(A){s.resolve(A);try{delete window[n]}catch{window[n]=void 0}},$e._Implementations.loadAndExecuteScript(r,n,s),s.promise};let a=lA.request(o);if(c(a))return a.catch(function(s){return o.state!==Vn.FAILED?Promise.reject(s):e.retryOnError(s).then(function(A){return A?(o.state=Vn.UNISSUED,o.deferred=void 0,CP(e,t,n)):Promise.reject(s)})})}$e.fetchJsonp=function(e){return new $e(e).fetchJsonp(e.callbackParameterName)};$e.prototype._makeRequest=function(e){let t=this;wx(t.request);let n=t.request,i=t.url;n.url=i,n.requestFunction=function(){let r=e.responseType,a=Et(e.headers,t.headers),s=e.overrideMimeType,A=e.method,l=e.data,f=fd(),h=$e._Implementations.loadWithXhr(i,r,A,l,a,f,s);return c(h)&&c(h.abort)&&(n.cancelFunction=function(){h.abort()}),f.promise};let o=lA.request(n);if(c(o))return o.then(function(r){return n.cancelFunction=void 0,r}).catch(function(r){return n.cancelFunction=void 0,n.state!==Vn.FAILED?Promise.reject(r):t.retryOnError(r).then(function(a){return a?(n.state=Vn.UNISSUED,n.deferred=void 0,t.fetch(e)):Promise.reject(r)})})};function wx(e){if(e.state===Vn.ISSUED||e.state===Vn.ACTIVE)throw new oe("The Resource is already being fetched.");e.state=Vn.UNISSUED,e.deferred=void 0}var sX=/^data:(.*?)(;base64)?,(.*)$/;function yI(e,t){let n=decodeURIComponent(t);return e?atob(n):n}function mP(e,t){let n=yI(e,t),i=new ArrayBuffer(n.length),o=new Uint8Array(i);for(let r=0;r<n.length;r++)o[r]=n.charCodeAt(r);return i}function cX(e,t){t=t??"";let n=e[1],i=!!e[2],o=e[3],r,a;switch(t){case"":case"text":return yI(i,o);case"arraybuffer":return mP(i,o);case"blob":return r=mP(i,o),new Blob([r],{type:n});case"document":return a=new DOMParser,a.parseFromString(yI(i,o),n);case"json":return JSON.parse(yI(i,o));default:}}$e.prototype.fetch=function(e){return e=fA(e,{}),e.method="GET",this._makeRequest(e)};$e.fetch=function(e){return new $e(e).fetch({responseType:e.responseType,overrideMimeType:e.overrideMimeType})};$e.prototype.delete=function(e){return e=fA(e,{}),e.method="DELETE",this._makeRequest(e)};$e.delete=function(e){return new $e(e).delete({responseType:e.responseType,overrideMimeType:e.overrideMimeType,data:e.data})};$e.prototype.head=function(e){return e=fA(e,{}),e.method="HEAD",this._makeRequest(e)};$e.head=function(e){return new $e(e).head({responseType:e.responseType,overrideMimeType:e.overrideMimeType})};$e.prototype.options=function(e){return e=fA(e,{}),e.method="OPTIONS",this._makeRequest(e)};$e.options=function(e){return new $e(e).options({responseType:e.responseType,overrideMimeType:e.overrideMimeType})};$e.prototype.post=function(e,t){return Ei.defined("data",e),t=fA(t,{}),t.method="POST",t.data=e,this._makeRequest(t)};$e.post=function(e){return new $e(e).post(e.data,{responseType:e.responseType,overrideMimeType:e.overrideMimeType})};$e.prototype.put=function(e,t){return Ei.defined("data",e),t=fA(t,{}),t.method="PUT",t.data=e,this._makeRequest(t)};$e.put=function(e){return new $e(e).put(e.data,{responseType:e.responseType,overrideMimeType:e.overrideMimeType})};$e.prototype.patch=function(e,t){return Ei.defined("data",e),t=fA(t,{}),t.method="PATCH",t.data=e,this._makeRequest(t)};$e.patch=function(e){return new $e(e).patch(e.data,{responseType:e.responseType,overrideMimeType:e.overrideMimeType})};$e._Implementations={};$e._Implementations.loadImageElement=function(e,t,n){let i=new Image;i.onload=function(){i.naturalWidth===0&&i.naturalHeight===0&&i.width===0&&i.height===0&&(i.width=300,i.height=150),n.resolve(i)},i.onerror=function(o){n.reject(o)},t&&(Tx.contains(e)?i.crossOrigin="use-credentials":i.crossOrigin=""),i.src=e};$e._Implementations.createImage=function(e,t,n,i,o,r){let a=e.url;$e.supportsImageBitmapOptions().then(function(s){if(!(s&&r)){$e._Implementations.loadImageElement(a,t,n);return}let A="blob",l="GET",f=fd(),h=$e._Implementations.loadWithXhr(a,A,l,void 0,void 0,f,void 0,void 0,void 0);return c(h)&&c(h.abort)&&(e.cancelFunction=function(){h.abort()}),f.promise.then(function(m){if(!c(m)){n.reject(new oe(`Successfully retrieved ${a} but it contained no content.`));return}return $e.createImageBitmapFromBlob(m,{flipY:i,premultiplyAlpha:!1,skipColorSpaceConversion:o})}).then(function(m){n.resolve(m)})}).catch(function(s){n.reject(s)})};$e.createImageBitmapFromBlob=function(e,t){return Ei.defined("options",t),Ei.typeOf.bool("options.flipY",t.flipY),Ei.typeOf.bool("options.premultiplyAlpha",t.premultiplyAlpha),Ei.typeOf.bool("options.skipColorSpaceConversion",t.skipColorSpaceConversion),createImageBitmap(e,{imageOrientation:t.flipY?"flipY":"from-image",premultiplyAlpha:t.premultiplyAlpha?"premultiply":"none",colorSpaceConversion:t.skipColorSpaceConversion?"none":"default"})};function AX(e,t,n,i,o,r,a){fetch(e,{method:n,headers:o}).then(async s=>{if(!s.ok){let A={};s.headers.forEach((l,f)=>{A[f]=l}),r.reject(new dd(s.status,s,A));return}switch(t){case"text":r.resolve(s.text());break;case"json":r.resolve(s.json());break;default:r.resolve(new Uint8Array(await s.arrayBuffer()).buffer);break}}).catch(()=>{r.reject(new dd)})}var lX=typeof XMLHttpRequest>"u";$e._Implementations.loadWithXhr=function(e,t,n,i,o,r,a){let s=sX.exec(e);if(s!==null){r.resolve(cX(s,t));return}if(lX){AX(e,t,n,i,o,r,a);return}let A=new XMLHttpRequest;if(Tx.contains(e)&&(A.withCredentials=!0),A.open(n,e,!0),c(a)&&c(A.overrideMimeType)&&A.overrideMimeType(a),c(o))for(let f in o)o.hasOwnProperty(f)&&A.setRequestHeader(f,o[f]);c(t)&&(A.responseType=t);let l=!1;return typeof e=="string"&&(l=e.indexOf("file://")===0||typeof window<"u"&&window.location.origin==="file://"),A.onload=function(){if((A.status<200||A.status>=300)&&!(l&&A.status===0)){r.reject(new dd(A.status,A.response,A.getAllResponseHeaders()));return}let f=A.response,h=A.responseType;if(n==="HEAD"||n==="OPTIONS"){let p=A.getAllResponseHeaders().trim().split(/[\r\n]+/),g={};p.forEach(function(C){let _=C.split(": "),E=_.shift();g[E]=_.join(": ")}),r.resolve(g);return}if(A.status===204)r.resolve(void 0);else if(c(f)&&(!c(t)||h===t))r.resolve(f);else if(t==="json"&&typeof f=="string")try{r.resolve(JSON.parse(f))}catch(m){r.reject(m)}else(h===""||h==="document")&&c(A.responseXML)&&A.responseXML.hasChildNodes()?r.resolve(A.responseXML):(h===""||h==="text")&&c(A.responseText)?r.resolve(A.responseText):r.reject(new oe("Invalid XMLHttpRequest response type."))},A.onerror=function(f){r.reject(new dd)},A.send(i),A};$e._Implementations.loadAndExecuteScript=function(e,t,n){return rP(e,t).catch(function(i){n.reject(i)})};$e._DefaultImplementations={};$e._DefaultImplementations.createImage=$e._Implementations.createImage;$e._DefaultImplementations.loadWithXhr=$e._Implementations.loadWithXhr;$e._DefaultImplementations.loadAndExecuteScript=$e._Implementations.loadAndExecuteScript;$e.DEFAULT=Object.freeze(new $e({url:typeof document>"u"?"":document.location.href.split("?")[0]}));var ke=$e;function Ng(e){e=e??k.EMPTY_OBJECT,this._dates=void 0,this._samples=void 0,this._dateColumn=-1,this._xPoleWanderRadiansColumn=-1,this._yPoleWanderRadiansColumn=-1,this._ut1MinusUtcSecondsColumn=-1,this._xCelestialPoleOffsetRadiansColumn=-1,this._yCelestialPoleOffsetRadiansColumn=-1,this._taiMinusUtcSecondsColumn=-1,this._columnCount=0,this._lastIndex=-1,this._addNewLeapSeconds=e.addNewLeapSeconds??!0,c(e.data)?_P(this,e.data):_P(this,{columnNames:["dateIso8601","modifiedJulianDateUtc","xPoleWanderRadians","yPoleWanderRadians","ut1MinusUtcSeconds","lengthOfDayCorrectionSeconds","xCelestialPoleOffsetRadians","yCelestialPoleOffsetRadians","taiMinusUtcSeconds"],samples:[]})}Ng.fromUrl=async function(e,t){t=t??k.EMPTY_OBJECT;let n=ke.createIfNeeded(e),i;try{i=await n.fetchJson()}catch{throw new oe(`An error occurred while retrieving the EOP data from the URL ${n.url}.`)}return new Ng({addNewLeapSeconds:t.addNewLeapSeconds,data:i})};Ng.NONE=Object.freeze({compute:function(e,t){return c(t)?(t.xPoleWander=0,t.yPoleWander=0,t.xPoleOffset=0,t.yPoleOffset=0,t.ut1MinusUtc=0):t=new vg(0,0,0,0,0),t}});Ng.prototype.compute=function(e,t){if(!c(this._samples))return;if(c(t)||(t=new vg(0,0,0,0,0)),this._samples.length===0)return t.xPoleWander=0,t.yPoleWander=0,t.xPoleOffset=0,t.yPoleOffset=0,t.ut1MinusUtc=0,t;let n=this._dates,i=this._lastIndex,o=0,r=0;if(c(i)){let s=n[i],A=n[i+1],l=X.lessThanOrEquals(s,e),f=!c(A),h=f||X.greaterThanOrEquals(A,e);if(l&&h)return o=i,!f&&A.equals(e)&&++o,r=o+1,IP(this,n,this._samples,e,o,r,t),t}let a=sr(n,e,X.compare,this._dateColumn);return a>=0?(a<n.length-1&&n[a+1].equals(e)&&++a,o=a,r=a):(r=~a,o=r-1,o<0&&(o=0)),this._lastIndex=o,IP(this,n,this._samples,e,o,r,t),t};function fX(e,t){return X.compare(e.julianDate,t)}function _P(e,t){if(!c(t.columnNames))throw new oe("Error in loaded EOP data: The columnNames property is required.");if(!c(t.samples))throw new oe("Error in loaded EOP data: The samples property is required.");let n=t.columnNames.indexOf("modifiedJulianDateUtc"),i=t.columnNames.indexOf("xPoleWanderRadians"),o=t.columnNames.indexOf("yPoleWanderRadians"),r=t.columnNames.indexOf("ut1MinusUtcSeconds"),a=t.columnNames.indexOf("xCelestialPoleOffsetRadians"),s=t.columnNames.indexOf("yCelestialPoleOffsetRadians"),A=t.columnNames.indexOf("taiMinusUtcSeconds");if(n<0||i<0||o<0||r<0||a<0||s<0||A<0)throw new oe("Error in loaded EOP data: The columnNames property must include modifiedJulianDateUtc, xPoleWanderRadians, yPoleWanderRadians, ut1MinusUtcSeconds, xCelestialPoleOffsetRadians, yCelestialPoleOffsetRadians, and taiMinusUtcSeconds columns");let l=e._samples=t.samples,f=e._dates=[];e._dateColumn=n,e._xPoleWanderRadiansColumn=i,e._yPoleWanderRadiansColumn=o,e._ut1MinusUtcSecondsColumn=r,e._xCelestialPoleOffsetRadiansColumn=a,e._yCelestialPoleOffsetRadiansColumn=s,e._taiMinusUtcSecondsColumn=A,e._columnCount=t.columnNames.length,e._lastIndex=void 0;let h,m=e._addNewLeapSeconds;for(let p=0,g=l.length;p<g;p+=e._columnCount){let C=l[p+n],_=l[p+A],E=C+yi.MODIFIED_JULIAN_DATE_DIFFERENCE,I=new X(E,_,mn.TAI);if(f.push(I),m){if(_!==h&&c(h)){let y=X.leapSeconds,b=sr(y,I,fX);if(b<0){let x=new Xn(I,_);y.splice(~b,0,x)}}h=_}}}function EP(e,t,n,i,o){let r=n*i;o.xPoleWander=t[r+e._xPoleWanderRadiansColumn],o.yPoleWander=t[r+e._yPoleWanderRadiansColumn],o.xPoleOffset=t[r+e._xCelestialPoleOffsetRadiansColumn],o.yPoleOffset=t[r+e._yCelestialPoleOffsetRadiansColumn],o.ut1MinusUtc=t[r+e._ut1MinusUtcSecondsColumn]}function Lg(e,t,n){return t+e*(n-t)}function IP(e,t,n,i,o,r,a){let s=e._columnCount;if(r>t.length-1)return a.xPoleWander=0,a.yPoleWander=0,a.xPoleOffset=0,a.yPoleOffset=0,a.ut1MinusUtc=0,a;let A=t[o],l=t[r];if(A.equals(l)||i.equals(A))return EP(e,n,o,s,a),a;if(i.equals(l))return EP(e,n,r,s,a),a;let f=X.secondsDifference(i,A)/X.secondsDifference(l,A),h=o*s,m=r*s,p=n[h+e._ut1MinusUtcSecondsColumn],g=n[m+e._ut1MinusUtcSecondsColumn],C=g-p;if(C>.5||C<-.5){let _=n[h+e._taiMinusUtcSecondsColumn],E=n[m+e._taiMinusUtcSecondsColumn];_!==E&&(l.equals(i)?p=g:g-=E-_)}return a.xPoleWander=Lg(f,n[h+e._xPoleWanderRadiansColumn],n[m+e._xPoleWanderRadiansColumn]),a.yPoleWander=Lg(f,n[h+e._yPoleWanderRadiansColumn],n[m+e._yPoleWanderRadiansColumn]),a.xPoleOffset=Lg(f,n[h+e._xCelestialPoleOffsetRadiansColumn],n[m+e._xCelestialPoleOffsetRadiansColumn]),a.yPoleOffset=Lg(f,n[h+e._yCelestialPoleOffsetRadiansColumn],n[m+e._yCelestialPoleOffsetRadiansColumn]),a.ut1MinusUtc=Lg(f,p,g),a}var yP=Ng;function xr(e,t,n){this.heading=e??0,this.pitch=t??0,this.roll=n??0}xr.fromQuaternion=function(e,t){c(t)||(t=new xr);let n=2*(e.w*e.y-e.z*e.x),i=1-2*(e.x*e.x+e.y*e.y),o=2*(e.w*e.x+e.y*e.z),r=1-2*(e.y*e.y+e.z*e.z),a=2*(e.w*e.z+e.x*e.y);return t.heading=-Math.atan2(a,r),t.roll=Math.atan2(o,i),t.pitch=-w.asinClamped(n),t};xr.fromDegrees=function(e,t,n,i){return c(i)||(i=new xr),i.heading=e*w.RADIANS_PER_DEGREE,i.pitch=t*w.RADIANS_PER_DEGREE,i.roll=n*w.RADIANS_PER_DEGREE,i};xr.clone=function(e,t){if(c(e))return c(t)?(t.heading=e.heading,t.pitch=e.pitch,t.roll=e.roll,t):new xr(e.heading,e.pitch,e.roll)};xr.equals=function(e,t){return e===t||c(e)&&c(t)&&e.heading===t.heading&&e.pitch===t.pitch&&e.roll===t.roll};xr.equalsEpsilon=function(e,t,n,i){return e===t||c(e)&&c(t)&&w.equalsEpsilon(e.heading,t.heading,n,i)&&w.equalsEpsilon(e.pitch,t.pitch,n,i)&&w.equalsEpsilon(e.roll,t.roll,n,i)};xr.prototype.clone=function(e){return xr.clone(this,e)};xr.prototype.equals=function(e){return xr.equals(this,e)};xr.prototype.equalsEpsilon=function(e,t,n){return xr.equalsEpsilon(this,e,t,n)};xr.prototype.toString=function(){return`(${this.heading}, ${this.pitch}, ${this.roll})`};var BI=xr;var bP={},BP=/((?:.*\/)|^)Cesium\.js(?:\?|\#|$)/;function uX(){let e=document.getElementsByTagName("script");for(let t=0,n=e.length;t<n;++t){let i=e[t].getAttribute("src"),o=BP.exec(i);if(o!==null)return o[1]}}var xI;function xP(e){return typeof document>"u"?e:(c(xI)||(xI=document.createElement("a")),xI.href=e,xI.href)}var pd;function TP(){if(c(pd))return pd;let e;return typeof CESIUM_BASE_URL<"u"?e=CESIUM_BASE_URL:c(bP?.url)?e=ud(".",bP.url):typeof define=="object"&&c(define.amd)&&!define.amd.toUrlUndefined&&c(require.toUrl)?e=ud("..",gd("Core/buildModuleUrl.js")):e=uX(),pd=new ke({url:xP(e)}),pd.appendForwardSlash(),pd}function dX(e){return xP(require.toUrl(`../${e}`))}function SP(e){return TP().getDerivedResource({url:e}).url}var TI;function gd(e){return c(TI)||(typeof define=="object"&&c(define.amd)&&!define.amd.toUrlUndefined&&c(require.toUrl)?TI=dX:TI=SP),TI(e)}gd._cesiumScriptRegex=BP;gd._buildModuleUrlFromBaseUrl=SP;gd._clearBaseResource=function(){pd=void 0};gd.setBaseUrl=function(e){pd=ke.DEFAULT.getDerivedResource({url:e})};gd.getCesiumBaseUrl=TP;var ho=gd;function hX(e,t,n){this.x=e,this.y=t,this.s=n}var SI=hX;function Rx(e){e=e??k.EMPTY_OBJECT,this._xysFileUrlTemplate=ke.createIfNeeded(e.xysFileUrlTemplate),this._interpolationOrder=e.interpolationOrder??9,this._sampleZeroJulianEphemerisDate=e.sampleZeroJulianEphemerisDate??24423965e-1,this._sampleZeroDateTT=new X(this._sampleZeroJulianEphemerisDate,0,mn.TAI),this._stepSizeDays=e.stepSizeDays??1,this._samplesPerXysFile=e.samplesPerXysFile??1e3,this._totalSamples=e.totalSamples??27426,this._samples=new Array(this._totalSamples*3),this._chunkDownloadsInProgress=[];let t=this._interpolationOrder,n=this._denominators=new Array(t+1),i=this._xTable=new Array(t+1),o=Math.pow(this._stepSizeDays,t);for(let r=0;r<=t;++r){n[r]=o,i[r]=r*this._stepSizeDays;for(let a=0;a<=t;++a)a!==r&&(n[r]*=r-a);n[r]=1/n[r]}this._work=new Array(t+1),this._coef=new Array(t+1)}var mX=new X(0,0,mn.TAI);function Dx(e,t,n){let i=mX;return i.dayNumber=t,i.secondsOfDay=n,X.daysDifference(i,e._sampleZeroDateTT)}Rx.prototype.preload=function(e,t,n,i){let o=Dx(this,e,t),r=Dx(this,n,i),a=o/this._stepSizeDays-this._interpolationOrder/2|0;a<0&&(a=0);let s=r/this._stepSizeDays-this._interpolationOrder/2|0+this._interpolationOrder;s>=this._totalSamples&&(s=this._totalSamples-1);let A=a/this._samplesPerXysFile|0,l=s/this._samplesPerXysFile|0,f=[];for(let h=A;h<=l;++h)f.push(Qx(this,h));return Promise.all(f)};Rx.prototype.computeXysRadians=function(e,t,n){let i=Dx(this,e,t);if(i<0)return;let o=i/this._stepSizeDays|0;if(o>=this._totalSamples)return;let r=this._interpolationOrder,a=o-(r/2|0);a<0&&(a=0);let s=a+r;s>=this._totalSamples&&(s=this._totalSamples-1,a=s-r,a<0&&(a=0));let A=!1,l=this._samples;if(c(l[a*3])||(Qx(this,a/this._samplesPerXysFile|0),A=!0),c(l[s*3])||(Qx(this,s/this._samplesPerXysFile|0),A=!0),A)return;c(n)?(n.x=0,n.y=0,n.s=0):n=new SI(0,0,0);let f=i-a*this._stepSizeDays,h=this._work,m=this._denominators,p=this._coef,g=this._xTable,C,_;for(C=0;C<=r;++C)h[C]=f-g[C];for(C=0;C<=r;++C){for(p[C]=1,_=0;_<=r;++_)_!==C&&(p[C]*=h[_]);p[C]*=m[C];let E=(a+C)*3;n.x+=p[C]*l[E++],n.y+=p[C]*l[E++],n.s+=p[C]*l[E]}return n};function Qx(e,t){if(e._chunkDownloadsInProgress[t])return e._chunkDownloadsInProgress[t];let n,i=e._xysFileUrlTemplate;c(i)?n=i.getDerivedResource({templateValues:{0:t}}):n=new ke({url:ho(`Assets/IAU2006_XYS/IAU2006_XYS_${t}.json`)});let o=n.fetchJson().then(function(r){e._chunkDownloadsInProgress[t]=!1;let a=e._samples,s=r.samples,A=t*e._samplesPerXysFile*3;for(let l=0,f=s.length;l<f;++l)a[A+l]=s[l]});return e._chunkDownloadsInProgress[t]=o,o}var wP=Rx;function ve(e,t,n,i){this.x=e??0,this.y=t??0,this.z=n??0,this.w=i??0}var Fg=new u;ve.fromAxisAngle=function(e,t,n){let i=t/2,o=Math.sin(i);Fg=u.normalize(e,Fg);let r=Fg.x*o,a=Fg.y*o,s=Fg.z*o,A=Math.cos(i);return c(n)?(n.x=r,n.y=a,n.z=s,n.w=A,n):new ve(r,a,s,A)};var pX=[1,2,0],gX=new Array(3);ve.fromRotationMatrix=function(e,t){let n,i,o,r,a,s=e[J.COLUMN0ROW0],A=e[J.COLUMN1ROW1],l=e[J.COLUMN2ROW2],f=s+A+l;if(f>0)n=Math.sqrt(f+1),a=.5*n,n=.5/n,i=(e[J.COLUMN1ROW2]-e[J.COLUMN2ROW1])*n,o=(e[J.COLUMN2ROW0]-e[J.COLUMN0ROW2])*n,r=(e[J.COLUMN0ROW1]-e[J.COLUMN1ROW0])*n;else{let h=pX,m=0;A>s&&(m=1),l>s&&l>A&&(m=2);let p=h[m],g=h[p];n=Math.sqrt(e[J.getElementIndex(m,m)]-e[J.getElementIndex(p,p)]-e[J.getElementIndex(g,g)]+1);let C=gX;C[m]=.5*n,n=.5/n,a=(e[J.getElementIndex(g,p)]-e[J.getElementIndex(p,g)])*n,C[p]=(e[J.getElementIndex(p,m)]+e[J.getElementIndex(m,p)])*n,C[g]=(e[J.getElementIndex(g,m)]+e[J.getElementIndex(m,g)])*n,i=-C[0],o=-C[1],r=-C[2]}return c(t)?(t.x=i,t.y=o,t.z=r,t.w=a,t):new ve(i,o,r,a)};var DP=new ve,QP=new ve,vx=new ve,RP=new ve;ve.fromHeadingPitchRoll=function(e,t){return RP=ve.fromAxisAngle(u.UNIT_X,e.roll,DP),vx=ve.fromAxisAngle(u.UNIT_Y,-e.pitch,t),t=ve.multiply(vx,RP,vx),QP=ve.fromAxisAngle(u.UNIT_Z,-e.heading,DP),ve.multiply(QP,t,t)};var wI=new u,Px=new u,gc=new ve,vP=new ve,DI=new ve;ve.packedLength=4;ve.pack=function(e,t,n){return n=n??0,t[n++]=e.x,t[n++]=e.y,t[n++]=e.z,t[n]=e.w,t};ve.unpack=function(e,t,n){return t=t??0,c(n)||(n=new ve),n.x=e[t],n.y=e[t+1],n.z=e[t+2],n.w=e[t+3],n};ve.packedInterpolationLength=3;ve.convertPackedArrayForInterpolation=function(e,t,n,i){ve.unpack(e,n*4,DI),ve.conjugate(DI,DI);for(let o=0,r=n-t+1;o<r;o++){let a=o*3;ve.unpack(e,(t+o)*4,gc),ve.multiply(gc,DI,gc),gc.w<0&&ve.negate(gc,gc),ve.computeAxis(gc,wI);let s=ve.computeAngle(gc);c(i)||(i=[]),i[a]=wI.x*s,i[a+1]=wI.y*s,i[a+2]=wI.z*s}};ve.unpackInterpolationResult=function(e,t,n,i,o){c(o)||(o=new ve),u.fromArray(e,0,Px);let r=u.magnitude(Px);return ve.unpack(t,i*4,vP),r===0?ve.clone(ve.IDENTITY,gc):ve.fromAxisAngle(Px,r,gc),ve.multiply(gc,vP,o)};ve.clone=function(e,t){if(c(e))return c(t)?(t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t):new ve(e.x,e.y,e.z,e.w)};ve.conjugate=function(e,t){return t.x=-e.x,t.y=-e.y,t.z=-e.z,t.w=e.w,t};ve.magnitudeSquared=function(e){return e.x*e.x+e.y*e.y+e.z*e.z+e.w*e.w};ve.magnitude=function(e){return Math.sqrt(ve.magnitudeSquared(e))};ve.normalize=function(e,t){let n=1/ve.magnitude(e),i=e.x*n,o=e.y*n,r=e.z*n,a=e.w*n;return t.x=i,t.y=o,t.z=r,t.w=a,t};ve.inverse=function(e,t){let n=ve.magnitudeSquared(e);return t=ve.conjugate(e,t),ve.multiplyByScalar(t,1/n,t)};ve.add=function(e,t,n){return n.x=e.x+t.x,n.y=e.y+t.y,n.z=e.z+t.z,n.w=e.w+t.w,n};ve.subtract=function(e,t,n){return n.x=e.x-t.x,n.y=e.y-t.y,n.z=e.z-t.z,n.w=e.w-t.w,n};ve.negate=function(e,t){return t.x=-e.x,t.y=-e.y,t.z=-e.z,t.w=-e.w,t};ve.dot=function(e,t){return e.x*t.x+e.y*t.y+e.z*t.z+e.w*t.w};ve.multiply=function(e,t,n){let i=e.x,o=e.y,r=e.z,a=e.w,s=t.x,A=t.y,l=t.z,f=t.w,h=a*s+i*f+o*l-r*A,m=a*A-i*l+o*f+r*s,p=a*l+i*A-o*s+r*f,g=a*f-i*s-o*A-r*l;return n.x=h,n.y=m,n.z=p,n.w=g,n};ve.multiplyByScalar=function(e,t,n){return n.x=e.x*t,n.y=e.y*t,n.z=e.z*t,n.w=e.w*t,n};ve.divideByScalar=function(e,t,n){return n.x=e.x/t,n.y=e.y/t,n.z=e.z/t,n.w=e.w/t,n};ve.computeAxis=function(e,t){let n=e.w;if(Math.abs(n-1)<w.EPSILON6||Math.abs(n+1)<w.EPSILON6)return t.x=1,t.y=t.z=0,t;let i=1/Math.sqrt(1-n*n);return t.x=e.x*i,t.y=e.y*i,t.z=e.z*i,t};ve.computeAngle=function(e){return Math.abs(e.w-1)<w.EPSILON6?0:2*Math.acos(e.w)};var Mx=new ve;ve.lerp=function(e,t,n,i){return Mx=ve.multiplyByScalar(t,n,Mx),i=ve.multiplyByScalar(e,1-n,i),ve.add(Mx,i,i)};var PP=new ve,Ox=new ve,Lx=new ve;ve.slerp=function(e,t,n,i){let o=ve.dot(e,t),r=t;if(o<0&&(o=-o,r=PP=ve.negate(t,PP)),1-o<w.EPSILON6)return ve.lerp(e,r,n,i);let a=Math.acos(o);return Ox=ve.multiplyByScalar(e,Math.sin((1-n)*a),Ox),Lx=ve.multiplyByScalar(r,Math.sin(n*a),Lx),i=ve.add(Ox,Lx,i),ve.multiplyByScalar(i,1/Math.sin(a),i)};ve.log=function(e,t){let n=w.acosClamped(e.w),i=0;return n!==0&&(i=n/Math.sin(n)),u.multiplyByScalar(e,i,t)};ve.exp=function(e,t){let n=u.magnitude(e),i=0;return n!==0&&(i=Math.sin(n)/n),t.x=e.x*i,t.y=e.y*i,t.z=e.z*i,t.w=Math.cos(n),t};var CX=new u,_X=new u,kg=new ve,$h=new ve;ve.computeInnerQuadrangle=function(e,t,n,i){let o=ve.conjugate(t,kg);ve.multiply(o,n,$h);let r=ve.log($h,CX);ve.multiply(o,e,$h);let a=ve.log($h,_X);return u.add(r,a,r),u.multiplyByScalar(r,.25,r),u.negate(r,r),ve.exp(r,kg),ve.multiply(t,kg,i)};ve.squad=function(e,t,n,i,o,r){let a=ve.slerp(e,t,o,kg),s=ve.slerp(n,i,o,$h);return ve.slerp(a,s,2*o*(1-o),r)};var EX=new ve,MP=1.9011074535173003,QI=$t.supportsTypedArrays()?new Float32Array(8):[],RI=$t.supportsTypedArrays()?new Float32Array(8):[],cl=$t.supportsTypedArrays()?new Float32Array(8):[],Al=$t.supportsTypedArrays()?new Float32Array(8):[];for(let e=0;e<7;++e){let t=e+1,n=2*t+1;QI[e]=1/(t*n),RI[e]=t/n}QI[7]=MP/136;RI[7]=MP*8/17;ve.fastSlerp=function(e,t,n,i){let o=ve.dot(e,t),r;o>=0?r=1:(r=-1,o=-o);let a=o-1,s=1-n,A=n*n,l=s*s;for(let p=7;p>=0;--p)cl[p]=(QI[p]*A-RI[p])*a,Al[p]=(QI[p]*l-RI[p])*a;let f=r*n*(1+cl[0]*(1+cl[1]*(1+cl[2]*(1+cl[3]*(1+cl[4]*(1+cl[5]*(1+cl[6]*(1+cl[7])))))))),h=s*(1+Al[0]*(1+Al[1]*(1+Al[2]*(1+Al[3]*(1+Al[4]*(1+Al[5]*(1+Al[6]*(1+Al[7])))))))),m=ve.multiplyByScalar(e,h,EX);return ve.multiplyByScalar(t,f,i),ve.add(m,i,i)};ve.fastSquad=function(e,t,n,i,o,r){let a=ve.fastSlerp(e,t,o,kg),s=ve.fastSlerp(n,i,o,$h);return ve.fastSlerp(a,s,2*o*(1-o),r)};ve.equals=function(e,t){return e===t||c(e)&&c(t)&&e.x===t.x&&e.y===t.y&&e.z===t.z&&e.w===t.w};ve.equalsEpsilon=function(e,t,n){return n=n??0,e===t||c(e)&&c(t)&&Math.abs(e.x-t.x)<=n&&Math.abs(e.y-t.y)<=n&&Math.abs(e.z-t.z)<=n&&Math.abs(e.w-t.w)<=n};ve.ZERO=Object.freeze(new ve(0,0,0,0));ve.IDENTITY=Object.freeze(new ve(0,0,0,1));ve.prototype.clone=function(e){return ve.clone(this,e)};ve.prototype.equals=function(e){return ve.equals(this,e)};ve.prototype.equalsEpsilon=function(e,t){return ve.equalsEpsilon(this,e,t)};ve.prototype.toString=function(){return`(${this.x}, ${this.y}, ${this.z}, ${this.w})`};var qe=ve;var En={},Nx={up:{south:"east",north:"west",west:"south",east:"north"},down:{south:"west",north:"east",west:"north",east:"south"},south:{up:"west",down:"east",west:"down",east:"up"},north:{up:"east",down:"west",west:"up",east:"down"},west:{up:"north",down:"south",north:"down",south:"up"},east:{up:"south",down:"north",north:"up",south:"down"}},em={north:[-1,0,0],east:[0,1,0],up:[0,0,1],south:[1,0,0],west:[0,-1,0],down:[0,0,-1]},Fx={},_a={east:new u,north:new u,up:new u,west:new u,south:new u,down:new u},Mf=new u,Of=new u,Lf=new u;En.localFrameToFixedFrameGenerator=function(e,t){if(!Nx.hasOwnProperty(e)||!Nx[e].hasOwnProperty(t))throw new Ee("firstAxis and secondAxis must be east, north, up, west, south or down.");let n=Nx[e][t],i,o=e+t;return c(Fx[o])?i=Fx[o]:(i=function(r,a,s){if(c(s)||(s=new O),u.equalsEpsilon(r,u.ZERO,w.EPSILON14))u.unpack(em[e],0,Mf),u.unpack(em[t],0,Of),u.unpack(em[n],0,Lf);else if(w.equalsEpsilon(r.x,0,w.EPSILON14)&&w.equalsEpsilon(r.y,0,w.EPSILON14)){let A=w.sign(r.z);u.unpack(em[e],0,Mf),e!=="east"&&e!=="west"&&u.multiplyByScalar(Mf,A,Mf),u.unpack(em[t],0,Of),t!=="east"&&t!=="west"&&u.multiplyByScalar(Of,A,Of),u.unpack(em[n],0,Lf),n!=="east"&&n!=="west"&&u.multiplyByScalar(Lf,A,Lf)}else{a=a??Z.default,a.geodeticSurfaceNormal(r,_a.up);let A=_a.up,l=_a.east;l.x=-r.y,l.y=r.x,l.z=0,u.normalize(l,_a.east),u.cross(A,l,_a.north),u.multiplyByScalar(_a.up,-1,_a.down),u.multiplyByScalar(_a.east,-1,_a.west),u.multiplyByScalar(_a.north,-1,_a.south),Mf=_a[e],Of=_a[t],Lf=_a[n]}return s[0]=Mf.x,s[1]=Mf.y,s[2]=Mf.z,s[3]=0,s[4]=Of.x,s[5]=Of.y,s[6]=Of.z,s[7]=0,s[8]=Lf.x,s[9]=Lf.y,s[10]=Lf.z,s[11]=0,s[12]=r.x,s[13]=r.y,s[14]=r.z,s[15]=1,s},Fx[o]=i),i};En.eastNorthUpToFixedFrame=En.localFrameToFixedFrameGenerator("east","north");En.northEastDownToFixedFrame=En.localFrameToFixedFrameGenerator("north","east");En.northUpEastToFixedFrame=En.localFrameToFixedFrameGenerator("north","up");En.northWestUpToFixedFrame=En.localFrameToFixedFrameGenerator("north","west");var IX=new qe,yX=new u(1,1,1),bX=new O;En.headingPitchRollToFixedFrame=function(e,t,n,i,o){i=i??En.eastNorthUpToFixedFrame;let r=qe.fromHeadingPitchRoll(t,IX),a=O.fromTranslationQuaternionRotationScale(u.ZERO,r,yX,bX);return o=i(e,n,o),O.multiply(o,a,o)};var BX=new O,xX=new J;En.headingPitchRollQuaternion=function(e,t,n,i,o){let r=En.headingPitchRollToFixedFrame(e,t,n,i,BX),a=O.getMatrix3(r,xX);return qe.fromRotationMatrix(a,o)};var TX=new u(1,1,1),SX=new u,OP=new O,wX=new O,DX=new J,QX=new qe;En.fixedFrameToHeadingPitchRoll=function(e,t,n,i){t=t??Z.default,n=n??En.eastNorthUpToFixedFrame,c(i)||(i=new BI);let o=O.getTranslation(e,SX);if(u.equals(o,u.ZERO))return i.heading=0,i.pitch=0,i.roll=0,i;let r=O.inverseTransformation(n(o,t,OP),OP),a=O.setScale(e,TX,wX);a=O.setTranslation(a,u.ZERO,a),r=O.multiply(r,a,r);let s=qe.fromRotationMatrix(O.getMatrix3(r,DX),QX);return s=qe.normalize(s,s),BI.fromQuaternion(s,i)};var RX=6*3600+2460+50.54841,vX=8640184812866e-6,PX=.093104,MX=-62e-7,OX=11772758384668e-32,LX=72921158553e-15,NX=w.TWO_PI/86400,vI=new X;En.computeIcrfToCentralBodyFixedMatrix=function(e,t){let n=En.computeIcrfToFixedMatrix(e,t);return c(n)||(n=En.computeTemeToPseudoFixedMatrix(e,t)),n};En.computeTemeToPseudoFixedMatrix=function(e,t){vI=X.addSeconds(e,-X.computeTaiMinusUtc(e),vI);let n=vI.dayNumber,i=vI.secondsOfDay,o,r=n-2451545;i>=43200?o=(r+.5)/yi.DAYS_PER_JULIAN_CENTURY:o=(r-.5)/yi.DAYS_PER_JULIAN_CENTURY;let s=(RX+o*(vX+o*(PX+o*MX)))*NX%w.TWO_PI,A=LX+OX*(n-24515455e-1),l=(i+yi.SECONDS_PER_DAY*.5)%yi.SECONDS_PER_DAY,f=s+A*l,h=Math.cos(f),m=Math.sin(f);return c(t)?(t[0]=h,t[1]=-m,t[2]=0,t[3]=m,t[4]=h,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t):new J(h,m,0,-m,h,0,0,0,1)};En.iau2006XysData=new wP;En.earthOrientationParameters=yP.NONE;var Gx=32.184,FX=2451545;En.preloadIcrfFixed=function(e){let t=e.start.dayNumber,n=e.start.secondsOfDay+Gx,i=e.stop.dayNumber,o=e.stop.secondsOfDay+Gx;return En.iau2006XysData.preload(t,n,i,o)};En.computeIcrfToFixedMatrix=function(e,t){c(t)||(t=new J);let n=En.computeFixedToIcrfMatrix(e,t);if(c(n))return J.transpose(n,t)};var kX=32.184,UX=2451545,PI=new BI,GX=new J,zX=new X;En.computeMoonFixedToIcrfMatrix=function(e,t){c(t)||(t=new J);let n=X.addSeconds(e,kX,zX),i=X.totalDays(n)-UX,o=w.toRadians(12.112)-w.toRadians(.052992)*i,r=w.toRadians(24.224)-w.toRadians(.105984)*i,a=w.toRadians(227.645)+w.toRadians(13.012)*i,s=w.toRadians(261.105)+w.toRadians(13.340716)*i,A=w.toRadians(358)+w.toRadians(.9856)*i;return PI.pitch=w.toRadians(180)-w.toRadians(3.878)*Math.sin(o)-w.toRadians(.12)*Math.sin(r)+w.toRadians(.07)*Math.sin(a)-w.toRadians(.017)*Math.sin(s),PI.roll=w.toRadians(66.53-90)+w.toRadians(1.543)*Math.cos(o)+w.toRadians(.24)*Math.cos(r)-w.toRadians(.028)*Math.cos(a)+w.toRadians(.007)*Math.cos(s),PI.heading=w.toRadians(244.375-90)+w.toRadians(13.17635831)*i+w.toRadians(3.558)*Math.sin(o)+w.toRadians(.121)*Math.sin(r)-w.toRadians(.064)*Math.sin(a)+w.toRadians(.016)*Math.sin(s)+w.toRadians(.025)*Math.sin(A),J.fromHeadingPitchRoll(PI,GX)};En.computeIcrfToMoonFixedMatrix=function(e,t){c(t)||(t=new J);let n=En.computeMoonFixedToIcrfMatrix(e,t);if(c(n))return J.transpose(n,t)};var HX=new SI(0,0,0),VX=new vg(0,0,0,0,0,0),kx=new J,Ux=new J;En.computeFixedToIcrfMatrix=function(e,t){c(t)||(t=new J);let n=En.earthOrientationParameters.compute(e,VX);if(!c(n))return;let i=e.dayNumber,o=e.secondsOfDay+Gx,r=En.iau2006XysData.computeXysRadians(i,o,HX);if(!c(r))return;let a=r.x+n.xPoleOffset,s=r.y+n.yPoleOffset,A=1/(1+Math.sqrt(1-a*a-s*s)),l=kx;l[0]=1-A*a*a,l[3]=-A*a*s,l[6]=a,l[1]=-A*a*s,l[4]=1-A*s*s,l[7]=s,l[2]=-a,l[5]=-s,l[8]=1-A*(a*a+s*s);let f=J.fromRotationZ(-r.s,Ux),h=J.multiply(l,f,kx),m=e.dayNumber,p=e.secondsOfDay-X.computeTaiMinusUtc(e)+n.ut1MinusUtc,g=m-2451545,C=p/yi.SECONDS_PER_DAY,_=.779057273264+C+.00273781191135448*(g+C);_=_%1*w.TWO_PI;let E=J.fromRotationZ(_,Ux),I=J.multiply(h,E,kx),y=Math.cos(n.xPoleWander),b=Math.cos(n.yPoleWander),x=Math.sin(n.xPoleWander),S=Math.sin(n.yPoleWander),P=i-FX+o/yi.SECONDS_PER_DAY;P/=36525;let D=-47e-6*P*w.RADIANS_PER_DEGREE/3600,Q=Math.cos(D),v=Math.sin(D),d=Ux;return d[0]=y*Q,d[1]=y*v,d[2]=x,d[3]=-b*v+S*x*Q,d[4]=b*Q+S*x*v,d[5]=-S*y,d[6]=-S*v-b*x*Q,d[7]=S*Q-b*x*v,d[8]=b*y,J.multiply(I,d,t)};var jX=new se;En.pointToWindowCoordinates=function(e,t,n,i){return i=En.pointToGLWindowCoordinates(e,t,n,i),i.y=2*t[5]-i.y,i};En.pointToGLWindowCoordinates=function(e,t,n,i){c(i)||(i=new U);let o=jX;return O.multiplyByVector(e,se.fromElements(n.x,n.y,n.z,1,o),o),se.multiplyByScalar(o,1/o.w,o),O.multiplyByVector(t,o,o),U.fromCartesian4(o,i)};var YX=new u,qX=new u,WX=new u;En.rotationMatrixFromPositionVelocity=function(e,t,n,i){let o=(n??Z.default).geodeticSurfaceNormal(e,YX),r=u.cross(t,o,qX);u.equalsEpsilon(r,u.ZERO,w.EPSILON6)&&(r=u.clone(u.UNIT_X,r));let a=u.cross(r,t,WX);return u.normalize(a,a),u.cross(t,a,r),u.negate(r,r),u.normalize(r,r),c(i)||(i=new J),i[0]=t.x,i[1]=t.y,i[2]=t.z,i[3]=r.x,i[4]=r.y,i[5]=r.z,i[6]=a.x,i[7]=a.y,i[8]=a.z,i};var LP=new O(0,0,1,0,1,0,0,0,0,1,0,0,0,0,0,1),NP=new ae,zx=new u,JX=new u,KX=new J,Hx=new O,FP=new O;En.basisTo2D=function(e,t,n){let i=O.getTranslation(t,JX),o=e.ellipsoid,r;if(u.equals(i,u.ZERO))r=u.clone(u.ZERO,zx);else{let f=o.cartesianToCartographic(i,NP);r=e.project(f,zx),u.fromElements(r.z,r.x,r.y,r)}let a=En.eastNorthUpToFixedFrame(i,o,Hx),s=O.inverseTransformation(a,FP),A=O.getMatrix3(t,KX),l=O.multiplyByMatrix3(s,A,n);return O.multiply(LP,l,n),O.setTranslation(n,r,n),n};En.ellipsoidTo2DModelMatrix=function(e,t,n){let i=e.ellipsoid,o=En.eastNorthUpToFixedFrame(t,i,Hx),r=O.inverseTransformation(o,FP),a=i.cartesianToCartographic(t,NP),s=e.project(a,zx);u.fromElements(s.z,s.x,s.y,s);let A=O.fromTranslation(s,Hx);return O.multiply(LP,r,n),O.multiply(A,n,n),n};var Rn=En;function Gt(e,t,n,i){this.west=e??0,this.south=t??0,this.east=n??0,this.north=i??0}Object.defineProperties(Gt.prototype,{width:{get:function(){return Gt.computeWidth(this)}},height:{get:function(){return Gt.computeHeight(this)}}});Gt.packedLength=4;Gt.pack=function(e,t,n){return n=n??0,t[n++]=e.west,t[n++]=e.south,t[n++]=e.east,t[n]=e.north,t};Gt.unpack=function(e,t,n){return t=t??0,c(n)||(n=new Gt),n.west=e[t++],n.south=e[t++],n.east=e[t++],n.north=e[t],n};Gt.computeWidth=function(e){let t=e.east,n=e.west;return t<n&&(t+=w.TWO_PI),t-n};Gt.computeHeight=function(e){return e.north-e.south};Gt.fromDegrees=function(e,t,n,i,o){return e=w.toRadians(e??0),t=w.toRadians(t??0),n=w.toRadians(n??0),i=w.toRadians(i??0),c(o)?(o.west=e,o.south=t,o.east=n,o.north=i,o):new Gt(e,t,n,i)};Gt.fromRadians=function(e,t,n,i,o){return c(o)?(o.west=e??0,o.south=t??0,o.east=n??0,o.north=i??0,o):new Gt(e,t,n,i)};Gt.fromCartographicArray=function(e,t){let n=Number.MAX_VALUE,i=-Number.MAX_VALUE,o=Number.MAX_VALUE,r=-Number.MAX_VALUE,a=Number.MAX_VALUE,s=-Number.MAX_VALUE;for(let A=0,l=e.length;A<l;A++){let f=e[A];n=Math.min(n,f.longitude),i=Math.max(i,f.longitude),a=Math.min(a,f.latitude),s=Math.max(s,f.latitude);let h=f.longitude>=0?f.longitude:f.longitude+w.TWO_PI;o=Math.min(o,h),r=Math.max(r,h)}return i-n>r-o&&(n=o,i=r,i>w.PI&&(i=i-w.TWO_PI),n>w.PI&&(n=n-w.TWO_PI)),c(t)?(t.west=n,t.south=a,t.east=i,t.north=s,t):new Gt(n,a,i,s)};Gt.fromCartesianArray=function(e,t,n){t=t??Z.default;let i=Number.MAX_VALUE,o=-Number.MAX_VALUE,r=Number.MAX_VALUE,a=-Number.MAX_VALUE,s=Number.MAX_VALUE,A=-Number.MAX_VALUE;for(let l=0,f=e.length;l<f;l++){let h=t.cartesianToCartographic(e[l]);i=Math.min(i,h.longitude),o=Math.max(o,h.longitude),s=Math.min(s,h.latitude),A=Math.max(A,h.latitude);let m=h.longitude>=0?h.longitude:h.longitude+w.TWO_PI;r=Math.min(r,m),a=Math.max(a,m)}return o-i>a-r&&(i=r,o=a,o>w.PI&&(o=o-w.TWO_PI),i>w.PI&&(i=i-w.TWO_PI)),c(n)?(n.west=i,n.south=s,n.east=o,n.north=A,n):new Gt(i,s,o,A)};var XX=new u,ZX=new u,$X=new u,eZ=new u,tZ=new u,Vx=new Array(5);for(let e=0;e<Vx.length;++e)Vx[e]=new u;Gt.fromBoundingSphere=function(e,t,n){let i=e.center,o=e.radius;if(c(t)||(t=Z.default),c(n)||(n=new Gt),u.equals(i,u.ZERO))return Gt.clone(Gt.MAX_VALUE,n),n;let r=Rn.eastNorthUpToFixedFrame(i,t,XX),a=O.multiplyByPointAsVector(r,u.UNIT_X,ZX);u.normalize(a,a);let s=O.multiplyByPointAsVector(r,u.UNIT_Y,$X);u.normalize(s,s),u.multiplyByScalar(s,o,s),u.multiplyByScalar(a,o,a);let A=u.negate(s,tZ),l=u.negate(a,eZ),f=Vx,h=f[0];return u.add(i,s,h),h=f[1],u.add(i,l,h),h=f[2],u.add(i,A,h),h=f[3],u.add(i,a,h),f[4]=i,Gt.fromCartesianArray(f,t,n)};Gt.clone=function(e,t){if(c(e))return c(t)?(t.west=e.west,t.south=e.south,t.east=e.east,t.north=e.north,t):new Gt(e.west,e.south,e.east,e.north)};Gt.equalsEpsilon=function(e,t,n){return n=n??0,e===t||c(e)&&c(t)&&Math.abs(e.west-t.west)<=n&&Math.abs(e.south-t.south)<=n&&Math.abs(e.east-t.east)<=n&&Math.abs(e.north-t.north)<=n};Gt.prototype.clone=function(e){return Gt.clone(this,e)};Gt.prototype.equals=function(e){return Gt.equals(this,e)};Gt.equals=function(e,t){return e===t||c(e)&&c(t)&&e.west===t.west&&e.south===t.south&&e.east===t.east&&e.north===t.north};Gt.prototype.equalsEpsilon=function(e,t){return Gt.equalsEpsilon(this,e,t)};Gt._validate=function(e){};Gt.southwest=function(e,t){return c(t)?(t.longitude=e.west,t.latitude=e.south,t.height=0,t):new ae(e.west,e.south)};Gt.northwest=function(e,t){return c(t)?(t.longitude=e.west,t.latitude=e.north,t.height=0,t):new ae(e.west,e.north)};Gt.northeast=function(e,t){return c(t)?(t.longitude=e.east,t.latitude=e.north,t.height=0,t):new ae(e.east,e.north)};Gt.southeast=function(e,t){return c(t)?(t.longitude=e.east,t.latitude=e.south,t.height=0,t):new ae(e.east,e.south)};Gt.center=function(e,t){let n=e.east,i=e.west;n<i&&(n+=w.TWO_PI);let o=w.negativePiToPi((i+n)*.5),r=(e.south+e.north)*.5;return c(t)?(t.longitude=o,t.latitude=r,t.height=0,t):new ae(o,r)};Gt.intersection=function(e,t,n){let i=e.east,o=e.west,r=t.east,a=t.west;i<o&&r>0?i+=w.TWO_PI:r<a&&i>0&&(r+=w.TWO_PI),i<o&&a<0?a+=w.TWO_PI:r<a&&o<0&&(o+=w.TWO_PI);let s=w.negativePiToPi(Math.max(o,a)),A=w.negativePiToPi(Math.min(i,r));if((e.west<e.east||t.west<t.east)&&A<=s)return;let l=Math.max(e.south,t.south),f=Math.min(e.north,t.north);if(!(l>=f))return c(n)?(n.west=s,n.south=l,n.east=A,n.north=f,n):new Gt(s,l,A,f)};Gt.simpleIntersection=function(e,t,n){let i=Math.max(e.west,t.west),o=Math.max(e.south,t.south),r=Math.min(e.east,t.east),a=Math.min(e.north,t.north);if(!(o>=a||i>=r))return c(n)?(n.west=i,n.south=o,n.east=r,n.north=a,n):new Gt(i,o,r,a)};Gt.union=function(e,t,n){c(n)||(n=new Gt);let i=e.east,o=e.west,r=t.east,a=t.west;i<o&&r>0?i+=w.TWO_PI:r<a&&i>0&&(r+=w.TWO_PI),i<o&&a<0?a+=w.TWO_PI:r<a&&o<0&&(o+=w.TWO_PI);let s=w.negativePiToPi(Math.min(o,a)),A=w.negativePiToPi(Math.max(i,r));return n.west=s,n.south=Math.min(e.south,t.south),n.east=A,n.north=Math.max(e.north,t.north),n};Gt.expand=function(e,t,n){return c(n)||(n=new Gt),n.west=Math.min(e.west,t.longitude),n.south=Math.min(e.south,t.latitude),n.east=Math.max(e.east,t.longitude),n.north=Math.max(e.north,t.latitude),n};Gt.contains=function(e,t){let n=t.longitude,i=t.latitude,o=e.west,r=e.east;return r<o&&(r+=w.TWO_PI,n<0&&(n+=w.TWO_PI)),(n>o||w.equalsEpsilon(n,o,w.EPSILON14))&&(n<r||w.equalsEpsilon(n,r,w.EPSILON14))&&i>=e.south&&i<=e.north};var nZ=new ae;Gt.subsample=function(e,t,n,i){t=t??Z.default,n=n??0,c(i)||(i=[]);let o=0,r=e.north,a=e.south,s=e.east,A=e.west,l=nZ;l.height=n,l.longitude=A,l.latitude=r,i[o]=t.cartographicToCartesian(l,i[o]),o++,l.longitude=s,i[o]=t.cartographicToCartesian(l,i[o]),o++,l.latitude=a,i[o]=t.cartographicToCartesian(l,i[o]),o++,l.longitude=A,i[o]=t.cartographicToCartesian(l,i[o]),o++,r<0?l.latitude=r:a>0?l.latitude=a:l.latitude=0;for(let f=1;f<8;++f)l.longitude=-Math.PI+f*w.PI_OVER_TWO,Gt.contains(e,l)&&(i[o]=t.cartographicToCartesian(l,i[o]),o++);return l.latitude===0&&(l.longitude=A,i[o]=t.cartographicToCartesian(l,i[o]),o++,l.longitude=s,i[o]=t.cartographicToCartesian(l,i[o]),o++),i.length=o,i};Gt.subsection=function(e,t,n,i,o,r){if(c(r)||(r=new Gt),e.west<=e.east){let s=e.east-e.west;r.west=e.west+t*s,r.east=e.west+i*s}else{let s=w.TWO_PI+e.east-e.west;r.west=w.negativePiToPi(e.west+t*s),r.east=w.negativePiToPi(e.west+i*s)}let a=e.north-e.south;return r.south=e.south+n*a,r.north=e.south+o*a,t===1&&(r.west=e.east),i===1&&(r.east=e.east),n===1&&(r.south=e.north),o===1&&(r.north=e.north),r};Gt.MAX_VALUE=Object.freeze(new Gt(-Math.PI,-w.PI_OVER_TWO,Math.PI,w.PI_OVER_TWO));var ce=Gt;function Wi(e,t,n,i){this.x=e??0,this.y=t??0,this.width=n??0,this.height=i??0}Wi.packedLength=4;Wi.pack=function(e,t,n){return n=n??0,t[n++]=e.x,t[n++]=e.y,t[n++]=e.width,t[n]=e.height,t};Wi.unpack=function(e,t,n){return t=t??0,c(n)||(n=new Wi),n.x=e[t++],n.y=e[t++],n.width=e[t++],n.height=e[t],n};Wi.fromPoints=function(e,t){if(c(t)||(t=new Wi),!c(e)||e.length===0)return t.x=0,t.y=0,t.width=0,t.height=0,t;let n=e.length,i=e[0].x,o=e[0].y,r=e[0].x,a=e[0].y;for(let s=1;s<n;s++){let A=e[s],l=A.x,f=A.y;i=Math.min(l,i),r=Math.max(l,r),o=Math.min(f,o),a=Math.max(f,a)}return t.x=i,t.y=o,t.width=r-i,t.height=a-o,t};var kP=new Ai,iZ=new ae,oZ=new ae;Wi.fromRectangle=function(e,t,n){if(c(n)||(n=new Wi),!c(e))return n.x=0,n.y=0,n.width=0,n.height=0,n;kP._ellipsoid=Z.default,t=t??kP;let i=t.project(ce.southwest(e,iZ)),o=t.project(ce.northeast(e,oZ));return U.subtract(o,i,o),n.x=i.x,n.y=i.y,n.width=o.x,n.height=o.y,n};Wi.clone=function(e,t){if(c(e))return c(t)?(t.x=e.x,t.y=e.y,t.width=e.width,t.height=e.height,t):new Wi(e.x,e.y,e.width,e.height)};Wi.union=function(e,t,n){c(n)||(n=new Wi);let i=Math.min(e.x,t.x),o=Math.min(e.y,t.y),r=Math.max(e.x+e.width,t.x+t.width),a=Math.max(e.y+e.height,t.y+t.height);return n.x=i,n.y=o,n.width=r-i,n.height=a-o,n};Wi.expand=function(e,t,n){n=Wi.clone(e,n);let i=t.x-n.x,o=t.y-n.y;return i>n.width?n.width=i:i<0&&(n.width-=i,n.x=t.x),o>n.height?n.height=o:o<0&&(n.height-=o,n.y=t.y),n};Wi.intersect=function(e,t){let n=e.x,i=e.y,o=t.x,r=t.y;return n>o+t.width||n+e.width<o||i+e.height<r||i>r+t.height?vt.OUTSIDE:vt.INTERSECTING};Wi.equals=function(e,t){return e===t||c(e)&&c(t)&&e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height};Wi.prototype.clone=function(e){return Wi.clone(this,e)};Wi.prototype.intersect=function(e){return Wi.intersect(this,e)};Wi.prototype.equals=function(e){return Wi.equals(this,e)};var Jt=Wi;var cr={POINTS:V.POINTS,LINES:V.LINES,LINE_LOOP:V.LINE_LOOP,LINE_STRIP:V.LINE_STRIP,TRIANGLES:V.TRIANGLES,TRIANGLE_STRIP:V.TRIANGLE_STRIP,TRIANGLE_FAN:V.TRIANGLE_FAN};cr.isLines=function(e){return e===cr.LINES||e===cr.LINE_LOOP||e===cr.LINE_STRIP};cr.isTriangles=function(e){return e===cr.TRIANGLES||e===cr.TRIANGLE_STRIP||e===cr.TRIANGLE_FAN};cr.validate=function(e){return e===cr.POINTS||e===cr.LINES||e===cr.LINE_LOOP||e===cr.LINE_STRIP||e===cr.TRIANGLES||e===cr.TRIANGLE_STRIP||e===cr.TRIANGLE_FAN};var Ce=Object.freeze(cr);var Ui={CULL:1,OCCLUDE:2,EXECUTE_IN_CLOSEST_FRUSTUM:4,DEBUG_SHOW_BOUNDING_VOLUME:8,CAST_SHADOWS:16,RECEIVE_SHADOWS:32,PICK_ONLY:64,DEPTH_FOR_TRANSLUCENT_CLASSIFICATION:128};function Ug(e){e=e??k.EMPTY_OBJECT,this._boundingVolume=e.boundingVolume,this._orientedBoundingBox=e.orientedBoundingBox,this._modelMatrix=e.modelMatrix,this._primitiveType=e.primitiveType??Ce.TRIANGLES,this._vertexArray=e.vertexArray,this._count=e.count,this._offset=e.offset??0,this._instanceCount=e.instanceCount??0,this._shaderProgram=e.shaderProgram,this._uniformMap=e.uniformMap,this._renderState=e.renderState,this._framebuffer=e.framebuffer,this._pass=e.pass,this._owner=e.owner,this._debugOverlappingFrustums=0,this._pickId=e.pickId,this._pickMetadataAllowed=e.pickMetadataAllowed===!0,this._pickedMetadataInfo=void 0,this._flags=0,this.cull=e.cull??!0,this.occlude=e.occlude??!0,this.executeInClosestFrustum=e.executeInClosestFrustum??!1,this.debugShowBoundingVolume=e.debugShowBoundingVolume??!1,this.castShadows=e.castShadows??!1,this.receiveShadows=e.receiveShadows??!1,this.pickOnly=e.pickOnly??!1,this.depthForTranslucentClassification=e.depthForTranslucentClassification??!1,this.dirty=!0,this.lastDirtyTime=0,this.derivedCommands={}}function Tr(e,t){return(e._flags&t)===t}function Nf(e,t,n){n?e._flags|=t:e._flags&=~t}Object.defineProperties(Ug.prototype,{boundingVolume:{get:function(){return this._boundingVolume},set:function(e){this._boundingVolume!==e&&(this._boundingVolume=e,this.dirty=!0)}},orientedBoundingBox:{get:function(){return this._orientedBoundingBox},set:function(e){this._orientedBoundingBox!==e&&(this._orientedBoundingBox=e,this.dirty=!0)}},cull:{get:function(){return Tr(this,Ui.CULL)},set:function(e){Tr(this,Ui.CULL)!==e&&(Nf(this,Ui.CULL,e),this.dirty=!0)}},occlude:{get:function(){return Tr(this,Ui.OCCLUDE)},set:function(e){Tr(this,Ui.OCCLUDE)!==e&&(Nf(this,Ui.OCCLUDE,e),this.dirty=!0)}},modelMatrix:{get:function(){return this._modelMatrix},set:function(e){this._modelMatrix!==e&&(this._modelMatrix=e,this.dirty=!0)}},primitiveType:{get:function(){return this._primitiveType},set:function(e){this._primitiveType!==e&&(this._primitiveType=e,this.dirty=!0)}},vertexArray:{get:function(){return this._vertexArray},set:function(e){this._vertexArray!==e&&(this._vertexArray=e,this.dirty=!0)}},count:{get:function(){return this._count},set:function(e){this._count!==e&&(this._count=e,this.dirty=!0)}},offset:{get:function(){return this._offset},set:function(e){this._offset!==e&&(this._offset=e,this.dirty=!0)}},instanceCount:{get:function(){return this._instanceCount},set:function(e){this._instanceCount!==e&&(this._instanceCount=e,this.dirty=!0)}},shaderProgram:{get:function(){return this._shaderProgram},set:function(e){this._shaderProgram!==e&&(this._shaderProgram=e,this.dirty=!0)}},castShadows:{get:function(){return Tr(this,Ui.CAST_SHADOWS)},set:function(e){Tr(this,Ui.CAST_SHADOWS)!==e&&(Nf(this,Ui.CAST_SHADOWS,e),this.dirty=!0)}},receiveShadows:{get:function(){return Tr(this,Ui.RECEIVE_SHADOWS)},set:function(e){Tr(this,Ui.RECEIVE_SHADOWS)!==e&&(Nf(this,Ui.RECEIVE_SHADOWS,e),this.dirty=!0)}},uniformMap:{get:function(){return this._uniformMap},set:function(e){this._uniformMap!==e&&(this._uniformMap=e,this.dirty=!0)}},renderState:{get:function(){return this._renderState},set:function(e){this._renderState!==e&&(this._renderState=e,this.dirty=!0)}},framebuffer:{get:function(){return this._framebuffer},set:function(e){this._framebuffer!==e&&(this._framebuffer=e,this.dirty=!0)}},pass:{get:function(){return this._pass},set:function(e){this._pass!==e&&(this._pass=e,this.dirty=!0)}},executeInClosestFrustum:{get:function(){return Tr(this,Ui.EXECUTE_IN_CLOSEST_FRUSTUM)},set:function(e){Tr(this,Ui.EXECUTE_IN_CLOSEST_FRUSTUM)!==e&&(Nf(this,Ui.EXECUTE_IN_CLOSEST_FRUSTUM,e),this.dirty=!0)}},owner:{get:function(){return this._owner},set:function(e){this._owner!==e&&(this._owner=e,this.dirty=!0)}},debugShowBoundingVolume:{get:function(){return Tr(this,Ui.DEBUG_SHOW_BOUNDING_VOLUME)},set:function(e){Tr(this,Ui.DEBUG_SHOW_BOUNDING_VOLUME)!==e&&(Nf(this,Ui.DEBUG_SHOW_BOUNDING_VOLUME,e),this.dirty=!0)}},debugOverlappingFrustums:{get:function(){return this._debugOverlappingFrustums},set:function(e){this._debugOverlappingFrustums!==e&&(this._debugOverlappingFrustums=e,this.dirty=!0)}},pickId:{get:function(){return this._pickId},set:function(e){this._pickId!==e&&(this._pickId=e,this.dirty=!0)}},pickMetadataAllowed:{get:function(){return this._pickMetadataAllowed}},pickedMetadataInfo:{get:function(){return this._pickedMetadataInfo},set:function(e){this._pickedMetadataInfo!==e&&(this._pickedMetadataInfo=e,this.dirty=!0)}},pickOnly:{get:function(){return Tr(this,Ui.PICK_ONLY)},set:function(e){Tr(this,Ui.PICK_ONLY)!==e&&(Nf(this,Ui.PICK_ONLY,e),this.dirty=!0)}},depthForTranslucentClassification:{get:function(){return Tr(this,Ui.DEPTH_FOR_TRANSLUCENT_CLASSIFICATION)},set:function(e){Tr(this,Ui.DEPTH_FOR_TRANSLUCENT_CLASSIFICATION)!==e&&(Nf(this,Ui.DEPTH_FOR_TRANSLUCENT_CLASSIFICATION,e),this.dirty=!0)}}});Ug.shallowClone=function(e,t){if(c(e))return c(t)||(t=new Ug),t._boundingVolume=e._boundingVolume,t._orientedBoundingBox=e._orientedBoundingBox,t._modelMatrix=e._modelMatrix,t._primitiveType=e._primitiveType,t._vertexArray=e._vertexArray,t._count=e._count,t._offset=e._offset,t._instanceCount=e._instanceCount,t._shaderProgram=e._shaderProgram,t._uniformMap=e._uniformMap,t._renderState=e._renderState,t._framebuffer=e._framebuffer,t._pass=e._pass,t._owner=e._owner,t._debugOverlappingFrustums=e._debugOverlappingFrustums,t._pickId=e._pickId,t._pickMetadataAllowed=e._pickMetadataAllowed,t._pickedMetadataInfo=e._pickedMetadataInfo,t._flags=e._flags,t.dirty=!0,t.lastDirtyTime=0,t};Ug.prototype.execute=function(e,t){e.draw(this,t)};var mt=Ug;var In={UNSIGNED_BYTE:V.UNSIGNED_BYTE,UNSIGNED_SHORT:V.UNSIGNED_SHORT,UNSIGNED_INT:V.UNSIGNED_INT,FLOAT:V.FLOAT,HALF_FLOAT:V.HALF_FLOAT_OES,UNSIGNED_INT_24_8:V.UNSIGNED_INT_24_8,UNSIGNED_SHORT_4_4_4_4:V.UNSIGNED_SHORT_4_4_4_4,UNSIGNED_SHORT_5_5_5_1:V.UNSIGNED_SHORT_5_5_5_1,UNSIGNED_SHORT_5_6_5:V.UNSIGNED_SHORT_5_6_5};In.toWebGLConstant=function(e,t){switch(e){case In.UNSIGNED_BYTE:return V.UNSIGNED_BYTE;case In.UNSIGNED_SHORT:return V.UNSIGNED_SHORT;case In.UNSIGNED_INT:return V.UNSIGNED_INT;case In.FLOAT:return V.FLOAT;case In.HALF_FLOAT:return t.webgl2?V.HALF_FLOAT:V.HALF_FLOAT_OES;case In.UNSIGNED_INT_24_8:return V.UNSIGNED_INT_24_8;case In.UNSIGNED_SHORT_4_4_4_4:return V.UNSIGNED_SHORT_4_4_4_4;case In.UNSIGNED_SHORT_5_5_5_1:return V.UNSIGNED_SHORT_5_5_5_1;case In.UNSIGNED_SHORT_5_6_5:return In.UNSIGNED_SHORT_5_6_5}};In.isPacked=function(e){return e===In.UNSIGNED_INT_24_8||e===In.UNSIGNED_SHORT_4_4_4_4||e===In.UNSIGNED_SHORT_5_5_5_1||e===In.UNSIGNED_SHORT_5_6_5};In.sizeInBytes=function(e){switch(e){case In.UNSIGNED_BYTE:return 1;case In.UNSIGNED_SHORT:case In.UNSIGNED_SHORT_4_4_4_4:case In.UNSIGNED_SHORT_5_5_5_1:case In.UNSIGNED_SHORT_5_6_5:case In.HALF_FLOAT:return 2;case In.UNSIGNED_INT:case In.FLOAT:case In.UNSIGNED_INT_24_8:return 4}};In.validate=function(e){return e===In.UNSIGNED_BYTE||e===In.UNSIGNED_SHORT||e===In.UNSIGNED_INT||e===In.FLOAT||e===In.HALF_FLOAT||e===In.UNSIGNED_INT_24_8||e===In.UNSIGNED_SHORT_4_4_4_4||e===In.UNSIGNED_SHORT_5_5_5_1||e===In.UNSIGNED_SHORT_5_6_5};In.getTypedArrayConstructor=function(e){let t=In.sizeInBytes(e);return t===Uint8Array.BYTES_PER_ELEMENT?Uint8Array:t===Uint16Array.BYTES_PER_ELEMENT?Uint16Array:t===Float32Array.BYTES_PER_ELEMENT&&e===In.FLOAT?Float32Array:Uint32Array};var _t=Object.freeze(In);var xe={DEPTH_COMPONENT:V.DEPTH_COMPONENT,DEPTH_STENCIL:V.DEPTH_STENCIL,ALPHA:V.ALPHA,RED:V.RED,RG:V.RG,RGB:V.RGB,RGBA:V.RGBA,RED_INTEGER:V.RED_INTEGER,RG_INTEGER:V.RG_INTEGER,RGB_INTEGER:V.RGB_INTEGER,RGBA_INTEGER:V.RGBA_INTEGER,LUMINANCE:V.LUMINANCE,LUMINANCE_ALPHA:V.LUMINANCE_ALPHA,RGB_DXT1:V.COMPRESSED_RGB_S3TC_DXT1_EXT,RGBA_DXT1:V.COMPRESSED_RGBA_S3TC_DXT1_EXT,RGBA_DXT3:V.COMPRESSED_RGBA_S3TC_DXT3_EXT,RGBA_DXT5:V.COMPRESSED_RGBA_S3TC_DXT5_EXT,RGB_PVRTC_4BPPV1:V.COMPRESSED_RGB_PVRTC_4BPPV1_IMG,RGB_PVRTC_2BPPV1:V.COMPRESSED_RGB_PVRTC_2BPPV1_IMG,RGBA_PVRTC_4BPPV1:V.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG,RGBA_PVRTC_2BPPV1:V.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG,RGBA_ASTC:V.COMPRESSED_RGBA_ASTC_4x4_WEBGL,RGB_ETC1:V.COMPRESSED_RGB_ETC1_WEBGL,RGB8_ETC2:V.COMPRESSED_RGB8_ETC2,RGBA8_ETC2_EAC:V.COMPRESSED_RGBA8_ETC2_EAC,RGBA_BC7:V.COMPRESSED_RGBA_BPTC_UNORM};xe.componentsLength=function(e){switch(e){case xe.RGB:case xe.RGB_INTEGER:return 3;case xe.RGBA:case xe.RGBA_INTEGER:return 4;case xe.LUMINANCE_ALPHA:case xe.RG:case xe.RG_INTEGER:return 2;case xe.ALPHA:case xe.RED:case xe.RED_INTEGER:case xe.LUMINANCE:return 1;default:return 1}};xe.validate=function(e){return e===xe.DEPTH_COMPONENT||e===xe.DEPTH_STENCIL||e===xe.ALPHA||e===xe.RED||e===xe.RG||e===xe.RGB||e===xe.RGBA||e===xe.RED_INTEGER||e===xe.RG_INTEGER||e===xe.RGB_INTEGER||e===xe.RGBA_INTEGER||e===xe.LUMINANCE||e===xe.LUMINANCE_ALPHA||e===xe.RGB_DXT1||e===xe.RGBA_DXT1||e===xe.RGBA_DXT3||e===xe.RGBA_DXT5||e===xe.RGB_PVRTC_4BPPV1||e===xe.RGB_PVRTC_2BPPV1||e===xe.RGBA_PVRTC_4BPPV1||e===xe.RGBA_PVRTC_2BPPV1||e===xe.RGBA_ASTC||e===xe.RGB_ETC1||e===xe.RGB8_ETC2||e===xe.RGBA8_ETC2_EAC||e===xe.RGBA_BC7};xe.isColorFormat=function(e){return e===xe.RED||e===xe.ALPHA||e===xe.RGB||e===xe.RGBA||e===xe.LUMINANCE||e===xe.LUMINANCE_ALPHA};xe.isDepthFormat=function(e){return e===xe.DEPTH_COMPONENT||e===xe.DEPTH_STENCIL};xe.isCompressedFormat=function(e){return e===xe.RGB_DXT1||e===xe.RGBA_DXT1||e===xe.RGBA_DXT3||e===xe.RGBA_DXT5||e===xe.RGB_PVRTC_4BPPV1||e===xe.RGB_PVRTC_2BPPV1||e===xe.RGBA_PVRTC_4BPPV1||e===xe.RGBA_PVRTC_2BPPV1||e===xe.RGBA_ASTC||e===xe.RGB_ETC1||e===xe.RGB8_ETC2||e===xe.RGBA8_ETC2_EAC||e===xe.RGBA_BC7};xe.isDXTFormat=function(e){return e===xe.RGB_DXT1||e===xe.RGBA_DXT1||e===xe.RGBA_DXT3||e===xe.RGBA_DXT5};xe.isPVRTCFormat=function(e){return e===xe.RGB_PVRTC_4BPPV1||e===xe.RGB_PVRTC_2BPPV1||e===xe.RGBA_PVRTC_4BPPV1||e===xe.RGBA_PVRTC_2BPPV1};xe.isASTCFormat=function(e){return e===xe.RGBA_ASTC};xe.isETC1Format=function(e){return e===xe.RGB_ETC1};xe.isETC2Format=function(e){return e===xe.RGB8_ETC2||e===xe.RGBA8_ETC2_EAC};xe.isBC7Format=function(e){return e===xe.RGBA_BC7};xe.compressedTextureSizeInBytes=function(e,t,n){switch(e){case xe.RGB_DXT1:case xe.RGBA_DXT1:case xe.RGB_ETC1:case xe.RGB8_ETC2:return Math.floor((t+3)/4)*Math.floor((n+3)/4)*8;case xe.RGBA_DXT3:case xe.RGBA_DXT5:case xe.RGBA_ASTC:case xe.RGBA8_ETC2_EAC:return Math.floor((t+3)/4)*Math.floor((n+3)/4)*16;case xe.RGB_PVRTC_4BPPV1:case xe.RGBA_PVRTC_4BPPV1:return Math.floor((Math.max(t,8)*Math.max(n,8)*4+7)/8);case xe.RGB_PVRTC_2BPPV1:case xe.RGBA_PVRTC_2BPPV1:return Math.floor((Math.max(t,16)*Math.max(n,8)*2+7)/8);case xe.RGBA_BC7:return Math.ceil(t/4)*Math.ceil(n/4)*16;default:return 0}};xe.textureSizeInBytes=function(e,t,n,i){let o=xe.componentsLength(e);return _t.isPacked(t)&&(o=1),o*_t.sizeInBytes(t)*n*i};xe.texture3DSizeInBytes=function(e,t,n,i,o){let r=xe.componentsLength(e);return _t.isPacked(t)&&(r=1),r*_t.sizeInBytes(t)*n*i*o};xe.alignmentInBytes=function(e,t,n){let i=xe.textureSizeInBytes(e,t,n,1)%4;return i===0?4:i===2?2:1};xe.createTypedArray=function(e,t,n,i){let o=_t.getTypedArrayConstructor(t),r=xe.componentsLength(e)*n*i;return new o(r)};xe.flipY=function(e,t,n,i,o){if(o===1)return e;let r=xe.createTypedArray(t,n,i,o),a=xe.componentsLength(t),s=i*a;for(let A=0;A<o;++A){let l=A*i*a,f=(o-A-1)*i*a;for(let h=0;h<s;++h)r[f+h]=e[l+h]}return r};xe.toInternalFormat=function(e,t,n){if(!n.webgl2)return e;if(e===xe.DEPTH_STENCIL)return V.DEPTH24_STENCIL8;if(e===xe.DEPTH_COMPONENT){if(t===_t.UNSIGNED_SHORT)return V.DEPTH_COMPONENT16;if(t===_t.UNSIGNED_INT)return V.DEPTH_COMPONENT24}if(t===_t.FLOAT)switch(e){case xe.RGBA:return V.RGBA32F;case xe.RGB:return V.RGB32F;case xe.RG:return V.RG32F;case xe.RED:return V.R32F}if(t===_t.HALF_FLOAT)switch(e){case xe.RGBA:return V.RGBA16F;case xe.RGB:return V.RGB16F;case xe.RG:return V.RG16F;case xe.RED:return V.R16F}if(t===_t.UNSIGNED_BYTE)switch(e){case xe.RGBA:return V.RGBA8;case xe.RGB:return V.RGB8;case xe.RG:return V.RG8;case xe.RED:return V.R8}if(t===_t.INT)switch(e){case xe.RGBA_INTEGER:return V.RGBA32I;case xe.RGB_INTEGER:return V.RGB32I;case xe.RG_INTEGER:return V.RG32I;case xe.RED_INTEGER:return V.R32I}if(t===_t.UNSIGNED_INT)switch(e){case xe.RGBA_INTEGER:return V.RGBA32UI;case xe.RGB_INTEGER:return V.RGB32UI;case xe.RG_INTEGER:return V.RG32UI;case xe.RED_INTEGER:return V.R32UI}return e};var Bt=Object.freeze(xe);var Gi={_maximumCombinedTextureImageUnits:0,_maximumCubeMapSize:0,_maximumFragmentUniformVectors:0,_maximumTextureImageUnits:0,_maximumRenderbufferSize:0,_maximumTextureSize:0,_maximumVaryingVectors:0,_maximumVertexAttributes:0,_maximumVertexTextureImageUnits:0,_maximumVertexUniformVectors:0,_minimumAliasedLineWidth:0,_maximumAliasedLineWidth:0,_minimumAliasedPointSize:0,_maximumAliasedPointSize:0,_maximumViewportWidth:0,_maximumViewportHeight:0,_maximumTextureFilterAnisotropy:0,_maximumDrawBuffers:0,_maximumColorAttachments:0,_maximumSamples:0,_highpFloatSupported:!1,_highpIntSupported:!1};Object.defineProperties(Gi,{maximumCombinedTextureImageUnits:{get:function(){return Gi._maximumCombinedTextureImageUnits}},maximumCubeMapSize:{get:function(){return Gi._maximumCubeMapSize}},maximumFragmentUniformVectors:{get:function(){return Gi._maximumFragmentUniformVectors}},maximumTextureImageUnits:{get:function(){return Gi._maximumTextureImageUnits}},maximumRenderbufferSize:{get:function(){return Gi._maximumRenderbufferSize}},maximumTextureSize:{get:function(){return Gi._maximumTextureSize}},maximumVaryingVectors:{get:function(){return Gi._maximumVaryingVectors}},maximumVertexAttributes:{get:function(){return Gi._maximumVertexAttributes}},maximumVertexTextureImageUnits:{get:function(){return Gi._maximumVertexTextureImageUnits}},maximumVertexUniformVectors:{get:function(){return Gi._maximumVertexUniformVectors}},minimumAliasedLineWidth:{get:function(){return Gi._minimumAliasedLineWidth}},maximumAliasedLineWidth:{get:function(){return Gi._maximumAliasedLineWidth}},minimumAliasedPointSize:{get:function(){return Gi._minimumAliasedPointSize}},maximumAliasedPointSize:{get:function(){return Gi._maximumAliasedPointSize}},maximumViewportWidth:{get:function(){return Gi._maximumViewportWidth}},maximumViewportHeight:{get:function(){return Gi._maximumViewportHeight}},maximumTextureFilterAnisotropy:{get:function(){return Gi._maximumTextureFilterAnisotropy}},maximumDrawBuffers:{get:function(){return Gi._maximumDrawBuffers}},maximumColorAttachments:{get:function(){return Gi._maximumColorAttachments}},maximumSamples:{get:function(){return Gi._maximumSamples}},highpFloatSupported:{get:function(){return Gi._highpFloatSupported}},highpIntSupported:{get:function(){return Gi._highpIntSupported}}});var pn=Gi;function jx(e,t,n){let i=e._gl;i.framebufferTexture2D(i.FRAMEBUFFER,t,n._target,n._texture,0)}function MI(e,t,n){let i=e._gl;i.framebufferRenderbuffer(i.FRAMEBUFFER,t,i.RENDERBUFFER,n._getRenderbuffer())}function Cc(e){e=e??k.EMPTY_OBJECT;let n=e.context._gl,i=pn.maximumColorAttachments;if(this._gl=n,this._framebuffer=n.createFramebuffer(),this._colorTextures=[],this._colorRenderbuffers=[],this._activeColorAttachments=[],this._depthTexture=void 0,this._depthRenderbuffer=void 0,this._stencilRenderbuffer=void 0,this._depthStencilTexture=void 0,this._depthStencilRenderbuffer=void 0,this.destroyAttachments=e.destroyAttachments??!0,this._bind(),c(e.colorTextures)){let o=e.colorTextures,r=this._colorTextures.length=this._activeColorAttachments.length=o.length;for(let a=0;a<r;++a){let s=o[a],A=this._gl.COLOR_ATTACHMENT0+a;jx(this,A,s),this._activeColorAttachments[a]=A,this._colorTextures[a]=s}}if(c(e.colorRenderbuffers)){let o=e.colorRenderbuffers,r=this._colorRenderbuffers.length=this._activeColorAttachments.length=o.length;for(let a=0;a<r;++a){let s=o[a],A=this._gl.COLOR_ATTACHMENT0+a;MI(this,A,s),this._activeColorAttachments[a]=A,this._colorRenderbuffers[a]=s}}if(c(e.depthTexture)){let o=e.depthTexture;jx(this,this._gl.DEPTH_ATTACHMENT,o),this._depthTexture=o}if(c(e.depthRenderbuffer)){let o=e.depthRenderbuffer;MI(this,this._gl.DEPTH_ATTACHMENT,o),this._depthRenderbuffer=o}if(c(e.stencilRenderbuffer)){let o=e.stencilRenderbuffer;MI(this,this._gl.STENCIL_ATTACHMENT,o),this._stencilRenderbuffer=o}if(c(e.depthStencilTexture)){let o=e.depthStencilTexture;jx(this,this._gl.DEPTH_STENCIL_ATTACHMENT,o),this._depthStencilTexture=o}if(c(e.depthStencilRenderbuffer)){let o=e.depthStencilRenderbuffer;MI(this,this._gl.DEPTH_STENCIL_ATTACHMENT,o),this._depthStencilRenderbuffer=o}this._unBind()}Object.defineProperties(Cc.prototype,{status:{get:function(){this._bind();let e=this._gl.checkFramebufferStatus(this._gl.FRAMEBUFFER);return this._unBind(),e}},numberOfColorAttachments:{get:function(){return this._activeColorAttachments.length}},depthTexture:{get:function(){return this._depthTexture}},depthRenderbuffer:{get:function(){return this._depthRenderbuffer}},stencilRenderbuffer:{get:function(){return this._stencilRenderbuffer}},depthStencilTexture:{get:function(){return this._depthStencilTexture}},depthStencilRenderbuffer:{get:function(){return this._depthStencilRenderbuffer}},hasDepthAttachment:{get:function(){return!!(this.depthTexture||this.depthRenderbuffer||this.depthStencilTexture||this.depthStencilRenderbuffer)}}});Cc.prototype._bind=function(){let e=this._gl;e.bindFramebuffer(e.FRAMEBUFFER,this._framebuffer)};Cc.prototype._unBind=function(){let e=this._gl;e.bindFramebuffer(e.FRAMEBUFFER,null)};Cc.prototype.bindDraw=function(){let e=this._gl;e.bindFramebuffer(e.DRAW_FRAMEBUFFER,this._framebuffer)};Cc.prototype.bindRead=function(){let e=this._gl;e.bindFramebuffer(e.READ_FRAMEBUFFER,this._framebuffer)};Cc.prototype._getActiveColorAttachments=function(){return this._activeColorAttachments};Cc.prototype.getColorTexture=function(e){return this._colorTextures[e]};Cc.prototype.getColorRenderbuffer=function(e){return this._colorRenderbuffers[e]};Cc.prototype.isDestroyed=function(){return!1};Cc.prototype.destroy=function(){if(this.destroyAttachments){let e=this._colorTextures;for(let n=0;n<e.length;++n){let i=e[n];c(i)&&i.destroy()}let t=this._colorRenderbuffers;for(let n=0;n<t.length;++n){let i=t[n];c(i)&&i.destroy()}this._depthTexture=this._depthTexture&&this._depthTexture.destroy(),this._depthRenderbuffer=this._depthRenderbuffer&&this._depthRenderbuffer.destroy(),this._stencilRenderbuffer=this._stencilRenderbuffer&&this._stencilRenderbuffer.destroy(),this._depthStencilTexture=this._depthStencilTexture&&this._depthStencilTexture.destroy(),this._depthStencilRenderbuffer=this._depthStencilRenderbuffer&&this._depthStencilRenderbuffer.destroy()}return this._gl.deleteFramebuffer(this._framebuffer),pe(this)};var Ts=Cc;var OI={CLOCKWISE:V.CW,COUNTER_CLOCKWISE:V.CCW};OI.validate=function(e){return e===OI.CLOCKWISE||e===OI.COUNTER_CLOCKWISE};var Jo=Object.freeze(OI);function dA(e){let t=e??k.EMPTY_OBJECT,n=t.cull??k.EMPTY_OBJECT,i=t.polygonOffset??k.EMPTY_OBJECT,o=t.scissorTest??k.EMPTY_OBJECT,r=o.rectangle??k.EMPTY_OBJECT,a=t.depthRange??k.EMPTY_OBJECT,s=t.depthTest??k.EMPTY_OBJECT,A=t.colorMask??k.EMPTY_OBJECT,l=t.blending??k.EMPTY_OBJECT,f=l.color??k.EMPTY_OBJECT,h=t.stencilTest??k.EMPTY_OBJECT,m=h.frontOperation??k.EMPTY_OBJECT,p=h.backOperation??k.EMPTY_OBJECT,g=t.sampleCoverage??k.EMPTY_OBJECT,C=t.viewport;this.frontFace=t.frontFace??Jo.COUNTER_CLOCKWISE,this.cull={enabled:n.enabled??!1,face:n.face??V.BACK},this.lineWidth=t.lineWidth??1,this.polygonOffset={enabled:i.enabled??!1,factor:i.factor??0,units:i.units??0},this.scissorTest={enabled:o.enabled??!1,rectangle:Jt.clone(r)},this.depthRange={near:a.near??0,far:a.far??1},this.depthTest={enabled:s.enabled??!1,func:s.func??V.LESS},this.colorMask={red:A.red??!0,green:A.green??!0,blue:A.blue??!0,alpha:A.alpha??!0},this.depthMask=t.depthMask??!0,this.stencilMask=t.stencilMask??-1,this.blending={enabled:l.enabled??!1,color:new F(f.red??0,f.green??0,f.blue??0,f.alpha??0),equationRgb:l.equationRgb??V.FUNC_ADD,equationAlpha:l.equationAlpha??V.FUNC_ADD,functionSourceRgb:l.functionSourceRgb??V.ONE,functionSourceAlpha:l.functionSourceAlpha??V.ONE,functionDestinationRgb:l.functionDestinationRgb??V.ZERO,functionDestinationAlpha:l.functionDestinationAlpha??V.ZERO},this.stencilTest={enabled:h.enabled??!1,frontFunction:h.frontFunction??V.ALWAYS,backFunction:h.backFunction??V.ALWAYS,reference:h.reference??0,mask:h.mask??-1,frontOperation:{fail:m.fail??V.KEEP,zFail:m.zFail??V.KEEP,zPass:m.zPass??V.KEEP},backOperation:{fail:p.fail??V.KEEP,zFail:p.zFail??V.KEEP,zPass:p.zPass??V.KEEP}},this.sampleCoverage={enabled:g.enabled??!1,value:g.value??1,invert:g.invert??!1},this.viewport=c(C)?new Jt(C.x,C.y,C.width,C.height):void 0,this.id=0,this._applyFunctions=[]}var rZ=0,uA={};dA.fromCache=function(e){let t=JSON.stringify(e),n=uA[t];if(c(n))return++n.referenceCount,n.state;let i=new dA(e),o=JSON.stringify(i);return n=uA[o],c(n)||(i.id=rZ++,n={referenceCount:0,state:i},uA[o]=n),++n.referenceCount,uA[t]={referenceCount:1,state:n.state},n.state};dA.removeFromCache=function(e){let t=new dA(e),n=JSON.stringify(t),i=uA[n],o=JSON.stringify(e),r=uA[o];c(r)&&(--r.referenceCount,r.referenceCount===0&&(delete uA[o],c(i)&&--i.referenceCount)),c(i)&&i.referenceCount===0&&delete uA[n]};dA.getCache=function(){return uA};dA.clearCache=function(){uA={}};function Cd(e,t,n){n?e.enable(t):e.disable(t)}function UP(e,t){e.frontFace(t.frontFace)}function GP(e,t){let n=t.cull,i=n.enabled;Cd(e,e.CULL_FACE,i),i&&e.cullFace(n.face)}function zP(e,t){e.lineWidth(t.lineWidth)}function HP(e,t){let n=t.polygonOffset,i=n.enabled;Cd(e,e.POLYGON_OFFSET_FILL,i),i&&e.polygonOffset(n.factor,n.units)}function VP(e,t,n){let i=t.scissorTest,o=c(n.scissorTest)?n.scissorTest.enabled:i.enabled;if(Cd(e,e.SCISSOR_TEST,o),o){let r=c(n.scissorTest)?n.scissorTest.rectangle:i.rectangle;e.scissor(r.x,r.y,r.width,r.height)}}function jP(e,t){let n=t.depthRange;e.depthRange(n.near,n.far)}function YP(e,t){let n=t.depthTest,i=n.enabled;Cd(e,e.DEPTH_TEST,i),i&&e.depthFunc(n.func)}function qP(e,t){let n=t.colorMask;e.colorMask(n.red,n.green,n.blue,n.alpha)}function WP(e,t){e.depthMask(t.depthMask)}function JP(e,t){e.stencilMask(t.stencilMask)}function aZ(e,t){e.blendColor(t.red,t.green,t.blue,t.alpha)}function KP(e,t,n){let i=t.blending,o=c(n.blendingEnabled)?n.blendingEnabled:i.enabled;Cd(e,e.BLEND,o),o&&(aZ(e,i.color),e.blendEquationSeparate(i.equationRgb,i.equationAlpha),e.blendFuncSeparate(i.functionSourceRgb,i.functionDestinationRgb,i.functionSourceAlpha,i.functionDestinationAlpha))}function XP(e,t){let n=t.stencilTest,i=n.enabled;if(Cd(e,e.STENCIL_TEST,i),i){let o=n.frontFunction,r=n.backFunction,a=n.reference,s=n.mask;e.stencilFunc(o,a,s),e.stencilFuncSeparate(e.BACK,r,a,s),e.stencilFuncSeparate(e.FRONT,o,a,s);let A=n.frontOperation,l=A.fail,f=A.zFail,h=A.zPass;e.stencilOpSeparate(e.FRONT,l,f,h);let m=n.backOperation,p=m.fail,g=m.zFail,C=m.zPass;e.stencilOpSeparate(e.BACK,p,g,C)}}function ZP(e,t){let n=t.sampleCoverage,i=n.enabled;Cd(e,e.SAMPLE_COVERAGE,i),i&&e.sampleCoverage(n.value,n.invert)}var sZ=new Jt;function $P(e,t,n){let i=t.viewport??n.viewport;c(i)||(i=sZ,i.width=n.context.drawingBufferWidth,i.height=n.context.drawingBufferHeight),n.context.uniformState.viewport=i,e.viewport(i.x,i.y,i.width,i.height)}dA.apply=function(e,t,n){UP(e,t),GP(e,t),zP(e,t),HP(e,t),jP(e,t),YP(e,t),qP(e,t),WP(e,t),JP(e,t),XP(e,t),ZP(e,t),VP(e,t,n),KP(e,t,n),$P(e,t,n)};function cZ(e,t){let n=[];return e.frontFace!==t.frontFace&&n.push(UP),(e.cull.enabled!==t.cull.enabled||e.cull.face!==t.cull.face)&&n.push(GP),e.lineWidth!==t.lineWidth&&n.push(zP),(e.polygonOffset.enabled!==t.polygonOffset.enabled||e.polygonOffset.factor!==t.polygonOffset.factor||e.polygonOffset.units!==t.polygonOffset.units)&&n.push(HP),(e.depthRange.near!==t.depthRange.near||e.depthRange.far!==t.depthRange.far)&&n.push(jP),(e.depthTest.enabled!==t.depthTest.enabled||e.depthTest.func!==t.depthTest.func)&&n.push(YP),(e.colorMask.red!==t.colorMask.red||e.colorMask.green!==t.colorMask.green||e.colorMask.blue!==t.colorMask.blue||e.colorMask.alpha!==t.colorMask.alpha)&&n.push(qP),e.depthMask!==t.depthMask&&n.push(WP),e.stencilMask!==t.stencilMask&&n.push(JP),(e.stencilTest.enabled!==t.stencilTest.enabled||e.stencilTest.frontFunction!==t.stencilTest.frontFunction||e.stencilTest.backFunction!==t.stencilTest.backFunction||e.stencilTest.reference!==t.stencilTest.reference||e.stencilTest.mask!==t.stencilTest.mask||e.stencilTest.frontOperation.fail!==t.stencilTest.frontOperation.fail||e.stencilTest.frontOperation.zFail!==t.stencilTest.frontOperation.zFail||e.stencilTest.backOperation.fail!==t.stencilTest.backOperation.fail||e.stencilTest.backOperation.zFail!==t.stencilTest.backOperation.zFail||e.stencilTest.backOperation.zPass!==t.stencilTest.backOperation.zPass)&&n.push(XP),(e.sampleCoverage.enabled!==t.sampleCoverage.enabled||e.sampleCoverage.value!==t.sampleCoverage.value||e.sampleCoverage.invert!==t.sampleCoverage.invert)&&n.push(ZP),n}dA.partialApply=function(e,t,n,i,o,r){if(t!==n){let f=n._applyFunctions[t.id];c(f)||(f=cZ(t,n),n._applyFunctions[t.id]=f);let h=f.length;for(let m=0;m<h;++m)f[m](e,n)}let a=c(i.scissorTest)?i.scissorTest:t.scissorTest,s=c(o.scissorTest)?o.scissorTest:n.scissorTest;(a!==s||r)&&VP(e,n,o);let A=c(i.blendingEnabled)?i.blendingEnabled:t.blending.enabled,l=c(o.blendingEnabled)?o.blendingEnabled:n.blending.enabled;(A!==l||l&&t.blending!==n.blending)&&KP(e,n,o),(t!==n||i!==o||i.context!==o.context)&&$P(e,n,o)};dA.getState=function(e){return{frontFace:e.frontFace,cull:{enabled:e.cull.enabled,face:e.cull.face},lineWidth:e.lineWidth,polygonOffset:{enabled:e.polygonOffset.enabled,factor:e.polygonOffset.factor,units:e.polygonOffset.units},scissorTest:{enabled:e.scissorTest.enabled,rectangle:Jt.clone(e.scissorTest.rectangle)},depthRange:{near:e.depthRange.near,far:e.depthRange.far},depthTest:{enabled:e.depthTest.enabled,func:e.depthTest.func},colorMask:{red:e.colorMask.red,green:e.colorMask.green,blue:e.colorMask.blue,alpha:e.colorMask.alpha},depthMask:e.depthMask,stencilMask:e.stencilMask,blending:{enabled:e.blending.enabled,color:F.clone(e.blending.color),equationRgb:e.blending.equationRgb,equationAlpha:e.blending.equationAlpha,functionSourceRgb:e.blending.functionSourceRgb,functionSourceAlpha:e.blending.functionSourceAlpha,functionDestinationRgb:e.blending.functionDestinationRgb,functionDestinationAlpha:e.blending.functionDestinationAlpha},stencilTest:{enabled:e.stencilTest.enabled,frontFunction:e.stencilTest.frontFunction,backFunction:e.stencilTest.backFunction,reference:e.stencilTest.reference,mask:e.stencilTest.mask,frontOperation:{fail:e.stencilTest.frontOperation.fail,zFail:e.stencilTest.frontOperation.zFail,zPass:e.stencilTest.frontOperation.zPass},backOperation:{fail:e.stencilTest.backOperation.fail,zFail:e.stencilTest.backOperation.zFail,zPass:e.stencilTest.backOperation.zPass}},sampleCoverage:{enabled:e.sampleCoverage.enabled,value:e.sampleCoverage.value,invert:e.sampleCoverage.invert},viewport:c(e.viewport)?Jt.clone(e.viewport):void 0}};var ut=dA;function pt(e,t,n,i){this[0]=e??0,this[1]=n??0,this[2]=t??0,this[3]=i??0}pt.packedLength=4;pt.pack=function(e,t,n){return n=n??0,t[n++]=e[0],t[n++]=e[1],t[n++]=e[2],t[n++]=e[3],t};pt.unpack=function(e,t,n){return t=t??0,c(n)||(n=new pt),n[0]=e[t++],n[1]=e[t++],n[2]=e[t++],n[3]=e[t++],n};pt.packArray=function(e,t){let n=e.length,i=n*4;c(t)?!Array.isArray(t)&&t.length!==i||t.length!==i&&(t.length=i):t=new Array(i);for(let o=0;o<n;++o)pt.pack(e[o],t,o*4);return t};pt.unpackArray=function(e,t){let n=e.length;c(t)?t.length=n/4:t=new Array(n/4);for(let i=0;i<n;i+=4){let o=i/4;t[o]=pt.unpack(e,i,t[o])}return t};pt.clone=function(e,t){if(c(e))return c(t)?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t):new pt(e[0],e[2],e[1],e[3])};pt.fromArray=pt.unpack;pt.fromColumnMajorArray=function(e,t){return pt.clone(e,t)};pt.fromRowMajorArray=function(e,t){return c(t)?(t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3],t):new pt(e[0],e[1],e[2],e[3])};pt.fromScale=function(e,t){return c(t)?(t[0]=e.x,t[1]=0,t[2]=0,t[3]=e.y,t):new pt(e.x,0,0,e.y)};pt.fromUniformScale=function(e,t){return c(t)?(t[0]=e,t[1]=0,t[2]=0,t[3]=e,t):new pt(e,0,0,e)};pt.fromRotation=function(e,t){let n=Math.cos(e),i=Math.sin(e);return c(t)?(t[0]=n,t[1]=i,t[2]=-i,t[3]=n,t):new pt(n,-i,i,n)};pt.toArray=function(e,t){return c(t)?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t):[e[0],e[1],e[2],e[3]]};pt.getElementIndex=function(e,t){return e*2+t};pt.getColumn=function(e,t,n){let i=t*2,o=e[i],r=e[i+1];return n.x=o,n.y=r,n};pt.setColumn=function(e,t,n,i){i=pt.clone(e,i);let o=t*2;return i[o]=n.x,i[o+1]=n.y,i};pt.getRow=function(e,t,n){let i=e[t],o=e[t+2];return n.x=i,n.y=o,n};pt.setRow=function(e,t,n,i){return i=pt.clone(e,i),i[t]=n.x,i[t+2]=n.y,i};var AZ=new U;pt.setScale=function(e,t,n){let i=pt.getScale(e,AZ),o=t.x/i.x,r=t.y/i.y;return n[0]=e[0]*o,n[1]=e[1]*o,n[2]=e[2]*r,n[3]=e[3]*r,n};var lZ=new U;pt.setUniformScale=function(e,t,n){let i=pt.getScale(e,lZ),o=t/i.x,r=t/i.y;return n[0]=e[0]*o,n[1]=e[1]*o,n[2]=e[2]*r,n[3]=e[3]*r,n};var eM=new U;pt.getScale=function(e,t){return t.x=U.magnitude(U.fromElements(e[0],e[1],eM)),t.y=U.magnitude(U.fromElements(e[2],e[3],eM)),t};var tM=new U;pt.getMaximumScale=function(e){return pt.getScale(e,tM),U.maximumComponent(tM)};var fZ=new U;pt.setRotation=function(e,t,n){let i=pt.getScale(e,fZ);return n[0]=t[0]*i.x,n[1]=t[1]*i.x,n[2]=t[2]*i.y,n[3]=t[3]*i.y,n};var uZ=new U;pt.getRotation=function(e,t){let n=pt.getScale(e,uZ);return t[0]=e[0]/n.x,t[1]=e[1]/n.x,t[2]=e[2]/n.y,t[3]=e[3]/n.y,t};pt.multiply=function(e,t,n){let i=e[0]*t[0]+e[2]*t[1],o=e[0]*t[2]+e[2]*t[3],r=e[1]*t[0]+e[3]*t[1],a=e[1]*t[2]+e[3]*t[3];return n[0]=i,n[1]=r,n[2]=o,n[3]=a,n};pt.add=function(e,t,n){return n[0]=e[0]+t[0],n[1]=e[1]+t[1],n[2]=e[2]+t[2],n[3]=e[3]+t[3],n};pt.subtract=function(e,t,n){return n[0]=e[0]-t[0],n[1]=e[1]-t[1],n[2]=e[2]-t[2],n[3]=e[3]-t[3],n};pt.multiplyByVector=function(e,t,n){let i=e[0]*t.x+e[2]*t.y,o=e[1]*t.x+e[3]*t.y;return n.x=i,n.y=o,n};pt.multiplyByScalar=function(e,t,n){return n[0]=e[0]*t,n[1]=e[1]*t,n[2]=e[2]*t,n[3]=e[3]*t,n};pt.multiplyByScale=function(e,t,n){return n[0]=e[0]*t.x,n[1]=e[1]*t.x,n[2]=e[2]*t.y,n[3]=e[3]*t.y,n};pt.multiplyByUniformScale=function(e,t,n){return n[0]=e[0]*t,n[1]=e[1]*t,n[2]=e[2]*t,n[3]=e[3]*t,n};pt.negate=function(e,t){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t};pt.transpose=function(e,t){let n=e[0],i=e[2],o=e[1],r=e[3];return t[0]=n,t[1]=i,t[2]=o,t[3]=r,t};pt.abs=function(e,t){return t[0]=Math.abs(e[0]),t[1]=Math.abs(e[1]),t[2]=Math.abs(e[2]),t[3]=Math.abs(e[3]),t};pt.equals=function(e,t){return e===t||c(e)&&c(t)&&e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]};pt.equalsArray=function(e,t,n){return e[0]===t[n]&&e[1]===t[n+1]&&e[2]===t[n+2]&&e[3]===t[n+3]};pt.equalsEpsilon=function(e,t,n){return n=n??0,e===t||c(e)&&c(t)&&Math.abs(e[0]-t[0])<=n&&Math.abs(e[1]-t[1])<=n&&Math.abs(e[2]-t[2])<=n&&Math.abs(e[3]-t[3])<=n};pt.IDENTITY=Object.freeze(new pt(1,0,0,1));pt.ZERO=Object.freeze(new pt(0,0,0,0));pt.COLUMN0ROW0=0;pt.COLUMN0ROW1=1;pt.COLUMN1ROW0=2;pt.COLUMN1ROW1=3;Object.defineProperties(pt.prototype,{length:{get:function(){return pt.packedLength}}});pt.prototype.clone=function(e){return pt.clone(this,e)};pt.prototype.equals=function(e){return pt.equals(this,e)};pt.prototype.equalsEpsilon=function(e,t){return pt.equalsEpsilon(this,e,t)};pt.prototype.toString=function(){return`(${this[0]}, ${this[2]})
(${this[1]}, ${this[3]})`};var ai=pt;function dZ(e,t,n,i){switch(t.type){case e.FLOAT:return new nM(e,t,n,i);case e.FLOAT_VEC2:return new iM(e,t,n,i);case e.FLOAT_VEC3:return new oM(e,t,n,i);case e.FLOAT_VEC4:return new rM(e,t,n,i);case e.SAMPLER_2D:case e.SAMPLER_3D:case e.SAMPLER_CUBE:return new LI(e,t,n,i);case e.UNSIGNED_INT_SAMPLER_2D:return new LI(e,t,n,i);case e.INT:case e.BOOL:return new aM(e,t,n,i);case e.INT_VEC2:case e.BOOL_VEC2:return new sM(e,t,n,i);case e.INT_VEC3:case e.BOOL_VEC3:return new cM(e,t,n,i);case e.INT_VEC4:case e.BOOL_VEC4:return new AM(e,t,n,i);case e.FLOAT_MAT2:return new lM(e,t,n,i);case e.FLOAT_MAT3:return new fM(e,t,n,i);case e.FLOAT_MAT4:return new uM(e,t,n,i);default:throw new oe(`Unrecognized uniform type: ${t.type} for uniform "${n}".`)}}function nM(e,t,n,i){this.name=n,this.value=void 0,this._value=0,this._gl=e,this._location=i}nM.prototype.set=function(){this.value!==this._value&&(this._value=this.value,this._gl.uniform1f(this._location,this.value))};function iM(e,t,n,i){this.name=n,this.value=void 0,this._value=new U,this._gl=e,this._location=i}iM.prototype.set=function(){let e=this.value;U.equals(e,this._value)||(U.clone(e,this._value),this._gl.uniform2f(this._location,e.x,e.y))};function oM(e,t,n,i){this.name=n,this.value=void 0,this._value=void 0,this._gl=e,this._location=i}oM.prototype.set=function(){let e=this.value;c(e.red)?F.equals(e,this._value)||(this._value=F.clone(e,this._value),this._gl.uniform3f(this._location,e.red,e.green,e.blue)):c(e.x)&&(u.equals(e,this._value)||(this._value=u.clone(e,this._value),this._gl.uniform3f(this._location,e.x,e.y,e.z)))};function rM(e,t,n,i){this.name=n,this.value=void 0,this._value=void 0,this._gl=e,this._location=i}rM.prototype.set=function(){let e=this.value;c(e.red)?F.equals(e,this._value)||(this._value=F.clone(e,this._value),this._gl.uniform4f(this._location,e.red,e.green,e.blue,e.alpha)):c(e.x)&&(se.equals(e,this._value)||(this._value=se.clone(e,this._value),this._gl.uniform4f(this._location,e.x,e.y,e.z,e.w)))};function LI(e,t,n,i){this.name=n,this.value=void 0,this._gl=e,this._location=i,this.textureUnitIndex=void 0}LI.prototype.set=function(){let e=this._gl;e.activeTexture(e.TEXTURE0+this.textureUnitIndex);let t=this.value;e.bindTexture(t._target,t._texture)};LI.prototype._setSampler=function(e){return this.textureUnitIndex=e,this._gl.uniform1i(this._location,e),e+1};function aM(e,t,n,i){this.name=n,this.value=void 0,this._value=0,this._gl=e,this._location=i}aM.prototype.set=function(){this.value!==this._value&&(this._value=this.value,this._gl.uniform1i(this._location,this.value))};function sM(e,t,n,i){this.name=n,this.value=void 0,this._value=new U,this._gl=e,this._location=i}sM.prototype.set=function(){let e=this.value;U.equals(e,this._value)||(U.clone(e,this._value),this._gl.uniform2i(this._location,e.x,e.y))};function cM(e,t,n,i){this.name=n,this.value=void 0,this._value=new u,this._gl=e,this._location=i}cM.prototype.set=function(){let e=this.value;u.equals(e,this._value)||(u.clone(e,this._value),this._gl.uniform3i(this._location,e.x,e.y,e.z))};function AM(e,t,n,i){this.name=n,this.value=void 0,this._value=new se,this._gl=e,this._location=i}AM.prototype.set=function(){let e=this.value;se.equals(e,this._value)||(se.clone(e,this._value),this._gl.uniform4i(this._location,e.x,e.y,e.z,e.w))};var hZ=new Float32Array(4);function lM(e,t,n,i){this.name=n,this.value=void 0,this._value=new ai,this._gl=e,this._location=i}lM.prototype.set=function(){if(!ai.equalsArray(this.value,this._value,0)){ai.clone(this.value,this._value);let e=ai.toArray(this.value,hZ);this._gl.uniformMatrix2fv(this._location,!1,e)}};var mZ=new Float32Array(9);function fM(e,t,n,i){this.name=n,this.value=void 0,this._value=new J,this._gl=e,this._location=i}fM.prototype.set=function(){if(!J.equalsArray(this.value,this._value,0)){J.clone(this.value,this._value);let e=J.toArray(this.value,mZ);this._gl.uniformMatrix3fv(this._location,!1,e)}};var pZ=new Float32Array(16);function uM(e,t,n,i){this.name=n,this.value=void 0,this._value=new O,this._gl=e,this._location=i}uM.prototype.set=function(){if(!O.equalsArray(this.value,this._value,0)){O.clone(this.value,this._value);let e=O.toArray(this.value,pZ);this._gl.uniformMatrix4fv(this._location,!1,e)}};var dM=dZ;function gZ(e,t,n,i){switch(t.type){case e.FLOAT:return new hM(e,t,n,i);case e.FLOAT_VEC2:return new mM(e,t,n,i);case e.FLOAT_VEC3:return new pM(e,t,n,i);case e.FLOAT_VEC4:return new gM(e,t,n,i);case e.SAMPLER_2D:case e.SAMPLER_3D:case e.SAMPLER_CUBE:return new Yx(e,t,n,i);case e.INT:case e.BOOL:return new CM(e,t,n,i);case e.INT_VEC2:case e.BOOL_VEC2:return new _M(e,t,n,i);case e.INT_VEC3:case e.BOOL_VEC3:return new EM(e,t,n,i);case e.INT_VEC4:case e.BOOL_VEC4:return new IM(e,t,n,i);case e.FLOAT_MAT2:return new yM(e,t,n,i);case e.FLOAT_MAT3:return new bM(e,t,n,i);case e.FLOAT_MAT4:return new BM(e,t,n,i);default:throw new oe(`Unrecognized uniform type: ${t.type} for uniform "${n}".`)}}function hM(e,t,n,i){let o=i.length;this.name=n,this.value=new Array(o),this._value=new Float32Array(o),this._gl=e,this._location=i[0]}hM.prototype.set=function(){let e=this.value,t=e.length,n=this._value,i=!1;for(let o=0;o<t;++o){let r=e[o];r!==n[o]&&(n[o]=r,i=!0)}i&&this._gl.uniform1fv(this._location,n)};function mM(e,t,n,i){let o=i.length;this.name=n,this.value=new Array(o),this._value=new Float32Array(o*2),this._gl=e,this._location=i[0]}mM.prototype.set=function(){let e=this.value,t=e.length,n=this._value,i=!1,o=0;for(let r=0;r<t;++r){let a=e[r];U.equalsArray(a,n,o)||(U.pack(a,n,o),i=!0),o+=2}i&&this._gl.uniform2fv(this._location,n)};function pM(e,t,n,i){let o=i.length;this.name=n,this.value=new Array(o),this._value=new Float32Array(o*3),this._gl=e,this._location=i[0]}pM.prototype.set=function(){let e=this.value,t=e.length,n=this._value,i=!1,o=0;for(let r=0;r<t;++r){let a=e[r];c(a.red)?(a.red!==n[o]||a.green!==n[o+1]||a.blue!==n[o+2])&&(n[o]=a.red,n[o+1]=a.green,n[o+2]=a.blue,i=!0):c(a.x)&&(u.equalsArray(a,n,o)||(u.pack(a,n,o),i=!0)),o+=3}i&&this._gl.uniform3fv(this._location,n)};function gM(e,t,n,i){let o=i.length;this.name=n,this.value=new Array(o),this._value=new Float32Array(o*4),this._gl=e,this._location=i[0]}gM.prototype.set=function(){let e=this.value,t=e.length,n=this._value,i=!1,o=0;for(let r=0;r<t;++r){let a=e[r];c(a.red)?F.equalsArray(a,n,o)||(F.pack(a,n,o),i=!0):c(a.x)&&(se.equalsArray(a,n,o)||(se.pack(a,n,o),i=!0)),o+=4}i&&this._gl.uniform4fv(this._location,n)};function Yx(e,t,n,i){let o=i.length;this.name=n,this.value=new Array(o),this._value=new Float32Array(o),this._gl=e,this._locations=i,this.textureUnitIndex=void 0}Yx.prototype.set=function(){let e=this._gl,t=e.TEXTURE0+this.textureUnitIndex,n=this.value,i=n.length;for(let o=0;o<i;++o){let r=n[o];e.activeTexture(t+o),e.bindTexture(r._target,r._texture)}};Yx.prototype._setSampler=function(e){this.textureUnitIndex=e;let t=this._locations,n=t.length;for(let i=0;i<n;++i){let o=e+i;this._gl.uniform1i(t[i],o)}return e+n};function CM(e,t,n,i){let o=i.length;this.name=n,this.value=new Array(o),this._value=new Int32Array(o),this._gl=e,this._location=i[0]}CM.prototype.set=function(){let e=this.value,t=e.length,n=this._value,i=!1;for(let o=0;o<t;++o){let r=e[o];r!==n[o]&&(n[o]=r,i=!0)}i&&this._gl.uniform1iv(this._location,n)};function _M(e,t,n,i){let o=i.length;this.name=n,this.value=new Array(o),this._value=new Int32Array(o*2),this._gl=e,this._location=i[0]}_M.prototype.set=function(){let e=this.value,t=e.length,n=this._value,i=!1,o=0;for(let r=0;r<t;++r){let a=e[r];U.equalsArray(a,n,o)||(U.pack(a,n,o),i=!0),o+=2}i&&this._gl.uniform2iv(this._location,n)};function EM(e,t,n,i){let o=i.length;this.name=n,this.value=new Array(o),this._value=new Int32Array(o*3),this._gl=e,this._location=i[0]}EM.prototype.set=function(){let e=this.value,t=e.length,n=this._value,i=!1,o=0;for(let r=0;r<t;++r){let a=e[r];u.equalsArray(a,n,o)||(u.pack(a,n,o),i=!0),o+=3}i&&this._gl.uniform3iv(this._location,n)};function IM(e,t,n,i){let o=i.length;this.name=n,this.value=new Array(o),this._value=new Int32Array(o*4),this._gl=e,this._location=i[0]}IM.prototype.set=function(){let e=this.value,t=e.length,n=this._value,i=!1,o=0;for(let r=0;r<t;++r){let a=e[r];se.equalsArray(a,n,o)||(se.pack(a,n,o),i=!0),o+=4}i&&this._gl.uniform4iv(this._location,n)};function yM(e,t,n,i){let o=i.length;this.name=n,this.value=new Array(o),this._value=new Float32Array(o*4),this._gl=e,this._location=i[0]}yM.prototype.set=function(){let e=this.value,t=e.length,n=this._value,i=!1,o=0;for(let r=0;r<t;++r){let a=e[r];ai.equalsArray(a,n,o)||(ai.pack(a,n,o),i=!0),o+=4}i&&this._gl.uniformMatrix2fv(this._location,!1,n)};function bM(e,t,n,i){let o=i.length;this.name=n,this.value=new Array(o),this._value=new Float32Array(o*9),this._gl=e,this._location=i[0]}bM.prototype.set=function(){let e=this.value,t=e.length,n=this._value,i=!1,o=0;for(let r=0;r<t;++r){let a=e[r];J.equalsArray(a,n,o)||(J.pack(a,n,o),i=!0),o+=9}i&&this._gl.uniformMatrix3fv(this._location,!1,n)};function BM(e,t,n,i){let o=i.length;this.name=n,this.value=new Array(o),this._value=new Float32Array(o*16),this._gl=e,this._location=i[0]}BM.prototype.set=function(){let e=this.value,t=e.length,n=this._value,i=!1,o=0;for(let r=0;r<t;++r){let a=e[r];O.equalsArray(a,n,o)||(O.pack(a,n,o),i=!0),o+=16}i&&this._gl.uniformMatrix4fv(this._location,!1,n)};var xM=gZ;var CZ=0;function ll(e){let t=e.vertexShaderText,n=e.fragmentShaderText;typeof spector<"u"&&(t=t.replace(/^#line/gm,"//#line"),n=n.replace(/^#line/gm,"//#line"));let i=_Z(t,n);this._gl=e.gl,this._logShaderCompilation=e.logShaderCompilation,this._debugShaders=e.debugShaders,this._attributeLocations=e.attributeLocations,this._program=void 0,this._numberOfVertexAttributes=void 0,this._vertexAttributes=void 0,this._uniformsByName=void 0,this._uniforms=void 0,this._automaticUniforms=void 0,this._manualUniforms=void 0,this._duplicateUniformNames=i.duplicateUniformNames,this._cachedShader=void 0,this.maximumTextureUnitIndex=void 0,this._vertexShaderSource=e.vertexShaderSource,this._vertexShaderText=e.vertexShaderText,this._fragmentShaderSource=e.fragmentShaderSource,this._fragmentShaderText=i.fragmentShaderText,this.id=CZ++}ll.fromCache=function(e){return e=e??k.EMPTY_OBJECT,e.context.shaderCache.getShaderProgram(e)};ll.replaceCache=function(e){return e=e??k.EMPTY_OBJECT,e.context.shaderCache.replaceShaderProgram(e)};Object.defineProperties(ll.prototype,{vertexShaderSource:{get:function(){return this._vertexShaderSource}},fragmentShaderSource:{get:function(){return this._fragmentShaderSource}},vertexAttributes:{get:function(){return NI(this),this._vertexAttributes}},numberOfVertexAttributes:{get:function(){return NI(this),this._numberOfVertexAttributes}},allUniforms:{get:function(){return NI(this),this._uniformsByName}}});function TM(e){let t=[],n=e.match(/uniform.*?(?![^{]*})(?=[=\[;])/g);if(c(n)){let i=n.length;for(let o=0;o<i;o++){let r=n[o].trim(),a=r.slice(r.lastIndexOf(" ")+1);t.push(a)}}return t}function _Z(e,t){let n={};if(!pn.highpFloatSupported||!pn.highpIntSupported){let i,o,r,a,s=TM(e),A=TM(t),l=s.length,f=A.length;for(i=0;i<l;i++)for(o=0;o<f;o++)if(s[i]===A[o]){r=s[i],a=`czm_mediump_${r}`;let h=new RegExp(`${r}\\b`,"g");t=t.replace(h,a),n[a]=r}}return{fragmentShaderText:t,duplicateUniformNames:n}}var hA="[Cesium WebGL] ";function EZ(e,t){let n=t._vertexShaderText,i=t._fragmentShaderText,o=e.createShader(e.VERTEX_SHADER);e.shaderSource(o,n),e.compileShader(o);let r=e.createShader(e.FRAGMENT_SHADER);e.shaderSource(r,i),e.compileShader(r);let a=e.createProgram();e.attachShader(a,o),e.attachShader(a,r);let s=t._attributeLocations;if(c(s))for(let m in s)s.hasOwnProperty(m)&&e.bindAttribLocation(a,s[m],m);e.linkProgram(a);let A;if(e.getProgramParameter(a,e.LINK_STATUS))return t._logShaderCompilation&&(A=e.getShaderInfoLog(o),c(A)&&A.length>0&&console.log(`${hA}Vertex shader compile log: ${A}`),A=e.getShaderInfoLog(r),c(A)&&A.length>0&&console.log(`${hA}Fragment shader compile log: ${A}`),A=e.getProgramInfoLog(a),c(A)&&A.length>0&&console.log(`${hA}Shader program link log: ${A}`)),e.deleteShader(o),e.deleteShader(r),a;let l,f=t._debugShaders;throw e.getShaderParameter(r,e.COMPILE_STATUS)?e.getShaderParameter(o,e.COMPILE_STATUS)?(A=e.getProgramInfoLog(a),console.error(`${hA}Shader program link log: ${A}`),h(o,"vertex"),h(r,"fragment"),l=`Program failed to link.  Link log: ${A}`):(A=e.getShaderInfoLog(o),console.error(`${hA}Vertex shader compile log: ${A}`),console.error(`${hA} Vertex shader source:
${n}`),l=`Vertex shader failed to compile.  Compile log: ${A}`):(A=e.getShaderInfoLog(r),console.error(`${hA}Fragment shader compile log: ${A}`),console.error(`${hA} Fragment shader source:
${i}`),l=`Fragment shader failed to compile.  Compile log: ${A}`),e.deleteShader(o),e.deleteShader(r),e.deleteProgram(a),new oe(l);function h(m,p){if(!c(f))return;let g=f.getTranslatedShaderSource(m);if(g===""){console.error(`${hA}${p} shader translation failed.`);return}console.error(`${hA}Translated ${p} shaderSource:
${g}`)}}function IZ(e,t,n){let i={};for(let o=0;o<n;++o){let r=e.getActiveAttrib(t,o),a=e.getAttribLocation(t,r.name);i[r.name]={name:r.name,type:r.type,index:a}}return i}function yZ(e,t){let n={},i=[],o=[],r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let a=0;a<r;++a){let s=e.getActiveUniform(t,a),A="[0]",l=s.name.indexOf(A,s.name.length-A.length)!==-1?s.name.slice(0,s.name.length-3):s.name;if(l.indexOf("gl_")!==0)if(s.name.indexOf("[")<0){let f=e.getUniformLocation(t,l);if(f!==null){let h=dM(e,s,l,f);n[l]=h,i.push(h),h._setSampler&&o.push(h)}}else{let f,h,m,p,g=l.indexOf("[");if(g>=0){if(f=n[l.slice(0,g)],!c(f))continue;h=f._locations,h.length<=1&&(m=f.value,p=e.getUniformLocation(t,l),p!==null&&(h.push(p),m.push(e.getUniform(t,p))))}else{h=[];for(let C=0;C<s.size;++C)p=e.getUniformLocation(t,`${l}[${C}]`),p!==null&&h.push(p);f=xM(e,s,l,h),n[l]=f,i.push(f),f._setSampler&&o.push(f)}}}return{uniformsByName:n,uniforms:i,samplerUniforms:o}}function bZ(e,t){let n=[],i=[];for(let o in t)if(t.hasOwnProperty(o)){let r=t[o],a=o,s=e._duplicateUniformNames[a];c(s)&&(r.name=s,a=s);let A=zh[a];c(A)?n.push({uniform:r,automaticUniform:A}):i.push(r)}return{automaticUniforms:n,manualUniforms:i}}function BZ(e,t,n){e.useProgram(t);let i=0,o=n.length;for(let r=0;r<o;++r)i=n[r]._setSampler(i);return e.useProgram(null),i}function NI(e){c(e._program)||SM(e)}function SM(e){let t=e._program,n=e._gl,i=EZ(n,e,e._debugShaders),o=n.getProgramParameter(i,n.ACTIVE_ATTRIBUTES),r=yZ(n,i),a=bZ(e,r.uniformsByName);e._program=i,e._numberOfVertexAttributes=o,e._vertexAttributes=IZ(n,i,o),e._uniformsByName=r.uniformsByName,e._uniforms=r.uniforms,e._automaticUniforms=a.automaticUniforms,e._manualUniforms=a.manualUniforms,e.maximumTextureUnitIndex=BZ(n,i,r.samplerUniforms),t&&e._gl.deleteProgram(t),typeof spector<"u"&&(e._program.__SPECTOR_rebuildProgram=function(s,A,l,f){let h=e._vertexShaderText,m=e._fragmentShaderText,p=/ ! = /g;e._vertexShaderText=s.replace(p," != "),e._fragmentShaderText=A.replace(p," != ");try{SM(e),l(e._program)}catch(g){e._vertexShaderText=h,e._fragmentShaderText=m;let _=/(?:Compile|Link) error: ([^]*)/.exec(g.message);f(_?_[1]:g.message)}})}ll.prototype._bind=function(){NI(this),this._gl.useProgram(this._program)};ll.prototype._setUniforms=function(e,t,n){let i,o;if(c(e)){let s=this._manualUniforms;for(i=s.length,o=0;o<i;++o){let A=s[o];A.value=e[A.name]()}}let r=this._automaticUniforms;for(i=r.length,o=0;o<i;++o){let s=r[o];s.uniform.value=s.automaticUniform.getValue(t)}let a=this._uniforms;for(i=a.length,o=0;o<i;++o)a[o].set();if(n){let s=this._gl,A=this._program;s.validateProgram(A)}};ll.prototype.isDestroyed=function(){return!1};ll.prototype.destroy=function(){this._cachedShader.cache.releaseShaderProgram(this)};ll.prototype.finalDestroy=function(){return this._gl.deleteProgram(this._program),pe(this)};var Bn=ll;var Nt={BYTE:V.BYTE,UNSIGNED_BYTE:V.UNSIGNED_BYTE,SHORT:V.SHORT,UNSIGNED_SHORT:V.UNSIGNED_SHORT,INT:V.INT,UNSIGNED_INT:V.UNSIGNED_INT,FLOAT:V.FLOAT,DOUBLE:V.DOUBLE};Nt.getSizeInBytes=function(e){switch(e){case Nt.BYTE:return Int8Array.BYTES_PER_ELEMENT;case Nt.UNSIGNED_BYTE:return Uint8Array.BYTES_PER_ELEMENT;case Nt.SHORT:return Int16Array.BYTES_PER_ELEMENT;case Nt.UNSIGNED_SHORT:return Uint16Array.BYTES_PER_ELEMENT;case Nt.INT:return Int32Array.BYTES_PER_ELEMENT;case Nt.UNSIGNED_INT:return Uint32Array.BYTES_PER_ELEMENT;case Nt.FLOAT:return Float32Array.BYTES_PER_ELEMENT;case Nt.DOUBLE:return Float64Array.BYTES_PER_ELEMENT}};Nt.fromTypedArray=function(e){if(e instanceof Int8Array)return Nt.BYTE;if(e instanceof Uint8Array)return Nt.UNSIGNED_BYTE;if(e instanceof Int16Array)return Nt.SHORT;if(e instanceof Uint16Array)return Nt.UNSIGNED_SHORT;if(e instanceof Int32Array)return Nt.INT;if(e instanceof Uint32Array)return Nt.UNSIGNED_INT;if(e instanceof Float32Array)return Nt.FLOAT;if(e instanceof Float64Array)return Nt.DOUBLE};Nt.validate=function(e){return c(e)&&(e===Nt.BYTE||e===Nt.UNSIGNED_BYTE||e===Nt.SHORT||e===Nt.UNSIGNED_SHORT||e===Nt.INT||e===Nt.UNSIGNED_INT||e===Nt.FLOAT||e===Nt.DOUBLE)};Nt.createTypedArray=function(e,t){switch(e){case Nt.BYTE:return new Int8Array(t);case Nt.UNSIGNED_BYTE:return new Uint8Array(t);case Nt.SHORT:return new Int16Array(t);case Nt.UNSIGNED_SHORT:return new Uint16Array(t);case Nt.INT:return new Int32Array(t);case Nt.UNSIGNED_INT:return new Uint32Array(t);case Nt.FLOAT:return new Float32Array(t);case Nt.DOUBLE:return new Float64Array(t)}};Nt.createArrayBufferView=function(e,t,n,i){switch(n=n??0,i=i??(t.byteLength-n)/Nt.getSizeInBytes(e),e){case Nt.BYTE:return new Int8Array(t,n,i);case Nt.UNSIGNED_BYTE:return new Uint8Array(t,n,i);case Nt.SHORT:return new Int16Array(t,n,i);case Nt.UNSIGNED_SHORT:return new Uint16Array(t,n,i);case Nt.INT:return new Int32Array(t,n,i);case Nt.UNSIGNED_INT:return new Uint32Array(t,n,i);case Nt.FLOAT:return new Float32Array(t,n,i);case Nt.DOUBLE:return new Float64Array(t,n,i)}};Nt.fromName=function(e){switch(e){case"BYTE":return Nt.BYTE;case"UNSIGNED_BYTE":return Nt.UNSIGNED_BYTE;case"SHORT":return Nt.SHORT;case"UNSIGNED_SHORT":return Nt.UNSIGNED_SHORT;case"INT":return Nt.INT;case"UNSIGNED_INT":return Nt.UNSIGNED_INT;case"FLOAT":return Nt.FLOAT;case"DOUBLE":return Nt.DOUBLE}};var N=Object.freeze(Nt);var xZ={NONE:0,TRIANGLES:1,LINES:2,POLYLINES:3},fl=Object.freeze(xZ);function qx(e){e=e??k.EMPTY_OBJECT,this.attributes=e.attributes,this.indices=e.indices,this.primitiveType=e.primitiveType??Ce.TRIANGLES,this.boundingSphere=e.boundingSphere,this.geometryType=e.geometryType??fl.NONE,this.boundingSphereCV=e.boundingSphereCV,this.offsetAttribute=e.offsetAttribute}qx.computeNumberOfVertices=function(e){let t=-1;for(let n in e.attributes)if(e.attributes.hasOwnProperty(n)&&c(e.attributes[n])&&c(e.attributes[n].values)){let i=e.attributes[n];t=i.values.length/i.componentsPerAttribute}return t};var TZ=new ae,SZ=new u,wM=new O,wZ=[new ae,new ae,new ae],DZ=[new U,new U,new U],QZ=[new U,new U,new U],RZ=new u,vZ=new qe,PZ=new O,MZ=new ai;qx._textureCoordinateRotationPoints=function(e,t,n,i){let o,r=ce.center(i,TZ),a=ae.toCartesian(r,n,SZ),s=Rn.eastNorthUpToFixedFrame(a,n,wM),A=O.inverse(s,wM),l=DZ,f=wZ;f[0].longitude=i.west,f[0].latitude=i.south,f[1].longitude=i.west,f[1].latitude=i.north,f[2].longitude=i.east,f[2].latitude=i.south;let h=RZ;for(o=0;o<3;o++)ae.toCartesian(f[o],n,h),h=O.multiplyByPointAsVector(A,h,h),l[o].x=h.x,l[o].y=h.y;let m=qe.fromAxisAngle(u.UNIT_Z,-t,vZ),p=J.fromQuaternion(m,PZ),g=e.length,C=Number.POSITIVE_INFINITY,_=Number.POSITIVE_INFINITY,E=Number.NEGATIVE_INFINITY,I=Number.NEGATIVE_INFINITY;for(o=0;o<g;o++)h=O.multiplyByPointAsVector(A,e[o],h),h=J.multiplyByVector(p,h,h),C=Math.min(C,h.x),_=Math.min(_,h.y),E=Math.max(E,h.x),I=Math.max(I,h.y);let y=ai.fromRotation(t,MZ),b=QZ;b[0].x=C,b[0].y=_,b[1].x=C,b[1].y=I,b[2].x=E,b[2].y=_;let x=l[0],S=l[2].x-x.x,P=l[1].y-x.y;for(o=0;o<3;o++){let B=b[o];ai.multiplyByVector(y,B,B),B.x=(B.x-x.x)/S,B.y=(B.y-x.y)/P}let D=b[0],Q=b[1],v=b[2],d=new Array(6);return U.pack(D,d),U.pack(Q,d,2),U.pack(v,d,4),d};var ze=qx;function OZ(e){e=e??k.EMPTY_OBJECT,this.componentDatatype=e.componentDatatype,this.componentsPerAttribute=e.componentsPerAttribute,this.normalize=e.normalize??!1,this.values=e.values}var ue=OZ;function tm(e,t,n,i,o){this._format=e,this._datatype=t,this._width=n,this._height=i,this._buffer=o}Object.defineProperties(tm.prototype,{internalFormat:{get:function(){return this._format}},pixelDatatype:{get:function(){return this._datatype}},width:{get:function(){return this._width}},height:{get:function(){return this._height}},bufferView:{get:function(){return this._buffer}},arrayBufferView:{get:function(){return this._buffer}}});tm.clone=function(e){if(c(e))return new tm(e._format,e._datatype,e._width,e._height,e._buffer)};tm.prototype.clone=function(){return tm.clone(this)};var DM=tm;var QM=qr(pc(),1);function RM(){if(!c(Ko._canTransferArrayBuffer)){let e=Kx("transferTypedArrayTest");e.postMessage=e.webkitPostMessage??e.postMessage;let t=99,n=new Int8Array([t]);try{e.postMessage({array:n},[n.buffer])}catch{return Ko._canTransferArrayBuffer=!1,Ko._canTransferArrayBuffer}Ko._canTransferArrayBuffer=new Promise(i=>{e.onmessage=function(o){let r=o.data.array,a=c(r)&&r[0]===t;i(a),e.terminate(),Ko._canTransferArrayBuffer=a}})}return Ko._canTransferArrayBuffer}var Jx=new fe;function Wx(e){let t;try{t=new Blob([e],{type:"application/javascript"})}catch{let o=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,r=new o;r.append(e),t=r.getBlob("application/javascript")}return(window.URL||window.webkitURL).createObjectURL(t)}function Kx(e){let t=new QM.default(e),n=t.scheme().length!==0&&t.fragment().length===0,i=e.replace(/\.js$/,""),o={},r,a;if(Pg(e))a=e;else if(!n){let s=ho(`${Ko._workerModulePrefix}/${i}.js`);Pg(s)&&(a=s)}if(a){let s=`import "${a}";`;return r=Wx(s),o.type="module",new Worker(r,o)}if(!n&&typeof CESIUM_WORKERS<"u"){let s=`
      importScripts("${Wx(CESIUM_WORKERS)}");
      CesiumWorkers["${i}"]();
    `;return r=Wx(s),new Worker(r,o)}if(r=e,n||(r=ho(`${Ko._workerModulePrefix+i}.js`)),!$t.supportsEsmWebWorkers())throw new oe("This browser is not supported. Please update your browser to continue.");return o.type="module",new Worker(r,o)}async function LZ(e,t){let n={modulePath:void 0,wasmBinaryFile:void 0,wasmBinary:void 0};if(!$t.supportsWebAssembly()){if(!c(t.fallbackModulePath))throw new oe(`This browser does not support Web Assembly, and no backup module was provided for ${e._workerPath}`);return n.modulePath=ho(t.fallbackModulePath),n}n.wasmBinaryFile=ho(t.wasmBinaryFile);let i=await ke.fetchArrayBuffer({url:n.wasmBinaryFile});return n.wasmBinary=i,n}function Ko(e,t){this._workerPath=e,this._maximumActiveTasks=t??Number.POSITIVE_INFINITY,this._activeTasks=0,this._nextID=0,this._webAssemblyPromise=void 0}var NZ=(e,t,n,i)=>{let o=({data:r})=>{if(r.id===t){if(c(r.error)){let a=r.error;a.name==="RuntimeError"?(a=new oe(r.error.message),a.stack=r.error.stack):a.name==="DeveloperError"?(a=new Ee(r.error.message),a.stack=r.error.stack):a.name==="Error"&&(a=new Error(r.error.message),a.stack=r.error.stack),Jx.raiseEvent(a),i(a)}else Jx.raiseEvent(),n(r.result);e.removeEventListener("message",o)}};return o},FZ=[];async function kZ(e,t,n){let i=await Promise.resolve(RM());c(n)?i||(n.length=0):n=FZ;let o=e._nextID++,r=new Promise((a,s)=>{e._worker.addEventListener("message",NZ(e._worker,o,a,s))});return e._worker.postMessage({id:o,baseUrl:ho.getCesiumBaseUrl().url,parameters:t,canTransferArrayBuffer:i},n),r}async function UZ(e,t,n){++e._activeTasks;try{let i=await kZ(e,t,n);return--e._activeTasks,i}catch(i){throw--e._activeTasks,i}}Ko.prototype.scheduleTask=function(e,t){if(c(this._worker)||(this._worker=Kx(this._workerPath)),!(this._activeTasks>=this._maximumActiveTasks))return UZ(this,e,t)};Ko.prototype.initWebAssemblyModule=async function(e){if(c(this._webAssemblyPromise))return this._webAssemblyPromise;let t=async()=>{let n=this._worker=Kx(this._workerPath),i=await LZ(this,e),o=await Promise.resolve(RM()),r,a=i.wasmBinary;c(a)&&o&&(r=[a]);let s=new Promise((A,l)=>{n.onmessage=function({data:f}){c(f)?A(f.result):l(new oe("Could not configure wasm module"))}});return n.postMessage({canTransferArrayBuffer:o,parameters:{webAssemblyConfig:i}},r),s};return this._webAssemblyPromise=t(),this._webAssemblyPromise};Ko.prototype.isDestroyed=function(){return!1};Ko.prototype.destroy=function(){return c(this._worker)&&this._worker.terminate(),pe(this)};Ko.taskCompletedEvent=Jx;Ko._defaultWorkerModulePrefix="Workers/";Ko._workerModulePrefix=Ko._defaultWorkerModulePrefix;Ko._canTransferArrayBuffer=void 0;var mo=Ko;function ul(){}ul._transcodeTaskProcessor=new mo("transcodeKTX2",Number.POSITIVE_INFINITY);ul._readyPromise=void 0;function GZ(){let e=ul._transcodeTaskProcessor.initWebAssemblyModule({wasmBinaryFile:"ThirdParty/basis_transcoder.wasm"}).then(function(t){if(t)return ul._transcodeTaskProcessor;throw new oe("KTX2 transcoder could not be initialized.")});ul._readyPromise=e}ul.transcode=function(e,t){return c(ul._readyPromise)||GZ(),ul._readyPromise.then(function(n){let i=e;e instanceof ArrayBuffer&&(i=new Uint8Array(e));let o={supportedTargetFormats:t,ktx2Buffer:i};return n.scheduleTask(o,[i.buffer])}).then(function(n){let i=n.length,o=Object.keys(n[0]);for(let r=0;r<i;r++){let a=n[r];for(let s=0;s<o.length;s++){let A=a[o[s]];a[o[s]]=new DM(A.internalFormat,A.datatype,A.width,A.height,A.levelBuffer)}}if(o.length===1){for(let r=0;r<i;++r)n[r]=n[r][o[0]];i===1&&(n=n[0])}return n}).catch(function(n){throw n})};var vM=ul;var PM;MM.setKTX2SupportedFormats=function(e,t,n,i,o,r){PM={s3tc:e,pvrtc:t,astc:n,etc:i,etc1:o,bc7:r}};function MM(e){let t;return e instanceof ArrayBuffer||ArrayBuffer.isView(e)?t=Promise.resolve(e):t=ke.createIfNeeded(e).fetchArrayBuffer(),t.then(function(n){return vM.transcode(n,PM)})}var dl=MM;function zZ(e,t){this.start=e??0,this.stop=t??0}var Ss=zZ;function Dt(e,t){this.center=u.clone(e??u.ZERO),this.radius=t??0}var $x=new u,eT=new u,tT=new u,nT=new u,iT=new u,oT=new u,rT=new u,Xo=new u,aT=new u,sT=new u,cT=new u,AT=new u,HZ=4/3*w.PI;Dt.fromPoints=function(e,t){if(c(t)||(t=new Dt),!c(e)||e.length===0)return t.center=u.clone(u.ZERO,t.center),t.radius=0,t;let n=u.clone(e[0],rT),i=u.clone(n,$x),o=u.clone(n,eT),r=u.clone(n,tT),a=u.clone(n,nT),s=u.clone(n,iT),A=u.clone(n,oT),l=e.length,f;for(f=1;f<l;f++){u.clone(e[f],n);let D=n.x,Q=n.y,v=n.z;D<i.x&&u.clone(n,i),D>a.x&&u.clone(n,a),Q<o.y&&u.clone(n,o),Q>s.y&&u.clone(n,s),v<r.z&&u.clone(n,r),v>A.z&&u.clone(n,A)}let h=u.magnitudeSquared(u.subtract(a,i,Xo)),m=u.magnitudeSquared(u.subtract(s,o,Xo)),p=u.magnitudeSquared(u.subtract(A,r,Xo)),g=i,C=a,_=h;m>_&&(_=m,g=o,C=s),p>_&&(_=p,g=r,C=A);let E=aT;E.x=(g.x+C.x)*.5,E.y=(g.y+C.y)*.5,E.z=(g.z+C.z)*.5;let I=u.magnitudeSquared(u.subtract(C,E,Xo)),y=Math.sqrt(I),b=sT;b.x=i.x,b.y=o.y,b.z=r.z;let x=cT;x.x=a.x,x.y=s.y,x.z=A.z;let S=u.midpoint(b,x,AT),P=0;for(f=0;f<l;f++){u.clone(e[f],n);let D=u.magnitude(u.subtract(n,S,Xo));D>P&&(P=D);let Q=u.magnitudeSquared(u.subtract(n,E,Xo));if(Q>I){let v=Math.sqrt(Q);y=(y+v)*.5,I=y*y;let d=v-y;E.x=(y*E.x+d*n.x)/v,E.y=(y*E.y+d*n.y)/v,E.z=(y*E.z+d*n.z)/v}}return y<P?(u.clone(E,t.center),t.radius=y):(u.clone(S,t.center),t.radius=P),t};var OM=new Ai,VZ=new u,jZ=new u,Xx=new ae,Zx=new ae;Dt.fromRectangle2D=function(e,t,n){return Dt.fromRectangleWithHeights2D(e,t,0,0,n)};Dt.fromRectangleWithHeights2D=function(e,t,n,i,o){if(c(o)||(o=new Dt),!c(e))return o.center=u.clone(u.ZERO,o.center),o.radius=0,o;OM._ellipsoid=Z.default,t=t??OM,ce.southwest(e,Xx),Xx.height=n,ce.northeast(e,Zx),Zx.height=i;let r=t.project(Xx,VZ),a=t.project(Zx,jZ),s=a.x-r.x,A=a.y-r.y,l=a.z-r.z;o.radius=Math.sqrt(s*s+A*A+l*l)*.5;let f=o.center;return f.x=r.x+s*.5,f.y=r.y+A*.5,f.z=r.z+l*.5,o};var YZ=[];Dt.fromRectangle3D=function(e,t,n,i){if(t=t??Z.default,n=n??0,c(i)||(i=new Dt),!c(e))return i.center=u.clone(u.ZERO,i.center),i.radius=0,i;let o=ce.subsample(e,t,n,YZ);return Dt.fromPoints(o,i)};Dt.fromVertices=function(e,t,n,i){if(c(i)||(i=new Dt),!c(e)||e.length===0)return i.center=u.clone(u.ZERO,i.center),i.radius=0,i;t=t??u.ZERO,n=n??3;let o=rT;o.x=e[0]+t.x,o.y=e[1]+t.y,o.z=e[2]+t.z;let r=u.clone(o,$x),a=u.clone(o,eT),s=u.clone(o,tT),A=u.clone(o,nT),l=u.clone(o,iT),f=u.clone(o,oT),h=e.length,m;for(m=0;m<h;m+=n){let v=e[m]+t.x,d=e[m+1]+t.y,B=e[m+2]+t.z;o.x=v,o.y=d,o.z=B,v<r.x&&u.clone(o,r),v>A.x&&u.clone(o,A),d<a.y&&u.clone(o,a),d>l.y&&u.clone(o,l),B<s.z&&u.clone(o,s),B>f.z&&u.clone(o,f)}let p=u.magnitudeSquared(u.subtract(A,r,Xo)),g=u.magnitudeSquared(u.subtract(l,a,Xo)),C=u.magnitudeSquared(u.subtract(f,s,Xo)),_=r,E=A,I=p;g>I&&(I=g,_=a,E=l),C>I&&(I=C,_=s,E=f);let y=aT;y.x=(_.x+E.x)*.5,y.y=(_.y+E.y)*.5,y.z=(_.z+E.z)*.5;let b=u.magnitudeSquared(u.subtract(E,y,Xo)),x=Math.sqrt(b),S=sT;S.x=r.x,S.y=a.y,S.z=s.z;let P=cT;P.x=A.x,P.y=l.y,P.z=f.z;let D=u.midpoint(S,P,AT),Q=0;for(m=0;m<h;m+=n){o.x=e[m]+t.x,o.y=e[m+1]+t.y,o.z=e[m+2]+t.z;let v=u.magnitude(u.subtract(o,D,Xo));v>Q&&(Q=v);let d=u.magnitudeSquared(u.subtract(o,y,Xo));if(d>b){let B=Math.sqrt(d);x=(x+B)*.5,b=x*x;let T=B-x;y.x=(x*y.x+T*o.x)/B,y.y=(x*y.y+T*o.y)/B,y.z=(x*y.z+T*o.z)/B}}return x<Q?(u.clone(y,i.center),i.radius=x):(u.clone(D,i.center),i.radius=Q),i};Dt.fromEncodedCartesianVertices=function(e,t,n){if(c(n)||(n=new Dt),!c(e)||!c(t)||e.length!==t.length||e.length===0)return n.center=u.clone(u.ZERO,n.center),n.radius=0,n;let i=rT;i.x=e[0]+t[0],i.y=e[1]+t[1],i.z=e[2]+t[2];let o=u.clone(i,$x),r=u.clone(i,eT),a=u.clone(i,tT),s=u.clone(i,nT),A=u.clone(i,iT),l=u.clone(i,oT),f=e.length,h;for(h=0;h<f;h+=3){let Q=e[h]+t[h],v=e[h+1]+t[h+1],d=e[h+2]+t[h+2];i.x=Q,i.y=v,i.z=d,Q<o.x&&u.clone(i,o),Q>s.x&&u.clone(i,s),v<r.y&&u.clone(i,r),v>A.y&&u.clone(i,A),d<a.z&&u.clone(i,a),d>l.z&&u.clone(i,l)}let m=u.magnitudeSquared(u.subtract(s,o,Xo)),p=u.magnitudeSquared(u.subtract(A,r,Xo)),g=u.magnitudeSquared(u.subtract(l,a,Xo)),C=o,_=s,E=m;p>E&&(E=p,C=r,_=A),g>E&&(E=g,C=a,_=l);let I=aT;I.x=(C.x+_.x)*.5,I.y=(C.y+_.y)*.5,I.z=(C.z+_.z)*.5;let y=u.magnitudeSquared(u.subtract(_,I,Xo)),b=Math.sqrt(y),x=sT;x.x=o.x,x.y=r.y,x.z=a.z;let S=cT;S.x=s.x,S.y=A.y,S.z=l.z;let P=u.midpoint(x,S,AT),D=0;for(h=0;h<f;h+=3){i.x=e[h]+t[h],i.y=e[h+1]+t[h+1],i.z=e[h+2]+t[h+2];let Q=u.magnitude(u.subtract(i,P,Xo));Q>D&&(D=Q);let v=u.magnitudeSquared(u.subtract(i,I,Xo));if(v>y){let d=Math.sqrt(v);b=(b+d)*.5,y=b*b;let B=d-b;I.x=(b*I.x+B*i.x)/d,I.y=(b*I.y+B*i.y)/d,I.z=(b*I.z+B*i.z)/d}}return b<D?(u.clone(I,n.center),n.radius=b):(u.clone(P,n.center),n.radius=D),n};Dt.fromCornerPoints=function(e,t,n){c(n)||(n=new Dt);let i=u.midpoint(e,t,n.center);return n.radius=u.distance(i,t),n};Dt.fromEllipsoid=function(e,t){return c(t)||(t=new Dt),u.clone(u.ZERO,t.center),t.radius=e.maximumRadius,t};var qZ=new u;Dt.fromBoundingSpheres=function(e,t){if(c(t)||(t=new Dt),!c(e)||e.length===0)return t.center=u.clone(u.ZERO,t.center),t.radius=0,t;let n=e.length;if(n===1)return Dt.clone(e[0],t);if(n===2)return Dt.union(e[0],e[1],t);let i=[],o;for(o=0;o<n;o++)i.push(e[o].center);t=Dt.fromPoints(i,t);let r=t.center,a=t.radius;for(o=0;o<n;o++){let s=e[o];a=Math.max(a,u.distance(r,s.center,qZ)+s.radius)}return t.radius=a,t};var WZ=new u,JZ=new u,KZ=new u;Dt.fromOrientedBoundingBox=function(e,t){c(t)||(t=new Dt);let n=e.halfAxes,i=J.getColumn(n,0,WZ),o=J.getColumn(n,1,JZ),r=J.getColumn(n,2,KZ);return u.add(i,o,i),u.add(i,r,i),t.center=u.clone(e.center,t.center),t.radius=u.magnitude(i),t};var XZ=new u,ZZ=new u;Dt.fromTransformation=function(e,t){c(t)||(t=new Dt);let n=O.getTranslation(e,XZ),i=O.getScale(e,ZZ),o=.5*u.magnitude(i);return t.center=u.clone(n,t.center),t.radius=o,t};Dt.clone=function(e,t){if(c(e))return c(t)?(t.center=u.clone(e.center,t.center),t.radius=e.radius,t):new Dt(e.center,e.radius)};Dt.packedLength=4;Dt.pack=function(e,t,n){n=n??0;let i=e.center;return t[n++]=i.x,t[n++]=i.y,t[n++]=i.z,t[n]=e.radius,t};Dt.unpack=function(e,t,n){t=t??0,c(n)||(n=new Dt);let i=n.center;return i.x=e[t++],i.y=e[t++],i.z=e[t++],n.radius=e[t],n};var $Z=new u,e7=new u;Dt.union=function(e,t,n){c(n)||(n=new Dt);let i=e.center,o=e.radius,r=t.center,a=t.radius,s=u.subtract(r,i,$Z),A=u.magnitude(s);if(o>=A+a)return e.clone(n),n;if(a>=A+o)return t.clone(n),n;let l=(o+A+a)*.5,f=u.multiplyByScalar(s,(-o+l)/A,e7);return u.add(f,i,f),u.clone(f,n.center),n.radius=l,n};var t7=new u;Dt.expand=function(e,t,n){n=Dt.clone(e,n);let i=u.magnitude(u.subtract(t,n.center,t7));return i>n.radius&&(n.radius=i),n};Dt.intersectPlane=function(e,t){let n=e.center,i=e.radius,o=t.normal,r=u.dot(o,n)+t.distance;return r<-i?vt.OUTSIDE:r<i?vt.INTERSECTING:vt.INSIDE};Dt.transform=function(e,t,n){return c(n)||(n=new Dt),n.center=O.multiplyByPoint(t,e.center,n.center),n.radius=O.getMaximumScale(t)*e.radius,n};var n7=new u;Dt.distanceSquaredTo=function(e,t){let n=u.subtract(e.center,t,n7),i=u.magnitude(n)-e.radius;return i<=0?0:i*i};Dt.transformWithoutScale=function(e,t,n){return c(n)||(n=new Dt),n.center=O.multiplyByPoint(t,e.center,n.center),n.radius=e.radius,n};var i7=new u;Dt.computePlaneDistances=function(e,t,n,i){c(i)||(i=new Ss);let o=u.subtract(e.center,t,i7),r=u.dot(n,o);return i.start=r-e.radius,i.stop=r+e.radius,i};var LM=new u,o7=new u,r7=new u,a7=new u,s7=new u,c7=new ae,FM=new Array(8);for(let e=0;e<8;++e)FM[e]=new u;var NM=new Ai;Dt.projectTo2D=function(e,t,n){NM._ellipsoid=Z.default,t=t??NM;let i=t.ellipsoid,o=e.center,r=e.radius,a;u.equals(o,u.ZERO)?a=u.clone(u.UNIT_X,LM):a=i.geodeticSurfaceNormal(o,LM);let s=u.cross(u.UNIT_Z,a,o7);u.normalize(s,s);let A=u.cross(a,s,r7);u.normalize(A,A),u.multiplyByScalar(a,r,a),u.multiplyByScalar(A,r,A),u.multiplyByScalar(s,r,s);let l=u.negate(A,s7),f=u.negate(s,a7),h=FM,m=h[0];u.add(a,A,m),u.add(m,s,m),m=h[1],u.add(a,A,m),u.add(m,f,m),m=h[2],u.add(a,l,m),u.add(m,f,m),m=h[3],u.add(a,l,m),u.add(m,s,m),u.negate(a,a),m=h[4],u.add(a,A,m),u.add(m,s,m),m=h[5],u.add(a,A,m),u.add(m,f,m),m=h[6],u.add(a,l,m),u.add(m,f,m),m=h[7],u.add(a,l,m),u.add(m,s,m);let p=h.length;for(let E=0;E<p;++E){let I=h[E];u.add(o,I,I);let y=i.cartesianToCartographic(I,c7);t.project(y,I)}n=Dt.fromPoints(h,n),o=n.center;let g=o.x,C=o.y,_=o.z;return o.x=_,o.y=g,o.z=C,n};Dt.isOccluded=function(e,t){return!t.isBoundingSphereVisible(e)};Dt.equals=function(e,t){return e===t||c(e)&&c(t)&&u.equals(e.center,t.center)&&e.radius===t.radius};Dt.prototype.intersectPlane=function(e){return Dt.intersectPlane(this,e)};Dt.prototype.distanceSquaredTo=function(e){return Dt.distanceSquaredTo(this,e)};Dt.prototype.computePlaneDistances=function(e,t,n){return Dt.computePlaneDistances(this,e,t,n)};Dt.prototype.isOccluded=function(e){return Dt.isOccluded(this,e)};Dt.prototype.equals=function(e){return Dt.equals(this,e)};Dt.prototype.clone=function(e){return Dt.clone(this,e)};Dt.prototype.volume=function(){let e=this.radius;return HZ*e*e*e};var ee=Dt;function A7(e){e=e??k.EMPTY_OBJECT,this.position=e.position,this.normal=e.normal,this.st=e.st,this.bitangent=e.bitangent,this.tangent=e.tangent,this.color=e.color}var Mt=A7;var l7={NONE:0,TOP:1,ALL:2},xt=Object.freeze(l7);function po(e){e=e??k.EMPTY_OBJECT,this.position=e.position??!1,this.normal=e.normal??!1,this.st=e.st??!1,this.bitangent=e.bitangent??!1,this.tangent=e.tangent??!1,this.color=e.color??!1}po.POSITION_ONLY=Object.freeze(new po({position:!0}));po.POSITION_AND_NORMAL=Object.freeze(new po({position:!0,normal:!0}));po.POSITION_NORMAL_AND_ST=Object.freeze(new po({position:!0,normal:!0,st:!0}));po.POSITION_AND_ST=Object.freeze(new po({position:!0,st:!0}));po.POSITION_AND_COLOR=Object.freeze(new po({position:!0,color:!0}));po.ALL=Object.freeze(new po({position:!0,normal:!0,st:!0,tangent:!0,bitangent:!0}));po.DEFAULT=po.POSITION_NORMAL_AND_ST;po.packedLength=6;po.pack=function(e,t,n){return n=n??0,t[n++]=e.position?1:0,t[n++]=e.normal?1:0,t[n++]=e.st?1:0,t[n++]=e.tangent?1:0,t[n++]=e.bitangent?1:0,t[n]=e.color?1:0,t};po.unpack=function(e,t,n){return t=t??0,c(n)||(n=new po),n.position=e[t++]===1,n.normal=e[t++]===1,n.st=e[t++]===1,n.tangent=e[t++]===1,n.bitangent=e[t++]===1,n.color=e[t]===1,n};po.clone=function(e,t){if(c(e))return c(t)||(t=new po),t.position=e.position,t.normal=e.normal,t.st=e.st,t.tangent=e.tangent,t.bitangent=e.bitangent,t.color=e.color,t};var ge=po;var f7=new u;function Ya(e){e=e??k.EMPTY_OBJECT;let t=e.minimum,n=e.maximum,i=e.vertexFormat??ge.DEFAULT;this._minimum=u.clone(t),this._maximum=u.clone(n),this._vertexFormat=i,this._offsetAttribute=e.offsetAttribute,this._workerName="createBoxGeometry"}Ya.fromDimensions=function(e){e=e??k.EMPTY_OBJECT;let t=e.dimensions,n=u.multiplyByScalar(t,.5,new u);return new Ya({minimum:u.negate(n,new u),maximum:n,vertexFormat:e.vertexFormat,offsetAttribute:e.offsetAttribute})};Ya.fromAxisAlignedBoundingBox=function(e){return new Ya({minimum:e.minimum,maximum:e.maximum})};Ya.packedLength=2*u.packedLength+ge.packedLength+1;Ya.pack=function(e,t,n){return n=n??0,u.pack(e._minimum,t,n),u.pack(e._maximum,t,n+u.packedLength),ge.pack(e._vertexFormat,t,n+2*u.packedLength),t[n+2*u.packedLength+ge.packedLength]=e._offsetAttribute??-1,t};var UM=new u,GM=new u,zM=new ge,kM={minimum:UM,maximum:GM,vertexFormat:zM,offsetAttribute:void 0};Ya.unpack=function(e,t,n){t=t??0;let i=u.unpack(e,t,UM),o=u.unpack(e,t+u.packedLength,GM),r=ge.unpack(e,t+2*u.packedLength,zM),a=e[t+2*u.packedLength+ge.packedLength];return c(n)?(n._minimum=u.clone(i,n._minimum),n._maximum=u.clone(o,n._maximum),n._vertexFormat=ge.clone(r,n._vertexFormat),n._offsetAttribute=a===-1?void 0:a,n):(kM.offsetAttribute=a===-1?void 0:a,new Ya(kM))};Ya.createGeometry=function(e){let t=e._minimum,n=e._maximum,i=e._vertexFormat;if(u.equals(t,n))return;let o=new Mt,r,a;if(i.position&&(i.st||i.normal||i.tangent||i.bitangent)){if(i.position&&(a=new Float64Array(72),a[0]=t.x,a[1]=t.y,a[2]=n.z,a[3]=n.x,a[4]=t.y,a[5]=n.z,a[6]=n.x,a[7]=n.y,a[8]=n.z,a[9]=t.x,a[10]=n.y,a[11]=n.z,a[12]=t.x,a[13]=t.y,a[14]=t.z,a[15]=n.x,a[16]=t.y,a[17]=t.z,a[18]=n.x,a[19]=n.y,a[20]=t.z,a[21]=t.x,a[22]=n.y,a[23]=t.z,a[24]=n.x,a[25]=t.y,a[26]=t.z,a[27]=n.x,a[28]=n.y,a[29]=t.z,a[30]=n.x,a[31]=n.y,a[32]=n.z,a[33]=n.x,a[34]=t.y,a[35]=n.z,a[36]=t.x,a[37]=t.y,a[38]=t.z,a[39]=t.x,a[40]=n.y,a[41]=t.z,a[42]=t.x,a[43]=n.y,a[44]=n.z,a[45]=t.x,a[46]=t.y,a[47]=n.z,a[48]=t.x,a[49]=n.y,a[50]=t.z,a[51]=n.x,a[52]=n.y,a[53]=t.z,a[54]=n.x,a[55]=n.y,a[56]=n.z,a[57]=t.x,a[58]=n.y,a[59]=n.z,a[60]=t.x,a[61]=t.y,a[62]=t.z,a[63]=n.x,a[64]=t.y,a[65]=t.z,a[66]=n.x,a[67]=t.y,a[68]=n.z,a[69]=t.x,a[70]=t.y,a[71]=n.z,o.position=new ue({componentDatatype:N.DOUBLE,componentsPerAttribute:3,values:a})),i.normal){let l=new Float32Array(72);l[0]=0,l[1]=0,l[2]=1,l[3]=0,l[4]=0,l[5]=1,l[6]=0,l[7]=0,l[8]=1,l[9]=0,l[10]=0,l[11]=1,l[12]=0,l[13]=0,l[14]=-1,l[15]=0,l[16]=0,l[17]=-1,l[18]=0,l[19]=0,l[20]=-1,l[21]=0,l[22]=0,l[23]=-1,l[24]=1,l[25]=0,l[26]=0,l[27]=1,l[28]=0,l[29]=0,l[30]=1,l[31]=0,l[32]=0,l[33]=1,l[34]=0,l[35]=0,l[36]=-1,l[37]=0,l[38]=0,l[39]=-1,l[40]=0,l[41]=0,l[42]=-1,l[43]=0,l[44]=0,l[45]=-1,l[46]=0,l[47]=0,l[48]=0,l[49]=1,l[50]=0,l[51]=0,l[52]=1,l[53]=0,l[54]=0,l[55]=1,l[56]=0,l[57]=0,l[58]=1,l[59]=0,l[60]=0,l[61]=-1,l[62]=0,l[63]=0,l[64]=-1,l[65]=0,l[66]=0,l[67]=-1,l[68]=0,l[69]=0,l[70]=-1,l[71]=0,o.normal=new ue({componentDatatype:N.FLOAT,componentsPerAttribute:3,values:l})}if(i.st){let l=new Float32Array(48);l[0]=0,l[1]=0,l[2]=1,l[3]=0,l[4]=1,l[5]=1,l[6]=0,l[7]=1,l[8]=1,l[9]=0,l[10]=0,l[11]=0,l[12]=0,l[13]=1,l[14]=1,l[15]=1,l[16]=0,l[17]=0,l[18]=1,l[19]=0,l[20]=1,l[21]=1,l[22]=0,l[23]=1,l[24]=1,l[25]=0,l[26]=0,l[27]=0,l[28]=0,l[29]=1,l[30]=1,l[31]=1,l[32]=1,l[33]=0,l[34]=0,l[35]=0,l[36]=0,l[37]=1,l[38]=1,l[39]=1,l[40]=0,l[41]=0,l[42]=1,l[43]=0,l[44]=1,l[45]=1,l[46]=0,l[47]=1,o.st=new ue({componentDatatype:N.FLOAT,componentsPerAttribute:2,values:l})}if(i.tangent){let l=new Float32Array(72);l[0]=1,l[1]=0,l[2]=0,l[3]=1,l[4]=0,l[5]=0,l[6]=1,l[7]=0,l[8]=0,l[9]=1,l[10]=0,l[11]=0,l[12]=-1,l[13]=0,l[14]=0,l[15]=-1,l[16]=0,l[17]=0,l[18]=-1,l[19]=0,l[20]=0,l[21]=-1,l[22]=0,l[23]=0,l[24]=0,l[25]=1,l[26]=0,l[27]=0,l[28]=1,l[29]=0,l[30]=0,l[31]=1,l[32]=0,l[33]=0,l[34]=1,l[35]=0,l[36]=0,l[37]=-1,l[38]=0,l[39]=0,l[40]=-1,l[41]=0,l[42]=0,l[43]=-1,l[44]=0,l[45]=0,l[46]=-1,l[47]=0,l[48]=-1,l[49]=0,l[50]=0,l[51]=-1,l[52]=0,l[53]=0,l[54]=-1,l[55]=0,l[56]=0,l[57]=-1,l[58]=0,l[59]=0,l[60]=1,l[61]=0,l[62]=0,l[63]=1,l[64]=0,l[65]=0,l[66]=1,l[67]=0,l[68]=0,l[69]=1,l[70]=0,l[71]=0,o.tangent=new ue({componentDatatype:N.FLOAT,componentsPerAttribute:3,values:l})}if(i.bitangent){let l=new Float32Array(72);l[0]=0,l[1]=1,l[2]=0,l[3]=0,l[4]=1,l[5]=0,l[6]=0,l[7]=1,l[8]=0,l[9]=0,l[10]=1,l[11]=0,l[12]=0,l[13]=1,l[14]=0,l[15]=0,l[16]=1,l[17]=0,l[18]=0,l[19]=1,l[20]=0,l[21]=0,l[22]=1,l[23]=0,l[24]=0,l[25]=0,l[26]=1,l[27]=0,l[28]=0,l[29]=1,l[30]=0,l[31]=0,l[32]=1,l[33]=0,l[34]=0,l[35]=1,l[36]=0,l[37]=0,l[38]=1,l[39]=0,l[40]=0,l[41]=1,l[42]=0,l[43]=0,l[44]=1,l[45]=0,l[46]=0,l[47]=1,l[48]=0,l[49]=0,l[50]=1,l[51]=0,l[52]=0,l[53]=1,l[54]=0,l[55]=0,l[56]=1,l[57]=0,l[58]=0,l[59]=1,l[60]=0,l[61]=0,l[62]=1,l[63]=0,l[64]=0,l[65]=1,l[66]=0,l[67]=0,l[68]=1,l[69]=0,l[70]=0,l[71]=1,o.bitangent=new ue({componentDatatype:N.FLOAT,componentsPerAttribute:3,values:l})}r=new Uint16Array(36),r[0]=0,r[1]=1,r[2]=2,r[3]=0,r[4]=2,r[5]=3,r[6]=6,r[7]=5,r[8]=4,r[9]=7,r[10]=6,r[11]=4,r[12]=8,r[13]=9,r[14]=10,r[15]=8,r[16]=10,r[17]=11,r[18]=14,r[19]=13,r[20]=12,r[21]=15,r[22]=14,r[23]=12,r[24]=18,r[25]=17,r[26]=16,r[27]=19,r[28]=18,r[29]=16,r[30]=20,r[31]=21,r[32]=22,r[33]=20,r[34]=22,r[35]=23}else a=new Float64Array(24),a[0]=t.x,a[1]=t.y,a[2]=t.z,a[3]=n.x,a[4]=t.y,a[5]=t.z,a[6]=n.x,a[7]=n.y,a[8]=t.z,a[9]=t.x,a[10]=n.y,a[11]=t.z,a[12]=t.x,a[13]=t.y,a[14]=n.z,a[15]=n.x,a[16]=t.y,a[17]=n.z,a[18]=n.x,a[19]=n.y,a[20]=n.z,a[21]=t.x,a[22]=n.y,a[23]=n.z,o.position=new ue({componentDatatype:N.DOUBLE,componentsPerAttribute:3,values:a}),r=new Uint16Array(36),r[0]=4,r[1]=5,r[2]=6,r[3]=4,r[4]=6,r[5]=7,r[6]=1,r[7]=0,r[8]=3,r[9]=1,r[10]=3,r[11]=2,r[12]=1,r[13]=6,r[14]=5,r[15]=1,r[16]=2,r[17]=6,r[18]=2,r[19]=3,r[20]=7,r[21]=2,r[22]=7,r[23]=6,r[24]=3,r[25]=0,r[26]=4,r[27]=3,r[28]=4,r[29]=7,r[30]=0,r[31]=1,r[32]=5,r[33]=0,r[34]=5,r[35]=4;let s=u.subtract(n,t,f7),A=u.magnitude(s)*.5;if(c(e._offsetAttribute)){let l=a.length,f=e._offsetAttribute===xt.NONE?0:1,h=new Uint8Array(l/3).fill(f);o.applyOffset=new ue({componentDatatype:N.UNSIGNED_BYTE,componentsPerAttribute:1,values:h})}return new ze({attributes:o,indices:r,primitiveType:Ce.TRIANGLES,boundingSphere:new ee(u.ZERO,A),offsetAttribute:e._offsetAttribute})};var lT;Ya.getUnitBox=function(){return c(lT)||(lT=Ya.createGeometry(Ya.fromDimensions({dimensions:new u(1,1,1),vertexFormat:ge.POSITION_ONLY}))),lT};var Gg=Ya;var Yn={SCALAR:"SCALAR",VEC2:"VEC2",VEC3:"VEC3",VEC4:"VEC4",MAT2:"MAT2",MAT3:"MAT3",MAT4:"MAT4"};Yn.getMathType=function(e){switch(e){case Yn.SCALAR:return Number;case Yn.VEC2:return U;case Yn.VEC3:return u;case Yn.VEC4:return se;case Yn.MAT2:return ai;case Yn.MAT3:return J;case Yn.MAT4:return O}};Yn.getNumberOfComponents=function(e){switch(e){case Yn.SCALAR:return 1;case Yn.VEC2:return 2;case Yn.VEC3:return 3;case Yn.VEC4:case Yn.MAT2:return 4;case Yn.MAT3:return 9;case Yn.MAT4:return 16}};Yn.getAttributeLocationCount=function(e){switch(e){case Yn.SCALAR:case Yn.VEC2:case Yn.VEC3:case Yn.VEC4:return 1;case Yn.MAT2:return 2;case Yn.MAT3:return 3;case Yn.MAT4:return 4}};Yn.getGlslType=function(e){switch(e){case Yn.SCALAR:return"float";case Yn.VEC2:return"vec2";case Yn.VEC3:return"vec3";case Yn.VEC4:return"vec4";case Yn.MAT2:return"mat2";case Yn.MAT3:return"mat3";case Yn.MAT4:return"mat4"}};var st=Object.freeze(Yn);var HM=1/256,VM=256,si={};si.octEncodeInRange=function(e,t,n){if(n.x=e.x/(Math.abs(e.x)+Math.abs(e.y)+Math.abs(e.z)),n.y=e.y/(Math.abs(e.x)+Math.abs(e.y)+Math.abs(e.z)),e.z<0){let i=n.x,o=n.y;n.x=(1-Math.abs(o))*w.signNotZero(i),n.y=(1-Math.abs(i))*w.signNotZero(o)}return n.x=w.toSNorm(n.x,t),n.y=w.toSNorm(n.y,t),n};si.octEncode=function(e,t){return si.octEncodeInRange(e,255,t)};var zg=new U,jM=new Uint8Array(1);function FI(e){return jM[0]=e,jM[0]}si.octEncodeToCartesian4=function(e,t){return si.octEncodeInRange(e,65535,zg),t.x=FI(zg.x*HM),t.y=FI(zg.x),t.z=FI(zg.y*HM),t.w=FI(zg.y),t};si.octDecodeInRange=function(e,t,n,i){if(i.x=w.fromSNorm(e,n),i.y=w.fromSNorm(t,n),i.z=1-(Math.abs(i.x)+Math.abs(i.y)),i.z<0){let o=i.x;i.x=(1-Math.abs(i.y))*w.signNotZero(o),i.y=(1-Math.abs(o))*w.signNotZero(i.y)}return u.normalize(i,i)};si.octDecode=function(e,t,n){return si.octDecodeInRange(e,t,255,n)};si.octDecodeFromCartesian4=function(e,t){let n=e.x,i=e.y,o=e.z,r=e.w,a=n*VM+i,s=o*VM+r;return si.octDecodeInRange(a,s,65535,t)};si.octPackFloat=function(e){return 256*e.x+e.y};var uT=new U;si.octEncodeFloat=function(e){return si.octEncode(e,uT),si.octPackFloat(uT)};si.octDecodeFloat=function(e,t){let n=e/256,i=Math.floor(n),o=(n-i)*256;return si.octDecode(i,o,t)};si.octPack=function(e,t,n,i){let o=si.octEncodeFloat(e),r=si.octEncodeFloat(t),a=si.octEncode(n,uT);return i.x=65536*a.x+o,i.y=65536*a.y+r,i};si.octUnpack=function(e,t,n,i){let o=e.x/65536,r=Math.floor(o),a=(o-r)*65536;o=e.y/65536;let s=Math.floor(o),A=(o-s)*65536;si.octDecodeFloat(a,t),si.octDecodeFloat(A,n),si.octDecode(r,s,i)};si.compressTextureCoordinates=function(e){let t=e.x*4095|0,n=e.y*4095|0;return 4096*t+n};si.decompressTextureCoordinates=function(e,t){let n=e/4096,i=Math.floor(n);return t.x=i/4095,t.y=(e-i*4096)/4095,t};function fT(e){return e>>1^-(e&1)}si.zigZagDeltaDecode=function(e,t,n){let i=e.length,o=0,r=0,a=0;for(let s=0;s<i;++s)o+=fT(e[s]),r+=fT(t[s]),e[s]=o,t[s]=r,c(n)&&(a+=fT(n[s]),n[s]=a)};si.dequantize=function(e,t,n,i){let o=st.getNumberOfComponents(n),r;switch(t){case N.BYTE:r=127;break;case N.UNSIGNED_BYTE:r=255;break;case N.SHORT:r=32767;break;case N.UNSIGNED_SHORT:r=65535;break;case N.INT:r=2147483647;break;case N.UNSIGNED_INT:r=4294967295;break}let a=new Float32Array(i*o);for(let s=0;s<i;s++)for(let A=0;A<o;A++){let l=s*o+A;a[l]=Math.max(e[l]/r,-1)}return a};si.decodeRGB565=function(e,t){let n=e.length;c(t)||(t=new Float32Array(n*3));let i=31,o=63,r=1/31,a=1/63;for(let s=0;s<n;s++){let A=e[s],l=A>>11,f=A>>5&o,h=A&i,m=3*s;t[m]=l*r,t[m+1]=f*a,t[m+2]=h*r}return t};var ni=si;var YM=new u,qM=new u,WM=new u;function u7(e,t,n,i,o){c(o)||(o=new u);let r,a,s,A,l,f,h,m;if(c(t.z)){if(u.equalsEpsilon(e,t,w.EPSILON14))return u.clone(u.UNIT_X,o);if(u.equalsEpsilon(e,n,w.EPSILON14))return u.clone(u.UNIT_Y,o);if(u.equalsEpsilon(e,i,w.EPSILON14))return u.clone(u.UNIT_Z,o);r=u.subtract(n,t,YM),a=u.subtract(i,t,qM),s=u.subtract(e,t,WM),A=u.dot(r,r),l=u.dot(r,a),f=u.dot(r,s),h=u.dot(a,a),m=u.dot(a,s)}else{if(U.equalsEpsilon(e,t,w.EPSILON14))return u.clone(u.UNIT_X,o);if(U.equalsEpsilon(e,n,w.EPSILON14))return u.clone(u.UNIT_Y,o);if(U.equalsEpsilon(e,i,w.EPSILON14))return u.clone(u.UNIT_Z,o);r=U.subtract(n,t,YM),a=U.subtract(i,t,qM),s=U.subtract(e,t,WM),A=U.dot(r,r),l=U.dot(r,a),f=U.dot(r,s),h=U.dot(a,a),m=U.dot(a,s)}o.y=h*f-l*m,o.z=A*m-l*f;let p=A*h-l*l;if(p!==0)return o.y/=p,o.z/=p,o.x=1-o.y-o.z,o}var JM=u7;function mA(){this.high=u.clone(u.ZERO),this.low=u.clone(u.ZERO)}mA.encode=function(e,t){c(t)||(t={high:0,low:0});let n;return e>=0?(n=Math.floor(e/65536)*65536,t.high=n,t.low=e-n):(n=Math.floor(-e/65536)*65536,t.high=-n,t.low=e+n),t};var hl={high:0,low:0};mA.fromCartesian=function(e,t){c(t)||(t=new mA);let n=t.high,i=t.low;return mA.encode(e.x,hl),n.x=hl.high,i.x=hl.low,mA.encode(e.y,hl),n.y=hl.high,i.y=hl.low,mA.encode(e.z,hl),n.z=hl.high,i.z=hl.low,t};var dT=new mA;mA.writeElements=function(e,t,n){mA.fromCartesian(e,dT);let i=dT.high,o=dT.low;t[n]=i.x,t[n+1]=i.y,t[n+2]=i.z,t[n+3]=o.x,t[n+4]=o.y,t[n+5]=o.z};var xn=mA;var hT={};hT.computeDiscriminant=function(e,t,n){return t*t-4*e*n};function KM(e,t,n){let i=e+t;return w.sign(e)!==w.sign(t)&&Math.abs(i/Math.max(Math.abs(e),Math.abs(t)))<n?0:i}hT.computeRealRoots=function(e,t,n){let i;if(e===0)return t===0?[]:[-n/t];if(t===0){if(n===0)return[0,0];let A=Math.abs(n),l=Math.abs(e);if(A<l&&A/l<w.EPSILON14)return[0,0];if(A>l&&l/A<w.EPSILON14)return[];if(i=-n/e,i<0)return[];let f=Math.sqrt(i);return[-f,f]}else if(n===0)return i=-t/e,i<0?[i,0]:[0,i];let o=t*t,r=4*e*n,a=KM(o,-r,w.EPSILON14);if(a<0)return[];let s=-.5*KM(t,w.sign(t)*Math.sqrt(a),w.EPSILON14);return t>0?[s/e,n/s]:[n/s,s/e]};var ws=hT;var pT={};pT.computeDiscriminant=function(e,t,n,i){let o=e*e,r=t*t,a=n*n,s=i*i;return 18*e*t*n*i+r*a-27*o*s-4*(e*a*n+r*t*i)};function mT(e,t,n,i){let o=e,r=t/3,a=n/3,s=i,A=o*a,l=r*s,f=r*r,h=a*a,m=o*a-f,p=o*s-r*a,g=r*s-h,C=4*m*g-p*p,_,E;if(C<0){let le,de,he;f*l>=A*h?(le=o,de=m,he=-2*r*m+o*p):(le=s,de=g,he=-s*p+2*a*g);let be=-(he<0?-1:1)*Math.abs(le)*Math.sqrt(-C);E=-he+be;let _e=E/2,Ct=_e<0?-Math.pow(-_e,1/3):Math.pow(_e,1/3),ft=E===be?-Ct:-de/Ct;return _=de<=0?Ct+ft:-he/(Ct*Ct+ft*ft+de),f*l>=A*h?[(_-r)/o]:[-s/(_+a)]}let I=m,y=-2*r*m+o*p,b=g,x=-s*p+2*a*g,S=Math.sqrt(C),P=Math.sqrt(3)/2,D=Math.abs(Math.atan2(o*S,-y)/3);_=2*Math.sqrt(-I);let Q=Math.cos(D);E=_*Q;let v=_*(-Q/2-P*Math.sin(D)),d=E+v>2*r?E-r:v-r,B=o,T=d/B;D=Math.abs(Math.atan2(s*S,-x)/3),_=2*Math.sqrt(-b),Q=Math.cos(D),E=_*Q,v=_*(-Q/2-P*Math.sin(D));let R=-s,L=E+v<2*a?E+a:v+a,G=R/L,q=B*L,z=-d*L-B*R,K=d*R,ie=(a*z-r*K)/(-r*z+a*q);return T<=ie?T<=G?ie<=G?[T,ie,G]:[T,G,ie]:[G,T,ie]:T<=G?[ie,T,G]:ie<=G?[ie,G,T]:[G,ie,T]}pT.computeRealRoots=function(e,t,n,i){let o,r;if(e===0)return ws.computeRealRoots(t,n,i);if(t===0){if(n===0){if(i===0)return[0,0,0];r=-i/e;let a=r<0?-Math.pow(-r,1/3):Math.pow(r,1/3);return[a,a,a]}else if(i===0)return o=ws.computeRealRoots(e,0,n),o.Length===0?[0]:[o[0],0,o[1]];return mT(e,0,n,i)}else{if(n===0)return i===0?(r=-t/e,r<0?[r,0,0]:[0,0,r]):mT(e,t,0,i);if(i===0)return o=ws.computeRealRoots(e,t,n),o.length===0?[0]:o[1]<=0?[o[0],o[1],0]:o[0]>=0?[0,o[0],o[1]]:[o[0],0,o[1]]}return mT(e,t,n,i)};var kI=pT;var gT={};gT.computeDiscriminant=function(e,t,n,i,o){let r=e*e,a=r*e,s=t*t,A=s*t,l=n*n,f=l*n,h=i*i,m=h*i,p=o*o,g=p*o;return s*l*h-4*A*m-4*e*f*h+18*e*t*n*m-27*r*h*h+256*a*g+o*(18*A*n*i-4*s*f+16*e*l*l-80*e*t*l*i-6*e*s*h+144*r*n*h)+p*(144*e*s*n-27*s*s-128*r*l-192*r*t*i)};function _c(e,t,n,i){let o=e*e,r=t-3*o/8,a=n-t*e/2+o*e/8,s=i-n*e/4+t*o/16-3*o*o/256,A=kI.computeRealRoots(1,2*r,r*r-4*s,-a*a);if(A.length>0){let l=-e/4,f=A[A.length-1];if(Math.abs(f)<w.EPSILON14){let h=ws.computeRealRoots(1,r,s);if(h.length===2){let m=h[0],p=h[1],g;if(m>=0&&p>=0){let C=Math.sqrt(m),_=Math.sqrt(p);return[l-_,l-C,l+C,l+_]}else{if(m>=0&&p<0)return g=Math.sqrt(m),[l-g,l+g];if(m<0&&p>=0)return g=Math.sqrt(p),[l-g,l+g]}}return[]}else if(f>0){let h=Math.sqrt(f),m=(r+f-a/h)/2,p=(r+f+a/h)/2,g=ws.computeRealRoots(1,h,m),C=ws.computeRealRoots(1,-h,p);return g.length!==0?(g[0]+=l,g[1]+=l,C.length!==0?(C[0]+=l,C[1]+=l,g[1]<=C[0]?[g[0],g[1],C[0],C[1]]:C[1]<=g[0]?[C[0],C[1],g[0],g[1]]:g[0]>=C[0]&&g[1]<=C[1]?[C[0],g[0],g[1],C[1]]:C[0]>=g[0]&&C[1]<=g[1]?[g[0],C[0],C[1],g[1]]:g[0]>C[0]&&g[0]<C[1]?[C[0],g[0],C[1],g[1]]:[g[0],C[0],g[1],C[1]]):g):C.length!==0?(C[0]+=l,C[1]+=l,C):[]}}return[]}function Hg(e,t,n,i){let o=n*n,r=t*t,a=e*e,s=-2*t,A=n*e+r-4*i,l=a*i-n*t*e+o,f=kI.computeRealRoots(1,s,A,l);if(f.length>0){let h=f[0],m=t-h,p=m*m,g=e/2,C=m/2,_=p-4*i,E=p+4*Math.abs(i),I=a-4*h,y=a+4*Math.abs(h),b,x;if(h<0||_*y<I*E){let B=Math.sqrt(I);b=B/2,x=B===0?0:(e*C-n)/B}else{let B=Math.sqrt(_);b=B===0?0:(e*C-n)/B,x=B/2}let S,P;g===0&&b===0?(S=0,P=0):w.sign(g)===w.sign(b)?(S=g+b,P=h/S):(P=g-b,S=h/P);let D,Q;C===0&&x===0?(D=0,Q=0):w.sign(C)===w.sign(x)?(D=C+x,Q=i/D):(Q=C-x,D=i/Q);let v=ws.computeRealRoots(1,S,D),d=ws.computeRealRoots(1,P,Q);if(v.length!==0)return d.length!==0?v[1]<=d[0]?[v[0],v[1],d[0],d[1]]:d[1]<=v[0]?[d[0],d[1],v[0],v[1]]:v[0]>=d[0]&&v[1]<=d[1]?[d[0],v[0],v[1],d[1]]:d[0]>=v[0]&&d[1]<=v[1]?[v[0],d[0],d[1],v[1]]:v[0]>d[0]&&v[0]<d[1]?[d[0],v[0],d[1],v[1]]:[v[0],d[0],v[1],d[1]]:v;if(d.length!==0)return d}return[]}gT.computeRealRoots=function(e,t,n,i,o){if(Math.abs(e)<w.EPSILON15)return kI.computeRealRoots(t,n,i,o);let r=t/e,a=n/e,s=i/e,A=o/e,l=r<0?1:0;switch(l+=a<0?l+1:l,l+=s<0?l+1:l,l+=A<0?l+1:l,l){case 0:return _c(r,a,s,A);case 1:return Hg(r,a,s,A);case 2:return Hg(r,a,s,A);case 3:return _c(r,a,s,A);case 4:return _c(r,a,s,A);case 5:return Hg(r,a,s,A);case 6:return _c(r,a,s,A);case 7:return _c(r,a,s,A);case 8:return Hg(r,a,s,A);case 9:return _c(r,a,s,A);case 10:return _c(r,a,s,A);case 11:return Hg(r,a,s,A);case 12:return _c(r,a,s,A);case 13:return _c(r,a,s,A);case 14:return _c(r,a,s,A);case 15:return _c(r,a,s,A);default:return}};var XM=gT;function UI(e,t){t=u.clone(t??u.ZERO),u.equals(t,u.ZERO)||u.normalize(t,t),this.origin=u.clone(e??u.ZERO),this.direction=t}UI.clone=function(e,t){if(c(e))return c(t)?(t.origin=u.clone(e.origin),t.direction=u.clone(e.direction),t):new UI(e.origin,e.direction)};UI.getPoint=function(e,t,n){return c(n)||(n=new u),n=u.multiplyByScalar(e.direction,t,n),u.add(e.origin,n,n)};var qa=UI;var bi={};bi.rayPlane=function(e,t,n){c(n)||(n=new u);let i=e.origin,o=e.direction,r=t.normal,a=u.dot(r,o);if(Math.abs(a)<w.EPSILON15)return;let s=(-t.distance-u.dot(r,i))/a;if(!(s<0))return n=u.multiplyByScalar(o,s,n),u.add(i,n,n)};var d7=new u,h7=new u,rO=new u,ZM=new u,$M=new u;bi.rayTriangleParametric=function(e,t,n,i,o){o=o??!1;let r=e.origin,a=e.direction,s=u.subtract(n,t,d7),A=u.subtract(i,t,h7),l=u.cross(a,A,rO),f=u.dot(s,l),h,m,p,g,C;if(o){if(f<w.EPSILON6||(h=u.subtract(r,t,ZM),p=u.dot(h,l),p<0||p>f)||(m=u.cross(h,s,$M),g=u.dot(a,m),g<0||p+g>f))return;C=u.dot(A,m)/f}else{if(Math.abs(f)<w.EPSILON6)return;let _=1/f;if(h=u.subtract(r,t,ZM),p=u.dot(h,l)*_,p<0||p>1||(m=u.cross(h,s,$M),g=u.dot(a,m)*_,g<0||p+g>1))return;C=u.dot(A,m)*_}return C};bi.rayTriangle=function(e,t,n,i,o,r){let a=bi.rayTriangleParametric(e,t,n,i,o);if(!(!c(a)||a<0))return c(r)||(r=new u),u.multiplyByScalar(e.direction,a,r),u.add(e.origin,r,r)};var m7=new qa;bi.lineSegmentTriangle=function(e,t,n,i,o,r,a){let s=m7;u.clone(e,s.origin),u.subtract(t,e,s.direction),u.normalize(s.direction,s.direction);let A=bi.rayTriangleParametric(s,n,i,o,r);if(!(!c(A)||A<0||A>u.distance(e,t)))return c(a)||(a=new u),u.multiplyByScalar(s.direction,A,a),u.add(s.origin,a,a)};function p7(e,t,n,i){let o=t*t-4*e*n;if(o<0)return;if(o>0){let a=1/(2*e),s=Math.sqrt(o),A=(-t+s)*a,l=(-t-s)*a;return A<l?(i.root0=A,i.root1=l):(i.root0=l,i.root1=A),i}let r=-t/(2*e);if(r!==0)return i.root0=i.root1=r,i}var g7={root0:0,root1:0};function aO(e,t,n){c(n)||(n=new Ss);let i=e.origin,o=e.direction,r=t.center,a=t.radius*t.radius,s=u.subtract(i,r,rO),A=u.dot(o,o),l=2*u.dot(o,s),f=u.magnitudeSquared(s)-a,h=p7(A,l,f,g7);if(c(h))return n.start=h.root0,n.stop=h.root1,n}bi.raySphere=function(e,t,n){if(n=aO(e,t,n),!(!c(n)||n.stop<0))return n.start=Math.max(n.start,0),n};var C7=new qa;bi.lineSegmentSphere=function(e,t,n,i){let o=C7;u.clone(e,o.origin);let r=u.subtract(t,e,o.direction),a=u.magnitude(r);if(u.normalize(r,r),i=aO(o,n,i),!(!c(i)||i.stop<0||i.start>a))return i.start=Math.max(i.start,0),i.stop=Math.min(i.stop,a),i};var _7=new u,E7=new u;bi.rayEllipsoid=function(e,t){let n=t.oneOverRadii,i=u.multiplyComponents(n,e.origin,_7),o=u.multiplyComponents(n,e.direction,E7),r=u.magnitudeSquared(i),a=u.dot(i,o),s,A,l,f,h;if(r>1){if(a>=0)return;let m=a*a;if(s=r-1,A=u.magnitudeSquared(o),l=A*s,m<l)return;if(m>l){f=a*a-l,h=-a+Math.sqrt(f);let g=h/A,C=s/h;return g<C?new Ss(g,C):{start:C,stop:g}}let p=Math.sqrt(s/A);return new Ss(p,p)}else if(r<1)return s=r-1,A=u.magnitudeSquared(o),l=A*s,f=a*a-l,h=-a+Math.sqrt(f),new Ss(0,h/A);if(a<0)return A=u.magnitudeSquared(o),new Ss(0,-a/A)};function _d(e,t,n){let i=e+t;return w.sign(e)!==w.sign(t)&&Math.abs(i/Math.max(Math.abs(e),Math.abs(t)))<n?0:i}bi.quadraticVectorExpression=function(e,t,n,i,o){let r=i*i,a=o*o,s=(e[J.COLUMN1ROW1]-e[J.COLUMN2ROW2])*a,A=o*(i*_d(e[J.COLUMN1ROW0],e[J.COLUMN0ROW1],w.EPSILON15)+t.y),l=e[J.COLUMN0ROW0]*r+e[J.COLUMN2ROW2]*a+i*t.x+n,f=a*_d(e[J.COLUMN2ROW1],e[J.COLUMN1ROW2],w.EPSILON15),h=o*(i*_d(e[J.COLUMN2ROW0],e[J.COLUMN0ROW2])+t.z),m,p=[];if(h===0&&f===0){if(m=ws.computeRealRoots(s,A,l),m.length===0)return p;let D=m[0],Q=Math.sqrt(Math.max(1-D*D,0));if(p.push(new u(i,o*D,o*-Q)),p.push(new u(i,o*D,o*Q)),m.length===2){let v=m[1],d=Math.sqrt(Math.max(1-v*v,0));p.push(new u(i,o*v,o*-d)),p.push(new u(i,o*v,o*d))}return p}let g=h*h,C=f*f,_=s*s,E=h*f,I=_+C,y=2*(A*s+E),b=2*l*s+A*A-C+g,x=2*(l*A-E),S=l*l-g;if(I===0&&y===0&&b===0&&x===0)return p;m=XM.computeRealRoots(I,y,b,x,S);let P=m.length;if(P===0)return p;for(let D=0;D<P;++D){let Q=m[D],v=Q*Q,d=Math.max(1-v,0),B=Math.sqrt(d),T;w.sign(s)===w.sign(l)?T=_d(s*v+l,A*Q,w.EPSILON12):w.sign(l)===w.sign(A*Q)?T=_d(s*v,A*Q+l,w.EPSILON12):T=_d(s*v+A*Q,l,w.EPSILON12);let R=_d(f*Q,h,w.EPSILON15),L=T*R;L<0?p.push(new u(i,o*Q,o*B)):L>0?p.push(new u(i,o*Q,o*-B)):B!==0?(p.push(new u(i,o*Q,o*-B)),p.push(new u(i,o*Q,o*B)),++D):p.push(new u(i,o*Q,o*B))}return p};var CT=new u,eO=new u,tO=new u,GI=new u,I7=new u,y7=new J,b7=new J,B7=new J,x7=new J,T7=new J,nO=new J,iO=new J,oO=new u,S7=new u,w7=new ae;bi.grazingAltitudeLocation=function(e,t){let n=e.origin,i=e.direction;if(!u.equals(n,u.ZERO)){let S=t.geodeticSurfaceNormal(n,CT);if(u.dot(i,S)>=0)return n}let o=c(this.rayEllipsoid(e,t)),r=t.transformPositionToScaledSpace(i,CT),a=u.normalize(r,r),s=u.mostOrthogonalAxis(r,GI),A=u.normalize(u.cross(s,a,eO),eO),l=u.normalize(u.cross(a,A,tO),tO),f=y7;f[0]=a.x,f[1]=a.y,f[2]=a.z,f[3]=A.x,f[4]=A.y,f[5]=A.z,f[6]=l.x,f[7]=l.y,f[8]=l.z;let h=J.transpose(f,b7),m=J.fromScale(t.radii,B7),p=J.fromScale(t.oneOverRadii,x7),g=T7;g[0]=0,g[1]=-i.z,g[2]=i.y,g[3]=i.z,g[4]=0,g[5]=-i.x,g[6]=-i.y,g[7]=i.x,g[8]=0;let C=J.multiply(J.multiply(h,p,nO),g,nO),_=J.multiply(J.multiply(C,m,iO),f,iO),E=J.multiplyByVector(C,n,I7),I=bi.quadraticVectorExpression(_,u.negate(E,CT),0,0,1),y,b,x=I.length;if(x>0){let S=u.clone(u.ZERO,S7),P=Number.NEGATIVE_INFINITY;for(let Q=0;Q<x;++Q){y=J.multiplyByVector(m,J.multiplyByVector(f,I[Q],oO),oO);let v=u.normalize(u.subtract(y,n,GI),GI),d=u.dot(v,i);d>P&&(P=d,S=u.clone(y,S))}let D=t.cartesianToCartographic(S,w7);return P=w.clamp(P,0,1),b=u.magnitude(u.subtract(S,n,GI))*Math.sqrt(1-P*P),b=o?-b:b,D.height=b,t.cartographicToCartesian(D,new u)}};var D7=new u;bi.lineSegmentPlane=function(e,t,n,i){c(i)||(i=new u);let o=u.subtract(t,e,D7),r=n.normal,a=u.dot(r,o);if(Math.abs(a)<w.EPSILON6)return;let s=u.dot(r,e),A=-(n.distance+s)/a;if(!(A<0||A>1))return u.multiplyByScalar(o,A,i),u.add(e,i,i),i};bi.trianglePlaneIntersection=function(e,t,n,i){let o=i.normal,r=i.distance,a=u.dot(o,e)+r<0,s=u.dot(o,t)+r<0,A=u.dot(o,n)+r<0,l=0;l+=a?1:0,l+=s?1:0,l+=A?1:0;let f,h;if((l===1||l===2)&&(f=new u,h=new u),l===1){if(a)return bi.lineSegmentPlane(e,t,i,f),bi.lineSegmentPlane(e,n,i,h),{positions:[e,t,n,f,h],indices:[0,3,4,1,2,4,1,4,3]};if(s)return bi.lineSegmentPlane(t,n,i,f),bi.lineSegmentPlane(t,e,i,h),{positions:[e,t,n,f,h],indices:[1,3,4,2,0,4,2,4,3]};if(A)return bi.lineSegmentPlane(n,e,i,f),bi.lineSegmentPlane(n,t,i,h),{positions:[e,t,n,f,h],indices:[2,3,4,0,1,4,0,4,3]}}else if(l===2)if(a)if(s){if(!A)return bi.lineSegmentPlane(e,n,i,f),bi.lineSegmentPlane(t,n,i,h),{positions:[e,t,n,f,h],indices:[0,1,4,0,4,3,2,3,4]}}else return bi.lineSegmentPlane(n,t,i,f),bi.lineSegmentPlane(e,t,i,h),{positions:[e,t,n,f,h],indices:[2,0,4,2,4,3,1,3,4]};else return bi.lineSegmentPlane(t,e,i,f),bi.lineSegmentPlane(n,e,i,h),{positions:[e,t,n,f,h],indices:[1,2,4,1,4,3,0,3,4]}};var Ni=bi;function Mo(e,t){this.normal=u.clone(e),this.distance=t}Mo.fromPointNormal=function(e,t,n){let i=-u.dot(t,e);return c(n)?(u.clone(t,n.normal),n.distance=i,n):new Mo(t,i)};var Q7=new u;Mo.fromCartesian4=function(e,t){let n=u.fromCartesian4(e,Q7),i=e.w;return c(t)?(u.clone(n,t.normal),t.distance=i,t):new Mo(n,i)};Mo.getPointDistance=function(e,t){return u.dot(e.normal,t)+e.distance};var R7=new u;Mo.projectPointOntoPlane=function(e,t,n){c(n)||(n=new u);let i=Mo.getPointDistance(e,t),o=u.multiplyByScalar(e.normal,i,R7);return u.subtract(t,o,n)};var v7=new O,P7=new se,M7=new u;Mo.transform=function(e,t,n){let i=e.normal,o=e.distance,r=O.inverseTranspose(t,v7),a=se.fromElements(i.x,i.y,i.z,o,P7);a=O.multiplyByVector(r,a,a);let s=u.fromCartesian4(a,M7);return a=se.divideByScalar(a,u.magnitude(s),a),Mo.fromCartesian4(a,n)};Mo.clone=function(e,t){return c(t)?(u.clone(e.normal,t.normal),t.distance=e.distance,t):new Mo(e.normal,e.distance)};Mo.equals=function(e,t){return e.distance===t.distance&&u.equals(e.normal,t.normal)};Mo.ORIGIN_XY_PLANE=Object.freeze(new Mo(u.UNIT_Z,0));Mo.ORIGIN_YZ_PLANE=Object.freeze(new Mo(u.UNIT_X,0));Mo.ORIGIN_ZX_PLANE=Object.freeze(new Mo(u.UNIT_Y,0));var Ft=Mo;var _T={};_T.calculateACMR=function(e){e=e??k.EMPTY_OBJECT;let t=e.indices,n=e.maximumIndex,i=e.cacheSize??24,o=t.length;if(!c(n)){n=0;let s=0,A=t[s];for(;s<o;)A>n&&(n=A),++s,A=t[s]}let r=[];for(let s=0;s<n+1;s++)r[s]=0;let a=i+1;for(let s=0;s<o;++s)a-r[t[s]]>i&&(r[t[s]]=a,++a);return(a-i+1)/(o/3)};_T.tipsify=function(e){e=e??k.EMPTY_OBJECT;let t=e.indices,n=e.maximumIndex,i=e.cacheSize??24,o;function r(d,B,T,R){for(;B.length>=1;){let L=B[B.length-1];if(B.splice(B.length-1,1),d[L].numLiveTriangles>0)return L}for(;o<R;){if(d[o].numLiveTriangles>0)return++o,o-1;++o}return-1}function a(d,B,T,R,L,G,q){let z=-1,K,ie=-1,le=0;for(;le<T.length;){let de=T[le];R[de].numLiveTriangles&&(K=0,L-R[de].timeStamp+2*R[de].numLiveTriangles<=B&&(K=L-R[de].timeStamp),(K>ie||ie===-1)&&(ie=K,z=de)),++le}return z===-1?r(R,G,d,q):z}let s=t.length,A=0,l=0,f=t[l],h=s;if(c(n))A=n+1;else{for(;l<h;)f>A&&(A=f),++l,f=t[l];if(A===-1)return 0;++A}let m=[],p;for(p=0;p<A;p++)m[p]={numLiveTriangles:0,timeStamp:0,vertexTriangles:[]};l=0;let g=0;for(;l<h;)m[t[l]].vertexTriangles.push(g),++m[t[l]].numLiveTriangles,m[t[l+1]].vertexTriangles.push(g),++m[t[l+1]].numLiveTriangles,m[t[l+2]].vertexTriangles.push(g),++m[t[l+2]].numLiveTriangles,++g,l+=3;let C=0,_=i+1;o=1;let E=[],I=[],y,b,x=0,S=[],P=s/3,D=[];for(p=0;p<P;p++)D[p]=!1;let Q,v;for(;C!==-1;){E=[],b=m[C],v=b.vertexTriangles.length;for(let d=0;d<v;++d)if(g=b.vertexTriangles[d],!D[g]){D[g]=!0,l=g+g+g;for(let B=0;B<3;++B)Q=t[l],E.push(Q),I.push(Q),S[x]=Q,++x,y=m[Q],--y.numLiveTriangles,_-y.timeStamp>i&&(y.timeStamp=_,++_),++l}C=a(t,i,E,m,_,I,A)}return S};var sO=_T;var Jr={};function WI(e,t,n,i,o){e[t++]=n,e[t++]=i,e[t++]=i,e[t++]=o,e[t++]=o,e[t]=n}function O7(e){let t=e.length,n=t/3*6,i=Be.createTypedArray(t,n),o=0;for(let r=0;r<t;r+=3,o+=6)WI(i,o,e[r],e[r+1],e[r+2]);return i}function L7(e){let t=e.length;if(t>=3){let n=(t-2)*6,i=Be.createTypedArray(t,n);WI(i,0,e[0],e[1],e[2]);let o=6;for(let r=3;r<t;++r,o+=6)WI(i,o,e[r-1],e[r],e[r-2]);return i}return new Uint16Array}function N7(e){if(e.length>0){let t=e.length-1,n=(t-1)*6,i=Be.createTypedArray(t,n),o=e[0],r=0;for(let a=1;a<t;++a,r+=6)WI(i,r,o,e[a],e[a+1]);return i}return new Uint16Array}Jr.toWireframe=function(e){let t=e.indices;if(c(t)){switch(e.primitiveType){case Ce.TRIANGLES:e.indices=O7(t);break;case Ce.TRIANGLE_STRIP:e.indices=L7(t);break;case Ce.TRIANGLE_FAN:e.indices=N7(t);break}e.primitiveType=Ce.LINES}return e};Jr.createLineSegmentsForVectors=function(e,t,n){t=t??"normal",n=n??1e4;let i=e.attributes.position.values,o=e.attributes[t].values,r=i.length,a=new Float64Array(2*r),s=0;for(let f=0;f<r;f+=3)a[s++]=i[f],a[s++]=i[f+1],a[s++]=i[f+2],a[s++]=i[f]+o[f]*n,a[s++]=i[f+1]+o[f+1]*n,a[s++]=i[f+2]+o[f+2]*n;let A,l=e.boundingSphere;return c(l)&&(A=new ee(l.center,l.radius+n)),new ze({attributes:{position:new ue({componentDatatype:N.DOUBLE,componentsPerAttribute:3,values:a})},primitiveType:Ce.LINES,boundingSphere:A})};Jr.createAttributeLocations=function(e){let t=["position","positionHigh","positionLow","position3DHigh","position3DLow","position2DHigh","position2DLow","pickColor","normal","st","tangent","bitangent","extrudeDirection","compressedAttributes"],n=e.attributes,i={},o=0,r,a=t.length;for(r=0;r<a;++r){let s=t[r];c(n[s])&&(i[s]=o++)}for(let s in n)n.hasOwnProperty(s)&&!c(i[s])&&(i[s]=o++);return i};Jr.reorderForPreVertexCache=function(e){let t=ze.computeNumberOfVertices(e),n=e.indices;if(c(n)){let i=new Int32Array(t);for(let m=0;m<t;m++)i[m]=-1;let o=n,r=o.length,a=Be.createTypedArray(t,r),s=0,A=0,l=0,f;for(;s<r;)f=i[o[s]],f!==-1?a[A]=f:(f=o[s],i[f]=l,a[A]=l,++l),++s,++A;e.indices=a;let h=e.attributes;for(let m in h)if(h.hasOwnProperty(m)&&c(h[m])&&c(h[m].values)){let p=h[m],g=p.values,C=0,_=p.componentsPerAttribute,E=N.createTypedArray(p.componentDatatype,l*_);for(;C<t;){let I=i[C];if(I!==-1)for(let y=0;y<_;y++)E[_*I+y]=g[_*C+y];++C}p.values=E}}return e};Jr.reorderForPostVertexCache=function(e,t){let n=e.indices;if(e.primitiveType===Ce.TRIANGLES&&c(n)){let i=n.length,o=0;for(let r=0;r<i;r++)n[r]>o&&(o=n[r]);e.indices=sO.tipsify({indices:n,maximumIndex:o,cacheSize:t})}return e};function cO(e){let t={};for(let n in e)if(e.hasOwnProperty(n)&&c(e[n])&&c(e[n].values)){let i=e[n];t[n]=new ue({componentDatatype:i.componentDatatype,componentsPerAttribute:i.componentsPerAttribute,normalize:i.normalize,values:[]})}return t}function F7(e,t,n){for(let i in t)if(t.hasOwnProperty(i)&&c(t[i])&&c(t[i].values)){let o=t[i];for(let r=0;r<o.componentsPerAttribute;++r)e[i].values.push(o.values[n*o.componentsPerAttribute+r])}}Jr.fitToUnsignedShortIndices=function(e){let t=[],n=ze.computeNumberOfVertices(e);if(c(e.indices)&&n>=w.SIXTY_FOUR_KILOBYTES){let i=[],o=[],r=0,a=cO(e.attributes),s=e.indices,A=s.length,l;e.primitiveType===Ce.TRIANGLES?l=3:e.primitiveType===Ce.LINES?l=2:e.primitiveType===Ce.POINTS&&(l=1);for(let f=0;f<A;f+=l){for(let h=0;h<l;++h){let m=s[f+h],p=i[m];c(p)||(p=r++,i[m]=p,F7(a,e.attributes,m)),o.push(p)}r+l>=w.SIXTY_FOUR_KILOBYTES&&(t.push(new ze({attributes:a,indices:o,primitiveType:e.primitiveType,boundingSphere:e.boundingSphere,boundingSphereCV:e.boundingSphereCV})),i=[],o=[],r=0,a=cO(e.attributes))}o.length!==0&&t.push(new ze({attributes:a,indices:o,primitiveType:e.primitiveType,boundingSphere:e.boundingSphere,boundingSphereCV:e.boundingSphereCV}))}else t.push(e);return t};var AO=new u,k7=new ae;Jr.projectTo2D=function(e,t,n,i,o){let r=e.attributes[t];o=c(o)?o:new Ai;let a=o.ellipsoid,s=r.values,A=new Float64Array(s.length),l=0;for(let f=0;f<s.length;f+=3){let h=u.fromArray(s,f,AO),m=a.cartesianToCartographic(h,k7),p=o.project(m,AO);A[l++]=p.x,A[l++]=p.y,A[l++]=p.z}return e.attributes[n]=r,e.attributes[i]=new ue({componentDatatype:N.DOUBLE,componentsPerAttribute:3,values:A}),delete e.attributes[t],e};var ET={high:0,low:0};Jr.encodeAttribute=function(e,t,n,i){let o=e.attributes[t],r=o.values,a=r.length,s=new Float32Array(a),A=new Float32Array(a);for(let f=0;f<a;++f)xn.encode(r[f],ET),s[f]=ET.high,A[f]=ET.low;let l=o.componentsPerAttribute;return e.attributes[n]=new ue({componentDatatype:N.FLOAT,componentsPerAttribute:l,values:s}),e.attributes[i]=new ue({componentDatatype:N.FLOAT,componentsPerAttribute:l,values:A}),delete e.attributes[t],e};var Ic=new u;function IT(e,t){if(c(t)){let n=t.values,i=n.length;for(let o=0;o<i;o+=3)u.unpack(n,o,Ic),O.multiplyByPoint(e,Ic,Ic),u.pack(Ic,n,o)}}function yT(e,t){if(c(t)){let n=t.values,i=n.length;for(let o=0;o<i;o+=3)u.unpack(n,o,Ic),J.multiplyByVector(e,Ic,Ic),Ic=u.normalize(Ic,Ic),u.pack(Ic,n,o)}}var zI=new O,HI=new J;Jr.transformToWorldCoordinates=function(e){let t=e.modelMatrix;if(O.equals(t,O.IDENTITY))return e;let n=e.geometry.attributes;IT(t,n.position),IT(t,n.prevPosition),IT(t,n.nextPosition),(c(n.normal)||c(n.tangent)||c(n.bitangent))&&(O.inverse(t,zI),O.transpose(zI,zI),O.getMatrix3(zI,HI),yT(HI,n.normal),yT(HI,n.tangent),yT(HI,n.bitangent));let i=e.geometry.boundingSphere;return c(i)&&(e.geometry.boundingSphere=ee.transform(i,t,i)),e.modelMatrix=O.clone(O.IDENTITY),e};function U7(e,t){let n=e.length,i={},o=e[0][t].attributes,r;for(r in o)if(o.hasOwnProperty(r)&&c(o[r])&&c(o[r].values)){let a=o[r],s=a.values.length,A=!0;for(let l=1;l<n;++l){let f=e[l][t].attributes[r];if(!c(f)||a.componentDatatype!==f.componentDatatype||a.componentsPerAttribute!==f.componentsPerAttribute||a.normalize!==f.normalize){A=!1;break}s+=f.values.length}A&&(i[r]=new ue({componentDatatype:a.componentDatatype,componentsPerAttribute:a.componentsPerAttribute,normalize:a.normalize,values:N.createTypedArray(a.componentDatatype,s)}))}return i}var G7=new u;function bT(e,t){let n=e.length,i,o,r,a,s=e[0].modelMatrix,A=c(e[0][t].indices),l=e[0][t].primitiveType,f=U7(e,t),h,m,p;for(i in f)if(f.hasOwnProperty(i))for(h=f[i].values,a=0,o=0;o<n;++o)for(m=e[o][t].attributes[i].values,p=m.length,r=0;r<p;++r)h[a++]=m[r];let g;if(A){let I=0;for(o=0;o<n;++o)I+=e[o][t].indices.length;let y=ze.computeNumberOfVertices(new ze({attributes:f,primitiveType:Ce.POINTS})),b=Be.createTypedArray(y,I),x=0,S=0;for(o=0;o<n;++o){let P=e[o][t].indices,D=P.length;for(a=0;a<D;++a)b[x++]=S+P[a];S+=ze.computeNumberOfVertices(e[o][t])}g=b}let C=new u,_=0,E;for(o=0;o<n;++o){if(E=e[o][t].boundingSphere,!c(E)){C=void 0;break}u.add(E.center,C,C)}if(c(C))for(u.divideByScalar(C,n,C),o=0;o<n;++o){E=e[o][t].boundingSphere;let I=u.magnitude(u.subtract(E.center,C,G7))+E.radius;I>_&&(_=I)}return new ze({attributes:f,indices:g,primitiveType:l,boundingSphere:c(C)?new ee(C,_):void 0})}Jr.combineInstances=function(e){let t=[],n=[],i=e.length;for(let r=0;r<i;++r){let a=e[r];c(a.geometry)?t.push(a):c(a.westHemisphereGeometry)&&c(a.eastHemisphereGeometry)&&n.push(a)}let o=[];return t.length>0&&o.push(bT(t,"geometry")),n.length>0&&(o.push(bT(n,"westHemisphereGeometry")),o.push(bT(n,"eastHemisphereGeometry"))),o};var Ds=new u,Vg=new u,nm=new u,im=new u;Jr.computeNormal=function(e){let t=e.indices,n=e.attributes,i=n.position.values,o=n.position.values.length/3,r=t.length,a=new Array(o),s=new Array(r/3),A=new Array(r),l;for(l=0;l<o;l++)a[l]={indexOffset:0,count:0,currentCount:0};let f=0;for(l=0;l<r;l+=3){let g=t[l],C=t[l+1],_=t[l+2],E=g*3,I=C*3,y=_*3;Vg.x=i[E],Vg.y=i[E+1],Vg.z=i[E+2],nm.x=i[I],nm.y=i[I+1],nm.z=i[I+2],im.x=i[y],im.y=i[y+1],im.z=i[y+2],a[g].count++,a[C].count++,a[_].count++,u.subtract(nm,Vg,nm),u.subtract(im,Vg,im),s[f]=u.cross(nm,im,new u),f++}let h=0;for(l=0;l<o;l++)a[l].indexOffset+=h,h+=a[l].count;f=0;let m;for(l=0;l<r;l+=3){m=a[t[l]];let g=m.indexOffset+m.currentCount;A[g]=f,m.currentCount++,m=a[t[l+1]],g=m.indexOffset+m.currentCount,A[g]=f,m.currentCount++,m=a[t[l+2]],g=m.indexOffset+m.currentCount,A[g]=f,m.currentCount++,f++}let p=new Float32Array(o*3);for(l=0;l<o;l++){let g=l*3;if(m=a[l],u.clone(u.ZERO,Ds),m.count>0){for(f=0;f<m.count;f++)u.add(Ds,s[A[m.indexOffset+f]],Ds);u.equalsEpsilon(u.ZERO,Ds,w.EPSILON10)&&u.clone(s[A[m.indexOffset]],Ds)}u.equalsEpsilon(u.ZERO,Ds,w.EPSILON10)&&(Ds.z=1),u.normalize(Ds,Ds),p[g]=Ds.x,p[g+1]=Ds.y,p[g+2]=Ds.z}return e.attributes.normal=new ue({componentDatatype:N.FLOAT,componentsPerAttribute:3,values:p}),e};var z7=new u,lO=new u,H7=new u;Jr.computeTangentAndBitangent=function(e){let t=e.attributes,n=e.indices,i=e.attributes.position.values,o=e.attributes.normal.values,r=e.attributes.st.values,a=e.attributes.position.values.length/3,s=n.length,A=new Array(a*3),l;for(l=0;l<A.length;l++)A[l]=0;let f,h,m;for(l=0;l<s;l+=3){let C=n[l],_=n[l+1],E=n[l+2];f=C*3,h=_*3,m=E*3;let I=C*2,y=_*2,b=E*2,x=i[f],S=i[f+1],P=i[f+2],D=r[I],Q=r[I+1],v=r[y+1]-Q,d=r[b+1]-Q,B=1/((r[y]-D)*d-(r[b]-D)*v),T=(d*(i[h]-x)-v*(i[m]-x))*B,R=(d*(i[h+1]-S)-v*(i[m+1]-S))*B,L=(d*(i[h+2]-P)-v*(i[m+2]-P))*B;A[f]+=T,A[f+1]+=R,A[f+2]+=L,A[h]+=T,A[h+1]+=R,A[h+2]+=L,A[m]+=T,A[m+1]+=R,A[m+2]+=L}let p=new Float32Array(a*3),g=new Float32Array(a*3);for(l=0;l<a;l++){f=l*3,h=f+1,m=f+2;let C=u.fromArray(o,f,z7),_=u.fromArray(A,f,H7),E=u.dot(C,_);u.multiplyByScalar(C,E,lO),u.normalize(u.subtract(_,lO,_),_),p[f]=_.x,p[h]=_.y,p[m]=_.z,u.normalize(u.cross(C,_,_),_),g[f]=_.x,g[h]=_.y,g[m]=_.z}return e.attributes.tangent=new ue({componentDatatype:N.FLOAT,componentsPerAttribute:3,values:p}),e.attributes.bitangent=new ue({componentDatatype:N.FLOAT,componentsPerAttribute:3,values:g}),e};var jg=new U,Ec=new u,fO=new u,uO=new u,VI=new U;Jr.compressVertices=function(e){let t=e.attributes.extrudeDirection,n,i;if(c(t)){let S=t.values;i=S.length/3;let P=new Float32Array(i*2),D=0;for(n=0;n<i;++n){if(u.fromArray(S,n*3,Ec),u.equals(Ec,u.ZERO)){D+=2;continue}VI=ni.octEncodeInRange(Ec,65535,VI),P[D++]=VI.x,P[D++]=VI.y}return e.attributes.compressedAttributes=new ue({componentDatatype:N.FLOAT,componentsPerAttribute:2,values:P}),delete e.attributes.extrudeDirection,e}let o=e.attributes.normal,r=e.attributes.st,a=c(o),s=c(r);if(!a&&!s)return e;let A=e.attributes.tangent,l=e.attributes.bitangent,f=c(A),h=c(l),m,p,g,C;a&&(m=o.values),s&&(p=r.values),f&&(g=A.values),h&&(C=l.values),i=(a?m.length:p.length)/(a?3:2);let I=i,y=s&&a?2:1;y+=f||h?1:0,I*=y;let b=new Float32Array(I),x=0;for(n=0;n<i;++n){s&&(U.fromArray(p,n*2,jg),b[x++]=ni.compressTextureCoordinates(jg));let S=n*3;a&&c(g)&&c(C)?(u.fromArray(m,S,Ec),u.fromArray(g,S,fO),u.fromArray(C,S,uO),ni.octPack(Ec,fO,uO,jg),b[x++]=jg.x,b[x++]=jg.y):(a&&(u.fromArray(m,S,Ec),b[x++]=ni.octEncodeFloat(Ec)),f&&(u.fromArray(g,S,Ec),b[x++]=ni.octEncodeFloat(Ec)),h&&(u.fromArray(C,S,Ec),b[x++]=ni.octEncodeFloat(Ec)))}return e.attributes.compressedAttributes=new ue({componentDatatype:N.FLOAT,componentsPerAttribute:y,values:b}),a&&delete e.attributes.normal,s&&delete e.attributes.st,h&&delete e.attributes.bitangent,f&&delete e.attributes.tangent,e};function V7(e){if(c(e.indices))return e;let t=ze.computeNumberOfVertices(e),n=Be.createTypedArray(t,t);for(let i=0;i<t;++i)n[i]=i;return e.indices=n,e}function j7(e){let t=ze.computeNumberOfVertices(e),n=Be.createTypedArray(t,(t-2)*3);n[0]=1,n[1]=0,n[2]=2;let i=3;for(let o=3;o<t;++o)n[i++]=o-1,n[i++]=0,n[i++]=o;return e.indices=n,e.primitiveType=Ce.TRIANGLES,e}function Y7(e){let t=ze.computeNumberOfVertices(e),n=Be.createTypedArray(t,(t-2)*3);n[0]=0,n[1]=1,n[2]=2,t>3&&(n[3]=0,n[4]=2,n[5]=3);let i=6;for(let o=3;o<t-1;o+=2)n[i++]=o,n[i++]=o-1,n[i++]=o+1,o+2<t&&(n[i++]=o,n[i++]=o+1,n[i++]=o+2);return e.indices=n,e.primitiveType=Ce.TRIANGLES,e}function q7(e){if(c(e.indices))return e;let t=ze.computeNumberOfVertices(e),n=Be.createTypedArray(t,t);for(let i=0;i<t;++i)n[i]=i;return e.indices=n,e}function W7(e){let t=ze.computeNumberOfVertices(e),n=Be.createTypedArray(t,(t-1)*2);n[0]=0,n[1]=1;let i=2;for(let o=2;o<t;++o)n[i++]=o-1,n[i++]=o;return e.indices=n,e.primitiveType=Ce.LINES,e}function J7(e){let t=ze.computeNumberOfVertices(e),n=Be.createTypedArray(t,t*2);n[0]=0,n[1]=1;let i=2;for(let o=2;o<t;++o)n[i++]=o-1,n[i++]=o;return n[i++]=t-1,n[i]=0,e.indices=n,e.primitiveType=Ce.LINES,e}function K7(e){switch(e.primitiveType){case Ce.TRIANGLE_FAN:return j7(e);case Ce.TRIANGLE_STRIP:return Y7(e);case Ce.TRIANGLES:return V7(e);case Ce.LINE_STRIP:return W7(e);case Ce.LINE_LOOP:return J7(e);case Ce.LINES:return q7(e)}return e}function Ff(e,t){Math.abs(e.y)<w.EPSILON6&&(t?e.y=-w.EPSILON6:e.y=w.EPSILON6)}function X7(e,t,n){if(e.y!==0&&t.y!==0&&n.y!==0){Ff(e,e.y<0),Ff(t,t.y<0),Ff(n,n.y<0);return}let i=Math.abs(e.y),o=Math.abs(t.y),r=Math.abs(n.y),a;i>o?i>r?a=w.sign(e.y):a=w.sign(n.y):o>r?a=w.sign(t.y):a=w.sign(n.y);let s=a<0;Ff(e,s),Ff(t,s),Ff(n,s)}var dO=new u;function Qs(e,t,n,i){u.add(e,u.multiplyByScalar(u.subtract(t,e,dO),e.y/(e.y-t.y),dO),n),u.clone(n,i),Ff(n,!0),Ff(i,!1)}var Ed=new u,Id=new u,yd=new u,bd=new u,BT={positions:new Array(7),indices:new Array(9)};function Z7(e,t,n){if(e.x>=0||t.x>=0||n.x>=0)return;X7(e,t,n);let i=e.y<0,o=t.y<0,r=n.y<0,a=0;a+=i?1:0,a+=o?1:0,a+=r?1:0;let s=BT.indices;a===1?(s[1]=3,s[2]=4,s[5]=6,s[7]=6,s[8]=5,i?(Qs(e,t,Ed,yd),Qs(e,n,Id,bd),s[0]=0,s[3]=1,s[4]=2,s[6]=1):o?(Qs(t,n,Ed,yd),Qs(t,e,Id,bd),s[0]=1,s[3]=2,s[4]=0,s[6]=2):r&&(Qs(n,e,Ed,yd),Qs(n,t,Id,bd),s[0]=2,s[3]=0,s[4]=1,s[6]=0)):a===2&&(s[2]=4,s[4]=4,s[5]=3,s[7]=5,s[8]=6,i?o?r||(Qs(n,e,Ed,yd),Qs(n,t,Id,bd),s[0]=0,s[1]=1,s[3]=0,s[6]=2):(Qs(t,n,Ed,yd),Qs(t,e,Id,bd),s[0]=2,s[1]=0,s[3]=2,s[6]=1):(Qs(e,t,Ed,yd),Qs(e,n,Id,bd),s[0]=1,s[1]=2,s[3]=1,s[6]=0));let A=BT.positions;return A[0]=e,A[1]=t,A[2]=n,A.length=3,(a===1||a===2)&&(A[3]=Ed,A[4]=Id,A[5]=yd,A[6]=bd,A.length=7),BT}function hO(e,t){let n=e.attributes;if(n.position.values.length===0)return;for(let o in n)if(n.hasOwnProperty(o)&&c(n[o])&&c(n[o].values)){let r=n[o];r.values=N.createTypedArray(r.componentDatatype,r.values)}let i=ze.computeNumberOfVertices(e);return e.indices=Be.createTypedArray(i,e.indices),t&&(e.boundingSphere=ee.fromVertices(n.position.values)),e}function rm(e){let t=e.attributes,n={};for(let i in t)if(t.hasOwnProperty(i)&&c(t[i])&&c(t[i].values)){let o=t[i];n[i]=new ue({componentDatatype:o.componentDatatype,componentsPerAttribute:o.componentsPerAttribute,normalize:o.normalize,values:[]})}return new ze({attributes:n,indices:[],primitiveType:e.primitiveType})}function wT(e,t,n){let i=c(e.geometry.boundingSphere);t=hO(t,i),n=hO(n,i),c(n)&&!c(t)?e.geometry=n:!c(n)&&c(t)?e.geometry=t:(e.westHemisphereGeometry=t,e.eastHemisphereGeometry=n,e.geometry=void 0)}function DT(e,t){let n=new e,i=new e,o=new e;return function(r,a,s,A,l,f,h,m){let p=e.fromArray(l,r*t,n),g=e.fromArray(l,a*t,i),C=e.fromArray(l,s*t,o);e.multiplyByScalar(p,A.x,p),e.multiplyByScalar(g,A.y,g),e.multiplyByScalar(C,A.z,C);let _=e.add(p,g,p);e.add(_,C,_),m&&e.normalize(_,_),e.pack(_,f,h*t)}}var $7=DT(se,4),qI=DT(u,3),EO=DT(U,2),e$=function(e,t,n,i,o,r,a){let s=o[e]*i.x,A=o[t]*i.y,l=o[n]*i.z;r[a]=s+A+l>w.EPSILON6?1:0},Yg=new u,xT=new u,TT=new u,t$=new u;function jI(e,t,n,i,o,r,a,s,A,l,f,h,m,p,g,C){if(!c(r)&&!c(a)&&!c(s)&&!c(A)&&!c(l)&&p===0)return;let _=u.fromArray(o,e*3,Yg),E=u.fromArray(o,t*3,xT),I=u.fromArray(o,n*3,TT),y=JM(i,_,E,I,t$);if(c(y)){if(c(r)&&qI(e,t,n,y,r,h.normal.values,C,!0),c(l)){let b=u.fromArray(l,e*3,Yg),x=u.fromArray(l,t*3,xT),S=u.fromArray(l,n*3,TT);u.multiplyByScalar(b,y.x,b),u.multiplyByScalar(x,y.y,x),u.multiplyByScalar(S,y.z,S);let P;!u.equals(b,u.ZERO)||!u.equals(x,u.ZERO)||!u.equals(S,u.ZERO)?(P=u.add(b,x,b),u.add(P,S,P),u.normalize(P,P)):(P=Yg,P.x=0,P.y=0,P.z=0),u.pack(P,h.extrudeDirection.values,C*3)}if(c(f)&&e$(e,t,n,y,f,h.applyOffset.values,C),c(a)&&qI(e,t,n,y,a,h.tangent.values,C,!0),c(s)&&qI(e,t,n,y,s,h.bitangent.values,C,!0),c(A)&&EO(e,t,n,y,A,h.st.values,C),p>0)for(let b=0;b<p;b++){let x=m[b];n$(e,t,n,y,C,g[x],h[x])}}}function n$(e,t,n,i,o,r,a){let s=r.componentsPerAttribute,A=r.values,l=a.values;switch(s){case 4:$7(e,t,n,i,A,l,o,!1);break;case 3:qI(e,t,n,i,A,l,o,!1);break;case 2:EO(e,t,n,i,A,l,o,!1);break;default:l[o]=A[e]*i.x+A[t]*i.y+A[n]*i.z}}function pA(e,t,n,i,o,r){let a=e.position.values.length/3;if(o!==-1){let s=i[o],A=n[s];return A===-1?(n[s]=a,e.position.values.push(r.x,r.y,r.z),t.push(a),a):(t.push(A),A)}return e.position.values.push(r.x,r.y,r.z),t.push(a),a}var i$={position:!0,normal:!0,bitangent:!0,tangent:!0,st:!0,extrudeDirection:!0,applyOffset:!0};function mO(e){let t=e.geometry,n=t.attributes,i=n.position.values,o=c(n.normal)?n.normal.values:void 0,r=c(n.bitangent)?n.bitangent.values:void 0,a=c(n.tangent)?n.tangent.values:void 0,s=c(n.st)?n.st.values:void 0,A=c(n.extrudeDirection)?n.extrudeDirection.values:void 0,l=c(n.applyOffset)?n.applyOffset.values:void 0,f=t.indices,h=[];for(let P in n)n.hasOwnProperty(P)&&!i$[P]&&c(n[P])&&h.push(P);let m=h.length,p=rm(t),g=rm(t),C,_,E,I,y,b=[];b.length=i.length/3;let x=[];for(x.length=i.length/3,y=0;y<b.length;++y)b[y]=-1,x[y]=-1;let S=f.length;for(y=0;y<S;y+=3){let P=f[y],D=f[y+1],Q=f[y+2],v=u.fromArray(i,P*3),d=u.fromArray(i,D*3),B=u.fromArray(i,Q*3),T=Z7(v,d,B);if(c(T)&&T.positions.length>3){let R=T.positions,L=T.indices,G=L.length;for(let q=0;q<G;++q){let z=L[q],K=R[z];K.y<0?(C=g.attributes,_=g.indices,E=b):(C=p.attributes,_=p.indices,E=x),I=pA(C,_,E,f,z<3?y+z:-1,K),jI(P,D,Q,K,i,o,a,r,s,A,l,C,h,m,n,I)}}else c(T)&&(v=T.positions[0],d=T.positions[1],B=T.positions[2]),v.y<0?(C=g.attributes,_=g.indices,E=b):(C=p.attributes,_=p.indices,E=x),I=pA(C,_,E,f,y,v),jI(P,D,Q,v,i,o,a,r,s,A,l,C,h,m,n,I),I=pA(C,_,E,f,y+1,d),jI(P,D,Q,d,i,o,a,r,s,A,l,C,h,m,n,I),I=pA(C,_,E,f,y+2,B),jI(P,D,Q,B,i,o,a,r,s,A,l,C,h,m,n,I)}wT(e,g,p)}var IO=Ft.fromPointNormal(u.ZERO,u.UNIT_Y),o$=new u,r$=new u;function om(e,t,n,i,o,r,a){if(!c(a))return;let s=u.fromArray(i,e*3,Yg);u.equalsEpsilon(s,n,w.EPSILON10)?r.applyOffset.values[o]=a[e]:r.applyOffset.values[o]=a[t]}function pO(e){let t=e.geometry,n=t.attributes,i=n.position.values,o=c(n.applyOffset)?n.applyOffset.values:void 0,r=t.indices,a=rm(t),s=rm(t),A,l=r.length,f=[];f.length=i.length/3;let h=[];for(h.length=i.length/3,A=0;A<f.length;++A)f[A]=-1,h[A]=-1;for(A=0;A<l;A+=2){let m=r[A],p=r[A+1],g=u.fromArray(i,m*3,Yg),C=u.fromArray(i,p*3,xT),_;Math.abs(g.y)<w.EPSILON6&&(g.y<0?g.y=-w.EPSILON6:g.y=w.EPSILON6),Math.abs(C.y)<w.EPSILON6&&(C.y<0?C.y=-w.EPSILON6:C.y=w.EPSILON6);let E=a.attributes,I=a.indices,y=h,b=s.attributes,x=s.indices,S=f,P=Ni.lineSegmentPlane(g,C,IO,TT);if(c(P)){let D=u.multiplyByScalar(u.UNIT_Y,5*w.EPSILON9,o$);g.y<0&&(u.negate(D,D),E=s.attributes,I=s.indices,y=f,b=a.attributes,x=a.indices,S=h);let Q=u.add(P,D,r$);_=pA(E,I,y,r,A,g),om(m,p,g,i,_,E,o),_=pA(E,I,y,r,-1,Q),om(m,p,Q,i,_,E,o),u.negate(D,D),u.add(P,D,Q),_=pA(b,x,S,r,-1,Q),om(m,p,Q,i,_,b,o),_=pA(b,x,S,r,A+1,C),om(m,p,C,i,_,b,o)}else{let D,Q,v;g.y<0?(D=s.attributes,Q=s.indices,v=f):(D=a.attributes,Q=a.indices,v=h),_=pA(D,Q,v,r,A,g),om(m,p,g,i,_,D,o),_=pA(D,Q,v,r,A+1,C),om(m,p,C,i,_,D,o)}}wT(e,s,a)}var gO=new U,a$=new U,yO=new u,bO=new u,ST=new u,s$=new u,c$=new u,A$=new u,CO=new se;function _O(e){let t=e.attributes,n=t.position.values,i=t.prevPosition.values,o=t.nextPosition.values,r=n.length;for(let a=0;a<r;a+=3){let s=u.unpack(n,a,yO);if(s.x>0)continue;let A=u.unpack(i,a,bO);(s.y<0&&A.y>0||s.y>0&&A.y<0)&&(a-3>0?(i[a]=n[a-3],i[a+1]=n[a-2],i[a+2]=n[a-1]):u.pack(s,i,a));let l=u.unpack(o,a,ST);(s.y<0&&l.y>0||s.y>0&&l.y<0)&&(a+3<r?(o[a]=n[a+3],o[a+1]=n[a+4],o[a+2]=n[a+5]):u.pack(s,o,a))}}var l$=5*w.EPSILON9,YI=w.EPSILON6;function f$(e){let t=e.geometry,n=t.attributes,i=n.position.values,o=n.prevPosition.values,r=n.nextPosition.values,a=n.expandAndWidth.values,s=c(n.st)?n.st.values:void 0,A=c(n.color)?n.color.values:void 0,l=rm(t),f=rm(t),h,m,p,g=!1,C=i.length/3;for(h=0;h<C;h+=4){let _=h,E=h+2,I=u.fromArray(i,_*3,yO),y=u.fromArray(i,E*3,bO);if(Math.abs(I.y)<YI)for(I.y=YI*(y.y<0?-1:1),i[h*3+1]=I.y,i[(h+1)*3+1]=I.y,m=_*3;m<_*3+12;m+=3)o[m]=i[h*3],o[m+1]=i[h*3+1],o[m+2]=i[h*3+2];if(Math.abs(y.y)<YI)for(y.y=YI*(I.y<0?-1:1),i[(h+2)*3+1]=y.y,i[(h+3)*3+1]=y.y,m=_*3;m<_*3+12;m+=3)r[m]=i[(h+2)*3],r[m+1]=i[(h+2)*3+1],r[m+2]=i[(h+2)*3+2];let b=l.attributes,x=l.indices,S=f.attributes,P=f.indices,D=Ni.lineSegmentPlane(I,y,IO,s$);if(c(D)){g=!0;let Q=u.multiplyByScalar(u.UNIT_Y,l$,c$);I.y<0&&(u.negate(Q,Q),b=f.attributes,x=f.indices,S=l.attributes,P=l.indices);let v=u.add(D,Q,A$);b.position.values.push(I.x,I.y,I.z,I.x,I.y,I.z),b.position.values.push(v.x,v.y,v.z),b.position.values.push(v.x,v.y,v.z),b.prevPosition.values.push(o[_*3],o[_*3+1],o[_*3+2]),b.prevPosition.values.push(o[_*3+3],o[_*3+4],o[_*3+5]),b.prevPosition.values.push(I.x,I.y,I.z,I.x,I.y,I.z),b.nextPosition.values.push(v.x,v.y,v.z),b.nextPosition.values.push(v.x,v.y,v.z),b.nextPosition.values.push(v.x,v.y,v.z),b.nextPosition.values.push(v.x,v.y,v.z),u.negate(Q,Q),u.add(D,Q,v),S.position.values.push(v.x,v.y,v.z),S.position.values.push(v.x,v.y,v.z),S.position.values.push(y.x,y.y,y.z,y.x,y.y,y.z),S.prevPosition.values.push(v.x,v.y,v.z),S.prevPosition.values.push(v.x,v.y,v.z),S.prevPosition.values.push(v.x,v.y,v.z),S.prevPosition.values.push(v.x,v.y,v.z),S.nextPosition.values.push(y.x,y.y,y.z,y.x,y.y,y.z),S.nextPosition.values.push(r[E*3],r[E*3+1],r[E*3+2]),S.nextPosition.values.push(r[E*3+3],r[E*3+4],r[E*3+5]);let d=U.fromArray(a,_*2,gO),B=Math.abs(d.y);b.expandAndWidth.values.push(-1,B,1,B),b.expandAndWidth.values.push(-1,-B,1,-B),S.expandAndWidth.values.push(-1,B,1,B),S.expandAndWidth.values.push(-1,-B,1,-B);let T=u.magnitudeSquared(u.subtract(D,I,ST));if(T/=u.magnitudeSquared(u.subtract(y,I,ST)),c(A)){let R=se.fromArray(A,_*4,CO),L=se.fromArray(A,E*4,CO),G=w.lerp(R.x,L.x,T),q=w.lerp(R.y,L.y,T),z=w.lerp(R.z,L.z,T),K=w.lerp(R.w,L.w,T);for(m=_*4;m<_*4+8;++m)b.color.values.push(A[m]);for(b.color.values.push(G,q,z,K),b.color.values.push(G,q,z,K),S.color.values.push(G,q,z,K),S.color.values.push(G,q,z,K),m=E*4;m<E*4+8;++m)S.color.values.push(A[m])}if(c(s)){let R=U.fromArray(s,_*2,gO),L=U.fromArray(s,(h+3)*2,a$),G=w.lerp(R.x,L.x,T);for(m=_*2;m<_*2+4;++m)b.st.values.push(s[m]);for(b.st.values.push(G,R.y),b.st.values.push(G,L.y),S.st.values.push(G,R.y),S.st.values.push(G,L.y),m=E*2;m<E*2+4;++m)S.st.values.push(s[m])}p=b.position.values.length/3-4,x.push(p,p+2,p+1),x.push(p+1,p+2,p+3),p=S.position.values.length/3-4,P.push(p,p+2,p+1),P.push(p+1,p+2,p+3)}else{let Q,v;for(I.y<0?(Q=f.attributes,v=f.indices):(Q=l.attributes,v=l.indices),Q.position.values.push(I.x,I.y,I.z),Q.position.values.push(I.x,I.y,I.z),Q.position.values.push(y.x,y.y,y.z),Q.position.values.push(y.x,y.y,y.z),m=h*3;m<h*3+12;++m)Q.prevPosition.values.push(o[m]),Q.nextPosition.values.push(r[m]);for(m=h*2;m<h*2+8;++m)Q.expandAndWidth.values.push(a[m]),c(s)&&Q.st.values.push(s[m]);if(c(A))for(m=h*4;m<h*4+16;++m)Q.color.values.push(A[m]);p=Q.position.values.length/3-4,v.push(p,p+2,p+1),v.push(p+1,p+2,p+3)}}g&&(_O(f),_O(l)),wT(e,f,l)}Jr.splitLongitude=function(e){let t=e.geometry,n=t.boundingSphere;if(c(n)&&(n.center.x-n.radius>0||ee.intersectPlane(n,Ft.ORIGIN_ZX_PLANE)!==vt.INTERSECTING))return e;if(t.geometryType!==fl.NONE)switch(t.geometryType){case fl.POLYLINES:f$(e);break;case fl.TRIANGLES:mO(e);break;case fl.LINES:pO(e);break}else K7(t),t.primitiveType===Ce.TRIANGLES?mO(e):t.primitiveType===Ce.LINES&&pO(e);return e};var Mn=Jr;function qg(e,t,n,i,o,r,a,s,A,l,f){this._context=e,this._texture=t,this._textureTarget=n,this._targetFace=i,this._pixelDatatype=a,this._internalFormat=o,this._pixelFormat=r,this._size=s,this._preMultiplyAlpha=A,this._flipY=l,this._initialized=f}Object.defineProperties(qg.prototype,{pixelFormat:{get:function(){return this._pixelFormat}},pixelDatatype:{get:function(){return this._pixelDatatype}},_target:{get:function(){return this._targetFace}}});qg.prototype.copyFrom=function(e){let{xOffset:t=0,yOffset:n=0,source:i,skipColorSpaceConversion:o=!1}=e,{width:r,height:a}=i,s=this._context._gl,A=this._textureTarget,l=this._targetFace;s.activeTexture(s.TEXTURE0),s.bindTexture(A,this._texture);let f=i.arrayBufferView,h=this._size,m=this._pixelFormat,p=this._internalFormat,g=this._pixelDatatype,C=this._preMultiplyAlpha,_=this._flipY,E=4;c(f)&&(E=Bt.alignmentInBytes(m,g,r)),s.pixelStorei(s.UNPACK_ALIGNMENT,E),o?s.pixelStorei(s.UNPACK_COLORSPACE_CONVERSION_WEBGL,s.NONE):s.pixelStorei(s.UNPACK_COLORSPACE_CONVERSION_WEBGL,s.BROWSER_DEFAULT_WEBGL);let I=!1;if(!this._initialized){let y;t===0&&n===0&&r===h&&a===h?(c(f)?(s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),s.pixelStorei(s.UNPACK_FLIP_Y_WEBGL,!1),_&&(f=Bt.flipY(f,m,g,h,h)),y=f):(s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,C),s.pixelStorei(s.UNPACK_FLIP_Y_WEBGL,_),y=i),I=!0):(s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),s.pixelStorei(s.UNPACK_FLIP_Y_WEBGL,!1),y=Bt.createTypedArray(m,g,h,h)),s.texImage2D(l,0,p,h,h,0,m,_t.toWebGLConstant(g,this._context),y),this._initialized=!0}I||(c(f)?(s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),s.pixelStorei(s.UNPACK_FLIP_Y_WEBGL,!1),_&&(f=Bt.flipY(f,m,g,r,a)),s.texSubImage2D(l,0,t,n,r,a,m,_t.toWebGLConstant(g,this._context),f)):(s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,C),s.pixelStorei(s.UNPACK_FLIP_Y_WEBGL,_),s.texSubImage2D(l,0,t,n,m,_t.toWebGLConstant(g,this._context),i))),s.bindTexture(A,null)};qg.prototype.copyFromFramebuffer=function(e,t,n,i,o,r){e=e??0,t=t??0,n=n??0,i=i??0,o=o??this._size,r=r??this._size;let a=this._context._gl,s=this._textureTarget;a.activeTexture(a.TEXTURE0),a.bindTexture(s,this._texture),a.copyTexSubImage2D(this._targetFace,0,e,t,n,i,o,r),a.bindTexture(s,null),this._initialized=!0};qg.prototype.copyMipmapFromFramebuffer=function(e,t,n,i,o){e=e??0,t=t??0,n=n??this._size,i=i??this._size,o=o??0;let r=this._context._gl,a=this._textureTarget;r.activeTexture(r.TEXTURE0),r.bindTexture(a,this._texture),r.copyTexImage2D(this._targetFace,o,this._internalFormat,e,t,n,i,0),r.bindTexture(a,null),this._initialized=!0};var BO=qg;var JI={DONT_CARE:V.DONT_CARE,FASTEST:V.FASTEST,NICEST:V.NICEST,validate:function(e){return e===JI.DONT_CARE||e===JI.FASTEST||e===JI.NICEST}},Bd=Object.freeze(JI);var KI={NEAREST:V.NEAREST,LINEAR:V.LINEAR};KI.validate=function(e){return e===KI.NEAREST||e===KI.LINEAR};var bo=Object.freeze(KI);var kf={NEAREST:V.NEAREST,LINEAR:V.LINEAR,NEAREST_MIPMAP_NEAREST:V.NEAREST_MIPMAP_NEAREST,LINEAR_MIPMAP_NEAREST:V.LINEAR_MIPMAP_NEAREST,NEAREST_MIPMAP_LINEAR:V.NEAREST_MIPMAP_LINEAR,LINEAR_MIPMAP_LINEAR:V.LINEAR_MIPMAP_LINEAR};kf.validate=function(e){return e===kf.NEAREST||e===kf.LINEAR||e===kf.NEAREST_MIPMAP_NEAREST||e===kf.LINEAR_MIPMAP_NEAREST||e===kf.NEAREST_MIPMAP_LINEAR||e===kf.LINEAR_MIPMAP_LINEAR};var tn=Object.freeze(kf);var XI={CLAMP_TO_EDGE:V.CLAMP_TO_EDGE,REPEAT:V.REPEAT,MIRRORED_REPEAT:V.MIRRORED_REPEAT,validate:function(e){return e===XI.CLAMP_TO_EDGE||e===XI.REPEAT||e===XI.MIRRORED_REPEAT}},mi=Object.freeze(XI);function Wg(e){e=e??k.EMPTY_OBJECT;let{wrapR:t=mi.CLAMP_TO_EDGE,wrapS:n=mi.CLAMP_TO_EDGE,wrapT:i=mi.CLAMP_TO_EDGE,minificationFilter:o=tn.LINEAR,magnificationFilter:r=bo.LINEAR,maximumAnisotropy:a=1}=e;this._wrapR=t,this._wrapS=n,this._wrapT=i,this._minificationFilter=o,this._magnificationFilter=r,this._maximumAnisotropy=a}Object.defineProperties(Wg.prototype,{wrapR:{get:function(){return this._wrapR}},wrapS:{get:function(){return this._wrapS}},wrapT:{get:function(){return this._wrapT}},minificationFilter:{get:function(){return this._minificationFilter}},magnificationFilter:{get:function(){return this._magnificationFilter}},maximumAnisotropy:{get:function(){return this._maximumAnisotropy}}});Wg.equals=function(e,t){return e===t||c(e)&&c(t)&&e._wrapR===t._wrapR&&e._wrapS===t._wrapS&&e._wrapT===t._wrapT&&e._minificationFilter===t._minificationFilter&&e._magnificationFilter===t._magnificationFilter&&e._maximumAnisotropy===t._maximumAnisotropy};Wg.NEAREST=Object.freeze(new Wg({wrapR:mi.CLAMP_TO_EDGE,wrapS:mi.CLAMP_TO_EDGE,wrapT:mi.CLAMP_TO_EDGE,minificationFilter:tn.NEAREST,magnificationFilter:bo.NEAREST}));var dn=Wg;function u$(e,t,n,i){let o=c(t.vertexBuffer),r=c(t.value),a=t.value?t.value.length:t.componentsPerAttribute,s={index:t.index??n,enabled:t.enabled??!0,vertexBuffer:t.vertexBuffer,value:r?t.value.slice(0):void 0,componentsPerAttribute:a,componentDatatype:t.componentDatatype??N.FLOAT,normalize:t.normalize??!1,offsetInBytes:t.offsetInBytes??0,strideInBytes:t.strideInBytes??0,instanceDivisor:t.instanceDivisor??0};if(o)s.vertexAttrib=function(A){let l=this.index;A.bindBuffer(A.ARRAY_BUFFER,this.vertexBuffer._getBuffer()),A.vertexAttribPointer(l,this.componentsPerAttribute,this.componentDatatype,this.normalize,this.strideInBytes,this.offsetInBytes),A.enableVertexAttribArray(l),this.instanceDivisor>0&&(i.glVertexAttribDivisor(l,this.instanceDivisor),i._vertexAttribDivisors[l]=this.instanceDivisor,i._previousDrawInstanced=!0)},s.disableVertexAttribArray=function(A){A.disableVertexAttribArray(this.index),this.instanceDivisor>0&&i.glVertexAttribDivisor(n,0)};else{switch(s.componentsPerAttribute){case 1:s.vertexAttrib=function(A){A.vertexAttrib1fv(this.index,this.value)};break;case 2:s.vertexAttrib=function(A){A.vertexAttrib2fv(this.index,this.value)};break;case 3:s.vertexAttrib=function(A){A.vertexAttrib3fv(this.index,this.value)};break;case 4:s.vertexAttrib=function(A){A.vertexAttrib4fv(this.index,this.value)};break}s.disableVertexAttribArray=function(A){}}e.push(s)}function TO(e,t,n){for(let i=0;i<t.length;++i){let o=t[i];o.enabled&&o.vertexAttrib(e)}c(n)&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n._getBuffer())}function ml(e){e=e??k.EMPTY_OBJECT;let t=e.context,n=t._gl,i=e.attributes,o=e.indexBuffer,r,a=[],s=1,A=!1,l=!1,f=i.length;for(r=0;r<f;++r)u$(a,i[r],r,t);for(f=a.length,r=0;r<f;++r){let m=a[r];if(c(m.vertexBuffer)&&m.instanceDivisor===0){let p=m.strideInBytes||m.componentsPerAttribute*N.getSizeInBytes(m.componentDatatype);s=m.vertexBuffer.sizeInBytes/p;break}}for(r=0;r<f;++r)a[r].instanceDivisor>0&&(A=!0),c(a[r].value)&&(l=!0);let h;t.vertexArrayObject&&(h=t.glCreateVertexArray(),t.glBindVertexArray(h),TO(n,a,o),t.glBindVertexArray(null)),this._numberOfVertices=s,this._hasInstancedAttributes=A,this._hasConstantAttributes=l,this._context=t,this._gl=n,this._vao=h,this._attributes=a,this._indexBuffer=o}function xO(e){return e.values.length/e.componentsPerAttribute}function d$(e){return N.getSizeInBytes(e.componentDatatype)*e.componentsPerAttribute}function h$(e){let t,n,i,o=[];for(n in e)e.hasOwnProperty(n)&&c(e[n])&&c(e[n].values)&&(o.push(n),e[n].componentDatatype===N.DOUBLE&&(e[n].componentDatatype=N.FLOAT,e[n].values=N.createTypedArray(N.FLOAT,e[n].values)));let r,a=o.length;if(a>0)for(r=xO(e[o[0]]),t=1;t<a;++t){let l=xO(e[o[t]]);if(l!==r)throw new oe(`Each attribute list must have the same number of vertices.  Attribute ${o[t]} has a different number of vertices (${l.toString()}) than attribute ${o[0]} (${r.toString()}).`)}o.sort(function(l,f){return N.getSizeInBytes(e[f].componentDatatype)-N.getSizeInBytes(e[l].componentDatatype)});let s=0,A={};for(t=0;t<a;++t)n=o[t],i=e[n],A[n]=s,s+=d$(i);if(s>0){let l=N.getSizeInBytes(e[o[0]].componentDatatype),f=s%l;f!==0&&(s+=l-f);let h=r*s,m=new ArrayBuffer(h),p={};for(t=0;t<a;++t){n=o[t];let g=N.getSizeInBytes(e[n].componentDatatype);p[n]={pointer:N.createTypedArray(e[n].componentDatatype,m),index:A[n]/g,strideInComponentType:s/g}}for(t=0;t<r;++t)for(let g=0;g<a;++g){n=o[g],i=e[n];let C=i.values,_=p[n],E=_.pointer,I=i.componentsPerAttribute;for(let y=0;y<I;++y)E[_.index+y]=C[t*I+y];_.index+=_.strideInComponentType}return{buffer:m,offsetsInBytes:A,vertexSizeInBytes:s}}}ml.fromGeometry=function(e){e=e??k.EMPTY_OBJECT;let t=e.context,n=e.geometry??k.EMPTY_OBJECT,i=e.bufferUsage??Me.DYNAMIC_DRAW,o=e.attributeLocations??k.EMPTY_OBJECT,r=e.interleave??!1,a=e.vertexArrayAttributes,s,A,l,f=c(a)?a:[],h=n.attributes;if(r){let g=h$(h);if(c(g)){l=dt.createVertexBuffer({context:t,typedArray:g.buffer,usage:i});let C=g.offsetsInBytes,_=g.vertexSizeInBytes;for(s in h)h.hasOwnProperty(s)&&c(h[s])&&(A=h[s],c(A.values)?f.push({index:o[s],vertexBuffer:l,componentDatatype:A.componentDatatype,componentsPerAttribute:A.componentsPerAttribute,normalize:A.normalize,offsetInBytes:C[s],strideInBytes:_}):f.push({index:o[s],value:A.value,componentDatatype:A.componentDatatype,normalize:A.normalize}))}}else for(s in h)if(h.hasOwnProperty(s)&&c(h[s])){A=h[s];let g=A.componentDatatype;g===N.DOUBLE&&(g=N.FLOAT);let C={};l=void 0,c(A.values)&&(l=dt.createVertexBuffer({context:t,typedArray:N.createTypedArray(g,A.values),usage:i}),C={index:o[s],vertexBuffer:l,value:A.value,componentDatatype:g,componentsPerAttribute:A.componentsPerAttribute,normalize:A.normalize}),c(A.typedArray)&&(l=dt.createVertexBuffer({context:t,typedArray:A.typedArray,usage:i}),C={index:o[s],vertexBuffer:l,value:void 0,componentDatatype:g,componentsPerAttribute:st.getNumberOfComponents(A.type),normalize:A.normalized,instanceDivisor:A.instanceDivisor}),f.push(C)}let m,p=n.indices;return c(p)&&(ze.computeNumberOfVertices(n)>=w.SIXTY_FOUR_KILOBYTES&&t.elementIndexUint?m=dt.createIndexBuffer({context:t,typedArray:new Uint32Array(p),usage:i,indexDatatype:Be.UNSIGNED_INT}):m=dt.createIndexBuffer({context:t,typedArray:new Uint16Array(p),usage:i,indexDatatype:Be.UNSIGNED_SHORT})),new ml({context:t,attributes:f,indexBuffer:m})};Object.defineProperties(ml.prototype,{numberOfAttributes:{get:function(){return this._attributes.length}},numberOfVertices:{get:function(){return this._numberOfVertices}},indexBuffer:{get:function(){return this._indexBuffer}}});ml.prototype.getAttribute=function(e){return this._attributes[e]};function m$(e){let t=e._context,n=e._hasInstancedAttributes;if(!n&&!t._previousDrawInstanced)return;t._previousDrawInstanced=n;let i=t._vertexAttribDivisors,o=e._attributes,r=pn.maximumVertexAttributes,a;if(n){let s=o.length;for(a=0;a<s;++a){let A=o[a];if(A.enabled){let l=A.instanceDivisor,f=A.index;l!==i[f]&&(t.glVertexAttribDivisor(f,l),i[f]=l)}}}else for(a=0;a<r;++a)i[a]>0&&(t.glVertexAttribDivisor(a,0),i[a]=0)}function p$(e,t){let n=e._attributes,i=n.length;for(let o=0;o<i;++o){let r=n[o];r.enabled&&c(r.value)&&r.vertexAttrib(t)}}ml.prototype._bind=function(){c(this._vao)?(this._context.glBindVertexArray(this._vao),this._context.instancedArrays&&m$(this),this._hasConstantAttributes&&p$(this,this._gl)):TO(this._gl,this._attributes,this._indexBuffer)};ml.prototype._unBind=function(){if(c(this._vao))this._context.glBindVertexArray(null);else{let e=this._attributes,t=this._gl;for(let n=0;n<e.length;++n){let i=e[n];i.enabled&&i.disableVertexAttribArray(t)}this._indexBuffer&&t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)}};ml.prototype.isDestroyed=function(){return!1};ml.prototype.destroy=function(){let e=this._attributes;for(let n=0;n<e.length;++n){let i=e[n].vertexBuffer;c(i)&&!i.isDestroyed()&&i.vertexArrayDestroyable&&i.destroy()}let t=this._indexBuffer;return c(t)&&!t.isDestroyed()&&t.vertexArrayDestroyable&&t.destroy(),c(this._vao)&&this._context.glDeleteVertexArray(this._vao),pe(this)};var go=ml;function Qi(e){e=e??k.EMPTY_OBJECT;let{context:t,source:n,pixelFormat:i=Bt.RGBA,pixelDatatype:o=_t.UNSIGNED_BYTE,flipY:r=!0,skipColorSpaceConversion:a=!1,sampler:s=new dn}=e,A=e.preMultiplyAlpha||i===Bt.RGB||i===Bt.LUMINANCE,{width:l,height:f}=e;c(n)&&({width:l,height:f}=n.positiveX);let h=l,m=Bt.textureSizeInBytes(i,o,h,h)*6,p=Bt.toInternalFormat(i,o,t),g=t._gl,C=g.TEXTURE_CUBE_MAP,_=g.createTexture();this._context=t,this._textureFilterAnisotropic=t._textureFilterAnisotropic,this._textureTarget=C,this._texture=_,this._pixelFormat=i,this._pixelDatatype=o,this._size=h,this._hasMipmap=!1,this._sizeInBytes=m,this._preMultiplyAlpha=A,this._flipY=r;let E=c(n);function I(y){return new BO(t,_,C,y,p,i,o,h,A,r,E)}this._positiveX=I(g.TEXTURE_CUBE_MAP_POSITIVE_X),this._negativeX=I(g.TEXTURE_CUBE_MAP_NEGATIVE_X),this._positiveY=I(g.TEXTURE_CUBE_MAP_POSITIVE_Y),this._negativeY=I(g.TEXTURE_CUBE_MAP_NEGATIVE_Y),this._positiveZ=I(g.TEXTURE_CUBE_MAP_POSITIVE_Z),this._negativeZ=I(g.TEXTURE_CUBE_MAP_NEGATIVE_Z),this._sampler=s,SO(this,s),g.activeTexture(g.TEXTURE0),g.bindTexture(C,_),a?g.pixelStorei(g.UNPACK_COLORSPACE_CONVERSION_WEBGL,g.NONE):g.pixelStorei(g.UNPACK_COLORSPACE_CONVERSION_WEBGL,g.BROWSER_DEFAULT_WEBGL);for(let y of Qi.faceNames())QT(this[y],n?.[y],0);g.bindTexture(C,null)}Qi.prototype.copyFace=function(e,t,n,i){let o=e.context,r=new Ts({context:o,colorTextures:[t],destroyAttachments:!1});r._bind(),this[n].copyMipmapFromFramebuffer(0,0,t.width,t.height,i??0),r._unBind(),r.destroy()};Qi.FaceName=Object.freeze({POSITIVEX:"positiveX",NEGATIVEX:"negativeX",POSITIVEY:"positiveY",NEGATIVEY:"negativeY",POSITIVEZ:"positiveZ",NEGATIVEZ:"negativeZ"});function*g$(){yield Qi.FaceName.POSITIVEX,yield Qi.FaceName.NEGATIVEX,yield Qi.FaceName.POSITIVEY,yield Qi.FaceName.NEGATIVEY,yield Qi.FaceName.POSITIVEZ,yield Qi.FaceName.NEGATIVEZ}Qi.faceNames=function(){return g$()};function QT(e,t,n){n=n??0;let i=e._targetFace,o=Math.max(Math.floor(e._size/2**n),1),r=e._pixelFormat,a=e._pixelDatatype,s=e._internalFormat,A=e._flipY,l=e._preMultiplyAlpha,f=e._context,h=f._gl;if(!c(t)){h.texImage2D(i,n,s,o,o,0,r,_t.toWebGLConstant(a,f),null);return}let{arrayBufferView:m}=t,p=4;c(m)&&(p=Bt.alignmentInBytes(r,a,o)),h.pixelStorei(h.UNPACK_ALIGNMENT,p),c(m)?(h.pixelStorei(h.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),h.pixelStorei(h.UNPACK_FLIP_Y_WEBGL,!1),A&&(m=Bt.flipY(m,r,a,o,o)),h.texImage2D(i,n,s,o,o,0,r,_t.toWebGLConstant(a,f),m)):(h.pixelStorei(h.UNPACK_PREMULTIPLY_ALPHA_WEBGL,l),h.pixelStorei(h.UNPACK_FLIP_Y_WEBGL,A),h.texImage2D(i,n,s,r,_t.toWebGLConstant(a,f),t))}Qi.loadFace=QT;Object.defineProperties(Qi.prototype,{positiveX:{get:function(){return this._positiveX}},negativeX:{get:function(){return this._negativeX}},positiveY:{get:function(){return this._positiveY}},negativeY:{get:function(){return this._negativeY}},positiveZ:{get:function(){return this._positiveZ}},negativeZ:{get:function(){return this._negativeZ}},sampler:{get:function(){return this._sampler},set:function(e){SO(this,e),this._sampler=e}},pixelFormat:{get:function(){return this._pixelFormat}},pixelDatatype:{get:function(){return this._pixelDatatype}},width:{get:function(){return this._size}},height:{get:function(){return this._size}},sizeInBytes:{get:function(){return this._hasMipmap?Math.floor(this._sizeInBytes*4/3):this._sizeInBytes}},preMultiplyAlpha:{get:function(){return this._preMultiplyAlpha}},flipY:{get:function(){return this._flipY}},_target:{get:function(){return this._textureTarget}}});Qi.getDirection=function(e,t){switch(e){case Qi.FaceName.POSITIVEX:return u.clone(u.UNIT_X,t);case Qi.FaceName.NEGATIVEX:return u.negate(u.UNIT_X,t);case Qi.FaceName.POSITIVEY:return u.clone(u.UNIT_Y,t);case Qi.FaceName.NEGATIVEY:return u.negate(u.UNIT_Y,t);case Qi.FaceName.POSITIVEZ:return u.clone(u.UNIT_Z,t);case Qi.FaceName.NEGATIVEZ:return u.negate(u.UNIT_Z,t)}};function SO(e,t){let{minificationFilter:n,magnificationFilter:i}=t,o=[tn.NEAREST_MIPMAP_NEAREST,tn.NEAREST_MIPMAP_LINEAR,tn.LINEAR_MIPMAP_NEAREST,tn.LINEAR_MIPMAP_LINEAR].includes(n),r=e._context,a=e._pixelDatatype;(a===_t.FLOAT&&!r.textureFloatLinear||a===_t.HALF_FLOAT&&!r.textureHalfFloatLinear)&&(n=o?tn.NEAREST_MIPMAP_NEAREST:tn.NEAREST,i=bo.NEAREST);let s=r._gl,A=e._textureTarget;s.activeTexture(s.TEXTURE0),s.bindTexture(A,e._texture),s.texParameteri(A,s.TEXTURE_MIN_FILTER,n),s.texParameteri(A,s.TEXTURE_MAG_FILTER,i),s.texParameteri(A,s.TEXTURE_WRAP_S,t.wrapS),s.texParameteri(A,s.TEXTURE_WRAP_T,t.wrapT),c(e._textureFilterAnisotropic)&&s.texParameteri(A,e._textureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,t.maximumAnisotropy),s.bindTexture(A,null)}Qi.prototype.loadMipmaps=function(e,t){t=t??!1;let n=this._context._gl,i=this._texture,o=this._textureTarget;n.activeTexture(n.TEXTURE0),n.bindTexture(o,i),t?n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,n.NONE):n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,n.BROWSER_DEFAULT_WEBGL);for(let r=0;r<e.length;r++){let a=e[r],s=r+1;for(let A of Qi.faceNames())QT(this[A],a[A],s)}n.bindTexture(o,null),this._hasMipmap=!0};Qi.prototype.generateMipmap=function(e){e=e??Bd.DONT_CARE,this._hasMipmap=!0;let t=this._context._gl,n=this._textureTarget;t.hint(t.GENERATE_MIPMAP_HINT,e),t.activeTexture(t.TEXTURE0),t.bindTexture(n,this._texture),t.generateMipmap(n),t.bindTexture(n,null)};Qi.createVertexArray=function(e){let t=Gg.createGeometry(Gg.fromDimensions({dimensions:new u(2,2,2),vertexFormat:ge.POSITION_ONLY})),n=this._attributeLocations=Mn.createAttributeLocations(t);return go.fromGeometry({context:e,geometry:t,attributeLocations:n,bufferUsage:Me.STATIC_DRAW})};Qi.prototype.isDestroyed=function(){return!1};Qi.prototype.destroy=function(){return this._context._gl.deleteTexture(this._texture),this._positiveX=pe(this._positiveX),this._negativeX=pe(this._negativeX),this._positiveY=pe(this._positiveY),this._negativeY=pe(this._negativeY),this._positiveZ=pe(this._positiveZ),this._negativeZ=pe(this._negativeZ),pe(this)};var Wa=Qi;var wO=`/**
 * A built-in GLSL floating-point constant for converting radians to degrees.
 *
 * @alias czm_degreesPerRadian
 * @glslConstant
 *
 * @see CesiumMath.DEGREES_PER_RADIAN
 *
 * @example
 * // GLSL declaration
 * const float czm_degreesPerRadian = ...;
 *
 * // Example
 * float deg = czm_degreesPerRadian * rad;
 */
const float czm_degreesPerRadian = 57.29577951308232;
`;var DO=`/**
 * A built-in GLSL vec2 constant for defining the depth range.
 * This is a workaround to a bug where IE11 does not implement gl_DepthRange.
 *
 * @alias czm_depthRange
 * @glslConstant
 *
 * @example
 * // GLSL declaration
 * float depthRangeNear = czm_depthRange.near;
 * float depthRangeFar = czm_depthRange.far;
 *
 */
const czm_depthRangeStruct czm_depthRange = czm_depthRangeStruct(0.0, 1.0);
`;var QO=`/**
 * 0.1
 *
 * @name czm_epsilon1
 * @glslConstant
 */
const float czm_epsilon1 = 0.1;
`;var RO=`/**
 * 0.01
 *
 * @name czm_epsilon2
 * @glslConstant
 */
const float czm_epsilon2 = 0.01;
`;var vO=`/**
 * 0.001
 *
 * @name czm_epsilon3
 * @glslConstant
 */
const float czm_epsilon3 = 0.001;
`;var PO=`/**
 * 0.0001
 *
 * @name czm_epsilon4
 * @glslConstant
 */
const float czm_epsilon4 = 0.0001;
`;var MO=`/**
 * 0.00001
 *
 * @name czm_epsilon5
 * @glslConstant
 */
const float czm_epsilon5 = 0.00001;
`;var OO=`/**
 * 0.000001
 *
 * @name czm_epsilon6
 * @glslConstant
 */
const float czm_epsilon6 = 0.000001;
`;var LO=`/**
 * 0.0000001
 *
 * @name czm_epsilon7
 * @glslConstant
 */
const float czm_epsilon7 = 0.0000001;
`;var NO=`/**
 * DOC_TBA
 *
 * @name czm_infinity
 * @glslConstant
 */
const float czm_infinity = 5906376272000.0;  // Distance from the Sun to Pluto in meters.  TODO: What is best given lowp, mediump, and highp?
`;var FO=`/**
 * A built-in GLSL floating-point constant for <code>1/pi</code>.
 *
 * @alias czm_oneOverPi
 * @glslConstant
 *
 * @see CesiumMath.ONE_OVER_PI
 *
 * @example
 * // GLSL declaration
 * const float czm_oneOverPi = ...;
 *
 * // Example
 * float pi = 1.0 / czm_oneOverPi;
 */
const float czm_oneOverPi = 0.3183098861837907;
`;var kO=`/**
 * A built-in GLSL floating-point constant for <code>1/2pi</code>.
 *
 * @alias czm_oneOverTwoPi
 * @glslConstant
 *
 * @see CesiumMath.ONE_OVER_TWO_PI
 *
 * @example
 * // GLSL declaration
 * const float czm_oneOverTwoPi = ...;
 *
 * // Example
 * float pi = 2.0 * czm_oneOverTwoPi;
 */
const float czm_oneOverTwoPi = 0.15915494309189535;
`;var UO=`/**
 * The automatic GLSL constant for {@link Pass#CESIUM_3D_TILE}
 *
 * @name czm_passCesium3DTile
 * @glslConstant
 *
 * @see czm_pass
 */
const float czm_passCesium3DTile = 4.0;
`;var GO=`/**
 * The automatic GLSL constant for {@link Pass#CESIUM_3D_TILE_CLASSIFICATION}
 *
 * @name czm_passCesium3DTileClassification
 * @glslConstant
 *
 * @see czm_pass
 */
const float czm_passCesium3DTileClassification = 5.0;
`;var zO=`/**
 * The automatic GLSL constant for {@link Pass#CESIUM_3D_TILE_CLASSIFICATION_IGNORE_SHOW}
 *
 * @name czm_passCesium3DTileClassificationIgnoreShow
 * @glslConstant
 *
 * @see czm_pass
 */
const float czm_passCesium3DTileClassificationIgnoreShow = 6.0;
`;var HO=`/**
 * The automatic GLSL constant for {@link Pass#CLASSIFICATION}
 *
 * @name czm_passClassification
 * @glslConstant
 *
 * @see czm_pass
 */
const float czm_passClassification = 7.0;
`;var VO=`/**
 * The automatic GLSL constant for {@link Pass#COMPUTE}
 *
 * @name czm_passCompute
 * @glslConstant
 *
 * @see czm_pass
 */
const float czm_passCompute = 1.0;
`;var jO=`/**
 * The automatic GLSL constant for {@link Pass#ENVIRONMENT}
 *
 * @name czm_passEnvironment
 * @glslConstant
 *
 * @see czm_pass
 */
const float czm_passEnvironment = 0.0;
`;var YO=`/**
 * The automatic GLSL constant for {@link Pass#GAUSSIAN_SPLATS}
 *
 * @name czm_passGaussianSplats
 * @glslConstant
 *
 * @see czm_pass
 */
const float czm_passGaussianSplats = 10.0;
`;var qO=`/**
 * The automatic GLSL constant for {@link Pass#GLOBE}
 *
 * @name czm_passGlobe
 * @glslConstant
 *
 * @see czm_pass
 */
const float czm_passGlobe = 2.0;
`;var WO=`/**
 * The automatic GLSL constant for {@link Pass#OPAQUE}
 *
 * @name czm_passOpaque
 * @glslConstant
 *
 * @see czm_pass
 */
const float czm_passOpaque = 7.0;
`;var JO=`/**
 * The automatic GLSL constant for {@link Pass#OVERLAY}
 *
 * @name czm_passOverlay
 * @glslConstant
 *
 * @see czm_pass
 */
const float czm_passOverlay = 11.0;
`;var KO=`/**
 * The automatic GLSL constant for {@link Pass#TERRAIN_CLASSIFICATION}
 *
 * @name czm_passTerrainClassification
 * @glslConstant
 *
 * @see czm_pass
 */
const float czm_passTerrainClassification = 3.0;
`;var XO=`/**
 * The automatic GLSL constant for {@link Pass#TRANSLUCENT}
 *
 * @name czm_passTranslucent
 * @glslConstant
 *
 * @see czm_pass
 */
const float czm_passTranslucent = 8.0;
`;var ZO=`/**
 * The automatic GLSL constant for {@link Pass#VOXELS}
 *
 * @name czm_passVoxels
 * @glslConstant
 *
 * @see czm_pass
 */
const float czm_passVoxels = 9.0;
`;var $O=`/**
 * A built-in GLSL floating-point constant for <code>Math.PI</code>.
 *
 * @alias czm_pi
 * @glslConstant
 *
 * @see CesiumMath.PI
 *
 * @example
 * // GLSL declaration
 * const float czm_pi = ...;
 *
 * // Example
 * float twoPi = 2.0 * czm_pi;
 */
const float czm_pi = 3.141592653589793;
`;var eL=`/**
 * A built-in GLSL floating-point constant for <code>pi/4</code>.
 *
 * @alias czm_piOverFour
 * @glslConstant
 *
 * @see CesiumMath.PI_OVER_FOUR
 *
 * @example
 * // GLSL declaration
 * const float czm_piOverFour = ...;
 *
 * // Example
 * float pi = 4.0 * czm_piOverFour;
 */
const float czm_piOverFour = 0.7853981633974483;
`;var tL=`/**
 * A built-in GLSL floating-point constant for <code>pi/6</code>.
 *
 * @alias czm_piOverSix
 * @glslConstant
 *
 * @see CesiumMath.PI_OVER_SIX
 *
 * @example
 * // GLSL declaration
 * const float czm_piOverSix = ...;
 *
 * // Example
 * float pi = 6.0 * czm_piOverSix;
 */
const float czm_piOverSix = 0.5235987755982988;
`;var nL=`/**
 * A built-in GLSL floating-point constant for <code>pi/3</code>.
 *
 * @alias czm_piOverThree
 * @glslConstant
 *
 * @see CesiumMath.PI_OVER_THREE
 *
 * @example
 * // GLSL declaration
 * const float czm_piOverThree = ...;
 *
 * // Example
 * float pi = 3.0 * czm_piOverThree;
 */
const float czm_piOverThree = 1.0471975511965976;
`;var iL=`/**
 * A built-in GLSL floating-point constant for <code>pi/2</code>.
 *
 * @alias czm_piOverTwo
 * @glslConstant
 *
 * @see CesiumMath.PI_OVER_TWO
 *
 * @example
 * // GLSL declaration
 * const float czm_piOverTwo = ...;
 *
 * // Example
 * float pi = 2.0 * czm_piOverTwo;
 */
const float czm_piOverTwo = 1.5707963267948966;
`;var oL=`/**
 * A built-in GLSL floating-point constant for converting degrees to radians.
 *
 * @alias czm_radiansPerDegree
 * @glslConstant
 *
 * @see CesiumMath.RADIANS_PER_DEGREE
 *
 * @example
 * // GLSL declaration
 * const float czm_radiansPerDegree = ...;
 *
 * // Example
 * float rad = czm_radiansPerDegree * deg;
 */
const float czm_radiansPerDegree = 0.017453292519943295;
`;var rL=`/**
 * The constant identifier for the 2D {@link SceneMode}
 *
 * @name czm_sceneMode2D
 * @glslConstant
 * @see czm_sceneMode
 * @see czm_sceneModeColumbusView
 * @see czm_sceneMode3D
 * @see czm_sceneModeMorphing
 */
const float czm_sceneMode2D = 2.0;
`;var aL=`/**
 * The constant identifier for the 3D {@link SceneMode}
 *
 * @name czm_sceneMode3D
 * @glslConstant
 * @see czm_sceneMode
 * @see czm_sceneMode2D
 * @see czm_sceneModeColumbusView
 * @see czm_sceneModeMorphing
 */
const float czm_sceneMode3D = 3.0;
`;var sL=`/**
 * The constant identifier for the Columbus View {@link SceneMode}
 *
 * @name czm_sceneModeColumbusView
 * @glslConstant
 * @see czm_sceneMode
 * @see czm_sceneMode2D
 * @see czm_sceneMode3D
 * @see czm_sceneModeMorphing
 */
const float czm_sceneModeColumbusView = 1.0;
`;var cL=`/**
 * The constant identifier for the Morphing {@link SceneMode}
 *
 * @name czm_sceneModeMorphing
 * @glslConstant
 * @see czm_sceneMode
 * @see czm_sceneMode2D
 * @see czm_sceneModeColumbusView
 * @see czm_sceneMode3D
 */
const float czm_sceneModeMorphing = 0.0;
`;var AL=`/**
 * A built-in GLSL floating-point constant for one solar radius.
 *
 * @alias czm_solarRadius
 * @glslConstant
 *
 * @see CesiumMath.SOLAR_RADIUS
 *
 * @example
 * // GLSL declaration
 * const float czm_solarRadius = ...;
 */
const float czm_solarRadius = 695500000.0;
`;var lL=`/**
 * A built-in GLSL floating-point constant for <code>3pi/2</code>.
 *
 * @alias czm_threePiOver2
 * @glslConstant
 *
 * @see CesiumMath.THREE_PI_OVER_TWO
 *
 * @example
 * // GLSL declaration
 * const float czm_threePiOver2 = ...;
 *
 * // Example
 * float pi = (2.0 / 3.0) * czm_threePiOver2;
 */
const float czm_threePiOver2 = 4.71238898038469;
`;var fL=`/**
 * A built-in GLSL floating-point constant for <code>2pi</code>.
 *
 * @alias czm_twoPi
 * @glslConstant
 *
 * @see CesiumMath.TWO_PI
 *
 * @example
 * // GLSL declaration
 * const float czm_twoPi = ...;
 *
 * // Example
 * float pi = czm_twoPi / 2.0;
 */
const float czm_twoPi = 6.283185307179586;
`;var uL=`/**
 * The maximum latitude, in radians, both North and South, supported by a Web Mercator
 * (EPSG:3857) projection.  Technically, the Mercator projection is defined
 * for any latitude up to (but not including) 90 degrees, but it makes sense
 * to cut it off sooner because it grows exponentially with increasing latitude.
 * The logic behind this particular cutoff value, which is the one used by
 * Google Maps, Bing Maps, and Esri, is that it makes the projection
 * square.  That is, the rectangle is equal in the X and Y directions.
 *
 * The constant value is computed as follows:
 *   czm_pi * 0.5 - (2.0 * atan(exp(-czm_pi)))
 *
 * @name czm_webMercatorMaxLatitude
 * @glslConstant
 */
const float czm_webMercatorMaxLatitude = 1.4844222297453324;
`;var dL=`/**
 * @name czm_depthRangeStruct
 * @glslStruct
 */
struct czm_depthRangeStruct
{
    float near;
    float far;
};
`;var hL=`/**
 * Holds material information that can be used for lighting. Returned by all czm_getMaterial functions.
 *
 * @name czm_material
 * @glslStruct
 *
 * @property {vec3} diffuse Incoming light that scatters evenly in all directions.
 * @property {float} specular Intensity of incoming light reflecting in a single direction.
 * @property {float} shininess The sharpness of the specular reflection.  Higher values create a smaller, more focused specular highlight.
 * @property {vec3} normal Surface's normal in eye coordinates. It is used for effects such as normal mapping. The default is the surface's unmodified normal.
 * @property {vec3} emission Light emitted by the material equally in all directions. The default is vec3(0.0), which emits no light.
 * @property {float} alpha Alpha of this material. 0.0 is completely transparent; 1.0 is completely opaque.
 */
struct czm_material
{
    vec3 diffuse;
    float specular;
    float shininess;
    vec3 normal;
    vec3 emission;
    float alpha;
};
`;var mL=`/**
 * Used as input to every material's czm_getMaterial function.
 *
 * @name czm_materialInput
 * @glslStruct
 *
 * @property {float} s 1D texture coordinates.
 * @property {vec2} st 2D texture coordinates.
 * @property {vec3} str 3D texture coordinates.
 * @property {vec3} normalEC Unperturbed surface normal in eye coordinates.
 * @property {mat3} tangentToEyeMatrix Matrix for converting a tangent space normal to eye space.
 * @property {vec3} positionToEyeEC Vector from the fragment to the eye in eye coordinates.  The magnitude is the distance in meters from the fragment to the eye.
 * @property {float} height The height of the terrain in meters above or below the ellipsoid.  Only available for globe materials.
 * @property {float} slope The slope of the terrain in radians.  0 is flat; pi/2 is vertical.  Only available for globe materials.
 * @property {float} aspect The aspect of the terrain in radians.  0 is East, pi/2 is North, pi is West, 3pi/2 is South.  Only available for globe materials.
* @property {float} waterMask The value of the water mask. 0 is land, 1 is water. Only available for globe materials.
 */
struct czm_materialInput
{
    float s;
    vec2 st;
    vec3 str;
    vec3 normalEC;
    mat3 tangentToEyeMatrix;
    vec3 positionToEyeEC;
    float height;
    float slope;
    float aspect;
    float waterMask;
};
`;var pL=`/**
 * Struct for representing a material for a {@link Model}. The model
 * rendering pipeline will pass this struct between material, custom shaders,
 * and lighting stages. This is not to be confused with {@link czm_material}
 * which is used by the older Fabric materials system, although they are similar.
 * <p>
 * All color values (diffuse, specular, emissive) are in linear color space.
 * </p>
 *
 * @name czm_modelMaterial
 * @glslStruct
 *
 * @property {vec4} baseColor The base color of the material.
 * @property {vec3} diffuse Incoming light that scatters evenly in all directions.
 * @property {float} alpha Alpha of this material. 0.0 is completely transparent; 1.0 is completely opaque.
 * @property {vec3} specular Color of reflected light at normal incidence in PBR materials. This is sometimes referred to as f0 in the literature.
 * @property {float} roughness A number from 0.0 to 1.0 representing how rough the surface is. Values near 0.0 produce glossy surfaces, while values near 1.0 produce rough surfaces.
 * @property {vec3} normalEC Surface's normal in eye coordinates. It is used for effects such as normal mapping. The default is the surface's unmodified normal.
 * @property {float} occlusion Ambient occlusion recieved at this point on the material. 1.0 means fully lit, 0.0 means fully occluded.
 * @property {vec3} emissive Light emitted by the material equally in all directions. The default is vec3(0.0), which emits no light.
 */
struct czm_modelMaterial {
    vec4 baseColor;
    vec3 diffuse;
    float alpha;
    vec3 specular;
    float roughness;
    vec3 normalEC;
    float occlusion;
    vec3 emissive;
#ifdef USE_SPECULAR
    float specularWeight;
#endif
#ifdef USE_ANISOTROPY
    vec3 anisotropicT;
    vec3 anisotropicB;
    float anisotropyStrength;
#endif
#ifdef USE_CLEARCOAT
    float clearcoatFactor;
    float clearcoatRoughness;
    vec3 clearcoatNormal;
    // Add clearcoatF0 when KHR_materials_ior is implemented
#endif
};
`;var gL=`/**
 * Struct for representing the output of a custom vertex shader.
 * 
 * @name czm_modelVertexOutput
 * @glslStruct
 *
 * @see {@link CustomShader}
 * @see {@link Model}
 *
 * @property {vec3} positionMC The position of the vertex in model coordinates
 * @property {float} pointSize A custom value for gl_PointSize. This is only used for point primitives. 
 */
struct czm_modelVertexOutput {
  vec3 positionMC;
  float pointSize;
};
`;var CL=`/**
 * DOC_TBA
 *
 * @name czm_ray
 * @glslStruct
 */
struct czm_ray
{
    vec3 origin;
    vec3 direction;
};
`;var _L=`/**
 * DOC_TBA
 *
 * @name czm_raySegment
 * @glslStruct
 */
struct czm_raySegment
{
    float start;
    float stop;
};

/**
 * DOC_TBA
 *
 * @name czm_emptyRaySegment
 * @glslConstant 
 */
const czm_raySegment czm_emptyRaySegment = czm_raySegment(-czm_infinity, -czm_infinity);

/**
 * DOC_TBA
 *
 * @name czm_fullRaySegment
 * @glslConstant 
 */
const czm_raySegment czm_fullRaySegment = czm_raySegment(0.0, czm_infinity);
`;var EL=`struct czm_shadowParameters
{
#ifdef USE_CUBE_MAP_SHADOW
    vec3 texCoords;
#else
    vec2 texCoords;
#endif

    float depthBias;
    float depth;
    float nDotL;
    vec2 texelStepSize;
    float normalShadingSmooth;
    float darkness;
};
`;var IL=`/**
 * Converts an HSB color (hue, saturation, brightness) to RGB
 * HSB <-> RGB conversion with minimal branching: {@link http://lolengine.net/blog/2013/07/27/rgb-to-hsv-in-glsl}
 *
 * @name czm_HSBToRGB
 * @glslFunction
 * 
 * @param {vec3} hsb The color in HSB.
 *
 * @returns {vec3} The color in RGB.
 *
 * @example
 * vec3 hsb = czm_RGBToHSB(rgb);
 * hsb.z *= 0.1;
 * rgb = czm_HSBToRGB(hsb);
 */

const vec4 K_HSB2RGB = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);

vec3 czm_HSBToRGB(vec3 hsb)
{
    vec3 p = abs(fract(hsb.xxx + K_HSB2RGB.xyz) * 6.0 - K_HSB2RGB.www);
    return hsb.z * mix(K_HSB2RGB.xxx, clamp(p - K_HSB2RGB.xxx, 0.0, 1.0), hsb.y);
}
`;var yL=`/**
 * Converts an HSL color (hue, saturation, lightness) to RGB
 * HSL <-> RGB conversion: {@link http://www.chilliant.com/rgb2hsv.html}
 *
 * @name czm_HSLToRGB
 * @glslFunction
 * 
 * @param {vec3} rgb The color in HSL.
 *
 * @returns {vec3} The color in RGB.
 *
 * @example
 * vec3 hsl = czm_RGBToHSL(rgb);
 * hsl.z *= 0.1;
 * rgb = czm_HSLToRGB(hsl);
 */

vec3 hueToRGB(float hue)
{
    float r = abs(hue * 6.0 - 3.0) - 1.0;
    float g = 2.0 - abs(hue * 6.0 - 2.0);
    float b = 2.0 - abs(hue * 6.0 - 4.0);
    return clamp(vec3(r, g, b), 0.0, 1.0);
}

vec3 czm_HSLToRGB(vec3 hsl)
{
    vec3 rgb = hueToRGB(hsl.x);
    float c = (1.0 - abs(2.0 * hsl.z - 1.0)) * hsl.y;
    return (rgb - 0.5) * c + hsl.z;
}
`;var bL=`/**
 * Converts an RGB color to HSB (hue, saturation, brightness)
 * HSB <-> RGB conversion with minimal branching: {@link http://lolengine.net/blog/2013/07/27/rgb-to-hsv-in-glsl}
 *
 * @name czm_RGBToHSB
 * @glslFunction
 * 
 * @param {vec3} rgb The color in RGB.
 *
 * @returns {vec3} The color in HSB.
 *
 * @example
 * vec3 hsb = czm_RGBToHSB(rgb);
 * hsb.z *= 0.1;
 * rgb = czm_HSBToRGB(hsb);
 */

const vec4 K_RGB2HSB = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);

vec3 czm_RGBToHSB(vec3 rgb)
{
    vec4 p = mix(vec4(rgb.bg, K_RGB2HSB.wz), vec4(rgb.gb, K_RGB2HSB.xy), step(rgb.b, rgb.g));
    vec4 q = mix(vec4(p.xyw, rgb.r), vec4(rgb.r, p.yzx), step(p.x, rgb.r));

    float d = q.x - min(q.w, q.y);
    return vec3(abs(q.z + (q.w - q.y) / (6.0 * d + czm_epsilon7)), d / (q.x + czm_epsilon7), q.x);
}
`;var BL=`/**
 * Converts an RGB color to HSL (hue, saturation, lightness)
 * HSL <-> RGB conversion: {@link http://www.chilliant.com/rgb2hsv.html}
 *
 * @name czm_RGBToHSL
 * @glslFunction
 * 
 * @param {vec3} rgb The color in RGB.
 *
 * @returns {vec3} The color in HSL.
 *
 * @example
 * vec3 hsl = czm_RGBToHSL(rgb);
 * hsl.z *= 0.1;
 * rgb = czm_HSLToRGB(hsl);
 */
 
vec3 RGBtoHCV(vec3 rgb)
{
    // Based on work by Sam Hocevar and Emil Persson
    vec4 p = (rgb.g < rgb.b) ? vec4(rgb.bg, -1.0, 2.0 / 3.0) : vec4(rgb.gb, 0.0, -1.0 / 3.0);
    vec4 q = (rgb.r < p.x) ? vec4(p.xyw, rgb.r) : vec4(rgb.r, p.yzx);
    float c = q.x - min(q.w, q.y);
    float h = abs((q.w - q.y) / (6.0 * c + czm_epsilon7) + q.z);
    return vec3(h, c, q.x);
}

vec3 czm_RGBToHSL(vec3 rgb)
{
    vec3 hcv = RGBtoHCV(rgb);
    float l = hcv.z - hcv.y * 0.5;
    float s = hcv.y / (1.0 - abs(l * 2.0 - 1.0) + czm_epsilon7);
    return vec3(hcv.x, s, l);
}
`;var xL=`/**
 * Converts an RGB color to CIE Yxy.
 * <p>The conversion is described in
 * {@link http://content.gpwiki.org/index.php/D3DBook:High-Dynamic_Range_Rendering#Luminance_Transform|Luminance Transform}
 * </p>
 * 
 * @name czm_RGBToXYZ
 * @glslFunction
 * 
 * @param {vec3} rgb The color in RGB.
 *
 * @returns {vec3} The color in CIE Yxy.
 *
 * @example
 * vec3 xyz = czm_RGBToXYZ(rgb);
 * xyz.x = max(xyz.x - luminanceThreshold, 0.0);
 * rgb = czm_XYZToRGB(xyz);
 */
vec3 czm_RGBToXYZ(vec3 rgb)
{
    const mat3 RGB2XYZ = mat3(0.4124, 0.2126, 0.0193,
                              0.3576, 0.7152, 0.1192,
                              0.1805, 0.0722, 0.9505);
    vec3 xyz = RGB2XYZ * rgb;
    vec3 Yxy;
    Yxy.r = xyz.g;
    float temp = dot(vec3(1.0), xyz);
    Yxy.gb = xyz.rg / temp;
    return Yxy;
}
`;var TL=`/**
 * Converts a CIE Yxy color to RGB.
 * <p>The conversion is described in
 * {@link http://content.gpwiki.org/index.php/D3DBook:High-Dynamic_Range_Rendering#Luminance_Transform|Luminance Transform}
 * </p>
 * 
 * @name czm_XYZToRGB
 * @glslFunction
 * 
 * @param {vec3} Yxy The color in CIE Yxy.
 *
 * @returns {vec3} The color in RGB.
 *
 * @example
 * vec3 xyz = czm_RGBToXYZ(rgb);
 * xyz.x = max(xyz.x - luminanceThreshold, 0.0);
 * rgb = czm_XYZToRGB(xyz);
 */
vec3 czm_XYZToRGB(vec3 Yxy)
{
    const mat3 XYZ2RGB = mat3( 3.2405, -0.9693,  0.0556,
                              -1.5371,  1.8760, -0.2040,
                              -0.4985,  0.0416,  1.0572);
    vec3 xyz;
    xyz.r = Yxy.r * Yxy.g / Yxy.b;
    xyz.g = Yxy.r;
    xyz.b = Yxy.r * (1.0 - Yxy.g - Yxy.b) / Yxy.b;
    
    return XYZ2RGB * xyz;
}
`;var SL=`// See:
//    https://knarkowicz.wordpress.com/2016/01/06/aces-filmic-tone-mapping-curve/

vec3 czm_acesTonemapping(vec3 color) {
    float g = 0.985;
    float a = 0.065;
    float b = 0.0001;
    float c = 0.433;
    float d = 0.238;

    color = (color * (color + a) - b) / (color * (g * color + c) + d);

    color = clamp(color, 0.0, 1.0);

    return color;
}
`;var wL=`/**
 * @private
 */
float czm_alphaWeight(float a)
{
    float z = (gl_FragCoord.z - czm_viewportTransformation[3][2]) / czm_viewportTransformation[2][2];

    // See Weighted Blended Order-Independent Transparency for examples of different weighting functions:
    // http://jcgt.org/published/0002/02/09/
    return pow(a + 0.01, 4.0) + max(1e-2, min(3.0 * 1e3, 0.003 / (1e-5 + pow(abs(z) / 200.0, 4.0))));
}
`;var DL=`/**
 * Procedural anti-aliasing by blurring two colors that meet at a sharp edge.
 *
 * @name czm_antialias
 * @glslFunction
 *
 * @param {vec4} color1 The color on one side of the edge.
 * @param {vec4} color2 The color on the other side of the edge.
 * @param {vec4} currentcolor The current color, either <code>color1</code> or <code>color2</code>.
 * @param {float} dist The distance to the edge in texture coordinates.
 * @param {float} [fuzzFactor=0.1] Controls the blurriness between the two colors.
 * @returns {vec4} The anti-aliased color.
 *
 * @example
 * // GLSL declarations
 * vec4 czm_antialias(vec4 color1, vec4 color2, vec4 currentColor, float dist, float fuzzFactor);
 * vec4 czm_antialias(vec4 color1, vec4 color2, vec4 currentColor, float dist);
 *
 * // get the color for a material that has a sharp edge at the line y = 0.5 in texture space
 * float dist = abs(textureCoordinates.t - 0.5);
 * vec4 currentColor = mix(bottomColor, topColor, step(0.5, textureCoordinates.t));
 * vec4 color = czm_antialias(bottomColor, topColor, currentColor, dist, 0.1);
 */
vec4 czm_antialias(vec4 color1, vec4 color2, vec4 currentColor, float dist, float fuzzFactor)
{
    float val1 = clamp(dist / fuzzFactor, 0.0, 1.0);
    float val2 = clamp((dist - 0.5) / fuzzFactor, 0.0, 1.0);
    val1 = val1 * (1.0 - val2);
    val1 = val1 * val1 * (3.0 - (2.0 * val1));
    val1 = pow(val1, 0.5); //makes the transition nicer
    
    vec4 midColor = (color1 + color2) * 0.5;
    return mix(midColor, currentColor, val1);
}

vec4 czm_antialias(vec4 color1, vec4 color2, vec4 currentColor, float dist)
{
    return czm_antialias(color1, color2, currentColor, dist, 0.1);
}
`;var QL=`/**
 * Apply a HSB color shift to an RGB color.
 *
 * @param {vec3} rgb The color in RGB space.
 * @param {vec3} hsbShift The amount to shift each component. The xyz components correspond to hue, saturation, and brightness. Shifting the hue by +/- 1.0 corresponds to shifting the hue by a full cycle. Saturation and brightness are clamped between 0 and 1 after the adjustment
 * @param {bool} ignoreBlackPixels If true, black pixels will be unchanged. This is necessary in some shaders such as atmosphere-related effects.
 *
 * @return {vec3} The RGB color after shifting in HSB space and clamping saturation and brightness to a valid range.
 */
vec3 czm_applyHSBShift(vec3 rgb, vec3 hsbShift, bool ignoreBlackPixels) {
    // Convert rgb color to hsb
    vec3 hsb = czm_RGBToHSB(rgb);

    // Perform hsb shift
    // Hue cycles around so no clamp is needed.
    hsb.x += hsbShift.x; // hue
    hsb.y = clamp(hsb.y + hsbShift.y, 0.0, 1.0); // saturation

    // brightness
    //
    // Some shaders such as atmosphere-related effects need to leave black
    // pixels unchanged
    if (ignoreBlackPixels) {
        hsb.z = hsb.z > czm_epsilon7 ? hsb.z + hsbShift.z : 0.0;
    } else {
        hsb.z = hsb.z + hsbShift.z;
    }
    hsb.z = clamp(hsb.z, 0.0, 1.0);

    // Convert shifted hsb back to rgb
    return czm_HSBToRGB(hsb);
}
`;var RL=`/**
 * Approximately computes spherical coordinates given a normal.
 * Uses approximate inverse trigonometry for speed and consistency,
 * since inverse trigonometry can differ from vendor-to-vendor and when compared with the CPU.
 *
 * @name czm_approximateSphericalCoordinates
 * @glslFunction
 *
 * @param {vec3} normal arbitrary-length normal.
 *
 * @returns {vec2} Approximate latitude and longitude spherical coordinates.
 */
vec2 czm_approximateSphericalCoordinates(vec3 normal) {
    // Project into plane with vertical for latitude
    float latitudeApproximation = czm_fastApproximateAtan(sqrt(normal.x * normal.x + normal.y * normal.y), normal.z);
    float longitudeApproximation = czm_fastApproximateAtan(normal.x, normal.y);
    return vec2(latitudeApproximation, longitudeApproximation);
}
`;var vL=`/**
 * Compute a rational approximation to tanh(x)
 *
 * @param {float} x A real number input
 * @returns {float} An approximation for tanh(x)
*/
float czm_approximateTanh(float x) {
    float x2 = x * x;
    return max(-1.0, min(1.0, x * (27.0 + x2) / (27.0 + 9.0 * x2)));
}
`;var PL=`/**
 * Determines if the fragment is back facing
 *
 * @name czm_backFacing
 * @glslFunction 
 * 
 * @returns {bool} <code>true</code> if the fragment is back facing; otherwise, <code>false</code>.
 */
bool czm_backFacing()
{
    // !gl_FrontFacing doesn't work as expected on Mac/Intel so use the more verbose form instead. See https://github.com/CesiumGS/cesium/pull/8494.
    return gl_FrontFacing == false;
}
`;var ML=`/**
 * Branchless ternary operator to be used when it's inexpensive to explicitly
 * evaluate both possibilities for a float expression.
 *
 * @name czm_branchFreeTernary
 * @glslFunction
 *
 * @param {bool} comparison A comparison statement
 * @param {float} a Value to return if the comparison is true.
 * @param {float} b Value to return if the comparison is false.
 *
 * @returns {float} equivalent of comparison ? a : b
 */
float czm_branchFreeTernary(bool comparison, float a, float b) {
    float useA = float(comparison);
    return a * useA + b * (1.0 - useA);
}

/**
 * Branchless ternary operator to be used when it's inexpensive to explicitly
 * evaluate both possibilities for a vec2 expression.
 *
 * @name czm_branchFreeTernary
 * @glslFunction
 *
 * @param {bool} comparison A comparison statement
 * @param {vec2} a Value to return if the comparison is true.
 * @param {vec2} b Value to return if the comparison is false.
 *
 * @returns {vec2} equivalent of comparison ? a : b
 */
vec2 czm_branchFreeTernary(bool comparison, vec2 a, vec2 b) {
    float useA = float(comparison);
    return a * useA + b * (1.0 - useA);
}

/**
 * Branchless ternary operator to be used when it's inexpensive to explicitly
 * evaluate both possibilities for a vec3 expression.
 *
 * @name czm_branchFreeTernary
 * @glslFunction
 *
 * @param {bool} comparison A comparison statement
 * @param {vec3} a Value to return if the comparison is true.
 * @param {vec3} b Value to return if the comparison is false.
 *
 * @returns {vec3} equivalent of comparison ? a : b
 */
vec3 czm_branchFreeTernary(bool comparison, vec3 a, vec3 b) {
    float useA = float(comparison);
    return a * useA + b * (1.0 - useA);
}

/**
 * Branchless ternary operator to be used when it's inexpensive to explicitly
 * evaluate both possibilities for a vec4 expression.
 *
 * @name czm_branchFreeTernary
 * @glslFunction
 *
 * @param {bool} comparison A comparison statement
 * @param {vec3} a Value to return if the comparison is true.
 * @param {vec3} b Value to return if the comparison is false.
 *
 * @returns {vec3} equivalent of comparison ? a : b
 */
vec4 czm_branchFreeTernary(bool comparison, vec4 a, vec4 b) {
    float useA = float(comparison);
    return a * useA + b * (1.0 - useA);
}
`;var OL=`
vec4 czm_cascadeColor(vec4 weights)
{
    return vec4(1.0, 0.0, 0.0, 1.0) * weights.x +
           vec4(0.0, 1.0, 0.0, 1.0) * weights.y +
           vec4(0.0, 0.0, 1.0, 1.0) * weights.z +
           vec4(1.0, 0.0, 1.0, 1.0) * weights.w;
}
`;var LL=`
uniform vec4 shadowMap_cascadeDistances;

float czm_cascadeDistance(vec4 weights)
{
    return dot(shadowMap_cascadeDistances, weights);
}
`;var NL=`
uniform mat4 shadowMap_cascadeMatrices[4];

mat4 czm_cascadeMatrix(vec4 weights)
{
    return shadowMap_cascadeMatrices[0] * weights.x +
           shadowMap_cascadeMatrices[1] * weights.y +
           shadowMap_cascadeMatrices[2] * weights.z +
           shadowMap_cascadeMatrices[3] * weights.w;
}
`;var FL=`
uniform vec4 shadowMap_cascadeSplits[2];

vec4 czm_cascadeWeights(float depthEye)
{
    // One component is set to 1.0 and all others set to 0.0.
    vec4 near = step(shadowMap_cascadeSplits[0], vec4(depthEye));
    vec4 far = step(depthEye, shadowMap_cascadeSplits[1]);
    return near * far;
}
`;var kL=`float getSignedDistance(vec2 uv, highp sampler2D clippingDistance) {
    float signedDistance = texture(clippingDistance, uv).r;
    return (signedDistance - 0.5) * 2.0;
}

void czm_clipPolygons(highp sampler2D clippingDistance, int extentsLength, vec2 clippingPosition, int regionIndex) {
    // Position is completely outside of polygons bounds
    vec2 rectUv = clippingPosition;
    if (regionIndex < 0 || rectUv.x <= 0.0 || rectUv.y <= 0.0 || rectUv.x >= 1.0 || rectUv.y >= 1.0) {
        #ifdef CLIPPING_INVERSE 
            discard;
        #endif
        return;
    }

    vec2 clippingDistanceTextureDimensions = vec2(textureSize(clippingDistance, 0));
    vec2 sampleOffset = max(1.0 / clippingDistanceTextureDimensions, vec2(0.005));
    float dimension = float(extentsLength);
    if (extentsLength > 2) {
       dimension = ceil(log2(float(extentsLength)));
    }

    vec2 textureOffset = vec2(mod(float(regionIndex), dimension), floor(float(regionIndex) / dimension)) / dimension;
    vec2 uv = textureOffset + rectUv / dimension;

    float signedDistance = getSignedDistance(uv, clippingDistance);

    #ifdef CLIPPING_INVERSE
    if (signedDistance > 0.0)  {
        discard;
    }
    #else
    if (signedDistance < 0.0)  {
        discard;
    }
    #endif
}
`;var UL=`/**
 * DOC_TBA
 *
 * @name czm_columbusViewMorph
 * @glslFunction
 */
vec4 czm_columbusViewMorph(vec4 position2D, vec4 position3D, float time)
{
    // Just linear for now.
    vec3 p = mix(position2D.xyz, position3D.xyz, time);
    return vec4(p, 1.0);
}
`;var GL=`/**
 * Compute the atmosphere color, applying Rayleigh and Mie scattering. This
 * builtin uses automatic uniforms so the atmophere settings are synced with the
 * state of the Scene, even in other contexts like Model.
 *
 * @name czm_computeAtmosphereColor
 * @glslFunction
 *
 * @param {vec3} positionWC Position of the fragment in world coords (low precision)
 * @param {vec3} lightDirection Light direction from the sun or other light source.
 * @param {vec3} rayleighColor The Rayleigh scattering color computed by a scattering function
 * @param {vec3} mieColor The Mie scattering color computed by a scattering function
 * @param {float} opacity The opacity computed by a scattering function.
 */
vec4 czm_computeAtmosphereColor(
    vec3 positionWC,
    vec3 lightDirection,
    vec3 rayleighColor,
    vec3 mieColor,
    float opacity
) {
    // Setup the primary ray: from the camera position to the vertex position.
    vec3 cameraToPositionWC = positionWC - czm_viewerPositionWC;
    vec3 cameraToPositionWCDirection = normalize(cameraToPositionWC);

    float cosAngle = dot(cameraToPositionWCDirection, lightDirection);
    float cosAngleSq = cosAngle * cosAngle;

    float G = czm_atmosphereMieAnisotropy;
    float GSq = G * G;

    // The Rayleigh phase function.
    float rayleighPhase = 3.0 / (50.2654824574) * (1.0 + cosAngleSq);
    // The Mie phase function.
    float miePhase = 3.0 / (25.1327412287) * ((1.0 - GSq) * (cosAngleSq + 1.0)) / (pow(1.0 + GSq - 2.0 * cosAngle * G, 1.5) * (2.0 + GSq));

    // The final color is generated by combining the effects of the Rayleigh and Mie scattering.
    vec3 rayleigh = rayleighPhase * rayleighColor;
    vec3 mie = miePhase * mieColor;

    vec3 color = (rayleigh + mie) * czm_atmosphereLightIntensity;

    return vec4(color, opacity);
}

/**
 * Compute the atmosphere color, applying Rayleigh and Mie scattering. This
 * builtin uses automatic uniforms so the atmophere settings are synced with the
 * state of the Scene, even in other contexts like Model.
 *
 * @name czm_computeAtmosphereColor
 * @glslFunction
 *
 * @param {czm_ray} primaryRay Ray from the origin to sky fragment to in world coords (low precision)
 * @param {vec3} lightDirection Light direction from the sun or other light source.
 * @param {vec3} rayleighColor The Rayleigh scattering color computed by a scattering function
 * @param {vec3} mieColor The Mie scattering color computed by a scattering function
 * @param {float} opacity The opacity computed by a scattering function.
 */
vec4 czm_computeAtmosphereColor(
    czm_ray primaryRay,
    vec3 lightDirection,
    vec3 rayleighColor,
    vec3 mieColor,
    float opacity
) {
    vec3 direction = normalize(primaryRay.direction);

    float cosAngle = dot(direction, lightDirection);
    float cosAngleSq = cosAngle * cosAngle;

    float G = czm_atmosphereMieAnisotropy;
    float GSq = G * G;

    // The Rayleigh phase function.
    float rayleighPhase = 3.0 / (50.2654824574) * (1.0 + cosAngleSq);
    // The Mie phase function.
    float miePhase = 3.0 / (25.1327412287) * ((1.0 - GSq) * (cosAngleSq + 1.0)) / (pow(1.0 + GSq - 2.0 * cosAngle * G, 1.5) * (2.0 + GSq));

    // The final color is generated by combining the effects of the Rayleigh and Mie scattering.
    vec3 rayleigh = rayleighPhase * rayleighColor;
    vec3 mie = miePhase * mieColor;

    vec3 color = (rayleigh + mie) * czm_atmosphereLightIntensity;

    return vec4(color, opacity);
}

`;var zL=`/**
 * Compute atmosphere scattering for the ground atmosphere and fog. This method
 * uses automatic uniforms so it is always synced with the scene settings.
 *
 * @name czm_computeGroundAtmosphereScattering
 * @glslfunction
 *
 * @param {vec3} positionWC The position of the fragment in world coordinates.
 * @param {vec3} lightDirection The direction of the light to calculate the scattering from.
 * @param {vec3} rayleighColor The variable the Rayleigh scattering will be written to.
 * @param {vec3} mieColor The variable the Mie scattering will be written to.
 * @param {float} opacity The variable the transmittance will be written to.
 */
void czm_computeGroundAtmosphereScattering(vec3 positionWC, vec3 lightDirection, out vec3 rayleighColor, out vec3 mieColor, out float opacity) {
    vec3 cameraToPositionWC = positionWC - czm_viewerPositionWC;
    vec3 cameraToPositionWCDirection = normalize(cameraToPositionWC);
    czm_ray primaryRay = czm_ray(czm_viewerPositionWC, cameraToPositionWCDirection);

    float atmosphereInnerRadius = length(positionWC);

    czm_computeScattering(
        primaryRay,
        length(cameraToPositionWC),
        lightDirection,
        atmosphereInnerRadius,
        rayleighColor,
        mieColor,
        opacity
    );
}
`;var HL=`/**
 * Returns a position in model coordinates relative to eye taking into
 * account the current scene mode: 3D, 2D, or Columbus view.
 * <p>
 * This uses standard position attributes, <code>position3DHigh</code>, 
 * <code>position3DLow</code>, <code>position2DHigh</code>, and <code>position2DLow</code>, 
 * and should be used when writing a vertex shader for an {@link Appearance}.
 * </p>
 *
 * @name czm_computePosition
 * @glslFunction
 *
 * @returns {vec4} The position relative to eye.
 *
 * @example
 * vec4 p = czm_computePosition();
 * v_positionEC = (czm_modelViewRelativeToEye * p).xyz;
 * gl_Position = czm_modelViewProjectionRelativeToEye * p;
 *
 * @see czm_translateRelativeToEye
 */
vec4 czm_computePosition();
`;var VL=`/**
 * This function computes the colors contributed by Rayliegh and Mie scattering on a given ray, as well as
 * the transmittance value for the ray. This function uses automatic uniforms
 * so the atmosphere settings are always synced with the current scene.
 *
 * @name czm_computeScattering
 * @glslfunction
 *
 * @param {czm_ray} primaryRay The ray from the camera to the position.
 * @param {float} primaryRayLength The length of the primary ray.
 * @param {vec3} lightDirection The direction of the light to calculate the scattering from.
 * @param {vec3} rayleighColor The variable the Rayleigh scattering will be written to.
 * @param {vec3} mieColor The variable the Mie scattering will be written to.
 * @param {float} opacity The variable the transmittance will be written to.
 */
void czm_computeScattering(
    czm_ray primaryRay,
    float primaryRayLength,
    vec3 lightDirection,
    float atmosphereInnerRadius,
    out vec3 rayleighColor,
    out vec3 mieColor,
    out float opacity
) {
    const float ATMOSPHERE_THICKNESS = 111e3; // The thickness of the atmosphere in meters.
    const int PRIMARY_STEPS_MAX = 16; // Maximum number of times the ray from the camera to the world position (primary ray) is sampled.
    const int LIGHT_STEPS_MAX = 4; // Maximum number of times the light is sampled from the light source's intersection with the atmosphere to a sample position on the primary ray.

    // Initialize the default scattering amounts to 0.
    rayleighColor = vec3(0.0);
    mieColor = vec3(0.0);
    opacity = 0.0;

    float atmosphereOuterRadius = atmosphereInnerRadius + ATMOSPHERE_THICKNESS;

    vec3 origin = vec3(0.0);

    // Calculate intersection from the camera to the outer ring of the atmosphere.
    czm_raySegment primaryRayAtmosphereIntersect = czm_raySphereIntersectionInterval(primaryRay, origin, atmosphereOuterRadius);

    // Return empty colors if no intersection with the atmosphere geometry.
    if (primaryRayAtmosphereIntersect == czm_emptyRaySegment) {
        return;
    }

    // To deal with smaller values of PRIMARY_STEPS (e.g. 4)
    // we implement a split strategy: sky or horizon.
    // For performance reasons, instead of a if/else branch
    // a soft choice is implemented through a weight 0.0 <= w_stop_gt_lprl <= 1.0
    float x = 1e-7 * primaryRayAtmosphereIntersect.stop / length(primaryRayLength);
    // Value close to 0.0: close to the horizon
    // Value close to 1.0: above in the sky
    float w_stop_gt_lprl = 0.5 * (1.0 + czm_approximateTanh(x));

    // The ray should start from the first intersection with the outer atmopshere, or from the camera position, if it is inside the atmosphere.
    float start_0 = primaryRayAtmosphereIntersect.start;
    primaryRayAtmosphereIntersect.start = max(primaryRayAtmosphereIntersect.start, 0.0);
    // The ray should end at the exit from the atmosphere or at the distance to the vertex, whichever is smaller.
    primaryRayAtmosphereIntersect.stop = min(primaryRayAtmosphereIntersect.stop, length(primaryRayLength));

    // For the number of ray steps, distinguish inside or outside atmosphere (outer space)
    // (1) from outer space we have to use more ray steps to get a realistic rendering
    // (2) within atmosphere we need fewer steps for faster rendering
    float x_o_a = start_0 - ATMOSPHERE_THICKNESS; // ATMOSPHERE_THICKNESS used as an ad-hoc constant, no precise meaning here, only the order of magnitude matters
    float w_inside_atmosphere = 1.0 - 0.5 * (1.0 + czm_approximateTanh(x_o_a));
    int PRIMARY_STEPS = PRIMARY_STEPS_MAX - int(w_inside_atmosphere * 12.0); // Number of times the ray from the camera to the world position (primary ray) is sampled.
    int LIGHT_STEPS = LIGHT_STEPS_MAX - int(w_inside_atmosphere * 2.0); // Number of times the light is sampled from the light source's intersection with the atmosphere to a sample position on the primary ray.

    // Setup for sampling positions along the ray - starting from the intersection with the outer ring of the atmosphere.
    float rayPositionLength = primaryRayAtmosphereIntersect.start;
    // (1) Outside the atmosphere: constant rayStepLength
    // (2) Inside atmosphere: variable rayStepLength to compensate the rough rendering of the smaller number of ray steps
    float totalRayLength = primaryRayAtmosphereIntersect.stop - rayPositionLength;
    float rayStepLengthIncrease = w_inside_atmosphere * ((1.0 - w_stop_gt_lprl) * totalRayLength / (float(PRIMARY_STEPS * (PRIMARY_STEPS + 1)) / 2.0));
    float rayStepLength = max(1.0 - w_inside_atmosphere, w_stop_gt_lprl) * totalRayLength / max(7.0 * w_inside_atmosphere, float(PRIMARY_STEPS));

    vec3 rayleighAccumulation = vec3(0.0);
    vec3 mieAccumulation = vec3(0.0);
    vec2 opticalDepth = vec2(0.0);
    vec2 heightScale = vec2(czm_atmosphereRayleighScaleHeight, czm_atmosphereMieScaleHeight);

    // Sample positions on the primary ray.
    for (int i = 0; i < PRIMARY_STEPS_MAX; ++i) {

        // The loop should be: for (int i = 0; i < PRIMARY_STEPS; ++i) {...} but WebGL1 cannot
        // loop with non-constant condition, so it has to break early instead
        if (i >= PRIMARY_STEPS) {
            break;
        }

        // Calculate sample position along viewpoint ray.
        vec3 samplePosition = primaryRay.origin + primaryRay.direction * (rayPositionLength + rayStepLength);

        // Calculate height of sample position above ellipsoid.
        float sampleHeight = length(samplePosition) - atmosphereInnerRadius;

        // Calculate and accumulate density of particles at the sample position.
        vec2 sampleDensity = exp(-sampleHeight / heightScale) * rayStepLength;
        opticalDepth += sampleDensity;

        // Generate ray from the sample position segment to the light source, up to the outer ring of the atmosphere.
        czm_ray lightRay = czm_ray(samplePosition, lightDirection);
        czm_raySegment lightRayAtmosphereIntersect = czm_raySphereIntersectionInterval(lightRay, origin, atmosphereOuterRadius);

        float lightStepLength = lightRayAtmosphereIntersect.stop / float(LIGHT_STEPS);
        float lightPositionLength = 0.0;

        vec2 lightOpticalDepth = vec2(0.0);

        // Sample positions along the light ray, to accumulate incidence of light on the latest sample segment.
        for (int j = 0; j < LIGHT_STEPS_MAX; ++j) {

            // The loop should be: for (int j = 0; i < LIGHT_STEPS; ++j) {...} but WebGL1 cannot
            // loop with non-constant condition, so it has to break early instead
            if (j >= LIGHT_STEPS) {
                break;
            }

            // Calculate sample position along light ray.
            vec3 lightPosition = samplePosition + lightDirection * (lightPositionLength + lightStepLength * 0.5);

            // Calculate height of the light sample position above ellipsoid.
            float lightHeight = length(lightPosition) - atmosphereInnerRadius;

            // Calculate density of photons at the light sample position.
            lightOpticalDepth += exp(-lightHeight / heightScale) * lightStepLength;

            // Increment distance on light ray.
            lightPositionLength += lightStepLength;
        }

        // Compute attenuation via the primary ray and the light ray.
        vec3 attenuation = exp(-((czm_atmosphereMieCoefficient * (opticalDepth.y + lightOpticalDepth.y)) + (czm_atmosphereRayleighCoefficient * (opticalDepth.x + lightOpticalDepth.x))));

        // Accumulate the scattering.
        rayleighAccumulation += sampleDensity.x * attenuation;
        mieAccumulation += sampleDensity.y * attenuation;

        // Increment distance on primary ray.
        rayPositionLength += (rayStepLength += rayStepLengthIncrease);
    }

    // Compute the scattering amount.
    rayleighColor = czm_atmosphereRayleighCoefficient * rayleighAccumulation;
    mieColor = czm_atmosphereMieCoefficient * mieAccumulation;

    // Compute the transmittance i.e. how much light is passing through the atmosphere.
    opacity = length(exp(-((czm_atmosphereMieCoefficient * opticalDepth.y) + (czm_atmosphereRayleighCoefficient * opticalDepth.x))));
}
`;var jL=`/**
 * @private
 */
vec2 cordic(float angle)
{
// Scale the vector by the appropriate factor for the 24 iterations to follow.
    vec2 vector = vec2(6.0725293500888267e-1, 0.0);
// Iteration 1
    float sense = (angle < 0.0) ? -1.0 : 1.0;
 //   float factor = sense * 1.0;  // 2^-0
    mat2 rotation = mat2(1.0, sense, -sense, 1.0);
    vector = rotation * vector;
    angle -= sense * 7.8539816339744828e-1;  // atan(2^-0)
// Iteration 2
    sense = (angle < 0.0) ? -1.0 : 1.0;
    float factor = sense * 5.0e-1;  // 2^-1
    rotation[0][1] = factor;
    rotation[1][0] = -factor;
    vector = rotation * vector;
    angle -= sense * 4.6364760900080609e-1;  // atan(2^-1)
// Iteration 3
    sense = (angle < 0.0) ? -1.0 : 1.0;
    factor = sense * 2.5e-1;  // 2^-2
    rotation[0][1] = factor;
    rotation[1][0] = -factor;
    vector = rotation * vector;
    angle -= sense * 2.4497866312686414e-1;  // atan(2^-2)
// Iteration 4
    sense = (angle < 0.0) ? -1.0 : 1.0;
    factor = sense * 1.25e-1;  // 2^-3
    rotation[0][1] = factor;
    rotation[1][0] = -factor;
    vector = rotation * vector;
    angle -= sense * 1.2435499454676144e-1;  // atan(2^-3)
// Iteration 5
    sense = (angle < 0.0) ? -1.0 : 1.0;
    factor = sense * 6.25e-2;  // 2^-4
    rotation[0][1] = factor;
    rotation[1][0] = -factor;
    vector = rotation * vector;
    angle -= sense * 6.2418809995957350e-2;  // atan(2^-4)
// Iteration 6
    sense = (angle < 0.0) ? -1.0 : 1.0;
    factor = sense * 3.125e-2;  // 2^-5
    rotation[0][1] = factor;
    rotation[1][0] = -factor;
    vector = rotation * vector;
    angle -= sense * 3.1239833430268277e-2;  // atan(2^-5)
// Iteration 7
    sense = (angle < 0.0) ? -1.0 : 1.0;
    factor = sense * 1.5625e-2;  // 2^-6
    rotation[0][1] = factor;
    rotation[1][0] = -factor;
    vector = rotation * vector;
    angle -= sense * 1.5623728620476831e-2;  // atan(2^-6)
// Iteration 8
    sense = (angle < 0.0) ? -1.0 : 1.0;
    factor = sense * 7.8125e-3;  // 2^-7
    rotation[0][1] = factor;
    rotation[1][0] = -factor;
    vector = rotation * vector;
    angle -= sense * 7.8123410601011111e-3;  // atan(2^-7)
// Iteration 9
    sense = (angle < 0.0) ? -1.0 : 1.0;
    factor = sense * 3.90625e-3;  // 2^-8
    rotation[0][1] = factor;
    rotation[1][0] = -factor;
    vector = rotation * vector;
    angle -= sense * 3.9062301319669718e-3;  // atan(2^-8)
// Iteration 10
    sense = (angle < 0.0) ? -1.0 : 1.0;
    factor = sense * 1.953125e-3;  // 2^-9
    rotation[0][1] = factor;
    rotation[1][0] = -factor;
    vector = rotation * vector;
    angle -= sense * 1.9531225164788188e-3;  // atan(2^-9)
// Iteration 11
    sense = (angle < 0.0) ? -1.0 : 1.0;
    factor = sense * 9.765625e-4;  // 2^-10
    rotation[0][1] = factor;
    rotation[1][0] = -factor;
    vector = rotation * vector;
    angle -= sense * 9.7656218955931946e-4;  // atan(2^-10)
// Iteration 12
    sense = (angle < 0.0) ? -1.0 : 1.0;
    factor = sense * 4.8828125e-4;  // 2^-11
    rotation[0][1] = factor;
    rotation[1][0] = -factor;
    vector = rotation * vector;
    angle -= sense * 4.8828121119489829e-4;  // atan(2^-11)
// Iteration 13
    sense = (angle < 0.0) ? -1.0 : 1.0;
    factor = sense * 2.44140625e-4;  // 2^-12
    rotation[0][1] = factor;
    rotation[1][0] = -factor;
    vector = rotation * vector;
    angle -= sense * 2.4414062014936177e-4;  // atan(2^-12)
// Iteration 14
    sense = (angle < 0.0) ? -1.0 : 1.0;
    factor = sense * 1.220703125e-4;  // 2^-13
    rotation[0][1] = factor;
    rotation[1][0] = -factor;
    vector = rotation * vector;
    angle -= sense * 1.2207031189367021e-4;  // atan(2^-13)
// Iteration 15
    sense = (angle < 0.0) ? -1.0 : 1.0;
    factor = sense * 6.103515625e-5;  // 2^-14
    rotation[0][1] = factor;
    rotation[1][0] = -factor;
    vector = rotation * vector;
    angle -= sense * 6.1035156174208773e-5;  // atan(2^-14)
// Iteration 16
    sense = (angle < 0.0) ? -1.0 : 1.0;
    factor = sense * 3.0517578125e-5;  // 2^-15
    rotation[0][1] = factor;
    rotation[1][0] = -factor;
    vector = rotation * vector;
    angle -= sense * 3.0517578115526096e-5;  // atan(2^-15)
// Iteration 17
    sense = (angle < 0.0) ? -1.0 : 1.0;
    factor = sense * 1.52587890625e-5;  // 2^-16
    rotation[0][1] = factor;
    rotation[1][0] = -factor;
    vector = rotation * vector;
    angle -= sense * 1.5258789061315762e-5;  // atan(2^-16)
// Iteration 18
    sense = (angle < 0.0) ? -1.0 : 1.0;
    factor = sense * 7.62939453125e-6;  // 2^-17
    rotation[0][1] = factor;
    rotation[1][0] = -factor;
    vector = rotation * vector;
    angle -= sense * 7.6293945311019700e-6;  // atan(2^-17)
// Iteration 19
    sense = (angle < 0.0) ? -1.0 : 1.0;
    factor = sense * 3.814697265625e-6;  // 2^-18
    rotation[0][1] = factor;
    rotation[1][0] = -factor;
    vector = rotation * vector;
    angle -= sense * 3.8146972656064961e-6;  // atan(2^-18)
// Iteration 20
    sense = (angle < 0.0) ? -1.0 : 1.0;
    factor = sense * 1.9073486328125e-6;  // 2^-19
    rotation[0][1] = factor;
    rotation[1][0] = -factor;
    vector = rotation * vector;
    angle -= sense * 1.9073486328101870e-6;  // atan(2^-19)
// Iteration 21
    sense = (angle < 0.0) ? -1.0 : 1.0;
    factor = sense * 9.5367431640625e-7;  // 2^-20
    rotation[0][1] = factor;
    rotation[1][0] = -factor;
    vector = rotation * vector;
    angle -= sense * 9.5367431640596084e-7;  // atan(2^-20)
// Iteration 22
    sense = (angle < 0.0) ? -1.0 : 1.0;
    factor = sense * 4.76837158203125e-7;  // 2^-21
    rotation[0][1] = factor;
    rotation[1][0] = -factor;
    vector = rotation * vector;
    angle -= sense * 4.7683715820308884e-7;  // atan(2^-21)
// Iteration 23
    sense = (angle < 0.0) ? -1.0 : 1.0;
    factor = sense * 2.384185791015625e-7;  // 2^-22
    rotation[0][1] = factor;
    rotation[1][0] = -factor;
    vector = rotation * vector;
    angle -= sense * 2.3841857910155797e-7;  // atan(2^-22)
// Iteration 24
    sense = (angle < 0.0) ? -1.0 : 1.0;
    factor = sense * 1.1920928955078125e-7;  // 2^-23
    rotation[0][1] = factor;
    rotation[1][0] = -factor;
    vector = rotation * vector;
//    angle -= sense * 1.1920928955078068e-7;  // atan(2^-23)

    return vector;
}

/**
 * Computes the cosine and sine of the provided angle using the CORDIC algorithm.
 *
 * @name czm_cosineAndSine
 * @glslFunction
 *
 * @param {float} angle The angle in radians.
 *
 * @returns {vec2} The resulting cosine of the angle (as the x coordinate) and sine of the angle (as the y coordinate).
 *
 * @example
 * vec2 v = czm_cosineAndSine(czm_piOverSix);
 * float cosine = v.x;
 * float sine = v.y;
 */
vec2 czm_cosineAndSine(float angle)
{
    if (angle < -czm_piOverTwo || angle > czm_piOverTwo)
    {
        if (angle < 0.0)
        {
            return -cordic(angle + czm_pi);
        }
        else
        {
            return -cordic(angle - czm_pi);
        }
    }
    else
    {
        return cordic(angle);
    }
}
`;var YL=`/**
 * Decompresses texture coordinates that were packed into a single float.
 *
 * @name czm_decompressTextureCoordinates
 * @glslFunction
 *
 * @param {float} encoded The compressed texture coordinates.
 * @returns {vec2} The decompressed texture coordinates.
 */
 vec2 czm_decompressTextureCoordinates(float encoded)
 {
    float temp = encoded / 4096.0;
    float xZeroTo4095 = floor(temp);
    float stx = xZeroTo4095 / 4095.0;
    float sty = (encoded - xZeroTo4095 * 4096.0) / 4095.0;
    return vec2(stx, sty);
 }
`;var qL=`// emulated noperspective
#if (__VERSION__ == 300 || defined(GL_EXT_frag_depth)) && !defined(LOG_DEPTH)
out float v_WindowZ;
#endif

/**
 * Emulates GL_DEPTH_CLAMP, which is not available in WebGL 1 or 2.
 * GL_DEPTH_CLAMP clamps geometry that is outside the near and far planes, 
 * capping the shadow volume. More information here: 
 * https://www.khronos.org/registry/OpenGL/extensions/ARB/ARB_depth_clamp.txt.
 *
 * When GL_EXT_frag_depth is available we emulate GL_DEPTH_CLAMP by ensuring 
 * no geometry gets clipped by setting the clip space z value to 0.0 and then
 * sending the unaltered screen space z value (using emulated noperspective
 * interpolation) to the frag shader where it is clamped to [0,1] and then
 * written with gl_FragDepth (see czm_writeDepthClamp). This technique is based on:
 * https://stackoverflow.com/questions/5960757/how-to-emulate-gl-depth-clamp-nv.
 *
 * When GL_EXT_frag_depth is not available, which is the case on some mobile 
 * devices, we must attempt to fix this only in the vertex shader. 
 * The approach is to clamp the z value to the far plane, which closes the 
 * shadow volume but also distorts the geometry, so there can still be artifacts
 * on frustum seams.
 *
 * @name czm_depthClamp
 * @glslFunction
 *
 * @param {vec4} coords The vertex in clip coordinates.
 * @returns {vec4} The modified vertex.
 *
 * @example
 * gl_Position = czm_depthClamp(czm_modelViewProjection * vec4(position, 1.0));
 *
 * @see czm_writeDepthClamp
 */
vec4 czm_depthClamp(vec4 coords)
{
#ifndef LOG_DEPTH
#if __VERSION__ == 300 || defined(GL_EXT_frag_depth)
    v_WindowZ = (0.5 * (coords.z / coords.w) + 0.5) * coords.w;
    coords.z = 0.0;
#else
    coords.z = min(coords.z, coords.w);
#endif
#endif
    return coords;
}
`;var WL=`/**
 * Computes a 3x3 rotation matrix that transforms vectors from an ellipsoid's east-north-up coordinate system 
 * to eye coordinates.  In east-north-up coordinates, x points east, y points north, and z points along the 
 * surface normal.  East-north-up can be used as an ellipsoid's tangent space for operations such as bump mapping.
 * <br /><br />
 * The ellipsoid is assumed to be centered at the model coordinate's origin.
 *
 * @name czm_eastNorthUpToEyeCoordinates
 * @glslFunction
 *
 * @param {vec3} positionMC The position on the ellipsoid in model coordinates.
 * @param {vec3} normalEC The normalized ellipsoid surface normal, at <code>positionMC</code>, in eye coordinates.
 *
 * @returns {mat3} A 3x3 rotation matrix that transforms vectors from the east-north-up coordinate system to eye coordinates.
 *
 * @example
 * // Transform a vector defined in the east-north-up coordinate 
 * // system, (0, 0, 1) which is the surface normal, to eye 
 * // coordinates.
 * mat3 m = czm_eastNorthUpToEyeCoordinates(positionMC, normalEC);
 * vec3 normalEC = m * vec3(0.0, 0.0, 1.0);
 */
mat3 czm_eastNorthUpToEyeCoordinates(vec3 positionMC, vec3 normalEC)
{
    vec3 tangentMC = normalize(vec3(-positionMC.y, positionMC.x, 0.0));  // normalized surface tangent in model coordinates
    vec3 tangentEC = normalize(czm_normal3D * tangentMC);                // normalized surface tangent in eye coordinates
    vec3 bitangentEC = normalize(cross(normalEC, tangentEC));            // normalized surface bitangent in eye coordinates

    return mat3(
        tangentEC.x,   tangentEC.y,   tangentEC.z,
        bitangentEC.x, bitangentEC.y, bitangentEC.z,
        normalEC.x,    normalEC.y,    normalEC.z);
}
`;var JL=`/**
 * DOC_TBA
 *
 * @name czm_ellipsoidContainsPoint
 * @glslFunction
 *
 */
bool czm_ellipsoidContainsPoint(vec3 ellipsoid_inverseRadii, vec3 point)
{
    vec3 scaled = ellipsoid_inverseRadii * (czm_inverseModelView * vec4(point, 1.0)).xyz;
    return (dot(scaled, scaled) <= 1.0);
}
`;var KL=`/**
 * Approximate uv coordinates based on the ellipsoid normal.
 *
 * @name czm_ellipsoidTextureCoordinates
 * @glslFunction
 */
vec2 czm_ellipsoidTextureCoordinates(vec3 normal)
{
    return vec2(atan(normal.y, normal.x) * czm_oneOverTwoPi + 0.5, asin(normal.z) * czm_oneOverPi + 0.5);
}
`;var XL=`/**
 * Compares <code>left</code> and <code>right</code> componentwise. Returns <code>true</code>
 * if they are within <code>epsilon</code> and <code>false</code> otherwise. The inputs
 * <code>left</code> and <code>right</code> can be <code>float</code>s, <code>vec2</code>s,
 * <code>vec3</code>s, or <code>vec4</code>s.
 *
 * @name czm_equalsEpsilon
 * @glslFunction
 *
 * @param {} left The first vector.
 * @param {} right The second vector.
 * @param {float} epsilon The epsilon to use for equality testing.
 * @returns {bool} <code>true</code> if the components are within <code>epsilon</code> and <code>false</code> otherwise.
 *
 * @example
 * // GLSL declarations
 * bool czm_equalsEpsilon(float left, float right, float epsilon);
 * bool czm_equalsEpsilon(vec2 left, vec2 right, float epsilon);
 * bool czm_equalsEpsilon(vec3 left, vec3 right, float epsilon);
 * bool czm_equalsEpsilon(vec4 left, vec4 right, float epsilon);
 */
bool czm_equalsEpsilon(vec4 left, vec4 right, float epsilon) {
    return all(lessThanEqual(abs(left - right), vec4(epsilon)));
}

bool czm_equalsEpsilon(vec3 left, vec3 right, float epsilon) {
    return all(lessThanEqual(abs(left - right), vec3(epsilon)));
}

bool czm_equalsEpsilon(vec2 left, vec2 right, float epsilon) {
    return all(lessThanEqual(abs(left - right), vec2(epsilon)));
}

bool czm_equalsEpsilon(float left, float right, float epsilon) {
    return (abs(left - right) <= epsilon);
}
`;var ZL=`/**
 * DOC_TBA
 *
 * @name czm_eyeOffset
 * @glslFunction
 *
 * @param {vec4} positionEC DOC_TBA.
 * @param {vec3} eyeOffset DOC_TBA.
 *
 * @returns {vec4} DOC_TBA.
 */
vec4 czm_eyeOffset(vec4 positionEC, vec3 eyeOffset)
{
    // This equation is approximate in x and y.
    vec4 p = positionEC;
    vec4 zEyeOffset = normalize(p) * eyeOffset.z;
    p.xy += eyeOffset.xy + zEyeOffset.xy;
    p.z += zEyeOffset.z;
    return p;
}
`;var $L=`/**
 * Transforms a position from eye to window coordinates.  The transformation
 * from eye to clip coordinates is done using {@link czm_projection}.
 * The transform from normalized device coordinates to window coordinates is
 * done using {@link czm_viewportTransformation}, which assumes a depth range
 * of <code>near = 0</code> and <code>far = 1</code>.
 * <br /><br />
 * This transform is useful when there is a need to manipulate window coordinates
 * in a vertex shader as done by {@link BillboardCollection}.
 *
 * @name czm_eyeToWindowCoordinates
 * @glslFunction
 *
 * @param {vec4} position The position in eye coordinates to transform.
 *
 * @returns {vec4} The transformed position in window coordinates.
 *
 * @see czm_modelToWindowCoordinates
 * @see czm_projection
 * @see czm_viewportTransformation
 * @see BillboardCollection
 *
 * @example
 * vec4 positionWC = czm_eyeToWindowCoordinates(positionEC);
 */
vec4 czm_eyeToWindowCoordinates(vec4 positionEC)
{
    vec4 q = czm_projection * positionEC;                        // clip coordinates
    q.xyz /= q.w;                                                // normalized device coordinates
    q.xyz = (czm_viewportTransformation * vec4(q.xyz, 1.0)).xyz; // window coordinates
    return q;
}
`;var eN=`/**
 * Approxiamtes atan over the range [0, 1]. Safe to flip output for negative input.
 *
 * Based on Michal Drobot's approximation from ShaderFastLibs, which in turn is based on
 * "Efficient approximations for the arctangent function," Rajan, S. Sichun Wang Inkol, R. Joyal, A., May 2006.
 * Adapted from ShaderFastLibs under MIT License.
 *
 * Chosen for the following characteristics over range [0, 1]:
 * - basically no error at 0 and 1, important for getting around range limit (naive atan2 via atan requires infinite range atan)
 * - no visible artifacts from first-derivative discontinuities, unlike latitude via range-reduced sqrt asin approximations (at equator)
 *
 * The original code is x * (-0.1784 * abs(x) - 0.0663 * x * x + 1.0301);
 * Removed the abs() in here because it isn't needed, the input range is guaranteed as [0, 1] by how we're approximating atan2.
 *
 * @name czm_fastApproximateAtan
 * @glslFunction
 *
 * @param {float} x Value between 0 and 1 inclusive.
 *
 * @returns {float} Approximation of atan(x)
 */
float czm_fastApproximateAtan(float x) {
    return x * (-0.1784 * x - 0.0663 * x * x + 1.0301);
}

/**
 * Approximation of atan2.
 *
 * Range reduction math based on nvidia's cg reference implementation for atan2: http://developer.download.nvidia.com/cg/atan2.html
 * However, we replaced their atan curve with Michael Drobot's (see above).
 *
 * @name czm_fastApproximateAtan
 * @glslFunction
 *
 * @param {float} x Value between -1 and 1 inclusive.
 * @param {float} y Value between -1 and 1 inclusive.
 *
 * @returns {float} Approximation of atan2(x, y)
 */
float czm_fastApproximateAtan(float x, float y) {
    // atan approximations are usually only reliable over [-1, 1], or, in our case, [0, 1] due to modifications.
    // So range-reduce using abs and by flipping whether x or y is on top.
    float t = abs(x); // t used as swap and atan result.
    float opposite = abs(y);
    float adjacent = max(t, opposite);
    opposite = min(t, opposite);

    t = czm_fastApproximateAtan(opposite / adjacent);

    // Undo range reduction
    t = czm_branchFreeTernary(abs(y) > abs(x), czm_piOverTwo - t, t);
    t = czm_branchFreeTernary(x < 0.0, czm_pi - t, t);
    t = czm_branchFreeTernary(y < 0.0, -t, t);
    return t;
}
`;var tN=`/**
 * Gets the color with fog at a distance from the camera.
 *
 * @name czm_fog
 * @glslFunction
 *
 * @param {float} distanceToCamera The distance to the camera in meters.
 * @param {vec3} color The original color.
 * @param {vec3} fogColor The color of the fog.
 *
 * @returns {vec3} The color adjusted for fog at the distance from the camera.
 */
vec3 czm_fog(float distanceToCamera, vec3 color, vec3 fogColor)
{
    float scalar = distanceToCamera * czm_fogDensity;
    float fog = 1.0 - exp(-(scalar * scalar));
    return mix(color, fogColor, fog);
}

/**
 * Gets the color with fog at a distance from the camera.
 *
 * @name czm_fog
 * @glslFunction
 *
 * @param {float} distanceToCamera The distance to the camera in meters.
 * @param {vec3} color The original color.
 * @param {vec3} fogColor The color of the fog.
 * @param {float} fogModifierConstant A constant to modify the appearance of fog.
 *
 * @returns {vec3} The color adjusted for fog at the distance from the camera.
 */
vec3 czm_fog(float distanceToCamera, vec3 color, vec3 fogColor, float fogModifierConstant)
{
    float scalar = distanceToCamera * czm_fogDensity;
    float fog = 1.0 - exp(-((fogModifierConstant * scalar + fogModifierConstant) * (scalar * (1.0 + fogModifierConstant))));
    return mix(color, fogColor, fog);
}
`;var nN=`/**
 * Converts a color from RGB space to linear space.
 *
 * @name czm_gammaCorrect
 * @glslFunction
 *
 * @param {vec3} color The color in RGB space.
 * @returns {vec3} The color in linear space.
 */
vec3 czm_gammaCorrect(vec3 color) {
#ifdef HDR
    color = pow(color, vec3(czm_gamma));
#endif
    return color;
}

vec4 czm_gammaCorrect(vec4 color) {
#ifdef HDR
    color.rgb = pow(color.rgb, vec3(czm_gamma));
#endif
    return color;
}
`;var iN=`/**
 * DOC_TBA
 *
 * @name czm_geodeticSurfaceNormal
 * @glslFunction
 *
 * @param {vec3} positionOnEllipsoid DOC_TBA
 * @param {vec3} ellipsoidCenter DOC_TBA
 * @param {vec3} oneOverEllipsoidRadiiSquared DOC_TBA
 * 
 * @returns {vec3} DOC_TBA.
 */
vec3 czm_geodeticSurfaceNormal(vec3 positionOnEllipsoid, vec3 ellipsoidCenter, vec3 oneOverEllipsoidRadiiSquared)
{
    return normalize((positionOnEllipsoid - ellipsoidCenter) * oneOverEllipsoidRadiiSquared);
}
`;var oN=`/**
 * An czm_material with default values. Every material's czm_getMaterial
 * should use this default material as a base for the material it returns.
 * The default normal value is given by materialInput.normalEC.
 *
 * @name czm_getDefaultMaterial
 * @glslFunction
 *
 * @param {czm_materialInput} input The input used to construct the default material.
 *
 * @returns {czm_material} The default material.
 *
 * @see czm_materialInput
 * @see czm_material
 * @see czm_getMaterial
 */
czm_material czm_getDefaultMaterial(czm_materialInput materialInput)
{
    czm_material material;
    material.diffuse = vec3(0.0);
    material.specular = 0.0;
    material.shininess = 1.0;
    material.normal = materialInput.normalEC;
    material.emission = vec3(0.0);
    material.alpha = 1.0;
    return material;
}
`;var rN=`/**
 * Select which direction vector to use for dynamic atmosphere lighting based on an enum value
 *
 * @name czm_getDynamicAtmosphereLightDirection
 * @glslfunction
 * @see DynamicAtmosphereLightingType.js
 *
 * @param {vec3} positionWC the position of the vertex/fragment in world coordinates. This is normalized and returned when dynamic lighting is turned off.
 * @param {float} lightEnum The enum value for selecting between light sources.
 * @return {vec3} The normalized light direction vector. Depending on the enum value, it is either positionWC, czm_lightDirectionWC or czm_sunDirectionWC
 */
vec3 czm_getDynamicAtmosphereLightDirection(vec3 positionWC, float lightEnum) {
    const float NONE = 0.0;
    const float SCENE_LIGHT = 1.0;
    const float SUNLIGHT = 2.0;

    vec3 lightDirection =
        positionWC * float(lightEnum == NONE) +
        czm_lightDirectionWC * float(lightEnum == SCENE_LIGHT) +
        czm_sunDirectionWC * float(lightEnum == SUNLIGHT);
    return normalize(lightDirection);
}
`;var aN=`/**
 * Calculates the intensity of diffusely reflected light.
 *
 * @name czm_getLambertDiffuse
 * @glslFunction
 *
 * @param {vec3} lightDirectionEC Unit vector pointing to the light source in eye coordinates.
 * @param {vec3} normalEC The surface normal in eye coordinates.
 *
 * @returns {float} The intensity of the diffuse reflection.
 *
 * @see czm_phong
 *
 * @example
 * float diffuseIntensity = czm_getLambertDiffuse(lightDirectionEC, normalEC);
 * float specularIntensity = czm_getSpecular(lightDirectionEC, toEyeEC, normalEC, 200);
 * vec3 color = (diffuseColor * diffuseIntensity) + (specularColor * specularIntensity);
 */
float czm_getLambertDiffuse(vec3 lightDirectionEC, vec3 normalEC)
{
    return max(dot(lightDirectionEC, normalEC), 0.0);
}
`;var sN=`/**
 * Calculates the specular intensity of reflected light.
 *
 * @name czm_getSpecular
 * @glslFunction
 *
 * @param {vec3} lightDirectionEC Unit vector pointing to the light source in eye coordinates.
 * @param {vec3} toEyeEC Unit vector pointing to the eye position in eye coordinates.
 * @param {vec3} normalEC The surface normal in eye coordinates.
 * @param {float} shininess The sharpness of the specular reflection.  Higher values create a smaller, more focused specular highlight.
 *
 * @returns {float} The intensity of the specular highlight.
 *
 * @see czm_phong
 *
 * @example
 * float diffuseIntensity = czm_getLambertDiffuse(lightDirectionEC, normalEC);
 * float specularIntensity = czm_getSpecular(lightDirectionEC, toEyeEC, normalEC, 200);
 * vec3 color = (diffuseColor * diffuseIntensity) + (specularColor * specularIntensity);
 */
float czm_getSpecular(vec3 lightDirectionEC, vec3 toEyeEC, vec3 normalEC, float shininess)
{
    vec3 toReflectedLight = reflect(-lightDirectionEC, normalEC);
    float specular = max(dot(toReflectedLight, toEyeEC), 0.0);

    // pow has undefined behavior if both parameters <= 0.
    // Prevent this by making sure shininess is at least czm_epsilon2.
    return pow(specular, max(shininess, czm_epsilon2));
}
`;var cN=`/**
 * @private
 */
vec4 czm_getWaterNoise(sampler2D normalMap, vec2 uv, float time, float angleInRadians)
{
    float cosAngle = cos(angleInRadians);
    float sinAngle = sin(angleInRadians);

    // time dependent sampling directions
    vec2 s0 = vec2(1.0/17.0, 0.0);
    vec2 s1 = vec2(-1.0/29.0, 0.0);
    vec2 s2 = vec2(1.0/101.0, 1.0/59.0);
    vec2 s3 = vec2(-1.0/109.0, -1.0/57.0);

    // rotate sampling direction by specified angle
    s0 = vec2((cosAngle * s0.x) - (sinAngle * s0.y), (sinAngle * s0.x) + (cosAngle * s0.y));
    s1 = vec2((cosAngle * s1.x) - (sinAngle * s1.y), (sinAngle * s1.x) + (cosAngle * s1.y));
    s2 = vec2((cosAngle * s2.x) - (sinAngle * s2.y), (sinAngle * s2.x) + (cosAngle * s2.y));
    s3 = vec2((cosAngle * s3.x) - (sinAngle * s3.y), (sinAngle * s3.x) + (cosAngle * s3.y));

    vec2 uv0 = (uv/103.0) + (time * s0);
    vec2 uv1 = uv/107.0 + (time * s1) + vec2(0.23);
    vec2 uv2 = uv/vec2(897.0, 983.0) + (time * s2) + vec2(0.51);
    vec2 uv3 = uv/vec2(991.0, 877.0) + (time * s3) + vec2(0.71);

    uv0 = fract(uv0);
    uv1 = fract(uv1);
    uv2 = fract(uv2);
    uv3 = fract(uv3);
    vec4 noise = (texture(normalMap, uv0)) +
                 (texture(normalMap, uv1)) +
                 (texture(normalMap, uv2)) +
                 (texture(normalMap, uv3));

    // average and scale to between -1 and 1
    return ((noise / 4.0) - 0.5) * 2.0;
}
`;var AN=`/**
 * Adjusts the hue of a color.
 * 
 * @name czm_hue
 * @glslFunction
 * 
 * @param {vec3} rgb The color.
 * @param {float} adjustment The amount to adjust the hue of the color in radians.
 *
 * @returns {float} The color with the hue adjusted.
 *
 * @example
 * vec3 adjustHue = czm_hue(color, czm_pi); // The same as czm_hue(color, -czm_pi)
 */
vec3 czm_hue(vec3 rgb, float adjustment)
{
    const mat3 toYIQ = mat3(0.299,     0.587,     0.114,
                            0.595716, -0.274453, -0.321263,
                            0.211456, -0.522591,  0.311135);
    const mat3 toRGB = mat3(1.0,  0.9563,  0.6210,
                            1.0, -0.2721, -0.6474,
                            1.0, -1.107,   1.7046);
    
    vec3 yiq = toYIQ * rgb;
    float hue = atan(yiq.z, yiq.y) + adjustment;
    float chroma = sqrt(yiq.z * yiq.z + yiq.y * yiq.y);
    
    vec3 color = vec3(yiq.x, chroma * cos(hue), chroma * sin(hue));
    return toRGB * color;
}
`;var lN=`/**
 * Converts a color in linear space to RGB space.
 *
 * @name czm_inverseGamma
 * @glslFunction
 *
 * @param {vec3} color The color in linear space.
 * @returns {vec3} The color in RGB space.
 */
vec3 czm_inverseGamma(vec3 color) {
    return pow(color, vec3(1.0 / czm_gamma));
}
`;var fN=`/**
 * Determines if a time interval is empty.
 *
 * @name czm_isEmpty
 * @glslFunction 
 * 
 * @param {czm_raySegment} interval The interval to test.
 * 
 * @returns {bool} <code>true</code> if the time interval is empty; otherwise, <code>false</code>.
 *
 * @example
 * bool b0 = czm_isEmpty(czm_emptyRaySegment);      // true
 * bool b1 = czm_isEmpty(czm_raySegment(0.0, 1.0)); // false
 * bool b2 = czm_isEmpty(czm_raySegment(1.0, 1.0)); // false, contains 1.0.
 */
bool czm_isEmpty(czm_raySegment interval)
{
    return (interval.stop < 0.0);
}
`;var uN=`/**
 * Determines if a time interval is empty.
 *
 * @name czm_isFull
 * @glslFunction 
 * 
 * @param {czm_raySegment} interval The interval to test.
 * 
 * @returns {bool} <code>true</code> if the time interval is empty; otherwise, <code>false</code>.
 *
 * @example
 * bool b0 = czm_isEmpty(czm_emptyRaySegment);      // true
 * bool b1 = czm_isEmpty(czm_raySegment(0.0, 1.0)); // false
 * bool b2 = czm_isEmpty(czm_raySegment(1.0, 1.0)); // false, contains 1.0.
 */
bool czm_isFull(czm_raySegment interval)
{
    return (interval.start == 0.0 && interval.stop == czm_infinity);
}
`;var dN=`/**
 * Computes the fraction of a Web Wercator rectangle at which a given geodetic latitude is located.
 *
 * @name czm_latitudeToWebMercatorFraction
 * @glslFunction
 *
 * @param {float} latitude The geodetic latitude, in radians.
 * @param {float} southMercatorY The Web Mercator coordinate of the southern boundary of the rectangle.
 * @param {float} oneOverMercatorHeight The total height of the rectangle in Web Mercator coordinates.
 *
 * @returns {float} The fraction of the rectangle at which the latitude occurs.  If the latitude is the southern
 *          boundary of the rectangle, the return value will be zero.  If it is the northern boundary, the return
 *          value will be 1.0.  Latitudes in between are mapped according to the Web Mercator projection.
 */ 
float czm_latitudeToWebMercatorFraction(float latitude, float southMercatorY, float oneOverMercatorHeight)
{
    float sinLatitude = sin(latitude);
    float mercatorY = 0.5 * log((1.0 + sinLatitude) / (1.0 - sinLatitude));
    
    return (mercatorY - southMercatorY) * oneOverMercatorHeight;
}
`;var hN=`/**
 * Computes distance from an point in 2D to a line in 2D.
 *
 * @name czm_lineDistance
 * @glslFunction
 *
 * param {vec2} point1 A point along the line.
 * param {vec2} point2 A point along the line.
 * param {vec2} point A point that may or may not be on the line.
 * returns {float} The distance from the point to the line.
 */
float czm_lineDistance(vec2 point1, vec2 point2, vec2 point) {
    return abs((point2.y - point1.y) * point.x - (point2.x - point1.x) * point.y + point2.x * point1.y - point2.y * point1.x) / distance(point2, point1);
}
`;var mN=`/**
 * Converts a linear RGB color to an sRGB color.
 *
 * @param {vec3|vec4} linearIn The color in linear color space.
 * @returns {vec3|vec4} The color in sRGB color space. The vector type matches the input.
 */
vec3 czm_linearToSrgb(vec3 linearIn) 
{
    return pow(linearIn, vec3(1.0/2.2));
}

vec4 czm_linearToSrgb(vec4 linearIn) 
{
    vec3 srgbOut = pow(linearIn.rgb, vec3(1.0/2.2));
    return vec4(srgbOut, linearIn.a);
}
`;var pN=`/**
 * Computes the luminance of a color. 
 *
 * @name czm_luminance
 * @glslFunction
 *
 * @param {vec3} rgb The color.
 * 
 * @returns {float} The luminance.
 *
 * @example
 * float light = czm_luminance(vec3(0.0)); // 0.0
 * float dark = czm_luminance(vec3(1.0));  // ~1.0 
 */
float czm_luminance(vec3 rgb)
{
    // Algorithm from Chapter 10 of Graphics Shaders.
    const vec3 W = vec3(0.2125, 0.7154, 0.0721);
    return dot(rgb, W);
}
`;var gN=`/**
 * Find the maximum component of a vector.
 *
 * @name czm_maximumComponent
 * @glslFunction
 *
 * @param {vec2|vec3|vec4} v The input vector.
 * @returns {float} The value of the largest component.
 */
float czm_maximumComponent(vec2 v)
{
    return max(v.x, v.y);
}
float czm_maximumComponent(vec3 v)
{
    return max(max(v.x, v.y), v.z);
}
float czm_maximumComponent(vec4 v)
{
    return max(max(max(v.x, v.y), v.z), v.w);
}
`;var CN=`/**
 * Computes the size of a pixel in meters at a distance from the eye.
 * <p>
 * Use this version when passing in a custom pixel ratio. For example, passing in 1.0 will return meters per native device pixel.
 * </p>
 * @name czm_metersPerPixel
 * @glslFunction
 *
 * @param {vec3} positionEC The position to get the meters per pixel in eye coordinates.
 * @param {float} pixelRatio The scaling factor from pixel space to coordinate space
 *
 * @returns {float} The meters per pixel at positionEC.
 */
float czm_metersPerPixel(vec4 positionEC, float pixelRatio)
{
    float width = czm_viewport.z;
    float height = czm_viewport.w;
    float pixelWidth;
    float pixelHeight;

    float top = czm_frustumPlanes.x;
    float bottom = czm_frustumPlanes.y;
    float left = czm_frustumPlanes.z;
    float right = czm_frustumPlanes.w;

    if (czm_sceneMode == czm_sceneMode2D || czm_orthographicIn3D == 1.0)
    {
        float frustumWidth = right - left;
        float frustumHeight = top - bottom;
        pixelWidth = frustumWidth / width;
        pixelHeight = frustumHeight / height;
    }
    else
    {
        float distanceToPixel = -positionEC.z;
        float inverseNear = 1.0 / czm_currentFrustum.x;
        float tanTheta = top * inverseNear;
        pixelHeight = 2.0 * distanceToPixel * tanTheta / height;
        tanTheta = right * inverseNear;
        pixelWidth = 2.0 * distanceToPixel * tanTheta / width;
    }

    return max(pixelWidth, pixelHeight) * pixelRatio;
}

/**
 * Computes the size of a pixel in meters at a distance from the eye.
 * <p>
 * Use this version when scaling by pixel ratio.
 * </p>
 * @name czm_metersPerPixel
 * @glslFunction
 *
 * @param {vec3} positionEC The position to get the meters per pixel in eye coordinates.
 *
 * @returns {float} The meters per pixel at positionEC.
 */
float czm_metersPerPixel(vec4 positionEC)
{
    return czm_metersPerPixel(positionEC, czm_pixelRatio);
}
`;var _N=`/**
 * Transforms a position from model to window coordinates.  The transformation
 * from model to clip coordinates is done using {@link czm_modelViewProjection}.
 * The transform from normalized device coordinates to window coordinates is
 * done using {@link czm_viewportTransformation}, which assumes a depth range
 * of <code>near = 0</code> and <code>far = 1</code>.
 * <br /><br />
 * This transform is useful when there is a need to manipulate window coordinates
 * in a vertex shader as done by {@link BillboardCollection}.
 * <br /><br />
 * This function should not be confused with {@link czm_viewportOrthographic},
 * which is an orthographic projection matrix that transforms from window 
 * coordinates to clip coordinates.
 *
 * @name czm_modelToWindowCoordinates
 * @glslFunction
 *
 * @param {vec4} position The position in model coordinates to transform.
 *
 * @returns {vec4} The transformed position in window coordinates.
 *
 * @see czm_eyeToWindowCoordinates
 * @see czm_modelViewProjection
 * @see czm_viewportTransformation
 * @see czm_viewportOrthographic
 * @see BillboardCollection
 *
 * @example
 * vec4 positionWC = czm_modelToWindowCoordinates(positionMC);
 */
vec4 czm_modelToWindowCoordinates(vec4 position)
{
    vec4 positionEC = czm_modelView * position;
    vec4 q = czm_projection * positionEC;
    q.xyz /= q.w;                                                // normalized device coordinates
    q.xyz = (czm_viewportTransformation * vec4(q.xyz, 1.0)).xyz; // window coordinates
    return q;
}
`;var EN=`/**
 * DOC_TBA
 *
 * @name czm_multiplyWithColorBalance
 * @glslFunction
 */
vec3 czm_multiplyWithColorBalance(vec3 left, vec3 right)
{
    // Algorithm from Chapter 10 of Graphics Shaders.
    const vec3 W = vec3(0.2125, 0.7154, 0.0721);
    
    vec3 target = left * right;
    float leftLuminance = dot(left, W);
    float rightLuminance = dot(right, W);
    float targetLuminance = dot(target, W);
    
    return ((leftLuminance + rightLuminance) / (2.0 * targetLuminance)) * target;
}
`;var IN=`/**
 * Computes a value that scales with distance.  The scaling is clamped at the near and
 * far distances, and does not extrapolate.  This function works with the
 * {@link NearFarScalar} JavaScript class.
 *
 * @name czm_nearFarScalar
 * @glslFunction
 *
 * @param {vec4} nearFarScalar A vector with 4 components: Near distance (x), Near value (y), Far distance (z), Far value (w).
 * @param {float} cameraDistSq The square of the current distance from the camera.
 *
 * @returns {float} The value at this distance.
 */
float czm_nearFarScalar(vec4 nearFarScalar, float cameraDistSq)
{
    float valueAtMin = nearFarScalar.y;
    float valueAtMax = nearFarScalar.w;
    float nearDistanceSq = nearFarScalar.x * nearFarScalar.x;
    float farDistanceSq = nearFarScalar.z * nearFarScalar.z;

    float t = (cameraDistSq - nearDistanceSq) / (farDistanceSq - nearDistanceSq);

    t = pow(clamp(t, 0.0, 1.0), 0.2);

    return mix(valueAtMin, valueAtMax, t);
}
`;var yN=` /**
  * Decodes a unit-length vector in 'oct' encoding to a normalized 3-component Cartesian vector.
  * The 'oct' encoding is described in "A Survey of Efficient Representations of Independent Unit Vectors",
  * Cigolle et al 2014: http://jcgt.org/published/0003/02/01/
  *
  * @name czm_octDecode
  * @param {vec2} encoded The oct-encoded, unit-length vector
  * @param {float} range The maximum value of the SNORM range. The encoded vector is stored in log2(rangeMax+1) bits.
  * @returns {vec3} The decoded and normalized vector
  */
  vec3 czm_octDecode(vec2 encoded, float range)
  {
      if (encoded.x == 0.0 && encoded.y == 0.0) {
          return vec3(0.0, 0.0, 0.0);
      }

     encoded = encoded / range * 2.0 - 1.0;
     vec3 v = vec3(encoded.x, encoded.y, 1.0 - abs(encoded.x) - abs(encoded.y));
     if (v.z < 0.0)
     {
         v.xy = (1.0 - abs(v.yx)) * czm_signNotZero(v.xy);
     }

     return normalize(v);
  }

/**
 * Decodes a unit-length vector in 'oct' encoding to a normalized 3-component Cartesian vector.
 * The 'oct' encoding is described in "A Survey of Efficient Representations of Independent Unit Vectors",
 * Cigolle et al 2014: http://jcgt.org/published/0003/02/01/
 *
 * @name czm_octDecode
 * @param {vec2} encoded The oct-encoded, unit-length vector
 * @returns {vec3} The decoded and normalized vector
 */
 vec3 czm_octDecode(vec2 encoded)
 {
    return czm_octDecode(encoded, 255.0);
 }

 /**
 * Decodes a unit-length vector in 'oct' encoding packed into a floating-point number to a normalized 3-component Cartesian vector.
 * The 'oct' encoding is described in "A Survey of Efficient Representations of Independent Unit Vectors",
 * Cigolle et al 2014: http://jcgt.org/published/0003/02/01/
 *
 * @name czm_octDecode
 * @param {float} encoded The oct-encoded, unit-length vector
 * @returns {vec3} The decoded and normalized vector
 */
 vec3 czm_octDecode(float encoded)
 {
    float temp = encoded / 256.0;
    float x = floor(temp);
    float y = (temp - x) * 256.0;
    return czm_octDecode(vec2(x, y));
 }

/**
 * Decodes three unit-length vectors in 'oct' encoding packed into two floating-point numbers to normalized 3-component Cartesian vectors.
 * The 'oct' encoding is described in "A Survey of Efficient Representations of Independent Unit Vectors",
 * Cigolle et al 2014: http://jcgt.org/published/0003/02/01/
 *
 * @name czm_octDecode
 * @param {vec2} encoded The packed oct-encoded, unit-length vectors.
 * @param {vec3} vector1 One decoded and normalized vector.
 * @param {vec3} vector2 One decoded and normalized vector.
 * @param {vec3} vector3 One decoded and normalized vector.
 */
  void czm_octDecode(vec2 encoded, out vec3 vector1, out vec3 vector2, out vec3 vector3)
 {
    float temp = encoded.x / 65536.0;
    float x = floor(temp);
    float encodedFloat1 = (temp - x) * 65536.0;

    temp = encoded.y / 65536.0;
    float y = floor(temp);
    float encodedFloat2 = (temp - y) * 65536.0;

    vector1 = czm_octDecode(encodedFloat1);
    vector2 = czm_octDecode(encodedFloat2);
    vector3 = czm_octDecode(vec2(x, y));
 }

`;var bN=`/**
 * Packs a depth value into a vec4 that can be represented by unsigned bytes.
 *
 * @name czm_packDepth
 * @glslFunction
 *
 * @param {float} depth The floating-point depth.
 * @returns {vec4} The packed depth.
 */
vec4 czm_packDepth(float depth)
{
    // See Aras Pranckevi\u010Dius' post Encoding Floats to RGBA
    // http://aras-p.info/blog/2009/07/30/encoding-floats-to-rgba-the-final/
    vec4 enc = vec4(1.0, 255.0, 65025.0, 16581375.0) * depth;
    enc = fract(enc);
    enc -= enc.yzww * vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0, 0.0);
    return enc;
}
`;var BN=`vec3 lambertianDiffuse(vec3 diffuseColor)
{
    return diffuseColor / czm_pi;
}

vec3 fresnelSchlick2(vec3 f0, vec3 f90, float VdotH)
{
    float versine = 1.0 - VdotH;
    // pow(versine, 5.0) is slow. See https://stackoverflow.com/a/68793086/10082269
    float versineSquared = versine * versine;
    return f0 + (f90 - f0) * versineSquared * versineSquared * versine;
}

#ifdef USE_ANISOTROPY
/**
 * @param {float} bitangentRoughness Material roughness (along the anisotropy bitangent)
 * @param {float} tangentialRoughness Anisotropic roughness (along the anisotropy tangent)
 * @param {vec3} lightDirection The direction from the fragment to the light source, transformed to tangent-bitangent-normal coordinates
 * @param {vec3} viewDirection The direction from the fragment to the camera, transformed to tangent-bitangent-normal coordinates
 */
float smithVisibilityGGX_anisotropic(float bitangentRoughness, float tangentialRoughness, vec3 lightDirection, vec3 viewDirection)
{
    vec3 roughnessScale = vec3(tangentialRoughness, bitangentRoughness, 1.0);
    float GGXV = lightDirection.z * length(roughnessScale * viewDirection);
    float GGXL = viewDirection.z * length(roughnessScale * lightDirection);
    float v = 0.5 / (GGXV + GGXL);
    return clamp(v, 0.0, 1.0);
}

/**
 * @param {float} bitangentRoughness Material roughness (along the anisotropy bitangent)
 * @param {float} tangentialRoughness Anisotropic roughness (along the anisotropy tangent)
 * @param {vec3} halfwayDirection The unit vector halfway between light and view directions, transformed to tangent-bitangent-normal coordinates
 */
float GGX_anisotropic(float bitangentRoughness, float tangentialRoughness, vec3 halfwayDirection)
{
    float roughnessSquared = bitangentRoughness * tangentialRoughness;
    vec3 f = halfwayDirection * vec3(bitangentRoughness, tangentialRoughness, roughnessSquared);
    float w2 = roughnessSquared / dot(f, f);
    return roughnessSquared * w2 * w2 / czm_pi;
}
#endif

/**
 * Estimate the geometric self-shadowing of the microfacets in a surface,
 * using the Smith Joint GGX visibility function.
 * Note: Vis = G / (4 * NdotL * NdotV)
 * see Eric Heitz. 2014. Understanding the Masking-Shadowing Function in Microfacet-Based BRDFs. Journal of Computer Graphics Techniques, 3
 * see Real-Time Rendering. Page 331 to 336.
 * see https://google.github.io/filament/Filament.md.html#materialsystem/specularbrdf/geometricshadowing(specularg)
 *
 * @param {float} alphaRoughness The roughness of the material, expressed as the square of perceptual roughness.
 * @param {float} NdotL The cosine of the angle between the surface normal and the direction to the light source.
 * @param {float} NdotV The cosine of the angle between the surface normal and the direction to the camera.
 */
float smithVisibilityGGX(float alphaRoughness, float NdotL, float NdotV)
{
    float alphaRoughnessSq = alphaRoughness * alphaRoughness;

    float GGXV = NdotL * sqrt(NdotV * NdotV * (1.0 - alphaRoughnessSq) + alphaRoughnessSq);
    float GGXL = NdotV * sqrt(NdotL * NdotL * (1.0 - alphaRoughnessSq) + alphaRoughnessSq);

    float GGX = GGXV + GGXL;
    if (GGX > 0.0)
    {
        return 0.5 / GGX;
    }
    return 0.0;
}

/**
 * Estimate the fraction of the microfacets in a surface that are aligned with 
 * the halfway vector, which is aligned halfway between the directions from
 * the fragment to the camera and from the fragment to the light source.
 *
 * @param {float} alphaRoughness The roughness of the material, expressed as the square of perceptual roughness.
 * @param {float} NdotH The cosine of the angle between the surface normal and the halfway vector.
 * @return {float} The fraction of microfacets aligned to the halfway vector.
 */
float GGX(float alphaRoughness, float NdotH)
{
    float alphaRoughnessSquared = alphaRoughness * alphaRoughness;
    float f = (NdotH * alphaRoughnessSquared - NdotH) * NdotH + 1.0;
    return alphaRoughnessSquared / (czm_pi * f * f);
}

/**
 * Compute the strength of the specular reflection due to direct lighting.
 *
 * @param {vec3} normal The surface normal.
 * @param {vec3} lightDirection The unit vector pointing from the fragment to the light source.
 * @param {vec3} viewDirection The unit vector pointing from the fragment to the camera.
 * @param {vec3} halfwayDirection The unit vector pointing from the fragment to halfway between the light source and the camera.
 * @param {float} alphaRoughness The roughness of the material, expressed as the square of perceptual roughness.
 * @return {float} The strength of the specular reflection.
 */
float computeDirectSpecularStrength(vec3 normal, vec3 lightDirection, vec3 viewDirection, vec3 halfwayDirection, float alphaRoughness)
{
    float NdotL = clamp(dot(normal, lightDirection), 0.0, 1.0);
    float NdotV = clamp(dot(normal, viewDirection), 0.0, 1.0);
    float G = smithVisibilityGGX(alphaRoughness, NdotL, NdotV);
    float NdotH = clamp(dot(normal, halfwayDirection), 0.0, 1.0);
    float D = GGX(alphaRoughness, NdotH);
    return G * D;
}

/**
 * Compute the diffuse and specular contributions using physically based
 * rendering. This function only handles direct lighting.
 * <p>
 * This function only handles the lighting calculations. Metallic/roughness
 * and specular/glossy must be handled separately. See {@MaterialStageFS}
 * </p>
 *
 * @name czm_pbrLighting
 * @glslFunction
 *
 * @param {vec3} viewDirectionEC Unit vector pointing from the fragment to the eye position
 * @param {vec3} normalEC The surface normal in eye coordinates
 * @param {vec3} lightDirectionEC Unit vector pointing to the light source in eye coordinates.
 * @param {czm_modelMaterial} The material properties.
 * @return {vec3} The computed HDR color
 */
vec3 czm_pbrLighting(vec3 viewDirectionEC, vec3 normalEC, vec3 lightDirectionEC, czm_modelMaterial material)
{
    vec3 halfwayDirectionEC = normalize(viewDirectionEC + lightDirectionEC);
    float VdotH = clamp(dot(viewDirectionEC, halfwayDirectionEC), 0.0, 1.0);
    float NdotL = clamp(dot(normalEC, lightDirectionEC), 0.001, 1.0);

    vec3 f0 = material.specular;
    float reflectance = czm_maximumComponent(f0);
    // Typical dielectrics will have reflectance 0.04, so f90 will be 1.0.
    // In this case, at grazing angle, all incident energy is reflected.
    vec3 f90 = vec3(clamp(reflectance * 25.0, 0.0, 1.0));
    vec3 F = fresnelSchlick2(f0, f90, VdotH);

    #if defined(USE_SPECULAR)
        F *= material.specularWeight;
    #endif

    float alphaRoughness = material.roughness * material.roughness;
    #ifdef USE_ANISOTROPY
        mat3 tbn = mat3(material.anisotropicT, material.anisotropicB, normalEC);
        vec3 lightDirection = lightDirectionEC * tbn;
        vec3 viewDirection = viewDirectionEC * tbn;
        vec3 halfwayDirection = halfwayDirectionEC * tbn;
        float anisotropyStrength = material.anisotropyStrength;
        float tangentialRoughness = mix(alphaRoughness, 1.0, anisotropyStrength * anisotropyStrength);
        float bitangentRoughness = clamp(alphaRoughness, 0.001, 1.0);
        float G = smithVisibilityGGX_anisotropic(bitangentRoughness, tangentialRoughness, lightDirection, viewDirection);
        float D = GGX_anisotropic(bitangentRoughness, tangentialRoughness, halfwayDirection);
        vec3 specularContribution = F * G * D;
    #else
        float specularStrength = computeDirectSpecularStrength(normalEC, lightDirectionEC, viewDirectionEC, halfwayDirectionEC, alphaRoughness);
        vec3 specularContribution = F * specularStrength;
    #endif

    vec3 diffuseColor = material.diffuse;
    // F here represents the specular contribution
    vec3 diffuseContribution = (1.0 - F) * lambertianDiffuse(diffuseColor);

    // Lo = (diffuse + specular) * Li * NdotL
    return (diffuseContribution + specularContribution) * NdotL;
}
`;var xN=`// KhronosGroup https://github.com/KhronosGroup/ToneMapping/tree/main/PBR_Neutral

// Input color is non-negative and resides in the Linear Rec. 709 color space.
// Output color is also Linear Rec. 709, but in the [0, 1] range.

vec3 czm_pbrNeutralTonemapping(vec3 color) {
    const float startCompression = 0.8 - 0.04;
    const float desaturation = 0.15;

    float x = min(color.r, min(color.g, color.b));
    float offset = czm_branchFreeTernary(x < 0.08, x - 6.25 * x * x, 0.04);
    color -= offset;

    float peak = max(color.r, max(color.g, color.b));
    if (peak < startCompression) return color;

    const float d = 1.0 - startCompression;
    float newPeak = 1.0 - d * d / (peak + d - startCompression);
    color *= newPeak / peak;

    float g = 1.0 - 1.0 / (desaturation * (peak - newPeak) + 1.0);
    return mix(color, newPeak * vec3(1.0, 1.0, 1.0), g);
}
`;var TN=`float czm_private_getLambertDiffuseOfMaterial(vec3 lightDirectionEC, czm_material material)
{
    return czm_getLambertDiffuse(lightDirectionEC, material.normal);
}

float czm_private_getSpecularOfMaterial(vec3 lightDirectionEC, vec3 toEyeEC, czm_material material)
{
    return czm_getSpecular(lightDirectionEC, toEyeEC, material.normal, material.shininess);
}

/**
 * Computes a color using the Phong lighting model.
 *
 * @name czm_phong
 * @glslFunction
 *
 * @param {vec3} toEye A normalized vector from the fragment to the eye in eye coordinates.
 * @param {czm_material} material The fragment's material.
 *
 * @returns {vec4} The computed color.
 *
 * @example
 * vec3 positionToEyeEC = // ...
 * czm_material material = // ...
 * vec3 lightDirectionEC = // ...
 * out_FragColor = czm_phong(normalize(positionToEyeEC), material, lightDirectionEC);
 *
 * @see czm_getMaterial
 */
vec4 czm_phong(vec3 toEye, czm_material material, vec3 lightDirectionEC)
{
    // Diffuse from directional light sources at eye (for top-down)
    float diffuse = czm_private_getLambertDiffuseOfMaterial(vec3(0.0, 0.0, 1.0), material);
    if (czm_sceneMode == czm_sceneMode3D) {
        // (and horizon views in 3D)
        diffuse += czm_private_getLambertDiffuseOfMaterial(vec3(0.0, 1.0, 0.0), material);
    }

    float specular = czm_private_getSpecularOfMaterial(lightDirectionEC, toEye, material);

    // Temporary workaround for adding ambient.
    vec3 materialDiffuse = material.diffuse * 0.5;

    vec3 ambient = materialDiffuse;
    vec3 color = ambient + material.emission;
    color += materialDiffuse * diffuse * czm_lightColor;
    color += material.specular * specular * czm_lightColor;

    return vec4(color, material.alpha);
}

vec4 czm_private_phong(vec3 toEye, czm_material material, vec3 lightDirectionEC)
{
    float diffuse = czm_private_getLambertDiffuseOfMaterial(lightDirectionEC, material);
    float specular = czm_private_getSpecularOfMaterial(lightDirectionEC, toEye, material);

    vec3 ambient = vec3(0.0);
    vec3 color = ambient + material.emission;
    color += material.diffuse * diffuse * czm_lightColor;
    color += material.specular * specular * czm_lightColor;

    return vec4(color, material.alpha);
}
`;var SN=`/**
 * Computes distance from a point to a plane.
 *
 * @name czm_planeDistance
 * @glslFunction
 *
 * param {vec4} plane A Plane in Hessian Normal Form. See Plane.js
 * param {vec3} point A point in the same space as the plane.
 * returns {float} The distance from the point to the plane.
 */
float czm_planeDistance(vec4 plane, vec3 point) {
    return (dot(plane.xyz, point) + plane.w);
}

/**
 * Computes distance from a point to a plane.
 *
 * @name czm_planeDistance
 * @glslFunction
 *
 * param {vec3} planeNormal Normal for a plane in Hessian Normal Form. See Plane.js
 * param {float} planeDistance Distance for a plane in Hessian Normal form. See Plane.js
 * param {vec3} point A point in the same space as the plane.
 * returns {float} The distance from the point to the plane.
 */
float czm_planeDistance(vec3 planeNormal, float planeDistance, vec3 point) {
    return (dot(planeNormal, point) + planeDistance);
}
`;var wN=`/**
 * Computes the point along a ray at the given time.  <code>time</code> can be positive, negative, or zero.
 *
 * @name czm_pointAlongRay
 * @glslFunction
 *
 * @param {czm_ray} ray The ray to compute the point along.
 * @param {float} time The time along the ray.
 * 
 * @returns {vec3} The point along the ray at the given time.
 * 
 * @example
 * czm_ray ray = czm_ray(vec3(0.0), vec3(1.0, 0.0, 0.0)); // origin, direction
 * vec3 v = czm_pointAlongRay(ray, 2.0); // (2.0, 0.0, 0.0)
 */
vec3 czm_pointAlongRay(czm_ray ray, float time)
{
    return ray.origin + (time * ray.direction);
}
`;var DN=`/**
 * DOC_TBA
 *
 * @name czm_rayEllipsoidIntersectionInterval
 * @glslFunction
 */
czm_raySegment czm_rayEllipsoidIntersectionInterval(czm_ray ray, vec3 ellipsoid_center, vec3 ellipsoid_inverseRadii)
{
   // ray and ellipsoid center in eye coordinates.  radii in model coordinates.
    vec3 q = ellipsoid_inverseRadii * (czm_inverseModelView * vec4(ray.origin, 1.0)).xyz;
    vec3 w = ellipsoid_inverseRadii * (czm_inverseModelView * vec4(ray.direction, 0.0)).xyz;

    q = q - ellipsoid_inverseRadii * (czm_inverseModelView * vec4(ellipsoid_center, 1.0)).xyz;

    float q2 = dot(q, q);
    float qw = dot(q, w);

    if (q2 > 1.0) // Outside ellipsoid.
    {
        if (qw >= 0.0) // Looking outward or tangent (0 intersections).
        {
            return czm_emptyRaySegment;
        }
        else // qw < 0.0.
        {
            float qw2 = qw * qw;
            float difference = q2 - 1.0; // Positively valued.
            float w2 = dot(w, w);
            float product = w2 * difference;

            if (qw2 < product) // Imaginary roots (0 intersections).
            {
                return czm_emptyRaySegment;
            }
            else if (qw2 > product) // Distinct roots (2 intersections).
            {
                float discriminant = qw * qw - product;
                float temp = -qw + sqrt(discriminant); // Avoid cancellation.
                float root0 = temp / w2;
                float root1 = difference / temp;
                if (root0 < root1)
                {
                    czm_raySegment i = czm_raySegment(root0, root1);
                    return i;
                }
                else
                {
                    czm_raySegment i = czm_raySegment(root1, root0);
                    return i;
                }
            }
            else // qw2 == product.  Repeated roots (2 intersections).
            {
                float root = sqrt(difference / w2);
                czm_raySegment i = czm_raySegment(root, root);
                return i;
            }
        }
    }
    else if (q2 < 1.0) // Inside ellipsoid (2 intersections).
    {
        float difference = q2 - 1.0; // Negatively valued.
        float w2 = dot(w, w);
        float product = w2 * difference; // Negatively valued.
        float discriminant = qw * qw - product;
        float temp = -qw + sqrt(discriminant); // Positively valued.
        czm_raySegment i = czm_raySegment(0.0, temp / w2);
        return i;
    }
    else // q2 == 1.0. On ellipsoid.
    {
        if (qw < 0.0) // Looking inward.
        {
            float w2 = dot(w, w);
            czm_raySegment i = czm_raySegment(0.0, -qw / w2);
            return i;
        }
        else // qw >= 0.0.  Looking outward or tangent.
        {
            return czm_emptyRaySegment;
        }
    }
}
`;var QN=`/**
 * Compute the intersection interval of a ray with a sphere.
 *
 * @name czm_raySphereIntersectionInterval
 * @glslFunction
 *
 * @param {czm_ray} ray The ray.
 * @param {vec3} center The center of the sphere.
 * @param {float} radius The radius of the sphere.
 * @return {czm_raySegment} The intersection interval of the ray with the sphere.
 */
czm_raySegment czm_raySphereIntersectionInterval(czm_ray ray, vec3 center, float radius)
{
    vec3 o = ray.origin;
    vec3 d = ray.direction;

    vec3 oc = o - center;

    float a = dot(d, d);
    float b = 2.0 * dot(d, oc);
    float c = dot(oc, oc) - (radius * radius);

    float det = (b * b) - (4.0 * a * c);

    if (det < 0.0) {
        return czm_emptyRaySegment;
    }

    float sqrtDet = sqrt(det);

    float t0 = (-b - sqrtDet) / (2.0 * a);
    float t1 = (-b + sqrtDet) / (2.0 * a);

    czm_raySegment result = czm_raySegment(t0, t1);
    return result;
}
`;var RN=`float czm_readDepth(sampler2D depthTexture, vec2 texCoords)
{
    return czm_reverseLogDepth(texture(depthTexture, texCoords).r);
}
`;var vN=`/**
 * Reads a value previously transformed with {@link czm_writeNonPerspective}
 * by dividing it by \`w\`, the value used in the perspective divide.
 * This function is intended to be called in a fragment shader to access a
 * \`varying\` that should not be subject to perspective interpolation.
 * For example, screen-space texture coordinates. The value should have been
 * previously written in the vertex shader with a call to
 * {@link czm_writeNonPerspective}.
 *
 * @name czm_readNonPerspective
 * @glslFunction
 *
 * @param {float|vec2|vec3|vec4} value The non-perspective value to be read.
 * @param {float} oneOverW One over the perspective divide value, \`w\`. Usually this is simply \`gl_FragCoord.w\`.
 * @returns {float|vec2|vec3|vec4} The usable value.
 */
float czm_readNonPerspective(float value, float oneOverW) {
    return value * oneOverW;
}

vec2 czm_readNonPerspective(vec2 value, float oneOverW) {
    return value * oneOverW;
}

vec3 czm_readNonPerspective(vec3 value, float oneOverW) {
    return value * oneOverW;
}

vec4 czm_readNonPerspective(vec4 value, float oneOverW) {
    return value * oneOverW;
}
`;var PN=`float czm_reverseLogDepth(float logZ)
{
#ifdef LOG_DEPTH
    float near = czm_currentFrustum.x;
    float far = czm_currentFrustum.y;
    float log2Depth = logZ * czm_log2FarDepthFromNearPlusOne;
    float depthFromNear = exp2(log2Depth) - 1.0;
    return far * (1.0 - near / (depthFromNear + near)) / (far - near);
#endif
    return logZ;
}
`;var MN=`/**
 * Round a floating point value. This function exists because round() doesn't
 * exist in GLSL 1.00. 
 *
 * @param {float|vec2|vec3|vec4} value The value to round
 * @param {float|vec2|vec3|vec3} The rounded value. The type matches the input.
 */
float czm_round(float value) {
  return floor(value + 0.5);
}

vec2 czm_round(vec2 value) {
  return floor(value + 0.5);
}

vec3 czm_round(vec3 value) {
  return floor(value + 0.5);
}

vec4 czm_round(vec4 value) {
  return floor(value + 0.5);
}
`;var ON=`/**
 * Adjusts the saturation of a color.
 * 
 * @name czm_saturation
 * @glslFunction
 * 
 * @param {vec3} rgb The color.
 * @param {float} adjustment The amount to adjust the saturation of the color.
 *
 * @returns {float} The color with the saturation adjusted.
 *
 * @example
 * vec3 greyScale = czm_saturation(color, 0.0);
 * vec3 doubleSaturation = czm_saturation(color, 2.0);
 */
vec3 czm_saturation(vec3 rgb, float adjustment)
{
    // Algorithm from Chapter 16 of OpenGL Shading Language
    const vec3 W = vec3(0.2125, 0.7154, 0.0721);
    vec3 intensity = vec3(dot(rgb, W));
    return mix(intensity, rgb, adjustment);
}
`;var LN=`
float czm_sampleShadowMap(highp samplerCube shadowMap, vec3 d)
{
    return czm_unpackDepth(czm_textureCube(shadowMap, d));
}

float czm_sampleShadowMap(highp sampler2D shadowMap, vec2 uv)
{
#ifdef USE_SHADOW_DEPTH_TEXTURE
    return texture(shadowMap, uv).r;
#else
    return czm_unpackDepth(texture(shadowMap, uv));
#endif
}

float czm_shadowDepthCompare(samplerCube shadowMap, vec3 uv, float depth)
{
    return step(depth, czm_sampleShadowMap(shadowMap, uv));
}

float czm_shadowDepthCompare(sampler2D shadowMap, vec2 uv, float depth)
{
    return step(depth, czm_sampleShadowMap(shadowMap, uv));
}
`;var NN=`
float czm_private_shadowVisibility(float visibility, float nDotL, float normalShadingSmooth, float darkness)
{
#ifdef USE_NORMAL_SHADING
#ifdef USE_NORMAL_SHADING_SMOOTH
    float strength = clamp(nDotL / normalShadingSmooth, 0.0, 1.0);
#else
    float strength = step(0.0, nDotL);
#endif
    visibility *= strength;
#endif

    visibility = max(visibility, darkness);
    return visibility;
}

#ifdef USE_CUBE_MAP_SHADOW
float czm_shadowVisibility(samplerCube shadowMap, czm_shadowParameters shadowParameters)
{
    float depthBias = shadowParameters.depthBias;
    float depth = shadowParameters.depth;
    float nDotL = shadowParameters.nDotL;
    float normalShadingSmooth = shadowParameters.normalShadingSmooth;
    float darkness = shadowParameters.darkness;
    vec3 uvw = shadowParameters.texCoords;

    depth -= depthBias;
    float visibility = czm_shadowDepthCompare(shadowMap, uvw, depth);
    return czm_private_shadowVisibility(visibility, nDotL, normalShadingSmooth, darkness);
}
#else
float czm_shadowVisibility(sampler2D shadowMap, czm_shadowParameters shadowParameters)
{
    float depthBias = shadowParameters.depthBias;
    float depth = shadowParameters.depth;
    float nDotL = shadowParameters.nDotL;
    float normalShadingSmooth = shadowParameters.normalShadingSmooth;
    float darkness = shadowParameters.darkness;
    vec2 uv = shadowParameters.texCoords;

    depth -= depthBias;
#ifdef USE_SOFT_SHADOWS
    vec2 texelStepSize = shadowParameters.texelStepSize;
    float radius = 1.0;
    float dx0 = -texelStepSize.x * radius;
    float dy0 = -texelStepSize.y * radius;
    float dx1 = texelStepSize.x * radius;
    float dy1 = texelStepSize.y * radius;
    float visibility = (
        czm_shadowDepthCompare(shadowMap, uv, depth) +
        czm_shadowDepthCompare(shadowMap, uv + vec2(dx0, dy0), depth) +
        czm_shadowDepthCompare(shadowMap, uv + vec2(0.0, dy0), depth) +
        czm_shadowDepthCompare(shadowMap, uv + vec2(dx1, dy0), depth) +
        czm_shadowDepthCompare(shadowMap, uv + vec2(dx0, 0.0), depth) +
        czm_shadowDepthCompare(shadowMap, uv + vec2(dx1, 0.0), depth) +
        czm_shadowDepthCompare(shadowMap, uv + vec2(dx0, dy1), depth) +
        czm_shadowDepthCompare(shadowMap, uv + vec2(0.0, dy1), depth) +
        czm_shadowDepthCompare(shadowMap, uv + vec2(dx1, dy1), depth)
    ) * (1.0 / 9.0);
#else
    float visibility = czm_shadowDepthCompare(shadowMap, uv, depth);
#endif

    return czm_private_shadowVisibility(visibility, nDotL, normalShadingSmooth, darkness);
}
#endif
`;var FN=`/**
 * Returns 1.0 if the given value is positive or zero, and -1.0 if it is negative.  This is similar to the GLSL
 * built-in function <code>sign</code> except that returns 1.0 instead of 0.0 when the input value is 0.0.
 * 
 * @name czm_signNotZero
 * @glslFunction
 *
 * @param {} value The value for which to determine the sign.
 * @returns {} 1.0 if the value is positive or zero, -1.0 if the value is negative.
 */
float czm_signNotZero(float value)
{
    return value >= 0.0 ? 1.0 : -1.0;
}

vec2 czm_signNotZero(vec2 value)
{
    return vec2(czm_signNotZero(value.x), czm_signNotZero(value.y));
}

vec3 czm_signNotZero(vec3 value)
{
    return vec3(czm_signNotZero(value.x), czm_signNotZero(value.y), czm_signNotZero(value.z));
}

vec4 czm_signNotZero(vec4 value)
{
    return vec4(czm_signNotZero(value.x), czm_signNotZero(value.y), czm_signNotZero(value.z), czm_signNotZero(value.w));
}
`;var kN=`/**
 * Computes a color from the third order spherical harmonic coefficients and a normalized direction vector.
 * <p>
 * The order of the coefficients is [L00, L1_1, L10, L11, L2_2, L2_1, L20, L21, L22].
 * </p>
 *
 * @name czm_sphericalHarmonics
 * @glslFunction
 *
 * @param {vec3} normal The normalized direction.
 * @param {vec3[9]} coefficients The third order spherical harmonic coefficients.
 * @returns {vec3} The color at the direction.
 *
 * @see https://graphics.stanford.edu/papers/envmap/envmap.pdf
 */
vec3 czm_sphericalHarmonics(vec3 normal, vec3 coefficients[9])
{
    vec3 L00 = coefficients[0];
    vec3 L1_1 = coefficients[1];
    vec3 L10 = coefficients[2];
    vec3 L11 = coefficients[3];
    vec3 L2_2 = coefficients[4];
    vec3 L2_1 = coefficients[5];
    vec3 L20 = coefficients[6];
    vec3 L21 = coefficients[7];
    vec3 L22 = coefficients[8];

    float x = normal.x;
    float y = normal.y;
    float z = normal.z;

    vec3 L =
          L00
        + L1_1 * y
        + L10 * z
        + L11 * x
        + L2_2 * (y * x)
        + L2_1 * (y * z)
        + L20 * (3.0 * z * z - 1.0)
        + L21 * (z * x)
        + L22 * (x * x - y * y);
        
    return max(L, vec3(0.0));
}
`;var UN=`/**
 * Converts an sRGB color to a linear RGB color.
 *
 * @param {vec3|vec4} srgbIn The color in sRGB space
 * @returns {vec3|vec4} The color in linear color space. The vector type matches the input.
 */
vec3 czm_srgbToLinear(vec3 srgbIn)
{
    return pow(srgbIn, vec3(2.2));
}

vec4 czm_srgbToLinear(vec4 srgbIn) 
{
    vec3 linearOut = pow(srgbIn.rgb, vec3(2.2));
    return vec4(linearOut, srgbIn.a);
}
`;var GN=`/**
 * Creates a matrix that transforms vectors from tangent space to eye space.
 *
 * @name czm_tangentToEyeSpaceMatrix
 * @glslFunction
 *
 * @param {vec3} normalEC The normal vector in eye coordinates.
 * @param {vec3} tangentEC The tangent vector in eye coordinates.
 * @param {vec3} bitangentEC The bitangent vector in eye coordinates.
 *
 * @returns {mat3} The matrix that transforms from tangent space to eye space.
 *
 * @example
 * mat3 tangentToEye = czm_tangentToEyeSpaceMatrix(normalEC, tangentEC, bitangentEC);
 * vec3 normal = tangentToEye * texture(normalMap, st).xyz;
 */
mat3 czm_tangentToEyeSpaceMatrix(vec3 normalEC, vec3 tangentEC, vec3 bitangentEC)
{
    vec3 normal = normalize(normalEC);
    vec3 tangent = normalize(tangentEC);
    vec3 bitangent = normalize(bitangentEC);
    return mat3(tangent.x  , tangent.y  , tangent.z,
                bitangent.x, bitangent.y, bitangent.z,
                normal.x   , normal.y   , normal.z);
}
`;var zN=`/**
 * A wrapper around the texture (WebGL2) / textureCube (WebGL1)
 * function to allow for WebGL 1 support.
 * 
 * @name czm_textureCube
 * @glslFunction
 *
 * @param {samplerCube} sampler The sampler.
 * @param {vec3} p The coordinate at which to sample the texture.
 */
vec4 czm_textureCube(samplerCube sampler, vec3 p) {
#if __VERSION__ == 300
    return texture(sampler, p);
#else
    return textureCube(sampler, p);
#endif
}

/**
 * A wrapper around the textureLod (WebGL2) / textureCube (WebGL1)
 * function to allow for WebGL 1 support in fragment shaders.
 *
 * @name czm_textureCubeLod
 * @glslFunction
 *
 * @param {samplerCube} sampler The sampler.
 * @param {vec3} p The coordinate at which to sample the texture.
 * @param {float} lod The mipmap level from which to sample.
 */
vec4 czm_textureCube(samplerCube sampler, vec3 p, float lod) {
#if __VERSION__ == 300
    return textureLod(sampler, p, lod);
#elif defined(GL_EXT_shader_texture_lod)
    return textureCubeLodEXT(sampler, p, lod);
#endif
}`;var HN=`/**
 * Transforms a plane.
 * 
 * @name czm_transformPlane
 * @glslFunction
 *
 * @param {vec4} plane The plane in Hessian Normal Form.
 * @param {mat4} transform The inverse-transpose of a transformation matrix.
 */
vec4 czm_transformPlane(vec4 plane, mat4 transform) {
    vec4 transformedPlane = transform * plane;
    // Convert the transformed plane to Hessian Normal Form
    float normalMagnitude = length(transformedPlane.xyz);
    return transformedPlane / normalMagnitude;
}
`;var VN=`/**
 * Translates a position (or any <code>vec3</code>) that was encoded with {@link EncodedCartesian3},
 * and then provided to the shader as separate <code>high</code> and <code>low</code> bits to
 * be relative to the eye.  As shown in the example, the position can then be transformed in eye
 * or clip coordinates using {@link czm_modelViewRelativeToEye} or {@link czm_modelViewProjectionRelativeToEye},
 * respectively.
 * <p>
 * This technique, called GPU RTE, eliminates jittering artifacts when using large coordinates as
 * described in {@link http://help.agi.com/AGIComponents/html/BlogPrecisionsPrecisions.htm|Precisions, Precisions}.
 * </p>
 *
 * @name czm_translateRelativeToEye
 * @glslFunction
 *
 * @param {vec3} high The position's high bits.
 * @param {vec3} low The position's low bits.
 * @returns {vec3} The position translated to be relative to the camera's position.
 *
 * @example
 * in vec3 positionHigh;
 * in vec3 positionLow;
 *
 * void main()
 * {
 *   vec4 p = czm_translateRelativeToEye(positionHigh, positionLow);
 *   gl_Position = czm_modelViewProjectionRelativeToEye * p;
 * }
 *
 * @see czm_modelViewRelativeToEye
 * @see czm_modelViewProjectionRelativeToEye
 * @see czm_computePosition
 * @see EncodedCartesian3
 */
vec4 czm_translateRelativeToEye(vec3 high, vec3 low)
{
    vec3 highDifference = high - czm_encodedCameraPositionMCHigh;
    // This check handles the case when NaN values have gotten into \`highDifference\`.
    // Such a thing could happen on devices running iOS.
    if (length(highDifference) == 0.0) {  
        highDifference = vec3(0);  
    }
    vec3 lowDifference = low - czm_encodedCameraPositionMCLow;

    return vec4(highDifference + lowDifference, 1.0);
}
`;var jN=`/**
 * @private
 */
vec4 czm_translucentPhong(vec3 toEye, czm_material material, vec3 lightDirectionEC)
{
    // Diffuse from directional light sources at eye (for top-down and horizon views)
    float diffuse = czm_getLambertDiffuse(vec3(0.0, 0.0, 1.0), material.normal);

    if (czm_sceneMode == czm_sceneMode3D) {
        // (and horizon views in 3D)
        diffuse += czm_getLambertDiffuse(vec3(0.0, 1.0, 0.0), material.normal);
    }

    diffuse = clamp(diffuse, 0.0, 1.0);

    float specular = czm_getSpecular(lightDirectionEC, toEye, material.normal, material.shininess);

    // Temporary workaround for adding ambient.
    vec3 materialDiffuse = material.diffuse * 0.5;

    vec3 ambient = materialDiffuse;
    vec3 color = ambient + material.emission;
    color += materialDiffuse * diffuse * czm_lightColor;
    color += material.specular * specular * czm_lightColor;

    return vec4(color, material.alpha);
}
`;var YN=`/**
 * Returns the transpose of the matrix.  The input <code>matrix</code> can be
 * a <code>mat2</code>, <code>mat3</code>, or <code>mat4</code>.
 *
 * @name czm_transpose
 * @glslFunction
 *
 * @param {} matrix The matrix to transpose.
 *
 * @returns {} The transposed matrix.
 *
 * @example
 * // GLSL declarations
 * mat2 czm_transpose(mat2 matrix);
 * mat3 czm_transpose(mat3 matrix);
 * mat4 czm_transpose(mat4 matrix);
 *
 * // Transpose a 3x3 rotation matrix to find its inverse.
 * mat3 eastNorthUpToEye = czm_eastNorthUpToEyeCoordinates(
 *     positionMC, normalEC);
 * mat3 eyeToEastNorthUp = czm_transpose(eastNorthUpToEye);
 */
mat2 czm_transpose(mat2 matrix)
{
    return mat2(
        matrix[0][0], matrix[1][0],
        matrix[0][1], matrix[1][1]);
}

mat3 czm_transpose(mat3 matrix)
{
    return mat3(
        matrix[0][0], matrix[1][0], matrix[2][0],
        matrix[0][1], matrix[1][1], matrix[2][1],
        matrix[0][2], matrix[1][2], matrix[2][2]);
}

mat4 czm_transpose(mat4 matrix)
{
    return mat4(
        matrix[0][0], matrix[1][0], matrix[2][0], matrix[3][0],
        matrix[0][1], matrix[1][1], matrix[2][1], matrix[3][1],
        matrix[0][2], matrix[1][2], matrix[2][2], matrix[3][2],
        matrix[0][3], matrix[1][3], matrix[2][3], matrix[3][3]);
}
`;var qN=`vec2 getLookupUv(vec2 dimensions, int i) {
    int pixY = i / int(dimensions.x);
    int pixX = i - (pixY * int(dimensions.x));
    float pixelWidth = 1.0 / dimensions.x;
    float pixelHeight = 1.0 / dimensions.y;
    float u = (float(pixX) + 0.5) * pixelWidth; // sample from center of pixel
    float v = (float(pixY) + 0.5) * pixelHeight;
    return vec2(u, v);
}

vec4 czm_unpackClippingExtents(highp sampler2D extentsTexture, int index) {
    vec2 textureDimensions = vec2(textureSize(extentsTexture, 0));
    return texture(extentsTexture, getLookupUv(textureDimensions, index));
}`;var WN=`/**
 * Unpacks a vec4 depth value to a float in [0, 1) range.
 *
 * @name czm_unpackDepth
 * @glslFunction
 *
 * @param {vec4} packedDepth The packed depth.
 *
 * @returns {float} The floating-point depth in [0, 1) range.
 */
float czm_unpackDepth(vec4 packedDepth)
{
    // See Aras Pranckevi\u010Dius' post Encoding Floats to RGBA
    // http://aras-p.info/blog/2009/07/30/encoding-floats-to-rgba-the-final/
    return dot(packedDepth, vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 16581375.0));
}
`;var JN=`/**
 * Unpack an IEEE 754 single-precision float that is packed as a little-endian unsigned normalized vec4.
 *
 * @name czm_unpackFloat
 * @glslFunction
 *
 * @param {vec4} packedFloat The packed float.
 *
 * @returns {float} The floating-point depth in arbitrary range.
 */
float czm_unpackFloat(vec4 packedFloat)
{
    // Convert to [0.0, 255.0] and round to integer
    packedFloat = floor(packedFloat * 255.0 + 0.5);
    float sign = 1.0 - step(128.0, packedFloat[3]) * 2.0;
    float exponent = 2.0 * mod(packedFloat[3], 128.0) + step(128.0, packedFloat[2]) - 127.0;    
    if (exponent == -127.0)
    {
        return 0.0;
    }
    float mantissa = mod(packedFloat[2], 128.0) * 65536.0 + packedFloat[1] * 256.0 + packedFloat[0] + float(0x800000);
    float result = sign * exp2(exponent - 23.0) * mantissa;
    return result;
}
`;var KN=`/**
 * Unpack unsigned integers of 1-4 bytes. in WebGL 1, there is no uint type,
 * so the return value is an int.
 * <p>
 * There are also precision limitations in WebGL 1. highp int is still limited
 * to 24 bits. Above the value of 2^24 = 16777216, precision loss may occur.
 * </p>
 *
 * @param {float|vec2|vec3|vec4} packed The packed value. For vectors, the components are listed in little-endian order.
 *
 * @return {int} The unpacked value.
 */
 int czm_unpackUint(float packedValue) {
   float rounded = czm_round(packedValue * 255.0);
   return int(rounded);
 }

 int czm_unpackUint(vec2 packedValue) {
   vec2 rounded = czm_round(packedValue * 255.0);
   return int(dot(rounded, vec2(1.0, 256.0)));
 }

 int czm_unpackUint(vec3 packedValue) {
   vec3 rounded = czm_round(packedValue * 255.0);
   return int(dot(rounded, vec3(1.0, 256.0, 65536.0)));
 }

 int czm_unpackUint(vec4 packedValue) {
   vec4 rounded = czm_round(packedValue * 255.0);
   return int(dot(rounded, vec4(1.0, 256.0, 65536.0, 16777216.0)));
 }
`;var XN=`/**
 * Transform metadata values following the EXT_structural_metadata spec
 * by multiplying by scale and adding the offset. Operations are always
 * performed component-wise, even for matrices.
 * 
 * @param {float|vec2|vec3|vec4|mat2|mat3|mat4} offset The offset to add
 * @param {float|vec2|vec3|vec4|mat2|mat3|mat4} scale The scale factor to multiply
 * @param {float|vec2|vec3|vec4|mat2|mat3|mat4} value The original value.
 *
 * @return {float|vec2|vec3|vec4|mat2|mat3|mat4} The transformed value of the same scalar/vector/matrix type as the input.
 */
float czm_valueTransform(float offset, float scale, float value) {
  return scale * value + offset;
}

vec2 czm_valueTransform(vec2 offset, vec2 scale, vec2 value) {
  return scale * value + offset;
}

vec3 czm_valueTransform(vec3 offset, vec3 scale, vec3 value) {
  return scale * value + offset;
}

vec4 czm_valueTransform(vec4 offset, vec4 scale, vec4 value) {
  return scale * value + offset;
}

mat2 czm_valueTransform(mat2 offset, mat2 scale, mat2 value) {
  return matrixCompMult(scale, value) + offset;
}

mat3 czm_valueTransform(mat3 offset, mat3 scale, mat3 value) {
  return matrixCompMult(scale, value) + offset;
}

mat4 czm_valueTransform(mat4 offset, mat4 scale, mat4 value) {
  return matrixCompMult(scale, value) + offset;
}
`;var ZN=`#ifdef LOG_DEPTH
// 1.0 at the near plane, increasing linearly from there.
out float v_depthFromNearPlusOne;
#ifdef SHADOW_MAP
out vec3 v_logPositionEC;
#endif
#endif

vec4 czm_updatePositionDepth(vec4 coords) {
#if defined(LOG_DEPTH)

#ifdef SHADOW_MAP
    vec3 logPositionEC = (czm_inverseProjection * coords).xyz;
    v_logPositionEC = logPositionEC;
#endif

    // With the very high far/near ratios used with the logarithmic depth
    // buffer, floating point rounding errors can cause linear depth values
    // to end up on the wrong side of the far plane, even for vertices that
    // are really nowhere near it. Since we always write a correct logarithmic
    // depth value in the fragment shader anyway, we just need to make sure
    // such errors don't cause the primitive to be clipped entirely before
    // we even get to the fragment shader.
    coords.z = clamp(coords.z / coords.w, -1.0, 1.0) * coords.w;
#endif

    return coords;
}

/**
 * Writes the logarithmic depth to gl_Position using the already computed gl_Position.
 *
 * @name czm_vertexLogDepth
 * @glslFunction
 */
void czm_vertexLogDepth()
{
#ifdef LOG_DEPTH
    v_depthFromNearPlusOne = (gl_Position.w - czm_currentFrustum.x) + 1.0;
    gl_Position = czm_updatePositionDepth(gl_Position);
#endif
}

/**
 * Writes the logarithmic depth to gl_Position using the provided clip coordinates.
 * <p>
 * An example use case for this function would be moving the vertex in window coordinates
 * before converting back to clip coordinates. Use the original vertex clip coordinates.
 * </p>
 * @name czm_vertexLogDepth
 * @glslFunction
 *
 * @param {vec4} clipCoords The vertex in clip coordinates.
 *
 * @example
 * czm_vertexLogDepth(czm_projection * vec4(positionEyeCoordinates, 1.0));
 */
void czm_vertexLogDepth(vec4 clipCoords)
{
#ifdef LOG_DEPTH
    v_depthFromNearPlusOne = (clipCoords.w - czm_currentFrustum.x) + 1.0;
    czm_updatePositionDepth(clipCoords);
#endif
}
`;var $N=`vec4 czm_screenToEyeCoordinates(vec4 screenCoordinate)
{
    // Reconstruct NDC coordinates
    float x = 2.0 * screenCoordinate.x - 1.0;
    float y = 2.0 * screenCoordinate.y - 1.0;
    float z = (screenCoordinate.z - czm_viewportTransformation[3][2]) / czm_viewportTransformation[2][2];
    vec4 q = vec4(x, y, z, 1.0);

    // Reverse the perspective division to obtain clip coordinates.
    q /= screenCoordinate.w;

    // Reverse the projection transformation to obtain eye coordinates.
    if (!(czm_inverseProjection == mat4(0.0))) // IE and Edge sometimes do something weird with != between mat4s
    {
        q = czm_inverseProjection * q;
    }
    else
    {
        float top = czm_frustumPlanes.x;
        float bottom = czm_frustumPlanes.y;
        float left = czm_frustumPlanes.z;
        float right = czm_frustumPlanes.w;

        float near = czm_currentFrustum.x;
        float far = czm_currentFrustum.y;

        q.x = (q.x * (right - left) + left + right) * 0.5;
        q.y = (q.y * (top - bottom) + bottom + top) * 0.5;
        q.z = (q.z * (near - far) - near - far) * 0.5;
        q.w = 1.0;
    }

    return q;
}

/**
 * Transforms a position from window to eye coordinates.
 * The transform from window to normalized device coordinates is done using components
 * of (@link czm_viewport} and {@link czm_viewportTransformation} instead of calculating
 * the inverse of <code>czm_viewportTransformation</code>. The transformation from
 * normalized device coordinates to clip coordinates is done using <code>fragmentCoordinate.w</code>,
 * which is expected to be the scalar used in the perspective divide. The transformation
 * from clip to eye coordinates is done using {@link czm_inverseProjection}.
 *
 * @name czm_windowToEyeCoordinates
 * @glslFunction
 *
 * @param {vec4} fragmentCoordinate The position in window coordinates to transform.
 *
 * @returns {vec4} The transformed position in eye coordinates.
 *
 * @see czm_modelToWindowCoordinates
 * @see czm_eyeToWindowCoordinates
 * @see czm_inverseProjection
 * @see czm_viewport
 * @see czm_viewportTransformation
 *
 * @example
 * vec4 positionEC = czm_windowToEyeCoordinates(gl_FragCoord);
 */
vec4 czm_windowToEyeCoordinates(vec4 fragmentCoordinate)
{
    vec2 screenCoordXY = (fragmentCoordinate.xy - czm_viewport.xy) / czm_viewport.zw;
    return czm_screenToEyeCoordinates(vec4(screenCoordXY, fragmentCoordinate.zw));
}

vec4 czm_screenToEyeCoordinates(vec2 screenCoordinateXY, float depthOrLogDepth)
{
    // See reverseLogDepth.glsl. This is separate to re-use the pow.
#if defined(LOG_DEPTH) || defined(LOG_DEPTH_READ_ONLY)
    float near = czm_currentFrustum.x;
    float far = czm_currentFrustum.y;
    float log2Depth = depthOrLogDepth * czm_log2FarDepthFromNearPlusOne;
    float depthFromNear = exp2(log2Depth) - 1.0;
    float depthFromCamera = depthFromNear + near;
    vec4 screenCoord = vec4(screenCoordinateXY, far * (1.0 - near / depthFromCamera) / (far - near), 1.0);
    vec4 eyeCoordinate = czm_screenToEyeCoordinates(screenCoord);
    eyeCoordinate.w = 1.0 / depthFromCamera; // Better precision
#else
    vec4 screenCoord = vec4(screenCoordinateXY, depthOrLogDepth, 1.0);
    vec4 eyeCoordinate = czm_screenToEyeCoordinates(screenCoord);
#endif
    return eyeCoordinate;
}

/**
 * Transforms a position given as window x/y and a depth or a log depth from window to eye coordinates.
 * This function produces more accurate results for window positions with log depth than
 * conventionally unpacking the log depth using czm_reverseLogDepth and using the standard version
 * of czm_windowToEyeCoordinates.
 *
 * @name czm_windowToEyeCoordinates
 * @glslFunction
 *
 * @param {vec2} fragmentCoordinateXY The XY position in window coordinates to transform.
 * @param {float} depthOrLogDepth A depth or log depth for the fragment.
 *
 * @see czm_modelToWindowCoordinates
 * @see czm_eyeToWindowCoordinates
 * @see czm_inverseProjection
 * @see czm_viewport
 * @see czm_viewportTransformation
 *
 * @returns {vec4} The transformed position in eye coordinates.
 */
vec4 czm_windowToEyeCoordinates(vec2 fragmentCoordinateXY, float depthOrLogDepth)
{
    vec2 screenCoordXY = (fragmentCoordinateXY.xy - czm_viewport.xy) / czm_viewport.zw;
    return czm_screenToEyeCoordinates(screenCoordXY, depthOrLogDepth);
}
`;var eF=`// emulated noperspective
#if !defined(LOG_DEPTH)
in float v_WindowZ;
#endif

/**
 * Emulates GL_DEPTH_CLAMP. Clamps a fragment to the near and far plane
 * by writing the fragment's depth. See czm_depthClamp for more details.
 *
 * @name czm_writeDepthClamp
 * @glslFunction
 *
 * @example
 * out_FragColor = color;
 * czm_writeDepthClamp();
 *
 * @see czm_depthClamp
 */
void czm_writeDepthClamp()
{
#if (!defined(LOG_DEPTH) && (__VERSION__ == 300 || defined(GL_EXT_frag_depth)))
    gl_FragDepth = clamp(v_WindowZ * gl_FragCoord.w, 0.0, 1.0);
#endif
}
`;var tF=`#ifdef LOG_DEPTH
in float v_depthFromNearPlusOne;

#ifdef POLYGON_OFFSET
uniform vec2 u_polygonOffset;
#endif

#endif

/**
 * Writes the fragment depth to the logarithmic depth buffer.
 * <p>
 * Use this when the vertex shader does not call {@link czm_vertexLogDepth}, for example, when
 * ray-casting geometry using a full screen quad.
 * </p>
 * @name czm_writeLogDepth
 * @glslFunction
 *
 * @param {float} depth The depth coordinate, where 1.0 is on the near plane and
 *                      depth increases in eye-space units from there
 *
 * @example
 * czm_writeLogDepth((czm_projection * v_positionEyeCoordinates).w + 1.0);
 */
void czm_writeLogDepth(float depth)
{
#if (defined(LOG_DEPTH) && (__VERSION__ == 300 || defined(GL_EXT_frag_depth)))
    // Discard the vertex if it's not between the near and far planes.
    // We allow a bit of epsilon on the near plane comparison because a 1.0
    // from the vertex shader (indicating the vertex should be _on_ the near
    // plane) will not necessarily come here as exactly 1.0.
    if (depth <= 0.9999999 || depth > czm_farDepthFromNearPlusOne) {
        discard;
    }

#ifdef POLYGON_OFFSET
    // Polygon offset: m * factor + r * units
    float factor = u_polygonOffset[0];
    float units = u_polygonOffset[1];

#if (__VERSION__ == 300 || defined(GL_OES_standard_derivatives))
    // This factor doesn't work in IE 10
    if (factor != 0.0) {
        // m = sqrt(dZdX^2 + dZdY^2);
        float x = dFdx(depth);
        float y = dFdy(depth);
        float m = sqrt(x * x + y * y);

        // Apply the factor before computing the log depth.
        depth += m * factor;
    }
#endif

#endif

    gl_FragDepth = log2(depth) * czm_oneOverLog2FarDepthFromNearPlusOne;

#ifdef POLYGON_OFFSET
    // Apply the units after the log depth.
    gl_FragDepth += czm_epsilon7 * units;
#endif

#endif
}

/**
 * Writes the fragment depth to the logarithmic depth buffer.
 * <p>
 * Use this when the vertex shader calls {@link czm_vertexLogDepth}.
 * </p>
 *
 * @name czm_writeLogDepth
 * @glslFunction
 */
void czm_writeLogDepth() {
#ifdef LOG_DEPTH
    czm_writeLogDepth(v_depthFromNearPlusOne);
#endif
}
`;var nF=`/**
 * Transforms a value for non-perspective interpolation by multiplying
 * it by w, the value used in the perspective divide. This function is
 * intended to be called in a vertex shader to compute the value of a
 * \`varying\` that should not be subject to perspective interpolation.
 * For example, screen-space texture coordinates. The fragment shader
 * must call {@link czm_readNonPerspective} to retrieve the final
 * non-perspective value.
 *
 * @name czm_writeNonPerspective
 * @glslFunction
 *
 * @param {float|vec2|vec3|vec4} value The value to be interpolated without accounting for perspective.
 * @param {float} w The perspective divide value. Usually this is the computed \`gl_Position.w\`.
 * @returns {float|vec2|vec3|vec4} The transformed value, intended to be stored in a \`varying\` and read in the
 *          fragment shader with {@link czm_readNonPerspective}.
 */
float czm_writeNonPerspective(float value, float w) {
    return value * w;
}

vec2 czm_writeNonPerspective(vec2 value, float w) {
    return value * w;
}

vec3 czm_writeNonPerspective(vec3 value, float w) {
    return value * w;
}

vec4 czm_writeNonPerspective(vec4 value, float w) {
    return value * w;
}
`;var ZI={czm_degreesPerRadian:wO,czm_depthRange:DO,czm_epsilon1:QO,czm_epsilon2:RO,czm_epsilon3:vO,czm_epsilon4:PO,czm_epsilon5:MO,czm_epsilon6:OO,czm_epsilon7:LO,czm_infinity:NO,czm_oneOverPi:FO,czm_oneOverTwoPi:kO,czm_passCesium3DTile:UO,czm_passCesium3DTileClassification:GO,czm_passCesium3DTileClassificationIgnoreShow:zO,czm_passClassification:HO,czm_passCompute:VO,czm_passEnvironment:jO,czm_passGaussianSplats:YO,czm_passGlobe:qO,czm_passOpaque:WO,czm_passOverlay:JO,czm_passTerrainClassification:KO,czm_passTranslucent:XO,czm_passVoxels:ZO,czm_pi:$O,czm_piOverFour:eL,czm_piOverSix:tL,czm_piOverThree:nL,czm_piOverTwo:iL,czm_radiansPerDegree:oL,czm_sceneMode2D:rL,czm_sceneMode3D:aL,czm_sceneModeColumbusView:sL,czm_sceneModeMorphing:cL,czm_solarRadius:AL,czm_threePiOver2:lL,czm_twoPi:fL,czm_webMercatorMaxLatitude:uL,czm_depthRangeStruct:dL,czm_material:hL,czm_materialInput:mL,czm_modelMaterial:pL,czm_modelVertexOutput:gL,czm_ray:CL,czm_raySegment:_L,czm_shadowParameters:EL,czm_HSBToRGB:IL,czm_HSLToRGB:yL,czm_RGBToHSB:bL,czm_RGBToHSL:BL,czm_RGBToXYZ:xL,czm_XYZToRGB:TL,czm_acesTonemapping:SL,czm_alphaWeight:wL,czm_antialias:DL,czm_applyHSBShift:QL,czm_approximateSphericalCoordinates:RL,czm_approximateTanh:vL,czm_backFacing:PL,czm_branchFreeTernary:ML,czm_cascadeColor:OL,czm_cascadeDistance:LL,czm_cascadeMatrix:NL,czm_cascadeWeights:FL,czm_clipPolygons:kL,czm_columbusViewMorph:UL,czm_computeAtmosphereColor:GL,czm_computeGroundAtmosphereScattering:zL,czm_computePosition:HL,czm_computeScattering:VL,czm_cosineAndSine:jL,czm_decompressTextureCoordinates:YL,czm_depthClamp:qL,czm_eastNorthUpToEyeCoordinates:WL,czm_ellipsoidContainsPoint:JL,czm_ellipsoidTextureCoordinates:KL,czm_equalsEpsilon:XL,czm_eyeOffset:ZL,czm_eyeToWindowCoordinates:$L,czm_fastApproximateAtan:eN,czm_fog:tN,czm_gammaCorrect:nN,czm_geodeticSurfaceNormal:iN,czm_getDefaultMaterial:oN,czm_getDynamicAtmosphereLightDirection:rN,czm_getLambertDiffuse:aN,czm_getSpecular:sN,czm_getWaterNoise:cN,czm_hue:AN,czm_inverseGamma:lN,czm_isEmpty:fN,czm_isFull:uN,czm_latitudeToWebMercatorFraction:dN,czm_lineDistance:hN,czm_linearToSrgb:mN,czm_luminance:pN,czm_maximumComponent:gN,czm_metersPerPixel:CN,czm_modelToWindowCoordinates:_N,czm_multiplyWithColorBalance:EN,czm_nearFarScalar:IN,czm_octDecode:yN,czm_packDepth:bN,czm_pbrLighting:BN,czm_pbrNeutralTonemapping:xN,czm_phong:TN,czm_planeDistance:SN,czm_pointAlongRay:wN,czm_rayEllipsoidIntersectionInterval:DN,czm_raySphereIntersectionInterval:QN,czm_readDepth:RN,czm_readNonPerspective:vN,czm_reverseLogDepth:PN,czm_round:MN,czm_saturation:ON,czm_shadowDepthCompare:LN,czm_shadowVisibility:NN,czm_signNotZero:FN,czm_sphericalHarmonics:kN,czm_srgbToLinear:UN,czm_tangentToEyeSpaceMatrix:GN,czm_textureCube:zN,czm_transformPlane:HN,czm_translateRelativeToEye:VN,czm_translucentPhong:jN,czm_transpose:YN,czm_unpackClippingExtents:qN,czm_unpackDepth:WN,czm_unpackFloat:JN,czm_unpackUint:KN,czm_valueTransform:XN,czm_vertexLogDepth:ZN,czm_windowToEyeCoordinates:$N,czm_writeDepthClamp:eF,czm_writeLogDepth:tF,czm_writeNonPerspective:nF};function C$(e,t){let n=e;return n=n.replaceAll("version 300 es",""),n=n.replaceAll(/(texture\()/g,"texture2D("),t?(n=n.replaceAll(/\n\s*(in)\s+(vec\d|mat\d|float)/g,`
varying $2`),/out_FragData_(\d+)/.test(n)&&(n=`#extension GL_EXT_draw_buffers : enable
${n}`,n=n.replaceAll(/layout\s+\(location\s*=\s*\d+\)\s*out\s+vec4\s+out_FragData_\d+;/g,""),n=n.replaceAll(/out_FragData_(\d+)/g,"gl_FragData[$1]")),n=n.replaceAll(/layout\s+\(location\s*=\s*0\)\s*out\s+vec4\s+out_FragColor;/g,""),n=n.replaceAll(/out_FragColor/g,"gl_FragColor"),n=n.replaceAll(/out_FragColor\[(\d+)\]/g,"gl_FragColor[$1]"),/gl_FragDepth/.test(n)&&(n=`#extension GL_EXT_frag_depth : enable
${n}`,n=n.replaceAll(/gl_FragDepth/g,"gl_FragDepthEXT")),n=`#ifdef GL_EXT_shader_texture_lod
#extension GL_EXT_shader_texture_lod : enable
#endif
${n}`,n=`#ifdef GL_OES_standard_derivatives
#extension GL_OES_standard_derivatives : enable
#endif
${n}`):(n=n.replaceAll(/(in)\s+(vec\d|mat\d|float)/g,"attribute $2"),n=n.replaceAll(/(out)\s+(vec\d|mat\d|float)\s+([\w]+);/g,"varying $2 $3;")),n=`#version 100
${n}`,n}var iF=C$;function oF(e){return e=e.replace(/\/\/.*/g,""),e.replace(/\/\*\*[\s\S]*?\*\//gm,function(t){let n=t.match(/\n/gm).length,i="";for(let o=0;o<n;++o)i+=`
`;return i})}function rF(e,t,n){let i;for(let o=0;o<n.length;++o)n[o].name===e&&(i=n[o]);return c(i)||(t=oF(t),i={name:e,glslSource:t,dependsOn:[],requiredBy:[],evaluated:!1},n.push(i)),i}function aF(e,t){if(e.evaluated)return;e.evaluated=!0;let n=e.glslSource.match(/\bczm_[a-zA-Z0-9_]*/g);c(n)&&n!==null&&(n=n.filter(function(i,o){return n.indexOf(i)===o}),n.forEach(function(i){if(i!==e.name&&Oo._czmBuiltinsAndUniforms.hasOwnProperty(i)){let o=rF(i,Oo._czmBuiltinsAndUniforms[i],t);e.dependsOn.push(o),o.requiredBy.push(e),aF(o,t)}}))}function _$(e){let t=[],n=[];for(;e.length>0;){let o=e.pop();n.push(o),o.requiredBy.length===0&&t.push(o)}for(;t.length>0;){let o=t.shift();e.push(o);for(let r=0;r<o.dependsOn.length;++r){let a=o.dependsOn[r],s=a.requiredBy.indexOf(o);a.requiredBy.splice(s,1),a.requiredBy.length===0&&t.push(a)}}let i=[];for(let o=0;o<n.length;++o)n[o].requiredBy.length!==0&&i.push(n[o])}function E$(e){let t=[],n=rF("main",e,t);aF(n,t),_$(t);let i="";for(let o=t.length-1;o>=0;--o)i=`${i+t[o].glslSource}
`;return i.replace(n.glslSource,"")}function sF(e,t,n){let i,o,r="",a=e.sources;if(c(a))for(i=0,o=a.length;i<o;++i)r+=`
#line 0
${a[i]}`;r=oF(r);let s;r=r.replace(/#version\s+(.*?)\n/gm,function(C,_){return s=_,`
`});let A=[];r=r.replace(/#extension.*\n/gm,function(C){return A.push(C),`
`}),r=r.replace(/precision\s(lowp|mediump|highp)\s(float|int);/,"");let l=e.pickColorQualifier;c(l)&&(r=Oo.createPickFragmentShaderSource(r,l));let f="",h=A.length;for(i=0;i<h;i++)f+=A[i];t&&(f+=`#ifdef GL_FRAGMENT_PRECISION_HIGH
    precision highp float;
    precision highp int;
#else
    precision mediump float;
    precision mediump int;
    #define highp mediump
#endif

`);let m=e.defines;if(c(m))for(i=0,o=m.length;i<o;++i){let C=m[i];C.length!==0&&(f+=`#define ${C}
`)}n.textureFloatLinear&&(f+=`#define OES_texture_float_linear

`),n.floatingPointTexture&&(f+=`#define OES_texture_float

`);let p="";e.includeBuiltIns&&(p=E$(r)),f+=`
#line 0
`;let g=p+r;return n.webgl2&&t&&!/layout\s*\(location\s*=\s*0\)\s*out\s+vec4\s+out_FragColor;/g.test(g)&&!/czm_out_FragColor/g.test(g)&&/out_FragColor/g.test(g)&&(f+=`layout(location = 0) out vec4 out_FragColor;

`),f+=p,f+=r,n.webgl2?f=`#version 300 es
${f}`:f=iF(f,t),f}function Oo(e){e=e??k.EMPTY_OBJECT;let t=e.pickColorQualifier;this.defines=c(e.defines)?e.defines.slice(0):[],this.sources=c(e.sources)?e.sources.slice(0):[],this.pickColorQualifier=t,this.includeBuiltIns=e.includeBuiltIns??!0}Oo.prototype.clone=function(){return new Oo({sources:this.sources,defines:this.defines,pickColorQualifier:this.pickColorQualifier,includeBuiltIns:this.includeBuiltIns})};Oo.replaceMain=function(e,t){return t=`void ${t}()`,e.replace(/void\s+main\s*\(\s*(?:void)?\s*\)/g,t)};Oo.prototype.getCacheKey=function(){let t=this.defines.slice().sort().join(","),n=this.pickColorQualifier,i=this.includeBuiltIns,o=this.sources.join(`
`);return`${t}:${n}:${i}:${o}`};Oo.prototype.createCombinedVertexShader=function(e){return sF(this,!1,e)};Oo.prototype.createCombinedFragmentShader=function(e){return sF(this,!0,e)};Oo._czmBuiltinsAndUniforms={};for(let e in ZI)ZI.hasOwnProperty(e)&&(Oo._czmBuiltinsAndUniforms[e]=ZI[e]);for(let e in zh)if(zh.hasOwnProperty(e)){let t=zh[e];typeof t.getDeclaration=="function"&&(Oo._czmBuiltinsAndUniforms[e]=t.getDeclaration(e))}Oo.createPickVertexShaderSource=function(e){return`${Oo.replaceMain(e,"czm_old_main")}
in vec4 pickColor; 
out vec4 czm_pickColor; 
void main() 
{ 
    czm_old_main(); 
    czm_pickColor = pickColor; 
}`};Oo.createPickFragmentShaderSource=function(e,t){let n=Oo.replaceMain(e,"czm_old_main"),i=`${t} vec4 czm_pickColor; 
void main() 
{ 
    czm_old_main(); 
    if (out_FragColor.a == 0.0) { 
       discard; 
    } 
    out_FragColor = czm_pickColor; 
}`;return`${n}
${i}`};function I$(e,t){let n=e.defines,i=n.length;for(let o=0;o<i;++o)if(n[o]===t)return!0;return!1}function cF(e,t){let n=e.sources,i=n.length;for(let o=0;o<i;++o)if(n[o].indexOf(t)!==-1)return!0;return!1}function AF(e,t){let n=t.length;for(let i=0;i<n;++i){let o=t[i];if(cF(e,o))return o}}var y$=["v_normalEC","v_normal"];Oo.findNormalVarying=function(e){return cF(e,"#ifdef HAS_NORMALS")?I$(e,"HAS_NORMALS")?"v_normalEC":void 0:AF(e,y$)};var b$=["v_positionEC"];Oo.findPositionVarying=function(e){return AF(e,b$)};var It=Oo;function yc(e){e=e??k.EMPTY_OBJECT;let{context:t,source:n,pixelFormat:i=Bt.RGBA,pixelDatatype:o=_t.UNSIGNED_BYTE,flipY:r=!0,skipColorSpaceConversion:a=!1,sampler:s=new dn}=e,{width:A,height:l}=e;c(n)&&(c(A)||(A=n.videoWidth??n.naturalWidth??n.width),c(l)||(l=n.videoHeight??n.naturalHeight??n.height));let f=e.preMultiplyAlpha||i===Bt.RGB||i===Bt.LUMINANCE,h=Bt.toInternalFormat(i,o,t),m=Bt.isCompressedFormat(h),p=t._gl,g=m?Bt.compressedTextureSizeInBytes(i,A,l):Bt.textureSizeInBytes(i,o,A,l);this._id=e.id??oo(),this._context=t,this._textureFilterAnisotropic=t._textureFilterAnisotropic,this._textureTarget=p.TEXTURE_2D,this._texture=p.createTexture(),this._internalFormat=h,this._pixelFormat=i,this._pixelDatatype=o,this._width=A,this._height=l,this._dimensions=new U(A,l),this._hasMipmap=!1,this._sizeInBytes=g,this._preMultiplyAlpha=f,this._flipY=r,this._initialized=!1,this._sampler=void 0,this._sampler=s,dF(this,s),p.activeTexture(p.TEXTURE0),p.bindTexture(this._textureTarget,this._texture),c(n)?(a?p.pixelStorei(p.UNPACK_COLORSPACE_CONVERSION_WEBGL,p.NONE):p.pixelStorei(p.UNPACK_COLORSPACE_CONVERSION_WEBGL,p.BROWSER_DEFAULT_WEBGL),c(n.arrayBufferView)?Bt.isCompressedFormat(h)?B$(this,n):lF(this,n):c(n.framebuffer)?T$(this,n):fF(this,n),this._initialized=!0):uF(this),p.bindTexture(this._textureTarget,null)}function B$(e,t){let i=e._context._gl,o=e._textureTarget,r=e._internalFormat,{width:a,height:s}=e;if(i.pixelStorei(i.UNPACK_ALIGNMENT,4),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,!1),i.compressedTexImage2D(o,0,r,a,s,0,t.arrayBufferView),c(t.mipLevels)){let A=a,l=s;for(let f=0;f<t.mipLevels.length;++f)A=$I(A),l=$I(l),i.compressedTexImage2D(o,f+1,r,A,l,0,t.mipLevels[f])}}function lF(e,t){let n=e._context,i=n._gl,o=e._textureTarget,r=e._internalFormat,{width:a,height:s,pixelFormat:A,pixelDatatype:l,flipY:f}=e,h=Bt.alignmentInBytes(A,l,a);i.pixelStorei(i.UNPACK_ALIGNMENT,h),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,!1);let{arrayBufferView:m}=t;if(f&&(m=Bt.flipY(m,A,l,a,s)),i.texImage2D(o,0,r,a,s,0,A,_t.toWebGLConstant(l,n),m),c(t.mipLevels)){let p=a,g=s;for(let C=0;C<t.mipLevels.length;++C)p=$I(p),g=$I(g),i.texImage2D(o,C+1,r,p,g,0,A,_t.toWebGLConstant(l,n),t.mipLevels[C])}}function x$(e,t,n,i,o,r){let a=e._context,s=a._gl,{pixelFormat:A,pixelDatatype:l}=e,f=Bt.alignmentInBytes(A,l,o);s.pixelStorei(s.UNPACK_ALIGNMENT,f),s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),s.pixelStorei(s.UNPACK_FLIP_Y_WEBGL,!1),e.flipY&&(t=Bt.flipY(t,A,l,o,r)),s.texSubImage2D(e._textureTarget,0,n,i,o,r,A,_t.toWebGLConstant(l,a),t)}function T$(e,t){let n=e._context,i=n._gl;i.pixelStorei(i.UNPACK_ALIGNMENT,4),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,!1),t.framebuffer!==n.defaultFramebuffer&&t.framebuffer._bind(),i.copyTexImage2D(e._textureTarget,0,e._internalFormat,t.xOffset,t.yOffset,e.width,e.height,0),t.framebuffer!==n.defaultFramebuffer&&t.framebuffer._unBind()}function fF(e,t){let n=e._context,i=n._gl;i.pixelStorei(i.UNPACK_ALIGNMENT,4),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.preMultiplyAlpha),i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,e.flipY),i.texImage2D(e._textureTarget,0,e._internalFormat,e.pixelFormat,_t.toWebGLConstant(e.pixelDatatype,n),t)}function S$(e,t,n,i){let o=e._context,r=o._gl;r.pixelStorei(r.UNPACK_ALIGNMENT,4),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.preMultiplyAlpha),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,e.flipY),r.texSubImage2D(e._textureTarget,0,n,i,e.pixelFormat,_t.toWebGLConstant(e.pixelDatatype,o),t)}function $I(e){let t=Math.floor(e/2)|0;return Math.max(t,1)}function uF(e){let t=e._context;t._gl.texImage2D(e._textureTarget,0,e._internalFormat,e._width,e._height,0,e._pixelFormat,_t.toWebGLConstant(e._pixelDatatype,t),null)}yc.create=function(e){return new yc(e)};yc.fromFramebuffer=function(e){e=e??k.EMPTY_OBJECT;let t=e.context,{pixelFormat:n=Bt.RGB,framebufferXOffset:i=0,framebufferYOffset:o=0,width:r=t.drawingBufferWidth,height:a=t.drawingBufferHeight,framebuffer:s}=e;return new yc({context:t,width:r,height:a,pixelFormat:n,source:{framebuffer:c(s)?s:t.defaultFramebuffer,xOffset:i,yOffset:o,width:r,height:a}})};Object.defineProperties(yc.prototype,{id:{get:function(){return this._id}},sampler:{get:function(){return this._sampler},set:function(e){dF(this,e),this._sampler=e}},pixelFormat:{get:function(){return this._pixelFormat}},pixelDatatype:{get:function(){return this._pixelDatatype}},dimensions:{get:function(){return this._dimensions}},preMultiplyAlpha:{get:function(){return this._preMultiplyAlpha}},flipY:{get:function(){return this._flipY}},width:{get:function(){return this._width}},height:{get:function(){return this._height}},sizeInBytes:{get:function(){return this._hasMipmap?Math.floor(this._sizeInBytes*4/3):this._sizeInBytes}},_target:{get:function(){return this._textureTarget}}});function dF(e,t){let{minificationFilter:n,magnificationFilter:i}=t,o=[tn.NEAREST_MIPMAP_NEAREST,tn.NEAREST_MIPMAP_LINEAR,tn.LINEAR_MIPMAP_NEAREST,tn.LINEAR_MIPMAP_LINEAR].includes(n),r=e._context,a=e._pixelFormat,s=e._pixelDatatype;(s===_t.FLOAT&&!r.textureFloatLinear||s===_t.HALF_FLOAT&&!r.textureHalfFloatLinear)&&(n=o?tn.NEAREST_MIPMAP_NEAREST:tn.NEAREST,i=bo.NEAREST),r.webgl2&&Bt.isDepthFormat(a)&&(n=tn.NEAREST,i=bo.NEAREST);let A=r._gl,l=e._textureTarget;A.activeTexture(A.TEXTURE0),A.bindTexture(l,e._texture),A.texParameteri(l,A.TEXTURE_MIN_FILTER,n),A.texParameteri(l,A.TEXTURE_MAG_FILTER,i),A.texParameteri(l,A.TEXTURE_WRAP_S,t.wrapS),A.texParameteri(l,A.TEXTURE_WRAP_T,t.wrapT),c(e._textureFilterAnisotropic)&&A.texParameteri(l,e._textureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,t.maximumAnisotropy),A.bindTexture(l,null)}yc.prototype.copyFrom=function(e){let{xOffset:t=0,yOffset:n=0,source:i,skipColorSpaceConversion:o=!1}=e,a=this._context._gl,s=this._textureTarget;a.activeTexture(a.TEXTURE0),a.bindTexture(s,this._texture);let{width:A,height:l}=i;c(i.videoWidth)&&c(i.videoHeight)?(A=i.videoWidth,l=i.videoHeight):c(i.naturalWidth)&&c(i.naturalHeight)&&(A=i.naturalWidth,l=i.naturalHeight),o?a.pixelStorei(a.UNPACK_COLORSPACE_CONVERSION_WEBGL,a.NONE):a.pixelStorei(a.UNPACK_COLORSPACE_CONVERSION_WEBGL,a.BROWSER_DEFAULT_WEBGL);let f=!1;this._initialized||(t===0&&n===0&&A===this._width&&l===this._height?(c(i.arrayBufferView)?lF(this,i):fF(this,i),f=!0):(a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,!1),uF(this)),this._initialized=!0),f||(c(i.arrayBufferView)?x$(this,i.arrayBufferView,t,n,A,l):S$(this,i,t,n)),a.bindTexture(s,null)};yc.prototype.copyFromFramebuffer=function(e,t,n,i,o,r){e=e??0,t=t??0,n=n??0,i=i??0,o=o??this._width,r=r??this._height;let a=this._context._gl,s=this._textureTarget;a.activeTexture(a.TEXTURE0),a.bindTexture(s,this._texture),a.copyTexSubImage2D(s,0,e,t,n,i,o,r),a.bindTexture(s,null),this._initialized=!0};yc.prototype.generateMipmap=function(e){e=e??Bd.DONT_CARE,this._hasMipmap=!0;let t=this._context._gl,n=this._textureTarget;t.hint(t.GENERATE_MIPMAP_HINT,e),t.activeTexture(t.TEXTURE0),t.bindTexture(n,this._texture),t.generateMipmap(n),t.bindTexture(n,null)};yc.prototype.isDestroyed=function(){return!1};yc.prototype.destroy=function(){return this._context._gl.deleteTexture(this._texture),pe(this)};var gn=yc;function Rs(e){this.planes=e??[]}var Jg=[new u,new u,new u];u.clone(u.UNIT_X,Jg[0]);u.clone(u.UNIT_Y,Jg[1]);u.clone(u.UNIT_Z,Jg[2]);var Uf=new u,w$=new u,hF=new Ft(new u(1,0,0),0);Rs.fromBoundingSphere=function(e,t){c(t)||(t=new Rs);let n=Jg.length,i=t.planes;i.length=2*n;let o=e.center,r=e.radius,a=0;for(let s=0;s<n;++s){let A=Jg[s],l=i[a],f=i[a+1];c(l)||(l=i[a]=new se),c(f)||(f=i[a+1]=new se),u.multiplyByScalar(A,-r,Uf),u.add(o,Uf,Uf),l.x=A.x,l.y=A.y,l.z=A.z,l.w=-u.dot(A,Uf),u.multiplyByScalar(A,r,Uf),u.add(o,Uf,Uf),f.x=-A.x,f.y=-A.y,f.z=-A.z,f.w=-u.dot(u.negate(A,w$),Uf),a+=2}return t};Rs.prototype.computeVisibility=function(e){let t=this.planes,n=!1;for(let i=0,o=t.length;i<o;++i){let r=e.intersectPlane(Ft.fromCartesian4(t[i],hF));if(r===vt.OUTSIDE)return vt.OUTSIDE;r===vt.INTERSECTING&&(n=!0)}return n?vt.INTERSECTING:vt.INSIDE};Rs.prototype.computeVisibilityWithPlaneMask=function(e,t){if(t===Rs.MASK_OUTSIDE||t===Rs.MASK_INSIDE)return t;let n=Rs.MASK_INSIDE,i=this.planes;for(let o=0,r=i.length;o<r;++o){let a=o<31?1<<o:0;if(o<31&&(t&a)===0)continue;let s=e.intersectPlane(Ft.fromCartesian4(i[o],hF));if(s===vt.OUTSIDE)return Rs.MASK_OUTSIDE;s===vt.INTERSECTING&&(n|=a)}return n};Rs.MASK_OUTSIDE=4294967295;Rs.MASK_INSIDE=0;Rs.MASK_INDETERMINATE=2147483647;var xd=Rs;function gA(e){e=e??k.EMPTY_OBJECT,this.left=e.left,this._left=void 0,this.right=e.right,this._right=void 0,this.top=e.top,this._top=void 0,this.bottom=e.bottom,this._bottom=void 0,this.near=e.near??1,this._near=this.near,this.far=e.far??5e8,this._far=this.far,this._cullingVolume=new xd,this._orthographicMatrix=new O}function mF(e){(e.top!==e._top||e.bottom!==e._bottom||e.left!==e._left||e.right!==e._right||e.near!==e._near||e.far!==e._far)&&(e._left=e.left,e._right=e.right,e._top=e.top,e._bottom=e.bottom,e._near=e.near,e._far=e.far,e._orthographicMatrix=O.computeOrthographicOffCenter(e.left,e.right,e.bottom,e.top,e.near,e.far,e._orthographicMatrix))}Object.defineProperties(gA.prototype,{projectionMatrix:{get:function(){return mF(this),this._orthographicMatrix}}});var D$=new u,Q$=new u,R$=new u,RT=new u;gA.prototype.computeCullingVolume=function(e,t,n){let i=this._cullingVolume.planes,o=this.top,r=this.bottom,a=this.right,s=this.left,A=this.near,l=this.far,f=u.cross(t,n,D$);u.normalize(f,f);let h=Q$;u.multiplyByScalar(t,A,h),u.add(e,h,h);let m=R$;u.multiplyByScalar(f,s,m),u.add(h,m,m);let p=i[0];return c(p)||(p=i[0]=new se),p.x=f.x,p.y=f.y,p.z=f.z,p.w=-u.dot(f,m),u.multiplyByScalar(f,a,m),u.add(h,m,m),p=i[1],c(p)||(p=i[1]=new se),p.x=-f.x,p.y=-f.y,p.z=-f.z,p.w=-u.dot(u.negate(f,RT),m),u.multiplyByScalar(n,r,m),u.add(h,m,m),p=i[2],c(p)||(p=i[2]=new se),p.x=n.x,p.y=n.y,p.z=n.z,p.w=-u.dot(n,m),u.multiplyByScalar(n,o,m),u.add(h,m,m),p=i[3],c(p)||(p=i[3]=new se),p.x=-n.x,p.y=-n.y,p.z=-n.z,p.w=-u.dot(u.negate(n,RT),m),p=i[4],c(p)||(p=i[4]=new se),p.x=t.x,p.y=t.y,p.z=t.z,p.w=-u.dot(t,h),u.multiplyByScalar(t,l,m),u.add(e,m,m),p=i[5],c(p)||(p=i[5]=new se),p.x=-t.x,p.y=-t.y,p.z=-t.z,p.w=-u.dot(u.negate(t,RT),m),this._cullingVolume};gA.prototype.getPixelDimensions=function(e,t,n,i,o){mF(this);let r=this.right-this.left,a=this.top-this.bottom,s=i*r/e,A=i*a/t;return o.x=s,o.y=A,o};gA.prototype.clone=function(e){return c(e)||(e=new gA),e.left=this.left,e.right=this.right,e.top=this.top,e.bottom=this.bottom,e.near=this.near,e.far=this.far,e._left=void 0,e._right=void 0,e._top=void 0,e._bottom=void 0,e._near=void 0,e._far=void 0,e};gA.prototype.equals=function(e){return c(e)&&e instanceof gA&&this.right===e.right&&this.left===e.left&&this.top===e.top&&this.bottom===e.bottom&&this.near===e.near&&this.far===e.far};gA.prototype.equalsEpsilon=function(e,t,n){return e===this||c(e)&&e instanceof gA&&w.equalsEpsilon(this.right,e.right,t,n)&&w.equalsEpsilon(this.left,e.left,t,n)&&w.equalsEpsilon(this.top,e.top,t,n)&&w.equalsEpsilon(this.bottom,e.bottom,t,n)&&w.equalsEpsilon(this.near,e.near,t,n)&&w.equalsEpsilon(this.far,e.far,t,n)};var ey=gA;function Ea(e){e=e??k.EMPTY_OBJECT,this._offCenterFrustum=new ey,this.width=e.width,this._width=void 0,this.aspectRatio=e.aspectRatio,this._aspectRatio=void 0,this.near=e.near??1,this._near=this.near,this.far=e.far??5e8,this._far=this.far}Ea.packedLength=4;Ea.pack=function(e,t,n){return n=n??0,t[n++]=e.width,t[n++]=e.aspectRatio,t[n++]=e.near,t[n]=e.far,t};Ea.unpack=function(e,t,n){return t=t??0,c(n)||(n=new Ea),n.width=e[t++],n.aspectRatio=e[t++],n.near=e[t++],n.far=e[t],n};function Gf(e){let t=e._offCenterFrustum;if(e.width!==e._width||e.aspectRatio!==e._aspectRatio||e.near!==e._near||e.far!==e._far){e._aspectRatio=e.aspectRatio,e._width=e.width,e._near=e.near,e._far=e.far;let n=1/e.aspectRatio;t.right=e.width*.5,t.left=-t.right,t.top=n*t.right,t.bottom=-t.top,t.near=e.near,t.far=e.far}}Object.defineProperties(Ea.prototype,{projectionMatrix:{get:function(){return Gf(this),this._offCenterFrustum.projectionMatrix}},offCenterFrustum:{get:function(){return Gf(this),this._offCenterFrustum}}});Ea.prototype.computeCullingVolume=function(e,t,n){return Gf(this),this._offCenterFrustum.computeCullingVolume(e,t,n)};Ea.prototype.getPixelDimensions=function(e,t,n,i,o){return Gf(this),this._offCenterFrustum.getPixelDimensions(e,t,n,i,o)};Ea.prototype.clone=function(e){return c(e)||(e=new Ea),e.aspectRatio=this.aspectRatio,e.width=this.width,e.near=this.near,e.far=this.far,e._aspectRatio=void 0,e._width=void 0,e._near=void 0,e._far=void 0,this._offCenterFrustum.clone(e._offCenterFrustum),e};Ea.prototype.equals=function(e){return!c(e)||!(e instanceof Ea)?!1:(Gf(this),Gf(e),this.width===e.width&&this.aspectRatio===e.aspectRatio&&this._offCenterFrustum.equals(e._offCenterFrustum))};Ea.prototype.equalsEpsilon=function(e,t,n){return!c(e)||!(e instanceof Ea)?!1:(Gf(this),Gf(e),w.equalsEpsilon(this.width,e.width,t,n)&&w.equalsEpsilon(this.aspectRatio,e.aspectRatio,t,n)&&this._offCenterFrustum.equalsEpsilon(e._offCenterFrustum,t,n))};var am=Ea;var ty={MORPHING:0,COLUMBUS_VIEW:1,SCENE2D:2,SCENE3D:3};ty.getMorphTime=function(e){return e===ty.SCENE3D?1:e===ty.MORPHING?void 0:0};var Te=Object.freeze(ty);function sm(e){e=e??k.EMPTY_OBJECT;let{context:t,width:n,height:i,colorRenderbuffers:o,colorTextures:r,depthStencilRenderbuffer:a,depthStencilTexture:s,destroyAttachments:A}=e;if(this._width=n,this._height=i,c(o)!==c(r))throw new Ee("Both color renderbuffer and texture attachments must be provided.");if(c(a)!==c(s))throw new Ee("Both depth-stencil renderbuffer and texture attachments must be provided.");this._renderFramebuffer=new Ts({context:t,colorRenderbuffers:o,depthStencilRenderbuffer:a,destroyAttachments:A}),this._colorFramebuffer=new Ts({context:t,colorTextures:r,depthStencilTexture:s,destroyAttachments:A})}sm.prototype.getRenderFramebuffer=function(){return this._renderFramebuffer};sm.prototype.getColorFramebuffer=function(){return this._colorFramebuffer};sm.prototype.blitFramebuffers=function(e,t){this._renderFramebuffer.bindRead(),this._colorFramebuffer.bindDraw();let n=e._gl,i=0;this._colorFramebuffer._colorTextures.length>0&&(i|=n.COLOR_BUFFER_BIT),c(this._colorFramebuffer.depthStencilTexture)&&(i|=n.DEPTH_BUFFER_BIT|(t?n.STENCIL_BUFFER_BIT:0)),n.blitFramebuffer(0,0,this._width,this._height,0,0,this._width,this._height,i,n.NEAREST),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null)};sm.prototype.isDestroyed=function(){return!1};sm.prototype.destroy=function(){return this._renderFramebuffer.destroy(),this._colorFramebuffer.destroy(),pe(this)};var pF=sm;var Ia={RGBA4:V.RGBA4,RGBA8:V.RGBA8,RGBA16F:V.RGBA16F,RGBA32F:V.RGBA32F,RGB5_A1:V.RGB5_A1,RGB565:V.RGB565,DEPTH_COMPONENT16:V.DEPTH_COMPONENT16,STENCIL_INDEX8:V.STENCIL_INDEX8,DEPTH_STENCIL:V.DEPTH_STENCIL,DEPTH24_STENCIL8:V.DEPTH24_STENCIL8,validate:function(e){return e===Ia.RGBA4||e===Ia.RGBA8||e===Ia.RGBA16F||e===Ia.RGBA32F||e===Ia.RGB5_A1||e===Ia.RGB565||e===Ia.DEPTH_COMPONENT16||e===Ia.STENCIL_INDEX8||e===Ia.DEPTH_STENCIL||e===Ia.DEPTH24_STENCIL8},getColorFormat:function(e){return e===V.FLOAT?Ia.RGBA32F:e===V.HALF_FLOAT_OES?Ia.RGBA16F:Ia.RGBA8}},Td=Object.freeze(Ia);function Kg(e){e=e??k.EMPTY_OBJECT;let t=e.context,n=t._gl,i=pn.maximumRenderbufferSize,o=e.format??Td.RGBA4,r=c(e.width)?e.width:t.drawingBufferWidth,a=c(e.height)?e.height:t.drawingBufferHeight,s=e.numSamples??1;this._gl=n,this._format=o,this._width=r,this._height=a,this._renderbuffer=this._gl.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,this._renderbuffer),s>1?n.renderbufferStorageMultisample(n.RENDERBUFFER,s,o,r,a):n.renderbufferStorage(n.RENDERBUFFER,o,r,a),n.bindRenderbuffer(n.RENDERBUFFER,null)}Object.defineProperties(Kg.prototype,{format:{get:function(){return this._format}},width:{get:function(){return this._width}},height:{get:function(){return this._height}}});Kg.prototype._getRenderbuffer=function(){return this._renderbuffer};Kg.prototype.isDestroyed=function(){return!1};Kg.prototype.destroy=function(){return this._gl.deleteRenderbuffer(this._renderbuffer),pe(this)};var Xg=Kg;function Bo(e){e=e??k.EMPTY_OBJECT,this._numSamples=e.numSamples??1,this._colorAttachmentsLength=e.colorAttachmentsLength??1,this._color=e.color??!0,this._depth=e.depth??!1,this._depthStencil=e.depthStencil??!1,this._supportsDepthTexture=e.supportsDepthTexture??!1,this._createColorAttachments=e.createColorAttachments??!0,this._createDepthAttachments=e.createDepthAttachments??!0,this._pixelDatatype=e.pixelDatatype,this._pixelFormat=e.pixelFormat,this._width=void 0,this._height=void 0,this._framebuffer=void 0,this._multisampleFramebuffer=void 0,this._colorTextures=void 0,this._color&&(this._colorTextures=new Array(this._colorAttachmentsLength),this._colorRenderbuffers=new Array(this._colorAttachmentsLength)),this._colorRenderbuffer=void 0,this._depthStencilRenderbuffer=void 0,this._depthStencilTexture=void 0,this._depthRenderbuffer=void 0,this._depthTexture=void 0,this._attachmentsDirty=!1}Object.defineProperties(Bo.prototype,{framebuffer:{get:function(){return this._numSamples>1?this._multisampleFramebuffer.getRenderFramebuffer():this._framebuffer}},numSamples:{get:function(){return this._numSamples}},status:{get:function(){return this.framebuffer.status}}});Bo.prototype.isDirty=function(e,t,n,i,o){n=n??1;let r=this._width!==e||this._height!==t,a=this._numSamples!==n,s=c(i)&&this._pixelDatatype!==i||c(o)&&this._pixelFormat!==o,A=n===1?c(this._framebuffer):c(this._multisampleFramebuffer);return this._attachmentsDirty||r||a||s||!A||this._color&&!c(this._colorTextures[0])};Bo.prototype.update=function(e,t,n,i,o,r){if(i=e.msaa?i??1:1,o=o??(this._color?this._pixelDatatype??_t.UNSIGNED_BYTE:void 0),r=r??(this._color?this._pixelFormat??Bt.RGBA:void 0),this.isDirty(t,n,i,o,r)){if(this.destroy(),this._width=t,this._height=n,this._numSamples=i,this._pixelDatatype=o,this._pixelFormat=r,this._attachmentsDirty=!1,this._color&&this._createColorAttachments){for(let a=0;a<this._colorAttachmentsLength;++a)if(this._colorTextures[a]=new gn({context:e,width:t,height:n,pixelFormat:r,pixelDatatype:o,sampler:dn.NEAREST}),this._numSamples>1){let s=Td.getColorFormat(o);this._colorRenderbuffers[a]=new Xg({context:e,width:t,height:n,format:s,numSamples:this._numSamples})}}this._depthStencil&&this._createDepthAttachments&&(this._supportsDepthTexture&&e.depthTexture?(this._depthStencilTexture=new gn({context:e,width:t,height:n,pixelFormat:Bt.DEPTH_STENCIL,pixelDatatype:_t.UNSIGNED_INT_24_8,sampler:dn.NEAREST}),this._numSamples>1&&(this._depthStencilRenderbuffer=new Xg({context:e,width:t,height:n,format:Td.DEPTH24_STENCIL8,numSamples:this._numSamples}))):this._depthStencilRenderbuffer=new Xg({context:e,width:t,height:n,format:Td.DEPTH_STENCIL})),this._depth&&this._createDepthAttachments&&(this._supportsDepthTexture&&e.depthTexture?this._depthTexture=new gn({context:e,width:t,height:n,pixelFormat:Bt.DEPTH_COMPONENT,pixelDatatype:_t.UNSIGNED_INT,sampler:dn.NEAREST}):this._depthRenderbuffer=new Xg({context:e,width:t,height:n,format:Td.DEPTH_COMPONENT16})),this._numSamples>1?this._multisampleFramebuffer=new pF({context:e,width:this._width,height:this._height,colorTextures:this._colorTextures,colorRenderbuffers:this._colorRenderbuffers,depthStencilTexture:this._depthStencilTexture,depthStencilRenderbuffer:this._depthStencilRenderbuffer,destroyAttachments:!1}):this._framebuffer=new Ts({context:e,colorTextures:this._colorTextures,depthTexture:this._depthTexture,depthRenderbuffer:this._depthRenderbuffer,depthStencilTexture:this._depthStencilTexture,depthStencilRenderbuffer:this._depthStencilRenderbuffer,destroyAttachments:!1})}};Bo.prototype.getColorTexture=function(e){return e=e??0,this._colorTextures[e]};Bo.prototype.setColorTexture=function(e,t){t=t??0,this._attachmentsDirty=e!==this._colorTextures[t],this._colorTextures[t]=e};Bo.prototype.getColorRenderbuffer=function(e){return e=e??0,this._colorRenderbuffers[e]};Bo.prototype.setColorRenderbuffer=function(e,t){t=t??0,this._attachmentsDirty=e!==this._colorRenderbuffers[t],this._colorRenderbuffers[t]=e};Bo.prototype.getDepthRenderbuffer=function(){return this._depthRenderbuffer};Bo.prototype.setDepthRenderbuffer=function(e){this._attachmentsDirty=e!==this._depthRenderbuffer,this._depthRenderbuffer=e};Bo.prototype.getDepthTexture=function(){return this._depthTexture};Bo.prototype.setDepthTexture=function(e){this._attachmentsDirty=e!==this._depthTexture,this._depthTexture=e};Bo.prototype.getDepthStencilRenderbuffer=function(){return this._depthStencilRenderbuffer};Bo.prototype.setDepthStencilRenderbuffer=function(e){this._attachmentsDirty=e!==this._depthStencilRenderbuffer,this._depthStencilRenderbuffer=e};Bo.prototype.getDepthStencilTexture=function(){return this._depthStencilTexture};Bo.prototype.setDepthStencilTexture=function(e){this._attachmentsDirty=e!==this._depthStencilTexture,this._depthStencilTexture=e};Bo.prototype.prepareTextures=function(e,t){this._numSamples>1&&this._multisampleFramebuffer.blitFramebuffers(e,t)};Bo.prototype.clear=function(e,t,n){let i=t.framebuffer;t.framebuffer=this.framebuffer,t.execute(e,n),t.framebuffer=i};Bo.prototype.destroyFramebuffer=function(){this._framebuffer=this._framebuffer&&this._framebuffer.destroy(),this._multisampleFramebuffer=this._multisampleFramebuffer&&this._multisampleFramebuffer.destroy()};Bo.prototype.destroy=function(){if(this._color){let e=this._colorTextures,t=this._colorRenderbuffers;for(let n=0;n<e.length;++n){let i=e[n];this._createColorAttachments&&c(i)&&!i.isDestroyed()&&i.destroy(),c(i)&&i.isDestroyed()&&(e[n]=void 0);let o=t[n];this._createColorAttachments&&c(o)&&!o.isDestroyed()&&o.destroy(),c(o)&&o.isDestroyed()&&(t[n]=void 0)}}this._depthStencil&&(this._createDepthAttachments&&(this._depthStencilTexture=this._depthStencilTexture&&this._depthStencilTexture.destroy(),this._depthStencilRenderbuffer=this._depthStencilRenderbuffer&&this._depthStencilRenderbuffer.destroy()),c(this._depthStencilTexture)&&this._depthStencilTexture.isDestroyed()&&(this._depthStencilTexture=void 0),c(this._depthStencilRenderbuffer)&&this._depthStencilRenderbuffer.isDestroyed()&&(this._depthStencilRenderbuffer=void 0)),this._depth&&(this._createDepthAttachments&&(this._depthTexture=this._depthTexture&&this._depthTexture.destroy(),this._depthRenderbuffer=this._depthRenderbuffer&&this._depthRenderbuffer.destroy()),c(this._depthTexture)&&this._depthTexture.isDestroyed()&&(this._depthTexture=void 0),c(this._depthRenderbuffer)&&this._depthRenderbuffer.isDestroyed()&&(this._depthRenderbuffer=void 0)),this.destroyFramebuffer()};var gF=Bo;var Sd={VERTEX:0,FRAGMENT:1,BOTH:2};Sd.includesVertexShader=function(e){return e===Sd.VERTEX||e===Sd.BOTH};Sd.includesFragmentShader=function(e){return e===Sd.FRAGMENT||e===Sd.BOTH};var te=Object.freeze(Sd);function vT(e){this.name=e,this.fields=[]}vT.prototype.addField=function(e,t){let n=`    ${e} ${t};`;this.fields.push(n)};vT.prototype.generateGlslLines=function(){let e=this.fields;return e.length===0&&(e=["    float _empty;"]),[].concat(`struct ${this.name}`,"{",e,"};")};var CF=vT;function PT(e){this.signature=e,this.body=[]}PT.prototype.addLines=function(e){let t=this.body;if(Array.isArray(e)){let n=e.length;for(let i=0;i<n;i++)t.push(`    ${e[i]}`)}else t.push(`    ${e}`)};PT.prototype.generateGlslLines=function(){return[].concat(this.signature,"{",this.body,"}")};var _F=PT;function v$(e,t){if(!c(t))return;let n=t.length;if(n===0)return;let i=e.length;e.length+=n;for(let o=0;o<n;o++)e[i+o]=t[o]}var Gn=v$;function Kr(){this._positionAttributeLine=void 0,this._nextAttributeLocation=1,this._attributeLocations={},this._attributeLines=[],this._structs={},this._functions={},this._vertexShaderParts={defineLines:[],uniformLines:[],shaderLines:[],varyingLines:[],structIds:[],functionIds:[]},this._fragmentShaderParts={defineLines:[],uniformLines:[],shaderLines:[],varyingLines:[],structIds:[],functionIds:[]}}Object.defineProperties(Kr.prototype,{attributeLocations:{get:function(){return this._attributeLocations}}});Kr.prototype.addDefine=function(e,t,n){n=n??te.BOTH;let i=e;c(t)&&(i+=` ${t.toString()}`),te.includesVertexShader(n)&&this._vertexShaderParts.defineLines.push(i),te.includesFragmentShader(n)&&this._fragmentShaderParts.defineLines.push(i)};Kr.prototype.addStruct=function(e,t,n){this._structs[e]=new CF(t),te.includesVertexShader(n)&&this._vertexShaderParts.structIds.push(e),te.includesFragmentShader(n)&&this._fragmentShaderParts.structIds.push(e)};Kr.prototype.addStructField=function(e,t,n){this._structs[e].addField(t,n)};Kr.prototype.addFunction=function(e,t,n){this._functions[e]=new _F(t),te.includesVertexShader(n)&&this._vertexShaderParts.functionIds.push(e),te.includesFragmentShader(n)&&this._fragmentShaderParts.functionIds.push(e)};Kr.prototype.addFunctionLines=function(e,t){this._functions[e].addLines(t)};Kr.prototype.addUniform=function(e,t,n){n=n??te.BOTH;let i=`uniform ${e} ${t};`;te.includesVertexShader(n)&&this._vertexShaderParts.uniformLines.push(i),te.includesFragmentShader(n)&&this._fragmentShaderParts.uniformLines.push(i)};Kr.prototype.setPositionAttribute=function(e,t){return this._positionAttributeLine=`in ${e} ${t};`,this._attributeLocations[t]=0,0};Kr.prototype.addAttribute=function(e,t){let n=`in ${e} ${t};`;this._attributeLines.push(n);let i=this._nextAttributeLocation;return this._attributeLocations[t]=i,this._nextAttributeLocation+=M$(e),i};Kr.prototype.addVarying=function(e,t,n){n=c(n)?`${n} `:"";let i=`${e} ${t};`;this._vertexShaderParts.varyingLines.push(`${n}out ${i}`),this._fragmentShaderParts.varyingLines.push(`${n}in ${i}`)};Kr.prototype.addVertexLines=function(e){let t=this._vertexShaderParts.shaderLines;Array.isArray(e)?Gn(t,e):t.push(e)};Kr.prototype.addFragmentLines=function(e){let t=this._fragmentShaderParts.shaderLines;Array.isArray(e)?Gn(t,e):t.push(e)};Kr.prototype.buildShaderProgram=function(e){let t=c(this._positionAttributeLine)?[this._positionAttributeLine]:[],n=P$(this),i=O$(this),o=t.concat(this._attributeLines,this._vertexShaderParts.uniformLines,this._vertexShaderParts.varyingLines,n.vertexLines,i.vertexLines,this._vertexShaderParts.shaderLines).join(`
`),r=new It({defines:this._vertexShaderParts.defineLines,sources:[o]}),a=this._fragmentShaderParts.uniformLines.concat(this._fragmentShaderParts.varyingLines,n.fragmentLines,i.fragmentLines,this._fragmentShaderParts.shaderLines).join(`
`),s=new It({defines:this._fragmentShaderParts.defineLines,sources:[a]});return Bn.fromCache({context:e,vertexShaderSource:r,fragmentShaderSource:s,attributeLocations:this._attributeLocations})};Kr.prototype.clone=function(){return Ne(this,!0)};function P$(e){let t=[],n=[],i,o=e._vertexShaderParts.structIds,r,a,s;for(i=0;i<o.length;i++)r=o[i],a=e._structs[r],s=a.generateGlslLines(),Gn(t,s);for(o=e._fragmentShaderParts.structIds,i=0;i<o.length;i++)r=o[i],a=e._structs[r],s=a.generateGlslLines(),Gn(n,s);return{vertexLines:t,fragmentLines:n}}function M$(e){switch(e){case"mat2":return 2;case"mat3":return 3;case"mat4":return 4;default:return 1}}function O$(e){let t=[],n=[],i,o=e._vertexShaderParts.functionIds,r,a,s;for(i=0;i<o.length;i++)r=o[i],a=e._functions[r],s=a.generateGlslLines(),Gn(t,s);for(o=e._fragmentShaderParts.functionIds,i=0;i<o.length;i++)r=o[i],a=e._functions[r],s=a.generateGlslLines(),Gn(n,s);return{vertexLines:t,fragmentLines:n}}var ny=Kr;function Zg({x:e,y:t,width:n,height:i}){this.rectangle=new Jt(e,t,n,i),this.childNode1=void 0,this.childNode2=void 0,this.index=void 0}function MT({width:e,height:t,borderPadding:n}){this._width=e,this._height=t,this._borderPadding=n,this._root=new Zg({x:n,y:n,width:e-2*n,height:t-2*n})}MT.prototype.pack=function(e,{width:t,height:n}){let i=this._findNode(this._root,{width:t,height:n});if(c(i))return i.index=e,i};MT.prototype._findNode=function(e,{width:t,height:n}){if(c(e)){if(!c(e.childNode1)&&!c(e.childNode2)){if(c(e.index))return;let{rectangle:i}=e,o=i.width,r=i.height,a=o-t,s=r-n;return a<0||s<0?void 0:a===0&&s===0?e:a>s?(e.childNode1=new Zg({x:i.x,y:i.y,width:t,height:r}),e.childNode2=new Zg({x:i.x+t,y:i.y,width:a,height:r}),this._findNode(e.childNode1,{width:t,height:n})):(e.childNode1=new Zg({x:i.x,y:i.y,width:o,height:n}),e.childNode2=new Zg({x:i.x,y:i.y+n,width:o,height:s}),this._findNode(e.childNode1,{width:t,height:n}))}return this._findNode(e.childNode1,{width:t,height:n})||this._findNode(e.childNode2,{width:t,height:n})}};var OT=MT;var EF=16;function ya(e){e=e??k.EMPTY_OBJECT;let t=e.borderWidthInPixels??1,n=e.initialSize??new U(EF,EF);this._pixelFormat=e.pixelFormat??Bt.RGBA,this._sampler=e.sampler,this._borderWidthInPixels=t,this._initialSize=n,this._texturePacker=void 0,this._rectangles=[],this._subRegions=new Map,this._guid=oo(),this._imagesToAddQueue=[],this._indexById=new Map,this._indexPromiseById=new Map,this._nextIndex=0}Object.defineProperties(ya.prototype,{borderWidthInPixels:{get:function(){return this._borderWidthInPixels}},rectangles:{get:function(){return this._rectangles}},texture:{get:function(){return this._texture}},pixelFormat:{get:function(){return this._pixelFormat}},sampler:{get:function(){return this._sampler}},numberOfImages:{get:function(){return this._nextIndex}},guid:{get:function(){return this._guid}},sizeInBytes:{get:function(){return c(this._texture)?this._texture.sizeInBytes:0}}});ya.prototype.computeTextureCoordinates=function(e,t){let n=this._texture,i=this._rectangles[e];if(c(t)||(t=new Jt),!c(i))return t.x=0,t.y=0,t.width=0,t.height=0,t;let o=n.width,r=n.height,a=i.width,s=i.height,A=i.x,l=i.y,f=this._subRegions.get(e);if(c(f)){let h=this._rectangles[f];A+=h.x,l+=h.y}return t.x=A/o,t.y=l/r,t.width=a/o,t.height=s/r,t};ya.prototype._copyFromTexture=function(e,t,n,i){let o=this._pixelFormat,r=this._sampler,a=new gn({context:e,height:n,width:t,pixelFormat:o,sampler:r}),s=e._gl,A=a._textureTarget,l=this._texture,f=new Ts({context:e,colorTextures:[l],destroyAttachments:!1});s.activeTexture(s.TEXTURE0),s.bindTexture(A,a._texture),f._bind();let h=this.rectangles,m=this._subRegions;for(let p=0;p<h.length;++p){let g=i[p],C=h[p];if(!c(g)||!c(C)||c(m.get(p)))continue;let{x:_,y:E,width:I,height:y}=g;s.copyTexSubImage2D(A,0,_,E,C.x,C.y,I,y)}return s.bindTexture(A,null),a._initialized=!0,f._unBind(),f.destroy(),a};ya.prototype._resize=function(e,t=0){let n=this._borderWidthInPixels,i=this._rectangles,o=this._imagesToAddQueue,r=this._texture,a=r.width,s=r.height,A=this._subRegions,l=i.map((I,y)=>new IF({index:y,image:I})).filter((I,y)=>c(I.image)&&!c(A.get(y))),f=0,h=0,m=0;for(let I=t;I<o.length;++I){let{width:y,height:b}=o[I].image;f=Math.max(f,y),h=Math.max(h,b),m+=y*b,l.push(o[I])}a=Math.max(f,a),s=Math.max(h,s),e.webgl2||(a=w.nextPowerOfTwo(a),s=w.nextPowerOfTwo(s));let p=m,g=1;for(;p/a/s>=1;)g*=2,a>s?s*=g:a*=g;l.sort(({image:I},{image:y})=>y.height*y.width-I.height*I.width);let C=new Array(this._nextIndex);for(let I of this._subRegions.keys())c(A.get(I))&&(C[I]=i[I]);let _,E=!1;for(;!E;){_=new OT({height:s,width:a,borderPadding:n});let I;for(I=0;I<l.length;++I){let{index:y,image:b}=l[I];if(!c(b))continue;let x=_.pack(y,b);if(!c(x)){a>s?s*=2:a*=2;break}C[y]=x.rectangle}E=I===l.length}this._texturePacker=_,this._texture=this._copyFromTexture(e,a,s,C),r.destroy(),this._rectangles=C,this._guid=oo()};ya.prototype.getImageIndex=function(e){return this._indexById.get(e)};ya.prototype._copyImageToTexture=function({index:e,image:t,resolve:n,reject:i}){let o=this._texture,r=this._rectangles[e];try{o.copyFrom({source:t,xOffset:r.x,yOffset:r.y}),c(n)&&n(e)}catch(a){if(c(i)){i(a);return}}};function IF({index:e,image:t,resolve:n,reject:i}){this.index=e,this.image=t,this.resolve=n,this.reject=i,this.rectangle=void 0}ya.prototype._addImage=function(e,t){return new Promise((n,i)=>{this._imagesToAddQueue.push(new IF({index:e,image:t,resolve:n,reject:i})),this._imagesToAddQueue.sort(({image:o},{image:r})=>r.height*r.width-o.height*o.width)})};ya.prototype._processImageQueue=function(e){let t=this._imagesToAddQueue;if(t.length===0)return!1;this._rectangles.length=this._nextIndex;let n,i;for(n=0;n<t.length;++n){let o=t[n],{image:r,index:a}=o,s=this._texturePacker.pack(a,r);if(!c(s)){try{this._resize(e,n)}catch(A){i=A,c(o.reject)&&o.reject(i)}break}this._rectangles[a]=s.rectangle}if(c(i)){for(n=n+1;n<t.length;++n){let{resolve:o}=t[n];c(o)&&o(-1)}return t.length=0,!1}for(let o=0;o<t.length;++o)this._copyImageToTexture(t[o]);return t.length=0,!0};ya.prototype.update=function(e){if(!c(this._texture)){let t=this._initialSize.x,n=this._initialSize.y,i=this._pixelFormat,o=this._sampler,r=this._borderWidthInPixels;this._texture=new gn({context:e,width:t,height:n,pixelFormat:i,sampler:o}),this._texturePacker=new OT({height:n,width:t,borderPadding:r})}return this._processImageQueue(e)};async function L$(e,t){return typeof e=="function"&&(e=e(t)),(typeof e=="string"||e instanceof ke)&&(e=ke.createIfNeeded(e).fetchImage()),e}ya.prototype.addImage=function(e,t){let n=this._indexPromiseById.get(e);if(c(n))return n;let i=this._nextIndex++;return this._indexById.set(e,i),n=(async()=>(t=await L$(t,e),this.isDestroyed()||!c(t)?-1:this._addImage(i,t)))(),this._indexPromiseById.set(e,n),n};ya.prototype.addImageSubRegion=function(e,t){let n=this._indexById.get(e);if(!c(n))throw new oe(`image with id "${e}" not found in the atlas.`);let i=this._indexPromiseById.get(e);for(let[r,a]of this._subRegions.entries())if(n===a&&this._rectangles[r].equals(t))return i.then(A=>A===-1?-1:r);let o=this._nextIndex++;return this._subRegions.set(o,n),this._rectangles[o]=t.clone(),i.then(r=>{if(r===-1)return-1;let a=this._rectangles[r];return o})};ya.prototype.isDestroyed=function(){return!1};ya.prototype.destroy=function(){return this._texture=this._texture&&this._texture.destroy(),this._imagesToAddQueue.forEach(({resolve:e})=>{c(e)&&e(-1)}),pe(this)};var iy=ya;function Lo(e,t,n,i){let o=Lo._verifyAttributes(t);n=n??0;let r=[],a={},s,A,l=o.length;for(let h=0;h<l;++h){let m=o[h];if(m.vertexBuffer){r.push(m);continue}A=m.usage,s=a[A],c(s)||(s=a[A]=[]),s.push(m)}function f(h,m){return N.getSizeInBytes(m.componentDatatype)-N.getSizeInBytes(h.componentDatatype)}this._allBuffers=[];for(A in a)if(a.hasOwnProperty(A)){s=a[A],s.sort(f);let h=Lo._vertexSizeInBytes(s),m=s[0].usage,p={vertexSizeInBytes:h,vertexBuffer:void 0,usage:m,needsCommit:!1,arrayBuffer:void 0,arrayViews:Lo._createArrayViews(s,h)};this._allBuffers.push(p)}this._size=0,this._instanced=i??!1,this._precreated=r,this._context=e,this.writers=void 0,this.va=void 0,this.resize(n)}Lo._verifyAttributes=function(e){let t=[];for(let i=0;i<e.length;++i){let o=e[i],r={index:o.index??i,enabled:o.enabled??!0,componentsPerAttribute:o.componentsPerAttribute,componentDatatype:o.componentDatatype??N.FLOAT,normalize:o.normalize??!1,vertexBuffer:o.vertexBuffer,usage:o.usage??Me.STATIC_DRAW};t.push(r)}let n=new Array(t.length);for(let i=0;i<t.length;++i){let r=t[i].index;n[r]=!0}return t};Lo._vertexSizeInBytes=function(e){let t=0,n=e.length;for(let a=0;a<n;++a){let s=e[a];t+=s.componentsPerAttribute*N.getSizeInBytes(s.componentDatatype)}let i=n>0?N.getSizeInBytes(e[0].componentDatatype):0,o=i>0?t%i:0,r=o===0?0:i-o;return t+=r,t};Lo._createArrayViews=function(e,t){let n=[],i=0,o=e.length;for(let r=0;r<o;++r){let a=e[r],s=a.componentDatatype;n.push({index:a.index,enabled:a.enabled,componentsPerAttribute:a.componentsPerAttribute,componentDatatype:s,normalize:a.normalize,offsetInBytes:i,vertexSizeInComponentType:t/N.getSizeInBytes(s),view:void 0}),i+=a.componentsPerAttribute*N.getSizeInBytes(s)}return n};Lo.prototype.resize=function(e){this._size=e;let t=this._allBuffers;this.writers=[];for(let n=0,i=t.length;n<i;++n){let o=t[n];Lo._resize(o,this._size),Lo._appendWriters(this.writers,o)}LT(this)};Lo._resize=function(e,t){if(e.vertexSizeInBytes>0){let n=new ArrayBuffer(t*e.vertexSizeInBytes);if(c(e.arrayBuffer)){let r=new Uint8Array(n),a=new Uint8Array(e.arrayBuffer),s=a.length;for(let A=0;A<s;++A)r[A]=a[A]}let i=e.arrayViews,o=i.length;for(let r=0;r<o;++r){let a=i[r];a.view=N.createArrayBufferView(a.componentDatatype,n,a.offsetInBytes)}e.arrayBuffer=n}};var N$=[function(e,t,n){return function(i,o){t[i*n]=o,e.needsCommit=!0}},function(e,t,n){return function(i,o,r){let a=i*n;t[a]=o,t[a+1]=r,e.needsCommit=!0}},function(e,t,n){return function(i,o,r,a){let s=i*n;t[s]=o,t[s+1]=r,t[s+2]=a,e.needsCommit=!0}},function(e,t,n){return function(i,o,r,a,s){let A=i*n;t[A]=o,t[A+1]=r,t[A+2]=a,t[A+3]=s,e.needsCommit=!0}}];Lo._appendWriters=function(e,t){let n=t.arrayViews,i=n.length;for(let o=0;o<i;++o){let r=n[o];e[r.index]=N$[r.componentsPerAttribute-1](t,r.view,r.vertexSizeInComponentType)}};Lo.prototype.commit=function(e){let t=!1,n=this._allBuffers,i,o,r;for(o=0,r=n.length;o<r;++o)i=n[o],t=F$(this,i)||t;if(t||!c(this.va)){LT(this);let a=this.va=[],s=w.SIXTY_FOUR_KILOBYTES-4,A=c(e)&&!this._instanced?Math.ceil(this._size/s):1;for(let l=0;l<A;++l){let f=[];for(o=0,r=n.length;o<r;++o){i=n[o];let h=l*(i.vertexSizeInBytes*s);Lo._appendAttributes(f,i,h,this._instanced)}f=f.concat(this._precreated),a.push({va:new go({context:this._context,attributes:f,indexBuffer:e}),indicesCount:1.5*(l!==A-1?s:this._size%s)})}}};function F$(e,t){if(t.needsCommit&&t.vertexSizeInBytes>0){t.needsCommit=!1;let n=t.vertexBuffer,i=e._size*t.vertexSizeInBytes,o=c(n);if(!o||n.sizeInBytes<i)return o&&n.destroy(),t.vertexBuffer=dt.createVertexBuffer({context:e._context,typedArray:t.arrayBuffer,usage:t.usage}),t.vertexBuffer.vertexArrayDestroyable=!1,!0;t.vertexBuffer.copyFromArrayView(t.arrayBuffer)}return!1}Lo._appendAttributes=function(e,t,n,i){let o=t.arrayViews,r=o.length;for(let a=0;a<r;++a){let s=o[a];e.push({index:s.index,enabled:s.enabled,componentsPerAttribute:s.componentsPerAttribute,componentDatatype:s.componentDatatype,normalize:s.normalize,vertexBuffer:t.vertexBuffer,offsetInBytes:n+s.offsetInBytes,strideInBytes:t.vertexSizeInBytes,instanceDivisor:i?1:0})}};Lo.prototype.subCommit=function(e,t){let n=this._allBuffers;for(let i=0,o=n.length;i<o;++i)k$(n[i],e,t)};function k$(e,t,n){if(e.needsCommit&&e.vertexSizeInBytes>0){let i=e.vertexSizeInBytes*t,o=e.vertexSizeInBytes*n;e.vertexBuffer.copyFromArrayView(new Uint8Array(e.arrayBuffer,i,o),i)}}Lo.prototype.endSubCommits=function(){let e=this._allBuffers;for(let t=0,n=e.length;t<n;++t)e[t].needsCommit=!1};function LT(e){let t=e.va;if(!c(t))return;let n=t.length;for(let i=0;i<n;++i)t[i].va.destroy();e.va=void 0}Lo.prototype.isDestroyed=function(){return!1};Lo.prototype.destroy=function(){let e=this._allBuffers;for(let t=0,n=e.length;t<n;++t){let i=e[t];i.vertexBuffer=i.vertexBuffer&&i.vertexBuffer.destroy()}return LT(this),pe(this)};var oy=Lo;function zf(e){this._value=void 0,this._hasClone=!1,this._hasEquals=!1,this._definitionChanged=new fe,this.setValue(e)}Object.defineProperties(zf.prototype,{isConstant:{value:!0},definitionChanged:{get:function(){return this._definitionChanged}}});zf.prototype.getValue=function(e,t){return this._hasClone?this._value.clone(t):this._value};zf.prototype.setValue=function(e){let t=this._value;if(t!==e){let n=c(e),i=n&&typeof e.clone=="function",o=n&&typeof e.equals=="function";(!o||!e.equals(t))&&(this._hasClone=i,this._hasEquals=o,this._value=i?e.clone(this._value):e,this._definitionChanged.raiseEvent(this))}};zf.prototype.equals=function(e){return this===e||e instanceof zf&&(!this._hasEquals&&this._value===e._value||this._hasEquals&&this._value.equals(e._value))};zf.prototype.valueOf=function(){return this._value};zf.prototype.toString=function(){return String(this._value)};var li=zf;function U$(e,t,n,i,o){return{configurable:i,get:function(){return this[t]},set:function(r){let a=this[t],s=this[n];c(s)&&(s(),this[n]=void 0),r!==void 0&&(!c(r)||!c(r.getValue))&&c(o)&&(r=o(r)),a!==r&&(this[t]=r,this._definitionChanged.raiseEvent(this,e,r,a)),c(r)&&c(r.definitionChanged)&&(this[n]=r.definitionChanged.addEventListener(function(){this._definitionChanged.raiseEvent(this,e,r,r)},this))}}}function G$(e){return new li(e)}function z$(e,t,n){return U$(e,`_${e.toString()}`,`_${e.toString()}Subscription`,t??!1,n??G$)}var W=z$;function $g(e){this._definitionChanged=new fe,this._show=void 0,this._showSubscription=void 0,this._image=void 0,this._imageSubscription=void 0,this._scale=void 0,this._scaleSubscription=void 0,this._pixelOffset=void 0,this._pixelOffsetSubscription=void 0,this._eyeOffset=void 0,this._eyeOffsetSubscription=void 0,this._horizontalOrigin=void 0,this._horizontalOriginSubscription=void 0,this._verticalOrigin=void 0,this._verticalOriginSubscription=void 0,this._heightReference=void 0,this._heightReferenceSubscription=void 0,this._color=void 0,this._colorSubscription=void 0,this._rotation=void 0,this._rotationSubscription=void 0,this._alignedAxis=void 0,this._alignedAxisSubscription=void 0,this._sizeInMeters=void 0,this._sizeInMetersSubscription=void 0,this._width=void 0,this._widthSubscription=void 0,this._height=void 0,this._heightSubscription=void 0,this._scaleByDistance=void 0,this._scaleByDistanceSubscription=void 0,this._translucencyByDistance=void 0,this._translucencyByDistanceSubscription=void 0,this._pixelOffsetScaleByDistance=void 0,this._pixelOffsetScaleByDistanceSubscription=void 0,this._imageSubRegion=void 0,this._imageSubRegionSubscription=void 0,this._distanceDisplayCondition=void 0,this._distanceDisplayConditionSubscription=void 0,this._disableDepthTestDistance=void 0,this._disableDepthTestDistanceSubscription=void 0,this._splitDirection=void 0,this._splitDirectionSubscription=void 0,this.merge(e??k.EMPTY_OBJECT)}Object.defineProperties($g.prototype,{definitionChanged:{get:function(){return this._definitionChanged}},show:W("show"),image:W("image"),scale:W("scale"),pixelOffset:W("pixelOffset"),eyeOffset:W("eyeOffset"),horizontalOrigin:W("horizontalOrigin"),verticalOrigin:W("verticalOrigin"),heightReference:W("heightReference"),color:W("color"),rotation:W("rotation"),alignedAxis:W("alignedAxis"),sizeInMeters:W("sizeInMeters"),width:W("width"),height:W("height"),scaleByDistance:W("scaleByDistance"),translucencyByDistance:W("translucencyByDistance"),pixelOffsetScaleByDistance:W("pixelOffsetScaleByDistance"),imageSubRegion:W("imageSubRegion"),distanceDisplayCondition:W("distanceDisplayCondition"),disableDepthTestDistance:W("disableDepthTestDistance"),splitDirection:W("splitDirection")});$g.prototype.clone=function(e){return c(e)?(e.show=this._show,e.image=this._image,e.scale=this._scale,e.pixelOffset=this._pixelOffset,e.eyeOffset=this._eyeOffset,e.horizontalOrigin=this._horizontalOrigin,e.verticalOrigin=this._verticalOrigin,e.heightReference=this._heightReference,e.color=this._color,e.rotation=this._rotation,e.alignedAxis=this._alignedAxis,e.sizeInMeters=this._sizeInMeters,e.width=this._width,e.height=this._height,e.scaleByDistance=this._scaleByDistance,e.translucencyByDistance=this._translucencyByDistance,e.pixelOffsetScaleByDistance=this._pixelOffsetScaleByDistance,e.imageSubRegion=this._imageSubRegion,e.distanceDisplayCondition=this._distanceDisplayCondition,e.disableDepthTestDistance=this._disableDepthTestDistance,e.splitDirection=this._splitDirection,e):new $g(this)};$g.prototype.merge=function(e){this.show=this._show??e.show,this.image=this._image??e.image,this.scale=this._scale??e.scale,this.pixelOffset=this._pixelOffset??e.pixelOffset,this.eyeOffset=this._eyeOffset??e.eyeOffset,this.horizontalOrigin=this._horizontalOrigin??e.horizontalOrigin,this.verticalOrigin=this._verticalOrigin??e.verticalOrigin,this.heightReference=this._heightReference??e.heightReference,this.color=this._color??e.color,this.rotation=this._rotation??e.rotation,this.alignedAxis=this._alignedAxis??e.alignedAxis,this.sizeInMeters=this._sizeInMeters??e.sizeInMeters,this.width=this._width??e.width,this.height=this._height??e.height,this.scaleByDistance=this._scaleByDistance??e.scaleByDistance,this.translucencyByDistance=this._translucencyByDistance??e.translucencyByDistance,this.pixelOffsetScaleByDistance=this._pixelOffsetScaleByDistance??e.pixelOffsetScaleByDistance,this.imageSubRegion=this._imageSubRegion??e.imageSubRegion,this.distanceDisplayCondition=this._distanceDisplayCondition??e.distanceDisplayCondition,this.disableDepthTestDistance=this._disableDepthTestDistance??e.disableDepthTestDistance,this.splitDirection=this.splitDirection??e.splitDirection};var ry=$g;function wd(){this._array=[],this._hash={}}Object.defineProperties(wd.prototype,{length:{get:function(){return this._array.length}},values:{get:function(){return this._array}}});wd.prototype.contains=function(e){return c(this._hash[e])};wd.prototype.set=function(e,t){let n=this._hash[e];t!==n&&(this.remove(e),this._hash[e]=t,this._array.push(t))};wd.prototype.get=function(e){return this._hash[e]};wd.prototype.remove=function(e){let t=this._hash[e],n=c(t);if(n){let i=this._array;i.splice(i.indexOf(t),1),delete this._hash[e]}return n};wd.prototype.removeAll=function(){let e=this._array;e.length>0&&(this._hash={},e.length=0)};var ct=wd;function Ja(e,t){e=e??0,this._near=e,t=t??Number.MAX_VALUE,this._far=t}Object.defineProperties(Ja.prototype,{near:{get:function(){return this._near},set:function(e){this._near=e}},far:{get:function(){return this._far},set:function(e){this._far=e}}});Ja.packedLength=2;Ja.pack=function(e,t,n){return n=n??0,t[n++]=e.near,t[n]=e.far,t};Ja.unpack=function(e,t,n){return t=t??0,c(n)||(n=new Ja),n.near=e[t++],n.far=e[t],n};Ja.equals=function(e,t){return e===t||c(e)&&c(t)&&e.near===t.near&&e.far===t.far};Ja.clone=function(e,t){if(c(e))return c(t)||(t=new Ja),t.near=e.near,t.far=e.far,t};Ja.prototype.clone=function(e){return Ja.clone(this,e)};Ja.prototype.equals=function(e){return Ja.equals(this,e)};var rt=Ja;function vs(e,t,n,i){this.near=e??0,this.nearValue=t??0,this.far=n??1,this.farValue=i??0}vs.clone=function(e,t){if(c(e))return c(t)?(t.near=e.near,t.nearValue=e.nearValue,t.far=e.far,t.farValue=e.farValue,t):new vs(e.near,e.nearValue,e.far,e.farValue)};vs.packedLength=4;vs.pack=function(e,t,n){return n=n??0,t[n++]=e.near,t[n++]=e.nearValue,t[n++]=e.far,t[n]=e.farValue,t};vs.unpack=function(e,t,n){return t=t??0,c(n)||(n=new vs),n.near=e[t++],n.nearValue=e[t++],n.far=e[t++],n.farValue=e[t],n};vs.equals=function(e,t){return e===t||c(e)&&c(t)&&e.near===t.near&&e.nearValue===t.nearValue&&e.far===t.far&&e.farValue===t.farValue};vs.prototype.clone=function(e){return vs.clone(this,e)};vs.prototype.equals=function(e){return vs.equals(this,e)};var Rt=vs;var Dd={NONE:0,CLAMP_TO_GROUND:1,RELATIVE_TO_GROUND:2,CLAMP_TO_TERRAIN:3,RELATIVE_TO_TERRAIN:4,CLAMP_TO_3D_TILE:5,RELATIVE_TO_3D_TILE:6},Ge=Object.freeze(Dd);function Ps(e){return e===Dd.CLAMP_TO_GROUND||e===Dd.CLAMP_TO_3D_TILE||e===Dd.CLAMP_TO_TERRAIN}function cm(e){return e===Dd.RELATIVE_TO_GROUND||e===Dd.RELATIVE_TO_3D_TILE||e===Dd.RELATIVE_TO_TERRAIN}var H$={CENTER:0,LEFT:1,RIGHT:-1},pi=Object.freeze(H$);var V$={CENTER:0,BOTTOM:1,BASELINE:2,TOP:-1},yn=Object.freeze(V$);var j$=Object.freeze({DONE:0,PENDING:1,FAILED:2}),He=j$;function bc(){Ee.throwInstantiationError()}Object.defineProperties(bc.prototype,{isConstant:{get:Ee.throwInstantiationError},definitionChanged:{get:Ee.throwInstantiationError}});bc.prototype.getValue=Ee.throwInstantiationError;bc.prototype.equals=Ee.throwInstantiationError;bc.equals=function(e,t){return e===t||c(e)&&e.equals(t)};bc.arrayEquals=function(e,t){if(e===t)return!0;if(!c(e)||!c(t)||e.length!==t.length)return!1;let n=e.length;for(let i=0;i<n;i++)if(!bc.equals(e[i],t[i]))return!1;return!0};bc.isConstant=function(e){return!c(e)||e.isConstant};bc.getValueOrUndefined=function(e,t,n){return c(e)?e.getValue(t,n):void 0};bc.getValueOrDefault=function(e,t,n,i){return c(e)?e.getValue(t,i)??n:n};bc.getValueOrClonedDefault=function(e,t,n,i){let o;return c(e)&&(o=e.getValue(t,i)),c(o)||(o=n.clone(o)),o};var M=bc;var Y$={LEFT:-1,NONE:0,RIGHT:1},Zo=Object.freeze(Y$);var q$=F.WHITE,W$=u.ZERO,J$=Ge.NONE,K$=U.ZERO,X$=1,Z$=0,$$=u.ZERO,eee=pi.CENTER,tee=yn.CENTER,nee=!1,iee=Zo.NONE,oee=new u,ree=new F,aee=new u,see=new U,cee=new Rt,Aee=new Rt,lee=new Rt,fee=new Jt,uee=new rt;function yF(e){this.entity=e,this.billboard=void 0,this.textureValue=void 0}function Hf(e,t){t.collectionChanged.addEventListener(Hf.prototype._onCollectionChanged,this),this._cluster=e,this._entityCollection=t,this._items=new ct,this._onCollectionChanged(t,t.values,[],[])}Hf.prototype.update=function(e){let t=this._items.values,n=this._cluster;for(let i=0,o=t.length;i<o;i++){let r=t[i],a=r.entity,s=a._billboard,A,l=r.billboard,f=a.isShowing&&a.isAvailable(e)&&M.getValueOrDefault(s._show,e,!0),h;if(f&&(h=M.getValueOrUndefined(a._position,e,oee),A=M.getValueOrUndefined(s._image,e),f=c(h)&&c(A)),!f){NT(r,a,n);continue}M.isConstant(a._position)||(n._clusterDirty=!0),c(l)||(l=n.getBillboard(a),l.id=a,r.billboard=l,r.textureValue=void 0),l.show=f,r.textureValue!==A&&(l.image=A,r.textureValue=A),l.position=h,l.color=M.getValueOrDefault(s._color,e,q$,ree),l.eyeOffset=M.getValueOrDefault(s._eyeOffset,e,W$,aee),l.heightReference=M.getValueOrDefault(s._heightReference,e,J$),l.pixelOffset=M.getValueOrDefault(s._pixelOffset,e,K$,see),l.scale=M.getValueOrDefault(s._scale,e,X$),l.rotation=M.getValueOrDefault(s._rotation,e,Z$),l.alignedAxis=M.getValueOrDefault(s._alignedAxis,e,$$),l.horizontalOrigin=M.getValueOrDefault(s._horizontalOrigin,e,eee),l.verticalOrigin=M.getValueOrDefault(s._verticalOrigin,e,tee),l.width=M.getValueOrUndefined(s._width,e),l.height=M.getValueOrUndefined(s._height,e),l.scaleByDistance=M.getValueOrUndefined(s._scaleByDistance,e,cee),l.translucencyByDistance=M.getValueOrUndefined(s._translucencyByDistance,e,Aee),l.pixelOffsetScaleByDistance=M.getValueOrUndefined(s._pixelOffsetScaleByDistance,e,lee),l.sizeInMeters=M.getValueOrDefault(s._sizeInMeters,e,nee),l.distanceDisplayCondition=M.getValueOrUndefined(s._distanceDisplayCondition,e,uee),l.disableDepthTestDistance=M.getValueOrUndefined(s._disableDepthTestDistance,e),l.splitDirection=M.getValueOrDefault(s._splitDirection,e,iee);let m=M.getValueOrUndefined(s._imageSubRegion,e,fee);c(m)&&l.setImageSubRegion(l.image,m)}return!0};Hf.prototype.getBoundingSphere=function(e,t){let n=this._items.get(e.id);if(!c(n)||!c(n.billboard))return He.FAILED;let i=n.billboard;if(i.heightReference===Ge.NONE)t.center=u.clone(i.position,t.center);else{if(!c(i._clampedPosition))return He.PENDING;t.center=u.clone(i._clampedPosition,t.center)}return t.radius=0,He.DONE};Hf.prototype.isDestroyed=function(){return!1};Hf.prototype.destroy=function(){this._entityCollection.collectionChanged.removeEventListener(Hf.prototype._onCollectionChanged,this);let e=this._entityCollection.values;for(let t=0;t<e.length;t++)this._cluster.removeBillboard(e[t]);return pe(this)};Hf.prototype._onCollectionChanged=function(e,t,n,i){let o,r,a=this._items,s=this._cluster;for(o=t.length-1;o>-1;o--)r=t[o],c(r._billboard)&&c(r._position)&&a.set(r.id,new yF(r));for(o=i.length-1;o>-1;o--)r=i[o],c(r._billboard)&&c(r._position)?a.contains(r.id)||a.set(r.id,new yF(r)):(NT(a.get(r.id),r,s),a.remove(r.id));for(o=n.length-1;o>-1;o--)r=n[o],NT(a.get(r.id),r,s),a.remove(r.id)};function NT(e,t,n){c(e)&&(e.billboard=void 0,n.removeBillboard(t))}var bF=Hf;var dee=new u;function CA(e){e=e??k.EMPTY_OBJECT;let t=e.minimum,n=e.maximum;this._min=u.clone(t),this._max=u.clone(n),this._offsetAttribute=e.offsetAttribute,this._workerName="createBoxOutlineGeometry"}CA.fromDimensions=function(e){e=e??k.EMPTY_OBJECT;let t=e.dimensions,n=u.multiplyByScalar(t,.5,new u);return new CA({minimum:u.negate(n,new u),maximum:n,offsetAttribute:e.offsetAttribute})};CA.fromAxisAlignedBoundingBox=function(e){return new CA({minimum:e.minimum,maximum:e.maximum})};CA.packedLength=2*u.packedLength+1;CA.pack=function(e,t,n){return n=n??0,u.pack(e._min,t,n),u.pack(e._max,t,n+u.packedLength),t[n+u.packedLength*2]=e._offsetAttribute??-1,t};var xF=new u,TF=new u,BF={minimum:xF,maximum:TF,offsetAttribute:void 0};CA.unpack=function(e,t,n){t=t??0;let i=u.unpack(e,t,xF),o=u.unpack(e,t+u.packedLength,TF),r=e[t+u.packedLength*2];return c(n)?(n._min=u.clone(i,n._min),n._max=u.clone(o,n._max),n._offsetAttribute=r===-1?void 0:r,n):(BF.offsetAttribute=r===-1?void 0:r,new CA(BF))};CA.createGeometry=function(e){let t=e._min,n=e._max;if(u.equals(t,n))return;let i=new Mt,o=new Uint16Array(24),r=new Float64Array(24);r[0]=t.x,r[1]=t.y,r[2]=t.z,r[3]=n.x,r[4]=t.y,r[5]=t.z,r[6]=n.x,r[7]=n.y,r[8]=t.z,r[9]=t.x,r[10]=n.y,r[11]=t.z,r[12]=t.x,r[13]=t.y,r[14]=n.z,r[15]=n.x,r[16]=t.y,r[17]=n.z,r[18]=n.x,r[19]=n.y,r[20]=n.z,r[21]=t.x,r[22]=n.y,r[23]=n.z,i.position=new ue({componentDatatype:N.DOUBLE,componentsPerAttribute:3,values:r}),o[0]=4,o[1]=5,o[2]=5,o[3]=6,o[4]=6,o[5]=7,o[6]=7,o[7]=4,o[8]=0,o[9]=1,o[10]=1,o[11]=2,o[12]=2,o[13]=3,o[14]=3,o[15]=0,o[16]=0,o[17]=4,o[18]=1,o[19]=5,o[20]=2,o[21]=6,o[22]=3,o[23]=7;let a=u.subtract(n,t,dee),s=u.magnitude(a)*.5;if(c(e._offsetAttribute)){let A=r.length,l=e._offsetAttribute===xt.NONE?0:1,f=new Uint8Array(A/3).fill(l);i.applyOffset=new ue({componentDatatype:N.UNSIGNED_BYTE,componentsPerAttribute:1,values:f})}return new ze({attributes:i,indices:o,primitiveType:Ce.LINES,boundingSphere:new ee(u.ZERO,s),offsetAttribute:e._offsetAttribute})};var ay=CA;function Am(e,t,n,i){e=e??1,t=t??1,n=n??1,i=i??1,this.value=new Uint8Array([F.floatToByte(e),F.floatToByte(t),F.floatToByte(n),F.floatToByte(i)])}Object.defineProperties(Am.prototype,{componentDatatype:{get:function(){return N.UNSIGNED_BYTE}},componentsPerAttribute:{get:function(){return 4}},normalize:{get:function(){return!0}}});Am.fromColor=function(e){return new Am(e.red,e.green,e.blue,e.alpha)};Am.toValue=function(e,t){return c(t)?e.toBytes(t):new Uint8Array(e.toBytes())};Am.equals=function(e,t){return e===t||c(e)&&c(t)&&e.value[0]===t.value[0]&&e.value[1]===t.value[1]&&e.value[2]===t.value[2]&&e.value[3]===t.value[3]};var Tt=Am;function eC(e,t){e=e??0,t=t??Number.MAX_VALUE,this.value=new Float32Array([e,t])}Object.defineProperties(eC.prototype,{componentDatatype:{get:function(){return N.FLOAT}},componentsPerAttribute:{get:function(){return 2}},normalize:{get:function(){return!1}}});eC.fromDistanceDisplayCondition=function(e){return new eC(e.near,e.far)};eC.toValue=function(e,t){return c(t)?(t[0]=e.near,t[1]=e.far,t):new Float32Array([e.near,e.far])};var Kt=eC;function hee(e){e=e??k.EMPTY_OBJECT,this.geometry=e.geometry,this.modelMatrix=O.clone(e.modelMatrix??O.IDENTITY),this.id=e.id,this.pickPrimitive=e.pickPrimitive,this.attributes=e.attributes??{},this.westHemisphereGeometry=void 0,this.eastHemisphereGeometry=void 0}var gt=hee;function Ri(e){e=e??k.EMPTY_OBJECT,this.start=c(e.start)?X.clone(e.start):new X,this.stop=c(e.stop)?X.clone(e.stop):new X,this.data=e.data,this.isStartIncluded=e.isStartIncluded??!0,this.isStopIncluded=e.isStopIncluded??!0}Object.defineProperties(Ri.prototype,{isEmpty:{get:function(){let e=X.compare(this.stop,this.start);return e<0||e===0&&(!this.isStartIncluded||!this.isStopIncluded)}}});var lm={start:void 0,stop:void 0,isStartIncluded:void 0,isStopIncluded:void 0,data:void 0};Ri.fromIso8601=function(e,t){let n=e.iso8601.split("/");if(n.length!==2)throw new Ee("options.iso8601 is an invalid ISO 8601 interval.");let i=X.fromIso8601(n[0]),o=X.fromIso8601(n[1]),r=e.isStartIncluded??!0,a=e.isStopIncluded??!0,s=e.data;return c(t)?(t.start=i,t.stop=o,t.isStartIncluded=r,t.isStopIncluded=a,t.data=s,t):(lm.start=i,lm.stop=o,lm.isStartIncluded=r,lm.isStopIncluded=a,lm.data=s,new Ri(lm))};Ri.toIso8601=function(e,t){return`${X.toIso8601(e.start,t)}/${X.toIso8601(e.stop,t)}`};Ri.clone=function(e,t){if(c(e))return c(t)?(t.start=e.start,t.stop=e.stop,t.isStartIncluded=e.isStartIncluded,t.isStopIncluded=e.isStopIncluded,t.data=e.data,t):new Ri(e)};Ri.equals=function(e,t,n){return e===t||c(e)&&c(t)&&(e.isEmpty&&t.isEmpty||e.isStartIncluded===t.isStartIncluded&&e.isStopIncluded===t.isStopIncluded&&X.equals(e.start,t.start)&&X.equals(e.stop,t.stop)&&(e.data===t.data||c(n)&&n(e.data,t.data)))};Ri.equalsEpsilon=function(e,t,n,i){return n=n??0,e===t||c(e)&&c(t)&&(e.isEmpty&&t.isEmpty||e.isStartIncluded===t.isStartIncluded&&e.isStopIncluded===t.isStopIncluded&&X.equalsEpsilon(e.start,t.start,n)&&X.equalsEpsilon(e.stop,t.stop,n)&&(e.data===t.data||c(i)&&i(e.data,t.data)))};Ri.intersect=function(e,t,n,i){if(!c(t))return Ri.clone(Ri.EMPTY,n);let o=e.start,r=e.stop,a=t.start,s=t.stop,A=X.greaterThanOrEquals(a,o)&&X.greaterThanOrEquals(r,a),l=!A&&X.lessThanOrEquals(a,o)&&X.lessThanOrEquals(o,s);if(!A&&!l)return Ri.clone(Ri.EMPTY,n);let f=e.isStartIncluded,h=e.isStopIncluded,m=t.isStartIncluded,p=t.isStopIncluded,g=X.lessThan(r,s);return c(n)||(n=new Ri),n.start=A?a:o,n.isStartIncluded=f&&m||!X.equals(a,o)&&(A&&m||l&&f),n.stop=g?r:s,n.isStopIncluded=g?h:h&&p||!X.equals(s,r)&&p,n.data=c(i)?i(e.data,t.data):e.data,n};Ri.contains=function(e,t){if(e.isEmpty)return!1;let n=X.compare(e.start,t);if(n===0)return e.isStartIncluded;let i=X.compare(t,e.stop);return i===0?e.isStopIncluded:n<0&&i<0};Ri.prototype.clone=function(e){return Ri.clone(this,e)};Ri.prototype.equals=function(e,t){return Ri.equals(this,e,t)};Ri.prototype.equalsEpsilon=function(e,t,n){return Ri.equalsEpsilon(this,e,t,n)};Ri.prototype.toString=function(){return Ri.toIso8601(this)};Ri.EMPTY=Object.freeze(new Ri({start:new X,stop:new X,isStartIncluded:!1,isStopIncluded:!1}));var nn=Ri;var SF=Object.freeze(X.fromIso8601("0000-01-01T00:00:00Z")),wF=Object.freeze(X.fromIso8601("9999-12-31T24:00:00Z")),mee=Object.freeze(new nn({start:SF,stop:wF})),pee={MINIMUM_VALUE:SF,MAXIMUM_VALUE:wF,MAXIMUM_INTERVAL:mee},Re=pee;function tC(e,t,n){e=e??0,t=t??0,n=n??0,this.value=new Float32Array([e,t,n])}Object.defineProperties(tC.prototype,{componentDatatype:{get:function(){return N.FLOAT}},componentsPerAttribute:{get:function(){return 3}},normalize:{get:function(){return!1}}});tC.fromCartesian3=function(e){return new tC(e.x,e.y,e.z)};tC.toValue=function(e,t){return c(t)||(t=new Float32Array([e.x,e.y,e.z])),t[0]=e.x,t[1]=e.y,t[2]=e.z,t};var ii=tC;function sy(e){e=e??!0,this.value=sy.toValue(e)}Object.defineProperties(sy.prototype,{componentDatatype:{get:function(){return N.UNSIGNED_BYTE}},componentsPerAttribute:{get:function(){return 1}},normalize:{get:function(){return!1}}});sy.toValue=function(e,t){return c(t)?(t[0]=e,t):new Uint8Array([e])};var kt=sy;var DF=`in vec3 v_positionEC;
in vec3 v_normalEC;
in vec3 v_tangentEC;
in vec3 v_bitangentEC;
in vec2 v_st;

void main()
{
    vec3 positionToEyeEC = -v_positionEC;
    mat3 tangentToEyeMatrix = czm_tangentToEyeSpaceMatrix(v_normalEC, v_tangentEC, v_bitangentEC);

    vec3 normalEC = normalize(v_normalEC);
#ifdef FACE_FORWARD
    normalEC = faceforward(normalEC, vec3(0.0, 0.0, 1.0), -normalEC);
#endif

    czm_materialInput materialInput;
    materialInput.normalEC = normalEC;
    materialInput.tangentToEyeMatrix = tangentToEyeMatrix;
    materialInput.positionToEyeEC = positionToEyeEC;
    materialInput.st = v_st;
    czm_material material = czm_getMaterial(materialInput);

#ifdef FLAT
    out_FragColor = vec4(material.diffuse + material.emission, material.alpha);
#else
    out_FragColor = czm_phong(normalize(positionToEyeEC), material, czm_lightDirectionEC);
#endif
}
`;var QF=`in vec3 position3DHigh;
in vec3 position3DLow;
in vec3 normal;
in vec3 tangent;
in vec3 bitangent;
in vec2 st;
in float batchId;

out vec3 v_positionEC;
out vec3 v_normalEC;
out vec3 v_tangentEC;
out vec3 v_bitangentEC;
out vec2 v_st;

void main()
{
    vec4 p = czm_computePosition();

    v_positionEC = (czm_modelViewRelativeToEye * p).xyz;      // position in eye coordinates
    v_normalEC = czm_normal * normal;                         // normal in eye coordinates
    v_tangentEC = czm_normal * tangent;                       // tangent in eye coordinates
    v_bitangentEC = czm_normal * bitangent;                   // bitangent in eye coordinates
    v_st = st;

    gl_Position = czm_modelViewProjectionRelativeToEye * p;
}
`;var RF=`in vec3 v_positionEC;
in vec3 v_normalEC;

void main()
{
    vec3 positionToEyeEC = -v_positionEC;

    vec3 normalEC = normalize(v_normalEC);
#ifdef FACE_FORWARD
    normalEC = faceforward(normalEC, vec3(0.0, 0.0, 1.0), -normalEC);
#endif

    czm_materialInput materialInput;
    materialInput.normalEC = normalEC;
    materialInput.positionToEyeEC = positionToEyeEC;
    czm_material material = czm_getMaterial(materialInput);

#ifdef FLAT
    out_FragColor = vec4(material.diffuse + material.emission, material.alpha);
#else
    out_FragColor = czm_phong(normalize(positionToEyeEC), material, czm_lightDirectionEC);
#endif
}
`;var vF=`in vec3 position3DHigh;
in vec3 position3DLow;
in vec3 normal;
in float batchId;

out vec3 v_positionEC;
out vec3 v_normalEC;

void main()
{
    vec4 p = czm_computePosition();

    v_positionEC = (czm_modelViewRelativeToEye * p).xyz;      // position in eye coordinates
    v_normalEC = czm_normal * normal;                         // normal in eye coordinates

    gl_Position = czm_modelViewProjectionRelativeToEye * p;
}
`;var PF=`in vec3 v_positionEC;
in vec3 v_normalEC;
in vec2 v_st;

void main()
{
    vec3 positionToEyeEC = -v_positionEC;

    vec3 normalEC = normalize(v_normalEC);
#ifdef FACE_FORWARD
    normalEC = faceforward(normalEC, vec3(0.0, 0.0, 1.0), -normalEC);
#endif

    czm_materialInput materialInput;
    materialInput.normalEC = normalEC;
    materialInput.positionToEyeEC = positionToEyeEC;
    materialInput.st = v_st;
    czm_material material = czm_getMaterial(materialInput);

#ifdef FLAT
    out_FragColor = vec4(material.diffuse + material.emission, material.alpha);
#else
    out_FragColor = czm_phong(normalize(positionToEyeEC), material, czm_lightDirectionEC);
#endif
}
`;var MF=`in vec3 position3DHigh;
in vec3 position3DLow;
in vec3 normal;
in vec2 st;
in float batchId;

out vec3 v_positionEC;
out vec3 v_normalEC;
out vec2 v_st;

void main()
{
    vec4 p = czm_computePosition();

    v_positionEC = (czm_modelViewRelativeToEye * p).xyz;      // position in eye coordinates
    v_normalEC = czm_normal * normal;                         // normal in eye coordinates
    v_st = st;

    gl_Position = czm_modelViewProjectionRelativeToEye * p;
}
`;var gee={ADD:V.FUNC_ADD,SUBTRACT:V.FUNC_SUBTRACT,REVERSE_SUBTRACT:V.FUNC_REVERSE_SUBTRACT,MIN:V.MIN,MAX:V.MAX},Qd=Object.freeze(gee);var Cee={ZERO:V.ZERO,ONE:V.ONE,SOURCE_COLOR:V.SRC_COLOR,ONE_MINUS_SOURCE_COLOR:V.ONE_MINUS_SRC_COLOR,DESTINATION_COLOR:V.DST_COLOR,ONE_MINUS_DESTINATION_COLOR:V.ONE_MINUS_DST_COLOR,SOURCE_ALPHA:V.SRC_ALPHA,ONE_MINUS_SOURCE_ALPHA:V.ONE_MINUS_SRC_ALPHA,DESTINATION_ALPHA:V.DST_ALPHA,ONE_MINUS_DESTINATION_ALPHA:V.ONE_MINUS_DST_ALPHA,CONSTANT_COLOR:V.CONSTANT_COLOR,ONE_MINUS_CONSTANT_COLOR:V.ONE_MINUS_CONSTANT_COLOR,CONSTANT_ALPHA:V.CONSTANT_ALPHA,ONE_MINUS_CONSTANT_ALPHA:V.ONE_MINUS_CONSTANT_ALPHA,SOURCE_ALPHA_SATURATE:V.SRC_ALPHA_SATURATE},Ka=Object.freeze(Cee);var _ee={DISABLED:Object.freeze({enabled:!1}),ALPHA_BLEND:Object.freeze({enabled:!0,equationRgb:Qd.ADD,equationAlpha:Qd.ADD,functionSourceRgb:Ka.SOURCE_ALPHA,functionSourceAlpha:Ka.ONE,functionDestinationRgb:Ka.ONE_MINUS_SOURCE_ALPHA,functionDestinationAlpha:Ka.ONE_MINUS_SOURCE_ALPHA}),PRE_MULTIPLIED_ALPHA_BLEND:Object.freeze({enabled:!0,equationRgb:Qd.ADD,equationAlpha:Qd.ADD,functionSourceRgb:Ka.ONE,functionSourceAlpha:Ka.ONE,functionDestinationRgb:Ka.ONE_MINUS_SOURCE_ALPHA,functionDestinationAlpha:Ka.ONE_MINUS_SOURCE_ALPHA}),ADDITIVE_BLEND:Object.freeze({enabled:!0,equationRgb:Qd.ADD,equationAlpha:Qd.ADD,functionSourceRgb:Ka.SOURCE_ALPHA,functionSourceAlpha:Ka.ONE,functionDestinationRgb:Ka.ONE,functionDestinationAlpha:Ka.ONE})},qn=Object.freeze(_ee);var Eee={FRONT:V.FRONT,BACK:V.BACK,FRONT_AND_BACK:V.FRONT_AND_BACK},No=Object.freeze(Eee);function fm(e){e=e??k.EMPTY_OBJECT,this.material=e.material,this.translucent=e.translucent??!0,this._vertexShaderSource=e.vertexShaderSource,this._fragmentShaderSource=e.fragmentShaderSource,this._renderState=e.renderState,this._closed=e.closed??!1}Object.defineProperties(fm.prototype,{vertexShaderSource:{get:function(){return this._vertexShaderSource}},fragmentShaderSource:{get:function(){return this._fragmentShaderSource}},renderState:{get:function(){return this._renderState}},closed:{get:function(){return this._closed}}});fm.prototype.getFragmentShaderSource=function(){let e=[];return this.flat&&e.push("#define FLAT"),this.faceForward&&e.push("#define FACE_FORWARD"),c(this.material)&&e.push(this.material.shaderSource),e.push(this.fragmentShaderSource),e.join(`
`)};fm.prototype.isTranslucent=function(){return c(this.material)&&this.material.isTranslucent()||!c(this.material)&&this.translucent};fm.prototype.getRenderState=function(){let e=this.isTranslucent(),t=Ne(this.renderState,!1);return e?(t.depthMask=!1,t.blending=qn.ALPHA_BLEND):t.depthMask=!0,t};fm.getDefaultRenderState=function(e,t,n){let i={depthTest:{enabled:!0}};return e&&(i.depthMask=!1,i.blending=qn.ALPHA_BLEND),t&&(i.cull={enabled:!0,face:No.BACK}),c(n)&&(i=Et(n,i,!0)),i};var xo=fm;var OF=`uniform sampler2D image;

czm_material czm_getMaterial(czm_materialInput materialInput)
{
    czm_material material = czm_getDefaultMaterial(materialInput);
    vec4 rampColor = texture(image, vec2(materialInput.aspect / (2.0 * czm_pi), 0.5));
    rampColor = czm_gammaCorrect(rampColor);
    material.diffuse = rampColor.rgb;
    material.alpha = rampColor.a;
    return material;
}
`;var LF=`uniform sampler2D image;
uniform float strength;
uniform vec2 repeat;

czm_material czm_getMaterial(czm_materialInput materialInput)
{
    czm_material material = czm_getDefaultMaterial(materialInput);

    vec2 st = materialInput.st;

    vec2 centerPixel = fract(repeat * st);
    float centerBump = texture(image, centerPixel).channel;

    float imageWidth = float(imageDimensions.x);
    vec2 rightPixel = fract(repeat * (st + vec2(1.0 / imageWidth, 0.0)));
    float rightBump = texture(image, rightPixel).channel;

    float imageHeight = float(imageDimensions.y);
    vec2 leftPixel = fract(repeat * (st + vec2(0.0, 1.0 / imageHeight)));
    float topBump = texture(image, leftPixel).channel;

    vec3 normalTangentSpace = normalize(vec3(centerBump - rightBump, centerBump - topBump, clamp(1.0 - strength, 0.1, 1.0)));
    vec3 normalEC = materialInput.tangentToEyeMatrix * normalTangentSpace;

    material.normal = normalEC;
    material.diffuse = vec3(0.01);

    return material;
}
`;var NF=`uniform vec4 lightColor;
uniform vec4 darkColor;
uniform vec2 repeat;

czm_material czm_getMaterial(czm_materialInput materialInput)
{
    czm_material material = czm_getDefaultMaterial(materialInput);

    vec2 st = materialInput.st;

    // From Stefan Gustavson's Procedural Textures in GLSL in OpenGL Insights
    float b = mod(floor(repeat.s * st.s) + floor(repeat.t * st.t), 2.0);  // 0.0 or 1.0

    // Find the distance from the closest separator (region between two colors)
    float scaledWidth = fract(repeat.s * st.s);
    scaledWidth = abs(scaledWidth - floor(scaledWidth + 0.5));
    float scaledHeight = fract(repeat.t * st.t);
    scaledHeight = abs(scaledHeight - floor(scaledHeight + 0.5));
    float value = min(scaledWidth, scaledHeight);

    vec4 currentColor = mix(lightColor, darkColor, b);
    vec4 color = czm_antialias(lightColor, darkColor, currentColor, value, 0.03);

    color = czm_gammaCorrect(color);
    material.diffuse = color.rgb;
    material.alpha = color.a;

    return material;
}
`;var FF=`uniform vec4 lightColor;
uniform vec4 darkColor;
uniform vec2 repeat;

czm_material czm_getMaterial(czm_materialInput materialInput)
{
    czm_material material = czm_getDefaultMaterial(materialInput);

    // From Stefan Gustavson's Procedural Textures in GLSL in OpenGL Insights
    float b = smoothstep(0.3, 0.32, length(fract(repeat * materialInput.st) - 0.5));  // 0.0 or 1.0

    vec4 color = mix(lightColor, darkColor, b);
    color = czm_gammaCorrect(color);
    material.diffuse = color.rgb;
    material.alpha = color.a;

    return material;
}
`;var kF=`uniform sampler2D heights;
uniform sampler2D colors;

// This material expects heights to be sorted from lowest to highest.

float getHeight(int idx, float invTexSize)
{
    vec2 uv = vec2((float(idx) + 0.5) * invTexSize, 0.5);
#ifdef OES_texture_float
    return texture(heights, uv).x;
#else
    return czm_unpackFloat(texture(heights, uv));
#endif
}

czm_material czm_getMaterial(czm_materialInput materialInput)
{
    czm_material material = czm_getDefaultMaterial(materialInput);

    float height = materialInput.height;
    float invTexSize = 1.0 / float(heightsDimensions.x);

    float minHeight = getHeight(0, invTexSize);
    float maxHeight = getHeight(heightsDimensions.x - 1, invTexSize);

    // early-out when outside the height range
    if (height < minHeight || height > maxHeight) {
        material.diffuse = vec3(0.0);
        material.alpha = 0.0;
        return material;
    }

    // Binary search to find heights above and below.
    int idxBelow = 0;
    int idxAbove = heightsDimensions.x;
    float heightBelow = minHeight;
    float heightAbove = maxHeight;

    // while loop not allowed, so use for loop with max iterations.
    // maxIterations of 16 supports a texture size up to 65536 (2^16).
    const int maxIterations = 16;
    for (int i = 0; i < maxIterations; i++) {
        if (idxBelow >= idxAbove - 1) {
            break;
        }

        int idxMid = (idxBelow + idxAbove) / 2;
        float heightTex = getHeight(idxMid, invTexSize);

        if (height > heightTex) {
            idxBelow = idxMid;
            heightBelow = heightTex;
        } else {
            idxAbove = idxMid;
            heightAbove = heightTex;
        }
    }

    float lerper = heightBelow == heightAbove ? 1.0 : (height - heightBelow) / (heightAbove - heightBelow);
    vec2 colorUv = vec2(invTexSize * (float(idxBelow) + 0.5 + lerper), 0.5);
    vec4 color = texture(colors, colorUv);

    // undo preumultiplied alpha
    if (color.a > 0.0) 
    {
        color.rgb /= color.a;
    }
    
    color.rgb = czm_gammaCorrect(color.rgb);

    material.diffuse = color.rgb;
    material.alpha = color.a;
    return material;
}
`;var UF=`uniform vec4 color;
uniform float spacing;
uniform float width;

czm_material czm_getMaterial(czm_materialInput materialInput)
{
    czm_material material = czm_getDefaultMaterial(materialInput);

    float distanceToContour = mod(materialInput.height, spacing);

#if (__VERSION__ == 300 || defined(GL_OES_standard_derivatives))
    float dxc = abs(dFdx(materialInput.height));
    float dyc = abs(dFdy(materialInput.height));
    float dF = max(dxc, dyc) * czm_pixelRatio * width;
    float alpha = (distanceToContour < dF) ? 1.0 : 0.0;
#else
    // If no derivatives available (IE 10?), use pixel ratio
    float alpha = (distanceToContour < (czm_pixelRatio * width)) ? 1.0 : 0.0;
#endif

    vec4 outColor = czm_gammaCorrect(vec4(color.rgb, alpha * color.a));
    material.diffuse = outColor.rgb;
    material.alpha = outColor.a;

    return material;
}
`;var GF=`uniform sampler2D image;
uniform float minimumHeight;
uniform float maximumHeight;

czm_material czm_getMaterial(czm_materialInput materialInput)
{
    czm_material material = czm_getDefaultMaterial(materialInput);
    float scaledHeight = clamp((materialInput.height - minimumHeight) / (maximumHeight - minimumHeight), 0.0, 1.0);
    vec4 rampColor = texture(image, vec2(scaledHeight, 0.5));
    rampColor = czm_gammaCorrect(rampColor);
    material.diffuse = rampColor.rgb;
    material.alpha = rampColor.a;
    return material;
}
`;var zF=`uniform vec4 fadeInColor;
uniform vec4 fadeOutColor;
uniform float maximumDistance;
uniform bool repeat;
uniform vec2 fadeDirection;
uniform vec2 time;

float getTime(float t, float coord)
{
    float scalar = 1.0 / maximumDistance;
    float q  = distance(t, coord) * scalar;
    if (repeat)
    {
        float r = distance(t, coord + 1.0) * scalar;
        float s = distance(t, coord - 1.0) * scalar;
        q = min(min(r, s), q);
    }
    return clamp(q, 0.0, 1.0);
}

czm_material czm_getMaterial(czm_materialInput materialInput)
{
    czm_material material = czm_getDefaultMaterial(materialInput);

    vec2 st = materialInput.st;
    float s = getTime(time.x, st.s) * fadeDirection.s;
    float t = getTime(time.y, st.t) * fadeDirection.t;

    float u = length(vec2(s, t));
    vec4 color = mix(fadeInColor, fadeOutColor, u);

    color = czm_gammaCorrect(color);
    material.emission = color.rgb;
    material.alpha = color.a;

    return material;
}
`;var HF=`uniform vec4 color;
uniform float cellAlpha;
uniform vec2 lineCount;
uniform vec2 lineThickness;
uniform vec2 lineOffset;

czm_material czm_getMaterial(czm_materialInput materialInput)
{
    czm_material material = czm_getDefaultMaterial(materialInput);

    vec2 st = materialInput.st;

    float scaledWidth = fract(lineCount.s * st.s - lineOffset.s);
    scaledWidth = abs(scaledWidth - floor(scaledWidth + 0.5));
    float scaledHeight = fract(lineCount.t * st.t - lineOffset.t);
    scaledHeight = abs(scaledHeight - floor(scaledHeight + 0.5));

    float value;

    // Fuzz Factor - Controls blurriness of lines
#if (__VERSION__ == 300 || defined(GL_OES_standard_derivatives))
    const float fuzz = 1.2;
    vec2 thickness = (lineThickness * czm_pixelRatio) - 1.0;

    // From "3D Engine Design for Virtual Globes" by Cozzi and Ring, Listing 4.13.
    vec2 dx = abs(dFdx(st));
    vec2 dy = abs(dFdy(st));
    vec2 dF = vec2(max(dx.s, dy.s), max(dx.t, dy.t)) * lineCount;
    value = min(
        smoothstep(dF.s * thickness.s, dF.s * (fuzz + thickness.s), scaledWidth),
        smoothstep(dF.t * thickness.t, dF.t * (fuzz + thickness.t), scaledHeight));
#else
    // If no derivatives available (IE 10?), revert to view-dependent fuzz
    const float fuzz = 0.05;

    vec2 range = 0.5 - (lineThickness * 0.05);
    value = min(
        1.0 - smoothstep(range.s, range.s + fuzz, scaledWidth),
        1.0 - smoothstep(range.t, range.t + fuzz, scaledHeight));
#endif

    // Edges taken from RimLightingMaterial.glsl
    // See http://www.fundza.com/rman_shaders/surface/fake_rim/fake_rim1.html
    float dRim = 1.0 - abs(dot(materialInput.normalEC, normalize(materialInput.positionToEyeEC)));
    float sRim = smoothstep(0.8, 1.0, dRim);
    value *= (1.0 - sRim);

    vec4 halfColor;
    halfColor.rgb = color.rgb * 0.5;
    halfColor.a = color.a * (1.0 - ((1.0 - cellAlpha) * value));
    halfColor = czm_gammaCorrect(halfColor);
    material.diffuse = halfColor.rgb;
    material.emission = halfColor.rgb;
    material.alpha = halfColor.a;

    return material;
}
`;var VF=`uniform sampler2D image;
uniform float strength;
uniform vec2 repeat;

czm_material czm_getMaterial(czm_materialInput materialInput)
{
    czm_material material = czm_getDefaultMaterial(materialInput);
    
    vec4 textureValue = texture(image, fract(repeat * materialInput.st));
    vec3 normalTangentSpace = textureValue.channels;
    normalTangentSpace.xy = normalTangentSpace.xy * 2.0 - 1.0;
    normalTangentSpace.z = clamp(1.0 - strength, 0.1, 1.0);
    normalTangentSpace = normalize(normalTangentSpace);
    vec3 normalEC = materialInput.tangentToEyeMatrix * normalTangentSpace;
    
    material.normal = normalEC;
    
    return material;
}
`;var jF=`uniform vec4 color;

float getPointOnLine(vec2 p0, vec2 p1, float x)
{
    float slope = (p0.y - p1.y) / (p0.x - p1.x);
    return slope * (x - p0.x) + p0.y;
}

czm_material czm_getMaterial(czm_materialInput materialInput)
{
    czm_material material = czm_getDefaultMaterial(materialInput);

    vec2 st = materialInput.st;

#if (__VERSION__ == 300 || defined(GL_OES_standard_derivatives))
    float base = 1.0 - abs(fwidth(st.s)) * 10.0 * czm_pixelRatio;
#else
     // If no derivatives available (IE 10?), 2.5% of the line will be the arrow head
    float base = 0.975;
#endif

    vec2 center = vec2(1.0, 0.5);
    float ptOnUpperLine = getPointOnLine(vec2(base, 1.0), center, st.s);
    float ptOnLowerLine = getPointOnLine(vec2(base, 0.0), center, st.s);

    float halfWidth = 0.15;
    float s = step(0.5 - halfWidth, st.t);
    s *= 1.0 - step(0.5 + halfWidth, st.t);
    s *= 1.0 - step(base, st.s);

    float t = step(base, materialInput.st.s);
    t *= 1.0 - step(ptOnUpperLine, st.t);
    t *= step(ptOnLowerLine, st.t);

    // Find the distance from the closest separator (region between two colors)
    float dist;
    if (st.s < base)
    {
        float d1 = abs(st.t - (0.5 - halfWidth));
        float d2 = abs(st.t - (0.5 + halfWidth));
        dist = min(d1, d2);
    }
    else
    {
        float d1 = czm_infinity;
        if (st.t < 0.5 - halfWidth && st.t > 0.5 + halfWidth)
        {
            d1 = abs(st.s - base);
        }
        float d2 = abs(st.t - ptOnUpperLine);
        float d3 = abs(st.t - ptOnLowerLine);
        dist = min(min(d1, d2), d3);
    }

    vec4 outsideColor = vec4(0.0);
    vec4 currentColor = mix(outsideColor, color, clamp(s + t, 0.0, 1.0));
    vec4 outColor = czm_antialias(outsideColor, color, currentColor, dist);

    outColor = czm_gammaCorrect(outColor);
    material.diffuse = outColor.rgb;
    material.alpha = outColor.a;
    return material;
}
`;var YF=`uniform vec4 color;
uniform vec4 gapColor;
uniform float dashLength;
uniform float dashPattern;
in float v_polylineAngle;

const float maskLength = 16.0;

mat2 rotate(float rad) {
    float c = cos(rad);
    float s = sin(rad);
    return mat2(
        c, s,
        -s, c
    );
}

czm_material czm_getMaterial(czm_materialInput materialInput)
{
    czm_material material = czm_getDefaultMaterial(materialInput);

    vec2 pos = rotate(v_polylineAngle) * gl_FragCoord.xy;

    // Get the relative position within the dash from 0 to 1
    float dashPosition = fract(pos.x / (dashLength * czm_pixelRatio));
    // Figure out the mask index.
    float maskIndex = floor(dashPosition * maskLength);
    // Test the bit mask.
    float maskTest = floor(dashPattern / pow(2.0, maskIndex));
    vec4 fragColor = (mod(maskTest, 2.0) < 1.0) ? gapColor : color;
    if (fragColor.a < 0.005) {   // matches 0/255 and 1/255
        discard;
    }

    fragColor = czm_gammaCorrect(fragColor);
    material.emission = fragColor.rgb;
    material.alpha = fragColor.a;
    return material;
}
`;var qF=`uniform vec4 color;
uniform float glowPower;
uniform float taperPower;

czm_material czm_getMaterial(czm_materialInput materialInput)
{
    czm_material material = czm_getDefaultMaterial(materialInput);

    vec2 st = materialInput.st;
    float glow = glowPower / abs(st.t - 0.5) - (glowPower / 0.5);

    if (taperPower <= 0.99999) {
        glow *= min(1.0, taperPower / (0.5 - st.s * 0.5) - (taperPower / 0.5));
    }

    vec4 fragColor;
    fragColor.rgb = max(vec3(glow - 1.0 + color.rgb), color.rgb);
    fragColor.a = clamp(0.0, 1.0, glow) * color.a;
    fragColor = czm_gammaCorrect(fragColor);

    material.emission = fragColor.rgb;
    material.alpha = fragColor.a;

    return material;
}
`;var WF=`uniform vec4 color;
uniform vec4 outlineColor;
uniform float outlineWidth;

in float v_width;

czm_material czm_getMaterial(czm_materialInput materialInput)
{
    czm_material material = czm_getDefaultMaterial(materialInput);

    vec2 st = materialInput.st;
    float halfInteriorWidth =  0.5 * (v_width - outlineWidth) / v_width;
    float b = step(0.5 - halfInteriorWidth, st.t);
    b *= 1.0 - step(0.5 + halfInteriorWidth, st.t);

    // Find the distance from the closest separator (region between two colors)
    float d1 = abs(st.t - (0.5 - halfInteriorWidth));
    float d2 = abs(st.t - (0.5 + halfInteriorWidth));
    float dist = min(d1, d2);

    vec4 currentColor = mix(outlineColor, color, b);
    vec4 outColor = czm_antialias(outlineColor, color, currentColor, dist);
    outColor = czm_gammaCorrect(outColor);

    material.diffuse = outColor.rgb;
    material.alpha = outColor.a;

    return material;
}
`;var JF=`uniform vec4 color;
uniform vec4 rimColor;
uniform float width;

czm_material czm_getMaterial(czm_materialInput materialInput)
{
    czm_material material = czm_getDefaultMaterial(materialInput);

    // See http://www.fundza.com/rman_shaders/surface/fake_rim/fake_rim1.html
    float d = 1.0 - dot(materialInput.normalEC, normalize(materialInput.positionToEyeEC));
    float s = smoothstep(1.0 - width, 1.0, d);

    vec4 outColor = czm_gammaCorrect(color);
    vec4 outRimColor = czm_gammaCorrect(rimColor);

    material.diffuse = outColor.rgb;
    material.emission = outRimColor.rgb * s;
    material.alpha = mix(outColor.a, outRimColor.a, s);

    return material;
}
`;var KF=`uniform sampler2D image;

czm_material czm_getMaterial(czm_materialInput materialInput)
{
    czm_material material = czm_getDefaultMaterial(materialInput);
    vec4 rampColor = texture(image, vec2(materialInput.slope / (czm_pi / 2.0), 0.5));
    rampColor = czm_gammaCorrect(rampColor);
    material.diffuse = rampColor.rgb;
    material.alpha = rampColor.a;
    return material;
}
`;var XF=`uniform vec4 evenColor;
uniform vec4 oddColor;
uniform float offset;
uniform float repeat;
uniform bool horizontal;

czm_material czm_getMaterial(czm_materialInput materialInput)
{
    czm_material material = czm_getDefaultMaterial(materialInput);

    // Based on the Stripes Fragment Shader in the Orange Book (11.1.2)
    float coord = mix(materialInput.st.s, materialInput.st.t, float(horizontal));
    float value = fract((coord - offset) * (repeat * 0.5));
    float dist = min(value, min(abs(value - 0.5), 1.0 - value));

    vec4 currentColor = mix(evenColor, oddColor, step(0.5, value));
    vec4 color = czm_antialias(evenColor, oddColor, currentColor, dist);
    color = czm_gammaCorrect(color);

    material.diffuse = color.rgb;
    material.alpha = color.a;

    return material;
}
`;var ZF=`uniform vec4 waterColor;
uniform vec4 landColor;

czm_material czm_getMaterial(czm_materialInput materialInput)
{
    czm_material material = czm_getDefaultMaterial(materialInput);

    vec4 outColor = mix(landColor, waterColor, materialInput.waterMask);
    outColor = czm_gammaCorrect(outColor);

    material.diffuse = outColor.rgb;
    material.alpha = outColor.a;

    return material;
}
`;var $F=`// Thanks for the contribution Jonas
// http://29a.ch/2012/7/19/webgl-terrain-rendering-water-fog

uniform sampler2D specularMap;
uniform sampler2D normalMap;
uniform vec4 baseWaterColor;
uniform vec4 blendColor;
uniform float frequency;
uniform float animationSpeed;
uniform float amplitude;
uniform float specularIntensity;
uniform float fadeFactor;

czm_material czm_getMaterial(czm_materialInput materialInput)
{
    czm_material material = czm_getDefaultMaterial(materialInput);

    float time = czm_frameNumber * animationSpeed;

    // fade is a function of the distance from the fragment and the frequency of the waves
    float fade = max(1.0, (length(materialInput.positionToEyeEC) / 10000000000.0) * frequency * fadeFactor);

    float specularMapValue = texture(specularMap, materialInput.st).r;

    // note: not using directional motion at this time, just set the angle to 0.0;
    vec4 noise = czm_getWaterNoise(normalMap, materialInput.st * frequency, time, 0.0);
    vec3 normalTangentSpace = noise.xyz * vec3(1.0, 1.0, (1.0 / amplitude));

    // fade out the normal perturbation as we move further from the water surface
    normalTangentSpace.xy /= fade;

    // attempt to fade out the normal perturbation as we approach non water areas (low specular map value)
    normalTangentSpace = mix(vec3(0.0, 0.0, 50.0), normalTangentSpace, specularMapValue);

    normalTangentSpace = normalize(normalTangentSpace);

    // get ratios for alignment of the new normal vector with a vector perpendicular to the tangent plane
    float tsPerturbationRatio = clamp(dot(normalTangentSpace, vec3(0.0, 0.0, 1.0)), 0.0, 1.0);

    // fade out water effect as specular map value decreases
    material.alpha = mix(blendColor.a, baseWaterColor.a, specularMapValue) * specularMapValue;

    // base color is a blend of the water and non-water color based on the value from the specular map
    // may need a uniform blend factor to better control this
    material.diffuse = mix(blendColor.rgb, baseWaterColor.rgb, specularMapValue);

    // diffuse highlights are based on how perturbed the normal is
    material.diffuse += (0.1 * tsPerturbationRatio);

    material.diffuse = material.diffuse;

    material.normal = normalize(materialInput.tangentToEyeMatrix * normalTangentSpace);

    material.specular = specularIntensity;
    material.shininess = 10.0;

    return material;
}
`;function ye(e){this.type=void 0,this.shaderSource=void 0,this.materials=void 0,this.uniforms=void 0,this._uniforms=void 0,this.translucent=void 0,this._minificationFilter=e.minificationFilter??tn.LINEAR,this._magnificationFilter=e.magnificationFilter??bo.LINEAR,this._strict=void 0,this._template=void 0,this._count=void 0,this._texturePaths={},this._loadedImages=[],this._loadedCubeMaps=[],this._textures={},this._updateFunctions=[],this._defaultTexture=void 0,Iee(e,this),Object.defineProperties(this,{type:{value:this.type,writable:!1}}),c(ye._uniformList[this.type])||(ye._uniformList[this.type]=Object.keys(this._uniforms))}ye._uniformList={};ye.fromType=function(e,t){let n=new ye({fabric:{type:e}});if(c(t))for(let i in t)t.hasOwnProperty(i)&&(n.uniforms[i]=t[i]);return n};ye.prototype.isTranslucent=function(){if(c(this.translucent))return typeof this.translucent=="function"?this.translucent():this.translucent;let e=!0,t=this._translucentFunctions,n=t.length;for(let i=0;i<n;++i){let o=t[i];if(typeof o=="function"?e=e&&o():e=e&&o,!e)break}return e};ye.prototype.update=function(e){this._defaultTexture=e.defaultTexture;let t,n,i=this._loadedImages,o=i.length;for(t=0;t<o;++t){let A=i[t];n=A.id;let l=A.image,f;Array.isArray(l)&&(f=l.slice(1,l.length).map(function(C){return C.bufferView}),l=l[0]);let h=new dn({minificationFilter:this._minificationFilter,magnificationFilter:this._magnificationFilter}),m;c(l.internalFormat)?m=new gn({context:e,pixelFormat:l.internalFormat,width:l.width,height:l.height,source:{arrayBufferView:l.bufferView,mipLevels:f},sampler:h}):m=new gn({context:e,source:l,sampler:h});let p=this._textures[n];c(p)&&p!==this._defaultTexture&&p.destroy(),this._textures[n]=m;let g=`${n}Dimensions`;if(this.uniforms.hasOwnProperty(g)){let C=this.uniforms[g];C.x=m._width,C.y=m._height}}i.length=0;let r=this._loadedCubeMaps;for(o=r.length,t=0;t<o;++t){let A=r[t];n=A.id;let l=A.images,f=new Wa({context:e,source:{positiveX:l[0],negativeX:l[1],positiveY:l[2],negativeY:l[3],positiveZ:l[4],negativeZ:l[5]},sampler:new dn({minificationFilter:this._minificationFilter,magnificationFilter:this._magnificationFilter})});this._textures[n]=f}r.length=0;let a=this._updateFunctions;for(o=a.length,t=0;t<o;++t)a[t](this,e);let s=this.materials;for(let A in s)s.hasOwnProperty(A)&&s[A].update(e)};ye.prototype.isDestroyed=function(){return!1};ye.prototype.destroy=function(){let e=this._textures;for(let n in e)if(e.hasOwnProperty(n)){let i=e[n];i!==this._defaultTexture&&i.destroy()}let t=this.materials;for(let n in t)t.hasOwnProperty(n)&&t[n].destroy();return pe(this)};function Iee(e,t){e=e??k.EMPTY_OBJECT,t._strict=e.strict??!1,t._count=e.count??0,t._template=Ne(e.fabric??k.EMPTY_OBJECT),t._template.uniforms=Ne(t._template.uniforms??k.EMPTY_OBJECT),t._template.materials=Ne(t._template.materials??k.EMPTY_OBJECT),t.type=c(t._template.type)?t._template.type:oo(),t.shaderSource="",t.materials={},t.uniforms={},t._uniforms={},t._translucentFunctions=[];let n,i=ye._materialCache.getMaterial(t.type);if(c(i)){let r=Ne(i.fabric,!0);t._template=Et(t._template,r,!0),n=i.translucent}xee(t),c(i)||ye._materialCache.addMaterial(t.type,t),See(t),Ree(t),Pee(t);let o=t._translucentFunctions.length===0?!0:void 0;if(n=n??o,n=e.translucent??n,c(n))if(typeof n=="function"){let r=function(){return n(t)};t._translucentFunctions.push(r)}else t._translucentFunctions.push(n)}function FT(e,t,n,i){if(c(e)){for(let o in e)if(e.hasOwnProperty(o)){let r=t.indexOf(o)!==-1;(i&&!r||!i&&r)&&n(o,t)}}}function e1(e,t){}function yee(e,t){}var bee=["type","materials","uniforms","components","source"],Bee=["diffuse","specular","shininess","normal","emission","alpha"];function xee(e){let t=e._template,n=t.uniforms,i=t.materials,o=t.components;FT(t,bee,e1,!0),FT(o,Bee,e1,!0);let r=[];for(let a in i)i.hasOwnProperty(a)&&r.push(a);FT(n,r,yee,!1)}function Tee(e,t){let n=t._template.materials;for(let i in n)if(n.hasOwnProperty(i)&&e.indexOf(i)>-1)return!0;return!1}function See(e){let t=e._template.components,n=e._template.source;if(c(n))e.shaderSource+=`${n}
`;else{if(e.shaderSource+=`czm_material czm_getMaterial(czm_materialInput materialInput)
{
`,e.shaderSource+=`czm_material material = czm_getDefaultMaterial(materialInput);
`,c(t)){let i=Object.keys(e._template.materials).length>0;for(let o in t)if(t.hasOwnProperty(o))if(o==="diffuse"||o==="emission"){let a=i&&Tee(t[o],e)?t[o]:`czm_gammaCorrect(${t[o]})`;e.shaderSource+=`material.${o} = ${a}; 
`}else o==="alpha"?e.shaderSource+=`material.alpha = ${t.alpha}; 
`:e.shaderSource+=`material.${o} = ${t[o]};
`}e.shaderSource+=`return material;
}
`}}var t1={mat2:ai,mat3:J,mat4:O},wee=/\.ktx2$/i;function Dee(e){let t;return function(n,i){let o=n.uniforms,r=o[e],a=t!==r,s=!c(r)||r===ye.DefaultImageId;t=r;let A=n._textures[e],l,f;if(r instanceof HTMLVideoElement){if(r.readyState>=2){if(a&&c(A)&&(A!==i.defaultTexture&&A.destroy(),A=void 0),!c(A)||A===i.defaultTexture){let m=new dn({minificationFilter:n._minificationFilter,magnificationFilter:n._magnificationFilter});A=new gn({context:i,source:r,sampler:m}),n._textures[e]=A;return}A.copyFrom({source:r})}else c(A)||(n._textures[e]=i.defaultTexture);return}if(r instanceof gn&&r!==A){n._texturePaths[e]=void 0;let m=n._textures[e];c(m)&&m!==n._defaultTexture&&m.destroy(),n._textures[e]=r,l=`${e}Dimensions`,o.hasOwnProperty(l)&&(f=o[l],f.x=r._width,f.y=r._height);return}if(a&&c(A)&&s&&(A!==n._defaultTexture&&A.destroy(),A=void 0),c(A)||(n._texturePaths[e]=void 0,A=n._textures[e]=n._defaultTexture,l=`${e}Dimensions`,o.hasOwnProperty(l)&&(f=o[l],f.x=A._width,f.y=A._height)),s)return;let h=r instanceof ke;if(!c(n._texturePaths[e])||h&&r.url!==n._texturePaths[e].url||!h&&r!==n._texturePaths[e]){if(typeof r=="string"||h){let m=h?r:ke.createIfNeeded(r),p;wee.test(m.url)?p=dl(m.url):p=m.fetchImage(),Promise.resolve(p).then(function(g){n._loadedImages.push({id:e,image:g})}).catch(function(){c(A)&&A!==n._defaultTexture&&A.destroy(),n._textures[e]=n._defaultTexture})}else(r instanceof HTMLCanvasElement||r instanceof HTMLImageElement||r instanceof ImageBitmap||r instanceof OffscreenCanvas)&&n._loadedImages.push({id:e,image:r});n._texturePaths[e]=r}}}function Qee(e){return function(t,n){let i=t.uniforms[e];if(i instanceof Wa){let r=t._textures[e];r!==t._defaultTexture&&r.destroy(),t._texturePaths[e]=void 0,t._textures[e]=i;return}if(c(t._textures[e])||(t._texturePaths[e]=void 0,t._textures[e]=n.defaultCubeMap),i===ye.DefaultCubeMapId)return;let o=i.positiveX+i.negativeX+i.positiveY+i.negativeY+i.positiveZ+i.negativeZ;if(o!==t._texturePaths[e]){let r=[ke.createIfNeeded(i.positiveX).fetchImage(),ke.createIfNeeded(i.negativeX).fetchImage(),ke.createIfNeeded(i.positiveY).fetchImage(),ke.createIfNeeded(i.negativeY).fetchImage(),ke.createIfNeeded(i.positiveZ).fetchImage(),ke.createIfNeeded(i.negativeZ).fetchImage()];Promise.all(r).then(function(a){t._loadedCubeMaps.push({id:e,images:a})}),t._texturePaths[e]=o}}}function Ree(e){let t=e._template.uniforms;for(let n in t)t.hasOwnProperty(n)&&n1(e,n)}function n1(e,t){let n=e._strict,i=e._template.uniforms,o=i[t],r=vee(o),a;if(r==="channels")a=nC(e,t,o,!1);else{if(r==="sampler2D"){let l=`${t}Dimensions`;Mee(e,l)>0&&(i[l]={type:"ivec3",x:1,y:1},n1(e,l))}if(!new RegExp(`uniform\\s+${r}\\s+${t}\\s*;`).test(e.shaderSource)){let l=`uniform ${r} ${t};`;e.shaderSource=l+e.shaderSource}let A=`${t}_${e._count++}`;if(a=nC(e,t,A),e.uniforms[t]=o,r==="sampler2D")e._uniforms[A]=function(){return e._textures[t]},e._updateFunctions.push(Dee(t));else if(r==="samplerCube")e._uniforms[A]=function(){return e._textures[t]},e._updateFunctions.push(Qee(t));else if(r.indexOf("mat")!==-1){let l=new t1[r];e._uniforms[A]=function(){return t1[r].fromColumnMajorArray(e.uniforms[t],l)}}else e._uniforms[A]=function(){return e.uniforms[t]}}}function vee(e){let t=e.type;if(!c(t)){let n=typeof e;if(n==="number")t="float";else if(n==="boolean")t="bool";else if(n==="string"||e instanceof ke||e instanceof HTMLCanvasElement||e instanceof HTMLImageElement||e instanceof ImageBitmap||e instanceof OffscreenCanvas)/^([rgba]){1,4}$/i.test(e)?t="channels":e===ye.DefaultCubeMapId?t="samplerCube":t="sampler2D";else if(n==="object")if(Array.isArray(e))(e.length===4||e.length===9||e.length===16)&&(t=`mat${Math.sqrt(e.length)}`);else{let i=0;for(let o in e)e.hasOwnProperty(o)&&(i+=1);i>=2&&i<=4?t=`vec${i}`:i===6&&(t="samplerCube")}}return t}function Pee(e){let t=e._strict,n=e._template.materials;for(let i in n)if(n.hasOwnProperty(i)){let o=new ye({strict:t,fabric:n[i],count:e._count});e._count=o._count,e._uniforms=Et(e._uniforms,o._uniforms,!0),e.materials[i]=o,e._translucentFunctions=e._translucentFunctions.concat(o._translucentFunctions);let r="czm_getMaterial",a=`${r}_${e._count++}`;nC(o,r,a),e.shaderSource=o.shaderSource+e.shaderSource;let s=`${a}(materialInput)`,A=nC(e,i,s)}}function nC(e,t,n,i){i=i??!0;let o=0,r="([\\w])?",a=`([\\w${i?".":""}])?`,s=new RegExp(a+t+r,"g");return e.shaderSource=e.shaderSource.replace(s,function(A,l,f){return l||f?A:(o+=1,n)}),o}function Mee(e,t,n){return nC(e,t,t,n)}ye._materialCache={_materials:{},addMaterial:function(e,t){this._materials[e]=t},getMaterial:function(e){return this._materials[e]}};ye.DefaultImageId="czm_defaultImage";ye.DefaultCubeMapId="czm_defaultCubeMap";ye.ColorType="Color";ye._materialCache.addMaterial(ye.ColorType,{fabric:{type:ye.ColorType,uniforms:{color:new F(1,0,0,.5)},components:{diffuse:"color.rgb",alpha:"color.a"}},translucent:function(e){return e.uniforms.color.alpha<1}});ye.ImageType="Image";ye._materialCache.addMaterial(ye.ImageType,{fabric:{type:ye.ImageType,uniforms:{image:ye.DefaultImageId,repeat:new U(1,1),color:new F(1,1,1,1)},components:{diffuse:"texture(image, fract(repeat * materialInput.st)).rgb * color.rgb",alpha:"texture(image, fract(repeat * materialInput.st)).a * color.a"}},translucent:function(e){return e.uniforms.color.alpha<1}});ye.DiffuseMapType="DiffuseMap";ye._materialCache.addMaterial(ye.DiffuseMapType,{fabric:{type:ye.DiffuseMapType,uniforms:{image:ye.DefaultImageId,channels:"rgb",repeat:new U(1,1)},components:{diffuse:"texture(image, fract(repeat * materialInput.st)).channels"}},translucent:!1});ye.AlphaMapType="AlphaMap";ye._materialCache.addMaterial(ye.AlphaMapType,{fabric:{type:ye.AlphaMapType,uniforms:{image:ye.DefaultImageId,channel:"a",repeat:new U(1,1)},components:{alpha:"texture(image, fract(repeat * materialInput.st)).channel"}},translucent:!0});ye.SpecularMapType="SpecularMap";ye._materialCache.addMaterial(ye.SpecularMapType,{fabric:{type:ye.SpecularMapType,uniforms:{image:ye.DefaultImageId,channel:"r",repeat:new U(1,1)},components:{specular:"texture(image, fract(repeat * materialInput.st)).channel"}},translucent:!1});ye.EmissionMapType="EmissionMap";ye._materialCache.addMaterial(ye.EmissionMapType,{fabric:{type:ye.EmissionMapType,uniforms:{image:ye.DefaultImageId,channels:"rgb",repeat:new U(1,1)},components:{emission:"texture(image, fract(repeat * materialInput.st)).channels"}},translucent:!1});ye.BumpMapType="BumpMap";ye._materialCache.addMaterial(ye.BumpMapType,{fabric:{type:ye.BumpMapType,uniforms:{image:ye.DefaultImageId,channel:"r",strength:.8,repeat:new U(1,1)},source:LF},translucent:!1});ye.NormalMapType="NormalMap";ye._materialCache.addMaterial(ye.NormalMapType,{fabric:{type:ye.NormalMapType,uniforms:{image:ye.DefaultImageId,channels:"rgb",strength:.8,repeat:new U(1,1)},source:VF},translucent:!1});ye.GridType="Grid";ye._materialCache.addMaterial(ye.GridType,{fabric:{type:ye.GridType,uniforms:{color:new F(0,1,0,1),cellAlpha:.1,lineCount:new U(8,8),lineThickness:new U(1,1),lineOffset:new U(0,0)},source:HF},translucent:function(e){let t=e.uniforms;return t.color.alpha<1||t.cellAlpha<1}});ye.StripeType="Stripe";ye._materialCache.addMaterial(ye.StripeType,{fabric:{type:ye.StripeType,uniforms:{horizontal:!0,evenColor:new F(1,1,1,.5),oddColor:new F(0,0,1,.5),offset:0,repeat:5},source:XF},translucent:function(e){let t=e.uniforms;return t.evenColor.alpha<1||t.oddColor.alpha<1}});ye.CheckerboardType="Checkerboard";ye._materialCache.addMaterial(ye.CheckerboardType,{fabric:{type:ye.CheckerboardType,uniforms:{lightColor:new F(1,1,1,.5),darkColor:new F(0,0,0,.5),repeat:new U(5,5)},source:NF},translucent:function(e){let t=e.uniforms;return t.lightColor.alpha<1||t.darkColor.alpha<1}});ye.DotType="Dot";ye._materialCache.addMaterial(ye.DotType,{fabric:{type:ye.DotType,uniforms:{lightColor:new F(1,1,0,.75),darkColor:new F(0,1,1,.75),repeat:new U(5,5)},source:FF},translucent:function(e){let t=e.uniforms;return t.lightColor.alpha<1||t.darkColor.alpha<1}});ye.WaterType="Water";ye._materialCache.addMaterial(ye.WaterType,{fabric:{type:ye.WaterType,uniforms:{baseWaterColor:new F(.2,.3,.6,1),blendColor:new F(0,1,.699,1),specularMap:ye.DefaultImageId,normalMap:ye.DefaultImageId,frequency:10,animationSpeed:.01,amplitude:1,specularIntensity:.5,fadeFactor:1},source:$F},translucent:function(e){let t=e.uniforms;return t.baseWaterColor.alpha<1||t.blendColor.alpha<1}});ye.RimLightingType="RimLighting";ye._materialCache.addMaterial(ye.RimLightingType,{fabric:{type:ye.RimLightingType,uniforms:{color:new F(1,0,0,.7),rimColor:new F(1,1,1,.4),width:.3},source:JF},translucent:function(e){let t=e.uniforms;return t.color.alpha<1||t.rimColor.alpha<1}});ye.FadeType="Fade";ye._materialCache.addMaterial(ye.FadeType,{fabric:{type:ye.FadeType,uniforms:{fadeInColor:new F(1,0,0,1),fadeOutColor:new F(0,0,0,0),maximumDistance:.5,repeat:!0,fadeDirection:{x:!0,y:!0},time:new U(.5,.5)},source:zF},translucent:function(e){let t=e.uniforms;return t.fadeInColor.alpha<1||t.fadeOutColor.alpha<1}});ye.PolylineArrowType="PolylineArrow";ye._materialCache.addMaterial(ye.PolylineArrowType,{fabric:{type:ye.PolylineArrowType,uniforms:{color:new F(1,1,1,1)},source:jF},translucent:!0});ye.PolylineDashType="PolylineDash";ye._materialCache.addMaterial(ye.PolylineDashType,{fabric:{type:ye.PolylineDashType,uniforms:{color:new F(1,0,1,1),gapColor:new F(0,0,0,0),dashLength:16,dashPattern:255},source:YF},translucent:!0});ye.PolylineGlowType="PolylineGlow";ye._materialCache.addMaterial(ye.PolylineGlowType,{fabric:{type:ye.PolylineGlowType,uniforms:{color:new F(0,.5,1,1),glowPower:.25,taperPower:1},source:qF},translucent:!0});ye.PolylineOutlineType="PolylineOutline";ye._materialCache.addMaterial(ye.PolylineOutlineType,{fabric:{type:ye.PolylineOutlineType,uniforms:{color:new F(1,1,1,1),outlineColor:new F(1,0,0,1),outlineWidth:1},source:WF},translucent:function(e){let t=e.uniforms;return t.color.alpha<1||t.outlineColor.alpha<1}});ye.ElevationContourType="ElevationContour";ye._materialCache.addMaterial(ye.ElevationContourType,{fabric:{type:ye.ElevationContourType,uniforms:{spacing:100,color:new F(1,0,0,1),width:1},source:UF},translucent:!1});ye.ElevationRampType="ElevationRamp";ye._materialCache.addMaterial(ye.ElevationRampType,{fabric:{type:ye.ElevationRampType,uniforms:{image:ye.DefaultImageId,minimumHeight:0,maximumHeight:1e4},source:GF},translucent:!1});ye.SlopeRampMaterialType="SlopeRamp";ye._materialCache.addMaterial(ye.SlopeRampMaterialType,{fabric:{type:ye.SlopeRampMaterialType,uniforms:{image:ye.DefaultImageId},source:KF},translucent:!1});ye.AspectRampMaterialType="AspectRamp";ye._materialCache.addMaterial(ye.AspectRampMaterialType,{fabric:{type:ye.AspectRampMaterialType,uniforms:{image:ye.DefaultImageId},source:OF},translucent:!1});ye.ElevationBandType="ElevationBand";ye._materialCache.addMaterial(ye.ElevationBandType,{fabric:{type:ye.ElevationBandType,uniforms:{heights:ye.DefaultImageId,colors:ye.DefaultImageId},source:kF},translucent:!0});ye.WaterMaskType="WaterMask";ye._materialCache.addMaterial(ye.WaterMaskType,{fabric:{type:ye.WaterMaskType,source:ZF,uniforms:{waterColor:new F(1,1,1,1),landColor:new F(0,0,0,0)}},translucent:!1});var Sr=ye;function Rd(e){e=e??k.EMPTY_OBJECT;let t=e.translucent??!0,n=e.closed??!1,i=e.materialSupport??Rd.MaterialSupport.TEXTURED;this.material=c(e.material)?e.material:Sr.fromType(Sr.ColorType),this.translucent=t,this._vertexShaderSource=e.vertexShaderSource??i.vertexShaderSource,this._fragmentShaderSource=e.fragmentShaderSource??i.fragmentShaderSource,this._renderState=xo.getDefaultRenderState(t,n,e.renderState),this._closed=n,this._materialSupport=i,this._vertexFormat=i.vertexFormat,this._flat=e.flat??!1,this._faceForward=e.faceForward??!n}Object.defineProperties(Rd.prototype,{vertexShaderSource:{get:function(){return this._vertexShaderSource}},fragmentShaderSource:{get:function(){return this._fragmentShaderSource}},renderState:{get:function(){return this._renderState}},closed:{get:function(){return this._closed}},materialSupport:{get:function(){return this._materialSupport}},vertexFormat:{get:function(){return this._vertexFormat}},flat:{get:function(){return this._flat}},faceForward:{get:function(){return this._faceForward}}});Rd.prototype.getFragmentShaderSource=xo.prototype.getFragmentShaderSource;Rd.prototype.isTranslucent=xo.prototype.isTranslucent;Rd.prototype.getRenderState=xo.prototype.getRenderState;Rd.MaterialSupport={BASIC:Object.freeze({vertexFormat:ge.POSITION_AND_NORMAL,vertexShaderSource:vF,fragmentShaderSource:RF}),TEXTURED:Object.freeze({vertexFormat:ge.POSITION_NORMAL_AND_ST,vertexShaderSource:MF,fragmentShaderSource:PF}),ALL:Object.freeze({vertexFormat:ge.ALL,vertexShaderSource:QF,fragmentShaderSource:DF})};var Zn=Rd;var i1=`in vec3 v_positionEC;
in vec3 v_normalEC;
in vec4 v_color;

void main()
{
    vec3 positionToEyeEC = -v_positionEC;

    vec3 normalEC = normalize(v_normalEC);
#ifdef FACE_FORWARD
    normalEC = faceforward(normalEC, vec3(0.0, 0.0, 1.0), -normalEC);
#endif

    vec4 color = czm_gammaCorrect(v_color);

    czm_materialInput materialInput;
    materialInput.normalEC = normalEC;
    materialInput.positionToEyeEC = positionToEyeEC;
    czm_material material = czm_getDefaultMaterial(materialInput);
    material.diffuse = color.rgb;
    material.alpha = color.a;

    out_FragColor = czm_phong(normalize(positionToEyeEC), material, czm_lightDirectionEC);
}
`;var o1=`in vec3 position3DHigh;
in vec3 position3DLow;
in vec3 normal;
in vec4 color;
in float batchId;

out vec3 v_positionEC;
out vec3 v_normalEC;
out vec4 v_color;

void main()
{
    vec4 p = czm_computePosition();

    v_positionEC = (czm_modelViewRelativeToEye * p).xyz;      // position in eye coordinates
    v_normalEC = czm_normal * normal;                         // normal in eye coordinates
    v_color = color;

    gl_Position = czm_modelViewProjectionRelativeToEye * p;
}
`;var cy=`in vec4 v_color;

void main()
{
    out_FragColor = czm_gammaCorrect(v_color);
}
`;var r1=`in vec3 position3DHigh;
in vec3 position3DLow;
in vec4 color;
in float batchId;

out vec4 v_color;

void main()
{
    vec4 p = czm_computePosition();

    v_color = color;

    gl_Position = czm_modelViewProjectionRelativeToEye * p;
}
`;function pl(e){e=e??k.EMPTY_OBJECT;let t=e.translucent??!0,n=e.closed??!1,i=e.flat??!1,o=i?r1:o1,r=i?cy:i1,a=i?pl.FLAT_VERTEX_FORMAT:pl.VERTEX_FORMAT;this.material=void 0,this.translucent=t,this._vertexShaderSource=e.vertexShaderSource??o,this._fragmentShaderSource=e.fragmentShaderSource??r,this._renderState=xo.getDefaultRenderState(t,n,e.renderState),this._closed=n,this._vertexFormat=a,this._flat=i,this._faceForward=e.faceForward??!n}Object.defineProperties(pl.prototype,{vertexShaderSource:{get:function(){return this._vertexShaderSource}},fragmentShaderSource:{get:function(){return this._fragmentShaderSource}},renderState:{get:function(){return this._renderState}},closed:{get:function(){return this._closed}},vertexFormat:{get:function(){return this._vertexFormat}},flat:{get:function(){return this._flat}},faceForward:{get:function(){return this._faceForward}}});pl.VERTEX_FORMAT=ge.POSITION_AND_NORMAL;pl.FLAT_VERTEX_FORMAT=ge.POSITION_ONLY;pl.prototype.getFragmentShaderSource=xo.prototype.getFragmentShaderSource;pl.prototype.isTranslucent=xo.prototype.isTranslucent;pl.prototype.getRenderState=xo.prototype.getRenderState;var Vt=pl;function um(e){this._definitionChanged=new fe,this._color=void 0,this._colorSubscription=void 0,this.color=e}Object.defineProperties(um.prototype,{isConstant:{get:function(){return M.isConstant(this._color)}},definitionChanged:{get:function(){return this._definitionChanged}},color:W("color")});um.prototype.getType=function(e){return"Color"};var Oee=new X;um.prototype.getValue=function(e,t){return c(e)||(e=X.now(Oee)),c(t)||(t={}),t.color=M.getValueOrClonedDefault(this._color,e,F.WHITE,t.color),t};um.prototype.equals=function(e){return this===e||e instanceof um&&M.equals(this._color,e._color)};var lt=um;function Vf(e){e=e??k.EMPTY_OBJECT,this._ellipsoid=e.ellipsoid??Z.default,this._rectangle=e.rectangle??ce.MAX_VALUE,this._projection=new Ai(this._ellipsoid),this._numberOfLevelZeroTilesX=e.numberOfLevelZeroTilesX??2,this._numberOfLevelZeroTilesY=e.numberOfLevelZeroTilesY??1}Object.defineProperties(Vf.prototype,{ellipsoid:{get:function(){return this._ellipsoid}},rectangle:{get:function(){return this._rectangle}},projection:{get:function(){return this._projection}}});Vf.prototype.getNumberOfXTilesAtLevel=function(e){return this._numberOfLevelZeroTilesX<<e};Vf.prototype.getNumberOfYTilesAtLevel=function(e){return this._numberOfLevelZeroTilesY<<e};Vf.prototype.rectangleToNativeRectangle=function(e,t){let n=w.toDegrees(e.west),i=w.toDegrees(e.south),o=w.toDegrees(e.east),r=w.toDegrees(e.north);return c(t)?(t.west=n,t.south=i,t.east=o,t.north=r,t):new ce(n,i,o,r)};Vf.prototype.tileXYToNativeRectangle=function(e,t,n,i){let o=this.tileXYToRectangle(e,t,n,i);return o.west=w.toDegrees(o.west),o.south=w.toDegrees(o.south),o.east=w.toDegrees(o.east),o.north=w.toDegrees(o.north),o};Vf.prototype.tileXYToRectangle=function(e,t,n,i){let o=this._rectangle,r=this.getNumberOfXTilesAtLevel(n),a=this.getNumberOfYTilesAtLevel(n),s=o.width/r,A=e*s+o.west,l=(e+1)*s+o.west,f=o.height/a,h=o.north-t*f,m=o.north-(t+1)*f;return c(i)||(i=new ce(A,m,l,h)),i.west=A,i.south=m,i.east=l,i.north=h,i};Vf.prototype.positionToTileXY=function(e,t,n){let i=this._rectangle;if(!ce.contains(i,e))return;let o=this.getNumberOfXTilesAtLevel(t),r=this.getNumberOfYTilesAtLevel(t),a=i.width/o,s=i.height/r,A=e.longitude;i.east<i.west&&(A+=w.TWO_PI);let l=(A-i.west)/a|0;l>=o&&(l=o-1);let f=(i.north-e.latitude)/s|0;return f>=r&&(f=r-1),c(n)?(n.x=l,n.y=f,n):new U(l,f)};var ba=Vf;var a1=new u,s1=new u,c1=new ae,kT=new u,Lee=new u,A1=new ee,Nee=new ba,iC=[new ae,new ae,new ae,new ae],oC=new U,ro={};ro.initialize=function(){let e=ro._initPromise;return c(e)||(e=ke.fetchJson(ho("Assets/approximateTerrainHeights.json")).then(function(t){ro._terrainHeights=t}),ro._initPromise=e),e};ro.getMinimumMaximumHeights=function(e,t){t=t??Z.default;let n=l1(e),i=ro._defaultMinTerrainHeight,o=ro._defaultMaxTerrainHeight;if(c(n)){let r=`${n.level}-${n.x}-${n.y}`,a=ro._terrainHeights[r];c(a)&&(i=a[0],o=a[1]),t.cartographicToCartesian(ce.northeast(e,c1),a1),t.cartographicToCartesian(ce.southwest(e,c1),s1),u.midpoint(s1,a1,kT);let s=t.scaleToGeodeticSurface(kT,Lee);if(c(s)){let A=u.distance(kT,s);i=Math.min(i,-A)}else i=ro._defaultMinTerrainHeight}return i=Math.max(ro._defaultMinTerrainHeight,i),{minimumTerrainHeight:i,maximumTerrainHeight:o}};ro.getBoundingSphere=function(e,t){t=t??Z.default;let n=l1(e),i=ro._defaultMaxTerrainHeight;if(c(n)){let r=`${n.level}-${n.x}-${n.y}`,a=ro._terrainHeights[r];c(a)&&(i=a[1])}let o=ee.fromRectangle3D(e,t,0);return ee.fromRectangle3D(e,t,i,A1),ee.union(o,A1,o)};function l1(e){ae.fromRadians(e.east,e.north,0,iC[0]),ae.fromRadians(e.west,e.north,0,iC[1]),ae.fromRadians(e.east,e.south,0,iC[2]),ae.fromRadians(e.west,e.south,0,iC[3]);let t=0,n=0,i=0,o=0,r=ro._terrainHeightsMaxLevel,a;for(a=0;a<=r;++a){let s=!1;for(let A=0;A<4;++A){let l=iC[A];if(Nee.positionToTileXY(l,a,oC),A===0)i=oC.x,o=oC.y;else if(i!==oC.x||o!==oC.y){s=!0;break}}if(s)break;t=i,n=o}if(a!==0)return{x:t,y:n,level:a>r?r:a-1}}ro._terrainHeightsMaxLevel=6;ro._defaultMaxTerrainHeight=9e3;ro._defaultMinTerrainHeight=-1e5;ro._terrainHeights=void 0;ro._initPromise=void 0;Object.defineProperties(ro,{initialized:{get:function(){return c(ro._terrainHeights)}}});var On=ro;function Xr(e,t,n){this.minimum=u.clone(e??u.ZERO),this.maximum=u.clone(t??u.ZERO),c(n)?n=u.clone(n):n=u.midpoint(this.minimum,this.maximum,new u),this.center=n}Xr.fromCorners=function(e,t,n){return c(n)||(n=new Xr),n.minimum=u.clone(e,n.minimum),n.maximum=u.clone(t,n.maximum),n.center=u.midpoint(e,t,n.center),n};Xr.fromPoints=function(e,t){if(c(t)||(t=new Xr),!c(e)||e.length===0)return t.minimum=u.clone(u.ZERO,t.minimum),t.maximum=u.clone(u.ZERO,t.maximum),t.center=u.clone(u.ZERO,t.center),t;let n=e[0].x,i=e[0].y,o=e[0].z,r=e[0].x,a=e[0].y,s=e[0].z,A=e.length;for(let h=1;h<A;h++){let m=e[h],p=m.x,g=m.y,C=m.z;n=Math.min(p,n),r=Math.max(p,r),i=Math.min(g,i),a=Math.max(g,a),o=Math.min(C,o),s=Math.max(C,s)}let l=t.minimum;l.x=n,l.y=i,l.z=o;let f=t.maximum;return f.x=r,f.y=a,f.z=s,t.center=u.midpoint(l,f,t.center),t};Xr.clone=function(e,t){if(c(e))return c(t)?(t.minimum=u.clone(e.minimum,t.minimum),t.maximum=u.clone(e.maximum,t.maximum),t.center=u.clone(e.center,t.center),t):new Xr(e.minimum,e.maximum,e.center)};Xr.equals=function(e,t){return e===t||c(e)&&c(t)&&u.equals(e.center,t.center)&&u.equals(e.minimum,t.minimum)&&u.equals(e.maximum,t.maximum)};var Ay=new u;Xr.intersectPlane=function(e,t){Ay=u.subtract(e.maximum,e.minimum,Ay);let n=u.multiplyByScalar(Ay,.5,Ay),i=t.normal,o=n.x*Math.abs(i.x)+n.y*Math.abs(i.y)+n.z*Math.abs(i.z),r=u.dot(e.center,i)+t.distance;return r-o>0?vt.INSIDE:r+o<0?vt.OUTSIDE:vt.INTERSECTING};Xr.prototype.clone=function(e){return Xr.clone(this,e)};Xr.prototype.intersectPlane=function(e){return Xr.intersectPlane(this,e)};Xr.prototype.equals=function(e){return Xr.equals(this,e)};var UT=Xr;var GT=new se;function _A(e,t){t=t??Z.default,e=t.scaleToGeodeticSurface(e);let n=Rn.eastNorthUpToFixedFrame(e,t);this._ellipsoid=t,this._origin=e,this._xAxis=u.fromCartesian4(O.getColumn(n,0,GT)),this._yAxis=u.fromCartesian4(O.getColumn(n,1,GT));let i=u.fromCartesian4(O.getColumn(n,2,GT));this._plane=Ft.fromPointNormal(e,i)}Object.defineProperties(_A.prototype,{ellipsoid:{get:function(){return this._ellipsoid}},origin:{get:function(){return this._origin}},plane:{get:function(){return this._plane}},xAxis:{get:function(){return this._xAxis}},yAxis:{get:function(){return this._yAxis}},zAxis:{get:function(){return this._plane.normal}}});var Fee=new UT;_A.fromPoints=function(e,t){let n=UT.fromPoints(e,Fee);return new _A(n.center,t)};var f1=new qa,ly=new u;_A.prototype.projectPointOntoPlane=function(e,t){let n=f1;n.origin=e,u.normalize(e,n.direction);let i=Ni.rayPlane(n,this._plane,ly);if(c(i)||(u.negate(n.direction,n.direction),i=Ni.rayPlane(n,this._plane,ly)),c(i)){let o=u.subtract(i,this._origin,i),r=u.dot(this._xAxis,o),a=u.dot(this._yAxis,o);return c(t)?(t.x=r,t.y=a,t):new U(r,a)}};_A.prototype.projectPointsOntoPlane=function(e,t){c(t)||(t=[]);let n=0,i=e.length;for(let o=0;o<i;o++){let r=this.projectPointOntoPlane(e[o],t[n]);c(r)&&(t[n]=r,n++)}return t.length=n,t};_A.prototype.projectPointToNearestOnPlane=function(e,t){c(t)||(t=new U);let n=f1;n.origin=e,u.clone(this._plane.normal,n.direction);let i=Ni.rayPlane(n,this._plane,ly);c(i)||(u.negate(n.direction,n.direction),i=Ni.rayPlane(n,this._plane,ly));let o=u.subtract(i,this._origin,i),r=u.dot(this._xAxis,o),a=u.dot(this._yAxis,o);return t.x=r,t.y=a,t};_A.prototype.projectPointsToNearestOnPlane=function(e,t){c(t)||(t=[]);let n=e.length;t.length=n;for(let i=0;i<n;i++)t[i]=this.projectPointToNearestOnPlane(e[i],t[i]);return t};var kee=new u;_A.prototype.projectPointOntoEllipsoid=function(e,t){c(t)||(t=new u);let n=this._ellipsoid,i=this._origin,o=this._xAxis,r=this._yAxis,a=kee;return u.multiplyByScalar(o,e.x,a),t=u.add(i,a,t),u.multiplyByScalar(r,e.y,a),u.add(t,a,t),n.scaleToGeocentricSurface(t,t),t};_A.prototype.projectPointsOntoEllipsoid=function(e,t){let n=e.length;c(t)?t.length=n:t=new Array(n);for(let i=0;i<n;++i)t[i]=this.projectPointOntoEllipsoid(e[i],t[i]);return t};var Fo=_A;function Ln(e,t){this.center=u.clone(e??u.ZERO),this.halfAxes=J.clone(t??J.ZERO)}Ln.packedLength=u.packedLength+J.packedLength;Ln.pack=function(e,t,n){return n=n??0,u.pack(e.center,t,n),J.pack(e.halfAxes,t,n+u.packedLength),t};Ln.unpack=function(e,t,n){return t=t??0,c(n)||(n=new Ln),u.unpack(e,t,n.center),J.unpack(e,t+u.packedLength,n.halfAxes),n};var Uee=new u,Gee=new u,zee=new u,Hee=new u,Vee=new u,jee=new u,Yee=new J,qee={unitary:new J,diagonal:new J};Ln.fromPoints=function(e,t){if(c(t)||(t=new Ln),!c(e)||e.length===0)return t.halfAxes=J.ZERO,t.center=u.ZERO,t;let n,i=e.length,o=u.clone(e[0],Uee);for(n=1;n<i;n++)u.add(o,e[n],o);let r=1/i;u.multiplyByScalar(o,r,o);let a=0,s=0,A=0,l=0,f=0,h=0,m;for(n=0;n<i;n++)m=u.subtract(e[n],o,Gee),a+=m.x*m.x,s+=m.x*m.y,A+=m.x*m.z,l+=m.y*m.y,f+=m.y*m.z,h+=m.z*m.z;a*=r,s*=r,A*=r,l*=r,f*=r,h*=r;let p=Yee;p[0]=a,p[1]=s,p[2]=A,p[3]=s,p[4]=l,p[5]=f,p[6]=A,p[7]=f,p[8]=h;let g=J.computeEigenDecomposition(p,qee),C=J.clone(g.unitary,t.halfAxes),_=J.getColumn(C,0,Hee),E=J.getColumn(C,1,Vee),I=J.getColumn(C,2,jee),y=-Number.MAX_VALUE,b=-Number.MAX_VALUE,x=-Number.MAX_VALUE,S=Number.MAX_VALUE,P=Number.MAX_VALUE,D=Number.MAX_VALUE;for(n=0;n<i;n++)m=e[n],y=Math.max(u.dot(_,m),y),b=Math.max(u.dot(E,m),b),x=Math.max(u.dot(I,m),x),S=Math.min(u.dot(_,m),S),P=Math.min(u.dot(E,m),P),D=Math.min(u.dot(I,m),D);_=u.multiplyByScalar(_,.5*(S+y),_),E=u.multiplyByScalar(E,.5*(P+b),E),I=u.multiplyByScalar(I,.5*(D+x),I);let Q=u.add(_,E,t.center);u.add(Q,I,Q);let v=zee;return v.x=y-S,v.y=b-P,v.z=x-D,u.multiplyByScalar(v,.5,v),J.multiplyByScale(t.halfAxes,v,t.halfAxes),t};var g1=new u,Wee=new u;function u1(e,t,n,i,o,r,a,s,A,l,f){c(f)||(f=new Ln);let h=f.halfAxes;J.setColumn(h,0,t,h),J.setColumn(h,1,n,h),J.setColumn(h,2,i,h);let m=g1;m.x=(o+r)/2,m.y=(a+s)/2,m.z=(A+l)/2;let p=Wee;p.x=(r-o)/2,p.y=(s-a)/2,p.z=(l-A)/2;let g=f.center;return m=J.multiplyByVector(h,m,m),u.add(e,m,g),J.multiplyByScale(h,p,h),f}var d1=new ae,Jee=new u,Kee=new ae,Xee=new ae,Zee=new ae,$ee=new ae,ete=new ae,tte=new u,h1=new u,nte=new u,m1=new u,ite=new u,ote=new U,rte=new U,ate=new U,ste=new U,cte=new U,Ate=new u,lte=new u,fte=new u,ute=new u,dte=new U,hte=new u,mte=new u,pte=new u,gte=new Ft(u.UNIT_X,0);Ln.fromRectangle=function(e,t,n,i,o){t=t??0,n=n??0,i=i??Z.default;let r,a,s,A,l,f,h;if(e.width<=w.PI){let P=ce.center(e,d1),D=i.cartographicToCartesian(P,Jee),Q=new Fo(D,i);h=Q.plane;let v=P.longitude,d=e.south<0&&e.north>0?0:P.latitude,B=ae.fromRadians(v,e.north,n,Kee),T=ae.fromRadians(e.west,e.north,n,Xee),R=ae.fromRadians(e.west,d,n,Zee),L=ae.fromRadians(e.west,e.south,n,$ee),G=ae.fromRadians(v,e.south,n,ete),q=i.cartographicToCartesian(B,tte),z=i.cartographicToCartesian(T,h1),K=i.cartographicToCartesian(R,nte),ie=i.cartographicToCartesian(L,m1),le=i.cartographicToCartesian(G,ite),de=Q.projectPointToNearestOnPlane(q,ote),he=Q.projectPointToNearestOnPlane(z,rte),Se=Q.projectPointToNearestOnPlane(K,ate),be=Q.projectPointToNearestOnPlane(ie,ste),_e=Q.projectPointToNearestOnPlane(le,cte);return r=Math.min(he.x,Se.x,be.x),a=-r,A=Math.max(he.y,de.y),s=Math.min(be.y,_e.y),T.height=L.height=t,z=i.cartographicToCartesian(T,h1),ie=i.cartographicToCartesian(L,m1),l=Math.min(Ft.getPointDistance(h,z),Ft.getPointDistance(h,ie)),f=n,u1(Q.origin,Q.xAxis,Q.yAxis,Q.zAxis,r,a,s,A,l,f,o)}let m=e.south>0,p=e.north<0,g=m?e.south:p?e.north:0,C=ce.center(e,d1).longitude,_=u.fromRadians(C,g,n,i,Ate);_.z=0;let I=Math.abs(_.x)<w.EPSILON10&&Math.abs(_.y)<w.EPSILON10?u.UNIT_X:u.normalize(_,lte),y=u.UNIT_Z,b=u.cross(I,y,fte);h=Ft.fromPointNormal(_,I,gte);let x=u.fromRadians(C+w.PI_OVER_TWO,g,n,i,ute);a=u.dot(Ft.projectPointOntoPlane(h,x,dte),b),r=-a,A=u.fromRadians(0,e.north,p?t:n,i,hte).z,s=u.fromRadians(0,e.south,m?t:n,i,mte).z;let S=u.fromRadians(e.east,g,n,i,pte);return l=Ft.getPointDistance(h,S),f=0,u1(_,b,y,I,r,a,s,A,l,f,o)};Ln.fromTransformation=function(e,t){return c(t)||(t=new Ln),t.center=O.getTranslation(e,t.center),t.halfAxes=O.getMatrix3(e,t.halfAxes),t.halfAxes=J.multiplyByScalar(t.halfAxes,.5,t.halfAxes),t};Ln.clone=function(e,t){if(c(e))return c(t)?(u.clone(e.center,t.center),J.clone(e.halfAxes,t.halfAxes),t):new Ln(e.center,e.halfAxes)};Ln.intersectPlane=function(e,t){let n=e.center,i=t.normal,o=e.halfAxes,r=i.x,a=i.y,s=i.z,A=Math.abs(r*o[J.COLUMN0ROW0]+a*o[J.COLUMN0ROW1]+s*o[J.COLUMN0ROW2])+Math.abs(r*o[J.COLUMN1ROW0]+a*o[J.COLUMN1ROW1]+s*o[J.COLUMN1ROW2])+Math.abs(r*o[J.COLUMN2ROW0]+a*o[J.COLUMN2ROW1]+s*o[J.COLUMN2ROW2]),l=u.dot(i,n)+t.distance;return l<=-A?vt.OUTSIDE:l>=A?vt.INSIDE:vt.INTERSECTING};var C1=new u,_1=new u,E1=new u,Cte=new u,p1=new u,_te=new u;Ln.distanceSquaredTo=function(e,t){let n=u.subtract(t,e.center,g1),i=e.halfAxes,o=J.getColumn(i,0,C1),r=J.getColumn(i,1,_1),a=J.getColumn(i,2,E1),s=u.magnitude(o),A=u.magnitude(r),l=u.magnitude(a),f=!0,h=!0,m=!0;s>0?u.divideByScalar(o,s,o):f=!1,A>0?u.divideByScalar(r,A,r):h=!1,l>0?u.divideByScalar(a,l,a):m=!1;let p=!f+!h+!m,g,C,_;if(p===1){let b=o;g=r,C=a,h?m||(b=a,C=o):(b=r,g=o),_=u.cross(g,C,p1),b===o?o=_:b===r?r=_:b===a&&(a=_)}else if(p===2){g=o,h?g=r:m&&(g=a);let b=u.UNIT_Y;b.equalsEpsilon(g,w.EPSILON3)&&(b=u.UNIT_X),C=u.cross(g,b,Cte),u.normalize(C,C),_=u.cross(g,C,p1),u.normalize(_,_),g===o?(r=C,a=_):g===r?(a=C,o=_):g===a&&(o=C,r=_)}else p===3&&(o=u.UNIT_X,r=u.UNIT_Y,a=u.UNIT_Z);let E=_te;E.x=u.dot(n,o),E.y=u.dot(n,r),E.z=u.dot(n,a);let I=0,y;return E.x<-s?(y=E.x+s,I+=y*y):E.x>s&&(y=E.x-s,I+=y*y),E.y<-A?(y=E.y+A,I+=y*y):E.y>A&&(y=E.y-A,I+=y*y),E.z<-l?(y=E.z+l,I+=y*y):E.z>l&&(y=E.z-l,I+=y*y),I};var Ete=new u,Ite=new u;Ln.computePlaneDistances=function(e,t,n,i){c(i)||(i=new Ss);let o=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY,a=e.center,s=e.halfAxes,A=J.getColumn(s,0,C1),l=J.getColumn(s,1,_1),f=J.getColumn(s,2,E1),h=u.add(A,l,Ete);u.add(h,f,h),u.add(h,a,h);let m=u.subtract(h,t,Ite),p=u.dot(n,m);return o=Math.min(p,o),r=Math.max(p,r),u.add(a,A,h),u.add(h,l,h),u.subtract(h,f,h),u.subtract(h,t,m),p=u.dot(n,m),o=Math.min(p,o),r=Math.max(p,r),u.add(a,A,h),u.subtract(h,l,h),u.add(h,f,h),u.subtract(h,t,m),p=u.dot(n,m),o=Math.min(p,o),r=Math.max(p,r),u.add(a,A,h),u.subtract(h,l,h),u.subtract(h,f,h),u.subtract(h,t,m),p=u.dot(n,m),o=Math.min(p,o),r=Math.max(p,r),u.subtract(a,A,h),u.add(h,l,h),u.add(h,f,h),u.subtract(h,t,m),p=u.dot(n,m),o=Math.min(p,o),r=Math.max(p,r),u.subtract(a,A,h),u.add(h,l,h),u.subtract(h,f,h),u.subtract(h,t,m),p=u.dot(n,m),o=Math.min(p,o),r=Math.max(p,r),u.subtract(a,A,h),u.subtract(h,l,h),u.add(h,f,h),u.subtract(h,t,m),p=u.dot(n,m),o=Math.min(p,o),r=Math.max(p,r),u.subtract(a,A,h),u.subtract(h,l,h),u.subtract(h,f,h),u.subtract(h,t,m),p=u.dot(n,m),o=Math.min(p,o),r=Math.max(p,r),i.start=o,i.stop=r,i};var yte=new u,bte=new u,Bte=new u;Ln.computeCorners=function(e,t){c(t)||(t=[new u,new u,new u,new u,new u,new u,new u,new u]);let n=e.center,i=e.halfAxes,o=J.getColumn(i,0,yte),r=J.getColumn(i,1,bte),a=J.getColumn(i,2,Bte);return u.clone(n,t[0]),u.subtract(t[0],o,t[0]),u.subtract(t[0],r,t[0]),u.subtract(t[0],a,t[0]),u.clone(n,t[1]),u.subtract(t[1],o,t[1]),u.subtract(t[1],r,t[1]),u.add(t[1],a,t[1]),u.clone(n,t[2]),u.subtract(t[2],o,t[2]),u.add(t[2],r,t[2]),u.subtract(t[2],a,t[2]),u.clone(n,t[3]),u.subtract(t[3],o,t[3]),u.add(t[3],r,t[3]),u.add(t[3],a,t[3]),u.clone(n,t[4]),u.add(t[4],o,t[4]),u.subtract(t[4],r,t[4]),u.subtract(t[4],a,t[4]),u.clone(n,t[5]),u.add(t[5],o,t[5]),u.subtract(t[5],r,t[5]),u.add(t[5],a,t[5]),u.clone(n,t[6]),u.add(t[6],o,t[6]),u.add(t[6],r,t[6]),u.subtract(t[6],a,t[6]),u.clone(n,t[7]),u.add(t[7],o,t[7]),u.add(t[7],r,t[7]),u.add(t[7],a,t[7]),t};var xte=new J;Ln.computeTransformation=function(e,t){c(t)||(t=new O);let n=e.center,i=J.multiplyByUniformScale(e.halfAxes,2,xte);return O.fromRotationTranslation(i,n,t)};var Tte=new ee;Ln.isOccluded=function(e,t){let n=ee.fromOrientedBoundingBox(e,Tte);return!t.isBoundingSphereVisible(n)};Ln.prototype.intersectPlane=function(e){return Ln.intersectPlane(this,e)};Ln.prototype.distanceSquaredTo=function(e){return Ln.distanceSquaredTo(this,e)};Ln.prototype.computePlaneDistances=function(e,t,n){return Ln.computePlaneDistances(this,e,t,n)};Ln.prototype.computeCorners=function(e){return Ln.computeCorners(this,e)};Ln.prototype.computeTransformation=function(e){return Ln.computeTransformation(this,e)};Ln.prototype.isOccluded=function(e){return Ln.isOccluded(this,e)};Ln.equals=function(e,t){return e===t||c(e)&&c(t)&&u.equals(e.center,t.center)&&J.equals(e.halfAxes,t.halfAxes)};Ln.prototype.clone=function(e){return Ln.clone(this,e)};Ln.prototype.equals=function(e){return Ln.equals(this,e)};var To=Ln;var fy={};fy.getHeight=function(e,t,n){return(e-n)*t+n};var Ste=new ae;fy.getPosition=function(e,t,n,i,o){let r=t.cartesianToCartographic(e,Ste);if(!c(r))return u.clone(e,o);let a=fy.getHeight(r.height,n,i);return u.fromRadians(r.longitude,r.latitude,a,t,o)};var EA=fy;var I1=`in vec3 position3DHigh;
in vec3 position3DLow;
in float batchId;

#ifdef EXTRUDED_GEOMETRY
in vec3 extrudeDirection;

uniform float u_globeMinimumAltitude;
#endif // EXTRUDED_GEOMETRY

#ifdef PER_INSTANCE_COLOR
out vec4 v_color;
#endif // PER_INSTANCE_COLOR

#ifdef TEXTURE_COORDINATES
#ifdef SPHERICAL
out vec4 v_sphericalExtents;
#else // SPHERICAL
out vec2 v_inversePlaneExtents;
out vec4 v_westPlane;
out vec4 v_southPlane;
#endif // SPHERICAL
out vec3 v_uvMinAndSphericalLongitudeRotation;
out vec3 v_uMaxAndInverseDistance;
out vec3 v_vMaxAndInverseDistance;
#endif // TEXTURE_COORDINATES

void main()
{
    vec4 position = czm_computePosition();

#ifdef EXTRUDED_GEOMETRY
    float delta = min(u_globeMinimumAltitude, czm_geometricToleranceOverMeter * length(position.xyz));
    delta *= czm_sceneMode == czm_sceneMode3D ? 1.0 : 0.0;

    //extrudeDirection is zero for the top layer
    position = position + vec4(extrudeDirection * delta, 0.0);
#endif

#ifdef TEXTURE_COORDINATES
#ifdef SPHERICAL
    v_sphericalExtents = czm_batchTable_sphericalExtents(batchId);
    v_uvMinAndSphericalLongitudeRotation.z = czm_batchTable_longitudeRotation(batchId);
#else // SPHERICAL
#ifdef COLUMBUS_VIEW_2D
    vec4 planes2D_high = czm_batchTable_planes2D_HIGH(batchId);
    vec4 planes2D_low = czm_batchTable_planes2D_LOW(batchId);

    // If the primitive is split across the IDL (planes2D_high.x > planes2D_high.w):
    // - If this vertex is on the east side of the IDL (position3DLow.y > 0.0, comparison with position3DHigh may produce artifacts)
    // - existing "east" is on the wrong side of the world, far away (planes2D_high/low.w)
    // - so set "east" as beyond the eastmost extent of the projection (idlSplitNewPlaneHiLow)
    vec2 idlSplitNewPlaneHiLow = vec2(EAST_MOST_X_HIGH - (WEST_MOST_X_HIGH - planes2D_high.w), EAST_MOST_X_LOW - (WEST_MOST_X_LOW - planes2D_low.w));
    bool idlSplit = planes2D_high.x > planes2D_high.w && position3DLow.y > 0.0;
    planes2D_high.w = czm_branchFreeTernary(idlSplit, idlSplitNewPlaneHiLow.x, planes2D_high.w);
    planes2D_low.w = czm_branchFreeTernary(idlSplit, idlSplitNewPlaneHiLow.y, planes2D_low.w);

    // - else, if this vertex is on the west side of the IDL (position3DLow.y < 0.0)
    // - existing "west" is on the wrong side of the world, far away (planes2D_high/low.x)
    // - so set "west" as beyond the westmost extent of the projection (idlSplitNewPlaneHiLow)
    idlSplit = planes2D_high.x > planes2D_high.w && position3DLow.y < 0.0;
    idlSplitNewPlaneHiLow = vec2(WEST_MOST_X_HIGH - (EAST_MOST_X_HIGH - planes2D_high.x), WEST_MOST_X_LOW - (EAST_MOST_X_LOW - planes2D_low.x));
    planes2D_high.x = czm_branchFreeTernary(idlSplit, idlSplitNewPlaneHiLow.x, planes2D_high.x);
    planes2D_low.x = czm_branchFreeTernary(idlSplit, idlSplitNewPlaneHiLow.y, planes2D_low.x);

    vec3 southWestCorner = (czm_modelViewRelativeToEye * czm_translateRelativeToEye(vec3(0.0, planes2D_high.xy), vec3(0.0, planes2D_low.xy))).xyz;
    vec3 northWestCorner = (czm_modelViewRelativeToEye * czm_translateRelativeToEye(vec3(0.0, planes2D_high.x, planes2D_high.z), vec3(0.0, planes2D_low.x, planes2D_low.z))).xyz;
    vec3 southEastCorner = (czm_modelViewRelativeToEye * czm_translateRelativeToEye(vec3(0.0, planes2D_high.w, planes2D_high.y), vec3(0.0, planes2D_low.w, planes2D_low.y))).xyz;
#else // COLUMBUS_VIEW_2D
    // 3D case has smaller "plane extents," so planes encoded as a 64 bit position and 2 vec3s for distances/direction
    vec3 southWestCorner = (czm_modelViewRelativeToEye * czm_translateRelativeToEye(czm_batchTable_southWest_HIGH(batchId), czm_batchTable_southWest_LOW(batchId))).xyz;
    vec3 northWestCorner = czm_normal * czm_batchTable_northward(batchId) + southWestCorner;
    vec3 southEastCorner = czm_normal * czm_batchTable_eastward(batchId) + southWestCorner;
#endif // COLUMBUS_VIEW_2D

    vec3 eastWard = southEastCorner - southWestCorner;
    float eastExtent = length(eastWard);
    eastWard /= eastExtent;

    vec3 northWard = northWestCorner - southWestCorner;
    float northExtent = length(northWard);
    northWard /= northExtent;

    v_westPlane = vec4(eastWard, -dot(eastWard, southWestCorner));
    v_southPlane = vec4(northWard, -dot(northWard, southWestCorner));
    v_inversePlaneExtents = vec2(1.0 / eastExtent, 1.0 / northExtent);
#endif // SPHERICAL
    vec4 uvMinAndExtents = czm_batchTable_uvMinAndExtents(batchId);
    vec4 uMaxVmax = czm_batchTable_uMaxVmax(batchId);

    v_uMaxAndInverseDistance = vec3(uMaxVmax.xy, uvMinAndExtents.z);
    v_vMaxAndInverseDistance = vec3(uMaxVmax.zw, uvMinAndExtents.w);
    v_uvMinAndSphericalLongitudeRotation.xy = uvMinAndExtents.xy;
#endif // TEXTURE_COORDINATES

#ifdef PER_INSTANCE_COLOR
    v_color = czm_batchTable_color(batchId);
#endif

    gl_Position = czm_depthClamp(czm_modelViewProjectionRelativeToEye * position);
}
`;var rC=`#ifdef VECTOR_TILE
uniform vec4 u_highlightColor;
#endif

void main(void)
{
#ifdef VECTOR_TILE
    out_FragColor = czm_gammaCorrect(u_highlightColor);
#else
    out_FragColor = vec4(1.0);
#endif
    czm_writeDepthClamp();
}
`;var y1={TERRAIN:0,CESIUM_3D_TILE:1,BOTH:2};y1.NUMBER_OF_CLASSIFICATION_TYPES=3;var on=Object.freeze(y1);var wte={NEVER:V.NEVER,LESS:V.LESS,EQUAL:V.EQUAL,LESS_OR_EQUAL:V.LEQUAL,GREATER:V.GREATER,NOT_EQUAL:V.NOTEQUAL,GREATER_OR_EQUAL:V.GEQUAL,ALWAYS:V.ALWAYS},Ms=Object.freeze(wte);function Dte(e,t){let n=[],i=e.length,o=0;for(;o<i;){let r=Math.ceil((i-o)/t--);n.push(e.slice(o,o+r)),o+=r}return n}var b1=Dte;function gl(e,t,n){if(this._attributes=t,this._numberOfInstances=n,t.length===0)return;let i=Qte(t),o=e.floatingPointTexture,r=i===_t.FLOAT&&!o,a=Rte(t,r),s=vte(a,t,r),A=Math.floor(pn.maximumTextureSize/s),l=Math.min(n,A),f=s*l,h=Math.ceil(n/l),m=1/f,p=m*.5,g=1/h,C=g*.5;this._textureDimensions=new U(f,h),this._textureStep=new se(m,p,g,C),this._pixelDatatype=r?_t.UNSIGNED_BYTE:i,this._packFloats=r,this._offsets=a,this._stride=s,this._texture=void 0;let _=4*f*h;this._batchValues=i===_t.FLOAT&&!r?new Float32Array(_):new Uint8Array(_),this._batchValuesDirty=!1}Object.defineProperties(gl.prototype,{attributes:{get:function(){return this._attributes}},numberOfInstances:{get:function(){return this._numberOfInstances}}});function Qte(e){let t=!1,n=e.length;for(let i=0;i<n;++i)if(e[i].componentDatatype!==N.UNSIGNED_BYTE){t=!0;break}return t?_t.FLOAT:_t.UNSIGNED_BYTE}function x1(e,t){let n=e[t].componentsPerAttribute;return n===2?U:n===3?u:n===4?se:Number}function Rte(e,t){let n=new Array(e.length),i=0,o=e.length;for(let r=0;r<o;++r){let s=e[r].componentDatatype;n[r]=i,s!==N.UNSIGNED_BYTE&&t?i+=4:++i}return n}function vte(e,t,n){let i=e.length,o=e[i-1];return t[i-1].componentDatatype!==N.UNSIGNED_BYTE&&n?o+4:o+1}var aC=new se;function Pte(e,t,n){let i=se.unpack(e,t,aC),o=se.unpackFloat(i);i=se.unpack(e,t+4,aC);let r=se.unpackFloat(i);i=se.unpack(e,t+8,aC);let a=se.unpackFloat(i);i=se.unpack(e,t+12,aC);let s=se.unpackFloat(i);return se.fromElements(o,r,a,s,n)}function Mte(e,t,n){let i=se.packFloat(e.x,aC);se.pack(i,t,n),i=se.packFloat(e.y,i),se.pack(i,t,n+4),i=se.packFloat(e.z,i),se.pack(i,t,n+8),i=se.packFloat(e.w,i),se.pack(i,t,n+12)}var B1=new se;gl.prototype.getBatchedAttribute=function(e,t,n){let i=this._attributes,o=this._offsets[t],a=4*this._stride*e+4*o,s;this._packFloats&&i[t].componentDatatype!==_t.UNSIGNED_BYTE?s=Pte(this._batchValues,a,B1):s=se.unpack(this._batchValues,a,B1);let A=x1(i,t);return c(A.fromCartesian4)?A.fromCartesian4(s,n):c(A.clone)?A.clone(s,n):s.x};var Ote=[void 0,void 0,new U,new u,new se],Lte=new se;gl.prototype.setBatchedAttribute=function(e,t,n){let i=this._attributes,o=Ote[i[t].componentsPerAttribute],r=this.getBatchedAttribute(e,t,o),a=x1(this._attributes,t);if(c(a.equals)?a.equals(r,n):r===n)return;let A=Lte;A.x=c(n.x)?n.x:n,A.y=c(n.y)?n.y:0,A.z=c(n.z)?n.z:0,A.w=c(n.w)?n.w:0;let l=this._offsets[t],h=4*this._stride*e+4*l;this._packFloats&&i[t].componentDatatype!==_t.UNSIGNED_BYTE?Mte(A,this._batchValues,h):se.pack(A,this._batchValues,h),this._batchValuesDirty=!0};function Nte(e,t){let n=e._textureDimensions;e._texture=new gn({context:t,pixelFormat:Bt.RGBA,pixelDatatype:e._pixelDatatype,width:n.x,height:n.y,sampler:dn.NEAREST,flipY:!1})}function Fte(e){let t=e._textureDimensions;e._texture.copyFrom({source:{width:t.x,height:t.y,arrayBufferView:e._batchValues}})}gl.prototype.update=function(e){c(this._texture)&&!this._batchValuesDirty||this._attributes.length===0||(this._batchValuesDirty=!1,c(this._texture)||Nte(this,e.context),Fte(this))};gl.prototype.getUniformMapCallback=function(){let e=this;return function(t){return e._attributes.length===0?t:Et(t,{batchTexture:function(){return e._texture},batchTextureDimensions:function(){return e._textureDimensions},batchTextureStep:function(){return e._textureStep}})}};function kte(e){let t=e._stride;return e._textureDimensions.y===1?`uniform vec4 batchTextureStep; 
vec2 computeSt(float batchId) 
{ 
    float stepX = batchTextureStep.x; 
    float centerX = batchTextureStep.y; 
    float numberOfAttributes = float(${t}); 
    return vec2(centerX + (batchId * numberOfAttributes * stepX), 0.5); 
} 
`:`uniform vec4 batchTextureStep; 
uniform vec2 batchTextureDimensions; 
vec2 computeSt(float batchId) 
{ 
    float stepX = batchTextureStep.x; 
    float centerX = batchTextureStep.y; 
    float stepY = batchTextureStep.z; 
    float centerY = batchTextureStep.w; 
    float numberOfAttributes = float(${t}); 
    float xId = mod(batchId * numberOfAttributes, batchTextureDimensions.x); 
    float yId = floor(batchId * numberOfAttributes / batchTextureDimensions.x); 
    return vec2(centerX + (xId * stepX), centerY + (yId * stepY)); 
} 
`}function Ute(e){return e===1?"float":`vec${e}`}function Gte(e){return e===1?".x":e===2?".xy":e===3?".xyz":""}function zte(e,t){let i=e._attributes[t],o=i.componentsPerAttribute,r=i.functionName,a=Ute(o),s=Gte(o),A=e._offsets[t],l=`${a} ${r}(float batchId) 
{ 
    vec2 st = computeSt(batchId); 
    st.x += batchTextureStep.x * float(${A}); 
`;return e._packFloats&&i.componentDatatype!==_t.UNSIGNED_BYTE?l+=`vec4 textureValue; 
textureValue.x = czm_unpackFloat(texture(batchTexture, st)); 
textureValue.y = czm_unpackFloat(texture(batchTexture, st + vec2(batchTextureStep.x, 0.0))); 
textureValue.z = czm_unpackFloat(texture(batchTexture, st + vec2(batchTextureStep.x * 2.0, 0.0))); 
textureValue.w = czm_unpackFloat(texture(batchTexture, st + vec2(batchTextureStep.x * 3.0, 0.0))); 
`:l+=`    vec4 textureValue = texture(batchTexture, st); 
`,l+=`    ${a} value = textureValue${s}; 
`,e._pixelDatatype===_t.UNSIGNED_BYTE&&i.componentDatatype===N.UNSIGNED_BYTE&&!i.normalize?l+=`value *= 255.0; 
`:e._pixelDatatype===_t.FLOAT&&i.componentDatatype===N.UNSIGNED_BYTE&&i.normalize&&(l+=`value /= 255.0; 
`),l+=`    return value; 
} 
`,l}gl.prototype.getVertexShaderCallback=function(){let e=this._attributes;if(e.length===0)return function(i){return i};let t=`uniform highp sampler2D batchTexture; 
`;t+=`${kte(this)}
`;let n=e.length;for(let i=0;i<n;++i)t+=zte(this,i);return function(i){let o=i.indexOf("void main"),r=i.substring(0,o),a=i.substring(o);return`${r}
${t}
${a}`}};gl.prototype.isDestroyed=function(){return!1};gl.prototype.destroy=function(){return this._texture=this._texture&&this._texture.destroy(),pe(this)};var uy=gl;function Ba(e){this._ellipsoid=e??Z.WGS84,this._semimajorAxis=this._ellipsoid.maximumRadius,this._oneOverSemimajorAxis=1/this._semimajorAxis}Object.defineProperties(Ba.prototype,{ellipsoid:{get:function(){return this._ellipsoid}}});Ba.mercatorAngleToGeodeticLatitude=function(e){return w.PI_OVER_TWO-2*Math.atan(Math.exp(-e))};Ba.geodeticLatitudeToMercatorAngle=function(e){e>Ba.MaximumLatitude?e=Ba.MaximumLatitude:e<-Ba.MaximumLatitude&&(e=-Ba.MaximumLatitude);let t=Math.sin(e);return .5*Math.log((1+t)/(1-t))};Ba.MaximumLatitude=Ba.mercatorAngleToGeodeticLatitude(Math.PI);Ba.prototype.project=function(e,t){let n=this._semimajorAxis,i=e.longitude*n,o=Ba.geodeticLatitudeToMercatorAngle(e.latitude)*n,r=e.height;return c(t)?(t.x=i,t.y=o,t.z=r,t):new u(i,o,r)};Ba.prototype.unproject=function(e,t){let n=this._oneOverSemimajorAxis,i=e.x*n,o=Ba.mercatorAngleToGeodeticLatitude(e.y*n),r=e.z;return c(t)?(t.longitude=i,t.latitude=o,t.height=r,t):new ae(i,o,r)};var Ar=Ba;function Hte(e,t,n){let i=!n,o=e.length,r;if(!i&&o>1){let a=e[0].modelMatrix;for(r=1;r<o;++r)if(!O.equals(a,e[r].modelMatrix)){i=!0;break}}if(i)for(r=0;r<o;++r)c(e[r].geometry)&&Mn.transformToWorldCoordinates(e[r]);else O.multiplyTransformation(t,e[0].modelMatrix,t)}function zT(e,t){let n=e.attributes,i=n.position,o=i.values.length/i.componentsPerAttribute;n.batchId=new ue({componentDatatype:N.FLOAT,componentsPerAttribute:1,values:new Float32Array(o)});let r=n.batchId.values;for(let a=0;a<o;++a)r[a]=t}function Vte(e){let t=e.length;for(let n=0;n<t;++n){let i=e[n];c(i.geometry)?zT(i.geometry,n):c(i.westHemisphereGeometry)&&c(i.eastHemisphereGeometry)&&(zT(i.westHemisphereGeometry,n),zT(i.eastHemisphereGeometry,n))}}function jte(e){let t=e.instances,n=e.projection,i=e.elementIndexUintSupported,o=e.scene3DOnly,r=e.vertexCacheOptimize,a=e.compressVertices,s=e.modelMatrix,A,l,f,h=t.length;for(A=0;A<h;++A)if(c(t[A].geometry)){f=t[A].geometry.primitiveType;break}if(Hte(t,s,o),!o)for(A=0;A<h;++A)c(t[A].geometry)&&Mn.splitLongitude(t[A]);if(Vte(t),r)for(A=0;A<h;++A){let p=t[A];c(p.geometry)?(Mn.reorderForPostVertexCache(p.geometry),Mn.reorderForPreVertexCache(p.geometry)):c(p.westHemisphereGeometry)&&c(p.eastHemisphereGeometry)&&(Mn.reorderForPostVertexCache(p.westHemisphereGeometry),Mn.reorderForPreVertexCache(p.westHemisphereGeometry),Mn.reorderForPostVertexCache(p.eastHemisphereGeometry),Mn.reorderForPreVertexCache(p.eastHemisphereGeometry))}let m=Mn.combineInstances(t);for(h=m.length,A=0;A<h;++A){l=m[A];let p=l.attributes;if(o)for(let g in p)p.hasOwnProperty(g)&&p[g].componentDatatype===N.DOUBLE&&Mn.encodeAttribute(l,g,`${g}3DHigh`,`${g}3DLow`);else for(let g in p)if(p.hasOwnProperty(g)&&p[g].componentDatatype===N.DOUBLE){let C=`${g}3D`,_=`${g}2D`;Mn.projectTo2D(l,g,C,_,n),c(l.boundingSphere)&&g==="position"&&(l.boundingSphereCV=ee.fromVertices(l.attributes.position2D.values)),Mn.encodeAttribute(l,C,`${C}High`,`${C}Low`),Mn.encodeAttribute(l,_,`${_}High`,`${_}Low`)}a&&Mn.compressVertices(l)}if(!i){let p=[];for(h=m.length,A=0;A<h;++A)l=m[A],p=p.concat(Mn.fitToUnsignedShortIndices(l));m=p}return m}function HT(e,t,n,i){let o,r,a,s=i.length-1;if(s>=0){let l=i[s];o=l.offset+l.count,a=l.index,r=n[a].indices.length}else o=0,a=0,r=n[a].indices.length;let A=e.length;for(let l=0;l<A;++l){let h=e[l][t];if(!c(h))continue;let m=h.indices.length;o+m>r&&(o=0,r=n[++a].indices.length),i.push({index:a,offset:o,count:m}),o+=m}}function Yte(e,t){let n=[];return HT(e,"geometry",t,n),HT(e,"westHemisphereGeometry",t,n),HT(e,"eastHemisphereGeometry",t,n),n}var Cl={};Cl.combineGeometry=function(e){let t,n,i=e.instances,o=i.length,r,a,s=!1;o>0&&(t=jte(e),t.length>0&&(n=Mn.createAttributeLocations(t[0]),e.createPickOffsets&&(r=Yte(i,t))),c(i[0].attributes)&&c(i[0].attributes.offset)&&(a=new Array(o),s=!0));let A=new Array(o),l=new Array(o);for(let f=0;f<o;++f){let h=i[f],m=h.geometry;c(m)&&(A[f]=m.boundingSphere,l[f]=m.boundingSphereCV,s&&(a[f]=h.geometry.offsetAttribute));let p=h.eastHemisphereGeometry,g=h.westHemisphereGeometry;c(p)&&c(g)&&(c(p.boundingSphere)&&c(g.boundingSphere)&&(A[f]=ee.union(p.boundingSphere,g.boundingSphere)),c(p.boundingSphereCV)&&c(g.boundingSphereCV)&&(l[f]=ee.union(p.boundingSphereCV,g.boundingSphereCV)))}return{geometries:t,modelMatrix:e.modelMatrix,attributeLocations:n,pickOffsets:r,offsetInstanceExtend:a,boundingSpheres:A,boundingSpheresCV:l}};function qte(e,t){let n=e.attributes;for(let i in n)if(n.hasOwnProperty(i)){let o=n[i];c(o)&&c(o.values)&&t.push(o.values.buffer)}c(e.indices)&&t.push(e.indices.buffer)}function Wte(e,t){let n=e.length;for(let i=0;i<n;++i)qte(e[i],t)}function Jte(e){let t=1,n=e.length;for(let i=0;i<n;i++){let o=e[i];if(++t,!c(o))continue;let r=o.attributes;t+=7+2*ee.packedLength+(c(o.indices)?o.indices.length:0);for(let a in r)if(r.hasOwnProperty(a)&&c(r[a])){let s=r[a];t+=5+s.values.length}}return t}Cl.packCreateGeometryResults=function(e,t){let n=new Float64Array(Jte(e)),i=[],o={},r=e.length,a=0;n[a++]=r;for(let s=0;s<r;s++){let A=e[s],l=c(A);if(n[a++]=l?1:0,!l)continue;n[a++]=A.primitiveType,n[a++]=A.geometryType,n[a++]=A.offsetAttribute??-1;let f=c(A.boundingSphere)?1:0;n[a++]=f,f&&ee.pack(A.boundingSphere,n,a),a+=ee.packedLength;let h=c(A.boundingSphereCV)?1:0;n[a++]=h,h&&ee.pack(A.boundingSphereCV,n,a),a+=ee.packedLength;let m=A.attributes,p=[];for(let C in m)m.hasOwnProperty(C)&&c(m[C])&&(p.push(C),c(o[C])||(o[C]=i.length,i.push(C)));n[a++]=p.length;for(let C=0;C<p.length;C++){let _=p[C],E=m[_];n[a++]=o[_],n[a++]=E.componentDatatype,n[a++]=E.componentsPerAttribute,n[a++]=E.normalize?1:0,n[a++]=E.values.length,n.set(E.values,a),a+=E.values.length}let g=c(A.indices)?A.indices.length:0;n[a++]=g,g>0&&(n.set(A.indices,a),a+=g)}return t.push(n.buffer),{stringTable:i,packedData:n}};Cl.unpackCreateGeometryResults=function(e){let t=e.stringTable,n=e.packedData,i,o=new Array(n[0]),r=0,a=1;for(;a<n.length;){if(!(n[a++]===1)){o[r++]=void 0;continue}let A=n[a++],l=n[a++],f=n[a++];f===-1&&(f=void 0);let h,m;n[a++]===1&&(h=ee.unpack(n,a)),a+=ee.packedLength,n[a++]===1&&(m=ee.unpack(n,a)),a+=ee.packedLength;let C,_,E,I=new Mt,y=n[a++];for(i=0;i<y;i++){let x=t[n[a++]],S=n[a++];E=n[a++];let P=n[a++]!==0;C=n[a++],_=N.createTypedArray(S,C);for(let D=0;D<C;D++)_[D]=n[a++];I[x]=new ue({componentDatatype:S,componentsPerAttribute:E,normalize:P,values:_})}let b;if(C=n[a++],C>0){let x=_.length/E;for(b=Be.createTypedArray(x,C),i=0;i<C;i++)b[i]=n[a++]}o[r++]=new ze({primitiveType:A,geometryType:l,boundingSphere:h,boundingSphereCV:m,indices:b,attributes:I,offsetAttribute:f})}return o};function Kte(e,t){let n=e.length,i=new Float64Array(1+n*19),o=0;i[o++]=n;for(let r=0;r<n;r++){let a=e[r];if(O.pack(a.modelMatrix,i,o),o+=O.packedLength,c(a.attributes)&&c(a.attributes.offset)){let s=a.attributes.offset.value;i[o]=s[0],i[o+1]=s[1],i[o+2]=s[2]}o+=3}return t.push(i.buffer),i}function Xte(e){let t=e,n=new Array(t[0]),i=0,o=1;for(;o<t.length;){let r=O.unpack(t,o),a;o+=O.packedLength,c(t[o])&&(a={offset:new ii(t[o],t[o+1],t[o+2])}),o+=3,n[i++]={modelMatrix:r,attributes:a}}return n}Cl.packCombineGeometryParameters=function(e,t){let n=e.createGeometryResults,i=n.length;for(let o=0;o<i;o++)t.push(n[o].packedData.buffer);return{createGeometryResults:e.createGeometryResults,packedInstances:Kte(e.instances,t),ellipsoid:e.ellipsoid,isGeographic:e.projection instanceof Ai,elementIndexUintSupported:e.elementIndexUintSupported,scene3DOnly:e.scene3DOnly,vertexCacheOptimize:e.vertexCacheOptimize,compressVertices:e.compressVertices,modelMatrix:e.modelMatrix,createPickOffsets:e.createPickOffsets}};Cl.unpackCombineGeometryParameters=function(e){let t=Xte(e.packedInstances),n=e.createGeometryResults,i=n.length,o=0;for(let s=0;s<i;s++){let A=Cl.unpackCreateGeometryResults(n[s]),l=A.length;for(let f=0;f<l;f++){let h=A[f],m=t[o];m.geometry=h,++o}}let r=Z.clone(e.ellipsoid),a=e.isGeographic?new Ai(r):new Ar(r);return{instances:t,ellipsoid:r,projection:a,elementIndexUintSupported:e.elementIndexUintSupported,scene3DOnly:e.scene3DOnly,vertexCacheOptimize:e.vertexCacheOptimize,compressVertices:e.compressVertices,modelMatrix:O.clone(e.modelMatrix),createPickOffsets:e.createPickOffsets}};function T1(e){let t=e.length,n=1+(ee.packedLength+1)*t,i=new Float32Array(n),o=0;i[o++]=t;for(let r=0;r<t;++r){let a=e[r];c(a)?(i[o++]=1,ee.pack(e[r],i,o)):i[o++]=0,o+=ee.packedLength}return i}function S1(e){let t=new Array(e[0]),n=0,i=1;for(;i<e.length;)e[i++]===1&&(t[n]=ee.unpack(e,i)),++n,i+=ee.packedLength;return t}Cl.packCombineGeometryResults=function(e,t){c(e.geometries)&&Wte(e.geometries,t);let n=T1(e.boundingSpheres),i=T1(e.boundingSpheresCV);return t.push(n.buffer,i.buffer),{geometries:e.geometries,attributeLocations:e.attributeLocations,modelMatrix:e.modelMatrix,pickOffsets:e.pickOffsets,offsetInstanceExtend:e.offsetInstanceExtend,boundingSpheres:n,boundingSpheresCV:i}};Cl.unpackCombineGeometryResults=function(e){return{geometries:e.geometries,attributeLocations:e.attributeLocations,modelMatrix:e.modelMatrix,pickOffsets:e.pickOffsets,offsetInstanceExtend:e.offsetInstanceExtend,boundingSpheres:S1(e.boundingSpheres),boundingSpheresCV:S1(e.boundingSpheresCV)}};var dy=Cl;var Zte={READY:0,CREATING:1,CREATED:2,COMBINING:3,COMBINED:4,COMPLETE:5,FAILED:6},Co=Object.freeze(Zte);var Xa={DISABLED:0,ENABLED:1,CAST_ONLY:2,RECEIVE_ONLY:3};Xa.NUMBER_OF_SHADOW_MODES=4;Xa.castShadows=function(e){return e===Xa.ENABLED||e===Xa.CAST_ONLY};Xa.receiveShadows=function(e){return e===Xa.ENABLED||e===Xa.RECEIVE_ONLY};Xa.fromCastReceive=function(e,t){return e&&t?Xa.ENABLED:e?Xa.CAST_ONLY:t?Xa.RECEIVE_ONLY:Xa.DISABLED};var cn=Object.freeze(Xa);function zi(e){e=e??k.EMPTY_OBJECT,this.geometryInstances=e.geometryInstances,this.appearance=e.appearance,this._appearance=void 0,this._material=void 0,this.depthFailAppearance=e.depthFailAppearance,this._depthFailAppearance=void 0,this._depthFailMaterial=void 0,this.modelMatrix=O.clone(e.modelMatrix??O.IDENTITY),this._modelMatrix=new O,this.show=e.show??!0,this._vertexCacheOptimize=e.vertexCacheOptimize??!1,this._interleave=e.interleave??!1,this._releaseGeometryInstances=e.releaseGeometryInstances??!0,this._allowPicking=e.allowPicking??!0,this._asynchronous=e.asynchronous??!0,this._compressVertices=e.compressVertices??!0,this.cull=e.cull??!0,this.debugShowBoundingVolume=e.debugShowBoundingVolume??!1,this.rtcCenter=e.rtcCenter,this.shadows=e.shadows??cn.DISABLED,this._translucent=void 0,this._state=Co.READY,this._geometries=[],this._error=void 0,this._numberOfInstances=0,this._boundingSpheres=[],this._boundingSphereWC=[],this._boundingSphereCV=[],this._boundingSphere2D=[],this._boundingSphereMorph=[],this._perInstanceAttributeCache=new Map,this._instanceIds=[],this._lastPerInstanceAttributeIndex=0,this._va=[],this._attributeLocations=void 0,this._primitiveType=void 0,this._frontFaceRS=void 0,this._backFaceRS=void 0,this._sp=void 0,this._depthFailAppearance=void 0,this._spDepthFail=void 0,this._frontFaceDepthFailRS=void 0,this._backFaceDepthFailRS=void 0,this._pickIds=[],this._colorCommands=[],this._pickCommands=[],this._createBoundingVolumeFunction=e._createBoundingVolumeFunction,this._createRenderStatesFunction=e._createRenderStatesFunction,this._createShaderProgramFunction=e._createShaderProgramFunction,this._createCommandsFunction=e._createCommandsFunction,this._updateAndQueueCommandsFunction=e._updateAndQueueCommandsFunction,this._createPickOffsets=e._createPickOffsets,this._pickOffsets=void 0,this._createGeometryResults=void 0,this._ready=!1,this._batchTable=void 0,this._batchTableAttributeIndices=void 0,this._offsetInstanceExtend=void 0,this._batchTableOffsetAttribute2DIndex=void 0,this._batchTableOffsetsUpdated=!1,this._instanceBoundingSpheres=void 0,this._instanceBoundingSpheresCV=void 0,this._tempBoundingSpheres=void 0,this._recomputeBoundingSpheres=!1,this._batchTableBoundingSpheresUpdated=!1,this._batchTableBoundingSphereAttributeIndices=void 0}Object.defineProperties(zi.prototype,{vertexCacheOptimize:{get:function(){return this._vertexCacheOptimize}},interleave:{get:function(){return this._interleave}},releaseGeometryInstances:{get:function(){return this._releaseGeometryInstances}},allowPicking:{get:function(){return this._allowPicking}},asynchronous:{get:function(){return this._asynchronous}},compressVertices:{get:function(){return this._compressVertices}},ready:{get:function(){return this._ready}}});function $te(e){let t=e.length,n=[],i=e[0].attributes,o;for(o in i)if(i.hasOwnProperty(o)&&c(i[o])){let r=i[o],a=!0;for(let s=1;s<t;++s){let A=e[s].attributes[o];if(!c(A)||r.componentDatatype!==A.componentDatatype||r.componentsPerAttribute!==A.componentsPerAttribute||r.normalize!==A.normalize){a=!1;break}}a&&n.push(o)}return n}var ene=new U,tne=new u,L1=new se;function N1(e){let t=e.length;if(t===1)return e[0];if(t===2)return U.unpack(e,0,ene);if(t===3)return u.unpack(e,0,tne);if(t===4)return se.unpack(e,0,L1)}function nne(e,t){let n=e.geometryInstances,i=Array.isArray(n)?n:[n],o=i.length;if(o===0)return;let r=$te(i),a=r.length,s=[],A={},l={},f,m=i[0].attributes,p,g,C;for(p=0;p<a;++p)g=r[p],C=m[g],A[g]=p,s.push({functionName:`czm_batchTable_${g}`,componentDatatype:C.componentDatatype,componentsPerAttribute:C.componentsPerAttribute,normalize:C.normalize});r.indexOf("distanceDisplayCondition")!==-1&&(s.push({functionName:"czm_batchTable_boundingSphereCenter3DHigh",componentDatatype:N.FLOAT,componentsPerAttribute:3},{functionName:"czm_batchTable_boundingSphereCenter3DLow",componentDatatype:N.FLOAT,componentsPerAttribute:3},{functionName:"czm_batchTable_boundingSphereCenter2DHigh",componentDatatype:N.FLOAT,componentsPerAttribute:3},{functionName:"czm_batchTable_boundingSphereCenter2DLow",componentDatatype:N.FLOAT,componentsPerAttribute:3},{functionName:"czm_batchTable_boundingSphereRadius",componentDatatype:N.FLOAT,componentsPerAttribute:1}),l.center3DHigh=s.length-5,l.center3DLow=s.length-4,l.center2DHigh=s.length-3,l.center2DLow=s.length-2,l.radius=s.length-1),r.indexOf("offset")!==-1&&(s.push({functionName:"czm_batchTable_offset2D",componentDatatype:N.FLOAT,componentsPerAttribute:3}),f=s.length-1),s.push({functionName:"czm_batchTable_pickColor",componentDatatype:N.UNSIGNED_BYTE,componentsPerAttribute:4,normalize:!0});let _=s.length,E=new uy(t,s,o);for(p=0;p<o;++p){let I=i[p];m=I.attributes;for(let P=0;P<a;++P){g=r[P],C=m[g];let D=N1(C.value),Q=A[g];E.setBatchedAttribute(p,Q,D)}let y={primitive:I.pickPrimitive??e};c(I.id)&&(y.id=I.id);let b=t.createPickId(y);e._pickIds.push(b);let x=b.color,S=L1;S.x=F.floatToByte(x.red),S.y=F.floatToByte(x.green),S.z=F.floatToByte(x.blue),S.w=F.floatToByte(x.alpha),E.setBatchedAttribute(p,_-1,S)}e._batchTable=E,e._batchTableAttributeIndices=A,e._batchTableBoundingSphereAttributeIndices=l,e._batchTableOffsetAttribute2DIndex=f}function ine(e){let t;return Array.isArray(e.values)?t=e.values.slice(0):t=new e.values.constructor(e.values),new ue({componentDatatype:e.componentDatatype,componentsPerAttribute:e.componentsPerAttribute,normalize:e.normalize,values:t})}function one(e){let t=e.attributes,n=new Mt;for(let o in t)t.hasOwnProperty(o)&&c(t[o])&&(n[o]=ine(t[o]));let i;if(c(e.indices)){let o=e.indices;Array.isArray(o)?i=o.slice(0):i=new o.constructor(o)}return new ze({attributes:n,indices:i,primitiveType:e.primitiveType,boundingSphere:ee.clone(e.boundingSphere)})}function rne(e,t){return{geometry:t,attributes:e.attributes,modelMatrix:O.clone(e.modelMatrix),pickPrimitive:e.pickPrimitive,id:e.id}}var ane=/in\s+vec(?:3|4)\s+(.*)3DHigh;/g;zi._modifyShaderPosition=function(e,t,n){let i,o="",r="",a="";for(;(i=ane.exec(t))!==null;){let s=i[1],A=`vec4 czm_compute${s[0].toUpperCase()}${s.substr(1)}()`;A!=="vec4 czm_computePosition()"&&(o+=`${A};
`),c(e.rtcCenter)?(t=t.replace(/in\s+vec(?:3|4)\s+position3DHigh;/g,""),t=t.replace(/in\s+vec(?:3|4)\s+position3DLow;/g,""),o+=`uniform mat4 u_modifiedModelView;
`,r+=`in vec4 position;
`,a+=`${A}
{
    return u_modifiedModelView * position;
}

`,t=t.replace(/czm_modelViewRelativeToEye\s+\*\s+/g,""),t=t.replace(/czm_modelViewProjectionRelativeToEye/g,"czm_projection")):n?a+=`${A}
{
    return czm_translateRelativeToEye(${s}3DHigh, ${s}3DLow);
}

`:(r+=`in vec3 ${s}2DHigh;
in vec3 ${s}2DLow;
`,a+=`${A}
{
    vec4 p;
    if (czm_morphTime == 1.0)
    {
        p = czm_translateRelativeToEye(${s}3DHigh, ${s}3DLow);
    }
    else if (czm_morphTime == 0.0)
    {
        p = czm_translateRelativeToEye(${s}2DHigh.zxy, ${s}2DLow.zxy);
    }
    else
    {
        p = czm_columbusViewMorph(
                czm_translateRelativeToEye(${s}2DHigh.zxy, ${s}2DLow.zxy),
                czm_translateRelativeToEye(${s}3DHigh, ${s}3DLow),
                czm_morphTime);
    }
    return p;
}

`)}return[o,r,t,a].join(`
`)};zi._appendShowToShader=function(e,t){return c(e._batchTableAttributeIndices.show)?`${It.replaceMain(t,"czm_non_show_main")}
void main() 
{ 
    czm_non_show_main(); 
    gl_Position *= czm_batchTable_show(batchId); 
}`:t};zi._updateColorAttribute=function(e,t,n){if(!c(e._batchTableAttributeIndices.color)&&!c(e._batchTableAttributeIndices.depthFailColor)||t.search(/in\s+vec4\s+color;/g)===-1)return t;let i=t;return i=i.replace(/in\s+vec4\s+color;/g,""),n?i=i.replace(/(\b)color(\b)/g,"$1czm_batchTable_depthFailColor(batchId)$2"):i=i.replace(/(\b)color(\b)/g,"$1czm_batchTable_color(batchId)$2"),i};function w1(e){return`${It.replaceMain(e,"czm_non_pick_main")}
out vec4 v_pickColor; 
void main() 
{ 
    czm_non_pick_main(); 
    v_pickColor = czm_batchTable_pickColor(batchId); 
}`}function D1(e){return`in vec4 v_pickColor;
${e}`}zi._updatePickColorAttribute=function(e){let t=e.replace(/in\s+vec4\s+pickColor;/g,"");return t=t.replace(/(\b)pickColor(\b)/g,"$1czm_batchTable_pickColor(batchId)$2"),t};zi._appendOffsetToShader=function(e,t){if(!c(e._batchTableAttributeIndices.offset))return t;let n=`in float batchId;
`;n+="in float applyOffset;";let i=t.replace(/in\s+float\s+batchId;/g,n),o=`vec4 $1 = czm_computePosition();
`;return o+=`    if (czm_sceneMode == czm_sceneMode3D)
`,o+=`    {
`,o+="        $1 = $1 + vec4(czm_batchTable_offset(batchId) * applyOffset, 0.0);",o+=`    }
`,o+=`    else
`,o+=`    {
`,o+="        $1 = $1 + vec4(czm_batchTable_offset2D(batchId) * applyOffset, 0.0);",o+=`    }
`,i=i.replace(/vec4\s+([A-Za-z0-9_]+)\s+=\s+czm_computePosition\(\);/g,o),i};zi._appendDistanceDisplayConditionToShader=function(e,t,n){if(!c(e._batchTableAttributeIndices.distanceDisplayCondition))return t;let i=It.replaceMain(t,"czm_non_distanceDisplayCondition_main"),o=`void main() 
{ 
    czm_non_distanceDisplayCondition_main(); 
    vec2 distanceDisplayCondition = czm_batchTable_distanceDisplayCondition(batchId);
    vec3 boundingSphereCenter3DHigh = czm_batchTable_boundingSphereCenter3DHigh(batchId);
    vec3 boundingSphereCenter3DLow = czm_batchTable_boundingSphereCenter3DLow(batchId);
    float boundingSphereRadius = czm_batchTable_boundingSphereRadius(batchId);
`;return n?o+=`    vec4 centerRTE = czm_translateRelativeToEye(boundingSphereCenter3DHigh, boundingSphereCenter3DLow);
`:o+=`    vec3 boundingSphereCenter2DHigh = czm_batchTable_boundingSphereCenter2DHigh(batchId);
    vec3 boundingSphereCenter2DLow = czm_batchTable_boundingSphereCenter2DLow(batchId);
    vec4 centerRTE;
    if (czm_morphTime == 1.0)
    {
        centerRTE = czm_translateRelativeToEye(boundingSphereCenter3DHigh, boundingSphereCenter3DLow);
    }
    else if (czm_morphTime == 0.0)
    {
        centerRTE = czm_translateRelativeToEye(boundingSphereCenter2DHigh.zxy, boundingSphereCenter2DLow.zxy);
    }
    else
    {
        centerRTE = czm_columbusViewMorph(
                czm_translateRelativeToEye(boundingSphereCenter2DHigh.zxy, boundingSphereCenter2DLow.zxy),
                czm_translateRelativeToEye(boundingSphereCenter3DHigh, boundingSphereCenter3DLow),
                czm_morphTime);
    }
`,o+=`    float radiusSq = boundingSphereRadius * boundingSphereRadius; 
    float distanceSq; 
    if (czm_sceneMode == czm_sceneMode2D) 
    { 
        distanceSq = czm_eyeHeight2D.y - radiusSq; 
    } 
    else 
    { 
        distanceSq = dot(centerRTE.xyz, centerRTE.xyz) - radiusSq; 
    } 
    distanceSq = max(distanceSq, 0.0); 
    float nearSq = distanceDisplayCondition.x * distanceDisplayCondition.x; 
    float farSq = distanceDisplayCondition.y * distanceDisplayCondition.y; 
    float show = (distanceSq >= nearSq && distanceSq <= farSq) ? 1.0 : 0.0; 
    gl_Position *= show; 
}`,`${i}
${o}`};function Q1(e,t){if(!e.compressVertices)return t;let n=t.search(/in\s+vec3\s+normal;/g)!==-1,i=t.search(/in\s+vec2\s+st;/g)!==-1;if(!n&&!i)return t;let o=t.search(/in\s+vec3\s+tangent;/g)!==-1,r=t.search(/in\s+vec3\s+bitangent;/g)!==-1,a=i&&n?2:1;a+=o||r?1:0;let s=a>1?`vec${a}`:"float",A="compressedAttributes",l=`in ${s} ${A};`,f="",h="";if(i){f+=`vec2 st;
`;let g=a>1?`${A}.x`:A;h+=`    st = czm_decompressTextureCoordinates(${g});
`}n&&o&&r?(f+=`vec3 normal;
vec3 tangent;
vec3 bitangent;
`,h+=`    czm_octDecode(${A}.${i?"yz":"xy"}, normal, tangent, bitangent);
`):(n&&(f+=`vec3 normal;
`,h+=`    normal = czm_octDecode(${A}${a>1?`.${i?"y":"x"}`:""});
`),o&&(f+=`vec3 tangent;
`,h+=`    tangent = czm_octDecode(${A}.${i&&n?"z":"y"});
`),r&&(f+=`vec3 bitangent;
`,h+=`    bitangent = czm_octDecode(${A}.${i&&n?"z":"y"});
`));let m=t;m=m.replace(/in\s+vec3\s+normal;/g,""),m=m.replace(/in\s+vec2\s+st;/g,""),m=m.replace(/in\s+vec3\s+tangent;/g,""),m=m.replace(/in\s+vec3\s+bitangent;/g,""),m=It.replaceMain(m,"czm_non_compressed_main");let p=`void main() 
{ 
${h}    czm_non_compressed_main(); 
}`;return[l,f,m,p].join(`
`)}function sne(e){let t=It.replaceMain(e,"czm_non_depth_clamp_main");return t+=`void main() {
    czm_non_depth_clamp_main();
    gl_Position = czm_depthClamp(gl_Position);}
`,t}function cne(e){let t=It.replaceMain(e,"czm_non_depth_clamp_main");return t+=`void main() {
    czm_non_depth_clamp_main();
    #if defined(LOG_DEPTH)
        czm_writeLogDepth();
    #else
        czm_writeDepthClamp();
    #endif
}
`,t}function R1(e,t){let n=e.vertexAttributes}function Ane(e,t){return function(){return e[t]}}var VT=Math.max($t.hardwareConcurrency-1,1),hy,lne=new mo("combineGeometry");function fne(e,t){let n,i,o,r,a=e._instanceIds;if(e._state===Co.READY){n=Array.isArray(e.geometryInstances)?e.geometryInstances:[e.geometryInstances];let s=e._numberOfInstances=n.length,A=[],l=[];for(o=0;o<s;++o)i=n[o].geometry,a.push(n[o].id),l.push({moduleName:i._workerName,modulePath:i._workerPath,geometry:i});if(!c(hy))for(hy=new Array(VT),o=0;o<VT;o++)hy[o]=new mo("createGeometry");let f;for(l=b1(l,VT),o=0;o<l.length;o++){let h=0,m=l[o],p=m.length;for(r=0;r<p;++r)f=m[r],i=f.geometry,c(i.constructor.pack)&&(f.offset=h,h+=i.constructor.packedLength??i.packedLength);let g;if(h>0){let C=new Float64Array(h);for(g=[C.buffer],r=0;r<p;++r)f=m[r],i=f.geometry,c(i.constructor.pack)&&(i.constructor.pack(i,C,f.offset),f.geometry=C)}A.push(hy[o].scheduleTask({subTasks:l[o]},g))}e._state=Co.CREATING,Promise.all(A).then(function(h){e._createGeometryResults=h,e._state=Co.CREATED}).catch(function(h){cC(e,t,Co.FAILED,h)})}else if(e._state===Co.CREATED){let s=[];n=Array.isArray(e.geometryInstances)?e.geometryInstances:[e.geometryInstances];let A=t.scene3DOnly,l=t.mapProjection,f=lne.scheduleTask(dy.packCombineGeometryParameters({createGeometryResults:e._createGeometryResults,instances:n,ellipsoid:l.ellipsoid,projection:l,elementIndexUintSupported:t.context.elementIndexUint,scene3DOnly:A,vertexCacheOptimize:e.vertexCacheOptimize,compressVertices:e.compressVertices,modelMatrix:e.modelMatrix,createPickOffsets:e._createPickOffsets},s),s);e._createGeometryResults=void 0,e._state=Co.COMBINING,Promise.resolve(f).then(function(h){let m=dy.unpackCombineGeometryResults(h);e._geometries=m.geometries,e._attributeLocations=m.attributeLocations,e.modelMatrix=O.clone(m.modelMatrix,e.modelMatrix),e._pickOffsets=m.pickOffsets,e._offsetInstanceExtend=m.offsetInstanceExtend,e._instanceBoundingSpheres=m.boundingSpheres,e._instanceBoundingSpheresCV=m.boundingSpheresCV,c(e._geometries)&&e._geometries.length>0?(e._recomputeBoundingSpheres=!0,e._state=Co.COMBINED):cC(e,t,Co.FAILED,void 0)}).catch(function(h){cC(e,t,Co.FAILED,h)})}}function une(e,t){let n=Array.isArray(e.geometryInstances)?e.geometryInstances:[e.geometryInstances],i=e._numberOfInstances=n.length,o=new Array(i),r=e._instanceIds,a,s,A=0;for(s=0;s<i;s++){a=n[s];let m=a.geometry,p;c(m.attributes)&&c(m.primitiveType)?p=one(m):p=m.constructor.createGeometry(m),o[A++]=rne(a,p),r.push(a.id)}o.length=A;let l=t.scene3DOnly,f=t.mapProjection,h=dy.combineGeometry({instances:o,ellipsoid:f.ellipsoid,projection:f,elementIndexUintSupported:t.context.elementIndexUint,scene3DOnly:l,vertexCacheOptimize:e.vertexCacheOptimize,compressVertices:e.compressVertices,modelMatrix:e.modelMatrix,createPickOffsets:e._createPickOffsets});e._geometries=h.geometries,e._attributeLocations=h.attributeLocations,e.modelMatrix=O.clone(h.modelMatrix,e.modelMatrix),e._pickOffsets=h.pickOffsets,e._offsetInstanceExtend=h.offsetInstanceExtend,e._instanceBoundingSpheres=h.boundingSpheres,e._instanceBoundingSpheresCV=h.boundingSpheresCV,c(e._geometries)&&e._geometries.length>0?(e._recomputeBoundingSpheres=!0,e._state=Co.COMBINED):cC(e,t,Co.FAILED,void 0)}function dne(e,t){let n=e._batchTableAttributeIndices.offset;if(!e._recomputeBoundingSpheres||!c(n)){e._recomputeBoundingSpheres=!1;return}let i,o=e._offsetInstanceExtend,r=e._instanceBoundingSpheres,a=r.length,s=e._tempBoundingSpheres;if(!c(s)){for(s=new Array(a),i=0;i<a;i++)s[i]=new ee;e._tempBoundingSpheres=s}for(i=0;i<a;++i){let C=s[i],_=e._batchTable.getBatchedAttribute(i,n,new u);C=r[i].clone(C),G1(C,_,o[i])}let A=[],l=[],f=[];for(i=0;i<a;++i){let C=s[i];C.center.x-C.radius>0||ee.intersectPlane(C,Ft.ORIGIN_ZX_PLANE)!==vt.INTERSECTING?A.push(C):(l.push(C),f.push(C))}let h=A[0],m=f[0],p=l[0];for(i=1;i<A.length;i++)h=ee.union(h,A[i]);for(i=1;i<f.length;i++)m=ee.union(m,f[i]);for(i=1;i<l.length;i++)p=ee.union(p,l[i]);let g=[];for(c(h)&&g.push(h),c(m)&&g.push(m),c(p)&&g.push(p),i=0;i<g.length;i++){let C=g[i].clone(e._boundingSpheres[i]);e._boundingSpheres[i]=C,e._boundingSphereCV[i]=ee.projectTo2D(C,t.mapProjection,e._boundingSphereCV[i])}zi._updateBoundingVolumes(e,t,e.modelMatrix,!0),e._recomputeBoundingSpheres=!1}var v1=new xn,F1=new ae,k1=new u,U1=new ee;function hne(e,t){if(!c(e._batchTableAttributeIndices.distanceDisplayCondition)||e._batchTableBoundingSpheresUpdated)return;let i=e._batchTableBoundingSphereAttributeIndices,o=i.center3DHigh,r=i.center3DLow,a=i.center2DHigh,s=i.center2DLow,A=i.radius,l=t.mapProjection,f=l.ellipsoid,h=e._batchTable,m=e._instanceBoundingSpheres,p=m.length;for(let g=0;g<p;++g){let C=m[g];if(!c(C))continue;let _=e.modelMatrix;c(_)&&(C=ee.transform(C,_,U1));let E=C.center,I=C.radius,y=xn.fromCartesian(E,v1);if(h.setBatchedAttribute(g,o,y.high),h.setBatchedAttribute(g,r,y.low),!t.scene3DOnly){let b=f.cartesianToCartographic(E,F1),x=l.project(b,k1);y=xn.fromCartesian(x,v1),h.setBatchedAttribute(g,a,y.high),h.setBatchedAttribute(g,s,y.low)}h.setBatchedAttribute(g,A,I)}e._batchTableBoundingSpheresUpdated=!0}var jT=new u,mne=new u;function P1(e,t){if(!c(e._batchTableAttributeIndices.offset)||e._batchTableOffsetsUpdated||t.scene3DOnly)return;let i=e._batchTableOffsetAttribute2DIndex,o=t.mapProjection,r=o.ellipsoid,a=e._batchTable,s=e._instanceBoundingSpheres,A=s.length;for(let l=0;l<A;++l){let f=s[l];if(!c(f))continue;let h=a.getBatchedAttribute(l,e._batchTableAttributeIndices.offset);if(u.equals(h,u.ZERO)){a.setBatchedAttribute(l,i,u.ZERO);continue}let m=e.modelMatrix;c(m)&&(f=ee.transform(f,m,U1));let p=f.center;p=r.scaleToGeodeticSurface(p,mne);let g=r.cartesianToCartographic(p,F1),C=o.project(g,k1),_=u.add(h,p,jT);g=r.cartesianToCartographic(_,g);let E=o.project(g,jT),I=u.subtract(E,C,jT),y=I.x;I.x=I.z,I.z=I.y,I.y=y,a.setBatchedAttribute(l,i,I)}e._batchTableOffsetsUpdated=!0}function pne(e,t){let n=e._attributeLocations,i=e._geometries,o=t.scene3DOnly,r=t.context,a=[],s=i.length;for(let A=0;A<s;++A){let l=i[A];if(a.push(go.fromGeometry({context:r,geometry:l,attributeLocations:n,bufferUsage:Me.STATIC_DRAW,interleave:e._interleave})),c(e._createBoundingVolumeFunction))e._createBoundingVolumeFunction(t,l);else if(e._boundingSpheres.push(ee.clone(l.boundingSphere)),e._boundingSphereWC.push(new ee),!o){let f=l.boundingSphereCV.center,h=f.x,m=f.y,p=f.z;f.x=p,f.y=h,f.z=m,e._boundingSphereCV.push(ee.clone(l.boundingSphereCV)),e._boundingSphere2D.push(new ee),e._boundingSphereMorph.push(new ee)}}e._va=a,e._primitiveType=i[0].primitiveType,e.releaseGeometryInstances&&(e.geometryInstances=void 0),e._geometries=void 0,cC(e,t,Co.COMPLETE,void 0)}function gne(e,t,n,i){let o=n.getRenderState(),r;i?(r=Ne(o,!1),r.cull={enabled:!0,face:No.BACK},e._frontFaceRS=ut.fromCache(r),r.cull.face=No.FRONT,e._backFaceRS=ut.fromCache(r)):(e._frontFaceRS=ut.fromCache(o),e._backFaceRS=e._frontFaceRS),r=Ne(o,!1),c(e._depthFailAppearance)&&(r.depthTest.enabled=!1),c(e._depthFailAppearance)&&(o=e._depthFailAppearance.getRenderState(),r=Ne(o,!1),r.depthTest.func=Ms.GREATER,i?(r.cull={enabled:!0,face:No.BACK},e._frontFaceDepthFailRS=ut.fromCache(r),r.cull.face=No.FRONT,e._backFaceDepthFailRS=ut.fromCache(r)):(e._frontFaceDepthFailRS=ut.fromCache(r),e._backFaceDepthFailRS=e._frontFaceRS))}function Cne(e,t,n){let i=t.context,o=e._attributeLocations,r=e._batchTable.getVertexShaderCallback()(n.vertexShaderSource);r=zi._appendOffsetToShader(e,r),r=zi._appendShowToShader(e,r),r=zi._appendDistanceDisplayConditionToShader(e,r,t.scene3DOnly),r=w1(r),r=zi._updateColorAttribute(e,r,!1),r=Q1(e,r),r=zi._modifyShaderPosition(e,r,t.scene3DOnly);let a=n.getFragmentShaderSource();a=D1(a),e._sp=Bn.replaceCache({context:i,shaderProgram:e._sp,vertexShaderSource:r,fragmentShaderSource:a,attributeLocations:o}),R1(e._sp,o),c(e._depthFailAppearance)&&(r=e._batchTable.getVertexShaderCallback()(e._depthFailAppearance.vertexShaderSource),r=zi._appendShowToShader(e,r),r=zi._appendDistanceDisplayConditionToShader(e,r,t.scene3DOnly),r=w1(r),r=zi._updateColorAttribute(e,r,!0),r=Q1(e,r),r=zi._modifyShaderPosition(e,r,t.scene3DOnly),r=sne(r),a=e._depthFailAppearance.getFragmentShaderSource(),a=D1(a),a=cne(a),e._spDepthFail=Bn.replaceCache({context:i,shaderProgram:e._spDepthFail,vertexShaderSource:r,fragmentShaderSource:a,attributeLocations:o}),R1(e._spDepthFail,o))}var sC=new O,M1=new u;function O1(e,t,n,i){let o=c(n)?n._uniforms:void 0,r={},a=t.uniforms;if(c(a))for(let A in a)a.hasOwnProperty(A)&&(r[A]=Ane(a,A));let s=Et(r,o);return s=e._batchTable.getUniformMapCallback()(s),c(e.rtcCenter)&&(s.u_modifiedModelView=function(){let A=i.context.uniformState.view;return O.multiply(A,e._modelMatrix,sC),O.multiplyByPoint(sC,e.rtcCenter,M1),O.setTranslation(sC,M1,sC),sC}),s}function _ne(e,t,n,i,o,r,a,s){let A=O1(e,t,n,s),l;c(e._depthFailAppearance)&&(l=O1(e,e._depthFailAppearance,e._depthFailAppearance.material,s));let f=i?Ye.TRANSLUCENT:Ye.OPAQUE,h=o?2:1;h*=c(e._depthFailAppearance)?2:1,r.length=e._va.length*h;let m=r.length,p=0;for(let g=0;g<m;++g){let C;o&&(C=r[g],c(C)||(C=r[g]=new mt({owner:e,primitiveType:e._primitiveType})),C.vertexArray=e._va[p],C.renderState=e._backFaceRS,C.shaderProgram=e._sp,C.uniformMap=A,C.pass=f,++g),C=r[g],c(C)||(C=r[g]=new mt({owner:e,primitiveType:e._primitiveType})),C.vertexArray=e._va[p],C.renderState=e._frontFaceRS,C.shaderProgram=e._sp,C.uniformMap=A,C.pass=f,c(e._depthFailAppearance)&&(o&&(++g,C=r[g],c(C)||(C=r[g]=new mt({owner:e,primitiveType:e._primitiveType})),C.vertexArray=e._va[p],C.renderState=e._backFaceDepthFailRS,C.shaderProgram=e._spDepthFail,C.uniformMap=l,C.pass=f),++g,C=r[g],c(C)||(C=r[g]=new mt({owner:e,primitiveType:e._primitiveType})),C.vertexArray=e._va[p],C.renderState=e._frontFaceDepthFailRS,C.shaderProgram=e._spDepthFail,C.uniformMap=l,C.pass=f),++p}}zi._updateBoundingVolumes=function(e,t,n,i){let o,r,a;if(i||!O.equals(n,e._modelMatrix))for(O.clone(n,e._modelMatrix),r=e._boundingSpheres.length,o=0;o<r;++o)a=e._boundingSpheres[o],c(a)&&(e._boundingSphereWC[o]=ee.transform(a,n,e._boundingSphereWC[o]),t.scene3DOnly||(e._boundingSphere2D[o]=ee.clone(e._boundingSphereCV[o],e._boundingSphere2D[o]),e._boundingSphereMorph[o]=ee.union(e._boundingSphereWC[o],e._boundingSphereCV[o])));let s=e.appearance.pixelSize;if(c(s))for(r=e._boundingSpheres.length,o=0;o<r;++o){a=e._boundingSpheres[o];let A=e._boundingSphereWC[o],f=t.camera.getPixelSize(a,t.context.drawingBufferWidth,t.context.drawingBufferHeight)*s;A.radius=a.radius+f}};function Ene(e,t,n,i,o,r,a,s){zi._updateBoundingVolumes(e,t,o);let A;t.mode===Te.SCENE3D?A=e._boundingSphereWC:t.mode===Te.COLUMBUS_VIEW?A=e._boundingSphereCV:t.mode===Te.SCENE2D&&c(e._boundingSphere2D)?A=e._boundingSphere2D:c(e._boundingSphereMorph)&&(A=e._boundingSphereMorph);let l=t.commandList,f=t.passes;if(f.render||f.pick){let h=e.allowPicking,m=cn.castShadows(e.shadows),p=cn.receiveShadows(e.shadows),g=n.length,C=s?2:1;C*=c(e._depthFailAppearance)?2:1;for(let _=0;_<g;++_){let E=Math.floor(_/C),I=n[_];I.modelMatrix=o,I.boundingVolume=A[E],I.cull=r,I.debugShowBoundingVolume=a,I.castShadows=m,I.receiveShadows=p,h?I.pickId="v_pickColor":I.pickId=void 0,l.push(I)}}}zi.prototype.update=function(e){if(!c(this.geometryInstances)&&this._va.length===0||c(this.geometryInstances)&&Array.isArray(this.geometryInstances)&&this.geometryInstances.length===0||!c(this.appearance)||e.mode!==Te.SCENE3D&&e.scene3DOnly||!e.passes.render&&!e.passes.pick)return;if(c(this._error))throw this._error;if(this._state===Co.FAILED)return;let t=e.context;if(c(this._batchTable)||nne(this,t),this._batchTable.attributes.length>0){if(pn.maximumVertexTextureImageUnits===0)throw new oe("Vertex texture fetch support is required to render primitives with per-instance attributes. The maximum number of vertex texture image units must be greater than zero.");this._batchTable.update(e)}if(this._state!==Co.COMPLETE&&this._state!==Co.COMBINED&&(this.asynchronous?fne(this,e):une(this,e)),this._state===Co.COMBINED&&(hne(this,e),P1(this,e),pne(this,e)),!this.show||this._state!==Co.COMPLETE)return;this._batchTableOffsetsUpdated||P1(this,e),this._recomputeBoundingSpheres&&dne(this,e);let n=this.appearance,i=n.material,o=!1,r=!1;this._appearance!==n?(this._appearance=n,this._material=i,o=!0,r=!0):this._material!==i&&(this._material=i,r=!0);let a=this.depthFailAppearance,s=c(a)?a.material:void 0;this._depthFailAppearance!==a?(this._depthFailAppearance=a,this._depthFailMaterial=s,o=!0,r=!0):this._depthFailMaterial!==s&&(this._depthFailMaterial=s,r=!0);let A=this._appearance.isTranslucent();this._translucent!==A&&(this._translucent=A,o=!0),c(this._material)&&this._material.update(t);let l=n.closed&&A;o&&(this._createRenderStatesFunction??gne)(this,t,n,l),r&&(this._createShaderProgramFunction??Cne)(this,e,n),(o||r)&&(this._createCommandsFunction??_ne)(this,n,i,A,l,this._colorCommands,this._pickCommands,e),(this._updateAndQueueCommandsFunction??Ene)(this,e,this._colorCommands,this._pickCommands,this.modelMatrix,this.cull,this.debugShowBoundingVolume,l)};var Ine=new ee,yne=new ee;function G1(e,t,n){if(n===xt.TOP){let i=ee.clone(e,Ine),o=ee.clone(e,yne);o.center=u.add(o.center,t,o.center),e=ee.union(i,o,e)}else n===xt.ALL&&(e.center=u.add(e.center,t,e.center));return e}function bne(e,t,n){return function(){let i=e.getBatchedAttribute(t,n),o=e.attributes[n],r=o.componentsPerAttribute,a=N.createTypedArray(o.componentDatatype,r);return c(i.constructor.pack)?i.constructor.pack(i,a,0):a[0]=i,a}}function Bne(e,t,n,i,o){return function(r){let a=N1(r);e.setBatchedAttribute(t,n,a),o==="offset"&&(i._recomputeBoundingSpheres=!0,i._batchTableOffsetsUpdated=!1)}}var xne=new u;function Tne(e,t,n){t.boundingSphere={get:function(){let i=e._instanceBoundingSpheres[n];if(c(i)){i=i.clone();let o=e.modelMatrix,r=t.offset;c(r)&&G1(i,u.fromArray(r.get(),0,xne),e._offsetInstanceExtend[n]),c(o)&&(i=ee.transform(i,o))}return i}},t.boundingSphereCV={get:function(){return e._instanceBoundingSpheresCV[n]}}}function Sne(e,t,n){t.pickId={get:function(){return e._pickIds[n]}}}zi.prototype.getGeometryInstanceAttributes=function(e){let t=this._perInstanceAttributeCache.get(e);if(c(t))return t;let n=-1,i=this._lastPerInstanceAttributeIndex,o=this._instanceIds,r=o.length;for(let l=0;l<r;++l){let f=(i+l)%r;if(e===o[f]){n=f;break}}if(n===-1)return;let a=this._batchTable,s=this._batchTableAttributeIndices;t={};let A={};for(let l in s)if(s.hasOwnProperty(l)){let f=s[l];A[l]={get:bne(a,n,f),set:Bne(a,n,f,this,l)}}return Tne(this,A,n),Sne(this,A,n),Object.defineProperties(t,A),this._lastPerInstanceAttributeIndex=n,this._perInstanceAttributeCache.set(e,t),t};zi.prototype.isDestroyed=function(){return!1};zi.prototype.destroy=function(){let e,t;this._sp=this._sp&&this._sp.destroy(),this._spDepthFail=this._spDepthFail&&this._spDepthFail.destroy();let n=this._va;for(e=n.length,t=0;t<e;++t)n[t].destroy();this._va=void 0;let i=this._pickIds;for(e=i.length,t=0;t<e;++t)i[t].destroy();return this._pickIds=void 0,this._batchTable=this._batchTable&&this._batchTable.destroy(),this._instanceIds=void 0,this._perInstanceAttributeCache=void 0,this._attributeLocations=void 0,pe(this)};function cC(e,t,n,i){e._error=i,e._state=n,t.afterRender.push(function(){e._ready=e._state===Co.COMPLETE||e._state===Co.FAILED})}var wn=zi;function wne(e){e=e??k.EMPTY_OBJECT,this.componentDatatype=e.componentDatatype,this.componentsPerAttribute=e.componentsPerAttribute,this.normalize=e.normalize??!1,this.value=e.value}var Za=wne;var YT=`#ifdef TEXTURE_COORDINATES
#ifdef SPHERICAL
in vec4 v_sphericalExtents;
#else // SPHERICAL
in vec2 v_inversePlaneExtents;
in vec4 v_westPlane;
in vec4 v_southPlane;
#endif // SPHERICAL
in vec3 v_uvMinAndSphericalLongitudeRotation;
in vec3 v_uMaxAndInverseDistance;
in vec3 v_vMaxAndInverseDistance;
#endif // TEXTURE_COORDINATES

#ifdef PER_INSTANCE_COLOR
in vec4 v_color;
#endif

#ifdef NORMAL_EC
vec3 getEyeCoordinate3FromWindowCoordinate(vec2 fragCoord, float logDepthOrDepth) {
    vec4 eyeCoordinate = czm_windowToEyeCoordinates(fragCoord, logDepthOrDepth);
    return eyeCoordinate.xyz / eyeCoordinate.w;
}

vec3 vectorFromOffset(vec4 eyeCoordinate, vec2 positiveOffset) {
    vec2 glFragCoordXY = gl_FragCoord.xy;
    // Sample depths at both offset and negative offset
    float upOrRightLogDepth = czm_unpackDepth(texture(czm_globeDepthTexture, (glFragCoordXY + positiveOffset) / czm_viewport.zw));
    float downOrLeftLogDepth = czm_unpackDepth(texture(czm_globeDepthTexture, (glFragCoordXY - positiveOffset) / czm_viewport.zw));
    // Explicitly evaluate both paths
    // Necessary for multifrustum and for edges of the screen
    bvec2 upOrRightInBounds = lessThan(glFragCoordXY + positiveOffset, czm_viewport.zw);
    float useUpOrRight = float(upOrRightLogDepth > 0.0 && upOrRightInBounds.x && upOrRightInBounds.y);
    float useDownOrLeft = float(useUpOrRight == 0.0);
    vec3 upOrRightEC = getEyeCoordinate3FromWindowCoordinate(glFragCoordXY + positiveOffset, upOrRightLogDepth);
    vec3 downOrLeftEC = getEyeCoordinate3FromWindowCoordinate(glFragCoordXY - positiveOffset, downOrLeftLogDepth);
    return (upOrRightEC - (eyeCoordinate.xyz / eyeCoordinate.w)) * useUpOrRight + ((eyeCoordinate.xyz / eyeCoordinate.w) - downOrLeftEC) * useDownOrLeft;
}
#endif // NORMAL_EC

void main(void)
{
#ifdef REQUIRES_EC
    float logDepthOrDepth = czm_unpackDepth(texture(czm_globeDepthTexture, gl_FragCoord.xy / czm_viewport.zw));
    vec4 eyeCoordinate = czm_windowToEyeCoordinates(gl_FragCoord.xy, logDepthOrDepth);
#endif

#ifdef REQUIRES_WC
    vec4 worldCoordinate4 = czm_inverseView * eyeCoordinate;
    vec3 worldCoordinate = worldCoordinate4.xyz / worldCoordinate4.w;
#endif

#ifdef TEXTURE_COORDINATES
    vec2 uv;
#ifdef SPHERICAL
    // Treat world coords as a sphere normal for spherical coordinates
    vec2 sphericalLatLong = czm_approximateSphericalCoordinates(worldCoordinate);
    sphericalLatLong.y += v_uvMinAndSphericalLongitudeRotation.z;
    sphericalLatLong.y = czm_branchFreeTernary(sphericalLatLong.y < czm_pi, sphericalLatLong.y, sphericalLatLong.y - czm_twoPi);
    uv.x = (sphericalLatLong.y - v_sphericalExtents.y) * v_sphericalExtents.w;
    uv.y = (sphericalLatLong.x - v_sphericalExtents.x) * v_sphericalExtents.z;
#else // SPHERICAL
    // Unpack planes and transform to eye space
    uv.x = czm_planeDistance(v_westPlane, eyeCoordinate.xyz / eyeCoordinate.w) * v_inversePlaneExtents.x;
    uv.y = czm_planeDistance(v_southPlane, eyeCoordinate.xyz / eyeCoordinate.w) * v_inversePlaneExtents.y;
#endif // SPHERICAL
#endif // TEXTURE_COORDINATES

#ifdef PICK
#ifdef CULL_FRAGMENTS
    // When classifying translucent geometry, logDepthOrDepth == 0.0
    // indicates a region that should not be classified, possibly due to there
    // being opaque pixels there in another buffer.
    // Check for logDepthOrDepth != 0.0 to make sure this should be classified.
    if (0.0 <= uv.x && uv.x <= 1.0 && 0.0 <= uv.y && uv.y <= 1.0 || logDepthOrDepth != 0.0) {
        out_FragColor.a = 1.0; // 0.0 alpha leads to discard from ShaderSource.createPickFragmentShaderSource
        czm_writeDepthClamp();
    }
#else // CULL_FRAGMENTS
        out_FragColor.a = 1.0;
#endif // CULL_FRAGMENTS
#else // PICK

#ifdef CULL_FRAGMENTS
    // When classifying translucent geometry, logDepthOrDepth == 0.0
    // indicates a region that should not be classified, possibly due to there
    // being opaque pixels there in another buffer.
    if (uv.x <= 0.0 || 1.0 <= uv.x || uv.y <= 0.0 || 1.0 <= uv.y || logDepthOrDepth == 0.0) {
        discard;
    }
#endif

#ifdef NORMAL_EC
    // Compute normal by sampling adjacent pixels in 2x2 block in screen space
    vec3 downUp = vectorFromOffset(eyeCoordinate, vec2(0.0, 1.0));
    vec3 leftRight = vectorFromOffset(eyeCoordinate, vec2(1.0, 0.0));
    vec3 normalEC = normalize(cross(leftRight, downUp));
#endif


#ifdef PER_INSTANCE_COLOR

    vec4 color = czm_gammaCorrect(v_color);
#ifdef FLAT
    out_FragColor = color;
#else // FLAT
    czm_materialInput materialInput;
    materialInput.normalEC = normalEC;
    materialInput.positionToEyeEC = -eyeCoordinate.xyz;
    czm_material material = czm_getDefaultMaterial(materialInput);
    material.diffuse = color.rgb;
    material.alpha = color.a;

    out_FragColor = czm_phong(normalize(-eyeCoordinate.xyz), material, czm_lightDirectionEC);
#endif // FLAT

    // Premultiply alpha. Required for classification primitives on translucent globe.
    out_FragColor.rgb *= out_FragColor.a;

#else // PER_INSTANCE_COLOR

    // Material support.
    // USES_ is distinct from REQUIRES_, because some things are dependencies of each other or
    // dependencies for culling but might not actually be used by the material.

    czm_materialInput materialInput;

#ifdef USES_NORMAL_EC
    materialInput.normalEC = normalEC;
#endif

#ifdef USES_POSITION_TO_EYE_EC
    materialInput.positionToEyeEC = -eyeCoordinate.xyz;
#endif

#ifdef USES_TANGENT_TO_EYE
    materialInput.tangentToEyeMatrix = czm_eastNorthUpToEyeCoordinates(worldCoordinate, normalEC);
#endif

#ifdef USES_ST
    // Remap texture coordinates from computed (approximately aligned with cartographic space) to the desired
    // texture coordinate system, which typically forms a tight oriented bounding box around the geometry.
    // Shader is provided a set of reference points for remapping.
    materialInput.st.x = czm_lineDistance(v_uvMinAndSphericalLongitudeRotation.xy, v_uMaxAndInverseDistance.xy, uv) * v_uMaxAndInverseDistance.z;
    materialInput.st.y = czm_lineDistance(v_uvMinAndSphericalLongitudeRotation.xy, v_vMaxAndInverseDistance.xy, uv) * v_vMaxAndInverseDistance.z;
#endif

    czm_material material = czm_getMaterial(materialInput);

#ifdef FLAT
    out_FragColor = vec4(material.diffuse + material.emission, material.alpha);
#else // FLAT
    out_FragColor = czm_phong(normalize(-eyeCoordinate.xyz), material, czm_lightDirectionEC);
#endif // FLAT

    // Premultiply alpha. Required for classification primitives on translucent globe.
    out_FragColor.rgb *= out_FragColor.a;

#endif // PER_INSTANCE_COLOR
    czm_writeDepthClamp();
#endif // PICK
}
`;function Os(e,t,n){this._projectionExtentDefines={eastMostYhighDefine:"",eastMostYlowDefine:"",westMostYhighDefine:"",westMostYlowDefine:""};let i=new qT;i.requiresTextureCoordinates=e,i.requiresEC=!n.flat;let o=new qT;if(o.requiresTextureCoordinates=e,n instanceof Vt)i.requiresNormalEC=!n.flat;else{let r=`${n.material.shaderSource}
${n.fragmentShaderSource}`;i.normalEC=r.indexOf("materialInput.normalEC")!==-1||r.indexOf("czm_getDefaultMaterial")!==-1,i.positionToEyeEC=r.indexOf("materialInput.positionToEyeEC")!==-1,i.tangentToEyeMatrix=r.indexOf("materialInput.tangentToEyeMatrix")!==-1,i.st=r.indexOf("materialInput.st")!==-1}this._colorShaderDependencies=i,this._pickShaderDependencies=o,this._appearance=n,this._extentsCulling=e,this._planarExtents=t}Os.prototype.createFragmentShader=function(e){let t=this._appearance,n=this._colorShaderDependencies,i=[];!e&&!this._planarExtents&&i.push("SPHERICAL"),n.requiresEC&&i.push("REQUIRES_EC"),n.requiresWC&&i.push("REQUIRES_WC"),n.requiresTextureCoordinates&&i.push("TEXTURE_COORDINATES"),this._extentsCulling&&i.push("CULL_FRAGMENTS"),n.requiresNormalEC&&i.push("NORMAL_EC"),t instanceof Vt&&i.push("PER_INSTANCE_COLOR"),n.normalEC&&i.push("USES_NORMAL_EC"),n.positionToEyeEC&&i.push("USES_POSITION_TO_EYE_EC"),n.tangentToEyeMatrix&&i.push("USES_TANGENT_TO_EYE"),n.st&&i.push("USES_ST"),t.flat&&i.push("FLAT");let o="";return t instanceof Vt||(o=t.material.shaderSource),new It({defines:i,sources:[o,YT]})};Os.prototype.createPickFragmentShader=function(e){let t=this._pickShaderDependencies,n=["PICK"];return!e&&!this._planarExtents&&n.push("SPHERICAL"),t.requiresEC&&n.push("REQUIRES_EC"),t.requiresWC&&n.push("REQUIRES_WC"),t.requiresTextureCoordinates&&n.push("TEXTURE_COORDINATES"),this._extentsCulling&&n.push("CULL_FRAGMENTS"),new It({defines:n,sources:[YT],pickColorQualifier:"in"})};Os.prototype.createVertexShader=function(e,t,n,i){return J1(this._colorShaderDependencies,this._planarExtents,n,e,t,this._appearance,i,this._projectionExtentDefines)};Os.prototype.createPickVertexShader=function(e,t,n,i){return J1(this._pickShaderDependencies,this._planarExtents,n,e,t,void 0,i,this._projectionExtentDefines)};var z1=new u,H1=new ae,V1={high:0,low:0};function J1(e,t,n,i,o,r,a,s){let A=i.slice();if(s.eastMostYhighDefine===""){let l=H1;l.longitude=w.PI,l.latitude=0,l.height=0;let f=a.project(l,z1),h=xn.encode(f.x,V1);s.eastMostYhighDefine=`EAST_MOST_X_HIGH ${h.high.toFixed(`${h.high}`.length+1)}`,s.eastMostYlowDefine=`EAST_MOST_X_LOW ${h.low.toFixed(`${h.low}`.length+1)}`;let m=H1;m.longitude=-w.PI,m.latitude=0,m.height=0;let p=a.project(m,z1);h=xn.encode(p.x,V1),s.westMostYhighDefine=`WEST_MOST_X_HIGH ${h.high.toFixed(`${h.high}`.length+1)}`,s.westMostYlowDefine=`WEST_MOST_X_LOW ${h.low.toFixed(`${h.low}`.length+1)}`}return n&&(A.push(s.eastMostYhighDefine),A.push(s.eastMostYlowDefine),A.push(s.westMostYhighDefine),A.push(s.westMostYlowDefine)),c(r)&&r instanceof Vt&&A.push("PER_INSTANCE_COLOR"),e.requiresTextureCoordinates&&(A.push("TEXTURE_COORDINATES"),t||n||A.push("SPHERICAL"),n&&A.push("COLUMBUS_VIEW_2D")),new It({defines:A,sources:[o]})}function qT(){this._requiresEC=!1,this._requiresWC=!1,this._requiresNormalEC=!1,this._requiresTextureCoordinates=!1,this._usesNormalEC=!1,this._usesPositionToEyeEC=!1,this._usesTangentToEyeMat=!1,this._usesSt=!1}Object.defineProperties(qT.prototype,{requiresEC:{get:function(){return this._requiresEC},set:function(e){this._requiresEC=e||this._requiresEC}},requiresWC:{get:function(){return this._requiresWC},set:function(e){this._requiresWC=e||this._requiresWC,this.requiresEC=this._requiresWC}},requiresNormalEC:{get:function(){return this._requiresNormalEC},set:function(e){this._requiresNormalEC=e||this._requiresNormalEC,this.requiresEC=this._requiresNormalEC}},requiresTextureCoordinates:{get:function(){return this._requiresTextureCoordinates},set:function(e){this._requiresTextureCoordinates=e||this._requiresTextureCoordinates,this.requiresWC=this._requiresTextureCoordinates}},normalEC:{set:function(e){this.requiresNormalEC=e,this._usesNormalEC=e},get:function(){return this._usesNormalEC}},tangentToEyeMatrix:{set:function(e){this.requiresWC=e,this.requiresNormalEC=e,this._usesTangentToEyeMat=e},get:function(){return this._usesTangentToEyeMat}},positionToEyeEC:{set:function(e){this.requiresEC=e,this._usesPositionToEyeEC=e},get:function(){return this._usesPositionToEyeEC}},st:{set:function(e){this.requiresTextureCoordinates=e,this._usesSt=e},get:function(){return this._usesSt}}});function j1(e,t,n){return Math.abs((t.y-e.y)*n.x-(t.x-e.x)*n.y+t.x*e.y-t.y*e.x)/U.distance(t,e)}var Dne=[new U,new U,new U,new U];function K1(e,t){let n=Dne,i=U.unpack(t,0,n[0]),o=U.unpack(t,2,n[1]),r=U.unpack(t,4,n[2]);e.uMaxVmax=new Za({componentDatatype:N.FLOAT,componentsPerAttribute:4,normalize:!1,value:[o.x,o.y,r.x,r.y]});let a=1/j1(i,o,r),s=1/j1(i,r,o);e.uvMinAndExtents=new Za({componentDatatype:N.FLOAT,componentsPerAttribute:4,normalize:!1,value:[i.x,i.y,a,s]})}var X1=new ae,Z1=new u,Qne=new u,Rne=new u,my={high:0,low:0};function $1(e,t,n){let i=X1;i.height=0,i.longitude=e.west,i.latitude=e.south;let o=t.project(i,Z1);i.latitude=e.north;let r=t.project(i,Qne);i.longitude=e.east,i.latitude=e.south;let a=t.project(i,Rne),s=[0,0,0,0],A=[0,0,0,0],l=xn.encode(o.x,my);s[0]=l.high,A[0]=l.low,l=xn.encode(o.y,my),s[1]=l.high,A[1]=l.low,l=xn.encode(r.y,my),s[2]=l.high,A[2]=l.low,l=xn.encode(a.x,my),s[3]=l.high,A[3]=l.low,n.planes2D_HIGH=new Za({componentDatatype:N.FLOAT,componentsPerAttribute:4,normalize:!1,value:s}),n.planes2D_LOW=new Za({componentDatatype:N.FLOAT,componentsPerAttribute:4,normalize:!1,value:A})}var vne=new O,Pne=new O,Y1=new u,Mne=new ae,One=[new ae,new ae,new ae,new ae,new ae,new ae,new ae,new ae];function Lne(e,t,n,i,o,r){let a=ce.center(e,Mne);a.height=n;let s=ae.toCartesian(a,t,Y1),A=Rn.eastNorthUpToFixedFrame(s,t,vne),l=O.inverse(A,Pne),f=e.west,h=e.east,m=e.north,p=e.south,g=One;g[0].latitude=p,g[0].longitude=f,g[1].latitude=m,g[1].longitude=f,g[2].latitude=m,g[2].longitude=h,g[3].latitude=p,g[3].longitude=h;let C=(f+h)*.5,_=(m+p)*.5;g[4].latitude=p,g[4].longitude=C,g[5].latitude=m,g[5].longitude=C,g[6].latitude=_,g[6].longitude=f,g[7].latitude=_,g[7].longitude=h;let E=Number.POSITIVE_INFINITY,I=Number.NEGATIVE_INFINITY,y=Number.POSITIVE_INFINITY,b=Number.NEGATIVE_INFINITY;for(let D=0;D<8;D++){g[D].height=n;let Q=ae.toCartesian(g[D],t,Y1);O.multiplyByPoint(l,Q,Q),Q.z=0,E=Math.min(E,Q.x),I=Math.max(I,Q.x),y=Math.min(y,Q.y),b=Math.max(b,Q.y)}let x=i;x.x=E,x.y=y,x.z=0,O.multiplyByPoint(A,x,x);let S=o;S.x=I,S.y=y,S.z=0,O.multiplyByPoint(A,S,S),u.subtract(S,x,o);let P=r;P.x=E,P.y=b,P.z=0,O.multiplyByPoint(A,P,P),u.subtract(P,x,r)}var Nne=new u,Fne=new u,kne=new xn;Os.getPlanarTextureCoordinateAttributes=function(e,t,n,i,o){let r=Z1,a=Nne,s=Fne;Lne(e,n,o??0,r,a,s);let A={};K1(A,t);let l=xn.fromCartesian(r,kne);return A.southWest_HIGH=new Za({componentDatatype:N.FLOAT,componentsPerAttribute:3,normalize:!1,value:u.pack(l.high,[0,0,0])}),A.southWest_LOW=new Za({componentDatatype:N.FLOAT,componentsPerAttribute:3,normalize:!1,value:u.pack(l.low,[0,0,0])}),A.eastward=new Za({componentDatatype:N.FLOAT,componentsPerAttribute:3,normalize:!1,value:u.pack(a,[0,0,0])}),A.northward=new Za({componentDatatype:N.FLOAT,componentsPerAttribute:3,normalize:!1,value:u.pack(s,[0,0,0])}),$1(e,i,A),A};var Une=new u;function q1(e,t,n,i){let o=X1;o.latitude=e,o.longitude=t,o.height=0;let r=ae.toCartesian(o,n,Une),a=Math.sqrt(r.x*r.x+r.y*r.y),s=w.fastApproximateAtan2(a,r.z),A=w.fastApproximateAtan2(r.x,r.y);return i.x=s,i.y=A,i}var W1=new U;Os.getSphericalExtentGeometryInstanceAttributes=function(e,t,n,i){let o=q1(e.south,e.west,n,W1),r=o.x,a=o.y,s=q1(e.north,e.east,n,W1),A=s.x,l=s.y,f=0;a>l&&(f=w.PI-a,a=-w.PI,l+=f),r-=w.EPSILON5,a-=w.EPSILON5,A+=w.EPSILON5,l+=w.EPSILON5;let h=1/(l-a),m=1/(A-r),p={sphericalExtents:new Za({componentDatatype:N.FLOAT,componentsPerAttribute:4,normalize:!1,value:[r,a,m,h]}),longitudeRotation:new Za({componentDatatype:N.FLOAT,componentsPerAttribute:1,normalize:!1,value:[f]})};return K1(p,t),$1(e,i,p),p};Os.hasAttributesForTextureCoordinatePlanes=function(e){return c(e.southWest_HIGH)&&c(e.southWest_LOW)&&c(e.northward)&&c(e.eastward)&&c(e.planes2D_HIGH)&&c(e.planes2D_LOW)&&c(e.uMaxVmax)&&c(e.uvMinAndExtents)};Os.hasAttributesForSphericalExtents=function(e){return c(e.sphericalExtents)&&c(e.longitudeRotation)&&c(e.planes2D_HIGH)&&c(e.planes2D_LOW)&&c(e.uMaxVmax)&&c(e.uvMinAndExtents)};function Gne(e){return Math.max(e.width,e.height)>Os.MAX_WIDTH_FOR_PLANAR_EXTENTS}Os.shouldUseSphericalCoordinates=function(e){return Gne(e)};Os.MAX_WIDTH_FOR_PLANAR_EXTENTS=w.toRadians(1);var IA=Os;var zne={NEVER:V.NEVER,LESS:V.LESS,EQUAL:V.EQUAL,LESS_OR_EQUAL:V.LEQUAL,GREATER:V.GREATER,NOT_EQUAL:V.NOTEQUAL,GREATER_OR_EQUAL:V.GEQUAL,ALWAYS:V.ALWAYS},Nn=Object.freeze(zne);var Hne={ZERO:V.ZERO,KEEP:V.KEEP,REPLACE:V.REPLACE,INCREMENT:V.INCR,DECREMENT:V.DECR,INVERT:V.INVERT,INCREMENT_WRAP:V.INCR_WRAP,DECREMENT_WRAP:V.DECR_WRAP},nt=Object.freeze(Hne);var py={CESIUM_3D_TILE_MASK:128,SKIP_LOD_MASK:112,SKIP_LOD_BIT_SHIFT:4,CLASSIFICATION_MASK:15};py.setCesium3DTileBit=function(){return{enabled:!0,frontFunction:Nn.ALWAYS,frontOperation:{fail:nt.KEEP,zFail:nt.KEEP,zPass:nt.REPLACE},backFunction:Nn.ALWAYS,backOperation:{fail:nt.KEEP,zFail:nt.KEEP,zPass:nt.REPLACE},reference:py.CESIUM_3D_TILE_MASK,mask:py.CESIUM_3D_TILE_MASK}};var Qt=Object.freeze(py);function vd(e){e=e??k.EMPTY_OBJECT;let t=e.geometryInstances;this.geometryInstances=t,this.show=e.show??!0,this.classificationType=e.classificationType??on.BOTH,this.debugShowBoundingVolume=e.debugShowBoundingVolume??!1,this.debugShowShadowVolume=e.debugShowShadowVolume??!1,this._debugShowShadowVolume=!1,this._extruded=e._extruded??!1,this._uniformMap=e._uniformMap,this._sp=void 0,this._spStencil=void 0,this._spPick=void 0,this._spColor=void 0,this._spPick2D=void 0,this._spColor2D=void 0,this._rsStencilDepthPass=void 0,this._rsStencilDepthPass3DTiles=void 0,this._rsColorPass=void 0,this._rsPickPass=void 0,this._commandsIgnoreShow=[],this._ready=!1,this._primitive=void 0,this._pickPrimitive=e._pickPrimitive,this._hasSphericalExtentsAttribute=!1,this._hasPlanarExtentsAttributes=!1,this._hasPerColorAttribute=!1,this.appearance=e.appearance,this._createBoundingVolumeFunction=e._createBoundingVolumeFunction,this._updateAndQueueCommandsFunction=e._updateAndQueueCommandsFunction,this._usePickOffsets=!1,this._primitiveOptions={geometryInstances:void 0,appearance:void 0,vertexCacheOptimize:e.vertexCacheOptimize??!1,interleave:e.interleave??!1,releaseGeometryInstances:e.releaseGeometryInstances??!0,allowPicking:e.allowPicking??!0,asynchronous:e.asynchronous??!0,compressVertices:e.compressVertices??!0,_createBoundingVolumeFunction:void 0,_createRenderStatesFunction:void 0,_createShaderProgramFunction:void 0,_createCommandsFunction:void 0,_updateAndQueueCommandsFunction:void 0,_createPickOffsets:!0}}Object.defineProperties(vd.prototype,{vertexCacheOptimize:{get:function(){return this._primitiveOptions.vertexCacheOptimize}},interleave:{get:function(){return this._primitiveOptions.interleave}},releaseGeometryInstances:{get:function(){return this._primitiveOptions.releaseGeometryInstances}},allowPicking:{get:function(){return this._primitiveOptions.allowPicking}},asynchronous:{get:function(){return this._primitiveOptions.asynchronous}},compressVertices:{get:function(){return this._primitiveOptions.compressVertices}},ready:{get:function(){return this._ready}},_needs2DShader:{get:function(){return this._hasPlanarExtentsAttributes||this._hasSphericalExtentsAttribute}}});vd.isSupported=function(e){return e.context.stencilBuffer};function dm(e,t){let n=t?Nn.EQUAL:Nn.ALWAYS;return{colorMask:{red:!1,green:!1,blue:!1,alpha:!1},stencilTest:{enabled:e,frontFunction:n,frontOperation:{fail:nt.KEEP,zFail:nt.DECREMENT_WRAP,zPass:nt.KEEP},backFunction:n,backOperation:{fail:nt.KEEP,zFail:nt.INCREMENT_WRAP,zPass:nt.KEEP},reference:Qt.CESIUM_3D_TILE_MASK,mask:Qt.CESIUM_3D_TILE_MASK},stencilMask:Qt.CLASSIFICATION_MASK,depthTest:{enabled:!0,func:Ms.LESS_OR_EQUAL},depthMask:!1}}function JT(e){return{stencilTest:{enabled:e,frontFunction:Nn.NOT_EQUAL,frontOperation:{fail:nt.ZERO,zFail:nt.ZERO,zPass:nt.ZERO},backFunction:Nn.NOT_EQUAL,backOperation:{fail:nt.ZERO,zFail:nt.ZERO,zPass:nt.ZERO},reference:0,mask:Qt.CLASSIFICATION_MASK},stencilMask:Qt.CLASSIFICATION_MASK,depthTest:{enabled:!1},depthMask:!1,blending:qn.PRE_MULTIPLIED_ALPHA_BLEND}}var Vne={stencilTest:{enabled:!0,frontFunction:Nn.NOT_EQUAL,frontOperation:{fail:nt.ZERO,zFail:nt.ZERO,zPass:nt.ZERO},backFunction:Nn.NOT_EQUAL,backOperation:{fail:nt.ZERO,zFail:nt.ZERO,zPass:nt.ZERO},reference:0,mask:Qt.CLASSIFICATION_MASK},stencilMask:Qt.CLASSIFICATION_MASK,depthTest:{enabled:!1},depthMask:!1};function jne(e,t,n,i){if(c(e._rsStencilDepthPass))return;let o=!e.debugShowShadowVolume;e._rsStencilDepthPass=ut.fromCache(dm(o,!1)),e._rsStencilDepthPass3DTiles=ut.fromCache(dm(o,!0)),e._rsColorPass=ut.fromCache(JT(o,!1)),e._rsPickPass=ut.fromCache(Vne)}function Yne(e,t){if(!e.compressVertices)return t;if(t.search(/in\s+vec3\s+extrudeDirection;/g)!==-1){let n="compressedAttributes",i=`in vec2 ${n};`,o=`vec3 extrudeDirection;
`,r=`    extrudeDirection = czm_octDecode(${n}, 65535.0);
`,a=t;a=a.replace(/in\s+vec3\s+extrudeDirection;/g,""),a=It.replaceMain(a,"czm_non_compressed_main");let s=`void main() 
{ 
${r}    czm_non_compressed_main(); 
}`;return[i,o,a,s].join(`
`)}}function qne(e,t){let n=t.context,i=e._primitive,o=I1;o=e._primitive._batchTable.getVertexShaderCallback()(o),o=wn._appendDistanceDisplayConditionToShader(i,o),o=wn._modifyShaderPosition(e,o,t.scene3DOnly),o=wn._updateColorAttribute(i,o);let r=e._hasPlanarExtentsAttributes,a=r||e._hasSphericalExtentsAttribute;e._extruded&&(o=Yne(i,o));let s=e._extruded?"EXTRUDED_GEOMETRY":"",A=new It({defines:[s],sources:[o]}),l=new It({sources:[rC]}),f=e._primitive._attributeLocations,h=new IA(a,r,e.appearance);if(e._spStencil=Bn.replaceCache({context:n,shaderProgram:e._spStencil,vertexShaderSource:A,fragmentShaderSource:l,attributeLocations:f}),e._primitive.allowPicking){let g=It.createPickVertexShaderSource(o);g=wn._appendShowToShader(i,g),g=wn._updatePickColorAttribute(g);let C=h.createPickFragmentShader(!1),_=h.createPickVertexShader([s],g,!1,t.mapProjection);if(e._spPick=Bn.replaceCache({context:n,shaderProgram:e._spPick,vertexShaderSource:_,fragmentShaderSource:C,attributeLocations:f}),a){let E=n.shaderCache.getDerivedShaderProgram(e._spPick,"2dPick");if(!c(E)){let I=h.createPickFragmentShader(!0),y=h.createPickVertexShader([s],g,!0,t.mapProjection);E=n.shaderCache.createDerivedShaderProgram(e._spPick,"2dPick",{vertexShaderSource:y,fragmentShaderSource:I,attributeLocations:f})}e._spPick2D=E}}else e._spPick=Bn.fromCache({context:n,vertexShaderSource:A,fragmentShaderSource:l,attributeLocations:f});o=wn._appendShowToShader(i,o),A=new It({defines:[s],sources:[o]}),e._sp=Bn.replaceCache({context:n,shaderProgram:e._sp,vertexShaderSource:A,fragmentShaderSource:l,attributeLocations:f});let m=h.createFragmentShader(!1),p=h.createVertexShader([s],o,!1,t.mapProjection);if(e._spColor=Bn.replaceCache({context:n,shaderProgram:e._spColor,vertexShaderSource:p,fragmentShaderSource:m,attributeLocations:f}),a){let g=n.shaderCache.getDerivedShaderProgram(e._spColor,"2dColor");if(!c(g)){let C=h.createFragmentShader(!0),_=h.createVertexShader([s],o,!0,t.mapProjection);g=n.shaderCache.createDerivedShaderProgram(e._spColor,"2dColor",{vertexShaderSource:_,fragmentShaderSource:C,attributeLocations:f})}e._spColor2D=g}}function Wne(e,t){let n=e._primitive,i=n._va.length*2;t.length=i;let o,r,a,s=0,A=n._batchTable.getUniformMapCallback()(e._uniformMap),l=e._needs2DShader;for(o=0;o<i;o+=2){let p=n._va[s++];r=t[o],c(r)||(r=t[o]=new mt({owner:e,primitiveType:n._primitiveType})),r.vertexArray=p,r.renderState=e._rsStencilDepthPass,r.shaderProgram=e._sp,r.uniformMap=A,r.pass=Ye.TERRAIN_CLASSIFICATION,a=mt.shallowClone(r,r.derivedCommands.tileset),a.renderState=e._rsStencilDepthPass3DTiles,a.pass=Ye.CESIUM_3D_TILE_CLASSIFICATION,r.derivedCommands.tileset=a,r=t[o+1],c(r)||(r=t[o+1]=new mt({owner:e,primitiveType:n._primitiveType})),r.vertexArray=p,r.renderState=e._rsColorPass,r.shaderProgram=e._spColor,r.pass=Ye.TERRAIN_CLASSIFICATION;let C=e.appearance.material;if(c(C)&&(A=Et(A,C._uniforms)),r.uniformMap=A,a=mt.shallowClone(r,r.derivedCommands.tileset),a.pass=Ye.CESIUM_3D_TILE_CLASSIFICATION,r.derivedCommands.tileset=a,l){let _=mt.shallowClone(r,r.derivedCommands.appearance2D);_.shaderProgram=e._spColor2D,r.derivedCommands.appearance2D=_,_=mt.shallowClone(a,a.derivedCommands.appearance2D),_.shaderProgram=e._spColor2D,a.derivedCommands.appearance2D=_}}let f=e._commandsIgnoreShow,h=e._spStencil,m=0;i=f.length=i/2;for(let p=0;p<i;++p){let g=f[p]=mt.shallowClone(t[m],f[p]);g.shaderProgram=h,g.pass=Ye.CESIUM_3D_TILE_CLASSIFICATION_IGNORE_SHOW,m+=2}}function Jne(e,t){let n=e._usePickOffsets,i=e._primitive,o=i._va.length*2,r,a=0,s;n&&(r=i._pickOffsets,o=r.length*2),t.length=o;let A,l,f,h=0,m=i._batchTable.getUniformMapCallback()(e._uniformMap),p=e._needs2DShader;for(A=0;A<o;A+=2){let g=i._va[h++];if(n&&(s=r[a++],g=i._va[s.index]),l=t[A],c(l)||(l=t[A]=new mt({owner:e,primitiveType:i._primitiveType,pickOnly:!0})),l.vertexArray=g,l.renderState=e._rsStencilDepthPass,l.shaderProgram=e._sp,l.uniformMap=m,l.pass=Ye.TERRAIN_CLASSIFICATION,n&&(l.offset=s.offset,l.count=s.count),f=mt.shallowClone(l,l.derivedCommands.tileset),f.renderState=e._rsStencilDepthPass3DTiles,f.pass=Ye.CESIUM_3D_TILE_CLASSIFICATION,l.derivedCommands.tileset=f,l=t[A+1],c(l)||(l=t[A+1]=new mt({owner:e,primitiveType:i._primitiveType,pickOnly:!0})),l.vertexArray=g,l.renderState=e._rsPickPass,l.shaderProgram=e._spPick,l.uniformMap=m,l.pass=Ye.TERRAIN_CLASSIFICATION,n&&(l.offset=s.offset,l.count=s.count),f=mt.shallowClone(l,l.derivedCommands.tileset),f.pass=Ye.CESIUM_3D_TILE_CLASSIFICATION,l.derivedCommands.tileset=f,p){let C=mt.shallowClone(l,l.derivedCommands.pick2D);C.shaderProgram=e._spPick2D,l.derivedCommands.pick2D=C,C=mt.shallowClone(f,f.derivedCommands.pick2D),C.shaderProgram=e._spPick2D,f.derivedCommands.pick2D=C}}}function Kne(e,t,n,i,o,r,a){Wne(e,r),Jne(e,a)}function ek(e,t){return Math.floor(e%t/2)}function WT(e,t,n,i,o,r){e.modelMatrix=n,e.boundingVolume=o,e.cull=i,e.debugShowBoundingVolume=r,t.commandList.push(e)}function tk(e,t,n,i,o){e.modelMatrix=n,e.boundingVolume=o,e.cull=i,t.commandList.push(e)}function Xne(e,t,n,i,o,r,a,s){let A=e._primitive;wn._updateBoundingVolumes(A,t,o);let l;t.mode===Te.SCENE3D?l=A._boundingSphereWC:t.mode===Te.COLUMBUS_VIEW?l=A._boundingSphereCV:t.mode===Te.SCENE2D&&c(A._boundingSphere2D)?l=A._boundingSphere2D:c(A._boundingSphereMorph)&&(l=A._boundingSphereMorph);let f=e.classificationType,h=f!==on.CESIUM_3D_TILE,m=f!==on.TERRAIN,p=t.passes,g,C,_;if(p.render){let E=n.length;for(g=0;g<E;++g)C=l[ek(g,E)],h&&(_=n[g],WT(_,t,o,r,C,a)),m&&(_=n[g].derivedCommands.tileset,WT(_,t,o,r,C,a));if(t.invertClassification){let I=e._commandsIgnoreShow,y=I.length;for(g=0;g<y;++g)C=l[g],_=I[g],WT(_,t,o,r,C,a)}}if(p.pick){let E=i.length,I=A._pickOffsets;for(g=0;g<E;++g){let y=I[ek(g,E)];C=l[y.index],h&&(_=i[g],tk(_,t,o,r,C)),m&&(_=i[g].derivedCommands.tileset,tk(_,t,o,r,C))}}}vd.prototype.update=function(e){if(!c(this._primitive)&&!c(this.geometryInstances))return;let t=this.appearance;c(t)&&c(t.material)&&t.material.update(e.context);let n=this,i=this._primitiveOptions;if(!c(this._primitive)){let o=Array.isArray(this.geometryInstances)?this.geometryInstances:[this.geometryInstances],r=o.length,a,s,A,l=!1,f=!0,h,m=!1,p=!1;for(r>0&&(A=o[0].attributes,m=IA.hasAttributesForSphericalExtents(A),p=IA.hasAttributesForTextureCoordinatePlanes(A),h=A.color),a=0;a<r;a++){s=o[a];let C=s.attributes.color;c(C)&&(l=!0),f=f&&c(C)&&Tt.equals(h,C)}if(!f&&!m&&!p)throw new Ee("All GeometryInstances must have the same color attribute except via GroundPrimitives");l&&!c(t)&&(t=new Vt({flat:!0}),this.appearance=t),this._usePickOffsets=!m&&!p,this._hasSphericalExtentsAttribute=m,this._hasPlanarExtentsAttributes=p,this._hasPerColorAttribute=l;let g=new Array(r);for(a=0;a<r;++a)s=o[a],g[a]=new gt({geometry:s.geometry,attributes:s.attributes,modelMatrix:s.modelMatrix,id:s.id,pickPrimitive:this._pickPrimitive??n});i.appearance=t,i.geometryInstances=g,c(this._createBoundingVolumeFunction)&&(i._createBoundingVolumeFunction=function(C,_){n._createBoundingVolumeFunction(C,_)}),i._createRenderStatesFunction=function(C,_,E,I){jne(n,_)},i._createShaderProgramFunction=function(C,_,E){qne(n,_)},i._createCommandsFunction=function(C,_,E,I,y,b,x){Kne(n,void 0,void 0,!0,!1,b,x)},c(this._updateAndQueueCommandsFunction)?i._updateAndQueueCommandsFunction=function(C,_,E,I,y,b,x,S){n._updateAndQueueCommandsFunction(C,_,E,I,y,b,x,S)}:i._updateAndQueueCommandsFunction=function(C,_,E,I,y,b,x,S){Xne(n,_,E,I,y,b,x,S)},this._primitive=new wn(i)}this.debugShowShadowVolume&&!this._debugShowShadowVolume&&this._ready?(this._debugShowShadowVolume=!0,this._rsStencilDepthPass=ut.fromCache(dm(!1,!1)),this._rsStencilDepthPass3DTiles=ut.fromCache(dm(!1,!0)),this._rsColorPass=ut.fromCache(JT(!1))):!this.debugShowShadowVolume&&this._debugShowShadowVolume&&(this._debugShowShadowVolume=!1,this._rsStencilDepthPass=ut.fromCache(dm(!0,!1)),this._rsStencilDepthPass3DTiles=ut.fromCache(dm(!0,!0)),this._rsColorPass=ut.fromCache(JT(!0))),this._primitive.appearance!==t&&(this._primitive.appearance=t),this._primitive.show=this.show,this._primitive.debugShowBoundingVolume=this.debugShowBoundingVolume,this._primitive.update(e),e.afterRender.push(()=>{c(this._primitive)&&this._primitive.ready&&(this._ready=!0,this.releaseGeometryInstances&&(this.geometryInstances=void 0))})};vd.prototype.getGeometryInstanceAttributes=function(e){return this._primitive.getGeometryInstanceAttributes(e)};vd.prototype.isDestroyed=function(){return!1};vd.prototype.destroy=function(){return this._primitive=this._primitive&&this._primitive.destroy(),this._sp=this._sp&&this._sp.destroy(),this._spPick=this._spPick&&this._spPick.destroy(),this._spColor=this._spColor&&this._spColor.destroy(),this._spPick2D=void 0,this._spColor2D=void 0,pe(this)};var KT=vd;var Zne={u_globeMinimumAltitude:function(){return 55e3}};function xa(e){e=e??k.EMPTY_OBJECT;let t=e.appearance,n=e.geometryInstances;if(!c(t)&&c(n)){let o=Array.isArray(n)?n:[n],r=o.length;for(let a=0;a<r;a++){let s=o[a].attributes;if(c(s)&&c(s.color)){t=new Vt({flat:!0});break}}}this.appearance=t,this.geometryInstances=e.geometryInstances,this.show=e.show??!0,this.classificationType=e.classificationType??on.BOTH,this.debugShowBoundingVolume=e.debugShowBoundingVolume??!1,this.debugShowShadowVolume=e.debugShowShadowVolume??!1,this._boundingVolumes=[],this._boundingVolumes2D=[],this._ready=!1,this._primitive=void 0,this._maxHeight=void 0,this._minHeight=void 0,this._maxTerrainHeight=On._defaultMaxTerrainHeight,this._minTerrainHeight=On._defaultMinTerrainHeight,this._boundingSpheresKeys=[],this._boundingSpheres=[],this._useFragmentCulling=!1,this._zIndex=void 0;let i=this;this._classificationPrimitiveOptions={geometryInstances:void 0,appearance:void 0,vertexCacheOptimize:e.vertexCacheOptimize??!1,interleave:e.interleave??!1,releaseGeometryInstances:e.releaseGeometryInstances??!0,allowPicking:e.allowPicking??!0,asynchronous:e.asynchronous??!0,compressVertices:e.compressVertices??!0,_createBoundingVolumeFunction:void 0,_updateAndQueueCommandsFunction:void 0,_pickPrimitive:i,_extruded:!0,_uniformMap:Zne}}Object.defineProperties(xa.prototype,{vertexCacheOptimize:{get:function(){return this._classificationPrimitiveOptions.vertexCacheOptimize}},interleave:{get:function(){return this._classificationPrimitiveOptions.interleave}},releaseGeometryInstances:{get:function(){return this._classificationPrimitiveOptions.releaseGeometryInstances}},allowPicking:{get:function(){return this._classificationPrimitiveOptions.allowPicking}},asynchronous:{get:function(){return this._classificationPrimitiveOptions.asynchronous}},compressVertices:{get:function(){return this._classificationPrimitiveOptions.compressVertices}},ready:{get:function(){return this._ready}}});xa.isSupported=KT.isSupported;function nk(e){return function(t,n){let i=n.maximumRadius,o=i/Math.cos(t*.5)-i;return e._maxHeight+o}}function ik(e){return function(t,n){return e._minHeight}}var $ne=new u,eie=new u,tie=new u,nie=new ae,iie=new ce;function gy(e,t){let n=e.mapProjection.ellipsoid;if(!c(t.attributes)||!c(t.attributes.position3DHigh))return c(t.rectangle)?t.rectangle:void 0;let i=t.attributes.position3DHigh.values,o=t.attributes.position3DLow.values,r=i.length,a=Number.POSITIVE_INFINITY,s=Number.POSITIVE_INFINITY,A=Number.NEGATIVE_INFINITY,l=Number.NEGATIVE_INFINITY;for(let h=0;h<r;h+=3){let m=u.unpack(i,h,$ne),p=u.unpack(o,h,eie),g=u.add(m,p,tie),C=n.cartesianToCartographic(g,nie),_=C.latitude,E=C.longitude;a=Math.min(a,_),s=Math.min(s,E),A=Math.max(A,_),l=Math.max(l,E)}let f=iie;return f.north=A,f.south=a,f.east=l,f.west=s,f}function oie(e,t,n){let i=On.getMinimumMaximumHeights(t,n);e._minTerrainHeight=i.minimumTerrainHeight,e._maxTerrainHeight=i.maximumTerrainHeight}function rie(e,t,n){let i=t.mapProjection.ellipsoid,o=gy(t,n),r=To.fromRectangle(o,e._minHeight,e._maxHeight,i);if(e._boundingVolumes.push(r),!t.scene3DOnly){let a=t.mapProjection,s=ee.fromRectangleWithHeights2D(o,a,e._maxHeight,e._minHeight);u.fromElements(s.center.z,s.center.x,s.center.y,s.center),e._boundingVolumes2D.push(s)}}function XT(e,t){return Math.floor(e%t/2)}function ZT(e,t,n,i,o,r,a){let s=e._primitive;n.mode!==Te.SCENE3D&&t.shaderProgram===s._spColor&&s._needs2DShader&&(t=t.derivedCommands.appearance2D),t.owner=e,t.modelMatrix=i,t.boundingVolume=r,t.cull=o,t.debugShowBoundingVolume=a,n.commandList.push(t)}function ok(e,t,n,i,o,r){let a=e._primitive;n.mode!==Te.SCENE3D&&t.shaderProgram===a._spPick&&a._needs2DShader&&(t=t.derivedCommands.pick2D),t.owner=e,t.modelMatrix=i,t.boundingVolume=r,t.cull=o,n.commandList.push(t)}function aie(e,t,n,i,o,r,a,s){let A;t.mode===Te.SCENE3D?A=e._boundingVolumes:A=e._boundingVolumes2D;let l=e.classificationType,f=l!==on.CESIUM_3D_TILE,h=l!==on.TERRAIN,m=t.passes,p=e._primitive,g,C,_;if(m.render){let E=n.length;for(g=0;g<E;++g)C=A[XT(g,E)],f&&(_=n[g],ZT(e,_,t,o,r,C,a)),h&&(_=n[g].derivedCommands.tileset,ZT(e,_,t,o,r,C,a));if(t.invertClassification){let I=p._commandsIgnoreShow,y=I.length;for(g=0;g<y;++g)C=A[g],_=I[g],ZT(e,_,t,o,r,C,a)}}if(m.pick){let E=i.length,I;for(e._useFragmentCulling||(I=p._primitive._pickOffsets),g=0;g<E;++g){if(C=A[XT(g,E)],!e._useFragmentCulling){let y=I[XT(g,E)];C=A[y.index]}f&&(_=i[g],ok(e,_,t,o,r,C)),h&&(_=i[g].derivedCommands.tileset,ok(e,_,t,o,r,C))}}}xa.initializeTerrainHeights=function(){return On.initialize()};xa.prototype.update=function(e){if(!c(this._primitive)&&!c(this.geometryInstances))return;if(!On.initialized){xa.initializeTerrainHeights();return}let t=this,n=this._classificationPrimitiveOptions;if(!c(this._primitive)){let i=e.mapProjection.ellipsoid,o,r,a,s=Array.isArray(this.geometryInstances)?this.geometryInstances:[this.geometryInstances],A=s.length,l=new Array(A),f,h;for(f=0;f<A;++f){o=s[f],r=o.geometry;let C=gy(e,r);c(h)?c(C)&&ce.union(h,C,h):h=ce.clone(C);let _=o.id;if(c(_)&&c(C)){let E=On.getBoundingSphere(C,i);this._boundingSpheresKeys.push(_),this._boundingSpheres.push(E)}a=r.constructor,!c(a)||c(a.createShadowVolume)}oie(this,h,i);let m=e.verticalExaggeration,p=e.verticalExaggerationRelativeHeight;this._minHeight=EA.getHeight(this._minTerrainHeight,m,p),this._maxHeight=EA.getHeight(this._maxTerrainHeight,m,p);let g=xa._supportsMaterials(e.context);if(this._useFragmentCulling=g,g){let C,_=!0;for(f=0;f<A;++f)if(o=s[f],r=o.geometry,h=gy(e,r),IA.shouldUseSphericalCoordinates(h)){_=!1;break}for(f=0;f<A;++f){o=s[f],r=o.geometry,a=r.constructor;let E=gy(e,r),I=r.textureCoordinateRotationPoints;_?C=IA.getPlanarTextureCoordinateAttributes(E,I,i,e.mapProjection,this._maxHeight):C=IA.getSphericalExtentGeometryInstanceAttributes(E,I,i,e.mapProjection);let y=o.attributes;for(let b in y)y.hasOwnProperty(b)&&(C[b]=y[b]);l[f]=new gt({geometry:a.createShadowVolume(r,ik(this),nk(this)),attributes:C,id:o.id})}}else for(f=0;f<A;++f)o=s[f],r=o.geometry,a=r.constructor,l[f]=new gt({geometry:a.createShadowVolume(r,ik(this),nk(this)),attributes:o.attributes,id:o.id});n.geometryInstances=l,n.appearance=this.appearance,n._createBoundingVolumeFunction=function(C,_){rie(t,C,_)},n._updateAndQueueCommandsFunction=function(C,_,E,I,y,b,x,S){aie(t,_,E,I,y,b,x,S)},this._primitive=new KT(n)}this._primitive.appearance=this.appearance,this._primitive.show=this.show,this._primitive.debugShowShadowVolume=this.debugShowShadowVolume,this._primitive.debugShowBoundingVolume=this.debugShowBoundingVolume,this._primitive.update(e),e.afterRender.push(()=>{!this._ready&&c(this._primitive)&&this._primitive.ready&&(this._ready=!0,this.releaseGeometryInstances&&(this.geometryInstances=void 0))})};xa.prototype.getBoundingSphere=function(e){let t=this._boundingSpheresKeys.indexOf(e);if(t!==-1)return this._boundingSpheres[t]};xa.prototype.getGeometryInstanceAttributes=function(e){return this._primitive.getGeometryInstanceAttributes(e)};xa.prototype.isDestroyed=function(){return!1};xa.prototype.destroy=function(){return this._primitive=this._primitive&&this._primitive.destroy(),pe(this)};xa._supportsMaterials=function(e){return e.depthTexture};xa.supportsMaterials=function(e){return xa._supportsMaterials(e.frameState.context)};var Ls=xa;function hm(){Ee.throwInstantiationError()}Object.defineProperties(hm.prototype,{isConstant:{get:Ee.throwInstantiationError},definitionChanged:{get:Ee.throwInstantiationError}});hm.prototype.getType=Ee.throwInstantiationError;hm.prototype.getValue=Ee.throwInstantiationError;hm.prototype.equals=Ee.throwInstantiationError;var sie=new X;hm.getValue=function(e,t,n){let i;return c(e)||(e=X.now(sie)),c(t)&&(i=t.getType(e),c(i))?((!c(n)||n.type!==i)&&(n=Sr.fromType(i)),t.getValue(e,n.uniforms),n):((!c(n)||n.type!==Sr.ColorType)&&(n=Sr.fromType(Sr.ColorType)),F.clone(F.WHITE,n.uniforms.color),n)};var Ji=hm;function Pd(e,t,n){this._primitives=t,this._orderedGroundPrimitives=n,this._primitive=void 0,this._outlinePrimitive=void 0,this._geometryUpdater=e,this._options=e._options,this._entity=e._entity,this._material=void 0}Pd.prototype._isHidden=function(e,t,n){return!e.isShowing||!e.isAvailable(n)||!M.getValueOrDefault(t.show,n,!0)};Pd.prototype._setOptions=Ee.throwInstantiationError;Pd.prototype.update=function(e){let t=this._geometryUpdater,n=t._onTerrain,i=this._primitives,o=this._orderedGroundPrimitives;n?o.remove(this._primitive):(i.removeAndDestroy(this._primitive),i.removeAndDestroy(this._outlinePrimitive),this._outlinePrimitive=void 0),this._primitive=void 0;let r=this._entity,a=r[this._geometryUpdater._geometryPropertyName];if(this._setOptions(r,a,e),this._isHidden(r,a,e))return;let s=this._geometryUpdater.shadowsProperty.getValue(e),A=this._options;if(!c(a.fill)||a.fill.getValue(e)){let l=t.fillMaterialProperty,f=l instanceof lt,h,m=t._getIsClosed(A);if(f)h=new Vt({closed:m,flat:n&&!t._supportsMaterialsforEntitiesOnTerrain});else{let p=Ji.getValue(e,l,this._material);this._material=p,h=new Zn({material:p,translucent:p.isTranslucent(),closed:m})}if(n)A.vertexFormat=Vt.VERTEX_FORMAT,this._primitive=o.add(new Ls({geometryInstances:this._geometryUpdater.createFillGeometryInstance(e),appearance:h,asynchronous:!1,shadows:s,classificationType:this._geometryUpdater.classificationTypeProperty.getValue(e)}),M.getValueOrUndefined(this._geometryUpdater.zIndex,e));else{A.vertexFormat=h.vertexFormat;let p=this._geometryUpdater.createFillGeometryInstance(e);f&&(h.translucent=p.attributes.color.value[3]!==255),this._primitive=i.add(new wn({geometryInstances:p,appearance:h,asynchronous:!1,shadows:s}))}}if(!n&&c(a.outline)&&a.outline.getValue(e)){let l=this._geometryUpdater.createOutlineGeometryInstance(e),f=M.getValueOrDefault(a.outlineWidth,e,1);this._outlinePrimitive=i.add(new wn({geometryInstances:l,appearance:new Vt({flat:!0,translucent:l.attributes.color.value[3]!==255,renderState:{lineWidth:t._scene.clampLineWidth(f)}}),asynchronous:!1,shadows:s}))}};Pd.prototype.getBoundingSphere=function(e){let t=this._entity,n=this._primitive,i=this._outlinePrimitive,o;return c(n)&&n.show&&n.ready&&(o=n.getGeometryInstanceAttributes(t),c(o)&&c(o.boundingSphere))?(ee.clone(o.boundingSphere,e),He.DONE):c(i)&&i.show&&i.ready&&(o=i.getGeometryInstanceAttributes(t),c(o)&&c(o.boundingSphere))?(ee.clone(o.boundingSphere,e),He.DONE):c(n)&&!n.ready||c(i)&&!i.ready?He.PENDING:He.FAILED};Pd.prototype.isDestroyed=function(){return!1};Pd.prototype.destroy=function(){let e=this._primitives,t=this._orderedGroundPrimitives;this._geometryUpdater._onTerrain?t.remove(this._primitive):e.removeAndDestroy(this._primitive),e.removeAndDestroy(this._outlinePrimitive),pe(this)};var An=Pd;var rk={};function AC(e,t){c(rk[e])||(rk[e]=!0,console.warn(t??e))}AC.geometryOutlines="Entity geometry outlines are unsupported on terrain. Outlines will be disabled. To enable outlines, disable geometry terrain clamping by explicitly setting height to 0.";AC.geometryZIndex="Entity geometry with zIndex are unsupported when height or extrudedHeight are defined.  zIndex will be ignored";AC.geometryHeightReference="Entity corridor, ellipse, polygon or rectangle with heightReference must also have a defined height.  heightReference will be ignored";AC.geometryExtrudedHeightReference="Entity corridor, ellipse, polygon or rectangle with extrudedHeightReference must also have a defined extrudedHeight.  extrudedHeightReference will be ignored";var jt=AC;var cie={AUTODETECT:0,ENU:1,INERTIAL:2,VELOCITY:3},ak=Object.freeze(cie);var Aie={NONE:0,GEODESIC:1,RHUMB:2},Yt=Object.freeze(Aie);var sk=w.EPSILON10;function lie(e,t,n,i){if(!c(e))return;n=n??!1;let o=c(i),r=e.length;if(r<2)return e;let a,s=e[0],A,l,f=0,h=-1;for(a=1;a<r;++a)A=e[a],t(s,A,sk)?(c(l)||(l=e.slice(0,a),f=a-1,h=0),o&&i.push(a)):(c(l)&&(l.push(A),f=a,o&&(h=i.length)),s=A);return n&&t(e[0],e[r-1],sk)&&(o&&(c(l)?i.splice(h,0,f):i.push(r-1)),c(l)?l.length-=1:l=e.slice(0,-1)),c(l)?l:e}var Bi=lie;function fie(e){let t=e._uSquared,n=e._ellipsoid.maximumRadius,i=e._ellipsoid.minimumRadius,o=(n-i)/n,r=Math.cos(e._startHeading),a=Math.sin(e._startHeading),s=(1-o)*Math.tan(e._start.latitude),A=1/Math.sqrt(1+s*s),l=A*s,f=Math.atan2(s,r),h=A*a,m=h*h,p=1-m,g=Math.sqrt(p),C=t/4,_=C*C,E=_*C,I=_*_,y=1+C-3*_/4+5*E/4-175*I/64,b=1-C+15*_/8-35*E/8,x=1-3*C+35*_/4,S=1-5*C,P=y*f-b*Math.sin(2*f)*C/2-x*Math.sin(4*f)*_/16-S*Math.sin(6*f)*E/48-Math.sin(8*f)*5*I/512,D=e._constants;D.a=n,D.b=i,D.f=o,D.cosineHeading=r,D.sineHeading=a,D.tanU=s,D.cosineU=A,D.sineU=l,D.sigma=f,D.sineAlpha=h,D.sineSquaredAlpha=m,D.cosineSquaredAlpha=p,D.cosineAlpha=g,D.u2Over4=C,D.u4Over16=_,D.u6Over64=E,D.u8Over256=I,D.a0=y,D.a1=b,D.a2=x,D.a3=S,D.distanceRatio=P}function uie(e,t){return e*t*(4+e*(4-3*t))/16}function ck(e,t,n,i,o,r,a){let s=uie(e,n);return(1-s)*e*t*(i+s*o*(a+s*r*(2*a*a-1)))}function die(e,t,n,i,o,r,a){let s=(t-n)/t,A=r-i,l=Math.atan((1-s)*Math.tan(o)),f=Math.atan((1-s)*Math.tan(a)),h=Math.cos(l),m=Math.sin(l),p=Math.cos(f),g=Math.sin(f),C=h*p,_=h*g,E=m*g,I=m*p,y=A,b=w.TWO_PI,x=Math.cos(y),S=Math.sin(y),P,D,Q,v,d;do{x=Math.cos(y),S=Math.sin(y);let ie=_-I*x;Q=Math.sqrt(p*p*S*S+ie*ie),D=E+C*x,P=Math.atan2(Q,D);let le;Q===0?(le=0,v=1):(le=C*S/Q,v=1-le*le),b=y,d=D-2*E/v,isFinite(d)||(d=0),y=A+ck(s,le,v,P,Q,D,d)}while(Math.abs(y-b)>w.EPSILON12);let B=v*(t*t-n*n)/(n*n),T=1+B*(4096+B*(B*(320-175*B)-768))/16384,R=B*(256+B*(B*(74-47*B)-128))/1024,L=d*d,G=R*Q*(d+R*(D*(2*L-1)-R*d*(4*Q*Q-3)*(4*L-3)/6)/4),q=n*T*(P-G),z=Math.atan2(p*S,_-I*x),K=Math.atan2(h*S,_*x-I);e._distance=q,e._startHeading=z,e._endHeading=K,e._uSquared=B}var hie=new u,$T=new u;function Ak(e,t,n,i){let o=u.normalize(i.cartographicToCartesian(t,$T),hie),r=u.normalize(i.cartographicToCartesian(n,$T),$T);die(e,i.maximumRadius,i.minimumRadius,t.longitude,t.latitude,n.longitude,n.latitude),e._start=ae.clone(t,e._start),e._end=ae.clone(n,e._end),e._start.height=0,e._end.height=0,fie(e)}function lC(e,t,n){let i=n??Z.default;this._ellipsoid=i,this._start=new ae,this._end=new ae,this._constants={},this._startHeading=void 0,this._endHeading=void 0,this._distance=void 0,this._uSquared=void 0,c(e)&&c(t)&&Ak(this,e,t,i)}Object.defineProperties(lC.prototype,{ellipsoid:{get:function(){return this._ellipsoid}},surfaceDistance:{get:function(){return this._distance}},start:{get:function(){return this._start}},end:{get:function(){return this._end}},startHeading:{get:function(){return this._startHeading}},endHeading:{get:function(){return this._endHeading}}});lC.prototype.setEndPoints=function(e,t){Ak(this,e,t,this._ellipsoid)};lC.prototype.interpolateUsingFraction=function(e,t){return this.interpolateUsingSurfaceDistance(this._distance*e,t)};lC.prototype.interpolateUsingSurfaceDistance=function(e,t){let n=this._constants,i=n.distanceRatio+e/n.b,o=Math.cos(2*i),r=Math.cos(4*i),a=Math.cos(6*i),s=Math.sin(2*i),A=Math.sin(4*i),l=Math.sin(6*i),f=Math.sin(8*i),h=i*i,m=i*h,p=n.u8Over256,g=n.u2Over4,C=n.u6Over64,_=n.u4Over16,E=2*m*p*o/3+i*(1-g+7*_/4-15*C/4+579*p/64-(_-15*C/4+187*p/16)*o-(5*C/4-115*p/16)*r-29*p*a/16)+(g/2-_+71*C/32-85*p/16)*s+(5*_/16-5*C/4+383*p/96)*A-h*((C-11*p/2)*s+5*p*A/2)+(29*C/96-29*p/16)*l+539*p*f/1536,I=Math.asin(Math.sin(E)*n.cosineAlpha),y=Math.atan(n.a/n.b*Math.tan(I));E=E-n.sigma;let b=Math.cos(2*n.sigma+E),x=Math.sin(E),S=Math.cos(E),P=n.cosineU*S,D=n.sineU*x,v=Math.atan2(x*n.sineHeading,P-D*n.cosineHeading)-ck(n.f,n.sineAlpha,n.cosineSquaredAlpha,E,x,S,b);return c(t)?(t.longitude=this._start.longitude+v,t.latitude=y,t.height=0,t):new ae(this._start.longitude+v,y,0)};var Cy=lC;function tS(e,t,n){if(e===0)return t*n;let i=e*e,o=i*i,r=o*i,a=r*i,s=a*i,A=s*i,l=n,f=Math.sin(2*l),h=Math.sin(4*l),m=Math.sin(6*l),p=Math.sin(8*l),g=Math.sin(10*l),C=Math.sin(12*l);return t*((1-i/4-3*o/64-5*r/256-175*a/16384-441*s/65536-4851*A/1048576)*l-(3*i/8+3*o/32+45*r/1024+105*a/4096+2205*s/131072+6237*A/524288)*f+(15*o/256+45*r/1024+525*a/16384+1575*s/65536+155925*A/8388608)*h-(35*r/3072+175*a/12288+3675*s/262144+13475*A/1048576)*m+(315*a/131072+2205*s/524288+43659*A/8388608)*p-(693*s/1310720+6237*A/5242880)*g+1001*A/8388608*C)}function mie(e,t,n){let i=e/n;if(t===0)return i;let o=i*i,r=o*i,a=r*i,s=t,A=s*s,l=A*A,f=l*A,h=f*A,m=h*A,p=m*A,g=Math.sin(2*i),C=Math.cos(2*i),_=Math.sin(4*i),E=Math.cos(4*i),I=Math.sin(6*i),y=Math.cos(6*i),b=Math.sin(8*i),x=Math.cos(8*i),S=Math.sin(10*i),P=Math.cos(10*i),D=Math.sin(12*i);return i+i*A/4+7*i*l/64+15*i*f/256+579*i*h/16384+1515*i*m/65536+16837*i*p/1048576+(3*i*l/16+45*i*f/256-i*(32*o-561)*h/4096-i*(232*o-1677)*m/16384+i*(399985-90560*o+512*a)*p/5242880)*C+(21*i*f/256+483*i*h/4096-i*(224*o-1969)*m/16384-i*(33152*o-112599)*p/1048576)*E+(151*i*h/4096+4681*i*m/65536+1479*i*p/16384-453*r*p/32768)*y+(1097*i*m/65536+42783*i*p/1048576)*x+8011*i*p/1048576*P+(3*A/8+3*l/16+213*f/2048-3*o*f/64+255*h/4096-33*o*h/512+20861*m/524288-33*o*m/512+a*m/1024+28273*p/1048576-471*o*p/8192+9*a*p/4096)*g+(21*l/256+21*f/256+533*h/8192-21*o*h/512+197*m/4096-315*o*m/4096+584039*p/16777216-12517*o*p/131072+7*a*p/2048)*_+(151*f/6144+151*h/4096+5019*m/131072-453*o*m/16384+26965*p/786432-8607*o*p/131072)*I+(1097*h/131072+1097*m/65536+225797*p/10485760-1097*o*p/65536)*b+(8011*m/2621440+8011*p/1048576)*S+293393*p/251658240*D}function mm(e,t){if(e===0)return Math.log(Math.tan(.5*(w.PI_OVER_TWO+t)));let n=e*Math.sin(t);return Math.log(Math.tan(.5*(w.PI_OVER_TWO+t)))-e/2*Math.log((1+n)/(1-n))}function pie(e,t,n,i,o){let r=mm(e._ellipticity,n),a=mm(e._ellipticity,o);return Math.atan2(w.negativePiToPi(i-t),a-r)}function gie(e,t,n,i,o,r,a){let s=e._heading,A=r-i,l=0;if(w.equalsEpsilon(Math.abs(s),w.PI_OVER_TWO,w.EPSILON8))if(t===n)l=t*Math.cos(o)*w.negativePiToPi(A);else{let f=Math.sin(o);l=t*Math.cos(o)*w.negativePiToPi(A)/Math.sqrt(1-e._ellipticitySquared*f*f)}else{let f=tS(e._ellipticity,t,o);l=(tS(e._ellipticity,t,a)-f)/Math.cos(s)}return Math.abs(l)}var Cie=new u,eS=new u;function lk(e,t,n,i){let o=u.normalize(i.cartographicToCartesian(t,eS),Cie),r=u.normalize(i.cartographicToCartesian(n,eS),eS),a=i.maximumRadius,s=i.minimumRadius,A=a*a,l=s*s;e._ellipticitySquared=(A-l)/A,e._ellipticity=Math.sqrt(e._ellipticitySquared),e._start=ae.clone(t,e._start),e._start.height=0,e._end=ae.clone(n,e._end),e._end.height=0,e._heading=pie(e,t.longitude,t.latitude,n.longitude,n.latitude),e._distance=gie(e,i.maximumRadius,i.minimumRadius,t.longitude,t.latitude,n.longitude,n.latitude)}function fk(e,t,n,i,o,r){if(n===0)return ae.clone(e,r);let a=o*o,s,A,l;if(Math.abs(w.PI_OVER_TWO-Math.abs(t))>w.EPSILON8){let f=tS(o,i,e.latitude),h=n*Math.cos(t),m=f+h;if(A=mie(m,o,i),Math.abs(t)<w.EPSILON10)s=w.negativePiToPi(e.longitude);else{let p=mm(o,e.latitude),g=mm(o,A);l=Math.tan(t)*(g-p),s=w.negativePiToPi(e.longitude+l)}}else{A=e.latitude;let f;if(o===0)f=i*Math.cos(e.latitude);else{let h=Math.sin(e.latitude);f=i*Math.cos(e.latitude)/Math.sqrt(1-a*h*h)}l=n/f,t>0?s=w.negativePiToPi(e.longitude+l):s=w.negativePiToPi(e.longitude-l)}return c(r)?(r.longitude=s,r.latitude=A,r.height=0,r):new ae(s,A,0)}function _l(e,t,n){let i=n??Z.default;this._ellipsoid=i,this._start=new ae,this._end=new ae,this._heading=void 0,this._distance=void 0,this._ellipticity=void 0,this._ellipticitySquared=void 0,c(e)&&c(t)&&lk(this,e,t,i)}Object.defineProperties(_l.prototype,{ellipsoid:{get:function(){return this._ellipsoid}},surfaceDistance:{get:function(){return this._distance}},start:{get:function(){return this._start}},end:{get:function(){return this._end}},heading:{get:function(){return this._heading}}});_l.fromStartHeadingDistance=function(e,t,n,i,o){let r=i??Z.default,a=r.maximumRadius,s=r.minimumRadius,A=a*a,l=s*s,f=Math.sqrt((A-l)/A);t=w.negativePiToPi(t);let h=fk(e,t,n,r.maximumRadius,f);return!c(o)||c(i)&&!i.equals(o.ellipsoid)?new _l(e,h,r):(o.setEndPoints(e,h),o)};_l.prototype.setEndPoints=function(e,t){lk(this,e,t,this._ellipsoid)};_l.prototype.interpolateUsingFraction=function(e,t){return this.interpolateUsingSurfaceDistance(e*this._distance,t)};_l.prototype.interpolateUsingSurfaceDistance=function(e,t){return fk(this._start,this._heading,e,this._ellipsoid.maximumRadius,this._ellipticity,t)};_l.prototype.findIntersectionWithLongitude=function(e,t){let n=this._ellipticity,i=this._heading,o=Math.abs(i),r=this._start;if(e=w.negativePiToPi(e),w.equalsEpsilon(Math.abs(e),Math.PI,w.EPSILON14)&&(e=w.sign(r.longitude)*Math.PI),c(t)||(t=new ae),Math.abs(w.PI_OVER_TWO-o)<=w.EPSILON8)return t.longitude=e,t.latitude=r.latitude,t.height=0,t;if(w.equalsEpsilon(Math.abs(w.PI_OVER_TWO-o),w.PI_OVER_TWO,w.EPSILON8))return w.equalsEpsilon(e,r.longitude,w.EPSILON12)?void 0:(t.longitude=e,t.latitude=w.PI_OVER_TWO*w.sign(w.PI_OVER_TWO-i),t.height=0,t);let a=r.latitude,s=n*Math.sin(a),A=Math.tan(.5*(w.PI_OVER_TWO+a))*Math.exp((e-r.longitude)/Math.tan(i)),l=(1+s)/(1-s),f=r.latitude,h;do{h=f;let m=n*Math.sin(h),p=(1+m)/(1-m);f=2*Math.atan(A*Math.pow(p/l,n/2))-w.PI_OVER_TWO}while(!w.equalsEpsilon(f,h,w.EPSILON12));return t.longitude=e,t.latitude=f,t.height=0,t};_l.prototype.findIntersectionWithLatitude=function(e,t){let n=this._ellipticity,i=this._heading,o=this._start;if(w.equalsEpsilon(Math.abs(i),w.PI_OVER_TWO,w.EPSILON8))return;let r=mm(n,o.latitude),a=mm(n,e),s=Math.tan(i)*(a-r),A=w.negativePiToPi(o.longitude+s);return c(t)?(t.longitude=A,t.latitude=e,t.height=0,t):new ae(A,e,0)};var Ta=_l;var AS=[Ai,Ar],_ie=AS.length,Rk=Math.cos(w.toRadians(30)),uk=Math.cos(w.toRadians(150)),vk=0,Pk=1e3;function Yf(e){e=e??k.EMPTY_OBJECT;let t=e.positions;this.width=e.width??1,this._positions=t,this.granularity=e.granularity??9999,this.loop=e.loop??!1,this.arcType=e.arcType??Yt.GEODESIC,this._ellipsoid=Z.default,this._projectionIndex=0,this._workerName="createGroundPolylineGeometry",this._scene3DOnly=!1}Object.defineProperties(Yf.prototype,{packedLength:{get:function(){return 1+this._positions.length*3+1+1+1+Z.packedLength+1+1}}});Yf.setProjectionAndEllipsoid=function(e,t){let n=0;for(let i=0;i<_ie;i++)if(t instanceof AS[i]){n=i;break}e._projectionIndex=n,e._ellipsoid=t.ellipsoid};var Eie=new u,dk=new u,hk=new u;function cS(e,t,n,i,o){let r=Zr(i,e,0,Eie),a=Zr(i,e,n,dk),s=Zr(i,t,0,hk),A=El(a,r,dk),l=El(s,r,hk);return u.cross(l,A,o),u.normalize(o,o)}var Iie=new ae,yie=new u,bie=new u,Bie=new u;function nS(e,t,n,i,o,r,a,s,A,l,f){if(o===0)return;let h;r===Yt.GEODESIC?h=new Cy(e,t,a):r===Yt.RHUMB&&(h=new Ta(e,t,a));let m=h.surfaceDistance;if(m<o)return;let p=cS(e,t,i,a,Bie),g=Math.ceil(m/o),C=m/g,_=C,E=g-1,I=s.length;for(let y=0;y<E;y++){let b=h.interpolateUsingSurfaceDistance(_,Iie),x=Zr(a,b,n,yie),S=Zr(a,b,i,bie);u.pack(p,s,I),u.pack(x,A,I),u.pack(S,l,I),f.push(b.latitude),f.push(b.longitude),I+=3,_+=C}}var iS=new ae;function Zr(e,t,n,i){return ae.clone(t,iS),iS.height=n,ae.toCartesian(iS,e,i)}Yf.pack=function(e,t,n){let i=n??0,o=e._positions,r=o.length;t[i++]=r;for(let a=0;a<r;++a){let s=o[a];u.pack(s,t,i),i+=3}return t[i++]=e.granularity,t[i++]=e.loop?1:0,t[i++]=e.arcType,Z.pack(e._ellipsoid,t,i),i+=Z.packedLength,t[i++]=e._projectionIndex,t[i++]=e._scene3DOnly?1:0,t};Yf.unpack=function(e,t,n){let i=t??0,o=e[i++],r=new Array(o);for(let m=0;m<o;m++)r[m]=u.unpack(e,i),i+=3;let a=e[i++],s=e[i++]===1,A=e[i++],l=Z.unpack(e,i);i+=Z.packedLength;let f=e[i++],h=e[i++]===1;return c(n)||(n=new Yf({positions:r})),n._positions=r,n.granularity=a,n.loop=s,n.arcType=A,n._ellipsoid=l,n._projectionIndex=f,n._scene3DOnly=h,n};function El(e,t,n){return u.subtract(e,t,n),u.normalize(n,n),n}function mk(e,t,n,i){return i=El(e,t,i),i=u.cross(i,n,i),i=u.normalize(i,i),i=u.cross(n,i,i),i}var xie=new u,Tie=new u,Sie=new u,Mk=new u,wie=0,Die=-1;function oS(e,t,n,i,o){let r=El(n,t,Mk),a=mk(e,t,r,xie),s=mk(i,t,r,Tie);if(w.equalsEpsilon(u.dot(a,s),Die,w.EPSILON5))return o=u.cross(r,a,o),o=u.normalize(o,o),o;o=u.add(s,a,o),o=u.normalize(o,o);let A=u.cross(r,o,Sie);return u.dot(s,A)<wie&&(o=u.negate(o,o)),o}var yy=Ft.fromPointNormal(u.ZERO,u.UNIT_Y),Qie=new u,Rie=new u,vie=new u,Pie=new u,Mie=new u,_y=new u,Ey=new ae,pk=new ae,gk=new ae;Yf.createGeometry=function(e){let t=!e._scene3DOnly,n=e.loop,i=e._ellipsoid,o=e.granularity,r=e.arcType,a=new AS[e._projectionIndex](i),s=vk,A=Pk,l,f,h=e._positions,m=h.length;m===2&&(n=!1);let p,g,C,_,E=new Ta(void 0,void 0,i),I,y,b,x=[h[0]];for(f=0;f<m-1;f++)p=h[f],g=h[f+1],I=Ni.lineSegmentPlane(p,g,yy,_y),c(I)&&!u.equalsEpsilon(I,p,w.EPSILON7)&&!u.equalsEpsilon(I,g,w.EPSILON7)&&(e.arcType===Yt.GEODESIC?x.push(u.clone(I)):e.arcType===Yt.RHUMB&&(b=i.cartesianToCartographic(I,Ey).longitude,C=i.cartesianToCartographic(p,Ey),_=i.cartesianToCartographic(g,pk),E.setEndPoints(C,_),y=E.findIntersectionWithLongitude(b,gk),I=i.cartographicToCartesian(y,_y),c(I)&&!u.equalsEpsilon(I,p,w.EPSILON7)&&!u.equalsEpsilon(I,g,w.EPSILON7)&&x.push(u.clone(I)))),x.push(g);n&&(p=h[m-1],g=h[0],I=Ni.lineSegmentPlane(p,g,yy,_y),c(I)&&!u.equalsEpsilon(I,p,w.EPSILON7)&&!u.equalsEpsilon(I,g,w.EPSILON7)&&(e.arcType===Yt.GEODESIC?x.push(u.clone(I)):e.arcType===Yt.RHUMB&&(b=i.cartesianToCartographic(I,Ey).longitude,C=i.cartesianToCartographic(p,Ey),_=i.cartesianToCartographic(g,pk),E.setEndPoints(C,_),y=E.findIntersectionWithLongitude(b,gk),I=i.cartographicToCartesian(y,_y),c(I)&&!u.equalsEpsilon(I,p,w.EPSILON7)&&!u.equalsEpsilon(I,g,w.EPSILON7)&&x.push(u.clone(I)))));let S=x.length,P=new Array(S);for(f=0;f<S;f++){let de=ae.fromCartesian(x[f],i);de.height=0,P[f]=de}if(P=Bi(P,ae.equalsEpsilon),S=P.length,S<2)return;let D=[],Q=[],v=[],d=[],B=Qie,T=Rie,R=vie,L=Pie,G=Mie,q=P[0],z=P[1],K=P[S-1];for(B=Zr(i,K,s,B),L=Zr(i,z,s,L),T=Zr(i,q,s,T),R=Zr(i,q,A,R),n?G=oS(B,T,R,L,G):G=cS(q,z,A,i,G),u.pack(G,Q,0),u.pack(T,v,0),u.pack(R,d,0),D.push(q.latitude),D.push(q.longitude),nS(q,z,s,A,o,r,i,Q,v,d,D),f=1;f<S-1;++f){B=u.clone(T,B),T=u.clone(L,T);let de=P[f];Zr(i,de,A,R),Zr(i,P[f+1],s,L),oS(B,T,R,L,G),l=Q.length,u.pack(G,Q,l),u.pack(T,v,l),u.pack(R,d,l),D.push(de.latitude),D.push(de.longitude),nS(P[f],P[f+1],s,A,o,r,i,Q,v,d,D)}let ie=P[S-1],le=P[S-2];if(T=Zr(i,ie,s,T),R=Zr(i,ie,A,R),n){let de=P[0];B=Zr(i,le,s,B),L=Zr(i,de,s,L),G=oS(B,T,R,L,G)}else G=cS(le,ie,A,i,G);if(l=Q.length,u.pack(G,Q,l),u.pack(T,v,l),u.pack(R,d,l),D.push(ie.latitude),D.push(ie.longitude),n){for(nS(ie,q,s,A,o,r,i,Q,v,d,D),l=Q.length,f=0;f<3;++f)Q[l+f]=Q[f],v[l+f]=v[f],d[l+f]=d[f];D.push(q.latitude),D.push(q.longitude)}return aoe(n,a,v,d,Q,D,t)};var Oie=new u,Lie=new J,Nie=new qe;function Ck(e,t,n,i){let o=El(n,t,Oie),r=u.dot(o,e);if(r>Rk||r<uk){let a=El(i,n,Mk),s=r<uk?w.PI_OVER_TWO:-w.PI_OVER_TWO,A=qe.fromAxisAngle(a,s,Nie),l=J.fromQuaternion(A,Lie);return J.multiplyByVector(l,e,e),!0}return!1}var _k=new ae,Fie=new u,Ek=new u;function fC(e,t,n,i,o){let r=ae.toCartesian(t,e._ellipsoid,Fie),a=u.add(r,n,Ek),s=!1,A=e._ellipsoid,l=A.cartesianToCartographic(a,_k);Math.abs(t.longitude-l.longitude)>w.PI_OVER_TWO&&(s=!0,a=u.subtract(r,n,Ek),l=A.cartesianToCartographic(a,_k)),l.height=0;let f=e.project(l,o);return o=u.subtract(f,i,o),o.z=0,o=u.normalize(o,o),s&&u.negate(o,o),o}var kie=new u,Ik=new u;function yk(e,t,n,i,o,r){let a=u.subtract(t,e,kie);u.normalize(a,a);let s=n-vk,A=u.multiplyByScalar(a,s,Ik);u.add(e,A,o);let l=i-Pk;A=u.multiplyByScalar(a,l,Ik),u.add(t,A,r)}var Uie=new u;function Iy(e,t){let n=Ft.getPointDistance(yy,e),i=Ft.getPointDistance(yy,t),o=Uie;w.equalsEpsilon(n,0,w.EPSILON2)?(o=El(t,e,o),u.multiplyByScalar(o,w.EPSILON2,o),u.add(e,o,e)):w.equalsEpsilon(i,0,w.EPSILON2)&&(o=El(e,t,o),u.multiplyByScalar(o,w.EPSILON2,o),u.add(t,o,t))}function Gie(e,t){let n=Math.abs(e.longitude),i=Math.abs(t.longitude);if(w.equalsEpsilon(n,w.PI,w.EPSILON11)){let o=w.sign(t.longitude);return e.longitude=o*(n-w.EPSILON11),1}else if(w.equalsEpsilon(i,w.PI,w.EPSILON11)){let o=w.sign(e.longitude);return t.longitude=o*(i-w.EPSILON11),2}return 0}var Ok=new ae,Lk=new ae,bk=new u,rS=new u,Bk=new u,xk=new u,zie=new u,Tk=new u,Hie=[Ok,Lk],Vie=new ce,jie=new u,Yie=new u,qie=new u,Wie=new u,Jie=new u,Kie=new u,aS=new u,sS=new u,Xie=new u,Zie=new u,$ie=new u,Sk=new u,eoe=new u,toe=new u,noe=new xn,ioe=new xn,wk=new u,ooe=new u,Dk=new u,roe=[new ee,new ee],Nk=[0,2,1,0,3,2,0,7,3,0,4,7,0,5,4,0,1,5,5,7,4,5,6,7,5,2,6,5,1,2,3,6,2,3,7,6],Qk=Nk.length;function aoe(e,t,n,i,o,r,a){let s,A,l=t._ellipsoid,f=n.length/3-1,h=f*8,m=h*4,p=f*36,g=h>65535?new Uint32Array(p):new Uint16Array(p),C=new Float64Array(h*3),_=new Float32Array(m),E=new Float32Array(m),I=new Float32Array(m),y=new Float32Array(m),b=new Float32Array(m),x,S,P,D;a&&(x=new Float32Array(m),S=new Float32Array(m),P=new Float32Array(m),D=new Float32Array(h*2));let Q=r.length/2,v=0,d=Ok;d.height=0;let B=Lk;B.height=0;let T=bk,R=rS;if(a)for(A=0,s=1;s<Q;s++)d.latitude=r[A],d.longitude=r[A+1],B.latitude=r[A+2],B.longitude=r[A+3],T=t.project(d,T),R=t.project(B,R),v+=u.distance(T,R),A+=2;let L=i.length/3;R=u.unpack(i,0,R);let G=0;for(A=3,s=1;s<L;s++)T=u.clone(R,T),R=u.unpack(i,A,R),G+=u.distance(T,R),A+=3;let q;A=3;let z=0,K=0,ie=0,le=0,de=!1,he=u.unpack(n,0,xk),Se=u.unpack(i,0,rS),be=u.unpack(o,0,Tk);if(e){let zt=u.unpack(n,n.length-6,Bk);Ck(be,zt,he,Se)&&(be=u.negate(be,be))}let _e=0,Ct=0,ft=0;for(s=0;s<f;s++){let zt=u.clone(he,Bk),ti=u.clone(Se,bk),Li=u.clone(be,zie);de&&(Li=u.negate(Li,Li)),he=u.unpack(n,A,xk),Se=u.unpack(i,A,rS),be=u.unpack(o,A,Tk),de=Ck(be,zt,he,Se),d.latitude=r[z],d.longitude=r[z+1],B.latitude=r[z+2],B.longitude=r[z+3];let Cn,yt,Un,sn;if(a){let Kn=Gie(d,B);Cn=t.project(d,Jie),yt=t.project(B,Kie);let dc=El(yt,Cn,wk);dc.y=Math.abs(dc.y),Un=aS,sn=sS,Kn===0||u.dot(dc,u.UNIT_Y)>Rk?(Un=fC(t,d,Li,Cn,aS),sn=fC(t,B,be,yt,sS)):Kn===1?(sn=fC(t,B,be,yt,sS),Un.x=0,Un.y=w.sign(d.longitude-Math.abs(B.longitude)),Un.z=0):(Un=fC(t,d,Li,Cn,aS),sn.x=0,sn.y=w.sign(d.longitude-B.longitude),sn.z=0)}let ri=u.distance(ti,Se),ha=xn.fromCartesian(zt,noe),nA=u.subtract(he,zt,Xie),$A=u.normalize(nA,Sk),ma=u.subtract(ti,zt,Zie);ma=u.normalize(ma,ma);let vo=u.cross($A,ma,Sk);vo=u.normalize(vo,vo);let Cr=u.cross(ma,Li,eoe);Cr=u.normalize(Cr,Cr);let _s=u.subtract(Se,he,$ie);_s=u.normalize(_s,_s);let iA=u.cross(be,_s,toe);iA=u.normalize(iA,iA);let sd=ri/G,el=_e/G,bf=0,Es,ka,fo,uc=0,Bf=0;if(a){bf=u.distance(Cn,yt),Es=xn.fromCartesian(Cn,ioe),ka=u.subtract(yt,Cn,wk),fo=u.normalize(ka,ooe);let Kn=fo.x;fo.x=fo.y,fo.y=-Kn,uc=bf/v,Bf=Ct/v}for(q=0;q<8;q++){let Kn=le+q*4,dc=K+q*2,Ga=Kn+3,oA=q<4?1:-1,rA=q===2||q===3||q===6||q===7?1:-1;u.pack(ha.high,_,Kn),_[Ga]=nA.x,u.pack(ha.low,E,Kn),E[Ga]=nA.y,u.pack(Cr,I,Kn),I[Ga]=nA.z,u.pack(iA,y,Kn),y[Ga]=sd*oA,u.pack(vo,b,Kn);let ga=el*rA;ga===0&&rA<0&&(ga=9),b[Ga]=ga,a&&(x[Kn]=Es.high.x,x[Kn+1]=Es.high.y,x[Kn+2]=Es.low.x,x[Kn+3]=Es.low.y,P[Kn]=-Un.y,P[Kn+1]=Un.x,P[Kn+2]=sn.y,P[Kn+3]=-sn.x,S[Kn]=ka.x,S[Kn+1]=ka.y,S[Kn+2]=fo.x,S[Kn+3]=fo.y,D[dc]=uc*oA,ga=Bf*rA,ga===0&&rA<0&&(ga=9),D[dc+1]=ga)}let Vr=qie,pa=Wie,_r=jie,Er=Yie,xf=ce.fromCartographicArray(Hie,Vie),Ua=On.getMinimumMaximumHeights(xf,l),Tf=Ua.minimumTerrainHeight,Sf=Ua.maximumTerrainHeight;ft+=Math.abs(Tf),ft+=Math.abs(Sf),yk(zt,ti,Tf,Sf,Vr,_r),yk(he,Se,Tf,Sf,pa,Er);let _n=u.multiplyByScalar(vo,w.EPSILON5,Dk);u.add(Vr,_n,Vr),u.add(pa,_n,pa),u.add(_r,_n,_r),u.add(Er,_n,Er),Iy(Vr,pa),Iy(_r,Er),u.pack(Vr,C,ie),u.pack(pa,C,ie+3),u.pack(Er,C,ie+6),u.pack(_r,C,ie+9),_n=u.multiplyByScalar(vo,-2*w.EPSILON5,Dk),u.add(Vr,_n,Vr),u.add(pa,_n,pa),u.add(_r,_n,_r),u.add(Er,_n,Er),Iy(Vr,pa),Iy(_r,Er),u.pack(Vr,C,ie+12),u.pack(pa,C,ie+15),u.pack(Er,C,ie+18),u.pack(_r,C,ie+21),z+=2,A+=3,K+=16,ie+=24,le+=32,_e+=ri,Ct+=bf}A=0;let At=0;for(s=0;s<f;s++){for(q=0;q<Qk;q++)g[A+q]=Nk[q]+At;At+=8,A+=Qk}let at=roe;ee.fromVertices(n,u.ZERO,3,at[0]),ee.fromVertices(i,u.ZERO,3,at[1]);let Xe=ee.fromBoundingSpheres(at);Xe.radius+=ft/(f*2);let wt={position:new ue({componentDatatype:N.DOUBLE,componentsPerAttribute:3,normalize:!1,values:C}),startHiAndForwardOffsetX:jf(_),startLoAndForwardOffsetY:jf(E),startNormalAndForwardOffsetZ:jf(I),endNormalAndTextureCoordinateNormalizationX:jf(y),rightNormalAndTextureCoordinateNormalizationY:jf(b)};return a&&(wt.startHiLo2D=jf(x),wt.offsetAndRight2D=jf(S),wt.startEndNormals2D=jf(P),wt.texcoordNormalization2D=new ue({componentDatatype:N.FLOAT,componentsPerAttribute:2,normalize:!1,values:D})),new ze({attributes:wt,indices:g,boundingSphere:Xe})}function jf(e){return new ue({componentDatatype:N.FLOAT,componentsPerAttribute:4,normalize:!1,values:e})}Yf._projectNormal=fC;var by=Yf;var Fk=`in vec4 v_startPlaneNormalEcAndHalfWidth;
in vec4 v_endPlaneNormalEcAndBatchId;
in vec4 v_rightPlaneEC; // Technically can compute distance for this here
in vec4 v_endEcAndStartEcX;
in vec4 v_texcoordNormalizationAndStartEcYZ;

#ifdef PER_INSTANCE_COLOR
in vec4 v_color;
#endif

void main(void)
{
    float logDepthOrDepth = czm_branchFreeTernary(czm_sceneMode == czm_sceneMode2D, gl_FragCoord.z, czm_unpackDepth(texture(czm_globeDepthTexture, gl_FragCoord.xy / czm_viewport.zw)));
    vec3 ecStart = vec3(v_endEcAndStartEcX.w, v_texcoordNormalizationAndStartEcYZ.zw);

    // Discard for sky
    if (logDepthOrDepth == 0.0) {
#ifdef DEBUG_SHOW_VOLUME
        out_FragColor = vec4(1.0, 0.0, 0.0, 0.5);
        return;
#else // DEBUG_SHOW_VOLUME
        discard;
#endif // DEBUG_SHOW_VOLUME
    }

    vec4 eyeCoordinate = czm_windowToEyeCoordinates(gl_FragCoord.xy, logDepthOrDepth);
    eyeCoordinate /= eyeCoordinate.w;

    float halfMaxWidth = v_startPlaneNormalEcAndHalfWidth.w * czm_metersPerPixel(eyeCoordinate);
    // Check distance of the eye coordinate against the right-facing plane
    float widthwiseDistance = czm_planeDistance(v_rightPlaneEC, eyeCoordinate.xyz);

    // Check eye coordinate against the mitering planes
    float distanceFromStart = czm_planeDistance(v_startPlaneNormalEcAndHalfWidth.xyz, -dot(ecStart, v_startPlaneNormalEcAndHalfWidth.xyz), eyeCoordinate.xyz);
    float distanceFromEnd = czm_planeDistance(v_endPlaneNormalEcAndBatchId.xyz, -dot(v_endEcAndStartEcX.xyz, v_endPlaneNormalEcAndBatchId.xyz), eyeCoordinate.xyz);

    if (abs(widthwiseDistance) > halfMaxWidth || distanceFromStart < 0.0 || distanceFromEnd < 0.0) {
#ifdef DEBUG_SHOW_VOLUME
        out_FragColor = vec4(1.0, 0.0, 0.0, 0.5);
        return;
#else // DEBUG_SHOW_VOLUME
        discard;
#endif // DEBUG_SHOW_VOLUME
    }

    // Check distance of the eye coordinate against start and end planes with normals in the right plane.
    // For computing unskewed lengthwise texture coordinate.
    // Can also be used for clipping extremely pointy miters, but in practice unnecessary because of miter breaking.

    // aligned plane: cross the right plane normal with miter plane normal, then cross the result with right again to point it more "forward"
    vec3 alignedPlaneNormal;

    // start aligned plane
    alignedPlaneNormal = cross(v_rightPlaneEC.xyz, v_startPlaneNormalEcAndHalfWidth.xyz);
    alignedPlaneNormal = normalize(cross(alignedPlaneNormal, v_rightPlaneEC.xyz));
    distanceFromStart = czm_planeDistance(alignedPlaneNormal, -dot(alignedPlaneNormal, ecStart), eyeCoordinate.xyz);

    // end aligned plane
    alignedPlaneNormal = cross(v_rightPlaneEC.xyz, v_endPlaneNormalEcAndBatchId.xyz);
    alignedPlaneNormal = normalize(cross(alignedPlaneNormal, v_rightPlaneEC.xyz));
    distanceFromEnd = czm_planeDistance(alignedPlaneNormal, -dot(alignedPlaneNormal, v_endEcAndStartEcX.xyz), eyeCoordinate.xyz);

#ifdef PER_INSTANCE_COLOR
    out_FragColor = czm_gammaCorrect(v_color);
#else // PER_INSTANCE_COLOR
    // Clamp - distance to aligned planes may be negative due to mitering,
    // so fragment texture coordinate might be out-of-bounds.
    float s = clamp(distanceFromStart / (distanceFromStart + distanceFromEnd), 0.0, 1.0);
    s = (s * v_texcoordNormalizationAndStartEcYZ.x) + v_texcoordNormalizationAndStartEcYZ.y;
    float t = (widthwiseDistance + halfMaxWidth) / (2.0 * halfMaxWidth);

    czm_materialInput materialInput;

    materialInput.s = s;
    materialInput.st = vec2(s, t);
    materialInput.str = vec3(s, t, 0.0);

    czm_material material = czm_getMaterial(materialInput);
    out_FragColor = vec4(material.diffuse + material.emission, material.alpha);
#endif // PER_INSTANCE_COLOR

    // Premultiply alpha. Required for classification primitives on translucent globe.
    out_FragColor.rgb *= out_FragColor.a;

    czm_writeDepthClamp();
}
`;var kk=`in vec3 v_forwardDirectionEC;
in vec3 v_texcoordNormalizationAndHalfWidth;
in float v_batchId;

#ifdef PER_INSTANCE_COLOR
in vec4 v_color;
#else
in vec2 v_alignedPlaneDistances;
in float v_texcoordT;
#endif

float rayPlaneDistanceUnsafe(vec3 origin, vec3 direction, vec3 planeNormal, float planeDistance) {
    // We don't expect the ray to ever be parallel to the plane
    return (-planeDistance - dot(planeNormal, origin)) / dot(planeNormal, direction);
}

void main(void)
{
    vec4 eyeCoordinate = gl_FragCoord;
    eyeCoordinate /= eyeCoordinate.w;

#ifdef PER_INSTANCE_COLOR
    out_FragColor = czm_gammaCorrect(v_color);
#else // PER_INSTANCE_COLOR
    // Use distances for planes aligned with segment to prevent skew in dashing
    float distanceFromStart = rayPlaneDistanceUnsafe(eyeCoordinate.xyz, -v_forwardDirectionEC, v_forwardDirectionEC.xyz, v_alignedPlaneDistances.x);
    float distanceFromEnd = rayPlaneDistanceUnsafe(eyeCoordinate.xyz, v_forwardDirectionEC, -v_forwardDirectionEC.xyz, v_alignedPlaneDistances.y);

    // Clamp - distance to aligned planes may be negative due to mitering
    distanceFromStart = max(0.0, distanceFromStart);
    distanceFromEnd = max(0.0, distanceFromEnd);

    float s = distanceFromStart / (distanceFromStart + distanceFromEnd);
    s = (s * v_texcoordNormalizationAndHalfWidth.x) + v_texcoordNormalizationAndHalfWidth.y;

    czm_materialInput materialInput;

    materialInput.s = s;
    materialInput.st = vec2(s, v_texcoordT);
    materialInput.str = vec3(s, v_texcoordT, 0.0);

    czm_material material = czm_getMaterial(materialInput);
    out_FragColor = vec4(material.diffuse + material.emission, material.alpha);
#endif // PER_INSTANCE_COLOR
}
`;var Uk=`in vec3 position3DHigh;
in vec3 position3DLow;

in vec4 startHiAndForwardOffsetX;
in vec4 startLoAndForwardOffsetY;
in vec4 startNormalAndForwardOffsetZ;
in vec4 endNormalAndTextureCoordinateNormalizationX;
in vec4 rightNormalAndTextureCoordinateNormalizationY;
in vec4 startHiLo2D;
in vec4 offsetAndRight2D;
in vec4 startEndNormals2D;
in vec2 texcoordNormalization2D;

in float batchId;

out vec3 v_forwardDirectionEC;
out vec3 v_texcoordNormalizationAndHalfWidth;
out float v_batchId;

// For materials
#ifdef WIDTH_VARYING
out float v_width;
#endif
#ifdef ANGLE_VARYING
out float v_polylineAngle;
#endif

#ifdef PER_INSTANCE_COLOR
out vec4 v_color;
#else
out vec2 v_alignedPlaneDistances;
out float v_texcoordT;
#endif

// Morphing planes using SLERP or NLERP doesn't seem to work, so instead draw the material directly on the shadow volume.
// Morph views are from very far away and aren't meant to be used precisely, so this should be sufficient.
void main()
{
    v_batchId = batchId;

    // Start position
    vec4 posRelativeToEye2D = czm_translateRelativeToEye(vec3(0.0, startHiLo2D.xy), vec3(0.0, startHiLo2D.zw));
    vec4 posRelativeToEye3D = czm_translateRelativeToEye(startHiAndForwardOffsetX.xyz, startLoAndForwardOffsetY.xyz);
    vec4 posRelativeToEye = czm_columbusViewMorph(posRelativeToEye2D, posRelativeToEye3D, czm_morphTime);
    vec3 posEc2D = (czm_modelViewRelativeToEye * posRelativeToEye2D).xyz;
    vec3 posEc3D = (czm_modelViewRelativeToEye * posRelativeToEye3D).xyz;
    vec3 startEC = (czm_modelViewRelativeToEye * posRelativeToEye).xyz;

    // Start plane
    vec4 startPlane2D;
    vec4 startPlane3D;
    startPlane2D.xyz = czm_normal * vec3(0.0, startEndNormals2D.xy);
    startPlane3D.xyz = czm_normal * startNormalAndForwardOffsetZ.xyz;
    startPlane2D.w = -dot(startPlane2D.xyz, posEc2D);
    startPlane3D.w = -dot(startPlane3D.xyz, posEc3D);

    // Right plane
    vec4 rightPlane2D;
    vec4 rightPlane3D;
    rightPlane2D.xyz = czm_normal * vec3(0.0, offsetAndRight2D.zw);
    rightPlane3D.xyz = czm_normal * rightNormalAndTextureCoordinateNormalizationY.xyz;
    rightPlane2D.w = -dot(rightPlane2D.xyz, posEc2D);
    rightPlane3D.w = -dot(rightPlane3D.xyz, posEc3D);

    // End position
    posRelativeToEye2D = posRelativeToEye2D + vec4(0.0, offsetAndRight2D.xy, 0.0);
    posRelativeToEye3D = posRelativeToEye3D + vec4(startHiAndForwardOffsetX.w, startLoAndForwardOffsetY.w, startNormalAndForwardOffsetZ.w, 0.0);
    posRelativeToEye = czm_columbusViewMorph(posRelativeToEye2D, posRelativeToEye3D, czm_morphTime);
    posEc2D = (czm_modelViewRelativeToEye * posRelativeToEye2D).xyz;
    posEc3D = (czm_modelViewRelativeToEye * posRelativeToEye3D).xyz;
    vec3 endEC = (czm_modelViewRelativeToEye * posRelativeToEye).xyz;
    vec3 forwardEc3D = czm_normal * normalize(vec3(startHiAndForwardOffsetX.w, startLoAndForwardOffsetY.w, startNormalAndForwardOffsetZ.w));
    vec3 forwardEc2D = czm_normal * normalize(vec3(0.0, offsetAndRight2D.xy));

    // End plane
    vec4 endPlane2D;
    vec4 endPlane3D;
    endPlane2D.xyz = czm_normal * vec3(0.0, startEndNormals2D.zw);
    endPlane3D.xyz = czm_normal * endNormalAndTextureCoordinateNormalizationX.xyz;
    endPlane2D.w = -dot(endPlane2D.xyz, posEc2D);
    endPlane3D.w = -dot(endPlane3D.xyz, posEc3D);

    // Forward direction
    v_forwardDirectionEC = normalize(endEC - startEC);

    vec2 cleanTexcoordNormalization2D;
    cleanTexcoordNormalization2D.x = abs(texcoordNormalization2D.x);
    cleanTexcoordNormalization2D.y = czm_branchFreeTernary(texcoordNormalization2D.y > 1.0, 0.0, abs(texcoordNormalization2D.y));
    vec2 cleanTexcoordNormalization3D;
    cleanTexcoordNormalization3D.x = abs(endNormalAndTextureCoordinateNormalizationX.w);
    cleanTexcoordNormalization3D.y = rightNormalAndTextureCoordinateNormalizationY.w;
    cleanTexcoordNormalization3D.y = czm_branchFreeTernary(cleanTexcoordNormalization3D.y > 1.0, 0.0, abs(cleanTexcoordNormalization3D.y));

    v_texcoordNormalizationAndHalfWidth.xy = mix(cleanTexcoordNormalization2D, cleanTexcoordNormalization3D, czm_morphTime);

#ifdef PER_INSTANCE_COLOR
    v_color = czm_batchTable_color(batchId);
#else // PER_INSTANCE_COLOR
    // For computing texture coordinates

    v_alignedPlaneDistances.x = -dot(v_forwardDirectionEC, startEC);
    v_alignedPlaneDistances.y = -dot(-v_forwardDirectionEC, endEC);
#endif // PER_INSTANCE_COLOR

#ifdef WIDTH_VARYING
    float width = czm_batchTable_width(batchId);
    float halfWidth = width * 0.5;
    v_width = width;
    v_texcoordNormalizationAndHalfWidth.z = halfWidth;
#else
    float halfWidth = 0.5 * czm_batchTable_width(batchId);
    v_texcoordNormalizationAndHalfWidth.z = halfWidth;
#endif

    // Compute a normal along which to "push" the position out, extending the miter depending on view distance.
    // Position has already been "pushed" by unit length along miter normal, and miter normals are encoded in the planes.
    // Decode the normal to use at this specific vertex, push the position back, and then push to where it needs to be.
    // Since this is morphing, compute both 3D and 2D positions and then blend.

    // ****** 3D ******
    // Check distance to the end plane and start plane, pick the plane that is closer
    vec4 positionEc3D = czm_modelViewRelativeToEye * czm_translateRelativeToEye(position3DHigh, position3DLow); // w = 1.0, see czm_computePosition
    float absStartPlaneDistance = abs(czm_planeDistance(startPlane3D, positionEc3D.xyz));
    float absEndPlaneDistance = abs(czm_planeDistance(endPlane3D, positionEc3D.xyz));
    vec3 planeDirection = czm_branchFreeTernary(absStartPlaneDistance < absEndPlaneDistance, startPlane3D.xyz, endPlane3D.xyz);
    vec3 upOrDown = normalize(cross(rightPlane3D.xyz, planeDirection)); // Points "up" for start plane, "down" at end plane.
    vec3 normalEC = normalize(cross(planeDirection, upOrDown));         // In practice, the opposite seems to work too.

    // Nudge the top vertex upwards to prevent flickering
    vec3 geodeticSurfaceNormal = normalize(cross(normalEC, forwardEc3D));
    geodeticSurfaceNormal *= float(0.0 <= rightNormalAndTextureCoordinateNormalizationY.w && rightNormalAndTextureCoordinateNormalizationY.w <= 1.0);
    geodeticSurfaceNormal *= MAX_TERRAIN_HEIGHT;
    positionEc3D.xyz += geodeticSurfaceNormal;

    // Determine if this vertex is on the "left" or "right"
    normalEC *= sign(endNormalAndTextureCoordinateNormalizationX.w);

    // A "perfect" implementation would push along normals according to the angle against forward.
    // In practice, just pushing the normal out by halfWidth is sufficient for morph views.
    positionEc3D.xyz += halfWidth * max(0.0, czm_metersPerPixel(positionEc3D)) * normalEC; // prevent artifacts when czm_metersPerPixel is negative (behind camera)

    // ****** 2D ******
    // Check distance to the end plane and start plane, pick the plane that is closer
    vec4 positionEc2D = czm_modelViewRelativeToEye * czm_translateRelativeToEye(position2DHigh.zxy, position2DLow.zxy); // w = 1.0, see czm_computePosition
    absStartPlaneDistance = abs(czm_planeDistance(startPlane2D, positionEc2D.xyz));
    absEndPlaneDistance = abs(czm_planeDistance(endPlane2D, positionEc2D.xyz));
    planeDirection = czm_branchFreeTernary(absStartPlaneDistance < absEndPlaneDistance, startPlane2D.xyz, endPlane2D.xyz);
    upOrDown = normalize(cross(rightPlane2D.xyz, planeDirection)); // Points "up" for start plane, "down" at end plane.
    normalEC = normalize(cross(planeDirection, upOrDown));         // In practice, the opposite seems to work too.

    // Nudge the top vertex upwards to prevent flickering
    geodeticSurfaceNormal = normalize(cross(normalEC, forwardEc2D));
    geodeticSurfaceNormal *= float(0.0 <= texcoordNormalization2D.y && texcoordNormalization2D.y <= 1.0);
    geodeticSurfaceNormal *= MAX_TERRAIN_HEIGHT;
    positionEc2D.xyz += geodeticSurfaceNormal;

    // Determine if this vertex is on the "left" or "right"
    normalEC *= sign(texcoordNormalization2D.x);
#ifndef PER_INSTANCE_COLOR
    // Use vertex's sidedness to compute its texture coordinate.
    v_texcoordT = clamp(sign(texcoordNormalization2D.x), 0.0, 1.0);
#endif

    // A "perfect" implementation would push along normals according to the angle against forward.
    // In practice, just pushing the normal out by halfWidth is sufficient for morph views.
    positionEc2D.xyz += halfWidth * max(0.0, czm_metersPerPixel(positionEc2D)) * normalEC; // prevent artifacts when czm_metersPerPixel is negative (behind camera)

    // Blend for actual position
    gl_Position = czm_projection * mix(positionEc2D, positionEc3D, czm_morphTime);

#ifdef ANGLE_VARYING
    // Approximate relative screen space direction of the line.
    vec2 approxLineDirection = normalize(vec2(v_forwardDirectionEC.x, -v_forwardDirectionEC.y));
    approxLineDirection.y = czm_branchFreeTernary(approxLineDirection.x == 0.0 && approxLineDirection.y == 0.0, -1.0, approxLineDirection.y);
    v_polylineAngle = czm_fastApproximateAtan(approxLineDirection.x, approxLineDirection.y);
#endif
}
`;var Gk=`in vec3 position3DHigh;
in vec3 position3DLow;

// In 2D and in 3D, texture coordinate normalization component signs encodes:
// * X sign - sidedness relative to right plane
// * Y sign - is negative OR magnitude is greater than 1.0 if vertex is on bottom of volume
#ifndef COLUMBUS_VIEW_2D
in vec4 startHiAndForwardOffsetX;
in vec4 startLoAndForwardOffsetY;
in vec4 startNormalAndForwardOffsetZ;
in vec4 endNormalAndTextureCoordinateNormalizationX;
in vec4 rightNormalAndTextureCoordinateNormalizationY;
#else
in vec4 startHiLo2D;
in vec4 offsetAndRight2D;
in vec4 startEndNormals2D;
in vec2 texcoordNormalization2D;
#endif

in float batchId;

out vec4 v_startPlaneNormalEcAndHalfWidth;
out vec4 v_endPlaneNormalEcAndBatchId;
out vec4 v_rightPlaneEC;
out vec4 v_endEcAndStartEcX;
out vec4 v_texcoordNormalizationAndStartEcYZ;

// For materials
#ifdef WIDTH_VARYING
out float v_width;
#endif
#ifdef ANGLE_VARYING
out float v_polylineAngle;
#endif

#ifdef PER_INSTANCE_COLOR
out vec4 v_color;
#endif

void main()
{
#ifdef COLUMBUS_VIEW_2D
    vec3 ecStart = (czm_modelViewRelativeToEye * czm_translateRelativeToEye(vec3(0.0, startHiLo2D.xy), vec3(0.0, startHiLo2D.zw))).xyz;

    vec3 forwardDirectionEC = czm_normal * vec3(0.0, offsetAndRight2D.xy);
    vec3 ecEnd = forwardDirectionEC + ecStart;
    forwardDirectionEC = normalize(forwardDirectionEC);

    // Right plane
    v_rightPlaneEC.xyz = czm_normal * vec3(0.0, offsetAndRight2D.zw);
    v_rightPlaneEC.w = -dot(v_rightPlaneEC.xyz, ecStart);

    // start plane
    vec4 startPlaneEC;
    startPlaneEC.xyz =  czm_normal * vec3(0.0, startEndNormals2D.xy);
    startPlaneEC.w = -dot(startPlaneEC.xyz, ecStart);

    // end plane
    vec4 endPlaneEC;
    endPlaneEC.xyz =  czm_normal * vec3(0.0, startEndNormals2D.zw);
    endPlaneEC.w = -dot(endPlaneEC.xyz, ecEnd);

    v_texcoordNormalizationAndStartEcYZ.x = abs(texcoordNormalization2D.x);
    v_texcoordNormalizationAndStartEcYZ.y = texcoordNormalization2D.y;

#else // COLUMBUS_VIEW_2D
    vec3 ecStart = (czm_modelViewRelativeToEye * czm_translateRelativeToEye(startHiAndForwardOffsetX.xyz, startLoAndForwardOffsetY.xyz)).xyz;
    vec3 offset = czm_normal * vec3(startHiAndForwardOffsetX.w, startLoAndForwardOffsetY.w, startNormalAndForwardOffsetZ.w);
    vec3 ecEnd = ecStart + offset;

    vec3 forwardDirectionEC = normalize(offset);

    // start plane
    vec4 startPlaneEC;
    startPlaneEC.xyz = czm_normal * startNormalAndForwardOffsetZ.xyz;
    startPlaneEC.w = -dot(startPlaneEC.xyz, ecStart);

    // end plane
    vec4 endPlaneEC;
    endPlaneEC.xyz = czm_normal * endNormalAndTextureCoordinateNormalizationX.xyz;
    endPlaneEC.w = -dot(endPlaneEC.xyz, ecEnd);

    // Right plane
    v_rightPlaneEC.xyz = czm_normal * rightNormalAndTextureCoordinateNormalizationY.xyz;
    v_rightPlaneEC.w = -dot(v_rightPlaneEC.xyz, ecStart);

    v_texcoordNormalizationAndStartEcYZ.x = abs(endNormalAndTextureCoordinateNormalizationX.w);
    v_texcoordNormalizationAndStartEcYZ.y = rightNormalAndTextureCoordinateNormalizationY.w;

#endif // COLUMBUS_VIEW_2D

    v_endEcAndStartEcX.xyz = ecEnd;
    v_endEcAndStartEcX.w = ecStart.x;
    v_texcoordNormalizationAndStartEcYZ.zw = ecStart.yz;

#ifdef PER_INSTANCE_COLOR
    v_color = czm_batchTable_color(batchId);
#endif // PER_INSTANCE_COLOR

    // Compute a normal along which to "push" the position out, extending the miter depending on view distance.
    // Position has already been "pushed" by unit length along miter normal, and miter normals are encoded in the planes.
    // Decode the normal to use at this specific vertex, push the position back, and then push to where it needs to be.
    vec4 positionRelativeToEye = czm_computePosition();

    // Check distance to the end plane and start plane, pick the plane that is closer
    vec4 positionEC = czm_modelViewRelativeToEye * positionRelativeToEye; // w = 1.0, see czm_computePosition
    float absStartPlaneDistance = abs(czm_planeDistance(startPlaneEC, positionEC.xyz));
    float absEndPlaneDistance = abs(czm_planeDistance(endPlaneEC, positionEC.xyz));
    vec3 planeDirection = czm_branchFreeTernary(absStartPlaneDistance < absEndPlaneDistance, startPlaneEC.xyz, endPlaneEC.xyz);
    vec3 upOrDown = normalize(cross(v_rightPlaneEC.xyz, planeDirection)); // Points "up" for start plane, "down" at end plane.
    vec3 normalEC = normalize(cross(planeDirection, upOrDown));           // In practice, the opposite seems to work too.

    // Extrude bottom vertices downward for far view distances, like for GroundPrimitives
    upOrDown = cross(forwardDirectionEC, normalEC);
    upOrDown = float(czm_sceneMode == czm_sceneMode3D) * upOrDown;
    upOrDown = float(v_texcoordNormalizationAndStartEcYZ.y > 1.0 || v_texcoordNormalizationAndStartEcYZ.y < 0.0) * upOrDown;
    upOrDown = min(GLOBE_MINIMUM_ALTITUDE, czm_geometricToleranceOverMeter * length(positionRelativeToEye.xyz)) * upOrDown;
    positionEC.xyz += upOrDown;

    v_texcoordNormalizationAndStartEcYZ.y = czm_branchFreeTernary(v_texcoordNormalizationAndStartEcYZ.y > 1.0, 0.0, abs(v_texcoordNormalizationAndStartEcYZ.y));

    // Determine distance along normalEC to push for a volume of appropriate width.
    // Make volumes about double pixel width for a conservative fit - in practice the
    // extra cost here is minimal compared to the loose volume heights.
    //
    // N = normalEC (guaranteed "right-facing")
    // R = rightEC
    // p = angle between N and R
    // w = distance to push along R if R == N
    // d = distance to push along N
    //
    //   N   R
    //  {  p| }      * cos(p) = dot(N, R) = w / d
    //  d  |  |w    * d = w / dot(N, R)
    //    { | }
    //       o---------- polyline segment ---->
    //
    float width = czm_batchTable_width(batchId);
#ifdef WIDTH_VARYING
    v_width = width;
#endif

    v_startPlaneNormalEcAndHalfWidth.xyz = startPlaneEC.xyz;
    v_startPlaneNormalEcAndHalfWidth.w = width * 0.5;

    v_endPlaneNormalEcAndBatchId.xyz = endPlaneEC.xyz;
    v_endPlaneNormalEcAndBatchId.w = batchId;

    width = width * max(0.0, czm_metersPerPixel(positionEC)); // width = distance to push along R
    width = width / dot(normalEC, v_rightPlaneEC.xyz); // width = distance to push along N

    // Determine if this vertex is on the "left" or "right"
#ifdef COLUMBUS_VIEW_2D
        normalEC *= sign(texcoordNormalization2D.x);
#else
        normalEC *= sign(endNormalAndTextureCoordinateNormalizationX.w);
#endif

    positionEC.xyz += width * normalEC;
    gl_Position = czm_depthClamp(czm_projection * positionEC);

#ifdef ANGLE_VARYING
    // Approximate relative screen space direction of the line.
    vec2 approxLineDirection = normalize(vec2(forwardDirectionEC.x, -forwardDirectionEC.y));
    approxLineDirection.y = czm_branchFreeTernary(approxLineDirection.x == 0.0 && approxLineDirection.y == 0.0, -1.0, approxLineDirection.y);
    v_polylineAngle = czm_fastApproximateAtan(approxLineDirection.x, approxLineDirection.y);
#endif
}
`;var zk=`in vec3 position3DHigh;
in vec3 position3DLow;
in vec3 prevPosition3DHigh;
in vec3 prevPosition3DLow;
in vec3 nextPosition3DHigh;
in vec3 nextPosition3DLow;
in vec2 expandAndWidth;
in vec4 color;
in float batchId;

out vec4 v_color;

void main()
{
    float expandDir = expandAndWidth.x;
    float width = abs(expandAndWidth.y) + 0.5;
    bool usePrev = expandAndWidth.y < 0.0;

    vec4 p = czm_computePosition();
    vec4 prev = czm_computePrevPosition();
    vec4 next = czm_computeNextPosition();

    float angle;
    vec4 positionWC = getPolylineWindowCoordinates(p, prev, next, expandDir, width, usePrev, angle);
    gl_Position = czm_viewportOrthographic * positionWC;

    v_color = color;
}
`;var yA=`void clipLineSegmentToNearPlane(
    vec3 p0,
    vec3 p1,
    out vec4 positionWC,
    out bool clipped,
    out bool culledByNearPlane,
    out vec4 clippedPositionEC)
{
    culledByNearPlane = false;
    clipped = false;

    vec3 p0ToP1 = p1 - p0;
    float magnitude = length(p0ToP1);
    vec3 direction = normalize(p0ToP1);

    // Distance that p0 is behind the near plane. Negative means p0 is
    // in front of the near plane.
    float endPoint0Distance =  czm_currentFrustum.x + p0.z;

    // Camera looks down -Z.
    // When moving a point along +Z: LESS VISIBLE
    //   * Points in front of the camera move closer to the camera.
    //   * Points behind the camrea move farther away from the camera.
    // When moving a point along -Z: MORE VISIBLE
    //   * Points in front of the camera move farther away from the camera.
    //   * Points behind the camera move closer to the camera.

    // Positive denominator: -Z, becoming more visible
    // Negative denominator: +Z, becoming less visible
    // Nearly zero: parallel to near plane
    float denominator = -direction.z;

    if (endPoint0Distance > 0.0 && abs(denominator) < czm_epsilon7)
    {
        // p0 is behind the near plane and the line to p1 is nearly parallel to
        // the near plane, so cull the segment completely.
        culledByNearPlane = true;
    }
    else if (endPoint0Distance > 0.0)
    {
        // p0 is behind the near plane, and the line to p1 is moving distinctly
        // toward or away from it.

        // t = (-plane distance - dot(plane normal, ray origin)) / dot(plane normal, ray direction)
        float t = endPoint0Distance / denominator;
        if (t < 0.0 || t > magnitude)
        {
            // Near plane intersection is not between the two points.
            // We already confirmed p0 is behind the naer plane, so now
            // we know the entire segment is behind it.
            culledByNearPlane = true;
        }
        else
        {
            // Segment crosses the near plane, update p0 to lie exactly on it.
            p0 = p0 + t * direction;

            // Numerical noise might put us a bit on the wrong side of the near plane.
            // Don't let that happen.
            p0.z = min(p0.z, -czm_currentFrustum.x);

            clipped = true;
        }
    }

    clippedPositionEC = vec4(p0, 1.0);
    positionWC = czm_eyeToWindowCoordinates(clippedPositionEC);
}

vec4 getPolylineWindowCoordinatesEC(vec4 positionEC, vec4 prevEC, vec4 nextEC, float expandDirection, float width, bool usePrevious, out float angle)
{
    // expandDirection +1 is to the _left_ when looking from positionEC toward nextEC.

#ifdef POLYLINE_DASH
    // Compute the window coordinates of the points.
    vec4 positionWindow = czm_eyeToWindowCoordinates(positionEC);
    vec4 previousWindow = czm_eyeToWindowCoordinates(prevEC);
    vec4 nextWindow = czm_eyeToWindowCoordinates(nextEC);

    // Determine the relative screen space direction of the line.
    vec2 lineDir;
    if (usePrevious) {
        lineDir = normalize(positionWindow.xy - previousWindow.xy);
    }
    else {
        lineDir = normalize(nextWindow.xy - positionWindow.xy);
    }
    angle = atan(lineDir.x, lineDir.y) - 1.570796327; // precomputed atan(1,0)

    // Quantize the angle so it doesn't change rapidly between segments.
    angle = floor(angle / czm_piOverFour + 0.5) * czm_piOverFour;
#endif

    vec4 clippedPrevWC, clippedPrevEC;
    bool prevSegmentClipped, prevSegmentCulled;
    clipLineSegmentToNearPlane(prevEC.xyz, positionEC.xyz, clippedPrevWC, prevSegmentClipped, prevSegmentCulled, clippedPrevEC);

    vec4 clippedNextWC, clippedNextEC;
    bool nextSegmentClipped, nextSegmentCulled;
    clipLineSegmentToNearPlane(nextEC.xyz, positionEC.xyz, clippedNextWC, nextSegmentClipped, nextSegmentCulled, clippedNextEC);

    bool segmentClipped, segmentCulled;
    vec4 clippedPositionWC, clippedPositionEC;
    clipLineSegmentToNearPlane(positionEC.xyz, usePrevious ? prevEC.xyz : nextEC.xyz, clippedPositionWC, segmentClipped, segmentCulled, clippedPositionEC);

    if (segmentCulled)
    {
        return vec4(0.0, 0.0, 0.0, 1.0);
    }

    vec2 directionToPrevWC = normalize(clippedPrevWC.xy - clippedPositionWC.xy);
    vec2 directionToNextWC = normalize(clippedNextWC.xy - clippedPositionWC.xy);

    // If a segment was culled, we can't use the corresponding direction
    // computed above. We should never see both of these be true without
    // \`segmentCulled\` above also being true.
    if (prevSegmentCulled)
    {
        directionToPrevWC = -directionToNextWC;
    }
    else if (nextSegmentCulled)
    {
        directionToNextWC = -directionToPrevWC;
    }

    vec2 thisSegmentForwardWC, otherSegmentForwardWC;
    if (usePrevious)
    {
        thisSegmentForwardWC = -directionToPrevWC;
        otherSegmentForwardWC = directionToNextWC;
    }
    else
    {
        thisSegmentForwardWC = directionToNextWC;
        otherSegmentForwardWC =  -directionToPrevWC;
    }

    vec2 thisSegmentLeftWC = vec2(-thisSegmentForwardWC.y, thisSegmentForwardWC.x);

    vec2 leftWC = thisSegmentLeftWC;
    float expandWidth = width * 0.5;

    // When lines are split at the anti-meridian, the position may be at the
    // same location as the next or previous position, and we need to handle
    // that to avoid producing NaNs.
    if (!czm_equalsEpsilon(prevEC.xyz - positionEC.xyz, vec3(0.0), czm_epsilon1) && !czm_equalsEpsilon(nextEC.xyz - positionEC.xyz, vec3(0.0), czm_epsilon1))
    {
        vec2 otherSegmentLeftWC = vec2(-otherSegmentForwardWC.y, otherSegmentForwardWC.x);

        vec2 leftSumWC = thisSegmentLeftWC + otherSegmentLeftWC;
        float leftSumLength = length(leftSumWC);
        leftWC = leftSumLength < czm_epsilon6 ? thisSegmentLeftWC : (leftSumWC / leftSumLength);

        // The sine of the angle between the two vectors is given by the formula
        //         |a x b| = |a||b|sin(theta)
        // which is
        //     float sinAngle = length(cross(vec3(leftWC, 0.0), vec3(-thisSegmentForwardWC, 0.0)));
        // Because the z components of both vectors are zero, the x and y coordinate will be zero.
        // Therefore, the sine of the angle is just the z component of the cross product.
        vec2 u = -thisSegmentForwardWC;
        vec2 v = leftWC;
        float sinAngle = abs(u.x * v.y - u.y * v.x);
        expandWidth = clamp(expandWidth / sinAngle, 0.0, width * 2.0);
    }

    vec2 offset = leftWC * expandDirection * expandWidth * czm_pixelRatio;
    return vec4(clippedPositionWC.xy + offset, -clippedPositionWC.z, 1.0) * (czm_projection * clippedPositionEC).w;
}

vec4 getPolylineWindowCoordinates(vec4 position, vec4 previous, vec4 next, float expandDirection, float width, bool usePrevious, out float angle)
{
    vec4 positionEC = czm_modelViewRelativeToEye * position;
    vec4 prevEC = czm_modelViewRelativeToEye * previous;
    vec4 nextEC = czm_modelViewRelativeToEye * next;
    return getPolylineWindowCoordinatesEC(positionEC, prevEC, nextEC, expandDirection, width, usePrevious, angle);
}
`;var lS=`${yA}
${zk}`,soe=cy;$t.isInternetExplorer()||(lS=`#define CLIP_POLYLINE 
${lS}`);function Md(e){e=e??k.EMPTY_OBJECT;let t=e.translucent??!0,n=!1,i=Md.VERTEX_FORMAT;this.material=void 0,this.translucent=t,this._vertexShaderSource=e.vertexShaderSource??lS,this._fragmentShaderSource=e.fragmentShaderSource??soe,this._renderState=xo.getDefaultRenderState(t,n,e.renderState),this._closed=n,this._vertexFormat=i}Object.defineProperties(Md.prototype,{vertexShaderSource:{get:function(){return this._vertexShaderSource}},fragmentShaderSource:{get:function(){return this._fragmentShaderSource}},renderState:{get:function(){return this._renderState}},closed:{get:function(){return this._closed}},vertexFormat:{get:function(){return this._vertexFormat}}});Md.VERTEX_FORMAT=ge.POSITION_ONLY;Md.prototype.getFragmentShaderSource=xo.prototype.getFragmentShaderSource;Md.prototype.isTranslucent=xo.prototype.isTranslucent;Md.prototype.getRenderState=xo.prototype.getRenderState;var Sa=Md;var Hk=`in vec3 position3DHigh;
in vec3 position3DLow;
in vec3 prevPosition3DHigh;
in vec3 prevPosition3DLow;
in vec3 nextPosition3DHigh;
in vec3 nextPosition3DLow;
in vec2 expandAndWidth;
in vec2 st;
in float batchId;

out float v_width;
out vec2 v_st;
out float v_polylineAngle;

void main()
{
    float expandDir = expandAndWidth.x;
    float width = abs(expandAndWidth.y) + 0.5;
    bool usePrev = expandAndWidth.y < 0.0;

    vec4 p = czm_computePosition();
    vec4 prev = czm_computePrevPosition();
    vec4 next = czm_computeNextPosition();

    float angle;
    vec4 positionWC = getPolylineWindowCoordinates(p, prev, next, expandDir, width, usePrev, angle);
    gl_Position = czm_viewportOrthographic * positionWC;

    v_width = width;
    v_st.s = st.s;
    v_st.t = czm_writeNonPerspective(st.t, gl_Position.w);
    v_polylineAngle = angle;
}
`;var By=`#ifdef VECTOR_TILE
uniform vec4 u_highlightColor;
#endif

in vec2 v_st;

void main()
{
    czm_materialInput materialInput;

    vec2 st = v_st;
    st.t = czm_readNonPerspective(st.t, gl_FragCoord.w);

    materialInput.s = st.s;
    materialInput.st = st;
    materialInput.str = vec3(st, 0.0);

    czm_material material = czm_getMaterial(materialInput);
    out_FragColor = vec4(material.diffuse + material.emission, material.alpha);
#ifdef VECTOR_TILE
    out_FragColor *= u_highlightColor;
#endif

    czm_writeLogDepth();
}
`;var fS=`${yA}
${Hk}`,coe=By;$t.isInternetExplorer()||(fS=`#define CLIP_POLYLINE 
${fS}`);function Od(e){e=e??k.EMPTY_OBJECT;let t=e.translucent??!0,n=!1,i=Od.VERTEX_FORMAT;this.material=c(e.material)?e.material:Sr.fromType(Sr.ColorType),this.translucent=t,this._vertexShaderSource=e.vertexShaderSource??fS,this._fragmentShaderSource=e.fragmentShaderSource??coe,this._renderState=xo.getDefaultRenderState(t,n,e.renderState),this._closed=n,this._vertexFormat=i}Object.defineProperties(Od.prototype,{vertexShaderSource:{get:function(){let e=this._vertexShaderSource;return this.material.shaderSource.search(/in\s+float\s+v_polylineAngle;/g)!==-1&&(e=`#define POLYLINE_DASH
${e}`),e}},fragmentShaderSource:{get:function(){return this._fragmentShaderSource}},renderState:{get:function(){return this._renderState}},closed:{get:function(){return this._closed}},vertexFormat:{get:function(){return this._vertexFormat}}});Od.VERTEX_FORMAT=ge.POSITION_AND_ST;Od.prototype.getFragmentShaderSource=xo.prototype.getFragmentShaderSource;Od.prototype.isTranslucent=xo.prototype.isTranslucent;Od.prototype.getRenderState=xo.prototype.getRenderState;var $r=Od;function Il(e){e=e??k.EMPTY_OBJECT,this.geometryInstances=e.geometryInstances,this._hasPerInstanceColors=!0;let t=e.appearance;c(t)||(t=new $r),this.appearance=t,this.show=e.show??!0,this.classificationType=e.classificationType??on.BOTH,this.debugShowBoundingVolume=e.debugShowBoundingVolume??!1,this._debugShowShadowVolume=e.debugShowShadowVolume??!1,this._primitiveOptions={geometryInstances:void 0,appearance:void 0,vertexCacheOptimize:!1,interleave:e.interleave??!1,releaseGeometryInstances:e.releaseGeometryInstances??!0,allowPicking:e.allowPicking??!0,asynchronous:e.asynchronous??!0,compressVertices:!1,_createShaderProgramFunction:void 0,_createCommandsFunction:void 0,_updateAndQueueCommandsFunction:void 0},this._zIndex=void 0,this._ready=!1,this._primitive=void 0,this._sp=void 0,this._sp2D=void 0,this._spMorph=void 0,this._renderState=Vk(!1),this._renderState3DTiles=Vk(!0),this._renderStateMorph=ut.fromCache({cull:{enabled:!0,face:No.FRONT},depthTest:{enabled:!0},blending:qn.PRE_MULTIPLIED_ALPHA_BLEND,depthMask:!1})}Object.defineProperties(Il.prototype,{interleave:{get:function(){return this._primitiveOptions.interleave}},releaseGeometryInstances:{get:function(){return this._primitiveOptions.releaseGeometryInstances}},allowPicking:{get:function(){return this._primitiveOptions.allowPicking}},asynchronous:{get:function(){return this._primitiveOptions.asynchronous}},ready:{get:function(){return this._ready}},debugShowShadowVolume:{get:function(){return this._debugShowShadowVolume}}});Il.initializeTerrainHeights=function(){return On.initialize()};function Aoe(e,t,n){let i=t.context,o=e._primitive,r=o._attributeLocations,a=o._batchTable.getVertexShaderCallback()(Gk);a=wn._appendShowToShader(o,a),a=wn._appendDistanceDisplayConditionToShader(o,a),a=wn._modifyShaderPosition(e,a,t.scene3DOnly);let s=o._batchTable.getVertexShaderCallback()(Uk);s=wn._appendShowToShader(o,s),s=wn._appendDistanceDisplayConditionToShader(o,s),s=wn._modifyShaderPosition(e,s,t.scene3DOnly);let A=o._batchTable.getVertexShaderCallback()(Fk),l=[`GLOBE_MINIMUM_ALTITUDE ${t.mapProjection.ellipsoid.minimumRadius.toFixed(1)}`],f="",h="";c(n.material)?(h=c(n.material)?n.material.shaderSource:"",h.search(/in\s+float\s+v_polylineAngle;/g)!==-1&&l.push("ANGLE_VARYING"),h.search(/in\s+float\s+v_width;/g)!==-1&&l.push("WIDTH_VARYING")):f="PER_INSTANCE_COLOR",l.push(f);let m=e.debugShowShadowVolume?["DEBUG_SHOW_VOLUME",f]:[f],p=new It({defines:l,sources:[a]}),g=new It({defines:m,sources:[h,A]});e._sp=Bn.replaceCache({context:i,shaderProgram:o._sp,vertexShaderSource:p,fragmentShaderSource:g,attributeLocations:r});let C=i.shaderCache.getDerivedShaderProgram(e._sp,"2dColor");if(!c(C)){let E=new It({defines:l.concat(["COLUMBUS_VIEW_2D"]),sources:[a]});C=i.shaderCache.createDerivedShaderProgram(e._sp,"2dColor",{context:i,shaderProgram:e._sp2D,vertexShaderSource:E,fragmentShaderSource:g,attributeLocations:r})}e._sp2D=C;let _=i.shaderCache.getDerivedShaderProgram(e._sp,"MorphColor");if(!c(_)){let E=new It({defines:l.concat([`MAX_TERRAIN_HEIGHT ${On._defaultMaxTerrainHeight.toFixed(1)}`]),sources:[s]});A=o._batchTable.getVertexShaderCallback()(kk);let I=new It({defines:m,sources:[h,A]});_=i.shaderCache.createDerivedShaderProgram(e._sp,"MorphColor",{context:i,shaderProgram:e._spMorph,vertexShaderSource:E,fragmentShaderSource:I,attributeLocations:r})}e._spMorph=_}function Vk(e){return ut.fromCache({cull:{enabled:!0},blending:qn.PRE_MULTIPLIED_ALPHA_BLEND,depthMask:!1,stencilTest:{enabled:e,frontFunction:Nn.EQUAL,frontOperation:{fail:nt.KEEP,zFail:nt.KEEP,zPass:nt.KEEP},backFunction:Nn.EQUAL,backOperation:{fail:nt.KEEP,zFail:nt.KEEP,zPass:nt.KEEP},reference:Qt.CESIUM_3D_TILE_MASK,mask:Qt.CESIUM_3D_TILE_MASK}})}function loe(e,t,n,i,o,r){let a=e._primitive,s=a._va.length;o.length=s,r.length=s;let l=t instanceof Sa?{}:n._uniforms,f=a._batchTable.getUniformMapCallback()(l);for(let h=0;h<s;h++){let m=a._va[h],p=o[h];c(p)||(p=o[h]=new mt({owner:e,primitiveType:a._primitiveType})),p.vertexArray=m,p.renderState=e._renderState,p.shaderProgram=e._sp,p.uniformMap=f,p.pass=Ye.TERRAIN_CLASSIFICATION,p.pickId="czm_batchTable_pickColor(v_endPlaneNormalEcAndBatchId.w)";let g=mt.shallowClone(p,p.derivedCommands.tileset);g.renderState=e._renderState3DTiles,g.pass=Ye.CESIUM_3D_TILE_CLASSIFICATION,p.derivedCommands.tileset=g;let C=mt.shallowClone(p,p.derivedCommands.color2D);C.shaderProgram=e._sp2D,p.derivedCommands.color2D=C;let _=mt.shallowClone(g,g.derivedCommands.color2D);_.shaderProgram=e._sp2D,g.derivedCommands.color2D=_;let E=mt.shallowClone(p,p.derivedCommands.colorMorph);E.renderState=e._renderStateMorph,E.shaderProgram=e._spMorph,E.pickId="czm_batchTable_pickColor(v_batchId)",p.derivedCommands.colorMorph=E}}function jk(e,t,n,i,o,r,a){n.mode===Te.MORPHING?t=t.derivedCommands.colorMorph:n.mode!==Te.SCENE3D&&(t=t.derivedCommands.color2D),t.modelMatrix=i,t.boundingVolume=r,t.cull=o,t.debugShowBoundingVolume=a,n.commandList.push(t)}function foe(e,t,n,i,o,r,a){let s=e._primitive;wn._updateBoundingVolumes(s,t,o);let A;t.mode===Te.SCENE3D?A=s._boundingSphereWC:t.mode===Te.COLUMBUS_VIEW?A=s._boundingSphereCV:t.mode===Te.SCENE2D&&c(s._boundingSphere2D)?A=s._boundingSphere2D:c(s._boundingSphereMorph)&&(A=s._boundingSphereMorph);let l=t.mode===Te.MORPHING,f=e.classificationType,h=f!==on.CESIUM_3D_TILE,m=f!==on.TERRAIN&&!l,p,g=t.passes;if(g.render||g.pick&&s.allowPicking){let C=n.length;for(let _=0;_<C;++_){let E=A[_];h&&(p=n[_],jk(e,p,t,o,r,E,a)),m&&(p=n[_].derivedCommands.tileset,jk(e,p,t,o,r,E,a))}}}Il.prototype.update=function(e){if(!c(this._primitive)&&!c(this.geometryInstances))return;if(!On.initialized){Il.initializeTerrainHeights();return}let t,n=this,i=this._primitiveOptions;if(!c(this._primitive)){let o=Array.isArray(this.geometryInstances)?this.geometryInstances:[this.geometryInstances],r=o.length,a=new Array(r),s;for(t=0;t<r;++t)if(s=o[t].attributes,!c(s)||!c(s.color)){this._hasPerInstanceColors=!1;break}for(t=0;t<r;++t){let A=o[t];s={};let l=A.attributes;for(let f in l)l.hasOwnProperty(f)&&(s[f]=l[f]);c(s.width)||(s.width=new Za({componentDatatype:N.UNSIGNED_BYTE,componentsPerAttribute:1,value:[A.geometry.width]})),A.geometry._scene3DOnly=e.scene3DOnly,by.setProjectionAndEllipsoid(A.geometry,e.mapProjection),a[t]=new gt({geometry:A.geometry,attributes:s,id:A.id,pickPrimitive:n})}i.geometryInstances=a,i.appearance=this.appearance,i._createShaderProgramFunction=function(A,l,f){Aoe(n,l,f)},i._createCommandsFunction=function(A,l,f,h,m,p,g){loe(n,l,f,h,p,g)},i._updateAndQueueCommandsFunction=function(A,l,f,h,m,p,g,C){foe(n,l,f,h,m,p,g)},this._primitive=new wn(i)}if(this.appearance instanceof Sa&&!this._hasPerInstanceColors)throw new Ee("All GeometryInstances must have color attributes to use PolylineColorAppearance with GroundPolylinePrimitive.");this._primitive.appearance=this.appearance,this._primitive.show=this.show,this._primitive.debugShowBoundingVolume=this.debugShowBoundingVolume,this._primitive.update(e),e.afterRender.push(()=>{!this._ready&&c(this._primitive)&&this._primitive.ready&&(this._ready=!0,this.releaseGeometryInstances&&(this.geometryInstances=void 0))})};Il.prototype.getGeometryInstanceAttributes=function(e){return this._primitive.getGeometryInstanceAttributes(e)};Il.isSupported=function(e){return e.frameState.context.depthTexture};Il.prototype.isDestroyed=function(){return!1};Il.prototype.destroy=function(){return this._primitive=this._primitive&&this._primitive.destroy(),this._sp=this._sp&&this._sp.destroy(),this._sp2D=void 0,this._spMorph=void 0,pe(this)};var qf=Il;var uoe=new U(1,1),doe=!1,hoe=F.WHITE;function pm(e){e=e??k.EMPTY_OBJECT,this._definitionChanged=new fe,this._image=void 0,this._imageSubscription=void 0,this._repeat=void 0,this._repeatSubscription=void 0,this._color=void 0,this._colorSubscription=void 0,this._transparent=void 0,this._transparentSubscription=void 0,this.image=e.image,this.repeat=e.repeat,this.color=e.color,this.transparent=e.transparent}Object.defineProperties(pm.prototype,{isConstant:{get:function(){return M.isConstant(this._image)&&M.isConstant(this._repeat)}},definitionChanged:{get:function(){return this._definitionChanged}},image:W("image"),repeat:W("repeat"),color:W("color"),transparent:W("transparent")});pm.prototype.getType=function(e){return"Image"};var moe=new X;pm.prototype.getValue=function(e,t){return c(e)||(e=X.now(moe)),c(t)||(t={}),t.image=M.getValueOrUndefined(this._image,e),t.repeat=M.getValueOrClonedDefault(this._repeat,e,uoe,t.repeat),t.color=M.getValueOrClonedDefault(this._color,e,hoe,t.color),M.getValueOrDefault(this._transparent,e,doe)&&(t.color.alpha=Math.min(.99,t.color.alpha)),t};pm.prototype.equals=function(e){return this===e||e instanceof pm&&M.equals(this._image,e._image)&&M.equals(this._repeat,e._repeat)&&M.equals(this._color,e._color)&&M.equals(this._transparent,e._transparent)};var uC=pm;function poe(e){if(e instanceof F)return new lt(e);if(typeof e=="string"||e instanceof ke||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement){let t=new uC;return t.image=e,t}}function goe(e,t){return W(e,t,poe)}var gi=goe;function dC(e){this._definitionChanged=new fe,this._show=void 0,this._showSubscription=void 0,this._dimensions=void 0,this._dimensionsSubscription=void 0,this._heightReference=void 0,this._heightReferenceSubscription=void 0,this._fill=void 0,this._fillSubscription=void 0,this._material=void 0,this._materialSubscription=void 0,this._outline=void 0,this._outlineSubscription=void 0,this._outlineColor=void 0,this._outlineColorSubscription=void 0,this._outlineWidth=void 0,this._outlineWidthSubscription=void 0,this._shadows=void 0,this._shadowsSubscription=void 0,this._distanceDisplayCondition=void 0,this._distanceDisplayConditionSubscription=void 0,this.merge(e??k.EMPTY_OBJECT)}Object.defineProperties(dC.prototype,{definitionChanged:{get:function(){return this._definitionChanged}},show:W("show"),dimensions:W("dimensions"),heightReference:W("heightReference"),fill:W("fill"),material:gi("material"),outline:W("outline"),outlineColor:W("outlineColor"),outlineWidth:W("outlineWidth"),shadows:W("shadows"),distanceDisplayCondition:W("distanceDisplayCondition")});dC.prototype.clone=function(e){return c(e)?(e.show=this.show,e.dimensions=this.dimensions,e.heightReference=this.heightReference,e.fill=this.fill,e.material=this.material,e.outline=this.outline,e.outlineColor=this.outlineColor,e.outlineWidth=this.outlineWidth,e.shadows=this.shadows,e.distanceDisplayCondition=this.distanceDisplayCondition,e):new dC(this)};dC.prototype.merge=function(e){this.show=this.show??e.show,this.dimensions=this.dimensions??e.dimensions,this.heightReference=this.heightReference??e.heightReference,this.fill=this.fill??e.fill,this.material=this.material??e.material,this.outline=this.outline??e.outline,this.outlineColor=this.outlineColor??e.outlineColor,this.outlineWidth=this.outlineWidth??e.outlineWidth,this.shadows=this.shadows??e.shadows,this.distanceDisplayCondition=this.distanceDisplayCondition??e.distanceDisplayCondition};var xy=dC;var Coe={FIXED:0,INERTIAL:1},oi=Object.freeze(Coe);function gm(){Ee.throwInstantiationError()}Object.defineProperties(gm.prototype,{isConstant:{get:Ee.throwInstantiationError},definitionChanged:{get:Ee.throwInstantiationError},referenceFrame:{get:Ee.throwInstantiationError}});gm.prototype.getValue=Ee.throwInstantiationError;gm.prototype.getValueInReferenceFrame=Ee.throwInstantiationError;gm.prototype.equals=Ee.throwInstantiationError;var Yk=new J;gm.convertToReferenceFrame=function(e,t,n,i,o){if(!c(t))return t;if(c(o)||(o=new u),n===i)return u.clone(t,o);let r=Rn.computeIcrfToCentralBodyFixedMatrix(e,Yk);if(n===oi.INERTIAL)return J.multiplyByVector(r,t,o);if(n===oi.FIXED)return J.multiplyByVector(J.transpose(r,Yk),t,o)};var Wf=gm;function Ld(e,t){this._definitionChanged=new fe,this._value=u.clone(e),this._referenceFrame=t??oi.FIXED}Object.defineProperties(Ld.prototype,{isConstant:{get:function(){return!c(this._value)||this._referenceFrame===oi.FIXED}},definitionChanged:{get:function(){return this._definitionChanged}},referenceFrame:{get:function(){return this._referenceFrame}}});var _oe=new X;Ld.prototype.getValue=function(e,t){return c(e)||(e=X.now(_oe)),this.getValueInReferenceFrame(e,oi.FIXED,t)};Ld.prototype.setValue=function(e,t){let n=!1;u.equals(this._value,e)||(n=!0,this._value=u.clone(e)),c(t)&&this._referenceFrame!==t&&(n=!0,this._referenceFrame=t),n&&this._definitionChanged.raiseEvent(this)};Ld.prototype.getValueInReferenceFrame=function(e,t,n){return Wf.convertToReferenceFrame(e,this._value,this._referenceFrame,t,n)};Ld.prototype.equals=function(e){return this===e||e instanceof Ld&&u.equals(this._value,e._value)&&this._referenceFrame===e._referenceFrame};var Jf=Ld;function hC(e){this._definitionChanged=new fe,this._show=void 0,this._showSubscription=void 0,this._positions=void 0,this._positionsSubscription=void 0,this._width=void 0,this._widthSubscription=void 0,this._height=void 0,this._heightSubscription=void 0,this._heightReference=void 0,this._heightReferenceSubscription=void 0,this._extrudedHeight=void 0,this._extrudedHeightSubscription=void 0,this._extrudedHeightReference=void 0,this._extrudedHeightReferenceSubscription=void 0,this._cornerType=void 0,this._cornerTypeSubscription=void 0,this._granularity=void 0,this._granularitySubscription=void 0,this._fill=void 0,this._fillSubscription=void 0,this._material=void 0,this._materialSubscription=void 0,this._outline=void 0,this._outlineSubscription=void 0,this._outlineColor=void 0,this._outlineColorSubscription=void 0,this._outlineWidth=void 0,this._outlineWidthSubscription=void 0,this._shadows=void 0,this._shadowsSubscription=void 0,this._distanceDisplayCondition=void 0,this._distanceDisplayConditionSubscription=void 0,this._classificationType=void 0,this._classificationTypeSubscription=void 0,this._zIndex=void 0,this._zIndexSubscription=void 0,this.merge(e??k.EMPTY_OBJECT)}Object.defineProperties(hC.prototype,{definitionChanged:{get:function(){return this._definitionChanged}},show:W("show"),positions:W("positions"),width:W("width"),height:W("height"),heightReference:W("heightReference"),extrudedHeight:W("extrudedHeight"),extrudedHeightReference:W("extrudedHeightReference"),cornerType:W("cornerType"),granularity:W("granularity"),fill:W("fill"),material:gi("material"),outline:W("outline"),outlineColor:W("outlineColor"),outlineWidth:W("outlineWidth"),shadows:W("shadows"),distanceDisplayCondition:W("distanceDisplayCondition"),classificationType:W("classificationType"),zIndex:W("zIndex")});hC.prototype.clone=function(e){return c(e)?(e.show=this.show,e.positions=this.positions,e.width=this.width,e.height=this.height,e.heightReference=this.heightReference,e.extrudedHeight=this.extrudedHeight,e.extrudedHeightReference=this.extrudedHeightReference,e.cornerType=this.cornerType,e.granularity=this.granularity,e.fill=this.fill,e.material=this.material,e.outline=this.outline,e.outlineColor=this.outlineColor,e.outlineWidth=this.outlineWidth,e.shadows=this.shadows,e.distanceDisplayCondition=this.distanceDisplayCondition,e.classificationType=this.classificationType,e.zIndex=this.zIndex,e):new hC(this)};hC.prototype.merge=function(e){this.show=this.show??e.show,this.positions=this.positions??e.positions,this.width=this.width??e.width,this.height=this.height??e.height,this.heightReference=this.heightReference??e.heightReference,this.extrudedHeight=this.extrudedHeight??e.extrudedHeight,this.extrudedHeightReference=this.extrudedHeightReference??e.extrudedHeightReference,this.cornerType=this.cornerType??e.cornerType,this.granularity=this.granularity??e.granularity,this.fill=this.fill??e.fill,this.material=this.material??e.material,this.outline=this.outline??e.outline,this.outlineColor=this.outlineColor??e.outlineColor,this.outlineWidth=this.outlineWidth??e.outlineWidth,this.shadows=this.shadows??e.shadows,this.distanceDisplayCondition=this.distanceDisplayCondition??e.distanceDisplayCondition,this.classificationType=this.classificationType??e.classificationType,this.zIndex=this.zIndex??e.zIndex};var Ty=hC;function Eoe(e){return e}function Ioe(e,t){return W(e,t,Eoe)}var Ns=Ioe;function mC(e){this._definitionChanged=new fe,this._show=void 0,this._showSubscription=void 0,this._length=void 0,this._lengthSubscription=void 0,this._topRadius=void 0,this._topRadiusSubscription=void 0,this._bottomRadius=void 0,this._bottomRadiusSubscription=void 0,this._heightReference=void 0,this._heightReferenceSubscription=void 0,this._fill=void 0,this._fillSubscription=void 0,this._material=void 0,this._materialSubscription=void 0,this._outline=void 0,this._outlineSubscription=void 0,this._outlineColor=void 0,this._outlineColorSubscription=void 0,this._outlineWidth=void 0,this._outlineWidthSubscription=void 0,this._numberOfVerticalLines=void 0,this._numberOfVerticalLinesSubscription=void 0,this._slices=void 0,this._slicesSubscription=void 0,this._shadows=void 0,this._shadowsSubscription=void 0,this._distanceDisplayCondition=void 0,this._distanceDisplayConditionSubscription=void 0,this.merge(e??k.EMPTY_OBJECT)}Object.defineProperties(mC.prototype,{definitionChanged:{get:function(){return this._definitionChanged}},show:W("show"),length:W("length"),topRadius:W("topRadius"),bottomRadius:W("bottomRadius"),heightReference:W("heightReference"),fill:W("fill"),material:gi("material"),outline:W("outline"),outlineColor:W("outlineColor"),outlineWidth:W("outlineWidth"),numberOfVerticalLines:W("numberOfVerticalLines"),slices:W("slices"),shadows:W("shadows"),distanceDisplayCondition:W("distanceDisplayCondition")});mC.prototype.clone=function(e){return c(e)?(e.show=this.show,e.length=this.length,e.topRadius=this.topRadius,e.bottomRadius=this.bottomRadius,e.heightReference=this.heightReference,e.fill=this.fill,e.material=this.material,e.outline=this.outline,e.outlineColor=this.outlineColor,e.outlineWidth=this.outlineWidth,e.numberOfVerticalLines=this.numberOfVerticalLines,e.slices=this.slices,e.shadows=this.shadows,e.distanceDisplayCondition=this.distanceDisplayCondition,e):new mC(this)};mC.prototype.merge=function(e){this.show=this.show??e.show,this.length=this.length??e.length,this.topRadius=this.topRadius??e.topRadius,this.bottomRadius=this.bottomRadius??e.bottomRadius,this.heightReference=this.heightReference??e.heightReference,this.fill=this.fill??e.fill,this.material=this.material??e.material,this.outline=this.outline??e.outline,this.outlineColor=this.outlineColor??e.outlineColor,this.outlineWidth=this.outlineWidth??e.outlineWidth,this.numberOfVerticalLines=this.numberOfVerticalLines??e.numberOfVerticalLines,this.slices=this.slices??e.slices,this.shadows=this.shadows??e.shadows,this.distanceDisplayCondition=this.distanceDisplayCondition??e.distanceDisplayCondition};var Sy=mC;function pC(e){this._definitionChanged=new fe,this._show=void 0,this._showSubscription=void 0,this._semiMajorAxis=void 0,this._semiMajorAxisSubscription=void 0,this._semiMinorAxis=void 0,this._semiMinorAxisSubscription=void 0,this._height=void 0,this._heightSubscription=void 0,this._heightReference=void 0,this._heightReferenceSubscription=void 0,this._extrudedHeight=void 0,this._extrudedHeightSubscription=void 0,this._extrudedHeightReference=void 0,this._extrudedHeightReferenceSubscription=void 0,this._rotation=void 0,this._rotationSubscription=void 0,this._stRotation=void 0,this._stRotationSubscription=void 0,this._granularity=void 0,this._granularitySubscription=void 0,this._fill=void 0,this._fillSubscription=void 0,this._material=void 0,this._materialSubscription=void 0,this._outline=void 0,this._outlineSubscription=void 0,this._outlineColor=void 0,this._outlineColorSubscription=void 0,this._outlineWidth=void 0,this._outlineWidthSubscription=void 0,this._numberOfVerticalLines=void 0,this._numberOfVerticalLinesSubscription=void 0,this._shadows=void 0,this._shadowsSubscription=void 0,this._distanceDisplayCondition=void 0,this._distanceDisplayConditionSubscription=void 0,this._classificationType=void 0,this._classificationTypeSubscription=void 0,this._zIndex=void 0,this._zIndexSubscription=void 0,this.merge(e??k.EMPTY_OBJECT)}Object.defineProperties(pC.prototype,{definitionChanged:{get:function(){return this._definitionChanged}},show:W("show"),semiMajorAxis:W("semiMajorAxis"),semiMinorAxis:W("semiMinorAxis"),height:W("height"),heightReference:W("heightReference"),extrudedHeight:W("extrudedHeight"),extrudedHeightReference:W("extrudedHeightReference"),rotation:W("rotation"),stRotation:W("stRotation"),granularity:W("granularity"),fill:W("fill"),material:gi("material"),outline:W("outline"),outlineColor:W("outlineColor"),outlineWidth:W("outlineWidth"),numberOfVerticalLines:W("numberOfVerticalLines"),shadows:W("shadows"),distanceDisplayCondition:W("distanceDisplayCondition"),classificationType:W("classificationType"),zIndex:W("zIndex")});pC.prototype.clone=function(e){return c(e)?(e.show=this.show,e.semiMajorAxis=this.semiMajorAxis,e.semiMinorAxis=this.semiMinorAxis,e.height=this.height,e.heightReference=this.heightReference,e.extrudedHeight=this.extrudedHeight,e.extrudedHeightReference=this.extrudedHeightReference,e.rotation=this.rotation,e.stRotation=this.stRotation,e.granularity=this.granularity,e.fill=this.fill,e.material=this.material,e.outline=this.outline,e.outlineColor=this.outlineColor,e.outlineWidth=this.outlineWidth,e.numberOfVerticalLines=this.numberOfVerticalLines,e.shadows=this.shadows,e.distanceDisplayCondition=this.distanceDisplayCondition,e.classificationType=this.classificationType,e.zIndex=this.zIndex,e):new pC(this)};pC.prototype.merge=function(e){this.show=this.show??e.show,this.semiMajorAxis=this.semiMajorAxis??e.semiMajorAxis,this.semiMinorAxis=this.semiMinorAxis??e.semiMinorAxis,this.height=this.height??e.height,this.heightReference=this.heightReference??e.heightReference,this.extrudedHeight=this.extrudedHeight??e.extrudedHeight,this.extrudedHeightReference=this.extrudedHeightReference??e.extrudedHeightReference,this.rotation=this.rotation??e.rotation,this.stRotation=this.stRotation??e.stRotation,this.granularity=this.granularity??e.granularity,this.fill=this.fill??e.fill,this.material=this.material??e.material,this.outline=this.outline??e.outline,this.outlineColor=this.outlineColor??e.outlineColor,this.outlineWidth=this.outlineWidth??e.outlineWidth,this.numberOfVerticalLines=this.numberOfVerticalLines??e.numberOfVerticalLines,this.shadows=this.shadows??e.shadows,this.distanceDisplayCondition=this.distanceDisplayCondition??e.distanceDisplayCondition,this.classificationType=this.classificationType??e.classificationType,this.zIndex=this.zIndex??e.zIndex};var wy=pC;function gC(e){this._definitionChanged=new fe,this._show=void 0,this._showSubscription=void 0,this._radii=void 0,this._radiiSubscription=void 0,this._innerRadii=void 0,this._innerRadiiSubscription=void 0,this._minimumClock=void 0,this._minimumClockSubscription=void 0,this._maximumClock=void 0,this._maximumClockSubscription=void 0,this._minimumCone=void 0,this._minimumConeSubscription=void 0,this._maximumCone=void 0,this._maximumConeSubscription=void 0,this._heightReference=void 0,this._heightReferenceSubscription=void 0,this._fill=void 0,this._fillSubscription=void 0,this._material=void 0,this._materialSubscription=void 0,this._outline=void 0,this._outlineSubscription=void 0,this._outlineColor=void 0,this._outlineColorSubscription=void 0,this._outlineWidth=void 0,this._outlineWidthSubscription=void 0,this._stackPartitions=void 0,this._stackPartitionsSubscription=void 0,this._slicePartitions=void 0,this._slicePartitionsSubscription=void 0,this._subdivisions=void 0,this._subdivisionsSubscription=void 0,this._shadows=void 0,this._shadowsSubscription=void 0,this._distanceDisplayCondition=void 0,this._distanceDisplayConditionSubscription=void 0,this.merge(e??k.EMPTY_OBJECT)}Object.defineProperties(gC.prototype,{definitionChanged:{get:function(){return this._definitionChanged}},show:W("show"),radii:W("radii"),innerRadii:W("innerRadii"),minimumClock:W("minimumClock"),maximumClock:W("maximumClock"),minimumCone:W("minimumCone"),maximumCone:W("maximumCone"),heightReference:W("heightReference"),fill:W("fill"),material:gi("material"),outline:W("outline"),outlineColor:W("outlineColor"),outlineWidth:W("outlineWidth"),stackPartitions:W("stackPartitions"),slicePartitions:W("slicePartitions"),subdivisions:W("subdivisions"),shadows:W("shadows"),distanceDisplayCondition:W("distanceDisplayCondition")});gC.prototype.clone=function(e){return c(e)?(e.show=this.show,e.radii=this.radii,e.innerRadii=this.innerRadii,e.minimumClock=this.minimumClock,e.maximumClock=this.maximumClock,e.minimumCone=this.minimumCone,e.maximumCone=this.maximumCone,e.heightReference=this.heightReference,e.fill=this.fill,e.material=this.material,e.outline=this.outline,e.outlineColor=this.outlineColor,e.outlineWidth=this.outlineWidth,e.stackPartitions=this.stackPartitions,e.slicePartitions=this.slicePartitions,e.subdivisions=this.subdivisions,e.shadows=this.shadows,e.distanceDisplayCondition=this.distanceDisplayCondition,e):new gC(this)};gC.prototype.merge=function(e){this.show=this.show??e.show,this.radii=this.radii??e.radii,this.innerRadii=this.innerRadii??e.innerRadii,this.minimumClock=this.minimumClock??e.minimumClock,this.maximumClock=this.maximumClock??e.maximumClock,this.minimumCone=this.minimumCone??e.minimumCone,this.maximumCone=this.maximumCone??e.maximumCone,this.heightReference=this.heightReference??e.heightReference,this.fill=this.fill??e.fill,this.material=this.material??e.material,this.outline=this.outline??e.outline,this.outlineColor=this.outlineColor??e.outlineColor,this.outlineWidth=this.outlineWidth??e.outlineWidth,this.stackPartitions=this.stackPartitions??e.stackPartitions,this.slicePartitions=this.slicePartitions??e.slicePartitions,this.subdivisions=this.subdivisions??e.subdivisions,this.shadows=this.shadows??e.shadows,this.distanceDisplayCondition=this.distanceDisplayCondition??e.distanceDisplayCondition};var Dy=gC;function CC(e){this._definitionChanged=new fe,this._show=void 0,this._showSubscription=void 0,this._text=void 0,this._textSubscription=void 0,this._font=void 0,this._fontSubscription=void 0,this._style=void 0,this._styleSubscription=void 0,this._scale=void 0,this._scaleSubscription=void 0,this._showBackground=void 0,this._showBackgroundSubscription=void 0,this._backgroundColor=void 0,this._backgroundColorSubscription=void 0,this._backgroundPadding=void 0,this._backgroundPaddingSubscription=void 0,this._pixelOffset=void 0,this._pixelOffsetSubscription=void 0,this._eyeOffset=void 0,this._eyeOffsetSubscription=void 0,this._horizontalOrigin=void 0,this._horizontalOriginSubscription=void 0,this._verticalOrigin=void 0,this._verticalOriginSubscription=void 0,this._heightReference=void 0,this._heightReferenceSubscription=void 0,this._fillColor=void 0,this._fillColorSubscription=void 0,this._outlineColor=void 0,this._outlineColorSubscription=void 0,this._outlineWidth=void 0,this._outlineWidthSubscription=void 0,this._translucencyByDistance=void 0,this._translucencyByDistanceSubscription=void 0,this._pixelOffsetScaleByDistance=void 0,this._pixelOffsetScaleByDistanceSubscription=void 0,this._scaleByDistance=void 0,this._scaleByDistanceSubscription=void 0,this._distanceDisplayCondition=void 0,this._distanceDisplayConditionSubscription=void 0,this._disableDepthTestDistance=void 0,this._disableDepthTestDistanceSubscription=void 0,this.merge(e??k.EMPTY_OBJECT)}Object.defineProperties(CC.prototype,{definitionChanged:{get:function(){return this._definitionChanged}},show:W("show"),text:W("text"),font:W("font"),style:W("style"),scale:W("scale"),showBackground:W("showBackground"),backgroundColor:W("backgroundColor"),backgroundPadding:W("backgroundPadding"),pixelOffset:W("pixelOffset"),eyeOffset:W("eyeOffset"),horizontalOrigin:W("horizontalOrigin"),verticalOrigin:W("verticalOrigin"),heightReference:W("heightReference"),fillColor:W("fillColor"),outlineColor:W("outlineColor"),outlineWidth:W("outlineWidth"),translucencyByDistance:W("translucencyByDistance"),pixelOffsetScaleByDistance:W("pixelOffsetScaleByDistance"),scaleByDistance:W("scaleByDistance"),distanceDisplayCondition:W("distanceDisplayCondition"),disableDepthTestDistance:W("disableDepthTestDistance")});CC.prototype.clone=function(e){return c(e)?(e.show=this.show,e.text=this.text,e.font=this.font,e.style=this.style,e.scale=this.scale,e.showBackground=this.showBackground,e.backgroundColor=this.backgroundColor,e.backgroundPadding=this.backgroundPadding,e.pixelOffset=this.pixelOffset,e.eyeOffset=this.eyeOffset,e.horizontalOrigin=this.horizontalOrigin,e.verticalOrigin=this.verticalOrigin,e.heightReference=this.heightReference,e.fillColor=this.fillColor,e.outlineColor=this.outlineColor,e.outlineWidth=this.outlineWidth,e.translucencyByDistance=this.translucencyByDistance,e.pixelOffsetScaleByDistance=this.pixelOffsetScaleByDistance,e.scaleByDistance=this.scaleByDistance,e.distanceDisplayCondition=this.distanceDisplayCondition,e.disableDepthTestDistance=this.disableDepthTestDistance,e):new CC(this)};CC.prototype.merge=function(e){this.show=this.show??e.show,this.text=this.text??e.text,this.font=this.font??e.font,this.style=this.style??e.style,this.scale=this.scale??e.scale,this.showBackground=this.showBackground??e.showBackground,this.backgroundColor=this.backgroundColor??e.backgroundColor,this.backgroundPadding=this.backgroundPadding??e.backgroundPadding,this.pixelOffset=this.pixelOffset??e.pixelOffset,this.eyeOffset=this.eyeOffset??e.eyeOffset,this.horizontalOrigin=this.horizontalOrigin??e.horizontalOrigin,this.verticalOrigin=this.verticalOrigin??e.verticalOrigin,this.heightReference=this.heightReference??e.heightReference,this.fillColor=this.fillColor??e.fillColor,this.outlineColor=this.outlineColor??e.outlineColor,this.outlineWidth=this.outlineWidth??e.outlineWidth,this.translucencyByDistance=this.translucencyByDistance??e.translucencyByDistance,this.pixelOffsetScaleByDistance=this.pixelOffsetScaleByDistance??e.pixelOffsetScaleByDistance,this.scaleByDistance=this.scaleByDistance??e.scaleByDistance,this.distanceDisplayCondition=this.distanceDisplayCondition??e.distanceDisplayCondition,this.disableDepthTestDistance=this.disableDepthTestDistance??e.disableDepthTestDistance};var Qy=CC;var yoe=new u(1,1,1),boe=u.ZERO,Boe=qe.IDENTITY;function qk(e,t,n){this.translation=u.clone(e??boe),this.rotation=qe.clone(t??Boe),this.scale=u.clone(n??yoe)}qk.prototype.equals=function(e){return this===e||c(e)&&u.equals(this.translation,e.translation)&&qe.equals(this.rotation,e.rotation)&&u.equals(this.scale,e.scale)};var _C=qk;var uS=new _C;function EC(e){e=e??k.EMPTY_OBJECT,this._definitionChanged=new fe,this._translation=void 0,this._translationSubscription=void 0,this._rotation=void 0,this._rotationSubscription=void 0,this._scale=void 0,this._scaleSubscription=void 0,this.translation=e.translation,this.rotation=e.rotation,this.scale=e.scale}Object.defineProperties(EC.prototype,{isConstant:{get:function(){return M.isConstant(this._translation)&&M.isConstant(this._rotation)&&M.isConstant(this._scale)}},definitionChanged:{get:function(){return this._definitionChanged}},translation:W("translation"),rotation:W("rotation"),scale:W("scale")});var xoe=new X;EC.prototype.getValue=function(e,t){return c(e)||(e=X.now(xoe)),c(t)||(t=new _C),t.translation=M.getValueOrClonedDefault(this._translation,e,uS.translation,t.translation),t.rotation=M.getValueOrClonedDefault(this._rotation,e,uS.rotation,t.rotation),t.scale=M.getValueOrClonedDefault(this._scale,e,uS.scale,t.scale),t};EC.prototype.equals=function(e){return this===e||e instanceof EC&&M.equals(this._translation,e._translation)&&M.equals(this._rotation,e._rotation)&&M.equals(this._scale,e._scale)};var Ry=EC;function yl(e,t){this._propertyNames=[],this._definitionChanged=new fe,c(e)&&this.merge(e,t)}Object.defineProperties(yl.prototype,{propertyNames:{get:function(){return this._propertyNames}},isConstant:{get:function(){let e=this._propertyNames;for(let t=0,n=e.length;t<n;t++)if(!M.isConstant(this[e[t]]))return!1;return!0}},definitionChanged:{get:function(){return this._definitionChanged}}});yl.prototype.hasProperty=function(e){return this._propertyNames.indexOf(e)!==-1};function Toe(e){return new li(e)}yl.prototype.addProperty=function(e,t,n){this._propertyNames.push(e),Object.defineProperty(this,e,W(e,!0,n??Toe)),c(t)&&(this[e]=t),this._definitionChanged.raiseEvent(this)};yl.prototype.removeProperty=function(e){let n=this._propertyNames.indexOf(e);this._propertyNames.splice(n,1),delete this[e],this._definitionChanged.raiseEvent(this)};var Soe=new X;yl.prototype.getValue=function(e,t){c(e)||(e=X.now(Soe)),c(t)||(t={});let n=this._propertyNames;for(let i=0,o=n.length;i<o;i++){let r=n[i];t[r]=M.getValueOrUndefined(this[r],e,t[r])}return t};yl.prototype.merge=function(e,t){let n=this._propertyNames,i=c(e._propertyNames)?e._propertyNames:Object.keys(e);for(let o=0,r=i.length;o<r;o++){let a=i[o],s=this[a],A=e[a];s===void 0&&n.indexOf(a)===-1&&this.addProperty(a,void 0,t),A!==void 0&&(s!==void 0?c(s)&&c(s.merge)&&s.merge(A):c(A)&&c(A.merge)&&c(A.clone)?this[a]=A.clone():this[a]=A)}};function woe(e,t){let n=e._propertyNames,i=t._propertyNames,o=n.length;if(o!==i.length)return!1;for(let r=0;r<o;++r){let a=n[r];if(i.indexOf(a)===-1||!M.equals(e[a],t[a]))return!1}return!0}yl.prototype.equals=function(e){return this===e||e instanceof yl&&woe(this,e)};var Fs=yl;function Wk(e){return new Ry(e)}function Doe(e){return new Fs(e,Wk)}function Qoe(e){return new Fs(e)}function Roe(e){return new Fs(e)}function IC(e){this._definitionChanged=new fe,this._show=void 0,this._showSubscription=void 0,this._uri=void 0,this._uriSubscription=void 0,this._scale=void 0,this._scaleSubscription=void 0,this._hasVerticalExaggeration=void 0,this._hasVerticalExaggerationSubscription=void 0,this._enableVerticalExaggeration=void 0,this._enableVerticalExaggerationSubscription=void 0,this._minimumPixelSize=void 0,this._minimumPixelSizeSubscription=void 0,this._maximumScale=void 0,this._maximumScaleSubscription=void 0,this._incrementallyLoadTextures=void 0,this._incrementallyLoadTexturesSubscription=void 0,this._runAnimations=void 0,this._runAnimationsSubscription=void 0,this._clampAnimations=void 0,this._clampAnimationsSubscription=void 0,this._shadows=void 0,this._shadowsSubscription=void 0,this._heightReference=void 0,this._heightReferenceSubscription=void 0,this._silhouetteColor=void 0,this._silhouetteColorSubscription=void 0,this._silhouetteSize=void 0,this._silhouetteSizeSubscription=void 0,this._color=void 0,this._colorSubscription=void 0,this._colorBlendMode=void 0,this._colorBlendModeSubscription=void 0,this._colorBlendAmount=void 0,this._colorBlendAmountSubscription=void 0,this._imageBasedLightingFactor=void 0,this._imageBasedLightingFactorSubscription=void 0,this._environmentMapOptions=void 0,this._environmentMapOptionsSubscription=void 0,this._lightColor=void 0,this._lightColorSubscription=void 0,this._distanceDisplayCondition=void 0,this._distanceDisplayConditionSubscription=void 0,this._nodeTransformations=void 0,this._nodeTransformationsSubscription=void 0,this._articulations=void 0,this._articulationsSubscription=void 0,this._clippingPlanes=void 0,this._clippingPlanesSubscription=void 0,this._customShader=void 0,this._customShaderSubscription=void 0,this.merge(e??k.EMPTY_OBJECT)}Object.defineProperties(IC.prototype,{definitionChanged:{get:function(){return this._definitionChanged}},show:W("show"),uri:W("uri"),scale:W("scale"),enableVerticalExaggeration:W("enableVerticalExaggeration"),minimumPixelSize:W("minimumPixelSize"),maximumScale:W("maximumScale"),incrementallyLoadTextures:W("incrementallyLoadTextures"),runAnimations:W("runAnimations"),clampAnimations:W("clampAnimations"),shadows:W("shadows"),heightReference:W("heightReference"),silhouetteColor:W("silhouetteColor"),silhouetteSize:W("silhouetteSize"),color:W("color"),colorBlendMode:W("colorBlendMode"),colorBlendAmount:W("colorBlendAmount"),imageBasedLightingFactor:W("imageBasedLightingFactor"),environmentMapOptions:W("environmentMapOptions",void 0,Roe),lightColor:W("lightColor"),distanceDisplayCondition:W("distanceDisplayCondition"),nodeTransformations:W("nodeTransformations",void 0,Doe),articulations:W("articulations",void 0,Qoe),clippingPlanes:W("clippingPlanes"),customShader:W("customShader")});IC.prototype.clone=function(e){return c(e)?(e.show=this.show,e.uri=this.uri,e.scale=this.scale,e.enableVerticalExaggeration=this.enableVerticalExaggeration,e.minimumPixelSize=this.minimumPixelSize,e.maximumScale=this.maximumScale,e.incrementallyLoadTextures=this.incrementallyLoadTextures,e.runAnimations=this.runAnimations,e.clampAnimations=this.clampAnimations,e.heightReference=this._heightReference,e.silhouetteColor=this.silhouetteColor,e.silhouetteSize=this.silhouetteSize,e.color=this.color,e.colorBlendMode=this.colorBlendMode,e.colorBlendAmount=this.colorBlendAmount,e.imageBasedLightingFactor=this.imageBasedLightingFactor,e.environmentMapOptions=this.environmentMapOptions,e.lightColor=this.lightColor,e.distanceDisplayCondition=this.distanceDisplayCondition,e.nodeTransformations=this.nodeTransformations,e.articulations=this.articulations,e.clippingPlanes=this.clippingPlanes,e.customShader=this.customShader,e):new IC(this)};IC.prototype.merge=function(e){this.show=this.show??e.show,this.uri=this.uri??e.uri,this.scale=this.scale??e.scale,this.enableVerticalExaggeration=this.enableVerticalExaggeration??e.enableVerticalExaggeration,this.minimumPixelSize=this.minimumPixelSize??e.minimumPixelSize,this.maximumScale=this.maximumScale??e.maximumScale,this.incrementallyLoadTextures=this.incrementallyLoadTextures??e.incrementallyLoadTextures,this.runAnimations=this.runAnimations??e.runAnimations,this.clampAnimations=this.clampAnimations??e.clampAnimations,this.shadows=this.shadows??e.shadows,this.heightReference=this.heightReference??e.heightReference,this.silhouetteColor=this.silhouetteColor??e.silhouetteColor,this.silhouetteSize=this.silhouetteSize??e.silhouetteSize,this.color=this.color??e.color,this.colorBlendMode=this.colorBlendMode??e.colorBlendMode,this.colorBlendAmount=this.colorBlendAmount??e.colorBlendAmount,this.imageBasedLightingFactor=this.imageBasedLightingFactor??e.imageBasedLightingFactor,this.environmentMapOptions=this.environmentMapOptions??e.environmentMapOptions,this.lightColor=this.lightColor??e.lightColor,this.distanceDisplayCondition=this.distanceDisplayCondition??e.distanceDisplayCondition,this.clippingPlanes=this.clippingPlanes??e.clippingPlanes,this.customShader=this.customShader??e.customShader;let t=e.nodeTransformations;if(c(t)){let i=this.nodeTransformations;c(i)?i.merge(t):this.nodeTransformations=new Fs(t,Wk)}let n=e.articulations;if(c(n)){let i=this.articulations;c(i)?i.merge(n):this.articulations=new Fs(n)}};var vy=IC;function yC(e){this._definitionChanged=new fe,this._show=void 0,this._showSubscription=void 0,this._uri=void 0,this._uriSubscription=void 0,this._maximumScreenSpaceError=void 0,this._maximumScreenSpaceErrorSubscription=void 0,this.merge(e??k.EMPTY_OBJECT)}Object.defineProperties(yC.prototype,{definitionChanged:{get:function(){return this._definitionChanged}},show:W("show"),uri:W("uri"),maximumScreenSpaceError:W("maximumScreenSpaceError")});yC.prototype.clone=function(e){return c(e)?(e.show=this.show,e.uri=this.uri,e.maximumScreenSpaceError=this.maximumScreenSpaceError,e):new yC(this)};yC.prototype.merge=function(e){this.show=this.show??e.show,this.uri=this.uri??e.uri,this.maximumScreenSpaceError=this.maximumScreenSpaceError??e.maximumScreenSpaceError};var Py=yC;function bC(e){this._definitionChanged=new fe,this._show=void 0,this._showSubscription=void 0,this._leadTime=void 0,this._leadTimeSubscription=void 0,this._trailTime=void 0,this._trailTimeSubscription=void 0,this._width=void 0,this._widthSubscription=void 0,this._resolution=void 0,this._resolutionSubscription=void 0,this._material=void 0,this._materialSubscription=void 0,this._distanceDisplayCondition=void 0,this._distanceDisplayConditionSubscription=void 0,this.merge(e??k.EMPTY_OBJECT)}Object.defineProperties(bC.prototype,{definitionChanged:{get:function(){return this._definitionChanged}},show:W("show"),leadTime:W("leadTime"),trailTime:W("trailTime"),width:W("width"),resolution:W("resolution"),material:gi("material"),distanceDisplayCondition:W("distanceDisplayCondition")});bC.prototype.clone=function(e){return c(e)?(e.show=this.show,e.leadTime=this.leadTime,e.trailTime=this.trailTime,e.width=this.width,e.resolution=this.resolution,e.material=this.material,e.distanceDisplayCondition=this.distanceDisplayCondition,e):new bC(this)};bC.prototype.merge=function(e){this.show=this.show??e.show,this.leadTime=this.leadTime??e.leadTime,this.trailTime=this.trailTime??e.trailTime,this.width=this.width??e.width,this.resolution=this.resolution??e.resolution,this.material=this.material??e.material,this.distanceDisplayCondition=this.distanceDisplayCondition??e.distanceDisplayCondition};var My=bC;function BC(e){this._definitionChanged=new fe,this._show=void 0,this._showSubscription=void 0,this._plane=void 0,this._planeSubscription=void 0,this._dimensions=void 0,this._dimensionsSubscription=void 0,this._fill=void 0,this._fillSubscription=void 0,this._material=void 0,this._materialSubscription=void 0,this._outline=void 0,this._outlineSubscription=void 0,this._outlineColor=void 0,this._outlineColorSubscription=void 0,this._outlineWidth=void 0,this._outlineWidthSubscription=void 0,this._shadows=void 0,this._shadowsSubscription=void 0,this._distanceDisplayCondition=void 0,this._distanceDisplayConditionSubscription=void 0,this.merge(e??k.EMPTY_OBJECT)}Object.defineProperties(BC.prototype,{definitionChanged:{get:function(){return this._definitionChanged}},show:W("show"),plane:W("plane"),dimensions:W("dimensions"),fill:W("fill"),material:gi("material"),outline:W("outline"),outlineColor:W("outlineColor"),outlineWidth:W("outlineWidth"),shadows:W("shadows"),distanceDisplayCondition:W("distanceDisplayCondition")});BC.prototype.clone=function(e){return c(e)?(e.show=this.show,e.plane=this.plane,e.dimensions=this.dimensions,e.fill=this.fill,e.material=this.material,e.outline=this.outline,e.outlineColor=this.outlineColor,e.outlineWidth=this.outlineWidth,e.shadows=this.shadows,e.distanceDisplayCondition=this.distanceDisplayCondition,e):new BC(this)};BC.prototype.merge=function(e){this.show=this.show??e.show,this.plane=this.plane??e.plane,this.dimensions=this.dimensions??e.dimensions,this.fill=this.fill??e.fill,this.material=this.material??e.material,this.outline=this.outline??e.outline,this.outlineColor=this.outlineColor??e.outlineColor,this.outlineWidth=this.outlineWidth??e.outlineWidth,this.shadows=this.shadows??e.shadows,this.distanceDisplayCondition=this.distanceDisplayCondition??e.distanceDisplayCondition};var Jk=BC;function xC(e){this._definitionChanged=new fe,this._show=void 0,this._showSubscription=void 0,this._pixelSize=void 0,this._pixelSizeSubscription=void 0,this._heightReference=void 0,this._heightReferenceSubscription=void 0,this._color=void 0,this._colorSubscription=void 0,this._outlineColor=void 0,this._outlineColorSubscription=void 0,this._outlineWidth=void 0,this._outlineWidthSubscription=void 0,this._scaleByDistance=void 0,this._scaleByDistanceSubscription=void 0,this._translucencyByDistance=void 0,this._translucencyByDistanceSubscription=void 0,this._distanceDisplayCondition=void 0,this._distanceDisplayConditionSubscription=void 0,this._disableDepthTestDistance=void 0,this._disableDepthTestDistanceSubscription=void 0,this._splitDirection=void 0,this._splitDirectionSubscription=void 0,this.merge(e??k.EMPTY_OBJECT)}Object.defineProperties(xC.prototype,{definitionChanged:{get:function(){return this._definitionChanged}},show:W("show"),pixelSize:W("pixelSize"),heightReference:W("heightReference"),color:W("color"),outlineColor:W("outlineColor"),outlineWidth:W("outlineWidth"),scaleByDistance:W("scaleByDistance"),translucencyByDistance:W("translucencyByDistance"),distanceDisplayCondition:W("distanceDisplayCondition"),disableDepthTestDistance:W("disableDepthTestDistance"),splitDirection:W("splitDirection")});xC.prototype.clone=function(e){return c(e)?(e.show=this.show,e.pixelSize=this.pixelSize,e.heightReference=this.heightReference,e.color=this.color,e.outlineColor=this.outlineColor,e.outlineWidth=this.outlineWidth,e.scaleByDistance=this.scaleByDistance,e.translucencyByDistance=this._translucencyByDistance,e.distanceDisplayCondition=this.distanceDisplayCondition,e.disableDepthTestDistance=this.disableDepthTestDistance,e.splitDirection=this.splitDirection,e):new xC(this)};xC.prototype.merge=function(e){this.show=this.show??e.show,this.pixelSize=this.pixelSize??e.pixelSize,this.heightReference=this.heightReference??e.heightReference,this.color=this.color??e.color,this.outlineColor=this.outlineColor??e.outlineColor,this.outlineWidth=this.outlineWidth??e.outlineWidth,this.scaleByDistance=this.scaleByDistance??e.scaleByDistance,this.translucencyByDistance=this._translucencyByDistance??e.translucencyByDistance,this.distanceDisplayCondition=this.distanceDisplayCondition??e.distanceDisplayCondition,this.disableDepthTestDistance=this.disableDepthTestDistance??e.disableDepthTestDistance,this.splitDirection=this.splitDirection??e.splitDirection};var Oy=xC;function voe(e,t){this.positions=c(e)?e:[],this.holes=c(t)?t:[]}var Nd=voe;function Poe(e){return Array.isArray(e)&&(e=new Nd(e)),new li(e)}function TC(e){this._definitionChanged=new fe,this._show=void 0,this._showSubscription=void 0,this._hierarchy=void 0,this._hierarchySubscription=void 0,this._height=void 0,this._heightSubscription=void 0,this._heightReference=void 0,this._heightReferenceSubscription=void 0,this._extrudedHeight=void 0,this._extrudedHeightSubscription=void 0,this._extrudedHeightReference=void 0,this._extrudedHeightReferenceSubscription=void 0,this._stRotation=void 0,this._stRotationSubscription=void 0,this._granularity=void 0,this._granularitySubscription=void 0,this._fill=void 0,this._fillSubscription=void 0,this._material=void 0,this._materialSubscription=void 0,this._outline=void 0,this._outlineSubscription=void 0,this._outlineColor=void 0,this._outlineColorSubscription=void 0,this._outlineWidth=void 0,this._outlineWidthSubscription=void 0,this._perPositionHeight=void 0,this._perPositionHeightSubscription=void 0,this._closeTop=void 0,this._closeTopSubscription=void 0,this._closeBottom=void 0,this._closeBottomSubscription=void 0,this._arcType=void 0,this._arcTypeSubscription=void 0,this._shadows=void 0,this._shadowsSubscription=void 0,this._distanceDisplayCondition=void 0,this._distanceDisplayConditionSubscription=void 0,this._classificationType=void 0,this._classificationTypeSubscription=void 0,this._zIndex=void 0,this._zIndexSubscription=void 0,this._textureCoordinates=void 0,this._textureCoordinatesSubscription=void 0,this.merge(e??k.EMPTY_OBJECT)}Object.defineProperties(TC.prototype,{definitionChanged:{get:function(){return this._definitionChanged}},show:W("show"),hierarchy:W("hierarchy",void 0,Poe),height:W("height"),heightReference:W("heightReference"),extrudedHeight:W("extrudedHeight"),extrudedHeightReference:W("extrudedHeightReference"),stRotation:W("stRotation"),granularity:W("granularity"),fill:W("fill"),material:gi("material"),outline:W("outline"),outlineColor:W("outlineColor"),outlineWidth:W("outlineWidth"),perPositionHeight:W("perPositionHeight"),closeTop:W("closeTop"),closeBottom:W("closeBottom"),arcType:W("arcType"),shadows:W("shadows"),distanceDisplayCondition:W("distanceDisplayCondition"),classificationType:W("classificationType"),zIndex:W("zIndex"),textureCoordinates:W("textureCoordinates")});TC.prototype.clone=function(e){return c(e)?(e.show=this.show,e.hierarchy=this.hierarchy,e.height=this.height,e.heightReference=this.heightReference,e.extrudedHeight=this.extrudedHeight,e.extrudedHeightReference=this.extrudedHeightReference,e.stRotation=this.stRotation,e.granularity=this.granularity,e.fill=this.fill,e.material=this.material,e.outline=this.outline,e.outlineColor=this.outlineColor,e.outlineWidth=this.outlineWidth,e.perPositionHeight=this.perPositionHeight,e.closeTop=this.closeTop,e.closeBottom=this.closeBottom,e.arcType=this.arcType,e.shadows=this.shadows,e.distanceDisplayCondition=this.distanceDisplayCondition,e.classificationType=this.classificationType,e.zIndex=this.zIndex,e.textureCoordinates=this.textureCoordinates,e):new TC(this)};TC.prototype.merge=function(e){this.show=this.show??e.show,this.hierarchy=this.hierarchy??e.hierarchy,this.height=this.height??e.height,this.heightReference=this.heightReference??e.heightReference,this.extrudedHeight=this.extrudedHeight??e.extrudedHeight,this.extrudedHeightReference=this.extrudedHeightReference??e.extrudedHeightReference,this.stRotation=this.stRotation??e.stRotation,this.granularity=this.granularity??e.granularity,this.fill=this.fill??e.fill,this.material=this.material??e.material,this.outline=this.outline??e.outline,this.outlineColor=this.outlineColor??e.outlineColor,this.outlineWidth=this.outlineWidth??e.outlineWidth,this.perPositionHeight=this.perPositionHeight??e.perPositionHeight,this.closeTop=this.closeTop??e.closeTop,this.closeBottom=this.closeBottom??e.closeBottom,this.arcType=this.arcType??e.arcType,this.shadows=this.shadows??e.shadows,this.distanceDisplayCondition=this.distanceDisplayCondition??e.distanceDisplayCondition,this.classificationType=this.classificationType??e.classificationType,this.zIndex=this.zIndex??e.zIndex,this.textureCoordinates=this.textureCoordinates??e.textureCoordinates};var Ly=TC;function SC(e){this._definitionChanged=new fe,this._show=void 0,this._showSubscription=void 0,this._positions=void 0,this._positionsSubscription=void 0,this._width=void 0,this._widthSubscription=void 0,this._granularity=void 0,this._granularitySubscription=void 0,this._material=void 0,this._materialSubscription=void 0,this._depthFailMaterial=void 0,this._depthFailMaterialSubscription=void 0,this._arcType=void 0,this._arcTypeSubscription=void 0,this._clampToGround=void 0,this._clampToGroundSubscription=void 0,this._shadows=void 0,this._shadowsSubscription=void 0,this._distanceDisplayCondition=void 0,this._distanceDisplayConditionSubscription=void 0,this._classificationType=void 0,this._classificationTypeSubscription=void 0,this._zIndex=void 0,this._zIndexSubscription=void 0,this.merge(e??k.EMPTY_OBJECT)}Object.defineProperties(SC.prototype,{definitionChanged:{get:function(){return this._definitionChanged}},show:W("show"),positions:W("positions"),width:W("width"),granularity:W("granularity"),material:gi("material"),depthFailMaterial:gi("depthFailMaterial"),arcType:W("arcType"),clampToGround:W("clampToGround"),shadows:W("shadows"),distanceDisplayCondition:W("distanceDisplayCondition"),classificationType:W("classificationType"),zIndex:W("zIndex")});SC.prototype.clone=function(e){return c(e)?(e.show=this.show,e.positions=this.positions,e.width=this.width,e.granularity=this.granularity,e.material=this.material,e.depthFailMaterial=this.depthFailMaterial,e.arcType=this.arcType,e.clampToGround=this.clampToGround,e.shadows=this.shadows,e.distanceDisplayCondition=this.distanceDisplayCondition,e.classificationType=this.classificationType,e.zIndex=this.zIndex,e):new SC(this)};SC.prototype.merge=function(e){this.show=this.show??e.show,this.positions=this.positions??e.positions,this.width=this.width??e.width,this.granularity=this.granularity??e.granularity,this.material=this.material??e.material,this.depthFailMaterial=this.depthFailMaterial??e.depthFailMaterial,this.arcType=this.arcType??e.arcType,this.clampToGround=this.clampToGround??e.clampToGround,this.shadows=this.shadows??e.shadows,this.distanceDisplayCondition=this.distanceDisplayCondition??e.distanceDisplayCondition,this.classificationType=this.classificationType??e.classificationType,this.zIndex=this.zIndex??e.zIndex};var Ny=SC;function wC(e){this._definitionChanged=new fe,this._show=void 0,this._showSubscription=void 0,this._positions=void 0,this._positionsSubscription=void 0,this._shape=void 0,this._shapeSubscription=void 0,this._cornerType=void 0,this._cornerTypeSubscription=void 0,this._granularity=void 0,this._granularitySubscription=void 0,this._fill=void 0,this._fillSubscription=void 0,this._material=void 0,this._materialSubscription=void 0,this._outline=void 0,this._outlineSubscription=void 0,this._outlineColor=void 0,this._outlineColorSubscription=void 0,this._outlineWidth=void 0,this._outlineWidthSubscription=void 0,this._shadows=void 0,this._shadowsSubscription=void 0,this._distanceDisplayCondition=void 0,this._distanceDisplayConditionSubsription=void 0,this.merge(e??k.EMPTY_OBJECT)}Object.defineProperties(wC.prototype,{definitionChanged:{get:function(){return this._definitionChanged}},show:W("show"),positions:W("positions"),shape:W("shape"),cornerType:W("cornerType"),granularity:W("granularity"),fill:W("fill"),material:gi("material"),outline:W("outline"),outlineColor:W("outlineColor"),outlineWidth:W("outlineWidth"),shadows:W("shadows"),distanceDisplayCondition:W("distanceDisplayCondition")});wC.prototype.clone=function(e){return c(e)?(e.show=this.show,e.positions=this.positions,e.shape=this.shape,e.cornerType=this.cornerType,e.granularity=this.granularity,e.fill=this.fill,e.material=this.material,e.outline=this.outline,e.outlineColor=this.outlineColor,e.outlineWidth=this.outlineWidth,e.shadows=this.shadows,e.distanceDisplayCondition=this.distanceDisplayCondition,e):new wC(this)};wC.prototype.merge=function(e){this.show=this.show??e.show,this.positions=this.positions??e.positions,this.shape=this.shape??e.shape,this.cornerType=this.cornerType??e.cornerType,this.granularity=this.granularity??e.granularity,this.fill=this.fill??e.fill,this.material=this.material??e.material,this.outline=this.outline??e.outline,this.outlineColor=this.outlineColor??e.outlineColor,this.outlineWidth=this.outlineWidth??e.outlineWidth,this.shadows=this.shadows??e.shadows,this.distanceDisplayCondition=this.distanceDisplayCondition??e.distanceDisplayCondition};var Fy=wC;function DC(e){this._definitionChanged=new fe,this._show=void 0,this._showSubscription=void 0,this._coordinates=void 0,this._coordinatesSubscription=void 0,this._height=void 0,this._heightSubscription=void 0,this._heightReference=void 0,this._heightReferenceSubscription=void 0,this._extrudedHeight=void 0,this._extrudedHeightSubscription=void 0,this._extrudedHeightReference=void 0,this._extrudedHeightReferenceSubscription=void 0,this._rotation=void 0,this._rotationSubscription=void 0,this._stRotation=void 0,this._stRotationSubscription=void 0,this._granularity=void 0,this._granularitySubscription=void 0,this._fill=void 0,this._fillSubscription=void 0,this._material=void 0,this._materialSubscription=void 0,this._outline=void 0,this._outlineSubscription=void 0,this._outlineColor=void 0,this._outlineColorSubscription=void 0,this._outlineWidth=void 0,this._outlineWidthSubscription=void 0,this._shadows=void 0,this._shadowsSubscription=void 0,this._distanceDisplayCondition=void 0,this._distancedisplayConditionSubscription=void 0,this._classificationType=void 0,this._classificationTypeSubscription=void 0,this._zIndex=void 0,this._zIndexSubscription=void 0,this.merge(e??k.EMPTY_OBJECT)}Object.defineProperties(DC.prototype,{definitionChanged:{get:function(){return this._definitionChanged}},show:W("show"),coordinates:W("coordinates"),height:W("height"),heightReference:W("heightReference"),extrudedHeight:W("extrudedHeight"),extrudedHeightReference:W("extrudedHeightReference"),rotation:W("rotation"),stRotation:W("stRotation"),granularity:W("granularity"),fill:W("fill"),material:gi("material"),outline:W("outline"),outlineColor:W("outlineColor"),outlineWidth:W("outlineWidth"),shadows:W("shadows"),distanceDisplayCondition:W("distanceDisplayCondition"),classificationType:W("classificationType"),zIndex:W("zIndex")});DC.prototype.clone=function(e){return c(e)?(e.show=this.show,e.coordinates=this.coordinates,e.height=this.height,e.heightReference=this.heightReference,e.extrudedHeight=this.extrudedHeight,e.extrudedHeightReference=this.extrudedHeightReference,e.rotation=this.rotation,e.stRotation=this.stRotation,e.granularity=this.granularity,e.fill=this.fill,e.material=this.material,e.outline=this.outline,e.outlineColor=this.outlineColor,e.outlineWidth=this.outlineWidth,e.shadows=this.shadows,e.distanceDisplayCondition=this.distanceDisplayCondition,e.classificationType=this.classificationType,e.zIndex=this.zIndex,e):new DC(this)};DC.prototype.merge=function(e){this.show=this.show??e.show,this.coordinates=this.coordinates??e.coordinates,this.height=this.height??e.height,this.heightReference=this.heightReference??e.heightReference,this.extrudedHeight=this.extrudedHeight??e.extrudedHeight,this.extrudedHeightReference=this.extrudedHeightReference??e.extrudedHeightReference,this.rotation=this.rotation??e.rotation,this.stRotation=this.stRotation??e.stRotation,this.granularity=this.granularity??e.granularity,this.fill=this.fill??e.fill,this.material=this.material??e.material,this.outline=this.outline??e.outline,this.outlineColor=this.outlineColor??e.outlineColor,this.outlineWidth=this.outlineWidth??e.outlineWidth,this.shadows=this.shadows??e.shadows,this.distanceDisplayCondition=this.distanceDisplayCondition??e.distanceDisplayCondition,this.classificationType=this.classificationType??e.classificationType,this.zIndex=this.zIndex??e.zIndex};var ky=DC;function QC(e){this._definitionChanged=new fe,this._show=void 0,this._showSubscription=void 0,this._positions=void 0,this._positionsSubscription=void 0,this._minimumHeights=void 0,this._minimumHeightsSubscription=void 0,this._maximumHeights=void 0,this._maximumHeightsSubscription=void 0,this._granularity=void 0,this._granularitySubscription=void 0,this._fill=void 0,this._fillSubscription=void 0,this._material=void 0,this._materialSubscription=void 0,this._outline=void 0,this._outlineSubscription=void 0,this._outlineColor=void 0,this._outlineColorSubscription=void 0,this._outlineWidth=void 0,this._outlineWidthSubscription=void 0,this._shadows=void 0,this._shadowsSubscription=void 0,this._distanceDisplayCondition=void 0,this._distanceDisplayConditionSubscription=void 0,this.merge(e??k.EMPTY_OBJECT)}Object.defineProperties(QC.prototype,{definitionChanged:{get:function(){return this._definitionChanged}},show:W("show"),positions:W("positions"),minimumHeights:W("minimumHeights"),maximumHeights:W("maximumHeights"),granularity:W("granularity"),fill:W("fill"),material:gi("material"),outline:W("outline"),outlineColor:W("outlineColor"),outlineWidth:W("outlineWidth"),shadows:W("shadows"),distanceDisplayCondition:W("distanceDisplayCondition")});QC.prototype.clone=function(e){return c(e)?(e.show=this.show,e.positions=this.positions,e.minimumHeights=this.minimumHeights,e.maximumHeights=this.maximumHeights,e.granularity=this.granularity,e.fill=this.fill,e.material=this.material,e.outline=this.outline,e.outlineColor=this.outlineColor,e.outlineWidth=this.outlineWidth,e.shadows=this.shadows,e.distanceDisplayCondition=this.distanceDisplayCondition,e):new QC(this)};QC.prototype.merge=function(e){this.show=this.show??e.show,this.positions=this.positions??e.positions,this.minimumHeights=this.minimumHeights??e.minimumHeights,this.maximumHeights=this.maximumHeights??e.maximumHeights,this.granularity=this.granularity??e.granularity,this.fill=this.fill??e.fill,this.material=this.material??e.material,this.outline=this.outline??e.outline,this.outlineColor=this.outlineColor??e.outlineColor,this.outlineWidth=this.outlineWidth??e.outlineWidth,this.shadows=this.shadows??e.shadows,this.distanceDisplayCondition=this.distanceDisplayCondition??e.distanceDisplayCondition};var Uy=QC;var Moe=new ae,dS=[];function Ooe(e){return new Jf(e)}function Loe(e){return W(e,void 0,Ooe)}function ko(e,t){return W(e,void 0,function(n){return n instanceof t?n:new t(n)})}function ks(e){e=e??k.EMPTY_OBJECT;let t=e.id;c(t)||(t=oo()),this._availability=void 0,this._id=t,this._definitionChanged=new fe,this._name=e.name,this._show=e.show??!0,this._trackingReferenceFrame=e.trackingReferenceFrame??ak.AUTODETECT,this._parent=void 0,this._propertyNames=["billboard","box","corridor","cylinder","description","ellipse","ellipsoid","label","model","tileset","orientation","path","plane","point","polygon","polyline","polylineVolume","position","properties","rectangle","viewFrom","wall",...dS],this._billboard=void 0,this._billboardSubscription=void 0,this._box=void 0,this._boxSubscription=void 0,this._corridor=void 0,this._corridorSubscription=void 0,this._cylinder=void 0,this._cylinderSubscription=void 0,this._description=void 0,this._descriptionSubscription=void 0,this._ellipse=void 0,this._ellipseSubscription=void 0,this._ellipsoid=void 0,this._ellipsoidSubscription=void 0,this._label=void 0,this._labelSubscription=void 0,this._model=void 0,this._modelSubscription=void 0,this._tileset=void 0,this._tilesetSubscription=void 0,this._orientation=void 0,this._orientationSubscription=void 0,this._path=void 0,this._pathSubscription=void 0,this._plane=void 0,this._planeSubscription=void 0,this._point=void 0,this._pointSubscription=void 0,this._polygon=void 0,this._polygonSubscription=void 0,this._polyline=void 0,this._polylineSubscription=void 0,this._polylineVolume=void 0,this._polylineVolumeSubscription=void 0,this._position=void 0,this._positionSubscription=void 0,this._properties=void 0,this._propertiesSubscription=void 0,this._rectangle=void 0,this._rectangleSubscription=void 0,this._viewFrom=void 0,this._viewFromSubscription=void 0,this._wall=void 0,this._wallSubscription=void 0,this._children=[],this.entityCollection=void 0,this.parent=e.parent,this.merge(e)}function hS(e,t,n){let i=t.length;for(let o=0;o<i;o++){let r=t[o],a=r._show;(!n&&a)!==(n&&a)&&hS(r,r._children,n)}e._definitionChanged.raiseEvent(e,"isShowing",n,!n)}Object.defineProperties(ks.prototype,{availability:Ns("availability"),id:{get:function(){return this._id}},definitionChanged:{get:function(){return this._definitionChanged}},name:Ns("name"),show:{get:function(){return this._show},set:function(e){if(e===this._show)return;let t=this.isShowing;this._show=e;let n=this.isShowing;t!==n&&hS(this,this._children,n),this._definitionChanged.raiseEvent(this,"show",e,!e)}},trackingReferenceFrame:Ns("trackingReferenceFrame"),isShowing:{get:function(){return this._show&&(!c(this.entityCollection)||this.entityCollection.show)&&(!c(this._parent)||this._parent.isShowing)}},parent:{get:function(){return this._parent},set:function(e){let t=this._parent;if(t===e)return;let n=this.isShowing;if(c(t)){let o=t._children.indexOf(this);t._children.splice(o,1)}this._parent=e,c(e)&&e._children.push(this);let i=this.isShowing;n!==i&&hS(this,this._children,i),this._definitionChanged.raiseEvent(this,"parent",e,t)}},propertyNames:{get:function(){return this._propertyNames}},billboard:ko("billboard",ry),box:ko("box",xy),corridor:ko("corridor",Ty),cylinder:ko("cylinder",Sy),description:W("description"),ellipse:ko("ellipse",wy),ellipsoid:ko("ellipsoid",Dy),label:ko("label",Qy),model:ko("model",vy),tileset:ko("tileset",Py),orientation:W("orientation"),path:ko("path",My),plane:ko("plane",Jk),point:ko("point",Oy),polygon:ko("polygon",Ly),polyline:ko("polyline",Ny),polylineVolume:ko("polylineVolume",Fy),properties:ko("properties",Fs),position:Loe("position"),rectangle:ko("rectangle",ky),viewFrom:W("viewFrom"),wall:ko("wall",Uy)});ks.registerEntityType=function(e,t){Object.defineProperties(ks.prototype,{[e]:ko(e,t)}),dS.includes(e)||dS.push(e)};ks.prototype.isAvailable=function(e){let t=this._availability;return!c(t)||t.contains(e)};ks.prototype.addProperty=function(e){this._propertyNames.push(e),Object.defineProperty(this,e,Ns(e,!0))};ks.prototype.removeProperty=function(e){let n=this._propertyNames.indexOf(e);this._propertyNames.splice(n,1),delete this[e]};ks.prototype.merge=function(e){this.name=this.name??e.name,this.availability=this.availability??e.availability;let t=this._propertyNames,n=c(e._propertyNames)?e._propertyNames:Object.keys(e),i=n.length;for(let o=0;o<i;o++){let r=n[o];if(r==="parent"||r==="name"||r==="availability"||r==="children")continue;let a=this[r],s=e[r];!c(a)&&t.indexOf(r)===-1&&this.addProperty(r),c(s)&&(c(a)?c(a.merge)&&a.merge(s):c(s.merge)&&c(s.clone)?this[r]=s.clone():this[r]=s)}};var Kk=new J,Xk=new u,Zk=new qe;ks.prototype.computeModelMatrix=function(e,t){let n=M.getValueOrUndefined(this._position,e,Xk);if(!c(n))return;let i=M.getValueOrUndefined(this._orientation,e,Zk);return c(i)?t=O.fromRotationTranslation(J.fromQuaternion(i,Kk),n,t):t=Rn.eastNorthUpToFixedFrame(n,void 0,t),t};ks.prototype.computeModelMatrixForHeightReference=function(e,t,n,i,o){let r=M.getValueOrDefault(t,e,Ge.NONE),a=M.getValueOrUndefined(this._position,e,Xk);if(r===Ge.NONE||!c(a)||u.equalsEpsilon(a,u.ZERO,w.EPSILON8))return this.computeModelMatrix(e,o);let s=i.cartesianToCartographic(a,Moe);Ps(r)?s.height=n:s.height+=n,a=i.cartographicToCartesian(s,a);let A=M.getValueOrUndefined(this._orientation,e,Zk);return c(A)?o=O.fromRotationTranslation(J.fromQuaternion(A,Kk),a,o):o=Rn.eastNorthUpToFixedFrame(a,void 0,o),o};ks.supportsMaterialsforEntitiesOnTerrain=function(e){return Ls.supportsMaterials(e)};ks.supportsPolylinesOnTerrain=function(e){return qf.isSupported(e)};var ea=ks;var Noe=new lt(F.WHITE),Foe=new li(!0),koe=new li(!0),Uoe=new li(!1),Goe=new li(F.BLACK),zoe=new li(cn.DISABLED),Hoe=new li(new rt),Voe=new li(on.BOTH);function ta(e){let t=e.entity,n=e.geometryPropertyName;this._entity=t,this._scene=e.scene,this._fillEnabled=!1,this._isClosed=!1,this._onTerrain=!1,this._dynamic=!1,this._outlineEnabled=!1,this._geometryChanged=new fe,this._showProperty=void 0,this._materialProperty=void 0,this._showOutlineProperty=void 0,this._outlineColorProperty=void 0,this._outlineWidth=1,this._shadowsProperty=void 0,this._distanceDisplayConditionProperty=void 0,this._classificationTypeProperty=void 0,this._options=e.geometryOptions,this._geometryPropertyName=n,this._id=`${n}-${t.id}`,this._observedPropertyNames=e.observedPropertyNames,this._supportsMaterialsforEntitiesOnTerrain=ea.supportsMaterialsforEntitiesOnTerrain(e.scene)}Object.defineProperties(ta.prototype,{id:{get:function(){return this._id}},entity:{get:function(){return this._entity}},fillEnabled:{get:function(){return this._fillEnabled}},hasConstantFill:{get:function(){return!this._fillEnabled||!c(this._entity.availability)&&M.isConstant(this._showProperty)&&M.isConstant(this._fillProperty)}},fillMaterialProperty:{get:function(){return this._materialProperty}},outlineEnabled:{get:function(){return this._outlineEnabled}},hasConstantOutline:{get:function(){return!this._outlineEnabled||!c(this._entity.availability)&&M.isConstant(this._showProperty)&&M.isConstant(this._showOutlineProperty)}},outlineColorProperty:{get:function(){return this._outlineColorProperty}},outlineWidth:{get:function(){return this._outlineWidth}},shadowsProperty:{get:function(){return this._shadowsProperty}},distanceDisplayConditionProperty:{get:function(){return this._distanceDisplayConditionProperty}},classificationTypeProperty:{get:function(){return this._classificationTypeProperty}},isDynamic:{get:function(){return this._dynamic}},isClosed:{get:function(){return this._isClosed}},onTerrain:{get:function(){return this._onTerrain}},geometryChanged:{get:function(){return this._geometryChanged}}});ta.prototype.isOutlineVisible=function(e){let t=this._entity;return(this._outlineEnabled&&t.isAvailable(e)&&this._showProperty.getValue(e)&&this._showOutlineProperty.getValue(e))??!1};ta.prototype.isFilled=function(e){let t=this._entity;return(this._fillEnabled&&t.isAvailable(e)&&this._showProperty.getValue(e)&&this._fillProperty.getValue(e))??!1};ta.prototype.createFillGeometryInstance=Ee.throwInstantiationError;ta.prototype.createOutlineGeometryInstance=Ee.throwInstantiationError;ta.prototype.isDestroyed=function(){return!1};ta.prototype.destroy=function(){pe(this)};ta.prototype._isHidden=function(e,t){let n=t.show;return c(n)&&n.isConstant&&!n.getValue(Re.MINIMUM_VALUE)};ta.prototype._isOnTerrain=function(e,t){return!1};ta.prototype._getIsClosed=function(e){return!0};ta.prototype._isDynamic=Ee.throwInstantiationError;ta.prototype._setStaticOptions=Ee.throwInstantiationError;ta.prototype._onEntityPropertyChanged=function(e,t,n,i){if(this._observedPropertyNames.indexOf(t)===-1)return;let o=this._entity[this._geometryPropertyName];if(!c(o)){(this._fillEnabled||this._outlineEnabled)&&(this._fillEnabled=!1,this._outlineEnabled=!1,this._geometryChanged.raiseEvent(this));return}let r=o.fill,a=c(r)&&r.isConstant?r.getValue(Re.MINIMUM_VALUE):!0,s=o.outline,A=c(s);if(A&&s.isConstant&&(A=s.getValue(Re.MINIMUM_VALUE)),!a&&!A){(this._fillEnabled||this._outlineEnabled)&&(this._fillEnabled=!1,this._outlineEnabled=!1,this._geometryChanged.raiseEvent(this));return}let l=o.show;if(this._isHidden(e,o)){(this._fillEnabled||this._outlineEnabled)&&(this._fillEnabled=!1,this._outlineEnabled=!1,this._geometryChanged.raiseEvent(this));return}this._materialProperty=o.material??Noe,this._fillProperty=r??koe,this._showProperty=l??Foe,this._showOutlineProperty=o.outline??Uoe,this._outlineColorProperty=A?o.outlineColor??Goe:void 0,this._shadowsProperty=o.shadows??zoe,this._distanceDisplayConditionProperty=o.distanceDisplayCondition??Hoe,this._classificationTypeProperty=o.classificationType??Voe,this._fillEnabled=a;let f=this._isOnTerrain(e,o)&&(this._supportsMaterialsforEntitiesOnTerrain||this._materialProperty instanceof lt);if(A&&f&&(jt(jt.geometryOutlines),A=!1),this._onTerrain=f,this._outlineEnabled=A,this._isDynamic(e,o))this._dynamic||(this._dynamic=!0,this._geometryChanged.raiseEvent(this));else{this._setStaticOptions(e,o),this._isClosed=this._getIsClosed(this._options);let h=o.outlineWidth;this._outlineWidth=c(h)?h.getValue(Re.MINIMUM_VALUE):1,this._dynamic=!1,this._geometryChanged.raiseEvent(this)}};ta.prototype.createDynamicUpdater=function(e,t){return new this.constructor.DynamicGeometryUpdater(this,e,t)};var ln=ta;function Cm(e,t){this._callback=void 0,this._isConstant=void 0,this._definitionChanged=new fe,this.setCallback(e,t)}Object.defineProperties(Cm.prototype,{isConstant:{get:function(){return this._isConstant}},definitionChanged:{get:function(){return this._definitionChanged}}});var joe=new X;Cm.prototype.getValue=function(e,t){return c(e)||(e=X.now(joe)),this._callback(e,t)};Cm.prototype.setCallback=function(e,t){let n=this._callback!==e||this._isConstant!==t;this._callback=e,this._isConstant=t,n&&this._definitionChanged.raiseEvent(this)};Cm.prototype.equals=function(e){return this===e||e instanceof Cm&&this._callback===e._callback&&this._isConstant===e._isConstant};var _m=Cm;var $k=new u;function Em(e,t,n,i){this._scene=e,this._heightReference=n,this._extrudedHeightReference=i,this._positionProperty=t,this._position=new u,this._cartographicPosition=new ae,this._normal=new u,this._definitionChanged=new fe,this._terrainHeight=0,this._removeCallbackFunc=void 0,this._removeEventListener=void 0,this._removeModeListener=void 0;let o=this;if(c(e.globe)&&(this._removeEventListener=e.terrainProviderChanged.addEventListener(function(){o._updateClamping()}),this._removeModeListener=e.morphComplete.addEventListener(function(){o._updateClamping()})),t.isConstant){let r=t.getValue(Re.MINIMUM_VALUE,$k);if(!c(r)||u.equals(r,u.ZERO)||!c(e.globe))return;this._position=u.clone(r,this._position),this._updateClamping(),this._normal=e.ellipsoid.geodeticSurfaceNormal(r,this._normal)}}Object.defineProperties(Em.prototype,{isConstant:{get:function(){return!1}},definitionChanged:{get:function(){return this._definitionChanged}}});Em.prototype._updateClamping=function(){c(this._removeCallbackFunc)&&this._removeCallbackFunc();let e=this._scene,t=this._position;if(u.equals(t,u.ZERO)){this._terrainHeight=0;return}let i=e.ellipsoid.cartesianToCartographic(t,this._cartographicPosition),o=e.getHeight(i,this._heightReference);c(o)?this._terrainHeight=o:this._terrainHeight=0;let r=a=>{this._terrainHeight=a.height,this.definitionChanged.raiseEvent()};this._removeCallbackFunc=e.updateHeight(i,r,this._heightReference)};var Yoe=new X;Em.prototype.getValue=function(e,t){c(e)||(e=X.now(Yoe));let n=M.getValueOrDefault(this._heightReference,e,Ge.NONE),i=M.getValueOrDefault(this._extrudedHeightReference,e,Ge.NONE);if(n===Ge.NONE&&!cm(i))return this._position=u.clone(u.ZERO,this._position),u.clone(u.ZERO,t);if(this._positionProperty.isConstant)return u.multiplyByScalar(this._normal,this._terrainHeight,t);let o=this._scene,r=this._positionProperty.getValue(e,$k);if(!c(r)||u.equals(r,u.ZERO)||!c(o.globe))return u.clone(u.ZERO,t);if(u.equalsEpsilon(this._position,r,w.EPSILON10))return u.multiplyByScalar(this._normal,this._terrainHeight,t);this._position=u.clone(r,this._position),this._updateClamping();let a=o.ellipsoid.geodeticSurfaceNormal(r,this._normal);return u.multiplyByScalar(a,this._terrainHeight,t)};Em.prototype.isDestroyed=function(){return!1};Em.prototype.destroy=function(){return c(this._removeEventListener)&&this._removeEventListener(),c(this._removeModeListener)&&this._removeModeListener(),c(this._removeCallbackFunc)&&this._removeCallbackFunc(),pe(this)};var Gy=Em;function qoe(e,t,n,i){if(ln.prototype._onEntityPropertyChanged.call(this,e,t,n,i),this._observedPropertyNames.indexOf(t)===-1)return;let o=this._entity[this._geometryPropertyName];if(!c(o))return;c(this._terrainOffsetProperty)&&(this._terrainOffsetProperty.destroy(),this._terrainOffsetProperty=void 0);let r=o.heightReference;if(c(r)){let a=new _m(this._computeCenter.bind(this),!this._dynamic);this._terrainOffsetProperty=new Gy(this._scene,a,r)}}var Im=qoe;var e2=u.ZERO,t2=new u,Woe=new u,n2=new F;function Joe(e){this.id=e,this.vertexFormat=void 0,this.dimensions=void 0,this.offsetAttribute=void 0}function $a(e,t){ln.call(this,{entity:e,scene:t,geometryOptions:new Joe(e),geometryPropertyName:"box",observedPropertyNames:["availability","position","orientation","box"]}),this._onEntityPropertyChanged(e,"box",e.box,void 0)}c(Object.create)&&($a.prototype=Object.create(ln.prototype),$a.prototype.constructor=$a);Object.defineProperties($a.prototype,{terrainOffsetProperty:{get:function(){return this._terrainOffsetProperty}}});$a.prototype.createFillGeometryInstance=function(e){let t=this._entity,n=t.isAvailable(e),i=new kt(n&&t.isShowing&&this._showProperty.getValue(e)&&this._fillProperty.getValue(e)),o=this._distanceDisplayConditionProperty.getValue(e),r=Kt.fromDistanceDisplayCondition(o),a={show:i,distanceDisplayCondition:r,color:void 0,offset:void 0};if(this._materialProperty instanceof lt){let s;c(this._materialProperty.color)&&(this._materialProperty.color.isConstant||n)&&(s=this._materialProperty.color.getValue(e,n2)),c(s)||(s=F.WHITE),a.color=Tt.fromColor(s)}return c(this._options.offsetAttribute)&&(a.offset=ii.fromCartesian3(M.getValueOrDefault(this._terrainOffsetProperty,e,e2,t2))),new gt({id:t,geometry:Gg.fromDimensions(this._options),modelMatrix:t.computeModelMatrixForHeightReference(e,t.box.heightReference,this._options.dimensions.z*.5,this._scene.ellipsoid),attributes:a})};$a.prototype.createOutlineGeometryInstance=function(e){let t=this._entity,n=t.isAvailable(e),i=M.getValueOrDefault(this._outlineColorProperty,e,F.BLACK,n2),o=this._distanceDisplayConditionProperty.getValue(e),r={show:new kt(n&&t.isShowing&&this._showProperty.getValue(e)&&this._showOutlineProperty.getValue(e)),color:Tt.fromColor(i),distanceDisplayCondition:Kt.fromDistanceDisplayCondition(o),offset:void 0};return c(this._options.offsetAttribute)&&(r.offset=ii.fromCartesian3(M.getValueOrDefault(this._terrainOffsetProperty,e,e2,t2))),new gt({id:t,geometry:ay.fromDimensions(this._options),modelMatrix:t.computeModelMatrixForHeightReference(e,t.box.heightReference,this._options.dimensions.z*.5,this._scene.ellipsoid),attributes:r})};$a.prototype._computeCenter=function(e,t){return M.getValueOrUndefined(this._entity.position,e,t)};$a.prototype._isHidden=function(e,t){return!c(t.dimensions)||!c(e.position)||ln.prototype._isHidden.call(this,e,t)};$a.prototype._isDynamic=function(e,t){return!e.position.isConstant||!M.isConstant(e.orientation)||!t.dimensions.isConstant||!M.isConstant(t.outlineWidth)};$a.prototype._setStaticOptions=function(e,t){let n=M.getValueOrDefault(t.heightReference,Re.MINIMUM_VALUE,Ge.NONE),i=this._options;i.vertexFormat=this._materialProperty instanceof lt?Vt.VERTEX_FORMAT:Zn.MaterialSupport.TEXTURED.vertexFormat,i.dimensions=t.dimensions.getValue(Re.MINIMUM_VALUE,i.dimensions),i.offsetAttribute=n!==Ge.NONE?xt.ALL:void 0};$a.prototype._onEntityPropertyChanged=Im;$a.DynamicGeometryUpdater=ym;function ym(e,t,n){An.call(this,e,t,n)}c(Object.create)&&(ym.prototype=Object.create(An.prototype),ym.prototype.constructor=ym);ym.prototype._isHidden=function(e,t,n){let i=M.getValueOrUndefined(e.position,n,Woe),o=this._options.dimensions;return!c(i)||!c(o)||An.prototype._isHidden.call(this,e,t,n)};ym.prototype._setOptions=function(e,t,n){let i=M.getValueOrDefault(t.heightReference,n,Ge.NONE),o=this._options;o.dimensions=M.getValueOrUndefined(t.dimensions,n,o.dimensions),o.offsetAttribute=i!==Ge.NONE?xt.ALL:void 0};var i2=$a;function Fd(e,t,n){this._callback=void 0,this._isConstant=void 0,this._referenceFrame=n??oi.FIXED,this._definitionChanged=new fe,this.setCallback(e,t)}Object.defineProperties(Fd.prototype,{isConstant:{get:function(){return this._isConstant}},definitionChanged:{get:function(){return this._definitionChanged}},referenceFrame:{get:function(){return this._referenceFrame}}});var Koe=new X;Fd.prototype.getValue=function(e,t){return c(e)||(e=X.now(Koe)),this.getValueInReferenceFrame(e,oi.FIXED,t)};Fd.prototype.setCallback=function(e,t){let n=this._callback!==e||this._isConstant!==t;this._callback=e,this._isConstant=t,n&&this._definitionChanged.raiseEvent(this)};Fd.prototype.getValueInReferenceFrame=function(e,t,n){let i=this._callback(e,n);return Wf.convertToReferenceFrame(e,i,this._referenceFrame,t,n)};Fd.prototype.equals=function(e){return this===e||e instanceof Fd&&this._callback===e._callback&&this._isConstant===e._isConstant&&this._referenceFrame===e._referenceFrame};var o2=Fd;/*! @license DOMPurify 3.2.6 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.6/LICENSE */var{entries:h2,setPrototypeOf:r2,isFrozen:Xoe,getPrototypeOf:Zoe,getOwnPropertyDescriptor:$oe}=Object,{freeze:ia,seal:Us,create:m2}=Object,{apply:ES,construct:IS}=typeof Reflect<"u"&&Reflect;ia||(ia=function(t){return t});Us||(Us=function(t){return t});ES||(ES=function(t,n,i){return t.apply(n,i)});IS||(IS=function(t,n){return new t(...n)});var zy=oa(Array.prototype.forEach),ere=oa(Array.prototype.lastIndexOf),a2=oa(Array.prototype.pop),RC=oa(Array.prototype.push),tre=oa(Array.prototype.splice),Vy=oa(String.prototype.toLowerCase),mS=oa(String.prototype.toString),s2=oa(String.prototype.match),vC=oa(String.prototype.replace),nre=oa(String.prototype.indexOf),ire=oa(String.prototype.trim),Bc=oa(Object.prototype.hasOwnProperty),na=oa(RegExp.prototype.test),PC=ore(TypeError);function oa(e){return function(t){t instanceof RegExp&&(t.lastIndex=0);for(var n=arguments.length,i=new Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];return ES(e,t,i)}}function ore(e){return function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return IS(e,n)}}function vn(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Vy;r2&&r2(e,null);let i=t.length;for(;i--;){let o=t[i];if(typeof o=="string"){let r=n(o);r!==o&&(Xoe(t)||(t[i]=r),o=r)}e[o]=!0}return e}function rre(e){for(let t=0;t<e.length;t++)Bc(e,t)||(e[t]=null);return e}function bl(e){let t=m2(null);for(let[n,i]of h2(e))Bc(e,n)&&(Array.isArray(i)?t[n]=rre(i):i&&typeof i=="object"&&i.constructor===Object?t[n]=bl(i):t[n]=i);return t}function MC(e,t){for(;e!==null;){let i=$oe(e,t);if(i){if(i.get)return oa(i.get);if(typeof i.value=="function")return oa(i.value)}e=Zoe(e)}function n(){return null}return n}var c2=ia(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),pS=ia(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),gS=ia(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),are=ia(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),CS=ia(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),sre=ia(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),A2=ia(["#text"]),l2=ia(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),_S=ia(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),f2=ia(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Hy=ia(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),cre=Us(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Are=Us(/<%[\w\W]*|[\w\W]*%>/gm),lre=Us(/\$\{[\w\W]*/gm),fre=Us(/^data-[\-\w.\u00B7-\uFFFF]+$/),ure=Us(/^aria-[\-\w]+$/),p2=Us(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),dre=Us(/^(?:\w+script|data):/i),hre=Us(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),g2=Us(/^html$/i),mre=Us(/^[a-z][.\w]*(-[.\w]+)+$/i),u2=Object.freeze({__proto__:null,ARIA_ATTR:ure,ATTR_WHITESPACE:hre,CUSTOM_ELEMENT:mre,DATA_ATTR:fre,DOCTYPE_NAME:g2,ERB_EXPR:Are,IS_ALLOWED_URI:p2,IS_SCRIPT_OR_DATA:dre,MUSTACHE_EXPR:cre,TMPLIT_EXPR:lre}),OC={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entityNode:6,progressingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12},pre=function(){return typeof window>"u"?null:window},gre=function(t,n){if(typeof t!="object"||typeof t.createPolicy!="function")return null;let i=null,o="data-tt-policy-suffix";n&&n.hasAttribute(o)&&(i=n.getAttribute(o));let r="dompurify"+(i?"#"+i:"");try{return t.createPolicy(r,{createHTML(a){return a},createScriptURL(a){return a}})}catch{return console.warn("TrustedTypes policy "+r+" could not be created."),null}},d2=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function C2(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:pre(),t=Pt=>C2(Pt);if(t.version="3.2.6",t.removed=[],!e||!e.document||e.document.nodeType!==OC.document||!e.Element)return t.isSupported=!1,t;let{document:n}=e,i=n,o=i.currentScript,{DocumentFragment:r,HTMLTemplateElement:a,Node:s,Element:A,NodeFilter:l,NamedNodeMap:f=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:h,DOMParser:m,trustedTypes:p}=e,g=A.prototype,C=MC(g,"cloneNode"),_=MC(g,"remove"),E=MC(g,"nextSibling"),I=MC(g,"childNodes"),y=MC(g,"parentNode");if(typeof a=="function"){let Pt=n.createElement("template");Pt.content&&Pt.content.ownerDocument&&(n=Pt.content.ownerDocument)}let b,x="",{implementation:S,createNodeIterator:P,createDocumentFragment:D,getElementsByTagName:Q}=n,{importNode:v}=i,d=d2();t.isSupported=typeof h2=="function"&&typeof y=="function"&&S&&S.createHTMLDocument!==void 0;let{MUSTACHE_EXPR:B,ERB_EXPR:T,TMPLIT_EXPR:R,DATA_ATTR:L,ARIA_ATTR:G,IS_SCRIPT_OR_DATA:q,ATTR_WHITESPACE:z,CUSTOM_ELEMENT:K}=u2,{IS_ALLOWED_URI:ie}=u2,le=null,de=vn({},[...c2,...pS,...gS,...CS,...A2]),he=null,Se=vn({},[...l2,..._S,...f2,...Hy]),be=Object.seal(m2(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),_e=null,Ct=null,ft=!0,At=!0,at=!1,Xe=!0,wt=!1,zt=!0,ti=!1,Li=!1,Cn=!1,yt=!1,Un=!1,sn=!1,ri=!0,ha=!1,nA="user-content-",$A=!0,ma=!1,vo={},Cr=null,_s=vn({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),iA=null,sd=vn({},["audio","video","img","source","image","track"]),el=null,bf=vn({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Es="http://www.w3.org/1998/Math/MathML",ka="http://www.w3.org/2000/svg",fo="http://www.w3.org/1999/xhtml",uc=fo,Bf=!1,Vr=null,pa=vn({},[Es,ka,fo],mS),_r=vn({},["mi","mo","mn","ms","mtext"]),Er=vn({},["annotation-xml"]),xf=vn({},["title","style","font","a","script"]),Ua=null,Tf=["application/xhtml+xml","text/html"],Sf="text/html",_n=null,Kn=null,dc=n.createElement("form"),Ga=function(Ae){return Ae instanceof RegExp||Ae instanceof Function},oA=function(){let Ae=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(Kn&&Kn===Ae)){if((!Ae||typeof Ae!="object")&&(Ae={}),Ae=bl(Ae),Ua=Tf.indexOf(Ae.PARSER_MEDIA_TYPE)===-1?Sf:Ae.PARSER_MEDIA_TYPE,_n=Ua==="application/xhtml+xml"?mS:Vy,le=Bc(Ae,"ALLOWED_TAGS")?vn({},Ae.ALLOWED_TAGS,_n):de,he=Bc(Ae,"ALLOWED_ATTR")?vn({},Ae.ALLOWED_ATTR,_n):Se,Vr=Bc(Ae,"ALLOWED_NAMESPACES")?vn({},Ae.ALLOWED_NAMESPACES,mS):pa,el=Bc(Ae,"ADD_URI_SAFE_ATTR")?vn(bl(bf),Ae.ADD_URI_SAFE_ATTR,_n):bf,iA=Bc(Ae,"ADD_DATA_URI_TAGS")?vn(bl(sd),Ae.ADD_DATA_URI_TAGS,_n):sd,Cr=Bc(Ae,"FORBID_CONTENTS")?vn({},Ae.FORBID_CONTENTS,_n):_s,_e=Bc(Ae,"FORBID_TAGS")?vn({},Ae.FORBID_TAGS,_n):bl({}),Ct=Bc(Ae,"FORBID_ATTR")?vn({},Ae.FORBID_ATTR,_n):bl({}),vo=Bc(Ae,"USE_PROFILES")?Ae.USE_PROFILES:!1,ft=Ae.ALLOW_ARIA_ATTR!==!1,At=Ae.ALLOW_DATA_ATTR!==!1,at=Ae.ALLOW_UNKNOWN_PROTOCOLS||!1,Xe=Ae.ALLOW_SELF_CLOSE_IN_ATTR!==!1,wt=Ae.SAFE_FOR_TEMPLATES||!1,zt=Ae.SAFE_FOR_XML!==!1,ti=Ae.WHOLE_DOCUMENT||!1,yt=Ae.RETURN_DOM||!1,Un=Ae.RETURN_DOM_FRAGMENT||!1,sn=Ae.RETURN_TRUSTED_TYPE||!1,Cn=Ae.FORCE_BODY||!1,ri=Ae.SANITIZE_DOM!==!1,ha=Ae.SANITIZE_NAMED_PROPS||!1,$A=Ae.KEEP_CONTENT!==!1,ma=Ae.IN_PLACE||!1,ie=Ae.ALLOWED_URI_REGEXP||p2,uc=Ae.NAMESPACE||fo,_r=Ae.MATHML_TEXT_INTEGRATION_POINTS||_r,Er=Ae.HTML_INTEGRATION_POINTS||Er,be=Ae.CUSTOM_ELEMENT_HANDLING||{},Ae.CUSTOM_ELEMENT_HANDLING&&Ga(Ae.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(be.tagNameCheck=Ae.CUSTOM_ELEMENT_HANDLING.tagNameCheck),Ae.CUSTOM_ELEMENT_HANDLING&&Ga(Ae.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(be.attributeNameCheck=Ae.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),Ae.CUSTOM_ELEMENT_HANDLING&&typeof Ae.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(be.allowCustomizedBuiltInElements=Ae.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),wt&&(At=!1),Un&&(yt=!0),vo&&(le=vn({},A2),he=[],vo.html===!0&&(vn(le,c2),vn(he,l2)),vo.svg===!0&&(vn(le,pS),vn(he,_S),vn(he,Hy)),vo.svgFilters===!0&&(vn(le,gS),vn(he,_S),vn(he,Hy)),vo.mathMl===!0&&(vn(le,CS),vn(he,f2),vn(he,Hy))),Ae.ADD_TAGS&&(le===de&&(le=bl(le)),vn(le,Ae.ADD_TAGS,_n)),Ae.ADD_ATTR&&(he===Se&&(he=bl(he)),vn(he,Ae.ADD_ATTR,_n)),Ae.ADD_URI_SAFE_ATTR&&vn(el,Ae.ADD_URI_SAFE_ATTR,_n),Ae.FORBID_CONTENTS&&(Cr===_s&&(Cr=bl(Cr)),vn(Cr,Ae.FORBID_CONTENTS,_n)),$A&&(le["#text"]=!0),ti&&vn(le,["html","head","body"]),le.table&&(vn(le,["tbody"]),delete _e.tbody),Ae.TRUSTED_TYPES_POLICY){if(typeof Ae.TRUSTED_TYPES_POLICY.createHTML!="function")throw PC('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof Ae.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw PC('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');b=Ae.TRUSTED_TYPES_POLICY,x=b.createHTML("")}else b===void 0&&(b=gre(p,o)),b!==null&&typeof x=="string"&&(x=b.createHTML(""));ia&&ia(Ae),Kn=Ae}},rA=vn({},[...pS,...gS,...are]),ga=vn({},[...CS,...sre]),GE=function(Ae){let Ke=y(Ae);(!Ke||!Ke.tagName)&&(Ke={namespaceURI:uc,tagName:"template"});let St=Vy(Ae.tagName),wi=Vy(Ke.tagName);return Vr[Ae.namespaceURI]?Ae.namespaceURI===ka?Ke.namespaceURI===fo?St==="svg":Ke.namespaceURI===Es?St==="svg"&&(wi==="annotation-xml"||_r[wi]):!!rA[St]:Ae.namespaceURI===Es?Ke.namespaceURI===fo?St==="math":Ke.namespaceURI===ka?St==="math"&&Er[wi]:!!ga[St]:Ae.namespaceURI===fo?Ke.namespaceURI===ka&&!Er[wi]||Ke.namespaceURI===Es&&!_r[wi]?!1:!ga[St]&&(xf[St]||!rA[St]):!!(Ua==="application/xhtml+xml"&&Vr[Ae.namespaceURI]):!1},za=function(Ae){RC(t.removed,{element:Ae});try{y(Ae).removeChild(Ae)}catch{_(Ae)}},Ha=function(Ae,Ke){try{RC(t.removed,{attribute:Ke.getAttributeNode(Ae),from:Ke})}catch{RC(t.removed,{attribute:null,from:Ke})}if(Ke.removeAttribute(Ae),Ae==="is")if(yt||Un)try{za(Ke)}catch{}else try{Ke.setAttribute(Ae,"")}catch{}},Oh=function(Ae){let Ke=null,St=null;if(Cn)Ae="<remove></remove>"+Ae;else{let uo=s2(Ae,/^[\r\n\t ]+/);St=uo&&uo[0]}Ua==="application/xhtml+xml"&&uc===fo&&(Ae='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+Ae+"</body></html>");let wi=b?b.createHTML(Ae):Ae;if(uc===fo)try{Ke=new m().parseFromString(wi,Ua)}catch{}if(!Ke||!Ke.documentElement){Ke=S.createDocument(uc,"template",null);try{Ke.documentElement.innerHTML=Bf?x:wi}catch{}}let Yo=Ke.body||Ke.documentElement;return Ae&&St&&Yo.insertBefore(n.createTextNode(St),Yo.childNodes[0]||null),uc===fo?Q.call(Ke,ti?"html":"body")[0]:ti?Ke.documentElement:Yo},Lh=function(Ae){return P.call(Ae.ownerDocument||Ae,Ae,l.SHOW_ELEMENT|l.SHOW_COMMENT|l.SHOW_TEXT|l.SHOW_PROCESSING_INSTRUCTION|l.SHOW_CDATA_SECTION,null)},cd=function(Ae){return Ae instanceof h&&(typeof Ae.nodeName!="string"||typeof Ae.textContent!="string"||typeof Ae.removeChild!="function"||!(Ae.attributes instanceof f)||typeof Ae.removeAttribute!="function"||typeof Ae.setAttribute!="function"||typeof Ae.namespaceURI!="string"||typeof Ae.insertBefore!="function"||typeof Ae.hasChildNodes!="function")},Bg=function(Ae){return typeof s=="function"&&Ae instanceof s};function hc(Pt,Ae,Ke){zy(Pt,St=>{St.call(t,Ae,Ke,Kn)})}let xg=function(Ae){let Ke=null;if(hc(d.beforeSanitizeElements,Ae,null),cd(Ae))return za(Ae),!0;let St=_n(Ae.nodeName);if(hc(d.uponSanitizeElement,Ae,{tagName:St,allowedTags:le}),zt&&Ae.hasChildNodes()&&!Bg(Ae.firstElementChild)&&na(/<[/\w!]/g,Ae.innerHTML)&&na(/<[/\w!]/g,Ae.textContent)||Ae.nodeType===OC.progressingInstruction||zt&&Ae.nodeType===OC.comment&&na(/<[/\w]/g,Ae.data))return za(Ae),!0;if(!le[St]||_e[St]){if(!_e[St]&&HE(St)&&(be.tagNameCheck instanceof RegExp&&na(be.tagNameCheck,St)||be.tagNameCheck instanceof Function&&be.tagNameCheck(St)))return!1;if($A&&!Cr[St]){let wi=y(Ae)||Ae.parentNode,Yo=I(Ae)||Ae.childNodes;if(Yo&&wi){let uo=Yo.length;for(let Ir=uo-1;Ir>=0;--Ir){let mc=C(Yo[Ir],!0);mc.__removalCount=(Ae.__removalCount||0)+1,wi.insertBefore(mc,E(Ae))}}}return za(Ae),!0}return Ae instanceof A&&!GE(Ae)||(St==="noscript"||St==="noembed"||St==="noframes")&&na(/<\/no(script|embed|frames)/i,Ae.innerHTML)?(za(Ae),!0):(wt&&Ae.nodeType===OC.text&&(Ke=Ae.textContent,zy([B,T,R],wi=>{Ke=vC(Ke,wi," ")}),Ae.textContent!==Ke&&(RC(t.removed,{element:Ae.cloneNode()}),Ae.textContent=Ke)),hc(d.afterSanitizeElements,Ae,null),!1)},zE=function(Ae,Ke,St){if(ri&&(Ke==="id"||Ke==="name")&&(St in n||St in dc))return!1;if(!(At&&!Ct[Ke]&&na(L,Ke))){if(!(ft&&na(G,Ke))){if(!he[Ke]||Ct[Ke]){if(!(HE(Ae)&&(be.tagNameCheck instanceof RegExp&&na(be.tagNameCheck,Ae)||be.tagNameCheck instanceof Function&&be.tagNameCheck(Ae))&&(be.attributeNameCheck instanceof RegExp&&na(be.attributeNameCheck,Ke)||be.attributeNameCheck instanceof Function&&be.attributeNameCheck(Ke))||Ke==="is"&&be.allowCustomizedBuiltInElements&&(be.tagNameCheck instanceof RegExp&&na(be.tagNameCheck,St)||be.tagNameCheck instanceof Function&&be.tagNameCheck(St))))return!1}else if(!el[Ke]){if(!na(ie,vC(St,z,""))){if(!((Ke==="src"||Ke==="xlink:href"||Ke==="href")&&Ae!=="script"&&nre(St,"data:")===0&&iA[Ae])){if(!(at&&!na(q,vC(St,z,"")))){if(St)return!1}}}}}}return!0},HE=function(Ae){return Ae!=="annotation-xml"&&s2(Ae,K)},tl=function(Ae){hc(d.beforeSanitizeAttributes,Ae,null);let{attributes:Ke}=Ae;if(!Ke||cd(Ae))return;let St={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:he,forceKeepAttr:void 0},wi=Ke.length;for(;wi--;){let Yo=Ke[wi],{name:uo,namespaceURI:Ir,value:mc}=Yo,nl=_n(uo),Tg=mc,qo=uo==="value"?Tg:ire(Tg);if(St.attrName=nl,St.attrValue=qo,St.keepAttr=!0,St.forceKeepAttr=void 0,hc(d.uponSanitizeAttribute,Ae,St),qo=St.attrValue,ha&&(nl==="id"||nl==="name")&&(Ha(uo,Ae),qo=nA+qo),zt&&na(/((--!?|])>)|<\/(style|title)/i,qo)){Ha(uo,Ae);continue}if(St.forceKeepAttr)continue;if(!St.keepAttr){Ha(uo,Ae);continue}if(!Xe&&na(/\/>/i,qo)){Ha(uo,Ae);continue}wt&&zy([B,T,R],YE=>{qo=vC(qo,YE," ")});let jE=_n(Ae.nodeName);if(!zE(jE,nl,qo)){Ha(uo,Ae);continue}if(b&&typeof p=="object"&&typeof p.getAttributeType=="function"&&!Ir)switch(p.getAttributeType(jE,nl)){case"TrustedHTML":{qo=b.createHTML(qo);break}case"TrustedScriptURL":{qo=b.createScriptURL(qo);break}}if(qo!==Tg)try{Ir?Ae.setAttributeNS(Ir,uo,qo):Ae.setAttribute(uo,qo),cd(Ae)?za(Ae):a2(t.removed)}catch{Ha(uo,Ae)}}hc(d.afterSanitizeAttributes,Ae,null)},VE=function Pt(Ae){let Ke=null,St=Lh(Ae);for(hc(d.beforeSanitizeShadowDOM,Ae,null);Ke=St.nextNode();)hc(d.uponSanitizeShadowNode,Ke,null),xg(Ke),tl(Ke),Ke.content instanceof r&&Pt(Ke.content);hc(d.afterSanitizeShadowDOM,Ae,null)};return t.sanitize=function(Pt){let Ae=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Ke=null,St=null,wi=null,Yo=null;if(Bf=!Pt,Bf&&(Pt="<!-->"),typeof Pt!="string"&&!Bg(Pt))if(typeof Pt.toString=="function"){if(Pt=Pt.toString(),typeof Pt!="string")throw PC("dirty is not a string, aborting")}else throw PC("toString is not a function");if(!t.isSupported)return Pt;if(Li||oA(Ae),t.removed=[],typeof Pt=="string"&&(ma=!1),ma){if(Pt.nodeName){let mc=_n(Pt.nodeName);if(!le[mc]||_e[mc])throw PC("root node is forbidden and cannot be sanitized in-place")}}else if(Pt instanceof s)Ke=Oh("<!---->"),St=Ke.ownerDocument.importNode(Pt,!0),St.nodeType===OC.element&&St.nodeName==="BODY"||St.nodeName==="HTML"?Ke=St:Ke.appendChild(St);else{if(!yt&&!wt&&!ti&&Pt.indexOf("<")===-1)return b&&sn?b.createHTML(Pt):Pt;if(Ke=Oh(Pt),!Ke)return yt?null:sn?x:""}Ke&&Cn&&za(Ke.firstChild);let uo=Lh(ma?Pt:Ke);for(;wi=uo.nextNode();)xg(wi),tl(wi),wi.content instanceof r&&VE(wi.content);if(ma)return Pt;if(yt){if(Un)for(Yo=D.call(Ke.ownerDocument);Ke.firstChild;)Yo.appendChild(Ke.firstChild);else Yo=Ke;return(he.shadowroot||he.shadowrootmode)&&(Yo=v.call(i,Yo,!0)),Yo}let Ir=ti?Ke.outerHTML:Ke.innerHTML;return ti&&le["!doctype"]&&Ke.ownerDocument&&Ke.ownerDocument.doctype&&Ke.ownerDocument.doctype.name&&na(g2,Ke.ownerDocument.doctype.name)&&(Ir="<!DOCTYPE "+Ke.ownerDocument.doctype.name+`>
`+Ir),wt&&zy([B,T,R],mc=>{Ir=vC(Ir,mc," ")}),b&&sn?b.createHTML(Ir):Ir},t.setConfig=function(){let Pt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};oA(Pt),Li=!0},t.clearConfig=function(){Kn=null,Li=!1},t.isValidAttribute=function(Pt,Ae,Ke){Kn||oA({});let St=_n(Pt),wi=_n(Ae);return zE(St,wi,Ke)},t.addHook=function(Pt,Ae){typeof Ae=="function"&&RC(d[Pt],Ae)},t.removeHook=function(Pt,Ae){if(Ae!==void 0){let Ke=ere(d[Pt],Ae);return Ke===-1?void 0:tre(d[Pt],Ke,1)[0]}return a2(d[Pt])},t.removeHooks=function(Pt){d[Pt]=[]},t.removeAllHooks=function(){d=d2()},t}var _2=C2();var Cre=0,yS={};function bA(e,t){let n,i=e;c(yS[i])?n=yS[i]:(n=Cre++,yS[i]=n),t=t??!1,this._id=n,this._html=e,this._showOnScreen=t,this._element=void 0}Object.defineProperties(bA.prototype,{html:{get:function(){return this._html}},id:{get:function(){return this._id}},showOnScreen:{get:function(){return this._showOnScreen},set:function(e){this._showOnScreen=e}},element:{get:function(){if(!c(this._element)){let e=_2.sanitize(this._html),t=document.createElement("div");t.className="cesium-credit-wrapper",t._creditId=this._id,t.style.display="inline",t.innerHTML=e;let n=t.querySelectorAll("a");for(let i=0;i<n.length;i++)n[i].setAttribute("target","_blank");this._element=t}return this._element}}});bA.equals=function(e,t){return e===t||c(e)&&c(t)&&e._id===t._id&&e._showOnScreen===t._showOnScreen};bA.prototype.equals=function(e){return bA.equals(this,e)};bA.prototype.isIon=function(){return this.html.indexOf("ion-credit.png")!==-1};bA.getIonCredit=function(e){let t=c(e.collapsible)&&!e.collapsible;return new bA(e.html,t)};bA.clone=function(e){if(c(e))return new bA(e.html,e.showOnScreen)};var fn=bA;function _re(e,t){jt(e,t)}var wr=_re;function kd(e){this._url=e,this._cubeMapBuffers=void 0,this._texture=void 0,this._maximumMipmapLevel=void 0,this._loading=!1,this._ready=!1,this._errorEvent=new fe}Object.defineProperties(kd.prototype,{url:{get:function(){return this._url}},errorEvent:{get:function(){return this._errorEvent}},texture:{get:function(){return this._texture}},maximumMipmapLevel:{get:function(){return this._maximumMipmapLevel}},ready:{get:function(){return this._ready}}});kd.isSupported=function(e){return(e.colorBufferHalfFloat&&e.halfFloatingPointTexture||e.floatingPointTexture&&e.colorBufferFloat)&&e.supportsTextureLod};function bS(e){e._cubeMapBuffers=void 0}kd.prototype.update=function(e){let{context:t}=e;if(!kd.isSupported(t))return;if(c(this._texture)){bS(this);return}if(!c(this._texture)&&!this._loading){let f=t.textureCache.getTexture(this._url);c(f)&&(bS(this),this._texture=f,this._maximumMipmapLevel=this._texture.maximumMipmapLevel,this._ready=!0)}let n=this._cubeMapBuffers;if(!c(n)&&!this._loading){let f=this;dl(this._url).then(function(h){f._cubeMapBuffers=h,f._loading=!1}).catch(function(h){f.isDestroyed()||f._errorEvent.raiseEvent(h)}),this._loading=!0}if(!c(this._cubeMapBuffers))return;let{pixelDatatype:i}=n[0].positiveX;c(i)||(i=t.halfFloatingPointTexture?_t.HALF_FLOAT:_t.FLOAT);let o=Bt.RGBA,r=n.length;this._maximumMipmapLevel=r-1;let a=n[0].positiveX.width,s=Math.log2(a)+1;if(r!==s){let f={};Object.values(Wa.FaceName).forEach(h=>{f[h]=void 0});for(let h=r;h<s;h++)n.push(f)}let A=new dn({minificationFilter:tn.LINEAR_MIPMAP_LINEAR}),l=new Wa({context:t,source:n[0],flipY:!1,pixelDatatype:i,pixelFormat:o,sampler:A});l.loadMipmaps(n.slice(1)),this._texture=l,this._texture.maximumMipmapLevel=this._maximumMipmapLevel,t.textureCache.addTexture(this._url,this._texture),this._ready=!0};kd.prototype.isDestroyed=function(){return!1};kd.prototype.destroy=function(){return bS(this),this._texture=this._texture&&this._texture.destroy(),pe(this)};var LC=kd;function NC(e){e=e??k.EMPTY_OBJECT;let t=c(e.imageBasedLightingFactor)?U.clone(e.imageBasedLightingFactor):new U(1,1);this._imageBasedLightingFactor=t;let n=e.sphericalHarmonicCoefficients;this._sphericalHarmonicCoefficients=n,this._specularEnvironmentMaps=e.specularEnvironmentMaps,this._specularEnvironmentCubeMap=void 0,this._specularEnvironmentCubeMapDirty=!0,this._specularEnvironmentMapLoaded=!1,this._previousSpecularEnvironmentMapLoaded=!1,this._useDefaultSpecularMaps=!1,this._useDefaultSphericalHarmonics=!1,this._shouldRegenerateShaders=!1,this._previousFrameNumber=void 0,this._previousFrameContext=void 0,this._previousImageBasedLightingFactor=U.clone(t),this._previousSphericalHarmonicCoefficients=n,this._removeErrorListener=void 0}Object.defineProperties(NC.prototype,{imageBasedLightingFactor:{get:function(){return this._imageBasedLightingFactor},set:function(e){this._previousImageBasedLightingFactor=U.clone(this._imageBasedLightingFactor,this._previousImageBasedLightingFactor),this._imageBasedLightingFactor=U.clone(e,this._imageBasedLightingFactor)}},sphericalHarmonicCoefficients:{get:function(){return this._sphericalHarmonicCoefficients},set:function(e){this._previousSphericalHarmonicCoefficients=this._sphericalHarmonicCoefficients,this._sphericalHarmonicCoefficients=e}},specularEnvironmentMaps:{get:function(){return this._specularEnvironmentMaps},set:function(e){e!==this._specularEnvironmentMaps&&(this._specularEnvironmentCubeMapDirty=this._specularEnvironmentCubeMapDirty||e!==this._specularEnvironmentMaps,this._specularEnvironmentMapLoaded=!1),this._specularEnvironmentMaps=e}},enabled:{get:function(){return this._imageBasedLightingFactor.x>0||this._imageBasedLightingFactor.y>0}},shouldRegenerateShaders:{get:function(){return this._shouldRegenerateShaders}},specularEnvironmentCubeMap:{get:function(){return this._specularEnvironmentCubeMap}},useDefaultSphericalHarmonics:{get:function(){return this._useDefaultSphericalHarmonics}},useDefaultSpecularMaps:{get:function(){return this._useDefaultSpecularMaps}},useSpecularEnvironmentMaps:{get:function(){return c(this._specularEnvironmentCubeMap)&&this._specularEnvironmentCubeMap.ready||this._useDefaultSpecularMaps}}});function Ere(e,t){if(LC.isSupported(t)){if(e._specularEnvironmentCubeMap=e._specularEnvironmentCubeMap&&e._specularEnvironmentCubeMap.destroy(),c(e._specularEnvironmentMaps)){let n=new LC(e._specularEnvironmentMaps);e._specularEnvironmentCubeMap=n,e._removeErrorListener=n.errorEvent.addEventListener(i=>{console.error(`Error loading specularEnvironmentMaps: ${i}`)})}e._shouldRegenerateShaders=!0}}NC.prototype.update=function(e){if(e.frameNumber===this._previousFrameNumber&&e.context===this._previousFrameContext)return;this._previousFrameNumber=e.frameNumber;let t=this._previousFrameContext=e.context;e.brdfLutGenerator.update(e),this._shouldRegenerateShaders=!1;let n=this._imageBasedLightingFactor,i=this._previousImageBasedLightingFactor;U.equals(n,i)||(this._shouldRegenerateShaders=n.x>0&&i.x===0||n.x===0&&i.x>0,this._shouldRegenerateShaders=this._shouldRegenerateShaders||n.y>0&&i.y===0||n.y===0&&i.y>0,this._previousImageBasedLightingFactor=U.clone(this._imageBasedLightingFactor,this._previousImageBasedLightingFactor)),this._previousSphericalHarmonicCoefficients!==this._sphericalHarmonicCoefficients&&(this._shouldRegenerateShaders=this._shouldRegenerateShaders||c(this._previousSphericalHarmonicCoefficients)!==c(this._sphericalHarmonicCoefficients),this._previousSphericalHarmonicCoefficients=this._sphericalHarmonicCoefficients),this._shouldRegenerateShaders=this._shouldRegenerateShaders||this._previousSpecularEnvironmentMapLoaded!==this._specularEnvironmentMapLoaded,this._previousSpecularEnvironmentMapLoaded=this._specularEnvironmentMapLoaded,this._specularEnvironmentCubeMapDirty&&(Ere(this,t),this._specularEnvironmentCubeMapDirty=!1),c(this._specularEnvironmentCubeMap)&&(this._specularEnvironmentCubeMap.update(e),this._specularEnvironmentCubeMap.ready&&(this._specularEnvironmentMapLoaded=!0));let o=!c(this._specularEnvironmentCubeMap)&&c(e.specularEnvironmentMaps)&&!this._useDefaultSpecularMaps,r=!c(e.specularEnvironmentMaps)&&this._useDefaultSpecularMaps,a=!c(this._sphericalHarmonicCoefficients)&&c(e.sphericalHarmonicCoefficients)&&!this._useDefaultSphericalHarmonics,s=!c(e.sphericalHarmonicCoefficients)&&this._useDefaultSphericalHarmonics;this._shouldRegenerateShaders=this._shouldRegenerateShaders||o||r||a||s,this._useDefaultSpecularMaps=!c(this._specularEnvironmentCubeMap)&&c(e.specularEnvironmentMaps),this._useDefaultSphericalHarmonics=!c(this._sphericalHarmonicCoefficients)&&c(e.sphericalHarmonicCoefficients)};NC.prototype.isDestroyed=function(){return!1};NC.prototype.destroy=function(){return this._specularEnvironmentCubeMap=this._specularEnvironmentCubeMap&&this._specularEnvironmentCubeMap.destroy(),this._removeErrorListener=this._removeErrorListener&&this._removeErrorListener(),pe(this)};var jy=NC;var xS=qr(pc(),1);var BS,E2="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiI2NTEwZTU2Yi0wOGEyLTQyZjgtOTJjNi04Mzc2NGRlNzA4NTkiLCJpZCI6MjU5LCJpYXQiOjE3NTY4NDExOTJ9._Y3MIsYgGKTVTpkEpKPNT0cQSa_hUocY0DdH7h0U-xM",Yy={};Yy.defaultAccessToken=E2;Yy.defaultServer=new ke({url:"https://api.cesium.com/"});Yy.getDefaultTokenCredit=function(e){if(e===E2){if(!c(BS)){let t=`<b>             This application is using Cesium's default ion access token. Please assign <i>Cesium.Ion.defaultAccessToken</i>             with an access token from your ion account before making any Cesium API calls.             You can sign up for a free ion account at <a href="https://cesium.com">https://cesium.com</a>.</b>`;BS=new fn(t,!0)}return BS}};var qy=Yy;function ra(e,t){let n,i=e.externalType,o=c(i);if(!o)n={url:e.url,retryAttempts:1,retryCallback:Ire};else if(i==="3DTILES"||i==="STK_TERRAIN_SERVER")n={url:e.options.url};else throw new oe("Ion.createResource does not support external imagery assets; use IonImageryProvider instead.");ke.call(this,n),this._ionEndpoint=e,this._ionEndpointDomain=o?void 0:new xS.default(e.url).authority(),this._ionEndpointResource=t,this._ionRoot=void 0,this._pendingPromise=void 0,this._credits=void 0,this._isExternal=o}c(Object.create)&&(ra.prototype=Object.create(ke.prototype),ra.prototype.constructor=ra);ra.fromAssetId=function(e,t){let n=ra._createEndpointResource(e,t);return n.fetchJson().then(function(i){return new ra(i,n)})};Object.defineProperties(ra.prototype,{credits:{get:function(){return c(this._ionRoot)?this._ionRoot.credits:c(this._credits)?this._credits:(this._credits=ra.getCreditsFromEndpoint(this._ionEndpoint,this._ionEndpointResource),this._credits)}}});ra.getCreditsFromEndpoint=function(e,t){let n=e.attributions.map(fn.getIonCredit),i=qy.getDefaultTokenCredit(t.queryParameters.access_token);return c(i)&&n.push(fn.clone(i)),n};ra.prototype.clone=function(e){let t=this._ionRoot??this;return c(e)||(e=new ra(t._ionEndpoint,t._ionEndpointResource)),e=ke.prototype.clone.call(this,e),e._ionRoot=t,e._isExternal=this._isExternal,e};ra.prototype.fetchImage=function(e){if(!this._isExternal){let t=e;e={preferBlob:!0},c(t)&&(e.flipY=t.flipY,e.preferImageBitmap=t.preferImageBitmap)}return ke.prototype.fetchImage.call(this,e)};ra.prototype._makeRequest=function(e){return this._isExternal||new xS.default(this.url).authority()!==this._ionEndpointDomain?ke.prototype._makeRequest.call(this,e):(I2(e),e.headers.Authorization=`Bearer ${this._ionEndpoint.accessToken}`,ke.prototype._makeRequest.call(this,e))};ra._createEndpointResource=function(e,t){t=t??k.EMPTY_OBJECT;let n=t.server??qy.defaultServer,i=t.accessToken??qy.defaultAccessToken;n=ke.createIfNeeded(n);let o={url:`v1/assets/${e}/endpoint`};return c(i)&&(o.queryParameters={access_token:i}),I2(o),n.getDerivedResource(o)};function I2(e){c(e.headers)||(e.headers={}),e.headers["X-Cesium-Client"]="CesiumJS",typeof CESIUM_VERSION<"u"&&(e.headers["X-Cesium-Client-Version"]=CESIUM_VERSION)}function Ire(e,t){let n=e._ionRoot??e,i=n._ionEndpointResource,o=typeof Image<"u";return!c(t)||t.statusCode!==401&&!(o&&t.target instanceof Image)?Promise.resolve(!1):(c(n._pendingPromise)||(n._pendingPromise=i.fetchJson().then(function(r){return n._ionEndpoint=r,r}).finally(function(r){return n._pendingPromise=void 0,r})),n._pendingPromise.then(function(r){return e._ionEndpoint=r,!0}))}var bm=ra;function BA(e){e=e??0,this._array=new Array(e),this._length=e}Object.defineProperties(BA.prototype,{length:{get:function(){return this._length},set:function(e){let t=this._array,n=this._length;if(e<n)for(let i=e;i<n;++i)t[i]=void 0;else e>t.length&&(t.length=e);this._length=e}},values:{get:function(){return this._array}}});BA.prototype.get=function(e){return this._array[e]};BA.prototype.set=function(e,t){e>=this._length&&(this.length=e+1),this._array[e]=t};BA.prototype.peek=function(){return this._array[this._length-1]};BA.prototype.push=function(e){let t=this.length++;this._array[t]=e};BA.prototype.pop=function(){if(this._length===0)return;let e=this._array[this._length-1];return--this.length,e};BA.prototype.reserve=function(e){e>this._array.length&&(this._array.length=e)};BA.prototype.resize=function(e){this.length=e};BA.prototype.trim=function(e){e=e??this._length,this._array.length=e};var Gs=BA;var Bl={X:0,Y:1,Z:2};Bl.Y_UP_TO_Z_UP=O.fromRotationTranslation(J.fromArray([1,0,0,0,0,1,0,-1,0]));Bl.Z_UP_TO_Y_UP=O.fromRotationTranslation(J.fromArray([1,0,0,0,0,-1,0,1,0]));Bl.X_UP_TO_Z_UP=O.fromRotationTranslation(J.fromArray([0,0,1,0,1,0,-1,0,0]));Bl.Z_UP_TO_X_UP=O.fromRotationTranslation(J.fromArray([0,0,-1,0,1,0,1,0,0]));Bl.X_UP_TO_Y_UP=O.fromRotationTranslation(J.fromArray([0,1,0,-1,0,0,0,0,1]));Bl.Y_UP_TO_X_UP=O.fromRotationTranslation(J.fromArray([0,-1,0,1,0,0,0,0,1]));Bl.fromName=function(e){return Bl[e]};var fi=Object.freeze(Bl);function y2(e){e=e??k.EMPTY_OBJECT,this._metadata=e.metadata}Object.defineProperties(y2.prototype,{metadata:{get:function(){return this._metadata}}});var Wy=y2;function Kf(e,t,n){return t=t??0,n=n??e.byteLength-t,e=e.subarray(t,t+n),Kf.decode(e)}Kf.decodeWithTextDecoder=function(e){return new TextDecoder("utf-8").decode(e)};Kf.decodeWithFromCharCode=function(e){let t="",n=yre(e),i=n.length;for(let o=0;o<i;++o){let r=n[o];r<=65535?t+=String.fromCharCode(r):(r-=65536,t+=String.fromCharCode((r>>10)+55296,(r&1023)+56320))}return t};function FC(e,t,n){return t<=e&&e<=n}function yre(e){let t=0,n=0,i=0,o=128,r=191,a=[],s=e.length;for(let A=0;A<s;++A){let l=e[A];if(i===0){if(FC(l,0,127)){a.push(l);continue}if(FC(l,194,223)){i=1,t=l&31;continue}if(FC(l,224,239)){l===224&&(o=160),l===237&&(r=159),i=2,t=l&15;continue}if(FC(l,240,244)){l===240&&(o=144),l===244&&(r=143),i=3,t=l&7;continue}throw new oe("String decoding failed.")}if(!FC(l,o,r)){t=i=n=0,o=128,r=191,--A;continue}o=128,r=191,t=t<<6|l&63,++n,n===i&&(a.push(t),t=i=n=0)}return a}typeof TextDecoder<"u"?Kf.decode=Kf.decodeWithTextDecoder:Kf.decode=Kf.decodeWithFromCharCode;var xc=Kf;function bre(e,t){return t=t??0,xc(e,t,Math.min(4,e.length))}var Xf=bre;function zs(e,t,n,i){this._tileset=e,this._tile=t,this._resource=n,c(i)||(i=[]),this._contents=i,this._metadata=void 0,this._group=void 0,this._ready=!1}Object.defineProperties(zs.prototype,{featurePropertiesDirty:{get:function(){let e=this._contents,t=e.length;for(let n=0;n<t;++n)if(e[n].featurePropertiesDirty)return!0;return!1},set:function(e){let t=this._contents,n=t.length;for(let i=0;i<n;++i)t[i].featurePropertiesDirty=e}},featuresLength:{get:function(){return 0}},pointsLength:{get:function(){return 0}},trianglesLength:{get:function(){return 0}},geometryByteLength:{get:function(){return 0}},texturesByteLength:{get:function(){return 0}},batchTableByteLength:{get:function(){return 0}},innerContents:{get:function(){return this._contents}},ready:{get:function(){return this._ready}},tileset:{get:function(){return this._tileset}},tile:{get:function(){return this._tile}},url:{get:function(){return this._resource.getUrlComponent(!0)}},metadata:{get:function(){return this._metadata},set:function(e){this._metadata=e;let t=this._contents,n=t.length;for(let i=0;i<n;++i)t[i].metadata=e}},batchTable:{get:function(){}},group:{get:function(){return this._group},set:function(e){this._group=e;let t=this._contents,n=t.length;for(let i=0;i<n;++i)t[i].group=e}}});var kC=Uint32Array.BYTES_PER_ELEMENT;zs.fromTileType=async function(e,t,n,i,o,r){o=o??0;let a=new Uint8Array(i),s=new DataView(i);o+=kC;let A=s.getUint32(o,!0);if(A!==1)throw new oe(`Only Composite Tile version 1 is supported. Version ${A} is not.`);o+=kC,o+=kC;let l=s.getUint32(o,!0);o+=kC;let f=n.queryParameters.compositeIndex;c(f)?f=`${f}_`:f="";let h=[];h.length=l;for(let g=0;g<l;++g){let C=Xf(a,o),_=s.getUint32(o+kC*2,!0),E=r[C],I=`${f}${g}`,y=n.getDerivedResource({queryParameters:{compositeIndex:I}});if(c(E))h[g]=Promise.resolve(E(e,t,y,i,o));else throw new oe(`Unknown tile content type, ${C}, inside Composite tile`);o+=_}let m=await Promise.all(h);return new zs(e,t,n,m)};zs.prototype.hasProperty=function(e,t){return!1};zs.prototype.getFeature=function(e){};zs.prototype.applyDebugSettings=function(e,t){let n=this._contents,i=n.length;for(let o=0;o<i;++o)n[o].applyDebugSettings(e,t)};zs.prototype.applyStyle=function(e){let t=this._contents,n=t.length;for(let i=0;i<n;++i)t[i].applyStyle(e)};zs.prototype.update=function(e,t){let n=this._contents,i=n.length,o=!0;for(let r=0;r<i;++r)n[r].update(e,t),o=o&&n[r].ready;!this._ready&&o&&(this._ready=!0)};zs.prototype.pick=function(e,t,n){if(!this._ready)return;let i,o=Number.POSITIVE_INFINITY,r=this._contents,a=r.length;for(let s=0;s<a;++s){let A=r[s].pick(e,t,n);if(!c(A))continue;let l=u.distance(e.origin,A);l<o&&(i=A,o=l)}if(c(i))return n};zs.prototype.isDestroyed=function(){return!1};zs.prototype.destroy=function(){let e=this._contents,t=e.length;for(let n=0;n<t;++n)e[n].destroy();return pe(this)};var b2=zs;function Bre(e,t,n){return JSON.parse(xc(e,t,n))}var _o=Bre;function Dr(e){this._id=oo();let t=e.featuresLength;this._showAlphaProperties=void 0,this._batchValues=void 0,this._batchValuesDirty=!1,this._batchTexture=void 0,this._defaultTexture=void 0,this._pickTexture=void 0,this._pickIds=[];let n,i;if(t>0){let o=Math.min(t,pn.maximumTextureSize),r=Math.ceil(t/pn.maximumTextureSize),a=1/o,s=a*.5,A=1/r,l=A*.5;n=new U(o,r),i=new se(a,s,A,l)}this._translucentFeaturesLength=0,this._featuresLength=t,this._textureDimensions=n,this._textureStep=i,this._owner=e.owner,this._statistics=e.statistics,this._colorChangedCallback=e.colorChangedCallback}Object.defineProperties(Dr.prototype,{translucentFeaturesLength:{get:function(){return this._translucentFeaturesLength}},byteLength:{get:function(){let e=0;return c(this._pickTexture)&&(e+=this._pickTexture.sizeInBytes),c(this._batchTexture)&&(e+=this._batchTexture.sizeInBytes),e}},textureDimensions:{get:function(){return this._textureDimensions}},textureStep:{get:function(){return this._textureStep}},batchTexture:{get:function(){return this._batchTexture}},defaultTexture:{get:function(){return this._defaultTexture}},pickTexture:{get:function(){return this._pickTexture}}});Dr.DEFAULT_COLOR_VALUE=F.WHITE;Dr.DEFAULT_SHOW_VALUE=!0;function B2(e){let t=e._textureDimensions;return t.x*t.y*4}function x2(e){if(!c(e._batchValues)){let t=B2(e),n=new Uint8Array(t).fill(255);e._batchValues=n}return e._batchValues}function T2(e){if(!c(e._showAlphaProperties)){let t=2*e._featuresLength,n=new Uint8Array(t).fill(255);e._showAlphaProperties=n}return e._showAlphaProperties}Dr.prototype.setShow=function(e,t){if(t&&!c(this._showAlphaProperties))return;let n=T2(this),i=e*2,o=t?255:0;if(n[i]!==o){n[i]=o;let r=x2(this),a=e*4+3;r[a]=t?n[i+1]:0,this._batchValuesDirty=!0}};Dr.prototype.setAllShow=function(e){let t=this._featuresLength;for(let n=0;n<t;++n)this.setShow(n,e)};Dr.prototype.getShow=function(e){if(!c(this._showAlphaProperties))return!0;let t=e*2;return this._showAlphaProperties[t]===255};var xre=new Array(4);Dr.prototype.setColor=function(e,t){if(F.equals(t,Dr.DEFAULT_COLOR_VALUE)&&!c(this._batchValues))return;let n=t.toBytes(xre),i=n[3],o=x2(this),r=e*4,a=T2(this),s=e*2;if(o[r]!==n[0]||o[r+1]!==n[1]||o[r+2]!==n[2]||a[s+1]!==i){o[r]=n[0],o[r+1]=n[1],o[r+2]=n[2];let A=a[s+1]!==255,l=a[s]!==0;o[r+3]=l?i:0,a[s+1]=i;let f=i!==255;f&&!A?++this._translucentFeaturesLength:!f&&A&&--this._translucentFeaturesLength,this._batchValuesDirty=!0,c(this._colorChangedCallback)&&this._colorChangedCallback(e,t)}};Dr.prototype.setAllColor=function(e){let t=this._featuresLength;for(let n=0;n<t;++n)this.setColor(n,e)};Dr.prototype.getColor=function(e,t){if(!c(this._batchValues))return F.clone(Dr.DEFAULT_COLOR_VALUE,t);let n=this._batchValues,i=e*4,o=this._showAlphaProperties,r=e*2;return F.fromBytes(n[i],n[i+1],n[i+2],o[r+1],t)};Dr.prototype.getPickColor=function(e){return this._pickIds[e]};function S2(e,t,n){let i=e._textureDimensions;return new gn({context:t,pixelFormat:Bt.RGBA,pixelDatatype:_t.UNSIGNED_BYTE,source:{width:i.x,height:i.y,arrayBufferView:n},flipY:!1,sampler:dn.NEAREST})}function Tre(e,t){let n=e._featuresLength;if(!c(e._pickTexture)&&n>0){let i=e._pickIds,o=B2(e),r=new Uint8Array(o),a=e._owner,s=e._statistics;for(let A=0;A<n;++A){let l=t.createPickId(a.getFeature(A));i.push(l);let f=l.color,h=A*4;r[h]=F.floatToByte(f.red),r[h+1]=F.floatToByte(f.green),r[h+2]=F.floatToByte(f.blue),r[h+3]=F.floatToByte(f.alpha)}e._pickTexture=S2(e,t,r),c(s)&&(s.batchTableByteLength+=e._pickTexture.sizeInBytes)}}function Sre(e){let t=e._textureDimensions;e._batchTexture.copyFrom({source:{width:t.x,height:t.y,arrayBufferView:e._batchValues}})}Dr.prototype.update=function(e,t){let n=t.context;this._defaultTexture=n.defaultTexture;let i=t.passes;(i.pick||i.postProcess)&&Tre(this,n),this._batchValuesDirty&&(this._batchValuesDirty=!1,c(this._batchTexture)||(this._batchTexture=S2(this,n,this._batchValues),c(this._statistics)&&(this._statistics.batchTableByteLength+=this._batchTexture.sizeInBytes)),Sre(this))};Dr.prototype.isDestroyed=function(){return!1};Dr.prototype.destroy=function(){this._batchTexture=this._batchTexture&&this._batchTexture.destroy(),this._pickTexture=this._pickTexture&&this._pickTexture.destroy();let e=this._pickIds,t=e.length;for(let n=0;n<t;++n)e[n].destroy();return pe(this)};var Hs=Dr;var wre={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Dre={SCALAR:void 0,VEC2:U,VEC3:u,VEC4:se,MAT2:ai,MAT3:J,MAT4:O};function Qre(e){let t=e.componentType,n;typeof t=="string"?n=N.fromName(t):n=t;let i=wre[e.type],o=Dre[e.type];return{componentsPerAttribute:i,classType:o,createArrayBufferView:function(r,a,s){return N.createArrayBufferView(n,r,a,i*s)}}}var xA=Qre;function xl(e){this._classes=void 0,this._classIds=void 0,this._classIndexes=void 0,this._parentCounts=void 0,this._parentIndexes=void 0,this._parentIds=void 0,this._byteLength=0,Rre(this,e.extension,e.binaryBody)}Object.defineProperties(xl.prototype,{byteLength:{get:function(){return this._byteLength}}});function Rre(e,t,n){let i,o,r,a=t.instancesLength,s=t.classes,A=t.classIds,l=t.parentCounts,f=t.parentIds,h=a,m=0;c(A.byteOffset)&&(A.componentType=A.componentType??N.UNSIGNED_SHORT,A.type=st.SCALAR,r=xA(A),A=r.createArrayBufferView(n.buffer,n.byteOffset+A.byteOffset,a),m+=A.byteLength);let p;if(c(l)){for(c(l.byteOffset)&&(l.componentType=l.componentType??N.UNSIGNED_SHORT,l.type=st.SCALAR,r=xA(l),l=r.createArrayBufferView(n.buffer,n.byteOffset+l.byteOffset,a),m+=l.byteLength),p=new Uint16Array(a),h=0,i=0;i<a;++i)p[i]=h,h+=l[i];m+=p.byteLength}c(f)&&c(f.byteOffset)&&(f.componentType=f.componentType??N.UNSIGNED_SHORT,f.type=st.SCALAR,r=xA(f),f=r.createArrayBufferView(n.buffer,n.byteOffset+f.byteOffset,h),m+=f.byteLength);let g=s.length;for(i=0;i<g;++i){let E=s[i].length,I=s[i].instances,y=vre(E,I,n);m+=Pre(y),s[i].instances=Et(y,I)}let C=new Array(g).fill(0),_=new Uint16Array(a);for(i=0;i<a;++i)o=A[i],_[i]=C[o],++C[o];m+=_.byteLength,e._classes=s,e._classIds=A,e._classIndexes=_,e._parentCounts=l,e._parentIndexes=p,e._parentIds=f,e._byteLength=m}function vre(e,t,n){let i;for(let o in t)if(t.hasOwnProperty(o)){let r=t[o],a=r.byteOffset;if(c(a)){let s=r.componentType,A=r.type;if(!c(s))throw new oe("componentType is required.");if(!c(A))throw new oe("type is required.");if(!c(n))throw new oe(`Property ${o} requires a batch table binary.`);let l=xA(r),f=l.componentsPerAttribute,h=l.classType,m=l.createArrayBufferView(n.buffer,n.byteOffset+a,e);c(i)||(i={}),i[o]={typedArray:m,componentCount:f,type:h}}}return i}function Pre(e){let t=0;for(let n in e)e.hasOwnProperty(n)&&(t+=e[n].typedArray.byteLength);return t}var Mre=[],Ore=[],Lre=0;function Nre(e,t,n){let i=e._classIds,o=e._parentCounts,r=e._parentIds,a=e._parentIndexes,s=i.length,A=Mre;A.length=Math.max(A.length,s);let l=++Lre,f=Ore;for(f.length=0,f.push(t);f.length>0;){if(t=f.pop(),A[t]===l)continue;A[t]=l;let h=n(e,t);if(c(h))return h;let m=o[t],p=a[t];for(let g=0;g<m;++g){let C=r[p+g];C!==t&&f.push(C)}}}function Fre(e,t,n){let i=!0;for(;i;){let o=n(e,t);if(c(o))return o;let r=e._parentIds[t];i=r!==t,t=r}}function UC(e,t,n){let i=e._parentCounts,o=e._parentIds;if(c(o)){if(c(i))return Nre(e,t,n)}else return n(e,t);return Fre(e,t,n)}xl.prototype.hasProperty=function(e,t){let n=UC(this,e,function(i,o){let r=i._classIds[o],a=i._classes[r].instances;if(c(a[t]))return!0});return c(n)};xl.prototype.propertyExists=function(e){let t=this._classes,n=t.length;for(let i=0;i<n;++i){let o=t[i].instances;if(c(o[e]))return!0}return!1};xl.prototype.getPropertyIds=function(e,t){return t=c(t)?t:[],t.length=0,UC(this,e,function(n,i){let o=n._classIds[i],r=n._classes[o].instances;for(let a in r)r.hasOwnProperty(a)&&t.indexOf(a)===-1&&t.push(a)}),t};xl.prototype.getProperty=function(e,t){return UC(this,e,function(n,i){let o=n._classIds[i],r=n._classes[o],a=n._classIndexes[i],s=r.instances[t];if(c(s))return c(s.typedArray)?kre(s,a):Ne(s[a],!0)})};function kre(e,t){let n=e.typedArray,i=e.componentCount;return i===1?n[t]:e.type.unpack(n,t*i)}xl.prototype.setProperty=function(e,t,n){let i=UC(this,e,function(o,r){let a=o._classIds[r],s=o._classes[a],A=o._classIndexes[r],l=s.instances[t];if(c(l))return c(l.typedArray)?Ure(l,A,n):l[A]=Ne(n,!0),!0});return c(i)};function Ure(e,t,n){let i=e.typedArray,o=e.componentCount;o===1?i[t]=n:e.type.pack(n,i,t*o)}xl.prototype.isClass=function(e,t){let n=UC(this,e,function(i,o){let r=i._classIds[o];if(i._classes[r].name===t)return!0});return c(n)};xl.prototype.getClassName=function(e){let t=this._classIds[e];return this._classes[t].name};var Jy=xl;var Gre={HIGHLIGHT:0,REPLACE:1,MIX:2},Bm=Object.freeze(Gre);var TS=Hs.DEFAULT_COLOR_VALUE,SS=Hs.DEFAULT_SHOW_VALUE;function ci(e,t,n,i,o){this.featuresLength=t;let r;c(n)&&(r=n.extensions),this._extensions=r??{};let a=zre(n);this._properties=a,this._batchTableHierarchy=Hre(this,n,i);let s=D2(t,a,i);this._binaryPropertiesByteLength=Vre(s),this._batchTableBinaryProperties=s,this._content=e,this._batchTexture=new Hs({featuresLength:t,colorChangedCallback:o,owner:e,statistics:e.tileset.statistics})}ci._deprecationWarning=wr;Object.defineProperties(ci.prototype,{batchTableByteLength:{get:function(){let e=this._binaryPropertiesByteLength;return c(this._batchTableHierarchy)&&(e+=this._batchTableHierarchy.byteLength),e+=this._batchTexture.byteLength,e}}});function zre(e){let t={};if(!c(e))return t;for(let n in e)e.hasOwnProperty(n)&&n!=="HIERARCHY"&&n!=="extensions"&&n!=="extras"&&(t[n]=Ne(e[n],!0));return t}function Hre(e,t,n){if(!c(t))return;let i=e._extensions["3DTILES_batch_table_hierarchy"],o=t.HIERARCHY;if(c(o)&&(ci._deprecationWarning("batchTableHierarchyExtension","The batch table HIERARCHY property has been moved to an extension. Use extensions.3DTILES_batch_table_hierarchy instead."),e._extensions["3DTILES_batch_table_hierarchy"]=o,i=o),!!c(i))return new Jy({extension:i,binaryBody:n})}function D2(e,t,n){let i;for(let o in t)if(t.hasOwnProperty(o)){let r=t[o],a=r.byteOffset;if(c(a)){let s=r.componentType,A=r.type;if(!c(s))throw new oe("componentType is required.");if(!c(A))throw new oe("type is required.");if(!c(n))throw new oe(`Property ${o} requires a batch table binary.`);let l=xA(r),f=l.componentsPerAttribute,h=l.classType,m=l.createArrayBufferView(n.buffer,n.byteOffset+a,e);c(i)||(i={}),i[o]={typedArray:m,componentCount:f,type:h}}}return i}function Vre(e){if(!c(e))return 0;let t=0;for(let n in e)e.hasOwnProperty(n)&&(t+=e[n].typedArray.byteLength);return t}ci.getBinaryProperties=function(e,t,n){return D2(e,t,n)};ci.prototype.setShow=function(e,t){this._batchTexture.setShow(e,t)};ci.prototype.setAllShow=function(e){this._batchTexture.setAllShow(e)};ci.prototype.getShow=function(e){return this._batchTexture.getShow(e)};ci.prototype.setColor=function(e,t){this._batchTexture.setColor(e,t)};ci.prototype.setAllColor=function(e){this._batchTexture.setAllColor(e)};ci.prototype.getColor=function(e,t){return this._batchTexture.getColor(e,t)};ci.prototype.getPickColor=function(e){return this._batchTexture.getPickColor(e)};var jre=new F;ci.prototype.applyStyle=function(e){if(!c(e)){this.setAllColor(TS),this.setAllShow(SS);return}let t=this._content,n=this.featuresLength;for(let i=0;i<n;++i){let o=t.getFeature(i),r=c(e.color)?e.color.evaluateColor(o,jre)??TS:TS,a=c(e.show)?e.show.evaluate(o)??SS:SS;this.setColor(i,r),this.setShow(i,a)}};function Yre(e,t){let n=e.typedArray,i=e.componentCount;return i===1?n[t]:e.type.unpack(n,t*i)}function qre(e,t,n){let i=e.typedArray,o=e.componentCount;o===1?i[t]=n:e.type.pack(n,i,t*o)}ci.prototype.isClass=function(e,t){let n=this._batchTableHierarchy;return c(n)?n.isClass(e,t):!1};ci.prototype.isExactClass=function(e,t){return this.getExactClassName(e)===t};ci.prototype.getExactClassName=function(e){let t=this._batchTableHierarchy;if(c(t))return t.getClassName(e)};ci.prototype.hasProperty=function(e,t){return c(this._properties[t])||c(this._batchTableHierarchy)&&this._batchTableHierarchy.hasProperty(e,t)};ci.prototype.hasPropertyBySemantic=function(){return!1};ci.prototype.getPropertyIds=function(e,t){t=c(t)?t:[],t.length=0;let n=Object.keys(this._properties);if(Gn(t,n),c(this._batchTableHierarchy)){let i=this._batchTableHierarchy.getPropertyIds(e,n);Gn(t,i)}return t};ci.prototype.getPropertyBySemantic=function(e,t){};ci.prototype.getProperty=function(e,t){if(c(this._batchTableBinaryProperties)){let i=this._batchTableBinaryProperties[t];if(c(i))return Yre(i,e)}let n=this._properties[t];if(c(n))return Ne(n[e],!0);if(c(this._batchTableHierarchy)){let i=this._batchTableHierarchy.getProperty(e,t);if(c(i))return i}};ci.prototype.setProperty=function(e,t,n){let i=this.featuresLength;if(c(this._batchTableBinaryProperties)){let r=this._batchTableBinaryProperties[t];if(c(r)){qre(r,e,n);return}}if(c(this._batchTableHierarchy)&&this._batchTableHierarchy.setProperty(e,t,n))return;let o=this._properties[t];c(o)||(this._properties[t]=new Array(i),o=this._properties[t]),o[e]=Ne(n,!0)};function Wre(e){return e._batchTexture.textureDimensions.y===1?`uniform vec4 tile_textureStep; 
vec2 computeSt(float batchId) 
{ 
    float stepX = tile_textureStep.x; 
    float centerX = tile_textureStep.y; 
    return vec2(centerX + (batchId * stepX), 0.5); 
} 
`:`uniform vec4 tile_textureStep; 
uniform vec2 tile_textureDimensions; 
vec2 computeSt(float batchId) 
{ 
    float stepX = tile_textureStep.x; 
    float centerX = tile_textureStep.y; 
    float stepY = tile_textureStep.z; 
    float centerY = tile_textureStep.w; 
    float xId = mod(batchId, tile_textureDimensions.x); 
    float yId = floor(batchId / tile_textureDimensions.x); 
    return vec2(centerX + (xId * stepX), centerY + (yId * stepY)); 
} 
`}ci.prototype.getVertexShaderCallback=function(e,t,n){if(this.featuresLength===0)return;let i=this;return function(o){let r=Q2(o,n,!1),a;return pn.maximumVertexTextureImageUnits>0?(a="",e&&(a+=`uniform bool tile_translucentCommand; 
`),a+=`uniform sampler2D tile_batchTexture; 
out vec4 tile_featureColor; 
out vec2 tile_featureSt; 
void main() 
{ 
    vec2 st = computeSt(${t}); 
    vec4 featureProperties = texture(tile_batchTexture, st); 
    tile_color(featureProperties); 
    float show = ceil(featureProperties.a); 
    gl_Position *= show; 
`,e&&(a+=`    bool isStyleTranslucent = (featureProperties.a != 1.0); 
    if (czm_pass == czm_passTranslucent) 
    { 
        if (!isStyleTranslucent && !tile_translucentCommand) 
        { 
            gl_Position *= 0.0; 
        } 
    } 
    else 
    { 
        if (isStyleTranslucent) 
        { 
            gl_Position *= 0.0; 
        } 
    } 
`),a+=`    tile_featureColor = featureProperties; 
    tile_featureSt = st; 
}`):a=`out vec2 tile_featureSt; 
void main() 
{ 
    tile_color(vec4(1.0)); 
    tile_featureSt = computeSt(${t}); 
}`,`${r}
${Wre(i)}${a}`}};function w2(e,t){return e=It.replaceMain(e,"tile_main"),t?`${e}uniform float tile_colorBlend; 
void tile_color(vec4 tile_featureColor) 
{ 
    tile_main(); 
    tile_featureColor = czm_gammaCorrect(tile_featureColor); 
    out_FragColor.a *= tile_featureColor.a; 
    float highlight = ceil(tile_colorBlend); 
    out_FragColor.rgb *= mix(tile_featureColor.rgb, vec3(1.0), highlight); 
} 
`:`${e}void tile_color(vec4 tile_featureColor) 
{ 
    tile_main(); 
} 
`}function Jre(e,t){let n=`texture(${t}`,i=0,o=e.indexOf(n,i),r;for(;o>-1;){let a=0;for(let l=o;l<e.length;++l){let f=e.charAt(l);if(f==="(")++a;else if(f===")"&&(--a,a===0)){r=l+1;break}}let A=`tile_diffuse_final(${e.slice(o,r)}, tile_diffuse)`;e=e.slice(0,o)+A+e.slice(r),i=o+A.length,o=e.indexOf(n,i)}return e}function Q2(e,t,n){if(!c(t))return w2(e,n);let i=new RegExp(`(uniform|attribute|in)\\s+(vec[34]|sampler2D)\\s+${t};`),o=e.match(i);if(!c(o))return w2(e,n);let r=o[0],a=o[2];e=It.replaceMain(e,"tile_main"),e=e.replace(r,"");let s=`bool isWhite(vec3 color) 
{ 
    return all(greaterThan(color, vec3(1.0 - czm_epsilon3))); 
} 
vec4 tile_diffuse_final(vec4 sourceDiffuse, vec4 tileDiffuse) 
{ 
    vec4 blendDiffuse = mix(sourceDiffuse, tileDiffuse, tile_colorBlend); 
    vec4 diffuse = isWhite(tileDiffuse.rgb) ? sourceDiffuse : blendDiffuse; 
    return vec4(diffuse.rgb, sourceDiffuse.a); 
} 
`,A=`    tile_featureColor = czm_gammaCorrect(tile_featureColor); 
    out_FragColor.a *= tile_featureColor.a; 
    float highlight = ceil(tile_colorBlend); 
    out_FragColor.rgb *= mix(tile_featureColor.rgb, vec3(1.0), highlight); 
`,l;if(a==="vec3"||a==="vec4"){let f=a==="vec3"?`vec4(${t}, 1.0)`:t,h=a==="vec3"?"tile_diffuse.xyz":"tile_diffuse";i=new RegExp(t,"g"),e=e.replace(i,h),l=`    vec4 source = ${f}; 
    tile_diffuse = tile_diffuse_final(source, tile_featureColor); 
    tile_main(); 
`}else a==="sampler2D"&&(e=Jre(e,t),l=`    tile_diffuse = tile_featureColor; 
    tile_main(); 
`);return e=`uniform float tile_colorBlend; 
vec4 tile_diffuse = vec4(1.0); 
${s}${r}
${e}
void tile_color(vec4 tile_featureColor) 
{ 
${l}`,n&&(e+=A),e+=`} 
`,e}ci.prototype.getFragmentShaderCallback=function(e,t,n){if(this.featuresLength!==0)return function(i){return i=Q2(i,t,!0),pn.maximumVertexTextureImageUnits>0?(i+=`uniform sampler2D tile_pickTexture; 
in vec2 tile_featureSt; 
in vec4 tile_featureColor; 
void main() 
{ 
    tile_color(tile_featureColor); 
`,n&&(i+=`    out_FragColor.rgb *= out_FragColor.a; 
`),i+="}"):(e&&(i+=`uniform bool tile_translucentCommand; 
`),i+=`uniform sampler2D tile_pickTexture; 
uniform sampler2D tile_batchTexture; 
in vec2 tile_featureSt; 
void main() 
{ 
    vec4 featureProperties = texture(tile_batchTexture, tile_featureSt); 
    if (featureProperties.a == 0.0) { 
        discard; 
    } 
`,e&&(i+=`    bool isStyleTranslucent = (featureProperties.a != 1.0); 
    if (czm_pass == czm_passTranslucent) 
    { 
        if (!isStyleTranslucent && !tile_translucentCommand) 
        { 
            discard; 
        } 
    } 
    else 
    { 
        if (isStyleTranslucent) 
        { 
            discard; 
        } 
    } 
`),i+=`    tile_color(featureProperties); 
`,n&&(i+=`    out_FragColor.rgb *= out_FragColor.a; 
`),i+=`} 
`),i}};function Kre(e){let t=e._content.tileset,n=t.colorBlendMode,i=t.colorBlendAmount;if(n===Bm.HIGHLIGHT)return 0;if(n===Bm.REPLACE)return 1;if(n===Bm.MIX)return w.clamp(i,w.EPSILON4,1)}ci.prototype.getUniformMapCallback=function(){if(this.featuresLength===0)return;let e=this;return function(t){return Et(t,{tile_batchTexture:function(){return e._batchTexture.batchTexture??e._batchTexture.defaultTexture},tile_textureDimensions:function(){return e._batchTexture.textureDimensions},tile_textureStep:function(){return e._batchTexture.textureStep},tile_colorBlend:function(){return Kre(e)},tile_pickTexture:function(){return e._batchTexture.pickTexture}})}};ci.prototype.getPickId=function(){return"texture(tile_pickTexture, tile_featureSt)"};var Zf={ALL_OPAQUE:0,ALL_TRANSLUCENT:1,OPAQUE_AND_TRANSLUCENT:2};ci.prototype.addDerivedCommands=function(e,t){let n=e.commandList,i=n.length,o=this._content._tile,r=o._finalResolution,a=o.tileset,s=a.isSkippingLevelOfDetail&&a.hasMixedContent&&e.context.stencilBuffer,A=Xre(this);for(let l=t;l<i;++l){let f=n[l];if(f.pass===Ye.COMPUTE)continue;let h=f.derivedCommands.tileset;(!c(h)||f.dirty)&&(h={},f.derivedCommands.tileset=h,h.originalCommand=Zre(f),f.dirty=!1);let m=h.originalCommand;A!==Zf.ALL_OPAQUE&&f.pass!==Ye.TRANSLUCENT&&(c(h.translucent)||(h.translucent=$re(m))),A!==Zf.ALL_TRANSLUCENT&&f.pass!==Ye.TRANSLUCENT&&(c(h.opaque)||(h.opaque=eae(m)),s&&(r||(c(h.zback)||(h.zback=nae(e.context,m)),a._backfaceCommands.push(h.zback)),(!c(h.stencil)||o._selectionDepth!==oae(h.stencil))&&(f.renderState.depthMask?h.stencil=iae(m,o._selectionDepth):h.stencil=h.opaque)));let p=s?h.stencil:h.opaque,g=h.translucent;f.pass!==Ye.TRANSLUCENT?(A===Zf.ALL_OPAQUE&&(n[l]=p),A===Zf.ALL_TRANSLUCENT&&(n[l]=g),A===Zf.OPAQUE_AND_TRANSLUCENT&&(n[l]=p,n.push(g))):n[l]=m}};function Xre(e){let t=e._batchTexture.translucentFeaturesLength;return t===0?Zf.ALL_OPAQUE:t===e.featuresLength?Zf.ALL_TRANSLUCENT:Zf.OPAQUE_AND_TRANSLUCENT}function Zre(e){let t=mt.shallowClone(e),n=t.pass===Ye.TRANSLUCENT;return t.uniformMap=c(t.uniformMap)?t.uniformMap:{},t.uniformMap.tile_translucentCommand=function(){return n},t}function $re(e){let t=mt.shallowClone(e);return t.pass=Ye.TRANSLUCENT,t.renderState=rae(e.renderState),t}function eae(e){let t=mt.shallowClone(e);return t.renderState=aae(e.renderState),t}function tae(e,t){let n=e.shaderCache.getDerivedShaderProgram(t,"zBackfaceLogDepth");if(!c(n)){let i=t.fragmentShaderSource.clone();i.defines=c(i.defines)?i.defines.slice(0):[],i.defines.push("POLYGON_OFFSET"),n=e.shaderCache.createDerivedShaderProgram(t,"zBackfaceLogDepth",{vertexShaderSource:t.vertexShaderSource,fragmentShaderSource:i,attributeLocations:t._attributeLocations})}return n}function nae(e,t){let n=mt.shallowClone(t),i=Ne(n.renderState,!0);i.cull.enabled=!0,i.cull.face=No.FRONT,i.colorMask={red:!1,green:!1,blue:!1,alpha:!1},i.polygonOffset={enabled:!0,factor:5,units:5},i.stencilTest=Qt.setCesium3DTileBit(),i.stencilMask=Qt.CESIUM_3D_TILE_MASK,n.renderState=ut.fromCache(i),n.castShadows=!1,n.receiveShadows=!1,n.uniformMap=Ne(t.uniformMap);let o=new U(5,5);return n.uniformMap.u_polygonOffset=function(){return o},n.shaderProgram=tae(e,t.shaderProgram),n}function iae(e,t){let n=mt.shallowClone(e),i=Ne(n.renderState,!0);return i.stencilTest.enabled=!0,i.stencilTest.mask=Qt.SKIP_LOD_MASK,i.stencilTest.reference=Qt.CESIUM_3D_TILE_MASK|t<<Qt.SKIP_LOD_BIT_SHIFT,i.stencilTest.frontFunction=Nn.GREATER_OR_EQUAL,i.stencilTest.frontOperation.zPass=nt.REPLACE,i.stencilTest.backFunction=Nn.GREATER_OR_EQUAL,i.stencilTest.backOperation.zPass=nt.REPLACE,i.stencilMask=Qt.CESIUM_3D_TILE_MASK|Qt.SKIP_LOD_MASK,n.renderState=ut.fromCache(i),n}function oae(e){return(e.renderState.stencilTest.reference&Qt.SKIP_LOD_MASK)>>>Qt.SKIP_LOD_BIT_SHIFT}function rae(e){let t=Ne(e,!0);return t.cull.enabled=!1,t.depthTest.enabled=!0,t.depthMask=!1,t.blending=qn.ALPHA_BLEND,t.stencilTest=Qt.setCesium3DTileBit(),t.stencilMask=Qt.CESIUM_3D_TILE_MASK,ut.fromCache(t)}function aae(e){let t=Ne(e,!0);return t.stencilTest=Qt.setCesium3DTileBit(),t.stencilMask=Qt.CESIUM_3D_TILE_MASK,ut.fromCache(t)}ci.prototype.update=function(e,t){this._batchTexture.update(e,t)};ci.prototype.isDestroyed=function(){return!1};ci.prototype.destroy=function(){return this._batchTexture=this._batchTexture&&this._batchTexture.destroy(),pe(this)};var Ky=ci;function sae(e){this.offset=e.offset,this.count=e.count,this.color=e.color,this.batchIds=e.batchIds}var Ud=sae;var wS=`in vec3 position;
in float a_batchId;

uniform mat4 u_modifiedModelViewProjection;

void main()
{
    gl_Position = czm_depthClamp(u_modifiedModelViewProjection * vec4(position, 1.0));
}
`;function Vs(e,t){this._content=e,this._batchId=t,this._color=void 0}Object.defineProperties(Vs.prototype,{show:{get:function(){return this._content.batchTable.getShow(this._batchId)},set:function(e){this._content.batchTable.setShow(this._batchId,e)}},color:{get:function(){return c(this._color)||(this._color=new F),this._content.batchTable.getColor(this._batchId,this._color)},set:function(e){this._content.batchTable.setColor(this._batchId,e)}},polylinePositions:{get:function(){if(c(this._content.getPolylinePositions))return this._content.getPolylinePositions(this._batchId)}},content:{get:function(){return this._content}},tileset:{get:function(){return this._content.tileset}},primitive:{get:function(){return this._content.tileset}},featureId:{get:function(){return this._batchId}},pickId:{get:function(){return this._content.batchTable.getPickColor(this._batchId)}}});Vs.prototype.hasProperty=function(e){return this._content.batchTable.hasProperty(this._batchId,e)};Vs.prototype.getPropertyIds=function(e){return this._content.batchTable.getPropertyIds(this._batchId,e)};Vs.prototype.getProperty=function(e){return this._content.batchTable.getProperty(this._batchId,e)};Vs.getPropertyInherited=function(e,t,n){let i=e.batchTable;if(c(i)){if(i.hasPropertyBySemantic(t,n))return i.getPropertyBySemantic(t,n);if(i.hasProperty(t,n))return i.getProperty(t,n)}let o=e.metadata;if(c(o)){if(o.hasPropertyBySemantic(n))return o.getPropertyBySemantic(n);if(o.hasProperty(n))return o.getProperty(n)}let r=e.tile,a=r.metadata;if(c(a)){if(a.hasPropertyBySemantic(n))return a.getPropertyBySemantic(n);if(a.hasProperty(n))return a.getProperty(n)}let s;if(c(r.implicitSubtree)&&(s=r.implicitSubtree.metadata),c(s)){if(s.hasPropertyBySemantic(n))return s.getPropertyBySemantic(n);if(s.hasProperty(n))return s.getProperty(n)}let A=c(e.group)?e.group.metadata:void 0;if(c(A)){if(A.hasPropertyBySemantic(n))return A.getPropertyBySemantic(n);if(A.hasProperty(n))return A.getProperty(n)}let l=e.tileset.metadata;if(c(l)){if(l.hasPropertyBySemantic(n))return l.getPropertyBySemantic(n);if(l.hasProperty(n))return l.getProperty(n)}};Vs.prototype.getPropertyInherited=function(e){return Vs.getPropertyInherited(this._content,this._batchId,e)};Vs.prototype.setProperty=function(e,t){this._content.batchTable.setProperty(this._batchId,e,t),this._content.featurePropertiesDirty=!0};Vs.prototype.isExactClass=function(e){return this._content.batchTable.isExactClass(this._batchId,e)};Vs.prototype.isClass=function(e){return this._content.batchTable.isClass(this._batchId,e)};Vs.prototype.getExactClassName=function(){return this._content.batchTable.getExactClassName(this._batchId)};var TA=Vs;var DS=class{add(t,n,i){if(typeof arguments[0]!="string")for(let o in arguments[0])this.add(o,arguments[0][o],arguments[1]);else(Array.isArray(t)?t:[t]).forEach(function(o){this[o]=this[o]||[],n&&this[o][i?"unshift":"push"](n)},this)}run(t,n){this[t]=this[t]||[],this[t].forEach(function(i){i.call(n&&n.context?n.context:n,n)})}},QS=class{constructor(t){this.jsep=t,this.registered={}}register(...t){t.forEach(n=>{if(typeof n!="object"||!n.name||!n.init)throw new Error("Invalid JSEP plugin format");this.registered[n.name]||(n.init(this.jsep),this.registered[n.name]=n)})}},wa=class e{static get version(){return"1.4.0"}static toString(){return"JavaScript Expression Parser (JSEP) v"+e.version}static addUnaryOp(t){return e.max_unop_len=Math.max(t.length,e.max_unop_len),e.unary_ops[t]=1,e}static addBinaryOp(t,n,i){return e.max_binop_len=Math.max(t.length,e.max_binop_len),e.binary_ops[t]=n,i?e.right_associative.add(t):e.right_associative.delete(t),e}static addIdentifierChar(t){return e.additional_identifier_chars.add(t),e}static addLiteral(t,n){return e.literals[t]=n,e}static removeUnaryOp(t){return delete e.unary_ops[t],t.length===e.max_unop_len&&(e.max_unop_len=e.getMaxKeyLen(e.unary_ops)),e}static removeAllUnaryOps(){return e.unary_ops={},e.max_unop_len=0,e}static removeIdentifierChar(t){return e.additional_identifier_chars.delete(t),e}static removeBinaryOp(t){return delete e.binary_ops[t],t.length===e.max_binop_len&&(e.max_binop_len=e.getMaxKeyLen(e.binary_ops)),e.right_associative.delete(t),e}static removeAllBinaryOps(){return e.binary_ops={},e.max_binop_len=0,e}static removeLiteral(t){return delete e.literals[t],e}static removeAllLiterals(){return e.literals={},e}get char(){return this.expr.charAt(this.index)}get code(){return this.expr.charCodeAt(this.index)}constructor(t){this.expr=t,this.index=0}static parse(t){return new e(t).parse()}static getMaxKeyLen(t){return Math.max(0,...Object.keys(t).map(n=>n.length))}static isDecimalDigit(t){return t>=48&&t<=57}static binaryPrecedence(t){return e.binary_ops[t]||0}static isIdentifierStart(t){return t>=65&&t<=90||t>=97&&t<=122||t>=128&&!e.binary_ops[String.fromCharCode(t)]||e.additional_identifier_chars.has(String.fromCharCode(t))}static isIdentifierPart(t){return e.isIdentifierStart(t)||e.isDecimalDigit(t)}throwError(t){let n=new Error(t+" at character "+this.index);throw n.index=this.index,n.description=t,n}runHook(t,n){if(e.hooks[t]){let i={context:this,node:n};return e.hooks.run(t,i),i.node}return n}searchHook(t){if(e.hooks[t]){let n={context:this};return e.hooks[t].find(function(i){return i.call(n.context,n),n.node}),n.node}}gobbleSpaces(){let t=this.code;for(;t===e.SPACE_CODE||t===e.TAB_CODE||t===e.LF_CODE||t===e.CR_CODE;)t=this.expr.charCodeAt(++this.index);this.runHook("gobble-spaces")}parse(){this.runHook("before-all");let t=this.gobbleExpressions(),n=t.length===1?t[0]:{type:e.COMPOUND,body:t};return this.runHook("after-all",n)}gobbleExpressions(t){let n=[],i,o;for(;this.index<this.expr.length;)if(i=this.code,i===e.SEMCOL_CODE||i===e.COMMA_CODE)this.index++;else if(o=this.gobbleExpression())n.push(o);else if(this.index<this.expr.length){if(i===t)break;this.throwError('Unexpected "'+this.char+'"')}return n}gobbleExpression(){let t=this.searchHook("gobble-expression")||this.gobbleBinaryExpression();return this.gobbleSpaces(),this.runHook("after-expression",t)}gobbleBinaryOp(){this.gobbleSpaces();let t=this.expr.substr(this.index,e.max_binop_len),n=t.length;for(;n>0;){if(e.binary_ops.hasOwnProperty(t)&&(!e.isIdentifierStart(this.code)||this.index+t.length<this.expr.length&&!e.isIdentifierPart(this.expr.charCodeAt(this.index+t.length))))return this.index+=n,t;t=t.substr(0,--n)}return!1}gobbleBinaryExpression(){let t,n,i,o,r,a,s,A,l;if(a=this.gobbleToken(),!a||(n=this.gobbleBinaryOp(),!n))return a;for(r={value:n,prec:e.binaryPrecedence(n),right_a:e.right_associative.has(n)},s=this.gobbleToken(),s||this.throwError("Expected expression after "+n),o=[a,r,s];n=this.gobbleBinaryOp();){if(i=e.binaryPrecedence(n),i===0){this.index-=n.length;break}r={value:n,prec:i,right_a:e.right_associative.has(n)},l=n;let f=h=>r.right_a&&h.right_a?i>h.prec:i<=h.prec;for(;o.length>2&&f(o[o.length-2]);)s=o.pop(),n=o.pop().value,a=o.pop(),t={type:e.BINARY_EXP,operator:n,left:a,right:s},o.push(t);t=this.gobbleToken(),t||this.throwError("Expected expression after "+l),o.push(r,t)}for(A=o.length-1,t=o[A];A>1;)t={type:e.BINARY_EXP,operator:o[A-1].value,left:o[A-2],right:t},A-=2;return t}gobbleToken(){let t,n,i,o;if(this.gobbleSpaces(),o=this.searchHook("gobble-token"),o)return this.runHook("after-token",o);if(t=this.code,e.isDecimalDigit(t)||t===e.PERIOD_CODE)return this.gobbleNumericLiteral();if(t===e.SQUOTE_CODE||t===e.DQUOTE_CODE)o=this.gobbleStringLiteral();else if(t===e.OBRACK_CODE)o=this.gobbleArray();else{for(n=this.expr.substr(this.index,e.max_unop_len),i=n.length;i>0;){if(e.unary_ops.hasOwnProperty(n)&&(!e.isIdentifierStart(this.code)||this.index+n.length<this.expr.length&&!e.isIdentifierPart(this.expr.charCodeAt(this.index+n.length)))){this.index+=i;let r=this.gobbleToken();return r||this.throwError("missing unaryOp argument"),this.runHook("after-token",{type:e.UNARY_EXP,operator:n,argument:r,prefix:!0})}n=n.substr(0,--i)}e.isIdentifierStart(t)?(o=this.gobbleIdentifier(),e.literals.hasOwnProperty(o.name)?o={type:e.LITERAL,value:e.literals[o.name],raw:o.name}:o.name===e.this_str&&(o={type:e.THIS_EXP})):t===e.OPAREN_CODE&&(o=this.gobbleGroup())}return o?(o=this.gobbleTokenProperty(o),this.runHook("after-token",o)):this.runHook("after-token",!1)}gobbleTokenProperty(t){this.gobbleSpaces();let n=this.code;for(;n===e.PERIOD_CODE||n===e.OBRACK_CODE||n===e.OPAREN_CODE||n===e.QUMARK_CODE;){let i;if(n===e.QUMARK_CODE){if(this.expr.charCodeAt(this.index+1)!==e.PERIOD_CODE)break;i=!0,this.index+=2,this.gobbleSpaces(),n=this.code}this.index++,n===e.OBRACK_CODE?(t={type:e.MEMBER_EXP,computed:!0,object:t,property:this.gobbleExpression()},t.property||this.throwError('Unexpected "'+this.char+'"'),this.gobbleSpaces(),n=this.code,n!==e.CBRACK_CODE&&this.throwError("Unclosed ["),this.index++):n===e.OPAREN_CODE?t={type:e.CALL_EXP,arguments:this.gobbleArguments(e.CPAREN_CODE),callee:t}:(n===e.PERIOD_CODE||i)&&(i&&this.index--,this.gobbleSpaces(),t={type:e.MEMBER_EXP,computed:!1,object:t,property:this.gobbleIdentifier()}),i&&(t.optional=!0),this.gobbleSpaces(),n=this.code}return t}gobbleNumericLiteral(){let t="",n,i;for(;e.isDecimalDigit(this.code);)t+=this.expr.charAt(this.index++);if(this.code===e.PERIOD_CODE)for(t+=this.expr.charAt(this.index++);e.isDecimalDigit(this.code);)t+=this.expr.charAt(this.index++);if(n=this.char,n==="e"||n==="E"){for(t+=this.expr.charAt(this.index++),n=this.char,(n==="+"||n==="-")&&(t+=this.expr.charAt(this.index++));e.isDecimalDigit(this.code);)t+=this.expr.charAt(this.index++);e.isDecimalDigit(this.expr.charCodeAt(this.index-1))||this.throwError("Expected exponent ("+t+this.char+")")}return i=this.code,e.isIdentifierStart(i)?this.throwError("Variable names cannot start with a number ("+t+this.char+")"):(i===e.PERIOD_CODE||t.length===1&&t.charCodeAt(0)===e.PERIOD_CODE)&&this.throwError("Unexpected period"),{type:e.LITERAL,value:parseFloat(t),raw:t}}gobbleStringLiteral(){let t="",n=this.index,i=this.expr.charAt(this.index++),o=!1;for(;this.index<this.expr.length;){let r=this.expr.charAt(this.index++);if(r===i){o=!0;break}else if(r==="\\")switch(r=this.expr.charAt(this.index++),r){case"n":t+=`
`;break;case"r":t+="\r";break;case"t":t+="	";break;case"b":t+="\b";break;case"f":t+="\f";break;case"v":t+="\v";break;default:t+=r}else t+=r}return o||this.throwError('Unclosed quote after "'+t+'"'),{type:e.LITERAL,value:t,raw:this.expr.substring(n,this.index)}}gobbleIdentifier(){let t=this.code,n=this.index;for(e.isIdentifierStart(t)?this.index++:this.throwError("Unexpected "+this.char);this.index<this.expr.length&&(t=this.code,e.isIdentifierPart(t));)this.index++;return{type:e.IDENTIFIER,name:this.expr.slice(n,this.index)}}gobbleArguments(t){let n=[],i=!1,o=0;for(;this.index<this.expr.length;){this.gobbleSpaces();let r=this.code;if(r===t){i=!0,this.index++,t===e.CPAREN_CODE&&o&&o>=n.length&&this.throwError("Unexpected token "+String.fromCharCode(t));break}else if(r===e.COMMA_CODE){if(this.index++,o++,o!==n.length){if(t===e.CPAREN_CODE)this.throwError("Unexpected token ,");else if(t===e.CBRACK_CODE)for(let a=n.length;a<o;a++)n.push(null)}}else if(n.length!==o&&o!==0)this.throwError("Expected comma");else{let a=this.gobbleExpression();(!a||a.type===e.COMPOUND)&&this.throwError("Expected comma"),n.push(a)}}return i||this.throwError("Expected "+String.fromCharCode(t)),n}gobbleGroup(){this.index++;let t=this.gobbleExpressions(e.CPAREN_CODE);if(this.code===e.CPAREN_CODE)return this.index++,t.length===1?t[0]:t.length?{type:e.SEQUENCE_EXP,expressions:t}:!1;this.throwError("Unclosed (")}gobbleArray(){return this.index++,{type:e.ARRAY_EXP,elements:this.gobbleArguments(e.CBRACK_CODE)}}},cae=new DS;Object.assign(wa,{hooks:cae,plugins:new QS(wa),COMPOUND:"Compound",SEQUENCE_EXP:"SequenceExpression",IDENTIFIER:"Identifier",MEMBER_EXP:"MemberExpression",LITERAL:"Literal",THIS_EXP:"ThisExpression",CALL_EXP:"CallExpression",UNARY_EXP:"UnaryExpression",BINARY_EXP:"BinaryExpression",ARRAY_EXP:"ArrayExpression",TAB_CODE:9,LF_CODE:10,CR_CODE:13,SPACE_CODE:32,PERIOD_CODE:46,COMMA_CODE:44,SQUOTE_CODE:39,DQUOTE_CODE:34,OPAREN_CODE:40,CPAREN_CODE:41,OBRACK_CODE:91,CBRACK_CODE:93,QUMARK_CODE:63,SEMCOL_CODE:59,COLON_CODE:58,unary_ops:{"-":1,"!":1,"~":1,"+":1},binary_ops:{"||":1,"??":1,"&&":2,"|":3,"^":4,"&":5,"==":6,"!=":6,"===":6,"!==":6,"<":7,">":7,"<=":7,">=":7,"<<":8,">>":8,">>>":8,"+":9,"-":9,"*":10,"/":10,"%":10,"**":11},right_associative:new Set(["**"]),additional_identifier_chars:new Set(["$","_"]),literals:{true:!0,false:!1,null:null},this_str:"this"});wa.max_unop_len=wa.getMaxKeyLen(wa.unary_ops);wa.max_binop_len=wa.getMaxKeyLen(wa.binary_ops);var $f=e=>new wa(e).parse(),Aae=Object.getOwnPropertyNames(class{});Object.getOwnPropertyNames(wa).filter(e=>!Aae.includes(e)&&$f[e]===void 0).forEach(e=>{$f[e]=wa[e]});$f.Jsep=wa;var lae="ConditionalExpression",fae={name:"ternary",init(e){e.hooks.add("after-expression",function(n){if(n.node&&this.code===e.QUMARK_CODE){this.index++;let i=n.node,o=this.gobbleExpression();if(o||this.throwError("Expected expression"),this.gobbleSpaces(),this.code===e.COLON_CODE){this.index++;let r=this.gobbleExpression();if(r||this.throwError("Expected expression"),n.node={type:lae,test:i,consequent:o,alternate:r},i.operator&&e.binary_ops[i.operator]<=.9){let a=i;for(;a.right.operator&&e.binary_ops[a.right.operator]<=.9;)a=a.right;n.node.test=a.right,a.right=n.node,n.node=i}}else this.throwError("Expected :")}})}};$f.plugins.register(fae);var uae={VARIABLE:0,UNARY:1,BINARY:2,TERNARY:3,CONDITIONAL:4,MEMBER:5,FUNCTION_CALL:6,ARRAY:7,REGEX:8,VARIABLE_IN_STRING:9,LITERAL_NULL:10,LITERAL_BOOLEAN:11,LITERAL_NUMBER:12,LITERAL_STRING:13,LITERAL_COLOR:14,LITERAL_VECTOR:15,LITERAL_REGEX:16,LITERAL_UNDEFINED:17,BUILTIN_VARIABLE:18},We=Object.freeze(uae);function Tc(e,t){this._expression=e,e=xae(e,t),e=Sae(Tae(e)),$f.addBinaryOp("=~",0),$f.addBinaryOp("!~",0);let n;try{n=$f(e)}catch(i){throw new oe(i)}this._runtimeAst=Dn(this,n)}Object.defineProperties(Tc.prototype,{expression:{get:function(){return this._expression}}});var Ht={arrayIndex:0,arrayArray:[[]],cartesian2Index:0,cartesian3Index:0,cartesian4Index:0,cartesian2Array:[new U],cartesian3Array:[new u],cartesian4Array:[new se],reset:function(){this.arrayIndex=0,this.cartesian2Index=0,this.cartesian3Index=0,this.cartesian4Index=0},getArray:function(){this.arrayIndex>=this.arrayArray.length&&this.arrayArray.push([]);let e=this.arrayArray[this.arrayIndex++];return e.length=0,e},getCartesian2:function(){return this.cartesian2Index>=this.cartesian2Array.length&&this.cartesian2Array.push(new U),this.cartesian2Array[this.cartesian2Index++]},getCartesian3:function(){return this.cartesian3Index>=this.cartesian3Array.length&&this.cartesian3Array.push(new u),this.cartesian3Array[this.cartesian3Index++]},getCartesian4:function(){return this.cartesian4Index>=this.cartesian4Array.length&&this.cartesian4Array.push(new se),this.cartesian4Array[this.cartesian4Index++]}};Tc.prototype.evaluate=function(e,t){Ht.reset();let n=this._runtimeAst.evaluate(e);return t instanceof F&&n instanceof se?F.fromCartesian4(n,t):n instanceof U||n instanceof u||n instanceof se?n.clone(t):n};Tc.prototype.evaluateColor=function(e,t){Ht.reset();let n=this._runtimeAst.evaluate(e);return F.fromCartesian4(n,t)};Tc.prototype.getShaderFunction=function(e,t,n,i){let o=this.getShaderExpression(t,n);return o=`${i} ${e}
{
    return ${o};
}
`,o};Tc.prototype.getShaderExpression=function(e,t){return this._runtimeAst.getShaderExpression(e,t)};Tc.prototype.getVariables=function(){let e=[];return this._runtimeAst.getVariables(e),e=e.filter(function(t,n,i){return i.indexOf(t)===n}),e};var dae=["!","-","+"],R2=["+","-","*","/","%","===","!==",">",">=","<","<=","&&","||","!~","=~"],GC=/\${(.*?)}/g,hae=/\\/g,mae="@#%",pae=/@#%/g,$y=new F,eb={abs:Uo(Math.abs),sqrt:Uo(Math.sqrt),cos:Uo(Math.cos),sin:Uo(Math.sin),tan:Uo(Math.tan),acos:Uo(Math.acos),asin:Uo(Math.asin),atan:Uo(Math.atan),radians:Uo(w.toRadians),degrees:Uo(w.toDegrees),sign:Uo(w.sign),floor:Uo(Math.floor),ceil:Uo(Math.ceil),round:Uo(Math.round),exp:Uo(Math.exp),exp2:Uo(Cae),log:Uo(Math.log),log2:Uo(_ae),fract:Uo(gae),length:Eae,normalize:Iae},tb={atan2:Xy(Math.atan2,!1),pow:Xy(Math.pow,!1),min:Xy(Math.min,!0),max:Xy(Math.max,!0),distance:yae,dot:bae,cross:Bae},PS={clamp:v2(w.clamp,!0),mix:v2(w.lerp,!0)};function gae(e){return e-Math.floor(e)}function Cae(e){return Math.pow(2,e)}function _ae(e){return w.log2(e)}function Uo(e){return function(t,n){if(typeof n=="number")return e(n);if(n instanceof U)return U.fromElements(e(n.x),e(n.y),Ht.getCartesian2());if(n instanceof u)return u.fromElements(e(n.x),e(n.y),e(n.z),Ht.getCartesian3());if(n instanceof se)return se.fromElements(e(n.x),e(n.y),e(n.z),e(n.w),Ht.getCartesian4());throw new oe(`Function "${t}" requires a vector or number argument. Argument is ${n}.`)}}function Xy(e,t){return function(n,i,o){if(t&&typeof o=="number"){if(typeof i=="number")return e(i,o);if(i instanceof U)return U.fromElements(e(i.x,o),e(i.y,o),Ht.getCartesian2());if(i instanceof u)return u.fromElements(e(i.x,o),e(i.y,o),e(i.z,o),Ht.getCartesian3());if(i instanceof se)return se.fromElements(e(i.x,o),e(i.y,o),e(i.z,o),e(i.w,o),Ht.getCartesian4())}if(typeof i=="number"&&typeof o=="number")return e(i,o);if(i instanceof U&&o instanceof U)return U.fromElements(e(i.x,o.x),e(i.y,o.y),Ht.getCartesian2());if(i instanceof u&&o instanceof u)return u.fromElements(e(i.x,o.x),e(i.y,o.y),e(i.z,o.z),Ht.getCartesian3());if(i instanceof se&&o instanceof se)return se.fromElements(e(i.x,o.x),e(i.y,o.y),e(i.z,o.z),e(i.w,o.w),Ht.getCartesian4());throw new oe(`Function "${n}" requires vector or number arguments of matching types. Arguments are ${i} and ${o}.`)}}function v2(e,t){return function(n,i,o,r){if(t&&typeof r=="number"){if(typeof i=="number"&&typeof o=="number")return e(i,o,r);if(i instanceof U&&o instanceof U)return U.fromElements(e(i.x,o.x,r),e(i.y,o.y,r),Ht.getCartesian2());if(i instanceof u&&o instanceof u)return u.fromElements(e(i.x,o.x,r),e(i.y,o.y,r),e(i.z,o.z,r),Ht.getCartesian3());if(i instanceof se&&o instanceof se)return se.fromElements(e(i.x,o.x,r),e(i.y,o.y,r),e(i.z,o.z,r),e(i.w,o.w,r),Ht.getCartesian4())}if(typeof i=="number"&&typeof o=="number"&&typeof r=="number")return e(i,o,r);if(i instanceof U&&o instanceof U&&r instanceof U)return U.fromElements(e(i.x,o.x,r.x),e(i.y,o.y,r.y),Ht.getCartesian2());if(i instanceof u&&o instanceof u&&r instanceof u)return u.fromElements(e(i.x,o.x,r.x),e(i.y,o.y,r.y),e(i.z,o.z,r.z),Ht.getCartesian3());if(i instanceof se&&o instanceof se&&r instanceof se)return se.fromElements(e(i.x,o.x,r.x),e(i.y,o.y,r.y),e(i.z,o.z,r.z),e(i.w,o.w,r.w),Ht.getCartesian4());throw new oe(`Function "${n}" requires vector or number arguments of matching types. Arguments are ${i}, ${o}, and ${r}.`)}}function Eae(e,t){if(typeof t=="number")return Math.abs(t);if(t instanceof U)return U.magnitude(t);if(t instanceof u)return u.magnitude(t);if(t instanceof se)return se.magnitude(t);throw new oe(`Function "${e}" requires a vector or number argument. Argument is ${t}.`)}function Iae(e,t){if(typeof t=="number")return 1;if(t instanceof U)return U.normalize(t,Ht.getCartesian2());if(t instanceof u)return u.normalize(t,Ht.getCartesian3());if(t instanceof se)return se.normalize(t,Ht.getCartesian4());throw new oe(`Function "${e}" requires a vector or number argument. Argument is ${t}.`)}function yae(e,t,n){if(typeof t=="number"&&typeof n=="number")return Math.abs(t-n);if(t instanceof U&&n instanceof U)return U.distance(t,n);if(t instanceof u&&n instanceof u)return u.distance(t,n);if(t instanceof se&&n instanceof se)return se.distance(t,n);throw new oe(`Function "${e}" requires vector or number arguments of matching types. Arguments are ${t} and ${n}.`)}function bae(e,t,n){if(typeof t=="number"&&typeof n=="number")return t*n;if(t instanceof U&&n instanceof U)return U.dot(t,n);if(t instanceof u&&n instanceof u)return u.dot(t,n);if(t instanceof se&&n instanceof se)return se.dot(t,n);throw new oe(`Function "${e}" requires vector or number arguments of matching types. Arguments are ${t} and ${n}.`)}function Bae(e,t,n){if(t instanceof u&&n instanceof u)return u.cross(t,n,Ht.getCartesian3());throw new oe(`Function "${e}" requires vec3 arguments. Arguments are ${t} and ${n}.`)}function Je(e,t,n,i,o){this._type=e,this._value=t,this._left=n,this._right=i,this._test=o,this.evaluate=void 0,Nae(this)}function xae(e,t){if(!c(t))return e;for(let n in t)if(t.hasOwnProperty(n)){let i=new RegExp(`\\$\\{${n}\\}`,"g"),o=`(${t[n]})`;c(o)&&(e=e.replace(i,o))}return e}function Tae(e){return e.replace(hae,mae)}function vS(e){return e.replace(pae,"\\")}function Sae(e){let t=e,n="",i=t.indexOf("${");for(;i>=0;){let o=t.indexOf("'"),r=t.indexOf('"'),a;if(o>=0&&o<i)a=t.indexOf("'",o+1),n+=t.substr(0,a+1),t=t.substr(a+1),i=t.indexOf("${");else if(r>=0&&r<i)a=t.indexOf('"',r+1),n+=t.substr(0,a+1),t=t.substr(a+1),i=t.indexOf("${");else{n+=t.substr(0,i);let s=t.indexOf("}");if(s<0)throw new oe("Unmatched {.");n+=`czm_${t.substr(i+2,s-(i+2))}`,t=t.substr(s+1),i=t.indexOf("${")}}return n+=t,n}function wae(e){let t=typeof e.value;if(e.value===null)return new Je(We.LITERAL_NULL,null);if(t==="boolean")return new Je(We.LITERAL_BOOLEAN,e.value);if(t==="number")return new Je(We.LITERAL_NUMBER,e.value);if(t==="string")return e.value.indexOf("${")>=0?new Je(We.VARIABLE_IN_STRING,e.value):new Je(We.LITERAL_STRING,vS(e.value))}function Dae(e,t){let n=t.arguments,i=n.length,o,r,a,s;if(t.callee.type==="MemberExpression"){o=t.callee.property.name;let A=t.callee.object;if(o==="test"||o==="exec"){if(!c(A.callee)||A.callee.name!=="regExp")throw new oe(`${o} is not a function.`);return i===0?o==="test"?new Je(We.LITERAL_BOOLEAN,!1):new Je(We.LITERAL_NULL,null):(a=Dn(e,A),s=Dn(e,n[0]),new Je(We.FUNCTION_CALL,o,a,s))}else if(o==="toString")return r=Dn(e,A),new Je(We.FUNCTION_CALL,o,r);throw new oe(`Unexpected function call "${o}".`)}if(o=t.callee.name,o==="color"){if(i===0)return new Je(We.LITERAL_COLOR,o);if(r=Dn(e,n[0]),c(n[1])){let A=Dn(e,n[1]);return new Je(We.LITERAL_COLOR,o,[r,A])}return new Je(We.LITERAL_COLOR,o,[r])}else if(o==="rgb"||o==="hsl"){if(i<3)throw new oe(`${o} requires three arguments.`);return r=[Dn(e,n[0]),Dn(e,n[1]),Dn(e,n[2])],new Je(We.LITERAL_COLOR,o,r)}else if(o==="rgba"||o==="hsla"){if(i<4)throw new oe(`${o} requires four arguments.`);return r=[Dn(e,n[0]),Dn(e,n[1]),Dn(e,n[2]),Dn(e,n[3])],new Je(We.LITERAL_COLOR,o,r)}else if(o==="vec2"||o==="vec3"||o==="vec4"){r=new Array(i);for(let A=0;A<i;++A)r[A]=Dn(e,n[A]);return new Je(We.LITERAL_VECTOR,o,r)}else{if(o==="isNaN"||o==="isFinite")return i===0?o==="isNaN"?new Je(We.LITERAL_BOOLEAN,!0):new Je(We.LITERAL_BOOLEAN,!1):(r=Dn(e,n[0]),new Je(We.UNARY,o,r));if(o==="isExactClass"||o==="isClass"){if(i<1||i>1)throw new oe(`${o} requires exactly one argument.`);return r=Dn(e,n[0]),new Je(We.UNARY,o,r)}else if(o==="getExactClassName"){if(i>0)throw new oe(`${o} does not take any argument.`);return new Je(We.UNARY,o)}else if(c(eb[o])){if(i!==1)throw new oe(`${o} requires exactly one argument.`);return r=Dn(e,n[0]),new Je(We.UNARY,o,r)}else if(c(tb[o])){if(i!==2)throw new oe(`${o} requires exactly two arguments.`);return a=Dn(e,n[0]),s=Dn(e,n[1]),new Je(We.BINARY,o,a,s)}else if(c(PS[o])){if(i!==3)throw new oe(`${o} requires exactly three arguments.`);a=Dn(e,n[0]),s=Dn(e,n[1]);let A=Dn(e,n[2]);return new Je(We.TERNARY,o,a,s,A)}else{if(o==="Boolean")return i===0?new Je(We.LITERAL_BOOLEAN,!1):(r=Dn(e,n[0]),new Je(We.UNARY,o,r));if(o==="Number")return i===0?new Je(We.LITERAL_NUMBER,0):(r=Dn(e,n[0]),new Je(We.UNARY,o,r));if(o==="String")return i===0?new Je(We.LITERAL_STRING,""):(r=Dn(e,n[0]),new Je(We.UNARY,o,r));if(o==="regExp")return Qae(e,t)}}throw new oe(`Unexpected function call "${o}".`)}function Qae(e,t){let n=t.arguments;if(n.length===0)return new Je(We.LITERAL_REGEX,new RegExp);let i=Dn(e,n[0]),o;if(n.length>1){let r=Dn(e,n[1]);if(RS(i)&&RS(r)){try{o=new RegExp(vS(String(i._value)),r._value)}catch(a){throw new oe(a)}return new Je(We.LITERAL_REGEX,o)}return new Je(We.REGEX,i,r)}if(RS(i)){try{o=new RegExp(vS(String(i._value)))}catch(r){throw new oe(r)}return new Je(We.LITERAL_REGEX,o)}return new Je(We.REGEX,i)}function Rae(e){if(Oae(e.name)){let t=Lae(e.name);return t.substr(0,8)==="tiles3d_"?new Je(We.BUILTIN_VARIABLE,t):new Je(We.VARIABLE,t)}else{if(e.name==="NaN")return new Je(We.LITERAL_NUMBER,NaN);if(e.name==="Infinity")return new Je(We.LITERAL_NUMBER,1/0);if(e.name==="undefined")return new Je(We.LITERAL_UNDEFINED,void 0)}throw new oe(`${e.name} is not defined.`)}function vae(e){let t=e.property.name;if(t==="PI")return new Je(We.LITERAL_NUMBER,Math.PI);if(t==="E")return new Je(We.LITERAL_NUMBER,Math.E)}function Pae(e){if(e.property.name==="POSITIVE_INFINITY")return new Je(We.LITERAL_NUMBER,Number.POSITIVE_INFINITY)}function Mae(e,t){if(t.object.name==="Math")return vae(t);if(t.object.name==="Number")return Pae(t);let n,i=Dn(e,t.object);return t.computed?(n=Dn(e,t.property),new Je(We.MEMBER,"brackets",i,n)):(n=new Je(We.LITERAL_STRING,t.property.name),new Je(We.MEMBER,"dot",i,n))}function RS(e){return e._type>=We.LITERAL_NULL}function Oae(e){return e.substr(0,4)==="czm_"}function Lae(e){return e.substr(4)}function Dn(e,t){let n,i,o,r;if(t.type==="Literal")n=wae(t);else if(t.type==="CallExpression")n=Dae(e,t);else if(t.type==="Identifier")n=Rae(t);else if(t.type==="UnaryExpression"){i=t.operator;let a=Dn(e,t.argument);if(dae.indexOf(i)>-1)n=new Je(We.UNARY,i,a);else throw new oe(`Unexpected operator "${i}".`)}else if(t.type==="BinaryExpression")if(i=t.operator,o=Dn(e,t.left),r=Dn(e,t.right),R2.indexOf(i)>-1)n=new Je(We.BINARY,i,o,r);else throw new oe(`Unexpected operator "${i}".`);else if(t.type==="LogicalExpression")i=t.operator,o=Dn(e,t.left),r=Dn(e,t.right),R2.indexOf(i)>-1&&(n=new Je(We.BINARY,i,o,r));else if(t.type==="ConditionalExpression"){let a=Dn(e,t.test);o=Dn(e,t.consequent),r=Dn(e,t.alternate),n=new Je(We.CONDITIONAL,"?",o,r,a)}else if(t.type==="MemberExpression")n=Mae(e,t);else if(t.type==="ArrayExpression"){let a=[];for(let s=0;s<t.elements.length;s++)a[s]=Dn(e,t.elements[s]);n=new Je(We.ARRAY,a)}else throw t.type==="Compound"?new oe("Provide exactly one expression."):new oe("Cannot parse expression.");return n}function Nae(e){e._type===We.CONDITIONAL?e.evaluate=e._evaluateConditional:e._type===We.FUNCTION_CALL?e._value==="test"?e.evaluate=e._evaluateRegExpTest:e._value==="exec"?e.evaluate=e._evaluateRegExpExec:e._value==="toString"&&(e.evaluate=e._evaluateToString):e._type===We.UNARY?e._value==="!"?e.evaluate=e._evaluateNot:e._value==="-"?e.evaluate=e._evaluateNegative:e._value==="+"?e.evaluate=e._evaluatePositive:e._value==="isNaN"?e.evaluate=e._evaluateNaN:e._value==="isFinite"?e.evaluate=e._evaluateIsFinite:e._value==="isExactClass"?e.evaluate=e._evaluateIsExactClass:e._value==="isClass"?e.evaluate=e._evaluateIsClass:e._value==="getExactClassName"?e.evaluate=e._evaluateGetExactClassName:e._value==="Boolean"?e.evaluate=e._evaluateBooleanConversion:e._value==="Number"?e.evaluate=e._evaluateNumberConversion:e._value==="String"?e.evaluate=e._evaluateStringConversion:c(eb[e._value])&&(e.evaluate=kae(e._value)):e._type===We.BINARY?e._value==="+"?e.evaluate=e._evaluatePlus:e._value==="-"?e.evaluate=e._evaluateMinus:e._value==="*"?e.evaluate=e._evaluateTimes:e._value==="/"?e.evaluate=e._evaluateDivide:e._value==="%"?e.evaluate=e._evaluateMod:e._value==="==="?e.evaluate=e._evaluateEqualsStrict:e._value==="!=="?e.evaluate=e._evaluateNotEqualsStrict:e._value==="<"?e.evaluate=e._evaluateLessThan:e._value==="<="?e.evaluate=e._evaluateLessThanOrEquals:e._value===">"?e.evaluate=e._evaluateGreaterThan:e._value===">="?e.evaluate=e._evaluateGreaterThanOrEquals:e._value==="&&"?e.evaluate=e._evaluateAnd:e._value==="||"?e.evaluate=e._evaluateOr:e._value==="=~"?e.evaluate=e._evaluateRegExpMatch:e._value==="!~"?e.evaluate=e._evaluateRegExpNotMatch:c(tb[e._value])&&(e.evaluate=Uae(e._value)):e._type===We.TERNARY?e.evaluate=Gae(e._value):e._type===We.MEMBER?e._value==="brackets"?e.evaluate=e._evaluateMemberBrackets:e.evaluate=e._evaluateMemberDot:e._type===We.ARRAY?e.evaluate=e._evaluateArray:e._type===We.VARIABLE?e.evaluate=e._evaluateVariable:e._type===We.VARIABLE_IN_STRING?e.evaluate=e._evaluateVariableString:e._type===We.LITERAL_COLOR?e.evaluate=e._evaluateLiteralColor:e._type===We.LITERAL_VECTOR?e.evaluate=e._evaluateLiteralVector:e._type===We.LITERAL_STRING?e.evaluate=e._evaluateLiteralString:e._type===We.REGEX?e.evaluate=e._evaluateRegExp:e._type===We.BUILTIN_VARIABLE?e._value==="tiles3d_tileset_time"&&(e.evaluate=Fae):e.evaluate=e._evaluateLiteral}function Fae(e){return c(e)?e.content.tileset.timeSinceLoad:0}function kae(e){let t=eb[e];return function(n){let i=this._left.evaluate(n);return t(e,i)}}function Uae(e){let t=tb[e];return function(n){let i=this._left.evaluate(n),o=this._right.evaluate(n);return t(e,i,o)}}function Gae(e){let t=PS[e];return function(n){let i=this._left.evaluate(n),o=this._right.evaluate(n),r=this._test.evaluate(n);return t(e,i,o,r)}}function nb(e,t){if(c(e))return e.getPropertyInherited(t)}Je.prototype._evaluateLiteral=function(){return this._value};Je.prototype._evaluateLiteralColor=function(e){let t=$y,n=this._left;if(this._value==="color")c(n)?n.length>1?(F.fromCssColorString(n[0].evaluate(e),t),t.alpha=n[1].evaluate(e)):F.fromCssColorString(n[0].evaluate(e),t):F.fromBytes(255,255,255,255,t);else if(this._value==="rgb")F.fromBytes(n[0].evaluate(e),n[1].evaluate(e),n[2].evaluate(e),255,t);else if(this._value==="rgba"){let i=n[3].evaluate(e)*255;F.fromBytes(n[0].evaluate(e),n[1].evaluate(e),n[2].evaluate(e),i,t)}else this._value==="hsl"?F.fromHsl(n[0].evaluate(e),n[1].evaluate(e),n[2].evaluate(e),1,t):this._value==="hsla"&&F.fromHsl(n[0].evaluate(e),n[1].evaluate(e),n[2].evaluate(e),n[3].evaluate(e),t);return se.fromColor(t,Ht.getCartesian4())};Je.prototype._evaluateLiteralVector=function(e){let t=Ht.getArray(),n=this._value,i=this._left,o=i.length;for(let s=0;s<o;++s){let A=i[s].evaluate(e);if(typeof A=="number")t.push(A);else if(A instanceof U)t.push(A.x,A.y);else if(A instanceof u)t.push(A.x,A.y,A.z);else if(A instanceof se)t.push(A.x,A.y,A.z,A.w);else throw new oe(`${n} argument must be a vector or number. Argument is ${A}.`)}let r=t.length,a=parseInt(n.charAt(3));if(r===0)throw new oe(`Invalid ${n} constructor. No valid arguments.`);if(r<a&&r>1)throw new oe(`Invalid ${n} constructor. Not enough arguments.`);if(r>a&&o>1)throw new oe(`Invalid ${n} constructor. Too many arguments.`);if(r===1){let s=t[0];t.push(s,s,s)}if(n==="vec2")return U.fromArray(t,0,Ht.getCartesian2());if(n==="vec3")return u.fromArray(t,0,Ht.getCartesian3());if(n==="vec4")return se.fromArray(t,0,Ht.getCartesian4())};Je.prototype._evaluateLiteralString=function(){return this._value};Je.prototype._evaluateVariableString=function(e){let t=this._value,n=GC.exec(t);for(;n!==null;){let i=n[0],o=n[1],r=nb(e,o);c(r)||(r=""),t=t.replace(i,r),GC.lastIndex+=r.length-i.length,n=GC.exec(t)}return t};Je.prototype._evaluateVariable=function(e){return nb(e,this._value)};function Gd(e){return e._value==="feature"}Je.prototype._evaluateMemberDot=function(e){if(Gd(this._left))return nb(e,this._right.evaluate(e));let t=this._left.evaluate(e);if(!c(t))return;let n=this._right.evaluate(e);if(t instanceof U||t instanceof u||t instanceof se){if(n==="r")return t.x;if(n==="g")return t.y;if(n==="b")return t.z;if(n==="a")return t.w}return t[n]};Je.prototype._evaluateMemberBrackets=function(e){if(Gd(this._left))return nb(e,this._right.evaluate(e));let t=this._left.evaluate(e);if(!c(t))return;let n=this._right.evaluate(e);if(t instanceof U||t instanceof u||t instanceof se){if(n===0||n==="r")return t.x;if(n===1||n==="g")return t.y;if(n===2||n==="b")return t.z;if(n===3||n==="a")return t.w}return t[n]};Je.prototype._evaluateArray=function(e){let t=[];for(let n=0;n<this._value.length;n++)t[n]=this._value[n].evaluate(e);return t};Je.prototype._evaluateNot=function(e){let t=this._left.evaluate(e);if(typeof t!="boolean")throw new oe(`Operator "!" requires a boolean argument. Argument is ${t}.`);return!t};Je.prototype._evaluateNegative=function(e){let t=this._left.evaluate(e);if(t instanceof U)return U.negate(t,Ht.getCartesian2());if(t instanceof u)return u.negate(t,Ht.getCartesian3());if(t instanceof se)return se.negate(t,Ht.getCartesian4());if(typeof t=="number")return-t;throw new oe(`Operator "-" requires a vector or number argument. Argument is ${t}.`)};Je.prototype._evaluatePositive=function(e){let t=this._left.evaluate(e);if(!(t instanceof U||t instanceof u||t instanceof se||typeof t=="number"))throw new oe(`Operator "+" requires a vector or number argument. Argument is ${t}.`);return t};Je.prototype._evaluateLessThan=function(e){let t=this._left.evaluate(e),n=this._right.evaluate(e);if(typeof t!="number"||typeof n!="number")throw new oe(`Operator "<" requires number arguments. Arguments are ${t} and ${n}.`);return t<n};Je.prototype._evaluateLessThanOrEquals=function(e){let t=this._left.evaluate(e),n=this._right.evaluate(e);if(typeof t!="number"||typeof n!="number")throw new oe(`Operator "<=" requires number arguments. Arguments are ${t} and ${n}.`);return t<=n};Je.prototype._evaluateGreaterThan=function(e){let t=this._left.evaluate(e),n=this._right.evaluate(e);if(typeof t!="number"||typeof n!="number")throw new oe(`Operator ">" requires number arguments. Arguments are ${t} and ${n}.`);return t>n};Je.prototype._evaluateGreaterThanOrEquals=function(e){let t=this._left.evaluate(e),n=this._right.evaluate(e);if(typeof t!="number"||typeof n!="number")throw new oe(`Operator ">=" requires number arguments. Arguments are ${t} and ${n}.`);return t>=n};Je.prototype._evaluateOr=function(e){let t=this._left.evaluate(e);if(typeof t!="boolean")throw new oe(`Operator "||" requires boolean arguments. First argument is ${t}.`);if(t)return!0;let n=this._right.evaluate(e);if(typeof n!="boolean")throw new oe(`Operator "||" requires boolean arguments. Second argument is ${n}.`);return t||n};Je.prototype._evaluateAnd=function(e){let t=this._left.evaluate(e);if(typeof t!="boolean")throw new oe(`Operator "&&" requires boolean arguments. First argument is ${t}.`);if(!t)return!1;let n=this._right.evaluate(e);if(typeof n!="boolean")throw new oe(`Operator "&&" requires boolean arguments. Second argument is ${n}.`);return t&&n};Je.prototype._evaluatePlus=function(e){let t=this._left.evaluate(e),n=this._right.evaluate(e);if(n instanceof U&&t instanceof U)return U.add(t,n,Ht.getCartesian2());if(n instanceof u&&t instanceof u)return u.add(t,n,Ht.getCartesian3());if(n instanceof se&&t instanceof se)return se.add(t,n,Ht.getCartesian4());if(typeof t=="string"||typeof n=="string")return t+n;if(typeof t=="number"&&typeof n=="number")return t+n;throw new oe(`Operator "+" requires vector or number arguments of matching types, or at least one string argument. Arguments are ${t} and ${n}.`)};Je.prototype._evaluateMinus=function(e){let t=this._left.evaluate(e),n=this._right.evaluate(e);if(n instanceof U&&t instanceof U)return U.subtract(t,n,Ht.getCartesian2());if(n instanceof u&&t instanceof u)return u.subtract(t,n,Ht.getCartesian3());if(n instanceof se&&t instanceof se)return se.subtract(t,n,Ht.getCartesian4());if(typeof t=="number"&&typeof n=="number")return t-n;throw new oe(`Operator "-" requires vector or number arguments of matching types. Arguments are ${t} and ${n}.`)};Je.prototype._evaluateTimes=function(e){let t=this._left.evaluate(e),n=this._right.evaluate(e);if(n instanceof U&&t instanceof U)return U.multiplyComponents(t,n,Ht.getCartesian2());if(n instanceof U&&typeof t=="number")return U.multiplyByScalar(n,t,Ht.getCartesian2());if(t instanceof U&&typeof n=="number")return U.multiplyByScalar(t,n,Ht.getCartesian2());if(n instanceof u&&t instanceof u)return u.multiplyComponents(t,n,Ht.getCartesian3());if(n instanceof u&&typeof t=="number")return u.multiplyByScalar(n,t,Ht.getCartesian3());if(t instanceof u&&typeof n=="number")return u.multiplyByScalar(t,n,Ht.getCartesian3());if(n instanceof se&&t instanceof se)return se.multiplyComponents(t,n,Ht.getCartesian4());if(n instanceof se&&typeof t=="number")return se.multiplyByScalar(n,t,Ht.getCartesian4());if(t instanceof se&&typeof n=="number")return se.multiplyByScalar(t,n,Ht.getCartesian4());if(typeof t=="number"&&typeof n=="number")return t*n;throw new oe(`Operator "*" requires vector or number arguments. If both arguments are vectors they must be matching types. Arguments are ${t} and ${n}.`)};Je.prototype._evaluateDivide=function(e){let t=this._left.evaluate(e),n=this._right.evaluate(e);if(n instanceof U&&t instanceof U)return U.divideComponents(t,n,Ht.getCartesian2());if(t instanceof U&&typeof n=="number")return U.divideByScalar(t,n,Ht.getCartesian2());if(n instanceof u&&t instanceof u)return u.divideComponents(t,n,Ht.getCartesian3());if(t instanceof u&&typeof n=="number")return u.divideByScalar(t,n,Ht.getCartesian3());if(n instanceof se&&t instanceof se)return se.divideComponents(t,n,Ht.getCartesian4());if(t instanceof se&&typeof n=="number")return se.divideByScalar(t,n,Ht.getCartesian4());if(typeof t=="number"&&typeof n=="number")return t/n;throw new oe(`Operator "/" requires vector or number arguments of matching types, or a number as the second argument. Arguments are ${t} and ${n}.`)};Je.prototype._evaluateMod=function(e){let t=this._left.evaluate(e),n=this._right.evaluate(e);if(n instanceof U&&t instanceof U)return U.fromElements(t.x%n.x,t.y%n.y,Ht.getCartesian2());if(n instanceof u&&t instanceof u)return u.fromElements(t.x%n.x,t.y%n.y,t.z%n.z,Ht.getCartesian3());if(n instanceof se&&t instanceof se)return se.fromElements(t.x%n.x,t.y%n.y,t.z%n.z,t.w%n.w,Ht.getCartesian4());if(typeof t=="number"&&typeof n=="number")return t%n;throw new oe(`Operator "%" requires vector or number arguments of matching types. Arguments are ${t} and ${n}.`)};Je.prototype._evaluateEqualsStrict=function(e){let t=this._left.evaluate(e),n=this._right.evaluate(e);return n instanceof U&&t instanceof U||n instanceof u&&t instanceof u||n instanceof se&&t instanceof se?t.equals(n):t===n};Je.prototype._evaluateNotEqualsStrict=function(e){let t=this._left.evaluate(e),n=this._right.evaluate(e);return n instanceof U&&t instanceof U||n instanceof u&&t instanceof u||n instanceof se&&t instanceof se?!t.equals(n):t!==n};Je.prototype._evaluateConditional=function(e){let t=this._test.evaluate(e);if(typeof t!="boolean")throw new oe(`Conditional argument of conditional expression must be a boolean. Argument is ${t}.`);return t?this._left.evaluate(e):this._right.evaluate(e)};Je.prototype._evaluateNaN=function(e){return isNaN(this._left.evaluate(e))};Je.prototype._evaluateIsFinite=function(e){return isFinite(this._left.evaluate(e))};Je.prototype._evaluateIsExactClass=function(e){return c(e)?e.isExactClass(this._left.evaluate(e)):!1};Je.prototype._evaluateIsClass=function(e){return c(e)?e.isClass(this._left.evaluate(e)):!1};Je.prototype._evaluateGetExactClassName=function(e){if(c(e))return e.getExactClassName()};Je.prototype._evaluateBooleanConversion=function(e){return!!this._left.evaluate(e)};Je.prototype._evaluateNumberConversion=function(e){return Number(this._left.evaluate(e))};Je.prototype._evaluateStringConversion=function(e){return String(this._left.evaluate(e))};Je.prototype._evaluateRegExp=function(e){let t=this._value.evaluate(e),n="";c(this._left)&&(n=this._left.evaluate(e));let i;try{i=new RegExp(t,n)}catch(o){throw new oe(o)}return i};Je.prototype._evaluateRegExpTest=function(e){let t=this._left.evaluate(e),n=this._right.evaluate(e);if(!(t instanceof RegExp&&typeof n=="string"))throw new oe(`RegExp.test requires the first argument to be a RegExp and the second argument to be a string. Arguments are ${t} and ${n}.`);return t.test(n)};Je.prototype._evaluateRegExpMatch=function(e){let t=this._left.evaluate(e),n=this._right.evaluate(e);if(t instanceof RegExp&&typeof n=="string")return t.test(n);if(n instanceof RegExp&&typeof t=="string")return n.test(t);throw new oe(`Operator "=~" requires one RegExp argument and one string argument. Arguments are ${t} and ${n}.`)};Je.prototype._evaluateRegExpNotMatch=function(e){let t=this._left.evaluate(e),n=this._right.evaluate(e);if(t instanceof RegExp&&typeof n=="string")return!t.test(n);if(n instanceof RegExp&&typeof t=="string")return!n.test(t);throw new oe(`Operator "!~" requires one RegExp argument and one string argument. Arguments are ${t} and ${n}.`)};Je.prototype._evaluateRegExpExec=function(e){let t=this._left.evaluate(e),n=this._right.evaluate(e);if(!(t instanceof RegExp&&typeof n=="string"))throw new oe(`RegExp.exec requires the first argument to be a RegExp and the second argument to be a string. Arguments are ${t} and ${n}.`);let i=t.exec(n);return c(i)?i[1]:null};Je.prototype._evaluateToString=function(e){let t=this._left.evaluate(e);if(t instanceof RegExp||t instanceof U||t instanceof u||t instanceof se)return String(t);throw new oe(`Unexpected function call "${this._value}".`)};function P2(e){let t=e._left,n=t.length;for(let s=0;s<n;++s)if(t[s]._type!==We.LITERAL_NUMBER)return;let i=t[0]._value,o=t[1]._value,r=t[2]._value,a=n===4?t[3]._value:1;return F.fromHsl(i,o,r,a,$y)}function M2(e){let t=e._left,n=t.length;for(let o=0;o<n;++o)if(t[o]._type!==We.LITERAL_NUMBER)return;let i=$y;return i.red=t[0]._value/255,i.green=t[1]._value/255,i.blue=t[2]._value/255,i.alpha=n===4?t[3]._value:1,i}function eu(e){return e%1===0?e.toFixed(1):e.toString()}function zae(e){let t=eu(e.red),n=eu(e.green),i=eu(e.blue);return`vec3(${t}, ${n}, ${i})`}function Zy(e){let t=eu(e.red),n=eu(e.green),i=eu(e.blue),o=eu(e.alpha);return`vec4(${t}, ${n}, ${i}, ${o})`}function O2(e,t,n,i){let o=e.length,r=new Array(o);for(let a=0;a<o;++a)r[a]=e[a].getShaderExpression(t,n,i);return r}function L2(e,t){return c(t[e])?t[e]:Tc.NULL_SENTINEL}Tc.NULL_SENTINEL="czm_infinity";Je.prototype.getShaderExpression=function(e,t,n){let i,o,r,a,s=this._type,A=this._value;c(this._left)&&(Array.isArray(this._left)?o=O2(this._left,e,t,this):o=this._left.getShaderExpression(e,t,this)),c(this._right)&&(r=this._right.getShaderExpression(e,t,this)),c(this._test)&&(a=this._test.getShaderExpression(e,t,this)),Array.isArray(this._value)&&(A=O2(this._value,e,t,this));let l,f,h;switch(s){case We.VARIABLE:return Gd(this)?void 0:L2(A,e);case We.UNARY:if(A==="Boolean")return`bool(${o})`;if(A==="Number")return`float(${o})`;if(A==="round")return`floor(${o} + 0.5)`;if(c(eb[A]))return`${A}(${o})`;if(A==="isNaN")return`(${o} != ${o})`;if(A==="isFinite")return`(abs(${o}) < czm_infinity)`;if(A==="String"||A==="isExactClass"||A==="isClass"||A==="getExactClassName")throw new oe(`Error generating style shader: "${A}" is not supported.`);return A+o;case We.BINARY:return A==="%"?`mod(${o}, ${r})`:A==="==="?`(${o} == ${r})`:A==="!=="?`(${o} != ${r})`:A==="atan2"?`atan(${o}, ${r})`:c(tb[A])?`${A}(${o}, ${r})`:`(${o} ${A} ${r})`;case We.TERNARY:if(c(PS[A]))return`${A}(${o}, ${r}, ${a})`;break;case We.CONDITIONAL:return`(${a} ? ${o} : ${r})`;case We.MEMBER:return Gd(this._left)?L2(r,e):r==="r"||r==="x"||r==="0.0"?`${o}[0]`:r==="g"||r==="y"||r==="1.0"?`${o}[1]`:r==="b"||r==="z"||r==="2.0"?`${o}[2]`:r==="a"||r==="w"||r==="3.0"?`${o}[3]`:`${o}[int(${r})]`;case We.FUNCTION_CALL:throw new oe(`Error generating style shader: "${A}" is not supported.`);case We.ARRAY:if(A.length===4)return`vec4(${A[0]}, ${A[1]}, ${A[2]}, ${A[3]})`;if(A.length===3)return`vec3(${A[0]}, ${A[1]}, ${A[2]})`;if(A.length===2)return`vec2(${A[0]}, ${A[1]})`;throw new oe("Error generating style shader: Invalid array length. Array length should be 2, 3, or 4.");case We.REGEX:throw new oe("Error generating style shader: Regular expressions are not supported.");case We.VARIABLE_IN_STRING:throw new oe("Error generating style shader: Converting a variable to a string is not supported.");case We.LITERAL_NULL:return Tc.NULL_SENTINEL;case We.LITERAL_BOOLEAN:return A?"true":"false";case We.LITERAL_NUMBER:return eu(A);case We.LITERAL_STRING:if(c(n)&&n._type===We.MEMBER&&(A==="r"||A==="g"||A==="b"||A==="a"||A==="x"||A==="y"||A==="z"||A==="w"||Gd(n._left)))return A;if(i=F.fromCssColorString(A,$y),c(i))return zae(i);throw new oe("Error generating style shader: String literals are not supported.");case We.LITERAL_COLOR:if(l=o,A==="color"){if(c(l)){if(l.length>1){let m=l[0],p=l[1];return p!=="1.0"&&(t.translucent=!0),`vec4(${m}, ${p})`}}else return"vec4(1.0)";return`vec4(${l[0]}, 1.0)`}else{if(A==="rgb")return i=M2(this),c(i)?Zy(i):`vec4(${l[0]} / 255.0, ${l[1]} / 255.0, ${l[2]} / 255.0, 1.0)`;if(A==="rgba")return l[3]!=="1.0"&&(t.translucent=!0),i=M2(this),c(i)?Zy(i):`vec4(${l[0]} / 255.0, ${l[1]} / 255.0, ${l[2]} / 255.0, ${l[3]})`;if(A==="hsl")return i=P2(this),c(i)?Zy(i):`vec4(czm_HSLToRGB(vec3(${l[0]}, ${l[1]}, ${l[2]})), 1.0)`;if(A==="hsla")return i=P2(this),c(i)?(i.alpha!==1&&(t.translucent=!0),Zy(i)):(l[3]!=="1.0"&&(t.translucent=!0),`vec4(czm_HSLToRGB(vec3(${l[0]}, ${l[1]}, ${l[2]})), ${l[3]})`)}break;case We.LITERAL_VECTOR:f=o.length,h=`${A}(`;for(let m=0;m<f;++m)h+=o[m],m<f-1&&(h+=", ");return h+=")",h;case We.LITERAL_REGEX:throw new oe("Error generating style shader: Regular expressions are not supported.");case We.LITERAL_UNDEFINED:return Tc.NULL_SENTINEL;case We.BUILTIN_VARIABLE:if(A==="tiles3d_tileset_time")return A}};Je.prototype.getVariables=function(e,t){let n,i,o,r=this._type,a=this._value;if(c(this._left))if(Array.isArray(this._left))for(n=this._left,i=n.length,o=0;o<i;++o)n[o].getVariables(e,this);else this._left.getVariables(e,this);if(c(this._right)&&this._right.getVariables(e,this),c(this._test)&&this._test.getVariables(e,this),Array.isArray(this._value))for(n=this._value,i=n.length,o=0;o<i;++o)n[o].getVariables(e,this);let s;switch(r){case We.VARIABLE:Gd(this)||e.push(a);break;case We.VARIABLE_IN_STRING:for(s=GC.exec(a);s!==null;)e.push(s[1]),s=GC.exec(a);break;case We.LITERAL_STRING:c(t)&&t._type===We.MEMBER&&Gd(t._left)&&e.push(a);break}};var N2=Tc;function Tl(e){e=e??k.EMPTY_OBJECT,this._batchTable=e.batchTable,this._batchIds=e.batchIds,this._positions=e.positions,this._vertexBatchIds=e.vertexBatchIds,this._indices=e.indices,this._indexCounts=e.indexCounts,this._indexOffsets=e.indexOffsets,this._batchedIndices=e.batchedIndices,this._boundingVolume=e.boundingVolume,this._boundingVolumes=e.boundingVolumes,this._center=e.center??u.ZERO,this._va=void 0,this._sp=void 0,this._spStencil=void 0,this._spPick=void 0,this._uniformMap=void 0,this._vaSwap=void 0,this._rsStencilDepthPass=void 0,this._rsStencilDepthPass3DTiles=void 0,this._rsColorPass=void 0,this._rsPickPass=void 0,this._rsWireframe=void 0,this._commands=[],this._commandsIgnoreShow=[],this._pickCommands=[],this._constantColor=F.clone(F.WHITE),this._highlightColor=this._constantColor,this._batchDirty=!0,this._pickCommandsDirty=!0,this._framesSinceLastRebatch=0,this._updatingAllCommands=!1,this._trianglesLength=this._indices.length/3,this._geometryByteLength=this._indices.byteLength+this._positions.byteLength+this._vertexBatchIds.byteLength,this.debugWireframe=!1,this._debugWireframe=this.debugWireframe,this._wireframeDirty=!1,this.forceRebatch=!1,this.classificationType=e.classificationType??on.BOTH,this._vertexShaderSource=e._vertexShaderSource,this._fragmentShaderSource=e._fragmentShaderSource,this._attributeLocations=e._attributeLocations,this._uniformMap=e._uniformMap,this._pickId=e._pickId,this._modelMatrix=e._modelMatrix,this._boundingSphere=e._boundingSphere,this._batchIdLookUp={};let t=this._batchIds.length;for(let n=0;n<t;++n){let i=this._batchIds[n];this._batchIdLookUp[i]=n}}Object.defineProperties(Tl.prototype,{trianglesLength:{get:function(){return this._trianglesLength}},geometryByteLength:{get:function(){return this._geometryByteLength}}});var Hae={position:0,a_batchId:1};function Vae(e,t){if(c(e._va))return;let n=dt.createVertexBuffer({context:t,typedArray:e._positions,usage:Me.STATIC_DRAW}),i=dt.createVertexBuffer({context:t,typedArray:e._vertexBatchIds,usage:Me.STATIC_DRAW}),o=dt.createIndexBuffer({context:t,typedArray:e._indices,usage:Me.DYNAMIC_DRAW,indexDatatype:e._indices.BYTES_PER_ELEMENT===2?Be.UNSIGNED_SHORT:Be.UNSIGNED_INT}),r=[{index:0,vertexBuffer:n,componentDatatype:N.fromTypedArray(e._positions),componentsPerAttribute:3},{index:1,vertexBuffer:i,componentDatatype:N.fromTypedArray(e._vertexBatchIds),componentsPerAttribute:1}];e._va=new go({context:t,attributes:r,indexBuffer:o}),t.webgl2&&(e._vaSwap=new go({context:t,attributes:r,indexBuffer:dt.createIndexBuffer({context:t,sizeInBytes:o.sizeInBytes,usage:Me.DYNAMIC_DRAW,indexDatatype:o.indexDatatype})})),e._batchedPositions=void 0,e._transferrableBatchIds=void 0,e._vertexBatchIds=void 0}function jae(e,t){if(c(e._sp))return;let n=e._batchTable,i=e._attributeLocations??Hae,o=e._pickId,r=e._vertexShaderSource,a=e._fragmentShaderSource;if(c(r)){e._sp=Bn.fromCache({context:t,vertexShaderSource:r,fragmentShaderSource:a,attributeLocations:i}),e._spStencil=e._sp,a=It.replaceMain(a,"czm_non_pick_main"),a=`${a}void main() 
{ 
    czm_non_pick_main(); 
    out_FragColor = ${o}; 
} 
`,e._spPick=Bn.fromCache({context:t,vertexShaderSource:r,fragmentShaderSource:a,attributeLocations:i});return}let s=n.getVertexShaderCallback(!1,"a_batchId",void 0)(wS),A=n.getFragmentShaderCallback(!1,void 0,!0)(rC);o=n.getPickId();let l=new It({sources:[s]}),f=new It({defines:["VECTOR_TILE"],sources:[A]});e._sp=Bn.fromCache({context:t,vertexShaderSource:l,fragmentShaderSource:f,attributeLocations:i}),l=new It({sources:[wS]}),f=new It({defines:["VECTOR_TILE"],sources:[rC]}),e._spStencil=Bn.fromCache({context:t,vertexShaderSource:l,fragmentShaderSource:f,attributeLocations:i}),A=It.replaceMain(A,"czm_non_pick_main"),A=`${A}
void main() 
{ 
    czm_non_pick_main(); 
    out_FragColor = ${o}; 
} 
`;let h=new It({sources:[s]}),m=new It({defines:["VECTOR_TILE"],sources:[A]});e._spPick=Bn.fromCache({context:t,vertexShaderSource:h,fragmentShaderSource:m,attributeLocations:i})}function F2(e){let t=e?Nn.EQUAL:Nn.ALWAYS;return{colorMask:{red:!1,green:!1,blue:!1,alpha:!1},stencilTest:{enabled:!0,frontFunction:t,frontOperation:{fail:nt.KEEP,zFail:nt.DECREMENT_WRAP,zPass:nt.KEEP},backFunction:t,backOperation:{fail:nt.KEEP,zFail:nt.INCREMENT_WRAP,zPass:nt.KEEP},reference:Qt.CESIUM_3D_TILE_MASK,mask:Qt.CESIUM_3D_TILE_MASK},stencilMask:Qt.CLASSIFICATION_MASK,depthTest:{enabled:!0,func:Ms.LESS_OR_EQUAL},depthMask:!1}}var Yae={stencilTest:{enabled:!0,frontFunction:Nn.NOT_EQUAL,frontOperation:{fail:nt.ZERO,zFail:nt.ZERO,zPass:nt.ZERO},backFunction:Nn.NOT_EQUAL,backOperation:{fail:nt.ZERO,zFail:nt.ZERO,zPass:nt.ZERO},reference:0,mask:Qt.CLASSIFICATION_MASK},stencilMask:Qt.CLASSIFICATION_MASK,depthTest:{enabled:!1},depthMask:!1,blending:qn.PRE_MULTIPLIED_ALPHA_BLEND},qae={stencilTest:{enabled:!0,frontFunction:Nn.NOT_EQUAL,frontOperation:{fail:nt.ZERO,zFail:nt.ZERO,zPass:nt.ZERO},backFunction:Nn.NOT_EQUAL,backOperation:{fail:nt.ZERO,zFail:nt.ZERO,zPass:nt.ZERO},reference:0,mask:Qt.CLASSIFICATION_MASK},stencilMask:Qt.CLASSIFICATION_MASK,depthTest:{enabled:!1},depthMask:!1};function Wae(e){c(e._rsStencilDepthPass)||(e._rsStencilDepthPass=ut.fromCache(F2(!1)),e._rsStencilDepthPass3DTiles=ut.fromCache(F2(!0)),e._rsColorPass=ut.fromCache(Yae),e._rsPickPass=ut.fromCache(qae))}var zd=new O,k2=new u;function Jae(e,t){if(c(e._uniformMap))return;let n={u_modifiedModelViewProjection:function(){let i=t.uniformState.view,o=t.uniformState.projection;return O.clone(i,zd),O.multiplyByPoint(zd,e._center,k2),O.setTranslation(zd,k2,zd),O.multiply(o,zd,zd),zd},u_highlightColor:function(){return e._highlightColor}};e._uniformMap=e._batchTable.getUniformMapCallback()(n)}function MS(e,t,n,i,o,r,a){let s=e.constructor.BYTES_PER_ELEMENT,A=r.length;for(let l=0;l<A;++l){let f=r[l],h=a[f],m=i[h],p=o[h],g=new e.constructor(e.buffer,s*m,p);t.set(g,n),i[h]=n,n+=p}return n}function Kae(e,t){let n=e._indices,i=e._indexOffsets,o=e._indexCounts,r=e._batchIdLookUp,a=new n.constructor(n.length),s=t.pop(),A=[s],l=MS(n,a,0,i,o,s.batchIds,r);for(s.offset=0,s.count=l;t.length>0;){let f=t.pop();if(F.equals(f.color,s.color))l=MS(n,a,l,i,o,f.batchIds,r),s.batchIds=s.batchIds.concat(f.batchIds),s.count=l-s.offset;else{let h=l;l=MS(n,a,l,i,o,f.batchIds,r),f.offset=h,f.count=l-h,A.push(f),s=f}}e._va.indexBuffer.copyFromArrayView(a),e._indices=a,e._batchedIndices=A}function OS(e,t,n,i,o,r,a){let s=e.bytesPerIndex,A=r.length;for(let l=0;l<A;++l){let f=r[l],h=a[f],m=i[h],p=o[h];t.copyFromBuffer(e,m*s,n*s,p*s),i[h]=n,n+=p}return n}function Xae(e,t){let n=e._indexOffsets,i=e._indexCounts,o=e._batchIdLookUp,r=t.pop(),a=[r],s=e._va.indexBuffer,A=e._vaSwap.indexBuffer,l=OS(s,A,0,n,i,r.batchIds,o);for(r.offset=0,r.count=l;t.length>0;){let h=t.pop();if(F.equals(h.color,r.color))l=OS(s,A,l,n,i,h.batchIds,o),r.batchIds=r.batchIds.concat(h.batchIds),r.count=l-r.offset;else{let m=l;l=OS(s,A,l,n,i,h.batchIds,o),h.offset=m,h.count=l-m,a.push(h),r=h}}let f=e._va;e._va=e._vaSwap,e._vaSwap=f,e._batchedIndices=a}function Zae(e,t){return t.color.toRgba()-e.color.toRgba()}function $ae(e,t){if(!e._batchDirty)return!1;let n=e._batchedIndices,i=n.length,o=!1,r={};for(let a=0;a<i;++a){let A=n[a].color.toRgba();if(c(r[A])){o=!0;break}else r[A]=!0}if(!o)return e._batchDirty=!1,!1;if(o&&!e.forceRebatch&&e._framesSinceLastRebatch<120){++e._framesSinceLastRebatch;return}return n.sort(Zae),t.webgl2?Xae(e,n):Kae(e,n),e._framesSinceLastRebatch=0,e._batchDirty=!1,e._pickCommandsDirty=!0,e._wireframeDirty=!0,!0}function ese(e,t){let n=$ae(e,t),i=e._commands,o=e._batchedIndices,r=o.length,a=r*2;if(c(i)&&!n&&i.length===a)return;i.length=a;let s=e._va,A=e._sp,l=e._modelMatrix??O.IDENTITY,f=e._uniformMap,h=e._boundingVolume;for(let m=0;m<r;++m){let p=o[m].offset,g=o[m].count,C=i[m*2];c(C)||(C=i[m*2]=new mt({owner:e})),C.vertexArray=s,C.modelMatrix=l,C.offset=p,C.count=g,C.renderState=e._rsStencilDepthPass,C.shaderProgram=A,C.uniformMap=f,C.boundingVolume=h,C.cull=!1,C.pass=Ye.TERRAIN_CLASSIFICATION;let _=mt.shallowClone(C,C.derivedCommands.tileset);_.renderState=e._rsStencilDepthPass3DTiles,_.pass=Ye.CESIUM_3D_TILE_CLASSIFICATION,C.derivedCommands.tileset=_;let E=i[m*2+1];c(E)||(E=i[m*2+1]=new mt({owner:e})),E.vertexArray=s,E.modelMatrix=l,E.offset=p,E.count=g,E.renderState=e._rsColorPass,E.shaderProgram=A,E.uniformMap=f,E.boundingVolume=h,E.cull=!1,E.pass=Ye.TERRAIN_CLASSIFICATION;let I=mt.shallowClone(E,E.derivedCommands.tileset);I.pass=Ye.CESIUM_3D_TILE_CLASSIFICATION,E.derivedCommands.tileset=I}e._commandsDirty=!0}function tse(e,t){if(e.classificationType===on.TERRAIN||!t.invertClassification||c(e._commandsIgnoreShow)&&!e._commandsDirty)return;let n=e._commands,i=e._commandsIgnoreShow,o=e._spStencil,r=n.length,a=i.length=r/2,s=0;for(let A=0;A<a;++A){let l=i[A]=mt.shallowClone(n[s],i[A]);l.shaderProgram=o,l.pass=Ye.CESIUM_3D_TILE_CLASSIFICATION_IGNORE_SHOW,s+=2}e._commandsDirty=!1}function nse(e){if(!e._pickCommandsDirty)return;let t=e._indexOffsets.length,n=e._pickCommands;n.length=t*2;let i=e._va,o=e._spStencil,r=e._spPick,a=e._modelMatrix??O.IDENTITY,s=e._uniformMap;for(let A=0;A<t;++A){let l=e._indexOffsets[A],f=e._indexCounts[A],h=c(e._boundingVolumes)?e._boundingVolumes[A]:e.boundingVolume,m=n[A*2];c(m)||(m=n[A*2]=new mt({owner:e,pickOnly:!0})),m.vertexArray=i,m.modelMatrix=a,m.offset=l,m.count=f,m.renderState=e._rsStencilDepthPass,m.shaderProgram=o,m.uniformMap=s,m.boundingVolume=h,m.pass=Ye.TERRAIN_CLASSIFICATION;let p=mt.shallowClone(m,m.derivedCommands.tileset);p.renderState=e._rsStencilDepthPass3DTiles,p.pass=Ye.CESIUM_3D_TILE_CLASSIFICATION,m.derivedCommands.tileset=p;let g=n[A*2+1];c(g)||(g=n[A*2+1]=new mt({owner:e,pickOnly:!0})),g.vertexArray=i,g.modelMatrix=a,g.offset=l,g.count=f,g.renderState=e._rsPickPass,g.shaderProgram=r,g.uniformMap=s,g.boundingVolume=h,g.pass=Ye.TERRAIN_CLASSIFICATION;let C=mt.shallowClone(g,g.derivedCommands.tileset);C.pass=Ye.CESIUM_3D_TILE_CLASSIFICATION,g.derivedCommands.tileset=C}e._pickCommandsDirty=!1}Tl.prototype.createFeatures=function(e,t){let n=this._batchIds,i=n.length;for(let o=0;o<i;++o){let r=n[o];t[r]=new TA(e,r)}};Tl.prototype.applyDebugSettings=function(e,t){this._highlightColor=e?t:this._constantColor};function ise(e,t){e._updatingAllCommands=!0;let n=e._batchIds,i=n.length,o;for(o=0;o<i;++o){let a=n[o],s=t[a];s.show=!0,s.color=F.WHITE}let r=e._batchedIndices;for(i=r.length,o=0;o<i;++o)r[o].color=F.clone(F.WHITE);e._updatingAllCommands=!1,e._batchDirty=!0}var ose=new F,rse=F.WHITE,ase=!0,sse=/\$/;Tl.prototype.applyStyle=function(e,t){if(!c(e)){ise(this,t);return}let n=e.color,i=n instanceof N2&&!sse.test(n.expression);this._updatingAllCommands=i;let o=this._batchIds,r=o.length,a;for(a=0;a<r;++a){let s=o[a],A=t[s];A.color=c(e.color)?e.color.evaluateColor(A,ose):rse,A.show=c(e.show)?e.show.evaluate(A):ase}if(i){let s=this._batchedIndices;for(r=s.length,a=0;a<r;++a)s[a].color=F.clone(F.WHITE);this._updatingAllCommands=!1,this._batchDirty=!0}};Tl.prototype.updateCommands=function(e,t){if(this._updatingAllCommands)return;let n=this._batchIdLookUp,i=n[e];if(!c(i))return;let o=this._indexOffsets,r=this._indexCounts,a=o[i],s=r[i],A=this._batchedIndices,l=A.length,f;for(f=0;f<l;++f){let C=A[f].offset,_=A[f].count;if(a>=C&&a<C+_)break}A.push(new Ud({color:F.clone(t),offset:a,count:s,batchIds:[e]}));let h=[],m=[],p=A[f].batchIds,g=p.length;for(let C=0;C<g;++C){let _=p[C];if(_===e)continue;let E=n[_];o[E]<a?h.push(_):m.push(_)}m.length!==0&&A.push(new Ud({color:F.clone(A[f].color),offset:a+s,count:A[f].offset+A[f].count-(a+s),batchIds:m})),h.length!==0?(A[f].count=a-A[f].offset,A[f].batchIds=h):A.splice(f,1),this._batchDirty=!0};function U2(e,t,n,i){let o=e.classificationType,r=o!==on.CESIUM_3D_TILE,a=o!==on.TERRAIN,s=t.commandList,A=n.length,l,f;for(f=0;f<A;++f)r&&(l=n[f],l.pass=Ye.TERRAIN_CLASSIFICATION,s.push(l)),a&&(l=n[f].derivedCommands.tileset,l.pass=Ye.CESIUM_3D_TILE_CLASSIFICATION,s.push(l));if(!(!t.invertClassification||!c(i)))for(A=i.length,f=0;f<A;++f)s.push(i[f])}function cse(e,t){let n=e.commandList,i=t.length;for(let o=0;o<i;o+=2){let r=t[o+1];r.pass=Ye.OPAQUE,n.push(r)}}function Ase(e){let t=e.debugWireframe===e._debugWireframe;if(t=t&&!(e.debugWireframe&&e._wireframeDirty),t)return;c(e._rsWireframe)||(e._rsWireframe=ut.fromCache({}));let n,i;e.debugWireframe?(n=e._rsWireframe,i=Ce.LINES):(n=e._rsColorPass,i=Ce.TRIANGLES);let o=e._commands,r=o.length;for(let a=0;a<r;a+=2){let s=o[a+1];s.renderState=n,s.primitiveType=i}e._debugWireframe=e.debugWireframe,e._wireframeDirty=!1}Tl.prototype.update=function(e){let t=e.context;Vae(this,t),jae(this,t),Wae(this),Jae(this,t);let n=e.passes;n.render&&(ese(this,t),tse(this,e),Ase(this),this._debugWireframe?cse(e,this._commands):U2(this,e,this._commands,this._commandsIgnoreShow)),n.pick&&(nse(this),U2(this,e,this._pickCommands))};Tl.prototype.isDestroyed=function(){return!1};Tl.prototype.destroy=function(){return this._va=this._va&&this._va.destroy(),this._sp=this._sp&&this._sp.destroy(),this._spPick=this._spPick&&this._spPick.destroy(),this._vaSwap=this._vaSwap&&this._vaSwap.destroy(),pe(this)};var ib=Tl;function es(e){this._boxes=e.boxes,this._boxBatchIds=e.boxBatchIds,this._cylinders=e.cylinders,this._cylinderBatchIds=e.cylinderBatchIds,this._ellipsoids=e.ellipsoids,this._ellipsoidBatchIds=e.ellipsoidBatchIds,this._spheres=e.spheres,this._sphereBatchIds=e.sphereBatchIds,this._modelMatrix=e.modelMatrix,this._batchTable=e.batchTable,this._boundingVolume=e.boundingVolume,this._center=e.center,c(this._center)||(c(this._boundingVolume)?this._center=u.clone(this._boundingVolume.center):this._center=u.clone(u.ZERO)),this._boundingVolumes=void 0,this._batchedIndices=void 0,this._indices=void 0,this._indexOffsets=void 0,this._indexCounts=void 0,this._positions=void 0,this._vertexBatchIds=void 0,this._batchIds=void 0,this._batchTableColors=void 0,this._packedBuffer=void 0,this._ready=!1,this._promise=void 0,this._error=void 0,this._verticesPromise=void 0,this._primitive=void 0,this.debugWireframe=!1,this.forceRebatch=!1,this.classificationType=on.BOTH}Object.defineProperties(es.prototype,{trianglesLength:{get:function(){return c(this._primitive)?this._primitive.trianglesLength:0}},geometryByteLength:{get:function(){return c(this._primitive)?this._primitive.geometryByteLength:0}},ready:{get:function(){return this._ready}}});es.packedBoxLength=O.packedLength+u.packedLength;es.packedCylinderLength=O.packedLength+2;es.packedEllipsoidLength=O.packedLength+u.packedLength;es.packedSphereLength=u.packedLength+1;function lse(e){let t=new Float64Array(O.packedLength+u.packedLength),n=0;return u.pack(e._center,t,n),n+=u.packedLength,O.pack(e._modelMatrix,t,n),t}function fse(e,t){let n=0,i=t[n++],o=t[n++],r=e._boundingVolumes=new Array(o);for(let A=0;A<o;++A)r[A]=ee.unpack(t,n),n+=ee.packedLength;let a=t[n++],s=e._batchedIndices=new Array(a);for(let A=0;A<a;++A){let l=F.unpack(t,n);n+=F.packedLength;let f=t[n++],h=t[n++],m=t[n++],p=new Array(m);for(let g=0;g<m;++g)p[g]=t[n++];s[A]=new Ud({color:l,offset:f,count:h,batchIds:p})}return i}var use=new mo("createVectorTileGeometries",5),dse=new F;function hse(e){if(!c(e._primitive)&&!c(e._verticesPromise)){let t=e._boxes,n=e._boxBatchIds,i=e._cylinders,o=e._cylinderBatchIds,r=e._ellipsoids,a=e._ellipsoidBatchIds,s=e._spheres,A=e._sphereBatchIds,l=e._batchTableColors,f=e._packedBuffer;if(!c(l)){let g=0;c(e._boxes)&&(t=e._boxes=t.slice(),n=e._boxBatchIds=n.slice(),g+=n.length),c(e._cylinders)&&(i=e._cylinders=i.slice(),o=e._cylinderBatchIds=o.slice(),g+=o.length),c(e._ellipsoids)&&(r=e._ellipsoids=r.slice(),a=e._ellipsoidBatchIds=a.slice(),g+=a.length),c(e._spheres)&&(s=e._sphere=s.slice(),A=e._sphereBatchIds=A.slice(),g+=A.length),l=e._batchTableColors=new Uint32Array(g);let C=e._batchTable;for(let _=0;_<g;++_){let E=C.getColor(_,dse);l[_]=E.toRgba()}f=e._packedBuffer=lse(e)}let h=[];c(t)&&h.push(t.buffer,n.buffer),c(i)&&h.push(i.buffer,o.buffer),c(r)&&h.push(r.buffer,a.buffer),c(s)&&h.push(s.buffer,A.buffer),h.push(l.buffer,f.buffer);let m={boxes:c(t)?t.buffer:void 0,boxBatchIds:c(t)?n.buffer:void 0,cylinders:c(i)?i.buffer:void 0,cylinderBatchIds:c(i)?o.buffer:void 0,ellipsoids:c(r)?r.buffer:void 0,ellipsoidBatchIds:c(r)?a.buffer:void 0,spheres:c(s)?s.buffer:void 0,sphereBatchIds:c(s)?A.buffer:void 0,batchTableColors:l.buffer,packedBuffer:f.buffer},p=e._verticesPromise=use.scheduleTask(m,h);return c(p)?p.then(function(g){if(e.isDestroyed())return;let C=new Float64Array(g.packedBuffer);fse(e,C)===2?e._indices=new Uint16Array(g.indices):e._indices=new Uint32Array(g.indices),e._indexOffsets=new Uint32Array(g.indexOffsets),e._indexCounts=new Uint32Array(g.indexCounts),e._positions=new Float32Array(g.positions),e._vertexBatchIds=new Uint16Array(g.vertexBatchIds),e._batchIds=new Uint16Array(g.batchIds),mse(e),e._ready=!0}).catch(g=>{e.isDestroyed()||(e._error=g)}):void 0}}function mse(e){c(e._primitive)||(e._primitive=new ib({batchTable:e._batchTable,positions:e._positions,batchIds:e._batchIds,vertexBatchIds:e._vertexBatchIds,indices:e._indices,indexOffsets:e._indexOffsets,indexCounts:e._indexCounts,batchedIndices:e._batchedIndices,boundingVolume:e._boundingVolume,boundingVolumes:e._boundingVolumes,center:e._center,pickObject:e._pickObject??e}),e._boxes=void 0,e._boxBatchIds=void 0,e._cylinders=void 0,e._cylinderBatchIds=void 0,e._ellipsoids=void 0,e._ellipsoidBatchIds=void 0,e._spheres=void 0,e._sphereBatchIds=void 0,e._center=void 0,e._modelMatrix=void 0,e._batchTable=void 0,e._boundingVolume=void 0,e._boundingVolumes=void 0,e._batchedIndices=void 0,e._indices=void 0,e._indexOffsets=void 0,e._indexCounts=void 0,e._positions=void 0,e._vertexBatchIds=void 0,e._batchIds=void 0,e._batchTableColors=void 0,e._packedBuffer=void 0,e._verticesPromise=void 0)}es.prototype.createFeatures=function(e,t){this._primitive.createFeatures(e,t)};es.prototype.applyDebugSettings=function(e,t){this._primitive.applyDebugSettings(e,t)};es.prototype.applyStyle=function(e,t){this._primitive.applyStyle(e,t)};es.prototype.updateCommands=function(e,t){this._primitive.updateCommands(e,t)};es.prototype.update=function(e){if(!this._ready){if(c(this._promise)||(this._promise=hse(this)),c(this._error)){let t=this._error;throw this._error=void 0,t}return}this._primitive.debugWireframe=this.debugWireframe,this._primitive.forceRebatch=this.forceRebatch,this._primitive.classificationType=this.classificationType,this._primitive.update(e)};es.prototype.isDestroyed=function(){return!1};es.prototype.destroy=function(){return this._primitive=this._primitive&&this._primitive.destroy(),pe(this)};var xm=es;function SA(e,t,n,i,o){this._tileset=e,this._tile=t,this._resource=n,this._geometries=void 0,this._metadata=void 0,this._batchTable=void 0,this._features=void 0,this.featurePropertiesDirty=!1,this._group=void 0,this._ready=!1,Cse(this,i,o)}Object.defineProperties(SA.prototype,{featuresLength:{get:function(){return c(this._batchTable)?this._batchTable.featuresLength:0}},pointsLength:{get:function(){return 0}},trianglesLength:{get:function(){return c(this._geometries)?this._geometries.trianglesLength:0}},geometryByteLength:{get:function(){return c(this._geometries)?this._geometries.geometryByteLength:0}},texturesByteLength:{get:function(){return 0}},batchTableByteLength:{get:function(){return c(this._batchTable)?this._batchTable.batchTableByteLength:0}},innerContents:{get:function(){}},ready:{get:function(){return this._ready}},tileset:{get:function(){return this._tileset}},tile:{get:function(){return this._tile}},url:{get:function(){return this._resource.getUrlComponent(!0)}},metadata:{get:function(){return this._metadata},set:function(e){this._metadata=e}},batchTable:{get:function(){return this._batchTable}},group:{get:function(){return this._group},set:function(e){this._group=e}}});function pse(e){return function(t,n){c(e._geometries)&&e._geometries.updateCommands(t,n)}}function gse(e,t){let n,i,o,r,a,s=e.BOXES_LENGTH??0,A=e.CYLINDERS_LENGTH??0,l=e.ELLIPSOIDS_LENGTH??0,f=e.SPHERES_LENGTH??0;if(s>0&&c(e.BOX_BATCH_IDS)){let g=t.byteOffset+e.BOX_BATCH_IDS.byteOffset;n=new Uint16Array(t.buffer,g,s)}if(A>0&&c(e.CYLINDER_BATCH_IDS)){let g=t.byteOffset+e.CYLINDER_BATCH_IDS.byteOffset;i=new Uint16Array(t.buffer,g,A)}if(l>0&&c(e.ELLIPSOID_BATCH_IDS)){let g=t.byteOffset+e.ELLIPSOID_BATCH_IDS.byteOffset;o=new Uint16Array(t.buffer,g,l)}if(f>0&&c(e.SPHERE_BATCH_IDS)){let g=t.byteOffset+e.SPHERE_BATCH_IDS.byteOffset;r=new Uint16Array(t.buffer,g,f)}let h=c(n)||c(i)||c(o)||c(r),m=s>0&&!c(n)||A>0&&!c(i)||l>0&&!c(o)||f>0&&!c(r);if(h&&m)throw new oe("If one group of batch ids is defined, then all batch ids must be defined");if(!c(n)&&!c(i)&&!c(o)&&!c(r)){let g=0;if(!c(n)&&s>0)for(n=new Uint16Array(s),a=0;a<s;++a)n[a]=g++;if(!c(i)&&A>0)for(i=new Uint16Array(A),a=0;a<A;++a)i[a]=g++;if(!c(o)&&l>0)for(o=new Uint16Array(l),a=0;a<l;++a)o[a]=g++;if(!c(r)&&f>0)for(r=new Uint16Array(f),a=0;a<f;++a)r[a]=g++}return{boxes:n,cylinders:i,ellipsoids:o,spheres:r}}var Hd=Uint32Array.BYTES_PER_ELEMENT;function Cse(e,t,n){n=n??0;let i=new Uint8Array(t),o=new DataView(t);n+=Hd;let r=o.getUint32(n,!0);if(r!==1)throw new oe(`Only Geometry tile version 1 is supported.  Version ${r} is not.`);n+=Hd;let a=o.getUint32(n,!0);if(n+=Hd,a===0){e._ready=!0;return}let s=o.getUint32(n,!0);if(n+=Hd,s===0)throw new oe("Feature table must have a byte length greater than zero");let A=o.getUint32(n,!0);n+=Hd;let l=o.getUint32(n,!0);n+=Hd;let f=o.getUint32(n,!0);n+=Hd;let h=_o(i,n,s);n+=s;let m=new Uint8Array(t,n,A);n+=A;let p,g;l>0&&(p=_o(i,n,l),n+=l,f>0&&(g=new Uint8Array(t,n,f),g=new Uint8Array(g)));let C=h.BOXES_LENGTH??0,_=h.CYLINDERS_LENGTH??0,E=h.ELLIPSOIDS_LENGTH??0,I=h.SPHERES_LENGTH??0,y=C+_+E+I,b=new Ky(e,y,p,g,pse(e));if(e._batchTable=b,y===0)return;let x=e.tile.computedTransform,S;c(h.RTC_CENTER)&&(S=u.unpack(h.RTC_CENTER),O.multiplyByPoint(x,S,S));let P=gse(h,m);if(C>0||_>0||E>0||I>0){let D,Q,v,d;if(C>0){let B=m.byteOffset+h.BOXES.byteOffset;D=new Float32Array(m.buffer,B,xm.packedBoxLength*C)}if(_>0){let B=m.byteOffset+h.CYLINDERS.byteOffset;Q=new Float32Array(m.buffer,B,xm.packedCylinderLength*_)}if(E>0){let B=m.byteOffset+h.ELLIPSOIDS.byteOffset;v=new Float32Array(m.buffer,B,xm.packedEllipsoidLength*E)}if(I>0){let B=m.byteOffset+h.SPHERES.byteOffset;d=new Float32Array(m.buffer,B,xm.packedSphereLength*I)}return e._geometries=new xm({boxes:D,boxBatchIds:P.boxes,cylinders:Q,cylinderBatchIds:P.cylinders,ellipsoids:v,ellipsoidBatchIds:P.ellipsoids,spheres:d,sphereBatchIds:P.spheres,center:S,modelMatrix:x,batchTable:b,boundingVolume:e.tile.boundingVolume.boundingVolume}),e}return Promise.resolve(e)}function G2(e){let t=e.featuresLength;if(!c(e._features)&&t>0){let n=new Array(t);c(e._geometries)&&e._geometries.createFeatures(e,n),e._features=n}}SA.prototype.hasProperty=function(e,t){return this._batchTable.hasProperty(e,t)};SA.prototype.getFeature=function(e){return G2(this),this._features[e]};SA.prototype.applyDebugSettings=function(e,t){c(this._geometries)&&this._geometries.applyDebugSettings(e,t)};SA.prototype.applyStyle=function(e){G2(this),c(this._geometries)&&this._geometries.applyStyle(e,this._features)};SA.prototype.update=function(e,t){c(this._geometries)&&(this._geometries.classificationType=this._tileset.classificationType,this._geometries.debugWireframe=this._tileset.debugWireframe,this._geometries.update(t)),c(this._batchTable)&&this._geometries.ready&&(this._batchTable.update(e,t),this._ready=!0)};SA.prototype.pick=function(e,t,n){};SA.prototype.isDestroyed=function(){return!1};SA.prototype.destroy=function(){return this._geometries=this._geometries&&this._geometries.destroy(),this._batchTable=this._batchTable&&this._batchTable.destroy(),pe(this)};var z2=SA;var LS={};LS.encode2D=function(e,t,n){let i=Math.pow(2,e),o={x:t,y:n},r,a,s,A=BigInt(0);for(s=i/2;s>0;s/=2)r=(o.x&s)>0?1:0,a=(o.y&s)>0?1:0,A+=BigInt((3*r^a)*s*s),H2(i,o,r,a);return A};LS.decode2D=function(e,t){let n=Math.pow(2,e),i={x:0,y:0},o,r,a,s;for(a=1,s=t;a<n;a*=2)o=1&Number(s/BigInt(2)),r=1&Number(s^BigInt(o)),H2(a,i,o,r),i.x+=a*o,i.y+=a*r,s/=BigInt(4);return[i.x,i.y]};function H2(e,t,n,i){if(i!==0)return;n===1&&(t.x=e-1-t.x,t.y=e-1-t.y);let o=t.x;t.x=t.y,t.y=o}var NS=LS;var Vd=30,_se=1<<Vd,Ese=1<<Vd+1>>>0,FS=2*Vd+1,tu=4,Y2=[],q2=[],Ise=[[0,1,3,2],[0,2,3,1],[3,2,0,1],[3,1,0,2]],nu=1,Tm=2,ob=[nu,0,0,nu|Tm];function ao(e){if(!$t.supportsBigInt())throw new oe("S2 required BigInt support");this._cellId=e,this._level=ao.getLevel(e)}ao.fromToken=function(e){return new ao(ao.getIdFromToken(e))};ao.isValidId=function(e){return!(e<=0||e>>BigInt(FS)>5||!(e&~e+BigInt(1)&BigInt("0x1555555555555555")))};ao.isValidToken=function(e){return/^[0-9a-fA-F]{1,16}$/.test(e)?ao.isValidId(ao.getIdFromToken(e)):!1};ao.getIdFromToken=function(e){return BigInt("0x"+e+"0".repeat(16-e.length))};ao.getTokenFromId=function(e){let t=Math.floor(Rse(e)/4),n=e.toString(16).replace(/0*$/,"");return Array(17-t-n.length).join("0")+n};ao.getLevel=function(e){let t=0;for(;e!==BigInt(0)&&!(e&BigInt(1));)t++,e=e>>BigInt(1);return Vd-(t>>1)};ao.prototype.getChild=function(e){let t=K2(this._cellId)>>BigInt(2),n=this._cellId+BigInt(2*e+1-4)*t;return new ao(n)};ao.prototype.getParent=function(){let e=K2(this._cellId)<<BigInt(2);return new ao(this._cellId&~e+BigInt(1)|e)};ao.prototype.getParentAtLevel=function(e){let t=Dse(e);return new ao(this._cellId&-t|t)};ao.prototype.getCenter=function(e){e=e??Z.WGS84;let t=yse(this._cellId,this._level);t=u.normalize(t,t);let n=new ae.fromCartesian(t,Z.UNIT_SPHERE);return ae.toCartesian(n,e,new u)};ao.prototype.getVertex=function(e,t){t=t??Z.WGS84;let n=bse(this._cellId,this._level,e);n=u.normalize(n,n);let i=new ae.fromCartesian(n,Z.UNIT_SPHERE);return ae.toCartesian(i,t,new u)};ao.fromFacePositionLevel=function(e,t,n){let i=(e<4?"0":"")+(e<2?"0":"")+e.toString(2),o=t.toString(2),r=Array(2*n-o.length+1).join("0"),a=Array(FS-2*n).join("0"),s=BigInt(`0b${i}${r}${o}1${a}`);return new ao(s)};function yse(e,t){let n=Bse(e,t);return xse(n[0],n[1],n[2])}function bse(e,t,n){let i=W2(e,t),o=Tse([i[1],i[2]],t),r=n>>1&1;return J2(i[0],o[0][r^n&1],o[1][r])}function Bse(e,t){let n=W2(e),i=n[0],o=n[1],r=n[2],a=t===30,s=!a&&(BigInt(o)^e>>BigInt(2))&BigInt(1),A=a?1:s?2:0,l=(o<<1)+A,f=(r<<1)+A;return[i,l,f]}function W2(e){Y2.length===0&&wse();let t=Number(e>>BigInt(FS)),n=t&nu,i=(1<<tu)-1,o=0,r=0;for(let a=7;a>=0;a--){let A=(1<<2*(a===7?Vd-7*tu:tu))-1;n+=Number(e>>BigInt(a*2*tu+1)&BigInt(A))<<2,n=q2[n];let l=a*tu;o+=n>>tu+2<<l,r+=(n>>2&i)<<l,n&=nu|Tm}return[t,o,r]}function xse(e,t,n){let i=V2(t),o=V2(n),r=rb(i),a=rb(o);return J2(e,r,a)}function J2(e,t,n){switch(e){case 0:return new u(1,t,n);case 1:return new u(-t,1,n);case 2:return new u(-t,-n,1);case 3:return new u(-1,-n,-t);case 4:return new u(n,-1,-t);default:return new u(n,t,-1)}}function rb(e){return e>=.5?1/3*(4*e*e-1):1/3*(1-4*(1-e)*(1-e))}function V2(e){return 1/Ese*e}function Tse(e,t){let n=[[],[]],i=Sse(t);for(let o=0;o<2;++o){let r=e[o]&-i,a=r+i;n[o][0]=rb(j2(r)),n[o][1]=rb(j2(a))}return n}function Sse(e){return 1<<Vd-e>>>0}function j2(e){return 1/_se*e}function iu(e,t,n,i,o,r){if(e===tu){let a=(t<<tu)+n;Y2[(a<<2)+i]=(o<<2)+r,q2[(o<<2)+i]=(a<<2)+r}else{e++,t<<=1,n<<=1,o<<=2;let a=Ise[r];iu(e,t+(a[0]>>1),n+(a[0]&1),i,o,r^ob[0]),iu(e,t+(a[1]>>1),n+(a[1]&1),i,o+1,r^ob[1]),iu(e,t+(a[2]>>1),n+(a[2]&1),i,o+2,r^ob[2]),iu(e,t+(a[3]>>1),n+(a[3]&1),i,o+3,r^ob[3])}}function wse(){iu(0,0,0,0,0,0),iu(0,0,0,nu,0,nu),iu(0,0,0,Tm,0,Tm),iu(0,0,0,nu|Tm,0,nu|Tm)}function K2(e){return e&~e+BigInt(1)}function Dse(e){return BigInt(1)<<BigInt(2*(Vd-e))}var Qse=[64,0,1,39,2,15,40,23,3,12,16,59,41,19,24,54,4,64,13,10,17,62,60,28,42,30,20,51,25,44,55,47,5,32,65,38,14,22,11,58,18,53,63,9,61,27,29,50,43,46,31,37,21,57,52,8,26,49,45,36,56,7,48,35,6,34,33,0];function Rse(e){return Qse[(-e&e)%BigInt(67)]}var Sm=ao;function vse(e,t){return c(e)&&c(e.extensions)&&c(e.extensions[t])}var Wn=vse;function kS(e){let t=e.lengthBits,n=e.availableCount,i=e.constant,o=e.bitstream;if(c(i))n=t;else{let r=Math.ceil(t/8);if(o.length!==r)throw new oe(`Availability bitstream must be exactly ${r} bytes long to store ${t} bits. Actual bitstream was ${o.length} bytes long.`);let a=e.computeAvailableCountEnabled??!1;!c(n)&&a&&(n=Pse(o,t))}this._lengthBits=t,this._availableCount=n,this._constant=i,this._bitstream=o}function Pse(e,t){let n=0;for(let i=0;i<t;i++){let o=i>>3,r=i%8;n+=e[o]>>r&1}return n}Object.defineProperties(kS.prototype,{lengthBits:{get:function(){return this._lengthBits}},availableCount:{get:function(){return this._availableCount}}});kS.prototype.getBit=function(e){if(c(this._constant))return this._constant;let t=e>>3,n=e%8;return(this._bitstream[t]>>n&1)===1};var US=kS;function Sl(e){e=e??k.EMPTY_OBJECT;let t=e.metadataTable,n=e.class,i=e.entityId,o=e.propertyTableJson;this._class=n,this._metadataTable=t,this._entityId=i,this._extensions=o.extensions,this._extras=o.extras}Object.defineProperties(Sl.prototype,{class:{get:function(){return this._class}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}}});Sl.prototype.hasProperty=function(e){return this._metadataTable.hasProperty(e)};Sl.prototype.hasPropertyBySemantic=function(e){return this._metadataTable.hasPropertyBySemantic(e)};Sl.prototype.getPropertyIds=function(e){return this._metadataTable.getPropertyIds(e)};Sl.prototype.getProperty=function(e){return this._metadataTable.getProperty(this._entityId,e)};Sl.prototype.setProperty=function(e,t){return this._metadataTable.setProperty(this._entityId,e,t)};Sl.prototype.getPropertyBySemantic=function(e){return this._metadataTable.getPropertyBySemantic(this._entityId,e)};Sl.prototype.setPropertyBySemantic=function(e,t){return this._metadataTable.setPropertyBySemantic(this._entityId,e,t)};var GS=Sl;var ab={QUADTREE:"QUADTREE",OCTREE:"OCTREE"};ab.getBranchingFactor=function(e){switch(e){case ab.OCTREE:return 8;case ab.QUADTREE:return 4}};var Go=Object.freeze(ab);function $o(){}Object.defineProperties($o.prototype,{class:{get:function(){Ee.throwInstantiationError()}}});$o.prototype.hasProperty=function(e){Ee.throwInstantiationError()};$o.prototype.hasPropertyBySemantic=function(e){Ee.throwInstantiationError()};$o.prototype.getPropertyIds=function(e){Ee.throwInstantiationError()};$o.prototype.getProperty=function(e){Ee.throwInstantiationError()};$o.prototype.setProperty=function(e,t){Ee.throwInstantiationError()};$o.prototype.getPropertyBySemantic=function(e){Ee.throwInstantiationError()};$o.prototype.setPropertyBySemantic=function(e,t){Ee.throwInstantiationError()};$o.hasProperty=function(e,t,n){if(c(t[e]))return!0;let i=n.properties;if(!c(i))return!1;let o=i[e];return!!(c(o)&&c(o.default))};$o.hasPropertyBySemantic=function(e,t,n){let i=n.propertiesBySemantic;if(!c(i))return!1;let o=i[e];return c(o)};$o.getPropertyIds=function(e,t,n){n=c(n)?n:[],n.length=0;for(let o in e)e.hasOwnProperty(o)&&c(e[o])&&n.push(o);let i=t.properties;if(c(i))for(let o in i)i.hasOwnProperty(o)&&!c(e[o])&&c(i[o].default)&&n.push(o);return n};$o.getProperty=function(e,t,n){let i=n.properties[e],o=t[e];Array.isArray(o)&&(o=o.slice());let r=!0;if(o=i.handleNoData(o),!c(o)&&c(i.default))return o=Ne(i.default,!0),i.unpackVectorAndMatrixTypes(o,r);if(c(o))return o=i.normalize(o),o=i.applyValueTransform(o),i.unpackVectorAndMatrixTypes(o,r)};$o.setProperty=function(e,t,n,i){if(!c(n[e]))return!1;Array.isArray(t)&&(t=t.slice());let o,r=i.properties;return c(r)&&(o=r[e]),c(o)&&(t=o.packVectorAndMatrixTypes(t,!0),t=o.unapplyValueTransform(t),t=o.unnormalize(t)),n[e]=t,!0};$o.getPropertyBySemantic=function(e,t,n){let i=n.propertiesBySemantic;if(!c(i))return;let o=i[e];if(c(o))return $o.getProperty(o.id,t,n)};$o.setPropertyBySemantic=function(e,t,n,i){let o=i.propertiesBySemantic;if(!c(o))return!1;let r=i.propertiesBySemantic[e];return c(r)?$o.setProperty(r.id,t,n,i):!1};var en=$o;function wl(e){e=e??k.EMPTY_OBJECT;let t=e.subtreeMetadata,n=e.class,i=c(t.properties)?t.properties:{};this._class=n,this._properties=i,this._extras=t.extras,this._extensions=t.extensions}Object.defineProperties(wl.prototype,{class:{get:function(){return this._class}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}}});wl.prototype.hasProperty=function(e){return en.hasProperty(e,this._properties,this._class)};wl.prototype.hasPropertyBySemantic=function(e){return en.hasPropertyBySemantic(e,this._properties,this._class)};wl.prototype.getPropertyIds=function(e){return en.getPropertyIds(this._properties,this._class,e)};wl.prototype.getProperty=function(e){return en.getProperty(e,this._properties,this._class)};wl.prototype.setProperty=function(e,t){return en.setProperty(e,t,this._properties,this._class)};wl.prototype.getPropertyBySemantic=function(e){return en.getPropertyBySemantic(e,this._properties,this._class)};wl.prototype.setPropertyBySemantic=function(e,t){return en.setPropertyBySemantic(e,t,this._properties,this._class)};var X2=wl;var it={INT8:"INT8",UINT8:"UINT8",INT16:"INT16",UINT16:"UINT16",INT32:"INT32",UINT32:"UINT32",INT64:"INT64",UINT64:"UINT64",FLOAT32:"FLOAT32",FLOAT64:"FLOAT64"};it.getMinimum=function(e){switch(e){case it.INT8:return-128;case it.UINT8:return 0;case it.INT16:return-32768;case it.UINT16:return 0;case it.INT32:return-2147483648;case it.UINT32:return 0;case it.INT64:return $t.supportsBigInt()?BigInt("-9223372036854775808"):-Math.pow(2,63);case it.UINT64:return $t.supportsBigInt()?BigInt(0):0;case it.FLOAT32:return-34028234663852886e22;case it.FLOAT64:return-Number.MAX_VALUE}};it.getMaximum=function(e){switch(e){case it.INT8:return 127;case it.UINT8:return 255;case it.INT16:return 32767;case it.UINT16:return 65535;case it.INT32:return 2147483647;case it.UINT32:return 4294967295;case it.INT64:return $t.supportsBigInt()?BigInt("9223372036854775807"):Math.pow(2,63)-1;case it.UINT64:return $t.supportsBigInt()?BigInt("18446744073709551615"):Math.pow(2,64)-1;case it.FLOAT32:return 34028234663852886e22;case it.FLOAT64:return Number.MAX_VALUE}};it.isIntegerType=function(e){switch(e){case it.INT8:case it.UINT8:case it.INT16:case it.UINT16:case it.INT32:case it.UINT32:case it.INT64:case it.UINT64:return!0;default:return!1}};it.isUnsignedIntegerType=function(e){switch(e){case it.UINT8:case it.UINT16:case it.UINT32:case it.UINT64:return!0;default:return!1}};it.isVectorCompatible=function(e){switch(e){case it.INT8:case it.UINT8:case it.INT16:case it.UINT16:case it.INT32:case it.UINT32:case it.FLOAT32:case it.FLOAT64:return!0;default:return!1}};it.normalize=function(e,t){return Math.max(Number(e)/Number(it.getMaximum(t)),-1)};it.unnormalize=function(e,t){let n=it.getMaximum(t),i=it.isUnsignedIntegerType(t)?0:-n;return e=w.sign(e)*Math.round(Math.abs(e)*Number(n)),(t===it.INT64||t===it.UINT64)&&$t.supportsBigInt()&&(e=BigInt(e)),e>n?n:e<i?i:e};it.applyValueTransform=function(e,t,n){return n*e+t};it.unapplyValueTransform=function(e,t,n){return n===0?0:(e-t)/n};it.getSizeInBytes=function(e){switch(e){case it.INT8:case it.UINT8:return 1;case it.INT16:case it.UINT16:return 2;case it.INT32:case it.UINT32:return 4;case it.INT64:case it.UINT64:return 8;case it.FLOAT32:return 4;case it.FLOAT64:return 8}};it.fromComponentDatatype=function(e){switch(e){case N.BYTE:return it.INT8;case N.UNSIGNED_BYTE:return it.UINT8;case N.SHORT:return it.INT16;case N.UNSIGNED_SHORT:return it.UINT16;case N.INT:return it.INT32;case N.UNSIGNED_INT:return it.UINT32;case N.FLOAT:return it.FLOAT32;case N.DOUBLE:return it.FLOAT64}};it.toComponentDatatype=function(e){switch(e){case it.INT8:return N.BYTE;case it.UINT8:return N.UNSIGNED_BYTE;case it.INT16:return N.SHORT;case it.UINT16:return N.UNSIGNED_SHORT;case it.INT32:return N.INT;case it.UINT32:return N.UNSIGNED_INT;case it.FLOAT32:return N.FLOAT;case it.FLOAT64:return N.DOUBLE}};var Xt=Object.freeze(it);var xi={SCALAR:"SCALAR",VEC2:"VEC2",VEC3:"VEC3",VEC4:"VEC4",MAT2:"MAT2",MAT3:"MAT3",MAT4:"MAT4",BOOLEAN:"BOOLEAN",STRING:"STRING",ENUM:"ENUM"};xi.isVectorType=function(e){switch(e){case xi.VEC2:case xi.VEC3:case xi.VEC4:return!0;default:return!1}};xi.isMatrixType=function(e){switch(e){case xi.MAT2:case xi.MAT3:case xi.MAT4:return!0;default:return!1}};xi.getComponentCount=function(e){switch(e){case xi.SCALAR:case xi.STRING:case xi.ENUM:case xi.BOOLEAN:return 1;case xi.VEC2:return 2;case xi.VEC3:return 3;case xi.VEC4:return 4;case xi.MAT2:return 4;case xi.MAT3:return 9;case xi.MAT4:return 16}};xi.getMathType=function(e){switch(e){case xi.VEC2:return U;case xi.VEC3:return u;case xi.VEC4:return se;case xi.MAT2:return ai;case xi.MAT3:return J;case xi.MAT4:return O;default:return}};var Zt=Object.freeze(xi);function lr(e){e=e??k.EMPTY_OBJECT;let t=e.id,n=e.type,i=e.componentType,o=e.enumType,r=c(i)&&Xt.isIntegerType(i)&&(e.normalized??!1);this._id=t,this._name=e.name,this._description=e.description,this._semantic=e.semantic,this._isLegacyExtension=e.isLegacyExtension,this._type=n,this._componentType=i,this._enumType=o,this._valueType=c(o)?o.valueType:i,this._isArray=e.isArray??!1,this._isVariableLengthArray=e.isVariableLengthArray??!1,this._arrayLength=e.arrayLength,this._min=Ne(e.min,!0),this._max=Ne(e.max,!0),this._normalized=r;let a=Ne(e.offset,!0),s=Ne(e.scale,!0),A=c(a)||c(s),l=!0;c(a)||(a=this.expandConstant(0,l)),c(s)||(s=this.expandConstant(1,l)),this._offset=a,this._scale=s,this._hasValueTransform=A,this._noData=Ne(e.noData,!0),this._default=Ne(e.default,!0),this._required=e.required??!0,this._extras=Ne(e.extras,!0),this._extensions=Ne(e.extensions,!0)}lr.fromJson=function(e){e=e??k.EMPTY_OBJECT;let t=e.id,n=e.property,i=Mse(n),o=Ose(n,e.enums),r;return c(i)?i?r=c(n.optional)?!n.optional:!0:r=n.required??!1:r=!1,new lr({id:t,type:o.type,componentType:o.componentType,enumType:o.enumType,isArray:o.isArray,isVariableLengthArray:o.isVariableLengthArray,arrayLength:o.arrayLength,normalized:n.normalized,min:n.min,max:n.max,offset:n.offset,scale:n.scale,noData:n.noData,default:n.default,required:r,name:n.name,description:n.description,semantic:n.semantic,extras:n.extras,extensions:n.extensions,isLegacyExtension:i})};Object.defineProperties(lr.prototype,{id:{get:function(){return this._id}},name:{get:function(){return this._name}},description:{get:function(){return this._description}},type:{get:function(){return this._type}},enumType:{get:function(){return this._enumType}},componentType:{get:function(){return this._componentType}},valueType:{get:function(){return this._valueType}},isArray:{get:function(){return this._isArray}},isVariableLengthArray:{get:function(){return this._isVariableLengthArray}},arrayLength:{get:function(){return this._arrayLength}},normalized:{get:function(){return this._normalized}},max:{get:function(){return this._max}},min:{get:function(){return this._min}},noData:{get:function(){return this._noData}},default:{get:function(){return this._default}},required:{get:function(){return this._required}},semantic:{get:function(){return this._semantic}},hasValueTransform:{get:function(){return this._hasValueTransform}},offset:{get:function(){return this._offset}},scale:{get:function(){return this._scale}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}}});function Mse(e){if(e.type==="ARRAY")return!0;let t=e.type;if(t===Zt.SCALAR||Zt.isMatrixType(t)||Zt.isVectorType(t))return!1;if(c(Xt[t]))return!0;if(c(e.noData)||c(e.scale)||c(e.offset)||c(e.required)||c(e.count)||c(e.array)||c(e.optional))return!1}function Ose(e,t){let n=e.type,i=e.componentType,o=n==="ARRAY",r,a,s;o?(r=!0,a=e.componentCount,s=!c(a)):e.array?(r=!0,a=e.count,s=!c(e.count)):(r=!1,a=void 0,s=!1);let A;if(c(e.enumType)&&(A=t[e.enumType]),n===Zt.ENUM)return{type:n,componentType:void 0,enumType:A,valueType:A.valueType,isArray:r,isVariableLengthArray:s,arrayLength:a};if(o&&i===Zt.ENUM)return{type:i,componentType:void 0,enumType:A,valueType:A.valueType,isArray:r,isVariableLengthArray:s,arrayLength:a};if(n===Zt.SCALAR||Zt.isMatrixType(n)||Zt.isVectorType(n))return{type:n,componentType:i,enumType:void 0,valueType:i,isArray:r,isVariableLengthArray:s,arrayLength:a};if(n===Zt.BOOLEAN||n===Zt.STRING)return{type:n,componentType:void 0,enumType:void 0,valueType:void 0,isArray:r,isVariableLengthArray:s,arrayLength:a};if(o&&(i===Zt.BOOLEAN||i===Zt.STRING))return{type:i,componentType:void 0,enumType:void 0,valueType:void 0,isArray:r,isVariableLengthArray:s,arrayLength:a};if(c(i)&&c(Xt[i]))return{type:Zt.SCALAR,componentType:i,enumType:void 0,valueType:i,isArray:r,isVariableLengthArray:s,arrayLength:a};if(c(Xt[n]))return{type:Zt.SCALAR,componentType:n,enumType:void 0,valueType:n,isArray:r,isVariableLengthArray:s,arrayLength:a}}lr.prototype.normalize=function(e){return this._normalized?zS(e,this._valueType,Xt.normalize):e};lr.prototype.unnormalize=function(e){return this._normalized?zS(e,this._valueType,Xt.unnormalize):e};lr.prototype.applyValueTransform=function(e){return!this._hasValueTransform||this._isVariableLengthArray?e:lr.valueTransformInPlace(e,this._offset,this._scale,Xt.applyValueTransform)};lr.prototype.unapplyValueTransform=function(e){return!this._hasValueTransform||this._isVariableLengthArray?e:lr.valueTransformInPlace(e,this._offset,this._scale,Xt.unapplyValueTransform)};lr.prototype.expandConstant=function(e,t){t=t??!1;let n=this._isArray,i=this._arrayLength,o=Zt.getComponentCount(this._type),r=n&&o>1;if(!n&&o===1)return e;if(!n)return new Array(o).fill(e);if(!r)return new Array(i).fill(e);if(!t)return new Array(this._arrayLength*o).fill(e);let a=new Array(o).fill(e);return new Array(this._arrayLength).fill(a)};lr.prototype.handleNoData=function(e){let t=this._noData;if(!c(t))return e;if(!tU(e,t))return e};function tU(e,t){if(!Array.isArray(e))return e===t;if(!Array.isArray(t)||e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!tU(e[n],t[n]))return!1;return!0}lr.prototype.unpackVectorAndMatrixTypes=function(e,t){t=t??!1;let n=Zt.getMathType(this._type),i=this._isArray,o=Zt.getComponentCount(this._type),r=i&&o>1;return c(n)?t&&r?e.map(function(a){return n.unpack(a)}):i?n.unpackArray(e):n.unpack(e):e};lr.prototype.packVectorAndMatrixTypes=function(e,t){t=t??!1;let n=Zt.getMathType(this._type),i=this._isArray,o=Zt.getComponentCount(this._type),r=i&&o>1;return c(n)?t&&r?e.map(function(a){return n.pack(a,[])}):i?n.packArray(e,[]):n.pack(e,[]):e};lr.prototype.validate=function(e){if(!(!c(e)&&c(this._default)))return this._required&&!c(e)?"required property must have a value":this._isArray?Lse(this,e):nU(this,e)};function Lse(e,t){if(!Array.isArray(t))return`value ${t} must be an array`;let n=t.length;if(!e._isVariableLengthArray&&n!==e._arrayLength)return"Array length does not match property.arrayLength";for(let i=0;i<n;i++){let o=nU(e,t[i]);if(c(o))return o}}function nU(e,t){let n=e._type,i=e._componentType,o=e._enumType,r=e._normalized;return Zt.isVectorType(n)?Nse(t,n,i):Zt.isMatrixType(n)?Fse(t,n,i):n===Zt.STRING?kse(t):n===Zt.BOOLEAN?Use(t):n===Zt.ENUM?Gse(t,o):zse(t,i,r)}function Nse(e,t,n){if(!Xt.isVectorCompatible(n))return`componentType ${n} is incompatible with vector type ${t}`;if(t===Zt.VEC2&&!(e instanceof U))return`vector value ${e} must be a Cartesian2`;if(t===Zt.VEC3&&!(e instanceof u))return`vector value ${e} must be a Cartesian3`;if(t===Zt.VEC4&&!(e instanceof se))return`vector value ${e} must be a Cartesian4`}function Fse(e,t,n){if(!Xt.isVectorCompatible(n))return`componentType ${n} is incompatible with matrix type ${t}`;if(t===Zt.MAT2&&!(e instanceof ai))return`matrix value ${e} must be a Matrix2`;if(t===Zt.MAT3&&!(e instanceof J))return`matrix value ${e} must be a Matrix3`;if(t===Zt.MAT4&&!(e instanceof O))return`matrix value ${e} must be a Matrix4`}function kse(e){if(typeof e!="string")return sb(e,Zt.STRING)}function Use(e){if(typeof e!="boolean")return sb(e,Zt.BOOLEAN)}function Gse(e,t){let n=typeof e;if(c(t))return n!=="string"||!c(t.valuesByName[e])?`value ${e} is not a valid enum name for ${t.id}`:void 0}function zse(e,t,n){let i=typeof e;switch(t){case Xt.INT8:case Xt.UINT8:case Xt.INT16:case Xt.UINT16:case Xt.INT32:case Xt.UINT32:case Xt.FLOAT32:case Xt.FLOAT64:return i!=="number"?sb(e,t):isFinite(e)?$2(e,t,n):eU(e,t);case Xt.INT64:case Xt.UINT64:return i!=="number"&&i!=="bigint"?sb(e,t):i==="number"&&!isFinite(e)?eU(e,t):$2(e,t,n)}}function sb(e,t){return`value ${e} does not match type ${t}`}function Z2(e,t,n){let i=`value ${e} is out of range for type ${t}`;return n&&(i+=" (normalized)"),i}function $2(e,t,n){if(n){let i=Xt.isUnsignedIntegerType(t)?0:-1;return e<i||e>1?Z2(e,t,n):void 0}if(e<Xt.getMinimum(t)||e>Xt.getMaximum(t))return Z2(e,t,n)}function eU(e,t){return`value ${e} of type ${t} must be finite`}function zS(e,t,n){if(!Array.isArray(e))return n(e,t);for(let i=0;i<e.length;i++)e[i]=zS(e[i],t,n);return e}lr.valueTransformInPlace=function(e,t,n,i){if(!Array.isArray(e))return i(e,t,n);for(let o=0;o<e.length;o++)e[o]=lr.valueTransformInPlace(e[o],t[o],n[o],i);return e};var zC=lr;function HC(e){e=e??k.EMPTY_OBJECT;let t=e.count,n=e.property,i=e.classProperty,o=e.bufferViews,r=i.type,a=i.isArray,s=i.isVariableLengthArray,A=i.valueType,l=i.enumType,f=r===Zt.STRING,h=r===Zt.BOOLEAN,m=0,p;if(s){let d=n.arrayOffsetType??n.offsetType;d=Xt[d]??Xt.UINT32;let B=n.arrayOffsets??n.arrayOffsetBufferView;p=new HS(o[B],d,t+1),m+=p.typedArray.byteLength}let g=Zt.getComponentCount(r),C;s?C=p.get(t)-p.get(0):a?C=t*i.arrayLength:C=t;let _=g*C,E;if(f){let d=n.stringOffsetType??n.offsetType;d=Xt[d]??Xt.UINT32;let B=n.stringOffsets??n.stringOffsetBufferView;E=new HS(o[B],d,_+1),m+=E.typedArray.byteLength}(f||h)&&(A=Xt.UINT8);let I;f?I=E.get(_)-E.get(0):h?I=Math.ceil(_/8):I=_;let y=n.values??n.bufferView,b=new HS(o[y],A,I);m+=b.typedArray.byteLength;let x=n.offset,S=n.scale,P=i.hasValueTransform||c(x)||c(S);x=x??i.offset,S=S??i.scale,x=iU(x),S=iU(S);let D,Q,v=this;f?D=function(d){return jse(d,v._values,v._stringOffsets)}:h?(D=function(d){return Yse(d,v._values)},Q=function(d,B){qse(d,v._values,B)}):c(l)?(D=function(d){let B=v._values.get(d);return l.namesByValue[B]},Q=function(d,B){let T=l.valuesByName[B];v._values.set(d,T)}):(D=function(d){return v._values.get(d)},Q=function(d,B){v._values.set(d,B)}),this._arrayOffsets=p,this._stringOffsets=E,this._values=b,this._classProperty=i,this._count=t,this._vectorComponentCount=g,this._min=n.min,this._max=n.max,this._offset=x,this._scale=S,this._hasValueTransform=P,this._getValue=D,this._setValue=Q,this._unpackedValues=void 0,this._extras=n.extras,this._extensions=n.extensions,this._byteLength=m}Object.defineProperties(HC.prototype,{hasValueTransform:{get:function(){return this._hasValueTransform}},offset:{get:function(){return this._offset}},scale:{get:function(){return this._scale}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}},byteLength:{get:function(){return this._byteLength}}});HC.prototype.get=function(e){let t=Hse(this,e);return t=this._classProperty.handleNoData(t),c(t)?(t=this._classProperty.normalize(t),t=tce(this,t),this._classProperty.unpackVectorAndMatrixTypes(t)):(t=this._classProperty.default,this._classProperty.unpackVectorAndMatrixTypes(t))};HC.prototype.set=function(e,t){let n=this._classProperty;t=n.packVectorAndMatrixTypes(t),t=nce(this,t),t=n.unnormalize(t),Vse(this,e,t)};HC.prototype.getTypedArray=function(){if(c(this._values))return this._values.typedArray};function iU(e){if(!Array.isArray(e))return e;let t=[];for(let n=0;n<e.length;n++){let i=e[n];Array.isArray(i)?Gn(t,i):t.push(i)}return t}function Hse(e,t){rU(e)&&aU(e);let n=e._classProperty,i=n.isArray,o=n.type,r=Zt.getComponentCount(o);if(c(e._unpackedValues)){let a=e._unpackedValues[t];return i?Ne(a,!0):a}return!i&&r===1?e._getValue(t):oU(e,n,t)}function oU(e,t,n){let i,o;if(t.isVariableLengthArray){i=e._arrayOffsets.get(n),o=e._arrayOffsets.get(n+1)-i;let a=Zt.getComponentCount(t.type);i*=a,o*=a}else{let s=(t.arrayLength??1)*e._vectorComponentCount;i=n*s,o=s}let r=new Array(o);for(let a=0;a<o;a++)r[a]=e._getValue(i+a);return r}function Vse(e,t,n){$se(e,t,n)&&aU(e);let i=e._classProperty,o=i.isArray,r=i.type,a=Zt.getComponentCount(r);if(c(e._unpackedValues)){i.isArray&&(n=Ne(n,!0)),e._unpackedValues[t]=n;return}if(!o&&a===1){e._setValue(t,n);return}let s,A;if(i.isVariableLengthArray)s=e._arrayOffsets.get(t),A=e._arrayOffsets.get(t+1)-s;else{let f=(i.arrayLength??1)*e._vectorComponentCount;s=t*f,A=f}for(let l=0;l<A;++l)e._setValue(s+l,n[l])}function jse(e,t,n){let i=n.get(e),o=n.get(e+1)-i;return xc(t.typedArray,i,o)}function Yse(e,t){let n=e>>3,i=e%8;return(t.typedArray[n]>>i&1)===1}function qse(e,t,n){let i=e>>3,o=e%8;n?t.typedArray[i]|=1<<o:t.typedArray[i]&=~(1<<o)}function Wse(e,t){let n=t.dataView,i=e*8,o=0,r=(n.getUint8(i+7)&128)>0,a=!0;for(let s=0;s<8;++s){let A=n.getUint8(i+s);r&&(a?A!==0&&(A=~(A-1)&255,a=!1):A=~A&255),o+=A*Math.pow(256,s)}return r&&(o=-o),o}function Jse(e,t){let n=t.dataView,i=e*8,o=BigInt(0),r=(n.getUint8(i+7)&128)>0,a=!0;for(let s=0;s<8;++s){let A=n.getUint8(i+s);r&&(a?A!==0&&(A=~(A-1)&255,a=!1):A=~A&255),o+=BigInt(A)*(BigInt(1)<<BigInt(s*8))}return r&&(o=-o),o}function Kse(e,t){let n=t.dataView,i=e*8,o=n.getUint32(i,!0),r=n.getUint32(i+4,!0);return o+4294967296*r}function Xse(e,t){let n=t.dataView,i=e*8,o=BigInt(n.getUint32(i,!0)),r=BigInt(n.getUint32(i+4,!0));return o+BigInt(4294967296)*r}function Zse(e){switch(e){case Xt.INT8:return N.BYTE;case Xt.UINT8:return N.UNSIGNED_BYTE;case Xt.INT16:return N.SHORT;case Xt.UINT16:return N.UNSIGNED_SHORT;case Xt.INT32:return N.INT;case Xt.UINT32:return N.UNSIGNED_INT;case Xt.FLOAT32:return N.FLOAT;case Xt.FLOAT64:return N.DOUBLE}}function rU(e){if(c(e._unpackedValues))return!1;let t=e._classProperty,n=t.type,i=t.valueType;return n===Zt.STRING||i===Xt.INT64&&!$t.supportsBigInt64Array()||i===Xt.UINT64&&!$t.supportsBigUint64Array()}function $se(e,t,n){if(rU(e))return!0;let i=e._arrayOffsets;if(c(i)){let o=i.get(t+1)-i.get(t),r=n.length;if(o!==r)return!0}return!1}function aU(e){e._unpackedValues=ece(e),e._arrayOffsets=void 0,e._stringOffsets=void 0,e._values=void 0}function ece(e){let t=e._count,n=new Array(t),i=e._classProperty,o=i.isArray,r=i.type,a=Zt.getComponentCount(r);if(!o&&a===1){for(let s=0;s<t;++s)n[s]=e._getValue(s);return n}for(let s=0;s<t;s++)n[s]=oU(e,i,s);return n}function tce(e,t){let i=e._classProperty.isVariableLengthArray;return!e._hasValueTransform||i?t:zC.valueTransformInPlace(t,e._offset,e._scale,Xt.applyValueTransform)}function nce(e,t){let i=e._classProperty.isVariableLengthArray;return!e._hasValueTransform||i?t:zC.valueTransformInPlace(t,e._offset,e._scale,Xt.unapplyValueTransform)}function HS(e,t,n){let i=this,o,r,a;if(t===Xt.INT64)$t.supportsBigInt()?$t.supportsBigInt64Array()?(o=new BigInt64Array(e.buffer,e.byteOffset,n),a=function(s,A){i.typedArray[s]=BigInt(A)}):(o=new Uint8Array(e.buffer,e.byteOffset,n*8),r=function(s){return Jse(s,i)}):(jt("INT64 type is not fully supported on this platform. Values greater than 2^53 - 1 or less than -(2^53 - 1) may lose precision when read."),o=new Uint8Array(e.buffer,e.byteOffset,n*8),r=function(s){return Wse(s,i)});else if(t===Xt.UINT64)$t.supportsBigInt()?$t.supportsBigUint64Array()?(o=new BigUint64Array(e.buffer,e.byteOffset,n),a=function(s,A){i.typedArray[s]=BigInt(A)}):(o=new Uint8Array(e.buffer,e.byteOffset,n*8),r=function(s){return Xse(s,i)}):(jt("UINT64 type is not fully supported on this platform. Values greater than 2^53 - 1 may lose precision when read."),o=new Uint8Array(e.buffer,e.byteOffset,n*8),r=function(s){return Kse(s,i)});else{let s=Zse(t);o=N.createArrayBufferView(s,e.buffer,e.byteOffset,n),a=function(A,l){i.typedArray[A]=l}}c(r)||(r=function(s){return i.typedArray[s]}),this.typedArray=o,this.dataView=new DataView(o.buffer,o.byteOffset),this.get=r,this.set=a,this._componentType=t}var sU=HC;function Sc(e){e=e??k.EMPTY_OBJECT;let t=e.count,n=e.class,i=0,o={};if(c(e.properties)){for(let r in e.properties)if(e.properties.hasOwnProperty(r)){let a=new sU({count:t,property:e.properties[r],classProperty:n.properties[r],bufferViews:e.bufferViews});o[r]=a,i+=a.byteLength}}this._count=t,this._class=n,this._properties=o,this._byteLength=i}Object.defineProperties(Sc.prototype,{count:{get:function(){return this._count}},class:{get:function(){return this._class}},byteLength:{get:function(){return this._byteLength}}});Sc.prototype.hasProperty=function(e){return en.hasProperty(e,this._properties,this._class)};Sc.prototype.hasPropertyBySemantic=function(e){return en.hasPropertyBySemantic(e,this._properties,this._class)};Sc.prototype.getPropertyIds=function(e){return en.getPropertyIds(this._properties,this._class,e)};Sc.prototype.getProperty=function(e,t){let n=this._properties[t],i;return c(n)?i=n.get(e):i=ice(this._class,t),i};Sc.prototype.setProperty=function(e,t,n){let i=this._properties[t];return c(i)?(i.set(e,n),!0):!1};Sc.prototype.getPropertyBySemantic=function(e,t){let n,i=this._class.propertiesBySemantic;if(c(i)&&(n=i[t]),c(n))return this.getProperty(e,n.id)};Sc.prototype.setPropertyBySemantic=function(e,t,n){let i,o=this._class.propertiesBySemantic;return c(o)&&(i=o[t]),c(i)?this.setProperty(e,i.id,n):!1};Sc.prototype.getPropertyTypedArray=function(e){let t=this._properties[e];if(c(t))return t.getTypedArray()};Sc.prototype.getPropertyTypedArrayBySemantic=function(e){let t,n=this._class.propertiesBySemantic;if(c(n)&&(t=n[e]),c(t))return this.getPropertyTypedArray(t.id)};function ice(e,t){let n=e.properties;if(!c(n))return;let i=n[t];if(c(i)&&c(i.default)){let o=i.default;return i.isArray&&(o=Ne(o,!0)),o=i.normalize(o),i.unpackVectorAndMatrixTypes(o)}}var Dl=Sc;function ou(){}Object.defineProperties(ou.prototype,{cacheKey:{get:function(){Ee.throwInstantiationError()}}});ou.prototype.load=function(){Ee.throwInstantiationError()};ou.prototype.unload=function(){};ou.prototype.process=function(e){return!1};ou.prototype.getError=function(e,t){c(t)&&c(t.message)&&(e+=`
${t.message}`);let n=new oe(e);return c(t)&&(n.stack=`Original stack:
${t.stack}
Handler stack:
${n.stack}`),n};ou.prototype.isDestroyed=function(){return!1};ou.prototype.destroy=function(){return this.unload(),pe(this)};var zn=ou;var oce={UNLOADED:0,LOADING:1,LOADED:2,PROCESSING:3,READY:4,FAILED:5},Fe=Object.freeze(oce);function Ql(e){e=e??k.EMPTY_OBJECT;let t=e.typedArray,n=e.resource,i=e.cacheKey;this._typedArray=t,this._resource=n,this._cacheKey=i,this._state=Fe.UNLOADED,this._promise=void 0}c(Object.create)&&(Ql.prototype=Object.create(zn.prototype),Ql.prototype.constructor=Ql);Object.defineProperties(Ql.prototype,{cacheKey:{get:function(){return this._cacheKey}},typedArray:{get:function(){return this._typedArray}}});Ql.prototype.load=async function(){return c(this._promise)?this._promise:c(this._typedArray)?(this._promise=Promise.resolve(this),this._promise):(this._promise=rce(this),this._promise)};async function rce(e){let t=e._resource;e._state=Fe.LOADING;try{let n=await Ql._fetchArrayBuffer(t);return e.isDestroyed()?void 0:(e._typedArray=new Uint8Array(n),e._state=Fe.READY,e)}catch(n){if(e.isDestroyed())return;e._state=Fe.FAILED;let i=`Failed to load external buffer: ${t.url}`;throw e.getError(i,n)}}Ql._fetchArrayBuffer=function(e){return e.fetchArrayBuffer()};Ql.prototype.unload=function(){this._typedArray=void 0};var cb=Ql;var hU=qr(dU(),1);function jd(e){e=e??k.EMPTY_OBJECT;let t=e.resourceCache,n=e.gltf,i=e.bufferViewId,o=e.gltfResource,r=e.baseResource,a=e.cacheKey,s=n.bufferViews[i],A=s.buffer,l=s.byteOffset,f=s.byteLength,h=!1,m,p,g,C;if(Wn(s,"EXT_meshopt_compression")){let E=s.extensions.EXT_meshopt_compression;A=E.buffer,l=E.byteOffset??0,f=E.byteLength,h=!0,m=E.byteStride,p=E.count,g=E.mode,C=E.filter??"NONE"}let _=n.buffers[A];this._hasMeshopt=h,this._meshoptByteStride=m,this._meshoptCount=p,this._meshoptMode=g,this._meshoptFilter=C,this._resourceCache=t,this._gltfResource=o,this._baseResource=r,this._buffer=_,this._bufferId=A,this._byteOffset=l,this._byteLength=f,this._cacheKey=a,this._bufferLoader=void 0,this._typedArray=void 0,this._state=Fe.UNLOADED,this._promise=void 0}c(Object.create)&&(jd.prototype=Object.create(zn.prototype),jd.prototype.constructor=jd);Object.defineProperties(jd.prototype,{cacheKey:{get:function(){return this._cacheKey}},typedArray:{get:function(){return this._typedArray}}});async function lce(e){try{let t=fce(e);if(e._bufferLoader=t,await t.load(),e.isDestroyed())return;let n=t.typedArray,i=new Uint8Array(n.buffer,n.byteOffset+e._byteOffset,e._byteLength);if(e.unload(),e._typedArray=i,e._hasMeshopt){let o=e._meshoptCount,r=e._meshoptByteStride,a=new Uint8Array(o*r);hU.MeshoptDecoder.decodeGltfBuffer(a,o,r,e._typedArray,e._meshoptMode,e._meshoptFilter),e._typedArray=a}return e._state=Fe.READY,e}catch(t){if(e.isDestroyed())return;throw e.unload(),e._state=Fe.FAILED,e.getError("Failed to load buffer view",t)}}jd.prototype.load=async function(){return c(this._promise)?this._promise:(this._state=Fe.LOADING,this._promise=lce(this),this._promise)};function fce(e){let t=e._resourceCache,n=e._buffer;if(c(n.uri)){let o=e._baseResource.getDerivedResource({url:n.uri});return t.getExternalBufferLoader({resource:o})}return t.getEmbeddedBufferLoader({parentResource:e._gltfResource,bufferId:e._bufferId})}jd.prototype.unload=function(){c(this._bufferLoader)&&!this._bufferLoader.isDestroyed()&&this._resourceCache.unload(this._bufferLoader),this._bufferLoader=void 0,this._typedArray=void 0};var WS=jd;function Ki(){}Ki._maxDecodingConcurrency=Math.max($t.hardwareConcurrency-1,1);Ki._decoderTaskProcessor=void 0;Ki._taskProcessorReady=!1;Ki._error=void 0;Ki._getDecoderTaskProcessor=function(){if(!c(Ki._decoderTaskProcessor)){let e=new mo("decodeDraco",Ki._maxDecodingConcurrency);e.initWebAssemblyModule({wasmBinaryFile:"ThirdParty/draco_decoder.wasm"}).then(function(t){t?Ki._taskProcessorReady=!0:Ki._error=new oe("Draco decoder could not be initialized.")}).catch(t=>{Ki._error=t}),Ki._decoderTaskProcessor=e}return Ki._decoderTaskProcessor};Ki.decodePointCloud=function(e){let t=Ki._getDecoderTaskProcessor();if(c(Ki._error))throw Ki._error;if(Ki._taskProcessorReady)return t.scheduleTask(e,[e.buffer.buffer])};Ki.decodeBufferView=function(e){let t=Ki._getDecoderTaskProcessor();if(c(Ki._error))throw Ki._error;if(Ki._taskProcessorReady)return t.scheduleTask(e,[e.array.buffer])};var db=Ki;var qt={POSITION:"POSITION",NORMAL:"NORMAL",TANGENT:"TANGENT",TEXCOORD:"TEXCOORD",COLOR:"COLOR",JOINTS:"JOINTS",WEIGHTS:"WEIGHTS",FEATURE_ID:"_FEATURE_ID",SCALE:"KHR_gaussian_splatting:SCALE",ROTATION:"KHR_gaussian_splatting:ROTATION"};function uce(e){switch(e){case qt.POSITION:return"positionMC";case qt.NORMAL:return"normalMC";case qt.TANGENT:return"tangentMC";case qt.TEXCOORD:return"texCoord";case qt.COLOR:return"color";case qt.JOINTS:return"joints";case qt.WEIGHTS:return"weights";case qt.FEATURE_ID:return"featureId";case qt.SCALE:return"scale";case qt.ROTATION:return"rotation"}}qt.hasSetIndex=function(e){switch(e){case qt.POSITION:case qt.NORMAL:case qt.TANGENT:return!1;case qt.TEXCOORD:case qt.COLOR:case qt.JOINTS:case qt.WEIGHTS:case qt.FEATURE_ID:case qt.SCALE:case qt.ROTATION:return!0}};qt.fromGltfSemantic=function(e){let t=e,i=/^(\w+)_\d+$/.exec(e);switch(i!==null&&(t=i[1]),t){case"POSITION":return qt.POSITION;case"NORMAL":return qt.NORMAL;case"TANGENT":return qt.TANGENT;case"TEXCOORD":return qt.TEXCOORD;case"COLOR":return qt.COLOR;case"JOINTS":return qt.JOINTS;case"WEIGHTS":return qt.WEIGHTS;case"_FEATURE_ID":return qt.FEATURE_ID;case"KHR_gaussian_splatting:SCALE":case"_SCALE":return qt.SCALE;case"KHR_gaussian_splatting:ROTATION":case"_ROTATION":return qt.ROTATION}};qt.fromPntsSemantic=function(e){switch(e){case"POSITION":case"POSITION_QUANTIZED":return qt.POSITION;case"RGBA":case"RGB":case"RGB565":return qt.COLOR;case"NORMAL":case"NORMAL_OCT16P":return qt.NORMAL;case"BATCH_ID":return qt.FEATURE_ID}};qt.getGlslType=function(e){switch(e){case qt.POSITION:case qt.NORMAL:case qt.TANGENT:return"vec3";case qt.TEXCOORD:return"vec2";case qt.COLOR:return"vec4";case qt.JOINTS:return"ivec4";case qt.WEIGHTS:return"vec4";case qt.FEATURE_ID:return"int";case qt.SCALE:return"vec3";case qt.ROTATION:return"vec4";case qt.OPACITY:return"float"}};qt.getVariableName=function(e,t){let n=uce(e);return c(t)&&(n+=`_${t}`),n};var Pe=Object.freeze(qt);function ru(e){e=e??k.EMPTY_OBJECT;let t=e.resourceCache,n=e.gltf,i=e.primitive,o=e.draco,r=e.gltfResource,a=e.baseResource,s=e.cacheKey;this._resourceCache=t,this._gltfResource=r,this._baseResource=a,this._gltf=n,this._primitive=i,this._draco=o,this._cacheKey=s,this._bufferViewLoader=void 0,this._bufferViewTypedArray=void 0,this._decodePromise=void 0,this._decodedData=void 0,this._state=Fe.UNLOADED,this._promise=void 0,this._dracoError=void 0}c(Object.create)&&(ru.prototype=Object.create(zn.prototype),ru.prototype.constructor=ru);Object.defineProperties(ru.prototype,{cacheKey:{get:function(){return this._cacheKey}},decodedData:{get:function(){return this._decodedData}}});async function dce(e){let t=e._resourceCache;try{let n=t.getBufferViewLoader({gltf:e._gltf,bufferViewId:e._draco.bufferView,gltfResource:e._gltfResource,baseResource:e._baseResource});return e._bufferViewLoader=n,await n.load(),e.isDestroyed()?void 0:(e._bufferViewTypedArray=n.typedArray,e._state=Fe.PROCESSING,e)}catch(n){if(e.isDestroyed())return;mU(e,n)}}ru.prototype.load=async function(){return c(this._promise)?this._promise:(this._state=Fe.LOADING,this._promise=dce(this),this._promise)};function mU(e,t){throw e.unload(),e._state=Fe.FAILED,e.getError("Failed to load Draco",t)}async function hce(e,t){try{let n=await t;return e.isDestroyed()?void 0:(e.unload(),e._decodedData={indices:n.indexArray,vertexAttributes:n.attributeData},e._state=Fe.READY,e._baseResource)}catch(n){if(e.isDestroyed())return;e._dracoError=n}}var Yd={};Yd[Pe.POSITION]="POSITION";Yd[Pe.NORMAL]="NORMAL";Yd[Pe.COLOR]="COLOR";Yd[Pe.TEXCOORD]="TEX_COORD";function mce(e){for(let t in Yd)if(Yd.hasOwnProperty(t)&&e.startsWith(t))return Yd[t]}ru.prototype.process=function(e){if(this._state===Fe.READY)return!0;if(this._state!==Fe.PROCESSING||(c(this._dracoError)&&mU(this,this._dracoError),!c(this._bufferViewTypedArray))||c(this._decodePromise))return!1;let t=this._draco,n=this._primitive,i=this._gltf,o=i.bufferViews,r=t.bufferView,a=o[r],s=t.attributes,A=[];for(let h in n.attributes)if(n.attributes.hasOwnProperty(h)){let m=mce(h);c(m)&&i.accessors[n.attributes[h]].componentType===N.FLOAT&&(A.includes(m)||A.push(m))}let l={array:new Uint8Array(this._bufferViewTypedArray),bufferView:a,compressedAttributes:s,dequantizeInShader:!0,attributesToSkipTransform:A},f=db.decodeBufferView(l);if(!c(f))return!1;this._decodePromise=hce(this,f)};ru.prototype.unload=function(){c(this._bufferViewLoader)&&this._resourceCache.unload(this._bufferViewLoader),this._bufferViewLoader=void 0,this._bufferViewTypedArray=void 0,this._decodedData=void 0,this._gltf=void 0,this._primitive=void 0};var JS=ru;function pce(e){let t=e.uint8Array,n=e.format,i=e.request,o=e.flipY??!1,r=e.skipColorSpaceConversion??!1,a=new Blob([t],{type:n}),s;return ke.supportsImageBitmapOptions().then(function(A){return A?Promise.resolve(ke.createImageBitmapFromBlob(a,{flipY:o,premultiplyAlpha:!1,skipColorSpaceConversion:r})):(s=window.URL.createObjectURL(a),new ke({url:s,request:i}).fetchImage({flipY:o,skipColorSpaceConversion:r}))}).then(function(A){return c(s)&&window.URL.revokeObjectURL(s),A}).catch(function(A){return c(s)&&window.URL.revokeObjectURL(s),Promise.reject(A)})}var pU=pce;function Rl(e){e=e??k.EMPTY_OBJECT;let t=e.resourceCache,n=e.gltf,i=e.imageId,o=e.gltfResource,r=e.baseResource,a=e.cacheKey,s=n.images[i],A=s.bufferView,l=s.uri;this._resourceCache=t,this._gltfResource=o,this._baseResource=r,this._gltf=n,this._bufferViewId=A,this._uri=l,this._cacheKey=a,this._bufferViewLoader=void 0,this._image=void 0,this._mipLevels=void 0,this._state=Fe.UNLOADED,this._promise=void 0}c(Object.create)&&(Rl.prototype=Object.create(zn.prototype),Rl.prototype.constructor=Rl);Object.defineProperties(Rl.prototype,{cacheKey:{get:function(){return this._cacheKey}},image:{get:function(){return this._image}},mipLevels:{get:function(){return this._mipLevels}}});Rl.prototype.load=function(){return c(this._promise)?this._promise:c(this._bufferViewId)?(this._promise=gce(this),this._promise):(this._promise=Cce(this),this._promise)};function gU(e){let t;return Array.isArray(e)&&(t=e.slice(1,e.length).map(function(n){return n.bufferView}),e=e[0]),{image:e,mipLevels:t}}async function gce(e){e._state=Fe.LOADING;let t=e._resourceCache;try{let n=t.getBufferViewLoader({gltf:e._gltf,bufferViewId:e._bufferViewId,gltfResource:e._gltfResource,baseResource:e._baseResource});if(e._bufferViewLoader=n,await n.load(),e.isDestroyed())return;let i=n.typedArray,o=await Ece(i);if(e.isDestroyed())return;let r=gU(o);return e.unload(),e._image=r.image,e._mipLevels=r.mipLevels,e._state=Fe.READY,e}catch(n){return e.isDestroyed()?void 0:CU(e,n,"Failed to load embedded image")}}async function Cce(e){e._state=Fe.LOADING;let t=e._baseResource,n=e._uri,i=t.getDerivedResource({url:n});try{let o=await yce(i);if(e.isDestroyed())return;let r=gU(o);return e.unload(),e._image=r.image,e._mipLevels=r.mipLevels,e._state=Fe.READY,e}catch(o){return e.isDestroyed()?void 0:CU(e,o,`Failed to load image: ${n}`)}}function CU(e,t,n){return e.unload(),e._state=Fe.FAILED,Promise.reject(e.getError(n,t))}function _ce(e){let t=e.subarray(0,2),n=e.subarray(0,4),i=e.subarray(8,12);if(t[0]===255&&t[1]===216)return"image/jpeg";if(t[0]===137&&t[1]===80)return"image/png";if(t[0]===171&&t[1]===75)return"image/ktx2";if(n[0]===82&&n[1]===73&&n[2]===70&&n[3]===70&&i[0]===87&&i[1]===69&&i[2]===66&&i[3]===80)return"image/webp";throw new oe("Image format is not recognized")}async function Ece(e){let t=_ce(e);if(t==="image/ktx2"){let n=new Uint8Array(e);return dl(n)}return Rl._loadImageFromTypedArray({uint8Array:e,format:t,flipY:!1,skipColorSpaceConversion:!0})}var Ice=/(^data:image\/ktx2)|(\.ktx2$)/i;function yce(e){let t=e.getUrlComponent(!1,!0);return Ice.test(t)?dl(e):e.fetchImage({skipColorSpaceConversion:!0,preferImageBitmap:!0})}Rl.prototype.unload=function(){c(this._bufferViewLoader)&&!this._bufferViewLoader.isDestroyed()&&this._resourceCache.unload(this._bufferViewLoader),this._bufferViewLoader=void 0,this._uri=void 0,this._image=void 0,this._mipLevels=void 0,this._gltf=void 0};Rl._loadImageFromTypedArray=pU;var KS=Rl;var bce={TEXTURE:0,PROGRAM:1,BUFFER:2,NUMBER_OF_JOB_TYPES:3},wm=Object.freeze(bce);function au(e){e=e??k.EMPTY_OBJECT;let t=e.resourceCache,n=e.gltf,i=e.accessorId,o=e.gltfResource,r=e.baseResource,a=e.primitive,s=e.draco,A=e.cacheKey,l=e.asynchronous??!0,f=e.loadBuffer??!1,h=e.loadTypedArray??!1,m=n.accessors[i].componentType;this._resourceCache=t,this._gltfResource=o,this._baseResource=r,this._gltf=n,this._accessorId=i,this._indexDatatype=m,this._primitive=a,this._draco=s,this._cacheKey=A,this._asynchronous=l,this._loadBuffer=f,this._loadTypedArray=h,this._bufferViewLoader=void 0,this._dracoLoader=void 0,this._typedArray=void 0,this._buffer=void 0,this._state=Fe.UNLOADED,this._promise=void 0}c(Object.create)&&(au.prototype=Object.create(zn.prototype),au.prototype.constructor=au);Object.defineProperties(au.prototype,{cacheKey:{get:function(){return this._cacheKey}},buffer:{get:function(){return this._buffer}},typedArray:{get:function(){return this._typedArray}},indexDatatype:{get:function(){return this._indexDatatype}}});var Bce=new ZS;au.prototype.load=async function(){return c(this._promise)?this._promise:c(this._draco)?(this._promise=xce(this),this._promise):(this._promise=Tce(this),this._promise)};async function xce(e){e._state=Fe.LOADING;let t=e._resourceCache;try{let n=t.getDracoLoader({gltf:e._gltf,primitive:e._primitive,draco:e._draco,gltfResource:e._gltfResource,baseResource:e._baseResource});return e._dracoLoader=n,await n.load(),e.isDestroyed()?void 0:(e._state=Fe.LOADED,e)}catch(n){if(e.isDestroyed())return;XS(e,n)}}async function Tce(e){let t=e._gltf,n=e._accessorId,o=t.accessors[n].bufferView;e._state=Fe.LOADING;let r=e._resourceCache;try{let a=r.getBufferViewLoader({gltf:t,bufferViewId:o,gltfResource:e._gltfResource,baseResource:e._baseResource});if(e._bufferViewLoader=a,await a.load(),e.isDestroyed())return;let s=a.typedArray;return e._typedArray=Sce(e,s),e._state=Fe.PROCESSING,e}catch(a){if(e.isDestroyed())return;XS(e,a)}}function Sce(e,t){let n=e._gltf,i=e._accessorId,o=n.accessors[i],r=o.count,a=o.componentType,s=Be.getSizeInBytes(a),A=t.buffer,l=t.byteOffset+o.byteOffset;if(l%s!==0){let h=r*s,m=new Uint8Array(A,l,h);A=new Uint8Array(m).buffer,l=0,wr("index-buffer-unaligned",`The index array is not aligned to a ${s}-byte boundary.`)}let f;return a===Be.UNSIGNED_BYTE?f=new Uint8Array(A,l,r):a===Be.UNSIGNED_SHORT?f=new Uint16Array(A,l,r):a===Be.UNSIGNED_INT&&(f=new Uint32Array(A,l,r)),f}function XS(e,t){throw e.unload(),e._state=Fe.FAILED,e.getError("Failed to load index buffer",t)}function ZS(){this.typedArray=void 0,this.indexDatatype=void 0,this.context=void 0,this.buffer=void 0}ZS.prototype.set=function(e,t,n){this.typedArray=e,this.indexDatatype=t,this.context=n};ZS.prototype.execute=function(){this.buffer=_U(this.typedArray,this.indexDatatype,this.context)};function _U(e,t,n){let i=dt.createIndexBuffer({typedArray:e,context:n,usage:Me.STATIC_DRAW,indexDatatype:t});return i.vertexArrayDestroyable=!1,i}au.prototype.process=function(e){if(this._state===Fe.READY)return!0;if(this._state!==Fe.LOADED&&this._state!==Fe.PROCESSING)return!1;let t=this._typedArray,n=this._indexDatatype;if(c(this._dracoLoader))try{this._dracoLoader.process(e)&&(t=this._dracoLoader.decodedData.indices.typedArray,this._typedArray=t,n=N.fromTypedArray(t),this._indexDatatype=n)}catch(o){XS(this,o)}if(!c(t))return!1;let i;if(this._loadBuffer&&this._asynchronous){let o=Bce;if(o.set(t,n,e.context),!e.jobScheduler.execute(o,wm.BUFFER))return!1;i=o.buffer}else this._loadBuffer&&(i=_U(t,n,e.context));return this.unload(),this._buffer=i,this._typedArray=this._loadTypedArray?t:void 0,this._state=Fe.READY,this._resourceCache.statistics.addGeometryLoader(this),!0};au.prototype.unload=function(){c(this._buffer)&&this._buffer.destroy();let e=this._resourceCache;c(this._bufferViewLoader)&&!this._bufferViewLoader.isDestroyed()&&e.unload(this._bufferViewLoader),c(this._dracoLoader)&&e.unload(this._dracoLoader),this._bufferViewLoader=void 0,this._dracoLoader=void 0,this._typedArray=void 0,this._buffer=void 0,this._gltf=void 0,this._primitive=void 0};var $S=au;function wce(e,t,n){if(n=n??!1,n){let i=e.indexOf(t);if(i>-1)return i}return e.push(t),e.length-1}var fr=wce;function Dce(e,t){return c(e.extensionsUsed)&&e.extensionsUsed.indexOf(t)>=0}var so=Dce;function ht(){}ht.objectLegacy=function(e,t){if(c(e)){for(let n in e)if(Object.prototype.hasOwnProperty.call(e,n)){let i=e[n],o=t(i,n);if(c(o))return o}}};ht.object=function(e,t){if(c(e)){let n=e.length;for(let i=0;i<n;i++){let o=e[i],r=t(o,i);if(c(r))return r}}};ht.topLevel=function(e,t,n){let i=e[t];return c(i)&&!Array.isArray(i)?ht.objectLegacy(i,n):ht.object(i,n)};ht.accessor=function(e,t){return ht.topLevel(e,"accessors",t)};ht.accessorWithSemantic=function(e,t,n){let i={};return ht.mesh(e,function(o){return ht.meshPrimitive(o,function(r){let a=ht.meshPrimitiveAttribute(r,function(s,A){if(A.indexOf(t)===0&&!c(i[s])){i[s]=!0;let l=n(s);if(c(l))return l}});return c(a)?a:ht.meshPrimitiveTarget(r,function(s){return ht.meshPrimitiveTargetAttribute(s,function(A,l){if(l.indexOf(t)===0&&!c(i[A])){i[A]=!0;let f=n(A);if(c(f))return f}})})})})};ht.accessorContainingVertexAttributeData=function(e,t){let n={};return ht.mesh(e,function(i){return ht.meshPrimitive(i,function(o){let r=ht.meshPrimitiveAttribute(o,function(a){if(!c(n[a])){n[a]=!0;let s=t(a);if(c(s))return s}});return c(r)?r:ht.meshPrimitiveTarget(o,function(a){return ht.meshPrimitiveTargetAttribute(a,function(s){if(!c(n[s])){n[s]=!0;let A=t(s);if(c(A))return A}})})})})};ht.accessorContainingIndexData=function(e,t){let n={};return ht.mesh(e,function(i){return ht.meshPrimitive(i,function(o){let r=o.indices;if(c(r)&&!c(n[r])){n[r]=!0;let a=t(r);if(c(a))return a}})})};ht.animation=function(e,t){return ht.topLevel(e,"animations",t)};ht.animationChannel=function(e,t){let n=e.channels;return ht.object(n,t)};ht.animationSampler=function(e,t){let n=e.samplers;return ht.object(n,t)};ht.buffer=function(e,t){return ht.topLevel(e,"buffers",t)};ht.bufferView=function(e,t){return ht.topLevel(e,"bufferViews",t)};ht.camera=function(e,t){return ht.topLevel(e,"cameras",t)};ht.image=function(e,t){return ht.topLevel(e,"images",t)};ht.material=function(e,t){return ht.topLevel(e,"materials",t)};ht.materialValue=function(e,t){let n=e.values;c(e.extensions)&&c(e.extensions.KHR_techniques_webgl)&&(n=e.extensions.KHR_techniques_webgl.values);for(let i in n)if(Object.prototype.hasOwnProperty.call(n,i)){let o=t(n[i],i);if(c(o))return o}};ht.mesh=function(e,t){return ht.topLevel(e,"meshes",t)};ht.meshPrimitive=function(e,t){let n=e.primitives;if(c(n)){let i=n.length;for(let o=0;o<i;o++){let r=n[o],a=t(r,o);if(c(a))return a}}};ht.meshPrimitiveAttribute=function(e,t){let n=e.attributes;for(let i in n)if(Object.prototype.hasOwnProperty.call(n,i)){let o=t(n[i],i);if(c(o))return o}};ht.meshPrimitiveTarget=function(e,t){let n=e.targets;if(c(n)){let i=n.length;for(let o=0;o<i;++o){let r=t(n[o],o);if(c(r))return r}}};ht.meshPrimitiveTargetAttribute=function(e,t){for(let n in e)if(Object.prototype.hasOwnProperty.call(e,n)){let i=e[n],o=t(i,n);if(c(o))return o}};ht.node=function(e,t){return ht.topLevel(e,"nodes",t)};ht.nodeInTree=function(e,t,n){let i=e.nodes;if(c(i)){let o=t.length;for(let r=0;r<o;r++){let a=t[r],s=i[a];if(c(s)){let A=n(s,a);if(c(A))return A;let l=s.children;if(c(l)&&(A=ht.nodeInTree(e,l,n),c(A)))return A}}}};ht.nodeInScene=function(e,t,n){let i=t.nodes;if(c(i))return ht.nodeInTree(e,i,n)};ht.program=function(e,t){return so(e,"KHR_techniques_webgl")?ht.object(e.extensions.KHR_techniques_webgl.programs,t):ht.topLevel(e,"programs",t)};ht.sampler=function(e,t){return ht.topLevel(e,"samplers",t)};ht.scene=function(e,t){return ht.topLevel(e,"scenes",t)};ht.shader=function(e,t){return so(e,"KHR_techniques_webgl")?ht.object(e.extensions.KHR_techniques_webgl.shaders,t):ht.topLevel(e,"shaders",t)};ht.skin=function(e,t){return ht.topLevel(e,"skins",t)};ht.skinJoint=function(e,t){let n=e.joints;if(c(n)){let i=n.length;for(let o=0;o<i;o++){let r=n[o],a=t(r);if(c(a))return a}}};ht.techniqueAttribute=function(e,t){let n=e.attributes;for(let i in n)if(Object.prototype.hasOwnProperty.call(n,i)){let o=t(n[i],i);if(c(o))return o}};ht.techniqueUniform=function(e,t){let n=e.uniforms;for(let i in n)if(Object.prototype.hasOwnProperty.call(n,i)){let o=t(n[i],i);if(c(o))return o}};ht.techniqueParameter=function(e,t){let n=e.parameters;for(let i in n)if(Object.prototype.hasOwnProperty.call(n,i)){let o=t(n[i],i);if(c(o))return o}};ht.technique=function(e,t){return so(e,"KHR_techniques_webgl")?ht.object(e.extensions.KHR_techniques_webgl.techniques,t):ht.topLevel(e,"techniques",t)};ht.texture=function(e,t){return ht.topLevel(e,"textures",t)};var me=ht;function Qce(e){switch(e){case"SCALAR":return 1;case"VEC2":return 2;case"VEC3":return 3;case"VEC4":case"MAT2":return 4;case"MAT3":return 9;case"MAT4":return 16}}var wA=Qce;function Rce(e,t){let n=t.bufferView;if(c(n)){let i=e.bufferViews[n];if(c(i.byteStride)&&i.byteStride>0)return i.byteStride}return N.getSizeInBytes(t.componentType)*wA(t.type)}var wc=Rce;function vce(e){me.accessor(e,function(n){c(n.bufferView)&&(n.byteOffset=n.byteOffset??0)}),me.bufferView(e,function(n){c(n.buffer)&&(n.byteOffset=n.byteOffset??0)}),me.mesh(e,function(n){me.meshPrimitive(n,function(i){if(i.mode=i.mode??V.TRIANGLES,!c(i.material)){c(e.materials)||(e.materials=[]);let o={name:"default"};i.material=fr(e.materials,o)}})}),me.accessorContainingVertexAttributeData(e,function(n){let i=e.accessors[n],o=i.bufferView;if(i.normalized=i.normalized??!1,c(o)){let r=e.bufferViews[o];r.byteStride=wc(e,i),r.target=V.ARRAY_BUFFER}}),me.accessorContainingIndexData(e,function(n){let o=e.accessors[n].bufferView;if(c(o)){let r=e.bufferViews[o];r.target=V.ELEMENT_ARRAY_BUFFER}}),me.material(e,function(n){let i=n.extensions??{},o=i.KHR_materials_common;if(c(o)){let A=o.technique,l=c(o.values)?o.values:{};o.values=l,l.ambient=c(l.ambient)?l.ambient:[0,0,0,1],l.emission=c(l.emission)?l.emission:[0,0,0,1],l.transparency=l.transparency??1,A!=="CONSTANT"&&(l.diffuse=c(l.diffuse)?l.diffuse:[0,0,0,1],A!=="LAMBERT"&&(l.specular=c(l.specular)?l.specular:[0,0,0,1],l.shininess=l.shininess??0)),o.transparent=o.transparent??!1,o.doubleSided=o.doubleSided??!1;return}n.emissiveFactor=n.emissiveFactor??[0,0,0],n.alphaMode=n.alphaMode??"OPAQUE",n.doubleSided=n.doubleSided??!1,n.alphaMode==="MASK"&&(n.alphaCutoff=n.alphaCutoff??.5);let r=i.KHR_techniques_webgl;c(r)&&me.materialValue(n,function(A){c(A.index)&&qd(A)}),qd(n.emissiveTexture),qd(n.normalTexture),qd(n.occlusionTexture);let a=n.pbrMetallicRoughness;c(a)&&(a.baseColorFactor=a.baseColorFactor??[1,1,1,1],a.metallicFactor=a.metallicFactor??1,a.roughnessFactor=a.roughnessFactor??1,qd(a.baseColorTexture),qd(a.metallicRoughnessTexture));let s=i.KHR_materials_pbrSpecularGlossiness;c(s)&&(s.diffuseFactor=s.diffuseFactor??[1,1,1,1],s.specularFactor=s.specularFactor??[1,1,1],s.glossinessFactor=s.glossinessFactor??1,qd(s.specularGlossinessTexture))}),me.animation(e,function(n){me.animationSampler(n,function(i){i.interpolation=i.interpolation??"LINEAR"})});let t=Pce(e);return me.node(e,function(n,i){c(t[i])||c(n.translation)||c(n.rotation)||c(n.scale)?(n.translation=n.translation??[0,0,0],n.rotation=n.rotation??[0,0,0,1],n.scale=n.scale??[1,1,1]):n.matrix=n.matrix??[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}),me.sampler(e,function(n){n.wrapS=n.wrapS??V.REPEAT,n.wrapT=n.wrapT??V.REPEAT}),c(e.scenes)&&!c(e.scene)&&(e.scene=0),e}function Pce(e){let t={};return me.animation(e,function(n){me.animationChannel(n,function(i){let o=i.target,r=o.node,a=o.path;(a==="translation"||a==="rotation"||a==="scale")&&(t[r]=!0)})}),t}function qd(e){c(e)&&(e.texCoord=e.texCoord??0)}var EU=vce;function Mce(e){return me.shader(e,function(t){hb(t)}),me.buffer(e,function(t){hb(t)}),me.image(e,function(t){hb(t)}),hb(e),e}function hb(e){e.extras=c(e.extras)?e.extras:{},e.extras._pipeline=c(e.extras._pipeline)?e.extras._pipeline:{}}var WC=Mce;function Oce(e,t){let n=e.extensionsRequired;if(c(n)){let i=n.indexOf(t);i>=0&&n.splice(i,1),n.length===0&&delete e.extensionsRequired}}var IU=Oce;function Lce(e,t){let n=e.extensionsUsed;if(c(n)){let i=n.indexOf(t);i>=0&&n.splice(i,1),IU(e,t),n.length===0&&delete e.extensionsUsed}}var mb=Lce;var Nce=4;function Fce(e){if(Xf(e)!=="glTF")throw new oe("File is not valid binary glTF");let n=yU(e,0,5),i=n[1];if(i!==1&&i!==2)throw new oe("Binary glTF version is not 1 or 2");return i===1?kce(e,n):Uce(e,n)}function yU(e,t,n){let i=new DataView(e.buffer),o=new Array(n);for(let r=0;r<n;++r)o[r]=i.getUint32(e.byteOffset+t+r*Nce,!0);return o}function kce(e,t){let n=t[2],i=t[3];if(t[4]!==0)throw new oe("Binary glTF scene format is not JSON");let r=20,a=r+i,s=xc(e,r,i),A=JSON.parse(s);WC(A);let l=e.subarray(a,n),f=A.buffers;if(c(f)&&Object.keys(f).length>0){let h=f.binary_glTF??f.KHR_binary_glTF;c(h)&&(h.extras._pipeline.source=l,delete h.uri)}return mb(A,"KHR_binary_glTF"),A}function Uce(e,t){let n=t[2],i=12,o,r;for(;i<n;){let a=yU(e,i,2),s=a[0],A=a[1];i+=8;let l=e.subarray(i,i+s);if(i+=s,A===1313821514){let f=xc(l);o=JSON.parse(f),WC(o)}else A===5130562&&(r=l)}if(c(o)&&c(r)){let a=o.buffers;if(c(a)&&a.length>0){let s=a[0];s.extras._pipeline.source=r}}return o}var bU=Fce;function Gce(e){return me.shader(e,function(t){pb(t)}),me.buffer(e,function(t){pb(t)}),me.image(e,function(t){pb(t)}),pb(e),e}function pb(e){c(e.extras)&&(c(e.extras._pipeline)&&delete e.extras._pipeline,Object.keys(e.extras).length===0&&delete e.extras)}var BU=Gce;function zce(e,t){let n=e.extensionsUsed;c(n)||(n=[],e.extensionsUsed=n),fr(n,t,!0)}var vl=zce;function Hce(e){switch(e){case N.BYTE:return function(t,n,i,o,r){for(let a=0;a<i;++a)r[a]=t.getInt8(n+a*o)};case N.UNSIGNED_BYTE:return function(t,n,i,o,r){for(let a=0;a<i;++a)r[a]=t.getUint8(n+a*o)};case N.SHORT:return function(t,n,i,o,r){for(let a=0;a<i;++a)r[a]=t.getInt16(n+a*o,!0)};case N.UNSIGNED_SHORT:return function(t,n,i,o,r){for(let a=0;a<i;++a)r[a]=t.getUint16(n+a*o,!0)};case N.INT:return function(t,n,i,o,r){for(let a=0;a<i;++a)r[a]=t.getInt32(n+a*o,!0)};case N.UNSIGNED_INT:return function(t,n,i,o,r){for(let a=0;a<i;++a)r[a]=t.getUint32(n+a*o,!0)};case N.FLOAT:return function(t,n,i,o,r){for(let a=0;a<i;++a)r[a]=t.getFloat32(n+a*o,!0)};case N.DOUBLE:return function(t,n,i,o,r){for(let a=0;a<i;++a)r[a]=t.getFloat64(n+a*o,!0)}}}var Dm=Hce;function Vce(e,t){let n=e.bufferViews,i=e.buffers,o=t.bufferView,r=wA(t.type);if(!c(t.bufferView))return{min:new Array(r).fill(0),max:new Array(r).fill(0)};let a=new Array(r).fill(Number.POSITIVE_INFINITY),s=new Array(r).fill(Number.NEGATIVE_INFINITY),A=n[o],l=A.buffer,h=i[l].extras._pipeline.source,m=t.count,p=wc(e,t),g=t.byteOffset+A.byteOffset+h.byteOffset,C=t.componentType,_=N.getSizeInBytes(C),E=new DataView(h.buffer),I=new Array(r),y=Dm(C);for(let b=0;b<m;b++){y(E,g,r,_,I);for(let x=0;x<r;x++){let S=I[x];a[x]=Math.min(a[x],S),s[x]=Math.max(s[x],S)}g+=p}return{min:a,max:s}}var gb=Vce;var jce=[V.FUNC_ADD,V.FUNC_ADD],Yce=[V.ONE,V.ZERO,V.ONE,V.ZERO];function xU(e,t){let n=e.enable;return c(n)?n.indexOf(t)>-1:!1}var qce=[V.ZERO,V.ONE,V.SRC_COLOR,V.ONE_MINUS_SRC_COLOR,V.SRC_ALPHA,V.ONE_MINUS_SRC_ALPHA,V.DST_ALPHA,V.ONE_MINUS_DST_ALPHA,V.DST_COLOR,V.ONE_MINUS_DST_COLOR];function Wce(e,t){if(!c(e))return t;for(let n=0;n<4;n++)if(qce.indexOf(e[n])===-1)return t;return e}function Jce(e){let t={},n={},i=e.techniques;return c(i)&&(me.technique(e,function(o,r){let a=o.states;if(c(a)){let s=n[r]={};if(xU(a,V.BLEND)){s.alphaMode="BLEND";let A=a.functions;c(A)&&(c(A.blendEquationSeparate)||c(A.blendFuncSeparate))&&(t[r]={blendEquation:A.blendEquationSeparate??jce,blendFactors:Wce(A.blendFuncSeparate,Yce)})}xU(a,V.CULL_FACE)||(s.doubleSided=!0),delete o.states}}),Object.keys(t).length>0&&(c(e.extensions)||(e.extensions={}),vl(e,"KHR_blend")),me.material(e,function(o){if(c(o.technique)){let r=n[o.technique];me.objectLegacy(r,function(s,A){o[A]=s});let a=t[o.technique];c(a)&&(c(o.extensions)||(o.extensions={}),o.extensions.KHR_blend=a)}})),e}var TU=Jce;function Kce(e,t){let n=e.extensionsRequired;c(n)||(n=[],e.extensionsRequired=n),fr(n,t,!0),vl(e,t)}var SU=Kce;function Xce(e){let t=e.techniques,n={},i={},o={};if(c(t)){let r={programs:[],shaders:[],techniques:[]},a=e.glExtensionsUsed;delete e.glExtensionsUsed,me.technique(e,function(s,A){let l={name:s.name,program:void 0,attributes:{},uniforms:{}},f;if(me.techniqueAttribute(s,function(h,m){f=s.parameters[h],l.attributes[m]={semantic:f.semantic}}),me.techniqueUniform(s,function(h,m){f=s.parameters[h],l.uniforms[m]={count:f.count,node:f.node,type:f.type,semantic:f.semantic,value:f.value},c(n[A])||(n[A]={}),n[A][h]=m}),c(o[s.program]))l.program=o[s.program];else{let h=e.programs[s.program],m={name:h.name,fragmentShader:void 0,vertexShader:void 0,glExtensions:a},p=e.shaders[h.fragmentShader];m.fragmentShader=fr(r.shaders,p,!0);let g=e.shaders[h.vertexShader];m.vertexShader=fr(r.shaders,g,!0),l.program=fr(r.programs,m),o[s.program]=l.program}i[A]=fr(r.techniques,l)}),r.techniques.length>0&&(c(e.extensions)||(e.extensions={}),e.extensions.KHR_techniques_webgl=r,vl(e,"KHR_techniques_webgl"),SU(e,"KHR_techniques_webgl"))}return me.material(e,function(r){if(c(r.technique)){let a={technique:i[r.technique]};me.objectLegacy(r.values,function(s,A){c(a.values)||(a.values={});let l=n[r.technique][A];c(l)&&(a.values[l]=s)}),c(r.extensions)||(r.extensions={}),r.extensions.KHR_techniques_webgl=a}delete r.technique,delete r.values}),delete e.techniques,delete e.programs,delete e.shaders,e}var wU=Xce;function Zce(e,t){Ei.typeOf.object("material",e),Ei.defined("handler",t);let n=e.pbrMetallicRoughness;if(c(n)){if(c(n.baseColorTexture)){let r=n.baseColorTexture,a=t(r.index,r);if(c(a))return a}if(c(n.metallicRoughnessTexture)){let r=n.metallicRoughnessTexture,a=t(r.index,r);if(c(a))return a}}let{extensions:i}=e;if(c(i)){let r=i.KHR_materials_pbrSpecularGlossiness;if(c(r)){if(c(r.diffuseTexture)){let A=r.diffuseTexture,l=t(A.index,A);if(c(l))return l}if(c(r.specularGlossinessTexture)){let A=r.specularGlossinessTexture,l=t(A.index,A);if(c(l))return l}}let a=i.KHR_materials_specular;if(c(a)){let{specularTexture:A,specularColorTexture:l}=a;if(c(A)){let f=t(A.index,A);if(c(f))return f}if(c(l)){let f=t(l.index,l);if(c(f))return f}}let s=i.KHR_materials_common;if(c(s)&&c(s.values)){let{diffuse:A,ambient:l,emission:f,specular:h}=s.values;if(c(A)&&c(A.index)){let m=t(A.index,A);if(c(m))return m}if(c(l)&&c(l.index)){let m=t(l.index,l);if(c(m))return m}if(c(f)&&c(f.index)){let m=t(f.index,f);if(c(m))return m}if(c(h)&&c(h.index)){let m=t(h.index,h);if(c(m))return m}}}let o=me.materialValue(e,function(r){if(c(r.index)){let a=t(r.index,r);if(c(a))return a}});if(c(o))return o;if(c(e.emissiveTexture)){let r=e.emissiveTexture,a=t(r.index,r);if(c(a))return a}if(c(e.normalTexture)){let r=e.normalTexture,a=t(r.index,r);if(c(a))return a}if(c(e.occlusionTexture)){let r=e.occlusionTexture,a=t(r.index,r);if(c(a))return a}}var ew=Zce;var DU=["mesh","node","material","accessor","bufferView","buffer","texture","sampler","image"];function $ce(e,t){return t=t??DU,DU.forEach(function(n){t.indexOf(n)>-1&&tAe(e,n)}),e}var eAe={accessor:"accessors",buffer:"buffers",bufferView:"bufferViews",image:"images",node:"nodes",material:"materials",mesh:"meshes",sampler:"samplers",texture:"textures"};function tAe(e,t){let n=eAe[t],i=e[n];if(c(i)){let o=0,r=QA[t](e),a=i.length;for(let s=0;s<a;++s)r[s]||(DA[t](e,s-o),o++)}}function DA(){}DA.accessor=function(e,t){e.accessors.splice(t,1),me.mesh(e,function(i){me.meshPrimitive(i,function(o){me.meshPrimitiveAttribute(o,function(s,A){s>t&&o.attributes[A]--}),me.meshPrimitiveTarget(o,function(s){me.meshPrimitiveTargetAttribute(s,function(A,l){A>t&&s[l]--})});let r=o.indices;c(r)&&r>t&&o.indices--;let a=o.extensions;c(a)&&c(a.CESIUM_primitive_outline)&&a.CESIUM_primitive_outline.indices>t&&--a.CESIUM_primitive_outline.indices})}),me.skin(e,function(i){c(i.inverseBindMatrices)&&i.inverseBindMatrices>t&&i.inverseBindMatrices--}),me.animation(e,function(i){me.animationSampler(i,function(o){c(o.input)&&o.input>t&&o.input--,c(o.output)&&o.output>t&&o.output--})})};DA.buffer=function(e,t){e.buffers.splice(t,1),me.bufferView(e,function(i){c(i.buffer)&&i.buffer>t&&i.buffer--,c(i.extensions)&&c(i.extensions.EXT_meshopt_compression)&&i.extensions.EXT_meshopt_compression.buffer--})};DA.bufferView=function(e,t){if(e.bufferViews.splice(t,1),me.accessor(e,function(i){c(i.bufferView)&&i.bufferView>t&&i.bufferView--}),me.shader(e,function(i){c(i.bufferView)&&i.bufferView>t&&i.bufferView--}),me.image(e,function(i){c(i.bufferView)&&i.bufferView>t&&i.bufferView--}),so(e,"KHR_draco_mesh_compression")&&me.mesh(e,function(i){me.meshPrimitive(i,function(o){c(o.extensions)&&c(o.extensions.KHR_draco_mesh_compression)&&o.extensions.KHR_draco_mesh_compression.bufferView>t&&o.extensions.KHR_draco_mesh_compression.bufferView--})}),so(e,"EXT_feature_metadata")){let o=e.extensions.EXT_feature_metadata.featureTables;for(let r in o)if(o.hasOwnProperty(r)){let s=o[r].properties;if(c(s)){for(let A in s)if(s.hasOwnProperty(A)){let l=s[A];c(l.bufferView)&&l.bufferView>t&&l.bufferView--,c(l.arrayOffsetBufferView)&&l.arrayOffsetBufferView>t&&l.arrayOffsetBufferView--,c(l.stringOffsetBufferView)&&l.stringOffsetBufferView>t&&l.stringOffsetBufferView--}}}}if(so(e,"EXT_structural_metadata")){let o=e.extensions.EXT_structural_metadata.propertyTables;if(c(o)){let r=o.length;for(let a=0;a<r;++a){let A=o[a].properties;for(let l in A)if(A.hasOwnProperty(l)){let f=A[l];c(f.values)&&f.values>t&&f.values--,c(f.arrayOffsets)&&f.arrayOffsets>t&&f.arrayOffsets--,c(f.stringOffsets)&&f.stringOffsets>t&&f.stringOffsets--}}}}};DA.image=function(e,t){e.images.splice(t,1),me.texture(e,function(i){c(i.source)&&i.source>t&&--i.source;let o=i.extensions;c(o)&&c(o.EXT_texture_webp)&&o.EXT_texture_webp.source>t?--i.extensions.EXT_texture_webp.source:c(o)&&c(o.KHR_texture_basisu)&&o.KHR_texture_basisu.source>t&&--i.extensions.KHR_texture_basisu.source})};DA.mesh=function(e,t){e.meshes.splice(t,1),me.node(e,function(i){c(i.mesh)&&(i.mesh>t?i.mesh--:i.mesh===t&&delete i.mesh)})};DA.node=function(e,t){e.nodes.splice(t,1),me.skin(e,function(i){c(i.skeleton)&&i.skeleton>t&&i.skeleton--,i.joints=i.joints.map(function(o){return o>t?o-1:o})}),me.animation(e,function(i){me.animationChannel(i,function(o){c(o.target)&&c(o.target.node)&&o.target.node>t&&o.target.node--})}),me.technique(e,function(i){me.techniqueUniform(i,function(o){c(o.node)&&o.node>t&&o.node--})}),me.node(e,function(i){c(i.children)&&(i.children=i.children.filter(function(o){return o!==t}).map(function(o){return o>t?o-1:o}))}),me.scene(e,function(i){i.nodes=i.nodes.filter(function(o){return o!==t}).map(function(o){return o>t?o-1:o})})};DA.material=function(e,t){e.materials.splice(t,1),me.mesh(e,function(i){me.meshPrimitive(i,function(o){c(o.material)&&o.material>t&&o.material--})})};DA.sampler=function(e,t){e.samplers.splice(t,1),me.texture(e,function(i){c(i.sampler)&&i.sampler>t&&--i.sampler})};DA.texture=function(e,t){if(e.textures.splice(t,1),me.material(e,function(i){ew(i,function(o,r){r.index>t&&--r.index})}),so(e,"EXT_feature_metadata")){me.mesh(e,function(r){me.meshPrimitive(r,function(a){let s=a.extensions;if(c(s)&&c(s.EXT_feature_metadata)){let l=s.EXT_feature_metadata.featureIdTextures;if(c(l)){let f=l.length;for(let h=0;h<f;++h){let p=l[h].featureIds.texture;p.index>t&&--p.index}}}})});let o=e.extensions.EXT_feature_metadata.featureTextures;for(let r in o)if(o.hasOwnProperty(r)){let s=o[r].properties;if(c(s)){for(let A in s)if(s.hasOwnProperty(A)){let f=s[A].texture;f.index>t&&--f.index}}}}if(so(e,"EXT_mesh_features")&&me.mesh(e,function(i){me.meshPrimitive(i,function(o){let r=o.extensions;if(c(r)&&c(r.EXT_mesh_features)){let s=r.EXT_mesh_features.featureIds;if(c(s)){let A=s.length;for(let l=0;l<A;++l){let f=s[l];c(f.texture)&&f.texture.index>t&&--f.texture.index}}}})}),so(e,"EXT_structural_metadata")){let o=e.extensions.EXT_structural_metadata.propertyTextures;if(c(o)){let r=o.length;for(let a=0;a<r;++a){let A=o[a].properties;for(let l in A)if(A.hasOwnProperty(l)){let f=A[l];f.index>t&&--f.index}}}}};function QA(){}QA.accessor=function(e){let t={};return me.mesh(e,function(n){me.meshPrimitive(n,function(i){me.meshPrimitiveAttribute(i,function(r){t[r]=!0}),me.meshPrimitiveTarget(i,function(r){me.meshPrimitiveTargetAttribute(r,function(a){t[a]=!0})});let o=i.indices;c(o)&&(t[o]=!0)})}),me.skin(e,function(n){c(n.inverseBindMatrices)&&(t[n.inverseBindMatrices]=!0)}),me.animation(e,function(n){me.animationSampler(n,function(i){c(i.input)&&(t[i.input]=!0),c(i.output)&&(t[i.output]=!0)})}),so(e,"EXT_mesh_gpu_instancing")&&me.node(e,function(n){c(n.extensions)&&c(n.extensions.EXT_mesh_gpu_instancing)&&Object.keys(n.extensions.EXT_mesh_gpu_instancing.attributes).forEach(function(i){let o=n.extensions.EXT_mesh_gpu_instancing.attributes[i];t[o]=!0})}),so(e,"CESIUM_primitive_outline")&&me.mesh(e,function(n){me.meshPrimitive(n,function(i){let o=i.extensions;if(c(o)&&c(o.CESIUM_primitive_outline)){let a=o.CESIUM_primitive_outline.indices;c(a)&&(t[a]=!0)}})}),t};QA.buffer=function(e){let t={};return me.bufferView(e,function(n){c(n.buffer)&&(t[n.buffer]=!0),c(n.extensions)&&c(n.extensions.EXT_meshopt_compression)&&(t[n.extensions.EXT_meshopt_compression.buffer]=!0)}),t};QA.bufferView=function(e){let t={};if(me.accessor(e,function(n){c(n.bufferView)&&(t[n.bufferView]=!0)}),me.shader(e,function(n){c(n.bufferView)&&(t[n.bufferView]=!0)}),me.image(e,function(n){c(n.bufferView)&&(t[n.bufferView]=!0)}),so(e,"KHR_draco_mesh_compression")&&me.mesh(e,function(n){me.meshPrimitive(n,function(i){c(i.extensions)&&c(i.extensions.KHR_draco_mesh_compression)&&(t[i.extensions.KHR_draco_mesh_compression.bufferView]=!0)})}),so(e,"EXT_feature_metadata")){let i=e.extensions.EXT_feature_metadata.featureTables;for(let o in i)if(i.hasOwnProperty(o)){let a=i[o].properties;if(c(a)){for(let s in a)if(a.hasOwnProperty(s)){let A=a[s];c(A.bufferView)&&(t[A.bufferView]=!0),c(A.arrayOffsetBufferView)&&(t[A.arrayOffsetBufferView]=!0),c(A.stringOffsetBufferView)&&(t[A.stringOffsetBufferView]=!0)}}}}if(so(e,"EXT_structural_metadata")){let i=e.extensions.EXT_structural_metadata.propertyTables;if(c(i)){let o=i.length;for(let r=0;r<o;++r){let s=i[r].properties;for(let A in s)if(s.hasOwnProperty(A)){let l=s[A];c(l.values)&&(t[l.values]=!0),c(l.arrayOffsets)&&(t[l.arrayOffsets]=!0),c(l.stringOffsets)&&(t[l.stringOffsets]=!0)}}}}return t};QA.image=function(e){let t={};return me.texture(e,function(n){c(n.source)&&(t[n.source]=!0),c(n.extensions)&&c(n.extensions.EXT_texture_webp)?t[n.extensions.EXT_texture_webp.source]=!0:c(n.extensions)&&c(n.extensions.KHR_texture_basisu)&&(t[n.extensions.KHR_texture_basisu.source]=!0)}),t};QA.mesh=function(e){let t={};return me.node(e,function(n){if(c(n.mesh&&c(e.meshes))){let i=e.meshes[n.mesh];c(i)&&c(i.primitives)&&i.primitives.length>0&&(t[n.mesh]=!0)}}),t};function QU(e,t,n){let i=e.nodes[t];return c(i.mesh)||c(i.camera)||c(i.skin)||c(i.weights)||c(i.extras)||c(i.extensions)&&Object.keys(i.extensions).length!==0||c(n[t])?!1:!c(i.children)||i.children.filter(function(o){return!QU(e,o,n)}).length===0}QA.node=function(e){let t={};return me.skin(e,function(n){c(n.skeleton)&&(t[n.skeleton]=!0),me.skinJoint(n,function(i){t[i]=!0})}),me.animation(e,function(n){me.animationChannel(n,function(i){c(i.target)&&c(i.target.node)&&(t[i.target.node]=!0)})}),me.technique(e,function(n){me.techniqueUniform(n,function(i){c(i.node)&&(t[i.node]=!0)})}),me.node(e,function(n,i){QU(e,i,t)||(t[i]=!0)}),t};QA.material=function(e){let t={};return me.mesh(e,function(n){me.meshPrimitive(n,function(i){c(i.material)&&(t[i.material]=!0)})}),t};QA.texture=function(e){let t={};if(me.material(e,function(n){ew(n,function(i){t[i]=!0})}),so(e,"EXT_feature_metadata")){me.mesh(e,function(o){me.meshPrimitive(o,function(r){let a=r.extensions;if(c(a)&&c(a.EXT_feature_metadata)){let A=a.EXT_feature_metadata.featureIdTextures;if(c(A)){let l=A.length;for(let f=0;f<l;++f){let m=A[f].featureIds.texture;t[m.index]=!0}}}})});let i=e.extensions.EXT_feature_metadata.featureTextures;for(let o in i)if(i.hasOwnProperty(o)){let a=i[o].properties;if(c(a)){for(let s in a)if(a.hasOwnProperty(s)){let l=a[s].texture;t[l.index]=!0}}}}if(so(e,"EXT_mesh_features")&&me.mesh(e,function(n){me.meshPrimitive(n,function(i){let o=i.extensions;if(c(o)&&c(o.EXT_mesh_features)){let a=o.EXT_mesh_features.featureIds;if(c(a)){let s=a.length;for(let A=0;A<s;++A){let l=a[A];c(l.texture)&&(t[l.texture.index]=!0)}}}})}),so(e,"EXT_structural_metadata")){let i=e.extensions.EXT_structural_metadata.propertyTextures;if(c(i)){let o=i.length;for(let r=0;r<o;++r){let s=i[r].properties;for(let A in s)if(s.hasOwnProperty(A)){let l=s[A];t[l.index]=!0}}}}return t};QA.sampler=function(e){let t={};return me.texture(e,function(n){c(n.sampler)&&(t[n.sampler]=!0)}),t};var RU=$ce;function nAe(e,t){let n={byteLength:t.length,extras:{_pipeline:{source:t}}},o={buffer:fr(e.buffers,n),byteOffset:0,byteLength:t.length};return fr(e.bufferViews,o)}var vU=nAe;function iAe(e,t){let n=wc(e,t),i=N.getSizeInBytes(t.componentType),o=wA(t.type),r=t.count,a=new Array(o*r);if(!c(t.bufferView))return a.fill(0);let s=e.bufferViews[t.bufferView],A=e.buffers[s.buffer].extras._pipeline.source,l=t.byteOffset+s.byteOffset+A.byteOffset,f=new DataView(A.buffer),h=new Array(o),m=Dm(t.componentType);for(let p=0;p<r;++p){m(f,l,o,i,h);for(let g=0;g<o;++g)a[p*o+g]=h[g];l+=n}return a}var PU=iAe;function oAe(e){let t;return me.accessorWithSemantic(e,"JOINTS_0",function(n){let i=e.accessors[n];t=i.componentType,t===V.BYTE?Cb(e,i,N.UNSIGNED_BYTE):t!==V.UNSIGNED_BYTE&&t!==V.UNSIGNED_SHORT&&Cb(e,i,N.UNSIGNED_SHORT)}),me.accessorWithSemantic(e,"WEIGHTS_0",function(n){let i=e.accessors[n];t=i.componentType,t===V.BYTE?Cb(e,i,N.UNSIGNED_BYTE):t===V.SHORT&&Cb(e,i,N.UNSIGNED_SHORT)}),e}function Cb(e,t,n){let i=N.createTypedArray(n,PU(e,t)),o=new Uint8Array(i.buffer);t.bufferView=vU(e,o),t.componentType=n,t.byteOffset=0}var MU=oAe;function rAe(e,t){return mb(e,t),t==="CESIUM_RTC"&&aAe(e),tw(e,t)}function aAe(e){me.technique(e,function(t){me.techniqueUniform(t,function(n){n.semantic==="CESIUM_RTC_MODELVIEW"&&(n.semantic="MODELVIEW")})})}function tw(e,t){if(Array.isArray(e)){let n=e.length;for(let i=0;i<n;++i)tw(e[i],t)}else if(e!==null&&typeof e=="object"&&e.constructor===Object){let n=e.extensions,i;c(n)&&(i=n[t],c(i)&&(delete n[t],Object.keys(n).length===0&&delete e.extensions));for(let o in e)Object.prototype.hasOwnProperty.call(e,o)&&tw(e[o],t);return i}}var _b=rAe;var Eb={.8:uAe,"1.0":PAe,"2.0":void 0};function sAe(e,t){t=t??{};let n=t.targetVersion,i=e.version;e.asset=e.asset??{version:"1.0"},e.asset.version=e.asset.version??"1.0",i=(i??e.asset.version).toString(),Object.prototype.hasOwnProperty.call(Eb,i)||(c(i)&&(i=i.substring(0,3)),Object.prototype.hasOwnProperty.call(Eb,i)||(i="1.0"));let o=Eb[i];for(;c(o)&&i!==n;)o(e,t),i=e.asset.version,o=Eb[i];return t.keepLegacyExtensions||(LAe(e,t),NAe(e)),e}function NU(e){let t=e.materials;for(let n in t)if(Object.prototype.hasOwnProperty.call(t,n)){let i=t[n],o=i.instanceTechnique;c(o)&&(i.technique=o.technique,i.values=o.values,delete i.instanceTechnique)}}function cAe(e){let t=e.meshes;for(let n in t)if(Object.prototype.hasOwnProperty.call(t,n)){let o=t[n].primitives;if(c(o)){let r=o.length;for(let a=0;a<r;++a){let s=o[a],A=s.primitive??V.TRIANGLES;s.mode=s.mode??A,delete s.primitive}}}}function AAe(e){let t=e.nodes,n=new u,i=new qe;for(let o in t)if(Object.prototype.hasOwnProperty.call(t,o)){let r=t[o];if(c(r.rotation)){let s=r.rotation;u.fromArray(s,0,n),qe.fromAxisAngle(n,s[3],i),r.rotation=[i.x,i.y,i.z,i.w]}let a=r.instanceSkin;c(a)&&(r.skeletons=a.skeletons,r.skin=a.skin,r.meshes=a.meshes,delete r.instanceSkin)}}function lAe(e){let t=e.animations,n=e.accessors,i=e.bufferViews,o=e.buffers,r={},a=new u,s=new qe;for(let A in t)if(Object.prototype.hasOwnProperty.call(t,A)){let l=t[A],f=l.channels,h=l.parameters,m=l.samplers;if(c(f)){let p=f.length;for(let g=0;g<p;++g){let C=f[g];if(C.target.path==="rotation"){let _=h[m[C.sampler].output];if(c(r[_]))continue;r[_]=!0;let E=n[_],I=i[E.bufferView],b=o[I.buffer].extras._pipeline.source,x=b.byteOffset+I.byteOffset+E.byteOffset,S=E.componentType,P=E.count,D=wA(E.type),Q=E.count*D,v=N.createArrayBufferView(S,b.buffer,x,Q);for(let d=0;d<P;d++){let B=d*D;u.unpack(v,B,a);let T=v[B+3];qe.fromAxisAngle(a,T,s),qe.pack(s,v,B)}}}}}}function fAe(e){let t=e.techniques;for(let n in t)if(Object.prototype.hasOwnProperty.call(t,n)){let i=t[n],o=i.passes;if(c(o)){let r=i.pass??"defaultPass";if(Object.prototype.hasOwnProperty.call(o,r)){let a=o[r],s=a.instanceProgram;i.attributes=i.attributes??s.attributes,i.program=i.program??s.program,i.uniforms=i.uniforms??s.uniforms,i.states=i.states??a.states}delete i.passes,delete i.pass}}}function uAe(e){c(e.asset)||(e.asset={});let t=e.asset;if(t.version="1.0",typeof t.profile=="string"){let n=t.profile.split(" ");t.profile={api:n[0],version:n[1]}}else t.profile={};if(c(e.version)&&delete e.version,NU(e),cAe(e),AAe(e),lAe(e),fAe(e),c(e.allExtensions)&&(e.extensionsUsed=e.allExtensions,delete e.allExtensions),c(e.lights)){let n=e.extensions??{};e.extensions=n;let i=n.KHR_materials_common??{};n.KHR_materials_common=i,i.lights=e.lights,delete e.lights,vl(e,"KHR_materials_common")}}function dAe(e){let t=e.animations;for(let n in t)if(Object.prototype.hasOwnProperty.call(t,n)){let i=t[n],o=i.parameters;if(c(o)){let r=i.samplers;for(let a in r)if(Object.prototype.hasOwnProperty.call(r,a)){let s=r[a];s.input=o[s.input],s.output=o[s.output]}delete i.parameters}}}function OU(e,t){let n=[];for(let i in e)if(Object.prototype.hasOwnProperty.call(e,i)){let o=e[i];t[i]=n.length,n.push(o),c(o.name)||(o.name=i)}return n}function hAe(e){let t,n={accessors:{},animations:{},buffers:{},bufferViews:{},cameras:{},images:{},materials:{},meshes:{},nodes:{},programs:{},samplers:{},scenes:{},shaders:{},skins:{},textures:{},techniques:{}},i,o={},r=e.nodes;for(let a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i=r[a].jointName,c(i)&&(o[i]=a));for(let a in e)if(Object.prototype.hasOwnProperty.call(e,a)&&c(n[a])){let s={},A=e[a];e[a]=OU(A,s),n[a]=s}for(i in o)Object.prototype.hasOwnProperty.call(o,i)&&(o[i]=n.nodes[o[i]]);c(e.scene)&&(e.scene=n.scenes[e.scene]),me.bufferView(e,function(a){c(a.buffer)&&(a.buffer=n.buffers[a.buffer])}),me.accessor(e,function(a){c(a.bufferView)&&(a.bufferView=n.bufferViews[a.bufferView])}),me.shader(e,function(a){let s=a.extensions;if(c(s)){let A=s.KHR_binary_glTF;c(A)&&(a.bufferView=n.bufferViews[A.bufferView],delete s.KHR_binary_glTF),Object.keys(s).length===0&&delete a.extensions}}),me.program(e,function(a){c(a.vertexShader)&&(a.vertexShader=n.shaders[a.vertexShader]),c(a.fragmentShader)&&(a.fragmentShader=n.shaders[a.fragmentShader])}),me.technique(e,function(a){c(a.program)&&(a.program=n.programs[a.program]),me.techniqueParameter(a,function(s){c(s.node)&&(s.node=n.nodes[s.node]);let A=s.value;typeof A=="string"&&(s.value={index:n.textures[A]})})}),me.mesh(e,function(a){me.meshPrimitive(a,function(s){c(s.indices)&&(s.indices=n.accessors[s.indices]),me.meshPrimitiveAttribute(s,function(A,l){s.attributes[l]=n.accessors[A]}),c(s.material)&&(s.material=n.materials[s.material])})}),me.node(e,function(a){let s=a.children;if(c(s)){let A=s.length;for(t=0;t<A;++t)s[t]=n.nodes[s[t]]}if(c(a.meshes)){let A=a.meshes,l=A.length;if(l>0)for(a.mesh=n.meshes[A[0]],t=1;t<l;++t){let f={mesh:n.meshes[A[t]]},h=fr(e.nodes,f);c(s)||(s=[],a.children=s),s.push(h)}delete a.meshes}if(c(a.camera)&&(a.camera=n.cameras[a.camera]),c(a.skin)&&(a.skin=n.skins[a.skin]),c(a.skeletons)){let A=a.skeletons;if(A.length>0&&c(a.skin)){let f=e.skins[a.skin];f.skeleton=n.nodes[A[0]]}delete a.skeletons}c(a.jointName)&&delete a.jointName}),me.skin(e,function(a){c(a.inverseBindMatrices)&&(a.inverseBindMatrices=n.accessors[a.inverseBindMatrices]);let s=a.jointNames;if(c(s)){let A=[],l=s.length;for(t=0;t<l;++t)A[t]=o[s[t]];a.joints=A,delete a.jointNames}}),me.scene(e,function(a){let s=a.nodes;if(c(s)){let A=s.length;for(t=0;t<A;++t)s[t]=n.nodes[s[t]]}}),me.animation(e,function(a){let s={};a.samplers=OU(a.samplers,s),me.animationSampler(a,function(A){A.input=n.accessors[A.input],A.output=n.accessors[A.output]}),me.animationChannel(a,function(A){A.sampler=s[A.sampler];let l=A.target;c(l)&&(l.node=n.nodes[l.id],delete l.id)})}),me.material(e,function(a){c(a.technique)&&(a.technique=n.techniques[a.technique]),me.materialValue(a,function(A,l){typeof A=="string"&&(a.values[l]={index:n.textures[A]})});let s=a.extensions;if(c(s)){let A=s.KHR_materials_common;c(A)&&c(A.values)&&me.materialValue(A,function(l,f){typeof l=="string"&&(A.values[f]={index:n.textures[l]})})}}),me.image(e,function(a){let s=a.extensions;if(c(s)){let A=s.KHR_binary_glTF;c(A)&&(a.bufferView=n.bufferViews[A.bufferView],a.mimeType=A.mimeType,delete s.KHR_binary_glTF),Object.keys(s).length===0&&delete a.extensions}}),me.texture(e,function(a){c(a.sampler)&&(a.sampler=n.samplers[a.sampler]),c(a.source)&&(a.source=n.images[a.source])})}function mAe(e){me.animation(e,function(t){me.animationSampler(t,function(n){delete n.name})})}function pAe(e){for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t)){let n=e[t];Array.isArray(n)&&n.length===0&&delete e[t]}me.node(e,function(t){c(t.children)&&t.children.length===0&&delete t.children})}function gAe(e){let t=e.asset;delete t.profile,delete t.premultipliedAlpha}var CAe={CESIUM_RTC:!0,KHR_materials_common:!0,WEB3D_quantized_attributes:!0};function _Ae(e){let t=e.extensionsUsed;if(e.extensionsRequired=e.extensionsRequired??[],c(t)){let n=t.length;for(let i=0;i<n;++i){let o=t[i];c(CAe[o])&&e.extensionsRequired.push(o)}}}function EAe(e){me.buffer(e,function(t){delete t.type})}function IAe(e){me.texture(e,function(t){delete t.format,delete t.internalFormat,delete t.target,delete t.type})}function yAe(e){me.mesh(e,function(t){me.meshPrimitive(t,function(n){me.meshPrimitiveAttribute(n,function(i,o){o==="TEXCOORD"?n.attributes.TEXCOORD_0=i:o==="COLOR"&&(n.attributes.COLOR_0=i)}),delete n.attributes.TEXCOORD,delete n.attributes.COLOR})}),me.technique(e,function(t){me.techniqueParameter(t,function(n){let i=n.semantic;c(i)&&(i==="TEXCOORD"?n.semantic="TEXCOORD_0":i==="COLOR"&&(n.semantic="COLOR_0"))})})}var bAe={POSITION:!0,NORMAL:!0,TANGENT:!0},BAe={COLOR:"COLOR",JOINT:"JOINTS",JOINTS:"JOINTS",TEXCOORD:"TEXCOORD",WEIGHT:"WEIGHTS",WEIGHTS:"WEIGHTS"};function xAe(e){let t={};me.mesh(e,function(n){me.meshPrimitive(n,function(i){me.meshPrimitiveAttribute(i,function(o,r){if(r.charAt(0)!=="_"){let a=r.search(/_[0-9]+/g),s=r,A="_0";a>=0&&(s=r.substring(0,a),A=r.substring(a));let l,f=BAe[s];c(f)?(l=f+A,t[r]=l):c(bAe[s])||(l=`_${r}`,t[r]=l)}});for(let o in t)if(Object.prototype.hasOwnProperty.call(t,o)){let r=t[o],a=i.attributes[o];c(a)&&(delete i.attributes[o],i.attributes[r]=a)}})}),me.technique(e,function(n){me.techniqueParameter(n,function(i){let o=t[i.semantic];c(o)&&(i.semantic=o)})})}function TAe(e){me.camera(e,function(t){let n=t.perspective;if(c(n)){let i=n.aspectRatio;c(i)&&i===0&&delete n.aspectRatio;let o=n.yfov;c(o)&&o===0&&(n.yfov=1)}})}function iw(e,t){return c(t.byteStride)&&t.byteStride!==0?t.byteStride:wc(e,t)}function SAe(e){me.buffer(e,function(t){c(t.byteLength)||(t.byteLength=t.extras._pipeline.source.length)}),me.accessor(e,function(t){let n=t.bufferView;if(c(n)){let i=e.bufferViews[n],o=iw(e,t),r=t.byteOffset+t.count*o;i.byteLength=Math.max(i.byteLength??0,r)}})}function wAe(e){let t,n,i,o=e.bufferViews,r={};me.accessorContainingVertexAttributeData(e,function(s){let A=e.accessors[s];c(A.bufferView)&&(r[A.bufferView]=!0)});let a={};me.accessor(e,function(s){c(s.bufferView)&&(a[s.bufferView]=a[s.bufferView]??[],a[s.bufferView].push(s))});for(let s in a)if(Object.prototype.hasOwnProperty.call(a,s)){i=o[s];let A=a[s];A.sort(function(m,p){return m.byteOffset-p.byteOffset});let l=0,f=0,h=A.length;for(t=0;t<h;++t){let m=A[t],p=iw(e,m),g=m.byteOffset,C=m.count*p;delete m.byteStride;let _=t<h-1,E=_?iw(e,A[t+1]):void 0;if(p!==E){let I=Ne(i,!0);r[s]&&(I.byteStride=p),I.byteOffset+=l,I.byteLength=g+C-l;let y=fr(o,I);for(n=f;n<=t;++n)m=A[n],m.bufferView=y,m.byteOffset=m.byteOffset-l;l=_?A[t+1].byteOffset:void 0,f=t+1}}}RU(e,["accessor","bufferView","buffer"])}function DAe(e){me.accessorWithSemantic(e,"POSITION",function(t){let n=e.accessors[t];if(!c(n.min)||!c(n.max)){let i=gb(e,n);n.min=i.min,n.max=i.max}})}function FU(e){return(!c(e.children)||e.children.length===0)&&(!c(e.meshes)||e.meshes.length===0)&&!c(e.camera)&&!c(e.skin)&&!c(e.skeletons)&&!c(e.jointName)&&(!c(e.translation)||u.fromArray(e.translation).equals(u.ZERO))&&(!c(e.scale)||u.fromArray(e.scale).equals(new u(1,1,1)))&&(!c(e.rotation)||se.fromArray(e.rotation).equals(new se(0,0,0,1)))&&(!c(e.matrix)||O.fromColumnMajorArray(e.matrix).equals(O.IDENTITY))&&!c(e.extensions)&&!c(e.extras)}function kU(e,t){me.scene(e,function(n){let i=n.nodes;if(c(i)){let o=i.length;for(let r=o;r>=0;--r)if(i[r]===t){i.splice(r,1);return}}}),me.node(e,function(n,i){if(c(n.children)){let o=n.children.indexOf(t);o>-1&&(n.children.splice(o,1),FU(n)&&kU(e,i))}}),delete e.nodes[t]}function QAe(e){return me.node(e,function(t,n){FU(t)&&kU(e,n)}),e}function RAe(e){me.animation(e,function(t){me.animationSampler(t,function(n){let i=e.accessors[n.input];if(!c(i.min)||!c(i.max)){let o=gb(e,i);i.min=o.min,i.max=o.max}})})}function vAe(e){me.accessor(e,function(t){if(c(t.min)||c(t.max)){let n=gb(e,t);c(t.min)&&(t.min=n.min),c(t.max)&&(t.max=n.max)}})}function PAe(e){e.asset=e.asset??{},e.asset.version="2.0",NU(e),dAe(e),QAe(e),hAe(e),mAe(e),gAe(e),_Ae(e),SAe(e),wAe(e),DAe(e),RAe(e),vAe(e),EAe(e),IAe(e),yAe(e),xAe(e),MU(e),TAe(e),TU(e),wU(e),pAe(e)}var MAe=["u_tex","u_diffuse","u_emission","u_diffuse_tex"],OAe=["u_diffuse","u_diffuse_mat"];function ow(e){e.pbrMetallicRoughness=c(e.pbrMetallicRoughness)?e.pbrMetallicRoughness:{},e.pbrMetallicRoughness.roughnessFactor=1,e.pbrMetallicRoughness.metallicFactor=0}function rw(e){return c(e.index)}function aw(e){return Array.isArray(e)&&e.length===4}function UU(e){let t=new Array(4);t[3]=e[3];for(let n=0;n<3;n++){let i=e[n];i<=.04045?t[n]=e[n]*.07739938080495357:t[n]=Math.pow((i+.055)*.9478672985781991,2.4)}return t}function LAe(e,t){t=t??{};let n=t.baseColorTextureNames??MAe,i=t.baseColorFactorNames??OAe;me.material(e,function(o){me.materialValue(o,function(r,a){n.indexOf(a)!==-1&&rw(r)?(ow(o),o.pbrMetallicRoughness.baseColorTexture=r):i.indexOf(a)!==-1&&aw(r)&&(ow(o),o.pbrMetallicRoughness.baseColorFactor=UU(r))})}),_b(e,"KHR_techniques_webgl"),_b(e,"KHR_blend")}function nw(e,t){c(t)&&(aw(t)?e.pbrMetallicRoughness.baseColorFactor=UU(t):rw(t)&&(e.pbrMetallicRoughness.baseColorTexture=t))}function LU(e,t){c(t)&&(aw(t)?e.emissiveFactor=t.slice(0,3):rw(t)&&(e.emissiveTexture=t))}function NAe(e){me.material(e,function(t){let n=(t.extensions??{}).KHR_materials_common;if(!c(n))return;let i=n.values??{},o=i.ambient,r=i.diffuse,a=i.emission,s=i.transparency,A=n.doubleSided,l=n.transparent;ow(t),n.technique==="CONSTANT"?(vl(e,"KHR_materials_unlit"),t.extensions=c(t.extensions)?t.extensions:{},t.extensions.KHR_materials_unlit={},nw(t,a),nw(t,o)):(nw(t,r),LU(t,o),LU(t,a)),c(A)&&(t.doubleSided=A),c(s)&&(c(t.pbrMetallicRoughness.baseColorFactor)?t.pbrMetallicRoughness.baseColorFactor[3]*=s:t.pbrMetallicRoughness.baseColorFactor=[1,1,1,s]),c(l)&&(t.alphaMode=l?"BLEND":"OPAQUE")}),_b(e,"KHR_materials_common")}var GU=sAe;function Qr(){}Qr.getError=function(e,t,n){let i=`Failed to load ${e}: ${t}`;c(n)&&c(n.message)&&(i+=`
${n.message}`);let o=new oe(i);return c(n)&&(o.stack=`Original stack:
${n.stack}
Handler stack:
${o.stack}`),o};Qr.getNodeTransform=function(e){return c(e.matrix)?e.matrix:O.fromTranslationQuaternionRotationScale(c(e.translation)?e.translation:u.ZERO,c(e.rotation)?e.rotation:qe.IDENTITY,c(e.scale)?e.scale:u.ONE)};Qr.getAttributeBySemantic=function(e,t,n){let i=e.attributes,o=i.length;for(let r=0;r<o;++r){let a=i[r],s=c(n)?a.setIndex===n:!0;if(a.semantic===t&&s)return a}};Qr.getAttributeByName=function(e,t){let n=e.attributes,i=n.length;for(let o=0;o<i;++o){let r=n[o];if(r.name===t)return r}};Qr.getFeatureIdsByLabel=function(e,t){for(let n=0;n<e.length;n++){let i=e[n];if(i.positionalLabel===t||i.label===t)return i}};Qr.hasQuantizedAttributes=function(e){if(!c(e))return!1;for(let t=0;t<e.length;t++){let n=e[t];if(c(n.quantization))return!0}return!1};Qr.getAttributeInfo=function(e){let t=e.semantic,n=e.setIndex,i,o=!1;c(t)?(i=Pe.getVariableName(t,n),o=!0):(i=e.name,i=i.replace(/^_/,""),i=i.toLowerCase());let r=/^color_\d+$/.test(i),a=e.type,s=st.getGlslType(a);r&&(s="vec4");let A=c(e.quantization),l;return A&&(l=r?"vec4":st.getGlslType(e.quantization.type)),{attribute:e,isQuantized:A,variableName:i,hasSemantic:o,glslType:s,quantizedGlslType:l}};var FAe=new u,kAe=new u;Qr.getPositionMinMax=function(e,t,n){let i=Qr.getAttributeBySemantic(e,"POSITION"),o=i.max,r=i.min;return c(n)&&c(t)&&(r=u.add(r,t,kAe),o=u.add(o,n,FAe)),{min:r,max:o}};Qr.getAxisCorrectionMatrix=function(e,t,n){return n=O.clone(O.IDENTITY,n),e===fi.Y?n=O.clone(fi.Y_UP_TO_Z_UP,n):e===fi.X&&(n=O.clone(fi.X_UP_TO_Z_UP,n)),t===fi.Z&&(n=O.multiplyTransformation(n,fi.Z_UP_TO_X_UP,n)),n};var UAe=new J;Qr.getCullFace=function(e,t){if(!Ce.isTriangles(t))return No.BACK;let n=O.getMatrix3(e,UAe);return J.determinant(n)<0?No.FRONT:No.BACK};Qr.sanitizeGlslIdentifier=function(e){let t=e.replaceAll(/[^A-Za-z0-9]+/g,"_");return t=t.replace(/^gl_/,""),/^\d/.test(t)&&(t=`_${t}`),t};Qr.supportedExtensions={AGI_articulations:!0,CESIUM_primitive_outline:!0,CESIUM_RTC:!0,EXT_feature_metadata:!0,EXT_implicit_cylinder_region:!0,EXT_implicit_ellipsoid_region:!0,EXT_instance_features:!0,EXT_mesh_features:!0,EXT_mesh_gpu_instancing:!0,EXT_meshopt_compression:!0,EXT_primitive_voxels:!0,EXT_structural_metadata:!0,EXT_texture_webp:!0,KHR_blend:!0,KHR_draco_mesh_compression:!0,KHR_implicit_shapes:!0,KHR_materials_common:!0,KHR_materials_pbrSpecularGlossiness:!0,KHR_materials_specular:!0,KHR_materials_anisotropy:!0,KHR_materials_clearcoat:!0,KHR_materials_unlit:!0,KHR_mesh_quantization:!0,KHR_techniques_webgl:!0,KHR_texture_basisu:!0,KHR_texture_transform:!0,KHR_gaussian_splatting:!0,KHR_gaussian_splatting_compression_spz_2:!0,KHR_spz_gaussian_splats_compression:!0,WEB3D_quantized_attributes:!0};Qr.checkSupportedExtensions=function(e){let t=e.length;for(let n=0;n<t;n++){let i=e[n];if(!Qr.supportedExtensions[i])throw new oe(`Unsupported glTF Extension: ${i}`)}};var tt=Qr;function su(e){e=e??k.EMPTY_OBJECT;let t=e.resourceCache,n=e.gltfResource,i=e.baseResource,o=e.typedArray,r=e.gltfJson,a=e.cacheKey;this._resourceCache=t,this._gltfResource=n,this._baseResource=i,this._typedArray=o,this._gltfJson=r,this._cacheKey=a,this._gltf=void 0,this._bufferLoaders=[],this._state=Fe.UNLOADED,this._promise=void 0}c(Object.create)&&(su.prototype=Object.create(zn.prototype),su.prototype.constructor=su);Object.defineProperties(su.prototype,{cacheKey:{get:function(){return this._cacheKey}},gltf:{get:function(){return this._gltf}}});su.prototype.load=async function(){return c(this._promise)?this._promise:(this._state=Fe.LOADING,c(this._gltfJson)?(this._promise=zU(this,this._gltfJson),this._promise):c(this._typedArray)?(this._promise=HU(this,this._typedArray),this._promise):(this._promise=GAe(this),this._promise))};async function GAe(e){let t;try{let n=await e._fetchGltf();if(e.isDestroyed())return;t=new Uint8Array(n)}catch(n){if(e.isDestroyed())return;sw(e,n)}return HU(e,t)}function sw(e,t){e.unload(),e._state=Fe.FAILED;let n=`Failed to load glTF: ${e._gltfResource.url}`;throw e.getError(n,t)}async function zAe(e,t){if(c(t.asset)&&t.asset.version==="2.0"&&!so(t,"KHR_techniques_webgl")&&!so(t,"KHR_materials_common"))return Promise.resolve();let n=[];me.buffer(t,function(i){if(!c(i.extras._pipeline.source)&&c(i.uri)){let o=e._baseResource.getDerivedResource({url:i.uri}),a=e._resourceCache.getExternalBufferLoader({resource:o});e._bufferLoaders.push(a),n.push(a.load().then(function(){a.isDestroyed()||(i.extras._pipeline.source=a.typedArray)}))}}),await Promise.all(n),GU(t)}function HAe(e){let t=[];return me.buffer(e,function(n){let i=n.uri;!c(n.extras._pipeline.source)&&c(i)&&Jh(i)&&(delete n.uri,t.push(ke.fetchArrayBuffer(i).then(function(o){n.extras._pipeline.source=new Uint8Array(o)})))}),Promise.all(t)}function VAe(e,t){let n=[];return me.buffer(t,function(i,o){let r=i.extras._pipeline.source;if(c(r)&&!c(i.uri)){let s=e._resourceCache.getEmbeddedBufferLoader({parentResource:e._gltfResource,bufferId:o,typedArray:r});e._bufferLoaders.push(s),n.push(s.load())}}),Promise.all(n)}async function zU(e,t){try{WC(t),await HAe(t),await zAe(e,t),EU(t),await VAe(e,t),BU(t);let n=t.asset.version;if(n!=="1.0"&&n!=="2.0")throw new oe(`Unsupported glTF version: ${n}`);let i=t.extensionsRequired;return c(i)&&tt.checkSupportedExtensions(i),e._gltf=t,e._state=Fe.READY,e}catch(n){if(e.isDestroyed())return;sw(e,n)}}async function HU(e,t){let n;try{Xf(t)==="glTF"?n=bU(t):n=_o(t)}catch(i){if(e.isDestroyed())return;sw(e,i)}return zU(e,n)}su.prototype.unload=function(){let e=this._bufferLoaders,t=e.length;for(let n=0;n<t;++n)e[n]=!e[n].isDestroyed()&&this._resourceCache.unload(e[n]);this._bufferLoaders.length=0,this._gltf=void 0};su.prototype._fetchGltf=function(){return this._gltfResource.fetchArrayBuffer()};var cw=su;var jAe={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"},Wd=Object.freeze(jAe);var ui={};function YAe(){this.octEncoded=!1,this.octEncodedZXY=!1,this.normalizationRange=void 0,this.quantizedVolumeOffset=void 0,this.quantizedVolumeDimensions=void 0,this.quantizedVolumeStepSize=void 0,this.componentDatatype=void 0,this.type=void 0}function qAe(){this.name=void 0,this.semantic=void 0,this.setIndex=void 0,this.componentDatatype=void 0,this.type=void 0,this.normalized=!1,this.count=void 0,this.min=void 0,this.max=void 0,this.constant=void 0,this.quantization=void 0,this.typedArray=void 0,this.buffer=void 0,this.byteOffset=0,this.byteStride=void 0}function WAe(){this.indexDatatype=void 0,this.count=void 0,this.buffer=void 0,this.typedArray=void 0}function JAe(){this.featureCount=void 0,this.nullFeatureId=void 0,this.propertyTableId=void 0,this.setIndex=void 0,this.label=void 0,this.positionalLabel=void 0}function KAe(){this.featureCount=void 0,this.nullFeatureId=void 0,this.propertyTableId=void 0,this.offset=0,this.repeat=void 0,this.label=void 0,this.positionalLabel=void 0}function XAe(){this.featureCount=void 0,this.nullFeatureId=void 0,this.propertyTableId=void 0,this.textureReader=void 0,this.label=void 0,this.positionalLabel=void 0}function ZAe(){this.attributes=[]}function $Ae(){this.attributes=[],this.morphTargets=[],this.indices=void 0,this.material=void 0,this.primitiveType=void 0,this.featureIds=[],this.propertyTextureIds=[],this.propertyAttributeIds=[],this.outlineCoordinates=void 0,this.modelPrimitiveImagery=void 0}function ele(){this.attributes=[],this.featureIds=[],this.transformInWorldSpace=!1}function tle(){this.index=void 0,this.joints=[],this.inverseBindMatrices=[]}function nle(){this.name=void 0,this.index=void 0,this.children=[],this.primitives=[],this.instances=void 0,this.skin=void 0,this.matrix=void 0,this.translation=void 0,this.rotation=void 0,this.scale=void 0,this.morphWeights=[],this.articulationName=void 0}function ile(){this.nodes=[]}var ole={TRANSLATION:"translation",ROTATION:"rotation",SCALE:"scale",WEIGHTS:"weights"};function rle(){this.input=[],this.interpolation=void 0,this.output=[]}function ale(){this.node=void 0,this.path=void 0}function sle(){this.sampler=void 0,this.target=void 0}function cle(){this.name=void 0,this.samplers=[],this.channels=[]}function Ale(){this.name=void 0,this.type=void 0,this.minimumValue=void 0,this.maximumValue=void 0,this.initialValue=void 0}function lle(){this.name=void 0,this.stages=[]}function VU(){this.credits=[]}function fle(){this.asset=new VU,this.scene=void 0,this.nodes=[],this.skins=[],this.animations=[],this.articulations=[],this.structuralMetadata=void 0,this.upAxis=void 0,this.forwardAxis=void 0,this.transform=O.clone(O.IDENTITY),this.extensions={}}function ule(){this.texture=void 0,this.index=void 0,this.texCoord=0,this.transform=J.clone(J.IDENTITY),this.scale=1,this.channels=void 0}function cu(){this.baseColorTexture=void 0,this.metallicRoughnessTexture=void 0,this.baseColorFactor=se.clone(cu.DEFAULT_BASE_COLOR_FACTOR),this.metallicFactor=cu.DEFAULT_METALLIC_FACTOR,this.roughnessFactor=cu.DEFAULT_ROUGHNESS_FACTOR}cu.DEFAULT_BASE_COLOR_FACTOR=se.ONE;cu.DEFAULT_METALLIC_FACTOR=1;cu.DEFAULT_ROUGHNESS_FACTOR=1;function Jd(){this.diffuseTexture=void 0,this.specularGlossinessTexture=void 0,this.diffuseFactor=se.clone(Jd.DEFAULT_DIFFUSE_FACTOR),this.specularFactor=u.clone(Jd.DEFAULT_SPECULAR_FACTOR),this.glossinessFactor=Jd.DEFAULT_GLOSSINESS_FACTOR}Jd.DEFAULT_DIFFUSE_FACTOR=se.ONE;Jd.DEFAULT_SPECULAR_FACTOR=u.ONE;Jd.DEFAULT_GLOSSINESS_FACTOR=1;function JC(){this.specularFactor=JC.DEFAULT_SPECULAR_FACTOR,this.specularTexture=void 0,this.specularColorFactor=u.clone(JC.DEFAULT_SPECULAR_COLOR_FACTOR),this.specularColorTexture=void 0}JC.DEFAULT_SPECULAR_FACTOR=1;JC.DEFAULT_SPECULAR_COLOR_FACTOR=u.ONE;function KC(){this.anisotropyStrength=KC.DEFAULT_ANISOTROPY_STRENGTH,this.anisotropyRotation=KC.DEFAULT_ANISOTROPY_ROTATION,this.anisotropyTexture=void 0}KC.DEFAULT_ANISOTROPY_STRENGTH=0;KC.DEFAULT_ANISOTROPY_ROTATION=0;function XC(){this.clearcoatFactor=XC.DEFAULT_CLEARCOAT_FACTOR,this.clearcoatTexture=void 0,this.clearcoatRoughnessFactor=XC.DEFAULT_CLEARCOAT_ROUGHNESS_FACTOR,this.clearcoatRoughnessTexture=void 0,this.clearcoatNormalTexture=void 0}XC.DEFAULT_CLEARCOAT_FACTOR=0;XC.DEFAULT_CLEARCOAT_ROUGHNESS_FACTOR=0;function Aw(){this.metallicRoughness=new cu,this.specularGlossiness=void 0,this.specular=void 0,this.anisotropy=void 0,this.clearcoat=void 0,this.emissiveTexture=void 0,this.normalTexture=void 0,this.occlusionTexture=void 0,this.emissiveFactor=u.clone(Aw.DEFAULT_EMISSIVE_FACTOR),this.alphaMode=Wd.OPAQUE,this.alphaCutoff=.5,this.doubleSided=!1,this.unlit=!1}Aw.DEFAULT_EMISSIVE_FACTOR=u.ZERO;ui.Quantization=YAe;ui.Attribute=qAe;ui.Indices=WAe;ui.FeatureIdAttribute=JAe;ui.FeatureIdTexture=XAe;ui.FeatureIdImplicitRange=KAe;ui.MorphTarget=ZAe;ui.Primitive=$Ae;ui.Instances=ele;ui.Skin=tle;ui.Node=nle;ui.Scene=ile;ui.AnimatedPropertyType=Object.freeze(ole);ui.AnimationSampler=rle;ui.AnimationTarget=ale;ui.AnimationChannel=sle;ui.Animation=cle;ui.ArticulationStage=Ale;ui.Articulation=lle;ui.Asset=VU;ui.Components=fle;ui.TextureReader=ule;ui.MetallicRoughness=cu;ui.SpecularGlossiness=Jd;ui.Specular=JC;ui.Anisotropy=KC;ui.Clearcoat=XC;ui.Material=Aw;var Lt=ui;var Ib={};Ib.getImageIdFromTexture=function(e){e=e??k.EMPTY_OBJECT;let{gltf:t,textureId:n,supportedImageFormats:i}=e,o=t.textures[n],r=o.extensions;if(c(r)){if(i.webp&&c(r.EXT_texture_webp))return r.EXT_texture_webp.source;if(i.basis&&c(r.KHR_texture_basisu))return r.KHR_texture_basisu.source}return o.source};Ib.createSampler=function(e){e=e??k.EMPTY_OBJECT;let{gltf:t,textureInfo:n,compressedTextureNoMipmap:i=!1}=e,o=mi.REPEAT,r=mi.REPEAT,a=tn.LINEAR,s=bo.LINEAR,A=n.index,f=t.textures[A].sampler;if(c(f)){let h=t.samplers[f];o=h.wrapS??o,r=h.wrapT??r,a=h.minFilter??a,s=h.magFilter??s}return i&&a!==tn.LINEAR&&a!==tn.NEAREST&&(a===tn.NEAREST_MIPMAP_NEAREST||a===tn.NEAREST_MIPMAP_LINEAR?a=tn.NEAREST:a=tn.LINEAR),new dn({wrapS:o,wrapT:r,minificationFilter:a,magnificationFilter:s})};var dle=new U(1,1);Ib.createModelTextureReader=function(e){e=e??k.EMPTY_OBJECT;let{textureInfo:t,channels:n,texture:i}=e,o=t.texCoord??0,r,a=t.extensions?.KHR_texture_transform;if(c(a)){o=a.texCoord??o;let A=c(a.offset)?U.unpack(a.offset):U.ZERO,l=a.rotation??0,f=c(a.scale)?U.unpack(a.scale):dle;l=-l,r=new J(Math.cos(l)*f.x,-Math.sin(l)*f.y,A.x,Math.sin(l)*f.x,Math.cos(l)*f.y,A.y,0,0,1)}let s=new Lt.TextureReader;return s.index=t.index,s.texture=i,s.texCoord=o,s.scale=t.scale,s.transform=r,s.channels=n,s};var Dc=Ib;function hle(e){let t=document.createElement("canvas");return t.width=w.nextPowerOfTwo(e.width),t.height=w.nextPowerOfTwo(e.height),t.getContext("2d").drawImage(e,0,0,e.width,e.height,0,0,t.width,t.height),t}var jU=hle;function Au(e){e=e??k.EMPTY_OBJECT;let t=e.resourceCache,n=e.gltf,i=e.textureInfo,o=e.gltfResource,r=e.baseResource,a=e.supportedImageFormats,s=e.cacheKey,A=e.asynchronous??!0,l=i.index,f=Dc.getImageIdFromTexture({gltf:n,textureId:l,supportedImageFormats:a});this._resourceCache=t,this._gltf=n,this._textureInfo=i,this._imageId=f,this._gltfResource=o,this._baseResource=r,this._cacheKey=s,this._asynchronous=A,this._imageLoader=void 0,this._image=void 0,this._mipLevels=void 0,this._texture=void 0,this._state=Fe.UNLOADED,this._promise=void 0}c(Object.create)&&(Au.prototype=Object.create(zn.prototype),Au.prototype.constructor=Au);Object.defineProperties(Au.prototype,{cacheKey:{get:function(){return this._cacheKey}},texture:{get:function(){return this._texture}}});var mle=new lw;async function ple(e){let t=e._resourceCache;try{let n=t.getImageLoader({gltf:e._gltf,imageId:e._imageId,gltfResource:e._gltfResource,baseResource:e._baseResource});return e._imageLoader=n,await n.load(),e.isDestroyed()?void 0:(e._image=n.image,e._mipLevels=n.mipLevels,e._state=Fe.LOADED,e)}catch(n){if(e.isDestroyed())return;throw e.unload(),e._state=Fe.FAILED,e.getError("Failed to load texture",n)}}Au.prototype.load=async function(){return c(this._promise)?this._promise:(this._state=Fe.LOADING,this._promise=ple(this),this._promise)};function lw(){this.gltf=void 0,this.textureInfo=void 0,this.textureId=void 0,this.image=void 0,this.context=void 0,this.texture=void 0}lw.prototype.set=function(e,t,n,i,o,r){this.gltf=e,this.textureInfo=t,this.textureId=n,this.image=i,this.mipLevels=o,this.context=r};lw.prototype.execute=function(){this.texture=YU(this.gltf,this.textureInfo,this.textureId,this.image,this.mipLevels,this.context)};function YU(e,t,n,i,o,r){let a=i.internalFormat,s=!1;Bt.isCompressedFormat(a)&&!c(o)&&(s=!0);let A=Dc.createSampler({gltf:e,textureInfo:t,compressedTextureNoMipmap:s}),l=A.minificationFilter,f=A.wrapS,h=A.wrapT,m=l===tn.NEAREST_MIPMAP_NEAREST||l===tn.NEAREST_MIPMAP_LINEAR||l===tn.LINEAR_MIPMAP_NEAREST||l===tn.LINEAR_MIPMAP_LINEAR,p=!c(a)&&m,g=p||f===mi.REPEAT||f===mi.MIRRORED_REPEAT||h===mi.REPEAT||h===mi.MIRRORED_REPEAT,C=!w.isPowerOfTwo(i.width)||!w.isPowerOfTwo(i.height),_=g&&C,E;return c(a)?(!r.webgl2&&Bt.isCompressedFormat(a)&&C&&g&&console.warn("Compressed texture uses REPEAT or MIRRORED_REPEAT texture wrap mode and dimensions are not powers of two. The texture may be rendered incorrectly."),E=gn.create({id:n,context:r,source:{arrayBufferView:i.bufferView,mipLevels:o},width:i.width,height:i.height,pixelFormat:i.internalFormat,sampler:A})):(_&&(i=jU(i)),E=gn.create({id:n,context:r,source:i,sampler:A,flipY:!1,skipColorSpaceConversion:!0})),p&&E.generateMipmap(),E}Au.prototype.process=function(e){if(this._state===Fe.READY)return!0;if(this._state!==Fe.LOADED&&this._state!==Fe.PROCESSING||c(this._texture)||!c(this._image))return!1;this._state=Fe.PROCESSING;let t;if(this._asynchronous){let n=mle;if(n.set(this._gltf,this._textureInfo,this._cacheKey,this._image,this._mipLevels,e.context),!e.jobScheduler.execute(n,wm.TEXTURE))return;t=n.texture}else t=YU(this._gltf,this._textureInfo,this._cacheKey,this._image,this._mipLevels,e.context);return this.unload(),this._texture=t,this._state=Fe.READY,this._resourceCache.statistics.addTextureLoader(this),!0};Au.prototype.unload=function(){c(this._texture)&&this._texture.destroy(),c(this._imageLoader)&&!this._imageLoader.isDestroyed()&&this._resourceCache.unload(this._imageLoader),this._imageLoader=void 0,this._image=void 0,this._mipLevels=void 0,this._texture=void 0,this._gltf=void 0};var fw=Au;function lu(e){e=e??k.EMPTY_OBJECT;let t=e.resourceCache,n=e.gltf,i=e.gltfResource,o=e.baseResource,r=e.bufferViewId,a=e.primitive,s=e.draco,A=e.attributeSemantic,l=e.accessorId,f=e.cacheKey,h=e.spz,m=e.asynchronous??!0,p=e.loadBuffer??!1,g=e.loadTypedArray??!1;this._resourceCache=t,this._gltfResource=i,this._baseResource=o,this._gltf=n,this._bufferViewId=r,this._primitive=a,this._draco=s,this._spz=h,this._attributeSemantic=A,this._accessorId=l,this._cacheKey=f,this._asynchronous=m,this._loadBuffer=p,this._loadTypedArray=g,this._bufferViewLoader=void 0,this._dracoLoader=void 0,this._quantization=void 0,this._typedArray=void 0,this._buffer=void 0,this._state=Fe.UNLOADED,this._promise=void 0}c(Object.create)&&(lu.prototype=Object.create(zn.prototype),lu.prototype.constructor=lu);Object.defineProperties(lu.prototype,{cacheKey:{get:function(){return this._cacheKey}},buffer:{get:function(){return this._buffer}},typedArray:{get:function(){return this._typedArray}},quantization:{get:function(){return this._quantization}}});function gle(e,t){return c(e)&&c(e.attributes)&&c(e.attributes[t])}lu.prototype.load=async function(){return c(this._promise)?this._promise:c(this._spz)?(this._promise=_le(this),this._promise):gle(this._draco,this._attributeSemantic)?(this._promise=ble(this),this._promise):(this._promise=xle(this),this._promise)};function Cle(e,t,n,i){let r=(1<<e.quantizationBits)-1,a=1/r,s=new Lt.Quantization;if(s.componentDatatype=t,s.octEncoded=e.octEncoded,s.octEncodedZXY=!0,s.type=i,s.octEncoded)s.type=st.VEC2,s.normalizationRange=r;else{let A=st.getMathType(i);if(A===Number){let l=e.range;s.quantizedVolumeOffset=e.minValues[0],s.quantizedVolumeDimensions=l,s.normalizationRange=r,s.quantizedVolumeStepSize=l*a}else{s.quantizedVolumeOffset=A.unpack(e.minValues),s.normalizationRange=A.unpack(new Array(n).fill(r));let l=new Array(n).fill(e.range);s.quantizedVolumeDimensions=A.unpack(l);let f=l.map(function(h){return h*a});s.quantizedVolumeStepSize=A.unpack(f)}}return s}async function _le(e){e._state=Fe.LOADING;let t=e._resourceCache;try{let n=t.getSpzLoader({gltf:e._gltf,primitive:e._primitive,spz:e._spz,gltfResource:e._gltfResource,baseResource:e._baseResource});return e._spzLoader=n,await n.load(),e.isDestroyed()?void 0:(e._state=Fe.LOADED,e)}catch{if(e.isDestroyed())return}}function Ele(e){return`${e.startsWith("KHR_gaussian_splatting:")?"KHR_gaussian_splatting:":"_"}SH_DEGREE_`}function Ile(e){let t=Ele(e),n="_COEF_",i=t.length,o=e.indexOf(n,i),r=parseInt(e.slice(i,o),10),a=parseInt(e.slice(o+n.length),10);return{l:r,n:a}}function yle(e){e._state=Fe.PROCESSING;let n=e._spzLoader.decodedData.gcloud;if(e._attributeSemantic==="POSITION")e._typedArray=n.positions;else if(e._attributeSemantic==="KHR_gaussian_splatting:SCALE"||e._attributeSemantic==="_SCALE")e._typedArray=n.scales;else if(e._attributeSemantic==="KHR_gaussian_splatting:ROTATION"||e._attributeSemantic==="_ROTATION")e._typedArray=n.rotations;else if(e._attributeSemantic==="COLOR_0"){let i=n.colors,o=n.alphas;e._typedArray=new Uint8Array(i.length/3*4);for(let r=0;r<i.length/3;r++)e._typedArray[r*4]=w.clamp(i[r*3]*255,0,255),e._typedArray[r*4+1]=w.clamp(i[r*3+1]*255,0,255),e._typedArray[r*4+2]=w.clamp(i[r*3+2]*255,0,255),e._typedArray[r*4+3]=w.clamp(o[r]*255,0,255)}else if(e._attributeSemantic.includes("SH_DEGREE_")){let{l:i,n:o}=Ile(e._attributeSemantic),r=n.shDegree,a=0,s=[0,9,24];switch(r){case 1:a=9;break;case 2:a=24;break;case 3:a=45;break}let A=n.numPoints,l=n.sh;e._typedArray=new Float32Array(A*3);for(let f=0;f<A;f++){let h=f*a+s[i-1]+o*3;e._typedArray[f*3]=l[h],e._typedArray[f*3+1]=l[h+1],e._typedArray[f*3+2]=l[h+2]}}}async function ble(e){e._state=Fe.LOADING;let t=e._resourceCache;try{let n=t.getDracoLoader({gltf:e._gltf,primitive:e._primitive,draco:e._draco,gltfResource:e._gltfResource,baseResource:e._baseResource});return e._dracoLoader=n,await n.load(),e.isDestroyed()?void 0:(e._state=Fe.LOADED,e)}catch{if(e.isDestroyed())return;yb(e)}}function Ble(e){e._state=Fe.PROCESSING;let n=e._dracoLoader.decodedData.vertexAttributes,i=e._attributeSemantic,o=n[i],r=e._accessorId,s=e._gltf.accessors[r].type,A=o.array,l=o.data.quantization;c(l)&&(e._quantization=Cle(l,o.data.componentDatatype,o.data.componentsPerAttribute,s)),e._typedArray=new Uint8Array(A.buffer,A.byteOffset,A.byteLength)}async function xle(e){e._state=Fe.LOADING;let t=e._resourceCache;try{let n=t.getBufferViewLoader({gltf:e._gltf,bufferViewId:e._bufferViewId,gltfResource:e._gltfResource,baseResource:e._baseResource});return e._bufferViewLoader=n,await n.load(),e.isDestroyed()?void 0:(e._typedArray=n.typedArray,e._state=Fe.PROCESSING,e)}catch(n){if(e.isDestroyed())return;yb(e,n)}}function yb(e,t){throw e.unload(),e._state=Fe.FAILED,e.getError("Failed to load vertex buffer",t)}function uw(){this.typedArray=void 0,this.context=void 0,this.buffer=void 0}uw.prototype.set=function(e,t){this.typedArray=e,this.context=t};uw.prototype.execute=function(){this.buffer=qU(this.typedArray,this.context)};function qU(e,t){let n=dt.createVertexBuffer({typedArray:e,context:t,usage:Me.STATIC_DRAW});return n.vertexArrayDestroyable=!1,n}var Tle=new uw;lu.prototype.process=function(e){if(this._state===Fe.READY)return!0;if(this._state!==Fe.LOADED&&this._state!==Fe.PROCESSING)return!1;if(c(this._dracoLoader)){try{if(!this._dracoLoader.process(e))return!1}catch(i){yb(this,i)}Ble(this)}if(c(this._spzLoader)){try{if(!this._spzLoader.process(e))return!1}catch(i){yb(this,i)}yle(this)}let t,n=this._typedArray;if(this._loadBuffer&&this._asynchronous){let i=Tle;if(i.set(n,e.context),!e.jobScheduler.execute(i,wm.BUFFER))return!1;t=i.buffer}else this._loadBuffer&&(t=qU(n,e.context));return this.unload(),this._buffer=t,this._typedArray=this._loadTypedArray?n:void 0,this._state=Fe.READY,this._resourceCache.statistics.addGeometryLoader(this),!0};lu.prototype.unload=function(){c(this._buffer)&&this._buffer.destroy();let e=this._resourceCache;c(this._bufferViewLoader)&&!this._bufferViewLoader.isDestroyed()&&e.unload(this._bufferViewLoader),c(this._dracoLoader)&&e.unload(this._dracoLoader),c(this._spzLoader)&&e.unload(this._spzLoader),this._bufferViewLoader=void 0,this._dracoLoader=void 0,this._spzLoader=void 0,this._typedArray=void 0,this._buffer=void 0,this._gltf=void 0,this._primitive=void 0};var dw=lu;var WU={};async function Sle(e={}){var t,n,i=e,o=typeof window=="object",r=typeof WorkerGlobalScope<"u",a=typeof process=="object"&&((t=process.versions)==null?void 0:t.node)&&process.type!="renderer";if(a){let{createRequire:j}=await Promise.resolve().then(()=>vle);var s=j(WU.url)}var A="./this.program",l=WU.url,f;if(a){var h=s("fs");l.startsWith("file:")&&s("path").dirname(s("url").fileURLToPath(l)),f=j=>(j=_(j)?new URL(j):j,h.readFileSync(j)),1<process.argv.length&&(A=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2)}else if(o||r){try{new URL(".",l)}catch{}r&&(f=j=>{var H=new XMLHttpRequest;return H.open("GET",j,!1),H.responseType="arraybuffer",H.send(null),new Uint8Array(H.response)})}var m=console.log.bind(console),p=console.error.bind(console),g,C=!1,_=j=>j.startsWith("file://"),E,I,y,b,x,S,P,D,Q,v,d,B,T,R=!1;function L(){var j=y.buffer;b=new Int8Array(j),S=new Int16Array(j),i.HEAPU8=x=new Uint8Array(j),P=new Uint16Array(j),D=new Int32Array(j),Q=new Uint32Array(j),i.HEAPF32=v=new Float32Array(j),d=new Float64Array(j),B=new BigInt64Array(j),T=new BigUint64Array(j)}var G=0,q=null;function z(j){var H;throw(H=i.onAbort)==null||H.call(i,j),j="Aborted("+j+")",p(j),C=!0,j=new WebAssembly.RuntimeError(j+". Build with -sASSERTIONS for more info."),I?.(j),j}var K;async function ie(j){if(!ArrayBuffer.isView(j))if(j==K&&g)j=new Uint8Array(g);else if(f)j=f(j);else throw"both async and sync fetching of the wasm failed";return j}async function le(j){var H=K;try{var ne=await ie(H);return await WebAssembly.instantiate(ne,j)}catch(re){p(`failed to asynchronously prepare wasm: ${re}`),z(re)}}async function de(j){return le(j)}var he=j=>{for(;0<j.length;)j.shift()(i)},Se=[],be=[],_e=()=>{var j=i.preRun.shift();be.push(j)},Ct=j=>{if(a)return j=Buffer.from(j,"base64"),new Uint8Array(j.buffer,j.byteOffset,j.length);for(var H,ne,re=0,Ie=0,Ue=j.length,Oe=new Uint8Array((3*Ue>>2)-(j[Ue-2]=="=")-(j[Ue-1]=="="));re<Ue;re+=4,Ie+=3)H=il[j.charCodeAt(re+1)],ne=il[j.charCodeAt(re+2)],Oe[Ie]=il[j.charCodeAt(re)]<<2|H>>4,Oe[Ie+1]=H<<4|ne>>2,Oe[Ie+2]=ne<<6|il[j.charCodeAt(re+3)];return Oe},ft={},At=j=>{for(;j.length;){var H=j.pop();j.pop()(H)}};function at(j){return this.N(Q[j>>2])}var Xe={},wt={},zt={},ti=class extends Error{constructor(j){super(j),this.name="InternalError"}},Li=(j,H,ne)=>{function re(Ve){if(Ve=ne(Ve),Ve.length!==j.length)throw new ti("Mismatched type converter count");for(var Ot=0;Ot<j.length;++Ot)ri(j[Ot],Ve[Ot])}j.forEach(Ve=>zt[Ve]=H);var Ie=Array(H.length),Ue=[],Oe=0;H.forEach((Ve,Ot)=>{wt.hasOwnProperty(Ve)?Ie[Ot]=wt[Ve]:(Ue.push(Ve),Xe.hasOwnProperty(Ve)||(Xe[Ve]=[]),Xe[Ve].push(()=>{Ie[Ot]=wt[Ve],++Oe,Oe===Ue.length&&re(Ie)}))}),Ue.length===0&&re(Ie)},Cn=j=>{for(var H="";;){var ne=x[j++];if(!ne)return H;H+=String.fromCharCode(ne)}},yt=class extends Error{constructor(j){super(j),this.name="BindingError"}},Un=j=>{throw new yt(j)};function sn(j,H,ne={}){var re=H.name;if(!j)throw new yt(`type "${re}" must have a positive integer typeid pointer`);if(wt.hasOwnProperty(j)){if(ne.wa)return;throw new yt(`Cannot register type '${re}' twice`)}wt[j]=H,delete zt[j],Xe.hasOwnProperty(j)&&(H=Xe[j],delete Xe[j],H.forEach(Ie=>Ie()))}function ri(j,H,ne={}){return sn(j,H,ne)}var ha=(j,H,ne)=>{switch(H){case 1:return ne?re=>b[re]:re=>x[re];case 2:return ne?re=>S[re>>1]:re=>P[re>>1];case 4:return ne?re=>D[re>>2]:re=>Q[re>>2];case 8:return ne?re=>B[re>>3]:re=>T[re>>3];default:throw new TypeError(`invalid integer width (${H}): ${j}`)}},nA=j=>{throw new yt(j.L.P.M.name+" instance already deleted")},$A=!1,ma=()=>{},vo=j=>typeof FinalizationRegistry>"u"?(vo=H=>H,j):($A=new FinalizationRegistry(H=>{H=H.L,--H.count.value,H.count.value===0&&(H.S?H.W.Y(H.S):H.P.M.Y(H.O))}),vo=H=>{var ne=H.L;return ne.S&&$A.register(H,{L:ne},H),H},ma=H=>{$A.unregister(H)},vo(j));function Cr(){}var _s=(j,H)=>Object.defineProperty(H,"name",{value:j}),iA={},sd=(j,H,ne)=>{if(j[H].R===void 0){var re=j[H];j[H]=function(...Ie){if(!j[H].R.hasOwnProperty(Ie.length))throw new yt(`Function '${ne}' called with an invalid number of arguments (${Ie.length}) - expects one of (${j[H].R})!`);return j[H].R[Ie.length].apply(this,Ie)},j[H].R=[],j[H].R[re.aa]=re}},el=(j,H,ne)=>{if(i.hasOwnProperty(j)){if(ne===void 0||i[j].R!==void 0&&i[j].R[ne]!==void 0)throw new yt(`Cannot register public name '${j}' twice`);if(sd(i,j,j),i[j].R.hasOwnProperty(ne))throw new yt(`Cannot register multiple overloads of a function with the same number of arguments (${ne})!`);i[j].R[ne]=H}else i[j]=H,i[j].aa=ne},bf=j=>{j=j.replace(/[^a-zA-Z0-9_]/g,"$");var H=j.charCodeAt(0);return 48<=H&&57>=H?`_${j}`:j};function Es(j,H,ne,re,Ie,Ue,Oe,Ve){this.name=j,this.constructor=H,this.$=ne,this.Y=re,this.U=Ie,this.ra=Ue,this.ea=Oe,this.pa=Ve,this.ya=[]}var ka=(j,H,ne)=>{for(;H!==ne;){if(!H.ea)throw new yt(`Expected null or instance of ${ne.name}, got an instance of ${H.name}`);j=H.ea(j),H=H.U}return j},fo=j=>{if(j===null)return"null";var H=typeof j;return H==="object"||H==="array"||H==="function"?j.toString():""+j};function uc(j,H){if(H===null){if(this.ha)throw new yt(`null is not a valid ${this.name}`);return 0}if(!H.L)throw new yt(`Cannot pass "${fo(H)}" as a ${this.name}`);if(!H.L.O)throw new yt(`Cannot pass deleted object as a pointer of type ${this.name}`);return ka(H.L.O,H.L.P.M,this.M)}function Bf(j,H){if(H===null){if(this.ha)throw new yt(`null is not a valid ${this.name}`);if(this.ga){var ne=this.ia();return j!==null&&j.push(this.Y,ne),ne}return 0}if(!H||!H.L)throw new yt(`Cannot pass "${fo(H)}" as a ${this.name}`);if(!H.L.O)throw new yt(`Cannot pass deleted object as a pointer of type ${this.name}`);if(!this.fa&&H.L.P.fa)throw new yt(`Cannot convert argument of type ${H.L.W?H.L.W.name:H.L.P.name} to parameter type ${this.name}`);if(ne=ka(H.L.O,H.L.P.M,this.M),this.ga){if(H.L.S===void 0)throw new yt("Passing raw pointer to smart pointer is illegal");switch(this.Da){case 0:if(H.L.W===this)ne=H.L.S;else throw new yt(`Cannot convert argument of type ${H.L.W?H.L.W.name:H.L.P.name} to parameter type ${this.name}`);break;case 1:ne=H.L.S;break;case 2:if(H.L.W===this)ne=H.L.S;else{var re=H.clone();ne=this.za(ne,cd(()=>re.delete())),j!==null&&j.push(this.Y,ne)}break;default:throw new yt("Unsupporting sharing policy")}}return ne}function Vr(j,H){if(H===null){if(this.ha)throw new yt(`null is not a valid ${this.name}`);return 0}if(!H.L)throw new yt(`Cannot pass "${fo(H)}" as a ${this.name}`);if(!H.L.O)throw new yt(`Cannot pass deleted object as a pointer of type ${this.name}`);if(H.L.P.fa)throw new yt(`Cannot convert argument of type ${H.L.P.name} to parameter type ${this.name}`);return ka(H.L.O,H.L.P.M,this.M)}var pa=(j,H,ne)=>H===ne?j:ne.U===void 0?null:(j=pa(j,H,ne.U),j===null?null:ne.pa(j)),_r={},Er=(j,H)=>{if(H===void 0)throw new yt("ptr should not be undefined");for(;j.U;)H=j.ea(H),j=j.U;return _r[H]},xf=(j,H)=>{if(!H.P||!H.O)throw new ti("makeClassHandle requires ptr and ptrType");if(!!H.W!=!!H.S)throw new ti("Both smartPtrType and smartPtr must be specified");return H.count={value:1},vo(Object.create(j,{L:{value:H,writable:!0}}))};function Ua(j,H,ne,re,Ie,Ue,Oe,Ve,Ot,Wt,bt){this.name=j,this.M=H,this.ha=ne,this.fa=re,this.ga=Ie,this.xa=Ue,this.Da=Oe,this.na=Ve,this.ia=Ot,this.za=Wt,this.Y=bt,Ie||H.U!==void 0?this.T=Bf:(this.T=re?uc:Vr,this.V=null)}var Tf=(j,H,ne)=>{if(!i.hasOwnProperty(j))throw new ti("Replacing nonexistent public symbol");i[j].R!==void 0&&ne!==void 0?i[j].R[ne]=H:(i[j]=H,i[j].aa=ne)},Sf,_n=(j,H)=>{j=Cn(j);var ne=Sf.get(H);if(typeof ne!="function")throw new yt(`unknown function pointer with signature ${j}: ${H}`);return ne};class Kn extends Error{}var dc=j=>{j=mv(j);var H=Cn(j);return Df(j),H},Ga=(j,H)=>{function ne(Ue){Ie[Ue]||wt[Ue]||(zt[Ue]?zt[Ue].forEach(ne):(re.push(Ue),Ie[Ue]=!0))}var re=[],Ie={};throw H.forEach(ne),new Kn(`${j}: `+re.map(dc).join([", "]))},oA=(j,H)=>{for(var ne=[],re=0;re<j;re++)ne.push(Q[H+4*re>>2]);return ne};function rA(j){for(var H=1;H<j.length;++H)if(j[H]!==null&&j[H].V===void 0)return!0;return!1}function ga(j,H,ne,re,Ie,Ue){var Oe=H.length;if(2>Oe)throw new yt("argTypes array size mismatch! Must at least get return value and 'this' types!");var Ve=H[1]!==null&&ne!==null,Ot=rA(H);ne=!H[0].ma;var Wt=H[0],bt=H[1];for(re=[j,Un,re,Ie,At,Wt.N.bind(Wt),bt?.T.bind(bt)],Ie=2;Ie<Oe;++Ie)Wt=H[Ie],re.push(Wt.T.bind(Wt));if(!Ot)for(Ie=Ve?1:2;Ie<H.length;++Ie)H[Ie].V!==null&&re.push(H[Ie].V);for(Ot=rA(H),Ie=H.length-2,bt=[],Wt=["fn"],Ve&&Wt.push("thisWired"),Oe=0;Oe<Ie;++Oe)bt.push(`arg${Oe}`),Wt.push(`arg${Oe}Wired`);bt=bt.join(","),Wt=Wt.join(","),bt=`return function (${bt}) {
`,Ot&&(bt+=`var destructors = [];
`);var io=Ot?"destructors":"null",Va="humanName throwBindingError invoker fn runDestructors fromRetWire toClassParamWire".split(" ");for(Ve&&(bt+=`var thisWired = toClassParamWire(${io}, this);
`),Oe=0;Oe<Ie;++Oe){var jr=`toArg${Oe}Wire`;bt+=`var arg${Oe}Wired = ${jr}(${io}, arg${Oe});
`,Va.push(jr)}if(bt+=(ne||Ue?"var rv = ":"")+`invoker(${Wt});
`,Ot)bt+=`runDestructors(destructors);
`;else for(Oe=Ve?1:2;Oe<H.length;++Oe)Ue=Oe===1?"thisWired":"arg"+(Oe-2)+"Wired",H[Oe].V!==null&&(bt+=`${Ue}_dtor(${Ue});
`,Va.push(`${Ue}_dtor`));return ne&&(bt+=`var ret = fromRetWire(rv);
return ret;
`),H=new Function(Va,bt+`}
`)(...re),_s(j,H)}for(var GE=j=>{j=j.trim();let H=j.indexOf("(");return H===-1?j:j.slice(0,H)},za=[],Ha=[0,1,,1,null,1,!0,1,!1,1],Oh=j=>{9<j&&--Ha[j+1]===0&&(Ha[j]=void 0,za.push(j))},Lh=j=>{if(!j)throw new yt(`Cannot use deleted val. handle = ${j}`);return Ha[j]},cd=j=>{switch(j){case void 0:return 2;case null:return 4;case!0:return 6;case!1:return 8;default:let H=za.pop()||Ha.length;return Ha[H]=j,Ha[H+1]=1,H}},Bg={name:"emscripten::val",N:j=>{var H=Lh(j);return Oh(j),H},T:(j,H)=>cd(H),X:at,V:null},hc=(j,H,ne)=>{switch(H){case 1:return ne?function(re){return this.N(b[re])}:function(re){return this.N(x[re])};case 2:return ne?function(re){return this.N(S[re>>1])}:function(re){return this.N(P[re>>1])};case 4:return ne?function(re){return this.N(D[re>>2])}:function(re){return this.N(Q[re>>2])};default:throw new TypeError(`invalid integer width (${H}): ${j}`)}},xg=(j,H)=>{var ne=wt[j];if(ne===void 0)throw j=`${H} has unknown type ${dc(j)}`,new yt(j);return ne},zE=(j,H)=>{switch(H){case 4:return function(ne){return this.N(v[ne>>2])};case 8:return function(ne){return this.N(d[ne>>3])};default:throw new TypeError(`invalid float width (${H}): ${j}`)}},HE=Object.assign({optional:!0},Bg),tl=(j,H,ne)=>{var re=x;if(!(0<ne))return 0;var Ie=H;ne=H+ne-1;for(var Ue=0;Ue<j.length;++Ue){var Oe=j.codePointAt(Ue);if(127>=Oe){if(H>=ne)break;re[H++]=Oe}else if(2047>=Oe){if(H+1>=ne)break;re[H++]=192|Oe>>6,re[H++]=128|Oe&63}else if(65535>=Oe){if(H+2>=ne)break;re[H++]=224|Oe>>12,re[H++]=128|Oe>>6&63,re[H++]=128|Oe&63}else{if(H+3>=ne)break;re[H++]=240|Oe>>18,re[H++]=128|Oe>>12&63,re[H++]=128|Oe>>6&63,re[H++]=128|Oe&63,Ue++}}return re[H]=0,H-Ie},VE=j=>{for(var H=0,ne=0;ne<j.length;++ne){var re=j.charCodeAt(ne);127>=re?H++:2047>=re?H+=2:55296<=re&&57343>=re?(H+=4,++ne):H+=3}return H},Pt=new TextDecoder,Ae=(j,H,ne,re)=>{if(ne=H+ne,re)return ne;for(;j[H]&&!(H>=ne);)++H;return H},Ke=new TextDecoder("utf-16le"),St=(j,H,ne)=>(j>>=1,Ke.decode(P.subarray(j,Ae(P,j,H/2,ne)))),wi=(j,H,ne)=>{if(ne??(ne=2147483647),2>ne)return 0;ne-=2;var re=H;ne=ne<2*j.length?ne/2:j.length;for(var Ie=0;Ie<ne;++Ie)S[H>>1]=j.charCodeAt(Ie),H+=2;return S[H>>1]=0,H-re},Yo=j=>2*j.length,uo=(j,H,ne)=>{var re="";j>>=2;for(var Ie=0;!(Ie>=H/4);Ie++){var Ue=Q[j+Ie];if(!Ue&&!ne)break;re+=String.fromCodePoint(Ue)}return re},Ir=(j,H,ne)=>{if(ne??(ne=2147483647),4>ne)return 0;var re=H;ne=re+ne-4;for(var Ie=0;Ie<j.length;++Ie){var Ue=j.codePointAt(Ie);if(65535<Ue&&Ie++,D[H>>2]=Ue,H+=4,H+4>ne)break}return D[H>>2]=0,H-re},mc=j=>{for(var H=0,ne=0;ne<j.length;++ne)65535<j.codePointAt(ne)&&ne++,H+=4;return H},nl=[],Tg=j=>{var H=nl.length;return nl.push(j),H},qo=(j,H)=>{for(var ne=Array(j),re=0;re<j;++re)ne[re]=xg(Q[H+4*re>>2],`parameter ${re}`);return ne},jE=(j,H,ne)=>{var re=[];return j=j(re,ne),re.length&&(Q[H>>2]=cd(re)),j},YE={},r5=j=>{var H=YE[j];return H===void 0?Cn(j):H},JB={},hv=()=>{if(!KB){var j={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.language||"C").replace("-","_")+".UTF-8",_:A||"./this.program"},H;for(H in JB)JB[H]===void 0?delete j[H]:j[H]=JB[H];var ne=[];for(H in j)ne.push(`${H}=${j[H]}`);KB=ne}return KB},KB,a5=[null,[],[]],il=new Uint8Array(123),wf=25;0<=wf;--wf)il[48+wf]=52+wf,il[65+wf]=wf,il[97+wf]=26+wf;il[43]=62,il[47]=63,(()=>{let j=Cr.prototype;Object.assign(j,{isAliasOf:function(ne){if(!(this instanceof Cr&&ne instanceof Cr))return!1;var re=this.L.P.M,Ie=this.L.O;ne.L=ne.L;var Ue=ne.L.P.M;for(ne=ne.L.O;re.U;)Ie=re.ea(Ie),re=re.U;for(;Ue.U;)ne=Ue.ea(ne),Ue=Ue.U;return re===Ue&&Ie===ne},clone:function(){if(this.L.O||nA(this),this.L.da)return this.L.count.value+=1,this;var ne=vo,re=Object,Ie=re.create,Ue=Object.getPrototypeOf(this),Oe=this.L;return ne=ne(Ie.call(re,Ue,{L:{value:{count:Oe.count,ba:Oe.ba,da:Oe.da,O:Oe.O,P:Oe.P,S:Oe.S,W:Oe.W}}})),ne.L.count.value+=1,ne.L.ba=!1,ne},delete(){if(this.L.O||nA(this),this.L.ba&&!this.L.da)throw new yt("Object already scheduled for deletion");ma(this);var ne=this.L;--ne.count.value,ne.count.value===0&&(ne.S?ne.W.Y(ne.S):ne.P.M.Y(ne.O)),this.L.da||(this.L.S=void 0,this.L.O=void 0)},isDeleted:function(){return!this.L.O},deleteLater:function(){if(this.L.O||nA(this),this.L.ba&&!this.L.da)throw new yt("Object already scheduled for deletion");return this.L.ba=!0,this}});let H=Symbol.dispose;H&&(j[H]=j.delete)})(),Object.assign(Ua.prototype,{sa(j){return this.na&&(j=this.na(j)),j},ka(j){var H;(H=this.Y)==null||H.call(this,j)},X:at,N:function(j){function H(){return this.ga?xf(this.M.$,{P:this.xa,O:ne,W:this,S:j}):xf(this.M.$,{P:this,O:j})}var ne=this.sa(j);if(!ne)return this.ka(j),null;var re=Er(this.M,ne);if(re!==void 0)return re.L.count.value===0?(re.L.O=ne,re.L.S=j,re.clone()):(re=re.clone(),this.ka(j),re);if(re=this.M.ra(ne),re=iA[re],!re)return H.call(this);re=this.fa?re.oa:re.pointerType;var Ie=pa(ne,this.M,re.M);return Ie===null?H.call(this):this.ga?xf(re.M.$,{P:re,O:Ie,W:this,S:j}):xf(re.M.$,{P:re,O:Ie})}}),i.print&&(m=i.print),i.printErr&&(p=i.printErr),i.wasmBinary&&(g=i.wasmBinary),i.thisProgram&&(A=i.thisProgram);var mv,XB,Df,s5={x:()=>z(""),q:j=>{var H=ft[j];delete ft[j];var ne=H.ia,re=H.Y,Ie=H.la,Ue=Ie.map(Oe=>Oe.va).concat(Ie.map(Oe=>Oe.Ba));Li([j],Ue,Oe=>{var Ve={};return Ie.forEach((Ot,Wt)=>{var bt=Oe[Wt],io=Ot.ta,Va=Ot.ua,jr=Oe[Wt+Ie.length],Yr=Ot.Aa,Is=Ot.Ca;Ve[Ot.qa]={read:ol=>bt.N(io(Va,ol)),write:(ol,Sg)=>{var ja=[];Yr(Is,ol,jr.T(ja,Sg)),At(ja)},optional:Oe[Wt].optional}}),[{name:H.name,N:Ot=>{var Wt={},bt;for(bt in Ve)Wt[bt]=Ve[bt].read(Ot);return re(Ot),Wt},T:(Ot,Wt)=>{for(var bt in Ve)if(!(bt in Wt||Ve[bt].optional))throw new TypeError(`Missing field: "${bt}"`);var io=ne();for(bt in Ve)Ve[bt].write(io,Wt[bt]);return Ot!==null&&Ot.push(re,io),io},X:at,V:re}]})},n:(j,H,ne,re,Ie)=>{H=Cn(H),re=re===0n;let Ue=Oe=>Oe;if(re){let Oe=8*ne;Ue=Ve=>BigInt.asUintN(Oe,Ve),Ie=Ue(Ie)}ri(j,{name:H,N:Ue,T:(Oe,Ve)=>(typeof Ve=="number"&&(Ve=BigInt(Ve)),Ve),X:ha(H,ne,!re),V:null})},B:(j,H,ne,re)=>{H=Cn(H),ri(j,{name:H,N:function(Ie){return!!Ie},T:function(Ie,Ue){return Ue?ne:re},X:function(Ie){return this.N(x[Ie])},V:null})},j:(j,H,ne,re,Ie,Ue,Oe,Ve,Ot,Wt,bt,io,Va)=>{bt=Cn(bt),Ue=_n(Ie,Ue),Ve&&(Ve=_n(Oe,Ve)),Wt&&(Wt=_n(Ot,Wt)),Va=_n(io,Va);var jr=bf(bt);el(jr,function(){Ga(`Cannot construct ${bt} due to unbound types`,[re])}),Li([j,H,ne],re?[re]:[],Yr=>{if(Yr=Yr[0],re)var Is=Yr.M,ol=Is.$;else ol=Cr.prototype;Yr=_s(bt,function(...$B){if(Object.getPrototypeOf(this)!==Sg)throw new yt(`Use 'new' to construct ${bt}`);if(ja.Z===void 0)throw new yt(`${bt} has no accessible constructor`);var pv=ja.Z[$B.length];if(pv===void 0)throw new yt(`Tried to invoke ctor of ${bt} with invalid number of parameters (${$B.length}) - expected (${Object.keys(ja.Z).toString()}) parameters instead!`);return pv.apply(this,$B)});var Sg=Object.create(ol,{constructor:{value:Yr}});Yr.prototype=Sg;var ja=new Es(bt,Yr,Sg,Va,Is,Ue,Ve,Wt);if(ja.U){var wg;(wg=ja.U).ja??(wg.ja=[]),ja.U.ja.push(ja)}return Is=new Ua(bt,ja,!0,!1,!1),wg=new Ua(bt+"*",ja,!1,!1,!1),ol=new Ua(bt+" const*",ja,!1,!0,!1),iA[j]={pointerType:wg,oa:ol},Tf(jr,Yr),[Is,wg,ol]})},g:(j,H,ne,re,Ie,Ue)=>{var Oe=oA(H,ne);Ie=_n(re,Ie),Li([],[j],Ve=>{Ve=Ve[0];var Ot=`constructor ${Ve.name}`;if(Ve.M.Z===void 0&&(Ve.M.Z=[]),Ve.M.Z[H-1]!==void 0)throw new yt(`Cannot register multiple constructors with identical number of parameters (${H-1}) for class '${Ve.name}'! Overload resolution is currently only performed using the parameter count, not actual type info!`);return Ve.M.Z[H-1]=()=>{Ga(`Cannot construct ${Ve.name} due to unbound types`,Oe)},Li([],Oe,Wt=>(Wt.splice(1,0,null),Ve.M.Z[H-1]=ga(Ot,Wt,null,Ie,Ue),[])),[]})},b:(j,H,ne,re,Ie,Ue,Oe,Ve,Ot)=>{var Wt=oA(ne,re);H=Cn(H),H=GE(H),Ue=_n(Ie,Ue),Li([],[j],bt=>{function io(){Ga(`Cannot call ${Va} due to unbound types`,Wt)}bt=bt[0];var Va=`${bt.name}.${H}`;H.startsWith("@@")&&(H=Symbol[H.substring(2)]),Ve&&bt.M.ya.push(H);var jr=bt.M.$,Yr=jr[H];return Yr===void 0||Yr.R===void 0&&Yr.className!==bt.name&&Yr.aa===ne-2?(io.aa=ne-2,io.className=bt.name,jr[H]=io):(sd(jr,H,Va),jr[H].R[ne-2]=io),Li([],Wt,Is=>(Is=ga(Va,Is,bt,Ue,Oe,Ot),jr[H].R===void 0?(Is.aa=ne-2,jr[H]=Is):jr[H].R[ne-2]=Is,[])),[]})},z:j=>ri(j,Bg),r:(j,H,ne,re)=>{function Ie(){}H=Cn(H),Ie.values={},ri(j,{name:H,constructor:Ie,N:function(Ue){return this.constructor.values[Ue]},T:(Ue,Oe)=>Oe.value,X:hc(H,ne,re),V:null}),el(H,Ie)},d:(j,H,ne)=>{var re=xg(j,"enum");H=Cn(H),j=re.constructor,re=Object.create(re.constructor.prototype,{value:{value:ne},constructor:{value:_s(`${re.name}_${H}`,function(){})}}),j.values[ne]=re,j[H]=re},m:(j,H,ne)=>{H=Cn(H),ri(j,{name:H,N:re=>re,T:(re,Ie)=>Ie,X:zE(H,ne),V:null})},l:(j,H,ne,re,Ie,Ue,Oe)=>{var Ve=oA(H,ne);j=Cn(j),j=GE(j),Ie=_n(re,Ie),el(j,function(){Ga(`Cannot call ${j} due to unbound types`,Ve)},H-1),Li([],Ve,Ot=>(Ot=[Ot[0],null].concat(Ot.slice(1)),Tf(j,ga(j,Ot,null,Ie,Ue,Oe),H-1),[]))},c:(j,H,ne,re,Ie)=>{H=Cn(H);let Ue=Ve=>Ve;if(re===0){var Oe=32-8*ne;Ue=Ve=>Ve<<Oe>>>Oe,Ie=Ue(Ie)}ri(j,{name:H,N:Ue,T:(Ve,Ot)=>Ot,X:ha(H,ne,re!==0),V:null})},a:(j,H,ne)=>{function re(Ue){return new Ie(b.buffer,Q[Ue+4>>2],Q[Ue>>2])}var Ie=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,BigInt64Array,BigUint64Array][H];ne=Cn(ne),ri(j,{name:ne,N:re,X:re},{wa:!0})},h:j=>{ri(j,HE)},A:(j,H)=>{H=Cn(H),ri(j,{name:H,N(ne){var re=(re=ne+4)?Pt.decode(x.subarray(re,Ae(x,re,Q[ne>>2],!0))):"";return Df(ne),re},T(ne,re){re instanceof ArrayBuffer&&(re=new Uint8Array(re));var Ie=typeof re=="string";if(!(Ie||ArrayBuffer.isView(re)&&re.BYTES_PER_ELEMENT==1))throw new yt("Cannot pass non-string to std::string");var Ue=Ie?VE(re):re.length,Oe=XB(4+Ue+1),Ve=Oe+4;return Q[Oe>>2]=Ue,Ie?tl(re,Ve,Ue+1):x.set(re,Ve),ne!==null&&ne.push(Df,Oe),Oe},X:at,V(ne){Df(ne)}})},f:(j,H,ne)=>{if(ne=Cn(ne),H===2)var re=St,Ie=wi,Ue=Yo;else re=uo,Ie=Ir,Ue=mc;ri(j,{name:ne,N:Oe=>{var Ve=re(Oe+4,Q[Oe>>2]*H,!0);return Df(Oe),Ve},T:(Oe,Ve)=>{if(typeof Ve!="string")throw new yt(`Cannot pass non-string to C++ string type ${ne}`);var Ot=Ue(Ve),Wt=XB(4+Ot+H);return Q[Wt>>2]=Ot/H,Ie(Ve,Wt+4,Ot+H),Oe!==null&&Oe.push(Df,Wt),Wt},X:at,V(Oe){Df(Oe)}})},i:(j,H,ne,re,Ie,Ue)=>{ft[j]={name:Cn(H),ia:_n(ne,re),Y:_n(Ie,Ue),la:[]}},e:(j,H,ne,re,Ie,Ue,Oe,Ve,Ot,Wt)=>{ft[j].la.push({qa:Cn(H),va:ne,ta:_n(re,Ie),ua:Ue,Ba:Oe,Aa:_n(Ve,Ot),Ca:Wt})},C:(j,H)=>{H=Cn(H),ri(j,{ma:!0,name:H,N:()=>{},T:()=>{}})},p:(j,H,ne)=>{var[re,...Ie]=qo(j,H);H=re.T.bind(re);var Ue=Ie.map(Ot=>Ot.X.bind(Ot));j--;var Oe={toValue:Lh};switch(j=Ue.map((Ot,Wt)=>{var bt=`argFromPtr${Wt}`;return Oe[bt]=Ot,`${bt}(args${Wt?"+"+8*Wt:""})`}),ne){case 0:var Ve="toValue(handle)";break;case 2:Ve="new (toValue(handle))";break;case 3:Ve="";break;case 1:Oe.getStringOrSymbol=r5,Ve="toValue(handle)[getStringOrSymbol(methodName)]"}return Ve+=`(${j})`,re.ma||(Oe.toReturnWire=H,Oe.emval_returnValue=jE,Ve=`return emval_returnValue(toReturnWire, destructorsRef, ${Ve})`),Ve=`return function (handle, methodName, destructorsRef, args) {
  ${Ve}
  }`,ne=new Function(Object.keys(Oe),Ve)(...Object.values(Oe)),Ve=`methodCaller<(${Ie.map(Ot=>Ot.name)}) => ${re.name}>`,Tg(_s(Ve,ne))},E:Oh,o:(j,H,ne,re,Ie)=>nl[j](H,ne,re,Ie),D:j=>{var H=Lh(j);At(H),Oh(j)},s:(j,H,ne,re)=>{var Ie=new Date().getFullYear(),Ue=new Date(Ie,0,1).getTimezoneOffset();Ie=new Date(Ie,6,1).getTimezoneOffset(),Q[j>>2]=60*Math.max(Ue,Ie),D[H>>2]=+(Ue!=Ie),H=Oe=>{var Ve=Math.abs(Oe);return`UTC${0<=Oe?"-":"+"}${String(Math.floor(Ve/60)).padStart(2,"0")}${String(Ve%60).padStart(2,"0")}`},j=H(Ue),H=H(Ie),Ie<Ue?(tl(j,ne,17),tl(H,re,17)):(tl(j,re,17),tl(H,ne,17))},y:j=>{var H=x.length;if(j>>>=0,2147483648<j)return!1;for(var ne=1;4>=ne;ne*=2){var re=H*(1+.2/ne);re=Math.min(re,j+100663296);e:{re=(Math.min(2147483648,65536*Math.ceil(Math.max(j,re)/65536))-y.buffer.byteLength+65535)/65536|0;try{y.grow(re),L();var Ie=1;break e}catch{}Ie=void 0}if(Ie)return!0}return!1},t:(j,H)=>{var ne=0,re=0,Ie;for(Ie of hv()){var Ue=H+ne;Q[j+re>>2]=Ue,ne+=tl(Ie,Ue,1/0)+1,re+=4}return 0},u:(j,H)=>{var ne=hv();Q[j>>2]=ne.length,j=0;for(var re of ne)j+=VE(re)+1;return Q[H>>2]=j,0},v:()=>52,w:function(){return 70},k:(j,H,ne,re)=>{for(var Ie=0,Ue=0;Ue<ne;Ue++){var Oe=Q[H>>2],Ve=Q[H+4>>2];H+=8;for(var Ot=0;Ot<Ve;Ot++){var Wt=j,bt=x[Oe+Ot],io=a5[Wt];bt===0||bt===10?(Wt=Wt===1?m:p,bt=Ae(io,0),bt=Pt.decode(io.buffer?io.subarray(0,bt):new Uint8Array(io.slice(0,bt))),Wt(bt),io.length=0):io.push(bt)}Ie+=Ve}return Q[re>>2]=Ie,0}},Nh=await(async function(){var j;function H(re){var Ie;return Nh=re.exports,y=Nh.F,L(),Sf=Nh.H,re=Nh,mv=re.I,i._malloc=XB=re.J,i._free=Df=re.K,G--,(Ie=i.monitorRunDependencies)==null||Ie.call(i,G),G==0&&q&&(re=q,q=null,re()),Nh}G++,(j=i.monitorRunDependencies)==null||j.call(i,G);var ne={a:s5};return i.instantiateWasm?new Promise(re=>{i.instantiateWasm(ne,(Ie,Ue)=>{re(H(Ie))})}):(K??(K=Ct("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C0EAEKEDRQRAQZiDASEBIARBmIMBQRgQiwFFDQJBsIMBIQEgBEGwgwFBGBCLAUUNAkEAIQBBvO4BLQAARQRAA0AgAEECdCAAQcYfEKIDNgKM7gEgAEEBaiIAQQZHDQALQbzuAUEBOgAAQaTuAUGM7gEoAgA2AgALQYzuASEBIAJBCGoiAEGM7gFBGBCLAUUNAkGk7gEhASAAQaTuAUEYEIsBRQ0CQRgQNCIBRQ0BCyABIAIpAgg3AgAgASACKQIYNwIQIAEgAikCEDcCCAwBC0EAIQELIAJBIGokAEGc8QFBAToAAEGY8QEgATYCACABC80KAgV/CX4jAEHgAGsiBSQAIARC////////P4MhCiACIASFQoCAgICAgICAgH+DIQsgAkL///////8/gyIMQiCIIQ8gBEIwiKdB//8BcSEHAkACQCACQjCIp0H//wFxIglB//8Ba0GCgH5PBEAgB0H//wFrQYGAfksNAQsgAVAgAkL///////////8AgyINQoCAgICAgMD//wBUIA1CgICAgICAwP//AFEbRQRAIAJCgICAgICAIIQhCwwCCyADUCAEQv///////////wCDIgJCgICAgICAwP//AFQgAkKAgICAgIDA//8AURtFBEAgBEKAgICAgIAghCELIAMhAQwCCyABIA1CgICAgICAwP//AIWEUARAIAIgA4RQBEBCgICAgICA4P//ACELQgAhAQwDCyALQoCAgICAgMD//wCEIQtCACEBDAILIAMgAkKAgICAgIDA//8AhYRQBEAgASANhEIAIQFQBEBCgICAgICA4P//ACELDAMLIAtCgICAgICAwP//AIQhCwwCCyABIA2EUARAQgAhAQwCCyACIAOEUARAQgAhAQwCCyANQv///////z9YBEAgBUHQAGogASAMIAEgDCAMUCIGG3lCwABCACAGG3ynIgZBD2sQREEQIAZrIQYgBSkDWCIMQiCIIQ8gBSkDUCEBCyACQv///////z9WDQAgBUFAayADIAogAyAKIApQIggbeULAAEIAIAgbfKciCEEPaxBEIAYgCGtBEGohBiAFKQNIIQogBSkDQCEDCyAHIAlqIAZqQf//AGshBgJAIApCD4YiDkIgiEKAgICACIQiAiABQiCIIgR+IhAgA0IPhiIRQiCIIgogD0KAgASEIg1+fCIPIBBUrSAPIANCMYggDoRC/////w+DIgMgDEL/////D4MiDH58Ig4gD1StfCACIA1+fCAOIA4gEUKAgP7/D4MiDyAMfiIRIAQgCn58IhAgEVStIBAgECADIAFC/////w+DIgF+fCIQVq18fCIOVq18IAMgDX4iEiACIAx+fCIRIBJUrUIghiARQiCIhHwgDiAOIBFCIIZ8Ig5WrXwgDiANIA9+Ig0gCiAMfnwiDCABIAJ+fCICIAMgBH58IgNCIIggAiADVq0gDCANVK0gAiAMVK18fEIghoR8IgIgDlStfCACIBAgBCAPfiIMIAEgCn58IgRCIIggBCAMVK1CIIaEfCIKIBBUrSAKIANCIIZ8IgMgClStfHwiCiACVK18IAogAyAEQiCGIgIgASAPfnwiASACVK18IgIgA1StfCIEIApUrXwiA0KAgICAgIDAAINQRQRAIAZBAWohBgwBCyABQj+IIANCAYYgBEI/iIQhAyAEQgGGIAJCP4iEIQQgAUIBhiEBIAJCAYaEIQILIAZB//8BTgRAIAtCgICAgICAwP//AIQhC0IAIQEMAQsCfiAGQQBMBEBBASAGayIHQf8ATQRAIAVBMGogASACIAZB/wBqIgYQRCAFQSBqIAQgAyAGEEQgBUEQaiABIAIgBxCKASAFIAQgAyAHEIoBIAUpAzAgBSkDOIRCAFKtIAUpAyAgBSkDEISEIQEgBSkDKCAFKQMYhCECIAUpAwAhBCAFKQMIDAILQgAhAQwCCyADQv///////z+DIAatQjCGhAsgC4QhCyABUCACQgBZIAJCgICAgICAgICAf1EbRQRAIAsgBEIBfCIBUK18IQsMAQsgASACQoCAgICAgICAgH+FhFBFBEAgBCEBDAELIAsgBCAEQgGDfCIBIARUrXwhCwsgACABNwMAIAAgCzcDCCAFQeAAaiQACwYAIAAQLQt8AQN/IwBBEGsiASQAIAEgADYCDCMAQRBrIgIkACAAKAIAQX9HBEAgAkEIaiACQQxqIAFBDGoQVRBVIQMDQCAAKAIAQQFGDQALIAAoAgBFBEAgAEEBNgIAIAMQ0gIgAEF/NgIACwsgAkEQaiQAIAAoAgQgAUEQaiQAQQFrCyAAIAAgAUEBazYCBCAAQeDVATYCACAAQZCtATYCACAAC/cFAQl/IwBBEGsiCSQAIAEQ1wIgCUEMaiABEFUhCCAAQQhqIgMQayACTQRAAkAgAkEBaiIAIAMQayIBSwRAIwBBIGsiCiQAAkAgACABayIHIAMoAgggAygCBGtBAnVNBEAgAyAHENkCDAELIApBDGohAQJ/IAMQayAHaiEFIwBBEGsiACQAIAAgBTYCDCAFELwCIgRNBEAgAxC5AiIFIARBAXZJBEAgACAFQQF0NgIIIABBCGogAEEMahCgASgCACEECyAAQRBqJAAgBAwBCxCMAQALIQQgAxBrIQUjAEEQayIAJAAgASADQQxqIgs2AhAgAUEANgIMIAQEfyAAQQhqIAsgBBC7AiAAKAIIIQYgACgCDAVBAAshBCABIAY2AgAgASAGIAVBAnRqIgU2AgggASAGIARBAnRqNgIMIAEgBTYCBCAAQRBqJAAjAEEQayIGJAAgASgCCCEEIAZBBGoiACABQQhqNgIIIAAgBDYCACAAIAQgB0ECdGo2AgQgACgCACEEA0AgACgCBCAERwRAIAEoAhAaIAQQugIgACAAKAIAQQRqIgQ2AgAMAQsLIAAoAgggACgCADYCACAGQRBqJAAgASgCBCADKAIAIgAgAygCBGtqIQQgAygCBCAAayIHBEAgBCAAIAf8CgAACyABIAQ2AgQgAyADKAIANgIEIAMgAUEEahDXASADQQRqIAFBCGoQ1wEgA0EIaiABQQxqENcBIAEgASgCBDYCACADEGsaIAEoAgQhAANAIAEoAggiBCAARwRAIAEgBEEEazYCCCABKAIQGgwBCwsgASgCACIABEAgASgCECAAIAEoAgwgASgCAGtBAnUQuAILCyAKQSBqJAAMAQsgACABSQRAIAMoAgAgAEECdGohACADEGsaIAMgABDYAgsLCyADIAIQggEoAgAEQCADIAIQggEoAgAQvwELIAgQrAEhACADIAIQggEgADYCACAIKAIAIQAgCEEANgIAIAAEQCAAEL8BCyAJQRBqJAALySgBC38jAEEQayIKJAACQAJAAkACQAJAAkACQAJAAkACQCAAQfQBTQRAQYzqASgCACIEQRAgAEELakH4A3EgAEELSRsiBkEDdiIAdiIBQQNxBEACQCABQX9zQQFxIABqIgJBA3QiAUG06gFqIgAgASgCvOoBIgEoAggiBUYEQEGM6gEgBEF+IAJ3cTYCAAwBCyAFIAA2AgwgACAFNgIICyABQQhqIQAgASACQQN0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KAIAKAIcEQQAC8EBAQN/IAAtAABBIHFFBEACQCAAKAIQIgMEfyADBSAAEN8BDQEgACgCEAsgACgCFCIEayACSQRAIAAgASACIAAoAiQRAwAaDAELAkACQCACRSAAKAJQQQBIcg0AIAIhAwNAIAEgA2oiBUEBay0AAEEKRwRAIANBAWsiAw0BDAILCyAAIAEgAyAAKAIkEQMAIANJDQIgAiADayECIAAoAhQhBAwBCyABIQULIAQgBSACEHEaIAAgACgCFCACajYCFAsLC6EBAQJ/AkAgABAfRSACIAFrQQVIcg0AIAEgAhDHASACQQRrIQQgABAjIgIgABAfaiEFAkADQAJAIAIsAAAhACABIARPDQAgAEEATCAAQf8ATnJFBEAgASgCACACLAAARw0DCyABQQRqIQEgAiAFIAJrQQFKaiECDAELCyAAQQBMIABB/wBOcg0BIAIsAAAgBCgCAEEBa0sNAQsgA0EENgIACwtQAQF+AkAgA0HAAHEEQCABIANBQGqthiECQgAhAQwBCyADRQ0AIAIgA60iBIYgAUHAACADa62IhCECIAEgBIYhAQsgACABNwMAIAAgAjcDCAtpAQF/IwBBgAJrIgUkACAEQYDABHEgAiADTHJFBEAgBSABIAIgA2siA0GAAiADQYACSSIBGxCYAiABRQRAA0AgACAFQYACEEIgA0GAAmsiA0H/AUsNAAsLIAAgBSADEEILIAVBgAJqJAALBABBAAsKACAALQALQQd2CwoAIABB0PIBEHoLCgAgAEHY8gEQegvPCQIEfwR+IwBB8ABrIgYkACAEQv///////////wCDIQkCQAJAIAFQIgUgAkL///////////8AgyIKQoCAgICAgMD//wB9QoCAgICAgMCAgH9UIApQG0UEQCADQgBSIAlCgICAgICAwP//AH0iC0KAgICAgIDAgIB/ViALQoCAgICAgMCAgH9RGw0BCyAFIApCgICAgICAwP//AFQgCkKAgICAgIDA//8AURtFBEAgAkKAgICAgIAghCEEIAEhAwwCCyADUCAJQoCAgICAgMD//wBUIAlCgICAgICAwP//AFEbRQRAIARCgICAgICAIIQhBAwCCyABIApCgICAgICAwP//AIWEUARAQoCAgICAgOD//wAgAiABIAOFIAIgBIVCgICAgICAgICAf4WEUCIFGyEEQgAgASAFGyEDDAILIAMgCUKAgICAgIDA//8AhYRQDQEgASAKhFAEQCADIAmEQgBSDQIgASADgyEDIAIgBIMhBAwCCyADIAmEUEUNACABIQMgAiEEDAELIAMgASABIANUIAkgClYgCSAKURsiCBshCiAEIAIgCBsiDEL///////8/gyEJIAIgBCAIGyILQjCIp0H//wFxIQcgDEIwiKdB//8BcSIFRQRAIAZB4ABqIAogCSAKIAkgCVAiBRt5QsAAQgAgBRt8pyIFQQ9rEEQgBikDaCEJIAYpA2AhCkEQIAVrIQULIAEgAyAIGyEDIAtC////////P4MhASAHBH4gAQUgBkHQAGogAyABIAMgASABUCIHG3lCwABCACAHG3ynIgdBD2sQREEQIAdrIQcgBikDUCEDIAYpA1gLQgOGIANCPYiEQoCAgICAgIAEhCEBIAlCA4YgCkI9iIQgAiAEhSEEAn4gA0IDhiICIAUgB0YNABogBSAHayIHQf8ASwRAQgAhAUIBDAELIAZBQGsgAiABQYABIAdrEEQgBkEwaiACIAEgBxCKASAGKQM4IQEgBikDMCAGKQNAIAYpA0iEQgBSrYQLIQlCgICAgICAgASEIQsgCkIDhiEKAkAgBEIAUwRAQgAhA0IAIQQgCSAKhSABIAuFhFANAiAKIAl9IQIgCyABfSAJIApWrX0iBEL/////////A1YNASAGQSBqIAIgBCACIAQgBFAiBxt5QsAAQgAgBxt8p0EMayIHEEQgBSAHayEFIAYpAyghBCAGKQMgIQIMAQsgCSAKfCICIAlUrSABIAt8fCIEQoCAgICAgIAIg1ANACAJQgGDIARCP4YgAkIBiISEIQIgBUEBaiEFIARCAYghBAsgDEKAgICAgICAgIB/gyEDIAVB//8BTgRAIANCgICAgICAwP//AIQhBEIAIQMMAQtBACEHAkAgBUEASgRAIAUhBwwBCyAGQRBqIAIgBCAFQf8AahBEIAYgAiAEQQEgBWsQigEgBikDACAGKQMQIAYpAxiEQgBSrYQhAiAGKQMIIQQLIARCPYYgAkIDiIQhASAEQgOIQv///////z+DIAetQjCGhCADhCEEAkACQCACp0EHcSIFQQRHBEAgBCABIAEgBUEES618IgNWrXwhBAwBCyAEIAEgASABQgGDfCIDVq18IQQMAQsgBUUN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C14BA38gAEEANgIIIABCADcCACABKAIAIQMgASgCBCIBIANrIgRBAnUiAgRAIAAgAhCuAyAAKAIEIQIgBEUgASADRnJFBEAgAiADIAT8CgAACyAAIAIgBGo2AgQLIAALDQAgACgCACABQQJ0agsXACAAEEcEQCAAIAE2AgQPCyAAIAEQUAthAQF/IwBBEGsiAiQAIAIgADYCDAJAIAAgAUYNAANAIAIgAUEBayIBNgIIIAAgAU8NASACKAIMIAIoAggQ8wIgAiACKAIMQQFqIgA2AgwgAigCCCEBDAALAAsgAkEQaiQAC6wBAQR/IwBBEGsiByQAAkAgAEUNACAEKAIMIQYgAiABa0ECdSIIQQBKBEAgACABIAgQjQIgCEcNAQsgAyABa0ECdSIBIAZIBEAgACAHQQRqIAYgAWsiASAFEP0CIgUQIyABEI0CIQYgBRA5GiABIAZHDQELIAMgAmtBAnUiAUEASgRAIAAgAiABEI0CIAFHDQELIAQoAgwaIARBADYCDCAAIQkLIAdBEGokACAJCycBAX8jAEEQayIDJAAgAyACNgIMIABB5AAgASACENEBIANBEGokAAvbAQIBfwJ+QQEhBAJAIABCAFIgAUL///////////8AgyIFQoCAgICAgMD//wBWIAVCgICAgICAwP//AFEbDQAgAkIAUiADQv///////////wCDIgZCgICAgICAwP//AFYgBkKAgICAgIDA//8AURsNACAAIAKEIAUgBoSEUARAQQAPCyABIAODQgBZBEAgACACVCABIANTIAEgA1EbBEBBfw8LIAAgAoUgASADhYRCAFIPCyAAIAJWIAEgA1UgASADURsEQEF/DwsgACAChSABIAOFhEIAUiEECyAEC+wBAQR/IwBBEGsiBCQAIABBADYCBCMAQRBrIgUkACAEQQA6AA8gACAAKAIAQQxrKAIAahDZASEGIAAgACgCAEEMaygCAGohAwJAIAYEQCADKAJIBEAgACAAKAIAQQxrKAIAaigCSBDFAwsgBCAAIAAoAgBBDGsoAgBqENkBOgAPDAELIANBBBDVAQsgBUEQaiQAQQQhAyAELQAPBEAgACAAIAAoAgBBDGsoAgBqKAIYIgMgASACIAMoAgAoAiARAwAiATYCBEEGQQAgASACRxshAwsgACAAKAIAQQxrKAIAaiADENUBIARB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AxsLPAAgAEEANgIIIABCADcCACAAIAEoAgA2AgAgACABKAIENgIEIAAgASgCCDYCCCABQQA2AgggAUIANwIACywBAX8gAEEANgIIIABCADcCACAAIAEoAgAiAiABKAIEIgEgASACaxDAAyAACwgAIABB/wFxC/wBAQN/IAAoAgQgACgCACIDa0ECdSICIAFJBEAjAEEgayIDJAACQCABIAJrIgIgACgCCCAAKAIEIgFrQQJ1TQRAIAAoAgQiASACQQJ0aiECA0AgASACRgRAIAAgAjYCBAUgAUEANgIAIAFBBGohAQwBCwsMAQsgA0EMaiAAIAEgACgCAGtBAnUgAmoQtgEgACgCBCAAKAIAa0ECdSAAEIcCIgQoAggiASACQQJ0aiECA0AgASACRwRAIAFBADYCACABQQRqIQEMAQsLIAQgAjYCCCAAIAQQhQIgBBCBAgsgA0EgaiQADwsgASACSQRAIAAgAyABQQJ0ajYCBAsLUgECf0HU3gEoAgAiASAAQQdqQXhxIgJqIQACQCACQQAgACABTRtFBEAgAD8AQRB0TQ0BIAAQGA0BC0GI6gFBMDYCAEF/DwtB1N4BIAA2AgAgAQt/AgF+A38CQCAAQoCAgIAQVARAIAAhAgwBCwNAIAFBAWsiASAAIABCCoAiAkIKfn2nQTByOgAAIABC/////58BViACIQANAAsLIAJQRQRAIAKnIQMDQCABQQFrIgEgAyADQQpuIgRBCmxrQTByOgAAIANBCUsgBCEDDQALCyABC78BAQN/IAAoAgQgACgCACIDayICIAFJBEAjAEEgayIDJAACQCABIAJrIgIgACgCCCAAKAIEIgFrTQRAIAAgAhCYAwwBCyACIANBDGogACABIAJqIAAoAgBrELQBIAAoAgQgACgCAGsgABDGASIEKAIIIgFqIQIDQCABIAJHBEAgAUEAOgAAIAFBAWohAQwBCwsgBCACNgIIIAAgBBDvASAEELoBCyADQSBqJAAPCyABIAJJBEAgACABIANqNgIECwt9AQN/AkACQCAAIgFBA3FFDQAgAS0AAEUEQEEADwsDQCABQQFqIgFBA3FFDQEgAS0AAA0ACwwBCwNAIAEiAkEEaiEBQYCChAggAigCACIDayADckGAgYKEeHFBgIGChHhGDQALA0AgAiIBQQFqIQIgAS0AAA0ACwsgASAA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BEBBCiEBIAAQXgwBCyAAEH5BAWshASAAKAIECyIDIAFGBEAgACABQQEgASABEPQBIAAQIxoMAQsgABAjGiAEDQAgACIBIANBAWoQUAwBCyAAKAIAIQEgACADQQFqNgIECyABIANqIgAgAkEPahBdIAJBADoADiAAQQFqIAJBDmoQXSACQRBqJAALoQIBA38jAEEgayIIJABB9////wciCSABQX9zaiACTwRAIAAQIyEKIAFB8////wNJBEAgCCABQQF0NgIcIAggASACajYCECAIQRBqIAhBHGoQoAEoAgAQnwFBAWohCQsgCEEcaiAIQRhqIAAQVSgCABC8ASAIQRBqIAkQngEgCCgCECECIAgoAhQaIAQEQCACIAogBBBNCyAGBEAgAiAEaiAHIAYQTQsgAyAEIAVqIglrIQcgAyAJRwRAIAIgBGogBmogBCAKaiAFaiAHEE0LIAFBCkcEQCAKEIsCCyAAIAI2AgAgACAIKAIUEFwgACAEIAZqIAdqIgA2AgQgCEEAOgAPIAAgAmogCEEPahBdIAhBHGoQuwEgCEEgaiQADwsQWwALCQAgAEEBEKgCCwoAIAAoAgAQHxoLCQAgACABEFUaCwcAIABBAkkLBABBBAsoAQF/IAAgACgCBEEBayIBNgIEIAFBf0YEQCAAIAAoAgAoAggRAgALC5UBAQN/IwBBEGsiBCQAIAQgATYCDCAEIAM2AgggBEEEaiAEQQxqEGMgBCgCCCEDIwBBEGsiASQAIAEgAzYCDCABIAM2AghBfyEFAkBBAEEAIAIgAxDRASIDQQBIDQAgACADQQFqIgMQNCIANgIAIABFDQAgACADIAIgASgCDBDRASEFCyABQRBqJAAQYiAEQRBqJAAgBQsPACAAIAAoAgAoAiQRAAALEQAgACABIAEoAgAoAiARAQALDgAgACABKAIANgIAIAALCABB/////wcLBQBB/wALOwAgACADNgIQIAAgAQR/IAEQUwVBAAsiAzYCACAAIAIgA2oiAjYCCCAAIAEgA2o2AgwgACACNgIEIAALYQEBfyMAQRBrIgIkACACIAA2AgwCQCAAIAFGDQADQCACIAFBBGsiATYCCCAAIAFPDQEgAigCDCACKAIIENcBIAIgAigCDEEEaiIANgIMIAIoAgghAQwACwALIAJBEGokAAs5AgF/AX4jAEEQayIEJAAgAykDACEFIAQgAykDCDcDCCAEIAU3AwAgACABIAIgBBDAASAEQRBqJAAL0AEBAn8gAkGAEHEEQCAAQSs6AAAgAEEBaiEACyACQYAIcQRAIABBIzoAACAAQQFqIQALIAJBhAJxIgNBhAJHBEAgAEGu1AA7AAAgAEECaiEACyACQYCAAXEhAgNAIAEtAAAiBARAIAAgBDoAACAAQQFqIQAgAUEBaiEBDAELCyAAAn8CQCADQYACRwRAIANBBEcNAUHGAEHmACACGwwCC0HFAEHlACACGwwBC0HBAEHhACACGyADQYQCRg0AGkHHAEHnACACGws6AAAgA0GEAkcLKwEBfyMAQRBrIgUkACAFIAQoAgA2AgAgACABIAIgAyAFEJYBIAVBEGokAAuqAQEBfwJAIANBgBBxRSACRXINACADQcoAcSIEQQhGIARBwABGcg0AIABBKzoAACAAQQFqIQALIANBgARxBEAgAEEjOgAAIABBAWohAAsDQCABLQAAIgQEQCAAIAQ6AAAgAEEBaiEAIAFBAWohAQwBCwsgAAJ/Qe8AIANBygBxIgFBwABGDQAaQdgAQfgAIANBgIABcRsgAUEIRg0AGkHkAEH1ACACGws6AAALDAAgABAjIAFBAnRqC5IEAQt/IwBBgAFrIgokACAKIAE2AnwgAiADELUCIQggCkHjADYCECAKQQhqQQAgCkEQaiIJEDYhDwJAAkACQCAIQeUATwRAIAgQNCIJRQ0BIA8gCRA8CyAJIQcgAiEBA0AgASADRgRAA0AgACAKQfwAaiIBECtBASAIGwRAIAAgARArBEAgBSAFKAIAQQJyNgIACwNAIAIgA0YNBiAJLQAAQQJGDQcgCUEBaiEJIAJBDGohAgwACwALIAAQNyEOIAZFBEAgBCAOEEEhDgsgDUEBaiEMQQAhECAJIQcgAiEBA0AgASADRgRAIAwhDSAQRQ0CIAAQPhogCSEHIAIhASAIIAtqQQJJDQIDQCABIANGBEAMBAUCQCAHLQAAQQJHDQAgARAfIA1GDQAgB0EAOgAAIAtBAWshCwsgB0EBaiEHIAFBDGohAQwBCwALAAUCQCAHLQAAQQFHDQAgASANEMwBKAIAIRECQCAGBH8gEQUgBCAREEELIA5GBEBBASEQIAEQHyAMRw0CIAdBAjoAACALQQFqIQsMAQsgB0EAOgAACyAIQQFrIQgLIAdBAWohByABQQxqIQEMAQsACwALAAUgB0ECQQEgARBaIgwbOgAAIAdBAWohByABQQxqIQEgCyAMaiELIAggDGshCAwBCwALAAsQPQALIAUgBSgCAEEEcjYCAAsgDxA1IApBgAFqJAAgAgsRACAAIAEgACgCACgCDBEEAAuTBAELfyMAQYABayIKJAAgCiABNgJ8IAIgAxC1AiEIIApB4wA2AhAgCkEIakEAIApBEGoiCRA2IQ8CQAJAAkAgCEHlAE8EQCAIEDQiCUUNASAPIAkQPAsgCSEHIAIhAQNAIAEgA0YEQANAIAAgCkH8AGoiARAsQQEgCBsEQCAAIAEQLARAIAUgBSgCAEECcjYCAAsDQCACIANGDQYgCS0AAEECRg0HIAlBAWohCSACQQxqIQIMAAsACyAAEDghDiAGRQRAIAQgDhDOASEOCyANQQFqIQxBACEQIAkhByACIQEDQCABIANGBEAgDCENIBBFDQIgABA/GiAJIQcgAiEBIAggC2pBAkkNAgNAIAEgA0YEQAwEBQJAIActAABBAkcNACABEB8gDUYNACAHQQA6AAAgC0EBayELCyAHQQFqIQcgAUEMaiEBDAELAAsABQJAIActAABBAUcNACABIA0QIiwAACERAkAgBgR/IBEFIAQgERDOAQsgDkYEQEEBIRAgARAfIAxHDQIgB0ECOgAAIAtBAWohCwwBCyAHQQA6AAALIAhBAWshCAsgB0EBaiEHIAFBDGohAQwBCwALAAsABSAHQQJBASABEFoiDBs6AAAgB0EBaiEHIAFBDGohASALIAxqIQsgCCAMayEIDAELAAsACxA9AAsgBSAFKAIAQQRyNgIACyAPEDUgCkGAAWokACACC0oBAn8CQCAALQAAIgJFIAIgAS0AACIDR3INAANAIAEtAAEhAyAALQABIgJFDQEgAUEBaiEBIABBAWohACACIANGDQALCyACIANrC4QBAQJ/IwBBoAFrIgQkACAEIAAgBEGeAWogARsiADYClAEgBCABQQFrIgVBACABIAVPGzYCmAEgBEEAQZAB/AsAIARBfzYCTCAEQeIANgIkIARBfzYCUCAEIARBnwFqNgIsIAQgBEGUAWo2AlQgAEEAOgAAIAQgAiADEM0DIARBoAFqJAALuwIBBH8gA0H87QEgAxsiBSgCACEDAkAC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IBAtIAAoAiQQLSAAKAIwEC0gACgCPBAtCyAACwcAIAEgAGsLDABBARDWARogABAtCwkAIAAQsQEQLQsTACAAIAEgAiAAKAIAKAIwEQMACwkAIAAQ2AEQLQsMACAAQQRqENoBIAALDAAgAEEIahDaASAACygBAn8jAEEQayICJAAgASgCACAAKAIASCEDIAJBEGokACABIAAgAxsLEAAgACABNwMIIABCADcDAAsCAAsUACAAQZj1ADYCACAAQQRqECUgAAvyAwICfgV/IwBBIGsiBSQAIAFC////////P4MhAgJ+IAFCMIhC//8BgyIDpyIEQYH4AGtB/Q9NBEAgAkIEhiAAQjyIhCECIARBgPgAa60hAwJAIABC//////////8PgyIAQoGAgICAgICACFoEQCACQgF8IQIMAQsgAEKAgICAgICAgAhSDQAgAkIBgyACfCECC0IAIAIgAkL/////////B1YiBBshACAErSADfAwBCyAAIAKEUCADQv//AVJyRQRAIAJCBIYgAEI8iIRCgICAgICAgASEIQBC/w8MAQsgBEH+hwFLBEBCACEAQv8PDAELQYD4AEGB+AAgA1AiBxsiCCAEayIGQfAASgRAQgAhAEIADAELIAVBEGogACACIAJCgICAgICAwACEIAcbIgJBgAEgBmsQRCAFIAAgAiAGEIoBIAUpAwhCBIYgBSkDACICQjyIhCEAAkAgBCAIRyAFKQMQIAUpAxiEQgBSca0gAkL//////////w+DhCICQoGAgICAgICACFoEQCAAQgF8IQAMAQsgAkKAgICAgICAgAhSDQAgAEIBgyAAfCEACyAAQoCAgICAgIAIhSAAIABC/////////wdWIgQbIQAgBK0LIQIgBUEgaiQAIAFCgICAgICAgICAf4MgAkI0hoQgAIS/C4kCAAJAIAAEfyABQf8ATQ0BAkBB3OEBKAIAKAIARQRAIAFBgH9xQYC/A0YNAwwBCyABQf8PTQRAIAAgAUE/cUGAAXI6AAEgACABQQZ2QcABcjoAAEECDwsgAUGAQHFBgMADRyABQYCwA09xRQRAIAAgAUE/cUGAAXI6AAIgACABQQx2QeABcjoAACAAIAFBBnZBP3FBgAFyOgABQQMPCyABQYCABGtB//8/TQRAIAAgAUE/cUGAAXI6AAMgACABQRJ2QfABcjoAACAA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AXI2AgQgCSAGIAkoAgBBAXFyQQJyNgIAIAEgBmoiAiACKAIEQQFyNgIEIAEgBhDbAQsCQCAAKAIEIgJBA3FFDQAgAkF4cSIBIAVBEGpNDQAgACAFIAJBAXFyQQJyNgIEIAAgBWoiBCABIAVrIgJBA3I2AgQgACABaiIBIAEoAgRBAXI2AgQgBCACENsBCyAAQQhqCwsiAEUNARogCCAANgIMQQAhAQsgAQshAEEAIAgoAgwgABshAQsgCEEQaiQAIAENAEHk/gEoAgAiAEUNACAAEQwADAELCyABRQRAEOsBCyABCwoAIAEgAGtBDG0LCQAgABAuNgIACyMBAn8gACEBA0AgASICQQRqIQEgAigCAA0ACyACIABrQQJ1Cy8BAX8jAEEQayIDJAACQCAAIAFGBEAgAEEAOgB4DAELIAEgAhCpAQsgA0EQaiQACxAAIAAoAgggACgCAGtBAnULCQAgAEEANgIAC0kBAX8jAEEQayIDJAACQAJAIAJBHksNACABLQB4QQFxDQAgAUEBOgB4DAELIAIQwQIhAQsgA0EQaiQAIAAgAjYCBCAAIAE2AgALOgECfyMAQRBrIgAkACAAQf////8DNgIMIABB/////wc2AgggAEEMaiAAQQhqELUDKAIAIABBEGokAAs0AQF/IwBBEGsiAyQAIAMgARBzNgIMIAMgAhBzNgIIIAAgA0EMaiADQQhqEGYgA0EQaiQAC04BAX8jAEEQayIDJAAgAyABNgIIIAMgADYCDCADIAI2AgRBACEBIANBBGoiACADQQxqENMBRQRAIAAgA0EIahDTASEBCyADQRBqJAAgAQswAQF/IwBBEGsiAyQAIAMgATYCDCADIAI2AgggACADQQxqIANBCGoQZiADQRBqJAALMwEBfyMAQRBrIgMkACAAEB8aIAAgAhCDASADQQA6AA8gASACaiADQQ9qEF0gA0EQaiQACzEAIABB/////wNLBEAQqgIACwJ/IABBAnQhAEEEENYBBEAgAEEEELQCDAELIAAQUwsLCQAgABDtARAtCxUAIABB8KoBNgIAIABBEGoQIBogAAsVACAAQciqATYCACAAQQxqECAaIAALgAMBBH8gAiEAA0ACQCAEIAdNIAAgA09yDQAgACwAACIBQf8BcSEFAn9BASABQQBODQAaIAFBQkkNASABQV9NBEAgAyAAa0ECSA0CIAAtAAFBwAFxQYABRw0CQQIMAQsgAUFvTQRAIAMgAGtBA0gNAiAALQACIAAsAAEhAQJAAkAgBUHtAUcEQCAFQeABRw0BIAFBYHFBoH9GDQIMBQsgAUGgf04NBAwBCyABQb9/Sg0DC0HAAXFBgAFHDQJBAwwBCyADIABrQQRIIAFBdEtyDQEgAC0AAyEGIAAtAAIhCCAALAABIQECQAJAAkACQCAFQfABaw4FAAICAgECCyABQfAAakH/AXFBME8NBAwCCyABQZB/Tg0DDAELIAFBv39KDQILIAhBwAFxQYABRyAGQcABcUGAAUdyIAZBP3EgCEEGdEHAH3EgBUESdEGAgPAAcSABQT9xQQx0cnJyQf//wwBLcg0BQQQLIQEgB0EBaiEHIAAgAWohAAwBCwsgACACawu4BAEEfyMAQRBrIgAkAAJ/IAAgAjYCDCAAIAU2AggCQAJAA0AgAiADTyAFIAZPckUEQCACLAAAIghB/wFxIQECfyAIQQBOBEAgAUH//8MASw0FQQEMAQsgCEFCSQ0EIAhBX00EQEEBIAMgAmtBAkgNBhpBAiEIIAItAAEiCUHAAXFBgAFHDQQgCUE/cSABQQZ0QcAPcXIhAUECDAELIAhBb00EQEEBIQggAyACayIKQQJIDQQgAiwAASEJAkACQCABQe0BRwRAIAFB4AFHDQEgCUFgcUGgf0YNAgwICyAJQaB/SA0BDAcLIAlBv39KDQYLIApBAkYNBCACLQACIghBwAFxQYABRw0FIAhBP3EgAUEMdEGA4ANxIAlBP3FBBnRyciEBQQMMAQsgCEF0Sw0EQQEhCCADIAJrIgpBAkgNAyACLAABIQkCQAJAAkACQCABQfABaw4FAAICAgECCyAJQfAAakH/AXFBME8NBwwCCyAJQZB/Tg0GDAELIAlBv39KDQULIApBAkYNAyACLQACIgtBwAFxQYABRw0EIApBA0YNAyACLQADIgpBwAFxQYABRw0EQQIhCCAKQT9xIAtBBnRBwB9xIAFBEnRBgIDwAHEgCUE/cUEMdHJyciIBQf//wwBLDQNBBAshCCAFIAE2AgAgACACIAhqIgI2AgwgACAFQQRqIgU2AggMAQsLIAIgA0khCAsgCAwBC0ECCyAEIAAoAgw2AgAgByAAKAIINgIAIABBEGokAAv1AwAjAEEQayIAJAACfyAAIAI2AgwgACAFNgIIAkADQAJAIAIgA08EQEEAIQUMAQtBAiEFIAIoAgAiAUH//8MASyABQYBwcUGAsANGcg0AAkAgAUH/AE0EQEEBIQUgBiAAKAIIIgJrQQBMDQIgACACQQFqNgIIIAIgAToAAAwBCyABQf8PTQRAIAYgACgCCCICa0ECSA0EIAAgAkEBajYCCCACIAFBBnZBwAFyOgAAIAAgACgCCCICQQFqNgIIIAIgAUE/cUGAAXI6AAAMAQsgBiAAKAIIIgJrIQUgAUH//wNNBEAgBUEDSA0EIAAgAkEBajYCCCACIAFBDHZB4AFyOgAAIAAgACgCCCICQQFqNgIIIAIgAUEGdkE/cUGAAXI6AAAgACAAKAIIIgJBAWo2AgggAiABQT9xQYABcjoAAAwBCyAFQQRIDQMgACACQQFqNgIIIAIgAUESdkHwAXI6AAAgACAAKAIIIgJBAWo2AgggAiABQQx2QT9xQYABcjoAACAAIAAoAggiAkEBajYCCCACIAFBBnZBP3FBgAFyOgAAIAAgACgCCCICQQFqNgIIIAIgAUE/cUGAAXI6AAALIAAgACgCDEEEaiICNgIMDAELCyAFDAELQQELIAQgACgCDDYCACAHIAAoAgg2AgAgAEEQaiQAC5IDAQR/IAIhAANAAkAgBCAGTSAAIANPcg0AAn8gAEEBaiAALQAAIgHAQQBODQAaIAFBwgFJDQEgAUHfAU0EQCADIABrQQJIDQIgAC0AAUHAAXFBgAFHDQIgAEECagwBCyABQe8BTQRAIAMgAGtBA0gNAiAALQACIAAsAAEhBQJAAkAgAUHtAUcEQCABQeABRw0BIAVBYHFBoH9GDQIMBQsgBUGgf04NBAwBCyAFQb9/Sg0DC0HAAXFBgAFHDQIgAEEDagwBCyADIABrQQRIIAFB9AFLciAEIAZrQQJJcg0BIAAtAAMhByAALQACIQggACwAASEFAkACQAJAAkAgAUHwAWsOBQACAgIBAgsgBUHwAGpB/wFxQTBPDQQMAgsgBUGQf04NAwwBCyAFQb9/Sg0CCyAIQcABcUGAAUcgB0HAAXFBgAFHciAHQT9xIAhBBnRBwB9xIAFBEnRBgIDwAHEgBUE/cUEMdHJyckH//8MAS3INASAGQQFqIQYgAEEEagshACAGQQFqIQYMAQsLIAAgAmsLgQUBBX8jAEEQayIAJAACfyAAIAI2AgwgACAFNgIIAkACQANAIAIgA08gBSAGT3JFBEBBAiEJIAACfyACLQAAIgHAQQBOBEAgBSABOwEAQQEMAQsgAUHCAUkNBCABQd8BTQRAQQEgAyACa0ECSA0GGiACLQABIghBwAFxQYABRw0EIAUgCEE/cSABQQZ0QcAPcXI7AQBBAgwBCyABQe8BTQRAQQEhCSADIAJrIgpBAkgNBCACLAABIQgCQAJAIAFB7QFHBEAgAUHgAUcNASAIQWBxQaB/Rw0IDAILIAhBoH9ODQcMAQsgCEG/f0oNBgsgCkECRg0EIAItAAIiCUHAAXFBgAFHDQUgBSAJQT9xIAhBP3FBBnQgAUEMdHJyOwEAQQMMAQsgAUH0AUsNBEEBIQkgAyACayIKQQJIDQMgAi0AASILwCEIAkACQAJAAkAgAUHwAWsOBQACAgIBAgsgCEHwAGpB/wFxQTBPDQcMAgsgCEGQf04NBgwBCyAIQb9/Sg0FCyAKQQJGDQMgAi0AAiIIQcABcUGAAUcNBCAKQQNGDQMgAi0AAyIKQcABcUGAAUcNBCAGIAVrQQNIDQNBAiEJIApBP3EiCiAIQQZ0IgxBwB9xIAtBDHRBgOAPcSABQQdxIgFBEnRycnJB///DAEsNAyAFIAogDEHAB3FyQYC4A3I7AQIgBSAIQQR2QQNxIAtBAnQiCUHAAXEgAUEIdHIgCUE8cXJyQcD/AGpBgLADcjsBACAFQQJqIQVBBAsgAmoiAjYCDCAAIAVBAmoiBTYCCAwBCwsgAiADSSEJCyAJDAELQQILIAQgACgCDDYCACAHIAAoAgg2AgAgAEEQaiQAC8sFAQJ/IwBBEGsiACQAAn8gACACNgIMIAAgBTYCCAJAAkADQCACIANPBEBBACEFDAILQQIhBQJAAkAgAi8BACIBQf8ATQRAQQEhBSAGIAAoAggiAmtBAEwNBCAAIAJBAWo2AgggAiABOgAADAELIAFB/w9NBEAgBiAAKAIIIgJrQQJIDQUgACACQQFqNgIIIAIgAUEGdkHAAXI6AAAgACAAKAIIIgJBAWo2AgggAiABQT9xQYABcjoAAAwBCyABQf+vA00EQCAGIAAoAggiAmtBA0gNBSAAIAJBAWo2AgggAiABQQx2QeABcjoAACAAIAAoAggiAkEBajYCCCACIAFBBnZBP3FBgAFyOgAAIAAgACgCCCICQQFqNgIIIAIgAUE/cUGAAXI6AAAMAQsgAUH/twNNBEBBASEFIAMgAmtBA0gNBCACLwECIghBgPgDcUGAuANHDQIgBiAAKAIIIglrQQRIDQQgCEH/B3EgAUEKdEGA+ANxIAFBwAdxIgVBCnRyckH//z9LDQIgACACQQJqNgIMIAAgCUEBajYCCCAJIAVBBnZBAWoiAkECdkHwAXI6AAAgACAAKAIIIgVBAWo2AgggBSACQQR0QTBxIAFBAnZBD3FyQYABcjoAACAAIAAoAggiAkEBajYCCCACIAhBBnZBD3EgAUEEdEEwcXJBgAFyOgAAIAAgACgCCCIBQQFqNgIIIAEgCEE/cUGAAXI6AAAMAQsgAUGAwANJDQMgBiAAKAIIIgJrQQNIDQQgACACQQFqNgIIIAIgAUEMdkHgAXI6AAAgACAAKAIIIgJBAWo2AgggAiABQQZ2Qb8BcToAACAAIAAoAggiAkEBajYCCCACIAFBP3FBgAFyOgAACyAAIAAoAgxBAmoiAjYCDAwBCwtBAgwCCyAFDAELQQELIAQgACgCDDYCACAHIAAoAgg2AgAgAEEQaiQACw8AIAEgACgCAGogAjYCAAs8AQJ/IwBBEGsiASQAIAEgADYCDCABQQhqIAFBDGoQY0EEQQFB3OEBKAIAKAIAGyECEGIgAUEQaiQAIAILOAEBfyMAQRBrIgUkACAFIAQ2AgwgBUEIaiAFQQxqEGMgACABIAIgAxDSASEAEGIgBUEQaiQAIAALEgAgBCACNgIAIAcgBTYCAEEDCw0AIAEgACgCAGooAgALKwEBfyAAQdyhATYCAAJAIAAoAggiAUUNACAALQAMQQFxRQ0AIAEQLQsgAAsEACABCycBAX8gACgCACgCACgCAEHM8gFBzPIBKAIAQQFqIgA2AgAgADYCBAu0CgEHf0HI8gEtAABFBEAjAEEQayIFJABBwPIBLQAARQRAIwBBEGsiBiQAIAZBATYCDEGg8QEgBigCDBAyIgFByKEBNgIAIwBBEGsiAyQAIAFBCGoiAkEANgIIIAJCADcCACACQQA6AIQBIANBCGogAhBVKAIAGiADQQA6AA8jAEEQayIEJAAQvAJBHkkEQBCMAQALIARBCGogAkEMakEeELsCIAIgBCgCCCIHNgIEIAIgBzYCACACIAcgBCgCDEECdGo2AgggBEEQaiQAIAJBHhDZAiADQQE6AA8gA0EQaiQAIAFBkAFqQYwWELABIAIQ2gJBrPwBQQEQMkHotQE2AgAgAUGs/AFB+O8BEDEQM0G0/AFBARAyQYi2ATYCACABQbT8AUGA8AEQMRAzQbz8AUEBEDIiAkEAOgAMIAJBADYCCCACQdyhATYCACACQZCiATYCCCABQbz8AUHY8gEQMRAzQcz8AUEBEDJByK0BNgIAIAFBzPwBQdDyARAxEDNB1PwBQQEQMkHgrgE2AgAgAUHU/AFB4PIBEDEQM0Hc/AFBARAyIgJBmKoBNgIAIAIQLjYCCCABQdz8AUHo8gEQMRAzQej8AUEBEDJB9K8BNgIAIAFB6PwBQfDyARAxEDNB8PwBQQEQMkHcsQE2AgAgAUHw/AFBgPMBEDEQM0H4/AFBARAyQeiwATYCACABQfj8AUH48gEQMRAzQYD9AUEBEDJB0LIBNgIAIAFBgP0BQYjzARAxEDNBiP0BQQEQMiICQa7YADsBCCACQciqATYCACACQQxqECQaIAFBiP0BQZDzARAxEDNBoP0BQQEQMiICQq6AgIDABTcCCCACQfCqATYCACACQRBqECQaIAFBoP0BQZjzARAxEDNBvP0BQQEQMkGotgE2AgAgAUG8/QFBiPABEDEQM0HE/QFBARAyQaC4ATYCACABQcT9AUGQ8AEQMRAzQcz9AUEBEDJB9LkBNgIAIAFBzP0BQZjwARAxEDNB1P0BQQEQMkHguwE2AgAgAUHU/QFBoPABEDEQM0Hc/QFBARAyQcTDATYCACABQdz9AUHI8AEQMRAzQeT9AUEBEDJB2MQBNgIAIAFB5P0BQdDwARAxEDNB7P0BQQEQMkHMxQE2AgAgAUHs/QFB2PABEDEQM0H0/QFBARAyQcDGATYCACABQfT9AUHg8AEQMRAzQfz9AUEBEDJBtMcBNgIAIAFB/P0BQejwARAxEDNBhP4BQQEQMkHcyAE2AgAgAUGE/gFB8PABEDEQM0GM/gFBARAyQYTKATYCACABQYz+AUH48AEQMRAzQZT+AUEBEDJBrMsBNgIAIAFBlP4BQYDxARAxEDNBnP4BQQEQMiICQZjVATYCCCACQai9ATYCACACQdi9ATYCCCABQZz+AUGo8AEQMRAzQaj+AUEBEDIiAkG81QE2AgggAkG0vwE2AgAgAkHkvwE2AgggAUGo/gFBsPABEDEQM0G0/gFBARAyIgJBCGoQtgIgAkGkwQE2AgAgAUG0/gFBuPABEDEQM0HA/gFBARAyIgJBCGoQtgIgAkHEwgE2AgAgAUHA/gFBwPABEDEQM0HM/gFBARAyQdTMATYCACABQcz+AUGI8QEQMRAzQdT+AUEBEDJBzM0BNgIAIAFB1P4BQZDxARAxEDMgBkEQaiQAIAVBoPEBNgIIQbzyASAFKAIIEFUaQcDyAUEBOgAACyAFQRBqJABBxPIBQbzyARDVAkHI8gFBAToAAAsgAEHE8gEoAgAiADYCACAAENQCCxEAIABBoPEBRwRAIAAQ1wILCxMAIAAgASgCACIANgIAIAAQ1AILlwEBA38gAEHIoQE2AgAgAEEIaiEBA0AgARBrIAJLBEAgASACEIIBKAIABEAgASACEIIBKAIAEL8BCyACQQFqIQIMAQsLIABBkAFqECAaIwBBEGsiAiQAIAJBDGogARBVIgEoAgAiAygCAARAIAMQ2gIgASgCABogASgCACIBQQxqIAEoAgAgARC5AhC4AgsgAkEQaiQAIAALDwAgACAAKAIEQQFqNgIECyYBAX8gACgCBCECA0AgASACRwRAIAJBBGshAgwBCwsgACABNgIEC3UBAn8jAEEQayIDJAAgA0EEaiICIAA2AgAgAiAAKAIEIgA2AgQgAiAAIAFBAnRqNgIIIAIiASgCBCEAIAIoAgghAgNAIAAgAkYEQCABKAIAIAEoAgQ2AgQgA0EQaiQABSAAELoCIAEgAEEEaiIANgIEDAELCwsRACAAEGsaIAAgACgCABDYAgsgACAAQZiqATYCACAAKAIIEC5HBEAgACgCCBCgAwsgAAsEAEF/C+EBAQR/IwBBEGsiBSQAIwBBIGsiAyQAIANBGGogACABEL0CIAMoAhghBCADKAIcIQYjAEEQayIBJAAgASAGNgIMIAIgBCAGIARrIgRBAnUQZSABIAIgBGo2AgggA0EQaiABQQxqIAFBCGoQZiABQRBqJAAgAygCECEEIwBBEGsiASQAIAEgADYCDCABQQxqIgAgBCAAEOwBa0ECdRDwASEAIAFBEGokACADIAA2AgwgAyACIAMoAhQQjgE2AgggBUEIaiADQQxqIANBCGoQZiADQSBqJAAgBSgCDCAFQRBqJAAL9gUBCn8jAEEQayITJAAgAiAANgIAQQRBACAHGyEVIANBgARxIRYDQCAUQQRGBEAgDRAfQQFLBEAgEyANEE42AgwgAiATQQxqQQEQ8AEgDRB1IAIoAgAQ3QI2AgALIANBsAFxIgNBEEcEQCABIANBIEYEfyACKAIABSAACzYCAAsgE0EQaiQABQJAAkACQAJAAkACQCAIIBRqLQAADgUAAQMCBAULIAEgAigCADYCAAwECyABIAIoAgA2AgAgBkEgEEshByACIAIoAgAiD0EEajYCACAPIAc2AgAMAwsgDRBaDQIgDUEAEMwBKAIAIQcgAiACKAIAIg9BBGo2AgAgDyAHNgIADAILIAwQWiAWRXINASACIAwQTiAMEHUgAigCABDdAjYCAAwBCyACKAIAIAQgFWoiBCEHA0ACQCAFIAdNDQAgBkHAACAHKAIAEF9FDQAgB0EEaiEHDAELCyAOQQBKBEAgAigCACEPIA4hEANAIBBFIAQgB09yRQRAIBBBAWshECAHQQRrIgcoAgAhESACIA9BBGoiEjYCACAPIBE2AgAgEiEPDAELCyAQBH8gBkEwEEsFQQALIREgAigCACEPA0AgEEEASgRAIAIgD0EEaiISNgIAIA8gETYCACAQQQFrIRAgEiEPDAELCyACIAIoAgAiD0EEajYCACAPIAk2AgALAkAgBCAHRgRAIAZBMBBLIQcgAiACKAIAIg9BBGo2AgAgDyAHNgIADAELIAsQWgR/QX8FIAtBABAiLAAACyESQQAhEEEAIREDQCAEIAdGDQECQCAQIBJHBEAgECEPDAELIAIgAigCACIPQQRqNgIAIA8gCjYCAEEAIQ8gCxAfIBFBAWoiEU0EQCAQIRIMAQsgCyARECItAABB/wBGBEBBfyESDAELIAsgERAiLAAAIRILIAdBBGsiBygCACEQIAIgAigCACIYQQRqNgIAIBggEDYCACAPQQFqIRAMAAsACyACKAIAEMcBCyAUQQFqIRQMAQsLC70BAQF/IwBBEGsiCiQAAn8gAARAIAIQ5gIMAQsgAhDlAgshAAJAIAEEQCAKQQRqIgEgABCSASADIAooAgQ2AAAgASAAEMIBDAELIApBBGoiASAAEOECIAMgCigCBDYAACABIAAQewsgCCABEKsBIAEQORogBCAAEHg2AgAgBSAAEFk2AgAgCkEEaiIBIAAQWCAGIAEQcCABECAaIAEgABB8IAcgARCrASABEDkaIAkgABDBATYCACAKQRBqJAAL2wEBBH8jAEEQayIFJAAjAEEgayIDJAAgA0EYaiAAIAEQvQIgAygCGCEEIAMoAhwhBiMAQRBrIgEkACABIAY2AgwgAiAEIAYgBGsiBBBNIAEgAiAEajYCCCADQRBqIAFBDGogAUEIahBmIAFBEGokACADKAIQIQQjAEEQayIBJAAgASAANgIMIAFBDGoiACAEIAAQ7AFrEPMBIQAgAUEQaiQAIAMgADYCDCADIAIgAygCFBCOATYCCCAFQQhqIANBDGogA0EIahBmIANBIGokACAFKAIMIAVBEGokAAsRACAAIAEgASgCACgCKBEBAAvLBQEKfyMAQRBrIhQkACACIAA2AgAgA0GABHEhFgNAIBVBBEYEQCANEB9BAUsEQCAUIA0QTjYCDCACIBRBDGpBARDzASANEHcgAigCABDgAjYCAAsgA0GwAXEiA0EQRwRAIAEgA0EgRgR/IAIoAgAFIAALNgIACyAUQRBqJAAFAkACQAJAAkACQAJAIAggFWotAAAOBQABAwIEBQsgASACKAIANgIADAQLIAEgAigCADYCACAGQSAQQSEPIAIgAigCACIQQQFqNgIAIBAgDzoAAAwDCyANEFoNAiANQQAQIi0AACEPIAIgAigCACIQQQFqNgIAIBAgDzoAAAwCCyAMEFogFkVyDQEgAiAMEE4gDBB3IAIoAgAQ4AI2AgAMAQsgAigCACAEIAdqIgQhEQNAAkAgBSARTQ0AIAZBwAAgESwAABBgRQ0AIBFBAWohEQwBCwsgDiIPQQBKBEADQCAPRSAEIBFPckUEQCAPQQFrIQ8gEUEBayIRLQAAIRAgAiACKAIAIhJBAWo2AgAgEiAQOgAADAELCyAPBH8gBkEwEEEFQQALIRIDQCACIAIoAgAiEEEBajYCACAPQQBKBEAgECASOgAAIA9BAWshDwwBCwsgECAJOgAACwJAIAQgEUYEQCAGQTAQQSEPIAIgAigCACIQQQFqNgIAIBAgDzoAAAwBCyALEFoEf0F/BSALQQAQIiwAAAshEEEAIQ9BACETA0AgBCARRg0BAkAgDyAQRwRAIA8hEgwBCyACIAIoAgAiEEEBajYCACAQIAo6AABBACESIAsQHyATQQFqIhNNBEAgDyEQDAELIAsgExAiLQAAQf8ARgRAQX8hEAwBCyALIBMQIiwAACEQCyARQQFrIhEtAAAhDyACIAIoAgAiGEEBajYCACAYIA86AAAgEkEBaiEPDAALAAsgAigCABCEAQsgFUEBaiEVDAELCwu7AQEBfyMAQRBrIgokAAJ/IAAEQCACEO0CDAELIAIQ7AILIQACQCABBEAgCkEEaiIBIAAQkgEgAyAKKAIENgAAIAEgABDCAQwBCyAKQQRqIgEgABDhAiADIAooAgQ2AAAgASAAEHsLIAggARBwIAEQIBogBCAAEHg6AAAgBSAAEFk6AAAgCkEEaiIBIAAQWCAGIAEQcCABECAaIAEgABB8IAcgARBwIAEQIBogCSAAEMEBNgIAIApBEGokAAsIACAAKAIARQsKACAAQdjwARB6CwoAIABB4PABEHoLFwAgAiAAIAEgAGsiAEECdRBlIAAgAmoLgwIBBX8jAEEQayIGJAAgBkEMaiIJIAZBCGogABBVKAIAELwBIwBBEGsiBSQAAkBB9////wMgAWsgAk8EQCAAECMhByAFQQRqIgggAUHz////AUkEfyAFIAFBAXQ2AgwgBSABIAJqNgIEIAggBUEMahCgASgCABCQAUEBagVB9////wMLEI8BIAUoAgQhAiAFKAIIGiAEBEAgAiAHIAQQZQsgAyAERwRAIARBAnQiCCACaiAHIAhqIAMgBGsQZQsgAUEBaiIBQQJHBEAgByABEKkBCyAAIAI2AgAgACAFKAIIEFwgBUEQaiQADAELEFsACyAAIAM2AgQgCRC7ASAGQRBqJAALHwEBfyABKAIAELwDIQIgACABKAIANgIEIAAgAjYCAAuyDgEKfyMAQZAEayILJAAgCyAKNgKIBCALIAE2AowEAkAgACALQYwEahArBEAgBSAFKAIAQQRyNgIAQQAhAAwBCyALQeQANgJIIAsgC0HoAGogC0HwAGogC0HIAGoiARA2Ig8oAgAiCjYCZCALIApBkANqNgJgIAEQJCERIAtBPGoQJCEMIAtBMGoQJCEOIAtBJGoQJCENIAtBGGoQJCEQIwBBEGsiASQAAkAgAgRAIAFBBGoiCiADEOYCIgIQkgEMAQsgAUEEaiIKIAMQ5QIiAhCSAQsgCyABKAIENgBcIAogAhDCASANIAoQqwEgChA5GiAKIAIQeyAOIAoQqwEgChA5GiALIAIQeDYCWCALIAIQWTYCVCAKIAIQWCARIAoQcCAKECAaIAogAhB8IAwgChCrASAKEDkaIAsgAhDBATYCFCABQRBqJAAgCSAIKAIANgIAIARBgARxIRJBACEDQQAhAQNAIAEhAgJAAkACQAJAIANBBEYNACAAIAtBjARqECsNAEEAIQoCQAJAAkACQAJAAkAgC0HcAGogA2otAAAOBQEABAMFCQsgA0EDRg0HIAdBASAAEDcQXwRAIAtBDGogABDpAiAQIAsoAgwQ6gEMAgsgBSAFKAIAQQRyNgIAQQAhAAwGCyADQQNGDQYLA0AgACALQYwEahArDQYgB0EBIAAQNxBfRQ0GIAtBDGogABDpAiAQIAsoAgwQ6gEMAAsACwJAIA4QH0UNACAAEDcgDhAjKAIARw0AIAAQPhogBkEAOgAAIA4gAiAOEB9BAUsbIQEMBgsCQCANEB9FDQAgABA3IA0QIygCAEcNACAAED4aIAZBAToAACANIAIgDRAfQQFLGyEBDAYLAkAgDhAfRQ0AIA0QH0UNACAFIAUoAgBBBHI2AgBBACEADAQLIA4QH0UEQCANEB9FDQULIAYgDRAfRToAAAwECyASIAIgA0ECSXJyRQRAQQAhASADQQJGIAstAF9BAEdxRQ0FCyALIAwQTjYCCCALQQxqIAtBCGoQwwEhAQJAIANFDQAgAyALai0AW0EBSw0AA0ACQCALIAwQdTYCCCABIAtBCGoQdg0AIAdBASABKAIAKAIAEF9FDQAgARD2AQwBCwsgCyAMEE42AgggASgCACALQQhqIgQoAgBrQQJ1IgogEBAfTQRAIAsgEBB1NgIIIARBACAKaxDwASAQEHUhCiAMEE4hEyMAQRBrIhQkABBzIQQgChBzIQogBCATEHMgCiAEa0F8cRCLAUUgFEEQaiQADQELIAsgDBBONgIEIAEgC0EIaiALQQRqEMMBKAIANgIACyALIAEoAgA2AggDQAJAIAsgDBB1NgIEIAtBCGoiASALQQRqEHYNACAAIAtBjARqECsNACAAEDcgASgCACgCAEcNACAAED4aIAEQ9gEMAQsLIBJFDQMgCyAMEHU2AgQgC0EIaiALQQRqEHYNAyAFIAUoAgBBBHI2AgBBACEADAILA0ACQCAAIAtBjARqECsNAAJ/IAdBwAAgABA3IgEQXwRAIAkoAgAiBCALKAKIBEYEQCAIIAkgC0GIBGoQkwEgCSgCACEECyAJIARBBGo2AgAgBCABNgIAIApBAWoMAQsgERAfRSAKRXINASABIAsoAlRHDQEgCygCZCIBIAsoAmBGBEAgDyALQeQAaiALQeAAahCTASALKAJkIQELIAsgAUEEajYCZCABIAo2AgBBAAshCiAAED4aDAELCyAKRSALKAJkIgEgDygCAEZyRQRAIAsoAmAgAUYEQCAPIAtB5ABqIAtB4ABqEJMBIAsoAmQhAQsgCyABQQRqNgJkIAEgCjYCAAsCQCALKAIUQQBMDQACQCAAIAtBjARqECtFBEAgABA3IAsoAlhGDQELIAUgBSgCAEEEcjYCAEEAIQAMAwsDQCAAED4aIAsoAhRBAEwNAQJAIAAgC0GMBGoQK0UEQCAHQcAAIAAQNxBfDQELIAUgBSgCAEEEcjYCAEEAIQAMBAsgCSgCACALKAKIBEYEQCAIIAkgC0GIBGoQkwELIAAQNyEBIAkgCSgCACIEQQRqNgIAIAQgATYCACALIAsoAhRBAWs2AhQMAAsACyACIQEgCCgCACAJKAIARw0DIAUgBSgCAEEEcjYCAEEAIQAMAQsCQCACRQ0AQQEhCgNAIAIQHyAKTQ0BAkAgACALQYwEahArRQRAIAAQNyACIAoQzAEoAgBGDQELIAUgBSgCAEEEcjYCAEEAIQAMAwsgABA+GiAKQQFqIQoMAAsAC0EBIQAgDygCACALKAJkRg0AQQAhACALQQA2AgwgESAPKAIAIAsoAmQgC0EMahBDIAsoAgwEQCAFIAUoAgBBBHI2AgAMAQtBASEACyAQEDkaIA0QORogDhA5GiAMEDkaIBEQIBogDxA1DAMLIAIhAQsgA0EBaiEDDAALAAsgC0GQBGokACAACxgAIAAgARCsARA8IAAgARDyASgCADYCBAsKACAAQcjwARB6CwoAIABB0PABEHoLxwEBBn8jAEEQayIEJAAgABDyASgCACEFQQECfyACKAIAIAAoAgBrIgNB/////wdJBEAgA0EBdAwBC0F/CyIDIANBAU0bIQMgASgCACEGIAAoAgAhByAFQeQARgR/QQAFIAAoAgALIAMQ3AEiCARAIAVB5ABHBEAgABCsARoLIARB4wA2AgQgACAEQQhqIAggBEEEahA2IgUQ6wIgBRA1IAEgACgCACAGIAdrajYCACACIAMgACgCAGo2AgAgBEEQaiQADwsQPQALIAEBfyABKAIAEJ0CwCECIAAgASgCADYCBCAAIAI6AAALxA4BCn8jAEGQBGsiCyQAIAsgCjYCiAQgCyABNgKMBAJAIAAgC0GMBGoQLARAIAUgBSgCAEEEcjYCAEEAIQAMAQsgC0HkADYCTCALIAtB6ABqIAtB8ABqIAtBzABqIgEQNiIPKAIAIgo2AmQgCyAKQZADajYCYCABECQhESALQUBrECQhDCALQTRqECQhDiALQShqECQhDSALQRxqECQhECMAQRBrIgEkAAJAIAIEQCABQQRqIgogAxDtAiICEJIBDAELIAFBBGoiCiADEOwCIgIQkgELIAsgASgCBDYAXCAKIAIQwgEgDSAKEHAgChAgGiAKIAIQeyAOIAoQcCAKECAaIAsgAhB4OgBbIAsgAhBZOgBaIAogAhBYIBEgChBwIAoQIBogCiACEHwgDCAKEHAgChAgGiALIAIQwQE2AhggAUEQaiQAIAkgCCgCADYCACAEQYAEcSESQQAhA0EAIQEDQCABIQICQAJAAkACQCADQQRGDQAgACALQYwEahAsDQBBACEKAkACQAJAAkACQAJAIAtB3ABqIANqLQAADgUBAAQDBQkLIANBA0YNByAHQQEgABA4EGAEQCALQRBqIAAQ7wIgECALLAAQELgBDAILIAUgBSgCAEEEcjYCAEEAIQAMBgsgA0EDRg0GCwNAIAAgC0GMBGoQLA0GIAdBASAAEDgQYEUNBiALQRBqIAAQ7wIgECALLAAQELgBDAALAAsCQCAOEB9FDQAgABA4Qf8BcSAOQQAQIi0AAEcNACAAED8aIAZBADoAACAOIAIgDhAfQQFLGyEBDAYLAkAgDRAfRQ0AIAAQOEH/AXEgDUEAECItAABHDQAgABA/GiAGQQE6AAAgDSACIA0QH0EBSxshAQwGCwJAIA4QH0UNACANEB9FDQAgBSAFKAIAQQRyNgIAQQAhAAwECyAOEB9FBEAgDRAfRQ0FCyAGIA0QH0U6AAAMBAsgEiACIANBAklyckUEQEEAIQEgA0ECRiALLQBfQQBHcUUNBQsgCyAMEE42AgwgC0EQaiALQQxqEMMBIQECQCADRQ0AIAMgC2otAFtBAUsNAANAAkAgCyAMEHc2AgwgASALQQxqEHYNACAHQQEgASgCACwAABBgRQ0AIAEQ+AEMAQsLIAsgDBBONgIMIAEoAgAgC0EMaiIEKAIAayIKIBAQH00EQCALIBAQdzYCDCAEQQAgCmsQ8wEgEBB3IQogDBBOIRMjAEEQayIUJAAQcyEEIAoQcyEKIAQgExBzIAogBGsQiwFFIBRBEGokAA0BCyALIAwQTjYCCCABIAtBDGogC0EIahDDASgCADYCAAsgCyABKAIANgIMA0ACQCALIAwQdzYCCCALQQxqIgEgC0EIahB2DQAgACALQYwEahAsDQAgABA4Qf8BcSABKAIALQAARw0AIAAQPxogARD4AQwBCwsgEkUNAyALIAwQdzYCCCALQQxqIAtBCGoQdg0DIAUgBSgCAEEEcjYCAEEAIQAMAgsDQAJAIAAgC0GMBGoQLA0AAn8gB0HAACAAEDgiARBgBEAgCSgCACIEIAsoAogERgRAIAggCSALQYgEahDuAiAJKAIAIQQLIAkgBEEBajYCACAEIAE6AAAgCkEBagwBCyAREB9FIApFcg0BIAstAFogAUH/AXFHDQEgCygCZCIBIAsoAmBGBEAgDyALQeQAaiALQeAAahCTASALKAJkIQELIAsgAUEEajYCZCABIAo2AgBBAAshCiAAED8aDAELCyAKRSALKAJkIgEgDygCAEZyRQRAIAsoAmAgAUYEQCAPIAtB5ABqIAtB4ABqEJMBIAsoAmQhAQsgCyABQQRqNgJkIAEgCjYCAAsCQCALKAIYQQBMDQACQCAAIAtBjARqECxFBEAgABA4Qf8BcSALLQBbRg0BCyAFIAUoAgBBBHI2AgBBACEADAMLA0AgABA/GiALKAIYQQBMDQECQCAAIAtBjARqECxFBEAgB0HAACAAEDgQYA0BCyAFIAUoAgBBBHI2AgBBACEADAQLIAkoAgAgCygCiARGBEAgCCAJIAtBiARqEO4CCyAAEDghASAJIAkoAgAiBEEBajYCACAEIAE6AAAgCyALKAIYQQFrNgIYDAALAAsgAiEBIAgoAgAgCSgCAEcNAyAFIAUoAgBBBHI2AgBBACEADAELAkAgAkUNAEEBIQoDQCACEB8gCk0NAQJAIAAgC0GMBGoQLEUEQCAAEDhB/wFxIAIgChAiLQAARg0BCyAFIAUoAgBBBHI2AgBBACEADAMLIAAQPxogCkEBaiEKDAALAAtBASEAIA8oAgAgCygCZEYNAEEAIQAgC0EANgIQIBEgDygCACALKAJkIAtBEGoQQyALKAIQBEAgBSAFKAIAQQRyNgIADAELQQEhAAsgEBAgGiANECAaIA4QIBogDBAgGiARECAaIA8QNQwDCyACIQELIANBAWohAwwACwALIAtBkARqJAAgAAsMACAAQQFBLRD9AhoLCwAgAEEBQS0QsAILHAEBfyAALQAAIQIgACABLQAAOgAAIAEgAjoAAAtlAQF/IwBBEGsiBiQAIAZBADoADyAGIAU6AA4gBiAEOgANIAZBJToADCAFBEAgBkENaiAGQQ5qEPMCCyACIAEgASACKAIAEIoCIAZBDGogAyAAKAIAEJ4DIAFqNgIAIAZBEGokAAtBACABIAIgAyAEQQQQZyEBIAMtAABBBHFFBEAgACABQdAPaiABQewOaiABIAFB5ABJGyABQcUASBtB7A5rNgIACwtAACACIAMgAEEIaiAAKAIIKAIEEQAAIgAgAEGgAmogBSAEQQAQzQEgAGsiAEGfAkwEQCABIABBDG1BDG82AgALC0AAIAIgAyAAQQhqIAAoAggoAgARAAAiACAAQagBaiAFIARBABDNASAAayIAQacBTARAIAEgAEEMbUEHbzYCAAsLQQAgASACIAMgBEEEEGghASADLQAAQQRxRQRAIAAgAUHQD2ogAUHsDmogASABQeQASRsgAUHFAEgbQewOazYCAAsLQAAgAiADIABBCGogACgCCCgCBBEAACIAIABBoAJqIAUgBEEAEM8BIABrIgBBnwJMBEAgASAAQQxtQQxvNgIACwtAACACIAMgAEEIaiAAKAIIKAIAEQAAIgAgAEGoAWogBSAEQQAQzwEgAGsiAEGnAUwEQCABIABBDG1BB282AgALCxgBAX9BDBBTIgBBADYCCCAAQgA3AgAgAAsEAEECC8oBAQR/IwBBEGsiAyQAAkAgAUH3////A00EQAJAIAEQvQEEQCAAIAEQUCAAIQQMAQsgA0EIaiABEJABQQFqEI8BIAMoAgwaIAAgAygCCCIENgIAIAAgAygCDBBcIAAgATYCBAsjAEEQayIFJAAgBSACNgIMIAQhBiABIQIDQCACBEAgBiAFKAIMNgIAIAJBAWshAiAGQQRqIQYMAQsLIAVBEGokACADQQA2AgQgBCABQQJ0aiADQQRqEFYgA0EQaiQADAELEFsA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hoRCAEKAgICAgIDAwz8QLyAFKQNIIQIgBSkDQCEEDAELIAlC////////P4MgBiAHcq1CMIaEIQILIAAgBDcDACAAIAI3AwggBUGAAWokAAuIEAIFfw9+IwBB0AJrIgUkACAEQv///////z+DIQsgAkL///////8/gyEKIAIgBIVCgICAgICAgICAf4MhDCAEQjCIp0H//wFxIQcCQAJAIAJCMIinQf//AXEiCEH//wFrQYKAfk8EQCAHQf//AWtBgYB+Sw0BCyABUCACQv///////////wCDIg5CgICAgICAwP//AFQgDkKAgICAgIDA//8AURtFBEAgAkKAgICAgIAghCEMDAILIANQIARC////////////AIMiAkKAgICAgIDA//8AVCACQoCAgICAgMD//wBRG0UEQCAEQoCAgICAgCCEIQwgAyEBDAILIAEgDkKAgICAgIDA//8AhYRQBEAgAyACQoCAgICAgMD//wCFhFAEQEIAIQFCgICAgICA4P//ACEMDAMLIAxCgICAgICAwP//AIQhDEIAIQEMAgsgAyACQoCAgICAgMD//wCFhFAEQEIAIQEMAgsgASAOhFAEQEKAgICAgIDg//8AIAwgAiADhFAbIQxCACEBDAILIAIgA4RQBEAgDEKAgICAgIDA//8AhCEMQgAhAQwCCyAOQv///////z9YBEAgBUHAAmogASAKIAEgCiAKUCIGG3lCwABCACAGG3ynIgZBD2sQREEQIAZrIQYgBSkDyAIhCiAFKQPAAiEBCyACQv///////z9WDQAgBUGwAmogAyALIAMgCyALUCIJG3lCwABCACAJG3ynIglBD2sQRCAGIAlqQRBrIQYgBSkDuAIhCyAFKQOwAiEDCyAFQaACaiALQoCAgICAgMAAhCISQg+GIANCMYiEIgJCAEKAgICAsOa8gvUAIAJ9IgRCABBAIAVBkAJqQgAgBSkDqAJ9QgAgBEIAEEAgBUGAAmogBSkDmAJCAYYgBSkDkAJCP4iEIgRCACACQgAQQCAFQfABaiAEQgBCACAFKQOIAn1CABBAIAVB4AFqIAUpA/gBQgGGIAUpA/ABQj+IhCIEQgAgAkIAEEAgBUHQAWogBEIAQgAgBSkD6AF9QgAQQCAFQcABaiAFKQPYAUIBhiAFKQPQAUI/iIQiBEIAIAJCABBAIAVBsAFqIARCAEIAIAUpA8gBfUIAEEAgBUGgAWogAkIAIAUpA7gBQgGGIAUpA7ABQj+IhEIBfSICQgAQQCAFQZABaiADQg+GQgAgAkIAEEAgBUHwAGogAkIAQgAgBSkDqAEgBSkDoAEiDiAFKQOYAXwiBCAOVK18IARCAVatfH1CABBAIAVBgAFqQgEgBH1CACACQgAQQCAGIAggB2tqIghB//8AaiEGAn4gBSkDcCITQgGGIg0gBSkDiAEiD0IBhiAFKQOAAUI/iIR8IhBC5+wAfSIUQiCIIgIgCkKAgICAgIDAAIQiFUIBhiIWQiCIIgR+IhEgAUIBhiIOQiCIIgsgECAUVq0gDSAQVq0gBSkDeEIBhiATQj+IhCAPQj+IfHx8QgF9IhNCIIgiEH58Ig0gEVStIA0gDSATQv////8PgyITIAFCP4giFyAKQgGGhEL/////D4MiCn58Ig1WrXwgBCAQfnwgBCATfiIRIAogEH58Ig8gEVStQiCGIA9CIIiEfCANIA9CIIZ8Ig8gDVStfCAPIA8gFEL/////D4MiFCAKfiINIAIgC358IhEgDVStIBEgESATIA5C/v///w+DIg1+fCIRVq18fCIPVq18IA8gBCAUfiIYIA0gEH58IgQgAiAKfnwiCiALIBN+fCIQQiCIIAogEFatIAQgGFStIAQgClatfHxCIIaEfCIEIA9UrXwgBCAEIBEgAiANfiIKIAsgFH58IgJCIIggAiAKVK1CIIaEfCIKIBFUrSAKIAogEEIghnwiClatfHwiBFatfCAEIAQgCiACQiCGIgIgDSAUfnwgAlStQn+FIgJWIAIgClJxrXwiBFatfCICQv////////8AWARAIBYgF4QhFSAFQdAAaiAEIAJCgICAgICAwABUIgetIguGIgogAiALhiAEQgGIIAdBP3OtiIQiBCADIBIQQCAIQf7/AGogBiAHG0EBayEGIAFCMYYgBSkDWH0gBSkDUCIBQgBSrX0hC0IAIAF9DAELIAVB4ABqIAJCP4YgBEIBiIQiCiACQgGIIgQgAyASEEAgAUIwhiAFKQNofSAFKQNgIgJCAFKtfSELIAEhDkIAIAJ9CyECIAZB//8BTgRAIAxCgICAgICAwP//AIQhDEIAIQEMAQsCfiAGQQBKBEAgC0IBhiACQj+IhCEBIARC////////P4MgBq1CMIaEIQsgAkIBhgwBCyAGQY9/TARAQgAhAQwCCyAFQUBrIAogBEEBIAZrEIoBIAVBMGogDiAVIAZB8ABqEEQgBUEgaiADIBIgBSkDQCIKIAUpA0giCxBAIAUpAzggBSkDKEIBhiAFKQMgIgFCP4iEfSAFKQMwIgIgAUIBhiIEVK19IQEgAiAEfQshAiAFQRBqIAMgEkIDQgAQQCAFIAMgEkIFQgAQQCALIAogAyAKQgGDIgMgAnwiAlQgASACIANUrXwiASASViABIBJRG618IgMgClStfCIEIAMgAyAEQoCAgICAgMD//wBUIAIgBSkDEFYgASAFKQMYIgRWIAEgBFEbca18IgNWrXwiBCADIARCgICAgICAwP//AFQgAiAFKQMAViABIAUpAwgiAlYgASACURtxrXwiASADVK18IAyEIQwLIAAgATcDACAAIAw3AwggBUHQAmokAAu/AgEBfyMAQdAAayIEJAACQCADQYCAAU4EQCAEQSBqIAEgAkIAQoCAgICAgID//wAQLyAEKQMoIQIgBCkDICEBIANB//8BSQRAIANB//8AayEDDAILIARBEGogASACQgBCgICAgICAgP//ABAvQf3/AiADIANB/f8CTxtB/v8BayEDIAQpAxghAiAEKQMQIQEMAQsgA0GBgH9KDQAgBEFAayABIAJCAEKAgICAgICAORAvIAQpA0ghAiAEKQNAIQEgA0H0gH5LBEAgA0GN/wBqIQMMAQsgBEEwaiABIAJCAEKAgICAgICAORAvQeiBfSADIANB6IF9TRtBmv4BaiEDIAQpAzghAiAEKQMwIQELIAQgASACQgAgA0H//wBqrUIwhhAvIAAgBCkDCDcDCCAAIAQpAwA3AwAgBEHQAGokAAs8ACAAIAE3AwAgACACQv///////z+DIAJCgICAgICAwP//AINCMIinIANCMIinQYCAAnFyrUIwhoQ3AwgLwAECAX8CfkF/IQMCQCAAQgBSIAFC////////////AIMiBEKAgICAgIDA//8AViAEQoCAgICAgMD//wBRGw0AIAJC////////////AIMiBUKAgICAgIDA//8AViAFQoCAgICAgMD//wBScQ0AIAAgBCAFhIRQBEBBAA8LIAEgAoNCAFkEQCABIAJSIAEgAlNxDQEgACABIAKFhEIAUg8LIABCAFIgASACVSABIAJRGw0AIAAg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EKYCCyEAIAEQTAR/QZiEASgCACABQf8BcUECdGooAgAFIAELwAsJACAAENACEC0LOwADQCABIAJGRQRAIAMhACAEIAEoAgAQTAR/IAEoAgAFIAALOgAAIARBAWohBCABQQRqIQEMAQsLIAELDAAgASACIAEQTBvACyoAA0AgASACRkUEQCADIAEsAAA2AgAgA0EEaiEDIAFBAWohAQwBCwsgAQsPACAAIAEgAkGgkAEQpwILHAAgARBMBH9BoJABKAIAIAFBAnRqKAIABSABCwsPACAAIAEgAkGYhAEQpwILHAAgARBMBH9BmIQBKAIAIAFBAnRqKAIABSABCwsQACAABEAgABDHAwsgABAtCzoAA0ACQCACIANGDQAgAigCABBMRQ0AIAIoAgBBAnRBkKIBaigCACABcUUNACACQQRqIQIMAQsLIAILOQADQAJAIAIgA0YNACACKAIAEEwEQCACKAIAQQJ0QZCiAWooAgAgAXENAQsgAkEEaiECDAELCyACC0YAA0AgASACRkUEQEEAIQAgAyABKAIAEEwEfyABKAIAQQJ0QZCiAWooAgAFQQALNgIAIANBBGohAyABQQRqIQEMAQsLIAELIwBBACEAIAIQTAR/IAJBAnRBkKIBaigCACABcUEARwVBAAsLDwAgACAAKAIAKAIEEQIACwkAIAAQ1gIQLQsVAQF/QdQAEFMiAEEAQdQA/AsAIAALFAAgACgCACABaiACLQAAOgAAQQELrgEAAkAgBRBHRQRAIAAgBSkCADcCACAAIAUoAgg2AgggABBeGgwBCyAFKAIAIQQgBSgCBCECIwBBEGsiAyQAAkACQAJAIAIQvQEEQCAAIgEgAhBQDAELIAJB9////wNLDQEgA0EIaiACEJABQQFqEI8BIAMoAgwaIAAgAygCCCIBNgIAIAAgAygCDBBcIAAgAjYCBAsgASAEIAJBAWoQZSADQRBqJAAMAQsQWwALCwsJACAAIAUQ5AELhAMBCH8jAEHgA2siACQAIABB3ANqIgYgAxAnIAYQSCEKIAUQHwRAIAVBABDMASgCACAKQS0QS0YhCwsgAiALIABB3ANqIABB2ANqIABB1ANqIABB0ANqIABBxANqECQiDCAAQbgDahAkIgYgAEGsA2oQJCIHIABBqANqEN8CIABB4wA2AhAgAEEIakEAIABBEGoiAhA2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KAK8ASAEEI8DOQMAIABBzAFqIABBEGogACgCDCAEEEMgAEHcAmogAEHYAmoQKwRAIAQgBCgCAEECcjYCAAsgACgC3AIgARAgGiAAQcwBahAgGiAAQeACaiQADAMLQQEhAwsgAEHcAmoQPhoMAAsACwvKBAEDfwJ/IwBB4AJrIgAkACAAIAI2AtgCIAAgATYC3AIgAEHMAWogAyAAQeABaiAAQdwBaiAAQdgBahD7ASAAQcABahAkIgEgARAoECEgACABQQAQIiICNgK8ASAAIABBEGo2AgwgAEEANgIIIABBAToAByAAQcUAOgAGQQAhAwNAAkACQAJAIABB3AJqIABB2AJqECsNACAAKAK8ASABEB8gAmpGBEAgARAfIQYgASABEB9BAXQQISABIAEQKBAhIAAgBiABQQAQIiICajYCvAELIABB3AJqEDcgAEEHaiAAQQZqIAIgAEG8AWogACgC3AEgACgC2AEgAEHMAWogAEEQaiAAQQxqIABBCGogAEHgAWoQ+gENACADDQFBACEDIAAoArwBIAJrIgdBAEwNAgJAAkAgAi0AACIGQStrIggOAwEAAQALIAZBLkYNAkEBIQMgBkEwa0H/AXFBCkkNAwwBCyAHQQFGDQICQCAIDgMAAwADCyACLQABIgZBLkYNAUEBIQMgBkEwa0H/AXFBCU0NAgsCQCAAQcwBahAfRQ0AIAAtAAdBAXFFDQAgACgCDCIDIABBEGprQZ8BSg0AIAAgA0EEajYCDCADIAAoAgg2AgALIAUgAiAAKAK8ASAEEJEDOAIAIABBzAFqIABBEGogACgCDCAEEEMgAEHcAmogAEHYAmoQKwRAIAQgBCgCAEECcjYCAAsgACgC3AIgARAgGiAAQcwBahAgGiAAQeACaiQADAMLQQEhAwsgAEHcAmoQPhoMAAsACwuWAwECfyMAQdACayIAJAAgACACNgLIAiAAIAE2AswCIAMQaiEGIAMgAEHQAWoQrgEhByAAQcQBaiADIABBxAJqEK0BIABBuAFqECQiASABECgQISAAIAFBABAiIgI2ArQBIAAgAEEQajYCDCAAQQA2AggDQAJAIABBzAJqIABByAJqECsNACAAKAK0ASABEB8gAmpGBEAgARAfIQMgASABEB9BAXQQISABIAEQKBAhIAAgAyABQQAQIiICajYCtAELIABBzAJqIgMQNyAGIAIgAEG0AWogAEEIaiAAKALEAiAAQcQBaiAAQRBqIABBDGogBxCYAQ0AIAMQPhoMAQsLAkAgAEHEAWoQH0UNACAAKAIMIgMgAEEQamtBnwFKDQAgACADQQRqNgIMIAMgACgCCDYCAAsgBSACIAAoArQBIAQgBhCSAzcDACAAQcQBaiAAQRBqIAAoAgwgBBBDIABBzAJqIABByAJqECsEQCAEIAQoAgBBAnI2AgALIAAoAswCIAEQIBogAEHEAWoQIBogAEHQAmokAAuWAwECfyMAQdACayIAJAAgACACNgLIAiAAIAE2AswCIAMQaiEGIAMgAEHQAWoQrgEhByAAQcQBaiADIABBxAJqEK0BIABBuAFqECQiASABECgQISAAIAFBABAiIgI2ArQBIAAgAEEQajYCDCAAQQA2AggDQAJAIABBzAJqIABByAJqECsNACAAKAK0ASABEB8gAmpGBEAgARAfIQMgASABEB9BAXQQISABIAEQKBAhIAAgAyABQQAQIiICajYCtAELIABBzAJqIgMQNyAGIAIgAEG0AWogAEEIaiAAKALEAiAAQcQBaiAAQRBqIABBDGogBxCYAQ0AIAMQPhoMAQsLAkAgAEHEAWoQH0UNACAAKAIMIgMgAEEQamtBnwFKDQAgACADQQRqNgIMIAMgACgCCDYCAAsgBSACIAAoArQBIAQgBhCVAzsBACAAQcQBaiAAQRBqIAAoAgwgBBBDIABBzAJqIABByAJqECsEQCAEIAQoAgBBAnI2AgALIAAoAswCIAEQIBogAEHEAWoQIBogAEHQAmokAAuWAwECfyMAQdACayIAJAAgACACNgLIAiAAIAE2AswCIAMQaiEGIAMgAEHQAWoQrgEhByAAQcQBaiADIABBxAJqEK0BIABBuAFqECQiASABECgQISAAIAFBABAiIgI2ArQBIAAgAEEQajYCDCAAQQA2AggDQAJAIABBzAJqIABByAJqECsNACAAKAK0ASABEB8gAmpGBEAgARAfIQMgASABEB9BAXQQISABIAEQKBAhIAAgAyABQQAQIiICajYCtAELIABBzAJqIgMQNyAGIAIgAEG0AWogAEEIaiAAKALEAiAAQcQBaiAAQRBqIABBDGogBxCYAQ0AIAMQPhoMAQsLAkAgAEHEAWoQH0UNACAAKAIMIgMgAEEQamtB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DCECDAYLIANBIHIhAyABQQRqIQIgBEEEayEEIAEtAAMgCHQgB2ohBwsCQCAFQQRxRQ0AIAcgBigCIEYNACAKQd4ONgIYIAZB0f4ANgIEIAIhASAGKAIEIQUMAQsLIAIhAUEAIQdBACEDCyAGQdD+ADYCBAtBASECDAELQQAhBCAMIQILIAogDzYCECAKIBA2AgwgCiAENgIEIAogATYCACAGIAM2AkAgBiAHNgI8AkACQCAGKAIsRQRAIA8gFUYNASAGKAIEQdD+AEsNAQsCfyAVIA9rIQMCQAJAIAooAhwiASgCOCIMRQRAQQEhBSABIAooAihBASABKAIodEEBIAooAiARAwAiDDYCOCAMRQ0BCyABKAIsIgRFBEAgAUIANwIwIAFBASABKAIodCIENgIsCyADIARPBEAgBARAIAwgECAEayAE/AoAAAsgAUEANgI0DAILIAQgASgCNCIIayIFIAMgAyAFSxsiBARAIAggDGogECADayAE/AoAAAsgAyAFSwRAIAMgBGsiAwRAIAEoAjggECADayAD/AoAAAsgASADNgI0DAILQQAhBSABIAEoAjQgBGoiA0EAIAMgASgCLCIMRxs2AjQgDCABKAIwIgNNDQAgASADIARqNgIwCyAFDAELIAEgASgCLDYCMEEACw0BIAooAhAhDyAKKAIEIQQLIAogCigCCCAkIARrajYCCCAKIBUgD2siASAKKAIUajYCFCAGIAYoAiAgAWo2AiAgBi0ADEEEcUUgDyAVRnJFBEAgCigCDCABayEDIAYoAhwhBSAGAn8gBigCFARAIAUgAyABEFEMAQsgBSADIAEQswELIgE2AhwgCiABNgIwCyAKIAYoAkBBwABBACAGKAIIG2pBgAFBACAGKAIEIgFBv/4ARhtqQYACQYACQQAgAUHC/gBGGyABQcf+AEYbajYCLCACQXsgAhsgAiAPIBVGGyACIAQgJEYbIRwMAgsgBkHS/gA2AgQLQXwhHAsgF0EQaiQAIBxBAUsNASATQagBaiEBIBMoAqwBIQMgGigCACEJIBooAgQgEygCFGshDCMAQSBrIggkAAJAIAwgCWsiBUEATA0AIAEoAgggASgCBCICayAFTgRAIAIgA2siBCAFSARAIAwgBCAJaiIHayILRSAHIAxGckUEQCACIAcgC/wKAAALIAEgAiALajYCBCAE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eQAtKyAgIDBYMHgALTBYKzBYIDBYLTB4KzB4IDB4AE5vdgBUaHUAQXVndXN0AHVuc2lnbmVkIHNob3J0AHVuc2lnbmVkIGludABpbnZhbGlkIGxpdGVyYWwvbGVuZ3RocyBzZXQAaW52YWxpZCBjb2RlIGxlbmd0aHMgc2V0AHVua25vd24gaGVhZGVyIGZsYWdzIHNldABpbnZhbGlkIGRpc3RhbmNlcyBzZXQAZ2V0AE9jdABmbG9hdABpbnZhbGlkIGJpdCBsZW5ndGggcmVwZWF0AFNhdABudW1Qb2ludHMAY29sb3JzAFVucGFja09wdGlvbnMAcG9zaXRpb25zAHJvdGF0aW9ucwB0b28gbWFueSBsZW5ndGggb3IgZGlzdGFuY2Ugc3ltYm9scwBpbnZhbGlkIHN0b3JlZCBibG9jayBsZW5ndGhzAHNjYWxlcwBhbHBoYXMAW1NQWjogRVJST1JdIENoZWNrIGZhaWxlZDogJXM6JWQ6ICVzAHZmMzJfcHRyAEFwcgB2ZWN0b3IAbW9uZXlfZ2V0IGVycm9yAFtTUFogRVJST1JdIGRlc2VyaWFsaXplUGFja2VkR2F1c3NpYW5zOiByZWFkIGVycm9yAE9jdG9iZXIATm92ZW1iZXIAU2VwdGVtYmVyAERlY2VtYmVyAHVuc2lnbmVkIGNoYXIAaW9zX2Jhc2U6OmNsZWFyAE1hcgAvZW1zZGsvZW1zY3JpcHRlbi9zeXN0ZW0vbGliL2xpYmN4eGFiaS9zcmMvcHJpdmF0ZV90eXBlaW5mby5jcHAAU2VwACVJOiVNOiVTICVwAFN1bgBKdW4ATW9uAG5hbgBKYW4AY29vcmRpbmF0ZVN5c3RlbQBDb29yZGluYXRlU3lzdGVtAEp1bABib29sAGxsAEFwcmlsAGludmFsaWQgY29kZSAtLSBtaXNzaW5nIGVuZC1vZi1ibG9jawBpbmNvcnJlY3QgaGVhZGVyIGNoZWNrAGluY29ycmVjdCBsZW5ndGggY2hlY2sAaW5jb3JyZWN0IGRhdGEgY2hlY2sAcHVzaF9iYWNrAGludmFsaWQgZGlzdGFuY2UgdG9vIGZhciBiYWNrAEZyaQBzaABoZWFkZXIgY3JjIG1pc21hdGNoAE1hcmNoAEF1ZwB1bnNpZ25lZCBsb25nIGxvbmcAdW5zaWduZWQgbG9uZwBzdGQ6OndzdHJpbmcAYmFzaWNfc3RyaW5nAHN0ZDo6c3RyaW5nAHN0ZDo6dTE2c3RyaW5nAHN0ZDo6dTMyc3RyaW5nAGluZgAlLjBMZgAlTGYAcmVzaXplAGludmFsaWQgd2luZG93IHNpemUAdHJ1ZQBUdWUAZmFsc2UAaW52YWxpZCBibG9jayB0eXBlAEp1bmUAZG91YmxlAHNoRGVncmVlAGJhZF9hcnJheV9uZXdfbGVuZ3RoIHdhcyB0aHJvd24gaW4gLWZuby1leGNlcHRpb25zIG1vZGUAaW52YWxpZCBsaXRlcmFsL2xlbmd0aCBjb2RlAGludmFsaWQgZGlzdGFuY2UgY29kZQBSYXdHYXVzc2lhbkNsb3VkAHVua25vd24gY29tcHJlc3Npb24gbWV0aG9kAFtTUFogRVJST1JdIGRlc2VyaWFsaXplUGFja2VkR2F1c3NpYW5zOiBoZWFkZXIgbm90IGZvdW5kACUwKmxsZAAlKmxsZAArJWxsZAAlKy40bGQAdm9pZABsb2NhbGUgbm90IHN1cHBvcnRlZABhbnRpYWxpYXNlZABXZWQAJVktJW0tJWQAW1NQWiBFUlJPUl0gZGVzZXJpYWxpemVQYWNrZWRHYXVzc2lhbnM6IFRvbyBtYW55IHBvaW50czogJWQAW1NQWiBFUlJPUl0gZGVzZXJpYWxpemVQYWNrZWRHYXVzc2lhbnM6IFVuc3VwcG9ydGVkIFNIIGRlZ3JlZTogJWQAW1NQWiBFUlJPUl0gZGVzZXJpYWxpemVQYWNrZWRHYXVzc2lhbnM6IHZlcnNpb24gbm90IHN1cHBvcnRlZDogJWQARGVjAC4vc3B6L3NyYy9jYy9sb2FkLXNwei5jYwBGZWIAJWEgJWIgJWQgJUg6JU06JVMgJVkAUE9TSVgAVmVjdG9yVUludDhUACVIOiVNOiVTAE5BTgBQTQBBTQAlSDolTQBMQ19BTEwAQVNDSUkATEFORwBSVUYATFVGAElORgBSREYATERGAFVOU1BFQ0lGSUVEAEMAUlVCAExVQgBSREIATERCAGNhdGNoaW5nIGEgY2xhc3Mgd2l0aG91dCBhbiBvYmplY3Q/AGVtc2NyaXB0ZW46Om1lbW9yeV92aWV3PHNob3J0PgBlbXNjcmlwdGVuOjptZW1vcnlfdmlldzx1bnNpZ25lZCBzaG9ydD4AZW1zY3JpcHRlbjo6bWVtb3J5X3ZpZXc8aW50PgBlbXNjcmlwdGVuOjptZW1vcnlfdmlldzx1bnNpZ25lZCBpbnQ+AGVtc2NyaXB0ZW46Om1lbW9yeV92aWV3PGZsb2F0PgBlbXNjcmlwdGVuOjptZW1vcnlfdmlldzx1aW50OF90PgBlbXNjcmlwdGVuOjptZW1vcnlfdmlldzxpbnQ4X3Q+AGVtc2NyaXB0ZW46Om1lbW9yeV92aWV3PHVpbnQxNl90PgBlbXNjcmlwdGVuOjptZW1vcnlfdmlldzxpbnQxNl90PgBlbXNjcmlwdGVuOjptZW1vcnlfdmlldzx1aW50NjRfdD4AZW1zY3JpcHRlbjo6bWVtb3J5X3ZpZXc8aW50NjRfdD4AZW1zY3JpcHRlbjo6bWVtb3J5X3ZpZXc8dWludDMyX3Q+AGVtc2NyaXB0ZW46Om1lbW9yeV92aWV3PGludDMyX3Q+AGVtc2NyaXB0ZW46Om1lbW9yeV92aWV3PGNoYXI+AGVtc2NyaXB0ZW46Om1lbW9yeV92aWV3PHVuc2lnbmVkIGNoYXI+AGVtc2NyaXB0ZW46Om1lbW9yeV92aWV3PHNpZ25lZCBjaGFyPgBlbXNjcmlwdGVuOjptZW1vcnlfdmlldzxsb25nPgBlbXNjcmlwdGVuOjptZW1vcnlfdmlldzx1bnNpZ25lZCBsb25nPgBlbXNjcmlwdGVuOjptZW1vcnlfdmlldzxkb3VibGU+ADAxMjM0NTY3ODkAQy5VVEYtOABWZWN0b3JGbG9hdDMyADEuMy4xAC4ALQAocGFja2VkLmFscGhhcy5zaXplKCkpID09IChudW1Qb2ludHMpAChudWxsKQAocGFja2VkLmNvbG9ycy5zaXplKCkpID09IChudW1Qb2ludHMgKiAzKQAocGFja2VkLnNjYWxlcy5zaXplKCkpID09IChudW1Qb2ludHMgKiAzKQAocGFja2VkLnNoLnNpemUoKSkgPT0gKG51bVBvaW50cyAqIHNoRGltICogMykAKHBhY2tlZC5yb3RhdGlvbnMuc2l6ZSgpKSA9PSAobnVtUG9pbnRzICogKHBhY2tlZC51c2VzUXVhdGVybmlvblNtYWxsZXN0VGhyZWUgPyA0IDogMykpAChwYWNrZWQucG9zaXRpb25zLnNpemUoKSkgPT0gKG51bVBvaW50cyAqIDMgKiAodXNlc0Zsb2F0MTYgPyAyIDogMykpACUAbGVuZ3RoX2Vycm9yIHdhcyB0aHJvd24gaW4gLWZuby1leGNlcHRpb25zIG1vZGUgd2l0aCBtZXNzYWdlICIlcyIAUHVyZSB2aXJ0dWFsIGZ1bmN0aW9uIGNhbGxlZCEAW1NQWjogRVJST1JdIFVuc3VwcG9ydGVkIFNIIGRlZ3JlZTogJWQKAAkAAAAAgD8AAIA/AACAPwAAgD8AAIA/AACAPwAAgD8AAIA/AACAPwAAgD8AAIA/AACAPwAAgD8AAIA/AACAPwBBkCALthMgEAAA9GwAAPRsAABAEAAAqG0AACgQAABOM3NwejEzR2F1c3NpYW5DbG91ZEUAAACobQAASBAAAE4zc3B6MTNVbnBhY2tPcHRpb25zRQBwcGlpcAD0bAAAbBAAAKhtAAB0EAAATlN0M19fMjZ2ZWN0b3JJZk5TXzlhbGxvY2F0b3JJZkVFRUUAaXBwACxuAADEEAAAAAAAAAMAAADcEAAAAAAAACgSAAAAAAAAWBIAAAAAAABOU3QzX18yOG9wdGlvbmFsSWZFRQAAAADQbQAA6BAAABgRAABOU3QzX18yMjdfX29wdGlvbmFsX21vdmVfYXNzaWduX2Jhc2VJZkxiMUVFRQAAAADQbQAAJBEAAFQRAABOU3QzX18yMjdfX29wdGlvbmFsX2NvcHlfYXNzaWduX2Jhc2VJZkxiMUVFRQAAAADQbQAAYBEAAIgRAABOU3QzX18yMjBfX29wdGlvbmFsX21vdmVfYmFzZUlmTGIxRUVFAAAA0G0AAJQRAAC8EQAATlN0M19fMjIwX19vcHRpb25hbF9jb3B5X2Jhc2VJZkxiMUVFRQAAANBtAADIEQAA9BEAAE5TdDNfXzIyM19fb3B0aW9uYWxfc3RvcmFnZV9iYXNlSWZMYjBFRUUAAAAAqG0AAPwRAABOU3QzX18yMjRfX29wdGlvbmFsX2Rlc3RydWN0X2Jhc2VJZkxiMUVFRQAAAKhtAAAwEgAATlN0M19fMjE4X19zZmluYWVfY3Rvcl9iYXNlSUxiMUVMYjFFRUUAAKhtAABgEgAATlN0M19fMjIwX19zZmluYWVfYXNzaWduX2Jhc2VJTGIxRUxiMUVFRQAAAACIbgAAnBIAAAAAAABsEAAAUE5TdDNfXzI2dmVjdG9ySWZOU185YWxsb2NhdG9ySWZFRUVFAAAAAIhuAADUEgAAAQAAAGwQAABQS05TdDNfXzI2dmVjdG9ySWZOU185YWxsb2NhdG9ySWZFRUVFAHBwAHYAdnAAAACMEgAAcHAAAJRsAACMEgAAPG0AAHZwcGQAAAAAlGwAAIwSAAAYbQAAPG0AAHZwcHBkAAAAGG0AAMQSAABwcHAATBMAADxtAACobQAAVBMAAE4xMGVtc2NyaXB0ZW4zdmFsRQAAnBAAAGwQAAAYbQAAcHBwcAAAAAAAAAAArGwAAGwQAAAYbQAAPG0AAGlwcHBkAAAALG4AAMATAAAAAAAAAwAAANgTAAAAAAAAKBIAAAAAAABYEgAAAAAAAE5TdDNfXzI4b3B0aW9uYWxJaEVFAAAAANBtAADkEwAAFBQAAE5TdDNfXzIyN19fb3B0aW9uYWxfbW92ZV9hc3NpZ25fYmFzZUloTGIxRUVFAAAAANBtAAAgFAAAUBQAAE5TdDNfXzIyN19fb3B0aW9uYWxfY29weV9hc3NpZ25fYmFzZUloTGIxRUVFAAAAANBtAABcFAAAhBQAAE5TdDNfXzIyMF9fb3B0aW9uYWxfbW92ZV9iYXNlSWhMYjFFRUUAAADQbQAAkBQAALgUAABOU3QzX18yMjBfX29wdGlvbmFsX2NvcHlfYmFzZUloTGIxRUVFAAAA0G0AAMQUAADwFAAATlN0M19fMjIzX19vcHRpb25hbF9zdG9yYWdlX2Jhc2VJaExiMEVFRQAAAACobQAA+BQAAE5TdDNfXzIyNF9fb3B0aW9uYWxfZGVzdHJ1Y3RfYmFzZUloTGIxRUVFAAAAqG0AACwVAABOU3QzX18yNnZlY3RvckloTlNfOWFsbG9jYXRvckloRUVFRQCIbgAAYBUAAAAAAAAkFQAAUE5TdDNfXzI2dmVjdG9ySWhOU185YWxsb2NhdG9ySWhFRUVFAAAAAIhuAACYFQAAAQAAACQVAABQS05TdDNfXzI2dmVjdG9ySWhOU185YWxsb2NhdG9ySWhFRUVFAHBwAHZwAFAVAABwcAAAlGwAAFAVAADEbAAAdnBwaQAAAACUbAAAUBUAABhtAADEbAAAdnBwcGkAAAAYbQAAiBUAAHBwcABMEwAAxGwAAJgTAAAkFQAAGG0AAHBwcHAAAAAArGwAACQVAAAYbQAAxGwAAGlwcHBpAHAAdnAAaXBwAHZwcGkAaXBwAHZwcGkAcHBwAHZwcHAAAABcbQAAYBYAAE4zc3B6MTZDb29yZGluYXRlU3lzdGVtRQBwAHZwAGlwcAB2cHBpAAAAAAAAAwAAAAgAAAAPAAAAqG0AAKAWAABOU3QzX18yMTJiYXNpY19zdHJpbmdJY05TXzExY2hhcl90cmFpdHNJY0VFTlNfOWFsbG9jYXRvckljRUVFRQAAqG0AAOgWAABOU3QzX18yMTJiYXNpY19zdHJpbmdJd05TXzExY2hhcl90cmFpdHNJd0VFTlNfOWFsbG9jYXRvckl3RUVFRQAAqG0AADAXAABOU3QzX18yMTJiYXNpY19zdHJpbmdJRHNOU18xMWNoYXJfdHJhaXRzSURzRUVOU185YWxsb2NhdG9ySURzRUVFRQAAAKhtAAB8FwAATlN0M19fMjEyYmFzaWNfc3RyaW5nSURpTlNfMTFjaGFyX3RyYWl0c0lEaUVFTlNfOWFsbG9jYXRvcklEaUVFRUUAAACobQAAyBcAAE4xMGVtc2NyaXB0ZW4xMW1lbW9yeV92aWV3SWNFRQAAqG0AAPAXAABOMTBlbXNjcmlwdGVuMTFtZW1vcnlfdmlld0lhRUUAAKhtAAAYGAAATjEwZW1zY3JpcHRlbjExbWVtb3J5X3ZpZXdJaEVFAACobQAAQBgAAE4xMGVtc2NyaXB0ZW4xMW1lbW9yeV92aWV3SXNFRQAAqG0AAGgYAABOMTBlbXNjcmlwdGVuMTFtZW1vcnlfdmlld0l0RUUAAKhtAACQGAAATjEwZW1zY3JpcHRlbjExbWVtb3J5X3ZpZXdJaUVFAACobQAAuBgAAE4xMGVtc2NyaXB0ZW4xMW1lbW9yeV92aWV3SWpFRQAAqG0AAOAYAABOMTBlbXNjcmlwdGVuMTFtZW1vcnlfdmlld0lsRUUAAKhtAAAIGQAATjEwZW1zY3JpcHRlbjExbWVtb3J5X3ZpZXdJbUVFAACobQAAMBkAAE4xMGVtc2NyaXB0ZW4xMW1lbW9yeV92aWV3SXhFRQAAqG0AAFgZAABOMTBlbXNjcmlwdGVuMTFtZW1vcnlfdmlld0l5RUUAAKhtAACAGQAATjEwZW1zY3Jp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AAAJqAAACAQAAAiEAAAIRAAACegAEAcIAAAIXAAACBwAAAmYABQHUwAACHwAAAg8AAAJ2AASBxcAAAhsAAAILAAACbgAAAgMAAAIjAAACEwAAAn4ABAHAwAACFIAAAgSABUIowATByMAAAhyAAAIMgAACcQAEQcLAAAIYgAACCIAAAmkAAAIAgAACIIAAAhCAAAJ5AAQBwcAAAhaAAAIGgAACZQAFAdDAAAIegAACDoAAAnUABIHEwAACGoAAAgqAAAJtAAACAoAAAiKAAAISgAACfQAEAcFAAAIVgAACBYAQAgAABMHMwAACHYAAAg2AAAJzAARBw8AAAhmAAAIJgAACawAAAgGAAAIhgAACEYAAAnsABAHCQAACF4AAAgeAAAJnAAUB2MAAAh+AAAIPgAACdwAEgcbAAAIbgAACC4AAAm8AAAIDgAACI4AAAhOAAAJ/ABgBwAAAAhRAAAIEQAVCIMAEgcfAAAIcQAACDEAAAnCABAHCgAACGEAAAghAAAJogAACAEAAAiBAAAIQQAACeIAEAcGAAAIWQAACBkAAAmSABMHOwAACHkAAAg5AAAJ0gARBxEAAAhpAAAIKQAACbIAAAgJAAAIiQAACEkAAAnyABAHBAAACFUAAAgVABAIAgETBysAAAh1AAAINQAACcoAEQcNAAAIZQAACCUAAAmqAAAIBQAACIUAAAhFAAAJ6gAQBwgAAAhdAAAIHQAACZoAFAdTAAAIfQAACD0AAAnaABIHFwAACG0AAAgtAAAJugAACA0AAAiNAAAITQAACfoAEAcDAAAIUwAACBMAFQjDABMHIwAACHMAAAgzAAAJxgARBwsAAAhjAAAIIwAACaYAAAgDAAAIgwAACEMAAAnmABAHBwAACFsAAAgbAAAJlgAUB0MAAAh7AAAIOwAACdYAEgcTAAAIawAACCsAAAm2AAAICwAACIsAAAhLAAAJ9gAQBwUAAAhXAAAIFwBACAAAEwczAAAIdwAACDcAAAnOABEHDwAACGcAAAgnAAAJrgAACAcAAAiHAAAIRwAACe4AEAcJAAAIXwAACB8AAAmeABQHYwAACH8AAAg/AAAJ3gASBxsAAAhvAAAILwAACb4AAAgPAAAIjwAACE8AAAn+AGAHAAAACFAAAAgQABQIcwASBx8AAAhwAAAIMAAACcEAEAcKAAAIYAAACCAAAAmhAAAIAAAACIAAAAhAAAAJ4QAQBwYAAAhYAAAIGAAACZEAEwc7AAAIeAAACDgAAAnRABEHEQAACGgAAAgoAAAJsQAACAgAAAiIAAAISAAACfEAEAcEAAAIVAAACBQAFQjjABMHKwAACHQAAAg0AAAJyQARBw0AAAhkAAAIJAAACakAAAgEAAAIhAAACEQAAAnpABAHCAAACFwAAAgcAAAJmQAUB1MAAAh8AAAIPAAACdkAEgcXAAAIbAAACCwAAAm5AAAIDAAACIwAAAhMAAAJ+QAQBwMAAAhSAAAIEgAVCKMAEwcjAAAIcgAACDIAAAnFABEHCwAACGIAAAgiAAAJpQAACAIAAAiCAAAIQgAACeUAEAcHAAAIWgAACBoAAAmVABQHQwAACHoAAAg6AAAJ1QASBxMAAAhqAAAIKgAACbUAAAgKAAAIigAACEoAAAn1ABAHBQAACFYAAAgWAEAIAAATBzMAAAh2AAAINgAACc0AEQcPAAAIZgAACCYAAAmtAAAIBgAACIYAAAhGAAAJ7QAQBwkAAAheAAAIHgAACZ0AFAdjAAAIfgAACD4AAAndABIHGwAACG4AAAguAAAJvQAACA4AAAiOAAAITgAACf0AYAcAAAAIUQAACBEAFQiDABIHHwAACHEAAAgxAAAJwwAQBwoAAAhhAAAIIQAACaMAAAgBAAAIgQAACEEAAAnjABAHBgAACFkAAAgZAAAJkwATBzsAAAh5AAAIOQAACdMAEQcRAAAIaQAACCkAAAmzAAAICQAACIkAAAhJAAAJ8wAQBwQAAAhVAAAIFQAQCAIBEwcrAAAIdQAACDUAAAnLABEHDQAACGUAAAglAAAJqwAACAUAAAiFAAAIRQAACesAEAcIAAAIXQAACB0AAAmbABQHUwAACH0AAAg9AAAJ2wASBxcAAAhtAAAILQAACbsAAAgNAAAIjQAACE0AAAn7ABAHAwAACFMAAAgTABUIwwATByMAAAhzAAAIMwAACccAEQcLAAAIYwAACCMAAAmnAAAIAwAACIMAAAhDAAAJ5wAQBwcAAAhbAAAIGwAACZcAFAdDAAAIewAACDsAAAnXABIHEwAACGsAAAgrAAAJtwAACAsAAAiLAAAISwAACfcAEAcFAAAIVwAACBcAQAgAABMHMwAACHcAAAg3AAAJzwARBw8AAAhnAAAIJwAACa8AAAgH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Y05TXzExY2hhcl90cmFpdHNJY0VFRUUA0G0AAHg9AAAAPAAATlN0M19fMjE1YmFzaWNfc3RyaW5nYnVmSWNOU18xMWNoYXJfdHJhaXRzSWNFRU5TXzlhbGxvY2F0b3JJY0VFRUUAAABAAAAAAAAAAKw+AABZAAAAWgAAADgAAAD4////rD4AAFsAAABcAAAAwP///8D///+sPgAAXQAAAF4AAADIPQAALD4AAGg+AAB8PgAAkD4AAKQ+AABUPgAAQD4AAPA9AADcPQAAQAAAAAAAAAAcPQAATAAAAE0AAAA4AAAA+P///xw9AABOAAAATwAAAMD////A////HD0AAFAAAABRAAAAQAAAAAAAAAA8PAAARAAAAEUAAADA////wP///zw8AABGAAAARwAAADgAAAAAAAAAhDwAAEgAAABJAAAAyP///8j///+EPAAASgAAAEsAAADQbQAAuD4AABw9AABOU3QzX18yMThiYXNpY19zdHJpbmdzdHJlYW1JY05TXzExY2hhcl90cmFpdHNJY0VFTlNfOWFsbG9jYXRvckljRUVFRQAAAAAAAAAAED8AAF8AAABgAAAAqG0AABg/AABOU3QzX18yOGlvc19iYXNlRQAAAAAAAADRdJ4AV529KoBwUg///z4nCgAAAGQAAADoAwAAECcAAKCGAQBAQg8AgJaYAADh9QUYAAAANQAAAHEAAABr////zvv//5K///8AAAAAAAAAAP////////////////////////////////////////////////////////////////8AAQIDBAUGBwgJ/////////woLDA0ODxAREhMUFRYXGBkaGxwdHh8gISIj////////CgsMDQ4PEBESExQVFhcYGRobHB0eHyAhIiP/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////AAECBAcDBgUAAAAAAAAAAgAAwAMAAMAEAADABQAAwAYAAMAHAADACAAAwAkAAMAKAADACwAAwAwAAMANAADADgAAwA8AAMAQAADAEQAAwBIAAMATAADA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")),H((await de(ne)).instance))})();function ZB(){function j(){var H;if(i.calledRun=!0,!C){if(R=!0,Nh.G(),E?.(i),(H=i.onRuntimeInitialized)==null||H.call(i),i.postRun)for(typeof i.postRun=="function"&&(i.postRun=[i.postRun]);i.postRun.length;){var ne=i.postRun.shift();Se.push(ne)}he(Se)}}if(0<G)q=ZB;else{if(i.preRun)for(typeof i.preRun=="function"&&(i.preRun=[i.preRun]);i.preRun.length;)_e();he(be),0<G?q=ZB:i.setStatus?(i.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>i.setStatus(""),1),j()},1)):j()}}if(i.preInit)for(typeof i.preInit=="function"&&(i.preInit=[i.preInit]);0<i.preInit.length;)i.preInit.shift()();return ZB(),R?n=i:n=new Promise((j,H)=>{E=j,I=H}),n}var Qm=(e,t,n=i=>i)=>{let i=e.vf32_ptr(t),o=t.size();return new Float32Array(e.HEAPF32.buffer,i,o).map(n)},wle=e=>1/(1+Math.exp(-e)),Dle=e=>t=>t*e+.5,Qle=(e,t,n)=>{let i=n?.colorScaleFactor??.282;return{numPoints:t.numPoints,shDegree:t.shDegree,antialiased:t.antialiased,positions:Qm(e,t.positions),scales:Qm(e,t.scales,Math.exp),rotations:Qm(e,t.rotations),alphas:Qm(e,t.alphas,wle),colors:Qm(e,t.colors,Dle(i)),sh:Qm(e,t.sh)}},Rle=(e,t)=>{e._free(e.vf32_ptr(t.positions)),e._free(e.vf32_ptr(t.scales)),e._free(e.vf32_ptr(t.rotations)),e._free(e.vf32_ptr(t.alphas)),e._free(e.vf32_ptr(t.colors)),e._free(e.vf32_ptr(t.sh))},JU=async(e,t)=>{var n;let i=await Sle(),o=e instanceof Uint8Array?e:new Uint8Array(e),r=null;try{if(r=i._malloc(Uint8Array.BYTES_PER_ELEMENT*o.length),r===null)throw new Error("couldn't allocate memory");i.HEAPU8.set(o,r/Uint8Array.BYTES_PER_ELEMENT);let a=i.CoordinateSystem[((n=t?.unpackOptions)==null?void 0:n.coordinateSystem)??"UNSPECIFIED"],s=i.load_spz(r,o.length,{coordinateSystem:a}),A=Qle(i,s,t);return Rle(i,s),A}catch(a){throw a}finally{r!==null&&i._free(r)}};var vle=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));function fu(e){e=e??k.EMPTY_OBJECT;let t=e.resourceCache,n=e.gltf,i=e.primitive,o=e.spz,r=e.gltfResource,a=e.baseResource,s=e.cacheKey;this._resourceCache=t,this._gltfResource=r,this._baseResource=a,this._gltf=n,this._primitive=i,this._spz=o,this._cacheKey=s,this._bufferViewLoader=void 0,this._bufferViewTypedArray=void 0,this._decodePromise=void 0,this._decodedData=void 0,this._state=Fe.UNLOADED,this._promise=void 0,this._spzError=void 0}c(Object.create)&&(fu.prototype=Object.create(zn.prototype),fu.prototype.constructor=fu);Object.defineProperties(fu.prototype,{cacheKey:{get:function(){return this._cacheKey}},decodedData:{get:function(){return this._decodedData}}});async function Ple(e){let t=e._resourceCache;try{let n=t.getBufferViewLoader({gltf:e._gltf,bufferViewId:0,gltfResource:e._gltfResource,baseResource:e._baseResource});return e._bufferViewLoader=n,await n.load(),e.isDestroyed()?void 0:(e._bufferViewTypedArray=n.typedArray,e._state=Fe.PROCESSING,e)}catch(n){if(e.isDestroyed())return;KU(e,n)}}fu.prototype.load=async function(){return c(this._promise)?this._promise:(this._state=Fe.LOADING,this._promise=Ple(this),this._promise)};function KU(e,t){throw e.unload(),e._state=Fe.FAILED,e.getError("Failed to load SPZ",t)}async function Mle(e,t){try{let n=await t;return e.isDestroyed()?void 0:(e.unload(),e._decodedData={gcloud:n},e._state=Fe.READY,e._baseResource)}catch(n){if(e.isDestroyed())return;e._spzError=n}}fu.prototype.process=function(e){if(this._state===Fe.READY)return!0;if(this._state!==Fe.PROCESSING||(c(this._spzError)&&KU(this,this._spzError),!c(this._bufferViewTypedArray))||c(this._decodePromise))return!1;let t=JU(this._bufferViewTypedArray,{unpackOptions:{coordinateSystem:"UNSPECIFIED"}});if(!c(t))return!1;this._decodePromise=Mle(this,t)};fu.prototype.unload=function(){c(this._bufferViewLoader)&&this._resourceCache.unload(this._bufferViewLoader),this._bufferViewLoader=void 0,this._bufferViewTypedArray=void 0,this._decodedData=void 0,this._gltf=void 0,this._primitive=void 0};var XU=fu;function ZC(e){e=e??k.EMPTY_OBJECT;let t=e.id,n=e.properties??{},i={};for(let o in n)if(n.hasOwnProperty(o)){let r=n[o];c(r.semantic)&&(i[r.semantic]=r)}this._id=t,this._name=e.name,this._description=e.description,this._properties=n,this._propertiesBySemantic=i,this._extras=Ne(e.extras,!0),this._extensions=Ne(e.extensions,!0)}ZC.fromJson=function(e){e=e??k.EMPTY_OBJECT;let t=e.id,n=e.class,i={};for(let o in n.properties)if(n.properties.hasOwnProperty(o)){let r=zC.fromJson({id:o,property:n.properties[o],enums:e.enums});i[o]=r}return new ZC({id:t,name:n.name,description:n.description,properties:i,extras:n.extras,extensions:n.extensions})};Object.defineProperties(ZC.prototype,{properties:{get:function(){return this._properties}},propertiesBySemantic:{get:function(){return this._propertiesBySemantic}},id:{get:function(){return this._id}},name:{get:function(){return this._name}},description:{get:function(){return this._description}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}}});ZC.BATCH_TABLE_CLASS_NAME="_batchTable";var uu=ZC;function bb(e){e=e??k.EMPTY_OBJECT;let t=e.value,n=e.name;this._value=t,this._name=n,this._description=e.description,this._extras=Ne(e.extras,!0),this._extensions=Ne(e.extensions,!0)}bb.fromJson=function(e){return new bb({value:e.value,name:e.name,description:e.description,extras:e.extras,extensions:e.extensions})};Object.defineProperties(bb.prototype,{value:{get:function(){return this._value}},name:{get:function(){return this._name}},description:{get:function(){return this._description}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}}});var ZU=bb;function Bb(e){e=e??k.EMPTY_OBJECT;let t=e.id,n=e.values,i={},o={},r=n.length;for(let s=0;s<r;++s){let A=n[s];i[A.value]=A.name,o[A.name]=A.value}let a=e.valueType??Xt.UINT16;this._values=n,this._namesByValue=i,this._valuesByName=o,this._valueType=a,this._id=t,this._name=e.name,this._description=e.description,this._extras=Ne(e.extras,!0),this._extensions=Ne(e.extensions,!0)}Bb.fromJson=function(e){e=e??k.EMPTY_OBJECT;let t=e.id,n=e.enum,i=n.values.map(function(o){return ZU.fromJson(o)});return new Bb({id:t,values:i,valueType:Xt[n.valueType],name:n.name,description:n.description,extras:n.extras,extensions:n.extensions})};Object.defineProperties(Bb.prototype,{values:{get:function(){return this._values}},namesByValue:{get:function(){return this._namesByValue}},valuesByName:{get:function(){return this._valuesByName}},valueType:{get:function(){return this._valueType}},id:{get:function(){return this._id}},name:{get:function(){return this._name}},description:{get:function(){return this._description}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}}});var $U=Bb;function xb(e){e=e??k.EMPTY_OBJECT;let t=e.classes??{},n=e.enums??{};this._classes=t,this._enums=n,this._id=e.id,this._name=e.name,this._description=e.description,this._version=e.version,this._extras=Ne(e.extras,!0),this._extensions=Ne(e.extensions,!0)}xb.fromJson=function(e){let t={};if(c(e.enums))for(let i in e.enums)e.enums.hasOwnProperty(i)&&(t[i]=$U.fromJson({id:i,enum:e.enums[i]}));let n={};if(c(e.classes))for(let i in e.classes)e.classes.hasOwnProperty(i)&&(n[i]=uu.fromJson({id:i,class:e.classes[i],enums:t}));return new xb({id:e.id,name:e.name,description:e.description,version:e.version,classes:n,enums:t,extras:e.extras,extensions:e.extensions})};Object.defineProperties(xb.prototype,{classes:{get:function(){return this._classes}},enums:{get:function(){return this._enums}},id:{get:function(){return this._id}},name:{get:function(){return this._name}},description:{get:function(){return this._description}},version:{get:function(){return this._version}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}}});var RA=xb;function Kd(e){e=e??k.EMPTY_OBJECT;let t=e.schema,n=e.resource,i=e.cacheKey;this._schema=c(t)?RA.fromJson(t):void 0,this._resource=n,this._cacheKey=i,this._state=Fe.UNLOADED,this._promise=void 0}c(Object.create)&&(Kd.prototype=Object.create(zn.prototype),Kd.prototype.constructor=Kd);Object.defineProperties(Kd.prototype,{cacheKey:{get:function(){return this._cacheKey}},schema:{get:function(){return this._schema}}});Kd.prototype.load=async function(){return c(this._promise)?this._promise:c(this._schema)?(this._promise=Promise.resolve(this),this._promise):(this._promise=Ole(this),this._promise)};async function Ole(e){let t=e._resource;e._state=Fe.LOADING;try{let n=await t.fetchJson();return e.isDestroyed()?void 0:(e._schema=RA.fromJson(n),e._state=Fe.READY,e)}catch(n){if(e.isDestroyed())return;e._state=Fe.FAILED;let i=`Failed to load schema: ${t.url}`;throw e.getError(i,n)}}Kd.prototype.unload=function(){this._schema=void 0};var hw=Kd;var js={};function Rm(e){return ud(e.url)}function $C(e){let{byteOffset:t,byteLength:n}=e;if(Wn(e,"EXT_meshopt_compression")){let i=e.extensions.EXT_meshopt_compression;t=i.byteOffset??0,n=i.byteLength}return`${t}-${t+n}`}function Lle(e,t){let n=t.byteOffset+e.byteOffset,{componentType:i,type:o,count:r}=e;return`${n}-${i}-${o}-${r}`}function eG(e,t){return`${Rm(e)}-buffer-id-${t}`}function vm(e,t,n,i){if(c(e.uri)){let o=i.getDerivedResource({url:e.uri});return Rm(o)}return eG(n,t)}function mw(e,t,n,i){let o=t.bufferView,r=e.bufferViews[o],a=r.buffer,s=e.buffers[a],A=vm(s,a,n,i),l=$C(r);return`${A}-range-${l}`}function tG(e,t,n,i){let r=e.bufferViews[0],a=r.buffer,s=e.buffers[a],A=vm(s,a,n,i),l=$C(r);return`${A}-range-${l}`}function nG(e,t,n,i){let o=e.images[t],r=o.bufferView,a=o.uri;if(c(a)){let m=i.getDerivedResource({url:a});return Rm(m)}let s=e.bufferViews[r],A=s.buffer,l=e.buffers[A],f=vm(l,A,n,i),h=$C(s);return`${f}-range-${h}`}function Nle(e,t){let n=Dc.createSampler({gltf:e,textureInfo:t});return`${n.wrapS}-${n.wrapT}-${n.minificationFilter}-${n.magnificationFilter}`}js.getSchemaCacheKey=function(e){let{schema:t,resource:n}=e;return c(t)?`embedded-schema:${JSON.stringify(t)}`:`external-schema:${Rm(n)}`};js.getExternalBufferCacheKey=function(e){e=e??k.EMPTY_OBJECT;let{resource:t}=e;return`external-buffer:${Rm(t)}`};js.getEmbeddedBufferCacheKey=function(e){e=e??k.EMPTY_OBJECT;let{parentResource:t,bufferId:n}=e;return`embedded-buffer:${eG(t,n)}`};js.getGltfCacheKey=function(e){e=e??k.EMPTY_OBJECT;let{gltfResource:t}=e;return`gltf:${Rm(t)}`};js.getBufferViewCacheKey=function(e){e=e??k.EMPTY_OBJECT;let{gltf:t,bufferViewId:n,gltfResource:i,baseResource:o}=e,r=t.bufferViews[n],a=r.buffer,s=t.buffers[a];Wn(r,"EXT_meshopt_compression")&&(a=r.extensions.EXT_meshopt_compression.buffer);let A=vm(s,a,i,o),l=$C(r);return`buffer-view:${A}-range-${l}`};js.getDracoCacheKey=function(e){e=e??k.EMPTY_OBJECT;let{gltf:t,draco:n,gltfResource:i,baseResource:o}=e;return`draco:${mw(t,n,i,o)}`};js.getSpzCacheKey=function(e){e=e??k.EMPTY_OBJECT;let{gltf:t,primitive:n,gltfResource:i,baseResource:o}=e;return`spz:${tG(t,n,i,o)}`};js.getVertexBufferCacheKey=function(e){e=e??k.EMPTY_OBJECT;let{gltf:t,gltfResource:n,baseResource:i,frameState:o,bufferViewId:r,draco:a,spz:s,attributeSemantic:A,dequantize:l=!1,loadBuffer:f=!1,loadTypedArray:h=!1}=e,m="";if(l&&(m+="-dequantize"),f&&(m+="-buffer",m+=`-context-${o.context.id}`),h&&(m+="-typed-array"),c(a))return`vertex-buffer:${mw(t,a,n,i)}-draco-${A}${m}`;if(s)return`vertex-buffer:${tG(t,s,n,i)}-spz-${A}${m}`;let p=t.bufferViews[r],g=p.buffer,C=t.buffers[g],_=vm(C,g,n,i),E=$C(p);return`vertex-buffer:${_}-range-${E}${m}`};js.getIndexBufferCacheKey=function(e){e=e??k.EMPTY_OBJECT;let{gltf:t,accessorId:n,gltfResource:i,baseResource:o,frameState:r,draco:a,loadBuffer:s=!1,loadTypedArray:A=!1}=e,l="";if(s&&(l+="-buffer",l+=`-context-${r.context.id}`),A&&(l+="-typed-array"),c(a))return`index-buffer:${mw(t,a,i,o)}-draco${l}`;let f=t.accessors[n],h=f.bufferView,m=t.bufferViews[h],p=m.buffer,g=t.buffers[p],C=vm(g,p,i,o),_=Lle(f,m);return`index-buffer:${C}-accessor-${_}${l}`};js.getImageCacheKey=function(e){e=e??k.EMPTY_OBJECT;let{gltf:t,imageId:n,gltfResource:i,baseResource:o}=e;return`image:${nG(t,n,i,o)}`};js.getTextureCacheKey=function(e){e=e??k.EMPTY_OBJECT;let{gltf:t,textureInfo:n,gltfResource:i,baseResource:o,supportedImageFormats:r,frameState:a}=e,s=n.index,A=Dc.getImageIdFromTexture({gltf:t,textureId:s,supportedImageFormats:r}),l=nG(t,A,i,o),f=Nle(t,n);return`texture:${l}-sampler-${f}-context-${a.context.id}`};var Ys=js;function e_(){this.geometryByteLength=0,this.texturesByteLength=0,this._geometrySizes={},this._textureSizes={}}e_.prototype.clear=function(){this.geometryByteLength=0,this.texturesByteLength=0,this._geometrySizes={},this._textureSizes={}};e_.prototype.addGeometryLoader=function(e){let t=e.cacheKey;if(this._geometrySizes.hasOwnProperty(t))return;this._geometrySizes[t]=0;let n=e.buffer,i=e.typedArray,o=0;c(n)&&(o+=n.sizeInBytes),c(i)&&(o+=i.byteLength),this.geometryByteLength+=o,this._geometrySizes[t]=o};e_.prototype.addTextureLoader=function(e){let t=e.cacheKey;if(this._textureSizes.hasOwnProperty(t))return;this._textureSizes[t]=0;let n=e.texture.sizeInBytes;this.texturesByteLength+=e.texture.sizeInBytes,this._textureSizes[t]=n};e_.prototype.removeLoader=function(e){let t=e.cacheKey,n=this._geometrySizes[t];delete this._geometrySizes[t],c(n)&&(this.geometryByteLength-=n);let i=this._textureSizes[t];delete this._textureSizes[t],c(i)&&(this.texturesByteLength-=i)};var iG=e_;function Ut(){}Ut.cacheEntries={};Ut.statistics=new iG;function Fle(e){this.referenceCount=1,this.resourceLoader=e,this._statisticsPromise=void 0}Ut.get=function(e){let t=Ut.cacheEntries[e];if(c(t))return++t.referenceCount,t.resourceLoader};Ut.add=function(e){let t=e.cacheKey;return Ut.cacheEntries[t]=new Fle(e),e};Ut.unload=function(e){let t=e.cacheKey,n=Ut.cacheEntries[t];--n.referenceCount,n.referenceCount===0&&(Ut.statistics.removeLoader(e),e.destroy(),delete Ut.cacheEntries[t])};Ut.getSchemaLoader=function(e){e=e??k.EMPTY_OBJECT;let{schema:t,resource:n}=e,i=Ys.getSchemaCacheKey({schema:t,resource:n}),o=Ut.get(i);return c(o)?o:(o=new hw({schema:t,resource:n,cacheKey:i}),Ut.add(o))};Ut.getEmbeddedBufferLoader=function(e){e=e??k.EMPTY_OBJECT;let{parentResource:t,bufferId:n,typedArray:i}=e,o=Ys.getEmbeddedBufferCacheKey({parentResource:t,bufferId:n}),r=Ut.get(o);return c(r)?r:(r=new cb({typedArray:i,cacheKey:o}),Ut.add(r))};Ut.getExternalBufferLoader=function(e){e=e??k.EMPTY_OBJECT;let{resource:t}=e,n=Ys.getExternalBufferCacheKey({resource:t}),i=Ut.get(n);return c(i)?i:(i=new cb({resource:t,cacheKey:n}),Ut.add(i))};Ut.getGltfJsonLoader=function(e){e=e??k.EMPTY_OBJECT;let{gltfResource:t,baseResource:n,typedArray:i,gltfJson:o}=e,r=Ys.getGltfCacheKey({gltfResource:t}),a=Ut.get(r);return c(a)?a:(a=new cw({resourceCache:Ut,gltfResource:t,baseResource:n,typedArray:i,gltfJson:o,cacheKey:r}),Ut.add(a))};Ut.getBufferViewLoader=function(e){e=e??k.EMPTY_OBJECT;let{gltf:t,bufferViewId:n,gltfResource:i,baseResource:o}=e,r=Ys.getBufferViewCacheKey({gltf:t,bufferViewId:n,gltfResource:i,baseResource:o}),a=Ut.get(r);return c(a)?a:(a=new WS({resourceCache:Ut,gltf:t,bufferViewId:n,gltfResource:i,baseResource:o,cacheKey:r}),Ut.add(a))};Ut.getDracoLoader=function(e){e=e??k.EMPTY_OBJECT;let{gltf:t,primitive:n,draco:i,gltfResource:o,baseResource:r}=e,a=Ys.getDracoCacheKey({gltf:t,draco:i,gltfResource:o,baseResource:r}),s=Ut.get(a);return c(s)?s:(s=new JS({resourceCache:Ut,gltf:t,primitive:n,draco:i,gltfResource:o,baseResource:r,cacheKey:a}),Ut.add(s))};Ut.getSpzLoader=function(e){e=e??k.EMPTY_OBJECT;let{gltf:t,primitive:n,spz:i,gltfResource:o,baseResource:r}=e,a=Ys.getSpzCacheKey({gltf:t,primitive:n,gltfResource:o,baseResource:r}),s=Ut.get(a);return c(s)?s:(s=new XU({resourceCache:Ut,gltf:t,primitive:n,spz:i,gltfResource:o,baseResource:r,cacheKey:a}),Ut.add(s))};Ut.getVertexBufferLoader=function(e){e=e??k.EMPTY_OBJECT;let{gltf:t,gltfResource:n,baseResource:i,frameState:o,bufferViewId:r,primitive:a,draco:s,spz:A,attributeSemantic:l,accessorId:f,asynchronous:h=!0,dequantize:m=!1,loadBuffer:p=!1,loadTypedArray:g=!1}=e,C=Ys.getVertexBufferCacheKey({gltf:t,gltfResource:n,baseResource:i,frameState:o,bufferViewId:r,draco:s,spz:A,attributeSemantic:l,dequantize:m,loadBuffer:p,loadTypedArray:g}),_=Ut.get(C);return c(_)?_:(_=new dw({resourceCache:Ut,gltf:t,gltfResource:n,baseResource:i,bufferViewId:r,primitive:a,draco:s,spz:A,attributeSemantic:l,accessorId:f,cacheKey:C,asynchronous:h,dequantize:m,loadBuffer:p,loadTypedArray:g}),Ut.add(_))};Ut.getIndexBufferLoader=function(e){e=e??k.EMPTY_OBJECT;let{gltf:t,accessorId:n,gltfResource:i,baseResource:o,frameState:r,primitive:a,draco:s,asynchronous:A=!0,loadBuffer:l=!1,loadTypedArray:f=!1}=e,h=Ys.getIndexBufferCacheKey({gltf:t,accessorId:n,gltfResource:i,baseResource:o,frameState:r,draco:s,loadBuffer:l,loadTypedArray:f}),m=Ut.get(h);return c(m)?m:(m=new $S({resourceCache:Ut,gltf:t,accessorId:n,gltfResource:i,baseResource:o,primitive:a,draco:s,cacheKey:h,asynchronous:A,loadBuffer:l,loadTypedArray:f}),Ut.add(m))};Ut.getImageLoader=function(e){e=e??k.EMPTY_OBJECT;let{gltf:t,imageId:n,gltfResource:i,baseResource:o}=e,r=Ys.getImageCacheKey({gltf:t,imageId:n,gltfResource:i,baseResource:o}),a=Ut.get(r);return c(a)?a:(a=new KS({resourceCache:Ut,gltf:t,imageId:n,gltfResource:i,baseResource:o,cacheKey:r}),Ut.add(a))};Ut.getTextureLoader=function(e){e=e??k.EMPTY_OBJECT;let{gltf:t,textureInfo:n,gltfResource:i,baseResource:o,supportedImageFormats:r,frameState:a,asynchronous:s=!0}=e,A=Ys.getTextureCacheKey({gltf:t,textureInfo:n,gltfResource:i,baseResource:o,supportedImageFormats:r,frameState:a}),l=Ut.get(A);return c(l)?l:(l=new fw({resourceCache:Ut,gltf:t,textureInfo:n,gltfResource:i,baseResource:o,supportedImageFormats:r,cacheKey:A,asynchronous:s}),Ut.add(l))};Ut.clearForSpecs=function(){let e=[dw,$S,JS,fw,KS,WS,cb,hw,cw],t,n=Ut.cacheEntries,i=[];for(t in n)n.hasOwnProperty(t)&&i.push(n[t]);i.sort(function(r,a){let s=e.indexOf(r.resourceLoader.constructor),A=e.indexOf(a.resourceLoader.constructor);return s-A});let o=i.length;for(let r=0;r<o;++r){let a=i[r];t=a.resourceLoader.cacheKey,c(n[t])&&(a.resourceLoader.destroy(),delete n[t])}Ut.statistics.clear()};var di=Ut;function er(e,t,n){this._resource=e,this._subtreeJson=void 0,this._bufferLoader=void 0,this._tileAvailability=void 0,this._contentAvailabilityBitstreams=[],this._childSubtreeAvailability=void 0,this._implicitCoordinates=n,this._subtreeLevels=t.subtreeLevels,this._subdivisionScheme=t.subdivisionScheme,this._branchingFactor=t.branchingFactor,this._metadata=void 0,this._tileMetadataTable=void 0,this._tilePropertyTableJson=void 0,this._contentMetadataTables=[],this._contentPropertyTableJsons=[],this._tileJumpBuffer=void 0,this._contentJumpBuffers=[],this._ready=!1}Object.defineProperties(er.prototype,{ready:{get:function(){return this._ready}},metadata:{get:function(){return this._metadata}},tileMetadataTable:{get:function(){return this._tileMetadataTable}},tilePropertyTableJson:{get:function(){return this._tilePropertyTableJson}},contentMetadataTables:{get:function(){return this._contentMetadataTables}},contentPropertyTableJsons:{get:function(){return this._contentPropertyTableJsons}},implicitCoordinates:{get:function(){return this._implicitCoordinates}}});er.prototype.tileIsAvailableAtIndex=function(e){return this._tileAvailability.getBit(e)};er.prototype.tileIsAvailableAtCoordinates=function(e){let t=this.getTileIndex(e);return this.tileIsAvailableAtIndex(t)};er.prototype.contentIsAvailableAtIndex=function(e,t){return t=t??0,this._contentAvailabilityBitstreams[t].getBit(e)};er.prototype.contentIsAvailableAtCoordinates=function(e,t){let n=this.getTileIndex(e);return this.contentIsAvailableAtIndex(n,t)};er.prototype.childSubtreeIsAvailableAtIndex=function(e){return this._childSubtreeAvailability.getBit(e)};er.prototype.childSubtreeIsAvailableAtCoordinates=function(e){let t=this.getChildSubtreeIndex(e);return this.childSubtreeIsAvailableAtIndex(t)};er.prototype.getLevelOffset=function(e){let t=this._branchingFactor;return(Math.pow(t,e)-1)/(t-1)};er.prototype.getParentMortonIndex=function(e){let t=2;return this._subdivisionScheme===Go.OCTREE&&(t=3),e>>t};er.fromSubtreeJson=async function(e,t,n,i,o){let r=new er(e,i,o),a;c(t)?a={json:t,binary:void 0}:a=kle(n);let s=a.json;r._subtreeJson=s;let A;if(Wn(s,"3DTILES_metadata"))A=s.extensions["3DTILES_metadata"];else if(c(s.tileMetadata)){let I=s.tileMetadata;A=s.propertyTables[I]}let l=[];if(c(s.contentMetadata)){let I=s.contentMetadata.length;for(let y=0;y<I;y++){let b=s.contentMetadata[y];l.push(s.propertyTables[b])}}let f,h=i.metadataSchema,m=s.subtreeMetadata;if(c(m)){let I=m.class,y=h.classes[I];f=new X2({subtreeMetadata:m,class:y})}r._metadata=f,r._tilePropertyTableJson=A,r._contentPropertyTableJsons=l;let p={constant:0};s.contentAvailabilityHeaders=[],Wn(s,"3DTILES_multiple_contents")?s.contentAvailabilityHeaders=s.extensions["3DTILES_multiple_contents"].contentAvailability:Array.isArray(s.contentAvailability)?s.contentAvailabilityHeaders=s.contentAvailability:s.contentAvailabilityHeaders.push(s.contentAvailability??p);let g=Ule(s.buffers),C=Gle(s.bufferViews,g);zle(s,C),c(A)&&oG(A,C);for(let I=0;I<l.length;I++){let y=l[I];oG(y,C)}let _=await Hle(r,g,a.binary),E=jle(C,_);return Yle(r,s,i,E),c(A)&&(qle(r,i,E),Jle(r)),Wle(r,i,E),Kle(r),r._ready=!0,r};function kle(e){let n=new DataView(e.buffer,e.byteOffset),i=8,o=n.getUint32(i,!0);i+=8;let r=n.getUint32(i,!0);i+=8;let a=_o(e,i,o);i+=o;let s=e.subarray(i,i+r);return{json:a,binary:s}}function Ule(e){e=c(e)?e:[];for(let t=0;t<e.length;t++){let n=e[t];n.isExternal=c(n.uri),n.isActive=!1}return e}function Gle(e,t){e=c(e)?e:[];for(let n=0;n<e.length;n++){let i=e[n],o=t[i.buffer];i.bufferHeader=o,i.isActive=!1}return e}function zle(e,t){let n,i=e.tileAvailability;c(i.bitstream)?n=t[i.bitstream]:c(i.bufferView)&&(n=t[i.bufferView]),c(n)&&(n.isActive=!0,n.bufferHeader.isActive=!0);let o=e.contentAvailabilityHeaders;for(let a=0;a<o.length;a++)n=void 0,c(o[a].bitstream)?n=t[o[a].bitstream]:c(o[a].bufferView)&&(n=t[o[a].bufferView]),c(n)&&(n.isActive=!0,n.bufferHeader.isActive=!0);n=void 0;let r=e.childSubtreeAvailability;c(r.bitstream)?n=t[r.bitstream]:c(r.bufferView)&&(n=t[r.bufferView]),c(n)&&(n.isActive=!0,n.bufferHeader.isActive=!0)}function oG(e,t){let n=e.properties,i;for(let o in n)if(n.hasOwnProperty(o)){let r=n[o],a=r.values??r.bufferView;i=t[a],i.isActive=!0,i.bufferHeader.isActive=!0;let s=r.stringOffsets??r.stringOffsetBufferView;c(s)&&(i=t[s],i.isActive=!0,i.bufferHeader.isActive=!0);let A=r.arrayOffsets??r.arrayOffsetBufferView;c(A)&&(i=t[A],i.isActive=!0,i.bufferHeader.isActive=!0)}}function Hle(e,t,n){let i=[];for(let o=0;o<t.length;o++){let r=t[o];if(!r.isActive)i.push(Promise.resolve(void 0));else if(r.isExternal){let a=Vle(e,r);i.push(a)}else i.push(Promise.resolve(n))}return Promise.all(i).then(function(o){let r={};for(let a=0;a<o.length;a++){let s=o[a];c(s)&&(r[a]=s)}return r})}async function Vle(e,t){let i=e._resource.getDerivedResource({url:t.uri}),o=di.getExternalBufferLoader({resource:i});e._bufferLoader=o;try{await o.load()}catch(r){if(o.isDestroyed())return;throw r}return o.typedArray}function jle(e,t){let n={};for(let i=0;i<e.length;i++){let o=e[i];if(!o.isActive)continue;let r=o.byteOffset,a=r+o.byteLength,A=t[o.buffer].subarray(r,a);n[i]=A}return n}function Yle(e,t,n,i){let o=n.branchingFactor,r=n.subtreeLevels,a=(Math.pow(o,r)-1)/(o-1),s=Math.pow(o,r),A=Wn(t,"3DTILES_metadata"),l=c(e._tilePropertyTableJson),f=A||l;e._tileAvailability=pw(t.tileAvailability,i,a,f);let h=e._contentPropertyTableJsons.length>0;f=f||h;for(let m=0;m<t.contentAvailabilityHeaders.length;m++){let p=pw(t.contentAvailabilityHeaders[m],i,a,f);e._contentAvailabilityBitstreams.push(p)}e._childSubtreeAvailability=pw(t.childSubtreeAvailability,i,s)}function pw(e,t,n,i){if(c(e.constant))return new US({constant:!!e.constant,lengthBits:n,availableCount:e.availableCount});let o;return c(e.bitstream)?o=t[e.bitstream]:c(e.bufferView)&&(o=t[e.bufferView]),new US({bitstream:o,lengthBits:n,availableCount:e.availableCount,computeAvailableCountEnabled:i})}function qle(e,t,n){let i=e._tilePropertyTableJson,o=e._tileAvailability.availableCount,r=t.metadataSchema,a=i.class,s=r.classes[a];e._tileMetadataTable=new Dl({class:s,count:o,properties:i.properties,bufferViews:n})}function Wle(e,t,n){let i=e._contentPropertyTableJsons,o=e._contentAvailabilityBitstreams,r=t.metadataSchema,a=e._contentMetadataTables;for(let s=0;s<i.length;s++){let A=i[s],f=o[s].availableCount,h=A.class,m=r.classes[h],p=new Dl({class:m,count:f,properties:A.properties,bufferViews:n});a.push(p)}}function rG(e){let t=0,n=e.lengthBits,i=e.availableCount,o;i<256?o=new Uint8Array(n):i<65536?o=new Uint16Array(n):o=new Uint32Array(n);for(let r=0;r<e.lengthBits;r++)e.getBit(r)&&(o[r]=t,t++);return o}function Jle(e){let t=rG(e._tileAvailability);e._tileJumpBuffer=t}function Kle(e){let t=e._contentJumpBuffers,n=e._contentAvailabilityBitstreams;for(let i=0;i<n.length;i++){let o=n[i],r=rG(o);t.push(r)}}er.prototype.getTileIndex=function(e){let t=e.level-this._implicitCoordinates.level;if(t<0||this._subtreeLevels<=t)throw new oe("level is out of bounds for this subtree");return e.getSubtreeCoordinates().getOffsetCoordinates(e).tileIndex};er.prototype.getChildSubtreeIndex=function(e){if(e.level-this._implicitCoordinates.level!==this._implicitCoordinates.subtreeLevels)throw new oe("level is out of bounds for this subtree");return e.getParentSubtreeCoordinates().getOffsetCoordinates(e).mortonIndex};function Xle(e,t){if(!c(e._tileMetadataTable))return;let n=e.getTileIndex(t);if(e._tileAvailability.getBit(n))return e._tileJumpBuffer[n]}function Zle(e,t,n){let i=e._contentMetadataTables;if(!c(i))return;let o=i[n];if(!c(o))return;let r=e._contentAvailabilityBitstreams[n],a=e.getTileIndex(t);if(r.getBit(a))return e._contentJumpBuffers[n][a]}er.prototype.getTileMetadataView=function(e){let t=Xle(this,e);if(!c(t))return;let n=this._tileMetadataTable;return new GS({class:n.class,metadataTable:n,entityId:t,propertyTableJson:this._tilePropertyTableJson})};er.prototype.getContentMetadataView=function(e,t){let n=Zle(this,e,t);if(!c(n))return;let i=this._contentMetadataTables[t],o=this._contentPropertyTableJsons[t];return new GS({class:i.class,metadataTable:i,entityId:n,contentIndex:t,propertyTableJson:o})};er.prototype.isDestroyed=function(){return!1};er.prototype.destroy=function(){return c(this._bufferLoader)&&di.unload(this._bufferLoader),pe(this)};var aG=er;var $le={ID:"ID",NAME:"NAME",DESCRIPTION:"DESCRIPTION",TILESET_TILE_COUNT:"TILESET_TILE_COUNT",TILE_BOUNDING_BOX:"TILE_BOUNDING_BOX",TILE_BOUNDING_REGION:"TILE_BOUNDING_REGION",TILE_BOUNDING_SPHERE:"TILE_BOUNDING_SPHERE",TILE_MINIMUM_HEIGHT:"TILE_MINIMUM_HEIGHT",TILE_MAXIMUM_HEIGHT:"TILE_MAXIMUM_HEIGHT",TILE_HORIZON_OCCLUSION_POINT:"TILE_HORIZON_OCCLUSION_POINT",TILE_GEOMETRIC_ERROR:"TILE_GEOMETRIC_ERROR",CONTENT_BOUNDING_BOX:"CONTENT_BOUNDING_BOX",CONTENT_BOUNDING_REGION:"CONTENT_BOUNDING_REGION",CONTENT_BOUNDING_SPHERE:"CONTENT_BOUNDING_SPHERE",CONTENT_MINIMUM_HEIGHT:"CONTENT_MINIMUM_HEIGHT",CONTENT_MAXIMUM_HEIGHT:"CONTENT_MAXIMUM_HEIGHT",CONTENT_HORIZON_OCCLUSION_POINT:"CONTENT_HORIZON_OCCLUSION_POINT"},sG=Object.freeze($le);var Qc={};Qc.parseAllBoundingVolumeSemantics=function(e){return{tile:{boundingVolume:Qc.parseBoundingVolumeSemantic("TILE",e),minimumHeight:Qc._parseMinimumHeight("TILE",e),maximumHeight:Qc._parseMaximumHeight("TILE",e)},content:{boundingVolume:Qc.parseBoundingVolumeSemantic("CONTENT",e),minimumHeight:Qc._parseMinimumHeight("CONTENT",e),maximumHeight:Qc._parseMaximumHeight("CONTENT",e)}}};Qc.parseBoundingVolumeSemantic=function(e,t){let n=`${e}_BOUNDING_BOX`,i=t.getPropertyBySemantic(n);if(c(i))return{box:i};let o=`${e}_BOUNDING_REGION`,r=t.getPropertyBySemantic(o);if(c(r))return{region:r};let a=`${e}_BOUNDING_SPHERE`,s=t.getPropertyBySemantic(a);if(c(s))return{sphere:s}};Qc._parseMinimumHeight=function(e,t){let n=`${e}_MINIMUM_HEIGHT`;return t.getPropertyBySemantic(n)};Qc._parseMaximumHeight=function(e,t){let n=`${e}_MAXIMUM_HEIGHT`;return t.getPropertyBySemantic(n)};var Tb=Qc;function aa(e,t,n){let i=t.implicitTileset,o=t.implicitCoordinates;this._implicitTileset=i,this._implicitCoordinates=o,this._implicitSubtree=void 0,this._tileset=e,this._tile=t,this._resource=n,this._metadata=void 0,this.featurePropertiesDirty=!1,this._group=void 0;let r=o.getTemplateValues(),a=i.subtreeUriTemplate.getDerivedResource({templateValues:r});this._url=a.getUrlComponent(!0),this._ready=!1}Object.defineProperties(aa.prototype,{featuresLength:{get:function(){return 0}},pointsLength:{get:function(){return 0}},trianglesLength:{get:function(){return 0}},geometryByteLength:{get:function(){return 0}},texturesByteLength:{get:function(){return 0}},batchTableByteLength:{get:function(){return 0}},innerContents:{get:function(){}},ready:{get:function(){return this._ready}},tileset:{get:function(){return this._tileset}},tile:{get:function(){return this._tile}},url:{get:function(){return this._url}},metadata:{get:function(){},set:function(){}},batchTable:{get:function(){}},group:{get:function(){return this._group},set:function(e){this._group=e}}});aa.fromSubtreeJson=async function(e,t,n,i,o,r){r=r??0;let a;c(o)&&(a=new Uint8Array(o,r));let s=t.implicitTileset,A=t.implicitCoordinates,l=await aG.fromSubtreeJson(n,i,a,s,A),f=new aa(e,t,n);return f._implicitSubtree=l,efe(f,l),f._ready=!0,f};function efe(e,t){let n=e._tile,i=e._implicitCoordinates.childIndex,o=nfe(e,t,n,i),r=e._tileset.statistics;n.children.push(o.rootTile),r.numberOfTilesTotal++;let a=tfe(e,t,o.bottomRow);for(let s=0;s<a.length;s++){let A=a[s],l=A.tile,f=ffe(e,l,A.childIndex);l.children.push(f),r.numberOfTilesTotal++}}function tfe(e,t,n){let i=[],o=e._implicitTileset.branchingFactor;for(let r=0;r<n.length;r++){let a=n[r];if(c(a))for(let s=0;s<o;s++){let A=r*o+s;t.childSubtreeIsAvailableAtIndex(A)&&i.push({tile:a,childIndex:s})}}return i}function nfe(e,t,n,i){let a=cG(e,t,n,i,0,!0),s=e._tileset.statistics,A=[a],l=[],f=e._implicitTileset;for(let h=1;h<f.subtreeLevels;h++){let m=t.getLevelOffset(h),p=f.branchingFactor*A.length;for(let g=0;g<p;g++){let C=m+g;if(!t.tileIsAvailableAtIndex(C)){l.push(void 0);continue}let _=t.getParentMortonIndex(g),E=A[_],I=g%f.branchingFactor,y=cG(e,t,E,I,C);E.children.push(y),s.numberOfTilesTotal++,l.push(y)}A=l,l=[]}return{rootTile:a,bottomRow:A}}function AG(e,t,n){let i=sG.TILE_GEOMETRIC_ERROR;return c(e)&&e.hasPropertyBySemantic(i)?e.getPropertyBySemantic(i):t.geometricError/Math.pow(2,n.level)}function cG(e,t,n,i,o,r){let a=e._implicitTileset,s;r??!1?s=n.implicitCoordinates:s=n.implicitCoordinates.getChildCoordinates(i);let A,l,f;if(c(t.tilePropertyTableJson)){A=t.getTileMetadataView(s);let S=Tb.parseAllBoundingVolumeSemantics(A);l=S.tile,f=S.content}let m=t.contentPropertyTableJsons.length,p=!1;for(let S=0;S<m;S++)if(t.contentIsAvailableAtCoordinates(s,S)){p=!0;break}let g=rfe(a,s,i,r,n,l),C=[];for(let S=0;S<a.contentCount;S++){if(!t.contentIsAvailableAtIndex(o,S))continue;let Q={uri:a.contentUriTemplates[S].getDerivedResource({templateValues:s.getTemplateValues()}).url},v=afe(g,f);c(v)&&(Q.boundingVolume=v),C.push(Et(Q,a.contentHeaders[S]))}let _=AG(A,a,s),E={boundingVolume:g,geometricError:_,refine:a.refine,contents:C},I=!0,y=Ne(a.tileHeader,I);delete y.boundingVolume,delete y.transform,delete y.metadata;let b=Et(E,y,I),x=hG(e,a.baseResource,b,n);return x.implicitCoordinates=s,x.implicitSubtree=t,x.metadata=A,x.hasImplicitContentMetadata=p,x}function Sb(e,t){return c(e)&&c(t)&&(c(t.minimumHeight)||c(t.maximumHeight))&&(Wn(e,"3DTILES_bounding_volume_S2")||c(e.region))}function Cw(e,t){c(t)&&(Wn(e,"3DTILES_bounding_volume_S2")?ofe(e.extensions["3DTILES_bounding_volume_S2"],t.minimumHeight,t.maximumHeight):c(e.region)&&ife(e.region,t.minimumHeight,t.maximumHeight))}function ife(e,t,n){c(t)&&(e[4]=t),c(n)&&(e[5]=n)}function ofe(e,t,n){c(t)&&(e.minimumHeight=t),c(n)&&(e.maximumHeight=n)}function rfe(e,t,n,i,o,r){let a;return!c(r)||!c(r.boundingVolume)||!Sb(r.boundingVolume,r)&&Sb(e.boundingVolume,r)?a=lG(e,t,n,i??!1,o):a=r.boundingVolume,Cw(a,r),a}function afe(e,t){let n;return c(t)&&(n=t.boundingVolume),Sb(n,t)?Cw(n,t):Sb(e,t)&&(n=Ne(e,!0),Cw(n,t)),n}function lG(e,t,n,i,o){let r=e.boundingVolume;return Wn(r,"3DTILES_bounding_volume_S2")?fG(i,o,n,t.level,t.x,t.y,t.z):c(r.region)?{region:dG(r.region,t.level,t.x,t.y,t.z)}:{box:uG(r.box,t.level,t.x,t.y,t.z)}}function fG(e,t,n,i,o,r,a){let s=t._boundingVolume;if(e)return{extensions:{"3DTILES_bounding_volume_S2":{token:Sm.getTokenFromId(s.s2Cell._cellId),minimumHeight:s.minimumHeight,maximumHeight:s.maximumHeight}}};let A=Number(t._boundingVolume.s2Cell._cellId>>BigInt(61)),l=A%2===0?NS.encode2D(i,o,r):NS.encode2D(i,r,o),f=Sm.fromFacePositionLevel(A,BigInt(l),i),h,m;if(c(a)){let p=(s.maximumHeight+s.minimumHeight)/2;h=n<4?s.minimumHeight:p,m=n<4?p:s.maximumHeight}else h=s.minimumHeight,m=s.maximumHeight;return{extensions:{"3DTILES_bounding_volume_S2":{token:Sm.getTokenFromId(f._cellId),minimumHeight:h,maximumHeight:m}}}}var sfe=new u,cfe=new u,gw=new u,Afe=new J;function uG(e,t,n,i,o){if(t===0)return e;let r=u.unpack(e,0,cfe),a=J.unpack(e,3,Afe),s=Math.pow(2,-t),A=-1+(2*n+1)*s,l=-1+(2*i+1)*s,f=0,h=u.fromElements(s,s,1,sfe);c(o)&&(f=-1+(2*o+1)*s,h.z=s);let m=u.fromElements(A,l,f,gw);m=J.multiplyByVector(a,m,gw),m=u.add(m,r,gw);let p=J.clone(a);p=J.multiplyByScale(p,h,p);let g=new Array(12);return u.pack(m,g),J.pack(p,g,3),g}var lfe=new ce;function dG(e,t,n,i,o){if(t===0)return e.slice();let r=ce.unpack(e,0,lfe),a=e[4],s=e[5],A=Math.pow(2,-t),l=A*r.width,f=w.negativePiToPi(r.west+n*l),h=w.negativePiToPi(f+l),m=A*r.height,p=w.negativePiToPi(r.south+i*m),g=w.negativePiToPi(p+m),C=a,_=s;if(c(o)){let E=A*(s-a);C+=o*E,_=C+E}return[f,p,h,g,C,_]}function ffe(e,t,n){let i=e._implicitTileset,o=t.implicitCoordinates.getChildCoordinates(n),r=lG(i,o,n,!1,t),a=AG(void 0,i,o),s=i.subtreeUriTemplate.getDerivedResource({templateValues:o.getTemplateValues()}).url,A={boundingVolume:r,geometricError:a,refine:i.refine,contents:[{uri:s}]},l=hG(e,i.baseResource,A,t);return l.implicitTileset=i,l.implicitCoordinates=o,l}function hG(e,t,n,i){let o=e._tile.constructor;return new o(e._tileset,t,n,i)}aa.prototype.hasProperty=function(e,t){return!1};aa.prototype.getFeature=function(e){};aa.prototype.applyDebugSettings=function(e,t){};aa.prototype.applyStyle=function(e){};aa.prototype.update=function(e,t){};aa.prototype.pick=function(e,t,n){};aa.prototype.isDestroyed=function(){return!1};aa.prototype.destroy=function(){return this._implicitSubtree=this._implicitSubtree&&this._implicitSubtree.destroy(),pe(this)};aa._deriveBoundingBox=uG;aa._deriveBoundingRegion=dG;aa._deriveBoundingVolumeS2=fG;var _w=aa;var ufe={NONE:0,REPEAT:1,MIRRORED_REPEAT:2},Rc=Object.freeze(ufe);function Pm(e,t){this._distance=t,this._normal=new mG(e,this),this.onChangeCallback=void 0,this.index=-1}Object.defineProperties(Pm.prototype,{distance:{get:function(){return this._distance},set:function(e){c(this.onChangeCallback)&&e!==this._distance&&this.onChangeCallback(this.index),this._distance=e}},normal:{get:function(){return this._normal},set:function(e){c(this.onChangeCallback)&&!u.equals(this._normal._cartesian3,e)&&this.onChangeCallback(this.index),u.clone(e,this._normal._cartesian3)}}});Pm.fromPlane=function(e,t){return c(t)?(t.normal=e.normal,t.distance=e.distance):t=new Pm(e.normal,e.distance),t};Pm.clone=function(e,t){return c(t)?(t.normal=e.normal,t.distance=e.distance,t):new Pm(e.normal,e.distance)};function mG(e,t){this._clippingPlane=t,this._cartesian3=u.clone(e)}Object.defineProperties(mG.prototype,{x:{get:function(){return this._cartesian3.x},set:function(e){c(this._clippingPlane.onChangeCallback)&&e!==this._cartesian3.x&&this._clippingPlane.onChangeCallback(this._clippingPlane.index),this._cartesian3.x=e}},y:{get:function(){return this._cartesian3.y},set:function(e){c(this._clippingPlane.onChangeCallback)&&e!==this._cartesian3.y&&this._clippingPlane.onChangeCallback(this._clippingPlane.index),this._cartesian3.y=e}},z:{get:function(){return this._cartesian3.z},set:function(e){c(this._clippingPlane.onChangeCallback)&&e!==this._cartesian3.z&&this._clippingPlane.onChangeCallback(this._clippingPlane.index),this._cartesian3.z=e}}});var wb=Pm;function Rr(e){e=e??k.EMPTY_OBJECT,this._planes=[],this._dirtyIndex=-1,this._multipleDirtyPlanes=!1,this._enabled=e.enabled??!0,this.modelMatrix=O.clone(e.modelMatrix??O.IDENTITY),this.edgeColor=F.clone(e.edgeColor??F.WHITE),this.edgeWidth=e.edgeWidth??0,this.planeAdded=new fe,this.planeRemoved=new fe,this._owner=void 0;let t=e.unionClippingRegions??!1;this._unionClippingRegions=t,this._testIntersection=t?EG:IG,this._uint8View=void 0,this._float32View=void 0,this._clippingPlanesTexture=void 0;let n=e.planes;if(c(n)){let i=n.length;for(let o=0;o<i;++o)this.add(n[o])}}function EG(e){return e===vt.OUTSIDE}function IG(e){return e===vt.INSIDE}Object.defineProperties(Rr.prototype,{length:{get:function(){return this._planes.length}},unionClippingRegions:{get:function(){return this._unionClippingRegions},set:function(e){this._unionClippingRegions!==e&&(this._unionClippingRegions=e,this._testIntersection=e?EG:IG)}},enabled:{get:function(){return this._enabled},set:function(e){this._enabled!==e&&(this._enabled=e)}},texture:{get:function(){return this._clippingPlanesTexture}},owner:{get:function(){return this._owner}},clippingPlanesState:{get:function(){return this._unionClippingRegions?this._planes.length:-this._planes.length}}});function pG(e,t){e._multipleDirtyPlanes=e._multipleDirtyPlanes||e._dirtyIndex!==-1&&e._dirtyIndex!==t,e._dirtyIndex=t}Rr.prototype.add=function(e){let t=this._planes.length,n=this;e.onChangeCallback=function(i){pG(n,i)},e.index=t,pG(this,t),this._planes.push(e),this.planeAdded.raiseEvent(e,t)};Rr.prototype.get=function(e){return this._planes[e]};function yG(e,t){let n=e.length;for(let i=0;i<n;++i)if(Ft.equals(e[i],t))return i;return-1}Rr.prototype.contains=function(e){return yG(this._planes,e)!==-1};Rr.prototype.remove=function(e){let t=this._planes,n=yG(t,e);if(n===-1)return!1;e instanceof wb&&(e.onChangeCallback=void 0,e.index=-1);let i=t.length-1;for(let o=n;o<i;++o){let r=t[o+1];t[o]=r,r instanceof wb&&(r.index=o)}return this._multipleDirtyPlanes=!0,t.length=i,this.planeRemoved.raiseEvent(e,n),!0};Rr.prototype.removeAll=function(){let e=this._planes,t=e.length;for(let n=0;n<t;++n){let i=e[n];i instanceof wb&&(i.onChangeCallback=void 0,i.index=-1),this.planeRemoved.raiseEvent(i,n)}this._multipleDirtyPlanes=!0,this._planes=[]};var dfe=new se,hfe=new se;function gG(e,t,n){let i=e._uint8View,o=e._planes,r=0;for(let a=t;a<n;++a){let s=o[a],A=ni.octEncodeToCartesian4(s.normal,hfe);i[r]=A.x,i[r+1]=A.y,i[r+2]=A.z,i[r+3]=A.w;let l=se.packFloat(s.distance,dfe);i[r+4]=l.x,i[r+5]=l.y,i[r+6]=l.z,i[r+7]=l.w,r+=8}}function CG(e,t,n){let i=e._float32View,o=e._planes,r=0;for(let a=t;a<n;++a){let s=o[a],A=s.normal;i[r]=A.x,i[r+1]=A.y,i[r+2]=A.z,i[r+3]=s.distance,r+=4}}function bG(e,t){let n=pn.maximumTextureSize;return t.x=Math.min(e,n),t.y=Math.ceil(e/t.x),t}var mfe=new U;Rr.prototype.update=function(e){let t=this._clippingPlanesTexture,n=e.context,i=Rr.useFloatTexture(n),o=i?this.length:this.length*2;if(c(t)){let a=t.width*t.height;(a<o||o<.25*a)&&(t.destroy(),t=void 0,this._clippingPlanesTexture=void 0)}if(this.length===0)return;if(!c(t)){let a=bG(o,mfe);a.y*=2,i?(t=new gn({context:n,width:a.x,height:a.y,pixelFormat:Bt.RGBA,pixelDatatype:_t.FLOAT,sampler:dn.NEAREST,flipY:!1}),this._float32View=new Float32Array(a.x*a.y*4)):(t=new gn({context:n,width:a.x,height:a.y,pixelFormat:Bt.RGBA,pixelDatatype:_t.UNSIGNED_BYTE,sampler:dn.NEAREST,flipY:!1}),this._uint8View=new Uint8Array(a.x*a.y*4)),this._clippingPlanesTexture=t,this._multipleDirtyPlanes=!0}let r=this._dirtyIndex;if(!(!this._multipleDirtyPlanes&&r===-1)){if(this._multipleDirtyPlanes)i?(CG(this,0,this._planes.length),t.copyFrom({source:{width:t.width,height:t.height,arrayBufferView:this._float32View}})):(gG(this,0,this._planes.length),t.copyFrom({source:{width:t.width,height:t.height,arrayBufferView:this._uint8View}}));else{let a=0,s=0;i?(s=Math.floor(r/t.width),a=Math.floor(r-s*t.width),CG(this,r,r+1),t.copyFrom({source:{width:1,height:1,arrayBufferView:this._float32View},xOffset:a,yOffset:s})):(s=Math.floor(r*2/t.width),a=Math.floor(r*2-s*t.width),gG(this,r,r+1),t.copyFrom({source:{width:2,height:1,arrayBufferView:this._uint8View},xOffset:a,yOffset:s}))}this._multipleDirtyPlanes=!1,this._dirtyIndex=-1}};var pfe=new O,_G=new Ft(u.UNIT_X,0);Rr.prototype.computeIntersectionWithBoundingVolume=function(e,t){let n=this._planes,i=n.length,o=this.modelMatrix;c(t)&&(o=O.multiply(t,o,pfe));let r=vt.INSIDE;!this.unionClippingRegions&&i>0&&(r=vt.OUTSIDE);for(let a=0;a<i;++a){let s=n[a];Ft.transform(s,o,_G);let A=e.intersectPlane(_G);if(A===vt.INTERSECTING)r=A;else if(this._testIntersection(A))return A}return r};Rr.setOwner=function(e,t,n){e!==t[n]&&(t[n]=t[n]&&t[n].destroy(),c(e)&&(e._owner=t,t[n]=e))};Rr.useFloatTexture=function(e){return e.floatingPointTexture};Rr.getTextureResolution=function(e,t,n){let i=e.texture;if(c(i))return n.x=i.width,n.y=i.height,n;let o=Rr.useFloatTexture(t)?e.length:e.length*2,r=bG(o,n);return r.y*=2,r};Rr.prototype.isDestroyed=function(){return!1};Rr.prototype.destroy=function(){return this._clippingPlanesTexture=this._clippingPlanesTexture&&this._clippingPlanesTexture.destroy(),pe(this)};var Pl=Rr;function yw(e,t,n=2){let i=t&&t.length,o=i?t[0]*n:e.length,r=xG(e,0,o,n,!0),a=[];if(!r||r.next===r.prev)return a;let s,A,l;if(i&&(r=Ife(e,t,r,n)),e.length>80*n){s=e[0],A=e[1];let f=s,h=A;for(let m=n;m<o;m+=n){let p=e[m],g=e[m+1];p<s&&(s=p),g<A&&(A=g),p>f&&(f=p),g>h&&(h=g)}l=Math.max(f-s,h-A),l=l!==0?32767/l:0}return n_(r,a,n,s,A,l,0),a}function xG(e,t,n,i,o){let r;if(o===vfe(e,t,n,i)>0)for(let a=t;a<n;a+=i)r=BG(a/i|0,e[a],e[a+1],r);else for(let a=n-i;a>=t;a-=i)r=BG(a/i|0,e[a],e[a+1],r);return r&&Mm(r,r.next)&&(o_(r),r=r.next),r}function Xd(e,t){if(!e)return e;t||(t=e);let n=e,i;do if(i=!1,!n.steiner&&(Mm(n,n.next)||Xi(n.prev,n,n.next)===0)){if(o_(n),n=t=n.prev,n===n.next)break;i=!0}else n=n.next;while(i||n!==t);return t}function n_(e,t,n,i,o,r,a){if(!e)return;!a&&r&&Tfe(e,i,o,r);let s=e;for(;e.prev!==e.next;){let A=e.prev,l=e.next;if(r?Cfe(e,i,o,r):gfe(e)){t.push(A.i,e.i,l.i),o_(e),e=l.next,s=l.next;continue}if(e=l,e===s){a?a===1?(e=_fe(Xd(e),t),n_(e,t,n,i,o,r,2)):a===2&&Efe(e,t,n,i,o,r):n_(Xd(e),t,n,i,o,r,1);break}}}function gfe(e){let t=e.prev,n=e,i=e.next;if(Xi(t,n,i)>=0)return!1;let o=t.x,r=n.x,a=i.x,s=t.y,A=n.y,l=i.y,f=Math.min(o,r,a),h=Math.min(s,A,l),m=Math.max(o,r,a),p=Math.max(s,A,l),g=i.next;for(;g!==t;){if(g.x>=f&&g.x<=m&&g.y>=h&&g.y<=p&&t_(o,s,r,A,a,l,g.x,g.y)&&Xi(g.prev,g,g.next)>=0)return!1;g=g.next}return!0}function Cfe(e,t,n,i){let o=e.prev,r=e,a=e.next;if(Xi(o,r,a)>=0)return!1;let s=o.x,A=r.x,l=a.x,f=o.y,h=r.y,m=a.y,p=Math.min(s,A,l),g=Math.min(f,h,m),C=Math.max(s,A,l),_=Math.max(f,h,m),E=Ew(p,g,t,n,i),I=Ew(C,_,t,n,i),y=e.prevZ,b=e.nextZ;for(;y&&y.z>=E&&b&&b.z<=I;){if(y.x>=p&&y.x<=C&&y.y>=g&&y.y<=_&&y!==o&&y!==a&&t_(s,f,A,h,l,m,y.x,y.y)&&Xi(y.prev,y,y.next)>=0||(y=y.prevZ,b.x>=p&&b.x<=C&&b.y>=g&&b.y<=_&&b!==o&&b!==a&&t_(s,f,A,h,l,m,b.x,b.y)&&Xi(b.prev,b,b.next)>=0))return!1;b=b.nextZ}for(;y&&y.z>=E;){if(y.x>=p&&y.x<=C&&y.y>=g&&y.y<=_&&y!==o&&y!==a&&t_(s,f,A,h,l,m,y.x,y.y)&&Xi(y.prev,y,y.next)>=0)return!1;y=y.prevZ}for(;b&&b.z<=I;){if(b.x>=p&&b.x<=C&&b.y>=g&&b.y<=_&&b!==o&&b!==a&&t_(s,f,A,h,l,m,b.x,b.y)&&Xi(b.prev,b,b.next)>=0)return!1;b=b.nextZ}return!0}function _fe(e,t){let n=e;do{let i=n.prev,o=n.next.next;!Mm(i,o)&&SG(i,n,n.next,o)&&i_(i,o)&&i_(o,i)&&(t.push(i.i,n.i,o.i),o_(n),o_(n.next),n=e=o),n=n.next}while(n!==e);return Xd(n)}function Efe(e,t,n,i,o,r){let a=e;do{let s=a.next.next;for(;s!==a.prev;){if(a.i!==s.i&&Dfe(a,s)){let A=wG(a,s);a=Xd(a,a.next),A=Xd(A,A.next),n_(a,t,n,i,o,r,0),n_(A,t,n,i,o,r,0);return}s=s.next}a=a.next}while(a!==e)}function Ife(e,t,n,i){let o=[];for(let r=0,a=t.length;r<a;r++){let s=t[r]*i,A=r<a-1?t[r+1]*i:e.length,l=xG(e,s,A,i,!1);l===l.next&&(l.steiner=!0),o.push(wfe(l))}o.sort(yfe);for(let r=0;r<o.length;r++)n=bfe(o[r],n);return n}function yfe(e,t){let n=e.x-t.x;if(n===0&&(n=e.y-t.y,n===0)){let i=(e.next.y-e.y)/(e.next.x-e.x),o=(t.next.y-t.y)/(t.next.x-t.x);n=i-o}return n}function bfe(e,t){let n=Bfe(e,t);if(!n)return t;let i=wG(n,e);return Xd(i,i.next),Xd(n,n.next)}function Bfe(e,t){let n=t,i=e.x,o=e.y,r=-1/0,a;if(Mm(e,n))return n;do{if(Mm(e,n.next))return n.next;if(o<=n.y&&o>=n.next.y&&n.next.y!==n.y){let h=n.x+(o-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(h<=i&&h>r&&(r=h,a=n.x<n.next.x?n:n.next,h===i))return a}n=n.next}while(n!==t);if(!a)return null;let s=a,A=a.x,l=a.y,f=1/0;n=a;do{if(i>=n.x&&n.x>=A&&i!==n.x&&TG(o<l?i:r,o,A,l,o<l?r:i,o,n.x,n.y)){let h=Math.abs(o-n.y)/(i-n.x);i_(n,e)&&(h<f||h===f&&(n.x>a.x||n.x===a.x&&xfe(a,n)))&&(a=n,f=h)}n=n.next}while(n!==s);return a}function xfe(e,t){return Xi(e.prev,e,t.prev)<0&&Xi(t.next,e,e.next)<0}function Tfe(e,t,n,i){let o=e;do o.z===0&&(o.z=Ew(o.x,o.y,t,n,i)),o.prevZ=o.prev,o.nextZ=o.next,o=o.next;while(o!==e);o.prevZ.nextZ=null,o.prevZ=null,Sfe(o)}function Sfe(e){let t,n=1;do{let i=e,o;e=null;let r=null;for(t=0;i;){t++;let a=i,s=0;for(let l=0;l<n&&(s++,a=a.nextZ,!!a);l++);let A=n;for(;s>0||A>0&&a;)s!==0&&(A===0||!a||i.z<=a.z)?(o=i,i=i.nextZ,s--):(o=a,a=a.nextZ,A--),r?r.nextZ=o:e=o,o.prevZ=r,r=o;i=a}r.nextZ=null,n*=2}while(t>1);return e}function Ew(e,t,n,i,o){return e=(e-n)*o|0,t=(t-i)*o|0,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e|t<<1}function wfe(e){let t=e,n=e;do(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next;while(t!==e);return n}function TG(e,t,n,i,o,r,a,s){return(o-a)*(t-s)>=(e-a)*(r-s)&&(e-a)*(i-s)>=(n-a)*(t-s)&&(n-a)*(r-s)>=(o-a)*(i-s)}function t_(e,t,n,i,o,r,a,s){return!(e===a&&t===s)&&TG(e,t,n,i,o,r,a,s)}function Dfe(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!Qfe(e,t)&&(i_(e,t)&&i_(t,e)&&Rfe(e,t)&&(Xi(e.prev,e,t.prev)||Xi(e,t.prev,t))||Mm(e,t)&&Xi(e.prev,e,e.next)>0&&Xi(t.prev,t,t.next)>0)}function Xi(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function Mm(e,t){return e.x===t.x&&e.y===t.y}function SG(e,t,n,i){let o=Qb(Xi(e,t,n)),r=Qb(Xi(e,t,i)),a=Qb(Xi(n,i,e)),s=Qb(Xi(n,i,t));return!!(o!==r&&a!==s||o===0&&Db(e,n,t)||r===0&&Db(e,i,t)||a===0&&Db(n,e,i)||s===0&&Db(n,t,i))}function Db(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function Qb(e){return e>0?1:e<0?-1:0}function Qfe(e,t){let n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&SG(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}function i_(e,t){return Xi(e.prev,e,e.next)<0?Xi(e,t,e.next)>=0&&Xi(e,e.prev,t)>=0:Xi(e,t,e.prev)<0||Xi(e,e.next,t)<0}function Rfe(e,t){let n=e,i=!1,o=(e.x+t.x)/2,r=(e.y+t.y)/2;do n.y>r!=n.next.y>r&&n.next.y!==n.y&&o<(n.next.x-n.x)*(r-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next;while(n!==e);return i}function wG(e,t){let n=Iw(e.i,e.x,e.y),i=Iw(t.i,t.x,t.y),o=e.next,r=t.prev;return e.next=t,t.prev=e,n.next=o,o.prev=n,i.next=n,n.prev=i,r.next=i,i.prev=r,i}function BG(e,t,n,i){let o=Iw(e,t,n);return i?(o.next=i.next,o.prev=i,i.next.prev=o,i.next=o):(o.prev=o,o.next=o),o}function o_(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Iw(e,t,n){return{i:e,x:t,y:n,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function vfe(e,t,n,i){let o=0;for(let r=t,a=n-i;r<n;r+=i)o+=(e[a]-e[r])*(e[r+1]+e[a+1]),a=r;return o}var Pfe=new u,Mfe=new u,du={};du.computeArea2D=function(e){let t=e.length,n=0;for(let i=t-1,o=0;o<t;i=o++){let r=e[i],a=e[o];n+=r.x*a.y-a.x*r.y}return n*.5};du.computeWindingOrder2D=function(e){return du.computeArea2D(e)>0?Jo.COUNTER_CLOCKWISE:Jo.CLOCKWISE};du.triangulate=function(e,t){let n=U.packArray(e);return yw(n,t,2)};var vG=new u,PG=new u,MG=new u,DG=new u,QG=new u,RG=new u,Ml=new u,OG=new U,LG=new U,NG=new U,Om=new U;du.computeSubdivision=function(e,t,n,i,o){o=o??w.RADIANS_PER_DEGREE;let r=c(i),a=n.slice(0),s,A=t.length,l=new Array(A*3),f=new Array(A*2),h=0,m=0;for(s=0;s<A;s++){let y=t[s];if(l[h++]=y.x,l[h++]=y.y,l[h++]=y.z,r){let b=i[s];f[m++]=b.x,f[m++]=b.y}}let p=[],g={},C=e.maximumRadius,_=w.chordLength(o,C),E=_*_;for(;a.length>0;){let y=a.pop(),b=a.pop(),x=a.pop(),S=u.fromArray(l,x*3,vG),P=u.fromArray(l,b*3,PG),D=u.fromArray(l,y*3,MG),Q,v,d;r&&(Q=U.fromArray(f,x*2,OG),v=U.fromArray(f,b*2,LG),d=U.fromArray(f,y*2,NG));let B=u.multiplyByScalar(u.normalize(S,DG),C,DG),T=u.multiplyByScalar(u.normalize(P,QG),C,QG),R=u.multiplyByScalar(u.normalize(D,RG),C,RG),L=u.magnitudeSquared(u.subtract(B,T,Ml)),G=u.magnitudeSquared(u.subtract(T,R,Ml)),q=u.magnitudeSquared(u.subtract(R,B,Ml)),z=Math.max(L,G,q),K,ie,le;z>E?L===z?(K=`${Math.min(x,b)} ${Math.max(x,b)}`,s=g[K],c(s)||(ie=u.add(S,P,Ml),u.multiplyByScalar(ie,.5,ie),l.push(ie.x,ie.y,ie.z),s=l.length/3-1,g[K]=s,r&&(le=U.add(Q,v,Om),U.multiplyByScalar(le,.5,le),f.push(le.x,le.y))),a.push(x,s,y),a.push(s,b,y)):G===z?(K=`${Math.min(b,y)} ${Math.max(b,y)}`,s=g[K],c(s)||(ie=u.add(P,D,Ml),u.multiplyByScalar(ie,.5,ie),l.push(ie.x,ie.y,ie.z),s=l.length/3-1,g[K]=s,r&&(le=U.add(v,d,Om),U.multiplyByScalar(le,.5,le),f.push(le.x,le.y))),a.push(b,s,x),a.push(s,y,x)):q===z&&(K=`${Math.min(y,x)} ${Math.max(y,x)}`,s=g[K],c(s)||(ie=u.add(D,S,Ml),u.multiplyByScalar(ie,.5,ie),l.push(ie.x,ie.y,ie.z),s=l.length/3-1,g[K]=s,r&&(le=U.add(d,Q,Om),U.multiplyByScalar(le,.5,le),f.push(le.x,le.y))),a.push(y,s,b),a.push(s,x,b)):(p.push(x),p.push(b),p.push(y))}let I={attributes:{position:new ue({componentDatatype:N.DOUBLE,componentsPerAttribute:3,values:l})},indices:p,primitiveType:Ce.TRIANGLES};return r&&(I.attributes.st=new ue({componentDatatype:N.FLOAT,componentsPerAttribute:2,values:f})),new ze(I)};var Ofe=new ae,Lfe=new ae,Nfe=new ae,bw=new ae;du.computeRhumbLineSubdivision=function(e,t,n,i,o){o=o??w.RADIANS_PER_DEGREE;let r=c(i),a=n.slice(0),s,A=t.length,l=new Array(A*3),f=new Array(A*2),h=0,m=0;for(s=0;s<A;s++){let x=t[s];if(l[h++]=x.x,l[h++]=x.y,l[h++]=x.z,r){let S=i[s];f[m++]=S.x,f[m++]=S.y}}let p=[],g={},C=e.maximumRadius,_=w.chordLength(o,C),E=new Ta(void 0,void 0,e),I=new Ta(void 0,void 0,e),y=new Ta(void 0,void 0,e);for(;a.length>0;){let x=a.pop(),S=a.pop(),P=a.pop(),D=u.fromArray(l,P*3,vG),Q=u.fromArray(l,S*3,PG),v=u.fromArray(l,x*3,MG),d,B,T;r&&(d=U.fromArray(f,P*2,OG),B=U.fromArray(f,S*2,LG),T=U.fromArray(f,x*2,NG));let R=e.cartesianToCartographic(D,Ofe),L=e.cartesianToCartographic(Q,Lfe),G=e.cartesianToCartographic(v,Nfe);E.setEndPoints(R,L);let q=E.surfaceDistance;I.setEndPoints(L,G);let z=I.surfaceDistance;y.setEndPoints(G,R);let K=y.surfaceDistance,ie=Math.max(q,z,K),le,de,he,Se,be;ie>_?q===ie?(le=`${Math.min(P,S)} ${Math.max(P,S)}`,s=g[le],c(s)||(de=E.interpolateUsingFraction(.5,bw),he=(R.height+L.height)*.5,Se=u.fromRadians(de.longitude,de.latitude,he,e,Ml),l.push(Se.x,Se.y,Se.z),s=l.length/3-1,g[le]=s,r&&(be=U.add(d,B,Om),U.multiplyByScalar(be,.5,be),f.push(be.x,be.y))),a.push(P,s,x),a.push(s,S,x)):z===ie?(le=`${Math.min(S,x)} ${Math.max(S,x)}`,s=g[le],c(s)||(de=I.interpolateUsingFraction(.5,bw),he=(L.height+G.height)*.5,Se=u.fromRadians(de.longitude,de.latitude,he,e,Ml),l.push(Se.x,Se.y,Se.z),s=l.length/3-1,g[le]=s,r&&(be=U.add(B,T,Om),U.multiplyByScalar(be,.5,be),f.push(be.x,be.y))),a.push(S,s,P),a.push(s,x,P)):K===ie&&(le=`${Math.min(x,P)} ${Math.max(x,P)}`,s=g[le],c(s)||(de=y.interpolateUsingFraction(.5,bw),he=(G.height+R.height)*.5,Se=u.fromRadians(de.longitude,de.latitude,he,e,Ml),l.push(Se.x,Se.y,Se.z),s=l.length/3-1,g[le]=s,r&&(be=U.add(T,d,Om),U.multiplyByScalar(be,.5,be),f.push(be.x,be.y))),a.push(x,s,S),a.push(s,P,S)):(p.push(P),p.push(S),p.push(x))}let b={attributes:{position:new ue({componentDatatype:N.DOUBLE,componentsPerAttribute:3,values:l})},indices:p,primitiveType:Ce.TRIANGLES};return r&&(b.attributes.st=new ue({componentDatatype:N.FLOAT,componentsPerAttribute:2,values:f})),new ze(b)};du.scaleToGeodeticHeight=function(e,t,n,i){n=n??Z.default;let o=Pfe,r=Mfe;if(t=t??0,i=i??!0,c(e)){let a=e.length;for(let s=0;s<a;s+=3)u.fromArray(e,s,r),i&&(r=n.scaleToGeodeticSurface(r,r)),t!==0&&(o=n.geodeticSurfaceNormal(r,o),u.multiplyByScalar(o,t,o),u.add(r,o,r)),e[s]=r.x,e[s+1]=r.y,e[s+2]=r.z}return e};var Tn=du;function hu(){this._array=[],this._offset=0,this._length=0}Object.defineProperties(hu.prototype,{length:{get:function(){return this._length}}});hu.prototype.enqueue=function(e){this._array.push(e),this._length++};hu.prototype.dequeue=function(){if(this._length===0)return;let e=this._array,t=this._offset,n=e[t];return e[t]=void 0,t++,t>10&&t*2>e.length&&(this._array=e.slice(t),t=0),this._offset=t,this._length--,n};hu.prototype.peek=function(){if(this._length!==0)return this._array[this._offset]};hu.prototype.contains=function(e){return this._array.indexOf(e)!==-1};hu.prototype.clear=function(){this._array.length=this._offset=this._length=0};hu.prototype.sort=function(e){this._offset>0&&(this._array=this._array.slice(this._offset),this._offset=0),this._array.sort(e)};var Bw=hu;var vi={};vi.computeHierarchyPackedLength=function(e,t){let n=0,i=[e];for(;i.length>0;){let o=i.pop();if(!c(o))continue;n+=2;let r=o.positions,a=o.holes;if(c(r)&&r.length>0&&(n+=r.length*t.packedLength),c(a)){let s=a.length;for(let A=0;A<s;++A)i.push(a[A])}}return n};vi.packPolygonHierarchy=function(e,t,n,i){let o=[e];for(;o.length>0;){let r=o.pop();if(!c(r))continue;let a=r.positions,s=r.holes;if(t[n++]=c(a)?a.length:0,t[n++]=c(s)?s.length:0,c(a)){let A=a.length;for(let l=0;l<A;++l,n+=i.packedLength)i.pack(a[l],t,n)}if(c(s)){let A=s.length;for(let l=0;l<A;++l)o.push(s[l])}}return n};vi.unpackPolygonHierarchy=function(e,t,n){let i=e[t++],o=e[t++],r=new Array(i),a=o>0?new Array(o):void 0;for(let s=0;s<i;++s,t+=n.packedLength)r[s]=n.unpack(e,t);for(let s=0;s<o;++s)a[s]=vi.unpackPolygonHierarchy(e,t,n),t=a[s].startingIndex,delete a[s].startingIndex;return{positions:r,holes:a,startingIndex:t}};var Zd=new U;function UG(e,t,n,i){return U.subtract(t,e,Zd),U.multiplyByScalar(Zd,n/i,Zd),U.add(e,Zd,Zd),[Zd.x,Zd.y]}var mu=new u;function Ffe(e,t,n,i){return u.subtract(t,e,mu),u.multiplyByScalar(mu,n/i,mu),u.add(e,mu,mu),[mu.x,mu.y,mu.z]}vi.subdivideLineCount=function(e,t,n){let o=u.distance(e,t)/n,r=Math.max(0,Math.ceil(w.log2(o)));return Math.pow(2,r)};var vb=new ae,Pb=new ae,kfe=new ae,Ufe=new u,Rb=new Ta;vi.subdivideRhumbLineCount=function(e,t,n,i){let o=e.cartesianToCartographic(t,vb),r=e.cartesianToCartographic(n,Pb),s=new Ta(o,r,e).surfaceDistance/i,A=Math.max(0,Math.ceil(w.log2(s)));return Math.pow(2,A)};vi.subdivideTexcoordLine=function(e,t,n,i,o,r){let a=vi.subdivideLineCount(n,i,o),s=U.distance(e,t),A=s/a,l=r;l.length=a*2;let f=0;for(let h=0;h<a;h++){let m=UG(e,t,h*A,s);l[f++]=m[0],l[f++]=m[1]}return l};vi.subdivideLine=function(e,t,n,i){let o=vi.subdivideLineCount(e,t,n),r=u.distance(e,t),a=r/o;c(i)||(i=[]);let s=i;s.length=o*3;let A=0;for(let l=0;l<o;l++){let f=Ffe(e,t,l*a,r);s[A++]=f[0],s[A++]=f[1],s[A++]=f[2]}return s};vi.subdivideTexcoordRhumbLine=function(e,t,n,i,o,r,a){let s=n.cartesianToCartographic(i,vb),A=n.cartesianToCartographic(o,Pb);Rb.setEndPoints(s,A);let l=Rb.surfaceDistance/r,f=Math.max(0,Math.ceil(w.log2(l))),h=Math.pow(2,f),m=U.distance(e,t),p=m/h,g=a;g.length=h*2;let C=0;for(let _=0;_<h;_++){let E=UG(e,t,_*p,m);g[C++]=E[0],g[C++]=E[1]}return g};vi.subdivideRhumbLine=function(e,t,n,i,o){let r=e.cartesianToCartographic(t,vb),a=e.cartesianToCartographic(n,Pb),s=new Ta(r,a,e);if(c(o)||(o=[]),s.surfaceDistance<=i)return o.length=3,o[0]=t.x,o[1]=t.y,o[2]=t.z,o;let A=s.surfaceDistance/i,l=Math.max(0,Math.ceil(w.log2(A))),f=Math.pow(2,l),h=s.surfaceDistance/f,m=o;m.length=f*3;let p=0;for(let g=0;g<f;g++){let C=s.interpolateUsingSurfaceDistance(g*h,kfe),_=e.cartographicToCartesian(C,Ufe);m[p++]=_.x,m[p++]=_.y,m[p++]=_.z}return m};var Gfe=new u,zfe=new u,Hfe=new u,Vfe=new u;vi.scaleToGeodeticHeightExtruded=function(e,t,n,i,o){i=i??Z.default;let r=Gfe,a=zfe,s=Hfe,A=Vfe;if(c(e)&&c(e.attributes)&&c(e.attributes.position)){let l=e.attributes.position.values,f=l.length/2;for(let h=0;h<f;h+=3)u.fromArray(l,h,s),i.geodeticSurfaceNormal(s,r),A=i.scaleToGeodeticSurface(s,A),a=u.multiplyByScalar(r,n,a),a=u.add(A,a,a),l[h+f]=a.x,l[h+1+f]=a.y,l[h+2+f]=a.z,o&&(A=u.clone(s,A)),a=u.multiplyByScalar(r,t,a),a=u.add(A,a,a),l[h]=a.x,l[h+1]=a.y,l[h+2]=a.z}return e};vi.polygonOutlinesFromHierarchy=function(e,t,n){let i=[],o=new Bw;o.enqueue(e);let r,a,s;for(;o.length!==0;){let A=o.dequeue(),l=A.positions;if(t)for(s=l.length,r=0;r<s;r++)n.scaleToGeodeticSurface(l[r],l[r]);if(l=Bi(l,u.equalsEpsilon,!0),l.length<3)continue;let f=A.holes?A.holes.length:0;for(r=0;r<f;r++){let h=A.holes[r],m=h.positions;if(t)for(s=m.length,a=0;a<s;++a)n.scaleToGeodeticSurface(m[a],m[a]);if(m=Bi(m,u.equalsEpsilon,!0),m.length<3)continue;i.push(m);let p=0;for(c(h.holes)&&(p=h.holes.length),a=0;a<p;a++)o.enqueue(h.holes[a])}i.push(l)}return i};var jfe=new ae;function Yfe(e,t,n){let i=n.cartesianToCartographic(e,vb),o=n.cartesianToCartographic(t,Pb);if(Math.sign(i.latitude)===Math.sign(o.latitude))return;Rb.setEndPoints(i,o);let r=Rb.findIntersectionWithLatitude(0,jfe);if(!c(r))return;let a=Math.min(i.longitude,o.longitude),s=Math.max(i.longitude,o.longitude);if(Math.abs(s-a)>w.PI){let A=a;a=s,s=A}if(!(r.longitude<a||r.longitude>s))return n.cartographicToCartesian(r)}function qfe(e,t,n,i){if(i===Yt.RHUMB)return Yfe(e,t,n);let o=Ni.lineSegmentPlane(e,t,Ft.ORIGIN_XY_PLANE);if(c(o))return n.scaleToGeodeticSurface(o,o)}var Wfe=new ae;function Jfe(e,t,n){let i=[],o,r,a,s,A,l=0;for(;l<e.length;){o=e[l],r=e[(l+1)%e.length],a=w.sign(o.z),s=w.sign(r.z);let f=h=>t.cartesianToCartographic(h,Wfe).longitude;if(a===0)i.push({position:l,type:a,visited:!1,next:s,theta:f(o)});else if(s!==0){if(A=qfe(o,r,t,n),++l,!c(A))continue;e.splice(l,0,A),i.push({position:l,type:a,visited:!1,next:s,theta:f(A)})}++l}return i}function GG(e,t,n,i,o,r,a){let s=[],A=r,l=h=>m=>m.position===h,f=[];do{let h=n[A];s.push(h);let m=i.findIndex(l(A)),p=i[m];if(!c(p)){++A;continue}let{visited:g,type:C,next:_}=p;if(p.visited=!0,C===0){if(_===0){let b=i[m-(a?1:-1)];if(b?.position===A+1)b.visited=!0;else{++A;continue}}if(!g&&a&&_>0||r===A&&!a&&_<0){++A;continue}}if(!(a?C>=0:C<=0)){++A;continue}g||f.push(A);let I=m+(a?1:-1),y=i[I];if(!c(y)){++A;continue}A=y.position}while(A<n.length&&A>=0&&A!==r&&s.length<n.length);e.splice(t,o,s);for(let h of f)t=GG(e,++t,n,i,0,h,!a);return t}vi.splitPolygonsOnEquator=function(e,t,n,i){c(i)||(i=[]),i.splice(0,0,...e),i.length=e.length;let o=0;for(;o<i.length;){let r=i[o],a=r.slice();if(r.length<3){i[o]=a,++o;continue}let s=Jfe(a,t,n);if(a.length===r.length||s.length<=1){i[o]=a,++o;continue}s.sort((l,f)=>l.theta-f.theta);let A=a[0].z>=0;o=GG(i,o,a,s,1,0,A)}return i};vi.polygonsFromHierarchy=function(e,t,n,i,o,r){let a=[],s=[],A=new Bw;A.enqueue(e);let l=c(r);for(;A.length!==0;){let f=A.dequeue(),h=f.positions,m=f.holes,p,g;if(i)for(g=h.length,p=0;p<g;p++)o.scaleToGeodeticSurface(h[p],h[p]);if(t||(h=Bi(h,u.equalsEpsilon,!0)),h.length<3)continue;let C=n(h);if(!c(C))continue;let _=[],E=Tn.computeWindingOrder2D(C);if(E===Jo.CLOCKWISE&&(C.reverse(),h=h.slice().reverse()),l){l=!1;let S=[h];if(S=r(S,S),S.length>1){for(let P of S)A.enqueue(new Nd(P,m));continue}}let I=h.slice(),y=c(m)?m.length:0,b=[],x;for(p=0;p<y;p++){let S=m[p],P=S.positions;if(i)for(g=P.length,x=0;x<g;++x)o.scaleToGeodeticSurface(P[x],P[x]);if(t||(P=Bi(P,u.equalsEpsilon,!0)),P.length<3)continue;let D=n(P);if(!c(D))continue;E=Tn.computeWindingOrder2D(D),E===Jo.CLOCKWISE&&(D.reverse(),P=P.slice().reverse()),b.push(P),_.push(I.length),I=I.concat(P),C=C.concat(D);let Q=0;for(c(S.holes)&&(Q=S.holes.length),x=0;x<Q;x++)A.enqueue(S.holes[x])}a.push({outerRing:h,holes:b}),s.push({positions:I,positions2D:C,holes:_})}return{hierarchy:a,polygons:s}};var Kfe=new U,Xfe=new u,Zfe=new qe,$fe=new J;vi.computeBoundingRectangle=function(e,t,n,i,o){let r=qe.fromAxisAngle(e,i,Zfe),a=J.fromQuaternion(r,$fe),s=Number.POSITIVE_INFINITY,A=Number.NEGATIVE_INFINITY,l=Number.POSITIVE_INFINITY,f=Number.NEGATIVE_INFINITY,h=n.length;for(let m=0;m<h;++m){let p=u.clone(n[m],Xfe);J.multiplyByVector(a,p,p);let g=t(p,Kfe);c(g)&&(s=Math.min(s,g.x),A=Math.max(A,g.x),l=Math.min(l,g.y),f=Math.max(f,g.y))}return o.x=s,o.y=l,o.width=A-s,o.height=f-l,o};vi.createGeometryFromPositions=function(e,t,n,i,o,r,a){let s=Tn.triangulate(t.positions2D,t.holes);s.length<3&&(s=[0,1,2]);let A=t.positions,l=c(n),f=l?n.positions:void 0;if(o){let h=A.length,m=new Array(h*3),p=0;for(let _=0;_<h;_++){let E=A[_];m[p++]=E.x,m[p++]=E.y,m[p++]=E.z}let g={attributes:{position:new ue({componentDatatype:N.DOUBLE,componentsPerAttribute:3,values:m})},indices:s,primitiveType:Ce.TRIANGLES};l&&(g.attributes.st=new ue({componentDatatype:N.FLOAT,componentsPerAttribute:2,values:U.packArray(f)}));let C=new ze(g);return r.normal?Mn.computeNormal(C):C}if(a===Yt.GEODESIC)return Tn.computeSubdivision(e,A,s,f,i);if(a===Yt.RHUMB)return Tn.computeRhumbLineSubdivision(e,A,s,f,i)};var FG=[],kG=[],eue=new u,tue=new u;vi.computeWallGeometry=function(e,t,n,i,o,r){let a,s,A,l,f,h,m,p,g,C=e.length,_=0,E=0,I=c(t),y=I?t.positions:void 0;if(o)for(s=C*3*2,a=new Array(s*2),I&&(g=C*2*2,p=new Array(g*2)),A=0;A<C;A++)l=e[A],f=e[(A+1)%C],a[_]=a[_+s]=l.x,++_,a[_]=a[_+s]=l.y,++_,a[_]=a[_+s]=l.z,++_,a[_]=a[_+s]=f.x,++_,a[_]=a[_+s]=f.y,++_,a[_]=a[_+s]=f.z,++_,I&&(h=y[A],m=y[(A+1)%C],p[E]=p[E+g]=h.x,++E,p[E]=p[E+g]=h.y,++E,p[E]=p[E+g]=m.x,++E,p[E]=p[E+g]=m.y,++E);else{let D=w.chordLength(i,n.maximumRadius),Q=0;if(r===Yt.GEODESIC)for(A=0;A<C;A++)Q+=vi.subdivideLineCount(e[A],e[(A+1)%C],D);else if(r===Yt.RHUMB)for(A=0;A<C;A++)Q+=vi.subdivideRhumbLineCount(n,e[A],e[(A+1)%C],D);for(s=(Q+C)*3,a=new Array(s*2),I&&(g=(Q+C)*2,p=new Array(g*2)),A=0;A<C;A++){l=e[A],f=e[(A+1)%C];let v,d;I&&(h=y[A],m=y[(A+1)%C]),r===Yt.GEODESIC?(v=vi.subdivideLine(l,f,D,kG),I&&(d=vi.subdivideTexcoordLine(h,m,l,f,D,FG))):r===Yt.RHUMB&&(v=vi.subdivideRhumbLine(n,l,f,D,kG),I&&(d=vi.subdivideTexcoordRhumbLine(h,m,n,l,f,D,FG)));let B=v.length;for(let T=0;T<B;++T,++_)a[_]=v[T],a[_+s]=v[T];if(a[_]=f.x,a[_+s]=f.x,++_,a[_]=f.y,a[_+s]=f.y,++_,a[_]=f.z,a[_+s]=f.z,++_,I){let T=d.length;for(let R=0;R<T;++R,++E)p[E]=d[R],p[E+g]=d[R];p[E]=m.x,p[E+g]=m.x,++E,p[E]=m.y,p[E+g]=m.y,++E}}}C=a.length;let b=Be.createTypedArray(C/3,C-e.length*6),x=0;for(C/=6,A=0;A<C;A++){let D=A,Q=D+1,v=D+C,d=v+1;l=u.fromArray(a,D*3,eue),f=u.fromArray(a,Q*3,tue),!u.equalsEpsilon(l,f,w.EPSILON10,w.EPSILON10)&&(b[x++]=D,b[x++]=v,b[x++]=Q,b[x++]=Q,b[x++]=v,b[x++]=d)}let S={attributes:new Mt({position:new ue({componentDatatype:N.DOUBLE,componentsPerAttribute:3,values:a})}),indices:b,primitiveType:Ce.TRIANGLES};return I&&(S.attributes.st=new ue({componentDatatype:N.FLOAT,componentsPerAttribute:2,values:p})),new ze(S)};var rn=vi;function Zi(e,t){this.position=e,c(this.position)||(this.position=new U),this.tangentPlane=t,c(this.tangentPlane)||(this.tangentPlane=Zi.NORTH_POLE_TANGENT_PLANE)}Object.defineProperties(Zi.prototype,{ellipsoid:{get:function(){return this.tangentPlane.ellipsoid}},x:{get:function(){return this.position.x}},y:{get:function(){return this.position.y}},conformalLatitude:{get:function(){let e=U.magnitude(this.position),t=2*this.ellipsoid.maximumRadius;return this.tangentPlane.plane.normal.z*(w.PI_OVER_TWO-2*Math.atan2(e,t))}},longitude:{get:function(){let e=w.PI_OVER_TWO+Math.atan2(this.y,this.x);return e>Math.PI&&(e-=w.TWO_PI),e}}});var Lm=new ae,nue=new u;Zi.prototype.getLatitude=function(e){c(e)||(e=Z.default),Lm.latitude=this.conformalLatitude,Lm.longitude=this.longitude,Lm.height=0;let t=this.ellipsoid.cartographicToCartesian(Lm,nue);return e.cartesianToCartographic(t,Lm),Lm.latitude};var iue=new qa,oue=new u,rue=new u;Zi.fromCartesian=function(e,t){let n=w.signNotZero(e.z),i=Zi.NORTH_POLE_TANGENT_PLANE,o=Zi.SOUTH_POLE;n<0&&(i=Zi.SOUTH_POLE_TANGENT_PLANE,o=Zi.NORTH_POLE);let r=iue;r.origin=i.ellipsoid.scaleToGeocentricSurface(e,r.origin),r.direction=u.subtract(r.origin,o,oue),u.normalize(r.direction,r.direction);let a=Ni.rayPlane(r,i.plane,rue),s=u.subtract(a,o,a),A=u.dot(i.xAxis,s),l=n*u.dot(i.yAxis,s);return c(t)?(t.position=new U(A,l),t.tangentPlane=i,t):new Zi(new U(A,l),i)};Zi.fromCartesianArray=function(e,t){let n=e.length;c(t)?t.length=n:t=new Array(n);for(let i=0;i<n;i++)t[i]=Zi.fromCartesian(e[i],t[i]);return t};Zi.clone=function(e,t){if(c(e))return c(t)?(t.position=e.position,t.tangentPlane=e.tangentPlane,t):new Zi(e.position,e.tangentPlane)};Zi.HALF_UNIT_SPHERE=Object.freeze(new Z(.5,.5,.5));Zi.NORTH_POLE=Object.freeze(new u(0,0,.5));Zi.SOUTH_POLE=Object.freeze(new u(0,0,-.5));Zi.NORTH_POLE_TANGENT_PLANE=Object.freeze(new Fo(Zi.NORTH_POLE,Zi.HALF_UNIT_SPHERE));Zi.SOUTH_POLE_TANGENT_PLANE=Object.freeze(new Fo(Zi.SOUTH_POLE,Zi.HALF_UNIT_SPHERE));var ts=Zi;var aue=new ae,zG=new ae;function sue(e,t,n,i){let r=i.cartesianToCartographic(e,aue).height,a=i.cartesianToCartographic(t,zG);a.height=r,i.cartographicToCartesian(a,t);let s=i.cartesianToCartographic(n,zG);s.height=r-100,i.cartographicToCartesian(s,n)}var HG=new Jt,cue=new u,Aue=new u,lue=new u,fue=new u,uue=new u,due=new u,Mb=new u,vA=new u,Nm=new u,hue=new U,mue=new U,pue=new u,VG=new qe,gue=new J,Cue=new J;function xw(e){let t=e.vertexFormat,n=e.geometry,i=e.shadowVolume,o=n.attributes.position.values,r=c(n.attributes.st)?n.attributes.st.values:void 0,a=o.length,s=e.wall,A=e.top||s,l=e.bottom||s;if(t.st||t.normal||t.tangent||t.bitangent||i){let f=e.boundingRectangle,h=e.rotationAxis,m=e.projectTo2d,p=e.ellipsoid,g=e.stRotation,C=e.perPositionHeight,_=hue;_.x=f.x,_.y=f.y;let E=t.st?new Float32Array(2*(a/3)):void 0,I;t.normal&&(C&&A&&!s?I=n.attributes.normal.values:I=new Float32Array(a));let y=t.tangent?new Float32Array(a):void 0,b=t.bitangent?new Float32Array(a):void 0,x=i?new Float32Array(a):void 0,S=0,P=0,D=Aue,Q=lue,v=fue,d=!0,B=gue,T=Cue;if(g!==0){let G=qe.fromAxisAngle(h,g,VG);B=J.fromQuaternion(G,B),G=qe.fromAxisAngle(h,-g,VG),T=J.fromQuaternion(G,T)}else B=J.clone(J.IDENTITY,B),T=J.clone(J.IDENTITY,T);let R=0,L=0;A&&l&&(R=a/2,L=a/3,a/=2);for(let G=0;G<a;G+=3){let q=u.fromArray(o,G,pue);if(t.st&&!c(r)){let z=J.multiplyByVector(B,q,cue);z=p.scaleToGeodeticSurface(z,z);let K=m([z],mue)[0];U.subtract(K,_,K);let ie=w.clamp(K.x/f.width,0,1),le=w.clamp(K.y/f.height,0,1);l&&(E[S+L]=ie,E[S+1+L]=le),A&&(E[S]=ie,E[S+1]=le),S+=2}if(t.normal||t.tangent||t.bitangent||i){let z=P+1,K=P+2;if(s){if(G+3<a){let ie=u.fromArray(o,G+3,uue);if(d){let le=u.fromArray(o,G+a,due);C&&sue(q,ie,le,p),u.subtract(ie,q,ie),u.subtract(le,q,le),D=u.normalize(u.cross(le,ie,D),D),d=!1}u.equalsEpsilon(ie,q,w.EPSILON10)&&(d=!0)}(t.tangent||t.bitangent)&&(v=p.geodeticSurfaceNormal(q,v),t.tangent&&(Q=u.normalize(u.cross(v,D,Q),Q)))}else D=p.geodeticSurfaceNormal(q,D),(t.tangent||t.bitangent)&&(C&&(Mb=u.fromArray(I,P,Mb),vA=u.cross(u.UNIT_Z,Mb,vA),vA=u.normalize(J.multiplyByVector(T,vA,vA),vA),t.bitangent&&(Nm=u.normalize(u.cross(Mb,vA,Nm),Nm))),Q=u.cross(u.UNIT_Z,D,Q),Q=u.normalize(J.multiplyByVector(T,Q,Q),Q),t.bitangent&&(v=u.normalize(u.cross(D,Q,v),v)));t.normal&&(e.wall?(I[P+R]=D.x,I[z+R]=D.y,I[K+R]=D.z):l&&(I[P+R]=-D.x,I[z+R]=-D.y,I[K+R]=-D.z),(A&&!C||s)&&(I[P]=D.x,I[z]=D.y,I[K]=D.z)),i&&(s&&(D=p.geodeticSurfaceNormal(q,D)),x[P+R]=-D.x,x[z+R]=-D.y,x[K+R]=-D.z),t.tangent&&(e.wall?(y[P+R]=Q.x,y[z+R]=Q.y,y[K+R]=Q.z):l&&(y[P+R]=-Q.x,y[z+R]=-Q.y,y[K+R]=-Q.z),A&&(C?(y[P]=vA.x,y[z]=vA.y,y[K]=vA.z):(y[P]=Q.x,y[z]=Q.y,y[K]=Q.z))),t.bitangent&&(l&&(b[P+R]=v.x,b[z+R]=v.y,b[K+R]=v.z),A&&(C?(b[P]=Nm.x,b[z]=Nm.y,b[K]=Nm.z):(b[P]=v.x,b[z]=v.y,b[K]=v.z))),P+=3}}t.st&&!c(r)&&(n.attributes.st=new ue({componentDatatype:N.FLOAT,componentsPerAttribute:2,values:E})),t.normal&&(n.attributes.normal=new ue({componentDatatype:N.FLOAT,componentsPerAttribute:3,values:I})),t.tangent&&(n.attributes.tangent=new ue({componentDatatype:N.FLOAT,componentsPerAttribute:3,values:y})),t.bitangent&&(n.attributes.bitangent=new ue({componentDatatype:N.FLOAT,componentsPerAttribute:3,values:b})),i&&(n.attributes.extrudeDirection=new ue({componentDatatype:N.FLOAT,componentsPerAttribute:3,values:x}))}if(e.extrude&&c(e.offsetAttribute)){let f=o.length/3,h=new Uint8Array(f);if(e.offsetAttribute===xt.TOP)A&&l||s?h=h.fill(1,0,f/2):A&&(h=h.fill(1));else{let m=e.offsetAttribute===xt.NONE?0:1;h=h.fill(m)}n.attributes.applyOffset=new ue({componentDatatype:N.UNSIGNED_BYTE,componentsPerAttribute:1,values:h})}return n}var jG=[];function _ue(e,t,n,i,o,r,a,s,A,l){let f={walls:[]},h;if(a||s){let I=rn.createGeometryFromPositions(e,t,n,i,r,A,l),y=I.attributes.position.values,b=I.indices,x,S;if(a&&s){let P=y.concat(y);x=P.length/3,S=Be.createTypedArray(x,b.length*2),S.set(b);let D=b.length,Q=x/2;for(h=0;h<D;h+=3){let v=S[h]+Q,d=S[h+1]+Q,B=S[h+2]+Q;S[h+D]=B,S[h+1+D]=d,S[h+2+D]=v}if(I.attributes.position.values=P,r&&A.normal){let v=I.attributes.normal.values;I.attributes.normal.values=new Float32Array(P.length),I.attributes.normal.values.set(v)}if(A.st&&c(n)){let v=I.attributes.st.values;I.attributes.st.values=new Float32Array(x*2),I.attributes.st.values=v.concat(v)}I.indices=S}else if(s){for(x=y.length/3,S=Be.createTypedArray(x,b.length),h=0;h<b.length;h+=3)S[h]=b[h+2],S[h+1]=b[h+1],S[h+2]=b[h];I.indices=S}f.topAndBottom=new gt({geometry:I})}let m=o.outerRing,p=Fo.fromPoints(m,e),g=p.projectPointsOntoPlane(m,jG),C=Tn.computeWindingOrder2D(g);C===Jo.CLOCKWISE&&(m=m.slice().reverse());let _=rn.computeWallGeometry(m,n,e,i,r,l);f.walls.push(new gt({geometry:_}));let E=o.holes;for(h=0;h<E.length;h++){let I=E[h];g=p.projectPointsOntoPlane(I,jG),C=Tn.computeWindingOrder2D(g),C===Jo.COUNTER_CLOCKWISE&&(I=I.slice().reverse()),_=rn.computeWallGeometry(I,n,e,i,r,l),f.walls.push(new gt({geometry:_}))}return f}function Ws(e){let t=e.polygonHierarchy,n=e.vertexFormat??ge.DEFAULT,i=e.ellipsoid??Z.default,o=e.granularity??w.RADIANS_PER_DEGREE,r=e.stRotation??0,a=e.textureCoordinates,s=e.perPositionHeight??!1,A=s&&c(e.extrudedHeight),l=e.height??0,f=e.extrudedHeight??l;if(!A){let h=Math.max(l,f);f=Math.min(l,f),l=h}this._vertexFormat=ge.clone(n),this._ellipsoid=Z.clone(i),this._granularity=o,this._stRotation=r,this._height=l,this._extrudedHeight=f,this._closeTop=e.closeTop??!0,this._closeBottom=e.closeBottom??!0,this._polygonHierarchy=t,this._perPositionHeight=s,this._perPositionHeightExtrude=A,this._shadowVolume=e.shadowVolume??!1,this._workerName="createPolygonGeometry",this._offsetAttribute=e.offsetAttribute,this._arcType=e.arcType??Yt.GEODESIC,this._rectangle=void 0,this._textureCoordinateRotationPoints=void 0,this._textureCoordinates=a,this.packedLength=rn.computeHierarchyPackedLength(t,u)+Z.packedLength+ge.packedLength+(a?rn.computeHierarchyPackedLength(a,U):1)+12}Ws.fromPositions=function(e){e=e??k.EMPTY_OBJECT;let t={polygonHierarchy:{positions:e.positions},height:e.height,extrudedHeight:e.extrudedHeight,vertexFormat:e.vertexFormat,stRotation:e.stRotation,ellipsoid:e.ellipsoid,granularity:e.granularity,perPositionHeight:e.perPositionHeight,closeTop:e.closeTop,closeBottom:e.closeBottom,offsetAttribute:e.offsetAttribute,arcType:e.arcType,textureCoordinates:e.textureCoordinates};return new Ws(t)};Ws.pack=function(e,t,n){return n=n??0,n=rn.packPolygonHierarchy(e._polygonHierarchy,t,n,u),Z.pack(e._ellipsoid,t,n),n+=Z.packedLength,ge.pack(e._vertexFormat,t,n),n+=ge.packedLength,t[n++]=e._height,t[n++]=e._extrudedHeight,t[n++]=e._granularity,t[n++]=e._stRotation,t[n++]=e._perPositionHeightExtrude?1:0,t[n++]=e._perPositionHeight?1:0,t[n++]=e._closeTop?1:0,t[n++]=e._closeBottom?1:0,t[n++]=e._shadowVolume?1:0,t[n++]=e._offsetAttribute??-1,t[n++]=e._arcType,c(e._textureCoordinates)?n=rn.packPolygonHierarchy(e._textureCoordinates,t,n,U):t[n++]=-1,t[n++]=e.packedLength,t};var Eue=Z.clone(Z.UNIT_SPHERE),Iue=new ge,yue={polygonHierarchy:{}};Ws.unpack=function(e,t,n){t=t??0;let i=rn.unpackPolygonHierarchy(e,t,u);t=i.startingIndex,delete i.startingIndex;let o=Z.unpack(e,t,Eue);t+=Z.packedLength;let r=ge.unpack(e,t,Iue);t+=ge.packedLength;let a=e[t++],s=e[t++],A=e[t++],l=e[t++],f=e[t++]===1,h=e[t++]===1,m=e[t++]===1,p=e[t++]===1,g=e[t++]===1,C=e[t++],_=e[t++],E=e[t]===-1?void 0:rn.unpackPolygonHierarchy(e,t,U);c(E)?(t=E.startingIndex,delete E.startingIndex):t++;let I=e[t++];return c(n)||(n=new Ws(yue)),n._polygonHierarchy=i,n._ellipsoid=Z.clone(o,n._ellipsoid),n._vertexFormat=ge.clone(r,n._vertexFormat),n._height=a,n._extrudedHeight=s,n._granularity=A,n._stRotation=l,n._perPositionHeightExtrude=f,n._perPositionHeight=h,n._closeTop=m,n._closeBottom=p,n._shadowVolume=g,n._offsetAttribute=C===-1?void 0:C,n._arcType=_,n._textureCoordinates=E,n.packedLength=I,n};var bue=new U,Bue=new U,xue=new ts;function YG(e,t,n,i,o,r){let a=e.longitude,s=a>=0?a:a+w.TWO_PI;o.westOverIdl=Math.min(o.westOverIdl,s),o.eastOverIdl=Math.max(o.eastOverIdl,s),r.west=Math.min(r.west,a),r.east=Math.max(r.east,a);let A=e.getLatitude(n),l=A;if(r.south=Math.min(r.south,A),r.north=Math.max(r.north,A),i!==Yt.RHUMB){let m=U.subtract(t.position,e.position,bue),p=U.dot(t.position,m)/U.dot(m,m);if(p>0&&p<1){let g=U.add(t.position,U.multiplyByScalar(m,-p,m),Bue),C=ts.clone(t,xue);C.position=g;let _=C.getLatitude(n);r.south=Math.min(r.south,_),r.north=Math.max(r.north,_),Math.abs(A)>Math.abs(_)&&(l=_)}}let f=t.x*e.y-e.x*t.y,h=Math.sign(f);h!==0&&(h*=U.angleBetween(t.position,e.position)),l>=0&&(o.northAngle+=h),l<=0&&(o.southAngle+=h)}var qG=new ts,Tue=new ts,qs={northAngle:0,southAngle:0,westOverIdl:0,eastOverIdl:0};Ws.computeRectangleFromPositions=function(e,t,n,i){if(c(i)||(i=new ce),e.length<3)return i;i.west=Number.POSITIVE_INFINITY,i.east=Number.NEGATIVE_INFINITY,i.south=Number.POSITIVE_INFINITY,i.north=Number.NEGATIVE_INFINITY,qs.northAngle=0,qs.southAngle=0,qs.westOverIdl=Number.POSITIVE_INFINITY,qs.eastOverIdl=Number.NEGATIVE_INFINITY;let o=e.length,r=ts.fromCartesian(e[0],Tue);for(let a=1;a<o;a++){let s=ts.fromCartesian(e[a],qG);YG(s,r,t,n,qs,i),r=ts.clone(s,r)}return YG(ts.fromCartesian(e[0],qG),r,t,n,qs,i),i.east-i.west>qs.eastOverIdl-qs.westOverIdl&&(i.west=qs.westOverIdl,i.east=qs.eastOverIdl,i.east>w.PI&&(i.east=i.east-w.TWO_PI),i.west>w.PI&&(i.west=i.west-w.TWO_PI)),w.equalsEpsilon(Math.abs(qs.northAngle),w.TWO_PI,w.EPSILON10)&&(i.north=w.PI_OVER_TWO,i.east=w.PI,i.west=-w.PI),w.equalsEpsilon(Math.abs(qs.southAngle),w.TWO_PI,w.EPSILON10)&&(i.south=-w.PI_OVER_TWO,i.east=w.PI,i.west=-w.PI),i};var Sue=new ts;function wue(e,t,n){return e.height>=w.PI||e.width>=w.PI?ts.fromCartesian(t[0],Sue).tangentPlane:Fo.fromPoints(t,n)}var WG=new ae;function Due(e,t,n){return(i,o)=>{if(e.height>=w.PI||e.width>=w.PI){if(e.south<0&&e.north>0){c(o)||(o=[]);for(let a=0;a<i.length;++a){let s=n.cartesianToCartographic(i[a],WG);o[a]=new U(s.longitude/w.PI,s.latitude/w.PI_OVER_TWO)}return o.length=i.length,o}return ts.fromCartesianArray(i,o)}return Fo.fromPoints(t,n).projectPointsOntoPlane(i,o)}}function Que(e,t,n){if(e.height>=w.PI||e.width>=w.PI)return(o,r)=>{if(e.south<0&&e.north>0){let a=n.cartesianToCartographic(o,WG);return c(r)||(r=new U),r.x=a.longitude/w.PI,r.y=a.latitude/w.PI_OVER_TWO,r}return ts.fromCartesian(o,r)};let i=Fo.fromPoints(t,n);return(o,r)=>i.projectPointsOntoPlane(o,r)}function Rue(e,t,n,i){return(o,r)=>!i&&(e.height>=w.PI_OVER_TWO||e.width>=2*w.PI_OVER_THREE)?rn.splitPolygonsOnEquator(o,t,n,r):o}function vue(e,t,n,i){if(t.height>=w.PI||t.width>=w.PI)return Jt.fromRectangle(t,void 0,HG);let o=e,r=Fo.fromPoints(o,n);return rn.computeBoundingRectangle(r.plane.normal,r.projectPointOntoPlane.bind(r),o,i,HG)}Ws.createGeometry=function(e){let t=e._vertexFormat,n=e._ellipsoid,i=e._granularity,o=e._stRotation,r=e._polygonHierarchy,a=e._perPositionHeight,s=e._closeTop,A=e._closeBottom,l=e._arcType,f=e._textureCoordinates,h=c(f),m=r.positions;if(m.length<3)return;let p=e.rectangle,g=rn.polygonsFromHierarchy(r,h,Due(p,m,n),!a,n,Rue(p,n,l,a)),C=g.hierarchy,_=g.polygons,E=function(R){return R},I=h?rn.polygonsFromHierarchy(f,!0,E,!1,n).polygons:void 0;if(C.length===0)return;let y=C[0].outerRing,b=vue(y,p,n,o),x=[],S=e._height,P=e._extrudedHeight,D=e._perPositionHeightExtrude||!w.equalsEpsilon(S,P,0,w.EPSILON2),Q={perPositionHeight:a,vertexFormat:t,geometry:void 0,rotationAxis:wue(p,y,n).plane.normal,projectTo2d:Que(p,y,n),boundingRectangle:b,ellipsoid:n,stRotation:o,textureCoordinates:void 0,bottom:!1,top:!0,wall:!1,extrude:!1,arcType:l},v;if(D)for(Q.extrude=!0,Q.top=s,Q.bottom=A,Q.shadowVolume=e._shadowVolume,Q.offsetAttribute=e._offsetAttribute,v=0;v<_.length;v++){let R=_ue(n,_[v],h?I[v]:void 0,i,C[v],a,s,A,t,l),L;s&&A?(L=R.topAndBottom,Q.geometry=rn.scaleToGeodeticHeightExtruded(L.geometry,S,P,n,a)):s?(L=R.topAndBottom,L.geometry.attributes.position.values=Tn.scaleToGeodeticHeight(L.geometry.attributes.position.values,S,n,!a),Q.geometry=L.geometry):A&&(L=R.topAndBottom,L.geometry.attributes.position.values=Tn.scaleToGeodeticHeight(L.geometry.attributes.position.values,P,n,!0),Q.geometry=L.geometry),(s||A)&&(Q.wall=!1,L.geometry=xw(Q),x.push(L));let G=R.walls;Q.wall=!0;for(let q=0;q<G.length;q++){let z=G[q];Q.geometry=rn.scaleToGeodeticHeightExtruded(z.geometry,S,P,n,a),z.geometry=xw(Q),x.push(z)}}else for(v=0;v<_.length;v++){let R=new gt({geometry:rn.createGeometryFromPositions(n,_[v],h?I[v]:void 0,i,a,t,l)});if(R.geometry.attributes.position.values=Tn.scaleToGeodeticHeight(R.geometry.attributes.position.values,S,n,!a),Q.geometry=R.geometry,R.geometry=xw(Q),c(e._offsetAttribute)){let L=R.geometry.attributes.position.values.length,G=e._offsetAttribute===xt.NONE?0:1,q=new Uint8Array(L/3).fill(G);R.geometry.attributes.applyOffset=new ue({componentDatatype:N.UNSIGNED_BYTE,componentsPerAttribute:1,values:q})}x.push(R)}let d=Mn.combineInstances(x)[0];d.attributes.position.values=new Float64Array(d.attributes.position.values),d.indices=Be.createTypedArray(d.attributes.position.values.length/3,d.indices);let B=d.attributes,T=ee.fromVertices(B.position.values);return t.position||delete B.position,new ze({attributes:B,indices:d.indices,primitiveType:d.primitiveType,boundingSphere:T,offsetAttribute:e._offsetAttribute})};Ws.createShadowVolume=function(e,t,n){let i=e._granularity,o=e._ellipsoid,r=t(i,o),a=n(i,o);return new Ws({polygonHierarchy:e._polygonHierarchy,ellipsoid:o,stRotation:e._stRotation,granularity:i,perPositionHeight:!1,extrudedHeight:r,height:a,vertexFormat:ge.POSITION_ONLY,shadowVolume:!0,arcType:e._arcType})};function Pue(e){let t=-e._stRotation;if(t===0)return[0,0,0,1,1,0];let n=e._ellipsoid,i=e._polygonHierarchy.positions,o=e.rectangle;return ze._textureCoordinateRotationPoints(i,t,n,o)}Object.defineProperties(Ws.prototype,{rectangle:{get:function(){if(!c(this._rectangle)){let e=this._polygonHierarchy.positions;this._rectangle=Ws.computeRectangleFromPositions(e,this._ellipsoid,this._arcType)}return this._rectangle}},textureCoordinateRotationPoints:{get:function(){return c(this._textureCoordinateRotationPoints)||(this._textureCoordinateRotationPoints=Pue(this)),this._textureCoordinateRotationPoints}}});var Fm=Ws;function $d(e){this._ellipsoid=e.ellipsoid??Z.default,this._positions=[...e.positions]}Object.defineProperties($d.prototype,{length:{get:function(){return this._positions.length}},positions:{get:function(){return this._positions}},ellipsoid:{get:function(){return this._ellipsoid}}});$d.clone=function(e,t){return c(t)?(t._ellipsoid=e.ellipsoid,t._positions.length=0,t._positions.push(...e.positions),t):new $d({positions:e.positions,ellipsoid:e.ellipsoid})};$d.equals=function(e,t){return e.ellipsoid.equals(t.ellipsoid)&&e.positions===t.positions};$d.prototype.computeRectangle=function(e){return Fm.computeRectangleFromPositions(this.positions,this.ellipsoid,void 0,e)};var Mue=new ce,JG=new u;$d.prototype.computeSphericalExtents=function(e){c(e)||(e=new ce);let t=this.computeRectangle(Mue),n=ae.toCartesian(ce.southwest(t),this.ellipsoid,JG),i=Math.sqrt(n.x*n.x+n.y*n.y),o=w.fastApproximateAtan2(i,n.z),r=w.fastApproximateAtan2(n.x,n.y);return e.south=o,e.west=r,n=ae.toCartesian(ce.northeast(t),this.ellipsoid,JG),i=Math.sqrt(n.x*n.x+n.y*n.y),o=w.fastApproximateAtan2(i,n.z),r=w.fastApproximateAtan2(n.x,n.y),e.north=o,e.east=r,e};var Tw=$d;var KG=`in vec2 v_textureCoordinates;

uniform int u_polygonsLength;
uniform int u_extentsLength;
uniform highp sampler2D u_polygonTexture;
uniform highp sampler2D u_extentsTexture;

int getPolygonIndex(float dimension, vec2 coord) {
   vec2 uv = coord.xy * dimension;
   return int(floor(uv.y) * dimension + floor(uv.x));
}

vec2 getLookupUv(ivec2 dimensions, int i) {
    int pixY = i / dimensions.x;
    int pixX = i - (pixY * dimensions.x);
    float pixelWidth = 1.0 / float(dimensions.x);
    float pixelHeight = 1.0 / float(dimensions.y);
    float u = (float(pixX) + 0.5) * pixelWidth; // sample from center of pixel
    float v = (float(pixY) + 0.5) * pixelHeight;
    return vec2(u, v);
}

vec4 getExtents(int i) {
    return texture(u_extentsTexture, getLookupUv(textureSize(u_extentsTexture, 0), i));
}

ivec2 getPositionsLengthAndExtentsIndex(int i) {
    vec2 uv = getLookupUv(textureSize(u_polygonTexture, 0), i);
    vec4 value = texture(u_polygonTexture, uv);
    return ivec2(int(value.x), int(value.y));
}

vec2 getPolygonPosition(int i) {
    vec2 uv = getLookupUv(textureSize(u_polygonTexture, 0), i);
    return texture(u_polygonTexture, uv).xy;
}

vec2 getCoordinates(vec2 textureCoordinates, vec4 extents) {
    float latitude = mix(extents.x, extents.x + 1.0 / extents.z, textureCoordinates.y);
    float longitude = mix(extents.y, extents.y + 1.0 / extents.w, textureCoordinates.x);
    return vec2(latitude, longitude);
}

void main() {
    int lastPolygonIndex = 0;
    out_FragColor = vec4(1.0);

    // Get the relevant region of the texture
    float dimension = float(u_extentsLength);
    if (u_extentsLength > 2) {
        dimension = ceil(log2(float(u_extentsLength)));
    }
    int regionIndex = getPolygonIndex(dimension, v_textureCoordinates);

    for (int polygonIndex = 0; polygonIndex < u_polygonsLength; polygonIndex++) {
        ivec2 positionsLengthAndExtents = getPositionsLengthAndExtentsIndex(lastPolygonIndex);
        int positionsLength = positionsLengthAndExtents.x;
        int polygonExtentsIndex = positionsLengthAndExtents.y;
        lastPolygonIndex += 1;

         // Only compute signed distance for the relevant part of the atlas
         if (polygonExtentsIndex == regionIndex) {
            float clipAmount = czm_infinity;
            vec4 extents = getExtents(polygonExtentsIndex);
            vec2 textureOffset = vec2(mod(float(polygonExtentsIndex), dimension), floor(float(polygonExtentsIndex) / dimension)) / dimension;
            vec2 p = getCoordinates((v_textureCoordinates - textureOffset) * dimension, extents);
            float s = 1.0;

            // Check each edge for absolute distance
            for (int i = 0, j = positionsLength - 1; i < positionsLength; j = i, i++) {
                vec2 a = getPolygonPosition(lastPolygonIndex + i);
                vec2 b = getPolygonPosition(lastPolygonIndex + j);
 
                vec2 ab = b - a;
                vec2 pa = p - a;
                float t = dot(pa, ab) / dot(ab, ab);
                t = clamp(t, 0.0, 1.0);

                vec2 pq = pa - t * ab;
                float d = length(pq);

                // Inside / outside computation to determine sign
                bvec3 cond = bvec3(p.y >= a.y, 
                            p.y < b.y, 
                            ab.x * pa.y > ab.y * pa.x);
                if (all(cond) || all(not(cond))) s = -s;
                if (abs(d) < abs(clipAmount)) {
                    clipAmount = d;
                }
            }

            // Normalize the range to [0,1]
            vec4 result = (s * vec4(clipAmount * length(extents.zw))) / 2.0 + 0.5;
            // In the case where we've iterated through multiple polygons, take the minimum
            out_FragColor = min(out_FragColor, result);
         }

        lastPolygonIndex += positionsLength;
    }
}`;function co(e){e=e??k.EMPTY_OBJECT,this._polygons=[],this._totalPositions=0,this.enabled=e.enabled??!0,this.inverse=e.inverse??!1,this.polygonAdded=new fe,this.polygonRemoved=new fe,this._owner=void 0,this._float32View=void 0,this._extentsFloat32View=void 0,this._extentsCount=0,this._polygonsTexture=void 0,this._extentsTexture=void 0,this._signedDistanceTexture=void 0,this._signedDistanceComputeCommand=void 0;let t=e.polygons;if(c(t)){let n=t.length;for(let i=0;i<n;++i)this._polygons.push(t[i])}}Object.defineProperties(co.prototype,{length:{get:function(){return this._polygons.length}},totalPositions:{get:function(){return this._totalPositions}},extentsTexture:{get:function(){return this._extentsTexture}},extentsCount:{get:function(){return this._extentsCount}},pixelsNeededForExtents:{get:function(){return this.length}},pixelsNeededForPolygonPositions:{get:function(){return this.totalPositions+this.length}},clippingTexture:{get:function(){return this._signedDistanceTexture}},owner:{get:function(){return this._owner}},clippingPolygonsState:{get:function(){return this.inverse?-this.extentsCount:this.extentsCount}}});co.prototype.add=function(e){let t=this._polygons.length;return this._polygons.push(e),this.polygonAdded.raiseEvent(e,t),e};co.prototype.get=function(e){return this._polygons[e]};co.prototype.contains=function(e){return this._polygons.some(t=>Tw.equals(t,e))};co.prototype.remove=function(e){let t=this._polygons,n=t.findIndex(i=>Tw.equals(i,e));return n===-1?!1:(t.splice(n,1),this.polygonRemoved.raiseEvent(e,n),!0)};var Oue=new ce;function Lue(e){let t=[],n=[],i=e.length;for(let r=0;r<i;++r){let s=e[r].computeSphericalExtents(),A=Math.max(s.height*2.5,.001),l=Math.max(s.width*2.5,.001),f=ce.clone(s);f.south-=A,f.west-=l,f.north+=A,f.east+=l,f.south=Math.max(f.south,-Math.PI),f.west=Math.max(f.west,-Math.PI),f.north=Math.min(f.north,Math.PI),f.east=Math.min(f.east,Math.PI);let h=[r];for(let m=0;m<t.length;++m){let p=t[m];if(c(p)&&c(ce.simpleIntersection(p,f))&&!ce.equals(p,f)){let g=n[m];h.push(...g),g.reduce((C,_)=>ce.union(e[_].computeSphericalExtents(Oue),C,C),s),t[m]=void 0,n[m]=void 0,A=Math.max(s.height*2.5,.001),l=Math.max(s.width*2.5,.001),f=ce.clone(s,f),f.south-=A,f.west-=l,f.north+=A,f.east+=l,f.south=Math.max(f.south,-Math.PI),f.west=Math.max(f.west,-Math.PI),f.north=Math.min(f.north,Math.PI),f.east=Math.min(f.east,Math.PI),m=-1}}t.push(f),n.push(h)}let o=new Map;return n.filter(c).forEach((r,a)=>r.forEach(s=>o.set(s,a))),{extentsList:t.filter(c),extentsIndexByPolygon:o}}co.prototype.removeAll=function(){let e=this._polygons,t=e.length;for(let n=0;n<t;++n){let i=e[n];this.polygonRemoved.raiseEvent(i,n)}this._polygons=[]};function Nue(e){let t=e._float32View,n=e._extentsFloat32View,i=e._polygons,{extentsList:o,extentsIndexByPolygon:r}=Lue(i),a=0;for(let[A,l]of i.entries()){let f=l.length;t[a++]=f,t[a++]=r.get(A);for(let h=0;h<f;++h){let m=l.positions[h],p=Math.hypot(m.x,m.y),g=w.fastApproximateAtan2(p,m.z),C=w.fastApproximateAtan2(m.x,m.y);t[a++]=g,t[a++]=C}}let s=0;for(let A of o){let l=1/(A.east-A.west),f=1/(A.north-A.south);n[s++]=A.south,n[s++]=A.west,n[s++]=f,n[s++]=l}e._extentsCount=o.length}var Sw=new U;co.prototype.update=function(e){let t=e.context;if(!co.isSupported(e))throw new oe("ClippingPolygonCollections are only supported for WebGL 2.");let n=this._polygons.reduce((a,s)=>a+s.length,0);if(n===this.totalPositions||(this._totalPositions=n,this.length===0))return;c(this._signedDistanceComputeCommand)&&(this._signedDistanceComputeCommand.canceled=!0,this._signedDistanceComputeCommand=void 0);let i=this._polygonsTexture,o=this._extentsTexture,r=this._signedDistanceTexture;if(c(i)){let a=i.width*i.height;(a<this.pixelsNeededForPolygonPositions||this.pixelsNeededForPolygonPositions<.25*a)&&(i.destroy(),i=void 0,this._polygonsTexture=void 0)}if(!c(i)){let a=co.getTextureResolution(i,this.pixelsNeededForPolygonPositions,Sw);i=new gn({context:t,width:a.x,height:a.y,pixelFormat:Bt.RG,pixelDatatype:_t.FLOAT,sampler:dn.NEAREST,flipY:!1}),this._float32View=new Float32Array(a.x*a.y*2),this._polygonsTexture=i}if(c(o)){let a=o.width*o.height;(a<this.pixelsNeededForExtents||this.pixelsNeededForExtents<.25*a)&&(o.destroy(),o=void 0,this._extentsTexture=void 0)}if(!c(o)){let a=co.getTextureResolution(o,this.pixelsNeededForExtents,Sw);o=new gn({context:t,width:a.x,height:a.y,pixelFormat:Bt.RGBA,pixelDatatype:_t.FLOAT,sampler:dn.NEAREST,flipY:!1}),this._extentsFloat32View=new Float32Array(a.x*a.y*4),this._extentsTexture=o}if(Nue(this),o.copyFrom({source:{width:o.width,height:o.height,arrayBufferView:this._extentsFloat32View}}),i.copyFrom({source:{width:i.width,height:i.height,arrayBufferView:this._float32View}}),!c(r)){let a=co.getClippingDistanceTextureResolution(this,Sw);r=new gn({context:t,width:a.x,height:a.y,pixelFormat:t.webgl2?Bt.RED:Bt.LUMINANCE,pixelDatatype:_t.FLOAT,sampler:new dn({wrapS:mi.CLAMP_TO_EDGE,wrapT:mi.CLAMP_TO_EDGE,minificationFilter:tn.LINEAR,magnificationFilter:bo.LINEAR}),flipY:!1}),this._signedDistanceTexture=r}this._signedDistanceComputeCommand=Fue(this)};co.prototype.queueCommands=function(e){c(this._signedDistanceComputeCommand)&&e.commandList.push(this._signedDistanceComputeCommand)};function Fue(e){let t=e._polygonsTexture,n=e._extentsTexture;return new Rf({fragmentShaderSource:KG,outputTexture:e._signedDistanceTexture,uniformMap:{u_polygonsLength:function(){return e.length},u_extentsLength:function(){return e.extentsCount},u_extentsTexture:function(){return n},u_polygonTexture:function(){return t}},persists:!1,owner:e,postExecute:()=>{e._signedDistanceComputeCommand=void 0}})}var XG=new ce,kue=new ce;co.prototype.computeIntersectionWithBoundingVolume=function(e,t){let n=this._polygons,i=n.length,o=vt.OUTSIDE;this.inverse&&(o=vt.INSIDE);for(let r=0;r<i;++r){let s=n[r].computeRectangle(),A=e.rectangle;if(!c(A)&&c(e.boundingVolume?.computeCorners)){let f=e.boundingVolume.computeCorners();A=ce.fromCartesianArray(f,t,XG)}c(A)||(A=ce.fromBoundingSphere(e.boundingSphere,t,XG));let l=ce.simpleIntersection(A,s,kue);c(l)&&(o=vt.INTERSECTING)}return o};co.setOwner=function(e,t,n){e!==t[n]&&(t[n]=t[n]&&t[n].destroy(),c(e)&&(e._owner=t,t[n]=e))};co.isSupported=function(e){return e?.context.webgl2};co.getTextureResolution=function(e,t,n){if(c(e))return n.x=e.width,n.y=e.height,n;let i=pn.maximumTextureSize;return n.x=Math.min(t,i),n.y=Math.ceil(t/n.x),n.y*=2,n};co.getClippingDistanceTextureResolution=function(e,t){let n=e.signedDistanceTexture;return c(n)?(t.x=n.width,t.y=n.height,t):(t.x=Math.min(pn.maximumTextureSize,4096),t.y=Math.min(pn.maximumTextureSize,4096),t)};co.getClippingExtentsTextureResolution=function(e,t){let n=e.extentsTexture;return c(n)?(t.x=n.width,t.y=n.height,t):co.getTextureResolution(n,e.pixelsNeededForExtents,t)};co.prototype.isDestroyed=function(){return!1};co.prototype.destroy=function(){return c(this._signedDistanceComputeCommand)&&(this._signedDistanceComputeCommand.canceled=!0),this._polygonsTexture=this._polygonsTexture&&this._polygonsTexture.destroy(),this._extentsTexture=this._extentsTexture&&this._extentsTexture.destroy(),this._signedDistanceTexture=this._signedDistanceTexture&&this._signedDistanceTexture.destroy(),pe(this)};var km=co;var r_={NONE:0,SCENE_LIGHT:1,SUNLIGHT:2};r_.fromGlobeFlags=function(e){return e.enableLighting&&e.dynamicAtmosphereLighting?e.dynamicAtmosphereLightingFromSun?r_.SUNLIGHT:r_.SCENE_LIGHT:r_.NONE};var Ob=Object.freeze(r_);function ZG(){this.lightIntensity=10,this.rayleighCoefficient=new u(55e-7,13e-6,284e-7),this.mieCoefficient=new u(21e-6,21e-6,21e-6),this.rayleighScaleHeight=1e4,this.mieScaleHeight=3200,this.mieAnisotropy=.9,this.hueShift=0,this.saturationShift=0,this.brightnessShift=0,this.dynamicLighting=Ob.NONE}ZG.requiresColorCorrect=function(e){return!(w.equalsEpsilon(e.hueShift,0,w.EPSILON7)&&w.equalsEpsilon(e.saturationShift,0,w.EPSILON7)&&w.equalsEpsilon(e.brightnessShift,0,w.EPSILON7))};var $G=ZG;var e3=`uniform vec3 u_radiiAndDynamicAtmosphereColor;

uniform float u_atmosphereLightIntensity;
uniform float u_atmosphereRayleighScaleHeight;
uniform float u_atmosphereMieScaleHeight;
uniform float u_atmosphereMieAnisotropy;
uniform vec3 u_atmosphereRayleighCoefficient;
uniform vec3 u_atmosphereMieCoefficient;

const float ATMOSPHERE_THICKNESS = 111e3; // The thickness of the atmosphere in meters.
const int PRIMARY_STEPS_MAX = 16; // Maximum number of times the ray from the camera to the world position (primary ray) is sampled.
const int LIGHT_STEPS_MAX = 4; // Maximum number of times the light is sampled from the light source's intersection with the atmosphere to a sample position on the primary ray.

/**
 * This function computes the colors contributed by Rayliegh and Mie scattering on a given ray, as well as
 * the transmittance value for the ray.
 *
 * @param {czm_ray} primaryRay The ray from the camera to the position.
 * @param {float} primaryRayLength The length of the primary ray.
 * @param {vec3} lightDirection The direction of the light to calculate the scattering from.
 * @param {vec3} rayleighColor The variable the Rayleigh scattering will be written to.
 * @param {vec3} mieColor The variable the Mie scattering will be written to.
 * @param {float} opacity The variable the transmittance will be written to.
 * @glslFunction
 */
void computeScattering(
    czm_ray primaryRay,
    float primaryRayLength,
    vec3 lightDirection,
    float atmosphereInnerRadius,
    out vec3 rayleighColor,
    out vec3 mieColor,
    out float opacity
) {

    // Initialize the default scattering amounts to 0.
    rayleighColor = vec3(0.0);
    mieColor = vec3(0.0);
    opacity = 0.0;

    float atmosphereOuterRadius = atmosphereInnerRadius + ATMOSPHERE_THICKNESS;

    vec3 origin = vec3(0.0);

    // Calculate intersection from the camera to the outer ring of the atmosphere.
    czm_raySegment primaryRayAtmosphereIntersect = czm_raySphereIntersectionInterval(primaryRay, origin, atmosphereOuterRadius);

    // Return empty colors if no intersection with the atmosphere geometry.
    if (primaryRayAtmosphereIntersect == czm_emptyRaySegment) {
        return;
    }

    // To deal with smaller values of PRIMARY_STEPS (e.g. 4)
    // we implement a split strategy: sky or horizon.
    // For performance reasons, instead of a if/else branch
    // a soft choice is implemented through a weight 0.0 <= w_stop_gt_lprl <= 1.0
    float x = 1e-7 * primaryRayAtmosphereIntersect.stop / length(primaryRayLength);
    // Value close to 0.0: close to the horizon
    // Value close to 1.0: above in the sky
    float w_stop_gt_lprl = 0.5 * (1.0 + czm_approximateTanh(x));

    // The ray should start from the first intersection with the outer atmopshere, or from the camera position, if it is inside the atmosphere.
    float start_0 = primaryRayAtmosphereIntersect.start;
    primaryRayAtmosphereIntersect.start = max(primaryRayAtmosphereIntersect.start, 0.0);
    // The ray should end at the exit from the atmosphere or at the distance to the vertex, whichever is smaller.
    primaryRayAtmosphereIntersect.stop = min(primaryRayAtmosphereIntersect.stop, length(primaryRayLength));

    // For the number of ray steps, distinguish inside or outside atmosphere (outer space)
    // (1) from outer space we have to use more ray steps to get a realistic rendering
    // (2) within atmosphere we need fewer steps for faster rendering
    float x_o_a = start_0 - ATMOSPHERE_THICKNESS; // ATMOSPHERE_THICKNESS used as an ad-hoc constant, no precise meaning here, only the order of magnitude matters
    float w_inside_atmosphere = 1.0 - 0.5 * (1.0 + czm_approximateTanh(x_o_a));
    int PRIMARY_STEPS = PRIMARY_STEPS_MAX - int(w_inside_atmosphere * 12.0); // Number of times the ray from the camera to the world position (primary ray) is sampled.
    int LIGHT_STEPS = LIGHT_STEPS_MAX - int(w_inside_atmosphere * 2.0); // Number of times the light is sampled from the light source's intersection with the atmosphere to a sample position on the primary ray.

    // Setup for sampling positions along the ray - starting from the intersection with the outer ring of the atmosphere.
    float rayPositionLength = primaryRayAtmosphereIntersect.start;
    // (1) Outside the atmosphere: constant rayStepLength
    // (2) Inside atmosphere: variable rayStepLength to compensate the rough rendering of the smaller number of ray steps
    float totalRayLength = primaryRayAtmosphereIntersect.stop - rayPositionLength;
    float rayStepLengthIncrease = w_inside_atmosphere * ((1.0 - w_stop_gt_lprl) * totalRayLength / (float(PRIMARY_STEPS * (PRIMARY_STEPS + 1)) / 2.0));
    float rayStepLength = max(1.0 - w_inside_atmosphere, w_stop_gt_lprl) * totalRayLength / max(7.0 * w_inside_atmosphere, float(PRIMARY_STEPS));

    vec3 rayleighAccumulation = vec3(0.0);
    vec3 mieAccumulation = vec3(0.0);
    vec2 opticalDepth = vec2(0.0);
    vec2 heightScale = vec2(u_atmosphereRayleighScaleHeight, u_atmosphereMieScaleHeight);

    // Sample positions on the primary ray.
    for (int i = 0; i < PRIMARY_STEPS_MAX; ++i) {

        // The loop should be: for (int i = 0; i < PRIMARY_STEPS; ++i) {...} but WebGL1 cannot
        // loop with non-constant condition, so it has to break early instead
        if (i >= PRIMARY_STEPS) {
            break;
        }

        // Calculate sample position along viewpoint ray.
        vec3 samplePosition = primaryRay.origin + primaryRay.direction * (rayPositionLength + rayStepLength);

        // Calculate height of sample position above ellipsoid.
        float sampleHeight = length(samplePosition) - atmosphereInnerRadius;

        // Calculate and accumulate density of particles at the sample position.
        vec2 sampleDensity = exp(-sampleHeight / heightScale) * rayStepLength;
        opticalDepth += sampleDensity;

        // Generate ray from the sample position segment to the light source, up to the outer ring of the atmosphere.
        czm_ray lightRay = czm_ray(samplePosition, lightDirection);
        czm_raySegment lightRayAtmosphereIntersect = czm_raySphereIntersectionInterval(lightRay, origin, atmosphereOuterRadius);

        float lightStepLength = lightRayAtmosphereIntersect.stop / float(LIGHT_STEPS);
        float lightPositionLength = 0.0;

        vec2 lightOpticalDepth = vec2(0.0);

        // Sample positions along the light ray, to accumulate incidence of light on the latest sample segment.
        for (int j = 0; j < LIGHT_STEPS_MAX; ++j) {

            // The loop should be: for (int j = 0; i < LIGHT_STEPS; ++j) {...} but WebGL1 cannot
            // loop with non-constant condition, so it has to break early instead
            if (j >= LIGHT_STEPS) {
                break;
            }

            // Calculate sample position along light ray.
            vec3 lightPosition = samplePosition + lightDirection * (lightPositionLength + lightStepLength * 0.5);

            // Calculate height of the light sample position above ellipsoid.
            float lightHeight = length(lightPosition) - atmosphereInnerRadius;

            // Calculate density of photons at the light sample position.
            lightOpticalDepth += exp(-lightHeight / heightScale) * lightStepLength;

            // Increment distance on light ray.
            lightPositionLength += lightStepLength;
        }

        // Compute attenuation via the primary ray and the light ray.
        vec3 attenuation = exp(-((u_atmosphereMieCoefficient * (opticalDepth.y + lightOpticalDepth.y)) + (u_atmosphereRayleighCoefficient * (opticalDepth.x + lightOpticalDepth.x))));

        // Accumulate the scattering.
        rayleighAccumulation += sampleDensity.x * attenuation;
        mieAccumulation += sampleDensity.y * attenuation;

        // Increment distance on primary ray.
        rayPositionLength += (rayStepLength += rayStepLengthIncrease);
    }

    // Compute the scattering amount.
    rayleighColor = u_atmosphereRayleighCoefficient * rayleighAccumulation;
    mieColor = u_atmosphereMieCoefficient * mieAccumulation;

    // Compute the transmittance i.e. how much light is passing through the atmosphere.
    opacity = length(exp(-((u_atmosphereMieCoefficient * opticalDepth.y) + (u_atmosphereRayleighCoefficient * opticalDepth.x))));
}

vec4 computeAtmosphereColor(
    vec3 positionWC,
    vec3 lightDirection,
    vec3 rayleighColor,
    vec3 mieColor,
    float opacity
) {
    // Setup the primary ray: from the camera position to the vertex position.
    vec3 cameraToPositionWC = positionWC - czm_viewerPositionWC;
    vec3 cameraToPositionWCDirection = normalize(cameraToPositionWC);

    float cosAngle = dot(cameraToPositionWCDirection, lightDirection);
    float cosAngleSq = cosAngle * cosAngle;

    float G = u_atmosphereMieAnisotropy;
    float GSq = G * G;

    // The Rayleigh phase function.
    float rayleighPhase = 3.0 / (50.2654824574) * (1.0 + cosAngleSq);
    // The Mie phase function.
    float miePhase = 3.0 / (25.1327412287) * ((1.0 - GSq) * (cosAngleSq + 1.0)) / (pow(1.0 + GSq - 2.0 * cosAngle * G, 1.5) * (2.0 + GSq));

    // The final color is generated by combining the effects of the Rayleigh and Mie scattering.
    vec3 rayleigh = rayleighPhase * rayleighColor;
    vec3 mie = miePhase * mieColor;

    vec3 color = (rayleigh + mie) * u_atmosphereLightIntensity;

    return vec4(color, opacity);
}
`;var t3=`uniform samplerCube u_radianceMap;

in vec2 v_textureCoordinates;


const float twoSqrtPi = 2.0 * sqrt(czm_pi);

// Coutesy of https://www.ppsloan.org/publications/StupidSH36.pdf
float computeShBasis(int index, vec3 s) {
    if (index == 0) { // l = 0, m = 0
        return 1.0 / twoSqrtPi;
    }
    
    if (index == 1) { // l = 1, m = -1
        return -sqrt(3.0) * s.y / twoSqrtPi;
    }

    if (index == 2) { // l = 1, m = 0
        return sqrt(3.0) * s.z / twoSqrtPi;
    }

    if (index == 3) { // l = 1, m = 1
        return -sqrt(3.0) * s.x / twoSqrtPi;
    }

    if (index == 4) { // l = 2, m = -2
        return sqrt(15.0) * s.y * s.x / twoSqrtPi;
    }

    if (index == 5) { // l = 2, m = -1
        return -sqrt(15.0) * s.y * s.z / twoSqrtPi;
    }

    if (index == 6) { // l = 2, m = 0
        return sqrt(5.0) * (3.0 * s.z * s.z - 1.0) / 2.0 / twoSqrtPi;
    }

    if (index == 7) { // l = 2, m = 1
        return -sqrt(15.0) * s.x * s.z / twoSqrtPi;
    }

    if (index == 8) { // l = 2, m = 2
        return sqrt(15.0) * (s.x * s.x - s.y * s.y) / 2.0 / twoSqrtPi;
    }

    return 0.0;
}

float vdcRadicalInverse(int i)
{
    float r;
    float base = 2.0;
    float value = 0.0;
    float invBase = 1.0 / base;
    float invBi = invBase;
    for (int x = 0; x < 100; x++)
    {
        if (i <= 0)
        {
            break;
        }
        r = mod(float(i), base);
        value += r * invBi;
        invBi *= invBase;
        i = int(float(i) * invBase);
    }
    return value;
}

vec2 hammersley2D(int i, int N)
{
    return vec2(float(i) / float(N), vdcRadicalInverse(i));
}

// Sample count is relatively low for the sake of performance, but should still be enough to capture directionality needed for third-order harmonics
const int samples = 256; 
const float solidAngle = 1.0 / float(samples);

void main() {
    // Get the current coefficient based on the uv
   vec2 uv = v_textureCoordinates.xy * 3.0;
   int coefficientIndex = int(floor(uv.y) * 3.0 + floor(uv.x));

    for (int i = 0; i < samples; ++i) {
        vec2 xi = hammersley2D(i, samples);
        float phi = czm_twoPi * xi.x;
        float cosTheta = 1.0 - 2.0 * sqrt(1.0 - xi.y * xi.y);
        float sinTheta = sqrt(1.0 - cosTheta * cosTheta);
        vec3 direction = normalize(vec3(sinTheta * cos(phi), cosTheta, sinTheta * sin(phi)));

        // Generate the spherical harmonics basis from the direction
        float Ylm = computeShBasis(coefficientIndex, direction);

        vec3 lookupDirection = -direction.xyz;
        lookupDirection.z = -lookupDirection.z;

        vec4 color = czm_textureCube(u_radianceMap, lookupDirection, 0.0);

        // Use the relevant function for this coefficient
        out_FragColor += Ylm * color * solidAngle * sinTheta;
    }
    
}
`;var n3=`precision highp float;

in vec2 v_textureCoordinates;

uniform vec3 u_faceDirection; // Current cubemap face
uniform vec3 u_positionWC;
uniform mat4 u_enuToFixedFrame;
uniform vec4 u_brightnessSaturationGammaIntensity;
uniform vec4 u_groundColor; // alpha component represent albedo

vec4 getCubeMapDirection(vec2 uv, vec3 faceDir) {
    vec2 scaledUV = uv * 2.0 - 1.0;

    if (faceDir.x != 0.0) {
        return vec4(faceDir.x,  scaledUV.x * faceDir.x, -scaledUV.y, 0.0);
    } else if (faceDir.y != 0.0) {
        return vec4(scaledUV.x, -scaledUV.y * faceDir.y, faceDir.y, 0.0);
    } else {
        return vec4(scaledUV.x * faceDir.z, -faceDir.z, -scaledUV.y, 0.0); 
    }
}

void main() {    
    float height = length(u_positionWC);
    float atmosphereInnerRadius = u_radiiAndDynamicAtmosphereColor.y;
    float ellipsoidHeight = max(height - atmosphereInnerRadius, 0.0);

    // Scale the position to ensure the sky color is present, even when underground.
    vec3 positionWC = u_positionWC / height * (ellipsoidHeight + atmosphereInnerRadius);

    float atmosphereOuterRadius = u_radiiAndDynamicAtmosphereColor.x;
    float atmosphereHeight = atmosphereOuterRadius - atmosphereInnerRadius;

    vec3 direction = (u_enuToFixedFrame * getCubeMapDirection(v_textureCoordinates, u_faceDirection)).xyz;
    vec3 normalizedDirection = normalize(direction);

    czm_ray ray = czm_ray(positionWC, normalizedDirection);
    czm_raySegment intersection = czm_raySphereIntersectionInterval(ray, vec3(0.0), atmosphereInnerRadius);
    if (!czm_isEmpty(intersection)) {
        intersection = czm_rayEllipsoidIntersectionInterval(ray, vec3(0.0), czm_ellipsoidInverseRadii);
    }

    bool onEllipsoid = intersection.start >= 0.0;
    float rayLength = czm_branchFreeTernary(onEllipsoid, intersection.start, atmosphereOuterRadius);

    // Compute sky color for each position on a sphere at radius centered around the provided position's origin
    vec3 skyPositionWC = positionWC + normalizedDirection * rayLength;

    float lightEnum = u_radiiAndDynamicAtmosphereColor.z;
    vec3 lightDirectionWC = normalize(czm_getDynamicAtmosphereLightDirection(skyPositionWC, lightEnum));
    vec3 mieColor;
    vec3 rayleighColor;
    float opacity;
    czm_computeScattering(
        ray,
        rayLength,
        lightDirectionWC,
        atmosphereInnerRadius, 
        rayleighColor,
        mieColor,
        opacity
    );

    vec4 atmopshereColor = czm_computeAtmosphereColor(ray, lightDirectionWC, rayleighColor, mieColor, opacity);

#ifdef ATMOSPHERE_COLOR_CORRECT
    const bool ignoreBlackPixels = true;
    atmopshereColor.rgb = czm_applyHSBShift(atmopshereColor.rgb, czm_atmosphereHsbShift, ignoreBlackPixels);
#endif

    vec3 lookupDirection = -normalizedDirection;
     // Flipping the X vector is a cheap way to get the inverse of czm_temeToPseudoFixed, since that's a rotation about Z.
    lookupDirection.x = -lookupDirection.x;
    lookupDirection = -normalize(czm_temeToPseudoFixed * lookupDirection);
    lookupDirection.x = -lookupDirection.x;

    // Values outside the atmopshere are rendered as black, when they should be treated as transparent
    float skyAlpha = clamp((1.0 - ellipsoidHeight / atmosphereHeight) * atmopshereColor.a, 0.0, 1.0);
    skyAlpha = czm_branchFreeTernary(length(atmopshereColor.rgb) <= czm_epsilon7, 0.0, skyAlpha); // Treat black as transparent

    // Blend starmap with atmopshere scattering
    float intensity = u_brightnessSaturationGammaIntensity.w;
    vec4 sceneSkyBoxColor = czm_textureCube(czm_environmentMap, lookupDirection);
    vec3 skyBackgroundColor = mix(czm_backgroundColor.rgb, sceneSkyBoxColor.rgb, sceneSkyBoxColor.a);
    vec4 combinedSkyColor = vec4(mix(skyBackgroundColor, atmopshereColor.rgb * intensity, skyAlpha), 1.0);

    // Compute ground color based on amount of reflected light, then blend it with ground atmosphere based on height
    vec3 up = normalize(positionWC);
    float occlusion = max(dot(lightDirectionWC, up), 0.05);
    vec4 groundColor = vec4(u_groundColor.rgb * u_groundColor.a * (vec3(intensity * occlusion) + atmopshereColor.rgb), 1.0);
    vec4 blendedGroundColor = mix(groundColor, atmopshereColor, clamp(ellipsoidHeight / atmosphereHeight, 0.0, 1.0));

    vec4 color = czm_branchFreeTernary(onEllipsoid, blendedGroundColor, combinedSkyColor);

    float brightness = u_brightnessSaturationGammaIntensity.x;
    float saturation = u_brightnessSaturationGammaIntensity.y;
    float gamma = u_brightnessSaturationGammaIntensity.z;

#ifdef ENVIRONMENT_COLOR_CORRECT
    color.rgb = mix(vec3(0.0), color.rgb, brightness);
    color.rgb = czm_saturation(color.rgb, saturation);
#endif
    color.rgb = pow(color.rgb, vec3(gamma)); // Normally this would be in the ifdef above, but there is a precision issue with the atmopshere scattering transmittance (alpha). Having this line is a workaround for that issue, even when gamma is 1.0.
    color.rgb = czm_gammaCorrect(color.rgb);

    out_FragColor = color;
}
`;var i3=`precision highp float;

in vec3 v_textureCoordinates;

uniform float u_roughness;
uniform samplerCube u_radianceTexture;
uniform vec3 u_faceDirection;

float vdcRadicalInverse(int i)
{
    float r;
    float base = 2.0;
    float value = 0.0;
    float invBase = 1.0 / base;
    float invBi = invBase;
    for (int x = 0; x < 100; x++)
    {
        if (i <= 0)
        {
            break;
        }
        r = mod(float(i), base);
        value += r * invBi;
        invBi *= invBase;
        i = int(float(i) * invBase);
    }
    return value;
}

vec2 hammersley2D(int i, int N)
{
    return vec2(float(i) / float(N), vdcRadicalInverse(i));
}

vec3 importanceSampleGGX(vec2 xi, float alphaRoughness, vec3 N)
{
    float alphaRoughnessSquared = alphaRoughness * alphaRoughness;
    float phi = czm_twoPi * xi.x;
    float cosTheta = sqrt((1.0 - xi.y) / (1.0 + (alphaRoughnessSquared - 1.0) * xi.y));
    float sinTheta = sqrt(1.0 - cosTheta * cosTheta);
    vec3 H = vec3(sinTheta * cos(phi), sinTheta * sin(phi), cosTheta);
    vec3 upVector = abs(N.z) < 0.999 ? vec3(0.0, 0.0, 1.0) : vec3(1.0, 0.0, 0.0);
    vec3 tangentX = normalize(cross(upVector, N));
    vec3 tangentY = cross(N, tangentX);
    return tangentX * H.x + tangentY * H.y + N * H.z;
}

// Sample count is relatively low for the sake of performance, but should still be enough to prevent artifacting in lower roughnesses
const int samples = 128;

void main() {
    vec3 normal = u_faceDirection;
    vec3 V = normalize(v_textureCoordinates);
    float roughness = u_roughness;

    vec4 color = vec4(0.0);
    float weight = 0.0;
    for (int i = 0; i < samples; ++i) {
            vec2 xi = hammersley2D(i, samples);
            vec3 H = importanceSampleGGX(xi, roughness, V);
            vec3 L = 2.0 * dot(V, H) * H - V; // reflected vector

            float NdotL = max(dot(V, L), 0.0);
            if (NdotL > 0.0) {
                color += vec4(czm_textureCube(u_radianceTexture, L).rgb, 1.0) * NdotL;
                weight += NdotL;
            }
        }
    out_FragColor = color / weight;
}
`;var o3=`in vec3 position;
out vec3 v_textureCoordinates;

uniform vec3 u_faceDirection;

vec3 getCubeMapDirection(vec2 uv, vec3 faceDir) {
    vec2 scaledUV = uv;

    if (faceDir.x != 0.0) {
        return vec3(faceDir.x, scaledUV.y, scaledUV.x * faceDir.x);
    } else if (faceDir.y != 0.0) {
        return vec3(scaledUV.x, -faceDir.y, -scaledUV.y * faceDir.y);
    } else {
        return vec3(scaledUV.x * faceDir.z, scaledUV.y, -faceDir.z); 
    }
}

void main() 
{
    v_textureCoordinates = getCubeMapDirection(position.xy, u_faceDirection);
    v_textureCoordinates.y = -v_textureCoordinates.y;
    v_textureCoordinates.z = -v_textureCoordinates.z;
    gl_Position = vec4(position, 1.0);
}
`;function un(e){this._position=void 0,this._radianceMapDirty=!1,this._radianceCommandsDirty=!1,this._convolutionsCommandsDirty=!1,this._irradianceCommandDirty=!1,this._irradianceTextureDirty=!1,this._sphericalHarmonicCoefficientsDirty=!1,this._shouldRegenerateShaders=!1,this._shouldReset=!1,e=e??k.EMPTY_OBJECT;let t=Math.min(e.mipmapLevels??7,Math.log2(pn.maximumCubeMapSize));this._mipmapLevels=t,this._radianceMapComputeCommands=new Array(6),this._convolutionComputeCommands=new Array((t-1)*6),this._irradianceComputeCommand=void 0,this._radianceMapFS=void 0,this._irradianceMapFS=void 0,this._convolveSP=void 0,this._va=void 0,this._radianceMapTextures=new Array(6),this._specularMapTextures=new Array((t-1)*6),this._radianceCubeMap=void 0,this._irradianceMapTexture=void 0,this._sphericalHarmonicCoefficients=un.DEFAULT_SPHERICAL_HARMONIC_COEFFICIENTS.slice(),this._lastTime=new X;let n=Math.pow(2,t-1);this._textureDimensions=new U(n,n),this._radiiAndDynamicAtmosphereColor=new u,this._sceneEnvironmentMap=void 0,this._backgroundColor=void 0,this._owner=void 0,this.enabled=e.enabled??!0,this.shouldUpdate=!0,this.maximumSecondsDifference=e.maximumSecondsDifference??3600,this.maximumPositionEpsilon=e.maximumPositionEpsilon??1e3,this.atmosphereScatteringIntensity=e.atmosphereScatteringIntensity??2,this.gamma=e.gamma??1,this.brightness=e.brightness??1,this.saturation=e.saturation??1,this.groundColor=e.groundColor??un.AVERAGE_EARTH_GROUND_COLOR,this.groundAlbedo=e.groundAlbedo??.31}Object.defineProperties(un.prototype,{owner:{get:function(){return this._owner}},shouldRegenerateShaders:{get:function(){return this._shouldRegenerateShaders}},position:{get:function(){return this._position},set:function(e){u.equalsEpsilon(e,this._position,0,this.maximumPositionEpsilon)||(this._position=u.clone(e,this._position),this._shouldReset=!0)}},radianceCubeMap:{get:function(){return this._radianceCubeMap}},maximumMipmapLevel:{get:function(){return this._mipmapLevels}},sphericalHarmonicCoefficients:{get:function(){return this._sphericalHarmonicCoefficients}}});un._maximumComputeCommandCount=8;un._activeComputeCommandCount=0;un._nextFrameCommandQueue=[];un._queueCommand=(e,t)=>{if(un._activeComputeCommandCount>=un._maximumComputeCommandCount){un._nextFrameCommandQueue.push(e);return}t.commandList.push(e),un._activeComputeCommandCount++};un._updateCommandQueue=e=>{if(un._maximumComputeCommandCount=Math.log2(pn.maximumCubeMapSize),un._nextFrameCommandQueue.length>0&&un._activeComputeCommandCount<un._maximumComputeCommandCount){let t=un._nextFrameCommandQueue.shift();for(;c(t)&&un._activeComputeCommandCount<un._maximumComputeCommandCount;){if(t.owner.isDestroyed()||t.canceled){t=un._nextFrameCommandQueue.shift();continue}e.commandList.push(t),un._activeComputeCommandCount++,t=un._nextFrameCommandQueue.shift()}c(t)&&un._nextFrameCommandQueue.push(t)}};un.setOwner=function(e,t,n){e!==t[n]&&(t[n]=t[n]&&t[n].destroy(),c(e)&&(e._owner=t,t[n]=e))};un.prototype.reset=function(){let e=this._radianceMapComputeCommands.length;for(let t=0;t<e;++t)c(this._radianceMapComputeCommands[t])&&(this._radianceMapComputeCommands[t].canceled=!0),this._radianceMapComputeCommands[t]=void 0;e=this._convolutionComputeCommands.length;for(let t=0;t<e;++t)c(this._convolutionComputeCommands[t])&&(this._convolutionComputeCommands[t].canceled=!0),this._convolutionComputeCommands[t]=void 0;c(this._irradianceComputeCommand)&&(this._irradianceComputeCommand.canceled=!0,this._irradianceComputeCommand=void 0),this._radianceMapDirty=!0,this._radianceCommandsDirty=!0,this._convolutionsCommandsDirty=!1,this._irradianceCommandDirty=!1};var Uue=new u,Gue=new u;function zue(e,t){let n=e._position,i=t.atmosphere,o=t.mapProjection.ellipsoid,r=o.scaleToGeodeticSurface(n,Gue),a=1.025,s=Uue,A=c(r)?u.magnitude(r):o.maximumRadius;return s.x=A*a,s.y=A,s.z=i.dynamicLighting,!u.equalsEpsilon(e._radiiAndDynamicAtmosphereColor,s)||t.environmentMap!==e._sceneEnvironmentMap||t.backgroundColor!==e._backgroundColor?(u.clone(s,e._radiiAndDynamicAtmosphereColor),e._sceneEnvironmentMap=t.environmentMap,e._backgroundColor=t.backgroundColor,!0):!1}var r3=new u,Hue=new O,Vue=new se,jue=new F;function Yue(e,t){let n=t.context,i=e._textureDimensions;if(c(e._radianceCubeMap)||(e._radianceCubeMap=new Wa({context:n,width:i.x,height:i.y,pixelDatatype:_t.UNSIGNED_BYTE,pixelFormat:Bt.RGBA})),e._radianceCommandsDirty){let o=e._radianceMapFS;c(o)||(o=new It({sources:[e3,n3]}),e._radianceMapFS=o),$G.requiresColorCorrect(t.atmosphere)&&o.defines.push("ATMOSPHERE_COLOR_CORRECT");let r=e._position,a=e._radiiAndDynamicAtmosphereColor,s=t.mapProjection.ellipsoid,A=Rn.eastNorthUpToFixedFrame(r,s,Hue),l=Vue;l.x=e.brightness,l.y=e.saturation,l.z=e.gamma,l.w=e.atmosphereScatteringIntensity,(e.brightness!==1||e.saturation!==1||e.gamma!==1)&&o.defines.push("ENVIRONMENT_COLOR_CORRECT");let f=0;for(let h of Wa.faceNames()){let m=e._radianceMapTextures[f];c(m)&&!m.isDestroyed()&&m.destroy(),m=new gn({context:n,width:i.x,height:i.y,pixelDatatype:_t.UNSIGNED_BYTE,pixelFormat:Bt.RGBA}),e._radianceMapTextures[f]=m;let p=f,g=new Rf({fragmentShaderSource:o,outputTexture:m,uniformMap:{u_radiiAndDynamicAtmosphereColor:()=>a,u_enuToFixedFrame:()=>A,u_faceDirection:()=>Wa.getDirection(h,r3),u_positionWC:()=>r,u_brightnessSaturationGammaIntensity:()=>l,u_groundColor:()=>e.groundColor.withAlpha(e.groundAlbedo,jue)},owner:e});g.postExecute=()=>{if(e.isDestroyed()||g.canceled){un._activeComputeCommandCount--;return}let C=e._radianceMapComputeCommands;C[p]=void 0;let _=new Ts({context:n,colorTextures:[e._radianceMapTextures[p]]});_._bind(),e._radianceCubeMap[h].copyFromFramebuffer(),_._unBind(),_.destroy(),un._activeComputeCommandCount--,C.some(c)||(e._convolutionsCommandsDirty=!0,e._shouldRegenerateShaders=!0)},e._radianceMapComputeCommands[f]=g,un._queueCommand(g,t),f++}e._radianceCommandsDirty=!1}}function que(e,t){let n=e._radianceCubeMap;n.generateMipmap();let i=e._mipmapLevels,o=e._textureDimensions,r=o.x/2,a=o.y/2,s=t.context,A=0,l=(h,m,p,g,C)=>()=>{if(e.isDestroyed()||h.canceled){un._activeComputeCommandCount--;return}let _=e._convolutionComputeCommands;_[m]=void 0,n.copyFace(t,p,g,C),A++,un._activeComputeCommandCount--,p.destroy(),e._specularMapTextures[m]=void 0;let E=e._specularMapTextures.length;A>=E&&(e._irradianceCommandDirty=!0,n.sampler=new dn({minificationFilter:tn.LINEAR_MIPMAP_LINEAR}),e._shouldRegenerateShaders=!0,e._va.destroy(),e._va=void 0,e._convolveSP.destroy(),e._convolveSP=void 0)},f=0;for(let h=1;h<i;++h){for(let m of Wa.faceNames()){c(e._specularMapTextures[f])&&e._specularMapTextures[f].destroy();let p=e._specularMapTextures[f]=new gn({context:s,width:r,height:a,pixelDatatype:_t.UNSIGNED_BYTE,pixelFormat:Bt.RGBA}),g=e._va;c(g)||(g=Wa.createVertexArray(s,m),e._va=g);let C=e._convolveSP;c(C)||(C=Bn.fromCache({context:s,vertexShaderSource:o3,fragmentShaderSource:i3,attributeLocations:{positions:0}}),e._convolveSP=C);let _=new Rf({shaderProgram:C,vertexArray:g,outputTexture:p,persists:!0,owner:e,uniformMap:{u_roughness:()=>h/(i-1),u_radianceTexture:()=>n??s.defaultTexture,u_faceDirection:()=>Wa.getDirection(m,r3)}});_.postExecute=l(_,f,p,m,h),e._convolutionComputeCommands[f]=_,un._queueCommand(_,t),++f}r/=2,a/=2}}var a3=new U(3,3);function Wue(e,t){let n=t.context,i=a3,o=e._irradianceMapTexture;c(o)&&!o.isDestroyed()&&o.destroy(),o=new gn({context:n,width:i.x,height:i.y,pixelDatatype:_t.FLOAT,pixelFormat:Bt.RGBA}),e._irradianceMapTexture=o;let r=e._irradianceMapFS;c(r)||(r=new It({sources:[t3]}),e._irradianceMapFS=r);let a=new Rf({fragmentShaderSource:r,outputTexture:o,owner:e,uniformMap:{u_radianceMap:()=>e._radianceCubeMap??n.defaultTexture}});a.postExecute=()=>{if(e.isDestroyed()||a.canceled){un._activeComputeCommandCount--;return}e._irradianceTextureDirty=!1,e._irradianceComputeCommand=void 0,e._sphericalHarmonicCoefficientsDirty=!0,e._irradianceMapFS=void 0,un._activeComputeCommandCount--},e._irradianceComputeCommand=a,un._queueCommand(a,t),e._irradianceTextureDirty=!0}function Jue(e,t){let n=t.context;if(!c(e._irradianceMapTexture))return;let i=new Ts({context:n,colorTextures:[e._irradianceMapTexture],destroyAttachments:!1}),o=a3,r=n.readPixels({x:0,y:0,width:o.x,height:o.y,framebuffer:i});for(let a=0;a<9;++a)e._sphericalHarmonicCoefficients[a]=u.unpack(r,a*4),u.multiplyByScalar(e._sphericalHarmonicCoefficients[a],e.atmosphereScatteringIntensity,e._sphericalHarmonicCoefficients[a]);i.destroy(),e._irradianceMapTexture.destroy(),e._irradianceMapTexture=void 0,e._shouldRegenerateShaders=!0}un.prototype.update=function(e){let t=e.mode;if(!un.isDynamicUpdateSupported(e)||!this.enabled||!this.shouldUpdate||!c(this._position)||t===Te.MORPHING){this._shouldRegenerateShaders=!1;return}un._updateCommandQueue(e);let i=e.atmosphere.dynamicLighting,o=zue(this,e)||i===Ob.SUNLIGHT&&!X.equalsEpsilon(e.time,this._lastTime,this.maximumSecondsDifference);if(this._shouldReset||o){this.reset(),this._shouldReset=!1,this._lastTime=X.clone(e.time,this._lastTime);return}if(this._radianceMapDirty&&(Yue(this,e),this._radianceMapDirty=!1),this._convolutionsCommandsDirty&&(que(this,e),this._convolutionsCommandsDirty=!1),this._irradianceCommandDirty&&(Wue(this,e),this._irradianceCommandDirty=!1),this._irradianceTextureDirty){this._shouldRegenerateShaders=!1;return}if(this._sphericalHarmonicCoefficientsDirty){Jue(this,e),this._sphericalHarmonicCoefficientsDirty=!1;return}this._shouldRegenerateShaders=!1};un.prototype.isDestroyed=function(){return!1};un.prototype.destroy=function(){let e=this._radianceMapComputeCommands.length;for(let t=0;t<e;++t)this._radianceMapComputeCommands[t]=void 0;e=this._convolutionComputeCommands.length;for(let t=0;t<e;++t)this._convolutionComputeCommands[t]=void 0;this._irradianceMapComputeCommand=void 0,e=this._radianceMapTextures.length;for(let t=0;t<e;++t)this._radianceMapTextures[t]=this._radianceMapTextures[t]&&!this._radianceMapTextures[t].isDestroyed()&&this._radianceMapTextures[t].destroy();e=this._specularMapTextures.length;for(let t=0;t<e;++t)this._specularMapTextures[t]=this._specularMapTextures[t]&&!this._specularMapTextures[t].isDestroyed()&&this._specularMapTextures[t].destroy();return this._radianceCubeMap=this._radianceCubeMap&&this._radianceCubeMap.destroy(),this._irradianceMapTexture=this._irradianceMapTexture&&!this._irradianceMapTexture.isDestroyed()&&this._irradianceMapTexture.destroy(),c(this._va)&&this._va.destroy(),c(this._convolveSP)&&this._convolveSP.destroy(),pe(this)};un.isDynamicUpdateSupported=function(e){let t=e.context;return t.halfFloatingPointTexture||t.colorBufferFloat};un.AVERAGE_EARTH_GROUND_COLOR=Object.freeze(F.fromCssColorString("#717145"));un.DEFAULT_SPHERICAL_HARMONIC_COEFFICIENTS=Object.freeze([Object.freeze(new u(.35449,.35449,.35449)),u.ZERO,u.ZERO,u.ZERO,u.ZERO,u.ZERO,u.ZERO,u.ZERO,u.ZERO]);var Um=un;var a_={HIGHLIGHT:0,REPLACE:1,MIX:2};a_.getColorBlend=function(e,t){if(e===a_.HIGHLIGHT)return 0;if(e===a_.REPLACE)return 1;if(e===a_.MIX)return w.clamp(t,w.EPSILON4,1)};var ns=Object.freeze(a_);var Kue={XTRANSLATE:"xTranslate",YTRANSLATE:"yTranslate",ZTRANSLATE:"zTranslate",XROTATE:"xRotate",YROTATE:"yRotate",ZROTATE:"zRotate",XSCALE:"xScale",YSCALE:"yScale",ZSCALE:"zScale",UNIFORMSCALE:"uniformScale"},is=Object.freeze(Kue);var Xue={STEP:0,LINEAR:1,CUBICSPLINE:2},pu=Object.freeze(Xue);var s3={};function s_(e){this._count=e.count,this._properties=Ne(e.properties,!0)}s_.prototype.hasProperty=function(e){return en.hasProperty(e,this._properties,s3)};s_.prototype.getPropertyIds=function(e){return en.getPropertyIds(this._properties,s3,e)};s_.prototype.getProperty=function(e,t){let n=this._properties[t];if(c(n))return Ne(n[e],!0)};s_.prototype.setProperty=function(e,t,n){let i=this._properties[t];c(i)||(i=new Array(this._count),this._properties[t]=i),i[e]=Ne(n,!0)};var Gm=s_;function vr(e){e=e??k.EMPTY_OBJECT,this._name=e.name,this._id=e.id,this._count=e.count,this._extras=e.extras,this._extensions=e.extensions,this._metadataTable=e.metadataTable,this._jsonMetadataTable=e.jsonMetadataTable,this._batchTableHierarchy=e.batchTableHierarchy}Object.defineProperties(vr.prototype,{name:{get:function(){return this._name}},id:{get:function(){return this._id}},count:{get:function(){return this._count}},class:{get:function(){if(c(this._metadataTable))return this._metadataTable.class}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}},byteLength:{get:function(){let e=0;return c(this._metadataTable)&&(e+=this._metadataTable.byteLength),c(this._batchTableHierarchy)&&(e+=this._batchTableHierarchy.byteLength),e}}});vr.prototype.hasProperty=function(e,t){return!!(c(this._metadataTable)&&this._metadataTable.hasProperty(t)||c(this._batchTableHierarchy)&&this._batchTableHierarchy.hasProperty(e,t)||c(this._jsonMetadataTable)&&this._jsonMetadataTable.hasProperty(t))};vr.prototype.hasPropertyBySemantic=function(e,t){return c(this._metadataTable)?this._metadataTable.hasPropertyBySemantic(t):!1};vr.prototype.propertyExists=function(e){return!!(c(this._metadataTable)&&this._metadataTable.hasProperty(e)||c(this._batchTableHierarchy)&&this._batchTableHierarchy.propertyExists(e)||c(this._jsonMetadataTable)&&this._jsonMetadataTable.hasProperty(e))};vr.prototype.propertyExistsBySemantic=function(e){return c(this._metadataTable)?this._metadataTable.hasPropertyBySemantic(e):!1};var ww=[];vr.prototype.getPropertyIds=function(e,t){if(t=c(t)?t:[],t.length=0,c(this._metadataTable)){let n=this._metadataTable.getPropertyIds(ww);Gn(t,n)}if(c(this._batchTableHierarchy)){let n=this._batchTableHierarchy.getPropertyIds(e,ww);Gn(t,n)}if(c(this._jsonMetadataTable)){let n=this._jsonMetadataTable.getPropertyIds(ww);Gn(t,n)}return t};vr.prototype.getProperty=function(e,t){let n;if(c(this._metadataTable)&&(n=this._metadataTable.getProperty(e,t),c(n))||c(this._batchTableHierarchy)&&(n=this._batchTableHierarchy.getProperty(e,t),c(n))||c(this._jsonMetadataTable)&&(n=this._jsonMetadataTable.getProperty(e,t),c(n)))return n};vr.prototype.setProperty=function(e,t,n){c(this._metadataTable)&&this._metadataTable.setProperty(e,t,n)||c(this._batchTableHierarchy)&&this._batchTableHierarchy.setProperty(e,t,n)||(c(this._jsonMetadataTable)||(this._jsonMetadataTable=new Gm({count:this._count,properties:{}})),this._jsonMetadataTable.setProperty(e,t,n))};vr.prototype.getPropertyBySemantic=function(e,t){if(c(this._metadataTable))return this._metadataTable.getPropertyBySemantic(e,t)};vr.prototype.setPropertyBySemantic=function(e,t,n){return c(this._metadataTable)?this._metadataTable.setPropertyBySemantic(e,t,n):!1};vr.prototype.getPropertyTypedArray=function(e){if(c(this._metadataTable))return this._metadataTable.getPropertyTypedArray(e)};vr.prototype.getPropertyTypedArrayBySemantic=function(e){if(c(this._metadataTable))return this._metadataTable.getPropertyTypedArrayBySemantic(e)};vr.prototype.isClass=function(e,t){let n=this._batchTableHierarchy;return c(n)?n.isClass(e,t):!1};vr.prototype.isExactClass=function(e,t){return this.getExactClassName(e)===t};vr.prototype.getExactClassName=function(e){let t=this._batchTableHierarchy;if(c(t))return t.getClassName(e)};var Js=vr;function c_(e){e=e??k.EMPTY_OBJECT;let t=e.property,n=e.classProperty,i=e.textures,o=c(t.channels)?t.channels:[0],r=t,a=Dc.createModelTextureReader({textureInfo:r,channels:ede(o),texture:i[r.index]});this._min=t.min,this._max=t.max;let s=t.offset,A=t.scale,l=n.hasValueTransform||c(s)||c(A);s=s??n.offset,A=A??n.scale,s=n.unpackVectorAndMatrixTypes(s),A=n.unpackVectorAndMatrixTypes(A),this._offset=s,this._scale=A,this._hasValueTransform=l,this._textureReader=a,this._classProperty=n,this._extras=t.extras,this._extensions=t.extensions}Object.defineProperties(c_.prototype,{textureReader:{get:function(){return this._textureReader}},hasValueTransform:{get:function(){return this._hasValueTransform}},offset:{get:function(){return this._offset}},scale:{get:function(){return this._scale}},classProperty:{get:function(){return this._classProperty}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}}});c_.prototype.isGpuCompatible=function(){let e=this._classProperty,t=e.type,n=e.componentType;return e.isArray?e.isVariableLengthArray?(jt(`Property texture property ${e.id} is a variable-length array, which is not supported`),!1):e.arrayLength>4?(jt(`Property texture property ${e.id} is an array of length ${e.arrayLength}, but may have at most a length of 4`),!1):t!==Zt.SCALAR?(jt(`Property texture property ${e.id} is an array of type ${t}, but only SCALAR is supported`),!1):n!==Xt.UINT8?(jt(`Property texture property ${e.id} is an array with component type ${n}, but only UINT8 is supported`),!1):!0:Zt.isVectorType(t)||t===Zt.SCALAR?n!==Xt.UINT8?(jt(`Property texture property ${e.id} has component type ${n}, but only UINT8 is supported`),!1):!0:(jt(`Property texture property ${e.id} has an unsupported type`),!1)};var Zue=[void 0,"float","vec2","vec3","vec4"],$ue=[void 0,"int","ivec2","ivec3","ivec4"];c_.prototype.getGlslType=function(){let e=this._classProperty,t=Zt.getComponentCount(e.type);return e.isArray&&(t=e.arrayLength),e.normalized?Zue[t]:$ue[t]};c_.prototype.unpackInShader=function(e){return this._classProperty.normalized?e:`${this.getGlslType()}(255.0 * ${e})`};function ede(e){return e.map(function(t){return"rgba".charAt(t)}).join("")}var c3=c_;function Dw(e){e=e??k.EMPTY_OBJECT;let t=e.propertyTexture,n=e.class,i=e.textures,o=t.extensions,r=t.extras,a={};if(c(t.properties))for(let s in t.properties)t.properties.hasOwnProperty(s)&&(a[s]=new c3({property:t.properties[s],classProperty:n.properties[s],textures:i}));this._name=e.name,this._id=e.id,this._class=n,this._properties=a,this._extras=r,this._extensions=o}Object.defineProperties(Dw.prototype,{name:{get:function(){return this._name}},id:{get:function(){return this._id}},class:{get:function(){return this._class}},properties:{get:function(){return this._properties}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}}});Dw.prototype.getProperty=function(e){return this._properties[e]};var zm=Dw;function A3(e){e=e??k.EMPTY_OBJECT;let t=e.property,n=e.classProperty;this._attribute=t.attribute,this._classProperty=n,this._min=t.min,this._max=t.max;let i=t.offset,o=t.scale,r=n.hasValueTransform||c(i)||c(o);i=i??n.offset,o=o??n.scale,i=n.unpackVectorAndMatrixTypes(i),o=n.unpackVectorAndMatrixTypes(o),this._offset=i,this._scale=o,this._hasValueTransform=r,this._extras=t.extras,this._extensions=t.extensions}Object.defineProperties(A3.prototype,{attribute:{get:function(){return this._attribute}},hasValueTransform:{get:function(){return this._hasValueTransform}},offset:{get:function(){return this._offset}},scale:{get:function(){return this._scale}},classProperty:{get:function(){return this._classProperty}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}}});var l3=A3;function Qw(e){e=e??k.EMPTY_OBJECT;let t=e.propertyAttribute,n=e.class,i={};if(c(t.properties))for(let o in t.properties)t.properties.hasOwnProperty(o)&&(i[o]=new l3({property:t.properties[o],classProperty:n.properties[o]}));this._name=e.name,this._id=e.id,this._class=n,this._properties=i,this._extras=t.extras,this._extensions=t.extensions}Object.defineProperties(Qw.prototype,{name:{get:function(){return this._name}},id:{get:function(){return this._id}},class:{get:function(){return this._class}},properties:{get:function(){return this._properties}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}}});Qw.prototype.getProperty=function(e){return this._properties[e]};var Lb=Qw;function A_(e){e=e??k.EMPTY_OBJECT,this._schema=e.schema;let t=e.propertyTables;this._propertyTableCount=c(t)?t.length:0,this._propertyTables=t,this._propertyTextures=e.propertyTextures,this._propertyAttributes=e.propertyAttributes,this._statistics=e.statistics,this._extras=e.extras,this._extensions=e.extensions}Object.defineProperties(A_.prototype,{schema:{get:function(){return this._schema}},statistics:{get:function(){return this._statistics}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}},propertyTableCount:{get:function(){return this._propertyTableCount}},propertyTables:{get:function(){return this._propertyTables}},propertyTextures:{get:function(){return this._propertyTextures}},propertyAttributes:{get:function(){return this._propertyAttributes}},propertyTablesByteLength:{get:function(){if(!c(this._propertyTables))return 0;let e=0,t=this._propertyTables.length;for(let n=0;n<t;n++)e+=this._propertyTables[n].byteLength;return e}}});A_.prototype.getPropertyTable=function(e){return this._propertyTables[e]};A_.prototype.getPropertyTexture=function(e){return this._propertyTextures[e]};A_.prototype.getPropertyAttribute=function(e){return this._propertyAttributes[e]};var Pr=A_;function tde(e){e=e??k.EMPTY_OBJECT;let t=e.extension,n=e.schema,i=[];if(c(t.propertyTables))for(let a=0;a<t.propertyTables.length;a++){let s=t.propertyTables[a],A=n.classes[s.class],l=new Dl({count:s.count,properties:s.properties,class:A,bufferViews:e.bufferViews});i.push(new Js({id:a,name:s.name,count:s.count,metadataTable:l,extras:s.extras,extensions:s.extensions}))}let o=[];if(c(t.propertyTextures))for(let a=0;a<t.propertyTextures.length;a++){let s=t.propertyTextures[a];o.push(new zm({id:a,name:s.name,propertyTexture:s,class:n.classes[s.class],textures:e.textures}))}let r=[];if(c(t.propertyAttributes))for(let a=0;a<t.propertyAttributes.length;a++){let s=t.propertyAttributes[a];r.push(new Lb({id:a,name:s.name,class:n.classes[s.class],propertyAttribute:s}))}return new Pr({schema:n,propertyTables:i,propertyTextures:o,propertyAttributes:r,statistics:t.statistics,extras:t.extras,extensions:t.extensions})}var f3=tde;function nde(e){e=e??k.EMPTY_OBJECT;let t=e.extension,n=e.schema,i,o=[],r;if(c(t.featureTables))for(r=Object.keys(t.featureTables).sort(),i=0;i<r.length;i++){let s=r[i],A=t.featureTables[s],l=n.classes[A.class],f=new Dl({count:A.count,properties:A.properties,class:l,bufferViews:e.bufferViews});o.push(new Js({id:s,count:A.count,metadataTable:f,extras:A.extras,extensions:A.extensions}))}let a=[];if(c(t.featureTextures))for(r=Object.keys(t.featureTextures).sort(),i=0;i<r.length;i++){let s=r[i],A=t.featureTextures[s];a.push(new zm({id:s,propertyTexture:ide(A),class:n.classes[A.class],textures:e.textures}))}return new Pr({schema:n,propertyTables:o,propertyTextures:a,statistics:t.statistics,extras:t.extras,extensions:t.extensions})}function ide(e){let t={class:e.class,properties:{}},n=e.properties;for(let i in n)if(n.hasOwnProperty(i)){let o=n[i],r={channels:ode(o.channels),extras:o.extras,extensions:o.extensions};t.properties[i]=Et(o.texture,r,!0)}return t}function ode(e){let t=e.length,n=new Array(t);for(let i=0;i<t;i++)n[i]="rgba".indexOf(e[i]);return n}var u3=nde;function gu(e){e=e??k.EMPTY_OBJECT;let{gltf:t,extension:n,extensionLegacy:i,gltfResource:o,baseResource:r,supportedImageFormats:a,frameState:s,cacheKey:A,asynchronous:l=!0}=e;this._gltfResource=o,this._baseResource=r,this._gltf=t,this._extension=n,this._extensionLegacy=i,this._supportedImageFormats=a,this._frameState=s,this._cacheKey=A,this._asynchronous=l,this._bufferViewLoaders=[],this._bufferViewIds=[],this._textureLoaders=[],this._textureIds=[],this._schemaLoader=void 0,this._structuralMetadata=void 0,this._state=Fe.UNLOADED,this._promise=void 0}c(Object.create)&&(gu.prototype=Object.create(zn.prototype),gu.prototype.constructor=gu);Object.defineProperties(gu.prototype,{cacheKey:{get:function(){return this._cacheKey}},structuralMetadata:{get:function(){return this._structuralMetadata}}});async function rde(e){try{let t=lde(e),n=mde(e),i=pde(e);return await Promise.all([t,n,i]),e.isDestroyed()?void 0:(e._gltf=void 0,e._state=Fe.LOADED,e)}catch(t){if(e.isDestroyed())return;throw e.unload(),e._state=Fe.FAILED,e.getError("Failed to load structural metadata",t)}}gu.prototype.load=function(){return c(this._promise)?this._promise:(this._state=Fe.LOADING,this._promise=rde(this),this._promise)};function ade(e,t){for(let n in e)if(e.hasOwnProperty(n)){let i=e[n],o=i.values,r=i.arrayOffsets,a=i.stringOffsets;c(o)&&(t[o]=!0),c(r)&&(t[r]=!0),c(a)&&(t[a]=!0)}}function sde(e,t){for(let n in e)if(e.hasOwnProperty(n)){let i=e[n],o=i.bufferView,r=i.arrayOffsetBufferView,a=i.stringOffsetBufferView;c(o)&&(t[o]=!0),c(r)&&(t[r]=!0),c(a)&&(t[a]=!0)}}function cde(e){let t=e.propertyTables,n={};if(c(t))for(let i=0;i<t.length;i++){let o=t[i];ade(o.properties,n)}return n}function Ade(e){let t=e.featureTables,n={};if(c(t)){for(let i in t)if(t.hasOwnProperty(i)){let r=t[i].properties;c(r)&&sde(r,n)}}return n}async function lde(e){let t;c(e._extension)?t=cde(e._extension):t=Ade(e._extensionLegacy);let n=[];for(let i in t)if(t.hasOwnProperty(i)){let o=di.getBufferViewLoader({gltf:e._gltf,bufferViewId:parseInt(i),gltfResource:e._gltfResource,baseResource:e._baseResource});e._bufferViewLoaders.push(o),e._bufferViewIds.push(i),n.push(o.load())}return Promise.all(n)}function fde(e){let t={},n=e.propertyTextures;if(c(n))for(let i=0;i<n.length;i++){let r=n[i].properties;c(r)&&ude(r,t)}return t}function ude(e,t){for(let n in e)if(e.hasOwnProperty(n)){let i=e[n];t[i.index]=i}}function dde(e){let t={},n=e.featureTextures;if(c(n)){for(let i in n)if(n.hasOwnProperty(i)){let r=n[i].properties;c(r)&&hde(r,t)}}return t}function hde(e,t){for(let n in e)if(e.hasOwnProperty(n)){let o=e[n].texture;t[o.index]=o}}function mde(e){let t;c(e._extension)?t=fde(e._extension):t=dde(e._extensionLegacy);let n=e._gltf,i=e._gltfResource,o=e._baseResource,r=e._supportedImageFormats,a=e._frameState,s=e._asynchronous,A=[];for(let l in t)if(t.hasOwnProperty(l)){let f=di.getTextureLoader({gltf:n,textureInfo:t[l],gltfResource:i,baseResource:o,supportedImageFormats:r,frameState:a,asynchronous:s});e._textureLoaders.push(f),e._textureIds.push(l),A.push(f.load())}return Promise.all(A)}async function pde(e){let t=e._extension??e._extensionLegacy,n;if(c(t.schemaUri)){let i=e._baseResource.getDerivedResource({url:t.schemaUri});n=di.getSchemaLoader({resource:i})}else n=di.getSchemaLoader({schema:t.schema});if(e._schemaLoader=n,await n.load(),!n.isDestroyed())return n.schema}gu.prototype.process=function(e){if(this._state===Fe.READY)return!0;if(this._state!==Fe.LOADED)return!1;let t=this._textureLoaders,n=t.length,i=!0;for(let s=0;s<n;++s){let l=t[s].process(e);i=i&&l}if(!i)return!1;let o=this._schemaLoader.schema,r={};for(let s=0;s<this._bufferViewIds.length;++s){let A=this._bufferViewIds[s],l=this._bufferViewLoaders[s];if(!l.isDestroyed()){let f=new Uint8Array(l.typedArray);r[A]=f}}let a={};for(let s=0;s<this._textureIds.length;++s){let A=this._textureIds[s],l=t[s];l.isDestroyed()||(a[A]=l.texture)}return c(this._extension)?this._structuralMetadata=f3({extension:this._extension,schema:o,bufferViews:r,textures:a}):this._structuralMetadata=u3({extension:this._extensionLegacy,schema:o,bufferViews:r,textures:a}),d3(this),this._state=Fe.READY,!0};function d3(e){let t=e._bufferViewLoaders,n=t.length;for(let i=0;i<n;++i)di.unload(t[i]);e._bufferViewLoaders.length=0,e._bufferViewIds.length=0}function gde(e){let t=e._textureLoaders,n=t.length;for(let i=0;i<n;++i)di.unload(t[i]);e._textureLoaders.length=0,e._textureIds.length=0}gu.prototype.unload=function(){d3(this),gde(this),c(this._schemaLoader)&&di.unload(this._schemaLoader),this._schemaLoader=void 0,this._structuralMetadata=void 0};var h3=gu;var Hm={TRANSLATION:"TRANSLATION",ROTATION:"ROTATION",SCALE:"SCALE",FEATURE_ID:"_FEATURE_ID"};Hm.fromGltfSemantic=function(e){let t=e,i=/^(\w+)_\d+$/.exec(e);switch(i!==null&&(t=i[1]),t){case"TRANSLATION":return Hm.TRANSLATION;case"ROTATION":return Hm.ROTATION;case"SCALE":return Hm.SCALE;case"_FEATURE_ID":return Hm.FEATURE_ID}};var zo=Object.freeze(Hm);var Cde=65534,_de=255;function Nb(e){e=e??k.EMPTY_OBJECT;let t=e.triangleIndices,n=e.outlineIndices,i=e.originalVertexCount;this._triangleIndices=t,this._originalVertexCount=i,this._edges=new g3(n,i),this._outlineCoordinatesTypedArray=void 0,this._extraVertices=[],Ede(this)}Object.defineProperties(Nb.prototype,{updatedTriangleIndices:{get:function(){return this._triangleIndices}},outlineCoordinates:{get:function(){return this._outlineCoordinatesTypedArray}}});function Ede(e){let t=e._triangleIndices,n=e._edges,i=[],o=e._extraVertices,r=e._originalVertexCount,a={};for(let s=0;s<t.length;s+=3){let A=t[s],l=t[s+1],f=t[s+2],h=!1,m=h||n.hasEdge(A,l),p=h||n.hasEdge(l,f),g=h||n.hasEdge(f,A),C=m3(i,A,l,f,m,p,g);for(;c(C);){let _=a[C];if(!c(_)){_=r+o.length;let E=C;for(;E>=r;)E=o[E-r];o.push(E),a[C]=_}_>Cde&&(t instanceof Uint16Array||t instanceof Uint8Array)?t=new Uint32Array(t):_>_de&&t instanceof Uint8Array&&(t=new Uint16Array(t)),C===A?(A=_,t[s]=_):C===l?(l=_,t[s+1]=_):(f=_,t[s+2]=_),C=m3(i,A,l,f,m,p,g)}}e._triangleIndices=t,e._outlineCoordinatesTypedArray=new Float32Array(i)}function m3(e,t,n,i,o,r,a){let s=a?1:0,A=o?1:0,l=0,f=Rw(e,t,s,A,l);if(f===0)return t;let h=0,m=o?1:0,p=r?1:0,g=Rw(e,n,h,m,p);if(g===0)return n;let C=a?1:0,_=0,E=r?1:0,I=Rw(e,i,C,_,E);if(I===0)return i;let y=f&g&I,b,x,S;if(y&1)b=0,x=1,S=2;else if(y&2)b=0,S=1,x=2;else if(y&4)x=0,b=1,S=2;else if(y&8)x=0,S=1,b=2;else if(y&16)S=0,b=1,x=2;else if(y&32)S=0,x=1,b=2;else{let v=vw(f),d=vw(g),B=vw(I);return v<d&&v<B?t:d<B?n:i}let P=t*3;e[P+b]=s,e[P+x]=A,e[P+S]=l;let D=n*3;e[D+b]=h,e[D+x]=m,e[D+S]=p;let Q=i*3;e[Q+b]=C,e[Q+x]=_,e[Q+S]=E}function Rw(e,t,n,i,o){let r=t*3,a=e[r],s=e[r+1],A=e[r+2];return c(a)?(a===n&&s===i&&A===o)<<0|(a===n&&s===o&&A===i)<<1|(a===i&&s===n&&A===o)<<2|(a===i&&s===o&&A===n)<<3|(a===o&&s===n&&A===i)<<4|(a===o&&s===i&&A===n)<<5:63}function vw(e){return(e&1)+(e>>1&1)+(e>>2&1)+(e>>3&1)+(e>>4&1)+(e>>5&1)}Nb.prototype.updateAttribute=function(e){let t=this._extraVertices,n=e.length,i=n/this._originalVertexCount,o=t.length,r=e.constructor,a=new r(e.length+o*i);a.set(e);for(let s=0;s<o;s++){let A=t[s]*i,l=n+s*i;for(let f=0;f<i;f++)a[l+f]=a[A+f]}return a};Nb.createTexture=function(e){let t=e.cache.modelOutliningCache;if(c(t)||(t=e.cache.modelOutliningCache={}),c(t.outlineTexture))return t.outlineTexture;let n=Math.min(4096,pn.maximumTextureSize),i=n,o=p3(i),r=[];for(;i>1;)i>>=1,r.push(p3(i));let a=new gn({context:e,source:{arrayBufferView:o,mipLevels:r},width:n,height:1,pixelFormat:Bt.LUMINANCE,sampler:new dn({wrapS:mi.CLAMP_TO_EDGE,wrapT:mi.CLAMP_TO_EDGE,minificationFilter:tn.LINEAR_MIPMAP_LINEAR,magnificationFilter:bo.LINEAR})});return t.outlineTexture=a,a};function p3(e){let t=new Uint8Array(e);return t[e-1]=192,e===8?t[e-1]=96:e===4?t[e-1]=48:e===2?t[e-1]=24:e===1&&(t[e-1]=12),t}function g3(e,t){this._originalVertexCount=t,this._edges=new Set;for(let n=0;n<e.length;n+=2){let i=e[n],o=e[n+1],r=Math.min(i,o),a=Math.max(i,o),s=r*this._originalVertexCount+a;this._edges.add(s)}}g3.prototype.hasEdge=function(e,t){let n=Math.min(e,t),i=Math.max(e,t),o=n*this._originalVertexCount+i;return this._edges.has(o)};var Fb=Nb;function C3(e){this.attribute=e,this.loadBuffer=!1,this.loadTypedArray=!1}function Ide(e){this.indices=e,this.loadBuffer=!1,this.loadTypedArray=!1}function kb(e){this.primitive=e,this.attributePlans=[],this.indicesPlan=void 0,this.needsOutlines=!1,this.outlineIndices=void 0,this.needsGaussianSplats=!1}kb.prototype.postProcess=function(e){this.needsOutlines&&(yde(this),xde(this,e)),this.needsGaussianSplats&&Bde(this,e)};function yde(e){let t=e.primitive,n=t.indices,i=t.attributes[0].count,o=new Fb({triangleIndices:n.typedArray,outlineIndices:e.outlineIndices,originalVertexCount:i});n.typedArray=o.updatedTriangleIndices,n.indexDatatype=Be.fromTypedArray(n.typedArray);let r=bde(o.outlineCoordinates),a=new C3(r);a.loadBuffer=!0,a.loadTypedArray=!1,e.attributePlans.push(a),t.outlineCoordinates=a.attribute;let s=e.attributePlans,A=e.attributePlans.length;for(let l=0;l<A;l++){let f=s[l].attribute;f.typedArray=o.updateAttribute(f.typedArray)}}function bde(e){let t=new Lt.Attribute;return t.name="_OUTLINE_COORDINATES",t.typedArray=e,t.componentDatatype=N.FLOAT,t.type=st.VEC3,t.normalized=!1,t.count=e.length/3,t}function Bde(e,t){let n=e.attributePlans,i=n.length;for(let o=0;o<i;o++){let r=n[o];r.loadBuffer=!1,r.loadTypedArray=!0}}function xde(e,t){Tde(e.attributePlans,t),c(e.indicesPlan)&&Sde(e.indicesPlan,t)}function Tde(e,t){let n=e.length;for(let i=0;i<n;i++){let o=e[i],r=o.attribute,a=r.typedArray;if(o.loadBuffer){let s=dt.createVertexBuffer({typedArray:a,context:t,usage:Me.STATIC_DRAW});s.vertexArrayDestroyable=!1,r.buffer=s}o.loadTypedArray||(r.typedArray=void 0)}}function Sde(e,t){let n=e.indices;if(e.loadBuffer){let i=dt.createIndexBuffer({typedArray:n.typedArray,context:t,usage:Me.STATIC_DRAW,indexDatatype:n.indexDatatype});n.buffer=i,i.vertexArrayDestroyable=!1}e.loadTypedArray||(n.typedArray=void 0)}kb.AttributeLoadPlan=C3;kb.IndicesLoadPlan=Ide;var Ub=kb;function wde(e){e=e??k.EMPTY_OBJECT,this.webp=e.webp??!1,this.basis=e.basis??!1}var _3=wde;function E3(e){this._position=e.position,this._adjustmentParams=e.adjustmentParams}Object.defineProperties(E3.prototype,{position:{get:function(){return this._position}},adjustmentParams:{get:function(){return this._adjustmentParams}}});var I3=E3;function y3(e){this._position=e.position,this._adjustmentParams=e.adjustmentParams,this._covarianceMatrix=e.covarianceMatrix}Object.defineProperties(y3.prototype,{position:{get:function(){return this._position}},adjustmentParams:{get:function(){return this._adjustmentParams}},covarianceMatrix:{get:function(){return this._covarianceMatrix}}});var b3=y3;function B3(e){this._groupFlags=e.groupFlags,this._rotationThetas=e.rotationThetas,this._params=e.params}Object.defineProperties(B3.prototype,{groupFlags:{get:function(){return this._groupFlags}},rotationThetas:{get:function(){return this._rotationThetas}},params:{get:function(){return this._params}}});var x3=B3;var Dde={Direct:"Direct",Indirect:"Indirect"},l_=Object.freeze(Dde);function T3(e){this._storageType=e.storageType,this._anchorPointsIndirect=e.anchorPointsIndirect,this._anchorPointsDirect=e.anchorPointsDirect,this._intraTileCorrelationGroups=e.intraTileCorrelationGroups,this._covarianceDirect=e.covarianceDirect}Object.defineProperties(T3.prototype,{storageType:{get:function(){return this._storageType}},anchorPointsIndirect:{get:function(){return this._anchorPointsIndirect}},anchorPointsDirect:{get:function(){return this._anchorPointsDirect}},intraTileCorrelationGroups:{get:function(){return this._intraTileCorrelationGroups}},covarianceDirect:{get:function(){return this._covarianceDirect}}});var Pw=T3;function S3(e){this._A=e.A,this._alpha=e.alpha,this._beta=e.beta,this._T=e.T}Object.defineProperties(S3.prototype,{A:{get:function(){return this._A}},alpha:{get:function(){return this._alpha}},beta:{get:function(){return this._beta}},T:{get:function(){return this._T}}});var w3=S3;function Vm(){}function D3(e){return new J(e[0],e[1],e[3],e[1],e[2],e[4],e[3],e[4],e[5])}function Qde(e){let t=u.fromArray(e.position,0,new u),n=u.fromArray(e.adjustmentParams,0,new u);return new I3({position:t,adjustmentParams:n})}function Rde(e){let t=u.fromArray(e.position,0,new u),n=u.fromArray(e.adjustmentParams,0,new u),i=D3(e.covarianceMatrix);return new b3({position:t,adjustmentParams:n,covarianceMatrix:i})}function vde(e){let t=e.groupFlags,n=u.fromArray(e.rotationThetas,0,new u),i=[];for(let r of e.params){let a=new w3({A:r.A,alpha:r.alpha,beta:r.beta,T:r.T});i.push(a)}return new x3({groupFlags:t,rotationThetas:n,params:i})}Vm.load=function(e){let t=e.storageType;if(t===l_.Direct)return Vm.loadDirect(e);if(t===l_.Indirect)return Vm.loadIndirect(e);throw new oe(`Invalid storage type in NGA_gpm_local - expected 'Direct' or 'Indirect', but found ${t}`)};Vm.loadDirect=function(e){let t=[],n=e.anchorPointsDirect;for(let r of n){let a=Qde(r);t.push(a)}let i=D3(e.covarianceDirectUpperTriangle);return new Pw({storageType:l_.Direct,anchorPointsDirect:t,covarianceDirect:i})};Vm.loadIndirect=function(e){let t=[],n=e.anchorPointsIndirect;for(let a of n){let s=Rde(a);t.push(s)}let i=e.intraTileCorrelationGroups,o=[];for(let a of i){let s=vde(a);o.push(s)}return new Pw({storageType:l_.Indirect,anchorPointsIndirect:t,intraTileCorrelationGroups:o})};var Q3=Vm;function R3(e){this._traits=e.traits,this._noData=e.noData,this._offset=e.offset,this._scale=e.scale,this._index=e.index,this._texCoord=e.texCoord}Object.defineProperties(R3.prototype,{traits:{get:function(){return this._traits}},noData:{get:function(){return this._noData}},offset:{get:function(){return this._offset}},scale:{get:function(){return this._scale}},index:{get:function(){return this._index}},texCoord:{get:function(){return this._texCoord}}});var v3=R3;function P3(e){this._min=e.min,this._max=e.max,this._source=e.source}Object.defineProperties(P3.prototype,{min:{get:function(){return this._min}},max:{get:function(){return this._max}},source:{get:function(){return this._source}}});var M3=P3;function O3(e){this._ppeTextures=e}Object.defineProperties(O3.prototype,{ppeTextures:{get:function(){return this._ppeTextures}}});var L3=O3;function Hi(e){e=e??k.EMPTY_OBJECT;let t=e.gltf,n=e.extension,i=e.gltfResource,o=e.baseResource,r=e.supportedImageFormats,a=e.frameState,s=e.cacheKey,A=e.asynchronous??!0;this._gltfResource=i,this._baseResource=o,this._gltf=t,this._extension=n,this._supportedImageFormats=r,this._frameState=a,this._cacheKey=s,this._asynchronous=A,this._textureLoaders=[],this._textureIds=[],this._meshPrimitiveGpmLocal=void 0,this._structuralMetadata=void 0,this._state=Fe.UNLOADED,this._promise=void 0}c(Object.create)&&(Hi.prototype=Object.create(zn.prototype),Hi.prototype.constructor=Hi);Object.defineProperties(Hi.prototype,{cacheKey:{get:function(){return this._cacheKey}},meshPrimitiveGpmLocal:{get:function(){return this._meshPrimitiveGpmLocal}},structuralMetadata:{get:function(){return this._structuralMetadata}}});Hi.prototype._loadResources=async function(){try{return await this._loadTextures(),this.isDestroyed()?void 0:(this._gltf=void 0,this._state=Fe.LOADED,this)}catch(e){if(this.isDestroyed())return;throw this.unload(),this._state=Fe.FAILED,this.getError("Failed to load GPM data",e)}};Hi.prototype.load=function(){return c(this._promise)?this._promise:(this._state=Fe.LOADING,this._promise=this._loadResources(this),this._promise)};function Pde(e){let t={},n=e.ppeTextures;if(c(n))for(let i=0;i<n.length;i++){let o=n[i];t[o.index]=o}return t}Hi.prototype._loadTextures=function(){let e;c(this._extension)&&(e=Pde(this._extension));let t=this._gltf,n=this._gltfResource,i=this._baseResource,o=this._supportedImageFormats,r=this._frameState,a=this._asynchronous,s=[];for(let A in e)if(e.hasOwnProperty(A)){let l=di.getTextureLoader({gltf:t,textureInfo:e[A],gltfResource:n,baseResource:i,supportedImageFormats:o,frameState:r,asynchronous:a});this._textureLoaders.push(l),this._textureIds.push(A),s.push(l.load())}return Promise.all(s)};Hi.ppeTexturesMetadataSchemaCache=new Map;Hi._createPpeTextureClassJson=function(e,t){let n=e.traits,i=n.source,o=e.offset??0,r=(e.scale??1)*255;return{name:`PPE texture class ${t}`,properties:{[i]:{name:"PPE",type:"SCALAR",componentType:"UINT8",normalized:!0,offset:o,scale:r,min:n.min,max:n.max}}}};Hi._obtainPpeTexturesMetadataSchema=function(e){let n=Hi._collectPpeTexturePropertyIdentifiers(e).toString(),i=Hi.ppeTexturesMetadataSchemaCache.get(n);if(c(i))return i;let r={id:`PPE_TEXTURE_SCHEMA_${Hi.ppeTexturesMetadataSchemaCache.size}`,classes:{}},a=e.ppeTextures;for(let s=0;s<a.length;s++){let A=a[s],l=`ppeTexture_${s}`,f=Hi._createPpeTextureClassJson(A,s);r.classes[l]=f}return i=RA.fromJson(r),Hi.ppeTexturesMetadataSchemaCache.set(n,i),i};Hi._collectPpeTexturePropertyIdentifiers=function(e){let t=[],n=e.ppeTextures;for(let i=0;i<n.length;i++){let o=n[i],r=Hi._createPpeTextureClassJson(o,i),a=JSON.stringify(r);t.push(a)}return t};Hi._convertToStructuralMetadata=function(e,t){let n=[],i=Hi._obtainPpeTexturesMetadataSchema(e),o=e.ppeTextures;for(let a=0;a<o.length;a++){let s=o[a],A=`ppeTexture_${a}`,f=s.traits.source,h=i.classes[A],m={class:A,properties:{[f]:{index:s.index,texCoord:s.texCoord}}};n.push(new zm({id:a,name:s.name,propertyTexture:m,class:h,textures:t}))}return new Pr({schema:i,propertyTables:[],propertyTextures:n,propertyAttributes:[]})};Hi.prototype.process=function(e){if(this._state===Fe.READY)return!0;if(this._state!==Fe.LOADED)return!1;let t=this._textureLoaders,n=t.length,i=!0;for(let l=0;l<n;++l){let h=t[l].process(e);i=i&&h}if(!i)return!1;let o={};for(let l=0;l<this._textureIds.length;++l){let f=this._textureIds[l],h=t[l];h.isDestroyed()||(o[f]=h.texture)}let r=[],a=this._extension;if(c(a.ppeTextures)){let l=a.ppeTextures;for(let f of l){let h=f.traits,m=new M3({min:h.min,max:h.max,source:h.source}),p=new v3({traits:m,noData:f.noData,offset:f.offset,scale:f.scale,index:f.index,texCoord:f.texCoord});r.push(p)}}let s=new L3(r);this._meshPrimitiveGpmLocal=s;let A=Hi._convertToStructuralMetadata(s,o);return this._structuralMetadata=A,this._state=Fe.READY,!0};Hi.prototype._unloadTextures=function(){let e=this._textureLoaders,t=e.length;for(let n=0;n<t;++n)di.unload(e[n]);this._textureLoaders.length=0,this._textureIds.length=0};Hi.prototype.unload=function(){this._unloadTextures(),this._gltf=void 0,this._extension=void 0,this._structuralMetadata=void 0};var N3=Hi;function Mde(e){let n=(e.extensions??k.EMPTY_OBJECT).EXT_mesh_primitive_restart,i=e.primitives;if(!c(n))return i;let o=[];Gn(o,i);for(let r of n.primitiveGroups){let a=r.primitives[0];if(!c(a)||!i[a])return i;let s={...i[a],indices:r.indices};switch(s.mode){case V.TRIANGLE_FAN:case V.TRIANGLE_STRIP:case V.LINE_STRIP:case V.LINE_LOOP:break;default:return i}for(let A of r.primitives){let l=o[A];if(!c(l?.indices)||l.mode!==s.mode)return i;o[A]=void 0}o[a]=s}return o.filter(c)}var F3=Mde;var{Attribute:Ode,Indices:Lde,FeatureIdAttribute:k3,FeatureIdTexture:U3,FeatureIdImplicitRange:G3,MorphTarget:Nde,Primitive:Fde,Instances:kde,Skin:Ude,Node:Gde,AnimatedPropertyType:zde,AnimationSampler:Hde,AnimationTarget:Vde,AnimationChannel:jde,Animation:Yde,ArticulationStage:qde,Articulation:Wde,Asset:Jde,Scene:Kde,Components:Xde,MetallicRoughness:Zde,SpecularGlossiness:$de,Specular:ehe,Anisotropy:Mw,Clearcoat:Ow,Material:the}=Lt,Ci={NOT_LOADED:0,LOADING:1,LOADED:2,PROCESSING:3,POST_PROCESSING:4,PROCESSED:5,READY:6,FAILED:7,UNLOADED:8};function vc(e){e=e??k.EMPTY_OBJECT;let{gltfResource:t,typedArray:n,releaseGltfJson:i=!1,asynchronous:o=!0,incrementallyLoadTextures:r=!0,upAxis:a=fi.Y,forwardAxis:s=fi.Z,loadAttributesAsTypedArray:A=!1,loadAttributesFor2D:l=!1,enablePick:f=!1,loadIndicesForWireframe:h=!1,loadPrimitiveOutline:m=!0,loadForClassification:p=!1,renameBatchIdSemantic:g=!1}=e,{baseResource:C=t.clone()}=e;this._gltfJson=e.gltfJson,this._gltfResource=t,this._baseResource=C,this._typedArray=n,this._releaseGltfJson=i,this._asynchronous=o,this._incrementallyLoadTextures=r,this._upAxis=a,this._forwardAxis=s,this._loadAttributesAsTypedArray=A,this._loadAttributesFor2D=l,this._enablePick=f,this._loadIndicesForWireframe=h,this._loadPrimitiveOutline=m,this._loadForClassification=p,this._renameBatchIdSemantic=g,this._sortedPropertyTableIds=void 0,this._sortedFeatureTextureIds=void 0,this._gltfJsonLoader=void 0,this._state=Ci.NOT_LOADED,this._textureState=Ci.NOT_LOADED,this._promise=void 0,this._processError=void 0,this._textureErrors=[],this._primitiveLoadPlans=[],this._loaderPromises=[],this._textureLoaders=[],this._texturesPromises=[],this._textureCallbacks=[],this._bufferViewLoaders=[],this._geometryLoaders=[],this._geometryCallbacks=[],this._structuralMetadataLoader=void 0,this._meshPrimitiveGpmLoader=void 0,this._loadResourcesPromise=void 0,this._resourcesLoaded=!1,this._texturesLoaded=!1,this._supportedImageFormats=void 0,this._postProcessBuffers=[],this._components=void 0}c(Object.create)&&(vc.prototype=Object.create(zn.prototype),vc.prototype.constructor=vc);Object.defineProperties(vc.prototype,{cacheKey:{get:function(){}},components:{get:function(){return this._components}},gltfJson:{get:function(){return c(this._gltfJsonLoader)?this._gltfJsonLoader.gltf:this._gltfJson}},incrementallyLoadTextures:{get:function(){return this._incrementallyLoadTextures}},texturesLoaded:{get:function(){return this._texturesLoaded}}});async function nhe(e){e._state=Ci.LOADING,e._textureState=Ci.LOADING;try{let t=di.getGltfJsonLoader({gltfResource:e._gltfResource,baseResource:e._baseResource,typedArray:e._typedArray,gltfJson:e._gltfJson});return e._gltfJsonLoader=t,await t.load(),e.isDestroyed()||e.isUnloaded()||t.isDestroyed()?void 0:(e._state=Ci.LOADED,e._textureState=Ci.LOADED,e)}catch(t){if(e.isDestroyed())return;e._state=Ci.FAILED,e._textureState=Ci.FAILED,Gb(e,t)}}async function ihe(e,t){$t.supportsWebP.initialized||await $t.supportsWebP.initialize(),e._supportedImageFormats=new _3({webp:$t.supportsWebP(),basis:t.context.supportsBasis});let n=cme(e,t);return e._state=Ci.PROCESSING,e._textureState=Ci.PROCESSING,c(e._gltfJsonLoader)&&e._releaseGltfJson&&(di.unload(e._gltfJsonLoader),e._gltfJsonLoader=void 0),n}vc.prototype.load=async function(){return c(this._promise)?this._promise:(this._promise=nhe(this),this._promise)};function Gb(e,t){throw e.unload(),e.getError("Failed to load glTF",t)}function ohe(e,t){let n=!0,i=e._geometryLoaders;for(let a=0;a<i.length;++a){let s=i[a].process(t);s&&c(e._geometryCallbacks[a])&&(e._geometryCallbacks[a](),e._geometryCallbacks[a]=void 0),n=n&&s}let o=e._structuralMetadataLoader;if(c(o)){let a=o.process(t);a&&(e._components.structuralMetadata=o.structuralMetadata),n=n&&a}let r=e._meshPrimitiveGpmLoader;if(c(r)){let a=r.process(t);a&&(c(e._components.structuralMetadata)&&jt("structural-metadata-gpm","The model defines both the 'EXT_structural_metadata' extension and the 'NGA_gpm_local' extension. The data from the 'EXT_structural_metadata' extension will be replaced with the data from the 'NGA_gpm_local' extension, and will no longer be available for styling and picking."),e._components.structuralMetadata=r.structuralMetadata),n=n&&a}n&&(e._state=Ci.POST_PROCESSING)}function rhe(e,t){let n=e._primitiveLoadPlans;for(let i=0;i<n.length;i++){let o=n[i];o.postProcess(t),(o.needsOutlines||o.needsGaussianSplats)&&ahe(e,o)}}function ahe(e,t){let n=e._postProcessBuffers,i=t.primitive,o=i.outlineCoordinates;c(o)&&n.push(o.buffer);let r=i.attributes;for(let s=0;s<r.length;s++){let A=r[s];c(A.buffer)&&n.push(A.buffer)}let a=i.indices;c(a)&&c(a.buffer)&&n.push(a.buffer)}vc.prototype._process=function(e){return this._state===Ci.READY?!0:(this._state===Ci.PROCESSING&&ohe(this,e),this._resourcesLoaded&&this._state===Ci.POST_PROCESSING&&(rhe(this,e.context),this._state=Ci.PROCESSED),this._resourcesLoaded&&this._state===Ci.PROCESSED?(K3(this),this._typedArray=void 0,this._state=Ci.READY,!0):!1)};vc.prototype._processTextures=function(e){if(this._textureState===Ci.READY)return!0;if(this._textureState!==Ci.PROCESSING)return!1;let t=!0,n=this._textureLoaders;for(let i=0;i<n.length;++i){let o=n[i].process(e);o&&c(this._textureCallbacks[i])&&(this._textureCallbacks[i](),this._textureCallbacks[i]=void 0),t=t&&o}return t?(this._textureState=Ci.READY,this._texturesLoaded=!0,!0):!1};vc.prototype.process=function(e){if(this._state===Ci.LOADED&&!c(this._loadResourcesPromise)&&(this._loadResourcesPromise=ihe(this,e).then(()=>{this._resourcesLoaded=!0}).catch(o=>{this._processError=o})),c(this._processError)){this._state=Ci.FAILED;let o=this._processError;this._processError=void 0,Gb(this,o)}let t=this._textureErrors.pop();if(c(t)){let o=this.getError("Failed to load glTF texture",t);throw o.name="TextureError",o}if(this._state===Ci.FAILED)return!1;let n=!1;try{n=this._process(e)}catch(o){this._state=Ci.FAILED,Gb(this,o)}let i=!1;try{i=this._processTextures(e)}catch(o){this._textureState=Ci.FAILED,Gb(this,o)}return this._incrementallyLoadTextures?n:n&&i};function she(e,t,n,i,o,r,a,s,A){let l=e.gltfJson,h=l.accessors[t].bufferView;return di.getVertexBufferLoader({gltf:l,gltfResource:e._gltfResource,baseResource:e._baseResource,frameState:A,bufferViewId:h,primitive:i,draco:o,spz:r,attributeSemantic:n,accessorId:t,asynchronous:e._asynchronous,loadBuffer:a,loadTypedArray:s})}function che(e,t,n,i,o,r,a){return di.getIndexBufferLoader({gltf:e.gltfJson,accessorId:t,gltfResource:e._gltfResource,baseResource:e._baseResource,frameState:a,primitive:n,draco:i,asynchronous:e._asynchronous,loadBuffer:o,loadTypedArray:r})}function Ahe(e,t){let n=di.getBufferViewLoader({gltf:e.gltfJson,bufferViewId:t,gltfResource:e._gltfResource,baseResource:e._baseResource});return e._bufferViewLoaders.push(n),n}function z3(e,t,n){let i=t.byteOffset,o=wc(e,t),r=t.count,a=wA(t.type),s=t.componentType,A=N.getSizeInBytes(s),l=A*a,f=r*a;if(o===l)return n=new Uint8Array(n),N.createArrayBufferView(s,n.buffer,n.byteOffset+i,f);let h=N.createTypedArray(s,f),m=new DataView(n.buffer),p=new Array(a),g=Dm(t.componentType);i=n.byteOffset+i;for(let C=0;C<r;++C){g(m,i,a,A,p);for(let _=0;_<a;++_)h[C*a+_]=p[_];i+=o}return h}function lhe(e,t){let n=e.type;if(n===st.SCALAR)return t.fill(0);let i=st.getMathType(n);return t.fill(i.clone(i.ZERO))}function fhe(e,t,n,i){let o=e.type,r=e.count;if(o===st.SCALAR)for(let a=0;a<r;a++)n[a]=t[a];else if(o===st.VEC4&&i)for(let a=0;a<r;a++)n[a]=qe.unpack(t,a*4);else{let a=st.getMathType(o),s=st.getNumberOfComponents(o);for(let A=0;A<r;A++)n[A]=a.unpack(t,A*s)}return n}async function uhe(e,t,n,i,o){let{gltfJson:r}=e;if(await t.load(),e.isDestroyed())return;let a=z3(r,n,t.typedArray);i=i??!1,fhe(n,a,o,i)}function zb(e,t,n){let i=new Array(t.count),o=t.bufferView;if(c(o)){let r=Ahe(e,o),a=uhe(e,r,t,n,i);return e._loaderPromises.push(a),i}return lhe(t,i)}function os(e,t){if(c(t))return e===Number?t[0]:e.unpack(t)}function dhe(e){return e===Number?0:new e}function hhe(e){switch(e){case N.BYTE:return 127;case N.UNSIGNED_BYTE:return 255;case N.SHORT:return 32767;case N.UNSIGNED_SHORT:return 65535;default:return 1}}var mhe={VEC2:new U(-1,-1),VEC3:new u(-1,-1,-1),VEC4:new se(-1,-1,-1,-1)};function phe(e,t){let n=hhe(e.componentDatatype),i=mhe[e.type],o=e.min;c(o)&&(o=t.divideByScalar(o,n,o),o=t.maximumByComponent(o,i,o));let r=e.max;c(r)&&(r=t.divideByScalar(r,n,r),r=t.maximumByComponent(r,i,r)),e.min=o,e.max=r}function ghe(e,t,n){let i=e.decodeMatrix,o=os(n,e.decodedMin),r=os(n,e.decodedMax);c(o)&&c(r)&&(t.min=o,t.max=r);let a=new Lt.Quantization;a.componentDatatype=t.componentDatatype,a.type=t.type,i.length===4?(a.quantizedVolumeOffset=i[2],a.quantizedVolumeStepSize=i[0]):i.length===9?(a.quantizedVolumeOffset=new U(i[6],i[7]),a.quantizedVolumeStepSize=new U(i[0],i[4])):i.length===16?(a.quantizedVolumeOffset=new u(i[12],i[13],i[14]),a.quantizedVolumeStepSize=new u(i[0],i[5],i[10])):i.length===25&&(a.quantizedVolumeOffset=new se(i[20],i[21],i[22],i[23]),a.quantizedVolumeStepSize=new se(i[0],i[6],i[12],i[18])),t.quantization=a}function Che(e,t,n,i,o){let r=e.accessors[t],a=st.getMathType(r.type),s=r.normalized??!1,A=new Ode;A.name=n,A.semantic=i,A.setIndex=o,A.constant=dhe(a),A.componentDatatype=r.componentType,A.normalized=s,A.count=r.count,A.type=r.type,A.min=os(a,r.min),A.max=os(a,r.max),A.byteOffset=r.byteOffset,A.byteStride=wc(e,r),Wn(r,"WEB3D_quantized_attributes")&&ghe(r.extensions.WEB3D_quantized_attributes,A,a);let l=A.semantic===Pe.POSITION||A.semantic===Pe.NORMAL||A.semantic===Pe.TANGENT||A.semantic===Pe.TEXCOORD||A.semantic===Pe.FEATURE_ID||A.semantic===Pe.SCALE||A.semantic===Pe.ROTATION;return e.extensionsRequired?.includes("KHR_mesh_quantization")&&s&&l&&phe(A,a),A}function H3(e){let n=/^\w+_(\d+)$/.exec(e);if(n!==null)return parseInt(n[1])}var _he={gltfSemantic:void 0,renamedSemantic:void 0,modelSemantic:void 0};function Lw(e,t,n){let i=n;e._renameBatchIdSemantic&&(n==="_BATCHID"||n==="BATCHID")&&(i="_FEATURE_ID_0");let o=t.fromGltfSemantic(i),r=_he;return r.gltfSemantic=n,r.renamedSemantic=i,r.modelSemantic=o,r}function Ehe(e){let t=e===Pe.POSITION,n=e===Pe.FEATURE_ID,i=e===Pe.TEXCOORD;return t||n||i}function Ihe(e,t,n,i){if(e.byteOffset=0,e.byteStride=void 0,e.quantization=t.quantization,n&&(e.buffer=t.buffer),i){let o=c(t.quantization)?t.quantization.componentDatatype:e.componentDatatype;e.typedArray=N.createArrayBufferView(o,t.typedArray.buffer)}}function yhe(e,t,n,i){if(e.byteOffset=0,e.byteStride=void 0,n&&(e.buffer=t.buffer),i&&c(t.typedArray)&&(e.typedArray=N.createArrayBufferView(e.componentDatatype,t.typedArray.buffer)),e.semantic===Pe.POSITION){let o=a=>{let s=1/0,A=-1/0,l=1/0,f=-1/0,h=1/0,m=-1/0;for(let p=0;p<a.length;p+=3){let g=a[p],C=a[p+1],_=a[p+2];s=Math.min(s,g),A=Math.max(A,g),l=Math.min(l,C),f=Math.max(f,C),h=Math.min(h,_),m=Math.max(m,_)}return[new u(s,l,h),new u(A,f,m)]},r=e.typedArray;[e.min,e.max]=o(r)}}function bhe(e,t,n,i,o,r){if(o&&(n.buffer=i.buffer),r){let a=i.typedArray;n.typedArray=z3(e,t,a),o||(n.byteOffset=0,n.byteStride=void 0)}}function V3(e,t,n,i,o,r,a,s,A){let l=e.gltfJson,f=l.accessors[t],h=f.bufferView,m=n.gltfSemantic,p=n.renamedSemantic,g=n.modelSemantic,C=c(g)?H3(p):void 0,E=Che(l,t,m,g,C);if(!c(o)&&!c(h)&&!c(r))return E;let I=she(e,t,m,i,o,r,a,s,A),y=e._geometryLoaders.length;e._geometryLoaders.push(I);let b=I.load();return e._loaderPromises.push(b),e._geometryCallbacks[y]=()=>{c(o)&&c(o.attributes)&&c(o.attributes[m])?Ihe(E,I,a,s):c(r)?yhe(E,I,a,s):bhe(l,f,E,I,a,s)},E}function j3(e,t,n,i,o,r,a,s,A){let l=n.modelSemantic,f=l===Pe.POSITION,h=l===Pe.FEATURE_ID,m=f&&!a&&e._loadAttributesFor2D&&!A.scene3DOnly,p=f&&e._enablePick&&!A.context.webgl2,g=e._loadForClassification&&h,C=e._loadAttributesAsTypedArray,_=!C,E=C||m||p||g,b=V3(e,t,n,i,o,r,s?!1:_,s?!0:E,A),x=new Ub.AttributeLoadPlan(b);return x.loadBuffer=_,x.loadTypedArray=E,x}function Bhe(e,t,n,i,o){let r=e.gltfJson.accessors,a=c(n.ROTATION),s=c(n.TRANSLATION)&&c(r[n.TRANSLATION].min)&&c(r[n.TRANSLATION].max),A=Lw(e,zo,i),l=A.modelSemantic,f=l===zo.TRANSLATION||l===zo.ROTATION||l===zo.SCALE,h=l===zo.TRANSLATION,m=e._loadAttributesAsTypedArray||a&&f||!o.context.instancedArrays,p=e._enablePick&&!o.context.webgl2,g=!m,C=e._loadAttributesFor2D&&!o.scene3DOnly;return V3(e,t,A,void 0,void 0,void 0,g,m||h&&(!s||C||p),o)}function xhe(e,t,n,i,o,r,a){let s=e.gltfJson.accessors[t],A=s.bufferView;if(!c(i)&&!c(A))return;let l=new Lde;l.count=s.count;let f=e._loadAttributesAsTypedArray,h=(e._loadIndicesForWireframe||e._enablePick)&&!a.context.webgl2,m=e._loadForClassification&&o,g=!f,C=f||h||m,I=che(e,t,n,i,r?!1:g,r?!0:C,a),y=e._geometryLoaders.length;e._geometryLoaders.push(I);let b=I.load();e._loaderPromises.push(b),e._geometryCallbacks[y]=()=>{l.indexDatatype=I.indexDatatype,l.buffer=I.buffer,l.typedArray=I.typedArray};let x=new Ub.IndicesLoadPlan(l);return x.loadBuffer=g,x.loadTypedArray=C,x}function sa(e,t,n,i){let o=e.gltfJson,r=Dc.getImageIdFromTexture({gltf:o,textureId:t.index,supportedImageFormats:e._supportedImageFormats});if(!c(r))return;let a=di.getTextureLoader({gltf:o,textureInfo:t,gltfResource:e._gltfResource,baseResource:e._baseResource,supportedImageFormats:e._supportedImageFormats,frameState:n,asynchronous:e._asynchronous}),s=Dc.createModelTextureReader({textureInfo:t}),A=e._textureLoaders.length;e._textureLoaders.push(a);let l=a.load().catch(f=>{if(!e.isDestroyed()){if(!e._incrementallyLoadTextures)throw f;e._textureState=Ci.FAILED,e._textureErrors.push(f)}});return e._texturesPromises.push(l),e._textureCallbacks[A]=()=>{s.texture=a.texture,c(i)&&(s.texture.sampler=i)},s}function The(e,t,n){let{diffuseTexture:i,specularGlossinessTexture:o,diffuseFactor:r,specularFactor:a,glossinessFactor:s}=t,A=new $de;return c(i)&&(A.diffuseTexture=sa(e,i,n)),c(o)&&(A.specularGlossinessTexture=sa(e,o,n)),A.diffuseFactor=os(se,r),A.specularFactor=os(u,a),A.glossinessFactor=s,A}function She(e,t,n){let{baseColorTexture:i,metallicRoughnessTexture:o,baseColorFactor:r,metallicFactor:a,roughnessFactor:s}=t,A=new Zde;return c(i)&&(A.baseColorTexture=sa(e,i,n)),c(o)&&(A.metallicRoughnessTexture=sa(e,o,n)),A.baseColorFactor=os(se,r),A.metallicFactor=a,A.roughnessFactor=s,A}function whe(e,t,n){let{specularFactor:i,specularTexture:o,specularColorFactor:r,specularColorTexture:a}=t,s=new ehe;return c(o)&&(s.specularTexture=sa(e,o,n)),c(a)&&(s.specularColorTexture=sa(e,a,n)),s.specularFactor=i,s.specularColorFactor=os(u,r),s}function Dhe(e,t,n){let{anisotropyStrength:i=Mw.DEFAULT_ANISOTROPY_STRENGTH,anisotropyRotation:o=Mw.DEFAULT_ANISOTROPY_ROTATION,anisotropyTexture:r}=t,a=new Mw;return c(r)&&(a.anisotropyTexture=sa(e,r,n)),a.anisotropyStrength=i,a.anisotropyRotation=o,a}function Qhe(e,t,n){let{clearcoatFactor:i=Ow.DEFAULT_CLEARCOAT_FACTOR,clearcoatTexture:o,clearcoatRoughnessFactor:r=Ow.DEFAULT_CLEARCOAT_ROUGHNESS_FACTOR,clearcoatRoughnessTexture:a,clearcoatNormalTexture:s}=t,A=new Ow;return c(o)&&(A.clearcoatTexture=sa(e,o,n)),c(a)&&(A.clearcoatRoughnessTexture=sa(e,a,n)),c(s)&&(A.clearcoatNormalTexture=sa(e,s,n)),A.clearcoatFactor=i,A.clearcoatRoughnessFactor=r,A}function Rhe(e,t,n){let i=new the,o=t.extensions??k.EMPTY_OBJECT,r=o.KHR_materials_pbrSpecularGlossiness,a=o.KHR_materials_specular,s=o.KHR_materials_anisotropy,A=o.KHR_materials_clearcoat,l=t.pbrMetallicRoughness;return i.unlit=c(o.KHR_materials_unlit),c(r)?i.specularGlossiness=The(e,r,n):(c(l)&&(i.metallicRoughness=She(e,l,n)),c(a)&&!i.unlit&&(i.specular=whe(e,a,n)),c(s)&&!i.unlit&&(i.anisotropy=Dhe(e,s,n)),c(A)&&!i.unlit&&(i.clearcoat=Qhe(e,A,n))),c(t.emissiveTexture)&&(i.emissiveTexture=sa(e,t.emissiveTexture,n)),c(t.normalTexture)&&!e._loadForClassification&&(i.normalTexture=sa(e,t.normalTexture,n)),c(t.occlusionTexture)&&(i.occlusionTexture=sa(e,t.occlusionTexture,n)),i.emissiveFactor=os(u,t.emissiveFactor),i.alphaMode=t.alphaMode,i.alphaCutoff=t.alphaCutoff,i.doubleSided=t.doubleSided,i}function Y3(e,t){let n=new k3;return n.featureCount=e.featureCount,n.nullFeatureId=e.nullFeatureId,n.propertyTableId=e.propertyTable,n.setIndex=e.attribute,n.label=e.label,n.positionalLabel=t,n}function q3(e,t,n,i){let o=new k3,r=e.featureIds;return o.featureCount=n,o.propertyTableId=t,o.setIndex=H3(r.attribute),o.positionalLabel=i,o}function W3(e,t){let n=new G3;return n.propertyTableId=e.propertyTable,n.featureCount=e.featureCount,n.nullFeatureId=e.nullFeatureId,n.label=e.label,n.positionalLabel=t,n.offset=0,n.repeat=1,n}function J3(e,t,n,i){let o=new G3,r=e.featureIds;o.propertyTableId=t,o.featureCount=n,o.offset=r.constant??0;let a=r.divisor??0;return o.repeat=a===0?void 0:a,o.positionalLabel=i,o}function vhe(e,t,n,i){let o=new U3;o.featureCount=t.featureCount,o.nullFeatureId=t.nullFeatureId,o.propertyTableId=t.propertyTable,o.label=t.label,o.positionalLabel=i;let r=t.texture;o.textureReader=sa(e,r,n,dn.NEAREST);let s=(c(r.channels)?r.channels:[0]).map(function(A){return"rgba".charAt(A)}).join("");return o.textureReader.channels=s,o}function Phe(e,t,n,i,o,r){let a=new U3,s=t.featureIds,A=s.texture;return a.featureCount=o,a.propertyTableId=n,a.textureReader=sa(e,A,i,dn.NEAREST),a.textureReader.channels=s.channels,a.positionalLabel=r,a}function Mhe(e,t,n,i,o){let r=new Nde,a=void 0,s=void 0,A=void 0,l=!1;for(let f in t){if(!t.hasOwnProperty(f))continue;let h=t[f],m=Lw(e,Pe,f),p=j3(e,h,m,a,s,A,l,n,o);r.attributes.push(p.attribute),i.attributePlans.push(p)}return r}function Ohe(e){let i=e?.KHR_gaussian_splatting?.extensions?.KHR_gaussian_splatting_compression_spz_2;if(c(i))return i;let o=e?.KHR_spz_gaussian_splats_compression;if(c(o))return o}function Lhe(e,t,n,i){let o=new Fde,r=new Ub(o);e._primitiveLoadPlans.push(r);let a=t.material;c(a)&&(o.material=Rhe(e,e.gltfJson.materials[a],i));let s=t.extensions??k.EMPTY_OBJECT,A=!1,l=s.CESIUM_primitive_outline;e._loadPrimitiveOutline&&c(l)&&(A=!0,r.needsOutlines=!0,r.outlineIndices=Nhe(e,l,r));let f=Ohe(s);c(f)&&(A=!0,r.needsGaussianSplats=!0);let h=e._loadForClassification,m=s.KHR_draco_mesh_compression,p=!1,g=t.attributes;if(c(g))for(let S in g){if(!g.hasOwnProperty(S))continue;let P=g[S],D=Lw(e,Pe,S),Q=D.modelSemantic;if(h&&!Ehe(Q))continue;Q===Pe.FEATURE_ID&&(p=!0);let v=j3(e,P,D,t,m,f,n,A,i);r.attributePlans.push(v),o.attributes.push(v.attribute)}let C=t.targets;if(c(C)&&!h)for(let S=0;S<C.length;++S)o.morphTargets.push(Mhe(e,C[S],A,r,i));let _=t.indices;if(c(_)){let S=xhe(e,_,t,m,p,A,i);c(S)&&(r.indicesPlan=S,o.indices=S.indices)}let E=s.EXT_structural_metadata,I=s.EXT_mesh_features,y=s.EXT_feature_metadata,b=c(y);c(I)?Fhe(e,o,I,i):b&&khe(e,o,y,i),c(E)?Uhe(o,E):b&&Ghe(e,o,y);let x=t.mode;if(h&&x!==Ce.TRIANGLES)throw new oe("Only triangle meshes can be used for classification.");return o.primitiveType=x,o}function Nhe(e,t){let n=t.indices,i=e.gltfJson.accessors[n];return zb(e,i,!1)}function Fhe(e,t,n,i){let o;c(n)&&c(n.featureIds)?o=n.featureIds:o=[];for(let r=0;r<o.length;r++){let a=o[r],s=`featureId_${r}`,A;c(a.texture)?A=vhe(e,a,i,s):c(a.attribute)?A=Y3(a,s):A=W3(a,s),t.featureIds.push(A)}}function khe(e,t,n,i){let{featureTables:o}=e.gltfJson.extensions.EXT_feature_metadata,r=0,a=n.featureIdAttributes;if(c(a))for(let A=0;A<a.length;++A){let l=a[A],f=l.featureTable,h=e._sortedPropertyTableIds.indexOf(f),m=o[f].count,p=`featureId_${r}`;r++;let g;c(l.featureIds.attribute)?g=q3(l,h,m,p):g=J3(l,h,m,p),t.featureIds.push(g)}let s=n.featureIdTextures;if(c(s))for(let A=0;A<s.length;++A){let l=s[A],f=l.featureTable,h=e._sortedPropertyTableIds.indexOf(f),m=o[f].count,p=`featureId_${r}`;r++;let g=Phe(e,l,h,i,m,p);t.featureIds.push(g)}}function Uhe(e,t){if(!c(t))return;let{propertyTextures:n,propertyAttributes:i}=t;c(n)&&(e.propertyTextureIds=n),c(i)&&(e.propertyAttributeIds=i)}function Ghe(e,t,n){c(n.featureTextures)&&(t.propertyTextureIds=n.featureTextures.map(function(i){return e._sortedFeatureTextureIds.indexOf(i)}))}function zhe(e,t,n){let i=t.EXT_mesh_gpu_instancing,o=new kde,r=i.attributes;if(c(r))for(let l in r){if(!r.hasOwnProperty(l))continue;let f=r[l];o.attributes.push(Bhe(e,f,r,l,n))}let a=i.extensions??k.EMPTY_OBJECT,s=t.EXT_instance_features,A=a.EXT_feature_metadata;return c(s)?Hhe(o,s):c(A)&&Vhe(e.gltfJson,o,A,e._sortedPropertyTableIds),o}function Hhe(e,t){let n=t.featureIds;for(let i=0;i<n.length;i++){let o=n[i],r=`instanceFeatureId_${i}`,a;c(o.attribute)?a=Y3(o,r):a=W3(o,r),e.featureIds.push(a)}}function Vhe(e,t,n,i){let o=e.extensions.EXT_feature_metadata.featureTables,r=n.featureIdAttributes;if(c(r))for(let a=0;a<r.length;++a){let s=r[a],A=s.featureTable,l=i.indexOf(A),f=o[A].count,h=`instanceFeatureId_${a}`,m;c(s.featureIds.attribute)?m=q3(s,l,f,h):m=J3(s,l,f,h),t.featureIds.push(m)}}function jhe(e,t,n){let i=new Gde;i.name=t.name,i.matrix=os(O,t.matrix),i.translation=os(u,t.translation),i.rotation=os(qe,t.rotation),i.scale=os(u,t.scale);let o=t.extensions??k.EMPTY_OBJECT,r=o.EXT_mesh_gpu_instancing,a=o.AGI_articulations;if(c(r)){if(e._loadForClassification)throw new oe("Models with the EXT_mesh_gpu_instancing extension cannot be used for classification.");i.instances=zhe(e,o,n)}c(a)&&(i.articulationName=a.articulationName);let s=t.mesh;if(c(s)){let A=e.gltfJson.meshes[s],l=F3(A);for(let m=0;m<l.length;++m)i.primitives.push(Lhe(e,l[m],c(i.instances),n));let f=t.weights??A.weights,h=i.primitives[0].morphTargets;i.morphWeights=c(f)?f.slice():new Array(h.length).fill(0)}return i}function Yhe(e,t){let n=e.gltfJson.nodes;if(!c(n))return[];let i=n.map(function(o,r){let a=jhe(e,o,t);return a.index=r,a});for(let o=0;o<i.length;++o){let r=n[o].children;if(c(r))for(let a=0;a<r.length;++a)i[o].children.push(i[r[a]])}return i}function qhe(e,t,n){let i=new Ude,o=t.joints;i.joints=o.map(a=>n[a]);let r=t.inverseBindMatrices;if(c(r)){let a=e.gltfJson.accessors[r];i.inverseBindMatrices=zb(e,a)}else i.inverseBindMatrices=new Array(o.length).fill(O.IDENTITY);return i}function Whe(e,t){let n=e.gltfJson.skins;if(e._loadForClassification||!c(n))return[];let i=n.map(function(r,a){let s=qhe(e,r,t);return s.index=a,s}),o=e.gltfJson.nodes;for(let r=0;r<t.length;++r){let a=o[r].skin;c(a)&&(t[r].skin=i[a])}return i}async function Jhe(e,t,n,i){let o=new h3({gltf:e.gltfJson,extension:t,extensionLegacy:n,gltfResource:e._gltfResource,baseResource:e._baseResource,supportedImageFormats:e._supportedImageFormats,frameState:i,asynchronous:e._asynchronous});return e._structuralMetadataLoader=o,o.load()}async function Khe(e,t,n,i){let o=new N3({gltf:t,extension:n,gltfResource:e._gltfResource,baseResource:e._baseResource,supportedImageFormats:e._supportedImageFormats,frameState:i,asynchronous:e._asynchronous});return e._meshPrimitiveGpmLoader=o,o.load()}function Xhe(e,t){let n=new Hde,i=e.gltfJson.accessors,o=i[t.input];n.input=zb(e,o);let r=t.interpolation;n.interpolation=pu[r]??pu.LINEAR;let a=i[t.output];return n.output=zb(e,a,!0),n}function Zhe(e,t){let n=new Vde,i=e.node;if(!c(i))return;n.node=t[i];let o=e.path.toUpperCase();return n.path=zde[o],n}function $he(e,t,n){let i=new jde,o=e.sampler;return i.sampler=t[o],i.target=Zhe(e.target,n),i}function eme(e,t,n){let i=new Yde;i.name=t.name;let o=t.samplers.map(function(a,s){let A=Xhe(e,a);return A.index=s,A}),r=t.channels.map(function(a){return $he(a,o,n)});return i.samplers=o,i.channels=r,i}function tme(e,t){let n=e.gltfJson.animations;return e._loadForClassification||!c(n)?[]:n.map(function(o,r){let a=eme(e,o,t);return a.index=r,a})}function nme(e){let t=new qde;t.name=e.name;let n=e.type.toUpperCase();return t.type=is[n],t.minimumValue=e.minimumValue,t.maximumValue=e.maximumValue,t.initialValue=e.initialValue,t}function ime(e){let t=new Wde;return t.name=e.name,t.stages=e.stages.map(nme),t}function ome(e){let n=(e.extensions??k.EMPTY_OBJECT).AGI_articulations?.articulations;return c(n)?n.map(ime):[]}function rme(e){let t;return c(e.scenes)&&c(e.scene)&&(t=e.scenes[e.scene].nodes),t=t??e.nodes,t=c(t)?t:[],t}function ame(e,t){let n=new Kde,i=rme(e);return n.nodes=i.map(function(o){return t[o]}),n}var sme=new u;function cme(e,t){let n=e.gltfJson,i=n.extensions??k.EMPTY_OBJECT,o=i.EXT_structural_metadata,r=i.EXT_feature_metadata,a=i.CESIUM_RTC;if(c(r)){let I=r.featureTables,y=r.featureTextures,b=c(I)?I:[],x=c(y)?y:[];e._sortedPropertyTableIds=Object.keys(b).sort(),e._sortedFeatureTextureIds=Object.keys(x).sort()}let s=Yhe(e,t),A=Whe(e,s),l=tme(e,s),f=ome(n),h=ame(n,s),m=new Xde,p=new Jde,g=n.asset.copyright;if(c(g)){let I=g.split(";").map(function(y){return new fn(y.trim())});p.credits=I}if(m.asset=p,m.scene=h,m.nodes=s,m.skins=A,m.animations=l,m.articulations=f,m.upAxis=e._upAxis,m.forwardAxis=e._forwardAxis,c(a)){let I=u.fromArray(a.center,0,sme);m.transform=O.fromTranslation(I,m.transform)}if(e._components=m,c(o)||c(r)){let I=Jhe(e,o,r,t);e._loaderPromises.push(I)}let C=i.NGA_gpm_local;if(c(C)){let I=Q3.load(C);e._components.extensions.NGA_gpm_local=I}let _=n.meshes;if(c(_))for(let I of _){let y=I.primitives;if(c(y))for(let b of y){let x=b.extensions;if(c(x)){let S=x.NGA_gpm_local;if(c(S)){let P=Khe(e,n,S,t);e._loaderPromises.push(P)}}}}let E=[];return Gn(E,e._loaderPromises),e._incrementallyLoadTextures||Gn(E,e._texturesPromises),Promise.all(E)}function Ame(e){let t=e._textureLoaders;for(let n=0;n<t.length;++n)t[n]=!t[n].isDestroyed()&&di.unload(t[n]);e._textureLoaders.length=0}function K3(e){let t=e._bufferViewLoaders;for(let n=0;n<t.length;++n)t[n]=!t[n].isDestroyed()&&di.unload(t[n]);e._bufferViewLoaders.length=0}function lme(e){let t=e._geometryLoaders;for(let n=0;n<t.length;++n)t[n]=!t[n].isDestroyed()&&di.unload(t[n]);e._geometryLoaders.length=0}function fme(e){let t=e._postProcessBuffers;for(let n=0;n<t.length;n++){let i=t[n];i.isDestroyed()||i.destroy()}t.length=0}function ume(e){c(e._structuralMetadataLoader)&&!e._structuralMetadataLoader.isDestroyed()&&(e._structuralMetadataLoader.destroy(),e._structuralMetadataLoader=void 0)}function dme(e){c(e._meshPrimitiveGpmLoader)&&!e._meshPrimitiveGpmLoader.isDestroyed()&&(e._meshPrimitiveGpmLoader.destroy(),e._meshPrimitiveGpmLoader=void 0)}vc.prototype.isUnloaded=function(){return this._state===Ci.UNLOADED};vc.prototype.unload=function(){c(this._gltfJsonLoader)&&!this._gltfJsonLoader.isDestroyed()&&di.unload(this._gltfJsonLoader),this._gltfJsonLoader=void 0,Ame(this),K3(this),lme(this),fme(this),ume(this),dme(this),this._components=void 0,this._typedArray=void 0,this._state=Ci.UNLOADED};var Cu=vc;var X3=`uniform sampler2D u_pointCloud_colorGBuffer;
uniform sampler2D u_pointCloud_depthGBuffer;
uniform vec2 u_distanceAndEdlStrength;
in vec2 v_textureCoordinates;

vec2 neighborContribution(float log2Depth, vec2 offset)
{
    float dist = u_distanceAndEdlStrength.x;
    vec2 texCoordOrig = v_textureCoordinates + offset * dist;
    vec2 texCoord0 = v_textureCoordinates + offset * floor(dist);
    vec2 texCoord1 = v_textureCoordinates + offset * ceil(dist);

    float depthOrLogDepth0 = czm_unpackDepth(texture(u_pointCloud_depthGBuffer, texCoord0));
    float depthOrLogDepth1 = czm_unpackDepth(texture(u_pointCloud_depthGBuffer, texCoord1));

    // ignore depth values that are the clear depth
    if (depthOrLogDepth0 == 0.0 || depthOrLogDepth1 == 0.0) {
        return vec2(0.0);
    }

    // interpolate the two adjacent depth values
    float depthMix = mix(depthOrLogDepth0, depthOrLogDepth1, fract(dist));
    vec4 eyeCoordinate = czm_windowToEyeCoordinates(texCoordOrig, depthMix);
    return vec2(max(0.0, log2Depth - log2(-eyeCoordinate.z / eyeCoordinate.w)), 1.0);
}

void main()
{
    float depthOrLogDepth = czm_unpackDepth(texture(u_pointCloud_depthGBuffer, v_textureCoordinates));

    vec4 eyeCoordinate = czm_windowToEyeCoordinates(gl_FragCoord.xy, depthOrLogDepth);
    eyeCoordinate /= eyeCoordinate.w;

    float log2Depth = log2(-eyeCoordinate.z);

    if (depthOrLogDepth == 0.0) // 0.0 is the clear value for the gbuffer
    {
        discard;
    }

    vec4 color = texture(u_pointCloud_colorGBuffer, v_textureCoordinates);

    // sample from neighbors left, right, down, up
    vec2 texelSize = 1.0 / czm_viewport.zw;

    vec2 responseAndCount = vec2(0.0);

    responseAndCount += neighborContribution(log2Depth, vec2(-texelSize.x, 0.0));
    responseAndCount += neighborContribution(log2Depth, vec2(+texelSize.x, 0.0));
    responseAndCount += neighborContribution(log2Depth, vec2(0.0, -texelSize.y));
    responseAndCount += neighborContribution(log2Depth, vec2(0.0, +texelSize.y));

    float response = responseAndCount.x / responseAndCount.y;
    float strength = u_distanceAndEdlStrength.y;
    float shade = exp(-response * 300.0 * strength);
    color.rgb *= shade;
    out_FragColor = vec4(color);

    // Input and output depth are the same.
    gl_FragDepth = depthOrLogDepth;
}
`;function jm(){this._framebuffer=new gF({colorAttachmentsLength:2,depth:!0,supportsDepthTexture:!0}),this._drawCommand=void 0,this._clearCommand=void 0,this._strength=1,this._radius=1}Object.defineProperties(jm.prototype,{framebuffer:{get:function(){return this._framebuffer.framebuffer}},colorGBuffer:{get:function(){return this._framebuffer.getColorTexture(0)}},depthGBuffer:{get:function(){return this._framebuffer.getColorTexture(1)}}});function hme(e){e._framebuffer.destroy(),e._drawCommand=void 0,e._clearCommand=void 0}var Nw=new U;function mme(e,t){let n=new It({defines:["LOG_DEPTH_WRITE"],sources:[X3]}),i={u_pointCloud_colorGBuffer:function(){return e.colorGBuffer},u_pointCloud_depthGBuffer:function(){return e.depthGBuffer},u_distanceAndEdlStrength:function(){return Nw.x=e._radius,Nw.y=e._strength,Nw}},o=ut.fromCache({blending:qn.ALPHA_BLEND,depthMask:!0,depthTest:{enabled:!0},stencilTest:Qt.setCesium3DTileBit(),stencilMask:Qt.CESIUM_3D_TILE_MASK});e._drawCommand=t.createViewportQuadCommand(n,{uniformMap:i,renderState:o,pass:Ye.CESIUM_3D_TILE,owner:e}),e._clearCommand=new AI({framebuffer:e.framebuffer,color:new F(0,0,0,0),depth:1,renderState:ut.fromCache(),pass:Ye.CESIUM_3D_TILE,owner:e})}function pme(e,t){let n=t.drawingBufferWidth,i=t.drawingBufferHeight;e._framebuffer.update(t,n,i),mme(e,t)}function Z3(e){return e.drawBuffers&&e.fragmentDepth}jm.isSupported=Z3;function gme(e,t){let n=e.shaderCache.getDerivedShaderProgram(t,"EC");if(!c(n)){let i=t._attributeLocations,o=t.fragmentShaderSource.clone();o.sources.splice(0,0,`layout (location = 0) out vec4 out_FragData_0;
layout (location = 1) out vec4 out_FragData_1;`),o.sources=o.sources.map(function(r){return r=It.replaceMain(r,"czm_point_cloud_post_process_main"),r=r.replaceAll(/out_FragColor/g,"out_FragData_0"),r}),o.sources.push(`void main() 
{ 
    czm_point_cloud_post_process_main(); 
#ifdef LOG_DEPTH
    czm_writeLogDepth();
    out_FragData_1 = czm_packDepth(gl_FragDepth); 
#else
    out_FragData_1 = czm_packDepth(gl_FragCoord.z);
#endif
}`),n=e.shaderCache.createDerivedShaderProgram(t,"EC",{vertexShaderSource:t.vertexShaderSource,fragmentShaderSource:o,attributeLocations:i})}return n}jm.prototype.update=function(e,t,n,i){if(!Z3(e.context))return;this._strength=n.eyeDomeLightingStrength,this._radius=n.eyeDomeLightingRadius*e.pixelRatio,pme(this,e.context);let o,r=e.commandList,a=r.length;for(o=t;o<a;++o){let l=r[o];if(l.primitiveType!==Ce.POINTS||l.pass===Ye.TRANSLUCENT)continue;let f,h,m=l.derivedCommands.pointCloudProcessor;c(m)&&(f=m.command,h=m.originalShaderProgram),(!c(f)||l.dirty||h!==l.shaderProgram||f.framebuffer!==this.framebuffer)&&(f=mt.shallowClone(l,f),f.framebuffer=this.framebuffer,f.shaderProgram=gme(e.context,l.shaderProgram),f.castShadows=!1,f.receiveShadows=!1,c(m)||(m={command:f,originalShaderProgram:l.shaderProgram},l.derivedCommands.pointCloudProcessor=m),m.originalShaderProgram=l.shaderProgram),r[o]=f}let s=this._clearCommand,A=this._drawCommand;A.boundingVolume=i,r.push(A),r.push(s)};jm.prototype.isDestroyed=function(){return!1};jm.prototype.destroy=function(){return hme(this),pe(this)};var Hb=jm;function $3(e){let t=e??{};this.attenuation=t.attenuation??!1,this.geometricErrorScale=t.geometricErrorScale??1,this.maximumAttenuation=t.maximumAttenuation,this.baseResolution=t.baseResolution,this.eyeDomeLighting=t.eyeDomeLighting??!0,this.eyeDomeLightingStrength=t.eyeDomeLightingStrength??1,this.eyeDomeLightingRadius=t.eyeDomeLightingRadius??1,this.backFaceCulling=t.backFaceCulling??!1,this.normalShading=t.normalShading??!0}$3.isSupported=function(e){return Hb.isSupported(e.context)};var Vb=$3;var ur={},Cme=new se(0,0,0,1),Mr=new se,_me=new Jt,Fw=new U,kw=new U;ur.worldToWindowCoordinates=function(e,t,n){return ur.worldWithEyeOffsetToWindowCoordinates(e,t,u.ZERO,n)};var ez=new se,tz=new u;function f_(e,t,n,i){let o=n.viewMatrix,r=O.multiplyByVector(o,se.fromElements(e.x,e.y,e.z,1,ez),ez),a=u.multiplyComponents(t,u.normalize(r,tz),tz);return r.x+=t.x+a.x,r.y+=t.y+a.y,r.z+=a.z,O.multiplyByVector(n.frustum.projectionMatrix,r,i)}var Eme=new ae(Math.PI,w.PI_OVER_TWO),Ime=new u,yme=new u;ur.worldWithEyeOffsetToWindowCoordinates=function(e,t,n,i){let o=e.frameState,r=ur.computeActualEllipsoidPosition(o,t,Cme);if(!c(r))return;let a=e.canvas,s=_me;s.x=0,s.y=0,s.width=a.clientWidth,s.height=a.clientHeight;let A=e.camera,l=!1;if(o.mode===Te.SCENE2D){let f=e.mapProjection,h=Eme,m=f.project(h,Ime),p=u.clone(A.position,yme),g=A.frustum.clone(),C=O.computeViewportTransformation(s,0,1,new O),_=A.frustum.projectionMatrix,E=A.positionWC.y,I=u.fromElements(w.sign(E)*m.x-E,0,-A.positionWC.x),y=Rn.pointToGLWindowCoordinates(_,C,I);if(E===0||y.x<=0||y.x>=a.clientWidth)l=!0;else{if(y.x>a.clientWidth*.5){s.width=y.x,A.frustum.right=m.x-E,Mr=f_(r,n,A,Mr),ur.clipToGLWindowCoordinates(s,Mr,Fw),s.x+=y.x,A.position.x=-A.position.x;let b=A.frustum.right;A.frustum.right=-A.frustum.left,A.frustum.left=-b,Mr=f_(r,n,A,Mr),ur.clipToGLWindowCoordinates(s,Mr,kw)}else{s.x+=y.x,s.width-=y.x,A.frustum.left=-m.x-E,Mr=f_(r,n,A,Mr),ur.clipToGLWindowCoordinates(s,Mr,Fw),s.x=s.x-s.width,A.position.x=-A.position.x;let b=A.frustum.left;A.frustum.left=-A.frustum.right,A.frustum.right=-b,Mr=f_(r,n,A,Mr),ur.clipToGLWindowCoordinates(s,Mr,kw)}u.clone(p,A.position),A.frustum=g.clone(),i=U.clone(Fw,i),(i.x<0||i.x>a.clientWidth)&&(i.x=kw.x)}}if(o.mode!==Te.SCENE2D||l){if(Mr=f_(r,n,A,Mr),Mr.z<0&&!(A.frustum instanceof am)&&!(A.frustum instanceof ey))return;i=ur.clipToGLWindowCoordinates(s,Mr,i)}return i.y=a.clientHeight-i.y,i};ur.worldToDrawingBufferCoordinates=function(e,t,n){if(n=ur.worldToWindowCoordinates(e,t,n),!!c(n))return ur.transformWindowToDrawingBuffer(e,n,n)};var Ol=new u,bme=new ae;ur.computeActualEllipsoidPosition=function(e,t,n){let i=e.mode;if(i===Te.SCENE3D)return u.clone(t,n);let o=e.mapProjection,r=o.ellipsoid.cartesianToCartographic(t,bme);if(!c(r))return;if(o.project(r,Ol),i===Te.COLUMBUS_VIEW)return u.fromElements(Ol.z,Ol.x,Ol.y,n);if(i===Te.SCENE2D)return u.fromElements(0,Ol.x,Ol.y,n);let a=e.morphTime;return u.fromElements(w.lerp(Ol.z,t.x,a),w.lerp(Ol.x,t.y,a),w.lerp(Ol.y,t.z,a),n)};var nz=new u,iz=new u,oz=new O;ur.clipToGLWindowCoordinates=function(e,t,n){return u.divideByScalar(t,t.w,nz),O.computeViewportTransformation(e,0,1,oz),O.multiplyByPoint(oz,nz,iz),U.fromCartesian3(iz,n)};ur.transformWindowToDrawingBuffer=function(e,t,n){let i=e.canvas,o=e.drawingBufferWidth/i.clientWidth,r=e.drawingBufferHeight/i.clientHeight;return U.fromElements(t.x*o,t.y*r,n)};var Bme=new se,rz=new se;ur.drawingBufferToWorldCoordinates=function(e,t,n,i){let r=e.context.uniformState,a=r.currentFrustum,s=a.x,A=a.y;if(e.frameState.useLogDepth){let p=n*r.log2FarDepthFromNearPlusOne,g=Math.pow(2,p)-1;n=A*(1-s/(g+s))/(A-s)}let l=e.view.passState.viewport,f=se.clone(se.UNIT_W,Bme);f.x=(t.x-l.x)/l.width*2-1,f.y=(t.y-l.y)/l.height*2-1,f.z=n*2-1,f.w=1;let h,m=e.camera.frustum;if(c(m.fovy)){h=O.multiplyByVector(r.inverseViewProjection,f,rz);let p=1/h.w;u.multiplyByScalar(h,p,h)}else{let p=m.offCenterFrustum;c(p)&&(m=p),h=rz,h.x=(f.x*(m.right-m.left)+m.left+m.right)*.5,h.y=(f.y*(m.top-m.bottom)+m.bottom+m.top)*.5,h.z=(f.z*(s-A)-s-A)*.5,h.w=1,h=O.multiplyByVector(r.inverseView,h,h)}return u.fromCartesian4(h,i)};var dr=ur;var Ym={};Ym._deprecationWarning=wr;var Ll=Uint32Array.BYTES_PER_ELEMENT;Ym.parse=function(e,t){let n=t??0;t=n;let i=new Uint8Array(e),o=new DataView(e);t+=Ll;let r=o.getUint32(t,!0);if(r!==1)throw new oe(`Only Batched 3D Model version 1 is supported.  Version ${r} is not.`);t+=Ll;let a=o.getUint32(t,!0);t+=Ll;let s=o.getUint32(t,!0);t+=Ll;let A=o.getUint32(t,!0);t+=Ll;let l=o.getUint32(t,!0);t+=Ll;let f=o.getUint32(t,!0);t+=Ll;let h;l>=570425344?(t-=Ll*2,h=s,l=A,f=0,s=0,A=0,Ym._deprecationWarning("b3dm-legacy-header","This b3dm header is using the legacy format [batchLength] [batchTableByteLength]. The new format is [featureTableJsonByteLength] [featureTableBinaryByteLength] [batchTableJsonByteLength] [batchTableBinaryByteLength] from https://github.com/CesiumGS/3d-tiles/tree/main/specification/TileFormats/Batched3DModel.")):f>=570425344&&(t-=Ll,h=l,l=s,f=A,s=0,A=0,Ym._deprecationWarning("b3dm-legacy-header","This b3dm header is using the legacy format [batchTableJsonByteLength] [batchTableBinaryByteLength] [batchLength]. The new format is [featureTableJsonByteLength] [featureTableBinaryByteLength] [batchTableJsonByteLength] [batchTableBinaryByteLength] from https://github.com/CesiumGS/3d-tiles/tree/main/specification/TileFormats/Batched3DModel."));let m;s===0?m={BATCH_LENGTH:h??0}:(m=_o(i,t,s),t+=s);let p=new Uint8Array(e,t,A);t+=A;let g,C;l>0&&(g=_o(i,t,l),t+=l,f>0&&(C=new Uint8Array(e,t,f),C=new Uint8Array(C),t+=f));let _=n+a-t;if(_===0)throw new oe("glTF byte length must be greater than 0.");let E;return t%4===0?E=new Uint8Array(e,t,_):(Ym._deprecationWarning("b3dm-glb-unaligned","The embedded glb is not aligned to a 4-byte boundary."),E=new Uint8Array(i.subarray(t,t+_))),{batchLength:h,featureTableJson:m,featureTableBinary:p,batchTableJson:g,batchTableBinary:C,gltf:E}};var az=Ym;function u_(e,t){this.json=e,this.buffer=t,this._cachedTypedArrays={},this.featuresLength=0}function sz(e,t,n,i,o,r){let a=e._cachedTypedArrays,s=a[t];return c(s)||(s=N.createArrayBufferView(n,e.buffer.buffer,e.buffer.byteOffset+r,o*i),a[t]=s),s}function xme(e,t,n,i){let o=e._cachedTypedArrays,r=o[t];return c(r)||(r=N.createTypedArray(n,i),o[t]=r),r}u_.prototype.getGlobalProperty=function(e,t,n){let i=this.json[e];if(c(i))return c(i.byteOffset)?(t=t??N.UNSIGNED_INT,n=n??1,sz(this,e,t,n,1,i.byteOffset)):i};u_.prototype.hasProperty=function(e){return c(this.json[e])};u_.prototype.getPropertyArray=function(e,t,n){let i=this.json[e];if(c(i))return c(i.byteOffset)?(c(i.componentType)&&(t=N.fromName(i.componentType)),sz(this,e,t,n,this.featuresLength,i.byteOffset)):xme(this,e,t,i)};u_.prototype.getProperty=function(e,t,n,i,o){let r=this.json[e];if(!c(r))return;let a=this.getPropertyArray(e,t,n);if(n===1)return a[i];for(let s=0;s<n;++s)o[s]=a[n*i+s];return o};var _u=u_;function d_(e){let t=e.count,n=e.batchTable,i=e.binaryBody,o=e.parseAsPropertyAttributes??!1,r=e.customAttributeOutput,a=Tme(n),s;c(a.jsonProperties)&&(s=new Gm({count:t,properties:a.jsonProperties}));let A;c(a.hierarchy)&&(A=new Jy({extension:a.hierarchy,binaryBody:i}));let l=uu.BATCH_TABLE_CLASS_NAME,f=a.binaryProperties,h,m,p;if(o){let _=wme(t,l,f,i,r);p=_.transcodedSchema,m=[new Lb({propertyAttribute:_.propertyAttributeJson,class:_.transcodedClass})]}else{let _=Sme(t,l,f,i);p=_.transcodedSchema;let E=_.featureTableJson;h=new Dl({count:E.count,properties:E.properties,class:_.transcodedClass,bufferViews:_.bufferViewsTypedArrays}),m=[]}let g=[];if(c(h)||c(s)||c(A)){let _=new Js({id:0,name:"Batch Table",count:t,metadataTable:h,jsonMetadataTable:s,batchTableHierarchy:A});g.push(_)}let C={schema:p,propertyTables:g,propertyAttributes:m,extensions:a.extensions,extras:a.extras};return new Pr(C)}function Tme(e){let t=e.HIERARCHY,n=e.extras,i=e.extensions,o;c(t)?(d_._deprecationWarning("batchTableHierarchyExtension","The batch table HIERARCHY property has been moved to an extension. Use extensions.3DTILES_batch_table_hierarchy instead."),o=t):c(i)&&(o=i["3DTILES_batch_table_hierarchy"]);let r,a={};for(let s in e){if(!e.hasOwnProperty(s)||s==="HIERARCHY"||s==="extensions"||s==="extras")continue;let A=e[s];Array.isArray(A)?(r=c(r)?r:{},r[s]=A):a[s]=A}return{binaryProperties:a,jsonProperties:r,hierarchy:o,extras:n,extensions:i}}function Sme(e,t,n,i){let o={},r={},a={},s=0;for(let h in n){if(!n.hasOwnProperty(h))continue;if(!c(i))throw new oe(`Property ${h} requires a batch table binary.`);let m=n[h],p=xA(m);r[h]={bufferView:s},o[h]=cz(m),a[s]=p.createArrayBufferView(i.buffer,i.byteOffset+m.byteOffset,e),s++}let A={classes:{}};A.classes[t]={properties:o};let l=RA.fromJson(A);return{featureTableJson:{class:t,count:e,properties:r},bufferViewsTypedArrays:a,transcodedSchema:l,transcodedClass:l.classes[t]}}function wme(e,t,n,i,o){let r={},a={},s=0;for(let h in n){if(!n.hasOwnProperty(h))continue;let m=n[h];if(!c(i)&&!c(m.typedArray))throw new oe(`Property ${h} requires a batch table binary.`);let p=tt.sanitizeGlslIdentifier(h);(p===""||r.hasOwnProperty(p))&&(p=`property_${s}`,s++);let g=cz(m);g.name=h,r[p]=g;let C=p.toUpperCase();C.startsWith("_")||(C=`_${C}`);let _=m.typedArray;c(_)||(_=xA(m).createArrayBufferView(i.buffer,i.byteOffset+m.byteOffset,e));let E=new Lt.Attribute;E.name=C,E.count=e,E.type=m.type;let I=N.fromTypedArray(_);(I===N.INT||I===N.UNSIGNED_INT||I===N.DOUBLE)&&(d_._oneTimeWarning("Cast pnts property to floats",`Point cloud property "${C}" will be cast to a float array because INT, UNSIGNED_INT, and DOUBLE are not valid WebGL vertex attribute types. Some precision may be lost.`),_=new Float32Array(_)),E.componentDatatype=N.fromTypedArray(_),E.typedArray=_,o.push(E),a[p]={attribute:C}}let A={classes:{}};A.classes[t]={properties:r};let l=RA.fromJson(A);return{class:t,propertyAttributeJson:{properties:a},transcodedSchema:l,transcodedClass:l.classes[t]}}function cz(e){let t=Dme(e.componentType);return{type:e.type,componentType:t}}function Dme(e){switch(e){case"BYTE":return"INT8";case"UNSIGNED_BYTE":return"UINT8";case"SHORT":return"INT16";case"UNSIGNED_SHORT":return"UINT16";case"INT":return"INT32";case"UNSIGNED_INT":return"UINT32";case"FLOAT":return"FLOAT32";case"DOUBLE":return"FLOAT64"}}d_._deprecationWarning=wr;d_._oneTimeWarning=jt;var qm=d_;var eh={UNLOADED:0,LOADING:1,PROCESSING:2,READY:3,FAILED:4},Qme=Lt.FeatureIdAttribute;function Eu(e){e=e??k.EMPTY_OBJECT;let t=e.b3dmResource,n=e.baseResource,i=e.arrayBuffer,o=e.byteOffset??0,r=e.releaseGltfJson??!1,a=e.asynchronous??!0,s=e.incrementallyLoadTextures??!0,A=e.upAxis??fi.Y,l=e.forwardAxis??fi.X,f=e.loadAttributesAsTypedArray??!1,h=e.loadAttributesFor2D??!1,m=e.enablePick??!1,p=e.loadIndicesForWireframe??!1,g=e.loadPrimitiveOutline??!0,C=e.loadForClassification??!1;n=c(n)?n:t.clone(),this._b3dmResource=t,this._baseResource=n,this._arrayBuffer=i,this._byteOffset=o,this._releaseGltfJson=r,this._asynchronous=a,this._incrementallyLoadTextures=s,this._upAxis=A,this._forwardAxis=l,this._loadAttributesAsTypedArray=f,this._loadAttributesFor2D=h,this._enablePick=m,this._loadIndicesForWireframe=p,this._loadPrimitiveOutline=g,this._loadForClassification=C,this._state=eh.UNLOADED,this._promise=void 0,this._gltfLoader=void 0,this._batchLength=0,this._propertyTable=void 0,this._batchTable=void 0,this._components=void 0,this._transform=O.IDENTITY}c(Object.create)&&(Eu.prototype=Object.create(zn.prototype),Eu.prototype.constructor=Eu);Object.defineProperties(Eu.prototype,{texturesLoaded:{get:function(){return this._gltfLoader?.texturesLoaded}},cacheKey:{get:function(){}},components:{get:function(){return this._components}}});Eu.prototype.load=function(){if(c(this._promise))return this._promise;let e=az.parse(this._arrayBuffer,this._byteOffset),t=e.batchLength,n=e.featureTableJson,i=e.featureTableBinary,o=e.batchTableJson,r=e.batchTableBinary,a=new _u(n,i);t=a.getGlobalProperty("BATCH_LENGTH"),this._batchLength=t;let s=a.getGlobalProperty("RTC_CENTER",N.FLOAT,3);c(s)&&(this._transform=O.fromTranslation(u.fromArray(s))),this._batchTable={json:o,binary:r};let A=new Cu({typedArray:e.gltf,upAxis:this._upAxis,forwardAxis:this._forwardAxis,gltfResource:this._b3dmResource,baseResource:this._baseResource,releaseGltfJson:this._releaseGltfJson,incrementallyLoadTextures:this._incrementallyLoadTextures,loadAttributesAsTypedArray:this._loadAttributesAsTypedArray,loadAttributesFor2D:this._loadAttributesFor2D,enablePick:this._enablePick,loadIndicesForWireframe:this._loadIndicesForWireframe,loadPrimitiveOutline:this._loadPrimitiveOutline,loadForClassification:this._loadForClassification,renameBatchIdSemantic:!0});this._gltfLoader=A,this._state=eh.LOADING;let l=this;return this._promise=A.load().then(function(){if(!l.isDestroyed())return l._state=eh.PROCESSING,l}).catch(function(f){if(!l.isDestroyed())return Rme(l,f)}),this._promise};function Rme(e,t){return e.unload(),e._state=eh.FAILED,t=e.getError("Failed to load b3dm",t),Promise.reject(t)}Eu.prototype.process=function(e){if(this._state===eh.READY)return!0;if(this._state!==eh.PROCESSING||!this._gltfLoader.process(e))return!1;let n=this._gltfLoader.components;return n.transform=O.multiplyTransformation(this._transform,n.transform,n.transform),vme(this,n),this._components=n,this._arrayBuffer=void 0,this._state=eh.READY,!0};function vme(e,t){let n=e._batchTable,i=e._batchLength;if(i===0)return;let o;if(c(n.json))o=qm({count:i,batchTable:n.json,binaryBody:n.binary});else{let s=new Js({name:uu.BATCH_TABLE_CLASS_NAME,count:i});o=new Pr({schema:{},propertyTables:[s]})}let r=t.scene.nodes,a=r.length;for(let s=0;s<a;s++)Az(r[s]);t.structuralMetadata=o}function Az(e){let t=e.children.length;for(let i=0;i<t;i++)Az(e.children[i]);let n=e.primitives.length;for(let i=0;i<n;i++){let o=e.primitives[i],r=tt.getAttributeBySemantic(o,Pe.FEATURE_ID);if(c(r)){r.setIndex=0;let a=new Qme;a.propertyTableId=0,a.setIndex=0,a.positionalLabel="featureId_0",o.featureIds.push(a)}}}Eu.prototype.unload=function(){c(this._gltfLoader)&&!this._gltfLoader.isDestroyed()&&this._gltfLoader.unload(),this._components=void 0,this._arrayBuffer=void 0};var lz=Eu;function Iu(e){e=e??k.EMPTY_OBJECT,this._geoJson=e.geoJson,this._components=void 0}c(Object.create)&&(Iu.prototype=Object.create(zn.prototype),Iu.prototype.constructor=Iu);Object.defineProperties(Iu.prototype,{cacheKey:{get:function(){}},components:{get:function(){return this._components}}});Iu.prototype.load=function(){return Promise.resolve(this)};Iu.prototype.process=function(e){return c(this._components)||(this._components=jme(this._geoJson,e),this._geoJson=void 0),!0};function Pme(){this.lines=void 0,this.points=void 0,this.properties=void 0}function Mme(){this.features=[]}function Uw(e){let t=e[0],n=e[1],i=e[2]??0;return new u(t,n,i)}function Gw(e){let t=e.length,n=new Array(t);for(let o=0;o<t;o++)n[o]=Uw(e[o]);return[n]}function Ome(e){let t=e.length,n=new Array(t);for(let i=0;i<t;i++)n[i]=Gw(e[i])[0];return n}function fz(e){let t=e.length,n=new Array(t);for(let i=0;i<t;i++)n[i]=Gw(e[i])[0];return n}function Lme(e){let t=e.length,n=[];for(let i=0;i<t;i++){let o=fz(e[i]);Gn(n,o)}return n}function Nme(e){return[Uw(e)]}function Fme(e){let t=e.length,n=new Array(t);for(let i=0;i<t;i++)n[i]=Uw(e[i]);return n}var kme={LineString:Gw,MultiLineString:Ome,MultiPolygon:Lme,Polygon:fz,MultiPoint:Fme,Point:Nme},Ume={LineString:Ce.LINES,MultiLineString:Ce.LINES,MultiPolygon:Ce.LINES,Polygon:Ce.LINES,MultiPoint:Ce.POINTS,Point:Ce.POINTS};function uz(e,t){if(!c(e.geometry))return;let n=e.geometry.type,i=kme[n],o=Ume[n],r=e.geometry.coordinates;if(!c(i)||!c(r))return;let a=new Pme;o===Ce.LINES?a.lines=i(r):o===Ce.POINTS&&(a.points=i(r)),a.properties=e.properties,t.features.push(a)}function Gme(e,t){let n=e.features,i=n.length;for(let o=0;o<i;o++)uz(n[o],t)}var zme={FeatureCollection:Gme,Feature:uz},jb=new u;function Hme(e,t,n){let i=0,o=0,r=e.length;for(let Q=0;Q<r;Q++){let v=e[Q];if(c(v.lines)){let d=v.lines.length;for(let B=0;B<d;B++){let T=v.lines[B];i+=T.length,o+=(T.length-1)*2}}}let a=new Float32Array(i*3),s=new Float32Array(i),A=Be.createTypedArray(i,o),l=Be.fromTypedArray(A),f=new u(Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY),h=new u(Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY),m=0,p=0;for(let Q=0;Q<r;Q++){let v=e[Q];if(!c(v.lines))continue;let d=v.lines.length;for(let B=0;B<d;B++){let T=v.lines[B],R=T.length;for(let L=0;L<R;L++){let G=T[L],q=u.fromDegrees(G.x,G.y,G.z,Z.WGS84,jb),z=O.multiplyByPoint(t,q,jb);u.minimumByComponent(f,z,f),u.maximumByComponent(h,z,h),u.pack(z,a,m*3),s[m]=Q,L<R-1&&(A[p*2]=m,A[p*2+1]=m+1,p++),m++}}}let g=dt.createVertexBuffer({typedArray:a,context:n.context,usage:Me.STATIC_DRAW});g.vertexArrayDestroyable=!1;let C=dt.createVertexBuffer({typedArray:s,context:n.context,usage:Me.STATIC_DRAW});C.vertexArrayDestroyable=!1;let _=dt.createIndexBuffer({typedArray:A,context:n.context,usage:Me.STATIC_DRAW,indexDatatype:l});_.vertexArrayDestroyable=!1;let E=new Lt.Attribute;E.semantic=Pe.POSITION,E.componentDatatype=N.FLOAT,E.type=st.VEC3,E.count=i,E.min=f,E.max=h,E.buffer=g;let I=new Lt.Attribute;I.semantic=Pe.FEATURE_ID,I.setIndex=0,I.componentDatatype=N.FLOAT,I.type=st.SCALAR,I.count=i,I.buffer=C;let y=[E,I],b=new Lt.Material;b.unlit=!0;let x=new Lt.Indices;x.indexDatatype=l,x.count=A.length,x.buffer=_;let S=new Lt.FeatureIdAttribute;S.featureCount=r,S.propertyTableId=0,S.setIndex=0,S.positionalLabel="featureId_0";let P=[S],D=new Lt.Primitive;return D.attributes=y,D.indices=x,D.featureIds=P,D.primitiveType=Ce.LINES,D.material=b,D}function Vme(e,t,n){let i=0,o=e.length;for(let y=0;y<o;y++){let b=e[y];c(b.points)&&(i+=b.points.length)}let r=new Float32Array(i*3),a=new Float32Array(i),s=new u(Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY),A=new u(Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY),l=0;for(let y=0;y<o;y++){let b=e[y];if(!c(b.points))continue;let x=b.points.length;for(let S=0;S<x;S++){let P=b.points[S],D=u.fromDegrees(P.x,P.y,P.z,Z.WGS84,jb),Q=O.multiplyByPoint(t,D,jb);u.minimumByComponent(s,Q,s),u.maximumByComponent(A,Q,A),u.pack(Q,r,l*3),a[l]=y,l++}}let f=dt.createVertexBuffer({typedArray:r,context:n.context,usage:Me.STATIC_DRAW});f.vertexArrayDestroyable=!1;let h=dt.createVertexBuffer({typedArray:a,context:n.context,usage:Me.STATIC_DRAW});h.vertexArrayDestroyable=!1;let m=new Lt.Attribute;m.semantic=Pe.POSITION,m.componentDatatype=N.FLOAT,m.type=st.VEC3,m.count=i,m.min=s,m.max=A,m.buffer=f;let p=new Lt.Attribute;p.semantic=Pe.FEATURE_ID,p.setIndex=0,p.componentDatatype=N.FLOAT,p.type=st.SCALAR,p.count=i,p.buffer=h;let g=[m,p],C=new Lt.Material;C.unlit=!0;let _=new Lt.FeatureIdAttribute;_.featureCount=o,_.propertyTableId=0,_.setIndex=0,_.positionalLabel="featureId_0";let E=[_],I=new Lt.Primitive;return I.attributes=g,I.featureIds=E,I.primitiveType=Ce.POINTS,I.material=C,I}function jme(e,t){let n=new Mme,i=zme[e.type];c(i)&&i(e,n);let o=n.features,r=o.length;if(r===0)throw new oe("GeoJSON must have at least one feature");let a={};for(let Q=0;Q<r;Q++){let d=o[Q].properties??k.EMPTY_OBJECT;for(let B in d)d.hasOwnProperty(B)&&(c(a[B])||(a[B]=new Array(r)))}for(let Q=0;Q<r;Q++){let v=o[Q];for(let d in a)if(a.hasOwnProperty(d)){let B=v.properties[d]??"";a[d][Q]=B}}let s=new Gm({count:r,properties:a}),l=[new Js({id:0,count:r,jsonMetadataTable:s})],f=RA.fromJson({}),h=new Pr({schema:f,propertyTables:l}),m=new u(Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY),p=new u(Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY),g=!1,C=!1;for(let Q=0;Q<r;Q++){let v=o[Q];if(c(v.lines)){g=!0;let d=v.lines.length;for(let B=0;B<d;B++){let T=v.lines[B],R=T.length;for(let L=0;L<R;L++)u.minimumByComponent(m,T[L],m),u.maximumByComponent(p,T[L],p)}}if(c(v.points)){C=!0;let d=v.points.length;for(let B=0;B<d;B++){let T=v.points[B];u.minimumByComponent(m,T,m),u.maximumByComponent(p,T,p)}}}let _=u.midpoint(m,p,new u),E=u.fromDegrees(_.x,_.y,_.z,Z.WGS84,new u),I=Rn.eastNorthUpToFixedFrame(E,Z.WGS84,new O),y=O.inverseTransformation(I,new O),b=[];g&&b.push(Hme(o,y,t)),C&&b.push(Vme(o,y,t));let x=new Lt.Node;x.index=0,x.primitives=b;let S=[x],P=new Lt.Scene;P.nodes=S;let D=new Lt.Components;return D.scene=P,D.nodes=S,D.transform=I,D.structuralMetadata=h,D}Iu.prototype.unload=function(){this._components=void 0};var dz=Iu;var Yb={};Yb._deprecationWarning=wr;var yu=Uint32Array.BYTES_PER_ELEMENT;Yb.parse=function(e,t){let n=t??0;t=n;let i=new Uint8Array(e),o=new DataView(e);t+=yu;let r=o.getUint32(t,!0);if(r!==1)throw new oe(`Only Instanced 3D Model version 1 is supported. Version ${r} is not.`);t+=yu;let a=o.getUint32(t,!0);t+=yu;let s=o.getUint32(t,!0);if(s===0)throw new oe("featureTableJsonByteLength is zero, the feature table must be defined.");t+=yu;let A=o.getUint32(t,!0);t+=yu;let l=o.getUint32(t,!0);t+=yu;let f=o.getUint32(t,!0);t+=yu;let h=o.getUint32(t,!0);if(h!==1&&h!==0)throw new oe(`Only glTF format 0 (uri) or 1 (embedded) are supported. Format ${h} is not.`);t+=yu;let m=_o(i,t,s);t+=s;let p=new Uint8Array(e,t,A);t+=A;let g,C;l>0&&(g=_o(i,t,l),t+=l,f>0&&(C=new Uint8Array(e,t,f),C=new Uint8Array(C),t+=f));let _=n+a-t;if(_===0)throw new oe("glTF byte length must be greater than 0.");let E;return t%4===0?E=new Uint8Array(e,t,_):(Yb._deprecationWarning("i3dm-glb-unaligned","The embedded glb is not aligned to a 4-byte boundary."),E=new Uint8Array(i.subarray(t,t+_))),{gltfFormat:h,featureTableJson:m,featureTableBinary:p,batchTableJson:g,batchTableBinary:C,gltf:E}};var hz=Yb;var Nl={NOT_LOADED:0,LOADING:1,PROCESSING:2,POST_PROCESSING:3,READY:4,FAILED:5,UNLOADED:6},qb=Lt.Attribute,Yme=Lt.FeatureIdAttribute,pz=Lt.Instances;function Fl(e){e=e??k.EMPTY_OBJECT;let t=e.i3dmResource,n=e.arrayBuffer,i=e.baseResource,o=e.byteOffset??0,r=e.releaseGltfJson??!1,a=e.asynchronous??!0,s=e.incrementallyLoadTextures??!0,A=e.upAxis??fi.Y,l=e.forwardAxis??fi.X,f=e.loadAttributesAsTypedArray??!1,h=e.loadIndicesForWireframe??!1,m=e.loadPrimitiveOutline??!0,p=e.enablePick??!1;i=c(i)?i:t.clone(),this._i3dmResource=t,this._baseResource=i,this._arrayBuffer=n,this._byteOffset=o,this._releaseGltfJson=r,this._asynchronous=a,this._incrementallyLoadTextures=s,this._upAxis=A,this._forwardAxis=l,this._loadAttributesAsTypedArray=f,this._loadIndicesForWireframe=h,this._loadPrimitiveOutline=m,this._enablePick=p,this._state=Nl.NOT_LOADED,this._promise=void 0,this._gltfLoader=void 0,this._buffers=[],this._components=void 0,this._transform=O.IDENTITY,this._batchTable=void 0,this._featureTable=void 0,this._instancesLength=0}c(Object.create)&&(Fl.prototype=Object.create(zn.prototype),Fl.prototype.constructor=Fl);Object.defineProperties(Fl.prototype,{texturesLoaded:{get:function(){return this._gltfLoader?.texturesLoaded}},cacheKey:{get:function(){}},components:{get:function(){return this._components}}});Fl.prototype.load=function(){if(c(this._promise))return this._promise;let e=hz.parse(this._arrayBuffer,this._byteOffset),t=e.featureTableJson,n=e.featureTableBinary,i=e.batchTableJson,o=e.batchTableBinary,r=e.gltfFormat,a=new _u(t,n);this._featureTable=a;let s=a.getGlobalProperty("INSTANCES_LENGTH");if(a.featuresLength=s,!c(s))throw new oe("Feature table global property: INSTANCES_LENGTH must be defined");this._instancesLength=s;let A=a.getGlobalProperty("RTC_CENTER",N.FLOAT,3);c(A)&&(this._transform=O.fromTranslation(u.fromArray(A))),this._batchTable={json:i,binary:o};let l={upAxis:this._upAxis,forwardAxis:this._forwardAxis,releaseGltfJson:this._releaseGltfJson,incrementallyLoadTextures:this._incrementallyLoadTextures,loadAttributesAsTypedArray:this._loadAttributesAsTypedArray,enablePick:this._enablePick,loadIndicesForWireframe:this._loadIndicesForWireframe,loadPrimitiveOutline:this._loadPrimitiveOutline};if(r===0){let h=xc(e.gltf);h=h.replace(/[\s\0]+$/,"");let m=this._baseResource.getDerivedResource({url:h});l.gltfResource=m,l.baseResource=m}else l.gltfResource=this._i3dmResource,l.typedArray=e.gltf;let f=new Cu(l);return this._gltfLoader=f,this._state=Nl.LOADING,this._promise=f.load().then(()=>{if(!this.isDestroyed())return this._state=Nl.PROCESSING,this}).catch(h=>{if(!this.isDestroyed())throw qme(this,h)}),this._promise};function qme(e,t){return e.unload(),e._state=Nl.FAILED,e.getError("Failed to load i3dm",t)}Fl.prototype.process=function(e){if(this._state===Nl.READY)return!0;let t=this._gltfLoader,n=!1;if(this._state===Nl.PROCESSING&&(n=t.process(e)),!n)return!1;let i=t.components;return i.transform=O.multiplyTransformation(this._transform,i.transform,i.transform),Kme(this,i,e),Wme(this,i),this._components=i,this._arrayBuffer=void 0,this._state=Nl.READY,!0};function Wme(e,t){let n=e._batchTable,i=e._instancesLength;if(i===0)return;let o;if(c(n.json))o=qm({count:i,batchTable:n.json,binaryBody:n.binary});else{let r=new Js({name:uu.BATCH_TABLE_CLASS_NAME,count:i});o=new Pr({schema:{},propertyTables:[r]})}t.structuralMetadata=o}var Wb=new u,zw=new Array(4),Jme=new O;function Kme(e,t,n){let i,o=e._featureTable,r=e._instancesLength;if(r===0)return;let a=o.getGlobalProperty("RTC_CENTER",N.FLOAT,3),s=o.getGlobalProperty("EAST_NORTH_UP"),A=o.hasProperty("NORMAL_UP")||o.hasProperty("NORMAL_UP_OCT32P")||s,l=o.hasProperty("SCALE")||o.hasProperty("SCALE_NON_UNIFORM"),f=Zme(o,r),h;A&&(h=new Float32Array(4*r));let m;l&&(m=new Float32Array(3*r));let p=new Float32Array(r),g=u.unpackArray(f),C=new u,_=new u,E=new u,I=new u,y=new J,b=new qe,x=new Array(4),S=new u,P=new Array(3),D=new O;if(!c(a)||u.equals(u.unpack(a),u.ZERO)){let z=ee.fromPoints(g);for(i=0;i<g.length;i++)u.subtract(g[i],z.center,Wb),f[3*i+0]=Wb.x,f[3*i+1]=Wb.y,f[3*i+2]=Wb.z;let K=O.fromTranslation(z.center,Jme);t.transform=O.multiplyTransformation(K,t.transform,t.transform)}for(i=0;i<r;i++){C=u.clone(g[i]),c(a)&&u.add(C,u.unpack(a),C),A&&($me(o,s,i,b,C,E,_,I,y,D),qe.pack(b,x,0),h[4*i+0]=x[0],h[4*i+1]=x[1],h[4*i+2]=x[2],h[4*i+3]=x[3]),l&&(epe(o,i,S),u.pack(S,P,0),m[3*i+0]=P[0],m[3*i+1]=P[1],m[3*i+2]=P[2]);let z=o.getProperty("BATCH_ID",N.UNSIGNED_SHORT,1,i);c(z)||(z=i),p[i]=z}let Q=new pz;Q.transformInWorldSpace=!0;let v=e._buffers,d=new qb;if(d.name="Instance Translation",d.semantic=zo.TRANSLATION,d.componentDatatype=N.FLOAT,d.type=st.VEC3,d.count=r,d.typedArray=f,!A){let z=dt.createVertexBuffer({context:n.context,typedArray:f,usage:Me.STATIC_DRAW});z.vertexArrayDestroyable=!1,v.push(z),d.buffer=z}if(Q.attributes.push(d),A){let z=new qb;z.name="Instance Rotation",z.semantic=zo.ROTATION,z.componentDatatype=N.FLOAT,z.type=st.VEC4,z.count=r,z.typedArray=h,Q.attributes.push(z)}if(l){let z=new qb;if(z.name="Instance Scale",z.semantic=zo.SCALE,z.componentDatatype=N.FLOAT,z.type=st.VEC3,z.count=r,A)z.typedArray=m;else{let K=dt.createVertexBuffer({context:n.context,typedArray:m,usage:Me.STATIC_DRAW});K.vertexArrayDestroyable=!1,v.push(K),z.buffer=K}Q.attributes.push(z)}let B=new qb;B.name="Instance Feature ID",B.setIndex=0,B.semantic=zo.FEATURE_ID,B.componentDatatype=N.FLOAT,B.type=st.SCALAR,B.count=r;let T=dt.createVertexBuffer({context:n.context,typedArray:p,usage:Me.STATIC_DRAW});T.vertexArrayDestroyable=!1,v.push(T),B.buffer=T,Q.attributes.push(B);let R=new Yme;R.propertyTableId=0,R.setIndex=0,R.positionalLabel="instanceFeatureId_0",Q.featureIds.push(R);let L=t.nodes,G=L.length,q=!1;for(i=0;i<G;i++){let z=L[i];z.primitives.length>0&&(z.instances=q?Xme(Q):Q,q=!0)}}function Xme(e){let t=new pz;t.transformInWorldSpace=e.transformInWorldSpace;let n=e.attributes,i=n.length;for(let o=0;o<i;o++){let r=Ne(n[o],!1);t.attributes.push(r)}return t.featureIds=e.featureIds,t}function Zme(e,t){if(e.hasProperty("POSITION"))return e.getPropertyArray("POSITION",N.FLOAT,3);if(e.hasProperty("POSITION_QUANTIZED")){let n=e.getPropertyArray("POSITION_QUANTIZED",N.UNSIGNED_SHORT,3),i=e.getGlobalProperty("QUANTIZED_VOLUME_OFFSET",N.FLOAT,3);if(!c(i))throw new oe("Global property: QUANTIZED_VOLUME_OFFSET must be defined for quantized positions.");let o=e.getGlobalProperty("QUANTIZED_VOLUME_SCALE",N.FLOAT,3);if(!c(o))throw new oe("Global property: QUANTIZED_VOLUME_SCALE must be defined for quantized positions.");let r=new Float32Array(n.length);for(let a=0;a<n.length/3;a++)for(let s=0;s<3;s++){let A=3*a+s;r[A]=n[A]/65535*o[s]+i[s]}return r}else throw new oe("Either POSITION or POSITION_QUANTIZED must be defined for each instance.")}var mz=new Array(4);function $me(e,t,n,i,o,r,a,s,A,l){let f=e.getProperty("NORMAL_UP",N.FLOAT,3,n,zw),h=e.getProperty("NORMAL_RIGHT",N.FLOAT,3,n,mz),m=!1;if(c(f)){if(!c(h))throw new oe("To define a custom orientation, both NORMAL_UP and NORMAL_RIGHT must be defined.");u.unpack(f,0,r),u.unpack(h,0,a),m=!0}else{let p=e.getProperty("NORMAL_UP_OCT32P",N.UNSIGNED_SHORT,2,n,zw),g=e.getProperty("NORMAL_RIGHT_OCT32P",N.UNSIGNED_SHORT,2,n,mz);if(c(p)){if(!c(g))throw new oe("To define a custom orientation with oct-encoded vectors, both NORMAL_UP_OCT32P and NORMAL_RIGHT_OCT32P must be defined.");ni.octDecodeInRange(p[0],p[1],65535,r),ni.octDecodeInRange(g[0],g[1],65535,a),m=!0}else t?(Rn.eastNorthUpToFixedFrame(o,Z.WGS84,l),O.getMatrix3(l,A)):J.clone(J.IDENTITY,A)}m&&(u.cross(a,r,s),u.normalize(s,s),J.setColumn(A,0,a,A),J.setColumn(A,1,r,A),J.setColumn(A,2,s,A)),qe.fromRotationMatrix(A,i)}function epe(e,t,n){n=u.fromElements(1,1,1,n);let i=e.getProperty("SCALE",N.FLOAT,1,t);c(i)&&u.multiplyByScalar(n,i,n);let o=e.getProperty("SCALE_NON_UNIFORM",N.FLOAT,3,t,zw);c(o)&&(n.x*=o[0],n.y*=o[1],n.z*=o[2])}function tpe(e){let t=e._buffers,n=t.length;for(let i=0;i<n;i++){let o=t[i];o.isDestroyed()||o.destroy()}t.length=0}Fl.prototype.isUnloaded=function(){return this._state===Nl.UNLOADED};Fl.prototype.unload=function(){c(this._gltfLoader)&&!this._gltfLoader.isDestroyed()&&this._gltfLoader.unload(),tpe(this),this._components=void 0,this._arrayBuffer=void 0,this._state=Nl.UNLOADED};var gz=Fl;var npe={STOPPED:0,ANIMATING:1},bu=Object.freeze(npe);function Wm(){this.times=void 0,this.points=void 0,Ee.throwInstantiationError()}Wm.getPointType=function(e){if(typeof e=="number")return Number;if(e instanceof u)return u;if(e instanceof qe)return qe};Wm.prototype.evaluate=Ee.throwInstantiationError;Wm.prototype.findTimeInterval=function(e,t){let n=this.times,i=n.length;if(t=t??0,e>=n[t]){if(t+1<i&&e<n[t+1])return t;if(t+2<i&&e<n[t+2])return t+1}else if(t-1>=0&&e>=n[t-1])return t-1;let o;if(e>n[t])for(o=t;o<i-1&&!(e>=n[o]&&e<n[o+1]);++o);else for(o=t-1;o>=0&&!(e>=n[o]&&e<n[o+1]);--o);return o===i-1&&(o=i-2),o};Wm.prototype.wrapTime=function(e){let t=this.times,n=t[t.length-1],i=t[0],o=n-i,r;return e<i&&(r=Math.floor((i-e)/o)+1,e+=r*o),e>n&&(r=Math.floor((e-n)/o)+1,e-=r*o),e};Wm.prototype.clampTime=function(e){let t=this.times;return w.clamp(e,t[0],t[t.length-1])};var Ao=Wm;function Jm(e){this._value=e,this._valueType=Ao.getPointType(e)}Object.defineProperties(Jm.prototype,{value:{get:function(){return this._value}}});Jm.prototype.findTimeInterval=function(e){};Jm.prototype.wrapTime=function(e){return 0};Jm.prototype.clampTime=function(e){return 0};Jm.prototype.evaluate=function(e,t){let n=this._value,i=this._valueType;return i===Number?n:i.clone(n,t)};var Cz=Jm;function Km(e){e=e??k.EMPTY_OBJECT;let t=e.points,n=e.times;this._times=n,this._points=t,this._pointType=Ao.getPointType(t[0]),this._lastTimeIndex=0}Object.defineProperties(Km.prototype,{times:{get:function(){return this._times}},points:{get:function(){return this._points}}});Km.prototype.findTimeInterval=Ao.prototype.findTimeInterval;Km.prototype.wrapTime=Ao.prototype.wrapTime;Km.prototype.clampTime=Ao.prototype.clampTime;Km.prototype.evaluate=function(e,t){let n=this.points,i=this.times,o=this._lastTimeIndex=this.findTimeInterval(e,this._lastTimeIndex),r=(e-i[o])/(i[o+1]-i[o]);return this._pointType===Number?(1-r)*n[o]+r*n[o+1]:(c(t)||(t=new u),u.lerp(n[o],n[o+1],r,t))};var h_=Km;var _z={};_z.solve=function(e,t,n,i){let o=new Array(n.length),r=new Array(i.length),a=new Array(i.length),s;for(s=0;s<r.length;s++)r[s]=new u,a[s]=new u;o[0]=n[0]/t[0],r[0]=u.multiplyByScalar(i[0],1/t[0],r[0]);let A;for(s=1;s<o.length;++s)A=1/(t[s]-o[s-1]*e[s-1]),o[s]=n[s]*A,r[s]=u.subtract(i[s],u.multiplyByScalar(r[s-1],e[s-1],r[s]),r[s]),r[s]=u.multiplyByScalar(r[s],A,r[s]);for(A=1/(t[s]-o[s-1]*e[s-1]),r[s]=u.subtract(i[s],u.multiplyByScalar(r[s-1],e[s-1],r[s]),r[s]),r[s]=u.multiplyByScalar(r[s],A,r[s]),a[a.length-1]=r[r.length-1],s=a.length-2;s>=0;--s)a[s]=u.subtract(r[s],u.multiplyByScalar(a[s+1],o[s],a[s]),a[s]);return a};var Hw=_z;var Ez=[],Iz=[],yz=[],bz=[];function ipe(e,t,n){let i=Ez,o=yz,r=Iz,a=bz;i.length=o.length=e.length-1,r.length=a.length=e.length;let s;i[0]=r[0]=1,o[0]=0;let A=a[0];for(c(A)||(A=a[0]=new u),u.clone(t,A),s=1;s<i.length-1;++s)i[s]=o[s]=1,r[s]=4,A=a[s],c(A)||(A=a[s]=new u),u.subtract(e[s+1],e[s-1],A),u.multiplyByScalar(A,3,A);return i[s]=0,o[s]=1,r[s]=4,A=a[s],c(A)||(A=a[s]=new u),u.subtract(e[s+1],e[s-1],A),u.multiplyByScalar(A,3,A),r[s+1]=1,A=a[s+1],c(A)||(A=a[s+1]=new u),u.clone(n,A),Hw.solve(i,r,o,a)}function ope(e){let t=Ez,n=yz,i=Iz,o=bz;t.length=n.length=e.length-1,i.length=o.length=e.length;let r;t[0]=n[0]=1,i[0]=2;let a=o[0];for(c(a)||(a=o[0]=new u),u.subtract(e[1],e[0],a),u.multiplyByScalar(a,3,a),r=1;r<t.length;++r)t[r]=n[r]=1,i[r]=4,a=o[r],c(a)||(a=o[r]=new u),u.subtract(e[r+1],e[r-1],a),u.multiplyByScalar(a,3,a);return i[r]=2,a=o[r],c(a)||(a=o[r]=new u),u.subtract(e[r],e[r-1],a),u.multiplyByScalar(a,3,a),Hw.solve(t,i,n,o)}function Da(e){e=e??k.EMPTY_OBJECT;let t=e.points,n=e.times,i=e.inTangents,o=e.outTangents;this._times=n,this._points=t,this._pointType=Ao.getPointType(t[0]),this._inTangents=i,this._outTangents=o,this._lastTimeIndex=0}Object.defineProperties(Da.prototype,{times:{get:function(){return this._times}},points:{get:function(){return this._points}},inTangents:{get:function(){return this._inTangents}},outTangents:{get:function(){return this._outTangents}}});Da.createC1=function(e){e=e??k.EMPTY_OBJECT;let t=e.times,n=e.points,i=e.tangents,o=i.slice(0,i.length-1),r=i.slice(1,i.length);return new Da({times:t,points:n,inTangents:r,outTangents:o})};Da.createNaturalCubic=function(e){e=e??k.EMPTY_OBJECT;let t=e.times,n=e.points;if(n.length<3)return new h_({points:n,times:t});let i=ope(n),o=i.slice(0,i.length-1),r=i.slice(1,i.length);return new Da({times:t,points:n,inTangents:r,outTangents:o})};Da.createClampedCubic=function(e){e=e??k.EMPTY_OBJECT;let t=e.times,n=e.points,i=e.firstTangent,o=e.lastTangent,r=Ao.getPointType(n[0]);if(n.length<3)return new h_({points:n,times:t});let a=ipe(n,i,o),s=a.slice(0,a.length-1),A=a.slice(1,a.length);return new Da({times:t,points:n,inTangents:A,outTangents:s})};Da.hermiteCoefficientMatrix=new O(2,-3,0,1,-2,3,0,0,1,-2,1,0,1,-1,0,0);Da.prototype.findTimeInterval=Ao.prototype.findTimeInterval;var rpe=new se,Xm=new u;Da.prototype.wrapTime=Ao.prototype.wrapTime;Da.prototype.clampTime=Ao.prototype.clampTime;Da.prototype.evaluate=function(e,t){let n=this.points,i=this.times,o=this.inTangents,r=this.outTangents;this._lastTimeIndex=this.findTimeInterval(e,this._lastTimeIndex);let a=this._lastTimeIndex,s=i[a+1]-i[a],A=(e-i[a])/s,l=rpe;l.z=A,l.y=A*A,l.x=l.y*A,l.w=1;let f=O.multiplyByVector(Da.hermiteCoefficientMatrix,l,l);f.z*=s,f.w*=s;let h=this._pointType;return h===Number?n[a]*f.x+n[a+1]*f.y+r[a]*f.z+o[a]*f.w:(c(t)||(t=new h),t=h.multiplyByScalar(n[a],f.x,t),h.multiplyByScalar(n[a+1],f.y,Xm),h.add(t,Xm,t),h.multiplyByScalar(r[a],f.z,Xm),h.add(t,Xm,t),h.multiplyByScalar(o[a],f.w,Xm),h.add(t,Xm,t))};var Bz=Da;function Zm(e){e=e??k.EMPTY_OBJECT;let t=e.points,n=e.times;this._times=n,this._points=t,this._pointType=Ao.getPointType(t[0]),this._lastTimeIndex=0}Object.defineProperties(Zm.prototype,{times:{get:function(){return this._times}},points:{get:function(){return this._points}}});Zm.prototype.findTimeInterval=Ao.prototype.findTimeInterval;Zm.prototype.wrapTime=Ao.prototype.wrapTime;Zm.prototype.clampTime=Ao.prototype.clampTime;Zm.prototype.evaluate=function(e,t){let n=this.points;this._lastTimeIndex=this.findTimeInterval(e,this._lastTimeIndex);let i=this._lastTimeIndex,o=this._pointType;return o===Number?n[i]:(c(t)||(t=new o),o.clone(n[i],t))};var xz=Zm;function ape(e){let t=e.points,n=e.times;return function(i,o){c(o)||(o=new qe);let r=e._lastTimeIndex=e.findTimeInterval(i,e._lastTimeIndex),a=(i-n[r])/(n[r+1]-n[r]),s=t[r],A=t[r+1];return qe.fastSlerp(s,A,a,o)}}function $m(e){e=e??k.EMPTY_OBJECT;let t=e.points,n=e.times;this._times=n,this._points=t,this._evaluateFunction=ape(this),this._lastTimeIndex=0}Object.defineProperties($m.prototype,{times:{get:function(){return this._times}},points:{get:function(){return this._points}}});$m.prototype.findTimeInterval=Ao.prototype.findTimeInterval;$m.prototype.wrapTime=Ao.prototype.wrapTime;$m.prototype.clampTime=Ao.prototype.clampTime;$m.prototype.evaluate=function(e,t){return this._evaluateFunction(e,t)};var Tz=$m;var ep=Lt.AnimatedPropertyType;function Vw(e){e=e??k.EMPTY_OBJECT;let t=e.channel,n=e.runtimeAnimation,i=e.runtimeNode;this._channel=t,this._runtimeAnimation=n,this._runtimeNode=i,this._splines=[],this._path=void 0,fpe(this)}Object.defineProperties(Vw.prototype,{channel:{get:function(){return this._channel}},runtimeAnimation:{get:function(){return this._runtimeAnimation}},runtimeNode:{get:function(){return this._runtimeNode}},splines:{get:function(){return this._splines}}});function spe(e,t){let n=[],i=[],o=[],r=t.length;for(let a=0;a<r;a+=3)i.push(t[a]),n.push(t[a+1]),o.push(t[a+2]);return i.splice(0,1),o.length=o.length-1,new Bz({times:e,points:n,inTangents:i,outTangents:o})}function Sz(e,t,n,i){if(e.length===1&&t.length===1)return new Cz(t[0]);switch(n){case pu.STEP:return new xz({times:e,points:t});case pu.CUBICSPLINE:return spe(e,t);case pu.LINEAR:return i===ep.ROTATION?new Tz({times:e,points:t}):new h_({times:e,points:t})}}function cpe(e,t,n,i,o){let r=[];if(i===ep.WEIGHTS){let s=t.length/o,A,l;for(A=0;A<o;A++){let f=new Array(s),h=A;if(n===pu.CUBICSPLINE)for(l=0;l<s;l+=3)f[l]=t[h],f[l+1]=t[h+o],f[l+2]=t[h+2*o],h+=o*3;else for(l=0;l<s;l++)f[l]=t[h],h+=o;r.push(Sz(e,f,n,i))}}else r.push(Sz(e,t,n,i));return r}var Ape=new u,lpe=new qe;function fpe(e){let t=e._channel,n=t.sampler,i=n.input,o=n.output,r=n.interpolation,s=t.target.path,A=e._runtimeNode,l=c(A.morphWeights)?A.morphWeights.length:1,f=cpe(i,o,r,s,l);e._splines=f,e._path=s}Vw.prototype.animate=function(e){let t=this._splines,n=this._path,i=this._runtimeAnimation.model,o=this._runtimeNode;if(n===ep.WEIGHTS){let r=o.morphWeights,a=r.length;for(let s=0;s<a;s++){let A=t[s],l=i.clampAnimations?A.clampTime(e):A.wrapTime(e);r[s]=A.evaluate(l)}}else{if(o.userAnimated)return;{let r=t[0],a=i.clampAnimations?r.clampTime(e):r.wrapTime(e);n===ep.TRANSLATION||n===ep.SCALE?o[n]=r.evaluate(a,Ape):n===ep.ROTATION&&(o[n]=r.evaluate(a,lpe))}}};var wz=Vw;function jw(e,t,n){this._animation=t,this._name=t.name,this._runtimeChannels=void 0,this._startTime=X.clone(n.startTime),this._delay=n.delay??0,this._stopTime=X.clone(n.stopTime),this.removeOnStop=n.removeOnStop??!1,this._multiplier=n.multiplier??1,this._reverse=n.reverse??!1,this._loop=n.loop??Rc.NONE,this._animationTime=n.animationTime,this._prevAnimationDelta=void 0,this.start=new fe,this.update=new fe,this.stop=new fe,this._state=bu.STOPPED,this._computedStartTime=void 0,this._duration=void 0;let i=this;this._raiseStartEvent=function(){i.start.raiseEvent(e,i)},this._updateEventTime=0,this._raiseUpdateEvent=function(){i.update.raiseEvent(e,i,i._updateEventTime)},this._raiseStopEvent=function(){i.stop.raiseEvent(e,i)},this._model=e,this._localStartTime=void 0,this._localStopTime=void 0,upe(this)}Object.defineProperties(jw.prototype,{animation:{get:function(){return this._animation}},name:{get:function(){return this._name}},runtimeChannels:{get:function(){return this._runtimeChannels}},model:{get:function(){return this._model}},localStartTime:{get:function(){return this._localStartTime}},localStopTime:{get:function(){return this._localStopTime}},startTime:{get:function(){return this._startTime}},delay:{get:function(){return this._delay}},stopTime:{get:function(){return this._stopTime}},multiplier:{get:function(){return this._multiplier}},reverse:{get:function(){return this._reverse}},loop:{get:function(){return this._loop}},animationTime:{get:function(){return this._animationTime}}});function upe(e){let t=Number.MAX_VALUE,n=-Number.MAX_VALUE,i=e._model.sceneGraph,r=e._animation.channels,a=r.length,s=[];for(let A=0;A<a;A++){let l=r[A],f=l.target;if(!c(f))continue;let h=f.node.index,m=i._runtimeNodes[h],p=new wz({channel:l,runtimeAnimation:e,runtimeNode:m}),g=l.sampler.input;t=Math.min(t,g[0]),n=Math.max(n,g[g.length-1]),s.push(p)}e._runtimeChannels=s,e._localStartTime=t,e._localStopTime=n}jw.prototype.animate=function(e){let t=this._runtimeChannels,n=t.length;for(let i=0;i<n;i++)t[i].animate(e)};var Dz=jw;function kl(e){this.animationAdded=new fe,this.animationRemoved=new fe,this.animateWhilePaused=!1,this._model=e,this._runtimeAnimations=[],this._previousTime=void 0}Object.defineProperties(kl.prototype,{length:{get:function(){return this._runtimeAnimations.length}},model:{get:function(){return this._model}}});function Yw(e,t,n){let i=e._model,o=new Dz(i,t,n);return e._runtimeAnimations.push(o),e.animationAdded.raiseEvent(i,o),o}kl.prototype.add=function(e){e=e??k.EMPTY_OBJECT;let n=this._model.sceneGraph.components.animations,i=e.index;if(c(i))return Yw(this,n[i],e);let o=n.length;for(let r=0;r<o;++r)if(n[r].name===e.name){i=r;break}return Yw(this,n[i],e)};kl.prototype.addAll=function(e){e=e??k.EMPTY_OBJECT;let n=this._model.sceneGraph.components.animations,i=[],o=n.length;for(let r=0;r<o;++r){let a=Yw(this,n[r],e);i.push(a)}return i};kl.prototype.remove=function(e){if(!c(e))return!1;let t=this._runtimeAnimations,n=t.indexOf(e);return n!==-1?(t.splice(n,1),this.animationRemoved.raiseEvent(this._model,e),!0):!1};kl.prototype.removeAll=function(){let e=this._model,t=this._runtimeAnimations,n=t.length;this._runtimeAnimations.length=0;for(let i=0;i<n;++i)this.animationRemoved.raiseEvent(e,t[i])};kl.prototype.contains=function(e){return c(e)?this._runtimeAnimations.indexOf(e)!==-1:!1};kl.prototype.get=function(e){return this._runtimeAnimations[e]};var Jb=[];function dpe(e,t,n){return function(){e.animationRemoved.raiseEvent(t,n)}}kl.prototype.update=function(e){let t=this._runtimeAnimations,n=t.length;if(n===0)return this._previousTime=void 0,!1;if(!this.animateWhilePaused&&X.equals(e.time,this._previousTime))return!1;this._previousTime=X.clone(e.time,this._previousTime);let i=!1,o=e.time,r=this._model;for(let a=0;a<n;++a){let s=t[a];c(s._computedStartTime)||(s._computedStartTime=X.addSeconds(s.startTime??o,s.delay,new X)),c(s._duration)||(s._duration=s.localStopTime*(1/s.multiplier));let A=s._computedStartTime,l=s._duration,f=s.stopTime,h=X.lessThanOrEquals(A,o),m=c(f)&&X.greaterThan(o,f),p=0;if(l!==0){let _=X.secondsDifference(m?f:o,A);p=c(s._animationTime)?s._animationTime(l,_):_/l}let g=s.loop===Rc.REPEAT||s.loop===Rc.MIRRORED_REPEAT,C=(h||g&&!c(s.startTime))&&(p<=1||g)&&!m;if(p===s._prevAnimationDelta){let _=s._state===bu.STOPPED;if(C!==_)continue}if(s._prevAnimationDelta=p,C||s._state===bu.ANIMATING){if(C&&s._state===bu.STOPPED&&(s._state=bu.ANIMATING,s.start.numberOfListeners>0&&e.afterRender.push(s._raiseStartEvent)),s.loop===Rc.REPEAT)p=p-Math.floor(p);else if(s.loop===Rc.MIRRORED_REPEAT){let E=Math.floor(p),I=p-E;p=E%2===1?1-I:I}s.reverse&&(p=1-p);let _=p*l*s.multiplier;_=w.clamp(_,s.localStartTime,s.localStopTime),s.animate(_),s.update.numberOfListeners>0&&(s._updateEventTime=_,e.afterRender.push(s._raiseUpdateEvent)),i=!0,C||(s._state=bu.STOPPED,s.stop.numberOfListeners>0&&e.afterRender.push(s._raiseStopEvent),s.removeOnStop&&Jb.push(s))}}n=Jb.length;for(let a=0;a<n;++a){let s=Jb[a];t.splice(t.indexOf(s),1),e.afterRender.push(dpe(this,r,s))}return Jb.length=0,i};var Qz=kl;function th(e){this._model=e.model,this._featureTable=e.featureTable,this._featureId=e.featureId,this._color=void 0}Object.defineProperties(th.prototype,{show:{get:function(){return this._featureTable.getShow(this._featureId)},set:function(e){this._featureTable.setShow(this._featureId,e)}},color:{get:function(){return c(this._color)||(this._color=new F),this._featureTable.getColor(this._featureId,this._color)},set:function(e){this._featureTable.setColor(this._featureId,e)}},primitive:{get:function(){return this._model}},featureTable:{get:function(){return this._featureTable}},featureId:{get:function(){return this._featureId}}});th.prototype.hasProperty=function(e){return this._featureTable.hasProperty(this._featureId,e)};th.prototype.getProperty=function(e){return this._featureTable.getProperty(this._featureId,e)};th.prototype.getPropertyInherited=function(e){return this._featureTable.hasPropertyBySemantic(this._featureId,e)?this._featureTable.getPropertyBySemantic(this._featureId,e):this._featureTable.getProperty(this._featureId,e)};th.prototype.getPropertyIds=function(e){return this._featureTable.getPropertyIds(e)};th.prototype.setProperty=function(e,t){return this._featureTable.setProperty(this._featureId,e,t)};var Rz=th;var m_={ALL_OPAQUE:0,ALL_TRANSLUCENT:1,OPAQUE_AND_TRANSLUCENT:2};m_.getStyleCommandsNeeded=function(e,t){return t===0?m_.ALL_OPAQUE:t===e?m_.ALL_TRANSLUCENT:m_.OPAQUE_AND_TRANSLUCENT};var Bu=Object.freeze(m_);var xu={GLTF:"GLTF",TILE_GLTF:"TILE_GLTF",TILE_B3DM:"B3DM",TILE_I3DM:"I3DM",TILE_PNTS:"PNTS",TILE_GEOJSON:"TILE_GEOJSON"};xu.is3DTiles=function(e){switch(e){case xu.TILE_GLTF:case xu.TILE_B3DM:case xu.TILE_I3DM:case xu.TILE_PNTS:case xu.TILE_GEOJSON:return!0;case xu.GLTF:return!1}};var lo=Object.freeze(xu);function $i(e){let t=e.model,n=e.propertyTable;this._propertyTable=n,this._model=t,this._features=void 0,this._featuresLength=0,this._batchTexture=void 0,this._styleCommandsNeededDirty=!1,this._styleCommandsNeeded=Bu.ALL_OPAQUE,hpe(this)}Object.defineProperties($i.prototype,{batchTexture:{get:function(){return this._batchTexture}},featuresLength:{get:function(){return this._featuresLength}},batchTextureByteLength:{get:function(){return c(this._batchTexture)?this._batchTexture.byteLength:0}},styleCommandsNeededDirty:{get:function(){return this._styleCommandsNeededDirty}}});function hpe(e){let t=e._model,n=lo.is3DTiles(t.type),i=e._propertyTable.count;if(i===0)return;let o,r=new Array(i);if(n){let a=t.content;for(o=0;o<i;o++)r[o]=new TA(a,o)}else for(o=0;o<i;o++)r[o]=new Rz({model:t,featureId:o,featureTable:e});e._features=r,e._featuresLength=i,e._batchTexture=new Hs({featuresLength:i,owner:e,statistics:n?t.content.tileset.statistics:void 0})}$i.prototype.update=function(e){this._styleCommandsNeededDirty=!1,this._batchTexture.update(void 0,e);let t=Bu.getStyleCommandsNeeded(this._featuresLength,this._batchTexture.translucentFeaturesLength);this._styleCommandsNeeded!==t&&(this._styleCommandsNeededDirty=!0,this._styleCommandsNeeded=t)};$i.prototype.setShow=function(e,t){this._batchTexture.setShow(e,t)};$i.prototype.setAllShow=function(e){this._batchTexture.setAllShow(e)};$i.prototype.getShow=function(e){return this._batchTexture.getShow(e)};$i.prototype.setColor=function(e,t){this._batchTexture.setColor(e,t)};$i.prototype.setAllColor=function(e){this._batchTexture.setAllColor(e)};$i.prototype.getColor=function(e,t){return this._batchTexture.getColor(e,t)};$i.prototype.getPickColor=function(e){return this._batchTexture.getPickColor(e)};$i.prototype.getFeature=function(e){return this._features[e]};$i.prototype.hasProperty=function(e,t){return this._propertyTable.hasProperty(e,t)};$i.prototype.hasPropertyBySemantic=function(e,t){return this._propertyTable.hasPropertyBySemantic(e,t)};$i.prototype.getProperty=function(e,t){return this._propertyTable.getProperty(e,t)};$i.prototype.getPropertyBySemantic=function(e,t){return this._propertyTable.getPropertyBySemantic(e,t)};$i.prototype.getPropertyIds=function(e){return this._propertyTable.getPropertyIds(e)};$i.prototype.setProperty=function(e,t,n){return this._propertyTable.setProperty(e,t,n)};$i.prototype.isClass=function(e,t){return this._propertyTable.isClass(e,t)};$i.prototype.isExactClass=function(e,t){return this._propertyTable.isExactClass(e,t)};$i.prototype.getExactClassName=function(e){return this._propertyTable.getExactClassName(e)};var mpe=new F;$i.prototype.applyStyle=function(e){if(!c(e)){this.setAllColor(Hs.DEFAULT_COLOR_VALUE),this.setAllShow(Hs.DEFAULT_SHOW_VALUE);return}for(let t=0;t<this._featuresLength;t++){let n=this.getFeature(t),i=c(e.color)?e.color.evaluateColor(n,mpe)??Hs.DEFAULT_COLOR_VALUE:Hs.DEFAULT_COLOR_VALUE,o=c(e.show)?e.show.evaluate(n)??Hs.DEFAULT_SHOW_VALUE:Hs.DEFAULT_SHOW_VALUE;this.setColor(t,i),this.setShow(t,o)}};$i.prototype.isDestroyed=function(){return!1};$i.prototype.destroy=function(e){this._batchTexture=this._batchTexture&&this._batchTexture.destroy(),pe(this)};var vz=$i;var Pz={name:"TilesetPipelineStage"};Pz.process=function(e,t,n){if(t.hasSkipLevelOfDetail(n)){e.shaderBuilder.addDefine("POLYGON_OFFSET",void 0,te.FRAGMENT);let r={u_polygonOffset:function(){return U.ZERO}};e.uniformMap=Et(r,e.uniformMap),e.hasSkipLevelOfDetail=!0}let i=e.renderStateOptions;i.stencilTest=Qt.setCesium3DTileBit(),i.stencilMask=Qt.CESIUM_3D_TILE_MASK};var Mz=Pz;var Oz=`// robust iterative solution without trig functions
// https://github.com/0xfaded/ellipse_demo/issues/1
// https://stackoverflow.com/questions/22959698/distance-from-given-point-to-given-ellipse
//
// This version uses only a single iteration for best performance. For fog
// rendering, the difference is negligible.
vec2 nearestPointOnEllipseFast(vec2 pos, vec2 radii) {
    vec2 p = abs(pos);
    vec2 inverseRadii = 1.0 / radii;
    vec2 evoluteScale = (radii.x * radii.x - radii.y * radii.y) * vec2(1.0, -1.0) * inverseRadii;

    // We describe the ellipse parametrically: v = radii * vec2(cos(t), sin(t))
    // but store the cos and sin of t in a vec2 for efficiency.
    // Initial guess: t = cos(pi/4)
    vec2 tTrigs = vec2(0.70710678118);
    vec2 v = radii * tTrigs;

    // Find the evolute of the ellipse (center of curvature) at v.
    vec2 evolute = evoluteScale * tTrigs * tTrigs * tTrigs;
    // Find the (approximate) intersection of p - evolute with the ellipsoid.
    vec2 q = normalize(p - evolute) * length(v - evolute);
    // Update the estimate of t.
    tTrigs = (q + evolute) * inverseRadii;
    tTrigs = normalize(clamp(tTrigs, 0.0, 1.0));
    v = radii * tTrigs;

    return v * sign(pos);
}

vec3 computeEllipsoidPositionWC(vec3 positionMC) {
    // Get the world-space position and project onto a meridian plane of
    // the ellipsoid
    vec3 positionWC = (czm_model * vec4(positionMC, 1.0)).xyz;

    vec2 positionEllipse = vec2(length(positionWC.xy), positionWC.z);
    vec2 nearestPoint = nearestPointOnEllipseFast(positionEllipse, czm_ellipsoidRadii.xz);

    // Reconstruct a 3D point in world space
    return vec3(nearestPoint.x * normalize(positionWC.xy), nearestPoint.y);
}

void applyFog(inout vec4 color, vec4 groundAtmosphereColor, vec3 lightDirection, float distanceToCamera) {

    vec3 fogColor = groundAtmosphereColor.rgb;

    // If there is dynamic lighting, apply that to the fog.
    const float NONE = 0.0;
    if (czm_atmosphereDynamicLighting != NONE) {
        float darken = clamp(dot(normalize(czm_viewerPositionWC), lightDirection), czm_fogMinimumBrightness, 1.0);
        fogColor *= darken;
    }

    // Tonemap if HDR rendering is disabled
    #ifndef HDR
        fogColor.rgb = czm_pbrNeutralTonemapping(fogColor.rgb);
        fogColor.rgb = czm_inverseGamma(fogColor.rgb);
    #endif

    vec3 withFog = czm_fog(distanceToCamera, color.rgb, fogColor, czm_fogVisualDensityScalar);
    color = vec4(withFog, color.a);
}

void atmosphereStage(inout vec4 color, in ProcessedAttributes attributes) {
    vec3 rayleighColor;
    vec3 mieColor;
    float opacity;

    vec3 positionWC;
    vec3 lightDirection;

    // When the camera is in space, compute the position per-fragment for
    // more accurate ground atmosphere. All other cases will use
    //
    // The if condition will be added in https://github.com/CesiumGS/cesium/issues/11717
    if (false) {
        positionWC = computeEllipsoidPositionWC(attributes.positionMC);
        lightDirection = czm_getDynamicAtmosphereLightDirection(positionWC, czm_atmosphereDynamicLighting);

        // The fog color is derived from the ground atmosphere color
        czm_computeGroundAtmosphereScattering(
            positionWC,
            lightDirection,
            rayleighColor,
            mieColor,
            opacity
        );
    } else {
        positionWC = attributes.positionWC;
        lightDirection = czm_getDynamicAtmosphereLightDirection(positionWC, czm_atmosphereDynamicLighting);
        rayleighColor = v_atmosphereRayleighColor;
        mieColor = v_atmosphereMieColor;
        opacity = v_atmosphereOpacity;
    }

    //color correct rayleigh and mie colors
    const bool ignoreBlackPixels = true;
    rayleighColor = czm_applyHSBShift(rayleighColor, czm_atmosphereHsbShift, ignoreBlackPixels);
    mieColor = czm_applyHSBShift(mieColor, czm_atmosphereHsbShift, ignoreBlackPixels);

    vec4 groundAtmosphereColor = czm_computeAtmosphereColor(positionWC, lightDirection, rayleighColor, mieColor, opacity);

    if (u_isInFog) {
        float distanceToCamera = length(attributes.positionEC);
        applyFog(color, groundAtmosphereColor, lightDirection, distanceToCamera);
    } else {
        // Ground atmosphere
    }
}
`;var Lz=`void atmosphereStage(ProcessedAttributes attributes) {
    vec3 lightDirection = czm_getDynamicAtmosphereLightDirection(v_positionWC, czm_atmosphereDynamicLighting);

    czm_computeGroundAtmosphereScattering(
        // This assumes the geometry stage came before this.
        v_positionWC,
        lightDirection,
        v_atmosphereRayleighColor,
        v_atmosphereMieColor,
        v_atmosphereOpacity
    );
}
`;var Nz={name:"AtmospherePipelineStage"};Nz.process=function(e,t,n){let i=e.shaderBuilder;i.addDefine("HAS_ATMOSPHERE",void 0,te.BOTH),i.addDefine("COMPUTE_POSITION_WC_ATMOSPHERE",void 0,te.BOTH),i.addVarying("vec3","v_atmosphereRayleighColor"),i.addVarying("vec3","v_atmosphereMieColor"),i.addVarying("float","v_atmosphereOpacity"),i.addVertexLines([Lz]),i.addFragmentLines([Oz]),i.addUniform("bool","u_isInFog",te.FRAGMENT),e.uniformMap.u_isInFog=function(){let o=u.distance(n.camera.positionWC,t.boundingSphere.center);return w.fog(o,n.fog.density)>w.EPSILON3}};var Fz=Nz;var kz=`#ifdef DIFFUSE_IBL
vec3 sampleDiffuseEnvironment(vec3 cubeDir)
{
    #ifdef CUSTOM_SPHERICAL_HARMONICS
        return czm_sphericalHarmonics(cubeDir, model_sphericalHarmonicCoefficients); 
    #else
        return czm_sphericalHarmonics(cubeDir, czm_sphericalHarmonicCoefficients); 
    #endif
}
#endif

#ifdef SPECULAR_IBL
vec3 sampleSpecularEnvironment(vec3 cubeDir, float roughness)
{
    #ifdef CUSTOM_SPECULAR_IBL
        float lod = roughness * model_specularEnvironmentMapsMaximumLOD;
        return czm_textureCube(model_specularEnvironmentMaps, cubeDir, lod).rgb;
    #else
        float lod = roughness * czm_specularEnvironmentMapsMaximumLOD;
        return czm_textureCube(czm_specularEnvironmentMaps, cubeDir, lod).rgb;
    #endif
}
vec3 computeSpecularIBL(vec3 cubeDir, float NdotV, vec3 f0, float roughness)
{
    // see https://bruop.github.io/ibl/ at Single Scattering Results
    // Roughness dependent fresnel, from Fdez-Aguera
    vec3 f90 = max(vec3(1.0 - roughness), f0);
    vec3 F = fresnelSchlick2(f0, f90, NdotV);

    vec2 brdfLut = texture(czm_brdfLut, vec2(NdotV, roughness)).rg;
    vec3 specularSample = sampleSpecularEnvironment(cubeDir, roughness);

    return specularSample * (F * brdfLut.x + brdfLut.y);
}
#endif

#if defined(DIFFUSE_IBL) || defined(SPECULAR_IBL)
/**
 * Compute the light contributions from environment maps and spherical harmonic coefficients.
 * See Fdez-Aguera, https://www.jcgt.org/published/0008/01/03/paper.pdf, for explanation
 * of the single- and multi-scattering terms.
 *
 * @param {vec3} viewDirectionEC Unit vector pointing from the fragment to the eye position.
 * @param {vec3} normalEC The surface normal in eye coordinates.
 * @param {czm_modelMaterial} The material properties.
 * @return {vec3} The computed HDR color.
 */
vec3 textureIBL(vec3 viewDirectionEC, vec3 normalEC, czm_modelMaterial material) {
    vec3 f0 = material.specular;
    float roughness = material.roughness;
    float specularWeight = 1.0;
    #ifdef USE_SPECULAR
        specularWeight = material.specularWeight;
    #endif
    float NdotV = clamp(dot(normalEC, viewDirectionEC), 0.0, 1.0);

    // see https://bruop.github.io/ibl/ at Single Scattering Results
    // Roughness dependent fresnel, from Fdez-Aguera
    vec3 f90 = max(vec3(1.0 - roughness), f0);
    vec3 singleScatterFresnel = fresnelSchlick2(f0, f90, NdotV);

    vec2 brdfLut = texture(czm_brdfLut, vec2(NdotV, roughness)).rg;
    vec3 FssEss = specularWeight * (singleScatterFresnel * brdfLut.x + brdfLut.y);

    #ifdef DIFFUSE_IBL
        vec3 normalMC = normalize(model_iblReferenceFrameMatrix * normalEC);
        vec3 irradiance = sampleDiffuseEnvironment(normalMC);

        vec3 averageFresnel = f0 + (1.0 - f0) / 21.0;
        float Ems = specularWeight * (1.0 - brdfLut.x - brdfLut.y);
        vec3 FmsEms = FssEss * averageFresnel * Ems / (1.0 - averageFresnel * Ems);
        vec3 dielectricScattering = (1.0 - FssEss - FmsEms) * material.diffuse;
        vec3 diffuseContribution = irradiance * (FmsEms + dielectricScattering) * model_iblFactor.x;
    #else
        vec3 diffuseContribution = vec3(0.0);
    #endif

    #ifdef USE_ANISOTROPY
        // Bend normal to account for anisotropic distortion of specular reflection
        vec3 anisotropyDirection = material.anisotropicB;
        vec3 anisotropicTangent = cross(anisotropyDirection, viewDirectionEC);
        vec3 anisotropicNormal = cross(anisotropicTangent, anisotropyDirection);
        float bendFactor = 1.0 - material.anisotropyStrength * (1.0 - roughness);
        float bendFactorPow4 = bendFactor * bendFactor * bendFactor * bendFactor;
        vec3 bentNormal = normalize(mix(anisotropicNormal, normalEC, bendFactorPow4));
        vec3 reflectEC = reflect(-viewDirectionEC, bentNormal);
    #else
        vec3 reflectEC = reflect(-viewDirectionEC, normalEC);
    #endif

    #ifdef SPECULAR_IBL
        vec3 reflectMC = normalize(model_iblReferenceFrameMatrix * reflectEC);
        vec3 radiance = sampleSpecularEnvironment(reflectMC, roughness);
        vec3 specularContribution = radiance * FssEss * model_iblFactor.y;
    #else
        vec3 specularContribution = vec3(0.0);
    #endif

    return diffuseContribution + specularContribution;
}
#endif
`;var Uz={name:"ImageBasedLightingPipelineStage"},ppe=new U;Uz.process=function(e,t,n){let i=t.imageBasedLighting,o=t.environmentMapManager,r=e.shaderBuilder,a;c(i.specularEnvironmentMaps)||(a=o.radianceCubeMap);let s=i.sphericalHarmonicCoefficients??o.sphericalHarmonicCoefficients;r.addDefine("USE_IBL_LIGHTING",void 0,te.FRAGMENT),r.addUniform("vec2","model_iblFactor",te.FRAGMENT),LC.isSupported(n.context)&&((i.useSphericalHarmonics||i.useSpecularEnvironmentMaps||i.enabled)&&r.addUniform("mat3","model_iblReferenceFrameMatrix",te.FRAGMENT),c(a)&&r.addDefine("COMPUTE_POSITION_WC_ATMOSPHERE",void 0,te.BOTH),c(s)&&c(s[0])?(r.addDefine("DIFFUSE_IBL",void 0,te.FRAGMENT),r.addDefine("CUSTOM_SPHERICAL_HARMONICS",void 0,te.FRAGMENT),r.addUniform("vec3","model_sphericalHarmonicCoefficients[9]",te.FRAGMENT)):i.useDefaultSphericalHarmonics&&r.addDefine("DIFFUSE_IBL",void 0,te.FRAGMENT),c(i.specularEnvironmentCubeMap)&&i.specularEnvironmentCubeMap.ready||c(a)?(r.addDefine("SPECULAR_IBL",void 0,te.FRAGMENT),r.addDefine("CUSTOM_SPECULAR_IBL",void 0,te.FRAGMENT),r.addUniform("samplerCube","model_specularEnvironmentMaps",te.FRAGMENT),r.addUniform("float","model_specularEnvironmentMapsMaximumLOD",te.FRAGMENT)):t.useDefaultSpecularMaps&&r.addDefine("SPECULAR_IBL",void 0,te.FRAGMENT)),r.addFragmentLines(kz);let A={model_iblFactor:function(){return U.multiplyByScalar(i.imageBasedLightingFactor,o?.intensity||1,ppe)},model_iblReferenceFrameMatrix:function(){return t._iblReferenceFrameMatrix},model_sphericalHarmonicCoefficients:function(){return s},model_specularEnvironmentMaps:function(){return i.specularEnvironmentCubeMap.texture},model_specularEnvironmentMapsMaximumLOD:function(){return i.specularEnvironmentCubeMap.maximumMipmapLevel}};c(a)&&(A.model_specularEnvironmentMaps=function(){return a},A.model_specularEnvironmentMapsMaximumLOD=function(){return o.maximumMipmapLevel}),e.uniformMap=Et(A,e.uniformMap)};var Gz=Uz;var gpe=w.EPSILON16;function Ww(e){e=e??k.EMPTY_OBJECT;let t=e.stage,n=e.runtimeArticulation;this._stage=t,this._runtimeArticulation=n,this._name=t.name,this._type=t.type,this._minimumValue=t.minimumValue,this._maximumValue=t.maximumValue,this._currentValue=t.initialValue}Object.defineProperties(Ww.prototype,{stage:{get:function(){return this._stage}},runtimeArticulation:{get:function(){return this._runtimeArticulation}},name:{get:function(){return this._name}},type:{get:function(){return this._type}},minimumValue:{get:function(){return this._minimumValue}},maximumValue:{get:function(){return this._maximumValue}},currentValue:{get:function(){return this._currentValue},set:function(e){e=w.clamp(e,this.minimumValue,this.maximumValue),w.equalsEpsilon(this._currentValue,e,gpe)||(this._currentValue=e,this.runtimeArticulation._dirty=!0)}}});var Cpe=new u,qw=new J;Ww.prototype.applyStageToMatrix=function(e){let t=this.type,n=this.currentValue,i=Cpe,o;switch(t){case is.XROTATE:o=J.fromRotationX(w.toRadians(n),qw),e=O.multiplyByMatrix3(e,o,e);break;case is.YROTATE:o=J.fromRotationY(w.toRadians(n),qw),e=O.multiplyByMatrix3(e,o,e);break;case is.ZROTATE:o=J.fromRotationZ(w.toRadians(n),qw),e=O.multiplyByMatrix3(e,o,e);break;case is.XTRANSLATE:i.x=n,i.y=0,i.z=0,e=O.multiplyByTranslation(e,i,e);break;case is.YTRANSLATE:i.x=0,i.y=n,i.z=0,e=O.multiplyByTranslation(e,i,e);break;case is.ZTRANSLATE:i.x=0,i.y=0,i.z=n,e=O.multiplyByTranslation(e,i,e);break;case is.XSCALE:i.x=n,i.y=1,i.z=1,e=O.multiplyByScale(e,i,e);break;case is.YSCALE:i.x=1,i.y=n,i.z=1,e=O.multiplyByScale(e,i,e);break;case is.ZSCALE:i.x=1,i.y=1,i.z=n,e=O.multiplyByScale(e,i,e);break;case is.UNIFORMSCALE:e=O.multiplyByUniformScale(e,n,e);break;default:break}return e};var zz=Ww;function Kb(e){e=e??k.EMPTY_OBJECT;let t=e.articulation,n=e.sceneGraph;this._articulation=t,this._sceneGraph=n,this._name=t.name,this._runtimeStages=[],this._runtimeStagesByName={},this._runtimeNodes=[],this._dirty=!0,_pe(this)}Object.defineProperties(Kb.prototype,{articulation:{get:function(){return this._articulation}},sceneGraph:{get:function(){return this._sceneGraph}},name:{get:function(){return this._name}},runtimeStages:{get:function(){return this._runtimeStages}},runtimeNodes:{get:function(){return this._runtimeNodes}}});function _pe(e){let n=e.articulation.stages,i=n.length,o=e._runtimeStages,r=e._runtimeStagesByName;for(let a=0;a<i;a++){let s=n[a],A=new zz({stage:s,runtimeArticulation:e});o.push(A);let l=s.name;r[l]=A}}Kb.prototype.setArticulationStage=function(e,t){let n=this._runtimeStagesByName[e];c(n)&&(n.currentValue=t)};var Epe=new O,Ipe=new O;Kb.prototype.apply=function(){if(!this._dirty)return;this._dirty=!1;let e=O.clone(O.IDENTITY,Epe),t,n=this._runtimeStages,i=n.length;for(t=0;t<i;t++)e=n[t].applyStageToMatrix(e);let o=this._runtimeNodes,r=o.length;for(t=0;t<r;t++){let a=o[t],s=O.multiplyTransformation(a.originalTransform,e,Ipe);a.transform=s}};var Hz=Kb;var Vz=`void modelColorStage(inout czm_modelMaterial material)
{
    material.diffuse = mix(material.diffuse, model_color.rgb, model_colorBlend);
    float highlight = ceil(model_colorBlend);
    material.diffuse *= mix(model_color.rgb, vec3(1.0), highlight);
    material.alpha *= model_color.a;
}
`;var tp={name:"ModelColorPipelineStage",COLOR_UNIFORM_NAME:"model_color",COLOR_BLEND_UNIFORM_NAME:"model_colorBlend"};tp.process=function(e,t,n){let i=e.shaderBuilder;i.addDefine("HAS_MODEL_COLOR",void 0,te.FRAGMENT),i.addFragmentLines(Vz);let o={},r=t.color;r.alpha===0&&!t.hasSilhouette(n)&&(e.renderStateOptions.colorMask={red:!1,green:!1,blue:!1,alpha:!1}),r.alpha<1&&(e.alphaOptions.pass=Ye.TRANSLUCENT),i.addUniform("vec4",tp.COLOR_UNIFORM_NAME,te.FRAGMENT),o[tp.COLOR_UNIFORM_NAME]=function(){return t.color},i.addUniform("float",tp.COLOR_BLEND_UNIFORM_NAME,te.FRAGMENT),o[tp.COLOR_BLEND_UNIFORM_NAME]=function(){return ns.getColorBlend(t.colorBlendMode,t.colorBlendAmount)},e.uniformMap=Et(o,e.uniformMap)};var p_=tp;var jz=`#ifdef USE_CLIPPING_PLANES_FLOAT_TEXTURE
vec4 getClippingPlane(
    highp sampler2D packedClippingPlanes,
    int clippingPlaneNumber,
    mat4 transform
) {
    int pixY = clippingPlaneNumber / CLIPPING_PLANES_TEXTURE_WIDTH;
    int pixX = clippingPlaneNumber - (pixY * CLIPPING_PLANES_TEXTURE_WIDTH);
    float pixelWidth = 1.0 / float(CLIPPING_PLANES_TEXTURE_WIDTH);
    float pixelHeight = 1.0 / float(CLIPPING_PLANES_TEXTURE_HEIGHT);
    float u = (float(pixX) + 0.5) * pixelWidth; // sample from center of pixel
    float v = (float(pixY) + 0.5) * pixelHeight;
    vec4 plane = texture(packedClippingPlanes, vec2(u, v));
    return czm_transformPlane(plane, transform);
}
#else
// Handle uint8 clipping texture instead
vec4 getClippingPlane(
    highp sampler2D packedClippingPlanes,
    int clippingPlaneNumber,
    mat4 transform
) {
    int clippingPlaneStartIndex = clippingPlaneNumber * 2; // clipping planes are two pixels each
    int pixY = clippingPlaneStartIndex / CLIPPING_PLANES_TEXTURE_WIDTH;
    int pixX = clippingPlaneStartIndex - (pixY * CLIPPING_PLANES_TEXTURE_WIDTH);
    float pixelWidth = 1.0 / float(CLIPPING_PLANES_TEXTURE_WIDTH);
    float pixelHeight = 1.0 / float(CLIPPING_PLANES_TEXTURE_HEIGHT);
    float u = (float(pixX) + 0.5) * pixelWidth; // sample from center of pixel
    float v = (float(pixY) + 0.5) * pixelHeight;
    vec4 oct32 = texture(packedClippingPlanes, vec2(u, v)) * 255.0;
    vec2 oct = vec2(oct32.x * 256.0 + oct32.y, oct32.z * 256.0 + oct32.w);
    vec4 plane;
    plane.xyz = czm_octDecode(oct, 65535.0);
    plane.w = czm_unpackFloat(texture(packedClippingPlanes, vec2(u + pixelWidth, v)));
    return czm_transformPlane(plane, transform);
}
#endif

float clip(vec4 fragCoord, sampler2D clippingPlanes, mat4 clippingPlanesMatrix) {
    vec4 position = czm_windowToEyeCoordinates(fragCoord);
    vec3 clipNormal = vec3(0.0);
    vec3 clipPosition = vec3(0.0);
    float pixelWidth = czm_metersPerPixel(position);
    
    #ifdef UNION_CLIPPING_REGIONS
    float clipAmount; // For union planes, we want to get the min distance. So we set the initial value to the first plane distance in the loop below.
    #else
    float clipAmount = 0.0;
    bool clipped = true;
    #endif

    for (int i = 0; i < CLIPPING_PLANES_LENGTH; ++i) {
        vec4 clippingPlane = getClippingPlane(clippingPlanes, i, clippingPlanesMatrix);
        clipNormal = clippingPlane.xyz;
        clipPosition = -clippingPlane.w * clipNormal;
        float amount = dot(clipNormal, (position.xyz - clipPosition)) / pixelWidth;
        
        #ifdef UNION_CLIPPING_REGIONS
        clipAmount = czm_branchFreeTernary(i == 0, amount, min(amount, clipAmount));
        if (amount <= 0.0) {
            discard;
        }
        #else
        clipAmount = max(amount, clipAmount);
        clipped = clipped && (amount <= 0.0);
        #endif
    }

    #ifndef UNION_CLIPPING_REGIONS
    if (clipped) {
        discard;
    }
    #endif
    
    return clipAmount;
}

void modelClippingPlanesStage(inout vec4 color)
{
    float clipDistance = clip(gl_FragCoord, model_clippingPlanes, model_clippingPlanesMatrix);
    vec4 clippingPlanesEdgeColor = vec4(1.0);
    clippingPlanesEdgeColor.rgb = model_clippingPlanesEdgeStyle.rgb;
    float clippingPlanesEdgeWidth = model_clippingPlanesEdgeStyle.a;
    
    if (clipDistance > 0.0 && clipDistance < clippingPlanesEdgeWidth) {
        color = clippingPlanesEdgeColor;
    }
}
`;var Yz={name:"ModelClippingPlanesPipelineStage"},ype=new U;Yz.process=function(e,t,n){let i=t.clippingPlanes,o=n.context,r=e.shaderBuilder;r.addDefine("HAS_CLIPPING_PLANES",void 0,te.FRAGMENT),r.addDefine("CLIPPING_PLANES_LENGTH",i.length,te.FRAGMENT),i.unionClippingRegions&&r.addDefine("UNION_CLIPPING_REGIONS",void 0,te.FRAGMENT),Pl.useFloatTexture(o)&&r.addDefine("USE_CLIPPING_PLANES_FLOAT_TEXTURE",void 0,te.FRAGMENT);let a=Pl.getTextureResolution(i,o,ype);r.addDefine("CLIPPING_PLANES_TEXTURE_WIDTH",a.x,te.FRAGMENT),r.addDefine("CLIPPING_PLANES_TEXTURE_HEIGHT",a.y,te.FRAGMENT),r.addUniform("sampler2D","model_clippingPlanes",te.FRAGMENT),r.addUniform("vec4","model_clippingPlanesEdgeStyle",te.FRAGMENT),r.addUniform("mat4","model_clippingPlanesMatrix",te.FRAGMENT),r.addFragmentLines(jz);let s={model_clippingPlanes:function(){return i.texture},model_clippingPlanesEdgeStyle:function(){let A=F.clone(i.edgeColor);return A.alpha=i.edgeWidth,A},model_clippingPlanesMatrix:function(){return t._clippingPlanesMatrix}};e.uniformMap=Et(s,e.uniformMap)};var qz=Yz;var Wz=`void modelClippingPolygonsStage(ProcessedAttributes attributes)
{
    vec2 sphericalLatLong = czm_approximateSphericalCoordinates(v_positionWC);
    sphericalLatLong.y = czm_branchFreeTernary(sphericalLatLong.y < czm_pi, sphericalLatLong.y, sphericalLatLong.y - czm_twoPi);

    vec2 minDistance = vec2(czm_infinity);
    v_regionIndex = -1;
    v_clippingPosition = vec2(czm_infinity);

    for (int regionIndex = 0; regionIndex < CLIPPING_POLYGON_REGIONS_LENGTH; regionIndex++) {
        vec4 extents = czm_unpackClippingExtents(model_clippingExtents, regionIndex);
        vec2 rectUv = (sphericalLatLong.yx - extents.yx) * extents.wz;

        vec2 clamped = clamp(rectUv, vec2(0.0), vec2(1.0));
        vec2 distance = abs(rectUv - clamped) * extents.wz;
        
        if (minDistance.x > distance.x || minDistance.y > distance.y) {
            minDistance = distance;
            v_clippingPosition = rectUv;
        }

        float threshold = 0.01;
        if (rectUv.x > threshold && rectUv.y > threshold && rectUv.x < 1.0 - threshold && rectUv.y < 1.0 - threshold) {
            v_regionIndex = regionIndex;
        }
    }
}
`;var Jz=`void modelClippingPolygonsStage()
{
    vec2 clippingPosition = v_clippingPosition;
    int regionIndex = v_regionIndex;
    czm_clipPolygons(model_clippingDistance, CLIPPING_POLYGON_REGIONS_LENGTH, clippingPosition, regionIndex);
}
`;var Kz={name:"ModelClippingPolygonsPipelineStage"};Kz.process=function(e,t,n){let i=t.clippingPolygons,o=e.shaderBuilder;o.addDefine("ENABLE_CLIPPING_POLYGONS",void 0,te.BOTH),i.inverse&&o.addDefine("CLIPPING_INVERSE",void 0,te.FRAGMENT),o.addDefine("CLIPPING_POLYGON_REGIONS_LENGTH",i.extentsCount,te.BOTH),o.addUniform("sampler2D","model_clippingDistance",te.FRAGMENT),o.addUniform("sampler2D","model_clippingExtents",te.VERTEX),o.addVarying("vec2","v_clippingPosition"),o.addVarying("int","v_regionIndex","flat"),o.addVertexLines(Wz),o.addFragmentLines(Jz);let r={model_clippingDistance:function(){return i.clippingTexture??n.context.defaultTexture},model_clippingExtents:function(){return i.extentsTexture??n.context.defaultTexture}};e.uniformMap=Et(r,e.uniformMap)};var Xz=Kz;function Zz(e,t){this._model=e,this._runtimeNode=t}Object.defineProperties(Zz.prototype,{name:{get:function(){return this._runtimeNode._name}},id:{get:function(){return this._runtimeNode._id}},show:{get:function(){return this._runtimeNode.show},set:function(e){this._runtimeNode.show=e}},matrix:{get:function(){return this._runtimeNode.transform},set:function(e){c(e)?(this._runtimeNode.transform=e,this._runtimeNode.userAnimated=!0,this._model._userAnimationDirty=!0):(this._runtimeNode.transform=this.originalMatrix,this._runtimeNode.userAnimated=!1)}},originalMatrix:{get:function(){return this._runtimeNode.originalTransform}}});var $z=Zz;var e8=`mat4 getInstancingTransform()
{
    mat4 instancingTransform;

    #ifdef HAS_INSTANCE_MATRICES
    instancingTransform = mat4(
        a_instancingTransformRow0.x, a_instancingTransformRow1.x, a_instancingTransformRow2.x, 0.0, // Column 1
        a_instancingTransformRow0.y, a_instancingTransformRow1.y, a_instancingTransformRow2.y, 0.0, // Column 2
        a_instancingTransformRow0.z, a_instancingTransformRow1.z, a_instancingTransformRow2.z, 0.0, // Column 3
        a_instancingTransformRow0.w, a_instancingTransformRow1.w, a_instancingTransformRow2.w, 1.0  // Column 4
    );
    #else
    vec3 translation = vec3(0.0, 0.0, 0.0);
    vec3 scale = vec3(1.0, 1.0, 1.0);
    
        #ifdef HAS_INSTANCE_TRANSLATION
        translation = a_instanceTranslation;
        #endif
        #ifdef HAS_INSTANCE_SCALE
        scale = a_instanceScale;
        #endif

    instancingTransform = mat4(
        scale.x, 0.0, 0.0, 0.0,
        0.0, scale.y, 0.0, 0.0,
        0.0, 0.0, scale.z, 0.0,
        translation.x, translation.y, translation.z, 1.0
    ); 
    #endif

    return instancingTransform;
}

#ifdef USE_2D_INSTANCING
mat4 getInstancingTransform2D()
{
    mat4 instancingTransform2D;

    #ifdef HAS_INSTANCE_MATRICES
    instancingTransform2D = mat4(
        a_instancingTransform2DRow0.x, a_instancingTransform2DRow1.x, a_instancingTransform2DRow2.x, 0.0, // Column 1
        a_instancingTransform2DRow0.y, a_instancingTransform2DRow1.y, a_instancingTransform2DRow2.y, 0.0, // Column 2
        a_instancingTransform2DRow0.z, a_instancingTransform2DRow1.z, a_instancingTransform2DRow2.z, 0.0, // Column 3
        a_instancingTransform2DRow0.w, a_instancingTransform2DRow1.w, a_instancingTransform2DRow2.w, 1.0  // Column 4
    );
    #else
    vec3 translation2D = vec3(0.0, 0.0, 0.0);
    vec3 scale = vec3(1.0, 1.0, 1.0);
    
        #ifdef HAS_INSTANCE_TRANSLATION
        translation2D = a_instanceTranslation2D;
        #endif
        #ifdef HAS_INSTANCE_SCALE
        scale = a_instanceScale;
        #endif

    instancingTransform2D = mat4(
        scale.x, 0.0, 0.0, 0.0,
        0.0, scale.y, 0.0, 0.0,
        0.0, 0.0, scale.z, 0.0,
        translation2D.x, translation2D.y, translation2D.z, 1.0
    ); 
    #endif

    return instancingTransform2D;
}
#endif
`;var t8=`void instancingStage(inout ProcessedAttributes attributes) 
{
    vec3 positionMC = attributes.positionMC;
    
    mat4 instancingTransform = getInstancingTransform();
    
    attributes.positionMC = (instancingTransform * vec4(positionMC, 1.0)).xyz;

    #ifdef HAS_NORMALS
    vec3 normalMC = attributes.normalMC;
    attributes.normalMC = (instancingTransform * vec4(normalMC, 0.0)).xyz;
    #endif

    #ifdef USE_2D_INSTANCING
    mat4 instancingTransform2D = getInstancingTransform2D();
    attributes.position2D = (instancingTransform2D * vec4(positionMC, 1.0)).xyz;
    #endif
}
`;var n8=`void legacyInstancingStage(
    inout ProcessedAttributes attributes,
    out mat4 instanceModelView,
    out mat3 instanceModelViewInverseTranspose)
{
    vec3 positionMC = attributes.positionMC;

    mat4 instancingTransform = getInstancingTransform();
 
    mat4 instanceModel = instancingTransform * u_instance_nodeTransform;
    instanceModelView = u_instance_modifiedModelView;
    instanceModelViewInverseTranspose = mat3(u_instance_modifiedModelView * instanceModel);

    attributes.positionMC = (instanceModel * vec4(positionMC, 1.0)).xyz;
    
    #ifdef USE_2D_INSTANCING
    mat4 instancingTransform2D = getInstancingTransform2D();
    attributes.position2D = (instancingTransform2D * vec4(positionMC, 1.0)).xyz;
    #endif
}
`;var Xb=new O,bpe=new O,Bpe=new O,o8={name:"InstancingPipelineStage",_getInstanceTransformsAsMatrices:A8,_transformsToTypedArray:Kw};o8.process=function(e,t,n){let i=t.instances,o=i.attributes[0].count,r=e.shaderBuilder;r.addDefine("HAS_INSTANCING"),r.addVertexLines(e8);let a=e.model,s=a.sceneGraph,A=e.runtimeNode,l=n.mode!==Te.SCENE3D&&!n.scene3DOnly&&a._projectTo2D,f=a._enablePick&&!n.context.webgl2,h=[];kpe(e,n,i,h,l,f),zpe(e,n,i,h);let m={};if(i.transformInWorldSpace?(r.addDefine("USE_LEGACY_INSTANCING",void 0,te.VERTEX),r.addUniform("mat4","u_instance_modifiedModelView",te.VERTEX),r.addUniform("mat4","u_instance_nodeTransform",te.VERTEX),m.u_instance_modifiedModelView=function(){let p=O.multiplyTransformation(a.modelMatrix,s.components.transform,Xb);return l?O.multiplyTransformation(n.context.uniformState.view3D,p,Xb):(n.mode!==Te.SCENE3D&&(p=Rn.basisTo2D(n.mapProjection,p,Xb)),O.multiplyTransformation(n.context.uniformState.view,p,Xb))},m.u_instance_nodeTransform=function(){return O.multiplyTransformation(s.axisCorrectionMatrix,A.computedTransform,bpe)},r.addVertexLines(n8)):r.addVertexLines(t8),l){r.addDefine("USE_2D_INSTANCING",void 0,te.VERTEX),r.addUniform("mat4","u_modelView2D",te.VERTEX);let p=n.context,g=O.fromTranslation(A.instancingReferencePoint2D,new O);m.u_modelView2D=function(){return O.multiplyTransformation(p.uniformState.view,g,Bpe)}}e.uniformMap=Et(m,e.uniformMap),e.instanceCount=o,Gn(e.attributes,h)};var g_=new O,xpe=new u;function Tpe(e,t,n,i,o){let r=O.multiplyTransformation(t,e,g_);return r=O.multiplyTransformation(r,n,g_),o=Rn.basisTo2D(i.mapProjection,r,o),o}function Spe(e,t,n,i,o){let r=O.fromTranslation(e,g_),a=O.multiplyTransformation(t,r,g_);a=O.multiplyTransformation(a,n,g_);let s=O.getTranslation(a,xpe);return o=dr.computeActualEllipsoidPosition(i,s,o),o}function r8(e,t,n){let i=e.model,o=i.sceneGraph;e.runtimeNode.node.instances.transformInWorldSpace?(t=O.multiplyTransformation(i.modelMatrix,o.components.transform,t),n=O.multiplyTransformation(o.axisCorrectionMatrix,e.runtimeNode.computedTransform,n)):(t=O.clone(o.computedModelMatrix,t),t=O.multiplyTransformation(t,e.runtimeNode.computedTransform,t),n=O.clone(O.IDENTITY,n))}var a8=new O,s8=new O,wpe=new O,Dpe=new u;function Qpe(e,t,n,i){let o=a8,r=s8;r8(t,o,r);let s=t.runtimeNode.instancingReferencePoint2D,A=e.length;for(let l=0;l<A;l++){let f=e[l],h=Tpe(f,o,r,n,wpe),m=O.getTranslation(h,Dpe),p=u.subtract(m,s,m);i[l]=O.setTranslation(h,p,i[l])}return i}function Rpe(e,t,n,i){let o=a8,r=s8;r8(t,o,r);let s=t.runtimeNode.instancingReferencePoint2D,A=e.length;for(let l=0;l<A;l++){let f=e[l],h=Spe(f,o,r,n,f);i[l]=u.subtract(h,s,i[l])}return i}var vpe=new u,Ppe=new u;function c8(e,t){let n=e.runtimeNode,i=e.model.sceneGraph.computedModelMatrix,o=O.multiplyByPoint(i,n.instancingTranslationMin,vpe),r=dr.computeActualEllipsoidPosition(t,o,o),a=O.multiplyByPoint(i,n.instancingTranslationMax,Ppe),s=dr.computeActualEllipsoidPosition(t,a,a);n.instancingReferencePoint2D=u.lerp(r,s,.5,new u)}function Kw(e){let n=e.length,i=new Float32Array(n*12);for(let o=0;o<n;o++){let r=e[o],a=12*o;i[a+0]=r[0],i[a+1]=r[4],i[a+2]=r[8],i[a+3]=r[12],i[a+4]=r[1],i[a+5]=r[5],i[a+6]=r[9],i[a+7]=r[13],i[a+8]=r[2],i[a+9]=r[6],i[a+10]=r[10],i[a+11]=r[14]}return i}function Mpe(e){let n=e.length,i=new Float32Array(n*3);for(let o=0;o<n;o++){let r=e[o],a=3*o;i[a+0]=r[0],i[a+1]=r[4],i[a+2]=r[8]}return i}var Ope=new u,Lpe=new qe,Npe=new u;function A8(e,t,n){let i=new Array(t),o=tt.getAttributeBySemantic(e,zo.TRANSLATION),r=tt.getAttributeBySemantic(e,zo.ROTATION),a=tt.getAttributeBySemantic(e,zo.SCALE),s=new u(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE),A=new u(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),l=c(o),f=c(r),h=c(a),m=l?o.typedArray:new Float32Array(t*3),p=f?r.typedArray:new Float32Array(t*4);f&&r.normalized&&(p=ni.dequantize(p,r.componentDatatype,r.type,t));let g;h?g=a.typedArray:(g=new Float32Array(t*3),g.fill(1));for(let _=0;_<t;_++){let E=new u(m[_*3],m[_*3+1],m[_*3+2],Ope);u.maximumByComponent(s,E,s),u.minimumByComponent(A,E,A);let I=new qe(p[_*4],p[_*4+1],p[_*4+2],f?p[_*4+3]:1,Lpe),y=new u(g[_*3],g[_*3+1],g[_*3+2],Npe),b=O.fromTranslationQuaternionRotationScale(E,I,y,new O);i[_]=b}let C=n.runtimeNode;return C.instancingTranslationMin=A,C.instancingTranslationMax=s,l&&(o.typedArray=void 0),f&&(r.typedArray=void 0),h&&(a.typedArray=void 0),i}function Fpe(e,t,n){let i=new Array(t),o=e.typedArray,r=new u(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),a=new u(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE);for(let A=0;A<t;A++){let l=new u(o[A*3],o[A*3+1],o[A*3+2]);i[A]=l,u.minimumByComponent(r,l,r),u.maximumByComponent(a,l,a)}let s=n.runtimeNode;return s.instancingTranslationMin=r,s.instancingTranslationMax=a,e.typedArray=void 0,i}function Xw(e,t){let n=dt.createVertexBuffer({context:t.context,typedArray:e,usage:Me.STATIC_DRAW});return n.vertexArrayDestroyable=!1,n}function kpe(e,t,n,i,o,r){let a=tt.getAttributeBySemantic(n,zo.ROTATION);c(a)?Upe(e,n,i,t,o,r):Gpe(e,n,i,t,o)}function Upe(e,t,n,i,o,r){let a=e.shaderBuilder,s=t.attributes[0].count,A=e.model,l=e.runtimeNode;a.addDefine("HAS_INSTANCE_MATRICES");let f="Transform",h,m=l.instancingTransformsBuffer;if(!c(m)){h=A8(t,s,e);let _=Kw(h);m=Xw(_,i),A._modelResources.push(m),r&&(l.transformsTypedArray=_),l.instancingTransformsBuffer=m}if(i8(e,m,n,f),!o)return;let p=Ne(i);p.mode=Te.COLUMBUS_VIEW,c8(e,p);let g=l.instancingTransformsBuffer2D;if(!c(g)){let _=Qpe(h,e,p,h),E=Kw(_);g=Xw(E,i),A._modelResources.push(g),l.instancingTransformsBuffer2D=g}i8(e,g,n,"Transform2D")}function Gpe(e,t,n,i,o,r){let a=e.shaderBuilder,s=e.runtimeNode,A=tt.getAttributeBySemantic(t,zo.TRANSLATION),l=tt.getAttributeBySemantic(t,zo.SCALE);if(c(l)&&(a.addDefine("HAS_INSTANCE_SCALE"),Jw(e,l.buffer,l.byteOffset,l.byteStride,n,"Scale")),!c(A))return;let f,h=A.typedArray;if(c(h)?f=Fpe(A,A.count,e):c(s.instancingTranslationMin)||(s.instancingTranslationMin=A.min,s.instancingTranslationMax=A.max),a.addDefine("HAS_INSTANCE_TRANSLATION"),Jw(e,A.buffer,A.byteOffset,A.byteStride,n,"Translation"),!o&&!r)return;let p=Ne(i);p.mode=Te.COLUMBUS_VIEW,c8(e,p);let g=s.instancingTranslationBuffer2D;if(!c(g)){let I=Rpe(f,e,p,f),y=Mpe(I);r&&(s.transformsTypedArray=y),g=Xw(y,i),e.model._modelResources.push(g),s.instancingTranslationBuffer2D=g}if(!o)return;Jw(e,g,0,void 0,n,"Translation2D")}function i8(e,t,n,i){let r=N.getSizeInBytes(N.FLOAT),a=r*12,s=[{index:e.attributeIndex++,vertexBuffer:t,componentsPerAttribute:4,componentDatatype:N.FLOAT,normalize:!1,offsetInBytes:0,strideInBytes:a,instanceDivisor:1},{index:e.attributeIndex++,vertexBuffer:t,componentsPerAttribute:4,componentDatatype:N.FLOAT,normalize:!1,offsetInBytes:r*4,strideInBytes:a,instanceDivisor:1},{index:e.attributeIndex++,vertexBuffer:t,componentsPerAttribute:4,componentDatatype:N.FLOAT,normalize:!1,offsetInBytes:r*8,strideInBytes:a,instanceDivisor:1}],A=e.shaderBuilder;A.addAttribute("vec4",`a_instancing${i}Row0`),A.addAttribute("vec4",`a_instancing${i}Row1`),A.addAttribute("vec4",`a_instancing${i}Row2`),Gn(n,s)}function Jw(e,t,n,i,o,r){o.push({index:e.attributeIndex++,vertexBuffer:t,componentsPerAttribute:3,componentDatatype:N.FLOAT,normalize:!1,offsetInBytes:n,strideInBytes:i,instanceDivisor:1}),e.shaderBuilder.addAttribute("vec3",`a_instance${r}`)}function zpe(e,t,n,i){let o=n.attributes,r=e.shaderBuilder;for(let a=0;a<o.length;a++){let s=o[a];s.semantic===zo.FEATURE_ID&&(s.setIndex>=e.featureIdVertexAttributeSetIndex&&(e.featureIdVertexAttributeSetIndex=s.setIndex+1),i.push({index:e.attributeIndex++,vertexBuffer:s.buffer,componentsPerAttribute:st.getNumberOfComponents(s.type),componentDatatype:s.componentDatatype,normalize:!1,offsetInBytes:s.byteOffset,strideInBytes:s.byteStride,instanceDivisor:1}),r.addAttribute("float",`a_instanceFeatureId_${s.setIndex}`))}}var l8=o8;var Zw={};Zw.name="ModelMatrixUpdateStage";Zw.update=function(e,t,n){let i=n.mode!==Te.SCENE3D;if(!(i&&t._model._projectTo2D)&&e._transformDirty){let o=i?t._computedModelMatrix2D:t._computedModelMatrix;f8(e,t,o,e.transformToRoot),e._transformDirty=!1}};function Hpe(e,t,n){e.modelMatrix=O.multiplyTransformation(t,n,e.modelMatrix),e.cullFace=tt.getCullFace(e.modelMatrix,e.primitiveType)}function f8(e,t,n,i){let o;i=O.multiplyTransformation(i,e.transform,new O),e.updateComputedTransform();let r=e.runtimePrimitives.length;for(o=0;o<r;o++){let s=e.runtimePrimitives[o];Hpe(s.drawCommand,n,i)}let a=e.children.length;for(o=0;o<a;o++){let s=t._runtimeNodes[e.children[o]];s._transformToRoot=O.clone(i,s._transformToRoot),f8(s,t,n,i),s._transformDirty=!1}}var u8=Zw;var d8={name:"NodeStatisticsPipelineStage",_countInstancingAttributes:h8,_countGeneratedBuffers:m8};d8.process=function(e,t,n){let i=e.model.statistics,o=t.instances,r=e.runtimeNode;h8(i,o),m8(i,r)};function h8(e,t){if(!c(t))return;let n=t.attributes,i=n.length;for(let o=0;o<i;o++){let r=n[o];c(r.buffer)&&e.addBuffer(r.buffer,!1)}}function m8(e,t){c(t.instancingTransformsBuffer)&&e.addBuffer(t.instancingTransformsBuffer,!1),c(t.instancingTransformsBuffer2D)&&e.addBuffer(t.instancingTransformsBuffer2D,!1),c(t.instancingTranslationBuffer2D)&&e.addBuffer(t.instancingTranslationBuffer2D,!1)}var p8=d8;function np(e){e=e??k.EMPTY_OBJECT;let t=e.node,n=e.transform,i=e.transformToRoot,o=e.sceneGraph,r=e.children;this._node=t,this._name=t.name,this._id=t.index,this._sceneGraph=o,this._children=r,this._originalTransform=O.clone(n,this._originalTransform),this._transform=O.clone(n,this._transform),this._transformToRoot=O.clone(i,this._transformToRoot),this._computedTransform=new O,this._transformDirty=!1,this._transformParameters=void 0,this._morphWeights=[],this._runtimeSkin=void 0,this._computedJointMatrices=[],this.show=!0,this.userAnimated=!1,this.pipelineStages=[],this.runtimePrimitives=[],this.updateStages=[],this.instancingTranslationMin=void 0,this.instancingTranslationMax=void 0,this.instancingTransformsBuffer=void 0,this.instancingTransformsBuffer2D=void 0,this.instancingTranslationBuffer2D=void 0,this.instancingReferencePoint2D=void 0,Vpe(this)}Object.defineProperties(np.prototype,{node:{get:function(){return this._node}},sceneGraph:{get:function(){return this._sceneGraph}},children:{get:function(){return this._children}},transform:{get:function(){return this._transform},set:function(e){this._transformDirty=!0,this._transform=O.clone(e,this._transform)}},transformToRoot:{get:function(){return this._transformToRoot}},computedTransform:{get:function(){return this._computedTransform}},originalTransform:{get:function(){return this._originalTransform}},translation:{get:function(){return c(this._transformParameters)?this._transformParameters.translation:void 0},set:function(e){let t=this._transformParameters,n=t.translation;u.equals(n,e)||(t.translation=u.clone(e,t.translation),$w(this,t))}},rotation:{get:function(){return c(this._transformParameters)?this._transformParameters.rotation:void 0},set:function(e){let t=this._transformParameters,n=t.rotation;qe.equals(n,e)||(t.rotation=qe.clone(e,t.rotation),$w(this,t))}},scale:{get:function(){return c(this._transformParameters)?this._transformParameters.scale:void 0},set:function(e){let t=this._transformParameters,n=t.scale;u.equals(n,e)||(t.scale=u.clone(e,t.scale),$w(this,t))}},morphWeights:{get:function(){return this._morphWeights},set:function(e){let t=e.length;for(let n=0;n<t;n++)this._morphWeights[n]=e[n]}},runtimeSkin:{get:function(){return this._runtimeSkin}},computedJointMatrices:{get:function(){return this._computedJointMatrices}}});function Vpe(e){let t=e.transform,n=e.transformToRoot,i=e._computedTransform;e._computedTransform=O.multiply(n,t,i);let o=e.node;c(o.matrix)||(e._transformParameters=new _C(o.translation,o.rotation,o.scale)),c(o.morphWeights)&&(e._morphWeights=o.morphWeights.slice());let r=o.articulationName;if(c(r)){let A=e.sceneGraph._runtimeArticulations[r];c(A)&&A.runtimeNodes.push(e)}}function $w(e,t){e._transformDirty=!0,e._transform=O.fromTranslationRotationScale(t,e._transform)}np.prototype.getChild=function(e){return this.sceneGraph._runtimeNodes[this.children[e]]};np.prototype.configurePipeline=function(){let e=this.node,t=this.pipelineStages;t.length=0;let n=this.updateStages;n.length=0,c(e.instances)&&t.push(l8),t.push(p8),n.push(u8)};np.prototype.updateComputedTransform=function(){this._computedTransform=O.multiply(this._transformToRoot,this._transform,this._computedTransform)};np.prototype.updateJointMatrices=function(){let e=this._runtimeSkin;if(!c(e))return;e.updateJointMatrices();let t=this._computedJointMatrices,n=e.jointMatrices,i=n.length;for(let o=0;o<i;o++){c(t[o])||(t[o]=new O);let r=O.multiplyTransformation(this.transformToRoot,this.transform,t[o]),a=O.inverseTransformation(r,t[o]);t[o]=O.multiplyTransformation(a,n[o],t[o])}};var g8=np;var C8={name:"AlphaPipelineStage"};C8.process=function(e,t,n){let i=e.alphaOptions,o=e.model;i.pass=i.pass??o.opaquePass;let r=e.renderStateOptions;i.pass===Ye.TRANSLUCENT&&(r.cull.enabled=!1,r.depthMask=!1,r.blending=qn.ALPHA_BLEND);let a=e.shaderBuilder,s=e.uniformMap;c(i.alphaCutoff)&&(a.addDefine("ALPHA_MODE_MASK",void 0,te.FRAGMENT),a.addUniform("float","u_alphaCutoff",te.FRAGMENT),s.u_alphaCutoff=function(){return i.alphaCutoff})};var _8=C8;var E8={name:"BatchTexturePipelineStage"};E8.process=function(e,t,n){let i=e.shaderBuilder,o={},r=e.model,a=r.featureTables[r.featureTableId],s=a.featuresLength;i.addUniform("int","model_featuresLength"),o.model_featuresLength=function(){return s};let A=a.batchTexture;i.addUniform("sampler2D","model_batchTexture"),o.model_batchTexture=function(){return A.batchTexture??A.defaultTexture},i.addUniform("vec4","model_textureStep"),o.model_textureStep=function(){return A.textureStep},A.textureDimensions.y>1&&(i.addDefine("MULTILINE_BATCH_TEXTURE"),i.addUniform("vec2","model_textureDimensions"),o.model_textureDimensions=function(){return A.textureDimensions}),e.uniformMap=Et(o,e.uniformMap)};var I8=E8;var y8={name:"ClassificationPipelineStage"};y8.process=function(e,t,n){e.shaderBuilder.addDefine("HAS_CLASSIFICATION",void 0,te.BOTH);let o=e.runtimePrimitive;c(o.batchLengths)||jpe(t,o)};function jpe(e,t){let n=tt.getAttributeBySemantic(e,Pe.POSITION);if(!c(n))throw new oe("Primitives must have a position attribute to be used for classification.");let i,o=e.indices,r=c(o);r&&(i=o.typedArray,o.typedArray=void 0);let a=r?o.count:n.count,s=tt.getAttributeBySemantic(e,Pe.FEATURE_ID,0);if(!c(s)){t.batchLengths=[a],t.batchOffsets=[0];return}let A=s.typedArray;s.typedArray=void 0;let l=[],f=[0],h=r?i[0]:0,m=A[h],p=0;for(let C=1;C<a;C++){let _=r?i[C]:C,E=A[_];if(E!==m){let I=C-p,y=C;l.push(I),f.push(y),p=y,m=E}}let g=a-p;l.push(g),t.batchLengths=l,t.batchOffsets=f}var b8=y8;var B8=`void filterByPassType(inout vec3 positionMC, vec4 featureColor)
{
    bool styleTranslucent = (featureColor.a != 1.0);
    // Only render translucent features in the translucent pass (if the style or the original command has translucency).
    if (czm_pass == czm_passTranslucent && !styleTranslucent && !model_commandTranslucent)
    {
        // If the model has a translucent silhouette, it needs to render during the silhouette color command,
        // (i.e. the command where model_silhouettePass = true), even if the model isn't translucent.
        #ifdef HAS_SILHOUETTE
        positionMC *= float(model_silhouettePass);
        #else
        positionMC *= 0.0;
        #endif
    }
    // If the current pass is not the translucent pass and the style is not translucent, don't render the feature.
    else if (czm_pass != czm_passTranslucent && styleTranslucent)
    {
        positionMC *= 0.0;
    }
}

void cpuStylingStage(inout vec3 positionMC, inout SelectedFeature feature)
{
    float show = ceil(feature.color.a);
    positionMC *= show;

    #if defined(HAS_SELECTED_FEATURE_ID_ATTRIBUTE) && !defined(HAS_CLASSIFICATION)
    filterByPassType(positionMC, feature.color);
    #endif
}
`;var x8=`void filterByPassType(vec4 featureColor)
{
    bool styleTranslucent = (featureColor.a != 1.0);
    // Only render translucent features in the translucent pass (if the style or the original command has translucency).
    if (czm_pass == czm_passTranslucent && !styleTranslucent && !model_commandTranslucent)
    {   
        // If the model has a translucent silhouette, it needs to render during the silhouette color command,
        // (i.e. the command where model_silhouettePass = true), even if the model isn't translucent.
        #ifdef HAS_SILHOUETTE
        if(!model_silhouettePass) {
            discard;
        }
        #else
        discard;
        #endif
    }
    // If the current pass is not the translucent pass and the style is not translucent, don't render the feature.
    else if (czm_pass != czm_passTranslucent && styleTranslucent)
    {
        discard;
    }
}

void cpuStylingStage(inout czm_modelMaterial material, SelectedFeature feature)
{
    vec4 featureColor = feature.color;
    if (featureColor.a == 0.0)
    {
        discard;
    }

    // If a feature ID vertex attribute is used, the pass type filter is applied in the vertex shader.
    // So, we only apply in in the fragment shader if the feature ID texture is used.
    #if defined(HAS_SELECTED_FEATURE_ID_TEXTURE) && !defined(HAS_CLASSIFICATION)
    filterByPassType(featureColor);
    #endif

    featureColor = czm_gammaCorrect(featureColor);

    // Classification models compute the diffuse differently.
    #ifdef HAS_CLASSIFICATION
    material.diffuse = featureColor.rgb * featureColor.a;
    #else
    float highlight = ceil(model_colorBlend);
    material.diffuse *= mix(featureColor.rgb, vec3(1.0), highlight);
    #endif
    
    material.alpha *= featureColor.a;
}
`;var T8={name:"CPUStylingPipelineStage"};T8.process=function(e,t,n){let i=e.model,o=e.shaderBuilder;o.addVertexLines(B8),o.addFragmentLines(x8),o.addDefine("USE_CPU_STYLING",void 0,te.BOTH),c(i.color)||(o.addUniform("float",p_.COLOR_BLEND_UNIFORM_NAME,te.FRAGMENT),e.uniformMap[p_.COLOR_BLEND_UNIFORM_NAME]=function(){return ns.getColorBlend(i.colorBlendMode,i.colorBlendAmount)}),o.addUniform("bool","model_commandTranslucent",te.BOTH),e.uniformMap.model_commandTranslucent=function(){return e.alphaOptions.pass===Ye.TRANSLUCENT}};var S8=T8;var w8={MODIFY_MATERIAL:"MODIFY_MATERIAL",REPLACE_MATERIAL:"REPLACE_MATERIAL"};w8.getDefineName=function(e){return`CUSTOM_SHADER_${e}`};var Zb=Object.freeze(w8);var D8=`void customShaderStage(
    inout czm_modelVertexOutput vsOutput, 
    inout ProcessedAttributes attributes, 
    FeatureIds featureIds,
    Metadata metadata,
    MetadataClass metadataClass,
    MetadataStatistics metadataStatistics
) {
    // VertexInput and initializeInputStruct() are dynamically generated in JS, 
    // see CustomShaderPipelineStage.js
    VertexInput vsInput;
    initializeInputStruct(vsInput, attributes);
    vsInput.featureIds = featureIds;
    vsInput.metadata = metadata;
    vsInput.metadataClass = metadataClass;
    vsInput.metadataStatistics = metadataStatistics;
    vertexMain(vsInput, vsOutput);
    attributes.positionMC = vsOutput.positionMC;
}
`;var Q8=`void customShaderStage(
    inout czm_modelMaterial material,
    ProcessedAttributes attributes,
    FeatureIds featureIds,
    Metadata metadata,
    MetadataClass metadataClass,
    MetadataStatistics metadataStatistics
) {
    // FragmentInput and initializeInputStruct() are dynamically generated in JS, 
    // see CustomShaderPipelineStage.js
    FragmentInput fsInput;
    initializeInputStruct(fsInput, attributes);
    fsInput.featureIds = featureIds;
    fsInput.metadata = metadata;
    fsInput.metadataClass = metadataClass;
    fsInput.metadataStatistics = metadataStatistics;
    fragmentMain(fsInput, material);
}
`;var R8=`void featureIdStage(out FeatureIds featureIds, ProcessedAttributes attributes) {
  initializeFeatureIds(featureIds, attributes);
  initializeFeatureIdAliases(featureIds);
}
`;var v8=`void featureIdStage(out FeatureIds featureIds, ProcessedAttributes attributes) 
{
  initializeFeatureIds(featureIds, attributes);
  initializeFeatureIdAliases(featureIds);
  setFeatureIdVaryings();
}
`;var Fn={name:"FeatureIdPipelineStage",STRUCT_ID_FEATURE_IDS_VS:"FeatureIdsVS",STRUCT_ID_FEATURE_IDS_FS:"FeatureIdsFS",STRUCT_NAME_FEATURE_IDS:"FeatureIds",FUNCTION_ID_INITIALIZE_FEATURE_IDS_VS:"initializeFeatureIdsVS",FUNCTION_ID_INITIALIZE_FEATURE_IDS_FS:"initializeFeatureIdsFS",FUNCTION_ID_INITIALIZE_FEATURE_ID_ALIASES_VS:"initializeFeatureIdAliasesVS",FUNCTION_ID_INITIALIZE_FEATURE_ID_ALIASES_FS:"initializeFeatureIdAliasesFS",FUNCTION_SIGNATURE_INITIALIZE_FEATURE_IDS:"void initializeFeatureIds(out FeatureIds featureIds, ProcessedAttributes attributes)",FUNCTION_SIGNATURE_INITIALIZE_FEATURE_ID_ALIASES:"void initializeFeatureIdAliases(inout FeatureIds featureIds)",FUNCTION_ID_SET_FEATURE_ID_VARYINGS:"setFeatureIdVaryings",FUNCTION_SIGNATURE_SET_FEATURE_ID_VARYINGS:"void setFeatureIdVaryings()"};Fn.process=function(e,t,n){let i=e.shaderBuilder;Ype(i);let o=e.runtimeNode.node.instances;c(o)&&qpe(e,o,n),Wpe(e,t,n),i.addVertexLines(v8),i.addFragmentLines(R8)};function Ype(e){e.addStruct(Fn.STRUCT_ID_FEATURE_IDS_VS,Fn.STRUCT_NAME_FEATURE_IDS,te.VERTEX),e.addStruct(Fn.STRUCT_ID_FEATURE_IDS_FS,Fn.STRUCT_NAME_FEATURE_IDS,te.FRAGMENT),e.addFunction(Fn.FUNCTION_ID_INITIALIZE_FEATURE_IDS_VS,Fn.FUNCTION_SIGNATURE_INITIALIZE_FEATURE_IDS,te.VERTEX),e.addFunction(Fn.FUNCTION_ID_INITIALIZE_FEATURE_IDS_FS,Fn.FUNCTION_SIGNATURE_INITIALIZE_FEATURE_IDS,te.FRAGMENT),e.addFunction(Fn.FUNCTION_ID_INITIALIZE_FEATURE_ID_ALIASES_VS,Fn.FUNCTION_SIGNATURE_INITIALIZE_FEATURE_ID_ALIASES,te.VERTEX),e.addFunction(Fn.FUNCTION_ID_INITIALIZE_FEATURE_ID_ALIASES_FS,Fn.FUNCTION_SIGNATURE_INITIALIZE_FEATURE_ID_ALIASES,te.FRAGMENT),e.addFunction(Fn.FUNCTION_ID_SET_FEATURE_ID_VARYINGS,Fn.FUNCTION_SIGNATURE_SET_FEATURE_ID_VARYINGS,te.VERTEX)}function qpe(e,t,n){let i=t.featureIds,o=t.attributes[0].count;for(let r=0;r<i.length;r++){let a=i[r],s=a.positionalLabel;a instanceof Lt.FeatureIdAttribute?Jpe(e,a,s):P8(e,a,s,o,1,n);let A=a.label;c(A)&&M8(e,s,A,te.BOTH)}}function Wpe(e,t,n){let i=t.featureIds,r=tt.getAttributeBySemantic(t,Pe.POSITION).count;for(let a=0;a<i.length;a++){let s=i[a],A=s.positionalLabel,l=te.BOTH;s instanceof Lt.FeatureIdAttribute?Kpe(e,s,A):s instanceof Lt.FeatureIdImplicitRange?P8(e,s,A,r,void 0,n):(Xpe(e,s,A,a,n),l=te.FRAGMENT);let f=s.label;c(f)&&M8(e,A,f,l)}}function Jpe(e,t,n){let i=e.shaderBuilder;i.addStructField(Fn.STRUCT_ID_FEATURE_IDS_VS,"int",n),i.addStructField(Fn.STRUCT_ID_FEATURE_IDS_FS,"int",n);let o=t.setIndex,r=n.replace(/_\d+$/,"_"),a=`a_${r}${o}`,s=`v_${r}${o}`,A=`featureIds.${n} = int(czm_round(${a}));`,l=`featureIds.${n} = int(czm_round(${s}));`;i.addFunctionLines(Fn.FUNCTION_ID_INITIALIZE_FEATURE_IDS_VS,[A]),i.addFunctionLines(Fn.FUNCTION_ID_INITIALIZE_FEATURE_IDS_FS,[l]),i.addVarying("float",s),i.addFunctionLines(Fn.FUNCTION_ID_SET_FEATURE_ID_VARYINGS,[`${s} = ${a};`])}function Kpe(e,t,n){let i=e.shaderBuilder;i.addStructField(Fn.STRUCT_ID_FEATURE_IDS_VS,"int",n),i.addStructField(Fn.STRUCT_ID_FEATURE_IDS_FS,"int",n);let o=t.setIndex,r=n.replace(/_\d+$/,"_"),a=[`featureIds.${n} = int(czm_round(attributes.${r}${o}));`];i.addFunctionLines(Fn.FUNCTION_ID_INITIALIZE_FEATURE_IDS_VS,a),i.addFunctionLines(Fn.FUNCTION_ID_INITIALIZE_FEATURE_IDS_FS,a)}function P8(e,t,n,i,o,r){Zpe(e,t,i,o,r);let a=e.shaderBuilder,s=`a_implicit_${n}`;a.addAttribute("float",s);let A=`v_implicit_${n}`;a.addVarying("float",A),a.addStructField(Fn.STRUCT_ID_FEATURE_IDS_VS,"int",n),a.addStructField(Fn.STRUCT_ID_FEATURE_IDS_FS,"int",n),a.addFunctionLines(Fn.FUNCTION_ID_SET_FEATURE_ID_VARYINGS,[`${A} = ${s};`]),a.addFunctionLines(Fn.FUNCTION_ID_INITIALIZE_FEATURE_IDS_VS,[`featureIds.${n} = int(czm_round(${s}));`]),a.addFunctionLines(Fn.FUNCTION_ID_INITIALIZE_FEATURE_IDS_FS,[`featureIds.${n} = int(czm_round(${A}));`])}function Xpe(e,t,n,i,o){let r=`u_featureIdTexture_${i}`,a=e.uniformMap,s=t.textureReader;a[r]=function(){return s.texture??o.context.defaultTexture};let A=s.channels,l=e.shaderBuilder;l.addStructField(Fn.STRUCT_ID_FEATURE_IDS_FS,"int",n),l.addUniform("sampler2D",r,te.FRAGMENT);let h=`v_texCoord_${s.texCoord}`,m=h,p=s.transform;if(c(p)&&!J.equals(p,J.IDENTITY)){let _=`${r}Transform`;l.addUniform("mat3",_,te.FRAGMENT),a[_]=function(){return p},m=`vec2(${_} * vec3(${h}, 1.0))`}let g=`texture(${r}, ${m}).${A}`,C=`featureIds.${n} = czm_unpackUint(${g});`;l.addFunctionLines(Fn.FUNCTION_ID_INITIALIZE_FEATURE_IDS_FS,[C])}function M8(e,t,n,i){let o=e.shaderBuilder,r=te.includesVertexShader(i);r&&o.addStructField(Fn.STRUCT_ID_FEATURE_IDS_VS,"int",n),o.addStructField(Fn.STRUCT_ID_FEATURE_IDS_FS,"int",n);let a=[`featureIds.${n} = featureIds.${t};`];r&&o.addFunctionLines(Fn.FUNCTION_ID_INITIALIZE_FEATURE_ID_ALIASES_VS,a),o.addFunctionLines(Fn.FUNCTION_ID_INITIALIZE_FEATURE_ID_ALIASES_FS,a)}function Zpe(e,t,n,i,o){let r=e.model,a,s;if(c(t.repeat)){let l=$pe(t,n);a=dt.createVertexBuffer({context:o.context,typedArray:l,usage:Me.STATIC_DRAW}),a.vertexArrayDestroyable=!1,r._pipelineResources.push(a),r.statistics.addBuffer(a,!1)}else s=[t.offset];let A={index:e.attributeIndex++,instanceDivisor:i,value:s,vertexBuffer:a,normalize:!1,componentsPerAttribute:1,componentDatatype:N.FLOAT,strideInBytes:N.getSizeInBytes(N.FLOAT),offsetInBytes:0};e.attributes.push(A)}function $pe(e,t){let n=e.offset,i=e.repeat,o=new Float32Array(t);for(let r=0;r<t;r++)o[r]=n+Math.floor(r/i);return o}var C_=Fn;var O8=`void metadataStage(
  out Metadata metadata,
  out MetadataClass metadataClass,
  out MetadataStatistics metadataStatistics,
  ProcessedAttributes attributes
  )
{
  initializeMetadata(metadata, metadataClass, metadataStatistics, attributes);
}
`;var L8=`void metadataStage(
  out Metadata metadata,
  out MetadataClass metadataClass,
  out MetadataStatistics metadataStatistics,
  ProcessedAttributes attributes
  )
{
  initializeMetadata(metadata, metadataClass, metadataStatistics, attributes);
  setMetadataVaryings();
}
`;var Qn={name:"MetadataPipelineStage",STRUCT_ID_METADATA_VS:"MetadataVS",STRUCT_ID_METADATA_FS:"MetadataFS",STRUCT_NAME_METADATA:"Metadata",STRUCT_ID_METADATA_CLASS_VS:"MetadataClassVS",STRUCT_ID_METADATA_CLASS_FS:"MetadataClassFS",STRUCT_NAME_METADATA_CLASS:"MetadataClass",STRUCT_ID_METADATA_STATISTICS_VS:"MetadataStatisticsVS",STRUCT_ID_METADATA_STATISTICS_FS:"MetadataStatisticsFS",STRUCT_NAME_METADATA_STATISTICS:"MetadataStatistics",FUNCTION_ID_INITIALIZE_METADATA_VS:"initializeMetadataVS",FUNCTION_ID_INITIALIZE_METADATA_FS:"initializeMetadataFS",FUNCTION_SIGNATURE_INITIALIZE_METADATA:"void initializeMetadata(out Metadata metadata, out MetadataClass metadataClass, out MetadataStatistics metadataStatistics, ProcessedAttributes attributes)",FUNCTION_ID_SET_METADATA_VARYINGS:"setMetadataVaryings",FUNCTION_SIGNATURE_SET_METADATA_VARYINGS:"void setMetadataVaryings()",METADATA_CLASS_FIELDS:[{specName:"noData",shaderName:"noData"},{specName:"default",shaderName:"defaultValue"},{specName:"min",shaderName:"minValue"},{specName:"max",shaderName:"maxValue"}],METADATA_STATISTICS_FIELDS:[{specName:"min",shaderName:"minValue"},{specName:"max",shaderName:"maxValue"},{specName:"mean",shaderName:"mean",type:"float"},{specName:"median",shaderName:"median"},{specName:"standardDeviation",shaderName:"standardDeviation",type:"float"},{specName:"variance",shaderName:"variance",type:"float"},{specName:"sum",shaderName:"sum"}]};Qn.process=function(e,t,n){let{shaderBuilder:i,model:o}=e,{structuralMetadata:r={},content:a}=o,s=a?.tileset.metadataExtension?.statistics,A=ege(r.propertyAttributes,t,s),l=nge(r.propertyTextures,s),f=A.concat(l);oge(i,f),sge(i),i.addVertexLines(L8),i.addFragmentLines(O8);for(let h=0;h<A.length;h++){let m=A[h];cge(e,m)}for(let h=0;h<l.length;h++){let m=l[h];lge(e,m)}};function ege(e,t,n){return c(e)?e.flatMap(i=>tge(i,t,n)):[]}function tge(e,t,n){let{getAttributeByName:i,getAttributeInfo:o,sanitizeGlslIdentifier:r}=tt,a=e.class.id,s=n?.classes[a],A=Object.entries(e.properties),l=new Array(A.length);for(let f=0;f<A.length;f++){let[h,m]=A[f],p=i(t,m.attribute),{glslType:g,variableName:C}=o(p);l[f]={metadataVariable:r(h),property:m,type:m.classProperty.type,glslType:g,variableName:C,propertyStatistics:s?.properties[h],shaderDestination:te.BOTH}}return l}function nge(e,t){return c(e)?e.flatMap(n=>ige(n,t)):[]}function ige(e,t){let{sanitizeGlslIdentifier:n}=tt,i=e.class.id,o=t?.classes[i],r=Object.entries(e.properties).filter(([s,A])=>A.isGpuCompatible()),a=new Array(r.length);for(let s=0;s<r.length;s++){let[A,l]=r[s];a[s]={metadataVariable:n(A),property:l,type:l.classProperty.type,glslType:l.getGlslType(),propertyStatistics:o?.properties[A],shaderDestination:te.FRAGMENT}}return a}function oge(e,t){let n=new Set,i=new Set;for(let s=0;s<t.length;s++){let{type:A,glslType:l,propertyStatistics:f}=t[s];n.add(l),c(f)&&A!==Zt.ENUM&&i.add(l)}let o=Qn.METADATA_CLASS_FIELDS;for(let s of n){let A=`${s}MetadataClass`;a(A,s,o)}let r=Qn.METADATA_STATISTICS_FIELDS;for(let s of i){let A=`${s}MetadataStatistics`;a(A,s,r)}function a(s,A,l){e.addStruct(s,s,te.BOTH);for(let f=0;f<l.length;f++){let{shaderName:h}=l[f],m=l[f].type==="float"?age(A):A;e.addStructField(s,m,h)}}}var rge={int:"float",ivec2:"vec2",ivec3:"vec3",ivec4:"vec4"};function age(e){let t=rge[e];return c(t)?t:e}function sge(e){e.addStruct(Qn.STRUCT_ID_METADATA_VS,Qn.STRUCT_NAME_METADATA,te.VERTEX),e.addStruct(Qn.STRUCT_ID_METADATA_FS,Qn.STRUCT_NAME_METADATA,te.FRAGMENT),e.addStruct(Qn.STRUCT_ID_METADATA_CLASS_VS,Qn.STRUCT_NAME_METADATA_CLASS,te.VERTEX),e.addStruct(Qn.STRUCT_ID_METADATA_CLASS_FS,Qn.STRUCT_NAME_METADATA_CLASS,te.FRAGMENT),e.addStruct(Qn.STRUCT_ID_METADATA_STATISTICS_VS,Qn.STRUCT_NAME_METADATA_STATISTICS,te.VERTEX),e.addStruct(Qn.STRUCT_ID_METADATA_STATISTICS_FS,Qn.STRUCT_NAME_METADATA_STATISTICS,te.FRAGMENT),e.addFunction(Qn.FUNCTION_ID_INITIALIZE_METADATA_VS,Qn.FUNCTION_SIGNATURE_INITIALIZE_METADATA,te.VERTEX),e.addFunction(Qn.FUNCTION_ID_INITIALIZE_METADATA_FS,Qn.FUNCTION_SIGNATURE_INITIALIZE_METADATA,te.FRAGMENT),e.addFunction(Qn.FUNCTION_ID_SET_METADATA_VARYINGS,Qn.FUNCTION_SIGNATURE_SET_METADATA_VARYINGS,te.VERTEX)}function cge(e,t){Age(e,t),N8(e.shaderBuilder,t),F8(e.shaderBuilder,t)}function Age(e,t){let{shaderBuilder:n}=e,{metadataVariable:i,property:o,glslType:r}=t,a=U8({valueExpression:`attributes.${t.variableName}`,renderResources:e,glslType:r,metadataVariable:i,shaderDestination:te.BOTH,property:o});n.addStructField(Qn.STRUCT_ID_METADATA_VS,r,i),n.addStructField(Qn.STRUCT_ID_METADATA_FS,r,i);let s=`metadata.${i} = ${a};`;n.addFunctionLines(Qn.FUNCTION_ID_INITIALIZE_METADATA_VS,[s]),n.addFunctionLines(Qn.FUNCTION_ID_INITIALIZE_METADATA_FS,[s])}function lge(e,t){fge(e,t),N8(e.shaderBuilder,t),F8(e.shaderBuilder,t)}function fge(e,t){let{shaderBuilder:n,uniformMap:i}=e,{metadataVariable:o,glslType:r,property:a}=t,{texCoord:s,channels:A,index:l,texture:f,transform:h}=a.textureReader,m=`u_propertyTexture_${l}`;i.hasOwnProperty(m)||(n.addUniform("sampler2D",m,te.FRAGMENT),i[m]=()=>f),n.addStructField(Qn.STRUCT_ID_METADATA_FS,r,o);let p=`attributes.texCoord_${s}`,g=p;if(c(h)&&!J.equals(h,J.IDENTITY)){let y=`${m}Transform`;n.addUniform("mat3",y,te.FRAGMENT),i[y]=function(){return h},g=`vec2(${y} * vec3(${p}, 1.0))`}let C=`texture(${m}, ${g}).${A}`,_=a.unpackInShader(C),E=U8({valueExpression:_,renderResources:e,glslType:r,metadataVariable:o,shaderDestination:te.FRAGMENT,property:a}),I=`metadata.${o} = ${E};`;n.addFunctionLines(Qn.FUNCTION_ID_INITIALIZE_METADATA_FS,[I])}function N8(e,t){let{classProperty:n}=t.property,{metadataVariable:i,glslType:o,shaderDestination:r}=t,a=k8(Qn.METADATA_CLASS_FIELDS,n,`metadataClass.${i}`,o),s=`${o}MetadataClass`;e.addStructField(Qn.STRUCT_ID_METADATA_CLASS_FS,s,i),e.addFunctionLines(Qn.FUNCTION_ID_INITIALIZE_METADATA_FS,a),te.includesVertexShader(r)&&(e.addStructField(Qn.STRUCT_ID_METADATA_CLASS_VS,s,i),e.addFunctionLines(Qn.FUNCTION_ID_INITIALIZE_METADATA_VS,a))}function F8(e,t){let{propertyStatistics:n}=t;if(!c(n))return;let{metadataVariable:i,type:o,glslType:r}=t;if(o===Zt.ENUM)return;let a=Qn.METADATA_STATISTICS_FIELDS,s=`metadataStatistics.${i}`,A=k8(a,n,s,r),l=`${r}MetadataStatistics`;e.addStructField(Qn.STRUCT_ID_METADATA_STATISTICS_FS,l,i),e.addFunctionLines(Qn.FUNCTION_ID_INITIALIZE_METADATA_FS,A),te.includesVertexShader(t.shaderDestination)&&(e.addStructField(Qn.STRUCT_ID_METADATA_STATISTICS_VS,l,i),e.addFunctionLines(Qn.FUNCTION_ID_INITIALIZE_METADATA_VS,A))}function k8(e,t,n,i){function o(r){let a=t[r.specName];if(c(a))return`${n}.${r.shaderName} = ${i}(${a});`}return c(t)?e.map(o).filter(c):[]}function U8(e){let{valueExpression:t,property:n}=e;if(!n.hasValueTransform)return t;let i=e.metadataVariable,o=`u_${i}_offset`,r=`u_${i}_scale`,{shaderBuilder:a,uniformMap:s}=e.renderResources,{glslType:A,shaderDestination:l}=e;a.addUniform(A,o,l),a.addUniform(A,r,l);let{offset:f,scale:h}=n;return s[o]=()=>f,s[r]=()=>h,`czm_valueTransform(${o}, ${r}, ${t})`}var Ul=Qn;var uge={INHERIT:0,OPAQUE:1,TRANSLUCENT:2},eD=Object.freeze(uge);var tr={name:"CustomShaderPipelineStage",STRUCT_ID_ATTRIBUTES_VS:"AttributesVS",STRUCT_ID_ATTRIBUTES_FS:"AttributesFS",STRUCT_NAME_ATTRIBUTES:"Attributes",STRUCT_ID_VERTEX_INPUT:"VertexInput",STRUCT_NAME_VERTEX_INPUT:"VertexInput",STRUCT_ID_FRAGMENT_INPUT:"FragmentInput",STRUCT_NAME_FRAGMENT_INPUT:"FragmentInput",FUNCTION_ID_INITIALIZE_INPUT_STRUCT_VS:"initializeInputStructVS",FUNCTION_SIGNATURE_INITIALIZE_INPUT_STRUCT_VS:"void initializeInputStruct(out VertexInput vsInput, ProcessedAttributes attributes)",FUNCTION_ID_INITIALIZE_INPUT_STRUCT_FS:"initializeInputStructFS",FUNCTION_SIGNATURE_INITIALIZE_INPUT_STRUCT_FS:"void initializeInputStruct(out FragmentInput fsInput, ProcessedAttributes attributes)",_oneTimeWarning:jt};tr.process=function(e,t,n){let{shaderBuilder:i,model:o,alphaOptions:r}=e,{customShader:a}=o,{lightingModel:s,translucencyMode:A}=a;c(s)&&(e.lightingOptions.lightingModel=s),A===eD.TRANSLUCENT?r.pass=Ye.TRANSLUCENT:A===eD.OPAQUE&&(r.pass=void 0);let l=Ege(a,t);if(!l.customShaderEnabled)return;if(Bge(i,a,l),l.shouldComputePositionWC&&i.addDefine("COMPUTE_POSITION_WC_CUSTOM_SHADER",void 0,te.BOTH),c(a.vertexShaderText)&&i.addDefine("HAS_CUSTOM_VERTEX_SHADER",void 0,te.VERTEX),c(a.fragmentShaderText)){i.addDefine("HAS_CUSTOM_FRAGMENT_SHADER",void 0,te.FRAGMENT);let m=Zb.getDefineName(a.mode);i.addDefine(m,void 0,te.FRAGMENT)}let f=a.uniforms;for(let m in f)if(f.hasOwnProperty(m)){let p=f[m];i.addUniform(p.type,m)}let h=a.varyings;for(let m in h)if(h.hasOwnProperty(m)){let p=h[m];i.addVarying(p,m)}e.uniformMap=Et(e.uniformMap,a.uniformMap)};function dge(e){let t={};for(let n=0;n<e.length;n++){let i=tt.getAttributeInfo(e[n]);t[i.variableName]=i}return t}var hge={position:"vec3",normal:"vec3",tangent:"vec3",bitangent:"vec3",texCoord:"vec2",color:"vec4",joints:"ivec4",weights:"vec4"},mge={position:"vec3(0.0)",normal:"vec3(0.0, 0.0, 1.0)",tangent:"vec3(1.0, 0.0, 0.0)",bitangent:"vec3(0.0, 1.0, 0.0)",texCoord:"vec2(0.0)",color:"vec4(1.0)",joints:"ivec4(0)",weights:"vec4(0.0)"};function G8(e){let t=e.replace(/_[0-9]+$/,"");t=t.replace(/(MC|EC)$/,"");let n=hge[t],i=mge[t];if(c(n))return{attributeField:[n,e],value:i}}function pge(e,t){if(!c(e.vertexShaderText))return{enabled:!1};let n=e.usedVariablesVertex.attributeSet,i=z8(t,n,!1),o=H8(t,n,!1),r,a=[],s=[];for(let A in i){if(!i.hasOwnProperty(A))continue;let f=[i[A].glslType,A];a.push(f),r=`vsInput.attributes.${A} = attributes.${A};`,s.push(r)}for(let A=0;A<o.length;A++){let l=o[A],f=G8(l);if(!c(f))return tr._oneTimeWarning("CustomShaderPipelineStage.incompatiblePrimitiveVS",`Primitive is missing attribute ${l}, disabling custom vertex shader`),{enabled:!1};a.push(f.attributeField),r=`vsInput.attributes.${l} = ${f.value};`,s.push(r)}return{enabled:!0,attributeFields:a,initializationLines:s}}function gge(e){let t=[],n=[],i=e.usedVariablesFragment.attributeSet;return i.hasOwnProperty("positionWC")&&(t.push(["vec3","positionWC"]),n.push("fsInput.attributes.positionWC = attributes.positionWC;")),i.hasOwnProperty("positionEC")&&(t.push(["vec3","positionEC"]),n.push("fsInput.attributes.positionEC = attributes.positionEC;")),{attributeFields:t,initializationLines:n}}function Cge(e,t){if(!c(e.fragmentShaderText))return{enabled:!1};let n=e.usedVariablesFragment.attributeSet,i=z8(t,n,!0),o=H8(t,n,!0),r,a=[],s=[];for(let l in i){if(!i.hasOwnProperty(l))continue;let h=[i[l].glslType,l];a.push(h),r=`fsInput.attributes.${l} = attributes.${l};`,s.push(r)}for(let l=0;l<o.length;l++){let f=o[l],h=G8(f);if(!c(h))return tr._oneTimeWarning("CustomShaderPipelineStage.incompatiblePrimitiveFS",`Primitive is missing attribute ${f}, disabling custom fragment shader.`),{enabled:!1};a.push(h.attributeField),r=`fsInput.attributes.${f} = ${h.value};`,s.push(r)}let A=gge(e);return{enabled:!0,attributeFields:a.concat(A.attributeFields),initializationLines:A.initializationLines.concat(s)}}var _ge={positionWC:!0,positionEC:!0};function z8(e,t,n){let i={};for(let o in e){if(!e.hasOwnProperty(o))continue;let r=e[o],a=o;n&&o==="normalMC"?a="normalEC":n&&o==="tangentMC"&&(a="tangentEC",r.glslType="vec3"),t.hasOwnProperty(a)&&(i[a]=r)}return i}function H8(e,t,n){let i=[];for(let o in t){if(!t.hasOwnProperty(o)||_ge.hasOwnProperty(o))continue;let r=o;n&&o==="normalEC"?r="normalMC":n&&o==="tangentEC"&&(r="tangentMC"),e.hasOwnProperty(r)||i.push(o)}return i}function Ege(e,t){let n=dge(t.attributes),i=pge(e,n),o=Cge(e,n),a=e.usedVariablesFragment.attributeSet.hasOwnProperty("positionWC")&&o.enabled;return{vertexLines:i,fragmentLines:o,customShaderEnabled:i.enabled||o.enabled,shouldComputePositionWC:a}}function Ige(e,t){let n=tr.STRUCT_ID_ATTRIBUTES_VS;e.addStruct(n,tr.STRUCT_NAME_ATTRIBUTES,te.VERTEX);let{attributeFields:i,initializationLines:o}=t;for(let a=0;a<i.length;a++){let[s,A]=i[a];e.addStructField(n,s,A)}n=tr.STRUCT_ID_VERTEX_INPUT,e.addStruct(n,tr.STRUCT_NAME_VERTEX_INPUT,te.VERTEX),e.addStructField(n,tr.STRUCT_NAME_ATTRIBUTES,"attributes"),e.addStructField(n,C_.STRUCT_NAME_FEATURE_IDS,"featureIds"),e.addStructField(n,Ul.STRUCT_NAME_METADATA,"metadata"),e.addStructField(n,Ul.STRUCT_NAME_METADATA_CLASS,"metadataClass"),e.addStructField(n,Ul.STRUCT_NAME_METADATA_STATISTICS,"metadataStatistics");let r=tr.FUNCTION_ID_INITIALIZE_INPUT_STRUCT_VS;e.addFunction(r,tr.FUNCTION_SIGNATURE_INITIALIZE_INPUT_STRUCT_VS,te.VERTEX),e.addFunctionLines(r,o)}function yge(e,t){let n=tr.STRUCT_ID_ATTRIBUTES_FS;e.addStruct(n,tr.STRUCT_NAME_ATTRIBUTES,te.FRAGMENT);let{attributeFields:i,initializationLines:o}=t;for(let a=0;a<i.length;a++){let[s,A]=i[a];e.addStructField(n,s,A)}n=tr.STRUCT_ID_FRAGMENT_INPUT,e.addStruct(n,tr.STRUCT_NAME_FRAGMENT_INPUT,te.FRAGMENT),e.addStructField(n,tr.STRUCT_NAME_ATTRIBUTES,"attributes"),e.addStructField(n,C_.STRUCT_NAME_FEATURE_IDS,"featureIds"),e.addStructField(n,Ul.STRUCT_NAME_METADATA,"metadata"),e.addStructField(n,Ul.STRUCT_NAME_METADATA_CLASS,"metadataClass"),e.addStructField(n,Ul.STRUCT_NAME_METADATA_STATISTICS,"metadataStatistics");let r=tr.FUNCTION_ID_INITIALIZE_INPUT_STRUCT_FS;e.addFunction(r,tr.FUNCTION_SIGNATURE_INITIALIZE_INPUT_STRUCT_FS,te.FRAGMENT),e.addFunctionLines(r,o)}var bge=[];function Bge(e,t,n){let{vertexLines:i,fragmentLines:o}=n,r=bge;i.enabled&&(Ige(e,i),r.length=0,r.push("#line 0",t.vertexShaderText,D8),e.addVertexLines(r)),o.enabled&&(yge(e,o),r.length=0,r.push("#line 0",t.fragmentShaderText,Q8),e.addFragmentLines(r))}var V8=tr;var __={name:"DequantizationPipelineStage",FUNCTION_ID_DEQUANTIZATION_STAGE_VS:"dequantizationStage",FUNCTION_SIGNATURE_DEQUANTIZATION_STAGE_VS:"void dequantizationStage(inout ProcessedAttributes attributes)"};__.process=function(e,t,n){let i=e.shaderBuilder,o=e.model,r=c(o.classificationType);i.addDefine("USE_DEQUANTIZATION",void 0,te.VERTEX),i.addFunction(__.FUNCTION_ID_DEQUANTIZATION_STAGE_VS,__.FUNCTION_SIGNATURE_DEQUANTIZATION_STAGE_VS,te.VERTEX);let a=t.attributes;for(let s=0;s<a.length;s++){let A=a[s],l=A.quantization;if(!c(l))continue;let f=A.semantic===Pe.POSITION,h=A.semantic===Pe.TEXCOORD;if(r&&!f&&!h)continue;let m=tt.getAttributeInfo(A);Tge(i,m),xge(e,m)}};function xge(e,t){let n=e.shaderBuilder,i=e.uniformMap,o=t.variableName,r=t.attribute.quantization;if(r.octEncoded){let a=`model_normalizationRange_${o}`;n.addUniform("float",a,te.VERTEX),i[a]=function(){return r.normalizationRange}}else{let a=`model_quantizedVolumeOffset_${o}`,s=`model_quantizedVolumeStepSize_${o}`,A=t.glslType;n.addUniform(A,a,te.VERTEX),n.addUniform(A,s,te.VERTEX);let l=r.quantizedVolumeOffset,f=r.quantizedVolumeStepSize;/^color_\d+$/.test(o)&&(l=j8(l,0),f=j8(f,1)),i[a]=function(){return l},i[s]=function(){return f}}}function j8(e,t){return e instanceof se?e:new se(e.x,e.y,e.z,t)}function Tge(e,t){let n=t.variableName,i=t.attribute.quantization,o;i.octEncoded?o=Sge(n,i):o=wge(n),e.addFunctionLines(__.FUNCTION_ID_DEQUANTIZATION_STAGE_VS,[o])}function Sge(e,t){let n=`attributes.${e}`,i=`a_quantized_${e}`,o=`model_normalizationRange_${e}`,r=t.octEncodedZXY?".zxy":".xyz";return`${n} = czm_octDecode(${i}, ${o})${r};`}function wge(e){let t=`attributes.${e}`,n=`a_quantized_${e}`,i=`model_quantizedVolumeOffset_${e}`,o=`model_quantizedVolumeStepSize_${e}`;return`${t} = ${i} + ${n} * ${o};`}var Y8=__;var q8=`void geometryStage(out ProcessedAttributes attributes)
{
  attributes.positionMC = v_positionMC;
  attributes.positionEC = v_positionEC;

  #if defined(COMPUTE_POSITION_WC_CUSTOM_SHADER) || defined(COMPUTE_POSITION_WC_STYLE) || defined(COMPUTE_POSITION_WC_ATMOSPHERE)
  attributes.positionWC = v_positionWC;
  #endif

  #ifdef HAS_NORMALS
  // renormalize after interpolation
  attributes.normalEC = normalize(v_normalEC);
  #endif

  #ifdef HAS_TANGENTS
  attributes.tangentEC = normalize(v_tangentEC);
  #endif

  #ifdef HAS_BITANGENTS
  attributes.bitangentEC = normalize(v_bitangentEC);
  #endif

  // Everything else is dynamically generated in GeometryPipelineStage
  setDynamicVaryings(attributes);
}
`;var W8=`vec4 geometryStage(inout ProcessedAttributes attributes, mat4 modelView, mat3 normal)
{
    vec4 computedPosition;

    // Compute positions in different coordinate systems
    vec3 positionMC = attributes.positionMC;
    v_positionMC = positionMC;
    v_positionEC = (modelView * vec4(positionMC, 1.0)).xyz;

    #if defined(USE_2D_POSITIONS) || defined(USE_2D_INSTANCING)
    vec3 position2D = attributes.position2D;
    vec3 positionEC = (u_modelView2D * vec4(position2D, 1.0)).xyz;
    computedPosition = czm_projection * vec4(positionEC, 1.0);
    #else
    computedPosition = czm_projection * vec4(v_positionEC, 1.0);
    #endif

    // Sometimes the custom shader and/or style needs this
    #if defined(COMPUTE_POSITION_WC_CUSTOM_SHADER) || defined(COMPUTE_POSITION_WC_STYLE) || defined(COMPUTE_POSITION_WC_ATMOSPHERE) || defined(ENABLE_CLIPPING_POLYGONS)
    // Note that this is a 32-bit position which may result in jitter on small
    // scales.
    v_positionWC = (czm_model * vec4(positionMC, 1.0)).xyz;
    #endif

    #ifdef HAS_NORMALS
    v_normalEC = normalize(normal * attributes.normalMC);
    #endif

    #ifdef HAS_TANGENTS
    v_tangentEC = normalize(normal * attributes.tangentMC);
    #endif

    #ifdef HAS_BITANGENTS
    v_bitangentEC = normalize(normal * attributes.bitangentMC);
    #endif

    // All other varyings need to be dynamically generated in
    // GeometryPipelineStage
    setDynamicVaryings(attributes);

    return computedPosition;
}
`;var tD=`vec2 computeSt(float featureId)
{
    float stepX = model_textureStep.x;
    float centerX = model_textureStep.y;

    #ifdef MULTILINE_BATCH_TEXTURE
    float stepY = model_textureStep.z;
    float centerY = model_textureStep.w;

    float xId = mod(featureId, model_textureDimensions.x); 
    float yId = floor(featureId / model_textureDimensions.x);
    
    return vec2(centerX + (xId * stepX), centerY + (yId * stepY));
    #else
    return vec2(centerX + (featureId * stepX), 0.5);
    #endif
}

void selectedFeatureIdStage(out SelectedFeature feature, FeatureIds featureIds)
{   
    int featureId = featureIds.SELECTED_FEATURE_ID;


    if (featureId < model_featuresLength)
    {
        vec2 featureSt = computeSt(float(featureId));

        feature.id = featureId;
        feature.st = featureSt;
        feature.color = texture(model_batchTexture, featureSt);
    }
    // Floating point comparisons can be unreliable in GLSL, so we
    // increment the feature ID to make sure it's always greater
    // then the model_featuresLength - a condition we check for in the
    // pick ID, to avoid sampling the pick texture if the feature ID is
    // greater than the number of features.
    else
    {
        feature.id = model_featuresLength + 1;
        feature.st = vec2(0.0);
        feature.color = vec4(1.0);
    }

    #ifdef HAS_NULL_FEATURE_ID
    if (featureId == model_nullFeatureId) {
        feature.id = featureId;
        feature.st = vec2(0.0);
        feature.color = vec4(1.0);
    }
    #endif
}
`;var E_={name:"SelectedFeatureIdPipelineStage",STRUCT_ID_SELECTED_FEATURE:"SelectedFeature",STRUCT_NAME_SELECTED_FEATURE:"SelectedFeature"};E_.process=function(e,t,n){let i=e.shaderBuilder;e.hasPropertyTable=!0;let o=e.model,r=e.runtimeNode.node,a=Dge(o,r,t),s=a.shaderDestination;i.addDefine("HAS_SELECTED_FEATURE_ID",void 0,s),i.addDefine("SELECTED_FEATURE_ID",a.variableName,s),i.addDefine(a.featureIdDefine,void 0,s),Qge(i);let A=a.featureIds.nullFeatureId,l=e.uniformMap;c(A)&&(i.addDefine("HAS_NULL_FEATURE_ID",void 0,s),i.addUniform("int","model_nullFeatureId",s),l.model_nullFeatureId=function(){return A}),a.shaderDestination===te.BOTH&&i.addVertexLines(tD),i.addFragmentLines(tD)};function J8(e){return e instanceof Lt.FeatureIdTexture?"HAS_SELECTED_FEATURE_ID_TEXTURE":"HAS_SELECTED_FEATURE_ID_ATTRIBUTE"}function K8(e){return e instanceof Lt.FeatureIdTexture?te.FRAGMENT:te.BOTH}function Dge(e,t,n){let i,o;return c(t.instances)&&(o=tt.getFeatureIdsByLabel(t.instances.featureIds,e.instanceFeatureIdLabel),c(o))?(i=o.label??o.positionalLabel,{featureIds:o,variableName:i,shaderDestination:K8(o),featureIdDefine:J8(o)}):(o=tt.getFeatureIdsByLabel(n.featureIds,e.featureIdLabel),i=o.label??o.positionalLabel,{featureIds:o,variableName:i,shaderDestination:K8(o),featureIdDefine:J8(o)})}function Qge(e){e.addStructField(E_.STRUCT_ID_SELECTED_FEATURE,"int","id"),e.addStructField(E_.STRUCT_ID_SELECTED_FEATURE,"vec2","st"),e.addStructField(E_.STRUCT_ID_SELECTED_FEATURE,"vec4","color")}var I_=E_;var Ho={name:"GeometryPipelineStage",STRUCT_ID_PROCESSED_ATTRIBUTES_VS:"ProcessedAttributesVS",STRUCT_ID_PROCESSED_ATTRIBUTES_FS:"ProcessedAttributesFS",STRUCT_NAME_PROCESSED_ATTRIBUTES:"ProcessedAttributes",FUNCTION_ID_INITIALIZE_ATTRIBUTES:"initializeAttributes",FUNCTION_SIGNATURE_INITIALIZE_ATTRIBUTES:"void initializeAttributes(out ProcessedAttributes attributes)",FUNCTION_ID_SET_DYNAMIC_VARYINGS_VS:"setDynamicVaryingsVS",FUNCTION_ID_SET_DYNAMIC_VARYINGS_FS:"setDynamicVaryingsFS",FUNCTION_SIGNATURE_SET_DYNAMIC_VARYINGS:"void setDynamicVaryings(inout ProcessedAttributes attributes)"};Ho.process=function(e,t,n){let{shaderBuilder:i,model:o}=e;i.addStruct(Ho.STRUCT_ID_PROCESSED_ATTRIBUTES_VS,"ProcessedAttributes",te.VERTEX),i.addStruct(Ho.STRUCT_ID_PROCESSED_ATTRIBUTES_FS,"ProcessedAttributes",te.FRAGMENT),i.addStruct(I_.STRUCT_ID_SELECTED_FEATURE,I_.STRUCT_NAME_SELECTED_FEATURE,te.BOTH),i.addFunction(Ho.FUNCTION_ID_INITIALIZE_ATTRIBUTES,Ho.FUNCTION_SIGNATURE_INITIALIZE_ATTRIBUTES,te.VERTEX),i.addVarying("vec3","v_positionWC"),i.addVarying("vec3","v_positionEC"),i.addStructField(Ho.STRUCT_ID_PROCESSED_ATTRIBUTES_FS,"vec3","positionWC"),i.addStructField(Ho.STRUCT_ID_PROCESSED_ATTRIBUTES_FS,"vec3","positionEC"),i.addFunction(Ho.FUNCTION_ID_SET_DYNAMIC_VARYINGS_VS,Ho.FUNCTION_SIGNATURE_SET_DYNAMIC_VARYINGS,te.VERTEX),i.addFunction(Ho.FUNCTION_ID_SET_DYNAMIC_VARYINGS_FS,Ho.FUNCTION_SIGNATURE_SET_DYNAMIC_VARYINGS,te.FRAGMENT),o.type===lo.TILE_PNTS&&i.addDefine("HAS_SRGB_COLOR",void 0,te.FRAGMENT);let r=n.mode!==Te.SCENE3D&&!n.scene3DOnly&&o._projectTo2D,a=c(e.runtimeNode.node.instances),s=r&&!a,A=t.attributes.length;for(let l=0;l<A;l++){let f=t.attributes[l],h=st.getAttributeLocationCount(f.type),m=f.semantic===Pe.POSITION,p;h>1?(p=e.attributeIndex,e.attributeIndex+=h):m&&!s?p=0:p=e.attributeIndex++,Rge(e,f,p,h,r,a)}Uge(i,t.attributes),t.primitiveType===Ce.POINTS&&i.addDefine("PRIMITIVE_TYPE_POINTS"),i.addVertexLines(W8),i.addFragmentLines(q8)};function Rge(e,t,n,i,o,r){let a=e.shaderBuilder,s=tt.getAttributeInfo(t),A=o&&!r;i>1?Mge(e,t,n,i):Pge(e,t,n,A),Lge(a,s,A),Oge(a,s),c(t.semantic)&&vge(a,t),Nge(a,s,o),Fge(a,s,A),kge(a,s)}function vge(e,t){let{semantic:n,setIndex:i}=t;switch(n){case Pe.NORMAL:e.addDefine("HAS_NORMALS");break;case Pe.TANGENT:e.addDefine("HAS_TANGENTS");break;case Pe.FEATURE_ID:e.addDefine(`HAS${n}_${i}`);break;case Pe.TEXCOORD:case Pe.COLOR:e.addDefine(`HAS_${n}_${i}`)}}function Pge(e,t,n,i){let{quantization:o,semantic:r,setIndex:a}=t,{type:s,componentDatatype:A}=c(o)?o:t;r===Pe.FEATURE_ID&&a>=e.featureIdVertexAttributeSetIndex&&(e.featureIdVertexAttributeSetIndex=a+1);let l=r===Pe.POSITION,f=l?0:n,h=st.getNumberOfComponents(s),m={index:f,value:c(t.buffer)?void 0:t.constant,vertexBuffer:t.buffer,count:t.count,componentsPerAttribute:h,componentDatatype:A,offsetInBytes:t.byteOffset,strideInBytes:t.byteStride,normalize:t.normalized};if(e.attributes.push(m),!l||!i)return;let p=e.runtimePrimitive.positionBuffer2D,g={index:n,vertexBuffer:p,count:t.count,componentsPerAttribute:h,componentDatatype:N.FLOAT,offsetInBytes:0,strideInBytes:void 0,normalize:t.normalized};e.attributes.push(g)}function Mge(e,t,n,i){let{quantization:o,normalized:r}=t,{type:a,componentDatatype:s}=c(o)?o:t,l=st.getNumberOfComponents(a)/i,f=N.getSizeInBytes(s),h=l*f,m=t.byteStride;for(let p=0;p<i;p++){let g=t.byteOffset+p*h,C={index:n+p,vertexBuffer:t.buffer,componentsPerAttribute:l,componentDatatype:s,offsetInBytes:g,strideInBytes:m,normalize:r};e.attributes.push(C)}}function Oge(e,t){let n=t.variableName,i=`v_${n}`,o;n==="normalMC"?(i="v_normalEC",o=t.glslType):n==="tangentMC"?(o="vec3",i="v_tangentEC"):o=t.glslType,e.addVarying(o,i)}function Lge(e,t,n){let i=t.attribute.semantic,o=t.variableName,r,a;t.isQuantized?(r=`a_quantized_${o}`,a=t.quantizedGlslType):(r=`a_${o}`,a=t.glslType);let s=i===Pe.POSITION;s?e.setPositionAttribute(a,r):e.addAttribute(a,r),s&&n&&e.addAttribute("vec3","a_position2D")}function Nge(e,t,n){let i=Ho.STRUCT_ID_PROCESSED_ATTRIBUTES_VS,o=Ho.STRUCT_ID_PROCESSED_ATTRIBUTES_FS,{variableName:r,glslType:a}=t;r==="tangentMC"?(e.addStructField(i,"vec3","tangentMC"),e.addStructField(i,"float","tangentSignMC"),e.addStructField(o,"vec3","tangentEC")):r==="normalMC"?(e.addStructField(i,"vec3","normalMC"),e.addStructField(o,"vec3","normalEC")):(e.addStructField(i,a,r),e.addStructField(o,a,r)),r==="positionMC"&&n&&e.addStructField(i,"vec3","position2D")}function Fge(e,t,n){let i=Ho.FUNCTION_ID_INITIALIZE_ATTRIBUTES,o=t.variableName;if(o==="positionMC"&&n&&e.addFunctionLines(i,["attributes.position2D = a_position2D;"]),t.isQuantized)return;let a=[];o==="tangentMC"?(a.push("attributes.tangentMC = a_tangentMC.xyz;"),a.push("attributes.tangentSignMC = a_tangentMC.w;")):a.push(`attributes.${o} = a_${o};`),e.addFunctionLines(i,a)}function kge(e,t){let{semantic:n,setIndex:i}=t.attribute;if(c(n)&&!c(i))return;let o=Ho.FUNCTION_ID_SET_DYNAMIC_VARYINGS_VS,r=t.variableName,a=`v_${r} = attributes.${r};`;e.addFunctionLines(o,[a]),o=Ho.FUNCTION_ID_SET_DYNAMIC_VARYINGS_FS,a=`attributes.${r} = v_${r};`,e.addFunctionLines(o,[a])}function Uge(e,t){let n=!1,i=!1;for(let o=0;o<t.length;o++){let r=t[o];r.semantic===Pe.NORMAL?n=!0:r.semantic===Pe.TANGENT&&(i=!0)}!n||!i||(e.addDefine("HAS_BITANGENTS"),e.addVarying("vec3","v_bitangentEC"),e.addStructField(Ho.STRUCT_ID_PROCESSED_ATTRIBUTES_VS,"vec3","bitangentMC"),e.addStructField(Ho.STRUCT_ID_PROCESSED_ATTRIBUTES_FS,"vec3","bitangentEC"))}var X8=Ho;function Tu(e){if(e=e??k.EMPTY_OBJECT,this._ellipsoid=e.ellipsoid??Z.default,this._numberOfLevelZeroTilesX=e.numberOfLevelZeroTilesX??1,this._numberOfLevelZeroTilesY=e.numberOfLevelZeroTilesY??1,this._projection=new Ar(this._ellipsoid),c(e.rectangleSouthwestInMeters)&&c(e.rectangleNortheastInMeters))this._rectangleSouthwestInMeters=e.rectangleSouthwestInMeters,this._rectangleNortheastInMeters=e.rectangleNortheastInMeters;else{let i=this._ellipsoid.maximumRadius*Math.PI;this._rectangleSouthwestInMeters=new U(-i,-i),this._rectangleNortheastInMeters=new U(i,i)}let t=this._projection.unproject(this._rectangleSouthwestInMeters),n=this._projection.unproject(this._rectangleNortheastInMeters);this._rectangle=new ce(t.longitude,t.latitude,n.longitude,n.latitude)}Object.defineProperties(Tu.prototype,{ellipsoid:{get:function(){return this._ellipsoid}},rectangle:{get:function(){return this._rectangle}},projection:{get:function(){return this._projection}}});Tu.prototype.getNumberOfXTilesAtLevel=function(e){return this._numberOfLevelZeroTilesX<<e};Tu.prototype.getNumberOfYTilesAtLevel=function(e){return this._numberOfLevelZeroTilesY<<e};Tu.prototype.rectangleToNativeRectangle=function(e,t){let n=this._projection,i=n.project(ce.southwest(e)),o=n.project(ce.northeast(e));return c(t)?(t.west=i.x,t.south=i.y,t.east=o.x,t.north=o.y,t):new ce(i.x,i.y,o.x,o.y)};Tu.prototype.tileXYToNativeRectangle=function(e,t,n,i){let o=this.getNumberOfXTilesAtLevel(n),r=this.getNumberOfYTilesAtLevel(n),a=(this._rectangleNortheastInMeters.x-this._rectangleSouthwestInMeters.x)/o,s=this._rectangleSouthwestInMeters.x+e*a,A=this._rectangleSouthwestInMeters.x+(e+1)*a,l=(this._rectangleNortheastInMeters.y-this._rectangleSouthwestInMeters.y)/r,f=this._rectangleNortheastInMeters.y-t*l,h=this._rectangleNortheastInMeters.y-(t+1)*l;return c(i)?(i.west=s,i.south=h,i.east=A,i.north=f,i):new ce(s,h,A,f)};Tu.prototype.tileXYToRectangle=function(e,t,n,i){let o=this.tileXYToNativeRectangle(e,t,n,i),r=this._projection,a=r.unproject(new U(o.west,o.south)),s=r.unproject(new U(o.east,o.north));return o.west=a.longitude,o.south=a.latitude,o.east=s.longitude,o.north=s.latitude,o};Tu.prototype.positionToTileXY=function(e,t,n){let i=this._rectangle;if(!ce.contains(i,e))return;let o=this.getNumberOfXTilesAtLevel(t),r=this.getNumberOfYTilesAtLevel(t),s=(this._rectangleNortheastInMeters.x-this._rectangleSouthwestInMeters.x)/o,l=(this._rectangleNortheastInMeters.y-this._rectangleSouthwestInMeters.y)/r,h=this._projection.project(e),m=h.x-this._rectangleSouthwestInMeters.x,p=this._rectangleNortheastInMeters.y-h.y,g=m/s|0;g>=o&&(g=o-1);let C=p/l|0;return C>=r&&(C=r-1),c(n)?(n.x=g,n.y=C,n):new U(g,C)};var rs=Tu;var nD,Z8="AAPTxy8BH1VEsoebNVZXo8HurEOF051kAEKlhkOhBEc9BmRXcPUeuOd6ZTh-Z86vRv6teqZdBYLUWIxB6HTYajPhFtAlXhMdqTg07UwlBQ59KbiReC5wCeOF4LzLTW4oaSPp-t4pEcJHnFePlnFcIPXM7R565gTy6f6fMuZAXPvUEuZSMf8dvTqHyV9-Zd9eZGWokDzKC4uEtHME7OeAk3oyZ7vzkjEo8fpuIfFw0sH8vQU.AT1_PLgWE6Lc",ip={};ip.defaultAccessToken=Z8;ip.defaultWorldImageryServer=new ke({url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"});ip.defaultWorldHillshadeServer=new ke({url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"});ip.defaultWorldOceanServer=new ke({url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer"});ip.getDefaultTokenCredit=function(e){if(e===Z8){if(!c(nD)){let t='<b>             This application is using a default ArcGIS access token. Please assign <i>Cesium.ArcGisMapService.defaultAccessToken</i>             with an API key from your ArcGIS Developer account before using the ArcGIS tile services.             You can sign up for a free ArcGIS Developer account at <a href="https://developers.arcgis.com/">https://developers.arcgis.com/</a>.</b>';nD=new fn(t,!0)}return nD}};var PA=ip;function iD(e){e=e??k.EMPTY_OBJECT,this._pixelsToCheck=e.pixelsToCheck,this._missingImagePixels=void 0,this._missingImageByteLength=void 0,this._isReady=!1;let t=ke.createIfNeeded(e.missingImageUrl),n=this;function i(r){c(r.blob)&&(n._missingImageByteLength=r.blob.size);let a=Wh(r);if(e.disableCheckIfAllPixelsAreTransparent){let s=!0,A=r.width,l=e.pixelsToCheck;for(let f=0,h=l.length;s&&f<h;++f){let m=l[f],p=m.x*4+m.y*A;a[p+3]>0&&(s=!1)}s&&(a=void 0)}n._missingImagePixels=a,n._isReady=!0}function o(){n._missingImagePixels=void 0,n._isReady=!0}t.fetchImage({preferBlob:!0,preferImageBitmap:!0,flipY:!0}).then(i).catch(o)}iD.prototype.isReady=function(){return this._isReady};iD.prototype.shouldDiscardImage=function(e){let t=this._pixelsToCheck,n=this._missingImagePixels;if(!c(n)||c(e.blob)&&e.blob.size!==this._missingImageByteLength)return!1;let i=Wh(e),o=e.width;for(let r=0,a=t.length;r<a;++r){let s=t[r],A=s.x*4+s.y*o;for(let l=0;l<4;++l){let f=A+l;if(i[f]!==n[f])return!1}}return!0};var $8=iD;function oD(){this.name=void 0,this.description=void 0,this.position=void 0,this.data=void 0,this.imageryLayer=void 0}oD.prototype.configureNameFromProperties=function(e){let t=10,n;for(let i in e)if(e.hasOwnProperty(i)&&e[i]){let o=i.toLowerCase();t>1&&o==="name"?(t=1,n=i):t>2&&o==="title"?(t=2,n=i):t>3&&/name/i.test(i)?(t=3,n=i):t>4&&/title/i.test(i)&&(t=4,n=i)}c(n)&&(this.name=e[n])};oD.prototype.configureDescriptionFromProperties=function(e){function t(n){let i='<table class="cesium-infoBox-defaultTable">';for(let o in n)if(n.hasOwnProperty(o)){let r=n[o];c(r)&&(typeof r=="object"?i+=`<tr><td>${o}</td><td>${t(r)}</td></tr>`:i+=`<tr><td>${o}</td><td>${r}</td></tr>`)}return i+="</table>",i}this.description=t(e)};var Su=oD;function op(){Ee.throwInstantiationError()}Object.defineProperties(op.prototype,{rectangle:{get:Ee.throwInstantiationError},tileWidth:{get:Ee.throwInstantiationError},tileHeight:{get:Ee.throwInstantiationError},maximumLevel:{get:Ee.throwInstantiationError},minimumLevel:{get:Ee.throwInstantiationError},tilingScheme:{get:Ee.throwInstantiationError},tileDiscardPolicy:{get:Ee.throwInstantiationError},errorEvent:{get:Ee.throwInstantiationError},credit:{get:Ee.throwInstantiationError},proxy:{get:Ee.throwInstantiationError},hasAlphaChannel:{get:Ee.throwInstantiationError}});op.prototype.getTileCredits=function(e,t,n){Ee.throwInstantiationError()};op.prototype.requestImage=function(e,t,n,i){Ee.throwInstantiationError()};op.prototype.pickFeatures=function(e,t,n,i,o){Ee.throwInstantiationError()};var Gge=/\.ktx2$/i;op.loadImage=function(e,t){let n=ke.createIfNeeded(t);return Gge.test(n.url)?dl(n):c(e)&&c(e.tileDiscardPolicy)?n.fetchImage({preferBlob:!0,preferImageBitmap:!0,flipY:!0}):n.fetchImage({preferImageBitmap:!0,flipY:!0})};var Ks=op;var zge={SATELLITE:1,OCEANS:2,HILLSHADE:3},$b=Object.freeze(zge);function eH(e){this.useTiles=e.usePreCachedTilesIfAvailable??!0;let t=e.ellipsoid;this.tilingScheme=e.tilingScheme??new ba({ellipsoid:t}),this.rectangle=e.rectangle??this.tilingScheme.rectangle,this.ellipsoid=t;let n=e.credit;typeof n=="string"&&(n=new fn(n)),this.credit=n,this.tileCredits=void 0,this.tileDiscardPolicy=e.tileDiscardPolicy,this.tileWidth=e.tileWidth??256,this.tileHeight=e.tileHeight??256,this.maximumLevel=e.maximumLevel}eH.prototype.build=function(e){e._useTiles=this.useTiles,e._tilingScheme=this.tilingScheme,e._rectangle=this.rectangle,e._credit=this.credit,e._tileCredits=this.tileCredits,e._tileDiscardPolicy=this.tileDiscardPolicy,e._tileWidth=this.tileWidth,e._tileHeight=this.tileHeight,e._maximumLevel=this.maximumLevel,this.useTiles&&!c(this.tileDiscardPolicy)&&(e._tileDiscardPolicy=new $8({missingImageUrl:tH(e,0,0,this.maximumLevel).url,pixelsToCheck:[new U(0,0),new U(200,20),new U(20,200),new U(80,110),new U(160,130)],disableCheckIfAllPixelsAreTransparent:!0}))};function Hge(e,t){let n=e.tileInfo;if(!c(n))t.useTiles=!1;else{if(t.tileWidth=n.rows,t.tileHeight=n.cols,n.spatialReference.wkid===102100||n.spatialReference.wkid===102113)t.tilingScheme=new rs({ellipsoid:t.ellipsoid});else if(e.tileInfo.spatialReference.wkid===4326)t.tilingScheme=new ba({ellipsoid:t.ellipsoid});else{let i=`Tile spatial reference WKID ${e.tileInfo.spatialReference.wkid} is not supported.`;throw new oe(i)}if(t.maximumLevel=e.tileInfo.lods.length-1,c(e.fullExtent)){if(c(e.fullExtent.spatialReference)&&c(e.fullExtent.spatialReference.wkid))if(e.fullExtent.spatialReference.wkid===102100||e.fullExtent.spatialReference.wkid===102113){let i=new Ar,o=e.fullExtent,r=i.unproject(new u(Math.max(o.xmin,-t.tilingScheme.ellipsoid.maximumRadius*Math.PI),Math.max(o.ymin,-t.tilingScheme.ellipsoid.maximumRadius*Math.PI),0)),a=i.unproject(new u(Math.min(o.xmax,t.tilingScheme.ellipsoid.maximumRadius*Math.PI),Math.min(o.ymax,t.tilingScheme.ellipsoid.maximumRadius*Math.PI),0));t.rectangle=new ce(r.longitude,r.latitude,a.longitude,a.latitude)}else if(e.fullExtent.spatialReference.wkid===4326)t.rectangle=ce.fromDegrees(e.fullExtent.xmin,e.fullExtent.ymin,e.fullExtent.xmax,e.fullExtent.ymax);else{let i=`fullExtent.spatialReference WKID ${e.fullExtent.spatialReference.wkid} is not supported.`;throw new oe(i)}}else t.rectangle=t.tilingScheme.rectangle;t.useTiles=!0}c(e.copyrightText)&&e.copyrightText.length>0&&(c(t.credit)?t.tileCredits=[new fn(e.copyrightText)]:t.credit=new fn(e.copyrightText))}function Vge(e,t){let n=`An error occurred while accessing ${e.url}`;throw c(t)&&c(t.message)&&(n+=`: ${t.message}`),new oe(n)}async function jge(e,t){let n=e.getDerivedResource({queryParameters:{f:"json"}});try{let i=await n.fetchJson();Hge(i,t)}catch(i){Vge(e,i)}}function MA(e){e=e??k.EMPTY_OBJECT,this._defaultAlpha=void 0,this._defaultNightAlpha=void 0,this._defaultDayAlpha=void 0,this._defaultBrightness=void 0,this._defaultContrast=void 0,this._defaultHue=void 0,this._defaultSaturation=void 0,this._defaultGamma=void 0,this._defaultMinificationFilter=void 0,this._defaultMagnificationFilter=void 0,this._tileDiscardPolicy=e.tileDiscardPolicy,this._tileWidth=e.tileWidth??256,this._tileHeight=e.tileHeight??256,this._maximumLevel=e.maximumLevel,this._tilingScheme=e.tilingScheme??new ba({ellipsoid:e.ellipsoid}),this._useTiles=e.usePreCachedTilesIfAvailable??!0,this._rectangle=e.rectangle??this._tilingScheme.rectangle,this._layers=e.layers,this._credit=e.credit,this._tileCredits=void 0;let t=e.credit;typeof t=="string"&&(t=new fn(t)),this.enablePickFeatures=e.enablePickFeatures??!0,this._errorEvent=new fe}MA.fromBasemapType=async function(e,t){t=t??k.EMPTY_OBJECT;let n,i,o;switch(e){case $b.SATELLITE:{n=t.token??PA.defaultAccessToken,i=ke.createIfNeeded(PA.defaultWorldImageryServer),i.appendForwardSlash();let r=PA.getDefaultTokenCredit(n);c(r)&&(o=fn.clone(r))}break;case $b.OCEANS:{n=t.token??PA.defaultAccessToken,i=ke.createIfNeeded(PA.defaultWorldOceanServer),i.appendForwardSlash();let r=PA.getDefaultTokenCredit(n);c(r)&&(o=fn.clone(r))}break;case $b.HILLSHADE:{n=t.token??PA.defaultAccessToken,i=ke.createIfNeeded(PA.defaultWorldHillshadeServer),i.appendForwardSlash();let r=PA.getDefaultTokenCredit(n);c(r)&&(o=fn.clone(r))}break;default:}return MA.fromUrl(i,{...t,token:n,credit:o,usePreCachedTilesIfAvailable:!0})};function tH(e,t,n,i,o){let r;if(e._useTiles)r=e._resource.getDerivedResource({url:`tile/${i}/${n}/${t}`,request:o});else{let a=e._tilingScheme.tileXYToNativeRectangle(t,n,i),A={bbox:`${a.west},${a.south},${a.east},${a.north}`,size:`${e._tileWidth},${e._tileHeight}`,format:"png32",transparent:!0,f:"image"};e._tilingScheme.projection instanceof Ai?(A.bboxSR=4326,A.imageSR=4326):(A.bboxSR=3857,A.imageSR=3857),e.layers&&(A.layers=`show:${e.layers}`),r=e._resource.getDerivedResource({url:"export",request:o,queryParameters:A})}return r}Object.defineProperties(MA.prototype,{url:{get:function(){return this._resource._url}},token:{get:function(){return this._resource.queryParameters.token}},proxy:{get:function(){return this._resource.proxy}},tileWidth:{get:function(){return this._tileWidth}},tileHeight:{get:function(){return this._tileHeight}},maximumLevel:{get:function(){return this._maximumLevel}},minimumLevel:{get:function(){return 0}},tilingScheme:{get:function(){return this._tilingScheme}},rectangle:{get:function(){return this._rectangle}},tileDiscardPolicy:{get:function(){return this._tileDiscardPolicy}},errorEvent:{get:function(){return this._errorEvent}},credit:{get:function(){return this._credit}},usingPrecachedTiles:{get:function(){return this._useTiles}},hasAlphaChannel:{get:function(){return!0}},layers:{get:function(){return this._layers}}});MA.fromUrl=async function(e,t){t=t??k.EMPTY_OBJECT;let n=ke.createIfNeeded(e);n.appendForwardSlash(),c(t.token)&&n.setQueryParameters({token:t.token});let i=new MA(t);i._resource=n;let o=new eH(t);return(t.usePreCachedTilesIfAvailable??!0)&&await jge(n,o),o.build(i),i};MA.prototype.getTileCredits=function(e,t,n){return this._tileCredits};MA.prototype.requestImage=function(e,t,n,i){return Ks.loadImage(this,tH(this,e,t,n,i))};MA.prototype.pickFeatures=function(e,t,n,i,o){if(!this.enablePickFeatures)return;let r=this._tilingScheme.tileXYToNativeRectangle(e,t,n),a,s,A;if(this._tilingScheme.projection instanceof Ai)a=w.toDegrees(i),s=w.toDegrees(o),A="4326";else{let m=this._tilingScheme.projection.project(new ae(i,o,0));a=m.x,s=m.y,A="3857"}let l="visible";c(this._layers)&&(l+=`:${this._layers}`);let f={f:"json",tolerance:2,geometryType:"esriGeometryPoint",geometry:`${a},${s}`,mapExtent:`${r.west},${r.south},${r.east},${r.north}`,imageDisplay:`${this._tileWidth},${this._tileHeight},96`,sr:A,layers:l};return this._resource.getDerivedResource({url:"identify",queryParameters:f}).fetchJson().then(function(m){let p=[],g=m.results;if(!c(g))return p;for(let C=0;C<g.length;++C){let _=g[C],E=new Su;if(E.data=_,E.name=_.value,E.properties=_.attributes,E.configureDescriptionFromProperties(_.attributes),_.geometryType==="esriGeometryPoint"&&_.geometry){let I=_.geometry.spatialReference&&_.geometry.spatialReference.wkid?_.geometry.spatialReference.wkid:4326;if(I===4326||I===4283)E.position=ae.fromDegrees(_.geometry.x,_.geometry.y,_.geometry.z);else if(I===102100||I===900913||I===3857){let y=new Ar;E.position=y.unproject(new u(_.geometry.x,_.geometry.y,_.geometry.z))}}p.push(E)}return p})};MA._metadataCache={};var nH=MA;function Yge(e){let t,n=e.name,i=e.message;c(n)&&c(i)?t=`${n}: ${i}`:t=e.toString();let o=e.stack;return c(o)&&(t+=`
${o}`),t}var iH=Yge;function e0(e,t,n,i,o,r,a){this.provider=e,this.message=t,this.x=n,this.y=i,this.level=o,this.timesRetried=r??0,this.retry=!1,this.error=a}e0.reportError=function(e,t,n,i,o,r,a,s){let A=e;return c(e)?(A.provider=t,A.message=i,A.x=o,A.y=r,A.level=a,A.retry=!1,A.error=s,++A.timesRetried):A=new e0(t,i,o,r,a,0,s),c(n)&&n.numberOfListeners>0?n.raiseEvent(A):c(t)&&console.log(`An error occurred in "${t.constructor.name}": ${iH(i)}`),A};e0.reportSuccess=function(e){c(e)&&(e.timesRetried=-1)};var as=e0;var qge={AERIAL:"Aerial",AERIAL_WITH_LABELS:"AerialWithLabels",AERIAL_WITH_LABELS_ON_DEMAND:"AerialWithLabelsOnDemand",ROAD:"Road",ROAD_ON_DEMAND:"RoadOnDemand",CANVAS_DARK:"CanvasDark",CANVAS_LIGHT:"CanvasLight",CANVAS_GRAY:"CanvasGray",ORDNANCE_SURVEY:"OrdnanceSurvey",COLLINS_BART:"CollinsBart"},rD=Object.freeze(qge);function y_(e){}y_.prototype.isReady=function(){return!0};y_.prototype.shouldDiscardImage=function(e){return y_.EMPTY_IMAGE===e};var t0;Object.defineProperties(y_,{EMPTY_IMAGE:{get:function(){return c(t0)||(t0=new Image,t0.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII="),t0}}});var aD=y_;function oH(e){this.tileWidth=void 0,this.tileHeight=void 0,this.maximumLevel=void 0,this.imageUrlSubdomains=void 0,this.imageUrlTemplate=void 0,this.attributionList=void 0}oH.prototype.build=function(e){e._tileWidth=this.tileWidth,e._tileHeight=this.tileHeight,e._maximumLevel=this.maximumLevel,e._imageUrlSubdomains=this.imageUrlSubdomains,e._imageUrlTemplate=this.imageUrlTemplate;let t=e._attributionList=this.attributionList;t||(t=[]),e._attributionList=t;for(let n=0,i=t.length;n<i;++n){let o=t[n];if(o.credit instanceof fn)break;o.credit=new fn(o.attribution);let r=o.coverageAreas;for(let a=0,s=o.coverageAreas.length;a<s;++a){let A=r[a],l=A.bbox;A.bbox=new ce(w.toRadians(l[1]),w.toRadians(l[0]),w.toRadians(l[3]),w.toRadians(l[2]))}}};function Wge(e,t){if(e.resourceSets.length!==1)throw new oe("metadata does not specify one resource in resourceSets");let n=e.resourceSets[0].resources[0];t.tileWidth=n.imageWidth,t.tileHeight=n.imageHeight,t.maximumLevel=n.zoomMax-1,t.imageUrlSubdomains=n.imageUrlSubdomains,t.imageUrlTemplate=n.imageUrl;let i=n.imageryProviders;c(n.imageryProviders)&&(i=n.imageryProviders.filter(o=>o.coverageAreas?.some(r=>c(r.bbox)))),t.attributionList=i}function Jge(e,t,n){let i=`An error occurred while accessing ${e.url}`;throw c(t)&&c(t.message)&&(i+=`: ${t.message}`),as.reportError(void 0,n,c(n)?n._errorEvent:void 0,i,void 0,void 0,void 0,t),new oe(i)}async function Kge(e,t,n){let i=e.url,o=So._metadataCache[i];c(o)||(o=e.fetchJson(),So._metadataCache[i]=o);try{let r=await o;return Wge(r,t)}catch(r){Jge(e,r,n)}}function So(e){e=e??k.EMPTY_OBJECT,this._defaultAlpha=void 0,this._defaultNightAlpha=void 0,this._defaultDayAlpha=void 0,this._defaultBrightness=void 0,this._defaultContrast=void 0,this._defaultHue=void 0,this._defaultSaturation=void 0,this._defaultGamma=1,this._defaultMinificationFilter=void 0,this._defaultMagnificationFilter=void 0,this._mapStyle=e.mapStyle??rD.AERIAL,this._mapLayer=e.mapLayer,this._culture=e.culture??"",this._key=e.key,this._tileDiscardPolicy=e.tileDiscardPolicy,c(this._tileDiscardPolicy)||(this._tileDiscardPolicy=new aD),this._proxy=e.proxy,this._credit=new fn(`<a href="https://www.microsoft.com/en-us/maps/bing-maps/product"><img src="${So.logoUrl}" title="Bing Imagery"/></a>`),this._tilingScheme=new rs({numberOfLevelZeroTilesX:2,numberOfLevelZeroTilesY:2,ellipsoid:e.ellipsoid}),this._tileWidth=void 0,this._tileHeight=void 0,this._maximumLevel=void 0,this._imageUrlTemplate=void 0,this._imageUrlSubdomains=void 0,this._attributionList=void 0,this._errorEvent=new fe}Object.defineProperties(So.prototype,{url:{get:function(){return this._resource.url}},proxy:{get:function(){return this._resource.proxy}},key:{get:function(){return this._key}},mapStyle:{get:function(){return this._mapStyle}},mapLayer:{get:function(){return this._mapLayer}},culture:{get:function(){return this._culture}},tileWidth:{get:function(){return this._tileWidth}},tileHeight:{get:function(){return this._tileHeight}},maximumLevel:{get:function(){return this._maximumLevel}},minimumLevel:{get:function(){return 0}},tilingScheme:{get:function(){return this._tilingScheme}},rectangle:{get:function(){return this._tilingScheme.rectangle}},tileDiscardPolicy:{get:function(){return this._tileDiscardPolicy}},errorEvent:{get:function(){return this._errorEvent}},credit:{get:function(){return this._credit}},hasAlphaChannel:{get:function(){return c(this.mapLayer)}}});So.fromUrl=async function(e,t){t=t??k.EMPTY_OBJECT;let n=t.tileProtocol;c(n)?n.length>0&&n[n.length-1]===":"&&(n=n.substr(0,n.length-1)):n=document.location.protocol==="http:"?"http":"https";let i=t.mapStyle??rD.AERIAL,o=ke.createIfNeeded(e);o.appendForwardSlash();let r={incl:"ImageryProviders",key:t.key,uriScheme:n};c(t.mapLayer)&&(r.mapLayer=t.mapLayer),c(t.culture)&&(r.culture=t.culture);let a=o.getDerivedResource({url:`REST/v1/Imagery/Metadata/${i}`,queryParameters:r}),s=new So(t);s._resource=o;let A=new oH(t);return await Kge(a,A),A.build(s),s};var Xge=new ce;So.prototype.getTileCredits=function(e,t,n){let i=this._tilingScheme.tileXYToRectangle(e,t,n,Xge);return eCe(this._attributionList,n,i)};So.prototype.requestImage=function(e,t,n,i){let o=Ks.loadImage(this,Zge(this,e,t,n,i));if(c(o))return o.catch(function(r){return c(r.blob)&&r.blob.size===0?aD.EMPTY_IMAGE:Promise.reject(r)})};So.prototype.pickFeatures=function(e,t,n,i,o){};So.tileXYToQuadKey=function(e,t,n){let i="";for(let o=n;o>=0;--o){let r=1<<o,a=0;(e&r)!==0&&(a|=1),(t&r)!==0&&(a|=2),i+=a}return i};So.quadKeyToTileXY=function(e){let t=0,n=0,i=e.length-1;for(let o=i;o>=0;--o){let r=1<<o,a=+e[i-o];(a&1)!==0&&(t|=r),(a&2)!==0&&(n|=r)}return{x:t,y:n,level:i}};So._logoUrl=void 0;Object.defineProperties(So,{logoUrl:{get:function(){return c(So._logoUrl)||(So._logoUrl=ho("Assets/Images/bing_maps_credit.png")),So._logoUrl},set:function(e){So._logoUrl=e}}});function Zge(e,t,n,i,o){let r=e._imageUrlTemplate,a=e._imageUrlSubdomains,s=(t+n+i)%a.length;return e._resource.getDerivedResource({url:r,request:o,templateValues:{quadkey:So.tileXYToQuadKey(t,n,i),subdomain:a[s],culture:e._culture},queryParameters:{n:"z"}})}var $ge=new ce;function eCe(e,t,n){++t;let i=[];for(let o=0,r=e.length;o<r;++o){let a=e[o],s=a.coverageAreas,A=!1;for(let l=0,f=a.coverageAreas.length;!A&&l<f;++l){let h=s[l];if(t>=h.zoomMin&&t<=h.zoomMax){let m=ce.intersection(n,h.bbox,$ge);c(m)&&(A=!0)}}A&&i.push(a.credit)}return i}So._metadataCache={};var rH=So;var aH=/{[^}]+}/g,sH={x:oCe,y:aCe,z:ACe,s:lCe,reverseX:rCe,reverseY:sCe,reverseZ:cCe,westDegrees:fCe,southDegrees:uCe,eastDegrees:dCe,northDegrees:hCe,westProjected:mCe,southProjected:pCe,eastProjected:gCe,northProjected:CCe,width:_Ce,height:ECe},tCe=Et(sH,{i:ICe,j:yCe,reverseI:bCe,reverseJ:BCe,longitudeDegrees:TCe,latitudeDegrees:SCe,longitudeProjected:wCe,latitudeProjected:DCe,format:RCe});function b_(e){e=e??k.EMPTY_OBJECT,this._errorEvent=new fe;let t=ke.createIfNeeded(e.url),n=ke.createIfNeeded(e.pickFeaturesUrl);this._resource=t,this._urlSchemeZeroPadding=e.urlSchemeZeroPadding,this._getFeatureInfoFormats=e.getFeatureInfoFormats,this._pickFeaturesResource=n;let i=e.subdomains;Array.isArray(i)?i=i.slice():c(i)&&i.length>0?i=i.split(""):i=["a","b","c"],this._subdomains=i,this._tileWidth=e.tileWidth??256,this._tileHeight=e.tileHeight??256,this._minimumLevel=e.minimumLevel??0,this._maximumLevel=e.maximumLevel,this._tilingScheme=e.tilingScheme??new rs({ellipsoid:e.ellipsoid}),this._rectangle=e.rectangle??this._tilingScheme.rectangle,this._rectangle=ce.intersection(this._rectangle,this._tilingScheme.rectangle),this._tileDiscardPolicy=e.tileDiscardPolicy;let o=e.credit;typeof o=="string"&&(o=new fn(o)),this._credit=o,this._hasAlphaChannel=e.hasAlphaChannel??!0;let r=e.customTags,a=Et(sH,r),s=Et(tCe,r);this._tags=a,this._pickFeaturesTags=s,this._defaultAlpha=void 0,this._defaultNightAlpha=void 0,this._defaultDayAlpha=void 0,this._defaultBrightness=void 0,this._defaultContrast=void 0,this._defaultHue=void 0,this._defaultSaturation=void 0,this._defaultGamma=void 0,this._defaultMinificationFilter=void 0,this._defaultMagnificationFilter=void 0,this.enablePickFeatures=e.enablePickFeatures??!0}Object.defineProperties(b_.prototype,{url:{get:function(){return this._resource.url}},urlSchemeZeroPadding:{get:function(){return this._urlSchemeZeroPadding}},pickFeaturesUrl:{get:function(){return this._pickFeaturesResource.url}},proxy:{get:function(){return this._resource.proxy}},tileWidth:{get:function(){return this._tileWidth}},tileHeight:{get:function(){return this._tileHeight}},maximumLevel:{get:function(){return this._maximumLevel}},minimumLevel:{get:function(){return this._minimumLevel}},tilingScheme:{get:function(){return this._tilingScheme}},rectangle:{get:function(){return this._rectangle}},tileDiscardPolicy:{get:function(){return this._tileDiscardPolicy}},errorEvent:{get:function(){return this._errorEvent}},credit:{get:function(){return this._credit}},hasAlphaChannel:{get:function(){return this._hasAlphaChannel}}});b_.prototype.getTileCredits=function(e,t,n){};b_.prototype.requestImage=function(e,t,n,i){return Ks.loadImage(this,nCe(this,e,t,n,i))};b_.prototype.pickFeatures=function(e,t,n,i,o){if(!this.enablePickFeatures||!c(this._pickFeaturesResource)||this._getFeatureInfoFormats.length===0)return;let r=0,a=this;function s(l,f){return l.callback(f)}function A(){if(r>=a._getFeatureInfoFormats.length)return Promise.resolve([]);let l=a._getFeatureInfoFormats[r],f=iCe(a,e,t,n,i,o,l.format);return++r,l.type==="json"?f.fetchJson().then(l.callback).catch(A):l.type==="xml"?f.fetchXML().then(l.callback).catch(A):l.type==="text"||l.type==="html"?f.fetchText().then(l.callback).catch(A):f.fetch({responseType:l.format}).then(s.bind(void 0,l)).catch(A)}return A()};var n0=!1,ss=new ce,i0=!1,B_=new ce;function nCe(e,t,n,i,o){n0=!1,i0=!1;let r=e._resource,a=r.getUrlComponent(!0),s=e._tags,A={},l=a.match(aH);return c(l)&&l.forEach(function(f){let h=f.substring(1,f.length-1);c(s[h])&&(A[h]=s[h](e,t,n,i))}),r.getDerivedResource({request:o,templateValues:A})}var sD=!1,ap=new U,cD=!1;function iCe(e,t,n,i,o,r,a){n0=!1,i0=!1,sD=!1,cD=!1;let s=e._pickFeaturesResource,A=s.getUrlComponent(!0),l=e._pickFeaturesTags,f={},h=A.match(aH);return c(h)&&h.forEach(function(m){let p=m.substring(1,m.length-1);c(l[p])&&(f[p]=l[p](e,t,n,i,o,r,a))}),s.getDerivedResource({templateValues:f})}function sp(e,t,n){if(e&&e.urlSchemeZeroPadding&&e.urlSchemeZeroPadding.hasOwnProperty(t)){let i=e.urlSchemeZeroPadding[t];if(typeof i=="string"){let o=i.length;o>1&&(n=n.length>=o?n:new Array(o-n.toString().length+1).join("0")+n)}}return n}function oCe(e,t,n,i){return sp(e,"{x}",t)}function rCe(e,t,n,i){let o=e.tilingScheme.getNumberOfXTilesAtLevel(i)-t-1;return sp(e,"{reverseX}",o)}function aCe(e,t,n,i){return sp(e,"{y}",n)}function sCe(e,t,n,i){let o=e.tilingScheme.getNumberOfYTilesAtLevel(i)-n-1;return sp(e,"{reverseY}",o)}function cCe(e,t,n,i){let o=e.maximumLevel,r=c(o)&&i<o?o-i-1:i;return sp(e,"{reverseZ}",r)}function ACe(e,t,n,i){return sp(e,"{z}",i)}function lCe(e,t,n,i){let o=(t+n+i)%e._subdomains.length;return e._subdomains[o]}function o0(e,t,n,i){n0||(e.tilingScheme.tileXYToRectangle(t,n,i,ss),ss.west=w.toDegrees(ss.west),ss.south=w.toDegrees(ss.south),ss.east=w.toDegrees(ss.east),ss.north=w.toDegrees(ss.north),n0=!0)}function fCe(e,t,n,i){return o0(e,t,n,i),ss.west}function uCe(e,t,n,i){return o0(e,t,n,i),ss.south}function dCe(e,t,n,i){return o0(e,t,n,i),ss.east}function hCe(e,t,n,i){return o0(e,t,n,i),ss.north}function r0(e,t,n,i){i0||(e.tilingScheme.tileXYToNativeRectangle(t,n,i,B_),i0=!0)}function mCe(e,t,n,i){return r0(e,t,n,i),B_.west}function pCe(e,t,n,i){return r0(e,t,n,i),B_.south}function gCe(e,t,n,i){return r0(e,t,n,i),B_.east}function CCe(e,t,n,i){return r0(e,t,n,i),B_.north}function _Ce(e,t,n,i){return e.tileWidth}function ECe(e,t,n,i){return e.tileHeight}function ICe(e,t,n,i,o,r,a){return a0(e,t,n,i,o,r),ap.x}function yCe(e,t,n,i,o,r,a){return a0(e,t,n,i,o,r),ap.y}function bCe(e,t,n,i,o,r,a){return a0(e,t,n,i,o,r),e.tileWidth-ap.x-1}function BCe(e,t,n,i,o,r,a){return a0(e,t,n,i,o,r),e.tileHeight-ap.y-1}var xCe=new ce,rp=new u;function a0(e,t,n,i,o,r,a){if(sD)return;AD(e,t,n,i,o,r);let s=rp,A=e.tilingScheme.tileXYToNativeRectangle(t,n,i,xCe);ap.x=e.tileWidth*(s.x-A.west)/A.width|0,ap.y=e.tileHeight*(A.north-s.y)/A.height|0,sD=!0}function TCe(e,t,n,i,o,r,a){return w.toDegrees(o)}function SCe(e,t,n,i,o,r,a){return w.toDegrees(r)}function wCe(e,t,n,i,o,r,a){return AD(e,t,n,i,o,r),rp.x}function DCe(e,t,n,i,o,r,a){return AD(e,t,n,i,o,r),rp.y}var QCe=new ae;function AD(e,t,n,i,o,r,a){if(!cD){if(e.tilingScheme.projection instanceof Ai)rp.x=w.toDegrees(o),rp.y=w.toDegrees(r);else{let s=QCe;s.longitude=o,s.latitude=r,e.tilingScheme.projection.project(s,rp)}cD=!0}}function RCe(e,t,n,i,o,r,a){return a}var Gl=b_;function Xs(e){Gl.call(this,e)}Xs._requestMetadata=async function(e,t,n,i){try{let o=await n.fetchXML();return Xs._metadataSuccess(o,e,t,n,i)}catch(o){if(o instanceof dd)return Xs._metadataFailure(e,t);throw o}};Xs.fromUrl=async function(e,t){let n=ke.createIfNeeded(e);n.appendForwardSlash();let i=n,o=n.getDerivedResource({url:"tilemapresource.xml"});t=t??k.EMPTY_OBJECT;let r=await Xs._requestMetadata(t,i,o);return new Xs(r)};c(Object.create)&&(Xs.prototype=Object.create(Gl.prototype),Xs.prototype.constructor=Xs);function cH(e,t){return e.west<t.rectangle.west&&(e.west=t.rectangle.west),e.east>t.rectangle.east&&(e.east=t.rectangle.east),e.south<t.rectangle.south&&(e.south=t.rectangle.south),e.north>t.rectangle.north&&(e.north=t.rectangle.north),e}function AH(e,t,n){let i=e.positionToTileXY(ce.southwest(t),n),o=e.positionToTileXY(ce.northeast(t),n);return(Math.abs(o.x-i.x)+1)*(Math.abs(o.y-i.y)+1)>4?0:n}Xs._metadataSuccess=function(e,t,n,i,o){let r=/tileformat/i,a=/tileset/i,s=/tilesets/i,A=/boundingbox/i,l,f,h,m=[],p=e.childNodes[0].childNodes;for(let D=0;D<p.length;D++)if(r.test(p.item(D).nodeName))l=p.item(D);else if(s.test(p.item(D).nodeName)){h=p.item(D);let Q=p.item(D).childNodes;for(let v=0;v<Q.length;v++)a.test(Q.item(v).nodeName)&&m.push(Q.item(v))}else A.test(p.item(D).nodeName)&&(f=p.item(D));let g;if(!c(h)||!c(f))throw g=`Unable to find expected tilesets or bbox attributes in ${i.url}.`,c(o)&&as.reportError(void 0,o,o.errorEvent,g),new oe(g);let C=t.fileExtension??l.getAttribute("extension"),_=t.tileWidth??parseInt(l.getAttribute("width"),10),E=t.tileHeight??parseInt(l.getAttribute("height"),10),I=t.minimumLevel??parseInt(m[0].getAttribute("order"),10),y=t.maximumLevel??parseInt(m[m.length-1].getAttribute("order"),10),b=h.getAttribute("profile"),x=t.tilingScheme;if(!c(x))if(b==="geodetic"||b==="global-geodetic")x=new ba({ellipsoid:t.ellipsoid});else if(b==="mercator"||b==="global-mercator")x=new rs({ellipsoid:t.ellipsoid});else throw g=`${i.url} specifies an unsupported profile attribute, ${b}.`,c(o)&&as.reportError(void 0,o,o.errorEvent,g),new oe(g);let S=ce.clone(t.rectangle);if(!c(S)){let D,Q,v,d;t.flipXY??!1?(v=new U(parseFloat(f.getAttribute("miny")),parseFloat(f.getAttribute("minx"))),d=new U(parseFloat(f.getAttribute("maxy")),parseFloat(f.getAttribute("maxx")))):(v=new U(parseFloat(f.getAttribute("minx")),parseFloat(f.getAttribute("miny"))),d=new U(parseFloat(f.getAttribute("maxx")),parseFloat(f.getAttribute("maxy"))));let T=b==="geodetic"||b==="mercator";if(x.projection instanceof Ai||T)D=ae.fromDegrees(v.x,v.y),Q=ae.fromDegrees(d.x,d.y);else{let R=x.projection;D=R.unproject(v),Q=R.unproject(d)}S=new ce(D.longitude,D.latitude,Q.longitude,Q.latitude)}return S=cH(S,x),I=AH(x,S,I),{url:n.getDerivedResource({url:`{z}/{x}/{reverseY}.${C}`}),tilingScheme:x,rectangle:S,tileWidth:_,tileHeight:E,minimumLevel:I,maximumLevel:y,tileDiscardPolicy:t.tileDiscardPolicy,credit:t.credit}};Xs._metadataFailure=function(e,t){let n=e.fileExtension??"png",i=e.tileWidth??256,o=e.tileHeight??256,r=e.maximumLevel,a=c(e.tilingScheme)?e.tilingScheme:new rs({ellipsoid:e.ellipsoid}),s=e.rectangle??a.rectangle;s=cH(s,a);let A=AH(a,s,e.minimumLevel);return{url:t.getDerivedResource({url:`{z}/{x}/{reverseY}.${n}`}),tilingScheme:a,rectangle:s,tileWidth:i,tileHeight:o,minimumLevel:A,maximumLevel:r,tileDiscardPolicy:e.tileDiscardPolicy,credit:e.credit}};var lD=Xs;function lH(e){this.channel=e.channel,this.ellipsoid=e.ellipsoid,this.tilingScheme=void 0,this.version=void 0}lH.prototype.build=function(e){e._channel=this.channel,e._version=this.version,e._tilingScheme=this.tilingScheme};function vCe(e,t){let n;try{n=JSON.parse(e)}catch{n=JSON.parse(e.replace(/([\[\{,])[\n\r ]*([A-Za-z0-9]+)[\n\r ]*:/g,'$1"$2":'))}let i;for(let o=0;o<n.layers.length;o++)if(n.layers[o].id===t.channel){i=n.layers[o];break}if(!c(i)){let o=`Could not find layer with channel (id) of ${t.channel}.`;throw new oe(o)}if(!c(i.version)){let o=`Could not find a version in channel (id) ${t.channel}.`;throw new oe(o)}if(t.version=i.version,c(n.projection)&&n.projection==="flat")t.tilingScheme=new ba({numberOfLevelZeroTilesX:2,numberOfLevelZeroTilesY:2,rectangle:new ce(-Math.PI,-Math.PI,Math.PI,Math.PI),ellipsoid:t.ellipsoid});else if(!c(n.projection)||n.projection==="mercator")t.tilingScheme=new rs({numberOfLevelZeroTilesX:2,numberOfLevelZeroTilesY:2,ellipsoid:t.ellipsoid});else{let o=`Unsupported projection ${n.projection}.`;throw new oe(o)}return!0}function PCe(e,t,n){let i=`An error occurred while accessing ${t.url}.`;throw c(e)&&c(e.message)&&(i+=`: ${e.message}`),as.reportError(void 0,n,c(n)?n._errorEvent:void 0,i),new oe(i)}async function MCe(e,t,n){try{let i=await e.fetchText();vCe(i,t)}catch(i){PCe(i,e,n)}}function Qa(e){e=e??{},this._defaultAlpha=void 0,this._defaultNightAlpha=void 0,this._defaultDayAlpha=void 0,this._defaultBrightness=void 0,this._defaultContrast=void 0,this._defaultHue=void 0,this._defaultSaturation=void 0,this._defaultGamma=1.9,this._defaultMinificationFilter=void 0,this._defaultMagnificationFilter=void 0,this._tileDiscardPolicy=e.tileDiscardPolicy,this._channel=e.channel,this._requestType="ImageryMaps",this._credit=new fn(`<a href="http://www.google.com/enterprise/mapsearth/products/earthenterprise.html"><img src="${Qa.logoUrl}" title="Google Imagery"/></a>`),this._tilingScheme=void 0,this._version=void 0,this._tileWidth=256,this._tileHeight=256,this._maximumLevel=e.maximumLevel,this._errorEvent=new fe}Object.defineProperties(Qa.prototype,{url:{get:function(){return this._url}},path:{get:function(){return this._path}},proxy:{get:function(){return this._resource.proxy}},channel:{get:function(){return this._channel}},tileWidth:{get:function(){return this._tileWidth}},tileHeight:{get:function(){return this._tileHeight}},maximumLevel:{get:function(){return this._maximumLevel}},minimumLevel:{get:function(){return 0}},tilingScheme:{get:function(){return this._tilingScheme}},version:{get:function(){return this._version}},requestType:{get:function(){return this._requestType}},rectangle:{get:function(){return this._tilingScheme.rectangle}},tileDiscardPolicy:{get:function(){return this._tileDiscardPolicy}},errorEvent:{get:function(){return this._errorEvent}},credit:{get:function(){return this._credit}},hasAlphaChannel:{get:function(){return!0}}});Qa.fromUrl=async function(e,t,n){n=n??{};let i=n.path??"/default_map",o=ke.createIfNeeded(e).getDerivedResource({url:i[0]==="/"?i.substring(1):i});o.appendForwardSlash();let r=o.getDerivedResource({url:"query",queryParameters:{request:"Json",vars:"geeServerDefs",is2d:"t"}}),a=new lH(n);a.channel=t,await MCe(r,a);let s=new Qa(n);return a.build(s),s._resource=o,s._url=e,s._path=i,s};Qa.prototype.getTileCredits=function(e,t,n){};Qa.prototype.requestImage=function(e,t,n,i){let o=this._resource.getDerivedResource({url:"query",request:i,queryParameters:{request:this._requestType,channel:this._channel,version:this._version,x:e,y:t,z:n+1}});return Ks.loadImage(this,o)};Qa.prototype.pickFeatures=function(e,t,n,i,o){};Qa._logoUrl=void 0;Object.defineProperties(Qa,{logoUrl:{get:function(){return c(Qa._logoUrl)||(Qa._logoUrl=ho("Assets/Images/google_earth_credit.png")),Qa._logoUrl},set:function(e){Qa._logoUrl=e}}});var fH=Qa;var OCe=/\/$/,uH=new fn('&copy; <a href="https://www.mapbox.com/about/maps/">Mapbox</a> &copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> <strong><a href="https://www.mapbox.com/map-feedback/">Improve this map</a></strong>');function cp(e){e=e??k.EMPTY_OBJECT;let t=e.mapId,n=e.accessToken;this._defaultAlpha=void 0,this._defaultNightAlpha=void 0,this._defaultDayAlpha=void 0,this._defaultBrightness=void 0,this._defaultContrast=void 0,this._defaultHue=void 0,this._defaultSaturation=void 0,this._defaultGamma=void 0,this._defaultMinificationFilter=void 0,this._defaultMagnificationFilter=void 0;let i=ke.createIfNeeded(e.url??"https://{s}.tiles.mapbox.com/v4/");this._mapId=t,this._accessToken=n;let o=e.format??"png";/\./.test(o)||(o=`.${o}`),this._format=o;let r=i.getUrlComponent();OCe.test(r)||(r+="/"),r+=`${t}/{z}/{x}/{y}${this._format}`,i.url=r,i.setQueryParameters({access_token:n});let a;c(e.credit)?(a=e.credit,typeof a=="string"&&(a=new fn(a))):a=uH,this._resource=i,this._imageryProvider=new Gl({url:i,credit:a,ellipsoid:e.ellipsoid,minimumLevel:e.minimumLevel,maximumLevel:e.maximumLevel,rectangle:e.rectangle})}Object.defineProperties(cp.prototype,{url:{get:function(){return this._imageryProvider.url}},rectangle:{get:function(){return this._imageryProvider.rectangle}},tileWidth:{get:function(){return this._imageryProvider.tileWidth}},tileHeight:{get:function(){return this._imageryProvider.tileHeight}},maximumLevel:{get:function(){return this._imageryProvider.maximumLevel}},minimumLevel:{get:function(){return this._imageryProvider.minimumLevel}},tilingScheme:{get:function(){return this._imageryProvider.tilingScheme}},tileDiscardPolicy:{get:function(){return this._imageryProvider.tileDiscardPolicy}},errorEvent:{get:function(){return this._imageryProvider.errorEvent}},credit:{get:function(){return this._imageryProvider.credit}},proxy:{get:function(){return this._imageryProvider.proxy}},hasAlphaChannel:{get:function(){return this._imageryProvider.hasAlphaChannel}}});cp.prototype.getTileCredits=function(e,t,n){};cp.prototype.requestImage=function(e,t,n,i){return this._imageryProvider.requestImage(e,t,n,i)};cp.prototype.pickFeatures=function(e,t,n,i,o){return this._imageryProvider.pickFeatures(e,t,n,i,o)};cp._defaultCredit=uH;var dH=cp;function nh(e){e=e??k.EMPTY_OBJECT,this._defaultAlpha=void 0,this._defaultNightAlpha=void 0,this._defaultDayAlpha=void 0,this._defaultBrightness=void 0,this._defaultContrast=void 0,this._defaultHue=void 0,this._defaultSaturation=void 0,this._defaultGamma=void 0,this._defaultMinificationFilter=void 0,this._defaultMagnificationFilter=void 0;let t=e.rectangle??ce.MAX_VALUE,n=new ba({rectangle:t,numberOfLevelZeroTilesX:1,numberOfLevelZeroTilesY:1,ellipsoid:e.ellipsoid});this._tilingScheme=n,this._image=void 0,this._texture=void 0,this._hasError=!1,this._errorEvent=new fe;let i=e.credit;typeof i=="string"&&(i=new fn(i)),this._credit=i;let o=ke.createIfNeeded(e.url);this._resource=o,this._tileWidth=e.tileWidth,this._tileHeight=e.tileHeight}Object.defineProperties(nh.prototype,{url:{get:function(){return this._resource.url}},proxy:{get:function(){return this._resource.proxy}},tileWidth:{get:function(){return this._tileWidth}},tileHeight:{get:function(){return this._tileHeight}},maximumLevel:{get:function(){return 0}},minimumLevel:{get:function(){return 0}},tilingScheme:{get:function(){return this._tilingScheme}},rectangle:{get:function(){return this._tilingScheme.rectangle}},tileDiscardPolicy:{get:function(){}},errorEvent:{get:function(){return this._errorEvent}},credit:{get:function(){return this._credit}},hasAlphaChannel:{get:function(){return!0}}});function LCe(e,t,n,i){let o=`Failed to load image ${e.url}`;c(t)&&c(t.message)&&(o+=`: ${t.message}`);let r=as.reportError(i,n,c(n)?n._errorEvent:void 0,o,0,0,0,t);if(r.retry)return fD(e,n,r);throw c(n)&&(n._hasError=!0),new oe(o)}async function fD(e,t,n){try{return await Ks.loadImage(null,e)}catch(i){return LCe(e,i,t,n)}}nh.fromUrl=async function(e,t){let n=ke.createIfNeeded(e),i=await fD(n);t=t??k.EMPTY_OBJECT;let o=new nh({...t,url:e,tileWidth:i.width,tileHeight:i.height});return o._image=i,o};nh.prototype.getTileCredits=function(e,t,n){};nh.prototype.requestImage=async function(e,t,n,i){if(!this._hasError&&!c(this._image)){let o=await fD(this._resource,this);return this._image=o,as.reportSuccess(this._errorEvent),o}return this._image};nh.prototype.pickFeatures=function(e,t,n,i,o){};var hH=nh;function NCe(e,t,n){this.type=e,c(t)||(e==="json"?t="application/json":e==="xml"?t="text/xml":e==="html"?t="text/html":e==="text"&&(t="text/plain")),this.format=t,c(n)||(e==="json"?n=FCe:e==="xml"?n=zCe:(e==="html"||e==="text")&&(n=mH)),this.callback=n}function FCe(e){let t=[],n=e.features;for(let i=0;i<n.length;++i){let o=n[i],r=new Su;if(r.data=o,r.properties=o.properties,r.configureNameFromProperties(o.properties),r.configureDescriptionFromProperties(o.properties),c(o.geometry)&&o.geometry.type==="Point"){let a=o.geometry.coordinates[0],s=o.geometry.coordinates[1];r.position=ae.fromDegrees(a,s)}t.push(r)}return t}var uD="http://www.mapinfo.com/mxp",kCe="http://www.esri.com/wms",UCe="http://www.opengis.net/wfs",GCe="http://www.opengis.net/gml";function zCe(e){let t=e.documentElement;if(t.localName==="MultiFeatureCollection"&&t.namespaceURI===uD)return HCe(e);if(t.localName==="FeatureInfoResponse"&&t.namespaceURI===kCe)return VCe(e);if(t.localName==="FeatureCollection"&&t.namespaceURI===UCe)return jCe(e);if(t.localName==="ServiceExceptionReport")throw new oe(new XMLSerializer().serializeToString(t));return t.localName==="msGMLOutput"?YCe(e):qCe(e)}function HCe(e){let t=[],i=e.documentElement.getElementsByTagNameNS(uD,"Feature");for(let o=0;o<i.length;++o){let r=i[o],a={},s=r.getElementsByTagNameNS(uD,"Val");for(let l=0;l<s.length;++l){let f=s[l];if(f.hasAttribute("ref")){let h=f.getAttribute("ref"),m=f.textContent.trim();a[h]=m}}let A=new Su;A.data=r,A.properties=a,A.configureNameFromProperties(a),A.configureDescriptionFromProperties(a),t.push(A)}return t}function VCe(e){let t=e.documentElement,n=[],i,o=t.getElementsByTagNameNS("*","FIELDS");if(o.length>0)for(let r=0;r<o.length;++r){let a=o[r];i={};let s=a.attributes;for(let A=0;A<s.length;++A){let l=s[A];i[l.name]=l.value}n.push(s0(a,i))}else{let r=t.getElementsByTagNameNS("*","FeatureInfo");for(let a=0;a<r.length;++a){let s=r[a];i={};let A=s.childNodes;for(let l=0;l<A.length;++l){let f=A[l];f.nodeType===Node.ELEMENT_NODE&&(i[f.localName]=f.textContent)}n.push(s0(s,i))}}return n}function jCe(e){let t=[],i=e.documentElement.getElementsByTagNameNS(GCe,"featureMember");for(let o=0;o<i.length;++o){let r=i[o],a={};dD(r,a),t.push(s0(r,a))}return t}function YCe(e){let t=[],n,i=e.documentElement.childNodes;for(let r=0;r<i.length;r++)if(i[r].nodeType===Node.ELEMENT_NODE){n=i[r];break}if(!c(n))throw new oe("Unable to find first child of the feature info xml document");let o=n.childNodes;for(let r=0;r<o.length;++r){let a=o[r];if(a.nodeType===Node.ELEMENT_NODE){let s={};dD(a,s),t.push(s0(a,s))}}return t}function dD(e,t){let n=!0;for(let i=0;i<e.childNodes.length;++i){let o=e.childNodes[i];o.nodeType===Node.ELEMENT_NODE&&(n=!1),!(o.localName==="Point"||o.localName==="LineString"||o.localName==="Polygon"||o.localName==="boundedBy")&&o.hasChildNodes()&&dD(o,t)&&(t[o.localName]=o.textContent)}return n}function s0(e,t){let n=new Su;return n.data=e,n.properties=t,n.configureNameFromProperties(t),n.configureDescriptionFromProperties(t),n}function qCe(e){let t=new XMLSerializer().serializeToString(e),n=document.createElement("div"),i=document.createElement("pre");i.textContent=t,n.appendChild(i);let o=new Su;return o.data=e,o.description=n.innerHTML,[o]}var WCe=/<body>\s*<\/body>/im,JCe=/<ServiceExceptionReport([\s\S]*)<\/ServiceExceptionReport>/im,KCe=/<title>([\s\S]*)<\/title>/im;function mH(e){if(WCe.test(e)||JCe.test(e))return;let t,n=KCe.exec(e);n&&n.length>1&&(t=n[1]);let i=new Su;return i.name=t,i.description=e,i.data=e,[i]}var c0=NCe;function x_(e){e=e??k.EMPTY_OBJECT,this._tileCache={},this._tilesRequestedForInterval=[];let t=this._clock=e.clock;this._times=e.times,this._requestImageFunction=e.requestImageFunction,this._reloadFunction=e.reloadFunction,this._currentIntervalIndex=-1,t.onTick.addEventListener(this._clockOnTick,this),this._clockOnTick(t)}Object.defineProperties(x_.prototype,{clock:{get:function(){return this._clock},set:function(e){this._clock!==e&&(this._clock=e,this._clockOnTick(e),this._reloadFunction())}},times:{get:function(){return this._times},set:function(e){this._times!==e&&(this._times=e,this._clockOnTick(this._clock),this._reloadFunction())}},currentInterval:{get:function(){return this._times.get(this._currentIntervalIndex)}}});x_.prototype.getFromCache=function(e,t,n,i){let o=pH(e,t,n),r,a=this._tileCache[this._currentIntervalIndex];if(c(a)&&c(a[o])){let s=a[o];r=s.promise.catch(function(A){throw i.state=s.request.state,A}),delete a[o]}return r};x_.prototype.checkApproachingInterval=function(e,t,n,i){let o=pH(e,t,n),r=this._tilesRequestedForInterval,a=gH(this),s={key:o,priorityFunction:i.priorityFunction};(!c(a)||!CH(this,s,a))&&r.push(s),r.length>=512&&r.splice(0,256)};x_.prototype._clockOnTick=function(e){let t=e.currentTime,i=this._times.indexOf(t),o=this._currentIntervalIndex;if(i!==o){let a=this._tileCache[o];for(let s in a)a.hasOwnProperty(s)&&a[s].request.cancel();delete this._tileCache[o],this._tilesRequestedForInterval=[],this._currentIntervalIndex=i,this._reloadFunction();return}let r=gH(this);if(c(r)){let a=this._tilesRequestedForInterval,s=!0;for(;s&&a.length!==0;){let A=a.pop();s=CH(this,A,r),s||a.push(A)}}};function pH(e,t,n){return`${e}-${t}-${n}`}function XCe(e){let t=e.split("-");if(t.length===3)return{x:Number(t[0]),y:Number(t[1]),level:Number(t[2])}}function gH(e){let t=e._times;if(!c(t))return;let n=e._clock,i=n.currentTime,o=n.canAnimate&&n.shouldAnimate,r=n.multiplier;if(!o&&r!==0)return;let a,s=t.indexOf(i);if(s<0)return;let A=t.get(s);return r>0?(a=X.secondsDifference(A.stop,i),++s):(a=X.secondsDifference(A.start,i),--s),a/=r,s>=0&&a<=5?t.get(s):void 0}function CH(e,t,n){let i=e._times.indexOf(n.start),o=e._tileCache,r=o[i];c(r)||(r=o[i]={});let a=t.key;if(c(r[a]))return!0;let s=XCe(a),A=new cA({throttle:!1,throttleByServer:!0,type:sA.IMAGERY,priorityFunction:t.priorityFunction}),l=e._requestImageFunction(s.x,s.y,s.level,A,n);return c(l)?(r[a]={promise:l,request:A},!0):!1}var A0=x_;var ZCe=[3034,3035,3042,3043,3044],$Ce=[4471,4559];function Pc(e){if(e=e??k.EMPTY_OBJECT,c(e.times)&&!c(e.clock))throw new Ee("options.times was specified, so options.clock is required.");this._defaultAlpha=void 0,this._defaultNightAlpha=void 0,this._defaultDayAlpha=void 0,this._defaultBrightness=void 0,this._defaultContrast=void 0,this._defaultHue=void 0,this._defaultSaturation=void 0,this._defaultGamma=void 0,this._defaultMinificationFilter=void 0,this._defaultMagnificationFilter=void 0,this._getFeatureInfoUrl=e.getFeatureInfoUrl??e.url;let t=ke.createIfNeeded(e.url),n=ke.createIfNeeded(this._getFeatureInfoUrl);t.setQueryParameters(Pc.DefaultParameters,!0),n.setQueryParameters(Pc.GetFeatureInfoDefaultParameters,!0),c(e.parameters)&&t.setQueryParameters(_H(e.parameters)),c(e.getFeatureInfoParameters)&&n.setQueryParameters(_H(e.getFeatureInfoParameters));let i=this;this._reload=void 0,c(e.times)&&(this._timeDynamicImagery=new A0({clock:e.clock,times:e.times,requestImageFunction:function(a,s,A,l,f){return EH(i,a,s,A,l,f)},reloadFunction:function(){c(i._reload)&&i._reload()}}));let o={};if(o.layers=e.layers,o.bbox="{westProjected},{southProjected},{eastProjected},{northProjected}",o.width="{width}",o.height="{height}",parseFloat(t.queryParameters.version)>=1.3){o.crs=e.crs??(e.tilingScheme&&e.tilingScheme.projection instanceof Ar?"EPSG:3857":"CRS:84");let a=o.crs.split(":");if(a[0]==="EPSG"&&a.length===2){let s=Number(a[1]);(s>=4e3&&s<5e3&&!$Ce.includes(s)||ZCe.includes(s))&&(o.bbox="{southProjected},{westProjected},{northProjected},{eastProjected}")}}else o.srs=e.srs??(e.tilingScheme&&e.tilingScheme.projection instanceof Ar?"EPSG:3857":"EPSG:4326");t.setQueryParameters(o,!0),n.setQueryParameters(o,!0);let r={query_layers:e.layers,info_format:"{format}"};parseFloat(n.queryParameters.version)>=1.3?(r.i="{i}",r.j="{j}"):(r.x="{i}",r.y="{j}"),n.setQueryParameters(r,!0),this._resource=t,this._pickFeaturesResource=n,this._layers=e.layers,this._tileProvider=new Gl({url:t,pickFeaturesUrl:n,tilingScheme:e.tilingScheme??new ba({ellipsoid:e.ellipsoid}),rectangle:e.rectangle,tileWidth:e.tileWidth,tileHeight:e.tileHeight,minimumLevel:e.minimumLevel,maximumLevel:e.maximumLevel,subdomains:e.subdomains,tileDiscardPolicy:e.tileDiscardPolicy,credit:e.credit,getFeatureInfoFormats:e.getFeatureInfoFormats??Pc.DefaultGetFeatureInfoFormats,enablePickFeatures:e.enablePickFeatures})}function EH(e,t,n,i,o,r){let a=c(r)?r.data:void 0,s=e._tileProvider;return c(a)&&s._resource.setQueryParameters(a),s.requestImage(t,n,i,o)}function e_e(e,t,n,i,o,r,a){let s=c(a)?a.data:void 0,A=e._tileProvider;return c(s)&&A._pickFeaturesResource.setQueryParameters(s),A.pickFeatures(t,n,i,o,r)}Object.defineProperties(Pc.prototype,{url:{get:function(){return this._resource._url}},proxy:{get:function(){return this._resource.proxy}},layers:{get:function(){return this._layers}},tileWidth:{get:function(){return this._tileProvider.tileWidth}},tileHeight:{get:function(){return this._tileProvider.tileHeight}},maximumLevel:{get:function(){return this._tileProvider.maximumLevel}},minimumLevel:{get:function(){return this._tileProvider.minimumLevel}},tilingScheme:{get:function(){return this._tileProvider.tilingScheme}},rectangle:{get:function(){return this._tileProvider.rectangle}},tileDiscardPolicy:{get:function(){return this._tileProvider.tileDiscardPolicy}},errorEvent:{get:function(){return this._tileProvider.errorEvent}},credit:{get:function(){return this._tileProvider.credit}},hasAlphaChannel:{get:function(){return this._tileProvider.hasAlphaChannel}},enablePickFeatures:{get:function(){return this._tileProvider.enablePickFeatures},set:function(e){this._tileProvider.enablePickFeatures=e}},clock:{get:function(){return this._timeDynamicImagery.clock},set:function(e){this._timeDynamicImagery.clock=e}},times:{get:function(){return this._timeDynamicImagery.times},set:function(e){this._timeDynamicImagery.times=e}},getFeatureInfoUrl:{get:function(){return this._getFeatureInfoUrl}}});Pc.prototype.getTileCredits=function(e,t,n){return this._tileProvider.getTileCredits(e,t,n)};Pc.prototype.requestImage=function(e,t,n,i){let o,r=this._timeDynamicImagery,a;return c(r)&&(a=r.currentInterval,o=r.getFromCache(e,t,n,i)),c(o)||(o=EH(this,e,t,n,i,a)),c(o)&&c(r)&&r.checkApproachingInterval(e,t,n,i),o};Pc.prototype.pickFeatures=function(e,t,n,i,o){let r=this._timeDynamicImagery,a=c(r)?r.currentInterval:void 0;return e_e(this,e,t,n,i,o,a)};Pc.DefaultParameters=Object.freeze({service:"WMS",version:"1.1.1",request:"GetMap",styles:"",format:"image/jpeg"});Pc.GetFeatureInfoDefaultParameters=Object.freeze({service:"WMS",version:"1.1.1",request:"GetFeatureInfo"});Pc.DefaultGetFeatureInfoFormats=Object.freeze([Object.freeze(new c0("json","application/json")),Object.freeze(new c0("xml","text/xml")),Object.freeze(new c0("text","text/html"))]);function _H(e){let t={};for(let n in e)e.hasOwnProperty(n)&&(t[n.toLowerCase()]=e[n]);return t}var IH=Pc;var t_e=Object.freeze({service:"WMTS",version:"1.0.0",request:"GetTile"});function T_(e){e=e??k.EMPTY_OBJECT,this._defaultAlpha=void 0,this._defaultNightAlpha=void 0,this._defaultDayAlpha=void 0,this._defaultBrightness=void 0,this._defaultContrast=void 0,this._defaultHue=void 0,this._defaultSaturation=void 0,this._defaultGamma=void 0,this._defaultMinificationFilter=void 0,this._defaultMagnificationFilter=void 0;let t=ke.createIfNeeded(e.url),n=e.style,i=e.tileMatrixSetID,o=t.url,r=o.match(/{/g);if(!c(r)||r.length===1&&/{s}/.test(o))t.setQueryParameters(t_e),this._useKvp=!0;else{let A={style:n,Style:n,TileMatrixSet:i};t.setTemplateValues(A),this._useKvp=!1}this._resource=t,this._layer=e.layer,this._style=n,this._tileMatrixSetID=i,this._tileMatrixLabels=e.tileMatrixLabels,this._format=e.format??"image/jpeg",this._tileDiscardPolicy=e.tileDiscardPolicy,this._tilingScheme=c(e.tilingScheme)?e.tilingScheme:new rs({ellipsoid:e.ellipsoid}),this._tileWidth=e.tileWidth??256,this._tileHeight=e.tileHeight??256,this._minimumLevel=e.minimumLevel??0,this._maximumLevel=e.maximumLevel,this._rectangle=e.rectangle??this._tilingScheme.rectangle,this._dimensions=e.dimensions;let a=this;this._reload=void 0,c(e.times)&&(this._timeDynamicImagery=new A0({clock:e.clock,times:e.times,requestImageFunction:function(A,l,f,h,m){return yH(a,A,l,f,h,m)},reloadFunction:function(){c(a._reload)&&a._reload()}})),this._errorEvent=new fe;let s=e.credit;this._credit=typeof s=="string"?new fn(s):s,this._subdomains=e.subdomains,Array.isArray(this._subdomains)?this._subdomains=this._subdomains.slice():c(this._subdomains)&&this._subdomains.length>0?this._subdomains=this._subdomains.split(""):this._subdomains=["a","b","c"]}function yH(e,t,n,i,o,r){let a=e._tileMatrixLabels,s=c(a)?a[i]:i.toString(),A=e._subdomains,l=e._dimensions,f=c(r)?r.data:void 0,h,m;if(!e._useKvp)m={TileMatrix:s,TileRow:n.toString(),TileCol:t.toString(),s:A[(t+n+i)%A.length]},h=e._resource.getDerivedResource({request:o}),h.setTemplateValues(m),c(l)&&h.setTemplateValues(l),c(f)&&h.setTemplateValues(f);else{let p={};p.tilematrix=s,p.layer=e._layer,p.style=e._style,p.tilerow=n,p.tilecol=t,p.tilematrixset=e._tileMatrixSetID,p.format=e._format,c(l)&&(p=Et(p,l)),c(f)&&(p=Et(p,f)),m={s:A[(t+n+i)%A.length]},h=e._resource.getDerivedResource({queryParameters:p,request:o}),h.setTemplateValues(m)}return Ks.loadImage(e,h)}Object.defineProperties(T_.prototype,{url:{get:function(){return this._resource.url}},proxy:{get:function(){return this._resource.proxy}},tileWidth:{get:function(){return this._tileWidth}},tileHeight:{get:function(){return this._tileHeight}},maximumLevel:{get:function(){return this._maximumLevel}},minimumLevel:{get:function(){return this._minimumLevel}},tilingScheme:{get:function(){return this._tilingScheme}},rectangle:{get:function(){return this._rectangle}},tileDiscardPolicy:{get:function(){return this._tileDiscardPolicy}},errorEvent:{get:function(){return this._errorEvent}},format:{get:function(){return this._format}},credit:{get:function(){return this._credit}},hasAlphaChannel:{get:function(){return!0}},clock:{get:function(){return this._timeDynamicImagery.clock},set:function(e){this._timeDynamicImagery.clock=e}},times:{get:function(){return this._timeDynamicImagery.times},set:function(e){this._timeDynamicImagery.times=e}},dimensions:{get:function(){return this._dimensions},set:function(e){this._dimensions!==e&&(this._dimensions=e,c(this._reload)&&this._reload())}}});T_.prototype.getTileCredits=function(e,t,n){};T_.prototype.requestImage=function(e,t,n,i){let o,r=this._timeDynamicImagery,a;return c(r)&&(a=r.currentInterval,o=r.getFromCache(e,t,n,i)),c(o)||(o=yH(this,e,t,n,i,a)),c(o)&&c(r)&&r.checkApproachingInterval(e,t,n,i),o};T_.prototype.pickFeatures=function(e,t,n,i,o){};var bH=T_;var n_e={ARCGIS_MAPSERVER:nH.fromUrl,BING:async(e,t)=>rH.fromUrl(e,t),GOOGLE_EARTH:async(e,t)=>{let n=t.channel;return delete t.channel,fH.fromUrl(e,n,t)},MAPBOX:(e,t)=>new dH({url:e,...t}),SINGLE_TILE:hH.fromUrl,TMS:lD.fromUrl,URL_TEMPLATE:(e,t)=>new Gl({url:e,...t}),WMS:(e,t)=>new IH({url:e,...t}),WMTS:(e,t)=>new bH({url:e,...t})};function OA(e){e=e??k.EMPTY_OBJECT,this._defaultAlpha=void 0,this._defaultNightAlpha=void 0,this._defaultDayAlpha=void 0,this._defaultBrightness=void 0,this._defaultContrast=void 0,this._defaultHue=void 0,this._defaultSaturation=void 0,this._defaultGamma=void 0,this._defaultMinificationFilter=void 0,this._defaultMagnificationFilter=void 0,this._tileCredits=void 0,this._errorEvent=new fe}Object.defineProperties(OA.prototype,{rectangle:{get:function(){return this._imageryProvider.rectangle}},tileWidth:{get:function(){return this._imageryProvider.tileWidth}},tileHeight:{get:function(){return this._imageryProvider.tileHeight}},maximumLevel:{get:function(){return this._imageryProvider.maximumLevel}},minimumLevel:{get:function(){return this._imageryProvider.minimumLevel}},tilingScheme:{get:function(){return this._imageryProvider.tilingScheme}},tileDiscardPolicy:{get:function(){return this._imageryProvider.tileDiscardPolicy}},errorEvent:{get:function(){return this._errorEvent}},credit:{get:function(){return this._imageryProvider.credit}},hasAlphaChannel:{get:function(){return this._imageryProvider.hasAlphaChannel}},proxy:{get:function(){}}});OA.fromAssetId=async function(e,t){t=t??k.EMPTY_OBJECT;let n=bm._createEndpointResource(e,t),i=e.toString()+t.accessToken+t.server,o=OA._endpointCache[i];c(o)||(o=n.fetchJson(),OA._endpointCache[i]=o);let r=await o;if(r.type!=="IMAGERY")throw new oe(`Cesium ion asset ${e} is not an imagery asset.`);let a,s=r.externalType;if(!c(s))a=await lD.fromUrl(new bm(r,n));else{let l=n_e[s];if(!c(l))throw new oe(`Unrecognized Cesium ion imagery type: ${s}`);let f={...r.options},h=f.url;delete f.url,a=await l(h,f)}let A=new OA(t);return a.errorEvent.addEventListener(function(l){l.provider=A,A._errorEvent.raiseEvent(l)}),A._tileCredits=bm.getCreditsFromEndpoint(r,n),A._imageryProvider=a,A};OA.prototype.getTileCredits=function(e,t,n){let i=this._imageryProvider.getTileCredits(e,t,n);return c(i)?this._tileCredits.concat(i):this._tileCredits};OA.prototype.requestImage=function(e,t,n,i){return this._imageryProvider.requestImage(e,t,n,i)};OA.prototype.pickFeatures=function(e,t,n,i,o){return this._imageryProvider.pickFeatures(e,t,n,i,o)};OA._endpointCache={};var BH=OA;var i_e={AERIAL:2,AERIAL_WITH_LABELS:3,ROAD:4},xH=Object.freeze(i_e);function o_e(e){e=e??k.EMPTY_OBJECT;let t=e.style??xH.AERIAL;return BH.fromAssetId(t)}var TH=o_e;function ca(){Ee.throwInstantiationError()}Object.defineProperties(ca.prototype,{errorEvent:{get:Ee.throwInstantiationError},credit:{get:Ee.throwInstantiationError},tilingScheme:{get:Ee.throwInstantiationError},hasWaterMask:{get:Ee.throwInstantiationError},hasVertexNormals:{get:Ee.throwInstantiationError},availability:{get:Ee.throwInstantiationError}});var SH=[];ca.getRegularGridIndices=function(e,t){let n=SH[e];c(n)||(SH[e]=n=[]);let i=n[t];return c(i)||(e*t<w.SIXTY_FOUR_KILOBYTES?i=n[t]=new Uint16Array((e-1)*(t-1)*6):i=n[t]=new Uint32Array((e-1)*(t-1)*6),RH(e,t,i,0)),i};var wH=[];ca.getRegularGridIndicesAndEdgeIndices=function(e,t){let n=wH[e];c(n)||(wH[e]=n=[]);let i=n[t];if(!c(i)){let o=ca.getRegularGridIndices(e,t),r=QH(e,t),a=r.westIndicesSouthToNorth,s=r.southIndicesEastToWest,A=r.eastIndicesNorthToSouth,l=r.northIndicesWestToEast;i=n[t]={indices:o,westIndicesSouthToNorth:a,southIndicesEastToWest:s,eastIndicesNorthToSouth:A,northIndicesWestToEast:l}}return i};var DH=[];ca.getRegularGridAndSkirtIndicesAndEdgeIndices=function(e,t){let n=DH[e];c(n)||(DH[e]=n=[]);let i=n[t];if(!c(i)){let o=e*t,r=(e-1)*(t-1)*6,a=e*2+t*2,s=Math.max(0,a-4)*6,A=o+a,l=r+s,f=QH(e,t),h=f.westIndicesSouthToNorth,m=f.southIndicesEastToWest,p=f.eastIndicesNorthToSouth,g=f.northIndicesWestToEast,C=Be.createTypedArray(A,l);RH(e,t,C,0),ca.addSkirtIndices(h,m,p,g,o,C,r),i=n[t]={indices:C,westIndicesSouthToNorth:h,southIndicesEastToWest:m,eastIndicesNorthToSouth:p,northIndicesWestToEast:g,indexCountWithoutSkirts:r}}return i};ca.addSkirtIndices=function(e,t,n,i,o,r,a){let s=o;a=l0(e,s,r,a),s+=e.length,a=l0(t,s,r,a),s+=t.length,a=l0(n,s,r,a),s+=n.length,l0(i,s,r,a)};function QH(e,t){let n=new Array(t),i=new Array(e),o=new Array(t),r=new Array(e),a;for(a=0;a<e;++a)r[a]=a,i[a]=e*t-1-a;for(a=0;a<t;++a)o[a]=(a+1)*e-1,n[a]=(t-a-1)*e;return{westIndicesSouthToNorth:n,southIndicesEastToWest:i,eastIndicesNorthToSouth:o,northIndicesWestToEast:r}}function RH(e,t,n,i){let o=0;for(let r=0;r<t-1;++r){for(let a=0;a<e-1;++a){let s=o,A=s+e,l=A+1,f=s+1;n[i++]=s,n[i++]=A,n[i++]=f,n[i++]=f,n[i++]=A,n[i++]=l,++o}++o}}function l0(e,t,n,i){let o=e[0],r=e.length;for(let a=1;a<r;++a){let s=e[a];n[i++]=o,n[i++]=s,n[i++]=t,n[i++]=t,n[i++]=s,n[i++]=t+1,o=s,++t}return i}ca.heightmapTerrainQuality=.25;ca.getEstimatedLevelZeroGeometricErrorForAHeightmap=function(e,t,n){return e.maximumRadius*2*Math.PI*ca.heightmapTerrainQuality/(t*n)};ca.prototype.requestTileGeometry=Ee.throwInstantiationError;ca.prototype.getLevelMaximumGeometricError=Ee.throwInstantiationError;ca.prototype.getTileDataAvailable=Ee.throwInstantiationError;ca.prototype.loadTileDataAvailability=Ee.throwInstantiationError;var vH=ca;var PH=`uniform sampler2D u_texture;

in vec2 v_textureCoordinates;

void main()
{
    out_FragColor = texture(u_texture, v_textureCoordinates);
}
`;var MH=`in vec4 position;
in float webMercatorT;

uniform vec2 u_textureDimensions;

out vec2 v_textureCoordinates;

void main()
{
    v_textureCoordinates = vec2(position.x, webMercatorT);
    gl_Position = czm_viewportOrthographic * (position * vec4(u_textureDimensions, 1.0, 1.0));
}
`;var r_e={UNLOADED:0,TRANSITIONING:1,RECEIVED:2,TEXTURE_LOADED:3,READY:4,FAILED:5,INVALID:6,PLACEHOLDER:7},Pn=Object.freeze(r_e);function Ap(e,t,n,i,o){if(this.imageryLayer=e,this.x=t,this.y=n,this.level=i,this.request=void 0,i!==0){let r=t/2|0,a=n/2|0,s=i-1;this.parent=e.getImageryFromCache(r,a,s)}this.state=Pn.UNLOADED,this.imageUrl=void 0,this.image=void 0,this.texture=void 0,this.textureWebMercator=void 0,this.credits=void 0,this.referenceCount=0,!c(o)&&e.ready&&(o=e.imageryProvider.tilingScheme.tileXYToRectangle(t,n,i)),this.rectangle=o}Ap.createPlaceholder=function(e){let t=new Ap(e,0,0,0);return t.addReference(),t.state=Pn.PLACEHOLDER,t};Ap.prototype.addReference=function(){++this.referenceCount};Ap.prototype.releaseReference=function(){return--this.referenceCount,this.referenceCount===0?(this.imageryLayer.removeImageryFromCache(this),c(this.parent)&&this.parent.releaseReference(),c(this.image)&&c(this.image.destroy)&&this.image.destroy(),c(this.texture)&&this.texture.destroy(),c(this.textureWebMercator)&&this.texture!==this.textureWebMercator&&this.textureWebMercator.destroy(),pe(this),0):this.referenceCount};Ap.prototype.processStateMachine=function(e,t,n){this.state===Pn.UNLOADED&&!n&&(this.state=Pn.TRANSITIONING,this.imageryLayer._requestImagery(this)),this.state===Pn.RECEIVED&&(this.state=Pn.TRANSITIONING,this.imageryLayer._createTexture(e.context,this));let i=this.state===Pn.READY&&t&&!this.texture;(this.state===Pn.TEXTURE_LOADED||i)&&(this.state=Pn.TRANSITIONING,this.imageryLayer._reprojectTexture(e,this,t))};var hD=Ap;function mD(e,t,n){this.readyImagery=void 0,this.loadingImagery=e,this.textureCoordinateRectangle=t,this.textureTranslationAndScale=void 0,this.useWebMercatorT=n}mD.prototype.freeResources=function(){c(this.readyImagery)&&this.readyImagery.releaseReference(),c(this.loadingImagery)&&this.loadingImagery.releaseReference()};mD.prototype.processStateMachine=function(e,t,n){let i=this.loadingImagery,o=i.imageryLayer;if(i.processStateMachine(t,!this.useWebMercatorT,n),i.state===Pn.READY)return c(this.readyImagery)&&this.readyImagery.releaseReference(),this.readyImagery=this.loadingImagery,this.loadingImagery=void 0,this.textureTranslationAndScale=o._calculateTextureTranslationAndScale(e,this),!0;let r=i.parent,a;for(;c(r)&&(r.state!==Pn.READY||!this.useWebMercatorT&&!c(r.texture));)r.state!==Pn.FAILED&&r.state!==Pn.INVALID&&(a=a||r),r=r.parent;return this.readyImagery!==r&&(c(this.readyImagery)&&this.readyImagery.releaseReference(),this.readyImagery=r,c(r)&&(r.addReference(),this.textureTranslationAndScale=o._calculateTextureTranslationAndScale(e,this))),i.state===Pn.FAILED||i.state===Pn.INVALID?c(a)?(a.processStateMachine(t,!this.useWebMercatorT,n),!1):!0:!1};var pD=mD;function Sn(e,t){this._imageryProvider=e,this._readyEvent=new fe,this._errorEvent=new fe,t=t??k.EMPTY_OBJECT,e=e??k.EMPTY_OBJECT,this.alpha=t.alpha??e._defaultAlpha??1,this.nightAlpha=t.nightAlpha??e._defaultNightAlpha??1,this.dayAlpha=t.dayAlpha??e._defaultDayAlpha??1,this.brightness=t.brightness??e._defaultBrightness??Sn.DEFAULT_BRIGHTNESS,this.contrast=t.contrast??e._defaultContrast??Sn.DEFAULT_CONTRAST,this.hue=t.hue??e._defaultHue??Sn.DEFAULT_HUE,this.saturation=t.saturation??e._defaultSaturation??Sn.DEFAULT_SATURATION,this.gamma=t.gamma??e._defaultGamma??Sn.DEFAULT_GAMMA,this.splitDirection=t.splitDirection??Sn.DEFAULT_SPLIT,this.minificationFilter=t.minificationFilter??e._defaultMinificationFilter??Sn.DEFAULT_MINIFICATION_FILTER,this.magnificationFilter=t.magnificationFilter??e._defaultMagnificationFilter??Sn.DEFAULT_MAGNIFICATION_FILTER,this.show=t.show??!0,this._minimumTerrainLevel=t.minimumTerrainLevel,this._maximumTerrainLevel=t.maximumTerrainLevel,this._rectangle=t.rectangle??ce.MAX_VALUE,this._maximumAnisotropy=t.maximumAnisotropy,this._imageryCache={},this._skeletonPlaceholder=new pD(hD.createPlaceholder(this)),this._show=!0,this._layerIndex=-1,this._isBaseLayer=!1,this._requestImageError=void 0,this._reprojectComputeCommands=[],this.cutoutRectangle=t.cutoutRectangle,this.colorToAlpha=t.colorToAlpha,this.colorToAlphaThreshold=t.colorToAlphaThreshold??Sn.DEFAULT_APPLY_COLOR_TO_ALPHA_THRESHOLD}Object.defineProperties(Sn.prototype,{imageryProvider:{get:function(){return this._imageryProvider}},ready:{get:function(){return c(this._imageryProvider)}},errorEvent:{get:function(){return this._errorEvent}},readyEvent:{get:function(){return this._readyEvent}},rectangle:{get:function(){return this._rectangle}}});Sn.DEFAULT_BRIGHTNESS=1;Sn.DEFAULT_CONTRAST=1;Sn.DEFAULT_HUE=0;Sn.DEFAULT_SATURATION=1;Sn.DEFAULT_GAMMA=1;Sn.DEFAULT_SPLIT=Zo.NONE;Sn.DEFAULT_MINIFICATION_FILTER=tn.LINEAR;Sn.DEFAULT_MAGNIFICATION_FILTER=bo.LINEAR;Sn.DEFAULT_APPLY_COLOR_TO_ALPHA_THRESHOLD=.004;Sn.fromProviderAsync=function(e,t){let n=new Sn(void 0,t);return l_e(n,Promise.resolve(e)),n};Sn.fromWorldImagery=function(e){return e=e??k.EMPTY_OBJECT,Sn.fromProviderAsync(TH({style:e.style}),e)};Sn.prototype.isBaseLayer=function(){return this._isBaseLayer};Sn.prototype.isDestroyed=function(){return!1};Sn.prototype.destroy=function(){return pe(this)};var NH=new ce,OH=new ce,gD=new ce,FH=new ce;Sn.prototype.getImageryRectangle=function(){let e=this._imageryProvider,t=this._rectangle;return ce.intersection(e.rectangle,t)};Sn.prototype._createTileImagerySkeletons=function(e,t,n){let i=e.data;if(!c(t)||c(this._minimumTerrainLevel)&&e.level<this._minimumTerrainLevel||c(this._maximumTerrainLevel)&&e.level>this._maximumTerrainLevel)return!1;c(n)||(n=i.imagery.length);let o=this._imageryProvider;if(!this.ready)return this._skeletonPlaceholder.loadingImagery.addReference(),i.imagery.splice(n,0,this._skeletonPlaceholder),!0;let r=o.tilingScheme.projection instanceof Ar&&e.rectangle.north<Ar.MaximumLatitude&&e.rectangle.south>-Ar.MaximumLatitude,a=ce.intersection(o.rectangle,this._rectangle,NH),s=ce.intersection(e.rectangle,a,OH);if(!c(s)){if(!this.isBaseLayer())return!1;let T=a,R=e.rectangle;s=OH,R.south>=T.north?s.north=s.south=T.north:R.north<=T.south?s.north=s.south=T.south:(s.south=Math.max(R.south,T.south),s.north=Math.min(R.north,T.north)),R.west>=T.east?s.west=s.east=T.east:R.east<=T.west?s.west=s.east=T.west:(s.west=Math.max(R.west,T.west),s.east=Math.min(R.east,T.east))}let A=0;s.south>0?A=s.south:s.north<0&&(A=s.north);let f=1*t.getLevelMaximumGeometricError(e.level),h=c_e(this,f,A);h=Math.max(0,h);let m=o.maximumLevel;if(h>m&&(h=m),c(o.minimumLevel)){let T=o.minimumLevel;h<T&&(h=T)}let p=o.tilingScheme,g=p.positionToTileXY(ce.northwest(s),h),C=p.positionToTileXY(ce.southeast(s),h),_=e.rectangle.width/512,E=e.rectangle.height/512,I=p.tileXYToRectangle(g.x,g.y,h);Math.abs(I.south-e.rectangle.north)<E&&g.y<C.y&&++g.y,Math.abs(I.east-e.rectangle.west)<_&&g.x<C.x&&++g.x;let y=p.tileXYToRectangle(C.x,C.y,h);Math.abs(y.north-e.rectangle.south)<E&&C.y>g.y&&--C.y,Math.abs(y.west-e.rectangle.east)<_&&C.x>g.x&&--C.x;let b=ce.clone(e.rectangle,FH),x=p.tileXYToRectangle(g.x,g.y,h),S=ce.intersection(x,a,gD),P;r?(p.rectangleToNativeRectangle(b,b),p.rectangleToNativeRectangle(x,x),p.rectangleToNativeRectangle(S,S),p.rectangleToNativeRectangle(a,a),P=p.tileXYToNativeRectangle.bind(p),_=b.width/512,E=b.height/512):P=p.tileXYToRectangle.bind(p);let D,Q=0,v=1,d;!this.isBaseLayer()&&Math.abs(S.west-b.west)>=_&&(Q=Math.min(1,(S.west-b.west)/b.width)),!this.isBaseLayer()&&Math.abs(S.north-b.north)>=E&&(v=Math.max(0,(S.north-b.south)/b.height));let B=v;for(let T=g.x;T<=C.x;T++)if(D=Q,x=P(T,g.y,h),S=ce.simpleIntersection(x,a,gD),!!c(S)){Q=Math.min(1,(S.east-b.west)/b.width),T===C.x&&(this.isBaseLayer()||Math.abs(S.east-b.east)<_)&&(Q=1),v=B;for(let R=g.y;R<=C.y;R++){if(d=v,x=P(T,R,h),S=ce.simpleIntersection(x,a,gD),!c(S))continue;v=Math.max(0,(S.south-b.south)/b.height),R===C.y&&(this.isBaseLayer()||Math.abs(S.south-b.south)<E)&&(v=0);let L=new se(D,v,Q,d),G=this.getImageryFromCache(T,R,h);i.imagery.splice(n,0,new pD(G,L,r)),++n}}return!0};Sn.prototype._calculateTextureTranslationAndScale=function(e,t){let n=t.readyImagery.rectangle,i=e.rectangle;if(t.useWebMercatorT){let A=t.readyImagery.imageryLayer.imageryProvider.tilingScheme;n=A.rectangleToNativeRectangle(n,NH),i=A.rectangleToNativeRectangle(i,FH)}let o=i.width,r=i.height,a=o/n.width,s=r/n.height;return new se(a*(i.west-n.west)/o,s*(i.south-n.south)/r,a,s)};Sn.prototype._requestImagery=function(e){let t=this._imageryProvider,n=this;function i(a){if(!c(a))return o();e.image=a,e.state=Pn.RECEIVED,e.request=void 0,as.reportSuccess(n._requestImageError)}function o(a){if(e.request.state===Vn.CANCELLED){e.state=Pn.UNLOADED,e.request=void 0;return}e.state=Pn.FAILED,e.request=void 0;let s=`Failed to obtain image tile X: ${e.x} Y: ${e.y} Level: ${e.level}.`;n._requestImageError=as.reportError(n._requestImageError,t,t.errorEvent,s,e.x,e.y,e.level,a),n._requestImageError.retry&&r()}function r(){let a=new cA({throttle:!1,throttleByServer:!0,type:sA.IMAGERY});e.request=a,e.state=Pn.TRANSITIONING;let s=t.requestImage(e.x,e.y,e.level,a);if(!c(s)){e.state=Pn.UNLOADED,e.request=void 0;return}c(t.getTileCredits)&&(e.credits=t.getTileCredits(e.x,e.y,e.level)),s.then(function(A){i(A)}).catch(function(A){o(A)})}r()};Sn.prototype._createTextureWebGL=function(e,t){let n=new dn({minificationFilter:this.minificationFilter,magnificationFilter:this.magnificationFilter}),i=t.image;return c(i.internalFormat)?new gn({context:e,pixelFormat:i.internalFormat,width:i.width,height:i.height,source:{arrayBufferView:i.bufferView},sampler:n}):new gn({context:e,source:i,pixelFormat:this._imageryProvider.hasAlphaChannel?Bt.RGBA:Bt.RGB,sampler:n})};Sn.prototype._createTexture=function(e,t){let n=this._imageryProvider,i=t.image;if(c(n.tileDiscardPolicy)){let r=n.tileDiscardPolicy;if(c(r)){if(!r.isReady()){t.state=Pn.RECEIVED;return}if(r.shouldDiscardImage(i)){t.state=Pn.INVALID;return}}}let o=this._createTextureWebGL(e,t);n.tilingScheme.projection instanceof Ar?t.textureWebMercator=o:t.texture=o,t.image=void 0,t.state=Pn.TEXTURE_LOADED};function LH(e,t,n){return`${e}:${t}:${n}`}Sn.prototype._finalizeReprojectTexture=function(e,t){let n=this.minificationFilter,i=this.magnificationFilter;if(n===tn.LINEAR&&i===bo.LINEAR&&!Bt.isCompressedFormat(t.pixelFormat)&&w.isPowerOfTwo(t.width)&&w.isPowerOfTwo(t.height)){n=tn.LINEAR_MIPMAP_LINEAR;let r=pn.maximumTextureFilterAnisotropy,a=Math.min(r,this._maximumAnisotropy??r),s=LH(n,i,a),A=e.cache.imageryLayerMipmapSamplers;c(A)||(A={},e.cache.imageryLayerMipmapSamplers=A);let l=A[s];c(l)||(l=A[s]=new dn({wrapS:mi.CLAMP_TO_EDGE,wrapT:mi.CLAMP_TO_EDGE,minificationFilter:n,magnificationFilter:i,maximumAnisotropy:a})),t.generateMipmap(Bd.NICEST),t.sampler=l}else{let r=LH(n,i,0),a=e.cache.imageryLayerNonMipmapSamplers;c(a)||(a={},e.cache.imageryLayerNonMipmapSamplers=a);let s=a[r];c(s)||(s=a[r]=new dn({wrapS:mi.CLAMP_TO_EDGE,wrapT:mi.CLAMP_TO_EDGE,minificationFilter:n,magnificationFilter:i})),t.sampler=s}};Sn.prototype._reprojectTexture=function(e,t,n){let i=t.textureWebMercator||t.texture,o=t.rectangle,r=e.context;if(n=n??!0,n&&!(this._imageryProvider.tilingScheme.projection instanceof Ai)&&o.width/i.width>1e-5){let a=this;t.addReference();let s=new Rf({persists:!0,owner:this,preExecute:function(A){s_e(A,r,i,t.rectangle)},postExecute:function(A){t.texture=A,a._finalizeReprojectTexture(r,A),t.state=Pn.READY,t.releaseReference()},canceled:function(){t.state=Pn.TEXTURE_LOADED,t.releaseReference()}});this._reprojectComputeCommands.push(s)}else n&&(t.texture=i),this._finalizeReprojectTexture(r,i),t.state=Pn.READY};Sn.prototype.queueReprojectionCommands=function(e){let t=this._reprojectComputeCommands,n=t.length;for(let i=0;i<n;++i)e.commandList.push(t[i]);t.length=0};Sn.prototype.cancelReprojections=function(){this._reprojectComputeCommands.forEach(function(e){c(e.canceled)&&e.canceled()}),this._reprojectComputeCommands.length=0};Sn.prototype.getImageryFromCache=function(e,t,n,i){let o=kH(e,t,n),r=this._imageryCache[o];return c(r)||(r=new hD(this,e,t,n,i),this._imageryCache[o]=r),r.addReference(),r};Sn.prototype.removeImageryFromCache=function(e){let t=kH(e.x,e.y,e.level);delete this._imageryCache[t]};function kH(e,t,n){return JSON.stringify([e,t,n])}var f0={u_textureDimensions:function(){return this.textureDimensions},u_texture:function(){return this.texture},textureDimensions:new U,texture:void 0},a_e=$t.supportsTypedArrays()?new Float32Array(128):void 0;function s_e(e,t,n,i){let o=t.cache.imageryLayer_reproject;if(!c(o)){o=t.cache.imageryLayer_reproject={vertexArray:void 0,shaderProgram:void 0,sampler:void 0,destroy:function(){c(this.framebuffer)&&this.framebuffer.destroy(),c(this.vertexArray)&&this.vertexArray.destroy(),c(this.shaderProgram)&&this.shaderProgram.destroy()}};let _=new Float32Array(256),E=0;for(let S=0;S<64;++S){let P=S/63;_[E++]=0,_[E++]=P,_[E++]=1,_[E++]=P}let I={position:0,webMercatorT:1},y=vH.getRegularGridIndices(2,64),b=dt.createIndexBuffer({context:t,typedArray:y,usage:Me.STATIC_DRAW,indexDatatype:Be.UNSIGNED_SHORT});o.vertexArray=new go({context:t,attributes:[{index:I.position,vertexBuffer:dt.createVertexBuffer({context:t,typedArray:_,usage:Me.STATIC_DRAW}),componentsPerAttribute:2},{index:I.webMercatorT,vertexBuffer:dt.createVertexBuffer({context:t,sizeInBytes:512,usage:Me.STREAM_DRAW}),componentsPerAttribute:1}],indexBuffer:b});let x=new It({sources:[MH]});o.shaderProgram=Bn.fromCache({context:t,vertexShaderSource:x,fragmentShaderSource:PH,attributeLocations:I}),o.sampler=new dn({wrapS:mi.CLAMP_TO_EDGE,wrapT:mi.CLAMP_TO_EDGE,minificationFilter:tn.LINEAR,magnificationFilter:bo.LINEAR})}n.sampler=o.sampler;let r=n.width,a=n.height;f0.textureDimensions.x=r,f0.textureDimensions.y=a,f0.texture=n;let s=Math.sin(i.south),A=.5*Math.log((1+s)/(1-s));s=Math.sin(i.north);let f=1/(.5*Math.log((1+s)/(1-s))-A),h=new gn({context:t,width:r,height:a,pixelFormat:n.pixelFormat,pixelDatatype:n.pixelDatatype,preMultiplyAlpha:n.preMultiplyAlpha});w.isPowerOfTwo(r)&&w.isPowerOfTwo(a)&&h.generateMipmap(Bd.NICEST);let m=i.south,p=i.north,g=a_e,C=0;for(let _=0;_<64;++_){let E=_/63,I=w.lerp(m,p,E);s=Math.sin(I);let b=(.5*Math.log((1+s)/(1-s))-A)*f;g[C++]=b,g[C++]=b}o.vertexArray.getAttribute(1).vertexBuffer.copyFromArrayView(g),e.shaderProgram=o.shaderProgram,e.outputTexture=h,e.uniformMap=f0,e.vertexArray=o.vertexArray}function c_e(e,t,n){let i=e._imageryProvider,o=i.tilingScheme,r=o.ellipsoid,a=e._imageryProvider.tilingScheme.projection instanceof Ai?1:Math.cos(n),s=o.rectangle,l=r.maximumRadius*s.width*a/(i.tileWidth*o.getNumberOfXTilesAtLevel(0))/t,f=Math.log(l)/Math.log(2);return Math.round(f)|0}function A_e(e,t){e.numberOfListeners>0?e.raiseEvent(t):console.error(t)}async function l_e(e,t){let n;try{if(n=await Promise.resolve(t),e.isDestroyed())return;e._imageryProvider=n,e._readyEvent.raiseEvent(n)}catch(i){A_e(e._errorEvent,i)}}var wu=Sn;var CD=class{constructor(){this.alpha=!1,this.brightness=!1,this.contrast=!1,this.hue=!1,this.saturation=!1,this.gamma=!1,this.colorToAlpha=!1}},UH=CD;var _D=class{constructor(t,n,i,o){this._minX=t??0,this._minY=n??0,this._maxX=i??0,this._maxY=o??0}get minX(){return this._minX}set minX(t){this._minX=t}get minY(){return this._minY}set minY(t){this._minY=t}get maxX(){return this._maxX}set maxX(t){this._maxX=t}get maxY(){return this._maxY}set maxY(t){this._maxY=t}contains(t,n){return t>=this.minX&&t<this.maxX&&n>=this.minY&&n<this.maxY}containsExclusive(t,n){return t>this.minX&&t<this.maxX&&n>this.minY&&n<this.maxY}containsInclusive(t,n){return t>=this.minX&&t<=this.maxX&&n>=this.minY&&n<=this.maxY}},ED=_D;var f_e=new ce,GH=new ce,u_e=new ce,d_e=new ce,h_e=new ce,m_e=new ce,ID=class e{constructor(t,n,i,o,r){this._x=t,this._y=n,this._level=i,this._textureCoordinateRectangle=o,this._imagery=r}get x(){return this._x}get y(){return this._y}get level(){return this._level}get textureCoordinateRectangle(){return this._textureCoordinateRectangle}get imagery(){return this._imagery}static createImageryCoverages(t,n,i){if(!n.show)return[];let o=n.imageryProvider,r=e._clampImageryLevel(o,i),a=ce.intersection(o.rectangle,n.rectangle,f_e),s=o.tilingScheme,A=e._computeImageryRange(t,a,s,r),l=d_e;s.rectangleToNativeRectangle(t,l);let f=h_e;s.rectangleToNativeRectangle(a,f);let h=(p,g,C)=>{let _=s.tileXYToRectangle(p,g,C),E=ce.intersection(_,a,u_e);if(!c(E))return;let I=m_e;return s.rectangleToNativeRectangle(E,I),I};return e._computeImageryCoverages(n,A,r,l,h)}static _clampImageryLevel(t,n){let i=t.minimumLevel??0,o=t.maximumLevel??Number.POSITIVE_INFINITY,r=Math.min(o-1,Math.max(i,n));return Math.floor(r)}static _computeImageryRange(t,n,i,o){let r=e._computeOverlappedRectangle(t,n),a=i.positionToTileXY(ce.northwest(r),o),s=i.positionToTileXY(ce.southeast(r),o),A=new ED;A.minX=a.x,A.minY=a.y,A.maxX=s.x,A.maxY=s.y;let l=t.width/512,f=t.height/512,h=i.tileXYToRectangle(A.minX,A.minY,o);Math.abs(h.south-t.north)<f&&A.minY<A.maxY&&++A.minY,Math.abs(h.east-t.west)<l&&A.minX<A.maxX&&++A.minX;let g=i.tileXYToRectangle(A.maxX,A.maxY,o);return Math.abs(g.north-t.south)<f&&A.maxY>A.minY&&--A.maxY,Math.abs(g.west-t.east)<l&&A.maxX>A.minX&&--A.maxX,A}static _clampRectangle(t,n,i){return c(i)||(i=new ce),t.south>=n.north?i.north=i.south=n.north:t.north<=n.south?i.north=i.south=n.south:(i.south=Math.max(t.south,n.south),i.north=Math.min(t.north,n.north)),t.west>=n.east?i.west=i.east=n.east:t.east<=n.west?i.west=i.east=n.west:(i.west=Math.max(t.west,n.west),i.east=Math.min(t.east,n.east)),i}static _computeOverlappedRectangle(t,n){let i=ce.intersection(t,n,GH);return c(i)?i:e._clampRectangle(t,n,GH)}static _computeImageryCoverages(t,n,i,o,r){let a=[];for(let s=n.minX;s<=n.maxX;s++){let A=r(s,n.maxY,i);if(c(A))for(let l=n.minY;l<=n.maxY;l++){let f=r(s,l,i);if(!c(f))continue;let h=e._localizeToCartesianRectangle(f,o,void 0),m=t.getImageryFromCache(s,l,i),p=new e(s,l,i,h,m);a.push(p)}}return a}static _localizeToCartesianRectangle(t,n,i){c(i)||(i=new ED);let o=1/n.width,r=1/n.height;return i.minX=(t.west-n.west)*o,i.minY=(t.south-n.south)*r,i.maxX=(t.east-n.west)*o,i.maxY=(t.north-n.south)*r,i}},yD=ID;var bD=class e{static readAttributeAsTypedArray(t){let n=e.readAttributeAsRawCompactTypedArray(t),i=t.normalized,o=t.quantization;if(!c(o)&&!i)return n;let r=t.type,a=t.count,s=n;return i&&(s=ni.dequantize(n,t.componentDatatype,r,a)),c(o)?e.dequantize(s,a,r,o):s}static readAttributeAsRawCompactTypedArray(t){let n=t.type,i=t.count,o=st.getNumberOfComponents(n),r=i*o,a=t.componentDatatype,s=t.quantization;c(s)&&(a=s.componentDatatype);let A=t.buffer,l=t.byteOffset,f=t.byteStride,h=N.getSizeInBytes(a),m=o*h;if(!c(f)||f===m){let y=N.createTypedArray(a,r);return A.getBufferData(y,l),y}let p=new Uint8Array(A.sizeInBytes);A.getBufferData(p);let g=N.createTypedArray(a,r),C=f??m,_=new DataView(p.buffer,p.byteOffset,p.byteLength),E=new Array(o),I=e.createComponentsReader(a);for(let y=0;y<i;++y){let b=l+y*C;I(_,b,o,E);for(let x=0;x<o;++x)g[y*o+x]=E[x]}return g}static dequantize(t,n,i,o){if(o.octEncoded){let s=e.octDecode(t,n,o.normalizationRange,void 0);return o.octEncodedZXY&&e.convertZxyToXyz(s,s),s}let r=o.quantizedVolumeStepSize,a=o.quantizedVolumeOffset;if(i===st.SCALAR)return e.dequantize1D(t,n,r,a,void 0);if(i===st.VEC2)return e.dequantize2D(t,n,r,a,void 0);if(i===st.VEC3)return e.dequantize3D(t,n,r,a,void 0);if(i===st.VEC4)return e.dequantize4D(t,n,r,a,void 0);throw new Ee(`Element type for dequantization must be SCALAR, VEC2, VEC3, or VEC4, but is ${i}`)}static octDecode(t,n,i,o){c(o)||(o=new Float32Array(t.length));let r=new u;for(let a=0;a<n;a++)u.unpack(t,a*3,r),ni.octDecodeInRange(r,i,r),u.pack(o,r,a*3);return o}static convertZxyToXyz(t,n,i){c(i)||(i=new Float32Array(t.length));let o=0;for(let r=0;r<n;r++,o+=3){let a=t[o+0],s=t[o+1],A=t[o+2];i[o+0]=s,i[o+1]=A,i[o+2]=a}return i}static dequantize1D(t,n,i,o,r){c(r)||(r=new Float32Array(t.length));for(let a=0;a<n;a++){let A=t[a]*i+o;r[a]=A}return r}static dequantize2D(t,n,i,o,r){c(r)||(r=new Float32Array(t.length));let a=new U;for(let s=0;s<n;s++)U.unpack(t,s*2,a),U.multiplyComponents(a,i,a),U.add(a,o,a),U.pack(a,r,s*2);return r}static dequantize3D(t,n,i,o,r){c(r)||(r=new Float32Array(t.length));let a=new u;for(let s=0;s<n;s++)u.unpack(t,s*3,a),u.multiplyComponents(a,i,a),u.add(a,o,a),u.pack(a,r,s*3);return r}static dequantize4D(t,n,i,o,r){c(r)||(r=new Float32Array(t.length));let a=new se;for(let s=0;s<n;s++)se.unpack(t,s*4,a),se.multiplyComponents(a,i,a),se.add(a,o,a),se.pack(a,r,s*4);return r}static createComponentsReader(t){let n=e.createComponentReader(t),i=N.getSizeInBytes(t);return function(o,r,a,s){let A=r;for(let l=0;l<a;++l)s[l]=n(o,A),A+=i}}static createComponentReader(t){switch(t){case N.BYTE:return function(n,i){return n.getInt8(i)};case N.UNSIGNED_BYTE:return function(n,i){return n.getUint8(i)};case N.SHORT:return function(n,i){return n.getInt16(i,!0)};case N.UNSIGNED_SHORT:return function(n,i){return n.getUint16(i,!0)};case N.INT:return function(n,i){return n.getInt32(i,!0)};case N.UNSIGNED_INT:return function(n,i){return n.getUint32(i,!0)};case N.FLOAT:return function(n,i){return n.getFloat32(i,!0)};case N.DOUBLE:return function(n,i){return n.getFloat64(i,!0)}}throw new Ee(`The componentType must be a valid ComponentDatatype, but is ${t}`)}static transform3D(t,n,i){c(i)||(i=new Float32Array(t.length));let o=new u,r=t.length/3;for(let a=0;a<r;a++)u.unpack(t,a*3,o),O.multiplyByPoint(n,o,o),u.pack(o,i,a*3);return i}static readIndicesAsTypedArray(t){let n=t.typedArray;if(c(n))return n;let i=t.buffer,o=t.count,r=t.indexDatatype,a=e.createIndexTypedArray(r,o);return i.getBufferData(a),a}static readIndicesAsTriangleIndicesTypedArray(t,n){let i=e.readIndicesAsTypedArray(t);if(n===Ce.TRIANGLES)return i;if(n===Ce.TRIANGLE_STRIP)return e.convertTriangleStripToTriangleIndices(i);if(n===Ce.TRIANGLE_FAN)return e.convertTriangleFanToTriangleIndices(i);throw new Ee(`The primitiveType must be TRIANGLES (${Ce.TRIANGLES}, TRIANGLE_STRIP (${Ce.TRIANGLE_STRIP}, or TRIANGLE_FAN (${Ce.TRIANGLE_FAN}, but is ${n}`)}static convertTriangleStripToTriangleIndices(t){let n=t.constructor((t.length-2)*3);for(let i=0;i<t.length-2;i++)i%2===1?(n[i*3+0]=t[i+0],n[i*3+1]=t[i+2],n[i*3+2]=t[i+1]):(n[i*3+0]=t[i+0],n[i*3+1]=t[i+1],n[i*3+2]=t[i+2]);return n}static convertTriangleFanToTriangleIndices(t){let n=t.constructor((t.length-2)*3);for(let i=0;i<t.length-2;i++)n[i*3+0]=t[i+0],n[i*3+1]=t[i+1],n[i*3+2]=t[i+2];return n}static createIndexTypedArray(t,n){switch(t){case Be.UNSIGNED_BYTE:return new Uint8Array(n);case Be.UNSIGNED_SHORT:return new Uint16Array(n);case Be.UNSIGNED_INT:return new Uint32Array(n)}throw new Ee(`The indexDatatype must be UNSIGNED_BYTE (${Be.UNSIGNED_BYTE}, UNSIGNED_SHORT (${Be.UNSIGNED_SHORT}, or UNSIGNED_INT (${Be.UNSIGNED_INT}, but is ${t}`)}},zH=bD;var BD=class e{static createTextureCoordinatesForMappedPositions(t,n){let i=t.cartographicPositions,o=t.cartographicBoundingRectangle,r=t.numPositions;return e._createTextureCoordinates(i,r,o,n)}static _createTextureCoordinates(t,n,i,o){let r=new Jt;Jt.fromRectangle(i,o,r);let a=e.createProjectedPositions(t,o),s=e.computeTexCoords(a,r);return e.createTypedArrayFromCartesians2(n,s)}static createTextureCoordinatesAttributeForMappedPositions(t,n){let i=e.createTextureCoordinatesForMappedPositions(t,n);return e.createTexCoordAttribute(i)}static createCartographicPositions(t,n,i){let o=zH.readAttributeAsTypedArray(t),r=t.type,a=st.getNumberOfComponents(r),s=e.createIterableCartesian3FromTypedArray(o,a),A=e.transformCartesians3(s,n);return e.transformToCartographic(A,i)}static createIterableCartesian3FromTypedArray(t,n){let i=new u,o=t.length/n;return{[Symbol.iterator]:function*(){for(let a=0;a<o;a++)i.x=t[a*n+0],i.y=t[a*n+1],i.z=t[a*n+2],yield i}}}static map(t,n){return{[Symbol.iterator]:function*(){for(let o of t)yield n(o)}}}static computeCartographicBoundingRectangle(t,n){c(n)||(n=new ce);let i=Number.NEGATIVE_INFINITY,o=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY,a=Number.POSITIVE_INFINITY;for(let s of t)i=Math.max(i,s.latitude),o=Math.min(o,s.latitude),r=Math.max(r,s.longitude),a=Math.min(a,s.longitude);return n.north=i,n.south=o,n.east=r,n.west=a,n}static transformCartesians3(t,n){let i=new u;return e.map(t,r=>(O.multiplyByPoint(n,r,i),i))}static transformToCartographic(t,n){let i=new ae;return e.map(t,r=>(n.cartesianToCartographic(r,i),i))}static createProjectedPositions(t,n){let i=new u;return e.map(t,r=>(n.project(r,i),i))}static computeTexCoords(t,n){let i=new U,o=1/n.width,r=1/n.height;return e.map(t,s=>{let A=(s.x-n.x)*o,l=(s.y-n.y)*r,f=Math.min(Math.max(A,0),1),h=Math.min(Math.max(l,0),1);return i.x=f,i.y=h,i})}static createTypedArrayFromCartesians2(t,n){let i=new Float32Array(t*2),o=0;for(let r of n)i[o*2+0]=r.x,i[o*2+1]=r.y,o++;return i}static createTexCoordAttribute(t){return{name:"Imagery Texture Coordinates",semantic:Pe.TEXCOORD,setIndex:0,componentDatatype:N.FLOAT,type:st.VEC2,normalized:!1,count:t.length/2,min:void 0,max:void 0,constant:new U(0,0),quantization:void 0,typedArray:t,byteOffset:0,byteStride:void 0}}},u0=BD;var xD=class{constructor(t,n,i,o){this._cartographicPositions=t,this._numPositions=n,this._cartographicBoundingRectangle=i,this._ellipsoid=o}get cartographicPositions(){return this._cartographicPositions}get numPositions(){return this._numPositions}get cartographicBoundingRectangle(){return this._cartographicBoundingRectangle}get ellipsoid(){return this._ellipsoid}},HH=xD;var TD=class e{constructor(t,n,i){this._model=t,this._runtimeNode=n,this._runtimePrimitive=i,this._mappedPositionsPerEllipsoid=void 0,this._mappedPositionsModelMatrix=new O,this._lastImageryLayersModificationCounter=0,this._imageryTexCoordAttributesPerProjection=void 0,this._currentImageryLayers=void 0,this._coveragesPerLayer=void 0,this._allImageriesReady=!1}coveragesForImageryLayer(t){let o=this._model.imageryLayers.indexOf(t);if(o===-1)throw new Ee("Imagery layer is not part of the model");let r=this._coveragesPerLayer;if(!c(r))throw new Ee("The coveragesPerLayer have not been computed yet");return r[o]}update(t){let n=this._model,r=n.content.tileset.imageryLayersModificationCounter;this._lastImageryLayersModificationCounter!==r&&(delete this._mappedPositionsPerEllipsoid,this._lastImageryLayersModificationCounter=r),this._mappedPositionsNeedUpdate&&(n.resetDrawCommands(),this._mappedPositionsPerEllipsoid=this._computeMappedPositionsPerEllipsoid(),this._deleteCoveragesPerLayer(),this._destroyImageryTexCoordAttributes()),c(this._imageryTexCoordAttributesPerProjection)||(this._imageryTexCoordAttributesPerProjection=this._computeImageryTexCoordsAttributesPerProjection(),this._uploadImageryTexCoordAttributes(t.context)),c(this._coveragesPerLayer)||(this._computeCoveragesPerLayer(),this._allImageriesReady=!1),this._allImageriesReady||this._updateImageries(t)}_deleteCoveragesPerLayer(){let t=this._coveragesPerLayer;if(!c(t))return;let n=this._currentImageryLayers,i=t.length;for(let o=0;o<i;o++){let r=n[o],a=t[o];this._deleteCoverages(r,a)}delete this._currentImageryLayers,delete this._coveragesPerLayer}_deleteCoverages(t,n){if(t.isDestroyed())return;let i=n.length;for(let o=0;o<i;o++)n[o].imagery.releaseReference()}_uploadImageryTexCoordAttributes(t){let n=this._imageryTexCoordAttributesPerProjection;if(!c(n))return;let i=n.length;for(let o=0;o<i;o++){let r=n[o],a=dt.createVertexBuffer({context:t,typedArray:r.typedArray,usage:Me.STATIC_DRAW});a.vertexArrayDestroyable=!1,r.buffer=a}}_destroyImageryTexCoordAttributes(){let t=this._imageryTexCoordAttributesPerProjection;if(!c(t))return;let n=t.length;for(let i=0;i<n;i++){let o=t[i];c(o)&&(c(o.buffer)&&(o.buffer.isDestroyed()||o.buffer.destroy()),t[i]=void 0)}delete this._imageryTexCoordAttributesPerProjection}get _mappedPositionsNeedUpdate(){if(!c(this._mappedPositionsPerEllipsoid))return!0;let t=this._model,n=this._mappedPositionsModelMatrix;return!O.equals(t.modelMatrix,n)}_computeMappedPositionsPerEllipsoid(){let t=this._model,n=this._runtimeNode,i=this._runtimePrimitive,o=e._obtainPrimitivePositionAttribute(i.primitive),r=o.count,a=e._computePrimitivePositionTransform(t,n,void 0),s=[],A=e._computeUniqueEllipsoids(t.imageryLayers),l=A.length;for(let f=0;f<l;f++){let h=A[f],m=u0.createCartographicPositions(o,a,h),p=u0.computeCartographicBoundingRectangle(m),g=new HH(m,r,p,h);s.push(g)}return O.clone(t.modelMatrix,this._mappedPositionsModelMatrix),s}static _computeUniqueEllipsoids(t){let n=new Set,i=t.length;for(let o=0;o<i;o++){let r=t.get(o),a=e._getEllipsoid(r);n.add(a)}return[...n]}_computeImageryTexCoordsAttributesPerProjection(){let n=this._model.imageryLayers,i=e._extractProjections(n),o=[...new Set(i)];return this._createImageryTexCoordAttributes(o)}static _extractProjections(t){let n=[],i=t.length;for(let o=0;o<i;o++){let r=t.get(o),a=e._getProjection(r);n.push(a)}return n}static _getProjection(t){return t.imageryProvider.tilingScheme.projection}_createImageryTexCoordAttributes(t){let n=[],i=t.length;for(let o=0;o<i;o++){let r=t[o],a=r.ellipsoid,s=this.mappedPositionsForEllipsoid(a),A=u0.createTextureCoordinatesAttributeForMappedPositions(s,r);n.push(A)}return n}_computeCoveragesPerLayer(){let t=[],n=[],o=this._model.imageryLayers,r=o.length;for(let a=0;a<r;a++){let s=o.get(a),A=this._computeCoverage(s);t.push(A),n.push(s)}this._coveragesPerLayer=t,this._currentImageryLayers=n}_computeCoverage(t){let i=this.mappedPositionsForImageryLayer(t).cartographicBoundingRectangle,o=this._computeImageryLevel(t,i);return yD.createImageryCoverages(i,t,o)}_computeImageryLevel(t,n){let i=t.imageryProvider,r=i.tilingScheme.rectangle,a=1,s=n.width,A=r.width;n.height>n.width&&(s=n.height,A=r.height);let l=Math.log2(a*A/s);return yD._clampImageryLevel(i,l)}_updateImageries(t){let n=this._model,i=this._coveragesPerLayer,o=i.length,r=!0;for(let a=0;a<o;a++){let s=i[a],A=s.length;for(let l=0;l<A;l++){let h=s[l].imagery;h.state===Pn.READY||h.state===Pn.FAILED||h.state===Pn.INVALID||(r=!1,h.processStateMachine(t,!1,!1))}}r&&n.resetDrawCommands(),this._allImageriesReady=r}mappedPositionsForImageryLayer(t){let n=e._getEllipsoid(t);return this.mappedPositionsForEllipsoid(n)}mappedPositionsForEllipsoid(t){let n=this._mappedPositionsPerEllipsoid;if(!c(n))throw new Ee("The mappedPositions have not been computed yet");let i=n.length;for(let o=0;o<i;o++){let r=n[o];if(r.ellipsoid===t)return r}throw new Ee(`Could not find mapped positions for ellipsoid ${t}`)}imageryTexCoordAttributesPerProjection(){let t=this._imageryTexCoordAttributesPerProjection;if(!c(t))throw new Ee("The imagery texture coordinate attributes have not been computed yet");return this._imageryTexCoordAttributesPerProjection}get ready(){let t=this._coveragesPerLayer;return c(t)?this._allImageriesReady:!1}isDestroyed(){return!1}destroy(){if(!this.isDestroyed())return this._deleteCoveragesPerLayer(),this._destroyImageryTexCoordAttributes(),pe(this)}static _computePrimitivePositionTransform(t,n,i){c(i)||(i=new O);let o=t.sceneGraph;return O.clone(O.IDENTITY,i),O.multiply(i,t.modelMatrix,i),O.multiply(i,o.components.transform,i),O.multiply(i,o.axisCorrectionMatrix,i),O.multiply(i,n.computedTransform,i),i}static _obtainPrimitivePositionAttribute(t){let n=tt.getAttributeBySemantic(t,"POSITION");if(!c(n))throw new Ee("The primitive does not have a POSITION attribute");return n}static _getEllipsoid(t){return t.imageryProvider.tilingScheme.projection.ellipsoid}},d0=TD;var SD=class{constructor(t,n,i,o,r){this.imageryLayer=t,this.texture=n,this.textureTranslationAndScale=i,this.textureCoordinateRectangle=o,this.imageryTexCoordAttributeSetIndex=r}},VH=SD;var p_e=!1,g_e=new ce,C_e=new ce,wD=class e{static process(t,n,i){let o=t.model,r=n.modelPrimitiveImagery;if(!c(r)||!r.ready)return;let a=o.imageryLayers,s=d0._extractProjections(a),A=[...new Set(s)],l=e._computeIndexMapping(s,A),f=e._createImageryInputs(a,r,l);if(f.length===0)return;f.length>10&&(jt("imagery-texture-units",`Warning: Draped imagery requires ${f.length} texture units, truncating`),f.length=10),e._addImageryTexCoordAttributesToRenderResources(r,t);let h=[];for(let m=0;m<a.length;m++)h.push(a.get(m));e._processImageryInputs(h,t,f,A.length)}static _addImageryTexCoordAttributesToRenderResources(t,n){let i=t.imageryTexCoordAttributesPerProjection();for(let o of i)e._addImageryTexCoordAttributeToRenderResources(o,n)}static _addImageryTexCoordAttributeToRenderResources(t,n){let i=st.getNumberOfComponents(t.type),o={index:n.attributeIndex++,value:c(t.buffer)?void 0:t.constant,vertexBuffer:t.buffer,count:t.count,componentsPerAttribute:i,componentDatatype:t.componentDatatype,offsetInBytes:t.byteOffset,strideInBytes:t.byteStride,normalize:t.normalized};n.attributes.push(o)}static _processImageryInputs(t,n,i,o){let r=n.shaderBuilder,a=e._computeImageryFlags(t),s=i.length;r.addDefine("HAS_IMAGERY"),r.addDefine(`IMAGERY_TEXTURE_UNITS ${s}`),e._addAttributes(r,o),e._defineUniforms(r,a),e._buildSampleAndBlendFunction(r,a),e._createMainImageryShader(r,i,a);let A=n.uniformMap,l=e._createImageryUniforms(i);e._setImageryUniforms(A,l)}static _addAttributes(t,n){for(let r=0;r<n;r++)t.addAttribute("vec2",`a_imagery_texCoord_${r}`),t.addVarying("vec2",`v_imagery_texCoord_${r}`);let i="initializeImageryAttributes",o=`void ${i}()`;t.addFunction(i,o,te.VERTEX);for(let r=0;r<n;r++)t.addFunctionLines(i,[`v_imagery_texCoord_${r} = a_imagery_texCoord_${r};`])}static _computeImageryFlags(t){let n=new UH;for(let i=0;i<t.length;i++){let o=t[i];n.alpha|=o.alpha!==1,n.brightness|=o.brightness!==wu.DEFAULT_BRIGHTNESS,n.contrast|=o.contrast!==wu.DEFAULT_CONTRAST,n.hue|=o.hue!==wu.DEFAULT_HUE,n.saturation|=o.saturation!==wu.DEFAULT_SATURATION,n.gamma|=o.gamma!==wu.DEFAULT_GAMMA;let r=c(o.colorToAlpha)&&o.colorToAlphaThreshold>0;n.colorToAlpha|=r}return n}static _defineUniforms(t,n){t.addUniform("sampler2D","u_imageryTextures[IMAGERY_TEXTURE_UNITS]",te.FRAGMENT),t.addUniform("vec4","u_imageryTextureCoordinateRectangle[IMAGERY_TEXTURE_UNITS]",te.FRAGMENT),t.addUniform("vec4","u_imageryTextureTranslationAndScale[IMAGERY_TEXTURE_UNITS]",te.FRAGMENT),n.alpha&&t.addUniform("float","u_imageryTextureAlpha[IMAGERY_TEXTURE_UNITS]",te.FRAGMENT),n.brightness&&t.addUniform("float","u_imageryTextureBrightness[IMAGERY_TEXTURE_UNITS]",te.FRAGMENT),n.contrast&&t.addUniform("float","u_imageryTextureContrast[IMAGERY_TEXTURE_UNITS]",te.FRAGMENT),n.hue&&t.addUniform("float","u_imageryTextureHue[IMAGERY_TEXTURE_UNITS]",te.FRAGMENT),n.saturation&&t.addUniform("float","u_imageryTextureSaturation[IMAGERY_TEXTURE_UNITS]",te.FRAGMENT),n.gamma&&t.addUniform("float","u_imageryTextureOneOverGamma[IMAGERY_TEXTURE_UNITS]",te.FRAGMENT),n.colorToAlpha&&t.addUniform("vec4","u_imageryTextureColorToAlpha[IMAGERY_TEXTURE_UNITS]",te.FRAGMENT)}static _createSampleAndBlendFunctionSignature(t){let n="sampleAndBlend",i=[];i.push("vec4 previousColor"),i.push("sampler2D textureToSample"),i.push("vec2 textureCoordinates"),i.push("vec4 textureCoordinateRectangle"),i.push("vec4 textureCoordinateTranslationAndScale"),t.alpha&&i.push("float textureAlpha"),t.brightness&&i.push("float textureBrightness"),t.contrast&&i.push("float textureContrast"),t.hue&&i.push("float textureHue"),t.saturation&&i.push("float textureSaturation"),t.gamma&&i.push("float textureOneOverGamma"),t.colorToAlpha&&i.push("vec4 colorToAlpha");let o=i.join(", ");return`vec4 ${n}(${o})`}static _buildSampleAndBlendFunction(t,n){let i="sampleAndBlend",o=e._createSampleAndBlendFunctionSignature(n);t.addFunction(i,o,te.FRAGMENT),t.addFunctionLines(i,["float effectiveAlpha = 1.0;"]),n.alpha&&t.addFunctionLines(i,["effectiveAlpha = textureAlpha;"]),t.addFunctionLines(i,["if (textureCoordinates.x < textureCoordinateRectangle.x) effectiveAlpha = 0.0;","if (textureCoordinates.x > textureCoordinateRectangle.z) effectiveAlpha = 0.0;","if (textureCoordinates.y < textureCoordinateRectangle.y) effectiveAlpha = 0.0;","if (textureCoordinates.y > textureCoordinateRectangle.w) effectiveAlpha = 0.0;","vec2 translation = textureCoordinateTranslationAndScale.xy;","vec2 scale = textureCoordinateTranslationAndScale.zw;","vec2 effectiveTextureCoordinates = textureCoordinates * scale + translation;","vec4 value = texture(textureToSample, effectiveTextureCoordinates);","value = czm_srgbToLinear(value);","vec3 color = value.rgb;","float alpha = value.a;"]),n.colorToAlpha&&t.addFunctionLines(i,["vec3 colorDiff = abs(color.rgb - colorToAlpha.rgb);","colorDiff.r = czm_maximumComponent(colorDiff);","alpha = czm_branchFreeTernary(colorDiff.r < colorToAlpha.a, 0.0, alpha);"]),n.gamma?t.addFunctionLines(i,["color = pow(color, vec3(textureOneOverGamma));"]):t.addFunctionLines(i,["vec4 tempColor = czm_gammaCorrect(vec4(color, alpha));","color = tempColor.rgb;","alpha = tempColor.a;"]),n.brightness&&t.addFunctionLines(i,["color = mix(vec3(0.0), color, textureBrightness);"]),n.contrast&&t.addFunctionLines(i,["color = mix(vec3(0.5), color, textureContrast);"]),n.hue&&t.addFunctionLines(i,["color = czm_hue(color, textureHue);"]),n.saturation&&t.addFunctionLines(i,["color = czm_saturation(color, textureSaturation);"]),t.addFunctionLines(i,["float sourceAlpha = alpha * effectiveAlpha;","float outAlpha = mix(previousColor.a, 1.0, sourceAlpha);","outAlpha += sign(outAlpha) - 1.0;","vec3 outColor = mix(previousColor.rgb * previousColor.a, color, sourceAlpha) / outAlpha;","vec4 result = vec4(outColor, max(outAlpha, 0.0));"]),p_e&&t.addFunctionLines(i,["if (abs(textureCoordinates.x - textureCoordinateRectangle.x) < (1.0/256.0) || ","    abs(textureCoordinates.x - textureCoordinateRectangle.z) < (1.0/256.0) || ","    abs(textureCoordinates.y - textureCoordinateRectangle.y) < (1.0/256.0) || ","    abs(textureCoordinates.y - textureCoordinateRectangle.w) < (1.0/256.0))","{","    result = vec4(1.0, 0.0, 0.0, effectiveAlpha);","}"]),t.addFunctionLines(i,["return result;"])}static _createSampleAndBlendCallArguments(t,n,i){let o=`v_imagery_texCoord_${n}`,r=[];return r.push("blendedBaseColor"),r.push(`u_imageryTextures[${i}]`),r.push(`${o}`),r.push(`u_imageryTextureCoordinateRectangle[${i}]`),r.push(`u_imageryTextureTranslationAndScale[${i}]`),t.alpha&&r.push(`u_imageryTextureAlpha[${i}]`),t.brightness&&r.push(`u_imageryTextureBrightness[${i}]`),t.contrast&&r.push(`u_imageryTextureContrast[${i}]`),t.hue&&r.push(`u_imageryTextureHue[${i}]`),t.saturation&&r.push(`u_imageryTextureSaturation[${i}]`),t.gamma&&r.push(`u_imageryTextureOneOverGamma[${i}]`),t.colorToAlpha&&r.push(`u_imageryTextureColorToAlpha[${i}]`),r.join(", ")}static _createMainImageryShader(t,n,i){let o="blendBaseColorWithImagery";t.addFunction(o,"vec4 blendBaseColorWithImagery(vec4 baseColorWithAlpha)",te.FRAGMENT),t.addFunctionLines(o,["vec4 blendedBaseColor = baseColorWithAlpha;"]);for(let r=0;r<n.length;r++){let s=n[r].imageryTexCoordAttributeSetIndex,A=e._createSampleAndBlendCallArguments(i,s,r);t.addFunctionLines(o,[`blendedBaseColor = sampleAndBlend(${A});`])}t.addFunctionLines(o,["return blendedBaseColor;"])}static _createImageryUniforms(t){let n=t.length,i={};i.imageryTextures=Array(n),i.imageryTextureCoordinateRectangle=Array(n),i.imageryTextureTranslationAndScale=Array(n),i.imageryTextureAlpha=Array(n),i.imageryTextureBrightness=Array(n),i.imageryTextureContrast=Array(n),i.imageryTextureHue=Array(n),i.imageryTextureSaturation=Array(n),i.imageryTextureOneOverGamma=Array(n),i.imageryTextureColorToAlpha=Array(n);for(let o=0;o<n;o++){let r=t[o],a=r.imageryLayer,s=r.texture,A=r.textureCoordinateRectangle,l=r.textureTranslationAndScale;i.imageryTextures[o]=s,i.imageryTextureTranslationAndScale[o]=l,i.imageryTextureCoordinateRectangle[o]=A,i.imageryTextureAlpha[o]=a.alpha,i.imageryTextureBrightness[o]=a.brightness,i.imageryTextureContrast[o]=a.contrast,i.imageryTextureHue[o]=a.hue,i.imageryTextureSaturation[o]=a.saturation,i.imageryTextureOneOverGamma[o]=1/a.gamma;let f=i.imageryTextureColorToAlpha[o];if(c(f)||(f=new se,i.imageryTextureColorToAlpha[o]=f),c(a.colorToAlpha)&&a.colorToAlphaThreshold>0){let m=a.colorToAlpha;f.x=m.red,f.y=m.green,f.z=m.blue,f.w=a.colorToAlphaThreshold}else f.w=-1}return i}static _setImageryUniforms(t,n){for(let i in n)if(n.hasOwnProperty(i)){let o=`u_${i}`;t[o]=function(){return n[i]}}}static _createImageryInputs(t,n,i){let o=[];for(let r=0;r<t.length;r++){let a=t.get(r);if(!a.show)continue;let s=i[r],l=n.mappedPositionsForImageryLayer(a).cartographicBoundingRectangle,f=n.coveragesForImageryLayer(a);for(let h=0;h<f.length;h++){let m=f[h],p=e._createImageryInput(a,m,l,s);c(p)&&o.push(p)}}return o}static _createImageryInput(t,n,i,o){let r=n.imagery;if(r.state===Pn.FAILED||r.state===Pn.INVALID)return;let a=r.textureWebMercator;if(!c(a)&&(a=r.texture,!c(a))){r.state===Pn.READY&&console.log(`Imagery at ${n.x}, ${n.y} (level ${n.level}) does not have any texture - state ${r.state}`);return}let s=e._computeTextureTranslationAndScale(t,i,r.rectangle),A=n.textureCoordinateRectangle,l=new se(A.minX,A.minY,A.maxX,A.maxY);return new VH(t,a,s,l,o)}static _computeTextureTranslationAndScale(t,n,i){let o=t.imageryProvider.tilingScheme,r=o.rectangleToNativeRectangle(n,g_e),a=o.rectangleToNativeRectangle(i,C_e);return e._computeTextureTranslationAndScaleFromNative(r,a)}static _computeTextureTranslationAndScaleFromNative(t,n){let i=1/n.width,o=1/n.height,r=t.west-n.west,a=t.south-n.south,s=r*i,A=a*o,l=t.width*i,f=t.height*o;return new se(s,A,l,f)}static _computeIndexMapping(t,n){let i=[],o=t.length;for(let r=0;r<o;r++){let a=t[r],s=n.indexOf(a);i.push(s)}return i}},jH=wD;var YH=`#ifdef USE_IBL_LIGHTING
vec3 computeIBL(vec3 position, vec3 normal, vec3 lightDirection, vec3 lightColorHdr, czm_modelMaterial material)
{
    #if defined(DIFFUSE_IBL) || defined(SPECULAR_IBL)
        // Environment maps were provided, use them for IBL
        vec3 viewDirection = -normalize(position);
        vec3 iblColor = textureIBL(viewDirection, normal, material);
        return iblColor;
    #endif
    
    return vec3(0.0);
}
#endif

#ifdef USE_CLEARCOAT
vec3 addClearcoatReflection(vec3 baseLayerColor, vec3 position, vec3 lightDirection, vec3 lightColorHdr, czm_modelMaterial material)
{
    vec3 viewDirection = -normalize(position);
    vec3 halfwayDirection = normalize(viewDirection + lightDirection);
    vec3 normal = material.clearcoatNormal;
    float NdotL = clamp(dot(normal, lightDirection), 0.001, 1.0);

    // clearcoatF0 = vec3(pow((ior - 1.0) / (ior + 1.0), 2.0)), but without KHR_materials_ior, ior is a constant 1.5.
    vec3 f0 = vec3(0.04);
    vec3 f90 = vec3(1.0);
    // Note: clearcoat Fresnel computed with dot(n, v) instead of dot(v, h).
    // This is to make it energy conserving with a simple layering function.
    float NdotV = clamp(dot(normal, viewDirection), 0.0, 1.0);
    vec3 F = fresnelSchlick2(f0, f90, NdotV);

    // compute specular reflection from direct lighting
    float roughness = material.clearcoatRoughness;
    float alphaRoughness = roughness * roughness;
    float directStrength = computeDirectSpecularStrength(normal, lightDirection, viewDirection, halfwayDirection, alphaRoughness);
    vec3 directReflection = F * directStrength * NdotL;
    vec3 color = lightColorHdr * directReflection;

    #ifdef SPECULAR_IBL
        // Find the direction in which to sample the environment map
        vec3 reflectMC = normalize(model_iblReferenceFrameMatrix * reflect(-viewDirection, normal));
        vec3 iblColor = computeSpecularIBL(reflectMC, NdotV, f0, roughness);
        color += iblColor * material.occlusion;
    #endif

    float clearcoatFactor = material.clearcoatFactor;
    vec3 clearcoatColor = color * clearcoatFactor;

    // Dim base layer based on transmission loss through clearcoat
    return baseLayerColor * (1.0 - clearcoatFactor * F) + clearcoatColor;
}
#endif

#if defined(LIGHTING_PBR) && defined(HAS_NORMALS)
vec3 computePbrLighting(in czm_modelMaterial material, in vec3 position)
{
    #ifdef USE_CUSTOM_LIGHT_COLOR
        vec3 lightColorHdr = model_lightColorHdr;
    #else
        vec3 lightColorHdr = czm_lightColorHdr;
    #endif

    vec3 viewDirection = -normalize(position);
    vec3 normal = material.normalEC;
    vec3 lightDirection = normalize(czm_lightDirectionEC);

    vec3 directLighting = czm_pbrLighting(viewDirection, normal, lightDirection, material);
    vec3 directColor = lightColorHdr * directLighting;

    // Accumulate colors from base layer
    vec3 color = directColor + material.emissive;
    #ifdef USE_IBL_LIGHTING
        color += computeIBL(position, normal, lightDirection, lightColorHdr, material);
    #endif

    #ifdef USE_CLEARCOAT
        color = addClearcoatReflection(color, position, lightDirection, lightColorHdr, material);
    #endif

    return color;
}
#endif

/**
 * Compute the material color under the current lighting conditions.
 * All other material properties are passed through so further stages
 * have access to them.
 *
 * @param {czm_modelMaterial} material The material properties from {@MaterialStageFS}
 * @param {ProcessedAttributes} attributes
 */
void lightingStage(inout czm_modelMaterial material, ProcessedAttributes attributes)
{
    #ifdef LIGHTING_PBR
        #ifdef HAS_NORMALS
            vec3 color = computePbrLighting(material, attributes.positionEC);
        #else
            vec3 color = material.diffuse * material.occlusion + material.emissive;
        #endif
        // In HDR mode, the frame buffer is in linear color space. The
        // post-processing stages (see PostProcessStageCollection) will handle
        // tonemapping. However, if HDR is not enabled, we must tonemap else large
        // values may be clamped to 1.0
        #ifndef HDR
            color = czm_pbrNeutralTonemapping(color);
        #endif
    #else // unlit
        vec3 color = material.diffuse;
    #endif

    #ifdef HAS_POINT_CLOUD_COLOR_STYLE
        // The colors resulting from point cloud styles are adjusted differently.
        color = czm_gammaCorrect(color);
    #elif !defined(HDR)
        // If HDR is not enabled, the frame buffer stores sRGB colors rather than
        // linear colors so the linear value must be converted.
        color = czm_linearToSrgb(color);
    #endif

    material.diffuse = color;
}
`;var __e={UNLIT:0,PBR:1},ih=Object.freeze(__e);var qH={name:"LightingPipelineStage"};qH.process=function(e,t){let{model:n,lightingOptions:i,shaderBuilder:o}=e;if(c(n.lightColor)){o.addDefine("USE_CUSTOM_LIGHT_COLOR",void 0,te.FRAGMENT),o.addUniform("vec3","model_lightColorHdr",te.FRAGMENT);let a=e.uniformMap;a.model_lightColorHdr=function(){return n.lightColor}}let{lightingModel:r}=i;r===ih.PBR?o.addDefine("LIGHTING_PBR",void 0,te.FRAGMENT):o.addDefine("LIGHTING_UNLIT",void 0,te.FRAGMENT),o.addFragmentLines(YH)};var WH=qH;var JH=`// If the style color is white, it implies the feature has not been styled.
bool isDefaultStyleColor(vec3 color)
{
    return all(greaterThan(color, vec3(1.0 - czm_epsilon3)));
}

vec3 blend(vec3 sourceColor, vec3 styleColor, float styleColorBlend)
{
    vec3 blendColor = mix(sourceColor, styleColor, styleColorBlend);
    vec3 color = isDefaultStyleColor(styleColor.rgb) ? sourceColor : blendColor;
    return color;
}

vec2 computeTextureTransform(vec2 texCoord, mat3 textureTransform)
{
    return vec2(textureTransform * vec3(texCoord, 1.0));
}

#ifdef HAS_NORMAL_TEXTURE
vec2 getNormalTexCoords()
{
    vec2 texCoord = TEXCOORD_NORMAL;
    #ifdef HAS_NORMAL_TEXTURE_TRANSFORM
        texCoord = vec2(u_normalTextureTransform * vec3(texCoord, 1.0));
    #endif
    return texCoord;
}
#endif

#if defined(HAS_NORMAL_TEXTURE) || defined(HAS_CLEARCOAT_NORMAL_TEXTURE)
vec3 computeTangent(in vec3 position, in vec2 normalTexCoords)
{
    vec2 tex_dx = dFdx(normalTexCoords);
    vec2 tex_dy = dFdy(normalTexCoords);
    float determinant = tex_dx.x * tex_dy.y - tex_dy.x * tex_dx.y;
    vec3 tangent = tex_dy.t * dFdx(position) - tex_dx.t * dFdy(position);
    return tangent / determinant;
}
#endif

#ifdef USE_ANISOTROPY
struct NormalInfo {
    vec3 tangent;
    vec3 bitangent;
    vec3 normal;
    vec3 geometryNormal;
};

NormalInfo getNormalInfo(ProcessedAttributes attributes)
{
    vec3 geometryNormal = attributes.normalEC;
    #ifdef HAS_NORMAL_TEXTURE
        vec2 normalTexCoords = getNormalTexCoords();
    #endif

    #ifdef HAS_BITANGENTS
        vec3 tangent = attributes.tangentEC;
        vec3 bitangent = attributes.bitangentEC;
    #else // Assume HAS_NORMAL_TEXTURE
        vec3 tangent = computeTangent(attributes.positionEC, normalTexCoords);
        tangent = normalize(tangent - geometryNormal * dot(geometryNormal, tangent));
        vec3 bitangent = normalize(cross(geometryNormal, tangent));
    #endif

    #ifdef HAS_NORMAL_TEXTURE
        mat3 tbn = mat3(tangent, bitangent, geometryNormal);
        vec3 normalSample = texture(u_normalTexture, normalTexCoords).rgb;
        normalSample = 2.0 * normalSample - 1.0;
        #ifdef HAS_NORMAL_TEXTURE_SCALE
            normalSample.xy *= u_normalTextureScale;
        #endif
        vec3 normal = normalize(tbn * normalSample);
    #else
        vec3 normal = geometryNormal;
    #endif

    #ifdef HAS_DOUBLE_SIDED_MATERIAL
        if (czm_backFacing()) {
            tangent *= -1.0;
            bitangent *= -1.0;
            normal *= -1.0;
            geometryNormal *= -1.0;
        }
    #endif

    NormalInfo normalInfo;
    normalInfo.tangent = tangent;
    normalInfo.bitangent = bitangent;
    normalInfo.normal = normal;
    normalInfo.geometryNormal = geometryNormal;

    return normalInfo;
}
#endif

#if defined(HAS_NORMAL_TEXTURE) && !defined(HAS_WIREFRAME)
vec3 getNormalFromTexture(ProcessedAttributes attributes, vec3 geometryNormal)
{
    vec2 normalTexCoords = getNormalTexCoords();

    // If HAS_BITANGENTS is set, then HAS_TANGENTS is also set
    #ifdef HAS_BITANGENTS
        vec3 t = attributes.tangentEC;
        vec3 b = attributes.bitangentEC;
    #else
        vec3 t = computeTangent(attributes.positionEC, normalTexCoords);
        t = normalize(t - geometryNormal * dot(geometryNormal, t));
        vec3 b = normalize(cross(geometryNormal, t));
    #endif

    mat3 tbn = mat3(t, b, geometryNormal);
    vec3 normalSample = texture(u_normalTexture, normalTexCoords).rgb;
    normalSample = 2.0 * normalSample - 1.0;
    #ifdef HAS_NORMAL_TEXTURE_SCALE
        normalSample.xy *= u_normalTextureScale;
    #endif
    return normalize(tbn * normalSample);
}
#endif

#ifdef HAS_CLEARCOAT_NORMAL_TEXTURE
vec3 getClearcoatNormalFromTexture(ProcessedAttributes attributes, vec3 geometryNormal)
{
    vec2 normalTexCoords = TEXCOORD_CLEARCOAT_NORMAL;
    #ifdef HAS_CLEARCOAT_NORMAL_TEXTURE_TRANSFORM
        normalTexCoords = vec2(u_clearcoatNormalTextureTransform * vec3(normalTexCoords, 1.0));
    #endif

    // If HAS_BITANGENTS is set, then HAS_TANGENTS is also set
    #ifdef HAS_BITANGENTS
        vec3 t = attributes.tangentEC;
        vec3 b = attributes.bitangentEC;
    #else
        vec3 t = computeTangent(attributes.positionEC, normalTexCoords);
        t = normalize(t - geometryNormal * dot(geometryNormal, t));
        vec3 b = normalize(cross(geometryNormal, t));
    #endif

    mat3 tbn = mat3(t, b, geometryNormal);
    vec3 normalSample = texture(u_clearcoatNormalTexture, normalTexCoords).rgb;
    normalSample = 2.0 * normalSample - 1.0;
    #ifdef HAS_CLEARCOAT_NORMAL_TEXTURE_SCALE
        normalSample.xy *= u_clearcoatNormalTextureScale;
    #endif
    return normalize(tbn * normalSample);
}
#endif

#ifdef HAS_NORMALS
vec3 computeNormal(ProcessedAttributes attributes)
{
    // Geometry normal. This is already normalized 
    vec3 normal = attributes.normalEC;

    #if defined(HAS_NORMAL_TEXTURE) && !defined(HAS_WIREFRAME)
        normal = getNormalFromTexture(attributes, normal);
    #endif

    #ifdef HAS_DOUBLE_SIDED_MATERIAL
        if (czm_backFacing()) {
            normal = -normal;
        }
    #endif

    return normal;
}
#endif

#ifdef HAS_BASE_COLOR_TEXTURE
vec4 getBaseColorFromTexture()
{
    vec2 baseColorTexCoords = TEXCOORD_BASE_COLOR;
    #ifdef HAS_BASE_COLOR_TEXTURE_TRANSFORM
        baseColorTexCoords = computeTextureTransform(baseColorTexCoords, u_baseColorTextureTransform);
    #endif

    vec4 baseColorWithAlpha = czm_srgbToLinear(texture(u_baseColorTexture, baseColorTexCoords));

    #ifdef HAS_BASE_COLOR_FACTOR
        baseColorWithAlpha *= u_baseColorFactor;
    #endif

    return baseColorWithAlpha;
}
#endif

#ifdef HAS_EMISSIVE_TEXTURE
vec3 getEmissiveFromTexture()
{
    vec2 emissiveTexCoords = TEXCOORD_EMISSIVE;
    #ifdef HAS_EMISSIVE_TEXTURE_TRANSFORM
        emissiveTexCoords = computeTextureTransform(emissiveTexCoords, u_emissiveTextureTransform);
    #endif

    vec3 emissive = czm_srgbToLinear(texture(u_emissiveTexture, emissiveTexCoords).rgb);
    #ifdef HAS_EMISSIVE_FACTOR
        emissive *= u_emissiveFactor;
    #endif

    return emissive;
}
#endif

#if defined(LIGHTING_PBR) && defined(USE_SPECULAR_GLOSSINESS)
void setSpecularGlossiness(inout czm_modelMaterial material)
{
    #ifdef HAS_SPECULAR_GLOSSINESS_TEXTURE
        vec2 specularGlossinessTexCoords = TEXCOORD_SPECULAR_GLOSSINESS;
        #ifdef HAS_SPECULAR_GLOSSINESS_TEXTURE_TRANSFORM
            specularGlossinessTexCoords = computeTextureTransform(specularGlossinessTexCoords, u_specularGlossinessTextureTransform);
        #endif

        vec4 specularGlossiness = czm_srgbToLinear(texture(u_specularGlossinessTexture, specularGlossinessTexCoords));
        vec3 specular = specularGlossiness.rgb;
        float glossiness = specularGlossiness.a;
        #ifdef HAS_LEGACY_SPECULAR_FACTOR
            specular *= u_legacySpecularFactor;
        #endif

        #ifdef HAS_GLOSSINESS_FACTOR
            glossiness *= u_glossinessFactor;
        #endif
    #else
        #ifdef HAS_LEGACY_SPECULAR_FACTOR
            vec3 specular = clamp(u_legacySpecularFactor, vec3(0.0), vec3(1.0));
        #else
            vec3 specular = vec3(1.0);
        #endif

        #ifdef HAS_GLOSSINESS_FACTOR
            float glossiness = clamp(u_glossinessFactor, 0.0, 1.0);
        #else
            float glossiness = 1.0;
        #endif
    #endif

    #ifdef HAS_DIFFUSE_TEXTURE
        vec2 diffuseTexCoords = TEXCOORD_DIFFUSE;
        #ifdef HAS_DIFFUSE_TEXTURE_TRANSFORM
            diffuseTexCoords = computeTextureTransform(diffuseTexCoords, u_diffuseTextureTransform);
        #endif

        vec4 diffuse = czm_srgbToLinear(texture(u_diffuseTexture, diffuseTexCoords));
        #ifdef HAS_DIFFUSE_FACTOR
            diffuse *= u_diffuseFactor;
        #endif
    #elif defined(HAS_DIFFUSE_FACTOR)
        vec4 diffuse = clamp(u_diffuseFactor, vec4(0.0), vec4(1.0));
    #else
        vec4 diffuse = vec4(1.0);
    #endif

    material.diffuse = diffuse.rgb * (1.0 - czm_maximumComponent(specular));
    // the specular glossiness extension's alpha overrides anything set
    // by the base material.
    material.alpha = diffuse.a;

    material.specular = specular;

    // glossiness is the opposite of roughness, but easier for artists to use.
    material.roughness = 1.0 - glossiness;
}
#elif defined(LIGHTING_PBR)
float setMetallicRoughness(inout czm_modelMaterial material)
{
    #ifdef HAS_METALLIC_ROUGHNESS_TEXTURE
        vec2 metallicRoughnessTexCoords = TEXCOORD_METALLIC_ROUGHNESS;
        #ifdef HAS_METALLIC_ROUGHNESS_TEXTURE_TRANSFORM
            metallicRoughnessTexCoords = computeTextureTransform(metallicRoughnessTexCoords, u_metallicRoughnessTextureTransform);
        #endif

        vec3 metallicRoughness = texture(u_metallicRoughnessTexture, metallicRoughnessTexCoords).rgb;
        float metalness = clamp(metallicRoughness.b, 0.0, 1.0);
        float roughness = clamp(metallicRoughness.g, 0.0, 1.0);
        #ifdef HAS_METALLIC_FACTOR
            metalness = clamp(metalness * u_metallicFactor, 0.0, 1.0);
        #endif

        #ifdef HAS_ROUGHNESS_FACTOR
            roughness = clamp(roughness * u_roughnessFactor, 0.0, 1.0);
        #endif
    #else
        #ifdef HAS_METALLIC_FACTOR
            float metalness = clamp(u_metallicFactor, 0.0, 1.0);
        #else
            float metalness = 1.0;
        #endif

        #ifdef HAS_ROUGHNESS_FACTOR
            float roughness = clamp(u_roughnessFactor, 0.0, 1.0);
        #else
            float roughness = 1.0;
        #endif
    #endif

    // dielectrics use f0 = 0.04, metals use albedo as f0
    const vec3 REFLECTANCE_DIELECTRIC = vec3(0.04);
    vec3 f0 = mix(REFLECTANCE_DIELECTRIC, material.baseColor.rgb, metalness);

    material.specular = f0;

    // diffuse only applies to dielectrics.
    material.diffuse = mix(material.baseColor.rgb, vec3(0.0), metalness);

    // This is perceptual roughness. The square of this value is used for direct lighting
    material.roughness = roughness;

    return metalness;
}
#ifdef USE_SPECULAR
void setSpecular(inout czm_modelMaterial material, in float metalness)
{
    #ifdef HAS_SPECULAR_TEXTURE
        vec2 specularTexCoords = TEXCOORD_SPECULAR;
        #ifdef HAS_SPECULAR_TEXTURE_TRANSFORM
            specularTexCoords = computeTextureTransform(specularTexCoords, u_specularTextureTransform);
        #endif
        float specularWeight = texture(u_specularTexture, specularTexCoords).a;
        #ifdef HAS_SPECULAR_FACTOR
            specularWeight *= u_specularFactor;
        #endif
    #else
        #ifdef HAS_SPECULAR_FACTOR
            float specularWeight = u_specularFactor;
        #else
            float specularWeight = 1.0;
        #endif
    #endif

    #ifdef HAS_SPECULAR_COLOR_TEXTURE
        vec2 specularColorTexCoords = TEXCOORD_SPECULAR_COLOR;
        #ifdef HAS_SPECULAR_COLOR_TEXTURE_TRANSFORM
            specularColorTexCoords = computeTextureTransform(specularColorTexCoords, u_specularColorTextureTransform);
        #endif
        vec3 specularColorSample = texture(u_specularColorTexture, specularColorTexCoords).rgb;
        vec3 specularColorFactor = czm_srgbToLinear(specularColorSample);
        #ifdef HAS_SPECULAR_COLOR_FACTOR
            specularColorFactor *= u_specularColorFactor;
        #endif
    #else
        #ifdef HAS_SPECULAR_COLOR_FACTOR
            vec3 specularColorFactor = u_specularColorFactor;
        #else
            vec3 specularColorFactor = vec3(1.0);
        #endif
    #endif
    material.specularWeight = specularWeight;
    vec3 f0 = material.specular;
    vec3 dielectricSpecularF0 = min(f0 * specularColorFactor, vec3(1.0));
    material.specular = mix(dielectricSpecularF0, material.baseColor.rgb, metalness);
}
#endif
#ifdef USE_ANISOTROPY
void setAnisotropy(inout czm_modelMaterial material, in NormalInfo normalInfo)
{
    mat2 rotation = mat2(u_anisotropy.xy, -u_anisotropy.y, u_anisotropy.x);
    float anisotropyStrength = u_anisotropy.z;

    vec2 direction = vec2(1.0, 0.0);
    #ifdef HAS_ANISOTROPY_TEXTURE
        vec2 anisotropyTexCoords = TEXCOORD_ANISOTROPY;
        #ifdef HAS_ANISOTROPY_TEXTURE_TRANSFORM
            anisotropyTexCoords = computeTextureTransform(anisotropyTexCoords, u_anisotropyTextureTransform);
        #endif
        vec3 anisotropySample = texture(u_anisotropyTexture, anisotropyTexCoords).rgb;
        direction = anisotropySample.rg * 2.0 - vec2(1.0);
        anisotropyStrength *= anisotropySample.b;
    #endif

    direction = rotation * direction;
    mat3 tbn = mat3(normalInfo.tangent, normalInfo.bitangent, normalInfo.normal);
    vec3 anisotropicT = tbn * normalize(vec3(direction, 0.0));
    vec3 anisotropicB = cross(normalInfo.geometryNormal, anisotropicT);

    material.anisotropicT = anisotropicT;
    material.anisotropicB = anisotropicB;
    material.anisotropyStrength = anisotropyStrength;
}
#endif
#ifdef USE_CLEARCOAT
void setClearcoat(inout czm_modelMaterial material, in ProcessedAttributes attributes)
{
    #ifdef HAS_CLEARCOAT_TEXTURE
        vec2 clearcoatTexCoords = TEXCOORD_CLEARCOAT;
        #ifdef HAS_CLEARCOAT_TEXTURE_TRANSFORM
            clearcoatTexCoords = computeTextureTransform(clearcoatTexCoords, u_clearcoatTextureTransform);
        #endif
        float clearcoatFactor = texture(u_clearcoatTexture, clearcoatTexCoords).r;
        #ifdef HAS_CLEARCOAT_FACTOR
            clearcoatFactor *= u_clearcoatFactor;
        #endif
    #else
        #ifdef HAS_CLEARCOAT_FACTOR
            float clearcoatFactor = u_clearcoatFactor;
        #else
            // PERFORMANCE_IDEA: this case should turn the whole extension off
            float clearcoatFactor = 0.0;
        #endif
    #endif

    #ifdef HAS_CLEARCOAT_ROUGHNESS_TEXTURE
        vec2 clearcoatRoughnessTexCoords = TEXCOORD_CLEARCOAT_ROUGHNESS;
        #ifdef HAS_CLEARCOAT_ROUGHNESS_TEXTURE_TRANSFORM
            clearcoatRoughnessTexCoords = computeTextureTransform(clearcoatRoughnessTexCoords, u_clearcoatRoughnessTextureTransform);
        #endif
        float clearcoatRoughness = texture(u_clearcoatRoughnessTexture, clearcoatRoughnessTexCoords).g;
        #ifdef HAS_CLEARCOAT_ROUGHNESS_FACTOR
            clearcoatRoughness *= u_clearcoatRoughnessFactor;
        #endif
    #else
        #ifdef HAS_CLEARCOAT_ROUGHNESS_FACTOR
            float clearcoatRoughness = u_clearcoatRoughnessFactor;
        #else
            float clearcoatRoughness = 0.0;
        #endif
    #endif

    material.clearcoatFactor = clearcoatFactor;
    // This is perceptual roughness. The square of this value is used for direct lighting
    material.clearcoatRoughness = clearcoatRoughness;
    #ifdef HAS_CLEARCOAT_NORMAL_TEXTURE
        material.clearcoatNormal = getClearcoatNormalFromTexture(attributes, attributes.normalEC);
    #else
        material.clearcoatNormal = attributes.normalEC;
    #endif
}
#endif
#endif

void materialStage(inout czm_modelMaterial material, ProcessedAttributes attributes, SelectedFeature feature)
{
    #ifdef USE_ANISOTROPY
        NormalInfo normalInfo = getNormalInfo(attributes);
        material.normalEC = normalInfo.normal;
    #elif defined(HAS_NORMALS)
        material.normalEC = computeNormal(attributes);
    #endif

    vec4 baseColorWithAlpha = vec4(1.0);
    // Regardless of whether we use PBR, set a base color
    #ifdef HAS_BASE_COLOR_TEXTURE
        baseColorWithAlpha = getBaseColorFromTexture();
    #elif defined(HAS_BASE_COLOR_FACTOR)
        baseColorWithAlpha = u_baseColorFactor;
    #endif

    #ifdef HAS_IMAGERY
    baseColorWithAlpha = blendBaseColorWithImagery(baseColorWithAlpha);
    #endif // HAS_IMAGERY

    #ifdef HAS_POINT_CLOUD_COLOR_STYLE
        baseColorWithAlpha = v_pointCloudColor;
    #elif defined(HAS_COLOR_0)
        vec4 color = attributes.color_0;
        // .pnts files store colors in the sRGB color space
        #ifdef HAS_SRGB_COLOR
            color = czm_srgbToLinear(color);
        #endif
        baseColorWithAlpha *= color;
    #endif

    #ifdef USE_CPU_STYLING
        baseColorWithAlpha.rgb = blend(baseColorWithAlpha.rgb, feature.color.rgb, model_colorBlend);
    #endif
    material.baseColor = baseColorWithAlpha;
    material.diffuse = baseColorWithAlpha.rgb;
    material.alpha = baseColorWithAlpha.a;

    #ifdef HAS_OCCLUSION_TEXTURE
        vec2 occlusionTexCoords = TEXCOORD_OCCLUSION;
        #ifdef HAS_OCCLUSION_TEXTURE_TRANSFORM
            occlusionTexCoords = computeTextureTransform(occlusionTexCoords, u_occlusionTextureTransform);
        #endif
        material.occlusion = texture(u_occlusionTexture, occlusionTexCoords).r;
    #endif

    #ifdef HAS_EMISSIVE_TEXTURE
        material.emissive = getEmissiveFromTexture();
    #elif defined(HAS_EMISSIVE_FACTOR)
        material.emissive = u_emissiveFactor;
    #endif

    #if defined(LIGHTING_PBR) && defined(USE_SPECULAR_GLOSSINESS)
        setSpecularGlossiness(material);
    #elif defined(LIGHTING_PBR)
        float metalness = setMetallicRoughness(material);
        #ifdef USE_SPECULAR
            setSpecular(material, metalness);
        #endif
        #ifdef USE_ANISOTROPY
            setAnisotropy(material, normalInfo);
        #endif
        #ifdef USE_CLEARCOAT
            setClearcoat(material, attributes);
        #endif
    #endif
}
`;var{Material:E_e,MetallicRoughness:DD,SpecularGlossiness:QD,Specular:KH,Clearcoat:XH}=Lt,ZH={name:"MaterialPipelineStage",_processTexture:Ra,_processTextureTransform:$H};ZH.process=function(e,t,n){let i=t.material,{model:o,uniformMap:r,shaderBuilder:a}=e,s=c(o.classificationType),A=s,{defaultTexture:l,defaultNormalTexture:f,defaultEmissiveTexture:h}=n.context;y_e(i,r,a,l,f,h,A),c(i.specularGlossiness)?b_e(i.specularGlossiness,r,a,l,A):(c(i.specular)&&tt.supportedExtensions.KHR_materials_specular&&B_e(i.specular,r,a,l,A),c(i.anisotropy)&&tt.supportedExtensions.KHR_materials_anisotropy&&T_e(i.anisotropy,r,a,l,A),c(i.clearcoat)&&tt.supportedExtensions.KHR_materials_clearcoat&&S_e(i.clearcoat,r,a,l,A),w_e(i.metallicRoughness,r,a,l,A));let m=tt.getAttributeBySemantic(t,Pe.NORMAL),p=c(o.pointCloudShading)&&!o.pointCloudShading.normalShading,g=e.lightingOptions;i.unlit||!m||s||p?g.lightingModel=ih.UNLIT:g.lightingModel=ih.PBR;let C=o.backFaceCulling&&!i.doubleSided;e.renderStateOptions.cull.enabled=C;let _=e.alphaOptions;i.alphaMode===Wd.BLEND?_.pass=Ye.TRANSLUCENT:i.alphaMode===Wd.MASK&&(_.alphaCutoff=i.alphaCutoff),a.addFragmentLines(JH),i.doubleSided&&a.addDefine("HAS_DOUBLE_SIDED_MATERIAL",void 0,te.BOTH)};function $H(e,t,n,i,o){let r=`HAS_${o}_TEXTURE_TRANSFORM`;e.addDefine(r,void 0,te.FRAGMENT);let a=`${i}Transform`;e.addUniform("mat3",a,te.FRAGMENT),t[a]=function(){return n.transform}}function I_e(e,t,n,i,o){let r=`HAS_${o}_TEXTURE_SCALE`;e.addDefine(r,void 0,te.FRAGMENT);let a=`${i}Scale`;e.addUniform("float",a,te.FRAGMENT),t[a]=function(){return n.scale}}function Ra(e,t,n,i,o,r){e.addUniform("sampler2D",i,te.FRAGMENT),t[i]=function(){return n.texture??r};let a=`HAS_${o}_TEXTURE`;e.addDefine(a,void 0,te.FRAGMENT);let A=`v_texCoord_${n.texCoord}`,l=`TEXCOORD_${o}`;e.addDefine(l,A,te.FRAGMENT);let f=n.transform;c(f)&&!J.equals(f,J.IDENTITY)&&$H(e,t,n,i,o);let{scale:h}=n;c(h)&&h!==1&&I_e(e,t,n,i,o)}function y_e(e,t,n,i,o,r,a){let{emissiveFactor:s,emissiveTexture:A,normalTexture:l,occlusionTexture:f}=e;c(s)&&!u.equals(s,E_e.DEFAULT_EMISSIVE_FACTOR)&&(n.addUniform("vec3","u_emissiveFactor",te.FRAGMENT),t.u_emissiveFactor=function(){return e.emissiveFactor},n.addDefine("HAS_EMISSIVE_FACTOR",void 0,te.FRAGMENT),c(A)&&!a&&Ra(n,t,A,"u_emissiveTexture","EMISSIVE",r)),c(l)&&!a&&Ra(n,t,l,"u_normalTexture","NORMAL",o),c(f)&&!a&&Ra(n,t,f,"u_occlusionTexture","OCCLUSION",i)}function b_e(e,t,n,i,o){let{diffuseTexture:r,diffuseFactor:a,specularGlossinessTexture:s,specularFactor:A,glossinessFactor:l}=e;n.addDefine("USE_SPECULAR_GLOSSINESS",void 0,te.FRAGMENT),c(r)&&!o&&Ra(n,t,r,"u_diffuseTexture","DIFFUSE",i),c(a)&&!se.equals(a,QD.DEFAULT_DIFFUSE_FACTOR)&&(n.addUniform("vec4","u_diffuseFactor",te.FRAGMENT),t.u_diffuseFactor=function(){return e.diffuseFactor},n.addDefine("HAS_DIFFUSE_FACTOR",void 0,te.FRAGMENT)),c(s)&&!o&&Ra(n,t,s,"u_specularGlossinessTexture","SPECULAR_GLOSSINESS",i),c(A)&&!u.equals(A,QD.DEFAULT_SPECULAR_FACTOR)&&(n.addUniform("vec3","u_legacySpecularFactor",te.FRAGMENT),t.u_legacySpecularFactor=function(){return e.specularFactor},n.addDefine("HAS_LEGACY_SPECULAR_FACTOR",void 0,te.FRAGMENT)),c(l)&&l!==QD.DEFAULT_GLOSSINESS_FACTOR&&(n.addUniform("float","u_glossinessFactor",te.FRAGMENT),t.u_glossinessFactor=function(){return e.glossinessFactor},n.addDefine("HAS_GLOSSINESS_FACTOR",void 0,te.FRAGMENT))}function B_e(e,t,n,i,o){let{specularTexture:r,specularFactor:a,specularColorTexture:s,specularColorFactor:A}=e;n.addDefine("USE_SPECULAR",void 0,te.FRAGMENT),c(r)&&!o&&Ra(n,t,r,"u_specularTexture","SPECULAR",i),c(a)&&a!==KH.DEFAULT_SPECULAR_FACTOR&&(n.addUniform("float","u_specularFactor",te.FRAGMENT),t.u_specularFactor=function(){return e.specularFactor},n.addDefine("HAS_SPECULAR_FACTOR",void 0,te.FRAGMENT)),c(s)&&!o&&Ra(n,t,s,"u_specularColorTexture","SPECULAR_COLOR",i),c(A)&&!u.equals(A,KH.DEFAULT_SPECULAR_COLOR_FACTOR)&&(n.addUniform("vec3","u_specularColorFactor",te.FRAGMENT),t.u_specularColorFactor=function(){return e.specularColorFactor},n.addDefine("HAS_SPECULAR_COLOR_FACTOR",void 0,te.FRAGMENT))}var x_e=new u;function T_e(e,t,n,i,o){let{anisotropyStrength:r,anisotropyRotation:a,anisotropyTexture:s}=e;n.addDefine("USE_ANISOTROPY",void 0,te.FRAGMENT),c(s)&&!o&&Ra(n,t,s,"u_anisotropyTexture","ANISOTROPY",i);let A=Math.cos(a),l=Math.sin(a);n.addUniform("vec3","u_anisotropy",te.FRAGMENT),t.u_anisotropy=function(){return u.fromElements(A,l,r,x_e)}}function S_e(e,t,n,i,o){let{clearcoatFactor:r,clearcoatTexture:a,clearcoatRoughnessFactor:s,clearcoatRoughnessTexture:A,clearcoatNormalTexture:l}=e;n.addDefine("USE_CLEARCOAT",void 0,te.FRAGMENT),c(r)&&r!==XH.DEFAULT_CLEARCOAT_FACTOR&&(n.addUniform("float","u_clearcoatFactor",te.FRAGMENT),t.u_clearcoatFactor=function(){return e.clearcoatFactor},n.addDefine("HAS_CLEARCOAT_FACTOR",void 0,te.FRAGMENT)),c(a)&&!o&&Ra(n,t,a,"u_clearcoatTexture","CLEARCOAT",i),c(s)&&r!==XH.DEFAULT_CLEARCOAT_ROUGHNESS_FACTOR&&(n.addUniform("float","u_clearcoatRoughnessFactor",te.FRAGMENT),t.u_clearcoatRoughnessFactor=function(){return e.clearcoatRoughnessFactor},n.addDefine("HAS_CLEARCOAT_ROUGHNESS_FACTOR",void 0,te.FRAGMENT)),c(A)&&!o&&Ra(n,t,A,"u_clearcoatRoughnessTexture","CLEARCOAT_ROUGHNESS",i),c(l)&&!o&&Ra(n,t,l,"u_clearcoatNormalTexture","CLEARCOAT_NORMAL",i)}function w_e(e,t,n,i,o){n.addDefine("USE_METALLIC_ROUGHNESS",void 0,te.FRAGMENT);let r=e.baseColorTexture;c(r)&&!o&&Ra(n,t,r,"u_baseColorTexture","BASE_COLOR",i);let a=e.baseColorFactor;c(a)&&!se.equals(a,DD.DEFAULT_BASE_COLOR_FACTOR)&&(n.addUniform("vec4","u_baseColorFactor",te.FRAGMENT),t.u_baseColorFactor=function(){return e.baseColorFactor},n.addDefine("HAS_BASE_COLOR_FACTOR",void 0,te.FRAGMENT));let s=e.metallicRoughnessTexture;c(s)&&!o&&Ra(n,t,s,"u_metallicRoughnessTexture","METALLIC_ROUGHNESS",i);let A=e.metallicFactor;c(A)&&A!==DD.DEFAULT_METALLIC_FACTOR&&(n.addUniform("float","u_metallicFactor",te.FRAGMENT),t.u_metallicFactor=function(){return e.metallicFactor},n.addDefine("HAS_METALLIC_FACTOR",void 0,te.FRAGMENT));let l=e.roughnessFactor;c(l)&&l!==DD.DEFAULT_ROUGHNESS_FACTOR&&(n.addUniform("float","u_roughnessFactor",te.FRAGMENT),t.u_roughnessFactor=function(){return e.roughnessFactor},n.addDefine("HAS_ROUGHNESS_FACTOR",void 0,te.FRAGMENT))}var eV=ZH;var Aa={name:"MetadataPickingPipelineStage",METADATA_PICKING_ENABLED:"METADATA_PICKING_ENABLED",METADATA_PICKING_VALUE_TYPE:"METADATA_PICKING_VALUE_TYPE",METADATA_PICKING_VALUE_STRING:"METADATA_PICKING_VALUE_STRING",METADATA_PICKING_VALUE_COMPONENT_X:"METADATA_PICKING_VALUE_COMPONENT_X",METADATA_PICKING_VALUE_COMPONENT_Y:"METADATA_PICKING_VALUE_COMPONENT_Y",METADATA_PICKING_VALUE_COMPONENT_Z:"METADATA_PICKING_VALUE_COMPONENT_Z",METADATA_PICKING_VALUE_COMPONENT_W:"METADATA_PICKING_VALUE_COMPONENT_W"};Aa.process=function(e,t,n){let i=e.shaderBuilder;i.addDefine(Aa.METADATA_PICKING_VALUE_TYPE,"float",te.FRAGMENT),i.addDefine(Aa.METADATA_PICKING_VALUE_STRING,"0.0",te.FRAGMENT),i.addDefine(Aa.METADATA_PICKING_VALUE_COMPONENT_X,"0.0",te.FRAGMENT),i.addDefine(Aa.METADATA_PICKING_VALUE_COMPONENT_Y,"0.0",te.FRAGMENT),i.addDefine(Aa.METADATA_PICKING_VALUE_COMPONENT_Z,"0.0",te.FRAGMENT),i.addDefine(Aa.METADATA_PICKING_VALUE_COMPONENT_W,"0.0",te.FRAGMENT),i.addFunction("metadataPickingStage","void metadataPickingStage(Metadata metadata, MetadataClass metadataClass, inout vec4 metadataValues)",te.FRAGMENT),i.addFunctionLines("metadataPickingStage",[`${Aa.METADATA_PICKING_VALUE_TYPE} value = ${Aa.METADATA_PICKING_VALUE_TYPE}(${Aa.METADATA_PICKING_VALUE_STRING});`,`metadataValues.x = ${Aa.METADATA_PICKING_VALUE_COMPONENT_X};`,`metadataValues.y = ${Aa.METADATA_PICKING_VALUE_COMPONENT_Y};`,`metadataValues.z = ${Aa.METADATA_PICKING_VALUE_COMPONENT_Z};`,`metadataValues.w = ${Aa.METADATA_PICKING_VALUE_COMPONENT_W};`],te.FRAGMENT)};var tV=Aa;var nV=`void morphTargetsStage(inout ProcessedAttributes attributes) 
{
    vec3 positionMC = attributes.positionMC;
    attributes.positionMC = getMorphedPosition(positionMC);

    #ifdef HAS_NORMALS
    vec3 normalMC = attributes.normalMC;
    attributes.normalMC = getMorphedNormal(normalMC);
    #endif

    #ifdef HAS_TANGENTS
    vec3 tangentMC = attributes.tangentMC;
    attributes.tangentMC = getMorphedTangent(tangentMC);
    #endif
}`;var hr={name:"MorphTargetsPipelineStage",FUNCTION_ID_GET_MORPHED_POSITION:"getMorphedPosition",FUNCTION_SIGNATURE_GET_MORPHED_POSITION:"vec3 getMorphedPosition(in vec3 position)",FUNCTION_ID_GET_MORPHED_NORMAL:"getMorphedNormal",FUNCTION_SIGNATURE_GET_MORPHED_NORMAL:"vec3 getMorphedNormal(in vec3 normal)",FUNCTION_ID_GET_MORPHED_TANGENT:"getMorphedTangent",FUNCTION_SIGNATURE_GET_MORPHED_TANGENT:"vec3 getMorphedTangent(in vec3 tangent)"};hr.process=function(e,t){let n=e.shaderBuilder;n.addDefine("HAS_MORPH_TARGETS",void 0,te.VERTEX),M_e(n);let i=t.morphTargets.length;for(let s=0;s<i;s++){let A=t.morphTargets[s].attributes,l=A.length;for(let f=0;f<l;f++){let h=A[f],m=h.semantic;m!==Pe.POSITION&&m!==Pe.NORMAL&&m!==Pe.TANGENT||(Q_e(e,h,e.attributeIndex,s),e.attributeIndex++)}}O_e(n);let r=e.runtimeNode.morphWeights.length;n.addUniform("float",`u_morphWeights[${r}]`,te.VERTEX),n.addVertexLines(nV);let a={u_morphWeights:function(){return e.runtimeNode.morphWeights}};e.uniformMap=Et(a,e.uniformMap)};var D_e={attributeString:void 0,functionId:void 0};function Q_e(e,t,n,i){let o=e.shaderBuilder;R_e(e,t,n);let r=v_e(t,D_e);P_e(o,r,i)}function R_e(e,t,n){let i={index:n,value:c(t.buffer)?void 0:t.constant,vertexBuffer:t.buffer,componentsPerAttribute:st.getNumberOfComponents(t.type),componentDatatype:t.componentDatatype,offsetInBytes:t.byteOffset,strideInBytes:t.byteStride,normalize:t.normalized};e.attributes.push(i)}function v_e(e,t){switch(e.semantic){case Pe.POSITION:t.attributeString="Position",t.functionId=hr.FUNCTION_ID_GET_MORPHED_POSITION;break;case Pe.NORMAL:t.attributeString="Normal",t.functionId=hr.FUNCTION_ID_GET_MORPHED_NORMAL;break;case Pe.TANGENT:t.attributeString="Tangent",t.functionId=hr.FUNCTION_ID_GET_MORPHED_TANGENT;break;default:break}return t}function P_e(e,t,n){let i=t.attributeString,o=`a_target${i}_${n}`,r=`morphed${i} += u_morphWeights[${n}] * a_target${i}_${n};`;e.addAttribute("vec3",o),e.addFunctionLines(t.functionId,[r])}function M_e(e){e.addFunction(hr.FUNCTION_ID_GET_MORPHED_POSITION,hr.FUNCTION_SIGNATURE_GET_MORPHED_POSITION,te.VERTEX),e.addFunctionLines(hr.FUNCTION_ID_GET_MORPHED_POSITION,["vec3 morphedPosition = position;"]),e.addFunction(hr.FUNCTION_ID_GET_MORPHED_NORMAL,hr.FUNCTION_SIGNATURE_GET_MORPHED_NORMAL,te.VERTEX),e.addFunctionLines(hr.FUNCTION_ID_GET_MORPHED_NORMAL,["vec3 morphedNormal = normal;"]),e.addFunction(hr.FUNCTION_ID_GET_MORPHED_TANGENT,hr.FUNCTION_SIGNATURE_GET_MORPHED_TANGENT,te.VERTEX),e.addFunctionLines(hr.FUNCTION_ID_GET_MORPHED_TANGENT,["vec3 morphedTangent = tangent;"])}function O_e(e){e.addFunctionLines(hr.FUNCTION_ID_GET_MORPHED_POSITION,["return morphedPosition;"]),e.addFunctionLines(hr.FUNCTION_ID_GET_MORPHED_NORMAL,["return morphedNormal;"]),e.addFunctionLines(hr.FUNCTION_ID_GET_MORPHED_TANGENT,["return morphedTangent;"])}var iV=hr;var oV={name:"PickingPipelineStage"};oV.process=function(e,t,n){let i=n.context,o=e.runtimeNode,r=e.shaderBuilder,a=e.model,s=o.node.instances;if(e.hasPropertyTable)L_e(e,t,s,i);else if(c(s))N_e(e,i);else{let A=rV(e),l=i.createPickId(A);a._pipelineResources.push(l),a._pickIds.push(l),r.addUniform("vec4","czm_pickColor",te.FRAGMENT);let f=e.uniformMap;f.czm_pickColor=function(){return l.color},e.pickId="czm_pickColor"}};function rV(e,t){let n=e.model;if(c(n.pickObject))return n.pickObject;let i={model:n,node:e.runtimeNode,primitive:e.runtimePrimitive},o;if(lo.is3DTiles(n.type)){let r=n.content;o={content:r,primitive:r.tileset,detail:i}}else o={primitive:n,detail:i};return o.id=n.id,c(t)&&(o.instanceId=t),o}function L_e(e,t,n){let i=e.model,o,r,a=i.featureIdLabel,s=i.instanceFeatureIdLabel;c(i.featureTableId)?o=i.featureTableId:c(n)?(r=tt.getFeatureIdsByLabel(n.featureIds,s),o=r.propertyTableId):(r=tt.getFeatureIdsByLabel(t.featureIds,a),o=r.propertyTableId);let A=i.featureTables[o];e.shaderBuilder.addUniform("sampler2D","model_pickTexture",te.FRAGMENT);let f=A.batchTexture;e.uniformMap.model_pickTexture=function(){return f.pickTexture??f.defaultTexture},e.pickId="((selectedFeature.id < int(model_featuresLength)) ? texture(model_pickTexture, selectedFeature.st) : vec4(0.0))"}function N_e(e,t){let n=e.instanceCount,i=new Array(n),o=new Uint8Array(n*4),r=e.model,a=r._pipelineResources;for(let h=0;h<n;h++){let m=rV(e,h),p=t.createPickId(m);a.push(p),i[h]=p;let g=p.color;o[h*4+0]=F.floatToByte(g.red),o[h*4+1]=F.floatToByte(g.green),o[h*4+2]=F.floatToByte(g.blue),o[h*4+3]=F.floatToByte(g.alpha)}r._pickIds=i;let s=dt.createVertexBuffer({context:t,typedArray:o,usage:Me.STATIC_DRAW});s.vertexArrayDestroyable=!1,r.statistics.addBuffer(s,!1),a.push(s);let l={index:e.attributeIndex++,vertexBuffer:s,componentsPerAttribute:4,componentDatatype:N.UNSIGNED_BYTE,normalize:!0,offsetInBytes:0,strideInBytes:0,instanceDivisor:1};e.attributes.push(l);let f=e.shaderBuilder;f.addDefine("USE_PICKING",void 0,te.BOTH),f.addAttribute("vec4","a_pickColor"),f.addVarying("vec4","v_pickColor"),e.pickId="v_pickColor"}var aV=oV;var F_e={ADD:0,REPLACE:1},Vi=Object.freeze(F_e);var sV=`float getPointSizeFromAttenuation(vec3 positionEC) {
  // Variables are packed into a single vector to minimize gl.uniformXXX() calls
  float pointSize = model_pointCloudParameters.x;
  float geometricError = model_pointCloudParameters.y;
  float depthMultiplier = model_pointCloudParameters.z;

  float depth = -positionEC.z;
  return min((geometricError / depth) * depthMultiplier, pointSize);
}

#ifdef HAS_POINT_CLOUD_SHOW_STYLE
float pointCloudShowStylingStage(in ProcessedAttributes attributes, in Metadata metadata) {
  float tiles3d_tileset_time = model_pointCloudParameters.w;
  return float(getShowFromStyle(attributes, metadata, tiles3d_tileset_time));
}
#endif

#ifdef HAS_POINT_CLOUD_COLOR_STYLE
vec4 pointCloudColorStylingStage(in ProcessedAttributes attributes, in Metadata metadata) {
  float tiles3d_tileset_time = model_pointCloudParameters.w;
  return getColorFromStyle(attributes, metadata, tiles3d_tileset_time);
}
#endif

#ifdef HAS_POINT_CLOUD_POINT_SIZE_STYLE
float pointCloudPointSizeStylingStage(in ProcessedAttributes attributes, in Metadata metadata) {
  float tiles3d_tileset_time = model_pointCloudParameters.w;
  return float(getPointSizeFromStyle(attributes, metadata, tiles3d_tileset_time));
}
#elif defined(HAS_POINT_CLOUD_ATTENUATION)
float pointCloudPointSizeStylingStage(in ProcessedAttributes attributes, in Metadata metadata) {
  return getPointSizeFromAttenuation(v_positionEC);
}
#endif

#ifdef HAS_POINT_CLOUD_BACK_FACE_CULLING
float pointCloudBackFaceCullingStage() {
  #if defined(HAS_NORMALS) && !defined(HAS_DOUBLE_SIDED_MATERIAL)
  // This needs to be computed in eye coordinates so we can't use attributes.normalMC
  return step(-v_normalEC.z, 0.0);
  #else
  return 1.0;
  #endif
}
#endif
`;var k_e=new se,AV={name:"PointCloudStylingPipelineStage"};AV.process=function(e,t,n){let i=e.shaderBuilder,o=e.model,r=o.style,a=o.structuralMetadata,s=c(a)?a.propertyAttributes:void 0,A=c(o.featureTableId)&&o.featureTables[o.featureTableId].featuresLength>0,l=!c(s)&&A;if(c(r)&&!l){let C=H_e(s),_=V_e(r,C);j_e(i,_);let I=Y_e(_).indexOf("normalMC")>=0,y=tt.getAttributeBySemantic(t,Pe.NORMAL);if(I&&!y)throw new oe("Style references the NORMAL semantic but the point cloud does not have normals");i.addDefine("COMPUTE_POSITION_WC_STYLE",void 0,te.VERTEX),_.styleTranslucent&&(e.alphaOptions.pass=Ye.TRANSLUCENT)}let f=o.pointCloudShading;f.attenuation&&i.addDefine("HAS_POINT_CLOUD_ATTENUATION",void 0,te.VERTEX),f.backFaceCulling&&i.addDefine("HAS_POINT_CLOUD_BACK_FACE_CULLING",void 0,te.VERTEX);let h,m,p;lo.is3DTiles(o.type)&&(m=!0,h=o.content,p=h.tile.refine===Vi.ADD),i.addUniform("vec4","model_pointCloudParameters",te.VERTEX),i.addVertexLines(sV);let g=e.uniformMap;g.model_pointCloudParameters=function(){let C=k_e,_=1;m&&(_=p?5:h.tileset.memoryAdjustedScreenSpaceError),C.x=f.maximumAttenuation??_,C.x*=n.pixelRatio;let E=U_e(e,t,f,h);C.y=E*f.geometricErrorScale;let I=n.context,y=n.camera.frustum,b;return n.mode===Te.SCENE2D||y instanceof am?b=Number.POSITIVE_INFINITY:b=I.drawingBufferHeight/n.camera.frustum.sseDenominator,C.z=b,m&&(C.w=h.tileset.timeSinceLoad),C}};var cV=new u;function U_e(e,t,n,i){if(c(i)){let f=i.tile.geometricError;if(f>0)return f}if(c(n.baseResolution))return n.baseResolution;let o=tt.getAttributeBySemantic(t,Pe.POSITION),r=o.count,a=e.runtimeNode.transform,s=u.subtract(o.max,o.min,cV);s=O.multiplyByPointAsVector(a,s,cV);let A=s.x*s.y*s.z;return w.cbrt(A/r)}var G_e={colorStyleFunction:void 0,showStyleFunction:void 0,pointSizeStyleFunction:void 0,styleTranslucent:!1},z_e={POSITION:"attributes.positionMC",POSITION_ABSOLUTE:"v_positionWC",COLOR:"attributes.color_0",NORMAL:"attributes.normalMC"};function H_e(e){let t=Ne(z_e);if(!c(e))return t;for(let n=0;n<e.length;n++){let o=e[n].properties;for(let r in o)o.hasOwnProperty(r)&&(t[r]=`metadata.${r}`)}return t}var RD="ProcessedAttributes attributes, Metadata metadata, float tiles3d_tileset_time";function V_e(e,t){let n=G_e,i={translucent:!1};return n.colorStyleFunction=e.getColorShaderFunction(`getColorFromStyle(${RD})`,t,i),n.showStyleFunction=e.getShowShaderFunction(`getShowFromStyle(${RD})`,t,i),n.pointSizeStyleFunction=e.getPointSizeShaderFunction(`getPointSizeFromStyle(${RD})`,t,i),n.styleTranslucent=c(n.colorStyleFunction)&&i.translucent,n}function j_e(e,t){let n=t.colorStyleFunction;c(n)&&(e.addDefine("HAS_POINT_CLOUD_COLOR_STYLE",void 0,te.BOTH),e.addVertexLines(n),e.addVarying("vec4","v_pointCloudColor"));let i=t.showStyleFunction;c(i)&&(e.addDefine("HAS_POINT_CLOUD_SHOW_STYLE",void 0,te.BOTH),e.addVertexLines(i),e.addVarying("float","v_pointCloudShow"));let o=t.pointSizeStyleFunction;c(o)&&(e.addDefine("HAS_POINT_CLOUD_POINT_SIZE_STYLE",void 0,te.VERTEX),e.addVertexLines(o))}function vD(e,t){let n=/attributes\.(\w+)/g,i=n.exec(e);for(;i!==null;){let o=i[1];t.indexOf(o)===-1&&t.push(o),i=n.exec(e)}}function Y_e(e){let t=e.colorStyleFunction,n=e.showStyleFunction,i=e.pointSizeStyleFunction,o=[];return c(t)&&vD(t,o),c(n)&&vD(n,o),c(i)&&vD(i,o),o}var lV=AV;var fV=`void primitiveOutlineStage() {
    v_outlineCoordinates = a_outlineCoordinates;
}
`;var uV=`void primitiveOutlineStage(inout czm_modelMaterial material) {
    if (!model_showOutline) {
        return;
    }

    float outlineX = 
        texture(model_outlineTexture, vec2(v_outlineCoordinates.x, 0.5)).r;
    float outlineY = 
        texture(model_outlineTexture, vec2(v_outlineCoordinates.y, 0.5)).r;
    float outlineZ = 
        texture(model_outlineTexture, vec2(v_outlineCoordinates.z, 0.5)).r;
    float outlineness = max(outlineX, max(outlineY, outlineZ));

    material.diffuse = mix(material.diffuse, model_outlineColor.rgb, model_outlineColor.a * outlineness);
}

`;var dV={name:"PrimitiveOutlinePipelineStage"};dV.process=function(e,t,n){let i=e.shaderBuilder,o=e.uniformMap;i.addDefine("HAS_PRIMITIVE_OUTLINE",void 0,te.BOTH),i.addAttribute("vec3","a_outlineCoordinates"),i.addVarying("vec3","v_outlineCoordinates");let r=t.outlineCoordinates,a={index:e.attributeIndex++,vertexBuffer:r.buffer,componentsPerAttribute:st.getNumberOfComponents(r.type),componentDatatype:r.componentDatatype,offsetInBytes:r.byteOffset,strideInBytes:r.byteStride,normalize:r.normalized};e.attributes.push(a),i.addUniform("sampler2D","model_outlineTexture",te.FRAGMENT);let s=Fb.createTexture(n.context);o.model_outlineTexture=function(){return s};let A=e.model;i.addUniform("vec4","model_outlineColor",te.FRAGMENT),o.model_outlineColor=function(){return A.outlineColor},i.addUniform("bool","model_showOutline",te.FRAGMENT),o.model_showOutline=function(){return A.showOutline},i.addVertexLines(fV),i.addFragmentLines(uV)};var hV=dV;var mV={name:"PrimitiveStatisticsPipelineStage",_countGeometry:pV,_count2DPositions:gV,_countMorphTargetAttributes:CV,_countMaterialTextures:_V,_countFeatureIdTextures:EV,_countBinaryMetadata:IV};mV.process=function(e,t,n){let i=e.model,o=i.statistics;pV(o,t),gV(o,e.runtimePrimitive),CV(o,t),_V(o,t.material),EV(o,t.featureIds),IV(o,i)};function pV(e,t){let n=c(t.indices)?t.indices.count:tt.getAttributeBySemantic(t,"POSITION").count,i=t.primitiveType;i===Ce.POINTS?e.pointsLength+=n:Ce.isTriangles(i)&&(e.trianglesLength+=q_e(i,n));let o=t.attributes,r=o.length;for(let A=0;A<r;A++){let l=o[A];if(c(l.buffer)){let f=c(l.typedArray);e.addBuffer(l.buffer,f)}}let a=t.outlineCoordinates;c(a)&&c(a.buffer)&&e.addBuffer(a.buffer,!1);let s=t.indices;if(c(s)&&c(s.buffer)){let A=c(s.typedArray);e.addBuffer(s.buffer,A)}}function q_e(e,t){switch(e){case Ce.TRIANGLES:return t/3;case Ce.TRIANGLE_STRIP:case Ce.TRIANGLE_FAN:return Math.max(t-2,0);default:return 0}}function gV(e,t){let n=t.positionBuffer2D;c(n)&&e.addBuffer(n,!0)}function CV(e,t){let n=t.morphTargets;if(!c(n))return;let i=!1,o=n.length;for(let r=0;r<o;r++){let a=n[r].attributes,s=a.length;for(let A=0;A<s;A++){let l=a[A];c(l.buffer)&&e.addBuffer(l.buffer,i)}}}function _V(e,t){let n=W_e(t),i=n.length;for(let o=0;o<i;o++){let r=n[o];c(r)&&c(r.texture)&&e.addTexture(r.texture)}}function W_e(e){let t=e.metallicRoughness,n=[e.emissiveTexture,e.normalTexture,e.occlusionTexture,t.baseColorTexture,t.metallicRoughnessTexture],i=e.specularGlossiness;return c(i)&&(n.push(i.diffuseTexture),n.push(i.specularGlossinessTexture)),n}function EV(e,t){let n=t.length;for(let i=0;i<n;i++){let o=t[i];if(o instanceof Lt.FeatureIdTexture){let r=o.textureReader;c(r.texture)&&e.addTexture(r.texture)}}}function IV(e,t){let n=t.structuralMetadata;c(n)&&(J_e(e,n),e.propertyTablesByteLength+=n.propertyTablesByteLength);let i=t.featureTables;if(!c(i))return;let o=i.length;for(let r=0;r<o;r++){let a=i[r];e.addBatchTexture(a.batchTexture)}}function J_e(e,t){let n=t.propertyTextures;if(!c(n))return;let i=n.length;for(let o=0;o<i;o++){let a=n[o].properties;for(let s in a)if(a.hasOwnProperty(s)){let l=a[s].textureReader;c(l.texture)&&e.addTexture(l.texture)}}}var yV=mV;var K_e=new O,X_e=new O,bV={name:"SceneMode2DPipelineStage"};bV.process=function(e,t,n){let i=tt.getAttributeBySemantic(t,Pe.POSITION),o=e.shaderBuilder,r=e.model,a=r.sceneGraph.computedModelMatrix,s=e.runtimeNode.computedTransform,A=O.multiplyTransformation(a,s,K_e),l=eEe(e,A,n),f=e.runtimePrimitive;f.boundingSphere2D=l;let h=e.runtimeNode.node.instances;if(c(h))return;if(c(i.typedArray)){let C=iEe(i,A,l,n);f.positionBuffer2D=C,r._modelResources.push(C),i.typedArray=void 0}o.addDefine("USE_2D_POSITIONS",void 0,te.VERTEX),o.addUniform("mat4","u_modelView2D",te.VERTEX);let m=O.fromTranslation(l.center,new O),p=n.context,g={u_modelView2D:function(){return O.multiplyTransformation(p.uniformState.view,m,X_e)}};e.uniformMap=Et(g,e.uniformMap)};var Z_e=new u,$_e=new u;function eEe(e,t,n){let i=O.multiplyByPoint(t,e.positionMin,Z_e),o=dr.computeActualEllipsoidPosition(n,i,i),r=O.multiplyByPoint(t,e.positionMax,$_e),a=dr.computeActualEllipsoidPosition(n,r,r);return ee.fromCornerPoints(o,a,new ee)}var BV=new u;function tEe(e,t){let n=e.length,i=new Float32Array(n),o=t.quantizedVolumeOffset,r=t.quantizedVolumeStepSize;for(let a=0;a<n;a+=3){let s=u.fromArray(e,a,BV),A=u.multiplyComponents(s,r,s),l=u.add(A,o,A);i[a]=l.x,i[a+1]=l.y,i[a+2]=l.z}return i}function nEe(e,t,n,i){let o;c(e.quantization)?o=tEe(e.typedArray,e.quantization):o=e.typedArray.slice();let r=e.byteOffset/Float32Array.BYTES_PER_ELEMENT,a=o.length,s=c(e.byteStride)?e.byteStride/Float32Array.BYTES_PER_ELEMENT:3;for(let A=r;A<a;A+=s){let l=u.fromArray(o,A,BV);if(isNaN(l.x)||isNaN(l.y)||isNaN(l.z))continue;let f=O.multiplyByPoint(t,l,l),h=dr.computeActualEllipsoidPosition(i,f,f),m=u.subtract(h,n,h);o[A]=m.x,o[A+1]=m.y,o[A+2]=m.z}return o}function iEe(e,t,n,i){let o=Ne(i);o.mode=Te.COLUMBUS_VIEW;let r=n.center,a=nEe(e,t,r,o),s=dt.createVertexBuffer({context:i.context,typedArray:a,usage:Me.STATIC_DRAW});return s.vertexArrayDestroyable=!1,s}var xV=bV;var TV=`void skinningStage(inout ProcessedAttributes attributes) 
{
    mat4 skinningMatrix = getSkinningMatrix();
    mat3 skinningMatrixMat3 = mat3(skinningMatrix);

    vec4 positionMC = vec4(attributes.positionMC, 1.0);
    attributes.positionMC = vec3(skinningMatrix * positionMC);

    #ifdef HAS_NORMALS
    vec3 normalMC = attributes.normalMC;
    attributes.normalMC = skinningMatrixMat3 * normalMC;
    #endif

    #ifdef HAS_TANGENTS
    vec3 tangentMC = attributes.tangentMC;
    attributes.tangentMC = skinningMatrixMat3 * tangentMC;
    #endif
}`;var oh={name:"SkinningPipelineStage",FUNCTION_ID_GET_SKINNING_MATRIX:"getSkinningMatrix",FUNCTION_SIGNATURE_GET_SKINNING_MATRIX:"mat4 getSkinningMatrix()"};oh.process=function(e,t){let n=e.shaderBuilder;n.addDefine("HAS_SKINNING",void 0,te.VERTEX),rEe(n,t);let i=e.runtimeNode,o=i.computedJointMatrices;n.addUniform("mat4",`u_jointMatrices[${o.length}]`,te.VERTEX),n.addVertexLines(TV);let r={u_jointMatrices:function(){return i.computedJointMatrices}};e.uniformMap=Et(r,e.uniformMap)};function oEe(e){let t=-1,n=e.attributes,i=n.length;for(let o=0;o<i;o++){let r=n[o];(r.semantic===Pe.JOINTS||r.semantic===Pe.WEIGHTS)&&(t=Math.max(t,r.setIndex))}return t}function rEe(e,t){e.addFunction(oh.FUNCTION_ID_GET_SKINNING_MATRIX,oh.FUNCTION_SIGNATURE_GET_SKINNING_MATRIX,te.VERTEX),e.addFunctionLines(oh.FUNCTION_ID_GET_SKINNING_MATRIX,["mat4 skinnedMatrix = mat4(0);"]);let i,o,r=["x","y","z","w"],a=oEe(t);for(i=0;i<=a;i++)for(o=0;o<=3;o++){let A=r[o],l=`skinnedMatrix += a_weights_${i}.${A} * u_jointMatrices[int(a_joints_${i}.${A})];`;e.addFunctionLines(oh.FUNCTION_ID_GET_SKINNING_MATRIX,[l])}e.addFunctionLines(oh.FUNCTION_ID_GET_SKINNING_MATRIX,["return skinnedMatrix;"])}var SV=oh;var wV=`void verticalExaggerationStage(
  inout ProcessedAttributes attributes
) {
  // Compute the distance from the camera to the local center of curvature.
  vec4 vertexPositionENU = czm_modelToEnu * vec4(attributes.positionMC, 1.0);
  vec2 vertexAzimuth = normalize(vertexPositionENU.xy);
  // Curvature = 1 / radius of curvature.
  float azimuthalCurvature = dot(vertexAzimuth * vertexAzimuth, czm_eyeEllipsoidCurvature);
  float eyeToCenter = 1.0 / azimuthalCurvature + czm_eyeHeight;

  // Compute the approximate ellipsoid normal at the vertex position.
  // Uses a circular approximation for the Earth curvature along the geodesic.
  vec3 vertexPositionEC = (czm_modelView * vec4(attributes.positionMC, 1.0)).xyz;
  vec3 centerToVertex = eyeToCenter * czm_eyeEllipsoidNormalEC + vertexPositionEC;
  vec3 vertexNormal = normalize(centerToVertex);

  // Estimate the (sine of the) angle between the camera direction and the vertex normal
  float verticalDistance = dot(vertexPositionEC, czm_eyeEllipsoidNormalEC);
  float horizontalDistance = length(vertexPositionEC - verticalDistance * czm_eyeEllipsoidNormalEC);
  float sinTheta = horizontalDistance / (eyeToCenter + verticalDistance);
  bool isSmallAngle = clamp(sinTheta, 0.0, 0.05) == sinTheta;

  // Approximate the change in height above the ellipsoid, from camera to vertex position.
  float exactVersine = 1.0 - dot(czm_eyeEllipsoidNormalEC, vertexNormal);
  float smallAngleVersine = 0.5 * sinTheta * sinTheta;
  float versine = isSmallAngle ? smallAngleVersine : exactVersine;
  float dHeight = dot(vertexPositionEC, vertexNormal) - eyeToCenter * versine;
  float vertexHeight = czm_eyeHeight + dHeight;

  // Transform the approximate vertex normal to model coordinates.
  vec3 vertexNormalMC = (czm_inverseModelView * vec4(vertexNormal, 0.0)).xyz;
  vertexNormalMC = normalize(vertexNormalMC);

  // Compute the exaggeration and apply it along the approximate vertex normal.
  float stretch = u_verticalExaggerationAndRelativeHeight.x;
  float shift = u_verticalExaggerationAndRelativeHeight.y;
  float exaggeration = (vertexHeight - shift) * (stretch - 1.0);
  attributes.positionMC += exaggeration * vertexNormalMC;
}
`;var DV={name:"VerticalExaggerationPipelineStage"},aEe=new U;DV.process=function(e,t,n){let{shaderBuilder:i,uniformMap:o}=e;i.addVertexLines(wV),i.addDefine("HAS_VERTICAL_EXAGGERATION",void 0,te.VERTEX),i.addUniform("vec2","u_verticalExaggerationAndRelativeHeight",te.VERTEX),o.u_verticalExaggerationAndRelativeHeight=function(){return U.fromElements(n.verticalExaggeration,n.verticalExaggerationRelativeHeight,aEe)}};var QV=DV;var PD={};function sEe(e){let t=Be.createTypedArray(e,e*2),n=e,i=0;for(let o=0;o<n;o+=3)t[i++]=o,t[i++]=o+1,t[i++]=o+1,t[i++]=o+2,t[i++]=o+2,t[i++]=o;return t}function cEe(e,t){let n=t.length,i=Be.createTypedArray(e,n*2),o=0;for(let r=0;r<n;r+=3){let a=t[r],s=t[r+1],A=t[r+2];i[o++]=a,i[o++]=s,i[o++]=s,i[o++]=A,i[o++]=A,i[o++]=a}return i}function AEe(e){let t=e-2,n=2+t*4,i=Be.createTypedArray(e,n),o=0;i[o++]=0,i[o++]=1;for(let r=0;r<t;r++)i[o++]=r+1,i[o++]=r+2,i[o++]=r+2,i[o++]=r;return i}function lEe(e,t){let i=t.length-2,o=2+i*4,r=Be.createTypedArray(e,o),a=0;r[a++]=t[0],r[a++]=t[1];for(let s=0;s<i;s++){let A=t[s],l=t[s+1],f=t[s+2];r[a++]=l,r[a++]=f,r[a++]=f,r[a++]=A}return r}function fEe(e){let t=e-2,n=2+t*4,i=Be.createTypedArray(e,n),o=0;i[o++]=0,i[o++]=1;for(let r=0;r<t;r++)i[o++]=r+1,i[o++]=r+2,i[o++]=r+2,i[o++]=0;return i}function uEe(e,t){let i=t.length-2,o=2+i*4,r=Be.createTypedArray(e,o),a=0,s=t[0];r[a++]=s,r[a++]=t[1];for(let A=0;A<i;A++){let l=t[A+1],f=t[A+2];r[a++]=l,r[a++]=f,r[a++]=f,r[a++]=s}return r}PD.createWireframeIndices=function(e,t,n){let i=c(n);if(e===Ce.TRIANGLES)return i?cEe(t,n):sEe(t);if(e===Ce.TRIANGLE_STRIP)return i?lEe(t,n):AEe(t);if(e===Ce.TRIANGLE_FAN)return i?uEe(t,n):fEe(t)};PD.getWireframeIndicesCount=function(e,t){return e===Ce.TRIANGLES?t*2:e===Ce.TRIANGLE_STRIP||e===Ce.TRIANGLE_FAN?2+(t-2)*4:t};var MD=PD;var RV={name:"WireframePipelineStage"};RV.process=function(e,t,n){e.shaderBuilder.addDefine("HAS_WIREFRAME",void 0,te.FRAGMENT);let o=e.model,r=dEe(t,e.indices,n);o._pipelineResources.push(r),e.wireframeIndexBuffer=r,o.statistics.addBuffer(r,!1);let s=e.primitiveType,A=e.count;e.primitiveType=Ce.LINES,e.count=MD.getWireframeIndicesCount(s,A)};function dEe(e,t,n){let o=tt.getAttributeBySemantic(e,Pe.POSITION).count,r=n.context.webgl2,a;if(c(t)){let f=t.buffer,h=t.count;c(f)&&r?(a=f.sizeInBytes===h?new Uint8Array(h):Be.createTypedArray(o,h),f.getBufferData(a)):a=t.typedArray}let s=e.primitiveType,A=MD.createWireframeIndices(s,o,a),l=Be.fromSizeInBytes(A.BYTES_PER_ELEMENT);return dt.createIndexBuffer({context:n.context,typedArray:A,usage:Me.STATIC_DRAW,indexDatatype:l})}var vV=RV;function PV(e){e=e??k.EMPTY_OBJECT;let t=e.primitive,n=e.node,i=e.model;this.primitive=t,this.node=n,this.model=i,this.pipelineStages=[],this.drawCommand=void 0,this.boundingSphere=void 0,this.boundingSphere2D=void 0,this.positionBuffer2D=void 0,this.batchLengths=void 0,this.batchOffsets=void 0,this.updateStages=[]}PV.prototype.configurePipeline=function(e){let t=this.pipelineStages;t.length=0;let n=this.primitive,i=this.node,o=this.model,r=o.customShader,a=o.style,s=e.context.webgl2,l=e.mode!==Te.SCENE3D&&!e.scene3DOnly&&o._projectTo2D,f=e.verticalExaggeration!==1&&o.hasVerticalExaggeration,h=c(n.morphTargets)&&n.morphTargets.length>0,m=c(i.skin),p=c(o.imageryLayers),g=c(r),_=!(g&&c(r.fragmentShaderText))||r.mode!==Zb.REPLACE_MATERIAL,E=tt.hasQuantizedAttributes(n.attributes),I=o.debugWireframe&&Ce.isTriangles(n.primitiveType)&&(o._enableDebugWireframe||s),y=o.pointCloudShading,b=c(y)&&y.attenuation,x=c(y)&&y.backFaceCulling,S=n.primitiveType===Ce.POINTS&&(c(a)||b||x),P=o._enableShowOutline&&c(n.outlineCoordinates),D=hEe(o,i,n),Q=c(o.classificationType);l&&t.push(xV),t.push(X8),I&&t.push(vV),Q&&t.push(b8),h&&t.push(iV),m&&t.push(SV),S&&t.push(lV),E&&t.push(Y8),p&&(P?jt("outlines-and-draping","Primitive outlines disable imagery draping"):t.push(jH)),_&&t.push(eV),t.push(C_),t.push(Ul),t.push(tV),D.hasPropertyTable&&(t.push(I_),t.push(I8),t.push(S8)),f&&t.push(QV),g&&t.push(V8),t.push(WH),o.allowPicking&&t.push(aV),P&&t.push(hV),t.push(_8),t.push(yV)};function hEe(e,t,n){let i;return c(t.instances)&&(i=tt.getFeatureIdsByLabel(t.instances.featureIds,e.instanceFeatureIdLabel),c(i))?{hasFeatureIds:!0,hasPropertyTable:c(i.propertyTableId)}:(i=tt.getFeatureIdsByLabel(n.featureIds,e.featureIdLabel),c(i)?{hasFeatureIds:!0,hasPropertyTable:c(i.propertyTableId)}:{hasFeatureIds:!1,hasPropertyTable:!1})}var MV=PV;function OD(e){e=e??k.EMPTY_OBJECT,this._sceneGraph=e.sceneGraph;let t=e.skin;this._skin=t,this._inverseBindMatrices=void 0,this._joints=[],this._jointMatrices=[],mEe(this)}Object.defineProperties(OD.prototype,{skin:{get:function(){return this._skin}},sceneGraph:{get:function(){return this._sceneGraph}},inverseBindMatrices:{get:function(){return this._inverseBindMatrices}},joints:{get:function(){return this._joints}},jointMatrices:{get:function(){return this._jointMatrices}}});function mEe(e){let t=e.skin,n=t.inverseBindMatrices;e._inverseBindMatrices=n;let i=t.joints,o=i.length,r=e.sceneGraph._runtimeNodes,a=e.joints,s=e._jointMatrices;for(let A=0;A<o;A++){let l=i[A].index,f=r[l];a.push(f);let h=n[A],m=OV(f,h,new O);s.push(m)}}function OV(e,t,n){let i=O.multiplyTransformation(e.transformToRoot,e.transform,n);return n=O.multiplyTransformation(i,t,n),n}OD.prototype.updateJointMatrices=function(){let e=this._jointMatrices,t=e.length;for(let n=0;n<t;n++){let i=this.joints[n],o=this.inverseBindMatrices[n];e[n]=OV(i,o,e[n])}};var LV=OD;function pEe(){this.pass=void 0,this.alphaCutoff=void 0}var h0=pEe;function gEe(e){this.shaderBuilder=new ny,this.model=e,this.uniformMap={},this.alphaOptions=new h0,this.renderStateOptions=ut.getState(ut.fromCache({depthTest:{enabled:!0,func:Ms.LESS_OR_EQUAL}})),this.hasSilhouette=!1,this.hasSkipLevelOfDetail=!1,this.nodeRenderResources=[]}var NV=gEe;var FV=`void silhouetteStage(inout vec4 color) {
    if(model_silhouettePass) {
        color = czm_gammaCorrect(model_silhouetteColor);
    }
}`;var kV=`void silhouetteStage(in ProcessedAttributes attributes, inout vec4 positionClip) {
     #ifdef HAS_NORMALS
     if(model_silhouettePass) {
          vec3 normal = normalize(czm_normal3D * attributes.normalMC);
          normal.x *= czm_projection[0][0];
          normal.y *= czm_projection[1][1];
          positionClip.xy += normal.xy * positionClip.w * model_silhouetteSize * czm_pixelRatio / czm_viewport.z;
    }
    #endif
}
`;var m0={name:"ModelSilhouettePipelineStage"};m0.silhouettesLength=0;m0.process=function(e,t,n){c(t._silhouetteId)||(t._silhouetteId=++m0.silhouettesLength);let i=e.shaderBuilder;i.addDefine("HAS_SILHOUETTE",void 0,te.BOTH),i.addVertexLines(kV),i.addFragmentLines(FV),i.addUniform("vec4","model_silhouetteColor",te.FRAGMENT),i.addUniform("float","model_silhouetteSize",te.VERTEX),i.addUniform("bool","model_silhouettePass",te.BOTH);let o={model_silhouetteColor:function(){return t.silhouetteColor},model_silhouetteSize:function(){return t.silhouetteSize},model_silhouettePass:function(){return!1}};e.uniformMap=Et(o,e.uniformMap),e.hasSilhouette=!0};var UV=m0;var GV=`void modelSplitterStage()
{
    // Don't split when rendering the shadow map, because it is rendered from
    // the perspective of a totally different camera.
#ifndef SHADOW_MAP
    if (model_splitDirection < 0.0 && gl_FragCoord.x > czm_splitPosition) discard;
    if (model_splitDirection > 0.0 && gl_FragCoord.x < czm_splitPosition) discard;
#endif
}
`;var p0={name:"ModelSplitterPipelineStage",SPLIT_DIRECTION_UNIFORM_NAME:"model_splitDirection"};p0.process=function(e,t,n){let i=e.shaderBuilder;i.addDefine("HAS_MODEL_SPLITTER",void 0,te.FRAGMENT),i.addFragmentLines(GV);let o={};i.addUniform("float",p0.SPLIT_DIRECTION_UNIFORM_NAME,te.FRAGMENT),o[p0.SPLIT_DIRECTION_UNIFORM_NAME]=function(){return t.splitDirection},e.uniformMap=Et(o,e.uniformMap)};var zV=p0;function CEe(e,t){this.model=e.model,this.shaderBuilder=e.shaderBuilder.clone(),this.uniformMap=Ne(e.uniformMap),this.alphaOptions=Ne(e.alphaOptions),this.renderStateOptions=Ne(e.renderStateOptions,!0),this.hasSilhouette=e.hasSilhouette,this.hasSkipLevelOfDetail=e.hasSkipLevelOfDetail,this.runtimeNode=t,this.attributes=[],this.attributeIndex=1,this.featureIdVertexAttributeSetIndex=0,this.instanceCount=0,this.primitiveRenderResources=[]}var HV=CEe;function _Ee(e){e=e??k.EMPTY_OBJECT,this.lightingModel=e.lightingModel??ih.UNLIT}var VV=_Ee;function EEe(e,t){this.model=e.model,this.runtimeNode=e.runtimeNode,this.attributes=e.attributes.slice(),this.attributeIndex=e.attributeIndex,this.featureIdVertexAttributeSetIndex=e.featureIdVertexAttributeSetIndex,this.uniformMap=Ne(e.uniformMap),this.alphaOptions=Ne(e.alphaOptions),this.renderStateOptions=Ne(e.renderStateOptions,!0),this.hasSilhouette=e.hasSilhouette,this.hasSkipLevelOfDetail=e.hasSkipLevelOfDetail,this.shaderBuilder=e.shaderBuilder.clone(),this.instanceCount=e.instanceCount,this.runtimePrimitive=t;let n=t.primitive;this.count=c(n.indices)?n.indices.count:tt.getAttributeBySemantic(n,"POSITION").count,this.hasPropertyTable=!1,this.indices=n.indices,this.wireframeIndexBuffer=void 0,this.primitiveType=n.primitiveType;let i=tt.getPositionMinMax(n,this.runtimeNode.instancingTranslationMin,this.runtimeNode.instancingTranslationMax);this.positionMin=u.clone(i.min,new u),this.positionMax=u.clone(i.max,new u),this.boundingSphere=ee.fromCornerPoints(this.positionMin,this.positionMax,new ee),this.lightingOptions=new VV,this.pickId=void 0}var jV=EEe;function ND(e){e=e??k.EMPTY_OBJECT;let t=e.command,n=e.primitiveRenderResources,i=n.model;this._command=t,this._model=i,this._runtimePrimitive=n.runtimePrimitive,this._modelMatrix=t.modelMatrix,this._boundingVolume=t.boundingVolume,this._cullFace=t.renderState.cull.face;let o=i.classificationType;this._classificationType=o,this._classifiesTerrain=o!==on.CESIUM_3D_TILE,this._classifies3DTiles=o!==on.TERRAIN,this._useDebugWireframe=i._enableDebugWireframe&&i.debugWireframe,this._pickId=n.pickId,this._commandListTerrain=[],this._commandList3DTiles=[],this._commandListIgnoreShow=[],this._commandListDebugWireframe=[],this._commandListTerrainPicking=[],this._commandList3DTilesPicking=[],BEe(this)}function IEe(e){return{colorMask:{red:!1,green:!1,blue:!1,alpha:!1},stencilTest:{enabled:!0,frontFunction:e,frontOperation:{fail:nt.KEEP,zFail:nt.DECREMENT_WRAP,zPass:nt.KEEP},backFunction:e,backOperation:{fail:nt.KEEP,zFail:nt.INCREMENT_WRAP,zPass:nt.KEEP},reference:Qt.CESIUM_3D_TILE_MASK,mask:Qt.CESIUM_3D_TILE_MASK},stencilMask:Qt.CLASSIFICATION_MASK,depthTest:{enabled:!0,func:Ms.LESS_OR_EQUAL},depthMask:!1}}var yEe={stencilTest:{enabled:!0,frontFunction:Nn.NOT_EQUAL,frontOperation:{fail:nt.ZERO,zFail:nt.ZERO,zPass:nt.ZERO},backFunction:Nn.NOT_EQUAL,backOperation:{fail:nt.ZERO,zFail:nt.ZERO,zPass:nt.ZERO},reference:0,mask:Qt.CLASSIFICATION_MASK},stencilMask:Qt.CLASSIFICATION_MASK,depthTest:{enabled:!1},depthMask:!1,blending:qn.PRE_MULTIPLIED_ALPHA_BLEND},bEe={stencilTest:{enabled:!0,frontFunction:Nn.NOT_EQUAL,frontOperation:{fail:nt.ZERO,zFail:nt.ZERO,zPass:nt.ZERO},backFunction:Nn.NOT_EQUAL,backOperation:{fail:nt.ZERO,zFail:nt.ZERO,zPass:nt.ZERO},reference:0,mask:Qt.CLASSIFICATION_MASK},stencilMask:Qt.CLASSIFICATION_MASK,depthTest:{enabled:!1},depthMask:!1},WV=[];function BEe(e){let t=e._command,n=WV;if(e._useDebugWireframe){t.pass=Ye.OPAQUE,n.length=0,n.push(t),e._commandListDebugWireframe=S_(e,n,e._commandListDebugWireframe);let r=e._commandListDebugWireframe,a=r.length;for(let s=0;s<a;s++){let A=r[s];A.count*=2,A.offset*=2}return}let o=e.model.allowPicking;if(e._classifiesTerrain){let r=Ye.TERRAIN_CLASSIFICATION,a=LD(t,r),s=YV(t,r);n.length=0,n.push(a,s),e._commandListTerrain=S_(e,n,e._commandListTerrain),o&&(e._commandListTerrainPicking=qV(e,n,e._commandListTerrainPicking))}if(e._classifies3DTiles){let r=Ye.CESIUM_3D_TILE_CLASSIFICATION,a=LD(t,r),s=YV(t,r);n.length=0,n.push(a,s),e._commandList3DTiles=S_(e,n,e._commandList3DTiles),o&&(e._commandList3DTilesPicking=qV(e,n,e._commandList3DTilesPicking))}}function S_(e,t,n){let i=e._runtimePrimitive,o=i.batchLengths,r=i.batchOffsets,a=o.length,s=t.length;for(let A=0;A<a;A++){let l=o[A],f=r[A];for(let h=0;h<s;h++){let m=t[h],p=mt.shallowClone(m);p.count=l,p.offset=f,n.push(p)}}return n}function LD(e,t){let n=mt.shallowClone(e);n.cull=!1,n.pass=t;let i=t===Ye.TERRAIN_CLASSIFICATION?Nn.ALWAYS:Nn.EQUAL,o=IEe(i);return n.renderState=ut.fromCache(o),n}function YV(e,t){let n=mt.shallowClone(e);return n.cull=!1,n.pass=t,n.renderState=ut.fromCache(yEe),n}var xEe=[];function qV(e,t,n){let i=ut.fromCache(bEe),o=t[0],r=t[1],a=mt.shallowClone(o);a.cull=!0,a.pickOnly=!0;let s=mt.shallowClone(r);s.cull=!0,s.pickOnly=!0,s.renderState=i,s.pickId=e._pickId;let A=xEe;return A.length=0,A.push(a,s),S_(e,A,n)}Object.defineProperties(ND.prototype,{command:{get:function(){return this._command}},runtimePrimitive:{get:function(){return this._runtimePrimitive}},batchLengths:{get:function(){return this._runtimePrimitive.batchLengths}},batchOffsets:{get:function(){return this._runtimePrimitive.batchOffsets}},model:{get:function(){return this._model}},classificationType:{get:function(){return this._classificationType}},modelMatrix:{get:function(){return this._modelMatrix},set:function(e){this._modelMatrix=O.clone(e,this._modelMatrix);let t=this._runtimePrimitive.boundingSphere;this._boundingVolume=ee.transform(t,this._modelMatrix,this._boundingVolume)}},boundingVolume:{get:function(){return this._boundingVolume}},cullFace:{get:function(){return this._cullFace},set:function(e){this._cullFace=e}}});ND.prototype.pushCommands=function(e,t){let n=e.passes;if(n.render){if(this._useDebugWireframe){Gn(t,this._commandListDebugWireframe);return}if(this._classifiesTerrain&&Gn(t,this._commandListTerrain),this._classifies3DTiles&&Gn(t,this._commandList3DTiles),e.invertClassification&&this._classifies3DTiles){if(this._commandListIgnoreShow.length===0){let o=Ye.CESIUM_3D_TILE_CLASSIFICATION_IGNORE_SHOW,r=LD(this._command,o),a=WV;a.length=0,a.push(r),this._commandListIgnoreShow=S_(this,a,this._commandListIgnoreShow)}Gn(t,this._commandListIgnoreShow)}}return n.pick&&(this._classifiesTerrain&&Gn(t,this._commandListTerrainPicking),this._classifies3DTiles&&Gn(t,this._commandList3DTilesPicking)),t};var JV=ND;function g0(e){e=e??k.EMPTY_OBJECT;let t=e.command,n=e.primitiveRenderResources,i=n.model;this._model=i;let o=n.runtimePrimitive;this._runtimePrimitive=o;let r=t.pass===Ye.TRANSLUCENT,s=!o.primitive.material.doubleSided&&!r,A=n.hasSilhouette,l=!r&&!A,f=n.hasSkipLevelOfDetail&&!r,h=A;this._command=t,this._modelMatrix=O.clone(t.modelMatrix),this._boundingVolume=ee.clone(t.boundingVolume),this._modelMatrix2D=new O,this._boundingVolume2D=new ee,this._modelMatrix2DDirty=!1,this._backFaceCulling=t.renderState.cull.enabled,this._cullFace=t.renderState.cull.face,this._shadows=i.shadows,this._debugShowBoundingVolume=t.debugShowBoundingVolume,this._usesBackFaceCulling=s,this._needsTranslucentCommand=l,this._needsSkipLevelOfDetailCommands=f,this._needsSilhouetteCommands=h,this._originalCommand=void 0,this._translucentCommand=void 0,this._skipLodBackfaceCommand=void 0,this._skipLodStencilCommand=void 0,this._silhouetteModelCommand=void 0,this._silhouetteColorCommand=void 0,this._derivedCommands=[],this._has2DCommands=!1,TEe(this)}function zl(e){this.command=e.command,this.updateShadows=e.updateShadows,this.updateBackFaceCulling=e.updateBackFaceCulling,this.updateCullFace=e.updateCullFace,this.updateDebugShowBoundingVolume=e.updateDebugShowBoundingVolume,this.is2D=e.is2D??!1,this.derivedCommand2D=void 0}zl.clone=function(e){return new zl({command:e.command,updateShadows:e.updateShadows,updateBackFaceCulling:e.updateBackFaceCulling,updateCullFace:e.updateCullFace,updateDebugShowBoundingVolume:e.updateDebugShowBoundingVolume,is2D:e.is2D,derivedCommand2D:e.derivedCommand2D})};function TEe(e){let t=e._command;t.modelMatrix=e._modelMatrix,t.boundingVolume=e._boundingVolume;let n=e._model,i=e._usesBackFaceCulling,o=e._derivedCommands;e._originalCommand=new zl({command:t,updateShadows:!0,updateBackFaceCulling:i,updateCullFace:i,updateDebugShowBoundingVolume:!0,is2D:!1}),o.push(e._originalCommand),e._needsTranslucentCommand&&(e._translucentCommand=new zl({command:PEe(t),updateShadows:!0,updateBackFaceCulling:!1,updateCullFace:!1,updateDebugShowBoundingVolume:!0}),o.push(e._translucentCommand)),e._needsSkipLevelOfDetailCommands&&(e._skipLodBackfaceCommand=new zl({command:kEe(t),updateShadows:!1,updateBackFaceCulling:!1,updateCullFace:i,updateDebugShowBoundingVolume:!1}),e._skipLodStencilCommand=new zl({command:UEe(t,n),updateShadows:!0,updateBackFaceCulling:i,updateCullFace:i,updateDebugShowBoundingVolume:!0}),o.push(e._skipLodBackfaceCommand),o.push(e._skipLodStencilCommand)),e._needsSilhouetteCommands&&(e._silhouetteModelCommand=new zl({command:MEe(t,n),updateShadows:!0,updateBackFaceCulling:i,updateCullFace:i,updateDebugShowBoundingVolume:!0}),e._silhouetteColorCommand=new zl({command:OEe(t,n),updateShadows:!1,updateBackFaceCulling:!1,updateCullFace:!1,updateDebugShowBoundingVolume:!1}),o.push(e._silhouetteModelCommand),o.push(e._silhouetteColorCommand))}Object.defineProperties(g0.prototype,{command:{get:function(){return this._command}},runtimePrimitive:{get:function(){return this._runtimePrimitive}},model:{get:function(){return this._model}},primitiveType:{get:function(){return this._command.primitiveType}},modelMatrix:{get:function(){return this._modelMatrix},set:function(e){this._modelMatrix=O.clone(e,this._modelMatrix),this._modelMatrix2DDirty=!0,this._boundingVolume=ee.transform(this.runtimePrimitive.boundingSphere,this._modelMatrix,this._boundingVolume)}},boundingVolume:{get:function(){return this._boundingVolume}},shadows:{get:function(){return this._shadows},set:function(e){this._shadows=e,wEe(this)}},backFaceCulling:{get:function(){return this._backFaceCulling},set:function(e){this._backFaceCulling!==e&&(this._backFaceCulling=e,DEe(this))}},cullFace:{get:function(){return this._cullFace},set:function(e){this._cullFace!==e&&(this._cullFace=e,QEe(this))}},debugShowBoundingVolume:{get:function(){return this._debugShowBoundingVolume},set:function(e){this._debugShowBoundingVolume!==e&&(this._debugShowBoundingVolume=e,REe(this))}}});function SEe(e,t){let n=e._modelMatrix;e._modelMatrix2D=O.clone(n,e._modelMatrix2D),e._modelMatrix2D[13]-=w.sign(n[13])*2*w.PI*t.mapProjection.ellipsoid.maximumRadius,e._boundingVolume2D=ee.transform(e.runtimePrimitive.boundingSphere,e._modelMatrix2D,e._boundingVolume2D)}function wEe(e){let t=e.shadows,n=cn.castShadows(t),i=cn.receiveShadows(t),o=e._derivedCommands;for(let r=0;r<o.length;++r){let a=o[r];if(a.updateShadows){let s=a.command;s.castShadows=n,s.receiveShadows=i}}}function DEe(e){let t=e.backFaceCulling,n=e._derivedCommands;for(let i=0;i<n.length;++i){let o=n[i];if(o.updateBackFaceCulling){let r=o.command,a=Ne(r.renderState,!0);a.cull.enabled=t,r.renderState=ut.fromCache(a)}}}function QEe(e){let t=e.cullFace,n=e._derivedCommands;for(let i=0;i<n.length;++i){let o=n[i];if(o.updateCullFace){let r=o.command,a=Ne(r.renderState,!0);a.cull.face=t,r.renderState=ut.fromCache(a)}}}function REe(e){let t=e.debugShowBoundingVolume,n=e._derivedCommands;for(let i=0;i<n.length;++i){let o=n[i];if(o.updateDebugShowBoundingVolume){let r=o.command;r.debugShowBoundingVolume=t}}}g0.prototype.pushCommands=function(e,t){let n=KV(this,e);n&&!this._has2DCommands&&(vEe(this),this._has2DCommands=!0,this._modelMatrix2DDirty=!0),this._modelMatrix2DDirty&&(SEe(this,e),this._modelMatrix2DDirty=!1);let i=this.model.styleCommandsNeeded;if(!(this._needsTranslucentCommand&&c(i)&&(i!==Bu.ALL_OPAQUE&&fp(t,this._translucentCommand,n),i===Bu.ALL_TRANSLUCENT))){if(this._needsSkipLevelOfDetailCommands){let{tileset:o,tile:r}=this._model.content;if(o.hasMixedContent){r._finalResolution||fp(o._backfaceCommands,this._skipLodBackfaceCommand,n),LEe(this,r,n),fp(t,this._skipLodStencilCommand,n);return}}if(this._needsSilhouetteCommands){fp(t,this._silhouetteModelCommand,n);return}return fp(t,this._originalCommand,n),t}};g0.prototype.pushSilhouetteCommands=function(e,t){let n=KV(this,e);return fp(t,this._silhouetteColorCommand,n),t};function fp(e,t,n){e.push(t.command),n&&e.push(t.derivedCommand2D.command)}function KV(e,t){if(t.mode!==Te.SCENE2D||e.model._projectTo2D)return!1;let i=e.model.sceneGraph._boundingSphere2D,o=i.center.y-i.radius,r=i.center.y+i.radius,a=t.mapProjection.ellipsoid.maximumRadius*w.PI;return o<a&&r>a||o<-a&&r>-a}function lp(e,t){if(!c(t))return;let n=zl.clone(t),i=mt.shallowClone(t.command);return i.modelMatrix=e._modelMatrix2D,i.boundingVolume=e._boundingVolume2D,n.command=i,n.updateShadows=!1,n.is2D=!0,t.derivedCommand2D=n,e._derivedCommands.push(n),n}function vEe(e){lp(e,e._originalCommand),lp(e,e._translucentCommand),lp(e,e._skipLodBackfaceCommand),lp(e,e._skipLodStencilCommand),lp(e,e._silhouetteModelCommand),lp(e,e._silhouetteColorCommand)}function PEe(e){let t=mt.shallowClone(e);t.pass=Ye.TRANSLUCENT;let n=Ne(e.renderState,!0);return n.cull.enabled=!1,n.depthMask=!1,n.blending=qn.ALPHA_BLEND,t.renderState=ut.fromCache(n),t}function MEe(e,t){let n=t._silhouetteId%255,i=mt.shallowClone(e),o=Ne(e.renderState,!0);return o.stencilTest={enabled:!0,frontFunction:V.ALWAYS,backFunction:V.ALWAYS,reference:n,mask:-1,frontOperation:{fail:V.KEEP,zFail:V.KEEP,zPass:V.REPLACE},backOperation:{fail:V.KEEP,zFail:V.KEEP,zPass:V.REPLACE}},t.isInvisible()&&(o.colorMask={red:!1,green:!1,blue:!1,alpha:!1}),i.renderState=ut.fromCache(o),i}function OEe(e,t){let n=t._silhouetteId%255,i=mt.shallowClone(e),o=Ne(e.renderState,!0);o.cull.enabled=!1,(e.pass===Ye.TRANSLUCENT||t.silhouetteColor.alpha<1)&&(i.pass=Ye.TRANSLUCENT,o.depthMask=!1,o.blending=qn.ALPHA_BLEND),o.stencilTest={enabled:!0,frontFunction:V.NOTEQUAL,backFunction:V.NOTEQUAL,reference:n,mask:-1,frontOperation:{fail:V.KEEP,zFail:V.KEEP,zPass:V.KEEP},backOperation:{fail:V.KEEP,zFail:V.KEEP,zPass:V.KEEP}};let a=Ne(e.uniformMap);return a.model_silhouettePass=function(){return!0},i.renderState=ut.fromCache(o),i.uniformMap=a,i.castShadows=!1,i.receiveShadows=!1,i}function LEe(e,t,n){let i=e._skipLodStencilCommand,o=i.command,r=t._selectionDepth,a=NEe(o);if(r!==a){let s=FEe(r),A=Ne(o.renderState,!0);A.stencilTest.reference=s,o.renderState=ut.fromCache(A),n&&(i.derivedCommand2D.renderState=A)}}function NEe(e){return(e.renderState.stencilTest.reference&Qt.SKIP_LOD_MASK)>>>Qt.SKIP_LOD_BIT_SHIFT}function FEe(e){return Qt.CESIUM_3D_TILE_MASK|e<<Qt.SKIP_LOD_BIT_SHIFT}function kEe(e){let t=mt.shallowClone(e),n=Ne(e.renderState,!0);n.cull.enabled=!0,n.cull.face=No.FRONT,n.colorMask={red:!1,green:!1,blue:!1,alpha:!1},n.polygonOffset={enabled:!0,factor:5,units:5};let i=Ne(t.uniformMap),o=new U(5,5);return i.u_polygonOffset=function(){return o},t.renderState=ut.fromCache(n),t.uniformMap=i,t.castShadows=!1,t.receiveShadows=!1,t}function UEe(e){let t=mt.shallowClone(e),n=Ne(e.renderState,!0),{stencilTest:i}=n;return i.enabled=!0,i.mask=Qt.SKIP_LOD_MASK,i.reference=Qt.CESIUM_3D_TILE_MASK,i.frontFunction=Nn.GREATER_OR_EQUAL,i.frontOperation.zPass=nt.REPLACE,i.backFunction=Nn.GREATER_OR_EQUAL,i.backOperation.zPass=nt.REPLACE,n.stencilMask=Qt.CESIUM_3D_TILE_MASK|Qt.SKIP_LOD_MASK,t.renderState=ut.fromCache(n),t}var XV=g0;var ZV=`precision highp float;

czm_modelVertexOutput defaultVertexOutput(vec3 positionMC) {
    czm_modelVertexOutput vsOutput;
    vsOutput.positionMC = positionMC;
    vsOutput.pointSize = 1.0;
    return vsOutput;
}

void main()
{
    // Initialize the attributes struct with all
    // attributes except quantized ones.
    ProcessedAttributes attributes;
    initializeAttributes(attributes);

    #ifdef HAS_IMAGERY
    initializeImageryAttributes();
    #endif

    // Dequantize the quantized ones and add them to the
    // attributes struct.
    #ifdef USE_DEQUANTIZATION
    dequantizationStage(attributes);
    #endif

    #ifdef HAS_MORPH_TARGETS
    morphTargetsStage(attributes);
    #endif

    #ifdef HAS_SKINNING
    skinningStage(attributes);
    #endif

    #ifdef HAS_PRIMITIVE_OUTLINE
    primitiveOutlineStage();
    #endif

    // Compute the bitangent according to the formula in the glTF spec.
    // Normal and tangents can be affected by morphing and skinning, so
    // the bitangent should not be computed until their values are finalized.
    #ifdef HAS_BITANGENTS
    attributes.bitangentMC = normalize(cross(attributes.normalMC, attributes.tangentMC) * attributes.tangentSignMC);
    #endif

    FeatureIds featureIds;
    featureIdStage(featureIds, attributes);

    #ifdef HAS_SELECTED_FEATURE_ID
    SelectedFeature feature;
    selectedFeatureIdStage(feature, featureIds);
    // Handle any show properties that come from the style.
    cpuStylingStage(attributes.positionMC, feature);
    #endif

    #if defined(USE_2D_POSITIONS) || defined(USE_2D_INSTANCING)
    // The scene mode 2D pipeline stage and instancing stage add a different
    // model view matrix to accurately project the model to 2D. However, the
    // output positions and normals should be transformed by the 3D matrices
    // to keep the data the same for the fragment shader.
    mat4 modelView = czm_modelView3D;
    mat3 normal = czm_normal3D;
    #else
    // These are used for individual model projection because they will
    // automatically change based on the scene mode.
    mat4 modelView = czm_modelView;
    mat3 normal = czm_normal;
    #endif

    // Update the position for this instance in place
    #ifdef HAS_INSTANCING

        // The legacy instance stage is used when rendering i3dm models that
        // encode instances transforms in world space, as opposed to glTF models
        // that use EXT_mesh_gpu_instancing, where instance transforms are encoded
        // in object space.
        #ifdef USE_LEGACY_INSTANCING
        mat4 instanceModelView;
        mat3 instanceModelViewInverseTranspose;

        legacyInstancingStage(attributes, instanceModelView, instanceModelViewInverseTranspose);

        modelView = instanceModelView;
        normal = instanceModelViewInverseTranspose;
        #else
        instancingStage(attributes);
        #endif

        #ifdef USE_PICKING
        v_pickColor = a_pickColor;
        #endif

    #endif

    Metadata metadata;
    MetadataClass metadataClass;
    MetadataStatistics metadataStatistics;
    metadataStage(metadata, metadataClass, metadataStatistics, attributes);

    #ifdef HAS_VERTICAL_EXAGGERATION
    verticalExaggerationStage(attributes);
    #endif

    #ifdef HAS_CUSTOM_VERTEX_SHADER
    czm_modelVertexOutput vsOutput = defaultVertexOutput(attributes.positionMC);
    customShaderStage(vsOutput, attributes, featureIds, metadata, metadataClass, metadataStatistics);
    #endif

    // Compute the final position in each coordinate system needed.
    // This returns the value that will be assigned to gl_Position.
    vec4 positionClip = geometryStage(attributes, modelView, normal);

    // This must go after the geometry stage as it needs v_positionWC
    #ifdef HAS_ATMOSPHERE
    atmosphereStage(attributes);
    #endif

    #ifdef ENABLE_CLIPPING_POLYGONS
    modelClippingPolygonsStage(attributes);
    #endif

    #ifdef HAS_SILHOUETTE
    silhouetteStage(attributes, positionClip);
    #endif

    #ifdef HAS_POINT_CLOUD_SHOW_STYLE
    float show = pointCloudShowStylingStage(attributes, metadata);
    #else
    float show = 1.0;
    #endif

    #ifdef HAS_POINT_CLOUD_BACK_FACE_CULLING
    show *= pointCloudBackFaceCullingStage();
    #endif

    #ifdef HAS_POINT_CLOUD_COLOR_STYLE
    v_pointCloudColor = pointCloudColorStylingStage(attributes, metadata);
    #endif

    #ifdef PRIMITIVE_TYPE_POINTS
        #ifdef HAS_CUSTOM_VERTEX_SHADER
        gl_PointSize = vsOutput.pointSize;
        #elif defined(HAS_POINT_CLOUD_POINT_SIZE_STYLE) || defined(HAS_POINT_CLOUD_ATTENUATION)
        gl_PointSize = pointCloudPointSizeStylingStage(attributes, metadata);
        #else
        gl_PointSize = 1.0;
        #endif
        
        gl_PointSize *= show;
    #endif

    // Important NOT to compute gl_Position = show * positionClip or we hit:
    // https://github.com/CesiumGS/cesium/issues/11270
    //
    // We will discard points with v_pointCloudShow == 0 in the fragment shader.
    gl_Position = positionClip;

    #ifdef HAS_POINT_CLOUD_SHOW_STYLE
    v_pointCloudShow = show;
    #endif
}
`;var $V=`
precision highp float;

czm_modelMaterial defaultModelMaterial()
{
    czm_modelMaterial material;
    material.diffuse = vec3(0.0);
    material.specular = vec3(1.0);
    material.roughness = 1.0;
    material.occlusion = 1.0;
    material.normalEC = vec3(0.0, 0.0, 1.0);
    material.emissive = vec3(0.0);
    material.alpha = 1.0;
    return material;
}

vec4 handleAlpha(vec3 color, float alpha)
{
    #ifdef ALPHA_MODE_MASK
    if (alpha < u_alphaCutoff) {
        discard;
    }
    #endif

    return vec4(color, alpha);
}

SelectedFeature selectedFeature;

void main()
{
    #ifdef HAS_POINT_CLOUD_SHOW_STYLE
        if (v_pointCloudShow == 0.0)
        {
            discard;
        }
    #endif

    #ifdef HAS_MODEL_SPLITTER
    modelSplitterStage();
    #endif

    czm_modelMaterial material = defaultModelMaterial();

    ProcessedAttributes attributes;
    geometryStage(attributes);

    FeatureIds featureIds;
    featureIdStage(featureIds, attributes);

    Metadata metadata;
    MetadataClass metadataClass;
    MetadataStatistics metadataStatistics;
    metadataStage(metadata, metadataClass, metadataStatistics, attributes);

    //========================================================================
    // When not picking metadata START
    #ifndef METADATA_PICKING_ENABLED

    #ifdef HAS_SELECTED_FEATURE_ID
    selectedFeatureIdStage(selectedFeature, featureIds);
    #endif

    #ifndef CUSTOM_SHADER_REPLACE_MATERIAL
    materialStage(material, attributes, selectedFeature);
    #endif

    #ifdef HAS_CUSTOM_FRAGMENT_SHADER
    customShaderStage(material, attributes, featureIds, metadata, metadataClass, metadataStatistics);
    #endif

    lightingStage(material, attributes);

    #ifdef HAS_SELECTED_FEATURE_ID
    cpuStylingStage(material, selectedFeature);
    #endif

    #ifdef HAS_MODEL_COLOR
    modelColorStage(material);
    #endif

    #ifdef HAS_PRIMITIVE_OUTLINE
    primitiveOutlineStage(material);
    #endif

    vec4 color = handleAlpha(material.diffuse, material.alpha);

    // When not picking metadata END
    //========================================================================
    #else
    //========================================================================
    // When picking metadata START

    vec4 metadataValues = vec4(0.0, 0.0, 0.0, 0.0);
    metadataPickingStage(metadata, metadataClass, metadataValues);
    vec4 color = metadataValues;

    #endif
    // When picking metadata END
    //========================================================================

    #ifdef HAS_CLIPPING_PLANES
    modelClippingPlanesStage(color);
    #endif

    #ifdef ENABLE_CLIPPING_POLYGONS
    modelClippingPolygonsStage();
    #endif

    //========================================================================
    // When not picking metadata START
    #ifndef METADATA_PICKING_ENABLED

    #if defined(HAS_SILHOUETTE) && defined(HAS_NORMALS)
    silhouetteStage(color);
    #endif

    #ifdef HAS_ATMOSPHERE
    atmosphereStage(color, attributes);
    #endif

    #endif
    // When not picking metadata END
    //========================================================================

    out_FragColor = color;
}

`;function ej(){}ej.buildModelDrawCommand=function(e,t){let n=e.shaderBuilder,i=GEe(e,n,t),o=zEe(e,i,t),r=e.model;return c(r.classificationType)?new JV({primitiveRenderResources:e,command:o}):new XV({primitiveRenderResources:e,command:o})};function GEe(e,t,n){t.addVertexLines(ZV),t.addFragmentLines($V);let i=e.model,o=t.buildShaderProgram(n.context);return i._pipelineResources.push(o),o}function zEe(e,t,n){let i=HEe(e),o=new go({context:n.context,indexBuffer:i,attributes:e.attributes}),r=e.model;r._pipelineResources.push(o);let a=e.alphaOptions.pass,s=r.sceneGraph,A=n.mode===Te.SCENE3D,l,f;if(!A&&!n.scene3DOnly&&r._projectTo2D)l=O.multiplyTransformation(s._computedModelMatrix,e.runtimeNode.computedTransform,new O),f=e.runtimePrimitive.boundingSphere2D;else{let E=A?s._computedModelMatrix:s._computedModelMatrix2D;l=O.multiplyTransformation(E,e.runtimeNode.computedTransform,new O),f=ee.transform(e.boundingSphere,l)}let h=Ne(ut.fromCache(e.renderStateOptions),!0);h.cull.face=tt.getCullFace(l,e.primitiveType),h=ut.fromCache(h);let m=c(r.classificationType),p=m?!1:cn.castShadows(r.shadows),g=m?!1:cn.receiveShadows(r.shadows),C=m?void 0:e.pickId;return new mt({boundingVolume:f,modelMatrix:l,uniformMap:e.uniformMap,renderState:h,vertexArray:o,shaderProgram:t,cull:r.cull,pass:a,count:e.count,owner:r,pickId:C,pickMetadataAllowed:!0,instanceCount:e.instanceCount,primitiveType:e.primitiveType,debugShowBoundingVolume:r.debugShowBoundingVolume,castShadows:p,receiveShadows:g})}function HEe(e){let t=e.wireframeIndexBuffer;if(c(t))return t;let n=e.indices;if(c(n))return n.buffer}var tj=ej;function Or(e){e=e??k.EMPTY_OBJECT;let t=e.modelComponents;this._model=e.model,this._components=t,this._pipelineStages=[],this._updateStages=[],this._runtimeNodes=[],this._rootNodes=[],this._skinnedNodes=[],this._runtimeSkins=[],this.modelPipelineStages=[],this._boundingSphere=void 0,this._boundingSphere2D=void 0,this._computedModelMatrix=O.clone(O.IDENTITY),this._computedModelMatrix2D=O.clone(O.IDENTITY),this._axisCorrectionMatrix=tt.getAxisCorrectionMatrix(t.upAxis,t.forwardAxis,new O),this._runtimeArticulations={},VEe(this)}Object.defineProperties(Or.prototype,{components:{get:function(){return this._components}},computedModelMatrix:{get:function(){return this._computedModelMatrix}},axisCorrectionMatrix:{get:function(){return this._axisCorrectionMatrix}},boundingSphere:{get:function(){return this._boundingSphere}}});function VEe(e){let t=e._components,n=t.scene,o=e._model.modelMatrix;nj(e,o);let r=t.articulations,a=r.length,s=e._runtimeArticulations;for(let I=0;I<a;I++){let y=r[I],b=new Hz({articulation:y,sceneGraph:e}),x=b.name;s[x]=b}let A=t.nodes,l=A.length;e._runtimeNodes=new Array(l);let h=n.nodes.length,m=O.IDENTITY;for(let I=0;I<h;I++){let y=n.nodes[I],b=ij(e,y,m);e._rootNodes.push(b)}let p=t.skins,g=e._runtimeSkins,C=p.length;for(let I=0;I<C;I++){let y=p[I];g.push(new LV({skin:y,sceneGraph:e}))}let _=e._skinnedNodes,E=_.length;for(let I=0;I<E;I++){let y=_[I],b=e._runtimeNodes[y],S=A[y].skin.index;b._runtimeSkin=g[S],b.updateJointMatrices()}e.applyArticulations()}function nj(e,t){let n=e._components,i=e._model;e._computedModelMatrix=O.multiplyTransformation(t,n.transform,e._computedModelMatrix),e._computedModelMatrix=O.multiplyTransformation(e._computedModelMatrix,e._axisCorrectionMatrix,e._computedModelMatrix),e._computedModelMatrix=O.multiplyByUniformScale(e._computedModelMatrix,i.computedScale,e._computedModelMatrix)}var jEe=new u;function YEe(e,t){let n=e._computedModelMatrix,i=O.getTranslation(n,jEe);if(!u.equals(i,u.ZERO))e._computedModelMatrix2D=Rn.basisTo2D(t.mapProjection,n,e._computedModelMatrix2D);else{let o=e.boundingSphere.center,r=Rn.ellipsoidTo2DModelMatrix(t.mapProjection,o,e._computedModelMatrix2D);e._computedModelMatrix2D=O.multiply(r,n,e._computedModelMatrix2D)}e._boundingSphere2D=ee.transform(e._boundingSphere,e._computedModelMatrix2D,e._boundingSphere2D)}function ij(e,t,n){let i=[],o=tt.getNodeTransform(t),r=t.children.length;for(let f=0;f<r;f++){let h=t.children[f],m=O.multiplyTransformation(n,o,new O),p=ij(e,h,m);i.push(p)}let a=new g8({node:t,transform:o,transformToRoot:n,children:i,sceneGraph:e}),s=t.primitives.length;for(let f=0;f<s;f++)a.runtimePrimitives.push(new MV({primitive:t.primitives[f],node:t,model:e._model}));let A=t.index;e._runtimeNodes[A]=a,c(t.skin)&&e._skinnedNodes.push(A);let l=t.name;if(c(l)){let f=e._model,h=new $z(f,a);f._nodesByName[l]=h}return A}var qEe=new u,WEe=new u,JEe=new u,KEe=new u;Or.prototype.buildDrawCommands=function(e){let t=this.buildRenderResources(e);this.computeBoundingVolumes(t),this.createDrawCommands(t,e)};Or.prototype.buildRenderResources=function(e){let t=this._model,n=new NV(t);t.statistics.clear(),this.configurePipeline(e);let i=this.modelPipelineStages;for(let o=0;o<i.length;o++)i[o].process(n,t,e);for(let o=0;o<this._runtimeNodes.length;o++){let r=this._runtimeNodes[o];if(!c(r))continue;r.configurePipeline();let a=r.pipelineStages,s=new HV(n,r);n.nodeRenderResources[o]=s;for(let A=0;A<a.length;A++)a[A].process(s,r.node,e);for(let A=0;A<r.runtimePrimitives.length;A++){let l=r.runtimePrimitives[A];l.configurePipeline(e);let f=l.pipelineStages,h=new jV(s,l);s.primitiveRenderResources[A]=h;for(let m=0;m<f.length;m++)f[m].process(h,l.primitive,e)}}return n};Or.prototype.computeBoundingVolumes=function(e){let t=this._model,n=u.fromElements(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE,qEe),i=u.fromElements(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE,WEe);for(let o=0;o<this._runtimeNodes.length;o++){let r=this._runtimeNodes[o];if(!c(r))continue;let a=e.nodeRenderResources[o],s=r.computedTransform;for(let A=0;A<r.runtimePrimitives.length;A++){let l=r.runtimePrimitives[A],f=a.primitiveRenderResources[A];l.boundingSphere=ee.clone(f.boundingSphere,new ee);let h=O.multiplyByPoint(s,f.positionMin,JEe),m=O.multiplyByPoint(s,f.positionMax,KEe);u.minimumByComponent(n,h,n),u.maximumByComponent(i,m,i)}}this._boundingSphere=ee.fromCornerPoints(n,i,new ee),this._boundingSphere=ee.transformWithoutScale(this._boundingSphere,this._axisCorrectionMatrix,this._boundingSphere),this._boundingSphere=ee.transform(this._boundingSphere,this._components.transform,this._boundingSphere),t._boundingSphere=ee.transform(this._boundingSphere,t.modelMatrix,t._boundingSphere),t._initialRadius=t._boundingSphere.radius,t._boundingSphere.radius*=t._clampedScale};Or.prototype.createDrawCommands=function(e,t){for(let n=0;n<this._runtimeNodes.length;n++){let i=this._runtimeNodes[n];if(!c(i))continue;let o=e.nodeRenderResources[n];for(let r=0;r<i.runtimePrimitives.length;r++){let a=i.runtimePrimitives[r],s=o.primitiveRenderResources[r],A=tj.buildModelDrawCommand(s,t);a.drawCommand=A}}};Or.prototype.configurePipeline=function(e){let t=this.modelPipelineStages;t.length=0;let n=this._model,i=e.fog.enabled&&e.fog.renderable;c(n.color)&&t.push(p_),!c(n.classificationType)&&(n.imageBasedLighting.enabled&&t.push(Gz),n.isClippingEnabled()&&t.push(qz),n.isClippingPolygonsEnabled()&&t.push(Xz),n.hasSilhouette(e)&&t.push(UV),c(n.splitDirection)&&n.splitDirection!==Zo.NONE&&t.push(zV),lo.is3DTiles(n.type)&&t.push(Mz),i&&t.push(Fz))};Or.prototype.update=function(e,t){let n,i,o;for(n=0;n<this._runtimeNodes.length;n++){let r=this._runtimeNodes[n];if(!c(r))continue;for(i=0;i<r.updateStages.length;i++)r.updateStages[i].update(r,this,e);let a=e.mode!==Te.SCENE3D&&this._model._projectTo2D;for(t&&!a&&this.updateJointMatrices(),i=0;i<r.runtimePrimitives.length;i++){let s=r.runtimePrimitives[i];for(o=0;o<s.updateStages.length;o++)s.updateStages[o].update(s,this)}}};Or.prototype.updateModelMatrix=function(e,t){nj(this,e),t.mode!==Te.SCENE3D&&YEe(this,t);let n=this._rootNodes;for(let i=0;i<n.length;i++){let o=this._runtimeNodes[n[i]];o._transformDirty=!0}};Or.prototype.updateJointMatrices=function(){let e=this._skinnedNodes,t=e.length;for(let n=0;n<t;n++){let i=e[n];this._runtimeNodes[i].updateJointMatrices()}};function oj(e,t,n,i,o){if(n&&!t.show)return;let r=t.children.length;for(let A=0;A<r;A++){let l=t.getChild(A);oj(e,l,n,i,o)}let a=t.runtimePrimitives,s=a.length;for(let A=0;A<s;A++){let l=a[A];i(l,o)}}function C0(e,t,n,i){let o=e._rootNodes,r=o.length;for(let a=0;a<r;a++){let s=o[a],A=e._runtimeNodes[s];oj(e,A,t,n,i)}}var XEe={backFaceCulling:void 0};Or.prototype.updateBackFaceCulling=function(e){let t=XEe;t.backFaceCulling=e,C0(this,!1,ZEe,t)};function ZEe(e,t){let n=e.drawCommand;n.backFaceCulling=t.backFaceCulling}var $Ee={shadowMode:void 0};Or.prototype.updateShadows=function(e){let t=$Ee;t.shadowMode=e,C0(this,!1,eIe,t)};function eIe(e,t){let n=e.drawCommand;n.shadows=t.shadowMode}var tIe={debugShowBoundingVolume:void 0};Or.prototype.updateShowBoundingVolume=function(e){let t=tIe;t.debugShowBoundingVolume=e,C0(this,!1,nIe,t)};function nIe(e,t){let n=e.drawCommand;n.debugShowBoundingVolume=t.debugShowBoundingVolume}var rj=[],iIe={frameState:void 0,hasSilhouette:void 0};Or.prototype.pushDrawCommands=function(e){let t=rj;t.length=0;let n=iIe;n.hasSilhouette=this._model.hasSilhouette(e),n.frameState=e,C0(this,!0,oIe,n),Gn(e.commandList,t)};function oIe(e,t){let n=t.frameState,i=t.hasSilhouette,o=n.passes,r=rj,a=e.drawCommand;a.pushCommands(n,n.commandList),i&&!o.pick&&a.pushSilhouetteCommands(n,r)}Or.prototype.setArticulationStage=function(e,t){let n=e.split(" ");if(n.length!==2)return;let i=n[0],o=n[1],r=this._runtimeArticulations[i];c(r)&&r.setArticulationStage(o,t)};Or.prototype.applyArticulations=function(){let e=this._runtimeArticulations;for(let t in e)e.hasOwnProperty(t)&&e[t].apply()};var aj=Or;function Du(){this.pointsLength=0,this.trianglesLength=0,this.geometryByteLength=0,this.texturesByteLength=0,this.propertyTablesByteLength=0,this._bufferIdSet={},this._textureIdByteLengths={},this._batchTextureIdMap=new ct}Object.defineProperties(Du.prototype,{batchTexturesByteLength:{get:function(){let e=this._batchTextureIdMap.length,t=this._batchTextureIdMap.values,n=0;for(let i=0;i<e;i++)n+=t[i].byteLength;return n}}});Du.prototype.clear=function(){this.pointsLength=0,this.trianglesLength=0,this.geometryByteLength=0,this.texturesByteLength=0,this.propertyTablesByteLength=0,this._bufferIdSet={},this._textureIdByteLengths={},this._batchTextureIdMap.removeAll()};Du.prototype.addBuffer=function(e,t){if(!this._bufferIdSet.hasOwnProperty(e._id)){let n=t?2:1;this.geometryByteLength+=e.sizeInBytes*n}this._bufferIdSet[e._id]=!0};Du.prototype.addTexture=function(e){this._textureIdByteLengths.hasOwnProperty(e._id)||(this.texturesByteLength+=e.sizeInBytes,this._textureIdByteLengths[e._id]=e.sizeInBytes)};Du.prototype.getTextureIds=function(){return Object.keys(this._textureIdByteLengths)};Du.prototype.getTextureByteLengthById=function(e){return this._textureIdByteLengths[e]};Du.prototype.addBatchTexture=function(e){this._batchTextureIdMap.contains(e._id)||this._batchTextureIdMap.set(e._id,e)};var sj=Du;var uj=qr(ex(),1);var cj={},rh=Uint32Array.BYTES_PER_ELEMENT;cj.parse=function(e,t){t=t??0;let n=new Uint8Array(e),i=new DataView(e);t+=rh;let o=i.getUint32(t,!0);if(o!==1)throw new oe(`Only Point Cloud tile version 1 is supported.  Version ${o} is not.`);t+=rh,t+=rh;let r=i.getUint32(t,!0);if(r===0)throw new oe("Feature table must have a byte length greater than zero");t+=rh;let a=i.getUint32(t,!0);t+=rh;let s=i.getUint32(t,!0);t+=rh;let A=i.getUint32(t,!0);t+=rh;let l=_o(n,t,r);t+=r;let f=new Uint8Array(e,t,a);t+=a;let h,m;s>0&&(h=_o(n,t,s),Object.keys(h).length===0&&(h=void 0),t+=s,A>0&&(m=new Uint8Array(e,t,A),m=new Uint8Array(m),t+=A));let p=new _u(l,f),g=p.getGlobalProperty("POINTS_LENGTH");if(p.featuresLength=g,!c(g))throw new oe("Feature table global property: POINTS_LENGTH must be defined");let C=p.getGlobalProperty("RTC_CENTER",N.FLOAT,3);c(C)&&(C=u.unpack(C));let _=rIe(p,h);if(_.rtcCenter=C,_.pointsLength=g,!_.hasPositions){let E=aIe(p);_.positions=E,_.hasPositions=_.hasPositions||c(E)}if(!_.hasPositions)throw new oe("Either POSITION or POSITION_QUANTIZED must be defined.");if(!_.hasNormals){let E=cIe(p);_.normals=E,_.hasNormals=_.hasNormals||c(E)}if(!_.hasColors){let E=sIe(p);_.colors=E,_.hasColors=_.hasColors||c(E),_.hasConstantColor=c(_.constantColor),_.isTranslucent=c(E)&&E.isTranslucent}if(!_.hasBatchIds){let E=AIe(p);_.batchIds=E,_.hasBatchIds=_.hasBatchIds||c(E)}if(_.hasBatchIds){let E=p.getGlobalProperty("BATCH_LENGTH");if(!c(E))throw new oe("Global property: BATCH_LENGTH must be defined when BATCH_ID is defined.");_.batchLength=E}return(c(h)||c(m))&&(_.batchTableJson=h,_.batchTableBinary=m),_};function rIe(e,t){let n=e.json,i,o,r,a=c(n.extensions)?n.extensions["3DTILES_draco_point_compression"]:void 0,s=c(t)&&c(t.extensions)?t.extensions["3DTILES_draco_point_compression"]:void 0;c(s)&&(r=s.properties);let A,l,f,h,m;if(c(a)){o=a.properties;let g=a.byteOffset,C=a.byteLength;if(!c(o)||!c(g)||!c(C))throw new oe("Draco properties, byteOffset, and byteLength must be defined");i=e.buffer.slice(g,g+C),A=c(o.POSITION),l=c(o.RGB)||c(o.RGBA),f=c(o.NORMAL),h=c(o.BATCH_ID),m=c(o.RGBA)}let p;return c(i)&&(p={buffer:i,featureTableProperties:o,batchTableProperties:r,properties:Et(o,r),dequantizeInShader:!0}),{draco:p,hasPositions:A,hasColors:l,isTranslucent:m,hasNormals:f,hasBatchIds:h}}function aIe(e){let t=e.json,n;if(c(t.POSITION))return n=e.getPropertyArray("POSITION",N.FLOAT,3),{name:Pe.POSITION,semantic:Pe.POSITION,typedArray:n,isQuantized:!1,componentDatatype:N.FLOAT,type:st.VEC3};if(c(t.POSITION_QUANTIZED)){n=e.getPropertyArray("POSITION_QUANTIZED",N.UNSIGNED_SHORT,3);let i=e.getGlobalProperty("QUANTIZED_VOLUME_SCALE",N.FLOAT,3);if(!c(i))throw new oe("Global property: QUANTIZED_VOLUME_SCALE must be defined for quantized positions.");let o=65535,r=e.getGlobalProperty("QUANTIZED_VOLUME_OFFSET",N.FLOAT,3);if(!c(r))throw new oe("Global property: QUANTIZED_VOLUME_OFFSET must be defined for quantized positions.");return{name:Pe.POSITION,semantic:Pe.POSITION,typedArray:n,isQuantized:!0,componentDatatype:N.FLOAT,type:st.VEC3,quantizedRange:o,quantizedVolumeOffset:u.unpack(r),quantizedVolumeScale:u.unpack(i),quantizedComponentDatatype:N.UNSIGNED_SHORT,quantizedType:st.VEC3}}}function sIe(e){let t=e.json,n;if(c(t.RGBA))return n=e.getPropertyArray("RGBA",N.UNSIGNED_BYTE,4),{name:Pe.COLOR,semantic:Pe.COLOR,setIndex:0,typedArray:n,componentDatatype:N.UNSIGNED_BYTE,type:st.VEC4,normalized:!0,isRGB565:!1,isTranslucent:!0};if(c(t.RGB))return n=e.getPropertyArray("RGB",N.UNSIGNED_BYTE,3),{name:"COLOR",semantic:Pe.COLOR,setIndex:0,typedArray:n,componentDatatype:N.UNSIGNED_BYTE,type:st.VEC3,normalized:!0,isRGB565:!1,isTranslucent:!1};if(c(t.RGB565))return n=e.getPropertyArray("RGB565",N.UNSIGNED_SHORT,1),{name:"COLOR",semantic:Pe.COLOR,setIndex:0,typedArray:n,componentDatatype:N.FLOAT,type:st.VEC3,normalized:!1,isRGB565:!0,isTranslucent:!1};if(c(t.CONSTANT_RGBA)){let i=e.getGlobalProperty("CONSTANT_RGBA",N.UNSIGNED_BYTE,4),o=i[3],r=F.fromBytes(i[0],i[1],i[2],o),a=o<255;return{name:Pe.COLOR,semantic:Pe.COLOR,setIndex:0,constantColor:r,componentDatatype:N.FLOAT,type:st.VEC4,isQuantized:!1,isTranslucent:a}}}function cIe(e){let t=e.json,n;if(c(t.NORMAL))return n=e.getPropertyArray("NORMAL",N.FLOAT,3),{name:Pe.NORMAL,semantic:Pe.NORMAL,typedArray:n,octEncoded:!1,octEncodedZXY:!1,componentDatatype:N.FLOAT,type:st.VEC3};if(c(t.NORMAL_OCT16P))return n=e.getPropertyArray("NORMAL_OCT16P",N.UNSIGNED_BYTE,2),{name:Pe.NORMAL,semantic:Pe.NORMAL,typedArray:n,octEncoded:!0,octEncodedZXY:!1,quantizedRange:(1<<8)-1,quantizedType:st.VEC2,quantizedComponentDatatype:N.UNSIGNED_BYTE,componentDatatype:N.FLOAT,type:st.VEC3}}function AIe(e){let t=e.json;if(c(t.BATCH_ID)){let n=e.getPropertyArray("BATCH_ID",N.UNSIGNED_SHORT,1);return{name:Pe.FEATURE_ID,semantic:Pe.FEATURE_ID,setIndex:0,typedArray:n,componentDatatype:N.fromTypedArray(n),type:st.SCALAR}}}var Aj=cj;var lIe=Lt.Components,fIe=Lt.Scene,uIe=Lt.Node,dIe=Lt.Primitive,hIe=Lt.Attribute,lj=Lt.Quantization,mIe=Lt.FeatureIdAttribute,pIe=Lt.Material,gIe=Lt.MetallicRoughness;function Qu(e){e=e??k.EMPTY_OBJECT;let t=e.arrayBuffer,n=e.byteOffset??0;this._arrayBuffer=t,this._byteOffset=n,this._loadAttributesFor2D=e.loadAttributesFor2D??!1,this._parsedContent=void 0,this._decodePromise=void 0,this._decodedAttributes=void 0,this._promise=void 0,this._error=void 0,this._state=Fe.UNLOADED,this._buffers=[],this._components=void 0,this._transform=O.IDENTITY}c(Object.create)&&(Qu.prototype=Object.create(zn.prototype),Qu.prototype.constructor=Qu);Object.defineProperties(Qu.prototype,{cacheKey:{get:function(){}},components:{get:function(){return this._components}},transform:{get:function(){return this._transform}}});Qu.prototype.load=function(){if(c(this._promise))return this._promise;this._parsedContent=Aj.parse(this._arrayBuffer,this._byteOffset),this._state=Fe.PROCESSING,this._promise=Promise.resolve(this)};Qu.prototype.process=function(e){if(c(this._error)){let t=this._error;throw this._error=void 0,t}if(this._state===Fe.READY)return!0;if(this._state===Fe.PROCESSING){if(c(this._decodePromise))return!1;this._decodePromise=CIe(this,e.context)}return!1};function CIe(e,t){let i=e._parsedContent.draco,o;if(c(i)?o=db.decodePointCloud(i,t):o=Promise.resolve(),!!c(o))return e._decodePromise=o,o.then(function(r){if(!e.isDestroyed())return c(r)&&_Ie(e,i,r),QIe(e,t),e._state=Fe.READY,e}).catch(function(r){e.unload(),e._state=Fe.FAILED;let a="Failed to load Draco pnts";e._error=e.getError(a,r)})}function _Ie(e,t,n){e._state=Fe.READY;let i=e._parsedContent,o;if(c(n.POSITION)){if(o={name:"POSITION",semantic:Pe.POSITION,typedArray:n.POSITION.array,componentDatatype:N.FLOAT,type:st.VEC3,isQuantized:!1},c(n.POSITION.data.quantization)){let s=n.POSITION.data.quantization,A=s.range,l=u.fromElements(A,A,A),f=u.unpack(s.minValues),h=(1<<s.quantizationBits)-1;o.isQuantized=!0,o.quantizedRange=h,o.quantizedVolumeOffset=f,o.quantizedVolumeScale=l,o.quantizedComponentDatatype=h<=255?N.UNSIGNED_BYTE:N.UNSIGNED_SHORT,o.quantizedType=st.VEC3}i.positions=o}if(c(n.NORMAL)){if(o={name:"NORMAL",semantic:Pe.NORMAL,typedArray:n.NORMAL.array,componentDatatype:N.FLOAT,type:st.VEC3,isQuantized:!1,octEncoded:!1,octEncodedZXY:!1},c(n.NORMAL.data.quantization)){let s=(1<<n.NORMAL.data.quantization.quantizationBits)-1;o.quantizedRange=s,o.octEncoded=!0,o.octEncodedZXY=!0,o.quantizedComponentDatatype=N.UNSIGNED_BYTE,o.quantizedType=st.VEC2}i.normals=o}if(c(n.RGBA)?i.colors={name:"COLOR",semantic:Pe.COLOR,setIndex:0,typedArray:n.RGBA.array,componentDatatype:N.UNSIGNED_BYTE,type:st.VEC4,normalized:!0,isTranslucent:!0}:c(n.RGB)&&(i.colors={name:"COLOR",semantic:Pe.COLOR,setIndex:0,typedArray:n.RGB.array,componentDatatype:N.UNSIGNED_BYTE,type:st.VEC3,normalized:!0,isTranslucent:!1}),c(n.BATCH_ID)){let s=n.BATCH_ID.array;i.batchIds={name:"_FEATURE_ID",semantic:Pe.FEATURE_ID,setIndex:0,typedArray:s,componentDatatype:N.fromTypedArray(s),type:st.SCALAR}}let r=i.batchTableJson,a=t.batchTableProperties;for(let s in a)if(a.hasOwnProperty(s)){let A=n[s];c(r)||(r={}),i.hasDracoBatchTable=!0;let l=A.data;r[s]={byteOffset:l.byteOffset,type:EIe(l.componentsPerAttribute),componentType:IIe(l.componentDatatype),typedArray:A.array}}i.batchTableJson=r}function EIe(e){switch(e){case 1:return"SCALAR";case 2:return"VEC2";case 3:return"VEC3";case 4:return"VEC4"}}function IIe(e){switch(e){case V.BYTE:return"BYTE";case V.UNSIGNED_BYTE:return"UNSIGNED_BYTE";case V.SHORT:return"SHORT";case V.UNSIGNED_SHORT:return"UNSIGNED_SHORT";case V.INT:return"INT";case V.UNSIGNED_INT:return"UNSIGNED_INT";case V.DOUBLE:return"DOUBLE";case V.FLOAT:return"FLOAT"}}function w_(e,t,n){let i=t.typedArray,o;if(t.octEncoded&&(o=new lj,o.octEncoded=t.octEncoded,o.octEncodedZXY=t.octEncodedZXY,o.normalizationRange=t.quantizedRange,o.type=t.quantizedType,o.componentDatatype=t.quantizedComponentDatatype),t.isQuantized){o=new lj;let s=t.quantizedRange;o.normalizationRange=s,o.quantizedVolumeOffset=u.ZERO;let A=t.quantizedVolumeScale;o.quantizedVolumeDimensions=A,o.quantizedVolumeStepSize=u.divideByScalar(A,s,new u),o.componentDatatype=t.quantizedComponentDatatype,o.type=t.quantizedType}let r=new hIe;if(r.name=t.name,r.semantic=t.semantic,r.setIndex=t.setIndex,r.componentDatatype=t.componentDatatype,r.type=t.type,r.normalized=t.normalized??!1,r.min=t.min,r.max=t.max,r.quantization=o,t.isRGB565&&(i=ni.decodeRGB565(i)),c(t.constantColor)){let s=new Array(4);r.constant=F.pack(t.constantColor,s)}else{let s=dt.createVertexBuffer({typedArray:i,context:n,usage:Me.STATIC_DRAW});s.vertexArrayDestroyable=!1,e._buffers.push(s),r.buffer=s}let a=e._loadAttributesFor2D;return r.semantic===Pe.POSITION&&a&&(r.typedArray=i),r}var fj,_0;function yIe(e){if(!c(_0)){fj=new uj.default(0),_0=new Array(e);for(let t=0;t<e;++t)_0[t]=fj.random()}return _0}var bIe=new u,BIe=new u,xIe=new u;function TIe(e){let t=e.typedArray,n=20,i=t.length/3,o=Math.min(i,n),r=yIe(n),a=Number.MAX_VALUE,s=-Number.MAX_VALUE,A=u.fromElements(a,a,a,bIe),l=u.fromElements(s,s,s,BIe),f,h,m;if(e.isQuantized)A=u.ZERO,l=e.quantizedVolumeScale;else for(f=0;f<o;++f)h=Math.floor(r[f]*i),m=u.unpack(t,h*3,xIe),u.minimumByComponent(A,m,A),u.maximumByComponent(l,m,l);e.min=u.clone(A),e.max=u.clone(l)}var SIe={name:Pe.COLOR,semantic:Pe.COLOR,setIndex:0,constantColor:F.DARKGRAY,componentDatatype:N.FLOAT,type:st.VEC4,isQuantized:!1,isTranslucent:!1};function wIe(e,t,n){let i=[],o,r=t.positions;return c(r)&&(TIe(r),o=w_(e,r,n),o.count=t.pointsLength,i.push(o)),c(t.normals)&&(o=w_(e,t.normals,n),i.push(o)),c(t.colors)?(o=w_(e,t.colors,n),i.push(o)):(o=w_(e,SIe,n),i.push(o)),c(t.batchIds)&&(o=w_(e,t.batchIds,n),i.push(o)),i}function DIe(e,t){let n=e.batchLength,i=e.pointsLength,o=e.batchTableJson,r=e.batchTableBinary,a=!c(e.batchIds);return c(r)||c(o)||e.hasDracoBatchTable?qm({count:n??i,batchTable:o,binaryBody:r,parseAsPropertyAttributes:a,customAttributeOutput:t}):new Pr({schema:{},propertyTables:[]})}function QIe(e,t){let n=e._parsedContent,i=new gIe;i.metallicFactor=0,i.roughnessFactor=.9;let o=new pIe;o.metallicRoughness=i;let r=n.colors;c(r)&&r.isTranslucent&&(o.alphaMode=Wd.BLEND);let a=!c(n.normals);o.unlit=a;let s=new dIe;if(s.attributes=wIe(e,n,t),s.primitiveType=Ce.POINTS,s.material=o,c(n.batchIds)){let p=new mIe;p.propertyTableId=0,p.setIndex=0,p.positionalLabel="featureId_0",s.featureIds.push(p)}let A=new uIe;A.index=0,A.primitives=[s];let l=new fIe;l.nodes=[A],l.upAxis=fi.Z,l.forwardAxis=fi.X;let f=new lIe;f.scene=l,f.nodes=[A];let h=[];f.structuralMetadata=DIe(n,h),h.length>0&&RIe(e,s,h,t),c(n.rtcCenter)&&(f.transform=O.multiplyByTranslation(f.transform,n.rtcCenter,f.transform));let m=n.positions;c(m)&&m.isQuantized&&(f.transform=O.multiplyByTranslation(f.transform,m.quantizedVolumeOffset,f.transform)),e._components=f,e._parsedContent=void 0,e._arrayBuffer=void 0}function RIe(e,t,n,i){let o=t.attributes,r=n.length;for(let a=0;a<r;a++){let s=n[a],A=dt.createVertexBuffer({typedArray:s.typedArray,context:i,usage:Me.STATIC_DRAW});A.vertexArrayDestroyable=!1,e._buffers.push(A),s.buffer=A,s.typedArray=void 0,o.push(s)}t.propertyAttributeIds=[0]}Qu.prototype.unload=function(){let e=this._buffers;for(let t=0;t<e.length;t++)e[t].destroy();e.length=0,this._components=void 0,this._parsedContent=void 0,this._arrayBuffer=void 0};var dj=Qu;var vIe=new u,PIe=new u,MIe=new u,OIe=new O,LIe=new O,NIe=new O,FIe=new ae,kIe=new ee;function kD(e,t,n,i,o,r,a){if(!e._ready||n.mode===Te.MORPHING)return;let s=Number.MAX_VALUE,A=e.sceneGraph,l=A._runtimeNodes;for(let f=0;f<l.length;f++){let h=l[f],m=h.node,p=O.clone(h.computedTransform,OIe),g=O.clone(A.computedModelMatrix,LIe),C=m.instances;c(C)&&C.transformInWorldSpace&&(g=O.multiplyTransformation(e.modelMatrix,A.components.transform,g),p=O.multiplyTransformation(A.axisCorrectionMatrix,h.computedTransform,p));let _=O.multiplyTransformation(g,p,NIe);n.mode!==Te.SCENE3D&&(_=Rn.basisTo2D(n.mapProjection,_,_));let E=[];if(c(C)){let y=C.attributes[0].count,b=C.attributes[0].componentDatatype,x=12,S=h.transformsTypedArray;if(!c(S)){let P=h.instancingTransformsBuffer;c(P)&&n.context.webgl2&&(S=N.createTypedArray(b,y*x),P.getBufferData(S))}if(c(S))for(let P=0;P<y;P++){let D=P*x,Q=new O(S[D],S[D+1],S[D+2],S[D+3],S[D+4],S[D+5],S[D+6],S[D+7],S[D+8],S[D+9],S[D+10],S[D+11],0,0,0,1);C.transformInWorldSpace?(O.multiplyTransformation(Q,p,Q),O.multiplyTransformation(g,Q,Q)):O.multiplyTransformation(Q,_,Q),E.push(Q)}}E.length===0&&E.push(_);let I=h.runtimePrimitives.length;for(let y=0;y<I;y++){let b=h.runtimePrimitives[y],x=b.primitive;if(c(b.boundingSphere)&&!c(C)){let de=ee.transform(b.boundingSphere,_,kIe),he=Ni.raySphere(t,de);if(!c(he))continue}let S=tt.getAttributeBySemantic(x,Pe.POSITION),P=S.byteOffset,D=S.byteStride,Q=S.count;if(!c(x.indices))continue;let v=x.indices.typedArray;if(!c(v)){let de=x.indices.buffer,he=x.indices.count,Se=x.indices.indexDatatype;c(de)&&n.context.webgl2&&(Se===Be.UNSIGNED_BYTE?v=new Uint8Array(he):Se===Be.UNSIGNED_SHORT?v=new Uint16Array(he):Se===Be.UNSIGNED_INT&&(v=new Uint32Array(he)),de.getBufferData(v))}let d=S.typedArray,B=S.componentDatatype,T=S.type,R=S.quantization;c(R)&&(B=S.quantization.componentDatatype,T=S.quantization.type);let L=st.getNumberOfComponents(T),G=N.getSizeInBytes(B),q=!c(d)&&c(D)&&D!==L*G,z=L,K=0;q&&(z=D/G,K=P/G);let ie=Q*z;if(!c(d)){let de=S.buffer;c(de)&&n.context.webgl2&&(d=N.createTypedArray(B,ie),de.getBufferData(d,q?0:P,0,ie)),R&&S.normalized&&(d=ni.dequantize(d,B,T,Q))}if(!c(v)||!c(d))return;r=r??Z.default,i=i??1,o=o??0;let le=v.length;for(let de=0;de<le;de+=3){let he=v[de],Se=v[de+1],be=v[de+2];for(let _e of E){let Ct=FD(d,he,K,z,R,_e,i,o,r,vIe),ft=FD(d,Se,K,z,R,_e,i,o,r,PIe),At=FD(d,be,K,z,R,_e,i,o,r,MIe),at=Ni.rayTriangleParametric(t,Ct,ft,At,e.backFaceCulling??!0);c(at)&&at<s&&at>=0&&(s=at)}}}}if(s!==Number.MAX_VALUE){if(a=qa.getPoint(t,s,a),n.mode!==Te.SCENE3D){u.fromElements(a.y,a.z,a.x,a);let f=n.mapProjection,h=f.ellipsoid,m=f.unproject(a,FIe);h.cartographicToCartesian(m,a)}return a}}function FD(e,t,n,i,o,r,a,s,A,l){let f=n+t*i;if(l.x=e[f],l.y=e[f+1],l.z=e[f+2],c(o))if(o.octEncoded){if(l=ni.octDecodeInRange(l,o.normalizationRange,l),o.octEncodedZXY){let h=l.x;l.x=l.z,l.z=l.y,l.y=h}}else l=u.multiplyComponents(l,o.quantizedVolumeStepSize,l),l=u.add(l,o.quantizedVolumeOffset,l);return l=O.multiplyByPoint(r,l,l),a!==1&&EA.getPosition(l,A,a,s,l),l}var UD=class{constructor(t){this.show=t.show,this.alpha=t.alpha,this.brightness=t.brightness,this.contrast=t.contrast,this.hue=t.hue,this.saturation=t.saturation,this.gamma=t.gamma,this.colorToAlpha=t.colorToAlpha}},hj=UD;var GD=class{constructor(t){this._model=t,this._modelPrimitiveImageries=void 0,this._imageryConfigurations=[]}update(t){this._hasImagery&&this._allImageryLayersReady&&(c(this._modelPrimitiveImageries)||(this._modelPrimitiveImageries=this._createModelPrimitiveImageries()),this._updateModelPrimitiveImageries(t),this._checkForModifiedImageryConfigurations())}_createModelPrimitiveImageries(){let t=this._model,n=this._collectRuntimeNodesAndPrimitives(),i=[],o=n.length;for(let r=0;r<o;r++){let a=n[r],s=a.runtimeNode,A=a.runtimePrimitive,l=new d0(t,s,A);A.primitive.modelPrimitiveImagery=l,i.push(l)}return i}_collectRuntimeNodesAndPrimitives(){let i=this._model.sceneGraph._runtimeNodes,o=[];for(let r=0;r<i.length;r++){let a=i[r];if(c(a))for(let s=0;s<a.runtimePrimitives.length;s++){let A=a.runtimePrimitives[s];o.push({runtimeNode:a,runtimePrimitive:A})}}return o}_updateModelPrimitiveImageries(t){if(!c(this._modelPrimitiveImageries))throw new Ee("The modelPrimitiveImageries have not been created");let n=this._modelPrimitiveImageries,i=n.length;for(let o=0;o<i;o++)n[o].update(t)}_deleteModelPrimitiveImageries(){let t=this._modelPrimitiveImageries;if(!c(t))return;let n=t.length;for(let i=0;i<n;i++)t[i].destroy();delete this._modelPrimitiveImageries}get ready(){return this._hasImagery?!(!this._allImageryLayersReady||!this._allModelPrimitiveImageriesReady):!0}get _hasImagery(){let n=this._model.imageryLayers;return c(n)&&n.length>0}get _allImageryLayersReady(){if(!this._hasImagery)return!0;let t=this._model.imageryLayers,n=t.length;for(let i=0;i<n;i++)if(!t.get(i).ready)return!1;return!0}get _allModelPrimitiveImageriesReady(){let t=this._modelPrimitiveImageries;if(!c(t))return!1;let n=t.length;for(let i=0;i<n;i++)if(!t[i].ready)return!1;return!0}_checkForModifiedImageryConfigurations(){this._imageryConfigurationsModified()&&(this._updateImageryConfigurations(),this._model.resetDrawCommands())}_imageryConfigurationsModified(){let n=this._model.imageryLayers,i=this._imageryConfigurations;if(n.length!==i.length)return!0;for(let o=0;o<n.length;o++){let r=n.get(o),a=i[o];if(r.show!==a.show||r.alpha!==a.alpha||r.brightness!==a.brightness||r.contrast!==a.contrast||r.hue!==a.hue||r.saturation!==a.saturation||r.gamma!==a.gamma||r.colorToAlpha!==a.colorToAlpha)return!0}return!1}_updateImageryConfigurations(){let n=this._model.imageryLayers,i=this._imageryConfigurations;i.length=n.length;for(let o=0;o<n.length;o++){let r=n.get(o);i[o]=new hj(r)}}isDestroyed(){return!1}destroy(){if(!this.isDestroyed())return this._deleteModelPrimitiveImageries(),pe(this)}},mj=GD;function $n(e){e=e??k.EMPTY_OBJECT,this._loader=e.loader,this._resource=e.resource,this.type=e.type??lo.GLTF,this.modelMatrix=O.clone(e.modelMatrix??O.IDENTITY),this._modelMatrix=O.clone(this.modelMatrix),this._scale=e.scale??1,this._minimumPixelSize=e.minimumPixelSize??0,this._maximumScale=e.maximumScale,this._clampedScale=c(this._maximumScale)?Math.min(this._scale,this._maximumScale):this._scale,this._computedScale=this._clampedScale,this._updateModelMatrix=!1,this.referenceMatrix=void 0,this._iblReferenceFrameMatrix=J.clone(J.IDENTITY),this._resourcesLoaded=!1,this._drawCommandsBuilt=!1,this._ready=!1,this._customShader=e.customShader,this._content=e.content,this._texturesLoaded=!1,this._defaultTexture=void 0,this._activeAnimations=new Qz(this),this._clampAnimations=e.clampAnimations??!0,this._userAnimationDirty=!1,this._id=e.id,this._idDirty=!1,this._color=F.clone(e.color),this._colorBlendMode=e.colorBlendMode??ns.HIGHLIGHT,this._colorBlendAmount=e.colorBlendAmount??.5;let t=e.silhouetteColor??F.RED;this._silhouetteColor=F.clone(t),this._silhouetteSize=e.silhouetteSize??0,this._silhouetteDirty=!1,this._silhouetteId=void 0,this._cull=e.cull??!0,this._opaquePass=e.opaquePass??Ye.OPAQUE,this._allowPicking=e.allowPicking??!0,this._show=e.show??!0,this._style=void 0,this._styleDirty=!1,this._styleCommandsNeeded=void 0;let n=e.featureIdLabel??"featureId_0";typeof n=="number"&&(n=`featureId_${n}`),this._featureIdLabel=n;let i=e.instanceFeatureIdLabel??"instanceFeatureId_0";typeof i=="number"&&(i=`instanceFeatureId_${i}`),this._instanceFeatureIdLabel=i,this._featureTables=[],this._featureTableId=void 0,this._featureTableIdDirty=!0,this._pipelineResources=[],this._modelResources=[],this._pickIds=[],this._boundingSphere=new ee,this._initialRadius=void 0,this._heightReference=e.heightReference??Ge.NONE,this._heightDirty=this._heightReference!==Ge.NONE,this._removeUpdateHeightCallback=void 0,this._enableVerticalExaggeration=e.enableVerticalExaggeration??!0,this._hasVerticalExaggeration=!1,this._clampedModelMatrix=void 0;let o=e.scene;c(o)&&c(o.terrainProviderChanged)&&(this._terrainProviderChangedCallback=o.terrainProviderChanged.addEventListener(()=>{this._heightDirty=!0})),this._scene=o,this._distanceDisplayCondition=e.distanceDisplayCondition;let r=new Vb(e.pointCloudShading);this._pointCloudShading=r,this._attenuation=r.attenuation,this._pointCloudBackFaceCulling=r.backFaceCulling;let a=e.clippingPlanes;c(a)&&a.owner===void 0?Pl.setOwner(a,this,"_clippingPlanes"):this._clippingPlanes=a,this._clippingPlanesState=0,this._clippingPlanesMatrix=O.clone(O.IDENTITY);let s=e.clippingPolygons;c(s)&&s.owner===void 0?km.setOwner(s,this,"_clippingPolygons"):this._clippingPolygons=s,this._clippingPolygonsState=0,this._modelImagery=new mj(this),this._lightColor=u.clone(e.lightColor),this._imageBasedLighting=c(e.imageBasedLighting)?e.imageBasedLighting:new jy,this._shouldDestroyImageBasedLighting=!c(e.imageBasedLighting),this._environmentMapManager=void 0;let A=new Um(e.environmentMapOptions);Um.setOwner(A,this,"_environmentMapManager"),this._backFaceCulling=e.backFaceCulling??!0,this._backFaceCullingDirty=!1,this._shadows=e.shadows??cn.ENABLED,this._shadowsDirty=!1,this._debugShowBoundingVolumeDirty=!1,this._debugShowBoundingVolume=e.debugShowBoundingVolume??!1,this._enableDebugWireframe=e.enableDebugWireframe??!1,this._enableShowOutline=e.enableShowOutline??!0,this._debugWireframe=e.debugWireframe??!1,this._debugWireframe===!0&&this._enableDebugWireframe===!1&&this.type===lo.GLTF&&jt("model-debug-wireframe-ignored","enableDebugWireframe must be set to true in Model.fromGltf, otherwise debugWireframe will be ignored.");let l=e.credit;typeof l=="string"&&(l=new fn(l)),this._credits=[],this._credit=l,this._resourceCredits=[],this._gltfCredits=[],this._showCreditsOnScreen=e.showCreditsOnScreen??!1,this._showCreditsOnScreenDirty=!0,this._splitDirection=e.splitDirection??Zo.NONE,this._enableShowOutline=e.enableShowOutline??!0,this.showOutline=e.showOutline??!0,this.outlineColor=e.outlineColor??F.BLACK,this._classificationType=e.classificationType,this._statistics=new sj,this._sceneMode=void 0,this._projectTo2D=e.projectTo2D??!1,this._enablePick=e.enablePick??!1,this._fogRenderable=void 0,this._skipLevelOfDetail=!1,this._ignoreCommands=e.ignoreCommands??!1,this._errorEvent=new fe,this._readyEvent=new fe,this._texturesReadyEvent=new fe,this._sceneGraph=void 0,this._nodesByName={},this.pickObject=e.pickObject}function zD(e,t){if(e._errorEvent.numberOfListeners>0){e._errorEvent.raiseEvent(t);return}console.log(t)}function UIe(e,t){let n=e._featureTables,i=t.propertyTables,o=i.length;for(let r=0;r<o;r++){let a=i[r],s=new vz({model:e,propertyTable:a});n.push(s)}return n}function GIe(e,t){let n=t._featureIdLabel,i=t._instanceFeatureIdLabel,o,r,a,s;for(o=0;o<e.nodes.length;o++)if(s=e.nodes[o],c(s.instances)&&(a=tt.getFeatureIdsByLabel(s.instances.featureIds,i),c(a)&&c(a.propertyTableId)))return a.propertyTableId;for(o=0;o<e.nodes.length;o++)for(s=e.nodes[o],r=0;r<s.primitives.length;r++){let A=s.primitives[r],l=tt.getFeatureIdsByLabel(A.featureIds,n);if(c(l))return l.propertyTableId}if(t._featureTables.length===1)return 0}function jD(e,t){if(!c(e)&&!c(t))return!1;if(c(e)!==c(t))return!0;let n=e.alpha,i=t.alpha;return Math.floor(n)!==Math.floor(i)||Math.ceil(n)!==Math.ceil(i)}Object.defineProperties($n.prototype,{ready:{get:function(){return this._ready}},errorEvent:{get:function(){return this._errorEvent}},readyEvent:{get:function(){return this._readyEvent}},incrementallyLoadTextures:{get:function(){return this._loader.incrementallyLoadTextures??!1}},texturesReadyEvent:{get:function(){return this._texturesReadyEvent}},loader:{get:function(){return this._loader}},statistics:{get:function(){return this._statistics}},activeAnimations:{get:function(){return this._activeAnimations}},clampAnimations:{get:function(){return this._clampAnimations},set:function(e){this._clampAnimations=e}},cull:{get:function(){return this._cull}},opaquePass:{get:function(){return this._opaquePass}},pointCloudShading:{get:function(){return this._pointCloudShading},set:function(e){e!==this._pointCloudShading&&this.resetDrawCommands(),this._pointCloudShading=e}},customShader:{get:function(){return this._customShader},set:function(e){e!==this._customShader&&this.resetDrawCommands(),this._customShader=e}},sceneGraph:{get:function(){return this._sceneGraph}},content:{get:function(){return this._content}},heightReference:{get:function(){return this._heightReference},set:function(e){e!==this._heightReference&&(this._heightDirty=!0),this._heightReference=e}},distanceDisplayCondition:{get:function(){return this._distanceDisplayCondition},set:function(e){this._distanceDisplayCondition=rt.clone(e,this._distanceDisplayCondition)}},structuralMetadata:{get:function(){return this._sceneGraph.components.structuralMetadata}},featureTableId:{get:function(){return this._featureTableId},set:function(e){this._featureTableId=e}},featureTables:{get:function(){return this._featureTables},set:function(e){this._featureTables=e}},id:{get:function(){return this._id},set:function(e){e!==this._id&&(this._idDirty=!0),this._id=e}},allowPicking:{get:function(){return this._allowPicking}},style:{get:function(){return this._style},set:function(e){this._style=e,this._styleDirty=!0}},color:{get:function(){return this._color},set:function(e){jD(e,this._color)&&this.resetDrawCommands(),this._color=F.clone(e,this._color)}},colorBlendMode:{get:function(){return this._colorBlendMode},set:function(e){this._colorBlendMode=e}},colorBlendAmount:{get:function(){return this._colorBlendAmount},set:function(e){this._colorBlendAmount=e}},silhouetteColor:{get:function(){return this._silhouetteColor},set:function(e){if(!F.equals(e,this._silhouetteColor)){let t=jD(e,this._silhouetteColor);this._silhouetteDirty=this._silhouetteDirty||t}this._silhouetteColor=F.clone(e,this._silhouetteColor)}},silhouetteSize:{get:function(){return this._silhouetteSize},set:function(e){if(e!==this._silhouetteSize){let t=this._silhouetteSize,n=e>0&&t===0||e===0&&t>0;this._silhouetteDirty=this._silhouetteDirty||n,this._backFaceCullingDirty=this._backFaceCullingDirty||n}this._silhouetteSize=e}},boundingSphere:{get:function(){let e=c(this._clampedModelMatrix)?this._clampedModelMatrix:this.modelMatrix;return Cj(this,e),this._boundingSphere}},debugShowBoundingVolume:{get:function(){return this._debugShowBoundingVolume},set:function(e){this._debugShowBoundingVolume!==e&&(this._debugShowBoundingVolumeDirty=!0),this._debugShowBoundingVolume=e}},debugWireframe:{get:function(){return this._debugWireframe},set:function(e){this._debugWireframe!==e&&this.resetDrawCommands(),this._debugWireframe=e,this._debugWireframe===!0&&this._enableDebugWireframe===!1&&this.type===lo.GLTF&&jt("model-debug-wireframe-ignored","enableDebugWireframe must be set to true in Model.fromGltfAsync, otherwise debugWireframe will be ignored.")}},show:{get:function(){return this._show},set:function(e){this._show=e}},featureIdLabel:{get:function(){return this._featureIdLabel},set:function(e){typeof e=="number"&&(e=`featureId_${e}`),e!==this._featureIdLabel&&(this._featureTableIdDirty=!0),this._featureIdLabel=e}},instanceFeatureIdLabel:{get:function(){return this._instanceFeatureIdLabel},set:function(e){typeof e=="number"&&(e=`instanceFeatureId_${e}`),e!==this._instanceFeatureIdLabel&&(this._featureTableIdDirty=!0),this._instanceFeatureIdLabel=e}},clippingPlanes:{get:function(){return this._clippingPlanes},set:function(e){e!==this._clippingPlanes&&(Pl.setOwner(e,this,"_clippingPlanes"),this.resetDrawCommands())}},clippingPolygons:{get:function(){return this._clippingPolygons},set:function(e){e!==this._clippingPolygons&&(km.setOwner(e,this,"_clippingPolygons"),this.resetDrawCommands())}},enableVerticalExaggeration:{get:function(){return this._enableVerticalExaggeration},set:function(e){e!==this._enableVerticalExaggeration&&this.resetDrawCommands(),this._enableVerticalExaggeration=e}},hasVerticalExaggeration:{get:function(){return this._hasVerticalExaggeration}},imageryLayers:{get:function(){if(c(this._content)){let e=this._content.tileset;if(c(e))return e.imageryLayers}}},lightColor:{get:function(){return this._lightColor},set:function(e){c(e)!==c(this._lightColor)&&this.resetDrawCommands(),this._lightColor=u.clone(e,this._lightColor)}},imageBasedLighting:{get:function(){return this._imageBasedLighting},set:function(e){e!==this._imageBasedLighting&&(this._shouldDestroyImageBasedLighting&&!this._imageBasedLighting.isDestroyed()&&this._imageBasedLighting.destroy(),this._imageBasedLighting=e,this._shouldDestroyImageBasedLighting=!1,this.resetDrawCommands())}},environmentMapManager:{get:function(){return this._environmentMapManager},set:function(e){e!==this.environmentMapManager&&(Um.setOwner(e,this,"_environmentMapManager"),this.resetDrawCommands())}},backFaceCulling:{get:function(){return this._backFaceCulling},set:function(e){e!==this._backFaceCulling&&(this._backFaceCullingDirty=!0),this._backFaceCulling=e}},scale:{get:function(){return this._scale},set:function(e){e!==this._scale&&(this._updateModelMatrix=!0),this._scale=e}},computedScale:{get:function(){return this._computedScale}},minimumPixelSize:{get:function(){return this._minimumPixelSize},set:function(e){e!==this._minimumPixelSize&&(this._updateModelMatrix=!0),this._minimumPixelSize=e}},maximumScale:{get:function(){return this._maximumScale},set:function(e){e!==this._maximumScale&&(this._updateModelMatrix=!0),this._maximumScale=e}},shadows:{get:function(){return this._shadows},set:function(e){e!==this._shadows&&(this._shadowsDirty=!0),this._shadows=e}},credit:{get:function(){return this._credit}},showCreditsOnScreen:{get:function(){return this._showCreditsOnScreen},set:function(e){this._showCreditsOnScreen!==e&&(this._showCreditsOnScreenDirty=!0),this._showCreditsOnScreen=e}},splitDirection:{get:function(){return this._splitDirection},set:function(e){this._splitDirection!==e&&this.resetDrawCommands(),this._splitDirection=e}},classificationType:{get:function(){return this._classificationType}},pickIds:{get:function(){return this._pickIds}},styleCommandsNeeded:{get:function(){return this._styleCommandsNeeded}}});$n.prototype.getNode=function(e){return this._nodesByName[e]};$n.prototype.setArticulationStage=function(e,t){this._sceneGraph.setArticulationStage(e,t)};$n.prototype.applyArticulations=function(){this._sceneGraph.applyArticulations()};$n.prototype.getExtension=function(e){return this._loader.components.extensions[e]};$n.prototype.makeStyleDirty=function(){this._styleDirty=!0};$n.prototype.resetDrawCommands=function(){this._drawCommandsBuilt=!1};var zIe=new O,HIe=new J,VIe=new O;$n.prototype.update=function(e){let t=!1;try{t=jIe(this,e)}catch(i){if(!this._loader.incrementallyLoadTextures&&i.name==="TextureError")zD(this,i);else{let o=tt.getError("model",this._resource,i);zD(this,o)}}if(YIe(this,e),qIe(this,e),WIe(this,e),!this._resourcesLoaded&&t){this._resourcesLoaded=!0;let i=this._loader.components;if(!c(i)){if(this._loader.isUnloaded())return;let a=tt.getError("model",this._resource,new oe("Failed to load model."));zD(a),this._rejectLoad=this._rejectLoad&&this._rejectLoad(a)}let o=i.structuralMetadata;c(o)&&o.propertyTableCount>0&&UIe(this,o);let r=new aj({model:this,modelComponents:i});this._sceneGraph=r,this._gltfCredits=r.components.asset.credits}if(!this._resourcesLoaded||e.mode===Te.MORPHING)return;let n=this._modelImagery;if(n.update(e),!(!n.ready&&!(this._content?.tileset?._asynchronouslyLoadImagery??!1))){if(JIe(this),KIe(this),XIe(this,e),ZIe(this),$Ie(this,e),eye(this,e),tye(this,e),nye(this,e),iye(this,e),oye(this,e),rye(this,e),this._defaultTexture=e.context.defaultTexture,aye(this,e),sye(this,e),cye(this),Aye(this,e),dye(this,e),!this._ready){e.afterRender.push(()=>{this._ready=!0,this._readyEvent.raiseEvent(this)});return}this._loader.incrementallyLoadTextures&&!this._texturesLoaded&&this._loader.texturesLoaded&&(this.resetDrawCommands(),this._texturesLoaded=!0,this._texturesReadyEvent.raiseEvent(this)),fye(this),hye(this,e),mye(this),pye(this,e)}};function jIe(e,t){return!e._resourcesLoaded||e._loader.incrementallyLoadTextures&&!e._texturesLoaded?(t.afterRender.push(()=>!0),e._loader.process(t)):!0}function YIe(e,t){c(e._customShader)&&e._customShader.update(t)}function qIe(e,t){let n=e._environmentMapManager,i=t.passes.pick||t.passes.pickVoxel;e._ready&&n.owner===e&&!i&&(n.position=e._boundingSphere.center,n.shouldUpdate=!c(e._imageBasedLighting.sphericalHarmonicCoefficients)||!c(e._imageBasedLighting.specularEnvironmentMaps),n.update(t),n.shouldRegenerateShaders&&e.resetDrawCommands())}function WIe(e,t){e._imageBasedLighting.update(t),e._imageBasedLighting.shouldRegenerateShaders&&e.resetDrawCommands()}function JIe(e){if(!e._featureTableIdDirty)return;e._featureTableIdDirty=!1;let t=e._sceneGraph.components,n=t.structuralMetadata;c(n)&&n.propertyTableCount>0&&(e.featureTableId=GIe(t,e),e._styleDirty=!0,e.resetDrawCommands())}function KIe(e){e._styleDirty&&(e.applyStyle(e._style),e._styleDirty=!1)}function XIe(e,t){let n=e._featureTables,i=n.length,o=!1;for(let r=0;r<i;r++)n[r].update(t),n[r].styleCommandsNeededDirty&&(o=!0);o&&gj(e)}function gj(e){let t=e.featureTables[e.featureTableId];e._styleCommandsNeeded=Bu.getStyleCommandsNeeded(t.featuresLength,t.batchTexture.translucentFeaturesLength)}function ZIe(e){let t=e.pointCloudShading;t.attenuation!==e._attenuation&&(e.resetDrawCommands(),e._attenuation=t.attenuation),t.backFaceCulling!==e._pointCloudBackFaceCulling&&(e.resetDrawCommands(),e._pointCloudBackFaceCulling=t.backFaceCulling)}function $Ie(e,t){e._silhouetteDirty&&(_j(t)&&e.resetDrawCommands(),e._silhouetteDirty=!1)}function eye(e,t){let n=e.hasSkipLevelOfDetail(t);n!==e._skipLevelOfDetail&&(e.resetDrawCommands(),e._skipLevelOfDetail=n)}function tye(e,t){let n=0;e.isClippingEnabled()&&(e._clippingPlanes.owner===e&&e._clippingPlanes.update(t),n=e._clippingPlanes.clippingPlanesState),n!==e._clippingPlanesState&&(e.resetDrawCommands(),e._clippingPlanesState=n)}function nye(e,t){let n=0;e.isClippingPolygonsEnabled()&&(e._clippingPolygons.owner===e&&(e._clippingPolygons.update(t),e._clippingPolygons.queueCommands(t)),n=e._clippingPolygons.clippingPolygonsState),n!==e._clippingPolygonsState&&(e.resetDrawCommands(),e._clippingPolygonsState=n)}function iye(e,t){t.mode!==e._sceneMode&&(e._projectTo2D?e.resetDrawCommands():e._updateModelMatrix=!0,e._sceneMode=t.mode)}function oye(e,t){let n=t.fog.enabled&&t.fog.renderable;n!==e._fogRenderable&&(e.resetDrawCommands(),e._fogRenderable=n)}function rye(e,t){if(e.enableVerticalExaggeration){let n=t.verticalExaggeration!==1;e.hasVerticalExaggeration!==n&&(e.resetDrawCommands(),e._hasVerticalExaggeration=n)}else e.hasVerticalExaggeration&&(e.resetDrawCommands(),e._hasVerticalExaggeration=!1)}function aye(e,t){e._drawCommandsBuilt||(e.destroyPipelineResources(),e._sceneGraph.buildDrawCommands(t),e._drawCommandsBuilt=!0)}function sye(e,t){O.equals(e.modelMatrix,e._modelMatrix)||(e._updateModelMatrix=!0,e._modelMatrix=O.clone(e.modelMatrix,e._modelMatrix))}var Ru=new u,HD=new ae;function cye(e){if(!e._updateModelMatrix&&!e._heightDirty&&e._minimumPixelSize===0)return;c(e._removeUpdateHeightCallback)&&(e._removeUpdateHeightCallback(),e._removeUpdateHeightCallback=void 0);let t=e._scene;if(!c(t)||e.heightReference===Ge.NONE){e._clampedModelMatrix=void 0;return}let n=t.ellipsoid??Z.default,i=e.modelMatrix;Ru.x=i[12],Ru.y=i[13],Ru.z=i[14];let o=n.cartesianToCartographic(Ru);c(e._clampedModelMatrix)||(e._clampedModelMatrix=O.clone(i,new O)),e._removeUpdateHeightCallback=t.updateHeight(o,pj(e,n,o),e.heightReference);let r=t.getHeight(o,e.heightReference);if(c(r)){let a=pj(e,n,o);ae.clone(o,HD),HD.height=r,a(HD)}e._heightDirty=!1,e._updateModelMatrix=!0}function Aye(e,t){if(!e._updateModelMatrix&&e._minimumPixelSize===0)return;let n=c(e._clampedModelMatrix)?e._clampedModelMatrix:e.modelMatrix;Cj(e,n),lye(e,n,t)}function Cj(e,t){e._clampedScale=c(e._maximumScale)?Math.min(e._scale,e._maximumScale):e._scale,e._boundingSphere.center=u.multiplyByScalar(e._sceneGraph.boundingSphere.center,e._clampedScale,e._boundingSphere.center),e._boundingSphere.radius=e._initialRadius*e._clampedScale,e._boundingSphere=ee.transform(e._boundingSphere,t,e._boundingSphere)}function lye(e,t,n){let i=e.scale;if(e.minimumPixelSize!==0&&!e._projectTo2D){let o=n.context,r=Math.max(o.drawingBufferWidth,o.drawingBufferHeight);O.getTranslation(t,Ru),e._sceneMode!==Te.SCENE3D&&dr.computeActualEllipsoidPosition(n,Ru,Ru);let a=e._boundingSphere.radius,s=gye(Ru,a,n),A=1/s;Math.min(A*(2*a),r)<e.minimumPixelSize&&(i=e.minimumPixelSize*s/(2*e._initialRadius))}e._computedScale=c(e.maximumScale)?Math.min(e.maximumScale,i):i}function fye(e){if(!e._idDirty)return;e._idDirty=!1;let t=e._id,n=e._pickIds,i=n.length;for(let o=0;o<i;++o)n[o].object.id=t}var uye=new J(1,0,0,0,0,1,0,-1,0);function dye(e,t){let n=c(e._clampedModelMatrix)?e._clampedModelMatrix:e.modelMatrix,i=e.referenceMatrix??n,o=t.context,r=HIe,a=zIe;if(a=O.multiply(o.uniformState.view3D,i,a),r=O.getRotation(a,r),r=J.transpose(r,r),e._iblReferenceFrameMatrix=J.multiply(uye,r,e._iblReferenceFrameMatrix),e.isClippingEnabled()){let s=VIe;s=O.multiply(o.uniformState.view3D,i,s),s=O.multiply(s,e._clippingPlanes.modelMatrix,s),e._clippingPlanesMatrix=O.inverseTranspose(s,e._clippingPlanesMatrix)}}function hye(e,t){let n=e._sceneGraph;if(e._updateModelMatrix||e._minimumPixelSize!==0){let o=c(e._clampedModelMatrix)?e._clampedModelMatrix:e.modelMatrix;n.updateModelMatrix(o,t),e._updateModelMatrix=!1}e._backFaceCullingDirty&&(n.updateBackFaceCulling(e._backFaceCulling),e._backFaceCullingDirty=!1),e._shadowsDirty&&(n.updateShadows(e._shadows),e._shadowsDirty=!1),e._debugShowBoundingVolumeDirty&&(n.updateShowBoundingVolume(e._debugShowBoundingVolume),e._debugShowBoundingVolumeDirty=!1);let i=!1;c(e.classificationType)||(i=e._userAnimationDirty||e._activeAnimations.update(t)),n.update(t,i),e._userAnimationDirty=!1}function mye(e){if(!e._showCreditsOnScreenDirty)return;e._showCreditsOnScreenDirty=!1,e._credits.length=0;let t=e._showCreditsOnScreen;if(c(e._credit)){let a=fn.clone(e._credit);a.showOnScreen=a.showOnScreen||t,e._credits.push(a)}let n=e._resourceCredits,i=n.length;for(let a=0;a<i;a++){let s=fn.clone(n[a]);s.showOnScreen=s.showOnScreen||t,e._credits.push(s)}let o=e._gltfCredits,r=o.length;for(let a=0;a<r;a++){let s=fn.clone(o[a]);s.showOnScreen=s.showOnScreen||t,e._credits.push(s)}}function pye(e,t){let n=_ye(e,t),i=e.isInvisible(),o=e.hasSilhouette(t),r=e._show&&e._computedScale!==0&&n&&(!i||o),a=t.passes,s=a.render||a.pick&&e.allowPicking;r&&!e._ignoreCommands&&s&&(Eye(e,t),e._sceneGraph.pushDrawCommands(t))}var VD=new ee;function gye(e,t,n){return VD.center=e,VD.radius=t,n.camera.getPixelSize(VD,n.context.drawingBufferWidth,n.context.drawingBufferHeight)}var E0=new u;function pj(e,t,n){return function(i){cm(e.heightReference)&&(i.height+=n.height),t.cartographicToCartesian(i,E0);let o=e._clampedModelMatrix;O.clone(e.modelMatrix,o),o[12]=E0.x,o[13]=E0.y,o[14]=E0.z,e._heightDirty=!0}}var Cye=new u;function _ye(e,t){let n=e.distanceDisplayCondition;if(!c(n))return!0;let i=n.near*n.near,o=n.far*n.far,r;if(t.mode===Te.SCENE2D){let s=(t.camera.frustum.right-t.camera.frustum.left)*.5;r=s*s}else{let a=O.getTranslation(e.modelMatrix,Cye);dr.computeActualEllipsoidPosition(t,a,a),r=u.distanceSquared(a,t.camera.positionWC)}return r>=i&&r<=o}function Eye(e,t){let n=t.creditDisplay,i=e._credits,o=i.length;for(let r=0;r<o;r++)n.addCreditToNextFrame(i[r])}$n.prototype.isTranslucent=function(){let e=this.color;return c(e)&&e.alpha>0&&e.alpha<1};$n.prototype.isInvisible=function(){let e=this.color;return c(e)&&e.alpha===0};function _j(e){return e.context.stencilBuffer}$n.prototype.hasSilhouette=function(e){return _j(e)&&this._silhouetteSize>0&&this._silhouetteColor.alpha>0&&!c(this._classificationType)};$n.prototype.hasSkipLevelOfDetail=function(e){if(!lo.is3DTiles(this.type))return!1;let t=e.context.stencilBuffer,n=this._content.tileset;return t&&n.isSkippingLevelOfDetail};$n.prototype.isClippingEnabled=function(){let e=this._clippingPlanes;return c(e)&&e.enabled&&e.length!==0};$n.prototype.pick=function(e,t,n,i,o){return kD(this,e,t,n,i,o)};$n.prototype.isClippingPolygonsEnabled=function(){let e=this._clippingPolygons;return c(e)&&e.enabled&&e.length!==0};$n.prototype.isDestroyed=function(){return!1};$n.prototype.destroy=function(){let e=this._loader;c(e)&&e.destroy();let t=this._featureTables;if(c(t)){let r=t.length;for(let a=0;a<r;a++)t[a].destroy()}this.destroyPipelineResources(),this.destroyModelResources(),c(this._removeUpdateHeightCallback)&&(this._removeUpdateHeightCallback(),this._removeUpdateHeightCallback=void 0),c(this._terrainProviderChangedCallback)&&(this._terrainProviderChangedCallback(),this._terrainProviderChangedCallback=void 0);let n=this._clippingPlanes;c(n)&&!n.isDestroyed()&&n.owner===this&&n.destroy(),this._clippingPlanes=void 0;let i=this._clippingPolygons;c(i)&&!i.isDestroyed()&&i.owner===this&&i.destroy(),this._clippingPolygons=void 0,this._shouldDestroyImageBasedLighting&&!this._imageBasedLighting.isDestroyed()&&this._imageBasedLighting.destroy(),this._imageBasedLighting=void 0;let o=this._environmentMapManager;!o.isDestroyed()&&o.owner===this&&o.destroy(),this._environmentMapManager=void 0,pe(this)};$n.prototype.destroyPipelineResources=function(){let e=this._pipelineResources;for(let t=0;t<e.length;t++)e[t].destroy();this._pipelineResources.length=0,this._pickIds.length=0};$n.prototype.destroyModelResources=function(){let e=this._modelResources;for(let t=0;t<e.length;t++)e[t].destroy();this._modelResources.length=0};$n.fromGltfAsync=async function(e){e=e??k.EMPTY_OBJECT;let t=e.url??e.gltf,n={releaseGltfJson:e.releaseGltfJson,asynchronous:e.asynchronous,incrementallyLoadTextures:e.incrementallyLoadTextures,upAxis:e.upAxis,forwardAxis:e.forwardAxis,loadAttributesFor2D:e.projectTo2D,enablePick:e.enablePick,loadIndicesForWireframe:e.enableDebugWireframe,loadPrimitiveOutline:e.enableShowOutline,loadForClassification:c(e.classificationType)},i=e.basePath??"",o=ke.createIfNeeded(i);c(t.asset)?(n.gltfJson=t,n.baseResource=o,n.gltfResource=o):t instanceof Uint8Array?(n.typedArray=t,n.baseResource=o,n.gltfResource=o):n.gltfResource=ke.createIfNeeded(t);let r=new Cu(n),s=c(e.content)?lo.TILE_GLTF:lo.GLTF,A=n.gltfResource,l=D_(r,s,e);l.resource=A,l.environmentMapOptions=e.environmentMapOptions;try{await r.load()}catch(p){throw r.destroy(),tt.getError("model",A,p)}let f=e.gltfCallback;c(f)&&f(r.gltfJson);let h=new $n(l),m=h._resource.credits;if(c(m)){let p=m.length;for(let g=0;g<p;g++)h._resourceCredits.push(fn.clone(m[g]))}return h};$n.fromB3dm=async function(e){let t={b3dmResource:e.resource,arrayBuffer:e.arrayBuffer,byteOffset:e.byteOffset,releaseGltfJson:e.releaseGltfJson,asynchronous:e.asynchronous,incrementallyLoadTextures:e.incrementallyLoadTextures,upAxis:e.upAxis,forwardAxis:e.forwardAxis,loadAttributesFor2D:e.projectTo2D,enablePick:e.enablePick,loadIndicesForWireframe:e.enableDebugWireframe,loadPrimitiveOutline:e.enableShowOutline,loadForClassification:c(e.classificationType)},n=new lz(t);try{await n.load();let i=D_(n,lo.TILE_B3DM,e);return new $n(i)}catch(i){throw n.destroy(),i}};$n.fromPnts=async function(e){let t={arrayBuffer:e.arrayBuffer,byteOffset:e.byteOffset,loadAttributesFor2D:e.projectTo2D},n=new dj(t);try{await n.load();let i=D_(n,lo.TILE_PNTS,e);return new $n(i)}catch(i){throw n.destroy(),i}};$n.fromI3dm=async function(e){let t={i3dmResource:e.resource,arrayBuffer:e.arrayBuffer,byteOffset:e.byteOffset,releaseGltfJson:e.releaseGltfJson,asynchronous:e.asynchronous,incrementallyLoadTextures:e.incrementallyLoadTextures,upAxis:e.upAxis,forwardAxis:e.forwardAxis,loadAttributesFor2D:e.projectTo2D,enablePick:e.enablePick,loadIndicesForWireframe:e.enableDebugWireframe,loadPrimitiveOutline:e.enableShowOutline},n=new gz(t);try{await n.load();let i=D_(n,lo.TILE_I3DM,e);return new $n(i)}catch(i){throw n.destroy(),i}};$n.fromGeoJson=async function(e){let t={geoJson:e.geoJson},n=new dz(t),i=D_(n,lo.TILE_GEOJSON,e);return new $n(i)};var Iye=new F;$n.prototype.applyColorAndShow=function(e){let t=F.clone(this._color,Iye),n=c(e)&&c(e.color),i=c(e)&&c(e.show);this._color=n?e.color.evaluateColor(void 0,this._color):F.clone(F.WHITE,this._color),this._show=i?e.show.evaluate(void 0):!0,jD(t,this._color)&&this.resetDrawCommands()};$n.prototype.applyStyle=function(e){let t=this.type===lo.TILE_PNTS,n=c(this.featureTableId)&&this.featureTables[this.featureTableId].featuresLength>0,i=c(this.structuralMetadata)?this.structuralMetadata.propertyAttributes:void 0,o=c(i)&&c(i[0]);if(t&&(!n||o)){this.resetDrawCommands();return}n?(this.featureTables[this.featureTableId].applyStyle(e),gj(this,e)):(this.applyColorAndShow(e),this._styleCommandsNeeded=void 0)};function D_(e,t,n){return{loader:e,type:t,resource:n.resource,show:n.show,modelMatrix:n.modelMatrix,scale:n.scale,enableVerticalExaggeration:n.enableVerticalExaggeration,minimumPixelSize:n.minimumPixelSize,maximumScale:n.maximumScale,id:n.id,allowPicking:n.allowPicking,clampAnimations:n.clampAnimations,shadows:n.shadows,debugShowBoundingVolume:n.debugShowBoundingVolume,enableDebugWireframe:n.enableDebugWireframe,debugWireframe:n.debugWireframe,cull:n.cull,opaquePass:n.opaquePass,customShader:n.customShader,content:n.content,heightReference:n.heightReference,scene:n.scene,distanceDisplayCondition:n.distanceDisplayCondition,color:n.color,colorBlendAmount:n.colorBlendAmount,colorBlendMode:n.colorBlendMode,silhouetteColor:n.silhouetteColor,silhouetteSize:n.silhouetteSize,enableShowOutline:n.enableShowOutline,showOutline:n.showOutline,outlineColor:n.outlineColor,clippingPlanes:n.clippingPlanes,clippingPolygons:n.clippingPolygons,lightColor:n.lightColor,imageBasedLighting:n.imageBasedLighting,backFaceCulling:n.backFaceCulling,credit:n.credit,showCreditsOnScreen:n.showCreditsOnScreen,splitDirection:n.splitDirection,projectTo2D:n.projectTo2D,enablePick:n.enablePick,featureIdLabel:n.featureIdLabel,instanceFeatureIdLabel:n.instanceFeatureIdLabel,pointCloudShading:n.pointCloudShading,classificationType:n.classificationType,pickObject:n.pickObject}}var Mc=$n;function eo(e,t,n){this._tileset=e,this._tile=t,this._resource=n,this._model=void 0,this._metadata=void 0,this._group=void 0,this._ready=!1}Object.defineProperties(eo.prototype,{featuresLength:{get:function(){let e=this._model,t=e.featureTables,n=e.featureTableId;return c(t)&&c(t[n])?t[n].featuresLength:0}},pointsLength:{get:function(){return this._model.statistics.pointsLength}},trianglesLength:{get:function(){return this._model.statistics.trianglesLength}},geometryByteLength:{get:function(){return this._model.statistics.geometryByteLength}},texturesByteLength:{get:function(){return this._model.statistics.texturesByteLength}},batchTableByteLength:{get:function(){let e=this._model.statistics;return e.propertyTablesByteLength+e.batchTexturesByteLength}},innerContents:{get:function(){}},ready:{get:function(){return this._ready}},tileset:{get:function(){return this._tileset}},tile:{get:function(){return this._tile}},url:{get:function(){return this._resource.getUrlComponent(!0)}},batchTable:{get:function(){let e=this._model,t=e.featureTables,n=e.featureTableId;if(c(t)&&c(t[n]))return t[n]}},metadata:{get:function(){return this._metadata},set:function(e){this._metadata=e}},group:{get:function(){return this._group},set:function(e){this._group=e}}});eo.prototype.getTextureIds=function(){return this._model.statistics.getTextureIds()};eo.prototype.getTextureByteLengthById=function(e){return this._model.statistics.getTextureByteLengthById(e)};eo.prototype.getExtension=function(e){return this._model.getExtension(e)};eo.prototype.getFeature=function(e){let t=this._model,n=t.featureTableId;return t.featureTables[n].getFeature(e)};eo.prototype.hasProperty=function(e,t){let n=this._model,i=n.featureTableId;return c(i)?n.featureTables[i].hasProperty(e,t):!1};eo.prototype.applyDebugSettings=function(e,t){t=e?t:F.WHITE,this.featuresLength===0?this._model.color=t:c(this.batchTable)&&this.batchTable.setAllColor(t)};eo.prototype.applyStyle=function(e){this._model.style=e};eo.prototype.update=function(e,t){let n=this._model,i=this._tile;n.colorBlendAmount=e.colorBlendAmount,n.colorBlendMode=e.colorBlendMode,n.modelMatrix=i.computedTransform,n.customShader=e.customShader,n.featureIdLabel=e.featureIdLabel,n.instanceFeatureIdLabel=e.instanceFeatureIdLabel,n.lightColor=e.lightColor,n.imageBasedLighting=e.imageBasedLighting,n.backFaceCulling=e.backFaceCulling,n.shadows=e.shadows,n.showCreditsOnScreen=e.showCreditsOnScreen,n.splitDirection=e.splitDirection,n.debugWireframe=e.debugWireframe,n.showOutline=e.showOutline,n.outlineColor=e.outlineColor,n.pointCloudShading=e.pointCloudShading;let o=e.clippingPlanes;n.referenceMatrix=e.clippingPlanesOriginMatrix,c(o)&&i.clippingPlanesDirty&&(n._clippingPlanes=o.enabled&&i._isClipped?o:void 0);let r=e.environmentMapManager;n.environmentMapManager!==o&&(n._environmentMapManager=r),c(o)&&c(n._clippingPlanes)&&n._clippingPlanes!==o&&(n._clippingPlanes=o,n._clippingPlanesState=0);let a=e.clippingPolygons;c(a)&&i.clippingPolygonsDirty&&(n._clippingPolygons=a.enabled&&i._isClippedByPolygon?a:void 0),c(a)&&c(n._clippingPolygons)&&n._clippingPolygons!==a&&(n._clippingPolygons=a,n._clippingPolygonsState=0),n.update(t),!this._ready&&n.ready&&(n.activeAnimations.addAll({loop:Rc.REPEAT}),this._ready=!0)};eo.prototype.isDestroyed=function(){return!1};eo.prototype.destroy=function(){return this._model=this._model&&this._model.destroy(),pe(this)};eo.fromGltf=async function(e,t,n,i){let o=new eo(e,t,n),a=Q_(e,t,o,{gltf:i,basePath:n}),s=e.vectorClassificationOnly?void 0:e.classificationType;a.classificationType=s;let A=await Mc.fromGltfAsync(a);return o._model=A,o};eo.fromB3dm=async function(e,t,n,i,o){let r=new eo(e,t,n),s=Q_(e,t,r,{arrayBuffer:i,byteOffset:o,resource:n}),A=e.vectorClassificationOnly?void 0:e.classificationType;s.classificationType=A;let l=await Mc.fromB3dm(s);return r._model=l,r};eo.fromI3dm=async function(e,t,n,i,o){let r=new eo(e,t,n),s=Q_(e,t,r,{arrayBuffer:i,byteOffset:o,resource:n}),A=await Mc.fromI3dm(s);return r._model=A,r};eo.fromPnts=async function(e,t,n,i,o){let r=new eo(e,t,n),s=Q_(e,t,r,{arrayBuffer:i,byteOffset:o,resource:n}),A=await Mc.fromPnts(s);return r._model=A,r};eo.fromGeoJson=async function(e,t,n,i){let o=new eo(e,t,n),a=Q_(e,t,o,{geoJson:i,resource:n}),s=await Mc.fromGeoJson(a);return o._model=s,o};eo.prototype.pick=function(e,t,n){if(!c(this._model)||!this._ready)return;let i=t.verticalExaggeration,o=t.verticalExaggerationRelativeHeight;return this._model.pick(e,t,i,o,Z.WGS84,n)};function Q_(e,t,n,i){let o={cull:!1,releaseGltfJson:!0,opaquePass:Ye.CESIUM_3D_TILE,modelMatrix:t.computedTransform,upAxis:e._modelUpAxis,forwardAxis:e._modelForwardAxis,incrementallyLoadTextures:!1,customShader:e.customShader,content:n,colorBlendMode:e.colorBlendMode,colorBlendAmount:e.colorBlendAmount,lightColor:e.lightColor,imageBasedLighting:e.imageBasedLighting,featureIdLabel:e.featureIdLabel,instanceFeatureIdLabel:e.instanceFeatureIdLabel,pointCloudShading:e.pointCloudShading,clippingPlanes:e.clippingPlanes,backFaceCulling:e.backFaceCulling,shadows:e.shadows,showCreditsOnScreen:e.showCreditsOnScreen,splitDirection:e.splitDirection,enableDebugWireframe:e._enableDebugWireframe,debugWireframe:e.debugWireframe,projectTo2D:e._projectTo2D,enablePick:e._enablePick,enableShowOutline:e._enableShowOutline,showOutline:e.showOutline,outlineColor:e.outlineColor};return Et(i,o)}var LA=eo;function Zs(e,t,n){this._tileset=e,this._tile=t,this._resource=n,this.featurePropertiesDirty=!1,this._metadata=void 0,this._group=void 0,this._ready=!1}Object.defineProperties(Zs.prototype,{featuresLength:{get:function(){return 0}},pointsLength:{get:function(){return 0}},trianglesLength:{get:function(){return 0}},geometryByteLength:{get:function(){return 0}},texturesByteLength:{get:function(){return 0}},batchTableByteLength:{get:function(){return 0}},innerContents:{get:function(){}},ready:{get:function(){return this._ready}},tileset:{get:function(){return this._tileset}},tile:{get:function(){return this._tile}},url:{get:function(){return this._resource.getUrlComponent(!0)}},batchTable:{get:function(){}},metadata:{get:function(){return this._metadata},set:function(e){this._metadata=e}},group:{get:function(){return this._group},set:function(e){this._group=e}}});Zs.fromJson=function(e,t,n,i){let o=new Zs(e,t,n);return o._tileset.loadTileset(o._resource,i,o._tile),o._ready=!0,o};Zs.prototype.hasProperty=function(e,t){return!1};Zs.prototype.getFeature=function(e){};Zs.prototype.applyDebugSettings=function(e,t){};Zs.prototype.applyStyle=function(e){};Zs.prototype.update=function(e,t){};Zs.prototype.pick=function(e,t,n){};Zs.prototype.isDestroyed=function(){return!1};Zs.prototype.destroy=function(){return pe(this)};var Ej=Zs;var Ij=`uniform sampler2D u_atlas;

#ifdef VECTOR_TILE
uniform vec4 u_highlightColor;
#endif

in vec2 v_textureCoordinates;
in vec4 v_pickColor;
in vec4 v_color;
in float v_splitDirection;

#ifdef SDF
in vec4 v_outlineColor;
in float v_outlineWidth;
#endif

#ifdef FRAGMENT_DEPTH_CHECK
in vec4 v_textureCoordinateBounds;                  // the min and max x and y values for the texture coordinates
in vec4 v_originTextureCoordinateAndTranslate;      // texture coordinate at the origin, billboard translate (used for label glyphs)
in vec4 v_compressed;                               // x: eyeDepth, y: applyTranslate & enableDepthCheck, z: dimensions, w: imageSize
in mat2 v_rotationMatrix;

const float SHIFT_LEFT12 = 4096.0;
const float SHIFT_LEFT1 = 2.0;

const float SHIFT_RIGHT12 = 1.0 / 4096.0;
const float SHIFT_RIGHT1 = 1.0 / 2.0;

float getGlobeDepth(vec2 adjustedST, vec2 depthLookupST, bool applyTranslate, vec2 dimensions, vec2 imageSize)
{
    vec2 lookupVector = imageSize * (depthLookupST - adjustedST);
    lookupVector = v_rotationMatrix * lookupVector;
    vec2 labelOffset = (dimensions - imageSize) * (depthLookupST - vec2(0.0, v_originTextureCoordinateAndTranslate.y)); // aligns label glyph with bounding rectangle.  Will be zero for billboards because dimensions and imageSize will be equal

    vec2 translation = v_originTextureCoordinateAndTranslate.zw;

    if (applyTranslate)
    {
        // this is only needed for labels where the horizontal origin is not LEFT
        // it moves the label back to where the "origin" should be since all label glyphs are set to HorizontalOrigin.LEFT
        translation += (dimensions * v_originTextureCoordinateAndTranslate.xy * vec2(1.0, 0.0));
    }

    vec2 st = ((lookupVector - translation + labelOffset) + gl_FragCoord.xy) / czm_viewport.zw;
    float logDepthOrDepth = czm_unpackDepth(texture(czm_globeDepthTexture, st));

    if (logDepthOrDepth == 0.0)
    {
        return 0.0; // not on the globe
    }

    vec4 eyeCoordinate = czm_windowToEyeCoordinates(gl_FragCoord.xy, logDepthOrDepth);
    return eyeCoordinate.z / eyeCoordinate.w;
}
#endif


#ifdef SDF

// Get the distance from the edge of a glyph at a given position sampling an SDF texture.
float getDistance(vec2 position)
{
    return texture(u_atlas, position).r;
}

// Samples the sdf texture at the given position and produces a color based on the fill color and the outline.
vec4 getSDFColor(vec2 position, float outlineWidth, vec4 outlineColor, float smoothing)
{
    float distance = getDistance(position);

    if (outlineWidth > 0.0)
    {
        // Don't get the outline edge exceed the SDF_EDGE
        float outlineEdge = clamp(SDF_EDGE - outlineWidth, 0.0, SDF_EDGE);
        float outlineFactor = smoothstep(SDF_EDGE - smoothing, SDF_EDGE + smoothing, distance);
        vec4 sdfColor = mix(outlineColor, v_color, outlineFactor);
        float alpha = smoothstep(outlineEdge - smoothing, outlineEdge + smoothing, distance);
        return vec4(sdfColor.rgb, sdfColor.a * alpha);
    }
    else
    {
        float alpha = smoothstep(SDF_EDGE - smoothing, SDF_EDGE + smoothing, distance);
        return vec4(v_color.rgb, v_color.a * alpha);
    }
}
#endif

void main()
{
    if (v_splitDirection < 0.0 && gl_FragCoord.x > czm_splitPosition) discard;
    if (v_splitDirection > 0.0 && gl_FragCoord.x < czm_splitPosition) discard;
    
    vec4 color = texture(u_atlas, v_textureCoordinates);

#ifdef SDF
    float outlineWidth = v_outlineWidth;
    vec4 outlineColor = v_outlineColor;

    // Get the current distance
    float distance = getDistance(v_textureCoordinates);

#if (__VERSION__ == 300 || defined(GL_OES_standard_derivatives))
    float smoothing = fwidth(distance);
    // Get an offset that is approximately half the distance to the neighbor pixels
    // 0.354 is approximately half of 1/sqrt(2)
    vec2 sampleOffset = 0.354 * vec2(dFdx(v_textureCoordinates) + dFdy(v_textureCoordinates));

    // Sample the center point
    vec4 center = getSDFColor(v_textureCoordinates, outlineWidth, outlineColor, smoothing);

    // Sample the 4 neighbors
    vec4 color1 = getSDFColor(v_textureCoordinates + vec2(sampleOffset.x, sampleOffset.y), outlineWidth, outlineColor, smoothing);
    vec4 color2 = getSDFColor(v_textureCoordinates + vec2(-sampleOffset.x, sampleOffset.y), outlineWidth, outlineColor, smoothing);
    vec4 color3 = getSDFColor(v_textureCoordinates + vec2(-sampleOffset.x, -sampleOffset.y), outlineWidth, outlineColor, smoothing);
    vec4 color4 = getSDFColor(v_textureCoordinates + vec2(sampleOffset.x, -sampleOffset.y), outlineWidth, outlineColor, smoothing);

    // Equally weight the center sample and the 4 neighboring samples
    color = (center + color1 + color2 + color3 + color4)/5.0;
#else
    // If no derivatives available (IE 10?), just do a single sample
    float smoothing = 1.0/32.0;
    color = getSDFColor(v_textureCoordinates, outlineWidth, outlineColor, smoothing);
#endif

    color = czm_gammaCorrect(color);
#else
    color = czm_gammaCorrect(color);
    color *= czm_gammaCorrect(v_color);
#endif

// Fully transparent parts of the billboard are not pickable.
#if !defined(OPAQUE) && !defined(TRANSLUCENT)
    if (color.a < 0.005)   // matches 0/255 and 1/255
    {
        discard;
    }
#else
// The billboard is rendered twice. The opaque pass discards translucent fragments
// and the translucent pass discards opaque fragments.
#ifdef OPAQUE
    if (color.a < 0.995)   // matches < 254/255
    {
        discard;
    }
#else
    if (color.a >= 0.995)  // matches 254/255 and 255/255
    {
        discard;
    }
#endif
#endif

#ifdef VECTOR_TILE
    color *= u_highlightColor;
#endif
    out_FragColor = color;

#ifdef LOG_DEPTH
    czm_writeLogDepth();
#endif

#ifdef FRAGMENT_DEPTH_CHECK
    float temp = v_compressed.y;

    temp = temp * SHIFT_RIGHT1;

    float temp2 = (temp - floor(temp)) * SHIFT_LEFT1;
    bool enableDepthTest = temp2 != 0.0;
    bool applyTranslate = floor(temp) != 0.0;

    if (enableDepthTest) {
        temp = v_compressed.z;
        temp = temp * SHIFT_RIGHT12;

        vec2 dimensions;
        dimensions.y = (temp - floor(temp)) * SHIFT_LEFT12;
        dimensions.x = floor(temp);

        temp = v_compressed.w;
        temp = temp * SHIFT_RIGHT12;

        vec2 imageSize;
        imageSize.y = (temp - floor(temp)) * SHIFT_LEFT12;
        imageSize.x = floor(temp);

        vec2 adjustedST = v_textureCoordinates - v_textureCoordinateBounds.xy;
        adjustedST = adjustedST / vec2(v_textureCoordinateBounds.z - v_textureCoordinateBounds.x, v_textureCoordinateBounds.w - v_textureCoordinateBounds.y);

        float epsilonEyeDepth = v_compressed.x + czm_epsilon1;
        float globeDepth1 = getGlobeDepth(adjustedST, v_originTextureCoordinateAndTranslate.xy, applyTranslate, dimensions, imageSize);

        // negative values go into the screen
        if (globeDepth1 != 0.0 && globeDepth1 > epsilonEyeDepth)
        {
            float globeDepth2 = getGlobeDepth(adjustedST, vec2(0.0, 1.0), applyTranslate, dimensions, imageSize); // top left corner
            if (globeDepth2 != 0.0 && globeDepth2 > epsilonEyeDepth)
            {
                float globeDepth3 = getGlobeDepth(adjustedST, vec2(1.0, 1.0), applyTranslate, dimensions, imageSize); // top right corner
                if (globeDepth3 != 0.0 && globeDepth3 > epsilonEyeDepth)
                {
                    discard;
                }
            }
        }
    }
#endif

}
`;var yj=`#ifdef INSTANCED
in vec2 direction;
#endif
in vec4 positionHighAndScale;
in vec4 positionLowAndRotation;
in vec4 compressedAttribute0;                       // pixel offset, translate, horizontal origin, vertical origin, show, direction, texture coordinates (texture offset)
in vec4 compressedAttribute1;                       // aligned axis, translucency by distance, image width
in vec4 compressedAttribute2;                       // label horizontal origin, image height, color, pick color, size in meters, valid aligned axis, 13 bits free
in vec4 eyeOffset;                                  // eye offset in meters, 4 bytes free (texture range)
in vec4 scaleByDistance;                            // near, nearScale, far, farScale
in vec4 pixelOffsetScaleByDistance;                 // near, nearScale, far, farScale
in vec4 compressedAttribute3;                       // distance display condition near, far, disableDepthTestDistance, dimensions
in vec2 sdf;                                        // sdf outline color (rgb) and width (w)
in float splitDirection;                            // splitDirection
#if defined(VERTEX_DEPTH_CHECK) || defined(FRAGMENT_DEPTH_CHECK)
in vec4 textureCoordinateBoundsOrLabelTranslate;    // the min and max x and y values for the texture coordinates
#endif
#ifdef VECTOR_TILE
in float a_batchId;
#endif

out vec2 v_textureCoordinates;
#ifdef FRAGMENT_DEPTH_CHECK
out vec4 v_textureCoordinateBounds;
out vec4 v_originTextureCoordinateAndTranslate;
out vec4 v_compressed;                                 // x: eyeDepth, y: applyTranslate & enableDepthCheck, z: dimensions, w: imageSize
out mat2 v_rotationMatrix;
#endif

out vec4 v_pickColor;
out vec4 v_color;
out float v_splitDirection;
#ifdef SDF
out vec4 v_outlineColor;
out float v_outlineWidth;
#endif

const float UPPER_BOUND = 32768.0;

const float SHIFT_LEFT16 = 65536.0;
const float SHIFT_LEFT12 = 4096.0;
const float SHIFT_LEFT8 = 256.0;
const float SHIFT_LEFT7 = 128.0;
const float SHIFT_LEFT5 = 32.0;
const float SHIFT_LEFT3 = 8.0;
const float SHIFT_LEFT2 = 4.0;
const float SHIFT_LEFT1 = 2.0;

const float SHIFT_RIGHT12 = 1.0 / 4096.0;
const float SHIFT_RIGHT8 = 1.0 / 256.0;
const float SHIFT_RIGHT7 = 1.0 / 128.0;
const float SHIFT_RIGHT5 = 1.0 / 32.0;
const float SHIFT_RIGHT3 = 1.0 / 8.0;
const float SHIFT_RIGHT2 = 1.0 / 4.0;
const float SHIFT_RIGHT1 = 1.0 / 2.0;

vec4 addScreenSpaceOffset(vec4 positionEC, vec2 imageSize, float scale, vec2 direction, vec2 origin, vec2 translate, vec2 pixelOffset, vec3 alignedAxis, bool validAlignedAxis, float rotation, bool sizeInMeters, out mat2 rotationMatrix, out float mpp)
{
    // Note the halfSize cannot be computed in JavaScript because it is sent via
    // compressed vertex attributes that coerce it to an integer.
    vec2 halfSize = imageSize * scale * 0.5;
    halfSize *= ((direction * 2.0) - 1.0);

    vec2 originTranslate = origin * abs(halfSize);

#if defined(ROTATION) || defined(ALIGNED_AXIS)
    if (validAlignedAxis || rotation != 0.0)
    {
        float angle = rotation;
        if (validAlignedAxis)
        {
            vec4 projectedAlignedAxis = czm_modelView3D * vec4(alignedAxis, 0.0);
            angle += sign(-projectedAlignedAxis.x) * acos(sign(projectedAlignedAxis.y) * (projectedAlignedAxis.y * projectedAlignedAxis.y) /
                    (projectedAlignedAxis.x * projectedAlignedAxis.x + projectedAlignedAxis.y * projectedAlignedAxis.y));
        }

        float cosTheta = cos(angle);
        float sinTheta = sin(angle);
        rotationMatrix = mat2(cosTheta, sinTheta, -sinTheta, cosTheta);
        halfSize = rotationMatrix * halfSize;
    }
    else
    {
        rotationMatrix = mat2(1.0, 0.0, 0.0, 1.0);
    }
#endif

    mpp = czm_metersPerPixel(positionEC);
    positionEC.xy += (originTranslate + halfSize) * czm_branchFreeTernary(sizeInMeters, 1.0, mpp);
    positionEC.xy += (translate + pixelOffset) * mpp;

    return positionEC;
}

#ifdef VERTEX_DEPTH_CHECK
float getGlobeDepth(vec4 positionEC)
{
    vec4 posWC = czm_eyeToWindowCoordinates(positionEC);

    float globeDepth = czm_unpackDepth(texture(czm_globeDepthTexture, posWC.xy / czm_viewport.zw));

    if (globeDepth == 0.0)
    {
        return 0.0; // not on the globe
    }

    vec4 eyeCoordinate = czm_windowToEyeCoordinates(posWC.xy, globeDepth);
    return eyeCoordinate.z / eyeCoordinate.w;
}
#endif
void main()
{
    // Modifying this shader may also require modifications to Billboard._computeScreenSpacePosition

    // unpack attributes
    vec3 positionHigh = positionHighAndScale.xyz;
    vec3 positionLow = positionLowAndRotation.xyz;
    float scale = positionHighAndScale.w;

#if defined(ROTATION) || defined(ALIGNED_AXIS)
    float rotation = positionLowAndRotation.w;
#else
    float rotation = 0.0;
#endif

    float compressed = compressedAttribute0.x;

    vec2 pixelOffset;
    pixelOffset.x = floor(compressed * SHIFT_RIGHT7);
    compressed -= pixelOffset.x * SHIFT_LEFT7;
    pixelOffset.x -= UPPER_BOUND;

    vec2 origin;
    origin.x = floor(compressed * SHIFT_RIGHT5);
    compressed -= origin.x * SHIFT_LEFT5;

    origin.y = floor(compressed * SHIFT_RIGHT3);
    compressed -= origin.y * SHIFT_LEFT3;

#ifdef FRAGMENT_DEPTH_CHECK
    vec2 depthOrigin = origin.xy;
#endif
    origin -= vec2(1.0);

    float show = floor(compressed * SHIFT_RIGHT2);
    compressed -= show * SHIFT_LEFT2;

#ifdef INSTANCED
    vec2 textureCoordinatesBottomLeft = czm_decompressTextureCoordinates(compressedAttribute0.w);
    vec2 textureCoordinatesRange = czm_decompressTextureCoordinates(eyeOffset.w);
    vec2 textureCoordinates = textureCoordinatesBottomLeft + direction * textureCoordinatesRange;
#else
    vec2 direction;
    direction.x = floor(compressed * SHIFT_RIGHT1);
    direction.y = compressed - direction.x * SHIFT_LEFT1;

    vec2 textureCoordinates = czm_decompressTextureCoordinates(compressedAttribute0.w);
#endif

    float temp = compressedAttribute0.y  * SHIFT_RIGHT8;
    pixelOffset.y = -(floor(temp) - UPPER_BOUND);

    vec2 translate;
    translate.y = (temp - floor(temp)) * SHIFT_LEFT16;

    temp = compressedAttribute0.z * SHIFT_RIGHT8;
    translate.x = floor(temp) - UPPER_BOUND;

    translate.y += (temp - floor(temp)) * SHIFT_LEFT8;
    translate.y -= UPPER_BOUND;

    temp = compressedAttribute1.x * SHIFT_RIGHT8;
    float temp2 = floor(compressedAttribute2.w * SHIFT_RIGHT2);

    vec2 imageSize = vec2(floor(temp), temp2);

#ifdef FRAGMENT_DEPTH_CHECK
    float labelHorizontalOrigin = floor(compressedAttribute2.w - (temp2 * SHIFT_LEFT2));
    float applyTranslate = 0.0;
    if (labelHorizontalOrigin != 0.0) // is a billboard, so set apply translate to false
    {
        applyTranslate = 1.0;
        labelHorizontalOrigin -= 2.0;
        depthOrigin.x = labelHorizontalOrigin + 1.0;
    }

    depthOrigin = vec2(1.0) - (depthOrigin * 0.5);
#endif

#ifdef EYE_DISTANCE_TRANSLUCENCY
    vec4 translucencyByDistance;
    translucencyByDistance.x = compressedAttribute1.z;
    translucencyByDistance.z = compressedAttribute1.w;

    translucencyByDistance.y = ((temp - floor(temp)) * SHIFT_LEFT8) / 255.0;

    temp = compressedAttribute1.y * SHIFT_RIGHT8;
    translucencyByDistance.w = ((temp - floor(temp)) * SHIFT_LEFT8) / 255.0;
#endif

#if defined(VERTEX_DEPTH_CHECK) || defined(FRAGMENT_DEPTH_CHECK)
    temp = compressedAttribute3.w;
    temp = temp * SHIFT_RIGHT12;

    vec2 dimensions;
    dimensions.y = (temp - floor(temp)) * SHIFT_LEFT12;
    dimensions.x = floor(temp);
#endif

#ifdef ALIGNED_AXIS
    vec3 alignedAxis = czm_octDecode(floor(compressedAttribute1.y * SHIFT_RIGHT8));
    temp = compressedAttribute2.z * SHIFT_RIGHT5;
    bool validAlignedAxis = (temp - floor(temp)) * SHIFT_LEFT1 > 0.0;
#else
    vec3 alignedAxis = vec3(0.0);
    bool validAlignedAxis = false;
#endif

    vec4 pickColor;
    vec4 color;

    temp = compressedAttribute2.y;
    temp = temp * SHIFT_RIGHT8;
    pickColor.b = (temp - floor(temp)) * SHIFT_LEFT8;
    temp = floor(temp) * SHIFT_RIGHT8;
    pickColor.g = (temp - floor(temp)) * SHIFT_LEFT8;
    pickColor.r = floor(temp);

    temp = compressedAttribute2.x;
    temp = temp * SHIFT_RIGHT8;
    color.b = (temp - floor(temp)) * SHIFT_LEFT8;
    temp = floor(temp) * SHIFT_RIGHT8;
    color.g = (temp - floor(temp)) * SHIFT_LEFT8;
    color.r = floor(temp);

    temp = compressedAttribute2.z * SHIFT_RIGHT8;
    bool sizeInMeters = floor((temp - floor(temp)) * SHIFT_LEFT7) > 0.0;
    temp = floor(temp) * SHIFT_RIGHT8;

    pickColor.a = (temp - floor(temp)) * SHIFT_LEFT8;
    pickColor /= 255.0;

    color.a = floor(temp);
    color /= 255.0;

    ///////////////////////////////////////////////////////////////////////////

    vec4 p = czm_translateRelativeToEye(positionHigh, positionLow);
    vec4 positionEC = czm_modelViewRelativeToEye * p;

#if defined(FRAGMENT_DEPTH_CHECK) || defined(VERTEX_DEPTH_CHECK)
    float eyeDepth = positionEC.z;
#endif

    positionEC = czm_eyeOffset(positionEC, eyeOffset.xyz);
    positionEC.xyz *= show;

    ///////////////////////////////////////////////////////////////////////////

#if defined(EYE_DISTANCE_SCALING) || defined(EYE_DISTANCE_TRANSLUCENCY) || defined(EYE_DISTANCE_PIXEL_OFFSET) || defined(DISTANCE_DISPLAY_CONDITION) || defined(DISABLE_DEPTH_DISTANCE)
    float lengthSq;
    if (czm_sceneMode == czm_sceneMode2D)
    {
        // 2D camera distance is a special case
        // treat all billboards as flattened to the z=0.0 plane
        lengthSq = czm_eyeHeight2D.y;
    }
    else
    {
        lengthSq = dot(positionEC.xyz, positionEC.xyz);
    }
#endif

#ifdef EYE_DISTANCE_SCALING
    float distanceScale = czm_nearFarScalar(scaleByDistance, lengthSq);
    scale *= distanceScale;
    translate *= distanceScale;
    // push vertex behind near plane for clipping
    if (scale == 0.0)
    {
        positionEC.xyz = vec3(0.0);
    }
#endif

    float translucency = 1.0;
#ifdef EYE_DISTANCE_TRANSLUCENCY
    translucency = czm_nearFarScalar(translucencyByDistance, lengthSq);
    // push vertex behind near plane for clipping
    if (translucency == 0.0)
    {
        positionEC.xyz = vec3(0.0);
    }
#endif

#ifdef EYE_DISTANCE_PIXEL_OFFSET
    float pixelOffsetScale = czm_nearFarScalar(pixelOffsetScaleByDistance, lengthSq);
    pixelOffset *= pixelOffsetScale;
#endif

#ifdef DISTANCE_DISPLAY_CONDITION
    float nearSq = compressedAttribute3.x;
    float farSq = compressedAttribute3.y;
    if (lengthSq < nearSq || lengthSq > farSq)
    {
        positionEC.xyz = vec3(0.0);
    }
#endif

    mat2 rotationMatrix;
    float mpp;

#ifdef DISABLE_DEPTH_DISTANCE
    float disableDepthTestDistance = compressedAttribute3.z;
#endif

#ifdef VERTEX_DEPTH_CHECK
if (lengthSq < disableDepthTestDistance) {
    float depthsilon = 10.0;

    vec2 labelTranslate = textureCoordinateBoundsOrLabelTranslate.xy;
    vec4 pEC1 = addScreenSpaceOffset(positionEC, dimensions, scale, vec2(0.0), origin, labelTranslate, pixelOffset, alignedAxis, validAlignedAxis, rotation, sizeInMeters, rotationMatrix, mpp);
    float globeDepth1 = getGlobeDepth(pEC1);

    if (globeDepth1 != 0.0 && pEC1.z + depthsilon < globeDepth1)
    {
        vec4 pEC2 = addScreenSpaceOffset(positionEC, dimensions, scale, vec2(0.0, 1.0), origin, labelTranslate, pixelOffset, alignedAxis, validAlignedAxis, rotation, sizeInMeters, rotationMatrix, mpp);
        float globeDepth2 = getGlobeDepth(pEC2);

        if (globeDepth2 != 0.0 && pEC2.z + depthsilon < globeDepth2)
        {
            vec4 pEC3 = addScreenSpaceOffset(positionEC, dimensions, scale, vec2(1.0), origin, labelTranslate, pixelOffset, alignedAxis, validAlignedAxis, rotation, sizeInMeters, rotationMatrix, mpp);
            float globeDepth3 = getGlobeDepth(pEC3);
            if (globeDepth3 != 0.0 && pEC3.z + depthsilon < globeDepth3)
            {
                positionEC.xyz = vec3(0.0);
            }
        }
    }
}
#endif

    positionEC = addScreenSpaceOffset(positionEC, imageSize, scale, direction, origin, translate, pixelOffset, alignedAxis, validAlignedAxis, rotation, sizeInMeters, rotationMatrix, mpp);
    gl_Position = czm_projection * positionEC;
    v_textureCoordinates = textureCoordinates;

#ifdef LOG_DEPTH
    czm_vertexLogDepth();
#endif

#ifdef DISABLE_DEPTH_DISTANCE
    if (disableDepthTestDistance == 0.0 && czm_minimumDisableDepthTestDistance != 0.0)
    {
        disableDepthTestDistance = czm_minimumDisableDepthTestDistance;
    }

    if (disableDepthTestDistance != 0.0)
    {
        // Don't try to "multiply both sides" by w.  Greater/less-than comparisons won't work for negative values of w.
        float zclip = gl_Position.z / gl_Position.w;
        bool clipped = (zclip < -1.0 || zclip > 1.0);
        if (!clipped && (disableDepthTestDistance < 0.0 || (lengthSq > 0.0 && lengthSq < disableDepthTestDistance)))
        {
            // Position z on the near plane.
            gl_Position.z = -gl_Position.w;
#ifdef LOG_DEPTH
            v_depthFromNearPlusOne = 1.0;
#endif
        }
    }
#endif

#ifdef FRAGMENT_DEPTH_CHECK
    if (sizeInMeters) {
        translate /= mpp;
        dimensions /= mpp;
        imageSize /= mpp;
    }

#if defined(ROTATION) || defined(ALIGNED_AXIS)
    v_rotationMatrix = rotationMatrix;
#else
    v_rotationMatrix = mat2(1.0, 0.0, 0.0, 1.0);
#endif

    float enableDepthCheck = 0.0;
    if (lengthSq < disableDepthTestDistance)
    {
        enableDepthCheck = 1.0;
    }

    float dw = floor(clamp(dimensions.x, 0.0, SHIFT_LEFT12));
    float dh = floor(clamp(dimensions.y, 0.0, SHIFT_LEFT12));

    float iw = floor(clamp(imageSize.x, 0.0, SHIFT_LEFT12));
    float ih = floor(clamp(imageSize.y, 0.0, SHIFT_LEFT12));

    v_compressed.x = eyeDepth;
    v_compressed.y = applyTranslate * SHIFT_LEFT1 + enableDepthCheck;
    v_compressed.z = dw * SHIFT_LEFT12 + dh;
    v_compressed.w = iw * SHIFT_LEFT12 + ih;
    v_originTextureCoordinateAndTranslate.xy = depthOrigin;
    v_originTextureCoordinateAndTranslate.zw = translate;
    v_textureCoordinateBounds = textureCoordinateBoundsOrLabelTranslate;

#endif

#ifdef SDF
    vec4 outlineColor;
    float outlineWidth;

    temp = sdf.x;
    temp = temp * SHIFT_RIGHT8;
    outlineColor.b = (temp - floor(temp)) * SHIFT_LEFT8;
    temp = floor(temp) * SHIFT_RIGHT8;
    outlineColor.g = (temp - floor(temp)) * SHIFT_LEFT8;
    outlineColor.r = floor(temp);

    temp = sdf.y;
    temp = temp * SHIFT_RIGHT8;
    float temp3 = (temp - floor(temp)) * SHIFT_LEFT8;
    temp = floor(temp) * SHIFT_RIGHT8;
    outlineWidth = (temp - floor(temp)) * SHIFT_LEFT8;
    outlineColor.a = floor(temp);
    outlineColor /= 255.0;

    v_outlineWidth = outlineWidth / 255.0;
    v_outlineColor = outlineColor;
    v_outlineColor.a *= translucency;
#endif

    v_pickColor = pickColor;

    v_color = color;
    v_color.a *= translucency;
    v_splitDirection = splitDirection;
}
`;var yye=Object.freeze({NONE:0,LOADING:2,LOADED:3,ERROR:4,FAILED:5}),Vo=yye;function Hl(e){this._billboardCollection=e,this._id=void 0,this._loadState=Vo.NONE,this._loadError=void 0,this._index=-1,this._width=void 0,this._height=void 0,this._hasSubregion=!1,this.dirty=!1}Object.defineProperties(Hl.prototype,{loadError:{get:function(){return this._loadError}},loadState:{get:function(){return this._loadState}},ready:{get:function(){return this._loadState===Vo.LOADED}},hasImage:{get:function(){return this._loadState!==Vo.NONE}},id:{get:function(){return this._id}},width:{get:function(){return this._width}},height:{get:function(){return this._height}}});Hl.prototype.unload=async function(){this._loadState!==Vo.NONE&&(this._id=void 0,this._loadError=void 0,this._loadState=Vo.NONE,this._index=-1,this._width=void 0,this._height=void 0,this.dirty=!0)};Hl.prototype.loadImage=async function(e,t){if(this._id===e)return;let n=this._billboardCollection,i=n.billboardTextureCache,o=i.get(e);if(c(o)&&t.loadState===Vo.LOADING||t.loadState===Vo.LOADED){Hl.clone(o,this);return}c(o)||(o=new Hl(n),i.set(e,o)),o._id=this._id=e,o._loadState=this._loadState=Vo.LOADING,o._loadError=this._loadError=void 0;let r,a=this._billboardCollection.textureAtlas;try{r=await a.addImage(e,t)}catch(A){if(o._loadState=Vo.ERROR,o._loadError=A,this._id!==e)return;this._loadState=Vo.ERROR,this._loadError=A;return}if(!c(r)||r===-1){if(o._loadState=Vo.FAILED,o._index=-1,this._id!==e)return;this._loadState=Vo.FAILED,this._index=-1;return}o._index=r,o._loadState=Vo.LOADED;let s=a.rectangles[r];o._width=s.width,o._height=s.height,this._id===e&&(this._index=r,this._loadState=Vo.LOADED,this._width=s.width,this._height=s.height,this.dirty=!0)};Hl.prototype.addImageSubRegion=async function(e,t){this._id=e,this._loadState=Vo.LOADING,this._loadError=void 0,this._hasSubregion=!0;let n,i=this._billboardCollection.textureAtlas;try{n=await i.addImageSubRegion(e,t)}catch(o){this._loadState=Vo.ERROR,this._loadError=o;return}if(!c(n)||n===-1){this._loadState=Vo.FAILED,this._index=-1,this._width=void 0,this._height=void 0;return}this._width=t.width,this._height=t.height,this._index=n,this._loadState=Vo.LOADED,this.dirty=!0};Hl.prototype.computeTextureCoordinates=function(e){return this._billboardCollection.textureAtlas.computeTextureCoordinates(this._index,e)};Hl.clone=function(e,t){if(t._id=e._id,t._loadState=e._loadState,t._loadError=void 0,t._index=e._index,t._width=e._width,t._height=e._height,t._hasSubregion=e._hasSubregion,e.ready){t.dirty=!0;return}return(async()=>{let i=e._id;await e._billboardCollection.textureAtlas._indexPromiseById.get(i),t._id===i&&(e._hasSubregion&&await Promise.resolve(),t._id=i,t._loadState=e._loadState,t._loadError=e._loadError,t._index=e._index,t._width=e._width,t._height=e._height,t.dirty=!0)})(),t};var up=Hl;function bn(e,t){e=e??k.EMPTY_OBJECT;let n=e.translucencyByDistance,i=e.pixelOffsetScaleByDistance,o=e.scaleByDistance,r=e.distanceDisplayCondition;c(n)&&(n=Rt.clone(n)),c(i)&&(i=Rt.clone(i)),c(o)&&(o=Rt.clone(o)),c(r)&&(r=rt.clone(r)),this._show=e.show??!0,this._position=u.clone(e.position??u.ZERO),this._actualPosition=u.clone(this._position),this._pixelOffset=U.clone(e.pixelOffset??U.ZERO),this._translate=new U(0,0),this._eyeOffset=u.clone(e.eyeOffset??u.ZERO),this._heightReference=e.heightReference??Ge.NONE,this._verticalOrigin=e.verticalOrigin??yn.CENTER,this._horizontalOrigin=e.horizontalOrigin??pi.CENTER,this._scale=e.scale??1,this._color=F.clone(e.color??F.WHITE),this._rotation=e.rotation??0,this._alignedAxis=u.clone(e.alignedAxis??u.ZERO),this._width=e.width,this._height=e.height,this._scaleByDistance=o,this._translucencyByDistance=n,this._pixelOffsetScaleByDistance=i,this._sizeInMeters=e.sizeInMeters??!1,this._distanceDisplayCondition=r,this._disableDepthTestDistance=e.disableDepthTestDistance,this._id=e.id,this._collection=e.collection??t,this._pickId=void 0,this._pickPrimitive=e._pickPrimitive??this,this._billboardCollection=t,this._dirty=!1,this._index=-1,this._batchIndex=void 0,this._imageTexture=new up(t),this._imageWidth=void 0,this._imageHeight=void 0,this._labelDimensions=void 0,this._labelHorizontalOrigin=void 0,this._labelTranslate=void 0;let a=e.image,s=e.imageId;c(a)&&(c(s)||(typeof a=="string"?s=a:c(a.src)?s=a.src:s=oo()),this._imageTexture.loadImage(s,a)),c(e.imageSubRegion)&&this._imageTexture.addImageSubRegion(s,e.imageSubRegion),this._actualClampedPosition=void 0,this._removeCallbackFunc=void 0,this._mode=Te.SCENE3D,this._clusterShow=!0,this._outlineColor=F.clone(e.outlineColor??F.BLACK),this._outlineWidth=e.outlineWidth??0,this._updateClamping(),this._splitDirection=e.splitDirection??Zo.NONE}var bj=bn.SHOW_INDEX=0,y0=bn.POSITION_INDEX=1,wj=bn.PIXEL_OFFSET_INDEX=2,bye=bn.EYE_OFFSET_INDEX=3,Bye=bn.HORIZONTAL_ORIGIN_INDEX=4,xye=bn.VERTICAL_ORIGIN_INDEX=5,Tye=bn.SCALE_INDEX=6,Bj=bn.IMAGE_INDEX_INDEX=7,xj=bn.COLOR_INDEX=8,Sye=bn.ROTATION_INDEX=9,wye=bn.ALIGNED_AXIS_INDEX=10,Dye=bn.SCALE_BY_DISTANCE_INDEX=11,Qye=bn.TRANSLUCENCY_BY_DISTANCE_INDEX=12,Rye=bn.PIXEL_OFFSET_SCALE_BY_DISTANCE_INDEX=13,vye=bn.DISTANCE_DISPLAY_CONDITION=14,Pye=bn.DISABLE_DEPTH_DISTANCE=15;bn.TEXTURE_COORDINATE_BOUNDS=16;var Tj=bn.SDF_INDEX=17,Mye=bn.SPLIT_DIRECTION_INDEX=18;bn.NUMBER_OF_PROPERTIES=19;function Pi(e,t){let n=e._billboardCollection;c(n)&&(n._updateBillboard(e,t),e._dirty=!0)}Object.defineProperties(bn.prototype,{show:{get:function(){return this._show},set:function(e){this._show!==e&&(this._show=e,Pi(this,bj))}},position:{get:function(){return this._position},set:function(e){let t=this._position;u.equals(t,e)||(u.clone(e,t),u.clone(e,this._actualPosition),this._updateClamping(),Pi(this,y0))}},heightReference:{get:function(){return this._heightReference},set:function(e){let t=this._heightReference;e!==t&&(this._heightReference=e,this._updateClamping(),Pi(this,y0))}},pixelOffset:{get:function(){return this._pixelOffset},set:function(e){let t=this._pixelOffset;U.equals(t,e)||(U.clone(e,t),Pi(this,wj))}},scaleByDistance:{get:function(){return this._scaleByDistance},set:function(e){let t=this._scaleByDistance;Rt.equals(t,e)||(this._scaleByDistance=Rt.clone(e,t),Pi(this,Dye))}},translucencyByDistance:{get:function(){return this._translucencyByDistance},set:function(e){let t=this._translucencyByDistance;Rt.equals(t,e)||(this._translucencyByDistance=Rt.clone(e,t),Pi(this,Qye))}},pixelOffsetScaleByDistance:{get:function(){return this._pixelOffsetScaleByDistance},set:function(e){let t=this._pixelOffsetScaleByDistance;Rt.equals(t,e)||(this._pixelOffsetScaleByDistance=Rt.clone(e,t),Pi(this,Rye))}},eyeOffset:{get:function(){return this._eyeOffset},set:function(e){let t=this._eyeOffset;u.equals(t,e)||(u.clone(e,t),Pi(this,bye))}},horizontalOrigin:{get:function(){return this._horizontalOrigin},set:function(e){this._horizontalOrigin!==e&&(this._horizontalOrigin=e,Pi(this,Bye))}},verticalOrigin:{get:function(){return this._verticalOrigin},set:function(e){this._verticalOrigin!==e&&(this._verticalOrigin=e,Pi(this,xye))}},scale:{get:function(){return this._scale},set:function(e){this._scale!==e&&(this._scale=e,Pi(this,Tye))}},color:{get:function(){return this._color},set:function(e){let t=this._color;F.equals(t,e)||(F.clone(e,t),Pi(this,xj))}},rotation:{get:function(){return this._rotation},set:function(e){this._rotation!==e&&(this._rotation=e,Pi(this,Sye))}},alignedAxis:{get:function(){return this._alignedAxis},set:function(e){let t=this._alignedAxis;u.equals(t,e)||(u.clone(e,t),Pi(this,wye))}},width:{get:function(){return this._width??this._imageTexture.width},set:function(e){this._width!==e&&(this._width=e,Pi(this,Bj))}},height:{get:function(){return this._height??this._imageTexture.height},set:function(e){this._height!==e&&(this._height=e,Pi(this,Bj))}},sizeInMeters:{get:function(){return this._sizeInMeters},set:function(e){this._sizeInMeters!==e&&(this._sizeInMeters=e,Pi(this,xj))}},distanceDisplayCondition:{get:function(){return this._distanceDisplayCondition},set:function(e){rt.equals(e,this._distanceDisplayCondition)||(this._distanceDisplayCondition=rt.clone(e,this._distanceDisplayCondition),Pi(this,vye))}},disableDepthTestDistance:{get:function(){return this._disableDepthTestDistance},set:function(e){this._disableDepthTestDistance!==e&&(this._disableDepthTestDistance=e,Pi(this,Pye))}},id:{get:function(){return this._id},set:function(e){this._id=e,c(this._pickId)&&(this._pickId.object.id=e)}},pickPrimitive:{get:function(){return this._pickPrimitive},set:function(e){this._pickPrimitive=e,c(this._pickId)&&(this._pickId.object.primitive=e)}},pickId:{get:function(){return this._pickId}},image:{get:function(){return this._imageTexture.id},set:function(e){if(!c(e)){this._imageTexture.unload();return}let t;typeof e=="string"?t=e:e instanceof ke?t=e._url:c(e.src)?t=e.src:t=oo(),this._imageTexture.loadImage(t,e)}},ready:{get:function(){return this._imageTexture.ready}},loadError:{get:function(){return this._imageTexture.loadError}},textureDirty:{get:function(){return this._imageTexture.dirty},set:function(e){this._imageTexture.dirty=e}},_clampedPosition:{get:function(){return this._actualClampedPosition},set:function(e){this._actualClampedPosition=u.clone(e,this._actualClampedPosition),Pi(this,y0)}},clusterShow:{get:function(){return this._clusterShow},set:function(e){this._clusterShow!==e&&(this._clusterShow=e,Pi(this,bj))}},outlineColor:{get:function(){return this._outlineColor},set:function(e){let t=this._outlineColor;F.equals(t,e)||(F.clone(e,t),Pi(this,Tj))}},outlineWidth:{get:function(){return this._outlineWidth},set:function(e){this._outlineWidth!==e&&(this._outlineWidth=e,Pi(this,Tj))}},splitDirection:{get:function(){return this._splitDirection},set:function(e){this._splitDirection!==e&&(this._splitDirection=e,Pi(this,Mye))}}});bn.prototype.getPickId=function(e){return c(this._pickId)||(this._pickId=e.createPickId({primitive:this._pickPrimitive,collection:this._collection,id:this._id})),this._pickId};bn.prototype._updateClamping=function(){bn._updateClamping(this._billboardCollection,this)};var b0=new ae;bn._updateClamping=function(e,t){if(!c(e)||!c(e._scene))return;let n=e._scene,i=n.ellipsoid??Z.default,o=n.frameState.mode,r=o!==t._mode;if(t._mode=o,(t._heightReference===Ge.NONE||r)&&c(t._removeCallbackFunc)&&(t._removeCallbackFunc(),t._removeCallbackFunc=void 0,t._clampedPosition=void 0),t._heightReference===Ge.NONE||!c(t._position))return;c(t._removeCallbackFunc)&&t._removeCallbackFunc();let a=i.cartesianToCartographic(t._position);if(!c(a)){t._actualClampedPosition=void 0;return}function s(l){let f=i.cartographicToCartesian(l,t._clampedPosition);cm(t._heightReference)&&(t._mode===Te.SCENE3D?(l.height+=a.height,i.cartographicToCartesian(l,f)):f.x+=a.height),t._clampedPosition=f}t._removeCallbackFunc=n.updateHeight(a,s,t._heightReference),ae.clone(a,b0);let A=n.getHeight(a,t._heightReference);c(A)&&(b0.height=A),s(b0)};bn.prototype.computeTextureCoordinates=function(e){return this._imageTexture.computeTextureCoordinates(e)};bn.prototype.setImage=function(e,t){this._imageTexture.loadImage(e,t)};bn.prototype.setImageTexture=function(e){up.clone(e,this._imageTexture)};bn.prototype.setImageSubRegion=function(e,t){this._imageTexture.addImageSubRegion(e,t)};bn.prototype._setTranslate=function(e){let t=this._translate;U.equals(t,e)||(U.clone(e,t),Pi(this,wj))};bn.prototype._getActualPosition=function(){return c(this._clampedPosition)?this._clampedPosition:this._actualPosition};bn.prototype._setActualPosition=function(e){c(this._clampedPosition)||u.clone(e,this._actualPosition),Pi(this,y0)};var Sj=new se;bn._computeActualPosition=function(e,t,n,i){return c(e._clampedPosition)?(n.mode!==e._mode&&e._updateClamping(),e._clampedPosition):n.mode===Te.SCENE3D?t:(O.multiplyByPoint(i,t,Sj),dr.computeActualEllipsoidPosition(n,Sj))};var Dj=new u;bn._computeScreenSpacePosition=function(e,t,n,i,o,r){let a=O.multiplyByPoint(e,t,Dj),s=dr.worldWithEyeOffsetToWindowCoordinates(o,a,n,r);if(c(s))return U.add(s,i,s),s};var I0=new U(0,0);bn.prototype.computeScreenSpacePosition=function(e,t){let n=this._billboardCollection;c(t)||(t=new U),U.clone(this._pixelOffset,I0),U.add(I0,this._translate,I0);let i=n.modelMatrix,o=this._position;if(c(this._clampedPosition)&&(o=this._clampedPosition,e.mode!==Te.SCENE3D)){let a=e.mapProjection,s=a.ellipsoid,A=a.unproject(o,b0);o=s.cartographicToCartesian(A,Dj),i=O.IDENTITY}return bn._computeScreenSpacePosition(i,o,this._eyeOffset,I0,e,t)};bn.getScreenSpaceBoundingBox=function(e,t,n){let i=e.width,o=e.height,r=e.scale;i*=r,o*=r;let a=t.x;e.horizontalOrigin===pi.RIGHT?a-=i:e.horizontalOrigin===pi.CENTER&&(a-=i*.5);let s=t.y;return e.verticalOrigin===yn.BOTTOM||e.verticalOrigin===yn.BASELINE?s-=o:e.verticalOrigin===yn.CENTER&&(s-=o*.5),c(n)||(n=new Jt),n.x=a,n.y=s,n.width=i,n.height=o,n};bn.prototype.equals=function(e){return this===e||c(e)&&this._id===e._id&&u.equals(this._position,e._position)&&this.image===e.image&&this._show===e._show&&this._scale===e._scale&&this._verticalOrigin===e._verticalOrigin&&this._horizontalOrigin===e._horizontalOrigin&&this._heightReference===e._heightReference&&F.equals(this._color,e._color)&&U.equals(this._pixelOffset,e._pixelOffset)&&U.equals(this._translate,e._translate)&&u.equals(this._eyeOffset,e._eyeOffset)&&Rt.equals(this._scaleByDistance,e._scaleByDistance)&&Rt.equals(this._translucencyByDistance,e._translucencyByDistance)&&Rt.equals(this._pixelOffsetScaleByDistance,e._pixelOffsetScaleByDistance)&&rt.equals(this._distanceDisplayCondition,e._distanceDisplayCondition)&&this._disableDepthTestDistance===e._disableDepthTestDistance&&this._splitDirection===e._splitDirection};bn.prototype._destroy=function(){c(this._customData)&&(this._billboardCollection._scene.globe._surface.removeTileCustomData(this._customData),this._customData=void 0),c(this._removeCallbackFunc)&&(this._removeCallbackFunc(),this._removeCallbackFunc=void 0),this.image=void 0,this._pickId=this._pickId&&this._pickId.destroy(),this._billboardCollection=void 0};var hi=bn;var Oye={OPAQUE:0,TRANSLUCENT:1,OPAQUE_AND_TRANSLUCENT:2},Mi=Object.freeze(Oye);var Lye={FONT_SIZE:48,PADDING:10,RADIUS:8,CUTOFF:.25},Lr=Object.freeze(Lye);var Nye=hi.SHOW_INDEX,R_=hi.POSITION_INDEX,Qj=hi.PIXEL_OFFSET_INDEX,Rj=hi.EYE_OFFSET_INDEX,Fye=hi.HORIZONTAL_ORIGIN_INDEX,kye=hi.VERTICAL_ORIGIN_INDEX,Uye=hi.SCALE_INDEX,ah=hi.IMAGE_INDEX_INDEX,vj=hi.COLOR_INDEX,Gye=hi.ROTATION_INDEX,zye=hi.ALIGNED_AXIS_INDEX,Pj=hi.SCALE_BY_DISTANCE_INDEX,Mj=hi.TRANSLUCENCY_BY_DISTANCE_INDEX,Oj=hi.PIXEL_OFFSET_SCALE_BY_DISTANCE_INDEX,Lj=hi.DISTANCE_DISPLAY_CONDITION,Hye=hi.DISABLE_DEPTH_DISTANCE,Vye=hi.TEXTURE_COORDINATE_BOUNDS,Nj=hi.SDF_INDEX,Fj=hi.SPLIT_DIRECTION_INDEX,ZD=hi.NUMBER_OF_PROPERTIES,ei,jye={positionHighAndScale:0,positionLowAndRotation:1,compressedAttribute0:2,compressedAttribute1:3,compressedAttribute2:4,eyeOffset:5,scaleByDistance:6,pixelOffsetScaleByDistance:7,compressedAttribute3:8,textureCoordinateBoundsOrLabelTranslate:9,a_batchId:10,sdf:11,splitDirection:12},Yye={direction:0,positionHighAndScale:1,positionLowAndRotation:2,compressedAttribute0:3,compressedAttribute1:4,compressedAttribute2:5,eyeOffset:6,scaleByDistance:7,pixelOffsetScaleByDistance:8,compressedAttribute3:9,textureCoordinateBoundsOrLabelTranslate:10,a_batchId:11,sdf:12,splitDirection:13};function ec(e){e=e??k.EMPTY_OBJECT,this._scene=e.scene,this._batchTable=e.batchTable;let t=e.textureAtlas;c(t)||(t=new iy),this._textureAtlas=t,this._textureAtlasGUID=t.guid,this._destroyTextureAtlas=!0,this._billboardTextureCache=new Map,this._sp=void 0,this._spTranslucent=void 0,this._rsOpaque=void 0,this._rsTranslucent=void 0,this._vaf=void 0,this._billboards=[],this._billboardsToUpdate=[],this._billboardsToUpdateIndex=0,this._billboardsRemoved=!1,this._createVertexArray=!1,this._shaderRotation=!1,this._compiledShaderRotation=!1,this._shaderAlignedAxis=!1,this._compiledShaderAlignedAxis=!1,this._shaderScaleByDistance=!1,this._compiledShaderScaleByDistance=!1,this._shaderTranslucencyByDistance=!1,this._compiledShaderTranslucencyByDistance=!1,this._shaderPixelOffsetScaleByDistance=!1,this._compiledShaderPixelOffsetScaleByDistance=!1,this._shaderDistanceDisplayCondition=!1,this._compiledShaderDistanceDisplayCondition=!1,this._shaderDisableDepthDistance=!1,this._compiledShaderDisableDepthDistance=!1,this._shaderClampToGround=!1,this._compiledShaderClampToGround=!1,this._propertiesChanged=new Uint32Array(ZD),this._maxSize=0,this._maxEyeOffset=0,this._maxScale=1,this._maxPixelOffset=0,this._allHorizontalCenter=!0,this._allVerticalCenter=!0,this._allSizedInMeters=!0,this._baseVolume=new ee,this._baseVolumeWC=new ee,this._baseVolume2D=new ee,this._boundingVolume=new ee,this._boundingVolumeDirty=!1,this._colorCommands=[],this._allBillboardsReady=!1,this.show=e.show??!0,this.modelMatrix=O.clone(e.modelMatrix??O.IDENTITY),this._modelMatrix=O.clone(O.IDENTITY),this.debugShowBoundingVolume=e.debugShowBoundingVolume??!1,this.debugShowTextureAtlas=e.debugShowTextureAtlas??!1,this.blendOption=e.blendOption??Mi.OPAQUE_AND_TRANSLUCENT,this._blendOption=void 0,this._mode=Te.SCENE3D,this._buffersUsage=[Me.STATIC_DRAW,Me.STATIC_DRAW,Me.STATIC_DRAW,Me.STATIC_DRAW,Me.STATIC_DRAW,Me.STATIC_DRAW,Me.STATIC_DRAW,Me.STATIC_DRAW,Me.STATIC_DRAW,Me.STATIC_DRAW,Me.STATIC_DRAW,Me.STATIC_DRAW,Me.STATIC_DRAW,Me.STATIC_DRAW,Me.STATIC_DRAW,Me.STATIC_DRAW,Me.STATIC_DRAW],this._highlightColor=F.clone(F.WHITE),this._uniforms={u_atlas:()=>this.textureAtlas.texture,u_highlightColor:()=>this._highlightColor};let n=this._scene;c(n)&&c(n.terrainProviderChanged)&&(this._removeCallbackFunc=n.terrainProviderChanged.addEventListener(function(){let i=this._billboards,o=i.length;for(let r=0;r<o;++r)c(i[r])&&i[r]._updateClamping()},this))}Object.defineProperties(ec.prototype,{length:{get:function(){return $D(this),this._billboards.length}},textureAtlas:{get:function(){return this._textureAtlas},set:function(e){this._textureAtlas!==e&&(this._textureAtlas=this._destroyTextureAtlas&&this._textureAtlas&&this._textureAtlas.destroy(),this._textureAtlas=e)}},destroyTextureAtlas:{get:function(){return this._destroyTextureAtlas},set:function(e){this._destroyTextureAtlas=e}},sizeInBytes:{get:function(){return this._textureAtlas.sizeInBytes}},ready:{get:function(){return this._allBillboardsReady}},billboardTextureCache:{get:function(){return this._billboardTextureCache}}});function kj(e){let t=e.length;for(let n=0;n<t;++n)e[n]&&e[n]._destroy()}ec.prototype.add=function(e){let t=new hi(e,this);return t._index=this._billboards.length,this._billboards.push(t),this._createVertexArray=!0,t};ec.prototype.remove=function(e){return this.contains(e)?(this._billboards[e._index]=void 0,this._billboardsRemoved=!0,this._createVertexArray=!0,e._destroy(),!0):!1};ec.prototype.removeAll=function(){kj(this._billboards),this._billboards=[],this._billboardsToUpdate=[],this._billboardsToUpdateIndex=0,this._billboardsRemoved=!1,this._createVertexArray=!0};function $D(e){if(e._billboardsRemoved){e._billboardsRemoved=!1;let t=[],n=e._billboards,i=n.length;for(let o=0,r=0;o<i;++o){let a=n[o];c(a)&&(a._index=r++,t.push(a))}e._billboards=t}}ec.prototype._updateBillboard=function(e,t){e._dirty||(this._billboardsToUpdate[this._billboardsToUpdateIndex++]=e),++this._propertiesChanged[t]};ec.prototype.contains=function(e){return c(e)&&e._billboardCollection===this};ec.prototype.get=function(e){return $D(this),this._billboards[e]};var YD;function qye(e){let n=e.cache.billboardCollection_indexBufferBatched;if(c(n))return n;let i=16384*6-6,o=new Uint16Array(i);for(let r=0,a=0;r<i;r+=6,a+=4)o[r]=a,o[r+1]=a+1,o[r+2]=a+2,o[r+3]=a+0,o[r+4]=a+2,o[r+5]=a+3;return n=dt.createIndexBuffer({context:e,typedArray:o,usage:Me.STATIC_DRAW,indexDatatype:Be.UNSIGNED_SHORT}),n.vertexArrayDestroyable=!1,e.cache.billboardCollection_indexBufferBatched=n,n}function Wye(e){let t=e.cache.billboardCollection_indexBufferInstanced;return c(t)||(t=dt.createIndexBuffer({context:e,typedArray:new Uint16Array([0,1,2,0,2,3]),usage:Me.STATIC_DRAW,indexDatatype:Be.UNSIGNED_SHORT}),t.vertexArrayDestroyable=!1,e.cache.billboardCollection_indexBufferInstanced=t),t}function Jye(e){let t=e.cache.billboardCollection_vertexBufferInstanced;return c(t)||(t=dt.createVertexBuffer({context:e,typedArray:new Float32Array([0,0,1,0,1,1,0,1]),usage:Me.STATIC_DRAW}),t.vertexArrayDestroyable=!1,e.cache.billboardCollection_vertexBufferInstanced=t),t}ec.prototype.computeNewBuffersUsage=function(){let e=this._buffersUsage,t=!1,n=this._propertiesChanged;for(let i=0;i<ZD;++i){let o=n[i]===0?Me.STATIC_DRAW:Me.STREAM_DRAW;t=t||e[i]!==o,e[i]=o}return t};function Kye(e,t,n,i,o,r){let a=[{index:ei.positionHighAndScale,componentsPerAttribute:4,componentDatatype:N.FLOAT,usage:n[R_]},{index:ei.positionLowAndRotation,componentsPerAttribute:4,componentDatatype:N.FLOAT,usage:n[R_]},{index:ei.compressedAttribute0,componentsPerAttribute:4,componentDatatype:N.FLOAT,usage:n[Qj]},{index:ei.compressedAttribute1,componentsPerAttribute:4,componentDatatype:N.FLOAT,usage:n[Mj]},{index:ei.compressedAttribute2,componentsPerAttribute:4,componentDatatype:N.FLOAT,usage:n[vj]},{index:ei.eyeOffset,componentsPerAttribute:4,componentDatatype:N.FLOAT,usage:n[Rj]},{index:ei.scaleByDistance,componentsPerAttribute:4,componentDatatype:N.FLOAT,usage:n[Pj]},{index:ei.pixelOffsetScaleByDistance,componentsPerAttribute:4,componentDatatype:N.FLOAT,usage:n[Oj]},{index:ei.compressedAttribute3,componentsPerAttribute:4,componentDatatype:N.FLOAT,usage:n[Lj]},{index:ei.textureCoordinateBoundsOrLabelTranslate,componentsPerAttribute:4,componentDatatype:N.FLOAT,usage:n[Vye]},{index:ei.splitDirection,componentsPerAttribute:1,componentDatatype:N.FLOAT,usage:n[Fj]}];i&&a.push({index:ei.direction,componentsPerAttribute:2,componentDatatype:N.FLOAT,vertexBuffer:Jye(e)}),c(o)&&a.push({index:ei.a_batchId,componentsPerAttribute:1,componentDatatype:N.FLOAT,bufferUsage:Me.STATIC_DRAW}),r&&a.push({index:ei.sdf,componentsPerAttribute:2,componentDatatype:N.FLOAT,usage:n[Nj]});let s=i?t:4*t;return new oy(e,a,s,i)}var qD=new xn;function Uj(e,t,n,i){let o,r=n[ei.positionHighAndScale],a=n[ei.positionLowAndRotation],s=i._getActualPosition();e._mode===Te.SCENE3D&&(ee.expand(e._baseVolume,s,e._baseVolume),e._boundingVolumeDirty=!0),xn.fromCartesian(s,qD);let A=i.scale,l=i.rotation;l!==0&&(e._shaderRotation=!0),e._maxScale=Math.max(e._maxScale,A);let f=qD.high,h=qD.low;e._instanced?(o=i._index,r(o,f.x,f.y,f.z,A),a(o,h.x,h.y,h.z,l)):(o=i._index*4,r(o+0,f.x,f.y,f.z,A),r(o+1,f.x,f.y,f.z,A),r(o+2,f.x,f.y,f.z,A),r(o+3,f.x,f.y,f.z,A),a(o+0,h.x,h.y,h.z,l),a(o+1,h.x,h.y,h.z,l),a(o+2,h.x,h.y,h.z,l),a(o+3,h.x,h.y,h.z,l))}var va=new U,$s=32768,dp=65536,WD=4096,NA=256,Xye=128,Zye=32,$ye=8,Gj=4,ebe=1/256,zj=0,Hj=2,Vj=3,jj=1,eQ=new Jt;function Yj(e,t,n,i){let o,r=n[ei.compressedAttribute0],a=i.pixelOffset,s=a.x,A=a.y,l=i._translate,f=l.x,h=l.y;e._maxPixelOffset=Math.max(e._maxPixelOffset,Math.abs(s+f),Math.abs(-A+h));let m=i.horizontalOrigin,p=i._verticalOrigin,g=i.show&&i.clusterShow;i.color.alpha===0&&(g=!1),p===yn.BASELINE&&(p=yn.BOTTOM),e._allHorizontalCenter=e._allHorizontalCenter&&m===pi.CENTER,e._allVerticalCenter=e._allVerticalCenter&&p===yn.CENTER;let C=0,_=0,E=0,I=0;if(i.ready){let L=i.computeTextureCoordinates(eQ);C=L.x,_=L.y,E=L.width,I=L.height}let y=C+E,b=_+I,x=Math.floor(w.clamp(s,-$s,$s)+$s)*Xye;x+=(m+1)*Zye,x+=(p+1)*$ye,x+=(g?1:0)*Gj;let S=Math.floor(w.clamp(A,-$s,$s)+$s)*NA,P=Math.floor(w.clamp(f,-$s,$s)+$s)*NA,D=(w.clamp(h,-$s,$s)+$s)*ebe,Q=Math.floor(D),v=Math.floor((D-Q)*NA);S+=Q,P+=v,va.x=C,va.y=_;let d=ni.compressTextureCoordinates(va);va.x=y;let B=ni.compressTextureCoordinates(va);va.y=b;let T=ni.compressTextureCoordinates(va);va.x=C;let R=ni.compressTextureCoordinates(va);e._instanced?(o=i._index,r(o,x,S,P,d)):(o=i._index*4,r(o+0,x+zj,S,P,d),r(o+1,x+Hj,S,P,B),r(o+2,x+Vj,S,P,T),r(o+3,x+jj,S,P,R))}function qj(e,t,n,i){let o,r=n[ei.compressedAttribute1],a=i.alignedAxis;u.equals(a,u.ZERO)||(e._shaderAlignedAxis=!0);let s=0,A=1,l=1,f=1,h=i.translucencyByDistance;c(h)&&(s=h.near,A=h.nearValue,l=h.far,f=h.farValue,(A!==1||f!==1)&&(e._shaderTranslucencyByDistance=!0));let m=Math.round(i.width??0);e._maxSize=Math.max(e._maxSize,m);let p=w.clamp(m,0,dp),g=0;Math.abs(u.magnitudeSquared(a)-1)<w.EPSILON6&&(g=ni.octEncodeFloat(a)),A=w.clamp(A,0,1),A=A===1?255:A*255|0,p=p*NA+A,f=w.clamp(f,0,1),f=f===1?255:f*255|0,g=g*NA+f,e._instanced?(o=i._index,r(o,p,g,s,l)):(o=i._index*4,r(o+0,p,g,s,l),r(o+1,p,g,s,l),r(o+2,p,g,s,l),r(o+3,p,g,s,l))}function KD(e,t,n,i){let o,r=n[ei.compressedAttribute2],a=i.color,s=c(e._batchTable)?F.WHITE:i.getPickId(t.context).color,A=i.sizeInMeters?1:0,l=Math.abs(u.magnitudeSquared(i.alignedAxis)-1)<w.EPSILON6?1:0;e._allSizedInMeters=e._allSizedInMeters&&A===1;let f=i.height??0;e._maxSize=Math.max(e._maxSize,f);let h=i._labelHorizontalOrigin??-2;h+=2;let m=f*Gj+h,p=F.floatToByte(a.red),g=F.floatToByte(a.green),C=F.floatToByte(a.blue),_=p*dp+g*NA+C;p=F.floatToByte(s.red),g=F.floatToByte(s.green),C=F.floatToByte(s.blue);let E=p*dp+g*NA+C,I=F.floatToByte(a.alpha)*dp+F.floatToByte(s.alpha)*NA;I+=A*2+l,e._instanced?(o=i._index,r(o,_,E,I,m)):(o=i._index*4,r(o+0,_,E,I,m),r(o+1,_,E,I,m),r(o+2,_,E,I,m),r(o+3,_,E,I,m))}function XD(e,t,n,i){let o,r=n[ei.eyeOffset],a=i.eyeOffset,s=a.z;if(i._heightReference!==Ge.NONE&&(s*=1.005),e._maxEyeOffset=Math.max(e._maxEyeOffset,Math.abs(a.x),Math.abs(a.y),Math.abs(s)),e._instanced){if(va.x=0,va.y=0,i.ready){let l=i.computeTextureCoordinates(eQ);va.x=l.width,va.y=l.height}let A=ni.compressTextureCoordinates(va);o=i._index,r(o,a.x,a.y,s,A)}else o=i._index*4,r(o+0,a.x,a.y,s,0),r(o+1,a.x,a.y,s,0),r(o+2,a.x,a.y,s,0),r(o+3,a.x,a.y,s,0)}function Wj(e,t,n,i){let o,r=n[ei.scaleByDistance],a=0,s=1,A=1,l=1,f=i.scaleByDistance;c(f)&&(a=f.near,s=f.nearValue,A=f.far,l=f.farValue,(s!==1||l!==1)&&(e._shaderScaleByDistance=!0)),e._instanced?(o=i._index,r(o,a,s,A,l)):(o=i._index*4,r(o+0,a,s,A,l),r(o+1,a,s,A,l),r(o+2,a,s,A,l),r(o+3,a,s,A,l))}function Jj(e,t,n,i){let o,r=n[ei.pixelOffsetScaleByDistance],a=0,s=1,A=1,l=1,f=i.pixelOffsetScaleByDistance;c(f)&&(a=f.near,s=f.nearValue,A=f.far,l=f.farValue,(s!==1||l!==1)&&(e._shaderPixelOffsetScaleByDistance=!0)),e._instanced?(o=i._index,r(o,a,s,A,l)):(o=i._index*4,r(o+0,a,s,A,l),r(o+1,a,s,A,l),r(o+2,a,s,A,l),r(o+3,a,s,A,l))}function Kj(e,t,n,i){let o,r=n[ei.compressedAttribute3],a=0,s=Number.MAX_VALUE,A=i.distanceDisplayCondition;c(A)&&(a=A.near,s=A.far,a*=a,s*=s,e._shaderDistanceDisplayCondition=!0);let l=i.disableDepthTestDistance,f=Ps(i.heightReference)&&t.context.depthTexture;c(l)||(l=f?5e3:0),l*=l,(f||l>0)&&(e._shaderDisableDepthDistance=!0,l===Number.POSITIVE_INFINITY&&(l=-1));let h,m;c(i._labelDimensions)?(m=i._labelDimensions.x,h=i._labelDimensions.y):(m=i.width??0,h=i.height??0);let p=Math.floor(w.clamp(m,0,WD)),g=Math.floor(w.clamp(h,0,WD)),C=p*WD+g;e._instanced?(o=i._index,r(o,a,s,l,C)):(o=i._index*4,r(o+0,a,s,l,C),r(o+1,a,s,l,C),r(o+2,a,s,l,C),r(o+3,a,s,l,C))}function Xj(e,t,n,i){if(Ps(i.heightReference)){let m=e._scene,p=t.context,g=t.globeTranslucencyState.translucent,C=c(m.globe)&&m.globe.depthTestAgainstTerrain;e._shaderClampToGround=p.depthTexture&&!g&&C}let o,r=n[ei.textureCoordinateBoundsOrLabelTranslate];if(pn.maximumVertexTextureImageUnits>0){let m=0,p=0;c(i._labelTranslate)&&(m=i._labelTranslate.x,p=i._labelTranslate.y),e._instanced?(o=i._index,r(o,m,p,0,0)):(o=i._index*4,r(o+0,m,p,0,0),r(o+1,m,p,0,0),r(o+2,m,p,0,0),r(o+3,m,p,0,0));return}let a=0,s=0,A=0,l=0;if(i.ready){let m=i.computeTextureCoordinates(eQ);a=m.x,s=m.y,A=m.width,l=m.height}let f=a+A,h=s+l;e._instanced?(o=i._index,r(o,a,s,f,h)):(o=i._index*4,r(o+0,a,s,f,h),r(o+1,a,s,f,h),r(o+2,a,s,f,h),r(o+3,a,s,f,h))}function tbe(e,t,n,i){if(!c(e._batchTable))return;let o=n[ei.a_batchId],r=i._batchIndex,a;e._instanced?(a=i._index,o(a,r)):(a=i._index*4,o(a+0,r),o(a+1,r),o(a+2,r),o(a+3,r))}function Zj(e,t,n,i){if(!e._sdf)return;let o,r=n[ei.sdf],a=i.outlineColor,s=i.outlineWidth,A=F.floatToByte(a.red),l=F.floatToByte(a.green),f=F.floatToByte(a.blue),h=A*dp+l*NA+f,m=s/Lr.RADIUS,p=F.floatToByte(a.alpha)*dp+F.floatToByte(m)*NA;e._instanced?(o=i._index,r(o,h,p)):(o=i._index*4,r(o+0,h+zj,p),r(o+1,h+Hj,p),r(o+2,h+Vj,p),r(o+3,h+jj,p))}function $j(e,t,n,i){let o=n[ei.splitDirection],r=0,a=i.splitDirection;c(a)&&(r=a);let s;e._instanced?(s=i._index,o(s,r)):(s=i._index*4,o(s+0,r),o(s+1,r),o(s+2,r),o(s+3,r))}function nbe(e,t,n,i){Uj(e,t,n,i),Yj(e,t,n,i),qj(e,t,n,i),KD(e,t,n,i),XD(e,t,n,i),Wj(e,t,n,i),Jj(e,t,n,i),Kj(e,t,n,i),Xj(e,t,n,i),tbe(e,t,n,i),Zj(e,t,n,i),$j(e,t,n,i)}function JD(e,t,n,i,o,r){let a;i.mode===Te.SCENE3D?(a=e._baseVolume,e._boundingVolumeDirty=!0):a=e._baseVolume2D;let s=[];for(let A=0;A<n;++A){let l=t[A],f=l.position,h=hi._computeActualPosition(l,f,i,o);c(h)&&(l._setActualPosition(h),r?s.push(h):ee.expand(a,h,a))}r&&ee.fromPoints(s,a)}function ibe(e,t){let n=t.mode,i=e._billboards,o=e._billboardsToUpdate,r=e._modelMatrix;e._createVertexArray||e._mode!==n||n!==Te.SCENE3D&&!O.equals(r,e.modelMatrix)?(e._mode=n,O.clone(e.modelMatrix,r),e._createVertexArray=!0,(n===Te.SCENE3D||n===Te.SCENE2D||n===Te.COLUMBUS_VIEW)&&JD(e,i,i.length,t,r,!0)):n===Te.MORPHING?JD(e,i,i.length,t,r,!0):(n===Te.SCENE2D||n===Te.COLUMBUS_VIEW)&&JD(e,o,e._billboardsToUpdateIndex,t,r,!1)}function obe(e,t,n){let i=1;(!e._allSizedInMeters||e._maxPixelOffset!==0)&&(i=t.camera.getPixelSize(n,t.context.drawingBufferWidth,t.context.drawingBufferHeight));let o=i*e._maxScale*e._maxSize*2;e._allHorizontalCenter&&e._allVerticalCenter&&(o*=.5);let r=i*e._maxPixelOffset+e._maxEyeOffset;n.radius+=o+r}function rbe(e,t){let i=t.createViewportQuadCommand(`uniform sampler2D billboard_texture; 
in vec2 v_textureCoordinates; 
void main() 
{ 
    out_FragColor = texture(billboard_texture, v_textureCoordinates); 
} 
`,{uniformMap:{billboard_texture:function(){return e.textureAtlas.texture}}});return i.pass=Ye.OVERLAY,i}var abe=[];ec.prototype.update=function(e){if($D(this),!this.show)return;let t=e.context;this._instanced=t.instancedArrays,ei=this._instanced?Yye:jye,YD=this._instanced?Wye:qye;let n=this._billboards,i=n.length,o=!0;for(let D=0;D<i;++D){let Q=n[D];c(Q.loadError)&&(console.error(`Error loading image for billboard: ${Q.loadError}`),Q.image=void 0),Q.textureDirty&&this._updateBillboard(Q,ah),Q.show&&(o=o&&Q.ready)}let r=this._textureAtlas;if(e.afterRender.push(()=>{if(!this.isDestroyed())return r.update(e.context)}),!c(r.texture))return;ibe(this,e),n=this._billboards,i=n.length;let a=this._billboardsToUpdate,s=this._billboardsToUpdateIndex,A=this._propertiesChanged,l=r.guid,f=this._createVertexArray||this._textureAtlasGUID!==l;this._textureAtlasGUID=l;let h,m=e.passes,p=m.pick;if(f||!p&&this.computeNewBuffersUsage()){this._createVertexArray=!1;for(let D=0;D<ZD;++D)A[D]=0;if(this._vaf=this._vaf&&this._vaf.destroy(),i>0){this._vaf=Kye(t,i,this._buffersUsage,this._instanced,this._batchTable,this._sdf),h=this._vaf.writers;for(let D=0;D<i;++D){let Q=this._billboards[D];Q._dirty=!1,Q.textureDirty=!1,nbe(this,e,h,Q)}this._vaf.commit(YD(t))}this._billboardsToUpdateIndex=0}else if(s>0){let D=abe;D.length=0,(A[R_]||A[Gye]||A[Uye])&&D.push(Uj),(A[ah]||A[Qj]||A[Fye]||A[kye]||A[Nye])&&(D.push(Yj),this._instanced&&D.push(XD)),(A[ah]||A[zye]||A[Mj])&&(D.push(qj),D.push(KD)),(A[ah]||A[vj])&&D.push(KD),(A[ah]||A[Rj])&&D.push(XD),A[Pj]&&D.push(Wj),A[Oj]&&D.push(Jj),(A[Lj]||A[Hye]||A[ah]||A[R_])&&D.push(Kj),(A[ah]||A[R_])&&D.push(Xj),A[Nj]&&D.push(Zj),A[Fj]&&D.push($j);let Q=D.length;if(h=this._vaf.writers,s/i>.1){for(let v=0;v<s;++v){let d=a[v];d._dirty=!1,d.textureDirty=!1;for(let B=0;B<Q;++B)D[B](this,e,h,d)}this._vaf.commit(YD(t))}else{for(let v=0;v<s;++v){let d=a[v];d._dirty=!1,d.textureDirty=!1;for(let B=0;B<Q;++B)D[B](this,e,h,d);this._instanced?this._vaf.subCommit(d._index,1):this._vaf.subCommit(d._index*4,4)}this._vaf.endSubCommits()}this._billboardsToUpdateIndex=0}if(s>i*1.5&&(a.length=i),!c(this._vaf)||!c(this._vaf.va))return;this._boundingVolumeDirty&&(this._boundingVolumeDirty=!1,ee.transform(this._baseVolume,this.modelMatrix,this._baseVolumeWC));let g,C=O.IDENTITY;e.mode===Te.SCENE3D?(C=this.modelMatrix,g=ee.clone(this._baseVolumeWC,this._boundingVolume)):g=ee.clone(this._baseVolume2D,this._boundingVolume),obe(this,e,g);let _=this._blendOption!==this.blendOption;if(this._blendOption=this.blendOption,_){this._blendOption===Mi.OPAQUE||this._blendOption===Mi.OPAQUE_AND_TRANSLUCENT?this._rsOpaque=ut.fromCache({depthTest:{enabled:!0,func:V.LESS},depthMask:!0}):this._rsOpaque=void 0;let D=this._blendOption===Mi.TRANSLUCENT;this._blendOption===Mi.TRANSLUCENT||this._blendOption===Mi.OPAQUE_AND_TRANSLUCENT?this._rsTranslucent=ut.fromCache({depthTest:{enabled:!0,func:D?V.LEQUAL:V.LESS},depthMask:D,blending:qn.ALPHA_BLEND}):this._rsTranslucent=void 0}this._shaderDisableDepthDistance=this._shaderDisableDepthDistance||e.minimumDisableDepthTestDistance!==0;let E,I,y,b,x,S=pn.maximumVertexTextureImageUnits>0;if(_||this._shaderRotation!==this._compiledShaderRotation||this._shaderAlignedAxis!==this._compiledShaderAlignedAxis||this._shaderScaleByDistance!==this._compiledShaderScaleByDistance||this._shaderTranslucencyByDistance!==this._compiledShaderTranslucencyByDistance||this._shaderPixelOffsetScaleByDistance!==this._compiledShaderPixelOffsetScaleByDistance||this._shaderDistanceDisplayCondition!==this._compiledShaderDistanceDisplayCondition||this._shaderDisableDepthDistance!==this._compiledShaderDisableDepthDistance||this._shaderClampToGround!==this._compiledShaderClampToGround||this._sdf!==this._compiledSDF){E=yj,I=Ij,x=[],c(this._batchTable)&&(x.push("VECTOR_TILE"),E=this._batchTable.getVertexShaderCallback(!1,"a_batchId",void 0)(E),I=this._batchTable.getFragmentShaderCallback(!1,void 0)(I)),y=new It({defines:x,sources:[E]}),this._instanced&&y.defines.push("INSTANCED"),this._shaderRotation&&y.defines.push("ROTATION"),this._shaderAlignedAxis&&y.defines.push("ALIGNED_AXIS"),this._shaderScaleByDistance&&y.defines.push("EYE_DISTANCE_SCALING"),this._shaderTranslucencyByDistance&&y.defines.push("EYE_DISTANCE_TRANSLUCENCY"),this._shaderPixelOffsetScaleByDistance&&y.defines.push("EYE_DISTANCE_PIXEL_OFFSET"),this._shaderDistanceDisplayCondition&&y.defines.push("DISTANCE_DISPLAY_CONDITION"),this._shaderDisableDepthDistance&&y.defines.push("DISABLE_DEPTH_DISTANCE"),this._shaderClampToGround&&(S?y.defines.push("VERTEX_DEPTH_CHECK"):y.defines.push("FRAGMENT_DEPTH_CHECK"));let D=1-Lr.CUTOFF;this._sdf&&y.defines.push("SDF");let Q=c(this._batchTable)?"VECTOR_TILE":"";this._blendOption===Mi.OPAQUE_AND_TRANSLUCENT&&(b=new It({defines:["OPAQUE",Q],sources:[I]}),this._shaderClampToGround&&(S?b.defines.push("VERTEX_DEPTH_CHECK"):b.defines.push("FRAGMENT_DEPTH_CHECK")),this._sdf&&(b.defines.push("SDF"),b.defines.push(`SDF_EDGE ${D}`)),this._sp=Bn.replaceCache({context:t,shaderProgram:this._sp,vertexShaderSource:y,fragmentShaderSource:b,attributeLocations:ei}),b=new It({defines:["TRANSLUCENT",Q],sources:[I]}),this._shaderClampToGround&&(S?b.defines.push("VERTEX_DEPTH_CHECK"):b.defines.push("FRAGMENT_DEPTH_CHECK")),this._sdf&&(b.defines.push("SDF"),b.defines.push(`SDF_EDGE ${D}`)),this._spTranslucent=Bn.replaceCache({context:t,shaderProgram:this._spTranslucent,vertexShaderSource:y,fragmentShaderSource:b,attributeLocations:ei})),this._blendOption===Mi.OPAQUE&&(b=new It({defines:[Q],sources:[I]}),this._shaderClampToGround&&(S?b.defines.push("VERTEX_DEPTH_CHECK"):b.defines.push("FRAGMENT_DEPTH_CHECK")),this._sdf&&(b.defines.push("SDF"),b.defines.push(`SDF_EDGE ${D}`)),this._sp=Bn.replaceCache({context:t,shaderProgram:this._sp,vertexShaderSource:y,fragmentShaderSource:b,attributeLocations:ei})),this._blendOption===Mi.TRANSLUCENT&&(b=new It({defines:[Q],sources:[I]}),this._shaderClampToGround&&(S?b.defines.push("VERTEX_DEPTH_CHECK"):b.defines.push("FRAGMENT_DEPTH_CHECK")),this._sdf&&(b.defines.push("SDF"),b.defines.push(`SDF_EDGE ${D}`)),this._spTranslucent=Bn.replaceCache({context:t,shaderProgram:this._spTranslucent,vertexShaderSource:y,fragmentShaderSource:b,attributeLocations:ei})),this._compiledShaderRotation=this._shaderRotation,this._compiledShaderAlignedAxis=this._shaderAlignedAxis,this._compiledShaderScaleByDistance=this._shaderScaleByDistance,this._compiledShaderTranslucencyByDistance=this._shaderTranslucencyByDistance,this._compiledShaderPixelOffsetScaleByDistance=this._shaderPixelOffsetScaleByDistance,this._compiledShaderDistanceDisplayCondition=this._shaderDistanceDisplayCondition,this._compiledShaderDisableDepthDistance=this._shaderDisableDepthDistance,this._compiledShaderClampToGround=this._shaderClampToGround,this._compiledSDF=this._sdf}let P=e.commandList;if(m.render||m.pick){let D=this._colorCommands,Q=this._blendOption===Mi.OPAQUE,v=this._blendOption===Mi.OPAQUE_AND_TRANSLUCENT,d=this._vaf.va,B=d.length,T=this._uniforms,R;c(this._batchTable)?(T=this._batchTable.getUniformMapCallback()(T),R=this._batchTable.getPickId()):R="v_pickColor",D.length=B;let L=v?B*2:B;for(let G=0;G<L;++G){let q=D[G];c(q)||(q=D[G]=new mt);let z=Q||v&&G%2===0;q.pass=z||!v?Ye.OPAQUE:Ye.TRANSLUCENT,q.owner=this;let K=v?Math.floor(G/2):G;q.boundingVolume=g,q.modelMatrix=C,q.count=d[K].indicesCount,q.shaderProgram=z?this._sp:this._spTranslucent,q.uniformMap=T,q.vertexArray=d[K].va,q.renderState=z?this._rsOpaque:this._rsTranslucent,q.debugShowBoundingVolume=this.debugShowBoundingVolume,q.pickId=R,this._instanced&&(q.count=6,q.instanceCount=i),P.push(q)}this.debugShowTextureAtlas&&(c(this.debugCommand)||(this.debugCommand=rbe(this,e.context)),P.push(this.debugCommand))}this._allBillboardsReady=o};ec.prototype.isDestroyed=function(){return!1};ec.prototype.destroy=function(){return c(this._removeCallbackFunc)&&(this._removeCallbackFunc(),this._removeCallbackFunc=void 0),this._textureAtlas=this._destroyTextureAtlas&&this._textureAtlas&&this._textureAtlas.destroy(),this._sp=this._sp&&this._sp.destroy(),this._spTranslucent=this._spTranslucent&&this._spTranslucent.destroy(),this._vaf=this._vaf&&this._vaf.destroy(),kj(this._billboards),pe(this)};var vu=ec;function sbe(e,t,n,i,o){return function(){let r=document.createElement("canvas"),a=o+2*i;r.height=r.width=a;let s=r.getContext("2d");return s.clearRect(0,0,a,a),i!==0&&(s.beginPath(),s.arc(a/2,a/2,a/2,0,2*Math.PI,!0),s.closePath(),s.fillStyle=n,s.fill(),e<1&&(s.save(),s.globalCompositeOperation="destination-out",s.beginPath(),s.arc(a/2,a/2,o/2,0,2*Math.PI,!0),s.closePath(),s.fillStyle="black",s.fill(),s.restore())),s.beginPath(),s.arc(a/2,a/2,o/2,0,2*Math.PI,!0),s.closePath(),s.fillStyle=t,s.fill(),r}}var B0=sbe;function nr(e,t,n,i,o){this._content=e,this._billboard=n,this._label=i,this._polyline=o,this._batchId=t,this._billboardImage=void 0,this._billboardColor=void 0,this._billboardOutlineColor=void 0,this._billboardOutlineWidth=void 0,this._billboardSize=void 0,this._pointSize=void 0,this._color=void 0,this._pointSize=void 0,this._pointOutlineColor=void 0,this._pointOutlineWidth=void 0,this._heightOffset=void 0,this._pickIds=new Array(3),hp(this)}var cbe=new ae;Object.defineProperties(nr.prototype,{show:{get:function(){return this._label.show},set:function(e){this._label.show=e,this._billboard.show=e,this._polyline.show=e}},color:{get:function(){return this._color},set:function(e){this._color=F.clone(e,this._color),hp(this)}},pointSize:{get:function(){return this._pointSize},set:function(e){this._pointSize=e,hp(this)}},pointOutlineColor:{get:function(){return this._pointOutlineColor},set:function(e){this._pointOutlineColor=F.clone(e,this._pointOutlineColor),hp(this)}},pointOutlineWidth:{get:function(){return this._pointOutlineWidth},set:function(e){this._pointOutlineWidth=e,hp(this)}},labelColor:{get:function(){return this._label.fillColor},set:function(e){this._label.fillColor=e,this._polyline.show=this._label.show&&e.alpha>0}},labelOutlineColor:{get:function(){return this._label.outlineColor},set:function(e){this._label.outlineColor=e}},labelOutlineWidth:{get:function(){return this._label.outlineWidth},set:function(e){this._label.outlineWidth=e}},font:{get:function(){return this._label.font},set:function(e){this._label.font=e}},labelStyle:{get:function(){return this._label.style},set:function(e){this._label.style=e}},labelText:{get:function(){return this._label.text},set:function(e){c(e)||(e=""),this._label.text=e}},backgroundColor:{get:function(){return this._label.backgroundColor},set:function(e){this._label.backgroundColor=e}},backgroundPadding:{get:function(){return this._label.backgroundPadding},set:function(e){this._label.backgroundPadding=e}},backgroundEnabled:{get:function(){return this._label.showBackground},set:function(e){this._label.showBackground=e}},scaleByDistance:{get:function(){return this._label.scaleByDistance},set:function(e){this._label.scaleByDistance=e,this._billboard.scaleByDistance=e}},translucencyByDistance:{get:function(){return this._label.translucencyByDistance},set:function(e){this._label.translucencyByDistance=e,this._billboard.translucencyByDistance=e}},distanceDisplayCondition:{get:function(){return this._label.distanceDisplayCondition},set:function(e){this._label.distanceDisplayCondition=e,this._polyline.distanceDisplayCondition=e,this._billboard.distanceDisplayCondition=e}},heightOffset:{get:function(){return this._heightOffset},set:function(e){let t=this._heightOffset??0,n=this._content.tileset.ellipsoid,i=n.cartesianToCartographic(this._billboard.position,cbe);i.height=i.height-t+e;let o=n.cartographicToCartesian(i);this._billboard.position=o,this._label.position=this._billboard.position,this._polyline.positions=[this._polyline.positions[0],o],this._heightOffset=e}},anchorLineEnabled:{get:function(){return this._polyline.show},set:function(e){this._polyline.show=e}},anchorLineColor:{get:function(){return this._polyline.material.uniforms.color},set:function(e){this._polyline.material.uniforms.color=F.clone(e,this._polyline.material.uniforms.color)}},image:{get:function(){return this._billboardImage},set:function(e){let t=this._billboardImage!==e;this._billboardImage=e,t&&hp(this)}},disableDepthTestDistance:{get:function(){return this._label.disableDepthTestDistance},set:function(e){this._label.disableDepthTestDistance=e,this._billboard.disableDepthTestDistance=e}},horizontalOrigin:{get:function(){return this._billboard.horizontalOrigin},set:function(e){this._billboard.horizontalOrigin=e}},verticalOrigin:{get:function(){return this._billboard.verticalOrigin},set:function(e){this._billboard.verticalOrigin=e}},labelHorizontalOrigin:{get:function(){return this._label.horizontalOrigin},set:function(e){this._label.horizontalOrigin=e}},labelVerticalOrigin:{get:function(){return this._label.verticalOrigin},set:function(e){this._label.verticalOrigin=e}},content:{get:function(){return this._content}},tileset:{get:function(){return this._content.tileset}},primitive:{get:function(){return this._content.tileset}},pickIds:{get:function(){let e=this._pickIds;return e[0]=this._billboard.pickId,e[1]=this._label.pickId,e[2]=this._polyline.pickId,e}}});nr.defaultColor=F.WHITE;nr.defaultPointOutlineColor=F.BLACK;nr.defaultPointOutlineWidth=0;nr.defaultPointSize=8;function hp(e){let t=e._billboard;if(c(e._billboardImage)&&e._billboardImage!==t.image){t.image=e._billboardImage;return}if(c(e._billboardImage))return;let n=e._color??nr.defaultColor,i=e._pointOutlineColor??nr.defaultPointOutlineColor,o=e._pointOutlineWidth??nr.defaultPointOutlineWidth,r=e._pointSize??nr.defaultPointSize,a=e._billboardColor,s=e._billboardOutlineColor,A=e._billboardOutlineWidth,l=e._billboardSize;if(F.equals(n,a)&&F.equals(i,s)&&o===A&&r===l)return;e._billboardColor=F.clone(n,e._billboardColor),e._billboardOutlineColor=F.clone(i,e._billboardOutlineColor),e._billboardOutlineWidth=o,e._billboardSize=r;let f=n.alpha,h=n.toCssColorString(),m=i.toCssColorString(),p=JSON.stringify([h,r,m,o]);t.setImage(p,B0(f,h,m,o,r))}nr.prototype.hasProperty=function(e){return this._content.batchTable.hasProperty(this._batchId,e)};nr.prototype.getPropertyIds=function(e){return this._content.batchTable.getPropertyIds(this._batchId,e)};nr.prototype.getProperty=function(e){return this._content.batchTable.getProperty(this._batchId,e)};nr.prototype.getPropertyInherited=function(e){return TA.getPropertyInherited(this._content,this._batchId,e)};nr.prototype.setProperty=function(e,t){this._content.batchTable.setProperty(this._batchId,e,t),this._content.featurePropertiesDirty=!0};nr.prototype.isExactClass=function(e){return this._content.batchTable.isExactClass(this._batchId,e)};nr.prototype.isClass=function(e){return this._content.batchTable.isClass(this._batchId,e)};nr.prototype.getExactClassName=function(){return this._content.batchTable.getExactClassName(this._batchId)};var mp=nr;function Abe(e,t,n,i,o){let r=e.measureText(t);if(!!/\S/.test(t)){let s=document.defaultView.getComputedStyle(e.canvas).getPropertyValue("font-size").replace("px",""),A=document.createElement("canvas"),l=100,f=r.width+l|0,h=3*s,m=h/2;A.width=f,A.height=h;let p=A.getContext("2d");p.font=n,p.fillStyle="white",p.fillRect(0,0,A.width+1,A.height+1),i&&(p.strokeStyle="black",p.lineWidth=e.lineWidth,p.strokeText(t,l/2,m)),o&&(p.fillStyle="black",p.fillText(t,l/2,m));let g=p.getImageData(0,0,f,h).data,C=g.length,_=f*4,E,I,y,b;for(E=0;E<C;++E)if(g[E]!==255){y=E/_|0;break}for(E=C-1;E>=0;--E)if(g[E]!==255){b=E/_|0;break}let x=-1;for(E=0;E<f&&x===-1;++E)for(I=0;I<h;++I){let S=E*4+I*_;if(g[S]!==255||g[S+1]!==255||g[S+2]!==255||g[S+3]!==255){x=E;break}}return{width:r.width,height:b-y,ascent:m-y,descent:b-m,minx:x-l/2}}return{width:r.width,height:0,ascent:0,descent:0,minx:0}}var sh;function lbe(e,t){if(e==="")return;t=t??k.EMPTY_OBJECT;let n=t.font??"10px sans-serif",i=t.stroke??!1,o=t.fill??!0,r=t.strokeWidth??1,a=t.backgroundColor??F.TRANSPARENT,s=t.padding??0,A=s*2,l=document.createElement("canvas");l.width=1,l.height=1,l.style.font=n;let f=l.getContext("2d",{willReadFrequently:!0});c(sh)||(c(f.imageSmoothingEnabled)?sh="imageSmoothingEnabled":c(f.mozImageSmoothingEnabled)?sh="mozImageSmoothingEnabled":c(f.webkitImageSmoothingEnabled)?sh="webkitImageSmoothingEnabled":c(f.msImageSmoothingEnabled)&&(sh="msImageSmoothingEnabled")),f.font=n,f.lineJoin="round",f.lineWidth=r,f[sh]=!1,l.style.visibility="hidden",document.body.appendChild(l);let h=Abe(f,e,n,i,o);l.dimensions=h,document.body.removeChild(l),l.style.visibility="";let m=-h.minx,p=Math.ceil(h.width)+m+A,g=h.height+A,C=g-h.ascent+s,_=g-C+A;if(l.width=p,l.height=g,f.font=n,f.lineJoin="round",f.lineWidth=r,f[sh]=!1,a!==F.TRANSPARENT&&(f.fillStyle=a.toCssColorString(),f.fillRect(0,0,l.width,l.height)),i){let E=t.strokeColor??F.BLACK;f.strokeStyle=E.toCssColorString(),f.strokeText(e,m+s,_)}if(o){let E=t.fillColor??F.WHITE;f.fillStyle=E.toCssColorString(),f.fillText(e,m+s,_)}return l}var e4=lbe;var u4=qr(o4(),1);var ube={FILL:0,OUTLINE:1,FILL_AND_OUTLINE:2},wo=Object.freeze(ube);var r4={},a4=0,dbe=256,hbe=new F(.165,.165,.165,.8),mbe=new U(7,5),Eo=Object.freeze({LTR:0,RTL:1,WEAK:2,BRACKETS:3});function ch(e){!e._rebindAllGlyphs&&!e._repositionAllGlyphs&&e._labelCollection._labelsToUpdate.push(e),e._rebindAllGlyphs=!0}function P_(e){!e._rebindAllGlyphs&&!e._repositionAllGlyphs&&e._labelCollection._labelsToUpdate.push(e),e._repositionAllGlyphs=!0}function M_(e,t){return document.defaultView.getComputedStyle(e,null).getPropertyValue(t)}function c4(e){let t=r4[e._font];if(!c(t)){let n=document.createElement("div");n.style.position="absolute",n.style.opacity=0,n.style.font=e._font,document.body.appendChild(n);let i=parseFloat(M_(n,"line-height"));isNaN(i)&&(i=void 0),t={family:M_(n,"font-family"),size:M_(n,"font-size").replace("px",""),style:M_(n,"font-style"),weight:M_(n,"font-weight"),lineHeight:i},document.body.removeChild(n),a4<dbe&&(r4[e._font]=t,a4++)}e._fontFamily=t.family,e._fontSize=t.size,e._fontStyle=t.style,e._fontWeight=t.weight,e._lineHeight=t.lineHeight}function Oc(e,t){e=e??k.EMPTY_OBJECT;let n=e.translucencyByDistance,i=e.pixelOffsetScaleByDistance,o=e.scaleByDistance,r=e.distanceDisplayCondition;c(n)&&(n=Rt.clone(n)),c(i)&&(i=Rt.clone(i)),c(o)&&(o=Rt.clone(o)),c(r)&&(r=rt.clone(r)),this._renderedText=void 0,this._text=void 0,this._show=e.show??!0,this._font=e.font??"30px sans-serif",this._fillColor=F.clone(e.fillColor??F.WHITE),this._outlineColor=F.clone(e.outlineColor??F.BLACK),this._outlineWidth=e.outlineWidth??1,this._showBackground=e.showBackground??!1,this._backgroundColor=F.clone(e.backgroundColor??hbe),this._backgroundPadding=U.clone(e.backgroundPadding??mbe),this._style=e.style??wo.FILL,this._verticalOrigin=e.verticalOrigin??yn.BASELINE,this._horizontalOrigin=e.horizontalOrigin??pi.LEFT,this._pixelOffset=U.clone(e.pixelOffset??U.ZERO),this._eyeOffset=u.clone(e.eyeOffset??u.ZERO),this._position=u.clone(e.position??u.ZERO),this._scale=e.scale??1,this._id=e.id,this._translucencyByDistance=n,this._pixelOffsetScaleByDistance=i,this._scaleByDistance=o,this._heightReference=e.heightReference??Ge.NONE,this._distanceDisplayCondition=r,this._disableDepthTestDistance=e.disableDepthTestDistance,this._labelCollection=t,this._glyphs=[],this._backgroundBillboard=void 0,this._batchIndex=void 0,this._rebindAllGlyphs=!0,this._repositionAllGlyphs=!0,this._actualClampedPosition=void 0,this._removeCallbackFunc=void 0,this._mode=void 0,this._clusterShow=!0,this.text=e.text??"",this._relativeSize=1,c4(this),this._updateClamping()}Object.defineProperties(Oc.prototype,{show:{get:function(){return this._show},set:function(e){if(this._show!==e){this._show=e;let t=this._glyphs;for(let i=0,o=t.length;i<o;i++){let r=t[i].billboard;c(r)&&(r.show=e)}let n=this._backgroundBillboard;c(n)&&(n.show=e)}}},position:{get:function(){return this._position},set:function(e){let t=this._position;if(!u.equals(t,e)){u.clone(e,t);let n=this._glyphs;for(let o=0,r=n.length;o<r;o++){let a=n[o].billboard;c(a)&&(a.position=e)}let i=this._backgroundBillboard;c(i)&&(i.position=e),this._updateClamping()}}},heightReference:{get:function(){return this._heightReference},set:function(e){if(e!==this._heightReference){this._heightReference=e;let t=this._glyphs;for(let i=0,o=t.length;i<o;i++){let r=t[i].billboard;c(r)&&(r.heightReference=e)}let n=this._backgroundBillboard;c(n)&&(n.heightReference=e),P_(this),this._updateClamping()}}},text:{get:function(){return this._text},set:function(e){if(this._text!==e){this._text=e;let t=Oc.filterUnsupportedCharacters(e);this._renderedText=Oc.enableRightToLeftDetection?Ibe(t):t,ch(this)}}},font:{get:function(){return this._font},set:function(e){this._font!==e&&(this._font=e,ch(this),c4(this))}},fillColor:{get:function(){return this._fillColor},set:function(e){let t=this._fillColor;F.equals(t,e)||(F.clone(e,t),ch(this))}},outlineColor:{get:function(){return this._outlineColor},set:function(e){let t=this._outlineColor;F.equals(t,e)||(F.clone(e,t),ch(this))}},outlineWidth:{get:function(){return this._outlineWidth},set:function(e){this._outlineWidth!==e&&(this._outlineWidth=e,ch(this))}},showBackground:{get:function(){return this._showBackground},set:function(e){this._showBackground!==e&&(this._showBackground=e,ch(this))}},backgroundColor:{get:function(){return this._backgroundColor},set:function(e){let t=this._backgroundColor;if(!F.equals(t,e)){F.clone(e,t);let n=this._backgroundBillboard;c(n)&&(n.color=t)}}},backgroundPadding:{get:function(){return this._backgroundPadding},set:function(e){let t=this._backgroundPadding;U.equals(t,e)||(U.clone(e,t),P_(this))}},style:{get:function(){return this._style},set:function(e){this._style!==e&&(this._style=e,ch(this))}},pixelOffset:{get:function(){return this._pixelOffset},set:function(e){let t=this._pixelOffset;if(!U.equals(t,e)){U.clone(e,t);let n=this._glyphs;for(let o=0,r=n.length;o<r;o++){let a=n[o];c(a.billboard)&&(a.billboard.pixelOffset=e)}let i=this._backgroundBillboard;c(i)&&(i.pixelOffset=e)}}},translucencyByDistance:{get:function(){return this._translucencyByDistance},set:function(e){let t=this._translucencyByDistance;if(!Rt.equals(t,e)){this._translucencyByDistance=Rt.clone(e,t);let n=this._glyphs;for(let o=0,r=n.length;o<r;o++){let a=n[o];c(a.billboard)&&(a.billboard.translucencyByDistance=e)}let i=this._backgroundBillboard;c(i)&&(i.translucencyByDistance=e)}}},pixelOffsetScaleByDistance:{get:function(){return this._pixelOffsetScaleByDistance},set:function(e){let t=this._pixelOffsetScaleByDistance;if(!Rt.equals(t,e)){this._pixelOffsetScaleByDistance=Rt.clone(e,t);let n=this._glyphs;for(let o=0,r=n.length;o<r;o++){let a=n[o];c(a.billboard)&&(a.billboard.pixelOffsetScaleByDistance=e)}let i=this._backgroundBillboard;c(i)&&(i.pixelOffsetScaleByDistance=e)}}},scaleByDistance:{get:function(){return this._scaleByDistance},set:function(e){let t=this._scaleByDistance;if(!Rt.equals(t,e)){this._scaleByDistance=Rt.clone(e,t);let n=this._glyphs;for(let o=0,r=n.length;o<r;o++){let a=n[o];c(a.billboard)&&(a.billboard.scaleByDistance=e)}let i=this._backgroundBillboard;c(i)&&(i.scaleByDistance=e)}}},eyeOffset:{get:function(){return this._eyeOffset},set:function(e){let t=this._eyeOffset;if(!u.equals(t,e)){u.clone(e,t);let n=this._glyphs;for(let o=0,r=n.length;o<r;o++){let a=n[o];c(a.billboard)&&(a.billboard.eyeOffset=e)}let i=this._backgroundBillboard;c(i)&&(i.eyeOffset=e)}}},horizontalOrigin:{get:function(){return this._horizontalOrigin},set:function(e){this._horizontalOrigin!==e&&(this._horizontalOrigin=e,P_(this))}},verticalOrigin:{get:function(){return this._verticalOrigin},set:function(e){if(this._verticalOrigin!==e){this._verticalOrigin=e;let t=this._glyphs;for(let i=0,o=t.length;i<o;i++){let r=t[i];c(r.billboard)&&(r.billboard.verticalOrigin=e)}let n=this._backgroundBillboard;c(n)&&(n.verticalOrigin=e),P_(this)}}},scale:{get:function(){return this._scale},set:function(e){if(this._scale!==e){this._scale=e;let t=this._glyphs;for(let i=0,o=t.length;i<o;i++){let r=t[i];c(r.billboard)&&(r.billboard.scale=e*this._relativeSize)}let n=this._backgroundBillboard;c(n)&&(n.scale=e*this._relativeSize),P_(this)}}},totalScale:{get:function(){return this._scale*this._relativeSize}},distanceDisplayCondition:{get:function(){return this._distanceDisplayCondition},set:function(e){if(!rt.equals(e,this._distanceDisplayCondition)){this._distanceDisplayCondition=rt.clone(e,this._distanceDisplayCondition);let t=this._glyphs;for(let i=0,o=t.length;i<o;i++){let r=t[i];c(r.billboard)&&(r.billboard.distanceDisplayCondition=e)}let n=this._backgroundBillboard;c(n)&&(n.distanceDisplayCondition=e)}}},disableDepthTestDistance:{get:function(){return this._disableDepthTestDistance},set:function(e){if(this._disableDepthTestDistance!==e){this._disableDepthTestDistance=e;let t=this._glyphs;for(let i=0,o=t.length;i<o;i++){let r=t[i];c(r.billboard)&&(r.billboard.disableDepthTestDistance=e)}let n=this._backgroundBillboard;c(n)&&(n.disableDepthTestDistance=e)}}},id:{get:function(){return this._id},set:function(e){if(this._id!==e){this._id=e;let t=this._glyphs;for(let i=0,o=t.length;i<o;i++){let r=t[i];c(r.billboard)&&(r.billboard.id=e)}let n=this._backgroundBillboard;c(n)&&(n.id=e)}}},pickId:{get:function(){if(!(this._glyphs.length===0||!c(this._glyphs[0].billboard)))return this._glyphs[0].billboard.pickId}},_clampedPosition:{get:function(){return this._actualClampedPosition},set:function(e){this._actualClampedPosition=u.clone(e,this._actualClampedPosition);let t=this._glyphs;for(let i=0,o=t.length;i<o;i++){let r=t[i];c(r.billboard)&&(r.billboard._clampedPosition=e)}let n=this._backgroundBillboard;c(n)&&(n._clampedPosition=e)}},clusterShow:{get:function(){return this._clusterShow},set:function(e){if(this._clusterShow!==e){this._clusterShow=e;let t=this._glyphs;for(let i=0,o=t.length;i<o;i++){let r=t[i];c(r.billboard)&&(r.billboard.clusterShow=e)}let n=this._backgroundBillboard;c(n)&&(n.clusterShow=e)}}}});Oc.prototype._updateClamping=function(){hi._updateClamping(this._labelCollection,this)};Oc.prototype.computeScreenSpacePosition=function(e,t){c(t)||(t=new U);let i=this._labelCollection.modelMatrix,o=c(this._actualClampedPosition)?this._actualClampedPosition:this._position;return hi._computeScreenSpacePosition(i,o,this._eyeOffset,this._pixelOffset,e,t)};Oc.getScreenSpaceBoundingBox=function(e,t,n){let i=0,o=0,r=0,a=0,s=e.totalScale,A=e._backgroundBillboard;if(c(A))i=t.x+A._translate.x,o=t.y-A._translate.y,r=A.width*s,a=A.height*s,e.verticalOrigin===yn.BOTTOM||e.verticalOrigin===yn.BASELINE?o-=a:e.verticalOrigin===yn.CENTER&&(o-=a*.5);else{i=Number.POSITIVE_INFINITY,o=Number.POSITIVE_INFINITY;let l=0,f=0,h=e._glyphs,m=h.length;for(let p=0;p<m;++p){let g=h[p],C=g.billboard;if(!c(C))continue;let _=t.x+C._translate.x,E=t.y-C._translate.y,I=g.dimensions.width*s,y=g.dimensions.height*s;e.verticalOrigin===yn.BOTTOM||e.verticalOrigin===yn.BASELINE?E-=y:e.verticalOrigin===yn.CENTER&&(E-=y*.5),e._verticalOrigin===yn.TOP?E+=Lr.PADDING*s:(e._verticalOrigin===yn.BOTTOM||e._verticalOrigin===yn.BASELINE)&&(E-=Lr.PADDING*s),i=Math.min(i,_),o=Math.min(o,E),l=Math.max(l,_+I),f=Math.max(f,E+y)}r=l-i,a=f-o}return c(n)||(n=new Jt),n.x=i,n.y=o,n.width=r,n.height=a,n};Oc.filterUnsupportedCharacters=function(e){let t=new RegExp(/[\u0000-\u0008\u000E-\u001F\u00ad\u202a-\u206f\u200b-\u200f]/,"g");return e.replace(t,"")};Oc.prototype.equals=function(e){return this===e||c(e)&&this._show===e._show&&this._scale===e._scale&&this._outlineWidth===e._outlineWidth&&this._showBackground===e._showBackground&&this._style===e._style&&this._verticalOrigin===e._verticalOrigin&&this._horizontalOrigin===e._horizontalOrigin&&this._heightReference===e._heightReference&&this._renderedText===e._renderedText&&this._font===e._font&&u.equals(this._position,e._position)&&F.equals(this._fillColor,e._fillColor)&&F.equals(this._outlineColor,e._outlineColor)&&F.equals(this._backgroundColor,e._backgroundColor)&&U.equals(this._backgroundPadding,e._backgroundPadding)&&U.equals(this._pixelOffset,e._pixelOffset)&&u.equals(this._eyeOffset,e._eyeOffset)&&Rt.equals(this._translucencyByDistance,e._translucencyByDistance)&&Rt.equals(this._pixelOffsetScaleByDistance,e._pixelOffsetScaleByDistance)&&Rt.equals(this._scaleByDistance,e._scaleByDistance)&&rt.equals(this._distanceDisplayCondition,e._distanceDisplayCondition)&&this._disableDepthTestDistance===e._disableDepthTestDistance&&this._id===e._id};Oc.prototype.isDestroyed=function(){return!1};Oc.enableRightToLeftDetection=!1;function pbe(e,t){let n=/[a-zA-Z0-9]/,i=/[()[\]{}<>]/,o=[],r="",a=Eo.LTR,s="",A=e.length;for(let l=0;l<A;++l){let f=e.charAt(l);t.test(f)?s=Eo.RTL:n.test(f)?s=Eo.LTR:i.test(f)?s=Eo.BRACKETS:s=Eo.WEAK,l===0&&(a=s),a===s&&s!==Eo.BRACKETS?r+=f:(r!==""&&o.push({Type:a,Word:r}),a=s,r=f)}return o.push({Type:s,Word:r}),o}function gbe(e){return e.split("").reverse().join("")}function O_(e,t,n){return e.slice(0,t)+n+e.slice(t)}function Cbe(e){switch(e){case"(":return")";case")":return"(";case"[":return"]";case"]":return"[";case"{":return"}";case"}":return"{";case"<":return">";case">":return"<"}}var _be="\u05D0-\u05EA",Ebe="\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF",s4=new RegExp(`[${_be}${Ebe}]`);function Ibe(e){let t=e.split(`
`),n="";for(let i=0;i<t.length;i++){let o=t[i],r=s4.test(o.charAt(0)),a=pbe(o,s4),s=0,A="";for(let l=0;l<a.length;++l){let f=a[l],h=f.Type===Eo.BRACKETS?Cbe(f.Word):gbe(f.Word);r?f.Type===Eo.RTL?(A=h+A,s=0):f.Type===Eo.LTR?(A=O_(A,s,f.Word),s+=f.Word.length):(f.Type===Eo.WEAK||f.Type===Eo.BRACKETS)&&(f.Type===Eo.WEAK&&a[l-1].Type===Eo.BRACKETS?A=h+A:a[l-1].Type===Eo.RTL?(A=h+A,s=0):a.length>l+1?a[l+1].Type===Eo.RTL?(A=h+A,s=0):(A=O_(A,s,f.Word),s+=f.Word.length):A=O_(A,0,h)):f.Type===Eo.RTL?A=O_(A,s,h):f.Type===Eo.LTR?(A+=f.Word,s=A.length):(f.Type===Eo.WEAK||f.Type===Eo.BRACKETS)&&(l>0&&a[l-1].Type===Eo.RTL?a.length>l+1?a[l+1].Type===Eo.RTL?A=O_(A,s,h):(A+=f.Word,s=A.length):A+=f.Word:(A+=f.Word,s=A.length))}n+=A,i<t.length-1&&(n+=`
`)}return n}var L_=Oc;var d4=qr(A4(),1);function bbe(){this.dimensions=void 0,this.billboardTexture=void 0,this.billboard=void 0}var Bbe=1.2,l4="ID_WHITE_PIXEL",tQ=new U(4,4),xbe=new Jt(1,1,1,1);function Tbe(e,t){let n=t._backgroundBillboardTexture;if(!n.hasImage){let o=document.createElement("canvas");o.width=tQ.x,o.height=tQ.y;let r=o.getContext("2d");r.fillStyle="#fff",r.fillRect(0,0,o.width,o.height),n.loadImage(l4,o),n.addImageSubRegion(l4,xbe)}let i=e.add({collection:t});return i.setImageTexture(n),i}var Vl={};function Sbe(e,t,n,i,o,r){return Vl.font=t,Vl.fillColor=n,Vl.strokeColor=i,Vl.strokeWidth=o,Vl.padding=Lr.PADDING,Vl.fill=r===wo.FILL||r===wo.FILL_AND_OUTLINE,Vl.stroke=r===wo.OUTLINE||r===wo.FILL_AND_OUTLINE,Vl.backgroundColor=F.BLACK,e4(e,Vl)}function nQ(e,t){let n=t.billboard;c(n)&&(n.show=!1,c(n._removeCallbackFunc)&&(n._removeCallbackFunc(),n._removeCallbackFunc=void 0),e._spareBillboards.push(n),t.billboard=void 0)}var wbe=new d4.default,Dbe=/\s/;function Qbe(e,t){let n=t._renderedText,i=wbe.splitGraphemes(n),o=i.length,r=t._glyphs,a=r.length;if(t._relativeSize=t._fontSize/Lr.FONT_SIZE,o<a)for(let p=o;p<a;++p)nQ(e,r[p]);r.length=o;let s=t.show&&t._showBackground&&n.split(`
`).join("").length>0,A=t._backgroundBillboard,l=e._backgroundBillboardCollection;s?(c(A)||(A=Tbe(l,e),t._backgroundBillboard=A),A.color=t._backgroundColor,A.show=t._show,A.position=t._position,A.eyeOffset=t._eyeOffset,A.pixelOffset=t._pixelOffset,A.horizontalOrigin=pi.LEFT,A.verticalOrigin=t._verticalOrigin,A.heightReference=t._heightReference,A.scale=t.totalScale,A.pickPrimitive=t,A.id=t._id,A.translucencyByDistance=t._translucencyByDistance,A.pixelOffsetScaleByDistance=t._pixelOffsetScaleByDistance,A.scaleByDistance=t._scaleByDistance,A.distanceDisplayCondition=t._distanceDisplayCondition,A.disableDepthTestDistance=t._disableDepthTestDistance,A.clusterShow=t.clusterShow):c(A)&&(l.remove(A),t._backgroundBillboard=A=void 0);let f=e._glyphBillboardCollection,h=f.billboardTextureCache,m=e._textDimensionsCache;for(let p=0;p<o;++p){let g=i[p],C=t._verticalOrigin,_=JSON.stringify([g,t._fontFamily,t._fontStyle,t._fontWeight,+C]),E=m[_],I=h.get(_);if(!c(I)||!c(E)){I=new up(f),h.set(_,I);let S=`${t._fontStyle} ${t._fontWeight} ${Lr.FONT_SIZE}px ${t._fontFamily}`,P=Sbe(g,S,F.WHITE,F.WHITE,0,wo.FILL);if(E=P.dimensions,m[_]=E,P.width>0&&P.height>0&&!Dbe.test(g)){let D=(0,u4.default)(P,{cutoff:Lr.CUTOFF,radius:Lr.RADIUS}),Q=P.getContext("2d"),v=P.width,d=P.height,B=Q.getImageData(0,0,v,d);for(let T=0;T<v;T++)for(let R=0;R<d;R++){let L=R*v+T,G=D[L]*255,q=L*4;B.data[q+0]=G,B.data[q+1]=G,B.data[q+2]=G,B.data[q+3]=G}Q.putImageData(B,0,0),I.loadImage(_,P)}}let y=r[p];if(c(y)||(y=new bbe,y.dimensions=E,y.billboardTexture=I,r[p]=y),y.billboardTexture.id!==_&&(y.billboardTexture=I,y.dimensions=E),!I.hasImage){nQ(e,y);continue}let b=y.billboard,x=e._spareBillboards;c(b)||(x.length>0?b=x.pop():(b=f.add({collection:e}),b._labelDimensions=new U,b._labelTranslate=new U),y.billboard=b),b.setImageTexture(I),b.show=t._show,b.position=t._position,b.eyeOffset=t._eyeOffset,b.pixelOffset=t._pixelOffset,b.horizontalOrigin=pi.LEFT,b.verticalOrigin=t._verticalOrigin,b.heightReference=t._heightReference,b.scale=t.totalScale,b.pickPrimitive=t,b.id=t._id,b.translucencyByDistance=t._translucencyByDistance,b.pixelOffsetScaleByDistance=t._pixelOffsetScaleByDistance,b.scaleByDistance=t._scaleByDistance,b.distanceDisplayCondition=t._distanceDisplayCondition,b.disableDepthTestDistance=t._disableDepthTestDistance,b._batchIndex=t._batchIndex,b.outlineColor=t.outlineColor,t.style===wo.FILL_AND_OUTLINE?(b.color=t._fillColor,b.outlineWidth=t.outlineWidth):t.style===wo.FILL?(b.color=t._fillColor,b.outlineWidth=0):t.style===wo.OUTLINE&&(b.color=F.TRANSPARENT,b.outlineWidth=t.outlineWidth)}t._repositionAllGlyphs=!0}function f4(e,t,n){return t===pi.CENTER?-e/2:t===pi.RIGHT?-(e+n.x):n.x}var Fi=new U,Rbe=new U;function vbe(e){let t=e._glyphs,n=e._renderedText,i=0,o=0,r=[],a=Number.NEGATIVE_INFINITY,s=0,A=1,l=t.length,f=e._backgroundBillboard,h=U.clone(c(f)?e._backgroundPadding:U.ZERO,Rbe);h.x/=e._relativeSize,h.y/=e._relativeSize;for(let Q=0;Q<l;++Q){if(n.charAt(Q)===`
`){r.push(i),++A,i=0;continue}let d=t[Q].dimensions;c(d)&&(s=Math.max(s,d.height-d.descent),a=Math.max(a,d.descent),i+=d.width-d.minx,Q<l-1&&(i+=t[Q+1].dimensions.minx),o=Math.max(o,i))}r.push(i);let m=s+a,p=e.totalScale,g=e._horizontalOrigin,C=e._verticalOrigin,_=0,E=r[_],I=f4(E,g,h),y=(c(e._lineHeight)?e._lineHeight:Bbe*e._fontSize)/e._relativeSize,b=y*(A-1),x=o,S=m+b;c(f)&&(x+=h.x*2,S+=h.y*2,f._labelHorizontalOrigin=g),Fi.x=I*p,Fi.y=0;let P=!0,D=0;for(let Q=0;Q<l;++Q){if(n.charAt(Q)===`
`){++_,D+=y,E=r[_],I=f4(E,g,h),Fi.x=I*p,P=!0;continue}let v=t[Q],d=v.dimensions;if(c(d)&&(C===yn.TOP?(Fi.y=d.height-s-h.y,Fi.y+=Lr.PADDING):C===yn.CENTER?Fi.y=(b+d.height-s)/2:C===yn.BASELINE?(Fi.y=b,Fi.y-=Lr.PADDING):(Fi.y=b+a+h.y,Fi.y-=Lr.PADDING),Fi.y=(Fi.y-d.descent-D)*p,P&&(Fi.x-=Lr.PADDING*p,P=!1),c(v.billboard)&&(v.billboard._setTranslate(Fi),v.billboard._labelDimensions.x=x,v.billboard._labelDimensions.y=S,v.billboard._labelHorizontalOrigin=g),Q<l-1)){let B=t[Q+1];Fi.x+=(d.width-d.minx+B.dimensions.minx)*p}}if(c(f)&&n.split(`
`).join("").length>0&&(g===pi.CENTER?I=-o/2-h.x:g===pi.RIGHT?I=-(o+h.x*2):I=0,Fi.x=I*p,C===yn.TOP?Fi.y=m-s-a:C===yn.CENTER?Fi.y=(m-s)/2-a:C===yn.BASELINE?Fi.y=-h.y-a:Fi.y=0,Fi.y=Fi.y*p,f.width=x,f.height=S,f._setTranslate(Fi),f._labelTranslate=U.clone(Fi,f._labelTranslate)),Ps(e.heightReference))for(let Q=0;Q<l;++Q){let d=t[Q].billboard;c(d)&&(d._labelTranslate=U.clone(Fi,d._labelTranslate))}}function h4(e,t){let n=t._glyphs;for(let i=0,o=n.length;i<o;++i)nQ(e,n[i]);c(t._backgroundBillboard)&&(e._backgroundBillboardCollection.remove(t._backgroundBillboard),t._backgroundBillboard=void 0),t._labelCollection=void 0,c(t._removeCallbackFunc)&&t._removeCallbackFunc(),pe(t)}function FA(e){e=e??k.EMPTY_OBJECT,this._scene=e.scene,this._batchTable=e.batchTable;let t=new vu({scene:this._scene,textureAtlas:new iy({initialSize:tQ})});this._backgroundBillboardCollection=t,this._backgroundBillboardTexture=new up(t),this._glyphBillboardCollection=new vu({scene:this._scene,batchTable:this._batchTable}),this._glyphBillboardCollection._sdf=!0,this._spareBillboards=[],this._textDimensionsCache={},this._labels=[],this._labelsToUpdate=[],this._totalGlyphCount=0,this._highlightColor=F.clone(F.WHITE),this.show=e.show??!0,this.modelMatrix=O.clone(e.modelMatrix??O.IDENTITY),this.debugShowBoundingVolume=e.debugShowBoundingVolume??!1,this.blendOption=e.blendOption??Mi.OPAQUE_AND_TRANSLUCENT}Object.defineProperties(FA.prototype,{length:{get:function(){return this._labels.length}},sizeInBytes:{get:function(){return this._glyphBillboardCollection.sizeInBytes+this._backgroundBillboardCollection.sizeInBytes}},ready:{get:function(){let e=this._backgroundBillboardCollection.get(0);return c(e)&&!e.ready?!1:this._glyphBillboardCollection.ready}}});FA.prototype.add=function(e){let t=new L_(e,this);return this._labels.push(t),this._labelsToUpdate.push(t),t};FA.prototype.remove=function(e){if(c(e)&&e._labelCollection===this){let t=this._labels.indexOf(e);if(t!==-1)return this._labels.splice(t,1),h4(this,e),!0}return!1};FA.prototype.removeAll=function(){let e=this._labels;for(let t=0,n=e.length;t<n;++t)h4(this,e[t]);e.length=0};FA.prototype.contains=function(e){return c(e)&&e._labelCollection===this};FA.prototype.get=function(e){return this._labels[e]};FA.prototype.update=function(e){if(!this.show)return;let t=this._glyphBillboardCollection,n=this._backgroundBillboardCollection;t.modelMatrix=this.modelMatrix,t.debugShowBoundingVolume=this.debugShowBoundingVolume,n.modelMatrix=this.modelMatrix,n.debugShowBoundingVolume=this.debugShowBoundingVolume;let i=this._labelsToUpdate.length;for(let r=0;r<i;++r){let a=this._labelsToUpdate[r];if(a.isDestroyed())continue;let s=a._glyphs.length;a._rebindAllGlyphs&&(Qbe(this,a),a._rebindAllGlyphs=!1),a._repositionAllGlyphs&&(vbe(a),a._repositionAllGlyphs=!1);let A=a._glyphs.length-s;this._totalGlyphCount+=A}let o=n.length>0?Mi.TRANSLUCENT:this.blendOption;t.blendOption=o,n.blendOption=o,t._highlightColor=this._highlightColor,n._highlightColor=this._highlightColor,this._labelsToUpdate.length=0,n.update(e),t.update(e)};FA.prototype.isDestroyed=function(){return!1};FA.prototype.destroy=function(){return this.removeAll(),this._glyphBillboardCollection=this._glyphBillboardCollection.destroy(),this._backgroundBillboardCollection=this._backgroundBillboardCollection.destroy(),pe(this)};var Ah=FA;var m4=`in vec3 position3DHigh;
in vec3 position3DLow;
in vec3 position2DHigh;
in vec3 position2DLow;
in vec3 prevPosition3DHigh;
in vec3 prevPosition3DLow;
in vec3 prevPosition2DHigh;
in vec3 prevPosition2DLow;
in vec3 nextPosition3DHigh;
in vec3 nextPosition3DLow;
in vec3 nextPosition2DHigh;
in vec3 nextPosition2DLow;
in vec4 texCoordExpandAndBatchIndex;

out vec2  v_st;
out float v_width;
out vec4 v_pickColor;
out float v_polylineAngle;

void main()
{
    float texCoord = texCoordExpandAndBatchIndex.x;
    float expandDir = texCoordExpandAndBatchIndex.y;
    bool usePrev = texCoordExpandAndBatchIndex.z < 0.0;
    float batchTableIndex = texCoordExpandAndBatchIndex.w;

    vec2 widthAndShow = batchTable_getWidthAndShow(batchTableIndex);
    float width = widthAndShow.x + 0.5;
    float show = widthAndShow.y;

    if (width < 1.0)
    {
        show = 0.0;
    }

    vec4 pickColor = batchTable_getPickColor(batchTableIndex);

    vec4 p, prev, next;
    if (czm_morphTime == 1.0)
    {
        p = czm_translateRelativeToEye(position3DHigh.xyz, position3DLow.xyz);
        prev = czm_translateRelativeToEye(prevPosition3DHigh.xyz, prevPosition3DLow.xyz);
        next = czm_translateRelativeToEye(nextPosition3DHigh.xyz, nextPosition3DLow.xyz);
    }
    else if (czm_morphTime == 0.0)
    {
        p = czm_translateRelativeToEye(position2DHigh.zxy, position2DLow.zxy);
        prev = czm_translateRelativeToEye(prevPosition2DHigh.zxy, prevPosition2DLow.zxy);
        next = czm_translateRelativeToEye(nextPosition2DHigh.zxy, nextPosition2DLow.zxy);
    }
    else
    {
        p = czm_columbusViewMorph(
                czm_translateRelativeToEye(position2DHigh.zxy, position2DLow.zxy),
                czm_translateRelativeToEye(position3DHigh.xyz, position3DLow.xyz),
                czm_morphTime);
        prev = czm_columbusViewMorph(
                czm_translateRelativeToEye(prevPosition2DHigh.zxy, prevPosition2DLow.zxy),
                czm_translateRelativeToEye(prevPosition3DHigh.xyz, prevPosition3DLow.xyz),
                czm_morphTime);
        next = czm_columbusViewMorph(
                czm_translateRelativeToEye(nextPosition2DHigh.zxy, nextPosition2DLow.zxy),
                czm_translateRelativeToEye(nextPosition3DHigh.xyz, nextPosition3DLow.xyz),
                czm_morphTime);
    }

    #ifdef DISTANCE_DISPLAY_CONDITION
        vec3 centerHigh = batchTable_getCenterHigh(batchTableIndex);
        vec4 centerLowAndRadius = batchTable_getCenterLowAndRadius(batchTableIndex);
        vec3 centerLow = centerLowAndRadius.xyz;
        float radius = centerLowAndRadius.w;
        vec2 distanceDisplayCondition = batchTable_getDistanceDisplayCondition(batchTableIndex);

        float lengthSq;
        if (czm_sceneMode == czm_sceneMode2D)
        {
            lengthSq = czm_eyeHeight2D.y;
        }
        else
        {
            vec4 center = czm_translateRelativeToEye(centerHigh.xyz, centerLow.xyz);
            lengthSq = max(0.0, dot(center.xyz, center.xyz) - radius * radius);
        }

        float nearSq = distanceDisplayCondition.x * distanceDisplayCondition.x;
        float farSq = distanceDisplayCondition.y * distanceDisplayCondition.y;
        if (lengthSq < nearSq || lengthSq > farSq)
        {
            show = 0.0;
        }
    #endif

    float polylineAngle;
    vec4 positionWC = getPolylineWindowCoordinates(p, prev, next, expandDir, width, usePrev, polylineAngle);
    gl_Position = czm_viewportOrthographic * positionWC * show;

    v_st.s = texCoord;
    v_st.t = czm_writeNonPerspective(clamp(expandDir, 0.0, 1.0), gl_Position.w);

    v_width = width;
    v_pickColor = pickColor;
    v_polylineAngle = polylineAngle;
}
`;var la={};la.numberOfPoints=function(e,t,n){let i=u.distance(e,t);return Math.ceil(i/n)};la.numberOfPointsRhumbLine=function(e,t,n){let i=Math.pow(e.longitude-t.longitude,2)+Math.pow(e.latitude-t.latitude,2);return Math.max(1,Math.ceil(Math.sqrt(i/(n*n))))};var Pbe=new ae;la.extractHeights=function(e,t){let n=e.length,i=new Array(n);for(let o=0;o<n;o++){let r=e[o];i[o]=t.cartesianToCartographic(r,Pbe).height}return i};var Mbe=new O,Obe=new u,p4=new u,Lbe=new Ft(u.UNIT_X,0),g4=new u,Nbe=new Ft(u.UNIT_X,0),Fbe=new u,kbe=new u,oQ=[];function _4(e,t,n){let i=oQ;i.length=e;let o;if(t===n){for(o=0;o<e;o++)i[o]=t;return i}let a=(n-t)/e;for(o=0;o<e;o++){let s=t+o*a;i[o]=s}return i}var S0=new ae,T0=new ae,Pu=new u,rQ=new u,Ube=new u,iQ=new Cy,N_=new Ta;function Gbe(e,t,n,i,o,r,a,s){let A=i.scaleToGeodeticSurface(e,rQ),l=i.scaleToGeodeticSurface(t,Ube),f=la.numberOfPoints(e,t,n),h=i.cartesianToCartographic(A,S0),m=i.cartesianToCartographic(l,T0),p=_4(f,o,r);iQ.setEndPoints(h,m);let g=iQ.surfaceDistance/f,C=s;h.height=o;let _=i.cartographicToCartesian(h,Pu);u.pack(_,a,C),C+=3;for(let E=1;E<f;E++){let I=iQ.interpolateUsingSurfaceDistance(E*g,T0);I.height=p[E],_=i.cartographicToCartesian(I,Pu),u.pack(_,a,C),C+=3}return C}function zbe(e,t,n,i,o,r,a,s){let A=i.cartesianToCartographic(e,S0),l=i.cartesianToCartographic(t,T0),f=la.numberOfPointsRhumbLine(A,l,n);A.height=0,l.height=0;let h=_4(f,o,r);N_.ellipsoid.equals(i)||(N_=new Ta(void 0,void 0,i)),N_.setEndPoints(A,l);let m=N_.surfaceDistance/f,p=s;A.height=o;let g=i.cartographicToCartesian(A,Pu);u.pack(g,a,p),p+=3;for(let C=1;C<f;C++){let _=N_.interpolateUsingSurfaceDistance(C*m,T0);_.height=h[C],g=i.cartographicToCartesian(_,Pu),u.pack(g,a,p),p+=3}return p}la.wrapLongitude=function(e,t){let n=[],i=[];if(c(e)&&e.length>0){t=t??O.IDENTITY;let o=O.inverseTransformation(t,Mbe),r=O.multiplyByPoint(o,u.ZERO,Obe),a=u.normalize(O.multiplyByPointAsVector(o,u.UNIT_Y,p4),p4),s=Ft.fromPointNormal(r,a,Lbe),A=u.normalize(O.multiplyByPointAsVector(o,u.UNIT_X,g4),g4),l=Ft.fromPointNormal(r,A,Nbe),f=1;n.push(u.clone(e[0]));let h=n[0],m=e.length;for(let p=1;p<m;++p){let g=e[p];if(Ft.getPointDistance(l,h)<0||Ft.getPointDistance(l,g)<0){let C=Ni.lineSegmentPlane(h,g,s,Fbe);if(c(C)){let _=u.multiplyByScalar(a,5e-9,kbe);Ft.getPointDistance(s,h)<0&&u.negate(_,_),n.push(u.add(C,_,new u)),i.push(f+1),u.negate(_,_),n.push(u.add(C,_,new u)),f=1}}n.push(u.clone(e[p])),f++,h=g}i.push(f)}return{positions:n,lengths:i}};la.generateArc=function(e){c(e)||(e={});let t=e.positions,n=t.length,i=e.ellipsoid??Z.default,o=e.height??0,r=Array.isArray(o);if(n<1)return[];if(n===1){let C=i.scaleToGeodeticSurface(t[0],rQ);if(o=r?o[0]:o,o!==0){let _=i.geodeticSurfaceNormal(C,Pu);u.multiplyByScalar(_,o,_),u.add(C,_,C)}return[C.x,C.y,C.z]}let a=e.minDistance;if(!c(a)){let C=e.granularity??w.RADIANS_PER_DEGREE;a=w.chordLength(C,i.maximumRadius)}let s=0,A;for(A=0;A<n-1;A++)s+=la.numberOfPoints(t[A],t[A+1],a);let l=(s+1)*3,f=new Array(l),h=0;for(A=0;A<n-1;A++){let C=t[A],_=t[A+1],E=r?o[A]:o,I=r?o[A+1]:o;h=Gbe(C,_,a,i,E,I,f,h)}oQ.length=0;let m=t[n-1],p=i.cartesianToCartographic(m,S0);p.height=r?o[n-1]:o;let g=i.cartographicToCartesian(p,Pu);return u.pack(g,f,l-3),f};var C4=new ae,Hbe=new ae;la.generateRhumbArc=function(e){c(e)||(e={});let t=e.positions,n=t.length,i=e.ellipsoid??Z.default,o=e.height??0,r=Array.isArray(o);if(n<1)return[];if(n===1){let E=i.scaleToGeodeticSurface(t[0],rQ);if(o=r?o[0]:o,o!==0){let I=i.geodeticSurfaceNormal(E,Pu);u.multiplyByScalar(I,o,I),u.add(E,I,E)}return[E.x,E.y,E.z]}let a=e.granularity??w.RADIANS_PER_DEGREE,s=0,A,l=i.cartesianToCartographic(t[0],C4),f;for(A=0;A<n-1;A++)f=i.cartesianToCartographic(t[A+1],Hbe),s+=la.numberOfPointsRhumbLine(l,f,a),l=ae.clone(f,C4);let h=(s+1)*3,m=new Array(h),p=0;for(A=0;A<n-1;A++){let E=t[A],I=t[A+1],y=r?o[A]:o,b=r?o[A+1]:o;p=zbe(E,I,a,i,y,b,m,p)}oQ.length=0;let g=t[n-1],C=i.cartesianToCartographic(g,S0);C.height=r?o[n-1]:o;let _=i.cartographicToCartesian(C,Pu);return u.pack(_,m,h-3),m};la.generateCartesianArc=function(e){let t=la.generateArc(e),n=t.length/3,i=new Array(n);for(let o=0;o<n;o++)i[o]=u.unpack(t,o*3);return i};la.generateCartesianRhumbArc=function(e){let t=la.generateRhumbArc(e),n=t.length/3,i=new Array(n);for(let o=0;o<n;o++)i[o]=u.unpack(t,o*3);return i};var Ti=la;function cs(e,t){e=e??k.EMPTY_OBJECT,this._show=e.show??!0,this._width=e.width??1,this._loop=e.loop??!1,this._distanceDisplayCondition=e.distanceDisplayCondition,this._material=e.material,c(this._material)||(this._material=Sr.fromType(Sr.ColorType,{color:new F(1,1,1,1)}));let n=e.positions;c(n)||(n=[]),this._positions=n,this._actualPositions=Bi(n,u.equalsEpsilon),this._loop&&this._actualPositions.length>2&&(this._actualPositions===this._positions&&(this._actualPositions=n.slice()),this._actualPositions.push(u.clone(this._actualPositions[0]))),this._length=this._actualPositions.length,this._id=e.id;let i;c(t)&&(i=O.clone(t.modelMatrix)),this._modelMatrix=i,this._segments=Ti.wrapLongitude(this._actualPositions,i),this._actualLength=void 0,this._propertiesChanged=new Uint32Array(I4),this._polylineCollection=t,this._dirty=!1,this._pickId=void 0,this._boundingVolume=ee.fromPoints(this._actualPositions),this._boundingVolumeWC=ee.transform(this._boundingVolume,this._modelMatrix),this._boundingVolume2D=new ee}var E4=cs.POSITION_INDEX=0,Vbe=cs.SHOW_INDEX=1,jbe=cs.WIDTH_INDEX=2,Ybe=cs.MATERIAL_INDEX=3,F_=cs.POSITION_SIZE_INDEX=4,qbe=cs.DISTANCE_DISPLAY_CONDITION=5,I4=cs.NUMBER_OF_PROPERTIES=6;function jl(e,t){++e._propertiesChanged[t];let n=e._polylineCollection;c(n)&&(n._updatePolyline(e,t),e._dirty=!0)}Object.defineProperties(cs.prototype,{show:{get:function(){return this._show},set:function(e){e!==this._show&&(this._show=e,jl(this,Vbe))}},positions:{get:function(){return this._positions},set:function(e){let t=Bi(e,u.equalsEpsilon);this._loop&&t.length>2&&(t===e&&(t=e.slice()),t.push(u.clone(t[0]))),(this._actualPositions.length!==t.length||this._actualPositions.length!==this._length)&&jl(this,F_),this._positions=e,this._actualPositions=t,this._length=t.length,this._boundingVolume=ee.fromPoints(this._actualPositions,this._boundingVolume),this._boundingVolumeWC=ee.transform(this._boundingVolume,this._modelMatrix,this._boundingVolumeWC),jl(this,E4),this.update()}},material:{get:function(){return this._material},set:function(e){this._material!==e&&(this._material=e,jl(this,Ybe))}},width:{get:function(){return this._width},set:function(e){let t=this._width;e!==t&&(this._width=e,jl(this,jbe))}},loop:{get:function(){return this._loop},set:function(e){if(e!==this._loop){let t=this._actualPositions;e?t.length>2&&!u.equals(t[0],t[t.length-1])&&(t.length===this._positions.length&&(this._actualPositions=t=this._positions.slice()),t.push(u.clone(t[0]))):t.length>2&&u.equals(t[0],t[t.length-1])&&(t.length-1===this._positions.length?this._actualPositions=this._positions:t.pop()),this._loop=e,jl(this,F_)}}},id:{get:function(){return this._id},set:function(e){this._id=e,c(this._pickId)&&(this._pickId.object.id=e)}},pickId:{get:function(){return this._pickId}},isDestroyed:{get:function(){return!c(this._polylineCollection)}},distanceDisplayCondition:{get:function(){return this._distanceDisplayCondition},set:function(e){rt.equals(e,this._distanceDisplayCondition)||(this._distanceDisplayCondition=rt.clone(e,this._distanceDisplayCondition),jl(this,qbe))}}});cs.prototype.update=function(){let e=O.IDENTITY;c(this._polylineCollection)&&(e=this._polylineCollection.modelMatrix);let t=this._segments.positions.length,n=this._segments.lengths,i=this._propertiesChanged[E4]>0||this._propertiesChanged[F_]>0;if((!O.equals(e,this._modelMatrix)||i)&&(this._segments=Ti.wrapLongitude(this._actualPositions,e),this._boundingVolumeWC=ee.transform(this._boundingVolume,e,this._boundingVolumeWC)),this._modelMatrix=O.clone(e,this._modelMatrix),this._segments.positions.length!==t)jl(this,F_);else{let o=n.length;for(let r=0;r<o;++r)if(n[r]!==this._segments.lengths[r]){jl(this,F_);break}}};cs.prototype.getPickId=function(e){return c(this._pickId)||(this._pickId=e.createPickId({primitive:this,collection:this._polylineCollection,id:this._id})),this._pickId};cs.prototype._clean=function(){this._dirty=!1;let e=this._propertiesChanged;for(let t=0;t<I4-1;++t)e[t]=0};cs.prototype._destroy=function(){this._pickId=this._pickId&&this._pickId.destroy(),this._material=this._material&&this._material.destroy(),this._polylineCollection=void 0};var Yl=cs;var Wbe=Yl.SHOW_INDEX,Jbe=Yl.WIDTH_INDEX,sQ=Yl.POSITION_INDEX,Kbe=Yl.MATERIAL_INDEX,y4=Yl.POSITION_SIZE_INDEX,Xbe=Yl.DISTANCE_DISPLAY_CONDITION,D4=Yl.NUMBER_OF_PROPERTIES,Pa={texCoordExpandAndBatchIndex:0,position3DHigh:1,position3DLow:2,position2DHigh:3,position2DLow:4,prevPosition3DHigh:5,prevPosition3DLow:6,prevPosition2DHigh:7,prevPosition2DLow:8,nextPosition3DHigh:9,nextPosition3DLow:10,nextPosition2DHigh:11,nextPosition2DLow:12};function Lc(e){e=e??k.EMPTY_OBJECT,this.show=e.show??!0,this.modelMatrix=O.clone(e.modelMatrix??O.IDENTITY),this._modelMatrix=O.clone(O.IDENTITY),this.debugShowBoundingVolume=e.debugShowBoundingVolume??!1,this._opaqueRS=void 0,this._translucentRS=void 0,this._colorCommands=[],this._polylinesUpdated=!1,this._polylinesRemoved=!1,this._createVertexArray=!1,this._propertiesChanged=new Uint32Array(D4),this._polylines=[],this._polylineBuckets={},this._positionBufferUsage={bufferUsage:Me.STATIC_DRAW,frameCount:0},this._mode=void 0,this._polylinesToUpdate=[],this._vertexArrays=[],this._positionBuffer=void 0,this._texCoordExpandAndBatchIndexBuffer=void 0,this._batchTable=void 0,this._createBatchTable=!1,this._useHighlightColor=!1,this._highlightColor=F.clone(F.WHITE);let t=this;this._uniformMap={u_highlightColor:function(){return t._highlightColor}}}Object.defineProperties(Lc.prototype,{length:{get:function(){return cQ(this),this._polylines.length}}});Lc.prototype.add=function(e){let t=new Yl(e,this);return t._index=this._polylines.length,this._polylines.push(t),this._createVertexArray=!0,this._createBatchTable=!0,t};Lc.prototype.remove=function(e){if(this.contains(e)){if(this._polylinesRemoved=!0,this._createVertexArray=!0,this._createBatchTable=!0,c(e._bucket)){let t=e._bucket;t.shaderProgram=t.shaderProgram&&t.shaderProgram.destroy()}return e._destroy(),!0}return!1};Lc.prototype.removeAll=function(){AQ(this),M4(this),this._polylineBuckets={},this._polylinesRemoved=!1,this._polylines.length=0,this._polylinesToUpdate.length=0,this._createVertexArray=!0};Lc.prototype.contains=function(e){return c(e)&&e._polylineCollection===this};Lc.prototype.get=function(e){return cQ(this),this._polylines[e]};function Zbe(e,t){c(e._batchTable)&&e._batchTable.destroy();let n=[{functionName:"batchTable_getWidthAndShow",componentDatatype:N.UNSIGNED_BYTE,componentsPerAttribute:2},{functionName:"batchTable_getPickColor",componentDatatype:N.UNSIGNED_BYTE,componentsPerAttribute:4,normalize:!0},{functionName:"batchTable_getCenterHigh",componentDatatype:N.FLOAT,componentsPerAttribute:3},{functionName:"batchTable_getCenterLowAndRadius",componentDatatype:N.FLOAT,componentsPerAttribute:4},{functionName:"batchTable_getDistanceDisplayCondition",componentDatatype:N.FLOAT,componentsPerAttribute:2}];e._batchTable=new uy(t,n,e._polylines.length)}var Q4=new xn,R4=new se,v4=new U;Lc.prototype.update=function(e){if(cQ(this),this._polylines.length===0||!this.show)return;o0e(this,e);let t=e.context,n=e.mapProjection,i,o=this._propertiesChanged;if(this._createBatchTable){if(pn.maximumVertexTextureImageUnits===0)throw new oe("Vertex texture fetch support is required to render polylines. The maximum number of vertex texture image units must be greater than zero.");Zbe(this,t),this._createBatchTable=!1}if(this._createVertexArray||e0e(this))x4(this,t,n);else if(this._polylinesUpdated){let A=this._polylinesToUpdate;if(this._mode!==Te.SCENE3D){let l=A.length;for(let f=0;f<l;++f)i=A[f],i.update()}if(o[y4]||o[Kbe])x4(this,t,n);else{let l=A.length,f=this._polylineBuckets;for(let h=0;h<l;++h){i=A[h],o=i._propertiesChanged;let m=i._bucket,p=0;for(let g in f)if(f.hasOwnProperty(g)){if(f[g]===m){o[sQ]&&m.writeUpdate(p,i,this._positionBuffer,n);break}p+=f[g].lengthOfPositions}if((o[Wbe]||o[Jbe])&&this._batchTable.setBatchedAttribute(i._index,0,new U(i._width,i._show)),this._batchTable.attributes.length>2){if(o[sQ]||o[y4]){let g=e.mode===Te.SCENE2D?i._boundingVolume2D:i._boundingVolumeWC,C=xn.fromCartesian(g.center,Q4),_=se.fromElements(C.low.x,C.low.y,C.low.z,g.radius,R4);this._batchTable.setBatchedAttribute(i._index,2,C.high),this._batchTable.setBatchedAttribute(i._index,3,_)}if(o[Xbe]){let g=v4;g.x=0,g.y=Number.MAX_VALUE;let C=i.distanceDisplayCondition;c(C)&&(g.x=C.near,g.y=C.far),this._batchTable.setBatchedAttribute(i._index,4,g)}}i._clean()}}A.length=0,this._polylinesUpdated=!1}o=this._propertiesChanged;for(let A=0;A<D4;++A)o[A]=0;let r=O.IDENTITY;e.mode===Te.SCENE3D&&(r=this.modelMatrix);let a=e.passes,s=e.morphTime!==0;if((!c(this._opaqueRS)||this._opaqueRS.depthTest.enabled!==s)&&(this._opaqueRS=ut.fromCache({depthMask:s,depthTest:{enabled:s}})),(!c(this._translucentRS)||this._translucentRS.depthTest.enabled!==s)&&(this._translucentRS=ut.fromCache({blending:qn.ALPHA_BLEND,depthMask:!s,depthTest:{enabled:s}})),this._batchTable.update(e),a.render||a.pick){let A=this._colorCommands;$be(this,e,A,r)}};var k_=new ee,b4=new ee;function $be(e,t,n,i){let o=t.context,r=t.commandList,a=n.length,s=0,A=!0,l=e._vertexArrays,f=e.debugShowBoundingVolume,m=e._batchTable.getUniformMapCallback(),p=l.length;for(let g=0;g<p;++g){let C=l[g],_=C.buckets,E=_.length;for(let I=0;I<E;++I){let y=_[I],b=y.offset,x=y.bucket.shaderProgram,S=y.bucket.polylines,P=S.length,D,Q,v=0,d,B;for(let T=0;T<P;++T){let R=S[T],L=n0e(R._material);if(L!==D){if(c(D)&&v>0){let K=Q.isTranslucent();s>=a?(d=new mt({owner:e}),n.push(d)):d=n[s],++s,B=Et(m(Q._uniforms),e._uniformMap),d.boundingVolume=ee.clone(k_,d.boundingVolume),d.modelMatrix=i,d.shaderProgram=x,d.vertexArray=C.va,d.renderState=K?e._translucentRS:e._opaqueRS,d.pass=K?Ye.TRANSLUCENT:Ye.OPAQUE,d.debugShowBoundingVolume=f,d.pickId="v_pickColor",d.uniformMap=B,d.count=v,d.offset=b,b+=v,v=0,A=!0,r.push(d)}Q=R._material,Q.update(o),D=L}let G=R._locatorBuckets,q=G.length;for(let K=0;K<q;++K){let ie=G[K];ie.locator===y&&(v+=ie.count)}let z;t.mode===Te.SCENE3D?z=R._boundingVolumeWC:t.mode===Te.COLUMBUS_VIEW?z=R._boundingVolume2D:t.mode===Te.SCENE2D?c(R._boundingVolume2D)&&(z=ee.clone(R._boundingVolume2D,b4),z.center.x=0):c(R._boundingVolumeWC)&&c(R._boundingVolume2D)&&(z=ee.union(R._boundingVolumeWC,R._boundingVolume2D,b4)),A?(A=!1,ee.clone(z,k_)):ee.union(z,k_,k_)}c(D)&&v>0&&(s>=a?(d=new mt({owner:e}),n.push(d)):d=n[s],++s,B=Et(m(Q._uniforms),e._uniformMap),d.boundingVolume=ee.clone(k_,d.boundingVolume),d.modelMatrix=i,d.shaderProgram=x,d.vertexArray=C.va,d.renderState=Q.isTranslucent()?e._translucentRS:e._opaqueRS,d.pass=Q.isTranslucent()?Ye.TRANSLUCENT:Ye.OPAQUE,d.debugShowBoundingVolume=f,d.pickId="v_pickColor",d.uniformMap=B,d.count=v,d.offset=b,A=!0,r.push(d)),D=void 0}}n.length=s}Lc.prototype.isDestroyed=function(){return!1};Lc.prototype.destroy=function(){return P4(this),AQ(this),M4(this),this._batchTable=this._batchTable&&this._batchTable.destroy(),pe(this)};function e0e(e){let t=!1,n=e._propertiesChanged,i=e._positionBufferUsage;return n[sQ]?(i.bufferUsage!==Me.STREAM_DRAW&&(t=!0,i.bufferUsage=Me.STREAM_DRAW),i.frameCount=100):i.bufferUsage!==Me.STATIC_DRAW&&(i.frameCount===0?(t=!0,i.bufferUsage=Me.STATIC_DRAW):i.frameCount--),t}var B4=[0,0,0];function x4(e,t,n){e._createVertexArray=!1,AQ(e),P4(e),i0e(e);let i=[[]],o=i[0],r=e._batchTable,a=e._useHighlightColor,s=[0],A=0,l=[[]],f=0,h=e._polylineBuckets,m,p;for(m in h)h.hasOwnProperty(m)&&(p=h[m],p.updateShader(t,r,a),f+=p.lengthOfPositions);if(f>0){let g=e._mode,C=new Float32Array(6*f*3),_=new Float32Array(f*4),E,I=0,y=0,b=0;for(m in h)if(h.hasOwnProperty(m)){p=h[m],p.write(C,_,I,y,b,r,t,n),g===Te.MORPHING&&(c(E)||(E=new Float32Array(6*f*3)),p.writeForMorph(E,I));let B=p.lengthOfPositions;I+=6*B*3,y+=B*4,b+=B*4,A=p.updateIndices(i,s,l,A)}let x=e._positionBufferUsage.bufferUsage,S=Me.STATIC_DRAW;e._positionBuffer=dt.createVertexBuffer({context:t,typedArray:C,usage:x});let P;c(E)&&(P=dt.createVertexBuffer({context:t,typedArray:E,usage:x})),e._texCoordExpandAndBatchIndexBuffer=dt.createVertexBuffer({context:t,typedArray:_,usage:S});let D=3*Float32Array.BYTES_PER_ELEMENT,Q=4*Float32Array.BYTES_PER_ELEMENT,v=0,d=i.length;for(let B=0;B<d;++B)if(o=i[B],o.length>0){let T=new Uint16Array(o),R=dt.createIndexBuffer({context:t,typedArray:T,usage:Me.STATIC_DRAW,indexDatatype:Be.UNSIGNED_SHORT});v+=s[B];let L=6*(B*(D*w.SIXTY_FOUR_KILOBYTES)-v*D),G=D+L,q=D+G,z=D+q,K=D+z,ie=D+K,le=B*(Q*w.SIXTY_FOUR_KILOBYTES)-v*Q,de=[{index:Pa.position3DHigh,componentsPerAttribute:3,componentDatatype:N.FLOAT,offsetInBytes:L,strideInBytes:6*D},{index:Pa.position3DLow,componentsPerAttribute:3,componentDatatype:N.FLOAT,offsetInBytes:G,strideInBytes:6*D},{index:Pa.position2DHigh,componentsPerAttribute:3,componentDatatype:N.FLOAT,offsetInBytes:L,strideInBytes:6*D},{index:Pa.position2DLow,componentsPerAttribute:3,componentDatatype:N.FLOAT,offsetInBytes:G,strideInBytes:6*D},{index:Pa.prevPosition3DHigh,componentsPerAttribute:3,componentDatatype:N.FLOAT,offsetInBytes:q,strideInBytes:6*D},{index:Pa.prevPosition3DLow,componentsPerAttribute:3,componentDatatype:N.FLOAT,offsetInBytes:z,strideInBytes:6*D},{index:Pa.prevPosition2DHigh,componentsPerAttribute:3,componentDatatype:N.FLOAT,offsetInBytes:q,strideInBytes:6*D},{index:Pa.prevPosition2DLow,componentsPerAttribute:3,componentDatatype:N.FLOAT,offsetInBytes:z,strideInBytes:6*D},{index:Pa.nextPosition3DHigh,componentsPerAttribute:3,componentDatatype:N.FLOAT,offsetInBytes:K,strideInBytes:6*D},{index:Pa.nextPosition3DLow,componentsPerAttribute:3,componentDatatype:N.FLOAT,offsetInBytes:ie,strideInBytes:6*D},{index:Pa.nextPosition2DHigh,componentsPerAttribute:3,componentDatatype:N.FLOAT,offsetInBytes:K,strideInBytes:6*D},{index:Pa.nextPosition2DLow,componentsPerAttribute:3,componentDatatype:N.FLOAT,offsetInBytes:ie,strideInBytes:6*D},{index:Pa.texCoordExpandAndBatchIndex,componentsPerAttribute:4,componentDatatype:N.FLOAT,vertexBuffer:e._texCoordExpandAndBatchIndexBuffer,offsetInBytes:le}],he,Se,be,_e;g===Te.SCENE3D?(Se=e._positionBuffer,he="vertexBuffer",be=B4,_e="value"):g===Te.SCENE2D||g===Te.COLUMBUS_VIEW?(Se=B4,he="value",be=e._positionBuffer,_e="vertexBuffer"):(Se=P,he="vertexBuffer",be=e._positionBuffer,_e="vertexBuffer"),de[0][he]=Se,de[1][he]=Se,de[2][_e]=be,de[3][_e]=be,de[4][he]=Se,de[5][he]=Se,de[6][_e]=be,de[7][_e]=be,de[8][he]=Se,de[9][he]=Se,de[10][_e]=be,de[11][_e]=be;let Ct=new go({context:t,attributes:de,indexBuffer:R});e._vertexArrays.push({va:Ct,buckets:l[B]})}}}function t0e(e,t){return t instanceof gn?t.id:t}var w0=[];function n0e(e){let t=Sr._uniformList[e.type],n=t.length;w0.length=2*n;let i=0;for(let o=0;o<n;++o){let r=t[o];w0[i]=r,w0[i+1]=e._uniforms[r](),i+=2}return`${e.type}:${JSON.stringify(w0,t0e)}`}function i0e(e){let t=e._mode,n=e._modelMatrix,i=e._polylineBuckets={},o=e._polylines,r=o.length;for(let a=0;a<r;++a){let s=o[a];if(s._actualPositions.length>1){s.update();let A=s.material,l=i[A.type];c(l)||(l=i[A.type]=new kA(A,t,n)),l.addPolyline(s)}}}function o0e(e,t){let n=t.mode;(e._mode!==n||!O.equals(e._modelMatrix,e.modelMatrix))&&(e._mode=n,e._modelMatrix=O.clone(e.modelMatrix),e._createVertexArray=!0)}function cQ(e){if(e._polylinesRemoved){e._polylinesRemoved=!1;let t=[],n=[],i=0,o,r=e._polylines.length;for(let a=0;a<r;++a)o=e._polylines[a],o.isDestroyed||(o._index=i++,n.push(o),t.push(o));e._polylines=t,e._polylinesToUpdate=n}}function AQ(e){let t=e._polylines,n=t.length;for(let i=0;i<n;++i)if(!t[i].isDestroyed){let o=t[i]._bucket;c(o)&&(o.shaderProgram=o.shaderProgram&&o.shaderProgram.destroy())}}function P4(e){let t=e._vertexArrays.length;for(let n=0;n<t;++n)e._vertexArrays[n].va.destroy();e._vertexArrays.length=0}Lc.prototype._updatePolyline=function(e,t){this._polylinesUpdated=!0,e._dirty||this._polylinesToUpdate.push(e),++this._propertiesChanged[t]};function M4(e){let t=e._polylines,n=t.length;for(let i=0;i<n;++i)t[i].isDestroyed||t[i]._destroy()}function aQ(e,t,n){this.count=e,this.offset=t,this.bucket=n}function kA(e,t,n){this.polylines=[],this.lengthOfPositions=0,this.material=e,this.shaderProgram=void 0,this.mode=t,this.modelMatrix=n}kA.prototype.addPolyline=function(e){this.polylines.push(e),e._actualLength=this.getPolylinePositionsLength(e),this.lengthOfPositions+=e._actualLength,e._bucket=this};kA.prototype.updateShader=function(e,t,n){if(c(this.shaderProgram))return;let i=["DISTANCE_DISPLAY_CONDITION"];n&&i.push("VECTOR_TILE"),this.material.shaderSource.search(/in\s+float\s+v_polylineAngle;/g)!==-1&&i.push("POLYLINE_DASH"),$t.isInternetExplorer()||i.push("CLIP_POLYLINE");let o=new It({defines:i,sources:[`in vec4 v_pickColor;
`,this.material.shaderSource,By]}),r=t.getVertexShaderCallback()(m4),a=new It({defines:i,sources:[yA,r]});this.shaderProgram=Bn.fromCache({context:e,vertexShaderSource:a,fragmentShaderSource:o,attributeLocations:Pa})};function O4(e){return u.dot(u.UNIT_X,e._boundingVolume.center)<0||e._boundingVolume.intersectPlane(Ft.ORIGIN_ZX_PLANE)===vt.INTERSECTING}kA.prototype.getPolylinePositionsLength=function(e){let t;if(this.mode===Te.SCENE3D||!O4(e))return t=e._actualPositions.length,t*4-4;let n=0,i=e._segments.lengths;t=i.length;for(let o=0;o<t;++o)n+=i[o]*4-4;return n};var Do=new u,tc=new u,nc=new u,D0=new u,r0e=new se,a0e=new U;kA.prototype.write=function(e,t,n,i,o,r,a,s){let A=this.mode,l=s.ellipsoid.maximumRadius*w.PI,f=this.polylines,h=f.length;for(let m=0;m<h;++m){let p=f[m],g=p.width,C=p.show&&g>0,_=p._index,E=this.getSegments(p,s),I=E.positions,y=E.lengths,b=I.length,x=p.getPickId(a).color,S=0,P=0,D;for(let q=0;q<b;++q){q===0?p._loop?D=I[b-2]:(D=D0,u.subtract(I[0],I[1],D),u.add(I[0],D,D)):D=I[q-1],u.clone(D,tc),u.clone(I[q],Do),q===b-1?p._loop?D=I[1]:(D=D0,u.subtract(I[b-1],I[b-2],D),u.add(I[b-1],D,D)):D=I[q+1],u.clone(D,nc);let z=y[S];q===P+z&&(P+=z,++S);let K=q-P===0,ie=q===P+y[S]-1;A===Te.SCENE2D&&(tc.z=0,Do.z=0,nc.z=0),(A===Te.SCENE2D||A===Te.MORPHING)&&(K||ie)&&l-Math.abs(Do.x)<1&&((Do.x<0&&tc.x>0||Do.x>0&&tc.x<0)&&u.clone(Do,tc),(Do.x<0&&nc.x>0||Do.x>0&&nc.x<0)&&u.clone(Do,nc));let le=K?2:0,de=ie?2:4;for(let he=le;he<de;++he){xn.writeElements(Do,e,n),xn.writeElements(tc,e,n+6),xn.writeElements(nc,e,n+12);let Se=he-2<0?-1:1;t[o]=q/(b-1),t[o+1]=2*(he%2)-1,t[o+2]=Se,t[o+3]=_,n+=18,o+=4}}let Q=r0e;Q.x=F.floatToByte(x.red),Q.y=F.floatToByte(x.green),Q.z=F.floatToByte(x.blue),Q.w=F.floatToByte(x.alpha);let v=a0e;v.x=g,v.y=C?1:0;let d=A===Te.SCENE2D?p._boundingVolume2D:p._boundingVolumeWC,B=xn.fromCartesian(d.center,Q4),T=B.high,R=se.fromElements(B.low.x,B.low.y,B.low.z,d.radius,R4),L=v4;L.x=0,L.y=Number.MAX_VALUE;let G=p.distanceDisplayCondition;c(G)&&(L.x=G.near,L.y=G.far),r.setBatchedAttribute(_,0,v),r.setBatchedAttribute(_,1,Q),r.attributes.length>2&&(r.setBatchedAttribute(_,2,T),r.setBatchedAttribute(_,3,R),r.setBatchedAttribute(_,4,L))}};var s0e=new u,c0e=new u,A0e=new u,T4=new u;kA.prototype.writeForMorph=function(e,t){let n=this.modelMatrix,i=this.polylines,o=i.length;for(let r=0;r<o;++r){let a=i[r],s=a._segments.positions,A=a._segments.lengths,l=s.length,f=0,h=0;for(let m=0;m<l;++m){let p;m===0?a._loop?p=s[l-2]:(p=T4,u.subtract(s[0],s[1],p),u.add(s[0],p,p)):p=s[m-1],p=O.multiplyByPoint(n,p,c0e);let g=O.multiplyByPoint(n,s[m],s0e),C;m===l-1?a._loop?C=s[1]:(C=T4,u.subtract(s[l-1],s[l-2],C),u.add(s[l-1],C,C)):C=s[m+1],C=O.multiplyByPoint(n,C,A0e);let _=A[f];m===h+_&&(h+=_,++f);let E=m-h===0,I=m===h+A[f]-1,y=E?2:0,b=I?2:4;for(let x=y;x<b;++x)xn.writeElements(g,e,t),xn.writeElements(p,e,t+6),xn.writeElements(C,e,t+12),t+=18}}};var l0e=new Array(1);kA.prototype.updateIndices=function(e,t,n,i){let o=n.length-1,r=new aQ(0,i,this);n[o].push(r);let a=0,s=e[e.length-1],A=0;s.length>0&&(A=s[s.length-1]+1);let l=this.polylines,f=l.length;for(let h=0;h<f;++h){let m=l[h];m._locatorBuckets=[];let p;if(this.mode===Te.SCENE3D){p=l0e;let C=m._actualPositions.length;if(C>0)p[0]=C;else continue}else p=m._segments.lengths;let g=p.length;if(g>0){let C=0;for(let _=0;_<g;++_){let E=p[_]-1;for(let I=0;I<E;++I)A+4>w.SIXTY_FOUR_KILOBYTES&&(m._locatorBuckets.push({locator:r,count:C}),C=0,t.push(4),s=[],e.push(s),A=0,r.count=a,a=0,i=0,r=new aQ(0,0,this),n[++o]=[r]),s.push(A,A+2,A+1),s.push(A+1,A+2,A+3),C+=6,a+=6,i+=6,A+=4}m._locatorBuckets.push({locator:r,count:C}),A+4>w.SIXTY_FOUR_KILOBYTES&&(t.push(0),s=[],e.push(s),A=0,r.count=a,i=0,a=0,r=new aQ(0,0,this),n[++o]=[r])}m._clean()}return r.count=a,i};kA.prototype.getPolylineStartIndex=function(e){let t=this.polylines,n=0,i=t.length;for(let o=0;o<i;++o){let r=t[o];if(r===e)break;n+=r._actualLength}return n};var pp={positions:void 0,lengths:void 0},S4=new Array(1),f0e=new u,u0e=new ae;kA.prototype.getSegments=function(e,t){let n=e._actualPositions;if(this.mode===Te.SCENE3D)return S4[0]=n.length,pp.positions=n,pp.lengths=S4,pp;O4(e)&&(n=e._segments.positions);let i=t.ellipsoid,o=[],r=this.modelMatrix,a=n.length,s,A=f0e;for(let l=0;l<a;++l)s=n[l],A=O.multiplyByPoint(r,s,A),o.push(t.project(i.cartesianToCartographic(A,u0e)));if(o.length>0){e._boundingVolume2D=ee.fromPoints(o,e._boundingVolume2D);let l=e._boundingVolume2D.center;e._boundingVolume2D.center=new u(l.z,l.x,l.y)}return pp.positions=o,pp.lengths=e._segments.lengths,pp};var w4;kA.prototype.writeUpdate=function(e,t,n,i){let o=this.mode,r=i.ellipsoid.maximumRadius*w.PI,a=t._actualLength;if(a){e+=this.getPolylineStartIndex(t);let s=w4,A=6*a*3;!c(s)||s.length<A?s=w4=new Float32Array(A):s.length>A&&(s=new Float32Array(s.buffer,0,A));let l=this.getSegments(t,i),f=l.positions,h=l.lengths,m=0,p=0,g=0,C;a=f.length;for(let _=0;_<a;++_){_===0?t._loop?C=f[a-2]:(C=D0,u.subtract(f[0],f[1],C),u.add(f[0],C,C)):C=f[_-1],u.clone(C,tc),u.clone(f[_],Do),_===a-1?t._loop?C=f[1]:(C=D0,u.subtract(f[a-1],f[a-2],C),u.add(f[a-1],C,C)):C=f[_+1],u.clone(C,nc);let E=h[p];_===g+E&&(g+=E,++p);let I=_-g===0,y=_===g+h[p]-1;o===Te.SCENE2D&&(tc.z=0,Do.z=0,nc.z=0),(o===Te.SCENE2D||o===Te.MORPHING)&&(I||y)&&r-Math.abs(Do.x)<1&&((Do.x<0&&tc.x>0||Do.x>0&&tc.x<0)&&u.clone(Do,tc),(Do.x<0&&nc.x>0||Do.x>0&&nc.x<0)&&u.clone(Do,nc));let b=I?2:0,x=y?2:4;for(let S=b;S<x;++S)xn.writeElements(Do,s,m),xn.writeElements(tc,s,m+6),xn.writeElements(nc,s,m+12),m+=18}n.copyFromArrayView(s,18*Float32Array.BYTES_PER_ELEMENT*e)}};var gp=Lc;function Mu(e){this._positions=e.positions,this._batchTable=e.batchTable,this._batchIds=e.batchIds,this._rectangle=e.rectangle,this._minHeight=e.minimumHeight,this._maxHeight=e.maximumHeight,this._heightReference=e.heightReference,this._billboardCollection=new vu({batchTable:e.batchTable,scene:e.scene}),this._labelCollection=new Ah({batchTable:e.batchTable,scene:e.scene}),this._polylineCollection=new gp,this._polylineCollection._useHighlightColor=!0,this._packedBuffer=void 0,this._ready=!1,this._promise=void 0,this._error=void 0}Object.defineProperties(Mu.prototype,{ready:{get:function(){return this._ready}},pointsLength:{get:function(){return this._billboardCollection.length}},texturesByteLength:{get:function(){let e=this._billboardCollection.sizeInBytes,t=this._labelCollection.sizeInBytes;return e+t}}});function d0e(e,t){let n=e._rectangle,i=e._minHeight,o=e._maxHeight,r=2+ce.packedLength+Z.packedLength,a=new Float64Array(r),s=0;return a[s++]=i,a[s++]=o,ce.pack(n,a,s),s+=ce.packedLength,Z.pack(t,a,s),a}var h0e=new mo("createVectorTilePoints",5),m0e=new u;function p0e(e,t){let n=e._positions,i=e._packedBuffer;c(i)||(n=e._positions=n.slice(),e._batchIds=e._batchIds.slice(),i=e._packedBuffer=d0e(e,t));let o=[n.buffer,i.buffer],r={positions:n.buffer,packedBuffer:i.buffer},a=h0e.scheduleTask(r,o);if(c(a))return a.then(s=>{if(e.isDestroyed())return;e._positions=new Float64Array(s.positions);let A=e._billboardCollection,l=e._labelCollection,f=e._polylineCollection;n=e._positions;let h=e._batchIds,m=n.length/3,p=e._heightReference??Ge.NONE;for(let g=0;g<m;++g){let C=h[g],_=u.unpack(n,g*3,m0e),E=A.add();E.position=_,E._batchIndex=C,E.heightReference=p;let I=l.add();I.text=" ",I.position=_,I._batchIndex=C,I.heightReference=p;let y=f.add();y.positions=[u.clone(_),u.clone(_)]}e._positions=void 0,e._packedBuffer=void 0,e._ready=!0}).catch(s=>{e.isDestroyed()||(e._error=s)})}Mu.prototype.createFeatures=function(e,t){let n=this._billboardCollection,i=this._labelCollection,o=this._polylineCollection,r=this._batchIds,a=r.length;for(let s=0;s<a;++s){let A=r[s],l=n.get(s),f=i.get(s),h=o.get(s);t[A]=new mp(e,A,l,f,h)}};Mu.prototype.applyDebugSettings=function(e,t){e?(F.clone(t,this._billboardCollection._highlightColor),F.clone(t,this._labelCollection._highlightColor),F.clone(t,this._polylineCollection._highlightColor)):(F.clone(F.WHITE,this._billboardCollection._highlightColor),F.clone(F.WHITE,this._labelCollection._highlightColor),F.clone(F.WHITE,this._polylineCollection._highlightColor))};function g0e(e,t){let n=e._batchIds,i=n.length;for(let o=0;o<i;++o){let r=n[o],a=t[r];a.show=!0,a.pointSize=mp.defaultPointSize,a.color=mp.defaultColor,a.pointOutlineColor=mp.defaultPointOutlineColor,a.pointOutlineWidth=mp.defaultPointOutlineWidth,a.labelColor=F.WHITE,a.labelOutlineColor=F.WHITE,a.labelOutlineWidth=1,a.font="30px sans-serif",a.labelStyle=wo.FILL,a.labelText=void 0,a.backgroundColor=new F(.165,.165,.165,.8),a.backgroundPadding=new U(7,5),a.backgroundEnabled=!1,a.scaleByDistance=void 0,a.translucencyByDistance=void 0,a.distanceDisplayCondition=void 0,a.heightOffset=0,a.anchorLineEnabled=!1,a.anchorLineColor=F.WHITE,a.image=void 0,a.disableDepthTestDistance=0,a.horizontalOrigin=pi.CENTER,a.verticalOrigin=yn.CENTER,a.labelHorizontalOrigin=pi.RIGHT,a.labelVerticalOrigin=yn.BASELINE}}var C0e=new F,_0e=new F,E0e=new F,I0e=new F,y0e=new F,b0e=new F,U_=new Rt,G_=new Rt,lQ=new rt;Mu.prototype.applyStyle=function(e,t){if(!c(e)){g0e(this,t);return}let n=this._batchIds,i=n.length;for(let o=0;o<i;++o){let r=n[o],a=t[r];if(c(e.show)&&(a.show=e.show.evaluate(a)),c(e.pointSize)&&(a.pointSize=e.pointSize.evaluate(a)),c(e.color)&&(a.color=e.color.evaluateColor(a,C0e)),c(e.pointOutlineColor)&&(a.pointOutlineColor=e.pointOutlineColor.evaluateColor(a,_0e)),c(e.pointOutlineWidth)&&(a.pointOutlineWidth=e.pointOutlineWidth.evaluate(a)),c(e.labelColor)&&(a.labelColor=e.labelColor.evaluateColor(a,E0e)),c(e.labelOutlineColor)&&(a.labelOutlineColor=e.labelOutlineColor.evaluateColor(a,I0e)),c(e.labelOutlineWidth)&&(a.labelOutlineWidth=e.labelOutlineWidth.evaluate(a)),c(e.font)&&(a.font=e.font.evaluate(a)),c(e.labelStyle)&&(a.labelStyle=e.labelStyle.evaluate(a)),c(e.labelText)?a.labelText=e.labelText.evaluate(a):a.labelText=void 0,c(e.backgroundColor)&&(a.backgroundColor=e.backgroundColor.evaluateColor(a,y0e)),c(e.backgroundPadding)&&(a.backgroundPadding=e.backgroundPadding.evaluate(a)),c(e.backgroundEnabled)&&(a.backgroundEnabled=e.backgroundEnabled.evaluate(a)),c(e.scaleByDistance)){let s=e.scaleByDistance.evaluate(a);c(s)?(U_.near=s.x,U_.nearValue=s.y,U_.far=s.z,U_.farValue=s.w,a.scaleByDistance=U_):a.scaleByDistance=void 0}else a.scaleByDistance=void 0;if(c(e.translucencyByDistance)){let s=e.translucencyByDistance.evaluate(a);c(s)?(G_.near=s.x,G_.nearValue=s.y,G_.far=s.z,G_.farValue=s.w,a.translucencyByDistance=G_):a.translucencyByDistance=void 0}else a.translucencyByDistance=void 0;if(c(e.distanceDisplayCondition)){let s=e.distanceDisplayCondition.evaluate(a);c(s)?(lQ.near=s.x,lQ.far=s.y,a.distanceDisplayCondition=lQ):a.distanceDisplayCondition=void 0}else a.distanceDisplayCondition=void 0;c(e.heightOffset)&&(a.heightOffset=e.heightOffset.evaluate(a)),c(e.anchorLineEnabled)&&(a.anchorLineEnabled=e.anchorLineEnabled.evaluate(a)),c(e.anchorLineColor)&&(a.anchorLineColor=e.anchorLineColor.evaluateColor(a,b0e)),c(e.image)?a.image=e.image.evaluate(a):a.image=void 0,c(e.disableDepthTestDistance)&&(a.disableDepthTestDistance=e.disableDepthTestDistance.evaluate(a)),c(e.horizontalOrigin)&&(a.horizontalOrigin=e.horizontalOrigin.evaluate(a)),c(e.verticalOrigin)&&(a.verticalOrigin=e.verticalOrigin.evaluate(a)),c(e.labelHorizontalOrigin)&&(a.labelHorizontalOrigin=e.labelHorizontalOrigin.evaluate(a)),c(e.labelVerticalOrigin)&&(a.labelVerticalOrigin=e.labelVerticalOrigin.evaluate(a))}};Mu.prototype.update=function(e){if(!this._ready&&(c(this._promise)||(this._promise=p0e(this,e.mapProjection.ellipsoid)),c(this._error))){let t=this._error;throw this._error=void 0,t}this._polylineCollection.update(e),this._billboardCollection.update(e),this._labelCollection.update(e)};Mu.prototype.isDestroyed=function(){return!1};Mu.prototype.destroy=function(){return this._billboardCollection=this._billboardCollection&&this._billboardCollection.destroy(),this._labelCollection=this._labelCollection&&this._labelCollection.destroy(),this._polylineCollection=this._polylineCollection&&this._polylineCollection.destroy(),pe(this)};var L4=Mu;function ql(e){this._batchTable=e.batchTable,this._batchIds=e.batchIds,this._positions=e.positions,this._counts=e.counts,this._indices=e.indices,this._indexCounts=e.indexCounts,this._indexOffsets=void 0,this._batchTableColors=void 0,this._packedBuffer=void 0,this._batchedPositions=void 0,this._transferrableBatchIds=void 0,this._vertexBatchIds=void 0,this._ellipsoid=e.ellipsoid??Z.WGS84,this._minimumHeight=e.minimumHeight,this._maximumHeight=e.maximumHeight,this._polygonMinimumHeights=e.polygonMinimumHeights,this._polygonMaximumHeights=e.polygonMaximumHeights,this._center=e.center??u.ZERO,this._rectangle=e.rectangle,this._center=void 0,this._boundingVolume=e.boundingVolume,this._boundingVolumes=void 0,this._batchedIndices=void 0,this._ready=!1,this._promise=void 0,this._error=void 0,this._primitive=void 0,this.debugWireframe=!1,this.forceRebatch=!1,this.classificationType=on.BOTH}Object.defineProperties(ql.prototype,{trianglesLength:{get:function(){return c(this._primitive)?this._primitive.trianglesLength:0}},geometryByteLength:{get:function(){return c(this._primitive)?this._primitive.geometryByteLength:0}},ready:{get:function(){return this._ready}}});function B0e(e){let t=new Float64Array(3+u.packedLength+Z.packedLength+ce.packedLength),n=0;return t[n++]=e._indices.BYTES_PER_ELEMENT,t[n++]=e._minimumHeight,t[n++]=e._maximumHeight,u.pack(e._center,t,n),n+=u.packedLength,Z.pack(e._ellipsoid,t,n),n+=Z.packedLength,ce.pack(e._rectangle,t,n),t}function x0e(e,t){let n=1,i=t[n++],o=e._boundingVolumes=new Array(i);for(let s=0;s<i;++s)o[s]=To.unpack(t,n),n+=To.packedLength;let r=t[n++],a=e._batchedIndices=new Array(r);for(let s=0;s<r;++s){let A=F.unpack(t,n);n+=F.packedLength;let l=t[n++],f=t[n++],h=t[n++],m=new Array(h);for(let p=0;p<h;++p)m[p]=t[n++];a[s]=new Ud({color:A,offset:l,count:f,batchIds:m})}}var T0e=new mo("createVectorTilePolygons",5),S0e=new F;function w0e(e){if(c(e._primitive))return;let t=e._positions,n=e._counts,i=e._indexCounts,o=e._indices,r=e._transferrableBatchIds,a=e._batchTableColors,s=e._packedBuffer;if(!c(a)){t=e._positions=e._positions.slice(),n=e._counts=e._counts.slice(),i=e._indexCounts=e._indexCounts.slice(),o=e._indices=e._indices.slice(),e._center=e._ellipsoid.cartographicToCartesian(ce.center(e._rectangle)),r=e._transferrableBatchIds=new Uint32Array(e._batchIds),a=e._batchTableColors=new Uint32Array(r.length);let p=e._batchTable,g=a.length;for(let C=0;C<g;++C){let _=p.getColor(C,S0e);a[C]=_.toRgba()}s=e._packedBuffer=B0e(e)}let A=[t.buffer,n.buffer,i.buffer,o.buffer,r.buffer,a.buffer,s.buffer],l={packedBuffer:s.buffer,positions:t.buffer,counts:n.buffer,indexCounts:i.buffer,indices:o.buffer,batchIds:r.buffer,batchTableColors:a.buffer},f=e._polygonMinimumHeights,h=e._polygonMaximumHeights;c(f)&&c(h)&&(f=f.slice(),h=h.slice(),A.push(f.buffer,h.buffer),l.minimumHeights=f,l.maximumHeights=h);let m=T0e.scheduleTask(l,A);if(c(m))return m.then(p=>{if(e.isDestroyed())return;e._positions=void 0,e._counts=void 0,e._polygonMinimumHeights=void 0,e._polygonMaximumHeights=void 0;let g=new Float64Array(p.packedBuffer),C=g[0];x0e(e,g),e._indices=Be.getSizeInBytes(C)===2?new Uint16Array(p.indices):new Uint32Array(p.indices),e._indexOffsets=new Uint32Array(p.indexOffsets),e._indexCounts=new Uint32Array(p.indexCounts),e._batchedPositions=new Float32Array(p.positions),e._vertexBatchIds=new Uint16Array(p.batchIds),D0e(e),e._ready=!0}).catch(p=>{e.isDestroyed()||(e._error=p)})}function D0e(e){c(e._primitive)||(e._primitive=new ib({batchTable:e._batchTable,positions:e._batchedPositions,batchIds:e._batchIds,vertexBatchIds:e._vertexBatchIds,indices:e._indices,indexOffsets:e._indexOffsets,indexCounts:e._indexCounts,batchedIndices:e._batchedIndices,boundingVolume:e._boundingVolume,boundingVolumes:e._boundingVolumes,center:e._center}),e._batchTable=void 0,e._batchIds=void 0,e._positions=void 0,e._counts=void 0,e._indices=void 0,e._indexCounts=void 0,e._indexOffsets=void 0,e._batchTableColors=void 0,e._packedBuffer=void 0,e._batchedPositions=void 0,e._transferrableBatchIds=void 0,e._vertexBatchIds=void 0,e._ellipsoid=void 0,e._minimumHeight=void 0,e._maximumHeight=void 0,e._polygonMinimumHeights=void 0,e._polygonMaximumHeights=void 0,e._center=void 0,e._rectangle=void 0,e._boundingVolume=void 0,e._boundingVolumes=void 0,e._batchedIndices=void 0)}ql.prototype.createFeatures=function(e,t){this._primitive.createFeatures(e,t)};ql.prototype.applyDebugSettings=function(e,t){this._primitive.applyDebugSettings(e,t)};ql.prototype.applyStyle=function(e,t){this._primitive.applyStyle(e,t)};ql.prototype.updateCommands=function(e,t){this._primitive.updateCommands(e,t)};ql.prototype.update=function(e){if(!this._ready){if(c(this._promise)||(this._promise=w0e(this)),c(this._error)){let t=this._error;throw this._error=void 0,t}return}this._primitive.debugWireframe=this.debugWireframe,this._primitive.forceRebatch=this.forceRebatch,this._primitive.classificationType=this.classificationType,this._primitive.update(e)};ql.prototype.isDestroyed=function(){return!1};ql.prototype.destroy=function(){return this._primitive=this._primitive&&this._primitive.destroy(),pe(this)};var N4=ql;var F4=`in vec4 currentPosition;
in vec4 previousPosition;
in vec4 nextPosition;
in vec2 expandAndWidth;
in float a_batchId;

uniform mat4 u_modifiedModelView;

void main()
{
    float expandDir = expandAndWidth.x;
    float width = abs(expandAndWidth.y) + 0.5;
    bool usePrev = expandAndWidth.y < 0.0;

    vec4 p = u_modifiedModelView * currentPosition;
    vec4 prev = u_modifiedModelView * previousPosition;
    vec4 next = u_modifiedModelView * nextPosition;

    float angle;
    vec4 positionWC = getPolylineWindowCoordinatesEC(p, prev, next, expandDir, width, usePrev, angle);
    gl_Position = czm_viewportOrthographic * positionWC;
}
`;function Nc(e){this._positions=e.positions,this._widths=e.widths,this._counts=e.counts,this._batchIds=e.batchIds,this._ellipsoid=e.ellipsoid??Z.WGS84,this._minimumHeight=e.minimumHeight,this._maximumHeight=e.maximumHeight,this._center=e.center,this._rectangle=e.rectangle,this._boundingVolume=e.boundingVolume,this._batchTable=e.batchTable,this._va=void 0,this._sp=void 0,this._rs=void 0,this._uniformMap=void 0,this._command=void 0,this._transferrableBatchIds=void 0,this._packedBuffer=void 0,this._keepDecodedPositions=e.keepDecodedPositions,this._decodedPositions=void 0,this._decodedPositionOffsets=void 0,this._currentPositions=void 0,this._previousPositions=void 0,this._nextPositions=void 0,this._expandAndWidth=void 0,this._vertexBatchIds=void 0,this._indices=void 0,this._constantColor=F.clone(F.WHITE),this._highlightColor=this._constantColor,this._trianglesLength=0,this._geometryByteLength=0,this._ready=!1,this._promise=void 0,this._error=void 0}Object.defineProperties(Nc.prototype,{trianglesLength:{get:function(){return this._trianglesLength}},geometryByteLength:{get:function(){return this._geometryByteLength}},ready:{get:function(){return this._ready}}});function Q0e(e){let t=e._rectangle,n=e._minimumHeight,i=e._maximumHeight,o=e._ellipsoid,r=e._center,a=2+ce.packedLength+Z.packedLength+u.packedLength,s=new Float64Array(a),A=0;return s[A++]=n,s[A++]=i,ce.pack(t,s,A),A+=ce.packedLength,Z.pack(o,s,A),A+=Z.packedLength,u.pack(r,s,A),s}var R0e=new mo("createVectorTilePolylines",5),Cp={previousPosition:0,currentPosition:1,nextPosition:2,expandAndWidth:3,a_batchId:4};function v0e(e,t){if(c(e._va))return;let n=e._positions,i=e._widths,o=e._counts,r=e._transferrableBatchIds,a=e._packedBuffer;c(a)||(n=e._positions=n.slice(),i=e._widths=i.slice(),o=e._counts=o.slice(),r=e._transferrableBatchIds=e._batchIds.slice(),a=e._packedBuffer=Q0e(e));let s=[n.buffer,i.buffer,o.buffer,r.buffer,a.buffer],A={positions:n.buffer,widths:i.buffer,counts:o.buffer,batchIds:r.buffer,packedBuffer:a.buffer,keepDecodedPositions:e._keepDecodedPositions},l=R0e.scheduleTask(A,s);if(c(l))return l.then(function(f){if(e.isDestroyed())return;e._keepDecodedPositions&&(e._decodedPositions=new Float64Array(f.decodedPositions),e._decodedPositionOffsets=new Uint32Array(f.decodedPositionOffsets)),e._currentPositions=new Float32Array(f.currentPositions),e._previousPositions=new Float32Array(f.previousPositions),e._nextPositions=new Float32Array(f.nextPositions),e._expandAndWidth=new Float32Array(f.expandAndWidth),e._vertexBatchIds=new Uint16Array(f.batchIds);let h=f.indexDatatype;e._indices=h===Be.UNSIGNED_SHORT?new Uint16Array(f.indices):new Uint32Array(f.indices),P0e(e,t),e._ready=!0}).catch(f=>{e.isDestroyed()||(e._error=f)})}function P0e(e,t){if(!c(e._va)){let n=e._currentPositions,i=e._previousPositions,o=e._nextPositions,r=e._expandAndWidth,a=e._vertexBatchIds,s=e._indices,A=i.byteLength+n.byteLength+o.byteLength;A+=r.byteLength+a.byteLength+s.byteLength,e._trianglesLength=s.length/3,e._geometryByteLength=A;let l=dt.createVertexBuffer({context:t,typedArray:i,usage:Me.STATIC_DRAW}),f=dt.createVertexBuffer({context:t,typedArray:n,usage:Me.STATIC_DRAW}),h=dt.createVertexBuffer({context:t,typedArray:o,usage:Me.STATIC_DRAW}),m=dt.createVertexBuffer({context:t,typedArray:r,usage:Me.STATIC_DRAW}),p=dt.createVertexBuffer({context:t,typedArray:a,usage:Me.STATIC_DRAW}),g=dt.createIndexBuffer({context:t,typedArray:s,usage:Me.STATIC_DRAW,indexDatatype:s.BYTES_PER_ELEMENT===2?Be.UNSIGNED_SHORT:Be.UNSIGNED_INT}),C=[{index:Cp.previousPosition,vertexBuffer:l,componentDatatype:N.FLOAT,componentsPerAttribute:3},{index:Cp.currentPosition,vertexBuffer:f,componentDatatype:N.FLOAT,componentsPerAttribute:3},{index:Cp.nextPosition,vertexBuffer:h,componentDatatype:N.FLOAT,componentsPerAttribute:3},{index:Cp.expandAndWidth,vertexBuffer:m,componentDatatype:N.FLOAT,componentsPerAttribute:2},{index:Cp.a_batchId,vertexBuffer:p,componentDatatype:N.UNSIGNED_SHORT,componentsPerAttribute:1}];e._va=new go({context:t,attributes:C,indexBuffer:g}),e._positions=void 0,e._widths=void 0,e._counts=void 0,e._ellipsoid=void 0,e._minimumHeight=void 0,e._maximumHeight=void 0,e._rectangle=void 0,e._transferrableBatchIds=void 0,e._packedBuffer=void 0,e._currentPositions=void 0,e._previousPositions=void 0,e._nextPositions=void 0,e._expandAndWidth=void 0,e._vertexBatchIds=void 0,e._indices=void 0}}var z_=new O,k4=new u;function M0e(e,t){c(e._uniformMap)||(e._uniformMap={u_modifiedModelView:function(){let n=t.uniformState.view;return O.clone(n,z_),O.multiplyByPoint(z_,e._center,k4),O.setTranslation(z_,k4,z_),z_},u_highlightColor:function(){return e._highlightColor}})}function O0e(e){if(c(e._rs))return;let t={enabled:!0,factor:-5,units:-5};e._rs=ut.fromCache({blending:qn.ALPHA_BLEND,depthMask:!1,depthTest:{enabled:!0},polygonOffset:t})}var L0e=`uniform vec4 u_highlightColor; 
void main()
{
    out_FragColor = u_highlightColor;
}
`;function N0e(e,t){if(c(e._sp))return;let n=e._batchTable,i=n.getVertexShaderCallback(!1,"a_batchId",void 0)(F4),o=n.getFragmentShaderCallback(!1,void 0,!1)(L0e),r=new It({defines:["VECTOR_TILE",$t.isInternetExplorer()?"":"CLIP_POLYLINE"],sources:[yA,i]}),a=new It({defines:["VECTOR_TILE"],sources:[o]});e._sp=Bn.fromCache({context:t,vertexShaderSource:r,fragmentShaderSource:a,attributeLocations:Cp})}function F0e(e,t){if(!c(e._command)){let n=e._batchTable.getUniformMapCallback()(e._uniformMap);e._command=new mt({owner:e,vertexArray:e._va,renderState:e._rs,shaderProgram:e._sp,uniformMap:n,boundingVolume:e._boundingVolume,pass:Ye.TRANSLUCENT,pickId:e._batchTable.getPickId()})}t.commandList.push(e._command)}Nc.getPolylinePositions=function(e,t){let n=e._batchIds,i=e._decodedPositions,o=e._decodedPositionOffsets;if(!c(n)||!c(i))return;let r,a,s=n.length,A=0,l=0;for(r=0;r<s;++r)n[r]===t&&(A+=o[r+1]-o[r]);if(A===0)return;let f=new Float64Array(A*3);for(r=0;r<s;++r)if(n[r]===t){let h=o[r],m=o[r+1]-h;for(a=0;a<m;++a){let p=(h+a)*3;f[l++]=i[p],f[l++]=i[p+1],f[l++]=i[p+2]}}return f};Nc.prototype.getPositions=function(e){return Nc.getPolylinePositions(this,e)};Nc.prototype.createFeatures=function(e,t){let n=this._batchIds,i=n.length;for(let o=0;o<i;++o){let r=n[o];t[r]=new TA(e,r)}};Nc.prototype.applyDebugSettings=function(e,t){this._highlightColor=e?t:this._constantColor};function k0e(e,t){let n=e._batchIds,i=n.length;for(let o=0;o<i;++o){let r=n[o],a=t[r];a.show=!0,a.color=F.WHITE}}var U0e=new F,G0e=F.WHITE,z0e=!0;Nc.prototype.applyStyle=function(e,t){if(!c(e)){k0e(this,t);return}let n=this._batchIds,i=n.length;for(let o=0;o<i;++o){let r=n[o],a=t[r];a.color=c(e.color)?e.color.evaluateColor(a,U0e):G0e,a.show=c(e.show)?e.show.evaluate(a):z0e}};Nc.prototype.update=function(e){let t=e.context;if(!this._ready){if(c(this._promise)||(this._promise=v0e(this,t)),c(this._error)){let i=this._error;throw this._error=void 0,i}return}M0e(this,t),N0e(this,t),O0e(this);let n=e.passes;(n.render||n.pick)&&F0e(this,e)};Nc.prototype.isDestroyed=function(){return!1};Nc.prototype.destroy=function(){return this._va=this._va&&this._va.destroy(),this._sp=this._sp&&this._sp.destroy(),pe(this)};var Q0=Nc;var U4=`in vec3 startEllipsoidNormal;
in vec3 endEllipsoidNormal;
in vec4 startPositionAndHeight;
in vec4 endPositionAndHeight;
in vec4 startFaceNormalAndVertexCorner;
in vec4 endFaceNormalAndHalfWidth;
in float a_batchId;

uniform mat4 u_modifiedModelView;
uniform vec2 u_minimumMaximumVectorHeights;

out vec4 v_startPlaneEC;
out vec4 v_endPlaneEC;
out vec4 v_rightPlaneEC;
out float v_halfWidth;
out vec3 v_volumeUpEC;

void main()
{
    // vertex corner IDs
    //          3-----------7
    //         /|   left   /|
    //        / | 1       / |
    //       2-----------6  5  end
    //       | /         | /
    // start |/  right   |/
    //       0-----------4
    //
    float isEnd = floor(startFaceNormalAndVertexCorner.w * 0.251); // 0 for front, 1 for end
    float isTop = floor(startFaceNormalAndVertexCorner.w * mix(0.51, 0.19, isEnd)); // 0 for bottom, 1 for top

    vec3 forward = endPositionAndHeight.xyz - startPositionAndHeight.xyz;
    vec3 right = normalize(cross(forward, startEllipsoidNormal));

    vec4 position = vec4(startPositionAndHeight.xyz, 1.0);
    position.xyz += forward * isEnd;

    v_volumeUpEC = czm_normal * normalize(cross(right, forward));

    // Push for volume height
    float offset;
    vec3 ellipsoidNormal = mix(startEllipsoidNormal, endEllipsoidNormal, isEnd);

    // offset height to create volume
    offset = mix(startPositionAndHeight.w, endPositionAndHeight.w, isEnd);
    offset = mix(u_minimumMaximumVectorHeights.y, u_minimumMaximumVectorHeights.x, isTop) - offset;
    position.xyz += offset * ellipsoidNormal;

    // move from RTC to EC
    position = u_modifiedModelView * position;
    right = czm_normal * right;

    // Push for width in a direction that is in the start or end plane and in a plane with right
    // N = normalEC ("right-facing" direction for push)
    // R = right
    // p = angle between N and R
    // w = distance to push along R if R == N
    // d = distance to push along N
    //
    //   N   R
    //  {  p| }      * cos(p) = dot(N, R) = w / d
    //  d  |  |w    * d = w / dot(N, R)
    //    { | }
    //       o---------- polyline segment ---->
    //
    vec3 scratchNormal = mix(-startFaceNormalAndVertexCorner.xyz, endFaceNormalAndHalfWidth.xyz, isEnd);
    scratchNormal = cross(scratchNormal, mix(startEllipsoidNormal, endEllipsoidNormal, isEnd));
    vec3 miterPushNormal = czm_normal * normalize(scratchNormal);

    offset = 2.0 * endFaceNormalAndHalfWidth.w * max(0.0, czm_metersPerPixel(position)); // offset = widthEC
    offset = offset / dot(miterPushNormal, right);
    position.xyz += miterPushNormal * (offset * sign(0.5 - mod(startFaceNormalAndVertexCorner.w, 2.0)));

    gl_Position = czm_depthClamp(czm_projection * position);

    position = u_modifiedModelView * vec4(startPositionAndHeight.xyz, 1.0);
    vec3 startNormalEC = czm_normal * startFaceNormalAndVertexCorner.xyz;
    v_startPlaneEC = vec4(startNormalEC, -dot(startNormalEC, position.xyz));
    v_rightPlaneEC = vec4(right, -dot(right, position.xyz));

    position = u_modifiedModelView * vec4(endPositionAndHeight.xyz, 1.0);
    vec3 endNormalEC = czm_normal * endFaceNormalAndHalfWidth.xyz;
    v_endPlaneEC = vec4(endNormalEC, -dot(endNormalEC, position.xyz));
    v_halfWidth = endFaceNormalAndHalfWidth.w;
}
`;var G4=`in vec4 v_startPlaneEC;
in vec4 v_endPlaneEC;
in vec4 v_rightPlaneEC;
in float v_halfWidth;
in vec3 v_volumeUpEC;

uniform vec4 u_highlightColor;
void main()
{
    float logDepthOrDepth = czm_branchFreeTernary(czm_sceneMode == czm_sceneMode2D, gl_FragCoord.z, czm_unpackDepth(texture(czm_globeDepthTexture, gl_FragCoord.xy / czm_viewport.zw)));

    // Discard for sky
    if (logDepthOrDepth == 0.0) {
#ifdef DEBUG_SHOW_VOLUME
        out_FragColor = vec4(0.0, 0.0, 1.0, 0.5);
        return;
#else // DEBUG_SHOW_VOLUME
        discard;
#endif // DEBUG_SHOW_VOLUME
    }

    vec4 eyeCoordinate = czm_windowToEyeCoordinates(gl_FragCoord.xy, logDepthOrDepth);
    eyeCoordinate /= eyeCoordinate.w;

    float halfMaxWidth = v_halfWidth * czm_metersPerPixel(eyeCoordinate);

    // Expand halfMaxWidth if direction to camera is almost perpendicular with the volume's up direction
    halfMaxWidth += halfMaxWidth * (1.0 - dot(-normalize(eyeCoordinate.xyz), v_volumeUpEC));

    // Check distance of the eye coordinate against the right-facing plane
    float widthwiseDistance = czm_planeDistance(v_rightPlaneEC, eyeCoordinate.xyz);

    // Check eye coordinate against the mitering planes
    float distanceFromStart = czm_planeDistance(v_startPlaneEC, eyeCoordinate.xyz);
    float distanceFromEnd = czm_planeDistance(v_endPlaneEC, eyeCoordinate.xyz);

    if (abs(widthwiseDistance) > halfMaxWidth || distanceFromStart < 0.0 || distanceFromEnd < 0.0) {
#ifdef DEBUG_SHOW_VOLUME
        out_FragColor = vec4(logDepthOrDepth, 0.0, 0.0, 0.5);
        return;
#else // DEBUG_SHOW_VOLUME
        discard;
#endif // DEBUG_SHOW_VOLUME
    }
    out_FragColor = u_highlightColor;

    czm_writeDepthClamp();
}
`;function Wl(e){this._positions=e.positions,this._widths=e.widths,this._counts=e.counts,this._batchIds=e.batchIds,this._ellipsoid=e.ellipsoid??Z.WGS84,this._minimumHeight=e.minimumHeight,this._maximumHeight=e.maximumHeight,this._center=e.center,this._rectangle=e.rectangle,this._batchTable=e.batchTable,this._va=void 0,this._sp=void 0,this._rs=void 0,this._uniformMap=void 0,this._command=void 0,this._transferrableBatchIds=void 0,this._packedBuffer=void 0,this._minimumMaximumVectorHeights=new U(On._defaultMinTerrainHeight,On._defaultMaxTerrainHeight),this._boundingVolume=To.fromRectangle(e.rectangle,On._defaultMinTerrainHeight,On._defaultMaxTerrainHeight,this._ellipsoid),this._classificationType=e.classificationType,this._keepDecodedPositions=e.keepDecodedPositions,this._decodedPositions=void 0,this._decodedPositionOffsets=void 0,this._startEllipsoidNormals=void 0,this._endEllipsoidNormals=void 0,this._startPositionAndHeights=void 0,this._startFaceNormalAndVertexCornerIds=void 0,this._endPositionAndHeights=void 0,this._endFaceNormalAndHalfWidths=void 0,this._vertexBatchIds=void 0,this._indices=void 0,this._constantColor=F.clone(F.WHITE),this._highlightColor=this._constantColor,this._trianglesLength=0,this._geometryByteLength=0,this._ready=!1,this._promise=void 0,this._error=void 0}Object.defineProperties(Wl.prototype,{trianglesLength:{get:function(){return this._trianglesLength}},geometryByteLength:{get:function(){return this._geometryByteLength}},ready:{get:function(){return this._ready}}});function H0e(e,t,n){let i=On.getMinimumMaximumHeights(t,n),o=i.minimumTerrainHeight,r=i.maximumTerrainHeight,a=e._minimumMaximumVectorHeights;a.x=o,a.y=r;let s=e._boundingVolume,A=e._rectangle;To.fromRectangle(A,o,r,n,s)}function V0e(e){let t=e._rectangle,n=e._minimumHeight,i=e._maximumHeight,o=e._ellipsoid,r=e._center,a=2+ce.packedLength+Z.packedLength+u.packedLength,s=new Float64Array(a),A=0;return s[A++]=n,s[A++]=i,ce.pack(t,s,A),A+=ce.packedLength,Z.pack(o,s,A),A+=Z.packedLength,u.pack(r,s,A),s}var j0e=new mo("createVectorTileClampedPolylines"),Ou={startEllipsoidNormal:0,endEllipsoidNormal:1,startPositionAndHeight:2,endPositionAndHeight:3,startFaceNormalAndVertexCorner:4,endFaceNormalAndHalfWidth:5,a_batchId:6};function Y0e(e,t){if(c(e._va))return;let n=e._positions,i=e._widths,o=e._counts,r=e._transferrableBatchIds,a=e._packedBuffer;c(a)||(n=e._positions=n.slice(),i=e._widths=i.slice(),o=e._counts=o.slice(),r=e._transferrableBatchIds=e._batchIds.slice(),a=e._packedBuffer=V0e(e));let s=[n.buffer,i.buffer,o.buffer,r.buffer,a.buffer],A={positions:n.buffer,widths:i.buffer,counts:o.buffer,batchIds:r.buffer,packedBuffer:a.buffer,keepDecodedPositions:e._keepDecodedPositions},l=j0e.scheduleTask(A,s);if(c(l))return l.then(function(f){if(e.isDestroyed())return;e._keepDecodedPositions&&(e._decodedPositions=new Float64Array(f.decodedPositions),e._decodedPositionOffsets=new Uint32Array(f.decodedPositionOffsets)),e._startEllipsoidNormals=new Float32Array(f.startEllipsoidNormals),e._endEllipsoidNormals=new Float32Array(f.endEllipsoidNormals),e._startPositionAndHeights=new Float32Array(f.startPositionAndHeights),e._startFaceNormalAndVertexCornerIds=new Float32Array(f.startFaceNormalAndVertexCornerIds),e._endPositionAndHeights=new Float32Array(f.endPositionAndHeights),e._endFaceNormalAndHalfWidths=new Float32Array(f.endFaceNormalAndHalfWidths),e._vertexBatchIds=new Uint16Array(f.vertexBatchIds);let h=f.indexDatatype;e._indices=h===Be.UNSIGNED_SHORT?new Uint16Array(f.indices):new Uint32Array(f.indices),q0e(e,t),e._ready=!0}).catch(f=>{e.isDestroyed()||(e._error=f)})}function q0e(e,t){if(!c(e._va)){let n=e._startEllipsoidNormals,i=e._endEllipsoidNormals,o=e._startPositionAndHeights,r=e._endPositionAndHeights,a=e._startFaceNormalAndVertexCornerIds,s=e._endFaceNormalAndHalfWidths,A=e._vertexBatchIds,l=e._indices,f=n.byteLength+i.byteLength;f+=o.byteLength+r.byteLength,f+=a.byteLength+s.byteLength,f+=A.byteLength+l.byteLength,e._trianglesLength=l.length/3,e._geometryByteLength=f;let h=dt.createVertexBuffer({context:t,typedArray:n,usage:Me.STATIC_DRAW}),m=dt.createVertexBuffer({context:t,typedArray:i,usage:Me.STATIC_DRAW}),p=dt.createVertexBuffer({context:t,typedArray:o,usage:Me.STATIC_DRAW}),g=dt.createVertexBuffer({context:t,typedArray:r,usage:Me.STATIC_DRAW}),C=dt.createVertexBuffer({context:t,typedArray:a,usage:Me.STATIC_DRAW}),_=dt.createVertexBuffer({context:t,typedArray:s,usage:Me.STATIC_DRAW}),E=dt.createVertexBuffer({context:t,typedArray:A,usage:Me.STATIC_DRAW}),I=dt.createIndexBuffer({context:t,typedArray:l,usage:Me.STATIC_DRAW,indexDatatype:l.BYTES_PER_ELEMENT===2?Be.UNSIGNED_SHORT:Be.UNSIGNED_INT}),y=[{index:Ou.startEllipsoidNormal,vertexBuffer:h,componentDatatype:N.FLOAT,componentsPerAttribute:3},{index:Ou.endEllipsoidNormal,vertexBuffer:m,componentDatatype:N.FLOAT,componentsPerAttribute:3},{index:Ou.startPositionAndHeight,vertexBuffer:p,componentDatatype:N.FLOAT,componentsPerAttribute:4},{index:Ou.endPositionAndHeight,vertexBuffer:g,componentDatatype:N.FLOAT,componentsPerAttribute:4},{index:Ou.startFaceNormalAndVertexCorner,vertexBuffer:C,componentDatatype:N.FLOAT,componentsPerAttribute:4},{index:Ou.endFaceNormalAndHalfWidth,vertexBuffer:_,componentDatatype:N.FLOAT,componentsPerAttribute:4},{index:Ou.a_batchId,vertexBuffer:E,componentDatatype:N.UNSIGNED_SHORT,componentsPerAttribute:1}];e._va=new go({context:t,attributes:y,indexBuffer:I}),e._positions=void 0,e._widths=void 0,e._counts=void 0,e._ellipsoid=void 0,e._minimumHeight=void 0,e._maximumHeight=void 0,e._rectangle=void 0,e._transferrableBatchIds=void 0,e._packedBuffer=void 0,e._startEllipsoidNormals=void 0,e._endEllipsoidNormals=void 0,e._startPositionAndHeights=void 0,e._startFaceNormalAndVertexCornerIds=void 0,e._endPositionAndHeights=void 0,e._endFaceNormalAndHalfWidths=void 0,e._vertexBatchIds=void 0,e._indices=void 0}}var H_=new O,z4=new u;function W0e(e,t){c(e._uniformMap)||(e._uniformMap={u_modifiedModelView:function(){let n=t.uniformState.view;return O.clone(n,H_),O.multiplyByPoint(H_,e._center,z4),O.setTranslation(H_,z4,H_),H_},u_highlightColor:function(){return e._highlightColor},u_minimumMaximumVectorHeights:function(){return e._minimumMaximumVectorHeights}})}function H4(e){return ut.fromCache({cull:{enabled:!0,face:No.FRONT},blending:qn.PRE_MULTIPLIED_ALPHA_BLEND,depthMask:!1,stencilTest:{enabled:e,frontFunction:Nn.EQUAL,frontOperation:{fail:nt.KEEP,zFail:nt.KEEP,zPass:nt.KEEP},backFunction:Nn.EQUAL,backOperation:{fail:nt.KEEP,zFail:nt.KEEP,zPass:nt.KEEP},reference:Qt.CESIUM_3D_TILE_MASK,mask:Qt.CESIUM_3D_TILE_MASK}})}function J0e(e){c(e._rs)||(e._rs=H4(!1),e._rs3DTiles=H4(!0))}function K0e(e,t){if(c(e._sp))return;let n=e._batchTable,i=n.getVertexShaderCallback(!1,"a_batchId",void 0)(U4),o=n.getFragmentShaderCallback(!1,void 0,!0)(G4),r=new It({defines:["VECTOR_TILE",$t.isInternetExplorer()?"":"CLIP_POLYLINE"],sources:[yA,i]}),a=new It({defines:["VECTOR_TILE"],sources:[o]});e._sp=Bn.fromCache({context:t,vertexShaderSource:r,fragmentShaderSource:a,attributeLocations:Ou})}function X0e(e,t){let n=e._command;if(!c(e._command)){let o=e._batchTable.getUniformMapCallback()(e._uniformMap);n=e._command=new mt({owner:e,vertexArray:e._va,renderState:e._rs,shaderProgram:e._sp,uniformMap:o,boundingVolume:e._boundingVolume,pass:Ye.TERRAIN_CLASSIFICATION,pickId:e._batchTable.getPickId()});let r=mt.shallowClone(n,n.derivedCommands.tileset);r.renderState=e._rs3DTiles,r.pass=Ye.CESIUM_3D_TILE_CLASSIFICATION,n.derivedCommands.tileset=r}let i=e._classificationType;(i===on.TERRAIN||i===on.BOTH)&&t.commandList.push(n),(i===on.CESIUM_3D_TILE||i===on.BOTH)&&t.commandList.push(n.derivedCommands.tileset)}Wl.prototype.getPositions=function(e){return Q0.getPolylinePositions(this,e)};Wl.prototype.createFeatures=function(e,t){let n=this._batchIds,i=n.length;for(let o=0;o<i;++o){let r=n[o];t[r]=new TA(e,r)}};Wl.prototype.applyDebugSettings=function(e,t){this._highlightColor=e?t:this._constantColor};function Z0e(e,t){let n=e._batchIds,i=n.length;for(let o=0;o<i;++o){let r=n[o],a=t[r];a.show=!0,a.color=F.WHITE}}var $0e=new F,eBe=F.WHITE,tBe=!0;Wl.prototype.applyStyle=function(e,t){if(!c(e)){Z0e(this,t);return}let n=this._batchIds,i=n.length;for(let o=0;o<i;++o){let r=n[o],a=t[r];a.color=c(e.color)?e.color.evaluateColor(a,$0e):eBe,a.show=c(e.show)?e.show.evaluate(a):tBe}};function nBe(e){return On.initialize().then(function(){H0e(e,e._rectangle,e._ellipsoid)}).catch(t=>{e.isDestroyed()||(e._error=t)})}Wl.prototype.update=function(e){let t=e.context;if(!this._ready){if(c(this._promise)||(this._promise=nBe(this).then(Y0e(this,t))),c(this._error)){let i=this._error;throw this._error=void 0,i}return}W0e(this,t),K0e(this,t),J0e(this);let n=e.passes;(n.render||n.pick)&&X0e(this,e)};Wl.prototype.isDestroyed=function(){return!1};Wl.prototype.destroy=function(){return this._va=this._va&&this._va.destroy(),this._sp=this._sp&&this._sp.destroy(),pe(this)};var V4=Wl;var fQ=32767,iBe=new ae,oBe=new u;function rBe(e,t,n,i,o){let r=e.length/3,a=e.subarray(0,r),s=e.subarray(r,2*r),A=e.subarray(2*r,3*r);ni.zigZagDeltaDecode(a,s,A);let l=new Float64Array(e.length);for(let f=0;f<r;++f){let h=a[f],m=s[f],p=A[f],g=w.lerp(t.west,t.east,h/fQ),C=w.lerp(t.south,t.north,m/fQ),_=w.lerp(n,i,p/fQ),E=ae.fromRadians(g,C,_,iBe),I=o.cartographicToCartesian(E,oBe);u.pack(I,l,f*3)}return l}var j4=rBe;function kc(e,t,n,i,o){this._tileset=e,this._tile=t,this._resource=n,this._polygons=void 0,this._polylines=void 0,this._points=void 0,this._metadata=void 0,this._batchTable=void 0,this._features=void 0,this.featurePropertiesDirty=!1,this._group=void 0,this._ready=!1,lBe(this,i,o)}Object.defineProperties(kc.prototype,{featuresLength:{get:function(){return c(this._batchTable)?this._batchTable.featuresLength:0}},pointsLength:{get:function(){return c(this._points)?this._points.pointsLength:0}},trianglesLength:{get:function(){let e=0;return c(this._polygons)&&(e+=this._polygons.trianglesLength),c(this._polylines)&&(e+=this._polylines.trianglesLength),e}},geometryByteLength:{get:function(){let e=0;return c(this._polygons)&&(e+=this._polygons.geometryByteLength),c(this._polylines)&&(e+=this._polylines.geometryByteLength),e}},texturesByteLength:{get:function(){return c(this._points)?this._points.texturesByteLength:0}},batchTableByteLength:{get:function(){return c(this._batchTable)?this._batchTable.batchTableByteLength:0}},innerContents:{get:function(){}},ready:{get:function(){return this._ready}},tileset:{get:function(){return this._tileset}},tile:{get:function(){return this._tile}},url:{get:function(){return this._resource.getUrlComponent(!0)}},metadata:{get:function(){return this._metadata},set:function(e){this._metadata=e}},batchTable:{get:function(){return this._batchTable}},group:{get:function(){return this._group},set:function(e){this._group=e}}});function aBe(e){return function(t,n){c(e._polygons)&&e._polygons.updateCommands(t,n)}}function sBe(e,t){let n,i,o,r,a=e.POLYGONS_LENGTH??0,s=e.POLYLINES_LENGTH??0,A=e.POINTS_LENGTH??0;if(a>0&&c(e.POLYGON_BATCH_IDS)){let m=t.byteOffset+e.POLYGON_BATCH_IDS.byteOffset;n=new Uint16Array(t.buffer,m,a)}if(s>0&&c(e.POLYLINE_BATCH_IDS)){let m=t.byteOffset+e.POLYLINE_BATCH_IDS.byteOffset;i=new Uint16Array(t.buffer,m,s)}if(A>0&&c(e.POINT_BATCH_IDS)){let m=t.byteOffset+e.POINT_BATCH_IDS.byteOffset;o=new Uint16Array(t.buffer,m,A)}let l=c(n)||c(i)||c(o),f=a>0&&!c(n)||s>0&&!c(i)||A>0&&!c(o);if(l&&f)throw new oe("If one group of batch ids is defined, then all batch ids must be defined");if(!c(n)&&!c(i)&&!c(o)){let m=0;if(!c(n)&&a>0)for(n=new Uint16Array(a),r=0;r<a;++r)n[r]=m++;if(!c(i)&&s>0)for(i=new Uint16Array(s),r=0;r<s;++r)i[r]=m++;if(!c(o)&&A>0)for(o=new Uint16Array(A),r=0;r<A;++r)o[r]=m++}return{polygons:n,polylines:i,points:o}}var Fc=Uint32Array.BYTES_PER_ELEMENT;function cBe(e){return new Q0(e)}function ABe(e){return new V4(e)}function lBe(e,t,n){n=n??0;let i=new Uint8Array(t),o=new DataView(t);n+=Fc;let r=o.getUint32(n,!0);if(r!==1)throw new oe(`Only Vector tile version 1 is supported.  Version ${r} is not.`);n+=Fc;let a=o.getUint32(n,!0);if(n+=Fc,a===0){e._ready=!0;return}let s=o.getUint32(n,!0);if(n+=Fc,s===0)throw new oe("Feature table must have a byte length greater than zero");let A=o.getUint32(n,!0);n+=Fc;let l=o.getUint32(n,!0);n+=Fc;let f=o.getUint32(n,!0);n+=Fc;let h=o.getUint32(n,!0);n+=Fc;let m=o.getUint32(n,!0);n+=Fc;let p=o.getUint32(n,!0);n+=Fc;let g=o.getUint32(n,!0);n+=Fc;let C=_o(i,n,s);n+=s;let _=new Uint8Array(t,n,A);n+=A;let E,I;l>0&&(E=_o(i,n,l),n+=l,f>0&&(I=new Uint8Array(t,n,f),I=new Uint8Array(I),n+=f));let y=C.POLYGONS_LENGTH??0,b=C.POLYLINES_LENGTH??0,x=C.POINTS_LENGTH??0,S=y+b+x,P=new Ky(e,S,E,I,aBe(e));if(e._batchTable=P,S===0)return;let D=new _u(C,_),Q=D.getGlobalProperty("REGION");if(!c(Q))throw new oe("Feature table global property: REGION must be defined");let v=ce.unpack(Q),d=Q[4],B=Q[5],T=e._tile.computedTransform,R=D.getGlobalProperty("RTC_CENTER",N.FLOAT,3);c(R)?(R=u.unpack(R),O.multiplyByPoint(T,R,R)):(R=ce.center(v),R.height=w.lerp(d,B,.5),R=Z.WGS84.cartographicToCartesian(R));let L=sBe(C,_);if(n+=(4-n%4)%4,y>0){D.featuresLength=y;let q=D.getPropertyArray("POLYGON_COUNTS",N.UNSIGNED_INT,1)??D.getPropertyArray("POLYGON_COUNT",N.UNSIGNED_INT,1);if(!c(q))throw new oe("Feature table property: POLYGON_COUNTS must be defined when POLYGONS_LENGTH is greater than 0");let z=D.getPropertyArray("POLYGON_INDEX_COUNTS",N.UNSIGNED_INT,1)??D.getPropertyArray("POLYGON_INDEX_COUNT",N.UNSIGNED_INT,1);if(!c(z))throw new oe("Feature table property: POLYGON_INDEX_COUNTS must be defined when POLYGONS_LENGTH is greater than 0");let K=q.reduce(function(be,_e){return be+_e*2},0),ie=z.reduce(function(be,_e){return be+_e},0),le=new Uint32Array(t,n,ie);n+=h;let de=new Uint16Array(t,n,K);n+=m;let he,Se;c(C.POLYGON_MINIMUM_HEIGHTS)&&c(C.POLYGON_MAXIMUM_HEIGHTS)&&(he=D.getPropertyArray("POLYGON_MINIMUM_HEIGHTS",N.FLOAT,1),Se=D.getPropertyArray("POLYGON_MAXIMUM_HEIGHTS",N.FLOAT,1)),e._polygons=new N4({positions:de,counts:q,indexCounts:z,indices:le,minimumHeight:d,maximumHeight:B,polygonMinimumHeights:he,polygonMaximumHeights:Se,center:R,rectangle:v,boundingVolume:e.tile.boundingVolume.boundingVolume,batchTable:P,batchIds:L.polygons,modelMatrix:T})}let G=e._tileset;if(b>0){D.featuresLength=b;let q=D.getPropertyArray("POLYLINE_COUNTS",N.UNSIGNED_INT,1)??D.getPropertyArray("POLYLINE_COUNT",N.UNSIGNED_INT,1);if(!c(q))throw new oe("Feature table property: POLYLINE_COUNTS must be defined when POLYLINES_LENGTH is greater than 0");let z=D.getPropertyArray("POLYLINE_WIDTHS",N.UNSIGNED_SHORT,1);if(!c(z)){z=new Uint16Array(b);for(let he=0;he<b;++he)z[he]=2}let K=q.reduce(function(he,Se){return he+Se*3},0),ie=new Uint16Array(t,n,K);n+=p;let le=G.examineVectorLinesFunction;if(c(le)){let he=j4(new Uint16Array(ie),v,d,B,Z.WGS84);fBe(he,q,L.polylines,P,e.url,le)}let de=cBe;c(G.classificationType)&&(de=ABe),e._polylines=de({positions:ie,widths:z,counts:q,batchIds:L.polylines,minimumHeight:d,maximumHeight:B,center:R,rectangle:v,boundingVolume:e.tile.boundingVolume.boundingVolume,batchTable:P,classificationType:G.classificationType,keepDecodedPositions:G.vectorKeepDecodedPositions})}if(x>0){let q=new Uint16Array(t,n,x*3);n+=g,e._points=new L4({positions:q,batchIds:L.points,minimumHeight:d,maximumHeight:B,rectangle:v,batchTable:P,heightReference:G.heightReference,scene:G.scene})}}function uQ(e){let t=e.featuresLength;if(!c(e._features)&&t>0){let n=new Array(t);c(e._polygons)&&e._polygons.createFeatures(e,n),c(e._polylines)&&e._polylines.createFeatures(e,n),c(e._points)&&e._points.createFeatures(e,n),e._features=n}}kc.prototype.hasProperty=function(e,t){return this._batchTable.hasProperty(e,t)};kc.prototype.getFeature=function(e){return c(this._features)||uQ(this),this._features[e]};kc.prototype.applyDebugSettings=function(e,t){c(this._polygons)&&this._polygons.applyDebugSettings(e,t),c(this._polylines)&&this._polylines.applyDebugSettings(e,t),c(this._points)&&this._points.applyDebugSettings(e,t)};kc.prototype.applyStyle=function(e){c(this._features)||uQ(this),c(this._polygons)&&this._polygons.applyStyle(e,this._features),c(this._polylines)&&this._polylines.applyStyle(e,this._features),c(this._points)&&this._points.applyStyle(e,this._features)};kc.prototype.update=function(e,t){let n=!0;c(this._polygons)&&(this._polygons.classificationType=this._tileset.classificationType,this._polygons.debugWireframe=this._tileset.debugWireframe,this._polygons.update(t),n=n&&this._polygons.ready),c(this._polylines)&&(this._polylines.update(t),n=n&&this._polylines.ready),c(this._points)&&(this._points.update(t),n=n&&this._points.ready),c(this._batchTable)&&n&&(c(this._features)||uQ(this),this._batchTable.update(e,t),this._ready=!0)};kc.prototype.pick=function(e,t,n){};kc.prototype.getPolylinePositions=function(e){let t=this._polylines;if(c(t))return t.getPositions(e)};kc.prototype.isDestroyed=function(){return!1};kc.prototype.destroy=function(){return this._polygons=this._polygons&&this._polygons.destroy(),this._polylines=this._polylines&&this._polylines.destroy(),this._points=this._points&&this._points.destroy(),this._batchTable=this._batchTable&&this._batchTable.destroy(),pe(this)};function fBe(e,t,n,i,o,r){let a=t.length,s=0;for(let A=0;A<a;A++){let l=t[A]*3,f=e.slice(s,s+l);s+=l,r(f,n[A],o,i)}}var Y4=kc;function ir(){}ir._maxSortingConcurrency=Math.max($t.hardwareConcurrency-1,1);ir._sorterTaskProcessor=void 0;ir._taskProcessorReady=!1;ir._error=void 0;ir._getSorterTaskProcessor=function(){if(!c(ir._sorterTaskProcessor)){let e=new mo("gaussianSplatSorter",ir._maxSortingConcurrency);e.initWebAssemblyModule({wasmBinaryFile:"ThirdParty/wasm_splats_bg.wasm"}).then(function(t){t?ir._taskProcessorReady=!0:ir._error=new oe("Gaussian splat sorter could not be initialized.")}).catch(t=>{ir._error=t}),ir._sorterTaskProcessor=e}return ir._sorterTaskProcessor};ir.radixSortIndexes=function(e){let t=ir._getSorterTaskProcessor();if(c(ir._error))throw ir._error;if(ir._taskProcessorReady)return t.scheduleTask(e,[e.primitive.positions.buffer])};var dQ=ir;function or(){}or._maxSortingConcurrency=Math.max($t.hardwareConcurrency-1,1);or._textureTaskProcessor=void 0;or._taskProcessorReady=!1;or._error=void 0;or._getTextureTaskProcessor=function(){if(!c(or._textureTaskProcessor)){let e=new mo("gaussianSplatTextureGenerator",or._maxSortingConcurrency);e.initWebAssemblyModule({wasmBinaryFile:"ThirdParty/wasm_splats_bg.wasm"}).then(function(t){t?or._taskProcessorReady=!0:or._error=new oe("Gaussian splat sorter could not be initialized.")}).catch(t=>{or._error=t}),or._textureTaskProcessor=e}return or._textureTaskProcessor};or.generateFromAttributes=function(e){let t=or._getTextureTaskProcessor();if(c(or._error))throw or._error;if(!or._taskProcessorReady)return;let{attributes:n}=e;return t.scheduleTask(e,[n.positions.buffer,n.scales.buffer,n.rotations.buffer,n.colors.buffer])};var q4=or;function uBe(e){let t=new ny;this.shaderBuilder=t,this.uniformMap={},this.renderStateOptions=ut.getState(ut.fromCache({depthTest:{enabled:!0,func:Ms.LESS_OR_EQUAL}})),this.alphaOptions=new h0,this.hasSkipLevelOfDetail=!1,e._useLogDepth&&t.addDefine("LOG_DEPTH_READ_ONLY",void 0,te.FRAGMENT)}var W4=uBe;var J4=`//
// Vertex shader for Gaussian splats.

// The splats are rendered as quads in view space. Splat attributes are loaded from a texture with precomputed 3D covariance.

// Passes local quad coordinates and color to the fragment shader for Gaussian evaluation. 
//
// Discards splats outside the view frustum or with negligible screen size.
//
#if defined(HAS_SPHERICAL_HARMONICS)
const uint coefficientCount[3] = uint[3](3u,8u,15u);
const float SH_C1 = 0.48860251;
const float SH_C2[5] = float[5](
         1.092548430,
        -1.09254843,
        0.315391565,
        -1.09254843,
        0.546274215
);

const float SH_C3[7] = float[7](
         -0.59004358,
        2.890611442,
        -0.45704579,
        0.373176332,
        -0.45704579,
        1.445305721,
        -0.59004358
);

//Retrieve SH coefficient. Currently RG32UI format
uvec2 loadSHCoeff(uint splatID, int index) {
    ivec2 shTexSize = textureSize(u_sphericalHarmonicsTexture, 0);
    uint dims = coefficientCount[uint(u_sphericalHarmonicsDegree)-1u];
    uint splatsPerRow = uint(shTexSize.x) / dims;
    uint shIndex = (splatID%splatsPerRow) * dims + uint(index);
    ivec2 shPosCoord = ivec2(shIndex, splatID / splatsPerRow);
    return texelFetch(u_sphericalHarmonicsTexture, shPosCoord, 0).rg;
}

//Unpack RG32UI half float coefficients to vec3
vec3 halfToVec3(uvec2 packed) {
    return vec3(unpackHalf2x16(packed.x), unpackHalf2x16(packed.y).x);
}

vec3 loadAndExpandSHCoeff(uint splatID, int index) {
    uvec2 coeff = loadSHCoeff(splatID, index);
    return halfToVec3(coeff);
}

vec3 evaluateSH(uint splatID, vec3 viewDir) {
    vec3 result = vec3(0.0);
    int coeffIndex = 0;
    float x = viewDir.x, y = viewDir.y, z = viewDir.z;

    if (u_sphericalHarmonicsDegree >= 1.) {
        vec3 sh1 = loadAndExpandSHCoeff(splatID, coeffIndex++);
        vec3 sh2 = loadAndExpandSHCoeff(splatID, coeffIndex++);
        vec3 sh3 = loadAndExpandSHCoeff(splatID, coeffIndex++);
        result += -SH_C1 * y * sh1 + SH_C1 * z * sh2 - SH_C1 * x * sh3;

        if (u_sphericalHarmonicsDegree >= 2.) {
            float xx = x * x;
            float yy = y * y;
            float zz = z * z;
            float xy = x * y;
            float yz = y * z;
            float xz = x * z;

            vec3 sh4 = loadAndExpandSHCoeff(splatID, coeffIndex++);
            vec3 sh5 = loadAndExpandSHCoeff(splatID, coeffIndex++);
            vec3 sh6 = loadAndExpandSHCoeff(splatID, coeffIndex++);
            vec3 sh7 = loadAndExpandSHCoeff(splatID, coeffIndex++);
            vec3 sh8 = loadAndExpandSHCoeff(splatID, coeffIndex++);
            result += SH_C2[0] * xy * sh4 +
                    SH_C2[1] * yz * sh5 +
                    SH_C2[2] * (2.0f * zz - xx - yy) * sh6 +
                    SH_C2[3] * xz * sh7 +
                    SH_C2[4] * (xx - yy) * sh8;

            if (u_sphericalHarmonicsDegree >= 3.) {
                vec3 sh9 = loadAndExpandSHCoeff(splatID, coeffIndex++);
                vec3 sh10 = loadAndExpandSHCoeff(splatID, coeffIndex++);
                vec3 sh11 = loadAndExpandSHCoeff(splatID, coeffIndex++);
                vec3 sh12 = loadAndExpandSHCoeff(splatID, coeffIndex++);
                vec3 sh13 = loadAndExpandSHCoeff(splatID, coeffIndex++);
                vec3 sh14 = loadAndExpandSHCoeff(splatID, coeffIndex++);
                vec3 sh15 = loadAndExpandSHCoeff(splatID, coeffIndex++);
                result += SH_C3[0] * y * (3.0f * xx - yy) * sh9 +
                        SH_C3[1] * xy * z * sh10 +
                        SH_C3[2] * y * (4.0f * zz - xx - yy) * sh11 +
                        SH_C3[3] * z * (2.0f * zz - 3.0f * xx - 3.0f * yy) * sh12 +
                        SH_C3[4] * x * (4.0f * zz - xx - yy) * sh13 +
                        SH_C3[5] * z * (xx - yy) * sh14 +
                        SH_C3[6] * x * (xx - 3.0f * yy) * sh15;
            }
        }
    }
    return result;
}
#endif

// Transforms and projects splat covariance into screen space and extracts the major and minor axes of the Gaussian ellipsoid
// which is used to calculate the vertex position in clip space.
vec4 calcCovVectors(vec3 viewPos, mat3 Vrk) {
    vec4 t = vec4(viewPos, 1.0);
    vec2 focal = vec2(czm_projection[0][0] * czm_viewport.z, czm_projection[1][1] * czm_viewport.w);

    vec2 J1 = focal / t.z;
    vec2 J2 = -focal * vec2(t.x, t.y) / (t.z * t.z);
    mat3 J = mat3(
        J1.x, 0.0, J2.x,
        0.0, J1.y, J2.y,
        0.0, 0.0, 0.0
    );

    mat3 R = mat3(czm_modelView);

    //transform our covariance into view space
    //ensures orientation is correct
    mat3 Vrk_view = R * Vrk * transpose(R);
    mat3 cov = transpose(J) * Vrk_view * J;

    float diagonal1 = cov[0][0] + .3;
    float offDiagonal = cov[0][1];
    float diagonal2 = cov[1][1] + .3;

    float mid = 0.5 * (diagonal1 + diagonal2);
    float radius = length(vec2((diagonal1 - diagonal2) * 0.5, offDiagonal));
    float lambda1 = mid + radius;
    float lambda2 = max(mid - radius, 0.1);

    vec2 diagonalVector = normalize(vec2(offDiagonal, lambda1 - diagonal1));

    return vec4(
        min(sqrt(2.0 * lambda1), 1024.0) * diagonalVector,
        min(sqrt(2.0 * lambda2), 1024.0) * vec2(diagonalVector.y, -diagonalVector.x)
    );
}

highp vec4 discardVec = vec4(0.0, 0.0, 2.0, 1.0);

void main() {
    uint texIdx = uint(a_splatIndex);
    ivec2 posCoord = ivec2((texIdx & 0x3ffu) << 1, texIdx >> 10);
    vec4 splatPosition = vec4( uintBitsToFloat(uvec4(texelFetch(u_splatAttributeTexture, posCoord, 0))) );

    vec4 splatViewPos = czm_modelView * vec4(splatPosition.xyz, 1.0);
    vec4 clipPosition = czm_projection * splatViewPos;

    float clip = 1.2 * clipPosition.w;
    if (clipPosition.z < -clip || clipPosition.x < -clip || clipPosition.x > clip ||
        clipPosition.y < -clip || clipPosition.y > clip) {
        gl_Position = vec4(0.0, 0.0, 2.0, 1.0);
        return;
    }

    ivec2 covCoord = ivec2(((texIdx & 0x3ffu) << 1) | 1u, texIdx >> 10);
    uvec4 covariance = uvec4(texelFetch(u_splatAttributeTexture, covCoord, 0));

    gl_Position = clipPosition;

    vec2 u1 = unpackHalf2x16(covariance.x) ;
    vec2 u2 = unpackHalf2x16(covariance.y);
    vec2 u3 = unpackHalf2x16(covariance.z);
    mat3 Vrk = mat3(u1.x, u1.y, u2.x, u1.y, u2.y, u3.x, u2.x, u3.x, u3.y);

    vec4 covVectors = calcCovVectors(splatViewPos.xyz, Vrk);

    if (dot(covVectors.xy, covVectors.xy) < 4.0 && dot(covVectors.zw, covVectors.zw) < 4.0) {
        gl_Position = discardVec;
        return;
    }

    vec2 corner = vec2((gl_VertexID << 1) & 2, gl_VertexID & 2) - 1.;

    gl_Position += vec4((corner.x * covVectors.xy + corner.y * covVectors.zw) / czm_viewport.zw * gl_Position.w, 0, 0);
    gl_Position.z = clamp(gl_Position.z, -abs(gl_Position.w), abs(gl_Position.w));

    v_vertPos = corner ;
    v_splatColor = vec4(covariance.w & 0xffu, (covariance.w >> 8) & 0xffu, (covariance.w >> 16) & 0xffu, (covariance.w >> 24) & 0xffu) / 255.0;
#if defined(HAS_SPHERICAL_HARMONICS)
    vec4 splatWC = czm_inverseView * splatViewPos;
    vec3 viewDirModel = normalize(u_inverseModelRotation * (splatWC.xyz - u_cameraPositionWC.xyz));

    v_splatColor.rgb += evaluateSH(texIdx, viewDirModel).rgb;
#endif
    v_splitDirection = u_splitDirection;
}`;var K4=`//
// Fragment shader for Gaussian splats.
// Renders a Gaussian splat within a quad, discarding fragments outside the unit circle.
// Applies an approximate Gaussian falloff based on distance from the center and outputs
// a color modulated by the alpha and Gaussian weight.
//
void main() {
    if (v_splitDirection < 0.0 && gl_FragCoord.x > czm_splitPosition) discard;
    if (v_splitDirection > 0.0 && gl_FragCoord.x < czm_splitPosition) discard;

    float A = -dot(v_vertPos, v_vertPos);
    if (A < -4.) {
        discard;
    }

    float B = exp(A * 4.) * v_splatColor.a ;
    out_FragColor = vec4(v_splatColor.rgb * B , B);
}
`;var _p=new O,Z4=new O,Lu=new O,dBe=new O,Ma={IDLE:0,WAITING:1,SORTING:2,SORTED:3,ERROR:4};function hBe(e,t){return new gn({context:e,source:{width:t.width,height:t.height,arrayBufferView:t.data},preMultiplyAlpha:!1,skipColorSpaceConversion:!0,pixelFormat:Bt.RG_INTEGER,pixelDatatype:_t.UNSIGNED_INT,flipY:!1,sampler:dn.NEAREST})}function X4(e,t){return new gn({context:e,source:{width:t.width,height:t.height,arrayBufferView:t.data},preMultiplyAlpha:!1,skipColorSpaceConversion:!0,pixelFormat:Bt.RGBA_INTEGER,pixelDatatype:_t.UNSIGNED_INT,flipY:!1,sampler:dn.NEAREST})}function As(e){e=e??k.EMPTY_OBJECT,this._positions=void 0,this._rotations=void 0,this._scales=void 0,this._colors=void 0,this._indexes=void 0,this._numSplats=0,this._needsGaussianSplatTexture=!0,this._prevViewMatrix=new O,this._debugShowBoundingVolume=e.debugShowBoundingVolume??!1,this.gaussianSplatTexture=void 0,this.sphericalHarmonicsTexture=void 0,this._lastTextureWidth=0,this._lastTextureHeight=0,this._vertexArray=void 0,this._vertexArrayLen=-1,this._splitDirection=Zo.NONE,this._dirty=!1,this._tileset=e.tileset,this._baseTilesetUpdate=this._tileset.update,this._tileset.update=this._wrappedUpdate.bind(this),this._tileset.tileLoad.addEventListener(this.onTileLoad,this),this._tileset.tileVisible.addEventListener(this.onTileVisible,this),this.selectedTileLength=0,this._ready=!1,this._hasGaussianSplatTexture=!1,this._gaussianSplatTexturePending=!1,this._drawCommand=void 0,this._rootTransform=void 0,this._axisCorrectionMatrix=tt.getAxisCorrectionMatrix(fi.Y,fi.X,new O),this._isDestroyed=!1,this._sorterState=Ma.IDLE,this._sorterPromise=void 0,this._sorterError=void 0}Object.defineProperties(As.prototype,{ready:{get:function(){return this._ready}},splitDirection:{get:function(){return this._splitDirection},set:function(e){this._splitDirection!==e&&(this._splitDirection=e,this._dirty=!0)}}});As.prototype._wrappedUpdate=function(e){this._baseTilesetUpdate.call(this._tileset,e),this.update(e)};As.prototype.destroy=function(){this._positions=void 0,this._rotations=void 0,this._scales=void 0,this._colors=void 0,this._indexes=void 0,c(this.gaussianSplatTexture)&&(this.gaussianSplatTexture.destroy(),this.gaussianSplatTexture=void 0);let e=this._drawCommand;return c(e)&&(e.shaderProgram=e.shaderProgram&&e.shaderProgram.destroy()),c(this._vertexArray)&&(this._vertexArray.destroy(),this._vertexArray=void 0),this._tileset.update=this._baseTilesetUpdate.bind(this._tileset),pe(this)};As.prototype.isDestroyed=function(){return this._isDestroyed};As.prototype.onTileLoad=function(e){this._dirty=!0};As.prototype.onTileVisible=function(e){};As.transformTile=function(e){let t=e.computedTransform,n=e.content.gltfPrimitive,i=e.tileset.gaussianSplatPrimitive,o=O.multiplyTransformation(t,i._axisCorrectionMatrix,_p);O.multiplyTransformation(o,e.content.worldTransform,o);let r=O.multiply(e.tileset.modelMatrix,O.fromArray(e.tileset.root.transform),Z4),a=O.inverse(r,Lu),s=O.multiplyTransformation(a,o,_p),A=e.content._originalPositions,l=e.content._originalRotations,f=e.content._originalScales,h=tt.getAttributeBySemantic(n,Pe.POSITION).typedArray,m=tt.getAttributeBySemantic(n,Pe.ROTATION).typedArray,p=tt.getAttributeBySemantic(n,Pe.SCALE).typedArray,g=new u,C=new qe,_=new u;for(let E=0;E<A.length/3;++E)g.x=A[E*3],g.y=A[E*3+1],g.z=A[E*3+2],C.x=l[E*4],C.y=l[E*4+1],C.z=l[E*4+2],C.w=l[E*4+3],_.x=f[E*3],_.y=f[E*3+1],_.z=f[E*3+2],O.fromTranslationQuaternionRotationScale(g,C,_,Lu),O.multiplyTransformation(s,Lu,Lu),O.getTranslation(Lu,g),O.getRotation(Lu,C),O.getScale(Lu,_),h[E*3]=g.x,h[E*3+1]=g.y,h[E*3+2]=g.z,m[E*4]=C.x,m[E*4+1]=C.y,m[E*4+2]=C.z,m[E*4+3]=C.w,p[E*3]=_.x,p[E*3+1]=_.y,p[E*3+2]=_.z};As.generateSplatTexture=function(e,t){e._gaussianSplatTexturePending=!0;let n=q4.generateFromAttributes({attributes:{positions:new Float32Array(e._positions),scales:new Float32Array(e._scales),rotations:new Float32Array(e._rotations),colors:new Uint8Array(e._colors)},count:e._numSplats});if(!c(n)){e._gaussianSplatTexturePending=!1;return}n.then(i=>{if(!e._gaussianSplatTexture)e.gaussianSplatTexture=X4(t.context,i);else if(e._lastTextureHeight!==i.height||e._lastTextureWidth!==i.width){let o=e.gaussianSplatTexture;e._gaussianSplatTexture=X4(t.context,i),o.destroy()}else e.gaussianSplatTexture.copyFrom({source:{width:i.width,height:i.height,arrayBufferView:i.data}});e._lastTextureHeight=i.height,e._lastTextureWidth=i.width,e._hasGaussianSplatTexture=!0,e._needsGaussianSplatTexture=!1,e._gaussianSplatTexturePending=!1,(!c(e._indexes)||e._indexes.length<e._numSplats)&&(e._indexes=new Uint32Array(e._numSplats));for(let o=0;o<e._numSplats;++o)e._indexes[o]=o}).catch(i=>{console.error("Error generating Gaussian splat texture:",i),e._gaussianSplatTexturePending=!1})};As.buildGSplatDrawCommand=function(e,t){let n=e._tileset,i=new W4(e),{shaderBuilder:o}=i,r=i.renderStateOptions;r.cull.enabled=!1,r.depthMask=!1,r.depthTest.enabled=!0,r.blending=qn.PRE_MULTIPLIED_ALPHA_BLEND,i.alphaOptions.pass=Ye.GAUSSIAN_SPLATS,o.addAttribute("vec2","a_screenQuadPosition"),o.addAttribute("float","a_splatIndex"),o.addVarying("vec4","v_splatColor"),o.addVarying("vec2","v_vertPos"),o.addUniform("float","u_splitDirection",te.VERTEX),o.addVarying("float","v_splitDirection"),o.addUniform("highp usampler2D","u_splatAttributeTexture",te.VERTEX),o.addUniform("float","u_sphericalHarmonicsDegree",te.VERTEX),o.addUniform("float","u_splatScale",te.VERTEX),o.addUniform("vec3","u_cameraPositionWC",te.VERTEX),o.addUniform("mat3","u_inverseModelRotation",te.VERTEX);let a=i.uniformMap;a.u_splatAttributeTexture=function(){return e.gaussianSplatTexture},e._sphericalHarmonicsDegree>0&&(o.addDefine("HAS_SPHERICAL_HARMONICS","1",te.VERTEX),o.addUniform("highp usampler2D","u_sphericalHarmonicsTexture",te.VERTEX),a.u_sphericalHarmonicsTexture=function(){return e.sphericalHarmonicsTexture}),a.u_sphericalHarmonicsDegree=function(){return e._sphericalHarmonicsDegree},a.u_cameraPositionWC=function(){return u.clone(t.camera.positionWC)},a.u_inverseModelRotation=function(){let p=e._tileset,g=O.multiply(p.modelMatrix,O.fromArray(p.root.transform),_p);return O.getRotation(O.inverse(g,Lu),dBe)},a.u_splitDirection=function(){return e.splitDirection},i.instanceCount=e._numSplats,i.count=4,i.primitiveType=Ce.TRIANGLE_STRIP,o.addVertexLines(J4),o.addFragmentLines(K4);let s=o.buildShaderProgram(t.context),A=Ne(ut.fromCache(i.renderStateOptions),!0);A.cull.face=tt.getCullFace(n.modelMatrix,Ce.TRIANGLE_STRIP),A=ut.fromCache(A);let l={screenQuadPosition:0,splatIndex:2},f=new Lt.Attribute;if(f.name="_SPLAT_INDEXES",f.typedArray=e._indexes,f.componentDatatype=N.UNSIGNED_INT,f.type=st.SCALAR,f.normalized=!1,f.count=i.instanceCount,f.constant=0,f.instanceDivisor=1,!c(e._vertexArray)||e._indexes.length>e._vertexArrayLen){let p=new ze({attributes:{screenQuadPosition:new ue({componentDatatype:N.FLOAT,componentsPerAttribute:2,values:[-1,-1,1,-1,1,1,-1,1],name:"_SCREEN_QUAD_POS",variableName:"screenQuadPosition"}),splatIndex:{...f,variableName:"splatIndex"}},primitiveType:Ce.TRIANGLE_STRIP});e._vertexArray=go.fromGeometry({context:t.context,geometry:p,attributeLocations:l,bufferUsage:Me.DYNAMIC_DRAW,interleave:!1})}else e._vertexArray.getAttribute(1).vertexBuffer.copyFromArrayView(e._indexes);e._vertexArrayLen=e._indexes.length;let h=O.multiply(n.modelMatrix,O.fromArray(n.root.transform),Z4),m=new mt({boundingVolume:n.boundingSphere,modelMatrix:h,uniformMap:a,renderState:A,vertexArray:e._vertexArray,shaderProgram:s,cull:r.cull.enabled,pass:Ye.GAUSSIAN_SPLATS,count:i.count,owner:this,instanceCount:i.instanceCount,primitiveType:Ce.TRIANGLE_STRIP,debugShowBoundingVolume:n.debugShowBoundingVolume,castShadows:!1,receiveShadows:!1});e._drawCommand=m};As.prototype.update=function(e){let t=this._tileset;if(c(this._rootTransform)||(this._rootTransform=t.root.computedTransform),!(!t.show||t._selectedTiles.length===0)){if(this._drawCommand&&e.commandList.push(this._drawCommand),t._modelMatrixChanged){this._dirty=!0;return}if(e.passes.pick!==!0){if(this.splitDirection!==t.splitDirection&&(this.splitDirection=t.splitDirection),this._sorterState===Ma.IDLE){if(!this._dirty&&O.equals(e.camera.viewMatrix,this._prevViewMatrix))return;if(t._selectedTiles.length!==0&&t._selectedTiles.length!==this.selectedTileLength){this._numSplats=0,this._positions=void 0,this._rotations=void 0,this._scales=void 0,this._colors=void 0,this._indexes=void 0,this._shData=void 0,this._needsGaussianSplatTexture=!0,this._gaussianSplatTexturePending=!1;let n=t._selectedTiles,i=n.reduce((a,s)=>a+s.content.pointsLength,0),o=(a,s)=>{let A,l=0;for(let f of n){let h=f.content.gltfPrimitive,m=s(h);c(A)||(A=N.createTypedArray(a,i*st.getNumberOfComponents(m.type))),A.set(m.typedArray,l),l+=m.typedArray.length}return A},r=()=>{let a=0;for(let s of n){let A=s.content.packedSphericalHarmonicsData;if(s.content.sphericalHarmonicsDegree>0){if(!c(this._shData)){let l;switch(s.content.sphericalHarmonicsDegree){case 1:l=9;break;case 2:l=24;break;case 3:l=45}this._shData=new Uint32Array(i*(l*(2/3)))}this._shData.set(A,a),a+=A.length}}};this._positions=o(N.FLOAT,a=>tt.getAttributeBySemantic(a,Pe.POSITION)),this._scales=o(N.FLOAT,a=>tt.getAttributeBySemantic(a,Pe.SCALE)),this._rotations=o(N.FLOAT,a=>tt.getAttributeBySemantic(a,Pe.ROTATION)),this._colors=o(N.UNSIGNED_BYTE,a=>tt.getAttributeBySemantic(a,Pe.COLOR)),r(),this._sphericalHarmonicsDegree=n[0].content.sphericalHarmonicsDegree,this._numSplats=i,this.selectedTileLength=t._selectedTiles.length}if(this._numSplats===0)return;if(this._needsGaussianSplatTexture){if(!this._gaussianSplatTexturePending&&(As.generateSplatTexture(this,e),c(this._shData))){let n=this.sphericalHarmonicsTexture,i=pn.maximumTextureSize,o=t._selectedTiles[0].content.sphericalHarmonicsCoefficientCount/3,r=Math.floor(i/o),a=r*(o*2),s=new Uint32Array(i*Math.ceil(this._numSplats/r)*2),A=0;for(let l=0;A<this._shData.length;l+=i*2)s.set(this._shData.subarray(A,A+a),l),A+=a;this.sphericalHarmonicsTexture=hBe(e.context,{data:s,width:i,height:Math.ceil(this._numSplats/r)}),c(n)&&n.destroy()}return}if(O.clone(e.camera.viewMatrix,this._prevViewMatrix),O.multiply(e.camera.viewMatrix,this._rootTransform,_p),c(this._sorterPromise)||(this._sorterPromise=dQ.radixSortIndexes({primitive:{positions:new Float32Array(this._positions),modelView:Float32Array.from(_p),count:this._numSplats},sortType:"Index"})),!c(this._sorterPromise)){this._sorterState=Ma.WAITING;return}this._sorterPromise.catch(n=>{this._sorterState=Ma.ERROR,this._sorterError=n}),this._sorterPromise.then(n=>{this._indexes=n,this._sorterState=Ma.SORTED})}else if(this._sorterState===Ma.WAITING){if(c(this._sorterPromise)||(this._sorterPromise=dQ.radixSortIndexes({primitive:{positions:new Float32Array(this._positions),modelView:Float32Array.from(_p),count:this._numSplats},sortType:"Index"})),!c(this._sorterPromise)){this._sorterState=Ma.WAITING;return}this._sorterPromise.catch(n=>{this._sorterState=Ma.ERROR,this._sorterError=n}),this._sorterPromise.then(n=>{this._indexes=n,this._sorterState=Ma.SORTED}),this._sorterState=Ma.SORTING}else{if(this._sorterState===Ma.SORTING)return;if(this._sorterState===Ma.SORTED)As.buildGSplatDrawCommand(this,e),this._sorterState=Ma.IDLE,this._dirty=!1,this._sorterPromise=void 0;else if(this._sorterState===Ma.ERROR)throw this._sorterError}this._dirty=!1}}};var hQ=As;function ls(e,t,n,i){this._tileset=t,this._tile=n,this._resource=i,this._loader=e,c(this._tileset.gaussianSplatPrimitive)||(this._tileset.gaussianSplatPrimitive=new hQ({tileset:this._tileset})),this._originalPositions=void 0,this._originalRotations=void 0,this._originalScales=void 0,this.gltfPrimitive=void 0,this.worldTransform=void 0,this.featurePropertiesDirty=!1,this._metadata=void 0,this._group=void 0,this._ready=!1,this._transformed=!1,this._sphericalHarmonicsDegree=0,this._sphericalHarmonicsCoefficientCount=0,this._packedSphericalHarmonicsData=void 0}ls.tilesetRequiresGaussianSplattingExt=function(e){let t=!1,n=!1;return e.isGltfExtensionRequired instanceof Function&&(t=e.isGltfExtensionRequired("KHR_gaussian_splatting")&&e.isGltfExtensionRequired("KHR_gaussian_splatting_compression_spz_2"),n=e.isGltfExtensionRequired("KHR_spz_gaussian_splats_compression")),n&&wr("KHR_spz_gaussian_splats_compression",`Support for the original KHR_spz_gaussian_splats_compression extension has been deprecated in favor of the up to date KHR_gaussian_splatting and KHR_gaussian_splatting_compression_spz_2 extensions and will be removed in CesiumJS 1.135.

Please retile your tileset with the KHR_gaussian_splatting and KHR_gaussian_splatting_compression_spz_2 extensions.`),t||n};Object.defineProperties(ls.prototype,{featuresLength:{get:function(){return 0}},pointsLength:{get:function(){return this.gltfPrimitive.attributes[0].count}},trianglesLength:{get:function(){return 0}},geometryByteLength:{get:function(){return this.gltfPrimitive.attributes.reduce((e,t)=>e+t.byteLength,0)}},texturesByteLength:{get:function(){let e=this._tileset.gaussianSplatPrimitive.gaussianSplatTexture,t=this._tileset.gaussianSplatPrimitive.selectedTileLength;return!c(e)||t===0?0:e.sizeInBytes/t}},batchTableByteLength:{get:function(){return 0}},innerContents:{get:function(){}},ready:{get:function(){return this._ready}},transformed:{get:function(){return this._transformed}},tileset:{get:function(){return this._tileset}},tile:{get:function(){return this._tile}},url:{get:function(){return this._resource.getUrlComponent(!0)}},batchTable:{get:function(){}},metadata:{get:function(){return this._metadata},set:function(e){this._metadata=e}},group:{get:function(){return this._group},set:function(e){this._group=e}},sphericalHarmonicsCoefficientCount:{get:function(){return this._sphericalHarmonicsCoefficientCount}},sphericalHarmonicsDegree:{get:function(){return this._sphericalHarmonicsDegree}},packedSphericalHarmonicsData:{get:function(){return this._packedSphericalHarmonicsData}}});function mBe(e){return`${e.startsWith("KHR_gaussian_splatting:")?"KHR_gaussian_splatting:":"_"}SH_DEGREE_`}function pBe(e){switch(e.filter(n=>n.name.includes("SH_DEGREE_")).length){default:case 0:return{l:0,n:0};case 3:return{l:1,n:9};case 8:return{l:2,n:24};case 15:return{l:3,n:45}}}var $4=new ArrayBuffer(4),gBe=new Float32Array($4),CBe=new Uint32Array($4);function mQ(e){gBe[0]=e;let t=CBe[0],n=t>>31&1,i=t>>23&255,o=t&8388607,r;if(i===255)r=n<<15|31744|(o?512:0);else if(i===0)r=n<<15;else{let a=i-127+15;a>=31?r=n<<15|31744:a<=0?r=n<<15:r=n<<15|a<<10|o>>>13}return r}function _Be(e){let t=mBe(e),n="_COEF_",i=t.length,o=e.indexOf(n,i),r=parseInt(e.slice(i,o),10),a=parseInt(e.slice(o+n.length),10);return{l:r,n:a}}function EBe(e){let t=e.sphericalHarmonicsDegree,n=e.sphericalHarmonicsCoefficientCount,i=e.pointsLength*(n*(2/3)),o=new Uint32Array(i),r=e.gltfPrimitive.attributes.filter(l=>l.name.includes("SH_DEGREE_")),a=0,s=[0,9,24];switch(t){case 1:a=9;break;case 2:a=24;break;case 3:a=45;break}r.sort((l,f)=>l.name<f.name?-1:l.name>f.name?1:0);let A=a*(2/3);for(let l=0;l<r.length;l++){let{l:f,n:h}=_Be(r[l].name);for(let m=0;m<e.pointsLength;m++){let p=s[f-1]*2/3,g=m*A+p+h*2,C=m*3;o[g]=mQ(r[l].typedArray[C])|mQ(r[l].typedArray[C+1])<<16,o[g+1]=mQ(r[l].typedArray[C+2])}}return o}ls.fromGltf=async function(e,t,n,i){let o=n,r=ke.createIfNeeded(o),a={releaseGltfJson:!1,upAxis:fi.Y,forwardAxis:fi.Z};c(i.asset)?(a.gltfJson=i,a.baseResource=r,a.gltfResource=r):i instanceof Uint8Array?(a.typedArray=i,a.baseResource=r,a.gltfResource=r):a.gltfResource=ke.createIfNeeded(i);let s=new Cu(a);try{await s.load()}catch(A){throw s.destroy(),new oe(`Failed to load glTF: ${A.message}`)}return new ls(s,e,t,n)};ls.prototype.update=function(e,t){let n=this._loader;if(this._ready){!this._transformed&&e.root.content.ready&&(hQ.transformTile(this._tile),this._transformed=!0);return}if(t.afterRender.push(()=>!0),!c(n)){this._ready=!0;return}if(this._resourcesLoaded){this.gltfPrimitive=n.components.scene.nodes[0].primitives[0],this.worldTransform=n.components.scene.nodes[0].matrix,this._ready=!0,this._originalPositions=new Float32Array(tt.getAttributeBySemantic(this.gltfPrimitive,Pe.POSITION).typedArray),this._originalRotations=new Float32Array(tt.getAttributeBySemantic(this.gltfPrimitive,Pe.ROTATION).typedArray),this._originalScales=new Float32Array(tt.getAttributeBySemantic(this.gltfPrimitive,Pe.SCALE).typedArray);let{l:i,n:o}=pBe(this.gltfPrimitive.attributes);this._sphericalHarmonicsDegree=i,this._sphericalHarmonicsCoefficientCount=o,this._packedSphericalHarmonicsData=EBe(this);return}this._resourcesLoaded=n.process(t)};ls.prototype.hasProperty=function(e,t){return!1};ls.prototype.getFeature=function(e){};ls.prototype.applyDebugSettings=function(e,t){};ls.prototype.applyStyle=function(e){};ls.prototype.pick=function(e,t,n){};ls.prototype.isDestroyed=function(){return this.isDestroyed};ls.prototype.destroy=function(){return this.splatPrimitive=void 0,c(this._tileset.gaussianSplatPrimitive)&&!this._tileset.gaussianSplatPrimitive.isDestroyed()&&this._tileset.gaussianSplatPrimitive.destroy(),this._tileset.gaussianSplatPrimitive=void 0,this._tile=void 0,this._tileset=void 0,this._resource=void 0,this._ready=!1,this._group=void 0,this._metadata=void 0,this._resourcesLoaded=!1,c(this._loader)&&(this._loader.destroy(),this._loader=void 0),pe(this)};var V_=ls;var e9={b3dm:function(e,t,n,i,o){return LA.fromB3dm(e,t,n,i,o)},pnts:function(e,t,n,i,o){return LA.fromPnts(e,t,n,i,o)},i3dm:function(e,t,n,i,o){return LA.fromI3dm(e,t,n,i,o)},cmpt:function(e,t,n,i,o){return b2.fromTileType(e,t,n,i,o,e9)},externalTileset:function(e,t,n,i){return Ej.fromJson(e,t,n,i)},geom:function(e,t,n,i,o){return new z2(e,t,n,i,o)},vctr:function(e,t,n,i,o){return new Y4(e,t,n,i,o)},subt:function(e,t,n,i,o){return _w.fromSubtreeJson(e,t,n,void 0,i,o)},subtreeJson:function(e,t,n,i){return _w.fromSubtreeJson(e,t,n,i)},glb:function(e,t,n,i,o){if(i.byteLength<12)throw new oe("Invalid glb content");let s=new DataView(i,o).getUint32(8,!0),A=new Uint8Array(i,o,s);return V_.tilesetRequiresGaussianSplattingExt(e)?V_.fromGltf(e,t,n,A):LA.fromGltf(e,t,n,A)},gltf:function(e,t,n,i){return V_.tilesetRequiresGaussianSplattingExt(e)?V_.fromGltf(e,t,n,i):LA.fromGltf(e,t,n,i)},geoJson:function(e,t,n,i){return LA.fromGeoJson(e,t,n,i)}},R0=e9;var IBe={UNLOADED:0,LOADING:1,PROCESSING:2,READY:3,EXPIRED:4,FAILED:5},ji=Object.freeze(IBe);var Uc={BATCHED_3D_MODEL:"b3dm",INSTANCED_3D_MODEL:"i3dm",COMPOSITE:"cmpt",POINT_CLOUD:"pnts",VECTOR:"vctr",GEOMETRY:"geom",GLTF:"gltf",GLTF_BINARY:"glb",IMPLICIT_SUBTREE:"subt",IMPLICIT_SUBTREE_JSON:"subtreeJson",EXTERNAL_TILESET:"externalTileset",MULTIPLE_CONTENT:"multipleContent",GEOJSON:"geoJson",VOXEL_BINARY:"voxl",VOXEL_JSON:"voxelJson"};Uc.isBinaryFormat=function(e){switch(e){case Uc.BATCHED_3D_MODEL:case Uc.INSTANCED_3D_MODEL:case Uc.COMPOSITE:case Uc.POINT_CLOUD:case Uc.VECTOR:case Uc.GEOMETRY:case Uc.IMPLICIT_SUBTREE:case Uc.VOXEL_BINARY:case Uc.GLTF_BINARY:return!0;default:return!1}};var mr=Object.freeze(Uc);var yBe={NOT_COMPUTED:-1,USE_OPTIMIZATION:1,SKIP_OPTIMIZATION:0},Jl=Object.freeze(yBe);var jo={RENDER:0,PICK:1,SHADOW:2,PRELOAD:3,PRELOAD_FLIGHT:4,REQUEST_RENDER_MODE_DEFER_CHECK:5,MOST_DETAILED_PRELOAD:6,MOST_DETAILED_PICK:7,NUMBER_OF_PASSES:8},Kl=new Array(jo.NUMBER_OF_PASSES);Kl[jo.RENDER]=Object.freeze({pass:jo.RENDER,isRender:!0,requestTiles:!0,ignoreCommands:!1});Kl[jo.PICK]=Object.freeze({pass:jo.PICK,isRender:!1,requestTiles:!1,ignoreCommands:!1});Kl[jo.SHADOW]=Object.freeze({pass:jo.SHADOW,isRender:!1,requestTiles:!0,ignoreCommands:!1});Kl[jo.PRELOAD]=Object.freeze({pass:jo.PRELOAD,isRender:!1,requestTiles:!0,ignoreCommands:!0});Kl[jo.PRELOAD_FLIGHT]=Object.freeze({pass:jo.PRELOAD_FLIGHT,isRender:!1,requestTiles:!0,ignoreCommands:!0});Kl[jo.REQUEST_RENDER_MODE_DEFER_CHECK]=Object.freeze({pass:jo.REQUEST_RENDER_MODE_DEFER_CHECK,isRender:!1,requestTiles:!0,ignoreCommands:!0});Kl[jo.MOST_DETAILED_PRELOAD]=Object.freeze({pass:jo.MOST_DETAILED_PRELOAD,isRender:!1,requestTiles:!0,ignoreCommands:!0});Kl[jo.MOST_DETAILED_PICK]=Object.freeze({pass:jo.MOST_DETAILED_PICK,isRender:!1,requestTiles:!1,ignoreCommands:!1});jo.getPassOptions=function(e){return Kl[e]};var fs=Object.freeze(jo);function UA(e,t){this._tileset=e,this._tile=t,this.featurePropertiesDirty=!1}Object.defineProperties(UA.prototype,{featuresLength:{get:function(){return 0}},pointsLength:{get:function(){return 0}},trianglesLength:{get:function(){return 0}},geometryByteLength:{get:function(){return 0}},texturesByteLength:{get:function(){return 0}},batchTableByteLength:{get:function(){return 0}},innerContents:{get:function(){}},ready:{get:function(){return!0}},tileset:{get:function(){return this._tileset}},tile:{get:function(){return this._tile}},url:{get:function(){}},metadata:{get:function(){},set:function(e){}},batchTable:{get:function(){}},group:{get:function(){},set:function(e){}}});UA.prototype.hasProperty=function(e,t){return!1};UA.prototype.getFeature=function(e){};UA.prototype.applyDebugSettings=function(e,t){};UA.prototype.applyStyle=function(e){};UA.prototype.update=function(e,t){};UA.prototype.pick=function(e,t,n){};UA.prototype.isDestroyed=function(){return!1};UA.prototype.destroy=function(){return pe(this)};var pQ=UA;function Xl(e){e=e??k.EMPTY_OBJECT;let t=e.content,n=e.class;this._class=n,this._properties=t.properties,this._extensions=t.extensions,this._extras=t.extras}Object.defineProperties(Xl.prototype,{class:{get:function(){return this._class}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}}});Xl.prototype.hasProperty=function(e){return en.hasProperty(e,this._properties,this._class)};Xl.prototype.hasPropertyBySemantic=function(e){return en.hasPropertyBySemantic(e,this._properties,this._class)};Xl.prototype.getPropertyIds=function(e){return en.getPropertyIds(this._properties,this._class,e)};Xl.prototype.getProperty=function(e){return en.getProperty(e,this._properties,this._class)};Xl.prototype.setProperty=function(e,t){return en.setProperty(e,t,this._properties,this._class)};Xl.prototype.getPropertyBySemantic=function(e){return en.getPropertyBySemantic(e,this._properties,this._class)};Xl.prototype.setPropertyBySemantic=function(e,t){return en.setPropertyBySemantic(e,t,this._properties,this._class)};var t9=Xl;function gQ(e,t){let n=Wn(t,"3DTILES_metadata")?t.extensions["3DTILES_metadata"]:t.metadata;if(!c(n))return;if(!c(e.schema)){gQ._oneTimeWarning("findContentMetadata-missing-root-schema","Could not find a metadata schema for content metadata. For tilesets that contain external tilesets, make sure the schema is added to the root tileset.json.");return}let i=e.schema.classes??k.EMPTY_OBJECT;if(c(n.class)){let o=i[n.class];return new t9({content:n,class:o})}}gQ._oneTimeWarning=jt;var v0=gQ;function bBe(e,t){let n=e.metadataExtension;if(!c(n))return;let i=n.groups,o=Wn(t,"3DTILES_metadata")?t.extensions["3DTILES_metadata"].group:t.group;if(typeof o=="number")return i[o];let r=n.groupIds.findIndex(function(a){return a===o});return r>=0?i[r]:void 0}var P0=bBe;function Zl(e){e=e??k.EMPTY_OBJECT;let t=e.tile,n=e.class;this._class=n,this._properties=t.properties,this._extensions=t.extensions,this._extras=t.extras}Object.defineProperties(Zl.prototype,{class:{get:function(){return this._class}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}}});Zl.prototype.hasProperty=function(e){return en.hasProperty(e,this._properties,this._class)};Zl.prototype.hasPropertyBySemantic=function(e){return en.hasPropertyBySemantic(e,this._properties,this._class)};Zl.prototype.getPropertyIds=function(e){return en.getPropertyIds(this._properties,this._class,e)};Zl.prototype.getProperty=function(e){return en.getProperty(e,this._properties,this._class)};Zl.prototype.setProperty=function(e,t){return en.setProperty(e,t,this._properties,this._class)};Zl.prototype.getPropertyBySemantic=function(e){return en.getPropertyBySemantic(e,this._properties,this._class)};Zl.prototype.setPropertyBySemantic=function(e,t){return en.setPropertyBySemantic(e,t,this._properties,this._class)};var n9=Zl;function CQ(e,t){let n=Wn(t,"3DTILES_metadata")?t.extensions["3DTILES_metadata"]:t.metadata;if(!c(n))return;if(!c(e.schema)){CQ._oneTimeWarning("findTileMetadata-missing-root-schema","Could not find a metadata schema for tile metadata. For tilesets that contain external tilesets, make sure the schema is added to the root tileset.json.");return}let i=e.schema.classes??k.EMPTY_OBJECT;if(c(n.class)){let o=i[n.class];return new n9({tile:n,class:o})}}CQ._oneTimeWarning=jt;var i9=CQ;function BBe(e){let t=new Uint8Array(e),n=Xf(t);if(n==="glTF"&&(n="glb"),mr.isBinaryFormat(n))return{contentType:n,binaryPayload:t};let i=xBe(t);if(c(i.root))return{contentType:mr.EXTERNAL_TILESET,jsonPayload:i};if(c(i.asset))return{contentType:mr.GLTF,jsonPayload:i};if(c(i.tileAvailability))return{contentType:mr.IMPLICIT_SUBTREE_JSON,jsonPayload:i};if(c(i.type))return{contentType:mr.GEOJSON,jsonPayload:i};if(c(i.voxelTable))return{contentType:mr.VOXEL_JSON,jsonPayload:i};throw new oe("Invalid tile content.")}function xBe(e){let t;try{t=_o(e)}catch{throw new oe("Invalid tile content.")}return t}var M0=BBe;function ic(e,t,n,i){this._tileset=e,this._tile=t,this._tilesetResource=n,this._contents=[],this._contentsCreated=!1;let o=c(i.contents)?i.contents:i.content;this._innerContentHeaders=o,this._requestsInFlight=0,this._cancelCount=0,this._externalTilesetCount=0;let r=this._innerContentHeaders.length;this._arrayFetchPromises=new Array(r),this._requests=new Array(r),this._ready=!1,this._innerContentResources=new Array(r),this._serverKeys=new Array(r);for(let a=0;a<r;a++){let s=n.getDerivedResource({url:o[a].uri}),A=lA.getServerKey(s.getUrlComponent());this._innerContentResources[a]=s,this._serverKeys[a]=A}}Object.defineProperties(ic.prototype,{featurePropertiesDirty:{get:function(){let e=this._contents,t=e.length;for(let n=0;n<t;++n)if(e[n].featurePropertiesDirty)return!0;return!1},set:function(e){let t=this._contents,n=t.length;for(let i=0;i<n;++i)t[i].featurePropertiesDirty=e}},featuresLength:{get:function(){return 0}},pointsLength:{get:function(){return 0}},trianglesLength:{get:function(){return 0}},geometryByteLength:{get:function(){return 0}},texturesByteLength:{get:function(){return 0}},batchTableByteLength:{get:function(){return 0}},innerContents:{get:function(){return this._contents}},ready:{get:function(){return this._contentsCreated?this._ready:!1}},tileset:{get:function(){return this._tileset}},tile:{get:function(){return this._tile}},url:{get:function(){}},metadata:{get:function(){},set:function(){}},batchTable:{get:function(){}},group:{get:function(){},set:function(){}},innerContentUrls:{get:function(){return this._innerContentHeaders.map(function(e){return e.uri})}}});function _Q(e,t){e._requestsInFlight+=t,e.tileset.statistics.numberOfPendingRequests+=t}function o9(e,t){e._cancelCount++,e._tile._contentState=t;let n=e.tileset.statistics;n.numberOfPendingRequests-=e._requestsInFlight,n.numberOfAttemptedRequests+=e._requestsInFlight,e._requestsInFlight=0;let i=e._innerContentHeaders.length;e._arrayFetchPromises=new Array(i)}ic.prototype.requestInnerContents=function(){if(!TBe(this._serverKeys)){this.tileset.statistics.numberOfAttemptedRequests+=this._serverKeys.length;return}let e=this._innerContentHeaders;_Q(this,e.length);let t=this._cancelCount;for(let n=0;n<e.length;n++)this._arrayFetchPromises[n]=SBe(this,n,t,this._tile._contentState);return wBe(this)};function TBe(e){let t={};for(let n=0;n<e.length;n++){let i=e[n];c(t[i])?t[i]++:t[i]=1}for(let n in t)if(t.hasOwnProperty(n)&&!lA.serverHasOpenSlots(n,t[n]))return!1;return lA.heapHasOpenSlots(e.length)}function SBe(e,t,n,i){let o=e._innerContentResources[t].clone(),r=e.tile,a=function(){return r._priority},s=e._serverKeys[t],A=new cA({throttle:!0,throttleByServer:!0,type:sA.TILES3D,priorityFunction:a,serverKey:s});o.request=A,e._requests[t]=A;let l=o.fetchArrayBuffer();if(c(l))return l.then(function(f){if(!(n<e._cancelCount)){if(o.request.cancelled||o.request.state===Vn.CANCELLED){o9(e,i);return}return _Q(e,-1),f}}).catch(function(f){if(!(n<e._cancelCount)){if(o.request.cancelled||o.request.state===Vn.CANCELLED){o9(e,i);return}_Q(e,-1),r9(e,t,f)}})}async function wBe(e){let t=e._cancelCount,n=await Promise.all(e._arrayFetchPromises);if(t<e._cancelCount)return;let i=n.map((r,a)=>DBe(e,r,a)),o=await Promise.all(i);if(e._contentsCreated=!0,e._contents=o.filter(c),e._externalTilesetCount===e._contents.length){let r=e._tile;r.hasRenderableContent=!1}return o}async function DBe(e,t,n){if(c(t))try{let i=M0(t),o=e._tileset,r=e._innerContentResources[n],a=e._tile;i.contentType===mr.EXTERNAL_TILESET&&(e._externalTilesetCount++,a.hasTilesetContent=!0),e._disableSkipLevelOfDetail=e._disableSkipLevelOfDetail||i.contentType===mr.GEOMETRY||i.contentType===mr.VECTOR;let s,A=R0[i.contentType];c(i.binaryPayload)?s=await Promise.resolve(A(o,a,r,i.binaryPayload.buffer,0)):s=await Promise.resolve(A(o,a,r,i.jsonPayload));let l=e._innerContentHeaders[n];if(a.hasImplicitContentMetadata){let h=a.implicitSubtree,m=a.implicitCoordinates;s.metadata=h.getContentMetadataView(m,n)}else a.hasImplicitContent||(s.metadata=v0(o,l));let f=P0(o,l);return c(f)&&(s.group=new Wy({metadata:f})),s}catch(i){r9(e,n,i)}}function r9(e,t,n){let i=e._tileset,o=e._innerContentResources[t].url,r=c(n.message)?n.message:n.toString();i.tileFailed.numberOfListeners>0?i.tileFailed.raiseEvent({url:o,message:r}):(console.log(`A content failed to load: ${o}`),console.log(`Error: ${r}`))}ic.prototype.cancelRequests=function(){for(let e=0;e<this._requests.length;e++){let t=this._requests[e];c(t)&&t.cancel()}};ic.prototype.hasProperty=function(e,t){return!1};ic.prototype.getFeature=function(e){};ic.prototype.applyDebugSettings=function(e,t){let n=this._contents,i=n.length;for(let o=0;o<i;++o)n[o].applyDebugSettings(e,t)};ic.prototype.applyStyle=function(e){let t=this._contents,n=t.length;for(let i=0;i<n;++i)t[i].applyStyle(e)};ic.prototype.update=function(e,t){let n=this._contents,i=n.length,o=!0;for(let r=0;r<i;++r)n[r].update(e,t),o=o&&n[r].ready;!this._ready&&o&&(this._ready=!0)};ic.prototype.pick=function(e,t,n){if(!this._ready)return;let i,o=Number.POSITIVE_INFINITY,r=this._contents,a=r.length;for(let s=0;s<a;++s){let A=r[s].pick(e,t,n);if(!c(A))continue;let l=u.distance(e.origin,A);l<o&&(i=A,o=l)}if(c(i))return n};ic.prototype.isDestroyed=function(){return!1};ic.prototype.destroy=function(){let e=this._contents,t=e.length;for(let n=0;n<t;++n)e[n].destroy();return pe(this)};var a9=ic;var s9=Math.cos,c9=Math.sin,QBe=Math.sqrt,EQ={};EQ.computePosition=function(e,t,n,i,o,r,a){let s=t.radiiSquared,A=e.nwCorner,l=e.boundingRectangle,f=A.latitude-e.granYCos*i+o*e.granXSin,h=s9(f),m=c9(f),p=s.z*m,g=A.longitude+i*e.granYSin+o*e.granXCos,C=h*s9(g),_=h*c9(g),E=s.x*C,I=s.y*_,y=QBe(E*C+I*_+p*m);if(r.x=E/y,r.y=I/y,r.z=p/y,n){let b=e.stNwCorner;c(b)?(f=b.latitude-e.stGranYCos*i+o*e.stGranXSin,g=b.longitude+i*e.stGranYSin+o*e.stGranXCos,a.x=(g-e.stWest)*e.lonScalar,a.y=(f-e.stSouth)*e.latScalar):(a.x=(g-l.west)*e.lonScalar,a.y=(f-l.south)*e.latScalar)}};var RBe=new ai,oc=new u,vBe=new ae,O0=new u,j_=new Ai;function A9(e,t,n,i,o,r,a){let s=Math.cos(t),A=i*s,l=n*s,f=Math.sin(t),h=i*f,m=n*f;j_._ellipsoid=Z.default,oc=j_.project(e,oc),oc=u.subtract(oc,O0,oc);let p=ai.fromRotation(t,RBe);oc=ai.multiplyByVector(p,oc,oc),oc=u.add(oc,O0,oc),e=j_.unproject(oc,e),r-=1,a-=1;let g=e.latitude,C=g+r*m,_=g-A*a,E=g-A*a+r*m,I=Math.max(g,C,_,E),y=Math.min(g,C,_,E),b=e.longitude,x=b+r*l,S=b+a*h,P=b+a*h+r*l,D=Math.max(b,x,S,P),Q=Math.min(b,x,S,P);return{north:I,south:y,east:D,west:Q,granYCos:A,granYSin:h,granXCos:l,granXSin:m,nwCorner:e}}EQ.computeOptions=function(e,t,n,i,o,r,a){let s=e.east,A=e.west,l=e.north,f=e.south,h=!1,m=!1;l===w.PI_OVER_TWO&&(h=!0),f===-w.PI_OVER_TWO&&(m=!0);let p,g=l-f;A>s?p=w.TWO_PI-A+s:p=s-A;let C=Math.ceil(p/t)+1,_=Math.ceil(g/t)+1,E=p/(C-1),I=g/(_-1),y=ce.northwest(e,r),b=ce.center(e,vBe);(n!==0||i!==0)&&(b.longitude<y.longitude&&(b.longitude+=w.TWO_PI),j_._ellipsoid=Z.default,O0=j_.project(b,O0));let x=I,S=E,P=0,D=0,Q=ce.clone(e,o),v={granYCos:x,granYSin:P,granXCos:S,granXSin:D,nwCorner:y,boundingRectangle:Q,width:C,height:_,northCap:h,southCap:m};if(n!==0){let d=A9(y,n,E,I,b,C,_);l=d.north,f=d.south,s=d.east,A=d.west,v.granYCos=d.granYCos,v.granYSin=d.granYSin,v.granXCos=d.granXCos,v.granXSin=d.granXSin,Q.north=l,Q.south=f,Q.east=s,Q.west=A}if(i!==0){n=n-i;let d=ce.northwest(Q,a),B=A9(d,n,E,I,b,C,_);v.stGranYCos=B.granYCos,v.stGranXCos=B.granXCos,v.stGranYSin=B.granYSin,v.stGranXSin=B.granXSin,v.stNwCorner=d,v.stWest=B.west,v.stSouth=B.south}return v};var pr=EQ;var PBe=new ee,MBe=new ee,OBe=new u,LBe=new ce;function l9(e,t){let n=e._ellipsoid,i=t.height,o=t.width,r=t.northCap,a=t.southCap,s=i,A=2,l=0,f=4;r&&(A-=1,s-=1,l+=1,f-=2),a&&(A-=1,s-=1,l+=1,f-=2),l+=A*o+2*s-f;let h=new Float64Array(l*3),m=0,p=0,g,C=OBe;if(r)pr.computePosition(t,n,!1,p,0,C),h[m++]=C.x,h[m++]=C.y,h[m++]=C.z;else for(g=0;g<o;g++)pr.computePosition(t,n,!1,p,g,C),h[m++]=C.x,h[m++]=C.y,h[m++]=C.z;for(g=o-1,p=1;p<i;p++)pr.computePosition(t,n,!1,p,g,C),h[m++]=C.x,h[m++]=C.y,h[m++]=C.z;if(p=i-1,!a)for(g=o-2;g>=0;g--)pr.computePosition(t,n,!1,p,g,C),h[m++]=C.x,h[m++]=C.y,h[m++]=C.z;for(g=0,p=i-2;p>0;p--)pr.computePosition(t,n,!1,p,g,C),h[m++]=C.x,h[m++]=C.y,h[m++]=C.z;let _=h.length/3*2,E=Be.createTypedArray(h.length/3,_),I=0;for(let b=0;b<h.length/3-1;b++)E[I++]=b,E[I++]=b+1;E[I++]=h.length/3-1,E[I++]=0;let y=new ze({attributes:new Mt,primitiveType:Ce.LINES});return y.attributes.position=new ue({componentDatatype:N.DOUBLE,componentsPerAttribute:3,values:h}),y.indices=E,y}function NBe(e,t){let n=e._surfaceHeight,i=e._extrudedHeight,o=e._ellipsoid,r=l9(e,t),a=t.height,s=t.width,A=Tn.scaleToGeodeticHeight(r.attributes.position.values,n,o,!1),l=A.length,f=new Float64Array(l*2);f.set(A);let h=Tn.scaleToGeodeticHeight(r.attributes.position.values,i,o);f.set(h,l),r.attributes.position.values=f;let m=t.northCap,p=t.southCap,g=4;m&&(g-=1),p&&(g-=1);let C=(f.length/3+g)*2,_=Be.createTypedArray(f.length/3,C);l=f.length/6;let E=0;for(let y=0;y<l-1;y++)_[E++]=y,_[E++]=y+1,_[E++]=y+l,_[E++]=y+l+1;_[E++]=l-1,_[E++]=0,_[E++]=l+l-1,_[E++]=l,_[E++]=0,_[E++]=l;let I;if(m)I=a-1;else{let y=s-1;_[E++]=y,_[E++]=y+l,I=s+a-2}if(_[E++]=I,_[E++]=I+l,!p){let y=s+I-1;_[E++]=y,_[E]=y+l}return r.indices=_,r}function Ip(e){e=e??k.EMPTY_OBJECT;let t=e.rectangle,n=e.granularity??w.RADIANS_PER_DEGREE,i=e.ellipsoid??Z.default,o=e.rotation??0,r=e.height??0,a=e.extrudedHeight??r;this._rectangle=ce.clone(t),this._granularity=n,this._ellipsoid=i,this._surfaceHeight=Math.max(r,a),this._rotation=o,this._extrudedHeight=Math.min(r,a),this._offsetAttribute=e.offsetAttribute,this._workerName="createRectangleOutlineGeometry"}Ip.packedLength=ce.packedLength+Z.packedLength+5;Ip.pack=function(e,t,n){return n=n??0,ce.pack(e._rectangle,t,n),n+=ce.packedLength,Z.pack(e._ellipsoid,t,n),n+=Z.packedLength,t[n++]=e._granularity,t[n++]=e._surfaceHeight,t[n++]=e._rotation,t[n++]=e._extrudedHeight,t[n]=e._offsetAttribute??-1,t};var f9=new ce,u9=Z.clone(Z.UNIT_SPHERE),Ep={rectangle:f9,ellipsoid:u9,granularity:void 0,height:void 0,rotation:void 0,extrudedHeight:void 0,offsetAttribute:void 0};Ip.unpack=function(e,t,n){t=t??0;let i=ce.unpack(e,t,f9);t+=ce.packedLength;let o=Z.unpack(e,t,u9);t+=Z.packedLength;let r=e[t++],a=e[t++],s=e[t++],A=e[t++],l=e[t];return c(n)?(n._rectangle=ce.clone(i,n._rectangle),n._ellipsoid=Z.clone(o,n._ellipsoid),n._surfaceHeight=a,n._rotation=s,n._extrudedHeight=A,n._offsetAttribute=l===-1?void 0:l,n):(Ep.granularity=r,Ep.height=a,Ep.rotation=s,Ep.extrudedHeight=A,Ep.offsetAttribute=l===-1?void 0:l,new Ip(Ep))};var FBe=new ae;Ip.createGeometry=function(e){let t=e._rectangle,n=e._ellipsoid,i=pr.computeOptions(t,e._granularity,e._rotation,0,LBe,FBe),o,r;if(w.equalsEpsilon(t.north,t.south,w.EPSILON10)||w.equalsEpsilon(t.east,t.west,w.EPSILON10))return;let a=e._surfaceHeight,s=e._extrudedHeight,A=!w.equalsEpsilon(a,s,0,w.EPSILON2),l;if(A){if(o=NBe(e,i),c(e._offsetAttribute)){let m=o.attributes.position.values.length/3,p=new Uint8Array(m);e._offsetAttribute===xt.TOP?p=p.fill(1,0,m/2):(l=e._offsetAttribute===xt.NONE?0:1,p=p.fill(l)),o.attributes.applyOffset=new ue({componentDatatype:N.UNSIGNED_BYTE,componentsPerAttribute:1,values:p})}let f=ee.fromRectangle3D(t,n,a,MBe),h=ee.fromRectangle3D(t,n,s,PBe);r=ee.union(f,h)}else{if(o=l9(e,i),o.attributes.position.values=Tn.scaleToGeodeticHeight(o.attributes.position.values,a,n,!1),c(e._offsetAttribute)){let f=o.attributes.position.values.length;l=e._offsetAttribute===xt.NONE?0:1;let h=new Uint8Array(f/3).fill(l);o.attributes.applyOffset=new ue({componentDatatype:N.UNSIGNED_BYTE,componentsPerAttribute:1,values:h})}r=ee.fromRectangle3D(t,n,a)}return new ze({attributes:o.attributes,indices:o.indices,primitiveType:Ce.LINES,boundingSphere:r,offsetAttribute:e._offsetAttribute})};var L0=Ip;function bp(e){this.rectangle=ce.clone(e.rectangle),this.minimumHeight=e.minimumHeight??0,this.maximumHeight=e.maximumHeight??0,this.southwestCornerCartesian=new u,this.northeastCornerCartesian=new u,this.westNormal=new u,this.southNormal=new u,this.eastNormal=new u,this.northNormal=new u;let t=e.ellipsoid??Z.WGS84;HBe(this,e.rectangle,t),this._orientedBoundingBox=void 0,this._boundingSphere=void 0,(e.computeBoundingVolumes??!0)&&this.computeBoundingVolumes(t)}Object.defineProperties(bp.prototype,{boundingVolume:{get:function(){return this._orientedBoundingBox}},boundingSphere:{get:function(){return this._boundingSphere}}});bp.prototype.computeBoundingVolumes=function(e){this._orientedBoundingBox=To.fromRectangle(this.rectangle,this.minimumHeight,this.maximumHeight,e),this._boundingSphere=ee.fromOrientedBoundingBox(this._orientedBoundingBox)};var d9=new u,N0=new u,h9=new u,kBe=new u,UBe=new u,GBe=new u,zBe=new u,rc=new ae,m9=new Ft(u.UNIT_X,0),yp=new qa;function HBe(e,t,n){n.cartographicToCartesian(ce.southwest(t),e.southwestCornerCartesian),n.cartographicToCartesian(ce.northeast(t),e.northeastCornerCartesian),rc.longitude=t.west,rc.latitude=(t.south+t.north)*.5,rc.height=0;let i=n.cartographicToCartesian(rc,GBe),o=u.cross(i,u.UNIT_Z,kBe);u.normalize(o,e.westNormal),rc.longitude=t.east;let r=n.cartographicToCartesian(rc,zBe),a=u.cross(u.UNIT_Z,r,d9);u.normalize(a,e.eastNormal);let s=u.subtract(i,r,d9);u.magnitude(s)===0&&(s=u.clone(o,s));let A=u.normalize(s,UBe),l=t.south,f;if(l>0){rc.longitude=(t.west+t.east)*.5,rc.latitude=l;let C=n.cartographicToCartesian(rc,yp.origin);u.clone(A,yp.direction);let _=Ft.fromPointNormal(e.southwestCornerCartesian,e.westNormal,m9);Ni.rayPlane(yp,_,e.southwestCornerCartesian),f=n.geodeticSurfaceNormal(C,N0)}else f=n.geodeticSurfaceNormalCartographic(ce.southeast(t),N0);let h=u.cross(f,s,h9);u.normalize(h,e.southNormal);let m=t.north,p;if(m<0){rc.longitude=(t.west+t.east)*.5,rc.latitude=m;let C=n.cartographicToCartesian(rc,yp.origin);u.negate(A,yp.direction);let _=Ft.fromPointNormal(e.northeastCornerCartesian,e.eastNormal,m9);Ni.rayPlane(yp,_,e.northeastCornerCartesian),p=n.geodeticSurfaceNormal(C,N0)}else p=n.geodeticSurfaceNormalCartographic(ce.northwest(t),N0);let g=u.cross(s,p,h9);u.normalize(g,e.northNormal)}var VBe=new u,jBe=new u,YBe=new u(0,-1,0),qBe=new u(0,0,-1),p9=new u;function WBe(e,t){let n=t.camera,i=n.positionWC,o=n.positionCartographic,r=0;if(!ce.contains(e.rectangle,o)){let l=e.southwestCornerCartesian,f=e.northeastCornerCartesian,h=e.westNormal,m=e.southNormal,p=e.eastNormal,g=e.northNormal;t.mode!==Te.SCENE3D&&(l=t.mapProjection.project(ce.southwest(e.rectangle),VBe),l.z=l.y,l.y=l.x,l.x=0,f=t.mapProjection.project(ce.northeast(e.rectangle),jBe),f.z=f.y,f.y=f.x,f.x=0,h=YBe,p=u.UNIT_Y,m=qBe,g=u.UNIT_Z);let C=u.subtract(i,l,p9),_=u.dot(C,h),E=u.dot(C,m),I=u.subtract(i,f,p9),y=u.dot(I,p),b=u.dot(I,g);_>0?r+=_*_:y>0&&(r+=y*y),E>0?r+=E*E:b>0&&(r+=b*b)}let a,s,A;if(t.mode===Te.SCENE3D?(a=o.height,s=e.minimumHeight,A=e.maximumHeight):(a=i.x,s=0,A=0),a>A){let l=a-A;r+=l*l}else if(a<s){let l=s-a;r+=l*l}return Math.sqrt(r)}bp.prototype.distanceToCamera=function(e){let t=WBe(this,e);if(e.mode===Te.SCENE3D&&c(this._orientedBoundingBox)){let n=Math.sqrt(this._orientedBoundingBox.distanceSquaredTo(e.camera.positionWC));return Math.max(t,n)}return t};bp.prototype.intersectPlane=function(e){return this._orientedBoundingBox.intersectPlane(e)};bp.prototype.createDebugVolume=function(e){let t=new O.clone(O.IDENTITY),n=new L0({rectangle:this.rectangle,height:this.minimumHeight,extrudedHeight:this.maximumHeight}),i=new gt({geometry:n,id:"outline",modelMatrix:t,attributes:{color:Tt.fromColor(e)}});return new wn({geometryInstances:i,appearance:new Vt({translucent:!1,flat:!0}),asynchronous:!1})};var Nu=bp;var Y_={},JBe=new u,g9=new u,C9=new u,_9=new u,E9=new To;Y_.validOutline=function(e){let n=To.fromPoints(e,E9).halfAxes,i=J.getColumn(n,0,g9),o=J.getColumn(n,1,C9),r=J.getColumn(n,2,_9),a=u.magnitude(i),s=u.magnitude(o),A=u.magnitude(r);return!(a===0&&(s===0||A===0)||s===0&&A===0)};Y_.computeProjectTo2DArguments=function(e,t,n,i){let o=To.fromPoints(e,E9),r=o.halfAxes,a=J.getColumn(r,0,g9),s=J.getColumn(r,1,C9),A=J.getColumn(r,2,_9),l=u.magnitude(a),f=u.magnitude(s),h=u.magnitude(A),m=Math.min(l,f,h);if(l===0&&(f===0||h===0)||f===0&&h===0)return!1;let p,g;return(m===f||m===h)&&(p=a),m===l?p=s:m===h&&(g=s),(m===l||m===f)&&(g=A),u.normalize(p,n),u.normalize(g,i),u.clone(o.center,t),!0};function I9(e,t,n,i,o){let r=u.subtract(e,t,JBe),a=u.dot(n,r),s=u.dot(i,r);return U.fromElements(a,s,o)}Y_.createProjectPointsTo2DFunction=function(e,t,n){return function(i){let o=new Array(i.length);for(let r=0;r<i.length;r++)o[r]=I9(i[r],e,t,n);return o}};Y_.createProjectPointTo2DFunction=function(e,t,n){return function(i,o){return I9(i,e,t,n,o)}};var Bp=Y_;function KBe(e){let t=e.length,n=new Float64Array(t*3),i=Be.createTypedArray(t,t*2),o=0,r=0;for(let s=0;s<t;s++){let A=e[s];n[o++]=A.x,n[o++]=A.y,n[o++]=A.z,i[r++]=s,i[r++]=(s+1)%t}let a=new Mt({position:new ue({componentDatatype:N.DOUBLE,componentsPerAttribute:3,values:n})});return new ze({attributes:a,indices:i,primitiveType:Ce.LINES})}function lh(e){e=e??k.EMPTY_OBJECT;let t=e.polygonHierarchy;this._polygonHierarchy=t,this._workerName="createCoplanarPolygonOutlineGeometry",this.packedLength=rn.computeHierarchyPackedLength(t,u)+1}lh.fromPositions=function(e){e=e??k.EMPTY_OBJECT;let t={polygonHierarchy:{positions:e.positions}};return new lh(t)};lh.pack=function(e,t,n){return n=n??0,n=rn.packPolygonHierarchy(e._polygonHierarchy,t,n,u),t[n]=e.packedLength,t};var XBe={polygonHierarchy:{}};lh.unpack=function(e,t,n){t=t??0;let i=rn.unpackPolygonHierarchy(e,t,u);t=i.startingIndex,delete i.startingIndex;let o=e[t];return c(n)||(n=new lh(XBe)),n._polygonHierarchy=i,n.packedLength=o,n};lh.createGeometry=function(e){let t=e._polygonHierarchy,n=t.positions;if(n=Bi(n,u.equalsEpsilon,!0),n.length<3||!Bp.validOutline(n))return;let o=rn.polygonOutlinesFromHierarchy(t,!1);if(o.length===0)return;let r=[];for(let A=0;A<o.length;A++){let l=new gt({geometry:KBe(o[A])});r.push(l)}let a=Mn.combineInstances(r)[0],s=ee.fromPoints(t.positions);return new ze({attributes:a.attributes,indices:a.indices,primitiveType:a.primitiveType,boundingSphere:s})};var $l=lh;var F0=new ae;function q_(e){let t=Sm.fromToken(e.token),n=e.minimumHeight??0,i=e.maximumHeight??0,o=e.ellipsoid??Z.WGS84;this.s2Cell=t,this.minimumHeight=n,this.maximumHeight=i,this.ellipsoid=o;let r=axe(t,n,i,o);this._boundingPlanes=r;let a=lxe(r);this._vertices=a,this._edgeNormals=new Array(6),this._edgeNormals[0]=wQ(r[0],a.slice(0,4));let s;for(s=0;s<4;s++)this._edgeNormals[0][s]=u.negate(this._edgeNormals[0][s],this._edgeNormals[0][s]);for(this._edgeNormals[1]=wQ(r[1],a.slice(4,8)),s=0;s<4;s++)this._edgeNormals[2+s]=wQ(r[2+s],[a[s%4],a[(s+1)%4],a[4+(s+1)%4],a[4+s]]);for(this._planeVertices=[this._vertices.slice(0,4),this._vertices.slice(4,8)],s=0;s<4;s++)this._planeVertices.push([this._vertices[s%4],this._vertices[(s+1)%4],this._vertices[4+(s+1)%4],this._vertices[4+s]]);let A=t.getCenter();F0=o.cartesianToCartographic(A,F0),F0.height=(i+n)/2,this.center=o.cartographicToCartesian(F0,A),this._boundingSphere=ee.fromPoints(a)}var ZBe=new u,$Be=new ae,exe=new u,txe=new ae,nxe=new u,ixe=new u,oxe=new u,rxe=new u;function axe(e,t,n,i){let o=new Array(6),r=e.getCenter(),a=i.geodeticSurfaceNormal(r,ZBe),s=i.cartesianToCartographic(r,$Be);s.height=n;let A=i.cartographicToCartesian(s,exe),l=Ft.fromPointNormal(A,a);o[0]=l;let f=0,h,m=[],p,g;for(h=0;h<4;h++){p=e.getVertex(h),m[h]=p,g=i.cartesianToCartographic(p,txe),g.height=t;let _=Ft.getPointDistance(l,i.cartographicToCartesian(g,nxe));_<f&&(f=_)}let C=Ft.clone(l);for(C.normal=u.negate(C.normal,C.normal),C.distance=C.distance*-1+f,o[1]=C,h=0;h<4;h++){p=m[h];let _=m[(h+1)%4],E=i.geodeticSurfaceNormal(p,ixe),I=u.subtract(_,p,rxe),y=u.cross(I,E,oxe);y=u.normalize(y,y),o[2+h]=Ft.fromPointNormal(p,y)}return o}var fh=new u,uh=new u,dh=new u,IQ=new u,yQ=new u,bQ=new u,sxe=new u,cxe=new u,Axe=new u,BQ=new u,xQ=new u,TQ=new u,Fu=new u,GA=new J;function y9(e,t,n){fh=e.normal,uh=t.normal,dh=n.normal,IQ=u.multiplyByScalar(e.normal,-e.distance,IQ),yQ=u.multiplyByScalar(t.normal,-t.distance,yQ),bQ=u.multiplyByScalar(n.normal,-n.distance,bQ),BQ=u.multiplyByScalar(u.cross(uh,dh,sxe),u.dot(IQ,fh),BQ),xQ=u.multiplyByScalar(u.cross(dh,fh,cxe),u.dot(yQ,uh),xQ),TQ=u.multiplyByScalar(u.cross(fh,uh,Axe),u.dot(bQ,dh),TQ),GA[0]=fh.x,GA[1]=uh.x,GA[2]=dh.x,GA[3]=fh.y,GA[4]=uh.y,GA[5]=dh.y,GA[6]=fh.z,GA[7]=uh.z,GA[8]=dh.z;let i=J.determinant(GA);return Fu=u.add(BQ,xQ,Fu),Fu=u.add(Fu,TQ,Fu),new u(Fu.x/i,Fu.y/i,Fu.z/i)}function lxe(e){let t=new Array(8);for(let n=0;n<4;n++)t[n]=y9(e[0],e[2+(n+3)%4],e[2+n%4]),t[n+4]=y9(e[1],e[2+(n+3)%4],e[2+n%4]);return t}var SQ=new u,xp=new u;function wQ(e,t){let n=[];for(let i=0;i<4;i++)SQ=u.subtract(t[(i+1)%4],t[i],SQ),xp=u.cross(e.normal,SQ,xp),xp=u.normalize(xp,xp),n[i]=u.clone(xp);return n}Object.defineProperties(q_.prototype,{boundingVolume:{get:function(){return this}},boundingSphere:{get:function(){return this._boundingSphere}}});var DQ=new u;q_.prototype.distanceToCamera=function(e){let t=e.camera.positionWC,n=[],i=[],o;Ft.getPointDistance(this._boundingPlanes[0],t)>0?(n.push(0),i.push(this._planeVertices[0]),o=this._edgeNormals[0]):Ft.getPointDistance(this._boundingPlanes[1],t)>0&&(n.push(1),i.push(this._planeVertices[1]),o=this._edgeNormals[1]);let r,a;for(r=0;r<4;r++)a=2+r,Ft.getPointDistance(this._boundingPlanes[a],t)>0&&(n.push(a),i.push(this._planeVertices[a]),o=this._edgeNormals[a]);if(n.length===0)return 0;let s,A;if(n.length===1)return A=this._boundingPlanes[n[0]],s=QQ(Ft.projectPointOntoPlane(A,t,DQ),i[0],A,o),u.distance(s,t);if(n.length===2){if(n[0]===0){let m=[this._vertices[4*n[0]+(n[1]-2)],this._vertices[4*n[0]+(n[1]-2+1)%4]];return s=b9(t,m[0],m[1]),u.distance(s,t)}let f=Number.MAX_VALUE,h;for(r=0;r<2;r++)A=this._boundingPlanes[n[r]],s=QQ(Ft.projectPointOntoPlane(A,t,DQ),i[r],A,this._edgeNormals[n[r]]),h=u.distanceSquared(s,t),h<f&&(f=h);return Math.sqrt(f)}else if(n.length>3)return s=QQ(Ft.projectPointOntoPlane(this._boundingPlanes[1],t,DQ),this._planeVertices[1],this._boundingPlanes[1],this._edgeNormals[1]),u.distance(s,t);let l=n[1]===2&&n[2]===5?0:1;return n[0]===0?u.distance(t,this._vertices[(n[1]-2+l)%4]):u.distance(t,this._vertices[4+(n[1]-2+l)%4])};var fxe=new u,uxe=new u;function b9(e,t,n){let i=u.subtract(n,t,fxe),o=u.subtract(e,t,uxe),r=u.dot(i,o);if(r<=0)return t;let a=u.dot(i,i);return r>=a?n:(r=r/a,new u((1-r)*t.x+r*n.x,(1-r)*t.y+r*n.y,(1-r)*t.z+r*n.z))}var dxe=new Ft(u.UNIT_X,0);function QQ(e,t,n,i){let o=Number.MAX_VALUE,r,a,s;for(let A=0;A<t.length;A++){let l=Ft.fromPointNormal(t[A],i[A],dxe);Ft.getPointDistance(l,e)<0||(s=b9(e,t[A],t[(A+1)%4]),r=u.distance(e,s),r<o&&(o=r,a=s))}return c(a)?a:e}q_.prototype.intersectPlane=function(e){let t=0,n=0;for(let i=0;i<this._vertices.length;i++)u.dot(e.normal,this._vertices[i])+e.distance<0?n++:t++;return t===this._vertices.length?vt.INSIDE:n===this._vertices.length?vt.OUTSIDE:vt.INTERSECTING};q_.prototype.createDebugVolume=function(e){let t=new O.clone(O.IDENTITY),n=new $l({polygonHierarchy:{positions:this._planeVertices[0]}}),i=$l.createGeometry(n),o=new gt({geometry:i,id:"outline",modelMatrix:t,attributes:{color:Tt.fromColor(e)}}),r=new $l({polygonHierarchy:{positions:this._planeVertices[1]}}),a=$l.createGeometry(r),s=new gt({geometry:a,id:"outline",modelMatrix:t,attributes:{color:Tt.fromColor(e)}}),A=[];for(let l=0;l<4;l++){let f=new $l({polygonHierarchy:{positions:this._planeVertices[2+l]}}),h=$l.createGeometry(f);A[l]=new gt({geometry:h,id:"outline",modelMatrix:t,attributes:{color:Tt.fromColor(e)}})}return new wn({geometryInstances:[A[0],A[1],A[2],A[3],s,o],appearance:new Vt({translucent:!1,flat:!0}),asynchronous:!1})};var B9=q_;var hxe=new u(1,1,1),k0=Math.cos,U0=Math.sin;function Tp(e){e=e??k.EMPTY_OBJECT;let t=e.radii??hxe,n=e.innerRadii??t,i=e.minimumClock??0,o=e.maximumClock??w.TWO_PI,r=e.minimumCone??0,a=e.maximumCone??w.PI,s=Math.round(e.stackPartitions??10),A=Math.round(e.slicePartitions??8),l=Math.round(e.subdivisions??128);this._radii=u.clone(t),this._innerRadii=u.clone(n),this._minimumClock=i,this._maximumClock=o,this._minimumCone=r,this._maximumCone=a,this._stackPartitions=s,this._slicePartitions=A,this._subdivisions=l,this._offsetAttribute=e.offsetAttribute,this._workerName="createEllipsoidOutlineGeometry"}Tp.packedLength=2*u.packedLength+8;Tp.pack=function(e,t,n){return n=n??0,u.pack(e._radii,t,n),n+=u.packedLength,u.pack(e._innerRadii,t,n),n+=u.packedLength,t[n++]=e._minimumClock,t[n++]=e._maximumClock,t[n++]=e._minimumCone,t[n++]=e._maximumCone,t[n++]=e._stackPartitions,t[n++]=e._slicePartitions,t[n++]=e._subdivisions,t[n]=e._offsetAttribute??-1,t};var x9=new u,T9=new u,ef={radii:x9,innerRadii:T9,minimumClock:void 0,maximumClock:void 0,minimumCone:void 0,maximumCone:void 0,stackPartitions:void 0,slicePartitions:void 0,subdivisions:void 0,offsetAttribute:void 0};Tp.unpack=function(e,t,n){t=t??0;let i=u.unpack(e,t,x9);t+=u.packedLength;let o=u.unpack(e,t,T9);t+=u.packedLength;let r=e[t++],a=e[t++],s=e[t++],A=e[t++],l=e[t++],f=e[t++],h=e[t++],m=e[t];return c(n)?(n._radii=u.clone(i,n._radii),n._innerRadii=u.clone(o,n._innerRadii),n._minimumClock=r,n._maximumClock=a,n._minimumCone=s,n._maximumCone=A,n._stackPartitions=l,n._slicePartitions=f,n._subdivisions=h,n._offsetAttribute=m===-1?void 0:m,n):(ef.minimumClock=r,ef.maximumClock=a,ef.minimumCone=s,ef.maximumCone=A,ef.stackPartitions=l,ef.slicePartitions=f,ef.subdivisions=h,ef.offsetAttribute=m===-1?void 0:m,new Tp(ef))};Tp.createGeometry=function(e){let t=e._radii;if(t.x<=0||t.y<=0||t.z<=0)return;let n=e._innerRadii;if(n.x<=0||n.y<=0||n.z<=0)return;let i=e._minimumClock,o=e._maximumClock,r=e._minimumCone,a=e._maximumCone,s=e._subdivisions,A=Z.fromCartesian3(t),l=e._slicePartitions+1,f=e._stackPartitions+1;l=Math.round(l*Math.abs(o-i)/w.TWO_PI),f=Math.round(f*Math.abs(a-r)/w.PI),l<2&&(l=2),f<2&&(f=2);let h=0,m=1,p=n.x!==t.x||n.y!==t.y||n.z!==t.z,g=!1,C=!1;p&&(m=2,r>0&&(g=!0,h+=l),a<Math.PI&&(C=!0,h+=l));let _=s*m*(f+l),E=new Float64Array(_*3),I=2*(_+h-(l+f)*m),y=Be.createTypedArray(_,I),b,x,S,P,D=0,Q=new Array(f),v=new Array(f);for(b=0;b<f;b++)P=r+b*(a-r)/(f-1),Q[b]=U0(P),v[b]=k0(P);let d=new Array(s),B=new Array(s);for(b=0;b<s;b++)S=i+b*(o-i)/(s-1),d[b]=U0(S),B[b]=k0(S);for(b=0;b<f;b++)for(x=0;x<s;x++)E[D++]=t.x*Q[b]*B[x],E[D++]=t.y*Q[b]*d[x],E[D++]=t.z*v[b];if(p)for(b=0;b<f;b++)for(x=0;x<s;x++)E[D++]=n.x*Q[b]*B[x],E[D++]=n.y*Q[b]*d[x],E[D++]=n.z*v[b];for(Q.length=s,v.length=s,b=0;b<s;b++)P=r+b*(a-r)/(s-1),Q[b]=U0(P),v[b]=k0(P);for(d.length=l,B.length=l,b=0;b<l;b++)S=i+b*(o-i)/(l-1),d[b]=U0(S),B[b]=k0(S);for(b=0;b<s;b++)for(x=0;x<l;x++)E[D++]=t.x*Q[b]*B[x],E[D++]=t.y*Q[b]*d[x],E[D++]=t.z*v[b];if(p)for(b=0;b<s;b++)for(x=0;x<l;x++)E[D++]=n.x*Q[b]*B[x],E[D++]=n.y*Q[b]*d[x],E[D++]=n.z*v[b];for(D=0,b=0;b<f*m;b++){let L=b*s;for(x=0;x<s-1;x++)y[D++]=L+x,y[D++]=L+x+1}let T=f*s*m;for(b=0;b<l;b++)for(x=0;x<s-1;x++)y[D++]=T+b+x*l,y[D++]=T+b+(x+1)*l;if(p)for(T=f*s*m+l*s,b=0;b<l;b++)for(x=0;x<s-1;x++)y[D++]=T+b+x*l,y[D++]=T+b+(x+1)*l;if(p){let L=f*s*m,G=L+s*l;if(g)for(b=0;b<l;b++)y[D++]=L+b,y[D++]=G+b;if(C)for(L+=s*l-l,G+=s*l-l,b=0;b<l;b++)y[D++]=L+b,y[D++]=G+b}let R=new Mt({position:new ue({componentDatatype:N.DOUBLE,componentsPerAttribute:3,values:E})});if(c(e._offsetAttribute)){let L=E.length,G=e._offsetAttribute===xt.NONE?0:1,q=new Uint8Array(L/3).fill(G);R.applyOffset=new ue({componentDatatype:N.UNSIGNED_BYTE,componentsPerAttribute:1,values:q})}return new ze({attributes:R,indices:y,primitiveType:Ce.LINES,boundingSphere:ee.fromEllipsoid(A),offsetAttribute:e._offsetAttribute})};var zA=Tp;function Sp(e){let t=e.radius??1,i={radii:new u(t,t,t),stackPartitions:e.stackPartitions,slicePartitions:e.slicePartitions,subdivisions:e.subdivisions};this._ellipsoidGeometry=new zA(i),this._workerName="createSphereOutlineGeometry"}Sp.packedLength=zA.packedLength;Sp.pack=function(e,t,n){return zA.pack(e._ellipsoidGeometry,t,n)};var mxe=new zA,hh={radius:void 0,radii:new u,stackPartitions:void 0,slicePartitions:void 0,subdivisions:void 0};Sp.unpack=function(e,t,n){let i=zA.unpack(e,t,mxe);return hh.stackPartitions=i._stackPartitions,hh.slicePartitions=i._slicePartitions,hh.subdivisions=i._subdivisions,c(n)?(u.clone(i._radii,hh.radii),n._ellipsoidGeometry=new zA(hh),n):(hh.radius=i._radii.x,new Sp(hh))};Sp.createGeometry=function(e){return zA.createGeometry(e._ellipsoidGeometry)};var S9=Sp;function wp(e,t){t===0&&(t=w.EPSILON7),this._boundingSphere=new ee(e,t)}Object.defineProperties(wp.prototype,{center:{get:function(){return this._boundingSphere.center}},radius:{get:function(){return this._boundingSphere.radius}},boundingVolume:{get:function(){return this._boundingSphere}},boundingSphere:{get:function(){return this._boundingSphere}}});wp.prototype.distanceToCamera=function(e){let t=this._boundingSphere;return Math.max(0,u.distance(t.center,e.camera.positionWC)-t.radius)};wp.prototype.intersectPlane=function(e){return ee.intersectPlane(this._boundingSphere,e)};wp.prototype.update=function(e,t){u.clone(e,this._boundingSphere.center),this._boundingSphere.radius=t};wp.prototype.createDebugVolume=function(e){let t=new S9({radius:this.radius}),n=O.fromTranslation(this.center,new O.clone(O.IDENTITY)),i=new gt({geometry:t,id:"outline",modelMatrix:n,attributes:{color:Tt.fromColor(e)}});return new wn({geometryInstances:i,appearance:new Vt({translucent:!1,flat:!0}),asynchronous:!1})};var Dp=wp;var pxe=new u,gxe=new u,Cxe=new u,_xe=new u;function mh(e,t,n){n=u.cross(e,t,n);let i=u.magnitude(n);return u.multiplyByScalar(n,w.EPSILON7/i,n)}function RQ(e,t){let n=u.normalize(e,_xe),i=u.equalsEpsilon(n,u.UNIT_X,w.EPSILON6)?u.UNIT_Y:u.UNIT_X;return mh(e,i,t)}function w9(e){let t=J.getColumn(e,0,pxe),n=J.getColumn(e,1,gxe),i=J.getColumn(e,2,Cxe),o=u.equals(t,u.ZERO),r=u.equals(n,u.ZERO),a=u.equals(i,u.ZERO);return!o&&!r&&!a?e:o&&r&&a?(e[0]=w.EPSILON7,e[4]=w.EPSILON7,e[8]=w.EPSILON7,e):(o&&!r&&!a?t=mh(n,i,t):!o&&r&&!a?n=mh(t,i,n):!o&&!r&&a?i=mh(n,t,i):o?r?a||(t=RQ(i,t),n=mh(i,t,n)):(t=RQ(n,t),i=mh(n,t,i)):(n=RQ(t,n),i=mh(n,t,i)),J.setColumn(e,0,t,e),J.setColumn(e,1,n,e),J.setColumn(e,2,i,e),e)}function Qp(e,t){t=w9(t),this._orientedBoundingBox=new To(e,t),this._boundingSphere=ee.fromOrientedBoundingBox(this._orientedBoundingBox)}Object.defineProperties(Qp.prototype,{boundingVolume:{get:function(){return this._orientedBoundingBox}},boundingSphere:{get:function(){return this._boundingSphere}}});Qp.prototype.distanceToCamera=function(e){return Math.sqrt(this._orientedBoundingBox.distanceSquaredTo(e.camera.positionWC))};Qp.prototype.intersectPlane=function(e){return this._orientedBoundingBox.intersectPlane(e)};Qp.prototype.update=function(e,t){u.clone(e,this._orientedBoundingBox.center),t=w9(t),J.clone(t,this._orientedBoundingBox.halfAxes),ee.fromOrientedBoundingBox(this._orientedBoundingBox,this._boundingSphere)};Qp.prototype.createDebugVolume=function(e){let t=new ay({minimum:new u(-1,-1,-1),maximum:new u(1,1,1)}),n=O.fromRotationTranslation(this.boundingVolume.halfAxes,this.boundingVolume.center),i=new gt({geometry:t,id:"outline",modelMatrix:n,attributes:{color:Tt.fromColor(e)}});return new wn({geometryInstances:i,appearance:new Vt({translucent:!1,flat:!0}),asynchronous:!1})};var Gc=Qp;function Oi(e,t,n,i){this._tileset=e,this._header=n;let o=c(n.contents),r=o&&n.contents.length>1||Wn(n,"3DTILES_multiple_contents"),a=o&&!r?n.contents[0]:n.content;this._contentHeader=a,this.transform=c(n.transform)?O.unpack(n.transform):O.clone(O.IDENTITY);let s=c(i)?i.computedTransform:e.modelMatrix,A=O.multiply(s,this.transform,new O),l=c(i)?i._initialTransform:O.IDENTITY;this._initialTransform=O.multiply(l,this.transform,new O),this.computedTransform=A,this.metadata=i9(e,n),this._verticalExaggeration=1,this._verticalExaggerationRelativeHeight=0,this._boundingVolume=this.createBoundingVolume(n.boundingVolume,A),this._boundingVolume2D=void 0;let f;c(a)&&c(a.boundingVolume)&&(f=this.createBoundingVolume(a.boundingVolume,A)),this._contentBoundingVolume=f,this._contentBoundingVolume2D=void 0;let h;c(n.viewerRequestVolume)&&(h=this.createBoundingVolume(n.viewerRequestVolume,A)),this._viewerRequestVolume=h,this.geometricError=n.geometricError,this._geometricError=n.geometricError,c(this._geometricError)||(this._geometricError=c(i)?i._geometricError:e._geometricError,Oi._deprecationWarning("geometricErrorUndefined","Required property geometricError is undefined for this tile. Using parent's geometric error instead.")),this.updateGeometricErrorScale();let m;c(n.refine)?((n.refine==="replace"||n.refine==="add")&&Oi._deprecationWarning("lowercase-refine",`This tile uses a lowercase refine "${n.refine}". Instead use "${n.refine.toUpperCase()}".`),m=n.refine.toUpperCase()==="REPLACE"?Vi.REPLACE:Vi.ADD):c(i)?m=i.refine:m=Vi.REPLACE,this.refine=m,this.children=[],this.parent=i;let p,g=!1,C,_,E;if(t=ke.createIfNeeded(t),r)C=ji.UNLOADED,_=t.clone();else if(c(a)){let x=a.uri;c(a.url)&&(Oi._deprecationWarning("contentUrl",'This tileset JSON uses the "content.url" property which has been deprecated. Use "content.uri" instead.'),x=a.url),x===""?(Oi._deprecationWarning("contentUriEmpty","content.uri property is an empty string, which creates a circular dependency, making this tileset invalid. Omit the content property instead"),p=new pQ(e,this),g=!0,C=ji.READY):(C=ji.UNLOADED,_=t.getDerivedResource({url:x}),E=lA.getServerKey(_.getUrlComponent()))}else p=new pQ(e,this),g=!0,C=ji.READY;this._content=p,this._contentResource=_,this._contentState=C,this._expiredContent=void 0,this._serverKey=E,this.hasEmptyContent=g,this.hasTilesetContent=!1,this.hasImplicitContent=!1,this.hasRenderableContent=!g,this.hasImplicitContentMetadata=!1,this.hasMultipleContents=r,this.cacheNode=void 0;let I=n.expire,y,b;c(I)&&(y=I.duration,c(I.date)&&(b=X.fromIso8601(I.date))),this.expireDuration=y,this.expireDate=b,this.lastStyleTime=0,this._optimChildrenWithinParent=Jl.NOT_COMPUTED,this.clippingPlanesDirty=!1,this.clippingPolygonsDirty=!1,this.priorityDeferred=!1,this.implicitTileset=void 0,this.implicitCoordinates=void 0,this.implicitSubtree=void 0,this._distanceToCamera=0,this._centerZDepth=0,this._screenSpaceError=0,this._screenSpaceErrorProgressiveResolution=0,this._visibilityPlaneMask=0,this._visible=!1,this._inRequestVolume=!1,this._finalResolution=!0,this._depth=0,this._stackLength=0,this._selectionDepth=0,this._updatedVisibilityFrame=0,this._touchedFrame=0,this._visitedFrame=0,this._selectedFrame=0,this._wasSelectedLastFrame=!1,this._requestedFrame=0,this._ancestorWithContent=void 0,this._ancestorWithContentAvailable=void 0,this._refines=!1,this._shouldSelect=!1,this._isClipped=!0,this._isClippedByPolygon=!1,this._clippingPlanesState=0,this._clippingPolygonsState=0,this._debugBoundingVolume=void 0,this._debugContentBoundingVolume=void 0,this._debugViewerRequestVolume=void 0,this._debugColor=F.fromRandom({alpha:1}),this._debugColorizeTiles=!1,this._priority=0,this._priorityHolder=this,this._priorityProgressiveResolution=!1,this._priorityProgressiveResolutionScreenSpaceErrorLeaf=!1,this._priorityReverseScreenSpaceError=0,this._foveatedFactor=0,this._wasMinPriorityChild=!1,this._loadTimestamp=new X,this._commandsLength=0,this._color=void 0,this._colorDirty=!1,this._request=void 0}Oi._deprecationWarning=wr;Object.defineProperties(Oi.prototype,{tileset:{get:function(){return this._tileset}},content:{get:function(){return this._content}},boundingVolume:{get:function(){return this._boundingVolume}},contentBoundingVolume:{get:function(){return this._contentBoundingVolume??this._boundingVolume}},boundingSphere:{get:function(){return this._boundingVolume.boundingSphere}},isVisible:{get:function(){return this._visible&&this._inRequestVolume}},extras:{get:function(){return this._header.extras}},color:{get:function(){return c(this._color)||(this._color=new F),F.clone(this._color)},set:function(e){this._color=F.clone(e,this._color),this._colorDirty=!0}},contentAvailable:{get:function(){return this.contentReady&&this.hasRenderableContent||c(this._expiredContent)&&!this.contentFailed}},contentReady:{get:function(){return this._contentState===ji.READY}},contentUnloaded:{get:function(){return this._contentState===ji.UNLOADED}},hasUnloadedRenderableContent:{get:function(){return this.hasRenderableContent&&this.contentUnloaded}},contentExpired:{get:function(){return this._contentState===ji.EXPIRED}},contentFailed:{get:function(){return this._contentState===ji.FAILED}},commandsLength:{get:function(){return this._commandsLength}}});var ku=new u;function Exe(e,t){let{tileset:n,boundingSphere:i}=e,{radius:o,center:r}=i,{camera:a}=t,s=u.multiplyByScalar(a.directionWC,e._centerZDepth,ku),A=u.add(a.positionWC,s,ku),l=u.subtract(A,r,ku);if(u.magnitude(l)>o){let b=u.normalize(l,ku),x=u.multiplyByScalar(b,o,ku),S=u.add(r,x,ku),P=u.subtract(S,a.positionWC,ku),D=u.normalize(P,ku);e._foveatedFactor=1-Math.abs(u.dot(a.directionWC,D))}else e._foveatedFactor=0;let m=e.refine===Vi.REPLACE,p=n.isSkippingLevelOfDetail;if(m&&!p||!n.foveatedScreenSpaceError||n.foveatedConeSize===1||e._priorityProgressiveResolution&&m&&p||n._pass===fs.PRELOAD_FLIGHT||n._pass===fs.PRELOAD)return!1;let g=1-Math.cos(a.frustum.fov*.5),C=n.foveatedConeSize*g;if(e._foveatedFactor<=C)return!1;let _=g-C,E=w.clamp((e._foveatedFactor-C)/_,0,1),I=n.foveatedInterpolationCallback(n.foveatedMinimumScreenSpaceErrorRelaxation,n.memoryAdjustedScreenSpaceError,E),y=e._screenSpaceError===0&&c(e.parent)?e.parent._screenSpaceError*.5:e._screenSpaceError;return n.memoryAdjustedScreenSpaceError-I<=y}var P9=new X;Oi.prototype.getScreenSpaceError=function(e,t,n){let i=this._tileset,o=n??1,r=c(this.parent)?this.parent.geometricError:i._scaledGeometricError,a=t?r:this.geometricError;if(a===0)return 0;let{camera:s,context:A}=e,l=s.frustum,f=A.drawingBufferWidth,h=A.drawingBufferHeight*o,m;if(e.mode===Te.SCENE2D||l instanceof am){let p=l.offCenterFrustum;c(p)&&(l=p);let g=Math.max(l.top-l.bottom,l.right-l.left)/Math.max(f,h);m=a/g}else{let p=Math.max(this._distanceToCamera,w.EPSILON7),g=l.sseDenominator;if(m=a*h/(p*g),i.dynamicScreenSpaceError){let C=i._dynamicScreenSpaceErrorComputedDensity,_=i.dynamicScreenSpaceErrorFactor,E=w.fog(p,C)*_;m-=E}}return m/=e.pixelRatio,m};function Ixe(e,t){if(e.progressiveResolutionHeightFraction<=0||e.progressiveResolutionHeightFraction>.5)return!1;let n=e.memoryAdjustedScreenSpaceError,i=t._screenSpaceErrorProgressiveResolution>n;t._priorityProgressiveResolutionScreenSpaceErrorLeaf=!1;let o=t.parent,r=t._screenSpaceErrorProgressiveResolution<=n,a=c(o)&&o._screenSpaceErrorProgressiveResolution>n;return r&&a&&(t._priorityProgressiveResolutionScreenSpaceErrorLeaf=!0,i=!0),i}function yxe(e,t){let n=t.parent,o=c(n)&&(!e.isSkippingLevelOfDetail||t._screenSpaceError===0||n.hasTilesetContent||n.hasImplicitContent)?n._screenSpaceError:t._screenSpaceError;return e.root._screenSpaceError-o}Oi.prototype.updateVisibility=function(e){let{parent:t,tileset:n}=this;if(this._updatedVisibilityFrame===n._updatedVisibilityFrame)return;let i=c(t)?t.computedTransform:n.modelMatrix,o=c(t)?t._visibilityPlaneMask:xd.MASK_INDETERMINATE;this.updateTransform(i,e),this._distanceToCamera=this.distanceToTile(e),this._centerZDepth=this.distanceToTileCenter(e),this._screenSpaceError=this.getScreenSpaceError(e,!1),this._screenSpaceErrorProgressiveResolution=this.getScreenSpaceError(e,!1,n.progressiveResolutionHeightFraction),this._visibilityPlaneMask=this.visibility(e,o),this._visible=this._visibilityPlaneMask!==xd.MASK_OUTSIDE,this._inRequestVolume=this.insideViewerRequestVolume(e),this._priorityReverseScreenSpaceError=yxe(n,this),this._priorityProgressiveResolution=Ixe(n,this),this.priorityDeferred=Exe(this,e),this._updatedVisibilityFrame=n._updatedVisibilityFrame};Oi.prototype.updateExpiration=function(){if(c(this.expireDate)&&this.contentReady&&!this.hasEmptyContent&&!this.hasMultipleContents){let e=X.now(P9);X.lessThan(this.expireDate,e)&&(this._contentState=ji.EXPIRED,this._expiredContent=this._content)}};function bxe(e){if(!c(e.expireDuration))return;let t=X.now(P9);X.addSeconds(t,e.expireDuration,t),c(e.expireDate)?X.lessThan(e.expireDate,t)&&X.clone(t,e.expireDate):e.expireDate=X.clone(t)}function Bxe(e){return function(){return e._priority}}Oi.prototype.requestContent=function(){if(!this.hasEmptyContent)return this.hasMultipleContents?xxe(this):Sxe(this)};function xxe(e){let t=e._content,n=e._tileset;if(!c(t)){let o=Wn(e._header,"3DTILES_multiple_contents")?e._header.extensions["3DTILES_multiple_contents"]:e._header;t=new a9(n,e,e._contentResource.clone(),o),e._content=t}let i=t.requestInnerContents();if(c(i))return e._contentState=ji.LOADING,i.then(o=>{if(!e.isDestroyed()&&c(o))return e._contentState=ji.PROCESSING,t}).catch(o=>{if(!e.isDestroyed())throw e._contentState=ji.FAILED,o})}async function Txe(e,t,n,i,o){let r=e._contentState;e._contentState=ji.LOADING,++t.statistics.numberOfPendingRequests;let a;try{a=await o}catch(s){if(--t.statistics.numberOfPendingRequests,e.isDestroyed())return;if(n.cancelled||n.state===Vn.CANCELLED){e._contentState=r,++t.statistics.numberOfAttemptedRequests;return}throw e._contentState=ji.FAILED,s}if(e.isDestroyed()){--t.statistics.numberOfPendingRequests;return}if(n.cancelled||n.state===Vn.CANCELLED){e._contentState=r,--t.statistics.numberOfPendingRequests,++t.statistics.numberOfAttemptedRequests;return}try{let s=await wxe(e,a);return--t.statistics.numberOfPendingRequests,e.isDestroyed()?void 0:(i&&(e.expireDate=void 0),e._content=s,e._contentState=ji.PROCESSING,s)}catch(s){if(--t.statistics.numberOfPendingRequests,e.isDestroyed())return;throw e._contentState=ji.FAILED,s}}function Sxe(e){let t=e._contentResource.clone(),n=e.contentExpired;n&&t.setQueryParameters({expired:e.expireDate.toString()});let i=new cA({throttle:!0,throttleByServer:!0,type:sA.TILES3D,priorityFunction:Bxe(e),serverKey:e._serverKey});e._request=i,t.request=i;let o=e._tileset,r=t.fetchArrayBuffer();if(!c(r)){++o.statistics.numberOfAttemptedRequests;return}return Txe(e,o,i,n,r)}async function wxe(e,t){let n=M0(t),i=e._tileset;i._disableSkipLevelOfDetail=i._disableSkipLevelOfDetail||n.contentType===mr.GEOMETRY||n.contentType===mr.VECTOR,(n.contentType===mr.IMPLICIT_SUBTREE||n.contentType===mr.IMPLICIT_SUBTREE_JSON)&&(e.hasImplicitContent=!0,e.hasRenderableContent=!1),n.contentType===mr.EXTERNAL_TILESET&&(e.hasTilesetContent=!0,e.hasRenderableContent=!1);let o,r=R0[n.contentType];if(e.isDestroyed())return;c(n.binaryPayload)?o=await Promise.resolve(r(i,e,e._contentResource,n.binaryPayload.buffer,0)):o=await Promise.resolve(r(i,e,e._contentResource,n.jsonPayload));let a=e._contentHeader;if(e.hasImplicitContentMetadata){let A=e.implicitSubtree,l=e.implicitCoordinates;o.metadata=A.getContentMetadataView(l,0)}else e.hasImplicitContent||(o.metadata=v0(i,a));let s=P0(i,a);return c(s)&&(o.group=new Wy({metadata:s})),o}Oi.prototype.cancelRequests=function(){this.hasMultipleContents?this._content.cancelRequests():this._request.cancel()};Oi.prototype.unloadContent=function(){this.hasRenderableContent&&(this._content=this._content&&this._content.destroy(),this._contentState=ji.UNLOADED,this.lastStyleTime=0,this.clippingPlanesDirty=this._clippingPlanesState===0,this._clippingPlanesState=0,this.clippingPolygonsDirty=this._clippingPolygonsState===0,this._clippingPolygonsState=0,this._debugColorizeTiles=!1,this._debugBoundingVolume=this._debugBoundingVolume&&this._debugBoundingVolume.destroy(),this._debugContentBoundingVolume=this._debugContentBoundingVolume&&this._debugContentBoundingVolume.destroy(),this._debugViewerRequestVolume=this._debugViewerRequestVolume&&this._debugViewerRequestVolume.destroy())};var M9=new ee;function PQ(e,t){if(t.mode!==Te.SCENE3D&&!c(e._boundingVolume2D)){let n=e._boundingVolume.boundingSphere,i=ee.projectTo2D(n,t.mapProjection,M9);e._boundingVolume2D=new Dp(i.center,i.radius)}return t.mode!==Te.SCENE3D?e._boundingVolume2D:e._boundingVolume}function Dxe(e,t){if(t.mode!==Te.SCENE3D&&!c(e._contentBoundingVolume2D)){let n=e._contentBoundingVolume.boundingSphere,i=ee.projectTo2D(n,t.mapProjection,M9);e._contentBoundingVolume2D=new Dp(i.center,i.radius)}return t.mode!==Te.SCENE3D?e._contentBoundingVolume2D:e._contentBoundingVolume}Oi.prototype.visibility=function(e,t){let n=e.cullingVolume,i=PQ(this,e),o=this._tileset,r=o.clippingPlanes;if(c(r)&&r.enabled){let s=r.computeIntersectionWithBoundingVolume(i,o.clippingPlanesOriginMatrix);if(this._isClipped=s!==vt.INSIDE,s===vt.OUTSIDE)return xd.MASK_OUTSIDE}let a=o.clippingPolygons;if(c(a)&&a.enabled){let s=a.computeIntersectionWithBoundingVolume(i);this._isClippedByPolygon=s!==vt.OUTSIDE}return n.computeVisibilityWithPlaneMask(i,t)};Oi.prototype.contentVisibility=function(e){if(!c(this._contentBoundingVolume))return vt.INSIDE;if(this._visibilityPlaneMask===xd.MASK_INSIDE)return vt.INSIDE;let t=e.cullingVolume,n=Dxe(this,e),i=this._tileset,o=i.clippingPlanes;if(c(o)&&o.enabled){let a=o.computeIntersectionWithBoundingVolume(n,i.clippingPlanesOriginMatrix);if(this._isClipped=a!==vt.INSIDE,a===vt.OUTSIDE)return vt.OUTSIDE}let r=i.clippingPolygons;if(c(r)&&r.enabled){let a=r.computeIntersectionWithBoundingVolume(n);if(this._isClippedByPolygon=a!==vt.OUTSIDE,a===vt.INSIDE)return vt.OUTSIDE}return t.computeVisibility(n)};Oi.prototype.distanceToTile=function(e){return PQ(this,e).distanceToCamera(e)};var Qxe=new u;Oi.prototype.distanceToTileCenter=function(e){let n=PQ(this,e).boundingVolume,i=u.subtract(n.center,e.camera.positionWC,Qxe);return u.dot(e.camera.directionWC,i)};Oi.prototype.insideViewerRequestVolume=function(e){let t=this._viewerRequestVolume;return!c(t)||t.distanceToCamera(e)===0};var O9=new J,L9=new u,Rxe=new J,MQ=new u,N9=new ce,F9=new To,vQ=new O;function vxe(e,t,n){let i=u.fromElements(e[0],e[1],e[2],MQ),o=J.fromArray(e,3,Rxe);i=O.multiplyByPoint(t,i,i);let r=O.getMatrix3(t,O9);return o=J.multiply(r,o,o),c(n)?(n.update(i,o),n):new Gc(i,o)}function D9(e,t,n,i){let o=ce.unpack(e,0,N9),r=e[4],a=e[5],s=To.fromRectangle(o,r,a,Z.WGS84,F9),A=s.center,l=s.halfAxes;t=O.multiplyTransformation(t,O.inverseTransformation(n,vQ),vQ),A=O.multiplyByPoint(t,A,A);let f=O.getMatrix3(t,O9);return l=J.multiply(f,l,l),c(i)&&i instanceof Gc?(i.update(A,l),i):new Gc(A,l)}function Pxe(e,t,n,i){if(!O.equalsEpsilon(t,n,w.EPSILON8))return i instanceof Gc?D9(e,t,n,i):D9(e,t,n,void 0);let o=ce.unpack(e,0,N9);return i instanceof Nu?(i.rectangle=ce.clone(o,i.rectangle),i.minimumHeight=e[4],i.maximumHeight=e[5],i.computeBoundingVolumes(Z.WGS84),i):new Nu({rectangle:o,minimumHeight:e[4],maximumHeight:e[5]})}function Mxe(e,t,n){let i=u.fromElements(e[0],e[1],e[2],MQ),o=e[3];i=O.multiplyByPoint(t,i,i);let r=O.getScale(t,L9),a=u.maximumComponent(r);return o*=a,c(n)?(n.update(i,o),n):new Dp(i,o)}Oi.prototype.createBoundingVolume=function(e,t,n){let i=this.metadata,o;if(c(i)&&(o=Tb.parseBoundingVolumeSemantic("TILE",i)),c(o)&&(e=o),!c(e))throw new oe("boundingVolume must be defined");if(Wn(e,"3DTILES_bounding_volume_S2"))return new B9(e.extensions["3DTILES_bounding_volume_S2"]);let{box:r,region:a,sphere:s}=e;if(c(r)){let A=vxe(r,t,n);return this._verticalExaggeration!==1&&Q9(A,this._verticalExaggeration,this._verticalExaggerationRelativeHeight),A}if(c(a)){let A=Pxe(a,t,this._initialTransform,n);return this._verticalExaggeration===1||(A instanceof Gc?Q9(A,this._verticalExaggeration,this._verticalExaggerationRelativeHeight):(A.minimumHeight=EA.getHeight(A.minimumHeight,this._verticalExaggeration,this._verticalExaggerationRelativeHeight),A.maximumHeight=EA.getHeight(A.maximumHeight,this._verticalExaggeration,this._verticalExaggerationRelativeHeight),A.computeBoundingVolumes(Z.WGS84))),A}if(c(s)){let A=Mxe(s,t,n);if(this._verticalExaggeration!==1){let l=EA.getPosition(A.center,Z.WGS84,this._verticalExaggeration,this._verticalExaggerationRelativeHeight,MQ),f=A.radius*this._verticalExaggeration;A.update(l,f)}return A}throw new oe("boundingVolume must contain a sphere, region, or box")};var Oxe=u.unpackArray(new Array(24).fill(0));function Q9(e,t,n){let i=e.boundingVolume.computeCorners(Oxe).map(r=>EA.getPosition(r,Z.WGS84,t,n,r)),o=To.fromPoints(i,F9);e.update(o.center,o.halfAxes)}Oi.prototype.updateTransform=function(e,t){e=e??O.IDENTITY;let n=O.multiplyTransformation(e,this.transform,vQ),i=!O.equals(n,this.computedTransform),o=c(t)&&(this._verticalExaggeration!==t.verticalExaggeration||this._verticalExaggerationRelativeHeight!==t.verticalExaggerationRelativeHeight);if(!i&&!o)return;i&&O.clone(n,this.computedTransform),o&&(this._verticalExaggeration=t.verticalExaggeration,this._verticalExaggerationRelativeHeight=t.verticalExaggerationRelativeHeight);let r=this._header,a=this._contentHeader;this._boundingVolume=this.createBoundingVolume(r.boundingVolume,this.computedTransform,this._boundingVolume),c(this._contentBoundingVolume)&&(this._contentBoundingVolume=this.createBoundingVolume(a.boundingVolume,this.computedTransform,this._contentBoundingVolume)),c(this._viewerRequestVolume)&&(this._viewerRequestVolume=this.createBoundingVolume(r.viewerRequestVolume,this.computedTransform,this._viewerRequestVolume)),this.updateGeometricErrorScale(),this._debugBoundingVolume=this._debugBoundingVolume&&this._debugBoundingVolume.destroy(),this._debugContentBoundingVolume=this._debugContentBoundingVolume&&this._debugContentBoundingVolume.destroy(),this._debugViewerRequestVolume=this._debugViewerRequestVolume&&this._debugViewerRequestVolume.destroy()};Oi.prototype.updateGeometricErrorScale=function(){let e=O.getScale(this.computedTransform,L9),t=u.maximumComponent(e);if(this.geometricError=this._geometricError*t,!c(this.parent)){let n=this._tileset;n._scaledGeometricError=n._geometricError*t}};function Lxe(e,t,n,i){if(!i.isRender)return;let o=c(e._contentHeader)&&c(e._contentHeader.boundingVolume),r=t.debugShowBoundingVolume||t.debugShowContentBoundingVolume&&!o;if(r){let A;e._finalResolution?e.hasRenderableContent?A=F.WHITE:A=F.DARKGRAY:A=F.YELLOW,c(e._debugBoundingVolume)||(e._debugBoundingVolume=e._boundingVolume.createDebugVolume(A)),e._debugBoundingVolume.update(n);let l=e._debugBoundingVolume.getGeometryInstanceAttributes("outline");l.color=Tt.toValue(A,l.color)}else!r&&c(e._debugBoundingVolume)&&(e._debugBoundingVolume=e._debugBoundingVolume.destroy());t.debugShowContentBoundingVolume&&o?(c(e._debugContentBoundingVolume)||(e._debugContentBoundingVolume=e._contentBoundingVolume.createDebugVolume(F.BLUE)),e._debugContentBoundingVolume.update(n)):!t.debugShowContentBoundingVolume&&c(e._debugContentBoundingVolume)&&(e._debugContentBoundingVolume=e._debugContentBoundingVolume.destroy()),t.debugShowViewerRequestVolume&&c(e._viewerRequestVolume)?(c(e._debugViewerRequestVolume)||(e._debugViewerRequestVolume=e._viewerRequestVolume.createDebugVolume(F.YELLOW)),e._debugViewerRequestVolume.update(n)):!t.debugShowViewerRequestVolume&&c(e._debugViewerRequestVolume)&&(e._debugViewerRequestVolume=e._debugViewerRequestVolume.destroy());let a=t.debugColorizeTiles&&!e._debugColorizeTiles||c(t._heatmap.tilePropertyName),s=!t.debugColorizeTiles&&e._debugColorizeTiles;a?(t._heatmap.colorize(e,n),e._debugColorizeTiles=!0,e.color=e._debugColor):s&&(e._debugColorizeTiles=!1,e.color=F.WHITE),e._colorDirty&&(e._colorDirty=!1,e._content.applyDebugSettings(!0,e._color)),s&&t.makeStyleDirty()}function Nxe(e,t,n){let i=e._expiredContent;if(!e.hasMultipleContents&&c(i)){if(!e.contentReady){try{i.update(t,n)}catch{}return}e._expiredContent.destroy(),e._expiredContent=void 0}if(c(e.content))try{e.content.update(t,n)}catch(o){throw e._contentState=ji.FAILED,o}}function Fxe(e,t){let n=t.clippingPlanes,i=0;c(n)&&e._isClipped&&n.enabled&&(i=n.clippingPlanesState),i!==e._clippingPlanesState&&(e._clippingPlanesState=i,e.clippingPlanesDirty=!0)}function kxe(e,t){let n=t.clippingPolygons,i=0;c(n)&&e._isClippedByPolygon&&n.enabled&&(i=n.clippingPolygonsState),i!==e._clippingPolygonsState&&(e._clippingPolygonsState=i,e.clippingPolygonsDirty=!0)}Oi.prototype.update=function(e,t,n){let{commandList:i}=t,o=i.length;Fxe(this,e),kxe(this,e),Lxe(this,e,t,n),Nxe(this,e,t);let r=i.length;this._commandsLength=r-o;for(let a=o;a<r;++a){let s=i[a],A=s.pass===Ye.TRANSLUCENT;s.depthForTranslucentClassification=A}this.clippingPlanesDirty=!1,this.clippingPolygonsDirty=!1};var R9=[];Oi.prototype.process=function(e,t){!this.contentExpired&&!this.contentReady&&this._content.ready&&(bxe(this),this._selectedFrame=0,this.lastStyleTime=0,X.now(this._loadTimestamp),this._contentState=ji.READY,!this.hasTilesetContent&&!this.hasImplicitContent&&(e._statistics.incrementLoadCounts(this.content),++e._statistics.numberOfTilesWithContentReady,++e._statistics.numberOfLoadedTilesTotal,e._cache.add(this)));let n=t.commandList;t.commandList=R9;try{this._content.update(e,t)}catch(i){throw this._contentState=ji.FAILED,i}R9.length=0,t.commandList=n};function v9(e,t,n){let i=e*Math.pow(10,t);return parseInt(i)*Math.pow(10,n)}function G0(e,t,n){return Math.max(w.normalize(e,t,n)-w.EPSILON7,0)}Oi.prototype.updatePriority=function(){let e=this.tileset,t=e.preferLeaves,n=e._minimumPriority,i=e._maximumPriority,o=4,r=1,a=0,s=o,A=a+s,l=o,f=A+l,h=r,m=Math.pow(10,f),p=f+h,g=r,C=Math.pow(10,p),_=p+g,E=Math.pow(10,_),I=G0(this._depth,n.depth,i.depth);I=t?1-I:I;let b=!e.isSkippingLevelOfDetail&&this.refine===Vi.REPLACE?G0(this._priorityHolder._distanceToCamera,n.distance,i.distance):G0(this._priorityReverseScreenSpaceError,n.reverseScreenSpaceError,i.reverseScreenSpaceError),x=v9(b,s,a),S=this._priorityProgressiveResolution?0:m,P=G0(this._priorityHolder._foveatedFactor,n.foveatedFactor,i.foveatedFactor),D=v9(P,l,A),Q=this.priorityDeferred?C:0,v=e._pass===fs.PRELOAD_FLIGHT?0:E;this._priority=I+x+S+D+Q+v};Oi.prototype.isDestroyed=function(){return!1};Oi.prototype.destroy=function(){return this._content=this._content&&this._content.destroy(),this._expiredContent=this._expiredContent&&!this._expiredContent.isDestroyed()&&this._expiredContent.destroy(),this._debugBoundingVolume=this._debugBoundingVolume&&this._debugBoundingVolume.destroy(),this._debugContentBoundingVolume=this._debugContentBoundingVolume&&this._debugContentBoundingVolume.destroy(),this._debugViewerRequestVolume=this._debugViewerRequestVolume&&this._debugViewerRequestVolume.destroy(),pe(this)};var OQ=Oi;function tf(e){e=e??k.EMPTY_OBJECT;let t=e.id,n=e.group,i=e.class,o=c(n.properties)?n.properties:{};this._class=i,this._properties=o,this._id=t,this._extras=n.extras,this._extensions=n.extensions}Object.defineProperties(tf.prototype,{class:{get:function(){return this._class}},id:{get:function(){return this._id}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}}});tf.prototype.hasProperty=function(e){return en.hasProperty(e,this._properties,this._class)};tf.prototype.hasPropertyBySemantic=function(e){return en.hasPropertyBySemantic(e,this._properties,this._class)};tf.prototype.getPropertyIds=function(e){return en.getPropertyIds(this._properties,this._class,e)};tf.prototype.getProperty=function(e){return en.getProperty(e,this._properties,this._class)};tf.prototype.setProperty=function(e,t){return en.setProperty(e,t,this._properties,this._class)};tf.prototype.getPropertyBySemantic=function(e){return en.getPropertyBySemantic(e,this._properties,this._class)};tf.prototype.setPropertyBySemantic=function(e,t){return en.setPropertyBySemantic(e,t,this._properties,this._class)};var LQ=tf;function nf(e){e=e??k.EMPTY_OBJECT;let t=e.tileset,n=e.class,i=c(t.properties)?t.properties:{};this._class=n,this._properties=i,this._extras=t.extras,this._extensions=t.extensions}Object.defineProperties(nf.prototype,{class:{get:function(){return this._class}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}}});nf.prototype.hasProperty=function(e){return en.hasProperty(e,this._properties,this._class)};nf.prototype.hasPropertyBySemantic=function(e){return en.hasPropertyBySemantic(e,this._properties,this._class)};nf.prototype.getPropertyIds=function(e){return en.getPropertyIds(this._properties,this._class,e)};nf.prototype.getProperty=function(e){return en.getProperty(e,this._properties,this._class)};nf.prototype.setProperty=function(e,t){return en.setProperty(e,t,this._properties,this._class)};nf.prototype.getPropertyBySemantic=function(e){return en.getPropertyBySemantic(e,this._properties,this._class)};nf.prototype.setPropertyBySemantic=function(e,t){return en.setPropertyBySemantic(e,t,this._properties,this._class)};var k9=nf;function U9(e){e=e??k.EMPTY_OBJECT;let t=e.metadataJson,n=e.schema,i=t.metadata??t.tileset,o;c(i)&&(o=new k9({tileset:i,class:n.classes[i.class]}));let r=[],a=[],s=t.groups;if(Array.isArray(s)){let A=s.length;for(let l=0;l<A;l++){let f=s[l];a.push(new LQ({group:f,class:n.classes[f.class]}))}}else if(c(s)){r=Object.keys(s).sort();let A=r.length;for(let l=0;l<A;l++){let f=r[l];if(s.hasOwnProperty(f)){let h=s[f];a.push(new LQ({id:f,group:s[f],class:n.classes[h.class]}))}}}this._schema=n,this._groups=a,this._groupIds=r,this._tileset=o,this._statistics=t.statistics,this._extras=t.extras,this._extensions=t.extensions}Object.defineProperties(U9.prototype,{schema:{get:function(){return this._schema}},groups:{get:function(){return this._groups}},groupIds:{get:function(){return this._groupIds}},tileset:{get:function(){return this._tileset}},statistics:{get:function(){return this._statistics}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}}});var G9=U9;var z9={},Uxe=new u;z9.checkChildrenWithinParent=function(e){let t=e.children,n=t.length,i=e.boundingVolume;if(i instanceof Gc||i instanceof Nu){let o=i._orientedBoundingBox;e._optimChildrenWithinParent=Jl.USE_OPTIMIZATION;for(let r=0;r<n;++r){let s=t[r].boundingVolume;if(!(s instanceof Gc||s instanceof Nu)){e._optimChildrenWithinParent=Jl.SKIP_OPTIMIZATION;break}let A=s._orientedBoundingBox,l=u.subtract(A.center,o.center,Uxe),f=u.magnitude(l);u.divideByScalar(l,f,l);let h=Math.abs(o.halfAxes[0]*l.x)+Math.abs(o.halfAxes[1]*l.y)+Math.abs(o.halfAxes[2]*l.z)+Math.abs(o.halfAxes[3]*l.x)+Math.abs(o.halfAxes[4]*l.y)+Math.abs(o.halfAxes[5]*l.z)+Math.abs(o.halfAxes[6]*l.x)+Math.abs(o.halfAxes[7]*l.y)+Math.abs(o.halfAxes[8]*l.z),m=Math.abs(A.halfAxes[0]*l.x)+Math.abs(A.halfAxes[1]*l.y)+Math.abs(A.halfAxes[2]*l.z)+Math.abs(A.halfAxes[3]*l.x)+Math.abs(A.halfAxes[4]*l.y)+Math.abs(A.halfAxes[5]*l.z)+Math.abs(A.halfAxes[6]*l.x)+Math.abs(A.halfAxes[7]*l.y)+Math.abs(A.halfAxes[8]*l.z);if(h<=m+f){e._optimChildrenWithinParent=Jl.SKIP_OPTIMIZATION;break}}}return e._optimChildrenWithinParent===Jl.USE_OPTIMIZATION};var H9=z9;function W_(){this.head=void 0,this.tail=void 0,this._length=0}Object.defineProperties(W_.prototype,{length:{get:function(){return this._length}}});function Gxe(e,t,n){this.item=e,this.previous=t,this.next=n}W_.prototype.add=function(e){let t=new Gxe(e,this.tail,void 0);return c(this.tail)?(this.tail.next=t,this.tail=t):(this.head=t,this.tail=t),++this._length,t};function V9(e,t){c(t.previous)&&c(t.next)?(t.previous.next=t.next,t.next.previous=t.previous):c(t.previous)?(t.previous.next=void 0,e.tail=t.previous):c(t.next)?(t.next.previous=void 0,e.head=t.next):(e.head=void 0,e.tail=void 0),t.next=void 0,t.previous=void 0}W_.prototype.remove=function(e){c(e)&&(V9(this,e),--this._length)};W_.prototype.splice=function(e,t){if(e===t)return;V9(this,t);let n=e.next;e.next=t,this.tail===e?this.tail=t:n.previous=t,t.next=n,t.previous=e};var j9=W_;function ph(){this._list=new j9,this._sentinel=this._list.add(),this._trimTiles=!1}ph.prototype.reset=function(){this._list.splice(this._list.tail,this._sentinel)};ph.prototype.touch=function(e){let t=e.cacheNode;c(t)&&this._list.splice(this._sentinel,t)};ph.prototype.add=function(e){c(e.cacheNode)||(e.cacheNode=this._list.add(e))};ph.prototype.unloadTile=function(e,t,n){let i=t.cacheNode;c(i)&&(this._list.remove(i),t.cacheNode=void 0,n(e,t))};ph.prototype.unloadTiles=function(e,t){let n=this._trimTiles;this._trimTiles=!1;let i=this._list,o=this._sentinel,r=i.head;for(;r!==o&&(e.totalMemoryUsageInBytes>e.cacheBytes||n);){let a=r.item;r=r.next,this.unloadTile(e,a,t)}};ph.prototype.trim=function(){this._trimTiles=!0};var Y9=ph;function z0(e){this.tilePropertyName=e,this._minimum=Number.MAX_VALUE,this._maximum=-Number.MAX_VALUE,this._previousMinimum=Number.MAX_VALUE,this._previousMaximum=-Number.MAX_VALUE,this._referenceMinimum={},this._referenceMaximum={}}function FQ(e,t){let n;return t==="_loadTimestamp"?n=X.toDate(e).getTime():n=e,n}z0.prototype.setReferenceMinimumMaximum=function(e,t,n){this._referenceMinimum[n]=FQ(e,n),this._referenceMaximum[n]=FQ(t,n)};function zxe(e,t){let n=e.tilePropertyName;if(c(n)){let i=FQ(t[n],n);return c(i)?(e._maximum=Math.max(i,e._maximum),e._minimum=Math.min(i,e._minimum),i):(e.tilePropertyName=void 0,i)}}var NQ=[new F(.1,.1,.1,1),new F(.153,.278,.878,1),new F(.827,.231,.49,1),new F(.827,.188,.22,1),new F(1,.592,.259,1),new F(1,.843,0,1)];z0.prototype.colorize=function(e,t){let n=this.tilePropertyName;if(!c(n)||!e.contentAvailable||e._selectedFrame!==t.frameNumber)return;let i=zxe(this,e),o=this._previousMinimum,r=this._previousMaximum;if(o===Number.MAX_VALUE||r===-Number.MAX_VALUE)return;let a=r-o+w.EPSILON7,A=w.clamp(i-o,0,a)/a,l=NQ.length-1,f=A*l,h=Math.floor(f),m=Math.ceil(f),p=f-h,g=NQ[h],C=NQ[m],_=F.clone(F.WHITE);_.red=w.lerp(g.red,C.red,p),_.green=w.lerp(g.green,C.green,p),_.blue=w.lerp(g.blue,C.blue,p),e._debugColor=_};z0.prototype.resetMinimumMaximum=function(){let e=this.tilePropertyName;if(c(e)){let t=this._referenceMinimum[e],n=this._referenceMaximum[e],i=c(t)&&c(n);this._previousMinimum=i?t:this._minimum,this._previousMaximum=i?n:this._maximum,this._minimum=Number.MAX_VALUE,this._maximum=-Number.MAX_VALUE}};var q9=z0;function Rp(){this.selected=0,this.visited=0,this.numberOfCommands=0,this.numberOfAttemptedRequests=0,this.numberOfPendingRequests=0,this.numberOfTilesProcessing=0,this.numberOfTilesWithContentReady=0,this.numberOfTilesTotal=0,this.numberOfLoadedTilesTotal=0,this.numberOfFeaturesSelected=0,this.numberOfFeaturesLoaded=0,this.numberOfPointsSelected=0,this.numberOfPointsLoaded=0,this.numberOfTrianglesSelected=0,this.numberOfTilesStyled=0,this.numberOfFeaturesStyled=0,this.numberOfTilesCulledWithChildrenUnion=0,this.geometryByteLength=0,this.texturesByteLength=0,this.texturesReferenceCounterById={},this.batchTableByteLength=0}Rp.prototype.clear=function(){this.selected=0,this.visited=0,this.numberOfCommands=0,this.numberOfAttemptedRequests=0,this.numberOfFeaturesSelected=0,this.numberOfPointsSelected=0,this.numberOfTrianglesSelected=0,this.numberOfTilesStyled=0,this.numberOfFeaturesStyled=0,this.numberOfTilesCulledWithChildrenUnion=0};Rp.prototype.incrementSelectionCounts=function(e){this.numberOfFeaturesSelected+=e.featuresLength,this.numberOfPointsSelected+=e.pointsLength,this.numberOfTrianglesSelected+=e.trianglesLength;let t=e.innerContents;if(c(t)){let n=t.length;for(let i=0;i<n;++i)this.incrementSelectionCounts(t[i])}};Rp.prototype.incrementLoadCounts=function(e){if(this.numberOfFeaturesLoaded+=e.featuresLength,this.numberOfPointsLoaded+=e.pointsLength,this.geometryByteLength+=e.geometryByteLength,this.batchTableByteLength+=e.batchTableByteLength,!(e instanceof LA))this.texturesByteLength+=e.texturesByteLength;else{let n=e.getTextureIds();for(let i of n){let o=this.texturesReferenceCounterById[i]??0;if(o===0){let r=e.getTextureByteLengthById(i);this.texturesByteLength+=r}this.texturesReferenceCounterById[i]=o+1}}let t=e.innerContents;if(c(t)){let n=t.length;for(let i=0;i<n;++i)this.incrementLoadCounts(t[i])}};Rp.prototype.decrementLoadCounts=function(e){if(this.numberOfFeaturesLoaded-=e.featuresLength,this.numberOfPointsLoaded-=e.pointsLength,this.geometryByteLength-=e.geometryByteLength,this.batchTableByteLength-=e.batchTableByteLength,!(e instanceof LA))this.texturesByteLength-=e.texturesByteLength;else{let n=e.getTextureIds();for(let i of n){let o=this.texturesReferenceCounterById[i];if(o===1){delete this.texturesReferenceCounterById[i];let r=e.getTextureByteLengthById(i);this.texturesByteLength-=r}else this.texturesReferenceCounterById[i]=o-1}}let t=e.innerContents;if(c(t)){let n=t.length;for(let i=0;i<n;++i)this.decrementLoadCounts(t[i])}};Rp.clone=function(e,t){t.selected=e.selected,t.visited=e.visited,t.numberOfCommands=e.numberOfCommands,t.numberOfAttemptedRequests=e.numberOfAttemptedRequests,t.numberOfPendingRequests=e.numberOfPendingRequests,t.numberOfTilesProcessing=e.numberOfTilesProcessing,t.numberOfTilesWithContentReady=e.numberOfTilesWithContentReady,t.numberOfTilesTotal=e.numberOfTilesTotal,t.numberOfFeaturesSelected=e.numberOfFeaturesSelected,t.numberOfFeaturesLoaded=e.numberOfFeaturesLoaded,t.numberOfPointsSelected=e.numberOfPointsSelected,t.numberOfPointsLoaded=e.numberOfPointsLoaded,t.numberOfTrianglesSelected=e.numberOfTrianglesSelected,t.numberOfTilesStyled=e.numberOfTilesStyled,t.numberOfFeaturesStyled=e.numberOfFeaturesStyled,t.numberOfTilesCulledWithChildrenUnion=e.numberOfTilesCulledWithChildrenUnion,t.geometryByteLength=e.geometryByteLength,t.texturesByteLength=e.texturesByteLength,t.texturesReferenceCounterById={...e.texturesReferenceCounterById},t.batchTableByteLength=e.batchTableByteLength};var vp=Rp;function J_(){this._style=void 0,this._styleDirty=!1,this._lastStyleTime=0}Object.defineProperties(J_.prototype,{style:{get:function(){return this._style},set:function(e){e!==this._style&&(this._style=e,this._styleDirty=!0)}}});J_.prototype.makeDirty=function(){this._styleDirty=!0};J_.prototype.resetDirty=function(){this._styleDirty=!1};J_.prototype.applyStyle=function(e){if(!c(e.root)||c(this._style)&&!this._style._ready)return;let t=this._styleDirty;t&&++this._lastStyleTime;let n=this._lastStyleTime,i=e._statistics,o=t?e._selectedTiles:e._selectedTilesToStyle,r=o.length;for(let a=0;a<r;++a){let s=o[a];if(s.lastStyleTime!==n){let A=s.content;s.lastStyleTime=n,A.applyStyle(this._style),i.numberOfFeaturesStyled+=A.featuresLength,++i.numberOfTilesStyled}}};var W9=J_;function Hxe(e,t,n){let i=Wn(t,"3DTILES_implicit_tiling")?t.extensions["3DTILES_implicit_tiling"]:t.implicitTiling;this.baseResource=e,this.geometricError=t.geometricError,this.metadataSchema=n;let o=t.boundingVolume;if(!c(o.box)&&!c(o.region)&&!Wn(o,"3DTILES_bounding_volume_S2")&&!Wn(o,"3DTILES_bounding_volume_cylinder"))throw new oe("Only box, region, 3DTILES_bounding_volume_S2, and 3DTILES_bounding_volume_cylinder are supported for implicit tiling");this.boundingVolume=o,this.refine=t.refine,this.subtreeUriTemplate=new ke({url:i.subtrees.uri}),this.contentUriTemplates=[],this.contentHeaders=[];let r=Vxe(t);for(let a=0;a<r.length;a++){let s=r[a];this.contentHeaders.push(Ne(s,!0));let A=new ke({url:s.uri});this.contentUriTemplates.push(A)}this.contentCount=this.contentHeaders.length,this.tileHeader=jxe(t),this.subdivisionScheme=Go[i.subdivisionScheme],this.branchingFactor=Go.getBranchingFactor(this.subdivisionScheme),this.subtreeLevels=i.subtreeLevels,c(i.availableLevels)?this.availableLevels=i.availableLevels:this.availableLevels=i.maximumLevel+1}function Vxe(e){if(Wn(e,"3DTILES_multiple_contents")){let t=e.extensions["3DTILES_multiple_contents"];return c(t.contents)?t.contents:t.content}return c(e.contents)?e.contents:c(e.content)?[e.content]:[]}function jxe(e){let t=Ne(e,!0);return c(t.extensions)&&(delete t.extensions["3DTILES_implicit_tiling"],delete t.extensions["3DTILES_multiple_contents"],Object.keys(t.extensions).length===0&&delete t.extensions),delete t.implicitTiling,delete t.contents,delete t.content,t}var J9=Hxe;var K_={};function K9(e){return e=(e^e<<8)&16711935,e=(e^e<<4)&252645135,e=(e^e<<2)&858993459,e=(e^e<<1)&1431655765,e}function kQ(e){return e=(e^e<<16)&50331903,e=(e^e<<8)&50393103,e=(e^e<<4)&51130563,e=(e^e<<2)&153391689,e}function X9(e){return e&=1431655765,e=(e^e>>1)&858993459,e=(e^e>>2)&252645135,e=(e^e>>4)&16711935,e=(e^e>>8)&65535,e}function UQ(e){return e&=153391689,e=(e^e>>2)&51130563,e=(e^e>>4)&50393103,e=(e^e>>8)&4278190335,e=(e^e>>16)&1023,e}K_.encode2D=function(e,t){return(K9(e)|K9(t)<<1)>>>0};K_.decode2D=function(e,t){return c(t)||(t=new Array(2)),t[0]=X9(e),t[1]=X9(e>>1),t};K_.encode3D=function(e,t,n){return kQ(e)|kQ(t)<<1|kQ(n)<<2};K_.decode3D=function(e,t){return c(t)||(t=new Array(3)),t[0]=UQ(e),t[1]=UQ(e>>1),t[2]=UQ(e>>2),t};var X_=K_;function Si(e){this.subdivisionScheme=e.subdivisionScheme,this.subtreeLevels=e.subtreeLevels,this.level=e.level,this.x=e.x,this.y=e.y,this.z=void 0,e.subdivisionScheme===Go.OCTREE&&(this.z=e.z)}Object.defineProperties(Si.prototype,{childIndex:{get:function(){let e=0;return e|=this.x&1,e|=(this.y&1)<<1,this.subdivisionScheme===Go.OCTREE&&(e|=(this.z&1)<<2),e}},mortonIndex:{get:function(){return this.subdivisionScheme===Go.OCTREE?X_.encode3D(this.x,this.y,this.z):X_.encode2D(this.x,this.y)}},tileIndex:{get:function(){let e=this.subdivisionScheme===Go.OCTREE?((1<<3*this.level)-1)/7:((1<<2*this.level)-1)/3,t=this.mortonIndex;return e+t}}});Si.prototype.getDescendantCoordinates=function(e){let t=this.level+e.level,n=(this.x<<e.level)+e.x,i=(this.y<<e.level)+e.y;if(this.subdivisionScheme===Go.OCTREE){let o=(this.z<<e.level)+e.z;return new Si({subdivisionScheme:this.subdivisionScheme,subtreeLevels:this.subtreeLevels,level:t,x:n,y:i,z:o})}return new Si({subdivisionScheme:this.subdivisionScheme,subtreeLevels:this.subtreeLevels,level:t,x:n,y:i})};Si.prototype.getAncestorCoordinates=function(e){let t=1<<e,n=this.level-e,i=Math.floor(this.x/t),o=Math.floor(this.y/t);if(this.subdivisionScheme===Go.OCTREE){let r=Math.floor(this.z/t);return new Si({subdivisionScheme:this.subdivisionScheme,subtreeLevels:this.subtreeLevels,level:n,x:i,y:o,z:r})}return new Si({subdivisionScheme:this.subdivisionScheme,subtreeLevels:this.subtreeLevels,level:n,x:i,y:o})};Si.prototype.getOffsetCoordinates=function(e){let t=e.level-this.level,n=1<<t,i=e.x%n,o=e.y%n;if(this.subdivisionScheme===Go.OCTREE){let r=e.z%n;return new Si({subdivisionScheme:this.subdivisionScheme,subtreeLevels:this.subtreeLevels,level:t,x:i,y:o,z:r})}return new Si({subdivisionScheme:this.subdivisionScheme,subtreeLevels:this.subtreeLevels,level:t,x:i,y:o})};Si.prototype.getChildCoordinates=function(e){let t=this.level+1,n=2*this.x+e%2,i=2*this.y+Math.floor(e/2)%2;if(this.subdivisionScheme===Go.OCTREE){let o=2*this.z+Math.floor(e/4)%2;return new Si({subdivisionScheme:this.subdivisionScheme,subtreeLevels:this.subtreeLevels,level:t,x:n,y:i,z:o})}return new Si({subdivisionScheme:this.subdivisionScheme,subtreeLevels:this.subtreeLevels,level:t,x:n,y:i})};Si.prototype.getSubtreeCoordinates=function(){return this.getAncestorCoordinates(this.level%this.subtreeLevels)};Si.prototype.getParentSubtreeCoordinates=function(){return this.getAncestorCoordinates(this.level%this.subtreeLevels+this.subtreeLevels)};Si.prototype.isAncestor=function(e){let t=e.level-this.level;if(t<=0)return!1;let n=e.x>>t,i=e.y>>t,o=this.x===n,r=this.y===i;if(this.subdivisionScheme===Go.OCTREE){let a=e.z>>t,s=this.z===a;return o&&r&&s}return o&&r};Si.prototype.isEqual=function(e){return this.subdivisionScheme===e.subdivisionScheme&&this.subtreeLevels===e.subtreeLevels&&this.level===e.level&&this.x===e.x&&this.y===e.y&&(this.subdivisionScheme===Go.OCTREE?this.z===e.z:!0)};Si.prototype.isImplicitTilesetRoot=function(){return this.level===0};Si.prototype.isSubtreeRoot=function(){return this.level%this.subtreeLevels===0};Si.prototype.isBottomOfSubtree=function(){return this.level%this.subtreeLevels===this.subtreeLevels-1};Si.prototype.getTemplateValues=function(){let e={level:this.level,x:this.x,y:this.y};return this.subdivisionScheme===Go.OCTREE&&(e.z=this.z),e};var Z9=[0,0,0];Si.fromMortonIndex=function(e,t,n,i){let o;return e===Go.OCTREE?(o=X_.decode3D(i,Z9),new Si({subdivisionScheme:e,subtreeLevels:t,level:n,x:o[0],y:o[1],z:o[2]})):(o=X_.decode2D(i,Z9),new Si({subdivisionScheme:e,subtreeLevels:t,level:n,x:o[0],y:o[1]}))};Si.fromTileIndex=function(e,t,n){let i,o,r;return e===Go.OCTREE?(i=Math.floor(w.log2(7*n+1)/3),o=((1<<3*i)-1)/7,r=n-o):(i=Math.floor(w.log2(3*n+1)/2),o=((1<<2*i)-1)/3,r=n-o),Si.fromMortonIndex(e,t,i,r)};var $9=Si;function of(){}of.selectTiles=function(e,t){Ee.throwInstantiationError()};of.sortChildrenByDistanceToCamera=function(e,t){return t._distanceToCamera===0&&e._distanceToCamera===0?t._centerZDepth-e._centerZDepth:t._distanceToCamera-e._distanceToCamera};of.canTraverse=function(e){return e.children.length===0?!1:e.hasTilesetContent||e.hasImplicitContent?!e.contentExpired:e._screenSpaceError>e.tileset.memoryAdjustedScreenSpaceError};of.selectTile=function(e,t){if(e.contentVisibility(t)===vt.OUTSIDE)return;e._wasSelectedLastFrame=!0;let{content:n,tileset:i}=e;n.featurePropertiesDirty?(n.featurePropertiesDirty=!1,e.lastStyleTime=0,i._selectedTilesToStyle.push(e)):e._selectedFrame<t.frameNumber-1&&(i._selectedTilesToStyle.push(e),e._wasSelectedLastFrame=!1),e._selectedFrame=t.frameNumber,i._selectedTiles.push(e)};of.visitTile=function(e,t){++e.tileset._statistics.visited,e._visitedFrame=t.frameNumber};of.touchTile=function(e,t){e._touchedFrame!==t.frameNumber&&(e.tileset._cache.touch(e),e._touchedFrame=t.frameNumber)};of.loadTile=function(e,t){let{tileset:n}=e;if(e._requestedFrame===t.frameNumber||!e.hasUnloadedRenderableContent&&!e.contentExpired||!Yxe(e,t))return;let i=t.camera.timeSinceMoved<n.foveatedTimeDelay;e.priorityDeferred&&i||(e._requestedFrame=t.frameNumber,n._requestedTiles.push(e))};function Yxe(e,t){let{tileset:n}=e;if(!n._cullRequestsWhileMoving)return!0;let{positionWCDeltaMagnitude:i,positionWCDeltaMagnitudeLastFrame:o}=t.camera,r=i!==0?i:o,a=Math.max(e.boundingSphere.radius*2,1);return n.cullRequestsWhileMovingMultiplier*r/a<1}of.updateTile=function(e,t){eY(e,t),e.updateExpiration(),e._wasMinPriorityChild=!1,e._priorityHolder=e,Jxe(e),e._shouldSelect=!1,e._finalResolution=!0};function eY(e,t){if(e.updateVisibility(t),!e.isVisible)return;let n=e.children.length>0;if((e.hasTilesetContent||e.hasImplicitContent)&&n){let r=e.children[0];eY(r,t),e._visible=r._visible;return}if(qxe(e,t)){e._visible=!1;return}let i=e.refine===Vi.REPLACE,o=e._optimChildrenWithinParent===Jl.USE_OPTIMIZATION;if(i&&o&&n&&!Wxe(e,t)){++e.tileset._statistics.numberOfTilesCulledWithChildrenUnion,e._visible=!1;return}}function qxe(e,t){let{parent:n,tileset:i}=e;return!c(n)||n.hasTilesetContent||n.hasImplicitContent||n.refine!==Vi.ADD?!1:e.getScreenSpaceError(t,!0)<=i.memoryAdjustedScreenSpaceError}function Wxe(e,t){let n=!1,i=e.children;for(let o=0;o<i.length;++o){let r=i[o];r.updateVisibility(t),n=n||r.isVisible}return n}function Jxe(e){let t=e.tileset._minimumPriority,n=e.tileset._maximumPriority,i=e._priorityHolder;n.distance=Math.max(i._distanceToCamera,n.distance),t.distance=Math.min(i._distanceToCamera,t.distance),n.depth=Math.max(e._depth,n.depth),t.depth=Math.min(e._depth,t.depth),n.foveatedFactor=Math.max(i._foveatedFactor,n.foveatedFactor),t.foveatedFactor=Math.min(i._foveatedFactor,t.foveatedFactor),n.reverseScreenSpaceError=Math.max(e._priorityReverseScreenSpaceError,n.reverseScreenSpaceError),t.reverseScreenSpaceError=Math.min(e._priorityReverseScreenSpaceError,t.reverseScreenSpaceError)}var Nr=of;function tY(){}var Z_={stack:new Gs,stackMaximumLength:0};tY.selectTiles=function(e,t){e._selectedTiles.length=0,e._requestedTiles.length=0,e.hasMixedContent=!1;let n=!0,i=e.root;if(i.updateVisibility(t),!i.isVisible)return n;let{touchTile:o,visitTile:r}=Nr,a=Z_.stack;for(a.push(i);a.length>0;){Z_.stackMaximumLength=Math.max(Z_.stackMaximumLength,a.length);let s=a.pop(),A=s.refine===Vi.ADD,l=s.refine===Vi.REPLACE,f=Kxe(s);f&&Xxe(s,a,t),(A||l&&!f)&&(Zxe(e,s),o(s,t),$xe(s,t),s.hasRenderableContent&&!s.contentAvailable&&(n=!1)),r(s,t)}return Z_.stack.trim(Z_.stackMaximumLength),n};function Kxe(e){return e.children.length===0?!1:e.hasTilesetContent||e.hasImplicitContent?!e.contentExpired:(e.hasEmptyContent,!0)}function Xxe(e,t,n){let{children:i}=e;for(let o=0;o<i.length;++o){let r=i[o];r.updateVisibility(n),r.isVisible&&t.push(r)}}function Zxe(e,t){(t.hasUnloadedRenderableContent||t.contentExpired)&&(t._priority=0,e._requestedTiles.push(t))}function $xe(e,t){e.contentAvailable&&e.contentVisibility(t)!==vt.OUTSIDE&&e.tileset._selectedTiles.push(e)}var nY=tY;function iY(){}var $_={stack:new Gs,stackMaximumLength:0},eE={stack:new Gs,stackMaximumLength:0};iY.selectTiles=function(e,t){if(e._requestedTiles.length=0,e.debugFreezeFrame)return;e._selectedTiles.length=0,e._selectedTilesToStyle.length=0,e._emptyTiles.length=0,e.hasMixedContent=!1;let n=e.root;if(Nr.updateTile(n,t),!n.isVisible||n.getScreenSpaceError(t,!0)<=e.memoryAdjustedScreenSpaceError)return;tTe(n,t),$_.stack.trim($_.stackMaximumLength),eE.stack.trim(eE.stackMaximumLength);let i=e._requestedTiles;for(let o=0;o<i.length;++o)i[o].updatePriority()};function GQ(e,t){e.contentAvailable&&Nr.selectTile(e,t)}function eTe(e,t,n){let i=e.refine===Vi.REPLACE,{tileset:o,children:r}=e,{updateTile:a,loadTile:s,touchTile:A}=Nr;for(let g=0;g<r.length;++g)a(r[g],n);r.sort(Nr.sortChildrenByDistanceToCamera);let l=i&&e.hasRenderableContent,f=!0,h=!1,m=-1,p=Number.MAX_VALUE;for(let g=0;g<r.length;++g){let C=r[g];if(C.isVisible?(t.push(C),C._foveatedFactor<p&&(m=g,p=C._foveatedFactor),h=!0):(l||o.loadSiblings)&&(C._foveatedFactor<p&&(m=g,p=C._foveatedFactor),s(C,n),A(C,n)),l){let _;C._inRequestVolume?C.hasRenderableContent?_=C.contentAvailable:_=nTe(C,n):_=!1,f=f&&_}}if(h||(f=!1),m!==-1&&i){let g=r[m];g._wasMinPriorityChild=!0;let C=(e._wasMinPriorityChild||e===o.root)&&p<=e._priorityHolder._foveatedFactor?e._priorityHolder:e;C._foveatedFactor=Math.min(g._foveatedFactor,C._foveatedFactor),C._distanceToCamera=Math.min(g._distanceToCamera,C._distanceToCamera);for(let _=0;_<r.length;++_)r[_]._priorityHolder=C}return f}function tTe(e,t){let{tileset:n}=e,{canTraverse:i,loadTile:o,visitTile:r,touchTile:a}=Nr,s=$_.stack;for(s.push(e);s.length>0;){$_.stackMaximumLength=Math.max($_.stackMaximumLength,s.length);let A=s.pop(),l=A.parent,f=!c(l)||l._refines;A._refines=i(A)?eTe(A,s,t)&&f:!1;let h=!A._refines&&f;A.hasRenderableContent?A.refine===Vi.ADD?(GQ(A,t),o(A,t)):A.refine===Vi.REPLACE&&(o(A,t),h&&GQ(A,t)):(n._emptyTiles.push(A),o(A,t),h&&GQ(A,t)),r(A,t),a(A,t)}}function nTe(e,t){let{canTraverse:n,updateTile:i,loadTile:o,touchTile:r}=Nr,a=!0,s=eE.stack;for(s.push(e);s.length>0;){eE.stackMaximumLength=Math.max(eE.stackMaximumLength,s.length);let A=s.pop(),l=A.children,f=l.length,h=!A.hasRenderableContent&&n(A);if(!h&&!A.contentAvailable&&(a=!1),i(A,t),A.isVisible||(o(A,t),r(A,t)),h)for(let m=0;m<f;++m){let p=l[m];s.push(p)}}return e.hasEmptyContent||a}var oY=iY;function rY(){}var tE={stack:new Gs,stackMaximumLength:0},nE={stack:new Gs,stackMaximumLength:0},rf={stack:new Gs,stackMaximumLength:0,ancestorStack:new Gs,ancestorStackMaximumLength:0},iTe=2;rY.selectTiles=function(e,t){if(e._requestedTiles.length=0,e.debugFreezeFrame)return;e._selectedTiles.length=0,e._selectedTilesToStyle.length=0,e._emptyTiles.length=0,e.hasMixedContent=!1;let n=e.root;if(Nr.updateTile(n,t),!n.isVisible||n.getScreenSpaceError(t,!0)<=e.memoryAdjustedScreenSpaceError)return;ATe(n,t),lTe(n,t),tE.stack.trim(tE.stackMaximumLength),nE.stack.trim(nE.stackMaximumLength),rf.stack.trim(rf.stackMaximumLength),rf.ancestorStack.trim(rf.ancestorStackMaximumLength);let i=e._requestedTiles;for(let o=0;o<i.length;++o)i[o].updatePriority()};function oTe(e,t){let{updateTile:n,touchTile:i,selectTile:o}=Nr,r=nE.stack;for(r.push(e);r.length>0;){nE.stackMaximumLength=Math.max(nE.stackMaximumLength,r.length);let s=r.pop().children;for(let A=0;A<s.length;++A){let l=s[A];l.isVisible&&(l.contentAvailable?(n(l,t),i(l,t),o(l,t)):l._depth-e._depth<iTe&&r.push(l))}}}function H0(e,t){let n=e.contentAvailable?e:e._ancestorWithContentAvailable;c(n)?n._shouldSelect=!0:oTe(e,t)}function rTe(e,t){e._ancestorWithContent=void 0,e._ancestorWithContentAvailable=void 0;let{parent:n}=e;if(!c(n))return;let i=!n.hasUnloadedRenderableContent||n._requestedFrame===t.frameNumber;e._ancestorWithContent=i?n:n._ancestorWithContent,e._ancestorWithContentAvailable=n.contentAvailable?n:n._ancestorWithContentAvailable}function aTe(e,t){let n=t._ancestorWithContent;return!e.immediatelyLoadDesiredLevelOfDetail&&(t._priorityProgressiveResolutionScreenSpaceErrorLeaf||c(n)&&t._screenSpaceError<n._screenSpaceError/e.skipScreenSpaceErrorFactor&&t._depth>n._depth+e.skipLevels)}function sTe(e,t,n){let{tileset:i,children:o}=e,{updateTile:r,loadTile:a,touchTile:s}=Nr;for(let l=0;l<o.length;++l)r(o[l],n);o.sort(Nr.sortChildrenByDistanceToCamera);let A=!1;for(let l=0;l<o.length;++l){let f=o[l];f.isVisible?(t.push(f),A=!0):i.loadSiblings&&(a(f,n),s(f,n))}return A}function cTe(e,t){let{tileset:n}=e;return n.immediatelyLoadDesiredLevelOfDetail?!1:c(e._ancestorWithContent)?e._screenSpaceError===0?e.parent._screenSpaceError>t:e._screenSpaceError>t:!0}function ATe(e,t){let{tileset:n}=e,i=n.immediatelyLoadDesiredLevelOfDetail?Number.MAX_VALUE:Math.max(n.baseScreenSpaceError,n.memoryAdjustedScreenSpaceError),{canTraverse:o,loadTile:r,visitTile:a,touchTile:s}=Nr,A=tE.stack;for(A.push(e);A.length>0;){tE.stackMaximumLength=Math.max(tE.stackMaximumLength,A.length);let l=A.pop();rTe(l,t);let f=l.parent,h=!c(f)||f._refines;l._refines=o(l)?sTe(l,A,t)&&h:!1;let m=!l._refines&&h;l.hasRenderableContent?l.refine===Vi.ADD?(H0(l,t),r(l,t)):l.refine===Vi.REPLACE&&(cTe(l,i)?(r(l,t),m&&H0(l,t)):m?(H0(l,t),r(l,t)):aTe(n,l)&&r(l,t)):(n._emptyTiles.push(l),r(l,t),m&&H0(l,t)),a(l,t),s(l,t)}}function lTe(e,t){let{selectTile:n,canTraverse:i}=Nr,{stack:o,ancestorStack:r}=rf,a;for(o.push(e);o.length>0||r.length>0;){if(rf.stackMaximumLength=Math.max(rf.stackMaximumLength,o.length),rf.ancestorStackMaximumLength=Math.max(rf.ancestorStackMaximumLength,r.length),r.length>0){let l=r.peek();if(l._stackLength===o.length){r.pop(),l!==a&&(l._finalResolution=!1),n(l,t);continue}}let s=o.pop();if(!c(s))continue;let A=i(s);if(s._shouldSelect)if(s.refine===Vi.ADD)n(s,t);else{if(s._selectionDepth=r.length,s._selectionDepth>0&&(s.tileset.hasMixedContent=!0),a=s,!A){n(s,t);continue}r.push(s),s._stackLength=o.length}if(A){let l=s.children;for(let f=0;f<l.length;++f){let h=l[f];h.isVisible&&o.push(h)}}}}var aY=rY;function Qo(){this._layers=[],this.layerAdded=new fe,this.layerRemoved=new fe,this.layerMoved=new fe,this.layerShownOrHidden=new fe}Object.defineProperties(Qo.prototype,{length:{get:function(){return this._layers.length}}});Qo.prototype.add=function(e,t){c(t)?this._layers.splice(t,0,e):(t=this._layers.length,this._layers.push(e)),this._update(),this.layerAdded.raiseEvent(e,t);let i=e.readyEvent.addEventListener(()=>{this.layerShownOrHidden.raiseEvent(e,e._layerIndex,e.show),i()})};Qo.prototype.addImageryProvider=function(e,t){let n=new wu(e);return this.add(n,t),n};Qo.prototype.remove=function(e,t){t=t??!0;let n=this._layers.indexOf(e);return n!==-1?(this._layers.splice(n,1),this._update(),this.layerRemoved.raiseEvent(e,n),t&&e.destroy(),!0):!1};Qo.prototype.removeAll=function(e){e=e??!0;let t=this._layers;for(let n=0,i=t.length;n<i;n++){let o=t[n];this.layerRemoved.raiseEvent(o,n),e&&o.destroy()}this._layers=[]};Qo.prototype.contains=function(e){return this.indexOf(e)!==-1};Qo.prototype.indexOf=function(e){return this._layers.indexOf(e)};Qo.prototype.get=function(e){return this._layers[e]};function V0(e,t){return e.indexOf(t)}function sY(e,t,n){let i=e._layers;if(t=w.clamp(t,0,i.length-1),n=w.clamp(n,0,i.length-1),t===n)return;let o=i[t];i[t]=i[n],i[n]=o,e._update(),e.layerMoved.raiseEvent(o,n,t)}Qo.prototype.raise=function(e){let t=V0(this._layers,e);sY(this,t,t+1)};Qo.prototype.lower=function(e){let t=V0(this._layers,e);sY(this,t,t-1)};Qo.prototype.raiseToTop=function(e){let t=V0(this._layers,e);t!==this._layers.length-1&&(this._layers.splice(t,1),this._layers.push(e),this._update(),this.layerMoved.raiseEvent(e,this._layers.length-1,t))};Qo.prototype.lowerToBottom=function(e){let t=V0(this._layers,e);t!==0&&(this._layers.splice(t,1),this._layers.splice(0,0,e),this._update(),this.layerMoved.raiseEvent(e,0,t))};var fTe=new ce;function cY(e,t,n,i){let o=e.globe._surface._tilesToRender,r;for(let s=0;!c(r)&&s<o.length;++s){let A=o[s];ce.contains(A.rectangle,t)&&(r=A)}if(!c(r))return;let a=r.data.imagery;for(let s=a.length-1;s>=0;--s){let A=a[s],l=A.readyImagery;if(!c(l)||!l.imageryLayer.ready)continue;let f=l.imageryLayer.imageryProvider;if(n&&!c(f.pickFeatures)||!ce.contains(l.rectangle,t))continue;let h=fTe,m=1/1024;h.west=w.lerp(r.rectangle.west,r.rectangle.east,A.textureCoordinateRectangle.x-m),h.east=w.lerp(r.rectangle.west,r.rectangle.east,A.textureCoordinateRectangle.z+m),h.south=w.lerp(r.rectangle.south,r.rectangle.north,A.textureCoordinateRectangle.y-m),h.north=w.lerp(r.rectangle.south,r.rectangle.north,A.textureCoordinateRectangle.w+m),ce.contains(h,t)&&i(l)}}Qo.prototype.pickImageryLayers=function(e,t){let n=t.globe.pick(e,t);if(!c(n))return;let i=t.ellipsoid.cartesianToCartographic(n),o=[];if(cY(t,i,!1,function(r){o.push(r.imageryLayer)}),o.length!==0)return o};Qo.prototype.pickImageryLayerFeatures=function(e,t){let n=t.globe.pick(e,t);if(!c(n))return;let i=t.ellipsoid.cartesianToCartographic(n),o=[],r=[];if(cY(t,i,!0,function(a){if(!a.imageryLayer.ready)return;let A=a.imageryLayer.imageryProvider.pickFeatures(a.x,a.y,a.level,i.longitude,i.latitude);c(A)&&(o.push(A),r.push(a.imageryLayer))}),o.length!==0)return Promise.all(o).then(function(a){let s=[];for(let A=0;A<a.length;++A){let l=a[A],f=r[A];if(c(l)&&l.length>0)for(let h=0;h<l.length;++h){let m=l[h];m.imageryLayer=f,c(m.position)||(m.position=i),s.push(m)}}return s})};Qo.prototype.queueReprojectionCommands=function(e){let t=this._layers;for(let n=0,i=t.length;n<i;++n)t[n].queueReprojectionCommands(e)};Qo.prototype.cancelReprojections=function(){let e=this._layers;for(let t=0,n=e.length;t<n;++t)e[t].cancelReprojections()};Qo.prototype.isDestroyed=function(){return!1};Qo.prototype.destroy=function(){return this.removeAll(!0),pe(this)};Qo.prototype._update=function(){let e=!0,t=this._layers,n,i,o,r;for(o=0,r=t.length;o<r;++o)i=t[o],i._layerIndex=o,i.show?(i._isBaseLayer=e,e=!1):i._isBaseLayer=!1,i.show!==i._show&&(c(i._show)&&(c(n)||(n=[]),n.push(i)),i._show=i.show);if(c(n))for(o=0,r=n.length;o<r;++o)i=n[o],this.layerShownOrHidden.raiseEvent(i,i._layerIndex,i.show)};var AY=Qo;function _i(e){e=e??k.EMPTY_OBJECT,this._url=void 0,this._basePath=void 0,this._root=void 0,this._resource=void 0,this._asset=void 0,this._properties=void 0,this._geometricError=void 0,this._scaledGeometricError=void 0,this._extensionsUsed=void 0,this._extensions=void 0,this._modelUpAxis=void 0,this._modelForwardAxis=void 0,this._cache=new Y9,this._processingQueue=[],this._selectedTiles=[],this._emptyTiles=[],this._requestedTiles=[],this._selectedTilesToStyle=[],this._loadTimestamp=void 0,this._timeSinceLoad=0,this._updatedVisibilityFrame=0,this._updatedModelMatrixFrame=0,this._modelMatrixChanged=!1,this._previousModelMatrix=void 0,this._extras=void 0,this._credits=void 0,this._showCreditsOnScreen=e.showCreditsOnScreen??!1,this._cullWithChildrenBounds=e.cullWithChildrenBounds??!0,this._allTilesAdditive=!0,this._hasMixedContent=!1,this._stencilClearCommand=void 0,this._backfaceCommands=new Gs,this._maximumScreenSpaceError=e.maximumScreenSpaceError??16,this._memoryAdjustedScreenSpaceError=this._maximumScreenSpaceError,this._cacheBytes=e.cacheBytes??512*1024*1024;let t=e.maximumCacheOverflowBytes??512*1024*1024;this._maximumCacheOverflowBytes=t,this._styleEngine=new W9,this._styleApplied=!1,this._modelMatrix=c(e.modelMatrix)?O.clone(e.modelMatrix):O.clone(O.IDENTITY),this._addHeightCallbacks=[],this._statistics=new vp,this._statisticsLast=new vp,this._statisticsPerPass=new Array(fs.NUMBER_OF_PASSES);for(let o=0;o<fs.NUMBER_OF_PASSES;++o)this._statisticsPerPass[o]=new vp;this._requestedTilesInFlight=[],this._maximumPriority={foveatedFactor:-Number.MAX_VALUE,depth:-Number.MAX_VALUE,distance:-Number.MAX_VALUE,reverseScreenSpaceError:-Number.MAX_VALUE},this._minimumPriority={foveatedFactor:Number.MAX_VALUE,depth:Number.MAX_VALUE,distance:Number.MAX_VALUE,reverseScreenSpaceError:Number.MAX_VALUE},this._heatmap=new q9(e.debugHeatmapTilePropertyName),this.cullRequestsWhileMoving=e.cullRequestsWhileMoving??!0,this._cullRequestsWhileMoving=!1,this.cullRequestsWhileMovingMultiplier=e.cullRequestsWhileMovingMultiplier??60,this.progressiveResolutionHeightFraction=w.clamp(e.progressiveResolutionHeightFraction??.3,0,.5),this.preferLeaves=e.preferLeaves??!1,this._tilesLoaded=!1,this._initialTilesLoaded=!1,this._tileDebugLabels=void 0,this._classificationType=e.classificationType,this._heightReference=e.heightReference,this._scene=e.scene,this._ellipsoid=e.ellipsoid??Z.WGS84,this._initialClippingPlanesOriginMatrix=O.IDENTITY,this._clippingPlanesOriginMatrix=void 0,this._clippingPlanesOriginMatrixDirty=!0,this._vectorClassificationOnly=e.vectorClassificationOnly??!1,this._vectorKeepDecodedPositions=e.vectorKeepDecodedPositions??!1,this._imageryLayers=new AY(this),this._imageryLayersModificationCounter=0,this._imageryLayersListener=()=>{this._imageryLayersModificationCounter++},this.imageryLayers.layerAdded.addEventListener(this._imageryLayersListener),this.imageryLayers.layerRemoved.addEventListener(this._imageryLayersListener),this.imageryLayers.layerMoved.addEventListener(this._imageryLayersListener),this.imageryLayers.layerShownOrHidden.addEventListener(this._imageryLayersListener),this._asynchronouslyLoadImagery=e.asynchronouslyLoadImagery??!1,this.preloadWhenHidden=e.preloadWhenHidden??!1,this.preloadFlightDestinations=e.preloadFlightDestinations??!0,this._pass=void 0,this.dynamicScreenSpaceError=e.dynamicScreenSpaceError??!0,this.foveatedScreenSpaceError=e.foveatedScreenSpaceError??!0,this._foveatedConeSize=e.foveatedConeSize??.1,this._foveatedMinimumScreenSpaceErrorRelaxation=e.foveatedMinimumScreenSpaceErrorRelaxation??0,this.foveatedInterpolationCallback=e.foveatedInterpolationCallback??w.lerp,this.foveatedTimeDelay=e.foveatedTimeDelay??.2,this.dynamicScreenSpaceErrorDensity=e.dynamicScreenSpaceErrorDensity??2e-4,this.dynamicScreenSpaceErrorFactor=e.dynamicScreenSpaceErrorFactor??24,this.dynamicScreenSpaceErrorHeightFalloff=e.dynamicScreenSpaceErrorHeightFalloff??.25,this._dynamicScreenSpaceErrorComputedDensity=0,this.shadows=e.shadows??cn.ENABLED,this.show=e.show??!0,this.colorBlendMode=Bm.HIGHLIGHT,this.colorBlendAmount=.5,this._pointCloudShading=new Vb(e.pointCloudShading),this._pointCloudEyeDomeLighting=new Hb,this.loadProgress=new fe,this.allTilesLoaded=new fe,this.initialTilesLoaded=new fe,this.tileLoad=new fe,this.tileUnload=new fe,this.tileFailed=new fe,this.tileVisible=new fe,this.skipLevelOfDetail=e.skipLevelOfDetail??!1,this._disableSkipLevelOfDetail=!1,this.baseScreenSpaceError=e.baseScreenSpaceError??1024,this.skipScreenSpaceErrorFactor=e.skipScreenSpaceErrorFactor??16,this.skipLevels=e.skipLevels??1,this.immediatelyLoadDesiredLevelOfDetail=e.immediatelyLoadDesiredLevelOfDetail??!1,this.loadSiblings=e.loadSiblings??!1,this._clippingPlanes=void 0,c(e.clippingPlanes)&&Pl.setOwner(e.clippingPlanes,this,"_clippingPlanes"),this._clippingPolygons=void 0,c(e.clippingPolygons)&&km.setOwner(e.clippingPolygons,this,"_clippingPolygons"),c(e.imageBasedLighting)?(this._imageBasedLighting=e.imageBasedLighting,this._shouldDestroyImageBasedLighting=!1):(this._imageBasedLighting=new jy,this._shouldDestroyImageBasedLighting=!0),this._environmentMapManager=new Um(e.environmentMapOptions),this.lightColor=e.lightColor,this.backFaceCulling=e.backFaceCulling??!0,this._enableShowOutline=e.enableShowOutline??!0,this.showOutline=e.showOutline??!0,this.outlineColor=e.outlineColor??F.BLACK,this.splitDirection=e.splitDirection??Zo.NONE,this.enableCollision=e.enableCollision??!1,this._projectTo2D=e.projectTo2D??!1,this._enablePick=e.enablePick??!1,this.debugFreezeFrame=e.debugFreezeFrame??!1,this.debugColorizeTiles=e.debugColorizeTiles??!1,this._enableDebugWireframe=e.enableDebugWireframe??!1,this.debugWireframe=e.debugWireframe??!1,this.debugWireframe===!0&&this._enableDebugWireframe===!1&&jt("tileset-debug-wireframe-ignored","enableDebugWireframe must be set to true in the Cesium3DTileset constructor, otherwise debugWireframe will be ignored."),this.debugShowBoundingVolume=e.debugShowBoundingVolume??!1,this.debugShowContentBoundingVolume=e.debugShowContentBoundingVolume??!1,this.debugShowViewerRequestVolume=e.debugShowViewerRequestVolume??!1,this._tileDebugLabels=void 0,this.debugPickedTileLabelOnly=!1,this.debugPickedTile=void 0,this.debugPickPosition=void 0,this.debugShowGeometricError=e.debugShowGeometricError??!1,this.debugShowRenderingStatistics=e.debugShowRenderingStatistics??!1,this.debugShowMemoryUsage=e.debugShowMemoryUsage??!1,this.debugShowUrl=e.debugShowUrl??!1,this.examineVectorLinesFunction=void 0,this._metadataExtension=void 0,this._customShader=e.customShader;let n=e.featureIdLabel??"featureId_0";typeof n=="number"&&(n=`featureId_${n}`),this._featureIdLabel=n;let i=e.instanceFeatureIdLabel??"instanceFeatureId_0";typeof i=="number"&&(i=`instanceFeatureId_${i}`),this._instanceFeatureIdLabel=i}Object.defineProperties(_i.prototype,{isCesium3DTileset:{get:function(){return!0}},asset:{get:function(){return this._asset}},extensions:{get:function(){return this._extensions}},clippingPlanes:{get:function(){return this._clippingPlanes},set:function(e){Pl.setOwner(e,this,"_clippingPlanes")}},clippingPolygons:{get:function(){return this._clippingPolygons},set:function(e){km.setOwner(e,this,"_clippingPolygons")}},imageryLayers:{get:function(){return this._imageryLayers}},imageryLayersModificationCounter:{get:function(){return this._imageryLayersModificationCounter}},asynchronouslyLoadImagery:{get:function(){return this._asynchronouslyLoadImagery}},properties:{get:function(){return this._properties}},tilesLoaded:{get:function(){return this._tilesLoaded}},resource:{get:function(){return this._resource}},basePath:{get:function(){return wr("Cesium3DTileset.basePath","Cesium3DTileset.basePath has been deprecated. All tiles are relative to the url of the tileset JSON file that contains them. Use the url property instead."),this._basePath}},style:{get:function(){return this._styleEngine.style},set:function(e){this._styleEngine.style=e}},customShader:{get:function(){return this._customShader},set:function(e){this._customShader=e}},hasMixedContent:{get:function(){return this._hasMixedContent},set:function(e){this._hasMixedContent=e}},isSkippingLevelOfDetail:{get:function(){return this.skipLevelOfDetail&&!c(this._classificationType)&&!this._disableSkipLevelOfDetail&&!this._allTilesAdditive}},metadataExtension:{get:function(){return this._metadataExtension}},metadata:{get:function(){if(c(this._metadataExtension))return this._metadataExtension.tileset}},schema:{get:function(){if(c(this._metadataExtension))return this._metadataExtension.schema}},maximumScreenSpaceError:{get:function(){return this._maximumScreenSpaceError},set:function(e){this._maximumScreenSpaceError=e,this._memoryAdjustedScreenSpaceError=e}},cacheBytes:{get:function(){return this._cacheBytes},set:function(e){this._cacheBytes=e}},maximumCacheOverflowBytes:{get:function(){return this._maximumCacheOverflowBytes},set:function(e){this._maximumCacheOverflowBytes=e}},memoryAdjustedScreenSpaceError:{get:function(){return this._memoryAdjustedScreenSpaceError}},pointCloudShading:{get:function(){return this._pointCloudShading},set:function(e){this._pointCloudShading=e}},root:{get:function(){return this._root}},boundingSphere:{get:function(){return this._root.updateTransform(this._modelMatrix),this._root.boundingSphere}},modelMatrix:{get:function(){return this._modelMatrix},set:function(e){this._modelMatrix=O.clone(e,this._modelMatrix)}},timeSinceLoad:{get:function(){return this._timeSinceLoad}},totalMemoryUsageInBytes:{get:function(){let e=this._statistics;return e.texturesByteLength+e.geometryByteLength+e.batchTableByteLength}},clippingPlanesOriginMatrix:{get:function(){return c(this._clippingPlanesOriginMatrix)?(this._clippingPlanesOriginMatrixDirty&&(O.multiply(this.root.computedTransform,this._initialClippingPlanesOriginMatrix,this._clippingPlanesOriginMatrix),this._clippingPlanesOriginMatrixDirty=!1),this._clippingPlanesOriginMatrix):O.IDENTITY}},styleEngine:{get:function(){return this._styleEngine}},statistics:{get:function(){return this._statistics}},classificationType:{get:function(){return this._classificationType}},heightReference:{get:function(){return this._heightReference}},scene:{get:function(){return this._scene}},ellipsoid:{get:function(){return this._ellipsoid}},foveatedConeSize:{get:function(){return this._foveatedConeSize},set:function(e){this._foveatedConeSize=e}},foveatedMinimumScreenSpaceErrorRelaxation:{get:function(){return this._foveatedMinimumScreenSpaceErrorRelaxation},set:function(e){this._foveatedMinimumScreenSpaceErrorRelaxation=e}},extras:{get:function(){return this._extras}},imageBasedLighting:{get:function(){return this._imageBasedLighting},set:function(e){e!==this._imageBasedLighting&&(this._shouldDestroyImageBasedLighting&&!this._imageBasedLighting.isDestroyed()&&this._imageBasedLighting.destroy(),this._imageBasedLighting=e,this._shouldDestroyImageBasedLighting=!1)}},environmentMapManager:{get:function(){return this._environmentMapManager}},vectorClassificationOnly:{get:function(){return this._vectorClassificationOnly}},vectorKeepDecodedPositions:{get:function(){return this._vectorKeepDecodedPositions}},showCreditsOnScreen:{get:function(){return this._showCreditsOnScreen},set:function(e){this._showCreditsOnScreen=e,gY(this)}},featureIdLabel:{get:function(){return this._featureIdLabel},set:function(e){typeof e=="number"&&(e=`featureId_${e}`),this._featureIdLabel=e}},instanceFeatureIdLabel:{get:function(){return this._instanceFeatureIdLabel},set:function(e){typeof e=="number"&&(e=`instanceFeatureId_${e}`),this._instanceFeatureIdLabel=e}}});_i.fromIonAssetId=async function(e,t){let n=await bm.fromAssetId(e);return _i.fromUrl(n,t)};_i.fromUrl=async function(e,t){t=t??k.EMPTY_OBJECT;let n=ke.createIfNeeded(e),i;n.extension==="json"?i=n.getBaseUri(!0):n.isDataUri&&(i="");let o=await _i.loadJson(n),r=await uTe(n,o),a=new _i(t);a._resource=n,a._url=n.url,a._basePath=i,a._metadataExtension=r,a._geometricError=o.geometricError,a._scaledGeometricError=o.geometricError;let s=o.asset;a._asset=s,a._extras=o.extras,gY(a);let A=c(o.asset.gltfUpAxis)?fi.fromName(o.asset.gltfUpAxis):fi.Y,l=t.modelUpAxis??A,f=t.modelForwardAxis??fi.X;a._properties=o.properties,a._extensionsUsed=o.extensionsUsed,a._extensions=o.extensions,a._modelUpAxis=l,a._modelForwardAxis=f,a._root=a.loadTileset(n,o);let m=a._root.createBoundingVolume(o.root.boundingVolume,O.IDENTITY).boundingSphere.center,p=a._ellipsoid.cartesianToCartographic(m);return c(p)&&p.height>On._defaultMinTerrainHeight&&(a._initialClippingPlanesOriginMatrix=Rn.eastNorthUpToFixedFrame(m)),a._clippingPlanesOriginMatrix=O.clone(a._initialClippingPlanesOriginMatrix),a};_i.loadJson=function(e){return ke.createIfNeeded(e).fetchJson()};_i.prototype.makeStyleDirty=function(){this._styleEngine.makeDirty()};_i.prototype.loadTileset=function(e,t,n){let i=t.asset;if(!c(i))throw new oe("Tileset must have an asset property.");if(i.version!=="0.0"&&i.version!=="1.0"&&i.version!=="1.1")throw new oe("The tileset must be 3D Tiles version 0.0, 1.0, or 1.1");c(t.extensionsRequired)&&_i.checkSupportedExtensions(t.extensionsRequired);let o=this._statistics,r=i.tilesetVersion;c(r)&&(this._basePath+=`?v=${r}`,e=e.clone(),e.setQueryParameters({v:r}));let a=lY(this,e,t.root,n);c(n)&&(n.children.push(a),a._depth=n._depth+1);let s=[];for(s.push(a);s.length>0;){let A=s.pop();++o.numberOfTilesTotal,this._allTilesAdditive=this._allTilesAdditive&&A.refine===Vi.ADD;let l=A._header.children;if(c(l))for(let f=0;f<l.length;++f){let h=l[f],m=lY(this,e,h,A);A.children.push(m),m._depth=A._depth+1,s.push(m)}this._cullWithChildrenBounds&&H9.checkChildrenWithinParent(A)}return a};function lY(e,t,n,i){if(!(c(n.implicitTiling)||Wn(n,"3DTILES_implicit_tiling")))return new OQ(e,t,n,i);let r=e.schema,a=new J9(t,n,r),s=new $9({subdivisionScheme:a.subdivisionScheme,subtreeLevels:a.subtreeLevels,level:0,x:0,y:0,z:0}),A=a.subtreeUriTemplate.getDerivedResource({templateValues:s.getTemplateValues()}).url,f=Ne(n,!0);f.contents=[{uri:A}],delete f.content,delete f.extensions;let h=new OQ(e,t,f,i);return h.implicitTileset=a,h.implicitCoordinates=s,h}async function uTe(e,t){let n=Wn(t,"3DTILES_metadata")?t.extensions["3DTILES_metadata"]:t,i;if(c(n.schemaUri))e=e.getDerivedResource({url:n.schemaUri}),i=di.getSchemaLoader({resource:e});else if(c(n.schema))i=di.getSchemaLoader({schema:n.schema});else return;await i.load();let o=new G9({schema:i.schema,metadataJson:n});return di.unload(i),o}var fY=new u,dTe=new ae,hTe=new O,mTe=new u,pTe=new u,gTe=new u,CTe=new u;function _Te(e,t){let n,i,o,r,a,s=t.camera,A=e._root,l=A.contentBoundingVolume;if(l instanceof Nu)n=u.normalize(s.positionWC,fY),i=s.directionWC,o=s.positionCartographic.height,r=l.minimumHeight,a=l.maximumHeight;else{let C=O.inverseTransformation(A.computedTransform,hTe),_=t.mapProjection.ellipsoid,E=l.boundingVolume,I=O.multiplyByPoint(C,E.center,mTe);if(u.magnitude(I)>_.minimumRadius){let y=ae.fromCartesian(I,_,dTe);n=u.normalize(s.positionWC,fY),i=s.directionWC,o=s.positionCartographic.height,r=0,a=y.height*2}else{let y=O.multiplyByPoint(C,s.positionWC,pTe);if(n=u.UNIT_Z,i=O.multiplyByPointAsVector(C,s.directionWC,gTe),i=u.normalize(i,i),o=y.z,l instanceof Gc){let b=J.getColumn(E.halfAxes,2,CTe),x=u.magnitude(b);r=I.z-x,a=I.z+x}else if(l instanceof Dp){let b=E.radius;r=I.z-b,a=I.z+b}}}let f=e.dynamicScreenSpaceErrorHeightFalloff,h=r+(a-r)*f,m=a,p=w.clamp((o-h)/(m-h),0,1),g=1-Math.abs(u.dot(i,n));g=g*(1-p),e._dynamicScreenSpaceErrorComputedDensity=e.dynamicScreenSpaceErrorDensity*g}function ETe(e,t){if(t.hasEmptyContent)return;let{statistics:n}=e,i=t.contentExpired,o=t.requestContent();c(o)&&(o.then(r=>{!c(r)||t.isDestroyed()||e.isDestroyed()||(e._processingQueue.push(t),++n.numberOfTilesProcessing)}).catch(r=>{hY(r,e,t)}),i&&(t.hasTilesetContent||t.hasImplicitContent?MTe(e,t):(n.decrementLoadCounts(t.content),--n.numberOfTilesWithContentReady)),e._requestedTilesInFlight.push(t))}function dY(e,t){return e._priority-t._priority}_i.prototype.postPassesUpdate=function(e){c(this._root)&&(ITe(this,e),LTe(this,e),this._cache.unloadTiles(this,pY),this._styleApplied&&this._styleEngine.resetDirty(),this._styleApplied=!1)};_i.prototype.prePassesUpdate=function(e){if(!c(this._root))return;wTe(this,e);let t=this._clippingPlanes;this._clippingPlanesOriginMatrixDirty=!0,c(t)&&t.enabled&&t.update(e);let n=this._clippingPolygons;c(n)&&n.enabled&&n.update(e),c(this._loadTimestamp)||(this._loadTimestamp=X.clone(e.time)),this._timeSinceLoad=Math.max(X.secondsDifference(e.time,this._loadTimestamp)*1e3,0),this.dynamicScreenSpaceError&&_Te(this,e),e.newFrame&&this._cache.reset()};function ITe(e,t){let n=e._requestedTilesInFlight,i=0;for(let o=0;o<n.length;++o){let r=n[o],a=t.frameNumber-r._touchedFrame>=1;if(r._contentState!==ji.LOADING){++i;continue}else if(a){r.cancelRequests(),++i;continue}i>0&&(n[o-i]=r)}n.length-=i}function yTe(e){let t=e._requestedTiles;t.sort(dY);for(let n=0;n<t.length;++n)ETe(e,t[n])}function hY(e,t,n){if(t.isDestroyed())return;let i;n.isDestroyed()||(i=n._contentResource.url);let o=c(e.message)?e.message:e.toString();t.tileFailed.numberOfListeners>0?t.tileFailed.raiseEvent({url:i,message:o}):(console.log(`A 3D tile failed to load: ${i}`),console.log(`Error: ${o}`),console.log(e.stack))}function bTe(e){let t=e._processingQueue,n=0;for(let i=0;i<t.length;++i){let o=t[i];if(o.isDestroyed()||o._contentState!==ji.PROCESSING){++n;continue}n>0&&(t[i-n]=o)}t.length-=n}var BTe=new ae,xTe=new ae,TTe=new u;function STe(e,t,n){if(!e.enableCollision||!e.show)return;let i=e._addHeightCallbacks,o=t.boundingSphere;for(let r of i){if(r.invoked||t._wasSelectedLastFrame)continue;let a=r.ellipsoid,s=ae.clone(r.positionCartographic,BTe),A=ae.fromCartesian(o.center,a,xTe);c(A)&&(s.height=A.height);let l=ae.toCartesian(s,a,TTe);u.distance(l,o.center)<=o.radius&&(r.invoked=!0,n.afterRender.push(()=>{c(r.callback)&&r.callback(),r.invoked=!1}))}}function wTe(e,t){bTe(e);let n=e._processingQueue,{cacheBytes:i,maximumCacheOverflowBytes:o,statistics:r}=e,a=i+o,s=!1;for(let A=0;A<n.length;++A){if(e.totalMemoryUsageInBytes>a){s=!0;break}let l=n[A];try{l.process(e,t),l.contentReady&&(--r.numberOfTilesProcessing,e.tileLoad.raiseEvent(l))}catch(f){--r.numberOfTilesProcessing,hY(f,e,l)}}e.totalMemoryUsageInBytes<i?QTe(e):s&&n.length>0&&DTe(e)}function DTe(e){e._memoryAdjustedScreenSpaceError*=1.02;let t=e._processingQueue;for(let n=0;n<t.length;++n)t[n].updatePriority();t.sort(dY)}function QTe(e){e._memoryAdjustedScreenSpaceError=Math.max(e.memoryAdjustedScreenSpaceError/1.02,e.maximumScreenSpaceError)}var j0=new u,RTe={maximumFractionDigits:3};function uY(e){let t=e/1048576;return t<1?t.toLocaleString(void 0,RTe):Math.round(t).toLocaleString()}function zQ(e){let{halfAxes:t,radius:n,center:i}=e.boundingVolume.boundingVolume,o=u.clone(i,j0);if(c(t))o.x+=.75*(t[0]+t[3]+t[6]),o.y+=.75*(t[1]+t[4]+t[7]),o.z+=.75*(t[2]+t[5]+t[8]);else if(c(n)){let r=u.normalize(i,j0);r=u.multiplyByScalar(r,.75*n,j0),o=u.add(r,i,j0)}return o}function HQ(e,t,n){let i="",o=0;if(t.debugShowGeometricError&&(i+=`
Geometric error: ${e.geometricError}`,o++),t.debugShowRenderingStatistics&&(i+=`
Commands: ${e.commandsLength}`,o++,e.content.pointsLength>0&&(i+=`
Points: ${e.content.pointsLength}`,o++),e.content.trianglesLength>0&&(i+=`
Triangles: ${e.content.trianglesLength}`,o++),i+=`
Features: ${e.content.featuresLength}`,o++),t.debugShowMemoryUsage&&(i+=`
Texture Memory: ${uY(e.content.texturesByteLength)}`,i+=`
Geometry Memory: ${uY(e.content.geometryByteLength)}`,o+=2),t.debugShowUrl)if(e.hasMultipleContents){i+=`
Urls:`;let a=e.content.innerContentUrls;for(let s=0;s<a.length;s++)i+=`
- ${a[s]}`;o+=a.length}else i+=`
Url: ${e._contentHeader.uri}`,o++;let r={text:i.substring(1),position:n,font:`${19-o}px sans-serif`,showBackground:!0,disableDepthTestDistance:Number.POSITIVE_INFINITY};return t._tileDebugLabels.add(r)}function vTe(e,t){let n=e._selectedTiles,i=n.length,o=e._emptyTiles,r=o.length;if(e._tileDebugLabels.removeAll(),e.debugPickedTileLabelOnly){if(c(e.debugPickedTile)){let a=c(e.debugPickPosition)?e.debugPickPosition:zQ(e.debugPickedTile),s=HQ(e.debugPickedTile,e,a);s.pixelOffset=new U(15,-15)}}else{for(let a=0;a<i;++a){let s=n[a];HQ(s,e,zQ(s))}for(let a=0;a<r;++a){let s=o[a];(s.hasTilesetContent||s.hasImplicitContent)&&HQ(s,e,zQ(s))}}e._tileDebugLabels.update(t)}function PTe(e,t,n){e._styleEngine.applyStyle(e),e._styleApplied=!0;let{commandList:i,context:o}=t,r=i.length,a=e._selectedTiles,s=e.isSkippingLevelOfDetail&&e._hasMixedContent&&o.stencilBuffer&&a.length>0;e._backfaceCommands.length=0,s&&(c(e._stencilClearCommand)||(e._stencilClearCommand=new AI({stencil:0,pass:Ye.CESIUM_3D_TILE,renderState:ut.fromCache({stencilMask:Qt.SKIP_LOD_MASK})})),i.push(e._stencilClearCommand));let{statistics:A,tileVisible:l}=e,f=n.isRender,h=i.length;for(let g=0;g<a.length;++g){let C=a[g];f&&l.raiseEvent(C),STe(e,C,t),C.update(e,t,n),A.incrementSelectionCounts(C.content),++A.selected}let m=e._emptyTiles;for(let g=0;g<m.length;++g)m[g].update(e,t,n);let p=i.length-h;if(e._backfaceCommands.trim(),s){let g=e._backfaceCommands.values,C=g.length;i.length+=C;for(let _=p-1;_>=0;--_)i[h+C+_]=i[h+_];for(let _=0;_<C;++_)i[h+_]=g[_]}p=i.length-r,A.numberOfCommands=p,f&&(e.pointCloudShading.attenuation&&e.pointCloudShading.eyeDomeLighting&&p>0&&e._pointCloudEyeDomeLighting.update(t,r,e.pointCloudShading,e.boundingSphere),e.debugShowGeometricError||e.debugShowRenderingStatistics||e.debugShowMemoryUsage||e.debugShowUrl?(c(e._tileDebugLabels)||(e._tileDebugLabels=new Ah),vTe(e,t)):e._tileDebugLabels=e._tileDebugLabels&&e._tileDebugLabels.destroy())}var mY=[];function MTe(e,t){let n=t,i=mY;for(i.push(t);i.length>0;){t=i.pop();let o=t.children;for(let r=0;r<o.length;++r)i.push(o[r]);t!==n&&(OTe(e,t),--e._statistics.numberOfTilesTotal)}n.children=[]}function pY(e,t){e.tileUnload.raiseEvent(t),e._statistics.decrementLoadCounts(t.content),--e._statistics.numberOfTilesWithContentReady,t.unloadContent()}function OTe(e,t){e._cache.unloadTile(e,t,pY),t.destroy()}_i.prototype.trimLoadedTiles=function(){this._cache.trim()};function LTe(e,t){let n=e._statistics,i=e._statisticsLast,o=n.numberOfPendingRequests,r=n.numberOfTilesProcessing,a=i.numberOfPendingRequests,s=i.numberOfTilesProcessing;vp.clone(n,i);let A=o!==a||r!==s;A&&t.afterRender.push(function(){return e.loadProgress.raiseEvent(o,r),!0}),e._tilesLoaded=n.numberOfPendingRequests===0&&n.numberOfTilesProcessing===0&&n.numberOfAttemptedRequests===0,A&&e._tilesLoaded&&(t.afterRender.push(function(){return e.allTilesLoaded.raiseEvent(),!0}),e._initialTilesLoaded||(e._initialTilesLoaded=!0,t.afterRender.push(function(){return e.initialTilesLoaded.raiseEvent(),!0})))}function NTe(e){e._heatmap.resetMinimumMaximum(),e._minimumPriority.depth=Number.MAX_VALUE,e._maximumPriority.depth=-Number.MAX_VALUE,e._minimumPriority.foveatedFactor=Number.MAX_VALUE,e._maximumPriority.foveatedFactor=-Number.MAX_VALUE,e._minimumPriority.distance=Number.MAX_VALUE,e._maximumPriority.distance=-Number.MAX_VALUE,e._minimumPriority.reverseScreenSpaceError=Number.MAX_VALUE,e._maximumPriority.reverseScreenSpaceError=-Number.MAX_VALUE}function FTe(e,t){t.frameNumber===e._updatedModelMatrixFrame&&c(e._previousModelMatrix)||(e._updatedModelMatrixFrame=t.frameNumber,e._modelMatrixChanged=!O.equals(e.modelMatrix,e._previousModelMatrix),e._modelMatrixChanged&&(e._previousModelMatrix=O.clone(e.modelMatrix,e._previousModelMatrix)))}function kTe(e,t,n,i){if(t.mode===Te.MORPHING||!c(e._root))return!1;let o=e._statistics;o.clear(),++e._updatedVisibilityFrame,NTe(e),FTe(e,t),e._cullRequestsWhileMoving=e.cullRequestsWhileMoving&&!e._modelMatrixChanged;let r=e.getTraversal(i).selectTiles(e,t);if(i.requestTiles&&yTe(e),PTe(e,t,i),vp.clone(o,n),i.isRender){let a=e._credits;if(c(a)&&o.selected!==0)for(let s=0;s<a.length;++s){let A=a[s];t.creditDisplay.addCreditToNextFrame(A)}}return r}function gY(e){let t=e._credits;c(t)||(t=[]),t.length=0,c(e.resource.credits)&&e.resource.credits.forEach(i=>{t.push(fn.clone(i))});let n=e.asset.extras;if(c(n)&&c(n.cesium)&&c(n.cesium.credits)){let i=n.cesium.credits;for(let o=0;o<i.length;++o){let r=i[o];t.push(new fn(r.html))}}t.forEach(i=>i.showOnScreen=i.showOnScreen||e._showCreditsOnScreen),e._credits=t}_i.prototype.getTraversal=function(e){let{pass:t}=e;return t===fs.MOST_DETAILED_PRELOAD||t===fs.MOST_DETAILED_PICK?nY:this.isSkippingLevelOfDetail?aY:oY};_i.prototype.update=function(e){this.updateForPass(e,e.tilesetPassState)};_i.prototype.updateForPass=function(e,t){this.imageryLayers._update();let n=t.pass;if(n===fs.PRELOAD&&(!this.preloadWhenHidden||this.show)||n===fs.PRELOAD_FLIGHT&&(!this.preloadFlightDestinations||!this.show&&!this.preloadWhenHidden)||n===fs.REQUEST_RENDER_MODE_DEFER_CHECK&&(!this._cullRequestsWhileMoving&&this.foveatedTimeDelay<=0||!this.show))return;let i=e.commandList,o=e.camera,r=e.cullingVolume;t.ready=!1;let a=fs.getPassOptions(n),s=a.ignoreCommands,A=t.commandList??i,l=A.length;if(e.commandList=A,e.camera=t.camera??o,e.cullingVolume=t.cullingVolume??r,a.isRender){let m=this._environmentMapManager;c(this._root)&&(m.position=this.boundingSphere.center),m.update(e)}let f=this._clippingPolygons;c(f)&&f.enabled&&f.queueCommands(e);let h=this._statisticsPerPass[n];(this.show||s)&&(this._pass=n,t.ready=kTe(this,e,h,a)),s&&(A.length=l),e.commandList=i,e.camera=o,e.cullingVolume=r};_i.prototype.hasExtension=function(e){return c(this._extensionsUsed)?this._extensionsUsed.indexOf(e)>-1:!1};_i.prototype.isDestroyed=function(){return!1};_i.prototype.destroy=function(){if(this._tileDebugLabels=this._tileDebugLabels&&this._tileDebugLabels.destroy(),this._clippingPlanes=this._clippingPlanes&&this._clippingPlanes.destroy(),this._clippingPolygons=this._clippingPolygons&&this._clippingPolygons.destroy(),c(this._root)){let e=mY;for(e.push(this._root);e.length>0;){let t=e.pop();t.destroy();let n=t.children;for(let i=0;i<n.length;++i)e.push(n[i])}}return this._root=void 0,this._shouldDestroyImageBasedLighting&&!this._imageBasedLighting.isDestroyed()&&this._imageBasedLighting.destroy(),this._imageBasedLighting=void 0,this._environmentMapManager.isDestroyed()||this._environmentMapManager.destroy(),this._environmentMapManager=void 0,this._imageryLayers.isDestroyed()||(this.imageryLayers.layerAdded.removeEventListener(this._imageryLayersListener),this.imageryLayers.layerRemoved.removeEventListener(this._imageryLayersListener),this.imageryLayers.layerMoved.removeEventListener(this._imageryLayersListener),this.imageryLayers.layerShownOrHidden.removeEventListener(this._imageryLayersListener),this._imageryLayers.destroy()),this._imageryLayers=void 0,pe(this)};_i.supportedExtensions={"3DTILES_metadata":!0,"3DTILES_implicit_tiling":!0,"3DTILES_content_gltf":!0,"3DTILES_multiple_contents":!0,"3DTILES_bounding_volume_S2":!0,"3DTILES_batch_table_hierarchy":!0,"3DTILES_draco_point_compression":!0,MAXAR_content_geojson:!0};_i.checkSupportedExtensions=function(e){for(let t=0;t<e.length;t++)if(!_i.supportedExtensions[e[t]])throw new oe(`Unsupported 3D Tiles Extension: ${e[t]}`)};var UTe=new qa,GTe=new u,zTe=new ae;_i.prototype.getHeight=function(e,t){let n=t.ellipsoid;c(n)||(n=Z.WGS84);let i=UTe,o=n.cartographicToCartesian(e,i.direction);u.normalize(i.direction,i.direction),i.direction=u.normalize(o,i.direction),i.direction=u.negate(o,i.direction),i.origin=u.multiplyByScalar(i.direction,-2*n.maximumRadius,i.origin);let r=this.pick(i,t.frameState,GTe);if(c(r))return n.cartesianToCartographic(r,zTe)?.height};_i.prototype.updateHeight=function(e,t,n){n=n??Z.WGS84;let i={positionCartographic:e,ellipsoid:n,callback:t,invoked:!1},o=()=>{let r=this._addHeightCallbacks,a=r.length;for(let s=0;s<a;++s)if(r[s]===i){r.splice(s,1);break}i.callback&&(i.callback=void 0)};return this._addHeightCallbacks.push(i),o};var HTe=new Ss,VTe=new u;_i.prototype.pick=function(e,t,n){if(!t.context.webgl2&&!this._enablePick)return;let i=this._selectedTiles,o=i.length,r=[];for(let A=0;A<o;++A){let l=i[A],f=Ni.raySphere(e,l.contentBoundingVolume.boundingSphere,HTe);!c(f)||!c(l.content)||r.push(l)}let a=r.length;r.sort((A,l)=>{let f=ee.distanceSquaredTo(A.contentBoundingVolume.boundingSphere,e.origin),h=ee.distanceSquaredTo(l.contentBoundingVolume.boundingSphere,e.origin);return f-h});let s;for(let A=0;A<a;++A){let f=r[A].content.pick(e,t,VTe);if(c(f))return s=u.clone(f,n),s}};_i.prototype.isGltfExtensionUsed=function(e){if(this.hasExtension("3DTILES_content_gltf")){if(!c(this.extensions))return!1;let t=this.extensions["3DTILES_content_gltf"]?.extensionsUsed;return c(t)?t.indexOf(e)>-1:!1}return!1};_i.prototype.isGltfExtensionRequired=function(e){if(this.isGltfExtensionUsed(e)){let t=this.extensions["3DTILES_content_gltf"].extensionsRequired;return c(t)?t.indexOf(e)>-1:!1}return!1};var CY=_i;var jTe=new O;function Uu(e,t){t.collectionChanged.addEventListener(Uu.prototype._onCollectionChanged,this),this._scene=e,this._primitives=e.primitives,this._entityCollection=t,this._tilesetHash={},this._entitiesToVisualize=new ct,this._onCollectionChanged(t,t.values,[],[])}Uu.prototype.update=function(e){let t=this._entitiesToVisualize.values,n=this._tilesetHash,i=this._primitives;for(let o=0,r=t.length;o<r;o++){let a=t[o],s=a._tileset,A,l=n[a.id],f=a.isShowing&&a.isAvailable(e)&&M.getValueOrDefault(s._show,e,!0),h;f&&(h=a.computeModelMatrix(e,jTe),A=ke.createIfNeeded(M.getValueOrUndefined(s._uri,e)));let m=c(l)?l.tilesetPrimitive:void 0;if(!f){c(m)&&(m.show=!1);continue}(!c(l)||A.url!==l.url)&&(c(m)&&i.removeAndDestroy(m),delete n[a.id],YTe(A,n,a,i)),c(m)&&(m.show=!0,c(h)&&(m.modelMatrix=h),m.maximumScreenSpaceError=M.getValueOrDefault(s.maximumScreenSpaceError,e,m.maximumScreenSpaceError))}return!0};Uu.prototype.isDestroyed=function(){return!1};Uu.prototype.destroy=function(){this._entityCollection.collectionChanged.removeEventListener(Uu.prototype._onCollectionChanged,this);let e=this._entitiesToVisualize.values,t=this._tilesetHash,n=this._primitives;for(let i=e.length-1;i>-1;i--)VQ(this,e[i],t,n);return pe(this)};Uu.prototype.getBoundingSphere=function(e,t){let n=this._tilesetHash[e.id];if(!c(n)||n.loadFail)return He.FAILED;let i=n.tilesetPrimitive;return c(i)?i.show?(ee.clone(i.boundingSphere,t),He.DONE):He.FAILED:He.PENDING};Uu.prototype._onCollectionChanged=function(e,t,n,i){let o,r,a=this._entitiesToVisualize,s=this._tilesetHash,A=this._primitives;for(o=t.length-1;o>-1;o--)r=t[o],c(r._tileset)&&a.set(r.id,r);for(o=i.length-1;o>-1;o--)r=i[o],c(r._tileset)?a.set(r.id,r):(VQ(this,r,s,A),a.remove(r.id));for(o=n.length-1;o>-1;o--)r=n[o],VQ(this,r,s,A),a.remove(r.id)};function VQ(e,t,n,i){let o=n[t.id];c(o)&&(c(o.tilesetPrimitive)&&i.removeAndDestroy(o.tilesetPrimitive),delete n[t.id])}async function YTe(e,t,n,i){t[n.id]={url:e.url,loadFail:!1};try{let o=await CY.fromUrl(e);if(o.id=n,i.add(o),!c(t[n.id]))return;t[n.id].tilesetPrimitive=o}catch(o){console.error(o),t[n.id].loadFail=!0}}var _Y=Uu;var qTe=F.WHITE,WTe=F.BLACK,JTe=new U(2,2);function Pp(e){e=e??k.EMPTY_OBJECT,this._definitionChanged=new fe,this._evenColor=void 0,this._evenColorSubscription=void 0,this._oddColor=void 0,this._oddColorSubscription=void 0,this._repeat=void 0,this._repeatSubscription=void 0,this.evenColor=e.evenColor,this.oddColor=e.oddColor,this.repeat=e.repeat}Object.defineProperties(Pp.prototype,{isConstant:{get:function(){return M.isConstant(this._evenColor)&&M.isConstant(this._oddColor)&&M.isConstant(this._repeat)}},definitionChanged:{get:function(){return this._definitionChanged}},evenColor:W("evenColor"),oddColor:W("oddColor"),repeat:W("repeat")});Pp.prototype.getType=function(e){return"Checkerboard"};var KTe=new X;Pp.prototype.getValue=function(e,t){return c(e)||(e=X.now(KTe)),c(t)||(t={}),t.lightColor=M.getValueOrClonedDefault(this._evenColor,e,qTe,t.lightColor),t.darkColor=M.getValueOrClonedDefault(this._oddColor,e,WTe,t.darkColor),t.repeat=M.getValueOrDefault(this._repeat,e,JTe),t};Pp.prototype.equals=function(e){return this===e||e instanceof Pp&&M.equals(this._evenColor,e._evenColor)&&M.equals(this._oddColor,e._oddColor)&&M.equals(this._repeat,e._repeat)};var jQ=Pp;var EY={id:void 0};function iE(e){if(e._firing){e._refire=!0;return}if(e._suspendCount===0){let t=e._addedEntities,n=e._removedEntities,i=e._changedEntities;if(i.length!==0||t.length!==0||n.length!==0){e._firing=!0;do{e._refire=!1;let o=t.values.slice(0),r=n.values.slice(0),a=i.values.slice(0);t.removeAll(),n.removeAll(),i.removeAll(),e._collectionChanged.raiseEvent(e,o,r,a)}while(e._refire);e._firing=!1}}}function Fr(e){this._owner=e,this._entities=new ct,this._addedEntities=new ct,this._removedEntities=new ct,this._changedEntities=new ct,this._suspendCount=0,this._collectionChanged=new fe,this._id=oo(),this._show=!0,this._firing=!1,this._refire=!1}Fr.prototype.suspendEvents=function(){this._suspendCount++};Fr.prototype.resumeEvents=function(){this._suspendCount--,iE(this)};Object.defineProperties(Fr.prototype,{collectionChanged:{get:function(){return this._collectionChanged}},id:{get:function(){return this._id}},values:{get:function(){return this._entities.values}},show:{get:function(){return this._show},set:function(e){if(e===this._show)return;this.suspendEvents();let t,n=[],i=this._entities.values,o=i.length;for(t=0;t<o;t++)n.push(i[t].isShowing);for(this._show=e,t=0;t<o;t++){let r=n[t],a=i[t];r!==a.isShowing&&a.definitionChanged.raiseEvent(a,"isShowing",a.isShowing,r)}this.resumeEvents()}},owner:{get:function(){return this._owner}}});Fr.prototype.computeAvailability=function(){let e=Re.MAXIMUM_VALUE,t=Re.MINIMUM_VALUE,n=this._entities.values;for(let i=0,o=n.length;i<o;i++){let a=n[i].availability;if(c(a)){let s=a.start,A=a.stop;X.lessThan(s,e)&&!s.equals(Re.MINIMUM_VALUE)&&(e=s),X.greaterThan(A,t)&&!A.equals(Re.MAXIMUM_VALUE)&&(t=A)}}return Re.MAXIMUM_VALUE.equals(e)&&(e=Re.MINIMUM_VALUE),Re.MINIMUM_VALUE.equals(t)&&(t=Re.MAXIMUM_VALUE),new nn({start:e,stop:t})};Fr.prototype.add=function(e){e instanceof ea||(e=new ea(e));let t=e.id,n=this._entities;if(n.contains(t))throw new Ee(`An entity with id ${t} already exists in this collection.`);return e.entityCollection=this,n.set(t,e),this._removedEntities.remove(t)||this._addedEntities.set(t,e),e.definitionChanged.addEventListener(Fr.prototype._onEntityDefinitionChanged,this),iE(this),e};Fr.prototype.remove=function(e){return c(e)?this.removeById(e.id):!1};Fr.prototype.contains=function(e){return this._entities.get(e.id)===e};Fr.prototype.removeById=function(e){if(!c(e))return!1;let n=this._entities.get(e);return this._entities.remove(e)?(this._addedEntities.remove(e)||(this._removedEntities.set(e,n),this._changedEntities.remove(e)),this._entities.remove(e),n.definitionChanged.removeEventListener(Fr.prototype._onEntityDefinitionChanged,this),iE(this),!0):!1};Fr.prototype.removeAll=function(){let e=this._entities,t=e.length,n=e.values,i=this._addedEntities,o=this._removedEntities;for(let r=0;r<t;r++){let a=n[r],s=a.id,A=i.get(s);c(A)||(a.definitionChanged.removeEventListener(Fr.prototype._onEntityDefinitionChanged,this),o.set(s,a))}e.removeAll(),i.removeAll(),this._changedEntities.removeAll(),iE(this)};Fr.prototype.getById=function(e){return this._entities.get(e)};Fr.prototype.getOrCreateEntity=function(e){let t=this._entities.get(e);return c(t)||(EY.id=e,t=new ea(EY),this.add(t)),t};Fr.prototype._onEntityDefinitionChanged=function(e){let t=e.id;this._addedEntities.contains(t)||this._changedEntities.set(t,e),iE(this)};var Y0=Fr;function YQ(){this._removalFunctions=[]}YQ.prototype.add=function(e,t,n){let i=e.addEventListener(t,n);this._removalFunctions.push(i);let o=this;return function(){i();let r=o._removalFunctions;r.splice(r.indexOf(i),1)}};YQ.prototype.removeAll=function(){let e=this._removalFunctions;for(let t=0,n=e.length;t<n;++t)e[t]();e.length=0};var HA=YQ;function JQ(e,t){return X.compare(e.start,t.start)}function to(e){if(this._intervals=[],this._changedEvent=new fe,c(e)){let t=e.length;for(let n=0;n<t;n++)this.addInterval(e[n])}}Object.defineProperties(to.prototype,{changedEvent:{get:function(){return this._changedEvent}},start:{get:function(){let e=this._intervals;return e.length===0?void 0:e[0].start}},isStartIncluded:{get:function(){let e=this._intervals;return e.length===0?!1:e[0].isStartIncluded}},stop:{get:function(){let e=this._intervals,t=e.length;return t===0?void 0:e[t-1].stop}},isStopIncluded:{get:function(){let e=this._intervals,t=e.length;return t===0?!1:e[t-1].isStopIncluded}},length:{get:function(){return this._intervals.length}},isEmpty:{get:function(){return this._intervals.length===0}}});to.prototype.equals=function(e,t){if(this===e)return!0;if(!(e instanceof to))return!1;let n=this._intervals,i=e._intervals,o=n.length;if(o!==i.length)return!1;for(let r=0;r<o;r++)if(!nn.equals(n[r],i[r],t))return!1;return!0};to.prototype.get=function(e){return this._intervals[e]};to.prototype.removeAll=function(){this._intervals.length>0&&(this._intervals.length=0,this._changedEvent.raiseEvent(this))};to.prototype.findIntervalContainingDate=function(e){let t=this.indexOf(e);return t>=0?this._intervals[t]:void 0};to.prototype.findDataForIntervalContainingDate=function(e){let t=this.indexOf(e);return t>=0?this._intervals[t].data:void 0};to.prototype.contains=function(e){return this.indexOf(e)>=0};var qQ=new nn;to.prototype.indexOf=function(e){let t=this._intervals;qQ.start=e,qQ.stop=e;let n=sr(t,qQ,JQ);return n>=0?t[n].isStartIncluded?n:n>0&&t[n-1].stop.equals(e)&&t[n-1].isStopIncluded?n-1:~n:(n=~n,n>0&&n-1<t.length&&nn.contains(t[n-1],e)?n-1:~n)};to.prototype.findInterval=function(e){e=e??k.EMPTY_OBJECT;let t=e.start,n=e.stop,i=e.isStartIncluded,o=e.isStopIncluded,r=this._intervals;for(let a=0,s=r.length;a<s;a++){let A=r[a];if((!c(t)||A.start.equals(t))&&(!c(n)||A.stop.equals(n))&&(!c(i)||A.isStartIncluded===i)&&(!c(o)||A.isStopIncluded===o))return r[a]}};to.prototype.addInterval=function(e,t){if(e.isEmpty)return;let n=this._intervals;if(n.length===0||X.greaterThan(e.start,n[n.length-1].stop)){n.push(e),this._changedEvent.raiseEvent(this);return}let i=sr(n,e,JQ);i<0?i=~i:i>0&&e.isStartIncluded&&n[i-1].isStartIncluded&&n[i-1].start.equals(e.start)?--i:i<n.length&&!e.isStartIncluded&&n[i].isStartIncluded&&n[i].start.equals(e.start)&&++i;let o;for(i>0&&(o=X.compare(n[i-1].stop,e.start),(o>0||o===0&&(n[i-1].isStopIncluded||e.isStartIncluded))&&((c(t)?t(n[i-1].data,e.data):n[i-1].data===e.data)?(X.greaterThan(e.stop,n[i-1].stop)?e=new nn({start:n[i-1].start,stop:e.stop,isStartIncluded:n[i-1].isStartIncluded,isStopIncluded:e.isStopIncluded,data:e.data}):e=new nn({start:n[i-1].start,stop:n[i-1].stop,isStartIncluded:n[i-1].isStartIncluded,isStopIncluded:n[i-1].isStopIncluded||e.stop.equals(n[i-1].stop)&&e.isStopIncluded,data:e.data}),n.splice(i-1,1),--i):(o=X.compare(n[i-1].stop,e.stop),(o>0||o===0&&n[i-1].isStopIncluded&&!e.isStopIncluded)&&n.splice(i,0,new nn({start:e.stop,stop:n[i-1].stop,isStartIncluded:!e.isStopIncluded,isStopIncluded:n[i-1].isStopIncluded,data:n[i-1].data})),n[i-1]=new nn({start:n[i-1].start,stop:e.start,isStartIncluded:n[i-1].isStartIncluded,isStopIncluded:!e.isStartIncluded,data:n[i-1].data}))));i<n.length&&(o=X.compare(e.stop,n[i].start),o>0||o===0&&(e.isStopIncluded||n[i].isStartIncluded));)if(c(t)?t(n[i].data,e.data):n[i].data===e.data)e=new nn({start:e.start,stop:X.greaterThan(n[i].stop,e.stop)?n[i].stop:e.stop,isStartIncluded:e.isStartIncluded,isStopIncluded:X.greaterThan(n[i].stop,e.stop)?n[i].isStopIncluded:e.isStopIncluded,data:e.data}),n.splice(i,1);else if(n[i]=new nn({start:e.stop,stop:n[i].stop,isStartIncluded:!e.isStopIncluded,isStopIncluded:n[i].isStopIncluded,data:n[i].data}),n[i].isEmpty)n.splice(i,1);else break;n.splice(i,0,e),this._changedEvent.raiseEvent(this)};to.prototype.removeInterval=function(e){if(e.isEmpty)return!1;let t=this._intervals,n=sr(t,e,JQ);n<0&&(n=~n);let i=!1;for(n>0&&(X.greaterThan(t[n-1].stop,e.start)||t[n-1].stop.equals(e.start)&&t[n-1].isStopIncluded&&e.isStartIncluded)&&(i=!0,(X.greaterThan(t[n-1].stop,e.stop)||t[n-1].isStopIncluded&&!e.isStopIncluded&&t[n-1].stop.equals(e.stop))&&t.splice(n,0,new nn({start:e.stop,stop:t[n-1].stop,isStartIncluded:!e.isStopIncluded,isStopIncluded:t[n-1].isStopIncluded,data:t[n-1].data})),t[n-1]=new nn({start:t[n-1].start,stop:e.start,isStartIncluded:t[n-1].isStartIncluded,isStopIncluded:!e.isStartIncluded,data:t[n-1].data})),n<t.length&&!e.isStartIncluded&&t[n].isStartIncluded&&e.start.equals(t[n].start)&&(i=!0,t.splice(n,0,new nn({start:t[n].start,stop:t[n].start,isStartIncluded:!0,isStopIncluded:!0,data:t[n].data})),++n);n<t.length&&X.greaterThan(e.stop,t[n].stop);)i=!0,t.splice(n,1);return n<t.length&&e.stop.equals(t[n].stop)&&(i=!0,!e.isStopIncluded&&t[n].isStopIncluded?n+1<t.length&&t[n+1].start.equals(e.stop)&&t[n].data===t[n+1].data?(t.splice(n,1),t[n]=new nn({start:t[n].start,stop:t[n].stop,isStartIncluded:!0,isStopIncluded:t[n].isStopIncluded,data:t[n].data})):t[n]=new nn({start:e.stop,stop:e.stop,isStartIncluded:!0,isStopIncluded:!0,data:t[n].data}):t.splice(n,1)),n<t.length&&(X.greaterThan(e.stop,t[n].start)||e.stop.equals(t[n].start)&&e.isStopIncluded&&t[n].isStartIncluded)&&(i=!0,t[n]=new nn({start:e.stop,stop:t[n].stop,isStartIncluded:!e.isStopIncluded,isStopIncluded:t[n].isStopIncluded,data:t[n].data})),i&&this._changedEvent.raiseEvent(this),i};to.prototype.intersect=function(e,t,n){let i=new to,o=0,r=0,a=this._intervals,s=e._intervals;for(;o<a.length&&r<s.length;){let A=a[o],l=s[r];if(X.lessThan(A.stop,l.start))++o;else if(X.lessThan(l.stop,A.start))++r;else{if(c(n)||c(t)&&t(A.data,l.data)||!c(t)&&l.data===A.data){let f=nn.intersect(A,l,new nn,n);f.isEmpty||i.addInterval(f,t)}X.lessThan(A.stop,l.stop)||A.stop.equals(l.stop)&&!A.isStopIncluded&&l.isStopIncluded?++o:++r}}return i};to.fromJulianDateArray=function(e,t){c(t)||(t=new to);let n=e.julianDates,i=n.length,o=e.dataCallback,r=e.isStartIncluded??!0,a=e.isStopIncluded??!0,s=e.leadingInterval??!1,A=e.trailingInterval??!1,l,f=0;s&&(++f,l=new nn({start:Re.MINIMUM_VALUE,stop:n[0],isStartIncluded:!0,isStopIncluded:!r}),l.data=c(o)?o(l,t.length):t.length,t.addInterval(l));for(let h=0;h<i-1;++h){let m=n[h],p=n[h+1];l=new nn({start:m,stop:p,isStartIncluded:t.length===f?r:!0,isStopIncluded:h===i-2?a:!1}),l.data=c(o)?o(l,t.length):t.length,t.addInterval(l),m=p}return A&&(l=new nn({start:n[i-1],stop:Re.MAXIMUM_VALUE,isStartIncluded:!a,isStopIncluded:!0}),l.data=c(o)?o(l,t.length):t.length,t.addInterval(l)),t};var kr=new Vh,oE=[0,31,28,31,30,31,30,31,31,30,31,30,31];function WQ(e,t,n){c(n)||(n=new X),X.toGregorianDate(e,kr);let i=kr.millisecond+t.millisecond,o=kr.second+t.second,r=kr.minute+t.minute,a=kr.hour+t.hour,s=kr.day+t.day,A=kr.month+t.month,l=kr.year+t.year;for(i>=1e3&&(o+=Math.floor(i/1e3),i=i%1e3),o>=60&&(r+=Math.floor(o/60),o=o%60),r>=60&&(a+=Math.floor(r/60),r=r%60),a>=24&&(s+=Math.floor(a/24),a=a%24),oE[2]=vf(l)?29:28;s>oE[A]||A>=13;)s>oE[A]&&(s-=oE[A],++A),A>=13&&(--A,l+=Math.floor(A/12),A=A%12,++A),oE[2]=vf(l)?29:28;return kr.millisecond=i,kr.second=o,kr.minute=r,kr.hour=a,kr.day=s,kr.month=A,kr.year=l,X.fromGregorianDate(kr,n)}var XTe=new X,ZTe=/P(?:([\d.,]+)Y)?(?:([\d.,]+)M)?(?:([\d.,]+)W)?(?:([\d.,]+)D)?(?:T(?:([\d.,]+)H)?(?:([\d.,]+)M)?(?:([\d.,]+)S)?)?/;function IY(e,t){if(!c(e)||e.length===0)return!1;if(t.year=0,t.month=0,t.day=0,t.hour=0,t.minute=0,t.second=0,t.millisecond=0,e[0]==="P"){let n=e.match(ZTe);if(!c(n))return!1;if(c(n[1])&&(t.year=Number(n[1].replace(",","."))),c(n[2])&&(t.month=Number(n[2].replace(",","."))),c(n[3])&&(t.day=Number(n[3].replace(",","."))*7),c(n[4])&&(t.day+=Number(n[4].replace(",","."))),c(n[5])&&(t.hour=Number(n[5].replace(",","."))),c(n[6])&&(t.minute=Number(n[6].replace(",","."))),c(n[7])){let i=Number(n[7].replace(",","."));t.second=Math.floor(i),t.millisecond=i%1*1e3}}else e[e.length-1]!=="Z"&&(e+="Z"),X.toGregorianDate(X.fromIso8601(e,XTe),t);return t.year||t.month||t.day||t.hour||t.minute||t.second||t.millisecond}var rE=new Vh;to.fromIso8601=function(e,t){let n=e.iso8601.split("/"),i=X.fromIso8601(n[0]),o=X.fromIso8601(n[1]),r=[];if(!IY(n[2],rE))r.push(i,o);else{let a=X.clone(i);for(r.push(a);X.compare(a,o)<0;)a=WQ(a,rE),X.compare(o,a)<=0&&X.clone(o,a),r.push(a)}return to.fromJulianDateArray({julianDates:r,isStartIncluded:e.isStartIncluded,isStopIncluded:e.isStopIncluded,leadingInterval:e.leadingInterval,trailingInterval:e.trailingInterval,dataCallback:e.dataCallback},t)};to.fromIso8601DateArray=function(e,t){return to.fromJulianDateArray({julianDates:e.iso8601Dates.map(function(n){return X.fromIso8601(n)}),isStartIncluded:e.isStartIncluded,isStopIncluded:e.isStopIncluded,leadingInterval:e.leadingInterval,trailingInterval:e.trailingInterval,dataCallback:e.dataCallback},t)};to.fromIso8601DurationArray=function(e,t){let n=e.epoch,i=e.iso8601Durations,o=e.relativeToPrevious??!1,r=[],a,s,A=i.length;for(let l=0;l<A;++l)(IY(i[l],rE)||l===0)&&(o&&c(s)?a=WQ(s,rE):a=WQ(n,rE),r.push(a),s=a);return to.fromJulianDateArray({julianDates:r,isStartIncluded:e.isStartIncluded,isStopIncluded:e.isStopIncluded,leadingInterval:e.leadingInterval,trailingInterval:e.trailingInterval,dataCallback:e.dataCallback},t)};var af=to;function $Te(e,t,n,i){function o(){n.raiseEvent(e)}let r=[];t.removeAll();let a=i.length;for(let s=0;s<a;s++){let A=i.get(s);c(A.data)&&r.indexOf(A.data)===-1&&t.add(A.data.definitionChanged,o)}}function gh(){this._eventHelper=new HA,this._definitionChanged=new fe,this._intervals=new af,this._intervals.changedEvent.addEventListener(gh.prototype._intervalsChanged,this)}Object.defineProperties(gh.prototype,{isConstant:{get:function(){return this._intervals.isEmpty}},definitionChanged:{get:function(){return this._definitionChanged}},intervals:{get:function(){return this._intervals}}});var eSe=new X;gh.prototype.getValue=function(e,t){c(e)||(e=X.now(eSe));let n=this._intervals.findDataForIntervalContainingDate(e);if(c(n))return n.getValue(e,t)};gh.prototype.equals=function(e){return this===e||e instanceof gh&&this._intervals.equals(e._intervals,M.equals)};gh.prototype._intervalsChanged=function(){$Te(this,this._eventHelper,this._definitionChanged,this._intervals),this._definitionChanged.raiseEvent(this)};var us=gh;function Gu(){this._definitionChanged=new fe,this._composite=new us,this._composite.definitionChanged.addEventListener(Gu.prototype._raiseDefinitionChanged,this)}Object.defineProperties(Gu.prototype,{isConstant:{get:function(){return this._composite.isConstant}},definitionChanged:{get:function(){return this._definitionChanged}},intervals:{get:function(){return this._composite._intervals}}});Gu.prototype.getType=function(e){let t=this._composite._intervals.findDataForIntervalContainingDate(e);if(c(t))return t.getType(e)};var tSe=new X;Gu.prototype.getValue=function(e,t){c(e)||(e=X.now(tSe));let n=this._composite._intervals.findDataForIntervalContainingDate(e);if(c(n))return n.getValue(e,t)};Gu.prototype.equals=function(e){return this===e||e instanceof Gu&&this._composite.equals(e._composite,M.equals)};Gu.prototype._raiseDefinitionChanged=function(){this._definitionChanged.raiseEvent(this)};var KQ=Gu;function zu(e){this._referenceFrame=e??oi.FIXED,this._definitionChanged=new fe,this._composite=new us,this._composite.definitionChanged.addEventListener(zu.prototype._raiseDefinitionChanged,this)}Object.defineProperties(zu.prototype,{isConstant:{get:function(){return this._composite.isConstant}},definitionChanged:{get:function(){return this._definitionChanged}},intervals:{get:function(){return this._composite.intervals}},referenceFrame:{get:function(){return this._referenceFrame},set:function(e){this._referenceFrame=e}}});var nSe=new X;zu.prototype.getValue=function(e,t){return c(e)||(e=X.now(nSe)),this.getValueInReferenceFrame(e,oi.FIXED,t)};zu.prototype.getValueInReferenceFrame=function(e,t,n){let i=this._composite._intervals.findDataForIntervalContainingDate(e);if(c(i))return i.getValueInReferenceFrame(e,t,n)};zu.prototype.equals=function(e){return this===e||e instanceof zu&&this._referenceFrame===e._referenceFrame&&this._composite.equals(e._composite,M.equals)};zu.prototype._raiseDefinitionChanged=function(){this._definitionChanged.raiseEvent(this)};var zc=zu;var iSe={ROUNDED:0,MITERED:1,BEVELED:2},Hn=Object.freeze(iSe);var rr=[new u,new u],oSe=new u,rSe=new u,aSe=new u,sSe=new u,cSe=new u,ASe=new u,lSe=new u,fSe=new u,uSe=new u,Mp=new u,q0=new u,aE={},XQ=new ae;function dSe(e,t){let n=new Array(e.length);for(let i=0;i<e.length;i++){let o=e[i];XQ=t.cartesianToCartographic(o,XQ),n[i]=XQ.height,e[i]=t.scaleToGeodeticSurface(o,o)}return n}function ZQ(e,t,n,i){let o=e[0],r=e[1],a=u.angleBetween(o,r),s=Math.ceil(a/i),A=new Array(s),l;if(t===n){for(l=0;l<s;l++)A[l]=t;return A.push(n),A}let h=(n-t)/s;for(l=1;l<s;l++){let m=t+l*h;A[l]=m}return A[0]=t,A.push(n),A}var W0=new u,J0=new u;function hSe(e,t,n,i){let o=new Fo(n,i),r=o.projectPointOntoPlane(u.add(n,e,W0),W0),a=o.projectPointOntoPlane(u.add(n,t,J0),J0),s=U.angleBetween(r,a);return a.x*r.y-a.y*r.x>=0?-s:s}var mSe=new u(-1,0,0),Ch=new O,pSe=new O,$Q=new J,gSe=J.IDENTITY.clone(),CSe=new u,_Se=new se,yY=new u;function sf(e,t,n,i,o,r,a,s){let A=CSe,l=_Se;Ch=Rn.eastNorthUpToFixedFrame(e,o,Ch),A=O.multiplyByPointAsVector(Ch,mSe,A),A=u.normalize(A,A);let f=hSe(A,t,e,o);$Q=J.fromRotationZ(f,$Q),yY.z=r,Ch=O.multiplyTransformation(Ch,O.fromRotationTranslation($Q,yY,pSe),Ch);let h=gSe;h[0]=a;for(let m=0;m<s;m++)for(let p=0;p<n.length;p+=3)l=u.fromArray(n,p,l),l=J.multiplyByVector(h,l,l),l=O.multiplyByPoint(Ch,l,l),i.push(l.x,l.y,l.z);return i}var ESe=new u;function eR(e,t,n,i,o,r,a){for(let s=0;s<e.length;s+=3){let A=u.fromArray(e,s,ESe);i=sf(A,t,n,i,o,r[s/3],a,1)}return i}function ISe(e,t){let n=e.length,i=new Array(n*6),o=0,r=t.x+t.width/2,a=t.y+t.height/2,s=e[0];i[o++]=s.x-r,i[o++]=0,i[o++]=s.y-a;for(let A=1;A<n;A++){s=e[A];let l=s.x-r,f=s.y-a;i[o++]=l,i[o++]=0,i[o++]=f,i[o++]=l,i[o++]=0,i[o++]=f}return s=e[0],i[o++]=s.x-r,i[o++]=0,i[o++]=s.y-a,i}function bY(e,t){let n=e.length,i=new Array(n*3),o=0,r=t.x+t.width/2,a=t.y+t.height/2;for(let s=0;s<n;s++)i[o++]=e[s].x-r,i[o++]=0,i[o++]=e[s].y-a;return i}var BY=new qe,xY=new u,TY=new J;function SY(e,t,n,i,o,r,a,s,A,l){let f=u.angleBetween(u.subtract(t,e,Mp),u.subtract(n,e,q0)),h=i===Hn.BEVELED?0:Math.ceil(f/w.toRadians(5)),m;o?m=J.fromQuaternion(qe.fromAxisAngle(u.negate(e,Mp),f/(h+1),BY),TY):m=J.fromQuaternion(qe.fromAxisAngle(e,f/(h+1),BY),TY);let p,g;if(t=u.clone(t,xY),h>0){let C=l?2:1;for(let _=0;_<h;_++)t=J.multiplyByVector(m,t,t),p=u.subtract(t,e,Mp),p=u.normalize(p,p),o||(p=u.negate(p,p)),g=r.scaleToGeodeticSurface(t,q0),a=sf(g,p,s,a,r,A,1,C)}else p=u.subtract(t,e,Mp),p=u.normalize(p,p),o||(p=u.negate(p,p)),g=r.scaleToGeodeticSurface(t,q0),a=sf(g,p,s,a,r,A,1,1),n=u.clone(n,xY),p=u.subtract(n,e,Mp),p=u.normalize(p,p),o||(p=u.negate(p,p)),g=r.scaleToGeodeticSurface(n,q0),a=sf(g,p,s,a,r,A,1,1);return a}aE.removeDuplicatesFromShape=function(e){let t=e.length,n=[];for(let i=t-1,o=0;o<t;i=o++){let r=e[i],a=e[o];U.equals(r,a)||n.push(a)}return n};aE.angleIsGreaterThanPi=function(e,t,n,i){let o=new Fo(n,i),r=o.projectPointOntoPlane(u.add(n,e,W0),W0),a=o.projectPointOntoPlane(u.add(n,t,J0),J0);return a.x*r.y-a.y*r.x>=0};var ySe=new u,bSe=new u;aE.computePositions=function(e,t,n,i,o){let r=i._ellipsoid,a=dSe(e,r),s=i._granularity,A=i._cornerType,l=o?ISe(t,n):bY(t,n),f=o?bY(t,n):void 0,h=n.height/2,m=n.width/2,p=e.length,g=[],C=o?[]:void 0,_=oSe,E=rSe,I=aSe,y=sSe,b=cSe,x=ASe,S=lSe,P=fSe,D=uSe,Q=e[0],v=e[1];y=r.geodeticSurfaceNormal(Q,y),_=u.subtract(v,Q,_),_=u.normalize(_,_),P=u.cross(y,_,P),P=u.normalize(P,P);let d=a[0],B=a[1];o&&(C=sf(Q,P,f,C,r,d+h,1,1)),D=u.clone(Q,D),Q=v,E=u.negate(_,E);let T,R;for(let q=1;q<p-1;q++){let z=o?2:1;if(v=e[q+1],Q.equals(v)){jt("Positions are too close and are considered equivalent with rounding error.");continue}_=u.subtract(v,Q,_),_=u.normalize(_,_),y=r.geodeticSurfaceNormal(Q,y);let K=u.multiplyByScalar(y,u.dot(_,y),ySe);u.subtract(_,K,K),u.normalize(K,K);let ie=u.multiplyByScalar(y,u.dot(E,y),bSe);if(u.subtract(E,ie,ie),u.normalize(ie,ie),!w.equalsEpsilon(Math.abs(u.dot(K,ie)),1,w.EPSILON7)){I=u.add(_,E,I),I=u.normalize(I,I),I=u.cross(I,y,I),I=u.cross(y,I,I),I=u.normalize(I,I);let de=1/Math.max(.25,u.magnitude(u.cross(I,E,Mp))),he=aE.angleIsGreaterThanPi(_,E,Q,r);he?(b=u.add(Q,u.multiplyByScalar(I,de*m,I),b),x=u.add(b,u.multiplyByScalar(P,m,x),x),rr[0]=u.clone(D,rr[0]),rr[1]=u.clone(x,rr[1]),T=ZQ(rr,d+h,B+h,s),R=Ti.generateArc({positions:rr,granularity:s,ellipsoid:r}),g=eR(R,P,l,g,r,T,1),P=u.cross(y,_,P),P=u.normalize(P,P),S=u.add(b,u.multiplyByScalar(P,m,S),S),A===Hn.ROUNDED||A===Hn.BEVELED?SY(b,x,S,A,he,r,g,l,B+h,o):(I=u.negate(I,I),g=sf(Q,I,l,g,r,B+h,de,z)),D=u.clone(S,D)):(b=u.add(Q,u.multiplyByScalar(I,de*m,I),b),x=u.add(b,u.multiplyByScalar(P,-m,x),x),rr[0]=u.clone(D,rr[0]),rr[1]=u.clone(x,rr[1]),T=ZQ(rr,d+h,B+h,s),R=Ti.generateArc({positions:rr,granularity:s,ellipsoid:r}),g=eR(R,P,l,g,r,T,1),P=u.cross(y,_,P),P=u.normalize(P,P),S=u.add(b,u.multiplyByScalar(P,-m,S),S),A===Hn.ROUNDED||A===Hn.BEVELED?SY(b,x,S,A,he,r,g,l,B+h,o):g=sf(Q,I,l,g,r,B+h,de,z),D=u.clone(S,D)),E=u.negate(_,E)}else g=sf(D,P,l,g,r,d+h,1,1),D=Q;d=B,B=a[q+1],Q=v}rr[0]=u.clone(D,rr[0]),rr[1]=u.clone(Q,rr[1]),T=ZQ(rr,d+h,B+h,s),R=Ti.generateArc({positions:rr,granularity:s,ellipsoid:r}),g=eR(R,P,l,g,r,T,1),o&&(C=sf(Q,P,f,C,r,B+h,1,1)),p=g.length;let L=o?p+C.length:p,G=new Float64Array(L);return G.set(g),o&&G.set(C,p),G};var Hu=aE;var nR={},Op=new u,vY=new u,BSe=new u,wY=new u,fa=[new u,new u],PY=new u,MY=new u,OY=new u,xSe=new u,TSe=new u,SSe=new u,wSe=new u,DSe=new u,QSe=new u,RSe=new u,DY=new qe,QY=new J;function K0(e,t,n,i,o){let r=u.angleBetween(u.subtract(t,e,Op),u.subtract(n,e,vY)),a=i===Hn.BEVELED?1:Math.ceil(r/w.toRadians(5))+1,s=a*3,A=new Array(s);A[s-3]=n.x,A[s-2]=n.y,A[s-1]=n.z;let l;o?l=J.fromQuaternion(qe.fromAxisAngle(u.negate(e,Op),r/a,DY),QY):l=J.fromQuaternion(qe.fromAxisAngle(e,r/a,DY),QY);let f=0;t=u.clone(t,Op);for(let h=0;h<a;h++)t=J.multiplyByVector(l,t,t),A[f++]=t.x,A[f++]=t.y,A[f++]=t.z;return A}function vSe(e){let t=PY,n=MY,i=OY,o=e[1];n=u.fromArray(e[1],o.length-3,n),i=u.fromArray(e[0],0,i),t=u.midpoint(n,i,t);let r=K0(t,n,i,Hn.ROUNDED,!1),a=e.length-1,s=e[a-1];o=e[a],n=u.fromArray(s,s.length-3,n),i=u.fromArray(o,0,i),t=u.midpoint(n,i,t);let A=K0(t,n,i,Hn.ROUNDED,!1);return[r,A]}function RY(e,t,n,i){let o=Op;return i?o=u.add(e,t,o):(t=u.negate(t,t),o=u.add(e,t,o)),[o.x,o.y,o.z,n.x,n.y,n.z]}function tR(e,t,n,i){let o=new Array(e.length),r=new Array(e.length),a=u.multiplyByScalar(t,n,Op),s=u.negate(a,vY),A=0,l=e.length-1;for(let f=0;f<e.length;f+=3){let h=u.fromArray(e,f,BSe),m=u.add(h,s,wY);o[A++]=m.x,o[A++]=m.y,o[A++]=m.z;let p=u.add(h,a,wY);r[l--]=p.z,r[l--]=p.y,r[l--]=p.x}return i.push(o,r),i}nR.addAttribute=function(e,t,n,i){let o=t.x,r=t.y,a=t.z;c(n)&&(e[n]=o,e[n+1]=r,e[n+2]=a),c(i)&&(e[i]=a,e[i-1]=r,e[i-2]=o)};var PSe=new u,MSe=new u;nR.computePositions=function(e){let t=e.granularity,n=e.positions,i=e.ellipsoid,o=e.width/2,r=e.cornerType,a=e.saveAttributes,s=PY,A=MY,l=OY,f=xSe,h=TSe,m=SSe,p=wSe,g=DSe,C=QSe,_=RSe,E=[],I=a?[]:void 0,y=a?[]:void 0,b=n[0],x=n[1];A=u.normalize(u.subtract(x,b,A),A),s=i.geodeticSurfaceNormal(b,s),f=u.normalize(u.cross(s,A,f),f),a&&(I.push(f.x,f.y,f.z),y.push(s.x,s.y,s.z)),p=u.clone(b,p),b=x,l=u.negate(A,l);let S,P=[],D,Q=n.length;for(D=1;D<Q-1;D++){s=i.geodeticSurfaceNormal(b,s),x=n[D+1],A=u.normalize(u.subtract(x,b,A),A);let d=u.multiplyByScalar(s,u.dot(A,s),PSe);u.subtract(A,d,d),u.normalize(d,d);let B=u.multiplyByScalar(s,u.dot(l,s),MSe);if(u.subtract(l,B,B),u.normalize(B,B),!w.equalsEpsilon(Math.abs(u.dot(d,B)),1,w.EPSILON7)){h=u.normalize(u.add(A,l,h),h),h=u.cross(h,s,h),h=u.cross(s,h,h),h=u.normalize(h,h);let R=o/Math.max(.25,u.magnitude(u.cross(h,l,Op))),L=Hu.angleIsGreaterThanPi(A,l,b,i);h=u.multiplyByScalar(h,R,h),L?(g=u.add(b,h,g),_=u.add(g,u.multiplyByScalar(f,o,_),_),C=u.add(g,u.multiplyByScalar(f,o*2,C),C),fa[0]=u.clone(p,fa[0]),fa[1]=u.clone(_,fa[1]),S=Ti.generateArc({positions:fa,granularity:t,ellipsoid:i}),E=tR(S,f,o,E),a&&(I.push(f.x,f.y,f.z),y.push(s.x,s.y,s.z)),m=u.clone(C,m),f=u.normalize(u.cross(s,A,f),f),C=u.add(g,u.multiplyByScalar(f,o*2,C),C),p=u.add(g,u.multiplyByScalar(f,o,p),p),r===Hn.ROUNDED||r===Hn.BEVELED?P.push({leftPositions:K0(g,m,C,r,L)}):P.push({leftPositions:RY(b,u.negate(h,h),C,L)})):(C=u.add(b,h,C),_=u.add(C,u.negate(u.multiplyByScalar(f,o,_),_),_),g=u.add(C,u.negate(u.multiplyByScalar(f,o*2,g),g),g),fa[0]=u.clone(p,fa[0]),fa[1]=u.clone(_,fa[1]),S=Ti.generateArc({positions:fa,granularity:t,ellipsoid:i}),E=tR(S,f,o,E),a&&(I.push(f.x,f.y,f.z),y.push(s.x,s.y,s.z)),m=u.clone(g,m),f=u.normalize(u.cross(s,A,f),f),g=u.add(C,u.negate(u.multiplyByScalar(f,o*2,g),g),g),p=u.add(C,u.negate(u.multiplyByScalar(f,o,p),p),p),r===Hn.ROUNDED||r===Hn.BEVELED?P.push({rightPositions:K0(C,m,g,r,L)}):P.push({rightPositions:RY(b,h,g,L)})),l=u.negate(A,l)}b=x}s=i.geodeticSurfaceNormal(b,s),fa[0]=u.clone(p,fa[0]),fa[1]=u.clone(b,fa[1]),S=Ti.generateArc({positions:fa,granularity:t,ellipsoid:i}),E=tR(S,f,o,E),a&&(I.push(f.x,f.y,f.z),y.push(s.x,s.y,s.z));let v;return r===Hn.ROUNDED&&(v=vSe(E)),{positions:E,corners:P,lefts:I,normals:y,endPositions:v}};var Jn=nR;var FY=new u,kY=new u,X0=new u,Z0=new u,OSe=new u,UY=new u,Vu=new u,Lp=new u;function GY(e,t){for(let n=0;n<e.length;n++)e[n]=t.scaleToGeodeticSurface(e[n],e[n]);return e}function Hc(e,t,n,i,o,r){let a=e.normals,s=e.tangents,A=e.bitangents,l=u.normalize(u.cross(n,t,Vu),Vu);r.normal&&Jn.addAttribute(a,t,i,o),r.tangent&&Jn.addAttribute(s,l,i,o),r.bitangent&&Jn.addAttribute(A,n,i,o)}function zY(e,t,n){let i=e.positions,o=e.corners,r=e.endPositions,a=e.lefts,s=e.normals,A=new Mt,l,f=0,h=0,m,p=0,g;for(m=0;m<i.length;m+=2)g=i[m].length-3,f+=g,p+=g*2,h+=i[m+1].length-3;for(f+=3,h+=3,m=0;m<o.length;m++){l=o[m];let _e=o[m].leftPositions;c(_e)?(g=_e.length,f+=g,p+=g):(g=o[m].rightPositions.length,h+=g,p+=g)}let C=c(r),_;C&&(_=r[0].length-3,f+=_,h+=_,_/=3,p+=_*6);let E=f+h,I=new Float64Array(E),y=t.normal?new Float32Array(E):void 0,b=t.tangent?new Float32Array(E):void 0,x=t.bitangent?new Float32Array(E):void 0,S={normals:y,tangents:b,bitangents:x},P=0,D=E-1,Q,v,d,B,T=FY,R=kY,L,G,q=_/2,z=Be.createTypedArray(E/3,p),K=0;if(C){G=X0,L=Z0;let _e=r[0];for(T=u.fromArray(s,0,T),R=u.fromArray(a,0,R),m=0;m<q;m++)G=u.fromArray(_e,(q-1-m)*3,G),L=u.fromArray(_e,(q+m)*3,L),Jn.addAttribute(I,L,P),Jn.addAttribute(I,G,void 0,D),Hc(S,T,R,P,D,t),v=P/3,B=v+1,Q=(D-2)/3,d=Q-1,z[K++]=Q,z[K++]=v,z[K++]=d,z[K++]=d,z[K++]=v,z[K++]=B,P+=3,D-=3}let ie=0,le=0,de=i[ie++],he=i[ie++];I.set(de,P),I.set(he,D-he.length+1),R=u.fromArray(a,le,R);let Se,be;for(g=he.length-3,m=0;m<g;m+=3)Se=n.geodeticSurfaceNormal(u.fromArray(de,m,Vu),Vu),be=n.geodeticSurfaceNormal(u.fromArray(he,g-m,Lp),Lp),T=u.normalize(u.add(Se,be,T),T),Hc(S,T,R,P,D,t),v=P/3,B=v+1,Q=(D-2)/3,d=Q-1,z[K++]=Q,z[K++]=v,z[K++]=d,z[K++]=d,z[K++]=v,z[K++]=B,P+=3,D-=3;for(Se=n.geodeticSurfaceNormal(u.fromArray(de,g,Vu),Vu),be=n.geodeticSurfaceNormal(u.fromArray(he,g,Lp),Lp),T=u.normalize(u.add(Se,be,T),T),le+=3,m=0;m<o.length;m++){let _e;l=o[m];let Ct=l.leftPositions,ft=l.rightPositions,At,at,Xe=UY,wt=X0,zt=Z0;if(T=u.fromArray(s,le,T),c(Ct)){for(Hc(S,T,R,void 0,D,t),D-=3,At=B,at=d,_e=0;_e<Ct.length/3;_e++)Xe=u.fromArray(Ct,_e*3,Xe),z[K++]=At,z[K++]=at-_e-1,z[K++]=at-_e,Jn.addAttribute(I,Xe,void 0,D),wt=u.fromArray(I,(at-_e-1)*3,wt),zt=u.fromArray(I,At*3,zt),R=u.normalize(u.subtract(wt,zt,R),R),Hc(S,T,R,void 0,D,t),D-=3;Xe=u.fromArray(I,At*3,Xe),wt=u.subtract(u.fromArray(I,at*3,wt),Xe,wt),zt=u.subtract(u.fromArray(I,(at-_e)*3,zt),Xe,zt),R=u.normalize(u.add(wt,zt,R),R),Hc(S,T,R,P,void 0,t),P+=3}else{for(Hc(S,T,R,P,void 0,t),P+=3,At=d,at=B,_e=0;_e<ft.length/3;_e++)Xe=u.fromArray(ft,_e*3,Xe),z[K++]=At,z[K++]=at+_e,z[K++]=at+_e+1,Jn.addAttribute(I,Xe,P),wt=u.fromArray(I,At*3,wt),zt=u.fromArray(I,(at+_e)*3,zt),R=u.normalize(u.subtract(wt,zt,R),R),Hc(S,T,R,P,void 0,t),P+=3;Xe=u.fromArray(I,At*3,Xe),wt=u.subtract(u.fromArray(I,(at+_e)*3,wt),Xe,wt),zt=u.subtract(u.fromArray(I,at*3,zt),Xe,zt),R=u.normalize(u.negate(u.add(zt,wt,R),R),R),Hc(S,T,R,void 0,D,t),D-=3}for(de=i[ie++],he=i[ie++],de.splice(0,3),he.splice(he.length-3,3),I.set(de,P),I.set(he,D-he.length+1),g=he.length-3,le+=3,R=u.fromArray(a,le,R),_e=0;_e<he.length;_e+=3)Se=n.geodeticSurfaceNormal(u.fromArray(de,_e,Vu),Vu),be=n.geodeticSurfaceNormal(u.fromArray(he,g-_e,Lp),Lp),T=u.normalize(u.add(Se,be,T),T),Hc(S,T,R,P,D,t),B=P/3,v=B-1,d=(D-2)/3,Q=d+1,z[K++]=Q,z[K++]=v,z[K++]=d,z[K++]=d,z[K++]=v,z[K++]=B,P+=3,D-=3;P-=3,D+=3}if(T=u.fromArray(s,s.length-3,T),Hc(S,T,R,P,D,t),C){P+=3,D-=3,G=X0,L=Z0;let _e=r[1];for(m=0;m<q;m++)G=u.fromArray(_e,(_-m-1)*3,G),L=u.fromArray(_e,m*3,L),Jn.addAttribute(I,G,void 0,D),Jn.addAttribute(I,L,P),Hc(S,T,R,P,D,t),B=P/3,v=B-1,d=(D-2)/3,Q=d+1,z[K++]=Q,z[K++]=v,z[K++]=d,z[K++]=d,z[K++]=v,z[K++]=B,P+=3,D-=3}if(A.position=new ue({componentDatatype:N.DOUBLE,componentsPerAttribute:3,values:I}),t.st){let _e=new Float32Array(E/3*2),Ct,ft,At=0;if(C){f/=3,h/=3;let at=Math.PI/(_+1);ft=1/(f-_+1),Ct=1/(h-_+1);let Xe,wt=_/2;for(m=wt+1;m<_+1;m++)Xe=w.PI_OVER_TWO+at*m,_e[At++]=Ct*(1+Math.cos(Xe)),_e[At++]=.5*(1+Math.sin(Xe));for(m=1;m<h-_+1;m++)_e[At++]=m*Ct,_e[At++]=0;for(m=_;m>wt;m--)Xe=w.PI_OVER_TWO-m*at,_e[At++]=1-Ct*(1+Math.cos(Xe)),_e[At++]=.5*(1+Math.sin(Xe));for(m=wt;m>0;m--)Xe=w.PI_OVER_TWO-at*m,_e[At++]=1-ft*(1+Math.cos(Xe)),_e[At++]=.5*(1+Math.sin(Xe));for(m=f-_;m>0;m--)_e[At++]=m*ft,_e[At++]=1;for(m=1;m<wt+1;m++)Xe=w.PI_OVER_TWO+at*m,_e[At++]=ft*(1+Math.cos(Xe)),_e[At++]=.5*(1+Math.sin(Xe))}else{for(f/=3,h/=3,ft=1/(f-1),Ct=1/(h-1),m=0;m<h;m++)_e[At++]=m*Ct,_e[At++]=0;for(m=f;m>0;m--)_e[At++]=(m-1)*ft,_e[At++]=1}A.st=new ue({componentDatatype:N.FLOAT,componentsPerAttribute:2,values:_e})}return t.normal&&(A.normal=new ue({componentDatatype:N.FLOAT,componentsPerAttribute:3,values:S.normals})),t.tangent&&(A.tangent=new ue({componentDatatype:N.FLOAT,componentsPerAttribute:3,values:S.tangents})),t.bitangent&&(A.bitangent=new ue({componentDatatype:N.FLOAT,componentsPerAttribute:3,values:S.bitangents})),{attributes:A,indices:z}}function LSe(e,t){if(!t.normal&&!t.tangent&&!t.bitangent&&!t.st)return e;let n=e.position.values,i,o;(t.normal||t.bitangent)&&(i=e.normal.values,o=e.bitangent.values);let r=e.position.values.length/18,a=r*3,s=r*2,A=a*2,l;if(t.normal||t.bitangent||t.tangent){let f=t.normal?new Float32Array(a*6):void 0,h=t.tangent?new Float32Array(a*6):void 0,m=t.bitangent?new Float32Array(a*6):void 0,p=FY,g=kY,C=X0,_=Z0,E=OSe,I=UY,y=A;for(l=0;l<a;l+=3){let b=y+A;p=u.fromArray(n,l,p),g=u.fromArray(n,l+a,g),C=u.fromArray(n,(l+3)%a,C),g=u.subtract(g,p,g),C=u.subtract(C,p,C),_=u.normalize(u.cross(g,C,_),_),t.normal&&(Jn.addAttribute(f,_,b),Jn.addAttribute(f,_,b+3),Jn.addAttribute(f,_,y),Jn.addAttribute(f,_,y+3)),(t.tangent||t.bitangent)&&(I=u.fromArray(i,l,I),t.bitangent&&(Jn.addAttribute(m,I,b),Jn.addAttribute(m,I,b+3),Jn.addAttribute(m,I,y),Jn.addAttribute(m,I,y+3)),t.tangent&&(E=u.normalize(u.cross(I,_,E),E),Jn.addAttribute(h,E,b),Jn.addAttribute(h,E,b+3),Jn.addAttribute(h,E,y),Jn.addAttribute(h,E,y+3))),y+=6}if(t.normal){for(f.set(i),l=0;l<a;l+=3)f[l+a]=-i[l],f[l+a+1]=-i[l+1],f[l+a+2]=-i[l+2];e.normal.values=f}else e.normal=void 0;if(t.bitangent?(m.set(o),m.set(o,a),e.bitangent.values=m):e.bitangent=void 0,t.tangent){let b=e.tangent.values;h.set(b),h.set(b,a),e.tangent.values=h}}if(t.st){let f=e.st.values,h=new Float32Array(s*6);h.set(f),h.set(f,s);let m=s*2;for(let p=0;p<2;p++){for(h[m++]=f[0],h[m++]=f[1],l=2;l<s;l+=2){let g=f[l],C=f[l+1];h[m++]=g,h[m++]=C,h[m++]=g,h[m++]=C}h[m++]=f[0],h[m++]=f[1]}e.st.values=h}return e}function iR(e,t,n){n[t++]=e[0],n[t++]=e[1],n[t++]=e[2];for(let i=3;i<e.length;i+=3){let o=e[i],r=e[i+1],a=e[i+2];n[t++]=o,n[t++]=r,n[t++]=a,n[t++]=o,n[t++]=r,n[t++]=a}return n[t++]=e[0],n[t++]=e[1],n[t++]=e[2],n}function NSe(e,t){let n=new ge({position:t.position,normal:t.normal||t.bitangent||e.shadowVolume,tangent:t.tangent,bitangent:t.normal||t.bitangent,st:t.st}),i=e.ellipsoid,o=Jn.computePositions(e),r=zY(o,n,i),a=e.height,s=e.extrudedHeight,A=r.attributes,l=r.indices,f=A.position.values,h=f.length,m=new Float64Array(h*6),p=new Float64Array(h);p.set(f);let g=new Float64Array(h*4);f=Tn.scaleToGeodeticHeight(f,a,i),g=iR(f,0,g),p=Tn.scaleToGeodeticHeight(p,s,i),g=iR(p,h*2,g),m.set(f),m.set(p,h),m.set(g,h*2),A.position.values=m,A=LSe(A,t);let C,_=h/3;if(e.shadowVolume){let Q=A.normal.values;h=Q.length;let v=new Float32Array(h*6);for(C=0;C<h;C++)Q[C]=-Q[C];v.set(Q,h),v=iR(Q,h*4,v),A.extrudeDirection=new ue({componentDatatype:N.FLOAT,componentsPerAttribute:3,values:v}),t.normal||(A.normal=void 0)}if(c(e.offsetAttribute)){let Q=new Uint8Array(_*6);if(e.offsetAttribute===xt.TOP)Q=Q.fill(1,0,_).fill(1,_*2,_*4);else{let v=e.offsetAttribute===xt.NONE?0:1;Q=Q.fill(v)}A.applyOffset=new ue({componentDatatype:N.UNSIGNED_BYTE,componentsPerAttribute:1,values:Q})}let E=l.length,I=_+_,y=Be.createTypedArray(m.length/3,E*2+I*3);y.set(l);let b=E;for(C=0;C<E;C+=3){let Q=l[C],v=l[C+1],d=l[C+2];y[b++]=d+_,y[b++]=v+_,y[b++]=Q+_}let x,S,P,D;for(C=0;C<I;C+=2)x=C+I,S=x+I,P=x+1,D=S+1,y[b++]=x,y[b++]=S,y[b++]=P,y[b++]=P,y[b++]=S,y[b++]=D;return{attributes:A,indices:y}}var LY=new u,sE=new u,sc=new ae;function NY(e,t,n,i,o,r){let a=u.subtract(t,e,LY);u.normalize(a,a);let s=n.geodeticSurfaceNormal(e,sE),A=u.cross(a,s,LY);u.multiplyByScalar(A,i,A);let l=o.latitude,f=o.longitude,h=r.latitude,m=r.longitude;u.add(e,A,sE),n.cartesianToCartographic(sE,sc);let p=sc.latitude,g=sc.longitude;l=Math.min(l,p),f=Math.min(f,g),h=Math.max(h,p),m=Math.max(m,g),u.subtract(e,A,sE),n.cartesianToCartographic(sE,sc),p=sc.latitude,g=sc.longitude,l=Math.min(l,p),f=Math.min(f,g),h=Math.max(h,p),m=Math.max(m,g),o.latitude=l,o.longitude=f,r.latitude=h,r.longitude=m}var ac=new u,cE=new u,Oa=new ae,La=new ae;function HY(e,t,n,i,o){e=GY(e,t);let r=Bi(e,u.equalsEpsilon),a=r.length;if(a<2||n<=0)return new ce;let s=n*.5;Oa.latitude=Number.POSITIVE_INFINITY,Oa.longitude=Number.POSITIVE_INFINITY,La.latitude=Number.NEGATIVE_INFINITY,La.longitude=Number.NEGATIVE_INFINITY;let A,l;if(i===Hn.ROUNDED){let m=r[0];u.subtract(m,r[1],ac),u.normalize(ac,ac),u.multiplyByScalar(ac,s,ac),u.add(m,ac,cE),t.cartesianToCartographic(cE,sc),A=sc.latitude,l=sc.longitude,Oa.latitude=Math.min(Oa.latitude,A),Oa.longitude=Math.min(Oa.longitude,l),La.latitude=Math.max(La.latitude,A),La.longitude=Math.max(La.longitude,l)}for(let m=0;m<a-1;++m)NY(r[m],r[m+1],t,s,Oa,La);let f=r[a-1];u.subtract(f,r[a-2],ac),u.normalize(ac,ac),u.multiplyByScalar(ac,s,ac),u.add(f,ac,cE),NY(f,cE,t,s,Oa,La),i===Hn.ROUNDED&&(t.cartesianToCartographic(cE,sc),A=sc.latitude,l=sc.longitude,Oa.latitude=Math.min(Oa.latitude,A),Oa.longitude=Math.min(Oa.longitude,l),La.latitude=Math.max(La.latitude,A),La.longitude=Math.max(La.longitude,l));let h=c(o)?o:new ce;return h.north=La.latitude,h.south=Oa.latitude,h.east=La.longitude,h.west=Oa.longitude,h}function Af(e){e=e??k.EMPTY_OBJECT;let t=e.positions,n=e.width,i=e.height??0,o=e.extrudedHeight??i;this._positions=t,this._ellipsoid=Z.clone(e.ellipsoid??Z.default),this._vertexFormat=ge.clone(e.vertexFormat??ge.DEFAULT),this._width=n,this._height=Math.max(i,o),this._extrudedHeight=Math.min(i,o),this._cornerType=e.cornerType??Hn.ROUNDED,this._granularity=e.granularity??w.RADIANS_PER_DEGREE,this._shadowVolume=e.shadowVolume??!1,this._workerName="createCorridorGeometry",this._offsetAttribute=e.offsetAttribute,this._rectangle=void 0,this.packedLength=1+t.length*u.packedLength+Z.packedLength+ge.packedLength+7}Af.pack=function(e,t,n){n=n??0;let i=e._positions,o=i.length;t[n++]=o;for(let r=0;r<o;++r,n+=u.packedLength)u.pack(i[r],t,n);return Z.pack(e._ellipsoid,t,n),n+=Z.packedLength,ge.pack(e._vertexFormat,t,n),n+=ge.packedLength,t[n++]=e._width,t[n++]=e._height,t[n++]=e._extrudedHeight,t[n++]=e._cornerType,t[n++]=e._granularity,t[n++]=e._shadowVolume?1:0,t[n]=e._offsetAttribute??-1,t};var VY=Z.clone(Z.UNIT_SPHERE),jY=new ge,cf={positions:void 0,ellipsoid:VY,vertexFormat:jY,width:void 0,height:void 0,extrudedHeight:void 0,cornerType:void 0,granularity:void 0,shadowVolume:void 0,offsetAttribute:void 0};Af.unpack=function(e,t,n){t=t??0;let i=e[t++],o=new Array(i);for(let g=0;g<i;++g,t+=u.packedLength)o[g]=u.unpack(e,t);let r=Z.unpack(e,t,VY);t+=Z.packedLength;let a=ge.unpack(e,t,jY);t+=ge.packedLength;let s=e[t++],A=e[t++],l=e[t++],f=e[t++],h=e[t++],m=e[t++]===1,p=e[t];return c(n)?(n._positions=o,n._ellipsoid=Z.clone(r,n._ellipsoid),n._vertexFormat=ge.clone(a,n._vertexFormat),n._width=s,n._height=A,n._extrudedHeight=l,n._cornerType=f,n._granularity=h,n._shadowVolume=m,n._offsetAttribute=p===-1?void 0:p,n):(cf.positions=o,cf.width=s,cf.height=A,cf.extrudedHeight=l,cf.cornerType=f,cf.granularity=h,cf.shadowVolume=m,cf.offsetAttribute=p===-1?void 0:p,new Af(cf))};Af.computeRectangle=function(e,t){e=e??k.EMPTY_OBJECT;let n=e.positions,i=e.width,o=e.ellipsoid??Z.default,r=e.cornerType??Hn.ROUNDED;return HY(n,o,i,r,t)};Af.createGeometry=function(e){let t=e._positions,n=e._width,i=e._ellipsoid;t=GY(t,i);let o=Bi(t,u.equalsEpsilon);if(o.length<2||n<=0)return;let r=e._height,a=e._extrudedHeight,s=!w.equalsEpsilon(r,a,0,w.EPSILON2),A=e._vertexFormat,l={ellipsoid:i,positions:o,width:n,cornerType:e._cornerType,granularity:e._granularity,saveAttributes:!0},f;if(s)l.height=r,l.extrudedHeight=a,l.shadowVolume=e._shadowVolume,l.offsetAttribute=e._offsetAttribute,f=NSe(l,A);else{let p=Jn.computePositions(l);if(f=zY(p,A,i),f.attributes.position.values=Tn.scaleToGeodeticHeight(f.attributes.position.values,r,i),c(e._offsetAttribute)){let g=e._offsetAttribute===xt.NONE?0:1,C=f.attributes.position.values.length,_=new Uint8Array(C/3).fill(g);f.attributes.applyOffset=new ue({componentDatatype:N.UNSIGNED_BYTE,componentsPerAttribute:1,values:_})}}let h=f.attributes,m=ee.fromVertices(h.position.values,void 0,3);return A.position||(f.attributes.position.values=void 0),new ze({attributes:h,indices:f.indices,primitiveType:Ce.TRIANGLES,boundingSphere:m,offsetAttribute:e._offsetAttribute})};Af.createShadowVolume=function(e,t,n){let i=e._granularity,o=e._ellipsoid,r=t(i,o),a=n(i,o);return new Af({positions:e._positions,width:e._width,cornerType:e._cornerType,ellipsoid:o,granularity:i,extrudedHeight:r,height:a,vertexFormat:ge.POSITION_ONLY,shadowVolume:!0})};Object.defineProperties(Af.prototype,{rectangle:{get:function(){return c(this._rectangle)||(this._rectangle=HY(this._positions,this._ellipsoid,this._width,this._cornerType)),this._rectangle}},textureCoordinateRotationPoints:{get:function(){return[0,0,0,1,1,0]}}});var $0=Af;var YY=new u,qY=new u,FSe=new u;function kSe(e,t){for(let n=0;n<e.length;n++)e[n]=t.scaleToGeodeticSurface(e[n],e[n]);return e}function WY(e,t){let n=[],i=e.positions,o=e.corners,r=e.endPositions,a=new Mt,s,A=0,l=0,f,h=0,m;for(f=0;f<i.length;f+=2)m=i[f].length-3,A+=m,h+=m/3*4,l+=i[f+1].length-3;for(A+=3,l+=3,f=0;f<o.length;f++){s=o[f];let L=o[f].leftPositions;c(L)?(m=L.length,A+=m,h+=m/3*2):(m=o[f].rightPositions.length,l+=m,h+=m/3*2)}let p=c(r),g;p&&(g=r[0].length-3,A+=g,l+=g,g/=3,h+=g*4);let C=A+l,_=new Float64Array(C),E=0,I=C-1,y,b,x,S,P,D,Q=g/2,v=Be.createTypedArray(C/3,h+4),d=0;if(v[d++]=E/3,v[d++]=(I-2)/3,p){n.push(E/3),D=YY,P=qY;let L=r[0];for(f=0;f<Q;f++)D=u.fromArray(L,(Q-1-f)*3,D),P=u.fromArray(L,(Q+f)*3,P),Jn.addAttribute(_,P,E),Jn.addAttribute(_,D,void 0,I),b=E/3,S=b+1,y=(I-2)/3,x=y-1,v[d++]=y,v[d++]=x,v[d++]=b,v[d++]=S,E+=3,I-=3}let B=0,T=i[B++],R=i[B++];for(_.set(T,E),_.set(R,I-R.length+1),m=R.length-3,n.push(E/3,(I-2)/3),f=0;f<m;f+=3)b=E/3,S=b+1,y=(I-2)/3,x=y-1,v[d++]=y,v[d++]=x,v[d++]=b,v[d++]=S,E+=3,I-=3;for(f=0;f<o.length;f++){let L;s=o[f];let G=s.leftPositions,q=s.rightPositions,z,K=FSe;if(c(G)){for(I-=3,z=x,n.push(S),L=0;L<G.length/3;L++)K=u.fromArray(G,L*3,K),v[d++]=z-L-1,v[d++]=z-L,Jn.addAttribute(_,K,void 0,I),I-=3;n.push(z-Math.floor(G.length/6)),t===Hn.BEVELED&&n.push((I-2)/3+1),E+=3}else{for(E+=3,z=S,n.push(x),L=0;L<q.length/3;L++)K=u.fromArray(q,L*3,K),v[d++]=z+L,v[d++]=z+L+1,Jn.addAttribute(_,K,E),E+=3;n.push(z+Math.floor(q.length/6)),t===Hn.BEVELED&&n.push(E/3-1),I-=3}for(T=i[B++],R=i[B++],T.splice(0,3),R.splice(R.length-3,3),_.set(T,E),_.set(R,I-R.length+1),m=R.length-3,L=0;L<R.length;L+=3)S=E/3,b=S-1,x=(I-2)/3,y=x+1,v[d++]=y,v[d++]=x,v[d++]=b,v[d++]=S,E+=3,I-=3;E-=3,I+=3,n.push(E/3,(I-2)/3)}if(p){E+=3,I-=3,D=YY,P=qY;let L=r[1];for(f=0;f<Q;f++)D=u.fromArray(L,(g-f-1)*3,D),P=u.fromArray(L,f*3,P),Jn.addAttribute(_,D,void 0,I),Jn.addAttribute(_,P,E),S=E/3,b=S-1,x=(I-2)/3,y=x+1,v[d++]=y,v[d++]=x,v[d++]=b,v[d++]=S,E+=3,I-=3;n.push(E/3)}else n.push(E/3,(I-2)/3);return v[d++]=E/3,v[d++]=(I-2)/3,a.position=new ue({componentDatatype:N.DOUBLE,componentsPerAttribute:3,values:_}),{attributes:a,indices:v,wallIndices:n}}function USe(e){let t=e.ellipsoid,n=Jn.computePositions(e),i=WY(n,e.cornerType),o=i.wallIndices,r=e.height,a=e.extrudedHeight,s=i.attributes,A=i.indices,l=s.position.values,f=l.length,h=new Float64Array(f);h.set(l);let m=new Float64Array(f*2);if(l=Tn.scaleToGeodeticHeight(l,r,t),h=Tn.scaleToGeodeticHeight(h,a,t),m.set(l),m.set(h,f),s.position.values=m,f/=3,c(e.offsetAttribute)){let y=new Uint8Array(f*2);if(e.offsetAttribute===xt.TOP)y=y.fill(1,0,f);else{let b=e.offsetAttribute===xt.NONE?0:1;y=y.fill(b)}s.applyOffset=new ue({componentDatatype:N.UNSIGNED_BYTE,componentsPerAttribute:1,values:y})}let p,g=A.length,C=Be.createTypedArray(m.length/3,(g+o.length)*2);C.set(A);let _=g;for(p=0;p<g;p+=2){let y=A[p],b=A[p+1];C[_++]=y+f,C[_++]=b+f}let E,I;for(p=0;p<o.length;p++)E=o[p],I=E+f,C[_++]=E,C[_++]=I;return{attributes:s,indices:C}}function AE(e){e=e??k.EMPTY_OBJECT;let t=e.positions,n=e.width,i=e.height??0,o=e.extrudedHeight??i;this._positions=t,this._ellipsoid=Z.clone(e.ellipsoid??Z.default),this._width=n,this._height=Math.max(i,o),this._extrudedHeight=Math.min(i,o),this._cornerType=e.cornerType??Hn.ROUNDED,this._granularity=e.granularity??w.RADIANS_PER_DEGREE,this._offsetAttribute=e.offsetAttribute,this._workerName="createCorridorOutlineGeometry",this.packedLength=1+t.length*u.packedLength+Z.packedLength+6}AE.pack=function(e,t,n){n=n??0;let i=e._positions,o=i.length;t[n++]=o;for(let r=0;r<o;++r,n+=u.packedLength)u.pack(i[r],t,n);return Z.pack(e._ellipsoid,t,n),n+=Z.packedLength,t[n++]=e._width,t[n++]=e._height,t[n++]=e._extrudedHeight,t[n++]=e._cornerType,t[n++]=e._granularity,t[n]=e._offsetAttribute??-1,t};var JY=Z.clone(Z.UNIT_SPHERE),ju={positions:void 0,ellipsoid:JY,width:void 0,height:void 0,extrudedHeight:void 0,cornerType:void 0,granularity:void 0,offsetAttribute:void 0};AE.unpack=function(e,t,n){t=t??0;let i=e[t++],o=new Array(i);for(let m=0;m<i;++m,t+=u.packedLength)o[m]=u.unpack(e,t);let r=Z.unpack(e,t,JY);t+=Z.packedLength;let a=e[t++],s=e[t++],A=e[t++],l=e[t++],f=e[t++],h=e[t];return c(n)?(n._positions=o,n._ellipsoid=Z.clone(r,n._ellipsoid),n._width=a,n._height=s,n._extrudedHeight=A,n._cornerType=l,n._granularity=f,n._offsetAttribute=h===-1?void 0:h,n):(ju.positions=o,ju.width=a,ju.height=s,ju.extrudedHeight=A,ju.cornerType=l,ju.granularity=f,ju.offsetAttribute=h===-1?void 0:h,new AE(ju))};AE.createGeometry=function(e){let t=e._positions,n=e._width,i=e._ellipsoid;t=kSe(t,i);let o=Bi(t,u.equalsEpsilon);if(o.length<2||n<=0)return;let r=e._height,a=e._extrudedHeight,s=!w.equalsEpsilon(r,a,0,w.EPSILON2),A={ellipsoid:i,positions:o,width:n,cornerType:e._cornerType,granularity:e._granularity,saveAttributes:!1},l;if(s)A.height=r,A.extrudedHeight=a,A.offsetAttribute=e._offsetAttribute,l=USe(A);else{let m=Jn.computePositions(A);if(l=WY(m,A.cornerType),l.attributes.position.values=Tn.scaleToGeodeticHeight(l.attributes.position.values,r,i),c(e._offsetAttribute)){let p=l.attributes.position.values.length,g=e._offsetAttribute===xt.NONE?0:1,C=new Uint8Array(p/3).fill(g);l.attributes.applyOffset=new ue({componentDatatype:N.UNSIGNED_BYTE,componentsPerAttribute:1,values:C})}}let f=l.attributes,h=ee.fromVertices(f.position.values,void 0,3);return new ze({attributes:f,indices:l.indices,primitiveType:Ce.LINES,boundingSphere:h,offsetAttribute:e._offsetAttribute})};var KY=AE;var GSe=new li(0);function ua(e){ln.call(this,e),this._zIndex=0,this._terrainOffsetProperty=void 0}c(Object.create)&&(ua.prototype=Object.create(ln.prototype),ua.prototype.constructor=ua);Object.defineProperties(ua.prototype,{zIndex:{get:function(){return this._zIndex}},terrainOffsetProperty:{get:function(){return this._terrainOffsetProperty}}});ua.prototype._isOnTerrain=function(e,t){return this._fillEnabled&&!c(t.height)&&!c(t.extrudedHeight)&&Ls.isSupported(this._scene)};ua.prototype._getIsClosed=function(e){let t=e.height,n=e.extrudedHeight;return t===0||c(n)&&n!==t};ua.prototype._computeCenter=Ee.throwInstantiationError;ua.prototype._onEntityPropertyChanged=function(e,t,n,i){if(ln.prototype._onEntityPropertyChanged.call(this,e,t,n,i),this._observedPropertyNames.indexOf(t)===-1)return;let o=this._entity[this._geometryPropertyName];if(!c(o))return;c(o.zIndex)&&(c(o.height)||c(o.extrudedHeight))&&jt(jt.geometryZIndex),this._zIndex=o.zIndex??GSe,c(this._terrainOffsetProperty)&&(this._terrainOffsetProperty.destroy(),this._terrainOffsetProperty=void 0);let r=o.heightReference,a=o.extrudedHeightReference;if(c(r)||c(a)){let s=new _m(this._computeCenter.bind(this),!this._dynamic);this._terrainOffsetProperty=new Gy(this._scene,s,r,a)}};ua.prototype.destroy=function(){c(this._terrainOffsetProperty)&&(this._terrainOffsetProperty.destroy(),this._terrainOffsetProperty=void 0),ln.prototype.destroy.call(this)};ua.getGeometryHeight=function(e,t){if(!c(e)){t!==Ge.NONE&&jt(jt.geometryHeightReference);return}return Ps(t)?0:e};ua.getGeometryExtrudedHeight=function(e,t){if(!c(e)){t!==Ge.NONE&&jt(jt.geometryExtrudedHeightReference);return}return Ps(t)?ua.CLAMP_TO_GROUND:e};ua.CLAMP_TO_GROUND="clamp";ua.computeGeometryOffsetAttribute=function(e,t,n,i){(!c(e)||!c(t))&&(t=Ge.NONE),(!c(n)||!c(i))&&(i=Ge.NONE);let o=0;if(t!==Ge.NONE&&o++,i===Ge.RELATIVE_TO_GROUND&&o++,o===2)return xt.ALL;if(o===1)return xt.TOP};var an=ua;var XY=new F,ZY=u.ZERO,$Y=new u,eq=new ce;function zSe(e){this.id=e,this.vertexFormat=void 0,this.positions=void 0,this.width=void 0,this.cornerType=void 0,this.height=void 0,this.extrudedHeight=void 0,this.granularity=void 0,this.offsetAttribute=void 0}function Vc(e,t){an.call(this,{entity:e,scene:t,geometryOptions:new zSe(e),geometryPropertyName:"corridor",observedPropertyNames:["availability","corridor"]}),this._onEntityPropertyChanged(e,"corridor",e.corridor,void 0)}c(Object.create)&&(Vc.prototype=Object.create(an.prototype),Vc.prototype.constructor=Vc);Vc.prototype.createFillGeometryInstance=function(e){let t=this._entity,n=t.isAvailable(e),i={show:new kt(n&&t.isShowing&&this._showProperty.getValue(e)&&this._fillProperty.getValue(e)),distanceDisplayCondition:Kt.fromDistanceDisplayCondition(this._distanceDisplayConditionProperty.getValue(e)),offset:void 0,color:void 0};if(this._materialProperty instanceof lt){let o;c(this._materialProperty.color)&&(this._materialProperty.color.isConstant||n)&&(o=this._materialProperty.color.getValue(e,XY)),c(o)||(o=F.WHITE),i.color=Tt.fromColor(o)}return c(this._options.offsetAttribute)&&(i.offset=ii.fromCartesian3(M.getValueOrDefault(this._terrainOffsetProperty,e,ZY,$Y))),new gt({id:t,geometry:new $0(this._options),attributes:i})};Vc.prototype.createOutlineGeometryInstance=function(e){let t=this._entity,n=t.isAvailable(e),i=M.getValueOrDefault(this._outlineColorProperty,e,F.BLACK,XY),o={show:new kt(n&&t.isShowing&&this._showProperty.getValue(e)&&this._showOutlineProperty.getValue(e)),color:Tt.fromColor(i),distanceDisplayCondition:Kt.fromDistanceDisplayCondition(this._distanceDisplayConditionProperty.getValue(e)),offset:void 0};return c(this._options.offsetAttribute)&&(o.offset=ii.fromCartesian3(M.getValueOrDefault(this._terrainOffsetProperty,e,ZY,$Y))),new gt({id:t,geometry:new KY(this._options),attributes:o})};Vc.prototype._computeCenter=function(e,t){let n=M.getValueOrUndefined(this._entity.corridor.positions,e);if(!(!c(n)||n.length===0))return u.clone(n[Math.floor(n.length/2)],t)};Vc.prototype._isHidden=function(e,t){return!c(t.positions)||!c(t.width)||ln.prototype._isHidden.call(this,e,t)};Vc.prototype._isDynamic=function(e,t){return!t.positions.isConstant||!M.isConstant(t.height)||!M.isConstant(t.extrudedHeight)||!M.isConstant(t.granularity)||!M.isConstant(t.width)||!M.isConstant(t.outlineWidth)||!M.isConstant(t.cornerType)||!M.isConstant(t.zIndex)||this._onTerrain&&!M.isConstant(this._materialProperty)&&!(this._materialProperty instanceof lt)};Vc.prototype._setStaticOptions=function(e,t){let n=M.getValueOrUndefined(t.height,Re.MINIMUM_VALUE),i=M.getValueOrDefault(t.heightReference,Re.MINIMUM_VALUE,Ge.NONE),o=M.getValueOrUndefined(t.extrudedHeight,Re.MINIMUM_VALUE),r=M.getValueOrDefault(t.extrudedHeightReference,Re.MINIMUM_VALUE,Ge.NONE);c(o)&&!c(n)&&(n=0);let a=this._options;a.vertexFormat=this._materialProperty instanceof lt?Vt.VERTEX_FORMAT:Zn.MaterialSupport.TEXTURED.vertexFormat,a.positions=t.positions.getValue(Re.MINIMUM_VALUE,a.positions),a.width=t.width.getValue(Re.MINIMUM_VALUE),a.granularity=M.getValueOrUndefined(t.granularity,Re.MINIMUM_VALUE),a.cornerType=M.getValueOrUndefined(t.cornerType,Re.MINIMUM_VALUE),a.offsetAttribute=an.computeGeometryOffsetAttribute(n,i,o,r),a.height=an.getGeometryHeight(n,i),o=an.getGeometryExtrudedHeight(o,r),o===an.CLAMP_TO_GROUND&&(o=On.getMinimumMaximumHeights($0.computeRectangle(a,eq)).minimumTerrainHeight),a.extrudedHeight=o};Vc.DynamicGeometryUpdater=Np;function Np(e,t,n){An.call(this,e,t,n)}c(Object.create)&&(Np.prototype=Object.create(An.prototype),Np.prototype.constructor=Np);Np.prototype._isHidden=function(e,t,n){let i=this._options;return!c(i.positions)||!c(i.width)||An.prototype._isHidden.call(this,e,t,n)};Np.prototype._setOptions=function(e,t,n){let i=this._options,o=M.getValueOrUndefined(t.height,n),r=M.getValueOrDefault(t.heightReference,n,Ge.NONE),a=M.getValueOrUndefined(t.extrudedHeight,n),s=M.getValueOrDefault(t.extrudedHeightReference,n,Ge.NONE);c(a)&&!c(o)&&(o=0),i.positions=M.getValueOrUndefined(t.positions,n),i.width=M.getValueOrUndefined(t.width,n),i.granularity=M.getValueOrUndefined(t.granularity,n),i.cornerType=M.getValueOrUndefined(t.cornerType,n),i.offsetAttribute=an.computeGeometryOffsetAttribute(o,r,a,s),i.height=an.getGeometryHeight(o,r),a=an.getGeometryExtrudedHeight(a,s),a===an.CLAMP_TO_GROUND&&(a=On.getMinimumMaximumHeights($0.computeRectangle(i,eq)).minimumTerrainHeight),i.extrudedHeight=a};var tq=Vc;function eB(){Ee.throwInstantiationError()}Object.defineProperties(eB.prototype,{name:{get:Ee.throwInstantiationError},clock:{get:Ee.throwInstantiationError},entities:{get:Ee.throwInstantiationError},isLoading:{get:Ee.throwInstantiationError},changedEvent:{get:Ee.throwInstantiationError},errorEvent:{get:Ee.throwInstantiationError},loadingEvent:{get:Ee.throwInstantiationError},show:{get:Ee.throwInstantiationError},clustering:{get:Ee.throwInstantiationError}});eB.prototype.update=function(e){Ee.throwInstantiationError()};eB.setLoading=function(e,t){e._isLoading!==t&&(t?e._entityCollection.suspendEvents():e._entityCollection.resumeEvents(),e._isLoading=t,e._loading.raiseEvent(e,t))};var _h=eB;function VA(e,t){this._ellipsoid=e,this._cameraPosition=new u,this._cameraPositionInScaledSpace=new u,this._distanceToLimbInScaledSpaceSquared=0,c(t)&&(this.cameraPosition=t)}Object.defineProperties(VA.prototype,{ellipsoid:{get:function(){return this._ellipsoid}},cameraPosition:{get:function(){return this._cameraPosition},set:function(e){let n=this._ellipsoid.transformPositionToScaledSpace(e,this._cameraPositionInScaledSpace),i=u.magnitudeSquared(n)-1;u.clone(e,this._cameraPosition),this._cameraPositionInScaledSpace=n,this._distanceToLimbInScaledSpaceSquared=i}}});var nq=new u;VA.prototype.isPointVisible=function(e){let n=this._ellipsoid.transformPositionToScaledSpace(e,nq);return rR(n,this._cameraPositionInScaledSpace,this._distanceToLimbInScaledSpaceSquared)};VA.prototype.isScaledSpacePointVisible=function(e){return rR(e,this._cameraPositionInScaledSpace,this._distanceToLimbInScaledSpaceSquared)};var HSe=new u;VA.prototype.isScaledSpacePointVisiblePossiblyUnderEllipsoid=function(e,t){let n=this._ellipsoid,i,o;return c(t)&&t<0&&n.minimumRadius>-t?(o=HSe,o.x=this._cameraPosition.x/(n.radii.x+t),o.y=this._cameraPosition.y/(n.radii.y+t),o.z=this._cameraPosition.z/(n.radii.z+t),i=o.x*o.x+o.y*o.y+o.z*o.z-1):(o=this._cameraPositionInScaledSpace,i=this._distanceToLimbInScaledSpaceSquared),rR(e,o,i)};VA.prototype.computeHorizonCullingPoint=function(e,t,n){return rq(this._ellipsoid,e,t,n)};var iq=Z.clone(Z.UNIT_SPHERE);VA.prototype.computeHorizonCullingPointPossiblyUnderEllipsoid=function(e,t,n,i){let o=oq(this._ellipsoid,n,iq);return rq(o,e,t,i)};VA.prototype.computeHorizonCullingPointFromVertices=function(e,t,n,i,o){return aq(this._ellipsoid,e,t,n,i,o)};VA.prototype.computeHorizonCullingPointFromVerticesPossiblyUnderEllipsoid=function(e,t,n,i,o,r){let a=oq(this._ellipsoid,o,iq);return aq(a,e,t,n,i,r)};var VSe=[];VA.prototype.computeHorizonCullingPointFromRectangle=function(e,t,n){let i=ce.subsample(e,t,0,VSe),o=ee.fromPoints(i);if(!(u.magnitude(o.center)<.1*t.minimumRadius))return this.computeHorizonCullingPoint(o.center,i,n)};var jSe=new u;function oq(e,t,n){if(c(t)&&t<0&&e.minimumRadius>-t){let i=u.fromElements(e.radii.x+t,e.radii.y+t,e.radii.z+t,jSe);e=Z.fromCartesian3(i,n)}return e}function rq(e,t,n,i){c(i)||(i=new u);let o=Aq(e,t),r=0;for(let a=0,s=n.length;a<s;++a){let A=n[a],l=sq(e,A,o);if(l<0)return;r=Math.max(r,l)}return cq(o,r,i)}var tB=new u;function aq(e,t,n,i,o,r){c(r)||(r=new u),i=i??3,o=o??u.ZERO;let a=Aq(e,t),s=0;for(let A=0,l=n.length;A<l;A+=i){tB.x=n[A]+o.x,tB.y=n[A+1]+o.y,tB.z=n[A+2]+o.z;let f=sq(e,tB,a);if(f<0)return;s=Math.max(s,f)}return cq(a,s,r)}function rR(e,t,n){let i=t,o=n,r=u.subtract(e,i,nq),a=-u.dot(r,i);return!(o<0?a>0:a>o&&a*a/u.magnitudeSquared(r)>o)}var YSe=new u,qSe=new u;function sq(e,t,n){let i=e.transformPositionToScaledSpace(t,YSe),o=u.magnitudeSquared(i),r=Math.sqrt(o),a=u.divideByScalar(i,r,qSe);o=Math.max(1,o),r=Math.max(1,r);let s=u.dot(a,n),A=u.magnitude(u.cross(a,n,a)),l=1/r,f=Math.sqrt(o-1)*l;return 1/(s*l-A*f)}function cq(e,t,n){if(!(t<=0||t===1/0||t!==t))return u.multiplyByScalar(e,t,n)}var oR=new u;function Aq(e,t){return u.equals(t,u.ZERO)?t:(e.transformPositionToScaledSpace(t,oR),u.normalize(oR,oR))}var lq=VA;function Yi(e,t){e=e??k.EMPTY_OBJECT;let n=e.translucencyByDistance,i=e.scaleByDistance,o=e.distanceDisplayCondition;c(n)&&(n=Rt.clone(n)),c(i)&&(i=Rt.clone(i)),c(o)&&(o=rt.clone(o)),this._show=e.show??!0,this._position=u.clone(e.position??u.ZERO),this._actualPosition=u.clone(this._position),this._color=F.clone(e.color??F.WHITE),this._outlineColor=F.clone(e.outlineColor??F.TRANSPARENT),this._outlineWidth=e.outlineWidth??0,this._pixelSize=e.pixelSize??10,this._scaleByDistance=i,this._translucencyByDistance=n,this._distanceDisplayCondition=o,this._disableDepthTestDistance=e.disableDepthTestDistance??0,this._id=e.id,this._collection=e.collection??t,this._clusterShow=!0,this._pickId=void 0,this._pointPrimitiveCollection=t,this._dirty=!1,this._index=-1,this._splitDirection=e.splitDirection??Zo.NONE}var fq=Yi.SHOW_INDEX=0,hq=Yi.POSITION_INDEX=1,WSe=Yi.COLOR_INDEX=2,JSe=Yi.OUTLINE_COLOR_INDEX=3,KSe=Yi.OUTLINE_WIDTH_INDEX=4,XSe=Yi.PIXEL_SIZE_INDEX=5,ZSe=Yi.SCALE_BY_DISTANCE_INDEX=6,$Se=Yi.TRANSLUCENCY_BY_DISTANCE_INDEX=7,ewe=Yi.DISTANCE_DISPLAY_CONDITION_INDEX=8,twe=Yi.DISABLE_DEPTH_DISTANCE_INDEX=9,nwe=Yi.SPLIT_DIRECTION_INDEX=10;Yi.NUMBER_OF_PROPERTIES=11;function ds(e,t){let n=e._pointPrimitiveCollection;c(n)&&(n._updatePointPrimitive(e,t),e._dirty=!0)}Object.defineProperties(Yi.prototype,{show:{get:function(){return this._show},set:function(e){this._show!==e&&(this._show=e,ds(this,fq))}},position:{get:function(){return this._position},set:function(e){let t=this._position;u.equals(t,e)||(u.clone(e,t),u.clone(e,this._actualPosition),ds(this,hq))}},scaleByDistance:{get:function(){return this._scaleByDistance},set:function(e){let t=this._scaleByDistance;Rt.equals(t,e)||(this._scaleByDistance=Rt.clone(e,t),ds(this,ZSe))}},translucencyByDistance:{get:function(){return this._translucencyByDistance},set:function(e){let t=this._translucencyByDistance;Rt.equals(t,e)||(this._translucencyByDistance=Rt.clone(e,t),ds(this,$Se))}},pixelSize:{get:function(){return this._pixelSize},set:function(e){this._pixelSize!==e&&(this._pixelSize=e,ds(this,XSe))}},color:{get:function(){return this._color},set:function(e){let t=this._color;F.equals(t,e)||(F.clone(e,t),ds(this,WSe))}},outlineColor:{get:function(){return this._outlineColor},set:function(e){let t=this._outlineColor;F.equals(t,e)||(F.clone(e,t),ds(this,JSe))}},outlineWidth:{get:function(){return this._outlineWidth},set:function(e){this._outlineWidth!==e&&(this._outlineWidth=e,ds(this,KSe))}},distanceDisplayCondition:{get:function(){return this._distanceDisplayCondition},set:function(e){rt.equals(this._distanceDisplayCondition,e)||(this._distanceDisplayCondition=rt.clone(e,this._distanceDisplayCondition),ds(this,ewe))}},disableDepthTestDistance:{get:function(){return this._disableDepthTestDistance},set:function(e){this._disableDepthTestDistance!==e&&(this._disableDepthTestDistance=e,ds(this,twe))}},id:{get:function(){return this._id},set:function(e){this._id=e,c(this._pickId)&&(this._pickId.object.id=e)}},pickId:{get:function(){return this._pickId}},clusterShow:{get:function(){return this._clusterShow},set:function(e){this._clusterShow!==e&&(this._clusterShow=e,ds(this,fq))}},splitDirection:{get:function(){return this._splitDirection},set:function(e){this._splitDirection!==e&&(this._splitDirection=e,ds(this,nwe))}}});Yi.prototype.getPickId=function(e){return c(this._pickId)||(this._pickId=e.createPickId({primitive:this,collection:this._collection,id:this._id})),this._pickId};Yi.prototype._getActualPosition=function(){return this._actualPosition};Yi.prototype._setActualPosition=function(e){u.clone(e,this._actualPosition),ds(this,hq)};var uq=new se;Yi._computeActualPosition=function(e,t,n){return t.mode===Te.SCENE3D?e:(O.multiplyByPoint(n,e,uq),dr.computeActualEllipsoidPosition(t,uq))};var dq=new se;Yi._computeScreenSpacePosition=function(e,t,n,i){let o=O.multiplyByVector(e,se.fromElements(t.x,t.y,t.z,1,dq),dq);return dr.worldToWindowCoordinates(n,o,i)};Yi.prototype.computeScreenSpacePosition=function(e,t){let n=this._pointPrimitiveCollection;c(t)||(t=new U);let i=n.modelMatrix,o=Yi._computeScreenSpacePosition(i,this._actualPosition,e,t);if(c(o))return o.y=e.canvas.clientHeight-o.y,o};Yi.getScreenSpaceBoundingBox=function(e,t,n){let i=e.pixelSize,o=i*.5,r=t.x-o,a=t.y-o,s=i,A=i;return c(n)||(n=new Jt),n.x=r,n.y=a,n.width=s,n.height=A,n};Yi.prototype.equals=function(e){return this===e||c(e)&&this._id===e._id&&u.equals(this._position,e._position)&&F.equals(this._color,e._color)&&this._pixelSize===e._pixelSize&&this._outlineWidth===e._outlineWidth&&this._show===e._show&&F.equals(this._outlineColor,e._outlineColor)&&Rt.equals(this._scaleByDistance,e._scaleByDistance)&&Rt.equals(this._translucencyByDistance,e._translucencyByDistance)&&rt.equals(this._distanceDisplayCondition,e._distanceDisplayCondition)&&this._disableDepthTestDistance===e._disableDepthTestDistance&&this._splitDirection===e._splitDirection};Yi.prototype._destroy=function(){this._pickId=this._pickId&&this._pickId.destroy(),this._pointPrimitiveCollection=void 0};var gr=Yi;var lE=`in vec4 v_color;
in vec4 v_outlineColor;
in float v_innerPercent;
in float v_pixelDistance;
in vec4 v_pickColor;
in float v_splitDirection;

void main()
{
    if (v_splitDirection < 0.0 && gl_FragCoord.x > czm_splitPosition) discard;
    if (v_splitDirection > 0.0 && gl_FragCoord.x < czm_splitPosition) discard;

    // The distance in UV space from this fragment to the center of the point, at most 0.5.
    float distanceToCenter = length(gl_PointCoord - vec2(0.5));
    // The max distance stops one pixel shy of the edge to leave space for anti-aliasing.
    float maxDistance = max(0.0, 0.5 - v_pixelDistance);
    float wholeAlpha = 1.0 - smoothstep(maxDistance, 0.5, distanceToCenter);
    float innerAlpha = 1.0 - smoothstep(maxDistance * v_innerPercent, 0.5 * v_innerPercent, distanceToCenter);

    vec4 color = mix(v_outlineColor, v_color, innerAlpha);
    color.a *= wholeAlpha;

// Fully transparent parts of the billboard are not pickable.
#if !defined(OPAQUE) && !defined(TRANSLUCENT)
    if (color.a < 0.005)   // matches 0/255 and 1/255
    {
        discard;
    }
#else
// The billboard is rendered twice. The opaque pass discards translucent fragments
// and the translucent pass discards opaque fragments.
#ifdef OPAQUE
    if (color.a < 0.995)   // matches < 254/255
    {
        discard;
    }
#else
    if (color.a >= 0.995)  // matches 254/255 and 255/255
    {
        discard;
    }
#endif
#endif

    out_FragColor = czm_gammaCorrect(color);
    czm_writeLogDepth();
}
`;var mq=`uniform float u_maxTotalPointSize;

in vec4 positionHighAndSize;
in vec4 positionLowAndOutline;
in vec4 compressedAttribute0;                                        // color, outlineColor, pick color
in vec4 compressedAttribute1;                                        // show, translucency by distance, some free space
in vec4 scaleByDistance;                                             // near, nearScale, far, farScale
in vec4 distanceDisplayConditionAndDisableDepthAndSplitDirection;    // near, far, disableDepthTestDistance, splitDirection

out vec4 v_color;
out vec4 v_outlineColor;
out float v_innerPercent;
out float v_pixelDistance;
out vec4 v_pickColor;
out float v_splitDirection;

const float SHIFT_LEFT8 = 256.0;
const float SHIFT_RIGHT8 = 1.0 / 256.0;

void main()
{
    // Modifying this shader may also require modifications to PointPrimitive._computeScreenSpacePosition

    // unpack attributes
    vec3 positionHigh = positionHighAndSize.xyz;
    vec3 positionLow = positionLowAndOutline.xyz;
    float outlineWidthBothSides = 2.0 * positionLowAndOutline.w;
    float totalSize = positionHighAndSize.w + outlineWidthBothSides;
    float outlinePercent = outlineWidthBothSides / totalSize;
    // Scale in response to browser-zoom.
    totalSize *= czm_pixelRatio;

    float temp = compressedAttribute1.x * SHIFT_RIGHT8;
    float show = floor(temp);

#ifdef EYE_DISTANCE_TRANSLUCENCY
    vec4 translucencyByDistance;
    translucencyByDistance.x = compressedAttribute1.z;
    translucencyByDistance.z = compressedAttribute1.w;

    translucencyByDistance.y = ((temp - floor(temp)) * SHIFT_LEFT8) / 255.0;

    temp = compressedAttribute1.y * SHIFT_RIGHT8;
    translucencyByDistance.w = ((temp - floor(temp)) * SHIFT_LEFT8) / 255.0;
#endif

    ///////////////////////////////////////////////////////////////////////////

    vec4 color;
    vec4 outlineColor;
    vec4 pickColor;

    // compressedAttribute0.z => pickColor.rgb

    temp = compressedAttribute0.z * SHIFT_RIGHT8;
    pickColor.b = (temp - floor(temp)) * SHIFT_LEFT8;
    temp = floor(temp) * SHIFT_RIGHT8;
    pickColor.g = (temp - floor(temp)) * SHIFT_LEFT8;
    pickColor.r = floor(temp);

    // compressedAttribute0.x => color.rgb

    temp = compressedAttribute0.x * SHIFT_RIGHT8;
    color.b = (temp - floor(temp)) * SHIFT_LEFT8;
    temp = floor(temp) * SHIFT_RIGHT8;
    color.g = (temp - floor(temp)) * SHIFT_LEFT8;
    color.r = floor(temp);

    // compressedAttribute0.y => outlineColor.rgb

    temp = compressedAttribute0.y * SHIFT_RIGHT8;
    outlineColor.b = (temp - floor(temp)) * SHIFT_LEFT8;
    temp = floor(temp) * SHIFT_RIGHT8;
    outlineColor.g = (temp - floor(temp)) * SHIFT_LEFT8;
    outlineColor.r = floor(temp);

    // compressedAttribute0.w => color.a, outlineColor.a, pickColor.a

    temp = compressedAttribute0.w * SHIFT_RIGHT8;
    pickColor.a = (temp - floor(temp)) * SHIFT_LEFT8;
    pickColor = pickColor / 255.0;

    temp = floor(temp) * SHIFT_RIGHT8;
    outlineColor.a = (temp - floor(temp)) * SHIFT_LEFT8;
    outlineColor /= 255.0;
    color.a = floor(temp);
    color /= 255.0;

    ///////////////////////////////////////////////////////////////////////////

    vec4 p = czm_translateRelativeToEye(positionHigh, positionLow);
    vec4 positionEC = czm_modelViewRelativeToEye * p;

    ///////////////////////////////////////////////////////////////////////////

#if defined(EYE_DISTANCE_SCALING) || defined(EYE_DISTANCE_TRANSLUCENCY) || defined(DISTANCE_DISPLAY_CONDITION) || defined(DISABLE_DEPTH_DISTANCE)
    float lengthSq;
    if (czm_sceneMode == czm_sceneMode2D)
    {
        // 2D camera distance is a special case
        // treat all billboards as flattened to the z=0.0 plane
        lengthSq = czm_eyeHeight2D.y;
    }
    else
    {
        lengthSq = dot(positionEC.xyz, positionEC.xyz);
    }
#endif

#ifdef EYE_DISTANCE_SCALING
    totalSize *= czm_nearFarScalar(scaleByDistance, lengthSq);
#endif
    if (totalSize > 0.0) {
        // Add padding for anti-aliasing on both sides.
        totalSize += 3.0;
    }

    // Clamp to max point size.
    totalSize = min(totalSize, u_maxTotalPointSize);
    // If size is too small, push vertex behind near plane for clipping.
    // Note that context.minimumAliasedPointSize "will be at most 1.0".
    if (totalSize < 1.0)
    {
        positionEC.xyz = vec3(0.0);
        totalSize = 1.0;
    }

    float translucency = 1.0;
#ifdef EYE_DISTANCE_TRANSLUCENCY
    translucency = czm_nearFarScalar(translucencyByDistance, lengthSq);
    // push vertex behind near plane for clipping
    if (translucency < 0.004)
    {
        positionEC.xyz = vec3(0.0);
    }
#endif

#ifdef DISTANCE_DISPLAY_CONDITION
    float nearSq = distanceDisplayConditionAndDisableDepthAndSplitDirection.x;
    float farSq = distanceDisplayConditionAndDisableDepthAndSplitDirection.y;
    if (lengthSq < nearSq || lengthSq > farSq) {
        // push vertex behind camera to force it to be clipped
        positionEC.xyz = vec3(0.0, 0.0, 1.0);
    }
#endif

    gl_Position = czm_projection * positionEC;
    czm_vertexLogDepth();

#ifdef DISABLE_DEPTH_DISTANCE
    float disableDepthTestDistance = distanceDisplayConditionAndDisableDepthAndSplitDirection.z;
    if (disableDepthTestDistance == 0.0 && czm_minimumDisableDepthTestDistance != 0.0)
    {
        disableDepthTestDistance = czm_minimumDisableDepthTestDistance;
    }

    if (disableDepthTestDistance != 0.0)
    {
        // Don't try to "multiply both sides" by w.  Greater/less-than comparisons won't work for negative values of w.
        float zclip = gl_Position.z / gl_Position.w;
        bool clipped = (zclip < -1.0 || zclip > 1.0);
        if (!clipped && (disableDepthTestDistance < 0.0 || (lengthSq > 0.0 && lengthSq < disableDepthTestDistance)))
        {
            // Position z on the near plane.
            gl_Position.z = -gl_Position.w;
#ifdef LOG_DEPTH
            czm_vertexLogDepth(vec4(czm_currentFrustum.x));
#endif
        }
    }
#endif

    v_color = color;
    v_color.a *= translucency * show;
    v_outlineColor = outlineColor;
    v_outlineColor.a *= translucency * show;

    v_innerPercent = 1.0 - outlinePercent;
    v_pixelDistance = 2.0 / totalSize;
    gl_PointSize = totalSize * show;
    gl_Position *= show;

    v_pickColor = pickColor;
    v_splitDirection = distanceDisplayConditionAndDisableDepthAndSplitDirection.w;
}
`;var iwe=gr.SHOW_INDEX,cR=gr.POSITION_INDEX,pq=gr.COLOR_INDEX,owe=gr.OUTLINE_COLOR_INDEX,rwe=gr.OUTLINE_WIDTH_INDEX,awe=gr.PIXEL_SIZE_INDEX,gq=gr.SCALE_BY_DISTANCE_INDEX,Cq=gr.TRANSLUCENCY_BY_DISTANCE_INDEX,_q=gr.DISTANCE_DISPLAY_CONDITION_INDEX,swe=gr.DISABLE_DEPTH_DISTANCE_INDEX,cwe=gr.SPLIT_DIRECTION_INDEX,AR=gr.NUMBER_OF_PROPERTIES,Ur={positionHighAndSize:0,positionLowAndOutline:1,compressedAttribute0:2,compressedAttribute1:3,scaleByDistance:4,distanceDisplayConditionAndDisableDepthAndSplitDirection:5};function cc(e){e=e??k.EMPTY_OBJECT,this._sp=void 0,this._spTranslucent=void 0,this._rsOpaque=void 0,this._rsTranslucent=void 0,this._vaf=void 0,this._pointPrimitives=[],this._pointPrimitivesToUpdate=[],this._pointPrimitivesToUpdateIndex=0,this._pointPrimitivesRemoved=!1,this._createVertexArray=!1,this._shaderScaleByDistance=!1,this._compiledShaderScaleByDistance=!1,this._shaderTranslucencyByDistance=!1,this._compiledShaderTranslucencyByDistance=!1,this._shaderDistanceDisplayCondition=!1,this._compiledShaderDistanceDisplayCondition=!1,this._shaderDisableDepthDistance=!1,this._compiledShaderDisableDepthDistance=!1,this._propertiesChanged=new Uint32Array(AR),this._maxPixelSize=1,this._baseVolume=new ee,this._baseVolumeWC=new ee,this._baseVolume2D=new ee,this._boundingVolume=new ee,this._boundingVolumeDirty=!1,this._colorCommands=[],this.show=e.show??!0,this.modelMatrix=O.clone(e.modelMatrix??O.IDENTITY),this._modelMatrix=O.clone(O.IDENTITY),this.debugShowBoundingVolume=e.debugShowBoundingVolume??!1,this.blendOption=e.blendOption??Mi.OPAQUE_AND_TRANSLUCENT,this._blendOption=void 0,this._mode=Te.SCENE3D,this._maxTotalPointSize=1,this._buffersUsage=[Me.STATIC_DRAW,Me.STATIC_DRAW,Me.STATIC_DRAW,Me.STATIC_DRAW,Me.STATIC_DRAW,Me.STATIC_DRAW,Me.STATIC_DRAW,Me.STATIC_DRAW,Me.STATIC_DRAW];let t=this;this._uniforms={u_maxTotalPointSize:function(){return t._maxTotalPointSize}}}Object.defineProperties(cc.prototype,{length:{get:function(){return lR(this),this._pointPrimitives.length}}});function Eq(e){let t=e.length;for(let n=0;n<t;++n)e[n]&&e[n]._destroy()}cc.prototype.add=function(e){let t=new gr(e,this);return t._index=this._pointPrimitives.length,this._pointPrimitives.push(t),this._createVertexArray=!0,t};cc.prototype.remove=function(e){return this.contains(e)?(this._pointPrimitives[e._index]=null,this._pointPrimitivesRemoved=!0,this._createVertexArray=!0,e._destroy(),!0):!1};cc.prototype.removeAll=function(){Eq(this._pointPrimitives),this._pointPrimitives=[],this._pointPrimitivesToUpdate=[],this._pointPrimitivesToUpdateIndex=0,this._pointPrimitivesRemoved=!1,this._createVertexArray=!0};function lR(e){if(e._pointPrimitivesRemoved){e._pointPrimitivesRemoved=!1;let t=[],n=e._pointPrimitives,i=n.length;for(let o=0,r=0;o<i;++o){let a=n[o];a&&(a._index=r++,t.push(a))}e._pointPrimitives=t}}cc.prototype._updatePointPrimitive=function(e,t){e._dirty||(this._pointPrimitivesToUpdate[this._pointPrimitivesToUpdateIndex++]=e),++this._propertiesChanged[t]};cc.prototype.contains=function(e){return c(e)&&e._pointPrimitiveCollection===this};cc.prototype.get=function(e){return lR(this),this._pointPrimitives[e]};cc.prototype.computeNewBuffersUsage=function(){let e=this._buffersUsage,t=!1,n=this._propertiesChanged;for(let i=0;i<AR;++i){let o=n[i]===0?Me.STATIC_DRAW:Me.STREAM_DRAW;t=t||e[i]!==o,e[i]=o}return t};function Awe(e,t,n){return new oy(e,[{index:Ur.positionHighAndSize,componentsPerAttribute:4,componentDatatype:N.FLOAT,usage:n[cR]},{index:Ur.positionLowAndShow,componentsPerAttribute:4,componentDatatype:N.FLOAT,usage:n[cR]},{index:Ur.compressedAttribute0,componentsPerAttribute:4,componentDatatype:N.FLOAT,usage:n[pq]},{index:Ur.compressedAttribute1,componentsPerAttribute:4,componentDatatype:N.FLOAT,usage:n[Cq]},{index:Ur.scaleByDistance,componentsPerAttribute:4,componentDatatype:N.FLOAT,usage:n[gq]},{index:Ur.distanceDisplayConditionAndDisableDepthAndSplitDirection,componentsPerAttribute:4,componentDatatype:N.FLOAT,usage:n[_q]}],t)}var aR=new xn;function Iq(e,t,n,i){let o=i._index,r=i._getActualPosition();e._mode===Te.SCENE3D&&(ee.expand(e._baseVolume,r,e._baseVolume),e._boundingVolumeDirty=!0),xn.fromCartesian(r,aR);let a=i.pixelSize,s=i.outlineWidth;e._maxPixelSize=Math.max(e._maxPixelSize,a+s);let A=n[Ur.positionHighAndSize],l=aR.high;A(o,l.x,l.y,l.z,a);let f=n[Ur.positionLowAndOutline],h=aR.low;f(o,h.x,h.y,h.z,s)}var nB=65536,fE=256;function yq(e,t,n,i){let o=i._index,r=i.color,a=i.getPickId(t).color,s=i.outlineColor,A=F.floatToByte(r.red),l=F.floatToByte(r.green),f=F.floatToByte(r.blue),h=A*nB+l*fE+f;A=F.floatToByte(s.red),l=F.floatToByte(s.green),f=F.floatToByte(s.blue);let m=A*nB+l*fE+f;A=F.floatToByte(a.red),l=F.floatToByte(a.green),f=F.floatToByte(a.blue);let p=A*nB+l*fE+f,g=F.floatToByte(r.alpha)*nB+F.floatToByte(s.alpha)*fE+F.floatToByte(a.alpha),C=n[Ur.compressedAttribute0];C(o,h,m,p,g)}function bq(e,t,n,i){let o=i._index,r=0,a=1,s=1,A=1,l=i.translucencyByDistance;c(l)&&(r=l.near,a=l.nearValue,s=l.far,A=l.farValue,(a!==1||A!==1)&&(e._shaderTranslucencyByDistance=!0));let f=i.show&&i.clusterShow;i.color.alpha===0&&i.outlineColor.alpha===0&&(f=!1),a=w.clamp(a,0,1),a=a===1?255:a*255|0;let h=(f?1:0)*fE+a;A=w.clamp(A,0,1),A=A===1?255:A*255|0;let m=A,p=n[Ur.compressedAttribute1];p(o,h,m,r,s)}function Bq(e,t,n,i){let o=i._index,r=n[Ur.scaleByDistance],a=0,s=1,A=1,l=1,f=i.scaleByDistance;c(f)&&(a=f.near,s=f.nearValue,A=f.far,l=f.farValue,(s!==1||l!==1)&&(e._shaderScaleByDistance=!0)),r(o,a,s,A,l)}function xq(e,t,n,i){let o=i._index,r=n[Ur.distanceDisplayConditionAndDisableDepthAndSplitDirection],a=0,s=Number.MAX_VALUE,A=i.distanceDisplayCondition;c(A)&&(a=A.near,s=A.far,a*=a,s*=s,e._shaderDistanceDisplayCondition=!0);let l=i.disableDepthTestDistance;l*=l,l>0&&(e._shaderDisableDepthDistance=!0,l===Number.POSITIVE_INFINITY&&(l=-1));let f=0,h=i.splitDirection;c(h)&&(f=h),r(o,a,s,l,f)}function lwe(e,t,n,i){Iq(e,t,n,i),yq(e,t,n,i),bq(e,t,n,i),Bq(e,t,n,i),xq(e,t,n,i)}function sR(e,t,n,i,o,r){let a;i.mode===Te.SCENE3D?(a=e._baseVolume,e._boundingVolumeDirty=!0):a=e._baseVolume2D;let s=[];for(let A=0;A<n;++A){let l=t[A],f=l.position,h=gr._computeActualPosition(f,i,o);c(h)&&(l._setActualPosition(h),r?s.push(h):ee.expand(a,h,a))}r&&ee.fromPoints(s,a)}function fwe(e,t){let n=t.mode,i=e._pointPrimitives,o=e._pointPrimitivesToUpdate,r=e._modelMatrix;e._createVertexArray||e._mode!==n||n!==Te.SCENE3D&&!O.equals(r,e.modelMatrix)?(e._mode=n,O.clone(e.modelMatrix,r),e._createVertexArray=!0,(n===Te.SCENE3D||n===Te.SCENE2D||n===Te.COLUMBUS_VIEW)&&sR(e,i,i.length,t,r,!0)):n===Te.MORPHING?sR(e,i,i.length,t,r,!0):(n===Te.SCENE2D||n===Te.COLUMBUS_VIEW)&&sR(e,o,e._pointPrimitivesToUpdateIndex,t,r,!1)}function uwe(e,t,n){let o=t.camera.getPixelSize(n,t.context.drawingBufferWidth,t.context.drawingBufferHeight)*e._maxPixelSize;n.radius+=o}var dwe=[];cc.prototype.update=function(e){if(lR(this),!this.show)return;this._maxTotalPointSize=pn.maximumAliasedPointSize,fwe(this,e);let n=this._pointPrimitives.length,i=this._pointPrimitivesToUpdate,o=this._pointPrimitivesToUpdateIndex,r=this._propertiesChanged,a=this._createVertexArray,s,A=e.context,l=e.passes,f=l.pick;if(a||!f&&this.computeNewBuffersUsage()){this._createVertexArray=!1;for(let x=0;x<AR;++x)r[x]=0;if(this._vaf=this._vaf&&this._vaf.destroy(),n>0){this._vaf=Awe(A,n,this._buffersUsage),s=this._vaf.writers;for(let x=0;x<n;++x){let S=this._pointPrimitives[x];S._dirty=!1,lwe(this,A,s,S)}this._vaf.commit()}this._pointPrimitivesToUpdateIndex=0}else if(o>0){let x=dwe;x.length=0,(r[cR]||r[rwe]||r[awe])&&x.push(Iq),(r[pq]||r[owe])&&x.push(yq),(r[iwe]||r[Cq])&&x.push(bq),r[gq]&&x.push(Bq),(r[_q]||r[swe]||r[cwe])&&x.push(xq);let S=x.length;if(s=this._vaf.writers,o/n>.1){for(let P=0;P<o;++P){let D=i[P];D._dirty=!1;for(let Q=0;Q<S;++Q)x[Q](this,A,s,D)}this._vaf.commit()}else{for(let P=0;P<o;++P){let D=i[P];D._dirty=!1;for(let Q=0;Q<S;++Q)x[Q](this,A,s,D);this._vaf.subCommit(D._index,1)}this._vaf.endSubCommits()}this._pointPrimitivesToUpdateIndex=0}if(o>n*1.5&&(i.length=n),!c(this._vaf)||!c(this._vaf.va))return;this._boundingVolumeDirty&&(this._boundingVolumeDirty=!1,ee.transform(this._baseVolume,this.modelMatrix,this._baseVolumeWC));let h,m=O.IDENTITY;e.mode===Te.SCENE3D?(m=this.modelMatrix,h=ee.clone(this._baseVolumeWC,this._boundingVolume)):h=ee.clone(this._baseVolume2D,this._boundingVolume),uwe(this,e,h);let p=this._blendOption!==this.blendOption;this._blendOption=this.blendOption,p&&(this._blendOption===Mi.OPAQUE||this._blendOption===Mi.OPAQUE_AND_TRANSLUCENT?this._rsOpaque=ut.fromCache({depthTest:{enabled:!0,func:V.LEQUAL},depthMask:!0}):this._rsOpaque=void 0,this._blendOption===Mi.TRANSLUCENT||this._blendOption===Mi.OPAQUE_AND_TRANSLUCENT?this._rsTranslucent=ut.fromCache({depthTest:{enabled:!0,func:V.LEQUAL},depthMask:!1,blending:qn.ALPHA_BLEND}):this._rsTranslucent=void 0),this._shaderDisableDepthDistance=this._shaderDisableDepthDistance||e.minimumDisableDepthTestDistance!==0;let g,C;(p||this._shaderScaleByDistance&&!this._compiledShaderScaleByDistance||this._shaderTranslucencyByDistance&&!this._compiledShaderTranslucencyByDistance||this._shaderDistanceDisplayCondition&&!this._compiledShaderDistanceDisplayCondition||this._shaderDisableDepthDistance!==this._compiledShaderDisableDepthDistance)&&(g=new It({sources:[mq]}),this._shaderScaleByDistance&&g.defines.push("EYE_DISTANCE_SCALING"),this._shaderTranslucencyByDistance&&g.defines.push("EYE_DISTANCE_TRANSLUCENCY"),this._shaderDistanceDisplayCondition&&g.defines.push("DISTANCE_DISPLAY_CONDITION"),this._shaderDisableDepthDistance&&g.defines.push("DISABLE_DEPTH_DISTANCE"),this._blendOption===Mi.OPAQUE_AND_TRANSLUCENT&&(C=new It({defines:["OPAQUE"],sources:[lE]}),this._sp=Bn.replaceCache({context:A,shaderProgram:this._sp,vertexShaderSource:g,fragmentShaderSource:C,attributeLocations:Ur}),C=new It({defines:["TRANSLUCENT"],sources:[lE]}),this._spTranslucent=Bn.replaceCache({context:A,shaderProgram:this._spTranslucent,vertexShaderSource:g,fragmentShaderSource:C,attributeLocations:Ur})),this._blendOption===Mi.OPAQUE&&(C=new It({sources:[lE]}),this._sp=Bn.replaceCache({context:A,shaderProgram:this._sp,vertexShaderSource:g,fragmentShaderSource:C,attributeLocations:Ur})),this._blendOption===Mi.TRANSLUCENT&&(C=new It({sources:[lE]}),this._spTranslucent=Bn.replaceCache({context:A,shaderProgram:this._spTranslucent,vertexShaderSource:g,fragmentShaderSource:C,attributeLocations:Ur})),this._compiledShaderScaleByDistance=this._shaderScaleByDistance,this._compiledShaderTranslucencyByDistance=this._shaderTranslucencyByDistance,this._compiledShaderDistanceDisplayCondition=this._shaderDistanceDisplayCondition,this._compiledShaderDisableDepthDistance=this._shaderDisableDepthDistance);let _,E,I,y,b=e.commandList;if(l.render||f){let x=this._colorCommands,S=this._blendOption===Mi.OPAQUE,P=this._blendOption===Mi.OPAQUE_AND_TRANSLUCENT;_=this._vaf.va,E=_.length,x.length=E;let D=P?E*2:E;for(y=0;y<D;++y){let Q=S||P&&y%2===0;I=x[y],c(I)||(I=x[y]=new mt),I.primitiveType=Ce.POINTS,I.pass=Q||!P?Ye.OPAQUE:Ye.TRANSLUCENT,I.owner=this;let v=P?Math.floor(y/2):y;I.boundingVolume=h,I.modelMatrix=m,I.shaderProgram=Q?this._sp:this._spTranslucent,I.uniformMap=this._uniforms,I.vertexArray=_[v].va,I.renderState=Q?this._rsOpaque:this._rsTranslucent,I.debugShowBoundingVolume=this.debugShowBoundingVolume,I.pickId="v_pickColor",b.push(I)}}};cc.prototype.isDestroyed=function(){return!1};cc.prototype.destroy=function(){return this._sp=this._sp&&this._sp.destroy(),this._spTranslucent=this._spTranslucent&&this._spTranslucent.destroy(),this._spPick=this._spPick&&this._spPick.destroy(),this._vaf=this._vaf&&this._vaf.destroy(),Eq(this._pointPrimitives),pe(this)};var fR=cc;var Tq=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],uR=1,uE=8,hE=class e{static from(t){if(!(t instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");let[n,i]=new Uint8Array(t,0,2);if(n!==219)throw new Error("Data does not appear to be in a KDBush format.");let o=i>>4;if(o!==uR)throw new Error(`Got v${o} data when expected v${uR}.`);let r=Tq[i&15];if(!r)throw new Error("Unrecognized array type.");let[a]=new Uint16Array(t,2,1),[s]=new Uint32Array(t,4,1);return new e(s,a,r,t)}constructor(t,n=64,i=Float64Array,o){if(isNaN(t)||t<0)throw new Error(`Unpexpected numItems value: ${t}.`);this.numItems=+t,this.nodeSize=Math.min(Math.max(+n,2),65535),this.ArrayType=i,this.IndexArrayType=t<65536?Uint16Array:Uint32Array;let r=Tq.indexOf(this.ArrayType),a=t*2*this.ArrayType.BYTES_PER_ELEMENT,s=t*this.IndexArrayType.BYTES_PER_ELEMENT,A=(8-s%8)%8;if(r<0)throw new Error(`Unexpected typed array class: ${i}.`);o&&o instanceof ArrayBuffer?(this.data=o,this.ids=new this.IndexArrayType(this.data,uE,t),this.coords=new this.ArrayType(this.data,uE+s+A,t*2),this._pos=t*2,this._finished=!0):(this.data=new ArrayBuffer(uE+a+s+A),this.ids=new this.IndexArrayType(this.data,uE,t),this.coords=new this.ArrayType(this.data,uE+s+A,t*2),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,(uR<<4)+r]),new Uint16Array(this.data,2,1)[0]=n,new Uint32Array(this.data,4,1)[0]=t)}add(t,n){let i=this._pos>>1;return this.ids[i]=i,this.coords[this._pos++]=t,this.coords[this._pos++]=n,i}finish(){let t=this._pos>>1;if(t!==this.numItems)throw new Error(`Added ${t} items when expected ${this.numItems}.`);return hR(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(t,n,i,o){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");let{ids:r,coords:a,nodeSize:s}=this,A=[0,r.length-1,0],l=[];for(;A.length;){let f=A.pop()||0,h=A.pop()||0,m=A.pop()||0;if(h-m<=s){for(let _=m;_<=h;_++){let E=a[2*_],I=a[2*_+1];E>=t&&E<=i&&I>=n&&I<=o&&l.push(r[_])}continue}let p=m+h>>1,g=a[2*p],C=a[2*p+1];g>=t&&g<=i&&C>=n&&C<=o&&l.push(r[p]),(f===0?t<=g:n<=C)&&(A.push(m),A.push(p-1),A.push(1-f)),(f===0?i>=g:o>=C)&&(A.push(p+1),A.push(h),A.push(1-f))}return l}within(t,n,i){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");let{ids:o,coords:r,nodeSize:a}=this,s=[0,o.length-1,0],A=[],l=i*i;for(;s.length;){let f=s.pop()||0,h=s.pop()||0,m=s.pop()||0;if(h-m<=a){for(let _=m;_<=h;_++)Sq(r[2*_],r[2*_+1],t,n)<=l&&A.push(o[_]);continue}let p=m+h>>1,g=r[2*p],C=r[2*p+1];Sq(g,C,t,n)<=l&&A.push(o[p]),(f===0?t-i<=g:n-i<=C)&&(s.push(m),s.push(p-1),s.push(1-f)),(f===0?t+i>=g:n+i>=C)&&(s.push(p+1),s.push(h),s.push(1-f))}return A}};function hR(e,t,n,i,o,r){if(o-i<=n)return;let a=i+o>>1;wq(e,t,a,i,o,r),hR(e,t,n,i,a-1,1-r),hR(e,t,n,a+1,o,1-r)}function wq(e,t,n,i,o,r){for(;o>i;){if(o-i>600){let l=o-i+1,f=n-i+1,h=Math.log(l),m=.5*Math.exp(2*h/3),p=.5*Math.sqrt(h*m*(l-m)/l)*(f-l/2<0?-1:1),g=Math.max(i,Math.floor(n-f*m/l+p)),C=Math.min(o,Math.floor(n+(l-f)*m/l+p));wq(e,t,n,g,C,r)}let a=t[2*n+r],s=i,A=o;for(dE(e,t,i,n),t[2*o+r]>a&&dE(e,t,i,o);s<A;){for(dE(e,t,s,A),s++,A--;t[2*s+r]<a;)s++;for(;t[2*A+r]>a;)A--}t[2*i+r]===a?dE(e,t,i,A):(A++,dE(e,t,A,o)),A<=n&&(i=A+1),n<=A&&(o=A-1)}}function dE(e,t,n,i){dR(e,n,i),dR(t,2*n,2*i),dR(t,2*n+1,2*i+1)}function dR(e,t,n){let i=e[t];e[t]=e[n],e[n]=i}function Sq(e,t,n,i){let o=e-n,r=t-i;return o*o+r*r}function jc(e){e=e??k.EMPTY_OBJECT,this._enabled=e.enabled??!1,this._pixelRange=e.pixelRange??80,this._minimumClusterSize=e.minimumClusterSize??2,this._clusterBillboards=e.clusterBillboards??!0,this._clusterLabels=e.clusterLabels??!0,this._clusterPoints=e.clusterPoints??!0,this._labelCollection=void 0,this._billboardCollection=void 0,this._pointCollection=void 0,this._clusterBillboardCollection=void 0,this._clusterLabelCollection=void 0,this._clusterPointCollection=void 0,this._collectionIndicesByEntity={},this._unusedLabelIndices=[],this._unusedBillboardIndices=[],this._unusedPointIndices=[],this._previousClusters=[],this._previousHeight=void 0,this._enabledDirty=!1,this._clusterDirty=!1,this._cluster=void 0,this._removeEventListener=void 0,this._clusterEvent=new fe,this.show=e.show??!0}function Dq(e,t){e.x-=t,e.y-=t,e.width+=t*2,e.height+=t*2}var hwe=new Jt;function Qq(e,t,n,i,o){if(c(e._labelCollection)&&i._clusterLabels?o=L_.getScreenSpaceBoundingBox(e,t,o):c(e._billboardCollection)&&i._clusterBillboards?o=hi.getScreenSpaceBoundingBox(e,t,o):c(e._pointPrimitiveCollection)&&i._clusterPoints&&(o=gr.getScreenSpaceBoundingBox(e,t,o)),Dq(o,n),i._clusterLabels&&!c(e._labelCollection)&&c(e.id)&&vq(i,e.id.id)&&c(e.id._label)){let r=i._collectionIndicesByEntity[e.id.id].labelIndex,a=i._labelCollection.get(r),s=L_.getScreenSpaceBoundingBox(a,t,hwe);Dq(s,n),o=Jt.union(o,s,o)}return o}function mwe(e,t){if(e.clusterShow=!0,!c(e._labelCollection)&&c(e.id)&&vq(t,e.id.id)&&c(e.id._label)){let n=t._collectionIndicesByEntity[e.id.id].labelIndex,i=t._labelCollection.get(n);i.clusterShow=!0}}function Rq(e,t,n,i){let o={billboard:i._clusterBillboardCollection.add(),label:i._clusterLabelCollection.add(),point:i._clusterPointCollection.add()};o.billboard.show=!1,o.point.show=!1,o.label.show=!0,o.label.text=t.toLocaleString(),o.label.id=n,o.billboard.position=o.label.position=o.point.position=e,i._clusterEvent.raiseEvent(n,o)}function vq(e,t){return c(e)&&c(e._collectionIndicesByEntity[t])&&c(e._collectionIndicesByEntity[t].labelIndex)}function mR(e,t,n,i,o){if(!c(e))return;let r=e.length;for(let a=0;a<r;++a){let s=e.get(a);if(s.clusterShow=!1,!s.show||o._scene.mode===Te.SCENE3D&&!i.isPointVisible(s.position))continue;let A=o._clusterLabels&&c(s._labelCollection),l=o._clusterBillboards&&c(s.id._billboard),f=o._clusterPoints&&c(s.id._point);if(A&&(f||l))continue;let h=s.computeScreenSpacePosition(n);c(h)&&t.push({index:a,collection:e,clustered:!1,coord:h})}}var pwe=new Jt,gwe=new Jt,Cwe=new Jt;function _we(e){return function(t){if(c(t)&&t<.05||!e.enabled)return;let n=e._scene,i=e._labelCollection,o=e._billboardCollection,r=e._pointCollection;if(!c(i)&&!c(o)&&!c(r)||!e._clusterBillboards&&!e._clusterLabels&&!e._clusterPoints)return;let a=e._clusterLabelCollection,s=e._clusterBillboardCollection,A=e._clusterPointCollection;c(a)?a.removeAll():a=e._clusterLabelCollection=new Ah({scene:n}),c(s)?s.removeAll():s=e._clusterBillboardCollection=new vu({scene:n}),c(A)?A.removeAll():A=e._clusterPointCollection=new fR;let l=e._pixelRange,f=e._minimumClusterSize,h=e._previousClusters,m=[],p=e._previousHeight,g=n.camera.positionCartographic.height,C=n.ellipsoid,_=n.camera.positionWC,E=new lq(C,_),I=[];e._clusterLabels&&mR(i,I,n,E,e),e._clusterBillboards&&mR(o,I,n,E,e),e._clusterPoints&&mR(r,I,n,E,e);let y,b,x,S,P,D,Q,v,d,B,T,R;if(I.length>0){let L=new hE(I.length,64,Uint32Array);for(let G=0;G<I.length;++G)L.add(I[G].coord.x,I[G].coord.y);if(L.finish(),g<p)for(x=h.length,y=0;y<x;++y){let G=h[y];if(!E.isPointVisible(G.position))continue;let q=hi._computeScreenSpacePosition(O.IDENTITY,G.position,u.ZERO,U.ZERO,n);if(!c(q))continue;let z=1-g/p,K=G.width=G.width*z,ie=G.height=G.height*z;K=Math.max(K,G.minimumWidth),ie=Math.max(ie,G.minimumHeight);let le=q.x-K*.5,de=q.y-ie*.5,he=q.x+K,Se=q.y+ie;for(P=L.range(le,de,he,Se),D=P.length,B=0,d=[],b=0;b<D;++b)Q=P[b],v=I[Q],v.clustered||(++B,T=v.collection,R=v.index,d.push(T.get(R).id));if(B>=f)for(Rq(G.position,B,d,e),m.push(G),b=0;b<D;++b)I[P[b]].clustered=!0}for(x=I.length,y=0;y<x;++y){let G=I[y];if(G.clustered)continue;G.clustered=!0,T=G.collection,R=G.index;let q=T.get(R);S=Qq(q,G.coord,l,e,pwe);let z=Jt.clone(S,gwe);P=L.range(S.x,S.y,S.x+S.width,S.y+S.height),D=P.length;let K=u.clone(q.position);for(B=1,d=[q.id],b=0;b<D;++b)if(Q=P[b],v=I[Q],!v.clustered){let ie=v.collection.get(v.index),le=Qq(ie,v.coord,l,e,Cwe);u.add(ie.position,K,K),Jt.union(z,le,z),++B,d.push(ie.id)}if(B>=f){let ie=u.multiplyByScalar(K,1/B,K);for(Rq(ie,B,d,e),m.push({position:ie,width:z.width,height:z.height,minimumWidth:S.width,minimumHeight:S.height}),b=0;b<D;++b)I[P[b]].clustered=!0}else mwe(q,e)}}a.length===0&&(a.destroy(),e._clusterLabelCollection=void 0),s.length===0&&(s.destroy(),e._clusterBillboardCollection=void 0),A.length===0&&(A.destroy(),e._clusterPointCollection=void 0),e._previousClusters=m,e._previousHeight=g}}jc.prototype._initialize=function(e){this._scene=e;let t=_we(this);this._cluster=t,this._removeEventListener=e.camera.changed.addEventListener(t)};Object.defineProperties(jc.prototype,{enabled:{get:function(){return this._enabled},set:function(e){this._enabledDirty=e!==this._enabled,this._enabled=e}},pixelRange:{get:function(){return this._pixelRange},set:function(e){this._clusterDirty=this._clusterDirty||e!==this._pixelRange,this._pixelRange=e}},minimumClusterSize:{get:function(){return this._minimumClusterSize},set:function(e){this._clusterDirty=this._clusterDirty||e!==this._minimumClusterSize,this._minimumClusterSize=e}},clusterEvent:{get:function(){return this._clusterEvent}},clusterBillboards:{get:function(){return this._clusterBillboards},set:function(e){this._clusterDirty=this._clusterDirty||e!==this._clusterBillboards,this._clusterBillboards=e}},clusterLabels:{get:function(){return this._clusterLabels},set:function(e){this._clusterDirty=this._clusterDirty||e!==this._clusterLabels,this._clusterLabels=e}},clusterPoints:{get:function(){return this._clusterPoints},set:function(e){this._clusterDirty=this._clusterDirty||e!==this._clusterPoints,this._clusterPoints=e}},ready:{get:function(){return!this._enabledDirty&&!this._clusterDirty&&(!c(this._billboardCollection)||this._billboardCollection.ready)&&(!c(this._labelCollection)||this._labelCollection.ready)}}});function gR(e,t,n,i){return function(o){let r=this[e];c(this._collectionIndicesByEntity)||(this._collectionIndicesByEntity={});let a=this._collectionIndicesByEntity[o.id];if(c(a)||(a=this._collectionIndicesByEntity[o.id]={billboardIndex:void 0,labelIndex:void 0,pointIndex:void 0}),c(r)&&c(a[i]))return r.get(a[i]);c(r)||(r=this[e]=new t({scene:this._scene}));let s,A,l=this[n];l.length>0?(s=l.shift(),A=r.get(s)):(A=r.add(),s=r.length-1),a[i]=s;let f=this;return Promise.resolve().then(function(){f._clusterDirty=!0}),A}}function CR(e,t){let n=e._collectionIndicesByEntity[t];!c(n.billboardIndex)&&!c(n.labelIndex)&&!c(n.pointIndex)&&delete e._collectionIndicesByEntity[t]}jc.prototype.getLabel=gR("_labelCollection",Ah,"_unusedLabelIndices","labelIndex");jc.prototype.removeLabel=function(e){let t=this._collectionIndicesByEntity&&this._collectionIndicesByEntity[e.id];if(!c(this._labelCollection)||!c(t)||!c(t.labelIndex))return;let n=t.labelIndex;t.labelIndex=void 0,CR(this,e.id);let i=this._labelCollection.get(n);i.show=!1,i.text="",i.id=void 0,this._unusedLabelIndices.push(n),this._clusterDirty=!0};jc.prototype.getBillboard=gR("_billboardCollection",vu,"_unusedBillboardIndices","billboardIndex");jc.prototype.removeBillboard=function(e){let t=this._collectionIndicesByEntity&&this._collectionIndicesByEntity[e.id];if(!c(this._billboardCollection)||!c(t)||!c(t.billboardIndex))return;let n=t.billboardIndex;t.billboardIndex=void 0,CR(this,e.id);let i=this._billboardCollection.get(n);i.id=void 0,i.show=!1,i.image=void 0,this._unusedBillboardIndices.push(n),this._clusterDirty=!0};jc.prototype.getPoint=gR("_pointCollection",fR,"_unusedPointIndices","pointIndex");jc.prototype.removePoint=function(e){let t=this._collectionIndicesByEntity&&this._collectionIndicesByEntity[e.id];if(!c(this._pointCollection)||!c(t)||!c(t.pointIndex))return;let n=t.pointIndex;t.pointIndex=void 0,CR(this,e.id);let i=this._pointCollection.get(n);i.show=!1,i.id=void 0,this._unusedPointIndices.push(n),this._clusterDirty=!0};function pR(e){if(!c(e))return;let t=e.length;for(let n=0;n<t;++n)e.get(n).clusterShow=!0}function Ewe(e){e.enabled||(c(e._clusterLabelCollection)&&e._clusterLabelCollection.destroy(),c(e._clusterBillboardCollection)&&e._clusterBillboardCollection.destroy(),c(e._clusterPointCollection)&&e._clusterPointCollection.destroy(),e._clusterLabelCollection=void 0,e._clusterBillboardCollection=void 0,e._clusterPointCollection=void 0,pR(e._labelCollection),pR(e._billboardCollection),pR(e._pointCollection))}jc.prototype.update=function(e){if(!this.show)return;let t,n=this._labelCollection;c(n)&&n.length>0&&!n.ready&&(t=e.commandList,e.commandList=[],n.update(e),e.commandList=t);let i=this._billboardCollection;c(i)&&i.length>0&&!i.ready&&(t=e.commandList,e.commandList=[],i.update(e),e.commandList=t),this._enabledDirty&&(this._enabledDirty=!1,Ewe(this),this._clusterDirty=!0),this._clusterDirty&&(this._cluster(),this._clusterDirty=c(n)&&!n.ready||c(i)&&!i.ready),c(this._clusterLabelCollection)&&this._clusterLabelCollection.update(e),c(this._clusterBillboardCollection)&&this._clusterBillboardCollection.update(e),c(this._clusterPointCollection)&&this._clusterPointCollection.update(e),c(n)&&n.update(e),c(i)&&i.update(e),c(this._pointCollection)&&this._pointCollection.update(e)};jc.prototype.destroy=function(){c(this._removeEventListener)&&(this._removeEventListener(),this._removeEventListener=void 0),this._labelCollection=this._labelCollection&&this._labelCollection.destroy(),this._billboardCollection=this._billboardCollection&&this._billboardCollection.destroy(),this._pointCollection=this._pointCollection&&this._pointCollection.destroy(),this._clusterLabelCollection=this._clusterLabelCollection&&this._clusterLabelCollection.destroy(),this._clusterBillboardCollection=this._clusterBillboardCollection&&this._clusterBillboardCollection.destroy(),this._clusterPointCollection=this._clusterPointCollection&&this._clusterPointCollection.destroy(),this._labelCollection=void 0,this._billboardCollection=void 0,this._pointCollection=void 0,this._clusterBillboardCollection=void 0,this._clusterLabelCollection=void 0,this._clusterPointCollection=void 0,this._collectionIndicesByEntity=void 0,this._unusedLabelIndices=[],this._unusedBillboardIndices=[],this._unusedPointIndices=[],this._previousClusters=[],this._previousHeight=void 0,this._enabledDirty=!1,this._pixelRangeDirty=!1,this._minimumClusterSizeDirty=!1};var iB=jc;function _R(e){this._name=e,this._clock=void 0,this._changed=new fe,this._error=new fe,this._isLoading=!1,this._loading=new fe,this._entityCollection=new Y0(this),this._entityCluster=new iB}Object.defineProperties(_R.prototype,{name:{get:function(){return this._name},set:function(e){this._name!==e&&(this._name=e,this._changed.raiseEvent(this))}},clock:{get:function(){return this._clock},set:function(e){this._clock!==e&&(this._clock=e,this._changed.raiseEvent(this))}},entities:{get:function(){return this._entityCollection}},isLoading:{get:function(){return this._isLoading},set:function(e){_h.setLoading(this,e)}},changedEvent:{get:function(){return this._changed}},errorEvent:{get:function(){return this._error}},loadingEvent:{get:function(){return this._loading}},show:{get:function(){return this._entityCollection.show},set:function(e){this._entityCollection.show=e}},clustering:{get:function(){return this._entityCluster},set:function(e){this._entityCluster=e}}});_R.prototype.update=function(e){return!0};var Pq=_R;var Mq={};Mq.computePositions=function(e,t,n,i,o){let r=e*.5,a=-r,s=i+i,A=o?2*s:s,l=new Float64Array(A*3),f,h=0,m=0,p=o?s*3:0,g=o?(s+i)*3:i*3;for(f=0;f<i;f++){let C=f/i*w.TWO_PI,_=Math.cos(C),E=Math.sin(C),I=_*n,y=E*n,b=_*t,x=E*t;l[m+p]=I,l[m+p+1]=y,l[m+p+2]=a,l[m+g]=b,l[m+g+1]=x,l[m+g+2]=r,m+=3,o&&(l[h++]=I,l[h++]=y,l[h++]=a,l[h++]=b,l[h++]=x,l[h++]=r)}return l};var oB=Mq;var ER=new U,Iwe=new u,ywe=new u,bwe=new u,Bwe=new u;function lf(e){e=e??k.EMPTY_OBJECT;let t=e.length,n=e.topRadius,i=e.bottomRadius,o=e.vertexFormat??ge.DEFAULT,r=e.slices??128;this._length=t,this._topRadius=n,this._bottomRadius=i,this._vertexFormat=ge.clone(o),this._slices=r,this._offsetAttribute=e.offsetAttribute,this._workerName="createCylinderGeometry"}lf.packedLength=ge.packedLength+5;lf.pack=function(e,t,n){return n=n??0,ge.pack(e._vertexFormat,t,n),n+=ge.packedLength,t[n++]=e._length,t[n++]=e._topRadius,t[n++]=e._bottomRadius,t[n++]=e._slices,t[n]=e._offsetAttribute??-1,t};var Oq=new ge,Fp={vertexFormat:Oq,length:void 0,topRadius:void 0,bottomRadius:void 0,slices:void 0,offsetAttribute:void 0};lf.unpack=function(e,t,n){t=t??0;let i=ge.unpack(e,t,Oq);t+=ge.packedLength;let o=e[t++],r=e[t++],a=e[t++],s=e[t++],A=e[t];return c(n)?(n._vertexFormat=ge.clone(i,n._vertexFormat),n._length=o,n._topRadius=r,n._bottomRadius=a,n._slices=s,n._offsetAttribute=A===-1?void 0:A,n):(Fp.length=o,Fp.topRadius=r,Fp.bottomRadius=a,Fp.slices=s,Fp.offsetAttribute=A===-1?void 0:A,new lf(Fp))};lf.createGeometry=function(e){let t=e._length,n=e._topRadius,i=e._bottomRadius,o=e._vertexFormat,r=e._slices;if(t<=0||n<0||i<0||n===0&&i===0)return;let a=r+r,s=r+a,A=a+a,l=oB.computePositions(t,n,i,r,!0),f=o.st?new Float32Array(A*2):void 0,h=o.normal?new Float32Array(A*3):void 0,m=o.tangent?new Float32Array(A*3):void 0,p=o.bitangent?new Float32Array(A*3):void 0,g,C=o.normal||o.tangent||o.bitangent;if(C){let P=o.tangent||o.bitangent,D=0,Q=0,v=0,d=Math.atan2(i-n,t),B=Iwe;B.z=Math.sin(d);let T=Math.cos(d),R=bwe,L=ywe;for(g=0;g<r;g++){let G=g/r*w.TWO_PI,q=T*Math.cos(G),z=T*Math.sin(G);C&&(B.x=q,B.y=z,P&&(R=u.normalize(u.cross(u.UNIT_Z,B,R),R)),o.normal&&(h[D++]=B.x,h[D++]=B.y,h[D++]=B.z,h[D++]=B.x,h[D++]=B.y,h[D++]=B.z),o.tangent&&(m[Q++]=R.x,m[Q++]=R.y,m[Q++]=R.z,m[Q++]=R.x,m[Q++]=R.y,m[Q++]=R.z),o.bitangent&&(L=u.normalize(u.cross(B,R,L),L),p[v++]=L.x,p[v++]=L.y,p[v++]=L.z,p[v++]=L.x,p[v++]=L.y,p[v++]=L.z))}for(g=0;g<r;g++)o.normal&&(h[D++]=0,h[D++]=0,h[D++]=-1),o.tangent&&(m[Q++]=1,m[Q++]=0,m[Q++]=0),o.bitangent&&(p[v++]=0,p[v++]=-1,p[v++]=0);for(g=0;g<r;g++)o.normal&&(h[D++]=0,h[D++]=0,h[D++]=1),o.tangent&&(m[Q++]=1,m[Q++]=0,m[Q++]=0),o.bitangent&&(p[v++]=0,p[v++]=1,p[v++]=0)}let _=12*r-12,E=Be.createTypedArray(A,_),I=0,y=0;for(g=0;g<r-1;g++)E[I++]=y,E[I++]=y+2,E[I++]=y+3,E[I++]=y,E[I++]=y+3,E[I++]=y+1,y+=2;for(E[I++]=a-2,E[I++]=0,E[I++]=1,E[I++]=a-2,E[I++]=1,E[I++]=a-1,g=1;g<r-1;g++)E[I++]=a+g+1,E[I++]=a+g,E[I++]=a;for(g=1;g<r-1;g++)E[I++]=s,E[I++]=s+g,E[I++]=s+g+1;let b=0;if(o.st){let P=Math.max(n,i);for(g=0;g<A;g++){let D=u.fromArray(l,g*3,Bwe);f[b++]=(D.x+P)/(2*P),f[b++]=(D.y+P)/(2*P)}}let x=new Mt;o.position&&(x.position=new ue({componentDatatype:N.DOUBLE,componentsPerAttribute:3,values:l})),o.normal&&(x.normal=new ue({componentDatatype:N.FLOAT,componentsPerAttribute:3,values:h})),o.tangent&&(x.tangent=new ue({componentDatatype:N.FLOAT,componentsPerAttribute:3,values:m})),o.bitangent&&(x.bitangent=new ue({componentDatatype:N.FLOAT,componentsPerAttribute:3,values:p})),o.st&&(x.st=new ue({componentDatatype:N.FLOAT,componentsPerAttribute:2,values:f})),ER.x=t*.5,ER.y=Math.max(i,n);let S=new ee(u.ZERO,U.magnitude(ER));if(c(e._offsetAttribute)){t=l.length;let P=e._offsetAttribute===xt.NONE?0:1,D=new Uint8Array(t/3).fill(P);x.applyOffset=new ue({componentDatatype:N.UNSIGNED_BYTE,componentsPerAttribute:1,values:D})}return new ze({attributes:x,indices:E,primitiveType:Ce.TRIANGLES,boundingSphere:S,offsetAttribute:e._offsetAttribute})};var IR;lf.getUnitCylinder=function(){return c(IR)||(IR=lf.createGeometry(new lf({topRadius:1,bottomRadius:1,length:1,vertexFormat:ge.POSITION_ONLY}))),IR};var Lq=lf;var yR=new U;function kp(e){e=e??k.EMPTY_OBJECT;let t=e.length,n=e.topRadius,i=e.bottomRadius,o=e.slices??128,r=Math.max(e.numberOfVerticalLines??16,0);this._length=t,this._topRadius=n,this._bottomRadius=i,this._slices=o,this._numberOfVerticalLines=r,this._offsetAttribute=e.offsetAttribute,this._workerName="createCylinderOutlineGeometry"}kp.packedLength=6;kp.pack=function(e,t,n){return n=n??0,t[n++]=e._length,t[n++]=e._topRadius,t[n++]=e._bottomRadius,t[n++]=e._slices,t[n++]=e._numberOfVerticalLines,t[n]=e._offsetAttribute??-1,t};var Eh={length:void 0,topRadius:void 0,bottomRadius:void 0,slices:void 0,numberOfVerticalLines:void 0,offsetAttribute:void 0};kp.unpack=function(e,t,n){t=t??0;let i=e[t++],o=e[t++],r=e[t++],a=e[t++],s=e[t++],A=e[t];return c(n)?(n._length=i,n._topRadius=o,n._bottomRadius=r,n._slices=a,n._numberOfVerticalLines=s,n._offsetAttribute=A===-1?void 0:A,n):(Eh.length=i,Eh.topRadius=o,Eh.bottomRadius=r,Eh.slices=a,Eh.numberOfVerticalLines=s,Eh.offsetAttribute=A===-1?void 0:A,new kp(Eh))};kp.createGeometry=function(e){let t=e._length,n=e._topRadius,i=e._bottomRadius,o=e._slices,r=e._numberOfVerticalLines;if(t<=0||n<0||i<0||n===0&&i===0)return;let a=o*2,s=oB.computePositions(t,n,i,o,!1),A=o*2,l;if(r>0){let C=Math.min(r,o);l=Math.round(o/C),A+=C}let f=Be.createTypedArray(a,A*2),h=0,m;for(m=0;m<o-1;m++)f[h++]=m,f[h++]=m+1,f[h++]=m+o,f[h++]=m+1+o;if(f[h++]=o-1,f[h++]=0,f[h++]=o+o-1,f[h++]=o,r>0)for(m=0;m<o;m+=l)f[h++]=m,f[h++]=m+o;let p=new Mt;p.position=new ue({componentDatatype:N.DOUBLE,componentsPerAttribute:3,values:s}),yR.x=t*.5,yR.y=Math.max(i,n);let g=new ee(u.ZERO,U.magnitude(yR));if(c(e._offsetAttribute)){t=s.length;let C=e._offsetAttribute===xt.NONE?0:1,_=new Uint8Array(t/3).fill(C);p.applyOffset=new ue({componentDatatype:N.UNSIGNED_BYTE,componentsPerAttribute:1,values:_})}return new ze({attributes:p,indices:f,primitiveType:Ce.LINES,boundingSphere:g,offsetAttribute:e._offsetAttribute})};var Nq=kp;var Fq=u.ZERO,kq=new u,xwe=new u,Uq=new F;function Twe(e){this.id=e,this.vertexFormat=void 0,this.length=void 0,this.topRadius=void 0,this.bottomRadius=void 0,this.slices=void 0,this.numberOfVerticalLines=void 0,this.offsetAttribute=void 0}function hs(e,t){ln.call(this,{entity:e,scene:t,geometryOptions:new Twe(e),geometryPropertyName:"cylinder",observedPropertyNames:["availability","position","orientation","cylinder"]}),this._onEntityPropertyChanged(e,"cylinder",e.cylinder,void 0)}c(Object.create)&&(hs.prototype=Object.create(ln.prototype),hs.prototype.constructor=hs);Object.defineProperties(hs.prototype,{terrainOffsetProperty:{get:function(){return this._terrainOffsetProperty}}});hs.prototype.createFillGeometryInstance=function(e){let t=this._entity,n=t.isAvailable(e),i=new kt(n&&t.isShowing&&this._showProperty.getValue(e)&&this._fillProperty.getValue(e)),o=this._distanceDisplayConditionProperty.getValue(e),r=Kt.fromDistanceDisplayCondition(o),a={show:i,distanceDisplayCondition:r,color:void 0,offset:void 0};if(this._materialProperty instanceof lt){let s;c(this._materialProperty.color)&&(this._materialProperty.color.isConstant||n)&&(s=this._materialProperty.color.getValue(e,Uq)),c(s)||(s=F.WHITE),a.color=Tt.fromColor(s)}return c(this._options.offsetAttribute)&&(a.offset=ii.fromCartesian3(M.getValueOrDefault(this._terrainOffsetProperty,e,Fq,kq))),new gt({id:t,geometry:new Lq(this._options),modelMatrix:t.computeModelMatrixForHeightReference(e,t.cylinder.heightReference,this._options.length*.5,this._scene.ellipsoid),attributes:a})};hs.prototype.createOutlineGeometryInstance=function(e){let t=this._entity,n=t.isAvailable(e),i=M.getValueOrDefault(this._outlineColorProperty,e,F.BLACK,Uq),o=this._distanceDisplayConditionProperty.getValue(e),r={show:new kt(n&&t.isShowing&&this._showProperty.getValue(e)&&this._showOutlineProperty.getValue(e)),color:Tt.fromColor(i),distanceDisplayCondition:Kt.fromDistanceDisplayCondition(o),offset:void 0};return c(this._options.offsetAttribute)&&(r.offset=ii.fromCartesian3(M.getValueOrDefault(this._terrainOffsetProperty,e,Fq,kq))),new gt({id:t,geometry:new Nq(this._options),modelMatrix:t.computeModelMatrixForHeightReference(e,t.cylinder.heightReference,this._options.length*.5,this._scene.ellipsoid),attributes:r})};hs.prototype._computeCenter=function(e,t){return M.getValueOrUndefined(this._entity.position,e,t)};hs.prototype._isHidden=function(e,t){return!c(e.position)||!c(t.length)||!c(t.topRadius)||!c(t.bottomRadius)||ln.prototype._isHidden.call(this,e,t)};hs.prototype._isDynamic=function(e,t){return!e.position.isConstant||!M.isConstant(e.orientation)||!t.length.isConstant||!t.topRadius.isConstant||!t.bottomRadius.isConstant||!M.isConstant(t.slices)||!M.isConstant(t.outlineWidth)||!M.isConstant(t.numberOfVerticalLines)};hs.prototype._setStaticOptions=function(e,t){let n=M.getValueOrDefault(t.heightReference,Re.MINIMUM_VALUE,Ge.NONE),i=this._options;i.vertexFormat=this._materialProperty instanceof lt?Vt.VERTEX_FORMAT:Zn.MaterialSupport.TEXTURED.vertexFormat,i.length=t.length.getValue(Re.MINIMUM_VALUE),i.topRadius=t.topRadius.getValue(Re.MINIMUM_VALUE),i.bottomRadius=t.bottomRadius.getValue(Re.MINIMUM_VALUE),i.slices=M.getValueOrUndefined(t.slices,Re.MINIMUM_VALUE),i.numberOfVerticalLines=M.getValueOrUndefined(t.numberOfVerticalLines,Re.MINIMUM_VALUE),i.offsetAttribute=n!==Ge.NONE?xt.ALL:void 0};hs.prototype._onEntityPropertyChanged=Im;hs.DynamicGeometryUpdater=Up;function Up(e,t,n){An.call(this,e,t,n)}c(Object.create)&&(Up.prototype=Object.create(An.prototype),Up.prototype.constructor=Up);Up.prototype._isHidden=function(e,t,n){let i=this._options,o=M.getValueOrUndefined(e.position,n,xwe);return!c(o)||!c(i.length)||!c(i.topRadius)||!c(i.bottomRadius)||An.prototype._isHidden.call(this,e,t,n)};Up.prototype._setOptions=function(e,t,n){let i=M.getValueOrDefault(t.heightReference,n,Ge.NONE),o=this._options;o.length=M.getValueOrUndefined(t.length,n),o.topRadius=M.getValueOrUndefined(t.topRadius,n),o.bottomRadius=M.getValueOrUndefined(t.bottomRadius,n),o.slices=M.getValueOrUndefined(t.slices,n),o.numberOfVerticalLines=M.getValueOrUndefined(t.numberOfVerticalLines,n),o.offsetAttribute=i!==Ge.NONE?xt.ALL:void 0};var Gq=hs;var Swe={UNBOUNDED:0,CLAMPED:1,LOOP_STOP:2},ff=Object.freeze(Swe);var wwe={TICK_DEPENDENT:0,SYSTEM_CLOCK_MULTIPLIER:1,SYSTEM_CLOCK:2},Gr=Object.freeze(wwe);var Dwe={NONE:0,HOLD:1,EXTRAPOLATE:2},jA=Object.freeze(Dwe);var zq=qr(pc(),1);function Qwe(e){let t=new zq.default(e);t.normalize();let n=t.path(),i=n.lastIndexOf("/");return i!==-1&&(n=n.substr(i+1)),n}var Hq=Qwe;var Rwe=w.factorial;function bR(e,t,n,i,o,r){let a=0,s,A,l;if(i>0){for(A=0;A<o;A++){for(s=!1,l=0;l<r.length&&!s;l++)A===r[l]&&(s=!0);s||(r.push(A),a+=bR(e,t,n,i-1,o,r),r.splice(r.length-1,1))}return a}for(a=1,A=0;A<o;A++){for(s=!1,l=0;l<r.length&&!s;l++)A===r[l]&&(s=!0);s||(a*=e-n[t[A]])}return a}var rB={type:"Hermite"};rB.getRequiredDataPoints=function(e,t){return t=t??0,Math.max(Math.floor((e+1)/(t+1)),2)};rB.interpolateOrderZero=function(e,t,n,i,o){c(o)||(o=new Array(i));let r,a,s,A,l,f,h=t.length,m=new Array(i);for(r=0;r<i;r++){o[r]=0;let _=new Array(h);for(m[r]=_,a=0;a<h;a++)_[a]=[]}let p=h,g=new Array(p);for(r=0;r<p;r++)g[r]=r;let C=h-1;for(A=0;A<i;A++){for(a=0;a<p;a++)f=g[a]*i+A,m[A][0].push(n[f]);for(r=1;r<p;r++){let _=!1;for(a=0;a<p-r;a++){let E=t[g[a]],I=t[g[a+r]],y;I-E<=0?(f=g[a]*i+i*r+A,y=n[f],m[A][r].push(y/Rwe(r))):(y=m[A][r-1][a+1]-m[A][r-1][a],m[A][r].push(y/(I-E))),_=_||y!==0}_||(C=r-1)}}for(s=0,l=0;s<=l;s++)for(r=s;r<=C;r++){let _=bR(e,g,t,s,r,[]);for(A=0;A<i;A++){let E=m[A][r][0];o[A+s*i]+=E*_}}return o};var vwe=[];rB.interpolate=function(e,t,n,i,o,r,a){let s=i*(r+1);c(a)||(a=new Array(s));for(let E=0;E<s;E++)a[E]=0;let A=t.length,l=new Array(A*(o+1)),f;for(f=0;f<A;f++)for(let E=0;E<o+1;E++)l[f*(o+1)+E]=f;let h=l.length,m=vwe,p=Pwe(m,l,t,n,i,o),g=[],C=h*(h+1)/2,_=Math.min(p,r);for(let E=0;E<=_;E++)for(f=E;f<=p;f++){g.length=0;let I=bR(e,l,t,E,f,g),y=Math.floor(f*(1-f)/2)+h*f;for(let b=0;b<i;b++){let x=Math.floor(b*C),S=m[x+y];a[b+E*i]+=S*I}}return a};function Pwe(e,t,n,i,o,r){let a,s,A=-1,l=t.length,f=l*(l+1)/2;for(let h=0;h<o;h++){let m=Math.floor(h*f);for(a=0;a<l;a++)s=t[a]*o*(r+1)+h,e[m+a]=i[s];for(let p=1;p<l;p++){let g=0,C=Math.floor(p*(1-p)/2)+l*p,_=!1;for(a=0;a<l-p;a++){let E=n[t[a]],I=n[t[a+p]],y,b;if(I-E<=0)s=t[a]*o*(r+1)+o*p+h,y=i[s],b=y/w.factorial(p),e[m+C+g]=b,g++;else{let x=Math.floor((p-1)*(2-p)/2)+l*(p-1);y=e[m+x+a+1]-e[m+x+a],b=y/(I-E),e[m+C+g]=b,g++}_=_||y!==0}_&&(A=Math.max(A,p))}}return A}var Vq=rB;var BR={type:"Lagrange"};BR.getRequiredDataPoints=function(e){return Math.max(e+1,2)};BR.interpolateOrderZero=function(e,t,n,i,o){c(o)||(o=new Array(i));let r,a,s=t.length;for(r=0;r<i;r++)o[r]=0;for(r=0;r<s;r++){let A=1;for(a=0;a<s;a++)if(a!==r){let l=t[r]-t[a];A*=(e-t[a])/l}for(a=0;a<i;a++)o[a]+=A*n[r*i+a]}return o};var jq=BR;var xR={type:"Linear"};xR.getRequiredDataPoints=function(e){return 2};xR.interpolateOrderZero=function(e,t,n,i,o){c(o)||(o=new Array(i));let r,a,s,A=t[0],l=t[1];for(r=0;r<i;r++)a=n[r],s=n[r+i],o[r]=((s-a)*e+l*a-A*s)/(l-A);return o};var aB=xR;function zr(e,t,n){this.clock=e??0,this.cone=t??0,this.magnitude=n??1}zr.fromCartesian3=function(e,t){let n=e.x,i=e.y,o=e.z,r=n*n+i*i;return c(t)||(t=new zr),t.clock=Math.atan2(i,n),t.cone=Math.atan2(Math.sqrt(r),o),t.magnitude=Math.sqrt(r+o*o),t};zr.clone=function(e,t){if(c(e))return c(t)?(t.clock=e.clock,t.cone=e.cone,t.magnitude=e.magnitude,t):new zr(e.clock,e.cone,e.magnitude)};zr.normalize=function(e,t){return c(t)?(t.clock=e.clock,t.cone=e.cone,t.magnitude=1,t):new zr(e.clock,e.cone,1)};zr.equals=function(e,t){return e===t||c(e)&&c(t)&&e.clock===t.clock&&e.cone===t.cone&&e.magnitude===t.magnitude};zr.equalsEpsilon=function(e,t,n){return n=n??0,e===t||c(e)&&c(t)&&Math.abs(e.clock-t.clock)<=n&&Math.abs(e.cone-t.cone)<=n&&Math.abs(e.magnitude-t.magnitude)<=n};zr.prototype.equals=function(e){return zr.equals(this,e)};zr.prototype.clone=function(e){return zr.clone(this,e)};zr.prototype.equalsEpsilon=function(e,t){return zr.equalsEpsilon(this,e,t)};zr.prototype.toString=function(){return`(${this.clock}, ${this.cone}, ${this.magnitude})`};var uf=zr;var CE=qr(pc(),1);var TR;typeof performance<"u"&&typeof performance.now=="function"&&isFinite(performance.now())?TR=function(){return performance.now()}:TR=function(){return Date.now()};var SR=TR;function wR(e){e=e??k.EMPTY_OBJECT;let t=e.currentTime,n=e.startTime,i=e.stopTime;c(t)?t=X.clone(t):c(n)?t=X.clone(n):c(i)?t=X.addDays(i,-1,new X):t=X.now(),c(n)?n=X.clone(n):n=X.clone(t),c(i)?i=X.clone(i):i=X.addDays(n,1,new X),this.startTime=n,this.stopTime=i,this.clockRange=e.clockRange??ff.UNBOUNDED,this.canAnimate=e.canAnimate??!0,this.onTick=new fe,this.onStop=new fe,this._currentTime=void 0,this._multiplier=void 0,this._clockStep=void 0,this._shouldAnimate=void 0,this._lastSystemTime=SR(),this.currentTime=t,this.multiplier=e.multiplier??1,this.shouldAnimate=e.shouldAnimate??!1,this.clockStep=e.clockStep??Gr.SYSTEM_CLOCK_MULTIPLIER}Object.defineProperties(wR.prototype,{currentTime:{get:function(){return this._currentTime},set:function(e){X.equals(this._currentTime,e)||(this._clockStep===Gr.SYSTEM_CLOCK&&(this._clockStep=Gr.SYSTEM_CLOCK_MULTIPLIER),this._currentTime=e)}},multiplier:{get:function(){return this._multiplier},set:function(e){this._multiplier!==e&&(this._clockStep===Gr.SYSTEM_CLOCK&&(this._clockStep=Gr.SYSTEM_CLOCK_MULTIPLIER),this._multiplier=e)}},clockStep:{get:function(){return this._clockStep},set:function(e){e===Gr.SYSTEM_CLOCK&&(this._multiplier=1,this._shouldAnimate=!0,this._currentTime=X.now()),this._clockStep=e}},shouldAnimate:{get:function(){return this._shouldAnimate},set:function(e){this._shouldAnimate!==e&&(this._clockStep===Gr.SYSTEM_CLOCK&&(this._clockStep=Gr.SYSTEM_CLOCK_MULTIPLIER),this._shouldAnimate=e)}}});wR.prototype.tick=function(){let e=SR(),t=X.clone(this._currentTime);if(this.canAnimate&&this._shouldAnimate){let n=this._clockStep;if(n===Gr.SYSTEM_CLOCK)t=X.now(t);else{let i=this._multiplier;if(n===Gr.TICK_DEPENDENT)t=X.addSeconds(t,i,t);else{let s=e-this._lastSystemTime;t=X.addSeconds(t,i*(s/1e3),t)}let o=this.clockRange,r=this.startTime,a=this.stopTime;if(o===ff.CLAMPED)X.lessThan(t,r)?t=X.clone(r,t):X.greaterThan(t,a)&&(t=X.clone(a,t),this.onStop.raiseEvent(this));else if(o===ff.LOOP_STOP)for(X.lessThan(t,r)&&(t=X.clone(r,t));X.greaterThan(t,a);)t=X.addSeconds(r,X.secondsDifference(t,a),t),this.onStop.raiseEvent(this)}}return this._currentTime=t,this._lastSystemTime=e,this.onTick.raiseEvent(this),t};var Yq=wR;function Ih(){this._definitionChanged=new fe,this._startTime=void 0,this._stopTime=void 0,this._currentTime=void 0,this._clockRange=void 0,this._clockStep=void 0,this._multiplier=void 0}Object.defineProperties(Ih.prototype,{definitionChanged:{get:function(){return this._definitionChanged}},startTime:Ns("startTime"),stopTime:Ns("stopTime"),currentTime:Ns("currentTime"),clockRange:Ns("clockRange"),clockStep:Ns("clockStep"),multiplier:Ns("multiplier")});Ih.prototype.clone=function(e){return c(e)||(e=new Ih),e.startTime=this.startTime,e.stopTime=this.stopTime,e.currentTime=this.currentTime,e.clockRange=this.clockRange,e.clockStep=this.clockStep,e.multiplier=this.multiplier,e};Ih.prototype.equals=function(e){return this===e||c(e)&&X.equals(this.startTime,e.startTime)&&X.equals(this.stopTime,e.stopTime)&&X.equals(this.currentTime,e.currentTime)&&this.clockRange===e.clockRange&&this.clockStep===e.clockStep&&this.multiplier===e.multiplier};Ih.prototype.merge=function(e){this.startTime=this.startTime??e.startTime,this.stopTime=this.stopTime??e.stopTime,this.currentTime=this.currentTime??e.currentTime,this.clockRange=this.clockRange??e.clockRange,this.clockStep=this.clockStep??e.clockStep,this.multiplier=this.multiplier??e.multiplier};Ih.prototype.getValue=function(e){return c(e)||(e=new Yq),e.startTime=this.startTime??e.startTime,e.stopTime=this.stopTime??e.stopTime,e.currentTime=this.currentTime??e.currentTime,e.clockRange=this.clockRange??e.clockRange,e.multiplier=this.multiplier??e.multiplier,e.clockStep=this.clockStep??e.clockStep,e};var DR=Ih;var Mwe=F.WHITE,Owe=.1,Lwe=new U(8,8),Nwe=new U(0,0),Fwe=new U(1,1);function Gp(e){e=e??k.EMPTY_OBJECT,this._definitionChanged=new fe,this._color=void 0,this._colorSubscription=void 0,this._cellAlpha=void 0,this._cellAlphaSubscription=void 0,this._lineCount=void 0,this._lineCountSubscription=void 0,this._lineThickness=void 0,this._lineThicknessSubscription=void 0,this._lineOffset=void 0,this._lineOffsetSubscription=void 0,this.color=e.color,this.cellAlpha=e.cellAlpha,this.lineCount=e.lineCount,this.lineThickness=e.lineThickness,this.lineOffset=e.lineOffset}Object.defineProperties(Gp.prototype,{isConstant:{get:function(){return M.isConstant(this._color)&&M.isConstant(this._cellAlpha)&&M.isConstant(this._lineCount)&&M.isConstant(this._lineThickness)&&M.isConstant(this._lineOffset)}},definitionChanged:{get:function(){return this._definitionChanged}},color:W("color"),cellAlpha:W("cellAlpha"),lineCount:W("lineCount"),lineThickness:W("lineThickness"),lineOffset:W("lineOffset")});Gp.prototype.getType=function(e){return"Grid"};var kwe=new X;Gp.prototype.getValue=function(e,t){return c(e)||(e=X.now(kwe)),c(t)||(t={}),t.color=M.getValueOrClonedDefault(this._color,e,Mwe,t.color),t.cellAlpha=M.getValueOrDefault(this._cellAlpha,e,Owe),t.lineCount=M.getValueOrClonedDefault(this._lineCount,e,Lwe,t.lineCount),t.lineThickness=M.getValueOrClonedDefault(this._lineThickness,e,Fwe,t.lineThickness),t.lineOffset=M.getValueOrClonedDefault(this._lineOffset,e,Nwe,t.lineOffset),t};Gp.prototype.equals=function(e){return this===e||e instanceof Gp&&M.equals(this._color,e._color)&&M.equals(this._cellAlpha,e._cellAlpha)&&M.equals(this._lineCount,e._lineCount)&&M.equals(this._lineThickness,e._lineThickness)&&M.equals(this._lineOffset,e._lineOffset)};var QR=Gp;function zp(e){this._definitionChanged=new fe,this._color=void 0,this._colorSubscription=void 0,this.color=e}Object.defineProperties(zp.prototype,{isConstant:{get:function(){return M.isConstant(this._color)}},definitionChanged:{get:function(){return this._definitionChanged}},color:W("color")});zp.prototype.getType=function(e){return"PolylineArrow"};var Uwe=new X;zp.prototype.getValue=function(e,t){return c(e)||(e=X.now(Uwe)),c(t)||(t={}),t.color=M.getValueOrClonedDefault(this._color,e,F.WHITE,t.color),t};zp.prototype.equals=function(e){return this===e||e instanceof zp&&M.equals(this._color,e._color)};var RR=zp;var Gwe=F.WHITE,zwe=F.TRANSPARENT,Hwe=16,Vwe=255;function Hp(e){e=e??k.EMPTY_OBJECT,this._definitionChanged=new fe,this._color=void 0,this._colorSubscription=void 0,this._gapColor=void 0,this._gapColorSubscription=void 0,this._dashLength=void 0,this._dashLengthSubscription=void 0,this._dashPattern=void 0,this._dashPatternSubscription=void 0,this.color=e.color,this.gapColor=e.gapColor,this.dashLength=e.dashLength,this.dashPattern=e.dashPattern}Object.defineProperties(Hp.prototype,{isConstant:{get:function(){return M.isConstant(this._color)&&M.isConstant(this._gapColor)&&M.isConstant(this._dashLength)&&M.isConstant(this._dashPattern)}},definitionChanged:{get:function(){return this._definitionChanged}},color:W("color"),gapColor:W("gapColor"),dashLength:W("dashLength"),dashPattern:W("dashPattern")});Hp.prototype.getType=function(e){return"PolylineDash"};var jwe=new X;Hp.prototype.getValue=function(e,t){return c(e)||(e=X.now(jwe)),c(t)||(t={}),t.color=M.getValueOrClonedDefault(this._color,e,Gwe,t.color),t.gapColor=M.getValueOrClonedDefault(this._gapColor,e,zwe,t.gapColor),t.dashLength=M.getValueOrDefault(this._dashLength,e,Hwe,t.dashLength),t.dashPattern=M.getValueOrDefault(this._dashPattern,e,Vwe,t.dashPattern),t};Hp.prototype.equals=function(e){return this===e||e instanceof Hp&&M.equals(this._color,e._color)&&M.equals(this._gapColor,e._gapColor)&&M.equals(this._dashLength,e._dashLength)&&M.equals(this._dashPattern,e._dashPattern)};var vR=Hp;var Ywe=F.WHITE,qwe=.25,Wwe=1;function Vp(e){e=e??k.EMPTY_OBJECT,this._definitionChanged=new fe,this._color=void 0,this._colorSubscription=void 0,this._glowPower=void 0,this._glowPowerSubscription=void 0,this._taperPower=void 0,this._taperPowerSubscription=void 0,this.color=e.color,this.glowPower=e.glowPower,this.taperPower=e.taperPower}Object.defineProperties(Vp.prototype,{isConstant:{get:function(){return M.isConstant(this._color)&&M.isConstant(this._glow)}},definitionChanged:{get:function(){return this._definitionChanged}},color:W("color"),glowPower:W("glowPower"),taperPower:W("taperPower")});Vp.prototype.getType=function(e){return"PolylineGlow"};var Jwe=new X;Vp.prototype.getValue=function(e,t){return c(e)||(e=X.now(Jwe)),c(t)||(t={}),t.color=M.getValueOrClonedDefault(this._color,e,Ywe,t.color),t.glowPower=M.getValueOrDefault(this._glowPower,e,qwe,t.glowPower),t.taperPower=M.getValueOrDefault(this._taperPower,e,Wwe,t.taperPower),t};Vp.prototype.equals=function(e){return this===e||e instanceof Vp&&M.equals(this._color,e._color)&&M.equals(this._glowPower,e._glowPower)&&M.equals(this._taperPower,e._taperPower)};var PR=Vp;var Kwe=F.WHITE,Xwe=F.BLACK,Zwe=1;function jp(e){e=e??k.EMPTY_OBJECT,this._definitionChanged=new fe,this._color=void 0,this._colorSubscription=void 0,this._outlineColor=void 0,this._outlineColorSubscription=void 0,this._outlineWidth=void 0,this._outlineWidthSubscription=void 0,this.color=e.color,this.outlineColor=e.outlineColor,this.outlineWidth=e.outlineWidth}Object.defineProperties(jp.prototype,{isConstant:{get:function(){return M.isConstant(this._color)&&M.isConstant(this._outlineColor)&&M.isConstant(this._outlineWidth)}},definitionChanged:{get:function(){return this._definitionChanged}},color:W("color"),outlineColor:W("outlineColor"),outlineWidth:W("outlineWidth")});jp.prototype.getType=function(e){return"PolylineOutline"};var $we=new X;jp.prototype.getValue=function(e,t){return c(e)||(e=X.now($we)),c(t)||(t={}),t.color=M.getValueOrClonedDefault(this._color,e,Kwe,t.color),t.outlineColor=M.getValueOrClonedDefault(this._outlineColor,e,Xwe,t.outlineColor),t.outlineWidth=M.getValueOrDefault(this._outlineWidth,e,Zwe),t};jp.prototype.equals=function(e){return this===e||e instanceof jp&&M.equals(this._color,e._color)&&M.equals(this._outlineColor,e._outlineColor)&&M.equals(this._outlineWidth,e._outlineWidth)};var MR=jp;function df(e,t){this._value=void 0,this._definitionChanged=new fe,this._eventHelper=new HA,this._referenceFrame=t??oi.FIXED,this.setValue(e)}Object.defineProperties(df.prototype,{isConstant:{get:function(){let e=this._value;if(!c(e))return!0;let t=e.length;for(let n=0;n<t;n++)if(!M.isConstant(e[n]))return!1;return!0}},definitionChanged:{get:function(){return this._definitionChanged}},referenceFrame:{get:function(){return this._referenceFrame}}});var eDe=new X;df.prototype.getValue=function(e,t){return c(e)||(e=X.now(eDe)),this.getValueInReferenceFrame(e,oi.FIXED,t)};df.prototype.getValueInReferenceFrame=function(e,t,n){let i=this._value;if(!c(i))return;let o=i.length;c(n)||(n=new Array(o));let r=0,a=0;for(;r<o;){let A=i[r].getValueInReferenceFrame(e,t,n[r]);c(A)&&(n[a]=A,a++),r++}return n.length=a,n};df.prototype.setValue=function(e){let t=this._eventHelper;if(t.removeAll(),c(e)){this._value=e.slice();let n=e.length;for(let i=0;i<n;i++){let o=e[i];c(o)&&t.add(o.definitionChanged,df.prototype._raiseDefinitionChanged,this)}}else this._value=void 0;this._definitionChanged.raiseEvent(this)};df.prototype.equals=function(e){return this===e||e instanceof df&&this._referenceFrame===e._referenceFrame&&M.arrayEquals(this._value,e._value)};df.prototype._raiseDefinitionChanged=function(){this._definitionChanged.raiseEvent(this)};var sB=df;function Yu(e){this._value=void 0,this._definitionChanged=new fe,this._eventHelper=new HA,this.setValue(e)}Object.defineProperties(Yu.prototype,{isConstant:{get:function(){let e=this._value;if(!c(e))return!0;let t=e.length;for(let n=0;n<t;n++)if(!M.isConstant(e[n]))return!1;return!0}},definitionChanged:{get:function(){return this._definitionChanged}}});var tDe=new X;Yu.prototype.getValue=function(e,t){c(e)||(e=X.now(tDe));let n=this._value;if(!c(n))return;let i=n.length;c(t)||(t=new Array(i));let o=0,r=0;for(;o<i;){let s=this._value[o].getValue(e,t[o]);c(s)&&(t[r]=s,r++),o++}return t.length=r,t};Yu.prototype.setValue=function(e){let t=this._eventHelper;if(t.removeAll(),c(e)){this._value=e.slice();let n=e.length;for(let i=0;i<n;i++){let o=e[i];c(o)&&t.add(o.definitionChanged,Yu.prototype._raiseDefinitionChanged,this)}}else this._value=void 0;this._definitionChanged.raiseEvent(this)};Yu.prototype.equals=function(e){return this===e||e instanceof Yu&&M.arrayEquals(this._value,e._value)};Yu.prototype._raiseDefinitionChanged=function(){this._definitionChanged.raiseEvent(this)};var OR=Yu;function yh(e){let t=e._targetProperty;if(!c(t)){let n=e._targetEntity;if(!c(n)){if(n=e._targetCollection.getById(e._targetId),!c(n)){e._targetEntity=e._targetProperty=void 0;return}n.definitionChanged.addEventListener(ms.prototype._onTargetEntityDefinitionChanged,e),e._targetEntity=n}let i=e._targetPropertyNames;t=e._targetEntity;for(let o=0,r=i.length;o<r&&c(t);++o)t=t[i[o]];e._targetProperty=t}return t}function ms(e,t,n){this._targetCollection=e,this._targetId=t,this._targetPropertyNames=n,this._targetProperty=void 0,this._targetEntity=void 0,this._definitionChanged=new fe,e.collectionChanged.addEventListener(ms.prototype._onCollectionChanged,this)}Object.defineProperties(ms.prototype,{isConstant:{get:function(){return M.isConstant(yh(this))}},definitionChanged:{get:function(){return this._definitionChanged}},referenceFrame:{get:function(){let e=yh(this);return c(e)?e.referenceFrame:void 0}},targetId:{get:function(){return this._targetId}},targetCollection:{get:function(){return this._targetCollection}},targetPropertyNames:{get:function(){return this._targetPropertyNames}},resolvedProperty:{get:function(){return yh(this)}}});ms.fromString=function(e,t){let n,i=[],o=!0,r=!1,a="";for(let s=0;s<t.length;++s){let A=t.charAt(s);r?(a+=A,r=!1):A==="\\"?r=!0:o&&A==="#"?(n=a,o=!1,a=""):!o&&A==="."?(i.push(a),a=""):a+=A}return i.push(a),new ms(e,n,i)};var nDe=new X;ms.prototype.getValue=function(e,t){let n=yh(this);return c(e)||(e=X.now(nDe)),c(n)?n.getValue(e,t):void 0};ms.prototype.getValueInReferenceFrame=function(e,t,n){let i=yh(this);return c(i)?i.getValueInReferenceFrame(e,t,n):void 0};ms.prototype.getType=function(e){let t=yh(this);return c(t)?t.getType(e):void 0};ms.prototype.equals=function(e){if(this===e)return!0;let t=this._targetPropertyNames,n=e._targetPropertyNames;if(this._targetCollection!==e._targetCollection||this._targetId!==e._targetId||t.length!==n.length)return!1;let i=this._targetPropertyNames.length;for(let o=0;o<i;o++)if(t[o]!==n[o])return!1;return!0};ms.prototype._onTargetEntityDefinitionChanged=function(e,t,n,i){c(this._targetProperty)&&this._targetPropertyNames[0]===t&&(this._targetProperty=void 0,this._definitionChanged.raiseEvent(this))};ms.prototype._onCollectionChanged=function(e,t,n){let i=this._targetEntity;c(i)&&n.indexOf(i)!==-1?(i.definitionChanged.removeEventListener(ms.prototype._onTargetEntityDefinitionChanged,this),this._targetEntity=this._targetProperty=void 0):c(i)||(i=yh(this),c(i)&&this._definitionChanged.raiseEvent(this))};var cB=ms;var iDe={packedLength:1,pack:function(e,t,n){return n=n??0,t[n]=e,t},unpack:function(e,t,n){return t=t??0,e[t]},convertPackedArrayForInterpolation:function(e,t,n,i){c(i)||(i=[]),t=t??0,n=n??e.length;let o;for(let r=0,a=n-t+1;r<a;r++){let s=e[t+r];r===0||Math.abs(o-s)<Math.PI?i[r]=s:i[r]=s-w.TWO_PI,o=s}},unpackInterpolationResult:function(e,t,n,i,o){return o=e[0],o<0?o+w.TWO_PI:o}},hf=iDe;var qq={packedLength:1,pack:function(e,t,n){n=n??0,t[n]=e},unpack:function(e,t,n){return t=t??0,e[t]}};function Wq(e,t,n){let i,o=e.length,r=n.length,a=o+r;if(e.length=a,o!==t){let s=o-1;for(i=a-1;i>=t;i--)e[i]=e[s--]}for(i=0;i<r;i++)e[t++]=n[i]}function Jq(e,t){return e instanceof X?e:typeof e=="string"?X.fromIso8601(e):X.addSeconds(t,e,new X)}var LR=[],NR=[];function AB(e,t,n,i,o){let r=0,a,s,A,l,f,h;for(;r<i.length;){f=Jq(i[r],e),A=sr(t,f,X.compare);let m=0,p=0;if(A<0){for(A=~A,l=A*o,s=void 0,h=t[A];r<i.length&&(f=Jq(i[r],e),!(c(s)&&X.compare(s,f)>=0||c(h)&&X.compare(f,h)>=0));){for(LR[m++]=f,r=r+1,a=0;a<o;a++)NR[p++]=i[r],r=r+1;s=f}m>0&&(NR.length=p,Wq(n,l,NR),LR.length=m,Wq(t,A,LR))}else{for(a=0;a<o;a++)r++,n[A*o+a]=i[r];r++}}}function Ac(e,t){let n=e;n===Number&&(n=qq);let i=n.packedLength,o=n.packedInterpolationLength??i,r=0,a;if(c(t)){let s=t.length;a=new Array(s);for(let A=0;A<s;A++){let l=t[A];l===Number&&(l=qq);let f=l.packedLength;i+=f,o+=l.packedInterpolationLength??f,a[A]=l}r=s}this._type=e,this._innerType=n,this._interpolationDegree=1,this._interpolationAlgorithm=aB,this._numberOfPoints=0,this._times=[],this._values=[],this._xTable=[],this._yTable=[],this._packedLength=i,this._packedInterpolationLength=o,this._updateTableLength=!0,this._interpolationResult=new Array(o),this._definitionChanged=new fe,this._derivativeTypes=t,this._innerDerivativeTypes=a,this._inputOrder=r,this._forwardExtrapolationType=jA.NONE,this._forwardExtrapolationDuration=0,this._backwardExtrapolationType=jA.NONE,this._backwardExtrapolationDuration=0}Object.defineProperties(Ac.prototype,{isConstant:{get:function(){return this._values.length===0}},definitionChanged:{get:function(){return this._definitionChanged}},type:{get:function(){return this._type}},derivativeTypes:{get:function(){return this._derivativeTypes}},interpolationDegree:{get:function(){return this._interpolationDegree}},interpolationAlgorithm:{get:function(){return this._interpolationAlgorithm}},forwardExtrapolationType:{get:function(){return this._forwardExtrapolationType},set:function(e){this._forwardExtrapolationType!==e&&(this._forwardExtrapolationType=e,this._definitionChanged.raiseEvent(this))}},forwardExtrapolationDuration:{get:function(){return this._forwardExtrapolationDuration},set:function(e){this._forwardExtrapolationDuration!==e&&(this._forwardExtrapolationDuration=e,this._definitionChanged.raiseEvent(this))}},backwardExtrapolationType:{get:function(){return this._backwardExtrapolationType},set:function(e){this._backwardExtrapolationType!==e&&(this._backwardExtrapolationType=e,this._definitionChanged.raiseEvent(this))}},backwardExtrapolationDuration:{get:function(){return this._backwardExtrapolationDuration},set:function(e){this._backwardExtrapolationDuration!==e&&(this._backwardExtrapolationDuration=e,this._definitionChanged.raiseEvent(this))}}});var oDe=new X;Ac.prototype.getValue=function(e,t){c(e)||(e=X.now(oDe));let n=this._times,i=n.length;if(i===0)return;let o,r=this._innerType,a=this._values,s=sr(n,e,X.compare);if(s<0){if(s=~s,s===0){let b=n[s];if(o=this._backwardExtrapolationDuration,this._backwardExtrapolationType===jA.NONE||o!==0&&X.secondsDifference(b,e)>o)return;if(this._backwardExtrapolationType===jA.HOLD)return r.unpack(a,0,t)}if(s>=i){s=i-1;let b=n[s];if(o=this._forwardExtrapolationDuration,this._forwardExtrapolationType===jA.NONE||o!==0&&X.secondsDifference(e,b)>o)return;if(this._forwardExtrapolationType===jA.HOLD)return s=i-1,r.unpack(a,s*r.packedLength,t)}let A=this._xTable,l=this._yTable,f=this._interpolationAlgorithm,h=this._packedInterpolationLength,m=this._inputOrder;if(this._updateTableLength){this._updateTableLength=!1;let b=Math.min(f.getRequiredDataPoints(this._interpolationDegree,m),i);b!==this._numberOfPoints&&(this._numberOfPoints=b,A.length=b,l.length=b*h)}let p=this._numberOfPoints-1;if(p<1)return;let g=0,C=i-1;if(C-g+1>=p+1){let b=s-(p/2|0)-1;b<g&&(b=g);let x=b+p;x>C&&(x=C,b=x-p,b<g&&(b=g)),g=b,C=x}let E=C-g+1;for(let b=0;b<E;++b)A[b]=X.secondsDifference(n[g+b],n[C]);if(c(r.convertPackedArrayForInterpolation))r.convertPackedArrayForInterpolation(a,g,C,l);else{let b=0,x=this._packedLength,S=g*x,P=(C+1)*x;for(;S<P;)l[b]=a[S],S++,b++}let I=X.secondsDifference(e,n[C]),y;if(m===0||!c(f.interpolate))y=f.interpolateOrderZero(I,A,l,h,this._interpolationResult);else{let b=Math.floor(h/(m+1));y=f.interpolate(I,A,l,b,m,m,this._interpolationResult)}return c(r.unpackInterpolationResult)?r.unpackInterpolationResult(y,a,g,C,t):r.unpack(y,0,t)}return r.unpack(a,s*this._packedLength,t)};Ac.prototype.setInterpolationOptions=function(e){if(!c(e))return;let t=!1,n=e.interpolationAlgorithm,i=e.interpolationDegree;c(n)&&this._interpolationAlgorithm!==n&&(this._interpolationAlgorithm=n,t=!0),c(i)&&this._interpolationDegree!==i&&(this._interpolationDegree=i,t=!0),t&&(this._updateTableLength=!0,this._definitionChanged.raiseEvent(this))};Ac.prototype.addSample=function(e,t,n){let i=this._innerDerivativeTypes,o=c(i),r=this._innerType,a=[];if(a.push(e),r.pack(t,a,a.length),o){let s=i.length;for(let A=0;A<s;A++)i[A].pack(n[A],a,a.length)}AB(void 0,this._times,this._values,a,this._packedLength),this._updateTableLength=!0,this._definitionChanged.raiseEvent(this)};Ac.prototype.addSamples=function(e,t,n){let i=this._innerDerivativeTypes,o=c(i),r=this._innerType,a=e.length,s=[];for(let A=0;A<a;A++)if(s.push(e[A]),r.pack(t[A],s,s.length),o){let l=n[A],f=i.length;for(let h=0;h<f;h++)i[h].pack(l[h],s,s.length)}AB(void 0,this._times,this._values,s,this._packedLength),this._updateTableLength=!0,this._definitionChanged.raiseEvent(this)};Ac.prototype.getSample=function(e){let t=this._times,n=t.length;if(c(n))return e<0&&(e+=n),t[e]};Ac.prototype.addSamplesPackedArray=function(e,t){AB(t,this._times,this._values,e,this._packedLength),this._updateTableLength=!0,this._definitionChanged.raiseEvent(this)};Ac.prototype.removeSample=function(e){let t=sr(this._times,e,X.compare);return t<0?!1:(Kq(this,t,1),!0)};function Kq(e,t,n){let i=e._packedLength;e._times.splice(t,n),e._values.splice(t*i,n*i),e._updateTableLength=!0,e._definitionChanged.raiseEvent(e)}Ac.prototype.removeSamples=function(e){let t=this._times,n=sr(t,e.start,X.compare);n<0?n=~n:e.isStartIncluded||++n;let i=sr(t,e.stop,X.compare);i<0?i=~i:e.isStopIncluded&&++i,Kq(this,n,i-n)};Ac.prototype.equals=function(e){if(this===e)return!0;if(!c(e)||this._type!==e._type||this._interpolationDegree!==e._interpolationDegree||this._interpolationAlgorithm!==e._interpolationAlgorithm)return!1;let t=this._derivativeTypes,n=c(t),i=e._derivativeTypes,o=c(i);if(n!==o)return!1;let r,a;if(n){if(a=t.length,a!==i.length)return!1;for(r=0;r<a;r++)if(t[r]!==i[r])return!1}let s=this._times,A=e._times;if(a=s.length,a!==A.length)return!1;for(r=0;r<a;r++)if(!X.equals(s[r],A[r]))return!1;let l=this._values,f=e._values;for(a=l.length,r=0;r<a;r++)if(l[r]!==f[r])return!1;return!0};Ac._mergeNewSamples=AB;var qu=Ac;function lc(e,t){t=t??0;let n;if(t>0){n=new Array(t);for(let i=0;i<t;i++)n[i]=u}this._numberOfDerivatives=t,this._property=new qu(u,n),this._definitionChanged=new fe,this._referenceFrame=e??oi.FIXED,this._property._definitionChanged.addEventListener(function(){this._definitionChanged.raiseEvent(this)},this)}Object.defineProperties(lc.prototype,{isConstant:{get:function(){return this._property.isConstant}},definitionChanged:{get:function(){return this._definitionChanged}},referenceFrame:{get:function(){return this._referenceFrame}},interpolationDegree:{get:function(){return this._property.interpolationDegree}},interpolationAlgorithm:{get:function(){return this._property.interpolationAlgorithm}},numberOfDerivatives:{get:function(){return this._numberOfDerivatives}},forwardExtrapolationType:{get:function(){return this._property.forwardExtrapolationType},set:function(e){this._property.forwardExtrapolationType=e}},forwardExtrapolationDuration:{get:function(){return this._property.forwardExtrapolationDuration},set:function(e){this._property.forwardExtrapolationDuration=e}},backwardExtrapolationType:{get:function(){return this._property.backwardExtrapolationType},set:function(e){this._property.backwardExtrapolationType=e}},backwardExtrapolationDuration:{get:function(){return this._property.backwardExtrapolationDuration},set:function(e){this._property.backwardExtrapolationDuration=e}}});var rDe=new X;lc.prototype.getValue=function(e,t){return c(e)||(e=X.now(rDe)),this.getValueInReferenceFrame(e,oi.FIXED,t)};lc.prototype.getValueInReferenceFrame=function(e,t,n){if(n=this._property.getValue(e,n),c(n))return Wf.convertToReferenceFrame(e,n,this._referenceFrame,t,n)};lc.prototype.setInterpolationOptions=function(e){this._property.setInterpolationOptions(e)};lc.prototype.addSample=function(e,t,n){let i=this._numberOfDerivatives;this._property.addSample(e,t,n)};lc.prototype.addSamples=function(e,t,n){this._property.addSamples(e,t,n)};lc.prototype.addSamplesPackedArray=function(e,t){this._property.addSamplesPackedArray(e,t)};lc.prototype.removeSample=function(e){return this._property.removeSample(e)};lc.prototype.removeSamples=function(e){this._property.removeSamples(e)};lc.prototype.equals=function(e){return this===e||e instanceof lc&&M.equals(this._property,e._property)&&this._referenceFrame===e._referenceFrame};var Wu=lc;var aDe={HORIZONTAL:0,VERTICAL:1},Ju=Object.freeze(aDe);var sDe=Ju.HORIZONTAL,cDe=F.WHITE,ADe=F.BLACK,lDe=0,fDe=1;function Yp(e){e=e??k.EMPTY_OBJECT,this._definitionChanged=new fe,this._orientation=void 0,this._orientationSubscription=void 0,this._evenColor=void 0,this._evenColorSubscription=void 0,this._oddColor=void 0,this._oddColorSubscription=void 0,this._offset=void 0,this._offsetSubscription=void 0,this._repeat=void 0,this._repeatSubscription=void 0,this.orientation=e.orientation,this.evenColor=e.evenColor,this.oddColor=e.oddColor,this.offset=e.offset,this.repeat=e.repeat}Object.defineProperties(Yp.prototype,{isConstant:{get:function(){return M.isConstant(this._orientation)&&M.isConstant(this._evenColor)&&M.isConstant(this._oddColor)&&M.isConstant(this._offset)&&M.isConstant(this._repeat)}},definitionChanged:{get:function(){return this._definitionChanged}},orientation:W("orientation"),evenColor:W("evenColor"),oddColor:W("oddColor"),offset:W("offset"),repeat:W("repeat")});Yp.prototype.getType=function(e){return"Stripe"};var uDe=new X;Yp.prototype.getValue=function(e,t){return c(e)||(e=X.now(uDe)),c(t)||(t={}),t.horizontal=M.getValueOrDefault(this._orientation,e,sDe)===Ju.HORIZONTAL,t.evenColor=M.getValueOrClonedDefault(this._evenColor,e,cDe,t.evenColor),t.oddColor=M.getValueOrClonedDefault(this._oddColor,e,ADe,t.oddColor),t.offset=M.getValueOrDefault(this._offset,e,lDe),t.repeat=M.getValueOrDefault(this._repeat,e,fDe),t};Yp.prototype.equals=function(e){return this===e||e instanceof Yp&&M.equals(this._orientation,e._orientation)&&M.equals(this._evenColor,e._evenColor)&&M.equals(this._oddColor,e._oddColor)&&M.equals(this._offset,e._offset)&&M.equals(this._repeat,e._repeat)};var FR=Yp;function Ku(e){this._definitionChanged=new fe,this._intervals=new af,this._intervals.changedEvent.addEventListener(Ku.prototype._intervalsChanged,this),this._referenceFrame=e??oi.FIXED}Object.defineProperties(Ku.prototype,{isConstant:{get:function(){return this._intervals.isEmpty}},definitionChanged:{get:function(){return this._definitionChanged}},intervals:{get:function(){return this._intervals}},referenceFrame:{get:function(){return this._referenceFrame}}});var dDe=new X;Ku.prototype.getValue=function(e,t){return c(e)||(e=X.now(dDe)),this.getValueInReferenceFrame(e,oi.FIXED,t)};Ku.prototype.getValueInReferenceFrame=function(e,t,n){let i=this._intervals.findDataForIntervalContainingDate(e);if(c(i))return Wf.convertToReferenceFrame(e,i,this._referenceFrame,t,n)};Ku.prototype.equals=function(e){return this===e||e instanceof Ku&&this._intervals.equals(e._intervals,M.equals)&&this._referenceFrame===e._referenceFrame};Ku.prototype._intervalsChanged=function(){this._definitionChanged.raiseEvent(this)};var qp=Ku;function bh(){this._definitionChanged=new fe,this._intervals=new af,this._intervals.changedEvent.addEventListener(bh.prototype._intervalsChanged,this)}Object.defineProperties(bh.prototype,{isConstant:{get:function(){return this._intervals.isEmpty}},definitionChanged:{get:function(){return this._definitionChanged}},intervals:{get:function(){return this._intervals}}});var hDe=new X;bh.prototype.getValue=function(e,t){c(e)||(e=X.now(hDe));let n=this._intervals.findDataForIntervalContainingDate(e);return c(n)&&typeof n.clone=="function"?n.clone(t):n};bh.prototype.equals=function(e){return this===e||e instanceof bh&&this._intervals.equals(e._intervals,M.equals)};bh.prototype._intervalsChanged=function(){this._definitionChanged.raiseEvent(this)};var lB=bh;function Wp(e,t){this._position=void 0,this._subscription=void 0,this._definitionChanged=new fe,this._normalize=t??!0,this.position=e}Object.defineProperties(Wp.prototype,{isConstant:{get:function(){return M.isConstant(this._position)}},definitionChanged:{get:function(){return this._definitionChanged}},position:{get:function(){return this._position},set:function(e){let t=this._position;t!==e&&(c(t)&&this._subscription(),this._position=e,c(e)&&(this._subscription=e._definitionChanged.addEventListener(function(){this._definitionChanged.raiseEvent(this)},this)),this._definitionChanged.raiseEvent(this))}},normalize:{get:function(){return this._normalize},set:function(e){this._normalize!==e&&(this._normalize=e,this._definitionChanged.raiseEvent(this))}}});var mDe=new u,Xq=new u,Zq=new X,pDe=new X,kR=1/60;Wp.prototype.getValue=function(e,t){return this._getValue(e,t)};Wp.prototype._getValue=function(e,t,n){c(e)||(e=X.now(pDe)),c(t)||(t=new u);let i=this._position;if(M.isConstant(i))return this._normalize?void 0:u.clone(u.ZERO,t);let o=i.getValue(e,mDe),r=i.getValue(X.addSeconds(e,kR,Zq),Xq);if(!c(o)||!c(r)&&(r=o,o=i.getValue(X.addSeconds(e,-kR,Zq),Xq),!c(o)))return;if(u.equals(o,r))return this._normalize?void 0:u.clone(u.ZERO,t);c(n)&&o.clone(n);let a=u.subtract(r,o,t);return this._normalize?u.normalize(a,t):u.divideByScalar(a,kR,t)};Wp.prototype.equals=function(e){return this===e||e instanceof Wp&&M.equals(this._position,e._position)};var fB=Wp;function mE(e,t){this._velocityVectorProperty=new fB(e,!0),this._subscription=void 0,this._ellipsoid=void 0,this._definitionChanged=new fe,this.ellipsoid=t??Z.default;let n=this;this._velocityVectorProperty.definitionChanged.addEventListener(function(){n._definitionChanged.raiseEvent(n)})}Object.defineProperties(mE.prototype,{isConstant:{get:function(){return M.isConstant(this._velocityVectorProperty)}},definitionChanged:{get:function(){return this._definitionChanged}},position:{get:function(){return this._velocityVectorProperty.position},set:function(e){this._velocityVectorProperty.position=e}},ellipsoid:{get:function(){return this._ellipsoid},set:function(e){this._ellipsoid!==e&&(this._ellipsoid=e,this._definitionChanged.raiseEvent(this))}}});var $q=new u,gDe=new u,eW=new J,CDe=new X;mE.prototype.getValue=function(e,t){c(e)||(e=X.now(CDe));let n=this._velocityVectorProperty._getValue(e,gDe,$q);if(c(n))return Rn.rotationMatrixFromPositionVelocity($q,n,this._ellipsoid,eW),qe.fromRotationMatrix(eW,t)};mE.prototype.equals=function(e){return this===e||e instanceof mE&&M.equals(this._velocityVectorProperty,e._velocityVectorProperty)&&(this._ellipsoid===e._ellipsoid||this._ellipsoid.equals(e._ellipsoid))};var tW=mE;var mf={COMPLETE:0,BELOW_ELLIPSOID_HORIZON:1,ABOVE_ELLIPSOID_HORIZON:2};mf.validate=function(e){return e===mf.COMPLETE||e===mf.BELOW_ELLIPSOID_HORIZON||e===mf.ABOVE_ELLIPSOID_HORIZON};mf.toString=function(e){switch(e){case mf.COMPLETE:return"COMPLETE";case mf.BELOW_ELLIPSOID_HORIZON:return"BELOW_ELLIPSOID_HORIZON";case mf.ABOVE_ELLIPSOID_HORIZON:return"ABOVE_ELLIPSOID_HORIZON";default:throw new Ee("SensorVolumePortionToDisplay value is not valid and cannot be converted to a String.")}};var UR=mf;function Xu(){}Xu.packedLength=u.packedLength;Xu.unpack=u.unpack;Xu.pack=u.pack;var GR;function pE(e,t){return t[0]==="#"&&(t=GR+t),cB.fromString(e,t)}function nW(e,t,n){if(c(n.reference))return pE(t,n.reference);if(c(n.velocityReference)){let i=pE(t,n.velocityReference);switch(e){case u:case Xu:return new fB(i,e===Xu);case qe:return new tW(i)}}throw new oe(`${JSON.stringify(n)} is not valid CZML.`)}function _De(e,t){return new _m(function(n,i){return t(e.getValue(n,i))},e.isConstant)}var kn=new u,da=new uf,Hr=new ae,Bh=new nn,uB=new qe;function EDe(e){let t=e.rgbaf;if(c(t))return t;let n=e.rgba;if(!c(n))return;let i=n.length;if(i===F.packedLength)return[F.byteToFloat(n[0]),F.byteToFloat(n[1]),F.byteToFloat(n[2]),F.byteToFloat(n[3])];t=new Array(i);for(let o=0;o<i;o+=5)t[o]=n[o],t[o+1]=F.byteToFloat(n[o+1]),t[o+2]=F.byteToFloat(n[o+2]),t[o+3]=F.byteToFloat(n[o+3]),t[o+4]=F.byteToFloat(n[o+4]);return t}function iW(e,t){let n=e.uri??e;return c(t)?t.getDerivedResource({url:n}):ke.createIfNeeded(n)}function IDe(e){let t=e.wsen;if(c(t))return t;let n=e.wsenDegrees;if(!c(n))return;let i=n.length;if(i===ce.packedLength)return[w.toRadians(n[0]),w.toRadians(n[1]),w.toRadians(n[2]),w.toRadians(n[3])];t=new Array(i);for(let o=0;o<i;o+=5)t[o]=n[o],t[o+1]=w.toRadians(n[o+1]),t[o+2]=w.toRadians(n[o+2]),t[o+3]=w.toRadians(n[o+3]),t[o+4]=w.toRadians(n[o+4]);return t}function yDe(e){let t=e.length;if(da.magnitude=1,t===2)return da.clock=e[0],da.cone=e[1],u.fromSpherical(da,kn),[kn.x,kn.y,kn.z];let n=new Array(t/3*4);for(let i=0,o=0;i<t;i+=3,o+=4)n[o]=e[i],da.clock=e[i+1],da.cone=e[i+2],u.fromSpherical(da,kn),n[o+1]=kn.x,n[o+2]=kn.y,n[o+3]=kn.z;return n}function bDe(e){let t=e.length;if(t===3)return da.clock=e[0],da.cone=e[1],da.magnitude=e[2],u.fromSpherical(da,kn),[kn.x,kn.y,kn.z];let n=new Array(t);for(let i=0;i<t;i+=4)n[i]=e[i],da.clock=e[i+1],da.cone=e[i+2],da.magnitude=e[i+3],u.fromSpherical(da,kn),n[i+1]=kn.x,n[i+2]=kn.y,n[i+3]=kn.z;return n}function BDe(e){let t=e.length;if(t===3)return Hr.longitude=e[0],Hr.latitude=e[1],Hr.height=e[2],Z.default.cartographicToCartesian(Hr,kn),[kn.x,kn.y,kn.z];let n=new Array(t);for(let i=0;i<t;i+=4)n[i]=e[i],Hr.longitude=e[i+1],Hr.latitude=e[i+2],Hr.height=e[i+3],Z.default.cartographicToCartesian(Hr,kn),n[i+1]=kn.x,n[i+2]=kn.y,n[i+3]=kn.z;return n}function xDe(e){let t=e.length;if(t===3)return Hr.longitude=w.toRadians(e[0]),Hr.latitude=w.toRadians(e[1]),Hr.height=e[2],Z.default.cartographicToCartesian(Hr,kn),[kn.x,kn.y,kn.z];let n=new Array(t);for(let i=0;i<t;i+=4)n[i]=e[i],Hr.longitude=w.toRadians(e[i+1]),Hr.latitude=w.toRadians(e[i+2]),Hr.height=e[i+3],Z.default.cartographicToCartesian(Hr,kn),n[i+1]=kn.x,n[i+2]=kn.y,n[i+3]=kn.z;return n}function zR(e){let t=e.cartesian;if(c(t))return t;let n=e.cartesianVelocity;if(c(n))return n;let i=e.unitCartesian;if(c(i))return i;let o=e.unitSpherical;if(c(o))return yDe(o);let r=e.spherical;if(c(r))return bDe(r);let a=e.cartographicRadians;if(c(a))return BDe(a);let s=e.cartographicDegrees;if(c(s))return xDe(s);throw new oe(`${JSON.stringify(e)} is not a valid CZML interval.`)}function oW(e,t){u.unpack(e,t,kn),u.normalize(kn,kn),u.pack(kn,e,t)}function TDe(e){let t=zR(e);if(t.length===3)return oW(t,0),t;for(let n=1;n<t.length;n+=4)oW(t,n);return t}function rW(e,t){qe.unpack(e,t,uB),qe.normalize(uB,uB),qe.pack(uB,e,t)}function SDe(e){let t=e.unitQuaternion;if(c(t)){if(t.length===4)return rW(t,0),t;for(let n=1;n<t.length;n+=5)rW(t,n)}return t}function aW(e){return typeof e=="boolean"?Boolean:typeof e=="number"?Number:typeof e=="string"?String:e.hasOwnProperty("array")?Array:e.hasOwnProperty("boolean")?Boolean:e.hasOwnProperty("boundingRectangle")?Jt:e.hasOwnProperty("cartesian2")?U:e.hasOwnProperty("cartesian")||e.hasOwnProperty("spherical")||e.hasOwnProperty("cartographicRadians")||e.hasOwnProperty("cartographicDegrees")?u:e.hasOwnProperty("unitCartesian")||e.hasOwnProperty("unitSpherical")?Xu:e.hasOwnProperty("rgba")||e.hasOwnProperty("rgbaf")?F:e.hasOwnProperty("arcType")?Yt:e.hasOwnProperty("classificationType")?on:e.hasOwnProperty("colorBlendMode")?ns:e.hasOwnProperty("cornerType")?Hn:e.hasOwnProperty("heightReference")?Ge:e.hasOwnProperty("horizontalOrigin")?pi:e.hasOwnProperty("date")?X:e.hasOwnProperty("labelStyle")?wo:e.hasOwnProperty("number")?Number:e.hasOwnProperty("nearFarScalar")?Rt:e.hasOwnProperty("distanceDisplayCondition")?rt:e.hasOwnProperty("object")||e.hasOwnProperty("value")?Object:e.hasOwnProperty("unitQuaternion")?qe:e.hasOwnProperty("shadowMode")?cn:e.hasOwnProperty("string")?String:e.hasOwnProperty("stripeOrientation")?Ju:e.hasOwnProperty("wsen")||e.hasOwnProperty("wsenDegrees")?ce:e.hasOwnProperty("uri")?CE.default:e.hasOwnProperty("verticalOrigin")?yn:Object}function wDe(e,t,n){switch(e){case Yt:return Yt[t.arcType??t];case Array:return t.array;case Boolean:return t.boolean??t;case Jt:return t.boundingRectangle;case U:return t.cartesian2;case u:return zR(t);case Xu:return TDe(t);case F:return EDe(t);case on:return on[t.classificationType??t];case ns:return ns[t.colorBlendMode??t];case Hn:return Hn[t.cornerType??t];case Ge:return Ge[t.heightReference??t];case pi:return pi[t.horizontalOrigin??t];case Image:return iW(t,n);case X:return X.fromIso8601(t.date??t);case wo:return wo[t.labelStyle??t];case Number:return t.number??t;case Rt:return t.nearFarScalar;case rt:return t.distanceDisplayCondition;case Object:return t.object??t.value??t;case qe:return SDe(t);case hf:return t.number??t;case UR:return UR[t.portionToDisplay??t];case cn:return cn[t.shadowMode??t.shadows??t];case String:return t.string??t;case Ju:return Ju[t.stripeOrientation??t];case ce:return IDe(t);case CE.default:return iW(t,n);case yn:return yn[t.verticalOrigin??t];default:throw new oe(`Unknown CzmlDataSource interval type: ${e}`)}}var DDe={HERMITE:Vq,LAGRANGE:jq,LINEAR:aB};function dB(e,t){let n=e.interpolationAlgorithm,i=e.interpolationDegree;(c(n)||c(i))&&t.setInterpolationOptions({interpolationAlgorithm:DDe[n],interpolationDegree:i});let o=e.forwardExtrapolationType;c(o)&&(t.forwardExtrapolationType=jA[o]);let r=e.forwardExtrapolationDuration;c(r)&&(t.forwardExtrapolationDuration=r);let a=e.backwardExtrapolationType;c(a)&&(t.backwardExtrapolationType=jA[a]);let s=e.backwardExtrapolationDuration;c(s)&&(t.backwardExtrapolationDuration=s)}var sW={iso8601:void 0};function ki(e){if(c(e))return sW.iso8601=e,nn.fromIso8601(sW)}function HR(e){let t=Re.MAXIMUM_INTERVAL.clone();return t.data=e,t}function cW(e){let t=new us;return t.intervals.addInterval(HR(e)),t}function AW(e){let t=new zc(e.referenceFrame);return t.intervals.addInterval(HR(e)),t}function hB(e,t,n,i,o,r,a){let s=ki(i.interval);c(o)&&(c(s)?s=nn.intersect(s,o,Bh):s=o);let A,l,f,h=!c(i.reference)&&!c(i.velocityReference),m=c(s)&&!s.equals(Re.MAXIMUM_INTERVAL);if(i.delete===!0){if(!m){t[n]=void 0;return}return EW(t[n],s)}let p=!1;if(h){if(l=wDe(e,i,r),!c(l))return;A=e.packedLength??1,f=l.length??1,p=!c(i.array)&&typeof l!="string"&&f>A&&e!==Object}let g=typeof e.unpack=="function"&&e!==hf;if(!p&&!m){h?t[n]=new li(g?e.unpack(l,0):l):t[n]=nW(e,a,i);return}let C=t[n],_,E=i.epoch;if(c(E)&&(_=X.fromIso8601(E)),p&&!m){C instanceof qu||(t[n]=C=new qu(e)),C.addSamplesPackedArray(l,_),dB(i,C);return}let I;if(!p&&m){s=s.clone(),h?s.data=g?e.unpack(l,0):l:s.data=nW(e,a,i),c(C)||(t[n]=C=h?new lB:new us),h&&C instanceof lB?C.intervals.addInterval(s):C instanceof us?(h&&(s.data=new li(s.data)),C.intervals.addInterval(s)):(t[n]=C=cW(C),h&&(s.data=new li(s.data)),C.intervals.addInterval(s));return}c(C)||(t[n]=C=new us),C instanceof us||(t[n]=C=cW(C));let y=C.intervals;I=y.findInterval(s),(!c(I)||!(I.data instanceof qu))&&(I=s.clone(),I.data=new qu(e),y.addInterval(I)),I.data.addSamplesPackedArray(l,_),dB(i,I.data)}function EW(e,t){if(e instanceof qu){e.removeSamples(t);return}else if(e instanceof lB){e.intervals.removeInterval(t);return}else if(e instanceof us){let n=e.intervals;for(let i=0;i<n.length;++i){let o=nn.intersect(n.get(i),t,Bh);o.isEmpty||EW(o.data,t)}n.removeInterval(t);return}}function $(e,t,n,i,o,r,a){if(c(i))if(Array.isArray(i))for(let s=0,A=i.length;s<A;++s)hB(e,t,n,i[s],o,r,a);else hB(e,t,n,i,o,r,a)}function lW(e,t,n,i,o,r){let a=ki(n.interval);c(i)&&(c(a)?a=nn.intersect(a,i,Bh):a=i);let s=c(n.cartesianVelocity)?1:0,A=u.packedLength*(s+1),l,f,h=!c(n.reference),m=c(a)&&!a.equals(Re.MAXIMUM_INTERVAL);if(n.delete===!0){if(!m){e[t]=void 0;return}return IW(e[t],a)}let p,g=!1;if(h&&(c(n.referenceFrame)&&(p=oi[n.referenceFrame]),p=p??oi.FIXED,l=zR(n),f=l.length??1,g=f>A),!g&&!m){h?e[t]=new Jf(u.unpack(l),p):e[t]=pE(r,n.reference);return}let C=e[t],_,E=n.epoch;if(c(E)&&(_=X.fromIso8601(E)),g&&!m){(!(C instanceof Wu)||c(p)&&C.referenceFrame!==p)&&(e[t]=C=new Wu(p,s)),C.addSamplesPackedArray(l,_),dB(n,C);return}let I;if(!g&&m){a=a.clone(),h?a.data=u.unpack(l):a.data=pE(r,n.reference),c(C)||(h?C=new qp(p):C=new zc(p),e[t]=C),h&&C instanceof qp&&c(p)&&C.referenceFrame===p?C.intervals.addInterval(a):C instanceof zc?(h&&(a.data=new Jf(a.data,p)),C.intervals.addInterval(a)):(e[t]=C=AW(C),h&&(a.data=new Jf(a.data,p)),C.intervals.addInterval(a));return}c(C)?C instanceof zc||(e[t]=C=AW(C)):e[t]=C=new zc(p);let y=C.intervals;I=y.findInterval(a),(!c(I)||!(I.data instanceof Wu)||c(p)&&I.data.referenceFrame!==p)&&(I=a.clone(),I.data=new Wu(p,s),y.addInterval(I)),I.data.addSamplesPackedArray(l,_),dB(n,I.data)}function IW(e,t){if(e instanceof Wu){e.removeSamples(t);return}else if(e instanceof qp){e.intervals.removeInterval(t);return}else if(e instanceof zc){let n=e.intervals;for(let i=0;i<n.length;++i){let o=nn.intersect(n.get(i),t,Bh);o.isEmpty||IW(o.data,t)}n.removeInterval(t);return}}function yW(e,t,n,i,o,r){if(c(n))if(Array.isArray(n))for(let a=0,s=n.length;a<s;++a)lW(e,t,n[a],i,o,r);else lW(e,t,n,i,o,r)}function fW(e,t,n,i){c(n.references)?mB(e,t,n.references,n.interval,i,OR,us):(c(n.cartesian2)?n.array=U.unpackArray(n.cartesian2):c(n.cartesian)&&(n.array=U.unpackArray(n.cartesian)),c(n.array)&&$(Array,e,t,n,void 0,void 0,i))}function uW(e,t,n,i,o,r){let a=ki(n.interval);c(i)&&(c(a)?a=nn.intersect(a,i,Bh):a=i);let s=e[t],A,l;if(c(a)){s instanceof KQ||(s=new KQ,e[t]=s);let h=s.intervals;l=h.findInterval({start:a.start,stop:a.stop}),c(l)?A=l.data:(l=a.clone(),h.addInterval(l))}else A=s;let f;c(n.solidColor)?(A instanceof lt||(A=new lt),f=n.solidColor,$(F,A,"color",f.color,void 0,void 0,r)):c(n.grid)?(A instanceof QR||(A=new QR),f=n.grid,$(F,A,"color",f.color,void 0,o,r),$(Number,A,"cellAlpha",f.cellAlpha,void 0,o,r),$(U,A,"lineCount",f.lineCount,void 0,o,r),$(U,A,"lineThickness",f.lineThickness,void 0,o,r),$(U,A,"lineOffset",f.lineOffset,void 0,o,r)):c(n.image)?(A instanceof uC||(A=new uC),f=n.image,$(Image,A,"image",f.image,void 0,o,r),$(U,A,"repeat",f.repeat,void 0,o,r),$(F,A,"color",f.color,void 0,o,r),$(Boolean,A,"transparent",f.transparent,void 0,o,r)):c(n.stripe)?(A instanceof FR||(A=new FR),f=n.stripe,$(Ju,A,"orientation",f.orientation,void 0,o,r),$(F,A,"evenColor",f.evenColor,void 0,o,r),$(F,A,"oddColor",f.oddColor,void 0,o,r),$(Number,A,"offset",f.offset,void 0,o,r),$(Number,A,"repeat",f.repeat,void 0,o,r)):c(n.polylineOutline)?(A instanceof MR||(A=new MR),f=n.polylineOutline,$(F,A,"color",f.color,void 0,o,r),$(F,A,"outlineColor",f.outlineColor,void 0,o,r),$(Number,A,"outlineWidth",f.outlineWidth,void 0,o,r)):c(n.polylineGlow)?(A instanceof PR||(A=new PR),f=n.polylineGlow,$(F,A,"color",f.color,void 0,o,r),$(Number,A,"glowPower",f.glowPower,void 0,o,r),$(Number,A,"taperPower",f.taperPower,void 0,o,r)):c(n.polylineArrow)?(A instanceof RR||(A=new RR),f=n.polylineArrow,$(F,A,"color",f.color,void 0,void 0,r)):c(n.polylineDash)?(A instanceof vR||(A=new vR),f=n.polylineDash,$(F,A,"color",f.color,void 0,void 0,r),$(F,A,"gapColor",f.gapColor,void 0,void 0,r),$(Number,A,"dashLength",f.dashLength,void 0,o,r),$(Number,A,"dashPattern",f.dashPattern,void 0,o,r)):c(n.checkerboard)&&(A instanceof jQ||(A=new jQ),f=n.checkerboard,$(F,A,"evenColor",f.evenColor,void 0,o,r),$(F,A,"oddColor",f.oddColor,void 0,o,r),$(U,A,"repeat",f.repeat,void 0,o,r)),c(l)?l.data=A:e[t]=A}function ps(e,t,n,i,o,r){if(c(n))if(Array.isArray(n))for(let a=0,s=n.length;a<s;++a)uW(e,t,n[a],i,o,r);else uW(e,t,n,i,o,r)}function QDe(e,t,n,i){let o=t.name;c(o)&&(e.name=t.name)}function RDe(e,t,n,i){let o=t.description;c(o)&&$(String,e,"description",o,void 0,i,n)}function vDe(e,t,n,i){let o=t.position;c(o)&&yW(e,"position",o,void 0,i,n)}function PDe(e,t,n,i){let o=t.viewFrom;c(o)&&$(u,e,"viewFrom",o,void 0,i,n)}function MDe(e,t,n,i){let o=t.orientation;c(o)&&$(qe,e,"orientation",o,void 0,i,n)}function ODe(e,t,n,i){let o=t.properties;if(c(o)){c(e.properties)||(e.properties=new Fs);for(let r in o)if(o.hasOwnProperty(r)){e.properties.hasProperty(r)||e.properties.addProperty(r);let a=o[r];if(Array.isArray(a))for(let s=0,A=a.length;s<A;++s)hB(aW(a[s]),e.properties,r,a[s],void 0,i,n);else hB(aW(a),e.properties,r,a,void 0,i,n)}}}function mB(e,t,n,i,o,r,a){let s=n.map(function(A){return pE(o,A)});if(c(i)){i=ki(i);let A=e[t];if(!(A instanceof a)){let l=new a;l.intervals.addInterval(HR(A)),e[t]=A=l}i.data=new r(s),A.intervals.addInterval(i)}else e[t]=new r(s)}function dW(e,t,n,i){let o=n.references;c(o)?mB(e,t,o,n.interval,i,OR,us):$(Array,e,t,n,void 0,void 0,i)}function hW(e,t,n,i){if(c(n))if(Array.isArray(n))for(let o=0,r=n.length;o<r;++o)dW(e,t,n[o],i);else dW(e,t,n,i)}function mW(e,t,n,i){let o=n.references;c(o)?mB(e,t,o,n.interval,i,sB,zc):(c(n.cartesian)?n.array=u.unpackArray(n.cartesian):c(n.cartographicRadians)?n.array=u.fromRadiansArrayHeights(n.cartographicRadians,Z.default):c(n.cartographicDegrees)&&(n.array=u.fromDegreesArrayHeights(n.cartographicDegrees,Z.default)),c(n.array)&&$(Array,e,t,n,void 0,void 0,i))}function _E(e,t,n,i){if(c(n))if(Array.isArray(n))for(let o=0,r=n.length;o<r;++o)mW(e,t,n[o],i);else mW(e,t,n,i)}function LDe(e){return u.unpackArray(e)}function NDe(e){return u.fromRadiansArrayHeights(e,Z.default)}function FDe(e){return u.fromDegreesArrayHeights(e,Z.default)}function pW(e,t,n,i){let o=n.references;if(c(o)){let r=o.map(function(a){let s={};return mB(s,"positions",a,n.interval,i,sB,zc),s.positions});e[t]=new sB(r)}else c(n.cartesian)?n.array=n.cartesian.map(LDe):c(n.cartographicRadians)?n.array=n.cartographicRadians.map(NDe):c(n.cartographicDegrees)&&(n.array=n.cartographicDegrees.map(FDe)),c(n.array)&&$(Array,e,t,n,void 0,void 0,i)}function kDe(e,t,n,i){if(c(n))if(Array.isArray(n))for(let o=0,r=n.length;o<r;++o)pW(e,t,n[o],i);else pW(e,t,n,i)}function UDe(e,t,n,i){if(c(n))if(Array.isArray(n))for(let o=0,r=n.length;o<r;o++)fW(e,t,n[o],i);else fW(e,t,n,i)}function GDe(e,t,n,i){let o=t.availability;if(!c(o))return;let r;if(Array.isArray(o))for(let a=0,s=o.length;a<s;++a)c(r)||(r=new af),r.addInterval(ki(o[a]));else r=new af,r.addInterval(ki(o));e.availability=r}function zDe(e,t,n,i,o){c(t)&&$(Xu,e,"alignedAxis",t,n,i,o)}function HDe(e,t,n,i){let o=t.billboard;if(!c(o))return;let r=ki(o.interval),a=e.billboard;c(a)||(e.billboard=a=new ry),$(Boolean,a,"show",o.show,r,i,n),$(Image,a,"image",o.image,r,i,n),$(Number,a,"scale",o.scale,r,i,n),$(U,a,"pixelOffset",o.pixelOffset,r,i,n),$(u,a,"eyeOffset",o.eyeOffset,r,i,n),$(pi,a,"horizontalOrigin",o.horizontalOrigin,r,i,n),$(yn,a,"verticalOrigin",o.verticalOrigin,r,i,n),$(Ge,a,"heightReference",o.heightReference,r,i,n),$(F,a,"color",o.color,r,i,n),$(hf,a,"rotation",o.rotation,r,i,n),zDe(a,o.alignedAxis,r,i,n),$(Boolean,a,"sizeInMeters",o.sizeInMeters,r,i,n),$(Number,a,"width",o.width,r,i,n),$(Number,a,"height",o.height,r,i,n),$(Rt,a,"scaleByDistance",o.scaleByDistance,r,i,n),$(Rt,a,"translucencyByDistance",o.translucencyByDistance,r,i,n),$(Rt,a,"pixelOffsetScaleByDistance",o.pixelOffsetScaleByDistance,r,i,n),$(Jt,a,"imageSubRegion",o.imageSubRegion,r,i,n),$(rt,a,"distanceDisplayCondition",o.distanceDisplayCondition,r,i,n),$(Number,a,"disableDepthTestDistance",o.disableDepthTestDistance,r,i,n)}function VDe(e,t,n,i){let o=t.box;if(!c(o))return;let r=ki(o.interval),a=e.box;c(a)||(e.box=a=new xy),$(Boolean,a,"show",o.show,r,i,n),$(u,a,"dimensions",o.dimensions,r,i,n),$(Ge,a,"heightReference",o.heightReference,r,i,n),$(Boolean,a,"fill",o.fill,r,i,n),ps(a,"material",o.material,r,i,n),$(Boolean,a,"outline",o.outline,r,i,n),$(F,a,"outlineColor",o.outlineColor,r,i,n),$(Number,a,"outlineWidth",o.outlineWidth,r,i,n),$(cn,a,"shadows",o.shadows,r,i,n),$(rt,a,"distanceDisplayCondition",o.distanceDisplayCondition,r,i,n)}function jDe(e,t,n,i){let o=t.corridor;if(!c(o))return;let r=ki(o.interval),a=e.corridor;c(a)||(e.corridor=a=new Ty),$(Boolean,a,"show",o.show,r,i,n),_E(a,"positions",o.positions,n),$(Number,a,"width",o.width,r,i,n),$(Number,a,"height",o.height,r,i,n),$(Ge,a,"heightReference",o.heightReference,r,i,n),$(Number,a,"extrudedHeight",o.extrudedHeight,r,i,n),$(Ge,a,"extrudedHeightReference",o.extrudedHeightReference,r,i,n),$(Hn,a,"cornerType",o.cornerType,r,i,n),$(Number,a,"granularity",o.granularity,r,i,n),$(Boolean,a,"fill",o.fill,r,i,n),ps(a,"material",o.material,r,i,n),$(Boolean,a,"outline",o.outline,r,i,n),$(F,a,"outlineColor",o.outlineColor,r,i,n),$(Number,a,"outlineWidth",o.outlineWidth,r,i,n),$(cn,a,"shadows",o.shadows,r,i,n),$(rt,a,"distanceDisplayCondition",o.distanceDisplayCondition,r,i,n),$(on,a,"classificationType",o.classificationType,r,i,n),$(Number,a,"zIndex",o.zIndex,r,i,n)}function YDe(e,t,n,i){let o=t.cylinder;if(!c(o))return;let r=ki(o.interval),a=e.cylinder;c(a)||(e.cylinder=a=new Sy),$(Boolean,a,"show",o.show,r,i,n),$(Number,a,"length",o.length,r,i,n),$(Number,a,"topRadius",o.topRadius,r,i,n),$(Number,a,"bottomRadius",o.bottomRadius,r,i,n),$(Ge,a,"heightReference",o.heightReference,r,i,n),$(Boolean,a,"fill",o.fill,r,i,n),ps(a,"material",o.material,r,i,n),$(Boolean,a,"outline",o.outline,r,i,n),$(F,a,"outlineColor",o.outlineColor,r,i,n),$(Number,a,"outlineWidth",o.outlineWidth,r,i,n),$(Number,a,"numberOfVerticalLines",o.numberOfVerticalLines,r,i,n),$(Number,a,"slices",o.slices,r,i,n),$(cn,a,"shadows",o.shadows,r,i,n),$(rt,a,"distanceDisplayCondition",o.distanceDisplayCondition,r,i,n)}function qDe(e,t){let n=e.version;if(c(n)&&typeof n=="string"){let r=n.split(".");if(r.length===2){if(r[0]!=="1")throw new oe("Cesium only supports CZML version 1.");t._version=n}}if(!c(t._version))throw new oe("CZML version information invalid.  It is expected to be a property on the document object in the <Major>.<Minor> version format.");let i=t._documentPacket;c(e.name)&&(i.name=e.name);let o=e.clock;if(c(o)){let r=i.clock;c(r)?(r.interval=o.interval??r.interval,r.currentTime=o.currentTime??r.currentTime,r.range=o.range??r.range,r.step=o.step??r.step,r.multiplier=o.multiplier??r.multiplier):i.clock={interval:o.interval,currentTime:o.currentTime,range:o.range,step:o.step,multiplier:o.multiplier}}}function WDe(e,t,n,i){let o=t.ellipse;if(!c(o))return;let r=ki(o.interval),a=e.ellipse;c(a)||(e.ellipse=a=new wy),$(Boolean,a,"show",o.show,r,i,n),$(Number,a,"semiMajorAxis",o.semiMajorAxis,r,i,n),$(Number,a,"semiMinorAxis",o.semiMinorAxis,r,i,n),$(Number,a,"height",o.height,r,i,n),$(Ge,a,"heightReference",o.heightReference,r,i,n),$(Number,a,"extrudedHeight",o.extrudedHeight,r,i,n),$(Ge,a,"extrudedHeightReference",o.extrudedHeightReference,r,i,n),$(hf,a,"rotation",o.rotation,r,i,n),$(hf,a,"stRotation",o.stRotation,r,i,n),$(Number,a,"granularity",o.granularity,r,i,n),$(Boolean,a,"fill",o.fill,r,i,n),ps(a,"material",o.material,r,i,n),$(Boolean,a,"outline",o.outline,r,i,n),$(F,a,"outlineColor",o.outlineColor,r,i,n),$(Number,a,"outlineWidth",o.outlineWidth,r,i,n),$(Number,a,"numberOfVerticalLines",o.numberOfVerticalLines,r,i,n),$(cn,a,"shadows",o.shadows,r,i,n),$(rt,a,"distanceDisplayCondition",o.distanceDisplayCondition,r,i,n),$(on,a,"classificationType",o.classificationType,r,i,n),$(Number,a,"zIndex",o.zIndex,r,i,n)}function JDe(e,t,n,i){let o=t.ellipsoid;if(!c(o))return;let r=ki(o.interval),a=e.ellipsoid;c(a)||(e.ellipsoid=a=new Dy),$(Boolean,a,"show",o.show,r,i,n),$(u,a,"radii",o.radii,r,i,n),$(u,a,"innerRadii",o.innerRadii,r,i,n),$(Number,a,"minimumClock",o.minimumClock,r,i,n),$(Number,a,"maximumClock",o.maximumClock,r,i,n),$(Number,a,"minimumCone",o.minimumCone,r,i,n),$(Number,a,"maximumCone",o.maximumCone,r,i,n),$(Ge,a,"heightReference",o.heightReference,r,i,n),$(Boolean,a,"fill",o.fill,r,i,n),ps(a,"material",o.material,r,i,n),$(Boolean,a,"outline",o.outline,r,i,n),$(F,a,"outlineColor",o.outlineColor,r,i,n),$(Number,a,"outlineWidth",o.outlineWidth,r,i,n),$(Number,a,"stackPartitions",o.stackPartitions,r,i,n),$(Number,a,"slicePartitions",o.slicePartitions,r,i,n),$(Number,a,"subdivisions",o.subdivisions,r,i,n),$(cn,a,"shadows",o.shadows,r,i,n),$(rt,a,"distanceDisplayCondition",o.distanceDisplayCondition,r,i,n)}function KDe(e,t,n,i){let o=t.label;if(!c(o))return;let r=ki(o.interval),a=e.label;c(a)||(e.label=a=new Qy),$(Boolean,a,"show",o.show,r,i,n),$(String,a,"text",o.text,r,i,n),$(String,a,"font",o.font,r,i,n),$(wo,a,"style",o.style,r,i,n),$(Number,a,"scale",o.scale,r,i,n),$(Boolean,a,"showBackground",o.showBackground,r,i,n),$(F,a,"backgroundColor",o.backgroundColor,r,i,n),$(U,a,"backgroundPadding",o.backgroundPadding,r,i,n),$(U,a,"pixelOffset",o.pixelOffset,r,i,n),$(u,a,"eyeOffset",o.eyeOffset,r,i,n),$(pi,a,"horizontalOrigin",o.horizontalOrigin,r,i,n),$(yn,a,"verticalOrigin",o.verticalOrigin,r,i,n),$(Ge,a,"heightReference",o.heightReference,r,i,n),$(F,a,"fillColor",o.fillColor,r,i,n),$(F,a,"outlineColor",o.outlineColor,r,i,n),$(Number,a,"outlineWidth",o.outlineWidth,r,i,n),$(Rt,a,"translucencyByDistance",o.translucencyByDistance,r,i,n),$(Rt,a,"pixelOffsetScaleByDistance",o.pixelOffsetScaleByDistance,r,i,n),$(Rt,a,"scaleByDistance",o.scaleByDistance,r,i,n),$(rt,a,"distanceDisplayCondition",o.distanceDisplayCondition,r,i,n),$(Number,a,"disableDepthTestDistance",o.disableDepthTestDistance,r,i,n)}function XDe(e,t,n,i){let o=t.model;if(!c(o))return;let r=ki(o.interval),a=e.model;c(a)||(e.model=a=new vy),$(Boolean,a,"show",o.show,r,i,n),$(CE.default,a,"uri",o.gltf,r,i,n),$(Number,a,"scale",o.scale,r,i,n),$(Number,a,"minimumPixelSize",o.minimumPixelSize,r,i,n),$(Number,a,"maximumScale",o.maximumScale,r,i,n),$(Boolean,a,"incrementallyLoadTextures",o.incrementallyLoadTextures,r,i,n),$(Boolean,a,"runAnimations",o.runAnimations,r,i,n),$(Boolean,a,"clampAnimations",o.clampAnimations,r,i,n),$(cn,a,"shadows",o.shadows,r,i,n),$(Ge,a,"heightReference",o.heightReference,r,i,n),$(F,a,"silhouetteColor",o.silhouetteColor,r,i,n),$(Number,a,"silhouetteSize",o.silhouetteSize,r,i,n),$(F,a,"color",o.color,r,i,n),$(ns,a,"colorBlendMode",o.colorBlendMode,r,i,n),$(Number,a,"colorBlendAmount",o.colorBlendAmount,r,i,n),$(rt,a,"distanceDisplayCondition",o.distanceDisplayCondition,r,i,n);let s,A,l=o.nodeTransformations;if(c(l))if(Array.isArray(l))for(s=0,A=l.length;s<A;++s)gW(a,l[s],r,i,n);else gW(a,l,r,i,n);let f=o.articulations;if(c(f))if(Array.isArray(f))for(s=0,A=f.length;s<A;++s)CW(a,f[s],r,i,n);else CW(a,f,r,i,n)}function gW(e,t,n,i,o){let r=ki(t.interval);c(n)&&(c(r)?r=nn.intersect(r,n,Bh):r=n);let a=e.nodeTransformations,s=Object.keys(t);for(let A=0,l=s.length;A<l;++A){let f=s[A];if(f==="interval")continue;let h=t[f];if(!c(h))continue;c(a)||(e.nodeTransformations=a=new Fs),a.hasProperty(f)||a.addProperty(f);let m=a[f];c(m)||(a[f]=m=new Ry),$(u,m,"translation",h.translation,r,i,o),$(qe,m,"rotation",h.rotation,r,i,o),$(u,m,"scale",h.scale,r,i,o)}}function CW(e,t,n,i,o){let r=ki(t.interval);c(n)&&(c(r)?r=nn.intersect(r,n,Bh):r=n);let a=e.articulations,s=Object.keys(t);for(let A=0,l=s.length;A<l;++A){let f=s[A];if(f==="interval")continue;let h=t[f];c(h)&&(c(a)||(e.articulations=a=new Fs),a.hasProperty(f)||a.addProperty(f),$(Number,a,f,h,r,i,o))}}function ZDe(e,t,n,i){let o=t.path;if(!c(o))return;let r=ki(o.interval),a=e.path;c(a)||(e.path=a=new My),$(Boolean,a,"show",o.show,r,i,n),$(Number,a,"leadTime",o.leadTime,r,i,n),$(Number,a,"trailTime",o.trailTime,r,i,n),$(Number,a,"width",o.width,r,i,n),$(Number,a,"resolution",o.resolution,r,i,n),ps(a,"material",o.material,r,i,n),$(rt,a,"distanceDisplayCondition",o.distanceDisplayCondition,r,i,n)}function $De(e,t,n,i){let o=t.point;if(!c(o))return;let r=ki(o.interval),a=e.point;c(a)||(e.point=a=new Oy),$(Boolean,a,"show",o.show,r,i,n),$(Number,a,"pixelSize",o.pixelSize,r,i,n),$(Ge,a,"heightReference",o.heightReference,r,i,n),$(F,a,"color",o.color,r,i,n),$(F,a,"outlineColor",o.outlineColor,r,i,n),$(Number,a,"outlineWidth",o.outlineWidth,r,i,n),$(Rt,a,"scaleByDistance",o.scaleByDistance,r,i,n),$(Rt,a,"translucencyByDistance",o.translucencyByDistance,r,i,n),$(rt,a,"distanceDisplayCondition",o.distanceDisplayCondition,r,i,n),$(Number,a,"disableDepthTestDistance",o.disableDepthTestDistance,r,i,n)}function gE(e){this.polygon=e,this._definitionChanged=new fe}Object.defineProperties(gE.prototype,{isConstant:{get:function(){let e=this.polygon._positions,t=this.polygon._holes;return(!c(e)||e.isConstant)&&(!c(t)||t.isConstant)}},definitionChanged:{get:function(){return this._definitionChanged}}});gE.prototype.getValue=function(e,t){let n;c(this.polygon._positions)&&(n=this.polygon._positions.getValue(e));let i;return c(this.polygon._holes)&&(i=this.polygon._holes.getValue(e),c(i)&&(i=i.map(function(o){return new Nd(o)}))),c(t)?(t.positions=n,t.holes=i,t):new Nd(n,i)};gE.prototype.equals=function(e){return this===e||e instanceof gE&&M.equals(this.polygon._positions,e.polygon._positions)&&M.equals(this.polygon._holes,e.polygon._holes)};function eQe(e,t,n,i){let o=t.polygon;if(!c(o))return;let r=ki(o.interval),a=e.polygon;c(a)||(e.polygon=a=new Ly),$(Boolean,a,"show",o.show,r,i,n),_E(a,"_positions",o.positions,n),kDe(a,"_holes",o.holes,n),(c(a._positions)||c(a._holes))&&(a.hierarchy=new gE(a)),$(Number,a,"height",o.height,r,i,n),$(Ge,a,"heightReference",o.heightReference,r,i,n),$(Number,a,"extrudedHeight",o.extrudedHeight,r,i,n),$(Ge,a,"extrudedHeightReference",o.extrudedHeightReference,r,i,n),$(hf,a,"stRotation",o.stRotation,r,i,n),$(Number,a,"granularity",o.granularity,r,i,n),$(Boolean,a,"fill",o.fill,r,i,n),ps(a,"material",o.material,r,i,n),$(Boolean,a,"outline",o.outline,r,i,n),$(F,a,"outlineColor",o.outlineColor,r,i,n),$(Number,a,"outlineWidth",o.outlineWidth,r,i,n),$(Boolean,a,"perPositionHeight",o.perPositionHeight,r,i,n),$(Boolean,a,"closeTop",o.closeTop,r,i,n),$(Boolean,a,"closeBottom",o.closeBottom,r,i,n),$(Yt,a,"arcType",o.arcType,r,i,n),$(cn,a,"shadows",o.shadows,r,i,n),$(rt,a,"distanceDisplayCondition",o.distanceDisplayCondition,r,i,n),$(on,a,"classificationType",o.classificationType,r,i,n),$(Number,a,"zIndex",o.zIndex,r,i,n)}function tQe(e){return e?Yt.GEODESIC:Yt.NONE}function nQe(e,t,n,i){let o=t.polyline;if(!c(o))return;let r=ki(o.interval),a=e.polyline;if(c(a)||(e.polyline=a=new Ny),$(Boolean,a,"show",o.show,r,i,n),_E(a,"positions",o.positions,n),$(Number,a,"width",o.width,r,i,n),$(Number,a,"granularity",o.granularity,r,i,n),ps(a,"material",o.material,r,i,n),ps(a,"depthFailMaterial",o.depthFailMaterial,r,i,n),$(Yt,a,"arcType",o.arcType,r,i,n),$(Boolean,a,"clampToGround",o.clampToGround,r,i,n),$(cn,a,"shadows",o.shadows,r,i,n),$(rt,a,"distanceDisplayCondition",o.distanceDisplayCondition,r,i,n),$(on,a,"classificationType",o.classificationType,r,i,n),$(Number,a,"zIndex",o.zIndex,r,i,n),c(o.followSurface)&&!c(o.arcType)){let s={};$(Boolean,s,"followSurface",o.followSurface,r,i,n),a.arcType=_De(s.followSurface,tQe)}}function iQe(e,t,n,i){let o=t.polylineVolume;if(!c(o))return;let r=ki(o.interval),a=e.polylineVolume;c(a)||(e.polylineVolume=a=new Fy),_E(a,"positions",o.positions,n),UDe(a,"shape",o.shape,n),$(Boolean,a,"show",o.show,r,i,n),$(Hn,a,"cornerType",o.cornerType,r,i,n),$(Boolean,a,"fill",o.fill,r,i,n),ps(a,"material",o.material,r,i,n),$(Boolean,a,"outline",o.outline,r,i,n),$(F,a,"outlineColor",o.outlineColor,r,i,n),$(Number,a,"outlineWidth",o.outlineWidth,r,i,n),$(Number,a,"granularity",o.granularity,r,i,n),$(cn,a,"shadows",o.shadows,r,i,n),$(rt,a,"distanceDisplayCondition",o.distanceDisplayCondition,r,i,n)}function oQe(e,t,n,i){let o=t.rectangle;if(!c(o))return;let r=ki(o.interval),a=e.rectangle;c(a)||(e.rectangle=a=new ky),$(Boolean,a,"show",o.show,r,i,n),$(ce,a,"coordinates",o.coordinates,r,i,n),$(Number,a,"height",o.height,r,i,n),$(Ge,a,"heightReference",o.heightReference,r,i,n),$(Number,a,"extrudedHeight",o.extrudedHeight,r,i,n),$(Ge,a,"extrudedHeightReference",o.extrudedHeightReference,r,i,n),$(hf,a,"rotation",o.rotation,r,i,n),$(hf,a,"stRotation",o.stRotation,r,i,n),$(Number,a,"granularity",o.granularity,r,i,n),$(Boolean,a,"fill",o.fill,r,i,n),ps(a,"material",o.material,r,i,n),$(Boolean,a,"outline",o.outline,r,i,n),$(F,a,"outlineColor",o.outlineColor,r,i,n),$(Number,a,"outlineWidth",o.outlineWidth,r,i,n),$(cn,a,"shadows",o.shadows,r,i,n),$(rt,a,"distanceDisplayCondition",o.distanceDisplayCondition,r,i,n),$(on,a,"classificationType",o.classificationType,r,i,n),$(Number,a,"zIndex",o.zIndex,r,i,n)}function rQe(e,t,n,i){let o=t.tileset;if(!c(o))return;let r=ki(o.interval),a=e.tileset;c(a)||(e.tileset=a=new Py),$(Boolean,a,"show",o.show,r,i,n),$(CE.default,a,"uri",o.uri,r,i,n),$(Number,a,"maximumScreenSpaceError",o.maximumScreenSpaceError,r,i,n)}function aQe(e,t,n,i){let o=t.wall;if(!c(o))return;let r=ki(o.interval),a=e.wall;c(a)||(e.wall=a=new Uy),$(Boolean,a,"show",o.show,r,i,n),_E(a,"positions",o.positions,n),hW(a,"minimumHeights",o.minimumHeights,n),hW(a,"maximumHeights",o.maximumHeights,n),$(Number,a,"granularity",o.granularity,r,i,n),$(Boolean,a,"fill",o.fill,r,i,n),ps(a,"material",o.material,r,i,n),$(Boolean,a,"outline",o.outline,r,i,n),$(F,a,"outlineColor",o.outlineColor,r,i,n),$(Number,a,"outlineWidth",o.outlineWidth,r,i,n),$(cn,a,"shadows",o.shadows,r,i,n),$(rt,a,"distanceDisplayCondition",o.distanceDisplayCondition,r,i,n)}function _W(e,t,n,i,o){let r=e.id;if(c(r)||(r=oo()),GR=r,!c(o._version)&&r!=="document")throw new oe("The first CZML packet is required to be the document object.");if(e.delete===!0)t.removeById(r);else if(r==="document")qDe(e,o);else{let a=t.getOrCreateEntity(r),s=e.parent;c(s)&&(a.parent=t.getOrCreateEntity(s));for(let A=n.length-1;A>-1;A--)n[A](a,e,t,i)}GR=void 0}function sQe(e){let t,n=e._documentPacket.clock;if(!c(n)){if(!c(e._clock)){let o=e._entityCollection.computeAvailability();if(!o.start.equals(Re.MINIMUM_VALUE)){let r=o.start,a=o.stop,s=X.secondsDifference(a,r),A=Math.round(s/120);return t=new DR,t.startTime=X.clone(r),t.stopTime=X.clone(a),t.clockRange=ff.LOOP_STOP,t.multiplier=A,t.currentTime=X.clone(r),t.clockStep=Gr.SYSTEM_CLOCK_MULTIPLIER,e._clock=t,!0}}return!1}c(e._clock)?t=e._clock.clone():(t=new DR,t.startTime=Re.MINIMUM_VALUE.clone(),t.stopTime=Re.MAXIMUM_VALUE.clone(),t.currentTime=Re.MINIMUM_VALUE.clone(),t.clockRange=ff.LOOP_STOP,t.clockStep=Gr.SYSTEM_CLOCK_MULTIPLIER,t.multiplier=1);let i=ki(n.interval);return c(i)&&(t.startTime=i.start,t.stopTime=i.stop),c(n.currentTime)&&(t.currentTime=X.fromIso8601(n.currentTime)),c(n.range)&&(t.clockRange=ff[n.range]??ff.LOOP_STOP),c(n.step)&&(t.clockStep=Gr[n.step]??Gr.SYSTEM_CLOCK_MULTIPLIER),c(n.multiplier)&&(t.multiplier=n.multiplier),t.equals(e._clock)?!1:(e._clock=t.clone(e._clock),!0)}function bW(e,t,n,i){n=n??k.EMPTY_OBJECT;let o=t,r=n.sourceUri,a=n.credit;if(typeof a=="string"&&(a=new fn(a)),e._credit=a,typeof t=="string"||t instanceof ke){t=ke.createIfNeeded(t),o=t.fetchJson(),r=r??t.clone();let s=e._resourceCredits,A=t.credits;if(c(A)){let l=A.length;for(let f=0;f<l;f++)s.push(A[f])}}return r=ke.createIfNeeded(r),_h.setLoading(e,!0),Promise.resolve(o).then(function(s){return cQe(e,s,r,i)}).catch(function(s){return _h.setLoading(e,!1),e._error.raiseEvent(e,s),console.log(s),Promise.reject(s)})}function cQe(e,t,n,i){_h.setLoading(e,!0);let o=e._entityCollection;i&&(e._version=void 0,e._documentPacket=new BW,o.removeAll()),Io._processCzml(t,o,n,void 0,e);let r=sQe(e),a=e._documentPacket;return c(a.name)&&e._name!==a.name?(e._name=a.name,r=!0):!c(e._name)&&c(n)&&(e._name=Hq(n.getUrlComponent()),r=!0),_h.setLoading(e,!1),r&&e._changed.raiseEvent(e),e}function BW(){this.name=void 0,this.clock=void 0}function Io(e){this._name=e,this._changed=new fe,this._error=new fe,this._isLoading=!1,this._loading=new fe,this._clock=void 0,this._documentPacket=new BW,this._version=void 0,this._entityCollection=new Y0(this),this._entityCluster=new iB,this._credit=void 0,this._resourceCredits=[]}Io.load=function(e,t){return new Io().load(e,t)};Object.defineProperties(Io.prototype,{name:{get:function(){return this._name}},clock:{get:function(){return this._clock}},entities:{get:function(){return this._entityCollection}},isLoading:{get:function(){return this._isLoading}},changedEvent:{get:function(){return this._changed}},errorEvent:{get:function(){return this._error}},loadingEvent:{get:function(){return this._loading}},show:{get:function(){return this._entityCollection.show},set:function(e){this._entityCollection.show=e}},clustering:{get:function(){return this._entityCluster},set:function(e){this._entityCluster=e}},credit:{get:function(){return this._credit}}});Io.updaters=[HDe,VDe,jDe,YDe,WDe,JDe,KDe,XDe,QDe,RDe,ZDe,$De,eQe,nQe,iQe,ODe,oQe,vDe,rQe,PDe,aQe,MDe,GDe];Io.registerUpdater=function(e){Io.updaters.includes(e)||Io.updaters.push(e)};Io.unregisterUpdater=function(e){if(Io.updaters.includes(e)){let t=Io.updaters.indexOf(e);Io.updaters.splice(t,1)}};Io.prototype.process=function(e,t){return bW(this,e,t,!1)};Io.prototype.load=function(e,t){return bW(this,e,t,!0)};Io.prototype.update=function(e){return!0};Io.processPacketData=$;Io.processPositionPacketData=yW;Io.processMaterialPacketData=ps;Io._processCzml=function(e,t,n,i,o){if(i=i??Io.updaters,Array.isArray(e))for(let r=0,a=e.length;r<a;++r)_W(e[r],t,i,n,o);else _W(e,t,i,n,o)};var no=Io;function ar(e){e=e??k.EMPTY_OBJECT,this._primitives=[],this._guid=oo(),this._primitiveAdded=new fe,this._primitiveRemoved=new fe,this._zIndex=void 0,this.show=e.show??!0,this.destroyPrimitives=e.destroyPrimitives??!0,this._countReferences=e.countReferences??!1}Object.defineProperties(ar.prototype,{length:{get:function(){return this._primitives.length}},primitiveAdded:{get:function(){return this._primitiveAdded}},primitiveRemoved:{get:function(){return this._primitiveRemoved}}});ar.prototype.add=function(e,t){let n=c(t),i=e._external=e._external||{},o=i._composites=i._composites||{};return o[this._guid]={collection:this},n?this._primitives.splice(t,0,e):this._primitives.push(e),this._countReferences&&(c(i._referenceCount)?++i._referenceCount:i._referenceCount=1),this._primitiveAdded.raiseEvent(e),e};ar.prototype.remove=function(e){if(this.contains(e)){let t=this._primitives.indexOf(e);if(t!==-1)return this._primitives.splice(t,1),delete e._external._composites[this._guid],this._countReferences&&e._external._referenceCount--,this.destroyPrimitives&&(!this._countReferences||e._external._referenceCount<=0)&&e.destroy(),this._primitiveRemoved.raiseEvent(e),!0}return!1};ar.prototype.removeAndDestroy=function(e){let t=this.remove(e);return t&&!this.destroyPrimitives&&e.destroy(),t};ar.prototype.removeAll=function(){let e=this._primitives,t=e.length;for(let n=0;n<t;++n){let i=e[n];delete i._external._composites[this._guid],this._countReferences&&i._external._referenceCount--,this.destroyPrimitives&&(!this._countReferences||i._external._referenceCount<=0)&&i.destroy(),this._primitiveRemoved.raiseEvent(i)}this._primitives=[]};ar.prototype.contains=function(e){return!!(c(e)&&e._external&&e._external._composites&&e._external._composites[this._guid])};function pB(e,t){return e._primitives.indexOf(t)}ar.prototype.raise=function(e){if(c(e)){let t=pB(this,e),n=this._primitives;if(t!==n.length-1){let i=n[t];n[t]=n[t+1],n[t+1]=i}}};ar.prototype.raiseToTop=function(e){if(c(e)){let t=pB(this,e),n=this._primitives;t!==n.length-1&&(n.splice(t,1),n.push(e))}};ar.prototype.lower=function(e){if(c(e)){let t=pB(this,e),n=this._primitives;if(t!==0){let i=n[t];n[t]=n[t-1],n[t-1]=i}}};ar.prototype.lowerToBottom=function(e){if(c(e)){let t=pB(this,e),n=this._primitives;t!==0&&(n.splice(t,1),n.unshift(e))}};ar.prototype.get=function(e){return this._primitives[e]};ar.prototype.update=function(e){if(!this.show)return;let t=this._primitives;for(let n=0;n<t.length;++n)t[n].update(e)};ar.prototype.prePassesUpdate=function(e){let t=this._primitives;for(let n=0;n<t.length;++n){let i=t[n];c(i.prePassesUpdate)&&i.prePassesUpdate(e)}};ar.prototype.updateForPass=function(e,t){let n=this._primitives;for(let i=0;i<n.length;++i){let o=n[i];c(o.updateForPass)&&o.updateForPass(e,t)}};ar.prototype.postPassesUpdate=function(e){let t=this._primitives;for(let n=0;n<t.length;++n){let i=t[n];c(i.postPassesUpdate)&&i.postPassesUpdate(e)}};ar.prototype.isDestroyed=function(){return!1};ar.prototype.destroy=function(){return this.removeAll(),pe(this)};var Jp=ar;function YA(){this._length=0,this._collections={},this._collectionsArray=[],this.show=!0}Object.defineProperties(YA.prototype,{length:{get:function(){return this._length}}});YA.prototype.add=function(e,t){t=t??0;let n=this._collections[t];if(!c(n)){n=new Jp({destroyPrimitives:!1}),n._zIndex=t,this._collections[t]=n;let i=this._collectionsArray,o=0;for(;o<i.length&&i[o]._zIndex<t;)o++;i.splice(o,0,n)}return n.add(e),this._length++,e._zIndex=t,e};YA.prototype.set=function(e,t){return t===e._zIndex||(this.remove(e,!0),this.add(e,t)),e};YA.prototype.remove=function(e,t){if(this.contains(e)){let n=e._zIndex,i=this._collections[n],o;return t?o=i.remove(e):o=i.removeAndDestroy(e),o&&this._length--,i.length===0&&(this._collectionsArray.splice(this._collectionsArray.indexOf(i),1),this._collections[n]=void 0,i.destroy()),o}return!1};YA.prototype.removeAll=function(){let e=this._collectionsArray;for(let t=0;t<e.length;t++){let n=e[t];n.destroyPrimitives=!0,n.destroy()}this._collections={},this._collectionsArray=[],this._length=0};YA.prototype.contains=function(e){if(!c(e))return!1;let t=this._collections[e._zIndex];return c(t)&&t.contains(e)};YA.prototype.update=function(e){if(!this.show)return;let t=this._collectionsArray;for(let n=0;n<t.length;n++)t[n].update(e)};YA.prototype.isDestroyed=function(){return!1};YA.prototype.destroy=function(){return this.removeAll(),pe(this)};var xW=YA;function Kp(e,t){this._primitives=e,this._orderedGroundPrimitives=t,this._dynamicUpdaters=new ct}Kp.prototype.add=function(e,t){this._dynamicUpdaters.set(t.id,t.createDynamicUpdater(this._primitives,this._orderedGroundPrimitives))};Kp.prototype.remove=function(e){let t=e.id,n=this._dynamicUpdaters.get(t);c(n)&&(this._dynamicUpdaters.remove(t),n.destroy())};Kp.prototype.update=function(e){let t=this._dynamicUpdaters.values;for(let n=0,i=t.length;n<i;n++)t[n].update(e);return!0};Kp.prototype.removeAllPrimitives=function(){let e=this._dynamicUpdaters.values;for(let t=0,n=e.length;t<n;t++)e[t].destroy();this._dynamicUpdaters.removeAll()};Kp.prototype.getBoundingSphere=function(e,t){return e=this._dynamicUpdaters.get(e.id),c(e)&&c(e.getBoundingSphere)?e.getBoundingSphere(t):He.FAILED};var gB=Kp;var jR={},CB=new u,TW=new u,SW=new qe,wW=new J;function Xp(e,t,n,i,o,r,a,s,A,l){let f=e+t;u.multiplyByScalar(i,Math.cos(f),CB),u.multiplyByScalar(n,Math.sin(f),TW),u.add(CB,TW,CB);let h=Math.cos(e);h=h*h;let m=Math.sin(e);m=m*m;let g=r/Math.sqrt(a*h+o*m)/s;return qe.fromAxisAngle(CB,g,SW),J.fromQuaternion(SW,wW),J.multiplyByVector(wW,A,l),u.normalize(l,l),u.multiplyByScalar(l,s,l),l}var DW=new u,QW=new u,VR=new u,AQe=new u;jR.raisePositionsToHeight=function(e,t,n){let i=t.ellipsoid,o=t.height,r=t.extrudedHeight,a=n?e.length/3*2:e.length/3,s=new Float64Array(a*3),A=e.length,l=n?A:0;for(let f=0;f<A;f+=3){let h=f+1,m=f+2,p=u.fromArray(e,f,DW);i.scaleToGeodeticSurface(p,p);let g=u.clone(p,QW),C=i.geodeticSurfaceNormal(p,AQe),_=u.multiplyByScalar(C,o,VR);u.add(p,_,p),n&&(u.multiplyByScalar(C,r,_),u.add(g,_,g),s[f+l]=g.x,s[h+l]=g.y,s[m+l]=g.z),s[f]=p.x,s[h]=p.y,s[m]=p.z}return s};var lQe=new u,fQe=new u,uQe=new u;jR.computeEllipsePositions=function(e,t,n){let i=e.semiMinorAxis,o=e.semiMajorAxis,r=e.rotation,a=e.center,s=e.granularity*8,A=i*i,l=o*o,f=o*i,h=u.magnitude(a),m=u.normalize(a,lQe),p=u.cross(u.UNIT_Z,a,fQe);p=u.normalize(p,p);let g=u.cross(m,p,uQe),C=1+Math.ceil(w.PI_OVER_TWO/s),_=w.PI_OVER_TWO/(C-1),E=w.PI_OVER_TWO-C*_;E<0&&(C-=Math.ceil(Math.abs(E)/_));let I=2*(C*(C+2)),y=t?new Array(I*3):void 0,b=0,x=DW,S=QW,P=C*4*3,D=P-1,Q=0,v=n?new Array(P):void 0,d,B,T,R,L;for(E=w.PI_OVER_TWO,x=Xp(E,r,g,p,A,f,l,h,m,x),t&&(y[b++]=x.x,y[b++]=x.y,y[b++]=x.z),n&&(v[D--]=x.z,v[D--]=x.y,v[D--]=x.x),E=w.PI_OVER_TWO-_,d=1;d<C+1;++d){if(x=Xp(E,r,g,p,A,f,l,h,m,x),S=Xp(Math.PI-E,r,g,p,A,f,l,h,m,S),t){for(y[b++]=x.x,y[b++]=x.y,y[b++]=x.z,T=2*d+2,B=1;B<T-1;++B)R=B/(T-1),L=u.lerp(x,S,R,VR),y[b++]=L.x,y[b++]=L.y,y[b++]=L.z;y[b++]=S.x,y[b++]=S.y,y[b++]=S.z}n&&(v[D--]=x.z,v[D--]=x.y,v[D--]=x.x,v[Q++]=S.x,v[Q++]=S.y,v[Q++]=S.z),E=w.PI_OVER_TWO-(d+1)*_}for(d=C;d>1;--d){if(E=w.PI_OVER_TWO-(d-1)*_,x=Xp(-E,r,g,p,A,f,l,h,m,x),S=Xp(E+Math.PI,r,g,p,A,f,l,h,m,S),t){for(y[b++]=x.x,y[b++]=x.y,y[b++]=x.z,T=2*(d-1)+2,B=1;B<T-1;++B)R=B/(T-1),L=u.lerp(x,S,R,VR),y[b++]=L.x,y[b++]=L.y,y[b++]=L.z;y[b++]=S.x,y[b++]=S.y,y[b++]=S.z}n&&(v[D--]=x.z,v[D--]=x.y,v[D--]=x.x,v[Q++]=S.x,v[Q++]=S.y,v[Q++]=S.z)}E=w.PI_OVER_TWO,x=Xp(-E,r,g,p,A,f,l,h,m,x);let G={};return t&&(y[b++]=x.x,y[b++]=x.y,y[b++]=x.z,G.positions=y,G.numPts=C),n&&(v[D--]=x.z,v[D--]=x.y,v[D--]=x.x,G.outerPositions=v),G};var Yc=jR;var Zp=new u,YR=new u,qR=new u,RW=new u,Ro=new U,vW=new J,dQe=new J,WR=new qe,PW=new u,MW=new u,OW=new u,IB=new ae,LW=new u,NW=new U,FW=new U;function kW(e,t,n){let i=t.vertexFormat,o=t.center,r=t.semiMajorAxis,a=t.semiMinorAxis,s=t.ellipsoid,A=t.stRotation,l=n?e.length/3*2:e.length/3,f=t.shadowVolume,h=i.st?new Float32Array(l*2):void 0,m=i.normal?new Float32Array(l*3):void 0,p=i.tangent?new Float32Array(l*3):void 0,g=i.bitangent?new Float32Array(l*3):void 0,C=f?new Float32Array(l*3):void 0,_=0,E=PW,I=MW,y=OW,b=new Ai(s),x=b.project(s.cartesianToCartographic(o,IB),LW),S=s.scaleToGeodeticSurface(o,Zp);s.geodeticSurfaceNormal(S,S);let P=vW,D=dQe;if(A!==0){let L=qe.fromAxisAngle(S,A,WR);P=J.fromQuaternion(L,P),L=qe.fromAxisAngle(S,-A,WR),D=J.fromQuaternion(L,D)}else P=J.clone(J.IDENTITY,P),D=J.clone(J.IDENTITY,D);let Q=U.fromElements(Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,NW),v=U.fromElements(Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,FW),d=e.length,B=n?d:0,T=B/3*2;for(let L=0;L<d;L+=3){let G=L+1,q=L+2,z=u.fromArray(e,L,Zp);if(i.st){let K=J.multiplyByVector(P,z,YR),ie=b.project(s.cartesianToCartographic(K,IB),qR);u.subtract(ie,x,ie),Ro.x=(ie.x+r)/(2*r),Ro.y=(ie.y+a)/(2*a),Q.x=Math.min(Ro.x,Q.x),Q.y=Math.min(Ro.y,Q.y),v.x=Math.max(Ro.x,v.x),v.y=Math.max(Ro.y,v.y),n&&(h[_+T]=Ro.x,h[_+1+T]=Ro.y),h[_++]=Ro.x,h[_++]=Ro.y}(i.normal||i.tangent||i.bitangent||f)&&(E=s.geodeticSurfaceNormal(z,E),f&&(C[L+B]=-E.x,C[G+B]=-E.y,C[q+B]=-E.z),(i.normal||i.tangent||i.bitangent)&&((i.tangent||i.bitangent)&&(I=u.normalize(u.cross(u.UNIT_Z,E,I),I),J.multiplyByVector(D,I,I)),i.normal&&(m[L]=E.x,m[G]=E.y,m[q]=E.z,n&&(m[L+B]=-E.x,m[G+B]=-E.y,m[q+B]=-E.z)),i.tangent&&(p[L]=I.x,p[G]=I.y,p[q]=I.z,n&&(p[L+B]=-I.x,p[G+B]=-I.y,p[q+B]=-I.z)),i.bitangent&&(y=u.normalize(u.cross(E,I,y),y),g[L]=y.x,g[G]=y.y,g[q]=y.z,n&&(g[L+B]=y.x,g[G+B]=y.y,g[q+B]=y.z))))}if(i.st){d=h.length;for(let L=0;L<d;L+=2)h[L]=(h[L]-Q.x)/(v.x-Q.x),h[L+1]=(h[L+1]-Q.y)/(v.y-Q.y)}let R=new Mt;if(i.position){let L=Yc.raisePositionsToHeight(e,t,n);R.position=new ue({componentDatatype:N.DOUBLE,componentsPerAttribute:3,values:L})}if(i.st&&(R.st=new ue({componentDatatype:N.FLOAT,componentsPerAttribute:2,values:h})),i.normal&&(R.normal=new ue({componentDatatype:N.FLOAT,componentsPerAttribute:3,values:m})),i.tangent&&(R.tangent=new ue({componentDatatype:N.FLOAT,componentsPerAttribute:3,values:p})),i.bitangent&&(R.bitangent=new ue({componentDatatype:N.FLOAT,componentsPerAttribute:3,values:g})),f&&(R.extrudeDirection=new ue({componentDatatype:N.FLOAT,componentsPerAttribute:3,values:C})),n&&c(t.offsetAttribute)){let L=new Uint8Array(l);if(t.offsetAttribute===xt.TOP)L=L.fill(1,0,l/2);else{let G=t.offsetAttribute===xt.NONE?0:1;L=L.fill(G)}R.applyOffset=new ue({componentDatatype:N.UNSIGNED_BYTE,componentsPerAttribute:1,values:L})}return R}function UW(e){let t=new Array(12*(e*(e+1))-6),n=0,i,o,r,a,s;for(i=0,r=1,a=0;a<3;a++)t[n++]=r++,t[n++]=i,t[n++]=r;for(a=2;a<e+1;++a){for(r=a*(a+1)-1,i=(a-1)*a-1,t[n++]=r++,t[n++]=i,t[n++]=r,o=2*a,s=0;s<o-1;++s)t[n++]=r,t[n++]=i++,t[n++]=i,t[n++]=r++,t[n++]=i,t[n++]=r;t[n++]=r++,t[n++]=i,t[n++]=r}for(o=e*2,++r,++i,a=0;a<o-1;++a)t[n++]=r,t[n++]=i++,t[n++]=i,t[n++]=r++,t[n++]=i,t[n++]=r;for(t[n++]=r,t[n++]=i++,t[n++]=i,t[n++]=r++,t[n++]=i++,t[n++]=i,++i,a=e-1;a>1;--a){for(t[n++]=i++,t[n++]=i,t[n++]=r,o=2*a,s=0;s<o-1;++s)t[n++]=r,t[n++]=i++,t[n++]=i,t[n++]=r++,t[n++]=i,t[n++]=r;t[n++]=i++,t[n++]=i++,t[n++]=r++}for(a=0;a<3;a++)t[n++]=i++,t[n++]=i,t[n++]=r;return t}var xh=new u;function hQe(e){let t=e.center;xh=u.multiplyByScalar(e.ellipsoid.geodeticSurfaceNormal(t,xh),e.height,xh),xh=u.add(t,xh,xh);let n=new ee(xh,e.semiMajorAxis),i=Yc.computeEllipsePositions(e,!0,!1),o=i.positions,r=i.numPts,a=kW(o,e,!1),s=UW(r);return s=Be.createTypedArray(o.length/3,s),{boundingSphere:n,attributes:a,indices:s}}function mQe(e,t){let n=t.vertexFormat,i=t.center,o=t.semiMajorAxis,r=t.semiMinorAxis,a=t.ellipsoid,s=t.height,A=t.extrudedHeight,l=t.stRotation,f=e.length/3*2,h=new Float64Array(f*3),m=n.st?new Float32Array(f*2):void 0,p=n.normal?new Float32Array(f*3):void 0,g=n.tangent?new Float32Array(f*3):void 0,C=n.bitangent?new Float32Array(f*3):void 0,_=t.shadowVolume,E=_?new Float32Array(f*3):void 0,I=0,y=PW,b=MW,x=OW,S=new Ai(a),P=S.project(a.cartesianToCartographic(i,IB),LW),D=a.scaleToGeodeticSurface(i,Zp);a.geodeticSurfaceNormal(D,D);let Q=qe.fromAxisAngle(D,l,WR),v=J.fromQuaternion(Q,vW),d=U.fromElements(Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,NW),B=U.fromElements(Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,FW),T=e.length,R=T/3*2;for(let G=0;G<T;G+=3){let q=G+1,z=G+2,K=u.fromArray(e,G,Zp),ie;if(n.st){let de=J.multiplyByVector(v,K,YR),he=S.project(a.cartesianToCartographic(de,IB),qR);u.subtract(he,P,he),Ro.x=(he.x+o)/(2*o),Ro.y=(he.y+r)/(2*r),d.x=Math.min(Ro.x,d.x),d.y=Math.min(Ro.y,d.y),B.x=Math.max(Ro.x,B.x),B.y=Math.max(Ro.y,B.y),m[I+R]=Ro.x,m[I+1+R]=Ro.y,m[I++]=Ro.x,m[I++]=Ro.y}K=a.scaleToGeodeticSurface(K,K),ie=u.clone(K,YR),y=a.geodeticSurfaceNormal(K,y),_&&(E[G+T]=-y.x,E[q+T]=-y.y,E[z+T]=-y.z);let le=u.multiplyByScalar(y,s,RW);if(K=u.add(K,le,K),le=u.multiplyByScalar(y,A,le),ie=u.add(ie,le,ie),n.position&&(h[G+T]=ie.x,h[q+T]=ie.y,h[z+T]=ie.z,h[G]=K.x,h[q]=K.y,h[z]=K.z),n.normal||n.tangent||n.bitangent){x=u.clone(y,x);let de=u.fromArray(e,(G+3)%T,RW);u.subtract(de,K,de);let he=u.subtract(ie,K,qR);y=u.normalize(u.cross(he,de,y),y),n.normal&&(p[G]=y.x,p[q]=y.y,p[z]=y.z,p[G+T]=y.x,p[q+T]=y.y,p[z+T]=y.z),n.tangent&&(b=u.normalize(u.cross(x,y,b),b),g[G]=b.x,g[q]=b.y,g[z]=b.z,g[G+T]=b.x,g[G+1+T]=b.y,g[G+2+T]=b.z),n.bitangent&&(C[G]=x.x,C[q]=x.y,C[z]=x.z,C[G+T]=x.x,C[q+T]=x.y,C[z+T]=x.z)}}if(n.st){T=m.length;for(let G=0;G<T;G+=2)m[G]=(m[G]-d.x)/(B.x-d.x),m[G+1]=(m[G+1]-d.y)/(B.y-d.y)}let L=new Mt;if(n.position&&(L.position=new ue({componentDatatype:N.DOUBLE,componentsPerAttribute:3,values:h})),n.st&&(L.st=new ue({componentDatatype:N.FLOAT,componentsPerAttribute:2,values:m})),n.normal&&(L.normal=new ue({componentDatatype:N.FLOAT,componentsPerAttribute:3,values:p})),n.tangent&&(L.tangent=new ue({componentDatatype:N.FLOAT,componentsPerAttribute:3,values:g})),n.bitangent&&(L.bitangent=new ue({componentDatatype:N.FLOAT,componentsPerAttribute:3,values:C})),_&&(L.extrudeDirection=new ue({componentDatatype:N.FLOAT,componentsPerAttribute:3,values:E})),c(t.offsetAttribute)){let G=new Uint8Array(f);if(t.offsetAttribute===xt.TOP)G=G.fill(1,0,f/2);else{let q=t.offsetAttribute===xt.NONE?0:1;G=G.fill(q)}L.applyOffset=new ue({componentDatatype:N.UNSIGNED_BYTE,componentsPerAttribute:1,values:G})}return L}function pQe(e){let t=e.length/3,n=Be.createTypedArray(t,t*6),i=0;for(let o=0;o<t;o++){let r=o,a=o+t,s=(r+1)%t,A=s+t;n[i++]=r,n[i++]=a,n[i++]=s,n[i++]=s,n[i++]=a,n[i++]=A}return n}var _B=new ee,EB=new ee;function gQe(e){let t=e.center,n=e.ellipsoid,i=e.semiMajorAxis,o=u.multiplyByScalar(n.geodeticSurfaceNormal(t,Zp),e.height,Zp);_B.center=u.add(t,o,_B.center),_B.radius=i,o=u.multiplyByScalar(n.geodeticSurfaceNormal(t,o),e.extrudedHeight,o),EB.center=u.add(t,o,EB.center),EB.radius=i;let r=Yc.computeEllipsePositions(e,!0,!0),a=r.positions,s=r.numPts,A=r.outerPositions,l=ee.union(_B,EB),f=kW(a,e,!0),h=UW(s),m=h.length;h.length=m*2;let p=a.length/3;for(let b=0;b<m;b+=3)h[b+m]=h[b+2]+p,h[b+1+m]=h[b+1]+p,h[b+2+m]=h[b]+p;let g=Be.createTypedArray(p*2/3,h),C=new ze({attributes:f,indices:g,primitiveType:Ce.TRIANGLES}),_=mQe(A,e);h=pQe(A);let E=Be.createTypedArray(A.length*2/3,h),I=new ze({attributes:_,indices:E,primitiveType:Ce.TRIANGLES}),y=Mn.combineInstances([new gt({geometry:C}),new gt({geometry:I})]);return{boundingSphere:l,attributes:y[0].attributes,indices:y[0].indices}}function GW(e,t,n,i,o,r,a){let A=Yc.computeEllipsePositions({center:e,semiMajorAxis:t,semiMinorAxis:n,rotation:i,granularity:o},!1,!0).outerPositions,l=A.length/3,f=new Array(l);for(let m=0;m<l;++m)f[m]=u.fromArray(A,m*3);let h=ce.fromCartesianArray(f,r,a);return h.width>w.PI&&(h.north=h.north>0?w.PI_OVER_TWO-w.EPSILON7:h.north,h.south=h.south<0?w.EPSILON7-w.PI_OVER_TWO:h.south,h.east=w.PI,h.west=-w.PI),h}function WA(e){e=e??k.EMPTY_OBJECT;let t=e.center,n=e.ellipsoid??Z.default,i=e.semiMajorAxis,o=e.semiMinorAxis,r=e.granularity??w.RADIANS_PER_DEGREE,a=e.vertexFormat??ge.DEFAULT,s=e.height??0,A=e.extrudedHeight??s;this._center=u.clone(t),this._semiMajorAxis=i,this._semiMinorAxis=o,this._ellipsoid=Z.clone(n),this._rotation=e.rotation??0,this._stRotation=e.stRotation??0,this._height=Math.max(A,s),this._granularity=r,this._vertexFormat=ge.clone(a),this._extrudedHeight=Math.min(A,s),this._shadowVolume=e.shadowVolume??!1,this._workerName="createEllipseGeometry",this._offsetAttribute=e.offsetAttribute,this._rectangle=void 0,this._textureCoordinateRotationPoints=void 0}WA.packedLength=u.packedLength+Z.packedLength+ge.packedLength+9;WA.pack=function(e,t,n){return n=n??0,u.pack(e._center,t,n),n+=u.packedLength,Z.pack(e._ellipsoid,t,n),n+=Z.packedLength,ge.pack(e._vertexFormat,t,n),n+=ge.packedLength,t[n++]=e._semiMajorAxis,t[n++]=e._semiMinorAxis,t[n++]=e._rotation,t[n++]=e._stRotation,t[n++]=e._height,t[n++]=e._granularity,t[n++]=e._extrudedHeight,t[n++]=e._shadowVolume?1:0,t[n]=e._offsetAttribute??-1,t};var zW=new u,HW=new Z,VW=new ge,qA={center:zW,ellipsoid:HW,vertexFormat:VW,semiMajorAxis:void 0,semiMinorAxis:void 0,rotation:void 0,stRotation:void 0,height:void 0,granularity:void 0,extrudedHeight:void 0,shadowVolume:void 0,offsetAttribute:void 0};WA.unpack=function(e,t,n){t=t??0;let i=u.unpack(e,t,zW);t+=u.packedLength;let o=Z.unpack(e,t,HW);t+=Z.packedLength;let r=ge.unpack(e,t,VW);t+=ge.packedLength;let a=e[t++],s=e[t++],A=e[t++],l=e[t++],f=e[t++],h=e[t++],m=e[t++],p=e[t++]===1,g=e[t];return c(n)?(n._center=u.clone(i,n._center),n._ellipsoid=Z.clone(o,n._ellipsoid),n._vertexFormat=ge.clone(r,n._vertexFormat),n._semiMajorAxis=a,n._semiMinorAxis=s,n._rotation=A,n._stRotation=l,n._height=f,n._granularity=h,n._extrudedHeight=m,n._shadowVolume=p,n._offsetAttribute=g===-1?void 0:g,n):(qA.height=f,qA.extrudedHeight=m,qA.granularity=h,qA.stRotation=l,qA.rotation=A,qA.semiMajorAxis=a,qA.semiMinorAxis=s,qA.shadowVolume=p,qA.offsetAttribute=g===-1?void 0:g,new WA(qA))};WA.computeRectangle=function(e,t){e=e??k.EMPTY_OBJECT;let n=e.center,i=e.ellipsoid??Z.default,o=e.semiMajorAxis,r=e.semiMinorAxis,a=e.granularity??w.RADIANS_PER_DEGREE,s=e.rotation??0;return GW(n,o,r,s,a,i,t)};WA.createGeometry=function(e){if(e._semiMajorAxis<=0||e._semiMinorAxis<=0)return;let t=e._height,n=e._extrudedHeight,i=!w.equalsEpsilon(t,n,0,w.EPSILON2);e._center=e._ellipsoid.scaleToGeodeticSurface(e._center,e._center);let o={center:e._center,semiMajorAxis:e._semiMajorAxis,semiMinorAxis:e._semiMinorAxis,ellipsoid:e._ellipsoid,rotation:e._rotation,height:t,granularity:e._granularity,vertexFormat:e._vertexFormat,stRotation:e._stRotation},r;if(i)o.extrudedHeight=n,o.shadowVolume=e._shadowVolume,o.offsetAttribute=e._offsetAttribute,r=gQe(o);else if(r=hQe(o),c(e._offsetAttribute)){let a=r.attributes.position.values.length,s=e._offsetAttribute===xt.NONE?0:1,A=new Uint8Array(a/3).fill(s);r.attributes.applyOffset=new ue({componentDatatype:N.UNSIGNED_BYTE,componentsPerAttribute:1,values:A})}return new ze({attributes:r.attributes,indices:r.indices,primitiveType:Ce.TRIANGLES,boundingSphere:r.boundingSphere,offsetAttribute:e._offsetAttribute})};WA.createShadowVolume=function(e,t,n){let i=e._granularity,o=e._ellipsoid,r=t(i,o),a=n(i,o);return new WA({center:e._center,semiMajorAxis:e._semiMajorAxis,semiMinorAxis:e._semiMinorAxis,ellipsoid:o,rotation:e._rotation,stRotation:e._stRotation,granularity:i,extrudedHeight:r,height:a,vertexFormat:ge.POSITION_ONLY,shadowVolume:!0})};function CQe(e){let t=-e._stRotation;if(t===0)return[0,0,0,1,1,0];let i=Yc.computeEllipsePositions({center:e._center,semiMajorAxis:e._semiMajorAxis,semiMinorAxis:e._semiMinorAxis,rotation:e._rotation,granularity:e._granularity},!1,!0).outerPositions,o=i.length/3,r=new Array(o);for(let A=0;A<o;++A)r[A]=u.fromArray(i,A*3);let a=e._ellipsoid,s=e.rectangle;return ze._textureCoordinateRotationPoints(r,t,a,s)}Object.defineProperties(WA.prototype,{rectangle:{get:function(){return c(this._rectangle)||(this._rectangle=GW(this._center,this._semiMajorAxis,this._semiMinorAxis,this._rotation,this._granularity,this._ellipsoid)),this._rectangle}},textureCoordinateRotationPoints:{get:function(){return c(this._textureCoordinateRotationPoints)||(this._textureCoordinateRotationPoints=CQe(this)),this._textureCoordinateRotationPoints}}});var yB=WA;var jW=new u,Th=new u;function _Qe(e){let t=e.center;Th=u.multiplyByScalar(e.ellipsoid.geodeticSurfaceNormal(t,Th),e.height,Th),Th=u.add(t,Th,Th);let n=new ee(Th,e.semiMajorAxis),i=Yc.computeEllipsePositions(e,!1,!0).outerPositions,o=new Mt({position:new ue({componentDatatype:N.DOUBLE,componentsPerAttribute:3,values:Yc.raisePositionsToHeight(i,e,!1)})}),r=i.length/3,a=Be.createTypedArray(r,r*2),s=0;for(let A=0;A<r;++A)a[s++]=A,a[s++]=(A+1)%r;return{boundingSphere:n,attributes:o,indices:a}}var bB=new ee,BB=new ee;function EQe(e){let t=e.center,n=e.ellipsoid,i=e.semiMajorAxis,o=u.multiplyByScalar(n.geodeticSurfaceNormal(t,jW),e.height,jW);bB.center=u.add(t,o,bB.center),bB.radius=i,o=u.multiplyByScalar(n.geodeticSurfaceNormal(t,o),e.extrudedHeight,o),BB.center=u.add(t,o,BB.center),BB.radius=i;let r=Yc.computeEllipsePositions(e,!1,!0).outerPositions,a=new Mt({position:new ue({componentDatatype:N.DOUBLE,componentsPerAttribute:3,values:Yc.raisePositionsToHeight(r,e,!0)})});r=a.position.values;let s=ee.union(bB,BB),A=r.length/3;if(c(e.offsetAttribute)){let g=new Uint8Array(A);if(e.offsetAttribute===xt.TOP)g=g.fill(1,0,A/2);else{let C=e.offsetAttribute===xt.NONE?0:1;g=g.fill(C)}a.applyOffset=new ue({componentDatatype:N.UNSIGNED_BYTE,componentsPerAttribute:1,values:g})}let l=e.numberOfVerticalLines??16;l=w.clamp(l,0,A/2);let f=Be.createTypedArray(A,A*2+l*2);A/=2;let h=0,m;for(m=0;m<A;++m)f[h++]=m,f[h++]=(m+1)%A,f[h++]=m+A,f[h++]=(m+1)%A+A;let p;if(l>0){let g=Math.min(l,A);p=Math.round(A/g);let C=Math.min(p*l,A);for(m=0;m<C;m+=p)f[h++]=m,f[h++]=m+A}return{boundingSphere:s,attributes:a,indices:f}}function $p(e){e=e??k.EMPTY_OBJECT;let t=e.center,n=e.ellipsoid??Z.default,i=e.semiMajorAxis,o=e.semiMinorAxis,r=e.granularity??w.RADIANS_PER_DEGREE,a=e.height??0,s=e.extrudedHeight??a;this._center=u.clone(t),this._semiMajorAxis=i,this._semiMinorAxis=o,this._ellipsoid=Z.clone(n),this._rotation=e.rotation??0,this._height=Math.max(s,a),this._granularity=r,this._extrudedHeight=Math.min(s,a),this._numberOfVerticalLines=Math.max(e.numberOfVerticalLines??16,0),this._offsetAttribute=e.offsetAttribute,this._workerName="createEllipseOutlineGeometry"}$p.packedLength=u.packedLength+Z.packedLength+8;$p.pack=function(e,t,n){return n=n??0,u.pack(e._center,t,n),n+=u.packedLength,Z.pack(e._ellipsoid,t,n),n+=Z.packedLength,t[n++]=e._semiMajorAxis,t[n++]=e._semiMinorAxis,t[n++]=e._rotation,t[n++]=e._height,t[n++]=e._granularity,t[n++]=e._extrudedHeight,t[n++]=e._numberOfVerticalLines,t[n]=e._offsetAttribute??-1,t};var YW=new u,qW=new Z,pf={center:YW,ellipsoid:qW,semiMajorAxis:void 0,semiMinorAxis:void 0,rotation:void 0,height:void 0,granularity:void 0,extrudedHeight:void 0,numberOfVerticalLines:void 0,offsetAttribute:void 0};$p.unpack=function(e,t,n){t=t??0;let i=u.unpack(e,t,YW);t+=u.packedLength;let o=Z.unpack(e,t,qW);t+=Z.packedLength;let r=e[t++],a=e[t++],s=e[t++],A=e[t++],l=e[t++],f=e[t++],h=e[t++],m=e[t];return c(n)?(n._center=u.clone(i,n._center),n._ellipsoid=Z.clone(o,n._ellipsoid),n._semiMajorAxis=r,n._semiMinorAxis=a,n._rotation=s,n._height=A,n._granularity=l,n._extrudedHeight=f,n._numberOfVerticalLines=h,n._offsetAttribute=m===-1?void 0:m,n):(pf.height=A,pf.extrudedHeight=f,pf.granularity=l,pf.rotation=s,pf.semiMajorAxis=r,pf.semiMinorAxis=a,pf.numberOfVerticalLines=h,pf.offsetAttribute=m===-1?void 0:m,new $p(pf))};$p.createGeometry=function(e){if(e._semiMajorAxis<=0||e._semiMinorAxis<=0)return;let t=e._height,n=e._extrudedHeight,i=!w.equalsEpsilon(t,n,0,w.EPSILON2);e._center=e._ellipsoid.scaleToGeodeticSurface(e._center,e._center);let o={center:e._center,semiMajorAxis:e._semiMajorAxis,semiMinorAxis:e._semiMinorAxis,ellipsoid:e._ellipsoid,rotation:e._rotation,height:t,granularity:e._granularity,numberOfVerticalLines:e._numberOfVerticalLines},r;if(i)o.extrudedHeight=n,o.offsetAttribute=e._offsetAttribute,r=EQe(o);else if(r=_Qe(o),c(e._offsetAttribute)){let a=r.attributes.position.values.length,s=e._offsetAttribute===xt.NONE?0:1,A=new Uint8Array(a/3).fill(s);r.attributes.applyOffset=new ue({componentDatatype:N.UNSIGNED_BYTE,componentsPerAttribute:1,values:A})}return new ze({attributes:r.attributes,indices:r.indices,primitiveType:Ce.LINES,boundingSphere:r.boundingSphere,offsetAttribute:e._offsetAttribute})};var WW=$p;var JW=new F,KW=u.ZERO,XW=new u,ZW=new ce;function IQe(e){this.id=e,this.vertexFormat=void 0,this.center=void 0,this.semiMajorAxis=void 0,this.semiMinorAxis=void 0,this.rotation=void 0,this.height=void 0,this.extrudedHeight=void 0,this.granularity=void 0,this.stRotation=void 0,this.numberOfVerticalLines=void 0,this.offsetAttribute=void 0}function qc(e,t){an.call(this,{entity:e,scene:t,geometryOptions:new IQe(e),geometryPropertyName:"ellipse",observedPropertyNames:["availability","position","ellipse"]}),this._onEntityPropertyChanged(e,"ellipse",e.ellipse,void 0)}c(Object.create)&&(qc.prototype=Object.create(an.prototype),qc.prototype.constructor=qc);qc.prototype.createFillGeometryInstance=function(e){let t=this._entity,n=t.isAvailable(e),i={show:new kt(n&&t.isShowing&&this._showProperty.getValue(e)&&this._fillProperty.getValue(e)),distanceDisplayCondition:Kt.fromDistanceDisplayCondition(this._distanceDisplayConditionProperty.getValue(e)),offset:void 0,color:void 0};if(this._materialProperty instanceof lt){let o;c(this._materialProperty.color)&&(this._materialProperty.color.isConstant||n)&&(o=this._materialProperty.color.getValue(e,JW)),c(o)||(o=F.WHITE),i.color=Tt.fromColor(o)}return c(this._options.offsetAttribute)&&(i.offset=ii.fromCartesian3(M.getValueOrDefault(this._terrainOffsetProperty,e,KW,XW))),new gt({id:t,geometry:new yB(this._options),attributes:i})};qc.prototype.createOutlineGeometryInstance=function(e){let t=this._entity,n=t.isAvailable(e),i=M.getValueOrDefault(this._outlineColorProperty,e,F.BLACK,JW),o=this._distanceDisplayConditionProperty.getValue(e),r={show:new kt(n&&t.isShowing&&this._showProperty.getValue(e)&&this._showOutlineProperty.getValue(e)),color:Tt.fromColor(i),distanceDisplayCondition:Kt.fromDistanceDisplayCondition(o),offset:void 0};return c(this._options.offsetAttribute)&&(r.offset=ii.fromCartesian3(M.getValueOrDefault(this._terrainOffsetProperty,e,KW,XW))),new gt({id:t,geometry:new WW(this._options),attributes:r})};qc.prototype._computeCenter=function(e,t){return M.getValueOrUndefined(this._entity.position,e,t)};qc.prototype._isHidden=function(e,t){let n=e.position;return!c(n)||!c(t.semiMajorAxis)||!c(t.semiMinorAxis)||ln.prototype._isHidden.call(this,e,t)};qc.prototype._isDynamic=function(e,t){return!e.position.isConstant||!t.semiMajorAxis.isConstant||!t.semiMinorAxis.isConstant||!M.isConstant(t.rotation)||!M.isConstant(t.height)||!M.isConstant(t.extrudedHeight)||!M.isConstant(t.granularity)||!M.isConstant(t.stRotation)||!M.isConstant(t.outlineWidth)||!M.isConstant(t.numberOfVerticalLines)||!M.isConstant(t.zIndex)||this._onTerrain&&!M.isConstant(this._materialProperty)&&!(this._materialProperty instanceof lt)};qc.prototype._setStaticOptions=function(e,t){let n=M.getValueOrUndefined(t.height,Re.MINIMUM_VALUE),i=M.getValueOrDefault(t.heightReference,Re.MINIMUM_VALUE,Ge.NONE),o=M.getValueOrUndefined(t.extrudedHeight,Re.MINIMUM_VALUE),r=M.getValueOrDefault(t.extrudedHeightReference,Re.MINIMUM_VALUE,Ge.NONE);c(o)&&!c(n)&&(n=0);let a=this._options;a.vertexFormat=this._materialProperty instanceof lt?Vt.VERTEX_FORMAT:Zn.MaterialSupport.TEXTURED.vertexFormat,a.center=e.position.getValue(Re.MINIMUM_VALUE,a.center),a.semiMajorAxis=t.semiMajorAxis.getValue(Re.MINIMUM_VALUE,a.semiMajorAxis),a.semiMinorAxis=t.semiMinorAxis.getValue(Re.MINIMUM_VALUE,a.semiMinorAxis),a.rotation=M.getValueOrUndefined(t.rotation,Re.MINIMUM_VALUE),a.granularity=M.getValueOrUndefined(t.granularity,Re.MINIMUM_VALUE),a.stRotation=M.getValueOrUndefined(t.stRotation,Re.MINIMUM_VALUE),a.numberOfVerticalLines=M.getValueOrUndefined(t.numberOfVerticalLines,Re.MINIMUM_VALUE),a.offsetAttribute=an.computeGeometryOffsetAttribute(n,i,o,r),a.height=an.getGeometryHeight(n,i),o=an.getGeometryExtrudedHeight(o,r),o===an.CLAMP_TO_GROUND&&(o=On.getMinimumMaximumHeights(yB.computeRectangle(a,ZW)).minimumTerrainHeight),a.extrudedHeight=o};qc.DynamicGeometryUpdater=eg;function eg(e,t,n){An.call(this,e,t,n)}c(Object.create)&&(eg.prototype=Object.create(An.prototype),eg.prototype.constructor=eg);eg.prototype._isHidden=function(e,t,n){let i=this._options;return!c(i.center)||!c(i.semiMajorAxis)||!c(i.semiMinorAxis)||An.prototype._isHidden.call(this,e,t,n)};eg.prototype._setOptions=function(e,t,n){let i=this._options,o=M.getValueOrUndefined(t.height,n),r=M.getValueOrDefault(t.heightReference,n,Ge.NONE),a=M.getValueOrUndefined(t.extrudedHeight,n),s=M.getValueOrDefault(t.extrudedHeightReference,n,Ge.NONE);c(a)&&!c(o)&&(o=0),i.center=M.getValueOrUndefined(e.position,n,i.center),i.semiMajorAxis=M.getValueOrUndefined(t.semiMajorAxis,n),i.semiMinorAxis=M.getValueOrUndefined(t.semiMinorAxis,n),i.rotation=M.getValueOrUndefined(t.rotation,n),i.granularity=M.getValueOrUndefined(t.granularity,n),i.stRotation=M.getValueOrUndefined(t.stRotation,n),i.numberOfVerticalLines=M.getValueOrUndefined(t.numberOfVerticalLines,n),i.offsetAttribute=an.computeGeometryOffsetAttribute(o,r,a,s),i.height=an.getGeometryHeight(o,r),a=an.getGeometryExtrudedHeight(a,s),a===an.CLAMP_TO_GROUND&&(a=On.getMinimumMaximumHeights(yB.computeRectangle(i,ZW)).minimumTerrainHeight),i.extrudedHeight=a};var $W=qc;var yQe=new u,bQe=new u,BQe=new u,xQe=new u,TQe=new u,SQe=new u(1,1,1),eJ=Math.cos,tJ=Math.sin;function gf(e){e=e??k.EMPTY_OBJECT;let t=e.radii??SQe,n=e.innerRadii??t,i=e.minimumClock??0,o=e.maximumClock??w.TWO_PI,r=e.minimumCone??0,a=e.maximumCone??w.PI,s=Math.round(e.stackPartitions??64),A=Math.round(e.slicePartitions??64),l=e.vertexFormat??ge.DEFAULT;this._radii=u.clone(t),this._innerRadii=u.clone(n),this._minimumClock=i,this._maximumClock=o,this._minimumCone=r,this._maximumCone=a,this._stackPartitions=s,this._slicePartitions=A,this._vertexFormat=ge.clone(l),this._offsetAttribute=e.offsetAttribute,this._workerName="createEllipsoidGeometry"}gf.packedLength=2*u.packedLength+ge.packedLength+7;gf.pack=function(e,t,n){return n=n??0,u.pack(e._radii,t,n),n+=u.packedLength,u.pack(e._innerRadii,t,n),n+=u.packedLength,ge.pack(e._vertexFormat,t,n),n+=ge.packedLength,t[n++]=e._minimumClock,t[n++]=e._maximumClock,t[n++]=e._minimumCone,t[n++]=e._maximumCone,t[n++]=e._stackPartitions,t[n++]=e._slicePartitions,t[n]=e._offsetAttribute??-1,t};var nJ=new u,iJ=new u,oJ=new ge,Zu={radii:nJ,innerRadii:iJ,vertexFormat:oJ,minimumClock:void 0,maximumClock:void 0,minimumCone:void 0,maximumCone:void 0,stackPartitions:void 0,slicePartitions:void 0,offsetAttribute:void 0};gf.unpack=function(e,t,n){t=t??0;let i=u.unpack(e,t,nJ);t+=u.packedLength;let o=u.unpack(e,t,iJ);t+=u.packedLength;let r=ge.unpack(e,t,oJ);t+=ge.packedLength;let a=e[t++],s=e[t++],A=e[t++],l=e[t++],f=e[t++],h=e[t++],m=e[t];return c(n)?(n._radii=u.clone(i,n._radii),n._innerRadii=u.clone(o,n._innerRadii),n._vertexFormat=ge.clone(r,n._vertexFormat),n._minimumClock=a,n._maximumClock=s,n._minimumCone=A,n._maximumCone=l,n._stackPartitions=f,n._slicePartitions=h,n._offsetAttribute=m===-1?void 0:m,n):(Zu.minimumClock=a,Zu.maximumClock=s,Zu.minimumCone=A,Zu.maximumCone=l,Zu.stackPartitions=f,Zu.slicePartitions=h,Zu.offsetAttribute=m===-1?void 0:m,new gf(Zu))};gf.createGeometry=function(e){let t=e._radii;if(t.x<=0||t.y<=0||t.z<=0)return;let n=e._innerRadii;if(n.x<=0||n.y<=0||n.z<=0)return;let i=e._minimumClock,o=e._maximumClock,r=e._minimumCone,a=e._maximumCone,s=e._vertexFormat,A=e._slicePartitions+1,l=e._stackPartitions+1;A=Math.round(A*Math.abs(o-i)/w.TWO_PI),l=Math.round(l*Math.abs(a-r)/w.PI),A<2&&(A=2),l<2&&(l=2);let f,h,m=0,p=[r],g=[i];for(f=0;f<l;f++)p.push(r+f*(a-r)/(l-1));for(p.push(a),h=0;h<A;h++)g.push(i+h*(o-i)/(A-1));g.push(o);let C=p.length,_=g.length,E=0,I=1,y=n.x!==t.x||n.y!==t.y||n.z!==t.z,b=!1,x=!1,S=!1;y&&(I=2,r>0&&(b=!0,E+=A-1),a<Math.PI&&(x=!0,E+=A-1),(o-i)%w.TWO_PI?(S=!0,E+=(l-1)*2+1):E+=1);let P=_*C*I,D=new Float64Array(P*3),Q=new Array(P).fill(!1),v=new Array(P).fill(!1),d=A*l*I,B=6*(d+E+1-(A+l)*I),T=Be.createTypedArray(d,B),R=s.normal?new Float32Array(P*3):void 0,L=s.tangent?new Float32Array(P*3):void 0,G=s.bitangent?new Float32Array(P*3):void 0,q=s.st?new Float32Array(P*2):void 0,z=new Array(C),K=new Array(C);for(f=0;f<C;f++)z[f]=tJ(p[f]),K[f]=eJ(p[f]);let ie=new Array(_),le=new Array(_);for(h=0;h<_;h++)le[h]=eJ(g[h]),ie[h]=tJ(g[h]);for(f=0;f<C;f++)for(h=0;h<_;h++)D[m++]=t.x*z[f]*le[h],D[m++]=t.y*z[f]*ie[h],D[m++]=t.z*K[f];let de=P/2;if(y)for(f=0;f<C;f++)for(h=0;h<_;h++)D[m++]=n.x*z[f]*le[h],D[m++]=n.y*z[f]*ie[h],D[m++]=n.z*K[f],Q[de]=!0,f>0&&f!==C-1&&h!==0&&h!==_-1&&(v[de]=!0),de++;m=0;let he,Se;for(f=1;f<C-2;f++)for(he=f*_,Se=(f+1)*_,h=1;h<_-2;h++)T[m++]=Se+h,T[m++]=Se+h+1,T[m++]=he+h+1,T[m++]=Se+h,T[m++]=he+h+1,T[m++]=he+h;if(y){let Cn=C*_;for(f=1;f<C-2;f++)for(he=Cn+f*_,Se=Cn+(f+1)*_,h=1;h<_-2;h++)T[m++]=Se+h,T[m++]=he+h,T[m++]=he+h+1,T[m++]=Se+h,T[m++]=he+h+1,T[m++]=Se+h+1}let be,_e;if(y){if(b)for(_e=C*_,f=1;f<_-2;f++)T[m++]=f,T[m++]=f+1,T[m++]=_e+f+1,T[m++]=f,T[m++]=_e+f+1,T[m++]=_e+f;if(x)for(be=C*_-_,_e=C*_*I-_,f=1;f<_-2;f++)T[m++]=be+f+1,T[m++]=be+f,T[m++]=_e+f,T[m++]=be+f+1,T[m++]=_e+f,T[m++]=_e+f+1}if(S){for(f=1;f<C-2;f++)_e=_*C+_*f,be=_*f,T[m++]=_e,T[m++]=be+_,T[m++]=be,T[m++]=_e,T[m++]=_e+_,T[m++]=be+_;for(f=1;f<C-2;f++)_e=_*C+_*(f+1)-1,be=_*(f+1)-1,T[m++]=be+_,T[m++]=_e,T[m++]=be,T[m++]=be+_,T[m++]=_e+_,T[m++]=_e}let Ct=new Mt;s.position&&(Ct.position=new ue({componentDatatype:N.DOUBLE,componentsPerAttribute:3,values:D}));let ft=0,At=0,at=0,Xe=0,wt=P/2,zt,ti=Z.fromCartesian3(t),Li=Z.fromCartesian3(n);if(s.st||s.normal||s.tangent||s.bitangent){for(f=0;f<P;f++){zt=Q[f]?Li:ti;let Cn=u.fromArray(D,f*3,yQe),yt=zt.geodeticSurfaceNormal(Cn,bQe);if(v[f]&&u.negate(yt,yt),s.st){let Un=U.negate(yt,TQe);q[ft++]=Math.atan2(Un.y,Un.x)/w.TWO_PI+.5,q[ft++]=Math.asin(yt.z)/Math.PI+.5}if(s.normal&&(R[At++]=yt.x,R[At++]=yt.y,R[At++]=yt.z),s.tangent||s.bitangent){let Un=BQe,sn=0,ri;if(Q[f]&&(sn=wt),!b&&f>=sn&&f<sn+_*2?ri=u.UNIT_X:ri=u.UNIT_Z,u.cross(ri,yt,Un),u.normalize(Un,Un),s.tangent&&(L[at++]=Un.x,L[at++]=Un.y,L[at++]=Un.z),s.bitangent){let ha=u.cross(yt,Un,xQe);u.normalize(ha,ha),G[Xe++]=ha.x,G[Xe++]=ha.y,G[Xe++]=ha.z}}}s.st&&(Ct.st=new ue({componentDatatype:N.FLOAT,componentsPerAttribute:2,values:q})),s.normal&&(Ct.normal=new ue({componentDatatype:N.FLOAT,componentsPerAttribute:3,values:R})),s.tangent&&(Ct.tangent=new ue({componentDatatype:N.FLOAT,componentsPerAttribute:3,values:L})),s.bitangent&&(Ct.bitangent=new ue({componentDatatype:N.FLOAT,componentsPerAttribute:3,values:G}))}if(c(e._offsetAttribute)){let Cn=D.length,yt=e._offsetAttribute===xt.NONE?0:1,Un=new Uint8Array(Cn/3).fill(yt);Ct.applyOffset=new ue({componentDatatype:N.UNSIGNED_BYTE,componentsPerAttribute:1,values:Un})}return new ze({attributes:Ct,indices:T,primitiveType:Ce.TRIANGLES,boundingSphere:ee.fromEllipsoid(ti),offsetAttribute:e._offsetAttribute})};var JR;gf.getUnitEllipsoid=function(){return c(JR)||(JR=gf.createGeometry(new gf({radii:new u(1,1,1),vertexFormat:ge.POSITION_ONLY}))),JR};var rJ=gf;var wQe=new lt(F.WHITE),KR=u.ZERO,XR=new u,DQe=new u,QQe=new u,ZR=new F,RQe=new u(1,1,1);function vQe(e){this.id=e,this.vertexFormat=void 0,this.radii=void 0,this.innerRadii=void 0,this.minimumClock=void 0,this.maximumClock=void 0,this.minimumCone=void 0,this.maximumCone=void 0,this.stackPartitions=void 0,this.slicePartitions=void 0,this.subdivisions=void 0,this.offsetAttribute=void 0}function gs(e,t){ln.call(this,{entity:e,scene:t,geometryOptions:new vQe(e),geometryPropertyName:"ellipsoid",observedPropertyNames:["availability","position","orientation","ellipsoid"]}),this._onEntityPropertyChanged(e,"ellipsoid",e.ellipsoid,void 0)}c(Object.create)&&(gs.prototype=Object.create(ln.prototype),gs.prototype.constructor=gs);Object.defineProperties(gs.prototype,{terrainOffsetProperty:{get:function(){return this._terrainOffsetProperty}}});gs.prototype.createFillGeometryInstance=function(e,t,n){let i=this._entity,o=i.isAvailable(e),r,a=new kt(o&&i.isShowing&&this._showProperty.getValue(e)&&this._fillProperty.getValue(e)),s=this._distanceDisplayConditionProperty.getValue(e),A=Kt.fromDistanceDisplayCondition(s),l={show:a,distanceDisplayCondition:A,color:void 0,offset:void 0};if(this._materialProperty instanceof lt){let f;c(this._materialProperty.color)&&(this._materialProperty.color.isConstant||o)&&(f=this._materialProperty.color.getValue(e,ZR)),c(f)||(f=F.WHITE),r=Tt.fromColor(f),l.color=r}return c(this._options.offsetAttribute)&&(l.offset=ii.fromCartesian3(M.getValueOrDefault(this._terrainOffsetProperty,e,KR,XR))),new gt({id:i,geometry:new rJ(this._options),modelMatrix:t?void 0:i.computeModelMatrixForHeightReference(e,i.ellipsoid.heightReference,this._options.radii.z*.5,this._scene.ellipsoid,n),attributes:l})};gs.prototype.createOutlineGeometryInstance=function(e,t,n){let i=this._entity,o=i.isAvailable(e),r=M.getValueOrDefault(this._outlineColorProperty,e,F.BLACK,ZR),a=this._distanceDisplayConditionProperty.getValue(e),s={show:new kt(o&&i.isShowing&&this._showProperty.getValue(e)&&this._showOutlineProperty.getValue(e)),color:Tt.fromColor(r),distanceDisplayCondition:Kt.fromDistanceDisplayCondition(a),offset:void 0};return c(this._options.offsetAttribute)&&(s.offset=ii.fromCartesian3(M.getValueOrDefault(this._terrainOffsetProperty,e,KR,XR))),new gt({id:i,geometry:new zA(this._options),modelMatrix:t?void 0:i.computeModelMatrixForHeightReference(e,i.ellipsoid.heightReference,this._options.radii.z*.5,this._scene.ellipsoid,n),attributes:s})};gs.prototype._computeCenter=function(e,t){return M.getValueOrUndefined(this._entity.position,e,t)};gs.prototype._isHidden=function(e,t){return!c(e.position)||!c(t.radii)||ln.prototype._isHidden.call(this,e,t)};gs.prototype._isDynamic=function(e,t){return!e.position.isConstant||!M.isConstant(e.orientation)||!t.radii.isConstant||!M.isConstant(t.innerRadii)||!M.isConstant(t.stackPartitions)||!M.isConstant(t.slicePartitions)||!M.isConstant(t.outlineWidth)||!M.isConstant(t.minimumClock)||!M.isConstant(t.maximumClock)||!M.isConstant(t.minimumCone)||!M.isConstant(t.maximumCone)||!M.isConstant(t.subdivisions)};gs.prototype._setStaticOptions=function(e,t){let n=M.getValueOrDefault(t.heightReference,Re.MINIMUM_VALUE,Ge.NONE),i=this._options;i.vertexFormat=this._materialProperty instanceof lt?Vt.VERTEX_FORMAT:Zn.MaterialSupport.TEXTURED.vertexFormat,i.radii=t.radii.getValue(Re.MINIMUM_VALUE,i.radii),i.innerRadii=M.getValueOrUndefined(t.innerRadii,i.radii),i.minimumClock=M.getValueOrUndefined(t.minimumClock,Re.MINIMUM_VALUE),i.maximumClock=M.getValueOrUndefined(t.maximumClock,Re.MINIMUM_VALUE),i.minimumCone=M.getValueOrUndefined(t.minimumCone,Re.MINIMUM_VALUE),i.maximumCone=M.getValueOrUndefined(t.maximumCone,Re.MINIMUM_VALUE),i.stackPartitions=M.getValueOrUndefined(t.stackPartitions,Re.MINIMUM_VALUE),i.slicePartitions=M.getValueOrUndefined(t.slicePartitions,Re.MINIMUM_VALUE),i.subdivisions=M.getValueOrUndefined(t.subdivisions,Re.MINIMUM_VALUE),i.offsetAttribute=n!==Ge.NONE?xt.ALL:void 0};gs.prototype._onEntityPropertyChanged=Im;gs.DynamicGeometryUpdater=EE;function EE(e,t,n){An.call(this,e,t,n),this._scene=e._scene,this._modelMatrix=new O,this._attributes=void 0,this._outlineAttributes=void 0,this._lastSceneMode=void 0,this._lastShow=void 0,this._lastOutlineShow=void 0,this._lastOutlineWidth=void 0,this._lastOutlineColor=void 0,this._lastOffset=new u,this._material={}}c(Object.create)&&(EE.prototype=Object.create(An.prototype),EE.prototype.constructor=EE);EE.prototype.update=function(e){let t=this._entity,n=t.ellipsoid;if(!t.isShowing||!t.isAvailable(e)||!M.getValueOrDefault(n.show,e,!0)){c(this._primitive)&&(this._primitive.show=!1),c(this._outlinePrimitive)&&(this._outlinePrimitive.show=!1);return}let i=M.getValueOrUndefined(n.radii,e,DQe),o=c(i)?t.computeModelMatrixForHeightReference(e,n.heightReference,i.z*.5,this._scene.ellipsoid,this._modelMatrix):void 0;if(!c(o)||!c(i)){c(this._primitive)&&(this._primitive.show=!1),c(this._outlinePrimitive)&&(this._outlinePrimitive.show=!1);return}let r=M.getValueOrDefault(n.fill,e,!0),a=M.getValueOrDefault(n.outline,e,!1),s=M.getValueOrClonedDefault(n.outlineColor,e,F.BLACK,ZR),A=Ji.getValue(e,n.material??wQe,this._material),l=M.getValueOrUndefined(n.innerRadii,e,QQe),f=M.getValueOrUndefined(n.minimumClock,e),h=M.getValueOrUndefined(n.maximumClock,e),m=M.getValueOrUndefined(n.minimumCone,e),p=M.getValueOrUndefined(n.maximumCone,e),g=M.getValueOrUndefined(n.stackPartitions,e),C=M.getValueOrUndefined(n.slicePartitions,e),_=M.getValueOrUndefined(n.subdivisions,e),E=M.getValueOrDefault(n.outlineWidth,e,1),I=M.getValueOrDefault(n.heightReference,e,Ge.NONE),y=I!==Ge.NONE?xt.ALL:void 0,b=this._scene.mode,x=b===Te.SCENE3D&&I===Ge.NONE,S=this._options,P=this._geometryUpdater.shadowsProperty.getValue(e),Q=this._geometryUpdater.distanceDisplayConditionProperty.getValue(e),v=M.getValueOrDefault(this._geometryUpdater.terrainOffsetProperty,e,KR,XR);if(!x||this._lastSceneMode!==b||!c(this._primitive)||S.stackPartitions!==g||S.slicePartitions!==C||c(l)&&!u.equals(S.innerRadii!==l)||S.minimumClock!==f||S.maximumClock!==h||S.minimumCone!==m||S.maximumCone!==p||S.subdivisions!==_||this._lastOutlineWidth!==E||S.offsetAttribute!==y){let B=this._primitives;B.removeAndDestroy(this._primitive),B.removeAndDestroy(this._outlinePrimitive),this._primitive=void 0,this._outlinePrimitive=void 0,this._lastSceneMode=b,this._lastOutlineWidth=E,S.stackPartitions=g,S.slicePartitions=C,S.subdivisions=_,S.offsetAttribute=y,S.radii=u.clone(x?RQe:i,S.radii),c(l)?x?S.innerRadii=u.fromElements(l.x/i.x,l.y/i.y,l.z/i.z,S.innerRadii):S.innerRadii=u.clone(l,S.innerRadii):S.innerRadii=void 0,S.minimumClock=f,S.maximumClock=h,S.minimumCone=m,S.maximumCone=p;let T=new Zn({material:A,translucent:A.isTranslucent(),closed:!0});S.vertexFormat=T.vertexFormat;let R=this._geometryUpdater.createFillGeometryInstance(e,x,this._modelMatrix);this._primitive=B.add(new wn({geometryInstances:R,appearance:T,asynchronous:!1,shadows:P}));let L=this._geometryUpdater.createOutlineGeometryInstance(e,x,this._modelMatrix);this._outlinePrimitive=B.add(new wn({geometryInstances:L,appearance:new Vt({flat:!0,translucent:L.attributes.color.value[3]!==255,renderState:{lineWidth:this._geometryUpdater._scene.clampLineWidth(E)}}),asynchronous:!1,shadows:P})),this._lastShow=r,this._lastOutlineShow=a,this._lastOutlineColor=F.clone(s,this._lastOutlineColor),this._lastDistanceDisplayCondition=Q,this._lastOffset=u.clone(v,this._lastOffset)}else if(this._primitive.ready){let B=this._primitive,T=this._outlinePrimitive;B.show=!0,T.show=!0,B.appearance.material=A;let R=this._attributes;c(R)||(R=B.getGeometryInstanceAttributes(t),this._attributes=R),r!==this._lastShow&&(R.show=kt.toValue(r,R.show),this._lastShow=r);let L=this._outlineAttributes;c(L)||(L=T.getGeometryInstanceAttributes(t),this._outlineAttributes=L),a!==this._lastOutlineShow&&(L.show=kt.toValue(a,L.show),this._lastOutlineShow=a),F.equals(s,this._lastOutlineColor)||(L.color=Tt.toValue(s,L.color),F.clone(s,this._lastOutlineColor)),rt.equals(Q,this._lastDistanceDisplayCondition)||(R.distanceDisplayCondition=Kt.toValue(Q,R.distanceDisplayCondition),L.distanceDisplayCondition=Kt.toValue(Q,L.distanceDisplayCondition),rt.clone(Q,this._lastDistanceDisplayCondition)),u.equals(v,this._lastOffset)||(R.offset=ii.toValue(v,R.offset),L.offset=ii.toValue(v,R.offset),u.clone(v,this._lastOffset))}x&&(i.x=Math.max(i.x,.001),i.y=Math.max(i.y,.001),i.z=Math.max(i.z,.001),o=O.multiplyByScale(o,i,o),this._primitive.modelMatrix=o,this._outlinePrimitive.modelMatrix=o)};var aJ=gs;function tg(e){e=e??k.EMPTY_OBJECT;let t=e.vertexFormat??ge.DEFAULT;this._vertexFormat=t,this._workerName="createPlaneGeometry"}tg.packedLength=ge.packedLength;tg.pack=function(e,t,n){return n=n??0,ge.pack(e._vertexFormat,t,n),t};var sJ=new ge,PQe={vertexFormat:sJ};tg.unpack=function(e,t,n){t=t??0;let i=ge.unpack(e,t,sJ);return c(n)?(n._vertexFormat=ge.clone(i,n._vertexFormat),n):new tg(PQe)};var xB=new u(-.5,-.5,0),TB=new u(.5,.5,0);tg.createGeometry=function(e){let t=e._vertexFormat,n=new Mt,i,o;if(t.position){if(o=new Float64Array(12),o[0]=xB.x,o[1]=xB.y,o[2]=0,o[3]=TB.x,o[4]=xB.y,o[5]=0,o[6]=TB.x,o[7]=TB.y,o[8]=0,o[9]=xB.x,o[10]=TB.y,o[11]=0,n.position=new ue({componentDatatype:N.DOUBLE,componentsPerAttribute:3,values:o}),t.normal){let r=new Float32Array(12);r[0]=0,r[1]=0,r[2]=1,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=1,r[9]=0,r[10]=0,r[11]=1,n.normal=new ue({componentDatatype:N.FLOAT,componentsPerAttribute:3,values:r})}if(t.st){let r=new Float32Array(8);r[0]=0,r[1]=0,r[2]=1,r[3]=0,r[4]=1,r[5]=1,r[6]=0,r[7]=1,n.st=new ue({componentDatatype:N.FLOAT,componentsPerAttribute:2,values:r})}if(t.tangent){let r=new Float32Array(12);r[0]=1,r[1]=0,r[2]=0,r[3]=1,r[4]=0,r[5]=0,r[6]=1,r[7]=0,r[8]=0,r[9]=1,r[10]=0,r[11]=0,n.tangent=new ue({componentDatatype:N.FLOAT,componentsPerAttribute:3,values:r})}if(t.bitangent){let r=new Float32Array(12);r[0]=0,r[1]=1,r[2]=0,r[3]=0,r[4]=1,r[5]=0,r[6]=0,r[7]=1,r[8]=0,r[9]=0,r[10]=1,r[11]=0,n.bitangent=new ue({componentDatatype:N.FLOAT,componentsPerAttribute:3,values:r})}i=new Uint16Array(6),i[0]=0,i[1]=1,i[2]=2,i[3]=0,i[4]=2,i[5]=3}return new ze({attributes:n,indices:i,primitiveType:Ce.TRIANGLES,boundingSphere:new ee(u.ZERO,Math.sqrt(2))})};var cJ=tg;function ng(){this._workerName="createPlaneOutlineGeometry"}ng.packedLength=0;ng.pack=function(e,t){return t};ng.unpack=function(e,t,n){return c(n)?n:new ng};var $u=new u(-.5,-.5,0),SB=new u(.5,.5,0);ng.createGeometry=function(){let e=new Mt,t=new Uint16Array(8),n=new Float64Array(12);return n[0]=$u.x,n[1]=$u.y,n[2]=$u.z,n[3]=SB.x,n[4]=$u.y,n[5]=$u.z,n[6]=SB.x,n[7]=SB.y,n[8]=$u.z,n[9]=$u.x,n[10]=SB.y,n[11]=$u.z,e.position=new ue({componentDatatype:N.DOUBLE,componentsPerAttribute:3,values:n}),t[0]=0,t[1]=1,t[2]=1,t[3]=2,t[4]=2,t[5]=3,t[6]=3,t[7]=0,new ze({attributes:e,indices:t,primitiveType:Ce.LINES,boundingSphere:new ee(u.ZERO,Math.sqrt(2))})};var AJ=ng;var MQe=new u,lJ=new F;function OQe(e){this.id=e,this.vertexFormat=void 0,this.plane=void 0,this.dimensions=void 0}function fc(e,t){ln.call(this,{entity:e,scene:t,geometryOptions:new OQe(e),geometryPropertyName:"plane",observedPropertyNames:["availability","position","orientation","plane"]}),this._onEntityPropertyChanged(e,"plane",e.plane,void 0)}c(Object.create)&&(fc.prototype=Object.create(ln.prototype),fc.prototype.constructor=fc);fc.prototype.createFillGeometryInstance=function(e){let t=this._entity,n=t.isAvailable(e),i,o,r=new kt(n&&t.isShowing&&this._showProperty.getValue(e)&&this._fillProperty.getValue(e)),a=this._distanceDisplayConditionProperty.getValue(e),s=Kt.fromDistanceDisplayCondition(a);if(this._materialProperty instanceof lt){let p;c(this._materialProperty.color)&&(this._materialProperty.color.isConstant||n)&&(p=this._materialProperty.color.getValue(e,lJ)),c(p)||(p=F.WHITE),o=Tt.fromColor(p),i={show:r,distanceDisplayCondition:s,color:o}}else i={show:r,distanceDisplayCondition:s};let A=t.plane,l=this._options,f=t.computeModelMatrix(e),h=M.getValueOrDefault(A.plane,e,l.plane),m=M.getValueOrUndefined(A.dimensions,e,l.dimensions);return l.plane=h,l.dimensions=m,f=$R(h,m,f,f),new gt({id:t,geometry:new cJ(this._options),modelMatrix:f,attributes:i})};fc.prototype.createOutlineGeometryInstance=function(e){let t=this._entity,n=t.isAvailable(e),i=M.getValueOrDefault(this._outlineColorProperty,e,F.BLACK,lJ),o=this._distanceDisplayConditionProperty.getValue(e),r=t.plane,a=this._options,s=t.computeModelMatrix(e),A=M.getValueOrDefault(r.plane,e,a.plane),l=M.getValueOrUndefined(r.dimensions,e,a.dimensions);return a.plane=A,a.dimensions=l,s=$R(A,l,s,s),new gt({id:t,geometry:new AJ,modelMatrix:s,attributes:{show:new kt(n&&t.isShowing&&this._showProperty.getValue(e)&&this._showOutlineProperty.getValue(e)),color:Tt.fromColor(i),distanceDisplayCondition:Kt.fromDistanceDisplayCondition(o)}})};fc.prototype._isHidden=function(e,t){return!c(t.plane)||!c(t.dimensions)||!c(e.position)||ln.prototype._isHidden.call(this,e,t)};fc.prototype._getIsClosed=function(e){return!1};fc.prototype._isDynamic=function(e,t){return!e.position.isConstant||!M.isConstant(e.orientation)||!t.plane.isConstant||!t.dimensions.isConstant||!M.isConstant(t.outlineWidth)};fc.prototype._setStaticOptions=function(e,t){let n=this._materialProperty instanceof lt,i=this._options;i.vertexFormat=n?Vt.VERTEX_FORMAT:Zn.MaterialSupport.TEXTURED.vertexFormat,i.plane=t.plane.getValue(Re.MINIMUM_VALUE,i.plane),i.dimensions=t.dimensions.getValue(Re.MINIMUM_VALUE,i.dimensions)};fc.DynamicGeometryUpdater=ig;function ig(e,t,n){An.call(this,e,t,n)}c(Object.create)&&(ig.prototype=Object.create(An.prototype),ig.prototype.constructor=ig);ig.prototype._isHidden=function(e,t,n){let i=this._options,o=M.getValueOrUndefined(e.position,n,MQe);return!c(o)||!c(i.plane)||!c(i.dimensions)||An.prototype._isHidden.call(this,e,t,n)};ig.prototype._setOptions=function(e,t,n){let i=this._options;i.plane=M.getValueOrDefault(t.plane,n,i.plane),i.dimensions=M.getValueOrUndefined(t.dimensions,n,i.dimensions)};var LQe=new u,NQe=new u,FQe=new u,kQe=new u,UQe=new J,GQe=new J,zQe=new O;function $R(e,t,n,i){let o=e.normal,r=e.distance,a=u.multiplyByScalar(o,-r,FQe),s=u.clone(u.UNIT_Z,NQe);w.equalsEpsilon(Math.abs(u.dot(s,o)),1,w.EPSILON8)&&(s=u.clone(u.UNIT_Y,s));let A=u.cross(s,o,LQe);s=u.cross(o,A,s),u.normalize(A,A),u.normalize(s,s);let l=UQe;J.setColumn(l,0,A,l),J.setColumn(l,1,s,l),J.setColumn(l,2,o,l);let f=u.fromElements(t.x,t.y,1,kQe),h=J.multiplyByScale(l,f,GQe),m=O.fromRotationTranslation(h,a,zQe);return O.multiplyTransformation(n,m,i)}fc.createPrimitiveMatrix=$R;var fJ=fc;var HQe=new u,VQe=new Jt,jQe=new U,YQe=new U,qQe=new u,WQe=new u,JQe=new u,IE=new u,KQe=new u,XQe=new u,uJ=new qe,ZQe=new J,$Qe=new J,eRe=new u;function tRe(e,t,n,i,o,r,a,s,A){let l=e.positions,f=Tn.triangulate(e.positions2D,e.holes);f.length<3&&(f=[0,1,2]);let h=Be.createTypedArray(l.length,f.length);h.set(f);let m=ZQe;if(i!==0){let d=qe.fromAxisAngle(a,i,uJ);if(m=J.fromQuaternion(d,m),t.tangent||t.bitangent){d=qe.fromAxisAngle(a,-i,uJ);let B=J.fromQuaternion(d,$Qe);s=u.normalize(J.multiplyByVector(B,s,s),s),t.bitangent&&(A=u.normalize(u.cross(a,s,A),A))}}else m=J.clone(J.IDENTITY,m);let p=YQe;t.st&&(p.x=n.x,p.y=n.y);let g=l.length,C=g*3,_=new Float64Array(C),E=t.normal?new Float32Array(C):void 0,I=t.tangent?new Float32Array(C):void 0,y=t.bitangent?new Float32Array(C):void 0,b=t.st?new Float32Array(g*2):void 0,x=0,S=0,P=0,D=0,Q=0;for(let d=0;d<g;d++){let B=l[d];if(_[x++]=B.x,_[x++]=B.y,_[x++]=B.z,t.st)if(c(o)&&o.positions.length===g)b[Q++]=o.positions[d].x,b[Q++]=o.positions[d].y;else{let T=J.multiplyByVector(m,B,HQe),R=r(T,jQe);U.subtract(R,p,R);let L=w.clamp(R.x/n.width,0,1),G=w.clamp(R.y/n.height,0,1);b[Q++]=L,b[Q++]=G}t.normal&&(E[S++]=a.x,E[S++]=a.y,E[S++]=a.z),t.tangent&&(I[D++]=s.x,I[D++]=s.y,I[D++]=s.z),t.bitangent&&(y[P++]=A.x,y[P++]=A.y,y[P++]=A.z)}let v=new Mt;return t.position&&(v.position=new ue({componentDatatype:N.DOUBLE,componentsPerAttribute:3,values:_})),t.normal&&(v.normal=new ue({componentDatatype:N.FLOAT,componentsPerAttribute:3,values:E})),t.tangent&&(v.tangent=new ue({componentDatatype:N.FLOAT,componentsPerAttribute:3,values:I})),t.bitangent&&(v.bitangent=new ue({componentDatatype:N.FLOAT,componentsPerAttribute:3,values:y})),t.st&&(v.st=new ue({componentDatatype:N.FLOAT,componentsPerAttribute:2,values:b})),new ze({attributes:v,indices:h,primitiveType:Ce.TRIANGLES})}function Sh(e){e=e??k.EMPTY_OBJECT;let t=e.polygonHierarchy,n=e.textureCoordinates,i=e.vertexFormat??ge.DEFAULT;this._vertexFormat=ge.clone(i),this._polygonHierarchy=t,this._stRotation=e.stRotation??0,this._ellipsoid=Z.clone(e.ellipsoid??Z.default),this._workerName="createCoplanarPolygonGeometry",this._textureCoordinates=n,this.packedLength=rn.computeHierarchyPackedLength(t,u)+ge.packedLength+Z.packedLength+(c(n)?rn.computeHierarchyPackedLength(n,U):1)+2}Sh.fromPositions=function(e){e=e??k.EMPTY_OBJECT;let t={polygonHierarchy:{positions:e.positions},vertexFormat:e.vertexFormat,stRotation:e.stRotation,ellipsoid:e.ellipsoid,textureCoordinates:e.textureCoordinates};return new Sh(t)};Sh.pack=function(e,t,n){return n=n??0,n=rn.packPolygonHierarchy(e._polygonHierarchy,t,n,u),Z.pack(e._ellipsoid,t,n),n+=Z.packedLength,ge.pack(e._vertexFormat,t,n),n+=ge.packedLength,t[n++]=e._stRotation,c(e._textureCoordinates)?n=rn.packPolygonHierarchy(e._textureCoordinates,t,n,U):t[n++]=-1,t[n++]=e.packedLength,t};var nRe=Z.clone(Z.UNIT_SPHERE),iRe=new ge,oRe={polygonHierarchy:{}};Sh.unpack=function(e,t,n){t=t??0;let i=rn.unpackPolygonHierarchy(e,t,u);t=i.startingIndex,delete i.startingIndex;let o=Z.unpack(e,t,nRe);t+=Z.packedLength;let r=ge.unpack(e,t,iRe);t+=ge.packedLength;let a=e[t++],s=e[t]===-1?void 0:rn.unpackPolygonHierarchy(e,t,U);c(s)?(t=s.startingIndex,delete s.startingIndex):t++;let A=e[t++];return c(n)||(n=new Sh(oRe)),n._polygonHierarchy=i,n._ellipsoid=Z.clone(o,n._ellipsoid),n._vertexFormat=ge.clone(r,n._vertexFormat),n._stRotation=a,n._textureCoordinates=s,n.packedLength=A,n};Sh.createGeometry=function(e){let t=e._vertexFormat,n=e._polygonHierarchy,i=e._stRotation,o=e._textureCoordinates,r=c(o),a=n.positions;if(a=Bi(a,u.equalsEpsilon,!0),a.length<3)return;let s=qQe,A=WQe,l=JQe,f=KQe,h=XQe;if(!Bp.computeProjectTo2DArguments(a,IE,f,h))return;if(s=u.cross(f,h,s),s=u.normalize(s,s),!u.equalsEpsilon(IE,u.ZERO,w.EPSILON6)){let Q=e._ellipsoid.geodeticSurfaceNormal(IE,eRe);u.dot(s,Q)<0&&(s=u.negate(s,s),f=u.negate(f,f))}let p=Bp.createProjectPointsTo2DFunction(IE,f,h),g=Bp.createProjectPointTo2DFunction(IE,f,h);t.tangent&&(A=u.clone(f,A)),t.bitangent&&(l=u.clone(h,l));let C=rn.polygonsFromHierarchy(n,r,p,!1),_=C.hierarchy,E=C.polygons,I=function(Q){return Q},y=r?rn.polygonsFromHierarchy(o,!0,I,!1).polygons:void 0;if(_.length===0)return;a=_[0].outerRing;let b=ee.fromPoints(a),x=rn.computeBoundingRectangle(s,g,a,i,VQe),S=[];for(let Q=0;Q<E.length;Q++){let v=new gt({geometry:tRe(E[Q],t,x,i,r?y[Q]:void 0,g,s,A,l)});S.push(v)}let P=Mn.combineInstances(S)[0];P.attributes.position.values=new Float64Array(P.attributes.position.values),P.indices=Be.createTypedArray(P.attributes.position.values.length/3,P.indices);let D=P.attributes;return t.position||delete D.position,new ze({attributes:D,indices:P.indices,primitiveType:P.primitiveType,boundingSphere:b})};var dJ=Sh;var hJ=[],wB=[];function rRe(e,t,n,i,o){let a=Fo.fromPoints(t,e).projectPointsOntoPlane(t,hJ);Tn.computeWindingOrder2D(a)===Jo.CLOCKWISE&&(a.reverse(),t=t.slice().reverse());let A,l,f=t.length,h=0;if(i)for(A=new Float64Array(f*2*3),l=0;l<f;l++){let g=t[l],C=t[(l+1)%f];A[h++]=g.x,A[h++]=g.y,A[h++]=g.z,A[h++]=C.x,A[h++]=C.y,A[h++]=C.z}else{let g=0;if(o===Yt.GEODESIC)for(l=0;l<f;l++)g+=rn.subdivideLineCount(t[l],t[(l+1)%f],n);else if(o===Yt.RHUMB)for(l=0;l<f;l++)g+=rn.subdivideRhumbLineCount(e,t[l],t[(l+1)%f],n);for(A=new Float64Array(g*3),l=0;l<f;l++){let C;o===Yt.GEODESIC?C=rn.subdivideLine(t[l],t[(l+1)%f],n,wB):o===Yt.RHUMB&&(C=rn.subdivideRhumbLine(e,t[l],t[(l+1)%f],n,wB));let _=C.length;for(let E=0;E<_;++E)A[h++]=C[E]}}f=A.length/3;let m=f*2,p=Be.createTypedArray(f,m);for(h=0,l=0;l<f-1;l++)p[h++]=l,p[h++]=l+1;return p[h++]=f-1,p[h++]=0,new gt({geometry:new ze({attributes:new Mt({position:new ue({componentDatatype:N.DOUBLE,componentsPerAttribute:3,values:A})}),indices:p,primitiveType:Ce.LINES})})}function aRe(e,t,n,i,o){let a=Fo.fromPoints(t,e).projectPointsOntoPlane(t,hJ);Tn.computeWindingOrder2D(a)===Jo.CLOCKWISE&&(a.reverse(),t=t.slice().reverse());let A,l,f=t.length,h=new Array(f),m=0;if(i)for(A=new Float64Array(f*2*3*2),l=0;l<f;++l){h[l]=m/3;let _=t[l],E=t[(l+1)%f];A[m++]=_.x,A[m++]=_.y,A[m++]=_.z,A[m++]=E.x,A[m++]=E.y,A[m++]=E.z}else{let _=0;if(o===Yt.GEODESIC)for(l=0;l<f;l++)_+=rn.subdivideLineCount(t[l],t[(l+1)%f],n);else if(o===Yt.RHUMB)for(l=0;l<f;l++)_+=rn.subdivideRhumbLineCount(e,t[l],t[(l+1)%f],n);for(A=new Float64Array(_*3*2),l=0;l<f;++l){h[l]=m/3;let E;o===Yt.GEODESIC?E=rn.subdivideLine(t[l],t[(l+1)%f],n,wB):o===Yt.RHUMB&&(E=rn.subdivideRhumbLine(e,t[l],t[(l+1)%f],n,wB));let I=E.length;for(let y=0;y<I;++y)A[m++]=E[y]}}f=A.length/6;let p=h.length,g=(f*2+p)*2,C=Be.createTypedArray(f+p,g);for(m=0,l=0;l<f;++l)C[m++]=l,C[m++]=(l+1)%f,C[m++]=l+f,C[m++]=(l+1)%f+f;for(l=0;l<p;l++){let _=h[l];C[m++]=_,C[m++]=_+f}return new gt({geometry:new ze({attributes:new Mt({position:new ue({componentDatatype:N.DOUBLE,componentsPerAttribute:3,values:A})}),indices:C,primitiveType:Ce.LINES})})}function wh(e){let t=e.polygonHierarchy,n=e.ellipsoid??Z.default,i=e.granularity??w.RADIANS_PER_DEGREE,o=e.perPositionHeight??!1,r=o&&c(e.extrudedHeight),a=e.arcType??Yt.GEODESIC,s=e.height??0,A=e.extrudedHeight??s;if(!r){let l=Math.max(s,A);A=Math.min(s,A),s=l}this._ellipsoid=Z.clone(n),this._granularity=i,this._height=s,this._extrudedHeight=A,this._arcType=a,this._polygonHierarchy=t,this._perPositionHeight=o,this._perPositionHeightExtrude=r,this._offsetAttribute=e.offsetAttribute,this._workerName="createPolygonOutlineGeometry",this.packedLength=rn.computeHierarchyPackedLength(t,u)+Z.packedLength+8}wh.pack=function(e,t,n){return n=n??0,n=rn.packPolygonHierarchy(e._polygonHierarchy,t,n,u),Z.pack(e._ellipsoid,t,n),n+=Z.packedLength,t[n++]=e._height,t[n++]=e._extrudedHeight,t[n++]=e._granularity,t[n++]=e._perPositionHeightExtrude?1:0,t[n++]=e._perPositionHeight?1:0,t[n++]=e._arcType,t[n++]=e._offsetAttribute??-1,t[n]=e.packedLength,t};var sRe=Z.clone(Z.UNIT_SPHERE),cRe={polygonHierarchy:{}};wh.unpack=function(e,t,n){t=t??0;let i=rn.unpackPolygonHierarchy(e,t,u);t=i.startingIndex,delete i.startingIndex;let o=Z.unpack(e,t,sRe);t+=Z.packedLength;let r=e[t++],a=e[t++],s=e[t++],A=e[t++]===1,l=e[t++]===1,f=e[t++],h=e[t++],m=e[t];return c(n)||(n=new wh(cRe)),n._polygonHierarchy=i,n._ellipsoid=Z.clone(o,n._ellipsoid),n._height=r,n._extrudedHeight=a,n._granularity=s,n._perPositionHeight=l,n._perPositionHeightExtrude=A,n._arcType=f,n._offsetAttribute=h===-1?void 0:h,n.packedLength=m,n};wh.fromPositions=function(e){e=e??k.EMPTY_OBJECT;let t={polygonHierarchy:{positions:e.positions},height:e.height,extrudedHeight:e.extrudedHeight,ellipsoid:e.ellipsoid,granularity:e.granularity,perPositionHeight:e.perPositionHeight,arcType:e.arcType,offsetAttribute:e.offsetAttribute};return new wh(t)};wh.createGeometry=function(e){let t=e._ellipsoid,n=e._granularity,i=e._polygonHierarchy,o=e._perPositionHeight,r=e._arcType,a=rn.polygonOutlinesFromHierarchy(i,!o,t);if(a.length===0)return;let s,A=[],l=w.chordLength(n,t.maximumRadius),f=e._height,h=e._extrudedHeight,m=e._perPositionHeightExtrude||!w.equalsEpsilon(f,h,0,w.EPSILON2),p,g;if(m)for(g=0;g<a.length;g++){if(s=aRe(t,a[g],l,o,r),s.geometry=rn.scaleToGeodeticHeightExtruded(s.geometry,f,h,t,o),c(e._offsetAttribute)){let E=s.geometry.attributes.position.values.length/3,I=new Uint8Array(E);e._offsetAttribute===xt.TOP?I=I.fill(1,0,E/2):(p=e._offsetAttribute===xt.NONE?0:1,I=I.fill(p)),s.geometry.attributes.applyOffset=new ue({componentDatatype:N.UNSIGNED_BYTE,componentsPerAttribute:1,values:I})}A.push(s)}else for(g=0;g<a.length;g++){if(s=rRe(t,a[g],l,o,r),s.geometry.attributes.position.values=Tn.scaleToGeodeticHeight(s.geometry.attributes.position.values,f,t,!o),c(e._offsetAttribute)){let E=s.geometry.attributes.position.values.length;p=e._offsetAttribute===xt.NONE?0:1;let I=new Uint8Array(E/3).fill(p);s.geometry.attributes.applyOffset=new ue({componentDatatype:N.UNSIGNED_BYTE,componentsPerAttribute:1,values:I})}A.push(s)}let C=Mn.combineInstances(A)[0],_=ee.fromVertices(C.attributes.position.values);return new ze({attributes:C.attributes,indices:C.indices,primitiveType:C.primitiveType,boundingSphere:_,offsetAttribute:e._offsetAttribute})};var mJ=wh;var pJ="Entity polygons cannot have both height and perPositionHeight.  height will be ignored",gJ="heightReference is not supported for entity polygons with perPositionHeight. heightReference will be ignored",CJ=new F,_J=u.ZERO,EJ=new u,IJ=new ce,ARe=[],lRe=new U;function fRe(e){this.id=e,this.vertexFormat=void 0,this.polygonHierarchy=void 0,this.perPositionHeight=void 0,this.closeTop=void 0,this.closeBottom=void 0,this.height=void 0,this.extrudedHeight=void 0,this.granularity=void 0,this.stRotation=void 0,this.offsetAttribute=void 0,this.arcType=void 0,this.textureCoordinates=void 0}function Cs(e,t){an.call(this,{entity:e,scene:t,geometryOptions:new fRe(e),geometryPropertyName:"polygon",observedPropertyNames:["availability","polygon"]}),this._onEntityPropertyChanged(e,"polygon",e.polygon,void 0)}c(Object.create)&&(Cs.prototype=Object.create(an.prototype),Cs.prototype.constructor=Cs);Cs.prototype.createFillGeometryInstance=function(e){let t=this._entity,n=t.isAvailable(e),i=this._options,o={show:new kt(n&&t.isShowing&&this._showProperty.getValue(e)&&this._fillProperty.getValue(e)),distanceDisplayCondition:Kt.fromDistanceDisplayCondition(this._distanceDisplayConditionProperty.getValue(e)),offset:void 0,color:void 0};if(this._materialProperty instanceof lt){let a;c(this._materialProperty.color)&&(this._materialProperty.color.isConstant||n)&&(a=this._materialProperty.color.getValue(e,CJ)),c(a)||(a=F.WHITE),o.color=Tt.fromColor(a)}c(i.offsetAttribute)&&(o.offset=ii.fromCartesian3(M.getValueOrDefault(this._terrainOffsetProperty,e,_J,EJ)));let r;return i.perPositionHeight&&!c(i.extrudedHeight)?r=new dJ(i):r=new Fm(i),new gt({id:t,geometry:r,attributes:o})};Cs.prototype.createOutlineGeometryInstance=function(e){let t=this._entity,n=t.isAvailable(e),i=this._options,o=M.getValueOrDefault(this._outlineColorProperty,e,F.BLACK,CJ),r=this._distanceDisplayConditionProperty.getValue(e),a={show:new kt(n&&t.isShowing&&this._showProperty.getValue(e)&&this._showOutlineProperty.getValue(e)),color:Tt.fromColor(o),distanceDisplayCondition:Kt.fromDistanceDisplayCondition(r),offset:void 0};c(i.offsetAttribute)&&(a.offset=ii.fromCartesian3(M.getValueOrDefault(this._terrainOffsetProperty,e,_J,EJ)));let s;return i.perPositionHeight&&!c(i.extrudedHeight)?s=new $l(i):s=new mJ(i),new gt({id:t,geometry:s,attributes:a})};Cs.prototype._computeCenter=function(e,t){let n=M.getValueOrUndefined(this._entity.polygon.hierarchy,e);if(!c(n))return;let i=n.positions;if(i.length===0)return;let o=this._scene.ellipsoid,r=Fo.fromPoints(i,o),a=r.projectPointsOntoPlane(i,ARe),s=a.length,A=0,l=s-1,f=new U;for(let m=0;m<s;l=m++){let p=a[m],g=a[l],C=p.x*g.y-g.x*p.y,_=U.add(p,g,lRe);_=U.multiplyByScalar(_,C,_),f=U.add(f,_,f),A+=C}let h=1/(A*3);return f=U.multiplyByScalar(f,h,f),r.projectPointOntoEllipsoid(f,t)};Cs.prototype._isHidden=function(e,t){return!c(t.hierarchy)||ln.prototype._isHidden.call(this,e,t)};Cs.prototype._isOnTerrain=function(e,t){let n=an.prototype._isOnTerrain.call(this,e,t),i=t.perPositionHeight,o=c(i)&&(i.isConstant?i.getValue(Re.MINIMUM_VALUE):!0);return n&&!o};Cs.prototype._isDynamic=function(e,t){return!t.hierarchy.isConstant||!M.isConstant(t.height)||!M.isConstant(t.extrudedHeight)||!M.isConstant(t.granularity)||!M.isConstant(t.stRotation)||!M.isConstant(t.textureCoordinates)||!M.isConstant(t.outlineWidth)||!M.isConstant(t.perPositionHeight)||!M.isConstant(t.closeTop)||!M.isConstant(t.closeBottom)||!M.isConstant(t.zIndex)||!M.isConstant(t.arcType)||this._onTerrain&&!M.isConstant(this._materialProperty)&&!(this._materialProperty instanceof lt)};Cs.prototype._setStaticOptions=function(e,t){let n=this._materialProperty instanceof lt,i=this._options;i.vertexFormat=n?Vt.VERTEX_FORMAT:Zn.MaterialSupport.TEXTURED.vertexFormat;let o=t.hierarchy.getValue(Re.MINIMUM_VALUE),r=M.getValueOrUndefined(t.height,Re.MINIMUM_VALUE),a=M.getValueOrDefault(t.heightReference,Re.MINIMUM_VALUE,Ge.NONE),s=M.getValueOrUndefined(t.extrudedHeight,Re.MINIMUM_VALUE),A=M.getValueOrDefault(t.extrudedHeightReference,Re.MINIMUM_VALUE,Ge.NONE),l=M.getValueOrDefault(t.perPositionHeight,Re.MINIMUM_VALUE,!1);r=an.getGeometryHeight(r,a);let f;if(l?(c(r)&&(r=void 0,jt(pJ)),a!==Ge.NONE&&l&&(r=void 0,jt(gJ))):(c(s)&&!c(r)&&(r=0),f=an.computeGeometryOffsetAttribute(r,a,s,A)),i.polygonHierarchy=o,i.granularity=M.getValueOrUndefined(t.granularity,Re.MINIMUM_VALUE),i.stRotation=M.getValueOrUndefined(t.stRotation,Re.MINIMUM_VALUE),i.perPositionHeight=l,i.closeTop=M.getValueOrDefault(t.closeTop,Re.MINIMUM_VALUE,!0),i.closeBottom=M.getValueOrDefault(t.closeBottom,Re.MINIMUM_VALUE,!0),i.offsetAttribute=f,i.height=r,i.arcType=M.getValueOrDefault(t.arcType,Re.MINIMUM_VALUE,Yt.GEODESIC),i.textureCoordinates=M.getValueOrUndefined(t.textureCoordinates,Re.MINIMUM_VALUE),s=an.getGeometryExtrudedHeight(s,A),s===an.CLAMP_TO_GROUND){let h=Fm.computeRectangleFromPositions(i.polygonHierarchy.positions,i.ellipsoid,i.arcType,IJ);s=On.getMinimumMaximumHeights(h).minimumTerrainHeight}i.extrudedHeight=s};Cs.prototype._getIsClosed=function(e){let t=e.height,n=e.extrudedHeight,i=c(n)&&n!==t;return!e.perPositionHeight&&(!i&&t===0||i&&e.closeTop&&e.closeBottom)};Cs.DynamicGeometryUpdater=og;function og(e,t,n){An.call(this,e,t,n)}c(Object.create)&&(og.prototype=Object.create(An.prototype),og.prototype.constructor=og);og.prototype._isHidden=function(e,t,n){return!c(this._options.polygonHierarchy)||An.prototype._isHidden.call(this,e,t,n)};og.prototype._setOptions=function(e,t,n){let i=this._options;i.polygonHierarchy=M.getValueOrUndefined(t.hierarchy,n);let o=M.getValueOrUndefined(t.height,n),r=M.getValueOrDefault(t.heightReference,n,Ge.NONE),a=M.getValueOrDefault(t.extrudedHeightReference,n,Ge.NONE),s=M.getValueOrUndefined(t.extrudedHeight,n),A=M.getValueOrUndefined(t.perPositionHeight,n);o=an.getGeometryHeight(o,a);let l;if(A?(c(o)&&(o=void 0,jt(pJ)),r!==Ge.NONE&&A&&(o=void 0,jt(gJ))):(c(s)&&!c(o)&&(o=0),l=an.computeGeometryOffsetAttribute(o,r,s,a)),i.granularity=M.getValueOrUndefined(t.granularity,n),i.stRotation=M.getValueOrUndefined(t.stRotation,n),i.textureCoordinates=M.getValueOrUndefined(t.textureCoordinates,n),i.perPositionHeight=M.getValueOrUndefined(t.perPositionHeight,n),i.closeTop=M.getValueOrDefault(t.closeTop,n,!0),i.closeBottom=M.getValueOrDefault(t.closeBottom,n,!0),i.offsetAttribute=l,i.height=o,i.arcType=M.getValueOrDefault(t.arcType,n,Yt.GEODESIC),s=an.getGeometryExtrudedHeight(s,a),s===an.CLAMP_TO_GROUND){let f=Fm.computeRectangleFromPositions(i.polygonHierarchy.positions,i.ellipsoid,i.arcType,IJ);s=On.getMinimumMaximumHeights(f).minimumTerrainHeight}i.extrudedHeight=s};var yJ=Cs;function uRe(e,t,n,i){let o=new Mt;i.position&&(o.position=new ue({componentDatatype:N.DOUBLE,componentsPerAttribute:3,values:e}));let r=t.length,a=e.length/3,s=(a-r*2)/(r*2),A=Tn.triangulate(t),l=(s-1)*r*6+A.length*2,f=Be.createTypedArray(a,l),h,m,p,g,C,_,E=r*2,I=0;for(h=0;h<s-1;h++){for(m=0;m<r-1;m++)p=m*2+h*r*2,_=p+E,g=p+1,C=g+E,f[I++]=g,f[I++]=p,f[I++]=C,f[I++]=C,f[I++]=p,f[I++]=_;p=r*2-2+h*r*2,g=p+1,C=g+E,_=p+E,f[I++]=g,f[I++]=p,f[I++]=C,f[I++]=C,f[I++]=p,f[I++]=_}if(i.st||i.tangent||i.bitangent){let x=new Float32Array(a*2),S=1/(s-1),P=1/n.height,D=n.height/2,Q,v,d=0;for(h=0;h<s;h++){for(Q=h*S,v=P*(t[0].y+D),x[d++]=Q,x[d++]=v,m=1;m<r;m++)v=P*(t[m].y+D),x[d++]=Q,x[d++]=v,x[d++]=Q,x[d++]=v;v=P*(t[0].y+D),x[d++]=Q,x[d++]=v}for(m=0;m<r;m++)Q=0,v=P*(t[m].y+D),x[d++]=Q,x[d++]=v;for(m=0;m<r;m++)Q=(s-1)*S,v=P*(t[m].y+D),x[d++]=Q,x[d++]=v;o.st=new ue({componentDatatype:N.FLOAT,componentsPerAttribute:2,values:new Float32Array(x)})}let y=a-r*2;for(h=0;h<A.length;h+=3){let x=A[h]+y,S=A[h+1]+y,P=A[h+2]+y;f[I++]=x,f[I++]=S,f[I++]=P,f[I++]=P+r,f[I++]=S+r,f[I++]=x+r}let b=new ze({attributes:o,indices:f,boundingSphere:ee.fromVertices(e),primitiveType:Ce.TRIANGLES});if(i.normal&&(b=Mn.computeNormal(b)),i.tangent||i.bitangent){try{b=Mn.computeTangentAndBitangent(b)}catch{jt("polyline-volume-tangent-bitangent","Unable to compute tangents and bitangents for polyline volume geometry")}i.tangent||(b.attributes.tangent=void 0),i.bitangent||(b.attributes.bitangent=void 0),i.st||(b.attributes.st=void 0)}return b}function bE(e){e=e??k.EMPTY_OBJECT;let t=e.polylinePositions,n=e.shapePositions;this._positions=t,this._shape=n,this._ellipsoid=Z.clone(e.ellipsoid??Z.default),this._cornerType=e.cornerType??Hn.ROUNDED,this._vertexFormat=ge.clone(e.vertexFormat??ge.DEFAULT),this._granularity=e.granularity??w.RADIANS_PER_DEGREE,this._workerName="createPolylineVolumeGeometry";let i=1+t.length*u.packedLength;i+=1+n.length*U.packedLength,this.packedLength=i+Z.packedLength+ge.packedLength+2}bE.pack=function(e,t,n){n=n??0;let i,o=e._positions,r=o.length;for(t[n++]=r,i=0;i<r;++i,n+=u.packedLength)u.pack(o[i],t,n);let a=e._shape;for(r=a.length,t[n++]=r,i=0;i<r;++i,n+=U.packedLength)U.pack(a[i],t,n);return Z.pack(e._ellipsoid,t,n),n+=Z.packedLength,ge.pack(e._vertexFormat,t,n),n+=ge.packedLength,t[n++]=e._cornerType,t[n]=e._granularity,t};var bJ=Z.clone(Z.UNIT_SPHERE),BJ=new ge,yE={polylinePositions:void 0,shapePositions:void 0,ellipsoid:bJ,vertexFormat:BJ,cornerType:void 0,granularity:void 0};bE.unpack=function(e,t,n){t=t??0;let i,o=e[t++],r=new Array(o);for(i=0;i<o;++i,t+=u.packedLength)r[i]=u.unpack(e,t);o=e[t++];let a=new Array(o);for(i=0;i<o;++i,t+=U.packedLength)a[i]=U.unpack(e,t);let s=Z.unpack(e,t,bJ);t+=Z.packedLength;let A=ge.unpack(e,t,BJ);t+=ge.packedLength;let l=e[t++],f=e[t];return c(n)?(n._positions=r,n._shape=a,n._ellipsoid=Z.clone(s,n._ellipsoid),n._vertexFormat=ge.clone(A,n._vertexFormat),n._cornerType=l,n._granularity=f,n):(yE.polylinePositions=r,yE.shapePositions=a,yE.cornerType=l,yE.granularity=f,new bE(yE))};var dRe=new Jt;bE.createGeometry=function(e){let t=e._positions,n=Bi(t,u.equalsEpsilon),i=e._shape;if(i=Hu.removeDuplicatesFromShape(i),n.length<2||i.length<3)return;Tn.computeWindingOrder2D(i)===Jo.CLOCKWISE&&i.reverse();let o=Jt.fromPoints(i,dRe),r=Hu.computePositions(n,i,o,e,!0);return uRe(r,i,o,e._vertexFormat)};var xJ=bE;function hRe(e,t){let n=new Mt;n.position=new ue({componentDatatype:N.DOUBLE,componentsPerAttribute:3,values:e});let i=t.length,o=n.position.values.length/3,a=e.length/3/i,s=Be.createTypedArray(o,2*i*(a+1)),A,l,f=0;A=0;let h=A*i;for(l=0;l<i-1;l++)s[f++]=l+h,s[f++]=l+h+1;for(s[f++]=i-1+h,s[f++]=h,A=a-1,h=A*i,l=0;l<i-1;l++)s[f++]=l+h,s[f++]=l+h+1;for(s[f++]=i-1+h,s[f++]=h,A=0;A<a-1;A++){let p=i*A,g=p+i;for(l=0;l<i;l++)s[f++]=l+p,s[f++]=l+g}return new ze({attributes:n,indices:Be.createTypedArray(o,s),boundingSphere:ee.fromVertices(e),primitiveType:Ce.LINES})}function xE(e){e=e??k.EMPTY_OBJECT;let t=e.polylinePositions,n=e.shapePositions;this._positions=t,this._shape=n,this._ellipsoid=Z.clone(e.ellipsoid??Z.default),this._cornerType=e.cornerType??Hn.ROUNDED,this._granularity=e.granularity??w.RADIANS_PER_DEGREE,this._workerName="createPolylineVolumeOutlineGeometry";let i=1+t.length*u.packedLength;i+=1+n.length*U.packedLength,this.packedLength=i+Z.packedLength+2}xE.pack=function(e,t,n){n=n??0;let i,o=e._positions,r=o.length;for(t[n++]=r,i=0;i<r;++i,n+=u.packedLength)u.pack(o[i],t,n);let a=e._shape;for(r=a.length,t[n++]=r,i=0;i<r;++i,n+=U.packedLength)U.pack(a[i],t,n);return Z.pack(e._ellipsoid,t,n),n+=Z.packedLength,t[n++]=e._cornerType,t[n]=e._granularity,t};var TJ=Z.clone(Z.UNIT_SPHERE),BE={polylinePositions:void 0,shapePositions:void 0,ellipsoid:TJ,height:void 0,cornerType:void 0,granularity:void 0};xE.unpack=function(e,t,n){t=t??0;let i,o=e[t++],r=new Array(o);for(i=0;i<o;++i,t+=u.packedLength)r[i]=u.unpack(e,t);o=e[t++];let a=new Array(o);for(i=0;i<o;++i,t+=U.packedLength)a[i]=U.unpack(e,t);let s=Z.unpack(e,t,TJ);t+=Z.packedLength;let A=e[t++],l=e[t];return c(n)?(n._positions=r,n._shape=a,n._ellipsoid=Z.clone(s,n._ellipsoid),n._cornerType=A,n._granularity=l,n):(BE.polylinePositions=r,BE.shapePositions=a,BE.cornerType=A,BE.granularity=l,new xE(BE))};var mRe=new Jt;xE.createGeometry=function(e){let t=e._positions,n=Bi(t,u.equalsEpsilon),i=e._shape;if(i=Hu.removeDuplicatesFromShape(i),n.length<2||i.length<3)return;Tn.computeWindingOrder2D(i)===Jo.CLOCKWISE&&i.reverse();let o=Jt.fromPoints(i,mRe),r=Hu.computePositions(n,i,o,e,!1);return hRe(r,i)};var SJ=xE;var wJ=new F;function pRe(e){this.id=e,this.vertexFormat=void 0,this.polylinePositions=void 0,this.shapePositions=void 0,this.cornerType=void 0,this.granularity=void 0}function JA(e,t){ln.call(this,{entity:e,scene:t,geometryOptions:new pRe(e),geometryPropertyName:"polylineVolume",observedPropertyNames:["availability","polylineVolume"]}),this._onEntityPropertyChanged(e,"polylineVolume",e.polylineVolume,void 0)}c(Object.create)&&(JA.prototype=Object.create(ln.prototype),JA.prototype.constructor=JA);JA.prototype.createFillGeometryInstance=function(e){let t=this._entity,n=t.isAvailable(e),i,o,r=new kt(n&&t.isShowing&&this._showProperty.getValue(e)&&this._fillProperty.getValue(e)),a=this._distanceDisplayConditionProperty.getValue(e),s=Kt.fromDistanceDisplayCondition(a);if(this._materialProperty instanceof lt){let A;c(this._materialProperty.color)&&(this._materialProperty.color.isConstant||n)&&(A=this._materialProperty.color.getValue(e,wJ)),c(A)||(A=F.WHITE),o=Tt.fromColor(A),i={show:r,distanceDisplayCondition:s,color:o}}else i={show:r,distanceDisplayCondition:s};return new gt({id:t,geometry:new xJ(this._options),attributes:i})};JA.prototype.createOutlineGeometryInstance=function(e){let t=this._entity,n=t.isAvailable(e),i=M.getValueOrDefault(this._outlineColorProperty,e,F.BLACK,wJ),o=this._distanceDisplayConditionProperty.getValue(e);return new gt({id:t,geometry:new SJ(this._options),attributes:{show:new kt(n&&t.isShowing&&this._showProperty.getValue(e)&&this._showOutlineProperty.getValue(e)),color:Tt.fromColor(i),distanceDisplayCondition:Kt.fromDistanceDisplayCondition(o)}})};JA.prototype._isHidden=function(e,t){return!c(t.positions)||!c(t.shape)||ln.prototype._isHidden.call(this,e,t)};JA.prototype._isDynamic=function(e,t){return!t.positions.isConstant||!t.shape.isConstant||!M.isConstant(t.granularity)||!M.isConstant(t.outlineWidth)||!M.isConstant(t.cornerType)};JA.prototype._setStaticOptions=function(e,t){let n=t.granularity,i=t.cornerType,o=this._options,r=this._materialProperty instanceof lt;o.vertexFormat=r?Vt.VERTEX_FORMAT:Zn.MaterialSupport.TEXTURED.vertexFormat,o.polylinePositions=t.positions.getValue(Re.MINIMUM_VALUE,o.polylinePositions),o.shapePositions=t.shape.getValue(Re.MINIMUM_VALUE,o.shape),o.granularity=c(n)?n.getValue(Re.MINIMUM_VALUE):void 0,o.cornerType=c(i)?i.getValue(Re.MINIMUM_VALUE):void 0};JA.DynamicGeometryUpdater=rg;function rg(e,t,n){An.call(this,e,t,n)}c(Object.create)&&(rg.prototype=Object.create(An.prototype),rg.prototype.constructor=rg);rg.prototype._isHidden=function(e,t,n){let i=this._options;return!c(i.polylinePositions)||!c(i.shapePositions)||An.prototype._isHidden.call(this,e,t,n)};rg.prototype._setOptions=function(e,t,n){let i=this._options;i.polylinePositions=M.getValueOrUndefined(t.positions,n,i.polylinePositions),i.shapePositions=M.getValueOrUndefined(t.shape,n),i.granularity=M.getValueOrUndefined(t.granularity,n),i.cornerType=M.getValueOrUndefined(t.cornerType,n)};var DJ=JA;var ev=new u,vJ=new u,PJ=new u,MJ=new u,OJ=new ce,gRe=new U,CRe=new ee,_Re=new ee;function LJ(e,t){let n=new ze({attributes:new Mt,primitiveType:Ce.TRIANGLES});return n.attributes.position=new ue({componentDatatype:N.DOUBLE,componentsPerAttribute:3,values:t.positions}),e.normal&&(n.attributes.normal=new ue({componentDatatype:N.FLOAT,componentsPerAttribute:3,values:t.normals})),e.tangent&&(n.attributes.tangent=new ue({componentDatatype:N.FLOAT,componentsPerAttribute:3,values:t.tangents})),e.bitangent&&(n.attributes.bitangent=new ue({componentDatatype:N.FLOAT,componentsPerAttribute:3,values:t.bitangents})),n}function ERe(e,t,n,i){let o=e.length,r=t.normal?new Float32Array(o):void 0,a=t.tangent?new Float32Array(o):void 0,s=t.bitangent?new Float32Array(o):void 0,A=0,l=MJ,f=PJ,h=vJ;if(t.normal||t.tangent||t.bitangent)for(let m=0;m<o;m+=3){let p=u.fromArray(e,m,ev),g=A+1,C=A+2;h=n.geodeticSurfaceNormal(p,h),(t.tangent||t.bitangent)&&(u.cross(u.UNIT_Z,h,f),J.multiplyByVector(i,f,f),u.normalize(f,f),t.bitangent&&u.normalize(u.cross(h,f,l),l)),t.normal&&(r[A]=h.x,r[g]=h.y,r[C]=h.z),t.tangent&&(a[A]=f.x,a[g]=f.y,a[C]=f.z),t.bitangent&&(s[A]=l.x,s[g]=l.y,s[C]=l.z),A+=3}return LJ(t,{positions:e,normals:r,tangents:a,bitangents:s})}var tv=new u,NJ=new u;function IRe(e,t,n){let i=e.length,o=t.normal?new Float32Array(i):void 0,r=t.tangent?new Float32Array(i):void 0,a=t.bitangent?new Float32Array(i):void 0,s=0,A=0,l=0,f=!0,h=MJ,m=PJ,p=vJ;if(t.normal||t.tangent||t.bitangent)for(let g=0;g<i;g+=6){let C=u.fromArray(e,g,ev),_=u.fromArray(e,(g+6)%i,tv);if(f){let E=u.fromArray(e,(g+3)%i,NJ);u.subtract(_,C,_),u.subtract(E,C,E),p=u.normalize(u.cross(E,_,p),p),f=!1}u.equalsEpsilon(_,C,w.EPSILON10)&&(f=!0),(t.tangent||t.bitangent)&&(h=n.geodeticSurfaceNormal(C,h),t.tangent&&(m=u.normalize(u.cross(h,p,m),m))),t.normal&&(o[s++]=p.x,o[s++]=p.y,o[s++]=p.z,o[s++]=p.x,o[s++]=p.y,o[s++]=p.z),t.tangent&&(r[A++]=m.x,r[A++]=m.y,r[A++]=m.z,r[A++]=m.x,r[A++]=m.y,r[A++]=m.z),t.bitangent&&(a[l++]=h.x,a[l++]=h.y,a[l++]=h.z,a[l++]=h.x,a[l++]=h.y,a[l++]=h.z)}return LJ(t,{positions:e,normals:o,tangents:r,bitangents:a})}function FJ(e,t){let n=e._vertexFormat,i=e._ellipsoid,o=t.height,r=t.width,a=t.northCap,s=t.southCap,A=0,l=o,f=o,h=0;a&&(A=1,f-=1,h+=1),s&&(l-=1,f-=1,h+=1),h+=r*f;let m=n.position?new Float64Array(h*3):void 0,p=n.st?new Float32Array(h*2):void 0,g=0,C=0,_=ev,E=gRe,I=Number.MAX_VALUE,y=Number.MAX_VALUE,b=-Number.MAX_VALUE,x=-Number.MAX_VALUE;for(let B=A;B<l;++B)for(let T=0;T<r;++T)pr.computePosition(t,i,n.st,B,T,_,E),m[g++]=_.x,m[g++]=_.y,m[g++]=_.z,n.st&&(p[C++]=E.x,p[C++]=E.y,I=Math.min(I,E.x),y=Math.min(y,E.y),b=Math.max(b,E.x),x=Math.max(x,E.y));if(a&&(pr.computePosition(t,i,n.st,0,0,_,E),m[g++]=_.x,m[g++]=_.y,m[g++]=_.z,n.st&&(p[C++]=E.x,p[C++]=E.y,I=E.x,y=E.y,b=E.x,x=E.y)),s&&(pr.computePosition(t,i,n.st,o-1,0,_,E),m[g++]=_.x,m[g++]=_.y,m[g]=_.z,n.st&&(p[C++]=E.x,p[C]=E.y,I=Math.min(I,E.x),y=Math.min(y,E.y),b=Math.max(b,E.x),x=Math.max(x,E.y))),n.st&&(I<0||y<0||b>1||x>1))for(let B=0;B<p.length;B+=2)p[B]=(p[B]-I)/(b-I),p[B+1]=(p[B+1]-y)/(x-y);let S=ERe(m,n,i,t.tangentRotationMatrix),P=6*(r-1)*(f-1);a&&(P+=3*(r-1)),s&&(P+=3*(r-1));let D=Be.createTypedArray(h,P),Q=0,v=0,d;for(d=0;d<f-1;++d){for(let B=0;B<r-1;++B){let T=Q,R=T+r,L=R+1,G=T+1;D[v++]=T,D[v++]=R,D[v++]=G,D[v++]=G,D[v++]=R,D[v++]=L,++Q}++Q}if(a||s){let B=h-1,T=h-1;a&&s&&(B=h-2);let R,L;if(Q=0,a)for(d=0;d<r-1;d++)R=Q,L=R+1,D[v++]=B,D[v++]=R,D[v++]=L,++Q;if(s)for(Q=(f-1)*r,d=0;d<r-1;d++)R=Q,L=R+1,D[v++]=R,D[v++]=T,D[v++]=L,++Q}return S.indices=D,n.st&&(S.attributes.st=new ue({componentDatatype:N.FLOAT,componentsPerAttribute:2,values:p})),S}function ag(e,t,n,i,o){return e[t++]=i[n],e[t++]=i[n+1],e[t++]=i[n+2],e[t++]=o[n],e[t++]=o[n+1],e[t]=o[n+2],e}function sg(e,t,n,i){return e[t++]=i[n],e[t++]=i[n+1],e[t++]=i[n],e[t]=i[n+1],e}var nv=new ge;function yRe(e,t){let n=e._shadowVolume,i=e._offsetAttribute,o=e._vertexFormat,r=e._extrudedHeight,a=e._surfaceHeight,s=e._ellipsoid,A=t.height,l=t.width,f;if(n){let sn=ge.clone(o,nv);sn.normal=!0,e._vertexFormat=sn}let h=FJ(e,t);n&&(e._vertexFormat=o);let m=Tn.scaleToGeodeticHeight(h.attributes.position.values,a,s,!1);m=new Float64Array(m);let p=m.length,g=p*2,C=new Float64Array(g);C.set(m);let _=Tn.scaleToGeodeticHeight(h.attributes.position.values,r,s);C.set(_,p),h.attributes.position.values=C;let E=o.normal?new Float32Array(g):void 0,I=o.tangent?new Float32Array(g):void 0,y=o.bitangent?new Float32Array(g):void 0,b=o.st?new Float32Array(g/3*2):void 0,x,S;if(o.normal){for(S=h.attributes.normal.values,E.set(S),f=0;f<p;f++)S[f]=-S[f];E.set(S,p),h.attributes.normal.values=E}if(n){S=h.attributes.normal.values,o.normal||(h.attributes.normal=void 0);let sn=new Float32Array(g);for(f=0;f<p;f++)S[f]=-S[f];sn.set(S,p),h.attributes.extrudeDirection=new ue({componentDatatype:N.FLOAT,componentsPerAttribute:3,values:sn})}let P,D=c(i);if(D){let sn=p/3*2,ri=new Uint8Array(sn);i===xt.TOP?ri=ri.fill(1,0,sn/2):(P=i===xt.NONE?0:1,ri=ri.fill(P)),h.attributes.applyOffset=new ue({componentDatatype:N.UNSIGNED_BYTE,componentsPerAttribute:1,values:ri})}if(o.tangent){let sn=h.attributes.tangent.values;for(I.set(sn),f=0;f<p;f++)sn[f]=-sn[f];I.set(sn,p),h.attributes.tangent.values=I}if(o.bitangent){let sn=h.attributes.bitangent.values;y.set(sn),y.set(sn,p),h.attributes.bitangent.values=y}o.st&&(x=h.attributes.st.values,b.set(x),b.set(x,p/3*2),h.attributes.st.values=b);let Q=h.indices,v=Q.length,d=p/3,B=Be.createTypedArray(g/3,v*2);for(B.set(Q),f=0;f<v;f+=3)B[f+v]=Q[f+2]+d,B[f+1+v]=Q[f+1]+d,B[f+2+v]=Q[f]+d;h.indices=B;let T=t.northCap,R=t.southCap,L=A,G=2,q=0,z=4,K=4;T&&(G-=1,L-=1,q+=1,z-=2,K-=1),R&&(G-=1,L-=1,q+=1,z-=2,K-=1),q+=G*l+2*L-z;let ie=(q+K)*2,le=new Float64Array(ie*3),de=n?new Float32Array(ie*3):void 0,he=D?new Uint8Array(ie):void 0,Se=o.st?new Float32Array(ie*2):void 0,be=i===xt.TOP;D&&!be&&(P=i===xt.ALL?1:0,he=he.fill(P));let _e=0,Ct=0,ft=0,At=0,at=l*L,Xe;for(f=0;f<at;f+=l)Xe=f*3,le=ag(le,_e,Xe,m,_),_e+=6,o.st&&(Se=sg(Se,Ct,f*2,x),Ct+=4),n&&(ft+=3,de[ft++]=S[Xe],de[ft++]=S[Xe+1],de[ft++]=S[Xe+2]),be&&(he[At++]=1,At+=1);if(R){let sn=T?at+1:at;for(Xe=sn*3,f=0;f<2;f++)le=ag(le,_e,Xe,m,_),_e+=6,o.st&&(Se=sg(Se,Ct,sn*2,x),Ct+=4),n&&(ft+=3,de[ft++]=S[Xe],de[ft++]=S[Xe+1],de[ft++]=S[Xe+2]),be&&(he[At++]=1,At+=1)}else for(f=at-l;f<at;f++)Xe=f*3,le=ag(le,_e,Xe,m,_),_e+=6,o.st&&(Se=sg(Se,Ct,f*2,x),Ct+=4),n&&(ft+=3,de[ft++]=S[Xe],de[ft++]=S[Xe+1],de[ft++]=S[Xe+2]),be&&(he[At++]=1,At+=1);for(f=at-1;f>0;f-=l)Xe=f*3,le=ag(le,_e,Xe,m,_),_e+=6,o.st&&(Se=sg(Se,Ct,f*2,x),Ct+=4),n&&(ft+=3,de[ft++]=S[Xe],de[ft++]=S[Xe+1],de[ft++]=S[Xe+2]),be&&(he[At++]=1,At+=1);if(T){let sn=at;for(Xe=sn*3,f=0;f<2;f++)le=ag(le,_e,Xe,m,_),_e+=6,o.st&&(Se=sg(Se,Ct,sn*2,x),Ct+=4),n&&(ft+=3,de[ft++]=S[Xe],de[ft++]=S[Xe+1],de[ft++]=S[Xe+2]),be&&(he[At++]=1,At+=1)}else for(f=l-1;f>=0;f--)Xe=f*3,le=ag(le,_e,Xe,m,_),_e+=6,o.st&&(Se=sg(Se,Ct,f*2,x),Ct+=4),n&&(ft+=3,de[ft++]=S[Xe],de[ft++]=S[Xe+1],de[ft++]=S[Xe+2]),be&&(he[At++]=1,At+=1);let wt=IRe(le,o,s);o.st&&(wt.attributes.st=new ue({componentDatatype:N.FLOAT,componentsPerAttribute:2,values:Se})),n&&(wt.attributes.extrudeDirection=new ue({componentDatatype:N.FLOAT,componentsPerAttribute:3,values:de})),D&&(wt.attributes.applyOffset=new ue({componentDatatype:N.UNSIGNED_BYTE,componentsPerAttribute:1,values:he}));let zt=Be.createTypedArray(ie,q*6),ti,Li,Cn,yt;p=le.length/3;let Un=0;for(f=0;f<p-1;f+=2){ti=f,yt=(ti+2)%p;let sn=u.fromArray(le,ti*3,tv),ri=u.fromArray(le,yt*3,NJ);u.equalsEpsilon(sn,ri,w.EPSILON10)||(Li=(ti+1)%p,Cn=(Li+2)%p,zt[Un++]=ti,zt[Un++]=Li,zt[Un++]=yt,zt[Un++]=yt,zt[Un++]=Li,zt[Un++]=Cn)}return wt.indices=zt,wt=Mn.combineInstances([new gt({geometry:h}),new gt({geometry:wt})]),wt[0]}var bRe=[new u,new u,new u,new u],kJ=new ae,BRe=new ae;function iv(e,t,n,i,o){if(n===0)return ce.clone(e,o);let r=pr.computeOptions(e,t,n,0,OJ,kJ),a=r.height,s=r.width,A=bRe;return pr.computePosition(r,i,!1,0,0,A[0]),pr.computePosition(r,i,!1,0,s-1,A[1]),pr.computePosition(r,i,!1,a-1,0,A[2]),pr.computePosition(r,i,!1,a-1,s-1,A[3]),ce.fromCartesianArray(A,i,o)}function KA(e){e=e??k.EMPTY_OBJECT;let t=e.rectangle,n=e.height??0,i=e.extrudedHeight??n;this._rectangle=ce.clone(t),this._granularity=e.granularity??w.RADIANS_PER_DEGREE,this._ellipsoid=Z.clone(e.ellipsoid??Z.default),this._surfaceHeight=Math.max(n,i),this._rotation=e.rotation??0,this._stRotation=e.stRotation??0,this._vertexFormat=ge.clone(e.vertexFormat??ge.DEFAULT),this._extrudedHeight=Math.min(n,i),this._shadowVolume=e.shadowVolume??!1,this._workerName="createRectangleGeometry",this._offsetAttribute=e.offsetAttribute,this._rotatedRectangle=void 0,this._textureCoordinateRotationPoints=void 0}KA.packedLength=ce.packedLength+Z.packedLength+ge.packedLength+7;KA.pack=function(e,t,n){return n=n??0,ce.pack(e._rectangle,t,n),n+=ce.packedLength,Z.pack(e._ellipsoid,t,n),n+=Z.packedLength,ge.pack(e._vertexFormat,t,n),n+=ge.packedLength,t[n++]=e._granularity,t[n++]=e._surfaceHeight,t[n++]=e._rotation,t[n++]=e._stRotation,t[n++]=e._extrudedHeight,t[n++]=e._shadowVolume?1:0,t[n]=e._offsetAttribute??-1,t};var UJ=new ce,GJ=Z.clone(Z.UNIT_SPHERE),ed={rectangle:UJ,ellipsoid:GJ,vertexFormat:nv,granularity:void 0,height:void 0,rotation:void 0,stRotation:void 0,extrudedHeight:void 0,shadowVolume:void 0,offsetAttribute:void 0};KA.unpack=function(e,t,n){t=t??0;let i=ce.unpack(e,t,UJ);t+=ce.packedLength;let o=Z.unpack(e,t,GJ);t+=Z.packedLength;let r=ge.unpack(e,t,nv);t+=ge.packedLength;let a=e[t++],s=e[t++],A=e[t++],l=e[t++],f=e[t++],h=e[t++]===1,m=e[t];return c(n)?(n._rectangle=ce.clone(i,n._rectangle),n._ellipsoid=Z.clone(o,n._ellipsoid),n._vertexFormat=ge.clone(r,n._vertexFormat),n._granularity=a,n._surfaceHeight=s,n._rotation=A,n._stRotation=l,n._extrudedHeight=f,n._shadowVolume=h,n._offsetAttribute=m===-1?void 0:m,n):(ed.granularity=a,ed.height=s,ed.rotation=A,ed.stRotation=l,ed.extrudedHeight=f,ed.shadowVolume=h,ed.offsetAttribute=m===-1?void 0:m,new KA(ed))};KA.computeRectangle=function(e,t){e=e??k.EMPTY_OBJECT;let n=e.rectangle,i=e.granularity??w.RADIANS_PER_DEGREE,o=e.ellipsoid??Z.default,r=e.rotation??0;return iv(n,i,r,o,t)};var xRe=new J,QJ=new qe,TRe=new ae;KA.createGeometry=function(e){if(w.equalsEpsilon(e._rectangle.north,e._rectangle.south,w.EPSILON10)||w.equalsEpsilon(e._rectangle.east,e._rectangle.west,w.EPSILON10))return;let t=e._rectangle,n=e._ellipsoid,i=e._rotation,o=e._stRotation,r=e._vertexFormat,a=pr.computeOptions(t,e._granularity,i,o,OJ,kJ,BRe),s=xRe;if(o!==0||i!==0){let p=ce.center(t,TRe),g=n.geodeticSurfaceNormalCartographic(p,tv);qe.fromAxisAngle(g,-o,QJ),J.fromQuaternion(QJ,s)}else J.clone(J.IDENTITY,s);let A=e._surfaceHeight,l=e._extrudedHeight,f=!w.equalsEpsilon(A,l,0,w.EPSILON2);a.lonScalar=1/e._rectangle.width,a.latScalar=1/e._rectangle.height,a.tangentRotationMatrix=s;let h,m;if(t=e._rectangle,f){h=yRe(e,a);let p=ee.fromRectangle3D(t,n,A,_Re),g=ee.fromRectangle3D(t,n,l,CRe);m=ee.union(p,g)}else{if(h=FJ(e,a),h.attributes.position.values=Tn.scaleToGeodeticHeight(h.attributes.position.values,A,n,!1),c(e._offsetAttribute)){let p=h.attributes.position.values.length,g=e._offsetAttribute===xt.NONE?0:1,C=new Uint8Array(p/3).fill(g);h.attributes.applyOffset=new ue({componentDatatype:N.UNSIGNED_BYTE,componentsPerAttribute:1,values:C})}m=ee.fromRectangle3D(t,n,A)}return r.position||delete h.attributes.position,new ze({attributes:h.attributes,indices:h.indices,primitiveType:h.primitiveType,boundingSphere:m,offsetAttribute:e._offsetAttribute})};KA.createShadowVolume=function(e,t,n){let i=e._granularity,o=e._ellipsoid,r=t(i,o),a=n(i,o);return new KA({rectangle:e._rectangle,rotation:e._rotation,ellipsoid:o,stRotation:e._stRotation,granularity:i,extrudedHeight:a,height:r,vertexFormat:ge.POSITION_ONLY,shadowVolume:!0})};var RJ=new ce,SRe=[new U,new U,new U],wRe=new ai,DRe=new ae;function QRe(e){if(e._stRotation===0)return[0,0,0,1,1,0];let t=ce.clone(e._rectangle,RJ),n=e._granularity,i=e._ellipsoid,o=e._rotation-e._stRotation,r=iv(t,n,o,i,RJ),a=SRe;a[0].x=r.west,a[0].y=r.south,a[1].x=r.west,a[1].y=r.north,a[2].x=r.east,a[2].y=r.south;let s=e.rectangle,A=ai.fromRotation(e._stRotation,wRe),l=ce.center(s,DRe);for(let g=0;g<3;++g){let C=a[g];C.x-=l.longitude,C.y-=l.latitude,ai.multiplyByVector(A,C,C),C.x+=l.longitude,C.y+=l.latitude,C.x=(C.x-s.west)/s.width,C.y=(C.y-s.south)/s.height}let f=a[0],h=a[1],m=a[2],p=new Array(6);return U.pack(f,p),U.pack(h,p,2),U.pack(m,p,4),p}Object.defineProperties(KA.prototype,{rectangle:{get:function(){return c(this._rotatedRectangle)||(this._rotatedRectangle=iv(this._rectangle,this._granularity,this._rotation,this._ellipsoid)),this._rotatedRectangle}},textureCoordinateRotationPoints:{get:function(){return c(this._textureCoordinateRotationPoints)||(this._textureCoordinateRotationPoints=QRe(this)),this._textureCoordinateRotationPoints}}});var DB=KA;var zJ=new F,HJ=u.ZERO,VJ=new u,jJ=new ce,RRe=new ce,vRe=new ae;function PRe(e){this.id=e,this.vertexFormat=void 0,this.rectangle=void 0,this.height=void 0,this.extrudedHeight=void 0,this.granularity=void 0,this.stRotation=void 0,this.rotation=void 0,this.offsetAttribute=void 0}function Wc(e,t){an.call(this,{entity:e,scene:t,geometryOptions:new PRe(e),geometryPropertyName:"rectangle",observedPropertyNames:["availability","rectangle"]}),this._onEntityPropertyChanged(e,"rectangle",e.rectangle,void 0)}c(Object.create)&&(Wc.prototype=Object.create(an.prototype),Wc.prototype.constructor=Wc);Wc.prototype.createFillGeometryInstance=function(e){let t=this._entity,n=t.isAvailable(e),i={show:new kt(n&&t.isShowing&&this._showProperty.getValue(e)&&this._fillProperty.getValue(e)),distanceDisplayCondition:Kt.fromDistanceDisplayCondition(this._distanceDisplayConditionProperty.getValue(e)),offset:void 0,color:void 0};if(this._materialProperty instanceof lt){let o;c(this._materialProperty.color)&&(this._materialProperty.color.isConstant||n)&&(o=this._materialProperty.color.getValue(e,zJ)),c(o)||(o=F.WHITE),i.color=Tt.fromColor(o)}return c(this._options.offsetAttribute)&&(i.offset=ii.fromCartesian3(M.getValueOrDefault(this._terrainOffsetProperty,e,HJ,VJ))),new gt({id:t,geometry:new DB(this._options),attributes:i})};Wc.prototype.createOutlineGeometryInstance=function(e){let t=this._entity,n=t.isAvailable(e),i=M.getValueOrDefault(this._outlineColorProperty,e,F.BLACK,zJ),o=this._distanceDisplayConditionProperty.getValue(e),r={show:new kt(n&&t.isShowing&&this._showProperty.getValue(e)&&this._showOutlineProperty.getValue(e)),color:Tt.fromColor(i),distanceDisplayCondition:Kt.fromDistanceDisplayCondition(o),offset:void 0};return c(this._options.offsetAttribute)&&(r.offset=ii.fromCartesian3(M.getValueOrDefault(this._terrainOffsetProperty,e,HJ,VJ))),new gt({id:t,geometry:new L0(this._options),attributes:r})};Wc.prototype._computeCenter=function(e,t){let n=M.getValueOrUndefined(this._entity.rectangle.coordinates,e,RRe);if(!c(n))return;let i=ce.center(n,vRe);return ae.toCartesian(i,Z.default,t)};Wc.prototype._isHidden=function(e,t){return!c(t.coordinates)||ln.prototype._isHidden.call(this,e,t)};Wc.prototype._isDynamic=function(e,t){return!t.coordinates.isConstant||!M.isConstant(t.height)||!M.isConstant(t.extrudedHeight)||!M.isConstant(t.granularity)||!M.isConstant(t.stRotation)||!M.isConstant(t.rotation)||!M.isConstant(t.outlineWidth)||!M.isConstant(t.zIndex)||this._onTerrain&&!M.isConstant(this._materialProperty)&&!(this._materialProperty instanceof lt)};Wc.prototype._setStaticOptions=function(e,t){let n=this._materialProperty instanceof lt,i=M.getValueOrUndefined(t.height,Re.MINIMUM_VALUE),o=M.getValueOrDefault(t.heightReference,Re.MINIMUM_VALUE,Ge.NONE),r=M.getValueOrUndefined(t.extrudedHeight,Re.MINIMUM_VALUE),a=M.getValueOrDefault(t.extrudedHeightReference,Re.MINIMUM_VALUE,Ge.NONE);c(r)&&!c(i)&&(i=0);let s=this._options;s.vertexFormat=n?Vt.VERTEX_FORMAT:Zn.MaterialSupport.TEXTURED.vertexFormat,s.rectangle=t.coordinates.getValue(Re.MINIMUM_VALUE,s.rectangle),s.granularity=M.getValueOrUndefined(t.granularity,Re.MINIMUM_VALUE),s.stRotation=M.getValueOrUndefined(t.stRotation,Re.MINIMUM_VALUE),s.rotation=M.getValueOrUndefined(t.rotation,Re.MINIMUM_VALUE),s.offsetAttribute=an.computeGeometryOffsetAttribute(i,o,r,a),s.height=an.getGeometryHeight(i,o),r=an.getGeometryExtrudedHeight(r,a),r===an.CLAMP_TO_GROUND&&(r=On.getMinimumMaximumHeights(DB.computeRectangle(s,jJ)).minimumTerrainHeight),s.extrudedHeight=r};Wc.DynamicGeometryUpdater=cg;function cg(e,t,n){An.call(this,e,t,n)}c(Object.create)&&(cg.prototype=Object.create(An.prototype),cg.prototype.constructor=cg);cg.prototype._isHidden=function(e,t,n){return!c(this._options.rectangle)||An.prototype._isHidden.call(this,e,t,n)};cg.prototype._setOptions=function(e,t,n){let i=this._options,o=M.getValueOrUndefined(t.height,n),r=M.getValueOrDefault(t.heightReference,n,Ge.NONE),a=M.getValueOrUndefined(t.extrudedHeight,n),s=M.getValueOrDefault(t.extrudedHeightReference,n,Ge.NONE);c(a)&&!c(o)&&(o=0),i.rectangle=M.getValueOrUndefined(t.coordinates,n,i.rectangle),i.granularity=M.getValueOrUndefined(t.granularity,n),i.stRotation=M.getValueOrUndefined(t.stRotation,n),i.rotation=M.getValueOrUndefined(t.rotation,n),i.offsetAttribute=an.computeGeometryOffsetAttribute(o,r,a,s),i.height=an.getGeometryHeight(o,r),a=an.getGeometryExtrudedHeight(a,s),a===an.CLAMP_TO_GROUND&&(a=On.getMinimumMaximumHeights(DB.computeRectangle(i,jJ)).minimumTerrainHeight),i.extrudedHeight=a};var YJ=Wc;var qJ={};function MRe(e,t){return w.equalsEpsilon(e.latitude,t.latitude,w.EPSILON10)&&w.equalsEpsilon(e.longitude,t.longitude,w.EPSILON10)}var ORe=new ae,LRe=new ae;function NRe(e,t,n,i){t=Bi(t,u.equalsEpsilon);let o=t.length;if(o<2)return;let r=c(i),a=c(n),s=new Array(o),A=new Array(o),l=new Array(o),f=t[0];s[0]=f;let h=e.cartesianToCartographic(f,ORe);a&&(h.height=n[0]),A[0]=h.height,r?l[0]=i[0]:l[0]=0;let m=A[0],p=l[0],g=m===p,C=1;for(let _=1;_<o;++_){let E=t[_],I=e.cartesianToCartographic(E,LRe);a&&(I.height=n[_]),g=g&&I.height===0,MRe(h,I)?h.height<I.height&&(A[C-1]=I.height):(s[C]=E,A[C]=I.height,r?l[C]=i[_]:l[C]=0,g=g&&A[C]===l[C],ae.clone(I,h),++C)}if(!(g||C<2))return s.length=C,A.length=C,l.length=C,{positions:s,topHeights:A,bottomHeights:l}}var FRe=new Array(2),kRe=new Array(2),URe={positions:void 0,height:void 0,granularity:void 0,ellipsoid:void 0};qJ.computePositions=function(e,t,n,i,o,r){let a=NRe(e,t,n,i);if(!c(a))return;t=a.positions,n=a.topHeights,i=a.bottomHeights;let s=t.length,A=s-2,l,f,h=w.chordLength(o,e.maximumRadius),m=URe;if(m.minDistance=h,m.ellipsoid=e,r){let p=0,g;for(g=0;g<s-1;g++)p+=Ti.numberOfPoints(t[g],t[g+1],h)+1;l=new Float64Array(p*3),f=new Float64Array(p*3);let C=FRe,_=kRe;m.positions=C,m.height=_;let E=0;for(g=0;g<s-1;g++){C[0]=t[g],C[1]=t[g+1],_[0]=n[g],_[1]=n[g+1];let I=Ti.generateArc(m);l.set(I,E),_[0]=i[g],_[1]=i[g+1],f.set(Ti.generateArc(m),E),E+=I.length}}else m.positions=t,m.height=n,l=new Float64Array(Ti.generateArc(m)),m.height=i,f=new Float64Array(Ti.generateArc(m));return{bottomPositions:f,topPositions:l,numCorners:A}};var QB=qJ;var ov=new u,RB=new u,GRe=new u,WJ=new u,zRe=new u,HRe=new u,VRe=new u;function Dh(e){e=e??k.EMPTY_OBJECT;let t=e.positions,n=e.maximumHeights,i=e.minimumHeights,o=e.vertexFormat??ge.DEFAULT,r=e.granularity??w.RADIANS_PER_DEGREE,a=e.ellipsoid??Z.default;this._positions=t,this._minimumHeights=i,this._maximumHeights=n,this._vertexFormat=ge.clone(o),this._granularity=r,this._ellipsoid=Z.clone(a),this._workerName="createWallGeometry";let s=1+t.length*u.packedLength+2;c(i)&&(s+=i.length),c(n)&&(s+=n.length),this.packedLength=s+Z.packedLength+ge.packedLength+1}Dh.pack=function(e,t,n){n=n??0;let i,o=e._positions,r=o.length;for(t[n++]=r,i=0;i<r;++i,n+=u.packedLength)u.pack(o[i],t,n);let a=e._minimumHeights;if(r=c(a)?a.length:0,t[n++]=r,c(a))for(i=0;i<r;++i)t[n++]=a[i];let s=e._maximumHeights;if(r=c(s)?s.length:0,t[n++]=r,c(s))for(i=0;i<r;++i)t[n++]=s[i];return Z.pack(e._ellipsoid,t,n),n+=Z.packedLength,ge.pack(e._vertexFormat,t,n),n+=ge.packedLength,t[n]=e._granularity,t};var JJ=Z.clone(Z.UNIT_SPHERE),KJ=new ge,TE={positions:void 0,minimumHeights:void 0,maximumHeights:void 0,ellipsoid:JJ,vertexFormat:KJ,granularity:void 0};Dh.unpack=function(e,t,n){t=t??0;let i,o=e[t++],r=new Array(o);for(i=0;i<o;++i,t+=u.packedLength)r[i]=u.unpack(e,t);o=e[t++];let a;if(o>0)for(a=new Array(o),i=0;i<o;++i)a[i]=e[t++];o=e[t++];let s;if(o>0)for(s=new Array(o),i=0;i<o;++i)s[i]=e[t++];let A=Z.unpack(e,t,JJ);t+=Z.packedLength;let l=ge.unpack(e,t,KJ);t+=ge.packedLength;let f=e[t];return c(n)?(n._positions=r,n._minimumHeights=a,n._maximumHeights=s,n._ellipsoid=Z.clone(A,n._ellipsoid),n._vertexFormat=ge.clone(l,n._vertexFormat),n._granularity=f,n):(TE.positions=r,TE.minimumHeights=a,TE.maximumHeights=s,TE.granularity=f,new Dh(TE))};Dh.fromConstantHeights=function(e){e=e??k.EMPTY_OBJECT;let t=e.positions,n,i,o=e.minimumHeight,r=e.maximumHeight,a=c(o),s=c(r);if(a||s){let l=t.length;n=a?new Array(l):void 0,i=s?new Array(l):void 0;for(let f=0;f<l;++f)a&&(n[f]=o),s&&(i[f]=r)}let A={positions:t,maximumHeights:i,minimumHeights:n,ellipsoid:e.ellipsoid,vertexFormat:e.vertexFormat};return new Dh(A)};Dh.createGeometry=function(e){let t=e._positions,n=e._minimumHeights,i=e._maximumHeights,o=e._vertexFormat,r=e._granularity,a=e._ellipsoid,s=QB.computePositions(a,t,i,n,r,!0);if(!c(s))return;let A=s.bottomPositions,l=s.topPositions,f=s.numCorners,h=l.length,m=h*2,p=o.position?new Float64Array(m):void 0,g=o.normal?new Float32Array(m):void 0,C=o.tangent?new Float32Array(m):void 0,_=o.bitangent?new Float32Array(m):void 0,E=o.st?new Float32Array(m/3*2):void 0,I=0,y=0,b=0,x=0,S=0,P=VRe,D=HRe,Q=zRe,v=!0;h/=3;let d,B=0,T=1/(h-f-1);for(d=0;d<h;++d){let z=d*3,K=u.fromArray(l,z,ov),ie=u.fromArray(A,z,RB);if(o.position&&(p[I++]=ie.x,p[I++]=ie.y,p[I++]=ie.z,p[I++]=K.x,p[I++]=K.y,p[I++]=K.z),o.st&&(E[S++]=B,E[S++]=0,E[S++]=B,E[S++]=1),o.normal||o.tangent||o.bitangent){let le=u.clone(u.ZERO,WJ),de=u.subtract(K,a.geodeticSurfaceNormal(K,RB),RB);if(d+1<h&&(le=u.fromArray(l,z+3,WJ)),v){let he=u.subtract(le,K,GRe),Se=u.subtract(de,K,ov);P=u.normalize(u.cross(Se,he,P),P),v=!1}u.equalsEpsilon(K,le,w.EPSILON10)?v=!0:(B+=T,o.tangent&&(D=u.normalize(u.subtract(le,K,D),D)),o.bitangent&&(Q=u.normalize(u.cross(P,D,Q),Q))),o.normal&&(g[y++]=P.x,g[y++]=P.y,g[y++]=P.z,g[y++]=P.x,g[y++]=P.y,g[y++]=P.z),o.tangent&&(C[x++]=D.x,C[x++]=D.y,C[x++]=D.z,C[x++]=D.x,C[x++]=D.y,C[x++]=D.z),o.bitangent&&(_[b++]=Q.x,_[b++]=Q.y,_[b++]=Q.z,_[b++]=Q.x,_[b++]=Q.y,_[b++]=Q.z)}}let R=new Mt;o.position&&(R.position=new ue({componentDatatype:N.DOUBLE,componentsPerAttribute:3,values:p})),o.normal&&(R.normal=new ue({componentDatatype:N.FLOAT,componentsPerAttribute:3,values:g})),o.tangent&&(R.tangent=new ue({componentDatatype:N.FLOAT,componentsPerAttribute:3,values:C})),o.bitangent&&(R.bitangent=new ue({componentDatatype:N.FLOAT,componentsPerAttribute:3,values:_})),o.st&&(R.st=new ue({componentDatatype:N.FLOAT,componentsPerAttribute:2,values:E}));let L=m/3;m-=6*(f+1);let G=Be.createTypedArray(L,m),q=0;for(d=0;d<L-2;d+=2){let z=d,K=d+2,ie=u.fromArray(p,z*3,ov),le=u.fromArray(p,K*3,RB);if(u.equalsEpsilon(ie,le,w.EPSILON10))continue;let de=d+1,he=d+3;G[q++]=de,G[q++]=z,G[q++]=he,G[q++]=he,G[q++]=z,G[q++]=K}return new ze({attributes:R,indices:G,primitiveType:Ce.TRIANGLES,boundingSphere:new ee.fromVertices(p)})};var XJ=Dh;var ZJ=new u,$J=new u;function Qh(e){e=e??k.EMPTY_OBJECT;let t=e.positions,n=e.maximumHeights,i=e.minimumHeights,o=e.granularity??w.RADIANS_PER_DEGREE,r=e.ellipsoid??Z.default;this._positions=t,this._minimumHeights=i,this._maximumHeights=n,this._granularity=o,this._ellipsoid=Z.clone(r),this._workerName="createWallOutlineGeometry";let a=1+t.length*u.packedLength+2;c(i)&&(a+=i.length),c(n)&&(a+=n.length),this.packedLength=a+Z.packedLength+1}Qh.pack=function(e,t,n){n=n??0;let i,o=e._positions,r=o.length;for(t[n++]=r,i=0;i<r;++i,n+=u.packedLength)u.pack(o[i],t,n);let a=e._minimumHeights;if(r=c(a)?a.length:0,t[n++]=r,c(a))for(i=0;i<r;++i)t[n++]=a[i];let s=e._maximumHeights;if(r=c(s)?s.length:0,t[n++]=r,c(s))for(i=0;i<r;++i)t[n++]=s[i];return Z.pack(e._ellipsoid,t,n),n+=Z.packedLength,t[n]=e._granularity,t};var eK=Z.clone(Z.UNIT_SPHERE),SE={positions:void 0,minimumHeights:void 0,maximumHeights:void 0,ellipsoid:eK,granularity:void 0};Qh.unpack=function(e,t,n){t=t??0;let i,o=e[t++],r=new Array(o);for(i=0;i<o;++i,t+=u.packedLength)r[i]=u.unpack(e,t);o=e[t++];let a;if(o>0)for(a=new Array(o),i=0;i<o;++i)a[i]=e[t++];o=e[t++];let s;if(o>0)for(s=new Array(o),i=0;i<o;++i)s[i]=e[t++];let A=Z.unpack(e,t,eK);t+=Z.packedLength;let l=e[t];return c(n)?(n._positions=r,n._minimumHeights=a,n._maximumHeights=s,n._ellipsoid=Z.clone(A,n._ellipsoid),n._granularity=l,n):(SE.positions=r,SE.minimumHeights=a,SE.maximumHeights=s,SE.granularity=l,new Qh(SE))};Qh.fromConstantHeights=function(e){e=e??k.EMPTY_OBJECT;let t=e.positions,n,i,o=e.minimumHeight,r=e.maximumHeight,a=c(o),s=c(r);if(a||s){let l=t.length;n=a?new Array(l):void 0,i=s?new Array(l):void 0;for(let f=0;f<l;++f)a&&(n[f]=o),s&&(i[f]=r)}let A={positions:t,maximumHeights:i,minimumHeights:n,ellipsoid:e.ellipsoid};return new Qh(A)};Qh.createGeometry=function(e){let t=e._positions,n=e._minimumHeights,i=e._maximumHeights,o=e._granularity,r=e._ellipsoid,a=QB.computePositions(r,t,i,n,o,!1);if(!c(a))return;let s=a.bottomPositions,A=a.topPositions,l=A.length,f=l*2,h=new Float64Array(f),m=0;l/=3;let p;for(p=0;p<l;++p){let I=p*3,y=u.fromArray(A,I,ZJ),b=u.fromArray(s,I,$J);h[m++]=b.x,h[m++]=b.y,h[m++]=b.z,h[m++]=y.x,h[m++]=y.y,h[m++]=y.z}let g=new Mt({position:new ue({componentDatatype:N.DOUBLE,componentsPerAttribute:3,values:h})}),C=f/3;f=2*C-4+C;let _=Be.createTypedArray(C,f),E=0;for(p=0;p<C-2;p+=2){let I=p,y=p+2,b=u.fromArray(h,I*3,ZJ),x=u.fromArray(h,y*3,$J);if(u.equalsEpsilon(b,x,w.EPSILON10))continue;let S=p+1,P=p+3;_[E++]=S,_[E++]=I,_[E++]=S,_[E++]=P,_[E++]=I,_[E++]=y}return _[E++]=C-2,_[E++]=C-1,new ze({attributes:g,indices:_,primitiveType:Ce.LINES,boundingSphere:new ee.fromVertices(h)})};var tK=Qh;var nK=new F;function jRe(e){this.id=e,this.vertexFormat=void 0,this.positions=void 0,this.minimumHeights=void 0,this.maximumHeights=void 0,this.granularity=void 0}function Jc(e,t){ln.call(this,{entity:e,scene:t,geometryOptions:new jRe(e),geometryPropertyName:"wall",observedPropertyNames:["availability","wall"]}),this._onEntityPropertyChanged(e,"wall",e.wall,void 0)}c(Object.create)&&(Jc.prototype=Object.create(ln.prototype),Jc.prototype.constructor=Jc);Jc.prototype.createFillGeometryInstance=function(e){let t=this._entity,n=t.isAvailable(e),i,o,r=new kt(n&&t.isShowing&&this._showProperty.getValue(e)&&this._fillProperty.getValue(e)),a=this._distanceDisplayConditionProperty.getValue(e),s=Kt.fromDistanceDisplayCondition(a);if(this._materialProperty instanceof lt){let A;c(this._materialProperty.color)&&(this._materialProperty.color.isConstant||n)&&(A=this._materialProperty.color.getValue(e,nK)),c(A)||(A=F.WHITE),o=Tt.fromColor(A),i={show:r,distanceDisplayCondition:s,color:o}}else i={show:r,distanceDisplayCondition:s};return new gt({id:t,geometry:new XJ(this._options),attributes:i})};Jc.prototype.createOutlineGeometryInstance=function(e){let t=this._entity,n=t.isAvailable(e),i=M.getValueOrDefault(this._outlineColorProperty,e,F.BLACK,nK),o=this._distanceDisplayConditionProperty.getValue(e);return new gt({id:t,geometry:new tK(this._options),attributes:{show:new kt(n&&t.isShowing&&this._showProperty.getValue(e)&&this._showOutlineProperty.getValue(e)),color:Tt.fromColor(i),distanceDisplayCondition:Kt.fromDistanceDisplayCondition(o)}})};Jc.prototype._isHidden=function(e,t){return!c(t.positions)||ln.prototype._isHidden.call(this,e,t)};Jc.prototype._getIsClosed=function(e){return!1};Jc.prototype._isDynamic=function(e,t){return!t.positions.isConstant||!M.isConstant(t.minimumHeights)||!M.isConstant(t.maximumHeights)||!M.isConstant(t.outlineWidth)||!M.isConstant(t.granularity)};Jc.prototype._setStaticOptions=function(e,t){let n=t.minimumHeights,i=t.maximumHeights,o=t.granularity,r=this._materialProperty instanceof lt,a=this._options;a.vertexFormat=r?Vt.VERTEX_FORMAT:Zn.MaterialSupport.TEXTURED.vertexFormat,a.positions=t.positions.getValue(Re.MINIMUM_VALUE,a.positions),a.minimumHeights=c(n)?n.getValue(Re.MINIMUM_VALUE,a.minimumHeights):void 0,a.maximumHeights=c(i)?i.getValue(Re.MINIMUM_VALUE,a.maximumHeights):void 0,a.granularity=c(o)?o.getValue(Re.MINIMUM_VALUE):void 0};Jc.DynamicGeometryUpdater=Ag;function Ag(e,t,n){An.call(this,e,t,n)}c(Object.create)&&(Ag.prototype=Object.create(An.prototype),Ag.prototype.constructor=Ag);Ag.prototype._isHidden=function(e,t,n){return!c(this._options.positions)||An.prototype._isHidden.call(this,e,t,n)};Ag.prototype._setOptions=function(e,t,n){let i=this._options;i.positions=M.getValueOrUndefined(t.positions,n,i.positions),i.minimumHeights=M.getValueOrUndefined(t.minimumHeights,n,i.minimumHeights),i.maximumHeights=M.getValueOrUndefined(t.maximumHeights,n,i.maximumHeights),i.granularity=M.getValueOrUndefined(t.granularity,n)};var iK=Jc;var Rh=[i2,Gq,tq,$W,aJ,fJ,yJ,DJ,YJ,iK];function vh(e,t){this.entity=e,this.scene=t;let n=new Array(Rh.length),i=new fe,o=new HA;for(let r=0;r<n.length;r++){let a=new Rh[r](e,t);o.add(a.geometryChanged,s=>{i.raiseEvent(s)}),n[r]=a}this.updaters=n,this.geometryChanged=i,this.eventHelper=o,this._removeEntitySubscription=e.definitionChanged.addEventListener(vh.prototype._onEntityPropertyChanged,this)}vh.prototype._onEntityPropertyChanged=function(e,t,n,i){let o=this.updaters;for(let r=0;r<o.length;r++)o[r]._onEntityPropertyChanged(e,t,n,i)};vh.prototype.forEach=function(e){let t=this.updaters;for(let n=0;n<t.length;n++)e(t[n])};vh.prototype.destroy=function(){this.eventHelper.removeAll();let e=this.updaters;for(let t=0;t<e.length;t++)e[t].destroy();this._removeEntitySubscription(),pe(this)};vh.registerUpdater=function(e){Rh.includes(e)||Rh.push(e)};vh.unregisterUpdater=function(e){if(Rh.includes(e)){let t=Rh.indexOf(e);Rh.splice(t,1)}};var vB=vh;var oK=new F,YRe=new rt,qRe=new rt,WRe=u.ZERO,JRe=new u;function Kc(e,t,n,i,o,r,a){this.translucent=t,this.appearanceType=n,this.depthFailAppearanceType=i,this.depthFailMaterialProperty=o,this.depthFailMaterial=void 0,this.closed=r,this.shadows=a,this.primitives=e,this.createPrimitive=!1,this.waitingOnCreate=!1,this.primitive=void 0,this.oldPrimitive=void 0,this.geometry=new ct,this.updaters=new ct,this.updatersWithAttributes=new ct,this.attributes=new ct,this.subscriptions=new ct,this.showsUpdated=new ct,this.itemsToRemove=[],this.invalidated=!1;let s;c(o)&&(s=o.definitionChanged.addEventListener(Kc.prototype.onMaterialChanged,this)),this.removeMaterialSubscription=s}Kc.prototype.onMaterialChanged=function(){this.invalidated=!0};Kc.prototype.isMaterial=function(e){let t=this.depthFailMaterialProperty,n=e.depthFailMaterialProperty;return n===t?!0:c(t)?t.equals(n):!1};Kc.prototype.add=function(e,t){let n=e.id;if(this.createPrimitive=!0,this.geometry.set(n,t),this.updaters.set(n,e),!e.hasConstantFill||!e.fillMaterialProperty.isConstant||!M.isConstant(e.distanceDisplayConditionProperty)||!M.isConstant(e.terrainOffsetProperty))this.updatersWithAttributes.set(n,e);else{let i=this;this.subscriptions.set(n,e.entity.definitionChanged.addEventListener(function(o,r,a,s){r==="isShowing"&&i.showsUpdated.set(e.id,e)}))}};Kc.prototype.remove=function(e){let t=e.id;if(this.createPrimitive=this.geometry.remove(t)||this.createPrimitive,this.updaters.remove(t)){this.updatersWithAttributes.remove(t);let n=this.subscriptions.get(t);return c(n)&&(n(),this.subscriptions.remove(t),this.showsUpdated.remove(t)),!0}return!1};Kc.prototype.update=function(e){let t=!0,n=0,i=this.primitive,o=this.primitives,r;if(this.createPrimitive){let a=this.geometry.values;if(a.length>0){c(i)&&(c(this.oldPrimitive)?o.remove(i):this.oldPrimitive=i);let A;c(this.depthFailAppearanceType)&&(c(this.depthFailMaterialProperty)&&(this.depthFailMaterial=Ji.getValue(e,this.depthFailMaterialProperty,this.depthFailMaterial)),A=new this.depthFailAppearanceType({material:this.depthFailMaterial,translucent:this.translucent,closed:this.closed})),i=new wn({show:!1,asynchronous:!0,geometryInstances:a.slice(),appearance:new this.appearanceType({translucent:this.translucent,closed:this.closed}),depthFailAppearance:A,shadows:this.shadows}),o.add(i),t=!1}else{c(i)&&(o.remove(i),i=void 0);let A=this.oldPrimitive;c(A)&&(o.remove(A),this.oldPrimitive=void 0)}this.attributes.removeAll(),this.primitive=i,this.createPrimitive=!1,this.waitingOnCreate=!0}else if(c(i)&&i.ready){i.show=!0,c(this.oldPrimitive)&&(o.remove(this.oldPrimitive),this.oldPrimitive=void 0),c(this.depthFailAppearanceType)&&!(this.depthFailMaterialProperty instanceof lt)&&(this.depthFailMaterial=Ji.getValue(e,this.depthFailMaterialProperty,this.depthFailMaterial),this.primitive.depthFailAppearance.material=this.depthFailMaterial);let a=this.updatersWithAttributes.values,s=a.length,A=this.waitingOnCreate;for(r=0;r<s;r++){let l=a[r],f=this.geometry.get(l.id),h=this.attributes.get(f.id.id);if(c(h)||(h=i.getGeometryInstanceAttributes(f.id),this.attributes.set(f.id.id,h)),!l.fillMaterialProperty.isConstant||A){let _=l.fillMaterialProperty.color,E=M.getValueOrDefault(_,e,F.WHITE,oK);F.equals(h._lastColor,E)||(h._lastColor=F.clone(E,h._lastColor),h.color=Tt.toValue(E,h.color),(this.translucent&&h.color[3]===255||!this.translucent&&h.color[3]!==255)&&(this.itemsToRemove[n++]=l))}if(c(this.depthFailAppearanceType)&&l.depthFailMaterialProperty instanceof lt&&(!l.depthFailMaterialProperty.isConstant||A)){let _=l.depthFailMaterialProperty.color,E=M.getValueOrDefault(_,e,F.WHITE,oK);F.equals(h._lastDepthFailColor,E)||(h._lastDepthFailColor=F.clone(E,h._lastDepthFailColor),h.depthFailColor=Tt.toValue(E,h.depthFailColor))}let m=l.entity.isShowing&&(l.hasConstantFill||l.isFilled(e)),p=h.show[0]===1;m!==p&&(h.show=kt.toValue(m,h.show));let g=l.distanceDisplayConditionProperty;if(!M.isConstant(g)){let _=M.getValueOrDefault(g,e,qRe,YRe);rt.equals(_,h._lastDistanceDisplayCondition)||(h._lastDistanceDisplayCondition=rt.clone(_,h._lastDistanceDisplayCondition),h.distanceDisplayCondition=Kt.toValue(_,h.distanceDisplayCondition))}let C=l.terrainOffsetProperty;if(!M.isConstant(C)){let _=M.getValueOrDefault(C,e,WRe,JRe);u.equals(_,h._lastOffset)||(h._lastOffset=u.clone(_,h._lastOffset),h.offset=ii.toValue(_,h.offset))}}this.updateShows(i),this.waitingOnCreate=!1}else c(i)&&!i.ready&&(t=!1);return this.itemsToRemove.length=n,t};Kc.prototype.updateShows=function(e){let t=this.showsUpdated.values,n=t.length;for(let i=0;i<n;i++){let o=t[i],r=this.geometry.get(o.id),a=this.attributes.get(r.id.id);c(a)||(a=e.getGeometryInstanceAttributes(r.id),this.attributes.set(r.id.id,a));let s=o.entity.isShowing,A=a.show[0]===1;s!==A&&(a.show=kt.toValue(s,a.show),r.attributes.show.value[0]=a.show[0])}this.showsUpdated.removeAll()};Kc.prototype.contains=function(e){return this.updaters.contains(e.id)};Kc.prototype.getBoundingSphere=function(e,t){let n=this.primitive;if(!n.ready)return He.PENDING;let i=n.getGeometryInstanceAttributes(e.entity);return!c(i)||!c(i.boundingSphere)||c(i.show)&&i.show[0]===0?He.FAILED:(i.boundingSphere.clone(t),He.DONE)};Kc.prototype.destroy=function(){let e=this.primitive,t=this.primitives;c(e)&&t.remove(e);let n=this.oldPrimitive;c(n)&&t.remove(n),c(this.removeMaterialSubscription)&&this.removeMaterialSubscription()};function lg(e,t,n,i,o){this._solidItems=[],this._translucentItems=[],this._primitives=e,this._appearanceType=t,this._depthFailAppearanceType=n,this._closed=i,this._shadows=o}lg.prototype.add=function(e,t){let n,i,o=t.createFillGeometryInstance(e);o.attributes.color.value[3]===255?(n=this._solidItems,i=!1):(n=this._translucentItems,i=!0);let r=n.length;for(let s=0;s<r;s++){let A=n[s];if(A.isMaterial(t)){A.add(t,o);return}}let a=new Kc(this._primitives,i,this._appearanceType,this._depthFailAppearanceType,t.depthFailMaterialProperty,this._closed,this._shadows);a.add(t,o),n.push(a)};function rK(e,t){let n=e.length;for(let i=n-1;i>=0;i--){let o=e[i];if(o.remove(t))return o.updaters.length===0&&(e.splice(i,1),o.destroy()),!0}return!1}lg.prototype.remove=function(e){rK(this._solidItems,e)||rK(this._translucentItems,e)};function aK(e,t,n){let i=!1,o=t.length;for(let r=0;r<o;++r){let a=t[r],s=a.itemsToRemove,A=s.length;if(A>0)for(r=0;r<A;r++){let l=s[r];a.remove(l),e.add(n,l),i=!0}}return i}function PB(e,t,n,i){let o=t.length,r;for(r=o-1;r>=0;r--){let a=t[r];if(a.invalidated){t.splice(r,1);let s=a.updaters.values,A=s.length;for(let l=0;l<A;l++)e.add(n,s[l]);a.destroy()}}for(o=t.length,r=0;r<o;++r)i=t[r].update(n)&&i;return i}lg.prototype.update=function(e){let t=PB(this,this._solidItems,e,!0);t=PB(this,this._translucentItems,e,t)&&t;let n=aK(this,this._solidItems,e),i=aK(this,this._translucentItems,e);return(n||i)&&(t=PB(this,this._solidItems,e,t)&&t,t=PB(this,this._translucentItems,e,t)&&t),t};function sK(e,t,n){let i=e.length;for(let o=0;o<i;o++){let r=e[o];if(r.contains(t))return r.getBoundingSphere(t,n)}return He.FAILED}lg.prototype.getBoundingSphere=function(e,t){let n=sK(this._solidItems,e,t);return n===He.FAILED?sK(this._translucentItems,e,t):n};function cK(e){let t=e.length;for(let n=0;n<t;n++)e[n].destroy();e.length=0}lg.prototype.removeAllPrimitives=function(){cK(this._solidItems),cK(this._translucentItems)};var Cf=lg;var KRe=new rt,XRe=new rt,ZRe=u.ZERO,$Re=new u;function Xc(e,t,n,i,o,r,a){this.primitives=e,this.appearanceType=t,this.materialProperty=n,this.depthFailAppearanceType=i,this.depthFailMaterialProperty=o,this.closed=r,this.shadows=a,this.updaters=new ct,this.createPrimitive=!0,this.primitive=void 0,this.oldPrimitive=void 0,this.geometry=new ct,this.material=void 0,this.depthFailMaterial=void 0,this.updatersWithAttributes=new ct,this.attributes=new ct,this.invalidated=!1,this.removeMaterialSubscription=n.definitionChanged.addEventListener(Xc.prototype.onMaterialChanged,this),this.subscriptions=new ct,this.showsUpdated=new ct}Xc.prototype.onMaterialChanged=function(){this.invalidated=!0};Xc.prototype.isMaterial=function(e){let t=this.materialProperty,n=e.fillMaterialProperty,i=this.depthFailMaterialProperty,o=e.depthFailMaterialProperty;if(n===t&&o===i)return!0;let r=c(t)&&t.equals(n);return r=(!c(i)&&!c(o)||c(i)&&i.equals(o))&&r,r};Xc.prototype.add=function(e,t){let n=t.id;if(this.updaters.set(n,t),this.geometry.set(n,t.createFillGeometryInstance(e)),!t.hasConstantFill||!t.fillMaterialProperty.isConstant||!M.isConstant(t.distanceDisplayConditionProperty)||!M.isConstant(t.terrainOffsetProperty))this.updatersWithAttributes.set(n,t);else{let i=this;this.subscriptions.set(n,t.entity.definitionChanged.addEventListener(function(o,r,a,s){r==="isShowing"&&i.showsUpdated.set(t.id,t)}))}this.createPrimitive=!0};Xc.prototype.remove=function(e){let t=e.id;if(this.createPrimitive=this.geometry.remove(t)||this.createPrimitive,this.updaters.remove(t)){this.updatersWithAttributes.remove(t);let n=this.subscriptions.get(t);return c(n)&&(n(),this.subscriptions.remove(t),this.showsUpdated.remove(t)),!0}return!1};var eve=new F;Xc.prototype.update=function(e){let t=!0,n=this.primitive,i=this.primitives,o=this.geometry.values,r;if(this.createPrimitive){if(o.length>0){c(n)&&(c(this.oldPrimitive)?i.remove(n):this.oldPrimitive=n),this.material=Ji.getValue(e,this.materialProperty,this.material);let s;c(this.depthFailMaterialProperty)&&(this.depthFailMaterial=Ji.getValue(e,this.depthFailMaterialProperty,this.depthFailMaterial),s=new this.depthFailAppearanceType({material:this.depthFailMaterial,translucent:this.depthFailMaterial.isTranslucent(),closed:this.closed})),n=new wn({show:!1,asynchronous:!0,geometryInstances:o.slice(),appearance:new this.appearanceType({material:this.material,translucent:this.material.isTranslucent(),closed:this.closed}),depthFailAppearance:s,shadows:this.shadows}),i.add(n),t=!1}else{c(n)&&(i.remove(n),n=void 0);let s=this.oldPrimitive;c(s)&&(i.remove(s),this.oldPrimitive=void 0)}this.attributes.removeAll(),this.primitive=n,this.createPrimitive=!1}else if(c(n)&&n.ready){n.show=!0,c(this.oldPrimitive)&&(i.remove(this.oldPrimitive),this.oldPrimitive=void 0),this.material=Ji.getValue(e,this.materialProperty,this.material),this.primitive.appearance.material=this.material,c(this.depthFailAppearanceType)&&!(this.depthFailMaterialProperty instanceof lt)&&(this.depthFailMaterial=Ji.getValue(e,this.depthFailMaterialProperty,this.depthFailMaterial),this.primitive.depthFailAppearance.material=this.depthFailMaterial);let a=this.updatersWithAttributes.values,s=a.length;for(r=0;r<s;r++){let A=a[r],l=A.entity,f=this.geometry.get(A.id),h=this.attributes.get(f.id.id);if(c(h)||(h=n.getGeometryInstanceAttributes(f.id),this.attributes.set(f.id.id,h)),c(this.depthFailAppearanceType)&&this.depthFailMaterialProperty instanceof lt&&!A.depthFailMaterialProperty.isConstant){let _=A.depthFailMaterialProperty.color,E=M.getValueOrDefault(_,e,F.WHITE,eve);F.equals(h._lastDepthFailColor,E)||(h._lastDepthFailColor=F.clone(E,h._lastDepthFailColor),h.depthFailColor=Tt.toValue(E,h.depthFailColor))}let m=l.isShowing&&(A.hasConstantFill||A.isFilled(e)),p=h.show[0]===1;m!==p&&(h.show=kt.toValue(m,h.show));let g=A.distanceDisplayConditionProperty;if(!M.isConstant(g)){let _=M.getValueOrDefault(g,e,XRe,KRe);rt.equals(_,h._lastDistanceDisplayCondition)||(h._lastDistanceDisplayCondition=rt.clone(_,h._lastDistanceDisplayCondition),h.distanceDisplayCondition=Kt.toValue(_,h.distanceDisplayCondition))}let C=A.terrainOffsetProperty;if(!M.isConstant(C)){let _=M.getValueOrDefault(C,e,ZRe,$Re);u.equals(_,h._lastOffset)||(h._lastOffset=u.clone(_,h._lastOffset),h.offset=ii.toValue(_,h.offset))}}this.updateShows(n)}else c(n)&&!n.ready&&(t=!1);return t};Xc.prototype.updateShows=function(e){let t=this.showsUpdated.values,n=t.length;for(let i=0;i<n;i++){let o=t[i],r=o.entity,a=this.geometry.get(o.id),s=this.attributes.get(a.id.id);c(s)||(s=e.getGeometryInstanceAttributes(a.id),this.attributes.set(a.id.id,s));let A=r.isShowing,l=s.show[0]===1;A!==l&&(s.show=kt.toValue(A,s.show),a.attributes.show.value[0]=s.show[0])}this.showsUpdated.removeAll()};Xc.prototype.contains=function(e){return this.updaters.contains(e.id)};Xc.prototype.getBoundingSphere=function(e,t){let n=this.primitive;if(!n.ready)return He.PENDING;let i=n.getGeometryInstanceAttributes(e.entity);return!c(i)||!c(i.boundingSphere)||c(i.show)&&i.show[0]===0?He.FAILED:(i.boundingSphere.clone(t),He.DONE)};Xc.prototype.destroy=function(){let e=this.primitive,t=this.primitives;c(e)&&t.remove(e);let n=this.oldPrimitive;c(n)&&t.remove(n),this.removeMaterialSubscription()};function fg(e,t,n,i,o){this._items=[],this._primitives=e,this._appearanceType=t,this._depthFailAppearanceType=n,this._closed=i,this._shadows=o}fg.prototype.add=function(e,t){let n=this._items,i=n.length;for(let r=0;r<i;r++){let a=n[r];if(a.isMaterial(t)){a.add(e,t);return}}let o=new Xc(this._primitives,this._appearanceType,t.fillMaterialProperty,this._depthFailAppearanceType,t.depthFailMaterialProperty,this._closed,this._shadows);o.add(e,t),n.push(o)};fg.prototype.remove=function(e){let t=this._items,n=t.length;for(let i=n-1;i>=0;i--){let o=t[i];if(o.remove(e)){o.updaters.length===0&&(t.splice(i,1),o.destroy());break}}};fg.prototype.update=function(e){let t,n=this._items,i=n.length;for(t=i-1;t>=0;t--){let r=n[t];if(r.invalidated){n.splice(t,1);let a=r.updaters.values,s=a.length;for(let A=0;A<s;A++)this.add(e,a[A]);r.destroy()}}let o=!0;for(t=0;t<n.length;t++)o=n[t].update(e)&&o;return o};fg.prototype.getBoundingSphere=function(e,t){let n=this._items,i=n.length;for(let o=0;o<i;o++){let r=n[o];if(r.contains(e))return r.getBoundingSphere(e,t)}return He.FAILED};fg.prototype.removeAllPrimitives=function(){let e=this._items,t=e.length;for(let n=0;n<t;n++)e[n].destroy();this._items.length=0};var _f=fg;function MB(e,t,n=0,i=e.length-1,o=tve){for(;i>n;){if(i-n>600){let A=i-n+1,l=t-n+1,f=Math.log(A),h=.5*Math.exp(2*f/3),m=.5*Math.sqrt(f*h*(A-h)/A)*(l-A/2<0?-1:1),p=Math.max(n,Math.floor(t-l*h/A+m)),g=Math.min(i,Math.floor(t+(A-l)*h/A+m));MB(e,t,p,g,o)}let r=e[t],a=n,s=i;for(wE(e,n,t),o(e[i],r)>0&&wE(e,n,i);a<s;){for(wE(e,a,s),a++,s--;o(e[a],r)<0;)a++;for(;o(e[s],r)>0;)s--}o(e[n],r)===0?wE(e,n,s):(s++,wE(e,s,i)),s<=t&&(n=s+1),t<=s&&(i=s-1)}}function wE(e,t,n){let i=e[t];e[t]=e[n],e[n]=i}function tve(e,t){return e<t?-1:e>t?1:0}var RE=class{constructor(t=9){this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(t){let n=this.data,i=[];if(!LB(t,n))return i;let o=this.toBBox,r=[];for(;n;){for(let a=0;a<n.children.length;a++){let s=n.children[a],A=n.leaf?o(s):s;LB(t,A)&&(n.leaf?i.push(s):av(t,A)?this._all(s,i):r.push(s))}n=r.pop()}return i}collides(t){let n=this.data;if(!LB(t,n))return!1;let i=[];for(;n;){for(let o=0;o<n.children.length;o++){let r=n.children[o],a=n.leaf?this.toBBox(r):r;if(LB(t,a)){if(n.leaf||av(t,a))return!0;i.push(r)}}n=i.pop()}return!1}load(t){if(!(t&&t.length))return this;if(t.length<this._minEntries){for(let i=0;i<t.length;i++)this.insert(t[i]);return this}let n=this._build(t.slice(),0,t.length-1,0);if(!this.data.children.length)this.data=n;else if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){let i=this.data;this.data=n,n=i}this._insert(n,this.data.height-n.height-1,!0)}return this}insert(t){return t&&this._insert(t,this.data.height-1),this}clear(){return this.data=dg([]),this}remove(t,n){if(!t)return this;let i=this.data,o=this.toBBox(t),r=[],a=[],s,A,l;for(;i||r.length;){if(i||(i=r.pop(),A=r[r.length-1],s=a.pop(),l=!0),i.leaf){let f=nve(t,i.children,n);if(f!==-1)return i.children.splice(f,1),r.push(i),this._condense(r),this}!l&&!i.leaf&&av(i,o)?(r.push(i),a.push(s),s=0,A=i,i=i.children[0]):A?(s++,i=A.children[s],l=!1):i=null}return this}toBBox(t){return t}compareMinX(t,n){return t.minX-n.minX}compareMinY(t,n){return t.minY-n.minY}toJSON(){return this.data}fromJSON(t){return this.data=t,this}_all(t,n){let i=[];for(;t;)t.leaf?n.push(...t.children):i.push(...t.children),t=i.pop();return n}_build(t,n,i,o){let r=i-n+1,a=this._maxEntries,s;if(r<=a)return s=dg(t.slice(n,i+1)),ug(s,this.toBBox),s;o||(o=Math.ceil(Math.log(r)/Math.log(a)),a=Math.ceil(r/Math.pow(a,o-1))),s=dg([]),s.leaf=!1,s.height=o;let A=Math.ceil(r/a),l=A*Math.ceil(Math.sqrt(a));AK(t,n,i,l,this.compareMinX);for(let f=n;f<=i;f+=l){let h=Math.min(f+l-1,i);AK(t,f,h,A,this.compareMinY);for(let m=f;m<=h;m+=A){let p=Math.min(m+A-1,h);s.children.push(this._build(t,m,p,o-1))}}return ug(s,this.toBBox),s}_chooseSubtree(t,n,i,o){for(;o.push(n),!(n.leaf||o.length-1===i);){let r=1/0,a=1/0,s;for(let A=0;A<n.children.length;A++){let l=n.children[A],f=rv(l),h=rve(t,l)-f;h<a?(a=h,r=f<r?f:r,s=l):h===a&&f<r&&(r=f,s=l)}n=s||n.children[0]}return n}_insert(t,n,i){let o=i?t:this.toBBox(t),r=[],a=this._chooseSubtree(o,this.data,n,r);for(a.children.push(t),QE(a,o);n>=0&&r[n].children.length>this._maxEntries;)this._split(r,n),n--;this._adjustParentBBoxes(o,r,n)}_split(t,n){let i=t[n],o=i.children.length,r=this._minEntries;this._chooseSplitAxis(i,r,o);let a=this._chooseSplitIndex(i,r,o),s=dg(i.children.splice(a,i.children.length-a));s.height=i.height,s.leaf=i.leaf,ug(i,this.toBBox),ug(s,this.toBBox),n?t[n-1].children.push(s):this._splitRoot(i,s)}_splitRoot(t,n){this.data=dg([t,n]),this.data.height=t.height+1,this.data.leaf=!1,ug(this.data,this.toBBox)}_chooseSplitIndex(t,n,i){let o,r=1/0,a=1/0;for(let s=n;s<=i-n;s++){let A=DE(t,0,s,this.toBBox),l=DE(t,s,i,this.toBBox),f=ave(A,l),h=rv(A)+rv(l);f<r?(r=f,o=s,a=h<a?h:a):f===r&&h<a&&(a=h,o=s)}return o||i-n}_chooseSplitAxis(t,n,i){let o=t.leaf?this.compareMinX:ive,r=t.leaf?this.compareMinY:ove,a=this._allDistMargin(t,n,i,o),s=this._allDistMargin(t,n,i,r);a<s&&t.children.sort(o)}_allDistMargin(t,n,i,o){t.children.sort(o);let r=this.toBBox,a=DE(t,0,n,r),s=DE(t,i-n,i,r),A=OB(a)+OB(s);for(let l=n;l<i-n;l++){let f=t.children[l];QE(a,t.leaf?r(f):f),A+=OB(a)}for(let l=i-n-1;l>=n;l--){let f=t.children[l];QE(s,t.leaf?r(f):f),A+=OB(s)}return A}_adjustParentBBoxes(t,n,i){for(let o=i;o>=0;o--)QE(n[o],t)}_condense(t){for(let n=t.length-1,i;n>=0;n--)t[n].children.length===0?n>0?(i=t[n-1].children,i.splice(i.indexOf(t[n]),1)):this.clear():ug(t[n],this.toBBox)}};function nve(e,t,n){if(!n)return t.indexOf(e);for(let i=0;i<t.length;i++)if(n(e,t[i]))return i;return-1}function ug(e,t){DE(e,0,e.children.length,t,e)}function DE(e,t,n,i,o){o||(o=dg(null)),o.minX=1/0,o.minY=1/0,o.maxX=-1/0,o.maxY=-1/0;for(let r=t;r<n;r++){let a=e.children[r];QE(o,e.leaf?i(a):a)}return o}function QE(e,t){return e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),e}function ive(e,t){return e.minX-t.minX}function ove(e,t){return e.minY-t.minY}function rv(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function OB(e){return e.maxX-e.minX+(e.maxY-e.minY)}function rve(e,t){return(Math.max(t.maxX,e.maxX)-Math.min(t.minX,e.minX))*(Math.max(t.maxY,e.maxY)-Math.min(t.minY,e.minY))}function ave(e,t){let n=Math.max(e.minX,t.minX),i=Math.max(e.minY,t.minY),o=Math.min(e.maxX,t.maxX),r=Math.min(e.maxY,t.maxY);return Math.max(0,o-n)*Math.max(0,r-i)}function av(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function LB(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function dg(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function AK(e,t,n,i,o){let r=[t,n];for(;r.length;){if(n=r.pop(),t=r.pop(),n-t<=i)continue;let a=t+Math.ceil((n-t)/i/2)*i;MB(e,a,t,n,o),r.push(t,a,a,n)}}function NB(){this._tree=new RE}function Ph(){this.minX=0,this.minY=0,this.maxX=0,this.maxY=0,this.id=""}Ph.fromRectangleAndId=function(e,t,n){return n.minX=t.west,n.minY=t.south,n.maxX=t.east,n.maxY=t.north,n.id=e,n};NB.prototype.insert=function(e,t){let n=Ph.fromRectangleAndId(e,t,new Ph);this._tree.insert(n)};function sve(e,t){return e.id===t.id}var cve=new Ph;NB.prototype.remove=function(e,t){let n=Ph.fromRectangleAndId(e,t,cve);this._tree.remove(n,sve)};var Ave=new Ph;NB.prototype.collides=function(e){let t=Ph.fromRectangleAndId("",e,Ave);return this._tree.collides(t)};var FB=NB;var lve=new F,fve=new rt,uve=new rt;function Ef(e,t,n,i){this.primitives=e,this.zIndex=i,this.classificationType=t,this.color=n,this.createPrimitive=!1,this.waitingOnCreate=!1,this.primitive=void 0,this.oldPrimitive=void 0,this.geometry=new ct,this.updaters=new ct,this.updatersWithAttributes=new ct,this.attributes=new ct,this.subscriptions=new ct,this.showsUpdated=new ct,this.itemsToRemove=[],this.isDirty=!1,this.rectangleCollisionCheck=new FB}Ef.prototype.overlapping=function(e){return this.rectangleCollisionCheck.collides(e)};Ef.prototype.add=function(e,t){let n=e.id;if(this.createPrimitive=!0,this.geometry.set(n,t),this.updaters.set(n,e),this.rectangleCollisionCheck.insert(n,t.geometry.rectangle),!e.hasConstantFill||!e.fillMaterialProperty.isConstant||!M.isConstant(e.distanceDisplayConditionProperty))this.updatersWithAttributes.set(n,e);else{let i=this;this.subscriptions.set(n,e.entity.definitionChanged.addEventListener(function(o,r,a,s){r==="isShowing"&&i.showsUpdated.set(e.id,e)}))}};Ef.prototype.remove=function(e){let t=e.id,n=this.geometry.get(t);if(this.createPrimitive=this.geometry.remove(t)||this.createPrimitive,this.updaters.remove(t)){this.rectangleCollisionCheck.remove(t,n.geometry.rectangle),this.updatersWithAttributes.remove(t);let i=this.subscriptions.get(t);return c(i)&&(i(),this.subscriptions.remove(t),this.showsUpdated.remove(t)),!0}return!1};Ef.prototype.update=function(e){let t=!0,n=0,i=this.primitive,o=this.primitives,r;if(this.createPrimitive){let a=this.geometry.values;if(a.length>0)c(i)&&(c(this.oldPrimitive)?o.remove(i):this.oldPrimitive=i),i=new Ls({show:!1,asynchronous:!0,geometryInstances:a.slice(),classificationType:this.classificationType}),o.add(i,this.zIndex),t=!1;else{c(i)&&(o.remove(i),i=void 0);let A=this.oldPrimitive;c(A)&&(o.remove(A),this.oldPrimitive=void 0)}this.attributes.removeAll(),this.primitive=i,this.createPrimitive=!1,this.waitingOnCreate=!0}else if(c(i)&&i.ready){i.show=!0,c(this.oldPrimitive)&&(o.remove(this.oldPrimitive),this.oldPrimitive=void 0);let a=this.updatersWithAttributes.values,s=a.length,A=this.waitingOnCreate;for(r=0;r<s;r++){let l=a[r],f=this.geometry.get(l.id),h=this.attributes.get(f.id.id);if(c(h)||(h=i.getGeometryInstanceAttributes(f.id),this.attributes.set(f.id.id,h)),!l.fillMaterialProperty.isConstant||A){let C=l.fillMaterialProperty.color,_=M.getValueOrDefault(C,e,F.WHITE,lve);F.equals(h._lastColor,_)||(h._lastColor=F.clone(_,h._lastColor),h.color=Tt.toValue(_,h.color))}let m=l.entity.isShowing&&(l.hasConstantFill||l.isFilled(e)),p=h.show[0]===1;m!==p&&(h.show=kt.toValue(m,h.show));let g=l.distanceDisplayConditionProperty;if(!M.isConstant(g)){let C=M.getValueOrDefault(g,e,uve,fve);rt.equals(C,h._lastDistanceDisplayCondition)||(h._lastDistanceDisplayCondition=rt.clone(C,h._lastDistanceDisplayCondition),h.distanceDisplayCondition=Kt.toValue(C,h.distanceDisplayCondition))}}this.updateShows(i),this.waitingOnCreate=!1}else c(i)&&!i.ready&&(t=!1);return this.itemsToRemove.length=n,t};Ef.prototype.updateShows=function(e){let t=this.showsUpdated.values,n=t.length;for(let i=0;i<n;i++){let o=t[i],r=this.geometry.get(o.id),a=this.attributes.get(r.id.id);c(a)||(a=e.getGeometryInstanceAttributes(r.id),this.attributes.set(r.id.id,a));let s=o.entity.isShowing,A=a.show[0]===1;s!==A&&(a.show=kt.toValue(s,a.show),r.attributes.show.value[0]=a.show[0])}this.showsUpdated.removeAll()};Ef.prototype.contains=function(e){return this.updaters.contains(e.id)};Ef.prototype.getBoundingSphere=function(e,t){let n=this.primitive;if(!n.ready)return He.PENDING;let i=n.getBoundingSphere(e.entity);return c(i)?(i.clone(t),He.DONE):He.FAILED};Ef.prototype.removeAllPrimitives=function(){let e=this.primitives,t=this.primitive;c(t)&&(e.remove(t),this.primitive=void 0,this.geometry.removeAll(),this.updaters.removeAll());let n=this.oldPrimitive;c(n)&&(e.remove(n),this.oldPrimitive=void 0)};function hg(e,t){this._batches=[],this._primitives=e,this._classificationType=t}hg.prototype.add=function(e,t){let n=t.createFillGeometryInstance(e),i=this._batches,o=M.getValueOrDefault(t.zIndex,0),r,a=i.length;for(let s=0;s<a;++s){let A=i[s];if(A.zIndex===o&&!A.overlapping(n.geometry.rectangle)){r=A;break}}return c(r)||(r=new Ef(this._primitives,this._classificationType,n.attributes.color.value,o),i.push(r)),r.add(t,n),r};hg.prototype.remove=function(e){let t=this._batches,n=t.length;for(let i=0;i<n;++i)if(t[i].remove(e))return};hg.prototype.update=function(e){let t,n,i=!0,o=this._batches,r=o.length;for(t=0;t<r;++t)i=o[t].update(e)&&i;for(t=0;t<r;++t){let a=o[t],s=a.itemsToRemove,A=s.length;for(let l=0;l<A;l++){n=s[l],a.remove(n);let f=this.add(e,n);a.isDirty=!0,f.isDirty=!0}}for(t=r-1;t>=0;--t){let a=o[t];a.isDirty&&(i=o[t].update(e)&&i,a.isDirty=!1),a.geometry.length===0&&o.splice(t,1)}return i};hg.prototype.getBoundingSphere=function(e,t){let n=this._batches,i=n.length;for(let o=0;o<i;++o){let r=n[o];if(r.contains(e))return r.getBoundingSphere(e,t)}return He.FAILED};hg.prototype.removeAllPrimitives=function(){let e=this._batches,t=e.length;for(let n=0;n<t;++n)e[n].removeAllPrimitives()};var sv=hg;var dve=new rt,hve=new rt;function XA(e,t,n,i,o,r){this.primitives=e,this.classificationType=t,this.appearanceType=n,this.materialProperty=i,this.updaters=new ct,this.createPrimitive=!0,this.primitive=void 0,this.oldPrimitive=void 0,this.geometry=new ct,this.material=void 0,this.updatersWithAttributes=new ct,this.attributes=new ct,this.subscriptions=new ct,this.showsUpdated=new ct,this.usingSphericalTextureCoordinates=o,this.zIndex=r,this.rectangleCollisionCheck=new FB}XA.prototype.overlapping=function(e){return this.rectangleCollisionCheck.collides(e)};XA.prototype.isMaterial=function(e){let t=this.materialProperty,n=e.fillMaterialProperty;return n===t||n instanceof lt&&t instanceof lt?!0:c(t)&&t.equals(n)};XA.prototype.add=function(e,t,n){let i=t.id;if(this.updaters.set(i,t),this.geometry.set(i,n),this.rectangleCollisionCheck.insert(i,n.geometry.rectangle),!t.hasConstantFill||!t.fillMaterialProperty.isConstant||!M.isConstant(t.distanceDisplayConditionProperty))this.updatersWithAttributes.set(i,t);else{let o=this;this.subscriptions.set(i,t.entity.definitionChanged.addEventListener(function(r,a,s,A){a==="isShowing"&&o.showsUpdated.set(t.id,t)}))}this.createPrimitive=!0};XA.prototype.remove=function(e){let t=e.id,n=this.geometry.get(t);if(this.createPrimitive=this.geometry.remove(t)||this.createPrimitive,this.updaters.remove(t)){this.rectangleCollisionCheck.remove(t,n.geometry.rectangle),this.updatersWithAttributes.remove(t);let i=this.subscriptions.get(t);return c(i)&&(i(),this.subscriptions.remove(t)),!0}return!1};XA.prototype.update=function(e){let t=!0,n=this.primitive,i=this.primitives,o=this.geometry.values,r;if(this.createPrimitive){if(o.length>0)c(n)&&(c(this.oldPrimitive)?i.remove(n):this.oldPrimitive=n),this.material=Ji.getValue(e,this.materialProperty,this.material),n=new Ls({show:!1,asynchronous:!0,geometryInstances:o.slice(),appearance:new this.appearanceType({material:this.material}),classificationType:this.classificationType}),i.add(n,this.zIndex),t=!1;else{c(n)&&(i.remove(n),n=void 0);let s=this.oldPrimitive;c(s)&&(i.remove(s),this.oldPrimitive=void 0)}this.attributes.removeAll(),this.primitive=n,this.createPrimitive=!1}else if(c(n)&&n.ready){n.show=!0,c(this.oldPrimitive)&&(i.remove(this.oldPrimitive),this.oldPrimitive=void 0),this.material=Ji.getValue(e,this.materialProperty,this.material),this.primitive.appearance.material=this.material;let a=this.updatersWithAttributes.values,s=a.length;for(r=0;r<s;r++){let A=a[r],l=A.entity,f=this.geometry.get(A.id),h=this.attributes.get(f.id.id);c(h)||(h=n.getGeometryInstanceAttributes(f.id),this.attributes.set(f.id.id,h));let m=l.isShowing&&(A.hasConstantFill||A.isFilled(e)),p=h.show[0]===1;m!==p&&(h.show=kt.toValue(m,h.show));let g=A.distanceDisplayConditionProperty;if(!M.isConstant(g)){let C=M.getValueOrDefault(g,e,hve,dve);rt.equals(C,h._lastDistanceDisplayCondition)||(h._lastDistanceDisplayCondition=rt.clone(C,h._lastDistanceDisplayCondition),h.distanceDisplayCondition=Kt.toValue(C,h.distanceDisplayCondition))}}this.updateShows(n)}else c(n)&&!n.ready&&(t=!1);return t};XA.prototype.updateShows=function(e){let t=this.showsUpdated.values,n=t.length;for(let i=0;i<n;i++){let o=t[i],r=o.entity,a=this.geometry.get(o.id),s=this.attributes.get(a.id.id);c(s)||(s=e.getGeometryInstanceAttributes(a.id),this.attributes.set(a.id.id,s));let A=r.isShowing,l=s.show[0]===1;A!==l&&(s.show=kt.toValue(A,s.show),a.attributes.show.value[0]=s.show[0])}this.showsUpdated.removeAll()};XA.prototype.contains=function(e){return this.updaters.contains(e.id)};XA.prototype.getBoundingSphere=function(e,t){let n=this.primitive;if(!n.ready)return He.PENDING;let i=n.getGeometryInstanceAttributes(e.entity);return!c(i)||!c(i.boundingSphere)||c(i.show)&&i.show[0]===0?He.FAILED:(i.boundingSphere.clone(t),He.DONE)};XA.prototype.destroy=function(){let e=this.primitive,t=this.primitives;c(e)&&t.remove(e);let n=this.oldPrimitive;c(n)&&t.remove(n)};function mg(e,t,n){this._items=[],this._primitives=e,this._classificationType=t,this._appearanceType=n}mg.prototype.add=function(e,t){let n=this._items,i=n.length,o=t.createFillGeometryInstance(e),r=IA.shouldUseSphericalCoordinates(o.geometry.rectangle),a=M.getValueOrDefault(t.zIndex,0);for(let A=0;A<i;++A){let l=n[A];if(l.isMaterial(t)&&l.usingSphericalTextureCoordinates===r&&l.zIndex===a&&!l.overlapping(o.geometry.rectangle)){l.add(e,t,o);return}}let s=new XA(this._primitives,this._classificationType,this._appearanceType,t.fillMaterialProperty,r,a);s.add(e,t,o),n.push(s)};mg.prototype.remove=function(e){let t=this._items,n=t.length;for(let i=n-1;i>=0&&!t[i].remove(e);i--);};mg.prototype.update=function(e){let t,n=this._items,i=n.length;for(t=i-1;t>=0;t--){let r=n[t];r.updaters.length===0&&(n.splice(t,1),r.destroy())}let o=!0;for(t=0;t<n.length;t++)o=n[t].update(e)&&o;return o};mg.prototype.getBoundingSphere=function(e,t){let n=this._items,i=n.length;for(let o=0;o<i;o++){let r=n[o];if(r.contains(e))return r.getBoundingSphere(e,t)}return He.FAILED};mg.prototype.removeAllPrimitives=function(){let e=this._items,t=e.length;for(let n=0;n<t;n++)e[n].destroy();this._items.length=0};var lK=mg;var mve=new F,pve=new rt,gve=new rt,Cve=u.ZERO,_ve=new u;function If(e,t,n,i){this.translucent=t,this.width=n,this.shadows=i,this.primitives=e,this.createPrimitive=!1,this.waitingOnCreate=!1,this.primitive=void 0,this.oldPrimitive=void 0,this.geometry=new ct,this.updaters=new ct,this.updatersWithAttributes=new ct,this.attributes=new ct,this.itemsToRemove=[],this.subscriptions=new ct,this.showsUpdated=new ct}If.prototype.add=function(e,t){let n=e.id;if(this.createPrimitive=!0,this.geometry.set(n,t),this.updaters.set(n,e),!e.hasConstantOutline||!e.outlineColorProperty.isConstant||!M.isConstant(e.distanceDisplayConditionProperty)||!M.isConstant(e.terrainOffsetProperty))this.updatersWithAttributes.set(n,e);else{let i=this;this.subscriptions.set(n,e.entity.definitionChanged.addEventListener(function(o,r,a,s){r==="isShowing"&&i.showsUpdated.set(e.id,e)}))}};If.prototype.remove=function(e){let t=e.id;if(this.createPrimitive=this.geometry.remove(t)||this.createPrimitive,this.updaters.remove(t)){this.updatersWithAttributes.remove(t);let n=this.subscriptions.get(t);return c(n)&&(n(),this.subscriptions.remove(t),this.showsUpdated.remove(t)),!0}return!1};If.prototype.update=function(e){let t=!0,n=0,i=this.primitive,o=this.primitives,r;if(this.createPrimitive){let a=this.geometry.values;if(a.length>0)c(i)&&(c(this.oldPrimitive)?o.remove(i):this.oldPrimitive=i),i=new wn({show:!1,asynchronous:!0,geometryInstances:a.slice(),appearance:new Vt({flat:!0,translucent:this.translucent,renderState:{lineWidth:this.width}}),shadows:this.shadows}),o.add(i),t=!1;else{c(i)&&(o.remove(i),i=void 0);let A=this.oldPrimitive;c(A)&&(o.remove(A),this.oldPrimitive=void 0)}this.attributes.removeAll(),this.primitive=i,this.createPrimitive=!1,this.waitingOnCreate=!0}else if(c(i)&&i.ready){i.show=!0,c(this.oldPrimitive)&&(o.remove(this.oldPrimitive),this.oldPrimitive=void 0);let a=this.updatersWithAttributes.values,s=a.length,A=this.waitingOnCreate;for(r=0;r<s;r++){let l=a[r],f=this.geometry.get(l.id),h=this.attributes.get(f.id.id);if(c(h)||(h=i.getGeometryInstanceAttributes(f.id),this.attributes.set(f.id.id,h)),!l.outlineColorProperty.isConstant||A){let _=l.outlineColorProperty,E=M.getValueOrDefault(_,e,F.WHITE,mve);F.equals(h._lastColor,E)||(h._lastColor=F.clone(E,h._lastColor),h.color=Tt.toValue(E,h.color),(this.translucent&&h.color[3]===255||!this.translucent&&h.color[3]!==255)&&(this.itemsToRemove[n++]=l))}let m=l.entity.isShowing&&(l.hasConstantOutline||l.isOutlineVisible(e)),p=h.show[0]===1;m!==p&&(h.show=kt.toValue(m,h.show));let g=l.distanceDisplayConditionProperty;if(!M.isConstant(g)){let _=M.getValueOrDefault(g,e,gve,pve);rt.equals(_,h._lastDistanceDisplayCondition)||(h._lastDistanceDisplayCondition=rt.clone(_,h._lastDistanceDisplayCondition),h.distanceDisplayCondition=Kt.toValue(_,h.distanceDisplayCondition))}let C=l.terrainOffsetProperty;if(!M.isConstant(C)){let _=M.getValueOrDefault(C,e,Cve,_ve);u.equals(_,h._lastOffset)||(h._lastOffset=u.clone(_,h._lastOffset),h.offset=ii.toValue(_,h.offset))}}this.updateShows(i),this.waitingOnCreate=!1}else c(i)&&!i.ready&&(t=!1);return this.itemsToRemove.length=n,t};If.prototype.updateShows=function(e){let t=this.showsUpdated.values,n=t.length;for(let i=0;i<n;i++){let o=t[i],r=this.geometry.get(o.id),a=this.attributes.get(r.id.id);c(a)||(a=e.getGeometryInstanceAttributes(r.id),this.attributes.set(r.id.id,a));let s=o.entity.isShowing,A=a.show[0]===1;s!==A&&(a.show=kt.toValue(s,a.show),r.attributes.show.value[0]=a.show[0])}this.showsUpdated.removeAll()};If.prototype.contains=function(e){return this.updaters.contains(e.id)};If.prototype.getBoundingSphere=function(e,t){let n=this.primitive;if(!n.ready)return He.PENDING;let i=n.getGeometryInstanceAttributes(e.entity);return!c(i)||!c(i.boundingSphere)||c(i.show)&&i.show[0]===0?He.FAILED:(i.boundingSphere.clone(t),He.DONE)};If.prototype.removeAllPrimitives=function(){let e=this.primitives,t=this.primitive;c(t)&&(e.remove(t),this.primitive=void 0,this.geometry.removeAll(),this.updaters.removeAll());let n=this.oldPrimitive;c(n)&&(e.remove(n),this.oldPrimitive=void 0)};function pg(e,t,n){this._primitives=e,this._scene=t,this._shadows=n,this._solidBatches=new ct,this._translucentBatches=new ct}pg.prototype.add=function(e,t){let n=t.createOutlineGeometryInstance(e),i=this._scene.clampLineWidth(t.outlineWidth),o,r;n.attributes.color.value[3]===255?(o=this._solidBatches,r=o.get(i),c(r)||(r=new If(this._primitives,!1,i,this._shadows),o.set(i,r)),r.add(t,n)):(o=this._translucentBatches,r=o.get(i),c(r)||(r=new If(this._primitives,!0,i,this._shadows),o.set(i,r)),r.add(t,n))};pg.prototype.remove=function(e){let t,n=this._solidBatches.values,i=n.length;for(t=0;t<i;t++)if(n[t].remove(e))return;let o=this._translucentBatches.values,r=o.length;for(t=0;t<r;t++)if(o[t].remove(e))return};pg.prototype.update=function(e){let t,n,i,o,r=this._solidBatches.values,a=r.length,s=this._translucentBatches.values,A=s.length,l,f=!0,h=!1;do{for(h=!1,n=0;n<a;n++){o=r[n],f=o.update(e),l=o.itemsToRemove;let m=l.length;if(m>0)for(h=!0,t=0;t<m;t++)i=l[t],o.remove(i),this.add(e,i)}for(n=0;n<A;n++){o=s[n],f=o.update(e),l=o.itemsToRemove;let m=l.length;if(m>0)for(h=!0,t=0;t<m;t++)i=l[t],o.remove(i),this.add(e,i)}}while(h);return f};pg.prototype.getBoundingSphere=function(e,t){let n,i=this._solidBatches.values,o=i.length;for(n=0;n<o;n++){let s=i[n];if(s.contains(e))return s.getBoundingSphere(e,t)}let r=this._translucentBatches.values,a=r.length;for(n=0;n<a;n++){let s=r[n];if(s.contains(e))return s.getBoundingSphere(e,t)}return He.FAILED};pg.prototype.removeAllPrimitives=function(){let e,t=this._solidBatches.values,n=t.length;for(e=0;e<n;e++)t[e].removeAllPrimitives();let i=this._translucentBatches.values,o=i.length;for(e=0;e<o;e++)i[e].removeAllPrimitives()};var cv=pg;var Eve=[];function Na(e,t,n,i){n=n??e.primitives,i=i??e.groundPrimitives,this._scene=e,this._primitives=n,this._groundPrimitives=i,this._entityCollection=void 0,this._addedObjects=new ct,this._removedObjects=new ct,this._changedObjects=new ct;let o=cn.NUMBER_OF_SHADOW_MODES;this._outlineBatches=new Array(o*2),this._closedColorBatches=new Array(o*2),this._closedMaterialBatches=new Array(o*2),this._openColorBatches=new Array(o*2),this._openMaterialBatches=new Array(o*2);let r=ea.supportsMaterialsforEntitiesOnTerrain(e);this._supportsMaterialsforEntitiesOnTerrain=r;let a;for(a=0;a<o;++a)this._outlineBatches[a]=new cv(n,e,a,!1),this._outlineBatches[o+a]=new cv(n,e,a,!0),this._closedColorBatches[a]=new Cf(n,Vt,void 0,!0,a,!0),this._closedColorBatches[o+a]=new Cf(n,Vt,void 0,!0,a,!1),this._closedMaterialBatches[a]=new _f(n,Zn,void 0,!0,a,!0),this._closedMaterialBatches[o+a]=new _f(n,Zn,void 0,!0,a,!1),this._openColorBatches[a]=new Cf(n,Vt,void 0,!1,a,!0),this._openColorBatches[o+a]=new Cf(n,Vt,void 0,!1,a,!1),this._openMaterialBatches[a]=new _f(n,Zn,void 0,!1,a,!0),this._openMaterialBatches[o+a]=new _f(n,Zn,void 0,!1,a,!1);let s=on.NUMBER_OF_CLASSIFICATION_TYPES,A=new Array(s),l=[];if(r)for(a=0;a<s;++a)l.push(new lK(i,a,Zn)),A[a]=new sv(i,a);else for(a=0;a<s;++a)A[a]=new sv(i,a);this._groundColorBatches=A,this._groundMaterialBatches=l,this._dynamicBatch=new gB(n,i),this._batches=this._outlineBatches.concat(this._closedColorBatches,this._closedMaterialBatches,this._openColorBatches,this._openMaterialBatches,this._groundColorBatches,this._groundMaterialBatches,this._dynamicBatch),this._subscriptions=new ct,this._updaterSets=new ct,this._entityCollection=t,t.collectionChanged.addEventListener(Na.prototype._onCollectionChanged,this),this._onCollectionChanged(t,t.values,Eve)}Na.registerUpdater=function(e){vB.registerUpdater(e)};Na.unregisterUpdater=function(e){vB.unregisterUpdater(e)};Na.prototype.update=function(e){let t=this._addedObjects,n=t.values,i=this._removedObjects,o=i.values,r=this._changedObjects,a=r.values,s,A,l,f,h=this;for(s=a.length-1;s>-1;s--)A=a[s],l=A.id,f=this._updaterSets.get(l),f.entity===A?f.forEach(function(C){h._removeUpdater(C),h._insertUpdaterIntoBatch(e,C)}):(o.push(A),n.push(A));for(s=o.length-1;s>-1;s--)A=o[s],l=A.id,f=this._updaterSets.get(l),f.forEach(this._removeUpdater.bind(this)),f.destroy(),this._updaterSets.remove(l),this._subscriptions.get(l)(),this._subscriptions.remove(l);for(s=n.length-1;s>-1;s--)A=n[s],l=A.id,f=new vB(A,this._scene),this._updaterSets.set(l,f),f.forEach(function(C){h._insertUpdaterIntoBatch(e,C)}),this._subscriptions.set(l,f.geometryChanged.addEventListener(Na._onGeometryChanged,this));t.removeAll(),i.removeAll(),r.removeAll();let m=!0,p=this._batches,g=p.length;for(s=0;s<g;s++)m=p[s].update(e)&&m;return m};var Ive=[],yve=new ee;Na.prototype.getBoundingSphere=function(e,t){let n=Ive,i=yve,o=0,r=He.DONE,a=this._batches,s=a.length,A=e.id,l=this._updaterSets.get(A).updaters;for(let f=0;f<l.length;f++){let h=l[f];for(let m=0;m<s;m++){if(r=a[m].getBoundingSphere(h,i),r===He.PENDING)return He.PENDING;r===He.DONE&&(n[o]=ee.clone(i,n[o]),o++)}}return o===0?He.FAILED:(n.length=o,ee.fromBoundingSpheres(n,t),He.DONE)};Na.prototype.isDestroyed=function(){return!1};Na.prototype.destroy=function(){this._entityCollection.collectionChanged.removeEventListener(Na.prototype._onCollectionChanged,this),this._addedObjects.removeAll(),this._removedObjects.removeAll();let e,t=this._batches,n=t.length;for(e=0;e<n;e++)t[e].removeAllPrimitives();let i=this._subscriptions.values;for(n=i.length,e=0;e<n;e++)i[e]();this._subscriptions.removeAll();let o=this._updaterSets.values;for(n=o.length,e=0;e<n;e++)o[e].destroy();return this._updaterSets.removeAll(),pe(this)};Na.prototype._removeUpdater=function(e){let t=this._batches,n=t.length;for(let i=0;i<n;i++)t[i].remove(e)};Na.prototype._insertUpdaterIntoBatch=function(e,t){if(t.isDynamic){this._dynamicBatch.add(e,t);return}let n;(t.outlineEnabled||t.fillEnabled)&&(n=t.shadowsProperty.getValue(e));let i=cn.NUMBER_OF_SHADOW_MODES;if(t.outlineEnabled&&(c(t.terrainOffsetProperty)?this._outlineBatches[i+n].add(e,t):this._outlineBatches[n].add(e,t)),t.fillEnabled)if(t.onTerrain){let o=t.classificationTypeProperty.getValue(e);t.fillMaterialProperty instanceof lt?this._groundColorBatches[o].add(e,t):this._groundMaterialBatches[o].add(e,t)}else t.isClosed?t.fillMaterialProperty instanceof lt?c(t.terrainOffsetProperty)?this._closedColorBatches[i+n].add(e,t):this._closedColorBatches[n].add(e,t):c(t.terrainOffsetProperty)?this._closedMaterialBatches[i+n].add(e,t):this._closedMaterialBatches[n].add(e,t):t.fillMaterialProperty instanceof lt?c(t.terrainOffsetProperty)?this._openColorBatches[i+n].add(e,t):this._openColorBatches[n].add(e,t):c(t.terrainOffsetProperty)?this._openMaterialBatches[i+n].add(e,t):this._openMaterialBatches[n].add(e,t)};Na._onGeometryChanged=function(e){let t=this._removedObjects,n=this._changedObjects,i=e.entity,o=i.id;!c(t.get(o))&&!c(n.get(o))&&n.set(o,i)};Na.prototype._onCollectionChanged=function(e,t,n){let i=this._addedObjects,o=this._removedObjects,r=this._changedObjects,a,s,A;for(a=n.length-1;a>-1;a--)A=n[a],s=A.id,i.remove(s)||(o.set(s,A),r.remove(s));for(a=t.length-1;a>-1;a--)A=t[a],s=A.id,o.remove(s)?r.set(s,A):i.set(s,A)};var gg=Na;var bve=1,Bve="30px sans-serif",xve=wo.FILL,Tve=F.WHITE,Sve=F.BLACK,wve=1,Dve=!1,Qve=new F(.165,.165,.165,.8),Rve=new U(7,5),vve=U.ZERO,Pve=u.ZERO,Mve=Ge.NONE,Ove=pi.CENTER,Lve=yn.CENTER,Nve=new u,Fve=new F,kve=new F,Uve=new F,Gve=new U,zve=new u,Hve=new U,Vve=new Rt,jve=new Rt,Yve=new Rt,qve=new rt;function fK(e){this.entity=e,this.label=void 0,this.index=void 0}function td(e,t){t.collectionChanged.addEventListener(td.prototype._onCollectionChanged,this),this._cluster=e,this._entityCollection=t,this._items=new ct,this._onCollectionChanged(t,t.values,[],[])}td.prototype.update=function(e){let t=this._items.values,n=this._cluster;for(let i=0,o=t.length;i<o;i++){let r=t[i],a=r.entity,s=a._label,A,l=r.label,f=a.isShowing&&a.isAvailable(e)&&M.getValueOrDefault(s._show,e,!0),h;if(f&&(h=M.getValueOrUndefined(a._position,e,Nve),A=M.getValueOrUndefined(s._text,e),f=c(h)&&c(A)),!f){Av(r,a,n);continue}M.isConstant(a._position)||(n._clusterDirty=!0);let m=!1,p=M.getValueOrDefault(s._heightReference,e,Mve);c(l)||(l=n.getLabel(a),l.id=a,r.label=l,m=u.equals(l.position,h)&&l.heightReference===p),l.show=!0,l.position=h,l.text=A,l.scale=M.getValueOrDefault(s._scale,e,bve),l.font=M.getValueOrDefault(s._font,e,Bve),l.style=M.getValueOrDefault(s._style,e,xve),l.fillColor=M.getValueOrDefault(s._fillColor,e,Tve,Fve),l.outlineColor=M.getValueOrDefault(s._outlineColor,e,Sve,kve),l.outlineWidth=M.getValueOrDefault(s._outlineWidth,e,wve),l.showBackground=M.getValueOrDefault(s._showBackground,e,Dve),l.backgroundColor=M.getValueOrDefault(s._backgroundColor,e,Qve,Uve),l.backgroundPadding=M.getValueOrDefault(s._backgroundPadding,e,Rve,Gve),l.pixelOffset=M.getValueOrDefault(s._pixelOffset,e,vve,Hve),l.eyeOffset=M.getValueOrDefault(s._eyeOffset,e,Pve,zve),l.heightReference=p,l.horizontalOrigin=M.getValueOrDefault(s._horizontalOrigin,e,Ove),l.verticalOrigin=M.getValueOrDefault(s._verticalOrigin,e,Lve),l.translucencyByDistance=M.getValueOrUndefined(s._translucencyByDistance,e,Vve),l.pixelOffsetScaleByDistance=M.getValueOrUndefined(s._pixelOffsetScaleByDistance,e,jve),l.scaleByDistance=M.getValueOrUndefined(s._scaleByDistance,e,Yve),l.distanceDisplayCondition=M.getValueOrUndefined(s._distanceDisplayCondition,e,qve),l.disableDepthTestDistance=M.getValueOrUndefined(s._disableDepthTestDistance,e),m&&l._updateClamping()}return!0};td.prototype.getBoundingSphere=function(e,t){let n=this._items.get(e.id);if(!c(n)||!c(n.label))return He.FAILED;let i=n.label;return t.center=u.clone(i._clampedPosition??i.position,t.center),t.radius=0,He.DONE};td.prototype.isDestroyed=function(){return!1};td.prototype.destroy=function(){this._entityCollection.collectionChanged.removeEventListener(td.prototype._onCollectionChanged,this);let e=this._entityCollection.values;for(let t=0;t<e.length;t++)this._cluster.removeLabel(e[t]);return pe(this)};td.prototype._onCollectionChanged=function(e,t,n,i){let o,r,a=this._items,s=this._cluster;for(o=t.length-1;o>-1;o--)r=t[o],c(r._label)&&c(r._position)&&a.set(r.id,new fK(r));for(o=i.length-1;o>-1;o--)r=i[o],c(r._label)&&c(r._position)?a.contains(r.id)||a.set(r.id,new fK(r)):(Av(a.get(r.id),r,s),a.remove(r.id));for(o=n.length-1;o>-1;o--)r=n[o],Av(a.get(r.id),r,s),a.remove(r.id)};function Av(e,t,n){c(e)&&(e.label=void 0,n.removeLabel(t))}var uK=td;var Wve=1,Jve=!0,Kve=0,Xve=!0,Zve=!0,$ve=cn.ENABLED,ePe=Ge.NONE,tPe=F.RED,nPe=0,iPe=F.WHITE,oPe=ns.HIGHLIGHT,rPe=.5,aPe=new U(1,1),dK={maximumPositionEpsilon:Number.POSITIVE_INFINITY},sPe=new O,cPe=new O,hK=new F,mK=new Array(4),APe=new u;function nd(e,t){t.collectionChanged.addEventListener(nd.prototype._onCollectionChanged,this),this._scene=e,this._primitives=e.primitives,this._entityCollection=t,this._modelHash={},this._entitiesToVisualize=new ct,this._onCollectionChanged(t,t.values,[],[])}async function lPe(e,t,n,i,o){let r=e._primitives,a=e._modelHash;try{let s=await Mc.fromGltfAsync({url:n,incrementallyLoadTextures:i,scene:e._scene,environmentMapOptions:o});if(e.isDestroyed()||!c(a[t.id]))return;s.id=t,r.add(s),a[t.id].modelPrimitive=s,s.errorEvent.addEventListener(A=>{c(a[t.id])&&(console.log(A),A.name!=="TextureError"&&s.incrementallyLoadTextures&&(a[t.id].loadFailed=!0))})}catch(s){if(e.isDestroyed()||!c(a[t.id]))return;console.log(s),a[t.id].loadFailed=!0}}nd.prototype.update=function(e){let t=this._entitiesToVisualize.values,n=this._modelHash,i=this._primitives;for(let o=0,r=t.length;o<r;o++){let a=t[o],s=a._model,A,l=n[a.id],f=a.isShowing&&a.isAvailable(e)&&M.getValueOrDefault(s._show,e,!0),h;if(f&&(h=a.computeModelMatrix(e,sPe),A=ke.createIfNeeded(M.getValueOrUndefined(s._uri,e)),f=c(h)&&c(A)),!f){c(l)&&l.modelPrimitive&&(l.modelPrimitive.show=!1);continue}if(!c(l)||A.url!==l.url){c(l?.modelPrimitive)&&(i.removeAndDestroy(l.modelPrimitive),delete n[a.id]),l={modelPrimitive:void 0,url:A.url,animationsRunning:!1,nodeTransformationsScratch:{},articulationsScratch:{},loadFailed:!1,modelUpdated:!1,environmentMapOptionsScratch:{...dK}},n[a.id]=l;let g=M.getValueOrDefault(s._incrementallyLoadTextures,e,Xve),C=M.getValueOrDefault(s._environmentMapOptions,e,dK,l.environmentMapOptionsScratch);lPe(this,a,A,g,C)}let m=l.modelPrimitive;if(!c(m))continue;m.show=!0,m.scale=M.getValueOrDefault(s._scale,e,Wve),m.enableVerticalExaggeration=M.getValueOrDefault(s._enableVerticalExaggeration,e,Jve),m.minimumPixelSize=M.getValueOrDefault(s._minimumPixelSize,e,Kve),m.maximumScale=M.getValueOrUndefined(s._maximumScale,e),m.modelMatrix=O.clone(h,m.modelMatrix),m.shadows=M.getValueOrDefault(s._shadows,e,$ve),m.heightReference=M.getValueOrDefault(s._heightReference,e,ePe),m.distanceDisplayCondition=M.getValueOrUndefined(s._distanceDisplayCondition,e),m.silhouetteColor=M.getValueOrDefault(s._silhouetteColor,e,tPe,hK),m.silhouetteSize=M.getValueOrDefault(s._silhouetteSize,e,nPe),m.color=M.getValueOrDefault(s._color,e,iPe,hK),m.colorBlendMode=M.getValueOrDefault(s._colorBlendMode,e,oPe),m.colorBlendAmount=M.getValueOrDefault(s._colorBlendAmount,e,rPe),m.clippingPlanes=M.getValueOrUndefined(s._clippingPlanes,e),m.clampAnimations=M.getValueOrDefault(s._clampAnimations,e,Zve),m.imageBasedLighting.imageBasedLightingFactor=M.getValueOrDefault(s._imageBasedLightingFactor,e,aPe);let p=M.getValueOrUndefined(s._lightColor,e);if(c(p)&&(F.pack(p,mK,0),p=u.unpack(mK,0,APe)),m.lightColor=p,m.customShader=M.getValueOrUndefined(s._customShader,e),n[a.id].modelUpdated=!0,m.ready){let g=M.getValueOrDefault(s._runAnimations,e,!0);l.animationsRunning!==g&&(g?m.activeAnimations.addAll({loop:Rc.REPEAT}):m.activeAnimations.removeAll(),l.animationsRunning=g);let C=M.getValueOrUndefined(s._nodeTransformations,e,l.nodeTransformationsScratch);if(c(C)){let I=Object.keys(C);for(let y=0,b=I.length;y<b;++y){let x=I[y],S=C[x];if(!c(S))continue;let P=m.getNode(x);if(!c(P))continue;let D=O.fromTranslationRotationScale(S,cPe);P.matrix=O.multiply(P.originalMatrix,D,D)}}let _=!1,E=M.getValueOrUndefined(s._articulations,e,l.articulationsScratch);if(c(E)){let I=Object.keys(E);for(let y=0,b=I.length;y<b;++y){let x=I[y],S=E[x];c(S)&&(_=!0,m.setArticulationStage(x,S))}}_&&m.applyArticulations()}}return!0};nd.prototype.isDestroyed=function(){return!1};nd.prototype.destroy=function(){this._entityCollection.collectionChanged.removeEventListener(nd.prototype._onCollectionChanged,this);let e=this._entitiesToVisualize.values,t=this._modelHash,n=this._primitives;for(let i=e.length-1;i>-1;i--)lv(this,e[i],t,n);return pe(this)};var kB=new u,fPe=new ae;nd.prototype.getBoundingSphere=function(e,t){let n=this._modelHash[e.id];if(!c(n))return He.FAILED;if(n.loadFailed)return He.FAILED;let i=n.modelPrimitive;if(!c(i)||!i.show)return He.PENDING;if(!i.ready||!n.modelUpdated)return He.PENDING;let o=this._scene,r=o.ellipsoid??Z.default;if(i.heightReference!==Ge.NONE){let s=i.modelMatrix;kB.x=s[12],kB.y=s[13],kB.z=s[14];let A=r.cartesianToCartographic(kB,fPe),l=o.getHeight(A,i.heightReference);return c(l)&&(Ps(i.heightReference)?A.height=l:A.height+=l),ee.clone(i.boundingSphere,t),t.center=r.cartographicToCartesian(A),He.DONE}return ee.clone(i.boundingSphere,t),He.DONE};nd.prototype._onCollectionChanged=function(e,t,n,i){let o,r,a=this._entitiesToVisualize,s=this._modelHash,A=this._primitives;for(o=t.length-1;o>-1;o--)r=t[o],c(r._model)&&c(r._position)&&a.set(r.id,r);for(o=i.length-1;o>-1;o--)r=i[o],c(r._model)&&c(r._position)?(uPe(r,s),a.set(r.id,r)):(lv(this,r,s,A),a.remove(r.id));for(o=n.length-1;o>-1;o--)r=n[o],lv(this,r,s,A),a.remove(r.id)};function lv(e,t,n,i){let o=n[t.id];c(o)&&(i.removeAndDestroy(o.modelPrimitive),delete n[t.id])}function uPe(e,t){let n=t[e.id];c(n)&&(n.nodeTransformationsScratch={},n.articulationsScratch={})}var pK=nd;function id(e){this._definitionChanged=new fe,this._value=void 0,this._removeSubscription=void 0,this.setValue(e)}Object.defineProperties(id.prototype,{isConstant:{get:function(){return M.isConstant(this._value)}},definitionChanged:{get:function(){return this._definitionChanged}},referenceFrame:{get:function(){return c(this._value)?this._value.referenceFrame:oi.FIXED}}});var dPe=new X;id.prototype.getValue=function(e,t){return c(e)||(e=X.now(dPe)),this.getValueInReferenceFrame(e,oi.FIXED,t)};id.prototype.setValue=function(e){this._value!==e&&(this._value=e,c(this._removeSubscription)&&(this._removeSubscription(),this._removeSubscription=void 0),c(e)&&(this._removeSubscription=e.definitionChanged.addEventListener(this._raiseDefinitionChanged,this)),this._definitionChanged.raiseEvent(this))};id.prototype.getValueInReferenceFrame=function(e,t,n){if(c(this._value))return n=this._value.getValueInReferenceFrame(e,t,n),c(n)?Z.default.scaleToGeodeticSurface(n,n):void 0};id.prototype.equals=function(e){return this===e||e instanceof id&&this._value===e._value};id.prototype._raiseDefinitionChanged=function(){this._definitionChanged.raiseEvent(this)};var gK=id;var hPe=60,mPe=1,_K=new nn,fv=new nn,uv=new nn;function CK(e){this.entity=e,this.polyline=void 0,this.index=void 0,this.updater=void 0}function pPe(e,t,n,i,o,r,a,s,A){let l=s,f;f=e.getValueInReferenceFrame(t,r,A[l]),c(f)&&(A[l++]=f);let h=!c(o)||X.lessThanOrEquals(o,t)||X.greaterThanOrEquals(o,n),m=0,p=i.length,g=i[m],C=n,_=!1,E,I,y;for(;m<p;){if(!h&&X.greaterThanOrEquals(g,o)&&(f=e.getValueInReferenceFrame(o,r,A[l]),c(f)&&(A[l++]=f),h=!0),X.greaterThan(g,t)&&X.lessThan(g,C)&&!g.equals(o)&&(f=e.getValueInReferenceFrame(g,r,A[l]),c(f)&&(A[l++]=f)),m<p-1){if(a>0&&!_){let b=i[m+1],x=X.secondsDifference(b,g);_=x>a,_&&(E=Math.ceil(x/a),I=0,y=x/Math.max(E,2),E=Math.max(E-1,1))}if(_&&I<E){g=X.addSeconds(g,y,new X),I++;continue}}_=!1,m++,g=i[m]}return f=e.getValueInReferenceFrame(n,r,A[l]),c(f)&&(A[l++]=f),l}function gPe(e,t,n,i,o,r,a,s){let A,l=0,f=a,h=t,m=!c(i)||X.lessThanOrEquals(i,t)||X.greaterThanOrEquals(i,n);for(;X.lessThan(h,n);)!m&&X.greaterThanOrEquals(h,i)&&(m=!0,A=e.getValueInReferenceFrame(i,o,s[f]),c(A)&&(s[f]=A,f++)),A=e.getValueInReferenceFrame(h,o,s[f]),c(A)&&(s[f]=A,f++),l++,h=X.addSeconds(t,r*l,new X);return A=e.getValueInReferenceFrame(n,o,s[f]),c(A)&&(s[f]=A,f++),f}function CPe(e,t,n,i,o,r,a,s){let A,l=0,f=a,h=t,m=Math.max(r,60),p=!c(i)||X.lessThanOrEquals(i,t)||X.greaterThanOrEquals(i,n);for(;X.lessThan(h,n);)!p&&X.greaterThanOrEquals(h,i)&&(p=!0,A=e.getValueInReferenceFrame(i,o,s[f]),c(A)&&(s[f]=A,f++)),A=e.getValueInReferenceFrame(h,o,s[f]),c(A)&&(s[f]=A,f++),l++,h=X.addSeconds(t,m*l,new X);return A=e.getValueInReferenceFrame(n,o,s[f]),c(A)&&(s[f]=A,f++),f}function _Pe(e,t,n,i,o,r,a,s){uv.start=t,uv.stop=n;let A=a,l=e.intervals;for(let f=0;f<l.length;f++){let h=l.get(f);if(!nn.intersect(h,uv,_K).isEmpty){let m=h.start;h.isStartIncluded||(h.isStopIncluded?m=h.stop:m=X.addSeconds(h.start,X.secondsDifference(h.stop,h.start)/2,new X));let p=e.getValueInReferenceFrame(m,o,s[A]);c(p)&&(s[A]=p,A++)}}return A}function EPe(e,t,n,i,o,r,a,s){let A=e.getValueInReferenceFrame(t,o,s[a]);return c(A)&&(s[a++]=A),a}function IPe(e,t,n,i,o,r,a,s){fv.start=t,fv.stop=n;let A=a,l=e.intervals;for(let f=0;f<l.length;f++){let h=l.get(f);if(!nn.intersect(h,fv,_K).isEmpty){let m=h.start,p=h.stop,g=t;X.greaterThan(m,g)&&(g=m);let C=n;X.lessThan(p,C)&&(C=p),A=EK(h.data,g,C,i,o,r,A,s)}}return A}function EK(e,t,n,i,o,r,a,s){for(;e instanceof cB;)e=e.resolvedProperty;if(e instanceof Wu){let A=e._property._times;a=pPe(e,t,n,A,i,o,r,a,s)}else e instanceof o2?a=gPe(e,t,n,i,o,r,a,s):e instanceof zc?a=IPe(e,t,n,i,o,r,a,s):e instanceof qp?a=_Pe(e,t,n,i,o,r,a,s):e instanceof Jf||e instanceof gK&&M.isConstant(e)?a=EPe(e,t,n,i,o,r,a,s):a=CPe(e,t,n,i,o,r,a,s);return a}function IK(e,t,n,i,o,r,a){c(a)||(a=[]);let s=EK(e,t,n,i,o,r,0,a);return a.length=s,a}var yPe=new J;function vE(e,t){this._unusedIndexes=[],this._polylineCollection=new gp,this._scene=e,this._referenceFrame=t,e.primitives.add(this._polylineCollection)}vE.prototype.update=function(e){if(this._referenceFrame===oi.INERTIAL){let t=Rn.computeIcrfToCentralBodyFixedMatrix(e,yPe);O.fromRotationTranslation(t,u.ZERO,this._polylineCollection.modelMatrix)}};vE.prototype.updateObject=function(e,t){let n=t.entity,i=n._path,o=n._position,r,a,s=i._show,A=t.polyline,l=n.isShowing&&n.isAvailable(e)&&(!c(s)||s.getValue(e));if(l){let h=M.getValueOrUndefined(i._leadTime,e),m=M.getValueOrUndefined(i._trailTime,e),p=n._availability,g=c(p),C=c(h),_=c(m);if(l=g||C&&_,l){if(_&&(r=X.addSeconds(e,-m,new X)),C&&(a=X.addSeconds(e,h,new X)),g){let E=p.start,I=p.stop;(!_||X.greaterThan(E,r))&&(r=E),(!C||X.lessThan(I,a))&&(a=I)}l=X.lessThan(r,a)}}if(!l){c(A)&&(this._unusedIndexes.push(t.index),t.polyline=void 0,A.show=!1,t.index=void 0);return}if(!c(A)){let h=this._unusedIndexes;if(h.length>0){let p=h.pop();A=this._polylineCollection.get(p),t.index=p}else t.index=this._polylineCollection.length,A=this._polylineCollection.add();A.id=n,t.polyline=A}let f=M.getValueOrDefault(i._resolution,e,hPe);A.show=!0,A.positions=IK(o,r,a,e,this._referenceFrame,f,A.positions.slice()),A.material=Ji.getValue(e,i._material,A.material),A.width=M.getValueOrDefault(i._width,e,mPe),A.distanceDisplayCondition=M.getValueOrUndefined(i._distanceDisplayCondition,e,A.distanceDisplayCondition)};vE.prototype.removeObject=function(e){let t=e.polyline;c(t)&&(this._unusedIndexes.push(e.index),e.polyline=void 0,t.show=!1,t.id=void 0,e.index=void 0)};vE.prototype.destroy=function(){return this._scene.primitives.remove(this._polylineCollection),pe(this)};function od(e,t){t.collectionChanged.addEventListener(od.prototype._onCollectionChanged,this),this._scene=e,this._updaters={},this._entityCollection=t,this._items=new ct,this._onCollectionChanged(t,t.values,[],[])}od.prototype.update=function(e){let t=this._updaters;for(let i in t)t.hasOwnProperty(i)&&t[i].update(e);let n=this._items.values;if(n.length===0&&c(this._updaters)&&Object.keys(this._updaters).length>0){for(let i in t)t.hasOwnProperty(i)&&t[i].destroy();this._updaters={}}for(let i=0,o=n.length;i<o;i++){let r=n[i],s=r.entity._position,A=r.updater,l=oi.FIXED;this._scene.mode===Te.SCENE3D&&(l=s.referenceFrame);let f=this._updaters[l];if(A===f&&c(f)){f.updateObject(e,r);continue}c(A)&&A.removeObject(r),c(f)||(f=new vE(this._scene,l),f.update(e),this._updaters[l]=f),r.updater=f,c(f)&&f.updateObject(e,r)}return!0};od.prototype.isDestroyed=function(){return!1};od.prototype.destroy=function(){this._entityCollection.collectionChanged.removeEventListener(od.prototype._onCollectionChanged,this);let e=this._updaters;for(let t in e)e.hasOwnProperty(t)&&e[t].destroy();return pe(this)};od.prototype._onCollectionChanged=function(e,t,n,i){let o,r,a,s=this._items;for(o=t.length-1;o>-1;o--)r=t[o],c(r._path)&&c(r._position)&&s.set(r.id,new CK(r));for(o=i.length-1;o>-1;o--)r=i[o],c(r._path)&&c(r._position)?s.contains(r.id)||s.set(r.id,new CK(r)):(a=s.get(r.id),c(a)&&(c(a.updater)&&a.updater.removeObject(a),s.remove(r.id)));for(o=n.length-1;o>-1;o--)r=n[o],a=s.get(r.id),c(a)&&(c(a.updater)&&a.updater.removeObject(a),s.remove(r.id))};od._subSample=IK;var yK=od;var bK=F.WHITE,BK=F.BLACK,xK=0,TK=1,SK=0,wK=Zo.NONE,DK=new F,bPe=new u,QK=new F,RK=new Rt,vK=new Rt,PK=new rt;function MK(e){this.entity=e,this.pointPrimitive=void 0,this.billboard=void 0,this.color=void 0,this.outlineColor=void 0,this.pixelSize=void 0,this.outlineWidth=void 0}function rd(e,t){t.collectionChanged.addEventListener(rd.prototype._onCollectionChanged,this),this._cluster=e,this._entityCollection=t,this._items=new ct,this._onCollectionChanged(t,t.values,[],[])}rd.prototype.update=function(e){let t=this._items.values,n=this._cluster;for(let i=0,o=t.length;i<o;i++){let r=t[i],a=r.entity,s=a._point,A=r.pointPrimitive,l=r.billboard,f=M.getValueOrDefault(s._heightReference,e,Ge.NONE),h=a.isShowing&&a.isAvailable(e)&&M.getValueOrDefault(s._show,e,!0),m;if(h&&(m=M.getValueOrUndefined(a._position,e,bPe),h=c(m)),!h){PE(r,a,n);continue}M.isConstant(a._position)||(n._clusterDirty=!0);let p=!1,g=!1;if(f!==Ge.NONE&&!c(l)?(c(A)&&(PE(r,a,n),A=void 0),l=n.getBillboard(a),l.id=a,l.image=void 0,r.billboard=l,p=!0,g=u.equals(l.position,m)&&l.heightReference===f):f===Ge.NONE&&!c(A)&&(c(l)&&(PE(r,a,n),l=void 0),A=n.getPoint(a),A.id=a,r.pointPrimitive=A),c(A))A.show=!0,A.position=m,A.scaleByDistance=M.getValueOrUndefined(s._scaleByDistance,e,RK),A.translucencyByDistance=M.getValueOrUndefined(s._translucencyByDistance,e,vK),A.color=M.getValueOrDefault(s._color,e,bK,DK),A.outlineColor=M.getValueOrDefault(s._outlineColor,e,BK,QK),A.outlineWidth=M.getValueOrDefault(s._outlineWidth,e,xK),A.pixelSize=M.getValueOrDefault(s._pixelSize,e,TK),A.distanceDisplayCondition=M.getValueOrUndefined(s._distanceDisplayCondition,e,PK),A.disableDepthTestDistance=M.getValueOrDefault(s._disableDepthTestDistance,e,SK),A.splitDirection=M.getValueOrDefault(s._splitDirection,e,wK);else if(c(l)){l.show=!0,l.position=m,l.scaleByDistance=M.getValueOrUndefined(s._scaleByDistance,e,RK),l.translucencyByDistance=M.getValueOrUndefined(s._translucencyByDistance,e,vK),l.distanceDisplayCondition=M.getValueOrUndefined(s._distanceDisplayCondition,e,PK),l.disableDepthTestDistance=M.getValueOrDefault(s._disableDepthTestDistance,e,SK),l.splitDirection=M.getValueOrDefault(s._splitDirection,e,wK),l.heightReference=f;let C=M.getValueOrDefault(s._color,e,bK,DK),_=M.getValueOrDefault(s._outlineColor,e,BK,QK),E=Math.round(M.getValueOrDefault(s._outlineWidth,e,xK)),I=Math.max(1,Math.round(M.getValueOrDefault(s._pixelSize,e,TK)));if(E>0?(l.scale=1,p=p||E!==r.outlineWidth||I!==r.pixelSize||!F.equals(C,r.color)||!F.equals(_,r.outlineColor)):(l.scale=I/50,I=50,p=p||E!==r.outlineWidth||!F.equals(C,r.color)||!F.equals(_,r.outlineColor)),p){r.color=F.clone(C,r.color),r.outlineColor=F.clone(_,r.outlineColor),r.pixelSize=I,r.outlineWidth=E;let y=C.alpha,b=C.toCssColorString(),x=_.toCssColorString(),S=JSON.stringify([b,I,x,E]);l.setImage(S,B0(y,b,x,E,I))}g&&l._updateClamping()}}return!0};rd.prototype.getBoundingSphere=function(e,t){let n=this._items.get(e.id);if(!c(n)||!(c(n.pointPrimitive)||c(n.billboard)))return He.FAILED;if(c(n.pointPrimitive))t.center=u.clone(n.pointPrimitive.position,t.center);else{let i=n.billboard;if(!c(i._clampedPosition))return He.PENDING;t.center=u.clone(i._clampedPosition,t.center)}return t.radius=0,He.DONE};rd.prototype.isDestroyed=function(){return!1};rd.prototype.destroy=function(){this._entityCollection.collectionChanged.removeEventListener(rd.prototype._onCollectionChanged,this);let e=this._entityCollection.values;for(let t=0;t<e.length;t++)this._cluster.removePoint(e[t]);return pe(this)};rd.prototype._onCollectionChanged=function(e,t,n,i){let o,r,a=this._items,s=this._cluster;for(o=t.length-1;o>-1;o--)r=t[o],c(r._point)&&c(r._position)&&a.set(r.id,new MK(r));for(o=i.length-1;o>-1;o--)r=i[o],c(r._point)&&c(r._position)?a.contains(r.id)||a.set(r.id,new MK(r)):(PE(a.get(r.id),r,s),a.remove(r.id));for(o=n.length-1;o>-1;o--)r=n[o],PE(a.get(r.id),r,s),a.remove(r.id)};function PE(e,t,n){if(c(e)){let i=e.pointPrimitive;if(c(i)){e.pointPrimitive=void 0,n.removePoint(t);return}let o=e.billboard;c(o)&&(e.billboard=void 0,n.removeBillboard(t))}}var OK=rd;var UK=[];function BPe(e,t,n,i,o){let r=UK;r.length=o;let a,s=n.red,A=n.green,l=n.blue,f=n.alpha,h=i.red,m=i.green,p=i.blue,g=i.alpha;if(F.equals(n,i)){for(a=0;a<o;a++)r[a]=F.clone(n);return r}let C=(h-s)/o,_=(m-A)/o,E=(p-l)/o,I=(g-f)/o;for(a=0;a<o;a++)r[a]=new F(s+a*C,A+a*_,l+a*E,f+a*I);return r}function ME(e){e=e??k.EMPTY_OBJECT;let t=e.positions,n=e.colors,i=e.width??1,o=e.colorsPerVertex??!1;this._positions=t,this._colors=n,this._width=i,this._colorsPerVertex=o,this._vertexFormat=ge.clone(e.vertexFormat??ge.DEFAULT),this._arcType=e.arcType??Yt.GEODESIC,this._granularity=e.granularity??w.RADIANS_PER_DEGREE,this._ellipsoid=Z.clone(e.ellipsoid??Z.default),this._workerName="createPolylineGeometry";let r=1+t.length*u.packedLength;r+=c(n)?1+n.length*F.packedLength:1,this.packedLength=r+Z.packedLength+ge.packedLength+4}ME.pack=function(e,t,n){n=n??0;let i,o=e._positions,r=o.length;for(t[n++]=r,i=0;i<r;++i,n+=u.packedLength)u.pack(o[i],t,n);let a=e._colors;for(r=c(a)?a.length:0,t[n++]=r,i=0;i<r;++i,n+=F.packedLength)F.pack(a[i],t,n);return Z.pack(e._ellipsoid,t,n),n+=Z.packedLength,ge.pack(e._vertexFormat,t,n),n+=ge.packedLength,t[n++]=e._width,t[n++]=e._colorsPerVertex?1:0,t[n++]=e._arcType,t[n]=e._granularity,t};var GK=Z.clone(Z.UNIT_SPHERE),zK=new ge,Mh={positions:void 0,colors:void 0,ellipsoid:GK,vertexFormat:zK,width:void 0,colorsPerVertex:void 0,arcType:void 0,granularity:void 0};ME.unpack=function(e,t,n){t=t??0;let i,o=e[t++],r=new Array(o);for(i=0;i<o;++i,t+=u.packedLength)r[i]=u.unpack(e,t);o=e[t++];let a=o>0?new Array(o):void 0;for(i=0;i<o;++i,t+=F.packedLength)a[i]=F.unpack(e,t);let s=Z.unpack(e,t,GK);t+=Z.packedLength;let A=ge.unpack(e,t,zK);t+=ge.packedLength;let l=e[t++],f=e[t++]===1,h=e[t++],m=e[t];return c(n)?(n._positions=r,n._colors=a,n._ellipsoid=Z.clone(s,n._ellipsoid),n._vertexFormat=ge.clone(A,n._vertexFormat),n._width=l,n._colorsPerVertex=f,n._arcType=h,n._granularity=m,n):(Mh.positions=r,Mh.colors=a,Mh.width=l,Mh.colorsPerVertex=f,Mh.arcType=h,Mh.granularity=m,new ME(Mh))};var LK=new u,NK=new u,FK=new u,kK=new u;ME.createGeometry=function(e){let t=e._width,n=e._vertexFormat,i=e._colors,o=e._colorsPerVertex,r=e._arcType,a=e._granularity,s=e._ellipsoid,A,l,f,h=[],m=Bi(e._positions,u.equalsEpsilon,!1,h);if(c(i)&&h.length>0){let L=0,G=h[0];i=i.filter(function(q,z){let K=!1;return o?K=z===G||z===0&&G===1:K=z+1===G,K?(L++,G=h[L],!1):!0})}let p=m.length;if(p<2||t<=0)return;if(r===Yt.GEODESIC||r===Yt.RHUMB){let L,G;r===Yt.GEODESIC?(L=w.chordLength(a,s.maximumRadius),G=Ti.numberOfPoints):(L=a,G=Ti.numberOfPointsRhumbLine);let q=Ti.extractHeights(m,s);if(c(i)){let z=1;for(A=0;A<p-1;++A)z+=G(m[A],m[A+1],L);let K=new Array(z),ie=0;for(A=0;A<p-1;++A){let le=m[A],de=m[A+1],he=i[A],Se=G(le,de,L);if(o&&A<z){let be=i[A+1],_e=BPe(le,de,he,be,Se),Ct=_e.length;for(l=0;l<Ct;++l)K[ie++]=_e[l]}else for(l=0;l<Se;++l)K[ie++]=F.clone(he)}K[ie]=F.clone(i[i.length-1]),i=K,UK.length=0}r===Yt.GEODESIC?m=Ti.generateCartesianArc({positions:m,minDistance:L,ellipsoid:s,height:q}):m=Ti.generateCartesianRhumbArc({positions:m,granularity:L,ellipsoid:s,height:q})}p=m.length;let g=p*4-4,C=new Float64Array(g*3),_=new Float64Array(g*3),E=new Float64Array(g*3),I=new Float32Array(g*2),y=n.st?new Float32Array(g*2):void 0,b=c(i)?new Uint8Array(g*4):void 0,x=0,S=0,P=0,D=0,Q;for(l=0;l<p;++l){l===0?(Q=LK,u.subtract(m[0],m[1],Q),u.add(m[0],Q,Q)):Q=m[l-1],u.clone(Q,FK),u.clone(m[l],NK),l===p-1?(Q=LK,u.subtract(m[p-1],m[p-2],Q),u.add(m[p-1],Q,Q)):Q=m[l+1],u.clone(Q,kK);let L,G;c(b)&&(l!==0&&!o?L=i[l-1]:L=i[l],l!==p-1&&(G=i[l]));let q=l===0?2:0,z=l===p-1?2:4;for(f=q;f<z;++f){u.pack(NK,C,x),u.pack(FK,_,x),u.pack(kK,E,x),x+=3;let K=f-2<0?-1:1;if(I[S++]=2*(f%2)-1,I[S++]=K*t,n.st&&(y[P++]=l/(p-1),y[P++]=Math.max(I[S-2],0)),c(b)){let ie=f<2?L:G;b[D++]=F.floatToByte(ie.red),b[D++]=F.floatToByte(ie.green),b[D++]=F.floatToByte(ie.blue),b[D++]=F.floatToByte(ie.alpha)}}}let v=new Mt;v.position=new ue({componentDatatype:N.DOUBLE,componentsPerAttribute:3,values:C}),v.prevPosition=new ue({componentDatatype:N.DOUBLE,componentsPerAttribute:3,values:_}),v.nextPosition=new ue({componentDatatype:N.DOUBLE,componentsPerAttribute:3,values:E}),v.expandAndWidth=new ue({componentDatatype:N.FLOAT,componentsPerAttribute:2,values:I}),n.st&&(v.st=new ue({componentDatatype:N.FLOAT,componentsPerAttribute:2,values:y})),c(b)&&(v.color=new ue({componentDatatype:N.UNSIGNED_BYTE,componentsPerAttribute:4,values:b,normalize:!0}));let d=Be.createTypedArray(g,p*6-6),B=0,T=0,R=p-1;for(l=0;l<R;++l)d[T++]=B,d[T++]=B+2,d[T++]=B+1,d[T++]=B+1,d[T++]=B+2,d[T++]=B+3,B+=4;return new ze({attributes:v,indices:d,primitiveType:Ce.TRIANGLES,boundingSphere:ee.fromPoints(m),geometryType:fl.POLYLINES})};var HK=ME;var xPe=new li(0),UB={},VK=new F,TPe=new lt(F.WHITE),SPe=new li(!0),wPe=new li(cn.DISABLED),DPe=new li(new rt),QPe=new li(on.BOTH);function RPe(){this.vertexFormat=void 0,this.positions=void 0,this.width=void 0,this.arcType=void 0,this.granularity=void 0}function vPe(){this.positions=void 0,this.width=void 0,this.arcType=void 0,this.granularity=void 0}function Zc(e,t){this._entity=e,this._scene=t,this._entitySubscription=e.definitionChanged.addEventListener(Zc.prototype._onEntityPropertyChanged,this),this._fillEnabled=!1,this._dynamic=!1,this._geometryChanged=new fe,this._showProperty=void 0,this._materialProperty=void 0,this._shadowsProperty=void 0,this._distanceDisplayConditionProperty=void 0,this._classificationTypeProperty=void 0,this._depthFailMaterialProperty=void 0,this._geometryOptions=new RPe,this._groundGeometryOptions=new vPe,this._id=`polyline-${e.id}`,this._clampToGround=!1,this._supportsPolylinesOnTerrain=ea.supportsPolylinesOnTerrain(t),this._zIndex=0,this._onEntityPropertyChanged(e,"polyline",e.polyline,void 0)}Object.defineProperties(Zc.prototype,{id:{get:function(){return this._id}},entity:{get:function(){return this._entity}},fillEnabled:{get:function(){return this._fillEnabled}},hasConstantFill:{get:function(){return!this._fillEnabled||!c(this._entity.availability)&&M.isConstant(this._showProperty)}},fillMaterialProperty:{get:function(){return this._materialProperty}},depthFailMaterialProperty:{get:function(){return this._depthFailMaterialProperty}},outlineEnabled:{value:!1},hasConstantOutline:{value:!0},outlineColorProperty:{value:void 0},shadowsProperty:{get:function(){return this._shadowsProperty}},distanceDisplayConditionProperty:{get:function(){return this._distanceDisplayConditionProperty}},classificationTypeProperty:{get:function(){return this._classificationTypeProperty}},isDynamic:{get:function(){return this._dynamic}},isClosed:{value:!1},geometryChanged:{get:function(){return this._geometryChanged}},arcType:{get:function(){return this._arcType}},clampToGround:{get:function(){return this._clampToGround&&this._supportsPolylinesOnTerrain}},zIndex:{get:function(){return this._zIndex}}});Zc.prototype.isOutlineVisible=function(e){return!1};Zc.prototype.isFilled=function(e){let t=this._entity;return(this._fillEnabled&&t.isAvailable(e)&&this._showProperty.getValue(e))??!1};Zc.prototype.createFillGeometryInstance=function(e){let t=this._entity,n=t.isAvailable(e),i=new kt(n&&t.isShowing&&this._showProperty.getValue(e)),o=this._distanceDisplayConditionProperty.getValue(e),r=Kt.fromDistanceDisplayCondition(o),a={show:i,distanceDisplayCondition:r},s;return this._materialProperty instanceof lt&&(c(this._materialProperty.color)&&(this._materialProperty.color.isConstant||n)&&(s=this._materialProperty.color.getValue(e,VK)),c(s)||(s=F.WHITE),a.color=Tt.fromColor(s)),this.clampToGround?new gt({id:t,geometry:new by(this._groundGeometryOptions),attributes:a}):(c(this._depthFailMaterialProperty)&&this._depthFailMaterialProperty instanceof lt&&(c(this._depthFailMaterialProperty.color)&&(this._depthFailMaterialProperty.color.isConstant||n)&&(s=this._depthFailMaterialProperty.color.getValue(e,VK)),c(s)||(s=F.WHITE),a.depthFailColor=Tt.fromColor(s)),new gt({id:t,geometry:new HK(this._geometryOptions),attributes:a}))};Zc.prototype.createOutlineGeometryInstance=function(e){};Zc.prototype.isDestroyed=function(){return!1};Zc.prototype.destroy=function(){this._entitySubscription(),pe(this)};Zc.prototype._onEntityPropertyChanged=function(e,t,n,i){if(!(t==="availability"||t==="polyline"))return;let o=this._entity.polyline;if(!c(o)){this._fillEnabled&&(this._fillEnabled=!1,this._geometryChanged.raiseEvent(this));return}let r=o.positions,a=o.show;if(c(a)&&a.isConstant&&!a.getValue(Re.MINIMUM_VALUE)||!c(r)){this._fillEnabled&&(this._fillEnabled=!1,this._geometryChanged.raiseEvent(this));return}let s=o.zIndex,A=o.material??TPe,l=A instanceof lt;this._materialProperty=A,this._depthFailMaterialProperty=o.depthFailMaterial,this._showProperty=a??SPe,this._shadowsProperty=o.shadows??wPe,this._distanceDisplayConditionProperty=o.distanceDisplayCondition??DPe,this._classificationTypeProperty=o.classificationType??QPe,this._fillEnabled=!0,this._zIndex=s??xPe;let f=o.width,h=o.arcType,m=o.clampToGround,p=o.granularity;if(!r.isConstant||!M.isConstant(f)||!M.isConstant(h)||!M.isConstant(p)||!M.isConstant(m)||!M.isConstant(s))this._dynamic||(this._dynamic=!0,this._geometryChanged.raiseEvent(this));else{let g=this._geometryOptions,C=r.getValue(Re.MINIMUM_VALUE,g.positions);if(!c(C)||C.length<2){this._fillEnabled&&(this._fillEnabled=!1,this._geometryChanged.raiseEvent(this));return}let _;l&&(!c(this._depthFailMaterialProperty)||this._depthFailMaterialProperty instanceof lt)?_=Sa.VERTEX_FORMAT:_=$r.VERTEX_FORMAT,g.vertexFormat=_,g.positions=C,g.width=c(f)?f.getValue(Re.MINIMUM_VALUE):void 0,g.arcType=c(h)?h.getValue(Re.MINIMUM_VALUE):void 0,g.granularity=c(p)?p.getValue(Re.MINIMUM_VALUE):void 0;let E=this._groundGeometryOptions;E.positions=C,E.width=g.width,E.arcType=g.arcType,E.granularity=g.granularity,this._clampToGround=c(m)?m.getValue(Re.MINIMUM_VALUE):!1,!this._clampToGround&&c(s)&&jt("Entity polylines must have clampToGround: true when using zIndex.  zIndex will be ignored."),this._dynamic=!1,this._geometryChanged.raiseEvent(this)}};Zc.prototype.createDynamicUpdater=function(e,t){return new OE(e,t,this)};var Cg={positions:void 0,granularity:void 0,height:void 0,ellipsoid:void 0};function OE(e,t,n){this._line=void 0,this._primitives=e,this._groundPrimitives=t,this._groundPolylinePrimitive=void 0,this._material=void 0,this._geometryUpdater=n,this._positions=[]}function jK(e){if(c(e._line))return e._line;let t=e._primitives,n=e._geometryUpdater._scene.id+t._guid,i=UB[n];!c(i)||i.isDestroyed()?(i=new gp,UB[n]=i,t.add(i)):t.contains(i)||t.add(i);let o=i.add();return o.id=e._geometryUpdater._entity,e._line=o,o}OE.prototype.update=function(e){let t=this._geometryUpdater,n=t._entity,i=n.polyline,o=i.positions,r=M.getValueOrUndefined(o,e,this._positions);t._clampToGround=M.getValueOrDefault(i._clampToGround,e,!1),t._groundGeometryOptions.positions=r,t._groundGeometryOptions.width=M.getValueOrDefault(i._width,e,1),t._groundGeometryOptions.arcType=M.getValueOrDefault(i._arcType,e,Yt.GEODESIC),t._groundGeometryOptions.granularity=M.getValueOrDefault(i._granularity,e,9999);let a=this._groundPrimitives;if(c(this._groundPolylinePrimitive)&&(a.remove(this._groundPolylinePrimitive),this._groundPolylinePrimitive=void 0),t.clampToGround){if(!n.isShowing||!n.isAvailable(e)||!M.getValueOrDefault(i._show,e,!0)||!c(r)||r.length<2)return;let h=t.fillMaterialProperty,m;if(h instanceof lt)m=new Sa;else{let p=Ji.getValue(e,h,this._material);m=new $r({material:p,translucent:p.isTranslucent()}),this._material=p}this._groundPolylinePrimitive=a.add(new qf({geometryInstances:t.createFillGeometryInstance(e),appearance:m,classificationType:t.classificationTypeProperty.getValue(e),asynchronous:!1}),M.getValueOrUndefined(t.zIndex,e)),c(this._line)&&(this._line.show=!1);return}let s=jK(this);if(!n.isShowing||!n.isAvailable(e)||!M.getValueOrDefault(i._show,e,!0)){s.show=!1;return}if(!c(r)||r.length<2){s.show=!1;return}let A=Yt.GEODESIC;A=M.getValueOrDefault(i._arcType,e,A);let l=t._scene.globe,f=t._scene.ellipsoid;A!==Yt.NONE&&c(l)&&(Cg.ellipsoid=f,Cg.positions=r,Cg.granularity=M.getValueOrUndefined(i._granularity,e),Cg.height=Ti.extractHeights(r,f),A===Yt.GEODESIC?r=Ti.generateCartesianArc(Cg):r=Ti.generateCartesianRhumbArc(Cg)),s.show=!0,s.positions=r.slice(),s.material=Ji.getValue(e,t.fillMaterialProperty,s.material),s.width=M.getValueOrDefault(i._width,e,1),s.distanceDisplayCondition=M.getValueOrUndefined(i._distanceDisplayCondition,e,s.distanceDisplayCondition)};OE.prototype.getBoundingSphere=function(e){if(this._geometryUpdater.clampToGround){let t=this._groundPolylinePrimitive;if(c(t)&&t.show&&t.ready){let n=t.getGeometryInstanceAttributes(this._geometryUpdater._entity);if(c(n)&&c(n.boundingSphere))return ee.clone(n.boundingSphere,e),He.DONE}return c(t)&&!t.ready?He.PENDING:He.DONE}else{let t=jK(this);if(t.show&&t.positions.length>0)return ee.fromPoints(t.positions,e),He.DONE}return He.FAILED};OE.prototype.isDestroyed=function(){return!1};OE.prototype.destroy=function(){let t=this._geometryUpdater._scene.id+this._primitives._guid,n=UB[t];c(n)&&(n.remove(this._line),n.length===0&&(this._primitives.removeAndDestroy(n),delete UB[t])),c(this._groundPolylinePrimitive)&&this._groundPrimitives.remove(this._groundPolylinePrimitive),pe(this)};var YK=Zc;var PPe=new F,MPe=new rt,OPe=new rt;function $c(e,t,n,i,o){let r;n instanceof lt?r=Sa:r=$r,this.orderedGroundPrimitives=e,this.classificationType=t,this.appearanceType=r,this.materialProperty=n,this.updaters=new ct,this.createPrimitive=!0,this.primitive=void 0,this.oldPrimitive=void 0,this.geometry=new ct,this.material=void 0,this.updatersWithAttributes=new ct,this.attributes=new ct,this.invalidated=!1,this.removeMaterialSubscription=n.definitionChanged.addEventListener($c.prototype.onMaterialChanged,this),this.subscriptions=new ct,this.showsUpdated=new ct,this.zIndex=i,this._asynchronous=o}$c.prototype.onMaterialChanged=function(){this.invalidated=!0};$c.prototype.isMaterial=function(e){let t=this.materialProperty,n=e.fillMaterialProperty;return n===t||n instanceof lt&&t instanceof lt?!0:c(t)&&t.equals(n)};$c.prototype.add=function(e,t,n){let i=t.id;if(this.updaters.set(i,t),this.geometry.set(i,n),!t.hasConstantFill||!t.fillMaterialProperty.isConstant||!M.isConstant(t.distanceDisplayConditionProperty))this.updatersWithAttributes.set(i,t);else{let o=this;this.subscriptions.set(i,t.entity.definitionChanged.addEventListener(function(r,a,s,A){a==="isShowing"&&o.showsUpdated.set(t.id,t)}))}this.createPrimitive=!0};$c.prototype.remove=function(e){let t=e.id;if(this.createPrimitive=this.geometry.remove(t)||this.createPrimitive,this.updaters.remove(t)){this.updatersWithAttributes.remove(t);let n=this.subscriptions.get(t);return c(n)&&(n(),this.subscriptions.remove(t)),!0}return!1};$c.prototype.update=function(e){let t=!0,n=this.primitive,i=this.orderedGroundPrimitives,o=this.geometry.values,r;if(this.createPrimitive){if(o.length>0)c(n)&&(c(this.oldPrimitive)?i.remove(n):this.oldPrimitive=n),n=new qf({show:!1,asynchronous:this._asynchronous,geometryInstances:o.slice(),appearance:new this.appearanceType,classificationType:this.classificationType}),this.appearanceType===$r&&(this.material=Ji.getValue(e,this.materialProperty,this.material),n.appearance.material=this.material),i.add(n,this.zIndex),t=!1;else{c(n)&&(i.remove(n),n=void 0);let s=this.oldPrimitive;c(s)&&(i.remove(s),this.oldPrimitive=void 0)}this.attributes.removeAll(),this.primitive=n,this.createPrimitive=!1}else if(c(n)&&n.ready){n.show=!0,c(this.oldPrimitive)&&(i.remove(this.oldPrimitive),this.oldPrimitive=void 0),this.appearanceType===$r&&(this.material=Ji.getValue(e,this.materialProperty,this.material),this.primitive.appearance.material=this.material);let a=this.updatersWithAttributes.values,s=a.length;for(r=0;r<s;r++){let A=a[r],l=A.entity,f=this.geometry.get(A.id),h=this.attributes.get(f.id.id);if(c(h)||(h=n.getGeometryInstanceAttributes(f.id),this.attributes.set(f.id.id,h)),!A.fillMaterialProperty.isConstant){let C=A.fillMaterialProperty.color,_=M.getValueOrDefault(C,e,F.WHITE,PPe);F.equals(h._lastColor,_)||(h._lastColor=F.clone(_,h._lastColor),h.color=Tt.toValue(_,h.color))}let m=l.isShowing&&(A.hasConstantFill||A.isFilled(e)),p=h.show[0]===1;m!==p&&(h.show=kt.toValue(m,h.show));let g=A.distanceDisplayConditionProperty;if(!M.isConstant(g)){let C=M.getValueOrDefault(g,e,OPe,MPe);rt.equals(C,h._lastDistanceDisplayCondition)||(h._lastDistanceDisplayCondition=rt.clone(C,h._lastDistanceDisplayCondition),h.distanceDisplayCondition=Kt.toValue(C,h.distanceDisplayCondition))}}this.updateShows(n)}else c(n)&&!n.ready&&(t=!1);return t};$c.prototype.updateShows=function(e){let t=this.showsUpdated.values,n=t.length;for(let i=0;i<n;i++){let o=t[i],r=o.entity,a=this.geometry.get(o.id),s=this.attributes.get(a.id.id);c(s)||(s=e.getGeometryInstanceAttributes(a.id),this.attributes.set(a.id.id,s));let A=r.isShowing,l=s.show[0]===1;A!==l&&(s.show=kt.toValue(A,s.show),a.attributes.show.value[0]=s.show[0])}this.showsUpdated.removeAll()};$c.prototype.contains=function(e){return this.updaters.contains(e.id)};$c.prototype.getBoundingSphere=function(e,t){let n=this.primitive;if(!n.ready)return He.PENDING;let i=n.getGeometryInstanceAttributes(e.entity);return!c(i)||!c(i.boundingSphere)||c(i.show)&&i.show[0]===0?He.FAILED:(i.boundingSphere.clone(t),He.DONE)};$c.prototype.destroy=function(){let e=this.primitive,t=this.orderedGroundPrimitives;c(e)&&t.remove(e);let n=this.oldPrimitive;c(n)&&t.remove(n),this.removeMaterialSubscription()};function _g(e,t,n){this._items=[],this._orderedGroundPrimitives=e,this._classificationType=t,this._asynchronous=n??!0}_g.prototype.add=function(e,t){let n=this._items,i=n.length,o=t.createFillGeometryInstance(e),r=M.getValueOrDefault(t.zIndex,0);for(let s=0;s<i;++s){let A=n[s];if(A.isMaterial(t)&&A.zIndex===r){A.add(e,t,o);return}}let a=new $c(this._orderedGroundPrimitives,this._classificationType,t.fillMaterialProperty,r,this._asynchronous);a.add(e,t,o),n.push(a)};_g.prototype.remove=function(e){let t=this._items,n=t.length;for(let i=n-1;i>=0;i--){let o=t[i];if(o.remove(e)){o.updaters.length===0&&(t.splice(i,1),o.destroy());break}}};_g.prototype.update=function(e){let t,n=this._items,i=n.length;for(t=i-1;t>=0;t--){let r=n[t];if(r.invalidated){n.splice(t,1);let a=r.updaters.values,s=a.length;for(let A=0;A<s;A++)this.add(e,a[A]);r.destroy()}}let o=!0;for(t=0;t<n.length;t++)o=n[t].update(e)&&o;return o};_g.prototype.getBoundingSphere=function(e,t){let n=this._items,i=n.length;for(let o=0;o<i;o++){let r=n[o];if(r.contains(e))return r.getBoundingSphere(e,t)}return He.FAILED};_g.prototype.removeAllPrimitives=function(){let e=this._items,t=e.length;for(let n=0;n<t;n++)e[n].destroy();this._items.length=0};var qK=_g;var LPe=[];function WK(e,t){let n=e._batches,i=n.length;for(let o=0;o<i;o++)n[o].remove(t)}function JK(e,t,n){if(n.isDynamic){e._dynamicBatch.add(t,n);return}if(n.clampToGround&&n.fillEnabled){let a=n.classificationTypeProperty.getValue(t);e._groundBatches[a].add(t,n);return}let i;n.fillEnabled&&(i=n.shadowsProperty.getValue(t));let o=0;c(n.depthFailMaterialProperty)&&(o=n.depthFailMaterialProperty instanceof lt?1:2);let r;c(i)&&(r=i+o*cn.NUMBER_OF_SHADOW_MODES),n.fillEnabled&&(n.fillMaterialProperty instanceof lt?e._colorBatches[r].add(t,n):e._materialBatches[r].add(t,n))}function ZA(e,t,n,i){i=i??e.groundPrimitives,n=n??e.primitives,this._scene=e,this._primitives=n,this._entityCollection=void 0,this._addedObjects=new ct,this._removedObjects=new ct,this._changedObjects=new ct;let o,r=cn.NUMBER_OF_SHADOW_MODES;for(this._colorBatches=new Array(r*3),this._materialBatches=new Array(r*3),o=0;o<r;++o)this._colorBatches[o]=new Cf(n,Sa,void 0,!1,o),this._materialBatches[o]=new _f(n,$r,void 0,!1,o),this._colorBatches[o+r]=new Cf(n,Sa,Sa,!1,o),this._materialBatches[o+r]=new _f(n,$r,Sa,!1,o),this._colorBatches[o+r*2]=new Cf(n,Sa,$r,!1,o),this._materialBatches[o+r*2]=new _f(n,$r,$r,!1,o);this._dynamicBatch=new gB(n,i);let a=on.NUMBER_OF_CLASSIFICATION_TYPES;for(this._groundBatches=new Array(a),o=0;o<a;++o)this._groundBatches[o]=new qK(i,o);this._batches=this._colorBatches.concat(this._materialBatches,this._dynamicBatch,this._groundBatches),this._subscriptions=new ct,this._updaters=new ct,this._entityCollection=t,t.collectionChanged.addEventListener(ZA.prototype._onCollectionChanged,this),this._onCollectionChanged(t,t.values,LPe)}ZA.prototype.update=function(e){let t=this._addedObjects,n=t.values,i=this._removedObjects,o=i.values,r=this._changedObjects,a=r.values,s,A,l,f;for(s=a.length-1;s>-1;s--)A=a[s],l=A.id,f=this._updaters.get(l),f.entity===A?(WK(this,f),JK(this,e,f)):(o.push(A),n.push(A));for(s=o.length-1;s>-1;s--)A=o[s],l=A.id,f=this._updaters.get(l),WK(this,f),f.destroy(),this._updaters.remove(l),this._subscriptions.get(l)(),this._subscriptions.remove(l);for(s=n.length-1;s>-1;s--)A=n[s],l=A.id,f=new YK(A,this._scene),this._updaters.set(l,f),JK(this,e,f),this._subscriptions.set(l,f.geometryChanged.addEventListener(ZA._onGeometryChanged,this));t.removeAll(),i.removeAll(),r.removeAll();let h=!0,m=this._batches,p=m.length;for(s=0;s<p;s++)h=m[s].update(e)&&h;return h};var NPe=[],FPe=new ee;ZA.prototype.getBoundingSphere=function(e,t){let n=NPe,i=FPe,o=0,r=He.DONE,a=this._batches,s=a.length,A=this._updaters.get(e.id);for(let l=0;l<s;l++){if(r=a[l].getBoundingSphere(A,i),r===He.PENDING)return He.PENDING;r===He.DONE&&(n[o]=ee.clone(i,n[o]),o++)}return o===0?He.FAILED:(n.length=o,ee.fromBoundingSpheres(n,t),He.DONE)};ZA.prototype.isDestroyed=function(){return!1};ZA.prototype.destroy=function(){this._entityCollection.collectionChanged.removeEventListener(ZA.prototype._onCollectionChanged,this),this._addedObjects.removeAll(),this._removedObjects.removeAll();let e,t=this._batches,n=t.length;for(e=0;e<n;e++)t[e].removeAllPrimitives();let i=this._subscriptions.values;for(n=i.length,e=0;e<n;e++)i[e]();return this._subscriptions.removeAll(),pe(this)};ZA._onGeometryChanged=function(e){let t=this._removedObjects,n=this._changedObjects,i=e.entity,o=i.id;!c(t.get(o))&&!c(n.get(o))&&n.set(o,i)};ZA.prototype._onCollectionChanged=function(e,t,n){let i=this._addedObjects,o=this._removedObjects,r=this._changedObjects,a,s,A;for(a=n.length-1;a>-1;a--)A=n[a],s=A.id,i.remove(s)||(o.set(s,A),r.remove(s));for(a=t.length-1;a>-1;a--)A=t[a],s=A.id,o.remove(s)?r.set(s,A):i.set(s,A)};var KK=ZA;function Fa(e){Ls.initializeTerrainHeights(),qf.initializeTerrainHeights();let t=e.scene,n=e.dataSourceCollection;this._eventHelper=new HA,this._eventHelper.add(n.dataSourceAdded,this._onDataSourceAdded,this),this._eventHelper.add(n.dataSourceRemoved,this._onDataSourceRemoved,this),this._eventHelper.add(n.dataSourceMoved,this._onDataSourceMoved,this),this._eventHelper.add(t.postRender,this._postRender,this),this._dataSourceCollection=n,this._scene=t,this._visualizersCallback=e.visualizersCallback??Fa.defaultVisualizersCallback;let i=!1,o=new Jp,r=new Jp;n.length>0&&(t.primitives.add(o),t.groundPrimitives.add(r),i=!0),this._primitives=o,this._groundPrimitives=r;for(let l=0,f=n.length;l<f;l++)this._onDataSourceAdded(n,n.get(l));let a=new Pq;this._onDataSourceAdded(void 0,a),this._defaultDataSource=a;let s,A;if(!i){let l=this,f=function(){t.primitives.add(o),t.groundPrimitives.add(r),s(),A(),l._removeDefaultDataSourceListener=void 0,l._removeDataSourceCollectionListener=void 0};s=a.entities.collectionChanged.addEventListener(f),A=n.dataSourceAdded.addEventListener(f)}this._removeDefaultDataSourceListener=s,this._removeDataSourceCollectionListener=A,this._ready=!1}var Eg=[];Fa.registerVisualizer=function(e){Eg.includes(e)||Eg.push(e)};Fa.unregisterVisualizer=function(e){if(Eg.includes(e)){let t=Eg.indexOf(e);Eg.splice(t,1)}};Fa.defaultVisualizersCallback=function(e,t,n){let i=n.entities;return[new bF(t,i),new gg(e,i,n._primitives,n._groundPrimitives),new uK(t,i),new pK(e,i),new _Y(e,i),new OK(t,i),new yK(e,i),new KK(e,i,n._primitives,n._groundPrimitives),...Eg.map(o=>new o(e,i))]};Object.defineProperties(Fa.prototype,{scene:{get:function(){return this._scene}},dataSources:{get:function(){return this._dataSourceCollection}},defaultDataSource:{get:function(){return this._defaultDataSource}},ready:{get:function(){return this._ready}}});Fa.prototype.isDestroyed=function(){return!1};Fa.prototype.destroy=function(){this._eventHelper.removeAll();let e=this._dataSourceCollection;for(let t=0,n=e.length;t<n;++t)this._onDataSourceRemoved(this._dataSourceCollection,e.get(t));return this._onDataSourceRemoved(void 0,this._defaultDataSource),c(this._removeDefaultDataSourceListener)?(this._removeDefaultDataSourceListener(),this._removeDataSourceCollectionListener()):(this._scene.primitives.remove(this._primitives),this._scene.groundPrimitives.remove(this._groundPrimitives)),pe(this)};Fa.prototype.update=function(e){if(!On.initialized)return this._ready=!1,!1;let t=!0,n,i,o,r,a=this._dataSourceCollection,s=a.length;for(n=0;n<s;n++){let A=a.get(n);for(c(A.update)&&(t=A.update(e)&&t),o=A._visualizers,r=o.length,i=0;i<r;i++)t=o[i].update(e)&&t}for(o=this._defaultDataSource._visualizers,r=o.length,i=0;i<r;i++)t=o[i].update(e)&&t;return!this._ready&&t&&this._scene.requestRender(),this._ready=this._ready||t,t};Fa.prototype._postRender=function(){let e=this._scene.frameState,t=this._dataSourceCollection,n=t.length;for(let i=0;i<n;i++){let o=t.get(i),r=o.credit;c(r)&&e.creditDisplay.addCreditToNextFrame(r);let a=o._resourceCredits;if(c(a)){let s=a.length;for(let A=0;A<s;A++)e.creditDisplay.addCreditToNextFrame(a[A])}}};var kPe=[],UPe=new ee;Fa.prototype.getBoundingSphere=function(e,t,n){if(!this._ready)return He.PENDING;let i,o,r=this._defaultDataSource;if(!r.entities.contains(e)){r=void 0;let m=this._dataSourceCollection;for(o=m.length,i=0;i<o;i++){let p=m.get(i);if(p.entities.contains(e)){r=p;break}}}if(!c(r))return He.FAILED;let a=kPe,s=UPe,A=0,l=He.DONE,f=r._visualizers,h=f.length;for(i=0;i<h;i++){let m=f[i];if(c(m.getBoundingSphere)){if(l=f[i].getBoundingSphere(e,s),!t&&l===He.PENDING)return He.PENDING;l===He.DONE&&(a[A]=ee.clone(s,a[A]),A++)}}return A===0?He.FAILED:(a.length=A,ee.fromBoundingSpheres(a,n),He.DONE)};Fa.prototype._onDataSourceAdded=function(e,t){let n=this._scene,i=this._primitives,o=this._groundPrimitives,r=i.add(new Jp),a=o.add(new xW);t._primitives=r,t._groundPrimitives=a;let s=t.clustering;s._initialize(n),r.add(s),t._visualizers=this._visualizersCallback(n,s,t)};Fa.prototype._onDataSourceRemoved=function(e,t){let n=this._primitives,i=this._groundPrimitives,o=t._primitives,r=t._groundPrimitives,a=t.clustering;o.remove(a);let s=t._visualizers,A=s.length;for(let l=0;l<A;l++)s[l].destroy();n.remove(o),i.remove(r),t._visualizers=void 0};Fa.prototype._onDataSourceMoved=function(e,t,n){let i=this._primitives,o=this._groundPrimitives,r=e._primitives,a=e._groundPrimitives;t===n+1?(i.raise(r),o.raise(a)):t===n-1?(i.lower(r),o.lower(a)):t===0?(i.lowerToBottom(r),o.lowerToBottom(a),i.raise(r),o.raise(a)):(i.raiseToTop(r),o.raiseToTop(a))};var GB=Fa;globalThis.CESIUM_VERSION="1.133.1";var eA=new u;function XK(e){e=e??k.EMPTY_OBJECT,this._radius=e.radius,this._directions=e.directions,this._perDirectionRadius=e.perDirectionRadius,this._vertexFormat=e.vertexFormat??ge.DEFAULT,this._workerPath=ho("IonSdkGeometryWorkers/createFanGeometry.js")}XK.createGeometry=function(e){let t=e._vertexFormat,n=e._radius,i=c(e._perDirectionRadius)&&e._perDirectionRadius,o=e._directions;o[0].clock<o[1].clock&&o.reverse();let r,a,s=0,A,l,f,h,m,p=new Mt,g=[],C=[],_=o.length;for(A=0;A<_;A++)h=u.fromSpherical(o[A]),A===0?(g.push(h),C.push(u.normalize(h,new u))):u.equals(g[A-1],h)||(A===_-1?u.equals(g[0],h)||(g.push(h),C.push(u.normalize(h,new u))):(g.push(h),C.push(u.normalize(h,new u))));if(_=g.length,t.position){m=(_+1)*2*3;let I=new Float64Array(m);for(l=0,A=0;A<_;A++){I[l++]=0,I[l++]=0,I[l++]=0,h=C[A];let y=i?u.magnitude(g[A]):n;I[l++]=h.x*y,I[l++]=h.y*y,I[l++]=h.z*y,s=Math.max(s,y)}I[l++]=I[0],I[l++]=I[1],I[l++]=I[2],I[l++]=I[3],I[l++]=I[4],I[l++]=I[5],p.position=new ue({componentDatatype:N.DOUBLE,componentsPerAttribute:3,values:I})}if(t.normal){m=(_+1)*2*3,r=new Float32Array(m);let I;for(l=0,A=0;A<_;A++)h=g[A],A+1===_?I=g[0]:I=g[A+1],eA=u.normalize(u.cross(h,I,eA),eA),r[l++]=eA.x,r[l++]=eA.y,r[l++]=eA.z,r[l++]=eA.x,r[l++]=eA.y,r[l++]=eA.z;r[l++]=r[0],r[l++]=r[1],r[l++]=r[2],r[l++]=r[3],r[l++]=r[4],r[l++]=r[5],p.normal=new ue({componentDatatype:N.FLOAT,componentsPerAttribute:3,values:r})}if(t.bitangent){for(m=(_+1)*2*3,a=new Float32Array(m),l=0,A=0;A<_;A++)h=C[A],a[l++]=h.x,a[l++]=h.y,a[l++]=h.z,a[l++]=h.x,a[l++]=h.y,a[l++]=h.z;a[l++]=a[0],a[l++]=a[1],a[l++]=a[2],a[l++]=a[3],a[l++]=a[4],a[l++]=a[5],p.bitangent=new ue({componentDatatype:N.FLOAT,componentsPerAttribute:3,values:a})}if(t.tangent){m=(_+1)*2*3;let I=new Float32Array(m);for(l=0,A=0;A<m;A+=6){let y=u.unpack(r,A),b=u.unpack(a,A),x=u.normalize(u.cross(b,y,eA),eA);I[l++]=x.x,I[l++]=x.y,I[l++]=x.z,I[l++]=x.x,I[l++]=x.y,I[l++]=x.z}p.tangent=new ue({componentDatatype:N.FLOAT,componentsPerAttribute:3,values:I})}if(t.st){m=(_+1)*2*2;let I=new Float32Array(m);for(l=0,A=0;A<_;A++)f=1-A/(_+1),I[l++]=f,I[l++]=0,I[l++]=f,I[l++]=1;f=1-A/(_+1),I[l++]=f,I[l++]=0,I[l++]=f,I[l++]=1,p.st=new ue({componentDatatype:N.FLOAT,componentsPerAttribute:2,values:I})}l=0,A=0,m=(_+1)*2*3;let E=Be.createTypedArray(m/3,m);for(;l<m-6;)E[l++]=A,E[l++]=A+3,E[l++]=A+1,E[l++]=A,E[l++]=A+2,E[l++]=A+3,A+=2;return E[l++]=A,E[l++]=1,E[l++]=A+1,E[l++]=A,E[l++]=0,E[l++]=1,new ze({attributes:p,indices:E,primitiveType:Ce.TRIANGLES,boundingSphere:new ee(u.ZERO,s)})};var zB=XK;var yf=new u;function ZK(e){e=e??k.EMPTY_OBJECT,this._radius=e.radius,this._directions=e.directions,this._perDirectionRadius=e.perDirectionRadius,this._numberOfRings=e.numberOfRings??6,this._vertexFormat=e.vertexFormat??ge.DEFAULT,this._workerPath=ho("IonSdkGeometryWorkers/createFanOutlineGeometry.js")}ZK.createGeometry=function(e){let t=e._radius,n=c(e._perDirectionRadius)&&e._perDirectionRadius,i=e._directions,o=e._vertexFormat,r=e._numberOfRings,a,s,A,l,f=0,h,m=i.length,p=new Mt;if(o.position){for(s=0,l=m*3*r,h=new Float64Array(l),A=0;A<r;A++)for(a=0;a<m;a++){yf=u.fromSpherical(i[a],yf);let C=n?u.magnitude(yf):t,_=C/r*(A+1);yf=u.normalize(yf,yf),h[s++]=yf.x*_,h[s++]=yf.y*_,h[s++]=yf.z*_,f=Math.max(f,C)}p.position=new ue({componentDatatype:N.DOUBLE,componentsPerAttribute:3,values:h})}s=0,l=m*2*r;let g=Be.createTypedArray(l/3,l);for(A=0;A<r;A++){let C=A*m;for(a=0;a<m-1;a++)g[s++]=a+C,g[s++]=a+1+C;g[s++]=a+C,g[s++]=0+C}return new ze({attributes:p,indices:g,primitiveType:Ce.LINES,boundingSphere:new ee(u.ZERO,f)})};var HB=ZK;var $K=new F,GPe=new u,e5=new li(6);function zPe(e){this.id=e,this.vertexFormat=void 0,this.directions=void 0,this.radius=void 0,this.perDirectionRadius=void 0,this.numberOfRings=void 0}function tA(e,t){ln.call(this,{entity:e,scene:t,geometryOptions:new zPe(e),geometryPropertyName:"fan",observedPropertyNames:["availability","position","fan"]}),this._onEntityPropertyChanged(e,"fan",e.fan,void 0)}c(Object.create)&&(tA.prototype=Object.create(ln.prototype),tA.prototype.constructor=tA);tA.prototype.createFillGeometryInstance=function(e){let t=this._entity,n=t.isAvailable(e),i,o,r=new kt(n&&t.isShowing&&this._showProperty.getValue(e)&&this._fillProperty.getValue(e)),a=this._distanceDisplayConditionProperty.getValue(e),s=Kt.fromDistanceDisplayCondition(a);if(this._materialProperty instanceof lt){let A;c(this._materialProperty.color)&&(this._materialProperty.color.isConstant||n)&&(A=this._materialProperty.color.getValue(e,$K)),c(A)||(A=F.WHITE),o=Tt.fromColor(A),i={show:r,distanceDisplayCondition:s,color:o}}else i={show:r,distanceDisplayCondition:s};return new gt({id:t,geometry:new zB(this._options),modelMatrix:t.computeModelMatrix(e),attributes:i})};tA.prototype.createOutlineGeometryInstance=function(e){let t=this._entity,n=t.isAvailable(e),i=M.getValueOrDefault(this._outlineColorProperty,e,F.BLACK,$K),o=this._distanceDisplayConditionProperty.getValue(e);return new gt({id:t,geometry:new HB(this._options),modelMatrix:t.computeModelMatrix(e),attributes:{show:new kt(n&&this._showProperty.getValue(e)&&this._showOutlineProperty.getValue(e)),color:Tt.fromColor(i),distanceDisplayCondition:Kt.fromDistanceDisplayCondition(o)}})};tA.prototype._isHidden=function(e,t){return!c(e.position)||!c(t.perDirectionRadius)&&!c(t.radius)||ln.prototype._isHidden.call(this,e,t)};tA.prototype._isDynamic=function(e,t){return!M.isConstant(e.position)||!M.isConstant(e.orientation)||!M.isConstant(t.perDirectionRadius)||!M.isConstant(t.radius)||!M.isConstant(t.directions)||!M.isConstant(t.outlineWidth)||!M.isConstant(t.numberOfRings)};tA.prototype._getIsClosed=function(){return!1};tA.prototype._setStaticOptions=function(e,t){let n=this._materialProperty instanceof lt,i=t.numberOfRings??e5,o=this._options;o.vertexFormat=n?Vt.VERTEX_FORMAT:Zn.VERTEX_FORMAT,o.directions=t.directions.getValue(Re.MINIMUM_VALUE,o.directions),o.radius=c(t.radius)?t.radius.getValue(Re.MINIMUM_VALUE):void 0,o.perDirectionRadius=c(t.perDirectionRadius)?t.perDirectionRadius.getValue(Re.MINIMUM_VALUE):void 0,o.numberOfRings=i.getValue(Re.MINIMUM_VALUE)};tA.DynamicGeometryUpdater=Ig;function Ig(e,t,n){An.call(this,e,t,n)}c(Object.create)&&(Ig.prototype=Object.create(An.prototype),Ig.prototype.constructor=Ig);Ig.prototype._isHidden=function(e,t,n){let i=M.getValueOrUndefined(e.position,n,GPe),o=this._options;return!c(i)||!c(o.perDirectionRadius)&&!c(o.radius)||An.prototype._isHidden.call(this,e,t,n)};Ig.prototype._setOptions=function(e,t,n){let i=t.radius,o=t.perDirectionRadius,r=t.numberOfRings??e5,a=this._options;a.directions=t.directions.getValue(n,a.directions),a.radius=c(i)?i.getValue(n):void 0,a.perDirectionRadius=c(o)?o.getValue(n):void 0,a.numberOfRings=r.getValue(n)};var VB=tA;function LE(e){this._show=void 0,this._showSubscription=void 0,this._radius=void 0,this._radiusSubscription=void 0,this._perDirectionRadius=void 0,this._perDirectionRadiusSubscription=void 0,this._directions=void 0,this._directionsSubscription=void 0,this._material=void 0,this._materialSubscription=void 0,this._fill=void 0,this._fillSubscription=void 0,this._outline=void 0,this._outlineSubscription=void 0,this._outlineColor=void 0,this._outlineColorSubscription=void 0,this._outlineWidth=void 0,this._outlineWidthSubscription=void 0,this._numberOfRings=void 0,this._numberOfRingsSubscription=void 0,this._shadows=void 0,this._shadowsSubscription=void 0,this._distanceDisplayCondition=void 0,this._distanceDisplayConditionSubscription=void 0,this._definitionChanged=new fe,this.merge(e??k.EMPTY_OBJECT)}Object.defineProperties(LE.prototype,{definitionChanged:{get:function(){return this._definitionChanged}},show:W("show"),radius:W("radius"),perDirectionRadius:W("perDirectionRadius"),directions:W("directions"),material:gi("material"),fill:W("fill"),outline:W("outline"),outlineColor:W("outlineColor"),outlineWidth:W("outlineWidth"),numberOfRings:W("numberOfRings"),shadows:W("shadows"),distanceDisplayCondition:W("distanceDisplayCondition")});LE.prototype.clone=function(e){return c(e)||(e=new LE),e.show=this.show,e.radius=this.radius,e.perDirectionRadius=this.perDirectionRadius,e.directions=this.directions,e.material=this.material,e.fill=this.fill,e.outline=this.outline,e.outlineColor=this.outlineColor,e.outlineWidth=this.outlineWidth,e.numberOfRings=this.numberOfRings,e.shadows=this.shadows,e.distanceDisplayCondition=this.distanceDisplayCondition,e};LE.prototype.merge=function(e){this.show=this.show??e.show,this.radius=this.radius??e.radius,this.perDirectionRadius=this.perDirectionRadius??e.perDirectionRadius,this.directions=this.directions??e.directions,this.material=this.material??e.material,this.fill=this.fill??e.fill,this.outline=this.outline??e.outline,this.outlineColor=this.outlineColor??e.outlineColor,this.outlineWidth=this.outlineWidth??e.outlineWidth,this.numberOfRings=this.numberOfRings??e.numberOfRings,this.shadows=this.shadows??e.shadows,this.distanceDisplayCondition=this.distanceDisplayCondition??e.distanceDisplayCondition};var yg=LE;function HPe(e){let t=e.length,n=new Array(t/2);for(let i=0;i<t;i+=2){let o=i/2;n[o]=new uf(e[i],e[i+1])}return n}function VPe(e){let t=e.length,n=new Array(t/3);for(let i=0;i<t;i+=3){let o=i/3;n[o]=new uf(e[i],e[i+1],e[i+2])}return n}function t5(e,t,n,i){c(n.unitSpherical)?n.array=HPe(n.unitSpherical):c(n.spherical)?n.array=VPe(n.spherical):c(n.unitCartesian)?n.array=u.unpackArray(n.unitCartesian).map(function(o){let r=uf.fromCartesian3(o);return uf.normalize(r,r)}):c(n.cartesian)&&(n.array=u.unpackArray(n.cartesian).map(function(o){return uf.fromCartesian3(o)})),c(n.array)&&no.processPacketData(Array,e,t,n,void 0,void 0,i)}function jPe(e,t,n,i){if(c(n))if(Array.isArray(n))for(let o=0,r=n.length;o<r;o++)t5(e,t,n[o],i);else t5(e,t,n,i)}function NE(e,t,n,i){let o=t.agi_fan;if(!c(o))return;let r=o.interval;c(r)&&(r=nn.fromIso8601(r));let a=e.fan;c(a)||(e.fan=a=new yg),no.processPacketData(Boolean,a,"show",o.show,r,i,n),jPe(a,"directions",o.directions,n),no.processPacketData(Number,a,"radius",o.radius,r,i,n),no.processMaterialPacketData(a,"material",o.material,r,i,n),no.processPacketData(Boolean,a,"perDirectionRadius",o.perDirectionRadius,r,i,n),no.processPacketData(Boolean,a,"fill",o.fill,r,i,n),no.processPacketData(Boolean,a,"outline",o.outline,r,i,n),no.processPacketData(F,a,"outlineColor",o.outlineColor,r,i,n),no.processPacketData(Number,a,"outlineWidth",o.outlineWidth,r,i,n),no.processPacketData(Number,a,"numberOfRings",o.numberOfRings,r,i,n),no.processPacketData(cn,a,"shadows",o.shadows,r,i,n)}function FE(e){this._color=void 0,this._colorSubscription=void 0,this._show=void 0,this._showSubscription=void 0,this._direction=void 0,this._directionSubscription=void 0,this._length=void 0,this._lengthSubscription=void 0,this._minimumLengthInPixels=void 0,this._minimumLengthInPixelsSubscription=void 0,this._definitionChanged=new fe,this.merge(e??k.EMPTY_OBJECT)}Object.defineProperties(FE.prototype,{definitionChanged:{get:function(){return this._definitionChanged}},color:W("color"),show:W("show"),direction:W("direction"),length:W("length"),minimumLengthInPixels:W("minimumLengthInPixels")});FE.prototype.clone=function(e){return c(e)||(e=new FE),e.color=this.color,e.direction=this.direction,e.length=this.length,e.minimumLengthInPixels=this.minimumLengthInPixels,e.show=this.show,e};FE.prototype.merge=function(e){this.color=this.color??e.color,this.direction=this.direction??e.direction,this.length=this.length??e.length,this.minimumLengthInPixels=this.minimumLengthInPixels??e.minimumLengthInPixels,this.show=this.show??e.show};var bg=FE;var n5={iso8601:void 0};function kE(e,t,n,i){let o=t.agi_vector;if(!c(o))return;let r,a=o.interval;c(a)&&(n5.iso8601=a,r=nn.fromIso8601(n5));let s=e.vector;c(s)||(e.vector=s=new bg),no.processPacketData(F,s,"color",o.color,r,i,n),no.processPacketData(Boolean,s,"show",o.show,r,i,n),no.processPacketData(u,s,"direction",o.direction,r,i,n),no.processPacketData(Number,s,"length",o.length,r,i,n),no.processPacketData(Number,s,"minimumLengthInPixels",o.minimumLengthInPixels,r,i,n)}function UE(e){e=e??k.EMPTY_OBJECT,this.show=e.show??!0,this.length=e.length??1,this.minimumLengthInPixels=e.minimumLengthInPixels??0,this.color=F.clone(e.color??F.WHITE),this.id=e.id,this._allowPicking=e.allowPicking??!0,this.debugShowBoundingVolume=e.debugShowBoundingVolume??!1,this.debugWireframe=e.debugWireframe??!1,this._position=u.clone(e.position??u.ZERO),this._direction=u.clone(e.direction??u.UNIT_Y),this._modelMatrixDirty=!0,this._model=void 0;let t={primitive:this};Mc.fromGltfAsync({url:ho("IonSdkGeometry/Assets/Models/Vector/Vector.glb"),enableDebugWireframe:!0,asynchronous:!1,pickObject:t,allowPicking:this.allowPicking}).then(n=>this._model=n).catch(n=>{this.isDestroyed()||console.log(`Error creating vector: ${n}`)})}Object.defineProperties(UE.prototype,{position:{get:function(){return this._position},set:function(e){u.clone(e,this._position),this._modelMatrixDirty=!0}},direction:{get:function(){return this._direction},set:function(e){u.clone(e,this._direction),this._modelMatrixDirty=!0}},allowPicking:{get:function(){return this._allowPicking}}});var i5=new u,o5=new u;UE.prototype.update=function(e){let t=this._model;if(c(t)){if(t.show=this.show,t.id=this.id,t.scale=this.length,t.minimumPixelSize=this.minimumLengthInPixels,t.debugShowBoundingVolume=this.debugShowBoundingVolume,t.debugWireframe=this.debugWireframe,t.color=this.color,this._modelMatrixDirty){this._modelMatrixDirty=!1;let n=this.direction,i,o;w.equalsEpsilon(n.x,0,w.EPSILON14)&&w.equalsEpsilon(n.y,0,w.EPSILON14)?(i=u.cross(n,u.UNIT_Y,i5),o=u.cross(i,n,o5)):(i=u.cross(n,u.UNIT_Z,i5),o=u.cross(i,n,o5));let r=t.modelMatrix;r[0]=i.x,r[1]=i.y,r[2]=i.z,r[3]=0,r[4]=-o.x,r[5]=-o.y,r[6]=-o.z,r[7]=0,r[8]=n.x,r[9]=n.y,r[10]=n.z,r[11]=0;let a=this.position;r[12]=a.x,r[13]=a.y,r[14]=a.z,r[15]=1}return t.update(e)}};UE.prototype.isDestroyed=function(){return!1};UE.prototype.destroy=function(){return this._model=this._model&&this._model.destroy(),pe(this)};var jB=UE;var YPe=F.WHITE,qPe=1,WPe=0,YB=new u;function ad(e,t){t.collectionChanged.addEventListener(ad.prototype._onCollectionChanged,this),this._scene=e,this._primitives=e.primitives,this._entityCollection=t,this._hash={},this._entitiesToVisualize=new ct,this._onCollectionChanged(t,t.values,[],[])}ad.prototype.update=function(e){let t=this._entitiesToVisualize.values,n=this._hash,i=this._primitives;for(let o=0,r=t.length;o<r;o++){let a=t[o],s=a._vector,A,l=n[a.id],f=a.isShowing&&a.isAvailable(e)&&M.getValueOrDefault(s._show,e,!0);if(f&&(YB=M.getValueOrUndefined(a._position,e,YB),A=M.getValueOrUndefined(s._direction,e,A),f=c(YB)&&c(A)),!f){c(l)&&(l.show=!1);continue}c(l)||(l=new jB({color:F.WHITE,id:a}),l.id=a,i.add(l),n[a.id]=l),l.show=!0,l.position=YB,l.direction=u.normalize(A,A),l.length=M.getValueOrDefault(s._length,e,qPe),l.minimumLengthInPixels=M.getValueOrDefault(s._minimumLengthInPixels,e,WPe),l.color=M.getValueOrDefault(s._color,e,YPe)}return!0};ad.prototype.isDestroyed=function(){return!1};ad.prototype.destroy=function(){this._entityCollection.collectionChanged.removeEventListener(ad.prototype._onCollectionChanged,this);let e=this._entitiesToVisualize.values,t=this._hash,n=this._primitives;for(let i=e.length-1;i>-1;i--)dv(this,e[i],t,n);return pe(this)};ad.prototype.getBoundingSphere=function(e,t){let n=this._hash[e.id];return c(n)?(t.center=u.clone(n.position,t.center),t.radius=n.length,He.DONE):He.FAILED};ad.prototype._onCollectionChanged=function(e,t,n,i){let o,r,a=this._entitiesToVisualize,s=this._hash,A=this._primitives;for(o=t.length-1;o>-1;o--)r=t[o],c(r._vector)&&c(r._position)&&a.set(r.id,r);for(o=i.length-1;o>-1;o--)r=i[o],c(r._vector)&&c(r._position)?a.set(r.id,r):(dv(this,r,s,A),a.remove(r.id));for(o=n.length-1;o>-1;o--)r=n[o],dv(this,r,s,A),a.remove(r.id)};function dv(e,t,n,i){let o=n[t.id];c(o)&&(i.remove(o),o.isDestroyed()||o.destroy(),delete n[t.id])}var qB=ad;function WB(){if(GB&&no&&ea&&gg)GB.registerVisualizer(qB),no.registerUpdater(NE),no.registerUpdater(kE),ea.registerEntityType("fan",yg),ea.registerEntityType("vector",bg),gg.registerUpdater(VB);else throw new Ee("attempted to initialize sensors code before CesiumJS core")}WB();globalThis.ION_SDK_VERSION="1.133";0&&(module.exports={FanGeometry,FanGeometryUpdater,FanGraphics,FanOutlineGeometry,Vector,VectorGraphics,VectorVisualizer,initializeGeometry,processFan,processVector});
