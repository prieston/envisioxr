/**
 * @license
 * Cesium Analytics SDK
 * Version 1.133
 *
 * Copyright 2012-2020 Cesium GS, Inc.
 * All rights reserved.
 *
 * Patents US9153063B2 US9865085B1 US9449424B2 US10592242
 * Patents pending US15/829,786 US16/850,266 US16/851,958
 *
 * Portions licensed separately.
 * See https://github.com/CesiumGS/cesium/blob/main/LICENSE.md for open-source Cesium license.
 */

var qn="http://www.w3.org/2000/svg",Jn="cesium-svgPath-svg",kr={register:function(t){t.bindingHandlers.cesiumSvgPath={init:function(i,o){let c=document.createElementNS(qn,"svg:svg");c.setAttribute("class",Jn);let h=document.createElementNS(qn,"path");return c.appendChild(h),t.virtualElements.setDomNodeChildren(i,[c]),t.computed({read:function(){let b=t.unwrap(o());h.setAttribute("d",t.unwrap(b.path));let x=t.unwrap(b.width),S=t.unwrap(b.height);c.setAttribute("width",x),c.setAttribute("height",S),c.setAttribute("viewBox",`0 0 ${x} ${S}`),b.css&&c.setAttribute("class",`${Jn} ${t.unwrap(b.css)}`)},disposeWhenNodeIsRemoved:i}),{controlsDescendantBindings:!0}}},t.virtualElements.allowedBindings.cesiumSvgPath=!0}},zi=kr;import{defined as Nr,ManagedArray as Lr,PrimitiveCollection as Xn}from"@cesium/engine";function qe(){this.states=new Lr,this.count=0}qe.prototype.hidePrimitiveCollection=function(t,i){let o=t.length,c=i??Nr;for(let h=0;h<o;++h){let b=t.get(h);if(b instanceof Xn){this.hidePrimitiveCollection(b,c);continue}this.states.push(b.show),!c(b)&&(b.show=!1)}};qe.prototype.restorePrimitiveCollection=function(t){let i=t.length;for(let o=0;o<i;++o){let c=t.get(o);if(c instanceof Xn){this.restorePrimitiveCollection(c);continue}c.show=this.states.get(this.count++)}};qe.prototype.hide=function(t,i){this.states.length=0,this.hidePrimitiveCollection(t.primitives,i),this.hidePrimitiveCollection(t.groundPrimitives,i)};qe.prototype.restore=function(t){this.count=0,this.restorePrimitiveCollection(t.primitives),this.restorePrimitiveCollection(t.groundPrimitives)};var Bi=qe;import"@cesium/engine";function Rr(t){let i=document.createElement("div");return i.innerHTML=t,i.children.length===1?i.removeChild(i.firstChild):i}var Je=Rr;import{Cartesian2 as Fr,Cartesian3 as Xe,Matrix4 as Ui}from"@cesium/engine";var zr=new Xe,Br=new Fr,Ur=new Xe,Hr=new Xe;function Vr(t,i,o){let c=t.context,h=t.camera.positionWC,b=Xe.distance(i,h),x=c.drawingBufferWidth,S=c.drawingBufferHeight;return t.camera.frustum.getPixelDimensions(x,S,b,t.pixelRatio,o)}function jr(t,i,o,c,h){let b=1,x=1,S=1,O;return t.x>0&&(O=t.x*o.x,b=Math.min(O,i.x)/c.x),t.y>0&&(O=t.y*o.y,x=Math.min(O,i.y)/c.y),S=(b+x)/2,Xe.fromElements(b,x,S,h)}function re(t,i,o,c,h){let b=Ui.getTranslation(c,zr),x=Vr(o,b,Br),S=Ui.getScale(c,Ur),O=jr(t,i,x,S,Hr);return Ui.multiplyByScale(c,O,h)}import{defined as Qe,Cartesian3 as _i,Ray as Wr}from"@cesium/engine";var Qn=new _i,Yr=new Wr,Kn=new Bi;function Gr(t,i,o,c){c=Qe(c)?c:new _i;let h;if(t.pickPositionSupported){let x=o??Qe;Kn.hide(t,x);let S=t.pick(i,1,1);if(Kn.restore(t),x(S)&&(h=t.pickPosition(i,Qn),Qe(h)))return _i.clone(h,c)}if(!Qe(t.globe))return;let b=t.camera.getPickRay(i,Yr);if(h=t.globe.pick(b,t,Qn),Qe(h))return _i.clone(h,c)}var Ot=Gr;import{Cartesian2 as je,Cartesian3 as Se,Color as mt,ColorGeometryInstanceAttribute as Ke,createGuid as $r,defined as vi,destroyObject as Zr,Frozen as qr,GeometryInstance as Hi,Matrix4 as bt,Plane as ji,PlaneGeometry as yi,PlaneOutlineGeometry as to,WebGLConstants as eo,PlaneGeometryUpdater as Jr,PerInstanceColorAppearance as ti,Primitive as Vi}from"@cesium/engine";var Xr=mt.WHITE,Qr=mt.RED.withAlpha(.2),Kr=mt.CYAN.withAlpha(.2),ts=mt.WHITE.withAlpha(.2),es=new je(100,100),is=new je(1/0,1/0),ns=new je(50,50);function os(t,i,o){let c;return bt.equals(i,bt.IDENTITY)?c=bt.clone(bt.IDENTITY,t._modelMatrix):c=Jr.createPrimitiveMatrix(t._initialPlane,t._dimensions,i,t._modelMatrix),(t._pixelSize.x>0||t._pixelSize.y>0)&&(c=re(t._pixelSize,t._maximumSizeInMeters,o,c,c)),c}var rs=new ji(new Se(1,0,0),0);function ss(t){let i=ji.transform(t._initialPlane,t._localTransform,rs);t._clippingPlane.normal=i.normal,t._clippingPlane.distance=i.distance}function Ie(t){t=t??qr.EMPTY_OBJECT;let i=t.clippingPlane,o=t.transform,c=je.clone(t.size??ns),h=t.localTransform??bt.clone(bt.IDENTITY);this._worldTransform=bt.multiplyTransformation(o,h,new bt),this._worldNormalTransform=bt.inverseTranspose(this._worldTransform,new bt),this._normalWC=bt.multiplyByPointAsVector(this._worldNormalTransform,i.normal,new Se),this._normalWC=Se.normalize(this._normalWC,this._normalWC),this.show=t.show??!0,this._disableDepthFail=t.disableDepthFail??!1,this._outlineColor=t.outlineColor??Xr,this._frontColor=t.frontColor??Qr,this._backColor=t.backColor??Kr,this._highlightColor=t.highlightColor??ts,this._pixelSize=je.clone(t.pixelSize??es),this._maximumSizeInMeters=je.clone(t.maximumSizeInMeters??is),this._initialPlane=new ji(i.normal,i.distance),this._clippingPlane=i,this._backPrimitiveId={name:"back",plane:this},this._frontPrimitiveId={name:"front",plane:this},this._primitiveOutlineId=$r(),this._modelMatrix=bt.IDENTITY.clone(),this._originalDistance=i.distance,this._transform=o,this._initialLocalTransform=bt.clone(h),this._localTransform=h,this._centerPositionScratch=new Se,this._highlighted=!1,this._dimensions=c,this._backPrimitive=void 0,this._frontPrimitive=void 0,this._outlinePrimitive=void 0,this._update=!0}Object.defineProperties(Ie.prototype,{size:{get:function(){return this._dimensions}},clippingPlane:{get:function(){return this._clippingPlane}},transform:{get:function(){return this._transform}},localTransform:{get:function(){return this._localTransform}},centerPosition:{get:function(){let t=this._centerPositionScratch;return Se.clone(Se.ZERO,t),bt.multiplyByPoint(this._modelMatrix,t,t)}},frontColor:{get:function(){return this._highlighted?this._highlightColor:this._frontColor}},backColor:{get:function(){return this._highlighted?this._highlightColor:this._backColor}},pixelSize:{get:function(){return this._pixelSize}},maximumSizeInMeters:{get:function(){return this._maximumSizeInMeters}}});Ie.prototype.highlight=function(t){if(this._highlighted=t,vi(this._backPrimitive)){let i,o=this.backColor,c=this._backPrimitive.getGeometryInstanceAttributes(this._backPrimitiveId).color;c[0]=mt.floatToByte(o.red),c[1]=mt.floatToByte(o.green),c[2]=mt.floatToByte(o.blue),c[3]=mt.floatToByte(o.alpha),this._backPrimitive.getGeometryInstanceAttributes(this._backPrimitiveId).color=c,this._disableDepthFail||(i=this._backPrimitive.getGeometryInstanceAttributes(this._backPrimitiveId).depthFailColor,i[0]=mt.floatToByte(o.red),i[1]=mt.floatToByte(o.green),i[2]=mt.floatToByte(o.blue),i[3]=mt.floatToByte(o.alpha),this._backPrimitive.getGeometryInstanceAttributes(this._backPrimitiveId).depthFailColor=i),o=this.frontColor,c=this._frontPrimitive.getGeometryInstanceAttributes(this._frontPrimitiveId).color,c[0]=mt.floatToByte(o.red),c[1]=mt.floatToByte(o.green),c[2]=mt.floatToByte(o.blue),c[3]=mt.floatToByte(o.alpha),this._frontPrimitive.getGeometryInstanceAttributes(this._frontPrimitiveId).color=c,this._disableDepthFail||(i=this._frontPrimitive.getGeometryInstanceAttributes(this._frontPrimitiveId).depthFailColor,i[0]=mt.floatToByte(o.red),i[1]=mt.floatToByte(o.green),i[2]=mt.floatToByte(o.blue),i[3]=mt.floatToByte(o.alpha),this._frontPrimitive.getGeometryInstanceAttributes(this._frontPrimitiveId).depthFailColor=i)}};Ie.prototype.reset=function(){this._clippingPlane.normal=Se.clone(this._initialPlane.normal,this._clippingPlane.normal),this._clippingPlane.distance=this._initialPlane.distance,this._localTransform=bt.clone(this._initialLocalTransform,this._localTransform),this._update=!0};Ie.prototype.update=function(t){if(!this.show)return;let i=this._clippingPlane;this._worldTransform=bt.multiplyTransformation(this._transform,this._localTransform,this._worldTransform),this._worldNormalTransform=bt.inverseTranspose(this._worldTransform,this._worldNormalTransform),this._normalWC=bt.multiplyByPointAsVector(this._worldNormalTransform,i.normal,this._normalWC),Se.normalize(this._normalWC,this._normalWC);let o=os(this,this._worldTransform,t);if(ss(this),this._update){this._update=!1,this._frontPrimitive=this._frontPrimitive&&this._frontPrimitive.destroy(),this._backPrimitive=this._backPrimitive&&this._backPrimitive.destroy(),this._outlinePrimitive=this._outlinePrimitive&&this._outlinePrimitive.destroy();let c,h,b,x;this._disableDepthFail||(c=Ke.fromColor(this.backColor),h=new ti({flat:!0,closed:!1,translucent:!0,renderState:{cull:{enabled:!0}}}),b=Ke.fromColor(this.frontColor),x=new ti({flat:!0,closed:!1,translucent:!0,renderState:{cull:{enabled:!0,face:eo.FRONT}}})),this._backPrimitive=new Vi({geometryInstances:new Hi({geometry:yi.createGeometry(new yi),attributes:{color:Ke.fromColor(this.backColor),depthFailColor:c},id:this._backPrimitiveId}),appearance:new ti({flat:!0,closed:!1,translucent:!0,renderState:{cull:{enabled:!0}}}),depthFailAppearance:h,asynchronous:!1}),this._frontPrimitive=new Vi({geometryInstances:new Hi({geometry:yi.createGeometry(new yi),attributes:{color:Ke.fromColor(this.frontColor),depthFailColor:b},id:this._frontPrimitiveId}),appearance:new ti({flat:!0,closed:!1,translucent:!0,renderState:{cull:{enabled:!0,face:eo.FRONT}}}),depthFailAppearance:x,asynchronous:!1}),this._outlinePrimitive=new Vi({geometryInstances:new Hi({geometry:to.createGeometry(new to),attributes:{color:Ke.fromColor(this._outlineColor)},id:this._primitiveOutlineId}),appearance:new ti({flat:!0,translucent:!1,renderState:{lineWidth:1}}),asynchronous:!1})}this._backPrimitive.modelMatrix=o,this._frontPrimitive.modelMatrix=o,this._outlinePrimitive.modelMatrix=o,this._backPrimitive.update(t),this._frontPrimitive.update(t),this._outlinePrimitive.update(t)};Ie.prototype.isDestroyed=function(){return!1};Ie.prototype.destroy=function(){return vi(this._backPrimitive)&&this._backPrimitive.destroy(),vi(this._frontPrimitive)&&this._frontPrimitive.destroy(),vi(this._outlinePrimitive)&&this._outlinePrimitive.destroy(),Zr(this)};var ei=Ie;import{Cartesian2 as io,Cartesian3 as rt,defined as Ft,destroyObject as as,Frozen as ls,IntersectionTests as no,Matrix4 as zt,Plane as pe,Ray as cs,ScreenSpaceEventHandler as us,ScreenSpaceEventType as We,Cesium3DTileset as hs,GlobeSurfaceTileProvider as ao,Model as fs,PrimitiveCollection as ps,SceneMode as Wi}from"@cesium/engine";var lo=new pe(rt.UNIT_X,0),ds=new rt,ms=new rt,gs=new rt,_s=new zt,ys=new zt,oo=new rt,ro=new rt,vs=new rt,ws=new rt,bs=new rt,so=new cs;function Ss(t,i,o,c){let h=pe.clone(o,lo);return h.distance=0,h=pe.transform(h,t,h),rt.subtract(i,rt.multiplyByScalar(h.normal,pe.getPointDistance(h,i),ds),c)}function Ps(t,i,o){let c=pe.clone(o,lo);c.distance=0,c=pe.transform(c,t,c),o.distance=-pe.getPointDistance(c,i)}function It(t){let i=t.scene,o=t.clippingPlanes,c=i.primitives.add(new ps),h=this;this._removeAddEventListener=o.planeAdded.addEventListener(function(){h._addPlane()},this),this._removeRemoveEventListener=o.planeRemoved.addEventListener(It.prototype._removePlane,this),this._planeSizeInMeters=t.planeSizeInMeters,this._scene=i,this._sseh=new us(i.canvas),this._clippingPlanes=o,this._primitives=c,this._origin=t.origin,this._movePlanesToOrigin=t.movePlanesToOrigin??!0,this._primitiveOptions=t.primitiveOptions??ls.EMPTY_OBJECT,this._active=!1,this._pickedPlane=void 0,this._hoverPlane=void 0,this._draggingPlane=new pe(rt.UNIT_X,0),this._pixelSize=t.pixelSize,this._maximumSizeInMeters=t.maximumSizeInMeters,this._target=void 0,this._transform=zt.clone(zt.IDENTITY),this._createPlanes()}Object.defineProperties(It.prototype,{active:{get:function(){return this._active}},scene:{get:function(){return this._scene}},clippingPlanes:{get:function(){return this._clippingPlanes}}});It.prototype.activate=function(){this._active=!0;let t=this._primitives;for(let o=0;o<t.length;o++)t.get(o).show=!0;let i=this._sseh;i.setInputAction(this._handleLeftDown.bind(this),We.LEFT_DOWN),i.setInputAction(this._handleLeftUp.bind(this),We.LEFT_UP),i.setInputAction(this._handleMouseMove.bind(this),We.MOUSE_MOVE)};It.prototype.deactivate=function(){let t=this._primitives;for(let o=0;o<t.length;o++)t.get(o).show=!1;let i=this._sseh;i.removeInputAction(We.LEFT_DOWN),i.removeInputAction(We.LEFT_UP),i.removeInputAction(We.MOUSE_MOVE),this._active=!1};It.prototype._createPlanes=function(){let t=this._clippingPlanes,i=t.owner;if(typeof i>"u"){let c=this._scene.preRender.addEventListener(()=>{c(),this.isDestroyed()||this._createPlanes()});return}this._target=i;let o=this._origin;if(i instanceof hs){this._transform=i.clippingPlanesOriginMatrix,Ft(o)||(this._origin=rt.clone(i.boundingSphere.center));for(let c=0;c<t.length;c++)this._addPlane(t.get(c))}else if(i instanceof fs){let c=()=>{this._transform=i.modelMatrix,Ft(o)||(this._origin=rt.clone(i.boundingSphere.center));for(let b=0;b<t.length;b++)this._addPlane(t.get(b))};if(i.ready){c();return}let h=i.readyEvent.addEventListener(()=>{h(),!this.isDestroyed()&&c()})}else if(i instanceof ao){this._transform=t.modelMatrix,Ft(o)||(this._origin=zt.getTranslation(t.modelMatrix,new rt));for(let c=0;c<t.length;c++)this._addPlane(t.get(c));return}};It.prototype._addPlane=function(t){let i=this,o=this._movePlanesToOrigin,c=this._primitives,h,b=this._planeSizeInMeters,x=this._pixelSize,S=this._maximumSizeInMeters,O=this._primitiveOptions,D=i._target,L=i._origin,F=i._transform,B=zt.inverse(F,_s);zt.equals(F,zt.IDENTITY)?(h=L,o&&(t.distance=0)):(h=Ss(F,L,t,ms),o&&Ps(F,L,t)),Ft(b)||(b=i._computePlaneSize(D));let U=zt.multiplyByPoint(B,h,bs),e=zt.fromTranslation(U);c.add(new ei({transform:F,localTransform:e,clippingPlane:t,show:i._active,size:b,disableDepthFail:O.disableDepthFail,outlineColor:O.outlineColor,frontColor:O.frontColor,backColor:O.backColor,highlightColor:O.highlightColor,pixelSize:x,maximumSizeInMeters:S}))};It.prototype._computePlaneSize=function(t){if(t instanceof ao)return new io(200,200);let i=t.boundingSphere.radius*.5;return new io(i,i)};It.prototype._removePlane=function(t){let i=this._primitives;for(let o=0;o<i.length;o++){let c=i.get(o);if(c.clippingPlane===t){i.remove(c);break}}};It.prototype._handleLeftDown=function(t){let i=this._scene;if(i.mode!==Wi.SCENE3D)return;let o=i.pick(t.position);if(Ft(o)&&Ft(o.id)&&o.id.plane instanceof ei){let c=o.id.plane;c.highlight(!0);let h=c._normalWC,b=rt.cross(h,i.camera.directionWC,gs);b=rt.cross(h,b,b),b=rt.normalize(b,b),this._draggingPlane=pe.fromPointNormal(c.centerPosition,b,this._draggingPlane),i.screenSpaceCameraController.enableInputs=!1,this._pickedPlane=c,i.requestRenderMode&&i.requestRender()}};It.prototype._handleLeftUp=function(){let t=this._scene;if(t.mode!==Wi.SCENE3D)return;let i=this._pickedPlane;Ft(i)&&(i.highlight(!1),this._pickedPlane=void 0,t.requestRenderMode&&t.requestRender()),t.screenSpaceCameraController.enableInputs=!0};It.prototype._handleMouseMove=function(t){let i=this._scene;if(i.mode!==Wi.SCENE3D)return;let o=this._pickedPlane;if(Ft(o)){let c=this._draggingPlane,h=i.camera.getPickRay(t.startPosition,so),b=no.rayPlane(h,c,oo);if(!Ft(b))return;h=i.camera.getPickRay(t.endPosition,so);let x=no.rayPlane(h,c,ro);if(!Ft(x))return;let S=rt.subtract(b,o.centerPosition,oo);S=rt.projectVector(S,o._normalWC,S);let O=rt.subtract(x,o.centerPosition,ro);O=rt.projectVector(O,o._normalWC,O);let D=rt.subtract(O,S,vs),L=zt.inverse(o.transform,ys),F=zt.multiplyByPointAsVector(L,D,ws);zt.multiplyByTranslation(o.localTransform,F,o.localTransform),i.requestRenderMode&&i.requestRender()}else{Ft(this._hoverPlane)&&this._hoverPlane.highlight(!1);let c=i.pick(t.endPosition);if(Ft(c)&&Ft(c.id)&&c.id.plane instanceof ei){let h=c.id.plane;h.highlight(!0),this._hoverPlane=h}}};It.prototype.reset=function(){let t=this._primitives;for(let i=0;i<t.length;i++)t.get(i).reset()};It.prototype.isDestroyed=function(){return!1};It.prototype.destroy=function(){return this.deactivate(),this._sseh.destroy(),this._scene.primitives.remove(this._primitives),this._removeAddEventListener(),this._removeRemoveEventListener(),as(this)};var Cs=It;var xs={BeforeDraw:0,Drawing:1,AfterDraw:2},K=Object.freeze(xs);import{Cartesian2 as wi,Cartesian3 as pt,Cartographic as $s,defined as bi,IntersectionTests as mo,Frozen as go,Plane as Si,Ray as Zs,Material as qs,SceneMode as _o}from"@cesium/engine";import{defined as qi,destroyObject as Vs,Cartesian2 as ii,Cartesian3 as ni,Frozen as js,PointPrimitiveCollection as Ws}from"@cesium/engine";import{ArcType as co,BoundingSphere as uo,ClassificationType as Es,Color as De,ColorGeometryInstanceAttribute as Yi,Ellipsoid as Ts,Frozen as Ms,GeometryInstance as ho,GroundPolylineGeometry as Os,GroundPolylinePrimitive as Is,Material as Ds,PolylineColorAppearance as As,PolylineGeometry as ks,PolylineMaterialAppearance as $i,Primitive as Ns,createGuid as Ls,defined as se,destroyObject as Rs}from"@cesium/engine";function Gi(t,i,o){return se(t)?(o=se(o)?o:{},o.color=i,new $i({material:Ds.fromType(t,o)})):new As}function Ae(t){t=t??Ms.EMPTY_OBJECT,this.show=t.show??!0,this._id=se(t.id)?t.id:Ls(),this._ellipsoid=t.ellipsoid??Ts.WGS84,this._width=t.width??3,this._color=De.clone(t.color??De.WHITE),this._depthFailColor=De.clone(t.depthFailColor??this._color),this._positions=t.positions??[],this._materialType=t.materialType,this._depthFailMaterialType=t.depthFailMaterialType??this._materialType,this._uniforms=t.uniforms??void 0,this._depthFailUniforms=t.depthFailUniforms??this._uniforms,this._loop=t.loop??!1,this._clampToGround=t.clampToGround??!1,this._classificationType=t.classificationType??Es.BOTH,this._allowPicking=t.allowPicking??!0,this._boundingSphere=new uo,this._primitive=void 0,this._update=!0}Object.defineProperties(Ae.prototype,{positions:{get:function(){return this._positions},set:function(t){this._positions=t,this._update=!0}},color:{get:function(){return this._color},set:function(t){if(!De.equals(this._color,t)&&(this._color=De.clone(t,this._color),se(this._primitive))){let i=this._primitive.getGeometryInstanceAttributes(this._id).color;i=t.toBytes(i),this._primitive.getGeometryInstanceAttributes(this._id).color=i}}},depthFailColor:{get:function(){return this._depthFailColor},set:function(t){if(!De.equals(this._depthFailColor,t)&&(this._depthFailColor=De.clone(t,this._depthFailColor),se(this._primitive)&&!this._clampToGround)){let i=this._primitive.getGeometryInstanceAttributes(this._id).depthFailColor;i=t.toBytes(i),this._primitive.getGeometryInstanceAttributes(this._id).depthFailColor=i}}},materialType:{get:function(){return this._materialType},set:function(t){t!==this._materialType&&(this._materialType=t,this._update=!0)}},depthFailMaterialType:{get:function(){return this._depthFailMaterialType},set:function(t){t!==this._depthFailMaterialType&&(this._depthFailMaterialType=t,this._update=!0)}},uniforms:{get:function(){return this._uniforms},set:function(t){if(t===this._uniforms||(this._uniforms=t,!se(t)||!se(this._primitive)))return;let i=this._primitive.appearance.material.uniforms;for(let o in t)t.hasOwnProperty(o)&&(i[o]=t[o])}},depthFailUniforms:{get:function(){return this._depthFailUniforms},set:function(t){if(t===this._depthFailUniforms||(this._depthFailUniforms=t,!se(t)||!se(this._primitive)))return;let i=this._primitive.depthFailAppearance.material.uniforms;for(let o in t)t.hasOwnProperty(o)&&(i[o]=t[o])}},id:{get:function(){return this._id}},boundingVolume:{get:function(){return this._boundingSphere}},width:{get:function(){return this._width}},ellipsoid:{get:function(){return this._ellipsoid}},loop:{get:function(){return this._loop}},clampToGround:{get:function(){return this._clampToGround}},classificationType:{get:function(){return this._classificationType},set:function(t){this._classificationType=t,this._update=!0}},allowPicking:{get:function(){return this._allowPicking}}});Ae.prototype.update=function(t){if(!this.show)return;let i=this._positions;if(!se(i)||i.length<2){this._primitive=this._primitive&&this._primitive.destroy();return}this._update&&(this._update=!1,this._primitive=this._primitive&&this._primitive.destroy(),this._primitive=this._clampToGround?this._createGroundPolyline():this._createPolyline(),this._boundingSphere=uo.fromPoints(i,this._boundingSphere)),this._primitive.update(t)};Ae.prototype._createPolyline=function(){let t=this._positions;return this._loop&&t.length>2&&(t=t.slice(),t.push(t[0])),new Ns({geometryInstances:new ho({geometry:new ks({positions:t,width:this._width,vertexFormat:$i.VERTEX_FORMAT,ellipsoid:this._ellipsoid,arcType:co.NONE}),attributes:{color:Yi.fromColor(this._color),depthFailColor:Yi.fromColor(this._depthFailColor)},id:this._id}),appearance:Gi(this._materialType,this._color,this._uniforms),depthFailAppearance:Gi(this._depthFailMaterialType,this._depthFailColor,this._depthFailUniforms),asynchronous:!1,allowPicking:this._allowPicking})};Ae.prototype._createGroundPolyline=function(){let t=this._positions;this._loop&&t.length>2&&(t=t.slice(),t.push(t[0]));let i=new Os({positions:t,width:this._width,vertexFormat:$i.VERTEX_FORMAT,ellipsoid:this._ellipsoid,arcType:co.GEODESIC});return new Is({geometryInstances:new ho({geometry:i,attributes:{color:Yi.fromColor(this._color)},id:this._id}),appearance:Gi(this._materialType,this._color,this._uniforms),asynchronous:!1,allowPicking:this._allowPicking,classificationType:this._classificationType})};Ae.prototype.isDestroyed=function(){return!1};Ae.prototype.destroy=function(){return this._primitive=this._primitive&&this._primitive.destroy(),Rs(this)};var Tt=Ae;import{Cesium3DTileFeature as Fs,Cesium3DTileset as zs,Model as Bs,ModelFeature as Us,defined as Zi}from"@cesium/engine";function fo(t){return Zi(t)&&(t instanceof zs||t instanceof Bs)}function Hs(t){return fo(t)||Zi(t)&&(t instanceof Fs||t instanceof Us)?!0:Zi(t)&&fo(t.primitive)}var ct=Hs;var Ys=new ii,po=new ni,Gs=10;function ae(t){t=t??js.EMPTY_OBJECT;let i=t.scene,o=t.primitives??i.primitives,c=t.points,h=!1;qi(c)||(c=o.add(new Ws),h=!0),this._scene=i,this._pointCollection=c,this._removePoints=h,this._polyline=o.add(new Tt(t.polylineOptions)),this._primitives=o,this._pointOptions=t.pointOptions,this._positions=[],this._points=[],this._tempNextPos=new ni,this._mode=K.BeforeDraw,this._lastClickPosition=new ii(Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY)}ae.prototype.addPoint=function(t){let i=this._positions;i.push(t),this._polyline.positions=i;let o=this._pointCollection.add(this._pointOptions);o.position=t,o.show=!0,this._points.push(o)};ae.prototype.handleDoubleClick=function(){this._mode=K.AfterDraw,this._polyline.positions=this._positions};ae.prototype.handleClick=function(t){if(this._mode===K.AfterDraw)return;let i=this._lastClickPosition;if(ii.magnitude(ii.subtract(i,t,Ys))<Gs)return;let c=ae._getWorldPosition(this._scene,t,ct,po);if(qi(c))return this.addPoint(ni.clone(c,new ni)),this._mode=K.Drawing,ii.clone(t,i),c};ae.prototype.handleMouseMove=function(t){if(this._mode!==K.Drawing)return;let i=this._scene,o=ae._getWorldPosition(i,t,ct,po);if(!qi(o))return;let c=this._positions.slice();return c.push(ni.clone(o,this._tempNextPos)),this._polyline.positions=c,o};ae.prototype.isDestroyed=function(){return!1};ae.prototype.destroy=function(){if(this._removePoints)this._primitives.remove(this._points);else{let t=this._points,i=this._pointCollection;for(let o=0;o<t.length;o++)i.remove(t[o])}return this._primitives.remove(this._polyline),Vs(this)};ae._getWorldPosition=Ot;var Lt=ae;var Js=new wi,Ji=new pt,Xs=new pt,Qs=new pt,Ks=new Zs,ta=new pt,ea=new pt,oi=new $s,ia=10;function Kt(t){t=t??go.EMPTY_OBJECT,Lt.call(this,t);let i=t.polylineOptions??go.EMPTY_OBJECT,o={color:i.color,ellipsoid:i.ellipsoid,width:2,materialType:qs.PolylineDashType,allowPicking:!1},c=this._primitives.add(new Tt(o));c.positions=[new pt,new pt],c.show=!1,this._dashLineOptions=o,this._dashedLines=[],this._moveDashLine=c,this._heightPlane=new Si(pt.UNIT_X,0),this._heightPlaneCV=new Si(pt.UNIT_X,0),this._firstMove=!1,this._height=0}Kt.prototype=Object.create(Lt.prototype);Kt.prototype.constructor=Kt;Kt.prototype._setDashLinePositions=function(t,i){let o=this._scene.globe,c=this._scene.frameState.mapProjection.ellipsoid,h=t.positions;h[0]=pt.clone(i,h[0]);let b=c.cartesianToCartographic(i,oi);bi(o)?b.height=o.getHeight(b)??0:b.height=0,h[1]=c.cartographicToCartesian(b,h[1]),t.positions=h};Kt.prototype.addPoint=function(t){Lt.prototype.addPoint.call(this,t);let i=this._primitives.add(new Tt(this._dashLineOptions));i.positions=[new pt,new pt],this._dashedLines.push(i),this._setDashLinePositions(i,t)};Kt.prototype.handleDoubleClick=function(){this._mode=K.AfterDraw,this._polyline.positions=this._positions,this._moveDashLine.show=!1};Kt.prototype.handleClick=function(t){let i;if(this._positions.length===0){let o=this._scene,c=o.frameState.mapProjection.ellipsoid;if(i=Lt.prototype.handleClick.call(this,t),!bi(i))return;this._heightPlane=Si.fromPointNormal(i,c.geodeticSurfaceNormal(i,Qs),this._heightPlane);let h=c.cartesianToCartographic(i,oi),b=o.mapProjection.project(h,Xs),x=pt.fromElements(b.z,b.x,b.y,b);this._heightPlaneCV=Si.fromPointNormal(x,pt.UNIT_X,this._heightPlaneCV),this._height=c.cartesianToCartographic(i,oi).height,this._firstMove=!0}else{let o=this._lastClickPosition;if(wi.magnitude(wi.subtract(o,t,Js))<ia)return;wi.clone(t,o),i=pt.clone(this._tempNextPos),this.addPoint(i),this._firstMove=!0}return i};Kt.prototype.handleMouseMove=function(t,i){if(this._mode!==K.Drawing)return;let o=this._scene,c=o.frameState.mapProjection.ellipsoid,h=this._positions,b,x=o.camera.getPickRay(t,Ks);if(o.mode===_o.SCENE3D)b=mo.rayPlane(x,this._heightPlane,Ji);else if(o.mode===_o.COLUMBUS_VIEW){b=mo.rayPlane(x,this._heightPlaneCV,Ji),b=pt.fromElements(b.y,b.z,b.x,b);let S=o.mapProjection.unproject(b,oi);b=c.cartographicToCartesian(S,b)}else if(b=o.camera.pickEllipsoid(t,c,Ji),bi(b)){let S=c.cartesianToCartographic(b,oi);S.height=this._height,b=c.cartographicToCartesian(S,b)}if(bi(b)){if(!this._firstMove&&i){let S=h[h.length-1],O=this._tempNextPos,D=pt.subtract(O,S,ta),L=pt.subtract(b,S,ea);L=pt.projectVector(L,D,L),b=pt.add(S,L,b)}return h=h.slice(),h.push(pt.clone(b,this._tempNextPos)),this._polyline.positions=h,this._firstMove=!1,this._moveDashLine.show=!0,this._setDashLinePositions(this._moveDashLine,b),b}};Kt.prototype.isDestroyed=function(){return!1};Kt.prototype.destroy=function(){let t=this._primitives,i=this._dashedLines;for(let o=0;o<i.length;o++)t.remove(i[o]);t.remove(this._moveDashLine),Lt.prototype.destroy.call(this)};var Pe=Kt;import{combine as fa,defined as nn,destroyObject as pa,Cartesian2 as ri,Cartesian3 as si,Frozen as da,PointPrimitiveCollection as ma}from"@cesium/engine";import{BoundingSphere as yo,Cartesian3 as vo,ClassificationType as na,Color as ke,ColorGeometryInstanceAttribute as Xi,CoplanarPolygonGeometry as oa,Ellipsoid as ra,Frozen as sa,GeometryInstance as wo,GroundPrimitive as aa,PerInstanceColorAppearance as tn,PolygonGeometry as la,Primitive as ca,createGuid as ua,defined as Qi,destroyObject as ha}from"@cesium/engine";function Ki(t){return new tn({flat:!0,closed:!1,translucent:t.alpha<1})}function Ne(t){t=t??sa.EMPTY_OBJECT,this.show=t.show??!0,this._id=Qi(t.id)?t.id:ua(),this._ellipsoid=t.ellipsoid??ra.WGS84,this._color=ke.clone(t.color??ke.WHITE),this._depthFailColor=ke.clone(t.depthFailColor??this._color),this._positions=t.positions??[],this._clampToGround=t.clampToGround??!1,this._classificationType=t.classificationType??na.BOTH,this._allowPicking=t.allowPicking??!0,this._boundingSphere=new yo,this._primitive=void 0,this._update=!0}Object.defineProperties(Ne.prototype,{positions:{get:function(){return this._positions},set:function(t){this._positions=t,this._update=!0}},color:{get:function(){return this._color},set:function(t){if(!ke.equals(this._color,t)&&(this._color=ke.clone(t,this._color),Qi(this._primitive))){let i=this._primitive.getGeometryInstanceAttributes(this._id).color;i=t.toBytes(i),this._primitive.getGeometryInstanceAttributes(this._id).color=i}}},depthFailColor:{get:function(){return this._depthFailColor},set:function(t){if(!ke.equals(this._depthFailColor,t)&&(this._depthFailColor=ke.clone(t,this._depthFailColor),Qi(this._primitive)&&!this._clampToGround)){let i=this._primitive.getGeometryInstanceAttributes(this._id).depthFailColor;i=t.toBytes(i),this._primitive.getGeometryInstanceAttributes(this._id).depthFailColor=i}}},id:{get:function(){return this._id}},boundingVolume:{get:function(){return this._boundingSphere}},ellipsoid:{get:function(){return this._ellipsoid}},clampToGround:{get:function(){return this._clampToGround}},classificationType:{get:function(){return this._classificationType},set:function(t){this._classificationType=t,this._update=!0}},allowPicking:{get:function(){return this._allowPicking}}});Ne.prototype.update=function(t){if(!this.show)return;let i=this._positions;if(i.length<3){this._primitive=this._primitive&&this._primitive.destroy();return}this._update&&(this._update=!1,this._primitive=this._primitive&&this._primitive.destroy(),this._primitive=this._clampToGround?this._createGroundPolygon():this._createPolygon(),this._boundingSphere=yo.fromPoints(i,this._boundingSphere)),this._primitive.update(t)};Ne.prototype._createPolygon=function(){return new ca({geometryInstances:new wo({geometry:oa.fromPositions({positions:this._positions.map(function(t){return vo.clone(t)}),vertexFormat:tn.FLAT_VERTEX_FORMAT,ellipsoid:this._ellipsoid}),attributes:{color:Xi.fromColor(this._color),depthFailColor:Xi.fromColor(this._depthFailColor)},id:this._id}),appearance:Ki(this._color),depthFailAppearance:Ki(this._color),allowPicking:this._allowPicking,asynchronous:!1})};Ne.prototype._createGroundPolygon=function(){return new aa({geometryInstances:new wo({geometry:la.fromPositions({positions:this._positions.map(function(t){return vo.clone(t)}),vertexFormat:tn.FLAT_VERTEX_FORMAT,ellipsoid:this._ellipsoid}),attributes:{color:Xi.fromColor(this._color)},id:this._id}),appearance:Ki(this._color),allowPicking:this._allowPicking,asynchronous:!1,classificationType:this._classificationType})};Ne.prototype.isDestroyed=function(){return!1};Ne.prototype.destroy=function(){return this._primitive=this._primitive&&this._primitive.destroy(),ha(this)};var en=Ne;var ga=new ri,bo=new si,_a=10;function le(t){t=t??da.EMPTY_OBJECT;let i=t.scene,o=t.primitives??i.primitives,c=!1,h=t.points;nn(h)||(h=o.add(new ma),c=!0),this._polygon=o.add(new en(t.polygonOptions)),this._polyline=o.add(new Tt(fa({loop:!0},t.polylineOptions))),this._pointOptions=t.pointOptions,this._pointCollection=h,this._removePoints=c,this._scene=i,this._primitives=o,this._positions=[],this._points=[],this._tempNextPos=new si,this._mode=K.BeforeDraw,this._lastClickPosition=new ri(Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY)}le.prototype.addPoint=function(t){let i=this._positions;i.push(t),this._polyline.positions=i,this._polygon.positions=i;let o=this._pointCollection.add(this._pointOptions);o.position=t,o.show=!0,this._points.push(o)};le.prototype.handleDoubleClick=function(){this._mode=K.AfterDraw;let t=this._positions;this._polyline.positions=t,this._polygon.positions=t};le.prototype.handleClick=function(t){if(this._mode===K.AfterDraw)return;let i=this._lastClickPosition;if(ri.magnitude(ri.subtract(i,t,ga))<_a)return;let c=le._getWorldPosition(this._scene,t,ct,bo);if(nn(c))return this.addPoint(si.clone(c,new si)),this._mode=K.Drawing,ri.clone(t,i),c};le.prototype.handleMouseMove=function(t){if(this._mode!==K.Drawing)return;let i=this._scene,o=le._getWorldPosition(i,t,ct,bo);if(!nn(o))return;let c=this._positions.slice();return c.push(si.clone(o,this._tempNextPos)),this._polyline.positions=c,this._polygon.positions=c,o};le.prototype.isDestroyed=function(){return!1};le.prototype.destroy=function(){let t=this._primitives;if(this._removePoints)t.remove(this._points);else{let i=this._points,o=this._pointCollection;for(let c=0;c<i.length;c++)o.remove(i[c])}return t.remove(this._polygon),t.remove(this._polyline),pa(this)};le._getWorldPosition=Ot;var Ce=le;var ya={DEGREES:"DEGREES",RADIANS:"RADIANS",DEGREES_MINUTES_SECONDS:"DEGREES_MINUTES_SECONDS",GRADE:"GRADE",RATIO:"RATIO"},et=Object.freeze(ya);import{destroyObject as Wa,Frozen as Ya}from"@cesium/engine";import{DeveloperError as on,Frozen as va}from"@cesium/engine";function te(t){t=t??va.EMPTY_OBJECT,this._labelCollection=t.labels,this._pointCollection=t.points,this._primitives=t.primitives,this._selectedUnits=t.units,this._selectedLocale=t.locale,this._scene=t.scene}Object.defineProperties(te.prototype,{icon:{value:""},thumbnail:{value:""},type:{value:""},instructions:{value:[]},id:{value:""},selectedUnits:{get:function(){return this._selectedUnits},set:function(t){this._selectedUnits=t,this._refreshLabels()}}});te.prototype._refreshLabels=on.throwInstantiationError;te.prototype.handleDoubleClick=function(){};te.prototype.handleClick=function(t){};te.prototype.handleMouseMove=function(t){};te.prototype.handleLeftDown=function(t){};te.prototype.handleLeftUp=function(t){};te.prototype.reset=on.throwInstantiationError;te.prototype.isDestroyed=function(){return!1};te.prototype.destroy=on.throwInstantiationError;var ut=te;import{defined as ai,Cartesian2 as Oo,Cartesian3 as jt,CoplanarPolygonGeometry as To,Frozen as Na,VertexFormat as La,SceneTransforms as Mo}from"@cesium/engine";import{defined as wa,Cartesian2 as rn,Cartesian3 as So,Color as sn,Frozen as an,HorizontalOrigin as ba,VerticalOrigin as Sa}from"@cesium/engine";var Pa=new rn(0,-9),yt={};yt.color=sn.YELLOW;yt.labelFont="16px Lucida Console";yt.textColor=sn.WHITE;yt.backgroundColor=new sn(.165,.165,.165,.8);yt.backgroundPadding=new rn(7,5);yt.getPolylineOptions=function(t){return t=t??an.EMPTY_OBJECT,{show:t.show,ellipsoid:t.ellipsoid,width:t.width??3,color:t.color??yt.color,depthFailColor:t.depthFailColor??t.color??yt.color,id:t.id,positions:t.positions,materialType:t.materialType,depthFailMaterialType:t.depthFailMaterialType,loop:t.loop,clampToGround:t.clampToGround,classificationType:t.classificationType,allowPicking:t.allowPicking??!1}};yt.getPolygonOptions=function(t){return t=t??an.EMPTY_OBJECT,{show:t.show,ellipsoid:t.ellipsoid,color:t.color??yt.color,depthFailColor:t.depthFailColor??t.color??yt.color,id:t.id,positions:t.positions,clampToGround:t.clampToGround,classificationType:t.classificationType,allowPicking:t.allowPicking??!1}};yt.getPointOptions=function(){return{pixelSize:10,color:yt.color,position:new So,disableDepthTestDistance:Number.POSITIVE_INFINITY,show:!1}};yt.getLabelOptions=function(t){return t=t??an.EMPTY_OBJECT,{show:!1,font:yt.labelFont,scale:t.scale??1,fillColor:t.fillColor??yt.textColor,showBackground:!0,backgroundColor:t.backgroundColor??yt.backgroundColor,backgroundPadding:t.backgroundPadding??yt.backgroundPadding,horizontalOrigin:t.horizontalOrigin??ba.CENTER,verticalOrigin:t.verticalOrigin??Sa.BOTTOM,pixelOffset:wa(t.pixelOffset)?t.pixelOffset:rn.clone(Pa),disableDepthTestDistance:Number.POSITIVE_INFINITY,position:new So}};var W=yt;import{defined as Ta,Frozen as Ma,Math as xe,RuntimeError as Oa}from"@cesium/engine";var Ca={METERS:"METERS",CENTIMETERS:"CENTIMETERS",KILOMETERS:"KILOMETERS",FEET:"FEET",US_SURVEY_FEET:"US_SURVEY_FEET",INCHES:"INCHES",YARDS:"YARDS",MILES:"MILES"},gt=Object.freeze(Ca);var xa={SQUARE_METERS:"SQUARE_METERS",SQUARE_CENTIMETERS:"SQUARE_CENTIMETERS",SQUARE_KILOMETERS:"SQUARE_KILOMETERS",SQUARE_FEET:"SQUARE_FEET",SQUARE_INCHES:"SQUARE_INCHES",SQUARE_YARDS:"SQUARE_YARDS",SQUARE_MILES:"SQUARE_MILES",ACRES:"ACRES",HECTARES:"HECTARES"},ht=Object.freeze(xa);var Ea={CUBIC_METERS:"CUBIC_METERS",CUBIC_CENTIMETERS:"CUBIC_CENTIMETERS",CUBIC_KILOMETERS:"CUBIC_KILOMETERS",CUBIC_FEET:"CUBIC_FEET",CUBIC_INCHES:"CUBIC_INCHES",CUBIC_YARDS:"CUBIC_YARDS",CUBIC_MILES:"CUBIC_MILES"},St=Object.freeze(Ea);function $(t){t=t??Ma.EMPTY_OBJECT,this.distanceUnits=t.distanceUnits??gt.METERS,this.areaUnits=t.areaUnits??ht.SQUARE_METERS,this.volumeUnits=t.volumeUnits??St.CUBIC_METERS,this.angleUnits=t.angleUnits??et.DEGREES,this.slopeUnits=t.slopeUnits??et.DEGREES}$.convertDistance=function(t,i,o){if(i===o)return t;let c=Po(i),h=1/Po(o);return t*c*h};$.convertArea=function(t,i,o){if(i===o)return t;let c=Co(i),h=1/Co(o);return t*c*h};$.convertVolume=function(t,i,o){if(i===o)return t;let c=xo(i),h=1/xo(o);return t*c*h};$.convertAngle=function(t,i,o){if(i===o)return t;let c=ka(t,i);return ln(c,o)};$.numberToString=function(t,i,o){return Le(t,i,o)};$.distanceToString=function(t,i,o,c){let h=$.convertDistance(t,gt.METERS,i);return Le(h,o,c)+$.getDistanceUnitSpacing(i)+$.getDistanceUnitSymbol(i)};$.areaToString=function(t,i,o,c){let h=$.convertArea(t,ht.SQUARE_METERS,i);return Le(h,o,c)+$.getAreaUnitSpacing(i)+$.getAreaUnitSymbol(i)};$.volumeToString=function(t,i,o,c){let h=$.convertVolume(t,St.CUBIC_METERS,i);return Le(h,o,c)+$.getVolumeUnitSpacing(i)+$.getVolumeUnitSymbol(i)};$.angleToString=function(t,i,o,c){if(i===et.DEGREES||i===et.RADIANS||i===et.GRADE){let h=ln(t,i);return Le(h,o,c)+$.getAngleUnitSpacing(i)+$.getAngleUnitSymbol(i)}else if(i===et.DEGREES_MINUTES_SECONDS){let h=xe.toDegrees(t),b=h<0?"-":"";h=Math.abs(h);let x=Math.floor(h),S=(h-x)*60,O=Math.floor(S),D=(S-O)*60;return D=Le(D,void 0,c),`${b+x}\xB0 ${O}' ${D}"`}else if(i===et.RATIO){let b=1/ln(t,i),x=Eo(c);return x.minimumFractionDigits=0,`1:${Le(b,o,x)}`}};$.longitudeToString=function(t,i,o,c){return`${$.angleToString(Math.abs(t),i,o,c)} ${t<0?"W":"E"}`};$.latitudeToString=function(t,i,o,c){return`${$.angleToString(Math.abs(t),i,o,c)} ${t<0?"S":"N"}`};$.getDistanceUnitSymbol=function(t){if(t===gt.METERS)return"m";if(t===gt.CENTIMETERS)return"cm";if(t===gt.KILOMETERS)return"km";if(t===gt.FEET||t===gt.US_SURVEY_FEET)return"ft";if(t===gt.INCHES)return"in";if(t===gt.YARDS)return"yd";if(t===gt.MILES)return"mi"};$.getDistanceUnitSpacing=function(t){return" "};$.getAreaUnitSymbol=function(t){if(t===ht.SQUARE_METERS)return"m\xB2";if(t===ht.SQUARE_CENTIMETERS)return"cm\xB2";if(t===ht.SQUARE_KILOMETERS)return"km\xB2";if(t===ht.SQUARE_FEET)return"sq ft";if(t===ht.SQUARE_INCHES)return"sq in";if(t===ht.SQUARE_YARDS)return"sq yd";if(t===ht.SQUARE_MILES)return"sq mi";if(t===ht.ACRES)return"ac";if(t===ht.HECTARES)return"ha"};$.getAreaUnitSpacing=function(t){return" "};$.getVolumeUnitSymbol=function(t){if(t===St.CUBIC_METERS)return"m\xB3";if(t===St.CUBIC_CENTIMETERS)return"cm\xB3";if(t===St.CUBIC_KILOMETERS)return"km\xB3";if(t===St.CUBIC_FEET)return"cu ft";if(t===St.CUBIC_INCHES)return"cu in";if(t===St.CUBIC_YARDS)return"cu yd";if(t===St.CUBIC_MILES)return"cu mi"};$.getVolumeUnitSpacing=function(t){return" "};$.getAngleUnitSymbol=function(t){if(t===et.DEGREES)return"\xB0";if(t===et.RADIANS)return"rad";if(t===et.GRADE)return"%"};$.getAngleUnitSpacing=function(t){return t===et.RADIANS?" ":""};function Eo(t,i,o){t=t??2;let c={};return typeof t=="number"?c.maximumFractionDigits=c.minimumFractionDigits=t:typeof t=="function"?c=t(i,o):c=t,c}var Ia=-0,Da=0;function Le(t,i,o){let c=Eo(o,t,i),h=t.toLocaleString(i,c),b=Ia.toLocaleString(i,c);return h===b?Da.toLocaleString(i,c):h}function Po(t){if(t===gt.METERS)return 1;if(t===gt.CENTIMETERS)return .01;if(t===gt.KILOMETERS)return 1e3;if(t===gt.FEET)return .3048;if(t===gt.US_SURVEY_FEET)return 1200/3937;if(t===gt.INCHES)return .0254;if(t===gt.YARDS)return .9144;if(t===gt.MILES)return 1609.344}function Co(t){if(t===ht.SQUARE_METERS)return 1;if(t===ht.SQUARE_CENTIMETERS)return 1e-4;if(t===ht.SQUARE_KILOMETERS)return 1e6;if(t===ht.SQUARE_FEET)return .3048*.3048;if(t===ht.SQUARE_INCHES)return .0254*.0254;if(t===ht.SQUARE_YARDS)return .9144*.9144;if(t===ht.SQUARE_MILES)return 1609.344*1609.344;if(t===ht.ACRES)return 4046.85642232;if(t===ht.HECTARES)return 1e4}function xo(t){if(t===St.CUBIC_METERS)return 1;if(t===St.CUBIC_CENTIMETERS)return 1e-6;if(t===St.CUBIC_KILOMETERS)return 1e9;if(t===St.CUBIC_FEET)return .3048*.3048*.3048;if(t===St.CUBIC_INCHES)return .0254*.0254*.0254;if(t===St.CUBIC_YARDS)return .9144*.9144*.9144;if(t===St.CUBIC_MILES)return 1609.344*1609.344*1609.344}var Aa=/(-?)(\d+)\s*°\s*(\d+)\s*'\s*([\d.,]+)"\s*([WENS]?)/i;function ka(t,i){if(i===et.RADIANS)return t;if(i===et.DEGREES)return xe.toRadians(t);if(i===et.GRADE)return t===Number.POSITIVE_INFINITY?xe.PI_OVER_TWO:Math.atan(t/100);if(i===et.RATIO)return Math.atan(t);if(i===et.DEGREES_MINUTES_SECONDS){let o=Aa.exec(t);if(!Ta(o))throw new Oa(`Could not convert angle to radians: ${t}`);let c=o[1].length>0?-1:1,h=parseInt(o[2]),b=parseInt(o[3]),x=parseFloat(o[4]),S=o[5];S.length===1&&(S=S.toUpperCase(),(S==="W"||S==="S")&&(c*=-1));let O=c*(h+b/60+x/3600);return xe.toRadians(O)}}function ln(t,i){if(i===et.RADIANS)return t;if(i===et.DEGREES)return xe.toDegrees(t);if(i===et.GRADE)return t=xe.clamp(Math.abs(t),0,xe.PI_OVER_TWO),t===xe.PI_OVER_TWO?Number.POSITIVE_INFINITY:100*Math.tan(t);if(i===et.RATIO){let o=Math.sin(t),c=Math.cos(t);return o/c}}var J=$;var Ra=new Oo,Fa=new Oo,za=new jt,Ba=new jt,Ua=new jt,Ha=new jt,Va=new jt;function ja(t,i,o){let c=jt.subtract(t,i,Ha),h=jt.subtract(o,i,Va),b=jt.cross(c,h,c);return jt.magnitude(b)*.5}function Bt(t){t=t??Na.EMPTY_OBJECT,t.polylineOptions=W.getPolylineOptions({ellipsoid:t.ellipsoid}),t.pointOptions=W.getPointOptions(),t.polygonOptions={color:W.color.withAlpha(.8)},Ce.call(this,t);let i=t.labels;this._labelCollection=i,this._label=i.add(W.getLabelOptions()),this._selectedUnits=t.units,this._selectedLocale=t.locale,this._area=0;let o=this;this._removeEvent=this._scene.preRender.addEventListener(function(){o.updateLabel()})}Bt.prototype=Object.create(Ce.prototype);Bt.prototype.constructor=Bt;Object.defineProperties(Bt.prototype,{area:{get:function(){return this._area}}});Bt.prototype.updateArea=function(t){let i=To.createGeometry(To.fromPositions({positions:t,vertexFormat:La.POSITION_ONLY}));if(!ai(i)){this._label.text="";return}let o=i.attributes.position.values,c=i.indices,h=0;for(let b=0;b<c.length;b+=3){let x=c[b],S=c[b+1],O=c[b+2],D=jt.unpack(o,x*3,za),L=jt.unpack(o,S*3,Ba),F=jt.unpack(o,O*3,Ua);h+=ja(D,L,F)}this._area=h,this._refreshLabels()};Bt.prototype._refreshLabels=function(){let t=this._label;t.text=J.areaToString(this._area,this._selectedUnits.areaUnits,this._selectedLocale)};Bt.prototype.updateLabel=function(){let t=this._positions;if(t.length<2)return;let i=this._scene,o=t[0],c=Mo.worldToWindowCoordinates(i,o,Ra),h=ai(c)?c.y:Number.POSITIVE_INFINITY;for(let b=1;b<t.length;b++){let x=Mo.worldToWindowCoordinates(i,t[b],Fa);ai(x)&&x.y<h&&(h=x.y,o=t[b])}this._label.position=o};Bt.prototype.addPoint=function(t){Ce.prototype.addPoint.call(this,t),this.updateArea(this._positions)};Bt.prototype.handleClick=function(t){this._mode===K.AfterDraw&&this.reset();let i=Ce.prototype.handleClick.call(this,t);ai(i)&&(this._label.show=!0,this._polygon.show=!0,this._polyline.show=!0)};Bt.prototype.handleMouseMove=function(t){let i=Ce.prototype.handleMouseMove.call(this,t);if(!ai(i))return;let o=this._positions.slice();o.push(i),this.updateArea(o)};Bt.prototype.reset=function(){this._label.show=!1,this._label.text="",this._positions=[],this._polyline.positions=[],this._polygon.positions=[],this._polyline.show=!1,this._polygon.show=!1,this._area=0;let t=this._points,i=this._pointCollection;for(let o=0;o<t.length;o++)i.remove(t[o]);t.length=0,this._mode=K.BeforeDraw,this._lastClickPosition.x=Number.POSITIVE_INFINITY,this._lastClickPosition.y=Number.POSITIVE_INFINITY};Bt.prototype.destroy=function(){this._removeEvent(),this._labelCollection.remove(this._label),Ce.prototype.destroy.call(this)};var cn=Bt;function Io(t){return`<svg viewBox="0 0 30 30" height="${t}px" width="${t}px">
                 <g transform="translate(0,-267)">
                   <circle r="2.0788691" cy="293.99896" cx="3.8532958"/>
                   <circle r="2.0788691" cy="282.76791" cx="26.927404"/>
                   <circle r="2.0788691" cy="270.20621" cx="4.0090437"/>
                   <path d="m 26.326048,283.77014 -9.394396,5.02295 -9.3943948,5.02295 0.3471933,-10.64726 0.3471933,-10.64726 9.0472022,5.62431 z" transform="matrix(1.1625734,0,0,0.99297729,-4.6787891,1.2180486)"/>
                 </g>
               </svg>`}function Wt(t){t=t??Ya.EMPTY_OBJECT,ut.call(this,t),this._drawing=new cn(t)}Wt.prototype=Object.create(ut.prototype);Wt.prototype.constructor=Wt;Object.defineProperties(Wt.prototype,{area:{get:function(){return this._drawing.area}},icon:{value:Io(15)},thumbnail:{value:Io(25)},type:{value:"Area"},instructions:{value:["Click to start drawing a polygon","Keep clicking to add more points","Double click to finish drawing"]},id:{value:"areaMeasurement"}});Wt.prototype._refreshLabels=function(){this._drawing._refreshLabels()};Wt.prototype.handleDoubleClick=function(){this._drawing.handleDoubleClick()};Wt.prototype.handleClick=function(t){this._drawing.handleClick(t)};Wt.prototype.handleMouseMove=function(t){this._drawing.handleMouseMove(t)};Wt.prototype.reset=function(){this._drawing.reset()};Wt.prototype.isDestroyed=function(){return!1};Wt.prototype.destroy=function(){return this._drawing.destroy(),Wa(this)};var un=Wt;import{defined as Pi,destroyObject as Ga,Cartesian2 as Ye,Cartesian3 as H,Cartographic as $a,Frozen as Za,Math as Do,Material as qa,SceneTransforms as Ao,HorizontalOrigin as de,VerticalOrigin as hn}from"@cesium/engine";var ue={BeforeDraw:0,Drawing:1,AfterDraw:2},Ja=new Ye,Xa=new Ye,No=new $a,ce=new H,Lo=new H,Qa=new H;function Ro(t){return`<svg viewBox="0 0 30 30" height="${t}px" width="${t}px">
                 <g transform="translate(0,-267)">
                  <path d="m 4.934989,292.6549 20.67981,-20.80395"/>
                   <circle r="2.0788691" cy="270.1637" cx="27.025297"/>
                   <circle r="2.0788691" cy="294.07068" cx="3.1183045"/>
                 </g>
               </svg>
`}function Fo(t){return`<svg viewBox="0 0 30 30" height="${t}px" width="${t}px">
                 <g transform="translate(0,-267)">
                   <path d="m 4.934989,292.6549 20.67981,-20.80395" />
                   <circle r="2.0788691" cy="270.1637" cx="27.025297" />
                   <circle r="2.0788691" cy="294.07068" cx="3.1183045" />
                   <path style="stroke-dasharray:2.00314951, 1.00157475;stroke-dashoffset:0;" d="m 3.3194019,292.73274 -0.046996,-22.53109 21.6420984,-0.0266" />
                 </g>
               </svg>
`}function Pt(t){t=t??Za.EMPTY_OBJECT,ut.call(this,t);let i=this,o=this._pointCollection,c=this._labelCollection,h=this._primitives,b=this._scene,x=[new H,new H],S=[new H,new H,new H],O=[new H,new H,new H],D=new Ye(-9,0),L=new Ye(9,0),F=b.frameState.mapProjection.ellipsoid;this._startPoint=o.add(W.getPointOptions()),this._endPoint=o.add(W.getPointOptions()),this._positions=x,this._polyline=h.add(new Tt(W.getPolylineOptions({ellipsoid:F,width:3,show:!1,positions:x}))),this._xyPolylinePositions=S,this._xyPolyline=h.add(new Tt(W.getPolylineOptions({ellipsoid:F,width:2,positions:S,materialType:qa.PolylineDashType}))),this._xyBoxPositions=O,this._xyBox=h.add(new Tt(W.getPolylineOptions({ellipsoid:F,width:1,positions:O}))),this._label=c.add(W.getLabelOptions({horizontalOrigin:de.LEFT,verticalOrigin:hn.TOP,pixelOffset:new Ye(10,10)})),this._xPixelOffset=L,this._xLabel=c.add(W.getLabelOptions()),this._xAngleLabel=c.add(W.getLabelOptions({horizontalOrigin:de.LEFT,verticalOrigin:hn.MIDDLE,pixelOffset:L})),this._yPixelOffset=D,this._yLabel=c.add(W.getLabelOptions({horizontalOrigin:de.RIGHT,pixelOffset:D})),this._yAngleLabel=c.add(W.getLabelOptions({verticalOrigin:hn.TOP,pixelOffset:new Ye(0,9)})),this._distance=0,this._xDistance=0,this._yDistance=0,this._xAngle=0,this._yAngle=0,this._mode=ue.BeforeDraw,this._showComponentLines=t.showComponentLines??!1,this._removeEvent=b.preRender.addEventListener(function(){i._updateLabelPosition()})}Pt.prototype=Object.create(ut.prototype);Pt.prototype.constructor=Pt;Object.defineProperties(Pt.prototype,{distance:{get:function(){return this._distance}},horizontalDistance:{get:function(){return this._xDistance}},verticalDistance:{get:function(){return this._yDistance}},angleFromHorizontal:{get:function(){return this._xAngle}},angleFromVertical:{get:function(){return this._yAngle}},icon:{get:function(){return this._showComponentLines?Fo(15):Ro(15)}},thumbnail:{get:function(){return this._showComponentLines?Fo(25):Ro(25)}},type:{get:function(){return this._showComponentLines?"Component Distance":"Distance"}},instructions:{value:["Click on the point cloud or the globe to set the start point and end points","To make a new measurement, click to clear the previous measurement"]},id:{get:function(){return this._showComponentLines?"componentDistanceMeasurement":"distanceMeasurement"}},showComponentLines:{get:function(){return this._showComponentLines},set:function(t){this._showComponentLines=t,this._mode!==ue.BeforeDraw&&this._updateComponents()}}});Pt.prototype._refreshLabels=function(){this._refreshDistanceText(),this._refreshComponentsText()};Pt.prototype._refreshDistanceText=function(){let t=this._label,i=this._distance;t.text=J.distanceToString(i,this._selectedUnits.distanceUnits,this._selectedLocale)};Pt.prototype._refreshComponentsText=function(){let t=this._xLabel,i=this._yLabel,o=this._xAngleLabel,c=this._yAngleLabel,h=this._xDistance,b=this._yDistance,x=this._xAngle,S=this._yAngle,O=this._selectedUnits,D=this._selectedLocale;t.text=J.distanceToString(h,O.distanceUnits,D),i.text=J.distanceToString(b,O.distanceUnits,D),o.text=J.angleToString(x,O.slopeUnits,D),c.text=J.angleToString(S,O.slopeUnits,D)};Pt.prototype._updateComponents=function(){let t=this._showComponentLines,i=this._xLabel,o=this._yLabel,c=this._xAngleLabel,h=this._yAngleLabel,b=this._xyPolyline,x=this._xyBox;if(i.show=!1,o.show=!1,c.show=!1,h.show=!1,b.show=!1,x.show=!1,!t)return;let S=this._scene.frameState.mapProjection.ellipsoid,O=this._positions,D=O[0],L=O[1],F=S.cartesianToCartographic(D,No).height,B=S.cartesianToCartographic(L,No).height,U,e,at,R;F<B?(U=D,e=L,at=B,R=F):(U=L,e=D,at=F,R=B);let Y=this._xyPolylinePositions;Y[0]=H.clone(U,Y[0]),Y[2]=H.clone(e,Y[2]);let Q=S.geodeticSurfaceNormal(U,ce);Q=H.multiplyByScalar(Q,at-R,Q);let lt=H.add(U,Q,Y[1]);if(b.positions=Y,H.equalsEpsilon(lt,e,Do.EPSILON10)||H.equalsEpsilon(lt,U,Do.EPSILON10))return;o.show=!0,i.show=!0,h.show=!0,c.show=!0,b.show=!0,x.show=!0;let V=H.subtract(e,lt,ce),q=H.subtract(U,lt,Lo),Xt=Math.min(H.magnitude(V),H.magnitude(q)),ie=Xt>15?Xt*.15:Xt*.25;V=H.normalize(V,V),q=H.normalize(q,q),V=H.multiplyByScalar(V,ie,V),q=H.multiplyByScalar(q,ie,q);let vt=this._xyBoxPositions;vt[0]=H.add(lt,V,vt[0]),vt[1]=H.add(vt[0],q,vt[1]),vt[2]=H.add(lt,q,vt[2]),x.positions=vt,i.position=H.midpoint(lt,e,ce),o.position=H.midpoint(U,lt,ce),c.position=H.clone(e,ce),h.position=H.clone(U,ce);let nt=H.subtract(lt,e,Lo),ot=H.subtract(lt,U,ce),n=H.subtract(e,U,Qa),r=H.angleBetween(ot,n);n=H.negate(n,n);let s=H.angleBetween(nt,n),a=H.magnitude(nt),p=H.magnitude(ot);this._xDistance=a,this._yDistance=p,this._xAngle=s,this._yAngle=r,this._refreshComponentsText()};Pt.prototype._updateLabelPosition=function(){let t=this._positions;if(this._mode===ue.BeforeDraw)return;let i=this._scene,o=t[0],c=t[1],h=Ao.worldToWindowCoordinates(i,o,Ja),b=Ao.worldToWindowCoordinates(i,c,Xa);if(!Pi(h)||!Pi(b))return;let x=this._label,S=this._yLabel,O=this._xAngleLabel;(h.y-b.y)/(b.x-h.x)>0?(this._yPixelOffset.x=-9,this._xPixelOffset.x=12,S.pixelOffset=this._yPixelOffset,S.horizontalOrigin=de.RIGHT,O.pixelOffset=this._xPixelOffset,O.horizontalOrigin=de.LEFT,x.horizontalOrigin=de.LEFT):(this._yPixelOffset.x=9,this._xPixelOffset.x=-12,S.pixelOffset=this._yPixelOffset,S.horizontalOrigin=de.LEFT,O.pixelOffset=this._xPixelOffset,O.horizontalOrigin=de.RIGHT,x.horizontalOrigin=de.RIGHT)};Pt.prototype.handleClick=function(t){let i=this._scene;this._mode===ue.AfterDraw&&this.reset();let o=this._mode,c=this._positions;if(o===ue.BeforeDraw){let h=Pt._getWorldPosition(i,t,ct,c[0]);if(!Pi(h))return;this._polyline.show=!0,c[0]=h.clone(c[0]),c[1]=h.clone(c[1]),this._startPoint.position=h,this._startPoint.show=!0,this._mode=ue.Drawing,this._polyline.positions=c}else o===ue.Drawing&&(this._endPoint.position=c[1],this._endPoint.show=!0,this._polyline.positions=c,this._mode=ue.AfterDraw)};Pt.prototype.handleMouseMove=function(t){if(this._mode!==ue.Drawing)return;let i=this._scene,o=this._positions,c=Pt._getWorldPosition(i,t,ct,ce);if(!Pi(c))return;let h=o[0],b=H.clone(c,o[1]),x=H.subtract(b,h,ce);this._distance=H.magnitude(x),this._polyline.positions=o;let S=this._label;S.position=H.midpoint(h,b,ce),S.show=!0,this._refreshDistanceText(),this._updateComponents()};Pt.prototype.reset=function(){this._polyline.show=!1,this._xyPolyline.show=!1,this._xyBox.show=!1,this._label.show=!1,this._xLabel.show=!1,this._yLabel.show=!1,this._xAngleLabel.show=!1,this._yAngleLabel.show=!1,this._startPoint.show=!1,this._endPoint.show=!1,this._mode=ue.BeforeDraw,this._distance=0,this._xDistance=0,this._yDistance=0,this._xAngle=0,this._yAngle=0};Pt.prototype.isDestroyed=function(){return!1};Pt.prototype.destroy=function(){this._removeEvent();let t=this._primitives;t.remove(this._polyline),t.remove(this._xyPolyline),t.remove(this._xyBox);let i=this._pointCollection;i.remove(this._startPoint),i.remove(this._endPoint);let o=this._labelCollection;return o.remove(this._label),o.remove(this._xLabel),o.remove(this._yLabel),o.remove(this._xAngleLabel),o.remove(this._yAngleLabel),Ga(this)};Pt._getWorldPosition=Ot;var Ci=Pt;import{defined as zo,destroyObject as Ka,Cartesian2 as tl,Cartesian3 as li,Cartographic as el,Frozen as il,HorizontalOrigin as nl,VerticalOrigin as ol}from"@cesium/engine";var rl=new li,sl=new el;function Bo(t){return`<svg viewBox="0 0 30 30" height="${t}px" width="${t}px">
             <g transform="translate(0,-267)">
               <path d="m 15.042838,272.34414 0.01712,19.60575"/>
               <circle r="2.0788691" cy="270.01154" cx="15.078616"/>
               <path d="m 0.64901081,296.20687 8.80039389,-6.01044 7.9375003,3.1183 12.347278,-3.34365"/>
             </g>
           </svg>`}function Yt(t){t=t??il.EMPTY_OBJECT,ut.call(this,t);let i=[new li,new li],o=this._pointCollection;this._startPoint=o.add(W.getPointOptions()),this._endPoint=o.add(W.getPointOptions()),this._polyline=this._primitives.add(new Tt(W.getPolylineOptions({ellipsoid:this._scene.frameState.mapProjection.ellipsoid,positions:i}))),this._label=this._labelCollection.add(W.getLabelOptions({horizontalOrigin:nl.LEFT,verticalOrigin:ol.TOP,pixelOffset:new tl(10,10)})),this._positions=i,this._distance=0}Yt.prototype=Object.create(ut.prototype);Yt.prototype.constructor=Yt;Object.defineProperties(Yt.prototype,{distance:{get:function(){return this._distance}},icon:{value:Bo(15)},thumbnail:{value:Bo(25)},type:{value:"Height from terrain"},instructions:{value:["Click on the point cloud to get a distance from that point to terrain"]},id:{value:"heightMeasurement"}});Yt.prototype.handleClick=function(t){let i=this._scene;this.reset();let o=this._positions,c=Yt._getWorldPosition(i,t,ct,o[0]);if(!zo(c))return;let h=i.globe,b=i.frameState.mapProjection.ellipsoid,x=b.cartesianToCartographic(c,sl);zo(h)?x.height=h.getHeight(x)??0:x.height=0;let S=b.cartographicToCartesian(x,o[1]),O=li.subtract(S,c,rl),D=li.magnitude(O),L=this._label;L.position=c,L.show=!0,this._polyline.positions=o,this._polyline.show=!0,this._startPoint.position=c,this._startPoint.show=!0,this._endPoint.position=S,this._endPoint.show=!0,this._distance=D,this._refreshLabels()};Yt.prototype._refreshLabels=function(){let t=this._label;t.text=J.distanceToString(this._distance,this._selectedUnits.distanceUnits,this._selectedLocale)};Yt.prototype.reset=function(){this._polyline.show=!1,this._label.show=!1,this._startPoint.show=!1,this._endPoint.show=!1,this._distance=0};Yt.prototype.isDestroyed=function(){return!1};Yt.prototype.destroy=function(){this._primitives.remove(this._polyline);let t=this._pointCollection;return t.remove(this._startPoint),t.remove(this._endPoint),this._labelCollection.remove(this._label),Ka(this)};Yt._getWorldPosition=Ot;var fn=Yt;import{destroyObject as fl,Frozen as pl}from"@cesium/engine";import{defined as xi,Cartesian2 as Ee,Cartesian3 as me,Frozen as al,SceneTransforms as Uo,HorizontalOrigin as Ei,VerticalOrigin as Vo}from"@cesium/engine";var ll=new me,cl=new Ee,ul=new Ee,Ho=new Ee,hl=new me;function Gt(t){t=t??al.EMPTY_OBJECT,Pe.call(this,t);let i=t.labels;this._labelCollection=i,this._label=i.add(W.getLabelOptions({horizontalOrigin:Ei.LEFT,verticalOrigin:Vo.BOTTOM,pixelOffset:new Ee(10,-10)})),this._segmentLabels=[],this._segmentDistances=[],this._selectedUnits=t.units,this._selectedLocale=t.locale,this._previousDistance=0,this._distance=0;let o=this;this._removeEvent=this._scene.preRender.addEventListener(function(){o.updateLabels()})}Gt.prototype=Object.create(Pe.prototype);Gt.prototype.constructor=Gt;Object.defineProperties(Gt.prototype,{distance:{get:function(){return this._distance}}});Gt.prototype.updateLabels=function(){let t=this._positions;if(t.length<2)return;let i=this._scene,o=t[0],c=Uo.worldToWindowCoordinates(i,o,cl),h=xi(c)?Ee.clone(c,Ho):Ee.fromElements(Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Ho),b=h.y,x=this._segmentLabels;x[0].show=this._polyline.positions.length>2;for(let S=1;S<t.length;S++){let O=Uo.worldToWindowCoordinates(i,t[S],ul);if(!xi(O))continue;let D=(h.y-O.y)/(O.x-h.x),L=x[S-1];D>0?L.horizontalOrigin=Ei.LEFT:L.horizontalOrigin=Ei.RIGHT,O.y<b&&(b=O.y,o=t[S]),h=Ee.clone(O,h)}this._mode===K.AfterDraw&&(this._label.position=o)};Gt.prototype.addPoint=function(t){let i=this._positions;if(i.length>0){this._previousDistance=this._distance;let o=this._labelCollection.add(W.getLabelOptions({scale:.8,horizontalOrigin:Ei.LEFT,verticalOrigin:Vo.TOP,pixelOffset:new Ee(5,5)})),c=i[i.length-1];o.position=me.midpoint(c,t,new me),o.text=J.distanceToString(me.distance(c,t),this._selectedUnits.distanceUnits,this._selectedLocale),o.show=!0,this._segmentDistances.push(me.distance(c,t)),this._segmentLabels.push(o)}Pe.prototype.addPoint.call(this,t)};Gt.prototype.handleClick=function(t){this._mode===K.AfterDraw&&this.reset();let i=Pe.prototype.handleClick.call(this,t);xi(i)&&(this._label.show=!0,this._polyline.show=!0)};Gt.prototype._refreshLabels=function(){let t=this._label;t.text=J.distanceToString(this._distance,this._selectedUnits.distanceUnits,this._selectedLocale);let i=this._segmentLabels;for(let o=0;o<i.length;o++)i[o].text=J.distanceToString(this._segmentDistances[o],this._selectedUnits.distanceUnits,this._selectedLocale)};Gt.prototype.handleMouseMove=function(t,i){let o=Pe.prototype.handleMouseMove.call(this,t,i);if(!xi(o))return;let c=this._positions,h=c[c.length-1],b=me.subtract(o,h,hl),x=this._previousDistance+me.magnitude(b),S=this._label;S.position=me.midpoint(h,o,ll),S.text=J.distanceToString(x,this._selectedUnits.distanceUnits,this._selectedLocale),S.show=!0,this._distance=x};Gt.prototype.reset=function(){let t,i=this._primitives,o=this._dashedLines;for(t=0;t<o.length;t++)i.remove(o[t]);this._dashedLines=[],this._polyline.positions=[],this._polyline.show=!1,this._label.show=!1,this._label.text="",this._previousDistance=0,this._distance=0,this._positions=[];let c=this._points,h=this._pointCollection;for(t=0;t<c.length;t++)h.remove(c[t]);c.length=0;let b=this._labelCollection,x=this._segmentLabels,S=this._segmentDistances;for(t=0;t<x.length;t++)b.remove(x[t]);x.length=0,S.length=0,this._moveDashLine.show=!1,this._mode=K.BeforeDraw,this._lastClickPosition.x=Number.POSITIVE_INFINITY,this._lastClickPosition.y=Number.POSITIVE_INFINITY};Gt.prototype.destroy=function(){this._removeEvent();let t,i=this._labelCollection,o=this._segmentLabels;for(t=0;t<o.length;t++)i.remove(o[t]);let c=this._primitives,h=this._dashedLines;for(t=0;t<h.length;t++)c.remove(h[t]);this._labelCollection.remove(this._label),Pe.prototype.destroy.call(this)};var pn=Gt;function jo(t){return`<svg viewBox="0 0 30 30" height="${t}px" width="${t}px">
                 <g transform="translate(0,-267)">
                   <path d="m 5.5492003,281.78808 18.9375757,0.0497"/>
                   <circle r="2.0788691" cy="281.63776" cx="3.0514872"/>
                   <circle r="2.0788691" cy="281.71384" cx="26.985731"/>
                 </g>
               </svg>`}function $t(t){t=t??pl.EMPTY_OBJECT,ut.call(this,t),this._drawing=new pn(t)}$t.prototype=Object.create(ut.prototype);$t.prototype.constructor=$t;Object.defineProperties($t.prototype,{distance:{get:function(){return this._drawing.distance}},icon:{value:jo(15)},thumbnail:{value:jo(25)},type:{value:"Horizontal distance"},instructions:{value:["Click on the point cloud or the globe to set the start point","Move the mouse to drag the line","Press this shift key to clamp the direction of the line","Click again to set the end point","To make a new measurement, click to clear the previous measurement"]},id:{value:"horizontalMeasurement"}});$t.prototype._refreshLabels=function(){this._drawing._refreshLabels()};$t.prototype.handleDoubleClick=function(){this._drawing.handleDoubleClick()};$t.prototype.handleClick=function(t){this._drawing.handleClick(t)};$t.prototype.handleMouseMove=function(t,i){this._drawing.handleMouseMove(t,i)};$t.prototype.reset=function(){this._drawing.reset()};$t.prototype.isDestroyed=function(){return!1};$t.prototype.destroy=function(){return this._drawing.destroy(),fl(this)};var dn=$t;import{destroyObject as ac,Frozen as lc,getElement as cc}from"@cesium/engine";var ci;typeof ko<"u"&&(ci=ko);(function(){/*!
 * Knockout JavaScript library v3.5.1
 * (c) The Knockout.js team - http://knockoutjs.com/
 * License: MIT (http://www.opensource.org/licenses/mit-license.php)
 */(function(){(function(t){var i=this||(0,eval)("this"),o=i.document,c=i.navigator,h=i.jQuery,b=i.JSON;h||typeof jQuery>"u"||(h=jQuery),(function(x){x(i.ko={})})(function(x,S){function O(n,r){return n===null||typeof n in at?n===r:!1}function D(n,r){var s;return function(){s||(s=e.a.setTimeout(function(){s=t,n()},r))}}function L(n,r){var s;return function(){clearTimeout(s),s=e.a.setTimeout(n,r)}}function F(n,r){r&&r!=="change"?r==="beforeChange"?this.pc(n):this.gb(n,r):this.qc(n)}function B(n,r){r!==null&&r.s&&r.s()}function U(n,r){var s=this.qd,a=s[V];a.ra||(this.Qb&&this.mb[r]?(s.uc(r,n,this.mb[r]),this.mb[r]=null,--this.Qb):a.I[r]||s.uc(r,n,a.J?{da:n}:s.$c(n)),n.Ja&&n.gd())}var e=typeof x<"u"?x:{};e.b=function(n,r){for(var s=n.split("."),a=e,p=0;p<s.length-1;p++)a=a[s[p]];a[s[s.length-1]]=r},e.L=function(n,r,s){n[r]=s},e.version="3.5.1",e.b("version",e.version),e.options={deferUpdates:!1,useOnlyNativeEvents:!1,foreachHidesDestroyed:!1},e.a=(function(){function n(l,w){for(var _ in l)p.call(l,_)&&w(_,l[_])}function r(l,w){if(w)for(var _ in w)p.call(w,_)&&(l[_]=w[_]);return l}function s(l,w){return l.__proto__=w,l}function a(l,w,_,E){var M=l[w].match(v)||[];e.a.D(_.match(v),function(P){e.a.Na(M,P,E)}),l[w]=M.join(" ")}var p=Object.prototype.hasOwnProperty,m={__proto__:[]}instanceof Array,d=typeof Symbol=="function",g={},f={};g[c&&/Firefox\/2/i.test(c.userAgent)?"KeyboardEvent":"UIEvents"]=["keyup","keydown","keypress"],g.MouseEvents="click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave".split(" "),n(g,function(l,w){if(w.length)for(var _=0,E=w.length;_<E;_++)f[w[_]]=l});var u={propertychange:!0},y=o&&(function(){for(var l=3,w=o.createElement("div"),_=w.getElementsByTagName("i");w.innerHTML="<!--[if gt IE "+ ++l+"]><i></i><![endif]-->",_[0];);return 4<l?l:t})(),v=/\S+/g,C;return{Jc:["authenticity_token",/^__RequestVerificationToken(_.*)?$/],D:function(l,w,_){for(var E=0,M=l.length;E<M;E++)w.call(_,l[E],E,l)},A:typeof Array.prototype.indexOf=="function"?function(l,w){return Array.prototype.indexOf.call(l,w)}:function(l,w){for(var _=0,E=l.length;_<E;_++)if(l[_]===w)return _;return-1},Lb:function(l,w,_){for(var E=0,M=l.length;E<M;E++)if(w.call(_,l[E],E,l))return l[E];return t},Pa:function(l,w){var _=e.a.A(l,w);0<_?l.splice(_,1):_===0&&l.shift()},wc:function(l){var w=[];return l&&e.a.D(l,function(_){0>e.a.A(w,_)&&w.push(_)}),w},Mb:function(l,w,_){var E=[];if(l)for(var M=0,P=l.length;M<P;M++)E.push(w.call(_,l[M],M));return E},jb:function(l,w,_){var E=[];if(l)for(var M=0,P=l.length;M<P;M++)w.call(_,l[M],M)&&E.push(l[M]);return E},Nb:function(l,w){if(w instanceof Array)l.push.apply(l,w);else for(var _=0,E=w.length;_<E;_++)l.push(w[_]);return l},Na:function(l,w,_){var E=e.a.A(e.a.bc(l),w);0>E?_&&l.push(w):_||l.splice(E,1)},Ba:m,extend:r,setPrototypeOf:s,Ab:m?s:r,P:n,Ga:function(l,w,_){if(!l)return l;var E={},M;for(M in l)p.call(l,M)&&(E[M]=w.call(_,l[M],M,l));return E},Tb:function(l){for(;l.firstChild;)e.removeNode(l.firstChild)},Yb:function(l){l=e.a.la(l);for(var w=(l[0]&&l[0].ownerDocument||o).createElement("div"),_=0,E=l.length;_<E;_++)w.appendChild(e.oa(l[_]));return w},Ca:function(l,w){for(var _=0,E=l.length,M=[];_<E;_++){var P=l[_].cloneNode(!0);M.push(w?e.oa(P):P)}return M},va:function(l,w){if(e.a.Tb(l),w)for(var _=0,E=w.length;_<E;_++)l.appendChild(w[_])},Xc:function(l,w){var _=l.nodeType?[l]:l;if(0<_.length){for(var E=_[0],M=E.parentNode,P=0,T=w.length;P<T;P++)M.insertBefore(w[P],E);for(P=0,T=_.length;P<T;P++)e.removeNode(_[P])}},Ua:function(l,w){if(l.length){for(w=w.nodeType===8&&w.parentNode||w;l.length&&l[0].parentNode!==w;)l.splice(0,1);for(;1<l.length&&l[l.length-1].parentNode!==w;)l.length--;if(1<l.length){var _=l[0],E=l[l.length-1];for(l.length=0;_!==E;)l.push(_),_=_.nextSibling;l.push(E)}}return l},Zc:function(l,w){7>y?l.setAttribute("selected",w):l.selected=w},Db:function(l){return l===null||l===t?"":l.trim?l.trim():l.toString().replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")},Ud:function(l,w){return l=l||"",w.length>l.length?!1:l.substring(0,w.length)===w},vd:function(l,w){if(l===w)return!0;if(l.nodeType===11)return!1;if(w.contains)return w.contains(l.nodeType!==1?l.parentNode:l);if(w.compareDocumentPosition)return(w.compareDocumentPosition(l)&16)==16;for(;l&&l!=w;)l=l.parentNode;return!!l},Sb:function(l){return e.a.vd(l,l.ownerDocument.documentElement)},kd:function(l){return!!e.a.Lb(l,e.a.Sb)},R:function(l){return l&&l.tagName&&l.tagName.toLowerCase()},Ac:function(l){return e.onError?function(){try{return l.apply(this,arguments)}catch(w){throw e.onError&&e.onError(w),w}}:l},setTimeout:function(l,w){return setTimeout(e.a.Ac(l),w)},Gc:function(l){setTimeout(function(){throw e.onError&&e.onError(l),l},0)},B:function(l,w,_){var E=e.a.Ac(_);if(_=u[w],e.options.useOnlyNativeEvents||_||!h)if(_||typeof l.addEventListener!="function")if(typeof l.attachEvent<"u"){var M=function(T){E.call(l,T)},P="on"+w;l.attachEvent(P,M),e.a.K.za(l,function(){l.detachEvent(P,M)})}else throw Error("Browser doesn't support addEventListener or attachEvent");else l.addEventListener(w,E,!1);else C||(C=typeof h(l).on=="function"?"on":"bind"),h(l)[C](w,E)},Fb:function(l,w){if(!l||!l.nodeType)throw Error("element must be a DOM node when calling triggerEvent");var _;if(e.a.R(l)==="input"&&l.type&&w.toLowerCase()=="click"?(_=l.type,_=_=="checkbox"||_=="radio"):_=!1,e.options.useOnlyNativeEvents||!h||_)if(typeof o.createEvent=="function")if(typeof l.dispatchEvent=="function")_=o.createEvent(f[w]||"HTMLEvents"),_.initEvent(w,!0,!0,i,0,0,0,0,0,!1,!1,!1,!1,0,l),l.dispatchEvent(_);else throw Error("The supplied element doesn't support dispatchEvent");else if(_&&l.click)l.click();else if(typeof l.fireEvent<"u")l.fireEvent("on"+w);else throw Error("Browser doesn't support triggering events");else h(l).trigger(w)},f:function(l){return e.O(l)?l():l},bc:function(l){return e.O(l)?l.v():l},Eb:function(l,w,_){var E;w&&(typeof l.classList=="object"?(E=l.classList[_?"add":"remove"],e.a.D(w.match(v),function(M){E.call(l.classList,M)})):typeof l.className.baseVal=="string"?a(l.className,"baseVal",w,_):a(l,"className",w,_))},Bb:function(l,w){var _=e.a.f(w);(_===null||_===t)&&(_="");var E=e.h.firstChild(l);!E||E.nodeType!=3||e.h.nextSibling(E)?e.h.va(l,[l.ownerDocument.createTextNode(_)]):E.data=_,e.a.Ad(l)},Yc:function(l,w){if(l.name=w,7>=y)try{var _=l.name.replace(/[&<>'"]/g,function(E){return"&#"+E.charCodeAt(0)+";"});l.mergeAttributes(o.createElement("<input name='"+_+"'/>"),!1)}catch{}},Ad:function(l){9<=y&&(l=l.nodeType==1?l:l.parentNode,l.style&&(l.style.zoom=l.style.zoom))},wd:function(l){if(y){var w=l.style.width;l.style.width=0,l.style.width=w}},Pd:function(l,w){l=e.a.f(l),w=e.a.f(w);for(var _=[],E=l;E<=w;E++)_.push(E);return _},la:function(l){for(var w=[],_=0,E=l.length;_<E;_++)w.push(l[_]);return w},Da:function(l){return d?Symbol(l):l},Zd:y===6,$d:y===7,W:y,Lc:function(l,w){for(var _=e.a.la(l.getElementsByTagName("input")).concat(e.a.la(l.getElementsByTagName("textarea"))),E=typeof w=="string"?function(T){return T.name===w}:function(T){return w.test(T.name)},M=[],P=_.length-1;0<=P;P--)E(_[P])&&M.push(_[P]);return M},Nd:function(l){return typeof l=="string"&&(l=e.a.Db(l))?b&&b.parse?b.parse(l):new Function("return "+l)():null},hc:function(l,w,_){if(!b||!b.stringify)throw Error("Cannot find JSON.stringify(). Some browsers (e.g., IE < 8) don't support it natively, but you can overcome this by adding a script reference to json2.js, downloadable from http://www.json.org/json2.js");return b.stringify(e.a.f(l),w,_)},Od:function(l,w,_){_=_||{};var E=_.params||{},M=_.includeFields||this.Jc,P=l;if(typeof l=="object"&&e.a.R(l)==="form")for(var P=l.action,T=M.length-1;0<=T;T--)for(var I=e.a.Lc(l,M[T]),k=I.length-1;0<=k;k--)E[I[k].name]=I[k].value;w=e.a.f(w);var A=o.createElement("form");A.style.display="none",A.action=P,A.method="post";for(var N in w)l=o.createElement("input"),l.type="hidden",l.name=N,l.value=e.a.hc(e.a.f(w[N])),A.appendChild(l);n(E,function(z,Et){var ft=o.createElement("input");ft.type="hidden",ft.name=z,ft.value=Et,A.appendChild(ft)}),o.body.appendChild(A),_.submitter?_.submitter(A):A.submit(),setTimeout(function(){A.parentNode.removeChild(A)},0)}}})(),e.b("utils",e.a),e.b("utils.arrayForEach",e.a.D),e.b("utils.arrayFirst",e.a.Lb),e.b("utils.arrayFilter",e.a.jb),e.b("utils.arrayGetDistinctValues",e.a.wc),e.b("utils.arrayIndexOf",e.a.A),e.b("utils.arrayMap",e.a.Mb),e.b("utils.arrayPushAll",e.a.Nb),e.b("utils.arrayRemoveItem",e.a.Pa),e.b("utils.cloneNodes",e.a.Ca),e.b("utils.createSymbolOrString",e.a.Da),e.b("utils.extend",e.a.extend),e.b("utils.fieldsIncludedWithJsonPost",e.a.Jc),e.b("utils.getFormFields",e.a.Lc),e.b("utils.objectMap",e.a.Ga),e.b("utils.peekObservable",e.a.bc),e.b("utils.postJson",e.a.Od),e.b("utils.parseJson",e.a.Nd),e.b("utils.registerEventHandler",e.a.B),e.b("utils.stringifyJson",e.a.hc),e.b("utils.range",e.a.Pd),e.b("utils.toggleDomNodeCssClass",e.a.Eb),e.b("utils.triggerEvent",e.a.Fb),e.b("utils.unwrapObservable",e.a.f),e.b("utils.objectForEach",e.a.P),e.b("utils.addOrRemoveItem",e.a.Na),e.b("utils.setTextContent",e.a.Bb),e.b("unwrap",e.a.f),Function.prototype.bind||(Function.prototype.bind=function(n){var r=this;if(arguments.length===1)return function(){return r.apply(n,arguments)};var s=Array.prototype.slice.call(arguments,1);return function(){var a=s.slice(0);return a.push.apply(a,arguments),r.apply(n,a)}}),e.a.g=new function(){var n=0,r="__ko__"+new Date().getTime(),s={},a,p;return e.a.W?(a=function(m,d){var g=m[r];if(!g||g==="null"||!s[g]){if(!d)return t;g=m[r]="ko"+n++,s[g]={}}return s[g]},p=function(m){var d=m[r];return d?(delete s[d],m[r]=null,!0):!1}):(a=function(m,d){var g=m[r];return!g&&d&&(g=m[r]={}),g},p=function(m){return m[r]?(delete m[r],!0):!1}),{get:function(m,d){var g=a(m,!1);return g&&g[d]},set:function(m,d,g){(m=a(m,g!==t))&&(m[d]=g)},Ub:function(m,d,g){return m=a(m,!0),m[d]||(m[d]=g)},clear:p,Z:function(){return n+++r}}},e.b("utils.domData",e.a.g),e.b("utils.domData.clear",e.a.g.clear),e.a.K=new function(){function n(d,g){var f=e.a.g.get(d,a);return f===t&&g&&(f=[],e.a.g.set(d,a,f)),f}function r(d){var g=n(d,!1);if(g)for(var g=g.slice(0),f=0;f<g.length;f++)g[f](d);e.a.g.clear(d),e.a.K.cleanExternalData(d),m[d.nodeType]&&s(d.childNodes,!0)}function s(d,g){for(var f=[],u,y=0;y<d.length;y++)if((!g||d[y].nodeType===8)&&(r(f[f.length]=u=d[y]),d[y]!==u))for(;y--&&e.a.A(f,d[y])==-1;);}var a=e.a.g.Z(),p={1:!0,8:!0,9:!0},m={1:!0,9:!0};return{za:function(d,g){if(typeof g!="function")throw Error("Callback must be a function");n(d,!0).push(g)},yb:function(d,g){var f=n(d,!1);f&&(e.a.Pa(f,g),f.length==0&&e.a.g.set(d,a,t))},oa:function(d){return e.u.G(function(){p[d.nodeType]&&(r(d),m[d.nodeType]&&s(d.getElementsByTagName("*")))}),d},removeNode:function(d){e.oa(d),d.parentNode&&d.parentNode.removeChild(d)},cleanExternalData:function(d){h&&typeof h.cleanData=="function"&&h.cleanData([d])}}},e.oa=e.a.K.oa,e.removeNode=e.a.K.removeNode,e.b("cleanNode",e.oa),e.b("removeNode",e.removeNode),e.b("utils.domNodeDisposal",e.a.K),e.b("utils.domNodeDisposal.addDisposeCallback",e.a.K.za),e.b("utils.domNodeDisposal.removeDisposeCallback",e.a.K.yb),(function(){var n=[0,"",""],r=[1,"<table>","</table>"],s=[3,"<table><tbody><tr>","</tr></tbody></table>"],a=[1,"<select multiple='multiple'>","</select>"],p={thead:r,tbody:r,tfoot:r,tr:[2,"<table><tbody>","</tbody></table>"],td:s,th:s,option:a,optgroup:a},m=8>=e.a.W;e.a.ua=function(d,g){var f;if(h){if(h.parseHTML)f=h.parseHTML(d,g)||[];else if((f=h.clean([d],g))&&f[0]){for(var u=f[0];u.parentNode&&u.parentNode.nodeType!==11;)u=u.parentNode;u.parentNode&&u.parentNode.removeChild(u)}}else{(f=g)||(f=o);var u=f.parentWindow||f.defaultView||i,y=e.a.Db(d).toLowerCase(),v=f.createElement("div"),C;for(C=(y=y.match(/^(?:\x3c!--.*?--\x3e\s*?)*?<([a-z]+)[\s>]/))&&p[y[1]]||n,y=C[0],C="ignored<div>"+C[1]+d+C[2]+"</div>",typeof u.innerShiv=="function"?v.appendChild(u.innerShiv(C)):(m&&f.body.appendChild(v),v.innerHTML=C,m&&v.parentNode.removeChild(v));y--;)v=v.lastChild;f=e.a.la(v.lastChild.childNodes)}return f},e.a.Md=function(d,g){var f=e.a.ua(d,g);return f.length&&f[0].parentElement||e.a.Yb(f)},e.a.fc=function(d,g){if(e.a.Tb(d),g=e.a.f(g),g!==null&&g!==t)if(typeof g!="string"&&(g=g.toString()),h)h(d).html(g);else for(var f=e.a.ua(g,d.ownerDocument),u=0;u<f.length;u++)d.appendChild(f[u])}})(),e.b("utils.parseHtmlFragment",e.a.ua),e.b("utils.setHtml",e.a.fc),e.aa=(function(){function n(s,a){if(s){if(s.nodeType==8){var p=e.aa.Uc(s.nodeValue);p!=null&&a.push({ud:s,Kd:p})}else if(s.nodeType==1)for(var p=0,m=s.childNodes,d=m.length;p<d;p++)n(m[p],a)}}var r={};return{Xb:function(s){if(typeof s!="function")throw Error("You can only pass a function to ko.memoization.memoize()");var a=(4294967296*(1+Math.random())|0).toString(16).substring(1)+(4294967296*(1+Math.random())|0).toString(16).substring(1);return r[a]=s,"<!--[ko_memo:"+a+"]-->"},bd:function(s,a){var p=r[s];if(p===t)throw Error("Couldn't find any memo with ID "+s+". Perhaps it's already been unmemoized.");try{return p.apply(null,a||[]),!0}finally{delete r[s]}},cd:function(s,a){var p=[];n(s,p);for(var m=0,d=p.length;m<d;m++){var g=p[m].ud,f=[g];a&&e.a.Nb(f,a),e.aa.bd(p[m].Kd,f),g.nodeValue="",g.parentNode&&g.parentNode.removeChild(g)}},Uc:function(s){return(s=s.match(/^\[ko_memo\:(.*?)\]$/))?s[1]:null}}})(),e.b("memoization",e.aa),e.b("memoization.memoize",e.aa.Xb),e.b("memoization.unmemoize",e.aa.bd),e.b("memoization.parseMemoText",e.aa.Uc),e.b("memoization.unmemoizeDomNodeAndDescendants",e.aa.cd),e.na=(function(){function n(){if(p){for(var g=p,f=0,u;d<p;)if(u=a[d++]){if(d>g){if(5e3<=++f){d=p,e.a.Gc(Error("'Too much recursion' after processing "+f+" task groups."));break}g=p}try{u()}catch(y){e.a.Gc(y)}}}}function r(){n(),d=p=a.length=0}var s,a=[],p=0,m=1,d=0;return i.MutationObserver?s=(function(g){var f=o.createElement("div");return new MutationObserver(g).observe(f,{attributes:!0}),function(){f.classList.toggle("foo")}})(r):s=o&&"onreadystatechange"in o.createElement("script")?function(g){var f=o.createElement("script");f.onreadystatechange=function(){f.onreadystatechange=null,o.documentElement.removeChild(f),f=null,g()},o.documentElement.appendChild(f)}:function(g){setTimeout(g,0)},{scheduler:s,zb:function(g){return p||e.na.scheduler(r),a[p++]=g,m++},cancel:function(g){g=g-(m-p),g>=d&&g<p&&(a[g]=null)},resetForTesting:function(){var g=p-d;return d=p=a.length=0,g},Sd:n}})(),e.b("tasks",e.na),e.b("tasks.schedule",e.na.zb),e.b("tasks.runEarly",e.na.Sd),e.Ta={throttle:function(n,r){n.throttleEvaluation=r;var s=null;return e.$({read:n,write:function(a){clearTimeout(s),s=e.a.setTimeout(function(){n(a)},r)}})},rateLimit:function(n,r){var s,a,p;typeof r=="number"?s=r:(s=r.timeout,a=r.method),n.Hb=!1,p=typeof a=="function"?a:a=="notifyWhenChangesStop"?L:D,n.ub(function(m){return p(m,s,r)})},deferred:function(n,r){if(r!==!0)throw Error("The 'deferred' extender only accepts the value 'true', because it is not supported to turn deferral off once enabled.");n.Hb||(n.Hb=!0,n.ub(function(s){var a,p=!1;return function(){if(!p){e.na.cancel(a),a=e.na.zb(s);try{p=!0,n.notifySubscribers(t,"dirty")}finally{p=!1}}}}))},notify:function(n,r){n.equalityComparer=r=="always"?null:O}};var at={undefined:1,boolean:1,number:1,string:1};e.b("extenders",e.Ta),e.ic=function(n,r,s){this.da=n,this.lc=r,this.mc=s,this.Ib=!1,this.fb=this.Jb=null,e.L(this,"dispose",this.s),e.L(this,"disposeWhenNodeIsRemoved",this.l)},e.ic.prototype.s=function(){this.Ib||(this.fb&&e.a.K.yb(this.Jb,this.fb),this.Ib=!0,this.mc(),this.da=this.lc=this.mc=this.Jb=this.fb=null)},e.ic.prototype.l=function(n){this.Jb=n,e.a.K.za(n,this.fb=this.s.bind(this))},e.T=function(){e.a.Ab(this,R),R.qb(this)};var R={qb:function(n){n.U={change:[]},n.sc=1},subscribe:function(n,r,s){var a=this;s=s||"change";var p=new e.ic(a,r?n.bind(r):n,function(){e.a.Pa(a.U[s],p),a.hb&&a.hb(s)});return a.Qa&&a.Qa(s),a.U[s]||(a.U[s]=[]),a.U[s].push(p),p},notifySubscribers:function(n,r){if(r=r||"change",r==="change"&&this.Gb(),this.Wa(r)){var s=r==="change"&&this.ed||this.U[r].slice(0);try{e.u.xc();for(var a=0,p;p=s[a];++a)p.Ib||p.lc(n)}finally{e.u.end()}}},ob:function(){return this.sc},Dd:function(n){return this.ob()!==n},Gb:function(){++this.sc},ub:function(n){var r=this,s=e.O(r),a,p,m,d,g;r.gb||(r.gb=r.notifySubscribers,r.notifySubscribers=F);var f=n(function(){r.Ja=!1,s&&d===r&&(d=r.nc?r.nc():r());var u=p||g&&r.sb(m,d);g=p=a=!1,u&&r.gb(m=d)});r.qc=function(u,y){y&&r.Ja||(g=!y),r.ed=r.U.change.slice(0),r.Ja=a=!0,d=u,f()},r.pc=function(u){a||(m=u,r.gb(u,"beforeChange"))},r.rc=function(){g=!0},r.gd=function(){r.sb(m,r.v(!0))&&(p=!0)}},Wa:function(n){return this.U[n]&&this.U[n].length},Bd:function(n){if(n)return this.U[n]&&this.U[n].length||0;var r=0;return e.a.P(this.U,function(s,a){s!=="dirty"&&(r+=a.length)}),r},sb:function(n,r){return!this.equalityComparer||!this.equalityComparer(n,r)},toString:function(){return"[object Object]"},extend:function(n){var r=this;return n&&e.a.P(n,function(s,a){var p=e.Ta[s];typeof p=="function"&&(r=p(r,a)||r)}),r}};e.L(R,"init",R.qb),e.L(R,"subscribe",R.subscribe),e.L(R,"extend",R.extend),e.L(R,"getSubscriptionsCount",R.Bd),e.a.Ba&&e.a.setPrototypeOf(R,Function.prototype),e.T.fn=R,e.Qc=function(n){return n!=null&&typeof n.subscribe=="function"&&typeof n.notifySubscribers=="function"},e.b("subscribable",e.T),e.b("isSubscribable",e.Qc),e.S=e.u=(function(){function n(m){s.push(a),a=m}function r(){a=s.pop()}var s=[],a,p=0;return{xc:n,end:r,cc:function(m){if(a){if(!e.Qc(m))throw Error("Only subscribable things can act as dependencies");a.od.call(a.pd,m,m.fd||(m.fd=++p))}},G:function(m,d,g){try{return n(),m.apply(d,g||[])}finally{r()}},qa:function(){if(a)return a.o.qa()},Va:function(){if(a)return a.o.Va()},Ya:function(){if(a)return a.Ya},o:function(){if(a)return a.o}}})(),e.b("computedContext",e.S),e.b("computedContext.getDependenciesCount",e.S.qa),e.b("computedContext.getDependencies",e.S.Va),e.b("computedContext.isInitial",e.S.Ya),e.b("computedContext.registerDependency",e.S.cc),e.b("ignoreDependencies",e.Yd=e.u.G);var Y=e.a.Da("_latestValue");e.ta=function(n){function r(){return 0<arguments.length?(r.sb(r[Y],arguments[0])&&(r.ya(),r[Y]=arguments[0],r.xa()),this):(e.u.cc(r),r[Y])}return r[Y]=n,e.a.Ba||e.a.extend(r,e.T.fn),e.T.fn.qb(r),e.a.Ab(r,Q),e.options.deferUpdates&&e.Ta.deferred(r,!0),r};var Q={equalityComparer:O,v:function(){return this[Y]},xa:function(){this.notifySubscribers(this[Y],"spectate"),this.notifySubscribers(this[Y])},ya:function(){this.notifySubscribers(this[Y],"beforeChange")}};e.a.Ba&&e.a.setPrototypeOf(Q,e.T.fn);var lt=e.ta.Ma="__ko_proto__";Q[lt]=e.ta,e.O=function(n){if((n=typeof n=="function"&&n[lt])&&n!==Q[lt]&&n!==e.o.fn[lt])throw Error("Invalid object that looks like an observable; possibly from another Knockout instance");return!!n},e.Za=function(n){return typeof n=="function"&&(n[lt]===Q[lt]||n[lt]===e.o.fn[lt]&&n.Nc)},e.b("observable",e.ta),e.b("isObservable",e.O),e.b("isWriteableObservable",e.Za),e.b("isWritableObservable",e.Za),e.b("observable.fn",Q),e.L(Q,"peek",Q.v),e.L(Q,"valueHasMutated",Q.xa),e.L(Q,"valueWillMutate",Q.ya),e.Ha=function(n){if(n=n||[],typeof n!="object"||!("length"in n))throw Error("The argument passed when initializing an observable array must be an array, or null, or undefined.");return n=e.ta(n),e.a.Ab(n,e.Ha.fn),n.extend({trackArrayChanges:!0})},e.Ha.fn={remove:function(n){for(var r=this.v(),s=[],a=typeof n!="function"||e.O(n)?function(d){return d===n}:n,p=0;p<r.length;p++){var m=r[p];if(a(m)){if(s.length===0&&this.ya(),r[p]!==m)throw Error("Array modified during remove; cannot remove item");s.push(m),r.splice(p,1),p--}}return s.length&&this.xa(),s},removeAll:function(n){if(n===t){var r=this.v(),s=r.slice(0);return this.ya(),r.splice(0,r.length),this.xa(),s}return n?this.remove(function(a){return 0<=e.a.A(n,a)}):[]},destroy:function(n){var r=this.v(),s=typeof n!="function"||e.O(n)?function(m){return m===n}:n;this.ya();for(var a=r.length-1;0<=a;a--){var p=r[a];s(p)&&(p._destroy=!0)}this.xa()},destroyAll:function(n){return n===t?this.destroy(function(){return!0}):n?this.destroy(function(r){return 0<=e.a.A(n,r)}):[]},indexOf:function(n){var r=this();return e.a.A(r,n)},replace:function(n,r){var s=this.indexOf(n);0<=s&&(this.ya(),this.v()[s]=r,this.xa())},sorted:function(n){var r=this().slice(0);return n?r.sort(n):r.sort()},reversed:function(){return this().slice(0).reverse()}},e.a.Ba&&e.a.setPrototypeOf(e.Ha.fn,e.ta.fn),e.a.D("pop push reverse shift sort splice unshift".split(" "),function(n){e.Ha.fn[n]=function(){var r=this.v();this.ya(),this.zc(r,n,arguments);var s=r[n].apply(r,arguments);return this.xa(),s===r?this:s}}),e.a.D(["slice"],function(n){e.Ha.fn[n]=function(){var r=this();return r[n].apply(r,arguments)}}),e.Pc=function(n){return e.O(n)&&typeof n.remove=="function"&&typeof n.push=="function"},e.b("observableArray",e.Ha),e.b("isObservableArray",e.Pc),e.Ta.trackArrayChanges=function(n,r){function s(){function v(){if(g){var C=[].concat(n.v()||[]),l;n.Wa("arrayChange")&&((!p||1<g)&&(p=e.a.Pb(f,C,n.Ob)),l=p),f=C,p=null,g=0,l&&l.length&&n.notifySubscribers(l,"arrayChange")}}a?v():(a=!0,d=n.subscribe(function(){++g},null,"spectate"),f=[].concat(n.v()||[]),p=null,m=n.subscribe(v))}if(n.Ob={},r&&typeof r=="object"&&e.a.extend(n.Ob,r),n.Ob.sparse=!0,!n.zc){var a=!1,p=null,m,d,g=0,f,u=n.Qa,y=n.hb;n.Qa=function(v){u&&u.call(n,v),v==="arrayChange"&&s()},n.hb=function(v){y&&y.call(n,v),v!=="arrayChange"||n.Wa("arrayChange")||(m&&m.s(),d&&d.s(),d=m=null,a=!1,f=t)},n.zc=function(v,C,l){function w(A,N,z){return _[_.length]={status:A,value:N,index:z}}if(a&&!g){var _=[],E=v.length,M=l.length,P=0;switch(C){case"push":P=E;case"unshift":for(C=0;C<M;C++)w("added",l[C],P+C);break;case"pop":P=E-1;case"shift":E&&w("deleted",v[P],P);break;case"splice":C=Math.min(Math.max(0,0>l[0]?E+l[0]:l[0]),E);for(var E=M===1?E:Math.min(C+(l[1]||0),E),M=C+M-2,P=Math.max(E,M),T=[],I=[],k=2;C<P;++C,++k)C<E&&I.push(w("deleted",v[C],C)),C<M&&T.push(w("added",l[k],C));e.a.Kc(I,T);break;default:return}p=_}}}};var V=e.a.Da("_state");e.o=e.$=function(n,r,s){function a(){if(0<arguments.length){if(typeof p=="function")p.apply(m.nb,arguments);else throw Error("Cannot write a value to a ko.computed unless you specify a 'write' option. If you wish to read the current value, don't pass any parameters.");return this}return m.ra||e.u.cc(a),(m.ka||m.J&&a.Xa())&&a.ha(),m.X}if(typeof n=="object"?s=n:(s=s||{},n&&(s.read=n)),typeof s.read!="function")throw Error("Pass a function that returns the value of the ko.computed");var p=s.write,m={X:t,sa:!0,ka:!0,rb:!1,jc:!1,ra:!1,wb:!1,J:!1,Wc:s.read,nb:r||s.owner,l:s.disposeWhenNodeIsRemoved||s.l||null,Sa:s.disposeWhen||s.Sa,Rb:null,I:{},V:0,Ic:null};return a[V]=m,a.Nc=typeof p=="function",e.a.Ba||e.a.extend(a,e.T.fn),e.T.fn.qb(a),e.a.Ab(a,q),s.pure?(m.wb=!0,m.J=!0,e.a.extend(a,Xt)):s.deferEvaluation&&e.a.extend(a,ie),e.options.deferUpdates&&e.Ta.deferred(a,!0),m.l&&(m.jc=!0,m.l.nodeType||(m.l=null)),m.J||s.deferEvaluation||a.ha(),m.l&&a.ja()&&e.a.K.za(m.l,m.Rb=function(){a.s()}),a};var q={equalityComparer:O,qa:function(){return this[V].V},Va:function(){var n=[];return e.a.P(this[V].I,function(r,s){n[s.Ka]=s.da}),n},Vb:function(n){if(!this[V].V)return!1;var r=this.Va();return e.a.A(r,n)!==-1?!0:!!e.a.Lb(r,function(s){return s.Vb&&s.Vb(n)})},uc:function(n,r,s){if(this[V].wb&&r===this)throw Error("A 'pure' computed must not be called recursively");this[V].I[n]=s,s.Ka=this[V].V++,s.La=r.ob()},Xa:function(){var n,r,s=this[V].I;for(n in s)if(Object.prototype.hasOwnProperty.call(s,n)&&(r=s[n],this.Ia&&r.da.Ja||r.da.Dd(r.La)))return!0},Jd:function(){this.Ia&&!this[V].rb&&this.Ia(!1)},ja:function(){var n=this[V];return n.ka||0<n.V},Rd:function(){this.Ja?this[V].ka&&(this[V].sa=!0):this.Hc()},$c:function(n){if(n.Hb){var r=n.subscribe(this.Jd,this,"dirty"),s=n.subscribe(this.Rd,this);return{da:n,s:function(){r.s(),s.s()}}}return n.subscribe(this.Hc,this)},Hc:function(){var n=this,r=n.throttleEvaluation;r&&0<=r?(clearTimeout(this[V].Ic),this[V].Ic=e.a.setTimeout(function(){n.ha(!0)},r)):n.Ia?n.Ia(!0):n.ha(!0)},ha:function(n){var r=this[V],s=r.Sa,a=!1;if(!r.rb&&!r.ra){if(r.l&&!e.a.Sb(r.l)||s&&s()){if(!r.jc){this.s();return}}else r.jc=!1;r.rb=!0;try{a=this.zd(n)}finally{r.rb=!1}return a}},zd:function(n){var r=this[V],a=!1,s=r.wb?t:!r.V,a={qd:this,mb:r.I,Qb:r.V};e.u.xc({pd:a,od:U,o:this,Ya:s}),r.I={},r.V=0;var p=this.yd(r,a);return r.V?a=this.sb(r.X,p):(this.s(),a=!0),a&&(r.J?this.Gb():this.notifySubscribers(r.X,"beforeChange"),r.X=p,this.notifySubscribers(r.X,"spectate"),!r.J&&n&&this.notifySubscribers(r.X),this.rc&&this.rc()),s&&this.notifySubscribers(r.X,"awake"),a},yd:function(n,r){try{var s=n.Wc;return n.nb?s.call(n.nb):s()}finally{e.u.end(),r.Qb&&!n.J&&e.a.P(r.mb,B),n.sa=n.ka=!1}},v:function(n){var r=this[V];return(r.ka&&(n||!r.V)||r.J&&this.Xa())&&this.ha(),r.X},ub:function(n){e.T.fn.ub.call(this,n),this.nc=function(){return this[V].J||(this[V].sa?this.ha():this[V].ka=!1),this[V].X},this.Ia=function(r){this.pc(this[V].X),this[V].ka=!0,r&&(this[V].sa=!0),this.qc(this,!r)}},s:function(){var n=this[V];!n.J&&n.I&&e.a.P(n.I,function(r,s){s.s&&s.s()}),n.l&&n.Rb&&e.a.K.yb(n.l,n.Rb),n.I=t,n.V=0,n.ra=!0,n.sa=!1,n.ka=!1,n.J=!1,n.l=t,n.Sa=t,n.Wc=t,this.Nc||(n.nb=t)}},Xt={Qa:function(n){var r=this,s=r[V];if(!s.ra&&s.J&&n=="change"){if(s.J=!1,s.sa||r.Xa())s.I=null,s.V=0,r.ha()&&r.Gb();else{var a=[];e.a.P(s.I,function(p,m){a[m.Ka]=p}),e.a.D(a,function(p,m){var d=s.I[p],g=r.$c(d.da);g.Ka=m,g.La=d.La,s.I[p]=g}),r.Xa()&&r.ha()&&r.Gb()}s.ra||r.notifySubscribers(s.X,"awake")}},hb:function(n){var r=this[V];r.ra||n!="change"||this.Wa("change")||(e.a.P(r.I,function(s,a){a.s&&(r.I[s]={da:a.da,Ka:a.Ka,La:a.La},a.s())}),r.J=!0,this.notifySubscribers(t,"asleep"))},ob:function(){var n=this[V];return n.J&&(n.sa||this.Xa())&&this.ha(),e.T.fn.ob.call(this)}},ie={Qa:function(n){n!="change"&&n!="beforeChange"||this.v()}};e.a.Ba&&e.a.setPrototypeOf(q,e.T.fn);var vt=e.ta.Ma;q[vt]=e.o,e.Oc=function(n){return typeof n=="function"&&n[vt]===q[vt]},e.Fd=function(n){return e.Oc(n)&&n[V]&&n[V].wb},e.b("computed",e.o),e.b("dependentObservable",e.o),e.b("isComputed",e.Oc),e.b("isPureComputed",e.Fd),e.b("computed.fn",q),e.L(q,"peek",q.v),e.L(q,"dispose",q.s),e.L(q,"isActive",q.ja),e.L(q,"getDependenciesCount",q.qa),e.L(q,"getDependencies",q.Va),e.xb=function(n,r){return typeof n=="function"?e.o(n,r,{pure:!0}):(n=e.a.extend({},n),n.pure=!0,e.o(n,r))},e.b("pureComputed",e.xb),(function(){function n(a,p,m){if(m=m||new s,a=p(a),typeof a!="object"||a===null||a===t||a instanceof RegExp||a instanceof Date||a instanceof String||a instanceof Number||a instanceof Boolean)return a;var d=a instanceof Array?[]:{};return m.save(a,d),r(a,function(g){var f=p(a[g]);switch(typeof f){case"boolean":case"number":case"string":case"function":d[g]=f;break;case"object":case"undefined":var u=m.get(f);d[g]=u!==t?u:n(f,p,m)}}),d}function r(a,p){if(a instanceof Array){for(var m=0;m<a.length;m++)p(m);typeof a.toJSON=="function"&&p("toJSON")}else for(m in a)p(m)}function s(){this.keys=[],this.values=[]}e.ad=function(a){if(arguments.length==0)throw Error("When calling ko.toJS, pass the object you want to convert.");return n(a,function(p){for(var m=0;e.O(p)&&10>m;m++)p=p();return p})},e.toJSON=function(a,p,m){return a=e.ad(a),e.a.hc(a,p,m)},s.prototype={constructor:s,save:function(a,p){var m=e.a.A(this.keys,a);0<=m?this.values[m]=p:(this.keys.push(a),this.values.push(p))},get:function(a){return a=e.a.A(this.keys,a),0<=a?this.values[a]:t}}})(),e.b("toJS",e.ad),e.b("toJSON",e.toJSON),e.Wd=function(n,r,s){function a(p){var m=e.xb(n,s).extend({ma:"always"}),d=m.subscribe(function(g){g&&(d.s(),p(g))});return m.notifySubscribers(m.v()),d}return typeof Promise!="function"||r?a(r.bind(s)):new Promise(a)},e.b("when",e.Wd),(function(){e.w={M:function(n){switch(e.a.R(n)){case"option":return n.__ko__hasDomDataOptionValue__===!0?e.a.g.get(n,e.c.options.$b):7>=e.a.W?n.getAttributeNode("value")&&n.getAttributeNode("value").specified?n.value:n.text:n.value;case"select":return 0<=n.selectedIndex?e.w.M(n.options[n.selectedIndex]):t;default:return n.value}},cb:function(n,r,s){switch(e.a.R(n)){case"option":typeof r=="string"?(e.a.g.set(n,e.c.options.$b,t),"__ko__hasDomDataOptionValue__"in n&&delete n.__ko__hasDomDataOptionValue__,n.value=r):(e.a.g.set(n,e.c.options.$b,r),n.__ko__hasDomDataOptionValue__=!0,n.value=typeof r=="number"?r:"");break;case"select":(r===""||r===null)&&(r=t);for(var a=-1,p=0,m=n.options.length,d;p<m;++p)if(d=e.w.M(n.options[p]),d==r||d===""&&r===t){a=p;break}(s||0<=a||r===t&&1<n.size)&&(n.selectedIndex=a,e.a.W===6&&e.a.setTimeout(function(){n.selectedIndex=a},0));break;default:(r===null||r===t)&&(r=""),n.value=r}}}})(),e.b("selectExtensions",e.w),e.b("selectExtensions.readValue",e.w.M),e.b("selectExtensions.writeValue",e.w.cb),e.m=(function(){function n(g){g=e.a.Db(g),g.charCodeAt(0)===123&&(g=g.slice(1,-1)),g+=`
,`;var f=[],u=g.match(a),y,v=[],C=0;if(1<u.length){for(var l=0,w;w=u[l];++l){var _=w.charCodeAt(0);if(_===44){if(0>=C){f.push(y&&v.length?{key:y,value:v.join("")}:{unknown:y||v.join("")}),y=C=0,v=[];continue}}else if(_===58){if(!C&&!y&&v.length===1){y=v.pop();continue}}else{if(_===47&&1<w.length&&(w.charCodeAt(1)===47||w.charCodeAt(1)===42))continue;_===47&&l&&1<w.length?(_=u[l-1].match(p))&&!m[_[0]]&&(g=g.substr(g.indexOf(w)+1),u=g.match(a),l=-1,w="/"):_===40||_===123||_===91?++C:_===41||_===125||_===93?--C:y||v.length||_!==34&&_!==39||(w=w.slice(1,-1))}v.push(w)}if(0<C)throw Error("Unbalanced parentheses, braces, or brackets")}return f}var r=["true","false","null","undefined"],s=/^(?:[$_a-z][$\w]*|(.+)(\.\s*[$_a-z][$\w]*|\[.+\]))$/i,a=RegExp(`"(?:\\\\.|[^"])*"|'(?:\\\\.|[^'])*'|\`(?:\\\\.|[^\`])*\`|/\\*(?:[^*]|\\*+[^*/])*\\*+/|//.*
|/(?:\\\\.|[^/])+/w*|[^\\s:,/][^,"'\`{}()/:[\\]]*[^\\s,"'\`{}()/:[\\]]|[^\\s]`,"g"),p=/[\])"'A-Za-z0-9_$]+$/,m={in:1,return:1,typeof:1},d={};return{Ra:[],wa:d,ac:n,vb:function(g,f){function u(_,E){var M;if(!l){var P=e.getBindingHandler(_);if(P&&P.preprocess&&!(E=P.preprocess(E,_,u)))return;(P=d[_])&&(M=E,0<=e.a.A(r,M)?M=!1:(P=M.match(s),M=P===null?!1:P[1]?"Object("+P[1]+")"+P[2]:M),P=M),P&&v.push("'"+(typeof d[_]=="string"?d[_]:_)+"':function(_z){"+M+"=_z}")}C&&(E="function(){return "+E+" }"),y.push("'"+_+"':"+E)}f=f||{};var y=[],v=[],C=f.valueAccessors,l=f.bindingParams,w=typeof g=="string"?n(g):g;return e.a.D(w,function(_){u(_.key||_.unknown,_.value)}),v.length&&u("_ko_property_writers","{"+v.join(",")+" }"),y.join(",")},Id:function(g,f){for(var u=0;u<g.length;u++)if(g[u].key==f)return!0;return!1},eb:function(g,f,u,y,v){g&&e.O(g)?!e.Za(g)||v&&g.v()===y||g(y):(g=f.get("_ko_property_writers"))&&g[u]&&g[u](y)}}})(),e.b("expressionRewriting",e.m),e.b("expressionRewriting.bindingRewriteValidators",e.m.Ra),e.b("expressionRewriting.parseObjectLiteral",e.m.ac),e.b("expressionRewriting.preProcessBindings",e.m.vb),e.b("expressionRewriting._twoWayBindings",e.m.wa),e.b("jsonExpressionRewriting",e.m),e.b("jsonExpressionRewriting.insertPropertyAccessorsIntoJson",e.m.vb),(function(){function n(u){return u.nodeType==8&&m.test(p?u.text:u.nodeValue)}function r(u){return u.nodeType==8&&d.test(p?u.text:u.nodeValue)}function s(u,y){for(var v=u,C=1,l=[];v=v.nextSibling;){if(r(v)&&(e.a.g.set(v,f,!0),C--,C===0))return l;l.push(v),n(v)&&C++}if(!y)throw Error("Cannot find closing comment tag to match: "+u.nodeValue);return null}function a(u,y){var v=s(u,y);return v?0<v.length?v[v.length-1].nextSibling:u.nextSibling:null}var p=o&&o.createComment("test").text==="<!--test-->",m=p?/^\x3c!--\s*ko(?:\s+([\s\S]+))?\s*--\x3e$/:/^\s*ko(?:\s+([\s\S]+))?\s*$/,d=p?/^\x3c!--\s*\/ko\s*--\x3e$/:/^\s*\/ko\s*$/,g={ul:!0,ol:!0},f="__ko_matchedEndComment__";e.h={ea:{},childNodes:function(u){return n(u)?s(u):u.childNodes},Ea:function(u){if(n(u)){u=e.h.childNodes(u);for(var y=0,v=u.length;y<v;y++)e.removeNode(u[y])}else e.a.Tb(u)},va:function(u,y){if(n(u)){e.h.Ea(u);for(var v=u.nextSibling,C=0,l=y.length;C<l;C++)v.parentNode.insertBefore(y[C],v)}else e.a.va(u,y)},Vc:function(u,y){var v;n(u)?(v=u.nextSibling,u=u.parentNode):v=u.firstChild,v?y!==v&&u.insertBefore(y,v):u.appendChild(y)},Wb:function(u,y,v){v?(v=v.nextSibling,n(u)&&(u=u.parentNode),v?y!==v&&u.insertBefore(y,v):u.appendChild(y)):e.h.Vc(u,y)},firstChild:function(u){if(n(u))return!u.nextSibling||r(u.nextSibling)?null:u.nextSibling;if(u.firstChild&&r(u.firstChild))throw Error("Found invalid end comment, as the first child of "+u);return u.firstChild},nextSibling:function(u){if(n(u)&&(u=a(u)),u.nextSibling&&r(u.nextSibling)){var y=u.nextSibling;if(r(y)&&!e.a.g.get(y,f))throw Error("Found end comment without a matching opening comment, as child of "+u);return null}return u.nextSibling},Cd:n,Vd:function(u){return(u=(p?u.text:u.nodeValue).match(m))?u[1]:null},Sc:function(u){if(g[e.a.R(u)]){var y=u.firstChild;if(y)do if(y.nodeType===1){var v;v=y.firstChild;var C=null;if(v)do if(C)C.push(v);else if(n(v)){var l=a(v,!0);l?v=l:C=[v]}else r(v)&&(C=[v]);while(v=v.nextSibling);if(v=C)for(C=y.nextSibling,l=0;l<v.length;l++)C?u.insertBefore(v[l],C):u.appendChild(v[l])}while(y=y.nextSibling)}}}})(),e.b("virtualElements",e.h),e.b("virtualElements.allowedBindings",e.h.ea),e.b("virtualElements.emptyNode",e.h.Ea),e.b("virtualElements.insertAfter",e.h.Wb),e.b("virtualElements.prepend",e.h.Vc),e.b("virtualElements.setDomNodeChildren",e.h.va),(function(){e.ga=function(){this.nd={}},e.a.extend(e.ga.prototype,{nodeHasBindings:function(n){switch(n.nodeType){case 1:return n.getAttribute("data-bind")!=null||e.j.getComponentNameForNode(n);case 8:return e.h.Cd(n);default:return!1}},getBindings:function(n,r){var s=this.getBindingsString(n,r),s=s?this.parseBindingsString(s,r,n):null;return e.j.tc(s,n,r,!1)},getBindingAccessors:function(n,r){var s=this.getBindingsString(n,r),s=s?this.parseBindingsString(s,r,n,{valueAccessors:!0}):null;return e.j.tc(s,n,r,!0)},getBindingsString:function(n){switch(n.nodeType){case 1:return n.getAttribute("data-bind");case 8:return e.h.Vd(n);default:return null}},parseBindingsString:function(n,r,s,a){try{var p=this.nd,m=n+(a&&a.valueAccessors||""),d;if(!(d=p[m])){var g,f="with($context){with($data||{}){return{"+e.m.vb(n,a)+"}}}";g=new Function("$context","$element",f),d=p[m]=g}return d(r,s)}catch(u){throw u.message=`Unable to parse bindings.
Bindings value: `+n+`
Message: `+u.message,u}}}),e.ga.instance=new e.ga})(),e.b("bindingProvider",e.ga),(function(){function n(P){var T=(P=e.a.g.get(P,M))&&P.N;T&&(P.N=null,T.Tc())}function r(P,T,I){this.node=P,this.yc=T,this.kb=[],this.H=!1,T.N||e.a.K.za(P,n),I&&I.N&&(I.N.kb.push(P),this.Kb=I)}function s(P){return function(){return P}}function a(P){return P()}function p(P){return e.a.Ga(e.u.G(P),function(T,I){return function(){return P()[I]}})}function m(P,T,I){return typeof P=="function"?p(P.bind(null,T,I)):e.a.Ga(P,s)}function d(P,T){return p(this.getBindings.bind(this,P,T))}function g(P,T){var I=e.h.firstChild(T);if(I){var k,A=e.ga.instance,N=A.preprocessNode;if(N){for(;k=I;)I=e.h.nextSibling(k),N.call(A,k);I=e.h.firstChild(T)}for(;k=I;)I=e.h.nextSibling(k),f(P,k)}e.i.ma(T,e.i.H)}function f(P,T){var I=P,k=T.nodeType===1;k&&e.h.Sc(T),(k||e.ga.instance.nodeHasBindings(T))&&(I=y(T,null,P).bindingContextForDescendants),I&&!_[e.a.R(T)]&&g(I,T)}function u(P){var T=[],I={},k=[];return e.a.P(P,function A(N){if(!I[N]){var z=e.getBindingHandler(N);z&&(z.after&&(k.push(N),e.a.D(z.after,function(Et){if(P[Et]){if(e.a.A(k,Et)!==-1)throw Error("Cannot combine the following bindings, because they have a cyclic dependency: "+k.join(", "));A(Et)}}),k.length--),T.push({key:N,Mc:z})),I[N]=!0}}),T}function y(P,T,I){var k=e.a.g.Ub(P,M,{}),A=k.hd;if(!T){if(A)throw Error("You cannot apply bindings multiple times to the same element.");k.hd=!0}A||(k.context=I),k.Zb||(k.Zb={});var N;if(T&&typeof T!="function")N=T;else{var z=e.ga.instance,Et=z.getBindingAccessors||d,ft=e.$(function(){return(N=T?T(I,P):Et.call(z,P,I))&&(I[C]&&I[C](),I[w]&&I[w]()),N},null,{l:P});N&&ft.ja()||(ft=null)}var Ht=I,wt;if(N){var Vt=function(){return e.a.Ga(ft?ft():N,a)},Qt=ft?function(G){return function(){return a(ft()[G])}}:function(G){return N[G]};Vt.get=function(G){return N[G]&&a(Qt(G))},Vt.has=function(G){return G in N},e.i.H in N&&e.i.subscribe(P,e.i.H,function(){var G=(0,N[e.i.H])();if(G){var ne=e.h.childNodes(P);ne.length&&G(ne,e.Ec(ne[0]))}}),e.i.pa in N&&(Ht=e.i.Cb(P,I),e.i.subscribe(P,e.i.pa,function(){var G=(0,N[e.i.pa])();G&&e.h.firstChild(P)&&G(P)})),k=u(N),e.a.D(k,function(G){var ne=G.Mc.init,we=G.Mc.update,oe=G.key;if(P.nodeType===8&&!e.h.ea[oe])throw Error("The binding '"+oe+"' cannot be used with virtual elements");try{typeof ne=="function"&&e.u.G(function(){var be=ne(P,Qt(oe),Vt,Ht.$data,Ht);if(be&&be.controlsDescendantBindings){if(wt!==t)throw Error("Multiple bindings ("+wt+" and "+oe+") are trying to control descendant bindings of the same element. You cannot use these bindings together on the same element.");wt=oe}}),typeof we=="function"&&e.$(function(){we(P,Qt(oe),Vt,Ht.$data,Ht)},null,{l:P})}catch(be){throw be.message='Unable to process binding "'+oe+": "+N[oe]+`"
Message: `+be.message,be}})}return k=wt===t,{shouldBindDescendants:k,bindingContextForDescendants:k&&Ht}}function v(P,T){return P&&P instanceof e.fa?P:new e.fa(P,t,t,T)}var C=e.a.Da("_subscribable"),l=e.a.Da("_ancestorBindingInfo"),w=e.a.Da("_dataDependency");e.c={};var _={script:!0,textarea:!0,template:!0};e.getBindingHandler=function(P){return e.c[P]};var E={};e.fa=function(P,T,I,k,A){function N(){var Qt=Ht?ft():ft,G=e.a.f(Qt);return T?(e.a.extend(z,T),l in T&&(z[l]=T[l])):(z.$parents=[],z.$root=G,z.ko=e),z[C]=wt,Et?G=z.$data:(z.$rawData=Qt,z.$data=G),I&&(z[I]=G),k&&k(z,T,G),T&&T[C]&&!e.S.o().Vb(T[C])&&T[C](),Vt&&(z[w]=Vt),z.$data}var z=this,Et=P===E,ft=Et?t:P,Ht=typeof ft=="function"&&!e.O(ft),wt,Vt=A&&A.dataDependency;A&&A.exportDependencies?N():(wt=e.xb(N),wt.v(),wt.ja()?wt.equalityComparer=null:z[C]=t)},e.fa.prototype.createChildContext=function(P,T,I,k){if(!k&&T&&typeof T=="object"&&(k=T,T=k.as,I=k.extend),T&&k&&k.noChildContext){var A=typeof P=="function"&&!e.O(P);return new e.fa(E,this,null,function(N){I&&I(N),N[T]=A?P():P},k)}return new e.fa(P,this,T,function(N,z){N.$parentContext=z,N.$parent=z.$data,N.$parents=(z.$parents||[]).slice(0),N.$parents.unshift(N.$parent),I&&I(N)},k)},e.fa.prototype.extend=function(P,T){return new e.fa(E,this,null,function(I){e.a.extend(I,typeof P=="function"?P(I):P)},T)};var M=e.a.g.Z();r.prototype.Tc=function(){this.Kb&&this.Kb.N&&this.Kb.N.sd(this.node)},r.prototype.sd=function(P){e.a.Pa(this.kb,P),!this.kb.length&&this.H&&this.Cc()},r.prototype.Cc=function(){this.H=!0,this.yc.N&&!this.kb.length&&(this.yc.N=null,e.a.K.yb(this.node,n),e.i.ma(this.node,e.i.pa),this.Tc())},e.i={H:"childrenComplete",pa:"descendantsComplete",subscribe:function(P,T,I,k,A){var N=e.a.g.Ub(P,M,{});return N.Fa||(N.Fa=new e.T),A&&A.notifyImmediately&&N.Zb[T]&&e.u.G(I,k,[P]),N.Fa.subscribe(I,k,T)},ma:function(P,T){var I=e.a.g.get(P,M);if(I&&(I.Zb[T]=!0,I.Fa&&I.Fa.notifySubscribers(P,T),T==e.i.H)){if(I.N)I.N.Cc();else if(I.N===t&&I.Fa&&I.Fa.Wa(e.i.pa))throw Error("descendantsComplete event not supported for bindings on this node")}},Cb:function(P,T){var I=e.a.g.Ub(P,M,{});return I.N||(I.N=new r(P,I,T[l])),T[l]==I?T:T.extend(function(k){k[l]=I})}},e.Td=function(P){return(P=e.a.g.get(P,M))&&P.context},e.ib=function(P,T,I){return P.nodeType===1&&e.h.Sc(P),y(P,T,v(I))},e.ld=function(P,T,I){return I=v(I),e.ib(P,m(T,I,P),I)},e.Oa=function(P,T){T.nodeType!==1&&T.nodeType!==8||g(v(P),T)},e.vc=function(P,T,I){if(!h&&i.jQuery&&(h=i.jQuery),2>arguments.length){if(T=o.body,!T)throw Error("ko.applyBindings: could not find document.body; has the document been loaded?")}else if(!T||T.nodeType!==1&&T.nodeType!==8)throw Error("ko.applyBindings: first parameter should be your view model; second parameter should be a DOM node");f(v(P,I),T)},e.Dc=function(P){return!P||P.nodeType!==1&&P.nodeType!==8?t:e.Td(P)},e.Ec=function(P){return(P=e.Dc(P))?P.$data:t},e.b("bindingHandlers",e.c),e.b("bindingEvent",e.i),e.b("bindingEvent.subscribe",e.i.subscribe),e.b("bindingEvent.startPossiblyAsyncContentBinding",e.i.Cb),e.b("applyBindings",e.vc),e.b("applyBindingsToDescendants",e.Oa),e.b("applyBindingAccessorsToNode",e.ib),e.b("applyBindingsToNode",e.ld),e.b("contextFor",e.Dc),e.b("dataFor",e.Ec)})(),(function(n){function r(d,g){var f=Object.prototype.hasOwnProperty.call(p,d)?p[d]:n,u;f?f.subscribe(g):(f=p[d]=new e.T,f.subscribe(g),s(d,function(y,v){var C=!(!v||!v.synchronous);m[d]={definition:y,Gd:C},delete p[d],u||C?f.notifySubscribers(y):e.na.zb(function(){f.notifySubscribers(y)})}),u=!0)}function s(d,g){a("getConfig",[d],function(f){f?a("loadComponent",[d,f],function(u){g(u,f)}):g(null,null)})}function a(d,g,f,u){u||(u=e.j.loaders.slice(0));var y=u.shift();if(y){var v=y[d];if(v){var C=!1;if(v.apply(y,g.concat(function(l){C?f(null):l!==null?f(l):a(d,g,f,u)}))!==n&&(C=!0,!y.suppressLoaderExceptions))throw Error("Component loaders must supply values by invoking the callback, not by returning values synchronously.")}else a(d,g,f,u)}else f(null)}var p={},m={};e.j={get:function(d,g){var f=Object.prototype.hasOwnProperty.call(m,d)?m[d]:n;f?f.Gd?e.u.G(function(){g(f.definition)}):e.na.zb(function(){g(f.definition)}):r(d,g)},Bc:function(d){delete m[d]},oc:a},e.j.loaders=[],e.b("components",e.j),e.b("components.get",e.j.get),e.b("components.clearCachedDefinition",e.j.Bc)})(),(function(){function n(f,u,y,v){function C(){--w===0&&v(l)}var l={},w=2,_=y.template;y=y.viewModel,_?p(u,_,function(E){e.j.oc("loadTemplate",[f,E],function(M){l.template=M,C()})}):C(),y?p(u,y,function(E){e.j.oc("loadViewModel",[f,E],function(M){l[g]=M,C()})}):C()}function r(f,u,y){if(typeof u=="function")y(function(C){return new u(C)});else if(typeof u[g]=="function")y(u[g]);else if("instance"in u){var v=u.instance;y(function(){return v})}else"viewModel"in u?r(f,u.viewModel,y):f("Unknown viewModel value: "+u)}function s(f){switch(e.a.R(f)){case"script":return e.a.ua(f.text);case"textarea":return e.a.ua(f.value);case"template":if(a(f.content))return e.a.Ca(f.content.childNodes)}return e.a.Ca(f.childNodes)}function a(f){return i.DocumentFragment?f instanceof DocumentFragment:f&&f.nodeType===11}function p(f,u,y){typeof u.require=="string"?S||i.require?(S||i.require)([u.require],function(v){v&&typeof v=="object"&&v.Xd&&v.default&&(v=v.default),y(v)}):f("Uses require, but no AMD loader is present"):y(u)}function m(f){return function(u){throw Error("Component '"+f+"': "+u)}}var d={};e.j.register=function(f,u){if(!u)throw Error("Invalid configuration for "+f);if(e.j.tb(f))throw Error("Component "+f+" is already registered");d[f]=u},e.j.tb=function(f){return Object.prototype.hasOwnProperty.call(d,f)},e.j.unregister=function(f){delete d[f],e.j.Bc(f)},e.j.Fc={getConfig:function(f,u){u(e.j.tb(f)?d[f]:null)},loadComponent:function(f,u,y){var v=m(f);p(v,u,function(C){n(f,v,C,y)})},loadTemplate:function(f,u,y){if(f=m(f),typeof u=="string")y(e.a.ua(u));else if(u instanceof Array)y(u);else if(a(u))y(e.a.la(u.childNodes));else if(u.element)if(u=u.element,i.HTMLElement?u instanceof HTMLElement:u&&u.tagName&&u.nodeType===1)y(s(u));else if(typeof u=="string"){var v=o.getElementById(u);v?y(s(v)):f("Cannot find element with ID "+u)}else f("Unknown element type: "+u);else f("Unknown template value: "+u)},loadViewModel:function(f,u,y){r(m(f),u,y)}};var g="createViewModel";e.b("components.register",e.j.register),e.b("components.isRegistered",e.j.tb),e.b("components.unregister",e.j.unregister),e.b("components.defaultLoader",e.j.Fc),e.j.loaders.push(e.j.Fc),e.j.dd=d})(),(function(){function n(s,a){var p=s.getAttribute("params");if(p){var p=r.parseBindingsString(p,a,s,{valueAccessors:!0,bindingParams:!0}),p=e.a.Ga(p,function(g){return e.o(g,null,{l:s})}),m=e.a.Ga(p,function(g){var f=g.v();return g.ja()?e.o({read:function(){return e.a.f(g())},write:e.Za(f)&&function(u){g()(u)},l:s}):f});return Object.prototype.hasOwnProperty.call(m,"$raw")||(m.$raw=p),m}return{$raw:{}}}e.j.getComponentNameForNode=function(s){var a=e.a.R(s);if(e.j.tb(a)&&(a.indexOf("-")!=-1||""+s=="[object HTMLUnknownElement]"||8>=e.a.W&&s.tagName===a))return a},e.j.tc=function(s,a,p,m){if(a.nodeType===1){var d=e.j.getComponentNameForNode(a);if(d){if(s=s||{},s.component)throw Error('Cannot use the "component" binding on a custom element matching a component');var g={name:d,params:n(a,p)};s.component=m?function(){return g}:g}}return s};var r=new e.ga;9>e.a.W&&(e.j.register=(function(s){return function(a){return s.apply(this,arguments)}})(e.j.register),o.createDocumentFragment=(function(s){return function(){var a=s(),p=e.j.dd,m;for(m in p);return a}})(o.createDocumentFragment))})(),(function(){function n(a,p,m){if(p=p.template,!p)throw Error("Component '"+a+"' has no template");a=e.a.Ca(p),e.h.va(m,a)}function r(a,p,m){var d=a.createViewModel;return d?d.call(a,p,m):p}var s=0;e.c.component={init:function(a,p,m,d,g){function f(){var l=u&&u.dispose;typeof l=="function"&&l.call(u),v&&v.s(),y=u=v=null}var u,y,v,C=e.a.la(e.h.childNodes(a));return e.h.Ea(a),e.a.K.za(a,f),e.o(function(){var l=e.a.f(p()),w,_;if(typeof l=="string"?w=l:(w=e.a.f(l.name),_=e.a.f(l.params)),!w)throw Error("No component name specified");var E=e.i.Cb(a,g),M=y=++s;e.j.get(w,function(P){if(y===M){if(f(),!P)throw Error("Unknown component '"+w+"'");n(w,P,a);var T=r(P,_,{element:a,templateNodes:C});P=E.createChildContext(T,{extend:function(I){I.$component=T,I.$componentTemplateNodes=C}}),T&&T.koDescendantsComplete&&(v=e.i.subscribe(a,e.i.pa,T.koDescendantsComplete,T)),u=T,e.Oa(P,a)}})},null,{l:a}),{controlsDescendantBindings:!0}}},e.h.ea.component=!0})();var nt={class:"className",for:"htmlFor"};e.c.attr={update:function(n,r){var s=e.a.f(r())||{};e.a.P(s,function(a,p){p=e.a.f(p);var m=a.indexOf(":"),m="lookupNamespaceURI"in n&&0<m&&n.lookupNamespaceURI(a.substr(0,m)),d=p===!1||p===null||p===t;d?m?n.removeAttributeNS(m,a):n.removeAttribute(a):p=p.toString(),8>=e.a.W&&a in nt?(a=nt[a],d?n.removeAttribute(a):n[a]=p):d||(m?n.setAttributeNS(m,a,p):n.setAttribute(a,p)),a==="name"&&e.a.Yc(n,d?"":p)})}},(function(){e.c.checked={after:["value","attr"],init:function(n,r,s){function a(){var l=n.checked,w=m();if(!e.S.Ya()&&(l||!g&&!e.S.qa())){var _=e.u.G(r);if(u){var E=y?_.v():_,M=C;C=w,M!==w?l&&(e.a.Na(E,w,!0),e.a.Na(E,M,!1)):e.a.Na(E,w,l),y&&e.Za(_)&&_(E)}else d&&(w===t?w=l:l||(w=t)),e.m.eb(_,s,"checked",w,!0)}}function p(){var l=e.a.f(r()),w=m();u?(n.checked=0<=e.a.A(l,w),C=w):n.checked=d&&w===t?!!l:m()===l}var m=e.xb(function(){if(s.has("checkedValue"))return e.a.f(s.get("checkedValue"));if(v)return s.has("value")?e.a.f(s.get("value")):n.value}),d=n.type=="checkbox",g=n.type=="radio";if(d||g){var f=r(),u=d&&e.a.f(f)instanceof Array,y=!(u&&f.push&&f.splice),v=g||u,C=u?m():t;g&&!n.name&&e.c.uniqueName.init(n,function(){return!0}),e.o(a,null,{l:n}),e.a.B(n,"click",a),e.o(p,null,{l:n}),f=t}}},e.m.wa.checked=!0,e.c.checkedValue={update:function(n,r){n.value=e.a.f(r())}}})(),e.c.class={update:function(n,r){var s=e.a.Db(e.a.f(r()));e.a.Eb(n,n.__ko__cssValue,!1),n.__ko__cssValue=s,e.a.Eb(n,s,!0)}},e.c.css={update:function(n,r){var s=e.a.f(r());s!==null&&typeof s=="object"?e.a.P(s,function(a,p){p=e.a.f(p),e.a.Eb(n,a,p)}):e.c.class.update(n,r)}},e.c.enable={update:function(n,r){var s=e.a.f(r());s&&n.disabled?n.removeAttribute("disabled"):s||n.disabled||(n.disabled=!0)}},e.c.disable={update:function(n,r){e.c.enable.update(n,function(){return!e.a.f(r())})}},e.c.event={init:function(n,r,s,a,p){var m=r()||{};e.a.P(m,function(d){typeof d=="string"&&e.a.B(n,d,function(g){var f,u=r()[d];if(u){try{var y=e.a.la(arguments);a=p.$data,y.unshift(a),f=u.apply(a,y)}finally{f!==!0&&(g.preventDefault?g.preventDefault():g.returnValue=!1)}s.get(d+"Bubble")===!1&&(g.cancelBubble=!0,g.stopPropagation&&g.stopPropagation())}})})}},e.c.foreach={Rc:function(n){return function(){var r=n(),s=e.a.bc(r);return!s||typeof s.length=="number"?{foreach:r,templateEngine:e.ba.Ma}:(e.a.f(r),{foreach:s.data,as:s.as,noChildContext:s.noChildContext,includeDestroyed:s.includeDestroyed,afterAdd:s.afterAdd,beforeRemove:s.beforeRemove,afterRender:s.afterRender,beforeMove:s.beforeMove,afterMove:s.afterMove,templateEngine:e.ba.Ma})}},init:function(n,r){return e.c.template.init(n,e.c.foreach.Rc(r))},update:function(n,r,s,a,p){return e.c.template.update(n,e.c.foreach.Rc(r),s,a,p)}},e.m.Ra.foreach=!1,e.h.ea.foreach=!0,e.c.hasfocus={init:function(n,r,s){function a(d){n.__ko_hasfocusUpdating=!0;var g=n.ownerDocument;if("activeElement"in g){var f;try{f=g.activeElement}catch{f=g.body}d=f===n}g=r(),e.m.eb(g,s,"hasfocus",d,!0),n.__ko_hasfocusLastValue=d,n.__ko_hasfocusUpdating=!1}var p=a.bind(null,!0),m=a.bind(null,!1);e.a.B(n,"focus",p),e.a.B(n,"focusin",p),e.a.B(n,"blur",m),e.a.B(n,"focusout",m),n.__ko_hasfocusLastValue=!1},update:function(n,r){var s=!!e.a.f(r());n.__ko_hasfocusUpdating||n.__ko_hasfocusLastValue===s||(s?n.focus():n.blur(),!s&&n.__ko_hasfocusLastValue&&n.ownerDocument.body.focus(),e.u.G(e.a.Fb,null,[n,s?"focusin":"focusout"]))}},e.m.wa.hasfocus=!0,e.c.hasFocus=e.c.hasfocus,e.m.wa.hasFocus="hasfocus",e.c.html={init:function(){return{controlsDescendantBindings:!0}},update:function(n,r){e.a.fc(n,r())}},(function(){function n(r,s,a){e.c[r]={init:function(p,m,d,g,f){var u,y,v={},C,l,w;if(s){g=d.get("as");var _=d.get("noChildContext");w=!(g&&_),v={as:g,noChildContext:_,exportDependencies:w}}return l=(C=d.get("completeOn")=="render")||d.has(e.i.pa),e.o(function(){var E=e.a.f(m()),M=!a!=!E,P=!y,T;(w||M!==u)&&(l&&(f=e.i.Cb(p,f)),M&&((!s||w)&&(v.dataDependency=e.S.o()),T=s?f.createChildContext(typeof E=="function"?E:m,v):e.S.qa()?f.extend(null,v):f),P&&e.S.qa()&&(y=e.a.Ca(e.h.childNodes(p),!0)),M?(P||e.h.va(p,e.a.Ca(y)),e.Oa(T,p)):(e.h.Ea(p),C||e.i.ma(p,e.i.H)),u=M)},null,{l:p}),{controlsDescendantBindings:!0}}},e.m.Ra[r]=!1,e.h.ea[r]=!0}n("if"),n("ifnot",!1,!0),n("with",!0)})(),e.c.let={init:function(n,r,s,a,p){return r=p.extend(r),e.Oa(r,n),{controlsDescendantBindings:!0}}},e.h.ea.let=!0;var ot={};e.c.options={init:function(n){if(e.a.R(n)!=="select")throw Error("options binding applies only to SELECT elements");for(;0<n.length;)n.remove(0);return{controlsDescendantBindings:!0}},update:function(n,r,s){function a(){return e.a.jb(n.options,function(_){return _.selected})}function p(_,E,M){var P=typeof E;return P=="function"?E(_):P=="string"?_[E]:M}function m(_,E){if(l&&u)e.i.ma(n,e.i.H);else if(C.length){var M=0<=e.a.A(C,e.w.M(E[0]));e.a.Zc(E[0],M),l&&!M&&e.u.G(e.a.Fb,null,[n,"change"])}}var d=n.multiple,g=n.length!=0&&d?n.scrollTop:null,f=e.a.f(r()),u=s.get("valueAllowUnset")&&s.has("value"),y=s.get("optionsIncludeDestroyed");r={};var v,C=[];u||(d?C=e.a.Mb(a(),e.w.M):0<=n.selectedIndex&&C.push(e.w.M(n.options[n.selectedIndex]))),f&&(typeof f.length>"u"&&(f=[f]),v=e.a.jb(f,function(_){return y||_===t||_===null||!e.a.f(_._destroy)}),s.has("optionsCaption")&&(f=e.a.f(s.get("optionsCaption")),f!==null&&f!==t&&v.unshift(ot)));var l=!1;if(r.beforeRemove=function(_){n.removeChild(_)},f=m,s.has("optionsAfterRender")&&typeof s.get("optionsAfterRender")=="function"&&(f=function(_,E){m(0,E),e.u.G(s.get("optionsAfterRender"),null,[E[0],_!==ot?_:t])}),e.a.ec(n,v,function(_,E,M){return M.length&&(C=!u&&M[0].selected?[e.w.M(M[0])]:[],l=!0),E=n.ownerDocument.createElement("option"),_===ot?(e.a.Bb(E,s.get("optionsCaption")),e.w.cb(E,t)):(M=p(_,s.get("optionsValue"),_),e.w.cb(E,e.a.f(M)),_=p(_,s.get("optionsText"),M),e.a.Bb(E,_)),[E]},r,f),!u){var w;d?w=C.length&&a().length<C.length:w=C.length&&0<=n.selectedIndex?e.w.M(n.options[n.selectedIndex])!==C[0]:C.length||0<=n.selectedIndex,w&&e.u.G(e.a.Fb,null,[n,"change"])}(u||e.S.Ya())&&e.i.ma(n,e.i.H),e.a.wd(n),g&&20<Math.abs(g-n.scrollTop)&&(n.scrollTop=g)}},e.c.options.$b=e.a.g.Z(),e.c.selectedOptions={init:function(n,r,s){function a(){var d=r(),g=[];e.a.D(n.getElementsByTagName("option"),function(f){f.selected&&g.push(e.w.M(f))}),e.m.eb(d,s,"selectedOptions",g)}function p(){var d=e.a.f(r()),g=n.scrollTop;d&&typeof d.length=="number"&&e.a.D(n.getElementsByTagName("option"),function(f){var u=0<=e.a.A(d,e.w.M(f));f.selected!=u&&e.a.Zc(f,u)}),n.scrollTop=g}if(e.a.R(n)!="select")throw Error("selectedOptions binding applies only to SELECT elements");var m;e.i.subscribe(n,e.i.H,function(){m?a():(e.a.B(n,"change",a),m=e.o(p,null,{l:n}))},null,{notifyImmediately:!0})},update:function(){}},e.m.wa.selectedOptions=!0,e.c.style={update:function(n,r){var s=e.a.f(r()||{});e.a.P(s,function(a,p){if(p=e.a.f(p),(p===null||p===t||p===!1)&&(p=""),h)h(n).css(a,p);else if(/^--/.test(a))n.style.setProperty(a,p);else{a=a.replace(/-(\w)/g,function(d,g){return g.toUpperCase()});var m=n.style[a];n.style[a]=p,p===m||n.style[a]!=m||isNaN(p)||(n.style[a]=p+"px")}})}},e.c.submit={init:function(n,r,s,a,p){if(typeof r()!="function")throw Error("The value for a submit binding must be a function");e.a.B(n,"submit",function(m){var d,g=r();try{d=g.call(p.$data,n)}finally{d!==!0&&(m.preventDefault?m.preventDefault():m.returnValue=!1)}})}},e.c.text={init:function(){return{controlsDescendantBindings:!0}},update:function(n,r){e.a.Bb(n,r())}},e.h.ea.text=!0,(function(){if(i&&i.navigator){var n=function(v){if(v)return parseFloat(v[1])},r=i.navigator.userAgent,s,a,p,m,d;(s=i.opera&&i.opera.version&&parseInt(i.opera.version()))||(d=n(r.match(/Edge\/([^ ]+)$/)))||n(r.match(/Chrome\/([^ ]+)/))||(a=n(r.match(/Version\/([^ ]+) Safari/)))||(p=n(r.match(/Firefox\/([^ ]+)/)))||(m=e.a.W||n(r.match(/MSIE ([^ ]+)/)))||(m=n(r.match(/rv:([^ )]+)/)))}if(8<=m&&10>m)var g=e.a.g.Z(),f=e.a.g.Z(),u=function(v){var C=this.activeElement;(C=C&&e.a.g.get(C,f))&&C(v)},y=function(v,C){var l=v.ownerDocument;e.a.g.get(l,g)||(e.a.g.set(l,g,!0),e.a.B(l,"selectionchange",u)),e.a.g.set(v,f,C)};e.c.textInput={init:function(v,C,l){function w(N,z){e.a.B(v,N,z)}function _(){var N=e.a.f(C());(N===null||N===t)&&(N=""),I!==t&&N===I?e.a.setTimeout(_,4):v.value!==N&&(A=!0,v.value=N,A=!1,P=v.value)}function E(){T||(I=v.value,T=e.a.setTimeout(M,4))}function M(){clearTimeout(T),I=T=t;var N=v.value;P!==N&&(P=N,e.m.eb(C(),l,"textInput",N))}var P=v.value,T,I,k=e.a.W==9?E:M,A=!1;m&&w("keypress",M),11>m&&w("propertychange",function(N){A||N.propertyName!=="value"||k(N)}),m==8&&(w("keyup",M),w("keydown",M)),y&&(y(v,k),w("dragend",E)),(!m||9<=m)&&w("input",k),5>a&&e.a.R(v)==="textarea"?(w("keydown",E),w("paste",E),w("cut",E)):11>s?w("keydown",E):4>p?(w("DOMAutoComplete",M),w("dragdrop",M),w("drop",M)):d&&v.type==="number"&&w("keydown",E),w("change",M),w("blur",M),e.o(_,null,{l:v})}},e.m.wa.textInput=!0,e.c.textinput={preprocess:function(v,C,l){l("textInput",v)}}})(),e.c.uniqueName={init:function(n,r){if(r()){var s="ko_unique_"+ ++e.c.uniqueName.rd;e.a.Yc(n,s)}}},e.c.uniqueName.rd=0,e.c.using={init:function(n,r,s,a,p){var m;return s.has("as")&&(m={as:s.get("as"),noChildContext:s.get("noChildContext")}),r=p.createChildContext(r,m),e.Oa(r,n),{controlsDescendantBindings:!0}}},e.h.ea.using=!0,e.c.value={init:function(n,r,s){var a=e.a.R(n),p=a=="input";if(!p||n.type!="checkbox"&&n.type!="radio"){var m=[],d=s.get("valueUpdate"),g=!1,f=null;d&&(typeof d=="string"?m=[d]:m=e.a.wc(d),e.a.Pa(m,"change"));var u=function(){f=null,g=!1;var C=r(),l=e.w.M(n);e.m.eb(C,s,"value",l)};!e.a.W||!p||n.type!="text"||n.autocomplete=="off"||n.form&&n.form.autocomplete=="off"||e.a.A(m,"propertychange")!=-1||(e.a.B(n,"propertychange",function(){g=!0}),e.a.B(n,"focus",function(){g=!1}),e.a.B(n,"blur",function(){g&&u()})),e.a.D(m,function(C){var l=u;e.a.Ud(C,"after")&&(l=function(){f=e.w.M(n),e.a.setTimeout(u,0)},C=C.substring(5)),e.a.B(n,C,l)});var y;if(y=p&&n.type=="file"?function(){var C=e.a.f(r());C===null||C===t||C===""?n.value="":e.u.G(u)}:function(){var C=e.a.f(r()),l=e.w.M(n);f!==null&&C===f?e.a.setTimeout(y,0):(C!==l||l===t)&&(a==="select"?(l=s.get("valueAllowUnset"),e.w.cb(n,C,l),l||C===e.w.M(n)||e.u.G(u)):e.w.cb(n,C))},a==="select"){var v;e.i.subscribe(n,e.i.H,function(){v?s.get("valueAllowUnset")?y():u():(e.a.B(n,"change",u),v=e.o(y,null,{l:n}))},null,{notifyImmediately:!0})}else e.a.B(n,"change",u),e.o(y,null,{l:n})}else e.ib(n,{checkedValue:r})},update:function(){}},e.m.wa.value=!0,e.c.visible={update:function(n,r){var s=e.a.f(r()),a=n.style.display!="none";s&&!a?n.style.display="":!s&&a&&(n.style.display="none")}},e.c.hidden={update:function(n,r){e.c.visible.update(n,function(){return!e.a.f(r())})}},(function(n){e.c[n]={init:function(r,s,a,p,m){return e.c.event.init.call(this,r,function(){var d={};return d[n]=s(),d},a,p,m)}}})("click"),e.ca=function(){},e.ca.prototype.renderTemplateSource=function(){throw Error("Override renderTemplateSource")},e.ca.prototype.createJavaScriptEvaluatorBlock=function(){throw Error("Override createJavaScriptEvaluatorBlock")},e.ca.prototype.makeTemplateSource=function(n,r){if(typeof n=="string"){r=r||o;var s=r.getElementById(n);if(!s)throw Error("Cannot find template with ID "+n);return new e.C.F(s)}if(n.nodeType==1||n.nodeType==8)return new e.C.ia(n);throw Error("Unknown template type: "+n)},e.ca.prototype.renderTemplate=function(n,r,s,a){return n=this.makeTemplateSource(n,a),this.renderTemplateSource(n,r,s,a)},e.ca.prototype.isTemplateRewritten=function(n,r){return this.allowTemplateRewriting===!1?!0:this.makeTemplateSource(n,r).data("isRewritten")},e.ca.prototype.rewriteTemplate=function(n,r,s){n=this.makeTemplateSource(n,s),r=r(n.text()),n.text(r),n.data("isRewritten",!0)},e.b("templateEngine",e.ca),e.kc=(function(){function n(a,p,m,d){a=e.m.ac(a);for(var g=e.m.Ra,f=0;f<a.length;f++){var u=a[f].key;if(Object.prototype.hasOwnProperty.call(g,u)){var y=g[u];if(typeof y=="function"){if(u=y(a[f].value))throw Error(u)}else if(!y)throw Error("This template engine does not support the '"+u+"' binding within its templates")}}return m="ko.__tr_ambtns(function($context,$element){return(function(){return{ "+e.m.vb(a,{valueAccessors:!0})+" } })()},'"+m.toLowerCase()+"')",d.createJavaScriptEvaluatorBlock(m)+p}var r=/(<([a-z]+\d*)(?:\s+(?!data-bind\s*=\s*)[a-z0-9\-]+(?:=(?:\"[^\"]*\"|\'[^\']*\'|[^>]*))?)*\s+)data-bind\s*=\s*(["'])([\s\S]*?)\3/gi,s=/\x3c!--\s*ko\b\s*([\s\S]*?)\s*--\x3e/g;return{xd:function(a,p,m){p.isTemplateRewritten(a,m)||p.rewriteTemplate(a,function(d){return e.kc.Ld(d,p)},m)},Ld:function(a,p){return a.replace(r,function(m,d,g,f,u){return n(u,d,g,p)}).replace(s,function(m,d){return n(d,"<!-- ko -->","#comment",p)})},md:function(a,p){return e.aa.Xb(function(m,d){var g=m.nextSibling;g&&g.nodeName.toLowerCase()===p&&e.ib(g,a,d)})}}})(),e.b("__tr_ambtns",e.kc.md),(function(){e.C={},e.C.F=function(s){if(this.F=s){var a=e.a.R(s);this.ab=a==="script"?1:a==="textarea"?2:a=="template"&&s.content&&s.content.nodeType===11?3:4}},e.C.F.prototype.text=function(){var s=this.ab===1?"text":this.ab===2?"value":"innerHTML";if(arguments.length==0)return this.F[s];var a=arguments[0];s==="innerHTML"?e.a.fc(this.F,a):this.F[s]=a};var n=e.a.g.Z()+"_";e.C.F.prototype.data=function(s){if(arguments.length===1)return e.a.g.get(this.F,n+s);e.a.g.set(this.F,n+s,arguments[1])};var r=e.a.g.Z();e.C.F.prototype.nodes=function(){var s=this.F;if(arguments.length==0){var a=e.a.g.get(s,r)||{},p=a.lb||(this.ab===3?s.content:this.ab===4?s:t);if(!p||a.jd){var m=this.text();m&&m!==a.bb&&(p=e.a.Md(m,s.ownerDocument),e.a.g.set(s,r,{lb:p,bb:m,jd:!0}))}return p}a=arguments[0],this.ab!==t&&this.text(""),e.a.g.set(s,r,{lb:a})},e.C.ia=function(s){this.F=s},e.C.ia.prototype=new e.C.F,e.C.ia.prototype.constructor=e.C.ia,e.C.ia.prototype.text=function(){if(arguments.length==0){var s=e.a.g.get(this.F,r)||{};return s.bb===t&&s.lb&&(s.bb=s.lb.innerHTML),s.bb}e.a.g.set(this.F,r,{bb:arguments[0]})},e.b("templateSources",e.C),e.b("templateSources.domElement",e.C.F),e.b("templateSources.anonymousTemplate",e.C.ia)})(),(function(){function n(f,u,y){var v;for(u=e.h.nextSibling(u);f&&(v=f)!==u;)f=e.h.nextSibling(v),y(v,f)}function r(f,u){if(f.length){var y=f[0],v=f[f.length-1],C=y.parentNode,l=e.ga.instance,w=l.preprocessNode;if(w){if(n(y,v,function(_,E){var M=_.previousSibling,P=w.call(l,_);P&&(_===y&&(y=P[0]||E),_===v&&(v=P[P.length-1]||M))}),f.length=0,!y)return;y===v?f.push(y):(f.push(y,v),e.a.Ua(f,C))}n(y,v,function(_){_.nodeType!==1&&_.nodeType!==8||e.vc(u,_)}),n(y,v,function(_){_.nodeType!==1&&_.nodeType!==8||e.aa.cd(_,[u])}),e.a.Ua(f,C)}}function s(f){return f.nodeType?f:0<f.length?f[0]:null}function a(f,u,y,v,C){C=C||{};var l=(f&&s(f)||y||{}).ownerDocument,w=C.templateEngine||m;if(e.kc.xd(y,w,l),y=w.renderTemplate(y,v,C,l),typeof y.length!="number"||0<y.length&&typeof y[0].nodeType!="number")throw Error("Template engine must return an array of DOM nodes");switch(l=!1,u){case"replaceChildren":e.h.va(f,y),l=!0;break;case"replaceNode":e.a.Xc(f,y),l=!0;break;case"ignoreTargetNode":break;default:throw Error("Unknown renderMode: "+u)}return l&&(r(y,v),C.afterRender&&e.u.G(C.afterRender,null,[y,v[C.as||"$data"]]),u=="replaceChildren"&&e.i.ma(f,e.i.H)),y}function p(f,u,y){return e.O(f)?f():typeof f=="function"?f(u,y):f}var m;e.gc=function(f){if(f!=t&&!(f instanceof e.ca))throw Error("templateEngine must inherit from ko.templateEngine");m=f},e.dc=function(f,u,y,v,C){if(y=y||{},(y.templateEngine||m)==t)throw Error("Set a template engine before calling renderTemplate");if(C=C||"replaceChildren",v){var l=s(v);return e.$(function(){var _=u&&u instanceof e.fa?u:new e.fa(u,null,null,null,{exportDependencies:!0}),w=p(f,_.$data,_),_=a(v,C,w,_,y);C=="replaceNode"&&(v=_,l=s(v))},null,{Sa:function(){return!l||!e.a.Sb(l)},l:l&&C=="replaceNode"?l.parentNode:l})}return e.aa.Xb(function(w){e.dc(f,u,y,w,"replaceNode")})},e.Qd=function(f,u,y,v,C){function l(I,k){e.u.G(e.a.ec,null,[v,I,_,y,w,k]),e.i.ma(v,e.i.H)}function w(I,k){r(k,E),y.afterRender&&y.afterRender(k,I),E=null}function _(I,k){E=C.createChildContext(I,{as:M,noChildContext:y.noChildContext,extend:function(N){N.$index=k,M&&(N[M+"Index"]=k)}});var A=p(f,I,E);return a(v,"ignoreTargetNode",A,E,y)}var E,M=y.as,P=y.includeDestroyed===!1||e.options.foreachHidesDestroyed&&!y.includeDestroyed;if(P||y.beforeRemove||!e.Pc(u))return e.$(function(){var I=e.a.f(u)||[];typeof I.length>"u"&&(I=[I]),P&&(I=e.a.jb(I,function(k){return k===t||k===null||!e.a.f(k._destroy)})),l(I)},null,{l:v});l(u.v());var T=u.subscribe(function(I){l(u(),I)},null,"arrayChange");return T.l(v),T};var d=e.a.g.Z(),g=e.a.g.Z();e.c.template={init:function(f,u){var y=e.a.f(u());if(typeof y=="string"||"name"in y)e.h.Ea(f);else if("nodes"in y){if(y=y.nodes||[],e.O(y))throw Error('The "nodes" option must be a plain, non-observable array.');var v=y[0]&&y[0].parentNode;v&&e.a.g.get(v,g)||(v=e.a.Yb(y),e.a.g.set(v,g,!0)),new e.C.ia(f).nodes(v)}else if(y=e.h.childNodes(f),0<y.length)v=e.a.Yb(y),new e.C.ia(f).nodes(v);else throw Error("Anonymous template defined, but no template content was provided");return{controlsDescendantBindings:!0}},update:function(f,u,y,v,C){var l=u();u=e.a.f(l),y=!0,v=null,typeof u=="string"?u={}:(l="name"in u?u.name:f,"if"in u&&(y=e.a.f(u.if)),y&&"ifnot"in u&&(y=!e.a.f(u.ifnot)),y&&!l&&(y=!1)),"foreach"in u?v=e.Qd(l,y&&u.foreach||[],u,f,C):y?(y=C,"data"in u&&(y=C.createChildContext(u.data,{as:u.as,noChildContext:u.noChildContext,exportDependencies:!0})),v=e.dc(l,y,u,f)):e.h.Ea(f),C=v,(u=e.a.g.get(f,d))&&typeof u.s=="function"&&u.s(),e.a.g.set(f,d,!C||C.ja&&!C.ja()?t:C)}},e.m.Ra.template=function(f){return f=e.m.ac(f),f.length==1&&f[0].unknown||e.m.Id(f,"name")?null:"This template engine does not support anonymous templates nested within its templates"},e.h.ea.template=!0})(),e.b("setTemplateEngine",e.gc),e.b("renderTemplate",e.dc),e.a.Kc=function(n,r,s){if(n.length&&r.length){var a,p,m,d,g;for(a=p=0;(!s||a<s)&&(d=n[p]);++p){for(m=0;g=r[m];++m)if(d.value===g.value){d.moved=g.index,g.moved=d.index,r.splice(m,1),a=m=0;break}a+=m}}},e.a.Pb=(function(){function n(r,s,a,p,m){var d=Math.min,g=Math.max,f=[],u,y=r.length,v,C=s.length,l=C-y||1,w=y+C+1,_,E,M;for(u=0;u<=y;u++)for(E=_,f.push(_=[]),M=d(C,u+l),v=g(0,u-1);v<=M;v++)_[v]=v?u?r[u-1]===s[v-1]?E[v-1]:d(E[v]||w,_[v-1]||w)+1:v+1:u+1;for(d=[],g=[],l=[],u=y,v=C;u||v;)C=f[u][v]-1,v&&C===f[u][v-1]?g.push(d[d.length]={status:a,value:s[--v],index:v}):u&&C===f[u-1][v]?l.push(d[d.length]={status:p,value:r[--u],index:u}):(--v,--u,m.sparse||d.push({status:"retained",value:s[v]}));return e.a.Kc(l,g,!m.dontLimitMoves&&10*y),d.reverse()}return function(r,s,a){return a=typeof a=="boolean"?{dontLimitMoves:a}:a||{},r=r||[],s=s||[],r.length<s.length?n(r,s,"added","deleted",a):n(s,r,"deleted","added",a)}})(),e.b("utils.compareArrays",e.a.Pb),(function(){function n(a,p,m,d,g){var f=[],u=e.$(function(){var y=p(m,g,e.a.Ua(f,a))||[];0<f.length&&(e.a.Xc(f,y),d&&e.u.G(d,null,[m,y,g])),f.length=0,e.a.Nb(f,y)},null,{l:a,Sa:function(){return!e.a.kd(f)}});return{Y:f,$:u.ja()?u:t}}var r=e.a.g.Z(),s=e.a.g.Z();e.a.ec=function(a,p,m,d,g,f){function u(G){A={Aa:G,pb:e.ta(E++)},w.push(A),l||k.push(A)}function y(G){A=C[G],E!==A.pb.v()&&I.push(A),A.pb(E++),e.a.Ua(A.Y,a),w.push(A)}function v(G,ne){if(G)for(var we=0,oe=ne.length;we<oe;we++)e.a.D(ne[we].Y,function(be){G(be,we,ne[we].Aa)})}p=p||[],typeof p.length>"u"&&(p=[p]),d=d||{};var C=e.a.g.get(a,r),l=!C,w=[],_=0,E=0,M=[],P=[],T=[],I=[],k=[],A,N=0;if(l)e.a.D(p,u);else{if(!f||C&&C._countWaitingForRemove){var z=e.a.Mb(C,function(G){return G.Aa});f=e.a.Pb(z,p,{dontLimitMoves:d.dontLimitMoves,sparse:!0})}for(var z=0,Et,ft,Ht;Et=f[z];z++)switch(ft=Et.moved,Ht=Et.index,Et.status){case"deleted":for(;_<Ht;)y(_++);ft===t&&(A=C[_],A.$&&(A.$.s(),A.$=t),e.a.Ua(A.Y,a).length&&(d.beforeRemove&&(w.push(A),N++,A.Aa===s?A=null:T.push(A)),A&&M.push.apply(M,A.Y))),_++;break;case"added":for(;E<Ht;)y(_++);ft!==t?(P.push(w.length),y(ft)):u(Et.value)}for(;E<p.length;)y(_++);w._countWaitingForRemove=N}e.a.g.set(a,r,w),v(d.beforeMove,I),e.a.D(M,d.beforeRemove?e.oa:e.removeNode);var wt,Vt,Qt;try{Qt=a.ownerDocument.activeElement}catch{}if(P.length)for(;(z=P.shift())!=t;){for(A=w[z],wt=t;z;)if((Vt=w[--z].Y)&&Vt.length){wt=Vt[Vt.length-1];break}for(p=0;_=A.Y[p];wt=_,p++)e.h.Wb(a,_,wt)}for(z=0;A=w[z];z++){for(A.Y||e.a.extend(A,n(a,m,A.Aa,g,A.pb)),p=0;_=A.Y[p];wt=_,p++)e.h.Wb(a,_,wt);!A.Ed&&g&&(g(A.Aa,A.Y,A.pb),A.Ed=!0,wt=A.Y[A.Y.length-1])}for(Qt&&a.ownerDocument.activeElement!=Qt&&Qt.focus(),v(d.beforeRemove,T),z=0;z<T.length;++z)T[z].Aa=s;v(d.afterMove,I),v(d.afterAdd,k)}})(),e.b("utils.setDomNodeChildrenFromArrayMapping",e.a.ec),e.ba=function(){this.allowTemplateRewriting=!1},e.ba.prototype=new e.ca,e.ba.prototype.constructor=e.ba,e.ba.prototype.renderTemplateSource=function(n,r,s,a){return(r=!(9>e.a.W)&&n.nodes?n.nodes():null)?e.a.la(r.cloneNode(!0).childNodes):(n=n.text(),e.a.ua(n,a))},e.ba.Ma=new e.ba,e.gc(e.ba.Ma),e.b("nativeTemplateEngine",e.ba),(function(){e.$a=function(){var r=this.Hd=(function(){if(!h||!h.tmpl)return 0;try{if(0<=h.tmpl.tag.tmpl.open.toString().indexOf("__"))return 2}catch{}return 1})();this.renderTemplateSource=function(s,a,p,m){if(m=m||o,p=p||{},2>r)throw Error("Your version of jQuery.tmpl is too old. Please upgrade to jQuery.tmpl 1.0.0pre or later.");var d=s.data("precompiled");return d||(d=s.text()||"",d=h.template(null,"{{ko_with $item.koBindingContext}}"+d+"{{/ko_with}}"),s.data("precompiled",d)),s=[a.$data],a=h.extend({koBindingContext:a},p.templateOptions),a=h.tmpl(d,s,a),a.appendTo(m.createElement("div")),h.fragments={},a},this.createJavaScriptEvaluatorBlock=function(s){return"{{ko_code ((function() { return "+s+" })()) }}"},this.addTemplate=function(s,a){o.write("<script type='text/html' id='"+s+"'>"+a+"<\/script>")},0<r&&(h.tmpl.tag.ko_code={open:"__.push($1 || '');"},h.tmpl.tag.ko_with={open:"with($1) {",close:"} "})},e.$a.prototype=new e.ca,e.$a.prototype.constructor=e.$a;var n=new e.$a;0<n.Hd&&e.gc(n),e.b("jqueryTmplTemplateEngine",e.$a)})()})})()})()})();var dl=ko;typeof window<"u"?(ko=window.ko,typeof ci<"u"?window.ko=ci:delete window.ko):(ko=global.ko,typeof ci<"u"?global.ko=ci:delete global.ko);var ui=dl;/**
 * @license
 * Knockout ES5 plugin - https://github.com/SteveSanderson/knockout-es5
 * Copyright (c) Steve Sanderson
 * MIT license
 */var mn="__knockoutObservables",gn="__knockoutSubscribable";function Wo(t,i){if(!t)throw new Error("When calling ko.track, you must pass an object as the first parameter.");var o=this,c=Yo(t,!0);return i=i||Object.getOwnPropertyNames(t),i.forEach(function(h){if(!(h===mn||h===gn)&&!(h in c)){var b=t[h],x=b instanceof Array,S=o.isObservable(b)?b:x?o.observableArray(b):o.observable(b);Object.defineProperty(t,h,{configurable:!0,enumerable:!0,get:S,set:o.isWriteableObservable(S)?S:void 0}),c[h]=S,x&&gl(o,S)}}),t}function Yo(t,i){var o=t[mn];return!o&&i&&(o={},Object.defineProperty(t,mn,{value:o})),o}function ml(t,i,o){var c=this,h={owner:t,deferEvaluation:!0};if(typeof o=="function")h.read=o;else{if("value"in o)throw new Error('For ko.defineProperty, you must not specify a "value" for the property. You must provide a "get" function.');if(typeof o.get!="function")throw new Error('For ko.defineProperty, the third parameter must be either an evaluator function, or an options object containing a function called "get".');h.read=o.get,h.write=o.set}return t[i]=c.computed(h),Wo.call(c,t,[i]),t}function gl(t,i){var o=null;t.computed(function(){o&&(o.dispose(),o=null);var c=i();c instanceof Array&&(o=_l(t,i,c))})}function _l(t,i,o){var c=yl(t,o);return c.subscribe(i)}function yl(t,i){var o=i[gn];if(!o){o=new t.subscribable,Object.defineProperty(i,gn,{value:o});var c={};vl(i,o,c),wl(t,i,o,c)}return o}function vl(t,i,o){["pop","push","reverse","shift","sort","splice","unshift"].forEach(function(c){var h=t[c];t[c]=function(){var b=h.apply(this,arguments);return o.pause!==!0&&i.notifySubscribers(this),b}})}function wl(t,i,o,c){["remove","removeAll","destroy","destroyAll","replace"].forEach(function(h){Object.defineProperty(i,h,{enumerable:!1,value:function(){var b;c.pause=!0;try{b=t.observableArray.fn[h].apply(t.observableArray(i),arguments)}finally{c.pause=!1}return o.notifySubscribers(i),b}})})}function Go(t,i){if(!t)return null;var o=Yo(t,!1);return o&&o[i]||null}function bl(t,i){var o=Go(t,i);o&&o.valueHasMutated()}function Sl(t){t.track=Wo,t.getObservable=Go,t.valueHasMutated=bl,t.defineProperty=ml}var _n={attachToKo:Sl};_n.attachToKo(ui);zi.register(ui);var it=ui;import{clone as ec,defined as On,destroyObject as ic,Frozen as nc,LabelCollection as oc,PointPrimitiveCollection as rc,PrimitiveCollection as sc}from"@cesium/engine";import{destroyObject as Pl,KeyboardEventModifier as Ti,ScreenSpaceEventHandler as Cl,ScreenSpaceEventType as Rt}from"@cesium/engine";function Dt(t){this.selectedMeasurement=void 0,this._sseh=new Cl(t.canvas),this._scene=t}Object.defineProperties(Dt.prototype,{scene:{get:function(){return this._scene}}});Dt.prototype.activate=function(){let t=this._sseh;t.setInputAction(this._click.bind(this),Rt.LEFT_CLICK),t.setInputAction(this._clickShift.bind(this),Rt.LEFT_CLICK,Ti.SHIFT),t.setInputAction(this._mouseMove.bind(this),Rt.MOUSE_MOVE),t.setInputAction(this._mouseMoveShift.bind(this),Rt.MOUSE_MOVE,Ti.SHIFT),t.setInputAction(this._handleLeftDown.bind(this),Rt.LEFT_DOWN),t.setInputAction(this._handleLeftUp.bind(this),Rt.LEFT_UP),t.setInputAction(this._handleDoubleClick.bind(this),Rt.LEFT_DOUBLE_CLICK)};Dt.prototype.deactivate=function(){let t=this._sseh;t.removeInputAction(Rt.LEFT_CLICK),t.removeInputAction(Rt.LEFT_CLICK,Ti.SHIFT),t.removeInputAction(Rt.MOUSE_MOVE),t.removeInputAction(Rt.MOUSE_MOVE,Ti.SHIFT),t.removeInputAction(Rt.LEFT_DOWN),t.removeInputAction(Rt.LEFT_UP),t.removeInputAction(Rt.LEFT_DOUBLE_CLICK)};Dt.prototype._handleDoubleClick=function(t){this.selectedMeasurement.handleDoubleClick(t.position);let i=this._scene;i.requestRenderMode&&i.requestRender()};Dt.prototype._handleClick=function(t,i){this.selectedMeasurement.handleClick(t.position,i);let o=this._scene;o.requestRenderMode&&o.requestRender()};Dt.prototype._clickShift=function(t){this._handleClick(t,!0)};Dt.prototype._click=function(t){this._handleClick(t,!1)};Dt.prototype._handleMouseMove=function(t,i){this.selectedMeasurement.handleMouseMove(t.endPosition,i);let o=this._scene;o.requestRenderMode&&o.requestRender()};Dt.prototype._mouseMove=function(t){this._handleMouseMove(t,!1)};Dt.prototype._mouseMoveShift=function(t){this._handleMouseMove(t,!0)};Dt.prototype._handleLeftDown=function(t){this.selectedMeasurement.handleLeftDown(t.position);let i=this._scene;i.requestRenderMode&&i.requestRender()};Dt.prototype._handleLeftUp=function(t){this.selectedMeasurement.handleLeftUp(t.position);let i=this._scene;i.requestRenderMode&&i.requestRender()};Dt.prototype.isDestroyed=function(){return!1};Dt.prototype.destroy=function(){return this.deactivate(),this._sseh.destroy(),Pl(this)};var yn=Dt;import{defined as wn,destroyObject as Ol,Cartesian2 as Il,Cartesian3 as fi,Cartographic as Dl,Frozen as Al,HorizontalOrigin as kl,Math as Zo,SceneMode as bn,VerticalOrigin as Nl}from"@cesium/engine";import{Check as $o,defined as Ut,Cartesian2 as Te,Cartesian3 as j,Math as xl}from"@cesium/engine";var El=new j,Tl=new j,Ml=new j,Mi=[new Te,new Te,new Te,new Te],hi=[new j,new j,new j,new j,new j];function Re(t,i){$o.defined("scene",t),$o.defined("windowCoordinates",i);let o=Re._getWorldPosition(t,i,ct,El);if(!Ut(o))return;let c=1e4,h=2,b=.05,x=t.camera.position,S=j.distance(o,x);if(S>c)return;let O=hi[0],D=hi[1],L=hi[2],F=hi[3],B=t.frameState.mapProjection.ellipsoid.geodeticSurfaceNormal(o,Tl);B=j.negate(B,B);let U=Te.clone(i,Mi[0]);U.x-=h,U.y-=h;let e=Te.clone(i,Mi[1]);e.x-=h,e.y+=h;let at=Te.clone(i,Mi[2]);at.x+=h,at.y+=h;let R=Te.clone(i,Mi[3]);R.x+=h,R.y-=h;let Y=Re._getWorldPosition(t,U,ct,O),Q=Re._getWorldPosition(t,e,ct,D),lt=Re._getWorldPosition(t,at,ct,L),V=Re._getWorldPosition(t,R,ct,F),q,Xt,ie,vt;if(Ut(Y)){let n=j.subtract(Y,o,O);q=j.magnitude(n)/S<=b?j.normalize(n,O):void 0}if(Ut(Q)){let n=j.subtract(Q,o,D);Xt=j.magnitude(n)/S<=b?j.normalize(n,D):void 0}if(Ut(lt)){let n=j.subtract(lt,o,L);ie=j.magnitude(n)/S<=b?j.normalize(n,L):void 0}if(Ut(V)){let n=j.subtract(V,o,F);vt=j.magnitude(n)/S<=b?j.normalize(n,F):void 0}let nt=j.clone(j.ZERO,Ml),ot=hi[4];if(Ut(q)&&Ut(Xt)&&(ot=j.normalize(j.cross(q,Xt,ot),ot),nt=j.add(nt,ot,nt)),Ut(Xt)&&Ut(ie)&&(ot=j.normalize(j.cross(Xt,ie,ot),ot),nt=j.add(nt,ot,nt)),Ut(ie)&&Ut(vt)&&(ot=j.normalize(j.cross(ie,vt,ot),ot),nt=j.add(nt,ot,nt)),Ut(vt)&&Ut(q)&&(ot=j.normalize(j.cross(vt,q,ot),ot),nt=j.add(nt,ot,nt)),!nt.equals(j.ZERO))return nt=j.normalize(nt,nt),xl.asinClamped(Math.abs(Math.sin(j.angleBetween(nt,B))))}Re._getWorldPosition=Ot;var vn=Re;var Ll=new fi,Jo=new Dl;function qo(t){return`<svg viewBox="0 0 30 30" height="${t}px" width="${t}px">
                 <g transform="translate(0,-267)">
                   <circle r="2.0788691" cy="281.90503" cx="15.212251"/>
                 </g>
               </svg>`}function At(t){t=t??Al.EMPTY_OBJECT,ut.call(this,t),this._point=this._pointCollection.add(W.getPointOptions()),this._label=this._labelCollection.add(W.getLabelOptions({horizontalOrigin:kl.LEFT,verticalOrigin:Nl.CENTER,pixelOffset:new Il(10,0)})),this._position=new fi,this._height=0,this._slope=0}At.prototype=Object.create(ut.prototype);At.prototype.constructor=At;Object.defineProperties(At.prototype,{position:{get:function(){return this._position}},height:{get:function(){return this._height}},slope:{get:function(){return this._slope}},icon:{value:qo(15)},thumbnail:{value:qo(25)},type:{value:"Point coordinates"},instructions:{value:["Move the mouse to see the longitude, latitude and height of the point"]},id:{value:"pointMeasurement"}});At.prototype._pickPositionSupported=function(){return this._scene.pickPositionSupported};At.prototype.handleMouseMove=function(t){let i=this._scene;if(this.reset(),i.mode===bn.MORPHING)return;this._point.show=!1;let o=At._getWorldPosition(i,t,ct,Ll);if(!wn(o))return;this._point.position=o;let c=i.frameState.mapProjection.ellipsoid.cartesianToCartographic(o,Jo),h=0;wn(i.globe)&&(h=i.globe.getHeight(c)??0),h=c.height-h,Zo.equalsEpsilon(h,0,Zo.EPSILON3)&&(h=0);let b;i.mode!==bn.SCENE2D&&(b=At._getSlope(i,t,this._primitives)),this._point.show=!0;let x=this._label;x.position=o,x.show=!0,this._position=fi.clone(o,this._position),this._height=h,this._slope=b,this._refreshLabels()};At.prototype._refreshLabels=function(){let t=this._scene,i=this._label,o=t.frameState.mapProjection.ellipsoid.cartesianToCartographic(this._position,Jo);i.text=`lon: ${J.angleToString(o.longitude,et.DEGREES_MINUTES_SECONDS,this._selectedLocale)}
lat: ${J.angleToString(o.latitude,et.DEGREES_MINUTES_SECONDS,this._selectedLocale)}`,t.mode!==bn.SCENE2D&&this._pickPositionSupported()&&(i.text+=`
height: ${J.distanceToString(this._height,this._selectedUnits.distanceUnits,this._selectedLocale)}`,wn(this._slope)&&(i.text+=`
slope: ${J.angleToString(this._slope,this._selectedUnits.slopeUnits,this._selectedLocale,3)}`))};At.prototype.reset=function(){this._label.show=!1,this._point.show=!1,this._position=fi.clone(fi.ZERO,this._position)};At.prototype.isDestroyed=function(){return!1};At.prototype.destroy=function(){return this._labelCollection.remove(this._label),this._pointCollection.remove(this._point),Ol(this)};At._getSlope=vn;At._getWorldPosition=Ot;var Sn=At;import{destroyObject as Hl,Frozen as Vl}from"@cesium/engine";import{defined as Oi,Cartesian2 as Fe,Cartesian3 as Ge,Frozen as Rl,HorizontalOrigin as Pn,SceneTransforms as Xo,VerticalOrigin as Fl}from"@cesium/engine";var zl=new Fe,Bl=new Fe,Qo=new Fe,Ul=new Ge;function Zt(t){t=t??Rl.EMPTY_OBJECT,t.polylineOptions=W.getPolylineOptions({ellipsoid:t.ellipsoid}),t.pointOptions=W.getPointOptions(),Lt.call(this,t);let i=this._scene,o=t.labels;this._labelCollection=o,this._label=o.add(W.getLabelOptions()),this._segmentLabels=[],this._segmentDistances=[],this._selectedUnits=t.units,this._selectedLocale=t.locale,this._previousDistance=0,this._distance=0;let c=this;this._removeEvent=i.preRender.addEventListener(function(){c.updateLabel()})}Zt.prototype=Object.create(Lt.prototype);Zt.prototype.constructor=Zt;Object.defineProperties(Zt.prototype,{distance:{get:function(){return this._distance}}});Zt.prototype.updateLabel=function(){let t=this._positions;if(t.length<2)return;let i=this._scene,o=t[0],c=Xo.worldToWindowCoordinates(i,o,zl),h=Oi(c)?Fe.clone(c,Qo):Fe.fromElements(Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Qo),b=h.y,x=this._segmentLabels;x[0].show=this._polyline.positions.length>2;for(let S=1;S<t.length;S++){let O=Xo.worldToWindowCoordinates(i,t[S],Bl);if(!Oi(O))continue;let D=(h.y-O.y)/(O.x-h.x),L=x[S-1];D>0?L.horizontalOrigin=Pn.LEFT:L.horizontalOrigin=Pn.RIGHT,O.y<b&&(b=O.y,o=t[S]),h=Fe.clone(O,h)}this._mode===K.AfterDraw&&(this._label.position=o)};Zt.prototype.addPoint=function(t){let i=this._positions;if(i.length>0){this._previousDistance=this._distance;let o=this._labelCollection.add(W.getLabelOptions({scale:.8,horizontalOrigin:Pn.LEFT,verticalOrigin:Fl.TOP,pixelOffset:new Fe(5,5)})),c=i[i.length-1],h=Ge.distance(c,t);o.position=Ge.midpoint(c,t,new Ge),o.text=J.distanceToString(h,this._selectedUnits.distanceUnits,this._selectedLocale),o.show=!0,this._segmentDistances.push(h),this._segmentLabels.push(o)}Lt.prototype.addPoint.call(this,t)};Zt.prototype.handleClick=function(t){this._mode===K.AfterDraw&&this.reset();let i=Lt.prototype.handleClick.call(this,t);Oi(i)&&(this._label.show=!0,this._polyline.show=!0)};Zt.prototype.handleMouseMove=function(t){let i=Lt.prototype.handleMouseMove.call(this,t);if(!Oi(i))return;let o=this._positions[this._positions.length-1],c=i,h=Ge.subtract(c,o,Ul),b=this._previousDistance+Ge.magnitude(h),x=this._label;x.position=c,x.text=J.distanceToString(b,this._selectedUnits.distanceUnits,this._selectedLocale),x.show=!0,this._distance=b};Zt.prototype._refreshLabels=function(){let t=this._label;t.text=J.distanceToString(this._distance,this._selectedUnits.distanceUnits,this._selectedLocale);let i=this._segmentLabels;for(let o=0;o<i.length;o++)i[o].text=J.distanceToString(this._segmentDistances[o],this._selectedUnits.distanceUnits,this._selectedLocale)};Zt.prototype.reset=function(){this._label.show=!1,this._label.text="",this._positions=[],this._polyline.positions=[],this._polyline.show=!1,this._previousDistance=0,this._distance=0;let t,i=this._points,o=this._pointCollection;for(t=0;t<i.length;t++)o.remove(i[t]);i.length=0;let c=this._labelCollection,h=this._segmentLabels,b=this._segmentDistances;for(t=0;t<h.length;t++)c.remove(h[t]);h.length=0,b.length=0,this._mode=K.BeforeDraw,this._lastClickPosition.x=Number.POSITIVE_INFINITY,this._lastClickPosition.y=Number.POSITIVE_INFINITY};Zt.prototype.destroy=function(){this._removeEvent();let t=this._labelCollection;t.remove(this._label);let i=this._segmentLabels;for(let o=0;o<i.length;o++)t.remove(i[o]);Lt.prototype.destroy.call(this)};var Cn=Zt;function Ko(t){return`<svg viewBox="0 0 30 30" height="${t}px" width="${t}px">
                  <g transform="translate(0,-267)">
                   <circle cx="3.8532958" cy="293.99896" r="2.0788691" />
                   <circle cx="7.2651663" cy="276.26389" r="2.0788691" />
                   <circle cx="24.571842" cy="285.56577" r="2.0788691" />
                   <circle cx="26.916754" cy="270.38345" r="2.0788691" />
                   <path d="m 3.7523356,294.14823 3.602242,-17.81109 17.3608064,9.35582 2.401494,-15.00934" />
                 </g>
               </svg>`}function qt(t){t=t??Vl.EMPTY_OBJECT,ut.call(this,t),this._drawing=new Cn(t)}qt.prototype=Object.create(ut.prototype);qt.prototype.constructor=qt;Object.defineProperties(qt.prototype,{distance:{get:function(){return this._drawing.distance}},icon:{value:Ko(15)},thumbnail:{value:Ko(25)},type:{value:"Polyline Distance"},instructions:{value:["Click to start drawing a polyline","Keep clicking to add more points","Double click to finish drawing"]},id:{value:"polylineMeasurement"}});qt.prototype._refreshLabels=function(){this._drawing._refreshLabels()};qt.prototype.handleDoubleClick=function(){this._drawing.handleDoubleClick()};qt.prototype.handleClick=function(t){this._drawing.handleClick(t)};qt.prototype.handleMouseMove=function(t){this._drawing.handleMouseMove(t)};qt.prototype.reset=function(){this._drawing.reset()};qt.prototype.isDestroyed=function(){return!1};qt.prototype.destroy=function(){return this._drawing.destroy(),Hl(this)};var xn=qt;import{defined as Tn,destroyObject as jl,Cartesian2 as nr,Cartesian3 as st,Cartographic as Wl,Frozen as Yl,IntersectionTests as Gl,Plane as or,Ray as $l,SceneTransforms as Zl,HorizontalOrigin as ql,SceneMode as En,VerticalOrigin as Jl}from"@cesium/engine";var ge={BeforeDraw:0,Drawing:1,AfterDraw:2},rr=new st,Xl=new nr,tr=new st,$e=new st,Ql=new $l,Kl=new st,er=new Wl;function ir(t){return`<svg viewBox="0 0 30 30" height="${t}px" width="${t}px">
                 <g transform="translate(0,-267)">
                   <path d="m 15.042838,272.34414 -0.0497,18.93758"/>
                   <circle r="2.0788691" cy="270.01154" cx="15.078616"/>
                   <circle r="2.0788691" cy="293.97095" cx="15.092237"/>
                 </g>
               </svg>`}function tc(t,i){let o=t._positions,c=o[0],h=o[1],b=t._draggingPlane,x=t._surfaceNormal,S=t._scene,O=S.camera,D=O.direction,L=S.frameState.mapProjection.ellipsoid,F=c,B=x;if(S.mode===En.COLUMBUS_VIEW){B=st.UNIT_X;let R=L.cartesianToCartographic(c,er);F=S.mapProjection.project(R,rr),st.fromElements(F.z,F.x,F.y,F)}let U=st.cross(B,D,tr);U=st.cross(B,U,U),U=st.normalize(U,U),b=or.fromPointNormal(F,U,b);let e=O.getPickRay(i,Ql);if(h=Gl.rayPlane(e,b,h),!Tn(h))return;if(S.mode===En.COLUMBUS_VIEW){h=st.fromElements(h.y,h.z,h.x,h);let R=S.mapProjection.unproject(h,er);h=L.cartographicToCartesian(R,h)}return Zl.worldToWindowCoordinates(S,o[0],Xl).y<i.y&&(x=st.negate(x,tr)),$e=st.subtract(h,c,$e),$e=st.projectVector($e,x,$e),h=st.add(c,$e,h),h}function kt(t){t=t??Yl.EMPTY_OBJECT,ut.call(this,t);let i=this._pointCollection,o=[new st,new st];this._startPoint=i.add(W.getPointOptions()),this._endPoint=i.add(W.getPointOptions()),this._positions=o,this._polyline=this._primitives.add(new Tt(W.getPolylineOptions({ellipsoid:this._scene.frameState.mapProjection.ellipsoid,positions:o}))),this._label=this._labelCollection.add(W.getLabelOptions({horizontalOrigin:ql.LEFT,verticalOrigin:Jl.TOP,pixelOffset:new nr(10,10)})),this._mode=ge.BeforeDraw,this._draggingPlane=new or(st.UNIT_X,0),this._surfaceNormal=new st,this._distance=0}kt.prototype=Object.create(ut.prototype);kt.prototype.constructor=kt;Object.defineProperties(kt.prototype,{distance:{get:function(){return this._distance}},type:{value:"Vertical distance"},icon:{value:ir(15)},thumbnail:{value:ir(25)},instructions:{value:["Click on the point cloud or the globe to set the start point","Move the mouse to drag the line","Click again to set the end point","To make a new measurement, click to clear the previous measurement"]},id:{value:"verticalMeasurement"}});kt.prototype.handleClick=function(t){let i=this._scene,o=i.frameState.mapProjection.ellipsoid;this._mode===ge.AfterDraw&&this.reset();let c=this._mode,h=this._positions;if(c===ge.BeforeDraw){let b=kt._getWorldPosition(i,t,ct,h[0]);if(!Tn(b))return;this._polyline.show=!0,h[0]=st.clone(b,h[0]),h[1]=st.clone(b,h[1]),this._startPoint.position=b,this._startPoint.show=!0,this._mode=ge.Drawing,this._polyline.positions=h,this._surfaceNormal=o.geodeticSurfaceNormal(b,this._surfaceNormal)}else c===ge.Drawing&&(this._endPoint.position=h[1],this._endPoint.show=!0,this._mode=ge.AfterDraw)};kt.prototype.handleMouseMove=function(t){if(this._mode!==ge.Drawing)return;let i=this._label;if(this._scene.mode===En.SCENE2D){i.position=this._positions[0],i.text=J.distanceToString(0,this._selectedUnits.distanceUnits,this._selectedLocale),i.show=!0,this._mode=ge.AfterDraw;return}let o=kt._getHeightPosition(this,t);if(!Tn(o))return;let c=this._positions,h=c[0],b=c[1],x=st.subtract(b,h,rr),S=st.magnitude(x);i.position=st.midpoint(h,b,Kl),i.show=!0,this._polyline.positions=c,this._distance=S,this._refreshLabels()};kt.prototype._refreshLabels=function(){let t=this._label;t.text=J.distanceToString(this._distance,this._selectedUnits.distanceUnits,this._selectedLocale)};kt.prototype.reset=function(){this._polyline.show=!1,this._label.show=!1,this._startPoint.show=!1,this._endPoint.show=!1,this._mode=ge.BeforeDraw,this._distance=0};kt.prototype.isDestroyed=function(){return!1};kt.prototype.destroy=function(){this._primitives.remove(this._polyline);let t=this._pointCollection;return t.remove(this._startPoint),t.remove(this._endPoint),this._labelCollection.remove(this._label),jl(this)};kt._getWorldPosition=Ot;kt._getHeightPosition=tc;var Mn=kt;function ee(t){t=t??nc.EMPTY_OBJECT;let i=t.scene,o=On(t.units)?t.units:new J,c=On(t.primitives)?t.primitives:i.primitives.add(new sc),h=c.add(new rc),b=c.add(new oc),x=new yn(i),S={scene:i,units:o,locale:t.locale,points:h,labels:b,primitives:c},O=ec(S);O.showComponentLines=!0;let D=[new Ci(S),new Ci(O),new xn(S),new dn(S),new Mn(S),new fn(S),new un(S),new Sn(S)];this.expanded=!1;let L=it.observable(!1);it.defineProperty(this,"expanded",{get:function(){return L()},set:function(B){B!==L()&&(L(B),B?this._activate():this._deactivate())}}),this.instructionsVisible=!1,this.selectedMeasurement=void 0;let F=it.observable();it.defineProperty(this,"selectedMeasurement",{get:function(){return F()},set:function(B){let U=F();On(U)&&U.reset(),F(B),x.selectedMeasurement=B,i.requestRenderMode&&i.requestRender()}}),it.track(this,["expanded","instructionsVisible"]),this._measurements=D,this._units=o,this._mouseHandler=x,this._primitives=c,this._scene=i,this._removeListener=i.morphStart.addEventListener(ee.prototype.onMorph,this)}Object.defineProperties(ee.prototype,{scene:{get:function(){return this._scene}},measurements:{get:function(){return this._measurements}},units:{get:function(){return this._units},set:function(t){this._units=t,this.selectedMeasurement.selectedUnits=t}}});ee.prototype.toggleActive=function(){this.expanded=!this.expanded};ee.prototype.toggleInstructions=function(){this.instructionsVisible=!this.instructionsVisible};ee.prototype._activate=function(){this._mouseHandler.activate(),this.selectedMeasurement=this._measurements[0]};ee.prototype._deactivate=function(){this._mouseHandler.deactivate(),this.selectedMeasurement=void 0,this.reset()};ee.prototype.onMorph=function(t,i,o,c){this.reset()};ee.prototype.reset=function(){this.instructionsVisible=!1,this._measurements.forEach(function(t){t.reset()})};ee.prototype.isDestroyed=function(){return!1};ee.prototype.destroy=function(){return this._deactivate(),this._mouseHandler.destroy(),this._measurements.forEach(function(t){t.destroy()}),this._scene.primitives.remove(this._primitives),ic(this)};var In=ee;var uc=`<div class="cesium-measure-toolbar" data-bind="css: {expanded: expanded}">
                   <div class="cesium-measure-button cesium-measure-button-main" data-bind="click: toggleActive, attr: {title: expanded ? 'Collapse' : 'Expand'}">
                       <svg width="25px" height="25px" viewBox="0 0 30 30">                          <path d="M 14.851122,11.545456 25.578177,0.95157924 29.306163,4.6249483 18.537701,15.246448 M 15.097088,18.640104 4.1531358,29.434698 0.62547531,25.653101 11.515909,14.853004"/>                          <path d="M 22.983411,26.662767 0.8350882,3.9632787 4.2110211,0.77972226 26.222602,23.217308 Z"/>                          <path d="m 23.126668,26.856584 5.906658,2.311965 -2.630951,-5.79394"/>                          <path d="M 3.8120758,6.6472825 7.2277612,3.4338416"/>                          <path d="M 5.2416124,27.76234 3.6377555,26.08552"/>                          <path d="M 7.0148521,26.015847 5.4109952,24.339027"/>                          <path d="M 8.9787697,24.078675 7.3749129,22.401855"/>                          <path d="M 10.974467,22.173284 9.3706099,20.496464"/>                          <path d="m 12.990856,20.120081 -1.603857,-1.67682"/>                          <path d="m 19.676091,13.638423 -1.603857,-1.67682"/>                          <path d="M 21.449331,11.89193 19.845474,10.21511"/>                          <path d="M 23.413248,9.9547586 21.809392,8.2779376"/>                          <path d="M 25.448671,7.9858073 23.805089,6.3725466"/>                          <path d="M 27.425335,5.9961636 25.765864,4.3670131"/>                    </svg>               </div>
                   <!-- ko foreach: measurements -->
                   <div class="cesium-measure-button" data-bind="click: function($data) { $parent.selectedMeasurement = $data; }, attr: {title: type}, css: {active: $data === $parent.selectedMeasurement}, html: thumbnail"></div>
                   <!-- /ko -->
                   <div class="cesium-measure-button cesium-measure-help" title="Settings and Help" data-bind="click: toggleInstructions, css: {active: instructionsVisible}">
                       <svg width="20px" height="20px" viewBox="0 0 30 30">                            <g transform="translate(0,-267)">                            <g>                            <path d="M 16.891904,289.31984 H 11.7387 q -0.02021,-1.11147 -0.02021,-1.35398 0,-2.50587 0.828554,-4.12256 0.828555,-1.61669 3.314218,-3.63756 2.485663,-2.02086 2.970671,-2.64733 0.747719,-0.99022 0.747719,-2.18253 0,-1.65711 -1.33377,-2.82921 -1.313562,-1.19231 -3.556721,-1.19231 -2.162325,0 -3.617348,1.23273 -1.4550219,1.23272 -2.0006553,3.7588 l -5.2138301,-0.64667 q 0.2222951,-3.61735 3.0717138,-6.14343 2.8696274,-2.52608 7.5176156,-2.52608 4.890492,0 7.780328,2.5665 2.889836,2.54629 2.889836,5.94134 0,1.8794 -1.071058,3.55672 -1.05085,1.67732 -4.526737,4.56715 -1.798569,1.49544 -2.243159,2.40483 -0.424381,0.90939 -0.383964,3.25359 z m -5.153204,7.63887 v -5.67863 h 5.678629 v 5.67863 z" />                            </g>                            </g>                        </svg>                   </div>
               </div>
               <div class="cesium-measure-instructions" data-bind="visible: instructionsVisible">
                   <!-- ko foreach: measurements -->
                   <div><div class="cesium-measure-icon" data-bind="html: icon" style="display: inline"></div><span data-bind="text: type"></span></div>
                   <ul data-bind="foreach: instructions">
                       <li data-bind="text: $data"></li>
                   </ul>
                   <hr>
                   <!-- /ko -->
               </div>`;function Ii(t){t=t??lc.EMPTY_OBJECT;let i=t.container,o=Je(uc);i=cc(i),o=i.appendChild(o);let c=new In(t);it.applyBindings(c,i),this._viewModel=c,this._container=i,this._element=o,this._dropdown=o.getElementsByClassName("cesium-measure-instructions")[0]}Object.defineProperties(Ii.prototype,{container:{get:function(){return this._container}},viewModel:{get:function(){return this._viewModel}},tilesetMeasurementSupported:{get:function(){return this._scene.pickPositionSupported}}});Ii.prototype.isDestroyed=function(){return!1};Ii.prototype.destroy=function(){return this._viewModel.destroy(),it.cleanNode(this._container),this._container.removeChild(this._element),ac(this)};var Dn=Ii;import{defined as hc,destroyObject as fc,ArcType as pc,BoundingSphere as kn,ColorGeometryInstanceAttribute as sr,GeometryInstance as dc,Math as mc,Matrix4 as Ai,PolylineGeometry as gc,Material as Di,PolylineColorAppearance as ar,PolylineMaterialAppearance as An,Primitive as _c}from"@cesium/engine";function pi(t){this.show=t.show??!0,this.id=t.id;let i=t.positions;t.loop&&(i=i.slice(),i.push(i[0]));let o=t.arrow??!1;this._width=hc(t.width)?t.width:o?25:8,this._color=t.color,this._depthFailColor=t.color.withAlpha(.3),this._positions=i,this._arrow=o,this._depthFail=t.depthFail??!0,this._primitive=void 0,this._boundingSphere=kn.fromPoints(i),this._transformedBoundingSphere=kn.clone(this._boundingSphere),this._modelMatrix=Ai.clone(Ai.IDENTITY),this._update=!0}Object.defineProperties(pi.prototype,{modelMatrix:{get:function(){return this._modelMatrix},set:function(t){Ai.equalsEpsilon(t,this._modelMatrix,mc.EPSILON10)||(this._modelMatrix=Ai.clone(t,this._modelMatrix),this._update=!0)}},positions:{get:function(){return this._positions},set:function(t){this._positions=t,this._update=!0}},color:{get:function(){return this._color}},width:{get:function(){return this._width}},boundingVolume:{get:function(){return this._transformedBoundingSphere}}});pi.prototype.update=function(t){if(this.show){if(this._update){this._update=!1,this._primitive=this._primitive&&this._primitive.destroy();let i=new gc({positions:this._positions,width:this._width,vertexFormat:An.VERTEX_FORMAT,arcType:pc.NONE}),o,c;this._arrow?(o=new An({material:Di.fromType(Di.PolylineArrowType,{color:this._color})}),this._depthFail&&(c=new An({material:Di.fromType(Di.PolylineArrowType,{color:this._depthFailColor})}))):(o=new ar({translucent:this._color.alpha!==1}),this._depthFail&&(c=new ar({translucent:this._depthFailColor.alpha!==1})));let h=this._modelMatrix;this._primitive=new _c({geometryInstances:new dc({geometry:i,attributes:{color:sr.fromColor(this._color),depthFailColor:sr.fromColor(this._depthFailColor)},id:this.id,modelMatrix:h}),appearance:o,depthFailAppearance:c,asynchronous:!1}),this._transformedBoundingSphere=kn.transform(this._boundingSphere,h,this._transformedBoundingSphere)}this._primitive.update(t)}};pi.prototype.isDestroyed=function(){return!1};pi.prototype.destroy=function(){return this._primitive=this._primitive&&this._primitive.destroy(),fc(this)};var _e=pi;var yc={TRANSLATION:"translation",ROTATION:"rotation",SCALE:"scale"},ye=Object.freeze(yc);import{Cartesian2 as Be,Cartesian3 as X,Color as lr,defined as Ue,destroyObject as Pc,Frozen as Cc,HeadingPitchRoll as xc,IntersectionTests as fr,Math as Ec,Matrix3 as di,Matrix4 as Ct,Plane as pr,Quaternion as dr,Ray as Tc,Transforms as Mc}from"@cesium/engine";import{Cartesian3 as Nn,Matrix4 as ki}from"@cesium/engine";var vc=new Nn(1,1,1),wc=new ki,bc=new Nn;function Sc(t,i,o){let c=ki.getScale(t,bc),h=ki.setScale(t,vc,wc);return ki.multiplyByPoint(h,Nn.multiplyComponents(i,c,o),o)}var he=Sc;import{Cartesian3 as Ln,Color as Rn}from"@cesium/engine";var ze={X:"X",Y:"Y",Z:"Z"};ze.getValue=function(t){return t===ze.X?Ln.UNIT_X:t===ze.Y?Ln.UNIT_Y:Ln.UNIT_Z};ze.getColor=function(t){return t===ze.X?Rn.RED:t===ze.Y?Rn.GREEN:Rn.BLUE};var Z=Object.freeze(ze);var mr=new X(1,1,1),cr=new X,Oc=new X,Ic=new X,Dc=new Ct,Ac=new Ct,kc=new X,Nc=new X,zn=new Be,gr=new Be,Lc=new xc,_r=new Tc,Rc=new X,Fc=new dr,zc=new di,ur=100,hr=1/0;function Bc(){let t=[],i=[],o=[];for(let c=0;c<360;c++){let h=Ec.toRadians(c),b=Math.cos(h),x=Math.sin(h);t.push(new X(0,b,x)),i.push(new X(x,0,b)),o.push(new X(b,x,0))}return{x:t,y:i,z:o}}function yr(t,i,o,c,h){let b=Ct.inverse(t,Ac),x=Ct.multiplyByPoint(b,c,kc),S=Ct.multiplyByPoint(b,h,Nc);x=X.subtract(x,i,x),S=X.subtract(S,i,S);let O=zn,D=gr;o.x?(O.x=x.y,O.y=x.z,D.x=S.y,D.y=S.z):o.y?(O.x=-x.x,O.y=x.z,D.x=-S.x,D.y=S.z):(O.x=x.x,O.y=x.y,D.x=S.x,D.y=S.y);let L=O.x*D.y-O.y*D.x>=0,F=Be.angleBetween(O,D);return L||(F=-F),F}function Fn(t,i){return new _e({positions:t,color:Z.getColor(i),loop:!0,show:!1,id:i})}function ve(t){t=t??Cc.EMPTY_OBJECT;let i=t.scene;this._vectorLine1=i.primitives.add(new _e({width:5,positions:[new X,new X],color:lr.YELLOW,show:!1})),this._vectorLine2=i.primitives.add(new _e({width:5,positions:[new X,new X],color:lr.YELLOW,show:!1}));let o=Bc();this._polylineX=i.primitives.add(Fn(o.x,Z.X)),this._polylineY=i.primitives.add(Fn(o.y,Z.Y)),this._polylineZ=i.primitives.add(Fn(o.z,Z.Z)),this._modelMatrix=Ct.clone(Ct.IDENTITY),this.originOffset=t.originOffset,this._scene=i,this._setHPRCallback=t.setHeadingPitchRoll,this._setPositionCallback=t.setPosition,this._transform=t.transform,this._radius=t.radius,this._active=!1,this._dragging=!1,this._startTransform=new Ct,this._startRotation=new di,this._widgetOrigin=new X,this._modelOrigin=new X,this._rotationAxis=void 0,this._rotationPlane=new pr(X.UNIT_X,0),this._rotationStartPoint=new X,this._pixelSize=Ue(t.pixelSize)?new Be(t.pixelSize,t.pixelSize):new Be(ur,ur),this._maximumSizeInMeters=Ue(t.maximumSizeInMeters)?new Be(t.maximumSizeInMeters,t.maximumSizeInMeters):new Be(hr,hr),this.update()}Object.defineProperties(ve.prototype,{active:{get:function(){return this._active},set:function(t){this._active=t,t?(this._polylineX.show=!0,this._polylineY.show=!0,this._polylineZ.show=!0):(this._polylineX.show=!1,this._polylineY.show=!1,this._polylineZ.show=!1,this._dragging=!1)}},pixelSize:{get:function(){return this._pixelSize.x}},maximumSizeInMeters:{get:function(){return this._maximumSizeInMeters.x}}});ve.prototype.update=function(){let t=this._transform,i=this._modelMatrix;i=Ct.setScale(t,mr,i);let o=he(t,this.originOffset,Oc);i=Ct.setTranslation(i,o,i);let c=this._radius*Ct.getMaximumScale(this._transform)*1.25;i=Ct.multiplyByUniformScale(i,c,i),this._pixelSize.x>0&&(i=re(this._pixelSize,this._maximumSizeInMeters,this._scene.frameState,i,i)),this._polylineX.modelMatrix=i,this._polylineY.modelMatrix=i,this._polylineZ.modelMatrix=i};ve.prototype.handleLeftDown=function(t){let i=this._scene,o=i.drillPick(t),c;for(let B=0;B<o.length;B++){let U=o[B];if(Ue(U.id)&&Ue(Z[U.id])){c=U.id;break}}if(!Ue(c))return;let h=Z.getValue(c),b=Ct.setScale(this._transform,mr,this._startTransform);this._startRotation=Ct.getMatrix3(b,this._startRotation);let x=Ct.getTranslation(b,this._modelOrigin),S=he(this._transform,this.originOffset,this._widgetOrigin),O=Ct.multiplyByPoint(b,h,Ic),D=X.subtract(O,x,O);D=X.normalize(D,D);let L=pr.fromPointNormal(S,D,this._rotationPlane),F=fr.rayPlane(i.camera.getPickRay(t,_r),L,this._rotationStartPoint);this._dragging=Ue(F),this._rotationAxis=h,i.screenSpaceCameraController.enableInputs=!1};ve.prototype.handleMouseMove=function(t){if(!this._dragging)return;let i=this._scene,o=i.camera.getPickRay(t,_r),c=fr.rayPlane(o,this._rotationPlane,Rc);if(!Ue(c))return;let h=this._widgetOrigin,b=this._modelOrigin,x=this._rotationStartPoint,S=this._vectorLine1,O=S.positions,D=this._vectorLine2,L=D.positions,F=X.subtract(x,h,zn),B=X.subtract(c,h,gr);B=X.normalize(B,B),B=X.multiplyByScalar(B,X.magnitude(F),B),c=X.add(h,B,c),O[0]=h,O[1]=x,L[0]=h,L[1]=c,S.positions=O,D.positions=L,S.show=!0,D.show=!0;let U=X.multiplyComponents(this.originOffset,Ct.getScale(this._transform,cr),cr),e=this._rotationAxis,at=yr(this._startTransform,U,e,x,c),R=di.fromQuaternion(dr.fromAxisAngle(e,at,Fc),zc);R=di.multiply(this._startRotation,R,R);let Y=Ct.fromRotationTranslation(R,b,Dc);this._setHPRCallback(Mc.fixedFrameToHeadingPitchRoll(Y,i.mapProjection.ellipsoid,void 0,Lc));let Q=X.negate(U,zn);Q=di.multiplyByVector(R,Q,Q),b=X.add(Q,h,b),this._setPositionCallback(b)};ve.prototype.handleLeftUp=function(){this._dragging=!1,this._vectorLine1.show=!1,this._vectorLine2.show=!1,this._scene.screenSpaceCameraController.enableInputs=!0};ve.prototype.isDestroyed=function(){return!1};ve.prototype.destroy=function(){this.active=!1;let t=this._scene;t.primitives.remove(this._vectorLine1),t.primitives.remove(this._vectorLine2),t.primitives.remove(this._polylineX),t.primitives.remove(this._polylineY),t.primitives.remove(this._polylineZ),Pc(this)};ve._getRotationAngle=yr;var Bn=ve;import{Cartesian2 as Ni,Cartesian3 as tt,defined as He,destroyObject as Uc,Frozen as Hc,IntersectionTests as br,Matrix4 as Jt,Plane as Sr,Ray as Vc,PointPrimitiveCollection as jc}from"@cesium/engine";var Wc=new tt,Yc=new tt,Pr=new tt,Gc=new tt,$c=new tt,Zc=new tt,qc=new tt,Cr=new Vc,Jc=new tt(1,1,1),Nt=new tt,vr=100,wr=1/0;function Un(t){return{position:Z.getValue(t),show:!1,color:Z.getColor(t),pixelSize:20,disableDepthTestDistance:Number.POSITIVE_INFINITY,id:t}}function Hn(t){return new _e({positions:[tt.ZERO,Z.getValue(t)],color:Z.getColor(t),id:t,show:!1})}function Me(t){t=t??Hc.EMPTY_OBJECT;let i=t.scene,o=t.transform,c=i.primitives.add(new jc);this.originOffset=t.originOffset,this._points=c,this._pointX=c.add(Un(Z.X)),this._pointY=c.add(Un(Z.Y)),this._pointZ=c.add(Un(Z.Z)),this._polylineX=i.primitives.add(Hn(Z.X)),this._polylineY=i.primitives.add(Hn(Z.Y)),this._polylineZ=i.primitives.add(Hn(Z.Z)),this._scene=i,this._canvas=i.canvas,this._enableNonUniformScaling=t.enableNonUniformScaling,this._setPositionCallback=t.setPosition,this._setScaleCallback=t.setScale,this._modelMatrix=new Jt,this._pickedAxis=void 0,this._dragAlongVector=void 0,this._offsetVector=new tt,this._pickingPlane=new Sr(tt.UNIT_X,0),this._dragging=!1,this._startPosition=new tt,this._startScale=new tt,this._startOffset=new tt,this._startTransform=new Jt,this._active=!1,this._transform=o,this._lineLength=t.radius*1.5,this._pixelSize=He(t.pixelSize)?new Ni(t.pixelSize,t.pixelSize):new Ni(vr,vr),this._maximumSizeInMeters=He(t.maximumSizeInMeters)?new Ni(t.maximumSizeInMeters,t.maximumSizeInMeters):new Ni(wr,wr),this.update()}Object.defineProperties(Me.prototype,{active:{get:function(){return this._active},set:function(t){this._active=t,t?(this._pointX.show=!0,this._pointY.show=!0,this._pointZ.show=!0,this._polylineX.show=!0,this._polylineY.show=!0,this._polylineZ.show=!0):(this._pointX.show=!1,this._pointY.show=!1,this._pointZ.show=!1,this._polylineX.show=!1,this._polylineY.show=!1,this._polylineZ.show=!1,this._dragging=!1)}},pixelSize:{get:function(){return this._pixelSize.x}},maximumSizeInMeters:{get:function(){return this._maximumSizeInMeters.x}}});Me.prototype.handleLeftDown=function(t){let i=this._scene,o=this._transform,c=i.camera,h=i.drillPick(t),b=Jt.getTranslation(o,Yc),x;for(let e=0;e<h.length;e++){let at=h[e];if(He(at.id)&&He(Z[at.id])){x=at.id;break}}if(!He(x))return;let S=Z.getValue(x),O=Jt.multiplyByPointAsVector(this._modelMatrix,S,Pr),D=Gc;Math.abs(tt.dot(c.upWC,O))>.7?D=tt.cross(c.rightWC,O,D):D=tt.cross(c.upWC,O,D),tt.normalize(D,D);let L=Sr.fromPointNormal(b,D,this._pickingPlane),F=br.rayPlane(c.getPickRay(t,Cr),L,this._startPosition);if(!He(F))return;this._offsetVector=tt.subtract(F,b,this._offsetVector),this._dragging=!0;let B=Jt.getScale(o,this._startScale),U;x===Z.X?U=B.x:x===Z.Y?U=B.y:U=B.z,this._startValue=U,this._startOffset=tt.multiplyComponents(this.originOffset,B,this._startOffset),this._dragAlongVector=S,this._pickedAxis=x,this._startTransform=Jt.setScale(o,Jc,this._startTransform),i.screenSpaceCameraController.enableInputs=!1};Me.prototype.handleMouseMove=function(t){if(!this._dragging)return;let o=this._scene.camera,c=br.rayPlane(o.getPickRay(t,Cr),this._pickingPlane,$c);if(!He(c))return;let h=this._dragAlongVector,b=Jt.multiplyByPointAsVector(this._modelMatrix,h,Pr),x=tt.subtract(c,this._startPosition,Zc);x=tt.projectVector(x,b,x);let S=tt.magnitude(x);if(tt.dot(x,this._offsetVector)<0&&(S=-S),S/=this._lineLength,S+=this._startValue,S<=0)return;let O=this._pickedAxis,D=this._startScale;this._enableNonUniformScaling()?O===Z.X?D.x=S:O===Z.Y?D.y=S:D.z=S:(D.x=S,D.y=S,D.z=S);let L=tt.multiplyComponents(this.originOffset,D,qc);L=tt.subtract(this._startOffset,L,L),L=Jt.multiplyByPoint(this._startTransform,L,L),this._setScaleCallback(D),this._setPositionCallback(L)};Me.prototype.handleLeftUp=function(){this._dragging=!1,this._scene.screenSpaceCameraController.enableInputs=!0};Me.prototype.update=function(){let t=this._transform,i=he(t,this.originOffset,Wc),o=this._modelMatrix;o=Jt.multiplyByUniformScale(t,this._lineLength,o),o=Jt.setTranslation(this._modelMatrix,i,o);let c=this._pixelSize.x>0;c&&(o=re(this._pixelSize,this._maximumSizeInMeters,this._scene.frameState,o,o)),c&&this._enableNonUniformScaling&&(Nt=Jt.getScale(o,Nt),Nt.x>=Nt.y?(Nt.y=Nt.x,Nt.z=Nt.x):Nt.y>=Nt.x&&(Nt.x=Nt.y,Nt.z=Nt.y),o=Jt.setScale(o,Nt,o)),this._polylineX.modelMatrix=o,this._polylineY.modelMatrix=o,this._polylineZ.modelMatrix=o,this._points.modelMatrix=o};Me.prototype.isDestroyed=function(){return!1};Me.prototype.destroy=function(){this.active=!1;let t=this._scene;this._points.removeAll(),t.primitives.remove(this._polylineX),t.primitives.remove(this._polylineY),t.primitives.remove(this._polylineZ),t.primitives.remove(this._points),Uc(this)};var Vn=Me;import{destroyObject as Tu,Frozen as Mu,getElement as Ou}from"@cesium/engine";import{Cartesian2 as su,Cartesian3 as dt,defined as Ri,destroyObject as au,Frozen as lu,HeadingPitchRoll as Gn,Math as mi,Matrix3 as cu,Matrix4 as Mt,Quaternion as gi,ScreenSpaceEventHandler as uu,ScreenSpaceEventType as Ze,Transforms as Ar,SceneTransforms as hu}from"@cesium/engine";import{Cartesian2 as Li,Cartesian3 as _t,defined as Ve,destroyObject as Xc,Frozen as Qc,HeadingPitchRoll as Kc,IntersectionTests as Mr,Matrix4 as fe,Plane as Or,Ray as tu,Transforms as xr}from"@cesium/engine";var eu=new _t,Wn=new _t,Ir=new _t,iu=new _t,nu=new _t,ou=new _t,ru=new _t,Dr=new tu,Er=100,Tr=1/0;function jn(t){return new _e({positions:[_t.ZERO,Z.getValue(t)],arrow:!0,color:Z.getColor(t),id:t,show:!1})}function Oe(t){t=t??Qc.EMPTY_OBJECT;let i=t.scene;this.originOffset=t.originOffset,this._polylineX=i.primitives.add(jn(Z.X)),this._polylineY=i.primitives.add(jn(Z.Y)),this._polylineZ=i.primitives.add(jn(Z.Z)),this._scene=i,this._canvas=i.canvas,this._setPositionCallback=t.setPosition,this._modelMatrix=new fe,this._fixedFrame=new fe,this._hpr=new Kc,this._dragAlongVector=void 0,this._offsetVector=new _t,this._pickingPlane=new Or(_t.UNIT_X,0),this._dragging=!1,this._active=!1,this._transform=t.transform,this._radius=t.radius,this._pixelSize=Ve(t.pixelSize)?new Li(t.pixelSize,t.pixelSize):new Li(Er,Er),this._maximumSizeInMeters=Ve(t.maximumSizeInMeters)?new Li(t.maximumSizeInMeters,t.maximumSizeInMeters):new Li(Tr,Tr),this.update()}Object.defineProperties(Oe.prototype,{active:{get:function(){return this._active},set:function(t){this._active=t,t?(this._polylineX.show=!0,this._polylineY.show=!0,this._polylineZ.show=!0):(this._polylineX.show=!1,this._polylineY.show=!1,this._polylineZ.show=!1,this._dragging=!1)}},pixelSize:{get:function(){return this._pixelSize.x}},maximumSizeInMeters:{get:function(){return this._maximumSizeInMeters.x}}});Oe.prototype.update=function(){let t=this._transform,i=this._scene.mapProjection.ellipsoid,o=this._modelMatrix,c=fe.getTranslation(t,Wn),h=he(t,this.originOffset,eu),b=this._radius*fe.getMaximumScale(this._transform)*1.5,x=xr.fixedFrameToHeadingPitchRoll(this._transform,i,void 0,this._hpr);x.pitch=0,x.roll=0;let S=xr.headingPitchRollToFixedFrame(c,x,i,void 0,this._fixedFrame);S=fe.setTranslation(S,h,S),o=fe.multiplyByUniformScale(S,b,o),this._pixelSize.x>0&&(o=re(this._pixelSize,this._maximumSizeInMeters,this._scene.frameState,o,o)),this._polylineX.modelMatrix=o,this._polylineY.modelMatrix=o,this._polylineZ.modelMatrix=o};Oe.prototype.handleLeftDown=function(t){let i=this._scene,o=i.camera,c=i.drillPick(t),h;for(let F=0;F<c.length;F++){let B=c[F];if(Ve(B.id)&&Ve(Z[B.id])){h=B.id;break}}if(!Ve(h))return;let b=fe.getTranslation(this._transform,Wn),x=Z.getValue(h),S=fe.multiplyByPointAsVector(this._fixedFrame,x,Ir),O=iu;Math.abs(_t.dot(o.upWC,S))>.7?O=_t.cross(o.rightWC,S,O):O=_t.cross(o.upWC,S,O),_t.normalize(O,O);let D=Or.fromPointNormal(b,O,this._pickingPlane),L=Mr.rayPlane(o.getPickRay(t,Dr),D,this._offsetVector);Ve(L)&&(_t.subtract(L,b,L),this._dragging=!0,this._dragAlongVector=x,i.screenSpaceCameraController.enableInputs=!1)};Oe.prototype.handleMouseMove=function(t){if(!this._dragging)return;let o=this._scene.camera,c=Mr.rayPlane(o.getPickRay(t,Dr),this._pickingPlane,nu);if(!Ve(c))return;let h=this._dragAlongVector,b=fe.getTranslation(this._transform,Wn),x=fe.multiplyByPointAsVector(this._fixedFrame,h,Ir),S=_t.subtract(c,b,ou);S=_t.projectVector(S,x,S);let O=_t.projectVector(this._offsetVector,x,ru);S=_t.subtract(S,O,S),b=_t.add(b,S,b),this._setPositionCallback(b)};Oe.prototype.handleLeftUp=function(){this._dragging=!1,this._scene.screenSpaceCameraController.enableInputs=!0};Oe.prototype.isDestroyed=function(){return!1};Oe.prototype.destroy=function(){this.active=!1;let t=this._scene;t.primitives.remove(this._polylineX),t.primitives.remove(this._polylineY),t.primitives.remove(this._polylineZ),Xc(this)};var Yn=Oe;var fu=new dt,pu=new su,du=new dt(1,1,1),mu=new Mt,gu=new dt,_u=new dt,yu=100,vu=1/0,wu=new gi,bu=new gi,Su=new dt,Pu=new dt,Cu=new dt,xu=new Mt,Eu=new cu;function $n(t,i){let o=gi.fromHeadingPitchRoll(i,wu),c=Mt.getTranslation(t,Su),h=Mt.getScale(t,Pu),b=Mt.multiplyByPoint(t,dt.ZERO,Cu),x=Ar.eastNorthUpToFixedFrame(b,void 0,xu),S=Mt.getMatrix3(x,Eu),O=gi.fromRotationMatrix(S,bu),D=gi.multiply(O,o,S);return Mt.fromTranslationQuaternionRotationScale(c,D,h,t)}function xt(t){t=t??lu.EMPTY_OBJECT;let i=t.scene,o=t.transform,c=t.boundingSphere.clone(),h=t.originOffset??dt.ZERO,b=Mt.getTranslation(o,new dt),x=Ar.fixedFrameToHeadingPitchRoll(o,i.mapProjection.ellipsoid,void 0,new Gn),S=Mt.getScale(o,new dt);dt.equalsEpsilon(b,dt.ZERO,mi.EPSILON10)&&(b=dt.fromDegrees(0,0,0,i.mapProjection.ellipsoid,b),o=Mt.setTranslation(o,b,o),$n(o,x));let O=!0;mi.equalsEpsilon(S.x,S.y,mi.EPSILON10)&&mi.equalsEpsilon(S.x,S.z,mi.EPSILON10)&&(O=!1,S.y=S.x,S.z=S.x);let D=c.radius/dt.maximumComponent(S);this._pixelSize=t.pixelSize??yu,this._maximumSizeInMeters=t.maximumSizeInMeters??vu,this.editorMode=void 0;let L=it.observable();it.defineProperty(this,"editorMode",{get:function(){return L()},set:function(R){L(R),Ri(this._activeEditor)&&(this._activeEditor.active=!1);let Y;R===ye.ROTATION?Y=this._rotationEditor:R===ye.TRANSLATION?Y=this._translationEditor:R===ye.SCALE&&(Y=this._scaleEditor),Y.update(),Y.active=!0,this._activeEditor=Y}}),this.enableNonUniformScaling=O;let F=it.observable(this.enableNonUniformScaling);it.defineProperty(this,"enableNonUniformScaling",{get:function(){return F()},set:function(R){R!==F()&&(F(R),R||(this.scale=new dt(S.x,S.x,S.x),i.requestRenderMode&&i.requestRender()))}}),this.position=b;let B=it.observable(this.position);it.defineProperty(this,"position",{get:function(){return B()},set:function(R){if(dt.equals(R,this.position))return;let Y=dt.clone(R,this.position);B(Y);let Q=this._transform;Q=Mt.setTranslation(Q,Y,Q),$n(Q,this.headingPitchRoll),i.requestRenderMode&&i.requestRender()}}),this.headingPitchRoll=x;let U=it.observable(this.headingPitchRoll);it.defineProperty(this,"headingPitchRoll",{get:function(){return U()},set:function(R){if(Gn.equals(R,this.headingPitchRoll))return;let Y=Gn.clone(R,this.headingPitchRoll);U(Y),$n(this._transform,Y),i.requestRenderMode&&i.requestRender()}}),this.scale=S;let e=it.observable(this.scale);it.defineProperty(this,"scale",{get:function(){return e()},set:function(R){if(dt.equals(R,this.scale))return;let Y=dt.clone(R,this.scale);e(Y),Mt.setScale(this._transform,Y,this._transform),this._translationEditor.update(),this._rotationEditor.update(),i.requestRenderMode&&i.requestRender()}}),this.menuExpanded=!1,this.left="0",this.top="0",this.active=!1,it.track(this,["menuExpanded","left","top","active"]);let at=this;this._rotationEditor=new Bn({scene:i,transform:o,radius:D,pixelSize:this._pixelSize,maximumSizeInMeters:this._maximumSizeInMeters,originOffset:h,setPosition:function(R){at.position=R},setHeadingPitchRoll:function(R){at.headingPitchRoll=R}}),this._translationEditor=new Yn({scene:i,transform:o,radius:D,pixelSize:this._pixelSize,maximumSizeInMeters:this._maximumSizeInMeters,originOffset:h,setPosition:function(R){at.position=R}}),this._scaleEditor=new Vn({scene:i,transform:o,enableNonUniformScaling:F,radius:D,pixelSize:this._pixelSize,maximumSizeInMeters:this._maximumSizeInMeters,originOffset:h,setScale:function(R){at.scale=R},setPosition:function(R){at.position=R}}),this._sseh=new uu(i.canvas),this._scene=i,this._transform=o,this._boundingSphere=c,this._active=!1,this._activeEditor=void 0,this._originOffset=h,this.position=b,this.headingPitchRoll=x,this.scale=S,this._removePostUpdateEvent=this._scene.preUpdate.addEventListener(xt.prototype._update,this)}Object.defineProperties(xt.prototype,{originOffset:{get:function(){return this._originOffset},set:function(t){this._originOffset=t,this._translationEditor.originOffset=t,this._rotationEditor.originOffset=t,this._scaleEditor.originOffset=t}},pixelSize:{get:function(){return this._pixelSize}},maximumSizeInMeters:{get:function(){return this._maximumSizeInMeters}}});xt.prototype.setOriginPosition=function(t){let i=Mt.setScale(this._transform,du,mu),o=Mt.inverseTransformation(i,i),c=Mt.multiplyByPoint(o,t,gu),h=dt.divideComponents(c,Mt.getScale(this._transform,_u),c);this.originOffset=h};xt.prototype.activate=function(){let t=this._sseh,i=this._scene;t.setInputAction(this._leftDown.bind(this),Ze.LEFT_DOWN),t.setInputAction(this._leftUp.bind(this),Ze.LEFT_UP),t.setInputAction(this._mouseMove.bind(this),Ze.MOUSE_MOVE),this.active=!0,Ri(this._activeEditor)?this._activeEditor.active=!0:this.setModeTranslation(),i.requestRenderMode&&i.requestRender()};xt.prototype.deactivate=function(){let t=this._sseh,i=this._scene;t.removeInputAction(Ze.LEFT_DOWN),t.removeInputAction(Ze.LEFT_UP),t.removeInputAction(Ze.MOUSE_MOVE),this.active=!1,Ri(this._activeEditor)&&(this._activeEditor.active=!1),i.requestRenderMode&&i.requestRender()};xt.prototype.expandMenu=function(){this.menuExpanded=!0};xt.prototype.setModeTranslation=function(){this.editorMode=ye.TRANSLATION,this.menuExpanded=!1};xt.prototype.setModeRotation=function(){this.editorMode=ye.ROTATION,this.menuExpanded=!1};xt.prototype.setModeScale=function(){this.editorMode=ye.SCALE,this.menuExpanded=!1};xt.prototype.toggleNonUniformScaling=function(){this.enableNonUniformScaling=!this.enableNonUniformScaling};xt.prototype._leftDown=function(t){this._activeEditor.handleLeftDown(t.position);let i=this._scene;i.requestRenderMode&&i.requestRender()};xt.prototype._mouseMove=function(t){this._activeEditor.handleMouseMove(t.endPosition);let i=this._scene;i.requestRenderMode&&i.requestRender()};xt.prototype._leftUp=function(t){this.menuExpanded=!1,this._activeEditor.handleLeftUp(t.position);let i=this._scene;i.requestRenderMode&&i.requestRender()};xt.prototype._update=function(){if(!this.active)return;this._activeEditor.update();let t=this._scene,i=he(this._transform,this._originOffset,fu),o=hu.worldToWindowCoordinates(t,i,pu);Ri(o)&&(this.left=`${Math.floor(o.x-13)}px`,this.top=`${Math.floor(o.y)}px`)};xt.prototype.isDestroyed=function(){return!1};xt.prototype.destroy=function(){this.deactivate(),this._sseh.destroy(),this._rotationEditor.destroy(),this._translationEditor.destroy(),this._scaleEditor.destroy(),this._removePostUpdateEvent(),au(this)};xt.EditorMode=ye;var Zn=xt;var Iu=`<div class="transform-editor-menu" data-bind="style: {left: left, top: top}, visible: active">        <div class="cesium-button transform-editor-button" data-bind="click: expandMenu, visible: !menuExpanded">            <svg width="20" height="20" viewBox="0 0 20 20">                <g>                    <circle cx="2" cy="10" r="2" />                    <circle cx="10" cy="10" r="2" />                    <circle cx="18" cy="10" r="2" />                </g>            </svg>        </div>        <div class="transform-editor-options" data-bind="visible: menuExpanded">            <div class="transform-editor-button-row">                <div title="Translation" data-bind="click: setModeTranslation, css: {selected: editorMode === 'translation'}">                    <svg viewBox="0 0 25 25" height="25" width="25">                        <g>                            <circle r="3" cy="22" cx="3" />                            <path d="M 19.543379,4.59439 3.9750205,19.96158 5.3793174,21.3854 20.947676,6.01822 Z"/>                            <path d="m 14.699824,3.80366 10.231411,-3.34922 -3.215586,10.03096 z"/>                        </g>                    </svg>                </div                ><div title="Rotation" data-bind="click: setModeRotation, css: {selected: editorMode === 'rotation'}">                    <svg viewBox="0 0 25 25" height="25" width="25">                        <g>                            <path d="M 13.033371,10.08295 2.6713568,7.16272 10.931013,0.62527 Z"/>                            <path d="m 13.741358,3.87055 c -0.747592,-0.006 -1.506137,0.0593 -2.263621,0.20287 l 0.484334,2.29127 c 4.712769,-0.89305 9.471467,2.11386 10.414021,6.57912 0.942553,4.46525 -2.229345,8.97402 -6.942115,9.86707 -4.71277,0.89305 -9.4731664,-2.11226 -10.4157205,-6.57752 l -2.4165696,0.45729 c 1.2119755,5.74161 7.2550484,9.55981 13.3149241,8.41149 6.059877,-1.14833 10.089725,-6.87562 8.87775,-12.61723 -1.060479,-5.02391 -5.819851,-8.57436 -11.053003,-8.61436 z"/>                        </g>                    </svg>               </div>            </div>            <div class="transform-editor-button-row">                <div title="Scale" data-bind="click: setModeScale, css: {selected: editorMode === 'scale'}">                    <svg width="25" height="25" viewBox="0 0 25 25">                        <g>                            <path d="M 19.543379,4.59439 3.9750205,19.96158 5.3793174,21.3854 20.947676,6.01822 Z"/>                            <path d="m 14.699824,3.80366 10.231411,-3.34922 -3.215586,10.03096 z" />                            <path d="M 10.333866,21.9809 0.10245523,25.33012 3.3180412,15.29916 Z" />                        </g>                    </svg>                </div                ><div data-bind="click: toggleNonUniformScaling">                    <div title="Switch to non-uniform scaling" data-bind="visible: !enableNonUniformScaling">                        <svg width="25" height="25" viewBox="0 0 25 25">                            <g>                                <path d="m 0.5,1.38477 h 1.9960938 v -1 H 0.5 c 0,0.33333 0,0.66667 0,1 z m 2.9941406,0 h 1.9980469 v -1 H 3.4941406 Z m 2.9960938,0 h 1.9960937 v -1 H 6.4902344 Z m 2.9960937,0 h 1.9960939 v -1 H 9.4863281 Z m 2.9941409,0 h 1.998047 v -1 h -1.998047 z m 2.996093,0 h 1.996094 v -1 h -1.996094 z m 2.994141,0 h 1.998047 v -1 h -1.998047 z m 2.996094,0 h 1.998047 v -1 h -1.998047 z m 2.535156,-0.5 v 1.95898 H 25 v -1.95898 z M 0,4.0332 h 0.99804688 v -1.99609 H 0 Z m 24.001953,1.80469 H 25 V 3.8418 H 24.001953 Z M 0,7.0293 h 0.99804688 v -1.99805 H 0 Z m 24.001953,1.80468 H 25 v -1.99609 H 24.001953 Z M 0,10.02344 h 0.99804688 v -1.9961 H 0 Z m 24.001953,1.80664 H 25 v -1.99805 H 24.001953 Z M 0,13.01953 h 0.99804688 v -1.99609 H 0 Z m 24.001953,1.80469 H 25 v -1.9961 H 24.001953 Z M 0,16.01562 h 0.99804688 v -1.99804 H 0 Z m 24.001953,1.80469 H 25 v -1.99804 H 24.001953 Z M 0,19.00977 h 0.99804688 v -1.9961 H 0 Z m 24.001953,1.80664 H 25 v -1.99805 H 24.001953 Z M 0,22.00586 h 0.99804688 v -1.99609 H 0 Z m 24.001953,1.80469 H 25 v -1.9961 H 24.001953 Z M 0,24.88672 v 0.49805 h 0.5 0.11523438 v -0.49805 h 0.3828125 v -1.88281 H 0 Z m 1.6132812,0.49805 H 3.609375 v -0.99805 H 1.6132812 Z m 2.9941407,0 h 1.9980469 v -0.99805 H 4.6074219 Z m 2.9960937,0 h 1.9980469 v -0.99805 H 7.6035156 Z m 2.9960934,0 h 1.996094 v -0.99805 h -1.996094 z m 2.994141,0 h 1.998047 v -0.99805 H 13.59375 Z m 2.996094,0 h 1.996094 v -0.99805 h -1.996094 z m 2.996094,0 h 1.996093 v -0.99805 h -1.996093 z m 2.99414,0 H 24.5 25 v -0.49805 -0.0781 h -0.5 v -0.42187 h -1.919922 z" />                                <path d="m 0,10.38477 v 1.02343 13.97657 h 15 v -15 z m 2.0449219,2.04492 H 12.955078 V 23.3418 H 2.0449219 Z"/>                                <g>                                    <path d="m 21.158203,3.81836 0.355469,0.35156 0.351562,-0.35547 -0.353515,-0.35156 z m -0.703125,0.70898 0.355469,0.35157 0.351562,-0.35352 -0.355468,-0.35351 z m -0.705078,0.71094 0.355469,0.35156 0.351562,-0.35546 -0.353515,-0.35157 z m -0.703125,0.70899 0.355469,0.35351 0.351562,-0.35547 -0.355468,-0.35156 z m -0.705078,0.71093 0.355469,0.35157 0.353515,-0.35547 -0.355469,-0.35157 z m -0.703125,0.71094 0.355469,0.35156 0.351562,-0.35547 -0.355469,-0.35156 z m -0.703125,0.70898 0.353515,0.35157 0.353516,-0.35352 -0.355469,-0.35351 z m -0.705078,0.71094 0.355469,0.35156 0.351562,-0.35546 -0.355469,-0.35157 z m -0.703125,0.70899 0.353515,0.35351 0.353516,-0.35547 -0.355469,-0.35351 z m -0.705078,0.71093 0.355468,0.35157 0.351563,-0.35547 -0.355469,-0.35156 z"/>                                    <path d="m 23.382049,1.93037 -1.015775,3.8652 -2.840556,-2.81624 z"/>                                </g>                            </g>                        </svg>                    </div>                    <div title="Switch to uniform scaling" data-bind="visible: enableNonUniformScaling">                        <svg width="25" height="25" viewBox="0 0 25 25">                            <g>                                <path d="M 0.49414062,10.87891 H 0 v 1.95117 h 0.98828125 v -1.45703 H 2.4707031 v -0.98828 H 0.49414062 Z m 2.96289058,0.49414 h 1.9765626 v -0.98828 H 3.4570312 Z m 2.9648438,0 h 1.9765625 v -0.98828 H 6.421875 Z m 2.9628906,0 h 1.9765624 v -0.98828 H 9.3847656 Z m 2.9648434,0 h 1.976563 v -0.98828 h -1.976563 z m 2.964844,0 h 1.974609 v -0.98828 h -1.974609 z m 2.962891,0 h 1.976562 v -0.98828 h -1.976562 z m 2.964844,0 h 1.974609 v -0.98828 h -1.974609 z m 2.96289,-0.49414 h -0.193359 v 1.67578 H 25 v -1.67578 -0.49414 h -0.494141 -0.300781 z m -0.193359,4.63867 H 25 v -1.97461 H 24.011719 Z M 0,15.79297 h 0.98828125 v -1.97461 H 0 Z m 24.011719,2.68945 H 25 v -1.97656 H 24.011719 Z M 0,18.75781 h 0.98828125 v -1.97656 H 0 Z m 24.011719,2.6875 H 25 V 19.4707 H 24.011719 Z M 0,21.7207 h 0.98828125 v -1.97461 H 0 Z m 24.011719,2.68946 H 25 v -1.97657 H 24.011719 Z M 0,24.68555 h 0.98828125 v -1.97657 H 0 Z m 1.2753906,0.69922 h 1.9765625 v -0.98829 H 1.2753906 Z m 2.9648438,0 h 1.9765625 v -0.98829 H 4.2402344 Z m 2.9628906,0 h 1.9765625 v -0.98829 H 7.203125 Z m 2.964844,0 h 1.976562 v -0.98829 h -1.976562 z m 2.96289,0 h 1.976563 v -0.98829 h -1.976563 z m 2.964844,0 h 1.976563 v -0.98829 h -1.976563 z m 2.962891,0 h 1.976562 v -0.98829 h -1.976562 z m 2.964844,0 H 24 v -0.98829 h -1.976562 z"/>                                <path d="m 0,10.38477 v 1.02343 13.97657 h 15 v -15 z m 2.0449219,2.04492 H 12.955078 V 23.3418 H 2.0449219 Z"/>                                <g>                                    <path d="m 22.251953,18.26172 h 0.179688 l -0.0039,-0.5 h -0.179687 z m -1.003906,-0.49024 0.0039,0.5 0.5,-0.004 -0.0039,-0.5 z m -1,0.008 0.0039,0.5 0.5,-0.004 -0.0039,-0.5 z m -1,0.01 0.0039,0.5 0.5,-0.006 -0.0039,-0.5 z m -1,0.008 0.0039,0.5 0.5,-0.004 -0.0039,-0.5 z m -1,0.008 0.0039,0.5 0.5,-0.004 -0.0039,-0.5 z m -1,0.01 0.0039,0.5 0.5,-0.004 -0.0039,-0.5 z m -1,0.008 0.0039,0.5 0.5,-0.004 -0.0039,-0.5 z"/>                                    <path d="m 23.885095,18.00809 -2.030696,1.17348 -0.02037,-2.31243 z"/>                                </g>                            </g>                        </svg>                    </div>                </div>            </div>        </div>    </div>`;function Fi(t){t=t??Mu.EMPTY_OBJECT;let i=Ou(t.container),o=Je(Iu);i.appendChild(o);let c=new Zn(t);it.applyBindings(c,o),this._viewModel=c,this._element=o,this._container=i}Object.defineProperties(Fi.prototype,{container:{get:function(){return this._container}},viewModel:{get:function(){return this._viewModel}}});Fi.prototype.isDestroyed=function(){return!1};Fi.prototype.destroy=function(){return it.cleanNode(this._element),this._container.removeChild(this._element),this._viewModel.destroy(),Tu(this)};var Du=Fi;import{clone as Au,Frozen as ku,wrapFunction as Nu}from"@cesium/engine";function Lu(t,i){i=i??ku.EMPTY_OBJECT;let o=t.scene,c=document.createElement("div");c.className="cesium-viewer-measureContainer",t._toolbar.insertBefore(c,t._toolbar.firstChild),i=Au(i),i.container=c,i.scene=o;let h=new Dn(i),b=o.postUpdate.addEventListener(function(){let x=t._container.clientHeight-125;h._dropdown.style.maxHeight=`${x}px`});t.destroy=Nu(t,t.destroy,function(){b(),h.destroy()}),Object.defineProperties(t,{measure:{get:function(){return h}}})}var Ru=Lu;globalThis.ION_SDK_VERSION="1.133";export{et as AngleUnits,un as AreaMeasurement,cn as AreaMeasurementDrawing,ht as AreaUnits,_e as AxisLinePrimitive,ei as ClippingPlanePrimitive,Cs as ClippingPlanesEditor,Ci as DistanceMeasurement,gt as DistanceUnits,K as DrawingMode,ye as EditorMode,fn as HeightMeasurement,dn as HorizontalMeasurement,pn as HorizontalMeasurementDrawing,Pe as HorizontalPolylineDrawing,Dn as Measure,J as MeasureUnits,In as MeasureViewModel,ut as Measurement,yn as MeasurementMouseHandler,W as MeasurementSettings,Sn as PointMeasurement,Ce as PolygonDrawing,en as PolygonPrimitive,Lt as PolylineDrawing,xn as PolylineMeasurement,Cn as PolylineMeasurementDrawing,Tt as PolylinePrimitive,Bn as RotationEditor,Vn as ScaleEditor,zi as SvgPathBindingHandler,Z as TransformAxis,Du as TransformEditor,Zn as TransformEditorViewModel,Yn as TranslationEditor,Mn as VerticalMeasurement,Bi as VisibilityState,St as VolumeUnits,Je as createDomNode,ct as filterPickForMeasurement,re as getScreenSpaceScalingMatrix,vn as getSlope,he as getWidgetOrigin,Ot as getWorldPosition,it as knockout,ui as knockout_3_5_1,_n as knockout_es5,Ru as viewerMeasureMixin};
