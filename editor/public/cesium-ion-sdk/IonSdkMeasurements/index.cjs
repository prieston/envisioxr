/**
 * @license
 * Cesium Analytics SDK
 * Version 1.133
 *
 * Copyright 2012-2020 Cesium GS, Inc.
 * All rights reserved.
 *
 * Patents US9153063B2 US9865085B1 US9449424B2 US10592242
 * Patents pending US15/829,786 US16/850,266 US16/851,958
 *
 * Portions licensed separately.
 * See https://github.com/CesiumGS/cesium/blob/main/LICENSE.md for open-source Cesium license.
 */

var tY=Object.create;var eE=Object.defineProperty;var nY=Object.getOwnPropertyDescriptor;var iY=Object.getOwnPropertyNames;var oY=Object.getPrototypeOf,rY=Object.prototype.hasOwnProperty;var Fs=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),aY=(e,t)=>{for(var n in t)eE(e,n,{get:t[n],enumerable:!0})},gD=(e,t,n,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of iY(t))!rY.call(e,o)&&o!==n&&eE(e,o,{get:()=>t[o],enumerable:!(i=nY(t,o))||i.enumerable});return e};var ls=(e,t,n)=>(n=e!=null?tY(oY(e)):{},gD(t||!e||!e.__esModule?eE(n,"default",{value:e,enumerable:!0}):n,e)),sY=e=>gD(eE({},"__esModule",{value:!0}),e);var Nb=Fs((yTe,_D)=>{var el=function(e){e==null&&(e=new Date().getTime()),this.N=624,this.M=397,this.MATRIX_A=2567483615,this.UPPER_MASK=2147483648,this.LOWER_MASK=2147483647,this.mt=new Array(this.N),this.mti=this.N+1,e.constructor==Array?this.init_by_array(e,e.length):this.init_seed(e)};el.prototype.init_seed=function(e){for(this.mt[0]=e>>>0,this.mti=1;this.mti<this.N;this.mti++){var e=this.mt[this.mti-1]^this.mt[this.mti-1]>>>30;this.mt[this.mti]=(((e&4294901760)>>>16)*1812433253<<16)+(e&65535)*1812433253+this.mti,this.mt[this.mti]>>>=0}};el.prototype.init_by_array=function(e,t){var n,i,o;for(this.init_seed(19650218),n=1,i=0,o=this.N>t?this.N:t;o;o--){var r=this.mt[n-1]^this.mt[n-1]>>>30;this.mt[n]=(this.mt[n]^(((r&4294901760)>>>16)*1664525<<16)+(r&65535)*1664525)+e[i]+i,this.mt[n]>>>=0,n++,i++,n>=this.N&&(this.mt[0]=this.mt[this.N-1],n=1),i>=t&&(i=0)}for(o=this.N-1;o;o--){var r=this.mt[n-1]^this.mt[n-1]>>>30;this.mt[n]=(this.mt[n]^(((r&4294901760)>>>16)*1566083941<<16)+(r&65535)*1566083941)-n,this.mt[n]>>>=0,n++,n>=this.N&&(this.mt[0]=this.mt[this.N-1],n=1)}this.mt[0]=2147483648};el.prototype.random_int=function(){var e,t=new Array(0,this.MATRIX_A);if(this.mti>=this.N){var n;for(this.mti==this.N+1&&this.init_seed(5489),n=0;n<this.N-this.M;n++)e=this.mt[n]&this.UPPER_MASK|this.mt[n+1]&this.LOWER_MASK,this.mt[n]=this.mt[n+this.M]^e>>>1^t[e&1];for(;n<this.N-1;n++)e=this.mt[n]&this.UPPER_MASK|this.mt[n+1]&this.LOWER_MASK,this.mt[n]=this.mt[n+(this.M-this.N)]^e>>>1^t[e&1];e=this.mt[this.N-1]&this.UPPER_MASK|this.mt[0]&this.LOWER_MASK,this.mt[this.N-1]=this.mt[this.M-1]^e>>>1^t[e&1],this.mti=0}return e=this.mt[this.mti++],e^=e>>>11,e^=e<<7&2636928640,e^=e<<15&4022730752,e^=e>>>18,e>>>0};el.prototype.random_int31=function(){return this.random_int()>>>1};el.prototype.random_incl=function(){return this.random_int()*(1/4294967295)};el.prototype.random=function(){return this.random_int()*(1/4294967296)};el.prototype.random_excl=function(){return(this.random_int()+.5)*(1/4294967296)};el.prototype.random_long=function(){var e=this.random_int()>>>5,t=this.random_int()>>>6;return(e*67108864+t)*(1/9007199254740992)};_D.exports=el});var YD=Fs((ch,Ah)=>{/*! https://mths.be/punycode v1.4.0 by @mathias */(function(e){var t=typeof ch=="object"&&ch&&!ch.nodeType&&ch,n=typeof Ah=="object"&&Ah&&!Ah.nodeType&&Ah,i=typeof global=="object"&&global;(i.global===i||i.window===i||i.self===i)&&(e=i);var o,r=2147483647,a=36,s=1,A=26,l=38,d=700,m=72,p=128,g="-",h=/^xn--/,C=/[^\x20-\x7E]/,_=/[\x2E\u3002\uFF0E\uFF61]/g,I={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},b=a-s,x=Math.floor,T=String.fromCharCode,w;function R(P){throw new RangeError(I[P])}function z(P,U){for(var k=P.length,j=[];k--;)j[k]=U(P[k]);return j}function M(P,U){var k=P.split("@"),j="";k.length>1&&(j=k[0]+"@",P=k[1]),P=P.replace(_,".");var q=P.split("."),$=z(q,U).join(".");return j+$}function N(P){for(var U=[],k=0,j=P.length,q,$;k<j;)q=P.charCodeAt(k++),q>=55296&&q<=56319&&k<j?($=P.charCodeAt(k++),($&64512)==56320?U.push(((q&1023)<<10)+($&1023)+65536):(U.push(q),k--)):U.push(q);return U}function O(P){return z(P,function(U){var k="";return U>65535&&(U-=65536,k+=T(U>>>10&1023|55296),U=56320|U&1023),k+=T(U),k}).join("")}function u(P){return P-48<10?P-22:P-65<26?P-65:P-97<26?P-97:a}function E(P,U){return P+22+75*(P<26)-((U!=0)<<5)}function y(P,U,k){var j=0;for(P=k?x(P/d):P>>1,P+=x(P/U);P>b*A>>1;j+=a)P=x(P/b);return x(j+(b+1)*P/(P+l))}function B(P){var U=[],k=P.length,j,q=0,$=p,H=m,Z,ee,Ae,ge,ce,he,Ie,Ne,_e;for(Z=P.lastIndexOf(g),Z<0&&(Z=0),ee=0;ee<Z;++ee)P.charCodeAt(ee)>=128&&R("not-basic"),U.push(P.charCodeAt(ee));for(Ae=Z>0?Z+1:0;Ae<k;){for(ge=q,ce=1,he=a;Ae>=k&&R("invalid-input"),Ie=u(P.charCodeAt(Ae++)),(Ie>=a||Ie>x((r-q)/ce))&&R("overflow"),q+=Ie*ce,Ne=he<=H?s:he>=H+A?A:he-H,!(Ie<Ne);he+=a)_e=a-Ne,ce>x(r/_e)&&R("overflow"),ce*=_e;j=U.length+1,H=y(q-ge,j,ge==0),x(q/j)>r-$&&R("overflow"),$+=x(q/j),q%=j,U.splice(q++,0,$)}return O(U)}function D(P){var U,k,j,q,$,H,Z,ee,Ae,ge,ce,he=[],Ie,Ne,_e,ve;for(P=N(P),Ie=P.length,U=p,k=0,$=m,H=0;H<Ie;++H)ce=P[H],ce<128&&he.push(T(ce));for(j=q=he.length,q&&he.push(g);j<Ie;){for(Z=r,H=0;H<Ie;++H)ce=P[H],ce>=U&&ce<Z&&(Z=ce);for(Ne=j+1,Z-U>x((r-k)/Ne)&&R("overflow"),k+=(Z-U)*Ne,U=Z,H=0;H<Ie;++H)if(ce=P[H],ce<U&&++k>r&&R("overflow"),ce==U){for(ee=k,Ae=a;ge=Ae<=$?s:Ae>=$+A?A:Ae-$,!(ee<ge);Ae+=a)ve=ee-ge,_e=a-ge,he.push(T(E(ge+ve%_e,0))),ee=x(ve/_e);he.push(T(E(ee,0))),$=y(k,Ne,j==q),k=0,++j}++k,++U}return he.join("")}function v(P){return M(P,function(U){return h.test(U)?B(U.slice(4).toLowerCase()):U})}function F(P){return M(P,function(U){return C.test(U)?"xn--"+D(U):U})}if(o={version:"1.3.2",ucs2:{decode:N,encode:O},decode:B,encode:D,toASCII:F,toUnicode:v},typeof define=="function"&&typeof define.amd=="object"&&define.amd)define("punycode",function(){return o});else if(t&&n)if(Ah.exports==t)n.exports=o;else for(w in o)o.hasOwnProperty(w)&&(t[w]=o[w]);else e.punycode=o})(ch)});var qD=Fs((WD,bE)=>{/*!
 * URI.js - Mutating URLs
 * IPv6 Support
 *
 * Version: 1.19.11
 *
 * Author: Rodney Rehm
 * Web: http://medialize.github.io/URI.js/
 *
 * Licensed under
 *   MIT License http://www.opensource.org/licenses/mit-license
 *
 */(function(e,t){"use strict";typeof bE=="object"&&bE.exports?bE.exports=t():typeof define=="function"&&define.amd?define(t):e.IPv6=t(e)})(WD,function(e){"use strict";var t=e&&e.IPv6;function n(o){var r=o.toLowerCase(),a=r.split(":"),s=a.length,A=8;a[0]===""&&a[1]===""&&a[2]===""?(a.shift(),a.shift()):a[0]===""&&a[1]===""?a.shift():a[s-1]===""&&a[s-2]===""&&a.pop(),s=a.length,a[s-1].indexOf(".")!==-1&&(A=7);var l;for(l=0;l<s&&a[l]!=="";l++);if(l<A)for(a.splice(l,1,"0000");a.length<A;)a.splice(l,0,"0000");for(var d,m=0;m<A;m++){d=a[m].split("");for(var p=0;p<3&&(d[0]==="0"&&d.length>1);p++)d.splice(0,1);a[m]=d.join("")}var g=-1,h=0,C=0,_=-1,I=!1;for(m=0;m<A;m++)I?a[m]==="0"?C+=1:(I=!1,C>h&&(g=_,h=C)):a[m]==="0"&&(I=!0,_=m,C=1);C>h&&(g=_,h=C),h>1&&a.splice(g,h,""),s=a.length;var b="";for(a[0]===""&&(b=":"),m=0;m<s&&(b+=a[m],m!==s-1);m++)b+=":";return a[s-1]===""&&(b+=":"),b}function i(){return e.IPv6===this&&(e.IPv6=t),this}return{best:n,noConflict:i}})});var KD=Fs((JD,BE)=>{/*!
 * URI.js - Mutating URLs
 * Second Level Domain (SLD) Support
 *
 * Version: 1.19.11
 *
 * Author: Rodney Rehm
 * Web: http://medialize.github.io/URI.js/
 *
 * Licensed under
 *   MIT License http://www.opensource.org/licenses/mit-license
 *
 */(function(e,t){"use strict";typeof BE=="object"&&BE.exports?BE.exports=t():typeof define=="function"&&define.amd?define(t):e.SecondLevelDomains=t(e)})(JD,function(e){"use strict";var t=e&&e.SecondLevelDomains,n={list:{ac:" com gov mil net org ",ae:" ac co gov mil name net org pro sch ",af:" com edu gov net org ",al:" com edu gov mil net org ",ao:" co ed gv it og pb ",ar:" com edu gob gov int mil net org tur ",at:" ac co gv or ",au:" asn com csiro edu gov id net org ",ba:" co com edu gov mil net org rs unbi unmo unsa untz unze ",bb:" biz co com edu gov info net org store tv ",bh:" biz cc com edu gov info net org ",bn:" com edu gov net org ",bo:" com edu gob gov int mil net org tv ",br:" adm adv agr am arq art ato b bio blog bmd cim cng cnt com coop ecn edu eng esp etc eti far flog fm fnd fot fst g12 ggf gov imb ind inf jor jus lel mat med mil mus net nom not ntr odo org ppg pro psc psi qsl rec slg srv tmp trd tur tv vet vlog wiki zlg ",bs:" com edu gov net org ",bz:" du et om ov rg ",ca:" ab bc mb nb nf nl ns nt nu on pe qc sk yk ",ck:" biz co edu gen gov info net org ",cn:" ac ah bj com cq edu fj gd gov gs gx gz ha hb he hi hl hn jl js jx ln mil net nm nx org qh sc sd sh sn sx tj tw xj xz yn zj ",co:" com edu gov mil net nom org ",cr:" ac c co ed fi go or sa ",cy:" ac biz com ekloges gov ltd name net org parliament press pro tm ",do:" art com edu gob gov mil net org sld web ",dz:" art asso com edu gov net org pol ",ec:" com edu fin gov info med mil net org pro ",eg:" com edu eun gov mil name net org sci ",er:" com edu gov ind mil net org rochest w ",es:" com edu gob nom org ",et:" biz com edu gov info name net org ",fj:" ac biz com info mil name net org pro ",fk:" ac co gov net nom org ",fr:" asso com f gouv nom prd presse tm ",gg:" co net org ",gh:" com edu gov mil org ",gn:" ac com gov net org ",gr:" com edu gov mil net org ",gt:" com edu gob ind mil net org ",gu:" com edu gov net org ",hk:" com edu gov idv net org ",hu:" 2000 agrar bolt casino city co erotica erotika film forum games hotel info ingatlan jogasz konyvelo lakas media news org priv reklam sex shop sport suli szex tm tozsde utazas video ",id:" ac co go mil net or sch web ",il:" ac co gov idf k12 muni net org ",in:" ac co edu ernet firm gen gov i ind mil net nic org res ",iq:" com edu gov i mil net org ",ir:" ac co dnssec gov i id net org sch ",it:" edu gov ",je:" co net org ",jo:" com edu gov mil name net org sch ",jp:" ac ad co ed go gr lg ne or ",ke:" ac co go info me mobi ne or sc ",kh:" com edu gov mil net org per ",ki:" biz com de edu gov info mob net org tel ",km:" asso com coop edu gouv k medecin mil nom notaires pharmaciens presse tm veterinaire ",kn:" edu gov net org ",kr:" ac busan chungbuk chungnam co daegu daejeon es gangwon go gwangju gyeongbuk gyeonggi gyeongnam hs incheon jeju jeonbuk jeonnam k kg mil ms ne or pe re sc seoul ulsan ",kw:" com edu gov net org ",ky:" com edu gov net org ",kz:" com edu gov mil net org ",lb:" com edu gov net org ",lk:" assn com edu gov grp hotel int ltd net ngo org sch soc web ",lr:" com edu gov net org ",lv:" asn com conf edu gov id mil net org ",ly:" com edu gov id med net org plc sch ",ma:" ac co gov m net org press ",mc:" asso tm ",me:" ac co edu gov its net org priv ",mg:" com edu gov mil nom org prd tm ",mk:" com edu gov inf name net org pro ",ml:" com edu gov net org presse ",mn:" edu gov org ",mo:" com edu gov net org ",mt:" com edu gov net org ",mv:" aero biz com coop edu gov info int mil museum name net org pro ",mw:" ac co com coop edu gov int museum net org ",mx:" com edu gob net org ",my:" com edu gov mil name net org sch ",nf:" arts com firm info net other per rec store web ",ng:" biz com edu gov mil mobi name net org sch ",ni:" ac co com edu gob mil net nom org ",np:" com edu gov mil net org ",nr:" biz com edu gov info net org ",om:" ac biz co com edu gov med mil museum net org pro sch ",pe:" com edu gob mil net nom org sld ",ph:" com edu gov i mil net ngo org ",pk:" biz com edu fam gob gok gon gop gos gov net org web ",pl:" art bialystok biz com edu gda gdansk gorzow gov info katowice krakow lodz lublin mil net ngo olsztyn org poznan pwr radom slupsk szczecin torun warszawa waw wroc wroclaw zgora ",pr:" ac biz com edu est gov info isla name net org pro prof ",ps:" com edu gov net org plo sec ",pw:" belau co ed go ne or ",ro:" arts com firm info nom nt org rec store tm www ",rs:" ac co edu gov in org ",sb:" com edu gov net org ",sc:" com edu gov net org ",sh:" co com edu gov net nom org ",sl:" com edu gov net org ",st:" co com consulado edu embaixada gov mil net org principe saotome store ",sv:" com edu gob org red ",sz:" ac co org ",tr:" av bbs bel biz com dr edu gen gov info k12 name net org pol tel tsk tv web ",tt:" aero biz cat co com coop edu gov info int jobs mil mobi museum name net org pro tel travel ",tw:" club com ebiz edu game gov idv mil net org ",mu:" ac co com gov net or org ",mz:" ac co edu gov org ",na:" co com ",nz:" ac co cri geek gen govt health iwi maori mil net org parliament school ",pa:" abo ac com edu gob ing med net nom org sld ",pt:" com edu gov int net nome org publ ",py:" com edu gov mil net org ",qa:" com edu gov mil net org ",re:" asso com nom ",ru:" ac adygeya altai amur arkhangelsk astrakhan bashkiria belgorod bir bryansk buryatia cbg chel chelyabinsk chita chukotka chuvashia com dagestan e-burg edu gov grozny int irkutsk ivanovo izhevsk jar joshkar-ola kalmykia kaluga kamchatka karelia kazan kchr kemerovo khabarovsk khakassia khv kirov koenig komi kostroma kranoyarsk kuban kurgan kursk lipetsk magadan mari mari-el marine mil mordovia mosreg msk murmansk nalchik net nnov nov novosibirsk nsk omsk orenburg org oryol penza perm pp pskov ptz rnd ryazan sakhalin samara saratov simbirsk smolensk spb stavropol stv surgut tambov tatarstan tom tomsk tsaritsyn tsk tula tuva tver tyumen udm udmurtia ulan-ude vladikavkaz vladimir vladivostok volgograd vologda voronezh vrn vyatka yakutia yamal yekaterinburg yuzhno-sakhalinsk ",rw:" ac co com edu gouv gov int mil net ",sa:" com edu gov med net org pub sch ",sd:" com edu gov info med net org tv ",se:" a ac b bd c d e f g h i k l m n o org p parti pp press r s t tm u w x y z ",sg:" com edu gov idn net org per ",sn:" art com edu gouv org perso univ ",sy:" com edu gov mil net news org ",th:" ac co go in mi net or ",tj:" ac biz co com edu go gov info int mil name net nic org test web ",tn:" agrinet com defense edunet ens fin gov ind info intl mincom nat net org perso rnrt rns rnu tourism ",tz:" ac co go ne or ",ua:" biz cherkassy chernigov chernovtsy ck cn co com crimea cv dn dnepropetrovsk donetsk dp edu gov if in ivano-frankivsk kh kharkov kherson khmelnitskiy kiev kirovograd km kr ks kv lg lugansk lutsk lviv me mk net nikolaev od odessa org pl poltava pp rovno rv sebastopol sumy te ternopil uzhgorod vinnica vn zaporizhzhe zhitomir zp zt ",ug:" ac co go ne or org sc ",uk:" ac bl british-library co cym gov govt icnet jet lea ltd me mil mod national-library-scotland nel net nhs nic nls org orgn parliament plc police sch scot soc ",us:" dni fed isa kids nsn ",uy:" com edu gub mil net org ",ve:" co com edu gob info mil net org web ",vi:" co com k12 net org ",vn:" ac biz com edu gov health info int name net org pro ",ye:" co com gov ltd me net org plc ",yu:" ac co edu gov org ",za:" ac agric alt bourse city co cybernet db edu gov grondar iaccess imt inca landesign law mil net ngo nis nom olivetti org pix school tm web ",zm:" ac co com edu gov net org sch ",com:"ar br cn de eu gb gr hu jpn kr no qc ru sa se uk us uy za ",net:"gb jp se uk ",org:"ae",de:"com "},has:function(i){var o=i.lastIndexOf(".");if(o<=0||o>=i.length-1)return!1;var r=i.lastIndexOf(".",o-1);if(r<=0||r>=o-1)return!1;var a=n.list[i.slice(o+1)];return a?a.indexOf(" "+i.slice(r+1,o)+" ")>=0:!1},is:function(i){var o=i.lastIndexOf(".");if(o<=0||o>=i.length-1)return!1;var r=i.lastIndexOf(".",o-1);if(r>=0)return!1;var a=n.list[i.slice(o+1)];return a?a.indexOf(" "+i.slice(0,o)+" ")>=0:!1},get:function(i){var o=i.lastIndexOf(".");if(o<=0||o>=i.length-1)return null;var r=i.lastIndexOf(".",o-1);if(r<=0||r>=o-1)return null;var a=n.list[i.slice(o+1)];return!a||a.indexOf(" "+i.slice(r+1,o)+" ")<0?null:i.slice(r+1)},noConflict:function(){return e.SecondLevelDomains===this&&(e.SecondLevelDomains=t),this}};return n})});var il=Fs((XD,xE)=>{/*!
 * URI.js - Mutating URLs
 *
 * Version: 1.19.11
 *
 * Author: Rodney Rehm
 * Web: http://medialize.github.io/URI.js/
 *
 * Licensed under
 *   MIT License http://www.opensource.org/licenses/mit-license
 *
 */(function(e,t){"use strict";typeof xE=="object"&&xE.exports?xE.exports=t(YD(),qD(),KD()):typeof define=="function"&&define.amd?define(["./punycode","./IPv6","./SecondLevelDomains"],t):e.URI=t(e.punycode,e.IPv6,e.SecondLevelDomains,e)})(XD,function(e,t,n,i){"use strict";var o=i&&i.URI;function r(E,y){var B=arguments.length>=1,D=arguments.length>=2;if(!(this instanceof r))return B?D?new r(E,y):new r(E):new r;if(E===void 0){if(B)throw new TypeError("undefined is not a valid argument for URI");typeof location<"u"?E=location.href+"":E=""}if(E===null&&B)throw new TypeError("null is not a valid argument for URI");return this.href(E),y!==void 0?this.absoluteTo(y):this}function a(E){return/^[0-9]+$/.test(E)}r.version="1.19.11";var s=r.prototype,A=Object.prototype.hasOwnProperty;function l(E){return E.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function d(E){return E===void 0?"Undefined":String(Object.prototype.toString.call(E)).slice(8,-1)}function m(E){return d(E)==="Array"}function p(E,y){var B={},D,v;if(d(y)==="RegExp")B=null;else if(m(y))for(D=0,v=y.length;D<v;D++)B[y[D]]=!0;else B[y]=!0;for(D=0,v=E.length;D<v;D++){var F=B&&B[E[D]]!==void 0||!B&&y.test(E[D]);F&&(E.splice(D,1),v--,D--)}return E}function g(E,y){var B,D;if(m(y)){for(B=0,D=y.length;B<D;B++)if(!g(E,y[B]))return!1;return!0}var v=d(y);for(B=0,D=E.length;B<D;B++)if(v==="RegExp"){if(typeof E[B]=="string"&&E[B].match(y))return!0}else if(E[B]===y)return!0;return!1}function h(E,y){if(!m(E)||!m(y)||E.length!==y.length)return!1;E.sort(),y.sort();for(var B=0,D=E.length;B<D;B++)if(E[B]!==y[B])return!1;return!0}function C(E){var y=/^\/+|\/+$/g;return E.replace(y,"")}r._parts=function(){return{protocol:null,username:null,password:null,hostname:null,urn:null,port:null,path:null,query:null,fragment:null,preventInvalidHostname:r.preventInvalidHostname,duplicateQueryParameters:r.duplicateQueryParameters,escapeQuerySpace:r.escapeQuerySpace}},r.preventInvalidHostname=!1,r.duplicateQueryParameters=!1,r.escapeQuerySpace=!0,r.protocol_expression=/^[a-z][a-z0-9.+-]*$/i,r.idn_expression=/[^a-z0-9\._-]/i,r.punycode_expression=/(xn--)/i,r.ip4_expression=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,r.ip6_expression=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,r.find_uri_expression=/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?«»“”‘’]))/ig,r.findUri={start:/\b(?:([a-z][a-z0-9.+-]*:\/\/)|www\.)/gi,end:/[\s\r\n]|$/,trim:/[`!()\[\]{};:'".,<>?«»“”„‘’]+$/,parens:/(\([^\)]*\)|\[[^\]]*\]|\{[^}]*\}|<[^>]*>)/g},r.leading_whitespace_expression=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,r.ascii_tab_whitespace=/[\u0009\u000A\u000D]+/g,r.defaultPorts={http:"80",https:"443",ftp:"21",gopher:"70",ws:"80",wss:"443"},r.hostProtocols=["http","https"],r.invalid_hostname_characters=/[^a-zA-Z0-9\.\-:_]/,r.domAttributes={a:"href",blockquote:"cite",link:"href",base:"href",script:"src",form:"action",img:"src",area:"href",iframe:"src",embed:"src",source:"src",track:"src",input:"src",audio:"src",video:"src"},r.getDomAttribute=function(E){if(!(!E||!E.nodeName)){var y=E.nodeName.toLowerCase();if(!(y==="input"&&E.type!=="image"))return r.domAttributes[y]}};function _(E){return escape(E)}function I(E){return encodeURIComponent(E).replace(/[!'()*]/g,_).replace(/\*/g,"%2A")}r.encode=I,r.decode=decodeURIComponent,r.iso8859=function(){r.encode=escape,r.decode=unescape},r.unicode=function(){r.encode=I,r.decode=decodeURIComponent},r.characters={pathname:{encode:{expression:/%(24|26|2B|2C|3B|3D|3A|40)/ig,map:{"%24":"$","%26":"&","%2B":"+","%2C":",","%3B":";","%3D":"=","%3A":":","%40":"@"}},decode:{expression:/[\/\?#]/g,map:{"/":"%2F","?":"%3F","#":"%23"}}},reserved:{encode:{expression:/%(21|23|24|26|27|28|29|2A|2B|2C|2F|3A|3B|3D|3F|40|5B|5D)/ig,map:{"%3A":":","%2F":"/","%3F":"?","%23":"#","%5B":"[","%5D":"]","%40":"@","%21":"!","%24":"$","%26":"&","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"="}}},urnpath:{encode:{expression:/%(21|24|27|28|29|2A|2B|2C|3B|3D|40)/ig,map:{"%21":"!","%24":"$","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"=","%40":"@"}},decode:{expression:/[\/\?#:]/g,map:{"/":"%2F","?":"%3F","#":"%23",":":"%3A"}}}},r.encodeQuery=function(E,y){var B=r.encode(E+"");return y===void 0&&(y=r.escapeQuerySpace),y?B.replace(/%20/g,"+"):B},r.decodeQuery=function(E,y){E+="",y===void 0&&(y=r.escapeQuerySpace);try{return r.decode(y?E.replace(/\+/g,"%20"):E)}catch{return E}};var b={encode:"encode",decode:"decode"},x,T=function(E,y){return function(B){try{return r[y](B+"").replace(r.characters[E][y].expression,function(D){return r.characters[E][y].map[D]})}catch{return B}}};for(x in b)r[x+"PathSegment"]=T("pathname",b[x]),r[x+"UrnPathSegment"]=T("urnpath",b[x]);var w=function(E,y,B){return function(D){var v;B?v=function(k){return r[y](r[B](k))}:v=r[y];for(var F=(D+"").split(E),P=0,U=F.length;P<U;P++)F[P]=v(F[P]);return F.join(E)}};r.decodePath=w("/","decodePathSegment"),r.decodeUrnPath=w(":","decodeUrnPathSegment"),r.recodePath=w("/","encodePathSegment","decode"),r.recodeUrnPath=w(":","encodeUrnPathSegment","decode"),r.encodeReserved=T("reserved","encode"),r.parse=function(E,y){var B;return y||(y={preventInvalidHostname:r.preventInvalidHostname}),E=E.replace(r.leading_whitespace_expression,""),E=E.replace(r.ascii_tab_whitespace,""),B=E.indexOf("#"),B>-1&&(y.fragment=E.substring(B+1)||null,E=E.substring(0,B)),B=E.indexOf("?"),B>-1&&(y.query=E.substring(B+1)||null,E=E.substring(0,B)),E=E.replace(/^(https?|ftp|wss?)?:+[/\\]*/i,"$1://"),E=E.replace(/^[/\\]{2,}/i,"//"),E.substring(0,2)==="//"?(y.protocol=null,E=E.substring(2),E=r.parseAuthority(E,y)):(B=E.indexOf(":"),B>-1&&(y.protocol=E.substring(0,B)||null,y.protocol&&!y.protocol.match(r.protocol_expression)?y.protocol=void 0:E.substring(B+1,B+3).replace(/\\/g,"/")==="//"?(E=E.substring(B+3),E=r.parseAuthority(E,y)):(E=E.substring(B+1),y.urn=!0))),y.path=E,y},r.parseHost=function(E,y){E||(E=""),E=E.replace(/\\/g,"/");var B=E.indexOf("/"),D,v;if(B===-1&&(B=E.length),E.charAt(0)==="[")D=E.indexOf("]"),y.hostname=E.substring(1,D)||null,y.port=E.substring(D+2,B)||null,y.port==="/"&&(y.port=null);else{var F=E.indexOf(":"),P=E.indexOf("/"),U=E.indexOf(":",F+1);U!==-1&&(P===-1||U<P)?(y.hostname=E.substring(0,B)||null,y.port=null):(v=E.substring(0,B).split(":"),y.hostname=v[0]||null,y.port=v[1]||null)}return y.hostname&&E.substring(B).charAt(0)!=="/"&&(B++,E="/"+E),y.preventInvalidHostname&&r.ensureValidHostname(y.hostname,y.protocol),y.port&&r.ensureValidPort(y.port),E.substring(B)||"/"},r.parseAuthority=function(E,y){return E=r.parseUserinfo(E,y),r.parseHost(E,y)},r.parseUserinfo=function(E,y){var B=E,D=E.indexOf("\\");D!==-1&&(E=E.replace(/\\/g,"/"));var v=E.indexOf("/"),F=E.lastIndexOf("@",v>-1?v:E.length-1),P;return F>-1&&(v===-1||F<v)?(P=E.substring(0,F).split(":"),y.username=P[0]?r.decode(P[0]):null,P.shift(),y.password=P[0]?r.decode(P.join(":")):null,E=B.substring(F+1)):(y.username=null,y.password=null),E},r.parseQuery=function(E,y){if(!E)return{};if(E=E.replace(/&+/g,"&").replace(/^\?*&*|&+$/g,""),!E)return{};for(var B={},D=E.split("&"),v=D.length,F,P,U,k=0;k<v;k++)F=D[k].split("="),P=r.decodeQuery(F.shift(),y),U=F.length?r.decodeQuery(F.join("="),y):null,P!=="__proto__"&&(A.call(B,P)?((typeof B[P]=="string"||B[P]===null)&&(B[P]=[B[P]]),B[P].push(U)):B[P]=U);return B},r.build=function(E){var y="",B=!1;return E.protocol&&(y+=E.protocol+":"),!E.urn&&(y||E.hostname)&&(y+="//",B=!0),y+=r.buildAuthority(E)||"",typeof E.path=="string"&&(E.path.charAt(0)!=="/"&&B&&(y+="/"),y+=E.path),typeof E.query=="string"&&E.query&&(y+="?"+E.query),typeof E.fragment=="string"&&E.fragment&&(y+="#"+E.fragment),y},r.buildHost=function(E){var y="";if(E.hostname)r.ip6_expression.test(E.hostname)?y+="["+E.hostname+"]":y+=E.hostname;else return"";return E.port&&(y+=":"+E.port),y},r.buildAuthority=function(E){return r.buildUserinfo(E)+r.buildHost(E)},r.buildUserinfo=function(E){var y="";return E.username&&(y+=r.encode(E.username)),E.password&&(y+=":"+r.encode(E.password)),y&&(y+="@"),y},r.buildQuery=function(E,y,B){var D="",v,F,P,U;for(F in E)if(F!=="__proto__"&&A.call(E,F))if(m(E[F]))for(v={},P=0,U=E[F].length;P<U;P++)E[F][P]!==void 0&&v[E[F][P]+""]===void 0&&(D+="&"+r.buildQueryParameter(F,E[F][P],B),y!==!0&&(v[E[F][P]+""]=!0));else E[F]!==void 0&&(D+="&"+r.buildQueryParameter(F,E[F],B));return D.substring(1)},r.buildQueryParameter=function(E,y,B){return r.encodeQuery(E,B)+(y!==null?"="+r.encodeQuery(y,B):"")},r.addQuery=function(E,y,B){if(typeof y=="object")for(var D in y)A.call(y,D)&&r.addQuery(E,D,y[D]);else if(typeof y=="string"){if(E[y]===void 0){E[y]=B;return}else typeof E[y]=="string"&&(E[y]=[E[y]]);m(B)||(B=[B]),E[y]=(E[y]||[]).concat(B)}else throw new TypeError("URI.addQuery() accepts an object, string as the name parameter")},r.setQuery=function(E,y,B){if(typeof y=="object")for(var D in y)A.call(y,D)&&r.setQuery(E,D,y[D]);else if(typeof y=="string")E[y]=B===void 0?null:B;else throw new TypeError("URI.setQuery() accepts an object, string as the name parameter")},r.removeQuery=function(E,y,B){var D,v,F;if(m(y))for(D=0,v=y.length;D<v;D++)E[y[D]]=void 0;else if(d(y)==="RegExp")for(F in E)y.test(F)&&(E[F]=void 0);else if(typeof y=="object")for(F in y)A.call(y,F)&&r.removeQuery(E,F,y[F]);else if(typeof y=="string")B!==void 0?d(B)==="RegExp"?!m(E[y])&&B.test(E[y])?E[y]=void 0:E[y]=p(E[y],B):E[y]===String(B)&&(!m(B)||B.length===1)?E[y]=void 0:m(E[y])&&(E[y]=p(E[y],B)):E[y]=void 0;else throw new TypeError("URI.removeQuery() accepts an object, string, RegExp as the first parameter")},r.hasQuery=function(E,y,B,D){switch(d(y)){case"String":break;case"RegExp":for(var v in E)if(A.call(E,v)&&y.test(v)&&(B===void 0||r.hasQuery(E,v,B)))return!0;return!1;case"Object":for(var F in y)if(A.call(y,F)&&!r.hasQuery(E,F,y[F]))return!1;return!0;default:throw new TypeError("URI.hasQuery() accepts a string, regular expression or object as the name parameter")}switch(d(B)){case"Undefined":return y in E;case"Boolean":var P=!!(m(E[y])?E[y].length:E[y]);return B===P;case"Function":return!!B(E[y],y,E);case"Array":if(!m(E[y]))return!1;var U=D?g:h;return U(E[y],B);case"RegExp":return m(E[y])?D?g(E[y],B):!1:!!(E[y]&&E[y].match(B));case"Number":B=String(B);case"String":return m(E[y])?D?g(E[y],B):!1:E[y]===B;default:throw new TypeError("URI.hasQuery() accepts undefined, boolean, string, number, RegExp, Function as the value parameter")}},r.joinPaths=function(){for(var E=[],y=[],B=0,D=0;D<arguments.length;D++){var v=new r(arguments[D]);E.push(v);for(var F=v.segment(),P=0;P<F.length;P++)typeof F[P]=="string"&&y.push(F[P]),F[P]&&B++}if(!y.length||!B)return new r("");var U=new r("").segment(y);return(E[0].path()===""||E[0].path().slice(0,1)==="/")&&U.path("/"+U.path()),U.normalize()},r.commonPath=function(E,y){var B=Math.min(E.length,y.length),D;for(D=0;D<B;D++)if(E.charAt(D)!==y.charAt(D)){D--;break}return D<1?E.charAt(0)===y.charAt(0)&&E.charAt(0)==="/"?"/":"":((E.charAt(D)!=="/"||y.charAt(D)!=="/")&&(D=E.substring(0,D).lastIndexOf("/")),E.substring(0,D+1))},r.withinString=function(E,y,B){B||(B={});var D=B.start||r.findUri.start,v=B.end||r.findUri.end,F=B.trim||r.findUri.trim,P=B.parens||r.findUri.parens,U=/[a-z0-9-]=["']?$/i;for(D.lastIndex=0;;){var k=D.exec(E);if(!k)break;var j=k.index;if(B.ignoreHtml){var q=E.slice(Math.max(j-3,0),j);if(q&&U.test(q))continue}for(var $=j+E.slice(j).search(v),H=E.slice(j,$),Z=-1;;){var ee=P.exec(H);if(!ee)break;var Ae=ee.index+ee[0].length;Z=Math.max(Z,Ae)}if(Z>-1?H=H.slice(0,Z)+H.slice(Z).replace(F,""):H=H.replace(F,""),!(H.length<=k[0].length)&&!(B.ignore&&B.ignore.test(H))){$=j+H.length;var ge=y(H,j,$,E);if(ge===void 0){D.lastIndex=$;continue}ge=String(ge),E=E.slice(0,j)+ge+E.slice($),D.lastIndex=j+ge.length}}return D.lastIndex=0,E},r.ensureValidHostname=function(E,y){var B=!!E,D=!!y,v=!1;if(D&&(v=g(r.hostProtocols,y)),v&&!B)throw new TypeError("Hostname cannot be empty, if protocol is "+y);if(E&&E.match(r.invalid_hostname_characters)){if(!e)throw new TypeError('Hostname "'+E+'" contains characters other than [A-Z0-9.-:_] and Punycode.js is not available');if(e.toASCII(E).match(r.invalid_hostname_characters))throw new TypeError('Hostname "'+E+'" contains characters other than [A-Z0-9.-:_]')}},r.ensureValidPort=function(E){if(E){var y=Number(E);if(!(a(y)&&y>0&&y<65536))throw new TypeError('Port "'+E+'" is not a valid port')}},r.noConflict=function(E){if(E){var y={URI:this.noConflict()};return i.URITemplate&&typeof i.URITemplate.noConflict=="function"&&(y.URITemplate=i.URITemplate.noConflict()),i.IPv6&&typeof i.IPv6.noConflict=="function"&&(y.IPv6=i.IPv6.noConflict()),i.SecondLevelDomains&&typeof i.SecondLevelDomains.noConflict=="function"&&(y.SecondLevelDomains=i.SecondLevelDomains.noConflict()),y}else i.URI===this&&(i.URI=o);return this},s.build=function(E){return E===!0?this._deferred_build=!0:(E===void 0||this._deferred_build)&&(this._string=r.build(this._parts),this._deferred_build=!1),this},s.clone=function(){return new r(this)},s.valueOf=s.toString=function(){return this.build(!1)._string};function R(E){return function(y,B){return y===void 0?this._parts[E]||"":(this._parts[E]=y||null,this.build(!B),this)}}function z(E,y){return function(B,D){return B===void 0?this._parts[E]||"":(B!==null&&(B=B+"",B.charAt(0)===y&&(B=B.substring(1))),this._parts[E]=B,this.build(!D),this)}}s.protocol=R("protocol"),s.username=R("username"),s.password=R("password"),s.hostname=R("hostname"),s.port=R("port"),s.query=z("query","?"),s.fragment=z("fragment","#"),s.search=function(E,y){var B=this.query(E,y);return typeof B=="string"&&B.length?"?"+B:B},s.hash=function(E,y){var B=this.fragment(E,y);return typeof B=="string"&&B.length?"#"+B:B},s.pathname=function(E,y){if(E===void 0||E===!0){var B=this._parts.path||(this._parts.hostname?"/":"");return E?(this._parts.urn?r.decodeUrnPath:r.decodePath)(B):B}else return this._parts.urn?this._parts.path=E?r.recodeUrnPath(E):"":this._parts.path=E?r.recodePath(E):"/",this.build(!y),this},s.path=s.pathname,s.href=function(E,y){var B;if(E===void 0)return this.toString();this._string="",this._parts=r._parts();var D=E instanceof r,v=typeof E=="object"&&(E.hostname||E.path||E.pathname);if(E.nodeName){var F=r.getDomAttribute(E);E=E[F]||"",v=!1}if(!D&&v&&E.pathname!==void 0&&(E=E.toString()),typeof E=="string"||E instanceof String)this._parts=r.parse(String(E),this._parts);else if(D||v){var P=D?E._parts:E;for(B in P)B!=="query"&&A.call(this._parts,B)&&(this._parts[B]=P[B]);P.query&&this.query(P.query,!1)}else throw new TypeError("invalid input");return this.build(!y),this},s.is=function(E){var y=!1,B=!1,D=!1,v=!1,F=!1,P=!1,U=!1,k=!this._parts.urn;switch(this._parts.hostname&&(k=!1,B=r.ip4_expression.test(this._parts.hostname),D=r.ip6_expression.test(this._parts.hostname),y=B||D,v=!y,F=v&&n&&n.has(this._parts.hostname),P=v&&r.idn_expression.test(this._parts.hostname),U=v&&r.punycode_expression.test(this._parts.hostname)),E.toLowerCase()){case"relative":return k;case"absolute":return!k;case"domain":case"name":return v;case"sld":return F;case"ip":return y;case"ip4":case"ipv4":case"inet4":return B;case"ip6":case"ipv6":case"inet6":return D;case"idn":return P;case"url":return!this._parts.urn;case"urn":return!!this._parts.urn;case"punycode":return U}return null};var M=s.protocol,N=s.port,O=s.hostname;s.protocol=function(E,y){if(E&&(E=E.replace(/:(\/\/)?$/,""),!E.match(r.protocol_expression)))throw new TypeError('Protocol "'+E+`" contains characters other than [A-Z0-9.+-] or doesn't start with [A-Z]`);return M.call(this,E,y)},s.scheme=s.protocol,s.port=function(E,y){return this._parts.urn?E===void 0?"":this:(E!==void 0&&(E===0&&(E=null),E&&(E+="",E.charAt(0)===":"&&(E=E.substring(1)),r.ensureValidPort(E))),N.call(this,E,y))},s.hostname=function(E,y){if(this._parts.urn)return E===void 0?"":this;if(E!==void 0){var B={preventInvalidHostname:this._parts.preventInvalidHostname},D=r.parseHost(E,B);if(D!=="/")throw new TypeError('Hostname "'+E+'" contains characters other than [A-Z0-9.-]');E=B.hostname,this._parts.preventInvalidHostname&&r.ensureValidHostname(E,this._parts.protocol)}return O.call(this,E,y)},s.origin=function(E,y){if(this._parts.urn)return E===void 0?"":this;if(E===void 0){var B=this.protocol(),D=this.authority();return D?(B?B+"://":"")+this.authority():""}else{var v=r(E);return this.protocol(v.protocol()).authority(v.authority()).build(!y),this}},s.host=function(E,y){if(this._parts.urn)return E===void 0?"":this;if(E===void 0)return this._parts.hostname?r.buildHost(this._parts):"";var B=r.parseHost(E,this._parts);if(B!=="/")throw new TypeError('Hostname "'+E+'" contains characters other than [A-Z0-9.-]');return this.build(!y),this},s.authority=function(E,y){if(this._parts.urn)return E===void 0?"":this;if(E===void 0)return this._parts.hostname?r.buildAuthority(this._parts):"";var B=r.parseAuthority(E,this._parts);if(B!=="/")throw new TypeError('Hostname "'+E+'" contains characters other than [A-Z0-9.-]');return this.build(!y),this},s.userinfo=function(E,y){if(this._parts.urn)return E===void 0?"":this;if(E===void 0){var B=r.buildUserinfo(this._parts);return B&&B.substring(0,B.length-1)}else return E[E.length-1]!=="@"&&(E+="@"),r.parseUserinfo(E,this._parts),this.build(!y),this},s.resource=function(E,y){var B;return E===void 0?this.path()+this.search()+this.hash():(B=r.parse(E),this._parts.path=B.path,this._parts.query=B.query,this._parts.fragment=B.fragment,this.build(!y),this)},s.subdomain=function(E,y){if(this._parts.urn)return E===void 0?"":this;if(E===void 0){if(!this._parts.hostname||this.is("IP"))return"";var B=this._parts.hostname.length-this.domain().length-1;return this._parts.hostname.substring(0,B)||""}else{var D=this._parts.hostname.length-this.domain().length,v=this._parts.hostname.substring(0,D),F=new RegExp("^"+l(v));if(E&&E.charAt(E.length-1)!=="."&&(E+="."),E.indexOf(":")!==-1)throw new TypeError("Domains cannot contain colons");return E&&r.ensureValidHostname(E,this._parts.protocol),this._parts.hostname=this._parts.hostname.replace(F,E),this.build(!y),this}},s.domain=function(E,y){if(this._parts.urn)return E===void 0?"":this;if(typeof E=="boolean"&&(y=E,E=void 0),E===void 0){if(!this._parts.hostname||this.is("IP"))return"";var B=this._parts.hostname.match(/\./g);if(B&&B.length<2)return this._parts.hostname;var D=this._parts.hostname.length-this.tld(y).length-1;return D=this._parts.hostname.lastIndexOf(".",D-1)+1,this._parts.hostname.substring(D)||""}else{if(!E)throw new TypeError("cannot set domain empty");if(E.indexOf(":")!==-1)throw new TypeError("Domains cannot contain colons");if(r.ensureValidHostname(E,this._parts.protocol),!this._parts.hostname||this.is("IP"))this._parts.hostname=E;else{var v=new RegExp(l(this.domain())+"$");this._parts.hostname=this._parts.hostname.replace(v,E)}return this.build(!y),this}},s.tld=function(E,y){if(this._parts.urn)return E===void 0?"":this;if(typeof E=="boolean"&&(y=E,E=void 0),E===void 0){if(!this._parts.hostname||this.is("IP"))return"";var B=this._parts.hostname.lastIndexOf("."),D=this._parts.hostname.substring(B+1);return y!==!0&&n&&n.list[D.toLowerCase()]&&n.get(this._parts.hostname)||D}else{var v;if(E)if(E.match(/[^a-zA-Z0-9-]/))if(n&&n.is(E))v=new RegExp(l(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(v,E);else throw new TypeError('TLD "'+E+'" contains characters other than [A-Z0-9]');else{if(!this._parts.hostname||this.is("IP"))throw new ReferenceError("cannot set TLD on non-domain host");v=new RegExp(l(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(v,E)}else throw new TypeError("cannot set TLD empty");return this.build(!y),this}},s.directory=function(E,y){if(this._parts.urn)return E===void 0?"":this;if(E===void 0||E===!0){if(!this._parts.path&&!this._parts.hostname)return"";if(this._parts.path==="/")return"/";var B=this._parts.path.length-this.filename().length-1,D=this._parts.path.substring(0,B)||(this._parts.hostname?"/":"");return E?r.decodePath(D):D}else{var v=this._parts.path.length-this.filename().length,F=this._parts.path.substring(0,v),P=new RegExp("^"+l(F));return this.is("relative")||(E||(E="/"),E.charAt(0)!=="/"&&(E="/"+E)),E&&E.charAt(E.length-1)!=="/"&&(E+="/"),E=r.recodePath(E),this._parts.path=this._parts.path.replace(P,E),this.build(!y),this}},s.filename=function(E,y){if(this._parts.urn)return E===void 0?"":this;if(typeof E!="string"){if(!this._parts.path||this._parts.path==="/")return"";var B=this._parts.path.lastIndexOf("/"),D=this._parts.path.substring(B+1);return E?r.decodePathSegment(D):D}else{var v=!1;E.charAt(0)==="/"&&(E=E.substring(1)),E.match(/\.?\//)&&(v=!0);var F=new RegExp(l(this.filename())+"$");return E=r.recodePath(E),this._parts.path=this._parts.path.replace(F,E),v?this.normalizePath(y):this.build(!y),this}},s.suffix=function(E,y){if(this._parts.urn)return E===void 0?"":this;if(E===void 0||E===!0){if(!this._parts.path||this._parts.path==="/")return"";var B=this.filename(),D=B.lastIndexOf("."),v,F;return D===-1?"":(v=B.substring(D+1),F=/^[a-z0-9%]+$/i.test(v)?v:"",E?r.decodePathSegment(F):F)}else{E.charAt(0)==="."&&(E=E.substring(1));var P=this.suffix(),U;if(P)E?U=new RegExp(l(P)+"$"):U=new RegExp(l("."+P)+"$");else{if(!E)return this;this._parts.path+="."+r.recodePath(E)}return U&&(E=r.recodePath(E),this._parts.path=this._parts.path.replace(U,E)),this.build(!y),this}},s.segment=function(E,y,B){var D=this._parts.urn?":":"/",v=this.path(),F=v.substring(0,1)==="/",P=v.split(D);if(E!==void 0&&typeof E!="number"&&(B=y,y=E,E=void 0),E!==void 0&&typeof E!="number")throw new Error('Bad segment "'+E+'", must be 0-based integer');if(F&&P.shift(),E<0&&(E=Math.max(P.length+E,0)),y===void 0)return E===void 0?P:P[E];if(E===null||P[E]===void 0)if(m(y)){P=[];for(var U=0,k=y.length;U<k;U++)!y[U].length&&(!P.length||!P[P.length-1].length)||(P.length&&!P[P.length-1].length&&P.pop(),P.push(C(y[U])))}else(y||typeof y=="string")&&(y=C(y),P[P.length-1]===""?P[P.length-1]=y:P.push(y));else y?P[E]=C(y):P.splice(E,1);return F&&P.unshift(""),this.path(P.join(D),B)},s.segmentCoded=function(E,y,B){var D,v,F;if(typeof E!="number"&&(B=y,y=E,E=void 0),y===void 0){if(D=this.segment(E,y,B),!m(D))D=D!==void 0?r.decode(D):void 0;else for(v=0,F=D.length;v<F;v++)D[v]=r.decode(D[v]);return D}if(!m(y))y=typeof y=="string"||y instanceof String?r.encode(y):y;else for(v=0,F=y.length;v<F;v++)y[v]=r.encode(y[v]);return this.segment(E,y,B)};var u=s.query;return s.query=function(E,y){if(E===!0)return r.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if(typeof E=="function"){var B=r.parseQuery(this._parts.query,this._parts.escapeQuerySpace),D=E.call(this,B);return this._parts.query=r.buildQuery(D||B,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!y),this}else return E!==void 0&&typeof E!="string"?(this._parts.query=r.buildQuery(E,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!y),this):u.call(this,E,y)},s.setQuery=function(E,y,B){var D=r.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if(typeof E=="string"||E instanceof String)D[E]=y!==void 0?y:null;else if(typeof E=="object")for(var v in E)A.call(E,v)&&(D[v]=E[v]);else throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");return this._parts.query=r.buildQuery(D,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),typeof E!="string"&&(B=y),this.build(!B),this},s.addQuery=function(E,y,B){var D=r.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return r.addQuery(D,E,y===void 0?null:y),this._parts.query=r.buildQuery(D,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),typeof E!="string"&&(B=y),this.build(!B),this},s.removeQuery=function(E,y,B){var D=r.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return r.removeQuery(D,E,y),this._parts.query=r.buildQuery(D,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),typeof E!="string"&&(B=y),this.build(!B),this},s.hasQuery=function(E,y,B){var D=r.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return r.hasQuery(D,E,y,B)},s.setSearch=s.setQuery,s.addSearch=s.addQuery,s.removeSearch=s.removeQuery,s.hasSearch=s.hasQuery,s.normalize=function(){return this._parts.urn?this.normalizeProtocol(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build():this.normalizeProtocol(!1).normalizeHostname(!1).normalizePort(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build()},s.normalizeProtocol=function(E){return typeof this._parts.protocol=="string"&&(this._parts.protocol=this._parts.protocol.toLowerCase(),this.build(!E)),this},s.normalizeHostname=function(E){return this._parts.hostname&&(this.is("IDN")&&e?this._parts.hostname=e.toASCII(this._parts.hostname):this.is("IPv6")&&t&&(this._parts.hostname=t.best(this._parts.hostname)),this._parts.hostname=this._parts.hostname.toLowerCase(),this.build(!E)),this},s.normalizePort=function(E){return typeof this._parts.protocol=="string"&&this._parts.port===r.defaultPorts[this._parts.protocol]&&(this._parts.port=null,this.build(!E)),this},s.normalizePath=function(E){var y=this._parts.path;if(!y)return this;if(this._parts.urn)return this._parts.path=r.recodeUrnPath(this._parts.path),this.build(!E),this;if(this._parts.path==="/")return this;y=r.recodePath(y);var B,D="",v,F;for(y.charAt(0)!=="/"&&(B=!0,y="/"+y),(y.slice(-3)==="/.."||y.slice(-2)==="/.")&&(y+="/"),y=y.replace(/(\/(\.\/)+)|(\/\.$)/g,"/").replace(/\/{2,}/g,"/"),B&&(D=y.substring(1).match(/^(\.\.\/)+/)||"",D&&(D=D[0]));v=y.search(/\/\.\.(\/|$)/),v!==-1;){if(v===0){y=y.substring(3);continue}F=y.substring(0,v).lastIndexOf("/"),F===-1&&(F=v),y=y.substring(0,F)+y.substring(v+3)}return B&&this.is("relative")&&(y=D+y.substring(1)),this._parts.path=y,this.build(!E),this},s.normalizePathname=s.normalizePath,s.normalizeQuery=function(E){return typeof this._parts.query=="string"&&(this._parts.query.length?this.query(r.parseQuery(this._parts.query,this._parts.escapeQuerySpace)):this._parts.query=null,this.build(!E)),this},s.normalizeFragment=function(E){return this._parts.fragment||(this._parts.fragment=null,this.build(!E)),this},s.normalizeSearch=s.normalizeQuery,s.normalizeHash=s.normalizeFragment,s.iso8859=function(){var E=r.encode,y=r.decode;r.encode=escape,r.decode=decodeURIComponent;try{this.normalize()}finally{r.encode=E,r.decode=y}return this},s.unicode=function(){var E=r.encode,y=r.decode;r.encode=I,r.decode=unescape;try{this.normalize()}finally{r.encode=E,r.decode=y}return this},s.readable=function(){var E=this.clone();E.username("").password("").normalize();var y="";if(E._parts.protocol&&(y+=E._parts.protocol+"://"),E._parts.hostname&&(E.is("punycode")&&e?(y+=e.toUnicode(E._parts.hostname),E._parts.port&&(y+=":"+E._parts.port)):y+=E.host()),E._parts.hostname&&E._parts.path&&E._parts.path.charAt(0)!=="/"&&(y+="/"),y+=E.path(!0),E._parts.query){for(var B="",D=0,v=E._parts.query.split("&"),F=v.length;D<F;D++){var P=(v[D]||"").split("=");B+="&"+r.decodeQuery(P[0],this._parts.escapeQuerySpace).replace(/&/g,"%26"),P[1]!==void 0&&(B+="="+r.decodeQuery(P[1],this._parts.escapeQuerySpace).replace(/&/g,"%26"))}y+="?"+B.substring(1)}return y+=r.decodeQuery(E.hash(),!0),y},s.absoluteTo=function(E){var y=this.clone(),B=["protocol","username","password","hostname","port"],D,v,F;if(this._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(E instanceof r||(E=new r(E)),y._parts.protocol||(y._parts.protocol=E._parts.protocol,this._parts.hostname))return y;for(v=0;F=B[v];v++)y._parts[F]=E._parts[F];return y._parts.path?(y._parts.path.substring(-2)===".."&&(y._parts.path+="/"),y.path().charAt(0)!=="/"&&(D=E.directory(),D=D||(E.path().indexOf("/")===0?"/":""),y._parts.path=(D?D+"/":"")+y._parts.path,y.normalizePath())):(y._parts.path=E._parts.path,y._parts.query||(y._parts.query=E._parts.query)),y.build(),y},s.relativeTo=function(E){var y=this.clone().normalize(),B,D,v,F,P;if(y._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(E=new r(E).normalize(),B=y._parts,D=E._parts,F=y.path(),P=E.path(),F.charAt(0)!=="/")throw new Error("URI is already relative");if(P.charAt(0)!=="/")throw new Error("Cannot calculate a URI relative to another relative URI");if(B.protocol===D.protocol&&(B.protocol=null),B.username!==D.username||B.password!==D.password||B.protocol!==null||B.username!==null||B.password!==null)return y.build();if(B.hostname===D.hostname&&B.port===D.port)B.hostname=null,B.port=null;else return y.build();if(F===P)return B.path="",y.build();if(v=r.commonPath(F,P),!v)return y.build();var U=D.path.substring(v.length).replace(/[^\/]*$/,"").replace(/.*?\//g,"../");return B.path=U+B.path.substring(v.length)||"./",y.build()},s.equals=function(E){var y=this.clone(),B=new r(E),D={},v={},F={},P,U,k;if(y.normalize(),B.normalize(),y.toString()===B.toString())return!0;if(P=y.query(),U=B.query(),y.query(""),B.query(""),y.toString()!==B.toString()||P.length!==U.length)return!1;D=r.parseQuery(P,this._parts.escapeQuerySpace),v=r.parseQuery(U,this._parts.escapeQuerySpace);for(k in D)if(A.call(D,k)){if(m(D[k])){if(!h(D[k],v[k]))return!1}else if(D[k]!==v[k])return!1;F[k]=!0}for(k in v)if(A.call(v,k)&&!F[k])return!1;return!0},s.preventInvalidHostname=function(E){return this._parts.preventInvalidHostname=!!E,this},s.duplicateQueryParameters=function(E){return this._parts.duplicateQueryParameters=!!E,this},s.escapeQuerySpace=function(E){return this._parts.escapeQuerySpace=!!E,this},r})});var T1=Fs((_g,Sx)=>{var nI=(function(){"use strict";var e="b9H79Tebbbe9ok9Geueu9Geub9Gbb9Gruuuuuuueu9Gvuuuuueu9Gduueu9Gluuuueu9Gvuuuuub9Gouuuuuub9Gluuuub9GiuuueuiE8AdilveoveovrrwrrrDDoDrbqqbelve9Weiiviebeoweuec;G:Qdkr:PlCo9TW9T9VV95dbH9F9F939H79T9F9J9H229F9Jt9VV7bb8F9TW79O9V9Wt9FW9U9J9V9KW9wWVtW949c919M9MWV9mW4W2be8A9TW79O9V9Wt9FW9U9J9V9KW9wWVtW949c919M9MWVbd8F9TW79O9V9Wt9FW9U9J9V9KW9wWVtW949c919M9MWV9c9V919U9KbiE9TW79O9V9Wt9FW9U9J9V9KW9wWVtW949wWV79P9V9UblY9TW79O9V9Wt9FW9U9J9V9KW69U9KW949c919M9MWVbv8E9TW79O9V9Wt9FW9U9J9V9KW69U9KW949c919M9MWV9c9V919U9Kbo8A9TW79O9V9Wt9FW9U9J9V9KW69U9KW949wWV79P9V9UbrE9TW79O9V9Wt9FW9U9J9V9KW69U9KW949tWG91W9U9JWbwa9TW79O9V9Wt9FW9U9J9V9KW69U9KW949tWG91W9U9JW9c9V919U9KbDL9TW79O9V9Wt9FW9U9J9V9KWS9P2tWV9p9JtbqK9TW79O9V9Wt9FW9U9J9V9KWS9P2tWV9r919HtbkL9TW79O9V9Wt9FW9U9J9V9KWS9P2tWVT949WbxY9TW79O9V9Wt9FW9U9J9V9KWS9P2tWVJ9V29VVbmE9TW79O9V9Wt9F9V9Wt9P9T9P96W9wWVtW94J9H9J9OWbza9TW79O9V9Wt9F9V9Wt9P9T9P96W9wWVtW94J9H9J9OW9ttV9P9WbHa9TW79O9V9Wt9F9V9Wt9P9T9P96W9wWVtW94SWt9J9O9sW9T9H9WbOK9TW79O9V9Wt9F79W9Ht9P9H29t9VVt9sW9T9H9WbAl79IV9RbXDwebcekdKYq;i28Adbk:Bhdhud9:8Jjjjjbc;qw9Rgr8KjjjjbcbhwdnaeTmbabcbyd;C:kjjbaoaocb9iEgDc:GeV86bbarc;adfcbcjdz:xjjjb8AdnaiTmbarc;adfadalz:wjjjb8Akarc;abfalfcbcbcjdal9RalcFe0Ez:xjjjb8Aarc;abfarc;adfalz:wjjjb8AarcUf9cb83ibarc8Wf9cb83ibarcyf9cb83ibarcaf9cb83ibarcKf9cb83ibarczf9cb83ibar9cb83iwar9cb83ibcj;abal9Uc;WFbGcjdalca0Ehqdnaicd6mbavcd9imbaDTmbadcefhkaqci2gxal2hmarc;alfclfhParc;qlfceVhsarc;qofclVhzarc;qofcKfhHarc;qofczfhOcbhAincdhCcbhodnavci6mbaH9cb83ibaO9cb83ibar9cb83i;yoar9cb83i;qoadaAfgoybbhXcbhQincbhwcbhLdninaoalfhKaoybbgYaX7aLVhLawcP0meaKhoaYhXawcefgwaQfai6mbkkcbhXarc;qofhwincwh8AcwhEdnaLaX93gocFeGg3cs0mbclhEa3ci0mba3cb9hcethEkdnaocw4cFeGg3cs0mbclh8Aa3ci0mba3cb9hceth8Aka8AaEfh3awydbh5cwh8AcwhEdnaocz4cFeGg8Ecs0mbclhEa8Eci0mba8Ecb9hcethEka3a5fh3dnaocFFFFb0mbclh8AaocFFF8F0mbaocFFFr0ceth8Akawa3aEfa8AfBdbawclfhwaXcefgXcw9hmbkaKhoaYhXaQczfgQai6mbkcbhocehwazhLinawaoaLydbarc;qofaocdtfydb6EhoaLclfhLawcefgwcw9hmbkcihCkcbh3arc;qlfcbcjdz:xjjjb8Aarc;alfcwfcbBdbar9cb83i;alaoclth8Fadhaaqhhakh5inarc;qlfadcba3cufgoaoa30Eal2falz:wjjjb8Aaiahaiah6Ehgdnaqaia39Ra3aqfai6EgYcsfc9WGgoaY9nmbarc;qofaYfcbaoaY9Rz:xjjjb8Akada3al2fh8Jcbh8Kina8Ka8FVcl4hQarc;alfa8Kcdtfh8LaAh8Mcbh8Nina8NaAfhwdndndndndndna8KPldebidkasa8Mc98GgLfhoa5aLfh8Aarc;qlfawc98GgLfRbbhXcwhwinaoRbbawtaXVhXaocefhoawcwfgwca9hmbkaYTmla8Ncith8Ea8JaLfhEcbhKinaERbbhLcwhoa8AhwinawRbbaotaLVhLawcefhwaocwfgoca9hmbkarc;qofaKfaLaX7aQ93a8E486bba8Aalfh8AaEalfhEaLhXaKcefgKaY9hmbxlkkaYTmia8Mc9:Ghoa8NcitcwGhEarc;qlfawceVfRbbcwtarc;qlfawc9:GfRbbVhLarc;qofhwaghXinawa5aofRbbcwtaaaofRbbVg8AaL9RgLcetaLcztcz91cs47cFFiGaE486bbaoalfhoawcefhwa8AhLa3aXcufgX9hmbxikkaYTmda8Jawfhoarc;qlfawfRbbhLarc;qofhwaghXinawaoRbbg8AaL9RgLcetaLcKtcK91cr4786bbawcefhwaoalfhoa8AhLa3aXcufgX9hmbxdkkaYTmeka8LydbhEcbhKarc;qofhoincdhLcbhwinaLaoawfRbbcb9hfhLawcefgwcz9hmbkclhXcbhwinaXaoawfRbbcd0fhXawcefgwcz9hmbkcwh8Acbhwina8AaoawfRbbcP0fh8Aawcefgwcz9hmbkaLaXaLaX6Egwa8Aawa8A6Egwczawcz6EaEfhEaoczfhoaKczfgKaY6mbka8LaEBdbka8Mcefh8Ma8Ncefg8Ncl9hmbka8Kcefg8KaC9hmbkaaamfhaahaxfhha5amfh5a3axfg3ai6mbkcbhocehwaPhLinawaoaLydbarc;alfaocdtfydb6EhoaLclfhLawcefgXhwaCaX9hmbkaraAcd4fa8FcdVaoaocdSE86bbaAclfgAal6mbkkabaefh8Kabcefhoalcd4gecbaDEhkadcefhOarc;abfceVhHcbhmdndninaiam9nmearc;qofcbcjdz:xjjjb8Aa8Kao9Rak6mdadamal2gwfhxcbh8JaOawfhzaocbakz:xjjjbghakfh5aqaiam9Ramaqfai6Egscsfgocl4cifcd4hCaoc9WGg8LThPindndndndndndndndndndnaDTmbara8Jcd4fRbbgLciGPlbedlbkasTmdaxa8Jfhoarc;abfa8JfRbbhLarc;qofhwashXinawaoRbbg8AaL9RgLcetaLcKtcK91cr4786bbawcefhwaoalfhoa8AhLaXcufgXmbxikkasTmia8JcitcwGhEarc;abfa8JceVfRbbcwtarc;abfa8Jc9:GgofRbbVhLaxaofhoarc;qofhwashXinawao8Vbbg8AaL9RgLcetaLcztcz91cs47cFFiGaE486bbawcefhwaoalfhoa8AhLaXcufgXmbxdkkaHa8Jc98GgEfhoazaEfh8Aarc;abfaEfRbbhXcwhwinaoRbbawtaXVhXaocefhoawcwfgwca9hmbkasTmbaLcl4hYa8JcitcKGh3axaEfhEcbhKinaERbbhLcwhoa8AhwinawRbbaotaLVhLawcefhwaocwfgoca9hmbkarc;qofaKfaLaX7aY93a3486bba8Aalfh8AaEalfhEaLhXaKcefgKas9hmbkkaDmbcbhoxlka8LTmbcbhodninarc;qofaofgwcwf8Pibaw8Pib:e9qTmeaoczfgoa8L9pmdxbkkdnavmbcehoxikcbhEaChKaChYinarc;qofaEfgocwf8Pibhyao8Pibh8PcdhLcbhwinaLaoawfRbbcb9hfhLawcefgwcz9hmbkclhXcbhwinaXaoawfRbbcd0fhXawcefgwcz9hmbkcwh8Acbhwina8AaoawfRbbcP0fh8Aawcefgwcz9hmbkaLaXaLaX6Egoa8Aaoa8A6Egoczaocz6EaYfhYaocucbaya8P:e9cb9sEgwaoaw6EaKfhKaEczfgEa8L9pmdxbkkaha8Jcd4fgoaoRbbcda8JcetcoGtV86bbxikdnaKas6mbaYas6mbaha8Jcd4fgoaoRbbcia8JcetcoGtV86bba8Ka59Ras6mra5arc;qofasz:wjjjbasfh5xikaKaY9phokaha8Jcd4fgwawRbbaoa8JcetcoGtV86bbka8Ka59RaC6mla5cbaCz:xjjjbgAaCfhYdndna8LmbaPhoxekdna8KaY9RcK9pmbaPhoxekaocdtc:q1jjbfcj1jjbaDEg5ydxggcetc;:FFFeGh8Fcuh3cuagtcu7cFeGhacbh8Marc;qofhLinarc;qofa8MfhQczhEdndndnagPDbeeeeeeedekcucbaQcwf8PibaQ8Pib:e9cb9sEhExekcbhoa8FhEinaEaaaLaofRbb9nfhEaocefgocz9hmbkkcih8Ecbh8Ainczhwdndndna5a8AcdtfydbgKPDbeeeeeeedekcucbaQcwf8PibaQ8Pib:e9cb9sEhwxekaKcetc;:FFFeGhwcuaKtcu7cFeGhXcbhoinawaXaLaofRbb9nfhwaocefgocz9hmbkkdndnawaE6mbaKa39hmeawaE9hmea5a8EcdtfydbcwSmeka8Ah8EawhEka8Acefg8Aci9hmbkaAa8Mco4fgoaoRbba8Ea8Mci4coGtV86bbdndndna5a8Ecdtfydbg3PDdbbbbbbbebkdncwa39Tg8ETmbcua3tcu7hwdndna3ceSmbcbh8NaLhQinaQhoa8Eh8AcbhXinaoRbbgEawcFeGgKaEaK6EaXa3tVhXaocefhoa8Acufg8AmbkaYaX86bbaQa8EfhQaYcefhYa8Na8Efg8Ncz6mbxdkkcbh8NaLhQinaQhoa8Eh8AcbhXinaoRbbgEawcFeGgKaEaK6EaXcetVhXaocefhoa8Acufg8AmbkaYaX:T9cFe:d9c:c:qj:bw9:9c:q;c1:I1e:d9c:b:c:e1z9:9ca188bbaQa8EfhQaYcefhYa8Na8Efg8Ncz6mbkkcbhoinaYaLaofRbbgX86bbaYaXawcFeG9pfhYaocefgocz9hmbxikkdna3ceSmbinaYcb86bbaYcefhYxbkkinaYcb86bbaYcefhYxbkkaYaQ8Pbb83bbaYcwfaQcwf8Pbb83bbaYczfhYka8Mczfg8Ma8L9pgomeaLczfhLa8KaY9RcK9pmbkkaoTmlaYh5aYTmlka8Jcefg8Jal9hmbkarc;abfaxascufal2falz:wjjjb8Aasamfhma5hoa5mbkcbhwxdkdna8Kao9RakalfgwcKcaaDEgLawaL0EgX9pmbcbhwxdkdnawaL9pmbaocbaXaw9Rgwz:xjjjbawfhokaoarc;adfalz:wjjjbalfhodnaDTmbaoaraez:wjjjbaefhokaoab9Rhwxekcbhwkarc;qwf8Kjjjjbawk5babaeadaialcdcbyd;C:kjjbz:bjjjbk9reduaecd4gdaefgicaaica0Eabcj;abae9Uc;WFbGcjdaeca0Egifcufai9Uae2aiadfaicl4cifcd4f2fcefkmbcbabBd;C:kjjbk:Ese5u8Jjjjjbc;ae9Rgl8Kjjjjbcbhvdnaici9UgocHfae0mbabcbyd;m:kjjbgrc;GeV86bbalc;abfcFecjez:xjjjb8AalcUfgw9cu83ibalc8WfgD9cu83ibalcyfgq9cu83ibalcafgk9cu83ibalcKfgx9cu83ibalczfgm9cu83ibal9cu83iwal9cu83ibabaefc9WfhPabcefgsaofhednaiTmbcmcsarcb9kgzEhHcbhOcbhAcbhCcbhXcbhQindnaeaP9nmbcbhvxikaQcufhvadaCcdtfgLydbhKaLcwfydbhYaLclfydbh8AcbhEdndndninalc;abfavcsGcitfgoydlh3dndndnaoydbgoaK9hmba3a8ASmekdnaoa8A9hmba3aY9hmbaEcefhExekaoaY9hmea3aK9hmeaEcdfhEkaEc870mdaXcufhvaLaEciGcx2goc;i1jjbfydbcdtfydbh3aLaoc;e1jjbfydbcdtfydbh8AaLaoc;a1jjbfydbcdtfydbhKcbhodnindnalavcsGcdtfydba39hmbaohYxdkcuhYavcufhvaocefgocz9hmbkkaOa3aOSgvaYce9iaYaH9oVgoGfhOdndndncbcsavEaYaoEgvcs9hmbarce9imba3a3aAa3cefaASgvEgAcefSmecmcsavEhvkasavaEcdtc;WeGV86bbavcs9hmea3aA9Rgvcetavc8F917hvinaeavcFb0crtavcFbGV86bbaecefheavcje6hoavcr4hvaoTmbka3hAxvkcPhvasaEcdtcPV86bba3hAkavTmiavaH9omicdhocehEaQhYxlkavcufhvaEclfgEc;ab9hmbkkdnaLceaYaOSceta8AaOSEcx2gvc;a1jjbfydbcdtfydbgKTaLavc;e1jjbfydbcdtfydbg8AceSGaLavc;i1jjbfydbcdtfydbg3cdSGaOcb9hGazGg5ce9hmbaw9cu83ibaD9cu83ibaq9cu83ibak9cu83ibax9cu83ibam9cu83ibal9cu83iwal9cu83ibcbhOkcbhEaXcufgvhodnindnalaocsGcdtfydba8A9hmbaEhYxdkcuhYaocufhoaEcefgEcz9hmbkkcbhodnindnalavcsGcdtfydba39hmbaohExdkcuhEavcufhvaocefgocz9hmbkkaOaKaOSg8EfhLdndnaYcm0mbaYcefhYxekcbcsa8AaLSgvEhYaLavfhLkdndnaEcm0mbaEcefhExekcbcsa3aLSgvEhEaLavfhLkc9:cua8EEh8FcbhvaEaYcltVgacFeGhodndndninavc:W1jjbfRbbaoSmeavcefgvcz9hmbxdkka5aKaO9havcm0VVmbasavc;WeV86bbxekasa8F86bbaeaa86bbaecefhekdna8EmbaKaA9Rgvcetavc8F917hvinaeavcFb0gocrtavcFbGV86bbavcr4hvaecefheaombkaKhAkdnaYcs9hmba8AaA9Rgvcetavc8F917hvinaeavcFb0gocrtavcFbGV86bbavcr4hvaecefheaombka8AhAkdnaEcs9hmba3aA9Rgvcetavc8F917hvinaeavcFb0gocrtavcFbGV86bbavcr4hvaecefheaombka3hAkalaXcdtfaKBdbaXcefcsGhvdndnaYPzbeeeeeeeeeeeeeebekalavcdtfa8ABdbaXcdfcsGhvkdndnaEPzbeeeeeeeeeeeeeebekalavcdtfa3BdbavcefcsGhvkcihoalc;abfaQcitfgEaKBdlaEa8ABdbaQcefcsGhYcdhEavhXaLhOxekcdhoalaXcdtfa3BdbcehEaXcefcsGhXaQhYkalc;abfaYcitfgva8ABdlava3Bdbalc;abfaQaEfcsGcitfgva3BdlavaKBdbascefhsaQaofcsGhQaCcifgCai6mbkkdnaeaP9nmbcbhvxekcbhvinaeavfavc:W1jjbfRbb86bbavcefgvcz9hmbkaeab9Ravfhvkalc;aef8KjjjjbavkZeeucbhddninadcefgdc8F0meceadtae6mbkkadcrfcFeGcr9Uci2cdfabci9U2cHfkmbcbabBd;m:kjjbk:Adewu8Jjjjjbcz9Rhlcbhvdnaicvfae0mbcbhvabcbRb;m:kjjbc;qeV86bbal9cb83iwabcefhoabaefc98fhrdnaiTmbcbhwcbhDindnaoar6mbcbskadaDcdtfydbgqalcwfawaqav9Rgvavc8F91gv7av9Rc507gwcdtfgkydb9Rgvc8E91c9:Gavcdt7awVhvinaoavcFb0gecrtavcFbGV86bbavcr4hvaocefhoaembkakaqBdbaqhvaDcefgDai9hmbkkdnaoar9nmbcbskaocbBbbaoab9RclfhvkavkBeeucbhddninadcefgdc8F0meceadtae6mbkkadcwfcFeGcr9Uab2cvfk:bvli99dui99ludnaeTmbcuadcetcuftcu7:Zhvdndncuaicuftcu7:ZgoJbbbZMgr:lJbbb9p9DTmbar:Ohwxekcjjjj94hwkcbhicbhDinalclfIdbgrJbbbbJbbjZalIdbgq:lar:lMalcwfIdbgk:lMgr:varJbbbb9BEgrNhxaqarNhrdndnakJbbbb9GTmbaxhqxekJbbjZar:l:tgqaq:maxJbbbb9GEhqJbbjZax:l:tgxax:marJbbbb9GEhrkdndnalcxfIdbgxJbbj:;axJbbj:;9GEgkJbbjZakJbbjZ9FEavNJbbbZJbbb:;axJbbbb9GEMgx:lJbbb9p9DTmbax:Ohmxekcjjjj94hmkdndnaqJbbj:;aqJbbj:;9GEgxJbbjZaxJbbjZ9FEaoNJbbbZJbbb:;aqJbbbb9GEMgq:lJbbb9p9DTmbaq:OhPxekcjjjj94hPkdndnarJbbj:;arJbbj:;9GEgqJbbjZaqJbbjZ9FEaoNJbbbZJbbb:;arJbbbb9GEMgr:lJbbb9p9DTmbar:Ohsxekcjjjj94hskdndnadcl9hmbabaifgzas86bbazcifam86bbazcdfaw86bbazcefaP86bbxekabaDfgzas87ebazcofam87ebazclfaw87ebazcdfaP87ebkalczfhlaiclfhiaDcwfhDaecufgembkkk;hlld99eud99eudnaeTmbdndncuaicuftcu7:ZgvJbbbZMgo:lJbbb9p9DTmbao:Ohixekcjjjj94hikaic;8FiGhrinabcofcicdalclfIdb:lalIdb:l9EgialcwfIdb:lalaicdtfIdb:l9EEgialcxfIdb:lalaicdtfIdb:l9EEgiarV87ebdndnJbbj:;JbbjZalaicdtfIdbJbbbb9DEgoalaicd7cdtfIdbJ;Zl:1ZNNgwJbbj:;awJbbj:;9GEgDJbbjZaDJbbjZ9FEavNJbbbZJbbb:;awJbbbb9GEMgw:lJbbb9p9DTmbaw:Ohqxekcjjjj94hqkabcdfaq87ebdndnalaicefciGcdtfIdbJ;Zl:1ZNaoNgwJbbj:;awJbbj:;9GEgDJbbjZaDJbbjZ9FEavNJbbbZJbbb:;awJbbbb9GEMgw:lJbbb9p9DTmbaw:Ohqxekcjjjj94hqkabaq87ebdndnaoalaicufciGcdtfIdbJ;Zl:1ZNNgoJbbj:;aoJbbj:;9GEgwJbbjZawJbbjZ9FEavNJbbbZJbbb:;aoJbbbb9GEMgo:lJbbb9p9DTmbao:Ohixekcjjjj94hikabclfai87ebabcwfhbalczfhlaecufgembkkk;3viDue99eu8Jjjjjbcjd9Rgo8Kjjjjbadcd4hrdndndndnavcd9hmbadcl6meaohwarhDinawc:CuBdbawclfhwaDcufgDmbkaeTmiadcl6mdarcdthqalhkcbhxinaohwakhDarhminawawydbgPcbaDIdbgs:8cL4cFeGc:cufasJbbbb9BEgzaPaz9kEBdbaDclfhDawclfhwamcufgmmbkakaqfhkaxcefgxaeSmixbkkaeTmdxekaeTmekarcdthkavce9hhqadcl6hdcbhxindndndnaqmbadmdc:CuhDalhwarhminaDcbawIdbgs:8cL4cFeGc:cufasJbbbb9BEgPaDaP9kEhDawclfhwamcufgmmbxdkkc:CuhDdndnavPleddbdkadmdaohwalhmarhPinawcbamIdbgs:8cL4cFeGgzc;:bazc;:b0Ec:cufasJbbbb9BEBdbamclfhmawclfhwaPcufgPmbxdkkadmecbhwarhminaoawfcbalawfIdbgs:8cL4cFeGgPc8AaPc8A0Ec:cufasJbbbb9BEBdbawclfhwamcufgmmbkkadmbcbhwarhPinaDhmdnavceSmbaoawfydbhmkdndnalawfIdbgscjjj;8iamai9RcefgmcLt9R::NJbbbZJbbb:;asJbbbb9GEMgs:lJbbb9p9DTmbas:Ohzxekcjjjj94hzkabawfazcFFFrGamcKtVBdbawclfhwaPcufgPmbkkabakfhbalakfhlaxcefgxae9hmbkkaocjdf8Kjjjjbk:Ylvdud99due99iudnaeTmbceaicufgvthocuaitcu7:Zhrcuavtcu7:Zhwcbhvadcl9hhDcbhqindndnalcwfIdbgkJbbbbakJbbbb9GEgkJbbjZakJbbjZ9FEarNJbbbZMgk:lJbbb9p9DTmbak:Ohixekcjjjj94hikdndnalIdbgkJbbbbakJbbbb9GEgkJbbjZakJbbjZ9FEarNJbbbZMgk:lJbbb9p9DTmbak:Ohdxekcjjjj94hdkadai9Rcd9TgxaifhidndnalclfIdbgkJbbbbakJbbbb9GEgkJbbjZakJbbjZ9FEarNJbbbZMgk:lJbbb9p9DTmbak:Ohdxekcjjjj94hdkadai9Rcd9ThddndnalcxfIdbgkJbbbbakJbbbb9GEgkJbbjZakJbbjZ9FEawNJbbbZMgk:lJbbb9p9DTmbak:Ohmxekcjjjj94hmkadaifhiaoamVhmdndnaDmbabavfgPai86bbaPcifam86bbaPcdfad86bbaPcefax86bbxekabaqfgPai87ebaPcofam87ebaPclfad87ebaPcdfax87ebkalczfhlavclfhvaqcwfhqaecufgembkkk;YqdXui998Jjjjjbc:qd9Rgv8Kjjjjbavc:Sefcbc;Kbz:xjjjb8AcbhodnadTmbcbhoaiTmbdndnabaeSmbaehrxekavcuadcdtgwadcFFFFi0Ecbyd;q:kjjbHjjjjbbgrBd:SeavceBd:mdaraeawz:wjjjb8Akavc:GefcwfcbBdbav9cb83i:Geavc:Gefaradaiavc:Sefz:pjjjbavyd:GehDadci9Ugqcbyd;q:kjjbHjjjjbbheavc:Sefavyd:mdgkcdtfaeBdbavakcefgwBd:mdaecbaqz:xjjjbhxavc:SefawcdtfcuaicdtaicFFFFi0Ecbyd;q:kjjbHjjjjbbgmBdbavakcdfgPBd:mdalc;ebfhsaDheamhwinawalIdbasaeydbgzcwazcw6EcdtfIdbMUdbaeclfheawclfhwaicufgimbkavc:SefaPcdtfcuaqcdtadcFFFF970Ecbyd;q:kjjbHjjjjbbgPBdbdnadci6mbarheaPhwaqhiinawamaeydbcdtfIdbamaeclfydbcdtfIdbMamaecwfydbcdtfIdbMUdbaecxfheawclfhwaicufgimbkkakcifhoalc;ebfhHavc;qbfhOavheavyd:KehAavyd:OehCcbhzcbhwcbhXcehQinaehLcihkarawci2gKcdtfgeydbhsaeclfydbhdabaXcx2fgicwfaecwfydbgYBdbaiclfadBdbaiasBdbaxawfce86bbaOaYBdwaOadBdlaOasBdbaPawcdtfcbBdbdnazTmbcihkaLhiinaOakcdtfaiydbgeBdbakaeaY9haeas9haead9hGGfhkaiclfhiazcufgzmbkkaXcefhXcbhzinaCaAarazaKfcdtfydbcdtgifydbcdtfgYheaDaifgdydbgshidnasTmbdninaeydbawSmeaeclfheaicufgiTmdxbkkaeaYascdtfc98fydbBdbadadydbcufBdbkazcefgzci9hmbkdndnakTmbcuhwJbbbbh8Acbhdavyd:KehYavyd:OehKindndnaDaOadcdtfydbcdtgzfydbgembadcefhdxekadcs0hiamazfgsIdbhEasalcbadcefgdaiEcdtfIdbaHaecwaecw6EcdtfIdbMg3Udba3aE:th3aecdthiaKaYazfydbcdtfheinaPaeydbgzcdtfgsa3asIdbMgEUdbaEa8Aa8AaE9DgsEh8AazawasEhwaeclfheaic98fgimbkkadak9hmbkawcu9hmekaQaq9pmdindnaxaQfRbbmbaQhwxdkaqaQcefgQ9hmbxikkakczakcz6EhzaOheaLhOawcu9hmbkkaocdtavc:Seffc98fhedninaoTmeaeydbcbyd;u:kjjbH:bjjjbbaec98fheaocufhoxbkkavc:qdf8Kjjjjbk;IlevucuaicdtgvaicFFFFi0Egocbyd;q:kjjbHjjjjbbhralalyd9GgwcdtfarBdbalawcefBd9GabarBdbaocbyd;q:kjjbHjjjjbbhralalyd9GgocdtfarBdbalaocefBd9GabarBdlcuadcdtadcFFFFi0Ecbyd;q:kjjbHjjjjbbhralalyd9GgocdtfarBdbalaocefBd9GabarBdwabydbcbavz:xjjjb8Aadci9UhDdnadTmbabydbhoaehladhrinaoalydbcdtfgvavydbcefBdbalclfhlarcufgrmbkkdnaiTmbabydbhlabydlhrcbhvaihoinaravBdbarclfhralydbavfhvalclfhlaocufgombkkdnadci6mbabydlhrabydwhvcbhlinaecwfydbhoaeclfydbhdaraeydbcdtfgwawydbgwcefBdbavawcdtfalBdbaradcdtfgdadydbgdcefBdbavadcdtfalBdbaraocdtfgoaoydbgocefBdbavaocdtfalBdbaecxfheaDalcefgl9hmbkkdnaiTmbabydlheabydbhlinaeaeydbalydb9RBdbalclfhlaeclfheaicufgimbkkkQbabaeadaic;K1jjbz:ojjjbkQbabaeadaic;m:jjjbz:ojjjbk9DeeuabcFeaicdtz:xjjjbhlcbhbdnadTmbindnalaeydbcdtfgiydbcu9hmbaiabBdbabcefhbkaeclfheadcufgdmbkkabk:Vvioud9:du8Jjjjjbc;Wa9Rgl8Kjjjjbcbhvalcxfcbc;Kbz:xjjjb8AalcuadcitgoadcFFFFe0Ecbyd;q:kjjbHjjjjbbgrBdxalceBd2araeadaicezNjjjbalcuaoadcjjjjoGEcbyd;q:kjjbHjjjjbbgwBdzadcdthednadTmbabhiinaiavBdbaiclfhiadavcefgv9hmbkkawaefhDalabBdwalawBdl9cbhqindnadTmbaq9cq9:hkarhvaDhiadheinaiav8Pibak1:NcFrG87ebavcwfhvaicdfhiaecufgembkkalclfaq:NceGcdtfydbhxalclfaq9ce98gq:NceGcdtfydbhmalc;Wbfcbcjaz:xjjjb8AaDhvadhidnadTmbinalc;Wbfav8VebcdtfgeaeydbcefBdbavcdfhvaicufgimbkkcbhvcbhiinalc;WbfavfgeydbhoaeaiBdbaoaifhiavclfgvcja9hmbkadhvdndnadTmbinalc;WbfaDamydbgicetf8VebcdtfgeaeydbgecefBdbaxaecdtfaiBdbamclfhmavcufgvmbkaq9cv9smdcbhvinabawydbcdtfavBdbawclfhwadavcefgv9hmbxdkkaq9cv9smekkclhvdninavc98Smealcxfavfydbcbyd;u:kjjbH:bjjjbbavc98fhvxbkkalc;Waf8Kjjjjbk:Jwliuo99iud9:cbhv8Jjjjjbca9Rgoczfcwfcbyd:8:kjjbBdbaocb8Pd:0:kjjb83izaocwfcbyd;i:kjjbBdbaocb8Pd;a:kjjb83ibaicd4hrdndnadmbJFFuFhwJFFuuhDJFFuuhqJFFuFhkJFFuuhxJFFuFhmxekarcdthPaehsincbhiinaoczfaifgzasaifIdbgwazIdbgDaDaw9EEUdbaoaifgzawazIdbgDaDaw9DEUdbaiclfgicx9hmbkasaPfhsavcefgvad9hmbkaoIdKhDaoIdwhwaoIdChqaoIdlhkaoIdzhxaoIdbhmkdnadTmbJbbbbJbFu9hJbbbbamax:tgmamJbbbb9DEgmakaq:tgkakam9DEgkawaD:tgwawak9DEgw:vawJbbbb9BEhwdnalmbarcdthoindndnaeclfIdbaq:tawNJbbbZMgk:lJbbb9p9DTmbak:Ohixekcjjjj94hikai:S9cC:ghHdndnaeIdbax:tawNJbbbZMgk:lJbbb9p9DTmbak:Ohixekcjjjj94hikaHai:S:ehHdndnaecwfIdbaD:tawNJbbbZMgk:lJbbb9p9DTmbak:Ohixekcjjjj94hikabaHai:T9cy:g:e83ibaeaofheabcwfhbadcufgdmbxdkkarcdthoindndnaeIdbax:tawNJbbbZMgk:lJbbb9p9DTmbak:Ohixekcjjjj94hikai:SgH9ca:gaH9cz:g9cjjj;4s:d:eaH9cFe:d:e9cF:bj;4:pj;ar:d9c:bd9:9c:p;G:d;4j:E;ar:d9cH9:9c;d;H:W:y:m:g;d;Hb:d9cv9:9c;j:KM;j:KM;j:Kd:dhOdndnaeclfIdbaq:tawNJbbbZMgk:lJbbb9p9DTmbak:Ohixekcjjjj94hikai:SgH9ca:gaH9cz:g9cjjj;4s:d:eaH9cFe:d:e9cF:bj;4:pj;ar:d9c:bd9:9c:p;G:d;4j:E;ar:d9cH9:9c;d;H:W:y:m:g;d;Hb:d9cq9:9cM;j:KM;j:KM;jl:daO:ehOdndnaecwfIdbaD:tawNJbbbZMgk:lJbbb9p9DTmbak:Ohixekcjjjj94hikabaOai:SgH9ca:gaH9cz:g9cjjj;4s:d:eaH9cFe:d:e9cF:bj;4:pj;ar:d9c:bd9:9c:p;G:d;4j:E;ar:d9cH9:9c;d;H:W:y:m:g;d;Hb:d9cC9:9c:KM;j:KM;j:KMD:d:e83ibaeaofheabcwfhbadcufgdmbkkk9teiucbcbyd;y:kjjbgeabcifc98GfgbBd;y:kjjbdndnabZbcztgd9nmbcuhiabad9RcFFifcz4nbcuSmekaehikaik;teeeudndnaeabVciGTmbabhixekdndnadcz9pmbabhixekabhiinaiaeydbBdbaiaeydlBdlaiaeydwBdwaiaeydxBdxaeczfheaiczfhiadc9Wfgdcs0mbkkadcl6mbinaiaeydbBdbaeclfheaiclfhiadc98fgdci0mbkkdnadTmbinaiaeRbb86bbaicefhiaecefheadcufgdmbkkabk:3eedudndnabciGTmbabhixekaecFeGc:b:c:ew2hldndnadcz9pmbabhixekabhiinaialBdxaialBdwaialBdlaialBdbaiczfhiadc9Wfgdcs0mbkkadcl6mbinaialBdbaiclfhiadc98fgdci0mbkkdnadTmbinaiae86bbaicefhiadcufgdmbkkabk9teiucbcbyd;y:kjjbgeabcrfc94GfgbBd;y:kjjbdndnabZbcztgd9nmbcuhiabad9RcFFifcz4nbcuSmekaehikaik9:eiuZbhedndncbyd;y:kjjbgdaecztgi9nmbcuheadai9RcFFifcz4nbcuSmekadhekcbabae9Rcifc98Gcbyd;y:kjjbfgdBd;y:kjjbdnadZbcztge9nmbadae9RcFFifcz4nb8Akkk;Qddbcjwk;mdbbbbdbbblbbbwbbbbbbbebbbdbbblbbbwbbbbbbbbbbbbbbbb4:h9w9N94:P:gW:j9O:ye9Pbbbbbbebbbdbbbebbbdbbbbbbbdbbbbbbbebbbbbbb:l29hZ;69:9kZ;N;76Z;rg97Z;z;o9xZ8J;B85Z;:;u9yZ;b;k9HZ:2;Z9DZ9e:l9mZ59A8KZ:r;T3Z:A:zYZ79OHZ;j4::8::Y:D9V8:bbbb9s:49:Z8R:hBZ9M9M;M8:L;z;o8:;8:PG89q;x:J878R:hQ8::M:B;e87bbbbbbjZbbjZbbjZ:E;V;N8::Y:DsZ9i;H;68:xd;R8:;h0838:;W:NoZbbbb:WV9O8:uf888:9i;H;68:9c9G;L89;n;m9m89;D8Ko8:bbbbf:8tZ9m836ZS:2AZL;zPZZ818EZ9e:lxZ;U98F8:819E;68:FFuuFFuuFFuuFFuFFFuFFFuFbc;mqkzebbbebbbdbbb9G:vbb",t=new Uint8Array([32,0,65,2,1,106,34,33,3,128,11,4,13,64,6,253,10,7,15,116,127,5,8,12,40,16,19,54,20,9,27,255,113,17,42,67,24,23,146,148,18,14,22,45,70,69,56,114,101,21,25,63,75,136,108,28,118,29,73,115]);if(typeof WebAssembly!="object")return{supported:!1};var n,i=WebAssembly.instantiate(o(e),{}).then(function(g){n=g.instance,n.exports.__wasm_call_ctors(),n.exports.meshopt_encodeVertexVersion(0),n.exports.meshopt_encodeIndexVersion(1)});function o(g){for(var h=new Uint8Array(g.length),C=0;C<g.length;++C){var _=g.charCodeAt(C);h[C]=_>96?_-97:_>64?_-39:_+4}for(var I=0,C=0;C<g.length;++C)h[I++]=h[C]<60?t[h[C]]:(h[C]-60)*64+h[++C];return h.buffer.slice(0,I)}function r(g){if(!g)throw new Error("Assertion failed")}function a(g){return new Uint8Array(g.buffer,g.byteOffset,g.byteLength)}function s(g,h,C,_){var I=n.exports.sbrk,b=I(h.length*4),x=I(C*4),T=new Uint8Array(n.exports.memory.buffer),w=a(h);T.set(w,b),_&&_(b,b,h.length,C);var R=g(x,b,h.length,C);T=new Uint8Array(n.exports.memory.buffer);var z=new Uint32Array(C);new Uint8Array(z.buffer).set(T.subarray(x,x+C*4)),w.set(T.subarray(b,b+h.length*4)),I(b-I(0));for(var M=0;M<h.length;++M)h[M]=z[h[M]];return[z,R]}function A(g,h,C,_){var I=n.exports.sbrk,b=I(C*4),x=I(C*_),T=new Uint8Array(n.exports.memory.buffer);T.set(a(h),x),g(b,x,C,_),T=new Uint8Array(n.exports.memory.buffer);var w=new Uint32Array(C);return new Uint8Array(w.buffer).set(T.subarray(b,b+C*4)),I(b-I(0)),w}function l(g,h,C,_,I,b,x){var T=n.exports.sbrk,w=T(h),R=T(_*I),z=new Uint8Array(n.exports.memory.buffer);z.set(a(C),R);var M=g(w,h,R,_,I,b,x),N=new Uint8Array(M);return N.set(z.subarray(w,w+M)),T(w-T(0)),N}function d(g){for(var h=0,C=0;C<g.length;++C){var _=g[C];h=h<_?_:h}return h}function m(g,h){if(r(h==2||h==4),h==4)return new Uint32Array(g.buffer,g.byteOffset,g.byteLength/4);var C=new Uint16Array(g.buffer,g.byteOffset,g.byteLength/2);return new Uint32Array(C)}function p(g,h,C,_,I,b,x){var T=n.exports.sbrk,w=T(C*_),R=T(C*b),z=new Uint8Array(n.exports.memory.buffer);z.set(a(h),R),g(w,C,_,I,R,x);var M=new Uint8Array(C*_);return M.set(z.subarray(w,w+C*_)),T(w-T(0)),M}return{ready:i,supported:!0,reorderMesh:function(g,h,C){var _=h?C?n.exports.meshopt_optimizeVertexCacheStrip:n.exports.meshopt_optimizeVertexCache:void 0;return s(n.exports.meshopt_optimizeVertexFetchRemap,g,d(g)+1,_)},reorderPoints:function(g,h){return r(g instanceof Float32Array),r(g.length%h==0),r(h>=3),A(n.exports.meshopt_spatialSortRemap,g,g.length/h,h*4)},encodeVertexBuffer:function(g,h,C){r(C>0&&C<=256),r(C%4==0);var _=n.exports.meshopt_encodeVertexBufferBound(h,C);return l(n.exports.meshopt_encodeVertexBuffer,_,g,h,C)},encodeVertexBufferLevel:function(g,h,C,_,I){r(C>0&&C<=256),r(C%4==0),r(_>=0&&_<=3),r(I===void 0||I==0||I==1);var b=n.exports.meshopt_encodeVertexBufferBound(h,C);return l(n.exports.meshopt_encodeVertexBufferLevel,b,g,h,C,_,I||0)},encodeIndexBuffer:function(g,h,C){r(C==2||C==4),r(h%3==0);var _=m(g,C),I=n.exports.meshopt_encodeIndexBufferBound(h,d(_)+1);return l(n.exports.meshopt_encodeIndexBuffer,I,_,h,4)},encodeIndexSequence:function(g,h,C){r(C==2||C==4);var _=m(g,C),I=n.exports.meshopt_encodeIndexSequenceBound(h,d(_)+1);return l(n.exports.meshopt_encodeIndexSequence,I,_,h,4)},encodeGltfBuffer:function(g,h,C,_){var I={ATTRIBUTES:this.encodeVertexBuffer,TRIANGLES:this.encodeIndexBuffer,INDICES:this.encodeIndexSequence};return r(I[_]),I[_](g,h,C)},encodeFilterOct:function(g,h,C,_){return r(C==4||C==8),r(_>=1&&_<=16),p(n.exports.meshopt_encodeFilterOct,g,h,C,_,16)},encodeFilterQuat:function(g,h,C,_){return r(C==8),r(_>=4&&_<=16),p(n.exports.meshopt_encodeFilterQuat,g,h,C,_,16)},encodeFilterExp:function(g,h,C,_,I){r(C>0&&C%4==0),r(_>=1&&_<=24);var b={Separate:0,SharedVector:1,SharedComponent:2,Clamped:3};return p(n.exports.meshopt_encodeFilterExp,g,h,C,_,C,I?b[I]:1)},encodeFilterColor:function(g,h,C,_){return r(C==4||C==8),r(_>=2&&_<=16),p(n.exports.meshopt_encodeFilterColor,g,h,C,_,16)}}})();typeof _g=="object"&&typeof Sx=="object"?Sx.exports=nI:typeof define=="function"&&define.amd?define([],function(){return nI}):typeof _g=="object"?_g.MeshoptEncoder=nI:(typeof self<"u"?self:_g).MeshoptEncoder=nI});var S1=Fs((Ig,wx)=>{var iI=(function(){"use strict";var e="b9H79Tebbbe8Fv9Gbb9Gvuuuuueu9Giuuub9Geueu9Giuuueuixkbeeeddddillviebeoweuec:W:Odkr;Neqo9TW9T9VV95dbH9F9F939H79T9F9J9H229F9Jt9VV7bb8A9TW79O9V9Wt9F9KW9J9V9KW9wWVtW949c919M9MWVbeY9TW79O9V9Wt9F9KW9J9V9KW69U9KW949c919M9MWVbdE9TW79O9V9Wt9F9KW9J9V9KW69U9KW949tWG91W9U9JWbiL9TW79O9V9Wt9F9KW9J9V9KWS9P2tWV9p9JtblK9TW79O9V9Wt9F9KW9J9V9KWS9P2tWV9r919HtbvL9TW79O9V9Wt9F9KW9J9V9KWS9P2tWVT949WboY9TW79O9V9Wt9F9KW9J9V9KWS9P2tWVJ9V29VVbrl79IV9Rbwq;BZkdbk;jYi5ud9:du8Jjjjjbcj;kb9Rgv8Kjjjjbc9:hodnalTmbcuhoaiRbbgrc;WeGc:Ge9hmbarcsGgwce0mbc9:hoalcufadcd4cbawEgDadfgrcKcaawEgqaraq0Egk6mbaicefhxcj;abad9Uc;WFbGcjdadca0EhmaialfgPar9Rgoadfhsavaoadz:jjjjbgzceVhHcbhOdndninaeaO9nmeaPax9RaD6mdamaeaO9RaOamfgoae6EgAcsfglc9WGhCabaOad2fhXaAcethQaxaDfhiaOaeaoaeao6E9RhLalcl4cifcd4hKazcj;cbfaAfhYcbh8AazcjdfhEaHh3incbhodnawTmbaxa8Acd4fRbbhokaocFeGh5cbh8Eazcj;cbfhqinaih8Fdndndndna5a8Ecet4ciGgoc9:fPdebdkaPa8F9RaA6mrazcj;cbfa8EaA2fa8FaAz:jjjjb8Aa8FaAfhixdkazcj;cbfa8EaA2fcbaAz:kjjjb8Aa8FhixekaPa8F9RaK6mva8FaKfhidnaCTmbaPai9RcK6mbaocdtc:q1jjbfcj1jjbawEhaczhrcbhlinargoc9Wfghaqfhrdndndndndndnaaa8Fahco4fRbbalcoG4ciGcdtfydbPDbedvivvvlvkar9cb83bbarcwf9cb83bbxlkarcbaiRbdai8Xbb9c:c:qj:bw9:9c:q;c1:I1e:d9c:b:c:e1z9:gg9cjjjjjz:dg8J9qE86bbaqaofgrcGfag9c8F1:NghcKtc8F91aicdfa8J9c8N1:Nfg8KRbbG86bbarcVfcba8KahcjeGcr4fghRbbag9cjjjjjl:dg8J9qE86bbarc7fcbaha8J9c8L1:NfghRbbag9cjjjjjd:dg8J9qE86bbarctfcbaha8J9c8K1:NfghRbbag9cjjjjje:dg8J9qE86bbarc91fcbaha8J9c8J1:NfghRbbag9cjjjj;ab:dg8J9qE86bbarc4fcbaha8J9cg1:NfghRbbag9cjjjja:dg8J9qE86bbarc93fcbaha8J9ch1:NfghRbbag9cjjjjz:dgg9qE86bbarc94fcbahag9ca1:NfghRbbai8Xbe9c:c:qj:bw9:9c:q;c1:I1e:d9c:b:c:e1z9:gg9cjjjjjz:dg8J9qE86bbarc95fag9c8F1:NgicKtc8F91aha8J9c8N1:NfghRbbG86bbarc96fcbahaicjeGcr4fgiRbbag9cjjjjjl:dg8J9qE86bbarc97fcbaia8J9c8L1:NfgiRbbag9cjjjjjd:dg8J9qE86bbarc98fcbaia8J9c8K1:NfgiRbbag9cjjjjje:dg8J9qE86bbarc99fcbaia8J9c8J1:NfgiRbbag9cjjjj;ab:dg8J9qE86bbarc9:fcbaia8J9cg1:NfgiRbbag9cjjjja:dg8J9qE86bbarcufcbaia8J9ch1:NfgiRbbag9cjjjjz:dgg9qE86bbaiag9ca1:NfhixikaraiRblaiRbbghco4g8Ka8KciSg8KE86bbaqaofgrcGfaiclfa8Kfg8KRbbahcl4ciGg8La8LciSg8LE86bbarcVfa8Ka8Lfg8KRbbahcd4ciGg8La8LciSg8LE86bbarc7fa8Ka8Lfg8KRbbahciGghahciSghE86bbarctfa8Kahfg8KRbbaiRbeghco4g8La8LciSg8LE86bbarc91fa8Ka8Lfg8KRbbahcl4ciGg8La8LciSg8LE86bbarc4fa8Ka8Lfg8KRbbahcd4ciGg8La8LciSg8LE86bbarc93fa8Ka8Lfg8KRbbahciGghahciSghE86bbarc94fa8Kahfg8KRbbaiRbdghco4g8La8LciSg8LE86bbarc95fa8Ka8Lfg8KRbbahcl4ciGg8La8LciSg8LE86bbarc96fa8Ka8Lfg8KRbbahcd4ciGg8La8LciSg8LE86bbarc97fa8Ka8Lfg8KRbbahciGghahciSghE86bbarc98fa8KahfghRbbaiRbigico4g8Ka8KciSg8KE86bbarc99faha8KfghRbbaicl4ciGg8Ka8KciSg8KE86bbarc9:faha8KfghRbbaicd4ciGg8Ka8KciSg8KE86bbarcufaha8KfgrRbbaiciGgiaiciSgiE86bbaraifhixdkaraiRbwaiRbbghcl4g8Ka8KcsSg8KE86bbaqaofgrcGfaicwfa8Kfg8KRbbahcsGghahcsSghE86bbarcVfa8KahfghRbbaiRbeg8Kcl4g8La8LcsSg8LE86bbarc7faha8LfghRbba8KcsGg8Ka8KcsSg8KE86bbarctfaha8KfghRbbaiRbdg8Kcl4g8La8LcsSg8LE86bbarc91faha8LfghRbba8KcsGg8Ka8KcsSg8KE86bbarc4faha8KfghRbbaiRbig8Kcl4g8La8LcsSg8LE86bbarc93faha8LfghRbba8KcsGg8Ka8KcsSg8KE86bbarc94faha8KfghRbbaiRblg8Kcl4g8La8LcsSg8LE86bbarc95faha8LfghRbba8KcsGg8Ka8KcsSg8KE86bbarc96faha8KfghRbbaiRbvg8Kcl4g8La8LcsSg8LE86bbarc97faha8LfghRbba8KcsGg8Ka8KcsSg8KE86bbarc98faha8KfghRbbaiRbog8Kcl4g8La8LcsSg8LE86bbarc99faha8LfghRbba8KcsGg8Ka8KcsSg8KE86bbarc9:faha8KfghRbbaiRbrgicl4g8Ka8KcsSg8KE86bbarcufaha8KfgrRbbaicsGgiaicsSgiE86bbaraifhixekarai8Pbb83bbarcwfaicwf8Pbb83bbaiczfhikdnaoaC9pmbalcdfhlaoczfhraPai9RcL0mekkaoaC6moaimexokaCmva8FTmvkaqaAfhqa8Ecefg8Ecl9hmbkdndndndnawTmbasa8Acd4fRbbgociGPlbedrbkaATmdaza8Afh8Fazcj;cbfhhcbh8EaEhaina8FRbbhraahocbhlinaoahalfRbbgqce4cbaqceG9R7arfgr86bbaoadfhoaAalcefgl9hmbkaacefhaa8Fcefh8FahaAfhha8Ecefg8Ecl9hmbxikkaATmeaza8Afhaazcj;cbfhhcbhoceh8EaYh8FinaEaofhlaa8Vbbhrcbhoinala8FaofRbbcwtahaofRbbgqVc;:FiGce4cbaqceG9R7arfgr87bbaladfhlaLaocefgofmbka8FaQfh8FcdhoaacdfhaahaQfhha8EceGhlcbh8EalmbxdkkaATmbcbaocl49Rh8Eaza8AfRbbhqcwhoa3hlinalRbbaotaqVhqalcefhlaocwfgoca9hmbkcbhhaEh8FaYhainazcj;cbfahfRbbhrcwhoaahlinalRbbaotarVhralaAfhlaocwfgoca9hmbkara8E93aq7hqcbhoa8Fhlinalaqao486bbalcefhlaocwfgoca9hmbka8Fadfh8FaacefhaahcefghaA9hmbkkaEclfhEa3clfh3a8Aclfg8Aad6mbkaXazcjdfaAad2z:jjjjb8AazazcjdfaAcufad2fadz:jjjjb8AaAaOfhOaihxaimbkc9:hoxdkcbc99aPax9RakSEhoxekc9:hokavcj;kbf8Kjjjjbaok:XseHu8Jjjjjbc;ae9Rgv8Kjjjjbc9:hodnaeci9UgrcHfal0mbcuhoaiRbbgwc;WeGc;Ge9hmbawcsGgDce0mbavc;abfcFecjez:kjjjb8AavcUf9cu83ibavc8Wf9cu83ibavcyf9cu83ibavcaf9cu83ibavcKf9cu83ibavczf9cu83ibav9cu83iwav9cu83ibaialfc9WfhqaicefgwarfhldnaeTmbcmcsaDceSEhkcbhxcbhmcbhrcbhicbhoindnalaq9nmbc9:hoxikdndnawRbbgDc;Ve0mbavc;abfaoaDcu7gPcl4fcsGcitfgsydlhzasydbhHdndnaDcsGgsak9pmbavaiaPfcsGcdtfydbaxasEhDaxasTgOfhxxekdndnascsSmbcehOasc987asamffcefhDxekalcefhDal8SbbgscFeGhPdndnascu9mmbaDhlxekalcvfhlaPcFbGhPcrhsdninaD8SbbgOcFbGastaPVhPaOcu9kmeaDcefhDascrfgsc8J9hmbxdkkaDcefhlkcehOaPce4cbaPceG9R7amfhDkaDhmkavc;abfaocitfgsaDBdbasazBdlavaicdtfaDBdbavc;abfaocefcsGcitfgsaHBdbasaDBdlaocdfhoaOaifhidnadcd9hmbabarcetfgsaH87ebasclfaD87ebascdfaz87ebxdkabarcdtfgsaHBdbascwfaDBdbasclfazBdbxekdnaDcpe0mbaxcefgOavaiaqaDcsGfRbbgscl49RcsGcdtfydbascz6gPEhDavaias9RcsGcdtfydbaOaPfgzascsGgOEhsaOThOdndnadcd9hmbabarcetfgHax87ebaHclfas87ebaHcdfaD87ebxekabarcdtfgHaxBdbaHcwfasBdbaHclfaDBdbkavaicdtfaxBdbavc;abfaocitfgHaDBdbaHaxBdlavaicefgicsGcdtfaDBdbavc;abfaocefcsGcitfgHasBdbaHaDBdlavaiaPfgicsGcdtfasBdbavc;abfaocdfcsGcitfgDaxBdbaDasBdlaocifhoaiaOfhiazaOfhxxekaxcbalRbbgHEgAaDc;:eSgDfhzaHcsGhCaHcl4hXdndnaHcs0mbazcefhOxekazhOavaiaX9RcsGcdtfydbhzkdndnaCmbaOcefhxxekaOhxavaiaH9RcsGcdtfydbhOkdndnaDTmbalcefhDxekalcdfhDal8SbegPcFeGhsdnaPcu9kmbalcofhAascFbGhscrhldninaD8SbbgPcFbGaltasVhsaPcu9kmeaDcefhDalcrfglc8J9hmbkaAhDxekaDcefhDkasce4cbasceG9R7amfgmhAkdndnaXcsSmbaDhsxekaDcefhsaD8SbbglcFeGhPdnalcu9kmbaDcvfhzaPcFbGhPcrhldninas8SbbgDcFbGaltaPVhPaDcu9kmeascefhsalcrfglc8J9hmbkazhsxekascefhskaPce4cbaPceG9R7amfgmhzkdndnaCcsSmbashlxekascefhlas8SbbgDcFeGhPdnaDcu9kmbascvfhOaPcFbGhPcrhDdninal8SbbgscFbGaDtaPVhPascu9kmealcefhlaDcrfgDc8J9hmbkaOhlxekalcefhlkaPce4cbaPceG9R7amfgmhOkdndnadcd9hmbabarcetfgDaA87ebaDclfaO87ebaDcdfaz87ebxekabarcdtfgDaABdbaDcwfaOBdbaDclfazBdbkavc;abfaocitfgDazBdbaDaABdlavaicdtfaABdbavc;abfaocefcsGcitfgDaOBdbaDazBdlavaicefgicsGcdtfazBdbavc;abfaocdfcsGcitfgDaABdbaDaOBdlavaiaHcz6aXcsSVfgicsGcdtfaOBdbaiaCTaCcsSVfhiaocifhokawcefhwaocsGhoaicsGhiarcifgrae6mbkkcbc99alaqSEhokavc;aef8Kjjjjbaok:clevu8Jjjjjbcz9Rhvdnaecvfal9nmbc9:skdnaiRbbc;:eGc;qeSmbcuskav9cb83iwaicefhoaialfc98fhrdnaeTmbdnadcdSmbcbhwindnaoar6mbc9:skaocefhlao8SbbgicFeGhddndnaicu9mmbalhoxekaocvfhoadcFbGhdcrhidninal8SbbgDcFbGaitadVhdaDcu9kmealcefhlaicrfgic8J9hmbxdkkalcefhokabawcdtfadc8Etc8F91adcd47avcwfadceGcdtVglydbfgiBdbalaiBdbawcefgwae9hmbxdkkcbhwindnaoar6mbc9:skaocefhlao8SbbgicFeGhddndnaicu9mmbalhoxekaocvfhoadcFbGhdcrhidninal8SbbgDcFbGaitadVhdaDcu9kmealcefhlaicrfgic8J9hmbxdkkalcefhokabawcetfadc8Etc8F91adcd47avcwfadceGcdtVglydbfgi87ebalaiBdbawcefgwae9hmbkkcbc99aoarSEk:Lvoeue99dud99eud99dndnadcl9hmbaeTmeindndnabcdfgd8Sbb:Yab8Sbbgi:Ygl:l:tabcefgv8Sbbgo:Ygr:l:tgwJbb;:9cawawNJbbbbawawJbbbb9GgDEgq:mgkaqaicb9iEalMgwawNakaqaocb9iEarMgqaqNMM:r:vglNJbbbZJbbb:;aDEMgr:lJbbb9p9DTmbar:Ohixekcjjjj94hikadai86bbdndnaqalNJbbbZJbbb:;aqJbbbb9GEMgq:lJbbb9p9DTmbaq:Ohdxekcjjjj94hdkavad86bbdndnawalNJbbbZJbbb:;awJbbbb9GEMgw:lJbbb9p9DTmbaw:Ohdxekcjjjj94hdkabad86bbabclfhbaecufgembxdkkaeTmbindndnabclfgd8Ueb:Yab8Uebgi:Ygl:l:tabcdfgv8Uebgo:Ygr:l:tgwJb;:FSawawNJbbbbawawJbbbb9GgDEgq:mgkaqaicb9iEalMgwawNakaqaocb9iEarMgqaqNMM:r:vglNJbbbZJbbb:;aDEMgr:lJbbb9p9DTmbar:Ohixekcjjjj94hikadai87ebdndnaqalNJbbbZJbbb:;aqJbbbb9GEMgq:lJbbb9p9DTmbaq:Ohdxekcjjjj94hdkavad87ebdndnawalNJbbbZJbbb:;awJbbbb9GEMgw:lJbbb9p9DTmbaw:Ohdxekcjjjj94hdkabad87ebabcwfhbaecufgembkkk;oiliui99iue99dnaeTmbcbhiabhlindndnJ;Zl81Zalcof8UebgvciV:Y:vgoal8Ueb:YNgrJb;:FSNJbbbZJbbb:;arJbbbb9GEMgw:lJbbb9p9DTmbaw:OhDxekcjjjj94hDkalclf8Uebhqalcdf8UebhkabaiavcefciGfcetfaD87ebdndnaoak:YNgwJb;:FSNJbbbZJbbb:;awJbbbb9GEMgx:lJbbb9p9DTmbax:OhDxekcjjjj94hDkabaiavciGfgkcd7cetfaD87ebdndnaoaq:YNgoJb;:FSNJbbbZJbbb:;aoJbbbb9GEMgx:lJbbb9p9DTmbax:OhDxekcjjjj94hDkabaiavcufciGfcetfaD87ebdndnJbbjZararN:tawawN:taoaoN:tgrJbbbbarJbbbb9GE:rJb;:FSNJbbbZMgr:lJbbb9p9DTmbar:Ohvxekcjjjj94hvkabakcetfav87ebalcwfhlaiclfhiaecufgembkkk9mbdnadcd4ae2gdTmbinababydbgecwtcw91:Yaece91cjjj98Gcjjj;8if::NUdbabclfhbadcufgdmbkkk:Tvirud99eudndnadcl9hmbaeTmeindndnabRbbgiabcefgl8Sbbgvabcdfgo8Sbbgrf9R:YJbbuJabcifgwRbbgdce4adVgDcd4aDVgDcl4aDVgD:Z:vgqNJbbbZMgk:lJbbb9p9DTmbak:Ohxxekcjjjj94hxkaoax86bbdndnaraif:YaqNJbbbZMgk:lJbbb9p9DTmbak:Ohoxekcjjjj94hokalao86bbdndnavaifar9R:YaqNJbbbZMgk:lJbbb9p9DTmbak:Ohixekcjjjj94hikabai86bbdndnaDadcetGadceGV:ZaqNJbbbZMgq:lJbbb9p9DTmbaq:Ohdxekcjjjj94hdkawad86bbabclfhbaecufgembxdkkaeTmbindndnab8Vebgiabcdfgl8Uebgvabclfgo8Uebgrf9R:YJbFu9habcofgw8Vebgdce4adVgDcd4aDVgDcl4aDVgDcw4aDVgD:Z:vgqNJbbbZMgk:lJbbb9p9DTmbak:Ohxxekcjjjj94hxkaoax87ebdndnaraif:YaqNJbbbZMgk:lJbbb9p9DTmbak:Ohoxekcjjjj94hokalao87ebdndnavaifar9R:YaqNJbbbZMgk:lJbbb9p9DTmbak:Ohixekcjjjj94hikabai87ebdndnaDadcetGadceGV:ZaqNJbbbZMgq:lJbbb9p9DTmbaq:Ohdxekcjjjj94hdkawad87ebabcwfhbaecufgembkkk9teiucbcbyd:K1jjbgeabcifc98GfgbBd:K1jjbdndnabZbcztgd9nmbcuhiabad9RcFFifcz4nbcuSmekaehikaik;teeeudndnaeabVciGTmbabhixekdndnadcz9pmbabhixekabhiinaiaeydbBdbaiaeydlBdlaiaeydwBdwaiaeydxBdxaeczfheaiczfhiadc9Wfgdcs0mbkkadcl6mbinaiaeydbBdbaeclfheaiclfhiadc98fgdci0mbkkdnadTmbinaiaeRbb86bbaicefhiaecefheadcufgdmbkkabk:3eedudndnabciGTmbabhixekaecFeGc:b:c:ew2hldndnadcz9pmbabhixekabhiinaialBdxaialBdwaialBdlaialBdbaiczfhiadc9Wfgdcs0mbkkadcl6mbinaialBdbaiclfhiadc98fgdci0mbkkdnadTmbinaiae86bbaicefhiadcufgdmbkkabkk81dbcjwk8Kbbbbdbbblbbbwbbbbbbbebbbdbbblbbbwbbbbc:Kwkl8WNbb",t="b9H79TebbbeKl9Gbb9Gvuuuuueu9Giuuub9Geueuixkbbebeeddddilve9Weeeviebeoweuec:q:6dkr;Neqo9TW9T9VV95dbH9F9F939H79T9F9J9H229F9Jt9VV7bb8A9TW79O9V9Wt9F9KW9J9V9KW9wWVtW949c919M9MWVbdY9TW79O9V9Wt9F9KW9J9V9KW69U9KW949c919M9MWVblE9TW79O9V9Wt9F9KW9J9V9KW69U9KW949tWG91W9U9JWbvL9TW79O9V9Wt9F9KW9J9V9KWS9P2tWV9p9JtboK9TW79O9V9Wt9F9KW9J9V9KWS9P2tWV9r919HtbrL9TW79O9V9Wt9F9KW9J9V9KWS9P2tWVT949WbwY9TW79O9V9Wt9F9KW9J9V9KWS9P2tWVJ9V29VVbDl79IV9Rbqq;Ctklbzik9:evu8Jjjjjbcz9Rhbcbheincbhdcbhiinabcwfadfaicjuaead4ceGglE86bbaialfhiadcefgdcw9hmbkaec:q:yjjbfai86bbaecitc:q1jjbfab8Piw83ibaecefgecjd9hmbkk:183lYud97dur978Jjjjjbcj;kb9Rgv8Kjjjjbc9:hodnalTmbcuhoaiRbbgrc;WeGc:Ge9hmbarcsGgwce0mbc9:hoalcufadcd4cbawEgDadfgrcKcaawEgqaraq0Egk6mbaicefhxavaialfgmar9Rgoad;8qbbcj;abad9Uc;WFbGcjdadca0EhPdndndnadTmbaoadfhscbhzinaeaz9nmdamax9RaD6miabazad2fhHaxaDfhOaPaeaz9RazaPfae6EgAcsfgocl4cifcd4hCavcj;cbfaoc9WGgXcetfhQavcj;cbfaXci2fhLavcj;cbfaXfhKcbhYaoc;ab6h8AincbhodnawTmbaxaYcd4fRbbhokaocFeGhEcbh3avcj;cbfh5indndndndnaEa3cet4ciGgoc9:fPdebdkamaO9RaX6mwavcj;cbfa3aX2faOaX;8qbbaOaAfhOxdkavcj;cbfa3aX2fcbaX;8kbxekamaO9RaC6moaoclVcbawEhraOaCfhocbhidna8Ambamao9Rc;Gb6mbcbhlina5alfhidndndndndndnaOalco4fRbbgqciGarfPDbedibledibkaipxbbbbbbbbbbbbbbbbpklbxlkaiaopbblaopbbbg8Eclp:mea8EpmbzeHdOiAlCvXoQrLg8Ecdp:mea8EpmbzeHdOiAlCvXoQrLpxiiiiiiiiiiiiiiiip9og8Fpxiiiiiiiiiiiiiiiip8Jg8Ep5b9cjF;8;4;W;G;ab9:9cU1:Ngacitc:q1jjbfpbibaac:q:yjjbfRbbgapsa8Ep5e9cjF;8;4;W;G;ab9:9cU1:Nghcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPa8Fa8Ep9spklbaaaoclffahc:q:yjjbfRbbfhoxikaiaopbbwaopbbbg8Eclp:mea8EpmbzeHdOiAlCvXoQrLpxssssssssssssssssp9og8Fpxssssssssssssssssp8Jg8Ep5b9cjF;8;4;W;G;ab9:9cU1:Ngacitc:q1jjbfpbibaac:q:yjjbfRbbgapsa8Ep5e9cjF;8;4;W;G;ab9:9cU1:Nghcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPa8Fa8Ep9spklbaaaocwffahc:q:yjjbfRbbfhoxdkaiaopbbbpklbaoczfhoxekaiaopbbdaoRbbgacitc:q1jjbfpbibaac:q:yjjbfRbbgapsaoRbeghcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPpklbaaaocdffahc:q:yjjbfRbbfhokdndndndndndnaqcd4ciGarfPDbedibledibkaiczfpxbbbbbbbbbbbbbbbbpklbxlkaiczfaopbblaopbbbg8Eclp:mea8EpmbzeHdOiAlCvXoQrLg8Ecdp:mea8EpmbzeHdOiAlCvXoQrLpxiiiiiiiiiiiiiiiip9og8Fpxiiiiiiiiiiiiiiiip8Jg8Ep5b9cjF;8;4;W;G;ab9:9cU1:Ngacitc:q1jjbfpbibaac:q:yjjbfRbbgapsa8Ep5e9cjF;8;4;W;G;ab9:9cU1:Nghcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPa8Fa8Ep9spklbaaaoclffahc:q:yjjbfRbbfhoxikaiczfaopbbwaopbbbg8Eclp:mea8EpmbzeHdOiAlCvXoQrLpxssssssssssssssssp9og8Fpxssssssssssssssssp8Jg8Ep5b9cjF;8;4;W;G;ab9:9cU1:Ngacitc:q1jjbfpbibaac:q:yjjbfRbbgapsa8Ep5e9cjF;8;4;W;G;ab9:9cU1:Nghcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPa8Fa8Ep9spklbaaaocwffahc:q:yjjbfRbbfhoxdkaiczfaopbbbpklbaoczfhoxekaiczfaopbbdaoRbbgacitc:q1jjbfpbibaac:q:yjjbfRbbgapsaoRbeghcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPpklbaaaocdffahc:q:yjjbfRbbfhokdndndndndndnaqcl4ciGarfPDbedibledibkaicafpxbbbbbbbbbbbbbbbbpklbxlkaicafaopbblaopbbbg8Eclp:mea8EpmbzeHdOiAlCvXoQrLg8Ecdp:mea8EpmbzeHdOiAlCvXoQrLpxiiiiiiiiiiiiiiiip9og8Fpxiiiiiiiiiiiiiiiip8Jg8Ep5b9cjF;8;4;W;G;ab9:9cU1:Ngacitc:q1jjbfpbibaac:q:yjjbfRbbgapsa8Ep5e9cjF;8;4;W;G;ab9:9cU1:Nghcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPa8Fa8Ep9spklbaaaoclffahc:q:yjjbfRbbfhoxikaicafaopbbwaopbbbg8Eclp:mea8EpmbzeHdOiAlCvXoQrLpxssssssssssssssssp9og8Fpxssssssssssssssssp8Jg8Ep5b9cjF;8;4;W;G;ab9:9cU1:Ngacitc:q1jjbfpbibaac:q:yjjbfRbbgapsa8Ep5e9cjF;8;4;W;G;ab9:9cU1:Nghcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPa8Fa8Ep9spklbaaaocwffahc:q:yjjbfRbbfhoxdkaicafaopbbbpklbaoczfhoxekaicafaopbbdaoRbbgacitc:q1jjbfpbibaac:q:yjjbfRbbgapsaoRbeghcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPpklbaaaocdffahc:q:yjjbfRbbfhokdndndndndndnaqco4arfPDbedibledibkaic8Wfpxbbbbbbbbbbbbbbbbpklbxlkaic8Wfaopbblaopbbbg8Eclp:mea8EpmbzeHdOiAlCvXoQrLg8Ecdp:mea8EpmbzeHdOiAlCvXoQrLpxiiiiiiiiiiiiiiiip9og8Fpxiiiiiiiiiiiiiiiip8Jg8Ep5b9cjF;8;4;W;G;ab9:9cU1:Ngicitc:q1jjbfpbibaic:q:yjjbfRbbgipsa8Ep5e9cjF;8;4;W;G;ab9:9cU1:Ngqcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPa8Fa8Ep9spklbaiaoclffaqc:q:yjjbfRbbfhoxikaic8Wfaopbbwaopbbbg8Eclp:mea8EpmbzeHdOiAlCvXoQrLpxssssssssssssssssp9og8Fpxssssssssssssssssp8Jg8Ep5b9cjF;8;4;W;G;ab9:9cU1:Ngicitc:q1jjbfpbibaic:q:yjjbfRbbgipsa8Ep5e9cjF;8;4;W;G;ab9:9cU1:Ngqcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPa8Fa8Ep9spklbaiaocwffaqc:q:yjjbfRbbfhoxdkaic8Wfaopbbbpklbaoczfhoxekaic8WfaopbbdaoRbbgicitc:q1jjbfpbibaic:q:yjjbfRbbgipsaoRbegqcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPpklbaiaocdffaqc:q:yjjbfRbbfhokalc;abfhialcjefaX0meaihlamao9Rc;Fb0mbkkdnaiaX9pmbaici4hlinamao9RcK6mwa5aifhqdndndndndndnaOaico4fRbbalcoG4ciGarfPDbedibledibkaqpxbbbbbbbbbbbbbbbbpkbbxlkaqaopbblaopbbbg8Eclp:mea8EpmbzeHdOiAlCvXoQrLg8Ecdp:mea8EpmbzeHdOiAlCvXoQrLpxiiiiiiiiiiiiiiiip9og8Fpxiiiiiiiiiiiiiiiip8Jg8Ep5b9cjF;8;4;W;G;ab9:9cU1:Ngacitc:q1jjbfpbibaac:q:yjjbfRbbgapsa8Ep5e9cjF;8;4;W;G;ab9:9cU1:Nghcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPa8Fa8Ep9spkbbaaaoclffahc:q:yjjbfRbbfhoxikaqaopbbwaopbbbg8Eclp:mea8EpmbzeHdOiAlCvXoQrLpxssssssssssssssssp9og8Fpxssssssssssssssssp8Jg8Ep5b9cjF;8;4;W;G;ab9:9cU1:Ngacitc:q1jjbfpbibaac:q:yjjbfRbbgapsa8Ep5e9cjF;8;4;W;G;ab9:9cU1:Nghcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPa8Fa8Ep9spkbbaaaocwffahc:q:yjjbfRbbfhoxdkaqaopbbbpkbbaoczfhoxekaqaopbbdaoRbbgacitc:q1jjbfpbibaac:q:yjjbfRbbgapsaoRbeghcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPpkbbaaaocdffahc:q:yjjbfRbbfhokalcdfhlaiczfgiaX6mbkkaohOaoTmoka5aXfh5a3cefg3cl9hmbkdndndndnawTmbasaYcd4fRbbglciGPlbedwbkaXTmdavcjdfaYfhlavaYfpbdbhgcbhoinalavcj;cbfaofpblbg8JaKaofpblbg8KpmbzeHdOiAlCvXoQrLg8LaQaofpblbg8MaLaofpblbg8NpmbzeHdOiAlCvXoQrLgypmbezHdiOAlvCXorQLg8Ecep9Ta8Epxeeeeeeeeeeeeeeeeg8Fp9op9Hp9rg8Eagp9Uggp9Abbbaladfglaga8Ea8Epmlvorlvorlvorlvorp9Uggp9Abbbaladfglaga8Ea8EpmwDqkwDqkwDqkwDqkp9Uggp9Abbbaladfglaga8Ea8EpmxmPsxmPsxmPsxmPsp9Uggp9Abbbaladfglaga8LaypmwDKYqk8AExm35Ps8E8Fg8Ecep9Ta8Ea8Fp9op9Hp9rg8Ep9Uggp9Abbbaladfglaga8Ea8Epmlvorlvorlvorlvorp9Uggp9Abbbaladfglaga8Ea8EpmwDqkwDqkwDqkwDqkp9Uggp9Abbbaladfglaga8Ea8EpmxmPsxmPsxmPsxmPsp9Uggp9Abbbaladfglaga8Ja8KpmwKDYq8AkEx3m5P8Es8Fg8Ja8Ma8NpmwKDYq8AkEx3m5P8Es8Fg8KpmbezHdiOAlvCXorQLg8Ecep9Ta8Ea8Fp9op9Hp9rg8Ep9Uggp9Abbbaladfglaga8Ea8Epmlvorlvorlvorlvorp9Uggp9Abbbaladfglaga8Ea8EpmwDqkwDqkwDqkwDqkp9Uggp9Abbbaladfglaga8Ea8EpmxmPsxmPsxmPsxmPsp9Uggp9Abbbaladfglaga8Ja8KpmwDKYqk8AExm35Ps8E8Fg8Ecep9Ta8Ea8Fp9op9Hp9rg8Ep9Ug8Fp9Abbbaladfgla8Fa8Ea8Epmlvorlvorlvorlvorp9Ug8Fp9Abbbaladfgla8Fa8Ea8EpmwDqkwDqkwDqkwDqkp9Ug8Fp9Abbbaladfgla8Fa8Ea8EpmxmPsxmPsxmPsxmPsp9Uggp9AbbbaladfhlaoczfgoaX6mbxikkaXTmeavcjdfaYfhlavaYfpbdbhgcbhoinalavcj;cbfaofpblbg8JaKaofpblbg8KpmbzeHdOiAlCvXoQrLg8LaQaofpblbg8MaLaofpblbg8NpmbzeHdOiAlCvXoQrLgypmbezHdiOAlvCXorQLg8Ecep:nea8Epxebebebebebebebebg8Fp9op:bep9rg8Eagp:oeggp9Abbbaladfglaga8Ea8Epmlvorlvorlvorlvorp:oeggp9Abbbaladfglaga8Ea8EpmwDqkwDqkwDqkwDqkp:oeggp9Abbbaladfglaga8Ea8EpmxmPsxmPsxmPsxmPsp:oeggp9Abbbaladfglaga8LaypmwDKYqk8AExm35Ps8E8Fg8Ecep:nea8Ea8Fp9op:bep9rg8Ep:oeggp9Abbbaladfglaga8Ea8Epmlvorlvorlvorlvorp:oeggp9Abbbaladfglaga8Ea8EpmwDqkwDqkwDqkwDqkp:oeggp9Abbbaladfglaga8Ea8EpmxmPsxmPsxmPsxmPsp:oeggp9Abbbaladfglaga8Ja8KpmwKDYq8AkEx3m5P8Es8Fg8Ja8Ma8NpmwKDYq8AkEx3m5P8Es8Fg8KpmbezHdiOAlvCXorQLg8Ecep:nea8Ea8Fp9op:bep9rg8Ep:oeggp9Abbbaladfglaga8Ea8Epmlvorlvorlvorlvorp:oeggp9Abbbaladfglaga8Ea8EpmwDqkwDqkwDqkwDqkp:oeggp9Abbbaladfglaga8Ea8EpmxmPsxmPsxmPsxmPsp:oeggp9Abbbaladfglaga8Ja8KpmwDKYqk8AExm35Ps8E8Fg8Ecep:nea8Ea8Fp9op:bep9rg8Ep:oeg8Fp9Abbbaladfgla8Fa8Ea8Epmlvorlvorlvorlvorp:oeg8Fp9Abbbaladfgla8Fa8Ea8EpmwDqkwDqkwDqkwDqkp:oeg8Fp9Abbbaladfgla8Fa8Ea8EpmxmPsxmPsxmPsxmPsp:oeggp9AbbbaladfhlaoczfgoaX6mbxdkkaXTmbcbhocbalcl4gl9Rc8FGhiavcjdfaYfhravaYfpbdbh8Finaravcj;cbfaofpblbggaKaofpblbg8JpmbzeHdOiAlCvXoQrLg8KaQaofpblbg8LaLaofpblbg8MpmbzeHdOiAlCvXoQrLg8NpmbezHdiOAlvCXorQLg8Eaip:Rea8Ealp:Sep9qg8Ea8Fp9rg8Fp9Abbbaradfgra8Fa8Ea8Epmlvorlvorlvorlvorp9rg8Fp9Abbbaradfgra8Fa8Ea8EpmwDqkwDqkwDqkwDqkp9rg8Fp9Abbbaradfgra8Fa8Ea8EpmxmPsxmPsxmPsxmPsp9rg8Fp9Abbbaradfgra8Fa8Ka8NpmwDKYqk8AExm35Ps8E8Fg8Eaip:Rea8Ealp:Sep9qg8Ep9rg8Fp9Abbbaradfgra8Fa8Ea8Epmlvorlvorlvorlvorp9rg8Fp9Abbbaradfgra8Fa8Ea8EpmwDqkwDqkwDqkwDqkp9rg8Fp9Abbbaradfgra8Fa8Ea8EpmxmPsxmPsxmPsxmPsp9rg8Fp9Abbbaradfgra8Faga8JpmwKDYq8AkEx3m5P8Es8Fgga8La8MpmwKDYq8AkEx3m5P8Es8Fg8JpmbezHdiOAlvCXorQLg8Eaip:Rea8Ealp:Sep9qg8Ep9rg8Fp9Abbbaradfgra8Fa8Ea8Epmlvorlvorlvorlvorp9rg8Fp9Abbbaradfgra8Fa8Ea8EpmwDqkwDqkwDqkwDqkp9rg8Fp9Abbbaradfgra8Fa8Ea8EpmxmPsxmPsxmPsxmPsp9rg8Fp9Abbbaradfgra8Faga8JpmwDKYqk8AExm35Ps8E8Fg8Eaip:Rea8Ealp:Sep9qg8Ep9rg8Fp9Abbbaradfgra8Fa8Ea8Epmlvorlvorlvorlvorp9rg8Fp9Abbbaradfgra8Fa8Ea8EpmwDqkwDqkwDqkwDqkp9rg8Fp9Abbbaradfgra8Fa8Ea8EpmxmPsxmPsxmPsxmPsp9rg8Fp9AbbbaradfhraoczfgoaX6mbkkaYclfgYad6mbkaHavcjdfaAad2;8qbbavavcjdfaAcufad2fad;8qbbaAazfhzc9:hoaOhxaOmbxlkkaeTmbaDalfhrcbhocuhlinaralaD9RglfaD6mdaPaeao9RaoaPfae6Eaofgoae6mbkaial9Rhxkcbc99amax9RakSEhoxekc9:hokavcj;kbf8Kjjjjbaokwbz:bjjjbk:TseHu8Jjjjjbc;ae9Rgv8Kjjjjbc9:hodnaeci9UgrcHfal0mbcuhoaiRbbgwc;WeGc;Ge9hmbawcsGgDce0mbavc;abfcFecje;8kbavcUf9cu83ibavc8Wf9cu83ibavcyf9cu83ibavcaf9cu83ibavcKf9cu83ibavczf9cu83ibav9cu83iwav9cu83ibaialfc9WfhqaicefgwarfhldnaeTmbcmcsaDceSEhkcbhxcbhmcbhrcbhicbhoindnalaq9nmbc9:hoxikdndnawRbbgDc;Ve0mbavc;abfaoaDcu7gPcl4fcsGcitfgsydlhzasydbhHdndnaDcsGgsak9pmbavaiaPfcsGcdtfydbaxasEhDaxasTgOfhxxekdndnascsSmbcehOasc987asamffcefhDxekalcefhDal8SbbgscFeGhPdndnascu9mmbaDhlxekalcvfhlaPcFbGhPcrhsdninaD8SbbgOcFbGastaPVhPaOcu9kmeaDcefhDascrfgsc8J9hmbxdkkaDcefhlkcehOaPce4cbaPceG9R7amfhDkaDhmkavc;abfaocitfgsaDBdbasazBdlavaicdtfaDBdbavc;abfaocefcsGcitfgsaHBdbasaDBdlaocdfhoaOaifhidnadcd9hmbabarcetfgsaH87ebasclfaD87ebascdfaz87ebxdkabarcdtfgsaHBdbascwfaDBdbasclfazBdbxekdnaDcpe0mbaxcefgOavaiaqaDcsGfRbbgscl49RcsGcdtfydbascz6gPEhDavaias9RcsGcdtfydbaOaPfgzascsGgOEhsaOThOdndnadcd9hmbabarcetfgHax87ebaHclfas87ebaHcdfaD87ebxekabarcdtfgHaxBdbaHcwfasBdbaHclfaDBdbkavaicdtfaxBdbavc;abfaocitfgHaDBdbaHaxBdlavaicefgicsGcdtfaDBdbavc;abfaocefcsGcitfgHasBdbaHaDBdlavaiaPfgicsGcdtfasBdbavc;abfaocdfcsGcitfgDaxBdbaDasBdlaocifhoaiaOfhiazaOfhxxekaxcbalRbbgHEgAaDc;:eSgDfhzaHcsGhCaHcl4hXdndnaHcs0mbazcefhOxekazhOavaiaX9RcsGcdtfydbhzkdndnaCmbaOcefhxxekaOhxavaiaH9RcsGcdtfydbhOkdndnaDTmbalcefhDxekalcdfhDal8SbegPcFeGhsdnaPcu9kmbalcofhAascFbGhscrhldninaD8SbbgPcFbGaltasVhsaPcu9kmeaDcefhDalcrfglc8J9hmbkaAhDxekaDcefhDkasce4cbasceG9R7amfgmhAkdndnaXcsSmbaDhsxekaDcefhsaD8SbbglcFeGhPdnalcu9kmbaDcvfhzaPcFbGhPcrhldninas8SbbgDcFbGaltaPVhPaDcu9kmeascefhsalcrfglc8J9hmbkazhsxekascefhskaPce4cbaPceG9R7amfgmhzkdndnaCcsSmbashlxekascefhlas8SbbgDcFeGhPdnaDcu9kmbascvfhOaPcFbGhPcrhDdninal8SbbgscFbGaDtaPVhPascu9kmealcefhlaDcrfgDc8J9hmbkaOhlxekalcefhlkaPce4cbaPceG9R7amfgmhOkdndnadcd9hmbabarcetfgDaA87ebaDclfaO87ebaDcdfaz87ebxekabarcdtfgDaABdbaDcwfaOBdbaDclfazBdbkavc;abfaocitfgDazBdbaDaABdlavaicdtfaABdbavc;abfaocefcsGcitfgDaOBdbaDazBdlavaicefgicsGcdtfazBdbavc;abfaocdfcsGcitfgDaABdbaDaOBdlavaiaHcz6aXcsSVfgicsGcdtfaOBdbaiaCTaCcsSVfhiaocifhokawcefhwaocsGhoaicsGhiarcifgrae6mbkkcbc99alaqSEhokavc;aef8Kjjjjbaok:clevu8Jjjjjbcz9Rhvdnaecvfal9nmbc9:skdnaiRbbc;:eGc;qeSmbcuskav9cb83iwaicefhoaialfc98fhrdnaeTmbdnadcdSmbcbhwindnaoar6mbc9:skaocefhlao8SbbgicFeGhddndnaicu9mmbalhoxekaocvfhoadcFbGhdcrhidninal8SbbgDcFbGaitadVhdaDcu9kmealcefhlaicrfgic8J9hmbxdkkalcefhokabawcdtfadc8Etc8F91adcd47avcwfadceGcdtVglydbfgiBdbalaiBdbawcefgwae9hmbxdkkcbhwindnaoar6mbc9:skaocefhlao8SbbgicFeGhddndnaicu9mmbalhoxekaocvfhoadcFbGhdcrhidninal8SbbgDcFbGaitadVhdaDcu9kmealcefhlaicrfgic8J9hmbxdkkalcefhokabawcetfadc8Etc8F91adcd47avcwfadceGcdtVglydbfgi87ebalaiBdbawcefgwae9hmbkkcbc99aoarSEk:2Pliur97eue978Jjjjjbc8W9Rhiaec98Ghldndnadcl9hmbdnalTmbcbhvabhdinadadpbbbgocKp:RecKp:Sep;6egraocwp:RecKp:Sep;6earp;Geaoczp:RecKp:Sep;6egwp;Gep;Kep;LegDpxbbbbbbbbbbbbbbbbp:2egqarpxbbbjbbbjbbbjbbbjgkp9op9rp;Kegrpxbb;:9cbb;:9cbb;:9cbb;:9cararp;MeaDaDp;Meawaqawakp9op9rp;Kegrarp;Mep;Kep;Kep;Jep;Negwp;Mepxbbn0bbn0bbn0bbn0gqp;KepxFbbbFbbbFbbbFbbbp9oaopxbbbFbbbFbbbFbbbFp9op9qarawp;Meaqp;Kecwp:RepxbFbbbFbbbFbbbFbbp9op9qaDawp;Meaqp;Keczp:RepxbbFbbbFbbbFbbbFbp9op9qpkbbadczfhdavclfgval6mbkkalaeSmeaipxbbbbbbbbbbbbbbbbgqpklbaiabalcdtfgdaeciGglcdtgv;8qbbdnalTmbaiaipblbgocKp:RecKp:Sep;6egraocwp:RecKp:Sep;6earp;Geaoczp:RecKp:Sep;6egwp;Gep;Kep;LegDaqp:2egqarpxbbbjbbbjbbbjbbbjgkp9op9rp;Kegrpxbb;:9cbb;:9cbb;:9cbb;:9cararp;MeaDaDp;Meawaqawakp9op9rp;Kegrarp;Mep;Kep;Kep;Jep;Negwp;Mepxbbn0bbn0bbn0bbn0gqp;KepxFbbbFbbbFbbbFbbbp9oaopxbbbFbbbFbbbFbbbFp9op9qarawp;Meaqp;Kecwp:RepxbFbbbFbbbFbbbFbbp9op9qaDawp;Meaqp;Keczp:RepxbbFbbbFbbbFbbbFbp9op9qpklbkadaiav;8qbbskaipxFubbFubbFubbFubbgxpklbdnalTmbcbhvabhdinadczfgmampbbbgopxbbbbbbFFbbbbbbFFgkp9oadpbbbgDaopmbediwDqkzHOAKY8AEgwczp:Reczp:Sep;6egraipblbaDaopmlvorxmPsCXQL358E8Fp9op;6eawczp:Sep;6egwp;Gearp;Gep;Kep;Legopxbbbbbbbbbbbbbbbbp:2egqarpxbbbjbbbjbbbjbbbjgPp9op9rp;Kegrpxb;:FSb;:FSb;:FSb;:FSararp;Meaoaop;MeawaqawaPp9op9rp;Kegrarp;Mep;Kep;Kep;Jep;Negwp;Mepxbbn0bbn0bbn0bbn0gqp;KepxFFbbFFbbFFbbFFbbp9oaoawp;Meaqp;Keczp:Rep9qgoarawp;Meaqp;KepxFFbbFFbbFFbbFFbbp9ogrpmwDKYqk8AExm35Ps8E8Fp9qpkbbadaDakp9oaoarpmbezHdiOAlvCXorQLp9qpkbbadcafhdavclfgval6mbkkalaeSmbaiczfpxbbbbbbbbbbbbbbbbgopklbaiaopklbaiabalcitfgdaeciGglcitgv;8qbbaiaxpkladnalTmbaiaipblzgopxbbbbbbFFbbbbbbFFgkp9oaipblbgDaopmbediwDqkzHOAKY8AEgwczp:Reczp:Sep;6egraipblaaDaopmlvorxmPsCXQL358E8Fp9op;6eawczp:Sep;6egwp;Gearp;Gep;Kep;Legopxbbbbbbbbbbbbbbbbp:2egqarpxbbbjbbbjbbbjbbbjgPp9op9rp;Kegrpxb;:FSb;:FSb;:FSb;:FSararp;Meaoaop;MeawaqawaPp9op9rp;Kegrarp;Mep;Kep;Kep;Jep;Negwp;Mepxbbn0bbn0bbn0bbn0gqp;KepxFFbbFFbbFFbbFFbbp9oaoawp;Meaqp;Keczp:Rep9qgoarawp;Meaqp;KepxFFbbFFbbFFbbFFbbp9ogrpmwDKYqk8AExm35Ps8E8Fp9qpklzaiaDakp9oaoarpmbezHdiOAlvCXorQLp9qpklbkadaiav;8qbbkk;Iwllue97euo978Jjjjjbca9Rhidnaec98GglTmbcbhvabhoinaocKfpxbbjZbbjZbbjZbbjZpx;Zl81Z;Zl81Z;Zl81Z;Zl81ZaopbbbgraoczfgwpbbbgDpmlvorxmPsCXQL358E8Fgqczp:Segkpxibbbibbbibbbibbbp9qp;6ep;NegxaraDpmbediwDqkzHOAKY8AEgrczp:Reczp:Sep;6ep;MegDaDp;Meaxarczp:Sep;6ep;Megmamp;Meaxaqczp:Reczp:Sep;6ep;Megqaqp;Mep;Kep;Kep;Lepxbbbbbbbbbbbbbbbbp:4ep;Jepxb;:FSb;:FSb;:FSb;:FSgxp;Mepxbbn0bbn0bbn0bbn0grp;KepxFFbbFFbbFFbbFFbbgPp9oamaxp;Mearp;Keczp:Rep9qgmaDaxp;Mearp;KeaPp9oaqaxp;Mearp;Keczp:Rep9qgrpmwDKYqk8AExm35Ps8E8FgDp5eakclp:RegxpEi:T:j83ibawaDp5baxpEd:T:j83ibaocwfamarpmbezHdiOAlvCXorQLgrp5eaxpEe:T:j83ibaoarp5baxpEb:T:j83ibaocafhoavclfgval6mbkkdnalaeSmbaiczfpxbbbbbbbbbbbbbbbbgxpklbaiaxpklbaiabalcitfgoaeciGgvcitgw;8qbbdnavTmbaipxbbjZbbjZbbjZbbjZpx;Zl81Z;Zl81Z;Zl81Z;Zl81ZaipblbgraipblzgDpmlvorxmPsCXQL358E8Fgqczp:Segkpxibbbibbbibbbibbbp9qp;6ep;NegxaraDpmbediwDqkzHOAKY8AEgrczp:Reczp:Sep;6ep;MegDaDp;Meaxarczp:Sep;6ep;Megmamp;Meaxaqczp:Reczp:Sep;6ep;Megqaqp;Mep;Kep;Kep;Lepxbbbbbbbbbbbbbbbbp:4ep;Jepxb;:FSb;:FSb;:FSb;:FSgxp;Mepxbbn0bbn0bbn0bbn0grp;KepxFFbbFFbbFFbbFFbbgPp9oamaxp;Mearp;Keczp:Rep9qgmaDaxp;Mearp;KeaPp9oaqaxp;Mearp;Keczp:Rep9qgrpmwDKYqk8AExm35Ps8E8FgDp5eakclp:RegxpEi:T:j83iKaiaDp5baxpEd:T:j83izaiamarpmbezHdiOAlvCXorQLgrp5eaxpEe:T:j83iwaiarp5baxpEb:T:j83ibkaoaiaw;8qbbkk;uddiue978Jjjjjbc;ab9Rhidnadcd4ae2glc98GgvTmbcbheabhdinadadpbbbgocwp:Recwp:Sep;6eaocep:SepxbbjFbbjFbbjFbbjFp9opxbbjZbbjZbbjZbbjZp:Uep;Mepkbbadczfhdaeclfgeav6mbkkdnavalSmbaic8WfpxbbbbbbbbbbbbbbbbgopklbaicafaopklbaiczfaopklbaiaopklbaiabavcdtfgdalciGgecdtgv;8qbbdnaeTmbaiaipblbgocwp:Recwp:Sep;6eaocep:SepxbbjFbbjFbbjFbbjFp9opxbbjZbbjZbbjZbbjZp:Uep;Mepklbkadaiav;8qbbkk:CPvdue97euw97eu8Jjjjjbc8W9Rhiaec98Ghldndnadcl9hmbaipxbbbbbbbbbbbbbbbbgvpklbdnalTmbcbhoabhdinadpbbbhradpxbbuJbbuJbbuJbbuJaipblbarcKp:Tep9qgwcep:Seawp9qgDcdp:SeaDp9qgDclp:SeaDp9qgqp;6ep;NegDarcwp:RecKp:SegkarpxFbbbFbbbFbbbFbbbgxp9ogmp:Uep;6ep;Mepxbbn0bbn0bbn0bbn0gPp;Kecwp:RepxbFbbbFbbbFbbbFbbp9oaDamakp:Xearczp:RecKp:Segrp:Uep;6ep;MeaPp;Keaxp9op9qaDamakarp:Uep:Xep;6ep;MeaPp;Keczp:RepxbbFbbbFbbbFbbbFbp9op9qaDaqawcep:Rep9oawpxebbbebbbebbbebbbp9op9qp;6ep;MeaPp;KecKp:Rep9qpkbbadczfhdaoclfgoal6mbkkalaeSmeaiavpklaaicafabalcdtfgdaeciGglcdtgo;8qbbaiavpklbdnalTmbaipblahraipxbbuJbbuJbbuJbbuJaipblbarcKp:Tep9qgwcep:Seawp9qgDcdp:SeaDp9qgDclp:SeaDp9qgqp;6ep;NegDarcwp:RecKp:SegkarpxFbbbFbbbFbbbFbbbgxp9ogmp:Uep;6ep;Mepxbbn0bbn0bbn0bbn0gPp;Kecwp:RepxbFbbbFbbbFbbbFbbp9oaDamakp:Xearczp:RecKp:Segrp:Uep;6ep;MeaPp;Keaxp9op9qaDamakarp:Uep:Xep;6ep;MeaPp;Keczp:RepxbbFbbbFbbbFbbbFbp9op9qaDaqawcep:Rep9oawpxebbbebbbebbbebbbp9op9qp;6ep;MeaPp;KecKp:Rep9qpklakadaicafao;8qbbskaipxbbbbbbbbbbbbbbbbgvpklbdnalTmbcbhoabhdinadczfgspxbFu9hbFu9hbFu9hbFu9hadpbbbgDaspbbbgPpmlvorxmPsCXQL358E8Fgmczp:Teaipblbp9qgrcep:Searp9qgwcdp:Seawp9qgwclp:Seawp9qgwcwp:Seawp9qgqp;6ep;NegwaDaPpmbediwDqkzHOAKY8AEgDpxFFbbFFbbFFbbFFbbgPp9ogkaDczp:Segxp:Ueamczp:Reczp:Segmp:Xep;6ep;Mepxbbn0bbn0bbn0bbn0gDp;KeaPp9oawakaxamp:Uep:Xep;6ep;MeaDp;Keczp:Rep9qgxawaqarcep:Rep9oarpxebbbebbbebbbebbbp9op9qp;6ep;MeaDp;Keczp:Reawamakp:Uep;6ep;MeaDp;KeaPp9op9qgrpmwDKYqk8AExm35Ps8E8FpkbbadaxarpmbezHdiOAlvCXorQLpkbbadcafhdaoclfgoal6mbkkalaeSmbaiczfpxbbbbbbbbbbbbbbbbgrpklbaiarpklbaiabalcitfgdaeciGglcitgo;8qbbaiavpkladnalTmbaipxbFu9hbFu9hbFu9hbFu9haipblbgDaipblzgPpmlvorxmPsCXQL358E8Fgmczp:Teaipblap9qgrcep:Searp9qgwcdp:Seawp9qgwclp:Seawp9qgwcwp:Seawp9qgqp;6ep;NegwaDaPpmbediwDqkzHOAKY8AEgDpxFFbbFFbbFFbbFFbbgPp9ogkaDczp:Segxp:Ueamczp:Reczp:Segmp:Xep;6ep;Mepxbbn0bbn0bbn0bbn0gDp;KeaPp9oawakaxamp:Uep:Xep;6ep;MeaDp;Keczp:Rep9qgxawaqarcep:Rep9oarpxebbbebbbebbbebbbp9op9qp;6ep;MeaDp;Keczp:Reawamakp:Uep;6ep;MeaDp;KeaPp9op9qgrpmwDKYqk8AExm35Ps8E8FpklzaiaxarpmbezHdiOAlvCXorQLpklbkadaiao;8qbbkk9teiucbcbydj1jjbgeabcifc98GfgbBdj1jjbdndnabZbcztgd9nmbcuhiabad9RcFFifcz4nbcuSmekaehikaikkkebcjwklz:Dbb",n=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),i=new Uint8Array([32,0,65,2,1,106,34,33,3,128,11,4,13,64,6,253,10,7,15,116,127,5,8,12,40,16,19,54,20,9,27,255,113,17,42,67,24,23,146,148,18,14,22,45,70,69,56,114,101,21,25,63,75,136,108,28,118,29,73,115]);if(typeof WebAssembly!="object")return{supported:!1};var o=WebAssembly.validate(n)?s(t):s(e),r,a=WebAssembly.instantiate(o,{}).then(function(I){r=I.instance,r.exports.__wasm_call_ctors()});function s(I){for(var b=new Uint8Array(I.length),x=0;x<I.length;++x){var T=I.charCodeAt(x);b[x]=T>96?T-97:T>64?T-39:T+4}for(var w=0,x=0;x<I.length;++x)b[w++]=b[x]<60?i[b[x]]:(b[x]-60)*64+b[++x];return b.buffer.slice(0,w)}function A(I,b,x,T,w,R,z){var M=I.exports.sbrk,N=T+3&-4,O=M(N*w),u=M(R.length),E=new Uint8Array(I.exports.memory.buffer);E.set(R,u);var y=b(O,T,w,u,R.length);if(y==0&&z&&z(O,N,w),x.set(E.subarray(O,O+T*w)),M(O-M(0)),y!=0)throw new Error("Malformed buffer data: "+y)}var l={NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp",COLOR:"meshopt_decodeFilterColor"},d={ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"},m=[],p=0;function g(I){var b={object:new Worker(I),pending:0,requests:{}};return b.object.onmessage=function(x){var T=x.data;b.pending-=T.count,b.requests[T.id][T.action](T.value),delete b.requests[T.id]},b}function h(I){for(var b="self.ready = WebAssembly.instantiate(new Uint8Array(["+new Uint8Array(o)+"]), {}).then(function(result) { result.instance.exports.__wasm_call_ctors(); return result.instance; });self.onmessage = "+_.name+";"+A.toString()+_.toString(),x=new Blob([b],{type:"text/javascript"}),T=URL.createObjectURL(x),w=m.length;w<I;++w)m[w]=g(T);for(var w=I;w<m.length;++w)m[w].object.postMessage({});m.length=I,URL.revokeObjectURL(T)}function C(I,b,x,T,w){for(var R=m[0],z=1;z<m.length;++z)m[z].pending<R.pending&&(R=m[z]);return new Promise(function(M,N){var O=new Uint8Array(x),u=++p;R.pending+=I,R.requests[u]={resolve:M,reject:N},R.object.postMessage({id:u,count:I,size:b,source:O,mode:T,filter:w},[O.buffer])})}function _(I){var b=I.data;if(!b.id)return self.close();self.ready.then(function(x){try{var T=new Uint8Array(b.count*b.size);A(x,x.exports[b.mode],T,b.count,b.size,b.source,x.exports[b.filter]),self.postMessage({id:b.id,count:b.count,action:"resolve",value:T},[T.buffer])}catch(w){self.postMessage({id:b.id,count:b.count,action:"reject",value:w})}})}return{ready:a,supported:!0,useWorkers:function(I){h(I)},decodeVertexBuffer:function(I,b,x,T,w){A(r,r.exports.meshopt_decodeVertexBuffer,I,b,x,T,r.exports[l[w]])},decodeIndexBuffer:function(I,b,x,T){A(r,r.exports.meshopt_decodeIndexBuffer,I,b,x,T)},decodeIndexSequence:function(I,b,x,T){A(r,r.exports.meshopt_decodeIndexSequence,I,b,x,T)},decodeGltfBuffer:function(I,b,x,T,w,R){A(r,r.exports[d[w]],I,b,x,T,r.exports[l[R]])},decodeGltfBufferAsync:function(I,b,x,T,w){return m.length>0?C(I,b,x,d[T],l[w]):a.then(function(){var R=new Uint8Array(I*b);return A(r,r.exports[d[T]],R,I,b,x,r.exports[l[w]]),R})}}})();typeof Ig=="object"&&typeof wx=="object"?wx.exports=iI:typeof define=="function"&&define.amd?define([],function(){return iI}):typeof Ig=="object"?Ig.MeshoptDecoder=iI:(typeof self<"u"?self:Ig).MeshoptDecoder=iI});var w1=Fs((yg,Dx)=>{var oI=(function(){"use strict";var e="b9H79Tebbbe:Gez9Geueu9Geub9Gbb9Gsuuuuuuuuuuuu99uueu9Gvuuuuub9Gruuuuuuub9Gouuuuuue999Gvuuuuueu9Gquuuuuuu99uueu9GPuuuuuuuuuuu99uueu9Gquuuuuuuu99ueu9Gruuuuuu99eu9Gwuuuuuu99ueu9Giuuue999Gluuuueu9GiuuueuiXCdilvorlwiDqkxmPbssbelve9Weiiviebeoweuec:G:Pdkr;7eko9TW9T9VV95dbH9F9F939H79T9F9J9H229F9Jt9VV7bbz9TW79O9V9Wt9F79P9T9W29P9M95br8E9TW79O9V9Wt9F79P9T9W29P9M959x9Pt9OcttV9P9I91tW7bw8A9TW79O9V9Wt9F79P9T9W29P9M959x9Pt9O9v9W9K9HtWbDQ9TW79O9V9Wt9F79P9T9W29P9M959t29V9W9W95bqX9TW79O9V9Wt9F79P9T9W29P9M959qV919UWbkQ9TW79O9V9Wt9F79P9T9W29P9M959q9V9P9Ut7bxX9TW79O9V9Wt9F79P9T9W29P9M959t9J9H2Wbma9TW79O9V9Wt9F9V9Wt9P9T9P96W9wWVtW94SWt9J9O9sW9T9H9WbPl79IV9RbsDwebcekdOAq:d;OeCdbk:J1eo3ue99euE99Cue9:8Jjjjjbcj;sb9Rgs8Kjjjjbcbhzasc:Cefcbc;Kbz:rjjjb8AdnabaeSmbabaeadcdtz:qjjjb8AkdnamcdGTmbalcrfci4gHcbyd1:jjjbHjjjjbbheasc:Cefasyd;8egOcdtfaeBdbasaOcefBd;8eaecbaHz:rjjjbhAcbhlcbhednadTmbcbhlabheadhHinaAaeydbgOci4fgCaCRbbgCceaOcrGgOtV86bbaCcu7aO4ceGalfhlaeclfheaHcufgHmbkcualcdtalcFFFFi0Ehekaecbyd1:jjjbHjjjjbbhzasc:Cefasyd;8egecdtfazBdbasaecefBd;8ealcd4alfhOcehHinaHgecethHaeaO6mbkcbhXcuaecdtgOaecFFFFi0Ecbyd1:jjjbHjjjjbbhHasc:Cefasyd;8egCcdtfaHBdbasaCcefBd;8eaHcFeaOz:rjjjbhQdnadTmbaecufhLcbhKindndnaQabaXcdtfgYydbgCc:v;t;h;Ev2aLGgOcdtfgAydbgHcuSmbceheinazaHcdtfydbaCSmdaOaefhHaecefheaQaHaLGgOcdtfgAydbgHcu9hmbkkazaKcdtfaCBdbaAaKBdbaKhHaKcefhKkaYaHBdbaXcefgXad9hmbkkaQcbyd:m:jjjbH:bjjjbbasasyd;8ecufBd;8ekcbh8AcualcefgecdtaecFFFFi0Ecbyd1:jjjbHjjjjbbhKasc:Cefasyd;8egecdtfaKBdbasaKBdNeasaecefBd;8ecuadcitadcFFFFe0Ecbyd1:jjjbHjjjjbbhEasc:Cefasyd;8egecdtfaEBdbasaEBd:yeasaecefBd;8eascNefabadalcbz:cjjjbcualcdtgealcFFFFi0Eg3cbyd1:jjjbHjjjjbbhCasc:Cefasyd;8egHcdtfaCBdbasaHcefBd;8ea3cbyd1:jjjbHjjjjbbhYasc:Cefasyd;8egHcdtfaYBdbasaHcefBd;8eaCaYaialavazasc:Cefz:djjjbalcbyd1:jjjbHjjjjbbh5asc:Cefasyd;8egHcdtfa5BdbasaHcefBd;8ea3cbyd1:jjjbHjjjjbbhHasc:Cefasyd;8egOcdtfaHBdbasaOcefBd;8ea3cbyd1:jjjbHjjjjbbhOasc:Cefasyd;8egAcdtfaOBdbasaAcefBd;8eaHcFeaez:rjjjbh8EaOcFeaez:rjjjbh8FdnalTmbaEcwfhaindnaKa8AgOcefg8AcdtfydbgAaKaOcdtgefydbgHSmbaAaH9RhhaEaHcitfhga8Faefh8Ja8Eaefh8KcbhQindndnagaQcitfydbgLaO9hmba8KaOBdba8JaOBdbxekdnaKaLcdtg8LfgeclfydbgHaeydbgeSmbaEaecitgAfydbaOSmeaHae9Rh8Maecu7aHfhXaaaAfhHcbheinaXaeSmeaecefheaHydbhAaHcwfhHaAaO9hmbkaea8M6meka8Fa8LfgeaOaLaeydbcuSEBdba8KaLaOa8KydbcuSEBdbkaQcefgQah9hmbkka8Aal9hmbkaChHaYhOa8FhAa8EhQcbheindndnaeaHydbgL9hmbdnaeaOydbgL9hmbaQydbhLdnaAydbgXcu9hmbaLcu9hmba5aefcb86bbxikdnaXcuSmbaLcuSmbaeaXSmbaCaXcdtfydbaCaLcdtfydb9hmba5aefcd86bbxika5aefh8KdnaeaXSmbaeaLSmba8Kce86bbxika8Kcl86bbxdkdnaeaYaLcdtgXfydb9hmbdnaAydbg8KcuSmbaea8KSmbaQydbghcuSmbaeahSmba8FaXfydbggcuSmbagaLSmba8EaXfydbgXcuSmbaXaLSmbdnaCa8KcdtfydbgLaCaXcdtfydb9hmbaLaCahcdtfydbgXSmbaXaCagcdtfydb9hmba5aefcd86bbxlka5aefcl86bbxika5aefcl86bbxdka5aefcl86bbxeka5aefa5aLfRbb86bbkaHclfhHaOclfhOaAclfhAaQclfhQalaecefge9hmbkdnamcaGTmbaEcwfh8Jcbh8Nindndna5a8NfgyRbbg8Pc9:fPibebekdndndnaCa8Ncdtfydbgea8N9hmbdnaqmbcbhgxdkdnazTmbcbhga8NheinagaqazaecdtgefydbfRbbcdGce4VhgaYaefydbgea8N9hmbxikkcbhga8NheinagaqaefRbbcdGce4VhgaYaecdtfydbgea8N9hmbxdkka5aefRbbhexeka8NheindnaKaecdtgafgeclfydbgHaeydbgeSmbaHae9Rh8AaEaecitfh8MaCaafh8Lcbh8Kina8Ma8KcitfydbgXhednindnaKaecdtgLfgeclfydbgHaeydbgeSmbdnaCaEaecitgOfydbcdtfydba8LydbgQ9hmbcehexikaHae9Rhhaecu7aHfhAa8JaOfhHcbheinaAaeSmeaecefheaHydbhOaHcwfhHaCaOcdtfydbaQ9hmbkaeah6hexdkaYaLfydbgeaX9hmbkcbhekagaece7Vhga8Kcefg8Ka8A9hmbkkaYaafydbgea8N9hmbka8PciagceGEhekayae86bbka8Ncefg8Nal9hmbkkdnaqTmbdndnazTmbazheaChHalhOindnaqaeydbfRbbceGTmba5aHydbfcl86bbkaeclfheaHclfhHaOcufgOmbxdkkaChealhHindnaqRbbceGTmba5aeydbfcl86bbkaqcefhqaeclfheaHcufgHmbkkaChealhOa5hHindna5aeydbfRbbcl9hmbaHcl86bbkaeclfheaHcefhHaOcufgOmbkkamceGTmba5healhHindnaeRbbce9hmbaecl86bbkaecefheaHcufgHmbkkcbhIcualcx2alc;v:Q;v:Qe0Ecbyd1:jjjbHjjjjbbhaasc:Cefasyd;8egecdtfaaBdbasaecefBd;8easc:qefcbBdbas9cb83i1eaaaialavazasc1efz:ejjjbh8RdndnaDmbcbh8Scbh8Lxekcbh8LawhecbhHindnaeIdbJbbbb9ETmbasa8LcdtfaHBdba8Lcefh8LkaeclfheaDaHcefgH9hmbkcua8Lal2gecdtaecFFFFi0Ecbyd1:jjjbHjjjjbbh8Sasc:Cefasyd;8egecdtfa8SBdbasaecefBd;8ealTmbdna8Lmbcbh8Lxekarcd4hXdnazTmba8Lcdth8KcbhLa8ShKinaoazaLcdtfydbaX2cdtfhQasheaKhHa8LhOinaHaQaeydbcdtgAfIdbawaAfIdbNUdbaeclfheaHclfhHaOcufgOmbkaKa8KfhKaLcefgLal9hmbxdkka8Lcdth8KcbhLa8ShKinaoaLaX2cdtfhQasheaKhHa8LhOinaHaQaeydbcdtgAfIdbawaAfIdbNUdbaeclfheaHclfhHaOcufgOmbkaKa8KfhKaLcefgLal9hmbkkcualc8S2gHalc;D;O;f8U0EgAcbyd1:jjjbHjjjjbbheasc:Cefasyd;8egOcdtfaeBdbasaOcefBd;8eaecbaHz:rjjjbhycbhqcbh8Ndna8LTmbcbhIaAcbyd1:jjjbHjjjjbbh8Nasc:Cefasyd;8egecdtfa8NBdbasaecefBd;8ea8NcbaHz:rjjjb8Acua8Lal2gecltgHaecFFFFb0Ecbyd1:jjjbHjjjjbbhqasc:Cefasyd;8egecdtfaqBdbasaecefBd;8eaqcbaHz:rjjjb8AamcjjjjdGTmbcualcltgealcFFFFb0Ecbyd1:jjjbHjjjjbbhIasc:Cefasyd;8egHcdtfaIBdbasaHcefBd;8eaIcbaez:rjjjb8AkdnadTmbcbhQabhHinaaaHclfydbgLcx2fgeIdbaaaHydbgKcx2fgOIdbgR:tg8UaaaHcwfydbgXcx2fgAIdlaOIdlg8V:tg8WNaAIdbaR:tg8XaeIdla8V:tg8YN:tg8Zh80aeIdwaOIdwg81:tgBa8XNaAIdwa81:tg83a8UN:tgUh8Xa8Ya83Na8WaBN:tg8Yh8Udna8Za8ZNa8Ya8YNaUaUNMM:rgBJbbbb9EgOTmba8ZaB:vh80aUaB:vh8Xa8YaB:vh8UkayaCaKcdtfydbgAc8S2fgea8UaB:rg8Wa8UNNg85aeIdbMUdbaea8Xa8Wa8XNg86Ng87aeIdlMUdlaea80a8Wa80Ng83Ng88aeIdwMUdwaea86a8UNg86aeIdxMUdxaea83a8UNg89aeIdzMUdzaea83a8XNg8:aeIdCMUdCaea8Ua8Wa80a81Na8UaRNa8Va8XNMM:mgZNg83Ng8UaeIdKMUdKaea8Xa83Ng8XaeId3MUd3aea80a83Ng80aeIdaMUdaaea83aZNg83aeId8KMUd8Kaea8WaeIdyMUdyayaCaLcdtfydbgLc8S2fgea85aeIdbMUdbaea87aeIdlMUdlaea88aeIdwMUdwaea86aeIdxMUdxaea89aeIdzMUdzaea8:aeIdCMUdCaea8UaeIdKMUdKaea8XaeId3MUd3aea80aeIdaMUdaaea83aeId8KMUd8Kaea8WaeIdyMUdyayaCaXcdtfydbgKc8S2fgea85aeIdbMUdbaea87aeIdlMUdlaea88aeIdwMUdwaea86aeIdxMUdxaea89aeIdzMUdzaea8:aeIdCMUdCaea8UaeIdKMUdKaea8XaeId3MUd3aea80aeIdaMUdaaea83aeId8KMUd8Kaea8WaeIdyMUdydnaITmbdnaOTmba8ZaB:vh8ZaUaB:vhUa8YaB:vh8YkaIaAcltfgeaBJbbbZNg8UaUNg8WaeIdlMUdlaea8Ua8ZNg8XaeIdwMUdwaea8Ua8YNg80aeIdbMUdbaea8UaR:ma8YNaUa8VN:ta81a8ZN:tNg8UaeIdxMUdxaIaLcltfgea8WaeIdlMUdlaea8XaeIdwMUdwaea80aeIdbMUdbaea8UaeIdxMUdxaIaKcltfgea8WaeIdlMUdlaea8XaeIdwMUdwaea80aeIdbMUdbaea8UaeIdxMUdxkaHcxfhHaQcifgQad6mbkkdnalTmbJ;n;m;m89J:v:;;w8ZamczGEh8YcbhOaChAaahHayheindnaOaAydb9hmbaecxfgQaQIdbJbbbbMUdbaeczfgQaQIdbJbbbbMUdbaecCfgQaQIdbJbbbbMUdbaea8YaecyfgQIdbg8ZNg8UaeIdbMUdbaeclfgLa8UaLIdbMUdbaecwfgLa8UaLIdbMUdbaecKfgLaLIdbaHIdbg8Xa8UN:tUdbaHcwfIdbh8Waec3fgLaLIdba8UaHclfIdbg80N:tUdbaecafgLaLIdba8Ua8WN:tUdbaec8KfgLIdbhUaQa8Za8UMUdbaLaUa8Ua8Wa8WNa8Xa8XNa80a80NMMNMUdbkaAclfhAaHcxfhHaec8SfhealaOcefgO9hmbkkdnadTmbcbhXabhKinabaXcdtfhLcbhHina5aLaHc:G1jjbfydbcdtfydbgOfRbbhedndna5aKaHfydbgAfRbbgQc99fcFeGcpe0mbaec99fcFeGc;:e6mekdnaQcufcFeGce0mba8EaAcdtfydbaO9hmekdnaecufcFeGce0mba8FaOcdtfydbaA9hmekJbbacJbbacJbbbZaecFeGceSEaQcFeGceSEh88aaaOcx2fgeIdwaaaAcx2fgQIdwgB:tg80:mh86aeIdlaQIdlg83:tg8Z:mh89aeIdbaQIdbgR:tgU:mh8:dnaaaLaHc:K1jjbfydbcdtfydbcx2fgeIdwaB:tg8Va80a80NaUaUNa8Za8ZNMMg8YNa8Va80NaeIdbaR:tg81aUNa8ZaeIdla83:tg85NMMg8Wa80N:tg8Xa8XNa81a8YNa8WaUN:tg8Ua8UNa85a8YNa8Wa8ZN:tg8Wa8WNMM:rg87Jbbbb9ETmba8Xa87:vh8Xa8Wa87:vh8Wa8Ua87:vh8Uka88a8Y:rNg8Ya8XaBNa8UaRNa83a8WNMM:mgZNg87aZNhZa8Xa87Nhna8Wa87Nhca8Ua87Nh9ca8Ya8XNg87a8WNhJa87a8UNh9ea8Ya8WNgTa8UNhSa8Xa87Nh87a8WaTNhTa8Ua8Ya8UNNh9hdnaUa85Na81a89NMg8Xa8XNa8Za8VNa85a86NMg8Ua8UNa80a81Na8Va8:NMg8Wa8WNMM:rg80Jbbbb9ETmba8Xa80:vh8Xa8Wa80:vh8Wa8Ua80:vh8UkayaCaAcdtfydbc8S2fgeaeIdba9ha8Ua88a80:rNg80a8UNNMgUMUdbaeaTa8Wa80a8WNg8VNMg81aeIdlMUdlaea87a8Xa80a8XNg8ZNMg85aeIdwMUdwaeaSa8Va8UNMg8VaeIdxMUdxaea9ea8Za8UNMg87aeIdzMUdzaeaJa8Za8WNMg8ZaeIdCMUdCaea9ca8Ua80a8XaBNa8UaRNa83a8WNMMgB:mNg80NMg8UaeIdKMUdKaeaca8Wa80NMg8WaeId3MUd3aeana8Xa80NMg8XaeIdaMUdaaeaZaBa80N:tg80aeId8KMUd8Kaea8YJbbbbMg8YaeIdyMUdyayaCaOcdtfydbc8S2fgeaUaeIdbMUdbaea81aeIdlMUdlaea85aeIdwMUdwaea8VaeIdxMUdxaea87aeIdzMUdzaea8ZaeIdCMUdCaea8UaeIdKMUdKaea8WaeId3MUd3aea8XaeIdaMUdaaea80aeId8KMUd8Kaea8YaeIdyMUdykaHclfgHcx9hmbkaKcxfhKaXcifgXad6mbka8LTmbcbhKinJbbbbh8YaaabaKcdtfgeclfydbgXcx2fgHIdwaaaeydbg8Kcx2fgOIdwg81:tg8Wa8WNaHIdbaOIdbg85:tg8Xa8XNaHIdlaOIdlg87:tg80a80NMMgRaaaecwfydbghcx2fgeIdwa81:tg8ZNa8Wa8Wa8ZNa8XaeIdba85:tgUNa80aeIdla87:tgBNMMg8UN:tJbbbbJbbjZaRa8Za8ZNaUaUNaBaBNMMg8VNa8Ua8UN:tg83:va83Jbbbb9BEg83Nh89a8Va8WNa8Za8UN:ta83Nh8:aRaBNa80a8UN:ta83NhZa8Va80NaBa8UN:ta83NhnaRaUNa8Xa8UN:ta83Nhca8Va8XNaUa8UN:ta83Nh9ca8XaBNaUa80N:tg8Ua8UNa80a8ZNaBa8WN:tg8Ua8UNa8WaUNa8Za8XN:tg8Ua8UNMM:rJbbbZNh8Ua8Sa8Ka8L2ggcdtfhHa8Saha8L2gEcdtfhOa8SaXa8L2g8JcdtfhAa81:mhJa87:mh9ea85:mhTcbhQa8LhLJbbbbhBJbbbbh83JbbbbhRJbbbbh8VJbbbbh81Jbbbbh85Jbbbbh87Jbbbbh88Jbbbbh86inascjdfaQfgecwfa8Ua8:aAIdbaHIdbg8Z:tg80Na89aOIdba8Z:tgUNMg8WNUdbaeclfa8Uana80NaZaUNMg8XNUdbaea8Ua9ca80NacaUNMg80NUdbaecxfa8UaJa8WNa9ea8XNa8ZaTa80NMMMg8ZNUdba8Ua8Wa8XNNa8VMh8Va8Ua8Wa80NNa81Mh81a8Ua8Xa80NNa85Mh85a8Ua8Za8ZNNa8YMh8Ya8Ua8Wa8ZNNaBMhBa8Ua8Xa8ZNNa83Mh83a8Ua80a8ZNNaRMhRa8Ua8Wa8WNNa87Mh87a8Ua8Xa8XNNa88Mh88a8Ua80a80NNa86Mh86aHclfhHaAclfhAaOclfhOaQczfhQaLcufgLmbka8Na8Kc8S2fgea86aeIdbMUdbaea88aeIdlMUdlaea87aeIdwMUdwaea85aeIdxMUdxaea81aeIdzMUdzaea8VaeIdCMUdCaeaRaeIdKMUdKaea83aeId3MUd3aeaBaeIdaMUdaaea8YaeId8KMUd8Kaea8UaeIdyMUdya8NaXc8S2fgea86aeIdbMUdbaea88aeIdlMUdlaea87aeIdwMUdwaea85aeIdxMUdxaea81aeIdzMUdzaea8VaeIdCMUdCaeaRaeIdKMUdKaea83aeId3MUd3aeaBaeIdaMUdaaea8YaeId8KMUd8Kaea8UaeIdyMUdya8Nahc8S2fgea86aeIdbMUdbaea88aeIdlMUdlaea87aeIdwMUdwaea85aeIdxMUdxaea81aeIdzMUdzaea8VaeIdCMUdCaeaRaeIdKMUdKaea83aeId3MUd3aeaBaeIdaMUdaaea8YaeId8KMUd8Kaea8UaeIdyMUdyaqagcltfhLcbhHa8LhAinaLaHfgeascjdfaHfgOIdbaeIdbMUdbaeclfgQaOclfIdbaQIdbMUdbaecwfgQaOcwfIdbaQIdbMUdbaecxfgeaOcxfIdbaeIdbMUdbaHczfhHaAcufgAmbkaqa8JcltfhLcbhHa8LhAinaLaHfgeascjdfaHfgOIdbaeIdbMUdbaeclfgQaOclfIdbaQIdbMUdbaecwfgQaOcwfIdbaQIdbMUdbaecxfgeaOcxfIdbaeIdbMUdbaHczfhHaAcufgAmbkaqaEcltfhLcbhHa8LhAinaLaHfgeascjdfaHfgOIdbaeIdbMUdbaeclfgQaOclfIdbaQIdbMUdbaecwfgQaOcwfIdbaQIdbMUdbaecxfgeaOcxfIdbaeIdbMUdbaHczfhHaAcufgAmbkaKcifgKad6mbkkcbhOdndnamcwGg9imbJbbbbh85cbh6cbh9kcbh0xekcbh6a3cbyd1:jjjbHjjjjbbh0asc:Cefasyd;8egecdtfa0BdbasaecefBd;8ecua0alabadaCz:fjjjbgAcltaAcjjjjiGEcbyd1:jjjbHjjjjbbh9kasc:Cefasyd;8egecdtfa9kBdbasaecefBd;8ea9kaAa0aaalz:gjjjbJFFuuh85aATmba9kheaAhHinaeIdbg8Ua85a85a8U9EEh85aeclfheaHcufgHmbkaAh6kasydNeh9mdnalTmba9mclfhea9mydbhAa5hHalhQcbhOincbaeydbgLaA9RaHRbbcpeGEaOfhOaHcefhHaeclfheaLhAaQcufgQmbkaOce4hOkcuadaO9Rcifg9ncx2a9nc;v:Q;v:Qe0Ecbyd1:jjjbHjjjjbbh8Pasc:Cefasyd;8egecdtfa8PBdbasaecefBd;8ecua9ncdta9ncFFFFi0Ecbyd1:jjjbHjjjjbbh9oasc:Cefasyd;8egecdtfa9oBdbasaecefBd;8ea3cbyd1:jjjbHjjjjbbhDasc:Cefasyd;8egecdtfaDBdbasaecefBd;8ealcbyd1:jjjbHjjjjbbh9pasc:Cefasyd;8egecdtfa9pBdbasaecefBd;8eaxaxNa8RJbbjZamclGEgnanN:vh88Jbbbbh86dnadak9nmbdna9nci6mbasyd:yeh9qa8Lclth9ra8Pcwfh9sJbbbbh87Jbbbbh86inascNefabadalaCz:cjjjbabh8Kcbh8Mcbh3inaba3cdtfhgcbheindnaCa8KaefydbgOcdtgXfydbgAaCagaec:W1jjbfydbcdtfydbgHcdtghfydbgQSmba5aHfRbbgKcv2a5aOfRbbgLfc;a1jjbfRbbg8JaLcv2aKfgEc;a1jjbfRbbg8AVcFeGTmbdnaQaA9nmbaEc;G1jjbfRbbcFeGmekdnaLcufcFeGce0mbaKTmba8EaXfydbaH9hmekdnaLTmbaKcufcFeGce0mba8FahfydbaO9hmeka8Pa8Mcx2fgAaHaOa8AcFeGgQEBdlaAaOaHaQEBdbaAaQa8JGcb9hBdwa8Mcefh8Mkaeclfgecx9hmbkdna3cifg3ad9pmba8Kcxfh8Ka8Mcifa9n9nmekka8MTmdcbhhinayaCa8Pahcx2fgKydbgQcdtgAfydbc8S2fgeIdwaaaKydlgLcx2fgHIdwg8XNaeIdzaHIdbg80NaeIdaMg8Ua8UMMa8XNaeIdlaHIdlg8ZNaeIdCa8XNaeId3Mg8Ua8UMMa8ZNaeIdba80NaeIdxa8ZNaeIdKMg8Ua8UMMa80NaeId8KMMM:lh8UJbbbbJbbjZaeIdyg8W:va8WJbbbb9BEh8WdndnaKydwg8KmbJFFuuh81xekJbbbbJbbjZayaCaLcdtfydbc8S2fgeIdygU:vaUJbbbb9BEaeIdwaaaQcx2fgHIdwgUNaeIdzaHIdbg8YNaeIdaMgBaBMMaUNaeIdlaHIdlgBNaeIdCaUNaeId3MgUaUMMaBNaeIdba8YNaeIdxaBNaeIdKMgUaUMMa8YNaeId8KMMM:lNh81ka8Wa8UNh8Vdna8LTmba8NaQc8S2fgHIdwa8XNaHIdza80NaHIdaMg8Ua8UMMa8XNaHIdla8ZNaHIdCa8XNaHId3Mg8Ua8UMMa8ZNaHIdba80NaHIdxa8ZNaHIdKMg8Ua8UMMa80NaHId8KMMMh8UaqaQa8L2ggcltfheaHIdyhUa8SaLa8L2gEcdtfgXhHa8LhOinaHIdbg8Wa8WaUNaecxfIdba8XaecwfIdbNa80aeIdbNa8ZaeclfIdbNMMMg8Wa8WM:tNa8UMh8UaHclfhHaeczfheaOcufgOmbkdndna8KmbJbbbbh8Wxeka8NaLc8S2fgOIdwaaaQcx2fgeIdwg8YNaOIdzaeIdbgBNaOIdaMg8Wa8WMMa8YNaOIdlaeIdlg83NaOIdCa8YNaOId3Mg8Wa8WMMa83NaOIdbaBNaOIdxa83NaOIdKMg8Wa8WMMaBNaOId8KMMMh8Wa8SagcdtfhHaqaEcltfheaOIdyhRa8LhOinaHIdbgUaUaRNaecxfIdba8YaecwfIdbNaBaeIdbNa83aeclfIdbNMMMgUaUM:tNa8WMh8WaHclfhHaeczfheaOcufgOmbka8W:lh8Wka8Va8U:lMh8Va81a8WMh81dndndna5aQfRbbc9:fPdbedkdna8Fa8Ea8EaAfydbaLSEaYaAfydbgXcdtfydbgAcu9hmbaYaLcdtfydbhAka8NaXc8S2fgOIdwaaaAcx2fgeIdwg8XNaOIdzaeIdbg80NaOIdaMg8Ua8UMMa8XNaOIdlaeIdlg8ZNaOIdCa8XNaOId3Mg8Ua8UMMa8ZNaOIdba80NaOIdxa8ZNaOIdKMg8Ua8UMMa80NaOId8KMMMh8Ua8SaAa8L2ggcdtfhHaqaXa8L2gEcltfheaOIdyhUa8LhOinaHIdbg8Wa8WaUNaecxfIdba8XaecwfIdbNa80aeIdbNa8ZaeclfIdbNMMMg8Wa8WM:tNa8UMh8UaHclfhHaeczfheaOcufgOmbkdndna8KmbJbbbbh8Wxeka8NaAc8S2fgOIdwaaaXcx2fgeIdwg80NaOIdzaeIdbg8ZNaOIdaMg8Wa8WMMa80NaOIdlaeIdlgUNaOIdCa80NaOId3Mg8Wa8WMMaUNaOIdba8ZNaOIdxaUNaOIdKMg8Wa8WMMa8ZNaOId8KMMMh8Wa8SaEcdtfhHaqagcltfheaOIdyh8Ya8LhOinaHIdbg8Xa8Xa8YNaecxfIdba80aecwfIdbNa8ZaeIdbNaUaeclfIdbNMMMg8Xa8XM:tNa8WMh8WaHclfhHaeczfheaOcufgOmbka8W:lh8Wka8Va8U:lMh8Va81a8WMh81xdkaYaAfydbgAaQSmbina8NaAc8S2fgHIdwa8XNaHIdza80NaHIdaMg8Ua8UMMa8XNaHIdla8ZNaHIdCa8XNaHId3Mg8Ua8UMMa8ZNaHIdba80NaHIdxa8ZNaHIdKMg8Ua8UMMa80NaHId8KMMMh8UaqaAa8L2cltfheaHIdyhUaXhHa8LhOinaHIdbg8Wa8WaUNaecxfIdba8XaecwfIdbNa80aeIdbNa8ZaeclfIdbNMMMg8Wa8WM:tNa8UMh8UaHclfhHaeczfheaOcufgOmbka8Va8U:lMh8VaYaAcdtfydbgAaQ9hmbkka5aLfRbbci9hmba8KTmbaYaLcdtfydbgAaLSmba8SagcdtfhXaaaQcx2fgeIdbh8XaeIdwh80aeIdlh8Zina8NaAc8S2fgHIdwa80NaHIdza8XNaHIdaMg8Ua8UMMa80NaHIdla8ZNaHIdCa80NaHId3Mg8Ua8UMMa8ZNaHIdba8XNaHIdxa8ZNaHIdKMg8Ua8UMMa8XNaHId8KMMMh8UaqaAa8L2cltfheaHIdyhUaXhHa8LhOinaHIdbg8Wa8WaUNaecxfIdba80aecwfIdbNa8XaeIdbNa8ZaeclfIdbNMMMg8Wa8WM:tNa8UMh8UaHclfhHaeczfheaOcufgOmbka81a8U:lMh81aYaAcdtfydbgAaL9hmbkkaKa81a8Va81a8V9DgeEUdwaKaQaLaea8Kcb9hGgeEBdlaKaLaQaeEBdbahcefgha8M9hmbkascjdfcbcj;qbz:rjjjb8Aa9shea8MhHinascjdfaeydbcA4cF8FGgOcFAaOcFA6EcdtfgOaOydbcefBdbaecxfheaHcufgHmbkcbhecbhHinascjdfaefgOydbhAaOaHBdbaAaHfhHaeclfgecj;qb9hmbkcbhea9shHinascjdfaHydbcA4cF8FGgOcFAaOcFA6EcdtfgOaOydbgOcefBdba9oaOcdtfaeBdbaHcxfhHa8Maecefge9hmbkadak9RgOci9Uh9tdnalTmbcbheaDhHinaHaeBdbaHclfhHalaecefge9hmbkkcbh9ua9pcbalz:rjjjbh3aOcO9Uh9va9tce4h9wcbh8Acbh8Jdnina8Pa9oa8Jcdtfydbcx2fgEIdwg8Ua889Emea8Aa9t9pmeJFFuuh8Wdna9wa8M9pmba8Pa9oa9wcdtfydbcx2fIdwJbb;aZNh8Wkdna8Ua8W9ETmba8Ua869ETmba8Aa9v0mdkdna3aCaEydlghcdtg9xfydbgAfg9yRbba3aCaEydbg8Kcdtg9zfydbgefg9ARbbVmba5a8KfRbbh9Bdna9maecdtfgHclfydbgOaHydbgHSmbaOaH9RhQaaaAcx2fhKaaaecx2fhXa9qaHcitfhecbhHcehgdnindnaDaeydbcdtfydbgOaASmbaDaeclfydbcdtfydbgLaASmbaOaLSmbaaaLcx2fgLIdbaaaOcx2fgOIdbg8X:tg8UaXIdlaOIdlg80:tg8YNaXIdba8X:tgBaLIdla80:tg8WN:tg8Za8UaKIdla80:tg83NaKIdba8X:tgRa8WN:tg80Na8WaXIdwaOIdwgU:tg8VNa8YaLIdwaU:tg8XN:tg8Ya8WaKIdwaU:tg81Na83a8XN:tg8WNa8XaBNa8Va8UN:tgUa8XaRNa81a8UN:tg8UNMMa8Za8ZNa8Ya8YNaUaUNMMa80a80Na8Wa8WNa8Ua8UNMMN:rJbbj8:N9FmdkaecwfheaHcefgHaQ6hgaQaH9hmbkkagceGTmba9wcefh9wxekdndndndna9Bc9:fPdebdka8KheinaDaecdtgefahBdbaYaefydbgea8K9hmbxikkdna8Fa8Ea8Ea9zfydbahSEaYa9zfydbg8Kcdtfydbgecu9hmbaYa9xfydbhekaDa9zfahBdbaehhkaDa8KcdtfahBdbka9Ace86bba9yce86bbaEIdwg8Ua86a86a8U9DEh86a9ucefh9ucecda9BceSEa8Afh8Aka8Jcefg8Ja8M9hmbkka9uTmddnalTmbcbhLcbhXindnaDaXcdtgefydbgOaXSmbaCaOcdtfydbh8KdnaXaCaefydb9hghmbaya8Kc8S2fgeayaXc8S2fgHIdbaeIdbMUdbaeaHIdlaeIdlMUdlaeaHIdwaeIdwMUdwaeaHIdxaeIdxMUdxaeaHIdzaeIdzMUdzaeaHIdCaeIdCMUdCaeaHIdKaeIdKMUdKaeaHId3aeId3MUd3aeaHIdaaeIdaMUdaaeaHId8KaeId8KMUd8KaeaHIdyaeIdyMUdyaITmbaIa8KcltfgeaIaXcltfgHIdbaeIdbMUdbaeaHIdlaeIdlMUdlaeaHIdwaeIdwMUdwaeaHIdxaeIdxMUdxka8LTmba8NaOc8S2fgea8NaXc8S2ggfgHIdbaeIdbMUdbaeaHIdlaeIdlMUdlaeaHIdwaeIdwMUdwaeaHIdxaeIdxMUdxaeaHIdzaeIdzMUdzaeaHIdCaeIdCMUdCaeaHIdKaeIdKMUdKaeaHId3aeId3MUd3aeaHIdaaeIdaMUdaaeaHId8KaeId8KMUd8KaeaHIdyaeIdyMUdya9raO2hKaqhHa8LhAinaHaKfgeaHaLfgOIdbaeIdbMUdbaeclfgQaOclfIdbaQIdbMUdbaecwfgQaOcwfIdbaQIdbMUdbaecxfgeaOcxfIdbaeIdbMUdbaHczfhHaAcufgAmbkahmbJbbbbJbbjZayagfgeIdyg8U:va8UJbbbb9BEaeIdwaaa8Kcx2fgHIdwg8UNaeIdzaHIdbg8WNaeIdaMg8Xa8XMMa8UNaeIdlaHIdlg8XNaeIdCa8UNaeId3Mg8Ua8UMMa8XNaeIdba8WNaeIdxa8XNaeIdKMg8Ua8UMMa8WNaeId8KMMM:lNg8Ua87a87a8U9DEh87kaLa9rfhLaXcefgXal9hmbkcbhHa8EheindnaeydbgOcuSmbdnaHaDaOcdtgAfydbgO9hmbcuhOa8EaAfydbgAcuSmbaDaAcdtfydbhOkaeaOBdbkaeclfhealaHcefgH9hmbkcbhHa8FheindnaeydbgOcuSmbdnaHaDaOcdtgAfydbgO9hmbcuhOa8FaAfydbgAcuSmbaDaAcdtfydbhOkaeaOBdbkaeclfhealaHcefgH9hmbkka87a86a8LEh87cbhHabhecbhOindnaCaDaeydbcdtfydbgLcdtfydbgAaCaDaeclfydbcdtfydbgKcdtfydbgQSmbaAaCaDaecwfydbcdtfydbg8KcdtfydbgXSmbaQaXSmbabaHcdtfgAaLBdbaAcwfa8KBdbaAclfaKBdbaHcifhHkaecxfheaOcifgOad6mbkdndna9imbaHhdxekdnaHak0mbaHhdxekdna85a879FmbaHhdxekJFFuuh85cbhdabhecbhOindna9ka0aeydbgAcdtfydbcdtfIdbg8Ua879ETmbaeclf8Pdbh9CabadcdtfgQaABdbaQclfa9C83dba8Ua85a85a8U9EEh85adcifhdkaecxfheaOcifgOaH6mbkkadak0mbxdkkascNefabadalaCz:cjjjbkdndnadak0mbadhOxekdna9imbadhOxekdna85a889FmbadhOxekcehLina85Jbb;aZNg8Ua88a8Ua889DEh8XJbbbbh8Udna6Tmba9khea6hHinaeIdbg8Wa8Ua8Wa8X9FEa8Ua8Wa8U9EEh8UaeclfheaHcufgHmbkkJFFuuh85cbhOabhecbhHindna9ka0aeydbgAcdtfydbcdtfIdbg8Wa8X9ETmbaeclf8Pdbh9CabaOcdtfgQaABdbaQclfa9C83dba8Wa85a85a8W9EEh85aOcifhOkaecxfheaHcifgHad6mbkdnaLaOad9hVceGmbadhOxdka8Ua86a86a8U9DEh86aOak9nmecbhLaOhda85a889FmbkkdnamcjjjjdGTmba9pcbalz:rjjjbhLdnaOTmbabheaOhHinaLaeydbgAfa5aAfRbbcl9h86bbaeclfheaHcufgHmbkkascNefabaOalaCz:cjjjbalTmbcbhQasyd:yehgindnaLaQfRbbTmbdna5aQfRbbgecl0mbceaetcQGmekdnaCaQcdtgKfydbgeaQSmbaaaQcx2fgHaaaecx2fge8Pdb83dbaHcwfaecwfydbBdbxekayaQc8S2fgeIdyg8Ua8UJL:3;rUNg8UMh88aeIdwa8UMhRaeIdla8UMh8VaeIdba8UMhUaeIdaa8UaaaQcx2fg8KIdwg89N:th81aeId3a8Ua8KIdlg8:N:th85aeIdKa8KIdbgZa8UN:th8YJbbbbhcaeIdCJbbbbMh87aeIdzJbbbbMhBaeIdxJbbbbMh83dndna8LTmbaQhAinJbbbba88a8NaAc8S2fgHIdyg8U:va8UJbbbb9BEh8UaqaAa8L2cltfheaHIdaa88Na81Mh81aHId3a88Na85Mh85aHIdKa88Na8YMh8YaHIdCa88Na87Mh87aHIdza88NaBMhBaHIdxa88Na83Mh83aHIdwa88NaRMhRaHIdla88Na8VMh8VaHIdba88NaUMhUa8LhHina81aecxfIdbg8ZaecwfIdbg8WNa8UN:th81a85a8ZaeclfIdbg8XNa8UN:th85a87a8Wa8XNa8UN:th87aUaeIdbg80a80Na8UN:thUa8Ya8Za80Na8UN:th8YaBa8Wa80Na8UN:thBa83a8Xa80Na8UN:th83aRa8Wa8WNa8UN:thRa8Va8Xa8XNa8UN:th8VaeczfheaHcufgHmbkaYaAcdtfydbgAaQ9hmbkaITmbaIaQcltfgeIdxhTaeIdwh9caeIdlhJaeIdbh8UxekJbbbbhTJbbbbh9cJbbbbhJJbbbbh8UkaBaU:vg8Xa8YNa81:ta87aBa83aU:vg8WN:tg81a8Va83a8WN:tg8Z:vg80a8Wa8YNa85:tg8VN:th85a9ca8Ua8XN:taJa8Ua8WN:tg83a80N:tg87aRaBa8XN:ta81a80N:tgB:vgR:mh81a83a8Z:vg9c:mhJdnJbbbba8Ua8UaU:vg9eN:ta83a9cN:ta87aRN:tg83:la88J:983:g81Ng8U9ETmba81a85NaJa8VNa9ea8YNaT:tMMa83:vhckaU:la8U9ETmba8Z:la8U9ETmbaB:la8U9ETmba9e:macNa8X:ma81acNa85aB:vMg85Na8W:maJacNa80:ma85Na8Va8Z:vMMg87Na8Y:maU:vMMMh88a9maKfgeclfydbgHaeydbge9RhXagaecitfhKJbbbbh8UdnaHaeSghmbJbbbbh8UaKheaXhAinaaaeclfydbcx2fgHIdwa89:tg8Wa8WNaHIdbaZ:tg8Wa8WNaHIdla8::tg8Wa8WNMMg8Waaaeydbcx2fgHIdwa89:tg8Xa8XNaHIdbaZ:tg8Xa8XNaHIdla8::tg8Xa8XNMMg8Xa8Ua8Ua8X9DEg8Ua8Ua8W9DEh8UaecwfheaAcufgAmbkka85a89:tg8Wa8WNa88aZ:tg8Wa8WNa87a8::tg8Wa8WNMMa8U:rg8Ua8UN9EmbdnahmbcbhAcehhdninaaaKclfydbcx2fgeIdbaaaKydbcx2fgHIdbg8X:tg8Ua8:aHIdlg80:tg8YNaZa8X:tgBaeIdla80:tg8WN:tg8Za8Ua87a80:tg83Na88a8X:tgRa8WN:tg80Na8Wa89aHIdwgU:tg8VNa8YaeIdwaU:tg8XN:tg8Ya8Wa85aU:tg81Na83a8XN:tg8WNa8XaBNa8Va8UN:tgUa8XaRNa81a8UN:tg8UNMMa8Za8ZNa8Ya8YNaUaUNMMa80a80Na8Wa8WNa8Ua8UNMMN:rJbbj8:N9FmeaKcwfhKaAcefgAaX6hhaXaA9hmbkkahceGmeka8Ka85Udwa8Ka87Udla8Ka88UdbkaQcefgQal9hmbkdndna8LTmba8LclthYa8Lcdth8KcbhKa8ShXindnaLaKfRbbTmba5aKfRbbclSmbJbbbbJbbjZa8NaKc8S2fIdyg8U:va8UJbbbb9BEh8UaaaCaKcdtfydbcx2fhHaqheaXhAa8LhQinaAa8UaecwfIdbaHIdwNaeIdbaHIdbNaeclfIdbaHIdlNMMaecxfIdbMNUdbaeczfheaAclfhAaQcufgQmbkkaqaYfhqaXa8KfhXaKcefgKal9hmbkarcd4hXavcd4hYasId:qeh8UasId:meh8WasId1eh8XazTmea8Lcdth8KcbhKindnaLaKfRbbTmbaiazaKcdtfydbgCaY2cdtfgeaaaKcx2fgHIdba8RNa8XMUdbaeaHIdla8RNa8WMUdlaeaHIdwa8RNa8UMUdwaoaCaX2cdtfhQashea8ShHa8LhCinaQaeydbcdtgAfaHIdbawaAfIdb:vUdbaeclfheaHclfhHaCcufgCmbkka8Sa8Kfh8SaKcefgKal9hmbxikkavcd4hCasId:qeh8UasId:meh8WasId1eh8XdnazTmbazheindna9pRbbTmbaiaeydbaC2cdtfgHaaIdba8RNa8XMUdbaHaaclfIdba8RNa8WMUdlaHaacwfIdba8RNa8UMUdwka9pcefh9paeclfheaacxfhaalcufglmbxikkaCcdtheindna9pRbbTmbaiaaIdba8RNa8XMUdbaiclfaaclfIdba8RNa8WMUdbaicwfaacwfIdba8RNa8UMUdbka9pcefh9paacxfhaaiaefhialcufglmbxdkka8Lcdth8KcbhKindnaLaKfRbbTmbaiaKaY2cdtfgeaaaKcx2fgHIdba8RNa8XMUdbaeaHIdla8RNa8WMUdlaeaHIdwa8RNa8UMUdwaoaKaX2cdtfhQashea8ShHa8LhCinaQaeydbcdtgAfaHIdbawaAfIdb:vUdbaeclfheaHclfhHaCcufgCmbkka8Sa8Kfh8SaKcefgKal9hmbkkdnamcjjjjlGTmbazmbaOTmbcbhLabheina5aeydbgAfRbbc3thKaecwfgXydbhHdndna8EaAcdtg8KfydbaeclfgYydbgCSmbcbhQa8FaCcdtfydbaA9hmekcjjjj94hQkaeaKaQVaAVBdba5aCfRbbc3thKdndna8EaCcdtfydbaHSmbcbhQa8FaHcdtfydbaC9hmekcjjjj94hQkaYaKaQVaCVBdba5aHfRbbc3thQdndna8EaHcdtfydbaASmbcbhCa8Fa8KfydbaH9hmekcjjjj94hCkaXaQaCVaHVBdbaecxfheaLcifgLaO6mbkkdnazTmbaOTmbaOheinabazabydbcdtfydbBdbabclfhbaecufgembkkdnaPTmbaPana86:rNUdbkasyd;8egecdtasc:Ceffc98fhHdninaeTmeaHydbcbyd:m:jjjbH:bjjjbbaHc98fhHaecufhexbkkascj;sbf8KjjjjbaOk;Yieouabydlhvabydbclfcbaicdtz:rjjjbhoadci9UhrdnadTmbdnalTmbaehwadhDinaoalawydbcdtfydbcdtfgqaqydbcefBdbawclfhwaDcufgDmbxdkkaehwadhDinaoawydbcdtfgqaqydbcefBdbawclfhwaDcufgDmbkkdnaiTmbcbhDaohwinawydbhqawaDBdbawclfhwaqaDfhDaicufgimbkkdnadci6mbinaecwfydbhwaeclfydbhDaeydbhidnalTmbalawcdtfydbhwalaDcdtfydbhDalaicdtfydbhikavaoaicdtfgqydbcitfaDBdbavaqydbcitfawBdlaqaqydbcefBdbavaoaDcdtfgqydbcitfawBdbavaqydbcitfaiBdlaqaqydbcefBdbavaoawcdtfgwydbcitfaiBdbavawydbcitfaDBdlawawydbcefBdbaecxfhearcufgrmbkkabydbcbBdbk:todDue99aicd4aifhrcehwinawgDcethwaDar6mbkcuaDcdtgraDcFFFFi0Ecbyd1:jjjbHjjjjbbhwaoaoyd9GgqcefBd9GaoaqcdtfawBdbawcFearz:rjjjbhkdnaiTmbalcd4hlaDcufhxcbhminamhDdnavTmbavamcdtfydbhDkcbadaDal2cdtfgDydlgwawcjjjj94SEgwcH4aw7c:F:b:DD2cbaDydbgwawcjjjj94SEgwcH4aw7c;D;O:B8J27cbaDydwgDaDcjjjj94SEgDcH4aD7c:3F;N8N27axGhwamcdthPdndndnavTmbakawcdtfgrydbgDcuSmeadavaPfydbal2cdtfgsIdbhzcehqinaqhrdnadavaDcdtfydbal2cdtfgqIdbaz9CmbaqIdlasIdl9CmbaqIdwasIdw9BmlkarcefhqakawarfaxGgwcdtfgrydbgDcu9hmbxdkkakawcdtfgrydbgDcuSmbadamal2cdtfgsIdbhzcehqinaqhrdnadaDal2cdtfgqIdbaz9CmbaqIdlasIdl9CmbaqIdwasIdw9BmikarcefhqakawarfaxGgwcdtfgrydbgDcu9hmbkkaramBdbamhDkabaPfaDBdbamcefgmai9hmbkkakcbyd:m:jjjbH:bjjjbbaoaoyd9GcufBd9GdnaeTmbaiTmbcbhDaehwinawaDBdbawclfhwaiaDcefgD9hmbkcbhDaehwindnaDabydbgrSmbawaearcdtfgrydbBdbaraDBdbkawclfhwabclfhbaiaDcefgD9hmbkkk:hrdvuv998Jjjjjbca9Rgoczfcwfcbyd11jjbBdbaocb8Pdj1jjb83izaocwfcbydN1jjbBdbaocb8Pd:m1jjb83ibdnadTmbaicd4hrdnabmbdnalTmbcbhwinaealawcdtfydbar2cdtfhDcbhiinaoczfaifgqaDaifIdbgkaqIdbgxaxak9EEUdbaoaifgqakaqIdbgxaxak9DEUdbaiclfgicx9hmbkawcefgwad9hmbxikkarcdthwcbhDincbhiinaoczfaifgqaeaifIdbgkaqIdbgxaxak9EEUdbaoaifgqakaqIdbgxaxak9DEUdbaiclfgicx9hmbkaeawfheaDcefgDad9hmbxdkkdnalTmbcbhwinabawcx2fgiaealawcdtfydbar2cdtfgDIdbUdbaiaDIdlUdlaiaDIdwUdwcbhiinaoczfaifgqaDaifIdbgkaqIdbgxaxak9EEUdbaoaifgqakaqIdbgxaxak9DEUdbaiclfgicx9hmbkawcefgwad9hmbxdkkarcdthlcbhwaehDinabawcx2fgiaeawar2cdtfgqIdbUdbaiaqIdlUdlaiaqIdwUdwcbhiinaoczfaifgqaDaifIdbgkaqIdbgxaxak9EEUdbaoaifgqakaqIdbgxaxak9DEUdbaiclfgicx9hmbkaDalfhDawcefgwad9hmbkkJbbbbaoIdbaoIdzgx:tgkakJbbbb9DEgkaoIdlaoIdCgm:tgPaPak9DEgkaoIdwaoIdKgP:tgsasak9DEhsdnabTmbadTmbJbbbbJbbjZas:vasJbbbb9BEhkinabakabIdbax:tNUdbabclfgoakaoIdbam:tNUdbabcwfgoakaoIdbaP:tNUdbabcxfhbadcufgdmbkkdnavTmbavaPUdwavamUdlavaxUdbkask:ZlewudnaeTmbcbhvabhoinaoavBdbaoclfhoaeavcefgv9hmbkkdnaiTmbcbhrinadarcdtfhwcbhDinalawaDcdtgvc:G1jjbfydbcdtfydbcdtfydbhodnabalawavfydbcdtfydbgqcdtfgkydbgvaqSmbinakabavgqcdtfgxydbgvBdbaxhkaqav9hmbkkdnabaocdtfgkydbgvaoSmbinakabavgocdtfgxydbgvBdbaxhkaoav9hmbkkdnaqaoSmbabaqaoaqao0Ecdtfaqaoaqao6EBdbkaDcefgDci9hmbkarcifgrai6mbkkdnaembcbskcbhxindnalaxcdtgvfydbax9hmbaxhodnabavfgDydbgvaxSmbaDhqinaqabavgocdtfgkydbgvBdbakhqaoav9hmbkkaDaoBdbkaxcefgxae9hmbkcbhvabhocbhkindndnavalydbgq9hmbdnavaoydbgq9hmbaoakBdbakcefhkxdkaoabaqcdtfydbBdbxekaoabaqcdtfydbBdbkaoclfhoalclfhlaeavcefgv9hmbkakk;Jiilud99duabcbaecltz:rjjjbhvdnalTmbadhoaihralhwinarcwfIdbhDarclfIdbhqavaoydbcltfgkarIdbakIdbMUdbakclfgxaqaxIdbMUdbakcwfgxaDaxIdbMUdbakcxfgkakIdbJbbjZMUdbaoclfhoarcxfhrawcufgwmbkkdnaeTmbavhraehkinarcxfgoIdbhDaocbBdbararIdbJbbbbJbbjZaD:vaDJbbbb9BEgDNUdbarclfgoaDaoIdbNUdbarcwfgoaDaoIdbNUdbarczfhrakcufgkmbkkdnalTmbinavadydbcltfgrcxfgkaicwfIdbarcwfIdb:tgDaDNaiIdbarIdb:tgDaDNaiclfIdbarclfIdb:tgDaDNMMgDakIdbgqaqaD9DEUdbadclfhdaicxfhialcufglmbkkdnaeTmbavcxfhrinabarIdbUdbarczfhrabclfhbaecufgembkkk8MbabaeadaialavcbcbcbcbcbaoarawaDz:bjjjbk8MbabaeadaialavaoarawaDaqakaxamaPz:bjjjbkRbababaeadaialavaoarawaDaqakaxcjjjjdVamz:bjjjbk:p8Koque99due99iuq998Jjjjjbc;Wb9Rgq8Kjjjjbcbhkaqcxfcbc;Kbz:rjjjb8Aaqcualcx2alc;v:Q;v:Qe0Ecbyd1:jjjbHjjjjbbgxBdxaqceBd2axaialavcbcbz:ejjjb8AaqcualcdtalcFFFFi0Egmcbyd1:jjjbHjjjjbbgiBdzaqcdBd2dndnJFF959eJbbjZawJbbjZawJbbjZ9DE:vawJ9VO:d869DEgw:lJbbb9p9DTmbaw:OhPxekcjjjj94hPkadci9Uhsarco9UhzdndnaombaPcd9imekdnalTmbaPcuf:YhwdnaoTmbcbhvaihHaxhOindndnaoavfRbbceGTmbavcjjjjlVhAxekdndnaOclfIdbawNJbbbZMgC:lJbbb9p9DTmbaC:OhAxekcjjjj94hAkaAcqthAdndnaOcwfIdbawNJbbbZMgC:lJbbb9p9DTmbaC:OhXxekcjjjj94hXkaAaXVhAdndnaOIdbawNJbbbZMgC:lJbbb9p9DTmbaC:OhXxekcjjjj94hXkaAaXcCtVhAkaHaABdbaHclfhHaOcxfhOalavcefgv9hmbxdkkaxhvaihOalhHindndnavIdbawNJbbbZMgC:lJbbb9p9DTmbaC:OhAxekcjjjj94hAkaAcCthAdndnavclfIdbawNJbbbZMgC:lJbbb9p9DTmbaC:OhXxekcjjjj94hXkaXcqtaAVhAdndnavcwfIdbawNJbbbZMgC:lJbbb9p9DTmbaC:OhXxekcjjjj94hXkaOaAaXVBdbavcxfhvaOclfhOaHcufgHmbkkadTmbcbhkaehvcbhOinakaiavclfydbcdtfydbgHaiavcwfydbcdtfydbgA9haiavydbcdtfydbgXaH9haXaA9hGGfhkavcxfhvaOcifgOad6mbkkarci9UhQdndnaz:Z:rJbbbZMgw:lJbbb9p9DTmbaw:Ohvxekcjjjj94hvkaQ:ZhLcbhKc:bwhHdndninashYaHhXaPhrakg8AaQ9pmeaXar9Rcd9imeavaXcufavaX9iEarcefavar9kEhzdnalTmbazcuf:YhwdnaoTmbcbhOaihPaxhvindndnaoaOfRbbceGTmbaOcjjjjlVhHxekdndnavclfIdbawNJbbbZMgC:lJbbb9p9DTmbaC:OhHxekcjjjj94hHkaHcqthHdndnavcwfIdbawNJbbbZMgC:lJbbb9p9DTmbaC:Ohsxekcjjjj94hskaHasVhHdndnavIdbawNJbbbZMgC:lJbbb9p9DTmbaC:Ohsxekcjjjj94hskaHascCtVhHkaPaHBdbaPclfhPavcxfhvalaOcefgO9hmbxdkkaxhvaihOalhPindndnavIdbawNJbbbZMgC:lJbbb9p9DTmbaC:OhHxekcjjjj94hHkaHcCthHdndnavclfIdbawNJbbbZMgC:lJbbb9p9DTmbaC:Ohsxekcjjjj94hskascqtaHVhHdndnavcwfIdbawNJbbbZMgC:lJbbb9p9DTmbaC:Ohsxekcjjjj94hskaOaHasVBdbavcxfhvaOclfhOaPcufgPmbkkcbhOdnadTmbaehvcbhPinaOaiavclfydbcdtfydbgHaiavcwfydbcdtfydbgs9haiavydbcdtfydbgAaH9haAas9hGGfhOavcxfhvaPcifgPad6mbkkaYhsaOhkaXhHazhPdnaOaQ9nmbaOhsa8AhkazhHarhPkdndnaKcl0mbdnaY:Zgwa8A:ZgC:taz:YgEar:Y:tg3aEaX:Y:tg5aO:Zg8EaL:tNNNawaL:ta5NaCa8E:tNaCaL:ta3Na8Eaw:tNM:vaEMJbbbZMgw:lJbbb9p9DTmbaw:Ohvxdkcjjjj94hvxekaPaHfcd9ThvkaKcefgKcs9hmbxdkka8AhkarhPkdndndnakmbJbbjZhwcbhicdhvaDmexdkalcd4alfhHcehOinaOgvcethOavaH6mbkcbhOaqcuavcdtgravcFFFFi0Ecbyd1:jjjbHjjjjbbgzBdCaqciBd2aqamcbyd1:jjjbHjjjjbbgXBdKaqclBd2dndndndnalTmbaPcuf:YhwaoTmecbhOaihHaxhPindndnaoaOfRbbceGTmbaOcjjjjlVhsxekdndnaPclfIdbawNJbbbZMgC:lJbbb9p9DTmbaC:Ohsxekcjjjj94hskascqthsdndnaPcwfIdbawNJbbbZMgC:lJbbb9p9DTmbaC:OhAxekcjjjj94hAkasaAVhsdndnaPIdbawNJbbbZMgC:lJbbb9p9DTmbaC:OhAxekcjjjj94hAkasaAcCtVhskaHasBdbaHclfhHaPcxfhPalaOcefgO9hmbxikkazcFearz:rjjjb8AcbhrcbhvxdkaxhOaihPalhHindndnaOIdbawNJbbbZMgC:lJbbb9p9DTmbaC:Ohsxekcjjjj94hskascCthsdndnaOclfIdbawNJbbbZMgC:lJbbb9p9DTmbaC:OhAxekcjjjj94hAkaAcqtasVhsdndnaOcwfIdbawNJbbbZMgC:lJbbb9p9DTmbaC:OhAxekcjjjj94hAkaPasaAVBdbaOcxfhOaPclfhPaHcufgHmbkkazcFearz:rjjjbhAavcufhocbhrcbhzindndndnaAaiazcdtgKfydbgHcm4aH7c:v;t;h;Ev2gvcs4av7aoGgPcdtfgsydbgOcuSmbcehvinaiaOcdtgOfydbaHSmdaPavfhOavcefhvaAaOaoGgPcdtfgsydbgOcu9hmbkkasazBdbarhvarcefhrxekaXaOfydbhvkaXaKfavBdbazcefgzal9hmbkcuarc8S2gOarc;D;O;f8U0EhvkcbhAaqavcbyd1:jjjbHjjjjbbgvBd3aqcvBd2avcbaOz:rjjjbhOdnadTmbaehiinJbbnnJbbjZaXaiydbgHcdtfydbgvaXaiclfydbgPcdtfydbgzSavaXaicwfydbgscdtfydbgKSGgoEh8FdnaxaPcx2fgPIdbaxaHcx2fgHIdbg8E:tgCaxascx2fgsIdlaHIdlg3:tgwNasIdba8E:tgEaPIdla3:tgaN:tgLaLNaaasIdwaHIdwg5:tghNawaPIdwa5:tgaN:tgwawNaaaENahaCN:tgCaCNMM:rgEJbbbb9ETmbaLaE:vhLaCaE:vhCawaE:vhwkaOavc8S2fgvavIdbawa8FaE:rNgEawNNgaMUdbavaCaEaCNghNggavIdlMUdlavaLaEaLNg8FNg8JavIdwMUdwavahawNghavIdxMUdxava8FawNg8KavIdzMUdzava8FaCNg8FavIdCMUdCavawaEaLa5Nawa8ENa3aCNMM:mg3Ng8ENgwavIdKMUdKavaCa8ENgCavId3MUd3avaLa8ENgLavIdaMUdaava8Ea3Ng8EavId8KMUd8KavaEavIdyMUdydnaombaOazc8S2fgvaaavIdbMUdbavagavIdlMUdlava8JavIdwMUdwavahavIdxMUdxava8KavIdzMUdzava8FavIdCMUdCavawavIdKMUdKavaCavId3MUd3avaLavIdaMUdaava8EavId8KMUd8KavaEavIdyMUdyaOaKc8S2fgvaaavIdbMUdbavagavIdlMUdlava8JavIdwMUdwavahavIdxMUdxava8KavIdzMUdzava8FavIdCMUdCavawavIdKMUdKavaCavId3MUd3avaLavIdaMUdaava8EavId8KMUd8KavaEavIdyMUdykaicxfhiaAcifgAad6mbkkcbhHaqcuarcdtgvarcFFFFi0Egicbyd1:jjjbHjjjjbbgPBdaaqcoBd2aqaicbyd1:jjjbHjjjjbbgiBd8KaqcrBd2aPcFeavz:rjjjbhzdnalTmbaXhPinJbbbbJbbjZaOaPydbgsc8S2fgvIdygw:vawJbbbb9BEavIdwaxcwfIdbgwNavIdzaxIdbgCNavIdaMgLaLMMawNavIdlaxclfIdbgLNavIdCawNavId3MgwawMMaLNavIdbaCNavIdxaLNavIdKMgwawMMaCNavId8KMMM:lNhwdndnazascdtgvfgsydbcuSmbaiavfIdbaw9ETmekasaHBdbaiavfawUdbkaPclfhPaxcxfhxalaHcefgH9hmbkkJbbbbhwdnarTmbinaiIdbgCawawaC9DEhwaiclfhiarcufgrmbkkakcd4akfhOcehiinaigvcethiavaO6mbkcbhiaqcuavcdtgOavcFFFFi0Ecbyd1:jjjbHjjjjbbgPBdyaPcFeaOz:rjjjbhsdnadTmbavcufhAcbhrcbhxindnaXaeaxcdtfgvydbcdtfydbgiaXavclfydbcdtfydbgOSmbaiaXavcwfydbcdtfydbgvSmbaOavSmbazavcdtfydbhHdndnazaOcdtfydbgvazaicdtfydbgi9pmbavaH9pmbaHhlaihoavhHxekdnaHai9pmbaHav9pmbaihlavhoxekavhlaHhoaihHkabarcx2fgvaHBdbavcwfaoBdbavclfalBdbdnasaoc:3F;N8N2alc:F:b:DD27aHc;D;O:B8J27aAGgOcdtfgvydbgicuSmbcehPinaPhvdnabaicx2fgiydbaH9hmbaiydlal9hmbaiydwaoSmikavcefhPasaOavfaAGgOcdtfgvydbgicu9hmbkkavarBdbarcefhrkaxcifgxad6mbkarci2hikdnaDmbcwhvxdkaw:rhwcwhvkaDawUdbkavcdthvdninavTmeavc98fgvaqcxffydbcbyd:m:jjjbH:bjjjbbxbkkaqc;Wbf8Kjjjjbaik:2ldwue9:8Jjjjjbc;Wb9Rgr8Kjjjjbcbhwarcxfcbc;Kbz:rjjjb8AdnabaeSmbabaeadcdtz:qjjjb8AkarcualcdtalcFFFFi0EgDcbyd1:jjjbHjjjjbbgqBdxarceBd2aqcbaialavcbarcxfz:djjjbcualcx2alc;v:Q;v:Qe0Ecbyd1:jjjbHjjjjbbhkarcxfaryd2gxcdtgmfakBdbaraxcefgPBd2akaialavcbcbz:ejjjb8AarcxfaPcdtfaDcbyd1:jjjbHjjjjbbgvBdbaraxcdfgiBd2arcxfaicdtfcuavalaeadaqz:fjjjbgecltaecjjjjiGEcbyd1:jjjbHjjjjbbgiBdbaiaeavakalz:gjjjbdnadTmbaoaoNhocbhwabhlcbhkindnaiavalydbgecdtfydbcdtfIdbao9ETmbalclf8PdbhsabawcdtfgqaeBdbaqclfas83dbawcifhwkalcxfhlakcifgkad6mbkkaxcifhlamarcxffcwfhkdninalTmeakydbcbyd:m:jjjbH:bjjjbbakc98fhkalcufhlxbkkarc;Wbf8Kjjjjbawk:FCoDud99rue99iul998Jjjjjbc;Wb9Rgw8KjjjjbdndnarmbcbhDxekawcxfcbc;Kbz:rjjjb8Aawcuadcx2adc;v:Q;v:Qe0Ecbyd1:jjjbHjjjjbbgqBdxawceBd2aqaeadaicbcbz:ejjjb8AawcuadcdtadcFFFFi0Egkcbyd1:jjjbHjjjjbbgxBdzawcdBd2adcd4adfhmceheinaegicetheaiam6mbkcbhPawcuaicdtgsaicFFFFi0Ecbyd1:jjjbHjjjjbbgzBdCawciBd2dndnar:ZgH:rJbbbZMgO:lJbbb9p9DTmbaO:Ohexekcjjjj94hekaicufhAc:bwhmcbhCadhXcbhQinaChLaeamgKcufaeaK9iEaPgDcefaeaD9kEhYdndnadTmbaYcuf:YhOaqhiaxheadhmindndnaiIdbaONJbbbZMg8A:lJbbb9p9DTmba8A:OhCxekcjjjj94hCkaCcCthCdndnaiclfIdbaONJbbbZMg8A:lJbbb9p9DTmba8A:OhExekcjjjj94hEkaEcqtaCVhCdndnaicwfIdbaONJbbbZMg8A:lJbbb9p9DTmba8A:OhExekcjjjj94hEkaeaCaEVBdbaicxfhiaeclfheamcufgmmbkazcFeasz:rjjjbh3cbh5cbhPindna3axaPcdtfydbgCcm4aC7c:v;t;h;Ev2gics4ai7aAGgmcdtfgEydbgecuSmbaeaCSmbcehiina3amaifaAGgmcdtfgEydbgecuSmeaicefhiaeaC9hmbkkaEaCBdba5aecuSfh5aPcefgPad9hmbxdkkazcFeasz:rjjjb8Acbh5kaDaYa5ar0giEhPaLa5aiEhCdna5arSmbaYaKaiEgmaP9Rcd9imbdndnaQcl0mbdnaX:ZgOaL:Zg8A:taY:Yg8EaD:Y:tg8Fa8EaK:Y:tgaa5:ZghaH:tNNNaOaH:taaNa8Aah:tNa8AaH:ta8FNahaO:tNM:va8EMJbbbZMgO:lJbbb9p9DTmbaO:Ohexdkcjjjj94hexekaPamfcd9Theka5aXaiEhXaQcefgQcs9hmekkdndnaCmbcihicbhDxekcbhiawakcbyd1:jjjbHjjjjbbg5BdKawclBd2aPcuf:Yh8AdndnadTmbaqhiaxheadhmindndnaiIdba8ANJbbbZMgO:lJbbb9p9DTmbaO:OhCxekcjjjj94hCkaCcCthCdndnaiclfIdba8ANJbbbZMgO:lJbbb9p9DTmbaO:OhExekcjjjj94hEkaEcqtaCVhCdndnaicwfIdba8ANJbbbZMgO:lJbbb9p9DTmbaO:OhExekcjjjj94hEkaeaCaEVBdbaicxfhiaeclfheamcufgmmbkazcFeasz:rjjjbh3cbhDcbhYindndndna3axaYcdtgKfydbgCcm4aC7c:v;t;h;Ev2gics4ai7aAGgmcdtfgEydbgecuSmbcehiinaxaecdtgefydbaCSmdamaifheaicefhia3aeaAGgmcdtfgEydbgecu9hmbkkaEaYBdbaDhiaDcefhDxeka5aefydbhika5aKfaiBdbaYcefgYad9hmbkcuaDc32giaDc;j:KM;jb0EhexekazcFeasz:rjjjb8AcbhDcbhekawaecbyd1:jjjbHjjjjbbgeBd3awcvBd2aecbaiz:rjjjbhEavcd4hKdnadTmbdnalTmbaKcdth3a5hCaqhealhmadhAinaEaCydbc32fgiaeIdbaiIdbMUdbaiaeclfIdbaiIdlMUdlaiaecwfIdbaiIdwMUdwaiamIdbaiIdxMUdxaiamclfIdbaiIdzMUdzaiamcwfIdbaiIdCMUdCaiaiIdKJbbjZMUdKaCclfhCaecxfheama3fhmaAcufgAmbxdkka5hmaqheadhCinaEamydbc32fgiaeIdbaiIdbMUdbaiaeclfIdbaiIdlMUdlaiaecwfIdbaiIdwMUdwaiaiIdxJbbbbMUdxaiaiIdzJbbbbMUdzaiaiIdCJbbbbMUdCaiaiIdKJbbjZMUdKamclfhmaecxfheaCcufgCmbkkdnaDTmbaEhiaDheinaiaiIdbJbbbbJbbjZaicKfIdbgO:vaOJbbbb9BEgONUdbaiclfgmaOamIdbNUdbaicwfgmaOamIdbNUdbaicxfgmaOamIdbNUdbaiczfgmaOamIdbNUdbaicCfgmaOamIdbNUdbaic3fhiaecufgembkkcbhCawcuaDcdtgYaDcFFFFi0Egicbyd1:jjjbHjjjjbbgeBdaawcoBd2awaicbyd1:jjjbHjjjjbbg3Bd8KaecFeaYz:rjjjbhxdnadTmbJbbjZJbbjZa8A:vaPceSEaoNgOaONh8AaKcdthPalheina8Aaec;81jjbalEgmIdwaEa5ydbgAc32fgiIdC:tgOaONamIdbaiIdx:tgOaONamIdlaiIdz:tgOaONMMNaqcwfIdbaiIdw:tgOaONaqIdbaiIdb:tgOaONaqclfIdbaiIdl:tgOaONMMMhOdndnaxaAcdtgifgmydbcuSmba3aifIdbaO9ETmekamaCBdba3aifaOUdbka5clfh5aqcxfhqaeaPfheadaCcefgC9hmbkkabaxaYz:qjjjb8AcrhikaicdthiinaiTmeaic98fgiawcxffydbcbyd:m:jjjbH:bjjjbbxbkkawc;Wbf8KjjjjbaDk:Ydidui99ducbhi8Jjjjjbca9Rglczfcwfcbyd11jjbBdbalcb8Pdj1jjb83izalcwfcbydN1jjbBdbalcb8Pd:m1jjb83ibdndnaembJbbjFhvJbbjFhoJbbjFhrxekadcd4cdthwincbhdinalczfadfgDabadfIdbgvaDIdbgoaoav9EEUdbaladfgDavaDIdbgoaoav9DEUdbadclfgdcx9hmbkabawfhbaicefgiae9hmbkalIdwalIdK:thralIdlalIdC:thoalIdbalIdz:thvkJbbbbavavJbbbb9DEgvaoaoav9DEgvararav9DEk9DeeuabcFeaicdtz:rjjjbhlcbhbdnadTmbindnalaeydbcdtfgiydbcu9hmbaiabBdbabcefhbkaeclfheadcufgdmbkkabk9teiucbcbyd:q:jjjbgeabcifc98GfgbBd:q:jjjbdndnabZbcztgd9nmbcuhiabad9RcFFifcz4nbcuSmekaehikaik;teeeudndnaeabVciGTmbabhixekdndnadcz9pmbabhixekabhiinaiaeydbBdbaiaeydlBdlaiaeydwBdwaiaeydxBdxaeczfheaiczfhiadc9Wfgdcs0mbkkadcl6mbinaiaeydbBdbaeclfheaiclfhiadc98fgdci0mbkkdnadTmbinaiaeRbb86bbaicefhiaecefheadcufgdmbkkabk:3eedudndnabciGTmbabhixekaecFeGc:b:c:ew2hldndnadcz9pmbabhixekabhiinaialBdxaialBdwaialBdlaialBdbaiczfhiadc9Wfgdcs0mbkkadcl6mbinaialBdbaiclfhiadc98fgdci0mbkkdnadTmbinaiae86bbaicefhiadcufgdmbkkabk9teiucbcbyd:q:jjjbgeabcrfc94GfgbBd:q:jjjbdndnabZbcztgd9nmbcuhiabad9RcFFifcz4nbcuSmekaehikaik9:eiuZbhedndncbyd:q:jjjbgdaecztgi9nmbcuheadai9RcFFifcz4nbcuSmekadhekcbabae9Rcifc98Gcbyd:q:jjjbfgdBd:q:jjjbdnadZbcztge9nmbadae9RcFFifcz4nb8Akkk:Iedbcjwk1eFFuuFFuuFFuuFFuFFFuFFFuFbbbbbbbbebbbdbbbbbbbebbbebbbdbbbbbbbbbbbeeeeebebbebbebebbbeebbbbbbbbbbbbeeeeeebebbeeebeebbbbebebbbbbbbbbbbbbbbbbbc1Dkxebbbdbbb:GNbb",t=new Uint8Array([32,0,65,2,1,106,34,33,3,128,11,4,13,64,6,253,10,7,15,116,127,5,8,12,40,16,19,54,20,9,27,255,113,17,42,67,24,23,146,148,18,14,22,45,70,69,56,114,101,21,25,63,75,136,108,28,118,29,73,115]);if(typeof WebAssembly!="object")return{supported:!1};var n,i=WebAssembly.instantiate(o(e),{}).then(function(I){n=I.instance,n.exports.__wasm_call_ctors()});function o(I){for(var b=new Uint8Array(I.length),x=0;x<I.length;++x){var T=I.charCodeAt(x);b[x]=T>96?T-97:T>64?T-39:T+4}for(var w=0,x=0;x<I.length;++x)b[w++]=b[x]<60?t[b[x]]:(b[x]-60)*64+b[++x];return b.buffer.slice(0,w)}function r(I){if(!I)throw new Error("Assertion failed")}function a(I){return new Uint8Array(I.buffer,I.byteOffset,I.byteLength)}function s(I,b,x){var T=n.exports.sbrk,w=T(b.length*4),R=T(x*4),z=new Uint8Array(n.exports.memory.buffer),M=a(b);z.set(M,w);var N=I(R,w,b.length,x);z=new Uint8Array(n.exports.memory.buffer);var O=new Uint32Array(x);new Uint8Array(O.buffer).set(z.subarray(R,R+x*4)),M.set(z.subarray(w,w+b.length*4)),T(w-T(0));for(var u=0;u<b.length;++u)b[u]=O[b[u]];return[O,N]}function A(I){for(var b=0,x=0;x<I.length;++x){var T=I[x];b=b<T?T:b}return b}function l(I,b,x,T,w,R,z,M,N){var O=n.exports.sbrk,u=O(4),E=O(x*4),y=O(w*R),B=O(x*4),D=new Uint8Array(n.exports.memory.buffer);D.set(a(T),y),D.set(a(b),B);var v=I(E,B,x,y,w,R,z,M,N,u);D=new Uint8Array(n.exports.memory.buffer);var F=new Uint32Array(v);a(F).set(D.subarray(E,E+v*4));var P=new Float32Array(1);return a(P).set(D.subarray(u,u+4)),O(u-O(0)),[F,P[0]]}function d(I,b,x,T,w,R,z,M,N,O,u,E,y){var B=n.exports.sbrk,D=B(4),v=B(x*4),F=B(w*R),P=B(w*M),U=B(N.length*4),k=B(x*4),j=O?B(w):0,q=new Uint8Array(n.exports.memory.buffer);q.set(a(T),F),q.set(a(z),P),q.set(a(N),U),q.set(a(b),k),O&&q.set(a(O),j);var $=I(v,k,x,F,w,R,P,M,U,N.length,j,u,E,y,D);q=new Uint8Array(n.exports.memory.buffer);var H=new Uint32Array($);a(H).set(q.subarray(v,v+$*4));var Z=new Float32Array(1);return a(Z).set(q.subarray(D,D+4)),B(D-B(0)),[H,Z[0]]}function m(I,b,x,T,w,R,z,M,N,O,u,E,y){var B=n.exports.sbrk,D=B(4),v=B(w*R),F=B(w*M),P=B(N.length*4),U=B(x*4),k=O?B(w):0,j=new Uint8Array(n.exports.memory.buffer);j.set(a(T),v),j.set(a(z),F),j.set(a(N),P),j.set(a(b),U),O&&j.set(a(O),k);var q=I(U,x,v,w,R,F,M,P,N.length,k,u,E,y,D);j=new Uint8Array(n.exports.memory.buffer),a(b).set(j.subarray(U,U+q*4)),a(T).set(j.subarray(v,v+w*R)),a(z).set(j.subarray(F,F+w*M));var $=new Float32Array(1);return a($).set(j.subarray(D,D+4)),B(D-B(0)),[q,$[0]]}function p(I,b,x,T){var w=n.exports.sbrk,R=w(x*T),z=new Uint8Array(n.exports.memory.buffer);z.set(a(b),R);var M=I(R,x,T);return w(R-w(0)),M}function g(I,b,x,T,w,R,z,M){var N=n.exports.sbrk,O=N(M*4),u=N(x*T),E=N(x*R),y=new Uint8Array(n.exports.memory.buffer);y.set(a(b),u),w&&y.set(a(w),E);var B=I(O,u,x,T,E,R,z,M);y=new Uint8Array(n.exports.memory.buffer);var D=new Uint32Array(B);return a(D).set(y.subarray(O,O+B*4)),N(O-N(0)),D}function h(I,b,x,T,w,R,z,M,N){var O=n.exports.sbrk,u=O(4),E=O(x*4),y=O(w*R),B=O(x*4),D=z?O(w):0,v=new Uint8Array(n.exports.memory.buffer);v.set(a(T),y),v.set(a(b),B),z&&v.set(a(z),D);var F=I(E,B,x,y,w,R,D,M,N,u);v=new Uint8Array(n.exports.memory.buffer);var P=new Uint32Array(F);a(P).set(v.subarray(E,E+F*4));var U=new Float32Array(1);return a(U).set(v.subarray(u,u+4)),O(u-O(0)),[P,U[0]]}function C(I,b,x,T,w,R,z){var M=n.exports.sbrk,N=M(x*4),O=M(w*R),u=M(x*4),E=new Uint8Array(n.exports.memory.buffer);E.set(a(T),O),E.set(a(b),u);var y=I(N,u,x,O,w,R,z);E=new Uint8Array(n.exports.memory.buffer);var B=new Uint32Array(y);return a(B).set(E.subarray(N,N+y*4)),M(N-M(0)),B}var _={LockBorder:1,Sparse:2,ErrorAbsolute:4,Prune:8,Regularize:16,Permissive:32,_InternalDebug:1<<30};return{ready:i,supported:!0,compactMesh:function(I){r(I instanceof Uint32Array||I instanceof Int32Array||I instanceof Uint16Array||I instanceof Int16Array),r(I.length%3==0);var b=I.BYTES_PER_ELEMENT==4?I:new Uint32Array(I);return s(n.exports.meshopt_optimizeVertexFetchRemap,b,A(I)+1)},simplify:function(I,b,x,T,w,R){r(I instanceof Uint32Array||I instanceof Int32Array||I instanceof Uint16Array||I instanceof Int16Array),r(I.length%3==0),r(b instanceof Float32Array),r(b.length%x==0),r(x>=3),r(T>=0&&T<=I.length),r(T%3==0),r(w>=0);for(var z=0,M=0;M<(R?R.length:0);++M)r(R[M]in _),z|=_[R[M]];var N=I.BYTES_PER_ELEMENT==4?I:new Uint32Array(I),O=l(n.exports.meshopt_simplify,N,I.length,b,b.length/x,x*4,T,w,z);return O[0]=I instanceof Uint32Array?O[0]:new I.constructor(O[0]),O},simplifyWithAttributes:function(I,b,x,T,w,R,z,M,N,O){r(I instanceof Uint32Array||I instanceof Int32Array||I instanceof Uint16Array||I instanceof Int16Array),r(I.length%3==0),r(b instanceof Float32Array),r(b.length%x==0),r(x>=3),r(T instanceof Float32Array),r(T.length==w*(b.length/x)),r(w>=0),r(z==null||z instanceof Uint8Array),r(z==null||z.length==b.length/x),r(M>=0&&M<=I.length),r(M%3==0),r(N>=0),r(Array.isArray(R)),r(w>=R.length),r(R.length<=32);for(var u=0;u<R.length;++u)r(R[u]>=0);for(var E=0,u=0;u<(O?O.length:0);++u)r(O[u]in _),E|=_[O[u]];var y=I.BYTES_PER_ELEMENT==4?I:new Uint32Array(I),B=d(n.exports.meshopt_simplifyWithAttributes,y,I.length,b,b.length/x,x*4,T,w*4,new Float32Array(R),z,M,N,E);return B[0]=I instanceof Uint32Array?B[0]:new I.constructor(B[0]),B},simplifyWithUpdate:function(I,b,x,T,w,R,z,M,N,O){r(I instanceof Uint32Array||I instanceof Int32Array||I instanceof Uint16Array||I instanceof Int16Array),r(I.length%3==0),r(b instanceof Float32Array),r(b.length%x==0),r(x>=3),r(T instanceof Float32Array),r(T.length==w*(b.length/x)),r(w>=0),r(z==null||z instanceof Uint8Array),r(z==null||z.length==b.length/x),r(M>=0&&M<=I.length),r(M%3==0),r(N>=0),r(Array.isArray(R)),r(w>=R.length),r(R.length<=32);for(var u=0;u<R.length;++u)r(R[u]>=0);for(var E=0,u=0;u<(O?O.length:0);++u)r(O[u]in _),E|=_[O[u]];var y=I.BYTES_PER_ELEMENT==4?I:new Uint32Array(I),B=m(n.exports.meshopt_simplifyWithUpdate,y,I.length,b,b.length/x,x*4,T,w*4,new Float32Array(R),z,M,N,E);if(I!==y)for(var u=0;u<B[0];++u)I[u]=y[u];return B},getScale:function(I,b){return r(I instanceof Float32Array),r(I.length%b==0),r(b>=3),p(n.exports.meshopt_simplifyScale,I,I.length/b,b*4)},simplifyPoints:function(I,b,x,T,w,R){return r(I instanceof Float32Array),r(I.length%b==0),r(b>=3),r(x>=0&&x<=I.length/b),T?(r(T instanceof Float32Array),r(T.length%w==0),r(w>=3),r(I.length/b==T.length/w),g(n.exports.meshopt_simplifyPoints,I,I.length/b,b*4,T,w*4,R,x)):g(n.exports.meshopt_simplifyPoints,I,I.length/b,b*4,void 0,0,0,x)},simplifySloppy:function(I,b,x,T,w,R){r(I instanceof Uint32Array||I instanceof Int32Array||I instanceof Uint16Array||I instanceof Int16Array),r(I.length%3==0),r(b instanceof Float32Array),r(b.length%x==0),r(x>=3),r(T==null||T instanceof Uint8Array),r(T==null||T.length==b.length/x),r(w>=0&&w<=I.length),r(w%3==0),r(R>=0);var z=I.BYTES_PER_ELEMENT==4?I:new Uint32Array(I),M=h(n.exports.meshopt_simplifySloppy,z,I.length,b,b.length/x,x*4,T,w,R);return M[0]=I instanceof Uint32Array?M[0]:new I.constructor(M[0]),M},simplifyPrune:function(I,b,x,T){r(I instanceof Uint32Array||I instanceof Int32Array||I instanceof Uint16Array||I instanceof Int16Array),r(I.length%3==0),r(b instanceof Float32Array),r(b.length%x==0),r(x>=3),r(T>=0);var w=I.BYTES_PER_ELEMENT==4?I:new Uint32Array(I),R=C(n.exports.meshopt_simplifyPrune,w,I.length,b,b.length/x,x*4,T);return R=I instanceof Uint32Array?R:new I.constructor(R),R}}})();typeof yg=="object"&&typeof Dx=="object"?Dx.exports=oI:typeof define=="function"&&define.amd?define([],function(){return oI}):typeof yg=="object"?yg.MeshoptSimplifier=oI:(typeof self<"u"?self:yg).MeshoptSimplifier=oI});var D1=Fs((bg,Qx)=>{var rI=(function(){var e="b9H79TebbbeVx9Geueu9Geub9Gbb9Giuuueu9Gmuuuuuuuuuuu9999eu9Gvuuuuueu9Gwuuuuuuuub9Gxuuuuuuuuuuuueu9Gkuuuuuuuuuu99eu9Gouuuuuub9Gruuuuuuub9GluuuubiAOdilvorwDqqDkbiibeilve9Weiiviebeoweuec;G:Odkr;qeDo9TW9T9VV95dbH9F9F939H79T9F9J9H229F9Jt9VV7bb8A9TW79O9V9Wt9F9I919P29K9nW79O2Wt79c9V919U9KbeX9TW79O9V9Wt9F9I919P29K9nW79O2Wt7bo39TW79O9V9Wt9F9J9V9T9W91tWJ2917tWV9c9V919U9K7br39TW79O9V9Wt9F9J9V9T9W91tW9nW79O2Wt9c9V919U9K7bDE9TW79O9V9Wt9F9J9V9T9W91tW9t9W9OWVW9c9V919U9K7bqL9TW79O9V9Wt9F9V9Wt9P9T9P96W9nW79O2Wtbkl79IV9RbxDwebcekdszq:x9DOdbkIbabaec9:fgefcufae9Ugeabci9Uadfcufad9Ugbaeab0Ek:w8KDPue99eux99dui99euo99iu8Jjjjjbc:WD9Rgm8KjjjjbdndnalmbcbhPxekamc:Cwfcbc;Kbz:ojjjb8Adndnalcb9imbaoal9nmbamcuaocdtaocFFFFi0Egscbyd;u1jjbHjjjjbbgzBd:CwamceBd;8wamascbyd;u1jjbHjjjjbbgHBd:GwamcdBd;8wamcualcdtalcFFFFi0Ecbyd;u1jjbHjjjjbbgOBd:KwamciBd;8waihsalhAinazasydbcdtfcbBdbasclfhsaAcufgAmbkaihsalhAinazasydbcdtfgCaCydbcefBdbasclfhsaAcufgAmbkaihsalhCcbhXindnazasydbcdtgQfgAydbcb9imbaHaQfaXBdbaAaAydbgQcjjjj94VBdbaQaXfhXkasclfhsaCcufgCmbkalci9UhLdnalci6mbcbhsaihAinaAcwfydbhCaAclfydbhXaHaAydbcdtfgQaQydbgQcefBdbaOaQcdtfasBdbaHaXcdtfgXaXydbgXcefBdbaOaXcdtfasBdbaHaCcdtfgCaCydbgCcefBdbaOaCcdtfasBdbaAcxfhAaLascefgs9hmbkkaihsalhAindnazasydbcdtgCfgXydbgQcu9kmbaXaQcFFFFrGgQBdbaHaCfgCaCydbaQ9RBdbkasclfhsaAcufgAmbxdkkamcuaocdtgsaocFFFFi0EgAcbyd;u1jjbHjjjjbbgzBd:CwamceBd;8wamaAcbyd;u1jjbHjjjjbbgHBd:GwamcdBd;8wamcualcdtalcFFFFi0Ecbyd;u1jjbHjjjjbbgOBd:KwamciBd;8wazcbasz:ojjjbhXalci9UhLaihsalhAinaXasydbcdtfgCaCydbcefBdbasclfhsaAcufgAmbkdnaoTmbcbhsaHhAaXhCaohQinaAasBdbaAclfhAaCydbasfhsaCclfhCaQcufgQmbkkdnalci6mbcbhsaihAinaAcwfydbhCaAclfydbhQaHaAydbcdtfgKaKydbgKcefBdbaOaKcdtfasBdbaHaQcdtfgQaQydbgQcefBdbaOaQcdtfasBdbaHaCcdtfgCaCydbgCcefBdbaOaCcdtfasBdbaAcxfhAaLascefgs9hmbkkaoTmbcbhsaohAinaHasfgCaCydbaXasfydb9RBdbasclfhsaAcufgAmbkkamaLcbyd;u1jjbHjjjjbbgsBd:OwamclBd;8wascbaLz:ojjjbhYamcuaLcK2alcjjjjd0Ecbyd;u1jjbHjjjjbbg8ABd:SwamcvBd;8wJbbbbhEdnalci6g3mbarcd4hKaihAa8AhsaLhrJbbbbh5inavaAclfydbaK2cdtfgCIdlh8EavaAydbaK2cdtfgXIdlhEavaAcwfydbaK2cdtfgQIdlh8FaCIdwhaaXIdwhhaQIdwhgasaCIdbg8JaXIdbg8KMaQIdbg8LMJbbnn:vUdbasclfaXIdlaCIdlMaQIdlMJbbnn:vUdbaQIdwh8MaCIdwh8NaXIdwhyascxfa8EaE:tg8Eagah:tggNa8FaE:tg8Faaah:tgaN:tgEJbbbbJbbjZa8Ja8K:tg8Ja8FNa8La8K:tg8Ka8EN:tghahNaEaENaaa8KNaga8JN:tgEaENMM:rg8K:va8KJbbbb9BEg8ENUdbasczfaEa8ENUdbascCfaha8ENUdbascwfa8Maya8NMMJbbnn:vUdba5a8KMh5aAcxfhAascKfhsarcufgrmbka5aL:Z:vJbbbZNhEkamcuaLcdtalcFFFF970Ecbyd;u1jjbHjjjjbbgCBd:WwamcoBd;8waEaq:ZNhEdna3mbcbhsaChAinaAasBdbaAclfhAaLascefgs9hmbkkaE:rhhcuh8PamcuaLcltalcFFFFd0Ecbyd;u1jjbHjjjjbbgIBd:0wamcrBd;8wcbaIa8AaCaLz:djjjb8AJFFuuhyJFFuuh8RJFFuuh8Sdnalci6gXmbJFFuuh8Sa8AhsaLhAJFFuuh8RJFFuuhyinascwfIdbgEayayaE9EEhyasclfIdbgEa8Ra8RaE9EEh8RasIdbgEa8Sa8SaE9EEh8SascKfhsaAcufgAmbkkahJbbbZNhgamaocetgscuaocu9kEcbyd;u1jjbHjjjjbbgABd:4waAcFeasz:ojjjbhCdnaXmbcbhAJFFuuhEa8Ahscuh8PinascwfIdbay:tghahNasIdba8S:tghahNasclfIdba8R:tghahNMM:rghaEa8PcuSahaE9DVgXEhEaAa8PaXEh8PascKfhsaLaAcefgA9hmbkkamczfcbcjwz:ojjjb8Aamcwf9cb83ibam9cb83ibagaxNhRJbbjZak:th8Ncbh8UJbbbbh8VJbbbbh8WJbbbbh8XJbbbbh8YJbbbbh8ZJbbbbh80cbh81cbhPinJbbbbhEdna8UTmbJbbjZa8U:Z:vhEkJbbbbhhdna80a80Na8Ya8YNa8Za8ZNMMg8KJbbbb9BmbJbbjZa8K:r:vhhka8XaENh5a8WaENh8Fa8VaENhaa8PhQdndndndndna8UaPVTmbamydwgBTmea80ahNh8Ja8ZahNh8La8YahNh8Maeamydbcdtfh83cbh3JFFuuhEcvhXcuhQindnaza83a3cdtfydbcdtgsfydbgvTmbaOaHasfydbcdtfhAindndnaCaiaAydbgKcx2fgsclfydbgrcetf8Vebcs4aCasydbgLcetf8Vebcs4faCascwfydbglcetf8Vebcs4fgombcbhsxekcehsazaLcdtfydbgLceSmbcehsazarcdtfydbgrceSmbcehsazalcdtfydbglceSmbdnarcdSaLcdSfalcdSfcd6mbaocefhsxekaocdfhskdnasaX9kmba8AaKcK2fgLIdwa5:thhaLIdla8F:th8KaLIdbaa:th8EdndnakJbbbb9DTmba8E:lg8Ea8K:lg8Ka8Ea8K9EEg8Kah:lgha8Kah9EEag:vJbbjZMhhxekahahNa8Ea8ENa8Ka8KNMM:rag:va8NNJbbjZMJ9VO:d86JbbjZaLIdCa8JNaLIdxa8MNa8LaLIdzNMMakN:tghahJ9VO:d869DENhhkaKaQasaX6ahaE9DVgLEhQasaXaLEhXahaEaLEhEkaAclfhAavcufgvmbkka3cefg3aB9hmbkkaQcu9hmekama5Ud:ODama8FUd:KDamaaUd:GDamcuBd:qDamcFFF;7rBdjDaIcba8AaYamc:GDfakJbbbb9Damc:qDfamcjDfz:ejjjbamyd:qDhQdndnaxJbbbb9ETmba8UaD6mbaQcuSmeceh3amIdjDaR9EmixdkaQcu9hmekdna8UTmbdnamydlgza8Uci2fgsciGTmbadasfcba8Uazcu7fciGcefz:ojjjb8AkabaPcltfgzam8Pib83dbazcwfamcwf8Pib83dbaPcefhPkc3hzinazc98Smvamc:Cwfazfydbcbyd;y1jjbH:bjjjbbazc98fhzxbkkcbh3a8Uaq9pmbamydwaCaiaQcx2fgsydbcetf8Vebcs4aCascwfydbcetf8Vebcs4faCasclfydbcetf8Vebcs4ffaw9nmekcbhscbhAdna81TmbcbhAamczfhXinamczfaAcdtfaXydbgLBdbaXclfhXaAaYaLfRbbTfhAa81cufg81mbkkamydwhlamydbhXam9cu83i:GDam9cu83i:ODam9cu83i:qDam9cu83i:yDaAc;8eaAclfc:bd6Eh81inamcjDfasfcFFF;7rBdbasclfgscz9hmbka81cdthBdnalTmbaeaXcdtfhocbhrindnazaoarcdtfydbcdtgsfydbgvTmbaOaHasfydbcdtfhAcuhLcuhsinazaiaAydbgKcx2fgXclfydbcdtfydbazaXydbcdtfydbfazaXcwfydbcdtfydbfgXasaXas6gXEhsaKaLaXEhLaAclfhAavcufgvmbkaLcuSmba8AaLcK2fgAIdway:tgEaENaAIdba8S:tgEaENaAIdla8R:tgEaENMM:rhEcbhAindndnasamc:qDfaAfgvydbgX6mbasaX9hmeaEamcjDfaAfIdb9FTmekavasBdbamc:GDfaAfaLBdbamcjDfaAfaEUdbxdkaAclfgAcz9hmbkkarcefgral9hmbkkamczfaBfhLcbhscbhAindnamc:GDfasfydbgXcuSmbaLaAcdtfaXBdbaAcefhAkasclfgscz9hmbkaAa81fg81TmbJFFuuhhcuhKamczfhsa81hvcuhLina8AasydbgXcK2fgAIdway:tgEaENaAIdba8S:tgEaENaAIdla8R:tgEaENMM:rhEdndnazaiaXcx2fgAclfydbcdtfydbazaAydbcdtfydbfazaAcwfydbcdtfydbfgAaL6mbaAaL9hmeaEah9DTmekaEhhaAhLaXhKkasclfhsavcufgvmbkaKcuSmbaKhQkdnamaiaQcx2fgrydbarclfydbarcwfydbaCabaeadaPawaqa3z:fjjjbTmbaPcefhPJbbbbh8VJbbbbh8WJbbbbh8XJbbbbh8YJbbbbh8ZJbbbbh80kcbhXinaOaHaraXcdtfydbcdtgAfydbcdtfgKhsazaAfgvydbgLhAdnaLTmbdninasydbaQSmeasclfhsaAcufgATmdxbkkasaKaLcdtfc98fydbBdbavavydbcufBdbkaXcefgXci9hmbka8AaQcK2fgsIdbhEasIdlhhasIdwh8KasIdxh8EasIdzh5asIdCh8FaYaQfce86bba80a8FMh80a8Za5Mh8Za8Ya8EMh8Ya8Xa8KMh8Xa8WahMh8Wa8VaEMh8Vamydxh8Uxbkkamc:WDf8KjjjjbaPk;Vvivuv99lu8Jjjjjbca9Rgv8Kjjjjbdndnalcw0mbaiydbhoaeabcitfgralcdtcufBdlaraoBdbdnalcd6mbaiclfhoalcufhwarcxfhrinaoydbhDarcuBdbarc98faDBdbarcwfhraoclfhoawcufgwmbkkalabfhrxekcbhDavczfcwfcbBdbav9cb83izavcwfcbBdbav9cb83ibJbbjZhqJbbjZhkinadaiaDcdtfydbcK2fhwcbhrinavczfarfgoawarfIdbgxaoIdbgm:tgPakNamMgmUdbavarfgoaPaxam:tNaoIdbMUdbarclfgrcx9hmbkJbbjZaqJbbjZMgq:vhkaDcefgDal9hmbkcbhoadcbcecdavIdlgxavIdwgm9GEgravIdbgPam9GEaraPax9GEgscdtgrfhzavczfarfIdbhxaihralhwinaiaocdtfgDydbhHaDarydbgOBdbaraHBdbarclfhraoazaOcK2fIdbax9Dfhoawcufgwmbkaeabcitfhrdndnaocv6mbaoalc98f6mekaraiydbBdbaralcdtcufBdlaiclfhoalcufhwarcxfhrinaoydbhDarcuBdbarc98faDBdbarcwfhraoclfhoawcufgwmbkalabfhrxekaraxUdbararydlc98GasVBdlabcefaeadaiaoz:djjjbhwararydlciGawabcu7fcdtVBdlawaeadaiaocdtfalao9Rz:djjjbhrkavcaf8Kjjjjbark:;idiud99dndnabaecitfgwydlgDciGgqciSmbinabcbaDcd4gDalaqcdtfIdbawIdb:tgkJbbbb9FEgwaecefgefadaialavaoarz:ejjjbak:larIdb9FTmdabawaD7aefgecitfgwydlgDciGgqci9hmbkkabaecitfgeclfhbdnavmbcuhwindnaiaeydbgDfRbbmbadaDcK2fgqIdwalIdw:tgkakNaqIdbalIdb:tgkakNaqIdlalIdl:tgkakNMM:rgkarIdb9DTmbarakUdbaoaDBdbkaecwfheawcefgwabydbcd46mbxdkkcuhwindnaiaeydbgDfRbbmbadaDcK2fgqIdbalIdb:t:lgkaqIdlalIdl:t:lgxakax9EEgkaqIdwalIdw:t:lgxakax9EEgkarIdb9DTmbarakUdbaoaDBdbkaecwfheawcefgwabydbcd46mbkkk;llevudnabydwgxaladcetfgm8Vebcs4alaecetfgP8Vebgscs4falaicetfgz8Vebcs4ffaD0abydxaq9pVakVgDce9hmbavawcltfgxab8Pdb83dbaxcwfabcwfgx8Pdb83dbdnaxydbgqTmbaoabydbcdtfhxaqhsinalaxydbcetfcFFi87ebaxclfhxascufgsmbkkdnabydxglci2gsabydlgxfgkciGTmbarakfcbalaxcu7fciGcefz:ojjjb8Aabydxci2hsabydlhxabydwhqkab9cb83dwababydbaqfBdbabascifc98GaxfBdlaP8Vebhscbhxkdnascztcz91cu9kmbabaxcefBdwaPax87ebaoabydbcdtfaxcdtfaeBdbkdnam8Uebcu9kmbababydwgxcefBdwamax87ebaoabydbcdtfaxcdtfadBdbkdnaz8Uebcu9kmbababydwgxcefBdwazax87ebaoabydbcdtfaxcdtfaiBdbkarabydlfabydxci2faPRbb86bbarabydlfabydxci2fcefamRbb86bbarabydlfabydxci2fcdfazRbb86bbababydxcefBdxaDk8LbabaeadaialavaoarawaDaDaqJbbbbz:cjjjbk;Nkovud99euv99eul998Jjjjjbc:W;ae9Rgo8KjjjjbdndnadTmbavcd4hrcbhwcbhDindnaiaeclfydbar2cdtfgvIdbaiaeydbar2cdtfgqIdbgk:tgxaiaecwfydbar2cdtfgmIdlaqIdlgP:tgsNamIdbak:tgzavIdlaP:tgPN:tgkakNaPamIdwaqIdwgH:tgONasavIdwaH:tgHN:tgPaPNaHazNaOaxN:tgxaxNMM:rgsJbbbb9Bmbaoc:W:qefawcx2fgAakas:vUdwaAaxas:vUdlaAaPas:vUdbaoc8Wfawc8K2fgAaq8Pdb83dbaAav8Pdb83dxaAam8Pdb83dKaAcwfaqcwfydbBdbaAcCfavcwfydbBdbaAcafamcwfydbBdbawcefhwkaecxfheaDcifgDad6mbkab9cb83dbabcyf9cb83dbabcaf9cb83dbabcKf9cb83dbabczf9cb83dbabcwf9cb83dbawTmeaocbBd8Sao9cb83iKao9cb83izaoczfaoc8Wfawci2cxaoc8Sfcbcrz1jjjbaoIdKhCaoIdChXaoIdzhQao9cb83iwao9cb83ibaoaoc:W:qefawcxaoc8Sfcbciz1jjjbJbbjZhkaoIdwgPJbbbbJbbjZaPaPNaoIdbgPaPNaoIdlgsasNMM:rgx:vaxJbbbb9BEgzNhxasazNhsaPazNhzaoc:W:qefheawhvinaecwfIdbaxNaeIdbazNasaeclfIdbNMMgPakaPak9DEhkaecxfheavcufgvmbkabaCUdwabaXUdlabaQUdbabaoId3UdxdndnakJ;n;m;m899FmbJbbbbhPaoc:W:qefheaoc8WfhvinaCavcwfIdb:taecwfIdbgHNaQavIdb:taeIdbgONaXavclfIdb:taeclfIdbgLNMMaxaHNazaONasaLNMM:vgHaPaHaP9EEhPavc8KfhvaecxfheawcufgwmbkabaxUd8KabasUdaabazUd3abaCaxaPN:tUdKabaXasaPN:tUdCabaQazaPN:tUdzabJbbjZakakN:t:rgkUdydndnaxJbbj:;axJbbj:;9GEgPJbbjZaPJbbjZ9FEJbb;:9cNJbbbZJbbb:;axJbbbb9GEMgP:lJbbb9p9DTmbaP:Ohexekcjjjj94hekabae86b8UdndnasJbbj:;asJbbj:;9GEgPJbbjZaPJbbjZ9FEJbb;:9cNJbbbZJbbb:;asJbbbb9GEMgP:lJbbb9p9DTmbaP:Ohvxekcjjjj94hvkabav86bRdndnazJbbj:;azJbbj:;9GEgPJbbjZaPJbbjZ9FEJbb;:9cNJbbbZJbbb:;azJbbbb9GEMgP:lJbbb9p9DTmbaP:Ohqxekcjjjj94hqkabaq86b8SdndnaecKtcK91:YJbb;:9c:vax:t:lavcKtcK91:YJbb;:9c:vas:t:laqcKtcK91:YJbb;:9c:vaz:t:lakMMMJbb;:9cNJbbjZMgk:lJbbb9p9DTmbak:Ohexekcjjjj94hekaecFbaecFb9iEhexekabcjjj;8iBdycFbhekabae86b8Vxekab9cb83dbabcyf9cb83dbabcaf9cb83dbabcKf9cb83dbabczf9cb83dbabcwf9cb83dbkaoc:W;aef8Kjjjjbk;Iwwvul99iud99eue99eul998Jjjjjbcje9Rgr8Kjjjjbavcd4hwaicd4hDdndnaoTmbarc;abfcbaocdtgvz:ojjjb8Aarc;Gbfcbavz:ojjjb8AarhvarcafhiaohqinavcFFF97BdbaicFFF;7rBdbaiclfhiavclfhvaqcufgqmbkdnadTmbcbhkinaeakaD2cdtfgvIdwhxavIdlhmavIdbhPalakaw2cdtfIdbhsarc;abfhzarhiarc;GbfhHarcafhqcj1jjbhvaohOinasavcwfIdbaxNavIdbaPNavclfIdbamNMMgAMhCakhXdnaAas:tgAaqIdbgQ9DgLmbaHydbhXkaHaXBdbakhXdnaCaiIdbgK9EmbazydbhXaKhCkazaXBdbaiaCUdbaqaAaQaLEUdbavcxfhvaqclfhqaHclfhHaiclfhiazclfhzaOcufgOmbkakcefgkad9hmbkkadThkJbbbbhCcbhXarc;abfhvarc;Gbfhicbhqinalavydbgzaw2cdtfIdbalaiydbgHaw2cdtfIdbaeazaD2cdtfgzIdwaeaHaD2cdtfgHIdw:tgsasNazIdbaHIdb:tgsasNazIdlaHIdl:tgsasNMM:rMMgsaCasaC9EgzEhCaqaXazEhXaiclfhiavclfhvaoaqcefgq9hmbkaCJbbbZNhKxekadThkcbhXJbbbbhKkJbbbbhCdnaearc;abfaXcdtgifydbgqaD2cdtfgvIdwaearc;GbfaifydbgzaD2cdtfgiIdwgm:tgsasNavIdbaiIdbgY:tgAaANavIdlaiIdlgP:tgQaQNMM:rgxJbbbb9ETmbaxalaqaw2cdtfIdbMalazaw2cdtfIdb:taxaxM:vhCkasaCNamMhmaQaCNaPMhPaAaCNaYMhYdnakmbaDcdthvawcdthiindnalIdbg8AaecwfIdbam:tgCaCNaeIdbaY:tgsasNaeclfIdbaP:tgAaANMM:rgQMgEaK9ETmbJbbbbhxdnaQJbbbb9ETmbaEaK:taQaQM:vhxkaxaCNamMhmaxaANaPMhPaxasNaYMhYa8AaKaQMMJbbbZNhKkaeavfhealaifhladcufgdmbkkabaKUdxabamUdwabaPUdlabaYUdbarcjef8Kjjjjbkjeeiu8Jjjjjbcj8W9Rgr8Kjjjjbaici2hwdnaiTmbawceawce0EhDarhiinaiaeadRbbcdtfydbBdbadcefhdaiclfhiaDcufgDmbkkabarawaladaoz:hjjjbarcj8Wf8Kjjjjbk:Reeeu8Jjjjjbca9Rgo8Kjjjjbab9cb83dbabcyf9cb83dbabcaf9cb83dbabcKf9cb83dbabczf9cb83dbabcwf9cb83dbdnadTmbaocbBd3ao9cb83iwao9cb83ibaoaeadaialaoc3falEavcbalEcrz1jjjbabao8Pib83dbabao8Piw83dwkaocaf8Kjjjjbk:3lequ8JjjjjbcjP9Rgl8Kjjjjbcbhvalcjxfcbaiz:ojjjb8AdndnadTmbcjehoaehrincuhwarhDcuhqavhkdninawakaoalcjxfaDcefRbbfRbb9RcFeGci6aoalcjxfaDRbbfRbb9RcFeGci6faoalcjxfaDcdfRbbfRbb9RcFeGci6fgxaq9mgmEhwdnammbaxce0mdkaxaqaxaq9kEhqaDcifhDadakcefgk9hmbkkaeawci2fgDcdfRbbhqaDcefRbbhxaDRbbhkaeavci2fgDcifaDawav9Rci2z:rjjjb8Aakalcjxffaocefgo86bbaxalcjxffao86bbaDcdfaq86bbaDcefax86bbaDak86bbaqalcjxffao86bbarcifhravcefgvad9hmbkalcFeaicetz:ojjjbhoadci2gDceaDce0EhqcbhxindnaoaeRbbgkcetfgw8UebgDcu9kmbawax87ebaocjlfaxcdtfabakcdtfydbBdbaxhDaxcefhxkaeaD86bbaecefheaqcufgqmbkaxcdthDxekcbhDkabalcjlfaDz:njjjb8AalcjPf8Kjjjjbk9teiucbcbyd;C1jjbgeabcifc98GfgbBd;C1jjbdndnabZbcztgd9nmbcuhiabad9RcFFifcz4nbcuSmekaehikaik;teeeudndnaeabVciGTmbabhixekdndnadcz9pmbabhixekabhiinaiaeydbBdbaiaeydlBdlaiaeydwBdwaiaeydxBdxaeczfheaiczfhiadc9Wfgdcs0mbkkadcl6mbinaiaeydbBdbaeclfheaiclfhiadc98fgdci0mbkkdnadTmbinaiaeRbb86bbaicefhiaecefheadcufgdmbkkabk:3eedudndnabciGTmbabhixekaecFeGc:b:c:ew2hldndnadcz9pmbabhixekabhiinaialBdxaialBdwaialBdlaialBdbaiczfhiadc9Wfgdcs0mbkkadcl6mbinaialBdbaiclfhiadc98fgdci0mbkkdnadTmbinaiae86bbaicefhiadcufgdmbkkabk9teiucbcbyd;C1jjbgeabcrfc94GfgbBd;C1jjbdndnabZbcztgd9nmbcuhiabad9RcFFifcz4nbcuSmekaehikaik9:eiuZbhedndncbyd;C1jjbgdaecztgi9nmbcuheadai9RcFFifcz4nbcuSmekadhekcbabae9Rcifc98Gcbyd;C1jjbfgdBd;C1jjbdnadZbcztge9nmbadae9RcFFifcz4nb8Akk:;Deludndndnadch9pmbabaeSmdaeabadfgi9Rcbadcet9R0mekabaead;8qbbxekaeab7ciGhldndndnabae9pmbdnalTmbadhvabhixikdnabciGmbadhvabhixdkadTmiabaeRbb86bbadcufhvdnabcefgiciGmbaecefhexdkavTmiabaeRbe86beadc9:fhvdnabcdfgiciGmbaecdfhexdkavTmiabaeRbd86bdadc99fhvdnabcifgiciGmbaecifhexdkavTmiabaeRbi86biabclfhiaeclfheadc98fhvxekdnalmbdnaiciGTmbadTmlabadcufgifglaeaifRbb86bbdnalciGmbaihdxekaiTmlabadc9:fgifglaeaifRbb86bbdnalciGmbaihdxekaiTmlabadc99fgifglaeaifRbb86bbdnalciGmbaihdxekaiTmlabadc98fgdfaeadfRbb86bbkadcl6mbdnadc98fgocd4cefciGgiTmbaec98fhlabc98fhvinavadfaladfydbBdbadc98fhdaicufgimbkkaocx6mbaec9Wfhvabc9WfhoinaoadfgicxfavadfglcxfydbBdbaicwfalcwfydbBdbaiclfalclfydbBdbaialydbBdbadc9Wfgdci0mbkkadTmdadhidnadciGglTmbaecufhvabcufhoadhiinaoaifavaifRbb86bbaicufhialcufglmbkkadcl6mdaec98fhlabc98fhvinavaifgecifalaifgdcifRbb86bbaecdfadcdfRbb86bbaecefadcefRbb86bbaeadRbb86bbaic98fgimbxikkavcl6mbdnavc98fglcd4cefcrGgdTmbavadcdt9RhvinaiaeydbBdbaeclfheaiclfhiadcufgdmbkkalc36mbinaiaeydbBdbaiaeydlBdlaiaeydwBdwaiaeydxBdxaiaeydzBdzaiaeydCBdCaiaeydKBdKaiaeyd3Bd3aecafheaicafhiavc9Gfgvci0mbkkavTmbdndnavcrGgdmbavhlxekavc94GhlinaiaeRbb86bbaicefhiaecefheadcufgdmbkkavcw6mbinaiaeRbb86bbaiaeRbe86beaiaeRbd86bdaiaeRbi86biaiaeRbl86blaiaeRbv86bvaiaeRbo86boaiaeRbr86braicwfhiaecwfhealc94fglmbkkabkk9Tdbcjwk9ubbjZbbbbbbbbbbbbbbjZbbbbbbbbbbbbbbjZ86;nAZ86;nAZ86;nAZ86;nA:;86;nAZ86;nAZ86;nAZ86;nA:;86;nAZ86;nAZ86;nAZ86;nA:;bc;uwkxebbbdbbb9GNbb",t=new Uint8Array([32,0,65,2,1,106,34,33,3,128,11,4,13,64,6,253,10,7,15,116,127,5,8,12,40,16,19,54,20,9,27,255,113,17,42,67,24,23,146,148,18,14,22,45,70,69,56,114,101,21,25,63,75,136,108,28,118,29,73,115]);if(typeof WebAssembly!="object")return{supported:!1};var n,i=WebAssembly.instantiate(o(e),{}).then(function(C){n=C.instance,n.exports.__wasm_call_ctors()});function o(C){for(var _=new Uint8Array(C.length),I=0;I<C.length;++I){var b=C.charCodeAt(I);_[I]=b>96?b-97:b>64?b-39:b+4}for(var x=0,I=0;I<C.length;++I)_[x++]=_[I]<60?t[_[I]]:(_[I]-60)*64+_[++I];return _.buffer.slice(0,x)}function r(C){if(!C)throw new Error("Assertion failed")}function a(C){return new Uint8Array(C.buffer,C.byteOffset,C.byteLength)}var s=48,A=16;function l(C,_){var I=C.meshlets[_*4+0],b=C.meshlets[_*4+1],x=C.meshlets[_*4+2],T=C.meshlets[_*4+3];return{vertices:C.vertices.subarray(I,I+x),triangles:C.triangles.subarray(b,b+T*3)}}function d(C,_,I,b,x,T,w){var R=n.exports.sbrk,z=n.exports.meshopt_buildMeshletsBound(C.length,x,T),M=R(z*A),N=R(z*x*4),O=R(z*T*3),u=R(C.byteLength),E=R(_.byteLength),y=new Uint8Array(n.exports.memory.buffer);y.set(a(C),u),y.set(a(_),E);var B=n.exports.meshopt_buildMeshlets(M,N,O,u,C.length,E,I,b,x,T,w);y=new Uint8Array(n.exports.memory.buffer);for(var D=y.subarray(M,M+B*A),v=new Uint32Array(D.buffer,D.byteOffset,D.byteLength/4).slice(),F=0;F<B;++F){var P=v[F*4+0],U=v[F*4+1],I=v[F*4+2],k=v[F*4+3];n.exports.meshopt_optimizeMeshlet(N+P*4,O+U,k,I)}var j=v[(B-1)*4+0],q=v[(B-1)*4+1],$=v[(B-1)*4+2],H=v[(B-1)*4+3],Z=j+$,ee=q+(H*3+3&-4),Ae={meshlets:v,vertices:new Uint32Array(y.buffer,N,Z).slice(),triangles:new Uint8Array(y.buffer,O,ee*3).slice(),meshletCount:B};return R(M-R(0)),Ae}function m(C){var _=new Float32Array(n.exports.memory.buffer,C,s/4);return{centerX:_[0],centerY:_[1],centerZ:_[2],radius:_[3],coneApexX:_[4],coneApexY:_[5],coneApexZ:_[6],coneAxisX:_[7],coneAxisY:_[8],coneAxisZ:_[9],coneCutoff:_[10]}}function p(C,_,I,b){var x=n.exports.sbrk,T=[],w=x(_.byteLength),R=x(C.vertices.byteLength),z=x(C.triangles.byteLength),M=x(s),N=new Uint8Array(n.exports.memory.buffer);N.set(a(_),w),N.set(a(C.vertices),R),N.set(a(C.triangles),z);for(var O=0;O<C.meshletCount;++O){var u=C.meshlets[O*4+0],E=C.meshlets[O*4+0+1],y=C.meshlets[O*4+0+3];n.exports.meshopt_computeMeshletBounds(M,R+u*4,z+E,y,w,I,b),T.push(m(M))}return x(w-x(0)),T}function g(C,_,I,b){var x=n.exports.sbrk,T=x(s),w=x(C.byteLength),R=x(_.byteLength),z=new Uint8Array(n.exports.memory.buffer);z.set(a(C),w),z.set(a(_),R),n.exports.meshopt_computeClusterBounds(T,w,C.length,R,I,b);var M=m(T);return x(T-x(0)),M}function h(C,_,I,b,x){var T=n.exports.sbrk,w=T(s),R=T(C.byteLength),z=b?T(b.byteLength):0,M=new Uint8Array(n.exports.memory.buffer);M.set(a(C),R),b&&M.set(a(b),z),n.exports.meshopt_computeSphereBounds(w,R,_,I,z,b?x:0);var N=m(w);return T(w-T(0)),N}return{ready:i,supported:!0,buildMeshlets:function(C,_,I,b,x,T){r(C.length%3==0),r(_ instanceof Float32Array),r(_.length%I==0),r(I>=3),r(b<=256||b>0),r(x<=512),r(x%4==0),T=T||0;var w=C.BYTES_PER_ELEMENT==4?C:new Uint32Array(C);return d(w,_,_.length/I,I*4,b,x,T)},extractMeshlet:function(C,_){return r(_>=0&&_<C.meshletCount),l(C,_)},computeClusterBounds:function(C,_,I){r(C.length%3==0),r(C.length/3<=512),r(_ instanceof Float32Array),r(_.length%I==0),r(I>=3);var b=C.BYTES_PER_ELEMENT==4?C:new Uint32Array(C);return g(b,_,_.length/I,I*4)},computeMeshletBounds:function(C,_,I){return r(C.meshletCount!=0),r(_ instanceof Float32Array),r(_.length%I==0),r(I>=3),p(C,_,_.length/I,I*4)},computeSphereBounds:function(C,_,I,b){return r(C instanceof Float32Array),r(C.length%_==0),r(_>=3),r(!I||I instanceof Float32Array),r(!I||I.length%b==0),r(!I||b>=1),r(!I||C.length/_==I.length/b),b=b||0,h(C,C.length/_,_*4,I,b*4)}}})();typeof bg=="object"&&typeof Qx=="object"?Qx.exports=rI:typeof define=="function"&&define.amd?define([],function(){return rI}):typeof bg=="object"?bg.MeshoptClusterizer=rI:(typeof self<"u"?self:bg).MeshoptClusterizer=rI});var R1=Fs((JXe,Q1)=>{var wne=T1(),Dne=S1(),Qne=w1(),Rne=D1();Q1.exports={MeshoptEncoder:wne,MeshoptDecoder:Dne,MeshoptSimplifier:Qne,MeshoptClusterizer:Rne}});var IH=Fs((Mwt,_H)=>{"use strict";_H.exports=Mge;var fC=1e20;function Mge(e,t){t||(t={});var n=t.cutoff==null?.25:t.cutoff,i=t.radius==null?8:t.radius,o=t.channel||0,r,a,s,A,l,d,m,p,g,h,C;if(ArrayBuffer.isView(e)||Array.isArray(e)){if(!t.width||!t.height)throw Error("For raw data width and height should be provided by options");r=t.width,a=t.height,A=e,t.stride?d=t.stride:d=Math.floor(e.length/r/a)}else window.HTMLCanvasElement&&e instanceof window.HTMLCanvasElement?(p=e,m=p.getContext("2d"),r=p.width,a=p.height,g=m.getImageData(0,0,r,a),A=g.data,d=4):window.CanvasRenderingContext2D&&e instanceof window.CanvasRenderingContext2D?(p=e.canvas,m=e,r=p.width,a=p.height,g=m.getImageData(0,0,r,a),A=g.data,d=4):window.ImageData&&e instanceof window.ImageData&&(g=e,r=e.width,a=e.height,A=g.data,d=4);if(s=Math.max(r,a),window.Uint8ClampedArray&&A instanceof window.Uint8ClampedArray||window.Uint8Array&&A instanceof window.Uint8Array)for(l=A,A=Array(r*a),h=0,C=Math.floor(l.length/d);h<C;h++)A[h]=l[h*d+o]/255;else if(d!==1)throw Error("Raw data can have only 1 value per pixel");var _=Array(r*a),I=Array(r*a),b=Array(s),x=Array(s),T=Array(s+1),w=Array(s);for(h=0,C=r*a;h<C;h++){var R=A[h];_[h]=R===1?0:R===0?fC:Math.pow(Math.max(0,.5-R),2),I[h]=R===1?fC:R===0?0:Math.pow(Math.max(0,R-.5),2)}CH(_,r,a,b,x,w,T),CH(I,r,a,b,x,w,T);var z=window.Float32Array?new Float32Array(r*a):new Array(r*a);for(h=0,C=r*a;h<C;h++)z[h]=Math.min(Math.max(1-((_[h]-I[h])/i+n),0),1);return z}function CH(e,t,n,i,o,r,a){for(var s=0;s<t;s++){for(var A=0;A<n;A++)i[A]=e[A*t+s];for(EH(i,o,r,a,n),A=0;A<n;A++)e[A*t+s]=o[A]}for(A=0;A<n;A++){for(s=0;s<t;s++)i[s]=e[A*t+s];for(EH(i,o,r,a,t),s=0;s<t;s++)e[A*t+s]=Math.sqrt(o[s])}}function EH(e,t,n,i,o){n[0]=0,i[0]=-fC,i[1]=+fC;for(var r=1,a=0;r<o;r++){for(var s=(e[r]+r*r-(e[n[a]]+n[a]*n[a]))/(2*r-2*n[a]);s<=i[a];)a--,s=(e[r]+r*r-(e[n[a]]+n[a]*n[a]))/(2*r-2*n[a]);a++,n[a]=r,i[a]=s,i[a+1]=+fC}for(r=0,a=0;r<o;r++){for(;i[a+1]<r;)a++;t[r]=(r-n[a])*(r-n[a])+e[n[a]]}}});var SH=Fs((Kwt,gy)=>{function Vge(){var e=0,t=1,n=2,i=3,o=4,r=5,a=6,s=7,A=8,l=9,d=10,m=11,p=12,g=13,h=14,C=15,_=16,I=17,b=0,x=1,T=2,w=3,R=4;function z(u,E){return 55296<=u.charCodeAt(E)&&u.charCodeAt(E)<=56319&&56320<=u.charCodeAt(E+1)&&u.charCodeAt(E+1)<=57343}function M(u,E){E===void 0&&(E=0);var y=u.charCodeAt(E);if(55296<=y&&y<=56319&&E<u.length-1){var B=y,D=u.charCodeAt(E+1);return 56320<=D&&D<=57343?(B-55296)*1024+(D-56320)+65536:B}if(56320<=y&&y<=57343&&E>=1){var B=u.charCodeAt(E-1),D=y;return 55296<=B&&B<=56319?(B-55296)*1024+(D-56320)+65536:D}return y}function N(u,E,y){var B=[u].concat(E).concat([y]),D=B[B.length-2],v=y,F=B.lastIndexOf(h);if(F>1&&B.slice(1,F).every(function(k){return k==i})&&[i,g,I].indexOf(u)==-1)return T;var P=B.lastIndexOf(o);if(P>0&&B.slice(1,P).every(function(k){return k==o})&&[p,o].indexOf(D)==-1)return B.filter(function(k){return k==o}).length%2==1?w:R;if(D==e&&v==t)return b;if(D==n||D==e||D==t)return v==h&&E.every(function(k){return k==i})?T:x;if(v==n||v==e||v==t)return x;if(D==a&&(v==a||v==s||v==l||v==d))return b;if((D==l||D==s)&&(v==s||v==A))return b;if((D==d||D==A)&&v==A)return b;if(v==i||v==C)return b;if(v==r)return b;if(D==p)return b;var U=B.indexOf(i)!=-1?B.lastIndexOf(i)-1:B.length-2;return[g,I].indexOf(B[U])!=-1&&B.slice(U+1,-1).every(function(k){return k==i})&&v==h||D==C&&[_,I].indexOf(v)!=-1?b:E.indexOf(o)!=-1?T:D==o&&v==o?b:x}this.nextBreak=function(u,E){if(E===void 0&&(E=0),E<0)return 0;if(E>=u.length-1)return u.length;for(var y=O(M(u,E)),B=[],D=E+1;D<u.length;D++)if(!z(u,D-1)){var v=O(M(u,D));if(N(y,B,v))return D;B.push(v)}return u.length},this.splitGraphemes=function(u){for(var E=[],y=0,B;(B=this.nextBreak(u,y))<u.length;)E.push(u.slice(y,B)),y=B;return y<u.length&&E.push(u.slice(y)),E},this.iterateGraphemes=function(u){var E=0,y={next:(function(){var B,D;return(D=this.nextBreak(u,E))<u.length?(B=u.slice(E,D),E=D,{value:B,done:!1}):E<u.length?(B=u.slice(E),E=u.length,{value:B,done:!1}):{value:void 0,done:!0}}).bind(this)};return typeof Symbol<"u"&&Symbol.iterator&&(y[Symbol.iterator]=function(){return y}),y},this.countGraphemes=function(u){for(var E=0,y=0,B;(B=this.nextBreak(u,y))<u.length;)y=B,E++;return y<u.length&&E++,E};function O(u){return 1536<=u&&u<=1541||u==1757||u==1807||u==2274||u==3406||u==69821||70082<=u&&u<=70083||u==72250||72326<=u&&u<=72329||u==73030?p:u==13?e:u==10?t:0<=u&&u<=9||11<=u&&u<=12||14<=u&&u<=31||127<=u&&u<=159||u==173||u==1564||u==6158||u==8203||8206<=u&&u<=8207||u==8232||u==8233||8234<=u&&u<=8238||8288<=u&&u<=8292||u==8293||8294<=u&&u<=8303||55296<=u&&u<=57343||u==65279||65520<=u&&u<=65528||65529<=u&&u<=65531||113824<=u&&u<=113827||119155<=u&&u<=119162||u==917504||u==917505||917506<=u&&u<=917535||917632<=u&&u<=917759||918e3<=u&&u<=921599?n:768<=u&&u<=879||1155<=u&&u<=1159||1160<=u&&u<=1161||1425<=u&&u<=1469||u==1471||1473<=u&&u<=1474||1476<=u&&u<=1477||u==1479||1552<=u&&u<=1562||1611<=u&&u<=1631||u==1648||1750<=u&&u<=1756||1759<=u&&u<=1764||1767<=u&&u<=1768||1770<=u&&u<=1773||u==1809||1840<=u&&u<=1866||1958<=u&&u<=1968||2027<=u&&u<=2035||2070<=u&&u<=2073||2075<=u&&u<=2083||2085<=u&&u<=2087||2089<=u&&u<=2093||2137<=u&&u<=2139||2260<=u&&u<=2273||2275<=u&&u<=2306||u==2362||u==2364||2369<=u&&u<=2376||u==2381||2385<=u&&u<=2391||2402<=u&&u<=2403||u==2433||u==2492||u==2494||2497<=u&&u<=2500||u==2509||u==2519||2530<=u&&u<=2531||2561<=u&&u<=2562||u==2620||2625<=u&&u<=2626||2631<=u&&u<=2632||2635<=u&&u<=2637||u==2641||2672<=u&&u<=2673||u==2677||2689<=u&&u<=2690||u==2748||2753<=u&&u<=2757||2759<=u&&u<=2760||u==2765||2786<=u&&u<=2787||2810<=u&&u<=2815||u==2817||u==2876||u==2878||u==2879||2881<=u&&u<=2884||u==2893||u==2902||u==2903||2914<=u&&u<=2915||u==2946||u==3006||u==3008||u==3021||u==3031||u==3072||3134<=u&&u<=3136||3142<=u&&u<=3144||3146<=u&&u<=3149||3157<=u&&u<=3158||3170<=u&&u<=3171||u==3201||u==3260||u==3263||u==3266||u==3270||3276<=u&&u<=3277||3285<=u&&u<=3286||3298<=u&&u<=3299||3328<=u&&u<=3329||3387<=u&&u<=3388||u==3390||3393<=u&&u<=3396||u==3405||u==3415||3426<=u&&u<=3427||u==3530||u==3535||3538<=u&&u<=3540||u==3542||u==3551||u==3633||3636<=u&&u<=3642||3655<=u&&u<=3662||u==3761||3764<=u&&u<=3769||3771<=u&&u<=3772||3784<=u&&u<=3789||3864<=u&&u<=3865||u==3893||u==3895||u==3897||3953<=u&&u<=3966||3968<=u&&u<=3972||3974<=u&&u<=3975||3981<=u&&u<=3991||3993<=u&&u<=4028||u==4038||4141<=u&&u<=4144||4146<=u&&u<=4151||4153<=u&&u<=4154||4157<=u&&u<=4158||4184<=u&&u<=4185||4190<=u&&u<=4192||4209<=u&&u<=4212||u==4226||4229<=u&&u<=4230||u==4237||u==4253||4957<=u&&u<=4959||5906<=u&&u<=5908||5938<=u&&u<=5940||5970<=u&&u<=5971||6002<=u&&u<=6003||6068<=u&&u<=6069||6071<=u&&u<=6077||u==6086||6089<=u&&u<=6099||u==6109||6155<=u&&u<=6157||6277<=u&&u<=6278||u==6313||6432<=u&&u<=6434||6439<=u&&u<=6440||u==6450||6457<=u&&u<=6459||6679<=u&&u<=6680||u==6683||u==6742||6744<=u&&u<=6750||u==6752||u==6754||6757<=u&&u<=6764||6771<=u&&u<=6780||u==6783||6832<=u&&u<=6845||u==6846||6912<=u&&u<=6915||u==6964||6966<=u&&u<=6970||u==6972||u==6978||7019<=u&&u<=7027||7040<=u&&u<=7041||7074<=u&&u<=7077||7080<=u&&u<=7081||7083<=u&&u<=7085||u==7142||7144<=u&&u<=7145||u==7149||7151<=u&&u<=7153||7212<=u&&u<=7219||7222<=u&&u<=7223||7376<=u&&u<=7378||7380<=u&&u<=7392||7394<=u&&u<=7400||u==7405||u==7412||7416<=u&&u<=7417||7616<=u&&u<=7673||7675<=u&&u<=7679||u==8204||8400<=u&&u<=8412||8413<=u&&u<=8416||u==8417||8418<=u&&u<=8420||8421<=u&&u<=8432||11503<=u&&u<=11505||u==11647||11744<=u&&u<=11775||12330<=u&&u<=12333||12334<=u&&u<=12335||12441<=u&&u<=12442||u==42607||42608<=u&&u<=42610||42612<=u&&u<=42621||42654<=u&&u<=42655||42736<=u&&u<=42737||u==43010||u==43014||u==43019||43045<=u&&u<=43046||43204<=u&&u<=43205||43232<=u&&u<=43249||43302<=u&&u<=43309||43335<=u&&u<=43345||43392<=u&&u<=43394||u==43443||43446<=u&&u<=43449||u==43452||u==43493||43561<=u&&u<=43566||43569<=u&&u<=43570||43573<=u&&u<=43574||u==43587||u==43596||u==43644||u==43696||43698<=u&&u<=43700||43703<=u&&u<=43704||43710<=u&&u<=43711||u==43713||43756<=u&&u<=43757||u==43766||u==44005||u==44008||u==44013||u==64286||65024<=u&&u<=65039||65056<=u&&u<=65071||65438<=u&&u<=65439||u==66045||u==66272||66422<=u&&u<=66426||68097<=u&&u<=68099||68101<=u&&u<=68102||68108<=u&&u<=68111||68152<=u&&u<=68154||u==68159||68325<=u&&u<=68326||u==69633||69688<=u&&u<=69702||69759<=u&&u<=69761||69811<=u&&u<=69814||69817<=u&&u<=69818||69888<=u&&u<=69890||69927<=u&&u<=69931||69933<=u&&u<=69940||u==70003||70016<=u&&u<=70017||70070<=u&&u<=70078||70090<=u&&u<=70092||70191<=u&&u<=70193||u==70196||70198<=u&&u<=70199||u==70206||u==70367||70371<=u&&u<=70378||70400<=u&&u<=70401||u==70460||u==70462||u==70464||u==70487||70502<=u&&u<=70508||70512<=u&&u<=70516||70712<=u&&u<=70719||70722<=u&&u<=70724||u==70726||u==70832||70835<=u&&u<=70840||u==70842||u==70845||70847<=u&&u<=70848||70850<=u&&u<=70851||u==71087||71090<=u&&u<=71093||71100<=u&&u<=71101||71103<=u&&u<=71104||71132<=u&&u<=71133||71219<=u&&u<=71226||u==71229||71231<=u&&u<=71232||u==71339||u==71341||71344<=u&&u<=71349||u==71351||71453<=u&&u<=71455||71458<=u&&u<=71461||71463<=u&&u<=71467||72193<=u&&u<=72198||72201<=u&&u<=72202||72243<=u&&u<=72248||72251<=u&&u<=72254||u==72263||72273<=u&&u<=72278||72281<=u&&u<=72283||72330<=u&&u<=72342||72344<=u&&u<=72345||72752<=u&&u<=72758||72760<=u&&u<=72765||u==72767||72850<=u&&u<=72871||72874<=u&&u<=72880||72882<=u&&u<=72883||72885<=u&&u<=72886||73009<=u&&u<=73014||u==73018||73020<=u&&u<=73021||73023<=u&&u<=73029||u==73031||92912<=u&&u<=92916||92976<=u&&u<=92982||94095<=u&&u<=94098||113821<=u&&u<=113822||u==119141||119143<=u&&u<=119145||119150<=u&&u<=119154||119163<=u&&u<=119170||119173<=u&&u<=119179||119210<=u&&u<=119213||119362<=u&&u<=119364||121344<=u&&u<=121398||121403<=u&&u<=121452||u==121461||u==121476||121499<=u&&u<=121503||121505<=u&&u<=121519||122880<=u&&u<=122886||122888<=u&&u<=122904||122907<=u&&u<=122913||122915<=u&&u<=122916||122918<=u&&u<=122922||125136<=u&&u<=125142||125252<=u&&u<=125258||917536<=u&&u<=917631||917760<=u&&u<=917999?i:127462<=u&&u<=127487?o:u==2307||u==2363||2366<=u&&u<=2368||2377<=u&&u<=2380||2382<=u&&u<=2383||2434<=u&&u<=2435||2495<=u&&u<=2496||2503<=u&&u<=2504||2507<=u&&u<=2508||u==2563||2622<=u&&u<=2624||u==2691||2750<=u&&u<=2752||u==2761||2763<=u&&u<=2764||2818<=u&&u<=2819||u==2880||2887<=u&&u<=2888||2891<=u&&u<=2892||u==3007||3009<=u&&u<=3010||3014<=u&&u<=3016||3018<=u&&u<=3020||3073<=u&&u<=3075||3137<=u&&u<=3140||3202<=u&&u<=3203||u==3262||3264<=u&&u<=3265||3267<=u&&u<=3268||3271<=u&&u<=3272||3274<=u&&u<=3275||3330<=u&&u<=3331||3391<=u&&u<=3392||3398<=u&&u<=3400||3402<=u&&u<=3404||3458<=u&&u<=3459||3536<=u&&u<=3537||3544<=u&&u<=3550||3570<=u&&u<=3571||u==3635||u==3763||3902<=u&&u<=3903||u==3967||u==4145||4155<=u&&u<=4156||4182<=u&&u<=4183||u==4228||u==6070||6078<=u&&u<=6085||6087<=u&&u<=6088||6435<=u&&u<=6438||6441<=u&&u<=6443||6448<=u&&u<=6449||6451<=u&&u<=6456||6681<=u&&u<=6682||u==6741||u==6743||6765<=u&&u<=6770||u==6916||u==6965||u==6971||6973<=u&&u<=6977||6979<=u&&u<=6980||u==7042||u==7073||7078<=u&&u<=7079||u==7082||u==7143||7146<=u&&u<=7148||u==7150||7154<=u&&u<=7155||7204<=u&&u<=7211||7220<=u&&u<=7221||u==7393||7410<=u&&u<=7411||u==7415||43043<=u&&u<=43044||u==43047||43136<=u&&u<=43137||43188<=u&&u<=43203||43346<=u&&u<=43347||u==43395||43444<=u&&u<=43445||43450<=u&&u<=43451||43453<=u&&u<=43456||43567<=u&&u<=43568||43571<=u&&u<=43572||u==43597||u==43755||43758<=u&&u<=43759||u==43765||44003<=u&&u<=44004||44006<=u&&u<=44007||44009<=u&&u<=44010||u==44012||u==69632||u==69634||u==69762||69808<=u&&u<=69810||69815<=u&&u<=69816||u==69932||u==70018||70067<=u&&u<=70069||70079<=u&&u<=70080||70188<=u&&u<=70190||70194<=u&&u<=70195||u==70197||70368<=u&&u<=70370||70402<=u&&u<=70403||u==70463||70465<=u&&u<=70468||70471<=u&&u<=70472||70475<=u&&u<=70477||70498<=u&&u<=70499||70709<=u&&u<=70711||70720<=u&&u<=70721||u==70725||70833<=u&&u<=70834||u==70841||70843<=u&&u<=70844||u==70846||u==70849||71088<=u&&u<=71089||71096<=u&&u<=71099||u==71102||71216<=u&&u<=71218||71227<=u&&u<=71228||u==71230||u==71340||71342<=u&&u<=71343||u==71350||71456<=u&&u<=71457||u==71462||72199<=u&&u<=72200||u==72249||72279<=u&&u<=72280||u==72343||u==72751||u==72766||u==72873||u==72881||u==72884||94033<=u&&u<=94078||u==119142||u==119149?r:4352<=u&&u<=4447||43360<=u&&u<=43388?a:4448<=u&&u<=4519||55216<=u&&u<=55238?s:4520<=u&&u<=4607||55243<=u&&u<=55291?A:u==44032||u==44060||u==44088||u==44116||u==44144||u==44172||u==44200||u==44228||u==44256||u==44284||u==44312||u==44340||u==44368||u==44396||u==44424||u==44452||u==44480||u==44508||u==44536||u==44564||u==44592||u==44620||u==44648||u==44676||u==44704||u==44732||u==44760||u==44788||u==44816||u==44844||u==44872||u==44900||u==44928||u==44956||u==44984||u==45012||u==45040||u==45068||u==45096||u==45124||u==45152||u==45180||u==45208||u==45236||u==45264||u==45292||u==45320||u==45348||u==45376||u==45404||u==45432||u==45460||u==45488||u==45516||u==45544||u==45572||u==45600||u==45628||u==45656||u==45684||u==45712||u==45740||u==45768||u==45796||u==45824||u==45852||u==45880||u==45908||u==45936||u==45964||u==45992||u==46020||u==46048||u==46076||u==46104||u==46132||u==46160||u==46188||u==46216||u==46244||u==46272||u==46300||u==46328||u==46356||u==46384||u==46412||u==46440||u==46468||u==46496||u==46524||u==46552||u==46580||u==46608||u==46636||u==46664||u==46692||u==46720||u==46748||u==46776||u==46804||u==46832||u==46860||u==46888||u==46916||u==46944||u==46972||u==47e3||u==47028||u==47056||u==47084||u==47112||u==47140||u==47168||u==47196||u==47224||u==47252||u==47280||u==47308||u==47336||u==47364||u==47392||u==47420||u==47448||u==47476||u==47504||u==47532||u==47560||u==47588||u==47616||u==47644||u==47672||u==47700||u==47728||u==47756||u==47784||u==47812||u==47840||u==47868||u==47896||u==47924||u==47952||u==47980||u==48008||u==48036||u==48064||u==48092||u==48120||u==48148||u==48176||u==48204||u==48232||u==48260||u==48288||u==48316||u==48344||u==48372||u==48400||u==48428||u==48456||u==48484||u==48512||u==48540||u==48568||u==48596||u==48624||u==48652||u==48680||u==48708||u==48736||u==48764||u==48792||u==48820||u==48848||u==48876||u==48904||u==48932||u==48960||u==48988||u==49016||u==49044||u==49072||u==49100||u==49128||u==49156||u==49184||u==49212||u==49240||u==49268||u==49296||u==49324||u==49352||u==49380||u==49408||u==49436||u==49464||u==49492||u==49520||u==49548||u==49576||u==49604||u==49632||u==49660||u==49688||u==49716||u==49744||u==49772||u==49800||u==49828||u==49856||u==49884||u==49912||u==49940||u==49968||u==49996||u==50024||u==50052||u==50080||u==50108||u==50136||u==50164||u==50192||u==50220||u==50248||u==50276||u==50304||u==50332||u==50360||u==50388||u==50416||u==50444||u==50472||u==50500||u==50528||u==50556||u==50584||u==50612||u==50640||u==50668||u==50696||u==50724||u==50752||u==50780||u==50808||u==50836||u==50864||u==50892||u==50920||u==50948||u==50976||u==51004||u==51032||u==51060||u==51088||u==51116||u==51144||u==51172||u==51200||u==51228||u==51256||u==51284||u==51312||u==51340||u==51368||u==51396||u==51424||u==51452||u==51480||u==51508||u==51536||u==51564||u==51592||u==51620||u==51648||u==51676||u==51704||u==51732||u==51760||u==51788||u==51816||u==51844||u==51872||u==51900||u==51928||u==51956||u==51984||u==52012||u==52040||u==52068||u==52096||u==52124||u==52152||u==52180||u==52208||u==52236||u==52264||u==52292||u==52320||u==52348||u==52376||u==52404||u==52432||u==52460||u==52488||u==52516||u==52544||u==52572||u==52600||u==52628||u==52656||u==52684||u==52712||u==52740||u==52768||u==52796||u==52824||u==52852||u==52880||u==52908||u==52936||u==52964||u==52992||u==53020||u==53048||u==53076||u==53104||u==53132||u==53160||u==53188||u==53216||u==53244||u==53272||u==53300||u==53328||u==53356||u==53384||u==53412||u==53440||u==53468||u==53496||u==53524||u==53552||u==53580||u==53608||u==53636||u==53664||u==53692||u==53720||u==53748||u==53776||u==53804||u==53832||u==53860||u==53888||u==53916||u==53944||u==53972||u==54e3||u==54028||u==54056||u==54084||u==54112||u==54140||u==54168||u==54196||u==54224||u==54252||u==54280||u==54308||u==54336||u==54364||u==54392||u==54420||u==54448||u==54476||u==54504||u==54532||u==54560||u==54588||u==54616||u==54644||u==54672||u==54700||u==54728||u==54756||u==54784||u==54812||u==54840||u==54868||u==54896||u==54924||u==54952||u==54980||u==55008||u==55036||u==55064||u==55092||u==55120||u==55148||u==55176?l:44033<=u&&u<=44059||44061<=u&&u<=44087||44089<=u&&u<=44115||44117<=u&&u<=44143||44145<=u&&u<=44171||44173<=u&&u<=44199||44201<=u&&u<=44227||44229<=u&&u<=44255||44257<=u&&u<=44283||44285<=u&&u<=44311||44313<=u&&u<=44339||44341<=u&&u<=44367||44369<=u&&u<=44395||44397<=u&&u<=44423||44425<=u&&u<=44451||44453<=u&&u<=44479||44481<=u&&u<=44507||44509<=u&&u<=44535||44537<=u&&u<=44563||44565<=u&&u<=44591||44593<=u&&u<=44619||44621<=u&&u<=44647||44649<=u&&u<=44675||44677<=u&&u<=44703||44705<=u&&u<=44731||44733<=u&&u<=44759||44761<=u&&u<=44787||44789<=u&&u<=44815||44817<=u&&u<=44843||44845<=u&&u<=44871||44873<=u&&u<=44899||44901<=u&&u<=44927||44929<=u&&u<=44955||44957<=u&&u<=44983||44985<=u&&u<=45011||45013<=u&&u<=45039||45041<=u&&u<=45067||45069<=u&&u<=45095||45097<=u&&u<=45123||45125<=u&&u<=45151||45153<=u&&u<=45179||45181<=u&&u<=45207||45209<=u&&u<=45235||45237<=u&&u<=45263||45265<=u&&u<=45291||45293<=u&&u<=45319||45321<=u&&u<=45347||45349<=u&&u<=45375||45377<=u&&u<=45403||45405<=u&&u<=45431||45433<=u&&u<=45459||45461<=u&&u<=45487||45489<=u&&u<=45515||45517<=u&&u<=45543||45545<=u&&u<=45571||45573<=u&&u<=45599||45601<=u&&u<=45627||45629<=u&&u<=45655||45657<=u&&u<=45683||45685<=u&&u<=45711||45713<=u&&u<=45739||45741<=u&&u<=45767||45769<=u&&u<=45795||45797<=u&&u<=45823||45825<=u&&u<=45851||45853<=u&&u<=45879||45881<=u&&u<=45907||45909<=u&&u<=45935||45937<=u&&u<=45963||45965<=u&&u<=45991||45993<=u&&u<=46019||46021<=u&&u<=46047||46049<=u&&u<=46075||46077<=u&&u<=46103||46105<=u&&u<=46131||46133<=u&&u<=46159||46161<=u&&u<=46187||46189<=u&&u<=46215||46217<=u&&u<=46243||46245<=u&&u<=46271||46273<=u&&u<=46299||46301<=u&&u<=46327||46329<=u&&u<=46355||46357<=u&&u<=46383||46385<=u&&u<=46411||46413<=u&&u<=46439||46441<=u&&u<=46467||46469<=u&&u<=46495||46497<=u&&u<=46523||46525<=u&&u<=46551||46553<=u&&u<=46579||46581<=u&&u<=46607||46609<=u&&u<=46635||46637<=u&&u<=46663||46665<=u&&u<=46691||46693<=u&&u<=46719||46721<=u&&u<=46747||46749<=u&&u<=46775||46777<=u&&u<=46803||46805<=u&&u<=46831||46833<=u&&u<=46859||46861<=u&&u<=46887||46889<=u&&u<=46915||46917<=u&&u<=46943||46945<=u&&u<=46971||46973<=u&&u<=46999||47001<=u&&u<=47027||47029<=u&&u<=47055||47057<=u&&u<=47083||47085<=u&&u<=47111||47113<=u&&u<=47139||47141<=u&&u<=47167||47169<=u&&u<=47195||47197<=u&&u<=47223||47225<=u&&u<=47251||47253<=u&&u<=47279||47281<=u&&u<=47307||47309<=u&&u<=47335||47337<=u&&u<=47363||47365<=u&&u<=47391||47393<=u&&u<=47419||47421<=u&&u<=47447||47449<=u&&u<=47475||47477<=u&&u<=47503||47505<=u&&u<=47531||47533<=u&&u<=47559||47561<=u&&u<=47587||47589<=u&&u<=47615||47617<=u&&u<=47643||47645<=u&&u<=47671||47673<=u&&u<=47699||47701<=u&&u<=47727||47729<=u&&u<=47755||47757<=u&&u<=47783||47785<=u&&u<=47811||47813<=u&&u<=47839||47841<=u&&u<=47867||47869<=u&&u<=47895||47897<=u&&u<=47923||47925<=u&&u<=47951||47953<=u&&u<=47979||47981<=u&&u<=48007||48009<=u&&u<=48035||48037<=u&&u<=48063||48065<=u&&u<=48091||48093<=u&&u<=48119||48121<=u&&u<=48147||48149<=u&&u<=48175||48177<=u&&u<=48203||48205<=u&&u<=48231||48233<=u&&u<=48259||48261<=u&&u<=48287||48289<=u&&u<=48315||48317<=u&&u<=48343||48345<=u&&u<=48371||48373<=u&&u<=48399||48401<=u&&u<=48427||48429<=u&&u<=48455||48457<=u&&u<=48483||48485<=u&&u<=48511||48513<=u&&u<=48539||48541<=u&&u<=48567||48569<=u&&u<=48595||48597<=u&&u<=48623||48625<=u&&u<=48651||48653<=u&&u<=48679||48681<=u&&u<=48707||48709<=u&&u<=48735||48737<=u&&u<=48763||48765<=u&&u<=48791||48793<=u&&u<=48819||48821<=u&&u<=48847||48849<=u&&u<=48875||48877<=u&&u<=48903||48905<=u&&u<=48931||48933<=u&&u<=48959||48961<=u&&u<=48987||48989<=u&&u<=49015||49017<=u&&u<=49043||49045<=u&&u<=49071||49073<=u&&u<=49099||49101<=u&&u<=49127||49129<=u&&u<=49155||49157<=u&&u<=49183||49185<=u&&u<=49211||49213<=u&&u<=49239||49241<=u&&u<=49267||49269<=u&&u<=49295||49297<=u&&u<=49323||49325<=u&&u<=49351||49353<=u&&u<=49379||49381<=u&&u<=49407||49409<=u&&u<=49435||49437<=u&&u<=49463||49465<=u&&u<=49491||49493<=u&&u<=49519||49521<=u&&u<=49547||49549<=u&&u<=49575||49577<=u&&u<=49603||49605<=u&&u<=49631||49633<=u&&u<=49659||49661<=u&&u<=49687||49689<=u&&u<=49715||49717<=u&&u<=49743||49745<=u&&u<=49771||49773<=u&&u<=49799||49801<=u&&u<=49827||49829<=u&&u<=49855||49857<=u&&u<=49883||49885<=u&&u<=49911||49913<=u&&u<=49939||49941<=u&&u<=49967||49969<=u&&u<=49995||49997<=u&&u<=50023||50025<=u&&u<=50051||50053<=u&&u<=50079||50081<=u&&u<=50107||50109<=u&&u<=50135||50137<=u&&u<=50163||50165<=u&&u<=50191||50193<=u&&u<=50219||50221<=u&&u<=50247||50249<=u&&u<=50275||50277<=u&&u<=50303||50305<=u&&u<=50331||50333<=u&&u<=50359||50361<=u&&u<=50387||50389<=u&&u<=50415||50417<=u&&u<=50443||50445<=u&&u<=50471||50473<=u&&u<=50499||50501<=u&&u<=50527||50529<=u&&u<=50555||50557<=u&&u<=50583||50585<=u&&u<=50611||50613<=u&&u<=50639||50641<=u&&u<=50667||50669<=u&&u<=50695||50697<=u&&u<=50723||50725<=u&&u<=50751||50753<=u&&u<=50779||50781<=u&&u<=50807||50809<=u&&u<=50835||50837<=u&&u<=50863||50865<=u&&u<=50891||50893<=u&&u<=50919||50921<=u&&u<=50947||50949<=u&&u<=50975||50977<=u&&u<=51003||51005<=u&&u<=51031||51033<=u&&u<=51059||51061<=u&&u<=51087||51089<=u&&u<=51115||51117<=u&&u<=51143||51145<=u&&u<=51171||51173<=u&&u<=51199||51201<=u&&u<=51227||51229<=u&&u<=51255||51257<=u&&u<=51283||51285<=u&&u<=51311||51313<=u&&u<=51339||51341<=u&&u<=51367||51369<=u&&u<=51395||51397<=u&&u<=51423||51425<=u&&u<=51451||51453<=u&&u<=51479||51481<=u&&u<=51507||51509<=u&&u<=51535||51537<=u&&u<=51563||51565<=u&&u<=51591||51593<=u&&u<=51619||51621<=u&&u<=51647||51649<=u&&u<=51675||51677<=u&&u<=51703||51705<=u&&u<=51731||51733<=u&&u<=51759||51761<=u&&u<=51787||51789<=u&&u<=51815||51817<=u&&u<=51843||51845<=u&&u<=51871||51873<=u&&u<=51899||51901<=u&&u<=51927||51929<=u&&u<=51955||51957<=u&&u<=51983||51985<=u&&u<=52011||52013<=u&&u<=52039||52041<=u&&u<=52067||52069<=u&&u<=52095||52097<=u&&u<=52123||52125<=u&&u<=52151||52153<=u&&u<=52179||52181<=u&&u<=52207||52209<=u&&u<=52235||52237<=u&&u<=52263||52265<=u&&u<=52291||52293<=u&&u<=52319||52321<=u&&u<=52347||52349<=u&&u<=52375||52377<=u&&u<=52403||52405<=u&&u<=52431||52433<=u&&u<=52459||52461<=u&&u<=52487||52489<=u&&u<=52515||52517<=u&&u<=52543||52545<=u&&u<=52571||52573<=u&&u<=52599||52601<=u&&u<=52627||52629<=u&&u<=52655||52657<=u&&u<=52683||52685<=u&&u<=52711||52713<=u&&u<=52739||52741<=u&&u<=52767||52769<=u&&u<=52795||52797<=u&&u<=52823||52825<=u&&u<=52851||52853<=u&&u<=52879||52881<=u&&u<=52907||52909<=u&&u<=52935||52937<=u&&u<=52963||52965<=u&&u<=52991||52993<=u&&u<=53019||53021<=u&&u<=53047||53049<=u&&u<=53075||53077<=u&&u<=53103||53105<=u&&u<=53131||53133<=u&&u<=53159||53161<=u&&u<=53187||53189<=u&&u<=53215||53217<=u&&u<=53243||53245<=u&&u<=53271||53273<=u&&u<=53299||53301<=u&&u<=53327||53329<=u&&u<=53355||53357<=u&&u<=53383||53385<=u&&u<=53411||53413<=u&&u<=53439||53441<=u&&u<=53467||53469<=u&&u<=53495||53497<=u&&u<=53523||53525<=u&&u<=53551||53553<=u&&u<=53579||53581<=u&&u<=53607||53609<=u&&u<=53635||53637<=u&&u<=53663||53665<=u&&u<=53691||53693<=u&&u<=53719||53721<=u&&u<=53747||53749<=u&&u<=53775||53777<=u&&u<=53803||53805<=u&&u<=53831||53833<=u&&u<=53859||53861<=u&&u<=53887||53889<=u&&u<=53915||53917<=u&&u<=53943||53945<=u&&u<=53971||53973<=u&&u<=53999||54001<=u&&u<=54027||54029<=u&&u<=54055||54057<=u&&u<=54083||54085<=u&&u<=54111||54113<=u&&u<=54139||54141<=u&&u<=54167||54169<=u&&u<=54195||54197<=u&&u<=54223||54225<=u&&u<=54251||54253<=u&&u<=54279||54281<=u&&u<=54307||54309<=u&&u<=54335||54337<=u&&u<=54363||54365<=u&&u<=54391||54393<=u&&u<=54419||54421<=u&&u<=54447||54449<=u&&u<=54475||54477<=u&&u<=54503||54505<=u&&u<=54531||54533<=u&&u<=54559||54561<=u&&u<=54587||54589<=u&&u<=54615||54617<=u&&u<=54643||54645<=u&&u<=54671||54673<=u&&u<=54699||54701<=u&&u<=54727||54729<=u&&u<=54755||54757<=u&&u<=54783||54785<=u&&u<=54811||54813<=u&&u<=54839||54841<=u&&u<=54867||54869<=u&&u<=54895||54897<=u&&u<=54923||54925<=u&&u<=54951||54953<=u&&u<=54979||54981<=u&&u<=55007||55009<=u&&u<=55035||55037<=u&&u<=55063||55065<=u&&u<=55091||55093<=u&&u<=55119||55121<=u&&u<=55147||55149<=u&&u<=55175||55177<=u&&u<=55203?d:u==9757||u==9977||9994<=u&&u<=9997||u==127877||127938<=u&&u<=127940||u==127943||127946<=u&&u<=127948||128066<=u&&u<=128067||128070<=u&&u<=128080||u==128110||128112<=u&&u<=128120||u==128124||128129<=u&&u<=128131||128133<=u&&u<=128135||u==128170||128372<=u&&u<=128373||u==128378||u==128400||128405<=u&&u<=128406||128581<=u&&u<=128583||128587<=u&&u<=128591||u==128675||128692<=u&&u<=128694||u==128704||u==128716||129304<=u&&u<=129308||129310<=u&&u<=129311||u==129318||129328<=u&&u<=129337||129341<=u&&u<=129342||129489<=u&&u<=129501?g:127995<=u&&u<=127999?h:u==8205?C:u==9792||u==9794||9877<=u&&u<=9878||u==9992||u==10084||u==127752||u==127806||u==127859||u==127891||u==127908||u==127912||u==127979||u==127981||u==128139||128187<=u&&u<=128188||u==128295||u==128300||u==128488||u==128640||u==128658?_:128102<=u&&u<=128105?I:m}return this}typeof gy<"u"&&gy.exports&&(gy.exports=Vge)});var dTe={};aY(dTe,{AngleUnits:()=>Gi,AreaMeasurement:()=>lb,AreaMeasurementDrawing:()=>Ab,AreaUnits:()=>Co,AxisLinePrimitive:()=>JA,ClippingPlanePrimitive:()=>qm,ClippingPlanesEditor:()=>cj,DistanceMeasurement:()=>qC,DistanceUnits:()=>Uo,DrawingMode:()=>Ii,EditorMode:()=>KA,HeightMeasurement:()=>ub,HorizontalMeasurement:()=>db,HorizontalMeasurementDrawing:()=>fb,HorizontalPolylineDrawing:()=>Au,Measure:()=>Bb,MeasureUnits:()=>Jn,MeasureViewModel:()=>yb,Measurement:()=>go,MeasurementMouseHandler:()=>mb,MeasurementSettings:()=>_n,PointMeasurement:()=>Cb,PolygonDrawing:()=>lu,PolygonPrimitive:()=>cb,PolylineDrawing:()=>Ma,PolylineMeasurement:()=>_b,PolylineMeasurementDrawing:()=>Eb,PolylinePrimitive:()=>zr,RotationEditor:()=>xb,ScaleEditor:()=>Tb,SvgPathBindingHandler:()=>tE,TransformAxis:()=>On,TransformEditor:()=>Kj,TransformEditorViewModel:()=>wb,TranslationEditor:()=>Sb,VerticalMeasurement:()=>Ib,VisibilityState:()=>sb,VolumeUnits:()=>dr,createDomNode:()=>Wm,filterPickForMeasurement:()=>po,getScreenSpaceScalingMatrix:()=>oA,getSlope:()=>gb,getWidgetOrigin:()=>cA,getWorldPosition:()=>ca,knockout:()=>Hi,knockout_3_5_1:()=>Jm,knockout_es5:()=>hb,viewerMeasureMixin:()=>Xj});module.exports=sY(dTe);var CD="http://www.w3.org/2000/svg",ED="cesium-svgPath-svg",cY={register:function(e){e.bindingHandlers.cesiumSvgPath={init:function(t,n){let i=document.createElementNS(CD,"svg:svg");i.setAttribute("class",ED);let o=document.createElementNS(CD,"path");return i.appendChild(o),e.virtualElements.setDomNodeChildren(t,[i]),e.computed({read:function(){let r=e.unwrap(n());o.setAttribute("d",e.unwrap(r.path));let a=e.unwrap(r.width),s=e.unwrap(r.height);i.setAttribute("width",a),i.setAttribute("height",s),i.setAttribute("viewBox",`0 0 ${a} ${s}`),r.css&&i.setAttribute("class",`${ED} ${e.unwrap(r.css)}`)},disposeWhenNodeIsRemoved:t}),{controlsDescendantBindings:!0}}},e.virtualElements.allowedBindings.cesiumSvgPath=!0}},tE=cY;function AY(e){return e!=null}var c=AY;function Rf(e){this.name="DeveloperError",this.message=e;let t;try{throw new Error}catch(n){t=n.stack}this.stack=t}c(Object.create)&&(Rf.prototype=Object.create(Error.prototype),Rf.prototype.constructor=Rf);Rf.prototype.toString=function(){let e=`${this.name}: ${this.message}`;return c(this.stack)&&(e+=`
${this.stack.toString()}`),e};Rf.throwInstantiationError=function(){throw new Rf("This function defines an interface and should not be called directly.")};var be=Rf;var Ho={};Ho.typeOf={};function lY(e){return`${e} is required, actual value was undefined`}function th(e,t,n){return`Expected ${n} to be typeof ${t}, actual typeof was ${e}`}Ho.defined=function(e,t){if(!c(t))throw new be(lY(e))};Ho.typeOf.func=function(e,t){if(typeof t!="function")throw new be(th(typeof t,"function",e))};Ho.typeOf.string=function(e,t){if(typeof t!="string")throw new be(th(typeof t,"string",e))};Ho.typeOf.number=function(e,t){if(typeof t!="number")throw new be(th(typeof t,"number",e))};Ho.typeOf.number.lessThan=function(e,t,n){if(Ho.typeOf.number(e,t),t>=n)throw new be(`Expected ${e} to be less than ${n}, actual value was ${t}`)};Ho.typeOf.number.lessThanOrEquals=function(e,t,n){if(Ho.typeOf.number(e,t),t>n)throw new be(`Expected ${e} to be less than or equal to ${n}, actual value was ${t}`)};Ho.typeOf.number.greaterThan=function(e,t,n){if(Ho.typeOf.number(e,t),t<=n)throw new be(`Expected ${e} to be greater than ${n}, actual value was ${t}`)};Ho.typeOf.number.greaterThanOrEquals=function(e,t,n){if(Ho.typeOf.number(e,t),t<n)throw new be(`Expected ${e} to be greater than or equal to ${n}, actual value was ${t}`)};Ho.typeOf.object=function(e,t){if(typeof t!="object")throw new be(th(typeof t,"object",e))};Ho.typeOf.bool=function(e,t){if(typeof t!="boolean")throw new be(th(typeof t,"boolean",e))};Ho.typeOf.bigint=function(e,t){if(typeof t!="bigint")throw new be(th(typeof t,"bigint",e))};Ho.typeOf.number.equals=function(e,t,n,i){if(Ho.typeOf.number(e,n),Ho.typeOf.number(t,i),n!==i)throw new be(`${e} must be equal to ${t}, the actual values are ${n} and ${i}`)};var $n=Ho;var Lb=ls(Nb(),1);var Oe={};Oe.EPSILON1=.1;Oe.EPSILON2=.01;Oe.EPSILON3=.001;Oe.EPSILON4=1e-4;Oe.EPSILON5=1e-5;Oe.EPSILON6=1e-6;Oe.EPSILON7=1e-7;Oe.EPSILON8=1e-8;Oe.EPSILON9=1e-9;Oe.EPSILON10=1e-10;Oe.EPSILON11=1e-11;Oe.EPSILON12=1e-12;Oe.EPSILON13=1e-13;Oe.EPSILON14=1e-14;Oe.EPSILON15=1e-15;Oe.EPSILON16=1e-16;Oe.EPSILON17=1e-17;Oe.EPSILON18=1e-18;Oe.EPSILON19=1e-19;Oe.EPSILON20=1e-20;Oe.EPSILON21=1e-21;Oe.GRAVITATIONALPARAMETER=3986004418e5;Oe.SOLAR_RADIUS=6955e5;Oe.LUNAR_RADIUS=1737400;Oe.SIXTY_FOUR_KILOBYTES=64*1024;Oe.FOUR_GIGABYTES=4*1024*1024*1024;Oe.sign=Math.sign??function(t){return t=+t,t===0||t!==t?t:t>0?1:-1};Oe.signNotZero=function(e){return e<0?-1:1};Oe.toSNorm=function(e,t){return t=t??255,Math.round((Oe.clamp(e,-1,1)*.5+.5)*t)};Oe.fromSNorm=function(e,t){return t=t??255,Oe.clamp(e,0,t)/t*2-1};Oe.normalize=function(e,t,n){return n=Math.max(n-t,0),n===0?0:Oe.clamp((e-t)/n,0,1)};Oe.sinh=Math.sinh??function(t){return(Math.exp(t)-Math.exp(-t))/2};Oe.cosh=Math.cosh??function(t){return(Math.exp(t)+Math.exp(-t))/2};Oe.lerp=function(e,t,n){return(1-n)*e+n*t};Oe.PI=Math.PI;Oe.ONE_OVER_PI=1/Math.PI;Oe.PI_OVER_TWO=Math.PI/2;Oe.PI_OVER_THREE=Math.PI/3;Oe.PI_OVER_FOUR=Math.PI/4;Oe.PI_OVER_SIX=Math.PI/6;Oe.THREE_PI_OVER_TWO=3*Math.PI/2;Oe.TWO_PI=2*Math.PI;Oe.ONE_OVER_TWO_PI=1/(2*Math.PI);Oe.RADIANS_PER_DEGREE=Math.PI/180;Oe.DEGREES_PER_RADIAN=180/Math.PI;Oe.RADIANS_PER_ARCSECOND=Oe.RADIANS_PER_DEGREE/3600;Oe.toRadians=function(e){return e*Oe.RADIANS_PER_DEGREE};Oe.toDegrees=function(e){return e*Oe.DEGREES_PER_RADIAN};Oe.convertLongitudeRange=function(e){let t=Oe.TWO_PI,n=e-Math.floor(e/t)*t;return n<-Math.PI?n+t:n>=Math.PI?n-t:n};Oe.clampToLatitudeRange=function(e){return Oe.clamp(e,-1*Oe.PI_OVER_TWO,Oe.PI_OVER_TWO)};Oe.negativePiToPi=function(e){return e>=-Oe.PI&&e<=Oe.PI?e:Oe.zeroToTwoPi(e+Oe.PI)-Oe.PI};Oe.zeroToTwoPi=function(e){if(e>=0&&e<=Oe.TWO_PI)return e;let t=Oe.mod(e,Oe.TWO_PI);return Math.abs(t)<Oe.EPSILON14&&Math.abs(e)>Oe.EPSILON14?Oe.TWO_PI:t};Oe.mod=function(e,t){return Oe.sign(e)===Oe.sign(t)&&Math.abs(e)<Math.abs(t)?e:(e%t+t)%t};Oe.equalsEpsilon=function(e,t,n,i){n=n??0,i=i??n;let o=Math.abs(e-t);return o<=i||o<=n*Math.max(Math.abs(e),Math.abs(t))};Oe.lessThan=function(e,t,n){return e-t<-n};Oe.lessThanOrEquals=function(e,t,n){return e-t<n};Oe.greaterThan=function(e,t,n){return e-t>n};Oe.greaterThanOrEquals=function(e,t,n){return e-t>-n};var nE=[1];Oe.factorial=function(e){let t=nE.length;if(e>=t){let n=nE[t-1];for(let i=t;i<=e;i++){let o=n*i;nE.push(o),n=o}}return nE[e]};Oe.incrementWrap=function(e,t,n){return n=n??0,++e,e>t&&(e=n),e};Oe.isPowerOfTwo=function(e){return e!==0&&(e&e-1)===0};Oe.nextPowerOfTwo=function(e){return--e,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,++e,e};Oe.previousPowerOfTwo=function(e){return e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,e|=e>>32,e=(e>>>0)-(e>>>1),e};Oe.clamp=function(e,t,n){return e<t?t:e>n?n:e};var ID=new Lb.default;Oe.setRandomNumberSeed=function(e){ID=new Lb.default(e)};Oe.nextRandomNumber=function(){return ID.random()};Oe.randomBetween=function(e,t){return Oe.nextRandomNumber()*(t-e)+e};Oe.acosClamped=function(e){return Math.acos(Oe.clamp(e,-1,1))};Oe.asinClamped=function(e){return Math.asin(Oe.clamp(e,-1,1))};Oe.chordLength=function(e,t){return 2*t*Math.sin(e*.5)};Oe.logBase=function(e,t){return Math.log(e)/Math.log(t)};Oe.cbrt=Math.cbrt??function(t){let n=Math.pow(Math.abs(t),.3333333333333333);return t<0?-n:n};Oe.log2=Math.log2??function(t){return Math.log(t)*Math.LOG2E};Oe.fog=function(e,t){let n=e*t;return 1-Math.exp(-(n*n))};Oe.fastApproximateAtan=function(e){return e*(-.1784*Math.abs(e)-.0663*e*e+1.0301)};Oe.fastApproximateAtan2=function(e,t){let n,i=Math.abs(e);n=Math.abs(t);let o=Math.max(i,n);n=Math.min(i,n);let r=n/o;return i=Oe.fastApproximateAtan(r),i=Math.abs(t)>Math.abs(e)?Oe.PI_OVER_TWO-i:i,i=e<0?Oe.PI-i:i,i=t<0?-i:i,i};var S=Oe;function Te(e,t,n){this.x=e??0,this.y=t??0,this.z=n??0}Te.fromSpherical=function(e,t){c(t)||(t=new Te);let n=e.clock,i=e.cone,o=e.magnitude??1,r=o*Math.sin(i);return t.x=r*Math.cos(n),t.y=r*Math.sin(n),t.z=o*Math.cos(i),t};Te.fromElements=function(e,t,n,i){return c(i)?(i.x=e,i.y=t,i.z=n,i):new Te(e,t,n)};Te.clone=function(e,t){if(c(e))return c(t)?(t.x=e.x,t.y=e.y,t.z=e.z,t):new Te(e.x,e.y,e.z)};Te.fromCartesian4=Te.clone;Te.packedLength=3;Te.pack=function(e,t,n){return n=n??0,t[n++]=e.x,t[n++]=e.y,t[n]=e.z,t};Te.unpack=function(e,t,n){return t=t??0,c(n)||(n=new Te),n.x=e[t++],n.y=e[t++],n.z=e[t],n};Te.packArray=function(e,t){let n=e.length,i=n*3;c(t)?!Array.isArray(t)&&t.length!==i||t.length!==i&&(t.length=i):t=new Array(i);for(let o=0;o<n;++o)Te.pack(e[o],t,o*3);return t};Te.unpackArray=function(e,t){let n=e.length;c(t)?t.length=n/3:t=new Array(n/3);for(let i=0;i<n;i+=3){let o=i/3;t[o]=Te.unpack(e,i,t[o])}return t};Te.fromArray=Te.unpack;Te.maximumComponent=function(e){return Math.max(e.x,e.y,e.z)};Te.minimumComponent=function(e){return Math.min(e.x,e.y,e.z)};Te.minimumByComponent=function(e,t,n){return n.x=Math.min(e.x,t.x),n.y=Math.min(e.y,t.y),n.z=Math.min(e.z,t.z),n};Te.maximumByComponent=function(e,t,n){return n.x=Math.max(e.x,t.x),n.y=Math.max(e.y,t.y),n.z=Math.max(e.z,t.z),n};Te.clamp=function(e,t,n,i){let o=S.clamp(e.x,t.x,n.x),r=S.clamp(e.y,t.y,n.y),a=S.clamp(e.z,t.z,n.z);return i.x=o,i.y=r,i.z=a,i};Te.magnitudeSquared=function(e){return e.x*e.x+e.y*e.y+e.z*e.z};Te.magnitude=function(e){return Math.sqrt(Te.magnitudeSquared(e))};var oE=new Te;Te.distance=function(e,t){return Te.subtract(e,t,oE),Te.magnitude(oE)};Te.distanceSquared=function(e,t){return Te.subtract(e,t,oE),Te.magnitudeSquared(oE)};Te.normalize=function(e,t){let n=Te.magnitude(e);return t.x=e.x/n,t.y=e.y/n,t.z=e.z/n,t};Te.dot=function(e,t){return e.x*t.x+e.y*t.y+e.z*t.z};Te.multiplyComponents=function(e,t,n){return n.x=e.x*t.x,n.y=e.y*t.y,n.z=e.z*t.z,n};Te.divideComponents=function(e,t,n){return n.x=e.x/t.x,n.y=e.y/t.y,n.z=e.z/t.z,n};Te.add=function(e,t,n){return n.x=e.x+t.x,n.y=e.y+t.y,n.z=e.z+t.z,n};Te.subtract=function(e,t,n){return n.x=e.x-t.x,n.y=e.y-t.y,n.z=e.z-t.z,n};Te.multiplyByScalar=function(e,t,n){return n.x=e.x*t,n.y=e.y*t,n.z=e.z*t,n};Te.divideByScalar=function(e,t,n){return n.x=e.x/t,n.y=e.y/t,n.z=e.z/t,n};Te.negate=function(e,t){return t.x=-e.x,t.y=-e.y,t.z=-e.z,t};Te.abs=function(e,t){return t.x=Math.abs(e.x),t.y=Math.abs(e.y),t.z=Math.abs(e.z),t};var yD=new Te;Te.lerp=function(e,t,n,i){return Te.multiplyByScalar(t,n,yD),i=Te.multiplyByScalar(e,1-n,i),Te.add(yD,i,i)};var iE=new Te,Fb=new Te;Te.angleBetween=function(e,t){Te.normalize(e,iE),Te.normalize(t,Fb);let n=Te.dot(iE,Fb),i=Te.magnitude(Te.cross(iE,Fb,iE));return Math.atan2(i,n)};var uY=new Te;Te.mostOrthogonalAxis=function(e,t){let n=Te.normalize(e,uY);return Te.abs(n,n),n.x<=n.y?n.x<=n.z?t=Te.clone(Te.UNIT_X,t):t=Te.clone(Te.UNIT_Z,t):n.y<=n.z?t=Te.clone(Te.UNIT_Y,t):t=Te.clone(Te.UNIT_Z,t),t};Te.projectVector=function(e,t,n){let i=Te.dot(e,t)/Te.dot(t,t);return Te.multiplyByScalar(t,i,n)};Te.equals=function(e,t){return e===t||c(e)&&c(t)&&e.x===t.x&&e.y===t.y&&e.z===t.z};Te.equalsArray=function(e,t,n){return e.x===t[n]&&e.y===t[n+1]&&e.z===t[n+2]};Te.equalsEpsilon=function(e,t,n,i){return e===t||c(e)&&c(t)&&S.equalsEpsilon(e.x,t.x,n,i)&&S.equalsEpsilon(e.y,t.y,n,i)&&S.equalsEpsilon(e.z,t.z,n,i)};Te.cross=function(e,t,n){let i=e.x,o=e.y,r=e.z,a=t.x,s=t.y,A=t.z,l=o*A-r*s,d=r*a-i*A,m=i*s-o*a;return n.x=l,n.y=d,n.z=m,n};Te.midpoint=function(e,t,n){return n.x=(e.x+t.x)*.5,n.y=(e.y+t.y)*.5,n.z=(e.z+t.z)*.5,n};Te.fromDegrees=function(e,t,n,i,o){return e=S.toRadians(e),t=S.toRadians(t),Te.fromRadians(e,t,n,i,o)};var Os=new Te,nh=new Te;Te._ellipsoidRadiiSquared=new Te(6378137*6378137,6378137*6378137,6356752314245179e-9*6356752314245179e-9);Te.fromRadians=function(e,t,n,i,o){n=n??0;let r=c(i)?i.radiiSquared:Te._ellipsoidRadiiSquared,a=Math.cos(t);Os.x=a*Math.cos(e),Os.y=a*Math.sin(e),Os.z=Math.sin(t),Os=Te.normalize(Os,Os),Te.multiplyComponents(r,Os,nh);let s=Math.sqrt(Te.dot(Os,nh));return nh=Te.divideByScalar(nh,s,nh),Os=Te.multiplyByScalar(Os,n,Os),c(o)||(o=new Te),Te.add(nh,Os,o)};Te.fromDegreesArray=function(e,t,n){let i=e.length;c(n)?n.length=i/2:n=new Array(i/2);for(let o=0;o<i;o+=2){let r=e[o],a=e[o+1],s=o/2;n[s]=Te.fromDegrees(r,a,0,t,n[s])}return n};Te.fromRadiansArray=function(e,t,n){let i=e.length;c(n)?n.length=i/2:n=new Array(i/2);for(let o=0;o<i;o+=2){let r=e[o],a=e[o+1],s=o/2;n[s]=Te.fromRadians(r,a,0,t,n[s])}return n};Te.fromDegreesArrayHeights=function(e,t,n){let i=e.length;c(n)?n.length=i/3:n=new Array(i/3);for(let o=0;o<i;o+=3){let r=e[o],a=e[o+1],s=e[o+2],A=o/3;n[A]=Te.fromDegrees(r,a,s,t,n[A])}return n};Te.fromRadiansArrayHeights=function(e,t,n){let i=e.length;c(n)?n.length=i/3:n=new Array(i/3);for(let o=0;o<i;o+=3){let r=e[o],a=e[o+1],s=e[o+2],A=o/3;n[A]=Te.fromRadians(r,a,s,t,n[A])}return n};Te.ZERO=Object.freeze(new Te(0,0,0));Te.ONE=Object.freeze(new Te(1,1,1));Te.UNIT_X=Object.freeze(new Te(1,0,0));Te.UNIT_Y=Object.freeze(new Te(0,1,0));Te.UNIT_Z=Object.freeze(new Te(0,0,1));Te.prototype.clone=function(e){return Te.clone(this,e)};Te.prototype.equals=function(e){return Te.equals(this,e)};Te.prototype.equalsEpsilon=function(e,t,n){return Te.equalsEpsilon(this,e,t,n)};Te.prototype.toString=function(){return`(${this.x}, ${this.y}, ${this.z})`};var f=Te;function je(e,t,n,i){this.x=e??0,this.y=t??0,this.z=n??0,this.w=i??0}je.fromElements=function(e,t,n,i,o){return c(o)?(o.x=e,o.y=t,o.z=n,o.w=i,o):new je(e,t,n,i)};je.fromColor=function(e,t){return c(t)?(t.x=e.red,t.y=e.green,t.z=e.blue,t.w=e.alpha,t):new je(e.red,e.green,e.blue,e.alpha)};je.clone=function(e,t){if(c(e))return c(t)?(t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t):new je(e.x,e.y,e.z,e.w)};je.packedLength=4;je.pack=function(e,t,n){return n=n??0,t[n++]=e.x,t[n++]=e.y,t[n++]=e.z,t[n]=e.w,t};je.unpack=function(e,t,n){return t=t??0,c(n)||(n=new je),n.x=e[t++],n.y=e[t++],n.z=e[t++],n.w=e[t],n};je.packArray=function(e,t){let n=e.length,i=n*4;c(t)?!Array.isArray(t)&&t.length!==i||t.length!==i&&(t.length=i):t=new Array(i);for(let o=0;o<n;++o)je.pack(e[o],t,o*4);return t};je.unpackArray=function(e,t){let n=e.length;c(t)?t.length=n/4:t=new Array(n/4);for(let i=0;i<n;i+=4){let o=i/4;t[o]=je.unpack(e,i,t[o])}return t};je.fromArray=je.unpack;je.maximumComponent=function(e){return Math.max(e.x,e.y,e.z,e.w)};je.minimumComponent=function(e){return Math.min(e.x,e.y,e.z,e.w)};je.minimumByComponent=function(e,t,n){return n.x=Math.min(e.x,t.x),n.y=Math.min(e.y,t.y),n.z=Math.min(e.z,t.z),n.w=Math.min(e.w,t.w),n};je.maximumByComponent=function(e,t,n){return n.x=Math.max(e.x,t.x),n.y=Math.max(e.y,t.y),n.z=Math.max(e.z,t.z),n.w=Math.max(e.w,t.w),n};je.clamp=function(e,t,n,i){let o=S.clamp(e.x,t.x,n.x),r=S.clamp(e.y,t.y,n.y),a=S.clamp(e.z,t.z,n.z),s=S.clamp(e.w,t.w,n.w);return i.x=o,i.y=r,i.z=a,i.w=s,i};je.magnitudeSquared=function(e){return e.x*e.x+e.y*e.y+e.z*e.z+e.w*e.w};je.magnitude=function(e){return Math.sqrt(je.magnitudeSquared(e))};var rE=new je;je.distance=function(e,t){return je.subtract(e,t,rE),je.magnitude(rE)};je.distanceSquared=function(e,t){return je.subtract(e,t,rE),je.magnitudeSquared(rE)};je.normalize=function(e,t){let n=je.magnitude(e);return t.x=e.x/n,t.y=e.y/n,t.z=e.z/n,t.w=e.w/n,t};je.dot=function(e,t){return e.x*t.x+e.y*t.y+e.z*t.z+e.w*t.w};je.multiplyComponents=function(e,t,n){return n.x=e.x*t.x,n.y=e.y*t.y,n.z=e.z*t.z,n.w=e.w*t.w,n};je.divideComponents=function(e,t,n){return n.x=e.x/t.x,n.y=e.y/t.y,n.z=e.z/t.z,n.w=e.w/t.w,n};je.add=function(e,t,n){return n.x=e.x+t.x,n.y=e.y+t.y,n.z=e.z+t.z,n.w=e.w+t.w,n};je.subtract=function(e,t,n){return n.x=e.x-t.x,n.y=e.y-t.y,n.z=e.z-t.z,n.w=e.w-t.w,n};je.multiplyByScalar=function(e,t,n){return n.x=e.x*t,n.y=e.y*t,n.z=e.z*t,n.w=e.w*t,n};je.divideByScalar=function(e,t,n){return n.x=e.x/t,n.y=e.y/t,n.z=e.z/t,n.w=e.w/t,n};je.negate=function(e,t){return t.x=-e.x,t.y=-e.y,t.z=-e.z,t.w=-e.w,t};je.abs=function(e,t){return t.x=Math.abs(e.x),t.y=Math.abs(e.y),t.z=Math.abs(e.z),t.w=Math.abs(e.w),t};var bD=new je;je.lerp=function(e,t,n,i){return je.multiplyByScalar(t,n,bD),i=je.multiplyByScalar(e,1-n,i),je.add(bD,i,i)};var fY=new je;je.mostOrthogonalAxis=function(e,t){let n=je.normalize(e,fY);return je.abs(n,n),n.x<=n.y?n.x<=n.z?n.x<=n.w?t=je.clone(je.UNIT_X,t):t=je.clone(je.UNIT_W,t):n.z<=n.w?t=je.clone(je.UNIT_Z,t):t=je.clone(je.UNIT_W,t):n.y<=n.z?n.y<=n.w?t=je.clone(je.UNIT_Y,t):t=je.clone(je.UNIT_W,t):n.z<=n.w?t=je.clone(je.UNIT_Z,t):t=je.clone(je.UNIT_W,t),t};je.equals=function(e,t){return e===t||c(e)&&c(t)&&e.x===t.x&&e.y===t.y&&e.z===t.z&&e.w===t.w};je.equalsArray=function(e,t,n){return e.x===t[n]&&e.y===t[n+1]&&e.z===t[n+2]&&e.w===t[n+3]};je.equalsEpsilon=function(e,t,n,i){return e===t||c(e)&&c(t)&&S.equalsEpsilon(e.x,t.x,n,i)&&S.equalsEpsilon(e.y,t.y,n,i)&&S.equalsEpsilon(e.z,t.z,n,i)&&S.equalsEpsilon(e.w,t.w,n,i)};je.ZERO=Object.freeze(new je(0,0,0,0));je.ONE=Object.freeze(new je(1,1,1,1));je.UNIT_X=Object.freeze(new je(1,0,0,0));je.UNIT_Y=Object.freeze(new je(0,1,0,0));je.UNIT_Z=Object.freeze(new je(0,0,1,0));je.UNIT_W=Object.freeze(new je(0,0,0,1));je.prototype.clone=function(e){return je.clone(this,e)};je.prototype.equals=function(e){return je.equals(this,e)};je.prototype.equalsEpsilon=function(e,t,n){return je.equalsEpsilon(this,e,t,n)};je.prototype.toString=function(){return`(${this.x}, ${this.y}, ${this.z}, ${this.w})`};var Ob=new Float32Array(1),Vr=new Uint8Array(Ob.buffer),dY=new Uint32Array([287454020]),hY=new Uint8Array(dY.buffer),BD=hY[0]===68;je.packFloat=function(e,t){return c(t)||(t=new je),Ob[0]=e,BD?(t.x=Vr[0],t.y=Vr[1],t.z=Vr[2],t.w=Vr[3]):(t.x=Vr[3],t.y=Vr[2],t.z=Vr[1],t.w=Vr[0]),t};je.unpackFloat=function(e){return BD?(Vr[0]=e.x,Vr[1]=e.y,Vr[2]=e.z,Vr[3]=e.w):(Vr[0]=e.w,Vr[1]=e.z,Vr[2]=e.y,Vr[3]=e.x),Ob[0]};var re=je;var kb={};kb.EMPTY_OBJECT=Object.freeze({});kb.EMPTY_ARRAY=Object.freeze([]);var G=kb;function we(e,t,n,i,o,r,a,s,A){this[0]=e??0,this[1]=i??0,this[2]=a??0,this[3]=t??0,this[4]=o??0,this[5]=s??0,this[6]=n??0,this[7]=r??0,this[8]=A??0}we.packedLength=9;we.pack=function(e,t,n){return n=n??0,t[n++]=e[0],t[n++]=e[1],t[n++]=e[2],t[n++]=e[3],t[n++]=e[4],t[n++]=e[5],t[n++]=e[6],t[n++]=e[7],t[n++]=e[8],t};we.unpack=function(e,t,n){return t=t??0,c(n)||(n=new we),n[0]=e[t++],n[1]=e[t++],n[2]=e[t++],n[3]=e[t++],n[4]=e[t++],n[5]=e[t++],n[6]=e[t++],n[7]=e[t++],n[8]=e[t++],n};we.packArray=function(e,t){let n=e.length,i=n*9;c(t)?!Array.isArray(t)&&t.length!==i||t.length!==i&&(t.length=i):t=new Array(i);for(let o=0;o<n;++o)we.pack(e[o],t,o*9);return t};we.unpackArray=function(e,t){let n=e.length;c(t)?t.length=n/9:t=new Array(n/9);for(let i=0;i<n;i+=9){let o=i/9;t[o]=we.unpack(e,i,t[o])}return t};we.clone=function(e,t){if(c(e))return c(t)?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t):new we(e[0],e[3],e[6],e[1],e[4],e[7],e[2],e[5],e[8])};we.fromArray=we.unpack;we.fromColumnMajorArray=function(e,t){return we.clone(e,t)};we.fromRowMajorArray=function(e,t){return c(t)?(t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],t):new we(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8])};we.fromQuaternion=function(e,t){let n=e.x*e.x,i=e.x*e.y,o=e.x*e.z,r=e.x*e.w,a=e.y*e.y,s=e.y*e.z,A=e.y*e.w,l=e.z*e.z,d=e.z*e.w,m=e.w*e.w,p=n-a-l+m,g=2*(i-d),h=2*(o+A),C=2*(i+d),_=-n+a-l+m,I=2*(s-r),b=2*(o-A),x=2*(s+r),T=-n-a+l+m;return c(t)?(t[0]=p,t[1]=C,t[2]=b,t[3]=g,t[4]=_,t[5]=x,t[6]=h,t[7]=I,t[8]=T,t):new we(p,g,h,C,_,I,b,x,T)};we.fromHeadingPitchRoll=function(e,t){let n=Math.cos(-e.pitch),i=Math.cos(-e.heading),o=Math.cos(e.roll),r=Math.sin(-e.pitch),a=Math.sin(-e.heading),s=Math.sin(e.roll),A=n*i,l=-o*a+s*r*i,d=s*a+o*r*i,m=n*a,p=o*i+s*r*a,g=-s*i+o*r*a,h=-r,C=s*n,_=o*n;return c(t)?(t[0]=A,t[1]=m,t[2]=h,t[3]=l,t[4]=p,t[5]=C,t[6]=d,t[7]=g,t[8]=_,t):new we(A,l,d,m,p,g,h,C,_)};we.fromScale=function(e,t){return c(t)?(t[0]=e.x,t[1]=0,t[2]=0,t[3]=0,t[4]=e.y,t[5]=0,t[6]=0,t[7]=0,t[8]=e.z,t):new we(e.x,0,0,0,e.y,0,0,0,e.z)};we.fromUniformScale=function(e,t){return c(t)?(t[0]=e,t[1]=0,t[2]=0,t[3]=0,t[4]=e,t[5]=0,t[6]=0,t[7]=0,t[8]=e,t):new we(e,0,0,0,e,0,0,0,e)};we.fromCrossProduct=function(e,t){return c(t)?(t[0]=0,t[1]=e.z,t[2]=-e.y,t[3]=-e.z,t[4]=0,t[5]=e.x,t[6]=e.y,t[7]=-e.x,t[8]=0,t):new we(0,-e.z,e.y,e.z,0,-e.x,-e.y,e.x,0)};we.fromRotationX=function(e,t){let n=Math.cos(e),i=Math.sin(e);return c(t)?(t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=n,t[5]=i,t[6]=0,t[7]=-i,t[8]=n,t):new we(1,0,0,0,n,-i,0,i,n)};we.fromRotationY=function(e,t){let n=Math.cos(e),i=Math.sin(e);return c(t)?(t[0]=n,t[1]=0,t[2]=-i,t[3]=0,t[4]=1,t[5]=0,t[6]=i,t[7]=0,t[8]=n,t):new we(n,0,i,0,1,0,-i,0,n)};we.fromRotationZ=function(e,t){let n=Math.cos(e),i=Math.sin(e);return c(t)?(t[0]=n,t[1]=i,t[2]=0,t[3]=-i,t[4]=n,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t):new we(n,-i,0,i,n,0,0,0,1)};we.toArray=function(e,t){return c(t)?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t):[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8]]};we.getElementIndex=function(e,t){return e*3+t};we.getColumn=function(e,t,n){let i=t*3,o=e[i],r=e[i+1],a=e[i+2];return n.x=o,n.y=r,n.z=a,n};we.setColumn=function(e,t,n,i){i=we.clone(e,i);let o=t*3;return i[o]=n.x,i[o+1]=n.y,i[o+2]=n.z,i};we.getRow=function(e,t,n){let i=e[t],o=e[t+3],r=e[t+6];return n.x=i,n.y=o,n.z=r,n};we.setRow=function(e,t,n,i){return i=we.clone(e,i),i[t]=n.x,i[t+3]=n.y,i[t+6]=n.z,i};var mY=new f;we.setScale=function(e,t,n){let i=we.getScale(e,mY),o=t.x/i.x,r=t.y/i.y,a=t.z/i.z;return n[0]=e[0]*o,n[1]=e[1]*o,n[2]=e[2]*o,n[3]=e[3]*r,n[4]=e[4]*r,n[5]=e[5]*r,n[6]=e[6]*a,n[7]=e[7]*a,n[8]=e[8]*a,n};var pY=new f;we.setUniformScale=function(e,t,n){let i=we.getScale(e,pY),o=t/i.x,r=t/i.y,a=t/i.z;return n[0]=e[0]*o,n[1]=e[1]*o,n[2]=e[2]*o,n[3]=e[3]*r,n[4]=e[4]*r,n[5]=e[5]*r,n[6]=e[6]*a,n[7]=e[7]*a,n[8]=e[8]*a,n};var Ub=new f;we.getScale=function(e,t){return t.x=f.magnitude(f.fromElements(e[0],e[1],e[2],Ub)),t.y=f.magnitude(f.fromElements(e[3],e[4],e[5],Ub)),t.z=f.magnitude(f.fromElements(e[6],e[7],e[8],Ub)),t};var xD=new f;we.getMaximumScale=function(e){return we.getScale(e,xD),f.maximumComponent(xD)};var gY=new f;we.setRotation=function(e,t,n){let i=we.getScale(e,gY);return n[0]=t[0]*i.x,n[1]=t[1]*i.x,n[2]=t[2]*i.x,n[3]=t[3]*i.y,n[4]=t[4]*i.y,n[5]=t[5]*i.y,n[6]=t[6]*i.z,n[7]=t[7]*i.z,n[8]=t[8]*i.z,n};var CY=new f;we.getRotation=function(e,t){let n=we.getScale(e,CY);return t[0]=e[0]/n.x,t[1]=e[1]/n.x,t[2]=e[2]/n.x,t[3]=e[3]/n.y,t[4]=e[4]/n.y,t[5]=e[5]/n.y,t[6]=e[6]/n.z,t[7]=e[7]/n.z,t[8]=e[8]/n.z,t};we.multiply=function(e,t,n){let i=e[0]*t[0]+e[3]*t[1]+e[6]*t[2],o=e[1]*t[0]+e[4]*t[1]+e[7]*t[2],r=e[2]*t[0]+e[5]*t[1]+e[8]*t[2],a=e[0]*t[3]+e[3]*t[4]+e[6]*t[5],s=e[1]*t[3]+e[4]*t[4]+e[7]*t[5],A=e[2]*t[3]+e[5]*t[4]+e[8]*t[5],l=e[0]*t[6]+e[3]*t[7]+e[6]*t[8],d=e[1]*t[6]+e[4]*t[7]+e[7]*t[8],m=e[2]*t[6]+e[5]*t[7]+e[8]*t[8];return n[0]=i,n[1]=o,n[2]=r,n[3]=a,n[4]=s,n[5]=A,n[6]=l,n[7]=d,n[8]=m,n};we.add=function(e,t,n){return n[0]=e[0]+t[0],n[1]=e[1]+t[1],n[2]=e[2]+t[2],n[3]=e[3]+t[3],n[4]=e[4]+t[4],n[5]=e[5]+t[5],n[6]=e[6]+t[6],n[7]=e[7]+t[7],n[8]=e[8]+t[8],n};we.subtract=function(e,t,n){return n[0]=e[0]-t[0],n[1]=e[1]-t[1],n[2]=e[2]-t[2],n[3]=e[3]-t[3],n[4]=e[4]-t[4],n[5]=e[5]-t[5],n[6]=e[6]-t[6],n[7]=e[7]-t[7],n[8]=e[8]-t[8],n};we.multiplyByVector=function(e,t,n){let i=t.x,o=t.y,r=t.z,a=e[0]*i+e[3]*o+e[6]*r,s=e[1]*i+e[4]*o+e[7]*r,A=e[2]*i+e[5]*o+e[8]*r;return n.x=a,n.y=s,n.z=A,n};we.multiplyByScalar=function(e,t,n){return n[0]=e[0]*t,n[1]=e[1]*t,n[2]=e[2]*t,n[3]=e[3]*t,n[4]=e[4]*t,n[5]=e[5]*t,n[6]=e[6]*t,n[7]=e[7]*t,n[8]=e[8]*t,n};we.multiplyByScale=function(e,t,n){return n[0]=e[0]*t.x,n[1]=e[1]*t.x,n[2]=e[2]*t.x,n[3]=e[3]*t.y,n[4]=e[4]*t.y,n[5]=e[5]*t.y,n[6]=e[6]*t.z,n[7]=e[7]*t.z,n[8]=e[8]*t.z,n};we.multiplyByUniformScale=function(e,t,n){return n[0]=e[0]*t,n[1]=e[1]*t,n[2]=e[2]*t,n[3]=e[3]*t,n[4]=e[4]*t,n[5]=e[5]*t,n[6]=e[6]*t,n[7]=e[7]*t,n[8]=e[8]*t,n};we.negate=function(e,t){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=-e[7],t[8]=-e[8],t};we.transpose=function(e,t){let n=e[0],i=e[3],o=e[6],r=e[1],a=e[4],s=e[7],A=e[2],l=e[5],d=e[8];return t[0]=n,t[1]=i,t[2]=o,t[3]=r,t[4]=a,t[5]=s,t[6]=A,t[7]=l,t[8]=d,t};function EY(e){let t=0;for(let n=0;n<9;++n){let i=e[n];t+=i*i}return Math.sqrt(t)}var zb=[1,0,0],Gb=[2,2,1];function _Y(e){let t=0;for(let n=0;n<3;++n){let i=e[we.getElementIndex(Gb[n],zb[n])];t+=2*i*i}return Math.sqrt(t)}function IY(e,t){let n=S.EPSILON15,i=0,o=1;for(let l=0;l<3;++l){let d=Math.abs(e[we.getElementIndex(Gb[l],zb[l])]);d>i&&(o=l,i=d)}let r=1,a=0,s=zb[o],A=Gb[o];if(Math.abs(e[we.getElementIndex(A,s)])>n){let l=e[we.getElementIndex(A,A)],d=e[we.getElementIndex(s,s)],m=e[we.getElementIndex(A,s)],p=(l-d)/2/m,g;p<0?g=-1/(-p+Math.sqrt(1+p*p)):g=1/(p+Math.sqrt(1+p*p)),r=1/Math.sqrt(1+g*g),a=g*r}return t=we.clone(we.IDENTITY,t),t[we.getElementIndex(s,s)]=t[we.getElementIndex(A,A)]=r,t[we.getElementIndex(A,s)]=a,t[we.getElementIndex(s,A)]=-a,t}var aE=new we,TD=new we;we.computeEigenDecomposition=function(e,t){let n=S.EPSILON20,i=10,o=0,r=0;c(t)||(t={});let a=t.unitary=we.clone(we.IDENTITY,t.unitary),s=t.diagonal=we.clone(e,t.diagonal),A=n*EY(s);for(;r<i&&_Y(s)>A;)IY(s,aE),we.transpose(aE,TD),we.multiply(s,aE,s),we.multiply(TD,s,s),we.multiply(a,aE,a),++o>2&&(++r,o=0);return t};we.abs=function(e,t){return t[0]=Math.abs(e[0]),t[1]=Math.abs(e[1]),t[2]=Math.abs(e[2]),t[3]=Math.abs(e[3]),t[4]=Math.abs(e[4]),t[5]=Math.abs(e[5]),t[6]=Math.abs(e[6]),t[7]=Math.abs(e[7]),t[8]=Math.abs(e[8]),t};we.determinant=function(e){let t=e[0],n=e[3],i=e[6],o=e[1],r=e[4],a=e[7],s=e[2],A=e[5],l=e[8];return t*(r*l-A*a)+o*(A*i-n*l)+s*(n*a-r*i)};we.inverse=function(e,t){let n=e[0],i=e[1],o=e[2],r=e[3],a=e[4],s=e[5],A=e[6],l=e[7],d=e[8],m=we.determinant(e);t[0]=a*d-l*s,t[1]=l*o-i*d,t[2]=i*s-a*o,t[3]=A*s-r*d,t[4]=n*d-A*o,t[5]=r*o-n*s,t[6]=r*l-A*a,t[7]=A*i-n*l,t[8]=n*a-r*i;let p=1/m;return we.multiplyByScalar(t,p,t)};var yY=new we;we.inverseTranspose=function(e,t){return we.inverse(we.transpose(e,yY),t)};we.equals=function(e,t){return e===t||c(e)&&c(t)&&e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]};we.equalsEpsilon=function(e,t,n){return n=n??0,e===t||c(e)&&c(t)&&Math.abs(e[0]-t[0])<=n&&Math.abs(e[1]-t[1])<=n&&Math.abs(e[2]-t[2])<=n&&Math.abs(e[3]-t[3])<=n&&Math.abs(e[4]-t[4])<=n&&Math.abs(e[5]-t[5])<=n&&Math.abs(e[6]-t[6])<=n&&Math.abs(e[7]-t[7])<=n&&Math.abs(e[8]-t[8])<=n};we.IDENTITY=Object.freeze(new we(1,0,0,0,1,0,0,0,1));we.ZERO=Object.freeze(new we(0,0,0,0,0,0,0,0,0));we.COLUMN0ROW0=0;we.COLUMN0ROW1=1;we.COLUMN0ROW2=2;we.COLUMN1ROW0=3;we.COLUMN1ROW1=4;we.COLUMN1ROW2=5;we.COLUMN2ROW0=6;we.COLUMN2ROW1=7;we.COLUMN2ROW2=8;Object.defineProperties(we.prototype,{length:{get:function(){return we.packedLength}}});we.prototype.clone=function(e){return we.clone(this,e)};we.prototype.equals=function(e){return we.equals(this,e)};we.equalsArray=function(e,t,n){return e[0]===t[n]&&e[1]===t[n+1]&&e[2]===t[n+2]&&e[3]===t[n+3]&&e[4]===t[n+4]&&e[5]===t[n+5]&&e[6]===t[n+6]&&e[7]===t[n+7]&&e[8]===t[n+8]};we.prototype.equalsEpsilon=function(e,t){return we.equalsEpsilon(this,e,t)};we.prototype.toString=function(){return`(${this[0]}, ${this[3]}, ${this[6]})
(${this[1]}, ${this[4]}, ${this[7]})
(${this[2]}, ${this[5]}, ${this[8]})`};var ne=we;function ep(e){this.name="RuntimeError",this.message=e;let t;try{throw new Error}catch(n){t=n.stack}this.stack=t}c(Object.create)&&(ep.prototype=Object.create(Error.prototype),ep.prototype.constructor=ep);ep.prototype.toString=function(){let e=`${this.name}: ${this.message}`;return c(this.stack)&&(e+=`
${this.stack.toString()}`),e};var ae=ep;function Se(e,t,n,i,o,r,a,s,A,l,d,m,p,g,h,C){this[0]=e??0,this[1]=o??0,this[2]=A??0,this[3]=p??0,this[4]=t??0,this[5]=r??0,this[6]=l??0,this[7]=g??0,this[8]=n??0,this[9]=a??0,this[10]=d??0,this[11]=h??0,this[12]=i??0,this[13]=s??0,this[14]=m??0,this[15]=C??0}Se.packedLength=16;Se.pack=function(e,t,n){return n=n??0,t[n++]=e[0],t[n++]=e[1],t[n++]=e[2],t[n++]=e[3],t[n++]=e[4],t[n++]=e[5],t[n++]=e[6],t[n++]=e[7],t[n++]=e[8],t[n++]=e[9],t[n++]=e[10],t[n++]=e[11],t[n++]=e[12],t[n++]=e[13],t[n++]=e[14],t[n]=e[15],t};Se.unpack=function(e,t,n){return t=t??0,c(n)||(n=new Se),n[0]=e[t++],n[1]=e[t++],n[2]=e[t++],n[3]=e[t++],n[4]=e[t++],n[5]=e[t++],n[6]=e[t++],n[7]=e[t++],n[8]=e[t++],n[9]=e[t++],n[10]=e[t++],n[11]=e[t++],n[12]=e[t++],n[13]=e[t++],n[14]=e[t++],n[15]=e[t],n};Se.packArray=function(e,t){let n=e.length,i=n*16;c(t)?!Array.isArray(t)&&t.length!==i||t.length!==i&&(t.length=i):t=new Array(i);for(let o=0;o<n;++o)Se.pack(e[o],t,o*16);return t};Se.unpackArray=function(e,t){let n=e.length;c(t)?t.length=n/16:t=new Array(n/16);for(let i=0;i<n;i+=16){let o=i/16;t[o]=Se.unpack(e,i,t[o])}return t};Se.clone=function(e,t){if(c(e))return c(t)?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t):new Se(e[0],e[4],e[8],e[12],e[1],e[5],e[9],e[13],e[2],e[6],e[10],e[14],e[3],e[7],e[11],e[15])};Se.fromArray=Se.unpack;Se.fromColumnMajorArray=function(e,t){return Se.clone(e,t)};Se.fromRowMajorArray=function(e,t){return c(t)?(t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15],t):new Se(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])};Se.fromRotationTranslation=function(e,t,n){return t=t??f.ZERO,c(n)?(n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=0,n[4]=e[3],n[5]=e[4],n[6]=e[5],n[7]=0,n[8]=e[6],n[9]=e[7],n[10]=e[8],n[11]=0,n[12]=t.x,n[13]=t.y,n[14]=t.z,n[15]=1,n):new Se(e[0],e[3],e[6],t.x,e[1],e[4],e[7],t.y,e[2],e[5],e[8],t.z,0,0,0,1)};Se.fromTranslationQuaternionRotationScale=function(e,t,n,i){c(i)||(i=new Se);let o=n.x,r=n.y,a=n.z,s=t.x*t.x,A=t.x*t.y,l=t.x*t.z,d=t.x*t.w,m=t.y*t.y,p=t.y*t.z,g=t.y*t.w,h=t.z*t.z,C=t.z*t.w,_=t.w*t.w,I=s-m-h+_,b=2*(A-C),x=2*(l+g),T=2*(A+C),w=-s+m-h+_,R=2*(p-d),z=2*(l-g),M=2*(p+d),N=-s-m+h+_;return i[0]=I*o,i[1]=T*o,i[2]=z*o,i[3]=0,i[4]=b*r,i[5]=w*r,i[6]=M*r,i[7]=0,i[8]=x*a,i[9]=R*a,i[10]=N*a,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,i};Se.fromTranslationRotationScale=function(e,t){return Se.fromTranslationQuaternionRotationScale(e.translation,e.rotation,e.scale,t)};Se.fromTranslation=function(e,t){return Se.fromRotationTranslation(ne.IDENTITY,e,t)};Se.fromScale=function(e,t){return c(t)?(t[0]=e.x,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e.y,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e.z,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t):new Se(e.x,0,0,0,0,e.y,0,0,0,0,e.z,0,0,0,0,1)};Se.fromUniformScale=function(e,t){return c(t)?(t[0]=e,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t):new Se(e,0,0,0,0,e,0,0,0,0,e,0,0,0,0,1)};Se.fromRotation=function(e,t){return c(t)||(t=new Se),t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=0,t[4]=e[3],t[5]=e[4],t[6]=e[5],t[7]=0,t[8]=e[6],t[9]=e[7],t[10]=e[8],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t};var ih=new f,oh=new f,tp=new f;Se.fromCamera=function(e,t){let n=e.position,i=e.direction,o=e.up;f.normalize(i,ih),f.normalize(f.cross(ih,o,oh),oh),f.normalize(f.cross(oh,ih,tp),tp);let r=oh.x,a=oh.y,s=oh.z,A=ih.x,l=ih.y,d=ih.z,m=tp.x,p=tp.y,g=tp.z,h=n.x,C=n.y,_=n.z,I=r*-h+a*-C+s*-_,b=m*-h+p*-C+g*-_,x=A*h+l*C+d*_;return c(t)?(t[0]=r,t[1]=m,t[2]=-A,t[3]=0,t[4]=a,t[5]=p,t[6]=-l,t[7]=0,t[8]=s,t[9]=g,t[10]=-d,t[11]=0,t[12]=I,t[13]=b,t[14]=x,t[15]=1,t):new Se(r,a,s,I,m,p,g,b,-A,-l,-d,x,0,0,0,1)};Se.computePerspectiveFieldOfView=function(e,t,n,i,o){let a=1/Math.tan(e*.5),s=a/t,A=(i+n)/(n-i),l=2*i*n/(n-i);return o[0]=s,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=a,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=A,o[11]=-1,o[12]=0,o[13]=0,o[14]=l,o[15]=0,o};Se.computeOrthographicOffCenter=function(e,t,n,i,o,r,a){let s=1/(t-e),A=1/(i-n),l=1/(r-o),d=-(t+e)*s,m=-(i+n)*A,p=-(r+o)*l;return s*=2,A*=2,l*=-2,a[0]=s,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=A,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=l,a[11]=0,a[12]=d,a[13]=m,a[14]=p,a[15]=1,a};Se.computePerspectiveOffCenter=function(e,t,n,i,o,r,a){let s=2*o/(t-e),A=2*o/(i-n),l=(t+e)/(t-e),d=(i+n)/(i-n),m=-(r+o)/(r-o),p=-1,g=-2*r*o/(r-o);return a[0]=s,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=A,a[6]=0,a[7]=0,a[8]=l,a[9]=d,a[10]=m,a[11]=p,a[12]=0,a[13]=0,a[14]=g,a[15]=0,a};Se.computeInfinitePerspectiveOffCenter=function(e,t,n,i,o,r){let a=2*o/(t-e),s=2*o/(i-n),A=(t+e)/(t-e),l=(i+n)/(i-n),d=-1,m=-1,p=-2*o;return r[0]=a,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=s,r[6]=0,r[7]=0,r[8]=A,r[9]=l,r[10]=d,r[11]=m,r[12]=0,r[13]=0,r[14]=p,r[15]=0,r};Se.computeViewportTransformation=function(e,t,n,i){c(i)||(i=new Se),e=e??G.EMPTY_OBJECT;let o=e.x??0,r=e.y??0,a=e.width??0,s=e.height??0;t=t??0,n=n??1;let A=a*.5,l=s*.5,d=(n-t)*.5,m=A,p=l,g=d,h=o+A,C=r+l,_=t+d,I=1;return i[0]=m,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=p,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=g,i[11]=0,i[12]=h,i[13]=C,i[14]=_,i[15]=I,i};Se.computeView=function(e,t,n,i,o){return o[0]=i.x,o[1]=n.x,o[2]=-t.x,o[3]=0,o[4]=i.y,o[5]=n.y,o[6]=-t.y,o[7]=0,o[8]=i.z,o[9]=n.z,o[10]=-t.z,o[11]=0,o[12]=-f.dot(i,e),o[13]=-f.dot(n,e),o[14]=f.dot(t,e),o[15]=1,o};Se.toArray=function(e,t){return c(t)?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t):[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15]]};Se.getElementIndex=function(e,t){return e*4+t};Se.getColumn=function(e,t,n){let i=t*4,o=e[i],r=e[i+1],a=e[i+2],s=e[i+3];return n.x=o,n.y=r,n.z=a,n.w=s,n};Se.setColumn=function(e,t,n,i){i=Se.clone(e,i);let o=t*4;return i[o]=n.x,i[o+1]=n.y,i[o+2]=n.z,i[o+3]=n.w,i};Se.getRow=function(e,t,n){let i=e[t],o=e[t+4],r=e[t+8],a=e[t+12];return n.x=i,n.y=o,n.z=r,n.w=a,n};Se.setRow=function(e,t,n,i){return i=Se.clone(e,i),i[t]=n.x,i[t+4]=n.y,i[t+8]=n.z,i[t+12]=n.w,i};Se.setTranslation=function(e,t,n){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n[8]=e[8],n[9]=e[9],n[10]=e[10],n[11]=e[11],n[12]=t.x,n[13]=t.y,n[14]=t.z,n[15]=e[15],n};var bY=new f;Se.setScale=function(e,t,n){let i=Se.getScale(e,bY),o=t.x/i.x,r=t.y/i.y,a=t.z/i.z;return n[0]=e[0]*o,n[1]=e[1]*o,n[2]=e[2]*o,n[3]=e[3],n[4]=e[4]*r,n[5]=e[5]*r,n[6]=e[6]*r,n[7]=e[7],n[8]=e[8]*a,n[9]=e[9]*a,n[10]=e[10]*a,n[11]=e[11],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15],n};var BY=new f;Se.setUniformScale=function(e,t,n){let i=Se.getScale(e,BY),o=t/i.x,r=t/i.y,a=t/i.z;return n[0]=e[0]*o,n[1]=e[1]*o,n[2]=e[2]*o,n[3]=e[3],n[4]=e[4]*r,n[5]=e[5]*r,n[6]=e[6]*r,n[7]=e[7],n[8]=e[8]*a,n[9]=e[9]*a,n[10]=e[10]*a,n[11]=e[11],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15],n};var Hb=new f;Se.getScale=function(e,t){return t.x=f.magnitude(f.fromElements(e[0],e[1],e[2],Hb)),t.y=f.magnitude(f.fromElements(e[4],e[5],e[6],Hb)),t.z=f.magnitude(f.fromElements(e[8],e[9],e[10],Hb)),t};var SD=new f;Se.getMaximumScale=function(e){return Se.getScale(e,SD),f.maximumComponent(SD)};var xY=new f;Se.setRotation=function(e,t,n){let i=Se.getScale(e,xY);return n[0]=t[0]*i.x,n[1]=t[1]*i.x,n[2]=t[2]*i.x,n[3]=e[3],n[4]=t[3]*i.y,n[5]=t[4]*i.y,n[6]=t[5]*i.y,n[7]=e[7],n[8]=t[6]*i.z,n[9]=t[7]*i.z,n[10]=t[8]*i.z,n[11]=e[11],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15],n};var TY=new f;Se.getRotation=function(e,t){let n=Se.getScale(e,TY);return t[0]=e[0]/n.x,t[1]=e[1]/n.x,t[2]=e[2]/n.x,t[3]=e[4]/n.y,t[4]=e[5]/n.y,t[5]=e[6]/n.y,t[6]=e[8]/n.z,t[7]=e[9]/n.z,t[8]=e[10]/n.z,t};Se.multiply=function(e,t,n){let i=e[0],o=e[1],r=e[2],a=e[3],s=e[4],A=e[5],l=e[6],d=e[7],m=e[8],p=e[9],g=e[10],h=e[11],C=e[12],_=e[13],I=e[14],b=e[15],x=t[0],T=t[1],w=t[2],R=t[3],z=t[4],M=t[5],N=t[6],O=t[7],u=t[8],E=t[9],y=t[10],B=t[11],D=t[12],v=t[13],F=t[14],P=t[15],U=i*x+s*T+m*w+C*R,k=o*x+A*T+p*w+_*R,j=r*x+l*T+g*w+I*R,q=a*x+d*T+h*w+b*R,$=i*z+s*M+m*N+C*O,H=o*z+A*M+p*N+_*O,Z=r*z+l*M+g*N+I*O,ee=a*z+d*M+h*N+b*O,Ae=i*u+s*E+m*y+C*B,ge=o*u+A*E+p*y+_*B,ce=r*u+l*E+g*y+I*B,he=a*u+d*E+h*y+b*B,Ie=i*D+s*v+m*F+C*P,Ne=o*D+A*v+p*F+_*P,_e=r*D+l*v+g*F+I*P,ve=a*D+d*v+h*F+b*P;return n[0]=U,n[1]=k,n[2]=j,n[3]=q,n[4]=$,n[5]=H,n[6]=Z,n[7]=ee,n[8]=Ae,n[9]=ge,n[10]=ce,n[11]=he,n[12]=Ie,n[13]=Ne,n[14]=_e,n[15]=ve,n};Se.add=function(e,t,n){return n[0]=e[0]+t[0],n[1]=e[1]+t[1],n[2]=e[2]+t[2],n[3]=e[3]+t[3],n[4]=e[4]+t[4],n[5]=e[5]+t[5],n[6]=e[6]+t[6],n[7]=e[7]+t[7],n[8]=e[8]+t[8],n[9]=e[9]+t[9],n[10]=e[10]+t[10],n[11]=e[11]+t[11],n[12]=e[12]+t[12],n[13]=e[13]+t[13],n[14]=e[14]+t[14],n[15]=e[15]+t[15],n};Se.subtract=function(e,t,n){return n[0]=e[0]-t[0],n[1]=e[1]-t[1],n[2]=e[2]-t[2],n[3]=e[3]-t[3],n[4]=e[4]-t[4],n[5]=e[5]-t[5],n[6]=e[6]-t[6],n[7]=e[7]-t[7],n[8]=e[8]-t[8],n[9]=e[9]-t[9],n[10]=e[10]-t[10],n[11]=e[11]-t[11],n[12]=e[12]-t[12],n[13]=e[13]-t[13],n[14]=e[14]-t[14],n[15]=e[15]-t[15],n};Se.multiplyTransformation=function(e,t,n){let i=e[0],o=e[1],r=e[2],a=e[4],s=e[5],A=e[6],l=e[8],d=e[9],m=e[10],p=e[12],g=e[13],h=e[14],C=t[0],_=t[1],I=t[2],b=t[4],x=t[5],T=t[6],w=t[8],R=t[9],z=t[10],M=t[12],N=t[13],O=t[14],u=i*C+a*_+l*I,E=o*C+s*_+d*I,y=r*C+A*_+m*I,B=i*b+a*x+l*T,D=o*b+s*x+d*T,v=r*b+A*x+m*T,F=i*w+a*R+l*z,P=o*w+s*R+d*z,U=r*w+A*R+m*z,k=i*M+a*N+l*O+p,j=o*M+s*N+d*O+g,q=r*M+A*N+m*O+h;return n[0]=u,n[1]=E,n[2]=y,n[3]=0,n[4]=B,n[5]=D,n[6]=v,n[7]=0,n[8]=F,n[9]=P,n[10]=U,n[11]=0,n[12]=k,n[13]=j,n[14]=q,n[15]=1,n};Se.multiplyByMatrix3=function(e,t,n){let i=e[0],o=e[1],r=e[2],a=e[4],s=e[5],A=e[6],l=e[8],d=e[9],m=e[10],p=t[0],g=t[1],h=t[2],C=t[3],_=t[4],I=t[5],b=t[6],x=t[7],T=t[8],w=i*p+a*g+l*h,R=o*p+s*g+d*h,z=r*p+A*g+m*h,M=i*C+a*_+l*I,N=o*C+s*_+d*I,O=r*C+A*_+m*I,u=i*b+a*x+l*T,E=o*b+s*x+d*T,y=r*b+A*x+m*T;return n[0]=w,n[1]=R,n[2]=z,n[3]=0,n[4]=M,n[5]=N,n[6]=O,n[7]=0,n[8]=u,n[9]=E,n[10]=y,n[11]=0,n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15],n};Se.multiplyByTranslation=function(e,t,n){let i=t.x,o=t.y,r=t.z,a=i*e[0]+o*e[4]+r*e[8]+e[12],s=i*e[1]+o*e[5]+r*e[9]+e[13],A=i*e[2]+o*e[6]+r*e[10]+e[14];return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n[8]=e[8],n[9]=e[9],n[10]=e[10],n[11]=e[11],n[12]=a,n[13]=s,n[14]=A,n[15]=e[15],n};Se.multiplyByScale=function(e,t,n){let i=t.x,o=t.y,r=t.z;return i===1&&o===1&&r===1?Se.clone(e,n):(n[0]=i*e[0],n[1]=i*e[1],n[2]=i*e[2],n[3]=e[3],n[4]=o*e[4],n[5]=o*e[5],n[6]=o*e[6],n[7]=e[7],n[8]=r*e[8],n[9]=r*e[9],n[10]=r*e[10],n[11]=e[11],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15],n)};Se.multiplyByUniformScale=function(e,t,n){return n[0]=e[0]*t,n[1]=e[1]*t,n[2]=e[2]*t,n[3]=e[3],n[4]=e[4]*t,n[5]=e[5]*t,n[6]=e[6]*t,n[7]=e[7],n[8]=e[8]*t,n[9]=e[9]*t,n[10]=e[10]*t,n[11]=e[11],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15],n};Se.multiplyByVector=function(e,t,n){let i=t.x,o=t.y,r=t.z,a=t.w,s=e[0]*i+e[4]*o+e[8]*r+e[12]*a,A=e[1]*i+e[5]*o+e[9]*r+e[13]*a,l=e[2]*i+e[6]*o+e[10]*r+e[14]*a,d=e[3]*i+e[7]*o+e[11]*r+e[15]*a;return n.x=s,n.y=A,n.z=l,n.w=d,n};Se.multiplyByPointAsVector=function(e,t,n){let i=t.x,o=t.y,r=t.z,a=e[0]*i+e[4]*o+e[8]*r,s=e[1]*i+e[5]*o+e[9]*r,A=e[2]*i+e[6]*o+e[10]*r;return n.x=a,n.y=s,n.z=A,n};Se.multiplyByPoint=function(e,t,n){let i=t.x,o=t.y,r=t.z,a=e[0]*i+e[4]*o+e[8]*r+e[12],s=e[1]*i+e[5]*o+e[9]*r+e[13],A=e[2]*i+e[6]*o+e[10]*r+e[14];return n.x=a,n.y=s,n.z=A,n};Se.multiplyByScalar=function(e,t,n){return n[0]=e[0]*t,n[1]=e[1]*t,n[2]=e[2]*t,n[3]=e[3]*t,n[4]=e[4]*t,n[5]=e[5]*t,n[6]=e[6]*t,n[7]=e[7]*t,n[8]=e[8]*t,n[9]=e[9]*t,n[10]=e[10]*t,n[11]=e[11]*t,n[12]=e[12]*t,n[13]=e[13]*t,n[14]=e[14]*t,n[15]=e[15]*t,n};Se.negate=function(e,t){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=-e[7],t[8]=-e[8],t[9]=-e[9],t[10]=-e[10],t[11]=-e[11],t[12]=-e[12],t[13]=-e[13],t[14]=-e[14],t[15]=-e[15],t};Se.transpose=function(e,t){let n=e[1],i=e[2],o=e[3],r=e[6],a=e[7],s=e[11];return t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=i,t[9]=r,t[10]=e[10],t[11]=e[14],t[12]=o,t[13]=a,t[14]=s,t[15]=e[15],t};Se.abs=function(e,t){return t[0]=Math.abs(e[0]),t[1]=Math.abs(e[1]),t[2]=Math.abs(e[2]),t[3]=Math.abs(e[3]),t[4]=Math.abs(e[4]),t[5]=Math.abs(e[5]),t[6]=Math.abs(e[6]),t[7]=Math.abs(e[7]),t[8]=Math.abs(e[8]),t[9]=Math.abs(e[9]),t[10]=Math.abs(e[10]),t[11]=Math.abs(e[11]),t[12]=Math.abs(e[12]),t[13]=Math.abs(e[13]),t[14]=Math.abs(e[14]),t[15]=Math.abs(e[15]),t};Se.equals=function(e,t){return e===t||c(e)&&c(t)&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[3]===t[3]&&e[7]===t[7]&&e[11]===t[11]&&e[15]===t[15]};Se.equalsEpsilon=function(e,t,n){return n=n??0,e===t||c(e)&&c(t)&&Math.abs(e[0]-t[0])<=n&&Math.abs(e[1]-t[1])<=n&&Math.abs(e[2]-t[2])<=n&&Math.abs(e[3]-t[3])<=n&&Math.abs(e[4]-t[4])<=n&&Math.abs(e[5]-t[5])<=n&&Math.abs(e[6]-t[6])<=n&&Math.abs(e[7]-t[7])<=n&&Math.abs(e[8]-t[8])<=n&&Math.abs(e[9]-t[9])<=n&&Math.abs(e[10]-t[10])<=n&&Math.abs(e[11]-t[11])<=n&&Math.abs(e[12]-t[12])<=n&&Math.abs(e[13]-t[13])<=n&&Math.abs(e[14]-t[14])<=n&&Math.abs(e[15]-t[15])<=n};Se.getTranslation=function(e,t){return t.x=e[12],t.y=e[13],t.z=e[14],t};Se.getMatrix3=function(e,t){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t};var SY=new ne,wY=new ne,DY=new re,QY=new re(0,0,0,1);Se.inverse=function(e,t){let n=e[0],i=e[4],o=e[8],r=e[12],a=e[1],s=e[5],A=e[9],l=e[13],d=e[2],m=e[6],p=e[10],g=e[14],h=e[3],C=e[7],_=e[11],I=e[15],b=p*I,x=g*_,T=m*I,w=g*C,R=m*_,z=p*C,M=d*I,N=g*h,O=d*_,u=p*h,E=d*C,y=m*h,B=b*s+w*A+R*l-(x*s+T*A+z*l),D=x*a+M*A+u*l-(b*a+N*A+O*l),v=T*a+N*s+E*l-(w*a+M*s+y*l),F=z*a+O*s+y*A-(R*a+u*s+E*A),P=x*i+T*o+z*r-(b*i+w*o+R*r),U=b*n+N*o+O*r-(x*n+M*o+u*r),k=w*n+M*i+y*r-(T*n+N*i+E*r),j=R*n+u*i+E*o-(z*n+O*i+y*o);b=o*l,x=r*A,T=i*l,w=r*s,R=i*A,z=o*s,M=n*l,N=r*a,O=n*A,u=o*a,E=n*s,y=i*a;let q=b*C+w*_+R*I-(x*C+T*_+z*I),$=x*h+M*_+u*I-(b*h+N*_+O*I),H=T*h+N*C+E*I-(w*h+M*C+y*I),Z=z*h+O*C+y*_-(R*h+u*C+E*_),ee=T*p+z*g+x*m-(R*g+b*m+w*p),Ae=O*g+b*d+N*p-(M*p+u*g+x*d),ge=M*m+y*g+w*d-(E*g+T*d+N*m),ce=E*p+R*d+u*m-(O*m+y*p+z*d),he=n*B+i*D+o*v+r*F;if(Math.abs(he)<S.EPSILON21){if(ne.equalsEpsilon(Se.getMatrix3(e,SY),wY,S.EPSILON7)&&re.equals(Se.getRow(e,3,DY),QY))return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=0,t[11]=0,t[12]=-e[12],t[13]=-e[13],t[14]=-e[14],t[15]=1,t;throw new ae("matrix is not invertible because its determinate is zero.")}return he=1/he,t[0]=B*he,t[1]=D*he,t[2]=v*he,t[3]=F*he,t[4]=P*he,t[5]=U*he,t[6]=k*he,t[7]=j*he,t[8]=q*he,t[9]=$*he,t[10]=H*he,t[11]=Z*he,t[12]=ee*he,t[13]=Ae*he,t[14]=ge*he,t[15]=ce*he,t};Se.inverseTransformation=function(e,t){let n=e[0],i=e[1],o=e[2],r=e[4],a=e[5],s=e[6],A=e[8],l=e[9],d=e[10],m=e[12],p=e[13],g=e[14],h=-n*m-i*p-o*g,C=-r*m-a*p-s*g,_=-A*m-l*p-d*g;return t[0]=n,t[1]=r,t[2]=A,t[3]=0,t[4]=i,t[5]=a,t[6]=l,t[7]=0,t[8]=o,t[9]=s,t[10]=d,t[11]=0,t[12]=h,t[13]=C,t[14]=_,t[15]=1,t};var RY=new Se;Se.inverseTranspose=function(e,t){return Se.inverse(Se.transpose(e,RY),t)};Se.IDENTITY=Object.freeze(new Se(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1));Se.ZERO=Object.freeze(new Se(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0));Se.COLUMN0ROW0=0;Se.COLUMN0ROW1=1;Se.COLUMN0ROW2=2;Se.COLUMN0ROW3=3;Se.COLUMN1ROW0=4;Se.COLUMN1ROW1=5;Se.COLUMN1ROW2=6;Se.COLUMN1ROW3=7;Se.COLUMN2ROW0=8;Se.COLUMN2ROW1=9;Se.COLUMN2ROW2=10;Se.COLUMN2ROW3=11;Se.COLUMN3ROW0=12;Se.COLUMN3ROW1=13;Se.COLUMN3ROW2=14;Se.COLUMN3ROW3=15;Object.defineProperties(Se.prototype,{length:{get:function(){return Se.packedLength}}});Se.prototype.clone=function(e){return Se.clone(this,e)};Se.prototype.equals=function(e){return Se.equals(this,e)};Se.equalsArray=function(e,t,n){return e[0]===t[n]&&e[1]===t[n+1]&&e[2]===t[n+2]&&e[3]===t[n+3]&&e[4]===t[n+4]&&e[5]===t[n+5]&&e[6]===t[n+6]&&e[7]===t[n+7]&&e[8]===t[n+8]&&e[9]===t[n+9]&&e[10]===t[n+10]&&e[11]===t[n+11]&&e[12]===t[n+12]&&e[13]===t[n+13]&&e[14]===t[n+14]&&e[15]===t[n+15]};Se.prototype.equalsEpsilon=function(e,t){return Se.equalsEpsilon(this,e,t)};Se.prototype.toString=function(){return`(${this[0]}, ${this[4]}, ${this[8]}, ${this[12]})
(${this[1]}, ${this[5]}, ${this[9]}, ${this[13]})
(${this[2]}, ${this[6]}, ${this[10]}, ${this[14]})
(${this[3]}, ${this[7]}, ${this[11]}, ${this[15]})`};var Q=Se;var vY={DEPTH_BUFFER_BIT:256,STENCIL_BUFFER_BIT:1024,COLOR_BUFFER_BIT:16384,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,ZERO:0,ONE:1,SRC_COLOR:768,ONE_MINUS_SRC_COLOR:769,SRC_ALPHA:770,ONE_MINUS_SRC_ALPHA:771,DST_ALPHA:772,ONE_MINUS_DST_ALPHA:773,DST_COLOR:774,ONE_MINUS_DST_COLOR:775,SRC_ALPHA_SATURATE:776,FUNC_ADD:32774,BLEND_EQUATION:32777,BLEND_EQUATION_RGB:32777,BLEND_EQUATION_ALPHA:34877,FUNC_SUBTRACT:32778,FUNC_REVERSE_SUBTRACT:32779,BLEND_DST_RGB:32968,BLEND_SRC_RGB:32969,BLEND_DST_ALPHA:32970,BLEND_SRC_ALPHA:32971,CONSTANT_COLOR:32769,ONE_MINUS_CONSTANT_COLOR:32770,CONSTANT_ALPHA:32771,ONE_MINUS_CONSTANT_ALPHA:32772,BLEND_COLOR:32773,ARRAY_BUFFER:34962,ELEMENT_ARRAY_BUFFER:34963,ARRAY_BUFFER_BINDING:34964,ELEMENT_ARRAY_BUFFER_BINDING:34965,STREAM_DRAW:35040,STATIC_DRAW:35044,DYNAMIC_DRAW:35048,BUFFER_SIZE:34660,BUFFER_USAGE:34661,CURRENT_VERTEX_ATTRIB:34342,FRONT:1028,BACK:1029,FRONT_AND_BACK:1032,CULL_FACE:2884,BLEND:3042,DITHER:3024,STENCIL_TEST:2960,DEPTH_TEST:2929,SCISSOR_TEST:3089,POLYGON_OFFSET_FILL:32823,SAMPLE_ALPHA_TO_COVERAGE:32926,SAMPLE_COVERAGE:32928,NO_ERROR:0,INVALID_ENUM:1280,INVALID_VALUE:1281,INVALID_OPERATION:1282,OUT_OF_MEMORY:1285,CW:2304,CCW:2305,LINE_WIDTH:2849,ALIASED_POINT_SIZE_RANGE:33901,ALIASED_LINE_WIDTH_RANGE:33902,CULL_FACE_MODE:2885,FRONT_FACE:2886,DEPTH_RANGE:2928,DEPTH_WRITEMASK:2930,DEPTH_CLEAR_VALUE:2931,DEPTH_FUNC:2932,STENCIL_CLEAR_VALUE:2961,STENCIL_FUNC:2962,STENCIL_FAIL:2964,STENCIL_PASS_DEPTH_FAIL:2965,STENCIL_PASS_DEPTH_PASS:2966,STENCIL_REF:2967,STENCIL_VALUE_MASK:2963,STENCIL_WRITEMASK:2968,STENCIL_BACK_FUNC:34816,STENCIL_BACK_FAIL:34817,STENCIL_BACK_PASS_DEPTH_FAIL:34818,STENCIL_BACK_PASS_DEPTH_PASS:34819,STENCIL_BACK_REF:36003,STENCIL_BACK_VALUE_MASK:36004,STENCIL_BACK_WRITEMASK:36005,VIEWPORT:2978,SCISSOR_BOX:3088,COLOR_CLEAR_VALUE:3106,COLOR_WRITEMASK:3107,UNPACK_ALIGNMENT:3317,PACK_ALIGNMENT:3333,MAX_TEXTURE_SIZE:3379,MAX_VIEWPORT_DIMS:3386,SUBPIXEL_BITS:3408,RED_BITS:3410,GREEN_BITS:3411,BLUE_BITS:3412,ALPHA_BITS:3413,DEPTH_BITS:3414,STENCIL_BITS:3415,POLYGON_OFFSET_UNITS:10752,POLYGON_OFFSET_FACTOR:32824,TEXTURE_BINDING_2D:32873,SAMPLE_BUFFERS:32936,SAMPLES:32937,SAMPLE_COVERAGE_VALUE:32938,SAMPLE_COVERAGE_INVERT:32939,COMPRESSED_TEXTURE_FORMATS:34467,DONT_CARE:4352,FASTEST:4353,NICEST:4354,GENERATE_MIPMAP_HINT:33170,BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,INT:5124,UNSIGNED_INT:5125,FLOAT:5126,DEPTH_COMPONENT:6402,ALPHA:6406,RGB:6407,RGBA:6408,LUMINANCE:6409,LUMINANCE_ALPHA:6410,UNSIGNED_SHORT_4_4_4_4:32819,UNSIGNED_SHORT_5_5_5_1:32820,UNSIGNED_SHORT_5_6_5:33635,FRAGMENT_SHADER:35632,VERTEX_SHADER:35633,MAX_VERTEX_ATTRIBS:34921,MAX_VERTEX_UNIFORM_VECTORS:36347,MAX_VARYING_VECTORS:36348,MAX_COMBINED_TEXTURE_IMAGE_UNITS:35661,MAX_VERTEX_TEXTURE_IMAGE_UNITS:35660,MAX_TEXTURE_IMAGE_UNITS:34930,MAX_FRAGMENT_UNIFORM_VECTORS:36349,SHADER_TYPE:35663,DELETE_STATUS:35712,LINK_STATUS:35714,VALIDATE_STATUS:35715,ATTACHED_SHADERS:35717,ACTIVE_UNIFORMS:35718,ACTIVE_ATTRIBUTES:35721,SHADING_LANGUAGE_VERSION:35724,CURRENT_PROGRAM:35725,NEVER:512,LESS:513,EQUAL:514,LEQUAL:515,GREATER:516,NOTEQUAL:517,GEQUAL:518,ALWAYS:519,KEEP:7680,REPLACE:7681,INCR:7682,DECR:7683,INVERT:5386,INCR_WRAP:34055,DECR_WRAP:34056,VENDOR:7936,RENDERER:7937,VERSION:7938,NEAREST:9728,LINEAR:9729,NEAREST_MIPMAP_NEAREST:9984,LINEAR_MIPMAP_NEAREST:9985,NEAREST_MIPMAP_LINEAR:9986,LINEAR_MIPMAP_LINEAR:9987,TEXTURE_MAG_FILTER:10240,TEXTURE_MIN_FILTER:10241,TEXTURE_WRAP_S:10242,TEXTURE_WRAP_T:10243,TEXTURE_2D:3553,TEXTURE:5890,TEXTURE_CUBE_MAP:34067,TEXTURE_BINDING_CUBE_MAP:34068,TEXTURE_CUBE_MAP_POSITIVE_X:34069,TEXTURE_CUBE_MAP_NEGATIVE_X:34070,TEXTURE_CUBE_MAP_POSITIVE_Y:34071,TEXTURE_CUBE_MAP_NEGATIVE_Y:34072,TEXTURE_CUBE_MAP_POSITIVE_Z:34073,TEXTURE_CUBE_MAP_NEGATIVE_Z:34074,MAX_CUBE_MAP_TEXTURE_SIZE:34076,TEXTURE0:33984,TEXTURE1:33985,TEXTURE2:33986,TEXTURE3:33987,TEXTURE4:33988,TEXTURE5:33989,TEXTURE6:33990,TEXTURE7:33991,TEXTURE8:33992,TEXTURE9:33993,TEXTURE10:33994,TEXTURE11:33995,TEXTURE12:33996,TEXTURE13:33997,TEXTURE14:33998,TEXTURE15:33999,TEXTURE16:34e3,TEXTURE17:34001,TEXTURE18:34002,TEXTURE19:34003,TEXTURE20:34004,TEXTURE21:34005,TEXTURE22:34006,TEXTURE23:34007,TEXTURE24:34008,TEXTURE25:34009,TEXTURE26:34010,TEXTURE27:34011,TEXTURE28:34012,TEXTURE29:34013,TEXTURE30:34014,TEXTURE31:34015,ACTIVE_TEXTURE:34016,REPEAT:10497,CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,INT_VEC2:35667,INT_VEC3:35668,INT_VEC4:35669,BOOL:35670,BOOL_VEC2:35671,BOOL_VEC3:35672,BOOL_VEC4:35673,FLOAT_MAT2:35674,FLOAT_MAT3:35675,FLOAT_MAT4:35676,SAMPLER_2D:35678,SAMPLER_CUBE:35680,VERTEX_ATTRIB_ARRAY_ENABLED:34338,VERTEX_ATTRIB_ARRAY_SIZE:34339,VERTEX_ATTRIB_ARRAY_STRIDE:34340,VERTEX_ATTRIB_ARRAY_TYPE:34341,VERTEX_ATTRIB_ARRAY_NORMALIZED:34922,VERTEX_ATTRIB_ARRAY_POINTER:34373,VERTEX_ATTRIB_ARRAY_BUFFER_BINDING:34975,IMPLEMENTATION_COLOR_READ_TYPE:35738,IMPLEMENTATION_COLOR_READ_FORMAT:35739,COMPILE_STATUS:35713,LOW_FLOAT:36336,MEDIUM_FLOAT:36337,HIGH_FLOAT:36338,LOW_INT:36339,MEDIUM_INT:36340,HIGH_INT:36341,FRAMEBUFFER:36160,RENDERBUFFER:36161,RGBA4:32854,RGB5_A1:32855,RGB565:36194,DEPTH_COMPONENT16:33189,STENCIL_INDEX:6401,STENCIL_INDEX8:36168,DEPTH_STENCIL:34041,RENDERBUFFER_WIDTH:36162,RENDERBUFFER_HEIGHT:36163,RENDERBUFFER_INTERNAL_FORMAT:36164,RENDERBUFFER_RED_SIZE:36176,RENDERBUFFER_GREEN_SIZE:36177,RENDERBUFFER_BLUE_SIZE:36178,RENDERBUFFER_ALPHA_SIZE:36179,RENDERBUFFER_DEPTH_SIZE:36180,RENDERBUFFER_STENCIL_SIZE:36181,FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE:36048,FRAMEBUFFER_ATTACHMENT_OBJECT_NAME:36049,FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL:36050,FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE:36051,COLOR_ATTACHMENT0:36064,DEPTH_ATTACHMENT:36096,STENCIL_ATTACHMENT:36128,DEPTH_STENCIL_ATTACHMENT:33306,NONE:0,FRAMEBUFFER_COMPLETE:36053,FRAMEBUFFER_INCOMPLETE_ATTACHMENT:36054,FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:36055,FRAMEBUFFER_INCOMPLETE_DIMENSIONS:36057,FRAMEBUFFER_UNSUPPORTED:36061,FRAMEBUFFER_BINDING:36006,RENDERBUFFER_BINDING:36007,MAX_RENDERBUFFER_SIZE:34024,INVALID_FRAMEBUFFER_OPERATION:1286,UNPACK_FLIP_Y_WEBGL:37440,UNPACK_PREMULTIPLY_ALPHA_WEBGL:37441,CONTEXT_LOST_WEBGL:37442,UNPACK_COLORSPACE_CONVERSION_WEBGL:37443,BROWSER_DEFAULT_WEBGL:37444,COMPRESSED_RGB_S3TC_DXT1_EXT:33776,COMPRESSED_RGBA_S3TC_DXT1_EXT:33777,COMPRESSED_RGBA_S3TC_DXT3_EXT:33778,COMPRESSED_RGBA_S3TC_DXT5_EXT:33779,COMPRESSED_RGB_PVRTC_4BPPV1_IMG:35840,COMPRESSED_RGB_PVRTC_2BPPV1_IMG:35841,COMPRESSED_RGBA_PVRTC_4BPPV1_IMG:35842,COMPRESSED_RGBA_PVRTC_2BPPV1_IMG:35843,COMPRESSED_RGBA_ASTC_4x4_WEBGL:37808,COMPRESSED_RGB_ETC1_WEBGL:36196,COMPRESSED_RGBA_BPTC_UNORM:36492,HALF_FLOAT_OES:36193,DOUBLE:5130,READ_BUFFER:3074,UNPACK_ROW_LENGTH:3314,UNPACK_SKIP_ROWS:3315,UNPACK_SKIP_PIXELS:3316,PACK_ROW_LENGTH:3330,PACK_SKIP_ROWS:3331,PACK_SKIP_PIXELS:3332,COLOR:6144,DEPTH:6145,STENCIL:6146,RED:6403,RGB8:32849,RGBA8:32856,RGB10_A2:32857,TEXTURE_BINDING_3D:32874,UNPACK_SKIP_IMAGES:32877,UNPACK_IMAGE_HEIGHT:32878,TEXTURE_3D:32879,TEXTURE_WRAP_R:32882,MAX_3D_TEXTURE_SIZE:32883,UNSIGNED_INT_2_10_10_10_REV:33640,MAX_ELEMENTS_VERTICES:33e3,MAX_ELEMENTS_INDICES:33001,TEXTURE_MIN_LOD:33082,TEXTURE_MAX_LOD:33083,TEXTURE_BASE_LEVEL:33084,TEXTURE_MAX_LEVEL:33085,MIN:32775,MAX:32776,DEPTH_COMPONENT24:33190,MAX_TEXTURE_LOD_BIAS:34045,TEXTURE_COMPARE_MODE:34892,TEXTURE_COMPARE_FUNC:34893,CURRENT_QUERY:34917,QUERY_RESULT:34918,QUERY_RESULT_AVAILABLE:34919,STREAM_READ:35041,STREAM_COPY:35042,STATIC_READ:35045,STATIC_COPY:35046,DYNAMIC_READ:35049,DYNAMIC_COPY:35050,MAX_DRAW_BUFFERS:34852,DRAW_BUFFER0:34853,DRAW_BUFFER1:34854,DRAW_BUFFER2:34855,DRAW_BUFFER3:34856,DRAW_BUFFER4:34857,DRAW_BUFFER5:34858,DRAW_BUFFER6:34859,DRAW_BUFFER7:34860,DRAW_BUFFER8:34861,DRAW_BUFFER9:34862,DRAW_BUFFER10:34863,DRAW_BUFFER11:34864,DRAW_BUFFER12:34865,DRAW_BUFFER13:34866,DRAW_BUFFER14:34867,DRAW_BUFFER15:34868,MAX_FRAGMENT_UNIFORM_COMPONENTS:35657,MAX_VERTEX_UNIFORM_COMPONENTS:35658,SAMPLER_3D:35679,SAMPLER_2D_SHADOW:35682,FRAGMENT_SHADER_DERIVATIVE_HINT:35723,PIXEL_PACK_BUFFER:35051,PIXEL_UNPACK_BUFFER:35052,PIXEL_PACK_BUFFER_BINDING:35053,PIXEL_UNPACK_BUFFER_BINDING:35055,FLOAT_MAT2x3:35685,FLOAT_MAT2x4:35686,FLOAT_MAT3x2:35687,FLOAT_MAT3x4:35688,FLOAT_MAT4x2:35689,FLOAT_MAT4x3:35690,SRGB:35904,SRGB8:35905,SRGB8_ALPHA8:35907,COMPARE_REF_TO_TEXTURE:34894,RGBA32F:34836,RGB32F:34837,RGBA16F:34842,RGB16F:34843,VERTEX_ATTRIB_ARRAY_INTEGER:35069,MAX_ARRAY_TEXTURE_LAYERS:35071,MIN_PROGRAM_TEXEL_OFFSET:35076,MAX_PROGRAM_TEXEL_OFFSET:35077,MAX_VARYING_COMPONENTS:35659,TEXTURE_2D_ARRAY:35866,TEXTURE_BINDING_2D_ARRAY:35869,R11F_G11F_B10F:35898,UNSIGNED_INT_10F_11F_11F_REV:35899,RGB9_E5:35901,UNSIGNED_INT_5_9_9_9_REV:35902,TRANSFORM_FEEDBACK_BUFFER_MODE:35967,MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS:35968,TRANSFORM_FEEDBACK_VARYINGS:35971,TRANSFORM_FEEDBACK_BUFFER_START:35972,TRANSFORM_FEEDBACK_BUFFER_SIZE:35973,TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN:35976,RASTERIZER_DISCARD:35977,MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS:35978,MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS:35979,INTERLEAVED_ATTRIBS:35980,SEPARATE_ATTRIBS:35981,TRANSFORM_FEEDBACK_BUFFER:35982,TRANSFORM_FEEDBACK_BUFFER_BINDING:35983,RGBA32UI:36208,RGB32UI:36209,RGBA16UI:36214,RGB16UI:36215,RGBA8UI:36220,RGB8UI:36221,RGBA32I:36226,RGB32I:36227,RGBA16I:36232,RGB16I:36233,RGBA8I:36238,RGB8I:36239,RED_INTEGER:36244,RGB_INTEGER:36248,RGBA_INTEGER:36249,SAMPLER_2D_ARRAY:36289,SAMPLER_2D_ARRAY_SHADOW:36292,SAMPLER_CUBE_SHADOW:36293,UNSIGNED_INT_VEC2:36294,UNSIGNED_INT_VEC3:36295,UNSIGNED_INT_VEC4:36296,INT_SAMPLER_2D:36298,INT_SAMPLER_3D:36299,INT_SAMPLER_CUBE:36300,INT_SAMPLER_2D_ARRAY:36303,UNSIGNED_INT_SAMPLER_2D:36306,UNSIGNED_INT_SAMPLER_3D:36307,UNSIGNED_INT_SAMPLER_CUBE:36308,UNSIGNED_INT_SAMPLER_2D_ARRAY:36311,DEPTH_COMPONENT32F:36012,DEPTH32F_STENCIL8:36013,FLOAT_32_UNSIGNED_INT_24_8_REV:36269,FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING:33296,FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE:33297,FRAMEBUFFER_ATTACHMENT_RED_SIZE:33298,FRAMEBUFFER_ATTACHMENT_GREEN_SIZE:33299,FRAMEBUFFER_ATTACHMENT_BLUE_SIZE:33300,FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE:33301,FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE:33302,FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE:33303,FRAMEBUFFER_DEFAULT:33304,UNSIGNED_INT_24_8:34042,DEPTH24_STENCIL8:35056,UNSIGNED_NORMALIZED:35863,DRAW_FRAMEBUFFER_BINDING:36006,READ_FRAMEBUFFER:36008,DRAW_FRAMEBUFFER:36009,READ_FRAMEBUFFER_BINDING:36010,RENDERBUFFER_SAMPLES:36011,FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER:36052,MAX_COLOR_ATTACHMENTS:36063,COLOR_ATTACHMENT1:36065,COLOR_ATTACHMENT2:36066,COLOR_ATTACHMENT3:36067,COLOR_ATTACHMENT4:36068,COLOR_ATTACHMENT5:36069,COLOR_ATTACHMENT6:36070,COLOR_ATTACHMENT7:36071,COLOR_ATTACHMENT8:36072,COLOR_ATTACHMENT9:36073,COLOR_ATTACHMENT10:36074,COLOR_ATTACHMENT11:36075,COLOR_ATTACHMENT12:36076,COLOR_ATTACHMENT13:36077,COLOR_ATTACHMENT14:36078,COLOR_ATTACHMENT15:36079,FRAMEBUFFER_INCOMPLETE_MULTISAMPLE:36182,MAX_SAMPLES:36183,HALF_FLOAT:5131,RG:33319,RG_INTEGER:33320,R8:33321,RG8:33323,R16F:33325,R32F:33326,RG16F:33327,RG32F:33328,R8I:33329,R8UI:33330,R16I:33331,R16UI:33332,R32I:33333,R32UI:33334,RG8I:33335,RG8UI:33336,RG16I:33337,RG16UI:33338,RG32I:33339,RG32UI:33340,VERTEX_ARRAY_BINDING:34229,R8_SNORM:36756,RG8_SNORM:36757,RGB8_SNORM:36758,RGBA8_SNORM:36759,SIGNED_NORMALIZED:36764,COPY_READ_BUFFER:36662,COPY_WRITE_BUFFER:36663,COPY_READ_BUFFER_BINDING:36662,COPY_WRITE_BUFFER_BINDING:36663,UNIFORM_BUFFER:35345,UNIFORM_BUFFER_BINDING:35368,UNIFORM_BUFFER_START:35369,UNIFORM_BUFFER_SIZE:35370,MAX_VERTEX_UNIFORM_BLOCKS:35371,MAX_FRAGMENT_UNIFORM_BLOCKS:35373,MAX_COMBINED_UNIFORM_BLOCKS:35374,MAX_UNIFORM_BUFFER_BINDINGS:35375,MAX_UNIFORM_BLOCK_SIZE:35376,MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS:35377,MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS:35379,UNIFORM_BUFFER_OFFSET_ALIGNMENT:35380,ACTIVE_UNIFORM_BLOCKS:35382,UNIFORM_TYPE:35383,UNIFORM_SIZE:35384,UNIFORM_BLOCK_INDEX:35386,UNIFORM_OFFSET:35387,UNIFORM_ARRAY_STRIDE:35388,UNIFORM_MATRIX_STRIDE:35389,UNIFORM_IS_ROW_MAJOR:35390,UNIFORM_BLOCK_BINDING:35391,UNIFORM_BLOCK_DATA_SIZE:35392,UNIFORM_BLOCK_ACTIVE_UNIFORMS:35394,UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES:35395,UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER:35396,UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER:35398,INVALID_INDEX:4294967295,MAX_VERTEX_OUTPUT_COMPONENTS:37154,MAX_FRAGMENT_INPUT_COMPONENTS:37157,MAX_SERVER_WAIT_TIMEOUT:37137,OBJECT_TYPE:37138,SYNC_CONDITION:37139,SYNC_STATUS:37140,SYNC_FLAGS:37141,SYNC_FENCE:37142,SYNC_GPU_COMMANDS_COMPLETE:37143,UNSIGNALED:37144,SIGNALED:37145,ALREADY_SIGNALED:37146,TIMEOUT_EXPIRED:37147,CONDITION_SATISFIED:37148,WAIT_FAILED:37149,SYNC_FLUSH_COMMANDS_BIT:1,VERTEX_ATTRIB_ARRAY_DIVISOR:35070,ANY_SAMPLES_PASSED:35887,ANY_SAMPLES_PASSED_CONSERVATIVE:36202,SAMPLER_BINDING:35097,RGB10_A2UI:36975,INT_2_10_10_10_REV:36255,TRANSFORM_FEEDBACK:36386,TRANSFORM_FEEDBACK_PAUSED:36387,TRANSFORM_FEEDBACK_ACTIVE:36388,TRANSFORM_FEEDBACK_BINDING:36389,COMPRESSED_R11_EAC:37488,COMPRESSED_SIGNED_R11_EAC:37489,COMPRESSED_RG11_EAC:37490,COMPRESSED_SIGNED_RG11_EAC:37491,COMPRESSED_RGB8_ETC2:37492,COMPRESSED_SRGB8_ETC2:37493,COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:37494,COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:37495,COMPRESSED_RGBA8_ETC2_EAC:37496,COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:37497,TEXTURE_IMMUTABLE_FORMAT:37167,MAX_ELEMENT_INDEX:36203,TEXTURE_IMMUTABLE_LEVELS:33503,MAX_TEXTURE_MAX_ANISOTROPY_EXT:34047},W=Object.freeze(vY);var MY=new f;function Ke(e){this._size=e.size,this._datatype=e.datatype,this.getValue=e.getValue}var gr={};gr[W.FLOAT]="float";gr[W.FLOAT_VEC2]="vec2";gr[W.FLOAT_VEC3]="vec3";gr[W.FLOAT_VEC4]="vec4";gr[W.INT]="int";gr[W.INT_VEC2]="ivec2";gr[W.INT_VEC3]="ivec3";gr[W.INT_VEC4]="ivec4";gr[W.BOOL]="bool";gr[W.BOOL_VEC2]="bvec2";gr[W.BOOL_VEC3]="bvec3";gr[W.BOOL_VEC4]="bvec4";gr[W.FLOAT_MAT2]="mat2";gr[W.FLOAT_MAT3]="mat3";gr[W.FLOAT_MAT4]="mat4";gr[W.SAMPLER_2D]="sampler2D";gr[W.SAMPLER_CUBE]="samplerCube";Ke.prototype.getDeclaration=function(e){let t=`uniform ${gr[this._datatype]} ${e}`,n=this._size;return n===1?t+=";":t+=`[${n.toString()}];`,t};var PY={czm_viewport:new Ke({size:1,datatype:W.FLOAT_VEC4,getValue:function(e){return e.viewportCartesian4}}),czm_viewportOrthographic:new Ke({size:1,datatype:W.FLOAT_MAT4,getValue:function(e){return e.viewportOrthographic}}),czm_viewportTransformation:new Ke({size:1,datatype:W.FLOAT_MAT4,getValue:function(e){return e.viewportTransformation}}),czm_globeDepthTexture:new Ke({size:1,datatype:W.SAMPLER_2D,getValue:function(e){return e.globeDepthTexture}}),czm_model:new Ke({size:1,datatype:W.FLOAT_MAT4,getValue:function(e){return e.model}}),czm_inverseModel:new Ke({size:1,datatype:W.FLOAT_MAT4,getValue:function(e){return e.inverseModel}}),czm_view:new Ke({size:1,datatype:W.FLOAT_MAT4,getValue:function(e){return e.view}}),czm_view3D:new Ke({size:1,datatype:W.FLOAT_MAT4,getValue:function(e){return e.view3D}}),czm_viewRotation:new Ke({size:1,datatype:W.FLOAT_MAT3,getValue:function(e){return e.viewRotation}}),czm_viewRotation3D:new Ke({size:1,datatype:W.FLOAT_MAT3,getValue:function(e){return e.viewRotation3D}}),czm_inverseView:new Ke({size:1,datatype:W.FLOAT_MAT4,getValue:function(e){return e.inverseView}}),czm_inverseView3D:new Ke({size:1,datatype:W.FLOAT_MAT4,getValue:function(e){return e.inverseView3D}}),czm_inverseViewRotation:new Ke({size:1,datatype:W.FLOAT_MAT3,getValue:function(e){return e.inverseViewRotation}}),czm_inverseViewRotation3D:new Ke({size:1,datatype:W.FLOAT_MAT3,getValue:function(e){return e.inverseViewRotation3D}}),czm_projection:new Ke({size:1,datatype:W.FLOAT_MAT4,getValue:function(e){return e.projection}}),czm_inverseProjection:new Ke({size:1,datatype:W.FLOAT_MAT4,getValue:function(e){return e.inverseProjection}}),czm_infiniteProjection:new Ke({size:1,datatype:W.FLOAT_MAT4,getValue:function(e){return e.infiniteProjection}}),czm_modelView:new Ke({size:1,datatype:W.FLOAT_MAT4,getValue:function(e){return e.modelView}}),czm_modelView3D:new Ke({size:1,datatype:W.FLOAT_MAT4,getValue:function(e){return e.modelView3D}}),czm_modelViewRelativeToEye:new Ke({size:1,datatype:W.FLOAT_MAT4,getValue:function(e){return e.modelViewRelativeToEye}}),czm_inverseModelView:new Ke({size:1,datatype:W.FLOAT_MAT4,getValue:function(e){return e.inverseModelView}}),czm_inverseModelView3D:new Ke({size:1,datatype:W.FLOAT_MAT4,getValue:function(e){return e.inverseModelView3D}}),czm_viewProjection:new Ke({size:1,datatype:W.FLOAT_MAT4,getValue:function(e){return e.viewProjection}}),czm_inverseViewProjection:new Ke({size:1,datatype:W.FLOAT_MAT4,getValue:function(e){return e.inverseViewProjection}}),czm_modelViewProjection:new Ke({size:1,datatype:W.FLOAT_MAT4,getValue:function(e){return e.modelViewProjection}}),czm_inverseModelViewProjection:new Ke({size:1,datatype:W.FLOAT_MAT4,getValue:function(e){return e.inverseModelViewProjection}}),czm_modelViewProjectionRelativeToEye:new Ke({size:1,datatype:W.FLOAT_MAT4,getValue:function(e){return e.modelViewProjectionRelativeToEye}}),czm_modelViewInfiniteProjection:new Ke({size:1,datatype:W.FLOAT_MAT4,getValue:function(e){return e.modelViewInfiniteProjection}}),czm_orthographicIn3D:new Ke({size:1,datatype:W.FLOAT,getValue:function(e){return e.orthographicIn3D?1:0}}),czm_normal:new Ke({size:1,datatype:W.FLOAT_MAT3,getValue:function(e){return e.normal}}),czm_normal3D:new Ke({size:1,datatype:W.FLOAT_MAT3,getValue:function(e){return e.normal3D}}),czm_inverseNormal:new Ke({size:1,datatype:W.FLOAT_MAT3,getValue:function(e){return e.inverseNormal}}),czm_inverseNormal3D:new Ke({size:1,datatype:W.FLOAT_MAT3,getValue:function(e){return e.inverseNormal3D}}),czm_eyeHeight:new Ke({size:1,datatype:W.FLOAT,getValue:function(e){return e.eyeHeight}}),czm_eyeHeight2D:new Ke({size:1,datatype:W.FLOAT_VEC2,getValue:function(e){return e.eyeHeight2D}}),czm_eyeEllipsoidNormalEC:new Ke({size:1,datatype:W.FLOAT_VEC3,getValue:function(e){return e.eyeEllipsoidNormalEC}}),czm_eyeEllipsoidCurvature:new Ke({size:1,datatype:W.FLOAT_VEC2,getValue:function(e){return e.eyeEllipsoidCurvature}}),czm_modelToEnu:new Ke({size:1,datatype:W.FLOAT_MAT4,getValue:function(e){return e.modelToEnu}}),czm_enuToModel:new Ke({size:1,datatype:W.FLOAT_MAT4,getValue:function(e){return e.enuToModel}}),czm_entireFrustum:new Ke({size:1,datatype:W.FLOAT_VEC2,getValue:function(e){return e.entireFrustum}}),czm_currentFrustum:new Ke({size:1,datatype:W.FLOAT_VEC2,getValue:function(e){return e.currentFrustum}}),czm_frustumPlanes:new Ke({size:1,datatype:W.FLOAT_VEC4,getValue:function(e){return e.frustumPlanes}}),czm_farDepthFromNearPlusOne:new Ke({size:1,datatype:W.FLOAT,getValue:function(e){return e.farDepthFromNearPlusOne}}),czm_log2FarDepthFromNearPlusOne:new Ke({size:1,datatype:W.FLOAT,getValue:function(e){return e.log2FarDepthFromNearPlusOne}}),czm_oneOverLog2FarDepthFromNearPlusOne:new Ke({size:1,datatype:W.FLOAT,getValue:function(e){return e.oneOverLog2FarDepthFromNearPlusOne}}),czm_sunPositionWC:new Ke({size:1,datatype:W.FLOAT_VEC3,getValue:function(e){return e.sunPositionWC}}),czm_sunPositionColumbusView:new Ke({size:1,datatype:W.FLOAT_VEC3,getValue:function(e){return e.sunPositionColumbusView}}),czm_sunDirectionEC:new Ke({size:1,datatype:W.FLOAT_VEC3,getValue:function(e){return e.sunDirectionEC}}),czm_sunDirectionWC:new Ke({size:1,datatype:W.FLOAT_VEC3,getValue:function(e){return e.sunDirectionWC}}),czm_moonDirectionEC:new Ke({size:1,datatype:W.FLOAT_VEC3,getValue:function(e){return e.moonDirectionEC}}),czm_lightDirectionEC:new Ke({size:1,datatype:W.FLOAT_VEC3,getValue:function(e){return e.lightDirectionEC}}),czm_lightDirectionWC:new Ke({size:1,datatype:W.FLOAT_VEC3,getValue:function(e){return e.lightDirectionWC}}),czm_lightColor:new Ke({size:1,datatype:W.FLOAT_VEC3,getValue:function(e){return e.lightColor}}),czm_lightColorHdr:new Ke({size:1,datatype:W.FLOAT_VEC3,getValue:function(e){return e.lightColorHdr}}),czm_encodedCameraPositionMCHigh:new Ke({size:1,datatype:W.FLOAT_VEC3,getValue:function(e){return e.encodedCameraPositionMCHigh}}),czm_encodedCameraPositionMCLow:new Ke({size:1,datatype:W.FLOAT_VEC3,getValue:function(e){return e.encodedCameraPositionMCLow}}),czm_viewerPositionWC:new Ke({size:1,datatype:W.FLOAT_VEC3,getValue:function(e){return Q.getTranslation(e.inverseView,MY)}}),czm_frameNumber:new Ke({size:1,datatype:W.FLOAT,getValue:function(e){return e.frameState.frameNumber}}),czm_morphTime:new Ke({size:1,datatype:W.FLOAT,getValue:function(e){return e.frameState.morphTime}}),czm_sceneMode:new Ke({size:1,datatype:W.FLOAT,getValue:function(e){return e.frameState.mode}}),czm_pass:new Ke({size:1,datatype:W.FLOAT,getValue:function(e){return e.pass}}),czm_backgroundColor:new Ke({size:1,datatype:W.FLOAT_VEC4,getValue:function(e){return e.backgroundColor}}),czm_brdfLut:new Ke({size:1,datatype:W.SAMPLER_2D,getValue:function(e){return e.brdfLut}}),czm_environmentMap:new Ke({size:1,datatype:W.SAMPLER_CUBE,getValue:function(e){return e.environmentMap}}),czm_specularEnvironmentMaps:new Ke({size:1,datatype:W.SAMPLER_CUBE,getValue:function(e){return e.specularEnvironmentMaps}}),czm_specularEnvironmentMapsMaximumLOD:new Ke({size:1,datatype:W.FLOAT,getValue:function(e){return e.specularEnvironmentMapsMaximumLOD}}),czm_sphericalHarmonicCoefficients:new Ke({size:9,datatype:W.FLOAT_VEC3,getValue:function(e){return e.sphericalHarmonicCoefficients}}),czm_temeToPseudoFixed:new Ke({size:1,datatype:W.FLOAT_MAT3,getValue:function(e){return e.temeToPseudoFixedMatrix}}),czm_pixelRatio:new Ke({size:1,datatype:W.FLOAT,getValue:function(e){return e.pixelRatio}}),czm_fogDensity:new Ke({size:1,datatype:W.FLOAT,getValue:function(e){return e.fogDensity}}),czm_fogVisualDensityScalar:new Ke({size:1,datatype:W.FLOAT,getValue:function(e){return e.fogVisualDensityScalar}}),czm_fogMinimumBrightness:new Ke({size:1,datatype:W.FLOAT,getValue:function(e){return e.fogMinimumBrightness}}),czm_atmosphereHsbShift:new Ke({size:1,datatype:W.FLOAT_VEC3,getValue:function(e){return e.atmosphereHsbShift}}),czm_atmosphereLightIntensity:new Ke({size:1,datatype:W.FLOAT,getValue:function(e){return e.atmosphereLightIntensity}}),czm_atmosphereRayleighCoefficient:new Ke({size:1,datatype:W.FLOAT_VEC3,getValue:function(e){return e.atmosphereRayleighCoefficient}}),czm_atmosphereRayleighScaleHeight:new Ke({size:1,datatype:W.FLOAT,getValue:function(e){return e.atmosphereRayleighScaleHeight}}),czm_atmosphereMieCoefficient:new Ke({size:1,datatype:W.FLOAT_VEC3,getValue:function(e){return e.atmosphereMieCoefficient}}),czm_atmosphereMieScaleHeight:new Ke({size:1,datatype:W.FLOAT,getValue:function(e){return e.atmosphereMieScaleHeight}}),czm_atmosphereMieAnisotropy:new Ke({size:1,datatype:W.FLOAT,getValue:function(e){return e.atmosphereMieAnisotropy}}),czm_atmosphereDynamicLighting:new Ke({size:1,datatype:W.FLOAT,getValue:function(e){return e.atmosphereDynamicLighting}}),czm_splitPosition:new Ke({size:1,datatype:W.FLOAT,getValue:function(e){return e.splitPosition}}),czm_geometricToleranceOverMeter:new Ke({size:1,datatype:W.FLOAT,getValue:function(e){return e.geometricToleranceOverMeter}}),czm_minimumDisableDepthTestDistance:new Ke({size:1,datatype:W.FLOAT,getValue:function(e){return e.minimumDisableDepthTestDistance}}),czm_invertClassificationColor:new Ke({size:1,datatype:W.FLOAT_VEC4,getValue:function(e){return e.invertClassificationColor}}),czm_gamma:new Ke({size:1,datatype:W.FLOAT,getValue:function(e){return e.gamma}}),czm_ellipsoidRadii:new Ke({size:1,datatype:W.FLOAT_VEC3,getValue:function(e){return e.ellipsoid.radii}}),czm_ellipsoidInverseRadii:new Ke({size:1,datatype:W.FLOAT_VEC3,getValue:function(e){return e.ellipsoid.oneOverRadii}})},rh=PY;function NY(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){let t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)})}var ji=NY;function LY(){return!0}function FY(e,t){t=t??"This object was destroyed, i.e., destroy() was called.";function n(){}for(let i in e)typeof e[i]=="function"&&(e[i]=n);e.isDestroyed=LY}var me=FY;var er={UNSIGNED_BYTE:W.UNSIGNED_BYTE,UNSIGNED_SHORT:W.UNSIGNED_SHORT,UNSIGNED_INT:W.UNSIGNED_INT};er.getSizeInBytes=function(e){switch(e){case er.UNSIGNED_BYTE:return Uint8Array.BYTES_PER_ELEMENT;case er.UNSIGNED_SHORT:return Uint16Array.BYTES_PER_ELEMENT;case er.UNSIGNED_INT:return Uint32Array.BYTES_PER_ELEMENT}};er.fromSizeInBytes=function(e){switch(e){case 2:return er.UNSIGNED_SHORT;case 4:return er.UNSIGNED_INT;case 1:return er.UNSIGNED_BYTE}};er.validate=function(e){return c(e)&&(e===er.UNSIGNED_BYTE||e===er.UNSIGNED_SHORT||e===er.UNSIGNED_INT)};er.createTypedArray=function(e,t){return e>=S.SIXTY_FOUR_KILOBYTES?new Uint32Array(t):new Uint16Array(t)};er.createTypedArrayFromArrayBuffer=function(e,t,n,i){return e>=S.SIXTY_FOUR_KILOBYTES?new Uint32Array(t,n,i):new Uint16Array(t,n,i)};er.fromTypedArray=function(e){if(e instanceof Uint8Array)return er.UNSIGNED_BYTE;if(e instanceof Uint16Array)return er.UNSIGNED_SHORT;if(e instanceof Uint32Array)return er.UNSIGNED_INT};var Ge=Object.freeze(er);var sE={STREAM_DRAW:W.STREAM_DRAW,STATIC_DRAW:W.STATIC_DRAW,DYNAMIC_DRAW:W.DYNAMIC_DRAW,validate:function(e){return e===sE.STREAM_DRAW||e===sE.STATIC_DRAW||e===sE.DYNAMIC_DRAW}},De=Object.freeze(sE);function ks(e){e=e??G.EMPTY_OBJECT;let t=e.context._gl,n=e.bufferTarget,i=e.typedArray,o=e.sizeInBytes,r=e.usage,a=c(i);a&&(o=i.byteLength);let s=t.createBuffer();t.bindBuffer(n,s),t.bufferData(n,a?i:o,r),t.bindBuffer(n,null),this._id=ji(),this._gl=t,this._webgl2=e.context._webgl2,this._bufferTarget=n,this._sizeInBytes=o,this._usage=r,this._buffer=s,this.vertexArrayDestroyable=!0}ks.createVertexBuffer=function(e){return new ks({context:e.context,bufferTarget:W.ARRAY_BUFFER,typedArray:e.typedArray,sizeInBytes:e.sizeInBytes,usage:e.usage})};ks.createIndexBuffer=function(e){let t=e.context,n=e.indexDatatype,i=Ge.getSizeInBytes(n),o=new ks({context:t,bufferTarget:W.ELEMENT_ARRAY_BUFFER,typedArray:e.typedArray,sizeInBytes:e.sizeInBytes,usage:e.usage}),r=o.sizeInBytes/i;return Object.defineProperties(o,{indexDatatype:{get:function(){return n}},bytesPerIndex:{get:function(){return i}},numberOfIndices:{get:function(){return r}}}),o};Object.defineProperties(ks.prototype,{sizeInBytes:{get:function(){return this._sizeInBytes}},usage:{get:function(){return this._usage}}});ks.prototype._getBuffer=function(){return this._buffer};ks.prototype.copyFromArrayView=function(e,t){t=t??0;let n=this._gl,i=this._bufferTarget;n.bindBuffer(i,this._buffer),n.bufferSubData(i,t,e),n.bindBuffer(i,null)};ks.prototype.copyFromBuffer=function(e,t,n,i){let o=W.COPY_READ_BUFFER,r=W.COPY_WRITE_BUFFER,a=this._gl;a.bindBuffer(r,this._buffer),a.bindBuffer(o,e._buffer),a.copyBufferSubData(o,r,t,n,i),a.bindBuffer(r,null),a.bindBuffer(o,null)};ks.prototype.getBufferData=function(e,t,n,i){t=t??0,n=n??0;let o=this._gl,r=W.COPY_READ_BUFFER;o.bindBuffer(r,this._buffer),o.getBufferSubData(r,t,e,n,i),o.bindBuffer(r,null)};ks.prototype.isDestroyed=function(){return!1};ks.prototype.destroy=function(){return this._gl.deleteBuffer(this._buffer),me(this)};var ut=ks;var mu,so={requestFullscreen:void 0,exitFullscreen:void 0,fullscreenEnabled:void 0,fullscreenElement:void 0,fullscreenchange:void 0,fullscreenerror:void 0},za={};Object.defineProperties(za,{element:{get:function(){if(za.supportsFullscreen())return document[so.fullscreenElement]}},changeEventName:{get:function(){if(za.supportsFullscreen())return so.fullscreenchange}},errorEventName:{get:function(){if(za.supportsFullscreen())return so.fullscreenerror}},enabled:{get:function(){if(za.supportsFullscreen())return document[so.fullscreenEnabled]}},fullscreen:{get:function(){if(za.supportsFullscreen())return za.element!==null}}});za.supportsFullscreen=function(){if(c(mu))return mu;mu=!1;let e=document.body;if(typeof e.requestFullscreen=="function")return so.requestFullscreen="requestFullscreen",so.exitFullscreen="exitFullscreen",so.fullscreenEnabled="fullscreenEnabled",so.fullscreenElement="fullscreenElement",so.fullscreenchange="fullscreenchange",so.fullscreenerror="fullscreenerror",mu=!0,mu;let t=["webkit","moz","o","ms","khtml"],n;for(let i=0,o=t.length;i<o;++i){let r=t[i];n=`${r}RequestFullscreen`,typeof e[n]=="function"?(so.requestFullscreen=n,mu=!0):(n=`${r}RequestFullScreen`,typeof e[n]=="function"&&(so.requestFullscreen=n,mu=!0)),n=`${r}ExitFullscreen`,typeof document[n]=="function"?so.exitFullscreen=n:(n=`${r}CancelFullScreen`,typeof document[n]=="function"&&(so.exitFullscreen=n)),n=`${r}FullscreenEnabled`,document[n]!==void 0?so.fullscreenEnabled=n:(n=`${r}FullScreenEnabled`,document[n]!==void 0&&(so.fullscreenEnabled=n)),n=`${r}FullscreenElement`,document[n]!==void 0?so.fullscreenElement=n:(n=`${r}FullScreenElement`,document[n]!==void 0&&(so.fullscreenElement=n)),n=`${r}fullscreenchange`,document[`on${n}`]!==void 0&&(r==="ms"&&(n="MSFullscreenChange"),so.fullscreenchange=n),n=`${r}fullscreenerror`,document[`on${n}`]!==void 0&&(r==="ms"&&(n="MSFullscreenError"),so.fullscreenerror=n)}return mu};za.requestFullscreen=function(e,t){za.supportsFullscreen()&&e[so.requestFullscreen]({vrDisplay:t})};za.exitFullscreen=function(){za.supportsFullscreen()&&document[so.exitFullscreen]()};za._names=so;var wD=za;var jr;typeof navigator<"u"?jr=navigator:jr={};function vf(e){let t=e.split(".");for(let n=0,i=t.length;n<i;++n)t[n]=parseInt(t[n],10);return t}var cE,DD;function Jb(){if(!c(cE)&&(cE=!1,!hE())){let e=/ Chrome\/([\.0-9]+)/.exec(jr.userAgent);e!==null&&(cE=!0,DD=vf(e[1]))}return cE}function OY(){return Jb()&&DD}var AE,QD;function RD(){if(!c(AE)&&(AE=!1,!Jb()&&!hE()&&/ Safari\/[\.0-9]+/.test(jr.userAgent))){let e=/ Version\/([\.0-9]+)/.exec(jr.userAgent);e!==null&&(AE=!0,QD=vf(e[1]))}return AE}function kY(){return RD()&&QD}var lE,Wb;function vD(){if(!c(lE)){lE=!1;let e=/ AppleWebKit\/([\.0-9]+)(\+?)/.exec(jr.userAgent);e!==null&&(lE=!0,Wb=vf(e[1]),Wb.isNightly=!!e[2])}return lE}function UY(){return vD()&&Wb}var np,qb;function MD(){if(!c(np)){np=!1;let e;jr.appName==="Microsoft Internet Explorer"?(e=/MSIE ([0-9]{1,}[\.0-9]{0,})/.exec(jr.userAgent),e!==null&&(np=!0,qb=vf(e[1]))):jr.appName==="Netscape"&&(e=/Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/.exec(jr.userAgent),e!==null&&(np=!0,qb=vf(e[1])))}return np}function zY(){return MD()&&qb}var uE,PD;function hE(){if(!c(uE)){uE=!1;let e=/ Edg\/([\.0-9]+)/.exec(jr.userAgent);e!==null&&(uE=!0,PD=vf(e[1]))}return uE}function GY(){return hE()&&PD}var fE,Kb;function mE(){if(!c(fE)){fE=!1;let e=/Firefox\/([\.0-9]+)/.exec(jr.userAgent);e!==null&&(fE=!0,Kb=vf(e[1]))}return fE}var Vb;function HY(){return c(Vb)||(Vb=/Windows/i.test(jr.appVersion)),Vb}var jb;function VY(){return c(jb)||(jb=navigator.platform==="iPhone"||navigator.platform==="iPod"||navigator.platform==="iPad"),jb}function jY(){return mE()&&Kb}var Yb;function YY(){return c(Yb)||(Yb=!mE()&&typeof PointerEvent<"u"&&(!c(jr.pointerEnabled)||jr.pointerEnabled)),Yb}var ND,dE;function LD(){if(!c(dE)){let e=document.createElement("canvas");e.setAttribute("style","image-rendering: -moz-crisp-edges;image-rendering: pixelated;");let t=e.style.imageRendering;dE=c(t)&&t!=="",dE&&(ND=t)}return dE}function WY(){return LD()?ND:void 0}function fa(){return fa._result}fa._promise=void 0;fa._result=void 0;fa.initialize=function(){return c(fa._promise)||(fa._promise=new Promise(e=>{let t=new Image;t.onload=function(){fa._result=t.width>0&&t.height>0,e(fa._result)},t.onerror=function(){fa._result=!1,e(fa._result)},t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA"})),fa._promise};Object.defineProperties(fa,{initialized:{get:function(){return c(fa._result)}}});var ah=[];typeof ArrayBuffer<"u"&&(ah.push(Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array),typeof Uint8ClampedArray<"u"&&ah.push(Uint8ClampedArray),typeof Uint8ClampedArray<"u"&&ah.push(Uint8ClampedArray),typeof BigInt64Array<"u"&&ah.push(BigInt64Array),typeof BigUint64Array<"u"&&ah.push(BigUint64Array));var Us={isChrome:Jb,chromeVersion:OY,isSafari:RD,safariVersion:kY,isWebkit:vD,webkitVersion:UY,isInternetExplorer:MD,internetExplorerVersion:zY,isEdge:hE,edgeVersion:GY,isFirefox:mE,firefoxVersion:jY,isWindows:HY,isIPadOrIOS:VY,hardwareConcurrency:jr.hardwareConcurrency??3,supportsPointerEvents:YY,supportsImageRenderingPixelated:LD,supportsWebP:fa,imageRenderingValue:WY,typedArrayTypes:ah};Us.supportsBasis=function(e){return Us.supportsWebAssembly()&&e.context.supportsBasis};Us.supportsFullscreen=function(){return wD.supportsFullscreen()};Us.supportsTypedArrays=function(){return typeof ArrayBuffer<"u"};Us.supportsBigInt64Array=function(){return typeof BigInt64Array<"u"};Us.supportsBigUint64Array=function(){return typeof BigUint64Array<"u"};Us.supportsBigInt=function(){return typeof BigInt<"u"};Us.supportsWebWorkers=function(){return typeof Worker<"u"};Us.supportsWebAssembly=function(){return typeof WebAssembly<"u"};Us.supportsWebgl2=function(e){return e.context.webgl2};Us.supportsEsmWebWorkers=function(){return!mE()||parseInt(Kb)>=114};var Ut=Us;function Xb(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n*6<1?e+(t-e)*6*n:n*2<1?t:n*3<2?e+(t-e)*(2/3-n)*6:e}function X(e,t,n,i){this.red=e??1,this.green=t??1,this.blue=n??1,this.alpha=i??1}X.fromCartesian4=function(e,t){return c(t)?(t.red=e.x,t.green=e.y,t.blue=e.z,t.alpha=e.w,t):new X(e.x,e.y,e.z,e.w)};X.fromBytes=function(e,t,n,i,o){return e=X.byteToFloat(e??255),t=X.byteToFloat(t??255),n=X.byteToFloat(n??255),i=X.byteToFloat(i??255),c(o)?(o.red=e,o.green=t,o.blue=n,o.alpha=i,o):new X(e,t,n,i)};X.fromAlpha=function(e,t,n){return c(n)?(n.red=e.red,n.green=e.green,n.blue=e.blue,n.alpha=t,n):new X(e.red,e.green,e.blue,t)};var Zb,$b,tl;Ut.supportsTypedArrays()&&(Zb=new ArrayBuffer(4),$b=new Uint32Array(Zb),tl=new Uint8Array(Zb));X.fromRgba=function(e,t){return $b[0]=e,X.fromBytes(tl[0],tl[1],tl[2],tl[3],t)};X.fromHsl=function(e,t,n,i,o){e=(e??0)%1,t=t??0,n=n??0,i=i??1;let r=n,a=n,s=n;if(t!==0){let A;n<.5?A=n*(1+t):A=n+t-n*t;let l=2*n-A;r=Xb(l,A,e+1/3),a=Xb(l,A,e),s=Xb(l,A,e-1/3)}return c(o)?(o.red=r,o.green=a,o.blue=s,o.alpha=i,o):new X(r,a,s,i)};X.fromRandom=function(e,t){e=e??G.EMPTY_OBJECT;let n=e.red;if(!c(n)){let a=e.minimumRed??0,s=e.maximumRed??1;n=a+S.nextRandomNumber()*(s-a)}let i=e.green;if(!c(i)){let a=e.minimumGreen??0,s=e.maximumGreen??1;i=a+S.nextRandomNumber()*(s-a)}let o=e.blue;if(!c(o)){let a=e.minimumBlue??0,s=e.maximumBlue??1;o=a+S.nextRandomNumber()*(s-a)}let r=e.alpha;if(!c(r)){let a=e.minimumAlpha??0,s=e.maximumAlpha??1;r=a+S.nextRandomNumber()*(s-a)}return c(t)?(t.red=n,t.green=i,t.blue=o,t.alpha=r,t):new X(n,i,o,r)};var qY=/^#([0-9a-f])([0-9a-f])([0-9a-f])([0-9a-f])?$/i,JY=/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})?$/i,KY=/^rgba?\s*\(\s*([0-9.]+%?)\s*[,\s]+\s*([0-9.]+%?)\s*[,\s]+\s*([0-9.]+%?)(?:\s*[,\s/]+\s*([0-9.]+))?\s*\)$/i,XY=/^hsla?\s*\(\s*([0-9.]+)\s*[,\s]+\s*([0-9.]+%)\s*[,\s]+\s*([0-9.]+%)(?:\s*[,\s/]+\s*([0-9.]+))?\s*\)$/i;X.fromCssColorString=function(e,t){c(t)||(t=new X),e=e.trim();let n=X[e.toUpperCase()];if(c(n))return X.clone(n,t),t;let i=qY.exec(e);return i!==null?(t.red=parseInt(i[1],16)/15,t.green=parseInt(i[2],16)/15,t.blue=parseInt(i[3],16)/15,t.alpha=parseInt(i[4]??"f",16)/15,t):(i=JY.exec(e),i!==null?(t.red=parseInt(i[1],16)/255,t.green=parseInt(i[2],16)/255,t.blue=parseInt(i[3],16)/255,t.alpha=parseInt(i[4]??"ff",16)/255,t):(i=KY.exec(e),i!==null?(t.red=parseFloat(i[1])/(i[1].substr(-1)==="%"?100:255),t.green=parseFloat(i[2])/(i[2].substr(-1)==="%"?100:255),t.blue=parseFloat(i[3])/(i[3].substr(-1)==="%"?100:255),t.alpha=parseFloat(i[4]??"1.0"),t):(i=XY.exec(e),i!==null?X.fromHsl(parseFloat(i[1])/360,parseFloat(i[2])/100,parseFloat(i[3])/100,parseFloat(i[4]??"1.0"),t):(t=void 0,t))))};X.packedLength=4;X.pack=function(e,t,n){return n=n??0,t[n++]=e.red,t[n++]=e.green,t[n++]=e.blue,t[n]=e.alpha,t};X.unpack=function(e,t,n){return t=t??0,c(n)||(n=new X),n.red=e[t++],n.green=e[t++],n.blue=e[t++],n.alpha=e[t],n};X.byteToFloat=function(e){return e/255};X.floatToByte=function(e){return e===1?255:e*256|0};X.clone=function(e,t){if(c(e))return c(t)?(t.red=e.red,t.green=e.green,t.blue=e.blue,t.alpha=e.alpha,t):new X(e.red,e.green,e.blue,e.alpha)};X.equals=function(e,t){return e===t||c(e)&&c(t)&&e.red===t.red&&e.green===t.green&&e.blue===t.blue&&e.alpha===t.alpha};X.equalsArray=function(e,t,n){return e.red===t[n]&&e.green===t[n+1]&&e.blue===t[n+2]&&e.alpha===t[n+3]};X.prototype.clone=function(e){return X.clone(this,e)};X.prototype.equals=function(e){return X.equals(this,e)};X.prototype.equalsEpsilon=function(e,t){return this===e||c(e)&&Math.abs(this.red-e.red)<=t&&Math.abs(this.green-e.green)<=t&&Math.abs(this.blue-e.blue)<=t&&Math.abs(this.alpha-e.alpha)<=t};X.prototype.toString=function(){return`(${this.red}, ${this.green}, ${this.blue}, ${this.alpha})`};X.prototype.toCssColorString=function(){let e=X.floatToByte(this.red),t=X.floatToByte(this.green),n=X.floatToByte(this.blue);return this.alpha===1?`rgb(${e},${t},${n})`:`rgba(${e},${t},${n},${this.alpha})`};X.prototype.toCssHexString=function(){let e=X.floatToByte(this.red).toString(16);e.length<2&&(e=`0${e}`);let t=X.floatToByte(this.green).toString(16);t.length<2&&(t=`0${t}`);let n=X.floatToByte(this.blue).toString(16);if(n.length<2&&(n=`0${n}`),this.alpha<1){let i=X.floatToByte(this.alpha).toString(16);return i.length<2&&(i=`0${i}`),`#${e}${t}${n}${i}`}return`#${e}${t}${n}`};X.prototype.toBytes=function(e){let t=X.floatToByte(this.red),n=X.floatToByte(this.green),i=X.floatToByte(this.blue),o=X.floatToByte(this.alpha);return c(e)?(e[0]=t,e[1]=n,e[2]=i,e[3]=o,e):[t,n,i,o]};X.prototype.toRgba=function(){return tl[0]=X.floatToByte(this.red),tl[1]=X.floatToByte(this.green),tl[2]=X.floatToByte(this.blue),tl[3]=X.floatToByte(this.alpha),$b[0]};X.prototype.brighten=function(e,t){return e=1-e,t.red=1-(1-this.red)*e,t.green=1-(1-this.green)*e,t.blue=1-(1-this.blue)*e,t.alpha=this.alpha,t};X.prototype.darken=function(e,t){return e=1-e,t.red=this.red*e,t.green=this.green*e,t.blue=this.blue*e,t.alpha=this.alpha,t};X.prototype.withAlpha=function(e,t){return X.fromAlpha(this,e,t)};X.add=function(e,t,n){return n.red=e.red+t.red,n.green=e.green+t.green,n.blue=e.blue+t.blue,n.alpha=e.alpha+t.alpha,n};X.subtract=function(e,t,n){return n.red=e.red-t.red,n.green=e.green-t.green,n.blue=e.blue-t.blue,n.alpha=e.alpha-t.alpha,n};X.multiply=function(e,t,n){return n.red=e.red*t.red,n.green=e.green*t.green,n.blue=e.blue*t.blue,n.alpha=e.alpha*t.alpha,n};X.divide=function(e,t,n){return n.red=e.red/t.red,n.green=e.green/t.green,n.blue=e.blue/t.blue,n.alpha=e.alpha/t.alpha,n};X.mod=function(e,t,n){return n.red=e.red%t.red,n.green=e.green%t.green,n.blue=e.blue%t.blue,n.alpha=e.alpha%t.alpha,n};X.lerp=function(e,t,n,i){return i.red=S.lerp(e.red,t.red,n),i.green=S.lerp(e.green,t.green,n),i.blue=S.lerp(e.blue,t.blue,n),i.alpha=S.lerp(e.alpha,t.alpha,n),i};X.multiplyByScalar=function(e,t,n){return n.red=e.red*t,n.green=e.green*t,n.blue=e.blue*t,n.alpha=e.alpha*t,n};X.divideByScalar=function(e,t,n){return n.red=e.red/t,n.green=e.green/t,n.blue=e.blue/t,n.alpha=e.alpha/t,n};X.ALICEBLUE=Object.freeze(X.fromCssColorString("#F0F8FF"));X.ANTIQUEWHITE=Object.freeze(X.fromCssColorString("#FAEBD7"));X.AQUA=Object.freeze(X.fromCssColorString("#00FFFF"));X.AQUAMARINE=Object.freeze(X.fromCssColorString("#7FFFD4"));X.AZURE=Object.freeze(X.fromCssColorString("#F0FFFF"));X.BEIGE=Object.freeze(X.fromCssColorString("#F5F5DC"));X.BISQUE=Object.freeze(X.fromCssColorString("#FFE4C4"));X.BLACK=Object.freeze(X.fromCssColorString("#000000"));X.BLANCHEDALMOND=Object.freeze(X.fromCssColorString("#FFEBCD"));X.BLUE=Object.freeze(X.fromCssColorString("#0000FF"));X.BLUEVIOLET=Object.freeze(X.fromCssColorString("#8A2BE2"));X.BROWN=Object.freeze(X.fromCssColorString("#A52A2A"));X.BURLYWOOD=Object.freeze(X.fromCssColorString("#DEB887"));X.CADETBLUE=Object.freeze(X.fromCssColorString("#5F9EA0"));X.CHARTREUSE=Object.freeze(X.fromCssColorString("#7FFF00"));X.CHOCOLATE=Object.freeze(X.fromCssColorString("#D2691E"));X.CORAL=Object.freeze(X.fromCssColorString("#FF7F50"));X.CORNFLOWERBLUE=Object.freeze(X.fromCssColorString("#6495ED"));X.CORNSILK=Object.freeze(X.fromCssColorString("#FFF8DC"));X.CRIMSON=Object.freeze(X.fromCssColorString("#DC143C"));X.CYAN=Object.freeze(X.fromCssColorString("#00FFFF"));X.DARKBLUE=Object.freeze(X.fromCssColorString("#00008B"));X.DARKCYAN=Object.freeze(X.fromCssColorString("#008B8B"));X.DARKGOLDENROD=Object.freeze(X.fromCssColorString("#B8860B"));X.DARKGRAY=Object.freeze(X.fromCssColorString("#A9A9A9"));X.DARKGREEN=Object.freeze(X.fromCssColorString("#006400"));X.DARKGREY=X.DARKGRAY;X.DARKKHAKI=Object.freeze(X.fromCssColorString("#BDB76B"));X.DARKMAGENTA=Object.freeze(X.fromCssColorString("#8B008B"));X.DARKOLIVEGREEN=Object.freeze(X.fromCssColorString("#556B2F"));X.DARKORANGE=Object.freeze(X.fromCssColorString("#FF8C00"));X.DARKORCHID=Object.freeze(X.fromCssColorString("#9932CC"));X.DARKRED=Object.freeze(X.fromCssColorString("#8B0000"));X.DARKSALMON=Object.freeze(X.fromCssColorString("#E9967A"));X.DARKSEAGREEN=Object.freeze(X.fromCssColorString("#8FBC8F"));X.DARKSLATEBLUE=Object.freeze(X.fromCssColorString("#483D8B"));X.DARKSLATEGRAY=Object.freeze(X.fromCssColorString("#2F4F4F"));X.DARKSLATEGREY=X.DARKSLATEGRAY;X.DARKTURQUOISE=Object.freeze(X.fromCssColorString("#00CED1"));X.DARKVIOLET=Object.freeze(X.fromCssColorString("#9400D3"));X.DEEPPINK=Object.freeze(X.fromCssColorString("#FF1493"));X.DEEPSKYBLUE=Object.freeze(X.fromCssColorString("#00BFFF"));X.DIMGRAY=Object.freeze(X.fromCssColorString("#696969"));X.DIMGREY=X.DIMGRAY;X.DODGERBLUE=Object.freeze(X.fromCssColorString("#1E90FF"));X.FIREBRICK=Object.freeze(X.fromCssColorString("#B22222"));X.FLORALWHITE=Object.freeze(X.fromCssColorString("#FFFAF0"));X.FORESTGREEN=Object.freeze(X.fromCssColorString("#228B22"));X.FUCHSIA=Object.freeze(X.fromCssColorString("#FF00FF"));X.GAINSBORO=Object.freeze(X.fromCssColorString("#DCDCDC"));X.GHOSTWHITE=Object.freeze(X.fromCssColorString("#F8F8FF"));X.GOLD=Object.freeze(X.fromCssColorString("#FFD700"));X.GOLDENROD=Object.freeze(X.fromCssColorString("#DAA520"));X.GRAY=Object.freeze(X.fromCssColorString("#808080"));X.GREEN=Object.freeze(X.fromCssColorString("#008000"));X.GREENYELLOW=Object.freeze(X.fromCssColorString("#ADFF2F"));X.GREY=X.GRAY;X.HONEYDEW=Object.freeze(X.fromCssColorString("#F0FFF0"));X.HOTPINK=Object.freeze(X.fromCssColorString("#FF69B4"));X.INDIANRED=Object.freeze(X.fromCssColorString("#CD5C5C"));X.INDIGO=Object.freeze(X.fromCssColorString("#4B0082"));X.IVORY=Object.freeze(X.fromCssColorString("#FFFFF0"));X.KHAKI=Object.freeze(X.fromCssColorString("#F0E68C"));X.LAVENDER=Object.freeze(X.fromCssColorString("#E6E6FA"));X.LAVENDAR_BLUSH=Object.freeze(X.fromCssColorString("#FFF0F5"));X.LAWNGREEN=Object.freeze(X.fromCssColorString("#7CFC00"));X.LEMONCHIFFON=Object.freeze(X.fromCssColorString("#FFFACD"));X.LIGHTBLUE=Object.freeze(X.fromCssColorString("#ADD8E6"));X.LIGHTCORAL=Object.freeze(X.fromCssColorString("#F08080"));X.LIGHTCYAN=Object.freeze(X.fromCssColorString("#E0FFFF"));X.LIGHTGOLDENRODYELLOW=Object.freeze(X.fromCssColorString("#FAFAD2"));X.LIGHTGRAY=Object.freeze(X.fromCssColorString("#D3D3D3"));X.LIGHTGREEN=Object.freeze(X.fromCssColorString("#90EE90"));X.LIGHTGREY=X.LIGHTGRAY;X.LIGHTPINK=Object.freeze(X.fromCssColorString("#FFB6C1"));X.LIGHTSEAGREEN=Object.freeze(X.fromCssColorString("#20B2AA"));X.LIGHTSKYBLUE=Object.freeze(X.fromCssColorString("#87CEFA"));X.LIGHTSLATEGRAY=Object.freeze(X.fromCssColorString("#778899"));X.LIGHTSLATEGREY=X.LIGHTSLATEGRAY;X.LIGHTSTEELBLUE=Object.freeze(X.fromCssColorString("#B0C4DE"));X.LIGHTYELLOW=Object.freeze(X.fromCssColorString("#FFFFE0"));X.LIME=Object.freeze(X.fromCssColorString("#00FF00"));X.LIMEGREEN=Object.freeze(X.fromCssColorString("#32CD32"));X.LINEN=Object.freeze(X.fromCssColorString("#FAF0E6"));X.MAGENTA=Object.freeze(X.fromCssColorString("#FF00FF"));X.MAROON=Object.freeze(X.fromCssColorString("#800000"));X.MEDIUMAQUAMARINE=Object.freeze(X.fromCssColorString("#66CDAA"));X.MEDIUMBLUE=Object.freeze(X.fromCssColorString("#0000CD"));X.MEDIUMORCHID=Object.freeze(X.fromCssColorString("#BA55D3"));X.MEDIUMPURPLE=Object.freeze(X.fromCssColorString("#9370DB"));X.MEDIUMSEAGREEN=Object.freeze(X.fromCssColorString("#3CB371"));X.MEDIUMSLATEBLUE=Object.freeze(X.fromCssColorString("#7B68EE"));X.MEDIUMSPRINGGREEN=Object.freeze(X.fromCssColorString("#00FA9A"));X.MEDIUMTURQUOISE=Object.freeze(X.fromCssColorString("#48D1CC"));X.MEDIUMVIOLETRED=Object.freeze(X.fromCssColorString("#C71585"));X.MIDNIGHTBLUE=Object.freeze(X.fromCssColorString("#191970"));X.MINTCREAM=Object.freeze(X.fromCssColorString("#F5FFFA"));X.MISTYROSE=Object.freeze(X.fromCssColorString("#FFE4E1"));X.MOCCASIN=Object.freeze(X.fromCssColorString("#FFE4B5"));X.NAVAJOWHITE=Object.freeze(X.fromCssColorString("#FFDEAD"));X.NAVY=Object.freeze(X.fromCssColorString("#000080"));X.OLDLACE=Object.freeze(X.fromCssColorString("#FDF5E6"));X.OLIVE=Object.freeze(X.fromCssColorString("#808000"));X.OLIVEDRAB=Object.freeze(X.fromCssColorString("#6B8E23"));X.ORANGE=Object.freeze(X.fromCssColorString("#FFA500"));X.ORANGERED=Object.freeze(X.fromCssColorString("#FF4500"));X.ORCHID=Object.freeze(X.fromCssColorString("#DA70D6"));X.PALEGOLDENROD=Object.freeze(X.fromCssColorString("#EEE8AA"));X.PALEGREEN=Object.freeze(X.fromCssColorString("#98FB98"));X.PALETURQUOISE=Object.freeze(X.fromCssColorString("#AFEEEE"));X.PALEVIOLETRED=Object.freeze(X.fromCssColorString("#DB7093"));X.PAPAYAWHIP=Object.freeze(X.fromCssColorString("#FFEFD5"));X.PEACHPUFF=Object.freeze(X.fromCssColorString("#FFDAB9"));X.PERU=Object.freeze(X.fromCssColorString("#CD853F"));X.PINK=Object.freeze(X.fromCssColorString("#FFC0CB"));X.PLUM=Object.freeze(X.fromCssColorString("#DDA0DD"));X.POWDERBLUE=Object.freeze(X.fromCssColorString("#B0E0E6"));X.PURPLE=Object.freeze(X.fromCssColorString("#800080"));X.RED=Object.freeze(X.fromCssColorString("#FF0000"));X.ROSYBROWN=Object.freeze(X.fromCssColorString("#BC8F8F"));X.ROYALBLUE=Object.freeze(X.fromCssColorString("#4169E1"));X.SADDLEBROWN=Object.freeze(X.fromCssColorString("#8B4513"));X.SALMON=Object.freeze(X.fromCssColorString("#FA8072"));X.SANDYBROWN=Object.freeze(X.fromCssColorString("#F4A460"));X.SEAGREEN=Object.freeze(X.fromCssColorString("#2E8B57"));X.SEASHELL=Object.freeze(X.fromCssColorString("#FFF5EE"));X.SIENNA=Object.freeze(X.fromCssColorString("#A0522D"));X.SILVER=Object.freeze(X.fromCssColorString("#C0C0C0"));X.SKYBLUE=Object.freeze(X.fromCssColorString("#87CEEB"));X.SLATEBLUE=Object.freeze(X.fromCssColorString("#6A5ACD"));X.SLATEGRAY=Object.freeze(X.fromCssColorString("#708090"));X.SLATEGREY=X.SLATEGRAY;X.SNOW=Object.freeze(X.fromCssColorString("#FFFAFA"));X.SPRINGGREEN=Object.freeze(X.fromCssColorString("#00FF7F"));X.STEELBLUE=Object.freeze(X.fromCssColorString("#4682B4"));X.TAN=Object.freeze(X.fromCssColorString("#D2B48C"));X.TEAL=Object.freeze(X.fromCssColorString("#008080"));X.THISTLE=Object.freeze(X.fromCssColorString("#D8BFD8"));X.TOMATO=Object.freeze(X.fromCssColorString("#FF6347"));X.TURQUOISE=Object.freeze(X.fromCssColorString("#40E0D0"));X.VIOLET=Object.freeze(X.fromCssColorString("#EE82EE"));X.WHEAT=Object.freeze(X.fromCssColorString("#F5DEB3"));X.WHITE=Object.freeze(X.fromCssColorString("#FFFFFF"));X.WHITESMOKE=Object.freeze(X.fromCssColorString("#F5F5F5"));X.YELLOW=Object.freeze(X.fromCssColorString("#FFFF00"));X.YELLOWGREEN=Object.freeze(X.fromCssColorString("#9ACD32"));X.TRANSPARENT=Object.freeze(new X(0,0,0,0));var J=X;function pE(e){e=e??G.EMPTY_OBJECT,this.color=e.color,this.depth=e.depth,this.stencil=e.stencil,this.renderState=e.renderState,this.framebuffer=e.framebuffer,this.owner=e.owner,this.pass=e.pass}pE.ALL=Object.freeze(new pE({color:new J(0,0,0,0),depth:1,stencil:0}));pE.prototype.execute=function(e,t){e.clear(this,t)};var gE=pE;var ZY={ENVIRONMENT:0,COMPUTE:1,GLOBE:2,TERRAIN_CLASSIFICATION:3,CESIUM_3D_TILE:4,CESIUM_3D_TILE_CLASSIFICATION:5,CESIUM_3D_TILE_CLASSIFICATION_IGNORE_SHOW:6,OPAQUE:7,TRANSLUCENT:8,VOXELS:9,GAUSSIAN_SPLATS:10,OVERLAY:11,NUMBER_OF_PASSES:12},He=Object.freeze(ZY);function FD(e){e=e??G.EMPTY_OBJECT,this.vertexArray=e.vertexArray,this.fragmentShaderSource=e.fragmentShaderSource,this.shaderProgram=e.shaderProgram,this.uniformMap=e.uniformMap,this.outputTexture=e.outputTexture,this.preExecute=e.preExecute,this.postExecute=e.postExecute,this.canceled=e.canceled,this.persists=e.persists??!1,this.pass=He.COMPUTE,this.owner=e.owner}FD.prototype.execute=function(e){e.execute(this)};var pu=FD;function ot(e,t){this.x=e??0,this.y=t??0}ot.fromElements=function(e,t,n){return c(n)?(n.x=e,n.y=t,n):new ot(e,t)};ot.clone=function(e,t){if(c(e))return c(t)?(t.x=e.x,t.y=e.y,t):new ot(e.x,e.y)};ot.fromCartesian3=ot.clone;ot.fromCartesian4=ot.clone;ot.packedLength=2;ot.pack=function(e,t,n){return n=n??0,t[n++]=e.x,t[n]=e.y,t};ot.unpack=function(e,t,n){return t=t??0,c(n)||(n=new ot),n.x=e[t++],n.y=e[t],n};ot.packArray=function(e,t){let n=e.length,i=n*2;c(t)?!Array.isArray(t)&&t.length!==i||t.length!==i&&(t.length=i):t=new Array(i);for(let o=0;o<n;++o)ot.pack(e[o],t,o*2);return t};ot.unpackArray=function(e,t){let n=e.length;c(t)?t.length=n/2:t=new Array(n/2);for(let i=0;i<n;i+=2){let o=i/2;t[o]=ot.unpack(e,i,t[o])}return t};ot.fromArray=ot.unpack;ot.maximumComponent=function(e){return Math.max(e.x,e.y)};ot.minimumComponent=function(e){return Math.min(e.x,e.y)};ot.minimumByComponent=function(e,t,n){return n.x=Math.min(e.x,t.x),n.y=Math.min(e.y,t.y),n};ot.maximumByComponent=function(e,t,n){return n.x=Math.max(e.x,t.x),n.y=Math.max(e.y,t.y),n};ot.clamp=function(e,t,n,i){let o=S.clamp(e.x,t.x,n.x),r=S.clamp(e.y,t.y,n.y);return i.x=o,i.y=r,i};ot.magnitudeSquared=function(e){return e.x*e.x+e.y*e.y};ot.magnitude=function(e){return Math.sqrt(ot.magnitudeSquared(e))};var CE=new ot;ot.distance=function(e,t){return ot.subtract(e,t,CE),ot.magnitude(CE)};ot.distanceSquared=function(e,t){return ot.subtract(e,t,CE),ot.magnitudeSquared(CE)};ot.normalize=function(e,t){let n=ot.magnitude(e);return t.x=e.x/n,t.y=e.y/n,t};ot.dot=function(e,t){return e.x*t.x+e.y*t.y};ot.cross=function(e,t){return e.x*t.y-e.y*t.x};ot.multiplyComponents=function(e,t,n){return n.x=e.x*t.x,n.y=e.y*t.y,n};ot.divideComponents=function(e,t,n){return n.x=e.x/t.x,n.y=e.y/t.y,n};ot.add=function(e,t,n){return n.x=e.x+t.x,n.y=e.y+t.y,n};ot.subtract=function(e,t,n){return n.x=e.x-t.x,n.y=e.y-t.y,n};ot.multiplyByScalar=function(e,t,n){return n.x=e.x*t,n.y=e.y*t,n};ot.divideByScalar=function(e,t,n){return n.x=e.x/t,n.y=e.y/t,n};ot.negate=function(e,t){return t.x=-e.x,t.y=-e.y,t};ot.abs=function(e,t){return t.x=Math.abs(e.x),t.y=Math.abs(e.y),t};var OD=new ot;ot.lerp=function(e,t,n,i){return ot.multiplyByScalar(t,n,OD),i=ot.multiplyByScalar(e,1-n,i),ot.add(OD,i,i)};var kD=new ot,UD=new ot;ot.angleBetween=function(e,t){return ot.normalize(e,kD),ot.normalize(t,UD),S.acosClamped(ot.dot(kD,UD))};var $Y=new ot;ot.mostOrthogonalAxis=function(e,t){let n=ot.normalize(e,$Y);return ot.abs(n,n),n.x<=n.y?t=ot.clone(ot.UNIT_X,t):t=ot.clone(ot.UNIT_Y,t),t};ot.equals=function(e,t){return e===t||c(e)&&c(t)&&e.x===t.x&&e.y===t.y};ot.equalsArray=function(e,t,n){return e.x===t[n]&&e.y===t[n+1]};ot.equalsEpsilon=function(e,t,n,i){return e===t||c(e)&&c(t)&&S.equalsEpsilon(e.x,t.x,n,i)&&S.equalsEpsilon(e.y,t.y,n,i)};ot.ZERO=Object.freeze(new ot(0,0));ot.ONE=Object.freeze(new ot(1,1));ot.UNIT_X=Object.freeze(new ot(1,0));ot.UNIT_Y=Object.freeze(new ot(0,1));ot.prototype.clone=function(e){return ot.clone(this,e)};ot.prototype.equals=function(e){return ot.equals(this,e)};ot.prototype.equalsEpsilon=function(e,t,n){return ot.equalsEpsilon(this,e,t,n)};ot.prototype.toString=function(){return`(${this.x}, ${this.y})`};var L=ot;var eW=new f,tW=new f;function nW(e,t,n,i,o){let r=e.x,a=e.y,s=e.z,A=t.x,l=t.y,d=t.z,m=r*r*A*A,p=a*a*l*l,g=s*s*d*d,h=m+p+g,C=Math.sqrt(1/h),_=f.multiplyByScalar(e,C,eW);if(h<i)return isFinite(C)?f.clone(_,o):void 0;let I=n.x,b=n.y,x=n.z,T=tW;T.x=_.x*I*2,T.y=_.y*b*2,T.z=_.z*x*2;let w=(1-C)*f.magnitude(e)/(.5*f.magnitude(T)),R=0,z,M,N,O,u,E,y,B,D,v,F;do{w-=R,N=1/(1+w*I),O=1/(1+w*b),u=1/(1+w*x),E=N*N,y=O*O,B=u*u,D=E*N,v=y*O,F=B*u,z=m*E+p*y+g*B-1,M=m*D*I+p*v*b+g*F*x;let P=-2*M;R=z/P}while(Math.abs(z)>S.EPSILON12);return c(o)?(o.x=r*N,o.y=a*O,o.z=s*u,o):new f(r*N,a*O,s*u)}var EE=nW;function xi(e,t,n){this.longitude=e??0,this.latitude=t??0,this.height=n??0}xi.fromRadians=function(e,t,n,i){return n=n??0,c(i)?(i.longitude=e,i.latitude=t,i.height=n,i):new xi(e,t,n)};xi.fromDegrees=function(e,t,n,i){return e=S.toRadians(e),t=S.toRadians(t),xi.fromRadians(e,t,n,i)};var iW=new f,oW=new f,rW=new f;xi._ellipsoidOneOverRadii=new f(1/6378137,1/6378137,1/6356752314245179e-9);xi._ellipsoidOneOverRadiiSquared=new f(1/(6378137*6378137),1/(6378137*6378137),1/(6356752314245179e-9*6356752314245179e-9));xi._ellipsoidCenterToleranceSquared=S.EPSILON1;xi.fromCartesian=function(e,t,n){let i=c(t)?t.oneOverRadii:xi._ellipsoidOneOverRadii,o=c(t)?t.oneOverRadiiSquared:xi._ellipsoidOneOverRadiiSquared,r=c(t)?t._centerToleranceSquared:xi._ellipsoidCenterToleranceSquared,a=EE(e,i,o,r,oW);if(!c(a))return;let s=f.multiplyComponents(a,o,iW);s=f.normalize(s,s);let A=f.subtract(e,a,rW),l=Math.atan2(s.y,s.x),d=Math.asin(s.z),m=S.sign(f.dot(A,e))*f.magnitude(A);return c(n)?(n.longitude=l,n.latitude=d,n.height=m,n):new xi(l,d,m)};xi.toCartesian=function(e,t,n){return f.fromRadians(e.longitude,e.latitude,e.height,t,n)};xi.clone=function(e,t){if(c(e))return c(t)?(t.longitude=e.longitude,t.latitude=e.latitude,t.height=e.height,t):new xi(e.longitude,e.latitude,e.height)};xi.equals=function(e,t){return e===t||c(e)&&c(t)&&e.longitude===t.longitude&&e.latitude===t.latitude&&e.height===t.height};xi.equalsEpsilon=function(e,t,n){return n=n??0,e===t||c(e)&&c(t)&&Math.abs(e.longitude-t.longitude)<=n&&Math.abs(e.latitude-t.latitude)<=n&&Math.abs(e.height-t.height)<=n};xi.ZERO=Object.freeze(new xi(0,0,0));xi.prototype.clone=function(e){return xi.clone(this,e)};xi.prototype.equals=function(e){return xi.equals(this,e)};xi.prototype.equalsEpsilon=function(e,t){return xi.equalsEpsilon(this,e,t)};xi.prototype.toString=function(){return`(${this.longitude}, ${this.latitude}, ${this.height})`};var ue=xi;function GD(e,t,n,i){t=t??0,n=n??0,i=i??0,e._radii=new f(t,n,i),e._radiiSquared=new f(t*t,n*n,i*i),e._radiiToTheFourth=new f(t*t*t*t,n*n*n*n,i*i*i*i),e._oneOverRadii=new f(t===0?0:1/t,n===0?0:1/n,i===0?0:1/i),e._oneOverRadiiSquared=new f(t===0?0:1/(t*t),n===0?0:1/(n*n),i===0?0:1/(i*i)),e._minimumRadius=Math.min(t,n,i),e._maximumRadius=Math.max(t,n,i),e._centerToleranceSquared=S.EPSILON1,e._radiiSquared.z!==0&&(e._squaredXOverSquaredZ=e._radiiSquared.x/e._radiiSquared.z)}function ln(e,t,n){this._radii=void 0,this._radiiSquared=void 0,this._radiiToTheFourth=void 0,this._oneOverRadii=void 0,this._oneOverRadiiSquared=void 0,this._minimumRadius=void 0,this._maximumRadius=void 0,this._centerToleranceSquared=void 0,this._squaredXOverSquaredZ=void 0,GD(this,e,t,n)}Object.defineProperties(ln.prototype,{radii:{get:function(){return this._radii}},radiiSquared:{get:function(){return this._radiiSquared}},radiiToTheFourth:{get:function(){return this._radiiToTheFourth}},oneOverRadii:{get:function(){return this._oneOverRadii}},oneOverRadiiSquared:{get:function(){return this._oneOverRadiiSquared}},minimumRadius:{get:function(){return this._minimumRadius}},maximumRadius:{get:function(){return this._maximumRadius}}});ln.clone=function(e,t){if(!c(e))return;let n=e._radii;return c(t)?(f.clone(n,t._radii),f.clone(e._radiiSquared,t._radiiSquared),f.clone(e._radiiToTheFourth,t._radiiToTheFourth),f.clone(e._oneOverRadii,t._oneOverRadii),f.clone(e._oneOverRadiiSquared,t._oneOverRadiiSquared),t._minimumRadius=e._minimumRadius,t._maximumRadius=e._maximumRadius,t._centerToleranceSquared=e._centerToleranceSquared,t):new ln(n.x,n.y,n.z)};ln.fromCartesian3=function(e,t){return c(t)||(t=new ln),c(e)&&GD(t,e.x,e.y,e.z),t};ln.WGS84=Object.freeze(new ln(6378137,6378137,6356752314245179e-9));ln.UNIT_SPHERE=Object.freeze(new ln(1,1,1));ln.MOON=Object.freeze(new ln(S.LUNAR_RADIUS,S.LUNAR_RADIUS,S.LUNAR_RADIUS));ln.MARS=Object.freeze(new ln(3396190,3396190,3376200));ln._default=ln.WGS84;Object.defineProperties(ln,{default:{get:function(){return ln._default},set:function(e){ln._default=e,f._ellipsoidRadiiSquared=e.radiiSquared,ue._ellipsoidOneOverRadii=e.oneOverRadii,ue._ellipsoidOneOverRadiiSquared=e.oneOverRadiiSquared,ue._ellipsoidCenterToleranceSquared=e._centerToleranceSquared}}});ln.prototype.clone=function(e){return ln.clone(this,e)};ln.packedLength=f.packedLength;ln.pack=function(e,t,n){return n=n??0,f.pack(e._radii,t,n),t};ln.unpack=function(e,t,n){t=t??0;let i=f.unpack(e,t);return ln.fromCartesian3(i,n)};ln.prototype.geocentricSurfaceNormal=f.normalize;ln.prototype.geodeticSurfaceNormalCartographic=function(e,t){let n=e.longitude,i=e.latitude,o=Math.cos(i),r=o*Math.cos(n),a=o*Math.sin(n),s=Math.sin(i);return c(t)||(t=new f),t.x=r,t.y=a,t.z=s,f.normalize(t,t)};ln.prototype.geodeticSurfaceNormal=function(e,t){if(!f.equalsEpsilon(e,f.ZERO,S.EPSILON14))return c(t)||(t=new f),t=f.multiplyComponents(e,this._oneOverRadiiSquared,t),f.normalize(t,t)};var aW=new f,sW=new f;ln.prototype.cartographicToCartesian=function(e,t){let n=aW,i=sW;this.geodeticSurfaceNormalCartographic(e,n),f.multiplyComponents(this._radiiSquared,n,i);let o=Math.sqrt(f.dot(n,i));return f.divideByScalar(i,o,i),f.multiplyByScalar(n,e.height,n),c(t)||(t=new f),f.add(i,n,t)};ln.prototype.cartographicArrayToCartesianArray=function(e,t){let n=e.length;c(t)?t.length=n:t=new Array(n);for(let i=0;i<n;i++)t[i]=this.cartographicToCartesian(e[i],t[i]);return t};var cW=new f,AW=new f,lW=new f;ln.prototype.cartesianToCartographic=function(e,t){let n=this.scaleToGeodeticSurface(e,AW);if(!c(n))return;let i=this.geodeticSurfaceNormal(n,cW),o=f.subtract(e,n,lW),r=Math.atan2(i.y,i.x),a=Math.asin(i.z),s=S.sign(f.dot(o,e))*f.magnitude(o);return c(t)?(t.longitude=r,t.latitude=a,t.height=s,t):new ue(r,a,s)};ln.prototype.cartesianArrayToCartographicArray=function(e,t){let n=e.length;c(t)?t.length=n:t=new Array(n);for(let i=0;i<n;++i)t[i]=this.cartesianToCartographic(e[i],t[i]);return t};ln.prototype.scaleToGeodeticSurface=function(e,t){return EE(e,this._oneOverRadii,this._oneOverRadiiSquared,this._centerToleranceSquared,t)};ln.prototype.scaleToGeocentricSurface=function(e,t){c(t)||(t=new f);let n=e.x,i=e.y,o=e.z,r=this._oneOverRadiiSquared,a=1/Math.sqrt(n*n*r.x+i*i*r.y+o*o*r.z);return f.multiplyByScalar(e,a,t)};ln.prototype.transformPositionToScaledSpace=function(e,t){return c(t)||(t=new f),f.multiplyComponents(e,this._oneOverRadii,t)};ln.prototype.transformPositionFromScaledSpace=function(e,t){return c(t)||(t=new f),f.multiplyComponents(e,this._radii,t)};ln.prototype.equals=function(e){return this===e||c(e)&&f.equals(this._radii,e._radii)};ln.prototype.toString=function(){return this._radii.toString()};ln.prototype.getSurfaceNormalIntersectionWithZAxis=function(e,t,n){t=t??0;let i=this._squaredXOverSquaredZ;if(c(n)||(n=new f),n.x=0,n.y=0,n.z=e.z*(1-i),!(Math.abs(n.z)>=this._radii.z-t))return n};var uW=new f;ln.prototype.getLocalCurvature=function(e,t){c(t)||(t=new L);let n=this.getSurfaceNormalIntersectionWithZAxis(e,0,uW),i=f.distance(e,n),o=this.minimumRadius*i/this.maximumRadius**2,r=i*o**2;return L.fromElements(1/i,1/r,t)};var fW=[.14887433898163,.43339539412925,.67940956829902,.86506336668898,.97390652851717,0],dW=[.29552422471475,.26926671930999,.21908636251598,.14945134915058,.066671344308684,0];function zD(e,t,n){let i=.5*(t+e),o=.5*(t-e),r=0;for(let a=0;a<5;a++){let s=o*fW[a];r+=dW[a]*(n(i+s)+n(i-s))}return r*=o,r}ln.prototype.surfaceArea=function(e){let t=e.west,n=e.east,i=e.south,o=e.north;for(;n<t;)n+=S.TWO_PI;let r=this._radiiSquared,a=r.x,s=r.y,A=r.z,l=a*s;return zD(i,o,function(d){let m=Math.cos(d),p=Math.sin(d);return Math.cos(d)*zD(t,n,function(g){let h=Math.cos(g),C=Math.sin(g);return Math.sqrt(l*p*p+A*(s*h*h+a*C*C)*m*m)})})};var pe=ln;function _E(e){this._ellipsoid=e??pe.default,this._semimajorAxis=this._ellipsoid.maximumRadius,this._oneOverSemimajorAxis=1/this._semimajorAxis}Object.defineProperties(_E.prototype,{ellipsoid:{get:function(){return this._ellipsoid}}});_E.prototype.project=function(e,t){let n=this._semimajorAxis,i=e.longitude*n,o=e.latitude*n,r=e.height;return c(t)?(t.x=i,t.y=o,t.z=r,t):new f(i,o,r)};_E.prototype.unproject=function(e,t){let n=this._oneOverSemimajorAxis,i=e.x*n,o=e.y*n,r=e.z;return c(t)?(t.longitude=i,t.latitude=o,t.height=r,t):new ue(i,o,r)};var Ai=_E;var hW={OUTSIDE:-1,INTERSECTING:0,INSIDE:1},bt=Object.freeze(hW);function mW(e,t,n){let i=0,o=e.length-1,r,a;for(;i<=o;){if(r=~~((i+o)/2),a=n(e[r],t),a<0){i=r+1;continue}if(a>0){o=r-1;continue}return r}return~(o+1)}var nl=mW;function pW(e,t,n,i,o){this.xPoleWander=e,this.yPoleWander=t,this.xPoleOffset=n,this.yPoleOffset=i,this.ut1MinusUtc=o}var ip=pW;function gW(e){return e%4===0&&e%100!==0||e%400===0}var op=gW;var HD=[31,28,31,30,31,30,31,31,30,31,30,31];function CW(e,t,n,i,o,r,a,s){e=e??1,t=t??1,n=n??1,i=i??0,o=o??0,r=r??0,a=a??0,s=s??!1,this.year=e,this.month=t,this.day=n,this.hour=i,this.minute=o,this.second=r,this.millisecond=a,this.isLeapSecond=s;function C(){$n.typeOf.number.greaterThanOrEquals("Year",e,1),$n.typeOf.number.lessThanOrEquals("Year",e,9999),$n.typeOf.number.greaterThanOrEquals("Month",t,1),$n.typeOf.number.lessThanOrEquals("Month",t,12),$n.typeOf.number.greaterThanOrEquals("Day",n,1),$n.typeOf.number.lessThanOrEquals("Day",n,31),$n.typeOf.number.greaterThanOrEquals("Hour",i,0),$n.typeOf.number.lessThanOrEquals("Hour",i,23),$n.typeOf.number.greaterThanOrEquals("Minute",o,0),$n.typeOf.number.lessThanOrEquals("Minute",o,59),$n.typeOf.bool("IsLeapSecond",s),$n.typeOf.number.greaterThanOrEquals("Second",r,0),$n.typeOf.number.lessThanOrEquals("Second",r,s?60:59),$n.typeOf.number.greaterThanOrEquals("Millisecond",a,0),$n.typeOf.number.lessThan("Millisecond",a,1e3)}function _(){let I=t===2&&op(e)?HD[t-1]+1:HD[t-1];if(n>I)throw new be("Month and Day represents invalid date")}}var e0=CW;function EW(e,t){this.julianDate=e,this.offset=t}var Vn=EW;var _W={SECONDS_PER_MILLISECOND:.001,SECONDS_PER_MINUTE:60,MINUTES_PER_HOUR:60,HOURS_PER_DAY:24,SECONDS_PER_HOUR:3600,MINUTES_PER_DAY:1440,SECONDS_PER_DAY:86400,DAYS_PER_JULIAN_CENTURY:36525,PICOSECOND:1e-9,MODIFIED_JULIAN_DATE_DIFFERENCE:24000005e-1},Ti=Object.freeze(_W);var IW={UTC:0,TAI:1},un=Object.freeze(IW);var jD=new e0,t0=[31,28,31,30,31,30,31,31,30,31,30,31],n0=29;function i0(e,t){return $e.compare(e.julianDate,t.julianDate)}var sh=new Vn;function yE(e){sh.julianDate=e;let t=$e.leapSeconds,n=nl(t,sh,i0);n<0&&(n=~n),n>=t.length&&(n=t.length-1);let i=t[n].offset;n>0&&$e.secondsDifference(t[n].julianDate,e)>i&&(n--,i=t[n].offset),$e.addSeconds(e,i,e)}function VD(e,t){sh.julianDate=e;let n=$e.leapSeconds,i=nl(n,sh,i0);if(i<0&&(i=~i),i===0)return $e.addSeconds(e,-n[0].offset,t);if(i>=n.length)return $e.addSeconds(e,-n[i-1].offset,t);let o=$e.secondsDifference(n[i].julianDate,e);if(o===0)return $e.addSeconds(e,-n[i].offset,t);if(!(o<=1))return $e.addSeconds(e,-n[--i].offset,t)}function gu(e,t,n){let i=t/Ti.SECONDS_PER_DAY|0;return e+=i,t-=Ti.SECONDS_PER_DAY*i,t<0&&(e--,t+=Ti.SECONDS_PER_DAY),n.dayNumber=e,n.secondsOfDay=t,n}function o0(e,t,n,i,o,r,a){let s=(t-14)/12|0,A=e+4800+s,l=(1461*A/4|0)+(367*(t-2-12*s)/12|0)-(3*((A+100)/100|0)/4|0)+n-32075;i=i-12,i<0&&(i+=24);let d=r+(i*Ti.SECONDS_PER_HOUR+o*Ti.SECONDS_PER_MINUTE+a*Ti.SECONDS_PER_MILLISECOND);return d>=43200&&(l-=1),[l,d]}var yW=/^(\d{4})$/,bW=/^(\d{4})-(\d{2})$/,BW=/^(\d{4})-?(\d{3})$/,xW=/^(\d{4})-?W(\d{2})-?(\d{1})?$/,TW=/^(\d{4})-?(\d{2})-?(\d{2})$/,r0=/([Z+\-])?(\d{2})?:?(\d{2})?$/,SW=/^(\d{2})(\.\d+)?/.source+r0.source,wW=/^(\d{2}):?(\d{2})(\.\d+)?/.source+r0.source,DW=/^(\d{2}):?(\d{2}):?(\d{2})(\.\d+)?/.source+r0.source;function $e(e,t,n){this.dayNumber=void 0,this.secondsOfDay=void 0,e=e??0,t=t??0,n=n??un.UTC;let i=e|0;t=t+(e-i)*Ti.SECONDS_PER_DAY,gu(i,t,this),n===un.UTC&&yE(this)}$e.fromGregorianDate=function(e,t){let n=o0(e.year,e.month,e.day,e.hour,e.minute,e.second,e.millisecond);return c(t)?(gu(n[0],n[1],t),yE(t),t):new $e(n[0],n[1],un.UTC)};$e.fromDate=function(e,t){let n=o0(e.getUTCFullYear(),e.getUTCMonth()+1,e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds());return c(t)?(gu(n[0],n[1],t),yE(t),t):new $e(n[0],n[1],un.UTC)};$e.fromIso8601=function(e,t){e=e.replace(",",".");let n=e.split("T"),i,o=1,r=1,a=0,s=0,A=0,l=0,d=n[0],m=n[1],p,g;if(n=d.match(TW),n!==null)i=+n[1],o=+n[2],r=+n[3];else if(n=d.match(bW),n!==null)i=+n[1],o=+n[2];else if(n=d.match(yW),n!==null)i=+n[1];else{let I;if(n=d.match(BW),n!==null)i=+n[1],I=+n[2],g=op(i);else if(n=d.match(xW),n!==null){i=+n[1];let b=+n[2],x=+n[3]||0,T=new Date(Date.UTC(i,0,4));I=b*7+x-T.getUTCDay()-3}p=new Date(Date.UTC(i,0,1)),p.setUTCDate(I),o=p.getUTCMonth()+1,r=p.getUTCDate()}g=op(i);let h;if(c(m)){n=m.match(DW),n!==null?(a=+n[1],s=+n[2],A=+n[3],l=+(n[4]||0)*1e3,h=5):(n=m.match(wW),n!==null?(a=+n[1],s=+n[2],A=+(n[3]||0)*60,h=4):(n=m.match(SW),n!==null&&(a=+n[1],s=+(n[2]||0)*60,h=3)));let I=n[h],b=+n[h+1],x=+(n[h+2]||0);switch(I){case"+":a=a-b,s=s-x;break;case"-":a=a+b,s=s+x;break;case"Z":break;default:s=s+new Date(Date.UTC(i,o-1,r,a,s)).getTimezoneOffset();break}}let C=A===60;for(C&&A--;s>=60;)s-=60,a++;for(;a>=24;)a-=24,r++;for(p=g&&o===2?n0:t0[o-1];r>p;)r-=p,o++,o>12&&(o-=12,i++),p=g&&o===2?n0:t0[o-1];for(;s<0;)s+=60,a--;for(;a<0;)a+=24,r--;for(;r<1;)o--,o<1&&(o+=12,i--),p=g&&o===2?n0:t0[o-1],r+=p;let _=o0(i,o,r,a,s,A,l);return c(t)?(gu(_[0],_[1],t),yE(t)):t=new $e(_[0],_[1],un.UTC),C&&$e.addSeconds(t,1,t),t};$e.now=function(e){return $e.fromDate(new Date,e)};var IE=new $e(0,0,un.TAI);$e.toGregorianDate=function(e,t){let n=!1,i=VD(e,IE);c(i)||($e.addSeconds(e,-1,IE),i=VD(IE,IE),n=!0);let o=i.dayNumber,r=i.secondsOfDay;r>=43200&&(o+=1);let a=o+68569|0,s=4*a/146097|0;a=a-((146097*s+3)/4|0)|0;let A=4e3*(a+1)/1461001|0;a=a-(1461*A/4|0)+31|0;let l=80*a/2447|0,d=a-(2447*l/80|0)|0;a=l/11|0;let m=l+2-12*a|0,p=100*(s-49)+A+a|0,g=r/Ti.SECONDS_PER_HOUR|0,h=r-g*Ti.SECONDS_PER_HOUR,C=h/Ti.SECONDS_PER_MINUTE|0;h=h-C*Ti.SECONDS_PER_MINUTE;let _=h|0,I=(h-_)/Ti.SECONDS_PER_MILLISECOND;return g+=12,g>23&&(g-=24),n&&(_+=1),c(t)?(t.year=p,t.month=m,t.day=d,t.hour=g,t.minute=C,t.second=_,t.millisecond=I,t.isLeapSecond=n,t):new e0(p,m,d,g,C,_,I,n)};$e.toDate=function(e){let t=$e.toGregorianDate(e,jD),n=t.second;return t.isLeapSecond&&(n-=1),new Date(Date.UTC(t.year,t.month-1,t.day,t.hour,t.minute,n,t.millisecond))};$e.toIso8601=function(e,t){let n=$e.toGregorianDate(e,jD),i=n.year,o=n.month,r=n.day,a=n.hour,s=n.minute,A=n.second,l=n.millisecond;i===1e4&&o===1&&r===1&&a===0&&s===0&&A===0&&l===0&&(i=9999,o=12,r=31,a=24);let d;if(!c(t)&&l!==0){let m=l*.01;return d=m<1e-6?m.toFixed(20).replace(".","").replace(/0+$/,""):m.toString().replace(".",""),`${i.toString().padStart(4,"0")}-${o.toString().padStart(2,"0")}-${r.toString().padStart(2,"0")}T${a.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}:${A.toString().padStart(2,"0")}.${d}Z`}return!c(t)||t===0?`${i.toString().padStart(4,"0")}-${o.toString().padStart(2,"0")}-${r.toString().padStart(2,"0")}T${a.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}:${A.toString().padStart(2,"0")}Z`:(d=(l*.01).toFixed(t).replace(".","").slice(0,t),`${i.toString().padStart(4,"0")}-${o.toString().padStart(2,"0")}-${r.toString().padStart(2,"0")}T${a.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}:${A.toString().padStart(2,"0")}.${d}Z`)};$e.clone=function(e,t){if(c(e))return c(t)?(t.dayNumber=e.dayNumber,t.secondsOfDay=e.secondsOfDay,t):new $e(e.dayNumber,e.secondsOfDay,un.TAI)};$e.compare=function(e,t){let n=e.dayNumber-t.dayNumber;return n!==0?n:e.secondsOfDay-t.secondsOfDay};$e.equals=function(e,t){return e===t||c(e)&&c(t)&&e.dayNumber===t.dayNumber&&e.secondsOfDay===t.secondsOfDay};$e.equalsEpsilon=function(e,t,n){return n=n??0,e===t||c(e)&&c(t)&&Math.abs($e.secondsDifference(e,t))<=n};$e.totalDays=function(e){return e.dayNumber+e.secondsOfDay/Ti.SECONDS_PER_DAY};$e.secondsDifference=function(e,t){return(e.dayNumber-t.dayNumber)*Ti.SECONDS_PER_DAY+(e.secondsOfDay-t.secondsOfDay)};$e.daysDifference=function(e,t){let n=e.dayNumber-t.dayNumber,i=(e.secondsOfDay-t.secondsOfDay)/Ti.SECONDS_PER_DAY;return n+i};$e.computeTaiMinusUtc=function(e){sh.julianDate=e;let t=$e.leapSeconds,n=nl(t,sh,i0);return n<0&&(n=~n,--n,n<0&&(n=0)),t[n].offset};$e.addSeconds=function(e,t,n){return gu(e.dayNumber,e.secondsOfDay+t,n)};$e.addMinutes=function(e,t,n){let i=e.secondsOfDay+t*Ti.SECONDS_PER_MINUTE;return gu(e.dayNumber,i,n)};$e.addHours=function(e,t,n){let i=e.secondsOfDay+t*Ti.SECONDS_PER_HOUR;return gu(e.dayNumber,i,n)};$e.addDays=function(e,t,n){let i=e.dayNumber+t;return gu(i,e.secondsOfDay,n)};$e.lessThan=function(e,t){return $e.compare(e,t)<0};$e.lessThanOrEquals=function(e,t){return $e.compare(e,t)<=0};$e.greaterThan=function(e,t){return $e.compare(e,t)>0};$e.greaterThanOrEquals=function(e,t){return $e.compare(e,t)>=0};$e.prototype.clone=function(e){return $e.clone(this,e)};$e.prototype.equals=function(e){return $e.equals(this,e)};$e.prototype.equalsEpsilon=function(e,t){return $e.equalsEpsilon(this,e,t)};$e.prototype.toString=function(){return $e.toIso8601(this)};$e.leapSeconds=[new Vn(new $e(2441317,43210,un.TAI),10),new Vn(new $e(2441499,43211,un.TAI),11),new Vn(new $e(2441683,43212,un.TAI),12),new Vn(new $e(2442048,43213,un.TAI),13),new Vn(new $e(2442413,43214,un.TAI),14),new Vn(new $e(2442778,43215,un.TAI),15),new Vn(new $e(2443144,43216,un.TAI),16),new Vn(new $e(2443509,43217,un.TAI),17),new Vn(new $e(2443874,43218,un.TAI),18),new Vn(new $e(2444239,43219,un.TAI),19),new Vn(new $e(2444786,43220,un.TAI),20),new Vn(new $e(2445151,43221,un.TAI),21),new Vn(new $e(2445516,43222,un.TAI),22),new Vn(new $e(2446247,43223,un.TAI),23),new Vn(new $e(2447161,43224,un.TAI),24),new Vn(new $e(2447892,43225,un.TAI),25),new Vn(new $e(2448257,43226,un.TAI),26),new Vn(new $e(2448804,43227,un.TAI),27),new Vn(new $e(2449169,43228,un.TAI),28),new Vn(new $e(2449534,43229,un.TAI),29),new Vn(new $e(2450083,43230,un.TAI),30),new Vn(new $e(2450630,43231,un.TAI),31),new Vn(new $e(2451179,43232,un.TAI),32),new Vn(new $e(2453736,43233,un.TAI),33),new Vn(new $e(2454832,43234,un.TAI),34),new Vn(new $e(2456109,43235,un.TAI),35),new Vn(new $e(2457204,43236,un.TAI),36),new Vn(new $e(2457754,43237,un.TAI),37)];var Ue=$e;var CQ=ls(il(),1);function QW(e){return(e.length===0||e[e.length-1]!=="/")&&(e=`${e}/`),e}var ZD=QW;function $D(e,t){if(e===null||typeof e!="object")return e;t=t??!1;let n=new e.constructor;for(let i in e)if(e.hasOwnProperty(i)){let o=e[i];t&&(o=$D(o,t)),n[i]=o}return n}var Re=$D;function eQ(e,t,n){n=n??!1;let i={},o=c(e),r=c(t),a,s,A;if(o)for(a in e)e.hasOwnProperty(a)&&(s=e[a],r&&n&&typeof s=="object"&&t.hasOwnProperty(a)?(A=t[a],typeof A=="object"?i[a]=eQ(s,A,n):i[a]=s):i[a]=s);if(r)for(a in t)t.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(A=t[a],i[a]=A);return i}var dt=eQ;function RW(){let e,t,n=new Promise(function(i,o){e=i,t=o});return{resolve:e,reject:t,promise:n}}var Mf=RW;var tQ=ls(il(),1);function a0(e,t){let n;return typeof document<"u"&&(n=document),a0._implementation(e,t,n)}a0._implementation=function(e,t,n){if(!c(t)){if(typeof n>"u")return e;t=n.baseURI??n.location.href}let i=new tQ.default(e);return i.scheme()!==""?i.toString():i.absoluteTo(t).toString()};var Pf=a0;var nQ=ls(il(),1);function vW(e,t){let n="",i=e.lastIndexOf("/");return i!==-1&&(n=e.substring(0,i+1)),t&&(e=new nQ.default(e),e.query().length!==0&&(n+=`?${e.query()}`),e.fragment().length!==0&&(n+=`#${e.fragment()}`)),n}var iQ=vW;var oQ=ls(il(),1);function MW(e){let t=new oQ.default(e);t.normalize();let n=t.path(),i=n.lastIndexOf("/");return i!==-1&&(n=n.substr(i+1)),i=n.lastIndexOf("."),i===-1?n="":n=n.substr(i+1),n}var rQ=MW;var aQ={};function PW(e,t,n){c(t)||(t=e.width),c(n)||(n=e.height);let i=aQ[t];c(i)||(i={},aQ[t]=i);let o=i[n];if(!c(o)){let r=document.createElement("canvas");r.width=t,r.height=n,o=r.getContext("2d",{willReadFrequently:!0}),o.globalCompositeOperation="copy",i[n]=o}return o.drawImage(e,0,0,t,n),o.getImageData(0,0,t,n).data}var lh=PW;var NW=/^blob:/i;function LW(e){return NW.test(e)}var TE=LW;var AA;function FW(e){c(AA)||(AA=document.createElement("a")),AA.href=window.location.href;let t=AA.host,n=AA.protocol;return AA.href=e,AA.href=AA.href,n!==AA.protocol||t!==AA.host}var rp=FW;var OW=/^data:/i;function kW(e){return OW.test(e)}var uh=kW;function UW(e){let t=document.createElement("script");return t.async=!0,t.src=e,new Promise((n,i)=>{window.crossOriginIsolated&&t.setAttribute("crossorigin","anonymous");let o=document.getElementsByTagName("head")[0];t.onload=function(){t.onload=void 0,o.removeChild(t),n()},t.onerror=function(r){i(r)},o.appendChild(t)})}var sQ=UW;function zW(e){let t="";for(let n in e)if(e.hasOwnProperty(n)){let i=e[n],o=`${encodeURIComponent(n)}=`;if(Array.isArray(i))for(let r=0,a=i.length;r<a;++r)t+=`${o+encodeURIComponent(i[r])}&`;else t+=`${o+encodeURIComponent(i)}&`}return t=t.slice(0,-1),t}var cQ=zW;function GW(e){let t={};if(e==="")return t;let n=e.replace(/\+/g,"%20").split(/[&;]/);for(let i=0,o=n.length;i<o;++i){let r=n[i].split("="),a=decodeURIComponent(r[0]),s=r[1];c(s)?s=decodeURIComponent(s):s="";let A=t[a];typeof A=="string"?t[a]=[A,s]:Array.isArray(A)?A.push(s):t[a]=s}return t}var AQ=GW;var HW={UNISSUED:0,ISSUED:1,ACTIVE:2,RECEIVED:3,CANCELLED:4,FAILED:5},vn=Object.freeze(HW);var VW={TERRAIN:0,IMAGERY:1,TILES3D:2,OTHER:3},zs=Object.freeze(VW);function SE(e){e=e??G.EMPTY_OBJECT;let t=e.throttleByServer??!1,n=e.throttle??!1;this.url=e.url,this.requestFunction=e.requestFunction,this.cancelFunction=e.cancelFunction,this.priorityFunction=e.priorityFunction,this.priority=e.priority??0,this.throttle=n,this.throttleByServer=t,this.type=e.type??zs.OTHER,this.serverKey=e.serverKey,this.state=vn.UNISSUED,this.deferred=void 0,this.cancelled=!1}SE.prototype.cancel=function(){this.cancelled=!0};SE.prototype.clone=function(e){return c(e)?(e.url=this.url,e.requestFunction=this.requestFunction,e.cancelFunction=this.cancelFunction,e.priorityFunction=this.priorityFunction,e.priority=this.priority,e.throttle=this.throttle,e.throttleByServer=this.throttleByServer,e.type=this.type,e.serverKey=this.serverKey,e.state=vn.UNISSUED,e.deferred=void 0,e.cancelled=!1,e):new SE(this)};var Gs=SE;function jW(e){let t={};if(!e)return t;let n=e.split(`\r
`);for(let i=0;i<n.length;++i){let o=n[i],r=o.indexOf(": ");if(r>0){let a=o.substring(0,r),s=o.substring(r+2);t[a]=s}}return t}var lQ=jW;function uQ(e,t,n){this.statusCode=e,this.response=t,this.responseHeaders=n,typeof this.responseHeaders=="string"&&(this.responseHeaders=lQ(this.responseHeaders))}uQ.prototype.toString=function(){let e="Request has failed.";return c(this.statusCode)&&(e+=` Status Code: ${this.statusCode}`),e};var Nf=uQ;var wE=ls(il(),1);function ap(){this._listeners=[],this._scopes=[],this._toRemove=[],this._insideRaiseEvent=!1}Object.defineProperties(ap.prototype,{numberOfListeners:{get:function(){return this._listeners.length-this._toRemove.length}}});ap.prototype.addEventListener=function(e,t){this._listeners.push(e),this._scopes.push(t);let n=this;return function(){n.removeEventListener(e,t)}};ap.prototype.removeEventListener=function(e,t){let n=this._listeners,i=this._scopes,o=-1;for(let r=0;r<n.length;r++)if(n[r]===e&&i[r]===t){o=r;break}return o!==-1?(this._insideRaiseEvent?(this._toRemove.push(o),n[o]=void 0,i[o]=void 0):(n.splice(o,1),i.splice(o,1)),!0):!1};function YW(e,t){return t-e}ap.prototype.raiseEvent=function(){this._insideRaiseEvent=!0;let e,t=this._listeners,n=this._scopes,i=t.length;for(e=0;e<i;e++){let r=t[e];c(r)&&t[e].apply(n[e],arguments)}let o=this._toRemove;if(i=o.length,i>0){for(o.sort(YW),e=0;e<i;e++){let r=o[e];t.splice(r,1),n.splice(r,1)}o.length=0}this._insideRaiseEvent=!1};var Le=ap;function Lf(e){this._comparator=e.comparator,this._array=[],this._length=0,this._maximumLength=void 0}Object.defineProperties(Lf.prototype,{length:{get:function(){return this._length}},internalArray:{get:function(){return this._array}},maximumLength:{get:function(){return this._maximumLength},set:function(e){let t=this._length;if(e<t){let n=this._array;for(let i=e;i<t;++i)n[i]=void 0;this._length=e,n.length=e}this._maximumLength=e}},comparator:{get:function(){return this._comparator}}});function s0(e,t,n){let i=e[t];e[t]=e[n],e[n]=i}Lf.prototype.reserve=function(e){e=e??this._length,this._array.length=e};Lf.prototype.heapify=function(e){e=e??0;let t=this._length,n=this._comparator,i=this._array,o=-1,r=!0;for(;r;){let a=2*(e+1),s=a-1;s<t&&n(i[s],i[e])<0?o=s:o=e,a<t&&n(i[a],i[o])<0&&(o=a),o!==e?(s0(i,o,e),e=o):r=!1}};Lf.prototype.resort=function(){let e=this._length;for(let t=Math.ceil(e/2);t>=0;--t)this.heapify(t)};Lf.prototype.insert=function(e){let t=this._array,n=this._comparator,i=this._maximumLength,o=this._length++;for(o<t.length?t[o]=e:t.push(e);o!==0;){let a=Math.floor((o-1)/2);if(n(t[o],t[a])<0)s0(t,o,a),o=a;else break}let r;return c(i)&&this._length>i&&(r=t[i],this._length=i),r};Lf.prototype.pop=function(e){if(e=e??0,this._length===0)return;let t=this._array,n=t[e];return s0(t,e,--this._length),this.heapify(e),t[this._length]=void 0,n};var fQ=Lf;function WW(e,t){return e.priority-t.priority}var Un={numberOfAttemptedRequests:0,numberOfActiveRequests:0,numberOfCancelledRequests:0,numberOfCancelledActiveRequests:0,numberOfFailedRequests:0,numberOfActiveRequestsEver:0,lastNumberOfActiveRequests:0},fh=20,Yr=new fQ({comparator:WW});Yr.maximumLength=fh;Yr.reserve(fh);var lA=[],ol={},qW=typeof document<"u"?new wE.default(document.location.href):new wE.default,DE=new Le;function Ri(){}Ri.maximumRequests=50;Ri.maximumRequestsPerServer=18;Ri.requestsByServer={};Ri.throttleRequests=!0;Ri.debugShowStatistics=!1;Ri.requestCompletedEvent=DE;Object.defineProperties(Ri,{statistics:{get:function(){return Un}},priorityHeapLength:{get:function(){return fh},set:function(e){if(e<fh)for(;Yr.length>e;){let t=Yr.pop();Ff(t)}fh=e,Yr.maximumLength=e,Yr.reserve(e)}}});function dQ(e){c(e.priorityFunction)&&(e.priority=e.priorityFunction())}Ri.serverHasOpenSlots=function(e,t){t=t??1;let n=Ri.requestsByServer[e]??Ri.maximumRequestsPerServer;return ol[e]+t<=n};Ri.heapHasOpenSlots=function(e){return Yr.length+e<=fh};function hQ(e){return e.state===vn.UNISSUED&&(e.state=vn.ISSUED,e.deferred=Mf()),e.deferred.promise}function JW(e){return function(t){if(e.state===vn.CANCELLED)return;let n=e.deferred;--Un.numberOfActiveRequests,--ol[e.serverKey],DE.raiseEvent(),e.state=vn.RECEIVED,e.deferred=void 0,n.resolve(t)}}function KW(e){return function(t){e.state!==vn.CANCELLED&&(++Un.numberOfFailedRequests,--Un.numberOfActiveRequests,--ol[e.serverKey],DE.raiseEvent(t),e.state=vn.FAILED,e.deferred.reject(t))}}function mQ(e){let t=hQ(e);return e.state=vn.ACTIVE,lA.push(e),++Un.numberOfActiveRequests,++Un.numberOfActiveRequestsEver,++ol[e.serverKey],e.requestFunction().then(JW(e)).catch(KW(e)),t}function Ff(e){let t=e.state===vn.ACTIVE;if(e.state=vn.CANCELLED,++Un.numberOfCancelledRequests,c(e.deferred)){let n=e.deferred;e.deferred=void 0,n.reject()}t&&(--Un.numberOfActiveRequests,--ol[e.serverKey],++Un.numberOfCancelledActiveRequests),c(e.cancelFunction)&&e.cancelFunction()}Ri.update=function(){let e,t,n=0,i=lA.length;for(e=0;e<i;++e){if(t=lA[e],t.cancelled&&Ff(t),t.state!==vn.ACTIVE){++n;continue}n>0&&(lA[e-n]=t)}lA.length-=n;let o=Yr.internalArray,r=Yr.length;for(e=0;e<r;++e)dQ(o[e]);Yr.resort();let a=Math.max(Ri.maximumRequests-lA.length,0),s=0;for(;s<a&&Yr.length>0;){if(t=Yr.pop(),t.cancelled){Ff(t);continue}if(t.throttleByServer&&!Ri.serverHasOpenSlots(t.serverKey)){Ff(t);continue}mQ(t),++s}XW()};Ri.getServerKey=function(e){let t=new wE.default(e);t.scheme()===""&&(t=t.absoluteTo(qW),t.normalize());let n=t.authority();/:/.test(n)||(n=`${n}:${t.scheme()==="https"?"443":"80"}`);let i=ol[n];return c(i)||(ol[n]=0),n};Ri.request=function(e){if(uh(e.url)||TE(e.url))return DE.raiseEvent(),e.state=vn.RECEIVED,e.requestFunction();if(++Un.numberOfAttemptedRequests,c(e.serverKey)||(e.serverKey=Ri.getServerKey(e.url)),Ri.throttleRequests&&e.throttleByServer&&!Ri.serverHasOpenSlots(e.serverKey))return;if(!Ri.throttleRequests||!e.throttle)return mQ(e);if(lA.length>=Ri.maximumRequests)return;dQ(e);let t=Yr.insert(e);if(c(t)){if(t===e)return;Ff(t)}return hQ(e)};function XW(){Ri.debugShowStatistics&&(Un.numberOfActiveRequests===0&&Un.lastNumberOfActiveRequests>0&&(Un.numberOfAttemptedRequests>0&&(console.log(`Number of attempted requests: ${Un.numberOfAttemptedRequests}`),Un.numberOfAttemptedRequests=0),Un.numberOfCancelledRequests>0&&(console.log(`Number of cancelled requests: ${Un.numberOfCancelledRequests}`),Un.numberOfCancelledRequests=0),Un.numberOfCancelledActiveRequests>0&&(console.log(`Number of cancelled active requests: ${Un.numberOfCancelledActiveRequests}`),Un.numberOfCancelledActiveRequests=0),Un.numberOfFailedRequests>0&&(console.log(`Number of failed requests: ${Un.numberOfFailedRequests}`),Un.numberOfFailedRequests=0)),Un.lastNumberOfActiveRequests=Un.numberOfActiveRequests)}Ri.clearForSpecs=function(){for(;Yr.length>0;){let t=Yr.pop();Ff(t)}let e=lA.length;for(let t=0;t<e;++t)Ff(lA[t]);lA.length=0,ol={},Un.numberOfAttemptedRequests=0,Un.numberOfActiveRequests=0,Un.numberOfCancelledRequests=0,Un.numberOfCancelledActiveRequests=0,Un.numberOfFailedRequests=0,Un.numberOfActiveRequestsEver=0,Un.lastNumberOfActiveRequests=0};Ri.numberOfActiveRequestsByServer=function(e){return ol[e]};Ri.requestHeap=Yr;var uA=Ri;var pQ=ls(il(),1);var sp={},dh={};sp.add=function(e,t){let n=`${e.toLowerCase()}:${t}`;c(dh[n])||(dh[n]=!0)};sp.remove=function(e,t){let n=`${e.toLowerCase()}:${t}`;c(dh[n])&&delete dh[n]};function ZW(e){let t=new pQ.default(e);t.normalize();let n=t.authority();if(n.length!==0){if(t.authority(n),n.indexOf("@")!==-1&&(n=n.split("@")[1]),n.indexOf(":")===-1){let i=t.scheme();if(i.length===0&&(i=window.location.protocol,i=i.substring(0,i.length-1)),i==="http")n+=":80";else if(i==="https")n+=":443";else return}return n}}sp.contains=function(e){let t=ZW(e);return!!(c(t)&&c(dh[t]))};sp.clear=function(){dh={}};var c0=sp;var EQ=(function(){try{let e=new XMLHttpRequest;return e.open("GET","#",!0),e.responseType="blob",e.responseType==="blob"}catch{return!1}})();function Xe(e){e=e??G.EMPTY_OBJECT,typeof e=="string"&&(e={url:e}),this._url=void 0,this._templateValues=fA(e.templateValues,{}),this._queryParameters=fA(e.queryParameters,{}),this.headers=fA(e.headers,{}),this.request=e.request??new Gs,this.proxy=e.proxy,this.retryCallback=e.retryCallback,this.retryAttempts=e.retryAttempts??0,this._retryCount=0,e.parseUrl??!0?this.parseUrl(e.url,!0,!0):this._url=e.url,this._credits=e.credits}function fA(e,t){return c(e)?Re(e):t}Xe.createIfNeeded=function(e){return e instanceof Xe?e.getDerivedResource({request:e.request}):typeof e!="string"?e:new Xe({url:e})};var hh;Xe.supportsImageBitmapOptions=function(){return c(hh)?hh:typeof createImageBitmap!="function"?(hh=Promise.resolve(!1),hh):(hh=Xe.fetchBlob({url:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAIAAACQd1PeAAAABGdBTUEAAE4g3rEiDgAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAADElEQVQI12Ng6GAAAAEUAIngE3ZiAAAAAElFTkSuQmCC"}).then(function(t){let n={imageOrientation:"flipY",premultiplyAlpha:"none",colorSpaceConversion:"none"};return Promise.all([createImageBitmap(t,n),createImageBitmap(t)])}).then(function(t){let n=lh(t[0]),i=lh(t[1]);return n[1]!==i[1]}).catch(function(){return!1}),hh)};Object.defineProperties(Xe,{isBlobSupported:{get:function(){return EQ}}});Object.defineProperties(Xe.prototype,{queryParameters:{get:function(){return this._queryParameters}},templateValues:{get:function(){return this._templateValues}},url:{get:function(){return this.getUrlComponent(!0,!0)},set:function(e){this.parseUrl(e,!1,!1)}},extension:{get:function(){return rQ(this._url)}},isDataUri:{get:function(){return uh(this._url)}},isBlobUri:{get:function(){return TE(this._url)}},isCrossOriginUrl:{get:function(){return rp(this._url)}},hasHeaders:{get:function(){return Object.keys(this.headers).length>0}},credits:{get:function(){return this._credits}}});Xe.prototype.toString=function(){return this.getUrlComponent(!0,!0)};Xe.prototype.parseUrl=function(e,t,n,i){let o=new CQ.default(e),r=$W(o.query());this._queryParameters=t?RE(r,this.queryParameters,n):r,o.search(""),o.fragment(""),c(i)&&o.scheme()===""&&(o=o.absoluteTo(Pf(i))),this._url=o.toString()};function $W(e){return e.length===0?{}:e.indexOf("=")===-1?{[e]:void 0}:AQ(e)}function RE(e,t,n){if(!n)return dt(e,t);let i=Re(e,!0);for(let o in t)if(t.hasOwnProperty(o)){let r=i[o],a=t[o];c(r)?(Array.isArray(r)||(r=i[o]=[r]),i[o]=r.concat(a)):i[o]=Array.isArray(a)?a.slice():a}return i}Xe.prototype.getUrlComponent=function(e,t){if(this.isDataUri)return this._url;let n=this._url;e&&(n=`${n}${eq(this.queryParameters)}`),n=n.replace(/%7B/g,"{").replace(/%7D/g,"}");let i=this._templateValues;return Object.keys(i).length>0&&(n=n.replace(/{(.*?)}/g,function(o,r){let a=i[r];return c(a)?encodeURIComponent(a):o})),t&&c(this.proxy)&&(n=this.proxy.getURL(n)),n};function eq(e){let t=Object.keys(e);return t.length===0?"":t.length===1&&!c(e[t[0]])?`?${t[0]}`:`?${cQ(e)}`}Xe.prototype.setQueryParameters=function(e,t){t?this._queryParameters=RE(this._queryParameters,e,!1):this._queryParameters=RE(e,this._queryParameters,!1)};Xe.prototype.appendQueryParameters=function(e){this._queryParameters=RE(e,this._queryParameters,!0)};Xe.prototype.setTemplateValues=function(e,t){t?this._templateValues=dt(this._templateValues,e):this._templateValues=dt(e,this._templateValues)};Xe.prototype.getDerivedResource=function(e){let t=this.clone();if(t._retryCount=0,c(e.url)){let n=e.preserveQueryParameters??!1;t.parseUrl(e.url,!0,n,this._url)}return c(e.queryParameters)&&(t._queryParameters=dt(e.queryParameters,t.queryParameters)),c(e.templateValues)&&(t._templateValues=dt(e.templateValues,t.templateValues)),c(e.headers)&&(t.headers=dt(e.headers,t.headers)),c(e.proxy)&&(t.proxy=e.proxy),c(e.request)&&(t.request=e.request),c(e.retryCallback)&&(t.retryCallback=e.retryCallback),c(e.retryAttempts)&&(t.retryAttempts=e.retryAttempts),t};Xe.prototype.retryOnError=function(e){let t=this.retryCallback;if(typeof t!="function"||this._retryCount>=this.retryAttempts)return Promise.resolve(!1);let n=this;return Promise.resolve(t(this,e)).then(function(i){return++n._retryCount,i})};Xe.prototype.clone=function(e){return c(e)?(e._url=this._url,e._queryParameters=Re(this._queryParameters),e._templateValues=Re(this._templateValues),e.headers=Re(this.headers),e.proxy=this.proxy,e.retryCallback=this.retryCallback,e.retryAttempts=this.retryAttempts,e._retryCount=0,e.request=this.request.clone(),e):new Xe({url:this._url,queryParameters:this.queryParameters,templateValues:this.templateValues,headers:this.headers,proxy:this.proxy,retryCallback:this.retryCallback,retryAttempts:this.retryAttempts,request:this.request.clone(),parseUrl:!1,credits:c(this.credits)?this.credits.slice():void 0})};Xe.prototype.getBaseUri=function(e){return iQ(this.getUrlComponent(e),e)};Xe.prototype.appendForwardSlash=function(){this._url=ZD(this._url)};Xe.prototype.fetchArrayBuffer=function(){return this.fetch({responseType:"arraybuffer"})};Xe.fetchArrayBuffer=function(e){return new Xe(e).fetchArrayBuffer()};Xe.prototype.fetchBlob=function(){return this.fetch({responseType:"blob"})};Xe.fetchBlob=function(e){return new Xe(e).fetchBlob()};Xe.prototype.fetchImage=function(e){e=e??G.EMPTY_OBJECT;let t=e.preferImageBitmap??!1,n=e.preferBlob??!1,i=e.flipY??!1,o=e.skipColorSpaceConversion??!1;if(l0(this.request),!EQ||this.isDataUri||this.isBlobUri||!this.hasHeaders&&!n)return A0({resource:this,flipY:i,skipColorSpaceConversion:o,preferImageBitmap:t});let r=this.fetchBlob();if(!c(r))return;let a,s,A,l;return Xe.supportsImageBitmapOptions().then(function(d){return a=d,s=a&&t,r}).then(function(d){if(!c(d))return;if(l=d,s)return Xe.createImageBitmapFromBlob(d,{flipY:i,premultiplyAlpha:!1,skipColorSpaceConversion:o});let m=window.URL.createObjectURL(d);return A=new Xe({url:m}),A0({resource:A,flipY:i,skipColorSpaceConversion:o,preferImageBitmap:!1})}).then(function(d){if(c(d))return d.blob=l,s||window.URL.revokeObjectURL(A.url),d}).catch(function(d){return c(A)&&window.URL.revokeObjectURL(A.url),d.blob=l,Promise.reject(d)})};function A0(e){let t=e.resource,n=e.flipY,i=e.skipColorSpaceConversion,o=e.preferImageBitmap,r=t.request;r.url=t.url,r.requestFunction=function(){let s=!1;!t.isDataUri&&!t.isBlobUri&&(s=t.isCrossOriginUrl);let A=Mf();return Xe._Implementations.createImage(r,s,A,n,i,o),A.promise};let a=uA.request(r);if(c(a))return a.catch(function(s){return r.state!==vn.FAILED?Promise.reject(s):t.retryOnError(s).then(function(A){return A?(r.state=vn.UNISSUED,r.deferred=void 0,A0({resource:t,flipY:n,skipColorSpaceConversion:i,preferImageBitmap:o})):Promise.reject(s)})})}Xe.fetchImage=function(e){return new Xe(e).fetchImage({flipY:e.flipY,skipColorSpaceConversion:e.skipColorSpaceConversion,preferBlob:e.preferBlob,preferImageBitmap:e.preferImageBitmap})};Xe.prototype.fetchText=function(){return this.fetch({responseType:"text"})};Xe.fetchText=function(e){return new Xe(e).fetchText()};Xe.prototype.fetchJson=function(){let e=this.fetch({responseType:"text",headers:{Accept:"application/json,*/*;q=0.01"}});if(c(e))return e.then(function(t){if(c(t))return JSON.parse(t)})};Xe.fetchJson=function(e){return new Xe(e).fetchJson()};Xe.prototype.fetchXML=function(){return this.fetch({responseType:"document",overrideMimeType:"text/xml"})};Xe.fetchXML=function(e){return new Xe(e).fetchXML()};Xe.prototype.fetchJsonp=function(e){e=e??"callback",l0(this.request);let t;do t=`loadJsonp${S.nextRandomNumber().toString().substring(2,8)}`;while(c(window[t]));return _Q(this,e,t)};function _Q(e,t,n){let i={};i[t]=n,e.setQueryParameters(i);let o=e.request,r=e.url;o.url=r,o.requestFunction=function(){let s=Mf();return window[n]=function(A){s.resolve(A);try{delete window[n]}catch{window[n]=void 0}},Xe._Implementations.loadAndExecuteScript(r,n,s),s.promise};let a=uA.request(o);if(c(a))return a.catch(function(s){return o.state!==vn.FAILED?Promise.reject(s):e.retryOnError(s).then(function(A){return A?(o.state=vn.UNISSUED,o.deferred=void 0,_Q(e,t,n)):Promise.reject(s)})})}Xe.fetchJsonp=function(e){return new Xe(e).fetchJsonp(e.callbackParameterName)};Xe.prototype._makeRequest=function(e){let t=this;l0(t.request);let n=t.request,i=t.url;n.url=i,n.requestFunction=function(){let r=e.responseType,a=dt(e.headers,t.headers),s=e.overrideMimeType,A=e.method,l=e.data,d=Mf(),m=Xe._Implementations.loadWithXhr(i,r,A,l,a,d,s);return c(m)&&c(m.abort)&&(n.cancelFunction=function(){m.abort()}),d.promise};let o=uA.request(n);if(c(o))return o.then(function(r){return n.cancelFunction=void 0,r}).catch(function(r){return n.cancelFunction=void 0,n.state!==vn.FAILED?Promise.reject(r):t.retryOnError(r).then(function(a){return a?(n.state=vn.UNISSUED,n.deferred=void 0,t.fetch(e)):Promise.reject(r)})})};function l0(e){if(e.state===vn.ISSUED||e.state===vn.ACTIVE)throw new ae("The Resource is already being fetched.");e.state=vn.UNISSUED,e.deferred=void 0}var tq=/^data:(.*?)(;base64)?,(.*)$/;function QE(e,t){let n=decodeURIComponent(t);return e?atob(n):n}function gQ(e,t){let n=QE(e,t),i=new ArrayBuffer(n.length),o=new Uint8Array(i);for(let r=0;r<n.length;r++)o[r]=n.charCodeAt(r);return i}function nq(e,t){t=t??"";let n=e[1],i=!!e[2],o=e[3],r,a;switch(t){case"":case"text":return QE(i,o);case"arraybuffer":return gQ(i,o);case"blob":return r=gQ(i,o),new Blob([r],{type:n});case"document":return a=new DOMParser,a.parseFromString(QE(i,o),n);case"json":return JSON.parse(QE(i,o));default:}}Xe.prototype.fetch=function(e){return e=fA(e,{}),e.method="GET",this._makeRequest(e)};Xe.fetch=function(e){return new Xe(e).fetch({responseType:e.responseType,overrideMimeType:e.overrideMimeType})};Xe.prototype.delete=function(e){return e=fA(e,{}),e.method="DELETE",this._makeRequest(e)};Xe.delete=function(e){return new Xe(e).delete({responseType:e.responseType,overrideMimeType:e.overrideMimeType,data:e.data})};Xe.prototype.head=function(e){return e=fA(e,{}),e.method="HEAD",this._makeRequest(e)};Xe.head=function(e){return new Xe(e).head({responseType:e.responseType,overrideMimeType:e.overrideMimeType})};Xe.prototype.options=function(e){return e=fA(e,{}),e.method="OPTIONS",this._makeRequest(e)};Xe.options=function(e){return new Xe(e).options({responseType:e.responseType,overrideMimeType:e.overrideMimeType})};Xe.prototype.post=function(e,t){return $n.defined("data",e),t=fA(t,{}),t.method="POST",t.data=e,this._makeRequest(t)};Xe.post=function(e){return new Xe(e).post(e.data,{responseType:e.responseType,overrideMimeType:e.overrideMimeType})};Xe.prototype.put=function(e,t){return $n.defined("data",e),t=fA(t,{}),t.method="PUT",t.data=e,this._makeRequest(t)};Xe.put=function(e){return new Xe(e).put(e.data,{responseType:e.responseType,overrideMimeType:e.overrideMimeType})};Xe.prototype.patch=function(e,t){return $n.defined("data",e),t=fA(t,{}),t.method="PATCH",t.data=e,this._makeRequest(t)};Xe.patch=function(e){return new Xe(e).patch(e.data,{responseType:e.responseType,overrideMimeType:e.overrideMimeType})};Xe._Implementations={};Xe._Implementations.loadImageElement=function(e,t,n){let i=new Image;i.onload=function(){i.naturalWidth===0&&i.naturalHeight===0&&i.width===0&&i.height===0&&(i.width=300,i.height=150),n.resolve(i)},i.onerror=function(o){n.reject(o)},t&&(c0.contains(e)?i.crossOrigin="use-credentials":i.crossOrigin=""),i.src=e};Xe._Implementations.createImage=function(e,t,n,i,o,r){let a=e.url;Xe.supportsImageBitmapOptions().then(function(s){if(!(s&&r)){Xe._Implementations.loadImageElement(a,t,n);return}let A="blob",l="GET",d=Mf(),m=Xe._Implementations.loadWithXhr(a,A,l,void 0,void 0,d,void 0,void 0,void 0);return c(m)&&c(m.abort)&&(e.cancelFunction=function(){m.abort()}),d.promise.then(function(p){if(!c(p)){n.reject(new ae(`Successfully retrieved ${a} but it contained no content.`));return}return Xe.createImageBitmapFromBlob(p,{flipY:i,premultiplyAlpha:!1,skipColorSpaceConversion:o})}).then(function(p){n.resolve(p)})}).catch(function(s){n.reject(s)})};Xe.createImageBitmapFromBlob=function(e,t){return $n.defined("options",t),$n.typeOf.bool("options.flipY",t.flipY),$n.typeOf.bool("options.premultiplyAlpha",t.premultiplyAlpha),$n.typeOf.bool("options.skipColorSpaceConversion",t.skipColorSpaceConversion),createImageBitmap(e,{imageOrientation:t.flipY?"flipY":"from-image",premultiplyAlpha:t.premultiplyAlpha?"premultiply":"none",colorSpaceConversion:t.skipColorSpaceConversion?"none":"default"})};function iq(e,t,n,i,o,r,a){fetch(e,{method:n,headers:o}).then(async s=>{if(!s.ok){let A={};s.headers.forEach((l,d)=>{A[d]=l}),r.reject(new Nf(s.status,s,A));return}switch(t){case"text":r.resolve(s.text());break;case"json":r.resolve(s.json());break;default:r.resolve(new Uint8Array(await s.arrayBuffer()).buffer);break}}).catch(()=>{r.reject(new Nf)})}var oq=typeof XMLHttpRequest>"u";Xe._Implementations.loadWithXhr=function(e,t,n,i,o,r,a){let s=tq.exec(e);if(s!==null){r.resolve(nq(s,t));return}if(oq){iq(e,t,n,i,o,r,a);return}let A=new XMLHttpRequest;if(c0.contains(e)&&(A.withCredentials=!0),A.open(n,e,!0),c(a)&&c(A.overrideMimeType)&&A.overrideMimeType(a),c(o))for(let d in o)o.hasOwnProperty(d)&&A.setRequestHeader(d,o[d]);c(t)&&(A.responseType=t);let l=!1;return typeof e=="string"&&(l=e.indexOf("file://")===0||typeof window<"u"&&window.location.origin==="file://"),A.onload=function(){if((A.status<200||A.status>=300)&&!(l&&A.status===0)){r.reject(new Nf(A.status,A.response,A.getAllResponseHeaders()));return}let d=A.response,m=A.responseType;if(n==="HEAD"||n==="OPTIONS"){let g=A.getAllResponseHeaders().trim().split(/[\r\n]+/),h={};g.forEach(function(C){let _=C.split(": "),I=_.shift();h[I]=_.join(": ")}),r.resolve(h);return}if(A.status===204)r.resolve(void 0);else if(c(d)&&(!c(t)||m===t))r.resolve(d);else if(t==="json"&&typeof d=="string")try{r.resolve(JSON.parse(d))}catch(p){r.reject(p)}else(m===""||m==="document")&&c(A.responseXML)&&A.responseXML.hasChildNodes()?r.resolve(A.responseXML):(m===""||m==="text")&&c(A.responseText)?r.resolve(A.responseText):r.reject(new ae("Invalid XMLHttpRequest response type."))},A.onerror=function(d){r.reject(new Nf)},A.send(i),A};Xe._Implementations.loadAndExecuteScript=function(e,t,n){return sQ(e,t).catch(function(i){n.reject(i)})};Xe._DefaultImplementations={};Xe._DefaultImplementations.createImage=Xe._Implementations.createImage;Xe._DefaultImplementations.loadWithXhr=Xe._Implementations.loadWithXhr;Xe._DefaultImplementations.loadAndExecuteScript=Xe._Implementations.loadAndExecuteScript;Xe.DEFAULT=Object.freeze(new Xe({url:typeof document>"u"?"":document.location.href.split("?")[0]}));var Ye=Xe;function Ap(e){e=e??G.EMPTY_OBJECT,this._dates=void 0,this._samples=void 0,this._dateColumn=-1,this._xPoleWanderRadiansColumn=-1,this._yPoleWanderRadiansColumn=-1,this._ut1MinusUtcSecondsColumn=-1,this._xCelestialPoleOffsetRadiansColumn=-1,this._yCelestialPoleOffsetRadiansColumn=-1,this._taiMinusUtcSecondsColumn=-1,this._columnCount=0,this._lastIndex=-1,this._addNewLeapSeconds=e.addNewLeapSeconds??!0,c(e.data)?IQ(this,e.data):IQ(this,{columnNames:["dateIso8601","modifiedJulianDateUtc","xPoleWanderRadians","yPoleWanderRadians","ut1MinusUtcSeconds","lengthOfDayCorrectionSeconds","xCelestialPoleOffsetRadians","yCelestialPoleOffsetRadians","taiMinusUtcSeconds"],samples:[]})}Ap.fromUrl=async function(e,t){t=t??G.EMPTY_OBJECT;let n=Ye.createIfNeeded(e),i;try{i=await n.fetchJson()}catch{throw new ae(`An error occurred while retrieving the EOP data from the URL ${n.url}.`)}return new Ap({addNewLeapSeconds:t.addNewLeapSeconds,data:i})};Ap.NONE=Object.freeze({compute:function(e,t){return c(t)?(t.xPoleWander=0,t.yPoleWander=0,t.xPoleOffset=0,t.yPoleOffset=0,t.ut1MinusUtc=0):t=new ip(0,0,0,0,0),t}});Ap.prototype.compute=function(e,t){if(!c(this._samples))return;if(c(t)||(t=new ip(0,0,0,0,0)),this._samples.length===0)return t.xPoleWander=0,t.yPoleWander=0,t.xPoleOffset=0,t.yPoleOffset=0,t.ut1MinusUtc=0,t;let n=this._dates,i=this._lastIndex,o=0,r=0;if(c(i)){let s=n[i],A=n[i+1],l=Ue.lessThanOrEquals(s,e),d=!c(A),m=d||Ue.greaterThanOrEquals(A,e);if(l&&m)return o=i,!d&&A.equals(e)&&++o,r=o+1,bQ(this,n,this._samples,e,o,r,t),t}let a=nl(n,e,Ue.compare,this._dateColumn);return a>=0?(a<n.length-1&&n[a+1].equals(e)&&++a,o=a,r=a):(r=~a,o=r-1,o<0&&(o=0)),this._lastIndex=o,bQ(this,n,this._samples,e,o,r,t),t};function rq(e,t){return Ue.compare(e.julianDate,t)}function IQ(e,t){if(!c(t.columnNames))throw new ae("Error in loaded EOP data: The columnNames property is required.");if(!c(t.samples))throw new ae("Error in loaded EOP data: The samples property is required.");let n=t.columnNames.indexOf("modifiedJulianDateUtc"),i=t.columnNames.indexOf("xPoleWanderRadians"),o=t.columnNames.indexOf("yPoleWanderRadians"),r=t.columnNames.indexOf("ut1MinusUtcSeconds"),a=t.columnNames.indexOf("xCelestialPoleOffsetRadians"),s=t.columnNames.indexOf("yCelestialPoleOffsetRadians"),A=t.columnNames.indexOf("taiMinusUtcSeconds");if(n<0||i<0||o<0||r<0||a<0||s<0||A<0)throw new ae("Error in loaded EOP data: The columnNames property must include modifiedJulianDateUtc, xPoleWanderRadians, yPoleWanderRadians, ut1MinusUtcSeconds, xCelestialPoleOffsetRadians, yCelestialPoleOffsetRadians, and taiMinusUtcSeconds columns");let l=e._samples=t.samples,d=e._dates=[];e._dateColumn=n,e._xPoleWanderRadiansColumn=i,e._yPoleWanderRadiansColumn=o,e._ut1MinusUtcSecondsColumn=r,e._xCelestialPoleOffsetRadiansColumn=a,e._yCelestialPoleOffsetRadiansColumn=s,e._taiMinusUtcSecondsColumn=A,e._columnCount=t.columnNames.length,e._lastIndex=void 0;let m,p=e._addNewLeapSeconds;for(let g=0,h=l.length;g<h;g+=e._columnCount){let C=l[g+n],_=l[g+A],I=C+Ti.MODIFIED_JULIAN_DATE_DIFFERENCE,b=new Ue(I,_,un.TAI);if(d.push(b),p){if(_!==m&&c(m)){let x=Ue.leapSeconds,T=nl(x,b,rq);if(T<0){let w=new Vn(b,_);x.splice(~T,0,w)}}m=_}}}function yQ(e,t,n,i,o){let r=n*i;o.xPoleWander=t[r+e._xPoleWanderRadiansColumn],o.yPoleWander=t[r+e._yPoleWanderRadiansColumn],o.xPoleOffset=t[r+e._xCelestialPoleOffsetRadiansColumn],o.yPoleOffset=t[r+e._yCelestialPoleOffsetRadiansColumn],o.ut1MinusUtc=t[r+e._ut1MinusUtcSecondsColumn]}function cp(e,t,n){return t+e*(n-t)}function bQ(e,t,n,i,o,r,a){let s=e._columnCount;if(r>t.length-1)return a.xPoleWander=0,a.yPoleWander=0,a.xPoleOffset=0,a.yPoleOffset=0,a.ut1MinusUtc=0,a;let A=t[o],l=t[r];if(A.equals(l)||i.equals(A))return yQ(e,n,o,s,a),a;if(i.equals(l))return yQ(e,n,r,s,a),a;let d=Ue.secondsDifference(i,A)/Ue.secondsDifference(l,A),m=o*s,p=r*s,g=n[m+e._ut1MinusUtcSecondsColumn],h=n[p+e._ut1MinusUtcSecondsColumn],C=h-g;if(C>.5||C<-.5){let _=n[m+e._taiMinusUtcSecondsColumn],I=n[p+e._taiMinusUtcSecondsColumn];_!==I&&(l.equals(i)?g=h:h-=I-_)}return a.xPoleWander=cp(d,n[m+e._xPoleWanderRadiansColumn],n[p+e._xPoleWanderRadiansColumn]),a.yPoleWander=cp(d,n[m+e._yPoleWanderRadiansColumn],n[p+e._yPoleWanderRadiansColumn]),a.xPoleOffset=cp(d,n[m+e._xCelestialPoleOffsetRadiansColumn],n[p+e._xCelestialPoleOffsetRadiansColumn]),a.yPoleOffset=cp(d,n[m+e._yCelestialPoleOffsetRadiansColumn],n[p+e._yCelestialPoleOffsetRadiansColumn]),a.ut1MinusUtc=cp(d,g,h),a}var BQ=Ap;function Wr(e,t,n){this.heading=e??0,this.pitch=t??0,this.roll=n??0}Wr.fromQuaternion=function(e,t){c(t)||(t=new Wr);let n=2*(e.w*e.y-e.z*e.x),i=1-2*(e.x*e.x+e.y*e.y),o=2*(e.w*e.x+e.y*e.z),r=1-2*(e.y*e.y+e.z*e.z),a=2*(e.w*e.z+e.x*e.y);return t.heading=-Math.atan2(a,r),t.roll=Math.atan2(o,i),t.pitch=-S.asinClamped(n),t};Wr.fromDegrees=function(e,t,n,i){return c(i)||(i=new Wr),i.heading=e*S.RADIANS_PER_DEGREE,i.pitch=t*S.RADIANS_PER_DEGREE,i.roll=n*S.RADIANS_PER_DEGREE,i};Wr.clone=function(e,t){if(c(e))return c(t)?(t.heading=e.heading,t.pitch=e.pitch,t.roll=e.roll,t):new Wr(e.heading,e.pitch,e.roll)};Wr.equals=function(e,t){return e===t||c(e)&&c(t)&&e.heading===t.heading&&e.pitch===t.pitch&&e.roll===t.roll};Wr.equalsEpsilon=function(e,t,n,i){return e===t||c(e)&&c(t)&&S.equalsEpsilon(e.heading,t.heading,n,i)&&S.equalsEpsilon(e.pitch,t.pitch,n,i)&&S.equalsEpsilon(e.roll,t.roll,n,i)};Wr.prototype.clone=function(e){return Wr.clone(this,e)};Wr.prototype.equals=function(e){return Wr.equals(this,e)};Wr.prototype.equalsEpsilon=function(e,t,n){return Wr.equalsEpsilon(this,e,t,n)};Wr.prototype.toString=function(){return`(${this.heading}, ${this.pitch}, ${this.roll})`};var us=Wr;var xQ={},TQ=/((?:.*\/)|^)Cesium\.js(?:\?|\#|$)/;function aq(){let e=document.getElementsByTagName("script");for(let t=0,n=e.length;t<n;++t){let i=e[t].getAttribute("src"),o=TQ.exec(i);if(o!==null)return o[1]}}var vE;function SQ(e){return typeof document>"u"?e:(c(vE)||(vE=document.createElement("a")),vE.href=e,vE.href)}var Of;function wQ(){if(c(Of))return Of;let e;return typeof CESIUM_BASE_URL<"u"?e=CESIUM_BASE_URL:c(xQ?.url)?e=Pf(".",xQ.url):typeof define=="object"&&c(define.amd)&&!define.amd.toUrlUndefined&&c(require.toUrl)?e=Pf("..",kf("Core/buildModuleUrl.js")):e=aq(),Of=new Ye({url:SQ(e)}),Of.appendForwardSlash(),Of}function sq(e){return SQ(require.toUrl(`../${e}`))}function DQ(e){return wQ().getDerivedResource({url:e}).url}var ME;function kf(e){return c(ME)||(typeof define=="object"&&c(define.amd)&&!define.amd.toUrlUndefined&&c(require.toUrl)?ME=sq:ME=DQ),ME(e)}kf._cesiumScriptRegex=TQ;kf._buildModuleUrlFromBaseUrl=DQ;kf._clearBaseResource=function(){Of=void 0};kf.setBaseUrl=function(e){Of=Ye.DEFAULT.getDerivedResource({url:e})};kf.getCesiumBaseUrl=wQ;var Ga=kf;function cq(e,t,n){this.x=e,this.y=t,this.s=n}var PE=cq;function d0(e){e=e??G.EMPTY_OBJECT,this._xysFileUrlTemplate=Ye.createIfNeeded(e.xysFileUrlTemplate),this._interpolationOrder=e.interpolationOrder??9,this._sampleZeroJulianEphemerisDate=e.sampleZeroJulianEphemerisDate??24423965e-1,this._sampleZeroDateTT=new Ue(this._sampleZeroJulianEphemerisDate,0,un.TAI),this._stepSizeDays=e.stepSizeDays??1,this._samplesPerXysFile=e.samplesPerXysFile??1e3,this._totalSamples=e.totalSamples??27426,this._samples=new Array(this._totalSamples*3),this._chunkDownloadsInProgress=[];let t=this._interpolationOrder,n=this._denominators=new Array(t+1),i=this._xTable=new Array(t+1),o=Math.pow(this._stepSizeDays,t);for(let r=0;r<=t;++r){n[r]=o,i[r]=r*this._stepSizeDays;for(let a=0;a<=t;++a)a!==r&&(n[r]*=r-a);n[r]=1/n[r]}this._work=new Array(t+1),this._coef=new Array(t+1)}var Aq=new Ue(0,0,un.TAI);function u0(e,t,n){let i=Aq;return i.dayNumber=t,i.secondsOfDay=n,Ue.daysDifference(i,e._sampleZeroDateTT)}d0.prototype.preload=function(e,t,n,i){let o=u0(this,e,t),r=u0(this,n,i),a=o/this._stepSizeDays-this._interpolationOrder/2|0;a<0&&(a=0);let s=r/this._stepSizeDays-this._interpolationOrder/2|0+this._interpolationOrder;s>=this._totalSamples&&(s=this._totalSamples-1);let A=a/this._samplesPerXysFile|0,l=s/this._samplesPerXysFile|0,d=[];for(let m=A;m<=l;++m)d.push(f0(this,m));return Promise.all(d)};d0.prototype.computeXysRadians=function(e,t,n){let i=u0(this,e,t);if(i<0)return;let o=i/this._stepSizeDays|0;if(o>=this._totalSamples)return;let r=this._interpolationOrder,a=o-(r/2|0);a<0&&(a=0);let s=a+r;s>=this._totalSamples&&(s=this._totalSamples-1,a=s-r,a<0&&(a=0));let A=!1,l=this._samples;if(c(l[a*3])||(f0(this,a/this._samplesPerXysFile|0),A=!0),c(l[s*3])||(f0(this,s/this._samplesPerXysFile|0),A=!0),A)return;c(n)?(n.x=0,n.y=0,n.s=0):n=new PE(0,0,0);let d=i-a*this._stepSizeDays,m=this._work,p=this._denominators,g=this._coef,h=this._xTable,C,_;for(C=0;C<=r;++C)m[C]=d-h[C];for(C=0;C<=r;++C){for(g[C]=1,_=0;_<=r;++_)_!==C&&(g[C]*=m[_]);g[C]*=p[C];let I=(a+C)*3;n.x+=g[C]*l[I++],n.y+=g[C]*l[I++],n.s+=g[C]*l[I]}return n};function f0(e,t){if(e._chunkDownloadsInProgress[t])return e._chunkDownloadsInProgress[t];let n,i=e._xysFileUrlTemplate;c(i)?n=i.getDerivedResource({templateValues:{0:t}}):n=new Ye({url:Ga(`Assets/IAU2006_XYS/IAU2006_XYS_${t}.json`)});let o=n.fetchJson().then(function(r){e._chunkDownloadsInProgress[t]=!1;let a=e._samples,s=r.samples,A=t*e._samplesPerXysFile*3;for(let l=0,d=s.length;l<d;++l)a[A+l]=s[l]});return e._chunkDownloadsInProgress[t]=o,o}var QQ=d0;function Qe(e,t,n,i){this.x=e??0,this.y=t??0,this.z=n??0,this.w=i??0}var lp=new f;Qe.fromAxisAngle=function(e,t,n){let i=t/2,o=Math.sin(i);lp=f.normalize(e,lp);let r=lp.x*o,a=lp.y*o,s=lp.z*o,A=Math.cos(i);return c(n)?(n.x=r,n.y=a,n.z=s,n.w=A,n):new Qe(r,a,s,A)};var lq=[1,2,0],uq=new Array(3);Qe.fromRotationMatrix=function(e,t){let n,i,o,r,a,s=e[ne.COLUMN0ROW0],A=e[ne.COLUMN1ROW1],l=e[ne.COLUMN2ROW2],d=s+A+l;if(d>0)n=Math.sqrt(d+1),a=.5*n,n=.5/n,i=(e[ne.COLUMN1ROW2]-e[ne.COLUMN2ROW1])*n,o=(e[ne.COLUMN2ROW0]-e[ne.COLUMN0ROW2])*n,r=(e[ne.COLUMN0ROW1]-e[ne.COLUMN1ROW0])*n;else{let m=lq,p=0;A>s&&(p=1),l>s&&l>A&&(p=2);let g=m[p],h=m[g];n=Math.sqrt(e[ne.getElementIndex(p,p)]-e[ne.getElementIndex(g,g)]-e[ne.getElementIndex(h,h)]+1);let C=uq;C[p]=.5*n,n=.5/n,a=(e[ne.getElementIndex(h,g)]-e[ne.getElementIndex(g,h)])*n,C[g]=(e[ne.getElementIndex(g,p)]+e[ne.getElementIndex(p,g)])*n,C[h]=(e[ne.getElementIndex(h,p)]+e[ne.getElementIndex(p,h)])*n,i=-C[0],o=-C[1],r=-C[2]}return c(t)?(t.x=i,t.y=o,t.z=r,t.w=a,t):new Qe(i,o,r,a)};var RQ=new Qe,vQ=new Qe,h0=new Qe,MQ=new Qe;Qe.fromHeadingPitchRoll=function(e,t){return MQ=Qe.fromAxisAngle(f.UNIT_X,e.roll,RQ),h0=Qe.fromAxisAngle(f.UNIT_Y,-e.pitch,t),t=Qe.multiply(h0,MQ,h0),vQ=Qe.fromAxisAngle(f.UNIT_Z,-e.heading,RQ),Qe.multiply(vQ,t,t)};var NE=new f,m0=new f,Dc=new Qe,PQ=new Qe,LE=new Qe;Qe.packedLength=4;Qe.pack=function(e,t,n){return n=n??0,t[n++]=e.x,t[n++]=e.y,t[n++]=e.z,t[n]=e.w,t};Qe.unpack=function(e,t,n){return t=t??0,c(n)||(n=new Qe),n.x=e[t],n.y=e[t+1],n.z=e[t+2],n.w=e[t+3],n};Qe.packedInterpolationLength=3;Qe.convertPackedArrayForInterpolation=function(e,t,n,i){Qe.unpack(e,n*4,LE),Qe.conjugate(LE,LE);for(let o=0,r=n-t+1;o<r;o++){let a=o*3;Qe.unpack(e,(t+o)*4,Dc),Qe.multiply(Dc,LE,Dc),Dc.w<0&&Qe.negate(Dc,Dc),Qe.computeAxis(Dc,NE);let s=Qe.computeAngle(Dc);c(i)||(i=[]),i[a]=NE.x*s,i[a+1]=NE.y*s,i[a+2]=NE.z*s}};Qe.unpackInterpolationResult=function(e,t,n,i,o){c(o)||(o=new Qe),f.fromArray(e,0,m0);let r=f.magnitude(m0);return Qe.unpack(t,i*4,PQ),r===0?Qe.clone(Qe.IDENTITY,Dc):Qe.fromAxisAngle(m0,r,Dc),Qe.multiply(Dc,PQ,o)};Qe.clone=function(e,t){if(c(e))return c(t)?(t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t):new Qe(e.x,e.y,e.z,e.w)};Qe.conjugate=function(e,t){return t.x=-e.x,t.y=-e.y,t.z=-e.z,t.w=e.w,t};Qe.magnitudeSquared=function(e){return e.x*e.x+e.y*e.y+e.z*e.z+e.w*e.w};Qe.magnitude=function(e){return Math.sqrt(Qe.magnitudeSquared(e))};Qe.normalize=function(e,t){let n=1/Qe.magnitude(e),i=e.x*n,o=e.y*n,r=e.z*n,a=e.w*n;return t.x=i,t.y=o,t.z=r,t.w=a,t};Qe.inverse=function(e,t){let n=Qe.magnitudeSquared(e);return t=Qe.conjugate(e,t),Qe.multiplyByScalar(t,1/n,t)};Qe.add=function(e,t,n){return n.x=e.x+t.x,n.y=e.y+t.y,n.z=e.z+t.z,n.w=e.w+t.w,n};Qe.subtract=function(e,t,n){return n.x=e.x-t.x,n.y=e.y-t.y,n.z=e.z-t.z,n.w=e.w-t.w,n};Qe.negate=function(e,t){return t.x=-e.x,t.y=-e.y,t.z=-e.z,t.w=-e.w,t};Qe.dot=function(e,t){return e.x*t.x+e.y*t.y+e.z*t.z+e.w*t.w};Qe.multiply=function(e,t,n){let i=e.x,o=e.y,r=e.z,a=e.w,s=t.x,A=t.y,l=t.z,d=t.w,m=a*s+i*d+o*l-r*A,p=a*A-i*l+o*d+r*s,g=a*l+i*A-o*s+r*d,h=a*d-i*s-o*A-r*l;return n.x=m,n.y=p,n.z=g,n.w=h,n};Qe.multiplyByScalar=function(e,t,n){return n.x=e.x*t,n.y=e.y*t,n.z=e.z*t,n.w=e.w*t,n};Qe.divideByScalar=function(e,t,n){return n.x=e.x/t,n.y=e.y/t,n.z=e.z/t,n.w=e.w/t,n};Qe.computeAxis=function(e,t){let n=e.w;if(Math.abs(n-1)<S.EPSILON6||Math.abs(n+1)<S.EPSILON6)return t.x=1,t.y=t.z=0,t;let i=1/Math.sqrt(1-n*n);return t.x=e.x*i,t.y=e.y*i,t.z=e.z*i,t};Qe.computeAngle=function(e){return Math.abs(e.w-1)<S.EPSILON6?0:2*Math.acos(e.w)};var p0=new Qe;Qe.lerp=function(e,t,n,i){return p0=Qe.multiplyByScalar(t,n,p0),i=Qe.multiplyByScalar(e,1-n,i),Qe.add(p0,i,i)};var NQ=new Qe,g0=new Qe,C0=new Qe;Qe.slerp=function(e,t,n,i){let o=Qe.dot(e,t),r=t;if(o<0&&(o=-o,r=NQ=Qe.negate(t,NQ)),1-o<S.EPSILON6)return Qe.lerp(e,r,n,i);let a=Math.acos(o);return g0=Qe.multiplyByScalar(e,Math.sin((1-n)*a),g0),C0=Qe.multiplyByScalar(r,Math.sin(n*a),C0),i=Qe.add(g0,C0,i),Qe.multiplyByScalar(i,1/Math.sin(a),i)};Qe.log=function(e,t){let n=S.acosClamped(e.w),i=0;return n!==0&&(i=n/Math.sin(n)),f.multiplyByScalar(e,i,t)};Qe.exp=function(e,t){let n=f.magnitude(e),i=0;return n!==0&&(i=Math.sin(n)/n),t.x=e.x*i,t.y=e.y*i,t.z=e.z*i,t.w=Math.cos(n),t};var fq=new f,dq=new f,up=new Qe,mh=new Qe;Qe.computeInnerQuadrangle=function(e,t,n,i){let o=Qe.conjugate(t,up);Qe.multiply(o,n,mh);let r=Qe.log(mh,fq);Qe.multiply(o,e,mh);let a=Qe.log(mh,dq);return f.add(r,a,r),f.multiplyByScalar(r,.25,r),f.negate(r,r),Qe.exp(r,up),Qe.multiply(t,up,i)};Qe.squad=function(e,t,n,i,o,r){let a=Qe.slerp(e,t,o,up),s=Qe.slerp(n,i,o,mh);return Qe.slerp(a,s,2*o*(1-o),r)};var hq=new Qe,LQ=1.9011074535173003,FE=Ut.supportsTypedArrays()?new Float32Array(8):[],OE=Ut.supportsTypedArrays()?new Float32Array(8):[],rl=Ut.supportsTypedArrays()?new Float32Array(8):[],al=Ut.supportsTypedArrays()?new Float32Array(8):[];for(let e=0;e<7;++e){let t=e+1,n=2*t+1;FE[e]=1/(t*n),OE[e]=t/n}FE[7]=LQ/136;OE[7]=LQ*8/17;Qe.fastSlerp=function(e,t,n,i){let o=Qe.dot(e,t),r;o>=0?r=1:(r=-1,o=-o);let a=o-1,s=1-n,A=n*n,l=s*s;for(let g=7;g>=0;--g)rl[g]=(FE[g]*A-OE[g])*a,al[g]=(FE[g]*l-OE[g])*a;let d=r*n*(1+rl[0]*(1+rl[1]*(1+rl[2]*(1+rl[3]*(1+rl[4]*(1+rl[5]*(1+rl[6]*(1+rl[7])))))))),m=s*(1+al[0]*(1+al[1]*(1+al[2]*(1+al[3]*(1+al[4]*(1+al[5]*(1+al[6]*(1+al[7])))))))),p=Qe.multiplyByScalar(e,m,hq);return Qe.multiplyByScalar(t,d,i),Qe.add(p,i,i)};Qe.fastSquad=function(e,t,n,i,o,r){let a=Qe.fastSlerp(e,t,o,up),s=Qe.fastSlerp(n,i,o,mh);return Qe.fastSlerp(a,s,2*o*(1-o),r)};Qe.equals=function(e,t){return e===t||c(e)&&c(t)&&e.x===t.x&&e.y===t.y&&e.z===t.z&&e.w===t.w};Qe.equalsEpsilon=function(e,t,n){return n=n??0,e===t||c(e)&&c(t)&&Math.abs(e.x-t.x)<=n&&Math.abs(e.y-t.y)<=n&&Math.abs(e.z-t.z)<=n&&Math.abs(e.w-t.w)<=n};Qe.ZERO=Object.freeze(new Qe(0,0,0,0));Qe.IDENTITY=Object.freeze(new Qe(0,0,0,1));Qe.prototype.clone=function(e){return Qe.clone(this,e)};Qe.prototype.equals=function(e){return Qe.equals(this,e)};Qe.prototype.equalsEpsilon=function(e,t){return Qe.equalsEpsilon(this,e,t)};Qe.prototype.toString=function(){return`(${this.x}, ${this.y}, ${this.z}, ${this.w})`};var gt=Qe;var dn={},E0={up:{south:"east",north:"west",west:"south",east:"north"},down:{south:"west",north:"east",west:"north",east:"south"},south:{up:"west",down:"east",west:"down",east:"up"},north:{up:"east",down:"west",west:"up",east:"down"},west:{up:"north",down:"south",north:"down",south:"up"},east:{up:"south",down:"north",north:"up",south:"down"}},ph={north:[-1,0,0],east:[0,1,0],up:[0,0,1],south:[1,0,0],west:[0,-1,0],down:[0,0,-1]},_0={},Ha={east:new f,north:new f,up:new f,west:new f,south:new f,down:new f},Cu=new f,Eu=new f,_u=new f;dn.localFrameToFixedFrameGenerator=function(e,t){if(!E0.hasOwnProperty(e)||!E0[e].hasOwnProperty(t))throw new be("firstAxis and secondAxis must be east, north, up, west, south or down.");let n=E0[e][t],i,o=e+t;return c(_0[o])?i=_0[o]:(i=function(r,a,s){if(c(s)||(s=new Q),f.equalsEpsilon(r,f.ZERO,S.EPSILON14))f.unpack(ph[e],0,Cu),f.unpack(ph[t],0,Eu),f.unpack(ph[n],0,_u);else if(S.equalsEpsilon(r.x,0,S.EPSILON14)&&S.equalsEpsilon(r.y,0,S.EPSILON14)){let A=S.sign(r.z);f.unpack(ph[e],0,Cu),e!=="east"&&e!=="west"&&f.multiplyByScalar(Cu,A,Cu),f.unpack(ph[t],0,Eu),t!=="east"&&t!=="west"&&f.multiplyByScalar(Eu,A,Eu),f.unpack(ph[n],0,_u),n!=="east"&&n!=="west"&&f.multiplyByScalar(_u,A,_u)}else{a=a??pe.default,a.geodeticSurfaceNormal(r,Ha.up);let A=Ha.up,l=Ha.east;l.x=-r.y,l.y=r.x,l.z=0,f.normalize(l,Ha.east),f.cross(A,l,Ha.north),f.multiplyByScalar(Ha.up,-1,Ha.down),f.multiplyByScalar(Ha.east,-1,Ha.west),f.multiplyByScalar(Ha.north,-1,Ha.south),Cu=Ha[e],Eu=Ha[t],_u=Ha[n]}return s[0]=Cu.x,s[1]=Cu.y,s[2]=Cu.z,s[3]=0,s[4]=Eu.x,s[5]=Eu.y,s[6]=Eu.z,s[7]=0,s[8]=_u.x,s[9]=_u.y,s[10]=_u.z,s[11]=0,s[12]=r.x,s[13]=r.y,s[14]=r.z,s[15]=1,s},_0[o]=i),i};dn.eastNorthUpToFixedFrame=dn.localFrameToFixedFrameGenerator("east","north");dn.northEastDownToFixedFrame=dn.localFrameToFixedFrameGenerator("north","east");dn.northUpEastToFixedFrame=dn.localFrameToFixedFrameGenerator("north","up");dn.northWestUpToFixedFrame=dn.localFrameToFixedFrameGenerator("north","west");var mq=new gt,pq=new f(1,1,1),gq=new Q;dn.headingPitchRollToFixedFrame=function(e,t,n,i,o){i=i??dn.eastNorthUpToFixedFrame;let r=gt.fromHeadingPitchRoll(t,mq),a=Q.fromTranslationQuaternionRotationScale(f.ZERO,r,pq,gq);return o=i(e,n,o),Q.multiply(o,a,o)};var Cq=new Q,Eq=new ne;dn.headingPitchRollQuaternion=function(e,t,n,i,o){let r=dn.headingPitchRollToFixedFrame(e,t,n,i,Cq),a=Q.getMatrix3(r,Eq);return gt.fromRotationMatrix(a,o)};var _q=new f(1,1,1),Iq=new f,FQ=new Q,yq=new Q,bq=new ne,Bq=new gt;dn.fixedFrameToHeadingPitchRoll=function(e,t,n,i){t=t??pe.default,n=n??dn.eastNorthUpToFixedFrame,c(i)||(i=new us);let o=Q.getTranslation(e,Iq);if(f.equals(o,f.ZERO))return i.heading=0,i.pitch=0,i.roll=0,i;let r=Q.inverseTransformation(n(o,t,FQ),FQ),a=Q.setScale(e,_q,yq);a=Q.setTranslation(a,f.ZERO,a),r=Q.multiply(r,a,r);let s=gt.fromRotationMatrix(Q.getMatrix3(r,bq),Bq);return s=gt.normalize(s,s),us.fromQuaternion(s,i)};var xq=6*3600+2460+50.54841,Tq=8640184812866e-6,Sq=.093104,wq=-62e-7,Dq=11772758384668e-32,Qq=72921158553e-15,Rq=S.TWO_PI/86400,kE=new Ue;dn.computeIcrfToCentralBodyFixedMatrix=function(e,t){let n=dn.computeIcrfToFixedMatrix(e,t);return c(n)||(n=dn.computeTemeToPseudoFixedMatrix(e,t)),n};dn.computeTemeToPseudoFixedMatrix=function(e,t){kE=Ue.addSeconds(e,-Ue.computeTaiMinusUtc(e),kE);let n=kE.dayNumber,i=kE.secondsOfDay,o,r=n-2451545;i>=43200?o=(r+.5)/Ti.DAYS_PER_JULIAN_CENTURY:o=(r-.5)/Ti.DAYS_PER_JULIAN_CENTURY;let s=(xq+o*(Tq+o*(Sq+o*wq)))*Rq%S.TWO_PI,A=Qq+Dq*(n-24515455e-1),l=(i+Ti.SECONDS_PER_DAY*.5)%Ti.SECONDS_PER_DAY,d=s+A*l,m=Math.cos(d),p=Math.sin(d);return c(t)?(t[0]=m,t[1]=-p,t[2]=0,t[3]=p,t[4]=m,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t):new ne(m,p,0,-p,m,0,0,0,1)};dn.iau2006XysData=new QQ;dn.earthOrientationParameters=BQ.NONE;var b0=32.184,vq=2451545;dn.preloadIcrfFixed=function(e){let t=e.start.dayNumber,n=e.start.secondsOfDay+b0,i=e.stop.dayNumber,o=e.stop.secondsOfDay+b0;return dn.iau2006XysData.preload(t,n,i,o)};dn.computeIcrfToFixedMatrix=function(e,t){c(t)||(t=new ne);let n=dn.computeFixedToIcrfMatrix(e,t);if(c(n))return ne.transpose(n,t)};var Mq=32.184,Pq=2451545,UE=new us,Nq=new ne,Lq=new Ue;dn.computeMoonFixedToIcrfMatrix=function(e,t){c(t)||(t=new ne);let n=Ue.addSeconds(e,Mq,Lq),i=Ue.totalDays(n)-Pq,o=S.toRadians(12.112)-S.toRadians(.052992)*i,r=S.toRadians(24.224)-S.toRadians(.105984)*i,a=S.toRadians(227.645)+S.toRadians(13.012)*i,s=S.toRadians(261.105)+S.toRadians(13.340716)*i,A=S.toRadians(358)+S.toRadians(.9856)*i;return UE.pitch=S.toRadians(180)-S.toRadians(3.878)*Math.sin(o)-S.toRadians(.12)*Math.sin(r)+S.toRadians(.07)*Math.sin(a)-S.toRadians(.017)*Math.sin(s),UE.roll=S.toRadians(66.53-90)+S.toRadians(1.543)*Math.cos(o)+S.toRadians(.24)*Math.cos(r)-S.toRadians(.028)*Math.cos(a)+S.toRadians(.007)*Math.cos(s),UE.heading=S.toRadians(244.375-90)+S.toRadians(13.17635831)*i+S.toRadians(3.558)*Math.sin(o)+S.toRadians(.121)*Math.sin(r)-S.toRadians(.064)*Math.sin(a)+S.toRadians(.016)*Math.sin(s)+S.toRadians(.025)*Math.sin(A),ne.fromHeadingPitchRoll(UE,Nq)};dn.computeIcrfToMoonFixedMatrix=function(e,t){c(t)||(t=new ne);let n=dn.computeMoonFixedToIcrfMatrix(e,t);if(c(n))return ne.transpose(n,t)};var Fq=new PE(0,0,0),Oq=new ip(0,0,0,0,0,0),I0=new ne,y0=new ne;dn.computeFixedToIcrfMatrix=function(e,t){c(t)||(t=new ne);let n=dn.earthOrientationParameters.compute(e,Oq);if(!c(n))return;let i=e.dayNumber,o=e.secondsOfDay+b0,r=dn.iau2006XysData.computeXysRadians(i,o,Fq);if(!c(r))return;let a=r.x+n.xPoleOffset,s=r.y+n.yPoleOffset,A=1/(1+Math.sqrt(1-a*a-s*s)),l=I0;l[0]=1-A*a*a,l[3]=-A*a*s,l[6]=a,l[1]=-A*a*s,l[4]=1-A*s*s,l[7]=s,l[2]=-a,l[5]=-s,l[8]=1-A*(a*a+s*s);let d=ne.fromRotationZ(-r.s,y0),m=ne.multiply(l,d,I0),p=e.dayNumber,g=e.secondsOfDay-Ue.computeTaiMinusUtc(e)+n.ut1MinusUtc,h=p-2451545,C=g/Ti.SECONDS_PER_DAY,_=.779057273264+C+.00273781191135448*(h+C);_=_%1*S.TWO_PI;let I=ne.fromRotationZ(_,y0),b=ne.multiply(m,I,I0),x=Math.cos(n.xPoleWander),T=Math.cos(n.yPoleWander),w=Math.sin(n.xPoleWander),R=Math.sin(n.yPoleWander),z=i-vq+o/Ti.SECONDS_PER_DAY;z/=36525;let M=-47e-6*z*S.RADIANS_PER_DEGREE/3600,N=Math.cos(M),O=Math.sin(M),u=y0;return u[0]=x*N,u[1]=x*O,u[2]=w,u[3]=-T*O+R*w*N,u[4]=T*N+R*w*O,u[5]=-R*x,u[6]=-R*O-T*w*N,u[7]=R*N-T*w*O,u[8]=T*x,ne.multiply(b,u,t)};var kq=new re;dn.pointToWindowCoordinates=function(e,t,n,i){return i=dn.pointToGLWindowCoordinates(e,t,n,i),i.y=2*t[5]-i.y,i};dn.pointToGLWindowCoordinates=function(e,t,n,i){c(i)||(i=new L);let o=kq;return Q.multiplyByVector(e,re.fromElements(n.x,n.y,n.z,1,o),o),re.multiplyByScalar(o,1/o.w,o),Q.multiplyByVector(t,o,o),L.fromCartesian4(o,i)};var Uq=new f,zq=new f,Gq=new f;dn.rotationMatrixFromPositionVelocity=function(e,t,n,i){let o=(n??pe.default).geodeticSurfaceNormal(e,Uq),r=f.cross(t,o,zq);f.equalsEpsilon(r,f.ZERO,S.EPSILON6)&&(r=f.clone(f.UNIT_X,r));let a=f.cross(r,t,Gq);return f.normalize(a,a),f.cross(t,a,r),f.negate(r,r),f.normalize(r,r),c(i)||(i=new ne),i[0]=t.x,i[1]=t.y,i[2]=t.z,i[3]=r.x,i[4]=r.y,i[5]=r.z,i[6]=a.x,i[7]=a.y,i[8]=a.z,i};var OQ=new Q(0,0,1,0,1,0,0,0,0,1,0,0,0,0,0,1),kQ=new ue,B0=new f,Hq=new f,Vq=new ne,x0=new Q,UQ=new Q;dn.basisTo2D=function(e,t,n){let i=Q.getTranslation(t,Hq),o=e.ellipsoid,r;if(f.equals(i,f.ZERO))r=f.clone(f.ZERO,B0);else{let d=o.cartesianToCartographic(i,kQ);r=e.project(d,B0),f.fromElements(r.z,r.x,r.y,r)}let a=dn.eastNorthUpToFixedFrame(i,o,x0),s=Q.inverseTransformation(a,UQ),A=Q.getMatrix3(t,Vq),l=Q.multiplyByMatrix3(s,A,n);return Q.multiply(OQ,l,n),Q.setTranslation(n,r,n),n};dn.ellipsoidTo2DModelMatrix=function(e,t,n){let i=e.ellipsoid,o=dn.eastNorthUpToFixedFrame(t,i,x0),r=Q.inverseTransformation(o,UQ),a=i.cartesianToCartographic(t,kQ),s=e.project(a,B0);f.fromElements(s.z,s.x,s.y,s);let A=Q.fromTranslation(s,x0);return Q.multiply(OQ,r,n),Q.multiply(A,n,n),n};var sn=dn;function Ot(e,t,n,i){this.west=e??0,this.south=t??0,this.east=n??0,this.north=i??0}Object.defineProperties(Ot.prototype,{width:{get:function(){return Ot.computeWidth(this)}},height:{get:function(){return Ot.computeHeight(this)}}});Ot.packedLength=4;Ot.pack=function(e,t,n){return n=n??0,t[n++]=e.west,t[n++]=e.south,t[n++]=e.east,t[n]=e.north,t};Ot.unpack=function(e,t,n){return t=t??0,c(n)||(n=new Ot),n.west=e[t++],n.south=e[t++],n.east=e[t++],n.north=e[t],n};Ot.computeWidth=function(e){let t=e.east,n=e.west;return t<n&&(t+=S.TWO_PI),t-n};Ot.computeHeight=function(e){return e.north-e.south};Ot.fromDegrees=function(e,t,n,i,o){return e=S.toRadians(e??0),t=S.toRadians(t??0),n=S.toRadians(n??0),i=S.toRadians(i??0),c(o)?(o.west=e,o.south=t,o.east=n,o.north=i,o):new Ot(e,t,n,i)};Ot.fromRadians=function(e,t,n,i,o){return c(o)?(o.west=e??0,o.south=t??0,o.east=n??0,o.north=i??0,o):new Ot(e,t,n,i)};Ot.fromCartographicArray=function(e,t){let n=Number.MAX_VALUE,i=-Number.MAX_VALUE,o=Number.MAX_VALUE,r=-Number.MAX_VALUE,a=Number.MAX_VALUE,s=-Number.MAX_VALUE;for(let A=0,l=e.length;A<l;A++){let d=e[A];n=Math.min(n,d.longitude),i=Math.max(i,d.longitude),a=Math.min(a,d.latitude),s=Math.max(s,d.latitude);let m=d.longitude>=0?d.longitude:d.longitude+S.TWO_PI;o=Math.min(o,m),r=Math.max(r,m)}return i-n>r-o&&(n=o,i=r,i>S.PI&&(i=i-S.TWO_PI),n>S.PI&&(n=n-S.TWO_PI)),c(t)?(t.west=n,t.south=a,t.east=i,t.north=s,t):new Ot(n,a,i,s)};Ot.fromCartesianArray=function(e,t,n){t=t??pe.default;let i=Number.MAX_VALUE,o=-Number.MAX_VALUE,r=Number.MAX_VALUE,a=-Number.MAX_VALUE,s=Number.MAX_VALUE,A=-Number.MAX_VALUE;for(let l=0,d=e.length;l<d;l++){let m=t.cartesianToCartographic(e[l]);i=Math.min(i,m.longitude),o=Math.max(o,m.longitude),s=Math.min(s,m.latitude),A=Math.max(A,m.latitude);let p=m.longitude>=0?m.longitude:m.longitude+S.TWO_PI;r=Math.min(r,p),a=Math.max(a,p)}return o-i>a-r&&(i=r,o=a,o>S.PI&&(o=o-S.TWO_PI),i>S.PI&&(i=i-S.TWO_PI)),c(n)?(n.west=i,n.south=s,n.east=o,n.north=A,n):new Ot(i,s,o,A)};var jq=new f,Yq=new f,Wq=new f,qq=new f,Jq=new f,T0=new Array(5);for(let e=0;e<T0.length;++e)T0[e]=new f;Ot.fromBoundingSphere=function(e,t,n){let i=e.center,o=e.radius;if(c(t)||(t=pe.default),c(n)||(n=new Ot),f.equals(i,f.ZERO))return Ot.clone(Ot.MAX_VALUE,n),n;let r=sn.eastNorthUpToFixedFrame(i,t,jq),a=Q.multiplyByPointAsVector(r,f.UNIT_X,Yq);f.normalize(a,a);let s=Q.multiplyByPointAsVector(r,f.UNIT_Y,Wq);f.normalize(s,s),f.multiplyByScalar(s,o,s),f.multiplyByScalar(a,o,a);let A=f.negate(s,Jq),l=f.negate(a,qq),d=T0,m=d[0];return f.add(i,s,m),m=d[1],f.add(i,l,m),m=d[2],f.add(i,A,m),m=d[3],f.add(i,a,m),d[4]=i,Ot.fromCartesianArray(d,t,n)};Ot.clone=function(e,t){if(c(e))return c(t)?(t.west=e.west,t.south=e.south,t.east=e.east,t.north=e.north,t):new Ot(e.west,e.south,e.east,e.north)};Ot.equalsEpsilon=function(e,t,n){return n=n??0,e===t||c(e)&&c(t)&&Math.abs(e.west-t.west)<=n&&Math.abs(e.south-t.south)<=n&&Math.abs(e.east-t.east)<=n&&Math.abs(e.north-t.north)<=n};Ot.prototype.clone=function(e){return Ot.clone(this,e)};Ot.prototype.equals=function(e){return Ot.equals(this,e)};Ot.equals=function(e,t){return e===t||c(e)&&c(t)&&e.west===t.west&&e.south===t.south&&e.east===t.east&&e.north===t.north};Ot.prototype.equalsEpsilon=function(e,t){return Ot.equalsEpsilon(this,e,t)};Ot._validate=function(e){};Ot.southwest=function(e,t){return c(t)?(t.longitude=e.west,t.latitude=e.south,t.height=0,t):new ue(e.west,e.south)};Ot.northwest=function(e,t){return c(t)?(t.longitude=e.west,t.latitude=e.north,t.height=0,t):new ue(e.west,e.north)};Ot.northeast=function(e,t){return c(t)?(t.longitude=e.east,t.latitude=e.north,t.height=0,t):new ue(e.east,e.north)};Ot.southeast=function(e,t){return c(t)?(t.longitude=e.east,t.latitude=e.south,t.height=0,t):new ue(e.east,e.south)};Ot.center=function(e,t){let n=e.east,i=e.west;n<i&&(n+=S.TWO_PI);let o=S.negativePiToPi((i+n)*.5),r=(e.south+e.north)*.5;return c(t)?(t.longitude=o,t.latitude=r,t.height=0,t):new ue(o,r)};Ot.intersection=function(e,t,n){let i=e.east,o=e.west,r=t.east,a=t.west;i<o&&r>0?i+=S.TWO_PI:r<a&&i>0&&(r+=S.TWO_PI),i<o&&a<0?a+=S.TWO_PI:r<a&&o<0&&(o+=S.TWO_PI);let s=S.negativePiToPi(Math.max(o,a)),A=S.negativePiToPi(Math.min(i,r));if((e.west<e.east||t.west<t.east)&&A<=s)return;let l=Math.max(e.south,t.south),d=Math.min(e.north,t.north);if(!(l>=d))return c(n)?(n.west=s,n.south=l,n.east=A,n.north=d,n):new Ot(s,l,A,d)};Ot.simpleIntersection=function(e,t,n){let i=Math.max(e.west,t.west),o=Math.max(e.south,t.south),r=Math.min(e.east,t.east),a=Math.min(e.north,t.north);if(!(o>=a||i>=r))return c(n)?(n.west=i,n.south=o,n.east=r,n.north=a,n):new Ot(i,o,r,a)};Ot.union=function(e,t,n){c(n)||(n=new Ot);let i=e.east,o=e.west,r=t.east,a=t.west;i<o&&r>0?i+=S.TWO_PI:r<a&&i>0&&(r+=S.TWO_PI),i<o&&a<0?a+=S.TWO_PI:r<a&&o<0&&(o+=S.TWO_PI);let s=S.negativePiToPi(Math.min(o,a)),A=S.negativePiToPi(Math.max(i,r));return n.west=s,n.south=Math.min(e.south,t.south),n.east=A,n.north=Math.max(e.north,t.north),n};Ot.expand=function(e,t,n){return c(n)||(n=new Ot),n.west=Math.min(e.west,t.longitude),n.south=Math.min(e.south,t.latitude),n.east=Math.max(e.east,t.longitude),n.north=Math.max(e.north,t.latitude),n};Ot.contains=function(e,t){let n=t.longitude,i=t.latitude,o=e.west,r=e.east;return r<o&&(r+=S.TWO_PI,n<0&&(n+=S.TWO_PI)),(n>o||S.equalsEpsilon(n,o,S.EPSILON14))&&(n<r||S.equalsEpsilon(n,r,S.EPSILON14))&&i>=e.south&&i<=e.north};var Kq=new ue;Ot.subsample=function(e,t,n,i){t=t??pe.default,n=n??0,c(i)||(i=[]);let o=0,r=e.north,a=e.south,s=e.east,A=e.west,l=Kq;l.height=n,l.longitude=A,l.latitude=r,i[o]=t.cartographicToCartesian(l,i[o]),o++,l.longitude=s,i[o]=t.cartographicToCartesian(l,i[o]),o++,l.latitude=a,i[o]=t.cartographicToCartesian(l,i[o]),o++,l.longitude=A,i[o]=t.cartographicToCartesian(l,i[o]),o++,r<0?l.latitude=r:a>0?l.latitude=a:l.latitude=0;for(let d=1;d<8;++d)l.longitude=-Math.PI+d*S.PI_OVER_TWO,Ot.contains(e,l)&&(i[o]=t.cartographicToCartesian(l,i[o]),o++);return l.latitude===0&&(l.longitude=A,i[o]=t.cartographicToCartesian(l,i[o]),o++,l.longitude=s,i[o]=t.cartographicToCartesian(l,i[o]),o++),i.length=o,i};Ot.subsection=function(e,t,n,i,o,r){if(c(r)||(r=new Ot),e.west<=e.east){let s=e.east-e.west;r.west=e.west+t*s,r.east=e.west+i*s}else{let s=S.TWO_PI+e.east-e.west;r.west=S.negativePiToPi(e.west+t*s),r.east=S.negativePiToPi(e.west+i*s)}let a=e.north-e.south;return r.south=e.south+n*a,r.north=e.south+o*a,t===1&&(r.west=e.east),i===1&&(r.east=e.east),n===1&&(r.south=e.north),o===1&&(r.north=e.north),r};Ot.MAX_VALUE=Object.freeze(new Ot(-Math.PI,-S.PI_OVER_TWO,Math.PI,S.PI_OVER_TWO));var de=Ot;function co(e,t,n,i){this.x=e??0,this.y=t??0,this.width=n??0,this.height=i??0}co.packedLength=4;co.pack=function(e,t,n){return n=n??0,t[n++]=e.x,t[n++]=e.y,t[n++]=e.width,t[n]=e.height,t};co.unpack=function(e,t,n){return t=t??0,c(n)||(n=new co),n.x=e[t++],n.y=e[t++],n.width=e[t++],n.height=e[t],n};co.fromPoints=function(e,t){if(c(t)||(t=new co),!c(e)||e.length===0)return t.x=0,t.y=0,t.width=0,t.height=0,t;let n=e.length,i=e[0].x,o=e[0].y,r=e[0].x,a=e[0].y;for(let s=1;s<n;s++){let A=e[s],l=A.x,d=A.y;i=Math.min(l,i),r=Math.max(l,r),o=Math.min(d,o),a=Math.max(d,a)}return t.x=i,t.y=o,t.width=r-i,t.height=a-o,t};var zQ=new Ai,Xq=new ue,Zq=new ue;co.fromRectangle=function(e,t,n){if(c(n)||(n=new co),!c(e))return n.x=0,n.y=0,n.width=0,n.height=0,n;zQ._ellipsoid=pe.default,t=t??zQ;let i=t.project(de.southwest(e,Xq)),o=t.project(de.northeast(e,Zq));return L.subtract(o,i,o),n.x=i.x,n.y=i.y,n.width=o.x,n.height=o.y,n};co.clone=function(e,t){if(c(e))return c(t)?(t.x=e.x,t.y=e.y,t.width=e.width,t.height=e.height,t):new co(e.x,e.y,e.width,e.height)};co.union=function(e,t,n){c(n)||(n=new co);let i=Math.min(e.x,t.x),o=Math.min(e.y,t.y),r=Math.max(e.x+e.width,t.x+t.width),a=Math.max(e.y+e.height,t.y+t.height);return n.x=i,n.y=o,n.width=r-i,n.height=a-o,n};co.expand=function(e,t,n){n=co.clone(e,n);let i=t.x-n.x,o=t.y-n.y;return i>n.width?n.width=i:i<0&&(n.width-=i,n.x=t.x),o>n.height?n.height=o:o<0&&(n.height-=o,n.y=t.y),n};co.intersect=function(e,t){let n=e.x,i=e.y,o=t.x,r=t.y;return n>o+t.width||n+e.width<o||i+e.height<r||i>r+t.height?bt.OUTSIDE:bt.INTERSECTING};co.equals=function(e,t){return e===t||c(e)&&c(t)&&e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height};co.prototype.clone=function(e){return co.clone(this,e)};co.prototype.intersect=function(e){return co.intersect(this,e)};co.prototype.equals=function(e){return co.equals(this,e)};var oi=co;var Mr={POINTS:W.POINTS,LINES:W.LINES,LINE_LOOP:W.LINE_LOOP,LINE_STRIP:W.LINE_STRIP,TRIANGLES:W.TRIANGLES,TRIANGLE_STRIP:W.TRIANGLE_STRIP,TRIANGLE_FAN:W.TRIANGLE_FAN};Mr.isLines=function(e){return e===Mr.LINES||e===Mr.LINE_LOOP||e===Mr.LINE_STRIP};Mr.isTriangles=function(e){return e===Mr.TRIANGLES||e===Mr.TRIANGLE_STRIP||e===Mr.TRIANGLE_FAN};Mr.validate=function(e){return e===Mr.POINTS||e===Mr.LINES||e===Mr.LINE_LOOP||e===Mr.LINE_STRIP||e===Mr.TRIANGLES||e===Mr.TRIANGLE_STRIP||e===Mr.TRIANGLE_FAN};var Me=Object.freeze(Mr);var Xi={CULL:1,OCCLUDE:2,EXECUTE_IN_CLOSEST_FRUSTUM:4,DEBUG_SHOW_BOUNDING_VOLUME:8,CAST_SHADOWS:16,RECEIVE_SHADOWS:32,PICK_ONLY:64,DEPTH_FOR_TRANSLUCENT_CLASSIFICATION:128};function fp(e){e=e??G.EMPTY_OBJECT,this._boundingVolume=e.boundingVolume,this._orientedBoundingBox=e.orientedBoundingBox,this._modelMatrix=e.modelMatrix,this._primitiveType=e.primitiveType??Me.TRIANGLES,this._vertexArray=e.vertexArray,this._count=e.count,this._offset=e.offset??0,this._instanceCount=e.instanceCount??0,this._shaderProgram=e.shaderProgram,this._uniformMap=e.uniformMap,this._renderState=e.renderState,this._framebuffer=e.framebuffer,this._pass=e.pass,this._owner=e.owner,this._debugOverlappingFrustums=0,this._pickId=e.pickId,this._pickMetadataAllowed=e.pickMetadataAllowed===!0,this._pickedMetadataInfo=void 0,this._flags=0,this.cull=e.cull??!0,this.occlude=e.occlude??!0,this.executeInClosestFrustum=e.executeInClosestFrustum??!1,this.debugShowBoundingVolume=e.debugShowBoundingVolume??!1,this.castShadows=e.castShadows??!1,this.receiveShadows=e.receiveShadows??!1,this.pickOnly=e.pickOnly??!1,this.depthForTranslucentClassification=e.depthForTranslucentClassification??!1,this.dirty=!0,this.lastDirtyTime=0,this.derivedCommands={}}function qr(e,t){return(e._flags&t)===t}function Iu(e,t,n){n?e._flags|=t:e._flags&=~t}Object.defineProperties(fp.prototype,{boundingVolume:{get:function(){return this._boundingVolume},set:function(e){this._boundingVolume!==e&&(this._boundingVolume=e,this.dirty=!0)}},orientedBoundingBox:{get:function(){return this._orientedBoundingBox},set:function(e){this._orientedBoundingBox!==e&&(this._orientedBoundingBox=e,this.dirty=!0)}},cull:{get:function(){return qr(this,Xi.CULL)},set:function(e){qr(this,Xi.CULL)!==e&&(Iu(this,Xi.CULL,e),this.dirty=!0)}},occlude:{get:function(){return qr(this,Xi.OCCLUDE)},set:function(e){qr(this,Xi.OCCLUDE)!==e&&(Iu(this,Xi.OCCLUDE,e),this.dirty=!0)}},modelMatrix:{get:function(){return this._modelMatrix},set:function(e){this._modelMatrix!==e&&(this._modelMatrix=e,this.dirty=!0)}},primitiveType:{get:function(){return this._primitiveType},set:function(e){this._primitiveType!==e&&(this._primitiveType=e,this.dirty=!0)}},vertexArray:{get:function(){return this._vertexArray},set:function(e){this._vertexArray!==e&&(this._vertexArray=e,this.dirty=!0)}},count:{get:function(){return this._count},set:function(e){this._count!==e&&(this._count=e,this.dirty=!0)}},offset:{get:function(){return this._offset},set:function(e){this._offset!==e&&(this._offset=e,this.dirty=!0)}},instanceCount:{get:function(){return this._instanceCount},set:function(e){this._instanceCount!==e&&(this._instanceCount=e,this.dirty=!0)}},shaderProgram:{get:function(){return this._shaderProgram},set:function(e){this._shaderProgram!==e&&(this._shaderProgram=e,this.dirty=!0)}},castShadows:{get:function(){return qr(this,Xi.CAST_SHADOWS)},set:function(e){qr(this,Xi.CAST_SHADOWS)!==e&&(Iu(this,Xi.CAST_SHADOWS,e),this.dirty=!0)}},receiveShadows:{get:function(){return qr(this,Xi.RECEIVE_SHADOWS)},set:function(e){qr(this,Xi.RECEIVE_SHADOWS)!==e&&(Iu(this,Xi.RECEIVE_SHADOWS,e),this.dirty=!0)}},uniformMap:{get:function(){return this._uniformMap},set:function(e){this._uniformMap!==e&&(this._uniformMap=e,this.dirty=!0)}},renderState:{get:function(){return this._renderState},set:function(e){this._renderState!==e&&(this._renderState=e,this.dirty=!0)}},framebuffer:{get:function(){return this._framebuffer},set:function(e){this._framebuffer!==e&&(this._framebuffer=e,this.dirty=!0)}},pass:{get:function(){return this._pass},set:function(e){this._pass!==e&&(this._pass=e,this.dirty=!0)}},executeInClosestFrustum:{get:function(){return qr(this,Xi.EXECUTE_IN_CLOSEST_FRUSTUM)},set:function(e){qr(this,Xi.EXECUTE_IN_CLOSEST_FRUSTUM)!==e&&(Iu(this,Xi.EXECUTE_IN_CLOSEST_FRUSTUM,e),this.dirty=!0)}},owner:{get:function(){return this._owner},set:function(e){this._owner!==e&&(this._owner=e,this.dirty=!0)}},debugShowBoundingVolume:{get:function(){return qr(this,Xi.DEBUG_SHOW_BOUNDING_VOLUME)},set:function(e){qr(this,Xi.DEBUG_SHOW_BOUNDING_VOLUME)!==e&&(Iu(this,Xi.DEBUG_SHOW_BOUNDING_VOLUME,e),this.dirty=!0)}},debugOverlappingFrustums:{get:function(){return this._debugOverlappingFrustums},set:function(e){this._debugOverlappingFrustums!==e&&(this._debugOverlappingFrustums=e,this.dirty=!0)}},pickId:{get:function(){return this._pickId},set:function(e){this._pickId!==e&&(this._pickId=e,this.dirty=!0)}},pickMetadataAllowed:{get:function(){return this._pickMetadataAllowed}},pickedMetadataInfo:{get:function(){return this._pickedMetadataInfo},set:function(e){this._pickedMetadataInfo!==e&&(this._pickedMetadataInfo=e,this.dirty=!0)}},pickOnly:{get:function(){return qr(this,Xi.PICK_ONLY)},set:function(e){qr(this,Xi.PICK_ONLY)!==e&&(Iu(this,Xi.PICK_ONLY,e),this.dirty=!0)}},depthForTranslucentClassification:{get:function(){return qr(this,Xi.DEPTH_FOR_TRANSLUCENT_CLASSIFICATION)},set:function(e){qr(this,Xi.DEPTH_FOR_TRANSLUCENT_CLASSIFICATION)!==e&&(Iu(this,Xi.DEPTH_FOR_TRANSLUCENT_CLASSIFICATION,e),this.dirty=!0)}}});fp.shallowClone=function(e,t){if(c(e))return c(t)||(t=new fp),t._boundingVolume=e._boundingVolume,t._orientedBoundingBox=e._orientedBoundingBox,t._modelMatrix=e._modelMatrix,t._primitiveType=e._primitiveType,t._vertexArray=e._vertexArray,t._count=e._count,t._offset=e._offset,t._instanceCount=e._instanceCount,t._shaderProgram=e._shaderProgram,t._uniformMap=e._uniformMap,t._renderState=e._renderState,t._framebuffer=e._framebuffer,t._pass=e._pass,t._owner=e._owner,t._debugOverlappingFrustums=e._debugOverlappingFrustums,t._pickId=e._pickId,t._pickMetadataAllowed=e._pickMetadataAllowed,t._pickedMetadataInfo=e._pickedMetadataInfo,t._flags=e._flags,t.dirty=!0,t.lastDirtyTime=0,t};fp.prototype.execute=function(e,t){e.draw(this,t)};var ft=fp;var hn={UNSIGNED_BYTE:W.UNSIGNED_BYTE,UNSIGNED_SHORT:W.UNSIGNED_SHORT,UNSIGNED_INT:W.UNSIGNED_INT,FLOAT:W.FLOAT,HALF_FLOAT:W.HALF_FLOAT_OES,UNSIGNED_INT_24_8:W.UNSIGNED_INT_24_8,UNSIGNED_SHORT_4_4_4_4:W.UNSIGNED_SHORT_4_4_4_4,UNSIGNED_SHORT_5_5_5_1:W.UNSIGNED_SHORT_5_5_5_1,UNSIGNED_SHORT_5_6_5:W.UNSIGNED_SHORT_5_6_5};hn.toWebGLConstant=function(e,t){switch(e){case hn.UNSIGNED_BYTE:return W.UNSIGNED_BYTE;case hn.UNSIGNED_SHORT:return W.UNSIGNED_SHORT;case hn.UNSIGNED_INT:return W.UNSIGNED_INT;case hn.FLOAT:return W.FLOAT;case hn.HALF_FLOAT:return t.webgl2?W.HALF_FLOAT:W.HALF_FLOAT_OES;case hn.UNSIGNED_INT_24_8:return W.UNSIGNED_INT_24_8;case hn.UNSIGNED_SHORT_4_4_4_4:return W.UNSIGNED_SHORT_4_4_4_4;case hn.UNSIGNED_SHORT_5_5_5_1:return W.UNSIGNED_SHORT_5_5_5_1;case hn.UNSIGNED_SHORT_5_6_5:return hn.UNSIGNED_SHORT_5_6_5}};hn.isPacked=function(e){return e===hn.UNSIGNED_INT_24_8||e===hn.UNSIGNED_SHORT_4_4_4_4||e===hn.UNSIGNED_SHORT_5_5_5_1||e===hn.UNSIGNED_SHORT_5_6_5};hn.sizeInBytes=function(e){switch(e){case hn.UNSIGNED_BYTE:return 1;case hn.UNSIGNED_SHORT:case hn.UNSIGNED_SHORT_4_4_4_4:case hn.UNSIGNED_SHORT_5_5_5_1:case hn.UNSIGNED_SHORT_5_6_5:case hn.HALF_FLOAT:return 2;case hn.UNSIGNED_INT:case hn.FLOAT:case hn.UNSIGNED_INT_24_8:return 4}};hn.validate=function(e){return e===hn.UNSIGNED_BYTE||e===hn.UNSIGNED_SHORT||e===hn.UNSIGNED_INT||e===hn.FLOAT||e===hn.HALF_FLOAT||e===hn.UNSIGNED_INT_24_8||e===hn.UNSIGNED_SHORT_4_4_4_4||e===hn.UNSIGNED_SHORT_5_5_5_1||e===hn.UNSIGNED_SHORT_5_6_5};hn.getTypedArrayConstructor=function(e){let t=hn.sizeInBytes(e);return t===Uint8Array.BYTES_PER_ELEMENT?Uint8Array:t===Uint16Array.BYTES_PER_ELEMENT?Uint16Array:t===Float32Array.BYTES_PER_ELEMENT&&e===hn.FLOAT?Float32Array:Uint32Array};var mt=Object.freeze(hn);var xe={DEPTH_COMPONENT:W.DEPTH_COMPONENT,DEPTH_STENCIL:W.DEPTH_STENCIL,ALPHA:W.ALPHA,RED:W.RED,RG:W.RG,RGB:W.RGB,RGBA:W.RGBA,RED_INTEGER:W.RED_INTEGER,RG_INTEGER:W.RG_INTEGER,RGB_INTEGER:W.RGB_INTEGER,RGBA_INTEGER:W.RGBA_INTEGER,LUMINANCE:W.LUMINANCE,LUMINANCE_ALPHA:W.LUMINANCE_ALPHA,RGB_DXT1:W.COMPRESSED_RGB_S3TC_DXT1_EXT,RGBA_DXT1:W.COMPRESSED_RGBA_S3TC_DXT1_EXT,RGBA_DXT3:W.COMPRESSED_RGBA_S3TC_DXT3_EXT,RGBA_DXT5:W.COMPRESSED_RGBA_S3TC_DXT5_EXT,RGB_PVRTC_4BPPV1:W.COMPRESSED_RGB_PVRTC_4BPPV1_IMG,RGB_PVRTC_2BPPV1:W.COMPRESSED_RGB_PVRTC_2BPPV1_IMG,RGBA_PVRTC_4BPPV1:W.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG,RGBA_PVRTC_2BPPV1:W.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG,RGBA_ASTC:W.COMPRESSED_RGBA_ASTC_4x4_WEBGL,RGB_ETC1:W.COMPRESSED_RGB_ETC1_WEBGL,RGB8_ETC2:W.COMPRESSED_RGB8_ETC2,RGBA8_ETC2_EAC:W.COMPRESSED_RGBA8_ETC2_EAC,RGBA_BC7:W.COMPRESSED_RGBA_BPTC_UNORM};xe.componentsLength=function(e){switch(e){case xe.RGB:case xe.RGB_INTEGER:return 3;case xe.RGBA:case xe.RGBA_INTEGER:return 4;case xe.LUMINANCE_ALPHA:case xe.RG:case xe.RG_INTEGER:return 2;case xe.ALPHA:case xe.RED:case xe.RED_INTEGER:case xe.LUMINANCE:return 1;default:return 1}};xe.validate=function(e){return e===xe.DEPTH_COMPONENT||e===xe.DEPTH_STENCIL||e===xe.ALPHA||e===xe.RED||e===xe.RG||e===xe.RGB||e===xe.RGBA||e===xe.RED_INTEGER||e===xe.RG_INTEGER||e===xe.RGB_INTEGER||e===xe.RGBA_INTEGER||e===xe.LUMINANCE||e===xe.LUMINANCE_ALPHA||e===xe.RGB_DXT1||e===xe.RGBA_DXT1||e===xe.RGBA_DXT3||e===xe.RGBA_DXT5||e===xe.RGB_PVRTC_4BPPV1||e===xe.RGB_PVRTC_2BPPV1||e===xe.RGBA_PVRTC_4BPPV1||e===xe.RGBA_PVRTC_2BPPV1||e===xe.RGBA_ASTC||e===xe.RGB_ETC1||e===xe.RGB8_ETC2||e===xe.RGBA8_ETC2_EAC||e===xe.RGBA_BC7};xe.isColorFormat=function(e){return e===xe.RED||e===xe.ALPHA||e===xe.RGB||e===xe.RGBA||e===xe.LUMINANCE||e===xe.LUMINANCE_ALPHA};xe.isDepthFormat=function(e){return e===xe.DEPTH_COMPONENT||e===xe.DEPTH_STENCIL};xe.isCompressedFormat=function(e){return e===xe.RGB_DXT1||e===xe.RGBA_DXT1||e===xe.RGBA_DXT3||e===xe.RGBA_DXT5||e===xe.RGB_PVRTC_4BPPV1||e===xe.RGB_PVRTC_2BPPV1||e===xe.RGBA_PVRTC_4BPPV1||e===xe.RGBA_PVRTC_2BPPV1||e===xe.RGBA_ASTC||e===xe.RGB_ETC1||e===xe.RGB8_ETC2||e===xe.RGBA8_ETC2_EAC||e===xe.RGBA_BC7};xe.isDXTFormat=function(e){return e===xe.RGB_DXT1||e===xe.RGBA_DXT1||e===xe.RGBA_DXT3||e===xe.RGBA_DXT5};xe.isPVRTCFormat=function(e){return e===xe.RGB_PVRTC_4BPPV1||e===xe.RGB_PVRTC_2BPPV1||e===xe.RGBA_PVRTC_4BPPV1||e===xe.RGBA_PVRTC_2BPPV1};xe.isASTCFormat=function(e){return e===xe.RGBA_ASTC};xe.isETC1Format=function(e){return e===xe.RGB_ETC1};xe.isETC2Format=function(e){return e===xe.RGB8_ETC2||e===xe.RGBA8_ETC2_EAC};xe.isBC7Format=function(e){return e===xe.RGBA_BC7};xe.compressedTextureSizeInBytes=function(e,t,n){switch(e){case xe.RGB_DXT1:case xe.RGBA_DXT1:case xe.RGB_ETC1:case xe.RGB8_ETC2:return Math.floor((t+3)/4)*Math.floor((n+3)/4)*8;case xe.RGBA_DXT3:case xe.RGBA_DXT5:case xe.RGBA_ASTC:case xe.RGBA8_ETC2_EAC:return Math.floor((t+3)/4)*Math.floor((n+3)/4)*16;case xe.RGB_PVRTC_4BPPV1:case xe.RGBA_PVRTC_4BPPV1:return Math.floor((Math.max(t,8)*Math.max(n,8)*4+7)/8);case xe.RGB_PVRTC_2BPPV1:case xe.RGBA_PVRTC_2BPPV1:return Math.floor((Math.max(t,16)*Math.max(n,8)*2+7)/8);case xe.RGBA_BC7:return Math.ceil(t/4)*Math.ceil(n/4)*16;default:return 0}};xe.textureSizeInBytes=function(e,t,n,i){let o=xe.componentsLength(e);return mt.isPacked(t)&&(o=1),o*mt.sizeInBytes(t)*n*i};xe.texture3DSizeInBytes=function(e,t,n,i,o){let r=xe.componentsLength(e);return mt.isPacked(t)&&(r=1),r*mt.sizeInBytes(t)*n*i*o};xe.alignmentInBytes=function(e,t,n){let i=xe.textureSizeInBytes(e,t,n,1)%4;return i===0?4:i===2?2:1};xe.createTypedArray=function(e,t,n,i){let o=mt.getTypedArrayConstructor(t),r=xe.componentsLength(e)*n*i;return new o(r)};xe.flipY=function(e,t,n,i,o){if(o===1)return e;let r=xe.createTypedArray(t,n,i,o),a=xe.componentsLength(t),s=i*a;for(let A=0;A<o;++A){let l=A*i*a,d=(o-A-1)*i*a;for(let m=0;m<s;++m)r[d+m]=e[l+m]}return r};xe.toInternalFormat=function(e,t,n){if(!n.webgl2)return e;if(e===xe.DEPTH_STENCIL)return W.DEPTH24_STENCIL8;if(e===xe.DEPTH_COMPONENT){if(t===mt.UNSIGNED_SHORT)return W.DEPTH_COMPONENT16;if(t===mt.UNSIGNED_INT)return W.DEPTH_COMPONENT24}if(t===mt.FLOAT)switch(e){case xe.RGBA:return W.RGBA32F;case xe.RGB:return W.RGB32F;case xe.RG:return W.RG32F;case xe.RED:return W.R32F}if(t===mt.HALF_FLOAT)switch(e){case xe.RGBA:return W.RGBA16F;case xe.RGB:return W.RGB16F;case xe.RG:return W.RG16F;case xe.RED:return W.R16F}if(t===mt.UNSIGNED_BYTE)switch(e){case xe.RGBA:return W.RGBA8;case xe.RGB:return W.RGB8;case xe.RG:return W.RG8;case xe.RED:return W.R8}if(t===mt.INT)switch(e){case xe.RGBA_INTEGER:return W.RGBA32I;case xe.RGB_INTEGER:return W.RGB32I;case xe.RG_INTEGER:return W.RG32I;case xe.RED_INTEGER:return W.R32I}if(t===mt.UNSIGNED_INT)switch(e){case xe.RGBA_INTEGER:return W.RGBA32UI;case xe.RGB_INTEGER:return W.RGB32UI;case xe.RG_INTEGER:return W.RG32UI;case xe.RED_INTEGER:return W.R32UI}return e};var _t=Object.freeze(xe);var Zi={_maximumCombinedTextureImageUnits:0,_maximumCubeMapSize:0,_maximumFragmentUniformVectors:0,_maximumTextureImageUnits:0,_maximumRenderbufferSize:0,_maximumTextureSize:0,_maximumVaryingVectors:0,_maximumVertexAttributes:0,_maximumVertexTextureImageUnits:0,_maximumVertexUniformVectors:0,_minimumAliasedLineWidth:0,_maximumAliasedLineWidth:0,_minimumAliasedPointSize:0,_maximumAliasedPointSize:0,_maximumViewportWidth:0,_maximumViewportHeight:0,_maximumTextureFilterAnisotropy:0,_maximumDrawBuffers:0,_maximumColorAttachments:0,_maximumSamples:0,_highpFloatSupported:!1,_highpIntSupported:!1};Object.defineProperties(Zi,{maximumCombinedTextureImageUnits:{get:function(){return Zi._maximumCombinedTextureImageUnits}},maximumCubeMapSize:{get:function(){return Zi._maximumCubeMapSize}},maximumFragmentUniformVectors:{get:function(){return Zi._maximumFragmentUniformVectors}},maximumTextureImageUnits:{get:function(){return Zi._maximumTextureImageUnits}},maximumRenderbufferSize:{get:function(){return Zi._maximumRenderbufferSize}},maximumTextureSize:{get:function(){return Zi._maximumTextureSize}},maximumVaryingVectors:{get:function(){return Zi._maximumVaryingVectors}},maximumVertexAttributes:{get:function(){return Zi._maximumVertexAttributes}},maximumVertexTextureImageUnits:{get:function(){return Zi._maximumVertexTextureImageUnits}},maximumVertexUniformVectors:{get:function(){return Zi._maximumVertexUniformVectors}},minimumAliasedLineWidth:{get:function(){return Zi._minimumAliasedLineWidth}},maximumAliasedLineWidth:{get:function(){return Zi._maximumAliasedLineWidth}},minimumAliasedPointSize:{get:function(){return Zi._minimumAliasedPointSize}},maximumAliasedPointSize:{get:function(){return Zi._maximumAliasedPointSize}},maximumViewportWidth:{get:function(){return Zi._maximumViewportWidth}},maximumViewportHeight:{get:function(){return Zi._maximumViewportHeight}},maximumTextureFilterAnisotropy:{get:function(){return Zi._maximumTextureFilterAnisotropy}},maximumDrawBuffers:{get:function(){return Zi._maximumDrawBuffers}},maximumColorAttachments:{get:function(){return Zi._maximumColorAttachments}},maximumSamples:{get:function(){return Zi._maximumSamples}},highpFloatSupported:{get:function(){return Zi._highpFloatSupported}},highpIntSupported:{get:function(){return Zi._highpIntSupported}}});var rn=Zi;function S0(e,t,n){let i=e._gl;i.framebufferTexture2D(i.FRAMEBUFFER,t,n._target,n._texture,0)}function zE(e,t,n){let i=e._gl;i.framebufferRenderbuffer(i.FRAMEBUFFER,t,i.RENDERBUFFER,n._getRenderbuffer())}function Qc(e){e=e??G.EMPTY_OBJECT;let n=e.context._gl,i=rn.maximumColorAttachments;if(this._gl=n,this._framebuffer=n.createFramebuffer(),this._colorTextures=[],this._colorRenderbuffers=[],this._activeColorAttachments=[],this._depthTexture=void 0,this._depthRenderbuffer=void 0,this._stencilRenderbuffer=void 0,this._depthStencilTexture=void 0,this._depthStencilRenderbuffer=void 0,this.destroyAttachments=e.destroyAttachments??!0,this._bind(),c(e.colorTextures)){let o=e.colorTextures,r=this._colorTextures.length=this._activeColorAttachments.length=o.length;for(let a=0;a<r;++a){let s=o[a],A=this._gl.COLOR_ATTACHMENT0+a;S0(this,A,s),this._activeColorAttachments[a]=A,this._colorTextures[a]=s}}if(c(e.colorRenderbuffers)){let o=e.colorRenderbuffers,r=this._colorRenderbuffers.length=this._activeColorAttachments.length=o.length;for(let a=0;a<r;++a){let s=o[a],A=this._gl.COLOR_ATTACHMENT0+a;zE(this,A,s),this._activeColorAttachments[a]=A,this._colorRenderbuffers[a]=s}}if(c(e.depthTexture)){let o=e.depthTexture;S0(this,this._gl.DEPTH_ATTACHMENT,o),this._depthTexture=o}if(c(e.depthRenderbuffer)){let o=e.depthRenderbuffer;zE(this,this._gl.DEPTH_ATTACHMENT,o),this._depthRenderbuffer=o}if(c(e.stencilRenderbuffer)){let o=e.stencilRenderbuffer;zE(this,this._gl.STENCIL_ATTACHMENT,o),this._stencilRenderbuffer=o}if(c(e.depthStencilTexture)){let o=e.depthStencilTexture;S0(this,this._gl.DEPTH_STENCIL_ATTACHMENT,o),this._depthStencilTexture=o}if(c(e.depthStencilRenderbuffer)){let o=e.depthStencilRenderbuffer;zE(this,this._gl.DEPTH_STENCIL_ATTACHMENT,o),this._depthStencilRenderbuffer=o}this._unBind()}Object.defineProperties(Qc.prototype,{status:{get:function(){this._bind();let e=this._gl.checkFramebufferStatus(this._gl.FRAMEBUFFER);return this._unBind(),e}},numberOfColorAttachments:{get:function(){return this._activeColorAttachments.length}},depthTexture:{get:function(){return this._depthTexture}},depthRenderbuffer:{get:function(){return this._depthRenderbuffer}},stencilRenderbuffer:{get:function(){return this._stencilRenderbuffer}},depthStencilTexture:{get:function(){return this._depthStencilTexture}},depthStencilRenderbuffer:{get:function(){return this._depthStencilRenderbuffer}},hasDepthAttachment:{get:function(){return!!(this.depthTexture||this.depthRenderbuffer||this.depthStencilTexture||this.depthStencilRenderbuffer)}}});Qc.prototype._bind=function(){let e=this._gl;e.bindFramebuffer(e.FRAMEBUFFER,this._framebuffer)};Qc.prototype._unBind=function(){let e=this._gl;e.bindFramebuffer(e.FRAMEBUFFER,null)};Qc.prototype.bindDraw=function(){let e=this._gl;e.bindFramebuffer(e.DRAW_FRAMEBUFFER,this._framebuffer)};Qc.prototype.bindRead=function(){let e=this._gl;e.bindFramebuffer(e.READ_FRAMEBUFFER,this._framebuffer)};Qc.prototype._getActiveColorAttachments=function(){return this._activeColorAttachments};Qc.prototype.getColorTexture=function(e){return this._colorTextures[e]};Qc.prototype.getColorRenderbuffer=function(e){return this._colorRenderbuffers[e]};Qc.prototype.isDestroyed=function(){return!1};Qc.prototype.destroy=function(){if(this.destroyAttachments){let e=this._colorTextures;for(let n=0;n<e.length;++n){let i=e[n];c(i)&&i.destroy()}let t=this._colorRenderbuffers;for(let n=0;n<t.length;++n){let i=t[n];c(i)&&i.destroy()}this._depthTexture=this._depthTexture&&this._depthTexture.destroy(),this._depthRenderbuffer=this._depthRenderbuffer&&this._depthRenderbuffer.destroy(),this._stencilRenderbuffer=this._stencilRenderbuffer&&this._stencilRenderbuffer.destroy(),this._depthStencilTexture=this._depthStencilTexture&&this._depthStencilTexture.destroy(),this._depthStencilRenderbuffer=this._depthStencilRenderbuffer&&this._depthStencilRenderbuffer.destroy()}return this._gl.deleteFramebuffer(this._framebuffer),me(this)};var Hs=Qc;var GE={CLOCKWISE:W.CW,COUNTER_CLOCKWISE:W.CCW};GE.validate=function(e){return e===GE.CLOCKWISE||e===GE.COUNTER_CLOCKWISE};var Rc=Object.freeze(GE);function hA(e){let t=e??G.EMPTY_OBJECT,n=t.cull??G.EMPTY_OBJECT,i=t.polygonOffset??G.EMPTY_OBJECT,o=t.scissorTest??G.EMPTY_OBJECT,r=o.rectangle??G.EMPTY_OBJECT,a=t.depthRange??G.EMPTY_OBJECT,s=t.depthTest??G.EMPTY_OBJECT,A=t.colorMask??G.EMPTY_OBJECT,l=t.blending??G.EMPTY_OBJECT,d=l.color??G.EMPTY_OBJECT,m=t.stencilTest??G.EMPTY_OBJECT,p=m.frontOperation??G.EMPTY_OBJECT,g=m.backOperation??G.EMPTY_OBJECT,h=t.sampleCoverage??G.EMPTY_OBJECT,C=t.viewport;this.frontFace=t.frontFace??Rc.COUNTER_CLOCKWISE,this.cull={enabled:n.enabled??!1,face:n.face??W.BACK},this.lineWidth=t.lineWidth??1,this.polygonOffset={enabled:i.enabled??!1,factor:i.factor??0,units:i.units??0},this.scissorTest={enabled:o.enabled??!1,rectangle:oi.clone(r)},this.depthRange={near:a.near??0,far:a.far??1},this.depthTest={enabled:s.enabled??!1,func:s.func??W.LESS},this.colorMask={red:A.red??!0,green:A.green??!0,blue:A.blue??!0,alpha:A.alpha??!0},this.depthMask=t.depthMask??!0,this.stencilMask=t.stencilMask??-1,this.blending={enabled:l.enabled??!1,color:new J(d.red??0,d.green??0,d.blue??0,d.alpha??0),equationRgb:l.equationRgb??W.FUNC_ADD,equationAlpha:l.equationAlpha??W.FUNC_ADD,functionSourceRgb:l.functionSourceRgb??W.ONE,functionSourceAlpha:l.functionSourceAlpha??W.ONE,functionDestinationRgb:l.functionDestinationRgb??W.ZERO,functionDestinationAlpha:l.functionDestinationAlpha??W.ZERO},this.stencilTest={enabled:m.enabled??!1,frontFunction:m.frontFunction??W.ALWAYS,backFunction:m.backFunction??W.ALWAYS,reference:m.reference??0,mask:m.mask??-1,frontOperation:{fail:p.fail??W.KEEP,zFail:p.zFail??W.KEEP,zPass:p.zPass??W.KEEP},backOperation:{fail:g.fail??W.KEEP,zFail:g.zFail??W.KEEP,zPass:g.zPass??W.KEEP}},this.sampleCoverage={enabled:h.enabled??!1,value:h.value??1,invert:h.invert??!1},this.viewport=c(C)?new oi(C.x,C.y,C.width,C.height):void 0,this.id=0,this._applyFunctions=[]}var $q=0,dA={};hA.fromCache=function(e){let t=JSON.stringify(e),n=dA[t];if(c(n))return++n.referenceCount,n.state;let i=new hA(e),o=JSON.stringify(i);return n=dA[o],c(n)||(i.id=$q++,n={referenceCount:0,state:i},dA[o]=n),++n.referenceCount,dA[t]={referenceCount:1,state:n.state},n.state};hA.removeFromCache=function(e){let t=new hA(e),n=JSON.stringify(t),i=dA[n],o=JSON.stringify(e),r=dA[o];c(r)&&(--r.referenceCount,r.referenceCount===0&&(delete dA[o],c(i)&&--i.referenceCount)),c(i)&&i.referenceCount===0&&delete dA[n]};hA.getCache=function(){return dA};hA.clearCache=function(){dA={}};function Uf(e,t,n){n?e.enable(t):e.disable(t)}function GQ(e,t){e.frontFace(t.frontFace)}function HQ(e,t){let n=t.cull,i=n.enabled;Uf(e,e.CULL_FACE,i),i&&e.cullFace(n.face)}function VQ(e,t){e.lineWidth(t.lineWidth)}function jQ(e,t){let n=t.polygonOffset,i=n.enabled;Uf(e,e.POLYGON_OFFSET_FILL,i),i&&e.polygonOffset(n.factor,n.units)}function YQ(e,t,n){let i=t.scissorTest,o=c(n.scissorTest)?n.scissorTest.enabled:i.enabled;if(Uf(e,e.SCISSOR_TEST,o),o){let r=c(n.scissorTest)?n.scissorTest.rectangle:i.rectangle;e.scissor(r.x,r.y,r.width,r.height)}}function WQ(e,t){let n=t.depthRange;e.depthRange(n.near,n.far)}function qQ(e,t){let n=t.depthTest,i=n.enabled;Uf(e,e.DEPTH_TEST,i),i&&e.depthFunc(n.func)}function JQ(e,t){let n=t.colorMask;e.colorMask(n.red,n.green,n.blue,n.alpha)}function KQ(e,t){e.depthMask(t.depthMask)}function XQ(e,t){e.stencilMask(t.stencilMask)}function e5(e,t){e.blendColor(t.red,t.green,t.blue,t.alpha)}function ZQ(e,t,n){let i=t.blending,o=c(n.blendingEnabled)?n.blendingEnabled:i.enabled;Uf(e,e.BLEND,o),o&&(e5(e,i.color),e.blendEquationSeparate(i.equationRgb,i.equationAlpha),e.blendFuncSeparate(i.functionSourceRgb,i.functionDestinationRgb,i.functionSourceAlpha,i.functionDestinationAlpha))}function $Q(e,t){let n=t.stencilTest,i=n.enabled;if(Uf(e,e.STENCIL_TEST,i),i){let o=n.frontFunction,r=n.backFunction,a=n.reference,s=n.mask;e.stencilFunc(o,a,s),e.stencilFuncSeparate(e.BACK,r,a,s),e.stencilFuncSeparate(e.FRONT,o,a,s);let A=n.frontOperation,l=A.fail,d=A.zFail,m=A.zPass;e.stencilOpSeparate(e.FRONT,l,d,m);let p=n.backOperation,g=p.fail,h=p.zFail,C=p.zPass;e.stencilOpSeparate(e.BACK,g,h,C)}}function eR(e,t){let n=t.sampleCoverage,i=n.enabled;Uf(e,e.SAMPLE_COVERAGE,i),i&&e.sampleCoverage(n.value,n.invert)}var t5=new oi;function tR(e,t,n){let i=t.viewport??n.viewport;c(i)||(i=t5,i.width=n.context.drawingBufferWidth,i.height=n.context.drawingBufferHeight),n.context.uniformState.viewport=i,e.viewport(i.x,i.y,i.width,i.height)}hA.apply=function(e,t,n){GQ(e,t),HQ(e,t),VQ(e,t),jQ(e,t),WQ(e,t),qQ(e,t),JQ(e,t),KQ(e,t),XQ(e,t),$Q(e,t),eR(e,t),YQ(e,t,n),ZQ(e,t,n),tR(e,t,n)};function n5(e,t){let n=[];return e.frontFace!==t.frontFace&&n.push(GQ),(e.cull.enabled!==t.cull.enabled||e.cull.face!==t.cull.face)&&n.push(HQ),e.lineWidth!==t.lineWidth&&n.push(VQ),(e.polygonOffset.enabled!==t.polygonOffset.enabled||e.polygonOffset.factor!==t.polygonOffset.factor||e.polygonOffset.units!==t.polygonOffset.units)&&n.push(jQ),(e.depthRange.near!==t.depthRange.near||e.depthRange.far!==t.depthRange.far)&&n.push(WQ),(e.depthTest.enabled!==t.depthTest.enabled||e.depthTest.func!==t.depthTest.func)&&n.push(qQ),(e.colorMask.red!==t.colorMask.red||e.colorMask.green!==t.colorMask.green||e.colorMask.blue!==t.colorMask.blue||e.colorMask.alpha!==t.colorMask.alpha)&&n.push(JQ),e.depthMask!==t.depthMask&&n.push(KQ),e.stencilMask!==t.stencilMask&&n.push(XQ),(e.stencilTest.enabled!==t.stencilTest.enabled||e.stencilTest.frontFunction!==t.stencilTest.frontFunction||e.stencilTest.backFunction!==t.stencilTest.backFunction||e.stencilTest.reference!==t.stencilTest.reference||e.stencilTest.mask!==t.stencilTest.mask||e.stencilTest.frontOperation.fail!==t.stencilTest.frontOperation.fail||e.stencilTest.frontOperation.zFail!==t.stencilTest.frontOperation.zFail||e.stencilTest.backOperation.fail!==t.stencilTest.backOperation.fail||e.stencilTest.backOperation.zFail!==t.stencilTest.backOperation.zFail||e.stencilTest.backOperation.zPass!==t.stencilTest.backOperation.zPass)&&n.push($Q),(e.sampleCoverage.enabled!==t.sampleCoverage.enabled||e.sampleCoverage.value!==t.sampleCoverage.value||e.sampleCoverage.invert!==t.sampleCoverage.invert)&&n.push(eR),n}hA.partialApply=function(e,t,n,i,o,r){if(t!==n){let d=n._applyFunctions[t.id];c(d)||(d=n5(t,n),n._applyFunctions[t.id]=d);let m=d.length;for(let p=0;p<m;++p)d[p](e,n)}let a=c(i.scissorTest)?i.scissorTest:t.scissorTest,s=c(o.scissorTest)?o.scissorTest:n.scissorTest;(a!==s||r)&&YQ(e,n,o);let A=c(i.blendingEnabled)?i.blendingEnabled:t.blending.enabled,l=c(o.blendingEnabled)?o.blendingEnabled:n.blending.enabled;(A!==l||l&&t.blending!==n.blending)&&ZQ(e,n,o),(t!==n||i!==o||i.context!==o.context)&&tR(e,n,o)};hA.getState=function(e){return{frontFace:e.frontFace,cull:{enabled:e.cull.enabled,face:e.cull.face},lineWidth:e.lineWidth,polygonOffset:{enabled:e.polygonOffset.enabled,factor:e.polygonOffset.factor,units:e.polygonOffset.units},scissorTest:{enabled:e.scissorTest.enabled,rectangle:oi.clone(e.scissorTest.rectangle)},depthRange:{near:e.depthRange.near,far:e.depthRange.far},depthTest:{enabled:e.depthTest.enabled,func:e.depthTest.func},colorMask:{red:e.colorMask.red,green:e.colorMask.green,blue:e.colorMask.blue,alpha:e.colorMask.alpha},depthMask:e.depthMask,stencilMask:e.stencilMask,blending:{enabled:e.blending.enabled,color:J.clone(e.blending.color),equationRgb:e.blending.equationRgb,equationAlpha:e.blending.equationAlpha,functionSourceRgb:e.blending.functionSourceRgb,functionSourceAlpha:e.blending.functionSourceAlpha,functionDestinationRgb:e.blending.functionDestinationRgb,functionDestinationAlpha:e.blending.functionDestinationAlpha},stencilTest:{enabled:e.stencilTest.enabled,frontFunction:e.stencilTest.frontFunction,backFunction:e.stencilTest.backFunction,reference:e.stencilTest.reference,mask:e.stencilTest.mask,frontOperation:{fail:e.stencilTest.frontOperation.fail,zFail:e.stencilTest.frontOperation.zFail,zPass:e.stencilTest.frontOperation.zPass},backOperation:{fail:e.stencilTest.backOperation.fail,zFail:e.stencilTest.backOperation.zFail,zPass:e.stencilTest.backOperation.zPass}},sampleCoverage:{enabled:e.sampleCoverage.enabled,value:e.sampleCoverage.value,invert:e.sampleCoverage.invert},viewport:c(e.viewport)?oi.clone(e.viewport):void 0}};var At=hA;function pt(e,t,n,i){this[0]=e??0,this[1]=n??0,this[2]=t??0,this[3]=i??0}pt.packedLength=4;pt.pack=function(e,t,n){return n=n??0,t[n++]=e[0],t[n++]=e[1],t[n++]=e[2],t[n++]=e[3],t};pt.unpack=function(e,t,n){return t=t??0,c(n)||(n=new pt),n[0]=e[t++],n[1]=e[t++],n[2]=e[t++],n[3]=e[t++],n};pt.packArray=function(e,t){let n=e.length,i=n*4;c(t)?!Array.isArray(t)&&t.length!==i||t.length!==i&&(t.length=i):t=new Array(i);for(let o=0;o<n;++o)pt.pack(e[o],t,o*4);return t};pt.unpackArray=function(e,t){let n=e.length;c(t)?t.length=n/4:t=new Array(n/4);for(let i=0;i<n;i+=4){let o=i/4;t[o]=pt.unpack(e,i,t[o])}return t};pt.clone=function(e,t){if(c(e))return c(t)?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t):new pt(e[0],e[2],e[1],e[3])};pt.fromArray=pt.unpack;pt.fromColumnMajorArray=function(e,t){return pt.clone(e,t)};pt.fromRowMajorArray=function(e,t){return c(t)?(t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3],t):new pt(e[0],e[1],e[2],e[3])};pt.fromScale=function(e,t){return c(t)?(t[0]=e.x,t[1]=0,t[2]=0,t[3]=e.y,t):new pt(e.x,0,0,e.y)};pt.fromUniformScale=function(e,t){return c(t)?(t[0]=e,t[1]=0,t[2]=0,t[3]=e,t):new pt(e,0,0,e)};pt.fromRotation=function(e,t){let n=Math.cos(e),i=Math.sin(e);return c(t)?(t[0]=n,t[1]=i,t[2]=-i,t[3]=n,t):new pt(n,-i,i,n)};pt.toArray=function(e,t){return c(t)?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t):[e[0],e[1],e[2],e[3]]};pt.getElementIndex=function(e,t){return e*2+t};pt.getColumn=function(e,t,n){let i=t*2,o=e[i],r=e[i+1];return n.x=o,n.y=r,n};pt.setColumn=function(e,t,n,i){i=pt.clone(e,i);let o=t*2;return i[o]=n.x,i[o+1]=n.y,i};pt.getRow=function(e,t,n){let i=e[t],o=e[t+2];return n.x=i,n.y=o,n};pt.setRow=function(e,t,n,i){return i=pt.clone(e,i),i[t]=n.x,i[t+2]=n.y,i};var i5=new L;pt.setScale=function(e,t,n){let i=pt.getScale(e,i5),o=t.x/i.x,r=t.y/i.y;return n[0]=e[0]*o,n[1]=e[1]*o,n[2]=e[2]*r,n[3]=e[3]*r,n};var o5=new L;pt.setUniformScale=function(e,t,n){let i=pt.getScale(e,o5),o=t/i.x,r=t/i.y;return n[0]=e[0]*o,n[1]=e[1]*o,n[2]=e[2]*r,n[3]=e[3]*r,n};var nR=new L;pt.getScale=function(e,t){return t.x=L.magnitude(L.fromElements(e[0],e[1],nR)),t.y=L.magnitude(L.fromElements(e[2],e[3],nR)),t};var iR=new L;pt.getMaximumScale=function(e){return pt.getScale(e,iR),L.maximumComponent(iR)};var r5=new L;pt.setRotation=function(e,t,n){let i=pt.getScale(e,r5);return n[0]=t[0]*i.x,n[1]=t[1]*i.x,n[2]=t[2]*i.y,n[3]=t[3]*i.y,n};var a5=new L;pt.getRotation=function(e,t){let n=pt.getScale(e,a5);return t[0]=e[0]/n.x,t[1]=e[1]/n.x,t[2]=e[2]/n.y,t[3]=e[3]/n.y,t};pt.multiply=function(e,t,n){let i=e[0]*t[0]+e[2]*t[1],o=e[0]*t[2]+e[2]*t[3],r=e[1]*t[0]+e[3]*t[1],a=e[1]*t[2]+e[3]*t[3];return n[0]=i,n[1]=r,n[2]=o,n[3]=a,n};pt.add=function(e,t,n){return n[0]=e[0]+t[0],n[1]=e[1]+t[1],n[2]=e[2]+t[2],n[3]=e[3]+t[3],n};pt.subtract=function(e,t,n){return n[0]=e[0]-t[0],n[1]=e[1]-t[1],n[2]=e[2]-t[2],n[3]=e[3]-t[3],n};pt.multiplyByVector=function(e,t,n){let i=e[0]*t.x+e[2]*t.y,o=e[1]*t.x+e[3]*t.y;return n.x=i,n.y=o,n};pt.multiplyByScalar=function(e,t,n){return n[0]=e[0]*t,n[1]=e[1]*t,n[2]=e[2]*t,n[3]=e[3]*t,n};pt.multiplyByScale=function(e,t,n){return n[0]=e[0]*t.x,n[1]=e[1]*t.x,n[2]=e[2]*t.y,n[3]=e[3]*t.y,n};pt.multiplyByUniformScale=function(e,t,n){return n[0]=e[0]*t,n[1]=e[1]*t,n[2]=e[2]*t,n[3]=e[3]*t,n};pt.negate=function(e,t){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t};pt.transpose=function(e,t){let n=e[0],i=e[2],o=e[1],r=e[3];return t[0]=n,t[1]=i,t[2]=o,t[3]=r,t};pt.abs=function(e,t){return t[0]=Math.abs(e[0]),t[1]=Math.abs(e[1]),t[2]=Math.abs(e[2]),t[3]=Math.abs(e[3]),t};pt.equals=function(e,t){return e===t||c(e)&&c(t)&&e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]};pt.equalsArray=function(e,t,n){return e[0]===t[n]&&e[1]===t[n+1]&&e[2]===t[n+2]&&e[3]===t[n+3]};pt.equalsEpsilon=function(e,t,n){return n=n??0,e===t||c(e)&&c(t)&&Math.abs(e[0]-t[0])<=n&&Math.abs(e[1]-t[1])<=n&&Math.abs(e[2]-t[2])<=n&&Math.abs(e[3]-t[3])<=n};pt.IDENTITY=Object.freeze(new pt(1,0,0,1));pt.ZERO=Object.freeze(new pt(0,0,0,0));pt.COLUMN0ROW0=0;pt.COLUMN0ROW1=1;pt.COLUMN1ROW0=2;pt.COLUMN1ROW1=3;Object.defineProperties(pt.prototype,{length:{get:function(){return pt.packedLength}}});pt.prototype.clone=function(e){return pt.clone(this,e)};pt.prototype.equals=function(e){return pt.equals(this,e)};pt.prototype.equalsEpsilon=function(e,t){return pt.equalsEpsilon(this,e,t)};pt.prototype.toString=function(){return`(${this[0]}, ${this[2]})
(${this[1]}, ${this[3]})`};var vi=pt;function s5(e,t,n,i){switch(t.type){case e.FLOAT:return new oR(e,t,n,i);case e.FLOAT_VEC2:return new rR(e,t,n,i);case e.FLOAT_VEC3:return new aR(e,t,n,i);case e.FLOAT_VEC4:return new sR(e,t,n,i);case e.SAMPLER_2D:case e.SAMPLER_3D:case e.SAMPLER_CUBE:return new HE(e,t,n,i);case e.UNSIGNED_INT_SAMPLER_2D:return new HE(e,t,n,i);case e.INT:case e.BOOL:return new cR(e,t,n,i);case e.INT_VEC2:case e.BOOL_VEC2:return new AR(e,t,n,i);case e.INT_VEC3:case e.BOOL_VEC3:return new lR(e,t,n,i);case e.INT_VEC4:case e.BOOL_VEC4:return new uR(e,t,n,i);case e.FLOAT_MAT2:return new fR(e,t,n,i);case e.FLOAT_MAT3:return new dR(e,t,n,i);case e.FLOAT_MAT4:return new hR(e,t,n,i);default:throw new ae(`Unrecognized uniform type: ${t.type} for uniform "${n}".`)}}function oR(e,t,n,i){this.name=n,this.value=void 0,this._value=0,this._gl=e,this._location=i}oR.prototype.set=function(){this.value!==this._value&&(this._value=this.value,this._gl.uniform1f(this._location,this.value))};function rR(e,t,n,i){this.name=n,this.value=void 0,this._value=new L,this._gl=e,this._location=i}rR.prototype.set=function(){let e=this.value;L.equals(e,this._value)||(L.clone(e,this._value),this._gl.uniform2f(this._location,e.x,e.y))};function aR(e,t,n,i){this.name=n,this.value=void 0,this._value=void 0,this._gl=e,this._location=i}aR.prototype.set=function(){let e=this.value;c(e.red)?J.equals(e,this._value)||(this._value=J.clone(e,this._value),this._gl.uniform3f(this._location,e.red,e.green,e.blue)):c(e.x)&&(f.equals(e,this._value)||(this._value=f.clone(e,this._value),this._gl.uniform3f(this._location,e.x,e.y,e.z)))};function sR(e,t,n,i){this.name=n,this.value=void 0,this._value=void 0,this._gl=e,this._location=i}sR.prototype.set=function(){let e=this.value;c(e.red)?J.equals(e,this._value)||(this._value=J.clone(e,this._value),this._gl.uniform4f(this._location,e.red,e.green,e.blue,e.alpha)):c(e.x)&&(re.equals(e,this._value)||(this._value=re.clone(e,this._value),this._gl.uniform4f(this._location,e.x,e.y,e.z,e.w)))};function HE(e,t,n,i){this.name=n,this.value=void 0,this._gl=e,this._location=i,this.textureUnitIndex=void 0}HE.prototype.set=function(){let e=this._gl;e.activeTexture(e.TEXTURE0+this.textureUnitIndex);let t=this.value;e.bindTexture(t._target,t._texture)};HE.prototype._setSampler=function(e){return this.textureUnitIndex=e,this._gl.uniform1i(this._location,e),e+1};function cR(e,t,n,i){this.name=n,this.value=void 0,this._value=0,this._gl=e,this._location=i}cR.prototype.set=function(){this.value!==this._value&&(this._value=this.value,this._gl.uniform1i(this._location,this.value))};function AR(e,t,n,i){this.name=n,this.value=void 0,this._value=new L,this._gl=e,this._location=i}AR.prototype.set=function(){let e=this.value;L.equals(e,this._value)||(L.clone(e,this._value),this._gl.uniform2i(this._location,e.x,e.y))};function lR(e,t,n,i){this.name=n,this.value=void 0,this._value=new f,this._gl=e,this._location=i}lR.prototype.set=function(){let e=this.value;f.equals(e,this._value)||(f.clone(e,this._value),this._gl.uniform3i(this._location,e.x,e.y,e.z))};function uR(e,t,n,i){this.name=n,this.value=void 0,this._value=new re,this._gl=e,this._location=i}uR.prototype.set=function(){let e=this.value;re.equals(e,this._value)||(re.clone(e,this._value),this._gl.uniform4i(this._location,e.x,e.y,e.z,e.w))};var c5=new Float32Array(4);function fR(e,t,n,i){this.name=n,this.value=void 0,this._value=new vi,this._gl=e,this._location=i}fR.prototype.set=function(){if(!vi.equalsArray(this.value,this._value,0)){vi.clone(this.value,this._value);let e=vi.toArray(this.value,c5);this._gl.uniformMatrix2fv(this._location,!1,e)}};var A5=new Float32Array(9);function dR(e,t,n,i){this.name=n,this.value=void 0,this._value=new ne,this._gl=e,this._location=i}dR.prototype.set=function(){if(!ne.equalsArray(this.value,this._value,0)){ne.clone(this.value,this._value);let e=ne.toArray(this.value,A5);this._gl.uniformMatrix3fv(this._location,!1,e)}};var l5=new Float32Array(16);function hR(e,t,n,i){this.name=n,this.value=void 0,this._value=new Q,this._gl=e,this._location=i}hR.prototype.set=function(){if(!Q.equalsArray(this.value,this._value,0)){Q.clone(this.value,this._value);let e=Q.toArray(this.value,l5);this._gl.uniformMatrix4fv(this._location,!1,e)}};var mR=s5;function u5(e,t,n,i){switch(t.type){case e.FLOAT:return new pR(e,t,n,i);case e.FLOAT_VEC2:return new gR(e,t,n,i);case e.FLOAT_VEC3:return new CR(e,t,n,i);case e.FLOAT_VEC4:return new ER(e,t,n,i);case e.SAMPLER_2D:case e.SAMPLER_3D:case e.SAMPLER_CUBE:return new w0(e,t,n,i);case e.INT:case e.BOOL:return new _R(e,t,n,i);case e.INT_VEC2:case e.BOOL_VEC2:return new IR(e,t,n,i);case e.INT_VEC3:case e.BOOL_VEC3:return new yR(e,t,n,i);case e.INT_VEC4:case e.BOOL_VEC4:return new bR(e,t,n,i);case e.FLOAT_MAT2:return new BR(e,t,n,i);case e.FLOAT_MAT3:return new xR(e,t,n,i);case e.FLOAT_MAT4:return new TR(e,t,n,i);default:throw new ae(`Unrecognized uniform type: ${t.type} for uniform "${n}".`)}}function pR(e,t,n,i){let o=i.length;this.name=n,this.value=new Array(o),this._value=new Float32Array(o),this._gl=e,this._location=i[0]}pR.prototype.set=function(){let e=this.value,t=e.length,n=this._value,i=!1;for(let o=0;o<t;++o){let r=e[o];r!==n[o]&&(n[o]=r,i=!0)}i&&this._gl.uniform1fv(this._location,n)};function gR(e,t,n,i){let o=i.length;this.name=n,this.value=new Array(o),this._value=new Float32Array(o*2),this._gl=e,this._location=i[0]}gR.prototype.set=function(){let e=this.value,t=e.length,n=this._value,i=!1,o=0;for(let r=0;r<t;++r){let a=e[r];L.equalsArray(a,n,o)||(L.pack(a,n,o),i=!0),o+=2}i&&this._gl.uniform2fv(this._location,n)};function CR(e,t,n,i){let o=i.length;this.name=n,this.value=new Array(o),this._value=new Float32Array(o*3),this._gl=e,this._location=i[0]}CR.prototype.set=function(){let e=this.value,t=e.length,n=this._value,i=!1,o=0;for(let r=0;r<t;++r){let a=e[r];c(a.red)?(a.red!==n[o]||a.green!==n[o+1]||a.blue!==n[o+2])&&(n[o]=a.red,n[o+1]=a.green,n[o+2]=a.blue,i=!0):c(a.x)&&(f.equalsArray(a,n,o)||(f.pack(a,n,o),i=!0)),o+=3}i&&this._gl.uniform3fv(this._location,n)};function ER(e,t,n,i){let o=i.length;this.name=n,this.value=new Array(o),this._value=new Float32Array(o*4),this._gl=e,this._location=i[0]}ER.prototype.set=function(){let e=this.value,t=e.length,n=this._value,i=!1,o=0;for(let r=0;r<t;++r){let a=e[r];c(a.red)?J.equalsArray(a,n,o)||(J.pack(a,n,o),i=!0):c(a.x)&&(re.equalsArray(a,n,o)||(re.pack(a,n,o),i=!0)),o+=4}i&&this._gl.uniform4fv(this._location,n)};function w0(e,t,n,i){let o=i.length;this.name=n,this.value=new Array(o),this._value=new Float32Array(o),this._gl=e,this._locations=i,this.textureUnitIndex=void 0}w0.prototype.set=function(){let e=this._gl,t=e.TEXTURE0+this.textureUnitIndex,n=this.value,i=n.length;for(let o=0;o<i;++o){let r=n[o];e.activeTexture(t+o),e.bindTexture(r._target,r._texture)}};w0.prototype._setSampler=function(e){this.textureUnitIndex=e;let t=this._locations,n=t.length;for(let i=0;i<n;++i){let o=e+i;this._gl.uniform1i(t[i],o)}return e+n};function _R(e,t,n,i){let o=i.length;this.name=n,this.value=new Array(o),this._value=new Int32Array(o),this._gl=e,this._location=i[0]}_R.prototype.set=function(){let e=this.value,t=e.length,n=this._value,i=!1;for(let o=0;o<t;++o){let r=e[o];r!==n[o]&&(n[o]=r,i=!0)}i&&this._gl.uniform1iv(this._location,n)};function IR(e,t,n,i){let o=i.length;this.name=n,this.value=new Array(o),this._value=new Int32Array(o*2),this._gl=e,this._location=i[0]}IR.prototype.set=function(){let e=this.value,t=e.length,n=this._value,i=!1,o=0;for(let r=0;r<t;++r){let a=e[r];L.equalsArray(a,n,o)||(L.pack(a,n,o),i=!0),o+=2}i&&this._gl.uniform2iv(this._location,n)};function yR(e,t,n,i){let o=i.length;this.name=n,this.value=new Array(o),this._value=new Int32Array(o*3),this._gl=e,this._location=i[0]}yR.prototype.set=function(){let e=this.value,t=e.length,n=this._value,i=!1,o=0;for(let r=0;r<t;++r){let a=e[r];f.equalsArray(a,n,o)||(f.pack(a,n,o),i=!0),o+=3}i&&this._gl.uniform3iv(this._location,n)};function bR(e,t,n,i){let o=i.length;this.name=n,this.value=new Array(o),this._value=new Int32Array(o*4),this._gl=e,this._location=i[0]}bR.prototype.set=function(){let e=this.value,t=e.length,n=this._value,i=!1,o=0;for(let r=0;r<t;++r){let a=e[r];re.equalsArray(a,n,o)||(re.pack(a,n,o),i=!0),o+=4}i&&this._gl.uniform4iv(this._location,n)};function BR(e,t,n,i){let o=i.length;this.name=n,this.value=new Array(o),this._value=new Float32Array(o*4),this._gl=e,this._location=i[0]}BR.prototype.set=function(){let e=this.value,t=e.length,n=this._value,i=!1,o=0;for(let r=0;r<t;++r){let a=e[r];vi.equalsArray(a,n,o)||(vi.pack(a,n,o),i=!0),o+=4}i&&this._gl.uniformMatrix2fv(this._location,!1,n)};function xR(e,t,n,i){let o=i.length;this.name=n,this.value=new Array(o),this._value=new Float32Array(o*9),this._gl=e,this._location=i[0]}xR.prototype.set=function(){let e=this.value,t=e.length,n=this._value,i=!1,o=0;for(let r=0;r<t;++r){let a=e[r];ne.equalsArray(a,n,o)||(ne.pack(a,n,o),i=!0),o+=9}i&&this._gl.uniformMatrix3fv(this._location,!1,n)};function TR(e,t,n,i){let o=i.length;this.name=n,this.value=new Array(o),this._value=new Float32Array(o*16),this._gl=e,this._location=i[0]}TR.prototype.set=function(){let e=this.value,t=e.length,n=this._value,i=!1,o=0;for(let r=0;r<t;++r){let a=e[r];Q.equalsArray(a,n,o)||(Q.pack(a,n,o),i=!0),o+=16}i&&this._gl.uniformMatrix4fv(this._location,!1,n)};var SR=u5;var f5=0;function sl(e){let t=e.vertexShaderText,n=e.fragmentShaderText;typeof spector<"u"&&(t=t.replace(/^#line/gm,"//#line"),n=n.replace(/^#line/gm,"//#line"));let i=d5(t,n);this._gl=e.gl,this._logShaderCompilation=e.logShaderCompilation,this._debugShaders=e.debugShaders,this._attributeLocations=e.attributeLocations,this._program=void 0,this._numberOfVertexAttributes=void 0,this._vertexAttributes=void 0,this._uniformsByName=void 0,this._uniforms=void 0,this._automaticUniforms=void 0,this._manualUniforms=void 0,this._duplicateUniformNames=i.duplicateUniformNames,this._cachedShader=void 0,this.maximumTextureUnitIndex=void 0,this._vertexShaderSource=e.vertexShaderSource,this._vertexShaderText=e.vertexShaderText,this._fragmentShaderSource=e.fragmentShaderSource,this._fragmentShaderText=i.fragmentShaderText,this.id=f5++}sl.fromCache=function(e){return e=e??G.EMPTY_OBJECT,e.context.shaderCache.getShaderProgram(e)};sl.replaceCache=function(e){return e=e??G.EMPTY_OBJECT,e.context.shaderCache.replaceShaderProgram(e)};Object.defineProperties(sl.prototype,{vertexShaderSource:{get:function(){return this._vertexShaderSource}},fragmentShaderSource:{get:function(){return this._fragmentShaderSource}},vertexAttributes:{get:function(){return VE(this),this._vertexAttributes}},numberOfVertexAttributes:{get:function(){return VE(this),this._numberOfVertexAttributes}},allUniforms:{get:function(){return VE(this),this._uniformsByName}}});function wR(e){let t=[],n=e.match(/uniform.*?(?![^{]*})(?=[=\[;])/g);if(c(n)){let i=n.length;for(let o=0;o<i;o++){let r=n[o].trim(),a=r.slice(r.lastIndexOf(" ")+1);t.push(a)}}return t}function d5(e,t){let n={};if(!rn.highpFloatSupported||!rn.highpIntSupported){let i,o,r,a,s=wR(e),A=wR(t),l=s.length,d=A.length;for(i=0;i<l;i++)for(o=0;o<d;o++)if(s[i]===A[o]){r=s[i],a=`czm_mediump_${r}`;let m=new RegExp(`${r}\\b`,"g");t=t.replace(m,a),n[a]=r}}return{fragmentShaderText:t,duplicateUniformNames:n}}var mA="[Cesium WebGL] ";function h5(e,t){let n=t._vertexShaderText,i=t._fragmentShaderText,o=e.createShader(e.VERTEX_SHADER);e.shaderSource(o,n),e.compileShader(o);let r=e.createShader(e.FRAGMENT_SHADER);e.shaderSource(r,i),e.compileShader(r);let a=e.createProgram();e.attachShader(a,o),e.attachShader(a,r);let s=t._attributeLocations;if(c(s))for(let p in s)s.hasOwnProperty(p)&&e.bindAttribLocation(a,s[p],p);e.linkProgram(a);let A;if(e.getProgramParameter(a,e.LINK_STATUS))return t._logShaderCompilation&&(A=e.getShaderInfoLog(o),c(A)&&A.length>0&&console.log(`${mA}Vertex shader compile log: ${A}`),A=e.getShaderInfoLog(r),c(A)&&A.length>0&&console.log(`${mA}Fragment shader compile log: ${A}`),A=e.getProgramInfoLog(a),c(A)&&A.length>0&&console.log(`${mA}Shader program link log: ${A}`)),e.deleteShader(o),e.deleteShader(r),a;let l,d=t._debugShaders;throw e.getShaderParameter(r,e.COMPILE_STATUS)?e.getShaderParameter(o,e.COMPILE_STATUS)?(A=e.getProgramInfoLog(a),console.error(`${mA}Shader program link log: ${A}`),m(o,"vertex"),m(r,"fragment"),l=`Program failed to link.  Link log: ${A}`):(A=e.getShaderInfoLog(o),console.error(`${mA}Vertex shader compile log: ${A}`),console.error(`${mA} Vertex shader source:
${n}`),l=`Vertex shader failed to compile.  Compile log: ${A}`):(A=e.getShaderInfoLog(r),console.error(`${mA}Fragment shader compile log: ${A}`),console.error(`${mA} Fragment shader source:
${i}`),l=`Fragment shader failed to compile.  Compile log: ${A}`),e.deleteShader(o),e.deleteShader(r),e.deleteProgram(a),new ae(l);function m(p,g){if(!c(d))return;let h=d.getTranslatedShaderSource(p);if(h===""){console.error(`${mA}${g} shader translation failed.`);return}console.error(`${mA}Translated ${g} shaderSource:
${h}`)}}function m5(e,t,n){let i={};for(let o=0;o<n;++o){let r=e.getActiveAttrib(t,o),a=e.getAttribLocation(t,r.name);i[r.name]={name:r.name,type:r.type,index:a}}return i}function p5(e,t){let n={},i=[],o=[],r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let a=0;a<r;++a){let s=e.getActiveUniform(t,a),A="[0]",l=s.name.indexOf(A,s.name.length-A.length)!==-1?s.name.slice(0,s.name.length-3):s.name;if(l.indexOf("gl_")!==0)if(s.name.indexOf("[")<0){let d=e.getUniformLocation(t,l);if(d!==null){let m=mR(e,s,l,d);n[l]=m,i.push(m),m._setSampler&&o.push(m)}}else{let d,m,p,g,h=l.indexOf("[");if(h>=0){if(d=n[l.slice(0,h)],!c(d))continue;m=d._locations,m.length<=1&&(p=d.value,g=e.getUniformLocation(t,l),g!==null&&(m.push(g),p.push(e.getUniform(t,g))))}else{m=[];for(let C=0;C<s.size;++C)g=e.getUniformLocation(t,`${l}[${C}]`),g!==null&&m.push(g);d=SR(e,s,l,m),n[l]=d,i.push(d),d._setSampler&&o.push(d)}}}return{uniformsByName:n,uniforms:i,samplerUniforms:o}}function g5(e,t){let n=[],i=[];for(let o in t)if(t.hasOwnProperty(o)){let r=t[o],a=o,s=e._duplicateUniformNames[a];c(s)&&(r.name=s,a=s);let A=rh[a];c(A)?n.push({uniform:r,automaticUniform:A}):i.push(r)}return{automaticUniforms:n,manualUniforms:i}}function C5(e,t,n){e.useProgram(t);let i=0,o=n.length;for(let r=0;r<o;++r)i=n[r]._setSampler(i);return e.useProgram(null),i}function VE(e){c(e._program)||DR(e)}function DR(e){let t=e._program,n=e._gl,i=h5(n,e,e._debugShaders),o=n.getProgramParameter(i,n.ACTIVE_ATTRIBUTES),r=p5(n,i),a=g5(e,r.uniformsByName);e._program=i,e._numberOfVertexAttributes=o,e._vertexAttributes=m5(n,i,o),e._uniformsByName=r.uniformsByName,e._uniforms=r.uniforms,e._automaticUniforms=a.automaticUniforms,e._manualUniforms=a.manualUniforms,e.maximumTextureUnitIndex=C5(n,i,r.samplerUniforms),t&&e._gl.deleteProgram(t),typeof spector<"u"&&(e._program.__SPECTOR_rebuildProgram=function(s,A,l,d){let m=e._vertexShaderText,p=e._fragmentShaderText,g=/ ! = /g;e._vertexShaderText=s.replace(g," != "),e._fragmentShaderText=A.replace(g," != ");try{DR(e),l(e._program)}catch(h){e._vertexShaderText=m,e._fragmentShaderText=p;let _=/(?:Compile|Link) error: ([^]*)/.exec(h.message);d(_?_[1]:h.message)}})}sl.prototype._bind=function(){VE(this),this._gl.useProgram(this._program)};sl.prototype._setUniforms=function(e,t,n){let i,o;if(c(e)){let s=this._manualUniforms;for(i=s.length,o=0;o<i;++o){let A=s[o];A.value=e[A.name]()}}let r=this._automaticUniforms;for(i=r.length,o=0;o<i;++o){let s=r[o];s.uniform.value=s.automaticUniform.getValue(t)}let a=this._uniforms;for(i=a.length,o=0;o<i;++o)a[o].set();if(n){let s=this._gl,A=this._program;s.validateProgram(A)}};sl.prototype.isDestroyed=function(){return!1};sl.prototype.destroy=function(){this._cachedShader.cache.releaseShaderProgram(this)};sl.prototype.finalDestroy=function(){return this._gl.deleteProgram(this._program),me(this)};var gn=sl;var vt={BYTE:W.BYTE,UNSIGNED_BYTE:W.UNSIGNED_BYTE,SHORT:W.SHORT,UNSIGNED_SHORT:W.UNSIGNED_SHORT,INT:W.INT,UNSIGNED_INT:W.UNSIGNED_INT,FLOAT:W.FLOAT,DOUBLE:W.DOUBLE};vt.getSizeInBytes=function(e){switch(e){case vt.BYTE:return Int8Array.BYTES_PER_ELEMENT;case vt.UNSIGNED_BYTE:return Uint8Array.BYTES_PER_ELEMENT;case vt.SHORT:return Int16Array.BYTES_PER_ELEMENT;case vt.UNSIGNED_SHORT:return Uint16Array.BYTES_PER_ELEMENT;case vt.INT:return Int32Array.BYTES_PER_ELEMENT;case vt.UNSIGNED_INT:return Uint32Array.BYTES_PER_ELEMENT;case vt.FLOAT:return Float32Array.BYTES_PER_ELEMENT;case vt.DOUBLE:return Float64Array.BYTES_PER_ELEMENT}};vt.fromTypedArray=function(e){if(e instanceof Int8Array)return vt.BYTE;if(e instanceof Uint8Array)return vt.UNSIGNED_BYTE;if(e instanceof Int16Array)return vt.SHORT;if(e instanceof Uint16Array)return vt.UNSIGNED_SHORT;if(e instanceof Int32Array)return vt.INT;if(e instanceof Uint32Array)return vt.UNSIGNED_INT;if(e instanceof Float32Array)return vt.FLOAT;if(e instanceof Float64Array)return vt.DOUBLE};vt.validate=function(e){return c(e)&&(e===vt.BYTE||e===vt.UNSIGNED_BYTE||e===vt.SHORT||e===vt.UNSIGNED_SHORT||e===vt.INT||e===vt.UNSIGNED_INT||e===vt.FLOAT||e===vt.DOUBLE)};vt.createTypedArray=function(e,t){switch(e){case vt.BYTE:return new Int8Array(t);case vt.UNSIGNED_BYTE:return new Uint8Array(t);case vt.SHORT:return new Int16Array(t);case vt.UNSIGNED_SHORT:return new Uint16Array(t);case vt.INT:return new Int32Array(t);case vt.UNSIGNED_INT:return new Uint32Array(t);case vt.FLOAT:return new Float32Array(t);case vt.DOUBLE:return new Float64Array(t)}};vt.createArrayBufferView=function(e,t,n,i){switch(n=n??0,i=i??(t.byteLength-n)/vt.getSizeInBytes(e),e){case vt.BYTE:return new Int8Array(t,n,i);case vt.UNSIGNED_BYTE:return new Uint8Array(t,n,i);case vt.SHORT:return new Int16Array(t,n,i);case vt.UNSIGNED_SHORT:return new Uint16Array(t,n,i);case vt.INT:return new Int32Array(t,n,i);case vt.UNSIGNED_INT:return new Uint32Array(t,n,i);case vt.FLOAT:return new Float32Array(t,n,i);case vt.DOUBLE:return new Float64Array(t,n,i)}};vt.fromName=function(e){switch(e){case"BYTE":return vt.BYTE;case"UNSIGNED_BYTE":return vt.UNSIGNED_BYTE;case"SHORT":return vt.SHORT;case"UNSIGNED_SHORT":return vt.UNSIGNED_SHORT;case"INT":return vt.INT;case"UNSIGNED_INT":return vt.UNSIGNED_INT;case"FLOAT":return vt.FLOAT;case"DOUBLE":return vt.DOUBLE}};var V=Object.freeze(vt);var E5={NONE:0,TRIANGLES:1,LINES:2,POLYLINES:3},cl=Object.freeze(E5);function D0(e){e=e??G.EMPTY_OBJECT,this.attributes=e.attributes,this.indices=e.indices,this.primitiveType=e.primitiveType??Me.TRIANGLES,this.boundingSphere=e.boundingSphere,this.geometryType=e.geometryType??cl.NONE,this.boundingSphereCV=e.boundingSphereCV,this.offsetAttribute=e.offsetAttribute}D0.computeNumberOfVertices=function(e){let t=-1;for(let n in e.attributes)if(e.attributes.hasOwnProperty(n)&&c(e.attributes[n])&&c(e.attributes[n].values)){let i=e.attributes[n];t=i.values.length/i.componentsPerAttribute}return t};var _5=new ue,I5=new f,QR=new Q,y5=[new ue,new ue,new ue],b5=[new L,new L,new L],B5=[new L,new L,new L],x5=new f,T5=new gt,S5=new Q,w5=new vi;D0._textureCoordinateRotationPoints=function(e,t,n,i){let o,r=de.center(i,_5),a=ue.toCartesian(r,n,I5),s=sn.eastNorthUpToFixedFrame(a,n,QR),A=Q.inverse(s,QR),l=b5,d=y5;d[0].longitude=i.west,d[0].latitude=i.south,d[1].longitude=i.west,d[1].latitude=i.north,d[2].longitude=i.east,d[2].latitude=i.south;let m=x5;for(o=0;o<3;o++)ue.toCartesian(d[o],n,m),m=Q.multiplyByPointAsVector(A,m,m),l[o].x=m.x,l[o].y=m.y;let p=gt.fromAxisAngle(f.UNIT_Z,-t,T5),g=ne.fromQuaternion(p,S5),h=e.length,C=Number.POSITIVE_INFINITY,_=Number.POSITIVE_INFINITY,I=Number.NEGATIVE_INFINITY,b=Number.NEGATIVE_INFINITY;for(o=0;o<h;o++)m=Q.multiplyByPointAsVector(A,e[o],m),m=ne.multiplyByVector(g,m,m),C=Math.min(C,m.x),_=Math.min(_,m.y),I=Math.max(I,m.x),b=Math.max(b,m.y);let x=vi.fromRotation(t,w5),T=B5;T[0].x=C,T[0].y=_,T[1].x=C,T[1].y=b,T[2].x=I,T[2].y=_;let w=l[0],R=l[2].x-w.x,z=l[1].y-w.y;for(o=0;o<3;o++){let E=T[o];vi.multiplyByVector(x,E,E),E.x=(E.x-w.x)/R,E.y=(E.y-w.y)/z}let M=T[0],N=T[1],O=T[2],u=new Array(6);return L.pack(M,u),L.pack(N,u,2),L.pack(O,u,4),u};var Dt=D0;function D5(e){e=e??G.EMPTY_OBJECT,this.componentDatatype=e.componentDatatype,this.componentsPerAttribute=e.componentsPerAttribute,this.normalize=e.normalize??!1,this.values=e.values}var rt=D5;function gh(e,t,n,i,o){this._format=e,this._datatype=t,this._width=n,this._height=i,this._buffer=o}Object.defineProperties(gh.prototype,{internalFormat:{get:function(){return this._format}},pixelDatatype:{get:function(){return this._datatype}},width:{get:function(){return this._width}},height:{get:function(){return this._height}},bufferView:{get:function(){return this._buffer}},arrayBufferView:{get:function(){return this._buffer}}});gh.clone=function(e){if(c(e))return new gh(e._format,e._datatype,e._width,e._height,e._buffer)};gh.prototype.clone=function(){return gh.clone(this)};var RR=gh;var vR=ls(il(),1);function MR(){if(!c(Cr._canTransferArrayBuffer)){let e=v0("transferTypedArrayTest");e.postMessage=e.webkitPostMessage??e.postMessage;let t=99,n=new Int8Array([t]);try{e.postMessage({array:n},[n.buffer])}catch{return Cr._canTransferArrayBuffer=!1,Cr._canTransferArrayBuffer}Cr._canTransferArrayBuffer=new Promise(i=>{e.onmessage=function(o){let r=o.data.array,a=c(r)&&r[0]===t;i(a),e.terminate(),Cr._canTransferArrayBuffer=a}})}return Cr._canTransferArrayBuffer}var R0=new Le;function Q0(e){let t;try{t=new Blob([e],{type:"application/javascript"})}catch{let o=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,r=new o;r.append(e),t=r.getBlob("application/javascript")}return(window.URL||window.webkitURL).createObjectURL(t)}function v0(e){let t=new vR.default(e),n=t.scheme().length!==0&&t.fragment().length===0,i=e.replace(/\.js$/,""),o={},r,a;if(rp(e))a=e;else if(!n){let s=Ga(`${Cr._workerModulePrefix}/${i}.js`);rp(s)&&(a=s)}if(a){let s=`import "${a}";`;return r=Q0(s),o.type="module",new Worker(r,o)}if(!n&&typeof CESIUM_WORKERS<"u"){let s=`
      importScripts("${Q0(CESIUM_WORKERS)}");
      CesiumWorkers["${i}"]();
    `;return r=Q0(s),new Worker(r,o)}if(r=e,n||(r=Ga(`${Cr._workerModulePrefix+i}.js`)),!Ut.supportsEsmWebWorkers())throw new ae("This browser is not supported. Please update your browser to continue.");return o.type="module",new Worker(r,o)}async function Q5(e,t){let n={modulePath:void 0,wasmBinaryFile:void 0,wasmBinary:void 0};if(!Ut.supportsWebAssembly()){if(!c(t.fallbackModulePath))throw new ae(`This browser does not support Web Assembly, and no backup module was provided for ${e._workerPath}`);return n.modulePath=Ga(t.fallbackModulePath),n}n.wasmBinaryFile=Ga(t.wasmBinaryFile);let i=await Ye.fetchArrayBuffer({url:n.wasmBinaryFile});return n.wasmBinary=i,n}function Cr(e,t){this._workerPath=e,this._maximumActiveTasks=t??Number.POSITIVE_INFINITY,this._activeTasks=0,this._nextID=0,this._webAssemblyPromise=void 0}var R5=(e,t,n,i)=>{let o=({data:r})=>{if(r.id===t){if(c(r.error)){let a=r.error;a.name==="RuntimeError"?(a=new ae(r.error.message),a.stack=r.error.stack):a.name==="DeveloperError"?(a=new be(r.error.message),a.stack=r.error.stack):a.name==="Error"&&(a=new Error(r.error.message),a.stack=r.error.stack),R0.raiseEvent(a),i(a)}else R0.raiseEvent(),n(r.result);e.removeEventListener("message",o)}};return o},v5=[];async function M5(e,t,n){let i=await Promise.resolve(MR());c(n)?i||(n.length=0):n=v5;let o=e._nextID++,r=new Promise((a,s)=>{e._worker.addEventListener("message",R5(e._worker,o,a,s))});return e._worker.postMessage({id:o,baseUrl:Ga.getCesiumBaseUrl().url,parameters:t,canTransferArrayBuffer:i},n),r}async function P5(e,t,n){++e._activeTasks;try{let i=await M5(e,t,n);return--e._activeTasks,i}catch(i){throw--e._activeTasks,i}}Cr.prototype.scheduleTask=function(e,t){if(c(this._worker)||(this._worker=v0(this._workerPath)),!(this._activeTasks>=this._maximumActiveTasks))return P5(this,e,t)};Cr.prototype.initWebAssemblyModule=async function(e){if(c(this._webAssemblyPromise))return this._webAssemblyPromise;let t=async()=>{let n=this._worker=v0(this._workerPath),i=await Q5(this,e),o=await Promise.resolve(MR()),r,a=i.wasmBinary;c(a)&&o&&(r=[a]);let s=new Promise((A,l)=>{n.onmessage=function({data:d}){c(d)?A(d.result):l(new ae("Could not configure wasm module"))}});return n.postMessage({canTransferArrayBuffer:o,parameters:{webAssemblyConfig:i}},r),s};return this._webAssemblyPromise=t(),this._webAssemblyPromise};Cr.prototype.isDestroyed=function(){return!1};Cr.prototype.destroy=function(){return c(this._worker)&&this._worker.terminate(),me(this)};Cr.taskCompletedEvent=R0;Cr._defaultWorkerModulePrefix="Workers/";Cr._workerModulePrefix=Cr._defaultWorkerModulePrefix;Cr._canTransferArrayBuffer=void 0;var $i=Cr;function Al(){}Al._transcodeTaskProcessor=new $i("transcodeKTX2",Number.POSITIVE_INFINITY);Al._readyPromise=void 0;function N5(){let e=Al._transcodeTaskProcessor.initWebAssemblyModule({wasmBinaryFile:"ThirdParty/basis_transcoder.wasm"}).then(function(t){if(t)return Al._transcodeTaskProcessor;throw new ae("KTX2 transcoder could not be initialized.")});Al._readyPromise=e}Al.transcode=function(e,t){return c(Al._readyPromise)||N5(),Al._readyPromise.then(function(n){let i=e;e instanceof ArrayBuffer&&(i=new Uint8Array(e));let o={supportedTargetFormats:t,ktx2Buffer:i};return n.scheduleTask(o,[i.buffer])}).then(function(n){let i=n.length,o=Object.keys(n[0]);for(let r=0;r<i;r++){let a=n[r];for(let s=0;s<o.length;s++){let A=a[o[s]];a[o[s]]=new RR(A.internalFormat,A.datatype,A.width,A.height,A.levelBuffer)}}if(o.length===1){for(let r=0;r<i;++r)n[r]=n[r][o[0]];i===1&&(n=n[0])}return n}).catch(function(n){throw n})};var PR=Al;var NR;LR.setKTX2SupportedFormats=function(e,t,n,i,o,r){NR={s3tc:e,pvrtc:t,astc:n,etc:i,etc1:o,bc7:r}};function LR(e){let t;return e instanceof ArrayBuffer||ArrayBuffer.isView(e)?t=Promise.resolve(e):t=Ye.createIfNeeded(e).fetchArrayBuffer(),t.then(function(n){return PR.transcode(n,NR)})}var ll=LR;function L5(e,t){this.start=e??0,this.stop=t??0}var Vs=L5;function St(e,t){this.center=f.clone(e??f.ZERO),this.radius=t??0}var N0=new f,L0=new f,F0=new f,O0=new f,k0=new f,U0=new f,z0=new f,Er=new f,G0=new f,H0=new f,V0=new f,j0=new f,F5=4/3*S.PI;St.fromPoints=function(e,t){if(c(t)||(t=new St),!c(e)||e.length===0)return t.center=f.clone(f.ZERO,t.center),t.radius=0,t;let n=f.clone(e[0],z0),i=f.clone(n,N0),o=f.clone(n,L0),r=f.clone(n,F0),a=f.clone(n,O0),s=f.clone(n,k0),A=f.clone(n,U0),l=e.length,d;for(d=1;d<l;d++){f.clone(e[d],n);let M=n.x,N=n.y,O=n.z;M<i.x&&f.clone(n,i),M>a.x&&f.clone(n,a),N<o.y&&f.clone(n,o),N>s.y&&f.clone(n,s),O<r.z&&f.clone(n,r),O>A.z&&f.clone(n,A)}let m=f.magnitudeSquared(f.subtract(a,i,Er)),p=f.magnitudeSquared(f.subtract(s,o,Er)),g=f.magnitudeSquared(f.subtract(A,r,Er)),h=i,C=a,_=m;p>_&&(_=p,h=o,C=s),g>_&&(_=g,h=r,C=A);let I=G0;I.x=(h.x+C.x)*.5,I.y=(h.y+C.y)*.5,I.z=(h.z+C.z)*.5;let b=f.magnitudeSquared(f.subtract(C,I,Er)),x=Math.sqrt(b),T=H0;T.x=i.x,T.y=o.y,T.z=r.z;let w=V0;w.x=a.x,w.y=s.y,w.z=A.z;let R=f.midpoint(T,w,j0),z=0;for(d=0;d<l;d++){f.clone(e[d],n);let M=f.magnitude(f.subtract(n,R,Er));M>z&&(z=M);let N=f.magnitudeSquared(f.subtract(n,I,Er));if(N>b){let O=Math.sqrt(N);x=(x+O)*.5,b=x*x;let u=O-x;I.x=(x*I.x+u*n.x)/O,I.y=(x*I.y+u*n.y)/O,I.z=(x*I.z+u*n.z)/O}}return x<z?(f.clone(I,t.center),t.radius=x):(f.clone(R,t.center),t.radius=z),t};var FR=new Ai,O5=new f,k5=new f,M0=new ue,P0=new ue;St.fromRectangle2D=function(e,t,n){return St.fromRectangleWithHeights2D(e,t,0,0,n)};St.fromRectangleWithHeights2D=function(e,t,n,i,o){if(c(o)||(o=new St),!c(e))return o.center=f.clone(f.ZERO,o.center),o.radius=0,o;FR._ellipsoid=pe.default,t=t??FR,de.southwest(e,M0),M0.height=n,de.northeast(e,P0),P0.height=i;let r=t.project(M0,O5),a=t.project(P0,k5),s=a.x-r.x,A=a.y-r.y,l=a.z-r.z;o.radius=Math.sqrt(s*s+A*A+l*l)*.5;let d=o.center;return d.x=r.x+s*.5,d.y=r.y+A*.5,d.z=r.z+l*.5,o};var U5=[];St.fromRectangle3D=function(e,t,n,i){if(t=t??pe.default,n=n??0,c(i)||(i=new St),!c(e))return i.center=f.clone(f.ZERO,i.center),i.radius=0,i;let o=de.subsample(e,t,n,U5);return St.fromPoints(o,i)};St.fromVertices=function(e,t,n,i){if(c(i)||(i=new St),!c(e)||e.length===0)return i.center=f.clone(f.ZERO,i.center),i.radius=0,i;t=t??f.ZERO,n=n??3;let o=z0;o.x=e[0]+t.x,o.y=e[1]+t.y,o.z=e[2]+t.z;let r=f.clone(o,N0),a=f.clone(o,L0),s=f.clone(o,F0),A=f.clone(o,O0),l=f.clone(o,k0),d=f.clone(o,U0),m=e.length,p;for(p=0;p<m;p+=n){let O=e[p]+t.x,u=e[p+1]+t.y,E=e[p+2]+t.z;o.x=O,o.y=u,o.z=E,O<r.x&&f.clone(o,r),O>A.x&&f.clone(o,A),u<a.y&&f.clone(o,a),u>l.y&&f.clone(o,l),E<s.z&&f.clone(o,s),E>d.z&&f.clone(o,d)}let g=f.magnitudeSquared(f.subtract(A,r,Er)),h=f.magnitudeSquared(f.subtract(l,a,Er)),C=f.magnitudeSquared(f.subtract(d,s,Er)),_=r,I=A,b=g;h>b&&(b=h,_=a,I=l),C>b&&(b=C,_=s,I=d);let x=G0;x.x=(_.x+I.x)*.5,x.y=(_.y+I.y)*.5,x.z=(_.z+I.z)*.5;let T=f.magnitudeSquared(f.subtract(I,x,Er)),w=Math.sqrt(T),R=H0;R.x=r.x,R.y=a.y,R.z=s.z;let z=V0;z.x=A.x,z.y=l.y,z.z=d.z;let M=f.midpoint(R,z,j0),N=0;for(p=0;p<m;p+=n){o.x=e[p]+t.x,o.y=e[p+1]+t.y,o.z=e[p+2]+t.z;let O=f.magnitude(f.subtract(o,M,Er));O>N&&(N=O);let u=f.magnitudeSquared(f.subtract(o,x,Er));if(u>T){let E=Math.sqrt(u);w=(w+E)*.5,T=w*w;let y=E-w;x.x=(w*x.x+y*o.x)/E,x.y=(w*x.y+y*o.y)/E,x.z=(w*x.z+y*o.z)/E}}return w<N?(f.clone(x,i.center),i.radius=w):(f.clone(M,i.center),i.radius=N),i};St.fromEncodedCartesianVertices=function(e,t,n){if(c(n)||(n=new St),!c(e)||!c(t)||e.length!==t.length||e.length===0)return n.center=f.clone(f.ZERO,n.center),n.radius=0,n;let i=z0;i.x=e[0]+t[0],i.y=e[1]+t[1],i.z=e[2]+t[2];let o=f.clone(i,N0),r=f.clone(i,L0),a=f.clone(i,F0),s=f.clone(i,O0),A=f.clone(i,k0),l=f.clone(i,U0),d=e.length,m;for(m=0;m<d;m+=3){let N=e[m]+t[m],O=e[m+1]+t[m+1],u=e[m+2]+t[m+2];i.x=N,i.y=O,i.z=u,N<o.x&&f.clone(i,o),N>s.x&&f.clone(i,s),O<r.y&&f.clone(i,r),O>A.y&&f.clone(i,A),u<a.z&&f.clone(i,a),u>l.z&&f.clone(i,l)}let p=f.magnitudeSquared(f.subtract(s,o,Er)),g=f.magnitudeSquared(f.subtract(A,r,Er)),h=f.magnitudeSquared(f.subtract(l,a,Er)),C=o,_=s,I=p;g>I&&(I=g,C=r,_=A),h>I&&(I=h,C=a,_=l);let b=G0;b.x=(C.x+_.x)*.5,b.y=(C.y+_.y)*.5,b.z=(C.z+_.z)*.5;let x=f.magnitudeSquared(f.subtract(_,b,Er)),T=Math.sqrt(x),w=H0;w.x=o.x,w.y=r.y,w.z=a.z;let R=V0;R.x=s.x,R.y=A.y,R.z=l.z;let z=f.midpoint(w,R,j0),M=0;for(m=0;m<d;m+=3){i.x=e[m]+t[m],i.y=e[m+1]+t[m+1],i.z=e[m+2]+t[m+2];let N=f.magnitude(f.subtract(i,z,Er));N>M&&(M=N);let O=f.magnitudeSquared(f.subtract(i,b,Er));if(O>x){let u=Math.sqrt(O);T=(T+u)*.5,x=T*T;let E=u-T;b.x=(T*b.x+E*i.x)/u,b.y=(T*b.y+E*i.y)/u,b.z=(T*b.z+E*i.z)/u}}return T<M?(f.clone(b,n.center),n.radius=T):(f.clone(z,n.center),n.radius=M),n};St.fromCornerPoints=function(e,t,n){c(n)||(n=new St);let i=f.midpoint(e,t,n.center);return n.radius=f.distance(i,t),n};St.fromEllipsoid=function(e,t){return c(t)||(t=new St),f.clone(f.ZERO,t.center),t.radius=e.maximumRadius,t};var z5=new f;St.fromBoundingSpheres=function(e,t){if(c(t)||(t=new St),!c(e)||e.length===0)return t.center=f.clone(f.ZERO,t.center),t.radius=0,t;let n=e.length;if(n===1)return St.clone(e[0],t);if(n===2)return St.union(e[0],e[1],t);let i=[],o;for(o=0;o<n;o++)i.push(e[o].center);t=St.fromPoints(i,t);let r=t.center,a=t.radius;for(o=0;o<n;o++){let s=e[o];a=Math.max(a,f.distance(r,s.center,z5)+s.radius)}return t.radius=a,t};var G5=new f,H5=new f,V5=new f;St.fromOrientedBoundingBox=function(e,t){c(t)||(t=new St);let n=e.halfAxes,i=ne.getColumn(n,0,G5),o=ne.getColumn(n,1,H5),r=ne.getColumn(n,2,V5);return f.add(i,o,i),f.add(i,r,i),t.center=f.clone(e.center,t.center),t.radius=f.magnitude(i),t};var j5=new f,Y5=new f;St.fromTransformation=function(e,t){c(t)||(t=new St);let n=Q.getTranslation(e,j5),i=Q.getScale(e,Y5),o=.5*f.magnitude(i);return t.center=f.clone(n,t.center),t.radius=o,t};St.clone=function(e,t){if(c(e))return c(t)?(t.center=f.clone(e.center,t.center),t.radius=e.radius,t):new St(e.center,e.radius)};St.packedLength=4;St.pack=function(e,t,n){n=n??0;let i=e.center;return t[n++]=i.x,t[n++]=i.y,t[n++]=i.z,t[n]=e.radius,t};St.unpack=function(e,t,n){t=t??0,c(n)||(n=new St);let i=n.center;return i.x=e[t++],i.y=e[t++],i.z=e[t++],n.radius=e[t],n};var W5=new f,q5=new f;St.union=function(e,t,n){c(n)||(n=new St);let i=e.center,o=e.radius,r=t.center,a=t.radius,s=f.subtract(r,i,W5),A=f.magnitude(s);if(o>=A+a)return e.clone(n),n;if(a>=A+o)return t.clone(n),n;let l=(o+A+a)*.5,d=f.multiplyByScalar(s,(-o+l)/A,q5);return f.add(d,i,d),f.clone(d,n.center),n.radius=l,n};var J5=new f;St.expand=function(e,t,n){n=St.clone(e,n);let i=f.magnitude(f.subtract(t,n.center,J5));return i>n.radius&&(n.radius=i),n};St.intersectPlane=function(e,t){let n=e.center,i=e.radius,o=t.normal,r=f.dot(o,n)+t.distance;return r<-i?bt.OUTSIDE:r<i?bt.INTERSECTING:bt.INSIDE};St.transform=function(e,t,n){return c(n)||(n=new St),n.center=Q.multiplyByPoint(t,e.center,n.center),n.radius=Q.getMaximumScale(t)*e.radius,n};var K5=new f;St.distanceSquaredTo=function(e,t){let n=f.subtract(e.center,t,K5),i=f.magnitude(n)-e.radius;return i<=0?0:i*i};St.transformWithoutScale=function(e,t,n){return c(n)||(n=new St),n.center=Q.multiplyByPoint(t,e.center,n.center),n.radius=e.radius,n};var X5=new f;St.computePlaneDistances=function(e,t,n,i){c(i)||(i=new Vs);let o=f.subtract(e.center,t,X5),r=f.dot(n,o);return i.start=r-e.radius,i.stop=r+e.radius,i};var OR=new f,Z5=new f,$5=new f,eJ=new f,tJ=new f,nJ=new ue,UR=new Array(8);for(let e=0;e<8;++e)UR[e]=new f;var kR=new Ai;St.projectTo2D=function(e,t,n){kR._ellipsoid=pe.default,t=t??kR;let i=t.ellipsoid,o=e.center,r=e.radius,a;f.equals(o,f.ZERO)?a=f.clone(f.UNIT_X,OR):a=i.geodeticSurfaceNormal(o,OR);let s=f.cross(f.UNIT_Z,a,Z5);f.normalize(s,s);let A=f.cross(a,s,$5);f.normalize(A,A),f.multiplyByScalar(a,r,a),f.multiplyByScalar(A,r,A),f.multiplyByScalar(s,r,s);let l=f.negate(A,tJ),d=f.negate(s,eJ),m=UR,p=m[0];f.add(a,A,p),f.add(p,s,p),p=m[1],f.add(a,A,p),f.add(p,d,p),p=m[2],f.add(a,l,p),f.add(p,d,p),p=m[3],f.add(a,l,p),f.add(p,s,p),f.negate(a,a),p=m[4],f.add(a,A,p),f.add(p,s,p),p=m[5],f.add(a,A,p),f.add(p,d,p),p=m[6],f.add(a,l,p),f.add(p,d,p),p=m[7],f.add(a,l,p),f.add(p,s,p);let g=m.length;for(let I=0;I<g;++I){let b=m[I];f.add(o,b,b);let x=i.cartesianToCartographic(b,nJ);t.project(x,b)}n=St.fromPoints(m,n),o=n.center;let h=o.x,C=o.y,_=o.z;return o.x=_,o.y=h,o.z=C,n};St.isOccluded=function(e,t){return!t.isBoundingSphereVisible(e)};St.equals=function(e,t){return e===t||c(e)&&c(t)&&f.equals(e.center,t.center)&&e.radius===t.radius};St.prototype.intersectPlane=function(e){return St.intersectPlane(this,e)};St.prototype.distanceSquaredTo=function(e){return St.distanceSquaredTo(this,e)};St.prototype.computePlaneDistances=function(e,t,n){return St.computePlaneDistances(this,e,t,n)};St.prototype.isOccluded=function(e){return St.isOccluded(this,e)};St.prototype.equals=function(e){return St.equals(this,e)};St.prototype.clone=function(e){return St.clone(this,e)};St.prototype.volume=function(){let e=this.radius;return F5*e*e*e};var le=St;function iJ(e){e=e??G.EMPTY_OBJECT,this.position=e.position,this.normal=e.normal,this.st=e.st,this.bitangent=e.bitangent,this.tangent=e.tangent,this.color=e.color}var eo=iJ;var oJ={NONE:0,TOP:1,ALL:2},Pr=Object.freeze(oJ);function No(e){e=e??G.EMPTY_OBJECT,this.position=e.position??!1,this.normal=e.normal??!1,this.st=e.st??!1,this.bitangent=e.bitangent??!1,this.tangent=e.tangent??!1,this.color=e.color??!1}No.POSITION_ONLY=Object.freeze(new No({position:!0}));No.POSITION_AND_NORMAL=Object.freeze(new No({position:!0,normal:!0}));No.POSITION_NORMAL_AND_ST=Object.freeze(new No({position:!0,normal:!0,st:!0}));No.POSITION_AND_ST=Object.freeze(new No({position:!0,st:!0}));No.POSITION_AND_COLOR=Object.freeze(new No({position:!0,color:!0}));No.ALL=Object.freeze(new No({position:!0,normal:!0,st:!0,tangent:!0,bitangent:!0}));No.DEFAULT=No.POSITION_NORMAL_AND_ST;No.packedLength=6;No.pack=function(e,t,n){return n=n??0,t[n++]=e.position?1:0,t[n++]=e.normal?1:0,t[n++]=e.st?1:0,t[n++]=e.tangent?1:0,t[n++]=e.bitangent?1:0,t[n]=e.color?1:0,t};No.unpack=function(e,t,n){return t=t??0,c(n)||(n=new No),n.position=e[t++]===1,n.normal=e[t++]===1,n.st=e[t++]===1,n.tangent=e[t++]===1,n.bitangent=e[t++]===1,n.color=e[t]===1,n};No.clone=function(e,t){if(c(e))return c(t)||(t=new No),t.position=e.position,t.normal=e.normal,t.st=e.st,t.tangent=e.tangent,t.bitangent=e.bitangent,t.color=e.color,t};var Bt=No;var rJ=new f;function fs(e){e=e??G.EMPTY_OBJECT;let t=e.minimum,n=e.maximum,i=e.vertexFormat??Bt.DEFAULT;this._minimum=f.clone(t),this._maximum=f.clone(n),this._vertexFormat=i,this._offsetAttribute=e.offsetAttribute,this._workerName="createBoxGeometry"}fs.fromDimensions=function(e){e=e??G.EMPTY_OBJECT;let t=e.dimensions,n=f.multiplyByScalar(t,.5,new f);return new fs({minimum:f.negate(n,new f),maximum:n,vertexFormat:e.vertexFormat,offsetAttribute:e.offsetAttribute})};fs.fromAxisAlignedBoundingBox=function(e){return new fs({minimum:e.minimum,maximum:e.maximum})};fs.packedLength=2*f.packedLength+Bt.packedLength+1;fs.pack=function(e,t,n){return n=n??0,f.pack(e._minimum,t,n),f.pack(e._maximum,t,n+f.packedLength),Bt.pack(e._vertexFormat,t,n+2*f.packedLength),t[n+2*f.packedLength+Bt.packedLength]=e._offsetAttribute??-1,t};var GR=new f,HR=new f,VR=new Bt,zR={minimum:GR,maximum:HR,vertexFormat:VR,offsetAttribute:void 0};fs.unpack=function(e,t,n){t=t??0;let i=f.unpack(e,t,GR),o=f.unpack(e,t+f.packedLength,HR),r=Bt.unpack(e,t+2*f.packedLength,VR),a=e[t+2*f.packedLength+Bt.packedLength];return c(n)?(n._minimum=f.clone(i,n._minimum),n._maximum=f.clone(o,n._maximum),n._vertexFormat=Bt.clone(r,n._vertexFormat),n._offsetAttribute=a===-1?void 0:a,n):(zR.offsetAttribute=a===-1?void 0:a,new fs(zR))};fs.createGeometry=function(e){let t=e._minimum,n=e._maximum,i=e._vertexFormat;if(f.equals(t,n))return;let o=new eo,r,a;if(i.position&&(i.st||i.normal||i.tangent||i.bitangent)){if(i.position&&(a=new Float64Array(72),a[0]=t.x,a[1]=t.y,a[2]=n.z,a[3]=n.x,a[4]=t.y,a[5]=n.z,a[6]=n.x,a[7]=n.y,a[8]=n.z,a[9]=t.x,a[10]=n.y,a[11]=n.z,a[12]=t.x,a[13]=t.y,a[14]=t.z,a[15]=n.x,a[16]=t.y,a[17]=t.z,a[18]=n.x,a[19]=n.y,a[20]=t.z,a[21]=t.x,a[22]=n.y,a[23]=t.z,a[24]=n.x,a[25]=t.y,a[26]=t.z,a[27]=n.x,a[28]=n.y,a[29]=t.z,a[30]=n.x,a[31]=n.y,a[32]=n.z,a[33]=n.x,a[34]=t.y,a[35]=n.z,a[36]=t.x,a[37]=t.y,a[38]=t.z,a[39]=t.x,a[40]=n.y,a[41]=t.z,a[42]=t.x,a[43]=n.y,a[44]=n.z,a[45]=t.x,a[46]=t.y,a[47]=n.z,a[48]=t.x,a[49]=n.y,a[50]=t.z,a[51]=n.x,a[52]=n.y,a[53]=t.z,a[54]=n.x,a[55]=n.y,a[56]=n.z,a[57]=t.x,a[58]=n.y,a[59]=n.z,a[60]=t.x,a[61]=t.y,a[62]=t.z,a[63]=n.x,a[64]=t.y,a[65]=t.z,a[66]=n.x,a[67]=t.y,a[68]=n.z,a[69]=t.x,a[70]=t.y,a[71]=n.z,o.position=new rt({componentDatatype:V.DOUBLE,componentsPerAttribute:3,values:a})),i.normal){let l=new Float32Array(72);l[0]=0,l[1]=0,l[2]=1,l[3]=0,l[4]=0,l[5]=1,l[6]=0,l[7]=0,l[8]=1,l[9]=0,l[10]=0,l[11]=1,l[12]=0,l[13]=0,l[14]=-1,l[15]=0,l[16]=0,l[17]=-1,l[18]=0,l[19]=0,l[20]=-1,l[21]=0,l[22]=0,l[23]=-1,l[24]=1,l[25]=0,l[26]=0,l[27]=1,l[28]=0,l[29]=0,l[30]=1,l[31]=0,l[32]=0,l[33]=1,l[34]=0,l[35]=0,l[36]=-1,l[37]=0,l[38]=0,l[39]=-1,l[40]=0,l[41]=0,l[42]=-1,l[43]=0,l[44]=0,l[45]=-1,l[46]=0,l[47]=0,l[48]=0,l[49]=1,l[50]=0,l[51]=0,l[52]=1,l[53]=0,l[54]=0,l[55]=1,l[56]=0,l[57]=0,l[58]=1,l[59]=0,l[60]=0,l[61]=-1,l[62]=0,l[63]=0,l[64]=-1,l[65]=0,l[66]=0,l[67]=-1,l[68]=0,l[69]=0,l[70]=-1,l[71]=0,o.normal=new rt({componentDatatype:V.FLOAT,componentsPerAttribute:3,values:l})}if(i.st){let l=new Float32Array(48);l[0]=0,l[1]=0,l[2]=1,l[3]=0,l[4]=1,l[5]=1,l[6]=0,l[7]=1,l[8]=1,l[9]=0,l[10]=0,l[11]=0,l[12]=0,l[13]=1,l[14]=1,l[15]=1,l[16]=0,l[17]=0,l[18]=1,l[19]=0,l[20]=1,l[21]=1,l[22]=0,l[23]=1,l[24]=1,l[25]=0,l[26]=0,l[27]=0,l[28]=0,l[29]=1,l[30]=1,l[31]=1,l[32]=1,l[33]=0,l[34]=0,l[35]=0,l[36]=0,l[37]=1,l[38]=1,l[39]=1,l[40]=0,l[41]=0,l[42]=1,l[43]=0,l[44]=1,l[45]=1,l[46]=0,l[47]=1,o.st=new rt({componentDatatype:V.FLOAT,componentsPerAttribute:2,values:l})}if(i.tangent){let l=new Float32Array(72);l[0]=1,l[1]=0,l[2]=0,l[3]=1,l[4]=0,l[5]=0,l[6]=1,l[7]=0,l[8]=0,l[9]=1,l[10]=0,l[11]=0,l[12]=-1,l[13]=0,l[14]=0,l[15]=-1,l[16]=0,l[17]=0,l[18]=-1,l[19]=0,l[20]=0,l[21]=-1,l[22]=0,l[23]=0,l[24]=0,l[25]=1,l[26]=0,l[27]=0,l[28]=1,l[29]=0,l[30]=0,l[31]=1,l[32]=0,l[33]=0,l[34]=1,l[35]=0,l[36]=0,l[37]=-1,l[38]=0,l[39]=0,l[40]=-1,l[41]=0,l[42]=0,l[43]=-1,l[44]=0,l[45]=0,l[46]=-1,l[47]=0,l[48]=-1,l[49]=0,l[50]=0,l[51]=-1,l[52]=0,l[53]=0,l[54]=-1,l[55]=0,l[56]=0,l[57]=-1,l[58]=0,l[59]=0,l[60]=1,l[61]=0,l[62]=0,l[63]=1,l[64]=0,l[65]=0,l[66]=1,l[67]=0,l[68]=0,l[69]=1,l[70]=0,l[71]=0,o.tangent=new rt({componentDatatype:V.FLOAT,componentsPerAttribute:3,values:l})}if(i.bitangent){let l=new Float32Array(72);l[0]=0,l[1]=1,l[2]=0,l[3]=0,l[4]=1,l[5]=0,l[6]=0,l[7]=1,l[8]=0,l[9]=0,l[10]=1,l[11]=0,l[12]=0,l[13]=1,l[14]=0,l[15]=0,l[16]=1,l[17]=0,l[18]=0,l[19]=1,l[20]=0,l[21]=0,l[22]=1,l[23]=0,l[24]=0,l[25]=0,l[26]=1,l[27]=0,l[28]=0,l[29]=1,l[30]=0,l[31]=0,l[32]=1,l[33]=0,l[34]=0,l[35]=1,l[36]=0,l[37]=0,l[38]=1,l[39]=0,l[40]=0,l[41]=1,l[42]=0,l[43]=0,l[44]=1,l[45]=0,l[46]=0,l[47]=1,l[48]=0,l[49]=0,l[50]=1,l[51]=0,l[52]=0,l[53]=1,l[54]=0,l[55]=0,l[56]=1,l[57]=0,l[58]=0,l[59]=1,l[60]=0,l[61]=0,l[62]=1,l[63]=0,l[64]=0,l[65]=1,l[66]=0,l[67]=0,l[68]=1,l[69]=0,l[70]=0,l[71]=1,o.bitangent=new rt({componentDatatype:V.FLOAT,componentsPerAttribute:3,values:l})}r=new Uint16Array(36),r[0]=0,r[1]=1,r[2]=2,r[3]=0,r[4]=2,r[5]=3,r[6]=6,r[7]=5,r[8]=4,r[9]=7,r[10]=6,r[11]=4,r[12]=8,r[13]=9,r[14]=10,r[15]=8,r[16]=10,r[17]=11,r[18]=14,r[19]=13,r[20]=12,r[21]=15,r[22]=14,r[23]=12,r[24]=18,r[25]=17,r[26]=16,r[27]=19,r[28]=18,r[29]=16,r[30]=20,r[31]=21,r[32]=22,r[33]=20,r[34]=22,r[35]=23}else a=new Float64Array(24),a[0]=t.x,a[1]=t.y,a[2]=t.z,a[3]=n.x,a[4]=t.y,a[5]=t.z,a[6]=n.x,a[7]=n.y,a[8]=t.z,a[9]=t.x,a[10]=n.y,a[11]=t.z,a[12]=t.x,a[13]=t.y,a[14]=n.z,a[15]=n.x,a[16]=t.y,a[17]=n.z,a[18]=n.x,a[19]=n.y,a[20]=n.z,a[21]=t.x,a[22]=n.y,a[23]=n.z,o.position=new rt({componentDatatype:V.DOUBLE,componentsPerAttribute:3,values:a}),r=new Uint16Array(36),r[0]=4,r[1]=5,r[2]=6,r[3]=4,r[4]=6,r[5]=7,r[6]=1,r[7]=0,r[8]=3,r[9]=1,r[10]=3,r[11]=2,r[12]=1,r[13]=6,r[14]=5,r[15]=1,r[16]=2,r[17]=6,r[18]=2,r[19]=3,r[20]=7,r[21]=2,r[22]=7,r[23]=6,r[24]=3,r[25]=0,r[26]=4,r[27]=3,r[28]=4,r[29]=7,r[30]=0,r[31]=1,r[32]=5,r[33]=0,r[34]=5,r[35]=4;let s=f.subtract(n,t,rJ),A=f.magnitude(s)*.5;if(c(e._offsetAttribute)){let l=a.length,d=e._offsetAttribute===Pr.NONE?0:1,m=new Uint8Array(l/3).fill(d);o.applyOffset=new rt({componentDatatype:V.UNSIGNED_BYTE,componentsPerAttribute:1,values:m})}return new Dt({attributes:o,indices:r,primitiveType:Me.TRIANGLES,boundingSphere:new le(f.ZERO,A),offsetAttribute:e._offsetAttribute})};var Y0;fs.getUnitBox=function(){return c(Y0)||(Y0=fs.createGeometry(fs.fromDimensions({dimensions:new f(1,1,1),vertexFormat:Bt.POSITION_ONLY}))),Y0};var W0=fs;var zn={SCALAR:"SCALAR",VEC2:"VEC2",VEC3:"VEC3",VEC4:"VEC4",MAT2:"MAT2",MAT3:"MAT3",MAT4:"MAT4"};zn.getMathType=function(e){switch(e){case zn.SCALAR:return Number;case zn.VEC2:return L;case zn.VEC3:return f;case zn.VEC4:return re;case zn.MAT2:return vi;case zn.MAT3:return ne;case zn.MAT4:return Q}};zn.getNumberOfComponents=function(e){switch(e){case zn.SCALAR:return 1;case zn.VEC2:return 2;case zn.VEC3:return 3;case zn.VEC4:case zn.MAT2:return 4;case zn.MAT3:return 9;case zn.MAT4:return 16}};zn.getAttributeLocationCount=function(e){switch(e){case zn.SCALAR:case zn.VEC2:case zn.VEC3:case zn.VEC4:return 1;case zn.MAT2:return 2;case zn.MAT3:return 3;case zn.MAT4:return 4}};zn.getGlslType=function(e){switch(e){case zn.SCALAR:return"float";case zn.VEC2:return"vec2";case zn.VEC3:return"vec3";case zn.VEC4:return"vec4";case zn.MAT2:return"mat2";case zn.MAT3:return"mat3";case zn.MAT4:return"mat4"}};var ct=Object.freeze(zn);var jR=1/256,YR=256,ri={};ri.octEncodeInRange=function(e,t,n){if(n.x=e.x/(Math.abs(e.x)+Math.abs(e.y)+Math.abs(e.z)),n.y=e.y/(Math.abs(e.x)+Math.abs(e.y)+Math.abs(e.z)),e.z<0){let i=n.x,o=n.y;n.x=(1-Math.abs(o))*S.signNotZero(i),n.y=(1-Math.abs(i))*S.signNotZero(o)}return n.x=S.toSNorm(n.x,t),n.y=S.toSNorm(n.y,t),n};ri.octEncode=function(e,t){return ri.octEncodeInRange(e,255,t)};var dp=new L,WR=new Uint8Array(1);function jE(e){return WR[0]=e,WR[0]}ri.octEncodeToCartesian4=function(e,t){return ri.octEncodeInRange(e,65535,dp),t.x=jE(dp.x*jR),t.y=jE(dp.x),t.z=jE(dp.y*jR),t.w=jE(dp.y),t};ri.octDecodeInRange=function(e,t,n,i){if(i.x=S.fromSNorm(e,n),i.y=S.fromSNorm(t,n),i.z=1-(Math.abs(i.x)+Math.abs(i.y)),i.z<0){let o=i.x;i.x=(1-Math.abs(i.y))*S.signNotZero(o),i.y=(1-Math.abs(o))*S.signNotZero(i.y)}return f.normalize(i,i)};ri.octDecode=function(e,t,n){return ri.octDecodeInRange(e,t,255,n)};ri.octDecodeFromCartesian4=function(e,t){let n=e.x,i=e.y,o=e.z,r=e.w,a=n*YR+i,s=o*YR+r;return ri.octDecodeInRange(a,s,65535,t)};ri.octPackFloat=function(e){return 256*e.x+e.y};var J0=new L;ri.octEncodeFloat=function(e){return ri.octEncode(e,J0),ri.octPackFloat(J0)};ri.octDecodeFloat=function(e,t){let n=e/256,i=Math.floor(n),o=(n-i)*256;return ri.octDecode(i,o,t)};ri.octPack=function(e,t,n,i){let o=ri.octEncodeFloat(e),r=ri.octEncodeFloat(t),a=ri.octEncode(n,J0);return i.x=65536*a.x+o,i.y=65536*a.y+r,i};ri.octUnpack=function(e,t,n,i){let o=e.x/65536,r=Math.floor(o),a=(o-r)*65536;o=e.y/65536;let s=Math.floor(o),A=(o-s)*65536;ri.octDecodeFloat(a,t),ri.octDecodeFloat(A,n),ri.octDecode(r,s,i)};ri.compressTextureCoordinates=function(e){let t=e.x*4095|0,n=e.y*4095|0;return 4096*t+n};ri.decompressTextureCoordinates=function(e,t){let n=e/4096,i=Math.floor(n);return t.x=i/4095,t.y=(e-i*4096)/4095,t};function q0(e){return e>>1^-(e&1)}ri.zigZagDeltaDecode=function(e,t,n){let i=e.length,o=0,r=0,a=0;for(let s=0;s<i;++s)o+=q0(e[s]),r+=q0(t[s]),e[s]=o,t[s]=r,c(n)&&(a+=q0(n[s]),n[s]=a)};ri.dequantize=function(e,t,n,i){let o=ct.getNumberOfComponents(n),r;switch(t){case V.BYTE:r=127;break;case V.UNSIGNED_BYTE:r=255;break;case V.SHORT:r=32767;break;case V.UNSIGNED_SHORT:r=65535;break;case V.INT:r=2147483647;break;case V.UNSIGNED_INT:r=4294967295;break}let a=new Float32Array(i*o);for(let s=0;s<i;s++)for(let A=0;A<o;A++){let l=s*o+A;a[l]=Math.max(e[l]/r,-1)}return a};ri.decodeRGB565=function(e,t){let n=e.length;c(t)||(t=new Float32Array(n*3));let i=31,o=63,r=1/31,a=1/63;for(let s=0;s<n;s++){let A=e[s],l=A>>11,d=A>>5&o,m=A&i,p=3*s;t[p]=l*r,t[p+1]=d*a,t[p+2]=m*r}return t};var Yt=ri;var qR=new f,JR=new f,KR=new f;function aJ(e,t,n,i,o){c(o)||(o=new f);let r,a,s,A,l,d,m,p;if(c(t.z)){if(f.equalsEpsilon(e,t,S.EPSILON14))return f.clone(f.UNIT_X,o);if(f.equalsEpsilon(e,n,S.EPSILON14))return f.clone(f.UNIT_Y,o);if(f.equalsEpsilon(e,i,S.EPSILON14))return f.clone(f.UNIT_Z,o);r=f.subtract(n,t,qR),a=f.subtract(i,t,JR),s=f.subtract(e,t,KR),A=f.dot(r,r),l=f.dot(r,a),d=f.dot(r,s),m=f.dot(a,a),p=f.dot(a,s)}else{if(L.equalsEpsilon(e,t,S.EPSILON14))return f.clone(f.UNIT_X,o);if(L.equalsEpsilon(e,n,S.EPSILON14))return f.clone(f.UNIT_Y,o);if(L.equalsEpsilon(e,i,S.EPSILON14))return f.clone(f.UNIT_Z,o);r=L.subtract(n,t,qR),a=L.subtract(i,t,JR),s=L.subtract(e,t,KR),A=L.dot(r,r),l=L.dot(r,a),d=L.dot(r,s),m=L.dot(a,a),p=L.dot(a,s)}o.y=m*d-l*p,o.z=A*p-l*d;let g=A*m-l*l;if(g!==0)return o.y/=g,o.z/=g,o.x=1-o.y-o.z,o}var XR=aJ;function pA(){this.high=f.clone(f.ZERO),this.low=f.clone(f.ZERO)}pA.encode=function(e,t){c(t)||(t={high:0,low:0});let n;return e>=0?(n=Math.floor(e/65536)*65536,t.high=n,t.low=e-n):(n=Math.floor(-e/65536)*65536,t.high=-n,t.low=e+n),t};var ul={high:0,low:0};pA.fromCartesian=function(e,t){c(t)||(t=new pA);let n=t.high,i=t.low;return pA.encode(e.x,ul),n.x=ul.high,i.x=ul.low,pA.encode(e.y,ul),n.y=ul.high,i.y=ul.low,pA.encode(e.z,ul),n.z=ul.high,i.z=ul.low,t};var K0=new pA;pA.writeElements=function(e,t,n){pA.fromCartesian(e,K0);let i=K0.high,o=K0.low;t[n]=i.x,t[n+1]=i.y,t[n+2]=i.z,t[n+3]=o.x,t[n+4]=o.y,t[n+5]=o.z};var Cn=pA;var X0={};X0.computeDiscriminant=function(e,t,n){return t*t-4*e*n};function ZR(e,t,n){let i=e+t;return S.sign(e)!==S.sign(t)&&Math.abs(i/Math.max(Math.abs(e),Math.abs(t)))<n?0:i}X0.computeRealRoots=function(e,t,n){let i;if(e===0)return t===0?[]:[-n/t];if(t===0){if(n===0)return[0,0];let A=Math.abs(n),l=Math.abs(e);if(A<l&&A/l<S.EPSILON14)return[0,0];if(A>l&&l/A<S.EPSILON14)return[];if(i=-n/e,i<0)return[];let d=Math.sqrt(i);return[-d,d]}else if(n===0)return i=-t/e,i<0?[i,0]:[0,i];let o=t*t,r=4*e*n,a=ZR(o,-r,S.EPSILON14);if(a<0)return[];let s=-.5*ZR(t,S.sign(t)*Math.sqrt(a),S.EPSILON14);return t>0?[s/e,n/s]:[n/s,s/e]};var js=X0;var $0={};$0.computeDiscriminant=function(e,t,n,i){let o=e*e,r=t*t,a=n*n,s=i*i;return 18*e*t*n*i+r*a-27*o*s-4*(e*a*n+r*t*i)};function Z0(e,t,n,i){let o=e,r=t/3,a=n/3,s=i,A=o*a,l=r*s,d=r*r,m=a*a,p=o*a-d,g=o*s-r*a,h=r*s-m,C=4*p*h-g*g,_,I;if(C<0){let j,q,$;d*l>=A*m?(j=o,q=p,$=-2*r*p+o*g):(j=s,q=h,$=-s*g+2*a*h);let Z=-($<0?-1:1)*Math.abs(j)*Math.sqrt(-C);I=-$+Z;let ee=I/2,Ae=ee<0?-Math.pow(-ee,1/3):Math.pow(ee,1/3),ge=I===Z?-Ae:-q/Ae;return _=q<=0?Ae+ge:-$/(Ae*Ae+ge*ge+q),d*l>=A*m?[(_-r)/o]:[-s/(_+a)]}let b=p,x=-2*r*p+o*g,T=h,w=-s*g+2*a*h,R=Math.sqrt(C),z=Math.sqrt(3)/2,M=Math.abs(Math.atan2(o*R,-x)/3);_=2*Math.sqrt(-b);let N=Math.cos(M);I=_*N;let O=_*(-N/2-z*Math.sin(M)),u=I+O>2*r?I-r:O-r,E=o,y=u/E;M=Math.abs(Math.atan2(s*R,-w)/3),_=2*Math.sqrt(-T),N=Math.cos(M),I=_*N,O=_*(-N/2-z*Math.sin(M));let B=-s,D=I+O<2*a?I+a:O+a,v=B/D,F=E*D,P=-u*D-E*B,U=u*B,k=(a*P-r*U)/(-r*P+a*F);return y<=k?y<=v?k<=v?[y,k,v]:[y,v,k]:[v,y,k]:y<=v?[k,y,v]:k<=v?[k,v,y]:[v,k,y]}$0.computeRealRoots=function(e,t,n,i){let o,r;if(e===0)return js.computeRealRoots(t,n,i);if(t===0){if(n===0){if(i===0)return[0,0,0];r=-i/e;let a=r<0?-Math.pow(-r,1/3):Math.pow(r,1/3);return[a,a,a]}else if(i===0)return o=js.computeRealRoots(e,0,n),o.Length===0?[0]:[o[0],0,o[1]];return Z0(e,0,n,i)}else{if(n===0)return i===0?(r=-t/e,r<0?[r,0,0]:[0,0,r]):Z0(e,t,0,i);if(i===0)return o=js.computeRealRoots(e,t,n),o.length===0?[0]:o[1]<=0?[o[0],o[1],0]:o[0]>=0?[0,o[0],o[1]]:[o[0],0,o[1]]}return Z0(e,t,n,i)};var YE=$0;var eB={};eB.computeDiscriminant=function(e,t,n,i,o){let r=e*e,a=r*e,s=t*t,A=s*t,l=n*n,d=l*n,m=i*i,p=m*i,g=o*o,h=g*o;return s*l*m-4*A*p-4*e*d*m+18*e*t*n*p-27*r*m*m+256*a*h+o*(18*A*n*i-4*s*d+16*e*l*l-80*e*t*l*i-6*e*s*m+144*r*n*m)+g*(144*e*s*n-27*s*s-128*r*l-192*r*t*i)};function vc(e,t,n,i){let o=e*e,r=t-3*o/8,a=n-t*e/2+o*e/8,s=i-n*e/4+t*o/16-3*o*o/256,A=YE.computeRealRoots(1,2*r,r*r-4*s,-a*a);if(A.length>0){let l=-e/4,d=A[A.length-1];if(Math.abs(d)<S.EPSILON14){let m=js.computeRealRoots(1,r,s);if(m.length===2){let p=m[0],g=m[1],h;if(p>=0&&g>=0){let C=Math.sqrt(p),_=Math.sqrt(g);return[l-_,l-C,l+C,l+_]}else{if(p>=0&&g<0)return h=Math.sqrt(p),[l-h,l+h];if(p<0&&g>=0)return h=Math.sqrt(g),[l-h,l+h]}}return[]}else if(d>0){let m=Math.sqrt(d),p=(r+d-a/m)/2,g=(r+d+a/m)/2,h=js.computeRealRoots(1,m,p),C=js.computeRealRoots(1,-m,g);return h.length!==0?(h[0]+=l,h[1]+=l,C.length!==0?(C[0]+=l,C[1]+=l,h[1]<=C[0]?[h[0],h[1],C[0],C[1]]:C[1]<=h[0]?[C[0],C[1],h[0],h[1]]:h[0]>=C[0]&&h[1]<=C[1]?[C[0],h[0],h[1],C[1]]:C[0]>=h[0]&&C[1]<=h[1]?[h[0],C[0],C[1],h[1]]:h[0]>C[0]&&h[0]<C[1]?[C[0],h[0],C[1],h[1]]:[h[0],C[0],h[1],C[1]]):h):C.length!==0?(C[0]+=l,C[1]+=l,C):[]}}return[]}function hp(e,t,n,i){let o=n*n,r=t*t,a=e*e,s=-2*t,A=n*e+r-4*i,l=a*i-n*t*e+o,d=YE.computeRealRoots(1,s,A,l);if(d.length>0){let m=d[0],p=t-m,g=p*p,h=e/2,C=p/2,_=g-4*i,I=g+4*Math.abs(i),b=a-4*m,x=a+4*Math.abs(m),T,w;if(m<0||_*x<b*I){let E=Math.sqrt(b);T=E/2,w=E===0?0:(e*C-n)/E}else{let E=Math.sqrt(_);T=E===0?0:(e*C-n)/E,w=E/2}let R,z;h===0&&T===0?(R=0,z=0):S.sign(h)===S.sign(T)?(R=h+T,z=m/R):(z=h-T,R=m/z);let M,N;C===0&&w===0?(M=0,N=0):S.sign(C)===S.sign(w)?(M=C+w,N=i/M):(N=C-w,M=i/N);let O=js.computeRealRoots(1,R,M),u=js.computeRealRoots(1,z,N);if(O.length!==0)return u.length!==0?O[1]<=u[0]?[O[0],O[1],u[0],u[1]]:u[1]<=O[0]?[u[0],u[1],O[0],O[1]]:O[0]>=u[0]&&O[1]<=u[1]?[u[0],O[0],O[1],u[1]]:u[0]>=O[0]&&u[1]<=O[1]?[O[0],u[0],u[1],O[1]]:O[0]>u[0]&&O[0]<u[1]?[u[0],O[0],u[1],O[1]]:[O[0],u[0],O[1],u[1]]:O;if(u.length!==0)return u}return[]}eB.computeRealRoots=function(e,t,n,i,o){if(Math.abs(e)<S.EPSILON15)return YE.computeRealRoots(t,n,i,o);let r=t/e,a=n/e,s=i/e,A=o/e,l=r<0?1:0;switch(l+=a<0?l+1:l,l+=s<0?l+1:l,l+=A<0?l+1:l,l){case 0:return vc(r,a,s,A);case 1:return hp(r,a,s,A);case 2:return hp(r,a,s,A);case 3:return vc(r,a,s,A);case 4:return vc(r,a,s,A);case 5:return hp(r,a,s,A);case 6:return vc(r,a,s,A);case 7:return vc(r,a,s,A);case 8:return hp(r,a,s,A);case 9:return vc(r,a,s,A);case 10:return vc(r,a,s,A);case 11:return hp(r,a,s,A);case 12:return vc(r,a,s,A);case 13:return vc(r,a,s,A);case 14:return vc(r,a,s,A);case 15:return vc(r,a,s,A);default:return}};var $R=eB;function WE(e,t){t=f.clone(t??f.ZERO),f.equals(t,f.ZERO)||f.normalize(t,t),this.origin=f.clone(e??f.ZERO),this.direction=t}WE.clone=function(e,t){if(c(e))return c(t)?(t.origin=f.clone(e.origin),t.direction=f.clone(e.direction),t):new WE(e.origin,e.direction)};WE.getPoint=function(e,t,n){return c(n)||(n=new f),n=f.multiplyByScalar(e.direction,t,n),f.add(e.origin,n,n)};var ai=WE;var Si={};Si.rayPlane=function(e,t,n){c(n)||(n=new f);let i=e.origin,o=e.direction,r=t.normal,a=f.dot(r,o);if(Math.abs(a)<S.EPSILON15)return;let s=(-t.distance-f.dot(r,i))/a;if(!(s<0))return n=f.multiplyByScalar(o,s,n),f.add(i,n,n)};var sJ=new f,cJ=new f,sv=new f,ev=new f,tv=new f;Si.rayTriangleParametric=function(e,t,n,i,o){o=o??!1;let r=e.origin,a=e.direction,s=f.subtract(n,t,sJ),A=f.subtract(i,t,cJ),l=f.cross(a,A,sv),d=f.dot(s,l),m,p,g,h,C;if(o){if(d<S.EPSILON6||(m=f.subtract(r,t,ev),g=f.dot(m,l),g<0||g>d)||(p=f.cross(m,s,tv),h=f.dot(a,p),h<0||g+h>d))return;C=f.dot(A,p)/d}else{if(Math.abs(d)<S.EPSILON6)return;let _=1/d;if(m=f.subtract(r,t,ev),g=f.dot(m,l)*_,g<0||g>1||(p=f.cross(m,s,tv),h=f.dot(a,p)*_,h<0||g+h>1))return;C=f.dot(A,p)*_}return C};Si.rayTriangle=function(e,t,n,i,o,r){let a=Si.rayTriangleParametric(e,t,n,i,o);if(!(!c(a)||a<0))return c(r)||(r=new f),f.multiplyByScalar(e.direction,a,r),f.add(e.origin,r,r)};var AJ=new ai;Si.lineSegmentTriangle=function(e,t,n,i,o,r,a){let s=AJ;f.clone(e,s.origin),f.subtract(t,e,s.direction),f.normalize(s.direction,s.direction);let A=Si.rayTriangleParametric(s,n,i,o,r);if(!(!c(A)||A<0||A>f.distance(e,t)))return c(a)||(a=new f),f.multiplyByScalar(s.direction,A,a),f.add(s.origin,a,a)};function lJ(e,t,n,i){let o=t*t-4*e*n;if(o<0)return;if(o>0){let a=1/(2*e),s=Math.sqrt(o),A=(-t+s)*a,l=(-t-s)*a;return A<l?(i.root0=A,i.root1=l):(i.root0=l,i.root1=A),i}let r=-t/(2*e);if(r!==0)return i.root0=i.root1=r,i}var uJ={root0:0,root1:0};function cv(e,t,n){c(n)||(n=new Vs);let i=e.origin,o=e.direction,r=t.center,a=t.radius*t.radius,s=f.subtract(i,r,sv),A=f.dot(o,o),l=2*f.dot(o,s),d=f.magnitudeSquared(s)-a,m=lJ(A,l,d,uJ);if(c(m))return n.start=m.root0,n.stop=m.root1,n}Si.raySphere=function(e,t,n){if(n=cv(e,t,n),!(!c(n)||n.stop<0))return n.start=Math.max(n.start,0),n};var fJ=new ai;Si.lineSegmentSphere=function(e,t,n,i){let o=fJ;f.clone(e,o.origin);let r=f.subtract(t,e,o.direction),a=f.magnitude(r);if(f.normalize(r,r),i=cv(o,n,i),!(!c(i)||i.stop<0||i.start>a))return i.start=Math.max(i.start,0),i.stop=Math.min(i.stop,a),i};var dJ=new f,hJ=new f;Si.rayEllipsoid=function(e,t){let n=t.oneOverRadii,i=f.multiplyComponents(n,e.origin,dJ),o=f.multiplyComponents(n,e.direction,hJ),r=f.magnitudeSquared(i),a=f.dot(i,o),s,A,l,d,m;if(r>1){if(a>=0)return;let p=a*a;if(s=r-1,A=f.magnitudeSquared(o),l=A*s,p<l)return;if(p>l){d=a*a-l,m=-a+Math.sqrt(d);let h=m/A,C=s/m;return h<C?new Vs(h,C):{start:C,stop:h}}let g=Math.sqrt(s/A);return new Vs(g,g)}else if(r<1)return s=r-1,A=f.magnitudeSquared(o),l=A*s,d=a*a-l,m=-a+Math.sqrt(d),new Vs(0,m/A);if(a<0)return A=f.magnitudeSquared(o),new Vs(0,-a/A)};function zf(e,t,n){let i=e+t;return S.sign(e)!==S.sign(t)&&Math.abs(i/Math.max(Math.abs(e),Math.abs(t)))<n?0:i}Si.quadraticVectorExpression=function(e,t,n,i,o){let r=i*i,a=o*o,s=(e[ne.COLUMN1ROW1]-e[ne.COLUMN2ROW2])*a,A=o*(i*zf(e[ne.COLUMN1ROW0],e[ne.COLUMN0ROW1],S.EPSILON15)+t.y),l=e[ne.COLUMN0ROW0]*r+e[ne.COLUMN2ROW2]*a+i*t.x+n,d=a*zf(e[ne.COLUMN2ROW1],e[ne.COLUMN1ROW2],S.EPSILON15),m=o*(i*zf(e[ne.COLUMN2ROW0],e[ne.COLUMN0ROW2])+t.z),p,g=[];if(m===0&&d===0){if(p=js.computeRealRoots(s,A,l),p.length===0)return g;let M=p[0],N=Math.sqrt(Math.max(1-M*M,0));if(g.push(new f(i,o*M,o*-N)),g.push(new f(i,o*M,o*N)),p.length===2){let O=p[1],u=Math.sqrt(Math.max(1-O*O,0));g.push(new f(i,o*O,o*-u)),g.push(new f(i,o*O,o*u))}return g}let h=m*m,C=d*d,_=s*s,I=m*d,b=_+C,x=2*(A*s+I),T=2*l*s+A*A-C+h,w=2*(l*A-I),R=l*l-h;if(b===0&&x===0&&T===0&&w===0)return g;p=$R.computeRealRoots(b,x,T,w,R);let z=p.length;if(z===0)return g;for(let M=0;M<z;++M){let N=p[M],O=N*N,u=Math.max(1-O,0),E=Math.sqrt(u),y;S.sign(s)===S.sign(l)?y=zf(s*O+l,A*N,S.EPSILON12):S.sign(l)===S.sign(A*N)?y=zf(s*O,A*N+l,S.EPSILON12):y=zf(s*O+A*N,l,S.EPSILON12);let B=zf(d*N,m,S.EPSILON15),D=y*B;D<0?g.push(new f(i,o*N,o*E)):D>0?g.push(new f(i,o*N,o*-E)):E!==0?(g.push(new f(i,o*N,o*-E)),g.push(new f(i,o*N,o*E)),++M):g.push(new f(i,o*N,o*E))}return g};var tB=new f,nv=new f,iv=new f,qE=new f,mJ=new f,pJ=new ne,gJ=new ne,CJ=new ne,EJ=new ne,_J=new ne,ov=new ne,rv=new ne,av=new f,IJ=new f,yJ=new ue;Si.grazingAltitudeLocation=function(e,t){let n=e.origin,i=e.direction;if(!f.equals(n,f.ZERO)){let R=t.geodeticSurfaceNormal(n,tB);if(f.dot(i,R)>=0)return n}let o=c(this.rayEllipsoid(e,t)),r=t.transformPositionToScaledSpace(i,tB),a=f.normalize(r,r),s=f.mostOrthogonalAxis(r,qE),A=f.normalize(f.cross(s,a,nv),nv),l=f.normalize(f.cross(a,A,iv),iv),d=pJ;d[0]=a.x,d[1]=a.y,d[2]=a.z,d[3]=A.x,d[4]=A.y,d[5]=A.z,d[6]=l.x,d[7]=l.y,d[8]=l.z;let m=ne.transpose(d,gJ),p=ne.fromScale(t.radii,CJ),g=ne.fromScale(t.oneOverRadii,EJ),h=_J;h[0]=0,h[1]=-i.z,h[2]=i.y,h[3]=i.z,h[4]=0,h[5]=-i.x,h[6]=-i.y,h[7]=i.x,h[8]=0;let C=ne.multiply(ne.multiply(m,g,ov),h,ov),_=ne.multiply(ne.multiply(C,p,rv),d,rv),I=ne.multiplyByVector(C,n,mJ),b=Si.quadraticVectorExpression(_,f.negate(I,tB),0,0,1),x,T,w=b.length;if(w>0){let R=f.clone(f.ZERO,IJ),z=Number.NEGATIVE_INFINITY;for(let N=0;N<w;++N){x=ne.multiplyByVector(p,ne.multiplyByVector(d,b[N],av),av);let O=f.normalize(f.subtract(x,n,qE),qE),u=f.dot(O,i);u>z&&(z=u,R=f.clone(x,R))}let M=t.cartesianToCartographic(R,yJ);return z=S.clamp(z,0,1),T=f.magnitude(f.subtract(R,n,qE))*Math.sqrt(1-z*z),T=o?-T:T,M.height=T,t.cartographicToCartesian(M,new f)}};var bJ=new f;Si.lineSegmentPlane=function(e,t,n,i){c(i)||(i=new f);let o=f.subtract(t,e,bJ),r=n.normal,a=f.dot(r,o);if(Math.abs(a)<S.EPSILON6)return;let s=f.dot(r,e),A=-(n.distance+s)/a;if(!(A<0||A>1))return f.multiplyByScalar(o,A,i),f.add(e,i,i),i};Si.trianglePlaneIntersection=function(e,t,n,i){let o=i.normal,r=i.distance,a=f.dot(o,e)+r<0,s=f.dot(o,t)+r<0,A=f.dot(o,n)+r<0,l=0;l+=a?1:0,l+=s?1:0,l+=A?1:0;let d,m;if((l===1||l===2)&&(d=new f,m=new f),l===1){if(a)return Si.lineSegmentPlane(e,t,i,d),Si.lineSegmentPlane(e,n,i,m),{positions:[e,t,n,d,m],indices:[0,3,4,1,2,4,1,4,3]};if(s)return Si.lineSegmentPlane(t,n,i,d),Si.lineSegmentPlane(t,e,i,m),{positions:[e,t,n,d,m],indices:[1,3,4,2,0,4,2,4,3]};if(A)return Si.lineSegmentPlane(n,e,i,d),Si.lineSegmentPlane(n,t,i,m),{positions:[e,t,n,d,m],indices:[2,3,4,0,1,4,0,4,3]}}else if(l===2)if(a)if(s){if(!A)return Si.lineSegmentPlane(e,n,i,d),Si.lineSegmentPlane(t,n,i,m),{positions:[e,t,n,d,m],indices:[0,1,4,0,4,3,2,3,4]}}else return Si.lineSegmentPlane(n,t,i,d),Si.lineSegmentPlane(e,t,i,m),{positions:[e,t,n,d,m],indices:[2,0,4,2,4,3,1,3,4]};else return Si.lineSegmentPlane(t,e,i,d),Si.lineSegmentPlane(n,e,i,m),{positions:[e,t,n,d,m],indices:[1,2,4,1,4,3,0,3,4]}};var en=Si;function tr(e,t){this.normal=f.clone(e),this.distance=t}tr.fromPointNormal=function(e,t,n){let i=-f.dot(t,e);return c(n)?(f.clone(t,n.normal),n.distance=i,n):new tr(t,i)};var BJ=new f;tr.fromCartesian4=function(e,t){let n=f.fromCartesian4(e,BJ),i=e.w;return c(t)?(f.clone(n,t.normal),t.distance=i,t):new tr(n,i)};tr.getPointDistance=function(e,t){return f.dot(e.normal,t)+e.distance};var xJ=new f;tr.projectPointOntoPlane=function(e,t,n){c(n)||(n=new f);let i=tr.getPointDistance(e,t),o=f.multiplyByScalar(e.normal,i,xJ);return f.subtract(t,o,n)};var TJ=new Q,SJ=new re,wJ=new f;tr.transform=function(e,t,n){let i=e.normal,o=e.distance,r=Q.inverseTranspose(t,TJ),a=re.fromElements(i.x,i.y,i.z,o,SJ);a=Q.multiplyByVector(r,a,a);let s=f.fromCartesian4(a,wJ);return a=re.divideByScalar(a,f.magnitude(s),a),tr.fromCartesian4(a,n)};tr.clone=function(e,t){return c(t)?(f.clone(e.normal,t.normal),t.distance=e.distance,t):new tr(e.normal,e.distance)};tr.equals=function(e,t){return e.distance===t.distance&&f.equals(e.normal,t.normal)};tr.ORIGIN_XY_PLANE=Object.freeze(new tr(f.UNIT_Z,0));tr.ORIGIN_YZ_PLANE=Object.freeze(new tr(f.UNIT_X,0));tr.ORIGIN_ZX_PLANE=Object.freeze(new tr(f.UNIT_Y,0));var Ze=tr;var nB={};nB.calculateACMR=function(e){e=e??G.EMPTY_OBJECT;let t=e.indices,n=e.maximumIndex,i=e.cacheSize??24,o=t.length;if(!c(n)){n=0;let s=0,A=t[s];for(;s<o;)A>n&&(n=A),++s,A=t[s]}let r=[];for(let s=0;s<n+1;s++)r[s]=0;let a=i+1;for(let s=0;s<o;++s)a-r[t[s]]>i&&(r[t[s]]=a,++a);return(a-i+1)/(o/3)};nB.tipsify=function(e){e=e??G.EMPTY_OBJECT;let t=e.indices,n=e.maximumIndex,i=e.cacheSize??24,o;function r(u,E,y,B){for(;E.length>=1;){let D=E[E.length-1];if(E.splice(E.length-1,1),u[D].numLiveTriangles>0)return D}for(;o<B;){if(u[o].numLiveTriangles>0)return++o,o-1;++o}return-1}function a(u,E,y,B,D,v,F){let P=-1,U,k=-1,j=0;for(;j<y.length;){let q=y[j];B[q].numLiveTriangles&&(U=0,D-B[q].timeStamp+2*B[q].numLiveTriangles<=E&&(U=D-B[q].timeStamp),(U>k||k===-1)&&(k=U,P=q)),++j}return P===-1?r(B,v,u,F):P}let s=t.length,A=0,l=0,d=t[l],m=s;if(c(n))A=n+1;else{for(;l<m;)d>A&&(A=d),++l,d=t[l];if(A===-1)return 0;++A}let p=[],g;for(g=0;g<A;g++)p[g]={numLiveTriangles:0,timeStamp:0,vertexTriangles:[]};l=0;let h=0;for(;l<m;)p[t[l]].vertexTriangles.push(h),++p[t[l]].numLiveTriangles,p[t[l+1]].vertexTriangles.push(h),++p[t[l+1]].numLiveTriangles,p[t[l+2]].vertexTriangles.push(h),++p[t[l+2]].numLiveTriangles,++h,l+=3;let C=0,_=i+1;o=1;let I=[],b=[],x,T,w=0,R=[],z=s/3,M=[];for(g=0;g<z;g++)M[g]=!1;let N,O;for(;C!==-1;){I=[],T=p[C],O=T.vertexTriangles.length;for(let u=0;u<O;++u)if(h=T.vertexTriangles[u],!M[h]){M[h]=!0,l=h+h+h;for(let E=0;E<3;++E)N=t[l],I.push(N),b.push(N),R[w]=N,++w,x=p[N],--x.numLiveTriangles,_-x.timeStamp>i&&(x.timeStamp=_,++_),++l}C=a(t,i,I,p,_,b,A)}return R};var Av=nB;var da={};function t_(e,t,n,i,o){e[t++]=n,e[t++]=i,e[t++]=i,e[t++]=o,e[t++]=o,e[t]=n}function DJ(e){let t=e.length,n=t/3*6,i=Ge.createTypedArray(t,n),o=0;for(let r=0;r<t;r+=3,o+=6)t_(i,o,e[r],e[r+1],e[r+2]);return i}function QJ(e){let t=e.length;if(t>=3){let n=(t-2)*6,i=Ge.createTypedArray(t,n);t_(i,0,e[0],e[1],e[2]);let o=6;for(let r=3;r<t;++r,o+=6)t_(i,o,e[r-1],e[r],e[r-2]);return i}return new Uint16Array}function RJ(e){if(e.length>0){let t=e.length-1,n=(t-1)*6,i=Ge.createTypedArray(t,n),o=e[0],r=0;for(let a=1;a<t;++a,r+=6)t_(i,r,o,e[a],e[a+1]);return i}return new Uint16Array}da.toWireframe=function(e){let t=e.indices;if(c(t)){switch(e.primitiveType){case Me.TRIANGLES:e.indices=DJ(t);break;case Me.TRIANGLE_STRIP:e.indices=QJ(t);break;case Me.TRIANGLE_FAN:e.indices=RJ(t);break}e.primitiveType=Me.LINES}return e};da.createLineSegmentsForVectors=function(e,t,n){t=t??"normal",n=n??1e4;let i=e.attributes.position.values,o=e.attributes[t].values,r=i.length,a=new Float64Array(2*r),s=0;for(let d=0;d<r;d+=3)a[s++]=i[d],a[s++]=i[d+1],a[s++]=i[d+2],a[s++]=i[d]+o[d]*n,a[s++]=i[d+1]+o[d+1]*n,a[s++]=i[d+2]+o[d+2]*n;let A,l=e.boundingSphere;return c(l)&&(A=new le(l.center,l.radius+n)),new Dt({attributes:{position:new rt({componentDatatype:V.DOUBLE,componentsPerAttribute:3,values:a})},primitiveType:Me.LINES,boundingSphere:A})};da.createAttributeLocations=function(e){let t=["position","positionHigh","positionLow","position3DHigh","position3DLow","position2DHigh","position2DLow","pickColor","normal","st","tangent","bitangent","extrudeDirection","compressedAttributes"],n=e.attributes,i={},o=0,r,a=t.length;for(r=0;r<a;++r){let s=t[r];c(n[s])&&(i[s]=o++)}for(let s in n)n.hasOwnProperty(s)&&!c(i[s])&&(i[s]=o++);return i};da.reorderForPreVertexCache=function(e){let t=Dt.computeNumberOfVertices(e),n=e.indices;if(c(n)){let i=new Int32Array(t);for(let p=0;p<t;p++)i[p]=-1;let o=n,r=o.length,a=Ge.createTypedArray(t,r),s=0,A=0,l=0,d;for(;s<r;)d=i[o[s]],d!==-1?a[A]=d:(d=o[s],i[d]=l,a[A]=l,++l),++s,++A;e.indices=a;let m=e.attributes;for(let p in m)if(m.hasOwnProperty(p)&&c(m[p])&&c(m[p].values)){let g=m[p],h=g.values,C=0,_=g.componentsPerAttribute,I=V.createTypedArray(g.componentDatatype,l*_);for(;C<t;){let b=i[C];if(b!==-1)for(let x=0;x<_;x++)I[_*b+x]=h[_*C+x];++C}g.values=I}}return e};da.reorderForPostVertexCache=function(e,t){let n=e.indices;if(e.primitiveType===Me.TRIANGLES&&c(n)){let i=n.length,o=0;for(let r=0;r<i;r++)n[r]>o&&(o=n[r]);e.indices=Av.tipsify({indices:n,maximumIndex:o,cacheSize:t})}return e};function lv(e){let t={};for(let n in e)if(e.hasOwnProperty(n)&&c(e[n])&&c(e[n].values)){let i=e[n];t[n]=new rt({componentDatatype:i.componentDatatype,componentsPerAttribute:i.componentsPerAttribute,normalize:i.normalize,values:[]})}return t}function vJ(e,t,n){for(let i in t)if(t.hasOwnProperty(i)&&c(t[i])&&c(t[i].values)){let o=t[i];for(let r=0;r<o.componentsPerAttribute;++r)e[i].values.push(o.values[n*o.componentsPerAttribute+r])}}da.fitToUnsignedShortIndices=function(e){let t=[],n=Dt.computeNumberOfVertices(e);if(c(e.indices)&&n>=S.SIXTY_FOUR_KILOBYTES){let i=[],o=[],r=0,a=lv(e.attributes),s=e.indices,A=s.length,l;e.primitiveType===Me.TRIANGLES?l=3:e.primitiveType===Me.LINES?l=2:e.primitiveType===Me.POINTS&&(l=1);for(let d=0;d<A;d+=l){for(let m=0;m<l;++m){let p=s[d+m],g=i[p];c(g)||(g=r++,i[p]=g,vJ(a,e.attributes,p)),o.push(g)}r+l>=S.SIXTY_FOUR_KILOBYTES&&(t.push(new Dt({attributes:a,indices:o,primitiveType:e.primitiveType,boundingSphere:e.boundingSphere,boundingSphereCV:e.boundingSphereCV})),i=[],o=[],r=0,a=lv(e.attributes))}o.length!==0&&t.push(new Dt({attributes:a,indices:o,primitiveType:e.primitiveType,boundingSphere:e.boundingSphere,boundingSphereCV:e.boundingSphereCV}))}else t.push(e);return t};var uv=new f,MJ=new ue;da.projectTo2D=function(e,t,n,i,o){let r=e.attributes[t];o=c(o)?o:new Ai;let a=o.ellipsoid,s=r.values,A=new Float64Array(s.length),l=0;for(let d=0;d<s.length;d+=3){let m=f.fromArray(s,d,uv),p=a.cartesianToCartographic(m,MJ),g=o.project(p,uv);A[l++]=g.x,A[l++]=g.y,A[l++]=g.z}return e.attributes[n]=r,e.attributes[i]=new rt({componentDatatype:V.DOUBLE,componentsPerAttribute:3,values:A}),delete e.attributes[t],e};var iB={high:0,low:0};da.encodeAttribute=function(e,t,n,i){let o=e.attributes[t],r=o.values,a=r.length,s=new Float32Array(a),A=new Float32Array(a);for(let d=0;d<a;++d)Cn.encode(r[d],iB),s[d]=iB.high,A[d]=iB.low;let l=o.componentsPerAttribute;return e.attributes[n]=new rt({componentDatatype:V.FLOAT,componentsPerAttribute:l,values:s}),e.attributes[i]=new rt({componentDatatype:V.FLOAT,componentsPerAttribute:l,values:A}),delete e.attributes[t],e};var Pc=new f;function oB(e,t){if(c(t)){let n=t.values,i=n.length;for(let o=0;o<i;o+=3)f.unpack(n,o,Pc),Q.multiplyByPoint(e,Pc,Pc),f.pack(Pc,n,o)}}function rB(e,t){if(c(t)){let n=t.values,i=n.length;for(let o=0;o<i;o+=3)f.unpack(n,o,Pc),ne.multiplyByVector(e,Pc,Pc),Pc=f.normalize(Pc,Pc),f.pack(Pc,n,o)}}var JE=new Q,KE=new ne;da.transformToWorldCoordinates=function(e){let t=e.modelMatrix;if(Q.equals(t,Q.IDENTITY))return e;let n=e.geometry.attributes;oB(t,n.position),oB(t,n.prevPosition),oB(t,n.nextPosition),(c(n.normal)||c(n.tangent)||c(n.bitangent))&&(Q.inverse(t,JE),Q.transpose(JE,JE),Q.getMatrix3(JE,KE),rB(KE,n.normal),rB(KE,n.tangent),rB(KE,n.bitangent));let i=e.geometry.boundingSphere;return c(i)&&(e.geometry.boundingSphere=le.transform(i,t,i)),e.modelMatrix=Q.clone(Q.IDENTITY),e};function PJ(e,t){let n=e.length,i={},o=e[0][t].attributes,r;for(r in o)if(o.hasOwnProperty(r)&&c(o[r])&&c(o[r].values)){let a=o[r],s=a.values.length,A=!0;for(let l=1;l<n;++l){let d=e[l][t].attributes[r];if(!c(d)||a.componentDatatype!==d.componentDatatype||a.componentsPerAttribute!==d.componentsPerAttribute||a.normalize!==d.normalize){A=!1;break}s+=d.values.length}A&&(i[r]=new rt({componentDatatype:a.componentDatatype,componentsPerAttribute:a.componentsPerAttribute,normalize:a.normalize,values:V.createTypedArray(a.componentDatatype,s)}))}return i}var NJ=new f;function aB(e,t){let n=e.length,i,o,r,a,s=e[0].modelMatrix,A=c(e[0][t].indices),l=e[0][t].primitiveType,d=PJ(e,t),m,p,g;for(i in d)if(d.hasOwnProperty(i))for(m=d[i].values,a=0,o=0;o<n;++o)for(p=e[o][t].attributes[i].values,g=p.length,r=0;r<g;++r)m[a++]=p[r];let h;if(A){let b=0;for(o=0;o<n;++o)b+=e[o][t].indices.length;let x=Dt.computeNumberOfVertices(new Dt({attributes:d,primitiveType:Me.POINTS})),T=Ge.createTypedArray(x,b),w=0,R=0;for(o=0;o<n;++o){let z=e[o][t].indices,M=z.length;for(a=0;a<M;++a)T[w++]=R+z[a];R+=Dt.computeNumberOfVertices(e[o][t])}h=T}let C=new f,_=0,I;for(o=0;o<n;++o){if(I=e[o][t].boundingSphere,!c(I)){C=void 0;break}f.add(I.center,C,C)}if(c(C))for(f.divideByScalar(C,n,C),o=0;o<n;++o){I=e[o][t].boundingSphere;let b=f.magnitude(f.subtract(I.center,C,NJ))+I.radius;b>_&&(_=b)}return new Dt({attributes:d,indices:h,primitiveType:l,boundingSphere:c(C)?new le(C,_):void 0})}da.combineInstances=function(e){let t=[],n=[],i=e.length;for(let r=0;r<i;++r){let a=e[r];c(a.geometry)?t.push(a):c(a.westHemisphereGeometry)&&c(a.eastHemisphereGeometry)&&n.push(a)}let o=[];return t.length>0&&o.push(aB(t,"geometry")),n.length>0&&(o.push(aB(n,"westHemisphereGeometry")),o.push(aB(n,"eastHemisphereGeometry"))),o};var Ys=new f,mp=new f,Ch=new f,Eh=new f;da.computeNormal=function(e){let t=e.indices,n=e.attributes,i=n.position.values,o=n.position.values.length/3,r=t.length,a=new Array(o),s=new Array(r/3),A=new Array(r),l;for(l=0;l<o;l++)a[l]={indexOffset:0,count:0,currentCount:0};let d=0;for(l=0;l<r;l+=3){let h=t[l],C=t[l+1],_=t[l+2],I=h*3,b=C*3,x=_*3;mp.x=i[I],mp.y=i[I+1],mp.z=i[I+2],Ch.x=i[b],Ch.y=i[b+1],Ch.z=i[b+2],Eh.x=i[x],Eh.y=i[x+1],Eh.z=i[x+2],a[h].count++,a[C].count++,a[_].count++,f.subtract(Ch,mp,Ch),f.subtract(Eh,mp,Eh),s[d]=f.cross(Ch,Eh,new f),d++}let m=0;for(l=0;l<o;l++)a[l].indexOffset+=m,m+=a[l].count;d=0;let p;for(l=0;l<r;l+=3){p=a[t[l]];let h=p.indexOffset+p.currentCount;A[h]=d,p.currentCount++,p=a[t[l+1]],h=p.indexOffset+p.currentCount,A[h]=d,p.currentCount++,p=a[t[l+2]],h=p.indexOffset+p.currentCount,A[h]=d,p.currentCount++,d++}let g=new Float32Array(o*3);for(l=0;l<o;l++){let h=l*3;if(p=a[l],f.clone(f.ZERO,Ys),p.count>0){for(d=0;d<p.count;d++)f.add(Ys,s[A[p.indexOffset+d]],Ys);f.equalsEpsilon(f.ZERO,Ys,S.EPSILON10)&&f.clone(s[A[p.indexOffset]],Ys)}f.equalsEpsilon(f.ZERO,Ys,S.EPSILON10)&&(Ys.z=1),f.normalize(Ys,Ys),g[h]=Ys.x,g[h+1]=Ys.y,g[h+2]=Ys.z}return e.attributes.normal=new rt({componentDatatype:V.FLOAT,componentsPerAttribute:3,values:g}),e};var LJ=new f,fv=new f,FJ=new f;da.computeTangentAndBitangent=function(e){let t=e.attributes,n=e.indices,i=e.attributes.position.values,o=e.attributes.normal.values,r=e.attributes.st.values,a=e.attributes.position.values.length/3,s=n.length,A=new Array(a*3),l;for(l=0;l<A.length;l++)A[l]=0;let d,m,p;for(l=0;l<s;l+=3){let C=n[l],_=n[l+1],I=n[l+2];d=C*3,m=_*3,p=I*3;let b=C*2,x=_*2,T=I*2,w=i[d],R=i[d+1],z=i[d+2],M=r[b],N=r[b+1],O=r[x+1]-N,u=r[T+1]-N,E=1/((r[x]-M)*u-(r[T]-M)*O),y=(u*(i[m]-w)-O*(i[p]-w))*E,B=(u*(i[m+1]-R)-O*(i[p+1]-R))*E,D=(u*(i[m+2]-z)-O*(i[p+2]-z))*E;A[d]+=y,A[d+1]+=B,A[d+2]+=D,A[m]+=y,A[m+1]+=B,A[m+2]+=D,A[p]+=y,A[p+1]+=B,A[p+2]+=D}let g=new Float32Array(a*3),h=new Float32Array(a*3);for(l=0;l<a;l++){d=l*3,m=d+1,p=d+2;let C=f.fromArray(o,d,LJ),_=f.fromArray(A,d,FJ),I=f.dot(C,_);f.multiplyByScalar(C,I,fv),f.normalize(f.subtract(_,fv,_),_),g[d]=_.x,g[m]=_.y,g[p]=_.z,f.normalize(f.cross(C,_,_),_),h[d]=_.x,h[m]=_.y,h[p]=_.z}return e.attributes.tangent=new rt({componentDatatype:V.FLOAT,componentsPerAttribute:3,values:g}),e.attributes.bitangent=new rt({componentDatatype:V.FLOAT,componentsPerAttribute:3,values:h}),e};var pp=new L,Mc=new f,dv=new f,hv=new f,XE=new L;da.compressVertices=function(e){let t=e.attributes.extrudeDirection,n,i;if(c(t)){let R=t.values;i=R.length/3;let z=new Float32Array(i*2),M=0;for(n=0;n<i;++n){if(f.fromArray(R,n*3,Mc),f.equals(Mc,f.ZERO)){M+=2;continue}XE=Yt.octEncodeInRange(Mc,65535,XE),z[M++]=XE.x,z[M++]=XE.y}return e.attributes.compressedAttributes=new rt({componentDatatype:V.FLOAT,componentsPerAttribute:2,values:z}),delete e.attributes.extrudeDirection,e}let o=e.attributes.normal,r=e.attributes.st,a=c(o),s=c(r);if(!a&&!s)return e;let A=e.attributes.tangent,l=e.attributes.bitangent,d=c(A),m=c(l),p,g,h,C;a&&(p=o.values),s&&(g=r.values),d&&(h=A.values),m&&(C=l.values),i=(a?p.length:g.length)/(a?3:2);let b=i,x=s&&a?2:1;x+=d||m?1:0,b*=x;let T=new Float32Array(b),w=0;for(n=0;n<i;++n){s&&(L.fromArray(g,n*2,pp),T[w++]=Yt.compressTextureCoordinates(pp));let R=n*3;a&&c(h)&&c(C)?(f.fromArray(p,R,Mc),f.fromArray(h,R,dv),f.fromArray(C,R,hv),Yt.octPack(Mc,dv,hv,pp),T[w++]=pp.x,T[w++]=pp.y):(a&&(f.fromArray(p,R,Mc),T[w++]=Yt.octEncodeFloat(Mc)),d&&(f.fromArray(h,R,Mc),T[w++]=Yt.octEncodeFloat(Mc)),m&&(f.fromArray(C,R,Mc),T[w++]=Yt.octEncodeFloat(Mc)))}return e.attributes.compressedAttributes=new rt({componentDatatype:V.FLOAT,componentsPerAttribute:x,values:T}),a&&delete e.attributes.normal,s&&delete e.attributes.st,m&&delete e.attributes.bitangent,d&&delete e.attributes.tangent,e};function OJ(e){if(c(e.indices))return e;let t=Dt.computeNumberOfVertices(e),n=Ge.createTypedArray(t,t);for(let i=0;i<t;++i)n[i]=i;return e.indices=n,e}function kJ(e){let t=Dt.computeNumberOfVertices(e),n=Ge.createTypedArray(t,(t-2)*3);n[0]=1,n[1]=0,n[2]=2;let i=3;for(let o=3;o<t;++o)n[i++]=o-1,n[i++]=0,n[i++]=o;return e.indices=n,e.primitiveType=Me.TRIANGLES,e}function UJ(e){let t=Dt.computeNumberOfVertices(e),n=Ge.createTypedArray(t,(t-2)*3);n[0]=0,n[1]=1,n[2]=2,t>3&&(n[3]=0,n[4]=2,n[5]=3);let i=6;for(let o=3;o<t-1;o+=2)n[i++]=o,n[i++]=o-1,n[i++]=o+1,o+2<t&&(n[i++]=o,n[i++]=o+1,n[i++]=o+2);return e.indices=n,e.primitiveType=Me.TRIANGLES,e}function zJ(e){if(c(e.indices))return e;let t=Dt.computeNumberOfVertices(e),n=Ge.createTypedArray(t,t);for(let i=0;i<t;++i)n[i]=i;return e.indices=n,e}function GJ(e){let t=Dt.computeNumberOfVertices(e),n=Ge.createTypedArray(t,(t-1)*2);n[0]=0,n[1]=1;let i=2;for(let o=2;o<t;++o)n[i++]=o-1,n[i++]=o;return e.indices=n,e.primitiveType=Me.LINES,e}function HJ(e){let t=Dt.computeNumberOfVertices(e),n=Ge.createTypedArray(t,t*2);n[0]=0,n[1]=1;let i=2;for(let o=2;o<t;++o)n[i++]=o-1,n[i++]=o;return n[i++]=t-1,n[i]=0,e.indices=n,e.primitiveType=Me.LINES,e}function VJ(e){switch(e.primitiveType){case Me.TRIANGLE_FAN:return kJ(e);case Me.TRIANGLE_STRIP:return UJ(e);case Me.TRIANGLES:return OJ(e);case Me.LINE_STRIP:return GJ(e);case Me.LINE_LOOP:return HJ(e);case Me.LINES:return zJ(e)}return e}function yu(e,t){Math.abs(e.y)<S.EPSILON6&&(t?e.y=-S.EPSILON6:e.y=S.EPSILON6)}function jJ(e,t,n){if(e.y!==0&&t.y!==0&&n.y!==0){yu(e,e.y<0),yu(t,t.y<0),yu(n,n.y<0);return}let i=Math.abs(e.y),o=Math.abs(t.y),r=Math.abs(n.y),a;i>o?i>r?a=S.sign(e.y):a=S.sign(n.y):o>r?a=S.sign(t.y):a=S.sign(n.y);let s=a<0;yu(e,s),yu(t,s),yu(n,s)}var mv=new f;function Ws(e,t,n,i){f.add(e,f.multiplyByScalar(f.subtract(t,e,mv),e.y/(e.y-t.y),mv),n),f.clone(n,i),yu(n,!0),yu(i,!1)}var Gf=new f,Hf=new f,Vf=new f,jf=new f,sB={positions:new Array(7),indices:new Array(9)};function YJ(e,t,n){if(e.x>=0||t.x>=0||n.x>=0)return;jJ(e,t,n);let i=e.y<0,o=t.y<0,r=n.y<0,a=0;a+=i?1:0,a+=o?1:0,a+=r?1:0;let s=sB.indices;a===1?(s[1]=3,s[2]=4,s[5]=6,s[7]=6,s[8]=5,i?(Ws(e,t,Gf,Vf),Ws(e,n,Hf,jf),s[0]=0,s[3]=1,s[4]=2,s[6]=1):o?(Ws(t,n,Gf,Vf),Ws(t,e,Hf,jf),s[0]=1,s[3]=2,s[4]=0,s[6]=2):r&&(Ws(n,e,Gf,Vf),Ws(n,t,Hf,jf),s[0]=2,s[3]=0,s[4]=1,s[6]=0)):a===2&&(s[2]=4,s[4]=4,s[5]=3,s[7]=5,s[8]=6,i?o?r||(Ws(n,e,Gf,Vf),Ws(n,t,Hf,jf),s[0]=0,s[1]=1,s[3]=0,s[6]=2):(Ws(t,n,Gf,Vf),Ws(t,e,Hf,jf),s[0]=2,s[1]=0,s[3]=2,s[6]=1):(Ws(e,t,Gf,Vf),Ws(e,n,Hf,jf),s[0]=1,s[1]=2,s[3]=1,s[6]=0));let A=sB.positions;return A[0]=e,A[1]=t,A[2]=n,A.length=3,(a===1||a===2)&&(A[3]=Gf,A[4]=Hf,A[5]=Vf,A[6]=jf,A.length=7),sB}function pv(e,t){let n=e.attributes;if(n.position.values.length===0)return;for(let o in n)if(n.hasOwnProperty(o)&&c(n[o])&&c(n[o].values)){let r=n[o];r.values=V.createTypedArray(r.componentDatatype,r.values)}let i=Dt.computeNumberOfVertices(e);return e.indices=Ge.createTypedArray(i,e.indices),t&&(e.boundingSphere=le.fromVertices(n.position.values)),e}function Ih(e){let t=e.attributes,n={};for(let i in t)if(t.hasOwnProperty(i)&&c(t[i])&&c(t[i].values)){let o=t[i];n[i]=new rt({componentDatatype:o.componentDatatype,componentsPerAttribute:o.componentsPerAttribute,normalize:o.normalize,values:[]})}return new Dt({attributes:n,indices:[],primitiveType:e.primitiveType})}function uB(e,t,n){let i=c(e.geometry.boundingSphere);t=pv(t,i),n=pv(n,i),c(n)&&!c(t)?e.geometry=n:!c(n)&&c(t)?e.geometry=t:(e.westHemisphereGeometry=t,e.eastHemisphereGeometry=n,e.geometry=void 0)}function fB(e,t){let n=new e,i=new e,o=new e;return function(r,a,s,A,l,d,m,p){let g=e.fromArray(l,r*t,n),h=e.fromArray(l,a*t,i),C=e.fromArray(l,s*t,o);e.multiplyByScalar(g,A.x,g),e.multiplyByScalar(h,A.y,h),e.multiplyByScalar(C,A.z,C);let _=e.add(g,h,g);e.add(_,C,_),p&&e.normalize(_,_),e.pack(_,d,m*t)}}var WJ=fB(re,4),e_=fB(f,3),yv=fB(L,2),qJ=function(e,t,n,i,o,r,a){let s=o[e]*i.x,A=o[t]*i.y,l=o[n]*i.z;r[a]=s+A+l>S.EPSILON6?1:0},gp=new f,cB=new f,AB=new f,JJ=new f;function ZE(e,t,n,i,o,r,a,s,A,l,d,m,p,g,h,C){if(!c(r)&&!c(a)&&!c(s)&&!c(A)&&!c(l)&&g===0)return;let _=f.fromArray(o,e*3,gp),I=f.fromArray(o,t*3,cB),b=f.fromArray(o,n*3,AB),x=XR(i,_,I,b,JJ);if(c(x)){if(c(r)&&e_(e,t,n,x,r,m.normal.values,C,!0),c(l)){let T=f.fromArray(l,e*3,gp),w=f.fromArray(l,t*3,cB),R=f.fromArray(l,n*3,AB);f.multiplyByScalar(T,x.x,T),f.multiplyByScalar(w,x.y,w),f.multiplyByScalar(R,x.z,R);let z;!f.equals(T,f.ZERO)||!f.equals(w,f.ZERO)||!f.equals(R,f.ZERO)?(z=f.add(T,w,T),f.add(z,R,z),f.normalize(z,z)):(z=gp,z.x=0,z.y=0,z.z=0),f.pack(z,m.extrudeDirection.values,C*3)}if(c(d)&&qJ(e,t,n,x,d,m.applyOffset.values,C),c(a)&&e_(e,t,n,x,a,m.tangent.values,C,!0),c(s)&&e_(e,t,n,x,s,m.bitangent.values,C,!0),c(A)&&yv(e,t,n,x,A,m.st.values,C),g>0)for(let T=0;T<g;T++){let w=p[T];KJ(e,t,n,x,C,h[w],m[w])}}}function KJ(e,t,n,i,o,r,a){let s=r.componentsPerAttribute,A=r.values,l=a.values;switch(s){case 4:WJ(e,t,n,i,A,l,o,!1);break;case 3:e_(e,t,n,i,A,l,o,!1);break;case 2:yv(e,t,n,i,A,l,o,!1);break;default:l[o]=A[e]*i.x+A[t]*i.y+A[n]*i.z}}function gA(e,t,n,i,o,r){let a=e.position.values.length/3;if(o!==-1){let s=i[o],A=n[s];return A===-1?(n[s]=a,e.position.values.push(r.x,r.y,r.z),t.push(a),a):(t.push(A),A)}return e.position.values.push(r.x,r.y,r.z),t.push(a),a}var XJ={position:!0,normal:!0,bitangent:!0,tangent:!0,st:!0,extrudeDirection:!0,applyOffset:!0};function gv(e){let t=e.geometry,n=t.attributes,i=n.position.values,o=c(n.normal)?n.normal.values:void 0,r=c(n.bitangent)?n.bitangent.values:void 0,a=c(n.tangent)?n.tangent.values:void 0,s=c(n.st)?n.st.values:void 0,A=c(n.extrudeDirection)?n.extrudeDirection.values:void 0,l=c(n.applyOffset)?n.applyOffset.values:void 0,d=t.indices,m=[];for(let z in n)n.hasOwnProperty(z)&&!XJ[z]&&c(n[z])&&m.push(z);let p=m.length,g=Ih(t),h=Ih(t),C,_,I,b,x,T=[];T.length=i.length/3;let w=[];for(w.length=i.length/3,x=0;x<T.length;++x)T[x]=-1,w[x]=-1;let R=d.length;for(x=0;x<R;x+=3){let z=d[x],M=d[x+1],N=d[x+2],O=f.fromArray(i,z*3),u=f.fromArray(i,M*3),E=f.fromArray(i,N*3),y=YJ(O,u,E);if(c(y)&&y.positions.length>3){let B=y.positions,D=y.indices,v=D.length;for(let F=0;F<v;++F){let P=D[F],U=B[P];U.y<0?(C=h.attributes,_=h.indices,I=T):(C=g.attributes,_=g.indices,I=w),b=gA(C,_,I,d,P<3?x+P:-1,U),ZE(z,M,N,U,i,o,a,r,s,A,l,C,m,p,n,b)}}else c(y)&&(O=y.positions[0],u=y.positions[1],E=y.positions[2]),O.y<0?(C=h.attributes,_=h.indices,I=T):(C=g.attributes,_=g.indices,I=w),b=gA(C,_,I,d,x,O),ZE(z,M,N,O,i,o,a,r,s,A,l,C,m,p,n,b),b=gA(C,_,I,d,x+1,u),ZE(z,M,N,u,i,o,a,r,s,A,l,C,m,p,n,b),b=gA(C,_,I,d,x+2,E),ZE(z,M,N,E,i,o,a,r,s,A,l,C,m,p,n,b)}uB(e,h,g)}var bv=Ze.fromPointNormal(f.ZERO,f.UNIT_Y),ZJ=new f,$J=new f;function _h(e,t,n,i,o,r,a){if(!c(a))return;let s=f.fromArray(i,e*3,gp);f.equalsEpsilon(s,n,S.EPSILON10)?r.applyOffset.values[o]=a[e]:r.applyOffset.values[o]=a[t]}function Cv(e){let t=e.geometry,n=t.attributes,i=n.position.values,o=c(n.applyOffset)?n.applyOffset.values:void 0,r=t.indices,a=Ih(t),s=Ih(t),A,l=r.length,d=[];d.length=i.length/3;let m=[];for(m.length=i.length/3,A=0;A<d.length;++A)d[A]=-1,m[A]=-1;for(A=0;A<l;A+=2){let p=r[A],g=r[A+1],h=f.fromArray(i,p*3,gp),C=f.fromArray(i,g*3,cB),_;Math.abs(h.y)<S.EPSILON6&&(h.y<0?h.y=-S.EPSILON6:h.y=S.EPSILON6),Math.abs(C.y)<S.EPSILON6&&(C.y<0?C.y=-S.EPSILON6:C.y=S.EPSILON6);let I=a.attributes,b=a.indices,x=m,T=s.attributes,w=s.indices,R=d,z=en.lineSegmentPlane(h,C,bv,AB);if(c(z)){let M=f.multiplyByScalar(f.UNIT_Y,5*S.EPSILON9,ZJ);h.y<0&&(f.negate(M,M),I=s.attributes,b=s.indices,x=d,T=a.attributes,w=a.indices,R=m);let N=f.add(z,M,$J);_=gA(I,b,x,r,A,h),_h(p,g,h,i,_,I,o),_=gA(I,b,x,r,-1,N),_h(p,g,N,i,_,I,o),f.negate(M,M),f.add(z,M,N),_=gA(T,w,R,r,-1,N),_h(p,g,N,i,_,T,o),_=gA(T,w,R,r,A+1,C),_h(p,g,C,i,_,T,o)}else{let M,N,O;h.y<0?(M=s.attributes,N=s.indices,O=d):(M=a.attributes,N=a.indices,O=m),_=gA(M,N,O,r,A,h),_h(p,g,h,i,_,M,o),_=gA(M,N,O,r,A+1,C),_h(p,g,C,i,_,M,o)}}uB(e,s,a)}var Ev=new L,eK=new L,Bv=new f,xv=new f,lB=new f,tK=new f,nK=new f,iK=new f,_v=new re;function Iv(e){let t=e.attributes,n=t.position.values,i=t.prevPosition.values,o=t.nextPosition.values,r=n.length;for(let a=0;a<r;a+=3){let s=f.unpack(n,a,Bv);if(s.x>0)continue;let A=f.unpack(i,a,xv);(s.y<0&&A.y>0||s.y>0&&A.y<0)&&(a-3>0?(i[a]=n[a-3],i[a+1]=n[a-2],i[a+2]=n[a-1]):f.pack(s,i,a));let l=f.unpack(o,a,lB);(s.y<0&&l.y>0||s.y>0&&l.y<0)&&(a+3<r?(o[a]=n[a+3],o[a+1]=n[a+4],o[a+2]=n[a+5]):f.pack(s,o,a))}}var oK=5*S.EPSILON9,$E=S.EPSILON6;function rK(e){let t=e.geometry,n=t.attributes,i=n.position.values,o=n.prevPosition.values,r=n.nextPosition.values,a=n.expandAndWidth.values,s=c(n.st)?n.st.values:void 0,A=c(n.color)?n.color.values:void 0,l=Ih(t),d=Ih(t),m,p,g,h=!1,C=i.length/3;for(m=0;m<C;m+=4){let _=m,I=m+2,b=f.fromArray(i,_*3,Bv),x=f.fromArray(i,I*3,xv);if(Math.abs(b.y)<$E)for(b.y=$E*(x.y<0?-1:1),i[m*3+1]=b.y,i[(m+1)*3+1]=b.y,p=_*3;p<_*3+12;p+=3)o[p]=i[m*3],o[p+1]=i[m*3+1],o[p+2]=i[m*3+2];if(Math.abs(x.y)<$E)for(x.y=$E*(b.y<0?-1:1),i[(m+2)*3+1]=x.y,i[(m+3)*3+1]=x.y,p=_*3;p<_*3+12;p+=3)r[p]=i[(m+2)*3],r[p+1]=i[(m+2)*3+1],r[p+2]=i[(m+2)*3+2];let T=l.attributes,w=l.indices,R=d.attributes,z=d.indices,M=en.lineSegmentPlane(b,x,bv,tK);if(c(M)){h=!0;let N=f.multiplyByScalar(f.UNIT_Y,oK,nK);b.y<0&&(f.negate(N,N),T=d.attributes,w=d.indices,R=l.attributes,z=l.indices);let O=f.add(M,N,iK);T.position.values.push(b.x,b.y,b.z,b.x,b.y,b.z),T.position.values.push(O.x,O.y,O.z),T.position.values.push(O.x,O.y,O.z),T.prevPosition.values.push(o[_*3],o[_*3+1],o[_*3+2]),T.prevPosition.values.push(o[_*3+3],o[_*3+4],o[_*3+5]),T.prevPosition.values.push(b.x,b.y,b.z,b.x,b.y,b.z),T.nextPosition.values.push(O.x,O.y,O.z),T.nextPosition.values.push(O.x,O.y,O.z),T.nextPosition.values.push(O.x,O.y,O.z),T.nextPosition.values.push(O.x,O.y,O.z),f.negate(N,N),f.add(M,N,O),R.position.values.push(O.x,O.y,O.z),R.position.values.push(O.x,O.y,O.z),R.position.values.push(x.x,x.y,x.z,x.x,x.y,x.z),R.prevPosition.values.push(O.x,O.y,O.z),R.prevPosition.values.push(O.x,O.y,O.z),R.prevPosition.values.push(O.x,O.y,O.z),R.prevPosition.values.push(O.x,O.y,O.z),R.nextPosition.values.push(x.x,x.y,x.z,x.x,x.y,x.z),R.nextPosition.values.push(r[I*3],r[I*3+1],r[I*3+2]),R.nextPosition.values.push(r[I*3+3],r[I*3+4],r[I*3+5]);let u=L.fromArray(a,_*2,Ev),E=Math.abs(u.y);T.expandAndWidth.values.push(-1,E,1,E),T.expandAndWidth.values.push(-1,-E,1,-E),R.expandAndWidth.values.push(-1,E,1,E),R.expandAndWidth.values.push(-1,-E,1,-E);let y=f.magnitudeSquared(f.subtract(M,b,lB));if(y/=f.magnitudeSquared(f.subtract(x,b,lB)),c(A)){let B=re.fromArray(A,_*4,_v),D=re.fromArray(A,I*4,_v),v=S.lerp(B.x,D.x,y),F=S.lerp(B.y,D.y,y),P=S.lerp(B.z,D.z,y),U=S.lerp(B.w,D.w,y);for(p=_*4;p<_*4+8;++p)T.color.values.push(A[p]);for(T.color.values.push(v,F,P,U),T.color.values.push(v,F,P,U),R.color.values.push(v,F,P,U),R.color.values.push(v,F,P,U),p=I*4;p<I*4+8;++p)R.color.values.push(A[p])}if(c(s)){let B=L.fromArray(s,_*2,Ev),D=L.fromArray(s,(m+3)*2,eK),v=S.lerp(B.x,D.x,y);for(p=_*2;p<_*2+4;++p)T.st.values.push(s[p]);for(T.st.values.push(v,B.y),T.st.values.push(v,D.y),R.st.values.push(v,B.y),R.st.values.push(v,D.y),p=I*2;p<I*2+4;++p)R.st.values.push(s[p])}g=T.position.values.length/3-4,w.push(g,g+2,g+1),w.push(g+1,g+2,g+3),g=R.position.values.length/3-4,z.push(g,g+2,g+1),z.push(g+1,g+2,g+3)}else{let N,O;for(b.y<0?(N=d.attributes,O=d.indices):(N=l.attributes,O=l.indices),N.position.values.push(b.x,b.y,b.z),N.position.values.push(b.x,b.y,b.z),N.position.values.push(x.x,x.y,x.z),N.position.values.push(x.x,x.y,x.z),p=m*3;p<m*3+12;++p)N.prevPosition.values.push(o[p]),N.nextPosition.values.push(r[p]);for(p=m*2;p<m*2+8;++p)N.expandAndWidth.values.push(a[p]),c(s)&&N.st.values.push(s[p]);if(c(A))for(p=m*4;p<m*4+16;++p)N.color.values.push(A[p]);g=N.position.values.length/3-4,O.push(g,g+2,g+1),O.push(g+1,g+2,g+3)}}h&&(Iv(d),Iv(l)),uB(e,d,l)}da.splitLongitude=function(e){let t=e.geometry,n=t.boundingSphere;if(c(n)&&(n.center.x-n.radius>0||le.intersectPlane(n,Ze.ORIGIN_ZX_PLANE)!==bt.INTERSECTING))return e;if(t.geometryType!==cl.NONE)switch(t.geometryType){case cl.POLYLINES:rK(e);break;case cl.TRIANGLES:gv(e);break;case cl.LINES:Cv(e);break}else VJ(t),t.primitiveType===Me.TRIANGLES?gv(e):t.primitiveType===Me.LINES&&Cv(e);return e};var li=da;function Cp(e,t,n,i,o,r,a,s,A,l,d){this._context=e,this._texture=t,this._textureTarget=n,this._targetFace=i,this._pixelDatatype=a,this._internalFormat=o,this._pixelFormat=r,this._size=s,this._preMultiplyAlpha=A,this._flipY=l,this._initialized=d}Object.defineProperties(Cp.prototype,{pixelFormat:{get:function(){return this._pixelFormat}},pixelDatatype:{get:function(){return this._pixelDatatype}},_target:{get:function(){return this._targetFace}}});Cp.prototype.copyFrom=function(e){let{xOffset:t=0,yOffset:n=0,source:i,skipColorSpaceConversion:o=!1}=e,{width:r,height:a}=i,s=this._context._gl,A=this._textureTarget,l=this._targetFace;s.activeTexture(s.TEXTURE0),s.bindTexture(A,this._texture);let d=i.arrayBufferView,m=this._size,p=this._pixelFormat,g=this._internalFormat,h=this._pixelDatatype,C=this._preMultiplyAlpha,_=this._flipY,I=4;c(d)&&(I=_t.alignmentInBytes(p,h,r)),s.pixelStorei(s.UNPACK_ALIGNMENT,I),o?s.pixelStorei(s.UNPACK_COLORSPACE_CONVERSION_WEBGL,s.NONE):s.pixelStorei(s.UNPACK_COLORSPACE_CONVERSION_WEBGL,s.BROWSER_DEFAULT_WEBGL);let b=!1;if(!this._initialized){let x;t===0&&n===0&&r===m&&a===m?(c(d)?(s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),s.pixelStorei(s.UNPACK_FLIP_Y_WEBGL,!1),_&&(d=_t.flipY(d,p,h,m,m)),x=d):(s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,C),s.pixelStorei(s.UNPACK_FLIP_Y_WEBGL,_),x=i),b=!0):(s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),s.pixelStorei(s.UNPACK_FLIP_Y_WEBGL,!1),x=_t.createTypedArray(p,h,m,m)),s.texImage2D(l,0,g,m,m,0,p,mt.toWebGLConstant(h,this._context),x),this._initialized=!0}b||(c(d)?(s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),s.pixelStorei(s.UNPACK_FLIP_Y_WEBGL,!1),_&&(d=_t.flipY(d,p,h,r,a)),s.texSubImage2D(l,0,t,n,r,a,p,mt.toWebGLConstant(h,this._context),d)):(s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,C),s.pixelStorei(s.UNPACK_FLIP_Y_WEBGL,_),s.texSubImage2D(l,0,t,n,p,mt.toWebGLConstant(h,this._context),i))),s.bindTexture(A,null)};Cp.prototype.copyFromFramebuffer=function(e,t,n,i,o,r){e=e??0,t=t??0,n=n??0,i=i??0,o=o??this._size,r=r??this._size;let a=this._context._gl,s=this._textureTarget;a.activeTexture(a.TEXTURE0),a.bindTexture(s,this._texture),a.copyTexSubImage2D(this._targetFace,0,e,t,n,i,o,r),a.bindTexture(s,null),this._initialized=!0};Cp.prototype.copyMipmapFromFramebuffer=function(e,t,n,i,o){e=e??0,t=t??0,n=n??this._size,i=i??this._size,o=o??0;let r=this._context._gl,a=this._textureTarget;r.activeTexture(r.TEXTURE0),r.bindTexture(a,this._texture),r.copyTexImage2D(this._targetFace,o,this._internalFormat,e,t,n,i,0),r.bindTexture(a,null),this._initialized=!0};var Tv=Cp;var n_={DONT_CARE:W.DONT_CARE,FASTEST:W.FASTEST,NICEST:W.NICEST,validate:function(e){return e===n_.DONT_CARE||e===n_.FASTEST||e===n_.NICEST}},Yf=Object.freeze(n_);var i_={NEAREST:W.NEAREST,LINEAR:W.LINEAR};i_.validate=function(e){return e===i_.NEAREST||e===i_.LINEAR};var yo=Object.freeze(i_);var bu={NEAREST:W.NEAREST,LINEAR:W.LINEAR,NEAREST_MIPMAP_NEAREST:W.NEAREST_MIPMAP_NEAREST,LINEAR_MIPMAP_NEAREST:W.LINEAR_MIPMAP_NEAREST,NEAREST_MIPMAP_LINEAR:W.NEAREST_MIPMAP_LINEAR,LINEAR_MIPMAP_LINEAR:W.LINEAR_MIPMAP_LINEAR};bu.validate=function(e){return e===bu.NEAREST||e===bu.LINEAR||e===bu.NEAREST_MIPMAP_NEAREST||e===bu.LINEAR_MIPMAP_NEAREST||e===bu.NEAREST_MIPMAP_LINEAR||e===bu.LINEAR_MIPMAP_LINEAR};var Wt=Object.freeze(bu);var o_={CLAMP_TO_EDGE:W.CLAMP_TO_EDGE,REPEAT:W.REPEAT,MIRRORED_REPEAT:W.MIRRORED_REPEAT,validate:function(e){return e===o_.CLAMP_TO_EDGE||e===o_.REPEAT||e===o_.MIRRORED_REPEAT}},ei=Object.freeze(o_);function Ep(e){e=e??G.EMPTY_OBJECT;let{wrapR:t=ei.CLAMP_TO_EDGE,wrapS:n=ei.CLAMP_TO_EDGE,wrapT:i=ei.CLAMP_TO_EDGE,minificationFilter:o=Wt.LINEAR,magnificationFilter:r=yo.LINEAR,maximumAnisotropy:a=1}=e;this._wrapR=t,this._wrapS=n,this._wrapT=i,this._minificationFilter=o,this._magnificationFilter=r,this._maximumAnisotropy=a}Object.defineProperties(Ep.prototype,{wrapR:{get:function(){return this._wrapR}},wrapS:{get:function(){return this._wrapS}},wrapT:{get:function(){return this._wrapT}},minificationFilter:{get:function(){return this._minificationFilter}},magnificationFilter:{get:function(){return this._magnificationFilter}},maximumAnisotropy:{get:function(){return this._maximumAnisotropy}}});Ep.equals=function(e,t){return e===t||c(e)&&c(t)&&e._wrapR===t._wrapR&&e._wrapS===t._wrapS&&e._wrapT===t._wrapT&&e._minificationFilter===t._minificationFilter&&e._magnificationFilter===t._magnificationFilter&&e._maximumAnisotropy===t._maximumAnisotropy};Ep.NEAREST=Object.freeze(new Ep({wrapR:ei.CLAMP_TO_EDGE,wrapS:ei.CLAMP_TO_EDGE,wrapT:ei.CLAMP_TO_EDGE,minificationFilter:Wt.NEAREST,magnificationFilter:yo.NEAREST}));var nn=Ep;function aK(e,t,n,i){let o=c(t.vertexBuffer),r=c(t.value),a=t.value?t.value.length:t.componentsPerAttribute,s={index:t.index??n,enabled:t.enabled??!0,vertexBuffer:t.vertexBuffer,value:r?t.value.slice(0):void 0,componentsPerAttribute:a,componentDatatype:t.componentDatatype??V.FLOAT,normalize:t.normalize??!1,offsetInBytes:t.offsetInBytes??0,strideInBytes:t.strideInBytes??0,instanceDivisor:t.instanceDivisor??0};if(o)s.vertexAttrib=function(A){let l=this.index;A.bindBuffer(A.ARRAY_BUFFER,this.vertexBuffer._getBuffer()),A.vertexAttribPointer(l,this.componentsPerAttribute,this.componentDatatype,this.normalize,this.strideInBytes,this.offsetInBytes),A.enableVertexAttribArray(l),this.instanceDivisor>0&&(i.glVertexAttribDivisor(l,this.instanceDivisor),i._vertexAttribDivisors[l]=this.instanceDivisor,i._previousDrawInstanced=!0)},s.disableVertexAttribArray=function(A){A.disableVertexAttribArray(this.index),this.instanceDivisor>0&&i.glVertexAttribDivisor(n,0)};else{switch(s.componentsPerAttribute){case 1:s.vertexAttrib=function(A){A.vertexAttrib1fv(this.index,this.value)};break;case 2:s.vertexAttrib=function(A){A.vertexAttrib2fv(this.index,this.value)};break;case 3:s.vertexAttrib=function(A){A.vertexAttrib3fv(this.index,this.value)};break;case 4:s.vertexAttrib=function(A){A.vertexAttrib4fv(this.index,this.value)};break}s.disableVertexAttribArray=function(A){}}e.push(s)}function wv(e,t,n){for(let i=0;i<t.length;++i){let o=t[i];o.enabled&&o.vertexAttrib(e)}c(n)&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n._getBuffer())}function fl(e){e=e??G.EMPTY_OBJECT;let t=e.context,n=t._gl,i=e.attributes,o=e.indexBuffer,r,a=[],s=1,A=!1,l=!1,d=i.length;for(r=0;r<d;++r)aK(a,i[r],r,t);for(d=a.length,r=0;r<d;++r){let p=a[r];if(c(p.vertexBuffer)&&p.instanceDivisor===0){let g=p.strideInBytes||p.componentsPerAttribute*V.getSizeInBytes(p.componentDatatype);s=p.vertexBuffer.sizeInBytes/g;break}}for(r=0;r<d;++r)a[r].instanceDivisor>0&&(A=!0),c(a[r].value)&&(l=!0);let m;t.vertexArrayObject&&(m=t.glCreateVertexArray(),t.glBindVertexArray(m),wv(n,a,o),t.glBindVertexArray(null)),this._numberOfVertices=s,this._hasInstancedAttributes=A,this._hasConstantAttributes=l,this._context=t,this._gl=n,this._vao=m,this._attributes=a,this._indexBuffer=o}function Sv(e){return e.values.length/e.componentsPerAttribute}function sK(e){return V.getSizeInBytes(e.componentDatatype)*e.componentsPerAttribute}function cK(e){let t,n,i,o=[];for(n in e)e.hasOwnProperty(n)&&c(e[n])&&c(e[n].values)&&(o.push(n),e[n].componentDatatype===V.DOUBLE&&(e[n].componentDatatype=V.FLOAT,e[n].values=V.createTypedArray(V.FLOAT,e[n].values)));let r,a=o.length;if(a>0)for(r=Sv(e[o[0]]),t=1;t<a;++t){let l=Sv(e[o[t]]);if(l!==r)throw new ae(`Each attribute list must have the same number of vertices.  Attribute ${o[t]} has a different number of vertices (${l.toString()}) than attribute ${o[0]} (${r.toString()}).`)}o.sort(function(l,d){return V.getSizeInBytes(e[d].componentDatatype)-V.getSizeInBytes(e[l].componentDatatype)});let s=0,A={};for(t=0;t<a;++t)n=o[t],i=e[n],A[n]=s,s+=sK(i);if(s>0){let l=V.getSizeInBytes(e[o[0]].componentDatatype),d=s%l;d!==0&&(s+=l-d);let m=r*s,p=new ArrayBuffer(m),g={};for(t=0;t<a;++t){n=o[t];let h=V.getSizeInBytes(e[n].componentDatatype);g[n]={pointer:V.createTypedArray(e[n].componentDatatype,p),index:A[n]/h,strideInComponentType:s/h}}for(t=0;t<r;++t)for(let h=0;h<a;++h){n=o[h],i=e[n];let C=i.values,_=g[n],I=_.pointer,b=i.componentsPerAttribute;for(let x=0;x<b;++x)I[_.index+x]=C[t*b+x];_.index+=_.strideInComponentType}return{buffer:p,offsetsInBytes:A,vertexSizeInBytes:s}}}fl.fromGeometry=function(e){e=e??G.EMPTY_OBJECT;let t=e.context,n=e.geometry??G.EMPTY_OBJECT,i=e.bufferUsage??De.DYNAMIC_DRAW,o=e.attributeLocations??G.EMPTY_OBJECT,r=e.interleave??!1,a=e.vertexArrayAttributes,s,A,l,d=c(a)?a:[],m=n.attributes;if(r){let h=cK(m);if(c(h)){l=ut.createVertexBuffer({context:t,typedArray:h.buffer,usage:i});let C=h.offsetsInBytes,_=h.vertexSizeInBytes;for(s in m)m.hasOwnProperty(s)&&c(m[s])&&(A=m[s],c(A.values)?d.push({index:o[s],vertexBuffer:l,componentDatatype:A.componentDatatype,componentsPerAttribute:A.componentsPerAttribute,normalize:A.normalize,offsetInBytes:C[s],strideInBytes:_}):d.push({index:o[s],value:A.value,componentDatatype:A.componentDatatype,normalize:A.normalize}))}}else for(s in m)if(m.hasOwnProperty(s)&&c(m[s])){A=m[s];let h=A.componentDatatype;h===V.DOUBLE&&(h=V.FLOAT);let C={};l=void 0,c(A.values)&&(l=ut.createVertexBuffer({context:t,typedArray:V.createTypedArray(h,A.values),usage:i}),C={index:o[s],vertexBuffer:l,value:A.value,componentDatatype:h,componentsPerAttribute:A.componentsPerAttribute,normalize:A.normalize}),c(A.typedArray)&&(l=ut.createVertexBuffer({context:t,typedArray:A.typedArray,usage:i}),C={index:o[s],vertexBuffer:l,value:void 0,componentDatatype:h,componentsPerAttribute:ct.getNumberOfComponents(A.type),normalize:A.normalized,instanceDivisor:A.instanceDivisor}),d.push(C)}let p,g=n.indices;return c(g)&&(Dt.computeNumberOfVertices(n)>=S.SIXTY_FOUR_KILOBYTES&&t.elementIndexUint?p=ut.createIndexBuffer({context:t,typedArray:new Uint32Array(g),usage:i,indexDatatype:Ge.UNSIGNED_INT}):p=ut.createIndexBuffer({context:t,typedArray:new Uint16Array(g),usage:i,indexDatatype:Ge.UNSIGNED_SHORT})),new fl({context:t,attributes:d,indexBuffer:p})};Object.defineProperties(fl.prototype,{numberOfAttributes:{get:function(){return this._attributes.length}},numberOfVertices:{get:function(){return this._numberOfVertices}},indexBuffer:{get:function(){return this._indexBuffer}}});fl.prototype.getAttribute=function(e){return this._attributes[e]};function AK(e){let t=e._context,n=e._hasInstancedAttributes;if(!n&&!t._previousDrawInstanced)return;t._previousDrawInstanced=n;let i=t._vertexAttribDivisors,o=e._attributes,r=rn.maximumVertexAttributes,a;if(n){let s=o.length;for(a=0;a<s;++a){let A=o[a];if(A.enabled){let l=A.instanceDivisor,d=A.index;l!==i[d]&&(t.glVertexAttribDivisor(d,l),i[d]=l)}}}else for(a=0;a<r;++a)i[a]>0&&(t.glVertexAttribDivisor(a,0),i[a]=0)}function lK(e,t){let n=e._attributes,i=n.length;for(let o=0;o<i;++o){let r=n[o];r.enabled&&c(r.value)&&r.vertexAttrib(t)}}fl.prototype._bind=function(){c(this._vao)?(this._context.glBindVertexArray(this._vao),this._context.instancedArrays&&AK(this),this._hasConstantAttributes&&lK(this,this._gl)):wv(this._gl,this._attributes,this._indexBuffer)};fl.prototype._unBind=function(){if(c(this._vao))this._context.glBindVertexArray(null);else{let e=this._attributes,t=this._gl;for(let n=0;n<e.length;++n){let i=e[n];i.enabled&&i.disableVertexAttribArray(t)}this._indexBuffer&&t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)}};fl.prototype.isDestroyed=function(){return!1};fl.prototype.destroy=function(){let e=this._attributes;for(let n=0;n<e.length;++n){let i=e[n].vertexBuffer;c(i)&&!i.isDestroyed()&&i.vertexArrayDestroyable&&i.destroy()}let t=this._indexBuffer;return c(t)&&!t.isDestroyed()&&t.vertexArrayDestroyable&&t.destroy(),c(this._vao)&&this._context.glDeleteVertexArray(this._vao),me(this)};var Yi=fl;function Mi(e){e=e??G.EMPTY_OBJECT;let{context:t,source:n,pixelFormat:i=_t.RGBA,pixelDatatype:o=mt.UNSIGNED_BYTE,flipY:r=!0,skipColorSpaceConversion:a=!1,sampler:s=new nn}=e,A=e.preMultiplyAlpha||i===_t.RGB||i===_t.LUMINANCE,{width:l,height:d}=e;c(n)&&({width:l,height:d}=n.positiveX);let m=l,p=_t.textureSizeInBytes(i,o,m,m)*6,g=_t.toInternalFormat(i,o,t),h=t._gl,C=h.TEXTURE_CUBE_MAP,_=h.createTexture();this._context=t,this._textureFilterAnisotropic=t._textureFilterAnisotropic,this._textureTarget=C,this._texture=_,this._pixelFormat=i,this._pixelDatatype=o,this._size=m,this._hasMipmap=!1,this._sizeInBytes=p,this._preMultiplyAlpha=A,this._flipY=r;let I=c(n);function b(x){return new Tv(t,_,C,x,g,i,o,m,A,r,I)}this._positiveX=b(h.TEXTURE_CUBE_MAP_POSITIVE_X),this._negativeX=b(h.TEXTURE_CUBE_MAP_NEGATIVE_X),this._positiveY=b(h.TEXTURE_CUBE_MAP_POSITIVE_Y),this._negativeY=b(h.TEXTURE_CUBE_MAP_NEGATIVE_Y),this._positiveZ=b(h.TEXTURE_CUBE_MAP_POSITIVE_Z),this._negativeZ=b(h.TEXTURE_CUBE_MAP_NEGATIVE_Z),this._sampler=s,Dv(this,s),h.activeTexture(h.TEXTURE0),h.bindTexture(C,_),a?h.pixelStorei(h.UNPACK_COLORSPACE_CONVERSION_WEBGL,h.NONE):h.pixelStorei(h.UNPACK_COLORSPACE_CONVERSION_WEBGL,h.BROWSER_DEFAULT_WEBGL);for(let x of Mi.faceNames())dB(this[x],n?.[x],0);h.bindTexture(C,null)}Mi.prototype.copyFace=function(e,t,n,i){let o=e.context,r=new Hs({context:o,colorTextures:[t],destroyAttachments:!1});r._bind(),this[n].copyMipmapFromFramebuffer(0,0,t.width,t.height,i??0),r._unBind(),r.destroy()};Mi.FaceName=Object.freeze({POSITIVEX:"positiveX",NEGATIVEX:"negativeX",POSITIVEY:"positiveY",NEGATIVEY:"negativeY",POSITIVEZ:"positiveZ",NEGATIVEZ:"negativeZ"});function*uK(){yield Mi.FaceName.POSITIVEX,yield Mi.FaceName.NEGATIVEX,yield Mi.FaceName.POSITIVEY,yield Mi.FaceName.NEGATIVEY,yield Mi.FaceName.POSITIVEZ,yield Mi.FaceName.NEGATIVEZ}Mi.faceNames=function(){return uK()};function dB(e,t,n){n=n??0;let i=e._targetFace,o=Math.max(Math.floor(e._size/2**n),1),r=e._pixelFormat,a=e._pixelDatatype,s=e._internalFormat,A=e._flipY,l=e._preMultiplyAlpha,d=e._context,m=d._gl;if(!c(t)){m.texImage2D(i,n,s,o,o,0,r,mt.toWebGLConstant(a,d),null);return}let{arrayBufferView:p}=t,g=4;c(p)&&(g=_t.alignmentInBytes(r,a,o)),m.pixelStorei(m.UNPACK_ALIGNMENT,g),c(p)?(m.pixelStorei(m.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),m.pixelStorei(m.UNPACK_FLIP_Y_WEBGL,!1),A&&(p=_t.flipY(p,r,a,o,o)),m.texImage2D(i,n,s,o,o,0,r,mt.toWebGLConstant(a,d),p)):(m.pixelStorei(m.UNPACK_PREMULTIPLY_ALPHA_WEBGL,l),m.pixelStorei(m.UNPACK_FLIP_Y_WEBGL,A),m.texImage2D(i,n,s,r,mt.toWebGLConstant(a,d),t))}Mi.loadFace=dB;Object.defineProperties(Mi.prototype,{positiveX:{get:function(){return this._positiveX}},negativeX:{get:function(){return this._negativeX}},positiveY:{get:function(){return this._positiveY}},negativeY:{get:function(){return this._negativeY}},positiveZ:{get:function(){return this._positiveZ}},negativeZ:{get:function(){return this._negativeZ}},sampler:{get:function(){return this._sampler},set:function(e){Dv(this,e),this._sampler=e}},pixelFormat:{get:function(){return this._pixelFormat}},pixelDatatype:{get:function(){return this._pixelDatatype}},width:{get:function(){return this._size}},height:{get:function(){return this._size}},sizeInBytes:{get:function(){return this._hasMipmap?Math.floor(this._sizeInBytes*4/3):this._sizeInBytes}},preMultiplyAlpha:{get:function(){return this._preMultiplyAlpha}},flipY:{get:function(){return this._flipY}},_target:{get:function(){return this._textureTarget}}});Mi.getDirection=function(e,t){switch(e){case Mi.FaceName.POSITIVEX:return f.clone(f.UNIT_X,t);case Mi.FaceName.NEGATIVEX:return f.negate(f.UNIT_X,t);case Mi.FaceName.POSITIVEY:return f.clone(f.UNIT_Y,t);case Mi.FaceName.NEGATIVEY:return f.negate(f.UNIT_Y,t);case Mi.FaceName.POSITIVEZ:return f.clone(f.UNIT_Z,t);case Mi.FaceName.NEGATIVEZ:return f.negate(f.UNIT_Z,t)}};function Dv(e,t){let{minificationFilter:n,magnificationFilter:i}=t,o=[Wt.NEAREST_MIPMAP_NEAREST,Wt.NEAREST_MIPMAP_LINEAR,Wt.LINEAR_MIPMAP_NEAREST,Wt.LINEAR_MIPMAP_LINEAR].includes(n),r=e._context,a=e._pixelDatatype;(a===mt.FLOAT&&!r.textureFloatLinear||a===mt.HALF_FLOAT&&!r.textureHalfFloatLinear)&&(n=o?Wt.NEAREST_MIPMAP_NEAREST:Wt.NEAREST,i=yo.NEAREST);let s=r._gl,A=e._textureTarget;s.activeTexture(s.TEXTURE0),s.bindTexture(A,e._texture),s.texParameteri(A,s.TEXTURE_MIN_FILTER,n),s.texParameteri(A,s.TEXTURE_MAG_FILTER,i),s.texParameteri(A,s.TEXTURE_WRAP_S,t.wrapS),s.texParameteri(A,s.TEXTURE_WRAP_T,t.wrapT),c(e._textureFilterAnisotropic)&&s.texParameteri(A,e._textureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,t.maximumAnisotropy),s.bindTexture(A,null)}Mi.prototype.loadMipmaps=function(e,t){t=t??!1;let n=this._context._gl,i=this._texture,o=this._textureTarget;n.activeTexture(n.TEXTURE0),n.bindTexture(o,i),t?n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,n.NONE):n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,n.BROWSER_DEFAULT_WEBGL);for(let r=0;r<e.length;r++){let a=e[r],s=r+1;for(let A of Mi.faceNames())dB(this[A],a[A],s)}n.bindTexture(o,null),this._hasMipmap=!0};Mi.prototype.generateMipmap=function(e){e=e??Yf.DONT_CARE,this._hasMipmap=!0;let t=this._context._gl,n=this._textureTarget;t.hint(t.GENERATE_MIPMAP_HINT,e),t.activeTexture(t.TEXTURE0),t.bindTexture(n,this._texture),t.generateMipmap(n),t.bindTexture(n,null)};Mi.createVertexArray=function(e){let t=W0.createGeometry(W0.fromDimensions({dimensions:new f(2,2,2),vertexFormat:Bt.POSITION_ONLY})),n=this._attributeLocations=li.createAttributeLocations(t);return Yi.fromGeometry({context:e,geometry:t,attributeLocations:n,bufferUsage:De.STATIC_DRAW})};Mi.prototype.isDestroyed=function(){return!1};Mi.prototype.destroy=function(){return this._context._gl.deleteTexture(this._texture),this._positiveX=me(this._positiveX),this._negativeX=me(this._negativeX),this._positiveY=me(this._positiveY),this._negativeY=me(this._negativeY),this._positiveZ=me(this._positiveZ),this._negativeZ=me(this._negativeZ),me(this)};var ds=Mi;var Qv=`/**
 * A built-in GLSL floating-point constant for converting radians to degrees.
 *
 * @alias czm_degreesPerRadian
 * @glslConstant
 *
 * @see CesiumMath.DEGREES_PER_RADIAN
 *
 * @example
 * // GLSL declaration
 * const float czm_degreesPerRadian = ...;
 *
 * // Example
 * float deg = czm_degreesPerRadian * rad;
 */
const float czm_degreesPerRadian = 57.29577951308232;
`;var Rv=`/**
 * A built-in GLSL vec2 constant for defining the depth range.
 * This is a workaround to a bug where IE11 does not implement gl_DepthRange.
 *
 * @alias czm_depthRange
 * @glslConstant
 *
 * @example
 * // GLSL declaration
 * float depthRangeNear = czm_depthRange.near;
 * float depthRangeFar = czm_depthRange.far;
 *
 */
const czm_depthRangeStruct czm_depthRange = czm_depthRangeStruct(0.0, 1.0);
`;var vv=`/**
 * 0.1
 *
 * @name czm_epsilon1
 * @glslConstant
 */
const float czm_epsilon1 = 0.1;
`;var Mv=`/**
 * 0.01
 *
 * @name czm_epsilon2
 * @glslConstant
 */
const float czm_epsilon2 = 0.01;
`;var Pv=`/**
 * 0.001
 *
 * @name czm_epsilon3
 * @glslConstant
 */
const float czm_epsilon3 = 0.001;
`;var Nv=`/**
 * 0.0001
 *
 * @name czm_epsilon4
 * @glslConstant
 */
const float czm_epsilon4 = 0.0001;
`;var Lv=`/**
 * 0.00001
 *
 * @name czm_epsilon5
 * @glslConstant
 */
const float czm_epsilon5 = 0.00001;
`;var Fv=`/**
 * 0.000001
 *
 * @name czm_epsilon6
 * @glslConstant
 */
const float czm_epsilon6 = 0.000001;
`;var Ov=`/**
 * 0.0000001
 *
 * @name czm_epsilon7
 * @glslConstant
 */
const float czm_epsilon7 = 0.0000001;
`;var kv=`/**
 * DOC_TBA
 *
 * @name czm_infinity
 * @glslConstant
 */
const float czm_infinity = 5906376272000.0;  // Distance from the Sun to Pluto in meters.  TODO: What is best given lowp, mediump, and highp?
`;var Uv=`/**
 * A built-in GLSL floating-point constant for <code>1/pi</code>.
 *
 * @alias czm_oneOverPi
 * @glslConstant
 *
 * @see CesiumMath.ONE_OVER_PI
 *
 * @example
 * // GLSL declaration
 * const float czm_oneOverPi = ...;
 *
 * // Example
 * float pi = 1.0 / czm_oneOverPi;
 */
const float czm_oneOverPi = 0.3183098861837907;
`;var zv=`/**
 * A built-in GLSL floating-point constant for <code>1/2pi</code>.
 *
 * @alias czm_oneOverTwoPi
 * @glslConstant
 *
 * @see CesiumMath.ONE_OVER_TWO_PI
 *
 * @example
 * // GLSL declaration
 * const float czm_oneOverTwoPi = ...;
 *
 * // Example
 * float pi = 2.0 * czm_oneOverTwoPi;
 */
const float czm_oneOverTwoPi = 0.15915494309189535;
`;var Gv=`/**
 * The automatic GLSL constant for {@link Pass#CESIUM_3D_TILE}
 *
 * @name czm_passCesium3DTile
 * @glslConstant
 *
 * @see czm_pass
 */
const float czm_passCesium3DTile = 4.0;
`;var Hv=`/**
 * The automatic GLSL constant for {@link Pass#CESIUM_3D_TILE_CLASSIFICATION}
 *
 * @name czm_passCesium3DTileClassification
 * @glslConstant
 *
 * @see czm_pass
 */
const float czm_passCesium3DTileClassification = 5.0;
`;var Vv=`/**
 * The automatic GLSL constant for {@link Pass#CESIUM_3D_TILE_CLASSIFICATION_IGNORE_SHOW}
 *
 * @name czm_passCesium3DTileClassificationIgnoreShow
 * @glslConstant
 *
 * @see czm_pass
 */
const float czm_passCesium3DTileClassificationIgnoreShow = 6.0;
`;var jv=`/**
 * The automatic GLSL constant for {@link Pass#CLASSIFICATION}
 *
 * @name czm_passClassification
 * @glslConstant
 *
 * @see czm_pass
 */
const float czm_passClassification = 7.0;
`;var Yv=`/**
 * The automatic GLSL constant for {@link Pass#COMPUTE}
 *
 * @name czm_passCompute
 * @glslConstant
 *
 * @see czm_pass
 */
const float czm_passCompute = 1.0;
`;var Wv=`/**
 * The automatic GLSL constant for {@link Pass#ENVIRONMENT}
 *
 * @name czm_passEnvironment
 * @glslConstant
 *
 * @see czm_pass
 */
const float czm_passEnvironment = 0.0;
`;var qv=`/**
 * The automatic GLSL constant for {@link Pass#GAUSSIAN_SPLATS}
 *
 * @name czm_passGaussianSplats
 * @glslConstant
 *
 * @see czm_pass
 */
const float czm_passGaussianSplats = 10.0;
`;var Jv=`/**
 * The automatic GLSL constant for {@link Pass#GLOBE}
 *
 * @name czm_passGlobe
 * @glslConstant
 *
 * @see czm_pass
 */
const float czm_passGlobe = 2.0;
`;var Kv=`/**
 * The automatic GLSL constant for {@link Pass#OPAQUE}
 *
 * @name czm_passOpaque
 * @glslConstant
 *
 * @see czm_pass
 */
const float czm_passOpaque = 7.0;
`;var Xv=`/**
 * The automatic GLSL constant for {@link Pass#OVERLAY}
 *
 * @name czm_passOverlay
 * @glslConstant
 *
 * @see czm_pass
 */
const float czm_passOverlay = 11.0;
`;var Zv=`/**
 * The automatic GLSL constant for {@link Pass#TERRAIN_CLASSIFICATION}
 *
 * @name czm_passTerrainClassification
 * @glslConstant
 *
 * @see czm_pass
 */
const float czm_passTerrainClassification = 3.0;
`;var $v=`/**
 * The automatic GLSL constant for {@link Pass#TRANSLUCENT}
 *
 * @name czm_passTranslucent
 * @glslConstant
 *
 * @see czm_pass
 */
const float czm_passTranslucent = 8.0;
`;var eM=`/**
 * The automatic GLSL constant for {@link Pass#VOXELS}
 *
 * @name czm_passVoxels
 * @glslConstant
 *
 * @see czm_pass
 */
const float czm_passVoxels = 9.0;
`;var tM=`/**
 * A built-in GLSL floating-point constant for <code>Math.PI</code>.
 *
 * @alias czm_pi
 * @glslConstant
 *
 * @see CesiumMath.PI
 *
 * @example
 * // GLSL declaration
 * const float czm_pi = ...;
 *
 * // Example
 * float twoPi = 2.0 * czm_pi;
 */
const float czm_pi = 3.141592653589793;
`;var nM=`/**
 * A built-in GLSL floating-point constant for <code>pi/4</code>.
 *
 * @alias czm_piOverFour
 * @glslConstant
 *
 * @see CesiumMath.PI_OVER_FOUR
 *
 * @example
 * // GLSL declaration
 * const float czm_piOverFour = ...;
 *
 * // Example
 * float pi = 4.0 * czm_piOverFour;
 */
const float czm_piOverFour = 0.7853981633974483;
`;var iM=`/**
 * A built-in GLSL floating-point constant for <code>pi/6</code>.
 *
 * @alias czm_piOverSix
 * @glslConstant
 *
 * @see CesiumMath.PI_OVER_SIX
 *
 * @example
 * // GLSL declaration
 * const float czm_piOverSix = ...;
 *
 * // Example
 * float pi = 6.0 * czm_piOverSix;
 */
const float czm_piOverSix = 0.5235987755982988;
`;var oM=`/**
 * A built-in GLSL floating-point constant for <code>pi/3</code>.
 *
 * @alias czm_piOverThree
 * @glslConstant
 *
 * @see CesiumMath.PI_OVER_THREE
 *
 * @example
 * // GLSL declaration
 * const float czm_piOverThree = ...;
 *
 * // Example
 * float pi = 3.0 * czm_piOverThree;
 */
const float czm_piOverThree = 1.0471975511965976;
`;var rM=`/**
 * A built-in GLSL floating-point constant for <code>pi/2</code>.
 *
 * @alias czm_piOverTwo
 * @glslConstant
 *
 * @see CesiumMath.PI_OVER_TWO
 *
 * @example
 * // GLSL declaration
 * const float czm_piOverTwo = ...;
 *
 * // Example
 * float pi = 2.0 * czm_piOverTwo;
 */
const float czm_piOverTwo = 1.5707963267948966;
`;var aM=`/**
 * A built-in GLSL floating-point constant for converting degrees to radians.
 *
 * @alias czm_radiansPerDegree
 * @glslConstant
 *
 * @see CesiumMath.RADIANS_PER_DEGREE
 *
 * @example
 * // GLSL declaration
 * const float czm_radiansPerDegree = ...;
 *
 * // Example
 * float rad = czm_radiansPerDegree * deg;
 */
const float czm_radiansPerDegree = 0.017453292519943295;
`;var sM=`/**
 * The constant identifier for the 2D {@link SceneMode}
 *
 * @name czm_sceneMode2D
 * @glslConstant
 * @see czm_sceneMode
 * @see czm_sceneModeColumbusView
 * @see czm_sceneMode3D
 * @see czm_sceneModeMorphing
 */
const float czm_sceneMode2D = 2.0;
`;var cM=`/**
 * The constant identifier for the 3D {@link SceneMode}
 *
 * @name czm_sceneMode3D
 * @glslConstant
 * @see czm_sceneMode
 * @see czm_sceneMode2D
 * @see czm_sceneModeColumbusView
 * @see czm_sceneModeMorphing
 */
const float czm_sceneMode3D = 3.0;
`;var AM=`/**
 * The constant identifier for the Columbus View {@link SceneMode}
 *
 * @name czm_sceneModeColumbusView
 * @glslConstant
 * @see czm_sceneMode
 * @see czm_sceneMode2D
 * @see czm_sceneMode3D
 * @see czm_sceneModeMorphing
 */
const float czm_sceneModeColumbusView = 1.0;
`;var lM=`/**
 * The constant identifier for the Morphing {@link SceneMode}
 *
 * @name czm_sceneModeMorphing
 * @glslConstant
 * @see czm_sceneMode
 * @see czm_sceneMode2D
 * @see czm_sceneModeColumbusView
 * @see czm_sceneMode3D
 */
const float czm_sceneModeMorphing = 0.0;
`;var uM=`/**
 * A built-in GLSL floating-point constant for one solar radius.
 *
 * @alias czm_solarRadius
 * @glslConstant
 *
 * @see CesiumMath.SOLAR_RADIUS
 *
 * @example
 * // GLSL declaration
 * const float czm_solarRadius = ...;
 */
const float czm_solarRadius = 695500000.0;
`;var fM=`/**
 * A built-in GLSL floating-point constant for <code>3pi/2</code>.
 *
 * @alias czm_threePiOver2
 * @glslConstant
 *
 * @see CesiumMath.THREE_PI_OVER_TWO
 *
 * @example
 * // GLSL declaration
 * const float czm_threePiOver2 = ...;
 *
 * // Example
 * float pi = (2.0 / 3.0) * czm_threePiOver2;
 */
const float czm_threePiOver2 = 4.71238898038469;
`;var dM=`/**
 * A built-in GLSL floating-point constant for <code>2pi</code>.
 *
 * @alias czm_twoPi
 * @glslConstant
 *
 * @see CesiumMath.TWO_PI
 *
 * @example
 * // GLSL declaration
 * const float czm_twoPi = ...;
 *
 * // Example
 * float pi = czm_twoPi / 2.0;
 */
const float czm_twoPi = 6.283185307179586;
`;var hM=`/**
 * The maximum latitude, in radians, both North and South, supported by a Web Mercator
 * (EPSG:3857) projection.  Technically, the Mercator projection is defined
 * for any latitude up to (but not including) 90 degrees, but it makes sense
 * to cut it off sooner because it grows exponentially with increasing latitude.
 * The logic behind this particular cutoff value, which is the one used by
 * Google Maps, Bing Maps, and Esri, is that it makes the projection
 * square.  That is, the rectangle is equal in the X and Y directions.
 *
 * The constant value is computed as follows:
 *   czm_pi * 0.5 - (2.0 * atan(exp(-czm_pi)))
 *
 * @name czm_webMercatorMaxLatitude
 * @glslConstant
 */
const float czm_webMercatorMaxLatitude = 1.4844222297453324;
`;var mM=`/**
 * @name czm_depthRangeStruct
 * @glslStruct
 */
struct czm_depthRangeStruct
{
    float near;
    float far;
};
`;var pM=`/**
 * Holds material information that can be used for lighting. Returned by all czm_getMaterial functions.
 *
 * @name czm_material
 * @glslStruct
 *
 * @property {vec3} diffuse Incoming light that scatters evenly in all directions.
 * @property {float} specular Intensity of incoming light reflecting in a single direction.
 * @property {float} shininess The sharpness of the specular reflection.  Higher values create a smaller, more focused specular highlight.
 * @property {vec3} normal Surface's normal in eye coordinates. It is used for effects such as normal mapping. The default is the surface's unmodified normal.
 * @property {vec3} emission Light emitted by the material equally in all directions. The default is vec3(0.0), which emits no light.
 * @property {float} alpha Alpha of this material. 0.0 is completely transparent; 1.0 is completely opaque.
 */
struct czm_material
{
    vec3 diffuse;
    float specular;
    float shininess;
    vec3 normal;
    vec3 emission;
    float alpha;
};
`;var gM=`/**
 * Used as input to every material's czm_getMaterial function.
 *
 * @name czm_materialInput
 * @glslStruct
 *
 * @property {float} s 1D texture coordinates.
 * @property {vec2} st 2D texture coordinates.
 * @property {vec3} str 3D texture coordinates.
 * @property {vec3} normalEC Unperturbed surface normal in eye coordinates.
 * @property {mat3} tangentToEyeMatrix Matrix for converting a tangent space normal to eye space.
 * @property {vec3} positionToEyeEC Vector from the fragment to the eye in eye coordinates.  The magnitude is the distance in meters from the fragment to the eye.
 * @property {float} height The height of the terrain in meters above or below the ellipsoid.  Only available for globe materials.
 * @property {float} slope The slope of the terrain in radians.  0 is flat; pi/2 is vertical.  Only available for globe materials.
 * @property {float} aspect The aspect of the terrain in radians.  0 is East, pi/2 is North, pi is West, 3pi/2 is South.  Only available for globe materials.
* @property {float} waterMask The value of the water mask. 0 is land, 1 is water. Only available for globe materials.
 */
struct czm_materialInput
{
    float s;
    vec2 st;
    vec3 str;
    vec3 normalEC;
    mat3 tangentToEyeMatrix;
    vec3 positionToEyeEC;
    float height;
    float slope;
    float aspect;
    float waterMask;
};
`;var CM=`/**
 * Struct for representing a material for a {@link Model}. The model
 * rendering pipeline will pass this struct between material, custom shaders,
 * and lighting stages. This is not to be confused with {@link czm_material}
 * which is used by the older Fabric materials system, although they are similar.
 * <p>
 * All color values (diffuse, specular, emissive) are in linear color space.
 * </p>
 *
 * @name czm_modelMaterial
 * @glslStruct
 *
 * @property {vec4} baseColor The base color of the material.
 * @property {vec3} diffuse Incoming light that scatters evenly in all directions.
 * @property {float} alpha Alpha of this material. 0.0 is completely transparent; 1.0 is completely opaque.
 * @property {vec3} specular Color of reflected light at normal incidence in PBR materials. This is sometimes referred to as f0 in the literature.
 * @property {float} roughness A number from 0.0 to 1.0 representing how rough the surface is. Values near 0.0 produce glossy surfaces, while values near 1.0 produce rough surfaces.
 * @property {vec3} normalEC Surface's normal in eye coordinates. It is used for effects such as normal mapping. The default is the surface's unmodified normal.
 * @property {float} occlusion Ambient occlusion recieved at this point on the material. 1.0 means fully lit, 0.0 means fully occluded.
 * @property {vec3} emissive Light emitted by the material equally in all directions. The default is vec3(0.0), which emits no light.
 */
struct czm_modelMaterial {
    vec4 baseColor;
    vec3 diffuse;
    float alpha;
    vec3 specular;
    float roughness;
    vec3 normalEC;
    float occlusion;
    vec3 emissive;
#ifdef USE_SPECULAR
    float specularWeight;
#endif
#ifdef USE_ANISOTROPY
    vec3 anisotropicT;
    vec3 anisotropicB;
    float anisotropyStrength;
#endif
#ifdef USE_CLEARCOAT
    float clearcoatFactor;
    float clearcoatRoughness;
    vec3 clearcoatNormal;
    // Add clearcoatF0 when KHR_materials_ior is implemented
#endif
};
`;var EM=`/**
 * Struct for representing the output of a custom vertex shader.
 * 
 * @name czm_modelVertexOutput
 * @glslStruct
 *
 * @see {@link CustomShader}
 * @see {@link Model}
 *
 * @property {vec3} positionMC The position of the vertex in model coordinates
 * @property {float} pointSize A custom value for gl_PointSize. This is only used for point primitives. 
 */
struct czm_modelVertexOutput {
  vec3 positionMC;
  float pointSize;
};
`;var _M=`/**
 * DOC_TBA
 *
 * @name czm_ray
 * @glslStruct
 */
struct czm_ray
{
    vec3 origin;
    vec3 direction;
};
`;var IM=`/**
 * DOC_TBA
 *
 * @name czm_raySegment
 * @glslStruct
 */
struct czm_raySegment
{
    float start;
    float stop;
};

/**
 * DOC_TBA
 *
 * @name czm_emptyRaySegment
 * @glslConstant 
 */
const czm_raySegment czm_emptyRaySegment = czm_raySegment(-czm_infinity, -czm_infinity);

/**
 * DOC_TBA
 *
 * @name czm_fullRaySegment
 * @glslConstant 
 */
const czm_raySegment czm_fullRaySegment = czm_raySegment(0.0, czm_infinity);
`;var yM=`struct czm_shadowParameters
{
#ifdef USE_CUBE_MAP_SHADOW
    vec3 texCoords;
#else
    vec2 texCoords;
#endif

    float depthBias;
    float depth;
    float nDotL;
    vec2 texelStepSize;
    float normalShadingSmooth;
    float darkness;
};
`;var bM=`/**
 * Converts an HSB color (hue, saturation, brightness) to RGB
 * HSB <-> RGB conversion with minimal branching: {@link http://lolengine.net/blog/2013/07/27/rgb-to-hsv-in-glsl}
 *
 * @name czm_HSBToRGB
 * @glslFunction
 * 
 * @param {vec3} hsb The color in HSB.
 *
 * @returns {vec3} The color in RGB.
 *
 * @example
 * vec3 hsb = czm_RGBToHSB(rgb);
 * hsb.z *= 0.1;
 * rgb = czm_HSBToRGB(hsb);
 */

const vec4 K_HSB2RGB = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);

vec3 czm_HSBToRGB(vec3 hsb)
{
    vec3 p = abs(fract(hsb.xxx + K_HSB2RGB.xyz) * 6.0 - K_HSB2RGB.www);
    return hsb.z * mix(K_HSB2RGB.xxx, clamp(p - K_HSB2RGB.xxx, 0.0, 1.0), hsb.y);
}
`;var BM=`/**
 * Converts an HSL color (hue, saturation, lightness) to RGB
 * HSL <-> RGB conversion: {@link http://www.chilliant.com/rgb2hsv.html}
 *
 * @name czm_HSLToRGB
 * @glslFunction
 * 
 * @param {vec3} rgb The color in HSL.
 *
 * @returns {vec3} The color in RGB.
 *
 * @example
 * vec3 hsl = czm_RGBToHSL(rgb);
 * hsl.z *= 0.1;
 * rgb = czm_HSLToRGB(hsl);
 */

vec3 hueToRGB(float hue)
{
    float r = abs(hue * 6.0 - 3.0) - 1.0;
    float g = 2.0 - abs(hue * 6.0 - 2.0);
    float b = 2.0 - abs(hue * 6.0 - 4.0);
    return clamp(vec3(r, g, b), 0.0, 1.0);
}

vec3 czm_HSLToRGB(vec3 hsl)
{
    vec3 rgb = hueToRGB(hsl.x);
    float c = (1.0 - abs(2.0 * hsl.z - 1.0)) * hsl.y;
    return (rgb - 0.5) * c + hsl.z;
}
`;var xM=`/**
 * Converts an RGB color to HSB (hue, saturation, brightness)
 * HSB <-> RGB conversion with minimal branching: {@link http://lolengine.net/blog/2013/07/27/rgb-to-hsv-in-glsl}
 *
 * @name czm_RGBToHSB
 * @glslFunction
 * 
 * @param {vec3} rgb The color in RGB.
 *
 * @returns {vec3} The color in HSB.
 *
 * @example
 * vec3 hsb = czm_RGBToHSB(rgb);
 * hsb.z *= 0.1;
 * rgb = czm_HSBToRGB(hsb);
 */

const vec4 K_RGB2HSB = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);

vec3 czm_RGBToHSB(vec3 rgb)
{
    vec4 p = mix(vec4(rgb.bg, K_RGB2HSB.wz), vec4(rgb.gb, K_RGB2HSB.xy), step(rgb.b, rgb.g));
    vec4 q = mix(vec4(p.xyw, rgb.r), vec4(rgb.r, p.yzx), step(p.x, rgb.r));

    float d = q.x - min(q.w, q.y);
    return vec3(abs(q.z + (q.w - q.y) / (6.0 * d + czm_epsilon7)), d / (q.x + czm_epsilon7), q.x);
}
`;var TM=`/**
 * Converts an RGB color to HSL (hue, saturation, lightness)
 * HSL <-> RGB conversion: {@link http://www.chilliant.com/rgb2hsv.html}
 *
 * @name czm_RGBToHSL
 * @glslFunction
 * 
 * @param {vec3} rgb The color in RGB.
 *
 * @returns {vec3} The color in HSL.
 *
 * @example
 * vec3 hsl = czm_RGBToHSL(rgb);
 * hsl.z *= 0.1;
 * rgb = czm_HSLToRGB(hsl);
 */
 
vec3 RGBtoHCV(vec3 rgb)
{
    // Based on work by Sam Hocevar and Emil Persson
    vec4 p = (rgb.g < rgb.b) ? vec4(rgb.bg, -1.0, 2.0 / 3.0) : vec4(rgb.gb, 0.0, -1.0 / 3.0);
    vec4 q = (rgb.r < p.x) ? vec4(p.xyw, rgb.r) : vec4(rgb.r, p.yzx);
    float c = q.x - min(q.w, q.y);
    float h = abs((q.w - q.y) / (6.0 * c + czm_epsilon7) + q.z);
    return vec3(h, c, q.x);
}

vec3 czm_RGBToHSL(vec3 rgb)
{
    vec3 hcv = RGBtoHCV(rgb);
    float l = hcv.z - hcv.y * 0.5;
    float s = hcv.y / (1.0 - abs(l * 2.0 - 1.0) + czm_epsilon7);
    return vec3(hcv.x, s, l);
}
`;var SM=`/**
 * Converts an RGB color to CIE Yxy.
 * <p>The conversion is described in
 * {@link http://content.gpwiki.org/index.php/D3DBook:High-Dynamic_Range_Rendering#Luminance_Transform|Luminance Transform}
 * </p>
 * 
 * @name czm_RGBToXYZ
 * @glslFunction
 * 
 * @param {vec3} rgb The color in RGB.
 *
 * @returns {vec3} The color in CIE Yxy.
 *
 * @example
 * vec3 xyz = czm_RGBToXYZ(rgb);
 * xyz.x = max(xyz.x - luminanceThreshold, 0.0);
 * rgb = czm_XYZToRGB(xyz);
 */
vec3 czm_RGBToXYZ(vec3 rgb)
{
    const mat3 RGB2XYZ = mat3(0.4124, 0.2126, 0.0193,
                              0.3576, 0.7152, 0.1192,
                              0.1805, 0.0722, 0.9505);
    vec3 xyz = RGB2XYZ * rgb;
    vec3 Yxy;
    Yxy.r = xyz.g;
    float temp = dot(vec3(1.0), xyz);
    Yxy.gb = xyz.rg / temp;
    return Yxy;
}
`;var wM=`/**
 * Converts a CIE Yxy color to RGB.
 * <p>The conversion is described in
 * {@link http://content.gpwiki.org/index.php/D3DBook:High-Dynamic_Range_Rendering#Luminance_Transform|Luminance Transform}
 * </p>
 * 
 * @name czm_XYZToRGB
 * @glslFunction
 * 
 * @param {vec3} Yxy The color in CIE Yxy.
 *
 * @returns {vec3} The color in RGB.
 *
 * @example
 * vec3 xyz = czm_RGBToXYZ(rgb);
 * xyz.x = max(xyz.x - luminanceThreshold, 0.0);
 * rgb = czm_XYZToRGB(xyz);
 */
vec3 czm_XYZToRGB(vec3 Yxy)
{
    const mat3 XYZ2RGB = mat3( 3.2405, -0.9693,  0.0556,
                              -1.5371,  1.8760, -0.2040,
                              -0.4985,  0.0416,  1.0572);
    vec3 xyz;
    xyz.r = Yxy.r * Yxy.g / Yxy.b;
    xyz.g = Yxy.r;
    xyz.b = Yxy.r * (1.0 - Yxy.g - Yxy.b) / Yxy.b;
    
    return XYZ2RGB * xyz;
}
`;var DM=`// See:
//    https://knarkowicz.wordpress.com/2016/01/06/aces-filmic-tone-mapping-curve/

vec3 czm_acesTonemapping(vec3 color) {
    float g = 0.985;
    float a = 0.065;
    float b = 0.0001;
    float c = 0.433;
    float d = 0.238;

    color = (color * (color + a) - b) / (color * (g * color + c) + d);

    color = clamp(color, 0.0, 1.0);

    return color;
}
`;var QM=`/**
 * @private
 */
float czm_alphaWeight(float a)
{
    float z = (gl_FragCoord.z - czm_viewportTransformation[3][2]) / czm_viewportTransformation[2][2];

    // See Weighted Blended Order-Independent Transparency for examples of different weighting functions:
    // http://jcgt.org/published/0002/02/09/
    return pow(a + 0.01, 4.0) + max(1e-2, min(3.0 * 1e3, 0.003 / (1e-5 + pow(abs(z) / 200.0, 4.0))));
}
`;var RM=`/**
 * Procedural anti-aliasing by blurring two colors that meet at a sharp edge.
 *
 * @name czm_antialias
 * @glslFunction
 *
 * @param {vec4} color1 The color on one side of the edge.
 * @param {vec4} color2 The color on the other side of the edge.
 * @param {vec4} currentcolor The current color, either <code>color1</code> or <code>color2</code>.
 * @param {float} dist The distance to the edge in texture coordinates.
 * @param {float} [fuzzFactor=0.1] Controls the blurriness between the two colors.
 * @returns {vec4} The anti-aliased color.
 *
 * @example
 * // GLSL declarations
 * vec4 czm_antialias(vec4 color1, vec4 color2, vec4 currentColor, float dist, float fuzzFactor);
 * vec4 czm_antialias(vec4 color1, vec4 color2, vec4 currentColor, float dist);
 *
 * // get the color for a material that has a sharp edge at the line y = 0.5 in texture space
 * float dist = abs(textureCoordinates.t - 0.5);
 * vec4 currentColor = mix(bottomColor, topColor, step(0.5, textureCoordinates.t));
 * vec4 color = czm_antialias(bottomColor, topColor, currentColor, dist, 0.1);
 */
vec4 czm_antialias(vec4 color1, vec4 color2, vec4 currentColor, float dist, float fuzzFactor)
{
    float val1 = clamp(dist / fuzzFactor, 0.0, 1.0);
    float val2 = clamp((dist - 0.5) / fuzzFactor, 0.0, 1.0);
    val1 = val1 * (1.0 - val2);
    val1 = val1 * val1 * (3.0 - (2.0 * val1));
    val1 = pow(val1, 0.5); //makes the transition nicer
    
    vec4 midColor = (color1 + color2) * 0.5;
    return mix(midColor, currentColor, val1);
}

vec4 czm_antialias(vec4 color1, vec4 color2, vec4 currentColor, float dist)
{
    return czm_antialias(color1, color2, currentColor, dist, 0.1);
}
`;var vM=`/**
 * Apply a HSB color shift to an RGB color.
 *
 * @param {vec3} rgb The color in RGB space.
 * @param {vec3} hsbShift The amount to shift each component. The xyz components correspond to hue, saturation, and brightness. Shifting the hue by +/- 1.0 corresponds to shifting the hue by a full cycle. Saturation and brightness are clamped between 0 and 1 after the adjustment
 * @param {bool} ignoreBlackPixels If true, black pixels will be unchanged. This is necessary in some shaders such as atmosphere-related effects.
 *
 * @return {vec3} The RGB color after shifting in HSB space and clamping saturation and brightness to a valid range.
 */
vec3 czm_applyHSBShift(vec3 rgb, vec3 hsbShift, bool ignoreBlackPixels) {
    // Convert rgb color to hsb
    vec3 hsb = czm_RGBToHSB(rgb);

    // Perform hsb shift
    // Hue cycles around so no clamp is needed.
    hsb.x += hsbShift.x; // hue
    hsb.y = clamp(hsb.y + hsbShift.y, 0.0, 1.0); // saturation

    // brightness
    //
    // Some shaders such as atmosphere-related effects need to leave black
    // pixels unchanged
    if (ignoreBlackPixels) {
        hsb.z = hsb.z > czm_epsilon7 ? hsb.z + hsbShift.z : 0.0;
    } else {
        hsb.z = hsb.z + hsbShift.z;
    }
    hsb.z = clamp(hsb.z, 0.0, 1.0);

    // Convert shifted hsb back to rgb
    return czm_HSBToRGB(hsb);
}
`;var MM=`/**
 * Approximately computes spherical coordinates given a normal.
 * Uses approximate inverse trigonometry for speed and consistency,
 * since inverse trigonometry can differ from vendor-to-vendor and when compared with the CPU.
 *
 * @name czm_approximateSphericalCoordinates
 * @glslFunction
 *
 * @param {vec3} normal arbitrary-length normal.
 *
 * @returns {vec2} Approximate latitude and longitude spherical coordinates.
 */
vec2 czm_approximateSphericalCoordinates(vec3 normal) {
    // Project into plane with vertical for latitude
    float latitudeApproximation = czm_fastApproximateAtan(sqrt(normal.x * normal.x + normal.y * normal.y), normal.z);
    float longitudeApproximation = czm_fastApproximateAtan(normal.x, normal.y);
    return vec2(latitudeApproximation, longitudeApproximation);
}
`;var PM=`/**
 * Compute a rational approximation to tanh(x)
 *
 * @param {float} x A real number input
 * @returns {float} An approximation for tanh(x)
*/
float czm_approximateTanh(float x) {
    float x2 = x * x;
    return max(-1.0, min(1.0, x * (27.0 + x2) / (27.0 + 9.0 * x2)));
}
`;var NM=`/**
 * Determines if the fragment is back facing
 *
 * @name czm_backFacing
 * @glslFunction 
 * 
 * @returns {bool} <code>true</code> if the fragment is back facing; otherwise, <code>false</code>.
 */
bool czm_backFacing()
{
    // !gl_FrontFacing doesn't work as expected on Mac/Intel so use the more verbose form instead. See https://github.com/CesiumGS/cesium/pull/8494.
    return gl_FrontFacing == false;
}
`;var LM=`/**
 * Branchless ternary operator to be used when it's inexpensive to explicitly
 * evaluate both possibilities for a float expression.
 *
 * @name czm_branchFreeTernary
 * @glslFunction
 *
 * @param {bool} comparison A comparison statement
 * @param {float} a Value to return if the comparison is true.
 * @param {float} b Value to return if the comparison is false.
 *
 * @returns {float} equivalent of comparison ? a : b
 */
float czm_branchFreeTernary(bool comparison, float a, float b) {
    float useA = float(comparison);
    return a * useA + b * (1.0 - useA);
}

/**
 * Branchless ternary operator to be used when it's inexpensive to explicitly
 * evaluate both possibilities for a vec2 expression.
 *
 * @name czm_branchFreeTernary
 * @glslFunction
 *
 * @param {bool} comparison A comparison statement
 * @param {vec2} a Value to return if the comparison is true.
 * @param {vec2} b Value to return if the comparison is false.
 *
 * @returns {vec2} equivalent of comparison ? a : b
 */
vec2 czm_branchFreeTernary(bool comparison, vec2 a, vec2 b) {
    float useA = float(comparison);
    return a * useA + b * (1.0 - useA);
}

/**
 * Branchless ternary operator to be used when it's inexpensive to explicitly
 * evaluate both possibilities for a vec3 expression.
 *
 * @name czm_branchFreeTernary
 * @glslFunction
 *
 * @param {bool} comparison A comparison statement
 * @param {vec3} a Value to return if the comparison is true.
 * @param {vec3} b Value to return if the comparison is false.
 *
 * @returns {vec3} equivalent of comparison ? a : b
 */
vec3 czm_branchFreeTernary(bool comparison, vec3 a, vec3 b) {
    float useA = float(comparison);
    return a * useA + b * (1.0 - useA);
}

/**
 * Branchless ternary operator to be used when it's inexpensive to explicitly
 * evaluate both possibilities for a vec4 expression.
 *
 * @name czm_branchFreeTernary
 * @glslFunction
 *
 * @param {bool} comparison A comparison statement
 * @param {vec3} a Value to return if the comparison is true.
 * @param {vec3} b Value to return if the comparison is false.
 *
 * @returns {vec3} equivalent of comparison ? a : b
 */
vec4 czm_branchFreeTernary(bool comparison, vec4 a, vec4 b) {
    float useA = float(comparison);
    return a * useA + b * (1.0 - useA);
}
`;var FM=`
vec4 czm_cascadeColor(vec4 weights)
{
    return vec4(1.0, 0.0, 0.0, 1.0) * weights.x +
           vec4(0.0, 1.0, 0.0, 1.0) * weights.y +
           vec4(0.0, 0.0, 1.0, 1.0) * weights.z +
           vec4(1.0, 0.0, 1.0, 1.0) * weights.w;
}
`;var OM=`
uniform vec4 shadowMap_cascadeDistances;

float czm_cascadeDistance(vec4 weights)
{
    return dot(shadowMap_cascadeDistances, weights);
}
`;var kM=`
uniform mat4 shadowMap_cascadeMatrices[4];

mat4 czm_cascadeMatrix(vec4 weights)
{
    return shadowMap_cascadeMatrices[0] * weights.x +
           shadowMap_cascadeMatrices[1] * weights.y +
           shadowMap_cascadeMatrices[2] * weights.z +
           shadowMap_cascadeMatrices[3] * weights.w;
}
`;var UM=`
uniform vec4 shadowMap_cascadeSplits[2];

vec4 czm_cascadeWeights(float depthEye)
{
    // One component is set to 1.0 and all others set to 0.0.
    vec4 near = step(shadowMap_cascadeSplits[0], vec4(depthEye));
    vec4 far = step(depthEye, shadowMap_cascadeSplits[1]);
    return near * far;
}
`;var zM=`float getSignedDistance(vec2 uv, highp sampler2D clippingDistance) {
    float signedDistance = texture(clippingDistance, uv).r;
    return (signedDistance - 0.5) * 2.0;
}

void czm_clipPolygons(highp sampler2D clippingDistance, int extentsLength, vec2 clippingPosition, int regionIndex) {
    // Position is completely outside of polygons bounds
    vec2 rectUv = clippingPosition;
    if (regionIndex < 0 || rectUv.x <= 0.0 || rectUv.y <= 0.0 || rectUv.x >= 1.0 || rectUv.y >= 1.0) {
        #ifdef CLIPPING_INVERSE 
            discard;
        #endif
        return;
    }

    vec2 clippingDistanceTextureDimensions = vec2(textureSize(clippingDistance, 0));
    vec2 sampleOffset = max(1.0 / clippingDistanceTextureDimensions, vec2(0.005));
    float dimension = float(extentsLength);
    if (extentsLength > 2) {
       dimension = ceil(log2(float(extentsLength)));
    }

    vec2 textureOffset = vec2(mod(float(regionIndex), dimension), floor(float(regionIndex) / dimension)) / dimension;
    vec2 uv = textureOffset + rectUv / dimension;

    float signedDistance = getSignedDistance(uv, clippingDistance);

    #ifdef CLIPPING_INVERSE
    if (signedDistance > 0.0)  {
        discard;
    }
    #else
    if (signedDistance < 0.0)  {
        discard;
    }
    #endif
}
`;var GM=`/**
 * DOC_TBA
 *
 * @name czm_columbusViewMorph
 * @glslFunction
 */
vec4 czm_columbusViewMorph(vec4 position2D, vec4 position3D, float time)
{
    // Just linear for now.
    vec3 p = mix(position2D.xyz, position3D.xyz, time);
    return vec4(p, 1.0);
}
`;var HM=`/**
 * Compute the atmosphere color, applying Rayleigh and Mie scattering. This
 * builtin uses automatic uniforms so the atmophere settings are synced with the
 * state of the Scene, even in other contexts like Model.
 *
 * @name czm_computeAtmosphereColor
 * @glslFunction
 *
 * @param {vec3} positionWC Position of the fragment in world coords (low precision)
 * @param {vec3} lightDirection Light direction from the sun or other light source.
 * @param {vec3} rayleighColor The Rayleigh scattering color computed by a scattering function
 * @param {vec3} mieColor The Mie scattering color computed by a scattering function
 * @param {float} opacity The opacity computed by a scattering function.
 */
vec4 czm_computeAtmosphereColor(
    vec3 positionWC,
    vec3 lightDirection,
    vec3 rayleighColor,
    vec3 mieColor,
    float opacity
) {
    // Setup the primary ray: from the camera position to the vertex position.
    vec3 cameraToPositionWC = positionWC - czm_viewerPositionWC;
    vec3 cameraToPositionWCDirection = normalize(cameraToPositionWC);

    float cosAngle = dot(cameraToPositionWCDirection, lightDirection);
    float cosAngleSq = cosAngle * cosAngle;

    float G = czm_atmosphereMieAnisotropy;
    float GSq = G * G;

    // The Rayleigh phase function.
    float rayleighPhase = 3.0 / (50.2654824574) * (1.0 + cosAngleSq);
    // The Mie phase function.
    float miePhase = 3.0 / (25.1327412287) * ((1.0 - GSq) * (cosAngleSq + 1.0)) / (pow(1.0 + GSq - 2.0 * cosAngle * G, 1.5) * (2.0 + GSq));

    // The final color is generated by combining the effects of the Rayleigh and Mie scattering.
    vec3 rayleigh = rayleighPhase * rayleighColor;
    vec3 mie = miePhase * mieColor;

    vec3 color = (rayleigh + mie) * czm_atmosphereLightIntensity;

    return vec4(color, opacity);
}

/**
 * Compute the atmosphere color, applying Rayleigh and Mie scattering. This
 * builtin uses automatic uniforms so the atmophere settings are synced with the
 * state of the Scene, even in other contexts like Model.
 *
 * @name czm_computeAtmosphereColor
 * @glslFunction
 *
 * @param {czm_ray} primaryRay Ray from the origin to sky fragment to in world coords (low precision)
 * @param {vec3} lightDirection Light direction from the sun or other light source.
 * @param {vec3} rayleighColor The Rayleigh scattering color computed by a scattering function
 * @param {vec3} mieColor The Mie scattering color computed by a scattering function
 * @param {float} opacity The opacity computed by a scattering function.
 */
vec4 czm_computeAtmosphereColor(
    czm_ray primaryRay,
    vec3 lightDirection,
    vec3 rayleighColor,
    vec3 mieColor,
    float opacity
) {
    vec3 direction = normalize(primaryRay.direction);

    float cosAngle = dot(direction, lightDirection);
    float cosAngleSq = cosAngle * cosAngle;

    float G = czm_atmosphereMieAnisotropy;
    float GSq = G * G;

    // The Rayleigh phase function.
    float rayleighPhase = 3.0 / (50.2654824574) * (1.0 + cosAngleSq);
    // The Mie phase function.
    float miePhase = 3.0 / (25.1327412287) * ((1.0 - GSq) * (cosAngleSq + 1.0)) / (pow(1.0 + GSq - 2.0 * cosAngle * G, 1.5) * (2.0 + GSq));

    // The final color is generated by combining the effects of the Rayleigh and Mie scattering.
    vec3 rayleigh = rayleighPhase * rayleighColor;
    vec3 mie = miePhase * mieColor;

    vec3 color = (rayleigh + mie) * czm_atmosphereLightIntensity;

    return vec4(color, opacity);
}

`;var VM=`/**
 * Compute atmosphere scattering for the ground atmosphere and fog. This method
 * uses automatic uniforms so it is always synced with the scene settings.
 *
 * @name czm_computeGroundAtmosphereScattering
 * @glslfunction
 *
 * @param {vec3} positionWC The position of the fragment in world coordinates.
 * @param {vec3} lightDirection The direction of the light to calculate the scattering from.
 * @param {vec3} rayleighColor The variable the Rayleigh scattering will be written to.
 * @param {vec3} mieColor The variable the Mie scattering will be written to.
 * @param {float} opacity The variable the transmittance will be written to.
 */
void czm_computeGroundAtmosphereScattering(vec3 positionWC, vec3 lightDirection, out vec3 rayleighColor, out vec3 mieColor, out float opacity) {
    vec3 cameraToPositionWC = positionWC - czm_viewerPositionWC;
    vec3 cameraToPositionWCDirection = normalize(cameraToPositionWC);
    czm_ray primaryRay = czm_ray(czm_viewerPositionWC, cameraToPositionWCDirection);

    float atmosphereInnerRadius = length(positionWC);

    czm_computeScattering(
        primaryRay,
        length(cameraToPositionWC),
        lightDirection,
        atmosphereInnerRadius,
        rayleighColor,
        mieColor,
        opacity
    );
}
`;var jM=`/**
 * Returns a position in model coordinates relative to eye taking into
 * account the current scene mode: 3D, 2D, or Columbus view.
 * <p>
 * This uses standard position attributes, <code>position3DHigh</code>, 
 * <code>position3DLow</code>, <code>position2DHigh</code>, and <code>position2DLow</code>, 
 * and should be used when writing a vertex shader for an {@link Appearance}.
 * </p>
 *
 * @name czm_computePosition
 * @glslFunction
 *
 * @returns {vec4} The position relative to eye.
 *
 * @example
 * vec4 p = czm_computePosition();
 * v_positionEC = (czm_modelViewRelativeToEye * p).xyz;
 * gl_Position = czm_modelViewProjectionRelativeToEye * p;
 *
 * @see czm_translateRelativeToEye
 */
vec4 czm_computePosition();
`;var YM=`/**
 * This function computes the colors contributed by Rayliegh and Mie scattering on a given ray, as well as
 * the transmittance value for the ray. This function uses automatic uniforms
 * so the atmosphere settings are always synced with the current scene.
 *
 * @name czm_computeScattering
 * @glslfunction
 *
 * @param {czm_ray} primaryRay The ray from the camera to the position.
 * @param {float} primaryRayLength The length of the primary ray.
 * @param {vec3} lightDirection The direction of the light to calculate the scattering from.
 * @param {vec3} rayleighColor The variable the Rayleigh scattering will be written to.
 * @param {vec3} mieColor The variable the Mie scattering will be written to.
 * @param {float} opacity The variable the transmittance will be written to.
 */
void czm_computeScattering(
    czm_ray primaryRay,
    float primaryRayLength,
    vec3 lightDirection,
    float atmosphereInnerRadius,
    out vec3 rayleighColor,
    out vec3 mieColor,
    out float opacity
) {
    const float ATMOSPHERE_THICKNESS = 111e3; // The thickness of the atmosphere in meters.
    const int PRIMARY_STEPS_MAX = 16; // Maximum number of times the ray from the camera to the world position (primary ray) is sampled.
    const int LIGHT_STEPS_MAX = 4; // Maximum number of times the light is sampled from the light source's intersection with the atmosphere to a sample position on the primary ray.

    // Initialize the default scattering amounts to 0.
    rayleighColor = vec3(0.0);
    mieColor = vec3(0.0);
    opacity = 0.0;

    float atmosphereOuterRadius = atmosphereInnerRadius + ATMOSPHERE_THICKNESS;

    vec3 origin = vec3(0.0);

    // Calculate intersection from the camera to the outer ring of the atmosphere.
    czm_raySegment primaryRayAtmosphereIntersect = czm_raySphereIntersectionInterval(primaryRay, origin, atmosphereOuterRadius);

    // Return empty colors if no intersection with the atmosphere geometry.
    if (primaryRayAtmosphereIntersect == czm_emptyRaySegment) {
        return;
    }

    // To deal with smaller values of PRIMARY_STEPS (e.g. 4)
    // we implement a split strategy: sky or horizon.
    // For performance reasons, instead of a if/else branch
    // a soft choice is implemented through a weight 0.0 <= w_stop_gt_lprl <= 1.0
    float x = 1e-7 * primaryRayAtmosphereIntersect.stop / length(primaryRayLength);
    // Value close to 0.0: close to the horizon
    // Value close to 1.0: above in the sky
    float w_stop_gt_lprl = 0.5 * (1.0 + czm_approximateTanh(x));

    // The ray should start from the first intersection with the outer atmopshere, or from the camera position, if it is inside the atmosphere.
    float start_0 = primaryRayAtmosphereIntersect.start;
    primaryRayAtmosphereIntersect.start = max(primaryRayAtmosphereIntersect.start, 0.0);
    // The ray should end at the exit from the atmosphere or at the distance to the vertex, whichever is smaller.
    primaryRayAtmosphereIntersect.stop = min(primaryRayAtmosphereIntersect.stop, length(primaryRayLength));

    // For the number of ray steps, distinguish inside or outside atmosphere (outer space)
    // (1) from outer space we have to use more ray steps to get a realistic rendering
    // (2) within atmosphere we need fewer steps for faster rendering
    float x_o_a = start_0 - ATMOSPHERE_THICKNESS; // ATMOSPHERE_THICKNESS used as an ad-hoc constant, no precise meaning here, only the order of magnitude matters
    float w_inside_atmosphere = 1.0 - 0.5 * (1.0 + czm_approximateTanh(x_o_a));
    int PRIMARY_STEPS = PRIMARY_STEPS_MAX - int(w_inside_atmosphere * 12.0); // Number of times the ray from the camera to the world position (primary ray) is sampled.
    int LIGHT_STEPS = LIGHT_STEPS_MAX - int(w_inside_atmosphere * 2.0); // Number of times the light is sampled from the light source's intersection with the atmosphere to a sample position on the primary ray.

    // Setup for sampling positions along the ray - starting from the intersection with the outer ring of the atmosphere.
    float rayPositionLength = primaryRayAtmosphereIntersect.start;
    // (1) Outside the atmosphere: constant rayStepLength
    // (2) Inside atmosphere: variable rayStepLength to compensate the rough rendering of the smaller number of ray steps
    float totalRayLength = primaryRayAtmosphereIntersect.stop - rayPositionLength;
    float rayStepLengthIncrease = w_inside_atmosphere * ((1.0 - w_stop_gt_lprl) * totalRayLength / (float(PRIMARY_STEPS * (PRIMARY_STEPS + 1)) / 2.0));
    float rayStepLength = max(1.0 - w_inside_atmosphere, w_stop_gt_lprl) * totalRayLength / max(7.0 * w_inside_atmosphere, float(PRIMARY_STEPS));

    vec3 rayleighAccumulation = vec3(0.0);
    vec3 mieAccumulation = vec3(0.0);
    vec2 opticalDepth = vec2(0.0);
    vec2 heightScale = vec2(czm_atmosphereRayleighScaleHeight, czm_atmosphereMieScaleHeight);

    // Sample positions on the primary ray.
    for (int i = 0; i < PRIMARY_STEPS_MAX; ++i) {

        // The loop should be: for (int i = 0; i < PRIMARY_STEPS; ++i) {...} but WebGL1 cannot
        // loop with non-constant condition, so it has to break early instead
        if (i >= PRIMARY_STEPS) {
            break;
        }

        // Calculate sample position along viewpoint ray.
        vec3 samplePosition = primaryRay.origin + primaryRay.direction * (rayPositionLength + rayStepLength);

        // Calculate height of sample position above ellipsoid.
        float sampleHeight = length(samplePosition) - atmosphereInnerRadius;

        // Calculate and accumulate density of particles at the sample position.
        vec2 sampleDensity = exp(-sampleHeight / heightScale) * rayStepLength;
        opticalDepth += sampleDensity;

        // Generate ray from the sample position segment to the light source, up to the outer ring of the atmosphere.
        czm_ray lightRay = czm_ray(samplePosition, lightDirection);
        czm_raySegment lightRayAtmosphereIntersect = czm_raySphereIntersectionInterval(lightRay, origin, atmosphereOuterRadius);

        float lightStepLength = lightRayAtmosphereIntersect.stop / float(LIGHT_STEPS);
        float lightPositionLength = 0.0;

        vec2 lightOpticalDepth = vec2(0.0);

        // Sample positions along the light ray, to accumulate incidence of light on the latest sample segment.
        for (int j = 0; j < LIGHT_STEPS_MAX; ++j) {

            // The loop should be: for (int j = 0; i < LIGHT_STEPS; ++j) {...} but WebGL1 cannot
            // loop with non-constant condition, so it has to break early instead
            if (j >= LIGHT_STEPS) {
                break;
            }

            // Calculate sample position along light ray.
            vec3 lightPosition = samplePosition + lightDirection * (lightPositionLength + lightStepLength * 0.5);

            // Calculate height of the light sample position above ellipsoid.
            float lightHeight = length(lightPosition) - atmosphereInnerRadius;

            // Calculate density of photons at the light sample position.
            lightOpticalDepth += exp(-lightHeight / heightScale) * lightStepLength;

            // Increment distance on light ray.
            lightPositionLength += lightStepLength;
        }

        // Compute attenuation via the primary ray and the light ray.
        vec3 attenuation = exp(-((czm_atmosphereMieCoefficient * (opticalDepth.y + lightOpticalDepth.y)) + (czm_atmosphereRayleighCoefficient * (opticalDepth.x + lightOpticalDepth.x))));

        // Accumulate the scattering.
        rayleighAccumulation += sampleDensity.x * attenuation;
        mieAccumulation += sampleDensity.y * attenuation;

        // Increment distance on primary ray.
        rayPositionLength += (rayStepLength += rayStepLengthIncrease);
    }

    // Compute the scattering amount.
    rayleighColor = czm_atmosphereRayleighCoefficient * rayleighAccumulation;
    mieColor = czm_atmosphereMieCoefficient * mieAccumulation;

    // Compute the transmittance i.e. how much light is passing through the atmosphere.
    opacity = length(exp(-((czm_atmosphereMieCoefficient * opticalDepth.y) + (czm_atmosphereRayleighCoefficient * opticalDepth.x))));
}
`;var WM=`/**
 * @private
 */
vec2 cordic(float angle)
{
// Scale the vector by the appropriate factor for the 24 iterations to follow.
    vec2 vector = vec2(6.0725293500888267e-1, 0.0);
// Iteration 1
    float sense = (angle < 0.0) ? -1.0 : 1.0;
 //   float factor = sense * 1.0;  // 2^-0
    mat2 rotation = mat2(1.0, sense, -sense, 1.0);
    vector = rotation * vector;
    angle -= sense * 7.8539816339744828e-1;  // atan(2^-0)
// Iteration 2
    sense = (angle < 0.0) ? -1.0 : 1.0;
    float factor = sense * 5.0e-1;  // 2^-1
    rotation[0][1] = factor;
    rotation[1][0] = -factor;
    vector = rotation * vector;
    angle -= sense * 4.6364760900080609e-1;  // atan(2^-1)
// Iteration 3
    sense = (angle < 0.0) ? -1.0 : 1.0;
    factor = sense * 2.5e-1;  // 2^-2
    rotation[0][1] = factor;
    rotation[1][0] = -factor;
    vector = rotation * vector;
    angle -= sense * 2.4497866312686414e-1;  // atan(2^-2)
// Iteration 4
    sense = (angle < 0.0) ? -1.0 : 1.0;
    factor = sense * 1.25e-1;  // 2^-3
    rotation[0][1] = factor;
    rotation[1][0] = -factor;
    vector = rotation * vector;
    angle -= sense * 1.2435499454676144e-1;  // atan(2^-3)
// Iteration 5
    sense = (angle < 0.0) ? -1.0 : 1.0;
    factor = sense * 6.25e-2;  // 2^-4
    rotation[0][1] = factor;
    rotation[1][0] = -factor;
    vector = rotation * vector;
    angle -= sense * 6.2418809995957350e-2;  // atan(2^-4)
// Iteration 6
    sense = (angle < 0.0) ? -1.0 : 1.0;
    factor = sense * 3.125e-2;  // 2^-5
    rotation[0][1] = factor;
    rotation[1][0] = -factor;
    vector = rotation * vector;
    angle -= sense * 3.1239833430268277e-2;  // atan(2^-5)
// Iteration 7
    sense = (angle < 0.0) ? -1.0 : 1.0;
    factor = sense * 1.5625e-2;  // 2^-6
    rotation[0][1] = factor;
    rotation[1][0] = -factor;
    vector = rotation * vector;
    angle -= sense * 1.5623728620476831e-2;  // atan(2^-6)
// Iteration 8
    sense = (angle < 0.0) ? -1.0 : 1.0;
    factor = sense * 7.8125e-3;  // 2^-7
    rotation[0][1] = factor;
    rotation[1][0] = -factor;
    vector = rotation * vector;
    angle -= sense * 7.8123410601011111e-3;  // atan(2^-7)
// Iteration 9
    sense = (angle < 0.0) ? -1.0 : 1.0;
    factor = sense * 3.90625e-3;  // 2^-8
    rotation[0][1] = factor;
    rotation[1][0] = -factor;
    vector = rotation * vector;
    angle -= sense * 3.9062301319669718e-3;  // atan(2^-8)
// Iteration 10
    sense = (angle < 0.0) ? -1.0 : 1.0;
    factor = sense * 1.953125e-3;  // 2^-9
    rotation[0][1] = factor;
    rotation[1][0] = -factor;
    vector = rotation * vector;
    angle -= sense * 1.9531225164788188e-3;  // atan(2^-9)
// Iteration 11
    sense = (angle < 0.0) ? -1.0 : 1.0;
    factor = sense * 9.765625e-4;  // 2^-10
    rotation[0][1] = factor;
    rotation[1][0] = -factor;
    vector = rotation * vector;
    angle -= sense * 9.7656218955931946e-4;  // atan(2^-10)
// Iteration 12
    sense = (angle < 0.0) ? -1.0 : 1.0;
    factor = sense * 4.8828125e-4;  // 2^-11
    rotation[0][1] = factor;
    rotation[1][0] = -factor;
    vector = rotation * vector;
    angle -= sense * 4.8828121119489829e-4;  // atan(2^-11)
// Iteration 13
    sense = (angle < 0.0) ? -1.0 : 1.0;
    factor = sense * 2.44140625e-4;  // 2^-12
    rotation[0][1] = factor;
    rotation[1][0] = -factor;
    vector = rotation * vector;
    angle -= sense * 2.4414062014936177e-4;  // atan(2^-12)
// Iteration 14
    sense = (angle < 0.0) ? -1.0 : 1.0;
    factor = sense * 1.220703125e-4;  // 2^-13
    rotation[0][1] = factor;
    rotation[1][0] = -factor;
    vector = rotation * vector;
    angle -= sense * 1.2207031189367021e-4;  // atan(2^-13)
// Iteration 15
    sense = (angle < 0.0) ? -1.0 : 1.0;
    factor = sense * 6.103515625e-5;  // 2^-14
    rotation[0][1] = factor;
    rotation[1][0] = -factor;
    vector = rotation * vector;
    angle -= sense * 6.1035156174208773e-5;  // atan(2^-14)
// Iteration 16
    sense = (angle < 0.0) ? -1.0 : 1.0;
    factor = sense * 3.0517578125e-5;  // 2^-15
    rotation[0][1] = factor;
    rotation[1][0] = -factor;
    vector = rotation * vector;
    angle -= sense * 3.0517578115526096e-5;  // atan(2^-15)
// Iteration 17
    sense = (angle < 0.0) ? -1.0 : 1.0;
    factor = sense * 1.52587890625e-5;  // 2^-16
    rotation[0][1] = factor;
    rotation[1][0] = -factor;
    vector = rotation * vector;
    angle -= sense * 1.5258789061315762e-5;  // atan(2^-16)
// Iteration 18
    sense = (angle < 0.0) ? -1.0 : 1.0;
    factor = sense * 7.62939453125e-6;  // 2^-17
    rotation[0][1] = factor;
    rotation[1][0] = -factor;
    vector = rotation * vector;
    angle -= sense * 7.6293945311019700e-6;  // atan(2^-17)
// Iteration 19
    sense = (angle < 0.0) ? -1.0 : 1.0;
    factor = sense * 3.814697265625e-6;  // 2^-18
    rotation[0][1] = factor;
    rotation[1][0] = -factor;
    vector = rotation * vector;
    angle -= sense * 3.8146972656064961e-6;  // atan(2^-18)
// Iteration 20
    sense = (angle < 0.0) ? -1.0 : 1.0;
    factor = sense * 1.9073486328125e-6;  // 2^-19
    rotation[0][1] = factor;
    rotation[1][0] = -factor;
    vector = rotation * vector;
    angle -= sense * 1.9073486328101870e-6;  // atan(2^-19)
// Iteration 21
    sense = (angle < 0.0) ? -1.0 : 1.0;
    factor = sense * 9.5367431640625e-7;  // 2^-20
    rotation[0][1] = factor;
    rotation[1][0] = -factor;
    vector = rotation * vector;
    angle -= sense * 9.5367431640596084e-7;  // atan(2^-20)
// Iteration 22
    sense = (angle < 0.0) ? -1.0 : 1.0;
    factor = sense * 4.76837158203125e-7;  // 2^-21
    rotation[0][1] = factor;
    rotation[1][0] = -factor;
    vector = rotation * vector;
    angle -= sense * 4.7683715820308884e-7;  // atan(2^-21)
// Iteration 23
    sense = (angle < 0.0) ? -1.0 : 1.0;
    factor = sense * 2.384185791015625e-7;  // 2^-22
    rotation[0][1] = factor;
    rotation[1][0] = -factor;
    vector = rotation * vector;
    angle -= sense * 2.3841857910155797e-7;  // atan(2^-22)
// Iteration 24
    sense = (angle < 0.0) ? -1.0 : 1.0;
    factor = sense * 1.1920928955078125e-7;  // 2^-23
    rotation[0][1] = factor;
    rotation[1][0] = -factor;
    vector = rotation * vector;
//    angle -= sense * 1.1920928955078068e-7;  // atan(2^-23)

    return vector;
}

/**
 * Computes the cosine and sine of the provided angle using the CORDIC algorithm.
 *
 * @name czm_cosineAndSine
 * @glslFunction
 *
 * @param {float} angle The angle in radians.
 *
 * @returns {vec2} The resulting cosine of the angle (as the x coordinate) and sine of the angle (as the y coordinate).
 *
 * @example
 * vec2 v = czm_cosineAndSine(czm_piOverSix);
 * float cosine = v.x;
 * float sine = v.y;
 */
vec2 czm_cosineAndSine(float angle)
{
    if (angle < -czm_piOverTwo || angle > czm_piOverTwo)
    {
        if (angle < 0.0)
        {
            return -cordic(angle + czm_pi);
        }
        else
        {
            return -cordic(angle - czm_pi);
        }
    }
    else
    {
        return cordic(angle);
    }
}
`;var qM=`/**
 * Decompresses texture coordinates that were packed into a single float.
 *
 * @name czm_decompressTextureCoordinates
 * @glslFunction
 *
 * @param {float} encoded The compressed texture coordinates.
 * @returns {vec2} The decompressed texture coordinates.
 */
 vec2 czm_decompressTextureCoordinates(float encoded)
 {
    float temp = encoded / 4096.0;
    float xZeroTo4095 = floor(temp);
    float stx = xZeroTo4095 / 4095.0;
    float sty = (encoded - xZeroTo4095 * 4096.0) / 4095.0;
    return vec2(stx, sty);
 }
`;var JM=`// emulated noperspective
#if (__VERSION__ == 300 || defined(GL_EXT_frag_depth)) && !defined(LOG_DEPTH)
out float v_WindowZ;
#endif

/**
 * Emulates GL_DEPTH_CLAMP, which is not available in WebGL 1 or 2.
 * GL_DEPTH_CLAMP clamps geometry that is outside the near and far planes, 
 * capping the shadow volume. More information here: 
 * https://www.khronos.org/registry/OpenGL/extensions/ARB/ARB_depth_clamp.txt.
 *
 * When GL_EXT_frag_depth is available we emulate GL_DEPTH_CLAMP by ensuring 
 * no geometry gets clipped by setting the clip space z value to 0.0 and then
 * sending the unaltered screen space z value (using emulated noperspective
 * interpolation) to the frag shader where it is clamped to [0,1] and then
 * written with gl_FragDepth (see czm_writeDepthClamp). This technique is based on:
 * https://stackoverflow.com/questions/5960757/how-to-emulate-gl-depth-clamp-nv.
 *
 * When GL_EXT_frag_depth is not available, which is the case on some mobile 
 * devices, we must attempt to fix this only in the vertex shader. 
 * The approach is to clamp the z value to the far plane, which closes the 
 * shadow volume but also distorts the geometry, so there can still be artifacts
 * on frustum seams.
 *
 * @name czm_depthClamp
 * @glslFunction
 *
 * @param {vec4} coords The vertex in clip coordinates.
 * @returns {vec4} The modified vertex.
 *
 * @example
 * gl_Position = czm_depthClamp(czm_modelViewProjection * vec4(position, 1.0));
 *
 * @see czm_writeDepthClamp
 */
vec4 czm_depthClamp(vec4 coords)
{
#ifndef LOG_DEPTH
#if __VERSION__ == 300 || defined(GL_EXT_frag_depth)
    v_WindowZ = (0.5 * (coords.z / coords.w) + 0.5) * coords.w;
    coords.z = 0.0;
#else
    coords.z = min(coords.z, coords.w);
#endif
#endif
    return coords;
}
`;var KM=`/**
 * Computes a 3x3 rotation matrix that transforms vectors from an ellipsoid's east-north-up coordinate system 
 * to eye coordinates.  In east-north-up coordinates, x points east, y points north, and z points along the 
 * surface normal.  East-north-up can be used as an ellipsoid's tangent space for operations such as bump mapping.
 * <br /><br />
 * The ellipsoid is assumed to be centered at the model coordinate's origin.
 *
 * @name czm_eastNorthUpToEyeCoordinates
 * @glslFunction
 *
 * @param {vec3} positionMC The position on the ellipsoid in model coordinates.
 * @param {vec3} normalEC The normalized ellipsoid surface normal, at <code>positionMC</code>, in eye coordinates.
 *
 * @returns {mat3} A 3x3 rotation matrix that transforms vectors from the east-north-up coordinate system to eye coordinates.
 *
 * @example
 * // Transform a vector defined in the east-north-up coordinate 
 * // system, (0, 0, 1) which is the surface normal, to eye 
 * // coordinates.
 * mat3 m = czm_eastNorthUpToEyeCoordinates(positionMC, normalEC);
 * vec3 normalEC = m * vec3(0.0, 0.0, 1.0);
 */
mat3 czm_eastNorthUpToEyeCoordinates(vec3 positionMC, vec3 normalEC)
{
    vec3 tangentMC = normalize(vec3(-positionMC.y, positionMC.x, 0.0));  // normalized surface tangent in model coordinates
    vec3 tangentEC = normalize(czm_normal3D * tangentMC);                // normalized surface tangent in eye coordinates
    vec3 bitangentEC = normalize(cross(normalEC, tangentEC));            // normalized surface bitangent in eye coordinates

    return mat3(
        tangentEC.x,   tangentEC.y,   tangentEC.z,
        bitangentEC.x, bitangentEC.y, bitangentEC.z,
        normalEC.x,    normalEC.y,    normalEC.z);
}
`;var XM=`/**
 * DOC_TBA
 *
 * @name czm_ellipsoidContainsPoint
 * @glslFunction
 *
 */
bool czm_ellipsoidContainsPoint(vec3 ellipsoid_inverseRadii, vec3 point)
{
    vec3 scaled = ellipsoid_inverseRadii * (czm_inverseModelView * vec4(point, 1.0)).xyz;
    return (dot(scaled, scaled) <= 1.0);
}
`;var ZM=`/**
 * Approximate uv coordinates based on the ellipsoid normal.
 *
 * @name czm_ellipsoidTextureCoordinates
 * @glslFunction
 */
vec2 czm_ellipsoidTextureCoordinates(vec3 normal)
{
    return vec2(atan(normal.y, normal.x) * czm_oneOverTwoPi + 0.5, asin(normal.z) * czm_oneOverPi + 0.5);
}
`;var $M=`/**
 * Compares <code>left</code> and <code>right</code> componentwise. Returns <code>true</code>
 * if they are within <code>epsilon</code> and <code>false</code> otherwise. The inputs
 * <code>left</code> and <code>right</code> can be <code>float</code>s, <code>vec2</code>s,
 * <code>vec3</code>s, or <code>vec4</code>s.
 *
 * @name czm_equalsEpsilon
 * @glslFunction
 *
 * @param {} left The first vector.
 * @param {} right The second vector.
 * @param {float} epsilon The epsilon to use for equality testing.
 * @returns {bool} <code>true</code> if the components are within <code>epsilon</code> and <code>false</code> otherwise.
 *
 * @example
 * // GLSL declarations
 * bool czm_equalsEpsilon(float left, float right, float epsilon);
 * bool czm_equalsEpsilon(vec2 left, vec2 right, float epsilon);
 * bool czm_equalsEpsilon(vec3 left, vec3 right, float epsilon);
 * bool czm_equalsEpsilon(vec4 left, vec4 right, float epsilon);
 */
bool czm_equalsEpsilon(vec4 left, vec4 right, float epsilon) {
    return all(lessThanEqual(abs(left - right), vec4(epsilon)));
}

bool czm_equalsEpsilon(vec3 left, vec3 right, float epsilon) {
    return all(lessThanEqual(abs(left - right), vec3(epsilon)));
}

bool czm_equalsEpsilon(vec2 left, vec2 right, float epsilon) {
    return all(lessThanEqual(abs(left - right), vec2(epsilon)));
}

bool czm_equalsEpsilon(float left, float right, float epsilon) {
    return (abs(left - right) <= epsilon);
}
`;var eP=`/**
 * DOC_TBA
 *
 * @name czm_eyeOffset
 * @glslFunction
 *
 * @param {vec4} positionEC DOC_TBA.
 * @param {vec3} eyeOffset DOC_TBA.
 *
 * @returns {vec4} DOC_TBA.
 */
vec4 czm_eyeOffset(vec4 positionEC, vec3 eyeOffset)
{
    // This equation is approximate in x and y.
    vec4 p = positionEC;
    vec4 zEyeOffset = normalize(p) * eyeOffset.z;
    p.xy += eyeOffset.xy + zEyeOffset.xy;
    p.z += zEyeOffset.z;
    return p;
}
`;var tP=`/**
 * Transforms a position from eye to window coordinates.  The transformation
 * from eye to clip coordinates is done using {@link czm_projection}.
 * The transform from normalized device coordinates to window coordinates is
 * done using {@link czm_viewportTransformation}, which assumes a depth range
 * of <code>near = 0</code> and <code>far = 1</code>.
 * <br /><br />
 * This transform is useful when there is a need to manipulate window coordinates
 * in a vertex shader as done by {@link BillboardCollection}.
 *
 * @name czm_eyeToWindowCoordinates
 * @glslFunction
 *
 * @param {vec4} position The position in eye coordinates to transform.
 *
 * @returns {vec4} The transformed position in window coordinates.
 *
 * @see czm_modelToWindowCoordinates
 * @see czm_projection
 * @see czm_viewportTransformation
 * @see BillboardCollection
 *
 * @example
 * vec4 positionWC = czm_eyeToWindowCoordinates(positionEC);
 */
vec4 czm_eyeToWindowCoordinates(vec4 positionEC)
{
    vec4 q = czm_projection * positionEC;                        // clip coordinates
    q.xyz /= q.w;                                                // normalized device coordinates
    q.xyz = (czm_viewportTransformation * vec4(q.xyz, 1.0)).xyz; // window coordinates
    return q;
}
`;var nP=`/**
 * Approxiamtes atan over the range [0, 1]. Safe to flip output for negative input.
 *
 * Based on Michal Drobot's approximation from ShaderFastLibs, which in turn is based on
 * "Efficient approximations for the arctangent function," Rajan, S. Sichun Wang Inkol, R. Joyal, A., May 2006.
 * Adapted from ShaderFastLibs under MIT License.
 *
 * Chosen for the following characteristics over range [0, 1]:
 * - basically no error at 0 and 1, important for getting around range limit (naive atan2 via atan requires infinite range atan)
 * - no visible artifacts from first-derivative discontinuities, unlike latitude via range-reduced sqrt asin approximations (at equator)
 *
 * The original code is x * (-0.1784 * abs(x) - 0.0663 * x * x + 1.0301);
 * Removed the abs() in here because it isn't needed, the input range is guaranteed as [0, 1] by how we're approximating atan2.
 *
 * @name czm_fastApproximateAtan
 * @glslFunction
 *
 * @param {float} x Value between 0 and 1 inclusive.
 *
 * @returns {float} Approximation of atan(x)
 */
float czm_fastApproximateAtan(float x) {
    return x * (-0.1784 * x - 0.0663 * x * x + 1.0301);
}

/**
 * Approximation of atan2.
 *
 * Range reduction math based on nvidia's cg reference implementation for atan2: http://developer.download.nvidia.com/cg/atan2.html
 * However, we replaced their atan curve with Michael Drobot's (see above).
 *
 * @name czm_fastApproximateAtan
 * @glslFunction
 *
 * @param {float} x Value between -1 and 1 inclusive.
 * @param {float} y Value between -1 and 1 inclusive.
 *
 * @returns {float} Approximation of atan2(x, y)
 */
float czm_fastApproximateAtan(float x, float y) {
    // atan approximations are usually only reliable over [-1, 1], or, in our case, [0, 1] due to modifications.
    // So range-reduce using abs and by flipping whether x or y is on top.
    float t = abs(x); // t used as swap and atan result.
    float opposite = abs(y);
    float adjacent = max(t, opposite);
    opposite = min(t, opposite);

    t = czm_fastApproximateAtan(opposite / adjacent);

    // Undo range reduction
    t = czm_branchFreeTernary(abs(y) > abs(x), czm_piOverTwo - t, t);
    t = czm_branchFreeTernary(x < 0.0, czm_pi - t, t);
    t = czm_branchFreeTernary(y < 0.0, -t, t);
    return t;
}
`;var iP=`/**
 * Gets the color with fog at a distance from the camera.
 *
 * @name czm_fog
 * @glslFunction
 *
 * @param {float} distanceToCamera The distance to the camera in meters.
 * @param {vec3} color The original color.
 * @param {vec3} fogColor The color of the fog.
 *
 * @returns {vec3} The color adjusted for fog at the distance from the camera.
 */
vec3 czm_fog(float distanceToCamera, vec3 color, vec3 fogColor)
{
    float scalar = distanceToCamera * czm_fogDensity;
    float fog = 1.0 - exp(-(scalar * scalar));
    return mix(color, fogColor, fog);
}

/**
 * Gets the color with fog at a distance from the camera.
 *
 * @name czm_fog
 * @glslFunction
 *
 * @param {float} distanceToCamera The distance to the camera in meters.
 * @param {vec3} color The original color.
 * @param {vec3} fogColor The color of the fog.
 * @param {float} fogModifierConstant A constant to modify the appearance of fog.
 *
 * @returns {vec3} The color adjusted for fog at the distance from the camera.
 */
vec3 czm_fog(float distanceToCamera, vec3 color, vec3 fogColor, float fogModifierConstant)
{
    float scalar = distanceToCamera * czm_fogDensity;
    float fog = 1.0 - exp(-((fogModifierConstant * scalar + fogModifierConstant) * (scalar * (1.0 + fogModifierConstant))));
    return mix(color, fogColor, fog);
}
`;var oP=`/**
 * Converts a color from RGB space to linear space.
 *
 * @name czm_gammaCorrect
 * @glslFunction
 *
 * @param {vec3} color The color in RGB space.
 * @returns {vec3} The color in linear space.
 */
vec3 czm_gammaCorrect(vec3 color) {
#ifdef HDR
    color = pow(color, vec3(czm_gamma));
#endif
    return color;
}

vec4 czm_gammaCorrect(vec4 color) {
#ifdef HDR
    color.rgb = pow(color.rgb, vec3(czm_gamma));
#endif
    return color;
}
`;var rP=`/**
 * DOC_TBA
 *
 * @name czm_geodeticSurfaceNormal
 * @glslFunction
 *
 * @param {vec3} positionOnEllipsoid DOC_TBA
 * @param {vec3} ellipsoidCenter DOC_TBA
 * @param {vec3} oneOverEllipsoidRadiiSquared DOC_TBA
 * 
 * @returns {vec3} DOC_TBA.
 */
vec3 czm_geodeticSurfaceNormal(vec3 positionOnEllipsoid, vec3 ellipsoidCenter, vec3 oneOverEllipsoidRadiiSquared)
{
    return normalize((positionOnEllipsoid - ellipsoidCenter) * oneOverEllipsoidRadiiSquared);
}
`;var aP=`/**
 * An czm_material with default values. Every material's czm_getMaterial
 * should use this default material as a base for the material it returns.
 * The default normal value is given by materialInput.normalEC.
 *
 * @name czm_getDefaultMaterial
 * @glslFunction
 *
 * @param {czm_materialInput} input The input used to construct the default material.
 *
 * @returns {czm_material} The default material.
 *
 * @see czm_materialInput
 * @see czm_material
 * @see czm_getMaterial
 */
czm_material czm_getDefaultMaterial(czm_materialInput materialInput)
{
    czm_material material;
    material.diffuse = vec3(0.0);
    material.specular = 0.0;
    material.shininess = 1.0;
    material.normal = materialInput.normalEC;
    material.emission = vec3(0.0);
    material.alpha = 1.0;
    return material;
}
`;var sP=`/**
 * Select which direction vector to use for dynamic atmosphere lighting based on an enum value
 *
 * @name czm_getDynamicAtmosphereLightDirection
 * @glslfunction
 * @see DynamicAtmosphereLightingType.js
 *
 * @param {vec3} positionWC the position of the vertex/fragment in world coordinates. This is normalized and returned when dynamic lighting is turned off.
 * @param {float} lightEnum The enum value for selecting between light sources.
 * @return {vec3} The normalized light direction vector. Depending on the enum value, it is either positionWC, czm_lightDirectionWC or czm_sunDirectionWC
 */
vec3 czm_getDynamicAtmosphereLightDirection(vec3 positionWC, float lightEnum) {
    const float NONE = 0.0;
    const float SCENE_LIGHT = 1.0;
    const float SUNLIGHT = 2.0;

    vec3 lightDirection =
        positionWC * float(lightEnum == NONE) +
        czm_lightDirectionWC * float(lightEnum == SCENE_LIGHT) +
        czm_sunDirectionWC * float(lightEnum == SUNLIGHT);
    return normalize(lightDirection);
}
`;var cP=`/**
 * Calculates the intensity of diffusely reflected light.
 *
 * @name czm_getLambertDiffuse
 * @glslFunction
 *
 * @param {vec3} lightDirectionEC Unit vector pointing to the light source in eye coordinates.
 * @param {vec3} normalEC The surface normal in eye coordinates.
 *
 * @returns {float} The intensity of the diffuse reflection.
 *
 * @see czm_phong
 *
 * @example
 * float diffuseIntensity = czm_getLambertDiffuse(lightDirectionEC, normalEC);
 * float specularIntensity = czm_getSpecular(lightDirectionEC, toEyeEC, normalEC, 200);
 * vec3 color = (diffuseColor * diffuseIntensity) + (specularColor * specularIntensity);
 */
float czm_getLambertDiffuse(vec3 lightDirectionEC, vec3 normalEC)
{
    return max(dot(lightDirectionEC, normalEC), 0.0);
}
`;var AP=`/**
 * Calculates the specular intensity of reflected light.
 *
 * @name czm_getSpecular
 * @glslFunction
 *
 * @param {vec3} lightDirectionEC Unit vector pointing to the light source in eye coordinates.
 * @param {vec3} toEyeEC Unit vector pointing to the eye position in eye coordinates.
 * @param {vec3} normalEC The surface normal in eye coordinates.
 * @param {float} shininess The sharpness of the specular reflection.  Higher values create a smaller, more focused specular highlight.
 *
 * @returns {float} The intensity of the specular highlight.
 *
 * @see czm_phong
 *
 * @example
 * float diffuseIntensity = czm_getLambertDiffuse(lightDirectionEC, normalEC);
 * float specularIntensity = czm_getSpecular(lightDirectionEC, toEyeEC, normalEC, 200);
 * vec3 color = (diffuseColor * diffuseIntensity) + (specularColor * specularIntensity);
 */
float czm_getSpecular(vec3 lightDirectionEC, vec3 toEyeEC, vec3 normalEC, float shininess)
{
    vec3 toReflectedLight = reflect(-lightDirectionEC, normalEC);
    float specular = max(dot(toReflectedLight, toEyeEC), 0.0);

    // pow has undefined behavior if both parameters <= 0.
    // Prevent this by making sure shininess is at least czm_epsilon2.
    return pow(specular, max(shininess, czm_epsilon2));
}
`;var lP=`/**
 * @private
 */
vec4 czm_getWaterNoise(sampler2D normalMap, vec2 uv, float time, float angleInRadians)
{
    float cosAngle = cos(angleInRadians);
    float sinAngle = sin(angleInRadians);

    // time dependent sampling directions
    vec2 s0 = vec2(1.0/17.0, 0.0);
    vec2 s1 = vec2(-1.0/29.0, 0.0);
    vec2 s2 = vec2(1.0/101.0, 1.0/59.0);
    vec2 s3 = vec2(-1.0/109.0, -1.0/57.0);

    // rotate sampling direction by specified angle
    s0 = vec2((cosAngle * s0.x) - (sinAngle * s0.y), (sinAngle * s0.x) + (cosAngle * s0.y));
    s1 = vec2((cosAngle * s1.x) - (sinAngle * s1.y), (sinAngle * s1.x) + (cosAngle * s1.y));
    s2 = vec2((cosAngle * s2.x) - (sinAngle * s2.y), (sinAngle * s2.x) + (cosAngle * s2.y));
    s3 = vec2((cosAngle * s3.x) - (sinAngle * s3.y), (sinAngle * s3.x) + (cosAngle * s3.y));

    vec2 uv0 = (uv/103.0) + (time * s0);
    vec2 uv1 = uv/107.0 + (time * s1) + vec2(0.23);
    vec2 uv2 = uv/vec2(897.0, 983.0) + (time * s2) + vec2(0.51);
    vec2 uv3 = uv/vec2(991.0, 877.0) + (time * s3) + vec2(0.71);

    uv0 = fract(uv0);
    uv1 = fract(uv1);
    uv2 = fract(uv2);
    uv3 = fract(uv3);
    vec4 noise = (texture(normalMap, uv0)) +
                 (texture(normalMap, uv1)) +
                 (texture(normalMap, uv2)) +
                 (texture(normalMap, uv3));

    // average and scale to between -1 and 1
    return ((noise / 4.0) - 0.5) * 2.0;
}
`;var uP=`/**
 * Adjusts the hue of a color.
 * 
 * @name czm_hue
 * @glslFunction
 * 
 * @param {vec3} rgb The color.
 * @param {float} adjustment The amount to adjust the hue of the color in radians.
 *
 * @returns {float} The color with the hue adjusted.
 *
 * @example
 * vec3 adjustHue = czm_hue(color, czm_pi); // The same as czm_hue(color, -czm_pi)
 */
vec3 czm_hue(vec3 rgb, float adjustment)
{
    const mat3 toYIQ = mat3(0.299,     0.587,     0.114,
                            0.595716, -0.274453, -0.321263,
                            0.211456, -0.522591,  0.311135);
    const mat3 toRGB = mat3(1.0,  0.9563,  0.6210,
                            1.0, -0.2721, -0.6474,
                            1.0, -1.107,   1.7046);
    
    vec3 yiq = toYIQ * rgb;
    float hue = atan(yiq.z, yiq.y) + adjustment;
    float chroma = sqrt(yiq.z * yiq.z + yiq.y * yiq.y);
    
    vec3 color = vec3(yiq.x, chroma * cos(hue), chroma * sin(hue));
    return toRGB * color;
}
`;var fP=`/**
 * Converts a color in linear space to RGB space.
 *
 * @name czm_inverseGamma
 * @glslFunction
 *
 * @param {vec3} color The color in linear space.
 * @returns {vec3} The color in RGB space.
 */
vec3 czm_inverseGamma(vec3 color) {
    return pow(color, vec3(1.0 / czm_gamma));
}
`;var dP=`/**
 * Determines if a time interval is empty.
 *
 * @name czm_isEmpty
 * @glslFunction 
 * 
 * @param {czm_raySegment} interval The interval to test.
 * 
 * @returns {bool} <code>true</code> if the time interval is empty; otherwise, <code>false</code>.
 *
 * @example
 * bool b0 = czm_isEmpty(czm_emptyRaySegment);      // true
 * bool b1 = czm_isEmpty(czm_raySegment(0.0, 1.0)); // false
 * bool b2 = czm_isEmpty(czm_raySegment(1.0, 1.0)); // false, contains 1.0.
 */
bool czm_isEmpty(czm_raySegment interval)
{
    return (interval.stop < 0.0);
}
`;var hP=`/**
 * Determines if a time interval is empty.
 *
 * @name czm_isFull
 * @glslFunction 
 * 
 * @param {czm_raySegment} interval The interval to test.
 * 
 * @returns {bool} <code>true</code> if the time interval is empty; otherwise, <code>false</code>.
 *
 * @example
 * bool b0 = czm_isEmpty(czm_emptyRaySegment);      // true
 * bool b1 = czm_isEmpty(czm_raySegment(0.0, 1.0)); // false
 * bool b2 = czm_isEmpty(czm_raySegment(1.0, 1.0)); // false, contains 1.0.
 */
bool czm_isFull(czm_raySegment interval)
{
    return (interval.start == 0.0 && interval.stop == czm_infinity);
}
`;var mP=`/**
 * Computes the fraction of a Web Wercator rectangle at which a given geodetic latitude is located.
 *
 * @name czm_latitudeToWebMercatorFraction
 * @glslFunction
 *
 * @param {float} latitude The geodetic latitude, in radians.
 * @param {float} southMercatorY The Web Mercator coordinate of the southern boundary of the rectangle.
 * @param {float} oneOverMercatorHeight The total height of the rectangle in Web Mercator coordinates.
 *
 * @returns {float} The fraction of the rectangle at which the latitude occurs.  If the latitude is the southern
 *          boundary of the rectangle, the return value will be zero.  If it is the northern boundary, the return
 *          value will be 1.0.  Latitudes in between are mapped according to the Web Mercator projection.
 */ 
float czm_latitudeToWebMercatorFraction(float latitude, float southMercatorY, float oneOverMercatorHeight)
{
    float sinLatitude = sin(latitude);
    float mercatorY = 0.5 * log((1.0 + sinLatitude) / (1.0 - sinLatitude));
    
    return (mercatorY - southMercatorY) * oneOverMercatorHeight;
}
`;var pP=`/**
 * Computes distance from an point in 2D to a line in 2D.
 *
 * @name czm_lineDistance
 * @glslFunction
 *
 * param {vec2} point1 A point along the line.
 * param {vec2} point2 A point along the line.
 * param {vec2} point A point that may or may not be on the line.
 * returns {float} The distance from the point to the line.
 */
float czm_lineDistance(vec2 point1, vec2 point2, vec2 point) {
    return abs((point2.y - point1.y) * point.x - (point2.x - point1.x) * point.y + point2.x * point1.y - point2.y * point1.x) / distance(point2, point1);
}
`;var gP=`/**
 * Converts a linear RGB color to an sRGB color.
 *
 * @param {vec3|vec4} linearIn The color in linear color space.
 * @returns {vec3|vec4} The color in sRGB color space. The vector type matches the input.
 */
vec3 czm_linearToSrgb(vec3 linearIn) 
{
    return pow(linearIn, vec3(1.0/2.2));
}

vec4 czm_linearToSrgb(vec4 linearIn) 
{
    vec3 srgbOut = pow(linearIn.rgb, vec3(1.0/2.2));
    return vec4(srgbOut, linearIn.a);
}
`;var CP=`/**
 * Computes the luminance of a color. 
 *
 * @name czm_luminance
 * @glslFunction
 *
 * @param {vec3} rgb The color.
 * 
 * @returns {float} The luminance.
 *
 * @example
 * float light = czm_luminance(vec3(0.0)); // 0.0
 * float dark = czm_luminance(vec3(1.0));  // ~1.0 
 */
float czm_luminance(vec3 rgb)
{
    // Algorithm from Chapter 10 of Graphics Shaders.
    const vec3 W = vec3(0.2125, 0.7154, 0.0721);
    return dot(rgb, W);
}
`;var EP=`/**
 * Find the maximum component of a vector.
 *
 * @name czm_maximumComponent
 * @glslFunction
 *
 * @param {vec2|vec3|vec4} v The input vector.
 * @returns {float} The value of the largest component.
 */
float czm_maximumComponent(vec2 v)
{
    return max(v.x, v.y);
}
float czm_maximumComponent(vec3 v)
{
    return max(max(v.x, v.y), v.z);
}
float czm_maximumComponent(vec4 v)
{
    return max(max(max(v.x, v.y), v.z), v.w);
}
`;var _P=`/**
 * Computes the size of a pixel in meters at a distance from the eye.
 * <p>
 * Use this version when passing in a custom pixel ratio. For example, passing in 1.0 will return meters per native device pixel.
 * </p>
 * @name czm_metersPerPixel
 * @glslFunction
 *
 * @param {vec3} positionEC The position to get the meters per pixel in eye coordinates.
 * @param {float} pixelRatio The scaling factor from pixel space to coordinate space
 *
 * @returns {float} The meters per pixel at positionEC.
 */
float czm_metersPerPixel(vec4 positionEC, float pixelRatio)
{
    float width = czm_viewport.z;
    float height = czm_viewport.w;
    float pixelWidth;
    float pixelHeight;

    float top = czm_frustumPlanes.x;
    float bottom = czm_frustumPlanes.y;
    float left = czm_frustumPlanes.z;
    float right = czm_frustumPlanes.w;

    if (czm_sceneMode == czm_sceneMode2D || czm_orthographicIn3D == 1.0)
    {
        float frustumWidth = right - left;
        float frustumHeight = top - bottom;
        pixelWidth = frustumWidth / width;
        pixelHeight = frustumHeight / height;
    }
    else
    {
        float distanceToPixel = -positionEC.z;
        float inverseNear = 1.0 / czm_currentFrustum.x;
        float tanTheta = top * inverseNear;
        pixelHeight = 2.0 * distanceToPixel * tanTheta / height;
        tanTheta = right * inverseNear;
        pixelWidth = 2.0 * distanceToPixel * tanTheta / width;
    }

    return max(pixelWidth, pixelHeight) * pixelRatio;
}

/**
 * Computes the size of a pixel in meters at a distance from the eye.
 * <p>
 * Use this version when scaling by pixel ratio.
 * </p>
 * @name czm_metersPerPixel
 * @glslFunction
 *
 * @param {vec3} positionEC The position to get the meters per pixel in eye coordinates.
 *
 * @returns {float} The meters per pixel at positionEC.
 */
float czm_metersPerPixel(vec4 positionEC)
{
    return czm_metersPerPixel(positionEC, czm_pixelRatio);
}
`;var IP=`/**
 * Transforms a position from model to window coordinates.  The transformation
 * from model to clip coordinates is done using {@link czm_modelViewProjection}.
 * The transform from normalized device coordinates to window coordinates is
 * done using {@link czm_viewportTransformation}, which assumes a depth range
 * of <code>near = 0</code> and <code>far = 1</code>.
 * <br /><br />
 * This transform is useful when there is a need to manipulate window coordinates
 * in a vertex shader as done by {@link BillboardCollection}.
 * <br /><br />
 * This function should not be confused with {@link czm_viewportOrthographic},
 * which is an orthographic projection matrix that transforms from window 
 * coordinates to clip coordinates.
 *
 * @name czm_modelToWindowCoordinates
 * @glslFunction
 *
 * @param {vec4} position The position in model coordinates to transform.
 *
 * @returns {vec4} The transformed position in window coordinates.
 *
 * @see czm_eyeToWindowCoordinates
 * @see czm_modelViewProjection
 * @see czm_viewportTransformation
 * @see czm_viewportOrthographic
 * @see BillboardCollection
 *
 * @example
 * vec4 positionWC = czm_modelToWindowCoordinates(positionMC);
 */
vec4 czm_modelToWindowCoordinates(vec4 position)
{
    vec4 positionEC = czm_modelView * position;
    vec4 q = czm_projection * positionEC;
    q.xyz /= q.w;                                                // normalized device coordinates
    q.xyz = (czm_viewportTransformation * vec4(q.xyz, 1.0)).xyz; // window coordinates
    return q;
}
`;var yP=`/**
 * DOC_TBA
 *
 * @name czm_multiplyWithColorBalance
 * @glslFunction
 */
vec3 czm_multiplyWithColorBalance(vec3 left, vec3 right)
{
    // Algorithm from Chapter 10 of Graphics Shaders.
    const vec3 W = vec3(0.2125, 0.7154, 0.0721);
    
    vec3 target = left * right;
    float leftLuminance = dot(left, W);
    float rightLuminance = dot(right, W);
    float targetLuminance = dot(target, W);
    
    return ((leftLuminance + rightLuminance) / (2.0 * targetLuminance)) * target;
}
`;var bP=`/**
 * Computes a value that scales with distance.  The scaling is clamped at the near and
 * far distances, and does not extrapolate.  This function works with the
 * {@link NearFarScalar} JavaScript class.
 *
 * @name czm_nearFarScalar
 * @glslFunction
 *
 * @param {vec4} nearFarScalar A vector with 4 components: Near distance (x), Near value (y), Far distance (z), Far value (w).
 * @param {float} cameraDistSq The square of the current distance from the camera.
 *
 * @returns {float} The value at this distance.
 */
float czm_nearFarScalar(vec4 nearFarScalar, float cameraDistSq)
{
    float valueAtMin = nearFarScalar.y;
    float valueAtMax = nearFarScalar.w;
    float nearDistanceSq = nearFarScalar.x * nearFarScalar.x;
    float farDistanceSq = nearFarScalar.z * nearFarScalar.z;

    float t = (cameraDistSq - nearDistanceSq) / (farDistanceSq - nearDistanceSq);

    t = pow(clamp(t, 0.0, 1.0), 0.2);

    return mix(valueAtMin, valueAtMax, t);
}
`;var BP=` /**
  * Decodes a unit-length vector in 'oct' encoding to a normalized 3-component Cartesian vector.
  * The 'oct' encoding is described in "A Survey of Efficient Representations of Independent Unit Vectors",
  * Cigolle et al 2014: http://jcgt.org/published/0003/02/01/
  *
  * @name czm_octDecode
  * @param {vec2} encoded The oct-encoded, unit-length vector
  * @param {float} range The maximum value of the SNORM range. The encoded vector is stored in log2(rangeMax+1) bits.
  * @returns {vec3} The decoded and normalized vector
  */
  vec3 czm_octDecode(vec2 encoded, float range)
  {
      if (encoded.x == 0.0 && encoded.y == 0.0) {
          return vec3(0.0, 0.0, 0.0);
      }

     encoded = encoded / range * 2.0 - 1.0;
     vec3 v = vec3(encoded.x, encoded.y, 1.0 - abs(encoded.x) - abs(encoded.y));
     if (v.z < 0.0)
     {
         v.xy = (1.0 - abs(v.yx)) * czm_signNotZero(v.xy);
     }

     return normalize(v);
  }

/**
 * Decodes a unit-length vector in 'oct' encoding to a normalized 3-component Cartesian vector.
 * The 'oct' encoding is described in "A Survey of Efficient Representations of Independent Unit Vectors",
 * Cigolle et al 2014: http://jcgt.org/published/0003/02/01/
 *
 * @name czm_octDecode
 * @param {vec2} encoded The oct-encoded, unit-length vector
 * @returns {vec3} The decoded and normalized vector
 */
 vec3 czm_octDecode(vec2 encoded)
 {
    return czm_octDecode(encoded, 255.0);
 }

 /**
 * Decodes a unit-length vector in 'oct' encoding packed into a floating-point number to a normalized 3-component Cartesian vector.
 * The 'oct' encoding is described in "A Survey of Efficient Representations of Independent Unit Vectors",
 * Cigolle et al 2014: http://jcgt.org/published/0003/02/01/
 *
 * @name czm_octDecode
 * @param {float} encoded The oct-encoded, unit-length vector
 * @returns {vec3} The decoded and normalized vector
 */
 vec3 czm_octDecode(float encoded)
 {
    float temp = encoded / 256.0;
    float x = floor(temp);
    float y = (temp - x) * 256.0;
    return czm_octDecode(vec2(x, y));
 }

/**
 * Decodes three unit-length vectors in 'oct' encoding packed into two floating-point numbers to normalized 3-component Cartesian vectors.
 * The 'oct' encoding is described in "A Survey of Efficient Representations of Independent Unit Vectors",
 * Cigolle et al 2014: http://jcgt.org/published/0003/02/01/
 *
 * @name czm_octDecode
 * @param {vec2} encoded The packed oct-encoded, unit-length vectors.
 * @param {vec3} vector1 One decoded and normalized vector.
 * @param {vec3} vector2 One decoded and normalized vector.
 * @param {vec3} vector3 One decoded and normalized vector.
 */
  void czm_octDecode(vec2 encoded, out vec3 vector1, out vec3 vector2, out vec3 vector3)
 {
    float temp = encoded.x / 65536.0;
    float x = floor(temp);
    float encodedFloat1 = (temp - x) * 65536.0;

    temp = encoded.y / 65536.0;
    float y = floor(temp);
    float encodedFloat2 = (temp - y) * 65536.0;

    vector1 = czm_octDecode(encodedFloat1);
    vector2 = czm_octDecode(encodedFloat2);
    vector3 = czm_octDecode(vec2(x, y));
 }

`;var xP=`/**
 * Packs a depth value into a vec4 that can be represented by unsigned bytes.
 *
 * @name czm_packDepth
 * @glslFunction
 *
 * @param {float} depth The floating-point depth.
 * @returns {vec4} The packed depth.
 */
vec4 czm_packDepth(float depth)
{
    // See Aras Pranckevi\u010Dius' post Encoding Floats to RGBA
    // http://aras-p.info/blog/2009/07/30/encoding-floats-to-rgba-the-final/
    vec4 enc = vec4(1.0, 255.0, 65025.0, 16581375.0) * depth;
    enc = fract(enc);
    enc -= enc.yzww * vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0, 0.0);
    return enc;
}
`;var TP=`vec3 lambertianDiffuse(vec3 diffuseColor)
{
    return diffuseColor / czm_pi;
}

vec3 fresnelSchlick2(vec3 f0, vec3 f90, float VdotH)
{
    float versine = 1.0 - VdotH;
    // pow(versine, 5.0) is slow. See https://stackoverflow.com/a/68793086/10082269
    float versineSquared = versine * versine;
    return f0 + (f90 - f0) * versineSquared * versineSquared * versine;
}

#ifdef USE_ANISOTROPY
/**
 * @param {float} bitangentRoughness Material roughness (along the anisotropy bitangent)
 * @param {float} tangentialRoughness Anisotropic roughness (along the anisotropy tangent)
 * @param {vec3} lightDirection The direction from the fragment to the light source, transformed to tangent-bitangent-normal coordinates
 * @param {vec3} viewDirection The direction from the fragment to the camera, transformed to tangent-bitangent-normal coordinates
 */
float smithVisibilityGGX_anisotropic(float bitangentRoughness, float tangentialRoughness, vec3 lightDirection, vec3 viewDirection)
{
    vec3 roughnessScale = vec3(tangentialRoughness, bitangentRoughness, 1.0);
    float GGXV = lightDirection.z * length(roughnessScale * viewDirection);
    float GGXL = viewDirection.z * length(roughnessScale * lightDirection);
    float v = 0.5 / (GGXV + GGXL);
    return clamp(v, 0.0, 1.0);
}

/**
 * @param {float} bitangentRoughness Material roughness (along the anisotropy bitangent)
 * @param {float} tangentialRoughness Anisotropic roughness (along the anisotropy tangent)
 * @param {vec3} halfwayDirection The unit vector halfway between light and view directions, transformed to tangent-bitangent-normal coordinates
 */
float GGX_anisotropic(float bitangentRoughness, float tangentialRoughness, vec3 halfwayDirection)
{
    float roughnessSquared = bitangentRoughness * tangentialRoughness;
    vec3 f = halfwayDirection * vec3(bitangentRoughness, tangentialRoughness, roughnessSquared);
    float w2 = roughnessSquared / dot(f, f);
    return roughnessSquared * w2 * w2 / czm_pi;
}
#endif

/**
 * Estimate the geometric self-shadowing of the microfacets in a surface,
 * using the Smith Joint GGX visibility function.
 * Note: Vis = G / (4 * NdotL * NdotV)
 * see Eric Heitz. 2014. Understanding the Masking-Shadowing Function in Microfacet-Based BRDFs. Journal of Computer Graphics Techniques, 3
 * see Real-Time Rendering. Page 331 to 336.
 * see https://google.github.io/filament/Filament.md.html#materialsystem/specularbrdf/geometricshadowing(specularg)
 *
 * @param {float} alphaRoughness The roughness of the material, expressed as the square of perceptual roughness.
 * @param {float} NdotL The cosine of the angle between the surface normal and the direction to the light source.
 * @param {float} NdotV The cosine of the angle between the surface normal and the direction to the camera.
 */
float smithVisibilityGGX(float alphaRoughness, float NdotL, float NdotV)
{
    float alphaRoughnessSq = alphaRoughness * alphaRoughness;

    float GGXV = NdotL * sqrt(NdotV * NdotV * (1.0 - alphaRoughnessSq) + alphaRoughnessSq);
    float GGXL = NdotV * sqrt(NdotL * NdotL * (1.0 - alphaRoughnessSq) + alphaRoughnessSq);

    float GGX = GGXV + GGXL;
    if (GGX > 0.0)
    {
        return 0.5 / GGX;
    }
    return 0.0;
}

/**
 * Estimate the fraction of the microfacets in a surface that are aligned with 
 * the halfway vector, which is aligned halfway between the directions from
 * the fragment to the camera and from the fragment to the light source.
 *
 * @param {float} alphaRoughness The roughness of the material, expressed as the square of perceptual roughness.
 * @param {float} NdotH The cosine of the angle between the surface normal and the halfway vector.
 * @return {float} The fraction of microfacets aligned to the halfway vector.
 */
float GGX(float alphaRoughness, float NdotH)
{
    float alphaRoughnessSquared = alphaRoughness * alphaRoughness;
    float f = (NdotH * alphaRoughnessSquared - NdotH) * NdotH + 1.0;
    return alphaRoughnessSquared / (czm_pi * f * f);
}

/**
 * Compute the strength of the specular reflection due to direct lighting.
 *
 * @param {vec3} normal The surface normal.
 * @param {vec3} lightDirection The unit vector pointing from the fragment to the light source.
 * @param {vec3} viewDirection The unit vector pointing from the fragment to the camera.
 * @param {vec3} halfwayDirection The unit vector pointing from the fragment to halfway between the light source and the camera.
 * @param {float} alphaRoughness The roughness of the material, expressed as the square of perceptual roughness.
 * @return {float} The strength of the specular reflection.
 */
float computeDirectSpecularStrength(vec3 normal, vec3 lightDirection, vec3 viewDirection, vec3 halfwayDirection, float alphaRoughness)
{
    float NdotL = clamp(dot(normal, lightDirection), 0.0, 1.0);
    float NdotV = clamp(dot(normal, viewDirection), 0.0, 1.0);
    float G = smithVisibilityGGX(alphaRoughness, NdotL, NdotV);
    float NdotH = clamp(dot(normal, halfwayDirection), 0.0, 1.0);
    float D = GGX(alphaRoughness, NdotH);
    return G * D;
}

/**
 * Compute the diffuse and specular contributions using physically based
 * rendering. This function only handles direct lighting.
 * <p>
 * This function only handles the lighting calculations. Metallic/roughness
 * and specular/glossy must be handled separately. See {@MaterialStageFS}
 * </p>
 *
 * @name czm_pbrLighting
 * @glslFunction
 *
 * @param {vec3} viewDirectionEC Unit vector pointing from the fragment to the eye position
 * @param {vec3} normalEC The surface normal in eye coordinates
 * @param {vec3} lightDirectionEC Unit vector pointing to the light source in eye coordinates.
 * @param {czm_modelMaterial} The material properties.
 * @return {vec3} The computed HDR color
 */
vec3 czm_pbrLighting(vec3 viewDirectionEC, vec3 normalEC, vec3 lightDirectionEC, czm_modelMaterial material)
{
    vec3 halfwayDirectionEC = normalize(viewDirectionEC + lightDirectionEC);
    float VdotH = clamp(dot(viewDirectionEC, halfwayDirectionEC), 0.0, 1.0);
    float NdotL = clamp(dot(normalEC, lightDirectionEC), 0.001, 1.0);

    vec3 f0 = material.specular;
    float reflectance = czm_maximumComponent(f0);
    // Typical dielectrics will have reflectance 0.04, so f90 will be 1.0.
    // In this case, at grazing angle, all incident energy is reflected.
    vec3 f90 = vec3(clamp(reflectance * 25.0, 0.0, 1.0));
    vec3 F = fresnelSchlick2(f0, f90, VdotH);

    #if defined(USE_SPECULAR)
        F *= material.specularWeight;
    #endif

    float alphaRoughness = material.roughness * material.roughness;
    #ifdef USE_ANISOTROPY
        mat3 tbn = mat3(material.anisotropicT, material.anisotropicB, normalEC);
        vec3 lightDirection = lightDirectionEC * tbn;
        vec3 viewDirection = viewDirectionEC * tbn;
        vec3 halfwayDirection = halfwayDirectionEC * tbn;
        float anisotropyStrength = material.anisotropyStrength;
        float tangentialRoughness = mix(alphaRoughness, 1.0, anisotropyStrength * anisotropyStrength);
        float bitangentRoughness = clamp(alphaRoughness, 0.001, 1.0);
        float G = smithVisibilityGGX_anisotropic(bitangentRoughness, tangentialRoughness, lightDirection, viewDirection);
        float D = GGX_anisotropic(bitangentRoughness, tangentialRoughness, halfwayDirection);
        vec3 specularContribution = F * G * D;
    #else
        float specularStrength = computeDirectSpecularStrength(normalEC, lightDirectionEC, viewDirectionEC, halfwayDirectionEC, alphaRoughness);
        vec3 specularContribution = F * specularStrength;
    #endif

    vec3 diffuseColor = material.diffuse;
    // F here represents the specular contribution
    vec3 diffuseContribution = (1.0 - F) * lambertianDiffuse(diffuseColor);

    // Lo = (diffuse + specular) * Li * NdotL
    return (diffuseContribution + specularContribution) * NdotL;
}
`;var SP=`// KhronosGroup https://github.com/KhronosGroup/ToneMapping/tree/main/PBR_Neutral

// Input color is non-negative and resides in the Linear Rec. 709 color space.
// Output color is also Linear Rec. 709, but in the [0, 1] range.

vec3 czm_pbrNeutralTonemapping(vec3 color) {
    const float startCompression = 0.8 - 0.04;
    const float desaturation = 0.15;

    float x = min(color.r, min(color.g, color.b));
    float offset = czm_branchFreeTernary(x < 0.08, x - 6.25 * x * x, 0.04);
    color -= offset;

    float peak = max(color.r, max(color.g, color.b));
    if (peak < startCompression) return color;

    const float d = 1.0 - startCompression;
    float newPeak = 1.0 - d * d / (peak + d - startCompression);
    color *= newPeak / peak;

    float g = 1.0 - 1.0 / (desaturation * (peak - newPeak) + 1.0);
    return mix(color, newPeak * vec3(1.0, 1.0, 1.0), g);
}
`;var wP=`float czm_private_getLambertDiffuseOfMaterial(vec3 lightDirectionEC, czm_material material)
{
    return czm_getLambertDiffuse(lightDirectionEC, material.normal);
}

float czm_private_getSpecularOfMaterial(vec3 lightDirectionEC, vec3 toEyeEC, czm_material material)
{
    return czm_getSpecular(lightDirectionEC, toEyeEC, material.normal, material.shininess);
}

/**
 * Computes a color using the Phong lighting model.
 *
 * @name czm_phong
 * @glslFunction
 *
 * @param {vec3} toEye A normalized vector from the fragment to the eye in eye coordinates.
 * @param {czm_material} material The fragment's material.
 *
 * @returns {vec4} The computed color.
 *
 * @example
 * vec3 positionToEyeEC = // ...
 * czm_material material = // ...
 * vec3 lightDirectionEC = // ...
 * out_FragColor = czm_phong(normalize(positionToEyeEC), material, lightDirectionEC);
 *
 * @see czm_getMaterial
 */
vec4 czm_phong(vec3 toEye, czm_material material, vec3 lightDirectionEC)
{
    // Diffuse from directional light sources at eye (for top-down)
    float diffuse = czm_private_getLambertDiffuseOfMaterial(vec3(0.0, 0.0, 1.0), material);
    if (czm_sceneMode == czm_sceneMode3D) {
        // (and horizon views in 3D)
        diffuse += czm_private_getLambertDiffuseOfMaterial(vec3(0.0, 1.0, 0.0), material);
    }

    float specular = czm_private_getSpecularOfMaterial(lightDirectionEC, toEye, material);

    // Temporary workaround for adding ambient.
    vec3 materialDiffuse = material.diffuse * 0.5;

    vec3 ambient = materialDiffuse;
    vec3 color = ambient + material.emission;
    color += materialDiffuse * diffuse * czm_lightColor;
    color += material.specular * specular * czm_lightColor;

    return vec4(color, material.alpha);
}

vec4 czm_private_phong(vec3 toEye, czm_material material, vec3 lightDirectionEC)
{
    float diffuse = czm_private_getLambertDiffuseOfMaterial(lightDirectionEC, material);
    float specular = czm_private_getSpecularOfMaterial(lightDirectionEC, toEye, material);

    vec3 ambient = vec3(0.0);
    vec3 color = ambient + material.emission;
    color += material.diffuse * diffuse * czm_lightColor;
    color += material.specular * specular * czm_lightColor;

    return vec4(color, material.alpha);
}
`;var DP=`/**
 * Computes distance from a point to a plane.
 *
 * @name czm_planeDistance
 * @glslFunction
 *
 * param {vec4} plane A Plane in Hessian Normal Form. See Plane.js
 * param {vec3} point A point in the same space as the plane.
 * returns {float} The distance from the point to the plane.
 */
float czm_planeDistance(vec4 plane, vec3 point) {
    return (dot(plane.xyz, point) + plane.w);
}

/**
 * Computes distance from a point to a plane.
 *
 * @name czm_planeDistance
 * @glslFunction
 *
 * param {vec3} planeNormal Normal for a plane in Hessian Normal Form. See Plane.js
 * param {float} planeDistance Distance for a plane in Hessian Normal form. See Plane.js
 * param {vec3} point A point in the same space as the plane.
 * returns {float} The distance from the point to the plane.
 */
float czm_planeDistance(vec3 planeNormal, float planeDistance, vec3 point) {
    return (dot(planeNormal, point) + planeDistance);
}
`;var QP=`/**
 * Computes the point along a ray at the given time.  <code>time</code> can be positive, negative, or zero.
 *
 * @name czm_pointAlongRay
 * @glslFunction
 *
 * @param {czm_ray} ray The ray to compute the point along.
 * @param {float} time The time along the ray.
 * 
 * @returns {vec3} The point along the ray at the given time.
 * 
 * @example
 * czm_ray ray = czm_ray(vec3(0.0), vec3(1.0, 0.0, 0.0)); // origin, direction
 * vec3 v = czm_pointAlongRay(ray, 2.0); // (2.0, 0.0, 0.0)
 */
vec3 czm_pointAlongRay(czm_ray ray, float time)
{
    return ray.origin + (time * ray.direction);
}
`;var RP=`/**
 * DOC_TBA
 *
 * @name czm_rayEllipsoidIntersectionInterval
 * @glslFunction
 */
czm_raySegment czm_rayEllipsoidIntersectionInterval(czm_ray ray, vec3 ellipsoid_center, vec3 ellipsoid_inverseRadii)
{
   // ray and ellipsoid center in eye coordinates.  radii in model coordinates.
    vec3 q = ellipsoid_inverseRadii * (czm_inverseModelView * vec4(ray.origin, 1.0)).xyz;
    vec3 w = ellipsoid_inverseRadii * (czm_inverseModelView * vec4(ray.direction, 0.0)).xyz;

    q = q - ellipsoid_inverseRadii * (czm_inverseModelView * vec4(ellipsoid_center, 1.0)).xyz;

    float q2 = dot(q, q);
    float qw = dot(q, w);

    if (q2 > 1.0) // Outside ellipsoid.
    {
        if (qw >= 0.0) // Looking outward or tangent (0 intersections).
        {
            return czm_emptyRaySegment;
        }
        else // qw < 0.0.
        {
            float qw2 = qw * qw;
            float difference = q2 - 1.0; // Positively valued.
            float w2 = dot(w, w);
            float product = w2 * difference;

            if (qw2 < product) // Imaginary roots (0 intersections).
            {
                return czm_emptyRaySegment;
            }
            else if (qw2 > product) // Distinct roots (2 intersections).
            {
                float discriminant = qw * qw - product;
                float temp = -qw + sqrt(discriminant); // Avoid cancellation.
                float root0 = temp / w2;
                float root1 = difference / temp;
                if (root0 < root1)
                {
                    czm_raySegment i = czm_raySegment(root0, root1);
                    return i;
                }
                else
                {
                    czm_raySegment i = czm_raySegment(root1, root0);
                    return i;
                }
            }
            else // qw2 == product.  Repeated roots (2 intersections).
            {
                float root = sqrt(difference / w2);
                czm_raySegment i = czm_raySegment(root, root);
                return i;
            }
        }
    }
    else if (q2 < 1.0) // Inside ellipsoid (2 intersections).
    {
        float difference = q2 - 1.0; // Negatively valued.
        float w2 = dot(w, w);
        float product = w2 * difference; // Negatively valued.
        float discriminant = qw * qw - product;
        float temp = -qw + sqrt(discriminant); // Positively valued.
        czm_raySegment i = czm_raySegment(0.0, temp / w2);
        return i;
    }
    else // q2 == 1.0. On ellipsoid.
    {
        if (qw < 0.0) // Looking inward.
        {
            float w2 = dot(w, w);
            czm_raySegment i = czm_raySegment(0.0, -qw / w2);
            return i;
        }
        else // qw >= 0.0.  Looking outward or tangent.
        {
            return czm_emptyRaySegment;
        }
    }
}
`;var vP=`/**
 * Compute the intersection interval of a ray with a sphere.
 *
 * @name czm_raySphereIntersectionInterval
 * @glslFunction
 *
 * @param {czm_ray} ray The ray.
 * @param {vec3} center The center of the sphere.
 * @param {float} radius The radius of the sphere.
 * @return {czm_raySegment} The intersection interval of the ray with the sphere.
 */
czm_raySegment czm_raySphereIntersectionInterval(czm_ray ray, vec3 center, float radius)
{
    vec3 o = ray.origin;
    vec3 d = ray.direction;

    vec3 oc = o - center;

    float a = dot(d, d);
    float b = 2.0 * dot(d, oc);
    float c = dot(oc, oc) - (radius * radius);

    float det = (b * b) - (4.0 * a * c);

    if (det < 0.0) {
        return czm_emptyRaySegment;
    }

    float sqrtDet = sqrt(det);

    float t0 = (-b - sqrtDet) / (2.0 * a);
    float t1 = (-b + sqrtDet) / (2.0 * a);

    czm_raySegment result = czm_raySegment(t0, t1);
    return result;
}
`;var MP=`float czm_readDepth(sampler2D depthTexture, vec2 texCoords)
{
    return czm_reverseLogDepth(texture(depthTexture, texCoords).r);
}
`;var PP=`/**
 * Reads a value previously transformed with {@link czm_writeNonPerspective}
 * by dividing it by \`w\`, the value used in the perspective divide.
 * This function is intended to be called in a fragment shader to access a
 * \`varying\` that should not be subject to perspective interpolation.
 * For example, screen-space texture coordinates. The value should have been
 * previously written in the vertex shader with a call to
 * {@link czm_writeNonPerspective}.
 *
 * @name czm_readNonPerspective
 * @glslFunction
 *
 * @param {float|vec2|vec3|vec4} value The non-perspective value to be read.
 * @param {float} oneOverW One over the perspective divide value, \`w\`. Usually this is simply \`gl_FragCoord.w\`.
 * @returns {float|vec2|vec3|vec4} The usable value.
 */
float czm_readNonPerspective(float value, float oneOverW) {
    return value * oneOverW;
}

vec2 czm_readNonPerspective(vec2 value, float oneOverW) {
    return value * oneOverW;
}

vec3 czm_readNonPerspective(vec3 value, float oneOverW) {
    return value * oneOverW;
}

vec4 czm_readNonPerspective(vec4 value, float oneOverW) {
    return value * oneOverW;
}
`;var NP=`float czm_reverseLogDepth(float logZ)
{
#ifdef LOG_DEPTH
    float near = czm_currentFrustum.x;
    float far = czm_currentFrustum.y;
    float log2Depth = logZ * czm_log2FarDepthFromNearPlusOne;
    float depthFromNear = exp2(log2Depth) - 1.0;
    return far * (1.0 - near / (depthFromNear + near)) / (far - near);
#endif
    return logZ;
}
`;var LP=`/**
 * Round a floating point value. This function exists because round() doesn't
 * exist in GLSL 1.00. 
 *
 * @param {float|vec2|vec3|vec4} value The value to round
 * @param {float|vec2|vec3|vec3} The rounded value. The type matches the input.
 */
float czm_round(float value) {
  return floor(value + 0.5);
}

vec2 czm_round(vec2 value) {
  return floor(value + 0.5);
}

vec3 czm_round(vec3 value) {
  return floor(value + 0.5);
}

vec4 czm_round(vec4 value) {
  return floor(value + 0.5);
}
`;var FP=`/**
 * Adjusts the saturation of a color.
 * 
 * @name czm_saturation
 * @glslFunction
 * 
 * @param {vec3} rgb The color.
 * @param {float} adjustment The amount to adjust the saturation of the color.
 *
 * @returns {float} The color with the saturation adjusted.
 *
 * @example
 * vec3 greyScale = czm_saturation(color, 0.0);
 * vec3 doubleSaturation = czm_saturation(color, 2.0);
 */
vec3 czm_saturation(vec3 rgb, float adjustment)
{
    // Algorithm from Chapter 16 of OpenGL Shading Language
    const vec3 W = vec3(0.2125, 0.7154, 0.0721);
    vec3 intensity = vec3(dot(rgb, W));
    return mix(intensity, rgb, adjustment);
}
`;var OP=`
float czm_sampleShadowMap(highp samplerCube shadowMap, vec3 d)
{
    return czm_unpackDepth(czm_textureCube(shadowMap, d));
}

float czm_sampleShadowMap(highp sampler2D shadowMap, vec2 uv)
{
#ifdef USE_SHADOW_DEPTH_TEXTURE
    return texture(shadowMap, uv).r;
#else
    return czm_unpackDepth(texture(shadowMap, uv));
#endif
}

float czm_shadowDepthCompare(samplerCube shadowMap, vec3 uv, float depth)
{
    return step(depth, czm_sampleShadowMap(shadowMap, uv));
}

float czm_shadowDepthCompare(sampler2D shadowMap, vec2 uv, float depth)
{
    return step(depth, czm_sampleShadowMap(shadowMap, uv));
}
`;var kP=`
float czm_private_shadowVisibility(float visibility, float nDotL, float normalShadingSmooth, float darkness)
{
#ifdef USE_NORMAL_SHADING
#ifdef USE_NORMAL_SHADING_SMOOTH
    float strength = clamp(nDotL / normalShadingSmooth, 0.0, 1.0);
#else
    float strength = step(0.0, nDotL);
#endif
    visibility *= strength;
#endif

    visibility = max(visibility, darkness);
    return visibility;
}

#ifdef USE_CUBE_MAP_SHADOW
float czm_shadowVisibility(samplerCube shadowMap, czm_shadowParameters shadowParameters)
{
    float depthBias = shadowParameters.depthBias;
    float depth = shadowParameters.depth;
    float nDotL = shadowParameters.nDotL;
    float normalShadingSmooth = shadowParameters.normalShadingSmooth;
    float darkness = shadowParameters.darkness;
    vec3 uvw = shadowParameters.texCoords;

    depth -= depthBias;
    float visibility = czm_shadowDepthCompare(shadowMap, uvw, depth);
    return czm_private_shadowVisibility(visibility, nDotL, normalShadingSmooth, darkness);
}
#else
float czm_shadowVisibility(sampler2D shadowMap, czm_shadowParameters shadowParameters)
{
    float depthBias = shadowParameters.depthBias;
    float depth = shadowParameters.depth;
    float nDotL = shadowParameters.nDotL;
    float normalShadingSmooth = shadowParameters.normalShadingSmooth;
    float darkness = shadowParameters.darkness;
    vec2 uv = shadowParameters.texCoords;

    depth -= depthBias;
#ifdef USE_SOFT_SHADOWS
    vec2 texelStepSize = shadowParameters.texelStepSize;
    float radius = 1.0;
    float dx0 = -texelStepSize.x * radius;
    float dy0 = -texelStepSize.y * radius;
    float dx1 = texelStepSize.x * radius;
    float dy1 = texelStepSize.y * radius;
    float visibility = (
        czm_shadowDepthCompare(shadowMap, uv, depth) +
        czm_shadowDepthCompare(shadowMap, uv + vec2(dx0, dy0), depth) +
        czm_shadowDepthCompare(shadowMap, uv + vec2(0.0, dy0), depth) +
        czm_shadowDepthCompare(shadowMap, uv + vec2(dx1, dy0), depth) +
        czm_shadowDepthCompare(shadowMap, uv + vec2(dx0, 0.0), depth) +
        czm_shadowDepthCompare(shadowMap, uv + vec2(dx1, 0.0), depth) +
        czm_shadowDepthCompare(shadowMap, uv + vec2(dx0, dy1), depth) +
        czm_shadowDepthCompare(shadowMap, uv + vec2(0.0, dy1), depth) +
        czm_shadowDepthCompare(shadowMap, uv + vec2(dx1, dy1), depth)
    ) * (1.0 / 9.0);
#else
    float visibility = czm_shadowDepthCompare(shadowMap, uv, depth);
#endif

    return czm_private_shadowVisibility(visibility, nDotL, normalShadingSmooth, darkness);
}
#endif
`;var UP=`/**
 * Returns 1.0 if the given value is positive or zero, and -1.0 if it is negative.  This is similar to the GLSL
 * built-in function <code>sign</code> except that returns 1.0 instead of 0.0 when the input value is 0.0.
 * 
 * @name czm_signNotZero
 * @glslFunction
 *
 * @param {} value The value for which to determine the sign.
 * @returns {} 1.0 if the value is positive or zero, -1.0 if the value is negative.
 */
float czm_signNotZero(float value)
{
    return value >= 0.0 ? 1.0 : -1.0;
}

vec2 czm_signNotZero(vec2 value)
{
    return vec2(czm_signNotZero(value.x), czm_signNotZero(value.y));
}

vec3 czm_signNotZero(vec3 value)
{
    return vec3(czm_signNotZero(value.x), czm_signNotZero(value.y), czm_signNotZero(value.z));
}

vec4 czm_signNotZero(vec4 value)
{
    return vec4(czm_signNotZero(value.x), czm_signNotZero(value.y), czm_signNotZero(value.z), czm_signNotZero(value.w));
}
`;var zP=`/**
 * Computes a color from the third order spherical harmonic coefficients and a normalized direction vector.
 * <p>
 * The order of the coefficients is [L00, L1_1, L10, L11, L2_2, L2_1, L20, L21, L22].
 * </p>
 *
 * @name czm_sphericalHarmonics
 * @glslFunction
 *
 * @param {vec3} normal The normalized direction.
 * @param {vec3[9]} coefficients The third order spherical harmonic coefficients.
 * @returns {vec3} The color at the direction.
 *
 * @see https://graphics.stanford.edu/papers/envmap/envmap.pdf
 */
vec3 czm_sphericalHarmonics(vec3 normal, vec3 coefficients[9])
{
    vec3 L00 = coefficients[0];
    vec3 L1_1 = coefficients[1];
    vec3 L10 = coefficients[2];
    vec3 L11 = coefficients[3];
    vec3 L2_2 = coefficients[4];
    vec3 L2_1 = coefficients[5];
    vec3 L20 = coefficients[6];
    vec3 L21 = coefficients[7];
    vec3 L22 = coefficients[8];

    float x = normal.x;
    float y = normal.y;
    float z = normal.z;

    vec3 L =
          L00
        + L1_1 * y
        + L10 * z
        + L11 * x
        + L2_2 * (y * x)
        + L2_1 * (y * z)
        + L20 * (3.0 * z * z - 1.0)
        + L21 * (z * x)
        + L22 * (x * x - y * y);
        
    return max(L, vec3(0.0));
}
`;var GP=`/**
 * Converts an sRGB color to a linear RGB color.
 *
 * @param {vec3|vec4} srgbIn The color in sRGB space
 * @returns {vec3|vec4} The color in linear color space. The vector type matches the input.
 */
vec3 czm_srgbToLinear(vec3 srgbIn)
{
    return pow(srgbIn, vec3(2.2));
}

vec4 czm_srgbToLinear(vec4 srgbIn) 
{
    vec3 linearOut = pow(srgbIn.rgb, vec3(2.2));
    return vec4(linearOut, srgbIn.a);
}
`;var HP=`/**
 * Creates a matrix that transforms vectors from tangent space to eye space.
 *
 * @name czm_tangentToEyeSpaceMatrix
 * @glslFunction
 *
 * @param {vec3} normalEC The normal vector in eye coordinates.
 * @param {vec3} tangentEC The tangent vector in eye coordinates.
 * @param {vec3} bitangentEC The bitangent vector in eye coordinates.
 *
 * @returns {mat3} The matrix that transforms from tangent space to eye space.
 *
 * @example
 * mat3 tangentToEye = czm_tangentToEyeSpaceMatrix(normalEC, tangentEC, bitangentEC);
 * vec3 normal = tangentToEye * texture(normalMap, st).xyz;
 */
mat3 czm_tangentToEyeSpaceMatrix(vec3 normalEC, vec3 tangentEC, vec3 bitangentEC)
{
    vec3 normal = normalize(normalEC);
    vec3 tangent = normalize(tangentEC);
    vec3 bitangent = normalize(bitangentEC);
    return mat3(tangent.x  , tangent.y  , tangent.z,
                bitangent.x, bitangent.y, bitangent.z,
                normal.x   , normal.y   , normal.z);
}
`;var VP=`/**
 * A wrapper around the texture (WebGL2) / textureCube (WebGL1)
 * function to allow for WebGL 1 support.
 * 
 * @name czm_textureCube
 * @glslFunction
 *
 * @param {samplerCube} sampler The sampler.
 * @param {vec3} p The coordinate at which to sample the texture.
 */
vec4 czm_textureCube(samplerCube sampler, vec3 p) {
#if __VERSION__ == 300
    return texture(sampler, p);
#else
    return textureCube(sampler, p);
#endif
}

/**
 * A wrapper around the textureLod (WebGL2) / textureCube (WebGL1)
 * function to allow for WebGL 1 support in fragment shaders.
 *
 * @name czm_textureCubeLod
 * @glslFunction
 *
 * @param {samplerCube} sampler The sampler.
 * @param {vec3} p The coordinate at which to sample the texture.
 * @param {float} lod The mipmap level from which to sample.
 */
vec4 czm_textureCube(samplerCube sampler, vec3 p, float lod) {
#if __VERSION__ == 300
    return textureLod(sampler, p, lod);
#elif defined(GL_EXT_shader_texture_lod)
    return textureCubeLodEXT(sampler, p, lod);
#endif
}`;var jP=`/**
 * Transforms a plane.
 * 
 * @name czm_transformPlane
 * @glslFunction
 *
 * @param {vec4} plane The plane in Hessian Normal Form.
 * @param {mat4} transform The inverse-transpose of a transformation matrix.
 */
vec4 czm_transformPlane(vec4 plane, mat4 transform) {
    vec4 transformedPlane = transform * plane;
    // Convert the transformed plane to Hessian Normal Form
    float normalMagnitude = length(transformedPlane.xyz);
    return transformedPlane / normalMagnitude;
}
`;var YP=`/**
 * Translates a position (or any <code>vec3</code>) that was encoded with {@link EncodedCartesian3},
 * and then provided to the shader as separate <code>high</code> and <code>low</code> bits to
 * be relative to the eye.  As shown in the example, the position can then be transformed in eye
 * or clip coordinates using {@link czm_modelViewRelativeToEye} or {@link czm_modelViewProjectionRelativeToEye},
 * respectively.
 * <p>
 * This technique, called GPU RTE, eliminates jittering artifacts when using large coordinates as
 * described in {@link http://help.agi.com/AGIComponents/html/BlogPrecisionsPrecisions.htm|Precisions, Precisions}.
 * </p>
 *
 * @name czm_translateRelativeToEye
 * @glslFunction
 *
 * @param {vec3} high The position's high bits.
 * @param {vec3} low The position's low bits.
 * @returns {vec3} The position translated to be relative to the camera's position.
 *
 * @example
 * in vec3 positionHigh;
 * in vec3 positionLow;
 *
 * void main()
 * {
 *   vec4 p = czm_translateRelativeToEye(positionHigh, positionLow);
 *   gl_Position = czm_modelViewProjectionRelativeToEye * p;
 * }
 *
 * @see czm_modelViewRelativeToEye
 * @see czm_modelViewProjectionRelativeToEye
 * @see czm_computePosition
 * @see EncodedCartesian3
 */
vec4 czm_translateRelativeToEye(vec3 high, vec3 low)
{
    vec3 highDifference = high - czm_encodedCameraPositionMCHigh;
    // This check handles the case when NaN values have gotten into \`highDifference\`.
    // Such a thing could happen on devices running iOS.
    if (length(highDifference) == 0.0) {  
        highDifference = vec3(0);  
    }
    vec3 lowDifference = low - czm_encodedCameraPositionMCLow;

    return vec4(highDifference + lowDifference, 1.0);
}
`;var WP=`/**
 * @private
 */
vec4 czm_translucentPhong(vec3 toEye, czm_material material, vec3 lightDirectionEC)
{
    // Diffuse from directional light sources at eye (for top-down and horizon views)
    float diffuse = czm_getLambertDiffuse(vec3(0.0, 0.0, 1.0), material.normal);

    if (czm_sceneMode == czm_sceneMode3D) {
        // (and horizon views in 3D)
        diffuse += czm_getLambertDiffuse(vec3(0.0, 1.0, 0.0), material.normal);
    }

    diffuse = clamp(diffuse, 0.0, 1.0);

    float specular = czm_getSpecular(lightDirectionEC, toEye, material.normal, material.shininess);

    // Temporary workaround for adding ambient.
    vec3 materialDiffuse = material.diffuse * 0.5;

    vec3 ambient = materialDiffuse;
    vec3 color = ambient + material.emission;
    color += materialDiffuse * diffuse * czm_lightColor;
    color += material.specular * specular * czm_lightColor;

    return vec4(color, material.alpha);
}
`;var qP=`/**
 * Returns the transpose of the matrix.  The input <code>matrix</code> can be
 * a <code>mat2</code>, <code>mat3</code>, or <code>mat4</code>.
 *
 * @name czm_transpose
 * @glslFunction
 *
 * @param {} matrix The matrix to transpose.
 *
 * @returns {} The transposed matrix.
 *
 * @example
 * // GLSL declarations
 * mat2 czm_transpose(mat2 matrix);
 * mat3 czm_transpose(mat3 matrix);
 * mat4 czm_transpose(mat4 matrix);
 *
 * // Transpose a 3x3 rotation matrix to find its inverse.
 * mat3 eastNorthUpToEye = czm_eastNorthUpToEyeCoordinates(
 *     positionMC, normalEC);
 * mat3 eyeToEastNorthUp = czm_transpose(eastNorthUpToEye);
 */
mat2 czm_transpose(mat2 matrix)
{
    return mat2(
        matrix[0][0], matrix[1][0],
        matrix[0][1], matrix[1][1]);
}

mat3 czm_transpose(mat3 matrix)
{
    return mat3(
        matrix[0][0], matrix[1][0], matrix[2][0],
        matrix[0][1], matrix[1][1], matrix[2][1],
        matrix[0][2], matrix[1][2], matrix[2][2]);
}

mat4 czm_transpose(mat4 matrix)
{
    return mat4(
        matrix[0][0], matrix[1][0], matrix[2][0], matrix[3][0],
        matrix[0][1], matrix[1][1], matrix[2][1], matrix[3][1],
        matrix[0][2], matrix[1][2], matrix[2][2], matrix[3][2],
        matrix[0][3], matrix[1][3], matrix[2][3], matrix[3][3]);
}
`;var JP=`vec2 getLookupUv(vec2 dimensions, int i) {
    int pixY = i / int(dimensions.x);
    int pixX = i - (pixY * int(dimensions.x));
    float pixelWidth = 1.0 / dimensions.x;
    float pixelHeight = 1.0 / dimensions.y;
    float u = (float(pixX) + 0.5) * pixelWidth; // sample from center of pixel
    float v = (float(pixY) + 0.5) * pixelHeight;
    return vec2(u, v);
}

vec4 czm_unpackClippingExtents(highp sampler2D extentsTexture, int index) {
    vec2 textureDimensions = vec2(textureSize(extentsTexture, 0));
    return texture(extentsTexture, getLookupUv(textureDimensions, index));
}`;var KP=`/**
 * Unpacks a vec4 depth value to a float in [0, 1) range.
 *
 * @name czm_unpackDepth
 * @glslFunction
 *
 * @param {vec4} packedDepth The packed depth.
 *
 * @returns {float} The floating-point depth in [0, 1) range.
 */
float czm_unpackDepth(vec4 packedDepth)
{
    // See Aras Pranckevi\u010Dius' post Encoding Floats to RGBA
    // http://aras-p.info/blog/2009/07/30/encoding-floats-to-rgba-the-final/
    return dot(packedDepth, vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 16581375.0));
}
`;var XP=`/**
 * Unpack an IEEE 754 single-precision float that is packed as a little-endian unsigned normalized vec4.
 *
 * @name czm_unpackFloat
 * @glslFunction
 *
 * @param {vec4} packedFloat The packed float.
 *
 * @returns {float} The floating-point depth in arbitrary range.
 */
float czm_unpackFloat(vec4 packedFloat)
{
    // Convert to [0.0, 255.0] and round to integer
    packedFloat = floor(packedFloat * 255.0 + 0.5);
    float sign = 1.0 - step(128.0, packedFloat[3]) * 2.0;
    float exponent = 2.0 * mod(packedFloat[3], 128.0) + step(128.0, packedFloat[2]) - 127.0;    
    if (exponent == -127.0)
    {
        return 0.0;
    }
    float mantissa = mod(packedFloat[2], 128.0) * 65536.0 + packedFloat[1] * 256.0 + packedFloat[0] + float(0x800000);
    float result = sign * exp2(exponent - 23.0) * mantissa;
    return result;
}
`;var ZP=`/**
 * Unpack unsigned integers of 1-4 bytes. in WebGL 1, there is no uint type,
 * so the return value is an int.
 * <p>
 * There are also precision limitations in WebGL 1. highp int is still limited
 * to 24 bits. Above the value of 2^24 = 16777216, precision loss may occur.
 * </p>
 *
 * @param {float|vec2|vec3|vec4} packed The packed value. For vectors, the components are listed in little-endian order.
 *
 * @return {int} The unpacked value.
 */
 int czm_unpackUint(float packedValue) {
   float rounded = czm_round(packedValue * 255.0);
   return int(rounded);
 }

 int czm_unpackUint(vec2 packedValue) {
   vec2 rounded = czm_round(packedValue * 255.0);
   return int(dot(rounded, vec2(1.0, 256.0)));
 }

 int czm_unpackUint(vec3 packedValue) {
   vec3 rounded = czm_round(packedValue * 255.0);
   return int(dot(rounded, vec3(1.0, 256.0, 65536.0)));
 }

 int czm_unpackUint(vec4 packedValue) {
   vec4 rounded = czm_round(packedValue * 255.0);
   return int(dot(rounded, vec4(1.0, 256.0, 65536.0, 16777216.0)));
 }
`;var $P=`/**
 * Transform metadata values following the EXT_structural_metadata spec
 * by multiplying by scale and adding the offset. Operations are always
 * performed component-wise, even for matrices.
 * 
 * @param {float|vec2|vec3|vec4|mat2|mat3|mat4} offset The offset to add
 * @param {float|vec2|vec3|vec4|mat2|mat3|mat4} scale The scale factor to multiply
 * @param {float|vec2|vec3|vec4|mat2|mat3|mat4} value The original value.
 *
 * @return {float|vec2|vec3|vec4|mat2|mat3|mat4} The transformed value of the same scalar/vector/matrix type as the input.
 */
float czm_valueTransform(float offset, float scale, float value) {
  return scale * value + offset;
}

vec2 czm_valueTransform(vec2 offset, vec2 scale, vec2 value) {
  return scale * value + offset;
}

vec3 czm_valueTransform(vec3 offset, vec3 scale, vec3 value) {
  return scale * value + offset;
}

vec4 czm_valueTransform(vec4 offset, vec4 scale, vec4 value) {
  return scale * value + offset;
}

mat2 czm_valueTransform(mat2 offset, mat2 scale, mat2 value) {
  return matrixCompMult(scale, value) + offset;
}

mat3 czm_valueTransform(mat3 offset, mat3 scale, mat3 value) {
  return matrixCompMult(scale, value) + offset;
}

mat4 czm_valueTransform(mat4 offset, mat4 scale, mat4 value) {
  return matrixCompMult(scale, value) + offset;
}
`;var eN=`#ifdef LOG_DEPTH
// 1.0 at the near plane, increasing linearly from there.
out float v_depthFromNearPlusOne;
#ifdef SHADOW_MAP
out vec3 v_logPositionEC;
#endif
#endif

vec4 czm_updatePositionDepth(vec4 coords) {
#if defined(LOG_DEPTH)

#ifdef SHADOW_MAP
    vec3 logPositionEC = (czm_inverseProjection * coords).xyz;
    v_logPositionEC = logPositionEC;
#endif

    // With the very high far/near ratios used with the logarithmic depth
    // buffer, floating point rounding errors can cause linear depth values
    // to end up on the wrong side of the far plane, even for vertices that
    // are really nowhere near it. Since we always write a correct logarithmic
    // depth value in the fragment shader anyway, we just need to make sure
    // such errors don't cause the primitive to be clipped entirely before
    // we even get to the fragment shader.
    coords.z = clamp(coords.z / coords.w, -1.0, 1.0) * coords.w;
#endif

    return coords;
}

/**
 * Writes the logarithmic depth to gl_Position using the already computed gl_Position.
 *
 * @name czm_vertexLogDepth
 * @glslFunction
 */
void czm_vertexLogDepth()
{
#ifdef LOG_DEPTH
    v_depthFromNearPlusOne = (gl_Position.w - czm_currentFrustum.x) + 1.0;
    gl_Position = czm_updatePositionDepth(gl_Position);
#endif
}

/**
 * Writes the logarithmic depth to gl_Position using the provided clip coordinates.
 * <p>
 * An example use case for this function would be moving the vertex in window coordinates
 * before converting back to clip coordinates. Use the original vertex clip coordinates.
 * </p>
 * @name czm_vertexLogDepth
 * @glslFunction
 *
 * @param {vec4} clipCoords The vertex in clip coordinates.
 *
 * @example
 * czm_vertexLogDepth(czm_projection * vec4(positionEyeCoordinates, 1.0));
 */
void czm_vertexLogDepth(vec4 clipCoords)
{
#ifdef LOG_DEPTH
    v_depthFromNearPlusOne = (clipCoords.w - czm_currentFrustum.x) + 1.0;
    czm_updatePositionDepth(clipCoords);
#endif
}
`;var tN=`vec4 czm_screenToEyeCoordinates(vec4 screenCoordinate)
{
    // Reconstruct NDC coordinates
    float x = 2.0 * screenCoordinate.x - 1.0;
    float y = 2.0 * screenCoordinate.y - 1.0;
    float z = (screenCoordinate.z - czm_viewportTransformation[3][2]) / czm_viewportTransformation[2][2];
    vec4 q = vec4(x, y, z, 1.0);

    // Reverse the perspective division to obtain clip coordinates.
    q /= screenCoordinate.w;

    // Reverse the projection transformation to obtain eye coordinates.
    if (!(czm_inverseProjection == mat4(0.0))) // IE and Edge sometimes do something weird with != between mat4s
    {
        q = czm_inverseProjection * q;
    }
    else
    {
        float top = czm_frustumPlanes.x;
        float bottom = czm_frustumPlanes.y;
        float left = czm_frustumPlanes.z;
        float right = czm_frustumPlanes.w;

        float near = czm_currentFrustum.x;
        float far = czm_currentFrustum.y;

        q.x = (q.x * (right - left) + left + right) * 0.5;
        q.y = (q.y * (top - bottom) + bottom + top) * 0.5;
        q.z = (q.z * (near - far) - near - far) * 0.5;
        q.w = 1.0;
    }

    return q;
}

/**
 * Transforms a position from window to eye coordinates.
 * The transform from window to normalized device coordinates is done using components
 * of (@link czm_viewport} and {@link czm_viewportTransformation} instead of calculating
 * the inverse of <code>czm_viewportTransformation</code>. The transformation from
 * normalized device coordinates to clip coordinates is done using <code>fragmentCoordinate.w</code>,
 * which is expected to be the scalar used in the perspective divide. The transformation
 * from clip to eye coordinates is done using {@link czm_inverseProjection}.
 *
 * @name czm_windowToEyeCoordinates
 * @glslFunction
 *
 * @param {vec4} fragmentCoordinate The position in window coordinates to transform.
 *
 * @returns {vec4} The transformed position in eye coordinates.
 *
 * @see czm_modelToWindowCoordinates
 * @see czm_eyeToWindowCoordinates
 * @see czm_inverseProjection
 * @see czm_viewport
 * @see czm_viewportTransformation
 *
 * @example
 * vec4 positionEC = czm_windowToEyeCoordinates(gl_FragCoord);
 */
vec4 czm_windowToEyeCoordinates(vec4 fragmentCoordinate)
{
    vec2 screenCoordXY = (fragmentCoordinate.xy - czm_viewport.xy) / czm_viewport.zw;
    return czm_screenToEyeCoordinates(vec4(screenCoordXY, fragmentCoordinate.zw));
}

vec4 czm_screenToEyeCoordinates(vec2 screenCoordinateXY, float depthOrLogDepth)
{
    // See reverseLogDepth.glsl. This is separate to re-use the pow.
#if defined(LOG_DEPTH) || defined(LOG_DEPTH_READ_ONLY)
    float near = czm_currentFrustum.x;
    float far = czm_currentFrustum.y;
    float log2Depth = depthOrLogDepth * czm_log2FarDepthFromNearPlusOne;
    float depthFromNear = exp2(log2Depth) - 1.0;
    float depthFromCamera = depthFromNear + near;
    vec4 screenCoord = vec4(screenCoordinateXY, far * (1.0 - near / depthFromCamera) / (far - near), 1.0);
    vec4 eyeCoordinate = czm_screenToEyeCoordinates(screenCoord);
    eyeCoordinate.w = 1.0 / depthFromCamera; // Better precision
#else
    vec4 screenCoord = vec4(screenCoordinateXY, depthOrLogDepth, 1.0);
    vec4 eyeCoordinate = czm_screenToEyeCoordinates(screenCoord);
#endif
    return eyeCoordinate;
}

/**
 * Transforms a position given as window x/y and a depth or a log depth from window to eye coordinates.
 * This function produces more accurate results for window positions with log depth than
 * conventionally unpacking the log depth using czm_reverseLogDepth and using the standard version
 * of czm_windowToEyeCoordinates.
 *
 * @name czm_windowToEyeCoordinates
 * @glslFunction
 *
 * @param {vec2} fragmentCoordinateXY The XY position in window coordinates to transform.
 * @param {float} depthOrLogDepth A depth or log depth for the fragment.
 *
 * @see czm_modelToWindowCoordinates
 * @see czm_eyeToWindowCoordinates
 * @see czm_inverseProjection
 * @see czm_viewport
 * @see czm_viewportTransformation
 *
 * @returns {vec4} The transformed position in eye coordinates.
 */
vec4 czm_windowToEyeCoordinates(vec2 fragmentCoordinateXY, float depthOrLogDepth)
{
    vec2 screenCoordXY = (fragmentCoordinateXY.xy - czm_viewport.xy) / czm_viewport.zw;
    return czm_screenToEyeCoordinates(screenCoordXY, depthOrLogDepth);
}
`;var nN=`// emulated noperspective
#if !defined(LOG_DEPTH)
in float v_WindowZ;
#endif

/**
 * Emulates GL_DEPTH_CLAMP. Clamps a fragment to the near and far plane
 * by writing the fragment's depth. See czm_depthClamp for more details.
 *
 * @name czm_writeDepthClamp
 * @glslFunction
 *
 * @example
 * out_FragColor = color;
 * czm_writeDepthClamp();
 *
 * @see czm_depthClamp
 */
void czm_writeDepthClamp()
{
#if (!defined(LOG_DEPTH) && (__VERSION__ == 300 || defined(GL_EXT_frag_depth)))
    gl_FragDepth = clamp(v_WindowZ * gl_FragCoord.w, 0.0, 1.0);
#endif
}
`;var iN=`#ifdef LOG_DEPTH
in float v_depthFromNearPlusOne;

#ifdef POLYGON_OFFSET
uniform vec2 u_polygonOffset;
#endif

#endif

/**
 * Writes the fragment depth to the logarithmic depth buffer.
 * <p>
 * Use this when the vertex shader does not call {@link czm_vertexLogDepth}, for example, when
 * ray-casting geometry using a full screen quad.
 * </p>
 * @name czm_writeLogDepth
 * @glslFunction
 *
 * @param {float} depth The depth coordinate, where 1.0 is on the near plane and
 *                      depth increases in eye-space units from there
 *
 * @example
 * czm_writeLogDepth((czm_projection * v_positionEyeCoordinates).w + 1.0);
 */
void czm_writeLogDepth(float depth)
{
#if (defined(LOG_DEPTH) && (__VERSION__ == 300 || defined(GL_EXT_frag_depth)))
    // Discard the vertex if it's not between the near and far planes.
    // We allow a bit of epsilon on the near plane comparison because a 1.0
    // from the vertex shader (indicating the vertex should be _on_ the near
    // plane) will not necessarily come here as exactly 1.0.
    if (depth <= 0.9999999 || depth > czm_farDepthFromNearPlusOne) {
        discard;
    }

#ifdef POLYGON_OFFSET
    // Polygon offset: m * factor + r * units
    float factor = u_polygonOffset[0];
    float units = u_polygonOffset[1];

#if (__VERSION__ == 300 || defined(GL_OES_standard_derivatives))
    // This factor doesn't work in IE 10
    if (factor != 0.0) {
        // m = sqrt(dZdX^2 + dZdY^2);
        float x = dFdx(depth);
        float y = dFdy(depth);
        float m = sqrt(x * x + y * y);

        // Apply the factor before computing the log depth.
        depth += m * factor;
    }
#endif

#endif

    gl_FragDepth = log2(depth) * czm_oneOverLog2FarDepthFromNearPlusOne;

#ifdef POLYGON_OFFSET
    // Apply the units after the log depth.
    gl_FragDepth += czm_epsilon7 * units;
#endif

#endif
}

/**
 * Writes the fragment depth to the logarithmic depth buffer.
 * <p>
 * Use this when the vertex shader calls {@link czm_vertexLogDepth}.
 * </p>
 *
 * @name czm_writeLogDepth
 * @glslFunction
 */
void czm_writeLogDepth() {
#ifdef LOG_DEPTH
    czm_writeLogDepth(v_depthFromNearPlusOne);
#endif
}
`;var oN=`/**
 * Transforms a value for non-perspective interpolation by multiplying
 * it by w, the value used in the perspective divide. This function is
 * intended to be called in a vertex shader to compute the value of a
 * \`varying\` that should not be subject to perspective interpolation.
 * For example, screen-space texture coordinates. The fragment shader
 * must call {@link czm_readNonPerspective} to retrieve the final
 * non-perspective value.
 *
 * @name czm_writeNonPerspective
 * @glslFunction
 *
 * @param {float|vec2|vec3|vec4} value The value to be interpolated without accounting for perspective.
 * @param {float} w The perspective divide value. Usually this is the computed \`gl_Position.w\`.
 * @returns {float|vec2|vec3|vec4} The transformed value, intended to be stored in a \`varying\` and read in the
 *          fragment shader with {@link czm_readNonPerspective}.
 */
float czm_writeNonPerspective(float value, float w) {
    return value * w;
}

vec2 czm_writeNonPerspective(vec2 value, float w) {
    return value * w;
}

vec3 czm_writeNonPerspective(vec3 value, float w) {
    return value * w;
}

vec4 czm_writeNonPerspective(vec4 value, float w) {
    return value * w;
}
`;var r_={czm_degreesPerRadian:Qv,czm_depthRange:Rv,czm_epsilon1:vv,czm_epsilon2:Mv,czm_epsilon3:Pv,czm_epsilon4:Nv,czm_epsilon5:Lv,czm_epsilon6:Fv,czm_epsilon7:Ov,czm_infinity:kv,czm_oneOverPi:Uv,czm_oneOverTwoPi:zv,czm_passCesium3DTile:Gv,czm_passCesium3DTileClassification:Hv,czm_passCesium3DTileClassificationIgnoreShow:Vv,czm_passClassification:jv,czm_passCompute:Yv,czm_passEnvironment:Wv,czm_passGaussianSplats:qv,czm_passGlobe:Jv,czm_passOpaque:Kv,czm_passOverlay:Xv,czm_passTerrainClassification:Zv,czm_passTranslucent:$v,czm_passVoxels:eM,czm_pi:tM,czm_piOverFour:nM,czm_piOverSix:iM,czm_piOverThree:oM,czm_piOverTwo:rM,czm_radiansPerDegree:aM,czm_sceneMode2D:sM,czm_sceneMode3D:cM,czm_sceneModeColumbusView:AM,czm_sceneModeMorphing:lM,czm_solarRadius:uM,czm_threePiOver2:fM,czm_twoPi:dM,czm_webMercatorMaxLatitude:hM,czm_depthRangeStruct:mM,czm_material:pM,czm_materialInput:gM,czm_modelMaterial:CM,czm_modelVertexOutput:EM,czm_ray:_M,czm_raySegment:IM,czm_shadowParameters:yM,czm_HSBToRGB:bM,czm_HSLToRGB:BM,czm_RGBToHSB:xM,czm_RGBToHSL:TM,czm_RGBToXYZ:SM,czm_XYZToRGB:wM,czm_acesTonemapping:DM,czm_alphaWeight:QM,czm_antialias:RM,czm_applyHSBShift:vM,czm_approximateSphericalCoordinates:MM,czm_approximateTanh:PM,czm_backFacing:NM,czm_branchFreeTernary:LM,czm_cascadeColor:FM,czm_cascadeDistance:OM,czm_cascadeMatrix:kM,czm_cascadeWeights:UM,czm_clipPolygons:zM,czm_columbusViewMorph:GM,czm_computeAtmosphereColor:HM,czm_computeGroundAtmosphereScattering:VM,czm_computePosition:jM,czm_computeScattering:YM,czm_cosineAndSine:WM,czm_decompressTextureCoordinates:qM,czm_depthClamp:JM,czm_eastNorthUpToEyeCoordinates:KM,czm_ellipsoidContainsPoint:XM,czm_ellipsoidTextureCoordinates:ZM,czm_equalsEpsilon:$M,czm_eyeOffset:eP,czm_eyeToWindowCoordinates:tP,czm_fastApproximateAtan:nP,czm_fog:iP,czm_gammaCorrect:oP,czm_geodeticSurfaceNormal:rP,czm_getDefaultMaterial:aP,czm_getDynamicAtmosphereLightDirection:sP,czm_getLambertDiffuse:cP,czm_getSpecular:AP,czm_getWaterNoise:lP,czm_hue:uP,czm_inverseGamma:fP,czm_isEmpty:dP,czm_isFull:hP,czm_latitudeToWebMercatorFraction:mP,czm_lineDistance:pP,czm_linearToSrgb:gP,czm_luminance:CP,czm_maximumComponent:EP,czm_metersPerPixel:_P,czm_modelToWindowCoordinates:IP,czm_multiplyWithColorBalance:yP,czm_nearFarScalar:bP,czm_octDecode:BP,czm_packDepth:xP,czm_pbrLighting:TP,czm_pbrNeutralTonemapping:SP,czm_phong:wP,czm_planeDistance:DP,czm_pointAlongRay:QP,czm_rayEllipsoidIntersectionInterval:RP,czm_raySphereIntersectionInterval:vP,czm_readDepth:MP,czm_readNonPerspective:PP,czm_reverseLogDepth:NP,czm_round:LP,czm_saturation:FP,czm_shadowDepthCompare:OP,czm_shadowVisibility:kP,czm_signNotZero:UP,czm_sphericalHarmonics:zP,czm_srgbToLinear:GP,czm_tangentToEyeSpaceMatrix:HP,czm_textureCube:VP,czm_transformPlane:jP,czm_translateRelativeToEye:YP,czm_translucentPhong:WP,czm_transpose:qP,czm_unpackClippingExtents:JP,czm_unpackDepth:KP,czm_unpackFloat:XP,czm_unpackUint:ZP,czm_valueTransform:$P,czm_vertexLogDepth:eN,czm_windowToEyeCoordinates:tN,czm_writeDepthClamp:nN,czm_writeLogDepth:iN,czm_writeNonPerspective:oN};function fK(e,t){let n=e;return n=n.replaceAll("version 300 es",""),n=n.replaceAll(/(texture\()/g,"texture2D("),t?(n=n.replaceAll(/\n\s*(in)\s+(vec\d|mat\d|float)/g,`
varying $2`),/out_FragData_(\d+)/.test(n)&&(n=`#extension GL_EXT_draw_buffers : enable
${n}`,n=n.replaceAll(/layout\s+\(location\s*=\s*\d+\)\s*out\s+vec4\s+out_FragData_\d+;/g,""),n=n.replaceAll(/out_FragData_(\d+)/g,"gl_FragData[$1]")),n=n.replaceAll(/layout\s+\(location\s*=\s*0\)\s*out\s+vec4\s+out_FragColor;/g,""),n=n.replaceAll(/out_FragColor/g,"gl_FragColor"),n=n.replaceAll(/out_FragColor\[(\d+)\]/g,"gl_FragColor[$1]"),/gl_FragDepth/.test(n)&&(n=`#extension GL_EXT_frag_depth : enable
${n}`,n=n.replaceAll(/gl_FragDepth/g,"gl_FragDepthEXT")),n=`#ifdef GL_EXT_shader_texture_lod
#extension GL_EXT_shader_texture_lod : enable
#endif
${n}`,n=`#ifdef GL_OES_standard_derivatives
#extension GL_OES_standard_derivatives : enable
#endif
${n}`):(n=n.replaceAll(/(in)\s+(vec\d|mat\d|float)/g,"attribute $2"),n=n.replaceAll(/(out)\s+(vec\d|mat\d|float)\s+([\w]+);/g,"varying $2 $3;")),n=`#version 100
${n}`,n}var rN=fK;function aN(e){return e=e.replace(/\/\/.*/g,""),e.replace(/\/\*\*[\s\S]*?\*\//gm,function(t){let n=t.match(/\n/gm).length,i="";for(let o=0;o<n;++o)i+=`
`;return i})}function sN(e,t,n){let i;for(let o=0;o<n.length;++o)n[o].name===e&&(i=n[o]);return c(i)||(t=aN(t),i={name:e,glslSource:t,dependsOn:[],requiredBy:[],evaluated:!1},n.push(i)),i}function cN(e,t){if(e.evaluated)return;e.evaluated=!0;let n=e.glslSource.match(/\bczm_[a-zA-Z0-9_]*/g);c(n)&&n!==null&&(n=n.filter(function(i,o){return n.indexOf(i)===o}),n.forEach(function(i){if(i!==e.name&&nr._czmBuiltinsAndUniforms.hasOwnProperty(i)){let o=sN(i,nr._czmBuiltinsAndUniforms[i],t);e.dependsOn.push(o),o.requiredBy.push(e),cN(o,t)}}))}function dK(e){let t=[],n=[];for(;e.length>0;){let o=e.pop();n.push(o),o.requiredBy.length===0&&t.push(o)}for(;t.length>0;){let o=t.shift();e.push(o);for(let r=0;r<o.dependsOn.length;++r){let a=o.dependsOn[r],s=a.requiredBy.indexOf(o);a.requiredBy.splice(s,1),a.requiredBy.length===0&&t.push(a)}}let i=[];for(let o=0;o<n.length;++o)n[o].requiredBy.length!==0&&i.push(n[o])}function hK(e){let t=[],n=sN("main",e,t);cN(n,t),dK(t);let i="";for(let o=t.length-1;o>=0;--o)i=`${i+t[o].glslSource}
`;return i.replace(n.glslSource,"")}function AN(e,t,n){let i,o,r="",a=e.sources;if(c(a))for(i=0,o=a.length;i<o;++i)r+=`
#line 0
${a[i]}`;r=aN(r);let s;r=r.replace(/#version\s+(.*?)\n/gm,function(C,_){return s=_,`
`});let A=[];r=r.replace(/#extension.*\n/gm,function(C){return A.push(C),`
`}),r=r.replace(/precision\s(lowp|mediump|highp)\s(float|int);/,"");let l=e.pickColorQualifier;c(l)&&(r=nr.createPickFragmentShaderSource(r,l));let d="",m=A.length;for(i=0;i<m;i++)d+=A[i];t&&(d+=`#ifdef GL_FRAGMENT_PRECISION_HIGH
    precision highp float;
    precision highp int;
#else
    precision mediump float;
    precision mediump int;
    #define highp mediump
#endif

`);let p=e.defines;if(c(p))for(i=0,o=p.length;i<o;++i){let C=p[i];C.length!==0&&(d+=`#define ${C}
`)}n.textureFloatLinear&&(d+=`#define OES_texture_float_linear

`),n.floatingPointTexture&&(d+=`#define OES_texture_float

`);let g="";e.includeBuiltIns&&(g=hK(r)),d+=`
#line 0
`;let h=g+r;return n.webgl2&&t&&!/layout\s*\(location\s*=\s*0\)\s*out\s+vec4\s+out_FragColor;/g.test(h)&&!/czm_out_FragColor/g.test(h)&&/out_FragColor/g.test(h)&&(d+=`layout(location = 0) out vec4 out_FragColor;

`),d+=g,d+=r,n.webgl2?d=`#version 300 es
${d}`:d=rN(d,t),d}function nr(e){e=e??G.EMPTY_OBJECT;let t=e.pickColorQualifier;this.defines=c(e.defines)?e.defines.slice(0):[],this.sources=c(e.sources)?e.sources.slice(0):[],this.pickColorQualifier=t,this.includeBuiltIns=e.includeBuiltIns??!0}nr.prototype.clone=function(){return new nr({sources:this.sources,defines:this.defines,pickColorQualifier:this.pickColorQualifier,includeBuiltIns:this.includeBuiltIns})};nr.replaceMain=function(e,t){return t=`void ${t}()`,e.replace(/void\s+main\s*\(\s*(?:void)?\s*\)/g,t)};nr.prototype.getCacheKey=function(){let t=this.defines.slice().sort().join(","),n=this.pickColorQualifier,i=this.includeBuiltIns,o=this.sources.join(`
`);return`${t}:${n}:${i}:${o}`};nr.prototype.createCombinedVertexShader=function(e){return AN(this,!1,e)};nr.prototype.createCombinedFragmentShader=function(e){return AN(this,!0,e)};nr._czmBuiltinsAndUniforms={};for(let e in r_)r_.hasOwnProperty(e)&&(nr._czmBuiltinsAndUniforms[e]=r_[e]);for(let e in rh)if(rh.hasOwnProperty(e)){let t=rh[e];typeof t.getDeclaration=="function"&&(nr._czmBuiltinsAndUniforms[e]=t.getDeclaration(e))}nr.createPickVertexShaderSource=function(e){return`${nr.replaceMain(e,"czm_old_main")}
in vec4 pickColor; 
out vec4 czm_pickColor; 
void main() 
{ 
    czm_old_main(); 
    czm_pickColor = pickColor; 
}`};nr.createPickFragmentShaderSource=function(e,t){let n=nr.replaceMain(e,"czm_old_main"),i=`${t} vec4 czm_pickColor; 
void main() 
{ 
    czm_old_main(); 
    if (out_FragColor.a == 0.0) { 
       discard; 
    } 
    out_FragColor = czm_pickColor; 
}`;return`${n}
${i}`};function mK(e,t){let n=e.defines,i=n.length;for(let o=0;o<i;++o)if(n[o]===t)return!0;return!1}function lN(e,t){let n=e.sources,i=n.length;for(let o=0;o<i;++o)if(n[o].indexOf(t)!==-1)return!0;return!1}function uN(e,t){let n=t.length;for(let i=0;i<n;++i){let o=t[i];if(lN(e,o))return o}}var pK=["v_normalEC","v_normal"];nr.findNormalVarying=function(e){return lN(e,"#ifdef HAS_NORMALS")?mK(e,"HAS_NORMALS")?"v_normalEC":void 0:uN(e,pK)};var gK=["v_positionEC"];nr.findPositionVarying=function(e){return uN(e,gK)};var It=nr;function Nc(e){e=e??G.EMPTY_OBJECT;let{context:t,source:n,pixelFormat:i=_t.RGBA,pixelDatatype:o=mt.UNSIGNED_BYTE,flipY:r=!0,skipColorSpaceConversion:a=!1,sampler:s=new nn}=e,{width:A,height:l}=e;c(n)&&(c(A)||(A=n.videoWidth??n.naturalWidth??n.width),c(l)||(l=n.videoHeight??n.naturalHeight??n.height));let d=e.preMultiplyAlpha||i===_t.RGB||i===_t.LUMINANCE,m=_t.toInternalFormat(i,o,t),p=_t.isCompressedFormat(m),g=t._gl,h=p?_t.compressedTextureSizeInBytes(i,A,l):_t.textureSizeInBytes(i,o,A,l);this._id=e.id??ji(),this._context=t,this._textureFilterAnisotropic=t._textureFilterAnisotropic,this._textureTarget=g.TEXTURE_2D,this._texture=g.createTexture(),this._internalFormat=m,this._pixelFormat=i,this._pixelDatatype=o,this._width=A,this._height=l,this._dimensions=new L(A,l),this._hasMipmap=!1,this._sizeInBytes=h,this._preMultiplyAlpha=d,this._flipY=r,this._initialized=!1,this._sampler=void 0,this._sampler=s,mN(this,s),g.activeTexture(g.TEXTURE0),g.bindTexture(this._textureTarget,this._texture),c(n)?(a?g.pixelStorei(g.UNPACK_COLORSPACE_CONVERSION_WEBGL,g.NONE):g.pixelStorei(g.UNPACK_COLORSPACE_CONVERSION_WEBGL,g.BROWSER_DEFAULT_WEBGL),c(n.arrayBufferView)?_t.isCompressedFormat(m)?CK(this,n):fN(this,n):c(n.framebuffer)?_K(this,n):dN(this,n),this._initialized=!0):hN(this),g.bindTexture(this._textureTarget,null)}function CK(e,t){let i=e._context._gl,o=e._textureTarget,r=e._internalFormat,{width:a,height:s}=e;if(i.pixelStorei(i.UNPACK_ALIGNMENT,4),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,!1),i.compressedTexImage2D(o,0,r,a,s,0,t.arrayBufferView),c(t.mipLevels)){let A=a,l=s;for(let d=0;d<t.mipLevels.length;++d)A=a_(A),l=a_(l),i.compressedTexImage2D(o,d+1,r,A,l,0,t.mipLevels[d])}}function fN(e,t){let n=e._context,i=n._gl,o=e._textureTarget,r=e._internalFormat,{width:a,height:s,pixelFormat:A,pixelDatatype:l,flipY:d}=e,m=_t.alignmentInBytes(A,l,a);i.pixelStorei(i.UNPACK_ALIGNMENT,m),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,!1);let{arrayBufferView:p}=t;if(d&&(p=_t.flipY(p,A,l,a,s)),i.texImage2D(o,0,r,a,s,0,A,mt.toWebGLConstant(l,n),p),c(t.mipLevels)){let g=a,h=s;for(let C=0;C<t.mipLevels.length;++C)g=a_(g),h=a_(h),i.texImage2D(o,C+1,r,g,h,0,A,mt.toWebGLConstant(l,n),t.mipLevels[C])}}function EK(e,t,n,i,o,r){let a=e._context,s=a._gl,{pixelFormat:A,pixelDatatype:l}=e,d=_t.alignmentInBytes(A,l,o);s.pixelStorei(s.UNPACK_ALIGNMENT,d),s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),s.pixelStorei(s.UNPACK_FLIP_Y_WEBGL,!1),e.flipY&&(t=_t.flipY(t,A,l,o,r)),s.texSubImage2D(e._textureTarget,0,n,i,o,r,A,mt.toWebGLConstant(l,a),t)}function _K(e,t){let n=e._context,i=n._gl;i.pixelStorei(i.UNPACK_ALIGNMENT,4),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,!1),t.framebuffer!==n.defaultFramebuffer&&t.framebuffer._bind(),i.copyTexImage2D(e._textureTarget,0,e._internalFormat,t.xOffset,t.yOffset,e.width,e.height,0),t.framebuffer!==n.defaultFramebuffer&&t.framebuffer._unBind()}function dN(e,t){let n=e._context,i=n._gl;i.pixelStorei(i.UNPACK_ALIGNMENT,4),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.preMultiplyAlpha),i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,e.flipY),i.texImage2D(e._textureTarget,0,e._internalFormat,e.pixelFormat,mt.toWebGLConstant(e.pixelDatatype,n),t)}function IK(e,t,n,i){let o=e._context,r=o._gl;r.pixelStorei(r.UNPACK_ALIGNMENT,4),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.preMultiplyAlpha),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,e.flipY),r.texSubImage2D(e._textureTarget,0,n,i,e.pixelFormat,mt.toWebGLConstant(e.pixelDatatype,o),t)}function a_(e){let t=Math.floor(e/2)|0;return Math.max(t,1)}function hN(e){let t=e._context;t._gl.texImage2D(e._textureTarget,0,e._internalFormat,e._width,e._height,0,e._pixelFormat,mt.toWebGLConstant(e._pixelDatatype,t),null)}Nc.create=function(e){return new Nc(e)};Nc.fromFramebuffer=function(e){e=e??G.EMPTY_OBJECT;let t=e.context,{pixelFormat:n=_t.RGB,framebufferXOffset:i=0,framebufferYOffset:o=0,width:r=t.drawingBufferWidth,height:a=t.drawingBufferHeight,framebuffer:s}=e;return new Nc({context:t,width:r,height:a,pixelFormat:n,source:{framebuffer:c(s)?s:t.defaultFramebuffer,xOffset:i,yOffset:o,width:r,height:a}})};Object.defineProperties(Nc.prototype,{id:{get:function(){return this._id}},sampler:{get:function(){return this._sampler},set:function(e){mN(this,e),this._sampler=e}},pixelFormat:{get:function(){return this._pixelFormat}},pixelDatatype:{get:function(){return this._pixelDatatype}},dimensions:{get:function(){return this._dimensions}},preMultiplyAlpha:{get:function(){return this._preMultiplyAlpha}},flipY:{get:function(){return this._flipY}},width:{get:function(){return this._width}},height:{get:function(){return this._height}},sizeInBytes:{get:function(){return this._hasMipmap?Math.floor(this._sizeInBytes*4/3):this._sizeInBytes}},_target:{get:function(){return this._textureTarget}}});function mN(e,t){let{minificationFilter:n,magnificationFilter:i}=t,o=[Wt.NEAREST_MIPMAP_NEAREST,Wt.NEAREST_MIPMAP_LINEAR,Wt.LINEAR_MIPMAP_NEAREST,Wt.LINEAR_MIPMAP_LINEAR].includes(n),r=e._context,a=e._pixelFormat,s=e._pixelDatatype;(s===mt.FLOAT&&!r.textureFloatLinear||s===mt.HALF_FLOAT&&!r.textureHalfFloatLinear)&&(n=o?Wt.NEAREST_MIPMAP_NEAREST:Wt.NEAREST,i=yo.NEAREST),r.webgl2&&_t.isDepthFormat(a)&&(n=Wt.NEAREST,i=yo.NEAREST);let A=r._gl,l=e._textureTarget;A.activeTexture(A.TEXTURE0),A.bindTexture(l,e._texture),A.texParameteri(l,A.TEXTURE_MIN_FILTER,n),A.texParameteri(l,A.TEXTURE_MAG_FILTER,i),A.texParameteri(l,A.TEXTURE_WRAP_S,t.wrapS),A.texParameteri(l,A.TEXTURE_WRAP_T,t.wrapT),c(e._textureFilterAnisotropic)&&A.texParameteri(l,e._textureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,t.maximumAnisotropy),A.bindTexture(l,null)}Nc.prototype.copyFrom=function(e){let{xOffset:t=0,yOffset:n=0,source:i,skipColorSpaceConversion:o=!1}=e,a=this._context._gl,s=this._textureTarget;a.activeTexture(a.TEXTURE0),a.bindTexture(s,this._texture);let{width:A,height:l}=i;c(i.videoWidth)&&c(i.videoHeight)?(A=i.videoWidth,l=i.videoHeight):c(i.naturalWidth)&&c(i.naturalHeight)&&(A=i.naturalWidth,l=i.naturalHeight),o?a.pixelStorei(a.UNPACK_COLORSPACE_CONVERSION_WEBGL,a.NONE):a.pixelStorei(a.UNPACK_COLORSPACE_CONVERSION_WEBGL,a.BROWSER_DEFAULT_WEBGL);let d=!1;this._initialized||(t===0&&n===0&&A===this._width&&l===this._height?(c(i.arrayBufferView)?fN(this,i):dN(this,i),d=!0):(a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,!1),hN(this)),this._initialized=!0),d||(c(i.arrayBufferView)?EK(this,i.arrayBufferView,t,n,A,l):IK(this,i,t,n)),a.bindTexture(s,null)};Nc.prototype.copyFromFramebuffer=function(e,t,n,i,o,r){e=e??0,t=t??0,n=n??0,i=i??0,o=o??this._width,r=r??this._height;let a=this._context._gl,s=this._textureTarget;a.activeTexture(a.TEXTURE0),a.bindTexture(s,this._texture),a.copyTexSubImage2D(s,0,e,t,n,i,o,r),a.bindTexture(s,null),this._initialized=!0};Nc.prototype.generateMipmap=function(e){e=e??Yf.DONT_CARE,this._hasMipmap=!0;let t=this._context._gl,n=this._textureTarget;t.hint(t.GENERATE_MIPMAP_HINT,e),t.activeTexture(t.TEXTURE0),t.bindTexture(n,this._texture),t.generateMipmap(n),t.bindTexture(n,null)};Nc.prototype.isDestroyed=function(){return!1};Nc.prototype.destroy=function(){return this._context._gl.deleteTexture(this._texture),me(this)};var on=Nc;function qs(e){this.planes=e??[]}var _p=[new f,new f,new f];f.clone(f.UNIT_X,_p[0]);f.clone(f.UNIT_Y,_p[1]);f.clone(f.UNIT_Z,_p[2]);var Bu=new f,yK=new f,pN=new Ze(new f(1,0,0),0);qs.fromBoundingSphere=function(e,t){c(t)||(t=new qs);let n=_p.length,i=t.planes;i.length=2*n;let o=e.center,r=e.radius,a=0;for(let s=0;s<n;++s){let A=_p[s],l=i[a],d=i[a+1];c(l)||(l=i[a]=new re),c(d)||(d=i[a+1]=new re),f.multiplyByScalar(A,-r,Bu),f.add(o,Bu,Bu),l.x=A.x,l.y=A.y,l.z=A.z,l.w=-f.dot(A,Bu),f.multiplyByScalar(A,r,Bu),f.add(o,Bu,Bu),d.x=-A.x,d.y=-A.y,d.z=-A.z,d.w=-f.dot(f.negate(A,yK),Bu),a+=2}return t};qs.prototype.computeVisibility=function(e){let t=this.planes,n=!1;for(let i=0,o=t.length;i<o;++i){let r=e.intersectPlane(Ze.fromCartesian4(t[i],pN));if(r===bt.OUTSIDE)return bt.OUTSIDE;r===bt.INTERSECTING&&(n=!0)}return n?bt.INTERSECTING:bt.INSIDE};qs.prototype.computeVisibilityWithPlaneMask=function(e,t){if(t===qs.MASK_OUTSIDE||t===qs.MASK_INSIDE)return t;let n=qs.MASK_INSIDE,i=this.planes;for(let o=0,r=i.length;o<r;++o){let a=o<31?1<<o:0;if(o<31&&(t&a)===0)continue;let s=e.intersectPlane(Ze.fromCartesian4(i[o],pN));if(s===bt.OUTSIDE)return qs.MASK_OUTSIDE;s===bt.INTERSECTING&&(n|=a)}return n};qs.MASK_OUTSIDE=4294967295;qs.MASK_INSIDE=0;qs.MASK_INDETERMINATE=2147483647;var Wf=qs;function CA(e){e=e??G.EMPTY_OBJECT,this.left=e.left,this._left=void 0,this.right=e.right,this._right=void 0,this.top=e.top,this._top=void 0,this.bottom=e.bottom,this._bottom=void 0,this.near=e.near??1,this._near=this.near,this.far=e.far??5e8,this._far=this.far,this._cullingVolume=new Wf,this._orthographicMatrix=new Q}function gN(e){(e.top!==e._top||e.bottom!==e._bottom||e.left!==e._left||e.right!==e._right||e.near!==e._near||e.far!==e._far)&&(e._left=e.left,e._right=e.right,e._top=e.top,e._bottom=e.bottom,e._near=e.near,e._far=e.far,e._orthographicMatrix=Q.computeOrthographicOffCenter(e.left,e.right,e.bottom,e.top,e.near,e.far,e._orthographicMatrix))}Object.defineProperties(CA.prototype,{projectionMatrix:{get:function(){return gN(this),this._orthographicMatrix}}});var bK=new f,BK=new f,xK=new f,hB=new f;CA.prototype.computeCullingVolume=function(e,t,n){let i=this._cullingVolume.planes,o=this.top,r=this.bottom,a=this.right,s=this.left,A=this.near,l=this.far,d=f.cross(t,n,bK);f.normalize(d,d);let m=BK;f.multiplyByScalar(t,A,m),f.add(e,m,m);let p=xK;f.multiplyByScalar(d,s,p),f.add(m,p,p);let g=i[0];return c(g)||(g=i[0]=new re),g.x=d.x,g.y=d.y,g.z=d.z,g.w=-f.dot(d,p),f.multiplyByScalar(d,a,p),f.add(m,p,p),g=i[1],c(g)||(g=i[1]=new re),g.x=-d.x,g.y=-d.y,g.z=-d.z,g.w=-f.dot(f.negate(d,hB),p),f.multiplyByScalar(n,r,p),f.add(m,p,p),g=i[2],c(g)||(g=i[2]=new re),g.x=n.x,g.y=n.y,g.z=n.z,g.w=-f.dot(n,p),f.multiplyByScalar(n,o,p),f.add(m,p,p),g=i[3],c(g)||(g=i[3]=new re),g.x=-n.x,g.y=-n.y,g.z=-n.z,g.w=-f.dot(f.negate(n,hB),p),g=i[4],c(g)||(g=i[4]=new re),g.x=t.x,g.y=t.y,g.z=t.z,g.w=-f.dot(t,m),f.multiplyByScalar(t,l,p),f.add(e,p,p),g=i[5],c(g)||(g=i[5]=new re),g.x=-t.x,g.y=-t.y,g.z=-t.z,g.w=-f.dot(f.negate(t,hB),p),this._cullingVolume};CA.prototype.getPixelDimensions=function(e,t,n,i,o){gN(this);let r=this.right-this.left,a=this.top-this.bottom,s=i*r/e,A=i*a/t;return o.x=s,o.y=A,o};CA.prototype.clone=function(e){return c(e)||(e=new CA),e.left=this.left,e.right=this.right,e.top=this.top,e.bottom=this.bottom,e.near=this.near,e.far=this.far,e._left=void 0,e._right=void 0,e._top=void 0,e._bottom=void 0,e._near=void 0,e._far=void 0,e};CA.prototype.equals=function(e){return c(e)&&e instanceof CA&&this.right===e.right&&this.left===e.left&&this.top===e.top&&this.bottom===e.bottom&&this.near===e.near&&this.far===e.far};CA.prototype.equalsEpsilon=function(e,t,n){return e===this||c(e)&&e instanceof CA&&S.equalsEpsilon(this.right,e.right,t,n)&&S.equalsEpsilon(this.left,e.left,t,n)&&S.equalsEpsilon(this.top,e.top,t,n)&&S.equalsEpsilon(this.bottom,e.bottom,t,n)&&S.equalsEpsilon(this.near,e.near,t,n)&&S.equalsEpsilon(this.far,e.far,t,n)};var s_=CA;function Va(e){e=e??G.EMPTY_OBJECT,this._offCenterFrustum=new s_,this.width=e.width,this._width=void 0,this.aspectRatio=e.aspectRatio,this._aspectRatio=void 0,this.near=e.near??1,this._near=this.near,this.far=e.far??5e8,this._far=this.far}Va.packedLength=4;Va.pack=function(e,t,n){return n=n??0,t[n++]=e.width,t[n++]=e.aspectRatio,t[n++]=e.near,t[n]=e.far,t};Va.unpack=function(e,t,n){return t=t??0,c(n)||(n=new Va),n.width=e[t++],n.aspectRatio=e[t++],n.near=e[t++],n.far=e[t],n};function xu(e){let t=e._offCenterFrustum;if(e.width!==e._width||e.aspectRatio!==e._aspectRatio||e.near!==e._near||e.far!==e._far){e._aspectRatio=e.aspectRatio,e._width=e.width,e._near=e.near,e._far=e.far;let n=1/e.aspectRatio;t.right=e.width*.5,t.left=-t.right,t.top=n*t.right,t.bottom=-t.top,t.near=e.near,t.far=e.far}}Object.defineProperties(Va.prototype,{projectionMatrix:{get:function(){return xu(this),this._offCenterFrustum.projectionMatrix}},offCenterFrustum:{get:function(){return xu(this),this._offCenterFrustum}}});Va.prototype.computeCullingVolume=function(e,t,n){return xu(this),this._offCenterFrustum.computeCullingVolume(e,t,n)};Va.prototype.getPixelDimensions=function(e,t,n,i,o){return xu(this),this._offCenterFrustum.getPixelDimensions(e,t,n,i,o)};Va.prototype.clone=function(e){return c(e)||(e=new Va),e.aspectRatio=this.aspectRatio,e.width=this.width,e.near=this.near,e.far=this.far,e._aspectRatio=void 0,e._width=void 0,e._near=void 0,e._far=void 0,this._offCenterFrustum.clone(e._offCenterFrustum),e};Va.prototype.equals=function(e){return!c(e)||!(e instanceof Va)?!1:(xu(this),xu(e),this.width===e.width&&this.aspectRatio===e.aspectRatio&&this._offCenterFrustum.equals(e._offCenterFrustum))};Va.prototype.equalsEpsilon=function(e,t,n){return!c(e)||!(e instanceof Va)?!1:(xu(this),xu(e),S.equalsEpsilon(this.width,e.width,t,n)&&S.equalsEpsilon(this.aspectRatio,e.aspectRatio,t,n)&&this._offCenterFrustum.equalsEpsilon(e._offCenterFrustum,t,n))};var Tu=Va;var c_={MORPHING:0,COLUMBUS_VIEW:1,SCENE2D:2,SCENE3D:3};c_.getMorphTime=function(e){return e===c_.SCENE3D?1:e===c_.MORPHING?void 0:0};var Ee=Object.freeze(c_);function yh(e){e=e??G.EMPTY_OBJECT;let{context:t,width:n,height:i,colorRenderbuffers:o,colorTextures:r,depthStencilRenderbuffer:a,depthStencilTexture:s,destroyAttachments:A}=e;if(this._width=n,this._height=i,c(o)!==c(r))throw new be("Both color renderbuffer and texture attachments must be provided.");if(c(a)!==c(s))throw new be("Both depth-stencil renderbuffer and texture attachments must be provided.");this._renderFramebuffer=new Hs({context:t,colorRenderbuffers:o,depthStencilRenderbuffer:a,destroyAttachments:A}),this._colorFramebuffer=new Hs({context:t,colorTextures:r,depthStencilTexture:s,destroyAttachments:A})}yh.prototype.getRenderFramebuffer=function(){return this._renderFramebuffer};yh.prototype.getColorFramebuffer=function(){return this._colorFramebuffer};yh.prototype.blitFramebuffers=function(e,t){this._renderFramebuffer.bindRead(),this._colorFramebuffer.bindDraw();let n=e._gl,i=0;this._colorFramebuffer._colorTextures.length>0&&(i|=n.COLOR_BUFFER_BIT),c(this._colorFramebuffer.depthStencilTexture)&&(i|=n.DEPTH_BUFFER_BIT|(t?n.STENCIL_BUFFER_BIT:0)),n.blitFramebuffer(0,0,this._width,this._height,0,0,this._width,this._height,i,n.NEAREST),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null)};yh.prototype.isDestroyed=function(){return!1};yh.prototype.destroy=function(){return this._renderFramebuffer.destroy(),this._colorFramebuffer.destroy(),me(this)};var CN=yh;var ja={RGBA4:W.RGBA4,RGBA8:W.RGBA8,RGBA16F:W.RGBA16F,RGBA32F:W.RGBA32F,RGB5_A1:W.RGB5_A1,RGB565:W.RGB565,DEPTH_COMPONENT16:W.DEPTH_COMPONENT16,STENCIL_INDEX8:W.STENCIL_INDEX8,DEPTH_STENCIL:W.DEPTH_STENCIL,DEPTH24_STENCIL8:W.DEPTH24_STENCIL8,validate:function(e){return e===ja.RGBA4||e===ja.RGBA8||e===ja.RGBA16F||e===ja.RGBA32F||e===ja.RGB5_A1||e===ja.RGB565||e===ja.DEPTH_COMPONENT16||e===ja.STENCIL_INDEX8||e===ja.DEPTH_STENCIL||e===ja.DEPTH24_STENCIL8},getColorFormat:function(e){return e===W.FLOAT?ja.RGBA32F:e===W.HALF_FLOAT_OES?ja.RGBA16F:ja.RGBA8}},qf=Object.freeze(ja);function Ip(e){e=e??G.EMPTY_OBJECT;let t=e.context,n=t._gl,i=rn.maximumRenderbufferSize,o=e.format??qf.RGBA4,r=c(e.width)?e.width:t.drawingBufferWidth,a=c(e.height)?e.height:t.drawingBufferHeight,s=e.numSamples??1;this._gl=n,this._format=o,this._width=r,this._height=a,this._renderbuffer=this._gl.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,this._renderbuffer),s>1?n.renderbufferStorageMultisample(n.RENDERBUFFER,s,o,r,a):n.renderbufferStorage(n.RENDERBUFFER,o,r,a),n.bindRenderbuffer(n.RENDERBUFFER,null)}Object.defineProperties(Ip.prototype,{format:{get:function(){return this._format}},width:{get:function(){return this._width}},height:{get:function(){return this._height}}});Ip.prototype._getRenderbuffer=function(){return this._renderbuffer};Ip.prototype.isDestroyed=function(){return!1};Ip.prototype.destroy=function(){return this._gl.deleteRenderbuffer(this._renderbuffer),me(this)};var yp=Ip;function Vo(e){e=e??G.EMPTY_OBJECT,this._numSamples=e.numSamples??1,this._colorAttachmentsLength=e.colorAttachmentsLength??1,this._color=e.color??!0,this._depth=e.depth??!1,this._depthStencil=e.depthStencil??!1,this._supportsDepthTexture=e.supportsDepthTexture??!1,this._createColorAttachments=e.createColorAttachments??!0,this._createDepthAttachments=e.createDepthAttachments??!0,this._pixelDatatype=e.pixelDatatype,this._pixelFormat=e.pixelFormat,this._width=void 0,this._height=void 0,this._framebuffer=void 0,this._multisampleFramebuffer=void 0,this._colorTextures=void 0,this._color&&(this._colorTextures=new Array(this._colorAttachmentsLength),this._colorRenderbuffers=new Array(this._colorAttachmentsLength)),this._colorRenderbuffer=void 0,this._depthStencilRenderbuffer=void 0,this._depthStencilTexture=void 0,this._depthRenderbuffer=void 0,this._depthTexture=void 0,this._attachmentsDirty=!1}Object.defineProperties(Vo.prototype,{framebuffer:{get:function(){return this._numSamples>1?this._multisampleFramebuffer.getRenderFramebuffer():this._framebuffer}},numSamples:{get:function(){return this._numSamples}},status:{get:function(){return this.framebuffer.status}}});Vo.prototype.isDirty=function(e,t,n,i,o){n=n??1;let r=this._width!==e||this._height!==t,a=this._numSamples!==n,s=c(i)&&this._pixelDatatype!==i||c(o)&&this._pixelFormat!==o,A=n===1?c(this._framebuffer):c(this._multisampleFramebuffer);return this._attachmentsDirty||r||a||s||!A||this._color&&!c(this._colorTextures[0])};Vo.prototype.update=function(e,t,n,i,o,r){if(i=e.msaa?i??1:1,o=o??(this._color?this._pixelDatatype??mt.UNSIGNED_BYTE:void 0),r=r??(this._color?this._pixelFormat??_t.RGBA:void 0),this.isDirty(t,n,i,o,r)){if(this.destroy(),this._width=t,this._height=n,this._numSamples=i,this._pixelDatatype=o,this._pixelFormat=r,this._attachmentsDirty=!1,this._color&&this._createColorAttachments){for(let a=0;a<this._colorAttachmentsLength;++a)if(this._colorTextures[a]=new on({context:e,width:t,height:n,pixelFormat:r,pixelDatatype:o,sampler:nn.NEAREST}),this._numSamples>1){let s=qf.getColorFormat(o);this._colorRenderbuffers[a]=new yp({context:e,width:t,height:n,format:s,numSamples:this._numSamples})}}this._depthStencil&&this._createDepthAttachments&&(this._supportsDepthTexture&&e.depthTexture?(this._depthStencilTexture=new on({context:e,width:t,height:n,pixelFormat:_t.DEPTH_STENCIL,pixelDatatype:mt.UNSIGNED_INT_24_8,sampler:nn.NEAREST}),this._numSamples>1&&(this._depthStencilRenderbuffer=new yp({context:e,width:t,height:n,format:qf.DEPTH24_STENCIL8,numSamples:this._numSamples}))):this._depthStencilRenderbuffer=new yp({context:e,width:t,height:n,format:qf.DEPTH_STENCIL})),this._depth&&this._createDepthAttachments&&(this._supportsDepthTexture&&e.depthTexture?this._depthTexture=new on({context:e,width:t,height:n,pixelFormat:_t.DEPTH_COMPONENT,pixelDatatype:mt.UNSIGNED_INT,sampler:nn.NEAREST}):this._depthRenderbuffer=new yp({context:e,width:t,height:n,format:qf.DEPTH_COMPONENT16})),this._numSamples>1?this._multisampleFramebuffer=new CN({context:e,width:this._width,height:this._height,colorTextures:this._colorTextures,colorRenderbuffers:this._colorRenderbuffers,depthStencilTexture:this._depthStencilTexture,depthStencilRenderbuffer:this._depthStencilRenderbuffer,destroyAttachments:!1}):this._framebuffer=new Hs({context:e,colorTextures:this._colorTextures,depthTexture:this._depthTexture,depthRenderbuffer:this._depthRenderbuffer,depthStencilTexture:this._depthStencilTexture,depthStencilRenderbuffer:this._depthStencilRenderbuffer,destroyAttachments:!1})}};Vo.prototype.getColorTexture=function(e){return e=e??0,this._colorTextures[e]};Vo.prototype.setColorTexture=function(e,t){t=t??0,this._attachmentsDirty=e!==this._colorTextures[t],this._colorTextures[t]=e};Vo.prototype.getColorRenderbuffer=function(e){return e=e??0,this._colorRenderbuffers[e]};Vo.prototype.setColorRenderbuffer=function(e,t){t=t??0,this._attachmentsDirty=e!==this._colorRenderbuffers[t],this._colorRenderbuffers[t]=e};Vo.prototype.getDepthRenderbuffer=function(){return this._depthRenderbuffer};Vo.prototype.setDepthRenderbuffer=function(e){this._attachmentsDirty=e!==this._depthRenderbuffer,this._depthRenderbuffer=e};Vo.prototype.getDepthTexture=function(){return this._depthTexture};Vo.prototype.setDepthTexture=function(e){this._attachmentsDirty=e!==this._depthTexture,this._depthTexture=e};Vo.prototype.getDepthStencilRenderbuffer=function(){return this._depthStencilRenderbuffer};Vo.prototype.setDepthStencilRenderbuffer=function(e){this._attachmentsDirty=e!==this._depthStencilRenderbuffer,this._depthStencilRenderbuffer=e};Vo.prototype.getDepthStencilTexture=function(){return this._depthStencilTexture};Vo.prototype.setDepthStencilTexture=function(e){this._attachmentsDirty=e!==this._depthStencilTexture,this._depthStencilTexture=e};Vo.prototype.prepareTextures=function(e,t){this._numSamples>1&&this._multisampleFramebuffer.blitFramebuffers(e,t)};Vo.prototype.clear=function(e,t,n){let i=t.framebuffer;t.framebuffer=this.framebuffer,t.execute(e,n),t.framebuffer=i};Vo.prototype.destroyFramebuffer=function(){this._framebuffer=this._framebuffer&&this._framebuffer.destroy(),this._multisampleFramebuffer=this._multisampleFramebuffer&&this._multisampleFramebuffer.destroy()};Vo.prototype.destroy=function(){if(this._color){let e=this._colorTextures,t=this._colorRenderbuffers;for(let n=0;n<e.length;++n){let i=e[n];this._createColorAttachments&&c(i)&&!i.isDestroyed()&&i.destroy(),c(i)&&i.isDestroyed()&&(e[n]=void 0);let o=t[n];this._createColorAttachments&&c(o)&&!o.isDestroyed()&&o.destroy(),c(o)&&o.isDestroyed()&&(t[n]=void 0)}}this._depthStencil&&(this._createDepthAttachments&&(this._depthStencilTexture=this._depthStencilTexture&&this._depthStencilTexture.destroy(),this._depthStencilRenderbuffer=this._depthStencilRenderbuffer&&this._depthStencilRenderbuffer.destroy()),c(this._depthStencilTexture)&&this._depthStencilTexture.isDestroyed()&&(this._depthStencilTexture=void 0),c(this._depthStencilRenderbuffer)&&this._depthStencilRenderbuffer.isDestroyed()&&(this._depthStencilRenderbuffer=void 0)),this._depth&&(this._createDepthAttachments&&(this._depthTexture=this._depthTexture&&this._depthTexture.destroy(),this._depthRenderbuffer=this._depthRenderbuffer&&this._depthRenderbuffer.destroy()),c(this._depthTexture)&&this._depthTexture.isDestroyed()&&(this._depthTexture=void 0),c(this._depthRenderbuffer)&&this._depthRenderbuffer.isDestroyed()&&(this._depthRenderbuffer=void 0)),this.destroyFramebuffer()};var EN=Vo;var Jf={VERTEX:0,FRAGMENT:1,BOTH:2};Jf.includesVertexShader=function(e){return e===Jf.VERTEX||e===Jf.BOTH};Jf.includesFragmentShader=function(e){return e===Jf.FRAGMENT||e===Jf.BOTH};var ie=Object.freeze(Jf);function mB(e){this.name=e,this.fields=[]}mB.prototype.addField=function(e,t){let n=`    ${e} ${t};`;this.fields.push(n)};mB.prototype.generateGlslLines=function(){let e=this.fields;return e.length===0&&(e=["    float _empty;"]),[].concat(`struct ${this.name}`,"{",e,"};")};var _N=mB;function pB(e){this.signature=e,this.body=[]}pB.prototype.addLines=function(e){let t=this.body;if(Array.isArray(e)){let n=e.length;for(let i=0;i<n;i++)t.push(`    ${e[i]}`)}else t.push(`    ${e}`)};pB.prototype.generateGlslLines=function(){return[].concat(this.signature,"{",this.body,"}")};var IN=pB;function TK(e,t){if(!c(t))return;let n=t.length;if(n===0)return;let i=e.length;e.length+=n;for(let o=0;o<n;o++)e[i+o]=t[o]}var Mn=TK;function ha(){this._positionAttributeLine=void 0,this._nextAttributeLocation=1,this._attributeLocations={},this._attributeLines=[],this._structs={},this._functions={},this._vertexShaderParts={defineLines:[],uniformLines:[],shaderLines:[],varyingLines:[],structIds:[],functionIds:[]},this._fragmentShaderParts={defineLines:[],uniformLines:[],shaderLines:[],varyingLines:[],structIds:[],functionIds:[]}}Object.defineProperties(ha.prototype,{attributeLocations:{get:function(){return this._attributeLocations}}});ha.prototype.addDefine=function(e,t,n){n=n??ie.BOTH;let i=e;c(t)&&(i+=` ${t.toString()}`),ie.includesVertexShader(n)&&this._vertexShaderParts.defineLines.push(i),ie.includesFragmentShader(n)&&this._fragmentShaderParts.defineLines.push(i)};ha.prototype.addStruct=function(e,t,n){this._structs[e]=new _N(t),ie.includesVertexShader(n)&&this._vertexShaderParts.structIds.push(e),ie.includesFragmentShader(n)&&this._fragmentShaderParts.structIds.push(e)};ha.prototype.addStructField=function(e,t,n){this._structs[e].addField(t,n)};ha.prototype.addFunction=function(e,t,n){this._functions[e]=new IN(t),ie.includesVertexShader(n)&&this._vertexShaderParts.functionIds.push(e),ie.includesFragmentShader(n)&&this._fragmentShaderParts.functionIds.push(e)};ha.prototype.addFunctionLines=function(e,t){this._functions[e].addLines(t)};ha.prototype.addUniform=function(e,t,n){n=n??ie.BOTH;let i=`uniform ${e} ${t};`;ie.includesVertexShader(n)&&this._vertexShaderParts.uniformLines.push(i),ie.includesFragmentShader(n)&&this._fragmentShaderParts.uniformLines.push(i)};ha.prototype.setPositionAttribute=function(e,t){return this._positionAttributeLine=`in ${e} ${t};`,this._attributeLocations[t]=0,0};ha.prototype.addAttribute=function(e,t){let n=`in ${e} ${t};`;this._attributeLines.push(n);let i=this._nextAttributeLocation;return this._attributeLocations[t]=i,this._nextAttributeLocation+=wK(e),i};ha.prototype.addVarying=function(e,t,n){n=c(n)?`${n} `:"";let i=`${e} ${t};`;this._vertexShaderParts.varyingLines.push(`${n}out ${i}`),this._fragmentShaderParts.varyingLines.push(`${n}in ${i}`)};ha.prototype.addVertexLines=function(e){let t=this._vertexShaderParts.shaderLines;Array.isArray(e)?Mn(t,e):t.push(e)};ha.prototype.addFragmentLines=function(e){let t=this._fragmentShaderParts.shaderLines;Array.isArray(e)?Mn(t,e):t.push(e)};ha.prototype.buildShaderProgram=function(e){let t=c(this._positionAttributeLine)?[this._positionAttributeLine]:[],n=SK(this),i=DK(this),o=t.concat(this._attributeLines,this._vertexShaderParts.uniformLines,this._vertexShaderParts.varyingLines,n.vertexLines,i.vertexLines,this._vertexShaderParts.shaderLines).join(`
`),r=new It({defines:this._vertexShaderParts.defineLines,sources:[o]}),a=this._fragmentShaderParts.uniformLines.concat(this._fragmentShaderParts.varyingLines,n.fragmentLines,i.fragmentLines,this._fragmentShaderParts.shaderLines).join(`
`),s=new It({defines:this._fragmentShaderParts.defineLines,sources:[a]});return gn.fromCache({context:e,vertexShaderSource:r,fragmentShaderSource:s,attributeLocations:this._attributeLocations})};ha.prototype.clone=function(){return Re(this,!0)};function SK(e){let t=[],n=[],i,o=e._vertexShaderParts.structIds,r,a,s;for(i=0;i<o.length;i++)r=o[i],a=e._structs[r],s=a.generateGlslLines(),Mn(t,s);for(o=e._fragmentShaderParts.structIds,i=0;i<o.length;i++)r=o[i],a=e._structs[r],s=a.generateGlslLines(),Mn(n,s);return{vertexLines:t,fragmentLines:n}}function wK(e){switch(e){case"mat2":return 2;case"mat3":return 3;case"mat4":return 4;default:return 1}}function DK(e){let t=[],n=[],i,o=e._vertexShaderParts.functionIds,r,a,s;for(i=0;i<o.length;i++)r=o[i],a=e._functions[r],s=a.generateGlslLines(),Mn(t,s);for(o=e._fragmentShaderParts.functionIds,i=0;i<o.length;i++)r=o[i],a=e._functions[r],s=a.generateGlslLines(),Mn(n,s);return{vertexLines:t,fragmentLines:n}}var A_=ha;function bp({x:e,y:t,width:n,height:i}){this.rectangle=new oi(e,t,n,i),this.childNode1=void 0,this.childNode2=void 0,this.index=void 0}function gB({width:e,height:t,borderPadding:n}){this._width=e,this._height=t,this._borderPadding=n,this._root=new bp({x:n,y:n,width:e-2*n,height:t-2*n})}gB.prototype.pack=function(e,{width:t,height:n}){let i=this._findNode(this._root,{width:t,height:n});if(c(i))return i.index=e,i};gB.prototype._findNode=function(e,{width:t,height:n}){if(c(e)){if(!c(e.childNode1)&&!c(e.childNode2)){if(c(e.index))return;let{rectangle:i}=e,o=i.width,r=i.height,a=o-t,s=r-n;return a<0||s<0?void 0:a===0&&s===0?e:a>s?(e.childNode1=new bp({x:i.x,y:i.y,width:t,height:r}),e.childNode2=new bp({x:i.x+t,y:i.y,width:a,height:r}),this._findNode(e.childNode1,{width:t,height:n})):(e.childNode1=new bp({x:i.x,y:i.y,width:o,height:n}),e.childNode2=new bp({x:i.x,y:i.y+n,width:o,height:s}),this._findNode(e.childNode1,{width:t,height:n}))}return this._findNode(e.childNode1,{width:t,height:n})||this._findNode(e.childNode2,{width:t,height:n})}};var CB=gB;var yN=16;function Ya(e){e=e??G.EMPTY_OBJECT;let t=e.borderWidthInPixels??1,n=e.initialSize??new L(yN,yN);this._pixelFormat=e.pixelFormat??_t.RGBA,this._sampler=e.sampler,this._borderWidthInPixels=t,this._initialSize=n,this._texturePacker=void 0,this._rectangles=[],this._subRegions=new Map,this._guid=ji(),this._imagesToAddQueue=[],this._indexById=new Map,this._indexPromiseById=new Map,this._nextIndex=0}Object.defineProperties(Ya.prototype,{borderWidthInPixels:{get:function(){return this._borderWidthInPixels}},rectangles:{get:function(){return this._rectangles}},texture:{get:function(){return this._texture}},pixelFormat:{get:function(){return this._pixelFormat}},sampler:{get:function(){return this._sampler}},numberOfImages:{get:function(){return this._nextIndex}},guid:{get:function(){return this._guid}},sizeInBytes:{get:function(){return c(this._texture)?this._texture.sizeInBytes:0}}});Ya.prototype.computeTextureCoordinates=function(e,t){let n=this._texture,i=this._rectangles[e];if(c(t)||(t=new oi),!c(i))return t.x=0,t.y=0,t.width=0,t.height=0,t;let o=n.width,r=n.height,a=i.width,s=i.height,A=i.x,l=i.y,d=this._subRegions.get(e);if(c(d)){let m=this._rectangles[d];A+=m.x,l+=m.y}return t.x=A/o,t.y=l/r,t.width=a/o,t.height=s/r,t};Ya.prototype._copyFromTexture=function(e,t,n,i){let o=this._pixelFormat,r=this._sampler,a=new on({context:e,height:n,width:t,pixelFormat:o,sampler:r}),s=e._gl,A=a._textureTarget,l=this._texture,d=new Hs({context:e,colorTextures:[l],destroyAttachments:!1});s.activeTexture(s.TEXTURE0),s.bindTexture(A,a._texture),d._bind();let m=this.rectangles,p=this._subRegions;for(let g=0;g<m.length;++g){let h=i[g],C=m[g];if(!c(h)||!c(C)||c(p.get(g)))continue;let{x:_,y:I,width:b,height:x}=h;s.copyTexSubImage2D(A,0,_,I,C.x,C.y,b,x)}return s.bindTexture(A,null),a._initialized=!0,d._unBind(),d.destroy(),a};Ya.prototype._resize=function(e,t=0){let n=this._borderWidthInPixels,i=this._rectangles,o=this._imagesToAddQueue,r=this._texture,a=r.width,s=r.height,A=this._subRegions,l=i.map((b,x)=>new bN({index:x,image:b})).filter((b,x)=>c(b.image)&&!c(A.get(x))),d=0,m=0,p=0;for(let b=t;b<o.length;++b){let{width:x,height:T}=o[b].image;d=Math.max(d,x),m=Math.max(m,T),p+=x*T,l.push(o[b])}a=Math.max(d,a),s=Math.max(m,s),e.webgl2||(a=S.nextPowerOfTwo(a),s=S.nextPowerOfTwo(s));let g=p,h=1;for(;g/a/s>=1;)h*=2,a>s?s*=h:a*=h;l.sort(({image:b},{image:x})=>x.height*x.width-b.height*b.width);let C=new Array(this._nextIndex);for(let b of this._subRegions.keys())c(A.get(b))&&(C[b]=i[b]);let _,I=!1;for(;!I;){_=new CB({height:s,width:a,borderPadding:n});let b;for(b=0;b<l.length;++b){let{index:x,image:T}=l[b];if(!c(T))continue;let w=_.pack(x,T);if(!c(w)){a>s?s*=2:a*=2;break}C[x]=w.rectangle}I=b===l.length}this._texturePacker=_,this._texture=this._copyFromTexture(e,a,s,C),r.destroy(),this._rectangles=C,this._guid=ji()};Ya.prototype.getImageIndex=function(e){return this._indexById.get(e)};Ya.prototype._copyImageToTexture=function({index:e,image:t,resolve:n,reject:i}){let o=this._texture,r=this._rectangles[e];try{o.copyFrom({source:t,xOffset:r.x,yOffset:r.y}),c(n)&&n(e)}catch(a){if(c(i)){i(a);return}}};function bN({index:e,image:t,resolve:n,reject:i}){this.index=e,this.image=t,this.resolve=n,this.reject=i,this.rectangle=void 0}Ya.prototype._addImage=function(e,t){return new Promise((n,i)=>{this._imagesToAddQueue.push(new bN({index:e,image:t,resolve:n,reject:i})),this._imagesToAddQueue.sort(({image:o},{image:r})=>r.height*r.width-o.height*o.width)})};Ya.prototype._processImageQueue=function(e){let t=this._imagesToAddQueue;if(t.length===0)return!1;this._rectangles.length=this._nextIndex;let n,i;for(n=0;n<t.length;++n){let o=t[n],{image:r,index:a}=o,s=this._texturePacker.pack(a,r);if(!c(s)){try{this._resize(e,n)}catch(A){i=A,c(o.reject)&&o.reject(i)}break}this._rectangles[a]=s.rectangle}if(c(i)){for(n=n+1;n<t.length;++n){let{resolve:o}=t[n];c(o)&&o(-1)}return t.length=0,!1}for(let o=0;o<t.length;++o)this._copyImageToTexture(t[o]);return t.length=0,!0};Ya.prototype.update=function(e){if(!c(this._texture)){let t=this._initialSize.x,n=this._initialSize.y,i=this._pixelFormat,o=this._sampler,r=this._borderWidthInPixels;this._texture=new on({context:e,width:t,height:n,pixelFormat:i,sampler:o}),this._texturePacker=new CB({height:n,width:t,borderPadding:r})}return this._processImageQueue(e)};async function QK(e,t){return typeof e=="function"&&(e=e(t)),(typeof e=="string"||e instanceof Ye)&&(e=Ye.createIfNeeded(e).fetchImage()),e}Ya.prototype.addImage=function(e,t){let n=this._indexPromiseById.get(e);if(c(n))return n;let i=this._nextIndex++;return this._indexById.set(e,i),n=(async()=>(t=await QK(t,e),this.isDestroyed()||!c(t)?-1:this._addImage(i,t)))(),this._indexPromiseById.set(e,n),n};Ya.prototype.addImageSubRegion=function(e,t){let n=this._indexById.get(e);if(!c(n))throw new ae(`image with id "${e}" not found in the atlas.`);let i=this._indexPromiseById.get(e);for(let[r,a]of this._subRegions.entries())if(n===a&&this._rectangles[r].equals(t))return i.then(A=>A===-1?-1:r);let o=this._nextIndex++;return this._subRegions.set(o,n),this._rectangles[o]=t.clone(),i.then(r=>{if(r===-1)return-1;let a=this._rectangles[r];return o})};Ya.prototype.isDestroyed=function(){return!1};Ya.prototype.destroy=function(){return this._texture=this._texture&&this._texture.destroy(),this._imagesToAddQueue.forEach(({resolve:e})=>{c(e)&&e(-1)}),me(this)};var l_=Ya;function ir(e,t,n,i){let o=ir._verifyAttributes(t);n=n??0;let r=[],a={},s,A,l=o.length;for(let m=0;m<l;++m){let p=o[m];if(p.vertexBuffer){r.push(p);continue}A=p.usage,s=a[A],c(s)||(s=a[A]=[]),s.push(p)}function d(m,p){return V.getSizeInBytes(p.componentDatatype)-V.getSizeInBytes(m.componentDatatype)}this._allBuffers=[];for(A in a)if(a.hasOwnProperty(A)){s=a[A],s.sort(d);let m=ir._vertexSizeInBytes(s),p=s[0].usage,g={vertexSizeInBytes:m,vertexBuffer:void 0,usage:p,needsCommit:!1,arrayBuffer:void 0,arrayViews:ir._createArrayViews(s,m)};this._allBuffers.push(g)}this._size=0,this._instanced=i??!1,this._precreated=r,this._context=e,this.writers=void 0,this.va=void 0,this.resize(n)}ir._verifyAttributes=function(e){let t=[];for(let i=0;i<e.length;++i){let o=e[i],r={index:o.index??i,enabled:o.enabled??!0,componentsPerAttribute:o.componentsPerAttribute,componentDatatype:o.componentDatatype??V.FLOAT,normalize:o.normalize??!1,vertexBuffer:o.vertexBuffer,usage:o.usage??De.STATIC_DRAW};t.push(r)}let n=new Array(t.length);for(let i=0;i<t.length;++i){let r=t[i].index;n[r]=!0}return t};ir._vertexSizeInBytes=function(e){let t=0,n=e.length;for(let a=0;a<n;++a){let s=e[a];t+=s.componentsPerAttribute*V.getSizeInBytes(s.componentDatatype)}let i=n>0?V.getSizeInBytes(e[0].componentDatatype):0,o=i>0?t%i:0,r=o===0?0:i-o;return t+=r,t};ir._createArrayViews=function(e,t){let n=[],i=0,o=e.length;for(let r=0;r<o;++r){let a=e[r],s=a.componentDatatype;n.push({index:a.index,enabled:a.enabled,componentsPerAttribute:a.componentsPerAttribute,componentDatatype:s,normalize:a.normalize,offsetInBytes:i,vertexSizeInComponentType:t/V.getSizeInBytes(s),view:void 0}),i+=a.componentsPerAttribute*V.getSizeInBytes(s)}return n};ir.prototype.resize=function(e){this._size=e;let t=this._allBuffers;this.writers=[];for(let n=0,i=t.length;n<i;++n){let o=t[n];ir._resize(o,this._size),ir._appendWriters(this.writers,o)}EB(this)};ir._resize=function(e,t){if(e.vertexSizeInBytes>0){let n=new ArrayBuffer(t*e.vertexSizeInBytes);if(c(e.arrayBuffer)){let r=new Uint8Array(n),a=new Uint8Array(e.arrayBuffer),s=a.length;for(let A=0;A<s;++A)r[A]=a[A]}let i=e.arrayViews,o=i.length;for(let r=0;r<o;++r){let a=i[r];a.view=V.createArrayBufferView(a.componentDatatype,n,a.offsetInBytes)}e.arrayBuffer=n}};var RK=[function(e,t,n){return function(i,o){t[i*n]=o,e.needsCommit=!0}},function(e,t,n){return function(i,o,r){let a=i*n;t[a]=o,t[a+1]=r,e.needsCommit=!0}},function(e,t,n){return function(i,o,r,a){let s=i*n;t[s]=o,t[s+1]=r,t[s+2]=a,e.needsCommit=!0}},function(e,t,n){return function(i,o,r,a,s){let A=i*n;t[A]=o,t[A+1]=r,t[A+2]=a,t[A+3]=s,e.needsCommit=!0}}];ir._appendWriters=function(e,t){let n=t.arrayViews,i=n.length;for(let o=0;o<i;++o){let r=n[o];e[r.index]=RK[r.componentsPerAttribute-1](t,r.view,r.vertexSizeInComponentType)}};ir.prototype.commit=function(e){let t=!1,n=this._allBuffers,i,o,r;for(o=0,r=n.length;o<r;++o)i=n[o],t=vK(this,i)||t;if(t||!c(this.va)){EB(this);let a=this.va=[],s=S.SIXTY_FOUR_KILOBYTES-4,A=c(e)&&!this._instanced?Math.ceil(this._size/s):1;for(let l=0;l<A;++l){let d=[];for(o=0,r=n.length;o<r;++o){i=n[o];let m=l*(i.vertexSizeInBytes*s);ir._appendAttributes(d,i,m,this._instanced)}d=d.concat(this._precreated),a.push({va:new Yi({context:this._context,attributes:d,indexBuffer:e}),indicesCount:1.5*(l!==A-1?s:this._size%s)})}}};function vK(e,t){if(t.needsCommit&&t.vertexSizeInBytes>0){t.needsCommit=!1;let n=t.vertexBuffer,i=e._size*t.vertexSizeInBytes,o=c(n);if(!o||n.sizeInBytes<i)return o&&n.destroy(),t.vertexBuffer=ut.createVertexBuffer({context:e._context,typedArray:t.arrayBuffer,usage:t.usage}),t.vertexBuffer.vertexArrayDestroyable=!1,!0;t.vertexBuffer.copyFromArrayView(t.arrayBuffer)}return!1}ir._appendAttributes=function(e,t,n,i){let o=t.arrayViews,r=o.length;for(let a=0;a<r;++a){let s=o[a];e.push({index:s.index,enabled:s.enabled,componentsPerAttribute:s.componentsPerAttribute,componentDatatype:s.componentDatatype,normalize:s.normalize,vertexBuffer:t.vertexBuffer,offsetInBytes:n+s.offsetInBytes,strideInBytes:t.vertexSizeInBytes,instanceDivisor:i?1:0})}};ir.prototype.subCommit=function(e,t){let n=this._allBuffers;for(let i=0,o=n.length;i<o;++i)MK(n[i],e,t)};function MK(e,t,n){if(e.needsCommit&&e.vertexSizeInBytes>0){let i=e.vertexSizeInBytes*t,o=e.vertexSizeInBytes*n;e.vertexBuffer.copyFromArrayView(new Uint8Array(e.arrayBuffer,i,o),i)}}ir.prototype.endSubCommits=function(){let e=this._allBuffers;for(let t=0,n=e.length;t<n;++t)e[t].needsCommit=!1};function EB(e){let t=e.va;if(!c(t))return;let n=t.length;for(let i=0;i<n;++i)t[i].va.destroy();e.va=void 0}ir.prototype.isDestroyed=function(){return!1};ir.prototype.destroy=function(){let e=this._allBuffers;for(let t=0,n=e.length;t<n;++t){let i=e[t];i.vertexBuffer=i.vertexBuffer&&i.vertexBuffer.destroy()}return EB(this),me(this)};var u_=ir;function Su(e){this._value=void 0,this._hasClone=!1,this._hasEquals=!1,this._definitionChanged=new Le,this.setValue(e)}Object.defineProperties(Su.prototype,{isConstant:{value:!0},definitionChanged:{get:function(){return this._definitionChanged}}});Su.prototype.getValue=function(e,t){return this._hasClone?this._value.clone(t):this._value};Su.prototype.setValue=function(e){let t=this._value;if(t!==e){let n=c(e),i=n&&typeof e.clone=="function",o=n&&typeof e.equals=="function";(!o||!e.equals(t))&&(this._hasClone=i,this._hasEquals=o,this._value=i?e.clone(this._value):e,this._definitionChanged.raiseEvent(this))}};Su.prototype.equals=function(e){return this===e||e instanceof Su&&(!this._hasEquals&&this._value===e._value||this._hasEquals&&this._value.equals(e._value))};Su.prototype.valueOf=function(){return this._value};Su.prototype.toString=function(){return String(this._value)};var Wa=Su;function PK(e,t,n,i,o){return{configurable:i,get:function(){return this[t]},set:function(r){let a=this[t],s=this[n];c(s)&&(s(),this[n]=void 0),r!==void 0&&(!c(r)||!c(r.getValue))&&c(o)&&(r=o(r)),a!==r&&(this[t]=r,this._definitionChanged.raiseEvent(this,e,r,a)),c(r)&&c(r.definitionChanged)&&(this[n]=r.definitionChanged.addEventListener(function(){this._definitionChanged.raiseEvent(this,e,r,r)},this))}}}function NK(e){return new Wa(e)}function LK(e,t,n){return PK(e,`_${e.toString()}`,`_${e.toString()}Subscription`,t??!1,n??NK)}var te=LK;function Bp(e){this._definitionChanged=new Le,this._show=void 0,this._showSubscription=void 0,this._image=void 0,this._imageSubscription=void 0,this._scale=void 0,this._scaleSubscription=void 0,this._pixelOffset=void 0,this._pixelOffsetSubscription=void 0,this._eyeOffset=void 0,this._eyeOffsetSubscription=void 0,this._horizontalOrigin=void 0,this._horizontalOriginSubscription=void 0,this._verticalOrigin=void 0,this._verticalOriginSubscription=void 0,this._heightReference=void 0,this._heightReferenceSubscription=void 0,this._color=void 0,this._colorSubscription=void 0,this._rotation=void 0,this._rotationSubscription=void 0,this._alignedAxis=void 0,this._alignedAxisSubscription=void 0,this._sizeInMeters=void 0,this._sizeInMetersSubscription=void 0,this._width=void 0,this._widthSubscription=void 0,this._height=void 0,this._heightSubscription=void 0,this._scaleByDistance=void 0,this._scaleByDistanceSubscription=void 0,this._translucencyByDistance=void 0,this._translucencyByDistanceSubscription=void 0,this._pixelOffsetScaleByDistance=void 0,this._pixelOffsetScaleByDistanceSubscription=void 0,this._imageSubRegion=void 0,this._imageSubRegionSubscription=void 0,this._distanceDisplayCondition=void 0,this._distanceDisplayConditionSubscription=void 0,this._disableDepthTestDistance=void 0,this._disableDepthTestDistanceSubscription=void 0,this._splitDirection=void 0,this._splitDirectionSubscription=void 0,this.merge(e??G.EMPTY_OBJECT)}Object.defineProperties(Bp.prototype,{definitionChanged:{get:function(){return this._definitionChanged}},show:te("show"),image:te("image"),scale:te("scale"),pixelOffset:te("pixelOffset"),eyeOffset:te("eyeOffset"),horizontalOrigin:te("horizontalOrigin"),verticalOrigin:te("verticalOrigin"),heightReference:te("heightReference"),color:te("color"),rotation:te("rotation"),alignedAxis:te("alignedAxis"),sizeInMeters:te("sizeInMeters"),width:te("width"),height:te("height"),scaleByDistance:te("scaleByDistance"),translucencyByDistance:te("translucencyByDistance"),pixelOffsetScaleByDistance:te("pixelOffsetScaleByDistance"),imageSubRegion:te("imageSubRegion"),distanceDisplayCondition:te("distanceDisplayCondition"),disableDepthTestDistance:te("disableDepthTestDistance"),splitDirection:te("splitDirection")});Bp.prototype.clone=function(e){return c(e)?(e.show=this._show,e.image=this._image,e.scale=this._scale,e.pixelOffset=this._pixelOffset,e.eyeOffset=this._eyeOffset,e.horizontalOrigin=this._horizontalOrigin,e.verticalOrigin=this._verticalOrigin,e.heightReference=this._heightReference,e.color=this._color,e.rotation=this._rotation,e.alignedAxis=this._alignedAxis,e.sizeInMeters=this._sizeInMeters,e.width=this._width,e.height=this._height,e.scaleByDistance=this._scaleByDistance,e.translucencyByDistance=this._translucencyByDistance,e.pixelOffsetScaleByDistance=this._pixelOffsetScaleByDistance,e.imageSubRegion=this._imageSubRegion,e.distanceDisplayCondition=this._distanceDisplayCondition,e.disableDepthTestDistance=this._disableDepthTestDistance,e.splitDirection=this._splitDirection,e):new Bp(this)};Bp.prototype.merge=function(e){this.show=this._show??e.show,this.image=this._image??e.image,this.scale=this._scale??e.scale,this.pixelOffset=this._pixelOffset??e.pixelOffset,this.eyeOffset=this._eyeOffset??e.eyeOffset,this.horizontalOrigin=this._horizontalOrigin??e.horizontalOrigin,this.verticalOrigin=this._verticalOrigin??e.verticalOrigin,this.heightReference=this._heightReference??e.heightReference,this.color=this._color??e.color,this.rotation=this._rotation??e.rotation,this.alignedAxis=this._alignedAxis??e.alignedAxis,this.sizeInMeters=this._sizeInMeters??e.sizeInMeters,this.width=this._width??e.width,this.height=this._height??e.height,this.scaleByDistance=this._scaleByDistance??e.scaleByDistance,this.translucencyByDistance=this._translucencyByDistance??e.translucencyByDistance,this.pixelOffsetScaleByDistance=this._pixelOffsetScaleByDistance??e.pixelOffsetScaleByDistance,this.imageSubRegion=this._imageSubRegion??e.imageSubRegion,this.distanceDisplayCondition=this._distanceDisplayCondition??e.distanceDisplayCondition,this.disableDepthTestDistance=this._disableDepthTestDistance??e.disableDepthTestDistance,this.splitDirection=this.splitDirection??e.splitDirection};var BN=Bp;function Kf(){this._array=[],this._hash={}}Object.defineProperties(Kf.prototype,{length:{get:function(){return this._array.length}},values:{get:function(){return this._array}}});Kf.prototype.contains=function(e){return c(this._hash[e])};Kf.prototype.set=function(e,t){let n=this._hash[e];t!==n&&(this.remove(e),this._hash[e]=t,this._array.push(t))};Kf.prototype.get=function(e){return this._hash[e]};Kf.prototype.remove=function(e){let t=this._hash[e],n=c(t);if(n){let i=this._array;i.splice(i.indexOf(t),1),delete this._hash[e]}return n};Kf.prototype.removeAll=function(){let e=this._array;e.length>0&&(this._hash={},e.length=0)};var xp=Kf;function hs(e,t){e=e??0,this._near=e,t=t??Number.MAX_VALUE,this._far=t}Object.defineProperties(hs.prototype,{near:{get:function(){return this._near},set:function(e){this._near=e}},far:{get:function(){return this._far},set:function(e){this._far=e}}});hs.packedLength=2;hs.pack=function(e,t,n){return n=n??0,t[n++]=e.near,t[n]=e.far,t};hs.unpack=function(e,t,n){return t=t??0,c(n)||(n=new hs),n.near=e[t++],n.far=e[t],n};hs.equals=function(e,t){return e===t||c(e)&&c(t)&&e.near===t.near&&e.far===t.far};hs.clone=function(e,t){if(c(e))return c(t)||(t=new hs),t.near=e.near,t.far=e.far,t};hs.prototype.clone=function(e){return hs.clone(this,e)};hs.prototype.equals=function(e){return hs.equals(this,e)};var to=hs;function Js(e,t,n,i){this.near=e??0,this.nearValue=t??0,this.far=n??1,this.farValue=i??0}Js.clone=function(e,t){if(c(e))return c(t)?(t.near=e.near,t.nearValue=e.nearValue,t.far=e.far,t.farValue=e.farValue,t):new Js(e.near,e.nearValue,e.far,e.farValue)};Js.packedLength=4;Js.pack=function(e,t,n){return n=n??0,t[n++]=e.near,t[n++]=e.nearValue,t[n++]=e.far,t[n]=e.farValue,t};Js.unpack=function(e,t,n){return t=t??0,c(n)||(n=new Js),n.near=e[t++],n.nearValue=e[t++],n.far=e[t++],n.farValue=e[t],n};Js.equals=function(e,t){return e===t||c(e)&&c(t)&&e.near===t.near&&e.nearValue===t.nearValue&&e.far===t.far&&e.farValue===t.farValue};Js.prototype.clone=function(e){return Js.clone(this,e)};Js.prototype.equals=function(e){return Js.equals(this,e)};var mn=Js;var Xf={NONE:0,CLAMP_TO_GROUND:1,RELATIVE_TO_GROUND:2,CLAMP_TO_TERRAIN:3,RELATIVE_TO_TERRAIN:4,CLAMP_TO_3D_TILE:5,RELATIVE_TO_3D_TILE:6},Nr=Object.freeze(Xf);function Zf(e){return e===Xf.CLAMP_TO_GROUND||e===Xf.CLAMP_TO_3D_TILE||e===Xf.CLAMP_TO_TERRAIN}function f_(e){return e===Xf.RELATIVE_TO_GROUND||e===Xf.RELATIVE_TO_3D_TILE||e===Xf.RELATIVE_TO_TERRAIN}var FK={CENTER:0,LEFT:1,RIGHT:-1},Zt=Object.freeze(FK);var OK={CENTER:0,BOTTOM:1,BASELINE:2,TOP:-1},qt=Object.freeze(OK);var kK=Object.freeze({DONE:0,PENDING:1,FAILED:2}),Tp=kK;function Lc(){be.throwInstantiationError()}Object.defineProperties(Lc.prototype,{isConstant:{get:be.throwInstantiationError},definitionChanged:{get:be.throwInstantiationError}});Lc.prototype.getValue=be.throwInstantiationError;Lc.prototype.equals=be.throwInstantiationError;Lc.equals=function(e,t){return e===t||c(e)&&e.equals(t)};Lc.arrayEquals=function(e,t){if(e===t)return!0;if(!c(e)||!c(t)||e.length!==t.length)return!1;let n=e.length;for(let i=0;i<n;i++)if(!Lc.equals(e[i],t[i]))return!1;return!0};Lc.isConstant=function(e){return!c(e)||e.isConstant};Lc.getValueOrUndefined=function(e,t,n){return c(e)?e.getValue(t,n):void 0};Lc.getValueOrDefault=function(e,t,n,i){return c(e)?e.getValue(t,i)??n:n};Lc.getValueOrClonedDefault=function(e,t,n,i){let o;return c(e)&&(o=e.getValue(t,i)),c(o)||(o=n.clone(o)),o};var Pt=Lc;var UK={LEFT:-1,NONE:0,RIGHT:1},qa=Object.freeze(UK);var zK=new f;function EA(e){e=e??G.EMPTY_OBJECT;let t=e.minimum,n=e.maximum;this._min=f.clone(t),this._max=f.clone(n),this._offsetAttribute=e.offsetAttribute,this._workerName="createBoxOutlineGeometry"}EA.fromDimensions=function(e){e=e??G.EMPTY_OBJECT;let t=e.dimensions,n=f.multiplyByScalar(t,.5,new f);return new EA({minimum:f.negate(n,new f),maximum:n,offsetAttribute:e.offsetAttribute})};EA.fromAxisAlignedBoundingBox=function(e){return new EA({minimum:e.minimum,maximum:e.maximum})};EA.packedLength=2*f.packedLength+1;EA.pack=function(e,t,n){return n=n??0,f.pack(e._min,t,n),f.pack(e._max,t,n+f.packedLength),t[n+f.packedLength*2]=e._offsetAttribute??-1,t};var TN=new f,SN=new f,xN={minimum:TN,maximum:SN,offsetAttribute:void 0};EA.unpack=function(e,t,n){t=t??0;let i=f.unpack(e,t,TN),o=f.unpack(e,t+f.packedLength,SN),r=e[t+f.packedLength*2];return c(n)?(n._min=f.clone(i,n._min),n._max=f.clone(o,n._max),n._offsetAttribute=r===-1?void 0:r,n):(xN.offsetAttribute=r===-1?void 0:r,new EA(xN))};EA.createGeometry=function(e){let t=e._min,n=e._max;if(f.equals(t,n))return;let i=new eo,o=new Uint16Array(24),r=new Float64Array(24);r[0]=t.x,r[1]=t.y,r[2]=t.z,r[3]=n.x,r[4]=t.y,r[5]=t.z,r[6]=n.x,r[7]=n.y,r[8]=t.z,r[9]=t.x,r[10]=n.y,r[11]=t.z,r[12]=t.x,r[13]=t.y,r[14]=n.z,r[15]=n.x,r[16]=t.y,r[17]=n.z,r[18]=n.x,r[19]=n.y,r[20]=n.z,r[21]=t.x,r[22]=n.y,r[23]=n.z,i.position=new rt({componentDatatype:V.DOUBLE,componentsPerAttribute:3,values:r}),o[0]=4,o[1]=5,o[2]=5,o[3]=6,o[4]=6,o[5]=7,o[6]=7,o[7]=4,o[8]=0,o[9]=1,o[10]=1,o[11]=2,o[12]=2,o[13]=3,o[14]=3,o[15]=0,o[16]=0,o[17]=4,o[18]=1,o[19]=5,o[20]=2,o[21]=6,o[22]=3,o[23]=7;let a=f.subtract(n,t,zK),s=f.magnitude(a)*.5;if(c(e._offsetAttribute)){let A=r.length,l=e._offsetAttribute===Pr.NONE?0:1,d=new Uint8Array(A/3).fill(l);i.applyOffset=new rt({componentDatatype:V.UNSIGNED_BYTE,componentsPerAttribute:1,values:d})}return new Dt({attributes:i,indices:o,primitiveType:Me.LINES,boundingSphere:new le(f.ZERO,s),offsetAttribute:e._offsetAttribute})};var d_=EA;function bh(e,t,n,i){e=e??1,t=t??1,n=n??1,i=i??1,this.value=new Uint8Array([J.floatToByte(e),J.floatToByte(t),J.floatToByte(n),J.floatToByte(i)])}Object.defineProperties(bh.prototype,{componentDatatype:{get:function(){return V.UNSIGNED_BYTE}},componentsPerAttribute:{get:function(){return 4}},normalize:{get:function(){return!0}}});bh.fromColor=function(e){return new bh(e.red,e.green,e.blue,e.alpha)};bh.toValue=function(e,t){return c(t)?e.toBytes(t):new Uint8Array(e.toBytes())};bh.equals=function(e,t){return e===t||c(e)&&c(t)&&e.value[0]===t.value[0]&&e.value[1]===t.value[1]&&e.value[2]===t.value[2]&&e.value[3]===t.value[3]};var In=bh;function Sp(e,t){e=e??0,t=t??Number.MAX_VALUE,this.value=new Float32Array([e,t])}Object.defineProperties(Sp.prototype,{componentDatatype:{get:function(){return V.FLOAT}},componentsPerAttribute:{get:function(){return 2}},normalize:{get:function(){return!1}}});Sp.fromDistanceDisplayCondition=function(e){return new Sp(e.near,e.far)};Sp.toValue=function(e,t){return c(t)?(t[0]=e.near,t[1]=e.far,t):new Float32Array([e.near,e.far])};var _B=Sp;function GK(e){e=e??G.EMPTY_OBJECT,this.geometry=e.geometry,this.modelMatrix=Q.clone(e.modelMatrix??Q.IDENTITY),this.id=e.id,this.pickPrimitive=e.pickPrimitive,this.attributes=e.attributes??{},this.westHemisphereGeometry=void 0,this.eastHemisphereGeometry=void 0}var tn=GK;function Pi(e){e=e??G.EMPTY_OBJECT,this.start=c(e.start)?Ue.clone(e.start):new Ue,this.stop=c(e.stop)?Ue.clone(e.stop):new Ue,this.data=e.data,this.isStartIncluded=e.isStartIncluded??!0,this.isStopIncluded=e.isStopIncluded??!0}Object.defineProperties(Pi.prototype,{isEmpty:{get:function(){let e=Ue.compare(this.stop,this.start);return e<0||e===0&&(!this.isStartIncluded||!this.isStopIncluded)}}});var Bh={start:void 0,stop:void 0,isStartIncluded:void 0,isStopIncluded:void 0,data:void 0};Pi.fromIso8601=function(e,t){let n=e.iso8601.split("/");if(n.length!==2)throw new be("options.iso8601 is an invalid ISO 8601 interval.");let i=Ue.fromIso8601(n[0]),o=Ue.fromIso8601(n[1]),r=e.isStartIncluded??!0,a=e.isStopIncluded??!0,s=e.data;return c(t)?(t.start=i,t.stop=o,t.isStartIncluded=r,t.isStopIncluded=a,t.data=s,t):(Bh.start=i,Bh.stop=o,Bh.isStartIncluded=r,Bh.isStopIncluded=a,Bh.data=s,new Pi(Bh))};Pi.toIso8601=function(e,t){return`${Ue.toIso8601(e.start,t)}/${Ue.toIso8601(e.stop,t)}`};Pi.clone=function(e,t){if(c(e))return c(t)?(t.start=e.start,t.stop=e.stop,t.isStartIncluded=e.isStartIncluded,t.isStopIncluded=e.isStopIncluded,t.data=e.data,t):new Pi(e)};Pi.equals=function(e,t,n){return e===t||c(e)&&c(t)&&(e.isEmpty&&t.isEmpty||e.isStartIncluded===t.isStartIncluded&&e.isStopIncluded===t.isStopIncluded&&Ue.equals(e.start,t.start)&&Ue.equals(e.stop,t.stop)&&(e.data===t.data||c(n)&&n(e.data,t.data)))};Pi.equalsEpsilon=function(e,t,n,i){return n=n??0,e===t||c(e)&&c(t)&&(e.isEmpty&&t.isEmpty||e.isStartIncluded===t.isStartIncluded&&e.isStopIncluded===t.isStopIncluded&&Ue.equalsEpsilon(e.start,t.start,n)&&Ue.equalsEpsilon(e.stop,t.stop,n)&&(e.data===t.data||c(i)&&i(e.data,t.data)))};Pi.intersect=function(e,t,n,i){if(!c(t))return Pi.clone(Pi.EMPTY,n);let o=e.start,r=e.stop,a=t.start,s=t.stop,A=Ue.greaterThanOrEquals(a,o)&&Ue.greaterThanOrEquals(r,a),l=!A&&Ue.lessThanOrEquals(a,o)&&Ue.lessThanOrEquals(o,s);if(!A&&!l)return Pi.clone(Pi.EMPTY,n);let d=e.isStartIncluded,m=e.isStopIncluded,p=t.isStartIncluded,g=t.isStopIncluded,h=Ue.lessThan(r,s);return c(n)||(n=new Pi),n.start=A?a:o,n.isStartIncluded=d&&p||!Ue.equals(a,o)&&(A&&p||l&&d),n.stop=h?r:s,n.isStopIncluded=h?m:m&&g||!Ue.equals(s,r)&&g,n.data=c(i)?i(e.data,t.data):e.data,n};Pi.contains=function(e,t){if(e.isEmpty)return!1;let n=Ue.compare(e.start,t);if(n===0)return e.isStartIncluded;let i=Ue.compare(t,e.stop);return i===0?e.isStopIncluded:n<0&&i<0};Pi.prototype.clone=function(e){return Pi.clone(this,e)};Pi.prototype.equals=function(e,t){return Pi.equals(this,e,t)};Pi.prototype.equalsEpsilon=function(e,t,n){return Pi.equalsEpsilon(this,e,t,n)};Pi.prototype.toString=function(){return Pi.toIso8601(this)};Pi.EMPTY=Object.freeze(new Pi({start:new Ue,stop:new Ue,isStartIncluded:!1,isStopIncluded:!1}));var wN=Pi;var DN=Object.freeze(Ue.fromIso8601("0000-01-01T00:00:00Z")),QN=Object.freeze(Ue.fromIso8601("9999-12-31T24:00:00Z")),HK=Object.freeze(new wN({start:DN,stop:QN})),VK={MINIMUM_VALUE:DN,MAXIMUM_VALUE:QN,MAXIMUM_INTERVAL:HK},wu=VK;function wp(e,t,n){e=e??0,t=t??0,n=n??0,this.value=new Float32Array([e,t,n])}Object.defineProperties(wp.prototype,{componentDatatype:{get:function(){return V.FLOAT}},componentsPerAttribute:{get:function(){return 3}},normalize:{get:function(){return!1}}});wp.fromCartesian3=function(e){return new wp(e.x,e.y,e.z)};wp.toValue=function(e,t){return c(t)||(t=new Float32Array([e.x,e.y,e.z])),t[0]=e.x,t[1]=e.y,t[2]=e.z,t};var RN=wp;function h_(e){e=e??!0,this.value=h_.toValue(e)}Object.defineProperties(h_.prototype,{componentDatatype:{get:function(){return V.UNSIGNED_BYTE}},componentsPerAttribute:{get:function(){return 1}},normalize:{get:function(){return!1}}});h_.toValue=function(e,t){return c(t)?(t[0]=e,t):new Uint8Array([e])};var IB=h_;var vN=`in vec3 v_positionEC;
in vec3 v_normalEC;
in vec3 v_tangentEC;
in vec3 v_bitangentEC;
in vec2 v_st;

void main()
{
    vec3 positionToEyeEC = -v_positionEC;
    mat3 tangentToEyeMatrix = czm_tangentToEyeSpaceMatrix(v_normalEC, v_tangentEC, v_bitangentEC);

    vec3 normalEC = normalize(v_normalEC);
#ifdef FACE_FORWARD
    normalEC = faceforward(normalEC, vec3(0.0, 0.0, 1.0), -normalEC);
#endif

    czm_materialInput materialInput;
    materialInput.normalEC = normalEC;
    materialInput.tangentToEyeMatrix = tangentToEyeMatrix;
    materialInput.positionToEyeEC = positionToEyeEC;
    materialInput.st = v_st;
    czm_material material = czm_getMaterial(materialInput);

#ifdef FLAT
    out_FragColor = vec4(material.diffuse + material.emission, material.alpha);
#else
    out_FragColor = czm_phong(normalize(positionToEyeEC), material, czm_lightDirectionEC);
#endif
}
`;var MN=`in vec3 position3DHigh;
in vec3 position3DLow;
in vec3 normal;
in vec3 tangent;
in vec3 bitangent;
in vec2 st;
in float batchId;

out vec3 v_positionEC;
out vec3 v_normalEC;
out vec3 v_tangentEC;
out vec3 v_bitangentEC;
out vec2 v_st;

void main()
{
    vec4 p = czm_computePosition();

    v_positionEC = (czm_modelViewRelativeToEye * p).xyz;      // position in eye coordinates
    v_normalEC = czm_normal * normal;                         // normal in eye coordinates
    v_tangentEC = czm_normal * tangent;                       // tangent in eye coordinates
    v_bitangentEC = czm_normal * bitangent;                   // bitangent in eye coordinates
    v_st = st;

    gl_Position = czm_modelViewProjectionRelativeToEye * p;
}
`;var PN=`in vec3 v_positionEC;
in vec3 v_normalEC;

void main()
{
    vec3 positionToEyeEC = -v_positionEC;

    vec3 normalEC = normalize(v_normalEC);
#ifdef FACE_FORWARD
    normalEC = faceforward(normalEC, vec3(0.0, 0.0, 1.0), -normalEC);
#endif

    czm_materialInput materialInput;
    materialInput.normalEC = normalEC;
    materialInput.positionToEyeEC = positionToEyeEC;
    czm_material material = czm_getMaterial(materialInput);

#ifdef FLAT
    out_FragColor = vec4(material.diffuse + material.emission, material.alpha);
#else
    out_FragColor = czm_phong(normalize(positionToEyeEC), material, czm_lightDirectionEC);
#endif
}
`;var NN=`in vec3 position3DHigh;
in vec3 position3DLow;
in vec3 normal;
in float batchId;

out vec3 v_positionEC;
out vec3 v_normalEC;

void main()
{
    vec4 p = czm_computePosition();

    v_positionEC = (czm_modelViewRelativeToEye * p).xyz;      // position in eye coordinates
    v_normalEC = czm_normal * normal;                         // normal in eye coordinates

    gl_Position = czm_modelViewProjectionRelativeToEye * p;
}
`;var LN=`in vec3 v_positionEC;
in vec3 v_normalEC;
in vec2 v_st;

void main()
{
    vec3 positionToEyeEC = -v_positionEC;

    vec3 normalEC = normalize(v_normalEC);
#ifdef FACE_FORWARD
    normalEC = faceforward(normalEC, vec3(0.0, 0.0, 1.0), -normalEC);
#endif

    czm_materialInput materialInput;
    materialInput.normalEC = normalEC;
    materialInput.positionToEyeEC = positionToEyeEC;
    materialInput.st = v_st;
    czm_material material = czm_getMaterial(materialInput);

#ifdef FLAT
    out_FragColor = vec4(material.diffuse + material.emission, material.alpha);
#else
    out_FragColor = czm_phong(normalize(positionToEyeEC), material, czm_lightDirectionEC);
#endif
}
`;var FN=`in vec3 position3DHigh;
in vec3 position3DLow;
in vec3 normal;
in vec2 st;
in float batchId;

out vec3 v_positionEC;
out vec3 v_normalEC;
out vec2 v_st;

void main()
{
    vec4 p = czm_computePosition();

    v_positionEC = (czm_modelViewRelativeToEye * p).xyz;      // position in eye coordinates
    v_normalEC = czm_normal * normal;                         // normal in eye coordinates
    v_st = st;

    gl_Position = czm_modelViewProjectionRelativeToEye * p;
}
`;var jK={ADD:W.FUNC_ADD,SUBTRACT:W.FUNC_SUBTRACT,REVERSE_SUBTRACT:W.FUNC_REVERSE_SUBTRACT,MIN:W.MIN,MAX:W.MAX},$f=Object.freeze(jK);var YK={ZERO:W.ZERO,ONE:W.ONE,SOURCE_COLOR:W.SRC_COLOR,ONE_MINUS_SOURCE_COLOR:W.ONE_MINUS_SRC_COLOR,DESTINATION_COLOR:W.DST_COLOR,ONE_MINUS_DESTINATION_COLOR:W.ONE_MINUS_DST_COLOR,SOURCE_ALPHA:W.SRC_ALPHA,ONE_MINUS_SOURCE_ALPHA:W.ONE_MINUS_SRC_ALPHA,DESTINATION_ALPHA:W.DST_ALPHA,ONE_MINUS_DESTINATION_ALPHA:W.ONE_MINUS_DST_ALPHA,CONSTANT_COLOR:W.CONSTANT_COLOR,ONE_MINUS_CONSTANT_COLOR:W.ONE_MINUS_CONSTANT_COLOR,CONSTANT_ALPHA:W.CONSTANT_ALPHA,ONE_MINUS_CONSTANT_ALPHA:W.ONE_MINUS_CONSTANT_ALPHA,SOURCE_ALPHA_SATURATE:W.SRC_ALPHA_SATURATE},ms=Object.freeze(YK);var WK={DISABLED:Object.freeze({enabled:!1}),ALPHA_BLEND:Object.freeze({enabled:!0,equationRgb:$f.ADD,equationAlpha:$f.ADD,functionSourceRgb:ms.SOURCE_ALPHA,functionSourceAlpha:ms.ONE,functionDestinationRgb:ms.ONE_MINUS_SOURCE_ALPHA,functionDestinationAlpha:ms.ONE_MINUS_SOURCE_ALPHA}),PRE_MULTIPLIED_ALPHA_BLEND:Object.freeze({enabled:!0,equationRgb:$f.ADD,equationAlpha:$f.ADD,functionSourceRgb:ms.ONE,functionSourceAlpha:ms.ONE,functionDestinationRgb:ms.ONE_MINUS_SOURCE_ALPHA,functionDestinationAlpha:ms.ONE_MINUS_SOURCE_ALPHA}),ADDITIVE_BLEND:Object.freeze({enabled:!0,equationRgb:$f.ADD,equationAlpha:$f.ADD,functionSourceRgb:ms.SOURCE_ALPHA,functionSourceAlpha:ms.ONE,functionDestinationRgb:ms.ONE,functionDestinationAlpha:ms.ONE})},Pn=Object.freeze(WK);var qK={FRONT:W.FRONT,BACK:W.BACK,FRONT_AND_BACK:W.FRONT_AND_BACK},or=Object.freeze(qK);function xh(e){e=e??G.EMPTY_OBJECT,this.material=e.material,this.translucent=e.translucent??!0,this._vertexShaderSource=e.vertexShaderSource,this._fragmentShaderSource=e.fragmentShaderSource,this._renderState=e.renderState,this._closed=e.closed??!1}Object.defineProperties(xh.prototype,{vertexShaderSource:{get:function(){return this._vertexShaderSource}},fragmentShaderSource:{get:function(){return this._fragmentShaderSource}},renderState:{get:function(){return this._renderState}},closed:{get:function(){return this._closed}}});xh.prototype.getFragmentShaderSource=function(){let e=[];return this.flat&&e.push("#define FLAT"),this.faceForward&&e.push("#define FACE_FORWARD"),c(this.material)&&e.push(this.material.shaderSource),e.push(this.fragmentShaderSource),e.join(`
`)};xh.prototype.isTranslucent=function(){return c(this.material)&&this.material.isTranslucent()||!c(this.material)&&this.translucent};xh.prototype.getRenderState=function(){let e=this.isTranslucent(),t=Re(this.renderState,!1);return e?(t.depthMask=!1,t.blending=Pn.ALPHA_BLEND):t.depthMask=!0,t};xh.getDefaultRenderState=function(e,t,n){let i={depthTest:{enabled:!0}};return e&&(i.depthMask=!1,i.blending=Pn.ALPHA_BLEND),t&&(i.cull={enabled:!0,face:or.BACK}),c(n)&&(i=dt(n,i,!0)),i};var jo=xh;var ON=`uniform sampler2D image;

czm_material czm_getMaterial(czm_materialInput materialInput)
{
    czm_material material = czm_getDefaultMaterial(materialInput);
    vec4 rampColor = texture(image, vec2(materialInput.aspect / (2.0 * czm_pi), 0.5));
    rampColor = czm_gammaCorrect(rampColor);
    material.diffuse = rampColor.rgb;
    material.alpha = rampColor.a;
    return material;
}
`;var kN=`uniform sampler2D image;
uniform float strength;
uniform vec2 repeat;

czm_material czm_getMaterial(czm_materialInput materialInput)
{
    czm_material material = czm_getDefaultMaterial(materialInput);

    vec2 st = materialInput.st;

    vec2 centerPixel = fract(repeat * st);
    float centerBump = texture(image, centerPixel).channel;

    float imageWidth = float(imageDimensions.x);
    vec2 rightPixel = fract(repeat * (st + vec2(1.0 / imageWidth, 0.0)));
    float rightBump = texture(image, rightPixel).channel;

    float imageHeight = float(imageDimensions.y);
    vec2 leftPixel = fract(repeat * (st + vec2(0.0, 1.0 / imageHeight)));
    float topBump = texture(image, leftPixel).channel;

    vec3 normalTangentSpace = normalize(vec3(centerBump - rightBump, centerBump - topBump, clamp(1.0 - strength, 0.1, 1.0)));
    vec3 normalEC = materialInput.tangentToEyeMatrix * normalTangentSpace;

    material.normal = normalEC;
    material.diffuse = vec3(0.01);

    return material;
}
`;var UN=`uniform vec4 lightColor;
uniform vec4 darkColor;
uniform vec2 repeat;

czm_material czm_getMaterial(czm_materialInput materialInput)
{
    czm_material material = czm_getDefaultMaterial(materialInput);

    vec2 st = materialInput.st;

    // From Stefan Gustavson's Procedural Textures in GLSL in OpenGL Insights
    float b = mod(floor(repeat.s * st.s) + floor(repeat.t * st.t), 2.0);  // 0.0 or 1.0

    // Find the distance from the closest separator (region between two colors)
    float scaledWidth = fract(repeat.s * st.s);
    scaledWidth = abs(scaledWidth - floor(scaledWidth + 0.5));
    float scaledHeight = fract(repeat.t * st.t);
    scaledHeight = abs(scaledHeight - floor(scaledHeight + 0.5));
    float value = min(scaledWidth, scaledHeight);

    vec4 currentColor = mix(lightColor, darkColor, b);
    vec4 color = czm_antialias(lightColor, darkColor, currentColor, value, 0.03);

    color = czm_gammaCorrect(color);
    material.diffuse = color.rgb;
    material.alpha = color.a;

    return material;
}
`;var zN=`uniform vec4 lightColor;
uniform vec4 darkColor;
uniform vec2 repeat;

czm_material czm_getMaterial(czm_materialInput materialInput)
{
    czm_material material = czm_getDefaultMaterial(materialInput);

    // From Stefan Gustavson's Procedural Textures in GLSL in OpenGL Insights
    float b = smoothstep(0.3, 0.32, length(fract(repeat * materialInput.st) - 0.5));  // 0.0 or 1.0

    vec4 color = mix(lightColor, darkColor, b);
    color = czm_gammaCorrect(color);
    material.diffuse = color.rgb;
    material.alpha = color.a;

    return material;
}
`;var GN=`uniform sampler2D heights;
uniform sampler2D colors;

// This material expects heights to be sorted from lowest to highest.

float getHeight(int idx, float invTexSize)
{
    vec2 uv = vec2((float(idx) + 0.5) * invTexSize, 0.5);
#ifdef OES_texture_float
    return texture(heights, uv).x;
#else
    return czm_unpackFloat(texture(heights, uv));
#endif
}

czm_material czm_getMaterial(czm_materialInput materialInput)
{
    czm_material material = czm_getDefaultMaterial(materialInput);

    float height = materialInput.height;
    float invTexSize = 1.0 / float(heightsDimensions.x);

    float minHeight = getHeight(0, invTexSize);
    float maxHeight = getHeight(heightsDimensions.x - 1, invTexSize);

    // early-out when outside the height range
    if (height < minHeight || height > maxHeight) {
        material.diffuse = vec3(0.0);
        material.alpha = 0.0;
        return material;
    }

    // Binary search to find heights above and below.
    int idxBelow = 0;
    int idxAbove = heightsDimensions.x;
    float heightBelow = minHeight;
    float heightAbove = maxHeight;

    // while loop not allowed, so use for loop with max iterations.
    // maxIterations of 16 supports a texture size up to 65536 (2^16).
    const int maxIterations = 16;
    for (int i = 0; i < maxIterations; i++) {
        if (idxBelow >= idxAbove - 1) {
            break;
        }

        int idxMid = (idxBelow + idxAbove) / 2;
        float heightTex = getHeight(idxMid, invTexSize);

        if (height > heightTex) {
            idxBelow = idxMid;
            heightBelow = heightTex;
        } else {
            idxAbove = idxMid;
            heightAbove = heightTex;
        }
    }

    float lerper = heightBelow == heightAbove ? 1.0 : (height - heightBelow) / (heightAbove - heightBelow);
    vec2 colorUv = vec2(invTexSize * (float(idxBelow) + 0.5 + lerper), 0.5);
    vec4 color = texture(colors, colorUv);

    // undo preumultiplied alpha
    if (color.a > 0.0) 
    {
        color.rgb /= color.a;
    }
    
    color.rgb = czm_gammaCorrect(color.rgb);

    material.diffuse = color.rgb;
    material.alpha = color.a;
    return material;
}
`;var HN=`uniform vec4 color;
uniform float spacing;
uniform float width;

czm_material czm_getMaterial(czm_materialInput materialInput)
{
    czm_material material = czm_getDefaultMaterial(materialInput);

    float distanceToContour = mod(materialInput.height, spacing);

#if (__VERSION__ == 300 || defined(GL_OES_standard_derivatives))
    float dxc = abs(dFdx(materialInput.height));
    float dyc = abs(dFdy(materialInput.height));
    float dF = max(dxc, dyc) * czm_pixelRatio * width;
    float alpha = (distanceToContour < dF) ? 1.0 : 0.0;
#else
    // If no derivatives available (IE 10?), use pixel ratio
    float alpha = (distanceToContour < (czm_pixelRatio * width)) ? 1.0 : 0.0;
#endif

    vec4 outColor = czm_gammaCorrect(vec4(color.rgb, alpha * color.a));
    material.diffuse = outColor.rgb;
    material.alpha = outColor.a;

    return material;
}
`;var VN=`uniform sampler2D image;
uniform float minimumHeight;
uniform float maximumHeight;

czm_material czm_getMaterial(czm_materialInput materialInput)
{
    czm_material material = czm_getDefaultMaterial(materialInput);
    float scaledHeight = clamp((materialInput.height - minimumHeight) / (maximumHeight - minimumHeight), 0.0, 1.0);
    vec4 rampColor = texture(image, vec2(scaledHeight, 0.5));
    rampColor = czm_gammaCorrect(rampColor);
    material.diffuse = rampColor.rgb;
    material.alpha = rampColor.a;
    return material;
}
`;var jN=`uniform vec4 fadeInColor;
uniform vec4 fadeOutColor;
uniform float maximumDistance;
uniform bool repeat;
uniform vec2 fadeDirection;
uniform vec2 time;

float getTime(float t, float coord)
{
    float scalar = 1.0 / maximumDistance;
    float q  = distance(t, coord) * scalar;
    if (repeat)
    {
        float r = distance(t, coord + 1.0) * scalar;
        float s = distance(t, coord - 1.0) * scalar;
        q = min(min(r, s), q);
    }
    return clamp(q, 0.0, 1.0);
}

czm_material czm_getMaterial(czm_materialInput materialInput)
{
    czm_material material = czm_getDefaultMaterial(materialInput);

    vec2 st = materialInput.st;
    float s = getTime(time.x, st.s) * fadeDirection.s;
    float t = getTime(time.y, st.t) * fadeDirection.t;

    float u = length(vec2(s, t));
    vec4 color = mix(fadeInColor, fadeOutColor, u);

    color = czm_gammaCorrect(color);
    material.emission = color.rgb;
    material.alpha = color.a;

    return material;
}
`;var YN=`uniform vec4 color;
uniform float cellAlpha;
uniform vec2 lineCount;
uniform vec2 lineThickness;
uniform vec2 lineOffset;

czm_material czm_getMaterial(czm_materialInput materialInput)
{
    czm_material material = czm_getDefaultMaterial(materialInput);

    vec2 st = materialInput.st;

    float scaledWidth = fract(lineCount.s * st.s - lineOffset.s);
    scaledWidth = abs(scaledWidth - floor(scaledWidth + 0.5));
    float scaledHeight = fract(lineCount.t * st.t - lineOffset.t);
    scaledHeight = abs(scaledHeight - floor(scaledHeight + 0.5));

    float value;

    // Fuzz Factor - Controls blurriness of lines
#if (__VERSION__ == 300 || defined(GL_OES_standard_derivatives))
    const float fuzz = 1.2;
    vec2 thickness = (lineThickness * czm_pixelRatio) - 1.0;

    // From "3D Engine Design for Virtual Globes" by Cozzi and Ring, Listing 4.13.
    vec2 dx = abs(dFdx(st));
    vec2 dy = abs(dFdy(st));
    vec2 dF = vec2(max(dx.s, dy.s), max(dx.t, dy.t)) * lineCount;
    value = min(
        smoothstep(dF.s * thickness.s, dF.s * (fuzz + thickness.s), scaledWidth),
        smoothstep(dF.t * thickness.t, dF.t * (fuzz + thickness.t), scaledHeight));
#else
    // If no derivatives available (IE 10?), revert to view-dependent fuzz
    const float fuzz = 0.05;

    vec2 range = 0.5 - (lineThickness * 0.05);
    value = min(
        1.0 - smoothstep(range.s, range.s + fuzz, scaledWidth),
        1.0 - smoothstep(range.t, range.t + fuzz, scaledHeight));
#endif

    // Edges taken from RimLightingMaterial.glsl
    // See http://www.fundza.com/rman_shaders/surface/fake_rim/fake_rim1.html
    float dRim = 1.0 - abs(dot(materialInput.normalEC, normalize(materialInput.positionToEyeEC)));
    float sRim = smoothstep(0.8, 1.0, dRim);
    value *= (1.0 - sRim);

    vec4 halfColor;
    halfColor.rgb = color.rgb * 0.5;
    halfColor.a = color.a * (1.0 - ((1.0 - cellAlpha) * value));
    halfColor = czm_gammaCorrect(halfColor);
    material.diffuse = halfColor.rgb;
    material.emission = halfColor.rgb;
    material.alpha = halfColor.a;

    return material;
}
`;var WN=`uniform sampler2D image;
uniform float strength;
uniform vec2 repeat;

czm_material czm_getMaterial(czm_materialInput materialInput)
{
    czm_material material = czm_getDefaultMaterial(materialInput);
    
    vec4 textureValue = texture(image, fract(repeat * materialInput.st));
    vec3 normalTangentSpace = textureValue.channels;
    normalTangentSpace.xy = normalTangentSpace.xy * 2.0 - 1.0;
    normalTangentSpace.z = clamp(1.0 - strength, 0.1, 1.0);
    normalTangentSpace = normalize(normalTangentSpace);
    vec3 normalEC = materialInput.tangentToEyeMatrix * normalTangentSpace;
    
    material.normal = normalEC;
    
    return material;
}
`;var qN=`uniform vec4 color;

float getPointOnLine(vec2 p0, vec2 p1, float x)
{
    float slope = (p0.y - p1.y) / (p0.x - p1.x);
    return slope * (x - p0.x) + p0.y;
}

czm_material czm_getMaterial(czm_materialInput materialInput)
{
    czm_material material = czm_getDefaultMaterial(materialInput);

    vec2 st = materialInput.st;

#if (__VERSION__ == 300 || defined(GL_OES_standard_derivatives))
    float base = 1.0 - abs(fwidth(st.s)) * 10.0 * czm_pixelRatio;
#else
     // If no derivatives available (IE 10?), 2.5% of the line will be the arrow head
    float base = 0.975;
#endif

    vec2 center = vec2(1.0, 0.5);
    float ptOnUpperLine = getPointOnLine(vec2(base, 1.0), center, st.s);
    float ptOnLowerLine = getPointOnLine(vec2(base, 0.0), center, st.s);

    float halfWidth = 0.15;
    float s = step(0.5 - halfWidth, st.t);
    s *= 1.0 - step(0.5 + halfWidth, st.t);
    s *= 1.0 - step(base, st.s);

    float t = step(base, materialInput.st.s);
    t *= 1.0 - step(ptOnUpperLine, st.t);
    t *= step(ptOnLowerLine, st.t);

    // Find the distance from the closest separator (region between two colors)
    float dist;
    if (st.s < base)
    {
        float d1 = abs(st.t - (0.5 - halfWidth));
        float d2 = abs(st.t - (0.5 + halfWidth));
        dist = min(d1, d2);
    }
    else
    {
        float d1 = czm_infinity;
        if (st.t < 0.5 - halfWidth && st.t > 0.5 + halfWidth)
        {
            d1 = abs(st.s - base);
        }
        float d2 = abs(st.t - ptOnUpperLine);
        float d3 = abs(st.t - ptOnLowerLine);
        dist = min(min(d1, d2), d3);
    }

    vec4 outsideColor = vec4(0.0);
    vec4 currentColor = mix(outsideColor, color, clamp(s + t, 0.0, 1.0));
    vec4 outColor = czm_antialias(outsideColor, color, currentColor, dist);

    outColor = czm_gammaCorrect(outColor);
    material.diffuse = outColor.rgb;
    material.alpha = outColor.a;
    return material;
}
`;var JN=`uniform vec4 color;
uniform vec4 gapColor;
uniform float dashLength;
uniform float dashPattern;
in float v_polylineAngle;

const float maskLength = 16.0;

mat2 rotate(float rad) {
    float c = cos(rad);
    float s = sin(rad);
    return mat2(
        c, s,
        -s, c
    );
}

czm_material czm_getMaterial(czm_materialInput materialInput)
{
    czm_material material = czm_getDefaultMaterial(materialInput);

    vec2 pos = rotate(v_polylineAngle) * gl_FragCoord.xy;

    // Get the relative position within the dash from 0 to 1
    float dashPosition = fract(pos.x / (dashLength * czm_pixelRatio));
    // Figure out the mask index.
    float maskIndex = floor(dashPosition * maskLength);
    // Test the bit mask.
    float maskTest = floor(dashPattern / pow(2.0, maskIndex));
    vec4 fragColor = (mod(maskTest, 2.0) < 1.0) ? gapColor : color;
    if (fragColor.a < 0.005) {   // matches 0/255 and 1/255
        discard;
    }

    fragColor = czm_gammaCorrect(fragColor);
    material.emission = fragColor.rgb;
    material.alpha = fragColor.a;
    return material;
}
`;var KN=`uniform vec4 color;
uniform float glowPower;
uniform float taperPower;

czm_material czm_getMaterial(czm_materialInput materialInput)
{
    czm_material material = czm_getDefaultMaterial(materialInput);

    vec2 st = materialInput.st;
    float glow = glowPower / abs(st.t - 0.5) - (glowPower / 0.5);

    if (taperPower <= 0.99999) {
        glow *= min(1.0, taperPower / (0.5 - st.s * 0.5) - (taperPower / 0.5));
    }

    vec4 fragColor;
    fragColor.rgb = max(vec3(glow - 1.0 + color.rgb), color.rgb);
    fragColor.a = clamp(0.0, 1.0, glow) * color.a;
    fragColor = czm_gammaCorrect(fragColor);

    material.emission = fragColor.rgb;
    material.alpha = fragColor.a;

    return material;
}
`;var XN=`uniform vec4 color;
uniform vec4 outlineColor;
uniform float outlineWidth;

in float v_width;

czm_material czm_getMaterial(czm_materialInput materialInput)
{
    czm_material material = czm_getDefaultMaterial(materialInput);

    vec2 st = materialInput.st;
    float halfInteriorWidth =  0.5 * (v_width - outlineWidth) / v_width;
    float b = step(0.5 - halfInteriorWidth, st.t);
    b *= 1.0 - step(0.5 + halfInteriorWidth, st.t);

    // Find the distance from the closest separator (region between two colors)
    float d1 = abs(st.t - (0.5 - halfInteriorWidth));
    float d2 = abs(st.t - (0.5 + halfInteriorWidth));
    float dist = min(d1, d2);

    vec4 currentColor = mix(outlineColor, color, b);
    vec4 outColor = czm_antialias(outlineColor, color, currentColor, dist);
    outColor = czm_gammaCorrect(outColor);

    material.diffuse = outColor.rgb;
    material.alpha = outColor.a;

    return material;
}
`;var ZN=`uniform vec4 color;
uniform vec4 rimColor;
uniform float width;

czm_material czm_getMaterial(czm_materialInput materialInput)
{
    czm_material material = czm_getDefaultMaterial(materialInput);

    // See http://www.fundza.com/rman_shaders/surface/fake_rim/fake_rim1.html
    float d = 1.0 - dot(materialInput.normalEC, normalize(materialInput.positionToEyeEC));
    float s = smoothstep(1.0 - width, 1.0, d);

    vec4 outColor = czm_gammaCorrect(color);
    vec4 outRimColor = czm_gammaCorrect(rimColor);

    material.diffuse = outColor.rgb;
    material.emission = outRimColor.rgb * s;
    material.alpha = mix(outColor.a, outRimColor.a, s);

    return material;
}
`;var $N=`uniform sampler2D image;

czm_material czm_getMaterial(czm_materialInput materialInput)
{
    czm_material material = czm_getDefaultMaterial(materialInput);
    vec4 rampColor = texture(image, vec2(materialInput.slope / (czm_pi / 2.0), 0.5));
    rampColor = czm_gammaCorrect(rampColor);
    material.diffuse = rampColor.rgb;
    material.alpha = rampColor.a;
    return material;
}
`;var eL=`uniform vec4 evenColor;
uniform vec4 oddColor;
uniform float offset;
uniform float repeat;
uniform bool horizontal;

czm_material czm_getMaterial(czm_materialInput materialInput)
{
    czm_material material = czm_getDefaultMaterial(materialInput);

    // Based on the Stripes Fragment Shader in the Orange Book (11.1.2)
    float coord = mix(materialInput.st.s, materialInput.st.t, float(horizontal));
    float value = fract((coord - offset) * (repeat * 0.5));
    float dist = min(value, min(abs(value - 0.5), 1.0 - value));

    vec4 currentColor = mix(evenColor, oddColor, step(0.5, value));
    vec4 color = czm_antialias(evenColor, oddColor, currentColor, dist);
    color = czm_gammaCorrect(color);

    material.diffuse = color.rgb;
    material.alpha = color.a;

    return material;
}
`;var tL=`uniform vec4 waterColor;
uniform vec4 landColor;

czm_material czm_getMaterial(czm_materialInput materialInput)
{
    czm_material material = czm_getDefaultMaterial(materialInput);

    vec4 outColor = mix(landColor, waterColor, materialInput.waterMask);
    outColor = czm_gammaCorrect(outColor);

    material.diffuse = outColor.rgb;
    material.alpha = outColor.a;

    return material;
}
`;var nL=`// Thanks for the contribution Jonas
// http://29a.ch/2012/7/19/webgl-terrain-rendering-water-fog

uniform sampler2D specularMap;
uniform sampler2D normalMap;
uniform vec4 baseWaterColor;
uniform vec4 blendColor;
uniform float frequency;
uniform float animationSpeed;
uniform float amplitude;
uniform float specularIntensity;
uniform float fadeFactor;

czm_material czm_getMaterial(czm_materialInput materialInput)
{
    czm_material material = czm_getDefaultMaterial(materialInput);

    float time = czm_frameNumber * animationSpeed;

    // fade is a function of the distance from the fragment and the frequency of the waves
    float fade = max(1.0, (length(materialInput.positionToEyeEC) / 10000000000.0) * frequency * fadeFactor);

    float specularMapValue = texture(specularMap, materialInput.st).r;

    // note: not using directional motion at this time, just set the angle to 0.0;
    vec4 noise = czm_getWaterNoise(normalMap, materialInput.st * frequency, time, 0.0);
    vec3 normalTangentSpace = noise.xyz * vec3(1.0, 1.0, (1.0 / amplitude));

    // fade out the normal perturbation as we move further from the water surface
    normalTangentSpace.xy /= fade;

    // attempt to fade out the normal perturbation as we approach non water areas (low specular map value)
    normalTangentSpace = mix(vec3(0.0, 0.0, 50.0), normalTangentSpace, specularMapValue);

    normalTangentSpace = normalize(normalTangentSpace);

    // get ratios for alignment of the new normal vector with a vector perpendicular to the tangent plane
    float tsPerturbationRatio = clamp(dot(normalTangentSpace, vec3(0.0, 0.0, 1.0)), 0.0, 1.0);

    // fade out water effect as specular map value decreases
    material.alpha = mix(blendColor.a, baseWaterColor.a, specularMapValue) * specularMapValue;

    // base color is a blend of the water and non-water color based on the value from the specular map
    // may need a uniform blend factor to better control this
    material.diffuse = mix(blendColor.rgb, baseWaterColor.rgb, specularMapValue);

    // diffuse highlights are based on how perturbed the normal is
    material.diffuse += (0.1 * tsPerturbationRatio);

    material.diffuse = material.diffuse;

    material.normal = normalize(materialInput.tangentToEyeMatrix * normalTangentSpace);

    material.specular = specularIntensity;
    material.shininess = 10.0;

    return material;
}
`;function Be(e){this.type=void 0,this.shaderSource=void 0,this.materials=void 0,this.uniforms=void 0,this._uniforms=void 0,this.translucent=void 0,this._minificationFilter=e.minificationFilter??Wt.LINEAR,this._magnificationFilter=e.magnificationFilter??yo.LINEAR,this._strict=void 0,this._template=void 0,this._count=void 0,this._texturePaths={},this._loadedImages=[],this._loadedCubeMaps=[],this._textures={},this._updateFunctions=[],this._defaultTexture=void 0,JK(e,this),Object.defineProperties(this,{type:{value:this.type,writable:!1}}),c(Be._uniformList[this.type])||(Be._uniformList[this.type]=Object.keys(this._uniforms))}Be._uniformList={};Be.fromType=function(e,t){let n=new Be({fabric:{type:e}});if(c(t))for(let i in t)t.hasOwnProperty(i)&&(n.uniforms[i]=t[i]);return n};Be.prototype.isTranslucent=function(){if(c(this.translucent))return typeof this.translucent=="function"?this.translucent():this.translucent;let e=!0,t=this._translucentFunctions,n=t.length;for(let i=0;i<n;++i){let o=t[i];if(typeof o=="function"?e=e&&o():e=e&&o,!e)break}return e};Be.prototype.update=function(e){this._defaultTexture=e.defaultTexture;let t,n,i=this._loadedImages,o=i.length;for(t=0;t<o;++t){let A=i[t];n=A.id;let l=A.image,d;Array.isArray(l)&&(d=l.slice(1,l.length).map(function(C){return C.bufferView}),l=l[0]);let m=new nn({minificationFilter:this._minificationFilter,magnificationFilter:this._magnificationFilter}),p;c(l.internalFormat)?p=new on({context:e,pixelFormat:l.internalFormat,width:l.width,height:l.height,source:{arrayBufferView:l.bufferView,mipLevels:d},sampler:m}):p=new on({context:e,source:l,sampler:m});let g=this._textures[n];c(g)&&g!==this._defaultTexture&&g.destroy(),this._textures[n]=p;let h=`${n}Dimensions`;if(this.uniforms.hasOwnProperty(h)){let C=this.uniforms[h];C.x=p._width,C.y=p._height}}i.length=0;let r=this._loadedCubeMaps;for(o=r.length,t=0;t<o;++t){let A=r[t];n=A.id;let l=A.images,d=new ds({context:e,source:{positiveX:l[0],negativeX:l[1],positiveY:l[2],negativeY:l[3],positiveZ:l[4],negativeZ:l[5]},sampler:new nn({minificationFilter:this._minificationFilter,magnificationFilter:this._magnificationFilter})});this._textures[n]=d}r.length=0;let a=this._updateFunctions;for(o=a.length,t=0;t<o;++t)a[t](this,e);let s=this.materials;for(let A in s)s.hasOwnProperty(A)&&s[A].update(e)};Be.prototype.isDestroyed=function(){return!1};Be.prototype.destroy=function(){let e=this._textures;for(let n in e)if(e.hasOwnProperty(n)){let i=e[n];i!==this._defaultTexture&&i.destroy()}let t=this.materials;for(let n in t)t.hasOwnProperty(n)&&t[n].destroy();return me(this)};function JK(e,t){e=e??G.EMPTY_OBJECT,t._strict=e.strict??!1,t._count=e.count??0,t._template=Re(e.fabric??G.EMPTY_OBJECT),t._template.uniforms=Re(t._template.uniforms??G.EMPTY_OBJECT),t._template.materials=Re(t._template.materials??G.EMPTY_OBJECT),t.type=c(t._template.type)?t._template.type:ji(),t.shaderSource="",t.materials={},t.uniforms={},t._uniforms={},t._translucentFunctions=[];let n,i=Be._materialCache.getMaterial(t.type);if(c(i)){let r=Re(i.fabric,!0);t._template=dt(t._template,r,!0),n=i.translucent}$K(t),c(i)||Be._materialCache.addMaterial(t.type,t),t6(t),r6(t),s6(t);let o=t._translucentFunctions.length===0?!0:void 0;if(n=n??o,n=e.translucent??n,c(n))if(typeof n=="function"){let r=function(){return n(t)};t._translucentFunctions.push(r)}else t._translucentFunctions.push(n)}function yB(e,t,n,i){if(c(e)){for(let o in e)if(e.hasOwnProperty(o)){let r=t.indexOf(o)!==-1;(i&&!r||!i&&r)&&n(o,t)}}}function iL(e,t){}function KK(e,t){}var XK=["type","materials","uniforms","components","source"],ZK=["diffuse","specular","shininess","normal","emission","alpha"];function $K(e){let t=e._template,n=t.uniforms,i=t.materials,o=t.components;yB(t,XK,iL,!0),yB(o,ZK,iL,!0);let r=[];for(let a in i)i.hasOwnProperty(a)&&r.push(a);yB(n,r,KK,!1)}function e6(e,t){let n=t._template.materials;for(let i in n)if(n.hasOwnProperty(i)&&e.indexOf(i)>-1)return!0;return!1}function t6(e){let t=e._template.components,n=e._template.source;if(c(n))e.shaderSource+=`${n}
`;else{if(e.shaderSource+=`czm_material czm_getMaterial(czm_materialInput materialInput)
{
`,e.shaderSource+=`czm_material material = czm_getDefaultMaterial(materialInput);
`,c(t)){let i=Object.keys(e._template.materials).length>0;for(let o in t)if(t.hasOwnProperty(o))if(o==="diffuse"||o==="emission"){let a=i&&e6(t[o],e)?t[o]:`czm_gammaCorrect(${t[o]})`;e.shaderSource+=`material.${o} = ${a}; 
`}else o==="alpha"?e.shaderSource+=`material.alpha = ${t.alpha}; 
`:e.shaderSource+=`material.${o} = ${t[o]};
`}e.shaderSource+=`return material;
}
`}}var oL={mat2:vi,mat3:ne,mat4:Q},n6=/\.ktx2$/i;function i6(e){let t;return function(n,i){let o=n.uniforms,r=o[e],a=t!==r,s=!c(r)||r===Be.DefaultImageId;t=r;let A=n._textures[e],l,d;if(r instanceof HTMLVideoElement){if(r.readyState>=2){if(a&&c(A)&&(A!==i.defaultTexture&&A.destroy(),A=void 0),!c(A)||A===i.defaultTexture){let p=new nn({minificationFilter:n._minificationFilter,magnificationFilter:n._magnificationFilter});A=new on({context:i,source:r,sampler:p}),n._textures[e]=A;return}A.copyFrom({source:r})}else c(A)||(n._textures[e]=i.defaultTexture);return}if(r instanceof on&&r!==A){n._texturePaths[e]=void 0;let p=n._textures[e];c(p)&&p!==n._defaultTexture&&p.destroy(),n._textures[e]=r,l=`${e}Dimensions`,o.hasOwnProperty(l)&&(d=o[l],d.x=r._width,d.y=r._height);return}if(a&&c(A)&&s&&(A!==n._defaultTexture&&A.destroy(),A=void 0),c(A)||(n._texturePaths[e]=void 0,A=n._textures[e]=n._defaultTexture,l=`${e}Dimensions`,o.hasOwnProperty(l)&&(d=o[l],d.x=A._width,d.y=A._height)),s)return;let m=r instanceof Ye;if(!c(n._texturePaths[e])||m&&r.url!==n._texturePaths[e].url||!m&&r!==n._texturePaths[e]){if(typeof r=="string"||m){let p=m?r:Ye.createIfNeeded(r),g;n6.test(p.url)?g=ll(p.url):g=p.fetchImage(),Promise.resolve(g).then(function(h){n._loadedImages.push({id:e,image:h})}).catch(function(){c(A)&&A!==n._defaultTexture&&A.destroy(),n._textures[e]=n._defaultTexture})}else(r instanceof HTMLCanvasElement||r instanceof HTMLImageElement||r instanceof ImageBitmap||r instanceof OffscreenCanvas)&&n._loadedImages.push({id:e,image:r});n._texturePaths[e]=r}}}function o6(e){return function(t,n){let i=t.uniforms[e];if(i instanceof ds){let r=t._textures[e];r!==t._defaultTexture&&r.destroy(),t._texturePaths[e]=void 0,t._textures[e]=i;return}if(c(t._textures[e])||(t._texturePaths[e]=void 0,t._textures[e]=n.defaultCubeMap),i===Be.DefaultCubeMapId)return;let o=i.positiveX+i.negativeX+i.positiveY+i.negativeY+i.positiveZ+i.negativeZ;if(o!==t._texturePaths[e]){let r=[Ye.createIfNeeded(i.positiveX).fetchImage(),Ye.createIfNeeded(i.negativeX).fetchImage(),Ye.createIfNeeded(i.positiveY).fetchImage(),Ye.createIfNeeded(i.negativeY).fetchImage(),Ye.createIfNeeded(i.positiveZ).fetchImage(),Ye.createIfNeeded(i.negativeZ).fetchImage()];Promise.all(r).then(function(a){t._loadedCubeMaps.push({id:e,images:a})}),t._texturePaths[e]=o}}}function r6(e){let t=e._template.uniforms;for(let n in t)t.hasOwnProperty(n)&&rL(e,n)}function rL(e,t){let n=e._strict,i=e._template.uniforms,o=i[t],r=a6(o),a;if(r==="channels")a=Dp(e,t,o,!1);else{if(r==="sampler2D"){let l=`${t}Dimensions`;c6(e,l)>0&&(i[l]={type:"ivec3",x:1,y:1},rL(e,l))}if(!new RegExp(`uniform\\s+${r}\\s+${t}\\s*;`).test(e.shaderSource)){let l=`uniform ${r} ${t};`;e.shaderSource=l+e.shaderSource}let A=`${t}_${e._count++}`;if(a=Dp(e,t,A),e.uniforms[t]=o,r==="sampler2D")e._uniforms[A]=function(){return e._textures[t]},e._updateFunctions.push(i6(t));else if(r==="samplerCube")e._uniforms[A]=function(){return e._textures[t]},e._updateFunctions.push(o6(t));else if(r.indexOf("mat")!==-1){let l=new oL[r];e._uniforms[A]=function(){return oL[r].fromColumnMajorArray(e.uniforms[t],l)}}else e._uniforms[A]=function(){return e.uniforms[t]}}}function a6(e){let t=e.type;if(!c(t)){let n=typeof e;if(n==="number")t="float";else if(n==="boolean")t="bool";else if(n==="string"||e instanceof Ye||e instanceof HTMLCanvasElement||e instanceof HTMLImageElement||e instanceof ImageBitmap||e instanceof OffscreenCanvas)/^([rgba]){1,4}$/i.test(e)?t="channels":e===Be.DefaultCubeMapId?t="samplerCube":t="sampler2D";else if(n==="object")if(Array.isArray(e))(e.length===4||e.length===9||e.length===16)&&(t=`mat${Math.sqrt(e.length)}`);else{let i=0;for(let o in e)e.hasOwnProperty(o)&&(i+=1);i>=2&&i<=4?t=`vec${i}`:i===6&&(t="samplerCube")}}return t}function s6(e){let t=e._strict,n=e._template.materials;for(let i in n)if(n.hasOwnProperty(i)){let o=new Be({strict:t,fabric:n[i],count:e._count});e._count=o._count,e._uniforms=dt(e._uniforms,o._uniforms,!0),e.materials[i]=o,e._translucentFunctions=e._translucentFunctions.concat(o._translucentFunctions);let r="czm_getMaterial",a=`${r}_${e._count++}`;Dp(o,r,a),e.shaderSource=o.shaderSource+e.shaderSource;let s=`${a}(materialInput)`,A=Dp(e,i,s)}}function Dp(e,t,n,i){i=i??!0;let o=0,r="([\\w])?",a=`([\\w${i?".":""}])?`,s=new RegExp(a+t+r,"g");return e.shaderSource=e.shaderSource.replace(s,function(A,l,d){return l||d?A:(o+=1,n)}),o}function c6(e,t,n){return Dp(e,t,t,n)}Be._materialCache={_materials:{},addMaterial:function(e,t){this._materials[e]=t},getMaterial:function(e){return this._materials[e]}};Be.DefaultImageId="czm_defaultImage";Be.DefaultCubeMapId="czm_defaultCubeMap";Be.ColorType="Color";Be._materialCache.addMaterial(Be.ColorType,{fabric:{type:Be.ColorType,uniforms:{color:new J(1,0,0,.5)},components:{diffuse:"color.rgb",alpha:"color.a"}},translucent:function(e){return e.uniforms.color.alpha<1}});Be.ImageType="Image";Be._materialCache.addMaterial(Be.ImageType,{fabric:{type:Be.ImageType,uniforms:{image:Be.DefaultImageId,repeat:new L(1,1),color:new J(1,1,1,1)},components:{diffuse:"texture(image, fract(repeat * materialInput.st)).rgb * color.rgb",alpha:"texture(image, fract(repeat * materialInput.st)).a * color.a"}},translucent:function(e){return e.uniforms.color.alpha<1}});Be.DiffuseMapType="DiffuseMap";Be._materialCache.addMaterial(Be.DiffuseMapType,{fabric:{type:Be.DiffuseMapType,uniforms:{image:Be.DefaultImageId,channels:"rgb",repeat:new L(1,1)},components:{diffuse:"texture(image, fract(repeat * materialInput.st)).channels"}},translucent:!1});Be.AlphaMapType="AlphaMap";Be._materialCache.addMaterial(Be.AlphaMapType,{fabric:{type:Be.AlphaMapType,uniforms:{image:Be.DefaultImageId,channel:"a",repeat:new L(1,1)},components:{alpha:"texture(image, fract(repeat * materialInput.st)).channel"}},translucent:!0});Be.SpecularMapType="SpecularMap";Be._materialCache.addMaterial(Be.SpecularMapType,{fabric:{type:Be.SpecularMapType,uniforms:{image:Be.DefaultImageId,channel:"r",repeat:new L(1,1)},components:{specular:"texture(image, fract(repeat * materialInput.st)).channel"}},translucent:!1});Be.EmissionMapType="EmissionMap";Be._materialCache.addMaterial(Be.EmissionMapType,{fabric:{type:Be.EmissionMapType,uniforms:{image:Be.DefaultImageId,channels:"rgb",repeat:new L(1,1)},components:{emission:"texture(image, fract(repeat * materialInput.st)).channels"}},translucent:!1});Be.BumpMapType="BumpMap";Be._materialCache.addMaterial(Be.BumpMapType,{fabric:{type:Be.BumpMapType,uniforms:{image:Be.DefaultImageId,channel:"r",strength:.8,repeat:new L(1,1)},source:kN},translucent:!1});Be.NormalMapType="NormalMap";Be._materialCache.addMaterial(Be.NormalMapType,{fabric:{type:Be.NormalMapType,uniforms:{image:Be.DefaultImageId,channels:"rgb",strength:.8,repeat:new L(1,1)},source:WN},translucent:!1});Be.GridType="Grid";Be._materialCache.addMaterial(Be.GridType,{fabric:{type:Be.GridType,uniforms:{color:new J(0,1,0,1),cellAlpha:.1,lineCount:new L(8,8),lineThickness:new L(1,1),lineOffset:new L(0,0)},source:YN},translucent:function(e){let t=e.uniforms;return t.color.alpha<1||t.cellAlpha<1}});Be.StripeType="Stripe";Be._materialCache.addMaterial(Be.StripeType,{fabric:{type:Be.StripeType,uniforms:{horizontal:!0,evenColor:new J(1,1,1,.5),oddColor:new J(0,0,1,.5),offset:0,repeat:5},source:eL},translucent:function(e){let t=e.uniforms;return t.evenColor.alpha<1||t.oddColor.alpha<1}});Be.CheckerboardType="Checkerboard";Be._materialCache.addMaterial(Be.CheckerboardType,{fabric:{type:Be.CheckerboardType,uniforms:{lightColor:new J(1,1,1,.5),darkColor:new J(0,0,0,.5),repeat:new L(5,5)},source:UN},translucent:function(e){let t=e.uniforms;return t.lightColor.alpha<1||t.darkColor.alpha<1}});Be.DotType="Dot";Be._materialCache.addMaterial(Be.DotType,{fabric:{type:Be.DotType,uniforms:{lightColor:new J(1,1,0,.75),darkColor:new J(0,1,1,.75),repeat:new L(5,5)},source:zN},translucent:function(e){let t=e.uniforms;return t.lightColor.alpha<1||t.darkColor.alpha<1}});Be.WaterType="Water";Be._materialCache.addMaterial(Be.WaterType,{fabric:{type:Be.WaterType,uniforms:{baseWaterColor:new J(.2,.3,.6,1),blendColor:new J(0,1,.699,1),specularMap:Be.DefaultImageId,normalMap:Be.DefaultImageId,frequency:10,animationSpeed:.01,amplitude:1,specularIntensity:.5,fadeFactor:1},source:nL},translucent:function(e){let t=e.uniforms;return t.baseWaterColor.alpha<1||t.blendColor.alpha<1}});Be.RimLightingType="RimLighting";Be._materialCache.addMaterial(Be.RimLightingType,{fabric:{type:Be.RimLightingType,uniforms:{color:new J(1,0,0,.7),rimColor:new J(1,1,1,.4),width:.3},source:ZN},translucent:function(e){let t=e.uniforms;return t.color.alpha<1||t.rimColor.alpha<1}});Be.FadeType="Fade";Be._materialCache.addMaterial(Be.FadeType,{fabric:{type:Be.FadeType,uniforms:{fadeInColor:new J(1,0,0,1),fadeOutColor:new J(0,0,0,0),maximumDistance:.5,repeat:!0,fadeDirection:{x:!0,y:!0},time:new L(.5,.5)},source:jN},translucent:function(e){let t=e.uniforms;return t.fadeInColor.alpha<1||t.fadeOutColor.alpha<1}});Be.PolylineArrowType="PolylineArrow";Be._materialCache.addMaterial(Be.PolylineArrowType,{fabric:{type:Be.PolylineArrowType,uniforms:{color:new J(1,1,1,1)},source:qN},translucent:!0});Be.PolylineDashType="PolylineDash";Be._materialCache.addMaterial(Be.PolylineDashType,{fabric:{type:Be.PolylineDashType,uniforms:{color:new J(1,0,1,1),gapColor:new J(0,0,0,0),dashLength:16,dashPattern:255},source:JN},translucent:!0});Be.PolylineGlowType="PolylineGlow";Be._materialCache.addMaterial(Be.PolylineGlowType,{fabric:{type:Be.PolylineGlowType,uniforms:{color:new J(0,.5,1,1),glowPower:.25,taperPower:1},source:KN},translucent:!0});Be.PolylineOutlineType="PolylineOutline";Be._materialCache.addMaterial(Be.PolylineOutlineType,{fabric:{type:Be.PolylineOutlineType,uniforms:{color:new J(1,1,1,1),outlineColor:new J(1,0,0,1),outlineWidth:1},source:XN},translucent:function(e){let t=e.uniforms;return t.color.alpha<1||t.outlineColor.alpha<1}});Be.ElevationContourType="ElevationContour";Be._materialCache.addMaterial(Be.ElevationContourType,{fabric:{type:Be.ElevationContourType,uniforms:{spacing:100,color:new J(1,0,0,1),width:1},source:HN},translucent:!1});Be.ElevationRampType="ElevationRamp";Be._materialCache.addMaterial(Be.ElevationRampType,{fabric:{type:Be.ElevationRampType,uniforms:{image:Be.DefaultImageId,minimumHeight:0,maximumHeight:1e4},source:VN},translucent:!1});Be.SlopeRampMaterialType="SlopeRamp";Be._materialCache.addMaterial(Be.SlopeRampMaterialType,{fabric:{type:Be.SlopeRampMaterialType,uniforms:{image:Be.DefaultImageId},source:$N},translucent:!1});Be.AspectRampMaterialType="AspectRamp";Be._materialCache.addMaterial(Be.AspectRampMaterialType,{fabric:{type:Be.AspectRampMaterialType,uniforms:{image:Be.DefaultImageId},source:ON},translucent:!1});Be.ElevationBandType="ElevationBand";Be._materialCache.addMaterial(Be.ElevationBandType,{fabric:{type:Be.ElevationBandType,uniforms:{heights:Be.DefaultImageId,colors:Be.DefaultImageId},source:GN},translucent:!0});Be.WaterMaskType="WaterMask";Be._materialCache.addMaterial(Be.WaterMaskType,{fabric:{type:Be.WaterMaskType,source:tL,uniforms:{waterColor:new J(1,1,1,1),landColor:new J(0,0,0,0)}},translucent:!1});var Ci=Be;function ed(e){e=e??G.EMPTY_OBJECT;let t=e.translucent??!0,n=e.closed??!1,i=e.materialSupport??ed.MaterialSupport.TEXTURED;this.material=c(e.material)?e.material:Ci.fromType(Ci.ColorType),this.translucent=t,this._vertexShaderSource=e.vertexShaderSource??i.vertexShaderSource,this._fragmentShaderSource=e.fragmentShaderSource??i.fragmentShaderSource,this._renderState=jo.getDefaultRenderState(t,n,e.renderState),this._closed=n,this._materialSupport=i,this._vertexFormat=i.vertexFormat,this._flat=e.flat??!1,this._faceForward=e.faceForward??!n}Object.defineProperties(ed.prototype,{vertexShaderSource:{get:function(){return this._vertexShaderSource}},fragmentShaderSource:{get:function(){return this._fragmentShaderSource}},renderState:{get:function(){return this._renderState}},closed:{get:function(){return this._closed}},materialSupport:{get:function(){return this._materialSupport}},vertexFormat:{get:function(){return this._vertexFormat}},flat:{get:function(){return this._flat}},faceForward:{get:function(){return this._faceForward}}});ed.prototype.getFragmentShaderSource=jo.prototype.getFragmentShaderSource;ed.prototype.isTranslucent=jo.prototype.isTranslucent;ed.prototype.getRenderState=jo.prototype.getRenderState;ed.MaterialSupport={BASIC:Object.freeze({vertexFormat:Bt.POSITION_AND_NORMAL,vertexShaderSource:NN,fragmentShaderSource:PN}),TEXTURED:Object.freeze({vertexFormat:Bt.POSITION_NORMAL_AND_ST,vertexShaderSource:FN,fragmentShaderSource:LN}),ALL:Object.freeze({vertexFormat:Bt.ALL,vertexShaderSource:MN,fragmentShaderSource:vN})};var m_=ed;var aL=`in vec3 v_positionEC;
in vec3 v_normalEC;
in vec4 v_color;

void main()
{
    vec3 positionToEyeEC = -v_positionEC;

    vec3 normalEC = normalize(v_normalEC);
#ifdef FACE_FORWARD
    normalEC = faceforward(normalEC, vec3(0.0, 0.0, 1.0), -normalEC);
#endif

    vec4 color = czm_gammaCorrect(v_color);

    czm_materialInput materialInput;
    materialInput.normalEC = normalEC;
    materialInput.positionToEyeEC = positionToEyeEC;
    czm_material material = czm_getDefaultMaterial(materialInput);
    material.diffuse = color.rgb;
    material.alpha = color.a;

    out_FragColor = czm_phong(normalize(positionToEyeEC), material, czm_lightDirectionEC);
}
`;var sL=`in vec3 position3DHigh;
in vec3 position3DLow;
in vec3 normal;
in vec4 color;
in float batchId;

out vec3 v_positionEC;
out vec3 v_normalEC;
out vec4 v_color;

void main()
{
    vec4 p = czm_computePosition();

    v_positionEC = (czm_modelViewRelativeToEye * p).xyz;      // position in eye coordinates
    v_normalEC = czm_normal * normal;                         // normal in eye coordinates
    v_color = color;

    gl_Position = czm_modelViewProjectionRelativeToEye * p;
}
`;var p_=`in vec4 v_color;

void main()
{
    out_FragColor = czm_gammaCorrect(v_color);
}
`;var cL=`in vec3 position3DHigh;
in vec3 position3DLow;
in vec4 color;
in float batchId;

out vec4 v_color;

void main()
{
    vec4 p = czm_computePosition();

    v_color = color;

    gl_Position = czm_modelViewProjectionRelativeToEye * p;
}
`;function dl(e){e=e??G.EMPTY_OBJECT;let t=e.translucent??!0,n=e.closed??!1,i=e.flat??!1,o=i?cL:sL,r=i?p_:aL,a=i?dl.FLAT_VERTEX_FORMAT:dl.VERTEX_FORMAT;this.material=void 0,this.translucent=t,this._vertexShaderSource=e.vertexShaderSource??o,this._fragmentShaderSource=e.fragmentShaderSource??r,this._renderState=jo.getDefaultRenderState(t,n,e.renderState),this._closed=n,this._vertexFormat=a,this._flat=i,this._faceForward=e.faceForward??!n}Object.defineProperties(dl.prototype,{vertexShaderSource:{get:function(){return this._vertexShaderSource}},fragmentShaderSource:{get:function(){return this._fragmentShaderSource}},renderState:{get:function(){return this._renderState}},closed:{get:function(){return this._closed}},vertexFormat:{get:function(){return this._vertexFormat}},flat:{get:function(){return this._flat}},faceForward:{get:function(){return this._faceForward}}});dl.VERTEX_FORMAT=Bt.POSITION_AND_NORMAL;dl.FLAT_VERTEX_FORMAT=Bt.POSITION_ONLY;dl.prototype.getFragmentShaderSource=jo.prototype.getFragmentShaderSource;dl.prototype.isTranslucent=jo.prototype.isTranslucent;dl.prototype.getRenderState=jo.prototype.getRenderState;var Tn=dl;function Th(e){this._definitionChanged=new Le,this._color=void 0,this._colorSubscription=void 0,this.color=e}Object.defineProperties(Th.prototype,{isConstant:{get:function(){return Pt.isConstant(this._color)}},definitionChanged:{get:function(){return this._definitionChanged}},color:te("color")});Th.prototype.getType=function(e){return"Color"};var A6=new Ue;Th.prototype.getValue=function(e,t){return c(e)||(e=Ue.now(A6)),c(t)||(t={}),t.color=Pt.getValueOrClonedDefault(this._color,e,J.WHITE,t.color),t};Th.prototype.equals=function(e){return this===e||e instanceof Th&&Pt.equals(this._color,e._color)};var _A=Th;function Du(e){e=e??G.EMPTY_OBJECT,this._ellipsoid=e.ellipsoid??pe.default,this._rectangle=e.rectangle??de.MAX_VALUE,this._projection=new Ai(this._ellipsoid),this._numberOfLevelZeroTilesX=e.numberOfLevelZeroTilesX??2,this._numberOfLevelZeroTilesY=e.numberOfLevelZeroTilesY??1}Object.defineProperties(Du.prototype,{ellipsoid:{get:function(){return this._ellipsoid}},rectangle:{get:function(){return this._rectangle}},projection:{get:function(){return this._projection}}});Du.prototype.getNumberOfXTilesAtLevel=function(e){return this._numberOfLevelZeroTilesX<<e};Du.prototype.getNumberOfYTilesAtLevel=function(e){return this._numberOfLevelZeroTilesY<<e};Du.prototype.rectangleToNativeRectangle=function(e,t){let n=S.toDegrees(e.west),i=S.toDegrees(e.south),o=S.toDegrees(e.east),r=S.toDegrees(e.north);return c(t)?(t.west=n,t.south=i,t.east=o,t.north=r,t):new de(n,i,o,r)};Du.prototype.tileXYToNativeRectangle=function(e,t,n,i){let o=this.tileXYToRectangle(e,t,n,i);return o.west=S.toDegrees(o.west),o.south=S.toDegrees(o.south),o.east=S.toDegrees(o.east),o.north=S.toDegrees(o.north),o};Du.prototype.tileXYToRectangle=function(e,t,n,i){let o=this._rectangle,r=this.getNumberOfXTilesAtLevel(n),a=this.getNumberOfYTilesAtLevel(n),s=o.width/r,A=e*s+o.west,l=(e+1)*s+o.west,d=o.height/a,m=o.north-t*d,p=o.north-(t+1)*d;return c(i)||(i=new de(A,p,l,m)),i.west=A,i.south=p,i.east=l,i.north=m,i};Du.prototype.positionToTileXY=function(e,t,n){let i=this._rectangle;if(!de.contains(i,e))return;let o=this.getNumberOfXTilesAtLevel(t),r=this.getNumberOfYTilesAtLevel(t),a=i.width/o,s=i.height/r,A=e.longitude;i.east<i.west&&(A+=S.TWO_PI);let l=(A-i.west)/a|0;l>=o&&(l=o-1);let d=(i.north-e.latitude)/s|0;return d>=r&&(d=r-1),c(n)?(n.x=l,n.y=d,n):new L(l,d)};var Ja=Du;var AL=new f,lL=new f,uL=new ue,bB=new f,l6=new f,fL=new le,u6=new Ja,Qp=[new ue,new ue,new ue,new ue],Rp=new L,bo={};bo.initialize=function(){let e=bo._initPromise;return c(e)||(e=Ye.fetchJson(Ga("Assets/approximateTerrainHeights.json")).then(function(t){bo._terrainHeights=t}),bo._initPromise=e),e};bo.getMinimumMaximumHeights=function(e,t){t=t??pe.default;let n=dL(e),i=bo._defaultMinTerrainHeight,o=bo._defaultMaxTerrainHeight;if(c(n)){let r=`${n.level}-${n.x}-${n.y}`,a=bo._terrainHeights[r];c(a)&&(i=a[0],o=a[1]),t.cartographicToCartesian(de.northeast(e,uL),AL),t.cartographicToCartesian(de.southwest(e,uL),lL),f.midpoint(lL,AL,bB);let s=t.scaleToGeodeticSurface(bB,l6);if(c(s)){let A=f.distance(bB,s);i=Math.min(i,-A)}else i=bo._defaultMinTerrainHeight}return i=Math.max(bo._defaultMinTerrainHeight,i),{minimumTerrainHeight:i,maximumTerrainHeight:o}};bo.getBoundingSphere=function(e,t){t=t??pe.default;let n=dL(e),i=bo._defaultMaxTerrainHeight;if(c(n)){let r=`${n.level}-${n.x}-${n.y}`,a=bo._terrainHeights[r];c(a)&&(i=a[1])}let o=le.fromRectangle3D(e,t,0);return le.fromRectangle3D(e,t,i,fL),le.union(o,fL,o)};function dL(e){ue.fromRadians(e.east,e.north,0,Qp[0]),ue.fromRadians(e.west,e.north,0,Qp[1]),ue.fromRadians(e.east,e.south,0,Qp[2]),ue.fromRadians(e.west,e.south,0,Qp[3]);let t=0,n=0,i=0,o=0,r=bo._terrainHeightsMaxLevel,a;for(a=0;a<=r;++a){let s=!1;for(let A=0;A<4;++A){let l=Qp[A];if(u6.positionToTileXY(l,a,Rp),A===0)i=Rp.x,o=Rp.y;else if(i!==Rp.x||o!==Rp.y){s=!0;break}}if(s)break;t=i,n=o}if(a!==0)return{x:t,y:n,level:a>r?r:a-1}}bo._terrainHeightsMaxLevel=6;bo._defaultMaxTerrainHeight=9e3;bo._defaultMinTerrainHeight=-1e5;bo._terrainHeights=void 0;bo._initPromise=void 0;Object.defineProperties(bo,{initialized:{get:function(){return c(bo._terrainHeights)}}});var Bo=bo;function ma(e,t,n){this.minimum=f.clone(e??f.ZERO),this.maximum=f.clone(t??f.ZERO),c(n)?n=f.clone(n):n=f.midpoint(this.minimum,this.maximum,new f),this.center=n}ma.fromCorners=function(e,t,n){return c(n)||(n=new ma),n.minimum=f.clone(e,n.minimum),n.maximum=f.clone(t,n.maximum),n.center=f.midpoint(e,t,n.center),n};ma.fromPoints=function(e,t){if(c(t)||(t=new ma),!c(e)||e.length===0)return t.minimum=f.clone(f.ZERO,t.minimum),t.maximum=f.clone(f.ZERO,t.maximum),t.center=f.clone(f.ZERO,t.center),t;let n=e[0].x,i=e[0].y,o=e[0].z,r=e[0].x,a=e[0].y,s=e[0].z,A=e.length;for(let m=1;m<A;m++){let p=e[m],g=p.x,h=p.y,C=p.z;n=Math.min(g,n),r=Math.max(g,r),i=Math.min(h,i),a=Math.max(h,a),o=Math.min(C,o),s=Math.max(C,s)}let l=t.minimum;l.x=n,l.y=i,l.z=o;let d=t.maximum;return d.x=r,d.y=a,d.z=s,t.center=f.midpoint(l,d,t.center),t};ma.clone=function(e,t){if(c(e))return c(t)?(t.minimum=f.clone(e.minimum,t.minimum),t.maximum=f.clone(e.maximum,t.maximum),t.center=f.clone(e.center,t.center),t):new ma(e.minimum,e.maximum,e.center)};ma.equals=function(e,t){return e===t||c(e)&&c(t)&&f.equals(e.center,t.center)&&f.equals(e.minimum,t.minimum)&&f.equals(e.maximum,t.maximum)};var g_=new f;ma.intersectPlane=function(e,t){g_=f.subtract(e.maximum,e.minimum,g_);let n=f.multiplyByScalar(g_,.5,g_),i=t.normal,o=n.x*Math.abs(i.x)+n.y*Math.abs(i.y)+n.z*Math.abs(i.z),r=f.dot(e.center,i)+t.distance;return r-o>0?bt.INSIDE:r+o<0?bt.OUTSIDE:bt.INTERSECTING};ma.prototype.clone=function(e){return ma.clone(this,e)};ma.prototype.intersectPlane=function(e){return ma.intersectPlane(this,e)};ma.prototype.equals=function(e){return ma.equals(this,e)};var vp=ma;var BB=new re;function IA(e,t){t=t??pe.default,e=t.scaleToGeodeticSurface(e);let n=sn.eastNorthUpToFixedFrame(e,t);this._ellipsoid=t,this._origin=e,this._xAxis=f.fromCartesian4(Q.getColumn(n,0,BB)),this._yAxis=f.fromCartesian4(Q.getColumn(n,1,BB));let i=f.fromCartesian4(Q.getColumn(n,2,BB));this._plane=Ze.fromPointNormal(e,i)}Object.defineProperties(IA.prototype,{ellipsoid:{get:function(){return this._ellipsoid}},origin:{get:function(){return this._origin}},plane:{get:function(){return this._plane}},xAxis:{get:function(){return this._xAxis}},yAxis:{get:function(){return this._yAxis}},zAxis:{get:function(){return this._plane.normal}}});var f6=new vp;IA.fromPoints=function(e,t){let n=vp.fromPoints(e,f6);return new IA(n.center,t)};var hL=new ai,C_=new f;IA.prototype.projectPointOntoPlane=function(e,t){let n=hL;n.origin=e,f.normalize(e,n.direction);let i=en.rayPlane(n,this._plane,C_);if(c(i)||(f.negate(n.direction,n.direction),i=en.rayPlane(n,this._plane,C_)),c(i)){let o=f.subtract(i,this._origin,i),r=f.dot(this._xAxis,o),a=f.dot(this._yAxis,o);return c(t)?(t.x=r,t.y=a,t):new L(r,a)}};IA.prototype.projectPointsOntoPlane=function(e,t){c(t)||(t=[]);let n=0,i=e.length;for(let o=0;o<i;o++){let r=this.projectPointOntoPlane(e[o],t[n]);c(r)&&(t[n]=r,n++)}return t.length=n,t};IA.prototype.projectPointToNearestOnPlane=function(e,t){c(t)||(t=new L);let n=hL;n.origin=e,f.clone(this._plane.normal,n.direction);let i=en.rayPlane(n,this._plane,C_);c(i)||(f.negate(n.direction,n.direction),i=en.rayPlane(n,this._plane,C_));let o=f.subtract(i,this._origin,i),r=f.dot(this._xAxis,o),a=f.dot(this._yAxis,o);return t.x=r,t.y=a,t};IA.prototype.projectPointsToNearestOnPlane=function(e,t){c(t)||(t=[]);let n=e.length;t.length=n;for(let i=0;i<n;i++)t[i]=this.projectPointToNearestOnPlane(e[i],t[i]);return t};var d6=new f;IA.prototype.projectPointOntoEllipsoid=function(e,t){c(t)||(t=new f);let n=this._ellipsoid,i=this._origin,o=this._xAxis,r=this._yAxis,a=d6;return f.multiplyByScalar(o,e.x,a),t=f.add(i,a,t),f.multiplyByScalar(r,e.y,a),f.add(t,a,t),n.scaleToGeocentricSurface(t,t),t};IA.prototype.projectPointsOntoEllipsoid=function(e,t){let n=e.length;c(t)?t.length=n:t=new Array(n);for(let i=0;i<n;++i)t[i]=this.projectPointOntoEllipsoid(e[i],t[i]);return t};var Fc=IA;function Sn(e,t){this.center=f.clone(e??f.ZERO),this.halfAxes=ne.clone(t??ne.ZERO)}Sn.packedLength=f.packedLength+ne.packedLength;Sn.pack=function(e,t,n){return n=n??0,f.pack(e.center,t,n),ne.pack(e.halfAxes,t,n+f.packedLength),t};Sn.unpack=function(e,t,n){return t=t??0,c(n)||(n=new Sn),f.unpack(e,t,n.center),ne.unpack(e,t+f.packedLength,n.halfAxes),n};var h6=new f,m6=new f,p6=new f,g6=new f,C6=new f,E6=new f,_6=new ne,I6={unitary:new ne,diagonal:new ne};Sn.fromPoints=function(e,t){if(c(t)||(t=new Sn),!c(e)||e.length===0)return t.halfAxes=ne.ZERO,t.center=f.ZERO,t;let n,i=e.length,o=f.clone(e[0],h6);for(n=1;n<i;n++)f.add(o,e[n],o);let r=1/i;f.multiplyByScalar(o,r,o);let a=0,s=0,A=0,l=0,d=0,m=0,p;for(n=0;n<i;n++)p=f.subtract(e[n],o,m6),a+=p.x*p.x,s+=p.x*p.y,A+=p.x*p.z,l+=p.y*p.y,d+=p.y*p.z,m+=p.z*p.z;a*=r,s*=r,A*=r,l*=r,d*=r,m*=r;let g=_6;g[0]=a,g[1]=s,g[2]=A,g[3]=s,g[4]=l,g[5]=d,g[6]=A,g[7]=d,g[8]=m;let h=ne.computeEigenDecomposition(g,I6),C=ne.clone(h.unitary,t.halfAxes),_=ne.getColumn(C,0,g6),I=ne.getColumn(C,1,C6),b=ne.getColumn(C,2,E6),x=-Number.MAX_VALUE,T=-Number.MAX_VALUE,w=-Number.MAX_VALUE,R=Number.MAX_VALUE,z=Number.MAX_VALUE,M=Number.MAX_VALUE;for(n=0;n<i;n++)p=e[n],x=Math.max(f.dot(_,p),x),T=Math.max(f.dot(I,p),T),w=Math.max(f.dot(b,p),w),R=Math.min(f.dot(_,p),R),z=Math.min(f.dot(I,p),z),M=Math.min(f.dot(b,p),M);_=f.multiplyByScalar(_,.5*(R+x),_),I=f.multiplyByScalar(I,.5*(z+T),I),b=f.multiplyByScalar(b,.5*(M+w),b);let N=f.add(_,I,t.center);f.add(N,b,N);let O=p6;return O.x=x-R,O.y=T-z,O.z=w-M,f.multiplyByScalar(O,.5,O),ne.multiplyByScale(t.halfAxes,O,t.halfAxes),t};var _L=new f,y6=new f;function mL(e,t,n,i,o,r,a,s,A,l,d){c(d)||(d=new Sn);let m=d.halfAxes;ne.setColumn(m,0,t,m),ne.setColumn(m,1,n,m),ne.setColumn(m,2,i,m);let p=_L;p.x=(o+r)/2,p.y=(a+s)/2,p.z=(A+l)/2;let g=y6;g.x=(r-o)/2,g.y=(s-a)/2,g.z=(l-A)/2;let h=d.center;return p=ne.multiplyByVector(m,p,p),f.add(e,p,h),ne.multiplyByScale(m,g,m),d}var pL=new ue,b6=new f,B6=new ue,x6=new ue,T6=new ue,S6=new ue,w6=new ue,D6=new f,gL=new f,Q6=new f,CL=new f,R6=new f,v6=new L,M6=new L,P6=new L,N6=new L,L6=new L,F6=new f,O6=new f,k6=new f,U6=new f,z6=new L,G6=new f,H6=new f,V6=new f,j6=new Ze(f.UNIT_X,0);Sn.fromRectangle=function(e,t,n,i,o){t=t??0,n=n??0,i=i??pe.default;let r,a,s,A,l,d,m;if(e.width<=S.PI){let z=de.center(e,pL),M=i.cartographicToCartesian(z,b6),N=new Fc(M,i);m=N.plane;let O=z.longitude,u=e.south<0&&e.north>0?0:z.latitude,E=ue.fromRadians(O,e.north,n,B6),y=ue.fromRadians(e.west,e.north,n,x6),B=ue.fromRadians(e.west,u,n,T6),D=ue.fromRadians(e.west,e.south,n,S6),v=ue.fromRadians(O,e.south,n,w6),F=i.cartographicToCartesian(E,D6),P=i.cartographicToCartesian(y,gL),U=i.cartographicToCartesian(B,Q6),k=i.cartographicToCartesian(D,CL),j=i.cartographicToCartesian(v,R6),q=N.projectPointToNearestOnPlane(F,v6),$=N.projectPointToNearestOnPlane(P,M6),H=N.projectPointToNearestOnPlane(U,P6),Z=N.projectPointToNearestOnPlane(k,N6),ee=N.projectPointToNearestOnPlane(j,L6);return r=Math.min($.x,H.x,Z.x),a=-r,A=Math.max($.y,q.y),s=Math.min(Z.y,ee.y),y.height=D.height=t,P=i.cartographicToCartesian(y,gL),k=i.cartographicToCartesian(D,CL),l=Math.min(Ze.getPointDistance(m,P),Ze.getPointDistance(m,k)),d=n,mL(N.origin,N.xAxis,N.yAxis,N.zAxis,r,a,s,A,l,d,o)}let p=e.south>0,g=e.north<0,h=p?e.south:g?e.north:0,C=de.center(e,pL).longitude,_=f.fromRadians(C,h,n,i,F6);_.z=0;let b=Math.abs(_.x)<S.EPSILON10&&Math.abs(_.y)<S.EPSILON10?f.UNIT_X:f.normalize(_,O6),x=f.UNIT_Z,T=f.cross(b,x,k6);m=Ze.fromPointNormal(_,b,j6);let w=f.fromRadians(C+S.PI_OVER_TWO,h,n,i,U6);a=f.dot(Ze.projectPointOntoPlane(m,w,z6),T),r=-a,A=f.fromRadians(0,e.north,g?t:n,i,G6).z,s=f.fromRadians(0,e.south,p?t:n,i,H6).z;let R=f.fromRadians(e.east,h,n,i,V6);return l=Ze.getPointDistance(m,R),d=0,mL(_,T,x,b,r,a,s,A,l,d,o)};Sn.fromTransformation=function(e,t){return c(t)||(t=new Sn),t.center=Q.getTranslation(e,t.center),t.halfAxes=Q.getMatrix3(e,t.halfAxes),t.halfAxes=ne.multiplyByScalar(t.halfAxes,.5,t.halfAxes),t};Sn.clone=function(e,t){if(c(e))return c(t)?(f.clone(e.center,t.center),ne.clone(e.halfAxes,t.halfAxes),t):new Sn(e.center,e.halfAxes)};Sn.intersectPlane=function(e,t){let n=e.center,i=t.normal,o=e.halfAxes,r=i.x,a=i.y,s=i.z,A=Math.abs(r*o[ne.COLUMN0ROW0]+a*o[ne.COLUMN0ROW1]+s*o[ne.COLUMN0ROW2])+Math.abs(r*o[ne.COLUMN1ROW0]+a*o[ne.COLUMN1ROW1]+s*o[ne.COLUMN1ROW2])+Math.abs(r*o[ne.COLUMN2ROW0]+a*o[ne.COLUMN2ROW1]+s*o[ne.COLUMN2ROW2]),l=f.dot(i,n)+t.distance;return l<=-A?bt.OUTSIDE:l>=A?bt.INSIDE:bt.INTERSECTING};var IL=new f,yL=new f,bL=new f,Y6=new f,EL=new f,W6=new f;Sn.distanceSquaredTo=function(e,t){let n=f.subtract(t,e.center,_L),i=e.halfAxes,o=ne.getColumn(i,0,IL),r=ne.getColumn(i,1,yL),a=ne.getColumn(i,2,bL),s=f.magnitude(o),A=f.magnitude(r),l=f.magnitude(a),d=!0,m=!0,p=!0;s>0?f.divideByScalar(o,s,o):d=!1,A>0?f.divideByScalar(r,A,r):m=!1,l>0?f.divideByScalar(a,l,a):p=!1;let g=!d+!m+!p,h,C,_;if(g===1){let T=o;h=r,C=a,m?p||(T=a,C=o):(T=r,h=o),_=f.cross(h,C,EL),T===o?o=_:T===r?r=_:T===a&&(a=_)}else if(g===2){h=o,m?h=r:p&&(h=a);let T=f.UNIT_Y;T.equalsEpsilon(h,S.EPSILON3)&&(T=f.UNIT_X),C=f.cross(h,T,Y6),f.normalize(C,C),_=f.cross(h,C,EL),f.normalize(_,_),h===o?(r=C,a=_):h===r?(a=C,o=_):h===a&&(o=C,r=_)}else g===3&&(o=f.UNIT_X,r=f.UNIT_Y,a=f.UNIT_Z);let I=W6;I.x=f.dot(n,o),I.y=f.dot(n,r),I.z=f.dot(n,a);let b=0,x;return I.x<-s?(x=I.x+s,b+=x*x):I.x>s&&(x=I.x-s,b+=x*x),I.y<-A?(x=I.y+A,b+=x*x):I.y>A&&(x=I.y-A,b+=x*x),I.z<-l?(x=I.z+l,b+=x*x):I.z>l&&(x=I.z-l,b+=x*x),b};var q6=new f,J6=new f;Sn.computePlaneDistances=function(e,t,n,i){c(i)||(i=new Vs);let o=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY,a=e.center,s=e.halfAxes,A=ne.getColumn(s,0,IL),l=ne.getColumn(s,1,yL),d=ne.getColumn(s,2,bL),m=f.add(A,l,q6);f.add(m,d,m),f.add(m,a,m);let p=f.subtract(m,t,J6),g=f.dot(n,p);return o=Math.min(g,o),r=Math.max(g,r),f.add(a,A,m),f.add(m,l,m),f.subtract(m,d,m),f.subtract(m,t,p),g=f.dot(n,p),o=Math.min(g,o),r=Math.max(g,r),f.add(a,A,m),f.subtract(m,l,m),f.add(m,d,m),f.subtract(m,t,p),g=f.dot(n,p),o=Math.min(g,o),r=Math.max(g,r),f.add(a,A,m),f.subtract(m,l,m),f.subtract(m,d,m),f.subtract(m,t,p),g=f.dot(n,p),o=Math.min(g,o),r=Math.max(g,r),f.subtract(a,A,m),f.add(m,l,m),f.add(m,d,m),f.subtract(m,t,p),g=f.dot(n,p),o=Math.min(g,o),r=Math.max(g,r),f.subtract(a,A,m),f.add(m,l,m),f.subtract(m,d,m),f.subtract(m,t,p),g=f.dot(n,p),o=Math.min(g,o),r=Math.max(g,r),f.subtract(a,A,m),f.subtract(m,l,m),f.add(m,d,m),f.subtract(m,t,p),g=f.dot(n,p),o=Math.min(g,o),r=Math.max(g,r),f.subtract(a,A,m),f.subtract(m,l,m),f.subtract(m,d,m),f.subtract(m,t,p),g=f.dot(n,p),o=Math.min(g,o),r=Math.max(g,r),i.start=o,i.stop=r,i};var K6=new f,X6=new f,Z6=new f;Sn.computeCorners=function(e,t){c(t)||(t=[new f,new f,new f,new f,new f,new f,new f,new f]);let n=e.center,i=e.halfAxes,o=ne.getColumn(i,0,K6),r=ne.getColumn(i,1,X6),a=ne.getColumn(i,2,Z6);return f.clone(n,t[0]),f.subtract(t[0],o,t[0]),f.subtract(t[0],r,t[0]),f.subtract(t[0],a,t[0]),f.clone(n,t[1]),f.subtract(t[1],o,t[1]),f.subtract(t[1],r,t[1]),f.add(t[1],a,t[1]),f.clone(n,t[2]),f.subtract(t[2],o,t[2]),f.add(t[2],r,t[2]),f.subtract(t[2],a,t[2]),f.clone(n,t[3]),f.subtract(t[3],o,t[3]),f.add(t[3],r,t[3]),f.add(t[3],a,t[3]),f.clone(n,t[4]),f.add(t[4],o,t[4]),f.subtract(t[4],r,t[4]),f.subtract(t[4],a,t[4]),f.clone(n,t[5]),f.add(t[5],o,t[5]),f.subtract(t[5],r,t[5]),f.add(t[5],a,t[5]),f.clone(n,t[6]),f.add(t[6],o,t[6]),f.add(t[6],r,t[6]),f.subtract(t[6],a,t[6]),f.clone(n,t[7]),f.add(t[7],o,t[7]),f.add(t[7],r,t[7]),f.add(t[7],a,t[7]),t};var $6=new ne;Sn.computeTransformation=function(e,t){c(t)||(t=new Q);let n=e.center,i=ne.multiplyByUniformScale(e.halfAxes,2,$6);return Q.fromRotationTranslation(i,n,t)};var eX=new le;Sn.isOccluded=function(e,t){let n=le.fromOrientedBoundingBox(e,eX);return!t.isBoundingSphereVisible(n)};Sn.prototype.intersectPlane=function(e){return Sn.intersectPlane(this,e)};Sn.prototype.distanceSquaredTo=function(e){return Sn.distanceSquaredTo(this,e)};Sn.prototype.computePlaneDistances=function(e,t,n){return Sn.computePlaneDistances(this,e,t,n)};Sn.prototype.computeCorners=function(e){return Sn.computeCorners(this,e)};Sn.prototype.computeTransformation=function(e){return Sn.computeTransformation(this,e)};Sn.prototype.isOccluded=function(e){return Sn.isOccluded(this,e)};Sn.equals=function(e,t){return e===t||c(e)&&c(t)&&f.equals(e.center,t.center)&&ne.equals(e.halfAxes,t.halfAxes)};Sn.prototype.clone=function(e){return Sn.clone(this,e)};Sn.prototype.equals=function(e){return Sn.equals(this,e)};var ui=Sn;var E_={};E_.getHeight=function(e,t,n){return(e-n)*t+n};var tX=new ue;E_.getPosition=function(e,t,n,i,o){let r=t.cartesianToCartographic(e,tX);if(!c(r))return f.clone(e,o);let a=E_.getHeight(r.height,n,i);return f.fromRadians(r.longitude,r.latitude,a,t,o)};var pa=E_;var BL=`in vec3 position3DHigh;
in vec3 position3DLow;
in float batchId;

#ifdef EXTRUDED_GEOMETRY
in vec3 extrudeDirection;

uniform float u_globeMinimumAltitude;
#endif // EXTRUDED_GEOMETRY

#ifdef PER_INSTANCE_COLOR
out vec4 v_color;
#endif // PER_INSTANCE_COLOR

#ifdef TEXTURE_COORDINATES
#ifdef SPHERICAL
out vec4 v_sphericalExtents;
#else // SPHERICAL
out vec2 v_inversePlaneExtents;
out vec4 v_westPlane;
out vec4 v_southPlane;
#endif // SPHERICAL
out vec3 v_uvMinAndSphericalLongitudeRotation;
out vec3 v_uMaxAndInverseDistance;
out vec3 v_vMaxAndInverseDistance;
#endif // TEXTURE_COORDINATES

void main()
{
    vec4 position = czm_computePosition();

#ifdef EXTRUDED_GEOMETRY
    float delta = min(u_globeMinimumAltitude, czm_geometricToleranceOverMeter * length(position.xyz));
    delta *= czm_sceneMode == czm_sceneMode3D ? 1.0 : 0.0;

    //extrudeDirection is zero for the top layer
    position = position + vec4(extrudeDirection * delta, 0.0);
#endif

#ifdef TEXTURE_COORDINATES
#ifdef SPHERICAL
    v_sphericalExtents = czm_batchTable_sphericalExtents(batchId);
    v_uvMinAndSphericalLongitudeRotation.z = czm_batchTable_longitudeRotation(batchId);
#else // SPHERICAL
#ifdef COLUMBUS_VIEW_2D
    vec4 planes2D_high = czm_batchTable_planes2D_HIGH(batchId);
    vec4 planes2D_low = czm_batchTable_planes2D_LOW(batchId);

    // If the primitive is split across the IDL (planes2D_high.x > planes2D_high.w):
    // - If this vertex is on the east side of the IDL (position3DLow.y > 0.0, comparison with position3DHigh may produce artifacts)
    // - existing "east" is on the wrong side of the world, far away (planes2D_high/low.w)
    // - so set "east" as beyond the eastmost extent of the projection (idlSplitNewPlaneHiLow)
    vec2 idlSplitNewPlaneHiLow = vec2(EAST_MOST_X_HIGH - (WEST_MOST_X_HIGH - planes2D_high.w), EAST_MOST_X_LOW - (WEST_MOST_X_LOW - planes2D_low.w));
    bool idlSplit = planes2D_high.x > planes2D_high.w && position3DLow.y > 0.0;
    planes2D_high.w = czm_branchFreeTernary(idlSplit, idlSplitNewPlaneHiLow.x, planes2D_high.w);
    planes2D_low.w = czm_branchFreeTernary(idlSplit, idlSplitNewPlaneHiLow.y, planes2D_low.w);

    // - else, if this vertex is on the west side of the IDL (position3DLow.y < 0.0)
    // - existing "west" is on the wrong side of the world, far away (planes2D_high/low.x)
    // - so set "west" as beyond the westmost extent of the projection (idlSplitNewPlaneHiLow)
    idlSplit = planes2D_high.x > planes2D_high.w && position3DLow.y < 0.0;
    idlSplitNewPlaneHiLow = vec2(WEST_MOST_X_HIGH - (EAST_MOST_X_HIGH - planes2D_high.x), WEST_MOST_X_LOW - (EAST_MOST_X_LOW - planes2D_low.x));
    planes2D_high.x = czm_branchFreeTernary(idlSplit, idlSplitNewPlaneHiLow.x, planes2D_high.x);
    planes2D_low.x = czm_branchFreeTernary(idlSplit, idlSplitNewPlaneHiLow.y, planes2D_low.x);

    vec3 southWestCorner = (czm_modelViewRelativeToEye * czm_translateRelativeToEye(vec3(0.0, planes2D_high.xy), vec3(0.0, planes2D_low.xy))).xyz;
    vec3 northWestCorner = (czm_modelViewRelativeToEye * czm_translateRelativeToEye(vec3(0.0, planes2D_high.x, planes2D_high.z), vec3(0.0, planes2D_low.x, planes2D_low.z))).xyz;
    vec3 southEastCorner = (czm_modelViewRelativeToEye * czm_translateRelativeToEye(vec3(0.0, planes2D_high.w, planes2D_high.y), vec3(0.0, planes2D_low.w, planes2D_low.y))).xyz;
#else // COLUMBUS_VIEW_2D
    // 3D case has smaller "plane extents," so planes encoded as a 64 bit position and 2 vec3s for distances/direction
    vec3 southWestCorner = (czm_modelViewRelativeToEye * czm_translateRelativeToEye(czm_batchTable_southWest_HIGH(batchId), czm_batchTable_southWest_LOW(batchId))).xyz;
    vec3 northWestCorner = czm_normal * czm_batchTable_northward(batchId) + southWestCorner;
    vec3 southEastCorner = czm_normal * czm_batchTable_eastward(batchId) + southWestCorner;
#endif // COLUMBUS_VIEW_2D

    vec3 eastWard = southEastCorner - southWestCorner;
    float eastExtent = length(eastWard);
    eastWard /= eastExtent;

    vec3 northWard = northWestCorner - southWestCorner;
    float northExtent = length(northWard);
    northWard /= northExtent;

    v_westPlane = vec4(eastWard, -dot(eastWard, southWestCorner));
    v_southPlane = vec4(northWard, -dot(northWard, southWestCorner));
    v_inversePlaneExtents = vec2(1.0 / eastExtent, 1.0 / northExtent);
#endif // SPHERICAL
    vec4 uvMinAndExtents = czm_batchTable_uvMinAndExtents(batchId);
    vec4 uMaxVmax = czm_batchTable_uMaxVmax(batchId);

    v_uMaxAndInverseDistance = vec3(uMaxVmax.xy, uvMinAndExtents.z);
    v_vMaxAndInverseDistance = vec3(uMaxVmax.zw, uvMinAndExtents.w);
    v_uvMinAndSphericalLongitudeRotation.xy = uvMinAndExtents.xy;
#endif // TEXTURE_COORDINATES

#ifdef PER_INSTANCE_COLOR
    v_color = czm_batchTable_color(batchId);
#endif

    gl_Position = czm_depthClamp(czm_modelViewProjectionRelativeToEye * position);
}
`;var Mp=`#ifdef VECTOR_TILE
uniform vec4 u_highlightColor;
#endif

void main(void)
{
#ifdef VECTOR_TILE
    out_FragColor = czm_gammaCorrect(u_highlightColor);
#else
    out_FragColor = vec4(1.0);
#endif
    czm_writeDepthClamp();
}
`;var xL={TERRAIN:0,CESIUM_3D_TILE:1,BOTH:2};xL.NUMBER_OF_CLASSIFICATION_TYPES=3;var wn=Object.freeze(xL);var nX={NEVER:W.NEVER,LESS:W.LESS,EQUAL:W.EQUAL,LESS_OR_EQUAL:W.LEQUAL,GREATER:W.GREATER,NOT_EQUAL:W.NOTEQUAL,GREATER_OR_EQUAL:W.GEQUAL,ALWAYS:W.ALWAYS},ga=Object.freeze(nX);function iX(e,t){let n=[],i=e.length,o=0;for(;o<i;){let r=Math.ceil((i-o)/t--);n.push(e.slice(o,o+r)),o+=r}return n}var TL=iX;function hl(e,t,n){if(this._attributes=t,this._numberOfInstances=n,t.length===0)return;let i=oX(t),o=e.floatingPointTexture,r=i===mt.FLOAT&&!o,a=rX(t,r),s=aX(a,t,r),A=Math.floor(rn.maximumTextureSize/s),l=Math.min(n,A),d=s*l,m=Math.ceil(n/l),p=1/d,g=p*.5,h=1/m,C=h*.5;this._textureDimensions=new L(d,m),this._textureStep=new re(p,g,h,C),this._pixelDatatype=r?mt.UNSIGNED_BYTE:i,this._packFloats=r,this._offsets=a,this._stride=s,this._texture=void 0;let _=4*d*m;this._batchValues=i===mt.FLOAT&&!r?new Float32Array(_):new Uint8Array(_),this._batchValuesDirty=!1}Object.defineProperties(hl.prototype,{attributes:{get:function(){return this._attributes}},numberOfInstances:{get:function(){return this._numberOfInstances}}});function oX(e){let t=!1,n=e.length;for(let i=0;i<n;++i)if(e[i].componentDatatype!==V.UNSIGNED_BYTE){t=!0;break}return t?mt.FLOAT:mt.UNSIGNED_BYTE}function wL(e,t){let n=e[t].componentsPerAttribute;return n===2?L:n===3?f:n===4?re:Number}function rX(e,t){let n=new Array(e.length),i=0,o=e.length;for(let r=0;r<o;++r){let s=e[r].componentDatatype;n[r]=i,s!==V.UNSIGNED_BYTE&&t?i+=4:++i}return n}function aX(e,t,n){let i=e.length,o=e[i-1];return t[i-1].componentDatatype!==V.UNSIGNED_BYTE&&n?o+4:o+1}var Pp=new re;function sX(e,t,n){let i=re.unpack(e,t,Pp),o=re.unpackFloat(i);i=re.unpack(e,t+4,Pp);let r=re.unpackFloat(i);i=re.unpack(e,t+8,Pp);let a=re.unpackFloat(i);i=re.unpack(e,t+12,Pp);let s=re.unpackFloat(i);return re.fromElements(o,r,a,s,n)}function cX(e,t,n){let i=re.packFloat(e.x,Pp);re.pack(i,t,n),i=re.packFloat(e.y,i),re.pack(i,t,n+4),i=re.packFloat(e.z,i),re.pack(i,t,n+8),i=re.packFloat(e.w,i),re.pack(i,t,n+12)}var SL=new re;hl.prototype.getBatchedAttribute=function(e,t,n){let i=this._attributes,o=this._offsets[t],a=4*this._stride*e+4*o,s;this._packFloats&&i[t].componentDatatype!==mt.UNSIGNED_BYTE?s=sX(this._batchValues,a,SL):s=re.unpack(this._batchValues,a,SL);let A=wL(i,t);return c(A.fromCartesian4)?A.fromCartesian4(s,n):c(A.clone)?A.clone(s,n):s.x};var AX=[void 0,void 0,new L,new f,new re],lX=new re;hl.prototype.setBatchedAttribute=function(e,t,n){let i=this._attributes,o=AX[i[t].componentsPerAttribute],r=this.getBatchedAttribute(e,t,o),a=wL(this._attributes,t);if(c(a.equals)?a.equals(r,n):r===n)return;let A=lX;A.x=c(n.x)?n.x:n,A.y=c(n.y)?n.y:0,A.z=c(n.z)?n.z:0,A.w=c(n.w)?n.w:0;let l=this._offsets[t],m=4*this._stride*e+4*l;this._packFloats&&i[t].componentDatatype!==mt.UNSIGNED_BYTE?cX(A,this._batchValues,m):re.pack(A,this._batchValues,m),this._batchValuesDirty=!0};function uX(e,t){let n=e._textureDimensions;e._texture=new on({context:t,pixelFormat:_t.RGBA,pixelDatatype:e._pixelDatatype,width:n.x,height:n.y,sampler:nn.NEAREST,flipY:!1})}function fX(e){let t=e._textureDimensions;e._texture.copyFrom({source:{width:t.x,height:t.y,arrayBufferView:e._batchValues}})}hl.prototype.update=function(e){c(this._texture)&&!this._batchValuesDirty||this._attributes.length===0||(this._batchValuesDirty=!1,c(this._texture)||uX(this,e.context),fX(this))};hl.prototype.getUniformMapCallback=function(){let e=this;return function(t){return e._attributes.length===0?t:dt(t,{batchTexture:function(){return e._texture},batchTextureDimensions:function(){return e._textureDimensions},batchTextureStep:function(){return e._textureStep}})}};function dX(e){let t=e._stride;return e._textureDimensions.y===1?`uniform vec4 batchTextureStep; 
vec2 computeSt(float batchId) 
{ 
    float stepX = batchTextureStep.x; 
    float centerX = batchTextureStep.y; 
    float numberOfAttributes = float(${t}); 
    return vec2(centerX + (batchId * numberOfAttributes * stepX), 0.5); 
} 
`:`uniform vec4 batchTextureStep; 
uniform vec2 batchTextureDimensions; 
vec2 computeSt(float batchId) 
{ 
    float stepX = batchTextureStep.x; 
    float centerX = batchTextureStep.y; 
    float stepY = batchTextureStep.z; 
    float centerY = batchTextureStep.w; 
    float numberOfAttributes = float(${t}); 
    float xId = mod(batchId * numberOfAttributes, batchTextureDimensions.x); 
    float yId = floor(batchId * numberOfAttributes / batchTextureDimensions.x); 
    return vec2(centerX + (xId * stepX), centerY + (yId * stepY)); 
} 
`}function hX(e){return e===1?"float":`vec${e}`}function mX(e){return e===1?".x":e===2?".xy":e===3?".xyz":""}function pX(e,t){let i=e._attributes[t],o=i.componentsPerAttribute,r=i.functionName,a=hX(o),s=mX(o),A=e._offsets[t],l=`${a} ${r}(float batchId) 
{ 
    vec2 st = computeSt(batchId); 
    st.x += batchTextureStep.x * float(${A}); 
`;return e._packFloats&&i.componentDatatype!==mt.UNSIGNED_BYTE?l+=`vec4 textureValue; 
textureValue.x = czm_unpackFloat(texture(batchTexture, st)); 
textureValue.y = czm_unpackFloat(texture(batchTexture, st + vec2(batchTextureStep.x, 0.0))); 
textureValue.z = czm_unpackFloat(texture(batchTexture, st + vec2(batchTextureStep.x * 2.0, 0.0))); 
textureValue.w = czm_unpackFloat(texture(batchTexture, st + vec2(batchTextureStep.x * 3.0, 0.0))); 
`:l+=`    vec4 textureValue = texture(batchTexture, st); 
`,l+=`    ${a} value = textureValue${s}; 
`,e._pixelDatatype===mt.UNSIGNED_BYTE&&i.componentDatatype===V.UNSIGNED_BYTE&&!i.normalize?l+=`value *= 255.0; 
`:e._pixelDatatype===mt.FLOAT&&i.componentDatatype===V.UNSIGNED_BYTE&&i.normalize&&(l+=`value /= 255.0; 
`),l+=`    return value; 
} 
`,l}hl.prototype.getVertexShaderCallback=function(){let e=this._attributes;if(e.length===0)return function(i){return i};let t=`uniform highp sampler2D batchTexture; 
`;t+=`${dX(this)}
`;let n=e.length;for(let i=0;i<n;++i)t+=pX(this,i);return function(i){let o=i.indexOf("void main"),r=i.substring(0,o),a=i.substring(o);return`${r}
${t}
${a}`}};hl.prototype.isDestroyed=function(){return!1};hl.prototype.destroy=function(){return this._texture=this._texture&&this._texture.destroy(),me(this)};var __=hl;function Ka(e){this._ellipsoid=e??pe.WGS84,this._semimajorAxis=this._ellipsoid.maximumRadius,this._oneOverSemimajorAxis=1/this._semimajorAxis}Object.defineProperties(Ka.prototype,{ellipsoid:{get:function(){return this._ellipsoid}}});Ka.mercatorAngleToGeodeticLatitude=function(e){return S.PI_OVER_TWO-2*Math.atan(Math.exp(-e))};Ka.geodeticLatitudeToMercatorAngle=function(e){e>Ka.MaximumLatitude?e=Ka.MaximumLatitude:e<-Ka.MaximumLatitude&&(e=-Ka.MaximumLatitude);let t=Math.sin(e);return .5*Math.log((1+t)/(1-t))};Ka.MaximumLatitude=Ka.mercatorAngleToGeodeticLatitude(Math.PI);Ka.prototype.project=function(e,t){let n=this._semimajorAxis,i=e.longitude*n,o=Ka.geodeticLatitudeToMercatorAngle(e.latitude)*n,r=e.height;return c(t)?(t.x=i,t.y=o,t.z=r,t):new f(i,o,r)};Ka.prototype.unproject=function(e,t){let n=this._oneOverSemimajorAxis,i=e.x*n,o=Ka.mercatorAngleToGeodeticLatitude(e.y*n),r=e.z;return c(t)?(t.longitude=i,t.latitude=o,t.height=r,t):new ue(i,o,r)};var jn=Ka;function gX(e,t,n){let i=!n,o=e.length,r;if(!i&&o>1){let a=e[0].modelMatrix;for(r=1;r<o;++r)if(!Q.equals(a,e[r].modelMatrix)){i=!0;break}}if(i)for(r=0;r<o;++r)c(e[r].geometry)&&li.transformToWorldCoordinates(e[r]);else Q.multiplyTransformation(t,e[0].modelMatrix,t)}function xB(e,t){let n=e.attributes,i=n.position,o=i.values.length/i.componentsPerAttribute;n.batchId=new rt({componentDatatype:V.FLOAT,componentsPerAttribute:1,values:new Float32Array(o)});let r=n.batchId.values;for(let a=0;a<o;++a)r[a]=t}function CX(e){let t=e.length;for(let n=0;n<t;++n){let i=e[n];c(i.geometry)?xB(i.geometry,n):c(i.westHemisphereGeometry)&&c(i.eastHemisphereGeometry)&&(xB(i.westHemisphereGeometry,n),xB(i.eastHemisphereGeometry,n))}}function EX(e){let t=e.instances,n=e.projection,i=e.elementIndexUintSupported,o=e.scene3DOnly,r=e.vertexCacheOptimize,a=e.compressVertices,s=e.modelMatrix,A,l,d,m=t.length;for(A=0;A<m;++A)if(c(t[A].geometry)){d=t[A].geometry.primitiveType;break}if(gX(t,s,o),!o)for(A=0;A<m;++A)c(t[A].geometry)&&li.splitLongitude(t[A]);if(CX(t),r)for(A=0;A<m;++A){let g=t[A];c(g.geometry)?(li.reorderForPostVertexCache(g.geometry),li.reorderForPreVertexCache(g.geometry)):c(g.westHemisphereGeometry)&&c(g.eastHemisphereGeometry)&&(li.reorderForPostVertexCache(g.westHemisphereGeometry),li.reorderForPreVertexCache(g.westHemisphereGeometry),li.reorderForPostVertexCache(g.eastHemisphereGeometry),li.reorderForPreVertexCache(g.eastHemisphereGeometry))}let p=li.combineInstances(t);for(m=p.length,A=0;A<m;++A){l=p[A];let g=l.attributes;if(o)for(let h in g)g.hasOwnProperty(h)&&g[h].componentDatatype===V.DOUBLE&&li.encodeAttribute(l,h,`${h}3DHigh`,`${h}3DLow`);else for(let h in g)if(g.hasOwnProperty(h)&&g[h].componentDatatype===V.DOUBLE){let C=`${h}3D`,_=`${h}2D`;li.projectTo2D(l,h,C,_,n),c(l.boundingSphere)&&h==="position"&&(l.boundingSphereCV=le.fromVertices(l.attributes.position2D.values)),li.encodeAttribute(l,C,`${C}High`,`${C}Low`),li.encodeAttribute(l,_,`${_}High`,`${_}Low`)}a&&li.compressVertices(l)}if(!i){let g=[];for(m=p.length,A=0;A<m;++A)l=p[A],g=g.concat(li.fitToUnsignedShortIndices(l));p=g}return p}function TB(e,t,n,i){let o,r,a,s=i.length-1;if(s>=0){let l=i[s];o=l.offset+l.count,a=l.index,r=n[a].indices.length}else o=0,a=0,r=n[a].indices.length;let A=e.length;for(let l=0;l<A;++l){let m=e[l][t];if(!c(m))continue;let p=m.indices.length;o+p>r&&(o=0,r=n[++a].indices.length),i.push({index:a,offset:o,count:p}),o+=p}}function _X(e,t){let n=[];return TB(e,"geometry",t,n),TB(e,"westHemisphereGeometry",t,n),TB(e,"eastHemisphereGeometry",t,n),n}var ml={};ml.combineGeometry=function(e){let t,n,i=e.instances,o=i.length,r,a,s=!1;o>0&&(t=EX(e),t.length>0&&(n=li.createAttributeLocations(t[0]),e.createPickOffsets&&(r=_X(i,t))),c(i[0].attributes)&&c(i[0].attributes.offset)&&(a=new Array(o),s=!0));let A=new Array(o),l=new Array(o);for(let d=0;d<o;++d){let m=i[d],p=m.geometry;c(p)&&(A[d]=p.boundingSphere,l[d]=p.boundingSphereCV,s&&(a[d]=m.geometry.offsetAttribute));let g=m.eastHemisphereGeometry,h=m.westHemisphereGeometry;c(g)&&c(h)&&(c(g.boundingSphere)&&c(h.boundingSphere)&&(A[d]=le.union(g.boundingSphere,h.boundingSphere)),c(g.boundingSphereCV)&&c(h.boundingSphereCV)&&(l[d]=le.union(g.boundingSphereCV,h.boundingSphereCV)))}return{geometries:t,modelMatrix:e.modelMatrix,attributeLocations:n,pickOffsets:r,offsetInstanceExtend:a,boundingSpheres:A,boundingSpheresCV:l}};function IX(e,t){let n=e.attributes;for(let i in n)if(n.hasOwnProperty(i)){let o=n[i];c(o)&&c(o.values)&&t.push(o.values.buffer)}c(e.indices)&&t.push(e.indices.buffer)}function yX(e,t){let n=e.length;for(let i=0;i<n;++i)IX(e[i],t)}function bX(e){let t=1,n=e.length;for(let i=0;i<n;i++){let o=e[i];if(++t,!c(o))continue;let r=o.attributes;t+=7+2*le.packedLength+(c(o.indices)?o.indices.length:0);for(let a in r)if(r.hasOwnProperty(a)&&c(r[a])){let s=r[a];t+=5+s.values.length}}return t}ml.packCreateGeometryResults=function(e,t){let n=new Float64Array(bX(e)),i=[],o={},r=e.length,a=0;n[a++]=r;for(let s=0;s<r;s++){let A=e[s],l=c(A);if(n[a++]=l?1:0,!l)continue;n[a++]=A.primitiveType,n[a++]=A.geometryType,n[a++]=A.offsetAttribute??-1;let d=c(A.boundingSphere)?1:0;n[a++]=d,d&&le.pack(A.boundingSphere,n,a),a+=le.packedLength;let m=c(A.boundingSphereCV)?1:0;n[a++]=m,m&&le.pack(A.boundingSphereCV,n,a),a+=le.packedLength;let p=A.attributes,g=[];for(let C in p)p.hasOwnProperty(C)&&c(p[C])&&(g.push(C),c(o[C])||(o[C]=i.length,i.push(C)));n[a++]=g.length;for(let C=0;C<g.length;C++){let _=g[C],I=p[_];n[a++]=o[_],n[a++]=I.componentDatatype,n[a++]=I.componentsPerAttribute,n[a++]=I.normalize?1:0,n[a++]=I.values.length,n.set(I.values,a),a+=I.values.length}let h=c(A.indices)?A.indices.length:0;n[a++]=h,h>0&&(n.set(A.indices,a),a+=h)}return t.push(n.buffer),{stringTable:i,packedData:n}};ml.unpackCreateGeometryResults=function(e){let t=e.stringTable,n=e.packedData,i,o=new Array(n[0]),r=0,a=1;for(;a<n.length;){if(!(n[a++]===1)){o[r++]=void 0;continue}let A=n[a++],l=n[a++],d=n[a++];d===-1&&(d=void 0);let m,p;n[a++]===1&&(m=le.unpack(n,a)),a+=le.packedLength,n[a++]===1&&(p=le.unpack(n,a)),a+=le.packedLength;let C,_,I,b=new eo,x=n[a++];for(i=0;i<x;i++){let w=t[n[a++]],R=n[a++];I=n[a++];let z=n[a++]!==0;C=n[a++],_=V.createTypedArray(R,C);for(let M=0;M<C;M++)_[M]=n[a++];b[w]=new rt({componentDatatype:R,componentsPerAttribute:I,normalize:z,values:_})}let T;if(C=n[a++],C>0){let w=_.length/I;for(T=Ge.createTypedArray(w,C),i=0;i<C;i++)T[i]=n[a++]}o[r++]=new Dt({primitiveType:A,geometryType:l,boundingSphere:m,boundingSphereCV:p,indices:T,attributes:b,offsetAttribute:d})}return o};function BX(e,t){let n=e.length,i=new Float64Array(1+n*19),o=0;i[o++]=n;for(let r=0;r<n;r++){let a=e[r];if(Q.pack(a.modelMatrix,i,o),o+=Q.packedLength,c(a.attributes)&&c(a.attributes.offset)){let s=a.attributes.offset.value;i[o]=s[0],i[o+1]=s[1],i[o+2]=s[2]}o+=3}return t.push(i.buffer),i}function xX(e){let t=e,n=new Array(t[0]),i=0,o=1;for(;o<t.length;){let r=Q.unpack(t,o),a;o+=Q.packedLength,c(t[o])&&(a={offset:new RN(t[o],t[o+1],t[o+2])}),o+=3,n[i++]={modelMatrix:r,attributes:a}}return n}ml.packCombineGeometryParameters=function(e,t){let n=e.createGeometryResults,i=n.length;for(let o=0;o<i;o++)t.push(n[o].packedData.buffer);return{createGeometryResults:e.createGeometryResults,packedInstances:BX(e.instances,t),ellipsoid:e.ellipsoid,isGeographic:e.projection instanceof Ai,elementIndexUintSupported:e.elementIndexUintSupported,scene3DOnly:e.scene3DOnly,vertexCacheOptimize:e.vertexCacheOptimize,compressVertices:e.compressVertices,modelMatrix:e.modelMatrix,createPickOffsets:e.createPickOffsets}};ml.unpackCombineGeometryParameters=function(e){let t=xX(e.packedInstances),n=e.createGeometryResults,i=n.length,o=0;for(let s=0;s<i;s++){let A=ml.unpackCreateGeometryResults(n[s]),l=A.length;for(let d=0;d<l;d++){let m=A[d],p=t[o];p.geometry=m,++o}}let r=pe.clone(e.ellipsoid),a=e.isGeographic?new Ai(r):new jn(r);return{instances:t,ellipsoid:r,projection:a,elementIndexUintSupported:e.elementIndexUintSupported,scene3DOnly:e.scene3DOnly,vertexCacheOptimize:e.vertexCacheOptimize,compressVertices:e.compressVertices,modelMatrix:Q.clone(e.modelMatrix),createPickOffsets:e.createPickOffsets}};function DL(e){let t=e.length,n=1+(le.packedLength+1)*t,i=new Float32Array(n),o=0;i[o++]=t;for(let r=0;r<t;++r){let a=e[r];c(a)?(i[o++]=1,le.pack(e[r],i,o)):i[o++]=0,o+=le.packedLength}return i}function QL(e){let t=new Array(e[0]),n=0,i=1;for(;i<e.length;)e[i++]===1&&(t[n]=le.unpack(e,i)),++n,i+=le.packedLength;return t}ml.packCombineGeometryResults=function(e,t){c(e.geometries)&&yX(e.geometries,t);let n=DL(e.boundingSpheres),i=DL(e.boundingSpheresCV);return t.push(n.buffer,i.buffer),{geometries:e.geometries,attributeLocations:e.attributeLocations,modelMatrix:e.modelMatrix,pickOffsets:e.pickOffsets,offsetInstanceExtend:e.offsetInstanceExtend,boundingSpheres:n,boundingSpheresCV:i}};ml.unpackCombineGeometryResults=function(e){return{geometries:e.geometries,attributeLocations:e.attributeLocations,modelMatrix:e.modelMatrix,pickOffsets:e.pickOffsets,offsetInstanceExtend:e.offsetInstanceExtend,boundingSpheres:QL(e.boundingSpheres),boundingSpheresCV:QL(e.boundingSpheresCV)}};var I_=ml;var TX={READY:0,CREATING:1,CREATED:2,COMBINING:3,COMBINED:4,COMPLETE:5,FAILED:6},Lo=Object.freeze(TX);var ps={DISABLED:0,ENABLED:1,CAST_ONLY:2,RECEIVE_ONLY:3};ps.NUMBER_OF_SHADOW_MODES=4;ps.castShadows=function(e){return e===ps.ENABLED||e===ps.CAST_ONLY};ps.receiveShadows=function(e){return e===ps.ENABLED||e===ps.RECEIVE_ONLY};ps.fromCastReceive=function(e,t){return e&&t?ps.ENABLED:e?ps.CAST_ONLY:t?ps.RECEIVE_ONLY:ps.DISABLED};var Yo=Object.freeze(ps);function no(e){e=e??G.EMPTY_OBJECT,this.geometryInstances=e.geometryInstances,this.appearance=e.appearance,this._appearance=void 0,this._material=void 0,this.depthFailAppearance=e.depthFailAppearance,this._depthFailAppearance=void 0,this._depthFailMaterial=void 0,this.modelMatrix=Q.clone(e.modelMatrix??Q.IDENTITY),this._modelMatrix=new Q,this.show=e.show??!0,this._vertexCacheOptimize=e.vertexCacheOptimize??!1,this._interleave=e.interleave??!1,this._releaseGeometryInstances=e.releaseGeometryInstances??!0,this._allowPicking=e.allowPicking??!0,this._asynchronous=e.asynchronous??!0,this._compressVertices=e.compressVertices??!0,this.cull=e.cull??!0,this.debugShowBoundingVolume=e.debugShowBoundingVolume??!1,this.rtcCenter=e.rtcCenter,this.shadows=e.shadows??Yo.DISABLED,this._translucent=void 0,this._state=Lo.READY,this._geometries=[],this._error=void 0,this._numberOfInstances=0,this._boundingSpheres=[],this._boundingSphereWC=[],this._boundingSphereCV=[],this._boundingSphere2D=[],this._boundingSphereMorph=[],this._perInstanceAttributeCache=new Map,this._instanceIds=[],this._lastPerInstanceAttributeIndex=0,this._va=[],this._attributeLocations=void 0,this._primitiveType=void 0,this._frontFaceRS=void 0,this._backFaceRS=void 0,this._sp=void 0,this._depthFailAppearance=void 0,this._spDepthFail=void 0,this._frontFaceDepthFailRS=void 0,this._backFaceDepthFailRS=void 0,this._pickIds=[],this._colorCommands=[],this._pickCommands=[],this._createBoundingVolumeFunction=e._createBoundingVolumeFunction,this._createRenderStatesFunction=e._createRenderStatesFunction,this._createShaderProgramFunction=e._createShaderProgramFunction,this._createCommandsFunction=e._createCommandsFunction,this._updateAndQueueCommandsFunction=e._updateAndQueueCommandsFunction,this._createPickOffsets=e._createPickOffsets,this._pickOffsets=void 0,this._createGeometryResults=void 0,this._ready=!1,this._batchTable=void 0,this._batchTableAttributeIndices=void 0,this._offsetInstanceExtend=void 0,this._batchTableOffsetAttribute2DIndex=void 0,this._batchTableOffsetsUpdated=!1,this._instanceBoundingSpheres=void 0,this._instanceBoundingSpheresCV=void 0,this._tempBoundingSpheres=void 0,this._recomputeBoundingSpheres=!1,this._batchTableBoundingSpheresUpdated=!1,this._batchTableBoundingSphereAttributeIndices=void 0}Object.defineProperties(no.prototype,{vertexCacheOptimize:{get:function(){return this._vertexCacheOptimize}},interleave:{get:function(){return this._interleave}},releaseGeometryInstances:{get:function(){return this._releaseGeometryInstances}},allowPicking:{get:function(){return this._allowPicking}},asynchronous:{get:function(){return this._asynchronous}},compressVertices:{get:function(){return this._compressVertices}},ready:{get:function(){return this._ready}}});function SX(e){let t=e.length,n=[],i=e[0].attributes,o;for(o in i)if(i.hasOwnProperty(o)&&c(i[o])){let r=i[o],a=!0;for(let s=1;s<t;++s){let A=e[s].attributes[o];if(!c(A)||r.componentDatatype!==A.componentDatatype||r.componentsPerAttribute!==A.componentsPerAttribute||r.normalize!==A.normalize){a=!1;break}}a&&n.push(o)}return n}var wX=new L,DX=new f,kL=new re;function UL(e){let t=e.length;if(t===1)return e[0];if(t===2)return L.unpack(e,0,wX);if(t===3)return f.unpack(e,0,DX);if(t===4)return re.unpack(e,0,kL)}function QX(e,t){let n=e.geometryInstances,i=Array.isArray(n)?n:[n],o=i.length;if(o===0)return;let r=SX(i),a=r.length,s=[],A={},l={},d,p=i[0].attributes,g,h,C;for(g=0;g<a;++g)h=r[g],C=p[h],A[h]=g,s.push({functionName:`czm_batchTable_${h}`,componentDatatype:C.componentDatatype,componentsPerAttribute:C.componentsPerAttribute,normalize:C.normalize});r.indexOf("distanceDisplayCondition")!==-1&&(s.push({functionName:"czm_batchTable_boundingSphereCenter3DHigh",componentDatatype:V.FLOAT,componentsPerAttribute:3},{functionName:"czm_batchTable_boundingSphereCenter3DLow",componentDatatype:V.FLOAT,componentsPerAttribute:3},{functionName:"czm_batchTable_boundingSphereCenter2DHigh",componentDatatype:V.FLOAT,componentsPerAttribute:3},{functionName:"czm_batchTable_boundingSphereCenter2DLow",componentDatatype:V.FLOAT,componentsPerAttribute:3},{functionName:"czm_batchTable_boundingSphereRadius",componentDatatype:V.FLOAT,componentsPerAttribute:1}),l.center3DHigh=s.length-5,l.center3DLow=s.length-4,l.center2DHigh=s.length-3,l.center2DLow=s.length-2,l.radius=s.length-1),r.indexOf("offset")!==-1&&(s.push({functionName:"czm_batchTable_offset2D",componentDatatype:V.FLOAT,componentsPerAttribute:3}),d=s.length-1),s.push({functionName:"czm_batchTable_pickColor",componentDatatype:V.UNSIGNED_BYTE,componentsPerAttribute:4,normalize:!0});let _=s.length,I=new __(t,s,o);for(g=0;g<o;++g){let b=i[g];p=b.attributes;for(let z=0;z<a;++z){h=r[z],C=p[h];let M=UL(C.value),N=A[h];I.setBatchedAttribute(g,N,M)}let x={primitive:b.pickPrimitive??e};c(b.id)&&(x.id=b.id);let T=t.createPickId(x);e._pickIds.push(T);let w=T.color,R=kL;R.x=J.floatToByte(w.red),R.y=J.floatToByte(w.green),R.z=J.floatToByte(w.blue),R.w=J.floatToByte(w.alpha),I.setBatchedAttribute(g,_-1,R)}e._batchTable=I,e._batchTableAttributeIndices=A,e._batchTableBoundingSphereAttributeIndices=l,e._batchTableOffsetAttribute2DIndex=d}function RX(e){let t;return Array.isArray(e.values)?t=e.values.slice(0):t=new e.values.constructor(e.values),new rt({componentDatatype:e.componentDatatype,componentsPerAttribute:e.componentsPerAttribute,normalize:e.normalize,values:t})}function vX(e){let t=e.attributes,n=new eo;for(let o in t)t.hasOwnProperty(o)&&c(t[o])&&(n[o]=RX(t[o]));let i;if(c(e.indices)){let o=e.indices;Array.isArray(o)?i=o.slice(0):i=new o.constructor(o)}return new Dt({attributes:n,indices:i,primitiveType:e.primitiveType,boundingSphere:le.clone(e.boundingSphere)})}function MX(e,t){return{geometry:t,attributes:e.attributes,modelMatrix:Q.clone(e.modelMatrix),pickPrimitive:e.pickPrimitive,id:e.id}}var PX=/in\s+vec(?:3|4)\s+(.*)3DHigh;/g;no._modifyShaderPosition=function(e,t,n){let i,o="",r="",a="";for(;(i=PX.exec(t))!==null;){let s=i[1],A=`vec4 czm_compute${s[0].toUpperCase()}${s.substr(1)}()`;A!=="vec4 czm_computePosition()"&&(o+=`${A};
`),c(e.rtcCenter)?(t=t.replace(/in\s+vec(?:3|4)\s+position3DHigh;/g,""),t=t.replace(/in\s+vec(?:3|4)\s+position3DLow;/g,""),o+=`uniform mat4 u_modifiedModelView;
`,r+=`in vec4 position;
`,a+=`${A}
{
    return u_modifiedModelView * position;
}

`,t=t.replace(/czm_modelViewRelativeToEye\s+\*\s+/g,""),t=t.replace(/czm_modelViewProjectionRelativeToEye/g,"czm_projection")):n?a+=`${A}
{
    return czm_translateRelativeToEye(${s}3DHigh, ${s}3DLow);
}

`:(r+=`in vec3 ${s}2DHigh;
in vec3 ${s}2DLow;
`,a+=`${A}
{
    vec4 p;
    if (czm_morphTime == 1.0)
    {
        p = czm_translateRelativeToEye(${s}3DHigh, ${s}3DLow);
    }
    else if (czm_morphTime == 0.0)
    {
        p = czm_translateRelativeToEye(${s}2DHigh.zxy, ${s}2DLow.zxy);
    }
    else
    {
        p = czm_columbusViewMorph(
                czm_translateRelativeToEye(${s}2DHigh.zxy, ${s}2DLow.zxy),
                czm_translateRelativeToEye(${s}3DHigh, ${s}3DLow),
                czm_morphTime);
    }
    return p;
}

`)}return[o,r,t,a].join(`
`)};no._appendShowToShader=function(e,t){return c(e._batchTableAttributeIndices.show)?`${It.replaceMain(t,"czm_non_show_main")}
void main() 
{ 
    czm_non_show_main(); 
    gl_Position *= czm_batchTable_show(batchId); 
}`:t};no._updateColorAttribute=function(e,t,n){if(!c(e._batchTableAttributeIndices.color)&&!c(e._batchTableAttributeIndices.depthFailColor)||t.search(/in\s+vec4\s+color;/g)===-1)return t;let i=t;return i=i.replace(/in\s+vec4\s+color;/g,""),n?i=i.replace(/(\b)color(\b)/g,"$1czm_batchTable_depthFailColor(batchId)$2"):i=i.replace(/(\b)color(\b)/g,"$1czm_batchTable_color(batchId)$2"),i};function RL(e){return`${It.replaceMain(e,"czm_non_pick_main")}
out vec4 v_pickColor; 
void main() 
{ 
    czm_non_pick_main(); 
    v_pickColor = czm_batchTable_pickColor(batchId); 
}`}function vL(e){return`in vec4 v_pickColor;
${e}`}no._updatePickColorAttribute=function(e){let t=e.replace(/in\s+vec4\s+pickColor;/g,"");return t=t.replace(/(\b)pickColor(\b)/g,"$1czm_batchTable_pickColor(batchId)$2"),t};no._appendOffsetToShader=function(e,t){if(!c(e._batchTableAttributeIndices.offset))return t;let n=`in float batchId;
`;n+="in float applyOffset;";let i=t.replace(/in\s+float\s+batchId;/g,n),o=`vec4 $1 = czm_computePosition();
`;return o+=`    if (czm_sceneMode == czm_sceneMode3D)
`,o+=`    {
`,o+="        $1 = $1 + vec4(czm_batchTable_offset(batchId) * applyOffset, 0.0);",o+=`    }
`,o+=`    else
`,o+=`    {
`,o+="        $1 = $1 + vec4(czm_batchTable_offset2D(batchId) * applyOffset, 0.0);",o+=`    }
`,i=i.replace(/vec4\s+([A-Za-z0-9_]+)\s+=\s+czm_computePosition\(\);/g,o),i};no._appendDistanceDisplayConditionToShader=function(e,t,n){if(!c(e._batchTableAttributeIndices.distanceDisplayCondition))return t;let i=It.replaceMain(t,"czm_non_distanceDisplayCondition_main"),o=`void main() 
{ 
    czm_non_distanceDisplayCondition_main(); 
    vec2 distanceDisplayCondition = czm_batchTable_distanceDisplayCondition(batchId);
    vec3 boundingSphereCenter3DHigh = czm_batchTable_boundingSphereCenter3DHigh(batchId);
    vec3 boundingSphereCenter3DLow = czm_batchTable_boundingSphereCenter3DLow(batchId);
    float boundingSphereRadius = czm_batchTable_boundingSphereRadius(batchId);
`;return n?o+=`    vec4 centerRTE = czm_translateRelativeToEye(boundingSphereCenter3DHigh, boundingSphereCenter3DLow);
`:o+=`    vec3 boundingSphereCenter2DHigh = czm_batchTable_boundingSphereCenter2DHigh(batchId);
    vec3 boundingSphereCenter2DLow = czm_batchTable_boundingSphereCenter2DLow(batchId);
    vec4 centerRTE;
    if (czm_morphTime == 1.0)
    {
        centerRTE = czm_translateRelativeToEye(boundingSphereCenter3DHigh, boundingSphereCenter3DLow);
    }
    else if (czm_morphTime == 0.0)
    {
        centerRTE = czm_translateRelativeToEye(boundingSphereCenter2DHigh.zxy, boundingSphereCenter2DLow.zxy);
    }
    else
    {
        centerRTE = czm_columbusViewMorph(
                czm_translateRelativeToEye(boundingSphereCenter2DHigh.zxy, boundingSphereCenter2DLow.zxy),
                czm_translateRelativeToEye(boundingSphereCenter3DHigh, boundingSphereCenter3DLow),
                czm_morphTime);
    }
`,o+=`    float radiusSq = boundingSphereRadius * boundingSphereRadius; 
    float distanceSq; 
    if (czm_sceneMode == czm_sceneMode2D) 
    { 
        distanceSq = czm_eyeHeight2D.y - radiusSq; 
    } 
    else 
    { 
        distanceSq = dot(centerRTE.xyz, centerRTE.xyz) - radiusSq; 
    } 
    distanceSq = max(distanceSq, 0.0); 
    float nearSq = distanceDisplayCondition.x * distanceDisplayCondition.x; 
    float farSq = distanceDisplayCondition.y * distanceDisplayCondition.y; 
    float show = (distanceSq >= nearSq && distanceSq <= farSq) ? 1.0 : 0.0; 
    gl_Position *= show; 
}`,`${i}
${o}`};function ML(e,t){if(!e.compressVertices)return t;let n=t.search(/in\s+vec3\s+normal;/g)!==-1,i=t.search(/in\s+vec2\s+st;/g)!==-1;if(!n&&!i)return t;let o=t.search(/in\s+vec3\s+tangent;/g)!==-1,r=t.search(/in\s+vec3\s+bitangent;/g)!==-1,a=i&&n?2:1;a+=o||r?1:0;let s=a>1?`vec${a}`:"float",A="compressedAttributes",l=`in ${s} ${A};`,d="",m="";if(i){d+=`vec2 st;
`;let h=a>1?`${A}.x`:A;m+=`    st = czm_decompressTextureCoordinates(${h});
`}n&&o&&r?(d+=`vec3 normal;
vec3 tangent;
vec3 bitangent;
`,m+=`    czm_octDecode(${A}.${i?"yz":"xy"}, normal, tangent, bitangent);
`):(n&&(d+=`vec3 normal;
`,m+=`    normal = czm_octDecode(${A}${a>1?`.${i?"y":"x"}`:""});
`),o&&(d+=`vec3 tangent;
`,m+=`    tangent = czm_octDecode(${A}.${i&&n?"z":"y"});
`),r&&(d+=`vec3 bitangent;
`,m+=`    bitangent = czm_octDecode(${A}.${i&&n?"z":"y"});
`));let p=t;p=p.replace(/in\s+vec3\s+normal;/g,""),p=p.replace(/in\s+vec2\s+st;/g,""),p=p.replace(/in\s+vec3\s+tangent;/g,""),p=p.replace(/in\s+vec3\s+bitangent;/g,""),p=It.replaceMain(p,"czm_non_compressed_main");let g=`void main() 
{ 
${m}    czm_non_compressed_main(); 
}`;return[l,d,p,g].join(`
`)}function NX(e){let t=It.replaceMain(e,"czm_non_depth_clamp_main");return t+=`void main() {
    czm_non_depth_clamp_main();
    gl_Position = czm_depthClamp(gl_Position);}
`,t}function LX(e){let t=It.replaceMain(e,"czm_non_depth_clamp_main");return t+=`void main() {
    czm_non_depth_clamp_main();
    #if defined(LOG_DEPTH)
        czm_writeLogDepth();
    #else
        czm_writeDepthClamp();
    #endif
}
`,t}function PL(e,t){let n=e.vertexAttributes}function FX(e,t){return function(){return e[t]}}var SB=Math.max(Ut.hardwareConcurrency-1,1),y_,OX=new $i("combineGeometry");function kX(e,t){let n,i,o,r,a=e._instanceIds;if(e._state===Lo.READY){n=Array.isArray(e.geometryInstances)?e.geometryInstances:[e.geometryInstances];let s=e._numberOfInstances=n.length,A=[],l=[];for(o=0;o<s;++o)i=n[o].geometry,a.push(n[o].id),l.push({moduleName:i._workerName,modulePath:i._workerPath,geometry:i});if(!c(y_))for(y_=new Array(SB),o=0;o<SB;o++)y_[o]=new $i("createGeometry");let d;for(l=TL(l,SB),o=0;o<l.length;o++){let m=0,p=l[o],g=p.length;for(r=0;r<g;++r)d=p[r],i=d.geometry,c(i.constructor.pack)&&(d.offset=m,m+=i.constructor.packedLength??i.packedLength);let h;if(m>0){let C=new Float64Array(m);for(h=[C.buffer],r=0;r<g;++r)d=p[r],i=d.geometry,c(i.constructor.pack)&&(i.constructor.pack(i,C,d.offset),d.geometry=C)}A.push(y_[o].scheduleTask({subTasks:l[o]},h))}e._state=Lo.CREATING,Promise.all(A).then(function(m){e._createGeometryResults=m,e._state=Lo.CREATED}).catch(function(m){Lp(e,t,Lo.FAILED,m)})}else if(e._state===Lo.CREATED){let s=[];n=Array.isArray(e.geometryInstances)?e.geometryInstances:[e.geometryInstances];let A=t.scene3DOnly,l=t.mapProjection,d=OX.scheduleTask(I_.packCombineGeometryParameters({createGeometryResults:e._createGeometryResults,instances:n,ellipsoid:l.ellipsoid,projection:l,elementIndexUintSupported:t.context.elementIndexUint,scene3DOnly:A,vertexCacheOptimize:e.vertexCacheOptimize,compressVertices:e.compressVertices,modelMatrix:e.modelMatrix,createPickOffsets:e._createPickOffsets},s),s);e._createGeometryResults=void 0,e._state=Lo.COMBINING,Promise.resolve(d).then(function(m){let p=I_.unpackCombineGeometryResults(m);e._geometries=p.geometries,e._attributeLocations=p.attributeLocations,e.modelMatrix=Q.clone(p.modelMatrix,e.modelMatrix),e._pickOffsets=p.pickOffsets,e._offsetInstanceExtend=p.offsetInstanceExtend,e._instanceBoundingSpheres=p.boundingSpheres,e._instanceBoundingSpheresCV=p.boundingSpheresCV,c(e._geometries)&&e._geometries.length>0?(e._recomputeBoundingSpheres=!0,e._state=Lo.COMBINED):Lp(e,t,Lo.FAILED,void 0)}).catch(function(m){Lp(e,t,Lo.FAILED,m)})}}function UX(e,t){let n=Array.isArray(e.geometryInstances)?e.geometryInstances:[e.geometryInstances],i=e._numberOfInstances=n.length,o=new Array(i),r=e._instanceIds,a,s,A=0;for(s=0;s<i;s++){a=n[s];let p=a.geometry,g;c(p.attributes)&&c(p.primitiveType)?g=vX(p):g=p.constructor.createGeometry(p),o[A++]=MX(a,g),r.push(a.id)}o.length=A;let l=t.scene3DOnly,d=t.mapProjection,m=I_.combineGeometry({instances:o,ellipsoid:d.ellipsoid,projection:d,elementIndexUintSupported:t.context.elementIndexUint,scene3DOnly:l,vertexCacheOptimize:e.vertexCacheOptimize,compressVertices:e.compressVertices,modelMatrix:e.modelMatrix,createPickOffsets:e._createPickOffsets});e._geometries=m.geometries,e._attributeLocations=m.attributeLocations,e.modelMatrix=Q.clone(m.modelMatrix,e.modelMatrix),e._pickOffsets=m.pickOffsets,e._offsetInstanceExtend=m.offsetInstanceExtend,e._instanceBoundingSpheres=m.boundingSpheres,e._instanceBoundingSpheresCV=m.boundingSpheresCV,c(e._geometries)&&e._geometries.length>0?(e._recomputeBoundingSpheres=!0,e._state=Lo.COMBINED):Lp(e,t,Lo.FAILED,void 0)}function zX(e,t){let n=e._batchTableAttributeIndices.offset;if(!e._recomputeBoundingSpheres||!c(n)){e._recomputeBoundingSpheres=!1;return}let i,o=e._offsetInstanceExtend,r=e._instanceBoundingSpheres,a=r.length,s=e._tempBoundingSpheres;if(!c(s)){for(s=new Array(a),i=0;i<a;i++)s[i]=new le;e._tempBoundingSpheres=s}for(i=0;i<a;++i){let C=s[i],_=e._batchTable.getBatchedAttribute(i,n,new f);C=r[i].clone(C),VL(C,_,o[i])}let A=[],l=[],d=[];for(i=0;i<a;++i){let C=s[i];C.center.x-C.radius>0||le.intersectPlane(C,Ze.ORIGIN_ZX_PLANE)!==bt.INTERSECTING?A.push(C):(l.push(C),d.push(C))}let m=A[0],p=d[0],g=l[0];for(i=1;i<A.length;i++)m=le.union(m,A[i]);for(i=1;i<d.length;i++)p=le.union(p,d[i]);for(i=1;i<l.length;i++)g=le.union(g,l[i]);let h=[];for(c(m)&&h.push(m),c(p)&&h.push(p),c(g)&&h.push(g),i=0;i<h.length;i++){let C=h[i].clone(e._boundingSpheres[i]);e._boundingSpheres[i]=C,e._boundingSphereCV[i]=le.projectTo2D(C,t.mapProjection,e._boundingSphereCV[i])}no._updateBoundingVolumes(e,t,e.modelMatrix,!0),e._recomputeBoundingSpheres=!1}var NL=new Cn,zL=new ue,GL=new f,HL=new le;function GX(e,t){if(!c(e._batchTableAttributeIndices.distanceDisplayCondition)||e._batchTableBoundingSpheresUpdated)return;let i=e._batchTableBoundingSphereAttributeIndices,o=i.center3DHigh,r=i.center3DLow,a=i.center2DHigh,s=i.center2DLow,A=i.radius,l=t.mapProjection,d=l.ellipsoid,m=e._batchTable,p=e._instanceBoundingSpheres,g=p.length;for(let h=0;h<g;++h){let C=p[h];if(!c(C))continue;let _=e.modelMatrix;c(_)&&(C=le.transform(C,_,HL));let I=C.center,b=C.radius,x=Cn.fromCartesian(I,NL);if(m.setBatchedAttribute(h,o,x.high),m.setBatchedAttribute(h,r,x.low),!t.scene3DOnly){let T=d.cartesianToCartographic(I,zL),w=l.project(T,GL);x=Cn.fromCartesian(w,NL),m.setBatchedAttribute(h,a,x.high),m.setBatchedAttribute(h,s,x.low)}m.setBatchedAttribute(h,A,b)}e._batchTableBoundingSpheresUpdated=!0}var wB=new f,HX=new f;function LL(e,t){if(!c(e._batchTableAttributeIndices.offset)||e._batchTableOffsetsUpdated||t.scene3DOnly)return;let i=e._batchTableOffsetAttribute2DIndex,o=t.mapProjection,r=o.ellipsoid,a=e._batchTable,s=e._instanceBoundingSpheres,A=s.length;for(let l=0;l<A;++l){let d=s[l];if(!c(d))continue;let m=a.getBatchedAttribute(l,e._batchTableAttributeIndices.offset);if(f.equals(m,f.ZERO)){a.setBatchedAttribute(l,i,f.ZERO);continue}let p=e.modelMatrix;c(p)&&(d=le.transform(d,p,HL));let g=d.center;g=r.scaleToGeodeticSurface(g,HX);let h=r.cartesianToCartographic(g,zL),C=o.project(h,GL),_=f.add(m,g,wB);h=r.cartesianToCartographic(_,h);let I=o.project(h,wB),b=f.subtract(I,C,wB),x=b.x;b.x=b.z,b.z=b.y,b.y=x,a.setBatchedAttribute(l,i,b)}e._batchTableOffsetsUpdated=!0}function VX(e,t){let n=e._attributeLocations,i=e._geometries,o=t.scene3DOnly,r=t.context,a=[],s=i.length;for(let A=0;A<s;++A){let l=i[A];if(a.push(Yi.fromGeometry({context:r,geometry:l,attributeLocations:n,bufferUsage:De.STATIC_DRAW,interleave:e._interleave})),c(e._createBoundingVolumeFunction))e._createBoundingVolumeFunction(t,l);else if(e._boundingSpheres.push(le.clone(l.boundingSphere)),e._boundingSphereWC.push(new le),!o){let d=l.boundingSphereCV.center,m=d.x,p=d.y,g=d.z;d.x=g,d.y=m,d.z=p,e._boundingSphereCV.push(le.clone(l.boundingSphereCV)),e._boundingSphere2D.push(new le),e._boundingSphereMorph.push(new le)}}e._va=a,e._primitiveType=i[0].primitiveType,e.releaseGeometryInstances&&(e.geometryInstances=void 0),e._geometries=void 0,Lp(e,t,Lo.COMPLETE,void 0)}function jX(e,t,n,i){let o=n.getRenderState(),r;i?(r=Re(o,!1),r.cull={enabled:!0,face:or.BACK},e._frontFaceRS=At.fromCache(r),r.cull.face=or.FRONT,e._backFaceRS=At.fromCache(r)):(e._frontFaceRS=At.fromCache(o),e._backFaceRS=e._frontFaceRS),r=Re(o,!1),c(e._depthFailAppearance)&&(r.depthTest.enabled=!1),c(e._depthFailAppearance)&&(o=e._depthFailAppearance.getRenderState(),r=Re(o,!1),r.depthTest.func=ga.GREATER,i?(r.cull={enabled:!0,face:or.BACK},e._frontFaceDepthFailRS=At.fromCache(r),r.cull.face=or.FRONT,e._backFaceDepthFailRS=At.fromCache(r)):(e._frontFaceDepthFailRS=At.fromCache(r),e._backFaceDepthFailRS=e._frontFaceRS))}function YX(e,t,n){let i=t.context,o=e._attributeLocations,r=e._batchTable.getVertexShaderCallback()(n.vertexShaderSource);r=no._appendOffsetToShader(e,r),r=no._appendShowToShader(e,r),r=no._appendDistanceDisplayConditionToShader(e,r,t.scene3DOnly),r=RL(r),r=no._updateColorAttribute(e,r,!1),r=ML(e,r),r=no._modifyShaderPosition(e,r,t.scene3DOnly);let a=n.getFragmentShaderSource();a=vL(a),e._sp=gn.replaceCache({context:i,shaderProgram:e._sp,vertexShaderSource:r,fragmentShaderSource:a,attributeLocations:o}),PL(e._sp,o),c(e._depthFailAppearance)&&(r=e._batchTable.getVertexShaderCallback()(e._depthFailAppearance.vertexShaderSource),r=no._appendShowToShader(e,r),r=no._appendDistanceDisplayConditionToShader(e,r,t.scene3DOnly),r=RL(r),r=no._updateColorAttribute(e,r,!0),r=ML(e,r),r=no._modifyShaderPosition(e,r,t.scene3DOnly),r=NX(r),a=e._depthFailAppearance.getFragmentShaderSource(),a=vL(a),a=LX(a),e._spDepthFail=gn.replaceCache({context:i,shaderProgram:e._spDepthFail,vertexShaderSource:r,fragmentShaderSource:a,attributeLocations:o}),PL(e._spDepthFail,o))}var Np=new Q,FL=new f;function OL(e,t,n,i){let o=c(n)?n._uniforms:void 0,r={},a=t.uniforms;if(c(a))for(let A in a)a.hasOwnProperty(A)&&(r[A]=FX(a,A));let s=dt(r,o);return s=e._batchTable.getUniformMapCallback()(s),c(e.rtcCenter)&&(s.u_modifiedModelView=function(){let A=i.context.uniformState.view;return Q.multiply(A,e._modelMatrix,Np),Q.multiplyByPoint(Np,e.rtcCenter,FL),Q.setTranslation(Np,FL,Np),Np}),s}function WX(e,t,n,i,o,r,a,s){let A=OL(e,t,n,s),l;c(e._depthFailAppearance)&&(l=OL(e,e._depthFailAppearance,e._depthFailAppearance.material,s));let d=i?He.TRANSLUCENT:He.OPAQUE,m=o?2:1;m*=c(e._depthFailAppearance)?2:1,r.length=e._va.length*m;let p=r.length,g=0;for(let h=0;h<p;++h){let C;o&&(C=r[h],c(C)||(C=r[h]=new ft({owner:e,primitiveType:e._primitiveType})),C.vertexArray=e._va[g],C.renderState=e._backFaceRS,C.shaderProgram=e._sp,C.uniformMap=A,C.pass=d,++h),C=r[h],c(C)||(C=r[h]=new ft({owner:e,primitiveType:e._primitiveType})),C.vertexArray=e._va[g],C.renderState=e._frontFaceRS,C.shaderProgram=e._sp,C.uniformMap=A,C.pass=d,c(e._depthFailAppearance)&&(o&&(++h,C=r[h],c(C)||(C=r[h]=new ft({owner:e,primitiveType:e._primitiveType})),C.vertexArray=e._va[g],C.renderState=e._backFaceDepthFailRS,C.shaderProgram=e._spDepthFail,C.uniformMap=l,C.pass=d),++h,C=r[h],c(C)||(C=r[h]=new ft({owner:e,primitiveType:e._primitiveType})),C.vertexArray=e._va[g],C.renderState=e._frontFaceDepthFailRS,C.shaderProgram=e._spDepthFail,C.uniformMap=l,C.pass=d),++g}}no._updateBoundingVolumes=function(e,t,n,i){let o,r,a;if(i||!Q.equals(n,e._modelMatrix))for(Q.clone(n,e._modelMatrix),r=e._boundingSpheres.length,o=0;o<r;++o)a=e._boundingSpheres[o],c(a)&&(e._boundingSphereWC[o]=le.transform(a,n,e._boundingSphereWC[o]),t.scene3DOnly||(e._boundingSphere2D[o]=le.clone(e._boundingSphereCV[o],e._boundingSphere2D[o]),e._boundingSphereMorph[o]=le.union(e._boundingSphereWC[o],e._boundingSphereCV[o])));let s=e.appearance.pixelSize;if(c(s))for(r=e._boundingSpheres.length,o=0;o<r;++o){a=e._boundingSpheres[o];let A=e._boundingSphereWC[o],d=t.camera.getPixelSize(a,t.context.drawingBufferWidth,t.context.drawingBufferHeight)*s;A.radius=a.radius+d}};function qX(e,t,n,i,o,r,a,s){no._updateBoundingVolumes(e,t,o);let A;t.mode===Ee.SCENE3D?A=e._boundingSphereWC:t.mode===Ee.COLUMBUS_VIEW?A=e._boundingSphereCV:t.mode===Ee.SCENE2D&&c(e._boundingSphere2D)?A=e._boundingSphere2D:c(e._boundingSphereMorph)&&(A=e._boundingSphereMorph);let l=t.commandList,d=t.passes;if(d.render||d.pick){let m=e.allowPicking,p=Yo.castShadows(e.shadows),g=Yo.receiveShadows(e.shadows),h=n.length,C=s?2:1;C*=c(e._depthFailAppearance)?2:1;for(let _=0;_<h;++_){let I=Math.floor(_/C),b=n[_];b.modelMatrix=o,b.boundingVolume=A[I],b.cull=r,b.debugShowBoundingVolume=a,b.castShadows=p,b.receiveShadows=g,m?b.pickId="v_pickColor":b.pickId=void 0,l.push(b)}}}no.prototype.update=function(e){if(!c(this.geometryInstances)&&this._va.length===0||c(this.geometryInstances)&&Array.isArray(this.geometryInstances)&&this.geometryInstances.length===0||!c(this.appearance)||e.mode!==Ee.SCENE3D&&e.scene3DOnly||!e.passes.render&&!e.passes.pick)return;if(c(this._error))throw this._error;if(this._state===Lo.FAILED)return;let t=e.context;if(c(this._batchTable)||QX(this,t),this._batchTable.attributes.length>0){if(rn.maximumVertexTextureImageUnits===0)throw new ae("Vertex texture fetch support is required to render primitives with per-instance attributes. The maximum number of vertex texture image units must be greater than zero.");this._batchTable.update(e)}if(this._state!==Lo.COMPLETE&&this._state!==Lo.COMBINED&&(this.asynchronous?kX(this,e):UX(this,e)),this._state===Lo.COMBINED&&(GX(this,e),LL(this,e),VX(this,e)),!this.show||this._state!==Lo.COMPLETE)return;this._batchTableOffsetsUpdated||LL(this,e),this._recomputeBoundingSpheres&&zX(this,e);let n=this.appearance,i=n.material,o=!1,r=!1;this._appearance!==n?(this._appearance=n,this._material=i,o=!0,r=!0):this._material!==i&&(this._material=i,r=!0);let a=this.depthFailAppearance,s=c(a)?a.material:void 0;this._depthFailAppearance!==a?(this._depthFailAppearance=a,this._depthFailMaterial=s,o=!0,r=!0):this._depthFailMaterial!==s&&(this._depthFailMaterial=s,r=!0);let A=this._appearance.isTranslucent();this._translucent!==A&&(this._translucent=A,o=!0),c(this._material)&&this._material.update(t);let l=n.closed&&A;o&&(this._createRenderStatesFunction??jX)(this,t,n,l),r&&(this._createShaderProgramFunction??YX)(this,e,n),(o||r)&&(this._createCommandsFunction??WX)(this,n,i,A,l,this._colorCommands,this._pickCommands,e),(this._updateAndQueueCommandsFunction??qX)(this,e,this._colorCommands,this._pickCommands,this.modelMatrix,this.cull,this.debugShowBoundingVolume,l)};var JX=new le,KX=new le;function VL(e,t,n){if(n===Pr.TOP){let i=le.clone(e,JX),o=le.clone(e,KX);o.center=f.add(o.center,t,o.center),e=le.union(i,o,e)}else n===Pr.ALL&&(e.center=f.add(e.center,t,e.center));return e}function XX(e,t,n){return function(){let i=e.getBatchedAttribute(t,n),o=e.attributes[n],r=o.componentsPerAttribute,a=V.createTypedArray(o.componentDatatype,r);return c(i.constructor.pack)?i.constructor.pack(i,a,0):a[0]=i,a}}function ZX(e,t,n,i,o){return function(r){let a=UL(r);e.setBatchedAttribute(t,n,a),o==="offset"&&(i._recomputeBoundingSpheres=!0,i._batchTableOffsetsUpdated=!1)}}var $X=new f;function e7(e,t,n){t.boundingSphere={get:function(){let i=e._instanceBoundingSpheres[n];if(c(i)){i=i.clone();let o=e.modelMatrix,r=t.offset;c(r)&&VL(i,f.fromArray(r.get(),0,$X),e._offsetInstanceExtend[n]),c(o)&&(i=le.transform(i,o))}return i}},t.boundingSphereCV={get:function(){return e._instanceBoundingSpheresCV[n]}}}function t7(e,t,n){t.pickId={get:function(){return e._pickIds[n]}}}no.prototype.getGeometryInstanceAttributes=function(e){let t=this._perInstanceAttributeCache.get(e);if(c(t))return t;let n=-1,i=this._lastPerInstanceAttributeIndex,o=this._instanceIds,r=o.length;for(let l=0;l<r;++l){let d=(i+l)%r;if(e===o[d]){n=d;break}}if(n===-1)return;let a=this._batchTable,s=this._batchTableAttributeIndices;t={};let A={};for(let l in s)if(s.hasOwnProperty(l)){let d=s[l];A[l]={get:XX(a,n,d),set:ZX(a,n,d,this,l)}}return e7(this,A,n),t7(this,A,n),Object.defineProperties(t,A),this._lastPerInstanceAttributeIndex=n,this._perInstanceAttributeCache.set(e,t),t};no.prototype.isDestroyed=function(){return!1};no.prototype.destroy=function(){let e,t;this._sp=this._sp&&this._sp.destroy(),this._spDepthFail=this._spDepthFail&&this._spDepthFail.destroy();let n=this._va;for(e=n.length,t=0;t<e;++t)n[t].destroy();this._va=void 0;let i=this._pickIds;for(e=i.length,t=0;t<e;++t)i[t].destroy();return this._pickIds=void 0,this._batchTable=this._batchTable&&this._batchTable.destroy(),this._instanceIds=void 0,this._perInstanceAttributeCache=void 0,this._attributeLocations=void 0,me(this)};function Lp(e,t,n,i){e._error=i,e._state=n,t.afterRender.push(function(){e._ready=e._state===Lo.COMPLETE||e._state===Lo.FAILED})}var cn=no;function n7(e){e=e??G.EMPTY_OBJECT,this.componentDatatype=e.componentDatatype,this.componentsPerAttribute=e.componentsPerAttribute,this.normalize=e.normalize??!1,this.value=e.value}var gs=n7;var DB=`#ifdef TEXTURE_COORDINATES
#ifdef SPHERICAL
in vec4 v_sphericalExtents;
#else // SPHERICAL
in vec2 v_inversePlaneExtents;
in vec4 v_westPlane;
in vec4 v_southPlane;
#endif // SPHERICAL
in vec3 v_uvMinAndSphericalLongitudeRotation;
in vec3 v_uMaxAndInverseDistance;
in vec3 v_vMaxAndInverseDistance;
#endif // TEXTURE_COORDINATES

#ifdef PER_INSTANCE_COLOR
in vec4 v_color;
#endif

#ifdef NORMAL_EC
vec3 getEyeCoordinate3FromWindowCoordinate(vec2 fragCoord, float logDepthOrDepth) {
    vec4 eyeCoordinate = czm_windowToEyeCoordinates(fragCoord, logDepthOrDepth);
    return eyeCoordinate.xyz / eyeCoordinate.w;
}

vec3 vectorFromOffset(vec4 eyeCoordinate, vec2 positiveOffset) {
    vec2 glFragCoordXY = gl_FragCoord.xy;
    // Sample depths at both offset and negative offset
    float upOrRightLogDepth = czm_unpackDepth(texture(czm_globeDepthTexture, (glFragCoordXY + positiveOffset) / czm_viewport.zw));
    float downOrLeftLogDepth = czm_unpackDepth(texture(czm_globeDepthTexture, (glFragCoordXY - positiveOffset) / czm_viewport.zw));
    // Explicitly evaluate both paths
    // Necessary for multifrustum and for edges of the screen
    bvec2 upOrRightInBounds = lessThan(glFragCoordXY + positiveOffset, czm_viewport.zw);
    float useUpOrRight = float(upOrRightLogDepth > 0.0 && upOrRightInBounds.x && upOrRightInBounds.y);
    float useDownOrLeft = float(useUpOrRight == 0.0);
    vec3 upOrRightEC = getEyeCoordinate3FromWindowCoordinate(glFragCoordXY + positiveOffset, upOrRightLogDepth);
    vec3 downOrLeftEC = getEyeCoordinate3FromWindowCoordinate(glFragCoordXY - positiveOffset, downOrLeftLogDepth);
    return (upOrRightEC - (eyeCoordinate.xyz / eyeCoordinate.w)) * useUpOrRight + ((eyeCoordinate.xyz / eyeCoordinate.w) - downOrLeftEC) * useDownOrLeft;
}
#endif // NORMAL_EC

void main(void)
{
#ifdef REQUIRES_EC
    float logDepthOrDepth = czm_unpackDepth(texture(czm_globeDepthTexture, gl_FragCoord.xy / czm_viewport.zw));
    vec4 eyeCoordinate = czm_windowToEyeCoordinates(gl_FragCoord.xy, logDepthOrDepth);
#endif

#ifdef REQUIRES_WC
    vec4 worldCoordinate4 = czm_inverseView * eyeCoordinate;
    vec3 worldCoordinate = worldCoordinate4.xyz / worldCoordinate4.w;
#endif

#ifdef TEXTURE_COORDINATES
    vec2 uv;
#ifdef SPHERICAL
    // Treat world coords as a sphere normal for spherical coordinates
    vec2 sphericalLatLong = czm_approximateSphericalCoordinates(worldCoordinate);
    sphericalLatLong.y += v_uvMinAndSphericalLongitudeRotation.z;
    sphericalLatLong.y = czm_branchFreeTernary(sphericalLatLong.y < czm_pi, sphericalLatLong.y, sphericalLatLong.y - czm_twoPi);
    uv.x = (sphericalLatLong.y - v_sphericalExtents.y) * v_sphericalExtents.w;
    uv.y = (sphericalLatLong.x - v_sphericalExtents.x) * v_sphericalExtents.z;
#else // SPHERICAL
    // Unpack planes and transform to eye space
    uv.x = czm_planeDistance(v_westPlane, eyeCoordinate.xyz / eyeCoordinate.w) * v_inversePlaneExtents.x;
    uv.y = czm_planeDistance(v_southPlane, eyeCoordinate.xyz / eyeCoordinate.w) * v_inversePlaneExtents.y;
#endif // SPHERICAL
#endif // TEXTURE_COORDINATES

#ifdef PICK
#ifdef CULL_FRAGMENTS
    // When classifying translucent geometry, logDepthOrDepth == 0.0
    // indicates a region that should not be classified, possibly due to there
    // being opaque pixels there in another buffer.
    // Check for logDepthOrDepth != 0.0 to make sure this should be classified.
    if (0.0 <= uv.x && uv.x <= 1.0 && 0.0 <= uv.y && uv.y <= 1.0 || logDepthOrDepth != 0.0) {
        out_FragColor.a = 1.0; // 0.0 alpha leads to discard from ShaderSource.createPickFragmentShaderSource
        czm_writeDepthClamp();
    }
#else // CULL_FRAGMENTS
        out_FragColor.a = 1.0;
#endif // CULL_FRAGMENTS
#else // PICK

#ifdef CULL_FRAGMENTS
    // When classifying translucent geometry, logDepthOrDepth == 0.0
    // indicates a region that should not be classified, possibly due to there
    // being opaque pixels there in another buffer.
    if (uv.x <= 0.0 || 1.0 <= uv.x || uv.y <= 0.0 || 1.0 <= uv.y || logDepthOrDepth == 0.0) {
        discard;
    }
#endif

#ifdef NORMAL_EC
    // Compute normal by sampling adjacent pixels in 2x2 block in screen space
    vec3 downUp = vectorFromOffset(eyeCoordinate, vec2(0.0, 1.0));
    vec3 leftRight = vectorFromOffset(eyeCoordinate, vec2(1.0, 0.0));
    vec3 normalEC = normalize(cross(leftRight, downUp));
#endif


#ifdef PER_INSTANCE_COLOR

    vec4 color = czm_gammaCorrect(v_color);
#ifdef FLAT
    out_FragColor = color;
#else // FLAT
    czm_materialInput materialInput;
    materialInput.normalEC = normalEC;
    materialInput.positionToEyeEC = -eyeCoordinate.xyz;
    czm_material material = czm_getDefaultMaterial(materialInput);
    material.diffuse = color.rgb;
    material.alpha = color.a;

    out_FragColor = czm_phong(normalize(-eyeCoordinate.xyz), material, czm_lightDirectionEC);
#endif // FLAT

    // Premultiply alpha. Required for classification primitives on translucent globe.
    out_FragColor.rgb *= out_FragColor.a;

#else // PER_INSTANCE_COLOR

    // Material support.
    // USES_ is distinct from REQUIRES_, because some things are dependencies of each other or
    // dependencies for culling but might not actually be used by the material.

    czm_materialInput materialInput;

#ifdef USES_NORMAL_EC
    materialInput.normalEC = normalEC;
#endif

#ifdef USES_POSITION_TO_EYE_EC
    materialInput.positionToEyeEC = -eyeCoordinate.xyz;
#endif

#ifdef USES_TANGENT_TO_EYE
    materialInput.tangentToEyeMatrix = czm_eastNorthUpToEyeCoordinates(worldCoordinate, normalEC);
#endif

#ifdef USES_ST
    // Remap texture coordinates from computed (approximately aligned with cartographic space) to the desired
    // texture coordinate system, which typically forms a tight oriented bounding box around the geometry.
    // Shader is provided a set of reference points for remapping.
    materialInput.st.x = czm_lineDistance(v_uvMinAndSphericalLongitudeRotation.xy, v_uMaxAndInverseDistance.xy, uv) * v_uMaxAndInverseDistance.z;
    materialInput.st.y = czm_lineDistance(v_uvMinAndSphericalLongitudeRotation.xy, v_vMaxAndInverseDistance.xy, uv) * v_vMaxAndInverseDistance.z;
#endif

    czm_material material = czm_getMaterial(materialInput);

#ifdef FLAT
    out_FragColor = vec4(material.diffuse + material.emission, material.alpha);
#else // FLAT
    out_FragColor = czm_phong(normalize(-eyeCoordinate.xyz), material, czm_lightDirectionEC);
#endif // FLAT

    // Premultiply alpha. Required for classification primitives on translucent globe.
    out_FragColor.rgb *= out_FragColor.a;

#endif // PER_INSTANCE_COLOR
    czm_writeDepthClamp();
#endif // PICK
}
`;function Ks(e,t,n){this._projectionExtentDefines={eastMostYhighDefine:"",eastMostYlowDefine:"",westMostYhighDefine:"",westMostYlowDefine:""};let i=new QB;i.requiresTextureCoordinates=e,i.requiresEC=!n.flat;let o=new QB;if(o.requiresTextureCoordinates=e,n instanceof Tn)i.requiresNormalEC=!n.flat;else{let r=`${n.material.shaderSource}
${n.fragmentShaderSource}`;i.normalEC=r.indexOf("materialInput.normalEC")!==-1||r.indexOf("czm_getDefaultMaterial")!==-1,i.positionToEyeEC=r.indexOf("materialInput.positionToEyeEC")!==-1,i.tangentToEyeMatrix=r.indexOf("materialInput.tangentToEyeMatrix")!==-1,i.st=r.indexOf("materialInput.st")!==-1}this._colorShaderDependencies=i,this._pickShaderDependencies=o,this._appearance=n,this._extentsCulling=e,this._planarExtents=t}Ks.prototype.createFragmentShader=function(e){let t=this._appearance,n=this._colorShaderDependencies,i=[];!e&&!this._planarExtents&&i.push("SPHERICAL"),n.requiresEC&&i.push("REQUIRES_EC"),n.requiresWC&&i.push("REQUIRES_WC"),n.requiresTextureCoordinates&&i.push("TEXTURE_COORDINATES"),this._extentsCulling&&i.push("CULL_FRAGMENTS"),n.requiresNormalEC&&i.push("NORMAL_EC"),t instanceof Tn&&i.push("PER_INSTANCE_COLOR"),n.normalEC&&i.push("USES_NORMAL_EC"),n.positionToEyeEC&&i.push("USES_POSITION_TO_EYE_EC"),n.tangentToEyeMatrix&&i.push("USES_TANGENT_TO_EYE"),n.st&&i.push("USES_ST"),t.flat&&i.push("FLAT");let o="";return t instanceof Tn||(o=t.material.shaderSource),new It({defines:i,sources:[o,DB]})};Ks.prototype.createPickFragmentShader=function(e){let t=this._pickShaderDependencies,n=["PICK"];return!e&&!this._planarExtents&&n.push("SPHERICAL"),t.requiresEC&&n.push("REQUIRES_EC"),t.requiresWC&&n.push("REQUIRES_WC"),t.requiresTextureCoordinates&&n.push("TEXTURE_COORDINATES"),this._extentsCulling&&n.push("CULL_FRAGMENTS"),new It({defines:n,sources:[DB],pickColorQualifier:"in"})};Ks.prototype.createVertexShader=function(e,t,n,i){return ZL(this._colorShaderDependencies,this._planarExtents,n,e,t,this._appearance,i,this._projectionExtentDefines)};Ks.prototype.createPickVertexShader=function(e,t,n,i){return ZL(this._pickShaderDependencies,this._planarExtents,n,e,t,void 0,i,this._projectionExtentDefines)};var jL=new f,YL=new ue,WL={high:0,low:0};function ZL(e,t,n,i,o,r,a,s){let A=i.slice();if(s.eastMostYhighDefine===""){let l=YL;l.longitude=S.PI,l.latitude=0,l.height=0;let d=a.project(l,jL),m=Cn.encode(d.x,WL);s.eastMostYhighDefine=`EAST_MOST_X_HIGH ${m.high.toFixed(`${m.high}`.length+1)}`,s.eastMostYlowDefine=`EAST_MOST_X_LOW ${m.low.toFixed(`${m.low}`.length+1)}`;let p=YL;p.longitude=-S.PI,p.latitude=0,p.height=0;let g=a.project(p,jL);m=Cn.encode(g.x,WL),s.westMostYhighDefine=`WEST_MOST_X_HIGH ${m.high.toFixed(`${m.high}`.length+1)}`,s.westMostYlowDefine=`WEST_MOST_X_LOW ${m.low.toFixed(`${m.low}`.length+1)}`}return n&&(A.push(s.eastMostYhighDefine),A.push(s.eastMostYlowDefine),A.push(s.westMostYhighDefine),A.push(s.westMostYlowDefine)),c(r)&&r instanceof Tn&&A.push("PER_INSTANCE_COLOR"),e.requiresTextureCoordinates&&(A.push("TEXTURE_COORDINATES"),t||n||A.push("SPHERICAL"),n&&A.push("COLUMBUS_VIEW_2D")),new It({defines:A,sources:[o]})}function QB(){this._requiresEC=!1,this._requiresWC=!1,this._requiresNormalEC=!1,this._requiresTextureCoordinates=!1,this._usesNormalEC=!1,this._usesPositionToEyeEC=!1,this._usesTangentToEyeMat=!1,this._usesSt=!1}Object.defineProperties(QB.prototype,{requiresEC:{get:function(){return this._requiresEC},set:function(e){this._requiresEC=e||this._requiresEC}},requiresWC:{get:function(){return this._requiresWC},set:function(e){this._requiresWC=e||this._requiresWC,this.requiresEC=this._requiresWC}},requiresNormalEC:{get:function(){return this._requiresNormalEC},set:function(e){this._requiresNormalEC=e||this._requiresNormalEC,this.requiresEC=this._requiresNormalEC}},requiresTextureCoordinates:{get:function(){return this._requiresTextureCoordinates},set:function(e){this._requiresTextureCoordinates=e||this._requiresTextureCoordinates,this.requiresWC=this._requiresTextureCoordinates}},normalEC:{set:function(e){this.requiresNormalEC=e,this._usesNormalEC=e},get:function(){return this._usesNormalEC}},tangentToEyeMatrix:{set:function(e){this.requiresWC=e,this.requiresNormalEC=e,this._usesTangentToEyeMat=e},get:function(){return this._usesTangentToEyeMat}},positionToEyeEC:{set:function(e){this.requiresEC=e,this._usesPositionToEyeEC=e},get:function(){return this._usesPositionToEyeEC}},st:{set:function(e){this.requiresTextureCoordinates=e,this._usesSt=e},get:function(){return this._usesSt}}});function qL(e,t,n){return Math.abs((t.y-e.y)*n.x-(t.x-e.x)*n.y+t.x*e.y-t.y*e.x)/L.distance(t,e)}var i7=[new L,new L,new L,new L];function $L(e,t){let n=i7,i=L.unpack(t,0,n[0]),o=L.unpack(t,2,n[1]),r=L.unpack(t,4,n[2]);e.uMaxVmax=new gs({componentDatatype:V.FLOAT,componentsPerAttribute:4,normalize:!1,value:[o.x,o.y,r.x,r.y]});let a=1/qL(i,o,r),s=1/qL(i,r,o);e.uvMinAndExtents=new gs({componentDatatype:V.FLOAT,componentsPerAttribute:4,normalize:!1,value:[i.x,i.y,a,s]})}var eF=new ue,tF=new f,o7=new f,r7=new f,b_={high:0,low:0};function nF(e,t,n){let i=eF;i.height=0,i.longitude=e.west,i.latitude=e.south;let o=t.project(i,tF);i.latitude=e.north;let r=t.project(i,o7);i.longitude=e.east,i.latitude=e.south;let a=t.project(i,r7),s=[0,0,0,0],A=[0,0,0,0],l=Cn.encode(o.x,b_);s[0]=l.high,A[0]=l.low,l=Cn.encode(o.y,b_),s[1]=l.high,A[1]=l.low,l=Cn.encode(r.y,b_),s[2]=l.high,A[2]=l.low,l=Cn.encode(a.x,b_),s[3]=l.high,A[3]=l.low,n.planes2D_HIGH=new gs({componentDatatype:V.FLOAT,componentsPerAttribute:4,normalize:!1,value:s}),n.planes2D_LOW=new gs({componentDatatype:V.FLOAT,componentsPerAttribute:4,normalize:!1,value:A})}var a7=new Q,s7=new Q,JL=new f,c7=new ue,A7=[new ue,new ue,new ue,new ue,new ue,new ue,new ue,new ue];function l7(e,t,n,i,o,r){let a=de.center(e,c7);a.height=n;let s=ue.toCartesian(a,t,JL),A=sn.eastNorthUpToFixedFrame(s,t,a7),l=Q.inverse(A,s7),d=e.west,m=e.east,p=e.north,g=e.south,h=A7;h[0].latitude=g,h[0].longitude=d,h[1].latitude=p,h[1].longitude=d,h[2].latitude=p,h[2].longitude=m,h[3].latitude=g,h[3].longitude=m;let C=(d+m)*.5,_=(p+g)*.5;h[4].latitude=g,h[4].longitude=C,h[5].latitude=p,h[5].longitude=C,h[6].latitude=_,h[6].longitude=d,h[7].latitude=_,h[7].longitude=m;let I=Number.POSITIVE_INFINITY,b=Number.NEGATIVE_INFINITY,x=Number.POSITIVE_INFINITY,T=Number.NEGATIVE_INFINITY;for(let M=0;M<8;M++){h[M].height=n;let N=ue.toCartesian(h[M],t,JL);Q.multiplyByPoint(l,N,N),N.z=0,I=Math.min(I,N.x),b=Math.max(b,N.x),x=Math.min(x,N.y),T=Math.max(T,N.y)}let w=i;w.x=I,w.y=x,w.z=0,Q.multiplyByPoint(A,w,w);let R=o;R.x=b,R.y=x,R.z=0,Q.multiplyByPoint(A,R,R),f.subtract(R,w,o);let z=r;z.x=I,z.y=T,z.z=0,Q.multiplyByPoint(A,z,z),f.subtract(z,w,r)}var u7=new f,f7=new f,d7=new Cn;Ks.getPlanarTextureCoordinateAttributes=function(e,t,n,i,o){let r=tF,a=u7,s=f7;l7(e,n,o??0,r,a,s);let A={};$L(A,t);let l=Cn.fromCartesian(r,d7);return A.southWest_HIGH=new gs({componentDatatype:V.FLOAT,componentsPerAttribute:3,normalize:!1,value:f.pack(l.high,[0,0,0])}),A.southWest_LOW=new gs({componentDatatype:V.FLOAT,componentsPerAttribute:3,normalize:!1,value:f.pack(l.low,[0,0,0])}),A.eastward=new gs({componentDatatype:V.FLOAT,componentsPerAttribute:3,normalize:!1,value:f.pack(a,[0,0,0])}),A.northward=new gs({componentDatatype:V.FLOAT,componentsPerAttribute:3,normalize:!1,value:f.pack(s,[0,0,0])}),nF(e,i,A),A};var h7=new f;function KL(e,t,n,i){let o=eF;o.latitude=e,o.longitude=t,o.height=0;let r=ue.toCartesian(o,n,h7),a=Math.sqrt(r.x*r.x+r.y*r.y),s=S.fastApproximateAtan2(a,r.z),A=S.fastApproximateAtan2(r.x,r.y);return i.x=s,i.y=A,i}var XL=new L;Ks.getSphericalExtentGeometryInstanceAttributes=function(e,t,n,i){let o=KL(e.south,e.west,n,XL),r=o.x,a=o.y,s=KL(e.north,e.east,n,XL),A=s.x,l=s.y,d=0;a>l&&(d=S.PI-a,a=-S.PI,l+=d),r-=S.EPSILON5,a-=S.EPSILON5,A+=S.EPSILON5,l+=S.EPSILON5;let m=1/(l-a),p=1/(A-r),g={sphericalExtents:new gs({componentDatatype:V.FLOAT,componentsPerAttribute:4,normalize:!1,value:[r,a,p,m]}),longitudeRotation:new gs({componentDatatype:V.FLOAT,componentsPerAttribute:1,normalize:!1,value:[d]})};return $L(g,t),nF(e,i,g),g};Ks.hasAttributesForTextureCoordinatePlanes=function(e){return c(e.southWest_HIGH)&&c(e.southWest_LOW)&&c(e.northward)&&c(e.eastward)&&c(e.planes2D_HIGH)&&c(e.planes2D_LOW)&&c(e.uMaxVmax)&&c(e.uvMinAndExtents)};Ks.hasAttributesForSphericalExtents=function(e){return c(e.sphericalExtents)&&c(e.longitudeRotation)&&c(e.planes2D_HIGH)&&c(e.planes2D_LOW)&&c(e.uMaxVmax)&&c(e.uvMinAndExtents)};function m7(e){return Math.max(e.width,e.height)>Ks.MAX_WIDTH_FOR_PLANAR_EXTENTS}Ks.shouldUseSphericalCoordinates=function(e){return m7(e)};Ks.MAX_WIDTH_FOR_PLANAR_EXTENTS=S.toRadians(1);var Qu=Ks;var p7={NEVER:W.NEVER,LESS:W.LESS,EQUAL:W.EQUAL,LESS_OR_EQUAL:W.LEQUAL,GREATER:W.GREATER,NOT_EQUAL:W.NOTEQUAL,GREATER_OR_EQUAL:W.GEQUAL,ALWAYS:W.ALWAYS},Dn=Object.freeze(p7);var g7={ZERO:W.ZERO,KEEP:W.KEEP,REPLACE:W.REPLACE,INCREMENT:W.INCR,DECREMENT:W.DECR,INVERT:W.INVERT,INCREMENT_WRAP:W.INCR_WRAP,DECREMENT_WRAP:W.DECR_WRAP},nt=Object.freeze(g7);var B_={CESIUM_3D_TILE_MASK:128,SKIP_LOD_MASK:112,SKIP_LOD_BIT_SHIFT:4,CLASSIFICATION_MASK:15};B_.setCesium3DTileBit=function(){return{enabled:!0,frontFunction:Dn.ALWAYS,frontOperation:{fail:nt.KEEP,zFail:nt.KEEP,zPass:nt.REPLACE},backFunction:Dn.ALWAYS,backOperation:{fail:nt.KEEP,zFail:nt.KEEP,zPass:nt.REPLACE},reference:B_.CESIUM_3D_TILE_MASK,mask:B_.CESIUM_3D_TILE_MASK}};var wt=Object.freeze(B_);function td(e){e=e??G.EMPTY_OBJECT;let t=e.geometryInstances;this.geometryInstances=t,this.show=e.show??!0,this.classificationType=e.classificationType??wn.BOTH,this.debugShowBoundingVolume=e.debugShowBoundingVolume??!1,this.debugShowShadowVolume=e.debugShowShadowVolume??!1,this._debugShowShadowVolume=!1,this._extruded=e._extruded??!1,this._uniformMap=e._uniformMap,this._sp=void 0,this._spStencil=void 0,this._spPick=void 0,this._spColor=void 0,this._spPick2D=void 0,this._spColor2D=void 0,this._rsStencilDepthPass=void 0,this._rsStencilDepthPass3DTiles=void 0,this._rsColorPass=void 0,this._rsPickPass=void 0,this._commandsIgnoreShow=[],this._ready=!1,this._primitive=void 0,this._pickPrimitive=e._pickPrimitive,this._hasSphericalExtentsAttribute=!1,this._hasPlanarExtentsAttributes=!1,this._hasPerColorAttribute=!1,this.appearance=e.appearance,this._createBoundingVolumeFunction=e._createBoundingVolumeFunction,this._updateAndQueueCommandsFunction=e._updateAndQueueCommandsFunction,this._usePickOffsets=!1,this._primitiveOptions={geometryInstances:void 0,appearance:void 0,vertexCacheOptimize:e.vertexCacheOptimize??!1,interleave:e.interleave??!1,releaseGeometryInstances:e.releaseGeometryInstances??!0,allowPicking:e.allowPicking??!0,asynchronous:e.asynchronous??!0,compressVertices:e.compressVertices??!0,_createBoundingVolumeFunction:void 0,_createRenderStatesFunction:void 0,_createShaderProgramFunction:void 0,_createCommandsFunction:void 0,_updateAndQueueCommandsFunction:void 0,_createPickOffsets:!0}}Object.defineProperties(td.prototype,{vertexCacheOptimize:{get:function(){return this._primitiveOptions.vertexCacheOptimize}},interleave:{get:function(){return this._primitiveOptions.interleave}},releaseGeometryInstances:{get:function(){return this._primitiveOptions.releaseGeometryInstances}},allowPicking:{get:function(){return this._primitiveOptions.allowPicking}},asynchronous:{get:function(){return this._primitiveOptions.asynchronous}},compressVertices:{get:function(){return this._primitiveOptions.compressVertices}},ready:{get:function(){return this._ready}},_needs2DShader:{get:function(){return this._hasPlanarExtentsAttributes||this._hasSphericalExtentsAttribute}}});td.isSupported=function(e){return e.context.stencilBuffer};function Sh(e,t){let n=t?Dn.EQUAL:Dn.ALWAYS;return{colorMask:{red:!1,green:!1,blue:!1,alpha:!1},stencilTest:{enabled:e,frontFunction:n,frontOperation:{fail:nt.KEEP,zFail:nt.DECREMENT_WRAP,zPass:nt.KEEP},backFunction:n,backOperation:{fail:nt.KEEP,zFail:nt.INCREMENT_WRAP,zPass:nt.KEEP},reference:wt.CESIUM_3D_TILE_MASK,mask:wt.CESIUM_3D_TILE_MASK},stencilMask:wt.CLASSIFICATION_MASK,depthTest:{enabled:!0,func:ga.LESS_OR_EQUAL},depthMask:!1}}function vB(e){return{stencilTest:{enabled:e,frontFunction:Dn.NOT_EQUAL,frontOperation:{fail:nt.ZERO,zFail:nt.ZERO,zPass:nt.ZERO},backFunction:Dn.NOT_EQUAL,backOperation:{fail:nt.ZERO,zFail:nt.ZERO,zPass:nt.ZERO},reference:0,mask:wt.CLASSIFICATION_MASK},stencilMask:wt.CLASSIFICATION_MASK,depthTest:{enabled:!1},depthMask:!1,blending:Pn.PRE_MULTIPLIED_ALPHA_BLEND}}var C7={stencilTest:{enabled:!0,frontFunction:Dn.NOT_EQUAL,frontOperation:{fail:nt.ZERO,zFail:nt.ZERO,zPass:nt.ZERO},backFunction:Dn.NOT_EQUAL,backOperation:{fail:nt.ZERO,zFail:nt.ZERO,zPass:nt.ZERO},reference:0,mask:wt.CLASSIFICATION_MASK},stencilMask:wt.CLASSIFICATION_MASK,depthTest:{enabled:!1},depthMask:!1};function E7(e,t,n,i){if(c(e._rsStencilDepthPass))return;let o=!e.debugShowShadowVolume;e._rsStencilDepthPass=At.fromCache(Sh(o,!1)),e._rsStencilDepthPass3DTiles=At.fromCache(Sh(o,!0)),e._rsColorPass=At.fromCache(vB(o,!1)),e._rsPickPass=At.fromCache(C7)}function _7(e,t){if(!e.compressVertices)return t;if(t.search(/in\s+vec3\s+extrudeDirection;/g)!==-1){let n="compressedAttributes",i=`in vec2 ${n};`,o=`vec3 extrudeDirection;
`,r=`    extrudeDirection = czm_octDecode(${n}, 65535.0);
`,a=t;a=a.replace(/in\s+vec3\s+extrudeDirection;/g,""),a=It.replaceMain(a,"czm_non_compressed_main");let s=`void main() 
{ 
${r}    czm_non_compressed_main(); 
}`;return[i,o,a,s].join(`
`)}}function I7(e,t){let n=t.context,i=e._primitive,o=BL;o=e._primitive._batchTable.getVertexShaderCallback()(o),o=cn._appendDistanceDisplayConditionToShader(i,o),o=cn._modifyShaderPosition(e,o,t.scene3DOnly),o=cn._updateColorAttribute(i,o);let r=e._hasPlanarExtentsAttributes,a=r||e._hasSphericalExtentsAttribute;e._extruded&&(o=_7(i,o));let s=e._extruded?"EXTRUDED_GEOMETRY":"",A=new It({defines:[s],sources:[o]}),l=new It({sources:[Mp]}),d=e._primitive._attributeLocations,m=new Qu(a,r,e.appearance);if(e._spStencil=gn.replaceCache({context:n,shaderProgram:e._spStencil,vertexShaderSource:A,fragmentShaderSource:l,attributeLocations:d}),e._primitive.allowPicking){let h=It.createPickVertexShaderSource(o);h=cn._appendShowToShader(i,h),h=cn._updatePickColorAttribute(h);let C=m.createPickFragmentShader(!1),_=m.createPickVertexShader([s],h,!1,t.mapProjection);if(e._spPick=gn.replaceCache({context:n,shaderProgram:e._spPick,vertexShaderSource:_,fragmentShaderSource:C,attributeLocations:d}),a){let I=n.shaderCache.getDerivedShaderProgram(e._spPick,"2dPick");if(!c(I)){let b=m.createPickFragmentShader(!0),x=m.createPickVertexShader([s],h,!0,t.mapProjection);I=n.shaderCache.createDerivedShaderProgram(e._spPick,"2dPick",{vertexShaderSource:x,fragmentShaderSource:b,attributeLocations:d})}e._spPick2D=I}}else e._spPick=gn.fromCache({context:n,vertexShaderSource:A,fragmentShaderSource:l,attributeLocations:d});o=cn._appendShowToShader(i,o),A=new It({defines:[s],sources:[o]}),e._sp=gn.replaceCache({context:n,shaderProgram:e._sp,vertexShaderSource:A,fragmentShaderSource:l,attributeLocations:d});let p=m.createFragmentShader(!1),g=m.createVertexShader([s],o,!1,t.mapProjection);if(e._spColor=gn.replaceCache({context:n,shaderProgram:e._spColor,vertexShaderSource:g,fragmentShaderSource:p,attributeLocations:d}),a){let h=n.shaderCache.getDerivedShaderProgram(e._spColor,"2dColor");if(!c(h)){let C=m.createFragmentShader(!0),_=m.createVertexShader([s],o,!0,t.mapProjection);h=n.shaderCache.createDerivedShaderProgram(e._spColor,"2dColor",{vertexShaderSource:_,fragmentShaderSource:C,attributeLocations:d})}e._spColor2D=h}}function y7(e,t){let n=e._primitive,i=n._va.length*2;t.length=i;let o,r,a,s=0,A=n._batchTable.getUniformMapCallback()(e._uniformMap),l=e._needs2DShader;for(o=0;o<i;o+=2){let g=n._va[s++];r=t[o],c(r)||(r=t[o]=new ft({owner:e,primitiveType:n._primitiveType})),r.vertexArray=g,r.renderState=e._rsStencilDepthPass,r.shaderProgram=e._sp,r.uniformMap=A,r.pass=He.TERRAIN_CLASSIFICATION,a=ft.shallowClone(r,r.derivedCommands.tileset),a.renderState=e._rsStencilDepthPass3DTiles,a.pass=He.CESIUM_3D_TILE_CLASSIFICATION,r.derivedCommands.tileset=a,r=t[o+1],c(r)||(r=t[o+1]=new ft({owner:e,primitiveType:n._primitiveType})),r.vertexArray=g,r.renderState=e._rsColorPass,r.shaderProgram=e._spColor,r.pass=He.TERRAIN_CLASSIFICATION;let C=e.appearance.material;if(c(C)&&(A=dt(A,C._uniforms)),r.uniformMap=A,a=ft.shallowClone(r,r.derivedCommands.tileset),a.pass=He.CESIUM_3D_TILE_CLASSIFICATION,r.derivedCommands.tileset=a,l){let _=ft.shallowClone(r,r.derivedCommands.appearance2D);_.shaderProgram=e._spColor2D,r.derivedCommands.appearance2D=_,_=ft.shallowClone(a,a.derivedCommands.appearance2D),_.shaderProgram=e._spColor2D,a.derivedCommands.appearance2D=_}}let d=e._commandsIgnoreShow,m=e._spStencil,p=0;i=d.length=i/2;for(let g=0;g<i;++g){let h=d[g]=ft.shallowClone(t[p],d[g]);h.shaderProgram=m,h.pass=He.CESIUM_3D_TILE_CLASSIFICATION_IGNORE_SHOW,p+=2}}function b7(e,t){let n=e._usePickOffsets,i=e._primitive,o=i._va.length*2,r,a=0,s;n&&(r=i._pickOffsets,o=r.length*2),t.length=o;let A,l,d,m=0,p=i._batchTable.getUniformMapCallback()(e._uniformMap),g=e._needs2DShader;for(A=0;A<o;A+=2){let h=i._va[m++];if(n&&(s=r[a++],h=i._va[s.index]),l=t[A],c(l)||(l=t[A]=new ft({owner:e,primitiveType:i._primitiveType,pickOnly:!0})),l.vertexArray=h,l.renderState=e._rsStencilDepthPass,l.shaderProgram=e._sp,l.uniformMap=p,l.pass=He.TERRAIN_CLASSIFICATION,n&&(l.offset=s.offset,l.count=s.count),d=ft.shallowClone(l,l.derivedCommands.tileset),d.renderState=e._rsStencilDepthPass3DTiles,d.pass=He.CESIUM_3D_TILE_CLASSIFICATION,l.derivedCommands.tileset=d,l=t[A+1],c(l)||(l=t[A+1]=new ft({owner:e,primitiveType:i._primitiveType,pickOnly:!0})),l.vertexArray=h,l.renderState=e._rsPickPass,l.shaderProgram=e._spPick,l.uniformMap=p,l.pass=He.TERRAIN_CLASSIFICATION,n&&(l.offset=s.offset,l.count=s.count),d=ft.shallowClone(l,l.derivedCommands.tileset),d.pass=He.CESIUM_3D_TILE_CLASSIFICATION,l.derivedCommands.tileset=d,g){let C=ft.shallowClone(l,l.derivedCommands.pick2D);C.shaderProgram=e._spPick2D,l.derivedCommands.pick2D=C,C=ft.shallowClone(d,d.derivedCommands.pick2D),C.shaderProgram=e._spPick2D,d.derivedCommands.pick2D=C}}}function B7(e,t,n,i,o,r,a){y7(e,r),b7(e,a)}function iF(e,t){return Math.floor(e%t/2)}function RB(e,t,n,i,o,r){e.modelMatrix=n,e.boundingVolume=o,e.cull=i,e.debugShowBoundingVolume=r,t.commandList.push(e)}function oF(e,t,n,i,o){e.modelMatrix=n,e.boundingVolume=o,e.cull=i,t.commandList.push(e)}function x7(e,t,n,i,o,r,a,s){let A=e._primitive;cn._updateBoundingVolumes(A,t,o);let l;t.mode===Ee.SCENE3D?l=A._boundingSphereWC:t.mode===Ee.COLUMBUS_VIEW?l=A._boundingSphereCV:t.mode===Ee.SCENE2D&&c(A._boundingSphere2D)?l=A._boundingSphere2D:c(A._boundingSphereMorph)&&(l=A._boundingSphereMorph);let d=e.classificationType,m=d!==wn.CESIUM_3D_TILE,p=d!==wn.TERRAIN,g=t.passes,h,C,_;if(g.render){let I=n.length;for(h=0;h<I;++h)C=l[iF(h,I)],m&&(_=n[h],RB(_,t,o,r,C,a)),p&&(_=n[h].derivedCommands.tileset,RB(_,t,o,r,C,a));if(t.invertClassification){let b=e._commandsIgnoreShow,x=b.length;for(h=0;h<x;++h)C=l[h],_=b[h],RB(_,t,o,r,C,a)}}if(g.pick){let I=i.length,b=A._pickOffsets;for(h=0;h<I;++h){let x=b[iF(h,I)];C=l[x.index],m&&(_=i[h],oF(_,t,o,r,C)),p&&(_=i[h].derivedCommands.tileset,oF(_,t,o,r,C))}}}td.prototype.update=function(e){if(!c(this._primitive)&&!c(this.geometryInstances))return;let t=this.appearance;c(t)&&c(t.material)&&t.material.update(e.context);let n=this,i=this._primitiveOptions;if(!c(this._primitive)){let o=Array.isArray(this.geometryInstances)?this.geometryInstances:[this.geometryInstances],r=o.length,a,s,A,l=!1,d=!0,m,p=!1,g=!1;for(r>0&&(A=o[0].attributes,p=Qu.hasAttributesForSphericalExtents(A),g=Qu.hasAttributesForTextureCoordinatePlanes(A),m=A.color),a=0;a<r;a++){s=o[a];let C=s.attributes.color;c(C)&&(l=!0),d=d&&c(C)&&In.equals(m,C)}if(!d&&!p&&!g)throw new be("All GeometryInstances must have the same color attribute except via GroundPrimitives");l&&!c(t)&&(t=new Tn({flat:!0}),this.appearance=t),this._usePickOffsets=!p&&!g,this._hasSphericalExtentsAttribute=p,this._hasPlanarExtentsAttributes=g,this._hasPerColorAttribute=l;let h=new Array(r);for(a=0;a<r;++a)s=o[a],h[a]=new tn({geometry:s.geometry,attributes:s.attributes,modelMatrix:s.modelMatrix,id:s.id,pickPrimitive:this._pickPrimitive??n});i.appearance=t,i.geometryInstances=h,c(this._createBoundingVolumeFunction)&&(i._createBoundingVolumeFunction=function(C,_){n._createBoundingVolumeFunction(C,_)}),i._createRenderStatesFunction=function(C,_,I,b){E7(n,_)},i._createShaderProgramFunction=function(C,_,I){I7(n,_)},i._createCommandsFunction=function(C,_,I,b,x,T,w){B7(n,void 0,void 0,!0,!1,T,w)},c(this._updateAndQueueCommandsFunction)?i._updateAndQueueCommandsFunction=function(C,_,I,b,x,T,w,R){n._updateAndQueueCommandsFunction(C,_,I,b,x,T,w,R)}:i._updateAndQueueCommandsFunction=function(C,_,I,b,x,T,w,R){x7(n,_,I,b,x,T,w,R)},this._primitive=new cn(i)}this.debugShowShadowVolume&&!this._debugShowShadowVolume&&this._ready?(this._debugShowShadowVolume=!0,this._rsStencilDepthPass=At.fromCache(Sh(!1,!1)),this._rsStencilDepthPass3DTiles=At.fromCache(Sh(!1,!0)),this._rsColorPass=At.fromCache(vB(!1))):!this.debugShowShadowVolume&&this._debugShowShadowVolume&&(this._debugShowShadowVolume=!1,this._rsStencilDepthPass=At.fromCache(Sh(!0,!1)),this._rsStencilDepthPass3DTiles=At.fromCache(Sh(!0,!0)),this._rsColorPass=At.fromCache(vB(!0))),this._primitive.appearance!==t&&(this._primitive.appearance=t),this._primitive.show=this.show,this._primitive.debugShowBoundingVolume=this.debugShowBoundingVolume,this._primitive.update(e),e.afterRender.push(()=>{c(this._primitive)&&this._primitive.ready&&(this._ready=!0,this.releaseGeometryInstances&&(this.geometryInstances=void 0))})};td.prototype.getGeometryInstanceAttributes=function(e){return this._primitive.getGeometryInstanceAttributes(e)};td.prototype.isDestroyed=function(){return!1};td.prototype.destroy=function(){return this._primitive=this._primitive&&this._primitive.destroy(),this._sp=this._sp&&this._sp.destroy(),this._spPick=this._spPick&&this._spPick.destroy(),this._spColor=this._spColor&&this._spColor.destroy(),this._spPick2D=void 0,this._spColor2D=void 0,me(this)};var MB=td;var T7={u_globeMinimumAltitude:function(){return 55e3}};function Xa(e){e=e??G.EMPTY_OBJECT;let t=e.appearance,n=e.geometryInstances;if(!c(t)&&c(n)){let o=Array.isArray(n)?n:[n],r=o.length;for(let a=0;a<r;a++){let s=o[a].attributes;if(c(s)&&c(s.color)){t=new Tn({flat:!0});break}}}this.appearance=t,this.geometryInstances=e.geometryInstances,this.show=e.show??!0,this.classificationType=e.classificationType??wn.BOTH,this.debugShowBoundingVolume=e.debugShowBoundingVolume??!1,this.debugShowShadowVolume=e.debugShowShadowVolume??!1,this._boundingVolumes=[],this._boundingVolumes2D=[],this._ready=!1,this._primitive=void 0,this._maxHeight=void 0,this._minHeight=void 0,this._maxTerrainHeight=Bo._defaultMaxTerrainHeight,this._minTerrainHeight=Bo._defaultMinTerrainHeight,this._boundingSpheresKeys=[],this._boundingSpheres=[],this._useFragmentCulling=!1,this._zIndex=void 0;let i=this;this._classificationPrimitiveOptions={geometryInstances:void 0,appearance:void 0,vertexCacheOptimize:e.vertexCacheOptimize??!1,interleave:e.interleave??!1,releaseGeometryInstances:e.releaseGeometryInstances??!0,allowPicking:e.allowPicking??!0,asynchronous:e.asynchronous??!0,compressVertices:e.compressVertices??!0,_createBoundingVolumeFunction:void 0,_updateAndQueueCommandsFunction:void 0,_pickPrimitive:i,_extruded:!0,_uniformMap:T7}}Object.defineProperties(Xa.prototype,{vertexCacheOptimize:{get:function(){return this._classificationPrimitiveOptions.vertexCacheOptimize}},interleave:{get:function(){return this._classificationPrimitiveOptions.interleave}},releaseGeometryInstances:{get:function(){return this._classificationPrimitiveOptions.releaseGeometryInstances}},allowPicking:{get:function(){return this._classificationPrimitiveOptions.allowPicking}},asynchronous:{get:function(){return this._classificationPrimitiveOptions.asynchronous}},compressVertices:{get:function(){return this._classificationPrimitiveOptions.compressVertices}},ready:{get:function(){return this._ready}}});Xa.isSupported=MB.isSupported;function rF(e){return function(t,n){let i=n.maximumRadius,o=i/Math.cos(t*.5)-i;return e._maxHeight+o}}function aF(e){return function(t,n){return e._minHeight}}var S7=new f,w7=new f,D7=new f,Q7=new ue,R7=new de;function x_(e,t){let n=e.mapProjection.ellipsoid;if(!c(t.attributes)||!c(t.attributes.position3DHigh))return c(t.rectangle)?t.rectangle:void 0;let i=t.attributes.position3DHigh.values,o=t.attributes.position3DLow.values,r=i.length,a=Number.POSITIVE_INFINITY,s=Number.POSITIVE_INFINITY,A=Number.NEGATIVE_INFINITY,l=Number.NEGATIVE_INFINITY;for(let m=0;m<r;m+=3){let p=f.unpack(i,m,S7),g=f.unpack(o,m,w7),h=f.add(p,g,D7),C=n.cartesianToCartographic(h,Q7),_=C.latitude,I=C.longitude;a=Math.min(a,_),s=Math.min(s,I),A=Math.max(A,_),l=Math.max(l,I)}let d=R7;return d.north=A,d.south=a,d.east=l,d.west=s,d}function v7(e,t,n){let i=Bo.getMinimumMaximumHeights(t,n);e._minTerrainHeight=i.minimumTerrainHeight,e._maxTerrainHeight=i.maximumTerrainHeight}function M7(e,t,n){let i=t.mapProjection.ellipsoid,o=x_(t,n),r=ui.fromRectangle(o,e._minHeight,e._maxHeight,i);if(e._boundingVolumes.push(r),!t.scene3DOnly){let a=t.mapProjection,s=le.fromRectangleWithHeights2D(o,a,e._maxHeight,e._minHeight);f.fromElements(s.center.z,s.center.x,s.center.y,s.center),e._boundingVolumes2D.push(s)}}function PB(e,t){return Math.floor(e%t/2)}function NB(e,t,n,i,o,r,a){let s=e._primitive;n.mode!==Ee.SCENE3D&&t.shaderProgram===s._spColor&&s._needs2DShader&&(t=t.derivedCommands.appearance2D),t.owner=e,t.modelMatrix=i,t.boundingVolume=r,t.cull=o,t.debugShowBoundingVolume=a,n.commandList.push(t)}function sF(e,t,n,i,o,r){let a=e._primitive;n.mode!==Ee.SCENE3D&&t.shaderProgram===a._spPick&&a._needs2DShader&&(t=t.derivedCommands.pick2D),t.owner=e,t.modelMatrix=i,t.boundingVolume=r,t.cull=o,n.commandList.push(t)}function P7(e,t,n,i,o,r,a,s){let A;t.mode===Ee.SCENE3D?A=e._boundingVolumes:A=e._boundingVolumes2D;let l=e.classificationType,d=l!==wn.CESIUM_3D_TILE,m=l!==wn.TERRAIN,p=t.passes,g=e._primitive,h,C,_;if(p.render){let I=n.length;for(h=0;h<I;++h)C=A[PB(h,I)],d&&(_=n[h],NB(e,_,t,o,r,C,a)),m&&(_=n[h].derivedCommands.tileset,NB(e,_,t,o,r,C,a));if(t.invertClassification){let b=g._commandsIgnoreShow,x=b.length;for(h=0;h<x;++h)C=A[h],_=b[h],NB(e,_,t,o,r,C,a)}}if(p.pick){let I=i.length,b;for(e._useFragmentCulling||(b=g._primitive._pickOffsets),h=0;h<I;++h){if(C=A[PB(h,I)],!e._useFragmentCulling){let x=b[PB(h,I)];C=A[x.index]}d&&(_=i[h],sF(e,_,t,o,r,C)),m&&(_=i[h].derivedCommands.tileset,sF(e,_,t,o,r,C))}}}Xa.initializeTerrainHeights=function(){return Bo.initialize()};Xa.prototype.update=function(e){if(!c(this._primitive)&&!c(this.geometryInstances))return;if(!Bo.initialized){Xa.initializeTerrainHeights();return}let t=this,n=this._classificationPrimitiveOptions;if(!c(this._primitive)){let i=e.mapProjection.ellipsoid,o,r,a,s=Array.isArray(this.geometryInstances)?this.geometryInstances:[this.geometryInstances],A=s.length,l=new Array(A),d,m;for(d=0;d<A;++d){o=s[d],r=o.geometry;let C=x_(e,r);c(m)?c(C)&&de.union(m,C,m):m=de.clone(C);let _=o.id;if(c(_)&&c(C)){let I=Bo.getBoundingSphere(C,i);this._boundingSpheresKeys.push(_),this._boundingSpheres.push(I)}a=r.constructor,!c(a)||c(a.createShadowVolume)}v7(this,m,i);let p=e.verticalExaggeration,g=e.verticalExaggerationRelativeHeight;this._minHeight=pa.getHeight(this._minTerrainHeight,p,g),this._maxHeight=pa.getHeight(this._maxTerrainHeight,p,g);let h=Xa._supportsMaterials(e.context);if(this._useFragmentCulling=h,h){let C,_=!0;for(d=0;d<A;++d)if(o=s[d],r=o.geometry,m=x_(e,r),Qu.shouldUseSphericalCoordinates(m)){_=!1;break}for(d=0;d<A;++d){o=s[d],r=o.geometry,a=r.constructor;let I=x_(e,r),b=r.textureCoordinateRotationPoints;_?C=Qu.getPlanarTextureCoordinateAttributes(I,b,i,e.mapProjection,this._maxHeight):C=Qu.getSphericalExtentGeometryInstanceAttributes(I,b,i,e.mapProjection);let x=o.attributes;for(let T in x)x.hasOwnProperty(T)&&(C[T]=x[T]);l[d]=new tn({geometry:a.createShadowVolume(r,aF(this),rF(this)),attributes:C,id:o.id})}}else for(d=0;d<A;++d)o=s[d],r=o.geometry,a=r.constructor,l[d]=new tn({geometry:a.createShadowVolume(r,aF(this),rF(this)),attributes:o.attributes,id:o.id});n.geometryInstances=l,n.appearance=this.appearance,n._createBoundingVolumeFunction=function(C,_){M7(t,C,_)},n._updateAndQueueCommandsFunction=function(C,_,I,b,x,T,w,R){P7(t,_,I,b,x,T,w,R)},this._primitive=new MB(n)}this._primitive.appearance=this.appearance,this._primitive.show=this.show,this._primitive.debugShowShadowVolume=this.debugShowShadowVolume,this._primitive.debugShowBoundingVolume=this.debugShowBoundingVolume,this._primitive.update(e),e.afterRender.push(()=>{!this._ready&&c(this._primitive)&&this._primitive.ready&&(this._ready=!0,this.releaseGeometryInstances&&(this.geometryInstances=void 0))})};Xa.prototype.getBoundingSphere=function(e){let t=this._boundingSpheresKeys.indexOf(e);if(t!==-1)return this._boundingSpheres[t]};Xa.prototype.getGeometryInstanceAttributes=function(e){return this._primitive.getGeometryInstanceAttributes(e)};Xa.prototype.isDestroyed=function(){return!1};Xa.prototype.destroy=function(){return this._primitive=this._primitive&&this._primitive.destroy(),me(this)};Xa._supportsMaterials=function(e){return e.depthTexture};Xa.supportsMaterials=function(e){return Xa._supportsMaterials(e.frameState.context)};var nd=Xa;function wh(){be.throwInstantiationError()}Object.defineProperties(wh.prototype,{isConstant:{get:be.throwInstantiationError},definitionChanged:{get:be.throwInstantiationError}});wh.prototype.getType=be.throwInstantiationError;wh.prototype.getValue=be.throwInstantiationError;wh.prototype.equals=be.throwInstantiationError;var N7=new Ue;wh.getValue=function(e,t,n){let i;return c(e)||(e=Ue.now(N7)),c(t)&&(i=t.getType(e),c(i))?((!c(n)||n.type!==i)&&(n=Ci.fromType(i)),t.getValue(e,n.uniforms),n):((!c(n)||n.type!==Ci.ColorType)&&(n=Ci.fromType(Ci.ColorType)),J.clone(J.WHITE,n.uniforms.color),n)};var cF=wh;function id(e,t,n){this._primitives=t,this._orderedGroundPrimitives=n,this._primitive=void 0,this._outlinePrimitive=void 0,this._geometryUpdater=e,this._options=e._options,this._entity=e._entity,this._material=void 0}id.prototype._isHidden=function(e,t,n){return!e.isShowing||!e.isAvailable(n)||!Pt.getValueOrDefault(t.show,n,!0)};id.prototype._setOptions=be.throwInstantiationError;id.prototype.update=function(e){let t=this._geometryUpdater,n=t._onTerrain,i=this._primitives,o=this._orderedGroundPrimitives;n?o.remove(this._primitive):(i.removeAndDestroy(this._primitive),i.removeAndDestroy(this._outlinePrimitive),this._outlinePrimitive=void 0),this._primitive=void 0;let r=this._entity,a=r[this._geometryUpdater._geometryPropertyName];if(this._setOptions(r,a,e),this._isHidden(r,a,e))return;let s=this._geometryUpdater.shadowsProperty.getValue(e),A=this._options;if(!c(a.fill)||a.fill.getValue(e)){let l=t.fillMaterialProperty,d=l instanceof _A,m,p=t._getIsClosed(A);if(d)m=new Tn({closed:p,flat:n&&!t._supportsMaterialsforEntitiesOnTerrain});else{let g=cF.getValue(e,l,this._material);this._material=g,m=new m_({material:g,translucent:g.isTranslucent(),closed:p})}if(n)A.vertexFormat=Tn.VERTEX_FORMAT,this._primitive=o.add(new nd({geometryInstances:this._geometryUpdater.createFillGeometryInstance(e),appearance:m,asynchronous:!1,shadows:s,classificationType:this._geometryUpdater.classificationTypeProperty.getValue(e)}),Pt.getValueOrUndefined(this._geometryUpdater.zIndex,e));else{A.vertexFormat=m.vertexFormat;let g=this._geometryUpdater.createFillGeometryInstance(e);d&&(m.translucent=g.attributes.color.value[3]!==255),this._primitive=i.add(new cn({geometryInstances:g,appearance:m,asynchronous:!1,shadows:s}))}}if(!n&&c(a.outline)&&a.outline.getValue(e)){let l=this._geometryUpdater.createOutlineGeometryInstance(e),d=Pt.getValueOrDefault(a.outlineWidth,e,1);this._outlinePrimitive=i.add(new cn({geometryInstances:l,appearance:new Tn({flat:!0,translucent:l.attributes.color.value[3]!==255,renderState:{lineWidth:t._scene.clampLineWidth(d)}}),asynchronous:!1,shadows:s}))}};id.prototype.getBoundingSphere=function(e){let t=this._entity,n=this._primitive,i=this._outlinePrimitive,o;return c(n)&&n.show&&n.ready&&(o=n.getGeometryInstanceAttributes(t),c(o)&&c(o.boundingSphere))?(le.clone(o.boundingSphere,e),Tp.DONE):c(i)&&i.show&&i.ready&&(o=i.getGeometryInstanceAttributes(t),c(o)&&c(o.boundingSphere))?(le.clone(o.boundingSphere,e),Tp.DONE):c(n)&&!n.ready||c(i)&&!i.ready?Tp.PENDING:Tp.FAILED};id.prototype.isDestroyed=function(){return!1};id.prototype.destroy=function(){let e=this._primitives,t=this._orderedGroundPrimitives;this._geometryUpdater._onTerrain?t.remove(this._primitive):e.removeAndDestroy(this._primitive),e.removeAndDestroy(this._outlinePrimitive),me(this)};var T_=id;var AF={};function Fp(e,t){c(AF[e])||(AF[e]=!0,console.warn(t??e))}Fp.geometryOutlines="Entity geometry outlines are unsupported on terrain. Outlines will be disabled. To enable outlines, disable geometry terrain clamping by explicitly setting height to 0.";Fp.geometryZIndex="Entity geometry with zIndex are unsupported when height or extrudedHeight are defined.  zIndex will be ignored";Fp.geometryHeightReference="Entity corridor, ellipse, polygon or rectangle with heightReference must also have a defined height.  heightReference will be ignored";Fp.geometryExtrudedHeightReference="Entity corridor, ellipse, polygon or rectangle with extrudedHeightReference must also have a defined extrudedHeight.  extrudedHeightReference will be ignored";var Nn=Fp;var L7={AUTODETECT:0,ENU:1,INERTIAL:2,VELOCITY:3},lF=Object.freeze(L7);var F7={NONE:0,GEODESIC:1,RHUMB:2},ti=Object.freeze(F7);var uF=S.EPSILON10;function O7(e,t,n,i){if(!c(e))return;n=n??!1;let o=c(i),r=e.length;if(r<2)return e;let a,s=e[0],A,l,d=0,m=-1;for(a=1;a<r;++a)A=e[a],t(s,A,uF)?(c(l)||(l=e.slice(0,a),d=a-1,m=0),o&&i.push(a)):(c(l)&&(l.push(A),d=a,o&&(m=i.length)),s=A);return n&&t(e[0],e[r-1],uF)&&(o&&(c(l)?i.splice(m,0,d):i.push(r-1)),c(l)?l.length-=1:l=e.slice(0,-1)),c(l)?l:e}var Jr=O7;function k7(e){let t=e._uSquared,n=e._ellipsoid.maximumRadius,i=e._ellipsoid.minimumRadius,o=(n-i)/n,r=Math.cos(e._startHeading),a=Math.sin(e._startHeading),s=(1-o)*Math.tan(e._start.latitude),A=1/Math.sqrt(1+s*s),l=A*s,d=Math.atan2(s,r),m=A*a,p=m*m,g=1-p,h=Math.sqrt(g),C=t/4,_=C*C,I=_*C,b=_*_,x=1+C-3*_/4+5*I/4-175*b/64,T=1-C+15*_/8-35*I/8,w=1-3*C+35*_/4,R=1-5*C,z=x*d-T*Math.sin(2*d)*C/2-w*Math.sin(4*d)*_/16-R*Math.sin(6*d)*I/48-Math.sin(8*d)*5*b/512,M=e._constants;M.a=n,M.b=i,M.f=o,M.cosineHeading=r,M.sineHeading=a,M.tanU=s,M.cosineU=A,M.sineU=l,M.sigma=d,M.sineAlpha=m,M.sineSquaredAlpha=p,M.cosineSquaredAlpha=g,M.cosineAlpha=h,M.u2Over4=C,M.u4Over16=_,M.u6Over64=I,M.u8Over256=b,M.a0=x,M.a1=T,M.a2=w,M.a3=R,M.distanceRatio=z}function U7(e,t){return e*t*(4+e*(4-3*t))/16}function fF(e,t,n,i,o,r,a){let s=U7(e,n);return(1-s)*e*t*(i+s*o*(a+s*r*(2*a*a-1)))}function z7(e,t,n,i,o,r,a){let s=(t-n)/t,A=r-i,l=Math.atan((1-s)*Math.tan(o)),d=Math.atan((1-s)*Math.tan(a)),m=Math.cos(l),p=Math.sin(l),g=Math.cos(d),h=Math.sin(d),C=m*g,_=m*h,I=p*h,b=p*g,x=A,T=S.TWO_PI,w=Math.cos(x),R=Math.sin(x),z,M,N,O,u;do{w=Math.cos(x),R=Math.sin(x);let k=_-b*w;N=Math.sqrt(g*g*R*R+k*k),M=I+C*w,z=Math.atan2(N,M);let j;N===0?(j=0,O=1):(j=C*R/N,O=1-j*j),T=x,u=M-2*I/O,isFinite(u)||(u=0),x=A+fF(s,j,O,z,N,M,u)}while(Math.abs(x-T)>S.EPSILON12);let E=O*(t*t-n*n)/(n*n),y=1+E*(4096+E*(E*(320-175*E)-768))/16384,B=E*(256+E*(E*(74-47*E)-128))/1024,D=u*u,v=B*N*(u+B*(M*(2*D-1)-B*u*(4*N*N-3)*(4*D-3)/6)/4),F=n*y*(z-v),P=Math.atan2(g*R,_-b*w),U=Math.atan2(m*R,_*w-b);e._distance=F,e._startHeading=P,e._endHeading=U,e._uSquared=E}var G7=new f,LB=new f;function dF(e,t,n,i){let o=f.normalize(i.cartographicToCartesian(t,LB),G7),r=f.normalize(i.cartographicToCartesian(n,LB),LB);z7(e,i.maximumRadius,i.minimumRadius,t.longitude,t.latitude,n.longitude,n.latitude),e._start=ue.clone(t,e._start),e._end=ue.clone(n,e._end),e._start.height=0,e._end.height=0,k7(e)}function Op(e,t,n){let i=n??pe.default;this._ellipsoid=i,this._start=new ue,this._end=new ue,this._constants={},this._startHeading=void 0,this._endHeading=void 0,this._distance=void 0,this._uSquared=void 0,c(e)&&c(t)&&dF(this,e,t,i)}Object.defineProperties(Op.prototype,{ellipsoid:{get:function(){return this._ellipsoid}},surfaceDistance:{get:function(){return this._distance}},start:{get:function(){return this._start}},end:{get:function(){return this._end}},startHeading:{get:function(){return this._startHeading}},endHeading:{get:function(){return this._endHeading}}});Op.prototype.setEndPoints=function(e,t){dF(this,e,t,this._ellipsoid)};Op.prototype.interpolateUsingFraction=function(e,t){return this.interpolateUsingSurfaceDistance(this._distance*e,t)};Op.prototype.interpolateUsingSurfaceDistance=function(e,t){let n=this._constants,i=n.distanceRatio+e/n.b,o=Math.cos(2*i),r=Math.cos(4*i),a=Math.cos(6*i),s=Math.sin(2*i),A=Math.sin(4*i),l=Math.sin(6*i),d=Math.sin(8*i),m=i*i,p=i*m,g=n.u8Over256,h=n.u2Over4,C=n.u6Over64,_=n.u4Over16,I=2*p*g*o/3+i*(1-h+7*_/4-15*C/4+579*g/64-(_-15*C/4+187*g/16)*o-(5*C/4-115*g/16)*r-29*g*a/16)+(h/2-_+71*C/32-85*g/16)*s+(5*_/16-5*C/4+383*g/96)*A-m*((C-11*g/2)*s+5*g*A/2)+(29*C/96-29*g/16)*l+539*g*d/1536,b=Math.asin(Math.sin(I)*n.cosineAlpha),x=Math.atan(n.a/n.b*Math.tan(b));I=I-n.sigma;let T=Math.cos(2*n.sigma+I),w=Math.sin(I),R=Math.cos(I),z=n.cosineU*R,M=n.sineU*w,O=Math.atan2(w*n.sineHeading,z-M*n.cosineHeading)-fF(n.f,n.sineAlpha,n.cosineSquaredAlpha,I,w,R,T);return c(t)?(t.longitude=this._start.longitude+O,t.latitude=x,t.height=0,t):new ue(this._start.longitude+O,x,0)};var S_=Op;function OB(e,t,n){if(e===0)return t*n;let i=e*e,o=i*i,r=o*i,a=r*i,s=a*i,A=s*i,l=n,d=Math.sin(2*l),m=Math.sin(4*l),p=Math.sin(6*l),g=Math.sin(8*l),h=Math.sin(10*l),C=Math.sin(12*l);return t*((1-i/4-3*o/64-5*r/256-175*a/16384-441*s/65536-4851*A/1048576)*l-(3*i/8+3*o/32+45*r/1024+105*a/4096+2205*s/131072+6237*A/524288)*d+(15*o/256+45*r/1024+525*a/16384+1575*s/65536+155925*A/8388608)*m-(35*r/3072+175*a/12288+3675*s/262144+13475*A/1048576)*p+(315*a/131072+2205*s/524288+43659*A/8388608)*g-(693*s/1310720+6237*A/5242880)*h+1001*A/8388608*C)}function H7(e,t,n){let i=e/n;if(t===0)return i;let o=i*i,r=o*i,a=r*i,s=t,A=s*s,l=A*A,d=l*A,m=d*A,p=m*A,g=p*A,h=Math.sin(2*i),C=Math.cos(2*i),_=Math.sin(4*i),I=Math.cos(4*i),b=Math.sin(6*i),x=Math.cos(6*i),T=Math.sin(8*i),w=Math.cos(8*i),R=Math.sin(10*i),z=Math.cos(10*i),M=Math.sin(12*i);return i+i*A/4+7*i*l/64+15*i*d/256+579*i*m/16384+1515*i*p/65536+16837*i*g/1048576+(3*i*l/16+45*i*d/256-i*(32*o-561)*m/4096-i*(232*o-1677)*p/16384+i*(399985-90560*o+512*a)*g/5242880)*C+(21*i*d/256+483*i*m/4096-i*(224*o-1969)*p/16384-i*(33152*o-112599)*g/1048576)*I+(151*i*m/4096+4681*i*p/65536+1479*i*g/16384-453*r*g/32768)*x+(1097*i*p/65536+42783*i*g/1048576)*w+8011*i*g/1048576*z+(3*A/8+3*l/16+213*d/2048-3*o*d/64+255*m/4096-33*o*m/512+20861*p/524288-33*o*p/512+a*p/1024+28273*g/1048576-471*o*g/8192+9*a*g/4096)*h+(21*l/256+21*d/256+533*m/8192-21*o*m/512+197*p/4096-315*o*p/4096+584039*g/16777216-12517*o*g/131072+7*a*g/2048)*_+(151*d/6144+151*m/4096+5019*p/131072-453*o*p/16384+26965*g/786432-8607*o*g/131072)*b+(1097*m/131072+1097*p/65536+225797*g/10485760-1097*o*g/65536)*T+(8011*p/2621440+8011*g/1048576)*R+293393*g/251658240*M}function Dh(e,t){if(e===0)return Math.log(Math.tan(.5*(S.PI_OVER_TWO+t)));let n=e*Math.sin(t);return Math.log(Math.tan(.5*(S.PI_OVER_TWO+t)))-e/2*Math.log((1+n)/(1-n))}function V7(e,t,n,i,o){let r=Dh(e._ellipticity,n),a=Dh(e._ellipticity,o);return Math.atan2(S.negativePiToPi(i-t),a-r)}function j7(e,t,n,i,o,r,a){let s=e._heading,A=r-i,l=0;if(S.equalsEpsilon(Math.abs(s),S.PI_OVER_TWO,S.EPSILON8))if(t===n)l=t*Math.cos(o)*S.negativePiToPi(A);else{let d=Math.sin(o);l=t*Math.cos(o)*S.negativePiToPi(A)/Math.sqrt(1-e._ellipticitySquared*d*d)}else{let d=OB(e._ellipticity,t,o);l=(OB(e._ellipticity,t,a)-d)/Math.cos(s)}return Math.abs(l)}var Y7=new f,FB=new f;function hF(e,t,n,i){let o=f.normalize(i.cartographicToCartesian(t,FB),Y7),r=f.normalize(i.cartographicToCartesian(n,FB),FB),a=i.maximumRadius,s=i.minimumRadius,A=a*a,l=s*s;e._ellipticitySquared=(A-l)/A,e._ellipticity=Math.sqrt(e._ellipticitySquared),e._start=ue.clone(t,e._start),e._start.height=0,e._end=ue.clone(n,e._end),e._end.height=0,e._heading=V7(e,t.longitude,t.latitude,n.longitude,n.latitude),e._distance=j7(e,i.maximumRadius,i.minimumRadius,t.longitude,t.latitude,n.longitude,n.latitude)}function mF(e,t,n,i,o,r){if(n===0)return ue.clone(e,r);let a=o*o,s,A,l;if(Math.abs(S.PI_OVER_TWO-Math.abs(t))>S.EPSILON8){let d=OB(o,i,e.latitude),m=n*Math.cos(t),p=d+m;if(A=H7(p,o,i),Math.abs(t)<S.EPSILON10)s=S.negativePiToPi(e.longitude);else{let g=Dh(o,e.latitude),h=Dh(o,A);l=Math.tan(t)*(h-g),s=S.negativePiToPi(e.longitude+l)}}else{A=e.latitude;let d;if(o===0)d=i*Math.cos(e.latitude);else{let m=Math.sin(e.latitude);d=i*Math.cos(e.latitude)/Math.sqrt(1-a*m*m)}l=n/d,t>0?s=S.negativePiToPi(e.longitude+l):s=S.negativePiToPi(e.longitude-l)}return c(r)?(r.longitude=s,r.latitude=A,r.height=0,r):new ue(s,A,0)}function pl(e,t,n){let i=n??pe.default;this._ellipsoid=i,this._start=new ue,this._end=new ue,this._heading=void 0,this._distance=void 0,this._ellipticity=void 0,this._ellipticitySquared=void 0,c(e)&&c(t)&&hF(this,e,t,i)}Object.defineProperties(pl.prototype,{ellipsoid:{get:function(){return this._ellipsoid}},surfaceDistance:{get:function(){return this._distance}},start:{get:function(){return this._start}},end:{get:function(){return this._end}},heading:{get:function(){return this._heading}}});pl.fromStartHeadingDistance=function(e,t,n,i,o){let r=i??pe.default,a=r.maximumRadius,s=r.minimumRadius,A=a*a,l=s*s,d=Math.sqrt((A-l)/A);t=S.negativePiToPi(t);let m=mF(e,t,n,r.maximumRadius,d);return!c(o)||c(i)&&!i.equals(o.ellipsoid)?new pl(e,m,r):(o.setEndPoints(e,m),o)};pl.prototype.setEndPoints=function(e,t){hF(this,e,t,this._ellipsoid)};pl.prototype.interpolateUsingFraction=function(e,t){return this.interpolateUsingSurfaceDistance(e*this._distance,t)};pl.prototype.interpolateUsingSurfaceDistance=function(e,t){return mF(this._start,this._heading,e,this._ellipsoid.maximumRadius,this._ellipticity,t)};pl.prototype.findIntersectionWithLongitude=function(e,t){let n=this._ellipticity,i=this._heading,o=Math.abs(i),r=this._start;if(e=S.negativePiToPi(e),S.equalsEpsilon(Math.abs(e),Math.PI,S.EPSILON14)&&(e=S.sign(r.longitude)*Math.PI),c(t)||(t=new ue),Math.abs(S.PI_OVER_TWO-o)<=S.EPSILON8)return t.longitude=e,t.latitude=r.latitude,t.height=0,t;if(S.equalsEpsilon(Math.abs(S.PI_OVER_TWO-o),S.PI_OVER_TWO,S.EPSILON8))return S.equalsEpsilon(e,r.longitude,S.EPSILON12)?void 0:(t.longitude=e,t.latitude=S.PI_OVER_TWO*S.sign(S.PI_OVER_TWO-i),t.height=0,t);let a=r.latitude,s=n*Math.sin(a),A=Math.tan(.5*(S.PI_OVER_TWO+a))*Math.exp((e-r.longitude)/Math.tan(i)),l=(1+s)/(1-s),d=r.latitude,m;do{m=d;let p=n*Math.sin(m),g=(1+p)/(1-p);d=2*Math.atan(A*Math.pow(g/l,n/2))-S.PI_OVER_TWO}while(!S.equalsEpsilon(d,m,S.EPSILON12));return t.longitude=e,t.latitude=d,t.height=0,t};pl.prototype.findIntersectionWithLatitude=function(e,t){let n=this._ellipticity,i=this._heading,o=this._start;if(S.equalsEpsilon(Math.abs(i),S.PI_OVER_TWO,S.EPSILON8))return;let r=Dh(n,o.latitude),a=Dh(n,e),s=Math.tan(i)*(a-r),A=S.negativePiToPi(o.longitude+s);return c(t)?(t.longitude=A,t.latitude=e,t.height=0,t):new ue(A,e,0)};var Za=pl;var YB=[Ai,jn],W7=YB.length,NF=Math.cos(S.toRadians(30)),pF=Math.cos(S.toRadians(150)),LF=0,FF=1e3;function vu(e){e=e??G.EMPTY_OBJECT;let t=e.positions;this.width=e.width??1,this._positions=t,this.granularity=e.granularity??9999,this.loop=e.loop??!1,this.arcType=e.arcType??ti.GEODESIC,this._ellipsoid=pe.default,this._projectionIndex=0,this._workerName="createGroundPolylineGeometry",this._scene3DOnly=!1}Object.defineProperties(vu.prototype,{packedLength:{get:function(){return 1+this._positions.length*3+1+1+1+pe.packedLength+1+1}}});vu.setProjectionAndEllipsoid=function(e,t){let n=0;for(let i=0;i<W7;i++)if(t instanceof YB[i]){n=i;break}e._projectionIndex=n,e._ellipsoid=t.ellipsoid};var q7=new f,gF=new f,CF=new f;function jB(e,t,n,i,o){let r=Ca(i,e,0,q7),a=Ca(i,e,n,gF),s=Ca(i,t,0,CF),A=gl(a,r,gF),l=gl(s,r,CF);return f.cross(l,A,o),f.normalize(o,o)}var J7=new ue,K7=new f,X7=new f,Z7=new f;function kB(e,t,n,i,o,r,a,s,A,l,d){if(o===0)return;let m;r===ti.GEODESIC?m=new S_(e,t,a):r===ti.RHUMB&&(m=new Za(e,t,a));let p=m.surfaceDistance;if(p<o)return;let g=jB(e,t,i,a,Z7),h=Math.ceil(p/o),C=p/h,_=C,I=h-1,b=s.length;for(let x=0;x<I;x++){let T=m.interpolateUsingSurfaceDistance(_,J7),w=Ca(a,T,n,K7),R=Ca(a,T,i,X7);f.pack(g,s,b),f.pack(w,A,b),f.pack(R,l,b),d.push(T.latitude),d.push(T.longitude),b+=3,_+=C}}var UB=new ue;function Ca(e,t,n,i){return ue.clone(t,UB),UB.height=n,ue.toCartesian(UB,e,i)}vu.pack=function(e,t,n){let i=n??0,o=e._positions,r=o.length;t[i++]=r;for(let a=0;a<r;++a){let s=o[a];f.pack(s,t,i),i+=3}return t[i++]=e.granularity,t[i++]=e.loop?1:0,t[i++]=e.arcType,pe.pack(e._ellipsoid,t,i),i+=pe.packedLength,t[i++]=e._projectionIndex,t[i++]=e._scene3DOnly?1:0,t};vu.unpack=function(e,t,n){let i=t??0,o=e[i++],r=new Array(o);for(let p=0;p<o;p++)r[p]=f.unpack(e,i),i+=3;let a=e[i++],s=e[i++]===1,A=e[i++],l=pe.unpack(e,i);i+=pe.packedLength;let d=e[i++],m=e[i++]===1;return c(n)||(n=new vu({positions:r})),n._positions=r,n.granularity=a,n.loop=s,n.arcType=A,n._ellipsoid=l,n._projectionIndex=d,n._scene3DOnly=m,n};function gl(e,t,n){return f.subtract(e,t,n),f.normalize(n,n),n}function EF(e,t,n,i){return i=gl(e,t,i),i=f.cross(i,n,i),i=f.normalize(i,i),i=f.cross(n,i,i),i}var $7=new f,eZ=new f,tZ=new f,OF=new f,nZ=0,iZ=-1;function zB(e,t,n,i,o){let r=gl(n,t,OF),a=EF(e,t,r,$7),s=EF(i,t,r,eZ);if(S.equalsEpsilon(f.dot(a,s),iZ,S.EPSILON5))return o=f.cross(r,a,o),o=f.normalize(o,o),o;o=f.add(s,a,o),o=f.normalize(o,o);let A=f.cross(r,o,tZ);return f.dot(s,A)<nZ&&(o=f.negate(o,o)),o}var R_=Ze.fromPointNormal(f.ZERO,f.UNIT_Y),oZ=new f,rZ=new f,aZ=new f,sZ=new f,cZ=new f,w_=new f,D_=new ue,_F=new ue,IF=new ue;vu.createGeometry=function(e){let t=!e._scene3DOnly,n=e.loop,i=e._ellipsoid,o=e.granularity,r=e.arcType,a=new YB[e._projectionIndex](i),s=LF,A=FF,l,d,m=e._positions,p=m.length;p===2&&(n=!1);let g,h,C,_,I=new Za(void 0,void 0,i),b,x,T,w=[m[0]];for(d=0;d<p-1;d++)g=m[d],h=m[d+1],b=en.lineSegmentPlane(g,h,R_,w_),c(b)&&!f.equalsEpsilon(b,g,S.EPSILON7)&&!f.equalsEpsilon(b,h,S.EPSILON7)&&(e.arcType===ti.GEODESIC?w.push(f.clone(b)):e.arcType===ti.RHUMB&&(T=i.cartesianToCartographic(b,D_).longitude,C=i.cartesianToCartographic(g,D_),_=i.cartesianToCartographic(h,_F),I.setEndPoints(C,_),x=I.findIntersectionWithLongitude(T,IF),b=i.cartographicToCartesian(x,w_),c(b)&&!f.equalsEpsilon(b,g,S.EPSILON7)&&!f.equalsEpsilon(b,h,S.EPSILON7)&&w.push(f.clone(b)))),w.push(h);n&&(g=m[p-1],h=m[0],b=en.lineSegmentPlane(g,h,R_,w_),c(b)&&!f.equalsEpsilon(b,g,S.EPSILON7)&&!f.equalsEpsilon(b,h,S.EPSILON7)&&(e.arcType===ti.GEODESIC?w.push(f.clone(b)):e.arcType===ti.RHUMB&&(T=i.cartesianToCartographic(b,D_).longitude,C=i.cartesianToCartographic(g,D_),_=i.cartesianToCartographic(h,_F),I.setEndPoints(C,_),x=I.findIntersectionWithLongitude(T,IF),b=i.cartographicToCartesian(x,w_),c(b)&&!f.equalsEpsilon(b,g,S.EPSILON7)&&!f.equalsEpsilon(b,h,S.EPSILON7)&&w.push(f.clone(b)))));let R=w.length,z=new Array(R);for(d=0;d<R;d++){let q=ue.fromCartesian(w[d],i);q.height=0,z[d]=q}if(z=Jr(z,ue.equalsEpsilon),R=z.length,R<2)return;let M=[],N=[],O=[],u=[],E=oZ,y=rZ,B=aZ,D=sZ,v=cZ,F=z[0],P=z[1],U=z[R-1];for(E=Ca(i,U,s,E),D=Ca(i,P,s,D),y=Ca(i,F,s,y),B=Ca(i,F,A,B),n?v=zB(E,y,B,D,v):v=jB(F,P,A,i,v),f.pack(v,N,0),f.pack(y,O,0),f.pack(B,u,0),M.push(F.latitude),M.push(F.longitude),kB(F,P,s,A,o,r,i,N,O,u,M),d=1;d<R-1;++d){E=f.clone(y,E),y=f.clone(D,y);let q=z[d];Ca(i,q,A,B),Ca(i,z[d+1],s,D),zB(E,y,B,D,v),l=N.length,f.pack(v,N,l),f.pack(y,O,l),f.pack(B,u,l),M.push(q.latitude),M.push(q.longitude),kB(z[d],z[d+1],s,A,o,r,i,N,O,u,M)}let k=z[R-1],j=z[R-2];if(y=Ca(i,k,s,y),B=Ca(i,k,A,B),n){let q=z[0];E=Ca(i,j,s,E),D=Ca(i,q,s,D),v=zB(E,y,B,D,v)}else v=jB(j,k,A,i,v);if(l=N.length,f.pack(v,N,l),f.pack(y,O,l),f.pack(B,u,l),M.push(k.latitude),M.push(k.longitude),n){for(kB(k,F,s,A,o,r,i,N,O,u,M),l=N.length,d=0;d<3;++d)N[l+d]=N[d],O[l+d]=O[d],u[l+d]=u[d];M.push(F.latitude),M.push(F.longitude)}return PZ(n,a,O,u,N,M,t)};var AZ=new f,lZ=new ne,uZ=new gt;function yF(e,t,n,i){let o=gl(n,t,AZ),r=f.dot(o,e);if(r>NF||r<pF){let a=gl(i,n,OF),s=r<pF?S.PI_OVER_TWO:-S.PI_OVER_TWO,A=gt.fromAxisAngle(a,s,uZ),l=ne.fromQuaternion(A,lZ);return ne.multiplyByVector(l,e,e),!0}return!1}var bF=new ue,fZ=new f,BF=new f;function kp(e,t,n,i,o){let r=ue.toCartesian(t,e._ellipsoid,fZ),a=f.add(r,n,BF),s=!1,A=e._ellipsoid,l=A.cartesianToCartographic(a,bF);Math.abs(t.longitude-l.longitude)>S.PI_OVER_TWO&&(s=!0,a=f.subtract(r,n,BF),l=A.cartesianToCartographic(a,bF)),l.height=0;let d=e.project(l,o);return o=f.subtract(d,i,o),o.z=0,o=f.normalize(o,o),s&&f.negate(o,o),o}var dZ=new f,xF=new f;function TF(e,t,n,i,o,r){let a=f.subtract(t,e,dZ);f.normalize(a,a);let s=n-LF,A=f.multiplyByScalar(a,s,xF);f.add(e,A,o);let l=i-FF;A=f.multiplyByScalar(a,l,xF),f.add(t,A,r)}var hZ=new f;function Q_(e,t){let n=Ze.getPointDistance(R_,e),i=Ze.getPointDistance(R_,t),o=hZ;S.equalsEpsilon(n,0,S.EPSILON2)?(o=gl(t,e,o),f.multiplyByScalar(o,S.EPSILON2,o),f.add(e,o,e)):S.equalsEpsilon(i,0,S.EPSILON2)&&(o=gl(e,t,o),f.multiplyByScalar(o,S.EPSILON2,o),f.add(t,o,t))}function mZ(e,t){let n=Math.abs(e.longitude),i=Math.abs(t.longitude);if(S.equalsEpsilon(n,S.PI,S.EPSILON11)){let o=S.sign(t.longitude);return e.longitude=o*(n-S.EPSILON11),1}else if(S.equalsEpsilon(i,S.PI,S.EPSILON11)){let o=S.sign(e.longitude);return t.longitude=o*(i-S.EPSILON11),2}return 0}var kF=new ue,UF=new ue,SF=new f,GB=new f,wF=new f,DF=new f,pZ=new f,QF=new f,gZ=[kF,UF],CZ=new de,EZ=new f,_Z=new f,IZ=new f,yZ=new f,bZ=new f,BZ=new f,HB=new f,VB=new f,xZ=new f,TZ=new f,SZ=new f,RF=new f,wZ=new f,DZ=new f,QZ=new Cn,RZ=new Cn,vF=new f,vZ=new f,MF=new f,MZ=[new le,new le],zF=[0,2,1,0,3,2,0,7,3,0,4,7,0,5,4,0,1,5,5,7,4,5,6,7,5,2,6,5,1,2,3,6,2,3,7,6],PF=zF.length;function PZ(e,t,n,i,o,r,a){let s,A,l=t._ellipsoid,d=n.length/3-1,m=d*8,p=m*4,g=d*36,h=m>65535?new Uint32Array(g):new Uint16Array(g),C=new Float64Array(m*3),_=new Float32Array(p),I=new Float32Array(p),b=new Float32Array(p),x=new Float32Array(p),T=new Float32Array(p),w,R,z,M;a&&(w=new Float32Array(p),R=new Float32Array(p),z=new Float32Array(p),M=new Float32Array(m*2));let N=r.length/2,O=0,u=kF;u.height=0;let E=UF;E.height=0;let y=SF,B=GB;if(a)for(A=0,s=1;s<N;s++)u.latitude=r[A],u.longitude=r[A+1],E.latitude=r[A+2],E.longitude=r[A+3],y=t.project(u,y),B=t.project(E,B),O+=f.distance(y,B),A+=2;let D=i.length/3;B=f.unpack(i,0,B);let v=0;for(A=3,s=1;s<D;s++)y=f.clone(B,y),B=f.unpack(i,A,B),v+=f.distance(y,B),A+=3;let F;A=3;let P=0,U=0,k=0,j=0,q=!1,$=f.unpack(n,0,DF),H=f.unpack(i,0,GB),Z=f.unpack(o,0,QF);if(e){let _e=f.unpack(n,n.length-6,wF);yF(Z,_e,$,H)&&(Z=f.negate(Z,Z))}let ee=0,Ae=0,ge=0;for(s=0;s<d;s++){let _e=f.clone($,wF),ve=f.clone(H,SF),at=f.clone(Z,pZ);q&&(at=f.negate(at,at)),$=f.unpack(n,A,DF),H=f.unpack(i,A,GB),Z=f.unpack(o,A,QF),q=yF(Z,_e,$,H),u.latitude=r[P],u.longitude=r[P+1],E.latitude=r[P+2],E.longitude=r[P+3];let Tt,st,Rn,Lt;if(a){let An=mZ(u,E);Tt=t.project(u,bZ),st=t.project(E,BZ);let vo=gl(st,Tt,vF);vo.y=Math.abs(vo.y),Rn=HB,Lt=VB,An===0||f.dot(vo,f.UNIT_Y)>NF?(Rn=kp(t,u,at,Tt,HB),Lt=kp(t,E,Z,st,VB)):An===1?(Lt=kp(t,E,Z,st,VB),Rn.x=0,Rn.y=S.sign(u.longitude-Math.abs(E.longitude)),Rn.z=0):(Rn=kp(t,u,at,Tt,HB),Lt.x=0,Lt.y=S.sign(u.longitude-E.longitude),Lt.z=0)}let $t=f.distance(ve,H),ci=Cn.fromCartesian(_e,QZ),Ft=f.subtract($,_e,xZ),pi=f.normalize(Ft,RF),Kn=f.subtract(ve,_e,TZ);Kn=f.normalize(Kn,Kn);let lt=f.cross(pi,Kn,RF);lt=f.normalize(lt,lt);let Ct=f.cross(Kn,at,wZ);Ct=f.normalize(Ct,Ct);let yi=f.subtract(H,$,SZ);yi=f.normalize(yi,yi);let et=f.cross(Z,yi,DZ);et=f.normalize(et,et);let Qo=$t/v,Xo=ee/v,Oa=0,Ro,zo,Xn,Zo=0,gi=0;if(a){Oa=f.distance(Tt,st),Ro=Cn.fromCartesian(Tt,RZ),zo=f.subtract(st,Tt,vF),Xn=f.normalize(zo,vZ);let An=Xn.x;Xn.x=Xn.y,Xn.y=-An,Zo=Oa/O,gi=Ae/O}for(F=0;F<8;F++){let An=j+F*4,vo=U+F*2,bi=An+3,hr=F<4?1:-1,kn=F===2||F===3||F===6||F===7?1:-1;f.pack(ci.high,_,An),_[bi]=Ft.x,f.pack(ci.low,I,An),I[bi]=Ft.y,f.pack(Ct,b,An),b[bi]=Ft.z,f.pack(et,x,An),x[bi]=Qo*hr,f.pack(lt,T,An);let Bi=Xo*kn;Bi===0&&kn<0&&(Bi=9),T[bi]=Bi,a&&(w[An]=Ro.high.x,w[An+1]=Ro.high.y,w[An+2]=Ro.low.x,w[An+3]=Ro.low.y,z[An]=-Rn.y,z[An+1]=Rn.x,z[An+2]=Lt.y,z[An+3]=-Lt.x,R[An]=zo.x,R[An+1]=zo.y,R[An+2]=Xn.x,R[An+3]=Xn.y,M[vo]=Zo*hr,Bi=gi*kn,Bi===0&&kn<0&&(Bi=9),M[vo+1]=Bi)}let Bn=IZ,Zn=yZ,ni=EZ,Ji=_Z,Qr=de.fromCartographicArray(gZ,CZ),Eo=Bo.getMinimumMaximumHeights(Qr,l),Aa=Eo.minimumTerrainHeight,Gr=Eo.maximumTerrainHeight;ge+=Math.abs(Aa),ge+=Math.abs(Gr),TF(_e,ve,Aa,Gr,Bn,ni),TF($,H,Aa,Gr,Zn,Ji);let Jt=f.multiplyByScalar(lt,S.EPSILON5,MF);f.add(Bn,Jt,Bn),f.add(Zn,Jt,Zn),f.add(ni,Jt,ni),f.add(Ji,Jt,Ji),Q_(Bn,Zn),Q_(ni,Ji),f.pack(Bn,C,k),f.pack(Zn,C,k+3),f.pack(Ji,C,k+6),f.pack(ni,C,k+9),Jt=f.multiplyByScalar(lt,-2*S.EPSILON5,MF),f.add(Bn,Jt,Bn),f.add(Zn,Jt,Zn),f.add(ni,Jt,ni),f.add(Ji,Jt,Ji),Q_(Bn,Zn),Q_(ni,Ji),f.pack(Bn,C,k+12),f.pack(Zn,C,k+15),f.pack(Ji,C,k+18),f.pack(ni,C,k+21),P+=2,A+=3,U+=16,k+=24,j+=32,ee+=$t,Ae+=Oa}A=0;let ce=0;for(s=0;s<d;s++){for(F=0;F<PF;F++)h[A+F]=zF[F]+ce;ce+=8,A+=PF}let he=MZ;le.fromVertices(n,f.ZERO,3,he[0]),le.fromVertices(i,f.ZERO,3,he[1]);let Ie=le.fromBoundingSpheres(he);Ie.radius+=ge/(d*2);let Ne={position:new rt({componentDatatype:V.DOUBLE,componentsPerAttribute:3,normalize:!1,values:C}),startHiAndForwardOffsetX:Ru(_),startLoAndForwardOffsetY:Ru(I),startNormalAndForwardOffsetZ:Ru(b),endNormalAndTextureCoordinateNormalizationX:Ru(x),rightNormalAndTextureCoordinateNormalizationY:Ru(T)};return a&&(Ne.startHiLo2D=Ru(w),Ne.offsetAndRight2D=Ru(R),Ne.startEndNormals2D=Ru(z),Ne.texcoordNormalization2D=new rt({componentDatatype:V.FLOAT,componentsPerAttribute:2,normalize:!1,values:M})),new Dt({attributes:Ne,indices:h,boundingSphere:Ie})}function Ru(e){return new rt({componentDatatype:V.FLOAT,componentsPerAttribute:4,normalize:!1,values:e})}vu._projectNormal=kp;var Up=vu;var GF=`in vec4 v_startPlaneNormalEcAndHalfWidth;
in vec4 v_endPlaneNormalEcAndBatchId;
in vec4 v_rightPlaneEC; // Technically can compute distance for this here
in vec4 v_endEcAndStartEcX;
in vec4 v_texcoordNormalizationAndStartEcYZ;

#ifdef PER_INSTANCE_COLOR
in vec4 v_color;
#endif

void main(void)
{
    float logDepthOrDepth = czm_branchFreeTernary(czm_sceneMode == czm_sceneMode2D, gl_FragCoord.z, czm_unpackDepth(texture(czm_globeDepthTexture, gl_FragCoord.xy / czm_viewport.zw)));
    vec3 ecStart = vec3(v_endEcAndStartEcX.w, v_texcoordNormalizationAndStartEcYZ.zw);

    // Discard for sky
    if (logDepthOrDepth == 0.0) {
#ifdef DEBUG_SHOW_VOLUME
        out_FragColor = vec4(1.0, 0.0, 0.0, 0.5);
        return;
#else // DEBUG_SHOW_VOLUME
        discard;
#endif // DEBUG_SHOW_VOLUME
    }

    vec4 eyeCoordinate = czm_windowToEyeCoordinates(gl_FragCoord.xy, logDepthOrDepth);
    eyeCoordinate /= eyeCoordinate.w;

    float halfMaxWidth = v_startPlaneNormalEcAndHalfWidth.w * czm_metersPerPixel(eyeCoordinate);
    // Check distance of the eye coordinate against the right-facing plane
    float widthwiseDistance = czm_planeDistance(v_rightPlaneEC, eyeCoordinate.xyz);

    // Check eye coordinate against the mitering planes
    float distanceFromStart = czm_planeDistance(v_startPlaneNormalEcAndHalfWidth.xyz, -dot(ecStart, v_startPlaneNormalEcAndHalfWidth.xyz), eyeCoordinate.xyz);
    float distanceFromEnd = czm_planeDistance(v_endPlaneNormalEcAndBatchId.xyz, -dot(v_endEcAndStartEcX.xyz, v_endPlaneNormalEcAndBatchId.xyz), eyeCoordinate.xyz);

    if (abs(widthwiseDistance) > halfMaxWidth || distanceFromStart < 0.0 || distanceFromEnd < 0.0) {
#ifdef DEBUG_SHOW_VOLUME
        out_FragColor = vec4(1.0, 0.0, 0.0, 0.5);
        return;
#else // DEBUG_SHOW_VOLUME
        discard;
#endif // DEBUG_SHOW_VOLUME
    }

    // Check distance of the eye coordinate against start and end planes with normals in the right plane.
    // For computing unskewed lengthwise texture coordinate.
    // Can also be used for clipping extremely pointy miters, but in practice unnecessary because of miter breaking.

    // aligned plane: cross the right plane normal with miter plane normal, then cross the result with right again to point it more "forward"
    vec3 alignedPlaneNormal;

    // start aligned plane
    alignedPlaneNormal = cross(v_rightPlaneEC.xyz, v_startPlaneNormalEcAndHalfWidth.xyz);
    alignedPlaneNormal = normalize(cross(alignedPlaneNormal, v_rightPlaneEC.xyz));
    distanceFromStart = czm_planeDistance(alignedPlaneNormal, -dot(alignedPlaneNormal, ecStart), eyeCoordinate.xyz);

    // end aligned plane
    alignedPlaneNormal = cross(v_rightPlaneEC.xyz, v_endPlaneNormalEcAndBatchId.xyz);
    alignedPlaneNormal = normalize(cross(alignedPlaneNormal, v_rightPlaneEC.xyz));
    distanceFromEnd = czm_planeDistance(alignedPlaneNormal, -dot(alignedPlaneNormal, v_endEcAndStartEcX.xyz), eyeCoordinate.xyz);

#ifdef PER_INSTANCE_COLOR
    out_FragColor = czm_gammaCorrect(v_color);
#else // PER_INSTANCE_COLOR
    // Clamp - distance to aligned planes may be negative due to mitering,
    // so fragment texture coordinate might be out-of-bounds.
    float s = clamp(distanceFromStart / (distanceFromStart + distanceFromEnd), 0.0, 1.0);
    s = (s * v_texcoordNormalizationAndStartEcYZ.x) + v_texcoordNormalizationAndStartEcYZ.y;
    float t = (widthwiseDistance + halfMaxWidth) / (2.0 * halfMaxWidth);

    czm_materialInput materialInput;

    materialInput.s = s;
    materialInput.st = vec2(s, t);
    materialInput.str = vec3(s, t, 0.0);

    czm_material material = czm_getMaterial(materialInput);
    out_FragColor = vec4(material.diffuse + material.emission, material.alpha);
#endif // PER_INSTANCE_COLOR

    // Premultiply alpha. Required for classification primitives on translucent globe.
    out_FragColor.rgb *= out_FragColor.a;

    czm_writeDepthClamp();
}
`;var HF=`in vec3 v_forwardDirectionEC;
in vec3 v_texcoordNormalizationAndHalfWidth;
in float v_batchId;

#ifdef PER_INSTANCE_COLOR
in vec4 v_color;
#else
in vec2 v_alignedPlaneDistances;
in float v_texcoordT;
#endif

float rayPlaneDistanceUnsafe(vec3 origin, vec3 direction, vec3 planeNormal, float planeDistance) {
    // We don't expect the ray to ever be parallel to the plane
    return (-planeDistance - dot(planeNormal, origin)) / dot(planeNormal, direction);
}

void main(void)
{
    vec4 eyeCoordinate = gl_FragCoord;
    eyeCoordinate /= eyeCoordinate.w;

#ifdef PER_INSTANCE_COLOR
    out_FragColor = czm_gammaCorrect(v_color);
#else // PER_INSTANCE_COLOR
    // Use distances for planes aligned with segment to prevent skew in dashing
    float distanceFromStart = rayPlaneDistanceUnsafe(eyeCoordinate.xyz, -v_forwardDirectionEC, v_forwardDirectionEC.xyz, v_alignedPlaneDistances.x);
    float distanceFromEnd = rayPlaneDistanceUnsafe(eyeCoordinate.xyz, v_forwardDirectionEC, -v_forwardDirectionEC.xyz, v_alignedPlaneDistances.y);

    // Clamp - distance to aligned planes may be negative due to mitering
    distanceFromStart = max(0.0, distanceFromStart);
    distanceFromEnd = max(0.0, distanceFromEnd);

    float s = distanceFromStart / (distanceFromStart + distanceFromEnd);
    s = (s * v_texcoordNormalizationAndHalfWidth.x) + v_texcoordNormalizationAndHalfWidth.y;

    czm_materialInput materialInput;

    materialInput.s = s;
    materialInput.st = vec2(s, v_texcoordT);
    materialInput.str = vec3(s, v_texcoordT, 0.0);

    czm_material material = czm_getMaterial(materialInput);
    out_FragColor = vec4(material.diffuse + material.emission, material.alpha);
#endif // PER_INSTANCE_COLOR
}
`;var VF=`in vec3 position3DHigh;
in vec3 position3DLow;

in vec4 startHiAndForwardOffsetX;
in vec4 startLoAndForwardOffsetY;
in vec4 startNormalAndForwardOffsetZ;
in vec4 endNormalAndTextureCoordinateNormalizationX;
in vec4 rightNormalAndTextureCoordinateNormalizationY;
in vec4 startHiLo2D;
in vec4 offsetAndRight2D;
in vec4 startEndNormals2D;
in vec2 texcoordNormalization2D;

in float batchId;

out vec3 v_forwardDirectionEC;
out vec3 v_texcoordNormalizationAndHalfWidth;
out float v_batchId;

// For materials
#ifdef WIDTH_VARYING
out float v_width;
#endif
#ifdef ANGLE_VARYING
out float v_polylineAngle;
#endif

#ifdef PER_INSTANCE_COLOR
out vec4 v_color;
#else
out vec2 v_alignedPlaneDistances;
out float v_texcoordT;
#endif

// Morphing planes using SLERP or NLERP doesn't seem to work, so instead draw the material directly on the shadow volume.
// Morph views are from very far away and aren't meant to be used precisely, so this should be sufficient.
void main()
{
    v_batchId = batchId;

    // Start position
    vec4 posRelativeToEye2D = czm_translateRelativeToEye(vec3(0.0, startHiLo2D.xy), vec3(0.0, startHiLo2D.zw));
    vec4 posRelativeToEye3D = czm_translateRelativeToEye(startHiAndForwardOffsetX.xyz, startLoAndForwardOffsetY.xyz);
    vec4 posRelativeToEye = czm_columbusViewMorph(posRelativeToEye2D, posRelativeToEye3D, czm_morphTime);
    vec3 posEc2D = (czm_modelViewRelativeToEye * posRelativeToEye2D).xyz;
    vec3 posEc3D = (czm_modelViewRelativeToEye * posRelativeToEye3D).xyz;
    vec3 startEC = (czm_modelViewRelativeToEye * posRelativeToEye).xyz;

    // Start plane
    vec4 startPlane2D;
    vec4 startPlane3D;
    startPlane2D.xyz = czm_normal * vec3(0.0, startEndNormals2D.xy);
    startPlane3D.xyz = czm_normal * startNormalAndForwardOffsetZ.xyz;
    startPlane2D.w = -dot(startPlane2D.xyz, posEc2D);
    startPlane3D.w = -dot(startPlane3D.xyz, posEc3D);

    // Right plane
    vec4 rightPlane2D;
    vec4 rightPlane3D;
    rightPlane2D.xyz = czm_normal * vec3(0.0, offsetAndRight2D.zw);
    rightPlane3D.xyz = czm_normal * rightNormalAndTextureCoordinateNormalizationY.xyz;
    rightPlane2D.w = -dot(rightPlane2D.xyz, posEc2D);
    rightPlane3D.w = -dot(rightPlane3D.xyz, posEc3D);

    // End position
    posRelativeToEye2D = posRelativeToEye2D + vec4(0.0, offsetAndRight2D.xy, 0.0);
    posRelativeToEye3D = posRelativeToEye3D + vec4(startHiAndForwardOffsetX.w, startLoAndForwardOffsetY.w, startNormalAndForwardOffsetZ.w, 0.0);
    posRelativeToEye = czm_columbusViewMorph(posRelativeToEye2D, posRelativeToEye3D, czm_morphTime);
    posEc2D = (czm_modelViewRelativeToEye * posRelativeToEye2D).xyz;
    posEc3D = (czm_modelViewRelativeToEye * posRelativeToEye3D).xyz;
    vec3 endEC = (czm_modelViewRelativeToEye * posRelativeToEye).xyz;
    vec3 forwardEc3D = czm_normal * normalize(vec3(startHiAndForwardOffsetX.w, startLoAndForwardOffsetY.w, startNormalAndForwardOffsetZ.w));
    vec3 forwardEc2D = czm_normal * normalize(vec3(0.0, offsetAndRight2D.xy));

    // End plane
    vec4 endPlane2D;
    vec4 endPlane3D;
    endPlane2D.xyz = czm_normal * vec3(0.0, startEndNormals2D.zw);
    endPlane3D.xyz = czm_normal * endNormalAndTextureCoordinateNormalizationX.xyz;
    endPlane2D.w = -dot(endPlane2D.xyz, posEc2D);
    endPlane3D.w = -dot(endPlane3D.xyz, posEc3D);

    // Forward direction
    v_forwardDirectionEC = normalize(endEC - startEC);

    vec2 cleanTexcoordNormalization2D;
    cleanTexcoordNormalization2D.x = abs(texcoordNormalization2D.x);
    cleanTexcoordNormalization2D.y = czm_branchFreeTernary(texcoordNormalization2D.y > 1.0, 0.0, abs(texcoordNormalization2D.y));
    vec2 cleanTexcoordNormalization3D;
    cleanTexcoordNormalization3D.x = abs(endNormalAndTextureCoordinateNormalizationX.w);
    cleanTexcoordNormalization3D.y = rightNormalAndTextureCoordinateNormalizationY.w;
    cleanTexcoordNormalization3D.y = czm_branchFreeTernary(cleanTexcoordNormalization3D.y > 1.0, 0.0, abs(cleanTexcoordNormalization3D.y));

    v_texcoordNormalizationAndHalfWidth.xy = mix(cleanTexcoordNormalization2D, cleanTexcoordNormalization3D, czm_morphTime);

#ifdef PER_INSTANCE_COLOR
    v_color = czm_batchTable_color(batchId);
#else // PER_INSTANCE_COLOR
    // For computing texture coordinates

    v_alignedPlaneDistances.x = -dot(v_forwardDirectionEC, startEC);
    v_alignedPlaneDistances.y = -dot(-v_forwardDirectionEC, endEC);
#endif // PER_INSTANCE_COLOR

#ifdef WIDTH_VARYING
    float width = czm_batchTable_width(batchId);
    float halfWidth = width * 0.5;
    v_width = width;
    v_texcoordNormalizationAndHalfWidth.z = halfWidth;
#else
    float halfWidth = 0.5 * czm_batchTable_width(batchId);
    v_texcoordNormalizationAndHalfWidth.z = halfWidth;
#endif

    // Compute a normal along which to "push" the position out, extending the miter depending on view distance.
    // Position has already been "pushed" by unit length along miter normal, and miter normals are encoded in the planes.
    // Decode the normal to use at this specific vertex, push the position back, and then push to where it needs to be.
    // Since this is morphing, compute both 3D and 2D positions and then blend.

    // ****** 3D ******
    // Check distance to the end plane and start plane, pick the plane that is closer
    vec4 positionEc3D = czm_modelViewRelativeToEye * czm_translateRelativeToEye(position3DHigh, position3DLow); // w = 1.0, see czm_computePosition
    float absStartPlaneDistance = abs(czm_planeDistance(startPlane3D, positionEc3D.xyz));
    float absEndPlaneDistance = abs(czm_planeDistance(endPlane3D, positionEc3D.xyz));
    vec3 planeDirection = czm_branchFreeTernary(absStartPlaneDistance < absEndPlaneDistance, startPlane3D.xyz, endPlane3D.xyz);
    vec3 upOrDown = normalize(cross(rightPlane3D.xyz, planeDirection)); // Points "up" for start plane, "down" at end plane.
    vec3 normalEC = normalize(cross(planeDirection, upOrDown));         // In practice, the opposite seems to work too.

    // Nudge the top vertex upwards to prevent flickering
    vec3 geodeticSurfaceNormal = normalize(cross(normalEC, forwardEc3D));
    geodeticSurfaceNormal *= float(0.0 <= rightNormalAndTextureCoordinateNormalizationY.w && rightNormalAndTextureCoordinateNormalizationY.w <= 1.0);
    geodeticSurfaceNormal *= MAX_TERRAIN_HEIGHT;
    positionEc3D.xyz += geodeticSurfaceNormal;

    // Determine if this vertex is on the "left" or "right"
    normalEC *= sign(endNormalAndTextureCoordinateNormalizationX.w);

    // A "perfect" implementation would push along normals according to the angle against forward.
    // In practice, just pushing the normal out by halfWidth is sufficient for morph views.
    positionEc3D.xyz += halfWidth * max(0.0, czm_metersPerPixel(positionEc3D)) * normalEC; // prevent artifacts when czm_metersPerPixel is negative (behind camera)

    // ****** 2D ******
    // Check distance to the end plane and start plane, pick the plane that is closer
    vec4 positionEc2D = czm_modelViewRelativeToEye * czm_translateRelativeToEye(position2DHigh.zxy, position2DLow.zxy); // w = 1.0, see czm_computePosition
    absStartPlaneDistance = abs(czm_planeDistance(startPlane2D, positionEc2D.xyz));
    absEndPlaneDistance = abs(czm_planeDistance(endPlane2D, positionEc2D.xyz));
    planeDirection = czm_branchFreeTernary(absStartPlaneDistance < absEndPlaneDistance, startPlane2D.xyz, endPlane2D.xyz);
    upOrDown = normalize(cross(rightPlane2D.xyz, planeDirection)); // Points "up" for start plane, "down" at end plane.
    normalEC = normalize(cross(planeDirection, upOrDown));         // In practice, the opposite seems to work too.

    // Nudge the top vertex upwards to prevent flickering
    geodeticSurfaceNormal = normalize(cross(normalEC, forwardEc2D));
    geodeticSurfaceNormal *= float(0.0 <= texcoordNormalization2D.y && texcoordNormalization2D.y <= 1.0);
    geodeticSurfaceNormal *= MAX_TERRAIN_HEIGHT;
    positionEc2D.xyz += geodeticSurfaceNormal;

    // Determine if this vertex is on the "left" or "right"
    normalEC *= sign(texcoordNormalization2D.x);
#ifndef PER_INSTANCE_COLOR
    // Use vertex's sidedness to compute its texture coordinate.
    v_texcoordT = clamp(sign(texcoordNormalization2D.x), 0.0, 1.0);
#endif

    // A "perfect" implementation would push along normals according to the angle against forward.
    // In practice, just pushing the normal out by halfWidth is sufficient for morph views.
    positionEc2D.xyz += halfWidth * max(0.0, czm_metersPerPixel(positionEc2D)) * normalEC; // prevent artifacts when czm_metersPerPixel is negative (behind camera)

    // Blend for actual position
    gl_Position = czm_projection * mix(positionEc2D, positionEc3D, czm_morphTime);

#ifdef ANGLE_VARYING
    // Approximate relative screen space direction of the line.
    vec2 approxLineDirection = normalize(vec2(v_forwardDirectionEC.x, -v_forwardDirectionEC.y));
    approxLineDirection.y = czm_branchFreeTernary(approxLineDirection.x == 0.0 && approxLineDirection.y == 0.0, -1.0, approxLineDirection.y);
    v_polylineAngle = czm_fastApproximateAtan(approxLineDirection.x, approxLineDirection.y);
#endif
}
`;var jF=`in vec3 position3DHigh;
in vec3 position3DLow;

// In 2D and in 3D, texture coordinate normalization component signs encodes:
// * X sign - sidedness relative to right plane
// * Y sign - is negative OR magnitude is greater than 1.0 if vertex is on bottom of volume
#ifndef COLUMBUS_VIEW_2D
in vec4 startHiAndForwardOffsetX;
in vec4 startLoAndForwardOffsetY;
in vec4 startNormalAndForwardOffsetZ;
in vec4 endNormalAndTextureCoordinateNormalizationX;
in vec4 rightNormalAndTextureCoordinateNormalizationY;
#else
in vec4 startHiLo2D;
in vec4 offsetAndRight2D;
in vec4 startEndNormals2D;
in vec2 texcoordNormalization2D;
#endif

in float batchId;

out vec4 v_startPlaneNormalEcAndHalfWidth;
out vec4 v_endPlaneNormalEcAndBatchId;
out vec4 v_rightPlaneEC;
out vec4 v_endEcAndStartEcX;
out vec4 v_texcoordNormalizationAndStartEcYZ;

// For materials
#ifdef WIDTH_VARYING
out float v_width;
#endif
#ifdef ANGLE_VARYING
out float v_polylineAngle;
#endif

#ifdef PER_INSTANCE_COLOR
out vec4 v_color;
#endif

void main()
{
#ifdef COLUMBUS_VIEW_2D
    vec3 ecStart = (czm_modelViewRelativeToEye * czm_translateRelativeToEye(vec3(0.0, startHiLo2D.xy), vec3(0.0, startHiLo2D.zw))).xyz;

    vec3 forwardDirectionEC = czm_normal * vec3(0.0, offsetAndRight2D.xy);
    vec3 ecEnd = forwardDirectionEC + ecStart;
    forwardDirectionEC = normalize(forwardDirectionEC);

    // Right plane
    v_rightPlaneEC.xyz = czm_normal * vec3(0.0, offsetAndRight2D.zw);
    v_rightPlaneEC.w = -dot(v_rightPlaneEC.xyz, ecStart);

    // start plane
    vec4 startPlaneEC;
    startPlaneEC.xyz =  czm_normal * vec3(0.0, startEndNormals2D.xy);
    startPlaneEC.w = -dot(startPlaneEC.xyz, ecStart);

    // end plane
    vec4 endPlaneEC;
    endPlaneEC.xyz =  czm_normal * vec3(0.0, startEndNormals2D.zw);
    endPlaneEC.w = -dot(endPlaneEC.xyz, ecEnd);

    v_texcoordNormalizationAndStartEcYZ.x = abs(texcoordNormalization2D.x);
    v_texcoordNormalizationAndStartEcYZ.y = texcoordNormalization2D.y;

#else // COLUMBUS_VIEW_2D
    vec3 ecStart = (czm_modelViewRelativeToEye * czm_translateRelativeToEye(startHiAndForwardOffsetX.xyz, startLoAndForwardOffsetY.xyz)).xyz;
    vec3 offset = czm_normal * vec3(startHiAndForwardOffsetX.w, startLoAndForwardOffsetY.w, startNormalAndForwardOffsetZ.w);
    vec3 ecEnd = ecStart + offset;

    vec3 forwardDirectionEC = normalize(offset);

    // start plane
    vec4 startPlaneEC;
    startPlaneEC.xyz = czm_normal * startNormalAndForwardOffsetZ.xyz;
    startPlaneEC.w = -dot(startPlaneEC.xyz, ecStart);

    // end plane
    vec4 endPlaneEC;
    endPlaneEC.xyz = czm_normal * endNormalAndTextureCoordinateNormalizationX.xyz;
    endPlaneEC.w = -dot(endPlaneEC.xyz, ecEnd);

    // Right plane
    v_rightPlaneEC.xyz = czm_normal * rightNormalAndTextureCoordinateNormalizationY.xyz;
    v_rightPlaneEC.w = -dot(v_rightPlaneEC.xyz, ecStart);

    v_texcoordNormalizationAndStartEcYZ.x = abs(endNormalAndTextureCoordinateNormalizationX.w);
    v_texcoordNormalizationAndStartEcYZ.y = rightNormalAndTextureCoordinateNormalizationY.w;

#endif // COLUMBUS_VIEW_2D

    v_endEcAndStartEcX.xyz = ecEnd;
    v_endEcAndStartEcX.w = ecStart.x;
    v_texcoordNormalizationAndStartEcYZ.zw = ecStart.yz;

#ifdef PER_INSTANCE_COLOR
    v_color = czm_batchTable_color(batchId);
#endif // PER_INSTANCE_COLOR

    // Compute a normal along which to "push" the position out, extending the miter depending on view distance.
    // Position has already been "pushed" by unit length along miter normal, and miter normals are encoded in the planes.
    // Decode the normal to use at this specific vertex, push the position back, and then push to where it needs to be.
    vec4 positionRelativeToEye = czm_computePosition();

    // Check distance to the end plane and start plane, pick the plane that is closer
    vec4 positionEC = czm_modelViewRelativeToEye * positionRelativeToEye; // w = 1.0, see czm_computePosition
    float absStartPlaneDistance = abs(czm_planeDistance(startPlaneEC, positionEC.xyz));
    float absEndPlaneDistance = abs(czm_planeDistance(endPlaneEC, positionEC.xyz));
    vec3 planeDirection = czm_branchFreeTernary(absStartPlaneDistance < absEndPlaneDistance, startPlaneEC.xyz, endPlaneEC.xyz);
    vec3 upOrDown = normalize(cross(v_rightPlaneEC.xyz, planeDirection)); // Points "up" for start plane, "down" at end plane.
    vec3 normalEC = normalize(cross(planeDirection, upOrDown));           // In practice, the opposite seems to work too.

    // Extrude bottom vertices downward for far view distances, like for GroundPrimitives
    upOrDown = cross(forwardDirectionEC, normalEC);
    upOrDown = float(czm_sceneMode == czm_sceneMode3D) * upOrDown;
    upOrDown = float(v_texcoordNormalizationAndStartEcYZ.y > 1.0 || v_texcoordNormalizationAndStartEcYZ.y < 0.0) * upOrDown;
    upOrDown = min(GLOBE_MINIMUM_ALTITUDE, czm_geometricToleranceOverMeter * length(positionRelativeToEye.xyz)) * upOrDown;
    positionEC.xyz += upOrDown;

    v_texcoordNormalizationAndStartEcYZ.y = czm_branchFreeTernary(v_texcoordNormalizationAndStartEcYZ.y > 1.0, 0.0, abs(v_texcoordNormalizationAndStartEcYZ.y));

    // Determine distance along normalEC to push for a volume of appropriate width.
    // Make volumes about double pixel width for a conservative fit - in practice the
    // extra cost here is minimal compared to the loose volume heights.
    //
    // N = normalEC (guaranteed "right-facing")
    // R = rightEC
    // p = angle between N and R
    // w = distance to push along R if R == N
    // d = distance to push along N
    //
    //   N   R
    //  {  p| }      * cos(p) = dot(N, R) = w / d
    //  d  |  |w    * d = w / dot(N, R)
    //    { | }
    //       o---------- polyline segment ---->
    //
    float width = czm_batchTable_width(batchId);
#ifdef WIDTH_VARYING
    v_width = width;
#endif

    v_startPlaneNormalEcAndHalfWidth.xyz = startPlaneEC.xyz;
    v_startPlaneNormalEcAndHalfWidth.w = width * 0.5;

    v_endPlaneNormalEcAndBatchId.xyz = endPlaneEC.xyz;
    v_endPlaneNormalEcAndBatchId.w = batchId;

    width = width * max(0.0, czm_metersPerPixel(positionEC)); // width = distance to push along R
    width = width / dot(normalEC, v_rightPlaneEC.xyz); // width = distance to push along N

    // Determine if this vertex is on the "left" or "right"
#ifdef COLUMBUS_VIEW_2D
        normalEC *= sign(texcoordNormalization2D.x);
#else
        normalEC *= sign(endNormalAndTextureCoordinateNormalizationX.w);
#endif

    positionEC.xyz += width * normalEC;
    gl_Position = czm_depthClamp(czm_projection * positionEC);

#ifdef ANGLE_VARYING
    // Approximate relative screen space direction of the line.
    vec2 approxLineDirection = normalize(vec2(forwardDirectionEC.x, -forwardDirectionEC.y));
    approxLineDirection.y = czm_branchFreeTernary(approxLineDirection.x == 0.0 && approxLineDirection.y == 0.0, -1.0, approxLineDirection.y);
    v_polylineAngle = czm_fastApproximateAtan(approxLineDirection.x, approxLineDirection.y);
#endif
}
`;var YF=`in vec3 position3DHigh;
in vec3 position3DLow;
in vec3 prevPosition3DHigh;
in vec3 prevPosition3DLow;
in vec3 nextPosition3DHigh;
in vec3 nextPosition3DLow;
in vec2 expandAndWidth;
in vec4 color;
in float batchId;

out vec4 v_color;

void main()
{
    float expandDir = expandAndWidth.x;
    float width = abs(expandAndWidth.y) + 0.5;
    bool usePrev = expandAndWidth.y < 0.0;

    vec4 p = czm_computePosition();
    vec4 prev = czm_computePrevPosition();
    vec4 next = czm_computeNextPosition();

    float angle;
    vec4 positionWC = getPolylineWindowCoordinates(p, prev, next, expandDir, width, usePrev, angle);
    gl_Position = czm_viewportOrthographic * positionWC;

    v_color = color;
}
`;var yA=`void clipLineSegmentToNearPlane(
    vec3 p0,
    vec3 p1,
    out vec4 positionWC,
    out bool clipped,
    out bool culledByNearPlane,
    out vec4 clippedPositionEC)
{
    culledByNearPlane = false;
    clipped = false;

    vec3 p0ToP1 = p1 - p0;
    float magnitude = length(p0ToP1);
    vec3 direction = normalize(p0ToP1);

    // Distance that p0 is behind the near plane. Negative means p0 is
    // in front of the near plane.
    float endPoint0Distance =  czm_currentFrustum.x + p0.z;

    // Camera looks down -Z.
    // When moving a point along +Z: LESS VISIBLE
    //   * Points in front of the camera move closer to the camera.
    //   * Points behind the camrea move farther away from the camera.
    // When moving a point along -Z: MORE VISIBLE
    //   * Points in front of the camera move farther away from the camera.
    //   * Points behind the camera move closer to the camera.

    // Positive denominator: -Z, becoming more visible
    // Negative denominator: +Z, becoming less visible
    // Nearly zero: parallel to near plane
    float denominator = -direction.z;

    if (endPoint0Distance > 0.0 && abs(denominator) < czm_epsilon7)
    {
        // p0 is behind the near plane and the line to p1 is nearly parallel to
        // the near plane, so cull the segment completely.
        culledByNearPlane = true;
    }
    else if (endPoint0Distance > 0.0)
    {
        // p0 is behind the near plane, and the line to p1 is moving distinctly
        // toward or away from it.

        // t = (-plane distance - dot(plane normal, ray origin)) / dot(plane normal, ray direction)
        float t = endPoint0Distance / denominator;
        if (t < 0.0 || t > magnitude)
        {
            // Near plane intersection is not between the two points.
            // We already confirmed p0 is behind the naer plane, so now
            // we know the entire segment is behind it.
            culledByNearPlane = true;
        }
        else
        {
            // Segment crosses the near plane, update p0 to lie exactly on it.
            p0 = p0 + t * direction;

            // Numerical noise might put us a bit on the wrong side of the near plane.
            // Don't let that happen.
            p0.z = min(p0.z, -czm_currentFrustum.x);

            clipped = true;
        }
    }

    clippedPositionEC = vec4(p0, 1.0);
    positionWC = czm_eyeToWindowCoordinates(clippedPositionEC);
}

vec4 getPolylineWindowCoordinatesEC(vec4 positionEC, vec4 prevEC, vec4 nextEC, float expandDirection, float width, bool usePrevious, out float angle)
{
    // expandDirection +1 is to the _left_ when looking from positionEC toward nextEC.

#ifdef POLYLINE_DASH
    // Compute the window coordinates of the points.
    vec4 positionWindow = czm_eyeToWindowCoordinates(positionEC);
    vec4 previousWindow = czm_eyeToWindowCoordinates(prevEC);
    vec4 nextWindow = czm_eyeToWindowCoordinates(nextEC);

    // Determine the relative screen space direction of the line.
    vec2 lineDir;
    if (usePrevious) {
        lineDir = normalize(positionWindow.xy - previousWindow.xy);
    }
    else {
        lineDir = normalize(nextWindow.xy - positionWindow.xy);
    }
    angle = atan(lineDir.x, lineDir.y) - 1.570796327; // precomputed atan(1,0)

    // Quantize the angle so it doesn't change rapidly between segments.
    angle = floor(angle / czm_piOverFour + 0.5) * czm_piOverFour;
#endif

    vec4 clippedPrevWC, clippedPrevEC;
    bool prevSegmentClipped, prevSegmentCulled;
    clipLineSegmentToNearPlane(prevEC.xyz, positionEC.xyz, clippedPrevWC, prevSegmentClipped, prevSegmentCulled, clippedPrevEC);

    vec4 clippedNextWC, clippedNextEC;
    bool nextSegmentClipped, nextSegmentCulled;
    clipLineSegmentToNearPlane(nextEC.xyz, positionEC.xyz, clippedNextWC, nextSegmentClipped, nextSegmentCulled, clippedNextEC);

    bool segmentClipped, segmentCulled;
    vec4 clippedPositionWC, clippedPositionEC;
    clipLineSegmentToNearPlane(positionEC.xyz, usePrevious ? prevEC.xyz : nextEC.xyz, clippedPositionWC, segmentClipped, segmentCulled, clippedPositionEC);

    if (segmentCulled)
    {
        return vec4(0.0, 0.0, 0.0, 1.0);
    }

    vec2 directionToPrevWC = normalize(clippedPrevWC.xy - clippedPositionWC.xy);
    vec2 directionToNextWC = normalize(clippedNextWC.xy - clippedPositionWC.xy);

    // If a segment was culled, we can't use the corresponding direction
    // computed above. We should never see both of these be true without
    // \`segmentCulled\` above also being true.
    if (prevSegmentCulled)
    {
        directionToPrevWC = -directionToNextWC;
    }
    else if (nextSegmentCulled)
    {
        directionToNextWC = -directionToPrevWC;
    }

    vec2 thisSegmentForwardWC, otherSegmentForwardWC;
    if (usePrevious)
    {
        thisSegmentForwardWC = -directionToPrevWC;
        otherSegmentForwardWC = directionToNextWC;
    }
    else
    {
        thisSegmentForwardWC = directionToNextWC;
        otherSegmentForwardWC =  -directionToPrevWC;
    }

    vec2 thisSegmentLeftWC = vec2(-thisSegmentForwardWC.y, thisSegmentForwardWC.x);

    vec2 leftWC = thisSegmentLeftWC;
    float expandWidth = width * 0.5;

    // When lines are split at the anti-meridian, the position may be at the
    // same location as the next or previous position, and we need to handle
    // that to avoid producing NaNs.
    if (!czm_equalsEpsilon(prevEC.xyz - positionEC.xyz, vec3(0.0), czm_epsilon1) && !czm_equalsEpsilon(nextEC.xyz - positionEC.xyz, vec3(0.0), czm_epsilon1))
    {
        vec2 otherSegmentLeftWC = vec2(-otherSegmentForwardWC.y, otherSegmentForwardWC.x);

        vec2 leftSumWC = thisSegmentLeftWC + otherSegmentLeftWC;
        float leftSumLength = length(leftSumWC);
        leftWC = leftSumLength < czm_epsilon6 ? thisSegmentLeftWC : (leftSumWC / leftSumLength);

        // The sine of the angle between the two vectors is given by the formula
        //         |a x b| = |a||b|sin(theta)
        // which is
        //     float sinAngle = length(cross(vec3(leftWC, 0.0), vec3(-thisSegmentForwardWC, 0.0)));
        // Because the z components of both vectors are zero, the x and y coordinate will be zero.
        // Therefore, the sine of the angle is just the z component of the cross product.
        vec2 u = -thisSegmentForwardWC;
        vec2 v = leftWC;
        float sinAngle = abs(u.x * v.y - u.y * v.x);
        expandWidth = clamp(expandWidth / sinAngle, 0.0, width * 2.0);
    }

    vec2 offset = leftWC * expandDirection * expandWidth * czm_pixelRatio;
    return vec4(clippedPositionWC.xy + offset, -clippedPositionWC.z, 1.0) * (czm_projection * clippedPositionEC).w;
}

vec4 getPolylineWindowCoordinates(vec4 position, vec4 previous, vec4 next, float expandDirection, float width, bool usePrevious, out float angle)
{
    vec4 positionEC = czm_modelViewRelativeToEye * position;
    vec4 prevEC = czm_modelViewRelativeToEye * previous;
    vec4 nextEC = czm_modelViewRelativeToEye * next;
    return getPolylineWindowCoordinatesEC(positionEC, prevEC, nextEC, expandDirection, width, usePrevious, angle);
}
`;var WB=`${yA}
${YF}`,NZ=p_;Ut.isInternetExplorer()||(WB=`#define CLIP_POLYLINE 
${WB}`);function od(e){e=e??G.EMPTY_OBJECT;let t=e.translucent??!0,n=!1,i=od.VERTEX_FORMAT;this.material=void 0,this.translucent=t,this._vertexShaderSource=e.vertexShaderSource??WB,this._fragmentShaderSource=e.fragmentShaderSource??NZ,this._renderState=jo.getDefaultRenderState(t,n,e.renderState),this._closed=n,this._vertexFormat=i}Object.defineProperties(od.prototype,{vertexShaderSource:{get:function(){return this._vertexShaderSource}},fragmentShaderSource:{get:function(){return this._fragmentShaderSource}},renderState:{get:function(){return this._renderState}},closed:{get:function(){return this._closed}},vertexFormat:{get:function(){return this._vertexFormat}}});od.VERTEX_FORMAT=Bt.POSITION_ONLY;od.prototype.getFragmentShaderSource=jo.prototype.getFragmentShaderSource;od.prototype.isTranslucent=jo.prototype.isTranslucent;od.prototype.getRenderState=jo.prototype.getRenderState;var Cl=od;var WF=`in vec3 position3DHigh;
in vec3 position3DLow;
in vec3 prevPosition3DHigh;
in vec3 prevPosition3DLow;
in vec3 nextPosition3DHigh;
in vec3 nextPosition3DLow;
in vec2 expandAndWidth;
in vec2 st;
in float batchId;

out float v_width;
out vec2 v_st;
out float v_polylineAngle;

void main()
{
    float expandDir = expandAndWidth.x;
    float width = abs(expandAndWidth.y) + 0.5;
    bool usePrev = expandAndWidth.y < 0.0;

    vec4 p = czm_computePosition();
    vec4 prev = czm_computePrevPosition();
    vec4 next = czm_computeNextPosition();

    float angle;
    vec4 positionWC = getPolylineWindowCoordinates(p, prev, next, expandDir, width, usePrev, angle);
    gl_Position = czm_viewportOrthographic * positionWC;

    v_width = width;
    v_st.s = st.s;
    v_st.t = czm_writeNonPerspective(st.t, gl_Position.w);
    v_polylineAngle = angle;
}
`;var v_=`#ifdef VECTOR_TILE
uniform vec4 u_highlightColor;
#endif

in vec2 v_st;

void main()
{
    czm_materialInput materialInput;

    vec2 st = v_st;
    st.t = czm_readNonPerspective(st.t, gl_FragCoord.w);

    materialInput.s = st.s;
    materialInput.st = st;
    materialInput.str = vec3(st, 0.0);

    czm_material material = czm_getMaterial(materialInput);
    out_FragColor = vec4(material.diffuse + material.emission, material.alpha);
#ifdef VECTOR_TILE
    out_FragColor *= u_highlightColor;
#endif

    czm_writeLogDepth();
}
`;var qB=`${yA}
${WF}`,LZ=v_;Ut.isInternetExplorer()||(qB=`#define CLIP_POLYLINE 
${qB}`);function rd(e){e=e??G.EMPTY_OBJECT;let t=e.translucent??!0,n=!1,i=rd.VERTEX_FORMAT;this.material=c(e.material)?e.material:Ci.fromType(Ci.ColorType),this.translucent=t,this._vertexShaderSource=e.vertexShaderSource??qB,this._fragmentShaderSource=e.fragmentShaderSource??LZ,this._renderState=jo.getDefaultRenderState(t,n,e.renderState),this._closed=n,this._vertexFormat=i}Object.defineProperties(rd.prototype,{vertexShaderSource:{get:function(){let e=this._vertexShaderSource;return this.material.shaderSource.search(/in\s+float\s+v_polylineAngle;/g)!==-1&&(e=`#define POLYLINE_DASH
${e}`),e}},fragmentShaderSource:{get:function(){return this._fragmentShaderSource}},renderState:{get:function(){return this._renderState}},closed:{get:function(){return this._closed}},vertexFormat:{get:function(){return this._vertexFormat}}});rd.VERTEX_FORMAT=Bt.POSITION_AND_ST;rd.prototype.getFragmentShaderSource=jo.prototype.getFragmentShaderSource;rd.prototype.isTranslucent=jo.prototype.isTranslucent;rd.prototype.getRenderState=jo.prototype.getRenderState;var Oc=rd;function El(e){e=e??G.EMPTY_OBJECT,this.geometryInstances=e.geometryInstances,this._hasPerInstanceColors=!0;let t=e.appearance;c(t)||(t=new Oc),this.appearance=t,this.show=e.show??!0,this.classificationType=e.classificationType??wn.BOTH,this.debugShowBoundingVolume=e.debugShowBoundingVolume??!1,this._debugShowShadowVolume=e.debugShowShadowVolume??!1,this._primitiveOptions={geometryInstances:void 0,appearance:void 0,vertexCacheOptimize:!1,interleave:e.interleave??!1,releaseGeometryInstances:e.releaseGeometryInstances??!0,allowPicking:e.allowPicking??!0,asynchronous:e.asynchronous??!0,compressVertices:!1,_createShaderProgramFunction:void 0,_createCommandsFunction:void 0,_updateAndQueueCommandsFunction:void 0},this._zIndex=void 0,this._ready=!1,this._primitive=void 0,this._sp=void 0,this._sp2D=void 0,this._spMorph=void 0,this._renderState=qF(!1),this._renderState3DTiles=qF(!0),this._renderStateMorph=At.fromCache({cull:{enabled:!0,face:or.FRONT},depthTest:{enabled:!0},blending:Pn.PRE_MULTIPLIED_ALPHA_BLEND,depthMask:!1})}Object.defineProperties(El.prototype,{interleave:{get:function(){return this._primitiveOptions.interleave}},releaseGeometryInstances:{get:function(){return this._primitiveOptions.releaseGeometryInstances}},allowPicking:{get:function(){return this._primitiveOptions.allowPicking}},asynchronous:{get:function(){return this._primitiveOptions.asynchronous}},ready:{get:function(){return this._ready}},debugShowShadowVolume:{get:function(){return this._debugShowShadowVolume}}});El.initializeTerrainHeights=function(){return Bo.initialize()};function FZ(e,t,n){let i=t.context,o=e._primitive,r=o._attributeLocations,a=o._batchTable.getVertexShaderCallback()(jF);a=cn._appendShowToShader(o,a),a=cn._appendDistanceDisplayConditionToShader(o,a),a=cn._modifyShaderPosition(e,a,t.scene3DOnly);let s=o._batchTable.getVertexShaderCallback()(VF);s=cn._appendShowToShader(o,s),s=cn._appendDistanceDisplayConditionToShader(o,s),s=cn._modifyShaderPosition(e,s,t.scene3DOnly);let A=o._batchTable.getVertexShaderCallback()(GF),l=[`GLOBE_MINIMUM_ALTITUDE ${t.mapProjection.ellipsoid.minimumRadius.toFixed(1)}`],d="",m="";c(n.material)?(m=c(n.material)?n.material.shaderSource:"",m.search(/in\s+float\s+v_polylineAngle;/g)!==-1&&l.push("ANGLE_VARYING"),m.search(/in\s+float\s+v_width;/g)!==-1&&l.push("WIDTH_VARYING")):d="PER_INSTANCE_COLOR",l.push(d);let p=e.debugShowShadowVolume?["DEBUG_SHOW_VOLUME",d]:[d],g=new It({defines:l,sources:[a]}),h=new It({defines:p,sources:[m,A]});e._sp=gn.replaceCache({context:i,shaderProgram:o._sp,vertexShaderSource:g,fragmentShaderSource:h,attributeLocations:r});let C=i.shaderCache.getDerivedShaderProgram(e._sp,"2dColor");if(!c(C)){let I=new It({defines:l.concat(["COLUMBUS_VIEW_2D"]),sources:[a]});C=i.shaderCache.createDerivedShaderProgram(e._sp,"2dColor",{context:i,shaderProgram:e._sp2D,vertexShaderSource:I,fragmentShaderSource:h,attributeLocations:r})}e._sp2D=C;let _=i.shaderCache.getDerivedShaderProgram(e._sp,"MorphColor");if(!c(_)){let I=new It({defines:l.concat([`MAX_TERRAIN_HEIGHT ${Bo._defaultMaxTerrainHeight.toFixed(1)}`]),sources:[s]});A=o._batchTable.getVertexShaderCallback()(HF);let b=new It({defines:p,sources:[m,A]});_=i.shaderCache.createDerivedShaderProgram(e._sp,"MorphColor",{context:i,shaderProgram:e._spMorph,vertexShaderSource:I,fragmentShaderSource:b,attributeLocations:r})}e._spMorph=_}function qF(e){return At.fromCache({cull:{enabled:!0},blending:Pn.PRE_MULTIPLIED_ALPHA_BLEND,depthMask:!1,stencilTest:{enabled:e,frontFunction:Dn.EQUAL,frontOperation:{fail:nt.KEEP,zFail:nt.KEEP,zPass:nt.KEEP},backFunction:Dn.EQUAL,backOperation:{fail:nt.KEEP,zFail:nt.KEEP,zPass:nt.KEEP},reference:wt.CESIUM_3D_TILE_MASK,mask:wt.CESIUM_3D_TILE_MASK}})}function OZ(e,t,n,i,o,r){let a=e._primitive,s=a._va.length;o.length=s,r.length=s;let l=t instanceof Cl?{}:n._uniforms,d=a._batchTable.getUniformMapCallback()(l);for(let m=0;m<s;m++){let p=a._va[m],g=o[m];c(g)||(g=o[m]=new ft({owner:e,primitiveType:a._primitiveType})),g.vertexArray=p,g.renderState=e._renderState,g.shaderProgram=e._sp,g.uniformMap=d,g.pass=He.TERRAIN_CLASSIFICATION,g.pickId="czm_batchTable_pickColor(v_endPlaneNormalEcAndBatchId.w)";let h=ft.shallowClone(g,g.derivedCommands.tileset);h.renderState=e._renderState3DTiles,h.pass=He.CESIUM_3D_TILE_CLASSIFICATION,g.derivedCommands.tileset=h;let C=ft.shallowClone(g,g.derivedCommands.color2D);C.shaderProgram=e._sp2D,g.derivedCommands.color2D=C;let _=ft.shallowClone(h,h.derivedCommands.color2D);_.shaderProgram=e._sp2D,h.derivedCommands.color2D=_;let I=ft.shallowClone(g,g.derivedCommands.colorMorph);I.renderState=e._renderStateMorph,I.shaderProgram=e._spMorph,I.pickId="czm_batchTable_pickColor(v_batchId)",g.derivedCommands.colorMorph=I}}function JF(e,t,n,i,o,r,a){n.mode===Ee.MORPHING?t=t.derivedCommands.colorMorph:n.mode!==Ee.SCENE3D&&(t=t.derivedCommands.color2D),t.modelMatrix=i,t.boundingVolume=r,t.cull=o,t.debugShowBoundingVolume=a,n.commandList.push(t)}function kZ(e,t,n,i,o,r,a){let s=e._primitive;cn._updateBoundingVolumes(s,t,o);let A;t.mode===Ee.SCENE3D?A=s._boundingSphereWC:t.mode===Ee.COLUMBUS_VIEW?A=s._boundingSphereCV:t.mode===Ee.SCENE2D&&c(s._boundingSphere2D)?A=s._boundingSphere2D:c(s._boundingSphereMorph)&&(A=s._boundingSphereMorph);let l=t.mode===Ee.MORPHING,d=e.classificationType,m=d!==wn.CESIUM_3D_TILE,p=d!==wn.TERRAIN&&!l,g,h=t.passes;if(h.render||h.pick&&s.allowPicking){let C=n.length;for(let _=0;_<C;++_){let I=A[_];m&&(g=n[_],JF(e,g,t,o,r,I,a)),p&&(g=n[_].derivedCommands.tileset,JF(e,g,t,o,r,I,a))}}}El.prototype.update=function(e){if(!c(this._primitive)&&!c(this.geometryInstances))return;if(!Bo.initialized){El.initializeTerrainHeights();return}let t,n=this,i=this._primitiveOptions;if(!c(this._primitive)){let o=Array.isArray(this.geometryInstances)?this.geometryInstances:[this.geometryInstances],r=o.length,a=new Array(r),s;for(t=0;t<r;++t)if(s=o[t].attributes,!c(s)||!c(s.color)){this._hasPerInstanceColors=!1;break}for(t=0;t<r;++t){let A=o[t];s={};let l=A.attributes;for(let d in l)l.hasOwnProperty(d)&&(s[d]=l[d]);c(s.width)||(s.width=new gs({componentDatatype:V.UNSIGNED_BYTE,componentsPerAttribute:1,value:[A.geometry.width]})),A.geometry._scene3DOnly=e.scene3DOnly,Up.setProjectionAndEllipsoid(A.geometry,e.mapProjection),a[t]=new tn({geometry:A.geometry,attributes:s,id:A.id,pickPrimitive:n})}i.geometryInstances=a,i.appearance=this.appearance,i._createShaderProgramFunction=function(A,l,d){FZ(n,l,d)},i._createCommandsFunction=function(A,l,d,m,p,g,h){OZ(n,l,d,m,g,h)},i._updateAndQueueCommandsFunction=function(A,l,d,m,p,g,h,C){kZ(n,l,d,m,p,g,h)},this._primitive=new cn(i)}if(this.appearance instanceof Cl&&!this._hasPerInstanceColors)throw new be("All GeometryInstances must have color attributes to use PolylineColorAppearance with GroundPolylinePrimitive.");this._primitive.appearance=this.appearance,this._primitive.show=this.show,this._primitive.debugShowBoundingVolume=this.debugShowBoundingVolume,this._primitive.update(e),e.afterRender.push(()=>{!this._ready&&c(this._primitive)&&this._primitive.ready&&(this._ready=!0,this.releaseGeometryInstances&&(this.geometryInstances=void 0))})};El.prototype.getGeometryInstanceAttributes=function(e){return this._primitive.getGeometryInstanceAttributes(e)};El.isSupported=function(e){return e.frameState.context.depthTexture};El.prototype.isDestroyed=function(){return!1};El.prototype.destroy=function(){return this._primitive=this._primitive&&this._primitive.destroy(),this._sp=this._sp&&this._sp.destroy(),this._sp2D=void 0,this._spMorph=void 0,me(this)};var zp=El;var UZ=new L(1,1),zZ=!1,GZ=J.WHITE;function Qh(e){e=e??G.EMPTY_OBJECT,this._definitionChanged=new Le,this._image=void 0,this._imageSubscription=void 0,this._repeat=void 0,this._repeatSubscription=void 0,this._color=void 0,this._colorSubscription=void 0,this._transparent=void 0,this._transparentSubscription=void 0,this.image=e.image,this.repeat=e.repeat,this.color=e.color,this.transparent=e.transparent}Object.defineProperties(Qh.prototype,{isConstant:{get:function(){return Pt.isConstant(this._image)&&Pt.isConstant(this._repeat)}},definitionChanged:{get:function(){return this._definitionChanged}},image:te("image"),repeat:te("repeat"),color:te("color"),transparent:te("transparent")});Qh.prototype.getType=function(e){return"Image"};var HZ=new Ue;Qh.prototype.getValue=function(e,t){return c(e)||(e=Ue.now(HZ)),c(t)||(t={}),t.image=Pt.getValueOrUndefined(this._image,e),t.repeat=Pt.getValueOrClonedDefault(this._repeat,e,UZ,t.repeat),t.color=Pt.getValueOrClonedDefault(this._color,e,GZ,t.color),Pt.getValueOrDefault(this._transparent,e,zZ)&&(t.color.alpha=Math.min(.99,t.color.alpha)),t};Qh.prototype.equals=function(e){return this===e||e instanceof Qh&&Pt.equals(this._image,e._image)&&Pt.equals(this._repeat,e._repeat)&&Pt.equals(this._color,e._color)&&Pt.equals(this._transparent,e._transparent)};var KF=Qh;function VZ(e){if(e instanceof J)return new _A(e);if(typeof e=="string"||e instanceof Ye||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement){let t=new KF;return t.image=e,t}}function jZ(e,t){return te(e,t,VZ)}var Wi=jZ;function Gp(e){this._definitionChanged=new Le,this._show=void 0,this._showSubscription=void 0,this._dimensions=void 0,this._dimensionsSubscription=void 0,this._heightReference=void 0,this._heightReferenceSubscription=void 0,this._fill=void 0,this._fillSubscription=void 0,this._material=void 0,this._materialSubscription=void 0,this._outline=void 0,this._outlineSubscription=void 0,this._outlineColor=void 0,this._outlineColorSubscription=void 0,this._outlineWidth=void 0,this._outlineWidthSubscription=void 0,this._shadows=void 0,this._shadowsSubscription=void 0,this._distanceDisplayCondition=void 0,this._distanceDisplayConditionSubscription=void 0,this.merge(e??G.EMPTY_OBJECT)}Object.defineProperties(Gp.prototype,{definitionChanged:{get:function(){return this._definitionChanged}},show:te("show"),dimensions:te("dimensions"),heightReference:te("heightReference"),fill:te("fill"),material:Wi("material"),outline:te("outline"),outlineColor:te("outlineColor"),outlineWidth:te("outlineWidth"),shadows:te("shadows"),distanceDisplayCondition:te("distanceDisplayCondition")});Gp.prototype.clone=function(e){return c(e)?(e.show=this.show,e.dimensions=this.dimensions,e.heightReference=this.heightReference,e.fill=this.fill,e.material=this.material,e.outline=this.outline,e.outlineColor=this.outlineColor,e.outlineWidth=this.outlineWidth,e.shadows=this.shadows,e.distanceDisplayCondition=this.distanceDisplayCondition,e):new Gp(this)};Gp.prototype.merge=function(e){this.show=this.show??e.show,this.dimensions=this.dimensions??e.dimensions,this.heightReference=this.heightReference??e.heightReference,this.fill=this.fill??e.fill,this.material=this.material??e.material,this.outline=this.outline??e.outline,this.outlineColor=this.outlineColor??e.outlineColor,this.outlineWidth=this.outlineWidth??e.outlineWidth,this.shadows=this.shadows??e.shadows,this.distanceDisplayCondition=this.distanceDisplayCondition??e.distanceDisplayCondition};var XF=Gp;var YZ={FIXED:0,INERTIAL:1},ad=Object.freeze(YZ);function Rh(){be.throwInstantiationError()}Object.defineProperties(Rh.prototype,{isConstant:{get:be.throwInstantiationError},definitionChanged:{get:be.throwInstantiationError},referenceFrame:{get:be.throwInstantiationError}});Rh.prototype.getValue=be.throwInstantiationError;Rh.prototype.getValueInReferenceFrame=be.throwInstantiationError;Rh.prototype.equals=be.throwInstantiationError;var ZF=new ne;Rh.convertToReferenceFrame=function(e,t,n,i,o){if(!c(t))return t;if(c(o)||(o=new f),n===i)return f.clone(t,o);let r=sn.computeIcrfToCentralBodyFixedMatrix(e,ZF);if(n===ad.INERTIAL)return ne.multiplyByVector(r,t,o);if(n===ad.FIXED)return ne.multiplyByVector(ne.transpose(r,ZF),t,o)};var $F=Rh;function sd(e,t){this._definitionChanged=new Le,this._value=f.clone(e),this._referenceFrame=t??ad.FIXED}Object.defineProperties(sd.prototype,{isConstant:{get:function(){return!c(this._value)||this._referenceFrame===ad.FIXED}},definitionChanged:{get:function(){return this._definitionChanged}},referenceFrame:{get:function(){return this._referenceFrame}}});var WZ=new Ue;sd.prototype.getValue=function(e,t){return c(e)||(e=Ue.now(WZ)),this.getValueInReferenceFrame(e,ad.FIXED,t)};sd.prototype.setValue=function(e,t){let n=!1;f.equals(this._value,e)||(n=!0,this._value=f.clone(e)),c(t)&&this._referenceFrame!==t&&(n=!0,this._referenceFrame=t),n&&this._definitionChanged.raiseEvent(this)};sd.prototype.getValueInReferenceFrame=function(e,t,n){return $F.convertToReferenceFrame(e,this._value,this._referenceFrame,t,n)};sd.prototype.equals=function(e){return this===e||e instanceof sd&&f.equals(this._value,e._value)&&this._referenceFrame===e._referenceFrame};var eO=sd;function Hp(e){this._definitionChanged=new Le,this._show=void 0,this._showSubscription=void 0,this._positions=void 0,this._positionsSubscription=void 0,this._width=void 0,this._widthSubscription=void 0,this._height=void 0,this._heightSubscription=void 0,this._heightReference=void 0,this._heightReferenceSubscription=void 0,this._extrudedHeight=void 0,this._extrudedHeightSubscription=void 0,this._extrudedHeightReference=void 0,this._extrudedHeightReferenceSubscription=void 0,this._cornerType=void 0,this._cornerTypeSubscription=void 0,this._granularity=void 0,this._granularitySubscription=void 0,this._fill=void 0,this._fillSubscription=void 0,this._material=void 0,this._materialSubscription=void 0,this._outline=void 0,this._outlineSubscription=void 0,this._outlineColor=void 0,this._outlineColorSubscription=void 0,this._outlineWidth=void 0,this._outlineWidthSubscription=void 0,this._shadows=void 0,this._shadowsSubscription=void 0,this._distanceDisplayCondition=void 0,this._distanceDisplayConditionSubscription=void 0,this._classificationType=void 0,this._classificationTypeSubscription=void 0,this._zIndex=void 0,this._zIndexSubscription=void 0,this.merge(e??G.EMPTY_OBJECT)}Object.defineProperties(Hp.prototype,{definitionChanged:{get:function(){return this._definitionChanged}},show:te("show"),positions:te("positions"),width:te("width"),height:te("height"),heightReference:te("heightReference"),extrudedHeight:te("extrudedHeight"),extrudedHeightReference:te("extrudedHeightReference"),cornerType:te("cornerType"),granularity:te("granularity"),fill:te("fill"),material:Wi("material"),outline:te("outline"),outlineColor:te("outlineColor"),outlineWidth:te("outlineWidth"),shadows:te("shadows"),distanceDisplayCondition:te("distanceDisplayCondition"),classificationType:te("classificationType"),zIndex:te("zIndex")});Hp.prototype.clone=function(e){return c(e)?(e.show=this.show,e.positions=this.positions,e.width=this.width,e.height=this.height,e.heightReference=this.heightReference,e.extrudedHeight=this.extrudedHeight,e.extrudedHeightReference=this.extrudedHeightReference,e.cornerType=this.cornerType,e.granularity=this.granularity,e.fill=this.fill,e.material=this.material,e.outline=this.outline,e.outlineColor=this.outlineColor,e.outlineWidth=this.outlineWidth,e.shadows=this.shadows,e.distanceDisplayCondition=this.distanceDisplayCondition,e.classificationType=this.classificationType,e.zIndex=this.zIndex,e):new Hp(this)};Hp.prototype.merge=function(e){this.show=this.show??e.show,this.positions=this.positions??e.positions,this.width=this.width??e.width,this.height=this.height??e.height,this.heightReference=this.heightReference??e.heightReference,this.extrudedHeight=this.extrudedHeight??e.extrudedHeight,this.extrudedHeightReference=this.extrudedHeightReference??e.extrudedHeightReference,this.cornerType=this.cornerType??e.cornerType,this.granularity=this.granularity??e.granularity,this.fill=this.fill??e.fill,this.material=this.material??e.material,this.outline=this.outline??e.outline,this.outlineColor=this.outlineColor??e.outlineColor,this.outlineWidth=this.outlineWidth??e.outlineWidth,this.shadows=this.shadows??e.shadows,this.distanceDisplayCondition=this.distanceDisplayCondition??e.distanceDisplayCondition,this.classificationType=this.classificationType??e.classificationType,this.zIndex=this.zIndex??e.zIndex};var tO=Hp;function qZ(e){return e}function JZ(e,t){return te(e,t,qZ)}var Vp=JZ;function jp(e){this._definitionChanged=new Le,this._show=void 0,this._showSubscription=void 0,this._length=void 0,this._lengthSubscription=void 0,this._topRadius=void 0,this._topRadiusSubscription=void 0,this._bottomRadius=void 0,this._bottomRadiusSubscription=void 0,this._heightReference=void 0,this._heightReferenceSubscription=void 0,this._fill=void 0,this._fillSubscription=void 0,this._material=void 0,this._materialSubscription=void 0,this._outline=void 0,this._outlineSubscription=void 0,this._outlineColor=void 0,this._outlineColorSubscription=void 0,this._outlineWidth=void 0,this._outlineWidthSubscription=void 0,this._numberOfVerticalLines=void 0,this._numberOfVerticalLinesSubscription=void 0,this._slices=void 0,this._slicesSubscription=void 0,this._shadows=void 0,this._shadowsSubscription=void 0,this._distanceDisplayCondition=void 0,this._distanceDisplayConditionSubscription=void 0,this.merge(e??G.EMPTY_OBJECT)}Object.defineProperties(jp.prototype,{definitionChanged:{get:function(){return this._definitionChanged}},show:te("show"),length:te("length"),topRadius:te("topRadius"),bottomRadius:te("bottomRadius"),heightReference:te("heightReference"),fill:te("fill"),material:Wi("material"),outline:te("outline"),outlineColor:te("outlineColor"),outlineWidth:te("outlineWidth"),numberOfVerticalLines:te("numberOfVerticalLines"),slices:te("slices"),shadows:te("shadows"),distanceDisplayCondition:te("distanceDisplayCondition")});jp.prototype.clone=function(e){return c(e)?(e.show=this.show,e.length=this.length,e.topRadius=this.topRadius,e.bottomRadius=this.bottomRadius,e.heightReference=this.heightReference,e.fill=this.fill,e.material=this.material,e.outline=this.outline,e.outlineColor=this.outlineColor,e.outlineWidth=this.outlineWidth,e.numberOfVerticalLines=this.numberOfVerticalLines,e.slices=this.slices,e.shadows=this.shadows,e.distanceDisplayCondition=this.distanceDisplayCondition,e):new jp(this)};jp.prototype.merge=function(e){this.show=this.show??e.show,this.length=this.length??e.length,this.topRadius=this.topRadius??e.topRadius,this.bottomRadius=this.bottomRadius??e.bottomRadius,this.heightReference=this.heightReference??e.heightReference,this.fill=this.fill??e.fill,this.material=this.material??e.material,this.outline=this.outline??e.outline,this.outlineColor=this.outlineColor??e.outlineColor,this.outlineWidth=this.outlineWidth??e.outlineWidth,this.numberOfVerticalLines=this.numberOfVerticalLines??e.numberOfVerticalLines,this.slices=this.slices??e.slices,this.shadows=this.shadows??e.shadows,this.distanceDisplayCondition=this.distanceDisplayCondition??e.distanceDisplayCondition};var nO=jp;function Yp(e){this._definitionChanged=new Le,this._show=void 0,this._showSubscription=void 0,this._semiMajorAxis=void 0,this._semiMajorAxisSubscription=void 0,this._semiMinorAxis=void 0,this._semiMinorAxisSubscription=void 0,this._height=void 0,this._heightSubscription=void 0,this._heightReference=void 0,this._heightReferenceSubscription=void 0,this._extrudedHeight=void 0,this._extrudedHeightSubscription=void 0,this._extrudedHeightReference=void 0,this._extrudedHeightReferenceSubscription=void 0,this._rotation=void 0,this._rotationSubscription=void 0,this._stRotation=void 0,this._stRotationSubscription=void 0,this._granularity=void 0,this._granularitySubscription=void 0,this._fill=void 0,this._fillSubscription=void 0,this._material=void 0,this._materialSubscription=void 0,this._outline=void 0,this._outlineSubscription=void 0,this._outlineColor=void 0,this._outlineColorSubscription=void 0,this._outlineWidth=void 0,this._outlineWidthSubscription=void 0,this._numberOfVerticalLines=void 0,this._numberOfVerticalLinesSubscription=void 0,this._shadows=void 0,this._shadowsSubscription=void 0,this._distanceDisplayCondition=void 0,this._distanceDisplayConditionSubscription=void 0,this._classificationType=void 0,this._classificationTypeSubscription=void 0,this._zIndex=void 0,this._zIndexSubscription=void 0,this.merge(e??G.EMPTY_OBJECT)}Object.defineProperties(Yp.prototype,{definitionChanged:{get:function(){return this._definitionChanged}},show:te("show"),semiMajorAxis:te("semiMajorAxis"),semiMinorAxis:te("semiMinorAxis"),height:te("height"),heightReference:te("heightReference"),extrudedHeight:te("extrudedHeight"),extrudedHeightReference:te("extrudedHeightReference"),rotation:te("rotation"),stRotation:te("stRotation"),granularity:te("granularity"),fill:te("fill"),material:Wi("material"),outline:te("outline"),outlineColor:te("outlineColor"),outlineWidth:te("outlineWidth"),numberOfVerticalLines:te("numberOfVerticalLines"),shadows:te("shadows"),distanceDisplayCondition:te("distanceDisplayCondition"),classificationType:te("classificationType"),zIndex:te("zIndex")});Yp.prototype.clone=function(e){return c(e)?(e.show=this.show,e.semiMajorAxis=this.semiMajorAxis,e.semiMinorAxis=this.semiMinorAxis,e.height=this.height,e.heightReference=this.heightReference,e.extrudedHeight=this.extrudedHeight,e.extrudedHeightReference=this.extrudedHeightReference,e.rotation=this.rotation,e.stRotation=this.stRotation,e.granularity=this.granularity,e.fill=this.fill,e.material=this.material,e.outline=this.outline,e.outlineColor=this.outlineColor,e.outlineWidth=this.outlineWidth,e.numberOfVerticalLines=this.numberOfVerticalLines,e.shadows=this.shadows,e.distanceDisplayCondition=this.distanceDisplayCondition,e.classificationType=this.classificationType,e.zIndex=this.zIndex,e):new Yp(this)};Yp.prototype.merge=function(e){this.show=this.show??e.show,this.semiMajorAxis=this.semiMajorAxis??e.semiMajorAxis,this.semiMinorAxis=this.semiMinorAxis??e.semiMinorAxis,this.height=this.height??e.height,this.heightReference=this.heightReference??e.heightReference,this.extrudedHeight=this.extrudedHeight??e.extrudedHeight,this.extrudedHeightReference=this.extrudedHeightReference??e.extrudedHeightReference,this.rotation=this.rotation??e.rotation,this.stRotation=this.stRotation??e.stRotation,this.granularity=this.granularity??e.granularity,this.fill=this.fill??e.fill,this.material=this.material??e.material,this.outline=this.outline??e.outline,this.outlineColor=this.outlineColor??e.outlineColor,this.outlineWidth=this.outlineWidth??e.outlineWidth,this.numberOfVerticalLines=this.numberOfVerticalLines??e.numberOfVerticalLines,this.shadows=this.shadows??e.shadows,this.distanceDisplayCondition=this.distanceDisplayCondition??e.distanceDisplayCondition,this.classificationType=this.classificationType??e.classificationType,this.zIndex=this.zIndex??e.zIndex};var iO=Yp;function Wp(e){this._definitionChanged=new Le,this._show=void 0,this._showSubscription=void 0,this._radii=void 0,this._radiiSubscription=void 0,this._innerRadii=void 0,this._innerRadiiSubscription=void 0,this._minimumClock=void 0,this._minimumClockSubscription=void 0,this._maximumClock=void 0,this._maximumClockSubscription=void 0,this._minimumCone=void 0,this._minimumConeSubscription=void 0,this._maximumCone=void 0,this._maximumConeSubscription=void 0,this._heightReference=void 0,this._heightReferenceSubscription=void 0,this._fill=void 0,this._fillSubscription=void 0,this._material=void 0,this._materialSubscription=void 0,this._outline=void 0,this._outlineSubscription=void 0,this._outlineColor=void 0,this._outlineColorSubscription=void 0,this._outlineWidth=void 0,this._outlineWidthSubscription=void 0,this._stackPartitions=void 0,this._stackPartitionsSubscription=void 0,this._slicePartitions=void 0,this._slicePartitionsSubscription=void 0,this._subdivisions=void 0,this._subdivisionsSubscription=void 0,this._shadows=void 0,this._shadowsSubscription=void 0,this._distanceDisplayCondition=void 0,this._distanceDisplayConditionSubscription=void 0,this.merge(e??G.EMPTY_OBJECT)}Object.defineProperties(Wp.prototype,{definitionChanged:{get:function(){return this._definitionChanged}},show:te("show"),radii:te("radii"),innerRadii:te("innerRadii"),minimumClock:te("minimumClock"),maximumClock:te("maximumClock"),minimumCone:te("minimumCone"),maximumCone:te("maximumCone"),heightReference:te("heightReference"),fill:te("fill"),material:Wi("material"),outline:te("outline"),outlineColor:te("outlineColor"),outlineWidth:te("outlineWidth"),stackPartitions:te("stackPartitions"),slicePartitions:te("slicePartitions"),subdivisions:te("subdivisions"),shadows:te("shadows"),distanceDisplayCondition:te("distanceDisplayCondition")});Wp.prototype.clone=function(e){return c(e)?(e.show=this.show,e.radii=this.radii,e.innerRadii=this.innerRadii,e.minimumClock=this.minimumClock,e.maximumClock=this.maximumClock,e.minimumCone=this.minimumCone,e.maximumCone=this.maximumCone,e.heightReference=this.heightReference,e.fill=this.fill,e.material=this.material,e.outline=this.outline,e.outlineColor=this.outlineColor,e.outlineWidth=this.outlineWidth,e.stackPartitions=this.stackPartitions,e.slicePartitions=this.slicePartitions,e.subdivisions=this.subdivisions,e.shadows=this.shadows,e.distanceDisplayCondition=this.distanceDisplayCondition,e):new Wp(this)};Wp.prototype.merge=function(e){this.show=this.show??e.show,this.radii=this.radii??e.radii,this.innerRadii=this.innerRadii??e.innerRadii,this.minimumClock=this.minimumClock??e.minimumClock,this.maximumClock=this.maximumClock??e.maximumClock,this.minimumCone=this.minimumCone??e.minimumCone,this.maximumCone=this.maximumCone??e.maximumCone,this.heightReference=this.heightReference??e.heightReference,this.fill=this.fill??e.fill,this.material=this.material??e.material,this.outline=this.outline??e.outline,this.outlineColor=this.outlineColor??e.outlineColor,this.outlineWidth=this.outlineWidth??e.outlineWidth,this.stackPartitions=this.stackPartitions??e.stackPartitions,this.slicePartitions=this.slicePartitions??e.slicePartitions,this.subdivisions=this.subdivisions??e.subdivisions,this.shadows=this.shadows??e.shadows,this.distanceDisplayCondition=this.distanceDisplayCondition??e.distanceDisplayCondition};var oO=Wp;function qp(e){this._definitionChanged=new Le,this._show=void 0,this._showSubscription=void 0,this._text=void 0,this._textSubscription=void 0,this._font=void 0,this._fontSubscription=void 0,this._style=void 0,this._styleSubscription=void 0,this._scale=void 0,this._scaleSubscription=void 0,this._showBackground=void 0,this._showBackgroundSubscription=void 0,this._backgroundColor=void 0,this._backgroundColorSubscription=void 0,this._backgroundPadding=void 0,this._backgroundPaddingSubscription=void 0,this._pixelOffset=void 0,this._pixelOffsetSubscription=void 0,this._eyeOffset=void 0,this._eyeOffsetSubscription=void 0,this._horizontalOrigin=void 0,this._horizontalOriginSubscription=void 0,this._verticalOrigin=void 0,this._verticalOriginSubscription=void 0,this._heightReference=void 0,this._heightReferenceSubscription=void 0,this._fillColor=void 0,this._fillColorSubscription=void 0,this._outlineColor=void 0,this._outlineColorSubscription=void 0,this._outlineWidth=void 0,this._outlineWidthSubscription=void 0,this._translucencyByDistance=void 0,this._translucencyByDistanceSubscription=void 0,this._pixelOffsetScaleByDistance=void 0,this._pixelOffsetScaleByDistanceSubscription=void 0,this._scaleByDistance=void 0,this._scaleByDistanceSubscription=void 0,this._distanceDisplayCondition=void 0,this._distanceDisplayConditionSubscription=void 0,this._disableDepthTestDistance=void 0,this._disableDepthTestDistanceSubscription=void 0,this.merge(e??G.EMPTY_OBJECT)}Object.defineProperties(qp.prototype,{definitionChanged:{get:function(){return this._definitionChanged}},show:te("show"),text:te("text"),font:te("font"),style:te("style"),scale:te("scale"),showBackground:te("showBackground"),backgroundColor:te("backgroundColor"),backgroundPadding:te("backgroundPadding"),pixelOffset:te("pixelOffset"),eyeOffset:te("eyeOffset"),horizontalOrigin:te("horizontalOrigin"),verticalOrigin:te("verticalOrigin"),heightReference:te("heightReference"),fillColor:te("fillColor"),outlineColor:te("outlineColor"),outlineWidth:te("outlineWidth"),translucencyByDistance:te("translucencyByDistance"),pixelOffsetScaleByDistance:te("pixelOffsetScaleByDistance"),scaleByDistance:te("scaleByDistance"),distanceDisplayCondition:te("distanceDisplayCondition"),disableDepthTestDistance:te("disableDepthTestDistance")});qp.prototype.clone=function(e){return c(e)?(e.show=this.show,e.text=this.text,e.font=this.font,e.style=this.style,e.scale=this.scale,e.showBackground=this.showBackground,e.backgroundColor=this.backgroundColor,e.backgroundPadding=this.backgroundPadding,e.pixelOffset=this.pixelOffset,e.eyeOffset=this.eyeOffset,e.horizontalOrigin=this.horizontalOrigin,e.verticalOrigin=this.verticalOrigin,e.heightReference=this.heightReference,e.fillColor=this.fillColor,e.outlineColor=this.outlineColor,e.outlineWidth=this.outlineWidth,e.translucencyByDistance=this.translucencyByDistance,e.pixelOffsetScaleByDistance=this.pixelOffsetScaleByDistance,e.scaleByDistance=this.scaleByDistance,e.distanceDisplayCondition=this.distanceDisplayCondition,e.disableDepthTestDistance=this.disableDepthTestDistance,e):new qp(this)};qp.prototype.merge=function(e){this.show=this.show??e.show,this.text=this.text??e.text,this.font=this.font??e.font,this.style=this.style??e.style,this.scale=this.scale??e.scale,this.showBackground=this.showBackground??e.showBackground,this.backgroundColor=this.backgroundColor??e.backgroundColor,this.backgroundPadding=this.backgroundPadding??e.backgroundPadding,this.pixelOffset=this.pixelOffset??e.pixelOffset,this.eyeOffset=this.eyeOffset??e.eyeOffset,this.horizontalOrigin=this.horizontalOrigin??e.horizontalOrigin,this.verticalOrigin=this.verticalOrigin??e.verticalOrigin,this.heightReference=this.heightReference??e.heightReference,this.fillColor=this.fillColor??e.fillColor,this.outlineColor=this.outlineColor??e.outlineColor,this.outlineWidth=this.outlineWidth??e.outlineWidth,this.translucencyByDistance=this.translucencyByDistance??e.translucencyByDistance,this.pixelOffsetScaleByDistance=this.pixelOffsetScaleByDistance??e.pixelOffsetScaleByDistance,this.scaleByDistance=this.scaleByDistance??e.scaleByDistance,this.distanceDisplayCondition=this.distanceDisplayCondition??e.distanceDisplayCondition,this.disableDepthTestDistance=this.disableDepthTestDistance??e.disableDepthTestDistance};var rO=qp;var KZ=new f(1,1,1),XZ=f.ZERO,ZZ=gt.IDENTITY;function aO(e,t,n){this.translation=f.clone(e??XZ),this.rotation=gt.clone(t??ZZ),this.scale=f.clone(n??KZ)}aO.prototype.equals=function(e){return this===e||c(e)&&f.equals(this.translation,e.translation)&&gt.equals(this.rotation,e.rotation)&&f.equals(this.scale,e.scale)};var Jp=aO;var JB=new Jp;function Kp(e){e=e??G.EMPTY_OBJECT,this._definitionChanged=new Le,this._translation=void 0,this._translationSubscription=void 0,this._rotation=void 0,this._rotationSubscription=void 0,this._scale=void 0,this._scaleSubscription=void 0,this.translation=e.translation,this.rotation=e.rotation,this.scale=e.scale}Object.defineProperties(Kp.prototype,{isConstant:{get:function(){return Pt.isConstant(this._translation)&&Pt.isConstant(this._rotation)&&Pt.isConstant(this._scale)}},definitionChanged:{get:function(){return this._definitionChanged}},translation:te("translation"),rotation:te("rotation"),scale:te("scale")});var $Z=new Ue;Kp.prototype.getValue=function(e,t){return c(e)||(e=Ue.now($Z)),c(t)||(t=new Jp),t.translation=Pt.getValueOrClonedDefault(this._translation,e,JB.translation,t.translation),t.rotation=Pt.getValueOrClonedDefault(this._rotation,e,JB.rotation,t.rotation),t.scale=Pt.getValueOrClonedDefault(this._scale,e,JB.scale,t.scale),t};Kp.prototype.equals=function(e){return this===e||e instanceof Kp&&Pt.equals(this._translation,e._translation)&&Pt.equals(this._rotation,e._rotation)&&Pt.equals(this._scale,e._scale)};var sO=Kp;function _l(e,t){this._propertyNames=[],this._definitionChanged=new Le,c(e)&&this.merge(e,t)}Object.defineProperties(_l.prototype,{propertyNames:{get:function(){return this._propertyNames}},isConstant:{get:function(){let e=this._propertyNames;for(let t=0,n=e.length;t<n;t++)if(!Pt.isConstant(this[e[t]]))return!1;return!0}},definitionChanged:{get:function(){return this._definitionChanged}}});_l.prototype.hasProperty=function(e){return this._propertyNames.indexOf(e)!==-1};function e$(e){return new Wa(e)}_l.prototype.addProperty=function(e,t,n){this._propertyNames.push(e),Object.defineProperty(this,e,te(e,!0,n??e$)),c(t)&&(this[e]=t),this._definitionChanged.raiseEvent(this)};_l.prototype.removeProperty=function(e){let n=this._propertyNames.indexOf(e);this._propertyNames.splice(n,1),delete this[e],this._definitionChanged.raiseEvent(this)};var t$=new Ue;_l.prototype.getValue=function(e,t){c(e)||(e=Ue.now(t$)),c(t)||(t={});let n=this._propertyNames;for(let i=0,o=n.length;i<o;i++){let r=n[i];t[r]=Pt.getValueOrUndefined(this[r],e,t[r])}return t};_l.prototype.merge=function(e,t){let n=this._propertyNames,i=c(e._propertyNames)?e._propertyNames:Object.keys(e);for(let o=0,r=i.length;o<r;o++){let a=i[o],s=this[a],A=e[a];s===void 0&&n.indexOf(a)===-1&&this.addProperty(a,void 0,t),A!==void 0&&(s!==void 0?c(s)&&c(s.merge)&&s.merge(A):c(A)&&c(A.merge)&&c(A.clone)?this[a]=A.clone():this[a]=A)}};function n$(e,t){let n=e._propertyNames,i=t._propertyNames,o=n.length;if(o!==i.length)return!1;for(let r=0;r<o;++r){let a=n[r];if(i.indexOf(a)===-1||!Pt.equals(e[a],t[a]))return!1}return!0}_l.prototype.equals=function(e){return this===e||e instanceof _l&&n$(this,e)};var Mu=_l;function cO(e){return new sO(e)}function i$(e){return new Mu(e,cO)}function o$(e){return new Mu(e)}function r$(e){return new Mu(e)}function Xp(e){this._definitionChanged=new Le,this._show=void 0,this._showSubscription=void 0,this._uri=void 0,this._uriSubscription=void 0,this._scale=void 0,this._scaleSubscription=void 0,this._hasVerticalExaggeration=void 0,this._hasVerticalExaggerationSubscription=void 0,this._enableVerticalExaggeration=void 0,this._enableVerticalExaggerationSubscription=void 0,this._minimumPixelSize=void 0,this._minimumPixelSizeSubscription=void 0,this._maximumScale=void 0,this._maximumScaleSubscription=void 0,this._incrementallyLoadTextures=void 0,this._incrementallyLoadTexturesSubscription=void 0,this._runAnimations=void 0,this._runAnimationsSubscription=void 0,this._clampAnimations=void 0,this._clampAnimationsSubscription=void 0,this._shadows=void 0,this._shadowsSubscription=void 0,this._heightReference=void 0,this._heightReferenceSubscription=void 0,this._silhouetteColor=void 0,this._silhouetteColorSubscription=void 0,this._silhouetteSize=void 0,this._silhouetteSizeSubscription=void 0,this._color=void 0,this._colorSubscription=void 0,this._colorBlendMode=void 0,this._colorBlendModeSubscription=void 0,this._colorBlendAmount=void 0,this._colorBlendAmountSubscription=void 0,this._imageBasedLightingFactor=void 0,this._imageBasedLightingFactorSubscription=void 0,this._environmentMapOptions=void 0,this._environmentMapOptionsSubscription=void 0,this._lightColor=void 0,this._lightColorSubscription=void 0,this._distanceDisplayCondition=void 0,this._distanceDisplayConditionSubscription=void 0,this._nodeTransformations=void 0,this._nodeTransformationsSubscription=void 0,this._articulations=void 0,this._articulationsSubscription=void 0,this._clippingPlanes=void 0,this._clippingPlanesSubscription=void 0,this._customShader=void 0,this._customShaderSubscription=void 0,this.merge(e??G.EMPTY_OBJECT)}Object.defineProperties(Xp.prototype,{definitionChanged:{get:function(){return this._definitionChanged}},show:te("show"),uri:te("uri"),scale:te("scale"),enableVerticalExaggeration:te("enableVerticalExaggeration"),minimumPixelSize:te("minimumPixelSize"),maximumScale:te("maximumScale"),incrementallyLoadTextures:te("incrementallyLoadTextures"),runAnimations:te("runAnimations"),clampAnimations:te("clampAnimations"),shadows:te("shadows"),heightReference:te("heightReference"),silhouetteColor:te("silhouetteColor"),silhouetteSize:te("silhouetteSize"),color:te("color"),colorBlendMode:te("colorBlendMode"),colorBlendAmount:te("colorBlendAmount"),imageBasedLightingFactor:te("imageBasedLightingFactor"),environmentMapOptions:te("environmentMapOptions",void 0,r$),lightColor:te("lightColor"),distanceDisplayCondition:te("distanceDisplayCondition"),nodeTransformations:te("nodeTransformations",void 0,i$),articulations:te("articulations",void 0,o$),clippingPlanes:te("clippingPlanes"),customShader:te("customShader")});Xp.prototype.clone=function(e){return c(e)?(e.show=this.show,e.uri=this.uri,e.scale=this.scale,e.enableVerticalExaggeration=this.enableVerticalExaggeration,e.minimumPixelSize=this.minimumPixelSize,e.maximumScale=this.maximumScale,e.incrementallyLoadTextures=this.incrementallyLoadTextures,e.runAnimations=this.runAnimations,e.clampAnimations=this.clampAnimations,e.heightReference=this._heightReference,e.silhouetteColor=this.silhouetteColor,e.silhouetteSize=this.silhouetteSize,e.color=this.color,e.colorBlendMode=this.colorBlendMode,e.colorBlendAmount=this.colorBlendAmount,e.imageBasedLightingFactor=this.imageBasedLightingFactor,e.environmentMapOptions=this.environmentMapOptions,e.lightColor=this.lightColor,e.distanceDisplayCondition=this.distanceDisplayCondition,e.nodeTransformations=this.nodeTransformations,e.articulations=this.articulations,e.clippingPlanes=this.clippingPlanes,e.customShader=this.customShader,e):new Xp(this)};Xp.prototype.merge=function(e){this.show=this.show??e.show,this.uri=this.uri??e.uri,this.scale=this.scale??e.scale,this.enableVerticalExaggeration=this.enableVerticalExaggeration??e.enableVerticalExaggeration,this.minimumPixelSize=this.minimumPixelSize??e.minimumPixelSize,this.maximumScale=this.maximumScale??e.maximumScale,this.incrementallyLoadTextures=this.incrementallyLoadTextures??e.incrementallyLoadTextures,this.runAnimations=this.runAnimations??e.runAnimations,this.clampAnimations=this.clampAnimations??e.clampAnimations,this.shadows=this.shadows??e.shadows,this.heightReference=this.heightReference??e.heightReference,this.silhouetteColor=this.silhouetteColor??e.silhouetteColor,this.silhouetteSize=this.silhouetteSize??e.silhouetteSize,this.color=this.color??e.color,this.colorBlendMode=this.colorBlendMode??e.colorBlendMode,this.colorBlendAmount=this.colorBlendAmount??e.colorBlendAmount,this.imageBasedLightingFactor=this.imageBasedLightingFactor??e.imageBasedLightingFactor,this.environmentMapOptions=this.environmentMapOptions??e.environmentMapOptions,this.lightColor=this.lightColor??e.lightColor,this.distanceDisplayCondition=this.distanceDisplayCondition??e.distanceDisplayCondition,this.clippingPlanes=this.clippingPlanes??e.clippingPlanes,this.customShader=this.customShader??e.customShader;let t=e.nodeTransformations;if(c(t)){let i=this.nodeTransformations;c(i)?i.merge(t):this.nodeTransformations=new Mu(t,cO)}let n=e.articulations;if(c(n)){let i=this.articulations;c(i)?i.merge(n):this.articulations=new Mu(n)}};var AO=Xp;function Zp(e){this._definitionChanged=new Le,this._show=void 0,this._showSubscription=void 0,this._uri=void 0,this._uriSubscription=void 0,this._maximumScreenSpaceError=void 0,this._maximumScreenSpaceErrorSubscription=void 0,this.merge(e??G.EMPTY_OBJECT)}Object.defineProperties(Zp.prototype,{definitionChanged:{get:function(){return this._definitionChanged}},show:te("show"),uri:te("uri"),maximumScreenSpaceError:te("maximumScreenSpaceError")});Zp.prototype.clone=function(e){return c(e)?(e.show=this.show,e.uri=this.uri,e.maximumScreenSpaceError=this.maximumScreenSpaceError,e):new Zp(this)};Zp.prototype.merge=function(e){this.show=this.show??e.show,this.uri=this.uri??e.uri,this.maximumScreenSpaceError=this.maximumScreenSpaceError??e.maximumScreenSpaceError};var lO=Zp;function $p(e){this._definitionChanged=new Le,this._show=void 0,this._showSubscription=void 0,this._leadTime=void 0,this._leadTimeSubscription=void 0,this._trailTime=void 0,this._trailTimeSubscription=void 0,this._width=void 0,this._widthSubscription=void 0,this._resolution=void 0,this._resolutionSubscription=void 0,this._material=void 0,this._materialSubscription=void 0,this._distanceDisplayCondition=void 0,this._distanceDisplayConditionSubscription=void 0,this.merge(e??G.EMPTY_OBJECT)}Object.defineProperties($p.prototype,{definitionChanged:{get:function(){return this._definitionChanged}},show:te("show"),leadTime:te("leadTime"),trailTime:te("trailTime"),width:te("width"),resolution:te("resolution"),material:Wi("material"),distanceDisplayCondition:te("distanceDisplayCondition")});$p.prototype.clone=function(e){return c(e)?(e.show=this.show,e.leadTime=this.leadTime,e.trailTime=this.trailTime,e.width=this.width,e.resolution=this.resolution,e.material=this.material,e.distanceDisplayCondition=this.distanceDisplayCondition,e):new $p(this)};$p.prototype.merge=function(e){this.show=this.show??e.show,this.leadTime=this.leadTime??e.leadTime,this.trailTime=this.trailTime??e.trailTime,this.width=this.width??e.width,this.resolution=this.resolution??e.resolution,this.material=this.material??e.material,this.distanceDisplayCondition=this.distanceDisplayCondition??e.distanceDisplayCondition};var uO=$p;function eg(e){this._definitionChanged=new Le,this._show=void 0,this._showSubscription=void 0,this._plane=void 0,this._planeSubscription=void 0,this._dimensions=void 0,this._dimensionsSubscription=void 0,this._fill=void 0,this._fillSubscription=void 0,this._material=void 0,this._materialSubscription=void 0,this._outline=void 0,this._outlineSubscription=void 0,this._outlineColor=void 0,this._outlineColorSubscription=void 0,this._outlineWidth=void 0,this._outlineWidthSubscription=void 0,this._shadows=void 0,this._shadowsSubscription=void 0,this._distanceDisplayCondition=void 0,this._distanceDisplayConditionSubscription=void 0,this.merge(e??G.EMPTY_OBJECT)}Object.defineProperties(eg.prototype,{definitionChanged:{get:function(){return this._definitionChanged}},show:te("show"),plane:te("plane"),dimensions:te("dimensions"),fill:te("fill"),material:Wi("material"),outline:te("outline"),outlineColor:te("outlineColor"),outlineWidth:te("outlineWidth"),shadows:te("shadows"),distanceDisplayCondition:te("distanceDisplayCondition")});eg.prototype.clone=function(e){return c(e)?(e.show=this.show,e.plane=this.plane,e.dimensions=this.dimensions,e.fill=this.fill,e.material=this.material,e.outline=this.outline,e.outlineColor=this.outlineColor,e.outlineWidth=this.outlineWidth,e.shadows=this.shadows,e.distanceDisplayCondition=this.distanceDisplayCondition,e):new eg(this)};eg.prototype.merge=function(e){this.show=this.show??e.show,this.plane=this.plane??e.plane,this.dimensions=this.dimensions??e.dimensions,this.fill=this.fill??e.fill,this.material=this.material??e.material,this.outline=this.outline??e.outline,this.outlineColor=this.outlineColor??e.outlineColor,this.outlineWidth=this.outlineWidth??e.outlineWidth,this.shadows=this.shadows??e.shadows,this.distanceDisplayCondition=this.distanceDisplayCondition??e.distanceDisplayCondition};var fO=eg;function tg(e){this._definitionChanged=new Le,this._show=void 0,this._showSubscription=void 0,this._pixelSize=void 0,this._pixelSizeSubscription=void 0,this._heightReference=void 0,this._heightReferenceSubscription=void 0,this._color=void 0,this._colorSubscription=void 0,this._outlineColor=void 0,this._outlineColorSubscription=void 0,this._outlineWidth=void 0,this._outlineWidthSubscription=void 0,this._scaleByDistance=void 0,this._scaleByDistanceSubscription=void 0,this._translucencyByDistance=void 0,this._translucencyByDistanceSubscription=void 0,this._distanceDisplayCondition=void 0,this._distanceDisplayConditionSubscription=void 0,this._disableDepthTestDistance=void 0,this._disableDepthTestDistanceSubscription=void 0,this._splitDirection=void 0,this._splitDirectionSubscription=void 0,this.merge(e??G.EMPTY_OBJECT)}Object.defineProperties(tg.prototype,{definitionChanged:{get:function(){return this._definitionChanged}},show:te("show"),pixelSize:te("pixelSize"),heightReference:te("heightReference"),color:te("color"),outlineColor:te("outlineColor"),outlineWidth:te("outlineWidth"),scaleByDistance:te("scaleByDistance"),translucencyByDistance:te("translucencyByDistance"),distanceDisplayCondition:te("distanceDisplayCondition"),disableDepthTestDistance:te("disableDepthTestDistance"),splitDirection:te("splitDirection")});tg.prototype.clone=function(e){return c(e)?(e.show=this.show,e.pixelSize=this.pixelSize,e.heightReference=this.heightReference,e.color=this.color,e.outlineColor=this.outlineColor,e.outlineWidth=this.outlineWidth,e.scaleByDistance=this.scaleByDistance,e.translucencyByDistance=this._translucencyByDistance,e.distanceDisplayCondition=this.distanceDisplayCondition,e.disableDepthTestDistance=this.disableDepthTestDistance,e.splitDirection=this.splitDirection,e):new tg(this)};tg.prototype.merge=function(e){this.show=this.show??e.show,this.pixelSize=this.pixelSize??e.pixelSize,this.heightReference=this.heightReference??e.heightReference,this.color=this.color??e.color,this.outlineColor=this.outlineColor??e.outlineColor,this.outlineWidth=this.outlineWidth??e.outlineWidth,this.scaleByDistance=this.scaleByDistance??e.scaleByDistance,this.translucencyByDistance=this._translucencyByDistance??e.translucencyByDistance,this.distanceDisplayCondition=this.distanceDisplayCondition??e.distanceDisplayCondition,this.disableDepthTestDistance=this.disableDepthTestDistance??e.disableDepthTestDistance,this.splitDirection=this.splitDirection??e.splitDirection};var dO=tg;function a$(e,t){this.positions=c(e)?e:[],this.holes=c(t)?t:[]}var M_=a$;function s$(e){return Array.isArray(e)&&(e=new M_(e)),new Wa(e)}function ng(e){this._definitionChanged=new Le,this._show=void 0,this._showSubscription=void 0,this._hierarchy=void 0,this._hierarchySubscription=void 0,this._height=void 0,this._heightSubscription=void 0,this._heightReference=void 0,this._heightReferenceSubscription=void 0,this._extrudedHeight=void 0,this._extrudedHeightSubscription=void 0,this._extrudedHeightReference=void 0,this._extrudedHeightReferenceSubscription=void 0,this._stRotation=void 0,this._stRotationSubscription=void 0,this._granularity=void 0,this._granularitySubscription=void 0,this._fill=void 0,this._fillSubscription=void 0,this._material=void 0,this._materialSubscription=void 0,this._outline=void 0,this._outlineSubscription=void 0,this._outlineColor=void 0,this._outlineColorSubscription=void 0,this._outlineWidth=void 0,this._outlineWidthSubscription=void 0,this._perPositionHeight=void 0,this._perPositionHeightSubscription=void 0,this._closeTop=void 0,this._closeTopSubscription=void 0,this._closeBottom=void 0,this._closeBottomSubscription=void 0,this._arcType=void 0,this._arcTypeSubscription=void 0,this._shadows=void 0,this._shadowsSubscription=void 0,this._distanceDisplayCondition=void 0,this._distanceDisplayConditionSubscription=void 0,this._classificationType=void 0,this._classificationTypeSubscription=void 0,this._zIndex=void 0,this._zIndexSubscription=void 0,this._textureCoordinates=void 0,this._textureCoordinatesSubscription=void 0,this.merge(e??G.EMPTY_OBJECT)}Object.defineProperties(ng.prototype,{definitionChanged:{get:function(){return this._definitionChanged}},show:te("show"),hierarchy:te("hierarchy",void 0,s$),height:te("height"),heightReference:te("heightReference"),extrudedHeight:te("extrudedHeight"),extrudedHeightReference:te("extrudedHeightReference"),stRotation:te("stRotation"),granularity:te("granularity"),fill:te("fill"),material:Wi("material"),outline:te("outline"),outlineColor:te("outlineColor"),outlineWidth:te("outlineWidth"),perPositionHeight:te("perPositionHeight"),closeTop:te("closeTop"),closeBottom:te("closeBottom"),arcType:te("arcType"),shadows:te("shadows"),distanceDisplayCondition:te("distanceDisplayCondition"),classificationType:te("classificationType"),zIndex:te("zIndex"),textureCoordinates:te("textureCoordinates")});ng.prototype.clone=function(e){return c(e)?(e.show=this.show,e.hierarchy=this.hierarchy,e.height=this.height,e.heightReference=this.heightReference,e.extrudedHeight=this.extrudedHeight,e.extrudedHeightReference=this.extrudedHeightReference,e.stRotation=this.stRotation,e.granularity=this.granularity,e.fill=this.fill,e.material=this.material,e.outline=this.outline,e.outlineColor=this.outlineColor,e.outlineWidth=this.outlineWidth,e.perPositionHeight=this.perPositionHeight,e.closeTop=this.closeTop,e.closeBottom=this.closeBottom,e.arcType=this.arcType,e.shadows=this.shadows,e.distanceDisplayCondition=this.distanceDisplayCondition,e.classificationType=this.classificationType,e.zIndex=this.zIndex,e.textureCoordinates=this.textureCoordinates,e):new ng(this)};ng.prototype.merge=function(e){this.show=this.show??e.show,this.hierarchy=this.hierarchy??e.hierarchy,this.height=this.height??e.height,this.heightReference=this.heightReference??e.heightReference,this.extrudedHeight=this.extrudedHeight??e.extrudedHeight,this.extrudedHeightReference=this.extrudedHeightReference??e.extrudedHeightReference,this.stRotation=this.stRotation??e.stRotation,this.granularity=this.granularity??e.granularity,this.fill=this.fill??e.fill,this.material=this.material??e.material,this.outline=this.outline??e.outline,this.outlineColor=this.outlineColor??e.outlineColor,this.outlineWidth=this.outlineWidth??e.outlineWidth,this.perPositionHeight=this.perPositionHeight??e.perPositionHeight,this.closeTop=this.closeTop??e.closeTop,this.closeBottom=this.closeBottom??e.closeBottom,this.arcType=this.arcType??e.arcType,this.shadows=this.shadows??e.shadows,this.distanceDisplayCondition=this.distanceDisplayCondition??e.distanceDisplayCondition,this.classificationType=this.classificationType??e.classificationType,this.zIndex=this.zIndex??e.zIndex,this.textureCoordinates=this.textureCoordinates??e.textureCoordinates};var hO=ng;function ig(e){this._definitionChanged=new Le,this._show=void 0,this._showSubscription=void 0,this._positions=void 0,this._positionsSubscription=void 0,this._width=void 0,this._widthSubscription=void 0,this._granularity=void 0,this._granularitySubscription=void 0,this._material=void 0,this._materialSubscription=void 0,this._depthFailMaterial=void 0,this._depthFailMaterialSubscription=void 0,this._arcType=void 0,this._arcTypeSubscription=void 0,this._clampToGround=void 0,this._clampToGroundSubscription=void 0,this._shadows=void 0,this._shadowsSubscription=void 0,this._distanceDisplayCondition=void 0,this._distanceDisplayConditionSubscription=void 0,this._classificationType=void 0,this._classificationTypeSubscription=void 0,this._zIndex=void 0,this._zIndexSubscription=void 0,this.merge(e??G.EMPTY_OBJECT)}Object.defineProperties(ig.prototype,{definitionChanged:{get:function(){return this._definitionChanged}},show:te("show"),positions:te("positions"),width:te("width"),granularity:te("granularity"),material:Wi("material"),depthFailMaterial:Wi("depthFailMaterial"),arcType:te("arcType"),clampToGround:te("clampToGround"),shadows:te("shadows"),distanceDisplayCondition:te("distanceDisplayCondition"),classificationType:te("classificationType"),zIndex:te("zIndex")});ig.prototype.clone=function(e){return c(e)?(e.show=this.show,e.positions=this.positions,e.width=this.width,e.granularity=this.granularity,e.material=this.material,e.depthFailMaterial=this.depthFailMaterial,e.arcType=this.arcType,e.clampToGround=this.clampToGround,e.shadows=this.shadows,e.distanceDisplayCondition=this.distanceDisplayCondition,e.classificationType=this.classificationType,e.zIndex=this.zIndex,e):new ig(this)};ig.prototype.merge=function(e){this.show=this.show??e.show,this.positions=this.positions??e.positions,this.width=this.width??e.width,this.granularity=this.granularity??e.granularity,this.material=this.material??e.material,this.depthFailMaterial=this.depthFailMaterial??e.depthFailMaterial,this.arcType=this.arcType??e.arcType,this.clampToGround=this.clampToGround??e.clampToGround,this.shadows=this.shadows??e.shadows,this.distanceDisplayCondition=this.distanceDisplayCondition??e.distanceDisplayCondition,this.classificationType=this.classificationType??e.classificationType,this.zIndex=this.zIndex??e.zIndex};var mO=ig;function og(e){this._definitionChanged=new Le,this._show=void 0,this._showSubscription=void 0,this._positions=void 0,this._positionsSubscription=void 0,this._shape=void 0,this._shapeSubscription=void 0,this._cornerType=void 0,this._cornerTypeSubscription=void 0,this._granularity=void 0,this._granularitySubscription=void 0,this._fill=void 0,this._fillSubscription=void 0,this._material=void 0,this._materialSubscription=void 0,this._outline=void 0,this._outlineSubscription=void 0,this._outlineColor=void 0,this._outlineColorSubscription=void 0,this._outlineWidth=void 0,this._outlineWidthSubscription=void 0,this._shadows=void 0,this._shadowsSubscription=void 0,this._distanceDisplayCondition=void 0,this._distanceDisplayConditionSubsription=void 0,this.merge(e??G.EMPTY_OBJECT)}Object.defineProperties(og.prototype,{definitionChanged:{get:function(){return this._definitionChanged}},show:te("show"),positions:te("positions"),shape:te("shape"),cornerType:te("cornerType"),granularity:te("granularity"),fill:te("fill"),material:Wi("material"),outline:te("outline"),outlineColor:te("outlineColor"),outlineWidth:te("outlineWidth"),shadows:te("shadows"),distanceDisplayCondition:te("distanceDisplayCondition")});og.prototype.clone=function(e){return c(e)?(e.show=this.show,e.positions=this.positions,e.shape=this.shape,e.cornerType=this.cornerType,e.granularity=this.granularity,e.fill=this.fill,e.material=this.material,e.outline=this.outline,e.outlineColor=this.outlineColor,e.outlineWidth=this.outlineWidth,e.shadows=this.shadows,e.distanceDisplayCondition=this.distanceDisplayCondition,e):new og(this)};og.prototype.merge=function(e){this.show=this.show??e.show,this.positions=this.positions??e.positions,this.shape=this.shape??e.shape,this.cornerType=this.cornerType??e.cornerType,this.granularity=this.granularity??e.granularity,this.fill=this.fill??e.fill,this.material=this.material??e.material,this.outline=this.outline??e.outline,this.outlineColor=this.outlineColor??e.outlineColor,this.outlineWidth=this.outlineWidth??e.outlineWidth,this.shadows=this.shadows??e.shadows,this.distanceDisplayCondition=this.distanceDisplayCondition??e.distanceDisplayCondition};var pO=og;function rg(e){this._definitionChanged=new Le,this._show=void 0,this._showSubscription=void 0,this._coordinates=void 0,this._coordinatesSubscription=void 0,this._height=void 0,this._heightSubscription=void 0,this._heightReference=void 0,this._heightReferenceSubscription=void 0,this._extrudedHeight=void 0,this._extrudedHeightSubscription=void 0,this._extrudedHeightReference=void 0,this._extrudedHeightReferenceSubscription=void 0,this._rotation=void 0,this._rotationSubscription=void 0,this._stRotation=void 0,this._stRotationSubscription=void 0,this._granularity=void 0,this._granularitySubscription=void 0,this._fill=void 0,this._fillSubscription=void 0,this._material=void 0,this._materialSubscription=void 0,this._outline=void 0,this._outlineSubscription=void 0,this._outlineColor=void 0,this._outlineColorSubscription=void 0,this._outlineWidth=void 0,this._outlineWidthSubscription=void 0,this._shadows=void 0,this._shadowsSubscription=void 0,this._distanceDisplayCondition=void 0,this._distancedisplayConditionSubscription=void 0,this._classificationType=void 0,this._classificationTypeSubscription=void 0,this._zIndex=void 0,this._zIndexSubscription=void 0,this.merge(e??G.EMPTY_OBJECT)}Object.defineProperties(rg.prototype,{definitionChanged:{get:function(){return this._definitionChanged}},show:te("show"),coordinates:te("coordinates"),height:te("height"),heightReference:te("heightReference"),extrudedHeight:te("extrudedHeight"),extrudedHeightReference:te("extrudedHeightReference"),rotation:te("rotation"),stRotation:te("stRotation"),granularity:te("granularity"),fill:te("fill"),material:Wi("material"),outline:te("outline"),outlineColor:te("outlineColor"),outlineWidth:te("outlineWidth"),shadows:te("shadows"),distanceDisplayCondition:te("distanceDisplayCondition"),classificationType:te("classificationType"),zIndex:te("zIndex")});rg.prototype.clone=function(e){return c(e)?(e.show=this.show,e.coordinates=this.coordinates,e.height=this.height,e.heightReference=this.heightReference,e.extrudedHeight=this.extrudedHeight,e.extrudedHeightReference=this.extrudedHeightReference,e.rotation=this.rotation,e.stRotation=this.stRotation,e.granularity=this.granularity,e.fill=this.fill,e.material=this.material,e.outline=this.outline,e.outlineColor=this.outlineColor,e.outlineWidth=this.outlineWidth,e.shadows=this.shadows,e.distanceDisplayCondition=this.distanceDisplayCondition,e.classificationType=this.classificationType,e.zIndex=this.zIndex,e):new rg(this)};rg.prototype.merge=function(e){this.show=this.show??e.show,this.coordinates=this.coordinates??e.coordinates,this.height=this.height??e.height,this.heightReference=this.heightReference??e.heightReference,this.extrudedHeight=this.extrudedHeight??e.extrudedHeight,this.extrudedHeightReference=this.extrudedHeightReference??e.extrudedHeightReference,this.rotation=this.rotation??e.rotation,this.stRotation=this.stRotation??e.stRotation,this.granularity=this.granularity??e.granularity,this.fill=this.fill??e.fill,this.material=this.material??e.material,this.outline=this.outline??e.outline,this.outlineColor=this.outlineColor??e.outlineColor,this.outlineWidth=this.outlineWidth??e.outlineWidth,this.shadows=this.shadows??e.shadows,this.distanceDisplayCondition=this.distanceDisplayCondition??e.distanceDisplayCondition,this.classificationType=this.classificationType??e.classificationType,this.zIndex=this.zIndex??e.zIndex};var gO=rg;function ag(e){this._definitionChanged=new Le,this._show=void 0,this._showSubscription=void 0,this._positions=void 0,this._positionsSubscription=void 0,this._minimumHeights=void 0,this._minimumHeightsSubscription=void 0,this._maximumHeights=void 0,this._maximumHeightsSubscription=void 0,this._granularity=void 0,this._granularitySubscription=void 0,this._fill=void 0,this._fillSubscription=void 0,this._material=void 0,this._materialSubscription=void 0,this._outline=void 0,this._outlineSubscription=void 0,this._outlineColor=void 0,this._outlineColorSubscription=void 0,this._outlineWidth=void 0,this._outlineWidthSubscription=void 0,this._shadows=void 0,this._shadowsSubscription=void 0,this._distanceDisplayCondition=void 0,this._distanceDisplayConditionSubscription=void 0,this.merge(e??G.EMPTY_OBJECT)}Object.defineProperties(ag.prototype,{definitionChanged:{get:function(){return this._definitionChanged}},show:te("show"),positions:te("positions"),minimumHeights:te("minimumHeights"),maximumHeights:te("maximumHeights"),granularity:te("granularity"),fill:te("fill"),material:Wi("material"),outline:te("outline"),outlineColor:te("outlineColor"),outlineWidth:te("outlineWidth"),shadows:te("shadows"),distanceDisplayCondition:te("distanceDisplayCondition")});ag.prototype.clone=function(e){return c(e)?(e.show=this.show,e.positions=this.positions,e.minimumHeights=this.minimumHeights,e.maximumHeights=this.maximumHeights,e.granularity=this.granularity,e.fill=this.fill,e.material=this.material,e.outline=this.outline,e.outlineColor=this.outlineColor,e.outlineWidth=this.outlineWidth,e.shadows=this.shadows,e.distanceDisplayCondition=this.distanceDisplayCondition,e):new ag(this)};ag.prototype.merge=function(e){this.show=this.show??e.show,this.positions=this.positions??e.positions,this.minimumHeights=this.minimumHeights??e.minimumHeights,this.maximumHeights=this.maximumHeights??e.maximumHeights,this.granularity=this.granularity??e.granularity,this.fill=this.fill??e.fill,this.material=this.material??e.material,this.outline=this.outline??e.outline,this.outlineColor=this.outlineColor??e.outlineColor,this.outlineWidth=this.outlineWidth??e.outlineWidth,this.shadows=this.shadows??e.shadows,this.distanceDisplayCondition=this.distanceDisplayCondition??e.distanceDisplayCondition};var CO=ag;var c$=new ue,KB=[];function A$(e){return new eO(e)}function l$(e){return te(e,void 0,A$)}function rr(e,t){return te(e,void 0,function(n){return n instanceof t?n:new t(n)})}function Xs(e){e=e??G.EMPTY_OBJECT;let t=e.id;c(t)||(t=ji()),this._availability=void 0,this._id=t,this._definitionChanged=new Le,this._name=e.name,this._show=e.show??!0,this._trackingReferenceFrame=e.trackingReferenceFrame??lF.AUTODETECT,this._parent=void 0,this._propertyNames=["billboard","box","corridor","cylinder","description","ellipse","ellipsoid","label","model","tileset","orientation","path","plane","point","polygon","polyline","polylineVolume","position","properties","rectangle","viewFrom","wall",...KB],this._billboard=void 0,this._billboardSubscription=void 0,this._box=void 0,this._boxSubscription=void 0,this._corridor=void 0,this._corridorSubscription=void 0,this._cylinder=void 0,this._cylinderSubscription=void 0,this._description=void 0,this._descriptionSubscription=void 0,this._ellipse=void 0,this._ellipseSubscription=void 0,this._ellipsoid=void 0,this._ellipsoidSubscription=void 0,this._label=void 0,this._labelSubscription=void 0,this._model=void 0,this._modelSubscription=void 0,this._tileset=void 0,this._tilesetSubscription=void 0,this._orientation=void 0,this._orientationSubscription=void 0,this._path=void 0,this._pathSubscription=void 0,this._plane=void 0,this._planeSubscription=void 0,this._point=void 0,this._pointSubscription=void 0,this._polygon=void 0,this._polygonSubscription=void 0,this._polyline=void 0,this._polylineSubscription=void 0,this._polylineVolume=void 0,this._polylineVolumeSubscription=void 0,this._position=void 0,this._positionSubscription=void 0,this._properties=void 0,this._propertiesSubscription=void 0,this._rectangle=void 0,this._rectangleSubscription=void 0,this._viewFrom=void 0,this._viewFromSubscription=void 0,this._wall=void 0,this._wallSubscription=void 0,this._children=[],this.entityCollection=void 0,this.parent=e.parent,this.merge(e)}function XB(e,t,n){let i=t.length;for(let o=0;o<i;o++){let r=t[o],a=r._show;(!n&&a)!==(n&&a)&&XB(r,r._children,n)}e._definitionChanged.raiseEvent(e,"isShowing",n,!n)}Object.defineProperties(Xs.prototype,{availability:Vp("availability"),id:{get:function(){return this._id}},definitionChanged:{get:function(){return this._definitionChanged}},name:Vp("name"),show:{get:function(){return this._show},set:function(e){if(e===this._show)return;let t=this.isShowing;this._show=e;let n=this.isShowing;t!==n&&XB(this,this._children,n),this._definitionChanged.raiseEvent(this,"show",e,!e)}},trackingReferenceFrame:Vp("trackingReferenceFrame"),isShowing:{get:function(){return this._show&&(!c(this.entityCollection)||this.entityCollection.show)&&(!c(this._parent)||this._parent.isShowing)}},parent:{get:function(){return this._parent},set:function(e){let t=this._parent;if(t===e)return;let n=this.isShowing;if(c(t)){let o=t._children.indexOf(this);t._children.splice(o,1)}this._parent=e,c(e)&&e._children.push(this);let i=this.isShowing;n!==i&&XB(this,this._children,i),this._definitionChanged.raiseEvent(this,"parent",e,t)}},propertyNames:{get:function(){return this._propertyNames}},billboard:rr("billboard",BN),box:rr("box",XF),corridor:rr("corridor",tO),cylinder:rr("cylinder",nO),description:te("description"),ellipse:rr("ellipse",iO),ellipsoid:rr("ellipsoid",oO),label:rr("label",rO),model:rr("model",AO),tileset:rr("tileset",lO),orientation:te("orientation"),path:rr("path",uO),plane:rr("plane",fO),point:rr("point",dO),polygon:rr("polygon",hO),polyline:rr("polyline",mO),polylineVolume:rr("polylineVolume",pO),properties:rr("properties",Mu),position:l$("position"),rectangle:rr("rectangle",gO),viewFrom:te("viewFrom"),wall:rr("wall",CO)});Xs.registerEntityType=function(e,t){Object.defineProperties(Xs.prototype,{[e]:rr(e,t)}),KB.includes(e)||KB.push(e)};Xs.prototype.isAvailable=function(e){let t=this._availability;return!c(t)||t.contains(e)};Xs.prototype.addProperty=function(e){this._propertyNames.push(e),Object.defineProperty(this,e,Vp(e,!0))};Xs.prototype.removeProperty=function(e){let n=this._propertyNames.indexOf(e);this._propertyNames.splice(n,1),delete this[e]};Xs.prototype.merge=function(e){this.name=this.name??e.name,this.availability=this.availability??e.availability;let t=this._propertyNames,n=c(e._propertyNames)?e._propertyNames:Object.keys(e),i=n.length;for(let o=0;o<i;o++){let r=n[o];if(r==="parent"||r==="name"||r==="availability"||r==="children")continue;let a=this[r],s=e[r];!c(a)&&t.indexOf(r)===-1&&this.addProperty(r),c(s)&&(c(a)?c(a.merge)&&a.merge(s):c(s.merge)&&c(s.clone)?this[r]=s.clone():this[r]=s)}};var EO=new ne,_O=new f,IO=new gt;Xs.prototype.computeModelMatrix=function(e,t){let n=Pt.getValueOrUndefined(this._position,e,_O);if(!c(n))return;let i=Pt.getValueOrUndefined(this._orientation,e,IO);return c(i)?t=Q.fromRotationTranslation(ne.fromQuaternion(i,EO),n,t):t=sn.eastNorthUpToFixedFrame(n,void 0,t),t};Xs.prototype.computeModelMatrixForHeightReference=function(e,t,n,i,o){let r=Pt.getValueOrDefault(t,e,Nr.NONE),a=Pt.getValueOrUndefined(this._position,e,_O);if(r===Nr.NONE||!c(a)||f.equalsEpsilon(a,f.ZERO,S.EPSILON8))return this.computeModelMatrix(e,o);let s=i.cartesianToCartographic(a,c$);Zf(r)?s.height=n:s.height+=n,a=i.cartographicToCartesian(s,a);let A=Pt.getValueOrUndefined(this._orientation,e,IO);return c(A)?o=Q.fromRotationTranslation(ne.fromQuaternion(A,EO),a,o):o=sn.eastNorthUpToFixedFrame(a,void 0,o),o};Xs.supportsMaterialsforEntitiesOnTerrain=function(e){return nd.supportsMaterials(e)};Xs.supportsPolylinesOnTerrain=function(e){return zp.isSupported(e)};var yO=Xs;var u$=new _A(J.WHITE),f$=new Wa(!0),d$=new Wa(!0),h$=new Wa(!1),m$=new Wa(J.BLACK),p$=new Wa(Yo.DISABLED),g$=new Wa(new to),C$=new Wa(wn.BOTH);function Ea(e){let t=e.entity,n=e.geometryPropertyName;this._entity=t,this._scene=e.scene,this._fillEnabled=!1,this._isClosed=!1,this._onTerrain=!1,this._dynamic=!1,this._outlineEnabled=!1,this._geometryChanged=new Le,this._showProperty=void 0,this._materialProperty=void 0,this._showOutlineProperty=void 0,this._outlineColorProperty=void 0,this._outlineWidth=1,this._shadowsProperty=void 0,this._distanceDisplayConditionProperty=void 0,this._classificationTypeProperty=void 0,this._options=e.geometryOptions,this._geometryPropertyName=n,this._id=`${n}-${t.id}`,this._observedPropertyNames=e.observedPropertyNames,this._supportsMaterialsforEntitiesOnTerrain=yO.supportsMaterialsforEntitiesOnTerrain(e.scene)}Object.defineProperties(Ea.prototype,{id:{get:function(){return this._id}},entity:{get:function(){return this._entity}},fillEnabled:{get:function(){return this._fillEnabled}},hasConstantFill:{get:function(){return!this._fillEnabled||!c(this._entity.availability)&&Pt.isConstant(this._showProperty)&&Pt.isConstant(this._fillProperty)}},fillMaterialProperty:{get:function(){return this._materialProperty}},outlineEnabled:{get:function(){return this._outlineEnabled}},hasConstantOutline:{get:function(){return!this._outlineEnabled||!c(this._entity.availability)&&Pt.isConstant(this._showProperty)&&Pt.isConstant(this._showOutlineProperty)}},outlineColorProperty:{get:function(){return this._outlineColorProperty}},outlineWidth:{get:function(){return this._outlineWidth}},shadowsProperty:{get:function(){return this._shadowsProperty}},distanceDisplayConditionProperty:{get:function(){return this._distanceDisplayConditionProperty}},classificationTypeProperty:{get:function(){return this._classificationTypeProperty}},isDynamic:{get:function(){return this._dynamic}},isClosed:{get:function(){return this._isClosed}},onTerrain:{get:function(){return this._onTerrain}},geometryChanged:{get:function(){return this._geometryChanged}}});Ea.prototype.isOutlineVisible=function(e){let t=this._entity;return(this._outlineEnabled&&t.isAvailable(e)&&this._showProperty.getValue(e)&&this._showOutlineProperty.getValue(e))??!1};Ea.prototype.isFilled=function(e){let t=this._entity;return(this._fillEnabled&&t.isAvailable(e)&&this._showProperty.getValue(e)&&this._fillProperty.getValue(e))??!1};Ea.prototype.createFillGeometryInstance=be.throwInstantiationError;Ea.prototype.createOutlineGeometryInstance=be.throwInstantiationError;Ea.prototype.isDestroyed=function(){return!1};Ea.prototype.destroy=function(){me(this)};Ea.prototype._isHidden=function(e,t){let n=t.show;return c(n)&&n.isConstant&&!n.getValue(wu.MINIMUM_VALUE)};Ea.prototype._isOnTerrain=function(e,t){return!1};Ea.prototype._getIsClosed=function(e){return!0};Ea.prototype._isDynamic=be.throwInstantiationError;Ea.prototype._setStaticOptions=be.throwInstantiationError;Ea.prototype._onEntityPropertyChanged=function(e,t,n,i){if(this._observedPropertyNames.indexOf(t)===-1)return;let o=this._entity[this._geometryPropertyName];if(!c(o)){(this._fillEnabled||this._outlineEnabled)&&(this._fillEnabled=!1,this._outlineEnabled=!1,this._geometryChanged.raiseEvent(this));return}let r=o.fill,a=c(r)&&r.isConstant?r.getValue(wu.MINIMUM_VALUE):!0,s=o.outline,A=c(s);if(A&&s.isConstant&&(A=s.getValue(wu.MINIMUM_VALUE)),!a&&!A){(this._fillEnabled||this._outlineEnabled)&&(this._fillEnabled=!1,this._outlineEnabled=!1,this._geometryChanged.raiseEvent(this));return}let l=o.show;if(this._isHidden(e,o)){(this._fillEnabled||this._outlineEnabled)&&(this._fillEnabled=!1,this._outlineEnabled=!1,this._geometryChanged.raiseEvent(this));return}this._materialProperty=o.material??u$,this._fillProperty=r??d$,this._showProperty=l??f$,this._showOutlineProperty=o.outline??h$,this._outlineColorProperty=A?o.outlineColor??m$:void 0,this._shadowsProperty=o.shadows??p$,this._distanceDisplayConditionProperty=o.distanceDisplayCondition??g$,this._classificationTypeProperty=o.classificationType??C$,this._fillEnabled=a;let d=this._isOnTerrain(e,o)&&(this._supportsMaterialsforEntitiesOnTerrain||this._materialProperty instanceof _A);if(A&&d&&(Nn(Nn.geometryOutlines),A=!1),this._onTerrain=d,this._outlineEnabled=A,this._isDynamic(e,o))this._dynamic||(this._dynamic=!0,this._geometryChanged.raiseEvent(this));else{this._setStaticOptions(e,o),this._isClosed=this._getIsClosed(this._options);let m=o.outlineWidth;this._outlineWidth=c(m)?m.getValue(wu.MINIMUM_VALUE):1,this._dynamic=!1,this._geometryChanged.raiseEvent(this)}};Ea.prototype.createDynamicUpdater=function(e,t){return new this.constructor.DynamicGeometryUpdater(this,e,t)};var P_=Ea;/*! @license DOMPurify 3.2.6 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.6/LICENSE */var{entries:vO,setPrototypeOf:bO,isFrozen:E$,getPrototypeOf:_$,getOwnPropertyDescriptor:I$}=Object,{freeze:Ia,seal:Zs,create:MO}=Object,{apply:ix,construct:ox}=typeof Reflect<"u"&&Reflect;Ia||(Ia=function(t){return t});Zs||(Zs=function(t){return t});ix||(ix=function(t,n,i){return t.apply(n,i)});ox||(ox=function(t,n){return new t(...n)});var N_=ya(Array.prototype.forEach),y$=ya(Array.prototype.lastIndexOf),BO=ya(Array.prototype.pop),sg=ya(Array.prototype.push),b$=ya(Array.prototype.splice),F_=ya(String.prototype.toLowerCase),ZB=ya(String.prototype.toString),xO=ya(String.prototype.match),cg=ya(String.prototype.replace),B$=ya(String.prototype.indexOf),x$=ya(String.prototype.trim),kc=ya(Object.prototype.hasOwnProperty),_a=ya(RegExp.prototype.test),Ag=T$(TypeError);function ya(e){return function(t){t instanceof RegExp&&(t.lastIndex=0);for(var n=arguments.length,i=new Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];return ix(e,t,i)}}function T$(e){return function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return ox(e,n)}}function xn(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:F_;bO&&bO(e,null);let i=t.length;for(;i--;){let o=t[i];if(typeof o=="string"){let r=n(o);r!==o&&(E$(t)||(t[i]=r),o=r)}e[o]=!0}return e}function S$(e){for(let t=0;t<e.length;t++)kc(e,t)||(e[t]=null);return e}function Il(e){let t=MO(null);for(let[n,i]of vO(e))kc(e,n)&&(Array.isArray(i)?t[n]=S$(i):i&&typeof i=="object"&&i.constructor===Object?t[n]=Il(i):t[n]=i);return t}function lg(e,t){for(;e!==null;){let i=I$(e,t);if(i){if(i.get)return ya(i.get);if(typeof i.value=="function")return ya(i.value)}e=_$(e)}function n(){return null}return n}var TO=Ia(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),$B=Ia(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),ex=Ia(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),w$=Ia(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),tx=Ia(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),D$=Ia(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),SO=Ia(["#text"]),wO=Ia(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),nx=Ia(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),DO=Ia(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),L_=Ia(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Q$=Zs(/\{\{[\w\W]*|[\w\W]*\}\}/gm),R$=Zs(/<%[\w\W]*|[\w\W]*%>/gm),v$=Zs(/\$\{[\w\W]*/gm),M$=Zs(/^data-[\-\w.\u00B7-\uFFFF]+$/),P$=Zs(/^aria-[\-\w]+$/),PO=Zs(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),N$=Zs(/^(?:\w+script|data):/i),L$=Zs(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),NO=Zs(/^html$/i),F$=Zs(/^[a-z][.\w]*(-[.\w]+)+$/i),QO=Object.freeze({__proto__:null,ARIA_ATTR:P$,ATTR_WHITESPACE:L$,CUSTOM_ELEMENT:F$,DATA_ATTR:M$,DOCTYPE_NAME:NO,ERB_EXPR:R$,IS_ALLOWED_URI:PO,IS_SCRIPT_OR_DATA:N$,MUSTACHE_EXPR:Q$,TMPLIT_EXPR:v$}),ug={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entityNode:6,progressingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12},O$=function(){return typeof window>"u"?null:window},k$=function(t,n){if(typeof t!="object"||typeof t.createPolicy!="function")return null;let i=null,o="data-tt-policy-suffix";n&&n.hasAttribute(o)&&(i=n.getAttribute(o));let r="dompurify"+(i?"#"+i:"");try{return t.createPolicy(r,{createHTML(a){return a},createScriptURL(a){return a}})}catch{return console.warn("TrustedTypes policy "+r+" could not be created."),null}},RO=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function LO(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:O$(),t=Et=>LO(Et);if(t.version="3.2.6",t.removed=[],!e||!e.document||e.document.nodeType!==ug.document||!e.Element)return t.isSupported=!1,t;let{document:n}=e,i=n,o=i.currentScript,{DocumentFragment:r,HTMLTemplateElement:a,Node:s,Element:A,NodeFilter:l,NamedNodeMap:d=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:m,DOMParser:p,trustedTypes:g}=e,h=A.prototype,C=lg(h,"cloneNode"),_=lg(h,"remove"),I=lg(h,"nextSibling"),b=lg(h,"childNodes"),x=lg(h,"parentNode");if(typeof a=="function"){let Et=n.createElement("template");Et.content&&Et.content.ownerDocument&&(n=Et.content.ownerDocument)}let T,w="",{implementation:R,createNodeIterator:z,createDocumentFragment:M,getElementsByTagName:N}=n,{importNode:O}=i,u=RO();t.isSupported=typeof vO=="function"&&typeof x=="function"&&R&&R.createHTMLDocument!==void 0;let{MUSTACHE_EXPR:E,ERB_EXPR:y,TMPLIT_EXPR:B,DATA_ATTR:D,ARIA_ATTR:v,IS_SCRIPT_OR_DATA:F,ATTR_WHITESPACE:P,CUSTOM_ELEMENT:U}=QO,{IS_ALLOWED_URI:k}=QO,j=null,q=xn({},[...TO,...$B,...ex,...tx,...SO]),$=null,H=xn({},[...wO,...nx,...DO,...L_]),Z=Object.seal(MO(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),ee=null,Ae=null,ge=!0,ce=!0,he=!1,Ie=!0,Ne=!1,_e=!0,ve=!1,at=!1,Tt=!1,st=!1,Rn=!1,Lt=!1,$t=!0,ci=!1,Ft="user-content-",pi=!0,Kn=!1,lt={},Ct=null,yi=xn({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),et=null,Qo=xn({},["audio","video","img","source","image","track"]),Xo=null,Oa=xn({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Ro="http://www.w3.org/1998/Math/MathML",zo="http://www.w3.org/2000/svg",Xn="http://www.w3.org/1999/xhtml",Zo=Xn,gi=!1,Bn=null,Zn=xn({},[Ro,zo,Xn],ZB),ni=xn({},["mi","mo","mn","ms","mtext"]),Ji=xn({},["annotation-xml"]),Qr=xn({},["title","style","font","a","script"]),Eo=null,Aa=["application/xhtml+xml","text/html"],Gr="text/html",Jt=null,An=null,vo=n.createElement("form"),bi=function(fe){return fe instanceof RegExp||fe instanceof Function},hr=function(){let fe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(An&&An===fe)){if((!fe||typeof fe!="object")&&(fe={}),fe=Il(fe),Eo=Aa.indexOf(fe.PARSER_MEDIA_TYPE)===-1?Gr:fe.PARSER_MEDIA_TYPE,Jt=Eo==="application/xhtml+xml"?ZB:F_,j=kc(fe,"ALLOWED_TAGS")?xn({},fe.ALLOWED_TAGS,Jt):q,$=kc(fe,"ALLOWED_ATTR")?xn({},fe.ALLOWED_ATTR,Jt):H,Bn=kc(fe,"ALLOWED_NAMESPACES")?xn({},fe.ALLOWED_NAMESPACES,ZB):Zn,Xo=kc(fe,"ADD_URI_SAFE_ATTR")?xn(Il(Oa),fe.ADD_URI_SAFE_ATTR,Jt):Oa,et=kc(fe,"ADD_DATA_URI_TAGS")?xn(Il(Qo),fe.ADD_DATA_URI_TAGS,Jt):Qo,Ct=kc(fe,"FORBID_CONTENTS")?xn({},fe.FORBID_CONTENTS,Jt):yi,ee=kc(fe,"FORBID_TAGS")?xn({},fe.FORBID_TAGS,Jt):Il({}),Ae=kc(fe,"FORBID_ATTR")?xn({},fe.FORBID_ATTR,Jt):Il({}),lt=kc(fe,"USE_PROFILES")?fe.USE_PROFILES:!1,ge=fe.ALLOW_ARIA_ATTR!==!1,ce=fe.ALLOW_DATA_ATTR!==!1,he=fe.ALLOW_UNKNOWN_PROTOCOLS||!1,Ie=fe.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Ne=fe.SAFE_FOR_TEMPLATES||!1,_e=fe.SAFE_FOR_XML!==!1,ve=fe.WHOLE_DOCUMENT||!1,st=fe.RETURN_DOM||!1,Rn=fe.RETURN_DOM_FRAGMENT||!1,Lt=fe.RETURN_TRUSTED_TYPE||!1,Tt=fe.FORCE_BODY||!1,$t=fe.SANITIZE_DOM!==!1,ci=fe.SANITIZE_NAMED_PROPS||!1,pi=fe.KEEP_CONTENT!==!1,Kn=fe.IN_PLACE||!1,k=fe.ALLOWED_URI_REGEXP||PO,Zo=fe.NAMESPACE||Xn,ni=fe.MATHML_TEXT_INTEGRATION_POINTS||ni,Ji=fe.HTML_INTEGRATION_POINTS||Ji,Z=fe.CUSTOM_ELEMENT_HANDLING||{},fe.CUSTOM_ELEMENT_HANDLING&&bi(fe.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Z.tagNameCheck=fe.CUSTOM_ELEMENT_HANDLING.tagNameCheck),fe.CUSTOM_ELEMENT_HANDLING&&bi(fe.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Z.attributeNameCheck=fe.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),fe.CUSTOM_ELEMENT_HANDLING&&typeof fe.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Z.allowCustomizedBuiltInElements=fe.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Ne&&(ce=!1),Rn&&(st=!0),lt&&(j=xn({},SO),$=[],lt.html===!0&&(xn(j,TO),xn($,wO)),lt.svg===!0&&(xn(j,$B),xn($,nx),xn($,L_)),lt.svgFilters===!0&&(xn(j,ex),xn($,nx),xn($,L_)),lt.mathMl===!0&&(xn(j,tx),xn($,DO),xn($,L_))),fe.ADD_TAGS&&(j===q&&(j=Il(j)),xn(j,fe.ADD_TAGS,Jt)),fe.ADD_ATTR&&($===H&&($=Il($)),xn($,fe.ADD_ATTR,Jt)),fe.ADD_URI_SAFE_ATTR&&xn(Xo,fe.ADD_URI_SAFE_ATTR,Jt),fe.FORBID_CONTENTS&&(Ct===yi&&(Ct=Il(Ct)),xn(Ct,fe.FORBID_CONTENTS,Jt)),pi&&(j["#text"]=!0),ve&&xn(j,["html","head","body"]),j.table&&(xn(j,["tbody"]),delete ee.tbody),fe.TRUSTED_TYPES_POLICY){if(typeof fe.TRUSTED_TYPES_POLICY.createHTML!="function")throw Ag('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof fe.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Ag('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');T=fe.TRUSTED_TYPES_POLICY,w=T.createHTML("")}else T===void 0&&(T=k$(g,o)),T!==null&&typeof w=="string"&&(w=T.createHTML(""));Ia&&Ia(fe),An=fe}},kn=xn({},[...$B,...ex,...w$]),Bi=xn({},[...tx,...D$]),Ns=function(fe){let We=x(fe);(!We||!We.tagName)&&(We={namespaceURI:Zo,tagName:"template"});let xt=F_(fe.tagName),Qi=F_(We.tagName);return Bn[fe.namespaceURI]?fe.namespaceURI===zo?We.namespaceURI===Xn?xt==="svg":We.namespaceURI===Ro?xt==="svg"&&(Qi==="annotation-xml"||ni[Qi]):!!kn[xt]:fe.namespaceURI===Ro?We.namespaceURI===Xn?xt==="math":We.namespaceURI===zo?xt==="math"&&Ji[Qi]:!!Bi[xt]:fe.namespaceURI===Xn?We.namespaceURI===zo&&!Ji[Qi]||We.namespaceURI===Ro&&!ni[Qi]?!1:!Bi[xt]&&(Qr[xt]||!kn[xt]):!!(Eo==="application/xhtml+xml"&&Bn[fe.namespaceURI]):!1},Vi=function(fe){sg(t.removed,{element:fe});try{x(fe).removeChild(fe)}catch{_(fe)}},Mo=function(fe,We){try{sg(t.removed,{attribute:We.getAttributeNode(fe),from:We})}catch{sg(t.removed,{attribute:null,from:We})}if(We.removeAttribute(fe),fe==="is")if(st||Rn)try{Vi(We)}catch{}else try{We.setAttribute(fe,"")}catch{}},Go=function(fe){let We=null,xt=null;if(Tt)fe="<remove></remove>"+fe;else{let Po=xO(fe,/^[\r\n\t ]+/);xt=Po&&Po[0]}Eo==="application/xhtml+xml"&&Zo===Xn&&(fe='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+fe+"</body></html>");let Qi=T?T.createHTML(fe):fe;if(Zo===Xn)try{We=new p().parseFromString(Qi,Eo)}catch{}if(!We||!We.documentElement){We=R.createDocument(Zo,"template",null);try{We.documentElement.innerHTML=gi?w:Qi}catch{}}let mr=We.body||We.documentElement;return fe&&xt&&mr.insertBefore(n.createTextNode(xt),mr.childNodes[0]||null),Zo===Xn?N.call(We,ve?"html":"body")[0]:ve?We.documentElement:mr},Sc=function(fe){return z.call(fe.ownerDocument||fe,fe,l.SHOW_ELEMENT|l.SHOW_COMMENT|l.SHOW_TEXT|l.SHOW_PROCESSING_INSTRUCTION|l.SHOW_CDATA_SECTION,null)},_o=function(fe){return fe instanceof m&&(typeof fe.nodeName!="string"||typeof fe.textContent!="string"||typeof fe.removeChild!="function"||!(fe.attributes instanceof d)||typeof fe.removeAttribute!="function"||typeof fe.setAttribute!="function"||typeof fe.namespaceURI!="string"||typeof fe.insertBefore!="function"||typeof fe.hasChildNodes!="function")},Rr=function(fe){return typeof s=="function"&&fe instanceof s};function vr(Et,fe,We){N_(Et,xt=>{xt.call(t,fe,We,An)})}let Ki=function(fe){let We=null;if(vr(u.beforeSanitizeElements,fe,null),_o(fe))return Vi(fe),!0;let xt=Jt(fe.nodeName);if(vr(u.uponSanitizeElement,fe,{tagName:xt,allowedTags:j}),_e&&fe.hasChildNodes()&&!Rr(fe.firstElementChild)&&_a(/<[/\w!]/g,fe.innerHTML)&&_a(/<[/\w!]/g,fe.textContent)||fe.nodeType===ug.progressingInstruction||_e&&fe.nodeType===ug.comment&&_a(/<[/\w]/g,fe.data))return Vi(fe),!0;if(!j[xt]||ee[xt]){if(!ee[xt]&&Ua(xt)&&(Z.tagNameCheck instanceof RegExp&&_a(Z.tagNameCheck,xt)||Z.tagNameCheck instanceof Function&&Z.tagNameCheck(xt)))return!1;if(pi&&!Ct[xt]){let Qi=x(fe)||fe.parentNode,mr=b(fe)||fe.childNodes;if(mr&&Qi){let Po=mr.length;for(let Hr=Po-1;Hr>=0;--Hr){let wc=C(mr[Hr],!0);wc.__removalCount=(fe.__removalCount||0)+1,Qi.insertBefore(wc,I(fe))}}}return Vi(fe),!0}return fe instanceof A&&!Ns(fe)||(xt==="noscript"||xt==="noembed"||xt==="noframes")&&_a(/<\/no(script|embed|frames)/i,fe.innerHTML)?(Vi(fe),!0):(Ne&&fe.nodeType===ug.text&&(We=fe.textContent,N_([E,y,B],Qi=>{We=cg(We,Qi," ")}),fe.textContent!==We&&(sg(t.removed,{element:fe.cloneNode()}),fe.textContent=We)),vr(u.afterSanitizeElements,fe,null),!1)},ka=function(fe,We,xt){if($t&&(We==="id"||We==="name")&&(xt in n||xt in vo))return!1;if(!(ce&&!Ae[We]&&_a(D,We))){if(!(ge&&_a(v,We))){if(!$[We]||Ae[We]){if(!(Ua(fe)&&(Z.tagNameCheck instanceof RegExp&&_a(Z.tagNameCheck,fe)||Z.tagNameCheck instanceof Function&&Z.tagNameCheck(fe))&&(Z.attributeNameCheck instanceof RegExp&&_a(Z.attributeNameCheck,We)||Z.attributeNameCheck instanceof Function&&Z.attributeNameCheck(We))||We==="is"&&Z.allowCustomizedBuiltInElements&&(Z.tagNameCheck instanceof RegExp&&_a(Z.tagNameCheck,xt)||Z.tagNameCheck instanceof Function&&Z.tagNameCheck(xt))))return!1}else if(!Xo[We]){if(!_a(k,cg(xt,P,""))){if(!((We==="src"||We==="xlink:href"||We==="href")&&fe!=="script"&&B$(xt,"data:")===0&&et[fe])){if(!(he&&!_a(F,cg(xt,P,"")))){if(xt)return!1}}}}}}return!0},Ua=function(fe){return fe!=="annotation-xml"&&xO(fe,U)},$o=function(fe){vr(u.beforeSanitizeAttributes,fe,null);let{attributes:We}=fe;if(!We||_o(fe))return;let xt={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:$,forceKeepAttr:void 0},Qi=We.length;for(;Qi--;){let mr=We[Qi],{name:Po,namespaceURI:Hr,value:wc}=mr,XA=Jt(Po),Xm=wc,pr=Po==="value"?Xm:x$(Xm);if(xt.attrName=XA,xt.attrValue=pr,xt.keepAttr=!0,xt.forceKeepAttr=void 0,vr(u.uponSanitizeAttribute,fe,xt),pr=xt.attrValue,ci&&(XA==="id"||XA==="name")&&(Mo(Po,fe),pr=Ft+pr),_e&&_a(/((--!?|])>)|<\/(style|title)/i,pr)){Mo(Po,fe);continue}if(xt.forceKeepAttr)continue;if(!xt.keepAttr){Mo(Po,fe);continue}if(!Ie&&_a(/\/>/i,pr)){Mo(Po,fe);continue}Ne&&N_([E,y,B],$C=>{pr=cg(pr,$C," ")});let ZC=Jt(fe.nodeName);if(!ka(ZC,XA,pr)){Mo(Po,fe);continue}if(T&&typeof g=="object"&&typeof g.getAttributeType=="function"&&!Hr)switch(g.getAttributeType(ZC,XA)){case"TrustedHTML":{pr=T.createHTML(pr);break}case"TrustedScriptURL":{pr=T.createScriptURL(pr);break}}if(pr!==Xm)try{Hr?fe.setAttributeNS(Hr,Po,pr):fe.setAttribute(Po,pr),_o(fe)?Vi(fe):BO(t.removed)}catch{Mo(Po,fe)}}vr(u.afterSanitizeAttributes,fe,null)},ii=function Et(fe){let We=null,xt=Sc(fe);for(vr(u.beforeSanitizeShadowDOM,fe,null);We=xt.nextNode();)vr(u.uponSanitizeShadowNode,We,null),Ki(We),$o(We),We.content instanceof r&&Et(We.content);vr(u.afterSanitizeShadowDOM,fe,null)};return t.sanitize=function(Et){let fe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},We=null,xt=null,Qi=null,mr=null;if(gi=!Et,gi&&(Et="<!-->"),typeof Et!="string"&&!Rr(Et))if(typeof Et.toString=="function"){if(Et=Et.toString(),typeof Et!="string")throw Ag("dirty is not a string, aborting")}else throw Ag("toString is not a function");if(!t.isSupported)return Et;if(at||hr(fe),t.removed=[],typeof Et=="string"&&(Kn=!1),Kn){if(Et.nodeName){let wc=Jt(Et.nodeName);if(!j[wc]||ee[wc])throw Ag("root node is forbidden and cannot be sanitized in-place")}}else if(Et instanceof s)We=Go("<!---->"),xt=We.ownerDocument.importNode(Et,!0),xt.nodeType===ug.element&&xt.nodeName==="BODY"||xt.nodeName==="HTML"?We=xt:We.appendChild(xt);else{if(!st&&!Ne&&!ve&&Et.indexOf("<")===-1)return T&&Lt?T.createHTML(Et):Et;if(We=Go(Et),!We)return st?null:Lt?w:""}We&&Tt&&Vi(We.firstChild);let Po=Sc(Kn?Et:We);for(;Qi=Po.nextNode();)Ki(Qi),$o(Qi),Qi.content instanceof r&&ii(Qi.content);if(Kn)return Et;if(st){if(Rn)for(mr=M.call(We.ownerDocument);We.firstChild;)mr.appendChild(We.firstChild);else mr=We;return($.shadowroot||$.shadowrootmode)&&(mr=O.call(i,mr,!0)),mr}let Hr=ve?We.outerHTML:We.innerHTML;return ve&&j["!doctype"]&&We.ownerDocument&&We.ownerDocument.doctype&&We.ownerDocument.doctype.name&&_a(NO,We.ownerDocument.doctype.name)&&(Hr="<!DOCTYPE "+We.ownerDocument.doctype.name+`>
`+Hr),Ne&&N_([E,y,B],wc=>{Hr=cg(Hr,wc," ")}),T&&Lt?T.createHTML(Hr):Hr},t.setConfig=function(){let Et=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};hr(Et),at=!0},t.clearConfig=function(){An=null,at=!1},t.isValidAttribute=function(Et,fe,We){An||hr({});let xt=Jt(Et),Qi=Jt(fe);return ka(xt,Qi,We)},t.addHook=function(Et,fe){typeof fe=="function"&&sg(u[Et],fe)},t.removeHook=function(Et,fe){if(fe!==void 0){let We=y$(u[Et],fe);return We===-1?void 0:b$(u[Et],We,1)[0]}return BO(u[Et])},t.removeHooks=function(Et){u[Et]=[]},t.removeAllHooks=function(){u=RO()},t}var FO=LO();var U$=0,rx={};function bA(e,t){let n,i=e;c(rx[i])?n=rx[i]:(n=U$++,rx[i]=n),t=t??!1,this._id=n,this._html=e,this._showOnScreen=t,this._element=void 0}Object.defineProperties(bA.prototype,{html:{get:function(){return this._html}},id:{get:function(){return this._id}},showOnScreen:{get:function(){return this._showOnScreen},set:function(e){this._showOnScreen=e}},element:{get:function(){if(!c(this._element)){let e=FO.sanitize(this._html),t=document.createElement("div");t.className="cesium-credit-wrapper",t._creditId=this._id,t.style.display="inline",t.innerHTML=e;let n=t.querySelectorAll("a");for(let i=0;i<n.length;i++)n[i].setAttribute("target","_blank");this._element=t}return this._element}}});bA.equals=function(e,t){return e===t||c(e)&&c(t)&&e._id===t._id&&e._showOnScreen===t._showOnScreen};bA.prototype.equals=function(e){return bA.equals(this,e)};bA.prototype.isIon=function(){return this.html.indexOf("ion-credit.png")!==-1};bA.getIonCredit=function(e){let t=c(e.collapsible)&&!e.collapsible;return new bA(e.html,t)};bA.clone=function(e){if(c(e))return new bA(e.html,e.showOnScreen)};var fn=bA;function z$(e,t){Nn(e,t)}var Kr=z$;function cd(e){this._url=e,this._cubeMapBuffers=void 0,this._texture=void 0,this._maximumMipmapLevel=void 0,this._loading=!1,this._ready=!1,this._errorEvent=new Le}Object.defineProperties(cd.prototype,{url:{get:function(){return this._url}},errorEvent:{get:function(){return this._errorEvent}},texture:{get:function(){return this._texture}},maximumMipmapLevel:{get:function(){return this._maximumMipmapLevel}},ready:{get:function(){return this._ready}}});cd.isSupported=function(e){return(e.colorBufferHalfFloat&&e.halfFloatingPointTexture||e.floatingPointTexture&&e.colorBufferFloat)&&e.supportsTextureLod};function ax(e){e._cubeMapBuffers=void 0}cd.prototype.update=function(e){let{context:t}=e;if(!cd.isSupported(t))return;if(c(this._texture)){ax(this);return}if(!c(this._texture)&&!this._loading){let d=t.textureCache.getTexture(this._url);c(d)&&(ax(this),this._texture=d,this._maximumMipmapLevel=this._texture.maximumMipmapLevel,this._ready=!0)}let n=this._cubeMapBuffers;if(!c(n)&&!this._loading){let d=this;ll(this._url).then(function(m){d._cubeMapBuffers=m,d._loading=!1}).catch(function(m){d.isDestroyed()||d._errorEvent.raiseEvent(m)}),this._loading=!0}if(!c(this._cubeMapBuffers))return;let{pixelDatatype:i}=n[0].positiveX;c(i)||(i=t.halfFloatingPointTexture?mt.HALF_FLOAT:mt.FLOAT);let o=_t.RGBA,r=n.length;this._maximumMipmapLevel=r-1;let a=n[0].positiveX.width,s=Math.log2(a)+1;if(r!==s){let d={};Object.values(ds.FaceName).forEach(m=>{d[m]=void 0});for(let m=r;m<s;m++)n.push(d)}let A=new nn({minificationFilter:Wt.LINEAR_MIPMAP_LINEAR}),l=new ds({context:t,source:n[0],flipY:!1,pixelDatatype:i,pixelFormat:o,sampler:A});l.loadMipmaps(n.slice(1)),this._texture=l,this._texture.maximumMipmapLevel=this._maximumMipmapLevel,t.textureCache.addTexture(this._url,this._texture),this._ready=!0};cd.prototype.isDestroyed=function(){return!1};cd.prototype.destroy=function(){return ax(this),this._texture=this._texture&&this._texture.destroy(),me(this)};var fg=cd;function dg(e){e=e??G.EMPTY_OBJECT;let t=c(e.imageBasedLightingFactor)?L.clone(e.imageBasedLightingFactor):new L(1,1);this._imageBasedLightingFactor=t;let n=e.sphericalHarmonicCoefficients;this._sphericalHarmonicCoefficients=n,this._specularEnvironmentMaps=e.specularEnvironmentMaps,this._specularEnvironmentCubeMap=void 0,this._specularEnvironmentCubeMapDirty=!0,this._specularEnvironmentMapLoaded=!1,this._previousSpecularEnvironmentMapLoaded=!1,this._useDefaultSpecularMaps=!1,this._useDefaultSphericalHarmonics=!1,this._shouldRegenerateShaders=!1,this._previousFrameNumber=void 0,this._previousFrameContext=void 0,this._previousImageBasedLightingFactor=L.clone(t),this._previousSphericalHarmonicCoefficients=n,this._removeErrorListener=void 0}Object.defineProperties(dg.prototype,{imageBasedLightingFactor:{get:function(){return this._imageBasedLightingFactor},set:function(e){this._previousImageBasedLightingFactor=L.clone(this._imageBasedLightingFactor,this._previousImageBasedLightingFactor),this._imageBasedLightingFactor=L.clone(e,this._imageBasedLightingFactor)}},sphericalHarmonicCoefficients:{get:function(){return this._sphericalHarmonicCoefficients},set:function(e){this._previousSphericalHarmonicCoefficients=this._sphericalHarmonicCoefficients,this._sphericalHarmonicCoefficients=e}},specularEnvironmentMaps:{get:function(){return this._specularEnvironmentMaps},set:function(e){e!==this._specularEnvironmentMaps&&(this._specularEnvironmentCubeMapDirty=this._specularEnvironmentCubeMapDirty||e!==this._specularEnvironmentMaps,this._specularEnvironmentMapLoaded=!1),this._specularEnvironmentMaps=e}},enabled:{get:function(){return this._imageBasedLightingFactor.x>0||this._imageBasedLightingFactor.y>0}},shouldRegenerateShaders:{get:function(){return this._shouldRegenerateShaders}},specularEnvironmentCubeMap:{get:function(){return this._specularEnvironmentCubeMap}},useDefaultSphericalHarmonics:{get:function(){return this._useDefaultSphericalHarmonics}},useDefaultSpecularMaps:{get:function(){return this._useDefaultSpecularMaps}},useSpecularEnvironmentMaps:{get:function(){return c(this._specularEnvironmentCubeMap)&&this._specularEnvironmentCubeMap.ready||this._useDefaultSpecularMaps}}});function G$(e,t){if(fg.isSupported(t)){if(e._specularEnvironmentCubeMap=e._specularEnvironmentCubeMap&&e._specularEnvironmentCubeMap.destroy(),c(e._specularEnvironmentMaps)){let n=new fg(e._specularEnvironmentMaps);e._specularEnvironmentCubeMap=n,e._removeErrorListener=n.errorEvent.addEventListener(i=>{console.error(`Error loading specularEnvironmentMaps: ${i}`)})}e._shouldRegenerateShaders=!0}}dg.prototype.update=function(e){if(e.frameNumber===this._previousFrameNumber&&e.context===this._previousFrameContext)return;this._previousFrameNumber=e.frameNumber;let t=this._previousFrameContext=e.context;e.brdfLutGenerator.update(e),this._shouldRegenerateShaders=!1;let n=this._imageBasedLightingFactor,i=this._previousImageBasedLightingFactor;L.equals(n,i)||(this._shouldRegenerateShaders=n.x>0&&i.x===0||n.x===0&&i.x>0,this._shouldRegenerateShaders=this._shouldRegenerateShaders||n.y>0&&i.y===0||n.y===0&&i.y>0,this._previousImageBasedLightingFactor=L.clone(this._imageBasedLightingFactor,this._previousImageBasedLightingFactor)),this._previousSphericalHarmonicCoefficients!==this._sphericalHarmonicCoefficients&&(this._shouldRegenerateShaders=this._shouldRegenerateShaders||c(this._previousSphericalHarmonicCoefficients)!==c(this._sphericalHarmonicCoefficients),this._previousSphericalHarmonicCoefficients=this._sphericalHarmonicCoefficients),this._shouldRegenerateShaders=this._shouldRegenerateShaders||this._previousSpecularEnvironmentMapLoaded!==this._specularEnvironmentMapLoaded,this._previousSpecularEnvironmentMapLoaded=this._specularEnvironmentMapLoaded,this._specularEnvironmentCubeMapDirty&&(G$(this,t),this._specularEnvironmentCubeMapDirty=!1),c(this._specularEnvironmentCubeMap)&&(this._specularEnvironmentCubeMap.update(e),this._specularEnvironmentCubeMap.ready&&(this._specularEnvironmentMapLoaded=!0));let o=!c(this._specularEnvironmentCubeMap)&&c(e.specularEnvironmentMaps)&&!this._useDefaultSpecularMaps,r=!c(e.specularEnvironmentMaps)&&this._useDefaultSpecularMaps,a=!c(this._sphericalHarmonicCoefficients)&&c(e.sphericalHarmonicCoefficients)&&!this._useDefaultSphericalHarmonics,s=!c(e.sphericalHarmonicCoefficients)&&this._useDefaultSphericalHarmonics;this._shouldRegenerateShaders=this._shouldRegenerateShaders||o||r||a||s,this._useDefaultSpecularMaps=!c(this._specularEnvironmentCubeMap)&&c(e.specularEnvironmentMaps),this._useDefaultSphericalHarmonics=!c(this._sphericalHarmonicCoefficients)&&c(e.sphericalHarmonicCoefficients)};dg.prototype.isDestroyed=function(){return!1};dg.prototype.destroy=function(){return this._specularEnvironmentCubeMap=this._specularEnvironmentCubeMap&&this._specularEnvironmentCubeMap.destroy(),this._removeErrorListener=this._removeErrorListener&&this._removeErrorListener(),me(this)};var O_=dg;var cx=ls(il(),1);var sx,OO="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiI2NTEwZTU2Yi0wOGEyLTQyZjgtOTJjNi04Mzc2NGRlNzA4NTkiLCJpZCI6MjU5LCJpYXQiOjE3NTY4NDExOTJ9._Y3MIsYgGKTVTpkEpKPNT0cQSa_hUocY0DdH7h0U-xM",k_={};k_.defaultAccessToken=OO;k_.defaultServer=new Ye({url:"https://api.cesium.com/"});k_.getDefaultTokenCredit=function(e){if(e===OO){if(!c(sx)){let t=`<b>             This application is using Cesium's default ion access token. Please assign <i>Cesium.Ion.defaultAccessToken</i>             with an access token from your ion account before making any Cesium API calls.             You can sign up for a free ion account at <a href="https://cesium.com">https://cesium.com</a>.</b>`;sx=new fn(t,!0)}return sx}};var U_=k_;function ba(e,t){let n,i=e.externalType,o=c(i);if(!o)n={url:e.url,retryAttempts:1,retryCallback:H$};else if(i==="3DTILES"||i==="STK_TERRAIN_SERVER")n={url:e.options.url};else throw new ae("Ion.createResource does not support external imagery assets; use IonImageryProvider instead.");Ye.call(this,n),this._ionEndpoint=e,this._ionEndpointDomain=o?void 0:new cx.default(e.url).authority(),this._ionEndpointResource=t,this._ionRoot=void 0,this._pendingPromise=void 0,this._credits=void 0,this._isExternal=o}c(Object.create)&&(ba.prototype=Object.create(Ye.prototype),ba.prototype.constructor=ba);ba.fromAssetId=function(e,t){let n=ba._createEndpointResource(e,t);return n.fetchJson().then(function(i){return new ba(i,n)})};Object.defineProperties(ba.prototype,{credits:{get:function(){return c(this._ionRoot)?this._ionRoot.credits:c(this._credits)?this._credits:(this._credits=ba.getCreditsFromEndpoint(this._ionEndpoint,this._ionEndpointResource),this._credits)}}});ba.getCreditsFromEndpoint=function(e,t){let n=e.attributions.map(fn.getIonCredit),i=U_.getDefaultTokenCredit(t.queryParameters.access_token);return c(i)&&n.push(fn.clone(i)),n};ba.prototype.clone=function(e){let t=this._ionRoot??this;return c(e)||(e=new ba(t._ionEndpoint,t._ionEndpointResource)),e=Ye.prototype.clone.call(this,e),e._ionRoot=t,e._isExternal=this._isExternal,e};ba.prototype.fetchImage=function(e){if(!this._isExternal){let t=e;e={preferBlob:!0},c(t)&&(e.flipY=t.flipY,e.preferImageBitmap=t.preferImageBitmap)}return Ye.prototype.fetchImage.call(this,e)};ba.prototype._makeRequest=function(e){return this._isExternal||new cx.default(this.url).authority()!==this._ionEndpointDomain?Ye.prototype._makeRequest.call(this,e):(kO(e),e.headers.Authorization=`Bearer ${this._ionEndpoint.accessToken}`,Ye.prototype._makeRequest.call(this,e))};ba._createEndpointResource=function(e,t){t=t??G.EMPTY_OBJECT;let n=t.server??U_.defaultServer,i=t.accessToken??U_.defaultAccessToken;n=Ye.createIfNeeded(n);let o={url:`v1/assets/${e}/endpoint`};return c(i)&&(o.queryParameters={access_token:i}),kO(o),n.getDerivedResource(o)};function kO(e){c(e.headers)||(e.headers={}),e.headers["X-Cesium-Client"]="CesiumJS",typeof CESIUM_VERSION<"u"&&(e.headers["X-Cesium-Client-Version"]=CESIUM_VERSION)}function H$(e,t){let n=e._ionRoot??e,i=n._ionEndpointResource,o=typeof Image<"u";return!c(t)||t.statusCode!==401&&!(o&&t.target instanceof Image)?Promise.resolve(!1):(c(n._pendingPromise)||(n._pendingPromise=i.fetchJson().then(function(r){return n._ionEndpoint=r,r}).finally(function(r){return n._pendingPromise=void 0,r})),n._pendingPromise.then(function(r){return e._ionEndpoint=r,!0}))}var vh=ba;function BA(e){e=e??0,this._array=new Array(e),this._length=e}Object.defineProperties(BA.prototype,{length:{get:function(){return this._length},set:function(e){let t=this._array,n=this._length;if(e<n)for(let i=e;i<n;++i)t[i]=void 0;else e>t.length&&(t.length=e);this._length=e}},values:{get:function(){return this._array}}});BA.prototype.get=function(e){return this._array[e]};BA.prototype.set=function(e,t){e>=this._length&&(this.length=e+1),this._array[e]=t};BA.prototype.peek=function(){return this._array[this._length-1]};BA.prototype.push=function(e){let t=this.length++;this._array[t]=e};BA.prototype.pop=function(){if(this._length===0)return;let e=this._array[this._length-1];return--this.length,e};BA.prototype.reserve=function(e){e>this._array.length&&(this._array.length=e)};BA.prototype.resize=function(e){this.length=e};BA.prototype.trim=function(e){e=e??this._length,this._array.length=e};var Ba=BA;var yl={X:0,Y:1,Z:2};yl.Y_UP_TO_Z_UP=Q.fromRotationTranslation(ne.fromArray([1,0,0,0,0,1,0,-1,0]));yl.Z_UP_TO_Y_UP=Q.fromRotationTranslation(ne.fromArray([1,0,0,0,0,-1,0,1,0]));yl.X_UP_TO_Z_UP=Q.fromRotationTranslation(ne.fromArray([0,0,1,0,1,0,-1,0,0]));yl.Z_UP_TO_X_UP=Q.fromRotationTranslation(ne.fromArray([0,0,-1,0,1,0,1,0,0]));yl.X_UP_TO_Y_UP=Q.fromRotationTranslation(ne.fromArray([0,1,0,-1,0,0,0,0,1]));yl.Y_UP_TO_X_UP=Q.fromRotationTranslation(ne.fromArray([0,-1,0,1,0,0,0,0,1]));yl.fromName=function(e){return yl[e]};var fi=Object.freeze(yl);function UO(e){e=e??G.EMPTY_OBJECT,this._metadata=e.metadata}Object.defineProperties(UO.prototype,{metadata:{get:function(){return this._metadata}}});var z_=UO;function Pu(e,t,n){return t=t??0,n=n??e.byteLength-t,e=e.subarray(t,t+n),Pu.decode(e)}Pu.decodeWithTextDecoder=function(e){return new TextDecoder("utf-8").decode(e)};Pu.decodeWithFromCharCode=function(e){let t="",n=V$(e),i=n.length;for(let o=0;o<i;++o){let r=n[o];r<=65535?t+=String.fromCharCode(r):(r-=65536,t+=String.fromCharCode((r>>10)+55296,(r&1023)+56320))}return t};function hg(e,t,n){return t<=e&&e<=n}function V$(e){let t=0,n=0,i=0,o=128,r=191,a=[],s=e.length;for(let A=0;A<s;++A){let l=e[A];if(i===0){if(hg(l,0,127)){a.push(l);continue}if(hg(l,194,223)){i=1,t=l&31;continue}if(hg(l,224,239)){l===224&&(o=160),l===237&&(r=159),i=2,t=l&15;continue}if(hg(l,240,244)){l===240&&(o=144),l===244&&(r=143),i=3,t=l&7;continue}throw new ae("String decoding failed.")}if(!hg(l,o,r)){t=i=n=0,o=128,r=191,--A;continue}o=128,r=191,t=t<<6|l&63,++n,n===i&&(a.push(t),t=i=n=0)}return a}typeof TextDecoder<"u"?Pu.decode=Pu.decodeWithTextDecoder:Pu.decode=Pu.decodeWithFromCharCode;var Uc=Pu;function j$(e,t){return t=t??0,Uc(e,t,Math.min(4,e.length))}var Nu=j$;function $s(e,t,n,i){this._tileset=e,this._tile=t,this._resource=n,c(i)||(i=[]),this._contents=i,this._metadata=void 0,this._group=void 0,this._ready=!1}Object.defineProperties($s.prototype,{featurePropertiesDirty:{get:function(){let e=this._contents,t=e.length;for(let n=0;n<t;++n)if(e[n].featurePropertiesDirty)return!0;return!1},set:function(e){let t=this._contents,n=t.length;for(let i=0;i<n;++i)t[i].featurePropertiesDirty=e}},featuresLength:{get:function(){return 0}},pointsLength:{get:function(){return 0}},trianglesLength:{get:function(){return 0}},geometryByteLength:{get:function(){return 0}},texturesByteLength:{get:function(){return 0}},batchTableByteLength:{get:function(){return 0}},innerContents:{get:function(){return this._contents}},ready:{get:function(){return this._ready}},tileset:{get:function(){return this._tileset}},tile:{get:function(){return this._tile}},url:{get:function(){return this._resource.getUrlComponent(!0)}},metadata:{get:function(){return this._metadata},set:function(e){this._metadata=e;let t=this._contents,n=t.length;for(let i=0;i<n;++i)t[i].metadata=e}},batchTable:{get:function(){}},group:{get:function(){return this._group},set:function(e){this._group=e;let t=this._contents,n=t.length;for(let i=0;i<n;++i)t[i].group=e}}});var mg=Uint32Array.BYTES_PER_ELEMENT;$s.fromTileType=async function(e,t,n,i,o,r){o=o??0;let a=new Uint8Array(i),s=new DataView(i);o+=mg;let A=s.getUint32(o,!0);if(A!==1)throw new ae(`Only Composite Tile version 1 is supported. Version ${A} is not.`);o+=mg,o+=mg;let l=s.getUint32(o,!0);o+=mg;let d=n.queryParameters.compositeIndex;c(d)?d=`${d}_`:d="";let m=[];m.length=l;for(let h=0;h<l;++h){let C=Nu(a,o),_=s.getUint32(o+mg*2,!0),I=r[C],b=`${d}${h}`,x=n.getDerivedResource({queryParameters:{compositeIndex:b}});if(c(I))m[h]=Promise.resolve(I(e,t,x,i,o));else throw new ae(`Unknown tile content type, ${C}, inside Composite tile`);o+=_}let p=await Promise.all(m);return new $s(e,t,n,p)};$s.prototype.hasProperty=function(e,t){return!1};$s.prototype.getFeature=function(e){};$s.prototype.applyDebugSettings=function(e,t){let n=this._contents,i=n.length;for(let o=0;o<i;++o)n[o].applyDebugSettings(e,t)};$s.prototype.applyStyle=function(e){let t=this._contents,n=t.length;for(let i=0;i<n;++i)t[i].applyStyle(e)};$s.prototype.update=function(e,t){let n=this._contents,i=n.length,o=!0;for(let r=0;r<i;++r)n[r].update(e,t),o=o&&n[r].ready;!this._ready&&o&&(this._ready=!0)};$s.prototype.pick=function(e,t,n){if(!this._ready)return;let i,o=Number.POSITIVE_INFINITY,r=this._contents,a=r.length;for(let s=0;s<a;++s){let A=r[s].pick(e,t,n);if(!c(A))continue;let l=f.distance(e.origin,A);l<o&&(i=A,o=l)}if(c(i))return n};$s.prototype.isDestroyed=function(){return!1};$s.prototype.destroy=function(){let e=this._contents,t=e.length;for(let n=0;n<t;++n)e[n].destroy();return me(this)};var zO=$s;function Y$(e,t,n){return JSON.parse(Uc(e,t,n))}var Fo=Y$;function Xr(e){this._id=ji();let t=e.featuresLength;this._showAlphaProperties=void 0,this._batchValues=void 0,this._batchValuesDirty=!1,this._batchTexture=void 0,this._defaultTexture=void 0,this._pickTexture=void 0,this._pickIds=[];let n,i;if(t>0){let o=Math.min(t,rn.maximumTextureSize),r=Math.ceil(t/rn.maximumTextureSize),a=1/o,s=a*.5,A=1/r,l=A*.5;n=new L(o,r),i=new re(a,s,A,l)}this._translucentFeaturesLength=0,this._featuresLength=t,this._textureDimensions=n,this._textureStep=i,this._owner=e.owner,this._statistics=e.statistics,this._colorChangedCallback=e.colorChangedCallback}Object.defineProperties(Xr.prototype,{translucentFeaturesLength:{get:function(){return this._translucentFeaturesLength}},byteLength:{get:function(){let e=0;return c(this._pickTexture)&&(e+=this._pickTexture.sizeInBytes),c(this._batchTexture)&&(e+=this._batchTexture.sizeInBytes),e}},textureDimensions:{get:function(){return this._textureDimensions}},textureStep:{get:function(){return this._textureStep}},batchTexture:{get:function(){return this._batchTexture}},defaultTexture:{get:function(){return this._defaultTexture}},pickTexture:{get:function(){return this._pickTexture}}});Xr.DEFAULT_COLOR_VALUE=J.WHITE;Xr.DEFAULT_SHOW_VALUE=!0;function GO(e){let t=e._textureDimensions;return t.x*t.y*4}function HO(e){if(!c(e._batchValues)){let t=GO(e),n=new Uint8Array(t).fill(255);e._batchValues=n}return e._batchValues}function VO(e){if(!c(e._showAlphaProperties)){let t=2*e._featuresLength,n=new Uint8Array(t).fill(255);e._showAlphaProperties=n}return e._showAlphaProperties}Xr.prototype.setShow=function(e,t){if(t&&!c(this._showAlphaProperties))return;let n=VO(this),i=e*2,o=t?255:0;if(n[i]!==o){n[i]=o;let r=HO(this),a=e*4+3;r[a]=t?n[i+1]:0,this._batchValuesDirty=!0}};Xr.prototype.setAllShow=function(e){let t=this._featuresLength;for(let n=0;n<t;++n)this.setShow(n,e)};Xr.prototype.getShow=function(e){if(!c(this._showAlphaProperties))return!0;let t=e*2;return this._showAlphaProperties[t]===255};var W$=new Array(4);Xr.prototype.setColor=function(e,t){if(J.equals(t,Xr.DEFAULT_COLOR_VALUE)&&!c(this._batchValues))return;let n=t.toBytes(W$),i=n[3],o=HO(this),r=e*4,a=VO(this),s=e*2;if(o[r]!==n[0]||o[r+1]!==n[1]||o[r+2]!==n[2]||a[s+1]!==i){o[r]=n[0],o[r+1]=n[1],o[r+2]=n[2];let A=a[s+1]!==255,l=a[s]!==0;o[r+3]=l?i:0,a[s+1]=i;let d=i!==255;d&&!A?++this._translucentFeaturesLength:!d&&A&&--this._translucentFeaturesLength,this._batchValuesDirty=!0,c(this._colorChangedCallback)&&this._colorChangedCallback(e,t)}};Xr.prototype.setAllColor=function(e){let t=this._featuresLength;for(let n=0;n<t;++n)this.setColor(n,e)};Xr.prototype.getColor=function(e,t){if(!c(this._batchValues))return J.clone(Xr.DEFAULT_COLOR_VALUE,t);let n=this._batchValues,i=e*4,o=this._showAlphaProperties,r=e*2;return J.fromBytes(n[i],n[i+1],n[i+2],o[r+1],t)};Xr.prototype.getPickColor=function(e){return this._pickIds[e]};function jO(e,t,n){let i=e._textureDimensions;return new on({context:t,pixelFormat:_t.RGBA,pixelDatatype:mt.UNSIGNED_BYTE,source:{width:i.x,height:i.y,arrayBufferView:n},flipY:!1,sampler:nn.NEAREST})}function q$(e,t){let n=e._featuresLength;if(!c(e._pickTexture)&&n>0){let i=e._pickIds,o=GO(e),r=new Uint8Array(o),a=e._owner,s=e._statistics;for(let A=0;A<n;++A){let l=t.createPickId(a.getFeature(A));i.push(l);let d=l.color,m=A*4;r[m]=J.floatToByte(d.red),r[m+1]=J.floatToByte(d.green),r[m+2]=J.floatToByte(d.blue),r[m+3]=J.floatToByte(d.alpha)}e._pickTexture=jO(e,t,r),c(s)&&(s.batchTableByteLength+=e._pickTexture.sizeInBytes)}}function J$(e){let t=e._textureDimensions;e._batchTexture.copyFrom({source:{width:t.x,height:t.y,arrayBufferView:e._batchValues}})}Xr.prototype.update=function(e,t){let n=t.context;this._defaultTexture=n.defaultTexture;let i=t.passes;(i.pick||i.postProcess)&&q$(this,n),this._batchValuesDirty&&(this._batchValuesDirty=!1,c(this._batchTexture)||(this._batchTexture=jO(this,n,this._batchValues),c(this._statistics)&&(this._statistics.batchTableByteLength+=this._batchTexture.sizeInBytes)),J$(this))};Xr.prototype.isDestroyed=function(){return!1};Xr.prototype.destroy=function(){this._batchTexture=this._batchTexture&&this._batchTexture.destroy(),this._pickTexture=this._pickTexture&&this._pickTexture.destroy();let e=this._pickIds,t=e.length;for(let n=0;n<t;++n)e[n].destroy();return me(this)};var ec=Xr;var K$={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},X$={SCALAR:void 0,VEC2:L,VEC3:f,VEC4:re,MAT2:vi,MAT3:ne,MAT4:Q};function Z$(e){let t=e.componentType,n;typeof t=="string"?n=V.fromName(t):n=t;let i=K$[e.type],o=X$[e.type];return{componentsPerAttribute:i,classType:o,createArrayBufferView:function(r,a,s){return V.createArrayBufferView(n,r,a,i*s)}}}var xA=Z$;function bl(e){this._classes=void 0,this._classIds=void 0,this._classIndexes=void 0,this._parentCounts=void 0,this._parentIndexes=void 0,this._parentIds=void 0,this._byteLength=0,$$(this,e.extension,e.binaryBody)}Object.defineProperties(bl.prototype,{byteLength:{get:function(){return this._byteLength}}});function $$(e,t,n){let i,o,r,a=t.instancesLength,s=t.classes,A=t.classIds,l=t.parentCounts,d=t.parentIds,m=a,p=0;c(A.byteOffset)&&(A.componentType=A.componentType??V.UNSIGNED_SHORT,A.type=ct.SCALAR,r=xA(A),A=r.createArrayBufferView(n.buffer,n.byteOffset+A.byteOffset,a),p+=A.byteLength);let g;if(c(l)){for(c(l.byteOffset)&&(l.componentType=l.componentType??V.UNSIGNED_SHORT,l.type=ct.SCALAR,r=xA(l),l=r.createArrayBufferView(n.buffer,n.byteOffset+l.byteOffset,a),p+=l.byteLength),g=new Uint16Array(a),m=0,i=0;i<a;++i)g[i]=m,m+=l[i];p+=g.byteLength}c(d)&&c(d.byteOffset)&&(d.componentType=d.componentType??V.UNSIGNED_SHORT,d.type=ct.SCALAR,r=xA(d),d=r.createArrayBufferView(n.buffer,n.byteOffset+d.byteOffset,m),p+=d.byteLength);let h=s.length;for(i=0;i<h;++i){let I=s[i].length,b=s[i].instances,x=eee(I,b,n);p+=tee(x),s[i].instances=dt(x,b)}let C=new Array(h).fill(0),_=new Uint16Array(a);for(i=0;i<a;++i)o=A[i],_[i]=C[o],++C[o];p+=_.byteLength,e._classes=s,e._classIds=A,e._classIndexes=_,e._parentCounts=l,e._parentIndexes=g,e._parentIds=d,e._byteLength=p}function eee(e,t,n){let i;for(let o in t)if(t.hasOwnProperty(o)){let r=t[o],a=r.byteOffset;if(c(a)){let s=r.componentType,A=r.type;if(!c(s))throw new ae("componentType is required.");if(!c(A))throw new ae("type is required.");if(!c(n))throw new ae(`Property ${o} requires a batch table binary.`);let l=xA(r),d=l.componentsPerAttribute,m=l.classType,p=l.createArrayBufferView(n.buffer,n.byteOffset+a,e);c(i)||(i={}),i[o]={typedArray:p,componentCount:d,type:m}}}return i}function tee(e){let t=0;for(let n in e)e.hasOwnProperty(n)&&(t+=e[n].typedArray.byteLength);return t}var nee=[],iee=[],oee=0;function ree(e,t,n){let i=e._classIds,o=e._parentCounts,r=e._parentIds,a=e._parentIndexes,s=i.length,A=nee;A.length=Math.max(A.length,s);let l=++oee,d=iee;for(d.length=0,d.push(t);d.length>0;){if(t=d.pop(),A[t]===l)continue;A[t]=l;let m=n(e,t);if(c(m))return m;let p=o[t],g=a[t];for(let h=0;h<p;++h){let C=r[g+h];C!==t&&d.push(C)}}}function aee(e,t,n){let i=!0;for(;i;){let o=n(e,t);if(c(o))return o;let r=e._parentIds[t];i=r!==t,t=r}}function pg(e,t,n){let i=e._parentCounts,o=e._parentIds;if(c(o)){if(c(i))return ree(e,t,n)}else return n(e,t);return aee(e,t,n)}bl.prototype.hasProperty=function(e,t){let n=pg(this,e,function(i,o){let r=i._classIds[o],a=i._classes[r].instances;if(c(a[t]))return!0});return c(n)};bl.prototype.propertyExists=function(e){let t=this._classes,n=t.length;for(let i=0;i<n;++i){let o=t[i].instances;if(c(o[e]))return!0}return!1};bl.prototype.getPropertyIds=function(e,t){return t=c(t)?t:[],t.length=0,pg(this,e,function(n,i){let o=n._classIds[i],r=n._classes[o].instances;for(let a in r)r.hasOwnProperty(a)&&t.indexOf(a)===-1&&t.push(a)}),t};bl.prototype.getProperty=function(e,t){return pg(this,e,function(n,i){let o=n._classIds[i],r=n._classes[o],a=n._classIndexes[i],s=r.instances[t];if(c(s))return c(s.typedArray)?see(s,a):Re(s[a],!0)})};function see(e,t){let n=e.typedArray,i=e.componentCount;return i===1?n[t]:e.type.unpack(n,t*i)}bl.prototype.setProperty=function(e,t,n){let i=pg(this,e,function(o,r){let a=o._classIds[r],s=o._classes[a],A=o._classIndexes[r],l=s.instances[t];if(c(l))return c(l.typedArray)?cee(l,A,n):l[A]=Re(n,!0),!0});return c(i)};function cee(e,t,n){let i=e.typedArray,o=e.componentCount;o===1?i[t]=n:e.type.pack(n,i,t*o)}bl.prototype.isClass=function(e,t){let n=pg(this,e,function(i,o){let r=i._classIds[o];if(i._classes[r].name===t)return!0});return c(n)};bl.prototype.getClassName=function(e){let t=this._classIds[e];return this._classes[t].name};var G_=bl;var Aee={HIGHLIGHT:0,REPLACE:1,MIX:2},Mh=Object.freeze(Aee);var Ax=ec.DEFAULT_COLOR_VALUE,lx=ec.DEFAULT_SHOW_VALUE;function si(e,t,n,i,o){this.featuresLength=t;let r;c(n)&&(r=n.extensions),this._extensions=r??{};let a=lee(n);this._properties=a,this._batchTableHierarchy=uee(this,n,i);let s=WO(t,a,i);this._binaryPropertiesByteLength=fee(s),this._batchTableBinaryProperties=s,this._content=e,this._batchTexture=new ec({featuresLength:t,colorChangedCallback:o,owner:e,statistics:e.tileset.statistics})}si._deprecationWarning=Kr;Object.defineProperties(si.prototype,{batchTableByteLength:{get:function(){let e=this._binaryPropertiesByteLength;return c(this._batchTableHierarchy)&&(e+=this._batchTableHierarchy.byteLength),e+=this._batchTexture.byteLength,e}}});function lee(e){let t={};if(!c(e))return t;for(let n in e)e.hasOwnProperty(n)&&n!=="HIERARCHY"&&n!=="extensions"&&n!=="extras"&&(t[n]=Re(e[n],!0));return t}function uee(e,t,n){if(!c(t))return;let i=e._extensions["3DTILES_batch_table_hierarchy"],o=t.HIERARCHY;if(c(o)&&(si._deprecationWarning("batchTableHierarchyExtension","The batch table HIERARCHY property has been moved to an extension. Use extensions.3DTILES_batch_table_hierarchy instead."),e._extensions["3DTILES_batch_table_hierarchy"]=o,i=o),!!c(i))return new G_({extension:i,binaryBody:n})}function WO(e,t,n){let i;for(let o in t)if(t.hasOwnProperty(o)){let r=t[o],a=r.byteOffset;if(c(a)){let s=r.componentType,A=r.type;if(!c(s))throw new ae("componentType is required.");if(!c(A))throw new ae("type is required.");if(!c(n))throw new ae(`Property ${o} requires a batch table binary.`);let l=xA(r),d=l.componentsPerAttribute,m=l.classType,p=l.createArrayBufferView(n.buffer,n.byteOffset+a,e);c(i)||(i={}),i[o]={typedArray:p,componentCount:d,type:m}}}return i}function fee(e){if(!c(e))return 0;let t=0;for(let n in e)e.hasOwnProperty(n)&&(t+=e[n].typedArray.byteLength);return t}si.getBinaryProperties=function(e,t,n){return WO(e,t,n)};si.prototype.setShow=function(e,t){this._batchTexture.setShow(e,t)};si.prototype.setAllShow=function(e){this._batchTexture.setAllShow(e)};si.prototype.getShow=function(e){return this._batchTexture.getShow(e)};si.prototype.setColor=function(e,t){this._batchTexture.setColor(e,t)};si.prototype.setAllColor=function(e){this._batchTexture.setAllColor(e)};si.prototype.getColor=function(e,t){return this._batchTexture.getColor(e,t)};si.prototype.getPickColor=function(e){return this._batchTexture.getPickColor(e)};var dee=new J;si.prototype.applyStyle=function(e){if(!c(e)){this.setAllColor(Ax),this.setAllShow(lx);return}let t=this._content,n=this.featuresLength;for(let i=0;i<n;++i){let o=t.getFeature(i),r=c(e.color)?e.color.evaluateColor(o,dee)??Ax:Ax,a=c(e.show)?e.show.evaluate(o)??lx:lx;this.setColor(i,r),this.setShow(i,a)}};function hee(e,t){let n=e.typedArray,i=e.componentCount;return i===1?n[t]:e.type.unpack(n,t*i)}function mee(e,t,n){let i=e.typedArray,o=e.componentCount;o===1?i[t]=n:e.type.pack(n,i,t*o)}si.prototype.isClass=function(e,t){let n=this._batchTableHierarchy;return c(n)?n.isClass(e,t):!1};si.prototype.isExactClass=function(e,t){return this.getExactClassName(e)===t};si.prototype.getExactClassName=function(e){let t=this._batchTableHierarchy;if(c(t))return t.getClassName(e)};si.prototype.hasProperty=function(e,t){return c(this._properties[t])||c(this._batchTableHierarchy)&&this._batchTableHierarchy.hasProperty(e,t)};si.prototype.hasPropertyBySemantic=function(){return!1};si.prototype.getPropertyIds=function(e,t){t=c(t)?t:[],t.length=0;let n=Object.keys(this._properties);if(Mn(t,n),c(this._batchTableHierarchy)){let i=this._batchTableHierarchy.getPropertyIds(e,n);Mn(t,i)}return t};si.prototype.getPropertyBySemantic=function(e,t){};si.prototype.getProperty=function(e,t){if(c(this._batchTableBinaryProperties)){let i=this._batchTableBinaryProperties[t];if(c(i))return hee(i,e)}let n=this._properties[t];if(c(n))return Re(n[e],!0);if(c(this._batchTableHierarchy)){let i=this._batchTableHierarchy.getProperty(e,t);if(c(i))return i}};si.prototype.setProperty=function(e,t,n){let i=this.featuresLength;if(c(this._batchTableBinaryProperties)){let r=this._batchTableBinaryProperties[t];if(c(r)){mee(r,e,n);return}}if(c(this._batchTableHierarchy)&&this._batchTableHierarchy.setProperty(e,t,n))return;let o=this._properties[t];c(o)||(this._properties[t]=new Array(i),o=this._properties[t]),o[e]=Re(n,!0)};function pee(e){return e._batchTexture.textureDimensions.y===1?`uniform vec4 tile_textureStep; 
vec2 computeSt(float batchId) 
{ 
    float stepX = tile_textureStep.x; 
    float centerX = tile_textureStep.y; 
    return vec2(centerX + (batchId * stepX), 0.5); 
} 
`:`uniform vec4 tile_textureStep; 
uniform vec2 tile_textureDimensions; 
vec2 computeSt(float batchId) 
{ 
    float stepX = tile_textureStep.x; 
    float centerX = tile_textureStep.y; 
    float stepY = tile_textureStep.z; 
    float centerY = tile_textureStep.w; 
    float xId = mod(batchId, tile_textureDimensions.x); 
    float yId = floor(batchId / tile_textureDimensions.x); 
    return vec2(centerX + (xId * stepX), centerY + (yId * stepY)); 
} 
`}si.prototype.getVertexShaderCallback=function(e,t,n){if(this.featuresLength===0)return;let i=this;return function(o){let r=qO(o,n,!1),a;return rn.maximumVertexTextureImageUnits>0?(a="",e&&(a+=`uniform bool tile_translucentCommand; 
`),a+=`uniform sampler2D tile_batchTexture; 
out vec4 tile_featureColor; 
out vec2 tile_featureSt; 
void main() 
{ 
    vec2 st = computeSt(${t}); 
    vec4 featureProperties = texture(tile_batchTexture, st); 
    tile_color(featureProperties); 
    float show = ceil(featureProperties.a); 
    gl_Position *= show; 
`,e&&(a+=`    bool isStyleTranslucent = (featureProperties.a != 1.0); 
    if (czm_pass == czm_passTranslucent) 
    { 
        if (!isStyleTranslucent && !tile_translucentCommand) 
        { 
            gl_Position *= 0.0; 
        } 
    } 
    else 
    { 
        if (isStyleTranslucent) 
        { 
            gl_Position *= 0.0; 
        } 
    } 
`),a+=`    tile_featureColor = featureProperties; 
    tile_featureSt = st; 
}`):a=`out vec2 tile_featureSt; 
void main() 
{ 
    tile_color(vec4(1.0)); 
    tile_featureSt = computeSt(${t}); 
}`,`${r}
${pee(i)}${a}`}};function YO(e,t){return e=It.replaceMain(e,"tile_main"),t?`${e}uniform float tile_colorBlend; 
void tile_color(vec4 tile_featureColor) 
{ 
    tile_main(); 
    tile_featureColor = czm_gammaCorrect(tile_featureColor); 
    out_FragColor.a *= tile_featureColor.a; 
    float highlight = ceil(tile_colorBlend); 
    out_FragColor.rgb *= mix(tile_featureColor.rgb, vec3(1.0), highlight); 
} 
`:`${e}void tile_color(vec4 tile_featureColor) 
{ 
    tile_main(); 
} 
`}function gee(e,t){let n=`texture(${t}`,i=0,o=e.indexOf(n,i),r;for(;o>-1;){let a=0;for(let l=o;l<e.length;++l){let d=e.charAt(l);if(d==="(")++a;else if(d===")"&&(--a,a===0)){r=l+1;break}}let A=`tile_diffuse_final(${e.slice(o,r)}, tile_diffuse)`;e=e.slice(0,o)+A+e.slice(r),i=o+A.length,o=e.indexOf(n,i)}return e}function qO(e,t,n){if(!c(t))return YO(e,n);let i=new RegExp(`(uniform|attribute|in)\\s+(vec[34]|sampler2D)\\s+${t};`),o=e.match(i);if(!c(o))return YO(e,n);let r=o[0],a=o[2];e=It.replaceMain(e,"tile_main"),e=e.replace(r,"");let s=`bool isWhite(vec3 color) 
{ 
    return all(greaterThan(color, vec3(1.0 - czm_epsilon3))); 
} 
vec4 tile_diffuse_final(vec4 sourceDiffuse, vec4 tileDiffuse) 
{ 
    vec4 blendDiffuse = mix(sourceDiffuse, tileDiffuse, tile_colorBlend); 
    vec4 diffuse = isWhite(tileDiffuse.rgb) ? sourceDiffuse : blendDiffuse; 
    return vec4(diffuse.rgb, sourceDiffuse.a); 
} 
`,A=`    tile_featureColor = czm_gammaCorrect(tile_featureColor); 
    out_FragColor.a *= tile_featureColor.a; 
    float highlight = ceil(tile_colorBlend); 
    out_FragColor.rgb *= mix(tile_featureColor.rgb, vec3(1.0), highlight); 
`,l;if(a==="vec3"||a==="vec4"){let d=a==="vec3"?`vec4(${t}, 1.0)`:t,m=a==="vec3"?"tile_diffuse.xyz":"tile_diffuse";i=new RegExp(t,"g"),e=e.replace(i,m),l=`    vec4 source = ${d}; 
    tile_diffuse = tile_diffuse_final(source, tile_featureColor); 
    tile_main(); 
`}else a==="sampler2D"&&(e=gee(e,t),l=`    tile_diffuse = tile_featureColor; 
    tile_main(); 
`);return e=`uniform float tile_colorBlend; 
vec4 tile_diffuse = vec4(1.0); 
${s}${r}
${e}
void tile_color(vec4 tile_featureColor) 
{ 
${l}`,n&&(e+=A),e+=`} 
`,e}si.prototype.getFragmentShaderCallback=function(e,t,n){if(this.featuresLength!==0)return function(i){return i=qO(i,t,!0),rn.maximumVertexTextureImageUnits>0?(i+=`uniform sampler2D tile_pickTexture; 
in vec2 tile_featureSt; 
in vec4 tile_featureColor; 
void main() 
{ 
    tile_color(tile_featureColor); 
`,n&&(i+=`    out_FragColor.rgb *= out_FragColor.a; 
`),i+="}"):(e&&(i+=`uniform bool tile_translucentCommand; 
`),i+=`uniform sampler2D tile_pickTexture; 
uniform sampler2D tile_batchTexture; 
in vec2 tile_featureSt; 
void main() 
{ 
    vec4 featureProperties = texture(tile_batchTexture, tile_featureSt); 
    if (featureProperties.a == 0.0) { 
        discard; 
    } 
`,e&&(i+=`    bool isStyleTranslucent = (featureProperties.a != 1.0); 
    if (czm_pass == czm_passTranslucent) 
    { 
        if (!isStyleTranslucent && !tile_translucentCommand) 
        { 
            discard; 
        } 
    } 
    else 
    { 
        if (isStyleTranslucent) 
        { 
            discard; 
        } 
    } 
`),i+=`    tile_color(featureProperties); 
`,n&&(i+=`    out_FragColor.rgb *= out_FragColor.a; 
`),i+=`} 
`),i}};function Cee(e){let t=e._content.tileset,n=t.colorBlendMode,i=t.colorBlendAmount;if(n===Mh.HIGHLIGHT)return 0;if(n===Mh.REPLACE)return 1;if(n===Mh.MIX)return S.clamp(i,S.EPSILON4,1)}si.prototype.getUniformMapCallback=function(){if(this.featuresLength===0)return;let e=this;return function(t){return dt(t,{tile_batchTexture:function(){return e._batchTexture.batchTexture??e._batchTexture.defaultTexture},tile_textureDimensions:function(){return e._batchTexture.textureDimensions},tile_textureStep:function(){return e._batchTexture.textureStep},tile_colorBlend:function(){return Cee(e)},tile_pickTexture:function(){return e._batchTexture.pickTexture}})}};si.prototype.getPickId=function(){return"texture(tile_pickTexture, tile_featureSt)"};var Lu={ALL_OPAQUE:0,ALL_TRANSLUCENT:1,OPAQUE_AND_TRANSLUCENT:2};si.prototype.addDerivedCommands=function(e,t){let n=e.commandList,i=n.length,o=this._content._tile,r=o._finalResolution,a=o.tileset,s=a.isSkippingLevelOfDetail&&a.hasMixedContent&&e.context.stencilBuffer,A=Eee(this);for(let l=t;l<i;++l){let d=n[l];if(d.pass===He.COMPUTE)continue;let m=d.derivedCommands.tileset;(!c(m)||d.dirty)&&(m={},d.derivedCommands.tileset=m,m.originalCommand=_ee(d),d.dirty=!1);let p=m.originalCommand;A!==Lu.ALL_OPAQUE&&d.pass!==He.TRANSLUCENT&&(c(m.translucent)||(m.translucent=Iee(p))),A!==Lu.ALL_TRANSLUCENT&&d.pass!==He.TRANSLUCENT&&(c(m.opaque)||(m.opaque=yee(p)),s&&(r||(c(m.zback)||(m.zback=Bee(e.context,p)),a._backfaceCommands.push(m.zback)),(!c(m.stencil)||o._selectionDepth!==Tee(m.stencil))&&(d.renderState.depthMask?m.stencil=xee(p,o._selectionDepth):m.stencil=m.opaque)));let g=s?m.stencil:m.opaque,h=m.translucent;d.pass!==He.TRANSLUCENT?(A===Lu.ALL_OPAQUE&&(n[l]=g),A===Lu.ALL_TRANSLUCENT&&(n[l]=h),A===Lu.OPAQUE_AND_TRANSLUCENT&&(n[l]=g,n.push(h))):n[l]=p}};function Eee(e){let t=e._batchTexture.translucentFeaturesLength;return t===0?Lu.ALL_OPAQUE:t===e.featuresLength?Lu.ALL_TRANSLUCENT:Lu.OPAQUE_AND_TRANSLUCENT}function _ee(e){let t=ft.shallowClone(e),n=t.pass===He.TRANSLUCENT;return t.uniformMap=c(t.uniformMap)?t.uniformMap:{},t.uniformMap.tile_translucentCommand=function(){return n},t}function Iee(e){let t=ft.shallowClone(e);return t.pass=He.TRANSLUCENT,t.renderState=See(e.renderState),t}function yee(e){let t=ft.shallowClone(e);return t.renderState=wee(e.renderState),t}function bee(e,t){let n=e.shaderCache.getDerivedShaderProgram(t,"zBackfaceLogDepth");if(!c(n)){let i=t.fragmentShaderSource.clone();i.defines=c(i.defines)?i.defines.slice(0):[],i.defines.push("POLYGON_OFFSET"),n=e.shaderCache.createDerivedShaderProgram(t,"zBackfaceLogDepth",{vertexShaderSource:t.vertexShaderSource,fragmentShaderSource:i,attributeLocations:t._attributeLocations})}return n}function Bee(e,t){let n=ft.shallowClone(t),i=Re(n.renderState,!0);i.cull.enabled=!0,i.cull.face=or.FRONT,i.colorMask={red:!1,green:!1,blue:!1,alpha:!1},i.polygonOffset={enabled:!0,factor:5,units:5},i.stencilTest=wt.setCesium3DTileBit(),i.stencilMask=wt.CESIUM_3D_TILE_MASK,n.renderState=At.fromCache(i),n.castShadows=!1,n.receiveShadows=!1,n.uniformMap=Re(t.uniformMap);let o=new L(5,5);return n.uniformMap.u_polygonOffset=function(){return o},n.shaderProgram=bee(e,t.shaderProgram),n}function xee(e,t){let n=ft.shallowClone(e),i=Re(n.renderState,!0);return i.stencilTest.enabled=!0,i.stencilTest.mask=wt.SKIP_LOD_MASK,i.stencilTest.reference=wt.CESIUM_3D_TILE_MASK|t<<wt.SKIP_LOD_BIT_SHIFT,i.stencilTest.frontFunction=Dn.GREATER_OR_EQUAL,i.stencilTest.frontOperation.zPass=nt.REPLACE,i.stencilTest.backFunction=Dn.GREATER_OR_EQUAL,i.stencilTest.backOperation.zPass=nt.REPLACE,i.stencilMask=wt.CESIUM_3D_TILE_MASK|wt.SKIP_LOD_MASK,n.renderState=At.fromCache(i),n}function Tee(e){return(e.renderState.stencilTest.reference&wt.SKIP_LOD_MASK)>>>wt.SKIP_LOD_BIT_SHIFT}function See(e){let t=Re(e,!0);return t.cull.enabled=!1,t.depthTest.enabled=!0,t.depthMask=!1,t.blending=Pn.ALPHA_BLEND,t.stencilTest=wt.setCesium3DTileBit(),t.stencilMask=wt.CESIUM_3D_TILE_MASK,At.fromCache(t)}function wee(e){let t=Re(e,!0);return t.stencilTest=wt.setCesium3DTileBit(),t.stencilMask=wt.CESIUM_3D_TILE_MASK,At.fromCache(t)}si.prototype.update=function(e,t){this._batchTexture.update(e,t)};si.prototype.isDestroyed=function(){return!1};si.prototype.destroy=function(){return this._batchTexture=this._batchTexture&&this._batchTexture.destroy(),me(this)};var H_=si;function Dee(e){this.offset=e.offset,this.count=e.count,this.color=e.color,this.batchIds=e.batchIds}var Ad=Dee;var ux=`in vec3 position;
in float a_batchId;

uniform mat4 u_modifiedModelViewProjection;

void main()
{
    gl_Position = czm_depthClamp(u_modifiedModelViewProjection * vec4(position, 1.0));
}
`;function tc(e,t){this._content=e,this._batchId=t,this._color=void 0}Object.defineProperties(tc.prototype,{show:{get:function(){return this._content.batchTable.getShow(this._batchId)},set:function(e){this._content.batchTable.setShow(this._batchId,e)}},color:{get:function(){return c(this._color)||(this._color=new J),this._content.batchTable.getColor(this._batchId,this._color)},set:function(e){this._content.batchTable.setColor(this._batchId,e)}},polylinePositions:{get:function(){if(c(this._content.getPolylinePositions))return this._content.getPolylinePositions(this._batchId)}},content:{get:function(){return this._content}},tileset:{get:function(){return this._content.tileset}},primitive:{get:function(){return this._content.tileset}},featureId:{get:function(){return this._batchId}},pickId:{get:function(){return this._content.batchTable.getPickColor(this._batchId)}}});tc.prototype.hasProperty=function(e){return this._content.batchTable.hasProperty(this._batchId,e)};tc.prototype.getPropertyIds=function(e){return this._content.batchTable.getPropertyIds(this._batchId,e)};tc.prototype.getProperty=function(e){return this._content.batchTable.getProperty(this._batchId,e)};tc.getPropertyInherited=function(e,t,n){let i=e.batchTable;if(c(i)){if(i.hasPropertyBySemantic(t,n))return i.getPropertyBySemantic(t,n);if(i.hasProperty(t,n))return i.getProperty(t,n)}let o=e.metadata;if(c(o)){if(o.hasPropertyBySemantic(n))return o.getPropertyBySemantic(n);if(o.hasProperty(n))return o.getProperty(n)}let r=e.tile,a=r.metadata;if(c(a)){if(a.hasPropertyBySemantic(n))return a.getPropertyBySemantic(n);if(a.hasProperty(n))return a.getProperty(n)}let s;if(c(r.implicitSubtree)&&(s=r.implicitSubtree.metadata),c(s)){if(s.hasPropertyBySemantic(n))return s.getPropertyBySemantic(n);if(s.hasProperty(n))return s.getProperty(n)}let A=c(e.group)?e.group.metadata:void 0;if(c(A)){if(A.hasPropertyBySemantic(n))return A.getPropertyBySemantic(n);if(A.hasProperty(n))return A.getProperty(n)}let l=e.tileset.metadata;if(c(l)){if(l.hasPropertyBySemantic(n))return l.getPropertyBySemantic(n);if(l.hasProperty(n))return l.getProperty(n)}};tc.prototype.getPropertyInherited=function(e){return tc.getPropertyInherited(this._content,this._batchId,e)};tc.prototype.setProperty=function(e,t){this._content.batchTable.setProperty(this._batchId,e,t),this._content.featurePropertiesDirty=!0};tc.prototype.isExactClass=function(e){return this._content.batchTable.isExactClass(this._batchId,e)};tc.prototype.isClass=function(e){return this._content.batchTable.isClass(this._batchId,e)};tc.prototype.getExactClassName=function(){return this._content.batchTable.getExactClassName(this._batchId)};var Cs=tc;var fx=class{add(t,n,i){if(typeof arguments[0]!="string")for(let o in arguments[0])this.add(o,arguments[0][o],arguments[1]);else(Array.isArray(t)?t:[t]).forEach(function(o){this[o]=this[o]||[],n&&this[o][i?"unshift":"push"](n)},this)}run(t,n){this[t]=this[t]||[],this[t].forEach(function(i){i.call(n&&n.context?n.context:n,n)})}},dx=class{constructor(t){this.jsep=t,this.registered={}}register(...t){t.forEach(n=>{if(typeof n!="object"||!n.name||!n.init)throw new Error("Invalid JSEP plugin format");this.registered[n.name]||(n.init(this.jsep),this.registered[n.name]=n)})}},$a=class e{static get version(){return"1.4.0"}static toString(){return"JavaScript Expression Parser (JSEP) v"+e.version}static addUnaryOp(t){return e.max_unop_len=Math.max(t.length,e.max_unop_len),e.unary_ops[t]=1,e}static addBinaryOp(t,n,i){return e.max_binop_len=Math.max(t.length,e.max_binop_len),e.binary_ops[t]=n,i?e.right_associative.add(t):e.right_associative.delete(t),e}static addIdentifierChar(t){return e.additional_identifier_chars.add(t),e}static addLiteral(t,n){return e.literals[t]=n,e}static removeUnaryOp(t){return delete e.unary_ops[t],t.length===e.max_unop_len&&(e.max_unop_len=e.getMaxKeyLen(e.unary_ops)),e}static removeAllUnaryOps(){return e.unary_ops={},e.max_unop_len=0,e}static removeIdentifierChar(t){return e.additional_identifier_chars.delete(t),e}static removeBinaryOp(t){return delete e.binary_ops[t],t.length===e.max_binop_len&&(e.max_binop_len=e.getMaxKeyLen(e.binary_ops)),e.right_associative.delete(t),e}static removeAllBinaryOps(){return e.binary_ops={},e.max_binop_len=0,e}static removeLiteral(t){return delete e.literals[t],e}static removeAllLiterals(){return e.literals={},e}get char(){return this.expr.charAt(this.index)}get code(){return this.expr.charCodeAt(this.index)}constructor(t){this.expr=t,this.index=0}static parse(t){return new e(t).parse()}static getMaxKeyLen(t){return Math.max(0,...Object.keys(t).map(n=>n.length))}static isDecimalDigit(t){return t>=48&&t<=57}static binaryPrecedence(t){return e.binary_ops[t]||0}static isIdentifierStart(t){return t>=65&&t<=90||t>=97&&t<=122||t>=128&&!e.binary_ops[String.fromCharCode(t)]||e.additional_identifier_chars.has(String.fromCharCode(t))}static isIdentifierPart(t){return e.isIdentifierStart(t)||e.isDecimalDigit(t)}throwError(t){let n=new Error(t+" at character "+this.index);throw n.index=this.index,n.description=t,n}runHook(t,n){if(e.hooks[t]){let i={context:this,node:n};return e.hooks.run(t,i),i.node}return n}searchHook(t){if(e.hooks[t]){let n={context:this};return e.hooks[t].find(function(i){return i.call(n.context,n),n.node}),n.node}}gobbleSpaces(){let t=this.code;for(;t===e.SPACE_CODE||t===e.TAB_CODE||t===e.LF_CODE||t===e.CR_CODE;)t=this.expr.charCodeAt(++this.index);this.runHook("gobble-spaces")}parse(){this.runHook("before-all");let t=this.gobbleExpressions(),n=t.length===1?t[0]:{type:e.COMPOUND,body:t};return this.runHook("after-all",n)}gobbleExpressions(t){let n=[],i,o;for(;this.index<this.expr.length;)if(i=this.code,i===e.SEMCOL_CODE||i===e.COMMA_CODE)this.index++;else if(o=this.gobbleExpression())n.push(o);else if(this.index<this.expr.length){if(i===t)break;this.throwError('Unexpected "'+this.char+'"')}return n}gobbleExpression(){let t=this.searchHook("gobble-expression")||this.gobbleBinaryExpression();return this.gobbleSpaces(),this.runHook("after-expression",t)}gobbleBinaryOp(){this.gobbleSpaces();let t=this.expr.substr(this.index,e.max_binop_len),n=t.length;for(;n>0;){if(e.binary_ops.hasOwnProperty(t)&&(!e.isIdentifierStart(this.code)||this.index+t.length<this.expr.length&&!e.isIdentifierPart(this.expr.charCodeAt(this.index+t.length))))return this.index+=n,t;t=t.substr(0,--n)}return!1}gobbleBinaryExpression(){let t,n,i,o,r,a,s,A,l;if(a=this.gobbleToken(),!a||(n=this.gobbleBinaryOp(),!n))return a;for(r={value:n,prec:e.binaryPrecedence(n),right_a:e.right_associative.has(n)},s=this.gobbleToken(),s||this.throwError("Expected expression after "+n),o=[a,r,s];n=this.gobbleBinaryOp();){if(i=e.binaryPrecedence(n),i===0){this.index-=n.length;break}r={value:n,prec:i,right_a:e.right_associative.has(n)},l=n;let d=m=>r.right_a&&m.right_a?i>m.prec:i<=m.prec;for(;o.length>2&&d(o[o.length-2]);)s=o.pop(),n=o.pop().value,a=o.pop(),t={type:e.BINARY_EXP,operator:n,left:a,right:s},o.push(t);t=this.gobbleToken(),t||this.throwError("Expected expression after "+l),o.push(r,t)}for(A=o.length-1,t=o[A];A>1;)t={type:e.BINARY_EXP,operator:o[A-1].value,left:o[A-2],right:t},A-=2;return t}gobbleToken(){let t,n,i,o;if(this.gobbleSpaces(),o=this.searchHook("gobble-token"),o)return this.runHook("after-token",o);if(t=this.code,e.isDecimalDigit(t)||t===e.PERIOD_CODE)return this.gobbleNumericLiteral();if(t===e.SQUOTE_CODE||t===e.DQUOTE_CODE)o=this.gobbleStringLiteral();else if(t===e.OBRACK_CODE)o=this.gobbleArray();else{for(n=this.expr.substr(this.index,e.max_unop_len),i=n.length;i>0;){if(e.unary_ops.hasOwnProperty(n)&&(!e.isIdentifierStart(this.code)||this.index+n.length<this.expr.length&&!e.isIdentifierPart(this.expr.charCodeAt(this.index+n.length)))){this.index+=i;let r=this.gobbleToken();return r||this.throwError("missing unaryOp argument"),this.runHook("after-token",{type:e.UNARY_EXP,operator:n,argument:r,prefix:!0})}n=n.substr(0,--i)}e.isIdentifierStart(t)?(o=this.gobbleIdentifier(),e.literals.hasOwnProperty(o.name)?o={type:e.LITERAL,value:e.literals[o.name],raw:o.name}:o.name===e.this_str&&(o={type:e.THIS_EXP})):t===e.OPAREN_CODE&&(o=this.gobbleGroup())}return o?(o=this.gobbleTokenProperty(o),this.runHook("after-token",o)):this.runHook("after-token",!1)}gobbleTokenProperty(t){this.gobbleSpaces();let n=this.code;for(;n===e.PERIOD_CODE||n===e.OBRACK_CODE||n===e.OPAREN_CODE||n===e.QUMARK_CODE;){let i;if(n===e.QUMARK_CODE){if(this.expr.charCodeAt(this.index+1)!==e.PERIOD_CODE)break;i=!0,this.index+=2,this.gobbleSpaces(),n=this.code}this.index++,n===e.OBRACK_CODE?(t={type:e.MEMBER_EXP,computed:!0,object:t,property:this.gobbleExpression()},t.property||this.throwError('Unexpected "'+this.char+'"'),this.gobbleSpaces(),n=this.code,n!==e.CBRACK_CODE&&this.throwError("Unclosed ["),this.index++):n===e.OPAREN_CODE?t={type:e.CALL_EXP,arguments:this.gobbleArguments(e.CPAREN_CODE),callee:t}:(n===e.PERIOD_CODE||i)&&(i&&this.index--,this.gobbleSpaces(),t={type:e.MEMBER_EXP,computed:!1,object:t,property:this.gobbleIdentifier()}),i&&(t.optional=!0),this.gobbleSpaces(),n=this.code}return t}gobbleNumericLiteral(){let t="",n,i;for(;e.isDecimalDigit(this.code);)t+=this.expr.charAt(this.index++);if(this.code===e.PERIOD_CODE)for(t+=this.expr.charAt(this.index++);e.isDecimalDigit(this.code);)t+=this.expr.charAt(this.index++);if(n=this.char,n==="e"||n==="E"){for(t+=this.expr.charAt(this.index++),n=this.char,(n==="+"||n==="-")&&(t+=this.expr.charAt(this.index++));e.isDecimalDigit(this.code);)t+=this.expr.charAt(this.index++);e.isDecimalDigit(this.expr.charCodeAt(this.index-1))||this.throwError("Expected exponent ("+t+this.char+")")}return i=this.code,e.isIdentifierStart(i)?this.throwError("Variable names cannot start with a number ("+t+this.char+")"):(i===e.PERIOD_CODE||t.length===1&&t.charCodeAt(0)===e.PERIOD_CODE)&&this.throwError("Unexpected period"),{type:e.LITERAL,value:parseFloat(t),raw:t}}gobbleStringLiteral(){let t="",n=this.index,i=this.expr.charAt(this.index++),o=!1;for(;this.index<this.expr.length;){let r=this.expr.charAt(this.index++);if(r===i){o=!0;break}else if(r==="\\")switch(r=this.expr.charAt(this.index++),r){case"n":t+=`
`;break;case"r":t+="\r";break;case"t":t+="	";break;case"b":t+="\b";break;case"f":t+="\f";break;case"v":t+="\v";break;default:t+=r}else t+=r}return o||this.throwError('Unclosed quote after "'+t+'"'),{type:e.LITERAL,value:t,raw:this.expr.substring(n,this.index)}}gobbleIdentifier(){let t=this.code,n=this.index;for(e.isIdentifierStart(t)?this.index++:this.throwError("Unexpected "+this.char);this.index<this.expr.length&&(t=this.code,e.isIdentifierPart(t));)this.index++;return{type:e.IDENTIFIER,name:this.expr.slice(n,this.index)}}gobbleArguments(t){let n=[],i=!1,o=0;for(;this.index<this.expr.length;){this.gobbleSpaces();let r=this.code;if(r===t){i=!0,this.index++,t===e.CPAREN_CODE&&o&&o>=n.length&&this.throwError("Unexpected token "+String.fromCharCode(t));break}else if(r===e.COMMA_CODE){if(this.index++,o++,o!==n.length){if(t===e.CPAREN_CODE)this.throwError("Unexpected token ,");else if(t===e.CBRACK_CODE)for(let a=n.length;a<o;a++)n.push(null)}}else if(n.length!==o&&o!==0)this.throwError("Expected comma");else{let a=this.gobbleExpression();(!a||a.type===e.COMPOUND)&&this.throwError("Expected comma"),n.push(a)}}return i||this.throwError("Expected "+String.fromCharCode(t)),n}gobbleGroup(){this.index++;let t=this.gobbleExpressions(e.CPAREN_CODE);if(this.code===e.CPAREN_CODE)return this.index++,t.length===1?t[0]:t.length?{type:e.SEQUENCE_EXP,expressions:t}:!1;this.throwError("Unclosed (")}gobbleArray(){return this.index++,{type:e.ARRAY_EXP,elements:this.gobbleArguments(e.CBRACK_CODE)}}},Qee=new fx;Object.assign($a,{hooks:Qee,plugins:new dx($a),COMPOUND:"Compound",SEQUENCE_EXP:"SequenceExpression",IDENTIFIER:"Identifier",MEMBER_EXP:"MemberExpression",LITERAL:"Literal",THIS_EXP:"ThisExpression",CALL_EXP:"CallExpression",UNARY_EXP:"UnaryExpression",BINARY_EXP:"BinaryExpression",ARRAY_EXP:"ArrayExpression",TAB_CODE:9,LF_CODE:10,CR_CODE:13,SPACE_CODE:32,PERIOD_CODE:46,COMMA_CODE:44,SQUOTE_CODE:39,DQUOTE_CODE:34,OPAREN_CODE:40,CPAREN_CODE:41,OBRACK_CODE:91,CBRACK_CODE:93,QUMARK_CODE:63,SEMCOL_CODE:59,COLON_CODE:58,unary_ops:{"-":1,"!":1,"~":1,"+":1},binary_ops:{"||":1,"??":1,"&&":2,"|":3,"^":4,"&":5,"==":6,"!=":6,"===":6,"!==":6,"<":7,">":7,"<=":7,">=":7,"<<":8,">>":8,">>>":8,"+":9,"-":9,"*":10,"/":10,"%":10,"**":11},right_associative:new Set(["**"]),additional_identifier_chars:new Set(["$","_"]),literals:{true:!0,false:!1,null:null},this_str:"this"});$a.max_unop_len=$a.getMaxKeyLen($a.unary_ops);$a.max_binop_len=$a.getMaxKeyLen($a.binary_ops);var Fu=e=>new $a(e).parse(),Ree=Object.getOwnPropertyNames(class{});Object.getOwnPropertyNames($a).filter(e=>!Ree.includes(e)&&Fu[e]===void 0).forEach(e=>{Fu[e]=$a[e]});Fu.Jsep=$a;var vee="ConditionalExpression",Mee={name:"ternary",init(e){e.hooks.add("after-expression",function(n){if(n.node&&this.code===e.QUMARK_CODE){this.index++;let i=n.node,o=this.gobbleExpression();if(o||this.throwError("Expected expression"),this.gobbleSpaces(),this.code===e.COLON_CODE){this.index++;let r=this.gobbleExpression();if(r||this.throwError("Expected expression"),n.node={type:vee,test:i,consequent:o,alternate:r},i.operator&&e.binary_ops[i.operator]<=.9){let a=i;for(;a.right.operator&&e.binary_ops[a.right.operator]<=.9;)a=a.right;n.node.test=a.right,a.right=n.node,n.node=i}}else this.throwError("Expected :")}})}};Fu.plugins.register(Mee);var Pee={VARIABLE:0,UNARY:1,BINARY:2,TERNARY:3,CONDITIONAL:4,MEMBER:5,FUNCTION_CALL:6,ARRAY:7,REGEX:8,VARIABLE_IN_STRING:9,LITERAL_NULL:10,LITERAL_BOOLEAN:11,LITERAL_NUMBER:12,LITERAL_STRING:13,LITERAL_COLOR:14,LITERAL_VECTOR:15,LITERAL_REGEX:16,LITERAL_UNDEFINED:17,BUILTIN_VARIABLE:18},qe=Object.freeze(Pee);function zc(e,t){this._expression=e,e=Wee(e,t),e=Jee(qee(e)),Fu.addBinaryOp("=~",0),Fu.addBinaryOp("!~",0);let n;try{n=Fu(e)}catch(i){throw new ae(i)}this._runtimeAst=yn(this,n)}Object.defineProperties(zc.prototype,{expression:{get:function(){return this._expression}}});var kt={arrayIndex:0,arrayArray:[[]],cartesian2Index:0,cartesian3Index:0,cartesian4Index:0,cartesian2Array:[new L],cartesian3Array:[new f],cartesian4Array:[new re],reset:function(){this.arrayIndex=0,this.cartesian2Index=0,this.cartesian3Index=0,this.cartesian4Index=0},getArray:function(){this.arrayIndex>=this.arrayArray.length&&this.arrayArray.push([]);let e=this.arrayArray[this.arrayIndex++];return e.length=0,e},getCartesian2:function(){return this.cartesian2Index>=this.cartesian2Array.length&&this.cartesian2Array.push(new L),this.cartesian2Array[this.cartesian2Index++]},getCartesian3:function(){return this.cartesian3Index>=this.cartesian3Array.length&&this.cartesian3Array.push(new f),this.cartesian3Array[this.cartesian3Index++]},getCartesian4:function(){return this.cartesian4Index>=this.cartesian4Array.length&&this.cartesian4Array.push(new re),this.cartesian4Array[this.cartesian4Index++]}};zc.prototype.evaluate=function(e,t){kt.reset();let n=this._runtimeAst.evaluate(e);return t instanceof J&&n instanceof re?J.fromCartesian4(n,t):n instanceof L||n instanceof f||n instanceof re?n.clone(t):n};zc.prototype.evaluateColor=function(e,t){kt.reset();let n=this._runtimeAst.evaluate(e);return J.fromCartesian4(n,t)};zc.prototype.getShaderFunction=function(e,t,n,i){let o=this.getShaderExpression(t,n);return o=`${i} ${e}
{
    return ${o};
}
`,o};zc.prototype.getShaderExpression=function(e,t){return this._runtimeAst.getShaderExpression(e,t)};zc.prototype.getVariables=function(){let e=[];return this._runtimeAst.getVariables(e),e=e.filter(function(t,n,i){return i.indexOf(t)===n}),e};var Nee=["!","-","+"],JO=["+","-","*","/","%","===","!==",">",">=","<","<=","&&","||","!~","=~"],gg=/\${(.*?)}/g,Lee=/\\/g,Fee="@#%",Oee=/@#%/g,Y_=new J,W_={abs:ar(Math.abs),sqrt:ar(Math.sqrt),cos:ar(Math.cos),sin:ar(Math.sin),tan:ar(Math.tan),acos:ar(Math.acos),asin:ar(Math.asin),atan:ar(Math.atan),radians:ar(S.toRadians),degrees:ar(S.toDegrees),sign:ar(S.sign),floor:ar(Math.floor),ceil:ar(Math.ceil),round:ar(Math.round),exp:ar(Math.exp),exp2:ar(Uee),log:ar(Math.log),log2:ar(zee),fract:ar(kee),length:Gee,normalize:Hee},q_={atan2:V_(Math.atan2,!1),pow:V_(Math.pow,!1),min:V_(Math.min,!0),max:V_(Math.max,!0),distance:Vee,dot:jee,cross:Yee},px={clamp:KO(S.clamp,!0),mix:KO(S.lerp,!0)};function kee(e){return e-Math.floor(e)}function Uee(e){return Math.pow(2,e)}function zee(e){return S.log2(e)}function ar(e){return function(t,n){if(typeof n=="number")return e(n);if(n instanceof L)return L.fromElements(e(n.x),e(n.y),kt.getCartesian2());if(n instanceof f)return f.fromElements(e(n.x),e(n.y),e(n.z),kt.getCartesian3());if(n instanceof re)return re.fromElements(e(n.x),e(n.y),e(n.z),e(n.w),kt.getCartesian4());throw new ae(`Function "${t}" requires a vector or number argument. Argument is ${n}.`)}}function V_(e,t){return function(n,i,o){if(t&&typeof o=="number"){if(typeof i=="number")return e(i,o);if(i instanceof L)return L.fromElements(e(i.x,o),e(i.y,o),kt.getCartesian2());if(i instanceof f)return f.fromElements(e(i.x,o),e(i.y,o),e(i.z,o),kt.getCartesian3());if(i instanceof re)return re.fromElements(e(i.x,o),e(i.y,o),e(i.z,o),e(i.w,o),kt.getCartesian4())}if(typeof i=="number"&&typeof o=="number")return e(i,o);if(i instanceof L&&o instanceof L)return L.fromElements(e(i.x,o.x),e(i.y,o.y),kt.getCartesian2());if(i instanceof f&&o instanceof f)return f.fromElements(e(i.x,o.x),e(i.y,o.y),e(i.z,o.z),kt.getCartesian3());if(i instanceof re&&o instanceof re)return re.fromElements(e(i.x,o.x),e(i.y,o.y),e(i.z,o.z),e(i.w,o.w),kt.getCartesian4());throw new ae(`Function "${n}" requires vector or number arguments of matching types. Arguments are ${i} and ${o}.`)}}function KO(e,t){return function(n,i,o,r){if(t&&typeof r=="number"){if(typeof i=="number"&&typeof o=="number")return e(i,o,r);if(i instanceof L&&o instanceof L)return L.fromElements(e(i.x,o.x,r),e(i.y,o.y,r),kt.getCartesian2());if(i instanceof f&&o instanceof f)return f.fromElements(e(i.x,o.x,r),e(i.y,o.y,r),e(i.z,o.z,r),kt.getCartesian3());if(i instanceof re&&o instanceof re)return re.fromElements(e(i.x,o.x,r),e(i.y,o.y,r),e(i.z,o.z,r),e(i.w,o.w,r),kt.getCartesian4())}if(typeof i=="number"&&typeof o=="number"&&typeof r=="number")return e(i,o,r);if(i instanceof L&&o instanceof L&&r instanceof L)return L.fromElements(e(i.x,o.x,r.x),e(i.y,o.y,r.y),kt.getCartesian2());if(i instanceof f&&o instanceof f&&r instanceof f)return f.fromElements(e(i.x,o.x,r.x),e(i.y,o.y,r.y),e(i.z,o.z,r.z),kt.getCartesian3());if(i instanceof re&&o instanceof re&&r instanceof re)return re.fromElements(e(i.x,o.x,r.x),e(i.y,o.y,r.y),e(i.z,o.z,r.z),e(i.w,o.w,r.w),kt.getCartesian4());throw new ae(`Function "${n}" requires vector or number arguments of matching types. Arguments are ${i}, ${o}, and ${r}.`)}}function Gee(e,t){if(typeof t=="number")return Math.abs(t);if(t instanceof L)return L.magnitude(t);if(t instanceof f)return f.magnitude(t);if(t instanceof re)return re.magnitude(t);throw new ae(`Function "${e}" requires a vector or number argument. Argument is ${t}.`)}function Hee(e,t){if(typeof t=="number")return 1;if(t instanceof L)return L.normalize(t,kt.getCartesian2());if(t instanceof f)return f.normalize(t,kt.getCartesian3());if(t instanceof re)return re.normalize(t,kt.getCartesian4());throw new ae(`Function "${e}" requires a vector or number argument. Argument is ${t}.`)}function Vee(e,t,n){if(typeof t=="number"&&typeof n=="number")return Math.abs(t-n);if(t instanceof L&&n instanceof L)return L.distance(t,n);if(t instanceof f&&n instanceof f)return f.distance(t,n);if(t instanceof re&&n instanceof re)return re.distance(t,n);throw new ae(`Function "${e}" requires vector or number arguments of matching types. Arguments are ${t} and ${n}.`)}function jee(e,t,n){if(typeof t=="number"&&typeof n=="number")return t*n;if(t instanceof L&&n instanceof L)return L.dot(t,n);if(t instanceof f&&n instanceof f)return f.dot(t,n);if(t instanceof re&&n instanceof re)return re.dot(t,n);throw new ae(`Function "${e}" requires vector or number arguments of matching types. Arguments are ${t} and ${n}.`)}function Yee(e,t,n){if(t instanceof f&&n instanceof f)return f.cross(t,n,kt.getCartesian3());throw new ae(`Function "${e}" requires vec3 arguments. Arguments are ${t} and ${n}.`)}function Je(e,t,n,i,o){this._type=e,this._value=t,this._left=n,this._right=i,this._test=o,this.evaluate=void 0,rte(this)}function Wee(e,t){if(!c(t))return e;for(let n in t)if(t.hasOwnProperty(n)){let i=new RegExp(`\\$\\{${n}\\}`,"g"),o=`(${t[n]})`;c(o)&&(e=e.replace(i,o))}return e}function qee(e){return e.replace(Lee,Fee)}function mx(e){return e.replace(Oee,"\\")}function Jee(e){let t=e,n="",i=t.indexOf("${");for(;i>=0;){let o=t.indexOf("'"),r=t.indexOf('"'),a;if(o>=0&&o<i)a=t.indexOf("'",o+1),n+=t.substr(0,a+1),t=t.substr(a+1),i=t.indexOf("${");else if(r>=0&&r<i)a=t.indexOf('"',r+1),n+=t.substr(0,a+1),t=t.substr(a+1),i=t.indexOf("${");else{n+=t.substr(0,i);let s=t.indexOf("}");if(s<0)throw new ae("Unmatched {.");n+=`czm_${t.substr(i+2,s-(i+2))}`,t=t.substr(s+1),i=t.indexOf("${")}}return n+=t,n}function Kee(e){let t=typeof e.value;if(e.value===null)return new Je(qe.LITERAL_NULL,null);if(t==="boolean")return new Je(qe.LITERAL_BOOLEAN,e.value);if(t==="number")return new Je(qe.LITERAL_NUMBER,e.value);if(t==="string")return e.value.indexOf("${")>=0?new Je(qe.VARIABLE_IN_STRING,e.value):new Je(qe.LITERAL_STRING,mx(e.value))}function Xee(e,t){let n=t.arguments,i=n.length,o,r,a,s;if(t.callee.type==="MemberExpression"){o=t.callee.property.name;let A=t.callee.object;if(o==="test"||o==="exec"){if(!c(A.callee)||A.callee.name!=="regExp")throw new ae(`${o} is not a function.`);return i===0?o==="test"?new Je(qe.LITERAL_BOOLEAN,!1):new Je(qe.LITERAL_NULL,null):(a=yn(e,A),s=yn(e,n[0]),new Je(qe.FUNCTION_CALL,o,a,s))}else if(o==="toString")return r=yn(e,A),new Je(qe.FUNCTION_CALL,o,r);throw new ae(`Unexpected function call "${o}".`)}if(o=t.callee.name,o==="color"){if(i===0)return new Je(qe.LITERAL_COLOR,o);if(r=yn(e,n[0]),c(n[1])){let A=yn(e,n[1]);return new Je(qe.LITERAL_COLOR,o,[r,A])}return new Je(qe.LITERAL_COLOR,o,[r])}else if(o==="rgb"||o==="hsl"){if(i<3)throw new ae(`${o} requires three arguments.`);return r=[yn(e,n[0]),yn(e,n[1]),yn(e,n[2])],new Je(qe.LITERAL_COLOR,o,r)}else if(o==="rgba"||o==="hsla"){if(i<4)throw new ae(`${o} requires four arguments.`);return r=[yn(e,n[0]),yn(e,n[1]),yn(e,n[2]),yn(e,n[3])],new Je(qe.LITERAL_COLOR,o,r)}else if(o==="vec2"||o==="vec3"||o==="vec4"){r=new Array(i);for(let A=0;A<i;++A)r[A]=yn(e,n[A]);return new Je(qe.LITERAL_VECTOR,o,r)}else{if(o==="isNaN"||o==="isFinite")return i===0?o==="isNaN"?new Je(qe.LITERAL_BOOLEAN,!0):new Je(qe.LITERAL_BOOLEAN,!1):(r=yn(e,n[0]),new Je(qe.UNARY,o,r));if(o==="isExactClass"||o==="isClass"){if(i<1||i>1)throw new ae(`${o} requires exactly one argument.`);return r=yn(e,n[0]),new Je(qe.UNARY,o,r)}else if(o==="getExactClassName"){if(i>0)throw new ae(`${o} does not take any argument.`);return new Je(qe.UNARY,o)}else if(c(W_[o])){if(i!==1)throw new ae(`${o} requires exactly one argument.`);return r=yn(e,n[0]),new Je(qe.UNARY,o,r)}else if(c(q_[o])){if(i!==2)throw new ae(`${o} requires exactly two arguments.`);return a=yn(e,n[0]),s=yn(e,n[1]),new Je(qe.BINARY,o,a,s)}else if(c(px[o])){if(i!==3)throw new ae(`${o} requires exactly three arguments.`);a=yn(e,n[0]),s=yn(e,n[1]);let A=yn(e,n[2]);return new Je(qe.TERNARY,o,a,s,A)}else{if(o==="Boolean")return i===0?new Je(qe.LITERAL_BOOLEAN,!1):(r=yn(e,n[0]),new Je(qe.UNARY,o,r));if(o==="Number")return i===0?new Je(qe.LITERAL_NUMBER,0):(r=yn(e,n[0]),new Je(qe.UNARY,o,r));if(o==="String")return i===0?new Je(qe.LITERAL_STRING,""):(r=yn(e,n[0]),new Je(qe.UNARY,o,r));if(o==="regExp")return Zee(e,t)}}throw new ae(`Unexpected function call "${o}".`)}function Zee(e,t){let n=t.arguments;if(n.length===0)return new Je(qe.LITERAL_REGEX,new RegExp);let i=yn(e,n[0]),o;if(n.length>1){let r=yn(e,n[1]);if(hx(i)&&hx(r)){try{o=new RegExp(mx(String(i._value)),r._value)}catch(a){throw new ae(a)}return new Je(qe.LITERAL_REGEX,o)}return new Je(qe.REGEX,i,r)}if(hx(i)){try{o=new RegExp(mx(String(i._value)))}catch(r){throw new ae(r)}return new Je(qe.LITERAL_REGEX,o)}return new Je(qe.REGEX,i)}function $ee(e){if(ite(e.name)){let t=ote(e.name);return t.substr(0,8)==="tiles3d_"?new Je(qe.BUILTIN_VARIABLE,t):new Je(qe.VARIABLE,t)}else{if(e.name==="NaN")return new Je(qe.LITERAL_NUMBER,NaN);if(e.name==="Infinity")return new Je(qe.LITERAL_NUMBER,1/0);if(e.name==="undefined")return new Je(qe.LITERAL_UNDEFINED,void 0)}throw new ae(`${e.name} is not defined.`)}function ete(e){let t=e.property.name;if(t==="PI")return new Je(qe.LITERAL_NUMBER,Math.PI);if(t==="E")return new Je(qe.LITERAL_NUMBER,Math.E)}function tte(e){if(e.property.name==="POSITIVE_INFINITY")return new Je(qe.LITERAL_NUMBER,Number.POSITIVE_INFINITY)}function nte(e,t){if(t.object.name==="Math")return ete(t);if(t.object.name==="Number")return tte(t);let n,i=yn(e,t.object);return t.computed?(n=yn(e,t.property),new Je(qe.MEMBER,"brackets",i,n)):(n=new Je(qe.LITERAL_STRING,t.property.name),new Je(qe.MEMBER,"dot",i,n))}function hx(e){return e._type>=qe.LITERAL_NULL}function ite(e){return e.substr(0,4)==="czm_"}function ote(e){return e.substr(4)}function yn(e,t){let n,i,o,r;if(t.type==="Literal")n=Kee(t);else if(t.type==="CallExpression")n=Xee(e,t);else if(t.type==="Identifier")n=$ee(t);else if(t.type==="UnaryExpression"){i=t.operator;let a=yn(e,t.argument);if(Nee.indexOf(i)>-1)n=new Je(qe.UNARY,i,a);else throw new ae(`Unexpected operator "${i}".`)}else if(t.type==="BinaryExpression")if(i=t.operator,o=yn(e,t.left),r=yn(e,t.right),JO.indexOf(i)>-1)n=new Je(qe.BINARY,i,o,r);else throw new ae(`Unexpected operator "${i}".`);else if(t.type==="LogicalExpression")i=t.operator,o=yn(e,t.left),r=yn(e,t.right),JO.indexOf(i)>-1&&(n=new Je(qe.BINARY,i,o,r));else if(t.type==="ConditionalExpression"){let a=yn(e,t.test);o=yn(e,t.consequent),r=yn(e,t.alternate),n=new Je(qe.CONDITIONAL,"?",o,r,a)}else if(t.type==="MemberExpression")n=nte(e,t);else if(t.type==="ArrayExpression"){let a=[];for(let s=0;s<t.elements.length;s++)a[s]=yn(e,t.elements[s]);n=new Je(qe.ARRAY,a)}else throw t.type==="Compound"?new ae("Provide exactly one expression."):new ae("Cannot parse expression.");return n}function rte(e){e._type===qe.CONDITIONAL?e.evaluate=e._evaluateConditional:e._type===qe.FUNCTION_CALL?e._value==="test"?e.evaluate=e._evaluateRegExpTest:e._value==="exec"?e.evaluate=e._evaluateRegExpExec:e._value==="toString"&&(e.evaluate=e._evaluateToString):e._type===qe.UNARY?e._value==="!"?e.evaluate=e._evaluateNot:e._value==="-"?e.evaluate=e._evaluateNegative:e._value==="+"?e.evaluate=e._evaluatePositive:e._value==="isNaN"?e.evaluate=e._evaluateNaN:e._value==="isFinite"?e.evaluate=e._evaluateIsFinite:e._value==="isExactClass"?e.evaluate=e._evaluateIsExactClass:e._value==="isClass"?e.evaluate=e._evaluateIsClass:e._value==="getExactClassName"?e.evaluate=e._evaluateGetExactClassName:e._value==="Boolean"?e.evaluate=e._evaluateBooleanConversion:e._value==="Number"?e.evaluate=e._evaluateNumberConversion:e._value==="String"?e.evaluate=e._evaluateStringConversion:c(W_[e._value])&&(e.evaluate=ste(e._value)):e._type===qe.BINARY?e._value==="+"?e.evaluate=e._evaluatePlus:e._value==="-"?e.evaluate=e._evaluateMinus:e._value==="*"?e.evaluate=e._evaluateTimes:e._value==="/"?e.evaluate=e._evaluateDivide:e._value==="%"?e.evaluate=e._evaluateMod:e._value==="==="?e.evaluate=e._evaluateEqualsStrict:e._value==="!=="?e.evaluate=e._evaluateNotEqualsStrict:e._value==="<"?e.evaluate=e._evaluateLessThan:e._value==="<="?e.evaluate=e._evaluateLessThanOrEquals:e._value===">"?e.evaluate=e._evaluateGreaterThan:e._value===">="?e.evaluate=e._evaluateGreaterThanOrEquals:e._value==="&&"?e.evaluate=e._evaluateAnd:e._value==="||"?e.evaluate=e._evaluateOr:e._value==="=~"?e.evaluate=e._evaluateRegExpMatch:e._value==="!~"?e.evaluate=e._evaluateRegExpNotMatch:c(q_[e._value])&&(e.evaluate=cte(e._value)):e._type===qe.TERNARY?e.evaluate=Ate(e._value):e._type===qe.MEMBER?e._value==="brackets"?e.evaluate=e._evaluateMemberBrackets:e.evaluate=e._evaluateMemberDot:e._type===qe.ARRAY?e.evaluate=e._evaluateArray:e._type===qe.VARIABLE?e.evaluate=e._evaluateVariable:e._type===qe.VARIABLE_IN_STRING?e.evaluate=e._evaluateVariableString:e._type===qe.LITERAL_COLOR?e.evaluate=e._evaluateLiteralColor:e._type===qe.LITERAL_VECTOR?e.evaluate=e._evaluateLiteralVector:e._type===qe.LITERAL_STRING?e.evaluate=e._evaluateLiteralString:e._type===qe.REGEX?e.evaluate=e._evaluateRegExp:e._type===qe.BUILTIN_VARIABLE?e._value==="tiles3d_tileset_time"&&(e.evaluate=ate):e.evaluate=e._evaluateLiteral}function ate(e){return c(e)?e.content.tileset.timeSinceLoad:0}function ste(e){let t=W_[e];return function(n){let i=this._left.evaluate(n);return t(e,i)}}function cte(e){let t=q_[e];return function(n){let i=this._left.evaluate(n),o=this._right.evaluate(n);return t(e,i,o)}}function Ate(e){let t=px[e];return function(n){let i=this._left.evaluate(n),o=this._right.evaluate(n),r=this._test.evaluate(n);return t(e,i,o,r)}}function J_(e,t){if(c(e))return e.getPropertyInherited(t)}Je.prototype._evaluateLiteral=function(){return this._value};Je.prototype._evaluateLiteralColor=function(e){let t=Y_,n=this._left;if(this._value==="color")c(n)?n.length>1?(J.fromCssColorString(n[0].evaluate(e),t),t.alpha=n[1].evaluate(e)):J.fromCssColorString(n[0].evaluate(e),t):J.fromBytes(255,255,255,255,t);else if(this._value==="rgb")J.fromBytes(n[0].evaluate(e),n[1].evaluate(e),n[2].evaluate(e),255,t);else if(this._value==="rgba"){let i=n[3].evaluate(e)*255;J.fromBytes(n[0].evaluate(e),n[1].evaluate(e),n[2].evaluate(e),i,t)}else this._value==="hsl"?J.fromHsl(n[0].evaluate(e),n[1].evaluate(e),n[2].evaluate(e),1,t):this._value==="hsla"&&J.fromHsl(n[0].evaluate(e),n[1].evaluate(e),n[2].evaluate(e),n[3].evaluate(e),t);return re.fromColor(t,kt.getCartesian4())};Je.prototype._evaluateLiteralVector=function(e){let t=kt.getArray(),n=this._value,i=this._left,o=i.length;for(let s=0;s<o;++s){let A=i[s].evaluate(e);if(typeof A=="number")t.push(A);else if(A instanceof L)t.push(A.x,A.y);else if(A instanceof f)t.push(A.x,A.y,A.z);else if(A instanceof re)t.push(A.x,A.y,A.z,A.w);else throw new ae(`${n} argument must be a vector or number. Argument is ${A}.`)}let r=t.length,a=parseInt(n.charAt(3));if(r===0)throw new ae(`Invalid ${n} constructor. No valid arguments.`);if(r<a&&r>1)throw new ae(`Invalid ${n} constructor. Not enough arguments.`);if(r>a&&o>1)throw new ae(`Invalid ${n} constructor. Too many arguments.`);if(r===1){let s=t[0];t.push(s,s,s)}if(n==="vec2")return L.fromArray(t,0,kt.getCartesian2());if(n==="vec3")return f.fromArray(t,0,kt.getCartesian3());if(n==="vec4")return re.fromArray(t,0,kt.getCartesian4())};Je.prototype._evaluateLiteralString=function(){return this._value};Je.prototype._evaluateVariableString=function(e){let t=this._value,n=gg.exec(t);for(;n!==null;){let i=n[0],o=n[1],r=J_(e,o);c(r)||(r=""),t=t.replace(i,r),gg.lastIndex+=r.length-i.length,n=gg.exec(t)}return t};Je.prototype._evaluateVariable=function(e){return J_(e,this._value)};function ld(e){return e._value==="feature"}Je.prototype._evaluateMemberDot=function(e){if(ld(this._left))return J_(e,this._right.evaluate(e));let t=this._left.evaluate(e);if(!c(t))return;let n=this._right.evaluate(e);if(t instanceof L||t instanceof f||t instanceof re){if(n==="r")return t.x;if(n==="g")return t.y;if(n==="b")return t.z;if(n==="a")return t.w}return t[n]};Je.prototype._evaluateMemberBrackets=function(e){if(ld(this._left))return J_(e,this._right.evaluate(e));let t=this._left.evaluate(e);if(!c(t))return;let n=this._right.evaluate(e);if(t instanceof L||t instanceof f||t instanceof re){if(n===0||n==="r")return t.x;if(n===1||n==="g")return t.y;if(n===2||n==="b")return t.z;if(n===3||n==="a")return t.w}return t[n]};Je.prototype._evaluateArray=function(e){let t=[];for(let n=0;n<this._value.length;n++)t[n]=this._value[n].evaluate(e);return t};Je.prototype._evaluateNot=function(e){let t=this._left.evaluate(e);if(typeof t!="boolean")throw new ae(`Operator "!" requires a boolean argument. Argument is ${t}.`);return!t};Je.prototype._evaluateNegative=function(e){let t=this._left.evaluate(e);if(t instanceof L)return L.negate(t,kt.getCartesian2());if(t instanceof f)return f.negate(t,kt.getCartesian3());if(t instanceof re)return re.negate(t,kt.getCartesian4());if(typeof t=="number")return-t;throw new ae(`Operator "-" requires a vector or number argument. Argument is ${t}.`)};Je.prototype._evaluatePositive=function(e){let t=this._left.evaluate(e);if(!(t instanceof L||t instanceof f||t instanceof re||typeof t=="number"))throw new ae(`Operator "+" requires a vector or number argument. Argument is ${t}.`);return t};Je.prototype._evaluateLessThan=function(e){let t=this._left.evaluate(e),n=this._right.evaluate(e);if(typeof t!="number"||typeof n!="number")throw new ae(`Operator "<" requires number arguments. Arguments are ${t} and ${n}.`);return t<n};Je.prototype._evaluateLessThanOrEquals=function(e){let t=this._left.evaluate(e),n=this._right.evaluate(e);if(typeof t!="number"||typeof n!="number")throw new ae(`Operator "<=" requires number arguments. Arguments are ${t} and ${n}.`);return t<=n};Je.prototype._evaluateGreaterThan=function(e){let t=this._left.evaluate(e),n=this._right.evaluate(e);if(typeof t!="number"||typeof n!="number")throw new ae(`Operator ">" requires number arguments. Arguments are ${t} and ${n}.`);return t>n};Je.prototype._evaluateGreaterThanOrEquals=function(e){let t=this._left.evaluate(e),n=this._right.evaluate(e);if(typeof t!="number"||typeof n!="number")throw new ae(`Operator ">=" requires number arguments. Arguments are ${t} and ${n}.`);return t>=n};Je.prototype._evaluateOr=function(e){let t=this._left.evaluate(e);if(typeof t!="boolean")throw new ae(`Operator "||" requires boolean arguments. First argument is ${t}.`);if(t)return!0;let n=this._right.evaluate(e);if(typeof n!="boolean")throw new ae(`Operator "||" requires boolean arguments. Second argument is ${n}.`);return t||n};Je.prototype._evaluateAnd=function(e){let t=this._left.evaluate(e);if(typeof t!="boolean")throw new ae(`Operator "&&" requires boolean arguments. First argument is ${t}.`);if(!t)return!1;let n=this._right.evaluate(e);if(typeof n!="boolean")throw new ae(`Operator "&&" requires boolean arguments. Second argument is ${n}.`);return t&&n};Je.prototype._evaluatePlus=function(e){let t=this._left.evaluate(e),n=this._right.evaluate(e);if(n instanceof L&&t instanceof L)return L.add(t,n,kt.getCartesian2());if(n instanceof f&&t instanceof f)return f.add(t,n,kt.getCartesian3());if(n instanceof re&&t instanceof re)return re.add(t,n,kt.getCartesian4());if(typeof t=="string"||typeof n=="string")return t+n;if(typeof t=="number"&&typeof n=="number")return t+n;throw new ae(`Operator "+" requires vector or number arguments of matching types, or at least one string argument. Arguments are ${t} and ${n}.`)};Je.prototype._evaluateMinus=function(e){let t=this._left.evaluate(e),n=this._right.evaluate(e);if(n instanceof L&&t instanceof L)return L.subtract(t,n,kt.getCartesian2());if(n instanceof f&&t instanceof f)return f.subtract(t,n,kt.getCartesian3());if(n instanceof re&&t instanceof re)return re.subtract(t,n,kt.getCartesian4());if(typeof t=="number"&&typeof n=="number")return t-n;throw new ae(`Operator "-" requires vector or number arguments of matching types. Arguments are ${t} and ${n}.`)};Je.prototype._evaluateTimes=function(e){let t=this._left.evaluate(e),n=this._right.evaluate(e);if(n instanceof L&&t instanceof L)return L.multiplyComponents(t,n,kt.getCartesian2());if(n instanceof L&&typeof t=="number")return L.multiplyByScalar(n,t,kt.getCartesian2());if(t instanceof L&&typeof n=="number")return L.multiplyByScalar(t,n,kt.getCartesian2());if(n instanceof f&&t instanceof f)return f.multiplyComponents(t,n,kt.getCartesian3());if(n instanceof f&&typeof t=="number")return f.multiplyByScalar(n,t,kt.getCartesian3());if(t instanceof f&&typeof n=="number")return f.multiplyByScalar(t,n,kt.getCartesian3());if(n instanceof re&&t instanceof re)return re.multiplyComponents(t,n,kt.getCartesian4());if(n instanceof re&&typeof t=="number")return re.multiplyByScalar(n,t,kt.getCartesian4());if(t instanceof re&&typeof n=="number")return re.multiplyByScalar(t,n,kt.getCartesian4());if(typeof t=="number"&&typeof n=="number")return t*n;throw new ae(`Operator "*" requires vector or number arguments. If both arguments are vectors they must be matching types. Arguments are ${t} and ${n}.`)};Je.prototype._evaluateDivide=function(e){let t=this._left.evaluate(e),n=this._right.evaluate(e);if(n instanceof L&&t instanceof L)return L.divideComponents(t,n,kt.getCartesian2());if(t instanceof L&&typeof n=="number")return L.divideByScalar(t,n,kt.getCartesian2());if(n instanceof f&&t instanceof f)return f.divideComponents(t,n,kt.getCartesian3());if(t instanceof f&&typeof n=="number")return f.divideByScalar(t,n,kt.getCartesian3());if(n instanceof re&&t instanceof re)return re.divideComponents(t,n,kt.getCartesian4());if(t instanceof re&&typeof n=="number")return re.divideByScalar(t,n,kt.getCartesian4());if(typeof t=="number"&&typeof n=="number")return t/n;throw new ae(`Operator "/" requires vector or number arguments of matching types, or a number as the second argument. Arguments are ${t} and ${n}.`)};Je.prototype._evaluateMod=function(e){let t=this._left.evaluate(e),n=this._right.evaluate(e);if(n instanceof L&&t instanceof L)return L.fromElements(t.x%n.x,t.y%n.y,kt.getCartesian2());if(n instanceof f&&t instanceof f)return f.fromElements(t.x%n.x,t.y%n.y,t.z%n.z,kt.getCartesian3());if(n instanceof re&&t instanceof re)return re.fromElements(t.x%n.x,t.y%n.y,t.z%n.z,t.w%n.w,kt.getCartesian4());if(typeof t=="number"&&typeof n=="number")return t%n;throw new ae(`Operator "%" requires vector or number arguments of matching types. Arguments are ${t} and ${n}.`)};Je.prototype._evaluateEqualsStrict=function(e){let t=this._left.evaluate(e),n=this._right.evaluate(e);return n instanceof L&&t instanceof L||n instanceof f&&t instanceof f||n instanceof re&&t instanceof re?t.equals(n):t===n};Je.prototype._evaluateNotEqualsStrict=function(e){let t=this._left.evaluate(e),n=this._right.evaluate(e);return n instanceof L&&t instanceof L||n instanceof f&&t instanceof f||n instanceof re&&t instanceof re?!t.equals(n):t!==n};Je.prototype._evaluateConditional=function(e){let t=this._test.evaluate(e);if(typeof t!="boolean")throw new ae(`Conditional argument of conditional expression must be a boolean. Argument is ${t}.`);return t?this._left.evaluate(e):this._right.evaluate(e)};Je.prototype._evaluateNaN=function(e){return isNaN(this._left.evaluate(e))};Je.prototype._evaluateIsFinite=function(e){return isFinite(this._left.evaluate(e))};Je.prototype._evaluateIsExactClass=function(e){return c(e)?e.isExactClass(this._left.evaluate(e)):!1};Je.prototype._evaluateIsClass=function(e){return c(e)?e.isClass(this._left.evaluate(e)):!1};Je.prototype._evaluateGetExactClassName=function(e){if(c(e))return e.getExactClassName()};Je.prototype._evaluateBooleanConversion=function(e){return!!this._left.evaluate(e)};Je.prototype._evaluateNumberConversion=function(e){return Number(this._left.evaluate(e))};Je.prototype._evaluateStringConversion=function(e){return String(this._left.evaluate(e))};Je.prototype._evaluateRegExp=function(e){let t=this._value.evaluate(e),n="";c(this._left)&&(n=this._left.evaluate(e));let i;try{i=new RegExp(t,n)}catch(o){throw new ae(o)}return i};Je.prototype._evaluateRegExpTest=function(e){let t=this._left.evaluate(e),n=this._right.evaluate(e);if(!(t instanceof RegExp&&typeof n=="string"))throw new ae(`RegExp.test requires the first argument to be a RegExp and the second argument to be a string. Arguments are ${t} and ${n}.`);return t.test(n)};Je.prototype._evaluateRegExpMatch=function(e){let t=this._left.evaluate(e),n=this._right.evaluate(e);if(t instanceof RegExp&&typeof n=="string")return t.test(n);if(n instanceof RegExp&&typeof t=="string")return n.test(t);throw new ae(`Operator "=~" requires one RegExp argument and one string argument. Arguments are ${t} and ${n}.`)};Je.prototype._evaluateRegExpNotMatch=function(e){let t=this._left.evaluate(e),n=this._right.evaluate(e);if(t instanceof RegExp&&typeof n=="string")return!t.test(n);if(n instanceof RegExp&&typeof t=="string")return!n.test(t);throw new ae(`Operator "!~" requires one RegExp argument and one string argument. Arguments are ${t} and ${n}.`)};Je.prototype._evaluateRegExpExec=function(e){let t=this._left.evaluate(e),n=this._right.evaluate(e);if(!(t instanceof RegExp&&typeof n=="string"))throw new ae(`RegExp.exec requires the first argument to be a RegExp and the second argument to be a string. Arguments are ${t} and ${n}.`);let i=t.exec(n);return c(i)?i[1]:null};Je.prototype._evaluateToString=function(e){let t=this._left.evaluate(e);if(t instanceof RegExp||t instanceof L||t instanceof f||t instanceof re)return String(t);throw new ae(`Unexpected function call "${this._value}".`)};function XO(e){let t=e._left,n=t.length;for(let s=0;s<n;++s)if(t[s]._type!==qe.LITERAL_NUMBER)return;let i=t[0]._value,o=t[1]._value,r=t[2]._value,a=n===4?t[3]._value:1;return J.fromHsl(i,o,r,a,Y_)}function ZO(e){let t=e._left,n=t.length;for(let o=0;o<n;++o)if(t[o]._type!==qe.LITERAL_NUMBER)return;let i=Y_;return i.red=t[0]._value/255,i.green=t[1]._value/255,i.blue=t[2]._value/255,i.alpha=n===4?t[3]._value:1,i}function Ou(e){return e%1===0?e.toFixed(1):e.toString()}function lte(e){let t=Ou(e.red),n=Ou(e.green),i=Ou(e.blue);return`vec3(${t}, ${n}, ${i})`}function j_(e){let t=Ou(e.red),n=Ou(e.green),i=Ou(e.blue),o=Ou(e.alpha);return`vec4(${t}, ${n}, ${i}, ${o})`}function $O(e,t,n,i){let o=e.length,r=new Array(o);for(let a=0;a<o;++a)r[a]=e[a].getShaderExpression(t,n,i);return r}function e1(e,t){return c(t[e])?t[e]:zc.NULL_SENTINEL}zc.NULL_SENTINEL="czm_infinity";Je.prototype.getShaderExpression=function(e,t,n){let i,o,r,a,s=this._type,A=this._value;c(this._left)&&(Array.isArray(this._left)?o=$O(this._left,e,t,this):o=this._left.getShaderExpression(e,t,this)),c(this._right)&&(r=this._right.getShaderExpression(e,t,this)),c(this._test)&&(a=this._test.getShaderExpression(e,t,this)),Array.isArray(this._value)&&(A=$O(this._value,e,t,this));let l,d,m;switch(s){case qe.VARIABLE:return ld(this)?void 0:e1(A,e);case qe.UNARY:if(A==="Boolean")return`bool(${o})`;if(A==="Number")return`float(${o})`;if(A==="round")return`floor(${o} + 0.5)`;if(c(W_[A]))return`${A}(${o})`;if(A==="isNaN")return`(${o} != ${o})`;if(A==="isFinite")return`(abs(${o}) < czm_infinity)`;if(A==="String"||A==="isExactClass"||A==="isClass"||A==="getExactClassName")throw new ae(`Error generating style shader: "${A}" is not supported.`);return A+o;case qe.BINARY:return A==="%"?`mod(${o}, ${r})`:A==="==="?`(${o} == ${r})`:A==="!=="?`(${o} != ${r})`:A==="atan2"?`atan(${o}, ${r})`:c(q_[A])?`${A}(${o}, ${r})`:`(${o} ${A} ${r})`;case qe.TERNARY:if(c(px[A]))return`${A}(${o}, ${r}, ${a})`;break;case qe.CONDITIONAL:return`(${a} ? ${o} : ${r})`;case qe.MEMBER:return ld(this._left)?e1(r,e):r==="r"||r==="x"||r==="0.0"?`${o}[0]`:r==="g"||r==="y"||r==="1.0"?`${o}[1]`:r==="b"||r==="z"||r==="2.0"?`${o}[2]`:r==="a"||r==="w"||r==="3.0"?`${o}[3]`:`${o}[int(${r})]`;case qe.FUNCTION_CALL:throw new ae(`Error generating style shader: "${A}" is not supported.`);case qe.ARRAY:if(A.length===4)return`vec4(${A[0]}, ${A[1]}, ${A[2]}, ${A[3]})`;if(A.length===3)return`vec3(${A[0]}, ${A[1]}, ${A[2]})`;if(A.length===2)return`vec2(${A[0]}, ${A[1]})`;throw new ae("Error generating style shader: Invalid array length. Array length should be 2, 3, or 4.");case qe.REGEX:throw new ae("Error generating style shader: Regular expressions are not supported.");case qe.VARIABLE_IN_STRING:throw new ae("Error generating style shader: Converting a variable to a string is not supported.");case qe.LITERAL_NULL:return zc.NULL_SENTINEL;case qe.LITERAL_BOOLEAN:return A?"true":"false";case qe.LITERAL_NUMBER:return Ou(A);case qe.LITERAL_STRING:if(c(n)&&n._type===qe.MEMBER&&(A==="r"||A==="g"||A==="b"||A==="a"||A==="x"||A==="y"||A==="z"||A==="w"||ld(n._left)))return A;if(i=J.fromCssColorString(A,Y_),c(i))return lte(i);throw new ae("Error generating style shader: String literals are not supported.");case qe.LITERAL_COLOR:if(l=o,A==="color"){if(c(l)){if(l.length>1){let p=l[0],g=l[1];return g!=="1.0"&&(t.translucent=!0),`vec4(${p}, ${g})`}}else return"vec4(1.0)";return`vec4(${l[0]}, 1.0)`}else{if(A==="rgb")return i=ZO(this),c(i)?j_(i):`vec4(${l[0]} / 255.0, ${l[1]} / 255.0, ${l[2]} / 255.0, 1.0)`;if(A==="rgba")return l[3]!=="1.0"&&(t.translucent=!0),i=ZO(this),c(i)?j_(i):`vec4(${l[0]} / 255.0, ${l[1]} / 255.0, ${l[2]} / 255.0, ${l[3]})`;if(A==="hsl")return i=XO(this),c(i)?j_(i):`vec4(czm_HSLToRGB(vec3(${l[0]}, ${l[1]}, ${l[2]})), 1.0)`;if(A==="hsla")return i=XO(this),c(i)?(i.alpha!==1&&(t.translucent=!0),j_(i)):(l[3]!=="1.0"&&(t.translucent=!0),`vec4(czm_HSLToRGB(vec3(${l[0]}, ${l[1]}, ${l[2]})), ${l[3]})`)}break;case qe.LITERAL_VECTOR:d=o.length,m=`${A}(`;for(let p=0;p<d;++p)m+=o[p],p<d-1&&(m+=", ");return m+=")",m;case qe.LITERAL_REGEX:throw new ae("Error generating style shader: Regular expressions are not supported.");case qe.LITERAL_UNDEFINED:return zc.NULL_SENTINEL;case qe.BUILTIN_VARIABLE:if(A==="tiles3d_tileset_time")return A}};Je.prototype.getVariables=function(e,t){let n,i,o,r=this._type,a=this._value;if(c(this._left))if(Array.isArray(this._left))for(n=this._left,i=n.length,o=0;o<i;++o)n[o].getVariables(e,this);else this._left.getVariables(e,this);if(c(this._right)&&this._right.getVariables(e,this),c(this._test)&&this._test.getVariables(e,this),Array.isArray(this._value))for(n=this._value,i=n.length,o=0;o<i;++o)n[o].getVariables(e,this);let s;switch(r){case qe.VARIABLE:ld(this)||e.push(a);break;case qe.VARIABLE_IN_STRING:for(s=gg.exec(a);s!==null;)e.push(s[1]),s=gg.exec(a);break;case qe.LITERAL_STRING:c(t)&&t._type===qe.MEMBER&&ld(t._left)&&e.push(a);break}};var t1=zc;function Bl(e){e=e??G.EMPTY_OBJECT,this._batchTable=e.batchTable,this._batchIds=e.batchIds,this._positions=e.positions,this._vertexBatchIds=e.vertexBatchIds,this._indices=e.indices,this._indexCounts=e.indexCounts,this._indexOffsets=e.indexOffsets,this._batchedIndices=e.batchedIndices,this._boundingVolume=e.boundingVolume,this._boundingVolumes=e.boundingVolumes,this._center=e.center??f.ZERO,this._va=void 0,this._sp=void 0,this._spStencil=void 0,this._spPick=void 0,this._uniformMap=void 0,this._vaSwap=void 0,this._rsStencilDepthPass=void 0,this._rsStencilDepthPass3DTiles=void 0,this._rsColorPass=void 0,this._rsPickPass=void 0,this._rsWireframe=void 0,this._commands=[],this._commandsIgnoreShow=[],this._pickCommands=[],this._constantColor=J.clone(J.WHITE),this._highlightColor=this._constantColor,this._batchDirty=!0,this._pickCommandsDirty=!0,this._framesSinceLastRebatch=0,this._updatingAllCommands=!1,this._trianglesLength=this._indices.length/3,this._geometryByteLength=this._indices.byteLength+this._positions.byteLength+this._vertexBatchIds.byteLength,this.debugWireframe=!1,this._debugWireframe=this.debugWireframe,this._wireframeDirty=!1,this.forceRebatch=!1,this.classificationType=e.classificationType??wn.BOTH,this._vertexShaderSource=e._vertexShaderSource,this._fragmentShaderSource=e._fragmentShaderSource,this._attributeLocations=e._attributeLocations,this._uniformMap=e._uniformMap,this._pickId=e._pickId,this._modelMatrix=e._modelMatrix,this._boundingSphere=e._boundingSphere,this._batchIdLookUp={};let t=this._batchIds.length;for(let n=0;n<t;++n){let i=this._batchIds[n];this._batchIdLookUp[i]=n}}Object.defineProperties(Bl.prototype,{trianglesLength:{get:function(){return this._trianglesLength}},geometryByteLength:{get:function(){return this._geometryByteLength}}});var ute={position:0,a_batchId:1};function fte(e,t){if(c(e._va))return;let n=ut.createVertexBuffer({context:t,typedArray:e._positions,usage:De.STATIC_DRAW}),i=ut.createVertexBuffer({context:t,typedArray:e._vertexBatchIds,usage:De.STATIC_DRAW}),o=ut.createIndexBuffer({context:t,typedArray:e._indices,usage:De.DYNAMIC_DRAW,indexDatatype:e._indices.BYTES_PER_ELEMENT===2?Ge.UNSIGNED_SHORT:Ge.UNSIGNED_INT}),r=[{index:0,vertexBuffer:n,componentDatatype:V.fromTypedArray(e._positions),componentsPerAttribute:3},{index:1,vertexBuffer:i,componentDatatype:V.fromTypedArray(e._vertexBatchIds),componentsPerAttribute:1}];e._va=new Yi({context:t,attributes:r,indexBuffer:o}),t.webgl2&&(e._vaSwap=new Yi({context:t,attributes:r,indexBuffer:ut.createIndexBuffer({context:t,sizeInBytes:o.sizeInBytes,usage:De.DYNAMIC_DRAW,indexDatatype:o.indexDatatype})})),e._batchedPositions=void 0,e._transferrableBatchIds=void 0,e._vertexBatchIds=void 0}function dte(e,t){if(c(e._sp))return;let n=e._batchTable,i=e._attributeLocations??ute,o=e._pickId,r=e._vertexShaderSource,a=e._fragmentShaderSource;if(c(r)){e._sp=gn.fromCache({context:t,vertexShaderSource:r,fragmentShaderSource:a,attributeLocations:i}),e._spStencil=e._sp,a=It.replaceMain(a,"czm_non_pick_main"),a=`${a}void main() 
{ 
    czm_non_pick_main(); 
    out_FragColor = ${o}; 
} 
`,e._spPick=gn.fromCache({context:t,vertexShaderSource:r,fragmentShaderSource:a,attributeLocations:i});return}let s=n.getVertexShaderCallback(!1,"a_batchId",void 0)(ux),A=n.getFragmentShaderCallback(!1,void 0,!0)(Mp);o=n.getPickId();let l=new It({sources:[s]}),d=new It({defines:["VECTOR_TILE"],sources:[A]});e._sp=gn.fromCache({context:t,vertexShaderSource:l,fragmentShaderSource:d,attributeLocations:i}),l=new It({sources:[ux]}),d=new It({defines:["VECTOR_TILE"],sources:[Mp]}),e._spStencil=gn.fromCache({context:t,vertexShaderSource:l,fragmentShaderSource:d,attributeLocations:i}),A=It.replaceMain(A,"czm_non_pick_main"),A=`${A}
void main() 
{ 
    czm_non_pick_main(); 
    out_FragColor = ${o}; 
} 
`;let m=new It({sources:[s]}),p=new It({defines:["VECTOR_TILE"],sources:[A]});e._spPick=gn.fromCache({context:t,vertexShaderSource:m,fragmentShaderSource:p,attributeLocations:i})}function n1(e){let t=e?Dn.EQUAL:Dn.ALWAYS;return{colorMask:{red:!1,green:!1,blue:!1,alpha:!1},stencilTest:{enabled:!0,frontFunction:t,frontOperation:{fail:nt.KEEP,zFail:nt.DECREMENT_WRAP,zPass:nt.KEEP},backFunction:t,backOperation:{fail:nt.KEEP,zFail:nt.INCREMENT_WRAP,zPass:nt.KEEP},reference:wt.CESIUM_3D_TILE_MASK,mask:wt.CESIUM_3D_TILE_MASK},stencilMask:wt.CLASSIFICATION_MASK,depthTest:{enabled:!0,func:ga.LESS_OR_EQUAL},depthMask:!1}}var hte={stencilTest:{enabled:!0,frontFunction:Dn.NOT_EQUAL,frontOperation:{fail:nt.ZERO,zFail:nt.ZERO,zPass:nt.ZERO},backFunction:Dn.NOT_EQUAL,backOperation:{fail:nt.ZERO,zFail:nt.ZERO,zPass:nt.ZERO},reference:0,mask:wt.CLASSIFICATION_MASK},stencilMask:wt.CLASSIFICATION_MASK,depthTest:{enabled:!1},depthMask:!1,blending:Pn.PRE_MULTIPLIED_ALPHA_BLEND},mte={stencilTest:{enabled:!0,frontFunction:Dn.NOT_EQUAL,frontOperation:{fail:nt.ZERO,zFail:nt.ZERO,zPass:nt.ZERO},backFunction:Dn.NOT_EQUAL,backOperation:{fail:nt.ZERO,zFail:nt.ZERO,zPass:nt.ZERO},reference:0,mask:wt.CLASSIFICATION_MASK},stencilMask:wt.CLASSIFICATION_MASK,depthTest:{enabled:!1},depthMask:!1};function pte(e){c(e._rsStencilDepthPass)||(e._rsStencilDepthPass=At.fromCache(n1(!1)),e._rsStencilDepthPass3DTiles=At.fromCache(n1(!0)),e._rsColorPass=At.fromCache(hte),e._rsPickPass=At.fromCache(mte))}var ud=new Q,i1=new f;function gte(e,t){if(c(e._uniformMap))return;let n={u_modifiedModelViewProjection:function(){let i=t.uniformState.view,o=t.uniformState.projection;return Q.clone(i,ud),Q.multiplyByPoint(ud,e._center,i1),Q.setTranslation(ud,i1,ud),Q.multiply(o,ud,ud),ud},u_highlightColor:function(){return e._highlightColor}};e._uniformMap=e._batchTable.getUniformMapCallback()(n)}function gx(e,t,n,i,o,r,a){let s=e.constructor.BYTES_PER_ELEMENT,A=r.length;for(let l=0;l<A;++l){let d=r[l],m=a[d],p=i[m],g=o[m],h=new e.constructor(e.buffer,s*p,g);t.set(h,n),i[m]=n,n+=g}return n}function Cte(e,t){let n=e._indices,i=e._indexOffsets,o=e._indexCounts,r=e._batchIdLookUp,a=new n.constructor(n.length),s=t.pop(),A=[s],l=gx(n,a,0,i,o,s.batchIds,r);for(s.offset=0,s.count=l;t.length>0;){let d=t.pop();if(J.equals(d.color,s.color))l=gx(n,a,l,i,o,d.batchIds,r),s.batchIds=s.batchIds.concat(d.batchIds),s.count=l-s.offset;else{let m=l;l=gx(n,a,l,i,o,d.batchIds,r),d.offset=m,d.count=l-m,A.push(d),s=d}}e._va.indexBuffer.copyFromArrayView(a),e._indices=a,e._batchedIndices=A}function Cx(e,t,n,i,o,r,a){let s=e.bytesPerIndex,A=r.length;for(let l=0;l<A;++l){let d=r[l],m=a[d],p=i[m],g=o[m];t.copyFromBuffer(e,p*s,n*s,g*s),i[m]=n,n+=g}return n}function Ete(e,t){let n=e._indexOffsets,i=e._indexCounts,o=e._batchIdLookUp,r=t.pop(),a=[r],s=e._va.indexBuffer,A=e._vaSwap.indexBuffer,l=Cx(s,A,0,n,i,r.batchIds,o);for(r.offset=0,r.count=l;t.length>0;){let m=t.pop();if(J.equals(m.color,r.color))l=Cx(s,A,l,n,i,m.batchIds,o),r.batchIds=r.batchIds.concat(m.batchIds),r.count=l-r.offset;else{let p=l;l=Cx(s,A,l,n,i,m.batchIds,o),m.offset=p,m.count=l-p,a.push(m),r=m}}let d=e._va;e._va=e._vaSwap,e._vaSwap=d,e._batchedIndices=a}function _te(e,t){return t.color.toRgba()-e.color.toRgba()}function Ite(e,t){if(!e._batchDirty)return!1;let n=e._batchedIndices,i=n.length,o=!1,r={};for(let a=0;a<i;++a){let A=n[a].color.toRgba();if(c(r[A])){o=!0;break}else r[A]=!0}if(!o)return e._batchDirty=!1,!1;if(o&&!e.forceRebatch&&e._framesSinceLastRebatch<120){++e._framesSinceLastRebatch;return}return n.sort(_te),t.webgl2?Ete(e,n):Cte(e,n),e._framesSinceLastRebatch=0,e._batchDirty=!1,e._pickCommandsDirty=!0,e._wireframeDirty=!0,!0}function yte(e,t){let n=Ite(e,t),i=e._commands,o=e._batchedIndices,r=o.length,a=r*2;if(c(i)&&!n&&i.length===a)return;i.length=a;let s=e._va,A=e._sp,l=e._modelMatrix??Q.IDENTITY,d=e._uniformMap,m=e._boundingVolume;for(let p=0;p<r;++p){let g=o[p].offset,h=o[p].count,C=i[p*2];c(C)||(C=i[p*2]=new ft({owner:e})),C.vertexArray=s,C.modelMatrix=l,C.offset=g,C.count=h,C.renderState=e._rsStencilDepthPass,C.shaderProgram=A,C.uniformMap=d,C.boundingVolume=m,C.cull=!1,C.pass=He.TERRAIN_CLASSIFICATION;let _=ft.shallowClone(C,C.derivedCommands.tileset);_.renderState=e._rsStencilDepthPass3DTiles,_.pass=He.CESIUM_3D_TILE_CLASSIFICATION,C.derivedCommands.tileset=_;let I=i[p*2+1];c(I)||(I=i[p*2+1]=new ft({owner:e})),I.vertexArray=s,I.modelMatrix=l,I.offset=g,I.count=h,I.renderState=e._rsColorPass,I.shaderProgram=A,I.uniformMap=d,I.boundingVolume=m,I.cull=!1,I.pass=He.TERRAIN_CLASSIFICATION;let b=ft.shallowClone(I,I.derivedCommands.tileset);b.pass=He.CESIUM_3D_TILE_CLASSIFICATION,I.derivedCommands.tileset=b}e._commandsDirty=!0}function bte(e,t){if(e.classificationType===wn.TERRAIN||!t.invertClassification||c(e._commandsIgnoreShow)&&!e._commandsDirty)return;let n=e._commands,i=e._commandsIgnoreShow,o=e._spStencil,r=n.length,a=i.length=r/2,s=0;for(let A=0;A<a;++A){let l=i[A]=ft.shallowClone(n[s],i[A]);l.shaderProgram=o,l.pass=He.CESIUM_3D_TILE_CLASSIFICATION_IGNORE_SHOW,s+=2}e._commandsDirty=!1}function Bte(e){if(!e._pickCommandsDirty)return;let t=e._indexOffsets.length,n=e._pickCommands;n.length=t*2;let i=e._va,o=e._spStencil,r=e._spPick,a=e._modelMatrix??Q.IDENTITY,s=e._uniformMap;for(let A=0;A<t;++A){let l=e._indexOffsets[A],d=e._indexCounts[A],m=c(e._boundingVolumes)?e._boundingVolumes[A]:e.boundingVolume,p=n[A*2];c(p)||(p=n[A*2]=new ft({owner:e,pickOnly:!0})),p.vertexArray=i,p.modelMatrix=a,p.offset=l,p.count=d,p.renderState=e._rsStencilDepthPass,p.shaderProgram=o,p.uniformMap=s,p.boundingVolume=m,p.pass=He.TERRAIN_CLASSIFICATION;let g=ft.shallowClone(p,p.derivedCommands.tileset);g.renderState=e._rsStencilDepthPass3DTiles,g.pass=He.CESIUM_3D_TILE_CLASSIFICATION,p.derivedCommands.tileset=g;let h=n[A*2+1];c(h)||(h=n[A*2+1]=new ft({owner:e,pickOnly:!0})),h.vertexArray=i,h.modelMatrix=a,h.offset=l,h.count=d,h.renderState=e._rsPickPass,h.shaderProgram=r,h.uniformMap=s,h.boundingVolume=m,h.pass=He.TERRAIN_CLASSIFICATION;let C=ft.shallowClone(h,h.derivedCommands.tileset);C.pass=He.CESIUM_3D_TILE_CLASSIFICATION,h.derivedCommands.tileset=C}e._pickCommandsDirty=!1}Bl.prototype.createFeatures=function(e,t){let n=this._batchIds,i=n.length;for(let o=0;o<i;++o){let r=n[o];t[r]=new Cs(e,r)}};Bl.prototype.applyDebugSettings=function(e,t){this._highlightColor=e?t:this._constantColor};function xte(e,t){e._updatingAllCommands=!0;let n=e._batchIds,i=n.length,o;for(o=0;o<i;++o){let a=n[o],s=t[a];s.show=!0,s.color=J.WHITE}let r=e._batchedIndices;for(i=r.length,o=0;o<i;++o)r[o].color=J.clone(J.WHITE);e._updatingAllCommands=!1,e._batchDirty=!0}var Tte=new J,Ste=J.WHITE,wte=!0,Dte=/\$/;Bl.prototype.applyStyle=function(e,t){if(!c(e)){xte(this,t);return}let n=e.color,i=n instanceof t1&&!Dte.test(n.expression);this._updatingAllCommands=i;let o=this._batchIds,r=o.length,a;for(a=0;a<r;++a){let s=o[a],A=t[s];A.color=c(e.color)?e.color.evaluateColor(A,Tte):Ste,A.show=c(e.show)?e.show.evaluate(A):wte}if(i){let s=this._batchedIndices;for(r=s.length,a=0;a<r;++a)s[a].color=J.clone(J.WHITE);this._updatingAllCommands=!1,this._batchDirty=!0}};Bl.prototype.updateCommands=function(e,t){if(this._updatingAllCommands)return;let n=this._batchIdLookUp,i=n[e];if(!c(i))return;let o=this._indexOffsets,r=this._indexCounts,a=o[i],s=r[i],A=this._batchedIndices,l=A.length,d;for(d=0;d<l;++d){let C=A[d].offset,_=A[d].count;if(a>=C&&a<C+_)break}A.push(new Ad({color:J.clone(t),offset:a,count:s,batchIds:[e]}));let m=[],p=[],g=A[d].batchIds,h=g.length;for(let C=0;C<h;++C){let _=g[C];if(_===e)continue;let I=n[_];o[I]<a?m.push(_):p.push(_)}p.length!==0&&A.push(new Ad({color:J.clone(A[d].color),offset:a+s,count:A[d].offset+A[d].count-(a+s),batchIds:p})),m.length!==0?(A[d].count=a-A[d].offset,A[d].batchIds=m):A.splice(d,1),this._batchDirty=!0};function o1(e,t,n,i){let o=e.classificationType,r=o!==wn.CESIUM_3D_TILE,a=o!==wn.TERRAIN,s=t.commandList,A=n.length,l,d;for(d=0;d<A;++d)r&&(l=n[d],l.pass=He.TERRAIN_CLASSIFICATION,s.push(l)),a&&(l=n[d].derivedCommands.tileset,l.pass=He.CESIUM_3D_TILE_CLASSIFICATION,s.push(l));if(!(!t.invertClassification||!c(i)))for(A=i.length,d=0;d<A;++d)s.push(i[d])}function Qte(e,t){let n=e.commandList,i=t.length;for(let o=0;o<i;o+=2){let r=t[o+1];r.pass=He.OPAQUE,n.push(r)}}function Rte(e){let t=e.debugWireframe===e._debugWireframe;if(t=t&&!(e.debugWireframe&&e._wireframeDirty),t)return;c(e._rsWireframe)||(e._rsWireframe=At.fromCache({}));let n,i;e.debugWireframe?(n=e._rsWireframe,i=Me.LINES):(n=e._rsColorPass,i=Me.TRIANGLES);let o=e._commands,r=o.length;for(let a=0;a<r;a+=2){let s=o[a+1];s.renderState=n,s.primitiveType=i}e._debugWireframe=e.debugWireframe,e._wireframeDirty=!1}Bl.prototype.update=function(e){let t=e.context;fte(this,t),dte(this,t),pte(this),gte(this,t);let n=e.passes;n.render&&(yte(this,t),bte(this,e),Rte(this),this._debugWireframe?Qte(e,this._commands):o1(this,e,this._commands,this._commandsIgnoreShow)),n.pick&&(Bte(this),o1(this,e,this._pickCommands))};Bl.prototype.isDestroyed=function(){return!1};Bl.prototype.destroy=function(){return this._va=this._va&&this._va.destroy(),this._sp=this._sp&&this._sp.destroy(),this._spPick=this._spPick&&this._spPick.destroy(),this._vaSwap=this._vaSwap&&this._vaSwap.destroy(),me(this)};var K_=Bl;function Es(e){this._boxes=e.boxes,this._boxBatchIds=e.boxBatchIds,this._cylinders=e.cylinders,this._cylinderBatchIds=e.cylinderBatchIds,this._ellipsoids=e.ellipsoids,this._ellipsoidBatchIds=e.ellipsoidBatchIds,this._spheres=e.spheres,this._sphereBatchIds=e.sphereBatchIds,this._modelMatrix=e.modelMatrix,this._batchTable=e.batchTable,this._boundingVolume=e.boundingVolume,this._center=e.center,c(this._center)||(c(this._boundingVolume)?this._center=f.clone(this._boundingVolume.center):this._center=f.clone(f.ZERO)),this._boundingVolumes=void 0,this._batchedIndices=void 0,this._indices=void 0,this._indexOffsets=void 0,this._indexCounts=void 0,this._positions=void 0,this._vertexBatchIds=void 0,this._batchIds=void 0,this._batchTableColors=void 0,this._packedBuffer=void 0,this._ready=!1,this._promise=void 0,this._error=void 0,this._verticesPromise=void 0,this._primitive=void 0,this.debugWireframe=!1,this.forceRebatch=!1,this.classificationType=wn.BOTH}Object.defineProperties(Es.prototype,{trianglesLength:{get:function(){return c(this._primitive)?this._primitive.trianglesLength:0}},geometryByteLength:{get:function(){return c(this._primitive)?this._primitive.geometryByteLength:0}},ready:{get:function(){return this._ready}}});Es.packedBoxLength=Q.packedLength+f.packedLength;Es.packedCylinderLength=Q.packedLength+2;Es.packedEllipsoidLength=Q.packedLength+f.packedLength;Es.packedSphereLength=f.packedLength+1;function vte(e){let t=new Float64Array(Q.packedLength+f.packedLength),n=0;return f.pack(e._center,t,n),n+=f.packedLength,Q.pack(e._modelMatrix,t,n),t}function Mte(e,t){let n=0,i=t[n++],o=t[n++],r=e._boundingVolumes=new Array(o);for(let A=0;A<o;++A)r[A]=le.unpack(t,n),n+=le.packedLength;let a=t[n++],s=e._batchedIndices=new Array(a);for(let A=0;A<a;++A){let l=J.unpack(t,n);n+=J.packedLength;let d=t[n++],m=t[n++],p=t[n++],g=new Array(p);for(let h=0;h<p;++h)g[h]=t[n++];s[A]=new Ad({color:l,offset:d,count:m,batchIds:g})}return i}var Pte=new $i("createVectorTileGeometries",5),Nte=new J;function Lte(e){if(!c(e._primitive)&&!c(e._verticesPromise)){let t=e._boxes,n=e._boxBatchIds,i=e._cylinders,o=e._cylinderBatchIds,r=e._ellipsoids,a=e._ellipsoidBatchIds,s=e._spheres,A=e._sphereBatchIds,l=e._batchTableColors,d=e._packedBuffer;if(!c(l)){let h=0;c(e._boxes)&&(t=e._boxes=t.slice(),n=e._boxBatchIds=n.slice(),h+=n.length),c(e._cylinders)&&(i=e._cylinders=i.slice(),o=e._cylinderBatchIds=o.slice(),h+=o.length),c(e._ellipsoids)&&(r=e._ellipsoids=r.slice(),a=e._ellipsoidBatchIds=a.slice(),h+=a.length),c(e._spheres)&&(s=e._sphere=s.slice(),A=e._sphereBatchIds=A.slice(),h+=A.length),l=e._batchTableColors=new Uint32Array(h);let C=e._batchTable;for(let _=0;_<h;++_){let I=C.getColor(_,Nte);l[_]=I.toRgba()}d=e._packedBuffer=vte(e)}let m=[];c(t)&&m.push(t.buffer,n.buffer),c(i)&&m.push(i.buffer,o.buffer),c(r)&&m.push(r.buffer,a.buffer),c(s)&&m.push(s.buffer,A.buffer),m.push(l.buffer,d.buffer);let p={boxes:c(t)?t.buffer:void 0,boxBatchIds:c(t)?n.buffer:void 0,cylinders:c(i)?i.buffer:void 0,cylinderBatchIds:c(i)?o.buffer:void 0,ellipsoids:c(r)?r.buffer:void 0,ellipsoidBatchIds:c(r)?a.buffer:void 0,spheres:c(s)?s.buffer:void 0,sphereBatchIds:c(s)?A.buffer:void 0,batchTableColors:l.buffer,packedBuffer:d.buffer},g=e._verticesPromise=Pte.scheduleTask(p,m);return c(g)?g.then(function(h){if(e.isDestroyed())return;let C=new Float64Array(h.packedBuffer);Mte(e,C)===2?e._indices=new Uint16Array(h.indices):e._indices=new Uint32Array(h.indices),e._indexOffsets=new Uint32Array(h.indexOffsets),e._indexCounts=new Uint32Array(h.indexCounts),e._positions=new Float32Array(h.positions),e._vertexBatchIds=new Uint16Array(h.vertexBatchIds),e._batchIds=new Uint16Array(h.batchIds),Fte(e),e._ready=!0}).catch(h=>{e.isDestroyed()||(e._error=h)}):void 0}}function Fte(e){c(e._primitive)||(e._primitive=new K_({batchTable:e._batchTable,positions:e._positions,batchIds:e._batchIds,vertexBatchIds:e._vertexBatchIds,indices:e._indices,indexOffsets:e._indexOffsets,indexCounts:e._indexCounts,batchedIndices:e._batchedIndices,boundingVolume:e._boundingVolume,boundingVolumes:e._boundingVolumes,center:e._center,pickObject:e._pickObject??e}),e._boxes=void 0,e._boxBatchIds=void 0,e._cylinders=void 0,e._cylinderBatchIds=void 0,e._ellipsoids=void 0,e._ellipsoidBatchIds=void 0,e._spheres=void 0,e._sphereBatchIds=void 0,e._center=void 0,e._modelMatrix=void 0,e._batchTable=void 0,e._boundingVolume=void 0,e._boundingVolumes=void 0,e._batchedIndices=void 0,e._indices=void 0,e._indexOffsets=void 0,e._indexCounts=void 0,e._positions=void 0,e._vertexBatchIds=void 0,e._batchIds=void 0,e._batchTableColors=void 0,e._packedBuffer=void 0,e._verticesPromise=void 0)}Es.prototype.createFeatures=function(e,t){this._primitive.createFeatures(e,t)};Es.prototype.applyDebugSettings=function(e,t){this._primitive.applyDebugSettings(e,t)};Es.prototype.applyStyle=function(e,t){this._primitive.applyStyle(e,t)};Es.prototype.updateCommands=function(e,t){this._primitive.updateCommands(e,t)};Es.prototype.update=function(e){if(!this._ready){if(c(this._promise)||(this._promise=Lte(this)),c(this._error)){let t=this._error;throw this._error=void 0,t}return}this._primitive.debugWireframe=this.debugWireframe,this._primitive.forceRebatch=this.forceRebatch,this._primitive.classificationType=this.classificationType,this._primitive.update(e)};Es.prototype.isDestroyed=function(){return!1};Es.prototype.destroy=function(){return this._primitive=this._primitive&&this._primitive.destroy(),me(this)};var Ph=Es;function TA(e,t,n,i,o){this._tileset=e,this._tile=t,this._resource=n,this._geometries=void 0,this._metadata=void 0,this._batchTable=void 0,this._features=void 0,this.featurePropertiesDirty=!1,this._group=void 0,this._ready=!1,Ute(this,i,o)}Object.defineProperties(TA.prototype,{featuresLength:{get:function(){return c(this._batchTable)?this._batchTable.featuresLength:0}},pointsLength:{get:function(){return 0}},trianglesLength:{get:function(){return c(this._geometries)?this._geometries.trianglesLength:0}},geometryByteLength:{get:function(){return c(this._geometries)?this._geometries.geometryByteLength:0}},texturesByteLength:{get:function(){return 0}},batchTableByteLength:{get:function(){return c(this._batchTable)?this._batchTable.batchTableByteLength:0}},innerContents:{get:function(){}},ready:{get:function(){return this._ready}},tileset:{get:function(){return this._tileset}},tile:{get:function(){return this._tile}},url:{get:function(){return this._resource.getUrlComponent(!0)}},metadata:{get:function(){return this._metadata},set:function(e){this._metadata=e}},batchTable:{get:function(){return this._batchTable}},group:{get:function(){return this._group},set:function(e){this._group=e}}});function Ote(e){return function(t,n){c(e._geometries)&&e._geometries.updateCommands(t,n)}}function kte(e,t){let n,i,o,r,a,s=e.BOXES_LENGTH??0,A=e.CYLINDERS_LENGTH??0,l=e.ELLIPSOIDS_LENGTH??0,d=e.SPHERES_LENGTH??0;if(s>0&&c(e.BOX_BATCH_IDS)){let h=t.byteOffset+e.BOX_BATCH_IDS.byteOffset;n=new Uint16Array(t.buffer,h,s)}if(A>0&&c(e.CYLINDER_BATCH_IDS)){let h=t.byteOffset+e.CYLINDER_BATCH_IDS.byteOffset;i=new Uint16Array(t.buffer,h,A)}if(l>0&&c(e.ELLIPSOID_BATCH_IDS)){let h=t.byteOffset+e.ELLIPSOID_BATCH_IDS.byteOffset;o=new Uint16Array(t.buffer,h,l)}if(d>0&&c(e.SPHERE_BATCH_IDS)){let h=t.byteOffset+e.SPHERE_BATCH_IDS.byteOffset;r=new Uint16Array(t.buffer,h,d)}let m=c(n)||c(i)||c(o)||c(r),p=s>0&&!c(n)||A>0&&!c(i)||l>0&&!c(o)||d>0&&!c(r);if(m&&p)throw new ae("If one group of batch ids is defined, then all batch ids must be defined");if(!c(n)&&!c(i)&&!c(o)&&!c(r)){let h=0;if(!c(n)&&s>0)for(n=new Uint16Array(s),a=0;a<s;++a)n[a]=h++;if(!c(i)&&A>0)for(i=new Uint16Array(A),a=0;a<A;++a)i[a]=h++;if(!c(o)&&l>0)for(o=new Uint16Array(l),a=0;a<l;++a)o[a]=h++;if(!c(r)&&d>0)for(r=new Uint16Array(d),a=0;a<d;++a)r[a]=h++}return{boxes:n,cylinders:i,ellipsoids:o,spheres:r}}var fd=Uint32Array.BYTES_PER_ELEMENT;function Ute(e,t,n){n=n??0;let i=new Uint8Array(t),o=new DataView(t);n+=fd;let r=o.getUint32(n,!0);if(r!==1)throw new ae(`Only Geometry tile version 1 is supported.  Version ${r} is not.`);n+=fd;let a=o.getUint32(n,!0);if(n+=fd,a===0){e._ready=!0;return}let s=o.getUint32(n,!0);if(n+=fd,s===0)throw new ae("Feature table must have a byte length greater than zero");let A=o.getUint32(n,!0);n+=fd;let l=o.getUint32(n,!0);n+=fd;let d=o.getUint32(n,!0);n+=fd;let m=Fo(i,n,s);n+=s;let p=new Uint8Array(t,n,A);n+=A;let g,h;l>0&&(g=Fo(i,n,l),n+=l,d>0&&(h=new Uint8Array(t,n,d),h=new Uint8Array(h)));let C=m.BOXES_LENGTH??0,_=m.CYLINDERS_LENGTH??0,I=m.ELLIPSOIDS_LENGTH??0,b=m.SPHERES_LENGTH??0,x=C+_+I+b,T=new H_(e,x,g,h,Ote(e));if(e._batchTable=T,x===0)return;let w=e.tile.computedTransform,R;c(m.RTC_CENTER)&&(R=f.unpack(m.RTC_CENTER),Q.multiplyByPoint(w,R,R));let z=kte(m,p);if(C>0||_>0||I>0||b>0){let M,N,O,u;if(C>0){let E=p.byteOffset+m.BOXES.byteOffset;M=new Float32Array(p.buffer,E,Ph.packedBoxLength*C)}if(_>0){let E=p.byteOffset+m.CYLINDERS.byteOffset;N=new Float32Array(p.buffer,E,Ph.packedCylinderLength*_)}if(I>0){let E=p.byteOffset+m.ELLIPSOIDS.byteOffset;O=new Float32Array(p.buffer,E,Ph.packedEllipsoidLength*I)}if(b>0){let E=p.byteOffset+m.SPHERES.byteOffset;u=new Float32Array(p.buffer,E,Ph.packedSphereLength*b)}return e._geometries=new Ph({boxes:M,boxBatchIds:z.boxes,cylinders:N,cylinderBatchIds:z.cylinders,ellipsoids:O,ellipsoidBatchIds:z.ellipsoids,spheres:u,sphereBatchIds:z.spheres,center:R,modelMatrix:w,batchTable:T,boundingVolume:e.tile.boundingVolume.boundingVolume}),e}return Promise.resolve(e)}function r1(e){let t=e.featuresLength;if(!c(e._features)&&t>0){let n=new Array(t);c(e._geometries)&&e._geometries.createFeatures(e,n),e._features=n}}TA.prototype.hasProperty=function(e,t){return this._batchTable.hasProperty(e,t)};TA.prototype.getFeature=function(e){return r1(this),this._features[e]};TA.prototype.applyDebugSettings=function(e,t){c(this._geometries)&&this._geometries.applyDebugSettings(e,t)};TA.prototype.applyStyle=function(e){r1(this),c(this._geometries)&&this._geometries.applyStyle(e,this._features)};TA.prototype.update=function(e,t){c(this._geometries)&&(this._geometries.classificationType=this._tileset.classificationType,this._geometries.debugWireframe=this._tileset.debugWireframe,this._geometries.update(t)),c(this._batchTable)&&this._geometries.ready&&(this._batchTable.update(e,t),this._ready=!0)};TA.prototype.pick=function(e,t,n){};TA.prototype.isDestroyed=function(){return!1};TA.prototype.destroy=function(){return this._geometries=this._geometries&&this._geometries.destroy(),this._batchTable=this._batchTable&&this._batchTable.destroy(),me(this)};var a1=TA;var Ex={};Ex.encode2D=function(e,t,n){let i=Math.pow(2,e),o={x:t,y:n},r,a,s,A=BigInt(0);for(s=i/2;s>0;s/=2)r=(o.x&s)>0?1:0,a=(o.y&s)>0?1:0,A+=BigInt((3*r^a)*s*s),s1(i,o,r,a);return A};Ex.decode2D=function(e,t){let n=Math.pow(2,e),i={x:0,y:0},o,r,a,s;for(a=1,s=t;a<n;a*=2)o=1&Number(s/BigInt(2)),r=1&Number(s^BigInt(o)),s1(a,i,o,r),i.x+=a*o,i.y+=a*r,s/=BigInt(4);return[i.x,i.y]};function s1(e,t,n,i){if(i!==0)return;n===1&&(t.x=e-1-t.x,t.y=e-1-t.y);let o=t.x;t.x=t.y,t.y=o}var _x=Ex;var dd=30,zte=1<<dd,Gte=1<<dd+1>>>0,Ix=2*dd+1,ku=4,l1=[],u1=[],Hte=[[0,1,3,2],[0,2,3,1],[3,2,0,1],[3,1,0,2]],Uu=1,Nh=2,X_=[Uu,0,0,Uu|Nh];function xo(e){if(!Ut.supportsBigInt())throw new ae("S2 required BigInt support");this._cellId=e,this._level=xo.getLevel(e)}xo.fromToken=function(e){return new xo(xo.getIdFromToken(e))};xo.isValidId=function(e){return!(e<=0||e>>BigInt(Ix)>5||!(e&~e+BigInt(1)&BigInt("0x1555555555555555")))};xo.isValidToken=function(e){return/^[0-9a-fA-F]{1,16}$/.test(e)?xo.isValidId(xo.getIdFromToken(e)):!1};xo.getIdFromToken=function(e){return BigInt("0x"+e+"0".repeat(16-e.length))};xo.getTokenFromId=function(e){let t=Math.floor($te(e)/4),n=e.toString(16).replace(/0*$/,"");return Array(17-t-n.length).join("0")+n};xo.getLevel=function(e){let t=0;for(;e!==BigInt(0)&&!(e&BigInt(1));)t++,e=e>>BigInt(1);return dd-(t>>1)};xo.prototype.getChild=function(e){let t=h1(this._cellId)>>BigInt(2),n=this._cellId+BigInt(2*e+1-4)*t;return new xo(n)};xo.prototype.getParent=function(){let e=h1(this._cellId)<<BigInt(2);return new xo(this._cellId&~e+BigInt(1)|e)};xo.prototype.getParentAtLevel=function(e){let t=Xte(e);return new xo(this._cellId&-t|t)};xo.prototype.getCenter=function(e){e=e??pe.WGS84;let t=Vte(this._cellId,this._level);t=f.normalize(t,t);let n=new ue.fromCartesian(t,pe.UNIT_SPHERE);return ue.toCartesian(n,e,new f)};xo.prototype.getVertex=function(e,t){t=t??pe.WGS84;let n=jte(this._cellId,this._level,e);n=f.normalize(n,n);let i=new ue.fromCartesian(n,pe.UNIT_SPHERE);return ue.toCartesian(i,t,new f)};xo.fromFacePositionLevel=function(e,t,n){let i=(e<4?"0":"")+(e<2?"0":"")+e.toString(2),o=t.toString(2),r=Array(2*n-o.length+1).join("0"),a=Array(Ix-2*n).join("0"),s=BigInt(`0b${i}${r}${o}1${a}`);return new xo(s)};function Vte(e,t){let n=Yte(e,t);return Wte(n[0],n[1],n[2])}function jte(e,t,n){let i=f1(e,t),o=qte([i[1],i[2]],t),r=n>>1&1;return d1(i[0],o[0][r^n&1],o[1][r])}function Yte(e,t){let n=f1(e),i=n[0],o=n[1],r=n[2],a=t===30,s=!a&&(BigInt(o)^e>>BigInt(2))&BigInt(1),A=a?1:s?2:0,l=(o<<1)+A,d=(r<<1)+A;return[i,l,d]}function f1(e){l1.length===0&&Kte();let t=Number(e>>BigInt(Ix)),n=t&Uu,i=(1<<ku)-1,o=0,r=0;for(let a=7;a>=0;a--){let A=(1<<2*(a===7?dd-7*ku:ku))-1;n+=Number(e>>BigInt(a*2*ku+1)&BigInt(A))<<2,n=u1[n];let l=a*ku;o+=n>>ku+2<<l,r+=(n>>2&i)<<l,n&=Uu|Nh}return[t,o,r]}function Wte(e,t,n){let i=c1(t),o=c1(n),r=Z_(i),a=Z_(o);return d1(e,r,a)}function d1(e,t,n){switch(e){case 0:return new f(1,t,n);case 1:return new f(-t,1,n);case 2:return new f(-t,-n,1);case 3:return new f(-1,-n,-t);case 4:return new f(n,-1,-t);default:return new f(n,t,-1)}}function Z_(e){return e>=.5?1/3*(4*e*e-1):1/3*(1-4*(1-e)*(1-e))}function c1(e){return 1/Gte*e}function qte(e,t){let n=[[],[]],i=Jte(t);for(let o=0;o<2;++o){let r=e[o]&-i,a=r+i;n[o][0]=Z_(A1(r)),n[o][1]=Z_(A1(a))}return n}function Jte(e){return 1<<dd-e>>>0}function A1(e){return 1/zte*e}function zu(e,t,n,i,o,r){if(e===ku){let a=(t<<ku)+n;l1[(a<<2)+i]=(o<<2)+r,u1[(o<<2)+i]=(a<<2)+r}else{e++,t<<=1,n<<=1,o<<=2;let a=Hte[r];zu(e,t+(a[0]>>1),n+(a[0]&1),i,o,r^X_[0]),zu(e,t+(a[1]>>1),n+(a[1]&1),i,o+1,r^X_[1]),zu(e,t+(a[2]>>1),n+(a[2]&1),i,o+2,r^X_[2]),zu(e,t+(a[3]>>1),n+(a[3]&1),i,o+3,r^X_[3])}}function Kte(){zu(0,0,0,0,0,0),zu(0,0,0,Uu,0,Uu),zu(0,0,0,Nh,0,Nh),zu(0,0,0,Uu|Nh,0,Uu|Nh)}function h1(e){return e&~e+BigInt(1)}function Xte(e){return BigInt(1)<<BigInt(2*(dd-e))}var Zte=[64,0,1,39,2,15,40,23,3,12,16,59,41,19,24,54,4,64,13,10,17,62,60,28,42,30,20,51,25,44,55,47,5,32,65,38,14,22,11,58,18,53,63,9,61,27,29,50,43,46,31,37,21,57,52,8,26,49,45,36,56,7,48,35,6,34,33,0];function $te(e){return Zte[(-e&e)%BigInt(67)]}var Lh=xo;function ene(e,t){return c(e)&&c(e.extensions)&&c(e.extensions[t])}var Gn=ene;function yx(e){let t=e.lengthBits,n=e.availableCount,i=e.constant,o=e.bitstream;if(c(i))n=t;else{let r=Math.ceil(t/8);if(o.length!==r)throw new ae(`Availability bitstream must be exactly ${r} bytes long to store ${t} bits. Actual bitstream was ${o.length} bytes long.`);let a=e.computeAvailableCountEnabled??!1;!c(n)&&a&&(n=tne(o,t))}this._lengthBits=t,this._availableCount=n,this._constant=i,this._bitstream=o}function tne(e,t){let n=0;for(let i=0;i<t;i++){let o=i>>3,r=i%8;n+=e[o]>>r&1}return n}Object.defineProperties(yx.prototype,{lengthBits:{get:function(){return this._lengthBits}},availableCount:{get:function(){return this._availableCount}}});yx.prototype.getBit=function(e){if(c(this._constant))return this._constant;let t=e>>3,n=e%8;return(this._bitstream[t]>>n&1)===1};var bx=yx;function xl(e){e=e??G.EMPTY_OBJECT;let t=e.metadataTable,n=e.class,i=e.entityId,o=e.propertyTableJson;this._class=n,this._metadataTable=t,this._entityId=i,this._extensions=o.extensions,this._extras=o.extras}Object.defineProperties(xl.prototype,{class:{get:function(){return this._class}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}}});xl.prototype.hasProperty=function(e){return this._metadataTable.hasProperty(e)};xl.prototype.hasPropertyBySemantic=function(e){return this._metadataTable.hasPropertyBySemantic(e)};xl.prototype.getPropertyIds=function(e){return this._metadataTable.getPropertyIds(e)};xl.prototype.getProperty=function(e){return this._metadataTable.getProperty(this._entityId,e)};xl.prototype.setProperty=function(e,t){return this._metadataTable.setProperty(this._entityId,e,t)};xl.prototype.getPropertyBySemantic=function(e){return this._metadataTable.getPropertyBySemantic(this._entityId,e)};xl.prototype.setPropertyBySemantic=function(e,t){return this._metadataTable.setPropertyBySemantic(this._entityId,e,t)};var Bx=xl;var $_={QUADTREE:"QUADTREE",OCTREE:"OCTREE"};$_.getBranchingFactor=function(e){switch(e){case $_.OCTREE:return 8;case $_.QUADTREE:return 4}};var sr=Object.freeze($_);function _r(){}Object.defineProperties(_r.prototype,{class:{get:function(){be.throwInstantiationError()}}});_r.prototype.hasProperty=function(e){be.throwInstantiationError()};_r.prototype.hasPropertyBySemantic=function(e){be.throwInstantiationError()};_r.prototype.getPropertyIds=function(e){be.throwInstantiationError()};_r.prototype.getProperty=function(e){be.throwInstantiationError()};_r.prototype.setProperty=function(e,t){be.throwInstantiationError()};_r.prototype.getPropertyBySemantic=function(e){be.throwInstantiationError()};_r.prototype.setPropertyBySemantic=function(e,t){be.throwInstantiationError()};_r.hasProperty=function(e,t,n){if(c(t[e]))return!0;let i=n.properties;if(!c(i))return!1;let o=i[e];return!!(c(o)&&c(o.default))};_r.hasPropertyBySemantic=function(e,t,n){let i=n.propertiesBySemantic;if(!c(i))return!1;let o=i[e];return c(o)};_r.getPropertyIds=function(e,t,n){n=c(n)?n:[],n.length=0;for(let o in e)e.hasOwnProperty(o)&&c(e[o])&&n.push(o);let i=t.properties;if(c(i))for(let o in i)i.hasOwnProperty(o)&&!c(e[o])&&c(i[o].default)&&n.push(o);return n};_r.getProperty=function(e,t,n){let i=n.properties[e],o=t[e];Array.isArray(o)&&(o=o.slice());let r=!0;if(o=i.handleNoData(o),!c(o)&&c(i.default))return o=Re(i.default,!0),i.unpackVectorAndMatrixTypes(o,r);if(c(o))return o=i.normalize(o),o=i.applyValueTransform(o),i.unpackVectorAndMatrixTypes(o,r)};_r.setProperty=function(e,t,n,i){if(!c(n[e]))return!1;Array.isArray(t)&&(t=t.slice());let o,r=i.properties;return c(r)&&(o=r[e]),c(o)&&(t=o.packVectorAndMatrixTypes(t,!0),t=o.unapplyValueTransform(t),t=o.unnormalize(t)),n[e]=t,!0};_r.getPropertyBySemantic=function(e,t,n){let i=n.propertiesBySemantic;if(!c(i))return;let o=i[e];if(c(o))return _r.getProperty(o.id,t,n)};_r.setPropertyBySemantic=function(e,t,n,i){let o=i.propertiesBySemantic;if(!c(o))return!1;let r=i.propertiesBySemantic[e];return c(r)?_r.setProperty(r.id,t,n,i):!1};var Kt=_r;function Tl(e){e=e??G.EMPTY_OBJECT;let t=e.subtreeMetadata,n=e.class,i=c(t.properties)?t.properties:{};this._class=n,this._properties=i,this._extras=t.extras,this._extensions=t.extensions}Object.defineProperties(Tl.prototype,{class:{get:function(){return this._class}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}}});Tl.prototype.hasProperty=function(e){return Kt.hasProperty(e,this._properties,this._class)};Tl.prototype.hasPropertyBySemantic=function(e){return Kt.hasPropertyBySemantic(e,this._properties,this._class)};Tl.prototype.getPropertyIds=function(e){return Kt.getPropertyIds(this._properties,this._class,e)};Tl.prototype.getProperty=function(e){return Kt.getProperty(e,this._properties,this._class)};Tl.prototype.setProperty=function(e,t){return Kt.setProperty(e,t,this._properties,this._class)};Tl.prototype.getPropertyBySemantic=function(e){return Kt.getPropertyBySemantic(e,this._properties,this._class)};Tl.prototype.setPropertyBySemantic=function(e,t){return Kt.setPropertyBySemantic(e,t,this._properties,this._class)};var m1=Tl;var it={INT8:"INT8",UINT8:"UINT8",INT16:"INT16",UINT16:"UINT16",INT32:"INT32",UINT32:"UINT32",INT64:"INT64",UINT64:"UINT64",FLOAT32:"FLOAT32",FLOAT64:"FLOAT64"};it.getMinimum=function(e){switch(e){case it.INT8:return-128;case it.UINT8:return 0;case it.INT16:return-32768;case it.UINT16:return 0;case it.INT32:return-2147483648;case it.UINT32:return 0;case it.INT64:return Ut.supportsBigInt()?BigInt("-9223372036854775808"):-Math.pow(2,63);case it.UINT64:return Ut.supportsBigInt()?BigInt(0):0;case it.FLOAT32:return-34028234663852886e22;case it.FLOAT64:return-Number.MAX_VALUE}};it.getMaximum=function(e){switch(e){case it.INT8:return 127;case it.UINT8:return 255;case it.INT16:return 32767;case it.UINT16:return 65535;case it.INT32:return 2147483647;case it.UINT32:return 4294967295;case it.INT64:return Ut.supportsBigInt()?BigInt("9223372036854775807"):Math.pow(2,63)-1;case it.UINT64:return Ut.supportsBigInt()?BigInt("18446744073709551615"):Math.pow(2,64)-1;case it.FLOAT32:return 34028234663852886e22;case it.FLOAT64:return Number.MAX_VALUE}};it.isIntegerType=function(e){switch(e){case it.INT8:case it.UINT8:case it.INT16:case it.UINT16:case it.INT32:case it.UINT32:case it.INT64:case it.UINT64:return!0;default:return!1}};it.isUnsignedIntegerType=function(e){switch(e){case it.UINT8:case it.UINT16:case it.UINT32:case it.UINT64:return!0;default:return!1}};it.isVectorCompatible=function(e){switch(e){case it.INT8:case it.UINT8:case it.INT16:case it.UINT16:case it.INT32:case it.UINT32:case it.FLOAT32:case it.FLOAT64:return!0;default:return!1}};it.normalize=function(e,t){return Math.max(Number(e)/Number(it.getMaximum(t)),-1)};it.unnormalize=function(e,t){let n=it.getMaximum(t),i=it.isUnsignedIntegerType(t)?0:-n;return e=S.sign(e)*Math.round(Math.abs(e)*Number(n)),(t===it.INT64||t===it.UINT64)&&Ut.supportsBigInt()&&(e=BigInt(e)),e>n?n:e<i?i:e};it.applyValueTransform=function(e,t,n){return n*e+t};it.unapplyValueTransform=function(e,t,n){return n===0?0:(e-t)/n};it.getSizeInBytes=function(e){switch(e){case it.INT8:case it.UINT8:return 1;case it.INT16:case it.UINT16:return 2;case it.INT32:case it.UINT32:return 4;case it.INT64:case it.UINT64:return 8;case it.FLOAT32:return 4;case it.FLOAT64:return 8}};it.fromComponentDatatype=function(e){switch(e){case V.BYTE:return it.INT8;case V.UNSIGNED_BYTE:return it.UINT8;case V.SHORT:return it.INT16;case V.UNSIGNED_SHORT:return it.UINT16;case V.INT:return it.INT32;case V.UNSIGNED_INT:return it.UINT32;case V.FLOAT:return it.FLOAT32;case V.DOUBLE:return it.FLOAT64}};it.toComponentDatatype=function(e){switch(e){case it.INT8:return V.BYTE;case it.UINT8:return V.UNSIGNED_BYTE;case it.INT16:return V.SHORT;case it.UINT16:return V.UNSIGNED_SHORT;case it.INT32:return V.INT;case it.UINT32:return V.UNSIGNED_INT;case it.FLOAT32:return V.FLOAT;case it.FLOAT64:return V.DOUBLE}};var Vt=Object.freeze(it);var wi={SCALAR:"SCALAR",VEC2:"VEC2",VEC3:"VEC3",VEC4:"VEC4",MAT2:"MAT2",MAT3:"MAT3",MAT4:"MAT4",BOOLEAN:"BOOLEAN",STRING:"STRING",ENUM:"ENUM"};wi.isVectorType=function(e){switch(e){case wi.VEC2:case wi.VEC3:case wi.VEC4:return!0;default:return!1}};wi.isMatrixType=function(e){switch(e){case wi.MAT2:case wi.MAT3:case wi.MAT4:return!0;default:return!1}};wi.getComponentCount=function(e){switch(e){case wi.SCALAR:case wi.STRING:case wi.ENUM:case wi.BOOLEAN:return 1;case wi.VEC2:return 2;case wi.VEC3:return 3;case wi.VEC4:return 4;case wi.MAT2:return 4;case wi.MAT3:return 9;case wi.MAT4:return 16}};wi.getMathType=function(e){switch(e){case wi.VEC2:return L;case wi.VEC3:return f;case wi.VEC4:return re;case wi.MAT2:return vi;case wi.MAT3:return ne;case wi.MAT4:return Q;default:return}};var jt=Object.freeze(wi);function Lr(e){e=e??G.EMPTY_OBJECT;let t=e.id,n=e.type,i=e.componentType,o=e.enumType,r=c(i)&&Vt.isIntegerType(i)&&(e.normalized??!1);this._id=t,this._name=e.name,this._description=e.description,this._semantic=e.semantic,this._isLegacyExtension=e.isLegacyExtension,this._type=n,this._componentType=i,this._enumType=o,this._valueType=c(o)?o.valueType:i,this._isArray=e.isArray??!1,this._isVariableLengthArray=e.isVariableLengthArray??!1,this._arrayLength=e.arrayLength,this._min=Re(e.min,!0),this._max=Re(e.max,!0),this._normalized=r;let a=Re(e.offset,!0),s=Re(e.scale,!0),A=c(a)||c(s),l=!0;c(a)||(a=this.expandConstant(0,l)),c(s)||(s=this.expandConstant(1,l)),this._offset=a,this._scale=s,this._hasValueTransform=A,this._noData=Re(e.noData,!0),this._default=Re(e.default,!0),this._required=e.required??!0,this._extras=Re(e.extras,!0),this._extensions=Re(e.extensions,!0)}Lr.fromJson=function(e){e=e??G.EMPTY_OBJECT;let t=e.id,n=e.property,i=nne(n),o=ine(n,e.enums),r;return c(i)?i?r=c(n.optional)?!n.optional:!0:r=n.required??!1:r=!1,new Lr({id:t,type:o.type,componentType:o.componentType,enumType:o.enumType,isArray:o.isArray,isVariableLengthArray:o.isVariableLengthArray,arrayLength:o.arrayLength,normalized:n.normalized,min:n.min,max:n.max,offset:n.offset,scale:n.scale,noData:n.noData,default:n.default,required:r,name:n.name,description:n.description,semantic:n.semantic,extras:n.extras,extensions:n.extensions,isLegacyExtension:i})};Object.defineProperties(Lr.prototype,{id:{get:function(){return this._id}},name:{get:function(){return this._name}},description:{get:function(){return this._description}},type:{get:function(){return this._type}},enumType:{get:function(){return this._enumType}},componentType:{get:function(){return this._componentType}},valueType:{get:function(){return this._valueType}},isArray:{get:function(){return this._isArray}},isVariableLengthArray:{get:function(){return this._isVariableLengthArray}},arrayLength:{get:function(){return this._arrayLength}},normalized:{get:function(){return this._normalized}},max:{get:function(){return this._max}},min:{get:function(){return this._min}},noData:{get:function(){return this._noData}},default:{get:function(){return this._default}},required:{get:function(){return this._required}},semantic:{get:function(){return this._semantic}},hasValueTransform:{get:function(){return this._hasValueTransform}},offset:{get:function(){return this._offset}},scale:{get:function(){return this._scale}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}}});function nne(e){if(e.type==="ARRAY")return!0;let t=e.type;if(t===jt.SCALAR||jt.isMatrixType(t)||jt.isVectorType(t))return!1;if(c(Vt[t]))return!0;if(c(e.noData)||c(e.scale)||c(e.offset)||c(e.required)||c(e.count)||c(e.array)||c(e.optional))return!1}function ine(e,t){let n=e.type,i=e.componentType,o=n==="ARRAY",r,a,s;o?(r=!0,a=e.componentCount,s=!c(a)):e.array?(r=!0,a=e.count,s=!c(e.count)):(r=!1,a=void 0,s=!1);let A;if(c(e.enumType)&&(A=t[e.enumType]),n===jt.ENUM)return{type:n,componentType:void 0,enumType:A,valueType:A.valueType,isArray:r,isVariableLengthArray:s,arrayLength:a};if(o&&i===jt.ENUM)return{type:i,componentType:void 0,enumType:A,valueType:A.valueType,isArray:r,isVariableLengthArray:s,arrayLength:a};if(n===jt.SCALAR||jt.isMatrixType(n)||jt.isVectorType(n))return{type:n,componentType:i,enumType:void 0,valueType:i,isArray:r,isVariableLengthArray:s,arrayLength:a};if(n===jt.BOOLEAN||n===jt.STRING)return{type:n,componentType:void 0,enumType:void 0,valueType:void 0,isArray:r,isVariableLengthArray:s,arrayLength:a};if(o&&(i===jt.BOOLEAN||i===jt.STRING))return{type:i,componentType:void 0,enumType:void 0,valueType:void 0,isArray:r,isVariableLengthArray:s,arrayLength:a};if(c(i)&&c(Vt[i]))return{type:jt.SCALAR,componentType:i,enumType:void 0,valueType:i,isArray:r,isVariableLengthArray:s,arrayLength:a};if(c(Vt[n]))return{type:jt.SCALAR,componentType:n,enumType:void 0,valueType:n,isArray:r,isVariableLengthArray:s,arrayLength:a}}Lr.prototype.normalize=function(e){return this._normalized?xx(e,this._valueType,Vt.normalize):e};Lr.prototype.unnormalize=function(e){return this._normalized?xx(e,this._valueType,Vt.unnormalize):e};Lr.prototype.applyValueTransform=function(e){return!this._hasValueTransform||this._isVariableLengthArray?e:Lr.valueTransformInPlace(e,this._offset,this._scale,Vt.applyValueTransform)};Lr.prototype.unapplyValueTransform=function(e){return!this._hasValueTransform||this._isVariableLengthArray?e:Lr.valueTransformInPlace(e,this._offset,this._scale,Vt.unapplyValueTransform)};Lr.prototype.expandConstant=function(e,t){t=t??!1;let n=this._isArray,i=this._arrayLength,o=jt.getComponentCount(this._type),r=n&&o>1;if(!n&&o===1)return e;if(!n)return new Array(o).fill(e);if(!r)return new Array(i).fill(e);if(!t)return new Array(this._arrayLength*o).fill(e);let a=new Array(o).fill(e);return new Array(this._arrayLength).fill(a)};Lr.prototype.handleNoData=function(e){let t=this._noData;if(!c(t))return e;if(!E1(e,t))return e};function E1(e,t){if(!Array.isArray(e))return e===t;if(!Array.isArray(t)||e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!E1(e[n],t[n]))return!1;return!0}Lr.prototype.unpackVectorAndMatrixTypes=function(e,t){t=t??!1;let n=jt.getMathType(this._type),i=this._isArray,o=jt.getComponentCount(this._type),r=i&&o>1;return c(n)?t&&r?e.map(function(a){return n.unpack(a)}):i?n.unpackArray(e):n.unpack(e):e};Lr.prototype.packVectorAndMatrixTypes=function(e,t){t=t??!1;let n=jt.getMathType(this._type),i=this._isArray,o=jt.getComponentCount(this._type),r=i&&o>1;return c(n)?t&&r?e.map(function(a){return n.pack(a,[])}):i?n.packArray(e,[]):n.pack(e,[]):e};Lr.prototype.validate=function(e){if(!(!c(e)&&c(this._default)))return this._required&&!c(e)?"required property must have a value":this._isArray?one(this,e):_1(this,e)};function one(e,t){if(!Array.isArray(t))return`value ${t} must be an array`;let n=t.length;if(!e._isVariableLengthArray&&n!==e._arrayLength)return"Array length does not match property.arrayLength";for(let i=0;i<n;i++){let o=_1(e,t[i]);if(c(o))return o}}function _1(e,t){let n=e._type,i=e._componentType,o=e._enumType,r=e._normalized;return jt.isVectorType(n)?rne(t,n,i):jt.isMatrixType(n)?ane(t,n,i):n===jt.STRING?sne(t):n===jt.BOOLEAN?cne(t):n===jt.ENUM?Ane(t,o):lne(t,i,r)}function rne(e,t,n){if(!Vt.isVectorCompatible(n))return`componentType ${n} is incompatible with vector type ${t}`;if(t===jt.VEC2&&!(e instanceof L))return`vector value ${e} must be a Cartesian2`;if(t===jt.VEC3&&!(e instanceof f))return`vector value ${e} must be a Cartesian3`;if(t===jt.VEC4&&!(e instanceof re))return`vector value ${e} must be a Cartesian4`}function ane(e,t,n){if(!Vt.isVectorCompatible(n))return`componentType ${n} is incompatible with matrix type ${t}`;if(t===jt.MAT2&&!(e instanceof vi))return`matrix value ${e} must be a Matrix2`;if(t===jt.MAT3&&!(e instanceof ne))return`matrix value ${e} must be a Matrix3`;if(t===jt.MAT4&&!(e instanceof Q))return`matrix value ${e} must be a Matrix4`}function sne(e){if(typeof e!="string")return eI(e,jt.STRING)}function cne(e){if(typeof e!="boolean")return eI(e,jt.BOOLEAN)}function Ane(e,t){let n=typeof e;if(c(t))return n!=="string"||!c(t.valuesByName[e])?`value ${e} is not a valid enum name for ${t.id}`:void 0}function lne(e,t,n){let i=typeof e;switch(t){case Vt.INT8:case Vt.UINT8:case Vt.INT16:case Vt.UINT16:case Vt.INT32:case Vt.UINT32:case Vt.FLOAT32:case Vt.FLOAT64:return i!=="number"?eI(e,t):isFinite(e)?g1(e,t,n):C1(e,t);case Vt.INT64:case Vt.UINT64:return i!=="number"&&i!=="bigint"?eI(e,t):i==="number"&&!isFinite(e)?C1(e,t):g1(e,t,n)}}function eI(e,t){return`value ${e} does not match type ${t}`}function p1(e,t,n){let i=`value ${e} is out of range for type ${t}`;return n&&(i+=" (normalized)"),i}function g1(e,t,n){if(n){let i=Vt.isUnsignedIntegerType(t)?0:-1;return e<i||e>1?p1(e,t,n):void 0}if(e<Vt.getMinimum(t)||e>Vt.getMaximum(t))return p1(e,t,n)}function C1(e,t){return`value ${e} of type ${t} must be finite`}function xx(e,t,n){if(!Array.isArray(e))return n(e,t);for(let i=0;i<e.length;i++)e[i]=xx(e[i],t,n);return e}Lr.valueTransformInPlace=function(e,t,n,i){if(!Array.isArray(e))return i(e,t,n);for(let o=0;o<e.length;o++)e[o]=Lr.valueTransformInPlace(e[o],t[o],n[o],i);return e};var Cg=Lr;function Eg(e){e=e??G.EMPTY_OBJECT;let t=e.count,n=e.property,i=e.classProperty,o=e.bufferViews,r=i.type,a=i.isArray,s=i.isVariableLengthArray,A=i.valueType,l=i.enumType,d=r===jt.STRING,m=r===jt.BOOLEAN,p=0,g;if(s){let u=n.arrayOffsetType??n.offsetType;u=Vt[u]??Vt.UINT32;let E=n.arrayOffsets??n.arrayOffsetBufferView;g=new Tx(o[E],u,t+1),p+=g.typedArray.byteLength}let h=jt.getComponentCount(r),C;s?C=g.get(t)-g.get(0):a?C=t*i.arrayLength:C=t;let _=h*C,I;if(d){let u=n.stringOffsetType??n.offsetType;u=Vt[u]??Vt.UINT32;let E=n.stringOffsets??n.stringOffsetBufferView;I=new Tx(o[E],u,_+1),p+=I.typedArray.byteLength}(d||m)&&(A=Vt.UINT8);let b;d?b=I.get(_)-I.get(0):m?b=Math.ceil(_/8):b=_;let x=n.values??n.bufferView,T=new Tx(o[x],A,b);p+=T.typedArray.byteLength;let w=n.offset,R=n.scale,z=i.hasValueTransform||c(w)||c(R);w=w??i.offset,R=R??i.scale,w=I1(w),R=I1(R);let M,N,O=this;d?M=function(u){return dne(u,O._values,O._stringOffsets)}:m?(M=function(u){return hne(u,O._values)},N=function(u,E){mne(u,O._values,E)}):c(l)?(M=function(u){let E=O._values.get(u);return l.namesByValue[E]},N=function(u,E){let y=l.valuesByName[E];O._values.set(u,y)}):(M=function(u){return O._values.get(u)},N=function(u,E){O._values.set(u,E)}),this._arrayOffsets=g,this._stringOffsets=I,this._values=T,this._classProperty=i,this._count=t,this._vectorComponentCount=h,this._min=n.min,this._max=n.max,this._offset=w,this._scale=R,this._hasValueTransform=z,this._getValue=M,this._setValue=N,this._unpackedValues=void 0,this._extras=n.extras,this._extensions=n.extensions,this._byteLength=p}Object.defineProperties(Eg.prototype,{hasValueTransform:{get:function(){return this._hasValueTransform}},offset:{get:function(){return this._offset}},scale:{get:function(){return this._scale}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}},byteLength:{get:function(){return this._byteLength}}});Eg.prototype.get=function(e){let t=une(this,e);return t=this._classProperty.handleNoData(t),c(t)?(t=this._classProperty.normalize(t),t=bne(this,t),this._classProperty.unpackVectorAndMatrixTypes(t)):(t=this._classProperty.default,this._classProperty.unpackVectorAndMatrixTypes(t))};Eg.prototype.set=function(e,t){let n=this._classProperty;t=n.packVectorAndMatrixTypes(t),t=Bne(this,t),t=n.unnormalize(t),fne(this,e,t)};Eg.prototype.getTypedArray=function(){if(c(this._values))return this._values.typedArray};function I1(e){if(!Array.isArray(e))return e;let t=[];for(let n=0;n<e.length;n++){let i=e[n];Array.isArray(i)?Mn(t,i):t.push(i)}return t}function une(e,t){b1(e)&&B1(e);let n=e._classProperty,i=n.isArray,o=n.type,r=jt.getComponentCount(o);if(c(e._unpackedValues)){let a=e._unpackedValues[t];return i?Re(a,!0):a}return!i&&r===1?e._getValue(t):y1(e,n,t)}function y1(e,t,n){let i,o;if(t.isVariableLengthArray){i=e._arrayOffsets.get(n),o=e._arrayOffsets.get(n+1)-i;let a=jt.getComponentCount(t.type);i*=a,o*=a}else{let s=(t.arrayLength??1)*e._vectorComponentCount;i=n*s,o=s}let r=new Array(o);for(let a=0;a<o;a++)r[a]=e._getValue(i+a);return r}function fne(e,t,n){Ine(e,t,n)&&B1(e);let i=e._classProperty,o=i.isArray,r=i.type,a=jt.getComponentCount(r);if(c(e._unpackedValues)){i.isArray&&(n=Re(n,!0)),e._unpackedValues[t]=n;return}if(!o&&a===1){e._setValue(t,n);return}let s,A;if(i.isVariableLengthArray)s=e._arrayOffsets.get(t),A=e._arrayOffsets.get(t+1)-s;else{let d=(i.arrayLength??1)*e._vectorComponentCount;s=t*d,A=d}for(let l=0;l<A;++l)e._setValue(s+l,n[l])}function dne(e,t,n){let i=n.get(e),o=n.get(e+1)-i;return Uc(t.typedArray,i,o)}function hne(e,t){let n=e>>3,i=e%8;return(t.typedArray[n]>>i&1)===1}function mne(e,t,n){let i=e>>3,o=e%8;n?t.typedArray[i]|=1<<o:t.typedArray[i]&=~(1<<o)}function pne(e,t){let n=t.dataView,i=e*8,o=0,r=(n.getUint8(i+7)&128)>0,a=!0;for(let s=0;s<8;++s){let A=n.getUint8(i+s);r&&(a?A!==0&&(A=~(A-1)&255,a=!1):A=~A&255),o+=A*Math.pow(256,s)}return r&&(o=-o),o}function gne(e,t){let n=t.dataView,i=e*8,o=BigInt(0),r=(n.getUint8(i+7)&128)>0,a=!0;for(let s=0;s<8;++s){let A=n.getUint8(i+s);r&&(a?A!==0&&(A=~(A-1)&255,a=!1):A=~A&255),o+=BigInt(A)*(BigInt(1)<<BigInt(s*8))}return r&&(o=-o),o}function Cne(e,t){let n=t.dataView,i=e*8,o=n.getUint32(i,!0),r=n.getUint32(i+4,!0);return o+4294967296*r}function Ene(e,t){let n=t.dataView,i=e*8,o=BigInt(n.getUint32(i,!0)),r=BigInt(n.getUint32(i+4,!0));return o+BigInt(4294967296)*r}function _ne(e){switch(e){case Vt.INT8:return V.BYTE;case Vt.UINT8:return V.UNSIGNED_BYTE;case Vt.INT16:return V.SHORT;case Vt.UINT16:return V.UNSIGNED_SHORT;case Vt.INT32:return V.INT;case Vt.UINT32:return V.UNSIGNED_INT;case Vt.FLOAT32:return V.FLOAT;case Vt.FLOAT64:return V.DOUBLE}}function b1(e){if(c(e._unpackedValues))return!1;let t=e._classProperty,n=t.type,i=t.valueType;return n===jt.STRING||i===Vt.INT64&&!Ut.supportsBigInt64Array()||i===Vt.UINT64&&!Ut.supportsBigUint64Array()}function Ine(e,t,n){if(b1(e))return!0;let i=e._arrayOffsets;if(c(i)){let o=i.get(t+1)-i.get(t),r=n.length;if(o!==r)return!0}return!1}function B1(e){e._unpackedValues=yne(e),e._arrayOffsets=void 0,e._stringOffsets=void 0,e._values=void 0}function yne(e){let t=e._count,n=new Array(t),i=e._classProperty,o=i.isArray,r=i.type,a=jt.getComponentCount(r);if(!o&&a===1){for(let s=0;s<t;++s)n[s]=e._getValue(s);return n}for(let s=0;s<t;s++)n[s]=y1(e,i,s);return n}function bne(e,t){let i=e._classProperty.isVariableLengthArray;return!e._hasValueTransform||i?t:Cg.valueTransformInPlace(t,e._offset,e._scale,Vt.applyValueTransform)}function Bne(e,t){let i=e._classProperty.isVariableLengthArray;return!e._hasValueTransform||i?t:Cg.valueTransformInPlace(t,e._offset,e._scale,Vt.unapplyValueTransform)}function Tx(e,t,n){let i=this,o,r,a;if(t===Vt.INT64)Ut.supportsBigInt()?Ut.supportsBigInt64Array()?(o=new BigInt64Array(e.buffer,e.byteOffset,n),a=function(s,A){i.typedArray[s]=BigInt(A)}):(o=new Uint8Array(e.buffer,e.byteOffset,n*8),r=function(s){return gne(s,i)}):(Nn("INT64 type is not fully supported on this platform. Values greater than 2^53 - 1 or less than -(2^53 - 1) may lose precision when read."),o=new Uint8Array(e.buffer,e.byteOffset,n*8),r=function(s){return pne(s,i)});else if(t===Vt.UINT64)Ut.supportsBigInt()?Ut.supportsBigUint64Array()?(o=new BigUint64Array(e.buffer,e.byteOffset,n),a=function(s,A){i.typedArray[s]=BigInt(A)}):(o=new Uint8Array(e.buffer,e.byteOffset,n*8),r=function(s){return Ene(s,i)}):(Nn("UINT64 type is not fully supported on this platform. Values greater than 2^53 - 1 may lose precision when read."),o=new Uint8Array(e.buffer,e.byteOffset,n*8),r=function(s){return Cne(s,i)});else{let s=_ne(t);o=V.createArrayBufferView(s,e.buffer,e.byteOffset,n),a=function(A,l){i.typedArray[A]=l}}c(r)||(r=function(s){return i.typedArray[s]}),this.typedArray=o,this.dataView=new DataView(o.buffer,o.byteOffset),this.get=r,this.set=a,this._componentType=t}var x1=Eg;function Gc(e){e=e??G.EMPTY_OBJECT;let t=e.count,n=e.class,i=0,o={};if(c(e.properties)){for(let r in e.properties)if(e.properties.hasOwnProperty(r)){let a=new x1({count:t,property:e.properties[r],classProperty:n.properties[r],bufferViews:e.bufferViews});o[r]=a,i+=a.byteLength}}this._count=t,this._class=n,this._properties=o,this._byteLength=i}Object.defineProperties(Gc.prototype,{count:{get:function(){return this._count}},class:{get:function(){return this._class}},byteLength:{get:function(){return this._byteLength}}});Gc.prototype.hasProperty=function(e){return Kt.hasProperty(e,this._properties,this._class)};Gc.prototype.hasPropertyBySemantic=function(e){return Kt.hasPropertyBySemantic(e,this._properties,this._class)};Gc.prototype.getPropertyIds=function(e){return Kt.getPropertyIds(this._properties,this._class,e)};Gc.prototype.getProperty=function(e,t){let n=this._properties[t],i;return c(n)?i=n.get(e):i=xne(this._class,t),i};Gc.prototype.setProperty=function(e,t,n){let i=this._properties[t];return c(i)?(i.set(e,n),!0):!1};Gc.prototype.getPropertyBySemantic=function(e,t){let n,i=this._class.propertiesBySemantic;if(c(i)&&(n=i[t]),c(n))return this.getProperty(e,n.id)};Gc.prototype.setPropertyBySemantic=function(e,t,n){let i,o=this._class.propertiesBySemantic;return c(o)&&(i=o[t]),c(i)?this.setProperty(e,i.id,n):!1};Gc.prototype.getPropertyTypedArray=function(e){let t=this._properties[e];if(c(t))return t.getTypedArray()};Gc.prototype.getPropertyTypedArrayBySemantic=function(e){let t,n=this._class.propertiesBySemantic;if(c(n)&&(t=n[e]),c(t))return this.getPropertyTypedArray(t.id)};function xne(e,t){let n=e.properties;if(!c(n))return;let i=n[t];if(c(i)&&c(i.default)){let o=i.default;return i.isArray&&(o=Re(o,!0)),o=i.normalize(o),i.unpackVectorAndMatrixTypes(o)}}var Sl=Gc;function Gu(){}Object.defineProperties(Gu.prototype,{cacheKey:{get:function(){be.throwInstantiationError()}}});Gu.prototype.load=function(){be.throwInstantiationError()};Gu.prototype.unload=function(){};Gu.prototype.process=function(e){return!1};Gu.prototype.getError=function(e,t){c(t)&&c(t.message)&&(e+=`
${t.message}`);let n=new ae(e);return c(t)&&(n.stack=`Original stack:
${t.stack}
Handler stack:
${n.stack}`),n};Gu.prototype.isDestroyed=function(){return!1};Gu.prototype.destroy=function(){return this.unload(),me(this)};var Ln=Gu;var Tne={UNLOADED:0,LOADING:1,LOADED:2,PROCESSING:3,READY:4,FAILED:5},ke=Object.freeze(Tne);function wl(e){e=e??G.EMPTY_OBJECT;let t=e.typedArray,n=e.resource,i=e.cacheKey;this._typedArray=t,this._resource=n,this._cacheKey=i,this._state=ke.UNLOADED,this._promise=void 0}c(Object.create)&&(wl.prototype=Object.create(Ln.prototype),wl.prototype.constructor=wl);Object.defineProperties(wl.prototype,{cacheKey:{get:function(){return this._cacheKey}},typedArray:{get:function(){return this._typedArray}}});wl.prototype.load=async function(){return c(this._promise)?this._promise:c(this._typedArray)?(this._promise=Promise.resolve(this),this._promise):(this._promise=Sne(this),this._promise)};async function Sne(e){let t=e._resource;e._state=ke.LOADING;try{let n=await wl._fetchArrayBuffer(t);return e.isDestroyed()?void 0:(e._typedArray=new Uint8Array(n),e._state=ke.READY,e)}catch(n){if(e.isDestroyed())return;e._state=ke.FAILED;let i=`Failed to load external buffer: ${t.url}`;throw e.getError(i,n)}}wl._fetchArrayBuffer=function(e){return e.fetchArrayBuffer()};wl.prototype.unload=function(){this._typedArray=void 0};var tI=wl;var v1=ls(R1(),1);function hd(e){e=e??G.EMPTY_OBJECT;let t=e.resourceCache,n=e.gltf,i=e.bufferViewId,o=e.gltfResource,r=e.baseResource,a=e.cacheKey,s=n.bufferViews[i],A=s.buffer,l=s.byteOffset,d=s.byteLength,m=!1,p,g,h,C;if(Gn(s,"EXT_meshopt_compression")){let I=s.extensions.EXT_meshopt_compression;A=I.buffer,l=I.byteOffset??0,d=I.byteLength,m=!0,p=I.byteStride,g=I.count,h=I.mode,C=I.filter??"NONE"}let _=n.buffers[A];this._hasMeshopt=m,this._meshoptByteStride=p,this._meshoptCount=g,this._meshoptMode=h,this._meshoptFilter=C,this._resourceCache=t,this._gltfResource=o,this._baseResource=r,this._buffer=_,this._bufferId=A,this._byteOffset=l,this._byteLength=d,this._cacheKey=a,this._bufferLoader=void 0,this._typedArray=void 0,this._state=ke.UNLOADED,this._promise=void 0}c(Object.create)&&(hd.prototype=Object.create(Ln.prototype),hd.prototype.constructor=hd);Object.defineProperties(hd.prototype,{cacheKey:{get:function(){return this._cacheKey}},typedArray:{get:function(){return this._typedArray}}});async function vne(e){try{let t=Mne(e);if(e._bufferLoader=t,await t.load(),e.isDestroyed())return;let n=t.typedArray,i=new Uint8Array(n.buffer,n.byteOffset+e._byteOffset,e._byteLength);if(e.unload(),e._typedArray=i,e._hasMeshopt){let o=e._meshoptCount,r=e._meshoptByteStride,a=new Uint8Array(o*r);v1.MeshoptDecoder.decodeGltfBuffer(a,o,r,e._typedArray,e._meshoptMode,e._meshoptFilter),e._typedArray=a}return e._state=ke.READY,e}catch(t){if(e.isDestroyed())return;throw e.unload(),e._state=ke.FAILED,e.getError("Failed to load buffer view",t)}}hd.prototype.load=async function(){return c(this._promise)?this._promise:(this._state=ke.LOADING,this._promise=vne(this),this._promise)};function Mne(e){let t=e._resourceCache,n=e._buffer;if(c(n.uri)){let o=e._baseResource.getDerivedResource({url:n.uri});return t.getExternalBufferLoader({resource:o})}return t.getEmbeddedBufferLoader({parentResource:e._gltfResource,bufferId:e._bufferId})}hd.prototype.unload=function(){c(this._bufferLoader)&&!this._bufferLoader.isDestroyed()&&this._resourceCache.unload(this._bufferLoader),this._bufferLoader=void 0,this._typedArray=void 0};var Rx=hd;function Ao(){}Ao._maxDecodingConcurrency=Math.max(Ut.hardwareConcurrency-1,1);Ao._decoderTaskProcessor=void 0;Ao._taskProcessorReady=!1;Ao._error=void 0;Ao._getDecoderTaskProcessor=function(){if(!c(Ao._decoderTaskProcessor)){let e=new $i("decodeDraco",Ao._maxDecodingConcurrency);e.initWebAssemblyModule({wasmBinaryFile:"ThirdParty/draco_decoder.wasm"}).then(function(t){t?Ao._taskProcessorReady=!0:Ao._error=new ae("Draco decoder could not be initialized.")}).catch(t=>{Ao._error=t}),Ao._decoderTaskProcessor=e}return Ao._decoderTaskProcessor};Ao.decodePointCloud=function(e){let t=Ao._getDecoderTaskProcessor();if(c(Ao._error))throw Ao._error;if(Ao._taskProcessorReady)return t.scheduleTask(e,[e.buffer.buffer])};Ao.decodeBufferView=function(e){let t=Ao._getDecoderTaskProcessor();if(c(Ao._error))throw Ao._error;if(Ao._taskProcessorReady)return t.scheduleTask(e,[e.array.buffer])};var aI=Ao;var zt={POSITION:"POSITION",NORMAL:"NORMAL",TANGENT:"TANGENT",TEXCOORD:"TEXCOORD",COLOR:"COLOR",JOINTS:"JOINTS",WEIGHTS:"WEIGHTS",FEATURE_ID:"_FEATURE_ID",SCALE:"KHR_gaussian_splatting:SCALE",ROTATION:"KHR_gaussian_splatting:ROTATION"};function Pne(e){switch(e){case zt.POSITION:return"positionMC";case zt.NORMAL:return"normalMC";case zt.TANGENT:return"tangentMC";case zt.TEXCOORD:return"texCoord";case zt.COLOR:return"color";case zt.JOINTS:return"joints";case zt.WEIGHTS:return"weights";case zt.FEATURE_ID:return"featureId";case zt.SCALE:return"scale";case zt.ROTATION:return"rotation"}}zt.hasSetIndex=function(e){switch(e){case zt.POSITION:case zt.NORMAL:case zt.TANGENT:return!1;case zt.TEXCOORD:case zt.COLOR:case zt.JOINTS:case zt.WEIGHTS:case zt.FEATURE_ID:case zt.SCALE:case zt.ROTATION:return!0}};zt.fromGltfSemantic=function(e){let t=e,i=/^(\w+)_\d+$/.exec(e);switch(i!==null&&(t=i[1]),t){case"POSITION":return zt.POSITION;case"NORMAL":return zt.NORMAL;case"TANGENT":return zt.TANGENT;case"TEXCOORD":return zt.TEXCOORD;case"COLOR":return zt.COLOR;case"JOINTS":return zt.JOINTS;case"WEIGHTS":return zt.WEIGHTS;case"_FEATURE_ID":return zt.FEATURE_ID;case"KHR_gaussian_splatting:SCALE":case"_SCALE":return zt.SCALE;case"KHR_gaussian_splatting:ROTATION":case"_ROTATION":return zt.ROTATION}};zt.fromPntsSemantic=function(e){switch(e){case"POSITION":case"POSITION_QUANTIZED":return zt.POSITION;case"RGBA":case"RGB":case"RGB565":return zt.COLOR;case"NORMAL":case"NORMAL_OCT16P":return zt.NORMAL;case"BATCH_ID":return zt.FEATURE_ID}};zt.getGlslType=function(e){switch(e){case zt.POSITION:case zt.NORMAL:case zt.TANGENT:return"vec3";case zt.TEXCOORD:return"vec2";case zt.COLOR:return"vec4";case zt.JOINTS:return"ivec4";case zt.WEIGHTS:return"vec4";case zt.FEATURE_ID:return"int";case zt.SCALE:return"vec3";case zt.ROTATION:return"vec4";case zt.OPACITY:return"float"}};zt.getVariableName=function(e,t){let n=Pne(e);return c(t)&&(n+=`_${t}`),n};var Pe=Object.freeze(zt);function Hu(e){e=e??G.EMPTY_OBJECT;let t=e.resourceCache,n=e.gltf,i=e.primitive,o=e.draco,r=e.gltfResource,a=e.baseResource,s=e.cacheKey;this._resourceCache=t,this._gltfResource=r,this._baseResource=a,this._gltf=n,this._primitive=i,this._draco=o,this._cacheKey=s,this._bufferViewLoader=void 0,this._bufferViewTypedArray=void 0,this._decodePromise=void 0,this._decodedData=void 0,this._state=ke.UNLOADED,this._promise=void 0,this._dracoError=void 0}c(Object.create)&&(Hu.prototype=Object.create(Ln.prototype),Hu.prototype.constructor=Hu);Object.defineProperties(Hu.prototype,{cacheKey:{get:function(){return this._cacheKey}},decodedData:{get:function(){return this._decodedData}}});async function Nne(e){let t=e._resourceCache;try{let n=t.getBufferViewLoader({gltf:e._gltf,bufferViewId:e._draco.bufferView,gltfResource:e._gltfResource,baseResource:e._baseResource});return e._bufferViewLoader=n,await n.load(),e.isDestroyed()?void 0:(e._bufferViewTypedArray=n.typedArray,e._state=ke.PROCESSING,e)}catch(n){if(e.isDestroyed())return;M1(e,n)}}Hu.prototype.load=async function(){return c(this._promise)?this._promise:(this._state=ke.LOADING,this._promise=Nne(this),this._promise)};function M1(e,t){throw e.unload(),e._state=ke.FAILED,e.getError("Failed to load Draco",t)}async function Lne(e,t){try{let n=await t;return e.isDestroyed()?void 0:(e.unload(),e._decodedData={indices:n.indexArray,vertexAttributes:n.attributeData},e._state=ke.READY,e._baseResource)}catch(n){if(e.isDestroyed())return;e._dracoError=n}}var md={};md[Pe.POSITION]="POSITION";md[Pe.NORMAL]="NORMAL";md[Pe.COLOR]="COLOR";md[Pe.TEXCOORD]="TEX_COORD";function Fne(e){for(let t in md)if(md.hasOwnProperty(t)&&e.startsWith(t))return md[t]}Hu.prototype.process=function(e){if(this._state===ke.READY)return!0;if(this._state!==ke.PROCESSING||(c(this._dracoError)&&M1(this,this._dracoError),!c(this._bufferViewTypedArray))||c(this._decodePromise))return!1;let t=this._draco,n=this._primitive,i=this._gltf,o=i.bufferViews,r=t.bufferView,a=o[r],s=t.attributes,A=[];for(let m in n.attributes)if(n.attributes.hasOwnProperty(m)){let p=Fne(m);c(p)&&i.accessors[n.attributes[m]].componentType===V.FLOAT&&(A.includes(p)||A.push(p))}let l={array:new Uint8Array(this._bufferViewTypedArray),bufferView:a,compressedAttributes:s,dequantizeInShader:!0,attributesToSkipTransform:A},d=aI.decodeBufferView(l);if(!c(d))return!1;this._decodePromise=Lne(this,d)};Hu.prototype.unload=function(){c(this._bufferViewLoader)&&this._resourceCache.unload(this._bufferViewLoader),this._bufferViewLoader=void 0,this._bufferViewTypedArray=void 0,this._decodedData=void 0,this._gltf=void 0,this._primitive=void 0};var vx=Hu;function One(e){let t=e.uint8Array,n=e.format,i=e.request,o=e.flipY??!1,r=e.skipColorSpaceConversion??!1,a=new Blob([t],{type:n}),s;return Ye.supportsImageBitmapOptions().then(function(A){return A?Promise.resolve(Ye.createImageBitmapFromBlob(a,{flipY:o,premultiplyAlpha:!1,skipColorSpaceConversion:r})):(s=window.URL.createObjectURL(a),new Ye({url:s,request:i}).fetchImage({flipY:o,skipColorSpaceConversion:r}))}).then(function(A){return c(s)&&window.URL.revokeObjectURL(s),A}).catch(function(A){return c(s)&&window.URL.revokeObjectURL(s),Promise.reject(A)})}var P1=One;function Dl(e){e=e??G.EMPTY_OBJECT;let t=e.resourceCache,n=e.gltf,i=e.imageId,o=e.gltfResource,r=e.baseResource,a=e.cacheKey,s=n.images[i],A=s.bufferView,l=s.uri;this._resourceCache=t,this._gltfResource=o,this._baseResource=r,this._gltf=n,this._bufferViewId=A,this._uri=l,this._cacheKey=a,this._bufferViewLoader=void 0,this._image=void 0,this._mipLevels=void 0,this._state=ke.UNLOADED,this._promise=void 0}c(Object.create)&&(Dl.prototype=Object.create(Ln.prototype),Dl.prototype.constructor=Dl);Object.defineProperties(Dl.prototype,{cacheKey:{get:function(){return this._cacheKey}},image:{get:function(){return this._image}},mipLevels:{get:function(){return this._mipLevels}}});Dl.prototype.load=function(){return c(this._promise)?this._promise:c(this._bufferViewId)?(this._promise=kne(this),this._promise):(this._promise=Une(this),this._promise)};function N1(e){let t;return Array.isArray(e)&&(t=e.slice(1,e.length).map(function(n){return n.bufferView}),e=e[0]),{image:e,mipLevels:t}}async function kne(e){e._state=ke.LOADING;let t=e._resourceCache;try{let n=t.getBufferViewLoader({gltf:e._gltf,bufferViewId:e._bufferViewId,gltfResource:e._gltfResource,baseResource:e._baseResource});if(e._bufferViewLoader=n,await n.load(),e.isDestroyed())return;let i=n.typedArray,o=await Gne(i);if(e.isDestroyed())return;let r=N1(o);return e.unload(),e._image=r.image,e._mipLevels=r.mipLevels,e._state=ke.READY,e}catch(n){return e.isDestroyed()?void 0:L1(e,n,"Failed to load embedded image")}}async function Une(e){e._state=ke.LOADING;let t=e._baseResource,n=e._uri,i=t.getDerivedResource({url:n});try{let o=await Vne(i);if(e.isDestroyed())return;let r=N1(o);return e.unload(),e._image=r.image,e._mipLevels=r.mipLevels,e._state=ke.READY,e}catch(o){return e.isDestroyed()?void 0:L1(e,o,`Failed to load image: ${n}`)}}function L1(e,t,n){return e.unload(),e._state=ke.FAILED,Promise.reject(e.getError(n,t))}function zne(e){let t=e.subarray(0,2),n=e.subarray(0,4),i=e.subarray(8,12);if(t[0]===255&&t[1]===216)return"image/jpeg";if(t[0]===137&&t[1]===80)return"image/png";if(t[0]===171&&t[1]===75)return"image/ktx2";if(n[0]===82&&n[1]===73&&n[2]===70&&n[3]===70&&i[0]===87&&i[1]===69&&i[2]===66&&i[3]===80)return"image/webp";throw new ae("Image format is not recognized")}async function Gne(e){let t=zne(e);if(t==="image/ktx2"){let n=new Uint8Array(e);return ll(n)}return Dl._loadImageFromTypedArray({uint8Array:e,format:t,flipY:!1,skipColorSpaceConversion:!0})}var Hne=/(^data:image\/ktx2)|(\.ktx2$)/i;function Vne(e){let t=e.getUrlComponent(!1,!0);return Hne.test(t)?ll(e):e.fetchImage({skipColorSpaceConversion:!0,preferImageBitmap:!0})}Dl.prototype.unload=function(){c(this._bufferViewLoader)&&!this._bufferViewLoader.isDestroyed()&&this._resourceCache.unload(this._bufferViewLoader),this._bufferViewLoader=void 0,this._uri=void 0,this._image=void 0,this._mipLevels=void 0,this._gltf=void 0};Dl._loadImageFromTypedArray=P1;var Mx=Dl;var jne={TEXTURE:0,PROGRAM:1,BUFFER:2,NUMBER_OF_JOB_TYPES:3},Fh=Object.freeze(jne);function Vu(e){e=e??G.EMPTY_OBJECT;let t=e.resourceCache,n=e.gltf,i=e.accessorId,o=e.gltfResource,r=e.baseResource,a=e.primitive,s=e.draco,A=e.cacheKey,l=e.asynchronous??!0,d=e.loadBuffer??!1,m=e.loadTypedArray??!1,p=n.accessors[i].componentType;this._resourceCache=t,this._gltfResource=o,this._baseResource=r,this._gltf=n,this._accessorId=i,this._indexDatatype=p,this._primitive=a,this._draco=s,this._cacheKey=A,this._asynchronous=l,this._loadBuffer=d,this._loadTypedArray=m,this._bufferViewLoader=void 0,this._dracoLoader=void 0,this._typedArray=void 0,this._buffer=void 0,this._state=ke.UNLOADED,this._promise=void 0}c(Object.create)&&(Vu.prototype=Object.create(Ln.prototype),Vu.prototype.constructor=Vu);Object.defineProperties(Vu.prototype,{cacheKey:{get:function(){return this._cacheKey}},buffer:{get:function(){return this._buffer}},typedArray:{get:function(){return this._typedArray}},indexDatatype:{get:function(){return this._indexDatatype}}});var Yne=new Nx;Vu.prototype.load=async function(){return c(this._promise)?this._promise:c(this._draco)?(this._promise=Wne(this),this._promise):(this._promise=qne(this),this._promise)};async function Wne(e){e._state=ke.LOADING;let t=e._resourceCache;try{let n=t.getDracoLoader({gltf:e._gltf,primitive:e._primitive,draco:e._draco,gltfResource:e._gltfResource,baseResource:e._baseResource});return e._dracoLoader=n,await n.load(),e.isDestroyed()?void 0:(e._state=ke.LOADED,e)}catch(n){if(e.isDestroyed())return;Px(e,n)}}async function qne(e){let t=e._gltf,n=e._accessorId,o=t.accessors[n].bufferView;e._state=ke.LOADING;let r=e._resourceCache;try{let a=r.getBufferViewLoader({gltf:t,bufferViewId:o,gltfResource:e._gltfResource,baseResource:e._baseResource});if(e._bufferViewLoader=a,await a.load(),e.isDestroyed())return;let s=a.typedArray;return e._typedArray=Jne(e,s),e._state=ke.PROCESSING,e}catch(a){if(e.isDestroyed())return;Px(e,a)}}function Jne(e,t){let n=e._gltf,i=e._accessorId,o=n.accessors[i],r=o.count,a=o.componentType,s=Ge.getSizeInBytes(a),A=t.buffer,l=t.byteOffset+o.byteOffset;if(l%s!==0){let m=r*s,p=new Uint8Array(A,l,m);A=new Uint8Array(p).buffer,l=0,Kr("index-buffer-unaligned",`The index array is not aligned to a ${s}-byte boundary.`)}let d;return a===Ge.UNSIGNED_BYTE?d=new Uint8Array(A,l,r):a===Ge.UNSIGNED_SHORT?d=new Uint16Array(A,l,r):a===Ge.UNSIGNED_INT&&(d=new Uint32Array(A,l,r)),d}function Px(e,t){throw e.unload(),e._state=ke.FAILED,e.getError("Failed to load index buffer",t)}function Nx(){this.typedArray=void 0,this.indexDatatype=void 0,this.context=void 0,this.buffer=void 0}Nx.prototype.set=function(e,t,n){this.typedArray=e,this.indexDatatype=t,this.context=n};Nx.prototype.execute=function(){this.buffer=F1(this.typedArray,this.indexDatatype,this.context)};function F1(e,t,n){let i=ut.createIndexBuffer({typedArray:e,context:n,usage:De.STATIC_DRAW,indexDatatype:t});return i.vertexArrayDestroyable=!1,i}Vu.prototype.process=function(e){if(this._state===ke.READY)return!0;if(this._state!==ke.LOADED&&this._state!==ke.PROCESSING)return!1;let t=this._typedArray,n=this._indexDatatype;if(c(this._dracoLoader))try{this._dracoLoader.process(e)&&(t=this._dracoLoader.decodedData.indices.typedArray,this._typedArray=t,n=V.fromTypedArray(t),this._indexDatatype=n)}catch(o){Px(this,o)}if(!c(t))return!1;let i;if(this._loadBuffer&&this._asynchronous){let o=Yne;if(o.set(t,n,e.context),!e.jobScheduler.execute(o,Fh.BUFFER))return!1;i=o.buffer}else this._loadBuffer&&(i=F1(t,n,e.context));return this.unload(),this._buffer=i,this._typedArray=this._loadTypedArray?t:void 0,this._state=ke.READY,this._resourceCache.statistics.addGeometryLoader(this),!0};Vu.prototype.unload=function(){c(this._buffer)&&this._buffer.destroy();let e=this._resourceCache;c(this._bufferViewLoader)&&!this._bufferViewLoader.isDestroyed()&&e.unload(this._bufferViewLoader),c(this._dracoLoader)&&e.unload(this._dracoLoader),this._bufferViewLoader=void 0,this._dracoLoader=void 0,this._typedArray=void 0,this._buffer=void 0,this._gltf=void 0,this._primitive=void 0};var Lx=Vu;function Kne(e,t,n){if(n=n??!1,n){let i=e.indexOf(t);if(i>-1)return i}return e.push(t),e.length-1}var Fr=Kne;function Xne(e,t){return c(e.extensionsUsed)&&e.extensionsUsed.indexOf(t)>=0}var To=Xne;function ht(){}ht.objectLegacy=function(e,t){if(c(e)){for(let n in e)if(Object.prototype.hasOwnProperty.call(e,n)){let i=e[n],o=t(i,n);if(c(o))return o}}};ht.object=function(e,t){if(c(e)){let n=e.length;for(let i=0;i<n;i++){let o=e[i],r=t(o,i);if(c(r))return r}}};ht.topLevel=function(e,t,n){let i=e[t];return c(i)&&!Array.isArray(i)?ht.objectLegacy(i,n):ht.object(i,n)};ht.accessor=function(e,t){return ht.topLevel(e,"accessors",t)};ht.accessorWithSemantic=function(e,t,n){let i={};return ht.mesh(e,function(o){return ht.meshPrimitive(o,function(r){let a=ht.meshPrimitiveAttribute(r,function(s,A){if(A.indexOf(t)===0&&!c(i[s])){i[s]=!0;let l=n(s);if(c(l))return l}});return c(a)?a:ht.meshPrimitiveTarget(r,function(s){return ht.meshPrimitiveTargetAttribute(s,function(A,l){if(l.indexOf(t)===0&&!c(i[A])){i[A]=!0;let d=n(A);if(c(d))return d}})})})})};ht.accessorContainingVertexAttributeData=function(e,t){let n={};return ht.mesh(e,function(i){return ht.meshPrimitive(i,function(o){let r=ht.meshPrimitiveAttribute(o,function(a){if(!c(n[a])){n[a]=!0;let s=t(a);if(c(s))return s}});return c(r)?r:ht.meshPrimitiveTarget(o,function(a){return ht.meshPrimitiveTargetAttribute(a,function(s){if(!c(n[s])){n[s]=!0;let A=t(s);if(c(A))return A}})})})})};ht.accessorContainingIndexData=function(e,t){let n={};return ht.mesh(e,function(i){return ht.meshPrimitive(i,function(o){let r=o.indices;if(c(r)&&!c(n[r])){n[r]=!0;let a=t(r);if(c(a))return a}})})};ht.animation=function(e,t){return ht.topLevel(e,"animations",t)};ht.animationChannel=function(e,t){let n=e.channels;return ht.object(n,t)};ht.animationSampler=function(e,t){let n=e.samplers;return ht.object(n,t)};ht.buffer=function(e,t){return ht.topLevel(e,"buffers",t)};ht.bufferView=function(e,t){return ht.topLevel(e,"bufferViews",t)};ht.camera=function(e,t){return ht.topLevel(e,"cameras",t)};ht.image=function(e,t){return ht.topLevel(e,"images",t)};ht.material=function(e,t){return ht.topLevel(e,"materials",t)};ht.materialValue=function(e,t){let n=e.values;c(e.extensions)&&c(e.extensions.KHR_techniques_webgl)&&(n=e.extensions.KHR_techniques_webgl.values);for(let i in n)if(Object.prototype.hasOwnProperty.call(n,i)){let o=t(n[i],i);if(c(o))return o}};ht.mesh=function(e,t){return ht.topLevel(e,"meshes",t)};ht.meshPrimitive=function(e,t){let n=e.primitives;if(c(n)){let i=n.length;for(let o=0;o<i;o++){let r=n[o],a=t(r,o);if(c(a))return a}}};ht.meshPrimitiveAttribute=function(e,t){let n=e.attributes;for(let i in n)if(Object.prototype.hasOwnProperty.call(n,i)){let o=t(n[i],i);if(c(o))return o}};ht.meshPrimitiveTarget=function(e,t){let n=e.targets;if(c(n)){let i=n.length;for(let o=0;o<i;++o){let r=t(n[o],o);if(c(r))return r}}};ht.meshPrimitiveTargetAttribute=function(e,t){for(let n in e)if(Object.prototype.hasOwnProperty.call(e,n)){let i=e[n],o=t(i,n);if(c(o))return o}};ht.node=function(e,t){return ht.topLevel(e,"nodes",t)};ht.nodeInTree=function(e,t,n){let i=e.nodes;if(c(i)){let o=t.length;for(let r=0;r<o;r++){let a=t[r],s=i[a];if(c(s)){let A=n(s,a);if(c(A))return A;let l=s.children;if(c(l)&&(A=ht.nodeInTree(e,l,n),c(A)))return A}}}};ht.nodeInScene=function(e,t,n){let i=t.nodes;if(c(i))return ht.nodeInTree(e,i,n)};ht.program=function(e,t){return To(e,"KHR_techniques_webgl")?ht.object(e.extensions.KHR_techniques_webgl.programs,t):ht.topLevel(e,"programs",t)};ht.sampler=function(e,t){return ht.topLevel(e,"samplers",t)};ht.scene=function(e,t){return ht.topLevel(e,"scenes",t)};ht.shader=function(e,t){return To(e,"KHR_techniques_webgl")?ht.object(e.extensions.KHR_techniques_webgl.shaders,t):ht.topLevel(e,"shaders",t)};ht.skin=function(e,t){return ht.topLevel(e,"skins",t)};ht.skinJoint=function(e,t){let n=e.joints;if(c(n)){let i=n.length;for(let o=0;o<i;o++){let r=n[o],a=t(r);if(c(a))return a}}};ht.techniqueAttribute=function(e,t){let n=e.attributes;for(let i in n)if(Object.prototype.hasOwnProperty.call(n,i)){let o=t(n[i],i);if(c(o))return o}};ht.techniqueUniform=function(e,t){let n=e.uniforms;for(let i in n)if(Object.prototype.hasOwnProperty.call(n,i)){let o=t(n[i],i);if(c(o))return o}};ht.techniqueParameter=function(e,t){let n=e.parameters;for(let i in n)if(Object.prototype.hasOwnProperty.call(n,i)){let o=t(n[i],i);if(c(o))return o}};ht.technique=function(e,t){return To(e,"KHR_techniques_webgl")?ht.object(e.extensions.KHR_techniques_webgl.techniques,t):ht.topLevel(e,"techniques",t)};ht.texture=function(e,t){return ht.topLevel(e,"textures",t)};var Ce=ht;function Zne(e){switch(e){case"SCALAR":return 1;case"VEC2":return 2;case"VEC3":return 3;case"VEC4":case"MAT2":return 4;case"MAT3":return 9;case"MAT4":return 16}}var SA=Zne;function $ne(e,t){let n=t.bufferView;if(c(n)){let i=e.bufferViews[n];if(c(i.byteStride)&&i.byteStride>0)return i.byteStride}return V.getSizeInBytes(t.componentType)*SA(t.type)}var Hc=$ne;function eie(e){Ce.accessor(e,function(n){c(n.bufferView)&&(n.byteOffset=n.byteOffset??0)}),Ce.bufferView(e,function(n){c(n.buffer)&&(n.byteOffset=n.byteOffset??0)}),Ce.mesh(e,function(n){Ce.meshPrimitive(n,function(i){if(i.mode=i.mode??W.TRIANGLES,!c(i.material)){c(e.materials)||(e.materials=[]);let o={name:"default"};i.material=Fr(e.materials,o)}})}),Ce.accessorContainingVertexAttributeData(e,function(n){let i=e.accessors[n],o=i.bufferView;if(i.normalized=i.normalized??!1,c(o)){let r=e.bufferViews[o];r.byteStride=Hc(e,i),r.target=W.ARRAY_BUFFER}}),Ce.accessorContainingIndexData(e,function(n){let o=e.accessors[n].bufferView;if(c(o)){let r=e.bufferViews[o];r.target=W.ELEMENT_ARRAY_BUFFER}}),Ce.material(e,function(n){let i=n.extensions??{},o=i.KHR_materials_common;if(c(o)){let A=o.technique,l=c(o.values)?o.values:{};o.values=l,l.ambient=c(l.ambient)?l.ambient:[0,0,0,1],l.emission=c(l.emission)?l.emission:[0,0,0,1],l.transparency=l.transparency??1,A!=="CONSTANT"&&(l.diffuse=c(l.diffuse)?l.diffuse:[0,0,0,1],A!=="LAMBERT"&&(l.specular=c(l.specular)?l.specular:[0,0,0,1],l.shininess=l.shininess??0)),o.transparent=o.transparent??!1,o.doubleSided=o.doubleSided??!1;return}n.emissiveFactor=n.emissiveFactor??[0,0,0],n.alphaMode=n.alphaMode??"OPAQUE",n.doubleSided=n.doubleSided??!1,n.alphaMode==="MASK"&&(n.alphaCutoff=n.alphaCutoff??.5);let r=i.KHR_techniques_webgl;c(r)&&Ce.materialValue(n,function(A){c(A.index)&&pd(A)}),pd(n.emissiveTexture),pd(n.normalTexture),pd(n.occlusionTexture);let a=n.pbrMetallicRoughness;c(a)&&(a.baseColorFactor=a.baseColorFactor??[1,1,1,1],a.metallicFactor=a.metallicFactor??1,a.roughnessFactor=a.roughnessFactor??1,pd(a.baseColorTexture),pd(a.metallicRoughnessTexture));let s=i.KHR_materials_pbrSpecularGlossiness;c(s)&&(s.diffuseFactor=s.diffuseFactor??[1,1,1,1],s.specularFactor=s.specularFactor??[1,1,1],s.glossinessFactor=s.glossinessFactor??1,pd(s.specularGlossinessTexture))}),Ce.animation(e,function(n){Ce.animationSampler(n,function(i){i.interpolation=i.interpolation??"LINEAR"})});let t=tie(e);return Ce.node(e,function(n,i){c(t[i])||c(n.translation)||c(n.rotation)||c(n.scale)?(n.translation=n.translation??[0,0,0],n.rotation=n.rotation??[0,0,0,1],n.scale=n.scale??[1,1,1]):n.matrix=n.matrix??[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}),Ce.sampler(e,function(n){n.wrapS=n.wrapS??W.REPEAT,n.wrapT=n.wrapT??W.REPEAT}),c(e.scenes)&&!c(e.scene)&&(e.scene=0),e}function tie(e){let t={};return Ce.animation(e,function(n){Ce.animationChannel(n,function(i){let o=i.target,r=o.node,a=o.path;(a==="translation"||a==="rotation"||a==="scale")&&(t[r]=!0)})}),t}function pd(e){c(e)&&(e.texCoord=e.texCoord??0)}var O1=eie;function nie(e){return Ce.shader(e,function(t){sI(t)}),Ce.buffer(e,function(t){sI(t)}),Ce.image(e,function(t){sI(t)}),sI(e),e}function sI(e){e.extras=c(e.extras)?e.extras:{},e.extras._pipeline=c(e.extras._pipeline)?e.extras._pipeline:{}}var Bg=nie;function iie(e,t){let n=e.extensionsRequired;if(c(n)){let i=n.indexOf(t);i>=0&&n.splice(i,1),n.length===0&&delete e.extensionsRequired}}var k1=iie;function oie(e,t){let n=e.extensionsUsed;if(c(n)){let i=n.indexOf(t);i>=0&&n.splice(i,1),k1(e,t),n.length===0&&delete e.extensionsUsed}}var cI=oie;var rie=4;function aie(e){if(Nu(e)!=="glTF")throw new ae("File is not valid binary glTF");let n=U1(e,0,5),i=n[1];if(i!==1&&i!==2)throw new ae("Binary glTF version is not 1 or 2");return i===1?sie(e,n):cie(e,n)}function U1(e,t,n){let i=new DataView(e.buffer),o=new Array(n);for(let r=0;r<n;++r)o[r]=i.getUint32(e.byteOffset+t+r*rie,!0);return o}function sie(e,t){let n=t[2],i=t[3];if(t[4]!==0)throw new ae("Binary glTF scene format is not JSON");let r=20,a=r+i,s=Uc(e,r,i),A=JSON.parse(s);Bg(A);let l=e.subarray(a,n),d=A.buffers;if(c(d)&&Object.keys(d).length>0){let m=d.binary_glTF??d.KHR_binary_glTF;c(m)&&(m.extras._pipeline.source=l,delete m.uri)}return cI(A,"KHR_binary_glTF"),A}function cie(e,t){let n=t[2],i=12,o,r;for(;i<n;){let a=U1(e,i,2),s=a[0],A=a[1];i+=8;let l=e.subarray(i,i+s);if(i+=s,A===1313821514){let d=Uc(l);o=JSON.parse(d),Bg(o)}else A===5130562&&(r=l)}if(c(o)&&c(r)){let a=o.buffers;if(c(a)&&a.length>0){let s=a[0];s.extras._pipeline.source=r}}return o}var z1=aie;function Aie(e){return Ce.shader(e,function(t){AI(t)}),Ce.buffer(e,function(t){AI(t)}),Ce.image(e,function(t){AI(t)}),AI(e),e}function AI(e){c(e.extras)&&(c(e.extras._pipeline)&&delete e.extras._pipeline,Object.keys(e.extras).length===0&&delete e.extras)}var G1=Aie;function lie(e,t){let n=e.extensionsUsed;c(n)||(n=[],e.extensionsUsed=n),Fr(n,t,!0)}var Ql=lie;function uie(e){switch(e){case V.BYTE:return function(t,n,i,o,r){for(let a=0;a<i;++a)r[a]=t.getInt8(n+a*o)};case V.UNSIGNED_BYTE:return function(t,n,i,o,r){for(let a=0;a<i;++a)r[a]=t.getUint8(n+a*o)};case V.SHORT:return function(t,n,i,o,r){for(let a=0;a<i;++a)r[a]=t.getInt16(n+a*o,!0)};case V.UNSIGNED_SHORT:return function(t,n,i,o,r){for(let a=0;a<i;++a)r[a]=t.getUint16(n+a*o,!0)};case V.INT:return function(t,n,i,o,r){for(let a=0;a<i;++a)r[a]=t.getInt32(n+a*o,!0)};case V.UNSIGNED_INT:return function(t,n,i,o,r){for(let a=0;a<i;++a)r[a]=t.getUint32(n+a*o,!0)};case V.FLOAT:return function(t,n,i,o,r){for(let a=0;a<i;++a)r[a]=t.getFloat32(n+a*o,!0)};case V.DOUBLE:return function(t,n,i,o,r){for(let a=0;a<i;++a)r[a]=t.getFloat64(n+a*o,!0)}}}var Oh=uie;function fie(e,t){let n=e.bufferViews,i=e.buffers,o=t.bufferView,r=SA(t.type);if(!c(t.bufferView))return{min:new Array(r).fill(0),max:new Array(r).fill(0)};let a=new Array(r).fill(Number.POSITIVE_INFINITY),s=new Array(r).fill(Number.NEGATIVE_INFINITY),A=n[o],l=A.buffer,m=i[l].extras._pipeline.source,p=t.count,g=Hc(e,t),h=t.byteOffset+A.byteOffset+m.byteOffset,C=t.componentType,_=V.getSizeInBytes(C),I=new DataView(m.buffer),b=new Array(r),x=Oh(C);for(let T=0;T<p;T++){x(I,h,r,_,b);for(let w=0;w<r;w++){let R=b[w];a[w]=Math.min(a[w],R),s[w]=Math.max(s[w],R)}h+=g}return{min:a,max:s}}var lI=fie;var die=[W.FUNC_ADD,W.FUNC_ADD],hie=[W.ONE,W.ZERO,W.ONE,W.ZERO];function H1(e,t){let n=e.enable;return c(n)?n.indexOf(t)>-1:!1}var mie=[W.ZERO,W.ONE,W.SRC_COLOR,W.ONE_MINUS_SRC_COLOR,W.SRC_ALPHA,W.ONE_MINUS_SRC_ALPHA,W.DST_ALPHA,W.ONE_MINUS_DST_ALPHA,W.DST_COLOR,W.ONE_MINUS_DST_COLOR];function pie(e,t){if(!c(e))return t;for(let n=0;n<4;n++)if(mie.indexOf(e[n])===-1)return t;return e}function gie(e){let t={},n={},i=e.techniques;return c(i)&&(Ce.technique(e,function(o,r){let a=o.states;if(c(a)){let s=n[r]={};if(H1(a,W.BLEND)){s.alphaMode="BLEND";let A=a.functions;c(A)&&(c(A.blendEquationSeparate)||c(A.blendFuncSeparate))&&(t[r]={blendEquation:A.blendEquationSeparate??die,blendFactors:pie(A.blendFuncSeparate,hie)})}H1(a,W.CULL_FACE)||(s.doubleSided=!0),delete o.states}}),Object.keys(t).length>0&&(c(e.extensions)||(e.extensions={}),Ql(e,"KHR_blend")),Ce.material(e,function(o){if(c(o.technique)){let r=n[o.technique];Ce.objectLegacy(r,function(s,A){o[A]=s});let a=t[o.technique];c(a)&&(c(o.extensions)||(o.extensions={}),o.extensions.KHR_blend=a)}})),e}var V1=gie;function Cie(e,t){let n=e.extensionsRequired;c(n)||(n=[],e.extensionsRequired=n),Fr(n,t,!0),Ql(e,t)}var j1=Cie;function Eie(e){let t=e.techniques,n={},i={},o={};if(c(t)){let r={programs:[],shaders:[],techniques:[]},a=e.glExtensionsUsed;delete e.glExtensionsUsed,Ce.technique(e,function(s,A){let l={name:s.name,program:void 0,attributes:{},uniforms:{}},d;if(Ce.techniqueAttribute(s,function(m,p){d=s.parameters[m],l.attributes[p]={semantic:d.semantic}}),Ce.techniqueUniform(s,function(m,p){d=s.parameters[m],l.uniforms[p]={count:d.count,node:d.node,type:d.type,semantic:d.semantic,value:d.value},c(n[A])||(n[A]={}),n[A][m]=p}),c(o[s.program]))l.program=o[s.program];else{let m=e.programs[s.program],p={name:m.name,fragmentShader:void 0,vertexShader:void 0,glExtensions:a},g=e.shaders[m.fragmentShader];p.fragmentShader=Fr(r.shaders,g,!0);let h=e.shaders[m.vertexShader];p.vertexShader=Fr(r.shaders,h,!0),l.program=Fr(r.programs,p),o[s.program]=l.program}i[A]=Fr(r.techniques,l)}),r.techniques.length>0&&(c(e.extensions)||(e.extensions={}),e.extensions.KHR_techniques_webgl=r,Ql(e,"KHR_techniques_webgl"),j1(e,"KHR_techniques_webgl"))}return Ce.material(e,function(r){if(c(r.technique)){let a={technique:i[r.technique]};Ce.objectLegacy(r.values,function(s,A){c(a.values)||(a.values={});let l=n[r.technique][A];c(l)&&(a.values[l]=s)}),c(r.extensions)||(r.extensions={}),r.extensions.KHR_techniques_webgl=a}delete r.technique,delete r.values}),delete e.techniques,delete e.programs,delete e.shaders,e}var Y1=Eie;function _ie(e,t){$n.typeOf.object("material",e),$n.defined("handler",t);let n=e.pbrMetallicRoughness;if(c(n)){if(c(n.baseColorTexture)){let r=n.baseColorTexture,a=t(r.index,r);if(c(a))return a}if(c(n.metallicRoughnessTexture)){let r=n.metallicRoughnessTexture,a=t(r.index,r);if(c(a))return a}}let{extensions:i}=e;if(c(i)){let r=i.KHR_materials_pbrSpecularGlossiness;if(c(r)){if(c(r.diffuseTexture)){let A=r.diffuseTexture,l=t(A.index,A);if(c(l))return l}if(c(r.specularGlossinessTexture)){let A=r.specularGlossinessTexture,l=t(A.index,A);if(c(l))return l}}let a=i.KHR_materials_specular;if(c(a)){let{specularTexture:A,specularColorTexture:l}=a;if(c(A)){let d=t(A.index,A);if(c(d))return d}if(c(l)){let d=t(l.index,l);if(c(d))return d}}let s=i.KHR_materials_common;if(c(s)&&c(s.values)){let{diffuse:A,ambient:l,emission:d,specular:m}=s.values;if(c(A)&&c(A.index)){let p=t(A.index,A);if(c(p))return p}if(c(l)&&c(l.index)){let p=t(l.index,l);if(c(p))return p}if(c(d)&&c(d.index)){let p=t(d.index,d);if(c(p))return p}if(c(m)&&c(m.index)){let p=t(m.index,m);if(c(p))return p}}}let o=Ce.materialValue(e,function(r){if(c(r.index)){let a=t(r.index,r);if(c(a))return a}});if(c(o))return o;if(c(e.emissiveTexture)){let r=e.emissiveTexture,a=t(r.index,r);if(c(a))return a}if(c(e.normalTexture)){let r=e.normalTexture,a=t(r.index,r);if(c(a))return a}if(c(e.occlusionTexture)){let r=e.occlusionTexture,a=t(r.index,r);if(c(a))return a}}var Fx=_ie;var W1=["mesh","node","material","accessor","bufferView","buffer","texture","sampler","image"];function Iie(e,t){return t=t??W1,W1.forEach(function(n){t.indexOf(n)>-1&&bie(e,n)}),e}var yie={accessor:"accessors",buffer:"buffers",bufferView:"bufferViews",image:"images",node:"nodes",material:"materials",mesh:"meshes",sampler:"samplers",texture:"textures"};function bie(e,t){let n=yie[t],i=e[n];if(c(i)){let o=0,r=DA[t](e),a=i.length;for(let s=0;s<a;++s)r[s]||(wA[t](e,s-o),o++)}}function wA(){}wA.accessor=function(e,t){e.accessors.splice(t,1),Ce.mesh(e,function(i){Ce.meshPrimitive(i,function(o){Ce.meshPrimitiveAttribute(o,function(s,A){s>t&&o.attributes[A]--}),Ce.meshPrimitiveTarget(o,function(s){Ce.meshPrimitiveTargetAttribute(s,function(A,l){A>t&&s[l]--})});let r=o.indices;c(r)&&r>t&&o.indices--;let a=o.extensions;c(a)&&c(a.CESIUM_primitive_outline)&&a.CESIUM_primitive_outline.indices>t&&--a.CESIUM_primitive_outline.indices})}),Ce.skin(e,function(i){c(i.inverseBindMatrices)&&i.inverseBindMatrices>t&&i.inverseBindMatrices--}),Ce.animation(e,function(i){Ce.animationSampler(i,function(o){c(o.input)&&o.input>t&&o.input--,c(o.output)&&o.output>t&&o.output--})})};wA.buffer=function(e,t){e.buffers.splice(t,1),Ce.bufferView(e,function(i){c(i.buffer)&&i.buffer>t&&i.buffer--,c(i.extensions)&&c(i.extensions.EXT_meshopt_compression)&&i.extensions.EXT_meshopt_compression.buffer--})};wA.bufferView=function(e,t){if(e.bufferViews.splice(t,1),Ce.accessor(e,function(i){c(i.bufferView)&&i.bufferView>t&&i.bufferView--}),Ce.shader(e,function(i){c(i.bufferView)&&i.bufferView>t&&i.bufferView--}),Ce.image(e,function(i){c(i.bufferView)&&i.bufferView>t&&i.bufferView--}),To(e,"KHR_draco_mesh_compression")&&Ce.mesh(e,function(i){Ce.meshPrimitive(i,function(o){c(o.extensions)&&c(o.extensions.KHR_draco_mesh_compression)&&o.extensions.KHR_draco_mesh_compression.bufferView>t&&o.extensions.KHR_draco_mesh_compression.bufferView--})}),To(e,"EXT_feature_metadata")){let o=e.extensions.EXT_feature_metadata.featureTables;for(let r in o)if(o.hasOwnProperty(r)){let s=o[r].properties;if(c(s)){for(let A in s)if(s.hasOwnProperty(A)){let l=s[A];c(l.bufferView)&&l.bufferView>t&&l.bufferView--,c(l.arrayOffsetBufferView)&&l.arrayOffsetBufferView>t&&l.arrayOffsetBufferView--,c(l.stringOffsetBufferView)&&l.stringOffsetBufferView>t&&l.stringOffsetBufferView--}}}}if(To(e,"EXT_structural_metadata")){let o=e.extensions.EXT_structural_metadata.propertyTables;if(c(o)){let r=o.length;for(let a=0;a<r;++a){let A=o[a].properties;for(let l in A)if(A.hasOwnProperty(l)){let d=A[l];c(d.values)&&d.values>t&&d.values--,c(d.arrayOffsets)&&d.arrayOffsets>t&&d.arrayOffsets--,c(d.stringOffsets)&&d.stringOffsets>t&&d.stringOffsets--}}}}};wA.image=function(e,t){e.images.splice(t,1),Ce.texture(e,function(i){c(i.source)&&i.source>t&&--i.source;let o=i.extensions;c(o)&&c(o.EXT_texture_webp)&&o.EXT_texture_webp.source>t?--i.extensions.EXT_texture_webp.source:c(o)&&c(o.KHR_texture_basisu)&&o.KHR_texture_basisu.source>t&&--i.extensions.KHR_texture_basisu.source})};wA.mesh=function(e,t){e.meshes.splice(t,1),Ce.node(e,function(i){c(i.mesh)&&(i.mesh>t?i.mesh--:i.mesh===t&&delete i.mesh)})};wA.node=function(e,t){e.nodes.splice(t,1),Ce.skin(e,function(i){c(i.skeleton)&&i.skeleton>t&&i.skeleton--,i.joints=i.joints.map(function(o){return o>t?o-1:o})}),Ce.animation(e,function(i){Ce.animationChannel(i,function(o){c(o.target)&&c(o.target.node)&&o.target.node>t&&o.target.node--})}),Ce.technique(e,function(i){Ce.techniqueUniform(i,function(o){c(o.node)&&o.node>t&&o.node--})}),Ce.node(e,function(i){c(i.children)&&(i.children=i.children.filter(function(o){return o!==t}).map(function(o){return o>t?o-1:o}))}),Ce.scene(e,function(i){i.nodes=i.nodes.filter(function(o){return o!==t}).map(function(o){return o>t?o-1:o})})};wA.material=function(e,t){e.materials.splice(t,1),Ce.mesh(e,function(i){Ce.meshPrimitive(i,function(o){c(o.material)&&o.material>t&&o.material--})})};wA.sampler=function(e,t){e.samplers.splice(t,1),Ce.texture(e,function(i){c(i.sampler)&&i.sampler>t&&--i.sampler})};wA.texture=function(e,t){if(e.textures.splice(t,1),Ce.material(e,function(i){Fx(i,function(o,r){r.index>t&&--r.index})}),To(e,"EXT_feature_metadata")){Ce.mesh(e,function(r){Ce.meshPrimitive(r,function(a){let s=a.extensions;if(c(s)&&c(s.EXT_feature_metadata)){let l=s.EXT_feature_metadata.featureIdTextures;if(c(l)){let d=l.length;for(let m=0;m<d;++m){let g=l[m].featureIds.texture;g.index>t&&--g.index}}}})});let o=e.extensions.EXT_feature_metadata.featureTextures;for(let r in o)if(o.hasOwnProperty(r)){let s=o[r].properties;if(c(s)){for(let A in s)if(s.hasOwnProperty(A)){let d=s[A].texture;d.index>t&&--d.index}}}}if(To(e,"EXT_mesh_features")&&Ce.mesh(e,function(i){Ce.meshPrimitive(i,function(o){let r=o.extensions;if(c(r)&&c(r.EXT_mesh_features)){let s=r.EXT_mesh_features.featureIds;if(c(s)){let A=s.length;for(let l=0;l<A;++l){let d=s[l];c(d.texture)&&d.texture.index>t&&--d.texture.index}}}})}),To(e,"EXT_structural_metadata")){let o=e.extensions.EXT_structural_metadata.propertyTextures;if(c(o)){let r=o.length;for(let a=0;a<r;++a){let A=o[a].properties;for(let l in A)if(A.hasOwnProperty(l)){let d=A[l];d.index>t&&--d.index}}}}};function DA(){}DA.accessor=function(e){let t={};return Ce.mesh(e,function(n){Ce.meshPrimitive(n,function(i){Ce.meshPrimitiveAttribute(i,function(r){t[r]=!0}),Ce.meshPrimitiveTarget(i,function(r){Ce.meshPrimitiveTargetAttribute(r,function(a){t[a]=!0})});let o=i.indices;c(o)&&(t[o]=!0)})}),Ce.skin(e,function(n){c(n.inverseBindMatrices)&&(t[n.inverseBindMatrices]=!0)}),Ce.animation(e,function(n){Ce.animationSampler(n,function(i){c(i.input)&&(t[i.input]=!0),c(i.output)&&(t[i.output]=!0)})}),To(e,"EXT_mesh_gpu_instancing")&&Ce.node(e,function(n){c(n.extensions)&&c(n.extensions.EXT_mesh_gpu_instancing)&&Object.keys(n.extensions.EXT_mesh_gpu_instancing.attributes).forEach(function(i){let o=n.extensions.EXT_mesh_gpu_instancing.attributes[i];t[o]=!0})}),To(e,"CESIUM_primitive_outline")&&Ce.mesh(e,function(n){Ce.meshPrimitive(n,function(i){let o=i.extensions;if(c(o)&&c(o.CESIUM_primitive_outline)){let a=o.CESIUM_primitive_outline.indices;c(a)&&(t[a]=!0)}})}),t};DA.buffer=function(e){let t={};return Ce.bufferView(e,function(n){c(n.buffer)&&(t[n.buffer]=!0),c(n.extensions)&&c(n.extensions.EXT_meshopt_compression)&&(t[n.extensions.EXT_meshopt_compression.buffer]=!0)}),t};DA.bufferView=function(e){let t={};if(Ce.accessor(e,function(n){c(n.bufferView)&&(t[n.bufferView]=!0)}),Ce.shader(e,function(n){c(n.bufferView)&&(t[n.bufferView]=!0)}),Ce.image(e,function(n){c(n.bufferView)&&(t[n.bufferView]=!0)}),To(e,"KHR_draco_mesh_compression")&&Ce.mesh(e,function(n){Ce.meshPrimitive(n,function(i){c(i.extensions)&&c(i.extensions.KHR_draco_mesh_compression)&&(t[i.extensions.KHR_draco_mesh_compression.bufferView]=!0)})}),To(e,"EXT_feature_metadata")){let i=e.extensions.EXT_feature_metadata.featureTables;for(let o in i)if(i.hasOwnProperty(o)){let a=i[o].properties;if(c(a)){for(let s in a)if(a.hasOwnProperty(s)){let A=a[s];c(A.bufferView)&&(t[A.bufferView]=!0),c(A.arrayOffsetBufferView)&&(t[A.arrayOffsetBufferView]=!0),c(A.stringOffsetBufferView)&&(t[A.stringOffsetBufferView]=!0)}}}}if(To(e,"EXT_structural_metadata")){let i=e.extensions.EXT_structural_metadata.propertyTables;if(c(i)){let o=i.length;for(let r=0;r<o;++r){let s=i[r].properties;for(let A in s)if(s.hasOwnProperty(A)){let l=s[A];c(l.values)&&(t[l.values]=!0),c(l.arrayOffsets)&&(t[l.arrayOffsets]=!0),c(l.stringOffsets)&&(t[l.stringOffsets]=!0)}}}}return t};DA.image=function(e){let t={};return Ce.texture(e,function(n){c(n.source)&&(t[n.source]=!0),c(n.extensions)&&c(n.extensions.EXT_texture_webp)?t[n.extensions.EXT_texture_webp.source]=!0:c(n.extensions)&&c(n.extensions.KHR_texture_basisu)&&(t[n.extensions.KHR_texture_basisu.source]=!0)}),t};DA.mesh=function(e){let t={};return Ce.node(e,function(n){if(c(n.mesh&&c(e.meshes))){let i=e.meshes[n.mesh];c(i)&&c(i.primitives)&&i.primitives.length>0&&(t[n.mesh]=!0)}}),t};function q1(e,t,n){let i=e.nodes[t];return c(i.mesh)||c(i.camera)||c(i.skin)||c(i.weights)||c(i.extras)||c(i.extensions)&&Object.keys(i.extensions).length!==0||c(n[t])?!1:!c(i.children)||i.children.filter(function(o){return!q1(e,o,n)}).length===0}DA.node=function(e){let t={};return Ce.skin(e,function(n){c(n.skeleton)&&(t[n.skeleton]=!0),Ce.skinJoint(n,function(i){t[i]=!0})}),Ce.animation(e,function(n){Ce.animationChannel(n,function(i){c(i.target)&&c(i.target.node)&&(t[i.target.node]=!0)})}),Ce.technique(e,function(n){Ce.techniqueUniform(n,function(i){c(i.node)&&(t[i.node]=!0)})}),Ce.node(e,function(n,i){q1(e,i,t)||(t[i]=!0)}),t};DA.material=function(e){let t={};return Ce.mesh(e,function(n){Ce.meshPrimitive(n,function(i){c(i.material)&&(t[i.material]=!0)})}),t};DA.texture=function(e){let t={};if(Ce.material(e,function(n){Fx(n,function(i){t[i]=!0})}),To(e,"EXT_feature_metadata")){Ce.mesh(e,function(o){Ce.meshPrimitive(o,function(r){let a=r.extensions;if(c(a)&&c(a.EXT_feature_metadata)){let A=a.EXT_feature_metadata.featureIdTextures;if(c(A)){let l=A.length;for(let d=0;d<l;++d){let p=A[d].featureIds.texture;t[p.index]=!0}}}})});let i=e.extensions.EXT_feature_metadata.featureTextures;for(let o in i)if(i.hasOwnProperty(o)){let a=i[o].properties;if(c(a)){for(let s in a)if(a.hasOwnProperty(s)){let l=a[s].texture;t[l.index]=!0}}}}if(To(e,"EXT_mesh_features")&&Ce.mesh(e,function(n){Ce.meshPrimitive(n,function(i){let o=i.extensions;if(c(o)&&c(o.EXT_mesh_features)){let a=o.EXT_mesh_features.featureIds;if(c(a)){let s=a.length;for(let A=0;A<s;++A){let l=a[A];c(l.texture)&&(t[l.texture.index]=!0)}}}})}),To(e,"EXT_structural_metadata")){let i=e.extensions.EXT_structural_metadata.propertyTextures;if(c(i)){let o=i.length;for(let r=0;r<o;++r){let s=i[r].properties;for(let A in s)if(s.hasOwnProperty(A)){let l=s[A];t[l.index]=!0}}}}return t};DA.sampler=function(e){let t={};return Ce.texture(e,function(n){c(n.sampler)&&(t[n.sampler]=!0)}),t};var J1=Iie;function Bie(e,t){let n={byteLength:t.length,extras:{_pipeline:{source:t}}},o={buffer:Fr(e.buffers,n),byteOffset:0,byteLength:t.length};return Fr(e.bufferViews,o)}var K1=Bie;function xie(e,t){let n=Hc(e,t),i=V.getSizeInBytes(t.componentType),o=SA(t.type),r=t.count,a=new Array(o*r);if(!c(t.bufferView))return a.fill(0);let s=e.bufferViews[t.bufferView],A=e.buffers[s.buffer].extras._pipeline.source,l=t.byteOffset+s.byteOffset+A.byteOffset,d=new DataView(A.buffer),m=new Array(o),p=Oh(t.componentType);for(let g=0;g<r;++g){p(d,l,o,i,m);for(let h=0;h<o;++h)a[g*o+h]=m[h];l+=n}return a}var X1=xie;function Tie(e){let t;return Ce.accessorWithSemantic(e,"JOINTS_0",function(n){let i=e.accessors[n];t=i.componentType,t===W.BYTE?uI(e,i,V.UNSIGNED_BYTE):t!==W.UNSIGNED_BYTE&&t!==W.UNSIGNED_SHORT&&uI(e,i,V.UNSIGNED_SHORT)}),Ce.accessorWithSemantic(e,"WEIGHTS_0",function(n){let i=e.accessors[n];t=i.componentType,t===W.BYTE?uI(e,i,V.UNSIGNED_BYTE):t===W.SHORT&&uI(e,i,V.UNSIGNED_SHORT)}),e}function uI(e,t,n){let i=V.createTypedArray(n,X1(e,t)),o=new Uint8Array(i.buffer);t.bufferView=K1(e,o),t.componentType=n,t.byteOffset=0}var Z1=Tie;function Sie(e,t){return cI(e,t),t==="CESIUM_RTC"&&wie(e),Ox(e,t)}function wie(e){Ce.technique(e,function(t){Ce.techniqueUniform(t,function(n){n.semantic==="CESIUM_RTC_MODELVIEW"&&(n.semantic="MODELVIEW")})})}function Ox(e,t){if(Array.isArray(e)){let n=e.length;for(let i=0;i<n;++i)Ox(e[i],t)}else if(e!==null&&typeof e=="object"&&e.constructor===Object){let n=e.extensions,i;c(n)&&(i=n[t],c(i)&&(delete n[t],Object.keys(n).length===0&&delete e.extensions));for(let o in e)Object.prototype.hasOwnProperty.call(e,o)&&Ox(e[o],t);return i}}var fI=Sie;var dI={.8:Pie,"1.0":toe,"2.0":void 0};function Die(e,t){t=t??{};let n=t.targetVersion,i=e.version;e.asset=e.asset??{version:"1.0"},e.asset.version=e.asset.version??"1.0",i=(i??e.asset.version).toString(),Object.prototype.hasOwnProperty.call(dI,i)||(c(i)&&(i=i.substring(0,3)),Object.prototype.hasOwnProperty.call(dI,i)||(i="1.0"));let o=dI[i];for(;c(o)&&i!==n;)o(e,t),i=e.asset.version,o=dI[i];return t.keepLegacyExtensions||(ooe(e,t),roe(e)),e}function t2(e){let t=e.materials;for(let n in t)if(Object.prototype.hasOwnProperty.call(t,n)){let i=t[n],o=i.instanceTechnique;c(o)&&(i.technique=o.technique,i.values=o.values,delete i.instanceTechnique)}}function Qie(e){let t=e.meshes;for(let n in t)if(Object.prototype.hasOwnProperty.call(t,n)){let o=t[n].primitives;if(c(o)){let r=o.length;for(let a=0;a<r;++a){let s=o[a],A=s.primitive??W.TRIANGLES;s.mode=s.mode??A,delete s.primitive}}}}function Rie(e){let t=e.nodes,n=new f,i=new gt;for(let o in t)if(Object.prototype.hasOwnProperty.call(t,o)){let r=t[o];if(c(r.rotation)){let s=r.rotation;f.fromArray(s,0,n),gt.fromAxisAngle(n,s[3],i),r.rotation=[i.x,i.y,i.z,i.w]}let a=r.instanceSkin;c(a)&&(r.skeletons=a.skeletons,r.skin=a.skin,r.meshes=a.meshes,delete r.instanceSkin)}}function vie(e){let t=e.animations,n=e.accessors,i=e.bufferViews,o=e.buffers,r={},a=new f,s=new gt;for(let A in t)if(Object.prototype.hasOwnProperty.call(t,A)){let l=t[A],d=l.channels,m=l.parameters,p=l.samplers;if(c(d)){let g=d.length;for(let h=0;h<g;++h){let C=d[h];if(C.target.path==="rotation"){let _=m[p[C.sampler].output];if(c(r[_]))continue;r[_]=!0;let I=n[_],b=i[I.bufferView],T=o[b.buffer].extras._pipeline.source,w=T.byteOffset+b.byteOffset+I.byteOffset,R=I.componentType,z=I.count,M=SA(I.type),N=I.count*M,O=V.createArrayBufferView(R,T.buffer,w,N);for(let u=0;u<z;u++){let E=u*M;f.unpack(O,E,a);let y=O[E+3];gt.fromAxisAngle(a,y,s),gt.pack(s,O,E)}}}}}}function Mie(e){let t=e.techniques;for(let n in t)if(Object.prototype.hasOwnProperty.call(t,n)){let i=t[n],o=i.passes;if(c(o)){let r=i.pass??"defaultPass";if(Object.prototype.hasOwnProperty.call(o,r)){let a=o[r],s=a.instanceProgram;i.attributes=i.attributes??s.attributes,i.program=i.program??s.program,i.uniforms=i.uniforms??s.uniforms,i.states=i.states??a.states}delete i.passes,delete i.pass}}}function Pie(e){c(e.asset)||(e.asset={});let t=e.asset;if(t.version="1.0",typeof t.profile=="string"){let n=t.profile.split(" ");t.profile={api:n[0],version:n[1]}}else t.profile={};if(c(e.version)&&delete e.version,t2(e),Qie(e),Rie(e),vie(e),Mie(e),c(e.allExtensions)&&(e.extensionsUsed=e.allExtensions,delete e.allExtensions),c(e.lights)){let n=e.extensions??{};e.extensions=n;let i=n.KHR_materials_common??{};n.KHR_materials_common=i,i.lights=e.lights,delete e.lights,Ql(e,"KHR_materials_common")}}function Nie(e){let t=e.animations;for(let n in t)if(Object.prototype.hasOwnProperty.call(t,n)){let i=t[n],o=i.parameters;if(c(o)){let r=i.samplers;for(let a in r)if(Object.prototype.hasOwnProperty.call(r,a)){let s=r[a];s.input=o[s.input],s.output=o[s.output]}delete i.parameters}}}function $1(e,t){let n=[];for(let i in e)if(Object.prototype.hasOwnProperty.call(e,i)){let o=e[i];t[i]=n.length,n.push(o),c(o.name)||(o.name=i)}return n}function Lie(e){let t,n={accessors:{},animations:{},buffers:{},bufferViews:{},cameras:{},images:{},materials:{},meshes:{},nodes:{},programs:{},samplers:{},scenes:{},shaders:{},skins:{},textures:{},techniques:{}},i,o={},r=e.nodes;for(let a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i=r[a].jointName,c(i)&&(o[i]=a));for(let a in e)if(Object.prototype.hasOwnProperty.call(e,a)&&c(n[a])){let s={},A=e[a];e[a]=$1(A,s),n[a]=s}for(i in o)Object.prototype.hasOwnProperty.call(o,i)&&(o[i]=n.nodes[o[i]]);c(e.scene)&&(e.scene=n.scenes[e.scene]),Ce.bufferView(e,function(a){c(a.buffer)&&(a.buffer=n.buffers[a.buffer])}),Ce.accessor(e,function(a){c(a.bufferView)&&(a.bufferView=n.bufferViews[a.bufferView])}),Ce.shader(e,function(a){let s=a.extensions;if(c(s)){let A=s.KHR_binary_glTF;c(A)&&(a.bufferView=n.bufferViews[A.bufferView],delete s.KHR_binary_glTF),Object.keys(s).length===0&&delete a.extensions}}),Ce.program(e,function(a){c(a.vertexShader)&&(a.vertexShader=n.shaders[a.vertexShader]),c(a.fragmentShader)&&(a.fragmentShader=n.shaders[a.fragmentShader])}),Ce.technique(e,function(a){c(a.program)&&(a.program=n.programs[a.program]),Ce.techniqueParameter(a,function(s){c(s.node)&&(s.node=n.nodes[s.node]);let A=s.value;typeof A=="string"&&(s.value={index:n.textures[A]})})}),Ce.mesh(e,function(a){Ce.meshPrimitive(a,function(s){c(s.indices)&&(s.indices=n.accessors[s.indices]),Ce.meshPrimitiveAttribute(s,function(A,l){s.attributes[l]=n.accessors[A]}),c(s.material)&&(s.material=n.materials[s.material])})}),Ce.node(e,function(a){let s=a.children;if(c(s)){let A=s.length;for(t=0;t<A;++t)s[t]=n.nodes[s[t]]}if(c(a.meshes)){let A=a.meshes,l=A.length;if(l>0)for(a.mesh=n.meshes[A[0]],t=1;t<l;++t){let d={mesh:n.meshes[A[t]]},m=Fr(e.nodes,d);c(s)||(s=[],a.children=s),s.push(m)}delete a.meshes}if(c(a.camera)&&(a.camera=n.cameras[a.camera]),c(a.skin)&&(a.skin=n.skins[a.skin]),c(a.skeletons)){let A=a.skeletons;if(A.length>0&&c(a.skin)){let d=e.skins[a.skin];d.skeleton=n.nodes[A[0]]}delete a.skeletons}c(a.jointName)&&delete a.jointName}),Ce.skin(e,function(a){c(a.inverseBindMatrices)&&(a.inverseBindMatrices=n.accessors[a.inverseBindMatrices]);let s=a.jointNames;if(c(s)){let A=[],l=s.length;for(t=0;t<l;++t)A[t]=o[s[t]];a.joints=A,delete a.jointNames}}),Ce.scene(e,function(a){let s=a.nodes;if(c(s)){let A=s.length;for(t=0;t<A;++t)s[t]=n.nodes[s[t]]}}),Ce.animation(e,function(a){let s={};a.samplers=$1(a.samplers,s),Ce.animationSampler(a,function(A){A.input=n.accessors[A.input],A.output=n.accessors[A.output]}),Ce.animationChannel(a,function(A){A.sampler=s[A.sampler];let l=A.target;c(l)&&(l.node=n.nodes[l.id],delete l.id)})}),Ce.material(e,function(a){c(a.technique)&&(a.technique=n.techniques[a.technique]),Ce.materialValue(a,function(A,l){typeof A=="string"&&(a.values[l]={index:n.textures[A]})});let s=a.extensions;if(c(s)){let A=s.KHR_materials_common;c(A)&&c(A.values)&&Ce.materialValue(A,function(l,d){typeof l=="string"&&(A.values[d]={index:n.textures[l]})})}}),Ce.image(e,function(a){let s=a.extensions;if(c(s)){let A=s.KHR_binary_glTF;c(A)&&(a.bufferView=n.bufferViews[A.bufferView],a.mimeType=A.mimeType,delete s.KHR_binary_glTF),Object.keys(s).length===0&&delete a.extensions}}),Ce.texture(e,function(a){c(a.sampler)&&(a.sampler=n.samplers[a.sampler]),c(a.source)&&(a.source=n.images[a.source])})}function Fie(e){Ce.animation(e,function(t){Ce.animationSampler(t,function(n){delete n.name})})}function Oie(e){for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t)){let n=e[t];Array.isArray(n)&&n.length===0&&delete e[t]}Ce.node(e,function(t){c(t.children)&&t.children.length===0&&delete t.children})}function kie(e){let t=e.asset;delete t.profile,delete t.premultipliedAlpha}var Uie={CESIUM_RTC:!0,KHR_materials_common:!0,WEB3D_quantized_attributes:!0};function zie(e){let t=e.extensionsUsed;if(e.extensionsRequired=e.extensionsRequired??[],c(t)){let n=t.length;for(let i=0;i<n;++i){let o=t[i];c(Uie[o])&&e.extensionsRequired.push(o)}}}function Gie(e){Ce.buffer(e,function(t){delete t.type})}function Hie(e){Ce.texture(e,function(t){delete t.format,delete t.internalFormat,delete t.target,delete t.type})}function Vie(e){Ce.mesh(e,function(t){Ce.meshPrimitive(t,function(n){Ce.meshPrimitiveAttribute(n,function(i,o){o==="TEXCOORD"?n.attributes.TEXCOORD_0=i:o==="COLOR"&&(n.attributes.COLOR_0=i)}),delete n.attributes.TEXCOORD,delete n.attributes.COLOR})}),Ce.technique(e,function(t){Ce.techniqueParameter(t,function(n){let i=n.semantic;c(i)&&(i==="TEXCOORD"?n.semantic="TEXCOORD_0":i==="COLOR"&&(n.semantic="COLOR_0"))})})}var jie={POSITION:!0,NORMAL:!0,TANGENT:!0},Yie={COLOR:"COLOR",JOINT:"JOINTS",JOINTS:"JOINTS",TEXCOORD:"TEXCOORD",WEIGHT:"WEIGHTS",WEIGHTS:"WEIGHTS"};function Wie(e){let t={};Ce.mesh(e,function(n){Ce.meshPrimitive(n,function(i){Ce.meshPrimitiveAttribute(i,function(o,r){if(r.charAt(0)!=="_"){let a=r.search(/_[0-9]+/g),s=r,A="_0";a>=0&&(s=r.substring(0,a),A=r.substring(a));let l,d=Yie[s];c(d)?(l=d+A,t[r]=l):c(jie[s])||(l=`_${r}`,t[r]=l)}});for(let o in t)if(Object.prototype.hasOwnProperty.call(t,o)){let r=t[o],a=i.attributes[o];c(a)&&(delete i.attributes[o],i.attributes[r]=a)}})}),Ce.technique(e,function(n){Ce.techniqueParameter(n,function(i){let o=t[i.semantic];c(o)&&(i.semantic=o)})})}function qie(e){Ce.camera(e,function(t){let n=t.perspective;if(c(n)){let i=n.aspectRatio;c(i)&&i===0&&delete n.aspectRatio;let o=n.yfov;c(o)&&o===0&&(n.yfov=1)}})}function Ux(e,t){return c(t.byteStride)&&t.byteStride!==0?t.byteStride:Hc(e,t)}function Jie(e){Ce.buffer(e,function(t){c(t.byteLength)||(t.byteLength=t.extras._pipeline.source.length)}),Ce.accessor(e,function(t){let n=t.bufferView;if(c(n)){let i=e.bufferViews[n],o=Ux(e,t),r=t.byteOffset+t.count*o;i.byteLength=Math.max(i.byteLength??0,r)}})}function Kie(e){let t,n,i,o=e.bufferViews,r={};Ce.accessorContainingVertexAttributeData(e,function(s){let A=e.accessors[s];c(A.bufferView)&&(r[A.bufferView]=!0)});let a={};Ce.accessor(e,function(s){c(s.bufferView)&&(a[s.bufferView]=a[s.bufferView]??[],a[s.bufferView].push(s))});for(let s in a)if(Object.prototype.hasOwnProperty.call(a,s)){i=o[s];let A=a[s];A.sort(function(p,g){return p.byteOffset-g.byteOffset});let l=0,d=0,m=A.length;for(t=0;t<m;++t){let p=A[t],g=Ux(e,p),h=p.byteOffset,C=p.count*g;delete p.byteStride;let _=t<m-1,I=_?Ux(e,A[t+1]):void 0;if(g!==I){let b=Re(i,!0);r[s]&&(b.byteStride=g),b.byteOffset+=l,b.byteLength=h+C-l;let x=Fr(o,b);for(n=d;n<=t;++n)p=A[n],p.bufferView=x,p.byteOffset=p.byteOffset-l;l=_?A[t+1].byteOffset:void 0,d=t+1}}}J1(e,["accessor","bufferView","buffer"])}function Xie(e){Ce.accessorWithSemantic(e,"POSITION",function(t){let n=e.accessors[t];if(!c(n.min)||!c(n.max)){let i=lI(e,n);n.min=i.min,n.max=i.max}})}function n2(e){return(!c(e.children)||e.children.length===0)&&(!c(e.meshes)||e.meshes.length===0)&&!c(e.camera)&&!c(e.skin)&&!c(e.skeletons)&&!c(e.jointName)&&(!c(e.translation)||f.fromArray(e.translation).equals(f.ZERO))&&(!c(e.scale)||f.fromArray(e.scale).equals(new f(1,1,1)))&&(!c(e.rotation)||re.fromArray(e.rotation).equals(new re(0,0,0,1)))&&(!c(e.matrix)||Q.fromColumnMajorArray(e.matrix).equals(Q.IDENTITY))&&!c(e.extensions)&&!c(e.extras)}function i2(e,t){Ce.scene(e,function(n){let i=n.nodes;if(c(i)){let o=i.length;for(let r=o;r>=0;--r)if(i[r]===t){i.splice(r,1);return}}}),Ce.node(e,function(n,i){if(c(n.children)){let o=n.children.indexOf(t);o>-1&&(n.children.splice(o,1),n2(n)&&i2(e,i))}}),delete e.nodes[t]}function Zie(e){return Ce.node(e,function(t,n){n2(t)&&i2(e,n)}),e}function $ie(e){Ce.animation(e,function(t){Ce.animationSampler(t,function(n){let i=e.accessors[n.input];if(!c(i.min)||!c(i.max)){let o=lI(e,i);i.min=o.min,i.max=o.max}})})}function eoe(e){Ce.accessor(e,function(t){if(c(t.min)||c(t.max)){let n=lI(e,t);c(t.min)&&(t.min=n.min),c(t.max)&&(t.max=n.max)}})}function toe(e){e.asset=e.asset??{},e.asset.version="2.0",t2(e),Nie(e),Zie(e),Lie(e),Fie(e),kie(e),zie(e),Jie(e),Kie(e),Xie(e),$ie(e),eoe(e),Gie(e),Hie(e),Vie(e),Wie(e),Z1(e),qie(e),V1(e),Y1(e),Oie(e)}var noe=["u_tex","u_diffuse","u_emission","u_diffuse_tex"],ioe=["u_diffuse","u_diffuse_mat"];function zx(e){e.pbrMetallicRoughness=c(e.pbrMetallicRoughness)?e.pbrMetallicRoughness:{},e.pbrMetallicRoughness.roughnessFactor=1,e.pbrMetallicRoughness.metallicFactor=0}function Gx(e){return c(e.index)}function Hx(e){return Array.isArray(e)&&e.length===4}function o2(e){let t=new Array(4);t[3]=e[3];for(let n=0;n<3;n++){let i=e[n];i<=.04045?t[n]=e[n]*.07739938080495357:t[n]=Math.pow((i+.055)*.9478672985781991,2.4)}return t}function ooe(e,t){t=t??{};let n=t.baseColorTextureNames??noe,i=t.baseColorFactorNames??ioe;Ce.material(e,function(o){Ce.materialValue(o,function(r,a){n.indexOf(a)!==-1&&Gx(r)?(zx(o),o.pbrMetallicRoughness.baseColorTexture=r):i.indexOf(a)!==-1&&Hx(r)&&(zx(o),o.pbrMetallicRoughness.baseColorFactor=o2(r))})}),fI(e,"KHR_techniques_webgl"),fI(e,"KHR_blend")}function kx(e,t){c(t)&&(Hx(t)?e.pbrMetallicRoughness.baseColorFactor=o2(t):Gx(t)&&(e.pbrMetallicRoughness.baseColorTexture=t))}function e2(e,t){c(t)&&(Hx(t)?e.emissiveFactor=t.slice(0,3):Gx(t)&&(e.emissiveTexture=t))}function roe(e){Ce.material(e,function(t){let n=(t.extensions??{}).KHR_materials_common;if(!c(n))return;let i=n.values??{},o=i.ambient,r=i.diffuse,a=i.emission,s=i.transparency,A=n.doubleSided,l=n.transparent;zx(t),n.technique==="CONSTANT"?(Ql(e,"KHR_materials_unlit"),t.extensions=c(t.extensions)?t.extensions:{},t.extensions.KHR_materials_unlit={},kx(t,a),kx(t,o)):(kx(t,r),e2(t,o),e2(t,a)),c(A)&&(t.doubleSided=A),c(s)&&(c(t.pbrMetallicRoughness.baseColorFactor)?t.pbrMetallicRoughness.baseColorFactor[3]*=s:t.pbrMetallicRoughness.baseColorFactor=[1,1,1,s]),c(l)&&(t.alphaMode=l?"BLEND":"OPAQUE")}),fI(e,"KHR_materials_common")}var r2=Die;function Zr(){}Zr.getError=function(e,t,n){let i=`Failed to load ${e}: ${t}`;c(n)&&c(n.message)&&(i+=`
${n.message}`);let o=new ae(i);return c(n)&&(o.stack=`Original stack:
${n.stack}
Handler stack:
${o.stack}`),o};Zr.getNodeTransform=function(e){return c(e.matrix)?e.matrix:Q.fromTranslationQuaternionRotationScale(c(e.translation)?e.translation:f.ZERO,c(e.rotation)?e.rotation:gt.IDENTITY,c(e.scale)?e.scale:f.ONE)};Zr.getAttributeBySemantic=function(e,t,n){let i=e.attributes,o=i.length;for(let r=0;r<o;++r){let a=i[r],s=c(n)?a.setIndex===n:!0;if(a.semantic===t&&s)return a}};Zr.getAttributeByName=function(e,t){let n=e.attributes,i=n.length;for(let o=0;o<i;++o){let r=n[o];if(r.name===t)return r}};Zr.getFeatureIdsByLabel=function(e,t){for(let n=0;n<e.length;n++){let i=e[n];if(i.positionalLabel===t||i.label===t)return i}};Zr.hasQuantizedAttributes=function(e){if(!c(e))return!1;for(let t=0;t<e.length;t++){let n=e[t];if(c(n.quantization))return!0}return!1};Zr.getAttributeInfo=function(e){let t=e.semantic,n=e.setIndex,i,o=!1;c(t)?(i=Pe.getVariableName(t,n),o=!0):(i=e.name,i=i.replace(/^_/,""),i=i.toLowerCase());let r=/^color_\d+$/.test(i),a=e.type,s=ct.getGlslType(a);r&&(s="vec4");let A=c(e.quantization),l;return A&&(l=r?"vec4":ct.getGlslType(e.quantization.type)),{attribute:e,isQuantized:A,variableName:i,hasSemantic:o,glslType:s,quantizedGlslType:l}};var aoe=new f,soe=new f;Zr.getPositionMinMax=function(e,t,n){let i=Zr.getAttributeBySemantic(e,"POSITION"),o=i.max,r=i.min;return c(n)&&c(t)&&(r=f.add(r,t,soe),o=f.add(o,n,aoe)),{min:r,max:o}};Zr.getAxisCorrectionMatrix=function(e,t,n){return n=Q.clone(Q.IDENTITY,n),e===fi.Y?n=Q.clone(fi.Y_UP_TO_Z_UP,n):e===fi.X&&(n=Q.clone(fi.X_UP_TO_Z_UP,n)),t===fi.Z&&(n=Q.multiplyTransformation(n,fi.Z_UP_TO_X_UP,n)),n};var coe=new ne;Zr.getCullFace=function(e,t){if(!Me.isTriangles(t))return or.BACK;let n=Q.getMatrix3(e,coe);return ne.determinant(n)<0?or.FRONT:or.BACK};Zr.sanitizeGlslIdentifier=function(e){let t=e.replaceAll(/[^A-Za-z0-9]+/g,"_");return t=t.replace(/^gl_/,""),/^\d/.test(t)&&(t=`_${t}`),t};Zr.supportedExtensions={AGI_articulations:!0,CESIUM_primitive_outline:!0,CESIUM_RTC:!0,EXT_feature_metadata:!0,EXT_implicit_cylinder_region:!0,EXT_implicit_ellipsoid_region:!0,EXT_instance_features:!0,EXT_mesh_features:!0,EXT_mesh_gpu_instancing:!0,EXT_meshopt_compression:!0,EXT_primitive_voxels:!0,EXT_structural_metadata:!0,EXT_texture_webp:!0,KHR_blend:!0,KHR_draco_mesh_compression:!0,KHR_implicit_shapes:!0,KHR_materials_common:!0,KHR_materials_pbrSpecularGlossiness:!0,KHR_materials_specular:!0,KHR_materials_anisotropy:!0,KHR_materials_clearcoat:!0,KHR_materials_unlit:!0,KHR_mesh_quantization:!0,KHR_techniques_webgl:!0,KHR_texture_basisu:!0,KHR_texture_transform:!0,KHR_gaussian_splatting:!0,KHR_gaussian_splatting_compression_spz_2:!0,KHR_spz_gaussian_splats_compression:!0,WEB3D_quantized_attributes:!0};Zr.checkSupportedExtensions=function(e){let t=e.length;for(let n=0;n<t;n++){let i=e[n];if(!Zr.supportedExtensions[i])throw new ae(`Unsupported glTF Extension: ${i}`)}};var tt=Zr;function ju(e){e=e??G.EMPTY_OBJECT;let t=e.resourceCache,n=e.gltfResource,i=e.baseResource,o=e.typedArray,r=e.gltfJson,a=e.cacheKey;this._resourceCache=t,this._gltfResource=n,this._baseResource=i,this._typedArray=o,this._gltfJson=r,this._cacheKey=a,this._gltf=void 0,this._bufferLoaders=[],this._state=ke.UNLOADED,this._promise=void 0}c(Object.create)&&(ju.prototype=Object.create(Ln.prototype),ju.prototype.constructor=ju);Object.defineProperties(ju.prototype,{cacheKey:{get:function(){return this._cacheKey}},gltf:{get:function(){return this._gltf}}});ju.prototype.load=async function(){return c(this._promise)?this._promise:(this._state=ke.LOADING,c(this._gltfJson)?(this._promise=a2(this,this._gltfJson),this._promise):c(this._typedArray)?(this._promise=s2(this,this._typedArray),this._promise):(this._promise=Aoe(this),this._promise))};async function Aoe(e){let t;try{let n=await e._fetchGltf();if(e.isDestroyed())return;t=new Uint8Array(n)}catch(n){if(e.isDestroyed())return;Vx(e,n)}return s2(e,t)}function Vx(e,t){e.unload(),e._state=ke.FAILED;let n=`Failed to load glTF: ${e._gltfResource.url}`;throw e.getError(n,t)}async function loe(e,t){if(c(t.asset)&&t.asset.version==="2.0"&&!To(t,"KHR_techniques_webgl")&&!To(t,"KHR_materials_common"))return Promise.resolve();let n=[];Ce.buffer(t,function(i){if(!c(i.extras._pipeline.source)&&c(i.uri)){let o=e._baseResource.getDerivedResource({url:i.uri}),a=e._resourceCache.getExternalBufferLoader({resource:o});e._bufferLoaders.push(a),n.push(a.load().then(function(){a.isDestroyed()||(i.extras._pipeline.source=a.typedArray)}))}}),await Promise.all(n),r2(t)}function uoe(e){let t=[];return Ce.buffer(e,function(n){let i=n.uri;!c(n.extras._pipeline.source)&&c(i)&&uh(i)&&(delete n.uri,t.push(Ye.fetchArrayBuffer(i).then(function(o){n.extras._pipeline.source=new Uint8Array(o)})))}),Promise.all(t)}function foe(e,t){let n=[];return Ce.buffer(t,function(i,o){let r=i.extras._pipeline.source;if(c(r)&&!c(i.uri)){let s=e._resourceCache.getEmbeddedBufferLoader({parentResource:e._gltfResource,bufferId:o,typedArray:r});e._bufferLoaders.push(s),n.push(s.load())}}),Promise.all(n)}async function a2(e,t){try{Bg(t),await uoe(t),await loe(e,t),O1(t),await foe(e,t),G1(t);let n=t.asset.version;if(n!=="1.0"&&n!=="2.0")throw new ae(`Unsupported glTF version: ${n}`);let i=t.extensionsRequired;return c(i)&&tt.checkSupportedExtensions(i),e._gltf=t,e._state=ke.READY,e}catch(n){if(e.isDestroyed())return;Vx(e,n)}}async function s2(e,t){let n;try{Nu(t)==="glTF"?n=z1(t):n=Fo(t)}catch(i){if(e.isDestroyed())return;Vx(e,i)}return a2(e,n)}ju.prototype.unload=function(){let e=this._bufferLoaders,t=e.length;for(let n=0;n<t;++n)e[n]=!e[n].isDestroyed()&&this._resourceCache.unload(e[n]);this._bufferLoaders.length=0,this._gltf=void 0};ju.prototype._fetchGltf=function(){return this._gltfResource.fetchArrayBuffer()};var jx=ju;var doe={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"},gd=Object.freeze(doe);var di={};function hoe(){this.octEncoded=!1,this.octEncodedZXY=!1,this.normalizationRange=void 0,this.quantizedVolumeOffset=void 0,this.quantizedVolumeDimensions=void 0,this.quantizedVolumeStepSize=void 0,this.componentDatatype=void 0,this.type=void 0}function moe(){this.name=void 0,this.semantic=void 0,this.setIndex=void 0,this.componentDatatype=void 0,this.type=void 0,this.normalized=!1,this.count=void 0,this.min=void 0,this.max=void 0,this.constant=void 0,this.quantization=void 0,this.typedArray=void 0,this.buffer=void 0,this.byteOffset=0,this.byteStride=void 0}function poe(){this.indexDatatype=void 0,this.count=void 0,this.buffer=void 0,this.typedArray=void 0}function goe(){this.featureCount=void 0,this.nullFeatureId=void 0,this.propertyTableId=void 0,this.setIndex=void 0,this.label=void 0,this.positionalLabel=void 0}function Coe(){this.featureCount=void 0,this.nullFeatureId=void 0,this.propertyTableId=void 0,this.offset=0,this.repeat=void 0,this.label=void 0,this.positionalLabel=void 0}function Eoe(){this.featureCount=void 0,this.nullFeatureId=void 0,this.propertyTableId=void 0,this.textureReader=void 0,this.label=void 0,this.positionalLabel=void 0}function _oe(){this.attributes=[]}function Ioe(){this.attributes=[],this.morphTargets=[],this.indices=void 0,this.material=void 0,this.primitiveType=void 0,this.featureIds=[],this.propertyTextureIds=[],this.propertyAttributeIds=[],this.outlineCoordinates=void 0,this.modelPrimitiveImagery=void 0}function yoe(){this.attributes=[],this.featureIds=[],this.transformInWorldSpace=!1}function boe(){this.index=void 0,this.joints=[],this.inverseBindMatrices=[]}function Boe(){this.name=void 0,this.index=void 0,this.children=[],this.primitives=[],this.instances=void 0,this.skin=void 0,this.matrix=void 0,this.translation=void 0,this.rotation=void 0,this.scale=void 0,this.morphWeights=[],this.articulationName=void 0}function xoe(){this.nodes=[]}var Toe={TRANSLATION:"translation",ROTATION:"rotation",SCALE:"scale",WEIGHTS:"weights"};function Soe(){this.input=[],this.interpolation=void 0,this.output=[]}function woe(){this.node=void 0,this.path=void 0}function Doe(){this.sampler=void 0,this.target=void 0}function Qoe(){this.name=void 0,this.samplers=[],this.channels=[]}function Roe(){this.name=void 0,this.type=void 0,this.minimumValue=void 0,this.maximumValue=void 0,this.initialValue=void 0}function voe(){this.name=void 0,this.stages=[]}function c2(){this.credits=[]}function Moe(){this.asset=new c2,this.scene=void 0,this.nodes=[],this.skins=[],this.animations=[],this.articulations=[],this.structuralMetadata=void 0,this.upAxis=void 0,this.forwardAxis=void 0,this.transform=Q.clone(Q.IDENTITY),this.extensions={}}function Poe(){this.texture=void 0,this.index=void 0,this.texCoord=0,this.transform=ne.clone(ne.IDENTITY),this.scale=1,this.channels=void 0}function Yu(){this.baseColorTexture=void 0,this.metallicRoughnessTexture=void 0,this.baseColorFactor=re.clone(Yu.DEFAULT_BASE_COLOR_FACTOR),this.metallicFactor=Yu.DEFAULT_METALLIC_FACTOR,this.roughnessFactor=Yu.DEFAULT_ROUGHNESS_FACTOR}Yu.DEFAULT_BASE_COLOR_FACTOR=re.ONE;Yu.DEFAULT_METALLIC_FACTOR=1;Yu.DEFAULT_ROUGHNESS_FACTOR=1;function Cd(){this.diffuseTexture=void 0,this.specularGlossinessTexture=void 0,this.diffuseFactor=re.clone(Cd.DEFAULT_DIFFUSE_FACTOR),this.specularFactor=f.clone(Cd.DEFAULT_SPECULAR_FACTOR),this.glossinessFactor=Cd.DEFAULT_GLOSSINESS_FACTOR}Cd.DEFAULT_DIFFUSE_FACTOR=re.ONE;Cd.DEFAULT_SPECULAR_FACTOR=f.ONE;Cd.DEFAULT_GLOSSINESS_FACTOR=1;function xg(){this.specularFactor=xg.DEFAULT_SPECULAR_FACTOR,this.specularTexture=void 0,this.specularColorFactor=f.clone(xg.DEFAULT_SPECULAR_COLOR_FACTOR),this.specularColorTexture=void 0}xg.DEFAULT_SPECULAR_FACTOR=1;xg.DEFAULT_SPECULAR_COLOR_FACTOR=f.ONE;function Tg(){this.anisotropyStrength=Tg.DEFAULT_ANISOTROPY_STRENGTH,this.anisotropyRotation=Tg.DEFAULT_ANISOTROPY_ROTATION,this.anisotropyTexture=void 0}Tg.DEFAULT_ANISOTROPY_STRENGTH=0;Tg.DEFAULT_ANISOTROPY_ROTATION=0;function Sg(){this.clearcoatFactor=Sg.DEFAULT_CLEARCOAT_FACTOR,this.clearcoatTexture=void 0,this.clearcoatRoughnessFactor=Sg.DEFAULT_CLEARCOAT_ROUGHNESS_FACTOR,this.clearcoatRoughnessTexture=void 0,this.clearcoatNormalTexture=void 0}Sg.DEFAULT_CLEARCOAT_FACTOR=0;Sg.DEFAULT_CLEARCOAT_ROUGHNESS_FACTOR=0;function Yx(){this.metallicRoughness=new Yu,this.specularGlossiness=void 0,this.specular=void 0,this.anisotropy=void 0,this.clearcoat=void 0,this.emissiveTexture=void 0,this.normalTexture=void 0,this.occlusionTexture=void 0,this.emissiveFactor=f.clone(Yx.DEFAULT_EMISSIVE_FACTOR),this.alphaMode=gd.OPAQUE,this.alphaCutoff=.5,this.doubleSided=!1,this.unlit=!1}Yx.DEFAULT_EMISSIVE_FACTOR=f.ZERO;di.Quantization=hoe;di.Attribute=moe;di.Indices=poe;di.FeatureIdAttribute=goe;di.FeatureIdTexture=Eoe;di.FeatureIdImplicitRange=Coe;di.MorphTarget=_oe;di.Primitive=Ioe;di.Instances=yoe;di.Skin=boe;di.Node=Boe;di.Scene=xoe;di.AnimatedPropertyType=Object.freeze(Toe);di.AnimationSampler=Soe;di.AnimationTarget=woe;di.AnimationChannel=Doe;di.Animation=Qoe;di.ArticulationStage=Roe;di.Articulation=voe;di.Asset=c2;di.Components=Moe;di.TextureReader=Poe;di.MetallicRoughness=Yu;di.SpecularGlossiness=Cd;di.Specular=xg;di.Anisotropy=Tg;di.Clearcoat=Sg;di.Material=Yx;var Rt=di;var hI={};hI.getImageIdFromTexture=function(e){e=e??G.EMPTY_OBJECT;let{gltf:t,textureId:n,supportedImageFormats:i}=e,o=t.textures[n],r=o.extensions;if(c(r)){if(i.webp&&c(r.EXT_texture_webp))return r.EXT_texture_webp.source;if(i.basis&&c(r.KHR_texture_basisu))return r.KHR_texture_basisu.source}return o.source};hI.createSampler=function(e){e=e??G.EMPTY_OBJECT;let{gltf:t,textureInfo:n,compressedTextureNoMipmap:i=!1}=e,o=ei.REPEAT,r=ei.REPEAT,a=Wt.LINEAR,s=yo.LINEAR,A=n.index,d=t.textures[A].sampler;if(c(d)){let m=t.samplers[d];o=m.wrapS??o,r=m.wrapT??r,a=m.minFilter??a,s=m.magFilter??s}return i&&a!==Wt.LINEAR&&a!==Wt.NEAREST&&(a===Wt.NEAREST_MIPMAP_NEAREST||a===Wt.NEAREST_MIPMAP_LINEAR?a=Wt.NEAREST:a=Wt.LINEAR),new nn({wrapS:o,wrapT:r,minificationFilter:a,magnificationFilter:s})};var Noe=new L(1,1);hI.createModelTextureReader=function(e){e=e??G.EMPTY_OBJECT;let{textureInfo:t,channels:n,texture:i}=e,o=t.texCoord??0,r,a=t.extensions?.KHR_texture_transform;if(c(a)){o=a.texCoord??o;let A=c(a.offset)?L.unpack(a.offset):L.ZERO,l=a.rotation??0,d=c(a.scale)?L.unpack(a.scale):Noe;l=-l,r=new ne(Math.cos(l)*d.x,-Math.sin(l)*d.y,A.x,Math.sin(l)*d.x,Math.cos(l)*d.y,A.y,0,0,1)}let s=new Rt.TextureReader;return s.index=t.index,s.texture=i,s.texCoord=o,s.scale=t.scale,s.transform=r,s.channels=n,s};var Vc=hI;function Loe(e){let t=document.createElement("canvas");return t.width=S.nextPowerOfTwo(e.width),t.height=S.nextPowerOfTwo(e.height),t.getContext("2d").drawImage(e,0,0,e.width,e.height,0,0,t.width,t.height),t}var A2=Loe;function Wu(e){e=e??G.EMPTY_OBJECT;let t=e.resourceCache,n=e.gltf,i=e.textureInfo,o=e.gltfResource,r=e.baseResource,a=e.supportedImageFormats,s=e.cacheKey,A=e.asynchronous??!0,l=i.index,d=Vc.getImageIdFromTexture({gltf:n,textureId:l,supportedImageFormats:a});this._resourceCache=t,this._gltf=n,this._textureInfo=i,this._imageId=d,this._gltfResource=o,this._baseResource=r,this._cacheKey=s,this._asynchronous=A,this._imageLoader=void 0,this._image=void 0,this._mipLevels=void 0,this._texture=void 0,this._state=ke.UNLOADED,this._promise=void 0}c(Object.create)&&(Wu.prototype=Object.create(Ln.prototype),Wu.prototype.constructor=Wu);Object.defineProperties(Wu.prototype,{cacheKey:{get:function(){return this._cacheKey}},texture:{get:function(){return this._texture}}});var Foe=new Wx;async function Ooe(e){let t=e._resourceCache;try{let n=t.getImageLoader({gltf:e._gltf,imageId:e._imageId,gltfResource:e._gltfResource,baseResource:e._baseResource});return e._imageLoader=n,await n.load(),e.isDestroyed()?void 0:(e._image=n.image,e._mipLevels=n.mipLevels,e._state=ke.LOADED,e)}catch(n){if(e.isDestroyed())return;throw e.unload(),e._state=ke.FAILED,e.getError("Failed to load texture",n)}}Wu.prototype.load=async function(){return c(this._promise)?this._promise:(this._state=ke.LOADING,this._promise=Ooe(this),this._promise)};function Wx(){this.gltf=void 0,this.textureInfo=void 0,this.textureId=void 0,this.image=void 0,this.context=void 0,this.texture=void 0}Wx.prototype.set=function(e,t,n,i,o,r){this.gltf=e,this.textureInfo=t,this.textureId=n,this.image=i,this.mipLevels=o,this.context=r};Wx.prototype.execute=function(){this.texture=l2(this.gltf,this.textureInfo,this.textureId,this.image,this.mipLevels,this.context)};function l2(e,t,n,i,o,r){let a=i.internalFormat,s=!1;_t.isCompressedFormat(a)&&!c(o)&&(s=!0);let A=Vc.createSampler({gltf:e,textureInfo:t,compressedTextureNoMipmap:s}),l=A.minificationFilter,d=A.wrapS,m=A.wrapT,p=l===Wt.NEAREST_MIPMAP_NEAREST||l===Wt.NEAREST_MIPMAP_LINEAR||l===Wt.LINEAR_MIPMAP_NEAREST||l===Wt.LINEAR_MIPMAP_LINEAR,g=!c(a)&&p,h=g||d===ei.REPEAT||d===ei.MIRRORED_REPEAT||m===ei.REPEAT||m===ei.MIRRORED_REPEAT,C=!S.isPowerOfTwo(i.width)||!S.isPowerOfTwo(i.height),_=h&&C,I;return c(a)?(!r.webgl2&&_t.isCompressedFormat(a)&&C&&h&&console.warn("Compressed texture uses REPEAT or MIRRORED_REPEAT texture wrap mode and dimensions are not powers of two. The texture may be rendered incorrectly."),I=on.create({id:n,context:r,source:{arrayBufferView:i.bufferView,mipLevels:o},width:i.width,height:i.height,pixelFormat:i.internalFormat,sampler:A})):(_&&(i=A2(i)),I=on.create({id:n,context:r,source:i,sampler:A,flipY:!1,skipColorSpaceConversion:!0})),g&&I.generateMipmap(),I}Wu.prototype.process=function(e){if(this._state===ke.READY)return!0;if(this._state!==ke.LOADED&&this._state!==ke.PROCESSING||c(this._texture)||!c(this._image))return!1;this._state=ke.PROCESSING;let t;if(this._asynchronous){let n=Foe;if(n.set(this._gltf,this._textureInfo,this._cacheKey,this._image,this._mipLevels,e.context),!e.jobScheduler.execute(n,Fh.TEXTURE))return;t=n.texture}else t=l2(this._gltf,this._textureInfo,this._cacheKey,this._image,this._mipLevels,e.context);return this.unload(),this._texture=t,this._state=ke.READY,this._resourceCache.statistics.addTextureLoader(this),!0};Wu.prototype.unload=function(){c(this._texture)&&this._texture.destroy(),c(this._imageLoader)&&!this._imageLoader.isDestroyed()&&this._resourceCache.unload(this._imageLoader),this._imageLoader=void 0,this._image=void 0,this._mipLevels=void 0,this._texture=void 0,this._gltf=void 0};var qx=Wu;function qu(e){e=e??G.EMPTY_OBJECT;let t=e.resourceCache,n=e.gltf,i=e.gltfResource,o=e.baseResource,r=e.bufferViewId,a=e.primitive,s=e.draco,A=e.attributeSemantic,l=e.accessorId,d=e.cacheKey,m=e.spz,p=e.asynchronous??!0,g=e.loadBuffer??!1,h=e.loadTypedArray??!1;this._resourceCache=t,this._gltfResource=i,this._baseResource=o,this._gltf=n,this._bufferViewId=r,this._primitive=a,this._draco=s,this._spz=m,this._attributeSemantic=A,this._accessorId=l,this._cacheKey=d,this._asynchronous=p,this._loadBuffer=g,this._loadTypedArray=h,this._bufferViewLoader=void 0,this._dracoLoader=void 0,this._quantization=void 0,this._typedArray=void 0,this._buffer=void 0,this._state=ke.UNLOADED,this._promise=void 0}c(Object.create)&&(qu.prototype=Object.create(Ln.prototype),qu.prototype.constructor=qu);Object.defineProperties(qu.prototype,{cacheKey:{get:function(){return this._cacheKey}},buffer:{get:function(){return this._buffer}},typedArray:{get:function(){return this._typedArray}},quantization:{get:function(){return this._quantization}}});function koe(e,t){return c(e)&&c(e.attributes)&&c(e.attributes[t])}qu.prototype.load=async function(){return c(this._promise)?this._promise:c(this._spz)?(this._promise=zoe(this),this._promise):koe(this._draco,this._attributeSemantic)?(this._promise=joe(this),this._promise):(this._promise=Woe(this),this._promise)};function Uoe(e,t,n,i){let r=(1<<e.quantizationBits)-1,a=1/r,s=new Rt.Quantization;if(s.componentDatatype=t,s.octEncoded=e.octEncoded,s.octEncodedZXY=!0,s.type=i,s.octEncoded)s.type=ct.VEC2,s.normalizationRange=r;else{let A=ct.getMathType(i);if(A===Number){let l=e.range;s.quantizedVolumeOffset=e.minValues[0],s.quantizedVolumeDimensions=l,s.normalizationRange=r,s.quantizedVolumeStepSize=l*a}else{s.quantizedVolumeOffset=A.unpack(e.minValues),s.normalizationRange=A.unpack(new Array(n).fill(r));let l=new Array(n).fill(e.range);s.quantizedVolumeDimensions=A.unpack(l);let d=l.map(function(m){return m*a});s.quantizedVolumeStepSize=A.unpack(d)}}return s}async function zoe(e){e._state=ke.LOADING;let t=e._resourceCache;try{let n=t.getSpzLoader({gltf:e._gltf,primitive:e._primitive,spz:e._spz,gltfResource:e._gltfResource,baseResource:e._baseResource});return e._spzLoader=n,await n.load(),e.isDestroyed()?void 0:(e._state=ke.LOADED,e)}catch{if(e.isDestroyed())return}}function Goe(e){return`${e.startsWith("KHR_gaussian_splatting:")?"KHR_gaussian_splatting:":"_"}SH_DEGREE_`}function Hoe(e){let t=Goe(e),n="_COEF_",i=t.length,o=e.indexOf(n,i),r=parseInt(e.slice(i,o),10),a=parseInt(e.slice(o+n.length),10);return{l:r,n:a}}function Voe(e){e._state=ke.PROCESSING;let n=e._spzLoader.decodedData.gcloud;if(e._attributeSemantic==="POSITION")e._typedArray=n.positions;else if(e._attributeSemantic==="KHR_gaussian_splatting:SCALE"||e._attributeSemantic==="_SCALE")e._typedArray=n.scales;else if(e._attributeSemantic==="KHR_gaussian_splatting:ROTATION"||e._attributeSemantic==="_ROTATION")e._typedArray=n.rotations;else if(e._attributeSemantic==="COLOR_0"){let i=n.colors,o=n.alphas;e._typedArray=new Uint8Array(i.length/3*4);for(let r=0;r<i.length/3;r++)e._typedArray[r*4]=S.clamp(i[r*3]*255,0,255),e._typedArray[r*4+1]=S.clamp(i[r*3+1]*255,0,255),e._typedArray[r*4+2]=S.clamp(i[r*3+2]*255,0,255),e._typedArray[r*4+3]=S.clamp(o[r]*255,0,255)}else if(e._attributeSemantic.includes("SH_DEGREE_")){let{l:i,n:o}=Hoe(e._attributeSemantic),r=n.shDegree,a=0,s=[0,9,24];switch(r){case 1:a=9;break;case 2:a=24;break;case 3:a=45;break}let A=n.numPoints,l=n.sh;e._typedArray=new Float32Array(A*3);for(let d=0;d<A;d++){let m=d*a+s[i-1]+o*3;e._typedArray[d*3]=l[m],e._typedArray[d*3+1]=l[m+1],e._typedArray[d*3+2]=l[m+2]}}}async function joe(e){e._state=ke.LOADING;let t=e._resourceCache;try{let n=t.getDracoLoader({gltf:e._gltf,primitive:e._primitive,draco:e._draco,gltfResource:e._gltfResource,baseResource:e._baseResource});return e._dracoLoader=n,await n.load(),e.isDestroyed()?void 0:(e._state=ke.LOADED,e)}catch{if(e.isDestroyed())return;mI(e)}}function Yoe(e){e._state=ke.PROCESSING;let n=e._dracoLoader.decodedData.vertexAttributes,i=e._attributeSemantic,o=n[i],r=e._accessorId,s=e._gltf.accessors[r].type,A=o.array,l=o.data.quantization;c(l)&&(e._quantization=Uoe(l,o.data.componentDatatype,o.data.componentsPerAttribute,s)),e._typedArray=new Uint8Array(A.buffer,A.byteOffset,A.byteLength)}async function Woe(e){e._state=ke.LOADING;let t=e._resourceCache;try{let n=t.getBufferViewLoader({gltf:e._gltf,bufferViewId:e._bufferViewId,gltfResource:e._gltfResource,baseResource:e._baseResource});return e._bufferViewLoader=n,await n.load(),e.isDestroyed()?void 0:(e._typedArray=n.typedArray,e._state=ke.PROCESSING,e)}catch(n){if(e.isDestroyed())return;mI(e,n)}}function mI(e,t){throw e.unload(),e._state=ke.FAILED,e.getError("Failed to load vertex buffer",t)}function Jx(){this.typedArray=void 0,this.context=void 0,this.buffer=void 0}Jx.prototype.set=function(e,t){this.typedArray=e,this.context=t};Jx.prototype.execute=function(){this.buffer=u2(this.typedArray,this.context)};function u2(e,t){let n=ut.createVertexBuffer({typedArray:e,context:t,usage:De.STATIC_DRAW});return n.vertexArrayDestroyable=!1,n}var qoe=new Jx;qu.prototype.process=function(e){if(this._state===ke.READY)return!0;if(this._state!==ke.LOADED&&this._state!==ke.PROCESSING)return!1;if(c(this._dracoLoader)){try{if(!this._dracoLoader.process(e))return!1}catch(i){mI(this,i)}Yoe(this)}if(c(this._spzLoader)){try{if(!this._spzLoader.process(e))return!1}catch(i){mI(this,i)}Voe(this)}let t,n=this._typedArray;if(this._loadBuffer&&this._asynchronous){let i=qoe;if(i.set(n,e.context),!e.jobScheduler.execute(i,Fh.BUFFER))return!1;t=i.buffer}else this._loadBuffer&&(t=u2(n,e.context));return this.unload(),this._buffer=t,this._typedArray=this._loadTypedArray?n:void 0,this._state=ke.READY,this._resourceCache.statistics.addGeometryLoader(this),!0};qu.prototype.unload=function(){c(this._buffer)&&this._buffer.destroy();let e=this._resourceCache;c(this._bufferViewLoader)&&!this._bufferViewLoader.isDestroyed()&&e.unload(this._bufferViewLoader),c(this._dracoLoader)&&e.unload(this._dracoLoader),c(this._spzLoader)&&e.unload(this._spzLoader),this._bufferViewLoader=void 0,this._dracoLoader=void 0,this._spzLoader=void 0,this._typedArray=void 0,this._buffer=void 0,this._gltf=void 0,this._primitive=void 0};var Kx=qu;var f2={};async function Joe(e={}){var t,n,i=e,o=typeof window=="object",r=typeof WorkerGlobalScope<"u",a=typeof process=="object"&&((t=process.versions)==null?void 0:t.node)&&process.type!="renderer";if(a){let{createRequire:K}=await Promise.resolve().then(()=>ere);var s=K(f2.url)}var A="./this.program",l=f2.url,d;if(a){var m=s("fs");l.startsWith("file:")&&s("path").dirname(s("url").fileURLToPath(l)),d=K=>(K=_(K)?new URL(K):K,m.readFileSync(K)),1<process.argv.length&&(A=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2)}else if(o||r){try{new URL(".",l)}catch{}r&&(d=K=>{var Y=new XMLHttpRequest;return Y.open("GET",K,!1),Y.responseType="arraybuffer",Y.send(null),new Uint8Array(Y.response)})}var p=console.log.bind(console),g=console.error.bind(console),h,C=!1,_=K=>K.startsWith("file://"),I,b,x,T,w,R,z,M,N,O,u,E,y,B=!1;function D(){var K=x.buffer;T=new Int8Array(K),R=new Int16Array(K),i.HEAPU8=w=new Uint8Array(K),z=new Uint16Array(K),M=new Int32Array(K),N=new Uint32Array(K),i.HEAPF32=O=new Float32Array(K),u=new Float64Array(K),E=new BigInt64Array(K),y=new BigUint64Array(K)}var v=0,F=null;function P(K){var Y;throw(Y=i.onAbort)==null||Y.call(i,K),K="Aborted("+K+")",g(K),C=!0,K=new WebAssembly.RuntimeError(K+". Build with -sASSERTIONS for more info."),b?.(K),K}var U;async function k(K){if(!ArrayBuffer.isView(K))if(K==U&&h)K=new Uint8Array(h);else if(d)K=d(K);else throw"both async and sync fetching of the wasm failed";return K}async function j(K){var Y=U;try{var oe=await k(Y);return await WebAssembly.instantiate(oe,K)}catch(se){g(`failed to asynchronously prepare wasm: ${se}`),P(se)}}async function q(K){return j(K)}var $=K=>{for(;0<K.length;)K.shift()(i)},H=[],Z=[],ee=()=>{var K=i.preRun.shift();Z.push(K)},Ae=K=>{if(a)return K=Buffer.from(K,"base64"),new Uint8Array(K.buffer,K.byteOffset,K.length);for(var Y,oe,se=0,ye=0,ze=K.length,Fe=new Uint8Array((3*ze>>2)-(K[ze-2]=="=")-(K[ze-1]=="="));se<ze;se+=4,ye+=3)Y=ZA[K.charCodeAt(se+1)],oe=ZA[K.charCodeAt(se+2)],Fe[ye]=ZA[K.charCodeAt(se)]<<2|Y>>4,Fe[ye+1]=Y<<4|oe>>2,Fe[ye+2]=oe<<6|ZA[K.charCodeAt(se+3)];return Fe},ge={},ce=K=>{for(;K.length;){var Y=K.pop();K.pop()(Y)}};function he(K){return this.N(N[K>>2])}var Ie={},Ne={},_e={},ve=class extends Error{constructor(K){super(K),this.name="InternalError"}},at=(K,Y,oe)=>{function se(Ve){if(Ve=oe(Ve),Ve.length!==K.length)throw new ve("Mismatched type converter count");for(var Qt=0;Qt<K.length;++Qt)$t(K[Qt],Ve[Qt])}K.forEach(Ve=>_e[Ve]=Y);var ye=Array(Y.length),ze=[],Fe=0;Y.forEach((Ve,Qt)=>{Ne.hasOwnProperty(Ve)?ye[Qt]=Ne[Ve]:(ze.push(Ve),Ie.hasOwnProperty(Ve)||(Ie[Ve]=[]),Ie[Ve].push(()=>{ye[Qt]=Ne[Ve],++Fe,Fe===ze.length&&se(ye)}))}),ze.length===0&&se(ye)},Tt=K=>{for(var Y="";;){var oe=w[K++];if(!oe)return Y;Y+=String.fromCharCode(oe)}},st=class extends Error{constructor(K){super(K),this.name="BindingError"}},Rn=K=>{throw new st(K)};function Lt(K,Y,oe={}){var se=Y.name;if(!K)throw new st(`type "${se}" must have a positive integer typeid pointer`);if(Ne.hasOwnProperty(K)){if(oe.wa)return;throw new st(`Cannot register type '${se}' twice`)}Ne[K]=Y,delete _e[K],Ie.hasOwnProperty(K)&&(Y=Ie[K],delete Ie[K],Y.forEach(ye=>ye()))}function $t(K,Y,oe={}){return Lt(K,Y,oe)}var ci=(K,Y,oe)=>{switch(Y){case 1:return oe?se=>T[se]:se=>w[se];case 2:return oe?se=>R[se>>1]:se=>z[se>>1];case 4:return oe?se=>M[se>>2]:se=>N[se>>2];case 8:return oe?se=>E[se>>3]:se=>y[se>>3];default:throw new TypeError(`invalid integer width (${Y}): ${K}`)}},Ft=K=>{throw new st(K.L.P.M.name+" instance already deleted")},pi=!1,Kn=()=>{},lt=K=>typeof FinalizationRegistry>"u"?(lt=Y=>Y,K):(pi=new FinalizationRegistry(Y=>{Y=Y.L,--Y.count.value,Y.count.value===0&&(Y.S?Y.W.Y(Y.S):Y.P.M.Y(Y.O))}),lt=Y=>{var oe=Y.L;return oe.S&&pi.register(Y,{L:oe},Y),Y},Kn=Y=>{pi.unregister(Y)},lt(K));function Ct(){}var yi=(K,Y)=>Object.defineProperty(Y,"name",{value:K}),et={},Qo=(K,Y,oe)=>{if(K[Y].R===void 0){var se=K[Y];K[Y]=function(...ye){if(!K[Y].R.hasOwnProperty(ye.length))throw new st(`Function '${oe}' called with an invalid number of arguments (${ye.length}) - expects one of (${K[Y].R})!`);return K[Y].R[ye.length].apply(this,ye)},K[Y].R=[],K[Y].R[se.aa]=se}},Xo=(K,Y,oe)=>{if(i.hasOwnProperty(K)){if(oe===void 0||i[K].R!==void 0&&i[K].R[oe]!==void 0)throw new st(`Cannot register public name '${K}' twice`);if(Qo(i,K,K),i[K].R.hasOwnProperty(oe))throw new st(`Cannot register multiple overloads of a function with the same number of arguments (${oe})!`);i[K].R[oe]=Y}else i[K]=Y,i[K].aa=oe},Oa=K=>{K=K.replace(/[^a-zA-Z0-9_]/g,"$");var Y=K.charCodeAt(0);return 48<=Y&&57>=Y?`_${K}`:K};function Ro(K,Y,oe,se,ye,ze,Fe,Ve){this.name=K,this.constructor=Y,this.$=oe,this.Y=se,this.U=ye,this.ra=ze,this.ea=Fe,this.pa=Ve,this.ya=[]}var zo=(K,Y,oe)=>{for(;Y!==oe;){if(!Y.ea)throw new st(`Expected null or instance of ${oe.name}, got an instance of ${Y.name}`);K=Y.ea(K),Y=Y.U}return K},Xn=K=>{if(K===null)return"null";var Y=typeof K;return Y==="object"||Y==="array"||Y==="function"?K.toString():""+K};function Zo(K,Y){if(Y===null){if(this.ha)throw new st(`null is not a valid ${this.name}`);return 0}if(!Y.L)throw new st(`Cannot pass "${Xn(Y)}" as a ${this.name}`);if(!Y.L.O)throw new st(`Cannot pass deleted object as a pointer of type ${this.name}`);return zo(Y.L.O,Y.L.P.M,this.M)}function gi(K,Y){if(Y===null){if(this.ha)throw new st(`null is not a valid ${this.name}`);if(this.ga){var oe=this.ia();return K!==null&&K.push(this.Y,oe),oe}return 0}if(!Y||!Y.L)throw new st(`Cannot pass "${Xn(Y)}" as a ${this.name}`);if(!Y.L.O)throw new st(`Cannot pass deleted object as a pointer of type ${this.name}`);if(!this.fa&&Y.L.P.fa)throw new st(`Cannot convert argument of type ${Y.L.W?Y.L.W.name:Y.L.P.name} to parameter type ${this.name}`);if(oe=zo(Y.L.O,Y.L.P.M,this.M),this.ga){if(Y.L.S===void 0)throw new st("Passing raw pointer to smart pointer is illegal");switch(this.Da){case 0:if(Y.L.W===this)oe=Y.L.S;else throw new st(`Cannot convert argument of type ${Y.L.W?Y.L.W.name:Y.L.P.name} to parameter type ${this.name}`);break;case 1:oe=Y.L.S;break;case 2:if(Y.L.W===this)oe=Y.L.S;else{var se=Y.clone();oe=this.za(oe,_o(()=>se.delete())),K!==null&&K.push(this.Y,oe)}break;default:throw new st("Unsupporting sharing policy")}}return oe}function Bn(K,Y){if(Y===null){if(this.ha)throw new st(`null is not a valid ${this.name}`);return 0}if(!Y.L)throw new st(`Cannot pass "${Xn(Y)}" as a ${this.name}`);if(!Y.L.O)throw new st(`Cannot pass deleted object as a pointer of type ${this.name}`);if(Y.L.P.fa)throw new st(`Cannot convert argument of type ${Y.L.P.name} to parameter type ${this.name}`);return zo(Y.L.O,Y.L.P.M,this.M)}var Zn=(K,Y,oe)=>Y===oe?K:oe.U===void 0?null:(K=Zn(K,Y,oe.U),K===null?null:oe.pa(K)),ni={},Ji=(K,Y)=>{if(Y===void 0)throw new st("ptr should not be undefined");for(;K.U;)Y=K.ea(Y),K=K.U;return ni[Y]},Qr=(K,Y)=>{if(!Y.P||!Y.O)throw new ve("makeClassHandle requires ptr and ptrType");if(!!Y.W!=!!Y.S)throw new ve("Both smartPtrType and smartPtr must be specified");return Y.count={value:1},lt(Object.create(K,{L:{value:Y,writable:!0}}))};function Eo(K,Y,oe,se,ye,ze,Fe,Ve,Qt,Ht,yt){this.name=K,this.M=Y,this.ha=oe,this.fa=se,this.ga=ye,this.xa=ze,this.Da=Fe,this.na=Ve,this.ia=Qt,this.za=Ht,this.Y=yt,ye||Y.U!==void 0?this.T=gi:(this.T=se?Zo:Bn,this.V=null)}var Aa=(K,Y,oe)=>{if(!i.hasOwnProperty(K))throw new ve("Replacing nonexistent public symbol");i[K].R!==void 0&&oe!==void 0?i[K].R[oe]=Y:(i[K]=Y,i[K].aa=oe)},Gr,Jt=(K,Y)=>{K=Tt(K);var oe=Gr.get(Y);if(typeof oe!="function")throw new st(`unknown function pointer with signature ${K}: ${Y}`);return oe};class An extends Error{}var vo=K=>{K=mD(K);var Y=Tt(K);return hu(K),Y},bi=(K,Y)=>{function oe(ze){ye[ze]||Ne[ze]||(_e[ze]?_e[ze].forEach(oe):(se.push(ze),ye[ze]=!0))}var se=[],ye={};throw Y.forEach(oe),new An(`${K}: `+se.map(vo).join([", "]))},hr=(K,Y)=>{for(var oe=[],se=0;se<K;se++)oe.push(N[Y+4*se>>2]);return oe};function kn(K){for(var Y=1;Y<K.length;++Y)if(K[Y]!==null&&K[Y].V===void 0)return!0;return!1}function Bi(K,Y,oe,se,ye,ze){var Fe=Y.length;if(2>Fe)throw new st("argTypes array size mismatch! Must at least get return value and 'this' types!");var Ve=Y[1]!==null&&oe!==null,Qt=kn(Y);oe=!Y[0].ma;var Ht=Y[0],yt=Y[1];for(se=[K,Rn,se,ye,ce,Ht.N.bind(Ht),yt?.T.bind(yt)],ye=2;ye<Fe;++ye)Ht=Y[ye],se.push(Ht.T.bind(Ht));if(!Qt)for(ye=Ve?1:2;ye<Y.length;++ye)Y[ye].V!==null&&se.push(Y[ye].V);for(Qt=kn(Y),ye=Y.length-2,yt=[],Ht=["fn"],Ve&&Ht.push("thisWired"),Fe=0;Fe<ye;++Fe)yt.push(`arg${Fe}`),Ht.push(`arg${Fe}Wired`);yt=yt.join(","),Ht=Ht.join(","),yt=`return function (${yt}) {
`,Qt&&(yt+=`var destructors = [];
`);var Io=Qt?"destructors":"null",cs="humanName throwBindingError invoker fn runDestructors fromRetWire toClassParamWire".split(" ");for(Ve&&(yt+=`var thisWired = toClassParamWire(${Io}, this);
`),Fe=0;Fe<ye;++Fe){var la=`toArg${Fe}Wire`;yt+=`var arg${Fe}Wired = ${la}(${Io}, arg${Fe});
`,cs.push(la)}if(yt+=(oe||ze?"var rv = ":"")+`invoker(${Ht});
`,Qt)yt+=`runDestructors(destructors);
`;else for(Fe=Ve?1:2;Fe<Y.length;++Fe)ze=Fe===1?"thisWired":"arg"+(Fe-2)+"Wired",Y[Fe].V!==null&&(yt+=`${ze}_dtor(${ze});
`,cs.push(`${ze}_dtor`));return oe&&(yt+=`var ret = fromRetWire(rv);
return ret;
`),Y=new Function(cs,yt+`}
`)(...se),yi(K,Y)}for(var Ns=K=>{K=K.trim();let Y=K.indexOf("(");return Y===-1?K:K.slice(0,Y)},Vi=[],Mo=[0,1,,1,null,1,!0,1,!1,1],Go=K=>{9<K&&--Mo[K+1]===0&&(Mo[K]=void 0,Vi.push(K))},Sc=K=>{if(!K)throw new st(`Cannot use deleted val. handle = ${K}`);return Mo[K]},_o=K=>{switch(K){case void 0:return 2;case null:return 4;case!0:return 6;case!1:return 8;default:let Y=Vi.pop()||Mo.length;return Mo[Y]=K,Mo[Y+1]=1,Y}},Rr={name:"emscripten::val",N:K=>{var Y=Sc(K);return Go(K),Y},T:(K,Y)=>_o(Y),X:he,V:null},vr=(K,Y,oe)=>{switch(Y){case 1:return oe?function(se){return this.N(T[se])}:function(se){return this.N(w[se])};case 2:return oe?function(se){return this.N(R[se>>1])}:function(se){return this.N(z[se>>1])};case 4:return oe?function(se){return this.N(M[se>>2])}:function(se){return this.N(N[se>>2])};default:throw new TypeError(`invalid integer width (${Y}): ${K}`)}},Ki=(K,Y)=>{var oe=Ne[K];if(oe===void 0)throw K=`${Y} has unknown type ${vo(K)}`,new st(K);return oe},ka=(K,Y)=>{switch(Y){case 4:return function(oe){return this.N(O[oe>>2])};case 8:return function(oe){return this.N(u[oe>>3])};default:throw new TypeError(`invalid float width (${Y}): ${K}`)}},Ua=Object.assign({optional:!0},Rr),$o=(K,Y,oe)=>{var se=w;if(!(0<oe))return 0;var ye=Y;oe=Y+oe-1;for(var ze=0;ze<K.length;++ze){var Fe=K.codePointAt(ze);if(127>=Fe){if(Y>=oe)break;se[Y++]=Fe}else if(2047>=Fe){if(Y+1>=oe)break;se[Y++]=192|Fe>>6,se[Y++]=128|Fe&63}else if(65535>=Fe){if(Y+2>=oe)break;se[Y++]=224|Fe>>12,se[Y++]=128|Fe>>6&63,se[Y++]=128|Fe&63}else{if(Y+3>=oe)break;se[Y++]=240|Fe>>18,se[Y++]=128|Fe>>12&63,se[Y++]=128|Fe>>6&63,se[Y++]=128|Fe&63,ze++}}return se[Y]=0,Y-ye},ii=K=>{for(var Y=0,oe=0;oe<K.length;++oe){var se=K.charCodeAt(oe);127>=se?Y++:2047>=se?Y+=2:55296<=se&&57343>=se?(Y+=4,++oe):Y+=3}return Y},Et=new TextDecoder,fe=(K,Y,oe,se)=>{if(oe=Y+oe,se)return oe;for(;K[Y]&&!(Y>=oe);)++Y;return Y},We=new TextDecoder("utf-16le"),xt=(K,Y,oe)=>(K>>=1,We.decode(z.subarray(K,fe(z,K,Y/2,oe)))),Qi=(K,Y,oe)=>{if(oe??(oe=2147483647),2>oe)return 0;oe-=2;var se=Y;oe=oe<2*K.length?oe/2:K.length;for(var ye=0;ye<oe;++ye)R[Y>>1]=K.charCodeAt(ye),Y+=2;return R[Y>>1]=0,Y-se},mr=K=>2*K.length,Po=(K,Y,oe)=>{var se="";K>>=2;for(var ye=0;!(ye>=Y/4);ye++){var ze=N[K+ye];if(!ze&&!oe)break;se+=String.fromCodePoint(ze)}return se},Hr=(K,Y,oe)=>{if(oe??(oe=2147483647),4>oe)return 0;var se=Y;oe=se+oe-4;for(var ye=0;ye<K.length;++ye){var ze=K.codePointAt(ye);if(65535<ze&&ye++,M[Y>>2]=ze,Y+=4,Y+4>oe)break}return M[Y>>2]=0,Y-se},wc=K=>{for(var Y=0,oe=0;oe<K.length;++oe)65535<K.codePointAt(oe)&&oe++,Y+=4;return Y},XA=[],Xm=K=>{var Y=XA.length;return XA.push(K),Y},pr=(K,Y)=>{for(var oe=Array(K),se=0;se<K;++se)oe[se]=Ki(N[Y+4*se>>2],`parameter ${se}`);return oe},ZC=(K,Y,oe)=>{var se=[];return K=K(se,oe),se.length&&(N[Y>>2]=_o(se)),K},$C={},Zj=K=>{var Y=$C[K];return Y===void 0?Tt(K):Y},Qb={},hD=()=>{if(!Rb){var K={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.language||"C").replace("-","_")+".UTF-8",_:A||"./this.program"},Y;for(Y in Qb)Qb[Y]===void 0?delete K[Y]:K[Y]=Qb[Y];var oe=[];for(Y in K)oe.push(`${Y}=${K[Y]}`);Rb=oe}return Rb},Rb,$j=[null,[],[]],ZA=new Uint8Array(123),du=25;0<=du;--du)ZA[48+du]=52+du,ZA[65+du]=du,ZA[97+du]=26+du;ZA[43]=62,ZA[47]=63,(()=>{let K=Ct.prototype;Object.assign(K,{isAliasOf:function(oe){if(!(this instanceof Ct&&oe instanceof Ct))return!1;var se=this.L.P.M,ye=this.L.O;oe.L=oe.L;var ze=oe.L.P.M;for(oe=oe.L.O;se.U;)ye=se.ea(ye),se=se.U;for(;ze.U;)oe=ze.ea(oe),ze=ze.U;return se===ze&&ye===oe},clone:function(){if(this.L.O||Ft(this),this.L.da)return this.L.count.value+=1,this;var oe=lt,se=Object,ye=se.create,ze=Object.getPrototypeOf(this),Fe=this.L;return oe=oe(ye.call(se,ze,{L:{value:{count:Fe.count,ba:Fe.ba,da:Fe.da,O:Fe.O,P:Fe.P,S:Fe.S,W:Fe.W}}})),oe.L.count.value+=1,oe.L.ba=!1,oe},delete(){if(this.L.O||Ft(this),this.L.ba&&!this.L.da)throw new st("Object already scheduled for deletion");Kn(this);var oe=this.L;--oe.count.value,oe.count.value===0&&(oe.S?oe.W.Y(oe.S):oe.P.M.Y(oe.O)),this.L.da||(this.L.S=void 0,this.L.O=void 0)},isDeleted:function(){return!this.L.O},deleteLater:function(){if(this.L.O||Ft(this),this.L.ba&&!this.L.da)throw new st("Object already scheduled for deletion");return this.L.ba=!0,this}});let Y=Symbol.dispose;Y&&(K[Y]=K.delete)})(),Object.assign(Eo.prototype,{sa(K){return this.na&&(K=this.na(K)),K},ka(K){var Y;(Y=this.Y)==null||Y.call(this,K)},X:he,N:function(K){function Y(){return this.ga?Qr(this.M.$,{P:this.xa,O:oe,W:this,S:K}):Qr(this.M.$,{P:this,O:K})}var oe=this.sa(K);if(!oe)return this.ka(K),null;var se=Ji(this.M,oe);if(se!==void 0)return se.L.count.value===0?(se.L.O=oe,se.L.S=K,se.clone()):(se=se.clone(),this.ka(K),se);if(se=this.M.ra(oe),se=et[se],!se)return Y.call(this);se=this.fa?se.oa:se.pointerType;var ye=Zn(oe,this.M,se.M);return ye===null?Y.call(this):this.ga?Qr(se.M.$,{P:se,O:ye,W:this,S:K}):Qr(se.M.$,{P:se,O:ye})}}),i.print&&(p=i.print),i.printErr&&(g=i.printErr),i.wasmBinary&&(h=i.wasmBinary),i.thisProgram&&(A=i.thisProgram);var mD,vb,hu,eY={x:()=>P(""),q:K=>{var Y=ge[K];delete ge[K];var oe=Y.ia,se=Y.Y,ye=Y.la,ze=ye.map(Fe=>Fe.va).concat(ye.map(Fe=>Fe.Ba));at([K],ze,Fe=>{var Ve={};return ye.forEach((Qt,Ht)=>{var yt=Fe[Ht],Io=Qt.ta,cs=Qt.ua,la=Fe[Ht+ye.length],ua=Qt.Aa,Ls=Qt.Ca;Ve[Qt.qa]={read:$A=>yt.N(Io(cs,$A)),write:($A,Zm)=>{var As=[];ua(Ls,$A,la.T(As,Zm)),ce(As)},optional:Fe[Ht].optional}}),[{name:Y.name,N:Qt=>{var Ht={},yt;for(yt in Ve)Ht[yt]=Ve[yt].read(Qt);return se(Qt),Ht},T:(Qt,Ht)=>{for(var yt in Ve)if(!(yt in Ht||Ve[yt].optional))throw new TypeError(`Missing field: "${yt}"`);var Io=oe();for(yt in Ve)Ve[yt].write(Io,Ht[yt]);return Qt!==null&&Qt.push(se,Io),Io},X:he,V:se}]})},n:(K,Y,oe,se,ye)=>{Y=Tt(Y),se=se===0n;let ze=Fe=>Fe;if(se){let Fe=8*oe;ze=Ve=>BigInt.asUintN(Fe,Ve),ye=ze(ye)}$t(K,{name:Y,N:ze,T:(Fe,Ve)=>(typeof Ve=="number"&&(Ve=BigInt(Ve)),Ve),X:ci(Y,oe,!se),V:null})},B:(K,Y,oe,se)=>{Y=Tt(Y),$t(K,{name:Y,N:function(ye){return!!ye},T:function(ye,ze){return ze?oe:se},X:function(ye){return this.N(w[ye])},V:null})},j:(K,Y,oe,se,ye,ze,Fe,Ve,Qt,Ht,yt,Io,cs)=>{yt=Tt(yt),ze=Jt(ye,ze),Ve&&(Ve=Jt(Fe,Ve)),Ht&&(Ht=Jt(Qt,Ht)),cs=Jt(Io,cs);var la=Oa(yt);Xo(la,function(){bi(`Cannot construct ${yt} due to unbound types`,[se])}),at([K,Y,oe],se?[se]:[],ua=>{if(ua=ua[0],se)var Ls=ua.M,$A=Ls.$;else $A=Ct.prototype;ua=yi(yt,function(...Pb){if(Object.getPrototypeOf(this)!==Zm)throw new st(`Use 'new' to construct ${yt}`);if(As.Z===void 0)throw new st(`${yt} has no accessible constructor`);var pD=As.Z[Pb.length];if(pD===void 0)throw new st(`Tried to invoke ctor of ${yt} with invalid number of parameters (${Pb.length}) - expected (${Object.keys(As.Z).toString()}) parameters instead!`);return pD.apply(this,Pb)});var Zm=Object.create($A,{constructor:{value:ua}});ua.prototype=Zm;var As=new Ro(yt,ua,Zm,cs,Ls,ze,Ve,Ht);if(As.U){var $m;($m=As.U).ja??($m.ja=[]),As.U.ja.push(As)}return Ls=new Eo(yt,As,!0,!1,!1),$m=new Eo(yt+"*",As,!1,!1,!1),$A=new Eo(yt+" const*",As,!1,!0,!1),et[K]={pointerType:$m,oa:$A},Aa(la,ua),[Ls,$m,$A]})},g:(K,Y,oe,se,ye,ze)=>{var Fe=hr(Y,oe);ye=Jt(se,ye),at([],[K],Ve=>{Ve=Ve[0];var Qt=`constructor ${Ve.name}`;if(Ve.M.Z===void 0&&(Ve.M.Z=[]),Ve.M.Z[Y-1]!==void 0)throw new st(`Cannot register multiple constructors with identical number of parameters (${Y-1}) for class '${Ve.name}'! Overload resolution is currently only performed using the parameter count, not actual type info!`);return Ve.M.Z[Y-1]=()=>{bi(`Cannot construct ${Ve.name} due to unbound types`,Fe)},at([],Fe,Ht=>(Ht.splice(1,0,null),Ve.M.Z[Y-1]=Bi(Qt,Ht,null,ye,ze),[])),[]})},b:(K,Y,oe,se,ye,ze,Fe,Ve,Qt)=>{var Ht=hr(oe,se);Y=Tt(Y),Y=Ns(Y),ze=Jt(ye,ze),at([],[K],yt=>{function Io(){bi(`Cannot call ${cs} due to unbound types`,Ht)}yt=yt[0];var cs=`${yt.name}.${Y}`;Y.startsWith("@@")&&(Y=Symbol[Y.substring(2)]),Ve&&yt.M.ya.push(Y);var la=yt.M.$,ua=la[Y];return ua===void 0||ua.R===void 0&&ua.className!==yt.name&&ua.aa===oe-2?(Io.aa=oe-2,Io.className=yt.name,la[Y]=Io):(Qo(la,Y,cs),la[Y].R[oe-2]=Io),at([],Ht,Ls=>(Ls=Bi(cs,Ls,yt,ze,Fe,Qt),la[Y].R===void 0?(Ls.aa=oe-2,la[Y]=Ls):la[Y].R[oe-2]=Ls,[])),[]})},z:K=>$t(K,Rr),r:(K,Y,oe,se)=>{function ye(){}Y=Tt(Y),ye.values={},$t(K,{name:Y,constructor:ye,N:function(ze){return this.constructor.values[ze]},T:(ze,Fe)=>Fe.value,X:vr(Y,oe,se),V:null}),Xo(Y,ye)},d:(K,Y,oe)=>{var se=Ki(K,"enum");Y=Tt(Y),K=se.constructor,se=Object.create(se.constructor.prototype,{value:{value:oe},constructor:{value:yi(`${se.name}_${Y}`,function(){})}}),K.values[oe]=se,K[Y]=se},m:(K,Y,oe)=>{Y=Tt(Y),$t(K,{name:Y,N:se=>se,T:(se,ye)=>ye,X:ka(Y,oe),V:null})},l:(K,Y,oe,se,ye,ze,Fe)=>{var Ve=hr(Y,oe);K=Tt(K),K=Ns(K),ye=Jt(se,ye),Xo(K,function(){bi(`Cannot call ${K} due to unbound types`,Ve)},Y-1),at([],Ve,Qt=>(Qt=[Qt[0],null].concat(Qt.slice(1)),Aa(K,Bi(K,Qt,null,ye,ze,Fe),Y-1),[]))},c:(K,Y,oe,se,ye)=>{Y=Tt(Y);let ze=Ve=>Ve;if(se===0){var Fe=32-8*oe;ze=Ve=>Ve<<Fe>>>Fe,ye=ze(ye)}$t(K,{name:Y,N:ze,T:(Ve,Qt)=>Qt,X:ci(Y,oe,se!==0),V:null})},a:(K,Y,oe)=>{function se(ze){return new ye(T.buffer,N[ze+4>>2],N[ze>>2])}var ye=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,BigInt64Array,BigUint64Array][Y];oe=Tt(oe),$t(K,{name:oe,N:se,X:se},{wa:!0})},h:K=>{$t(K,Ua)},A:(K,Y)=>{Y=Tt(Y),$t(K,{name:Y,N(oe){var se=(se=oe+4)?Et.decode(w.subarray(se,fe(w,se,N[oe>>2],!0))):"";return hu(oe),se},T(oe,se){se instanceof ArrayBuffer&&(se=new Uint8Array(se));var ye=typeof se=="string";if(!(ye||ArrayBuffer.isView(se)&&se.BYTES_PER_ELEMENT==1))throw new st("Cannot pass non-string to std::string");var ze=ye?ii(se):se.length,Fe=vb(4+ze+1),Ve=Fe+4;return N[Fe>>2]=ze,ye?$o(se,Ve,ze+1):w.set(se,Ve),oe!==null&&oe.push(hu,Fe),Fe},X:he,V(oe){hu(oe)}})},f:(K,Y,oe)=>{if(oe=Tt(oe),Y===2)var se=xt,ye=Qi,ze=mr;else se=Po,ye=Hr,ze=wc;$t(K,{name:oe,N:Fe=>{var Ve=se(Fe+4,N[Fe>>2]*Y,!0);return hu(Fe),Ve},T:(Fe,Ve)=>{if(typeof Ve!="string")throw new st(`Cannot pass non-string to C++ string type ${oe}`);var Qt=ze(Ve),Ht=vb(4+Qt+Y);return N[Ht>>2]=Qt/Y,ye(Ve,Ht+4,Qt+Y),Fe!==null&&Fe.push(hu,Ht),Ht},X:he,V(Fe){hu(Fe)}})},i:(K,Y,oe,se,ye,ze)=>{ge[K]={name:Tt(Y),ia:Jt(oe,se),Y:Jt(ye,ze),la:[]}},e:(K,Y,oe,se,ye,ze,Fe,Ve,Qt,Ht)=>{ge[K].la.push({qa:Tt(Y),va:oe,ta:Jt(se,ye),ua:ze,Ba:Fe,Aa:Jt(Ve,Qt),Ca:Ht})},C:(K,Y)=>{Y=Tt(Y),$t(K,{ma:!0,name:Y,N:()=>{},T:()=>{}})},p:(K,Y,oe)=>{var[se,...ye]=pr(K,Y);Y=se.T.bind(se);var ze=ye.map(Qt=>Qt.X.bind(Qt));K--;var Fe={toValue:Sc};switch(K=ze.map((Qt,Ht)=>{var yt=`argFromPtr${Ht}`;return Fe[yt]=Qt,`${yt}(args${Ht?"+"+8*Ht:""})`}),oe){case 0:var Ve="toValue(handle)";break;case 2:Ve="new (toValue(handle))";break;case 3:Ve="";break;case 1:Fe.getStringOrSymbol=Zj,Ve="toValue(handle)[getStringOrSymbol(methodName)]"}return Ve+=`(${K})`,se.ma||(Fe.toReturnWire=Y,Fe.emval_returnValue=ZC,Ve=`return emval_returnValue(toReturnWire, destructorsRef, ${Ve})`),Ve=`return function (handle, methodName, destructorsRef, args) {
  ${Ve}
  }`,oe=new Function(Object.keys(Fe),Ve)(...Object.values(Fe)),Ve=`methodCaller<(${ye.map(Qt=>Qt.name)}) => ${se.name}>`,Xm(yi(Ve,oe))},E:Go,o:(K,Y,oe,se,ye)=>XA[K](Y,oe,se,ye),D:K=>{var Y=Sc(K);ce(Y),Go(K)},s:(K,Y,oe,se)=>{var ye=new Date().getFullYear(),ze=new Date(ye,0,1).getTimezoneOffset();ye=new Date(ye,6,1).getTimezoneOffset(),N[K>>2]=60*Math.max(ze,ye),M[Y>>2]=+(ze!=ye),Y=Fe=>{var Ve=Math.abs(Fe);return`UTC${0<=Fe?"-":"+"}${String(Math.floor(Ve/60)).padStart(2,"0")}${String(Ve%60).padStart(2,"0")}`},K=Y(ze),Y=Y(ye),ye<ze?($o(K,oe,17),$o(Y,se,17)):($o(K,se,17),$o(Y,oe,17))},y:K=>{var Y=w.length;if(K>>>=0,2147483648<K)return!1;for(var oe=1;4>=oe;oe*=2){var se=Y*(1+.2/oe);se=Math.min(se,K+100663296);e:{se=(Math.min(2147483648,65536*Math.ceil(Math.max(K,se)/65536))-x.buffer.byteLength+65535)/65536|0;try{x.grow(se),D();var ye=1;break e}catch{}ye=void 0}if(ye)return!0}return!1},t:(K,Y)=>{var oe=0,se=0,ye;for(ye of hD()){var ze=Y+oe;N[K+se>>2]=ze,oe+=$o(ye,ze,1/0)+1,se+=4}return 0},u:(K,Y)=>{var oe=hD();N[K>>2]=oe.length,K=0;for(var se of oe)K+=ii(se)+1;return N[Y>>2]=K,0},v:()=>52,w:function(){return 70},k:(K,Y,oe,se)=>{for(var ye=0,ze=0;ze<oe;ze++){var Fe=N[Y>>2],Ve=N[Y+4>>2];Y+=8;for(var Qt=0;Qt<Ve;Qt++){var Ht=K,yt=w[Fe+Qt],Io=$j[Ht];yt===0||yt===10?(Ht=Ht===1?p:g,yt=fe(Io,0),yt=Et.decode(Io.buffer?Io.subarray(0,yt):new Uint8Array(Io.slice(0,yt))),Ht(yt),Io.length=0):Io.push(yt)}ye+=Ve}return N[se>>2]=ye,0}},eh=await(async function(){var K;function Y(se){var ye;return eh=se.exports,x=eh.F,D(),Gr=eh.H,se=eh,mD=se.I,i._malloc=vb=se.J,i._free=hu=se.K,v--,(ye=i.monitorRunDependencies)==null||ye.call(i,v),v==0&&F&&(se=F,F=null,se()),eh}v++,(K=i.monitorRunDependencies)==null||K.call(i,v);var oe={a:eY};return i.instantiateWasm?new Promise(se=>{i.instantiateWasm(oe,(ye,ze)=>{se(Y(ye))})}):(U??(U=Ae("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C0EAEKEDRQRAQZiDASEBIARBmIMBQRgQiwFFDQJBsIMBIQEgBEGwgwFBGBCLAUUNAkEAIQBBvO4BLQAARQRAA0AgAEECdCAAQcYfEKIDNgKM7gEgAEEBaiIAQQZHDQALQbzuAUEBOgAAQaTuAUGM7gEoAgA2AgALQYzuASEBIAJBCGoiAEGM7gFBGBCLAUUNAkGk7gEhASAAQaTuAUEYEIsBRQ0CQRgQNCIBRQ0BCyABIAIpAgg3AgAgASACKQIYNwIQIAEgAikCEDcCCAwBC0EAIQELIAJBIGokAEGc8QFBAToAAEGY8QEgATYCACABC80KAgV/CX4jAEHgAGsiBSQAIARC////////P4MhCiACIASFQoCAgICAgICAgH+DIQsgAkL///////8/gyIMQiCIIQ8gBEIwiKdB//8BcSEHAkACQCACQjCIp0H//wFxIglB//8Ba0GCgH5PBEAgB0H//wFrQYGAfksNAQsgAVAgAkL///////////8AgyINQoCAgICAgMD//wBUIA1CgICAgICAwP//AFEbRQRAIAJCgICAgICAIIQhCwwCCyADUCAEQv///////////wCDIgJCgICAgICAwP//AFQgAkKAgICAgIDA//8AURtFBEAgBEKAgICAgIAghCELIAMhAQwCCyABIA1CgICAgICAwP//AIWEUARAIAIgA4RQBEBCgICAgICA4P//ACELQgAhAQwDCyALQoCAgICAgMD//wCEIQtCACEBDAILIAMgAkKAgICAgIDA//8AhYRQBEAgASANhEIAIQFQBEBCgICAgICA4P//ACELDAMLIAtCgICAgICAwP//AIQhCwwCCyABIA2EUARAQgAhAQwCCyACIAOEUARAQgAhAQwCCyANQv///////z9YBEAgBUHQAGogASAMIAEgDCAMUCIGG3lCwABCACAGG3ynIgZBD2sQREEQIAZrIQYgBSkDWCIMQiCIIQ8gBSkDUCEBCyACQv///////z9WDQAgBUFAayADIAogAyAKIApQIggbeULAAEIAIAgbfKciCEEPaxBEIAYgCGtBEGohBiAFKQNIIQogBSkDQCEDCyAHIAlqIAZqQf//AGshBgJAIApCD4YiDkIgiEKAgICACIQiAiABQiCIIgR+IhAgA0IPhiIRQiCIIgogD0KAgASEIg1+fCIPIBBUrSAPIANCMYggDoRC/////w+DIgMgDEL/////D4MiDH58Ig4gD1StfCACIA1+fCAOIA4gEUKAgP7/D4MiDyAMfiIRIAQgCn58IhAgEVStIBAgECADIAFC/////w+DIgF+fCIQVq18fCIOVq18IAMgDX4iEiACIAx+fCIRIBJUrUIghiARQiCIhHwgDiAOIBFCIIZ8Ig5WrXwgDiANIA9+Ig0gCiAMfnwiDCABIAJ+fCICIAMgBH58IgNCIIggAiADVq0gDCANVK0gAiAMVK18fEIghoR8IgIgDlStfCACIBAgBCAPfiIMIAEgCn58IgRCIIggBCAMVK1CIIaEfCIKIBBUrSAKIANCIIZ8IgMgClStfHwiCiACVK18IAogAyAEQiCGIgIgASAPfnwiASACVK18IgIgA1StfCIEIApUrXwiA0KAgICAgIDAAINQRQRAIAZBAWohBgwBCyABQj+IIANCAYYgBEI/iIQhAyAEQgGGIAJCP4iEIQQgAUIBhiEBIAJCAYaEIQILIAZB//8BTgRAIAtCgICAgICAwP//AIQhC0IAIQEMAQsCfiAGQQBMBEBBASAGayIHQf8ATQRAIAVBMGogASACIAZB/wBqIgYQRCAFQSBqIAQgAyAGEEQgBUEQaiABIAIgBxCKASAFIAQgAyAHEIoBIAUpAzAgBSkDOIRCAFKtIAUpAyAgBSkDEISEIQEgBSkDKCAFKQMYhCECIAUpAwAhBCAFKQMIDAILQgAhAQwCCyADQv///////z+DIAatQjCGhAsgC4QhCyABUCACQgBZIAJCgICAgICAgICAf1EbRQRAIAsgBEIBfCIBUK18IQsMAQsgASACQoCAgICAgICAgH+FhFBFBEAgBCEBDAELIAsgBCAEQgGDfCIBIARUrXwhCwsgACABNwMAIAAgCzcDCCAFQeAAaiQACwYAIAAQLQt8AQN/IwBBEGsiASQAIAEgADYCDCMAQRBrIgIkACAAKAIAQX9HBEAgAkEIaiACQQxqIAFBDGoQVRBVIQMDQCAAKAIAQQFGDQALIAAoAgBFBEAgAEEBNgIAIAMQ0gIgAEF/NgIACwsgAkEQaiQAIAAoAgQgAUEQaiQAQQFrCyAAIAAgAUEBazYCBCAAQeDVATYCACAAQZCtATYCACAAC/cFAQl/IwBBEGsiCSQAIAEQ1wIgCUEMaiABEFUhCCAAQQhqIgMQayACTQRAAkAgAkEBaiIAIAMQayIBSwRAIwBBIGsiCiQAAkAgACABayIHIAMoAgggAygCBGtBAnVNBEAgAyAHENkCDAELIApBDGohAQJ/IAMQayAHaiEFIwBBEGsiACQAIAAgBTYCDCAFELwCIgRNBEAgAxC5AiIFIARBAXZJBEAgACAFQQF0NgIIIABBCGogAEEMahCgASgCACEECyAAQRBqJAAgBAwBCxCMAQALIQQgAxBrIQUjAEEQayIAJAAgASADQQxqIgs2AhAgAUEANgIMIAQEfyAAQQhqIAsgBBC7AiAAKAIIIQYgACgCDAVBAAshBCABIAY2AgAgASAGIAVBAnRqIgU2AgggASAGIARBAnRqNgIMIAEgBTYCBCAAQRBqJAAjAEEQayIGJAAgASgCCCEEIAZBBGoiACABQQhqNgIIIAAgBDYCACAAIAQgB0ECdGo2AgQgACgCACEEA0AgACgCBCAERwRAIAEoAhAaIAQQugIgACAAKAIAQQRqIgQ2AgAMAQsLIAAoAgggACgCADYCACAGQRBqJAAgASgCBCADKAIAIgAgAygCBGtqIQQgAygCBCAAayIHBEAgBCAAIAf8CgAACyABIAQ2AgQgAyADKAIANgIEIAMgAUEEahDXASADQQRqIAFBCGoQ1wEgA0EIaiABQQxqENcBIAEgASgCBDYCACADEGsaIAEoAgQhAANAIAEoAggiBCAARwRAIAEgBEEEazYCCCABKAIQGgwBCwsgASgCACIABEAgASgCECAAIAEoAgwgASgCAGtBAnUQuAILCyAKQSBqJAAMAQsgACABSQRAIAMoAgAgAEECdGohACADEGsaIAMgABDYAgsLCyADIAIQggEoAgAEQCADIAIQggEoAgAQvwELIAgQrAEhACADIAIQggEgADYCACAIKAIAIQAgCEEANgIAIAAEQCAAEL8BCyAJQRBqJAALySgBC38jAEEQayIKJAACQAJAAkACQAJAAkACQAJAAkACQCAAQfQBTQRAQYzqASgCACIEQRAgAEELakH4A3EgAEELSRsiBkEDdiIAdiIBQQNxBEACQCABQX9zQQFxIABqIgJBA3QiAUG06gFqIgAgASgCvOoBIgEoAggiBUYEQEGM6gEgBEF+IAJ3cTYCAAwBCyAFIAA2AgwgACAFNgIICyABQQhqIQAgASACQQN0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KAIAKAIcEQQAC8EBAQN/IAAtAABBIHFFBEACQCAAKAIQIgMEfyADBSAAEN8BDQEgACgCEAsgACgCFCIEayACSQRAIAAgASACIAAoAiQRAwAaDAELAkACQCACRSAAKAJQQQBIcg0AIAIhAwNAIAEgA2oiBUEBay0AAEEKRwRAIANBAWsiAw0BDAILCyAAIAEgAyAAKAIkEQMAIANJDQIgAiADayECIAAoAhQhBAwBCyABIQULIAQgBSACEHEaIAAgACgCFCACajYCFAsLC6EBAQJ/AkAgABAfRSACIAFrQQVIcg0AIAEgAhDHASACQQRrIQQgABAjIgIgABAfaiEFAkADQAJAIAIsAAAhACABIARPDQAgAEEATCAAQf8ATnJFBEAgASgCACACLAAARw0DCyABQQRqIQEgAiAFIAJrQQFKaiECDAELCyAAQQBMIABB/wBOcg0BIAIsAAAgBCgCAEEBa0sNAQsgA0EENgIACwtQAQF+AkAgA0HAAHEEQCABIANBQGqthiECQgAhAQwBCyADRQ0AIAIgA60iBIYgAUHAACADa62IhCECIAEgBIYhAQsgACABNwMAIAAgAjcDCAtpAQF/IwBBgAJrIgUkACAEQYDABHEgAiADTHJFBEAgBSABIAIgA2siA0GAAiADQYACSSIBGxCYAiABRQRAA0AgACAFQYACEEIgA0GAAmsiA0H/AUsNAAsLIAAgBSADEEILIAVBgAJqJAALBABBAAsKACAALQALQQd2CwoAIABB0PIBEHoLCgAgAEHY8gEQegvPCQIEfwR+IwBB8ABrIgYkACAEQv///////////wCDIQkCQAJAIAFQIgUgAkL///////////8AgyIKQoCAgICAgMD//wB9QoCAgICAgMCAgH9UIApQG0UEQCADQgBSIAlCgICAgICAwP//AH0iC0KAgICAgIDAgIB/ViALQoCAgICAgMCAgH9RGw0BCyAFIApCgICAgICAwP//AFQgCkKAgICAgIDA//8AURtFBEAgAkKAgICAgIAghCEEIAEhAwwCCyADUCAJQoCAgICAgMD//wBUIAlCgICAgICAwP//AFEbRQRAIARCgICAgICAIIQhBAwCCyABIApCgICAgICAwP//AIWEUARAQoCAgICAgOD//wAgAiABIAOFIAIgBIVCgICAgICAgICAf4WEUCIFGyEEQgAgASAFGyEDDAILIAMgCUKAgICAgIDA//8AhYRQDQEgASAKhFAEQCADIAmEQgBSDQIgASADgyEDIAIgBIMhBAwCCyADIAmEUEUNACABIQMgAiEEDAELIAMgASABIANUIAkgClYgCSAKURsiCBshCiAEIAIgCBsiDEL///////8/gyEJIAIgBCAIGyILQjCIp0H//wFxIQcgDEIwiKdB//8BcSIFRQRAIAZB4ABqIAogCSAKIAkgCVAiBRt5QsAAQgAgBRt8pyIFQQ9rEEQgBikDaCEJIAYpA2AhCkEQIAVrIQULIAEgAyAIGyEDIAtC////////P4MhASAHBH4gAQUgBkHQAGogAyABIAMgASABUCIHG3lCwABCACAHG3ynIgdBD2sQREEQIAdrIQcgBikDUCEDIAYpA1gLQgOGIANCPYiEQoCAgICAgIAEhCEBIAlCA4YgCkI9iIQgAiAEhSEEAn4gA0IDhiICIAUgB0YNABogBSAHayIHQf8ASwRAQgAhAUIBDAELIAZBQGsgAiABQYABIAdrEEQgBkEwaiACIAEgBxCKASAGKQM4IQEgBikDMCAGKQNAIAYpA0iEQgBSrYQLIQlCgICAgICAgASEIQsgCkIDhiEKAkAgBEIAUwRAQgAhA0IAIQQgCSAKhSABIAuFhFANAiAKIAl9IQIgCyABfSAJIApWrX0iBEL/////////A1YNASAGQSBqIAIgBCACIAQgBFAiBxt5QsAAQgAgBxt8p0EMayIHEEQgBSAHayEFIAYpAyghBCAGKQMgIQIMAQsgCSAKfCICIAlUrSABIAt8fCIEQoCAgICAgIAIg1ANACAJQgGDIARCP4YgAkIBiISEIQIgBUEBaiEFIARCAYghBAsgDEKAgICAgICAgIB/gyEDIAVB//8BTgRAIANCgICAgICAwP//AIQhBEIAIQMMAQtBACEHAkAgBUEASgRAIAUhBwwBCyAGQRBqIAIgBCAFQf8AahBEIAYgAiAEQQEgBWsQigEgBikDACAGKQMQIAYpAxiEQgBSrYQhAiAGKQMIIQQLIARCPYYgAkIDiIQhASAEQgOIQv///////z+DIAetQjCGhCADhCEEAkACQCACp0EHcSIFQQRHBEAgBCABIAEgBUEES618IgNWrXwhBAwBCyAEIAEgASABQgGDfCIDVq18IQQMAQsgBUUN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C14BA38gAEEANgIIIABCADcCACABKAIAIQMgASgCBCIBIANrIgRBAnUiAgRAIAAgAhCuAyAAKAIEIQIgBEUgASADRnJFBEAgAiADIAT8CgAACyAAIAIgBGo2AgQLIAALDQAgACgCACABQQJ0agsXACAAEEcEQCAAIAE2AgQPCyAAIAEQUAthAQF/IwBBEGsiAiQAIAIgADYCDAJAIAAgAUYNAANAIAIgAUEBayIBNgIIIAAgAU8NASACKAIMIAIoAggQ8wIgAiACKAIMQQFqIgA2AgwgAigCCCEBDAALAAsgAkEQaiQAC6wBAQR/IwBBEGsiByQAAkAgAEUNACAEKAIMIQYgAiABa0ECdSIIQQBKBEAgACABIAgQjQIgCEcNAQsgAyABa0ECdSIBIAZIBEAgACAHQQRqIAYgAWsiASAFEP0CIgUQIyABEI0CIQYgBRA5GiABIAZHDQELIAMgAmtBAnUiAUEASgRAIAAgAiABEI0CIAFHDQELIAQoAgwaIARBADYCDCAAIQkLIAdBEGokACAJCycBAX8jAEEQayIDJAAgAyACNgIMIABB5AAgASACENEBIANBEGokAAvbAQIBfwJ+QQEhBAJAIABCAFIgAUL///////////8AgyIFQoCAgICAgMD//wBWIAVCgICAgICAwP//AFEbDQAgAkIAUiADQv///////////wCDIgZCgICAgICAwP//AFYgBkKAgICAgIDA//8AURsNACAAIAKEIAUgBoSEUARAQQAPCyABIAODQgBZBEAgACACVCABIANTIAEgA1EbBEBBfw8LIAAgAoUgASADhYRCAFIPCyAAIAJWIAEgA1UgASADURsEQEF/DwsgACAChSABIAOFhEIAUiEECyAEC+wBAQR/IwBBEGsiBCQAIABBADYCBCMAQRBrIgUkACAEQQA6AA8gACAAKAIAQQxrKAIAahDZASEGIAAgACgCAEEMaygCAGohAwJAIAYEQCADKAJIBEAgACAAKAIAQQxrKAIAaigCSBDFAwsgBCAAIAAoAgBBDGsoAgBqENkBOgAPDAELIANBBBDVAQsgBUEQaiQAQQQhAyAELQAPBEAgACAAIAAoAgBBDGsoAgBqKAIYIgMgASACIAMoAgAoAiARAwAiATYCBEEGQQAgASACRxshAwsgACAAKAIAQQxrKAIAaiADENUBIARB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AxsLPAAgAEEANgIIIABCADcCACAAIAEoAgA2AgAgACABKAIENgIEIAAgASgCCDYCCCABQQA2AgggAUIANwIACywBAX8gAEEANgIIIABCADcCACAAIAEoAgAiAiABKAIEIgEgASACaxDAAyAACwgAIABB/wFxC/wBAQN/IAAoAgQgACgCACIDa0ECdSICIAFJBEAjAEEgayIDJAACQCABIAJrIgIgACgCCCAAKAIEIgFrQQJ1TQRAIAAoAgQiASACQQJ0aiECA0AgASACRgRAIAAgAjYCBAUgAUEANgIAIAFBBGohAQwBCwsMAQsgA0EMaiAAIAEgACgCAGtBAnUgAmoQtgEgACgCBCAAKAIAa0ECdSAAEIcCIgQoAggiASACQQJ0aiECA0AgASACRwRAIAFBADYCACABQQRqIQEMAQsLIAQgAjYCCCAAIAQQhQIgBBCBAgsgA0EgaiQADwsgASACSQRAIAAgAyABQQJ0ajYCBAsLUgECf0HU3gEoAgAiASAAQQdqQXhxIgJqIQACQCACQQAgACABTRtFBEAgAD8AQRB0TQ0BIAAQGA0BC0GI6gFBMDYCAEF/DwtB1N4BIAA2AgAgAQt/AgF+A38CQCAAQoCAgIAQVARAIAAhAgwBCwNAIAFBAWsiASAAIABCCoAiAkIKfn2nQTByOgAAIABC/////58BViACIQANAAsLIAJQRQRAIAKnIQMDQCABQQFrIgEgAyADQQpuIgRBCmxrQTByOgAAIANBCUsgBCEDDQALCyABC78BAQN/IAAoAgQgACgCACIDayICIAFJBEAjAEEgayIDJAACQCABIAJrIgIgACgCCCAAKAIEIgFrTQRAIAAgAhCYAwwBCyACIANBDGogACABIAJqIAAoAgBrELQBIAAoAgQgACgCAGsgABDGASIEKAIIIgFqIQIDQCABIAJHBEAgAUEAOgAAIAFBAWohAQwBCwsgBCACNgIIIAAgBBDvASAEELoBCyADQSBqJAAPCyABIAJJBEAgACABIANqNgIECwt9AQN/AkACQCAAIgFBA3FFDQAgAS0AAEUEQEEADwsDQCABQQFqIgFBA3FFDQEgAS0AAA0ACwwBCwNAIAEiAkEEaiEBQYCChAggAigCACIDayADckGAgYKEeHFBgIGChHhGDQALA0AgAiIBQQFqIQIgAS0AAA0ACwsgASAA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BEBBCiEBIAAQXgwBCyAAEH5BAWshASAAKAIECyIDIAFGBEAgACABQQEgASABEPQBIAAQIxoMAQsgABAjGiAEDQAgACIBIANBAWoQUAwBCyAAKAIAIQEgACADQQFqNgIECyABIANqIgAgAkEPahBdIAJBADoADiAAQQFqIAJBDmoQXSACQRBqJAALoQIBA38jAEEgayIIJABB9////wciCSABQX9zaiACTwRAIAAQIyEKIAFB8////wNJBEAgCCABQQF0NgIcIAggASACajYCECAIQRBqIAhBHGoQoAEoAgAQnwFBAWohCQsgCEEcaiAIQRhqIAAQVSgCABC8ASAIQRBqIAkQngEgCCgCECECIAgoAhQaIAQEQCACIAogBBBNCyAGBEAgAiAEaiAHIAYQTQsgAyAEIAVqIglrIQcgAyAJRwRAIAIgBGogBmogBCAKaiAFaiAHEE0LIAFBCkcEQCAKEIsCCyAAIAI2AgAgACAIKAIUEFwgACAEIAZqIAdqIgA2AgQgCEEAOgAPIAAgAmogCEEPahBdIAhBHGoQuwEgCEEgaiQADwsQWwALCQAgAEEBEKgCCwoAIAAoAgAQHxoLCQAgACABEFUaCwcAIABBAkkLBABBBAsoAQF/IAAgACgCBEEBayIBNgIEIAFBf0YEQCAAIAAoAgAoAggRAgALC5UBAQN/IwBBEGsiBCQAIAQgATYCDCAEIAM2AgggBEEEaiAEQQxqEGMgBCgCCCEDIwBBEGsiASQAIAEgAzYCDCABIAM2AghBfyEFAkBBAEEAIAIgAxDRASIDQQBIDQAgACADQQFqIgMQNCIANgIAIABFDQAgACADIAIgASgCDBDRASEFCyABQRBqJAAQYiAEQRBqJAAgBQsPACAAIAAoAgAoAiQRAAALEQAgACABIAEoAgAoAiARAQALDgAgACABKAIANgIAIAALCABB/////wcLBQBB/wALOwAgACADNgIQIAAgAQR/IAEQUwVBAAsiAzYCACAAIAIgA2oiAjYCCCAAIAEgA2o2AgwgACACNgIEIAALYQEBfyMAQRBrIgIkACACIAA2AgwCQCAAIAFGDQADQCACIAFBBGsiATYCCCAAIAFPDQEgAigCDCACKAIIENcBIAIgAigCDEEEaiIANgIMIAIoAgghAQwACwALIAJBEGokAAs5AgF/AX4jAEEQayIEJAAgAykDACEFIAQgAykDCDcDCCAEIAU3AwAgACABIAIgBBDAASAEQRBqJAAL0AEBAn8gAkGAEHEEQCAAQSs6AAAgAEEBaiEACyACQYAIcQRAIABBIzoAACAAQQFqIQALIAJBhAJxIgNBhAJHBEAgAEGu1AA7AAAgAEECaiEACyACQYCAAXEhAgNAIAEtAAAiBARAIAAgBDoAACAAQQFqIQAgAUEBaiEBDAELCyAAAn8CQCADQYACRwRAIANBBEcNAUHGAEHmACACGwwCC0HFAEHlACACGwwBC0HBAEHhACACGyADQYQCRg0AGkHHAEHnACACGws6AAAgA0GEAkcLKwEBfyMAQRBrIgUkACAFIAQoAgA2AgAgACABIAIgAyAFEJYBIAVBEGokAAuqAQEBfwJAIANBgBBxRSACRXINACADQcoAcSIEQQhGIARBwABGcg0AIABBKzoAACAAQQFqIQALIANBgARxBEAgAEEjOgAAIABBAWohAAsDQCABLQAAIgQEQCAAIAQ6AAAgAEEBaiEAIAFBAWohAQwBCwsgAAJ/Qe8AIANBygBxIgFBwABGDQAaQdgAQfgAIANBgIABcRsgAUEIRg0AGkHkAEH1ACACGws6AAALDAAgABAjIAFBAnRqC5IEAQt/IwBBgAFrIgokACAKIAE2AnwgAiADELUCIQggCkHjADYCECAKQQhqQQAgCkEQaiIJEDYhDwJAAkACQCAIQeUATwRAIAgQNCIJRQ0BIA8gCRA8CyAJIQcgAiEBA0AgASADRgRAA0AgACAKQfwAaiIBECtBASAIGwRAIAAgARArBEAgBSAFKAIAQQJyNgIACwNAIAIgA0YNBiAJLQAAQQJGDQcgCUEBaiEJIAJBDGohAgwACwALIAAQNyEOIAZFBEAgBCAOEEEhDgsgDUEBaiEMQQAhECAJIQcgAiEBA0AgASADRgRAIAwhDSAQRQ0CIAAQPhogCSEHIAIhASAIIAtqQQJJDQIDQCABIANGBEAMBAUCQCAHLQAAQQJHDQAgARAfIA1GDQAgB0EAOgAAIAtBAWshCwsgB0EBaiEHIAFBDGohAQwBCwALAAUCQCAHLQAAQQFHDQAgASANEMwBKAIAIRECQCAGBH8gEQUgBCAREEELIA5GBEBBASEQIAEQHyAMRw0CIAdBAjoAACALQQFqIQsMAQsgB0EAOgAACyAIQQFrIQgLIAdBAWohByABQQxqIQEMAQsACwALAAUgB0ECQQEgARBaIgwbOgAAIAdBAWohByABQQxqIQEgCyAMaiELIAggDGshCAwBCwALAAsQPQALIAUgBSgCAEEEcjYCAAsgDxA1IApBgAFqJAAgAgsRACAAIAEgACgCACgCDBEEAAuTBAELfyMAQYABayIKJAAgCiABNgJ8IAIgAxC1AiEIIApB4wA2AhAgCkEIakEAIApBEGoiCRA2IQ8CQAJAAkAgCEHlAE8EQCAIEDQiCUUNASAPIAkQPAsgCSEHIAIhAQNAIAEgA0YEQANAIAAgCkH8AGoiARAsQQEgCBsEQCAAIAEQLARAIAUgBSgCAEECcjYCAAsDQCACIANGDQYgCS0AAEECRg0HIAlBAWohCSACQQxqIQIMAAsACyAAEDghDiAGRQRAIAQgDhDOASEOCyANQQFqIQxBACEQIAkhByACIQEDQCABIANGBEAgDCENIBBFDQIgABA/GiAJIQcgAiEBIAggC2pBAkkNAgNAIAEgA0YEQAwEBQJAIActAABBAkcNACABEB8gDUYNACAHQQA6AAAgC0EBayELCyAHQQFqIQcgAUEMaiEBDAELAAsABQJAIActAABBAUcNACABIA0QIiwAACERAkAgBgR/IBEFIAQgERDOAQsgDkYEQEEBIRAgARAfIAxHDQIgB0ECOgAAIAtBAWohCwwBCyAHQQA6AAALIAhBAWshCAsgB0EBaiEHIAFBDGohAQwBCwALAAsABSAHQQJBASABEFoiDBs6AAAgB0EBaiEHIAFBDGohASALIAxqIQsgCCAMayEIDAELAAsACxA9AAsgBSAFKAIAQQRyNgIACyAPEDUgCkGAAWokACACC0oBAn8CQCAALQAAIgJFIAIgAS0AACIDR3INAANAIAEtAAEhAyAALQABIgJFDQEgAUEBaiEBIABBAWohACACIANGDQALCyACIANrC4QBAQJ/IwBBoAFrIgQkACAEIAAgBEGeAWogARsiADYClAEgBCABQQFrIgVBACABIAVPGzYCmAEgBEEAQZAB/AsAIARBfzYCTCAEQeIANgIkIARBfzYCUCAEIARBnwFqNgIsIAQgBEGUAWo2AlQgAEEAOgAAIAQgAiADEM0DIARBoAFqJAALuwIBBH8gA0H87QEgAxsiBSgCACEDAkAC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IBAtIAAoAiQQLSAAKAIwEC0gACgCPBAtCyAACwcAIAEgAGsLDABBARDWARogABAtCwkAIAAQsQEQLQsTACAAIAEgAiAAKAIAKAIwEQMACwkAIAAQ2AEQLQsMACAAQQRqENoBIAALDAAgAEEIahDaASAACygBAn8jAEEQayICJAAgASgCACAAKAIASCEDIAJBEGokACABIAAgAxsLEAAgACABNwMIIABCADcDAAsCAAsUACAAQZj1ADYCACAAQQRqECUgAAvyAwICfgV/IwBBIGsiBSQAIAFC////////P4MhAgJ+IAFCMIhC//8BgyIDpyIEQYH4AGtB/Q9NBEAgAkIEhiAAQjyIhCECIARBgPgAa60hAwJAIABC//////////8PgyIAQoGAgICAgICACFoEQCACQgF8IQIMAQsgAEKAgICAgICAgAhSDQAgAkIBgyACfCECC0IAIAIgAkL/////////B1YiBBshACAErSADfAwBCyAAIAKEUCADQv//AVJyRQRAIAJCBIYgAEI8iIRCgICAgICAgASEIQBC/w8MAQsgBEH+hwFLBEBCACEAQv8PDAELQYD4AEGB+AAgA1AiBxsiCCAEayIGQfAASgRAQgAhAEIADAELIAVBEGogACACIAJCgICAgICAwACEIAcbIgJBgAEgBmsQRCAFIAAgAiAGEIoBIAUpAwhCBIYgBSkDACICQjyIhCEAAkAgBCAIRyAFKQMQIAUpAxiEQgBSca0gAkL//////////w+DhCICQoGAgICAgICACFoEQCAAQgF8IQAMAQsgAkKAgICAgICAgAhSDQAgAEIBgyAAfCEACyAAQoCAgICAgIAIhSAAIABC/////////wdWIgQbIQAgBK0LIQIgBUEgaiQAIAFCgICAgICAgICAf4MgAkI0hoQgAIS/C4kCAAJAIAAEfyABQf8ATQ0BAkBB3OEBKAIAKAIARQRAIAFBgH9xQYC/A0YNAwwBCyABQf8PTQRAIAAgAUE/cUGAAXI6AAEgACABQQZ2QcABcjoAAEECDwsgAUGAQHFBgMADRyABQYCwA09xRQRAIAAgAUE/cUGAAXI6AAIgACABQQx2QeABcjoAACAAIAFBBnZBP3FBgAFyOgABQQMPCyABQYCABGtB//8/TQRAIAAgAUE/cUGAAXI6AAMgACABQRJ2QfABcjoAACAA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AXI2AgQgCSAGIAkoAgBBAXFyQQJyNgIAIAEgBmoiAiACKAIEQQFyNgIEIAEgBhDbAQsCQCAAKAIEIgJBA3FFDQAgAkF4cSIBIAVBEGpNDQAgACAFIAJBAXFyQQJyNgIEIAAgBWoiBCABIAVrIgJBA3I2AgQgACABaiIBIAEoAgRBAXI2AgQgBCACENsBCyAAQQhqCwsiAEUNARogCCAANgIMQQAhAQsgAQshAEEAIAgoAgwgABshAQsgCEEQaiQAIAENAEHk/gEoAgAiAEUNACAAEQwADAELCyABRQRAEOsBCyABCwoAIAEgAGtBDG0LCQAgABAuNgIACyMBAn8gACEBA0AgASICQQRqIQEgAigCAA0ACyACIABrQQJ1Cy8BAX8jAEEQayIDJAACQCAAIAFGBEAgAEEAOgB4DAELIAEgAhCpAQsgA0EQaiQACxAAIAAoAgggACgCAGtBAnULCQAgAEEANgIAC0kBAX8jAEEQayIDJAACQAJAIAJBHksNACABLQB4QQFxDQAgAUEBOgB4DAELIAIQwQIhAQsgA0EQaiQAIAAgAjYCBCAAIAE2AgALOgECfyMAQRBrIgAkACAAQf////8DNgIMIABB/////wc2AgggAEEMaiAAQQhqELUDKAIAIABBEGokAAs0AQF/IwBBEGsiAyQAIAMgARBzNgIMIAMgAhBzNgIIIAAgA0EMaiADQQhqEGYgA0EQaiQAC04BAX8jAEEQayIDJAAgAyABNgIIIAMgADYCDCADIAI2AgRBACEBIANBBGoiACADQQxqENMBRQRAIAAgA0EIahDTASEBCyADQRBqJAAgAQswAQF/IwBBEGsiAyQAIAMgATYCDCADIAI2AgggACADQQxqIANBCGoQZiADQRBqJAALMwEBfyMAQRBrIgMkACAAEB8aIAAgAhCDASADQQA6AA8gASACaiADQQ9qEF0gA0EQaiQACzEAIABB/////wNLBEAQqgIACwJ/IABBAnQhAEEEENYBBEAgAEEEELQCDAELIAAQUwsLCQAgABDtARAtCxUAIABB8KoBNgIAIABBEGoQIBogAAsVACAAQciqATYCACAAQQxqECAaIAALgAMBBH8gAiEAA0ACQCAEIAdNIAAgA09yDQAgACwAACIBQf8BcSEFAn9BASABQQBODQAaIAFBQkkNASABQV9NBEAgAyAA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ZEYNAEEAIQAgC0EANgIQIBEgDygCACALKAJkIAtBEGoQQyALKAIQBEAgBSAFKAIAQQRyNgIADAELQQEhAAsgEBAgGiANECAaIA4QIBogDBAgGiARECAaIA8QNQwDCyACIQELIANBAWohAwwACwALIAtBkARqJAAgAAsMACAAQQFBLRD9AhoLCwAgAEEBQS0QsAILHAEBfyAALQAAIQIgACABLQAAOgAAIAEgAjoAAAtlAQF/IwBBEGsiBiQAIAZBADoADyAGIAU6AA4gBiAEOgANIAZBJToADCAFBEAgBkENaiAGQQ5qEPMCCyACIAEgASACKAIAEIoCIAZBDGogAyAAKAIAEJ4DIAFqNgIAIAZBEGokAAtBACABIAIgAyAEQQQQZyEBIAMtAABBBHFFBEAgACABQdAPaiABQewOaiABIAFB5ABJGyABQcUASBtB7A5rNgIACwtAACACIAMgAEEIaiAAKAIIKAIEEQAAIgAgAEGgAmogBSAEQQAQzQEgAGsiAEGfAkwEQCABIABBDG1BDG82AgALC0AAIAIgAyAAQQhqIAAoAggoAgARAAAiACAAQagBaiAFIARBABDNASAAayIAQacBTARAIAEgAEEMbUEHbzYCAAsLQQAgASACIAMgBEEEEGghASADLQAAQQRxRQRAIAAgAUHQD2ogAUHsDmogASABQeQASRsgAUHFAEgbQewOazYCAAsLQAAgAiADIABBCGogACgCCCgCBBEAACIAIABBoAJqIAUgBEEAEM8BIABrIgBBnwJMBEAgASAAQQxtQQxvNgIACwtAACACIAMgAEEIaiAAKAIIKAIAEQAAIgAgAEGoAWogBSAEQQAQzwEgAGsiAEGnAUwEQCABIABBDG1BB282AgALCxgBAX9BDBBTIgBBADYCCCAAQgA3AgAgAAsEAEECC8oBAQR/IwBBEGsiAyQAAkAgAUH3////A00EQAJAIAEQvQEEQCAAIAEQUCAAIQQMAQsgA0EIaiABEJABQQFqEI8BIAMoAgwaIAAgAygCCCIENgIAIAAgAygCDBBcIAAgATYCBAsjAEEQayIFJAAgBSACNgIMIAQhBiABIQIDQCACBEAgBiAFKAIMNgIAIAJBAWshAiAGQQRqIQYMAQsLIAVBEGokACADQQA2AgQgBCABQQJ0aiADQQRqEFYgA0EQaiQADAELEFsA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hoRCAEKAgICAgIDAwz8QLyAFKQNIIQIgBSkDQCEEDAELIAlC////////P4MgBiAHcq1CMIaEIQILIAAgBDcDACAAIAI3AwggBUGAAWokAAuIEAIFfw9+IwBB0AJrIgUkACAEQv///////z+DIQsgAkL///////8/gyEKIAIgBIVCgICAgICAgICAf4MhDCAEQjCIp0H//wFxIQcCQAJAIAJCMIinQf//AXEiCEH//wFrQYKAfk8EQCAHQf//AWtBgYB+Sw0BCyABUCACQv///////////wCDIg5CgICAgICAwP//AFQgDkKAgICAgIDA//8AURtFBEAgAkKAgICAgIAghCEMDAILIANQIARC////////////AIMiAkKAgICAgIDA//8AVCACQoCAgICAgMD//wBRG0UEQCAEQoCAgICAgCCEIQwgAyEBDAILIAEgDkKAgICAgIDA//8AhYRQBEAgAyACQoCAgICAgMD//wCFhFAEQEIAIQFCgICAgICA4P//ACEMDAMLIAxCgICAgICAwP//AIQhDEIAIQEMAgsgAyACQoCAgICAgMD//wCFhFAEQEIAIQEMAgsgASAOhFAEQEKAgICAgIDg//8AIAwgAiADhFAbIQxCACEBDAILIAIgA4RQBEAgDEKAgICAgIDA//8AhCEMQgAhAQwCCyAOQv///////z9YBEAgBUHAAmogASAKIAEgCiAKUCIGG3lCwABCACAGG3ynIgZBD2sQREEQIAZrIQYgBSkDyAIhCiAFKQPAAiEBCyACQv///////z9WDQAgBUGwAmogAyALIAMgCyALUCIJG3lCwABCACAJG3ynIglBD2sQRCAGIAlqQRBrIQYgBSkDuAIhCyAFKQOwAiEDCyAFQaACaiALQoCAgICAgMAAhCISQg+GIANCMYiEIgJCAEKAgICAsOa8gvUAIAJ9IgRCABBAIAVBkAJqQgAgBSkDqAJ9QgAgBEIAEEAgBUGAAmogBSkDmAJCAYYgBSkDkAJCP4iEIgRCACACQgAQQCAFQfABaiAEQgBCACAFKQOIAn1CABBAIAVB4AFqIAUpA/gBQgGGIAUpA/ABQj+IhCIEQgAgAkIAEEAgBUHQAWogBEIAQgAgBSkD6AF9QgAQQCAFQcABaiAFKQPYAUIBhiAFKQPQAUI/iIQiBEIAIAJCABBAIAVBsAFqIARCAEIAIAUpA8gBfUIAEEAgBUGgAWogAkIAIAUpA7gBQgGGIAUpA7ABQj+IhEIBfSICQgAQQCAFQZABaiADQg+GQgAgAkIAEEAgBUHwAGogAkIAQgAgBSkDqAEgBSkDoAEiDiAFKQOYAXwiBCAOVK18IARCAVatfH1CABBAIAVBgAFqQgEgBH1CACACQgAQQCAGIAggB2tqIghB//8AaiEGAn4gBSkDcCITQgGGIg0gBSkDiAEiD0IBhiAFKQOAAUI/iIR8IhBC5+wAfSIUQiCIIgIgCkKAgICAgIDAAIQiFUIBhiIWQiCIIgR+IhEgAUIBhiIOQiCIIgsgECAUVq0gDSAQVq0gBSkDeEIBhiATQj+IhCAPQj+IfHx8QgF9IhNCIIgiEH58Ig0gEVStIA0gDSATQv////8PgyITIAFCP4giFyAKQgGGhEL/////D4MiCn58Ig1WrXwgBCAQfnwgBCATfiIRIAogEH58Ig8gEVStQiCGIA9CIIiEfCANIA9CIIZ8Ig8gDVStfCAPIA8gFEL/////D4MiFCAKfiINIAIgC358IhEgDVStIBEgESATIA5C/v///w+DIg1+fCIRVq18fCIPVq18IA8gBCAUfiIYIA0gEH58IgQgAiAKfnwiCiALIBN+fCIQQiCIIAogEFatIAQgGFStIAQgClatfHxCIIaEfCIEIA9UrXwgBCAEIBEgAiANfiIKIAsgFH58IgJCIIggAiAKVK1CIIaEfCIKIBFUrSAKIAogEEIghnwiClatfHwiBFatfCAEIAQgCiACQiCGIgIgDSAUfnwgAlStQn+FIgJWIAIgClJxrXwiBFatfCICQv////////8AWARAIBYgF4QhFSAFQdAAaiAEIAJCgICAgICAwABUIgetIguGIgogAiALhiAEQgGIIAdBP3OtiIQiBCADIBIQQCAIQf7/AGogBiAHG0EBayEGIAFCMYYgBSkDWH0gBSkDUCIBQgBSrX0hC0IAIAF9DAELIAVB4ABqIAJCP4YgBEIBiIQiCiACQgGIIgQgAyASEEAgAUIwhiAFKQNofSAFKQNgIgJCAFKtfSELIAEhDkIAIAJ9CyECIAZB//8BTgRAIAxCgICAgICAwP//AIQhDEIAIQEMAQsCfiAGQQBKBEAgC0IBhiACQj+IhCEBIARC////////P4MgBq1CMIaEIQsgAkIBhgwBCyAGQY9/TARAQgAhAQwCCyAFQUBrIAogBEEBIAZrEIoBIAVBMGogDiAVIAZB8ABqEEQgBUEgaiADIBIgBSkDQCIKIAUpA0giCxBAIAUpAzggBSkDKEIBhiAFKQMgIgFCP4iEfSAFKQMwIgIgAUIBhiIEVK19IQEgAiAEfQshAiAFQRBqIAMgEkIDQgAQQCAFIAMgEkIFQgAQQCALIAogAyAKQgGDIgMgAnwiAlQgASACIANUrXwiASASViABIBJRG618IgMgClStfCIEIAMgAyAEQoCAgICAgMD//wBUIAIgBSkDEFYgASAFKQMYIgRWIAEgBFEbca18IgNWrXwiBCADIARCgICAgICAwP//AFQgAiAFKQMAViABIAUpAwgiAlYgASACURtxrXwiASADVK18IAyEIQwLIAAgATcDACAAIAw3AwggBUHQAmokAAu/AgEBfyMAQdAAayIEJAACQCADQYCAAU4EQCAEQSBqIAEgAkIAQoCAgICAgID//wAQLyAEKQMoIQIgBCkDICEBIANB//8BSQRAIANB//8AayEDDAILIARBEGogASACQgBCgICAgICAgP//ABAvQf3/AiADIANB/f8CTxtB/v8BayEDIAQpAxghAiAEKQMQIQEMAQsgA0GBgH9KDQAgBEFAayABIAJCAEKAgICAgICAORAvIAQpA0ghAiAEKQNAIQEgA0H0gH5LBEAgA0GN/wBqIQMMAQsgBEEwaiABIAJCAEKAgICAgICAORAvQeiBfSADIANB6IF9TRtBmv4BaiEDIAQpAzghAiAEKQMwIQELIAQgASACQgAgA0H//wBqrUIwhhAvIAAgBCkDCDcDCCAAIAQpAwA3AwAgBEHQAGokAAs8ACAAIAE3AwAgACACQv///////z+DIAJCgICAgICAwP//AINCMIinIANCMIinQYCAAnFyrUIwhoQ3AwgLwAECAX8CfkF/IQMCQCAAQgBSIAFC////////////AIMiBEKAgICAgIDA//8AViAEQoCAgICAgMD//wBRGw0AIAJC////////////AIMiBUKAgICAgIDA//8AViAFQoCAgICAgMD//wBScQ0AIAAgBCAFhIRQBEBBAA8LIAEgAoNCAFkEQCABIAJSIAEgAlNxDQEgACABIAKFhEIAUg8LIABCAFIgASACVSABIAJRGw0AIAAgASAChYRCAFIhAwsgAws0AQF/IAFBgICAgARPBEAQjAEACyAAIAEQswIiAjYCBCAAIAI2AgAgACACIAFBAnRqNgIICwoAIABBMGtBCkkLFwAgAEEwa0EKSSAAQSByQeEAa0EGSXILEwAgAEEgciAAIABBwQBrQRpJGwspAQF/IAAoAgAiAQRAIAEQvQNBf0cEQCAAKAIARQ8LIABBADYCAAtBAQspAQF/IAAoAgAiAQRAIAEQwwNBf0cEQCAAKAIARQ8LIABBADYCAAtBAQsUACACIAAgASAAayIAEE0gACACagskAQJ/IwBBEGsiAiQAIAEgABDTASEDIAJBEGokACABIAAgAxsLDAAgAEEAIABBf0cbCywBAX8gAUEASARAEIwBAAsgACABEFMiAjYCBCAAIAI2AgAgACABIAJqNgIIC5EBAQN/AkAgASACEIoCIQQjAEEQayIDJAAgBEH3////B00EQAJAIAQQ1AEEQCAAIAQQUCAAIQUMAQsgA0EIaiAEEJ8BQQFqEJ4BIAMoAgwaIAAgAygCCCIFNgIAIAAgAygCDBBcIAAgBDYCBAsgASACIAUQtAMgA0EAOgAHIANBB2oQXSADQRBqJAAMAQsQWwALCw8AIAAgACgCGCABajYCGAsXACAAIAI2AhwgACABNgIUIAAgATYCGAtUAQJ/AkAgACgCACICRQ0AAn8gAigCGCIDIAIoAhxGBEAgAiABIAIoAgAoAjQRBAAMAQsgAiADQQRqNgIYIAMgATYCACABC0F/Rw0AIABBADYCAAsLMQEBfyAAKAIMIgEgACgCEEYEQCAAIAAoAgAoAigRAAAPCyAAIAFBBGo2AgwgASgCAAsnAQF/IAAoAgwiASAAKAIQRgRAIAAgACgCACgCJBEAAA8LIAEoAgALLgEBfyMAQRBrIgEkACABIAA2AgBB6gsgARByEH9BoPEAKAIAEGEaIAFBEGokAAskAQF/AkAgACgCACICRQ0AIAIgARDCA0F/Rw0AIABBADYCAAsLPQEBfyADBEAgACADELcDIAAoAgQhAyACIAFrIgRFIAEgAkZyRQRAIAMgASAE/AoAAAsgACADIARqNgIECwsJACAAEI8CEC0LPQEBfyAAKAIYIgIgACgCHEYEQCAAIAEQowEgACgCACgCNBEEAA8LIAAgAkEBajYCGCACIAE6AAAgARCjAQsqAQF/IAAoAgwiASAAKAIQRgRAIAAgACgCACgCJBEAAA8LIAEsAAAQowELDwAgACAAKAIAKAIYEQAAC6wCAQJ/IwBBEGsiASQAIAAgACgCAEEMaygCAGooAhgEQCABIAA2AgwgAUEAOgAIIAAgACgCAEEMaygCAGoQ2QEEQCAAIAAoAgBBDGsoAgBqKAJIIgIEQCACEMUDCyABQQE6AAgLAkAgAS0ACEUNACAAIAAoAgBBDGsoAgBqKAIYEMQDQX9HDQAgACAAKAIAQQxrKAIAakEBENUBCwJAIAEoAgwiACAAKAIAQQxrKAIAaigCGEUNACABKAIMIgAgACgCAEEMaygCAGoQ2QFFDQAgASgCDCIAIAAoAgBBDGsoAgBqKAIEQYDAAHFFDQAgASgCDCIAIAAoAgBBDGsoAgBqKAIYEMQDQX9HDQAgASgCDCIAIAAoAgBBDGsoAgBqQQEQ1QELCyABQRBqJAALCQAgABCQAhAtCy0AIABByABqEDogAEE8ahA6IABBMGoQOiAAQSRqEDogAEEYahA6IABBDGoQOgsEAEF/C3wBAn8gACAAKAJIIgFBAWsgAXI2AkggACgCFCAAKAIcRwRAIABBAEEAIAAoAiQRAwAaCyAAQQA2AhwgAEIANwMQIAAoAgAiAUEEcQRAIAAgAUEgcjYCAEF/DwsgACAAKAIsIAAoAjBqIgI2AgggACACNgIEIAFBG3RBH3ULBQAQFwALLQAgAEHMAGoQOiAAQUBrEDogAEE0ahA6IABBKGoQOiAAQRxqEDogAEEQahA6CxIAIABFBEBBAA8LIAAgARCWAgsPACAAIAEgAkE0QTUQ0QMLvAIAAkACQAJAAkACQAJAAkACQAJAAkACQCABQQlrDhIACAkKCAkBAgMECgkKCggJBQYHCyACIAIoAgAiAUEEajYCACAAIAEoAgA2AgAPCyACIAIoAgAiAUEEajYCACAAIAEyAQA3AwAPCyACIAIoAgAiAUEEajYCACAAIAEzAQA3AwAPCyACIAIoAgAiAUEEajYCACAAIAEwAAA3AwAPCyACIAIoAgAiAUEEajYCACAAIAExAAA3AwAPCyACIAIoAgBBB2pBeHEiAUEIajYCACAAIAErAwA5AwAPCyAAIAIgAxEBAAsPCyACIAIoAgAiAUEEajYCACAAIAE0AgA3AwAPCyACIAIoAgAiAUEEajYCACAAIAE1AgA3AwAPCyACIAIoAgBBB2pBeHEiAUEIajYCACAAIAEpAwA3AwALbwEFfyAAKAIAIgMsAABBMGsiAUEJSwRAQQAPCwNAQX8hBCACQcyZs+YATQRAQX8gASACQQpsIgVqIAEgBUH/////B3NLGyEECyAAIANBAWoiBTYCACADLAABIAQhAiAFIQNBMGsiAUEKSQ0ACyACC/oSAhN/An4jAEFAaiIIJAAgCCABNgI8IAhBKWohFyAIQSdqIRggCEEoaiERAkACQAJAAkADQEEAIQcDQCABIQ0gByAOQf////8Hc0oNAiAHIA5qIQ4CQAJAAkACQCABIgctAAAiCwRAA0ACQAJAIAtB/wFxIgFFBEAgByEBDAELIAFBJUcNASAHIQsDQCALLQABQSVHBEAgCyEBDAILIAdBAWohByALLQACIAtBAmoiASELQSVGDQALCyAHIA1rIgcgDkH/////B3MiGUoNCSAABEAgACANIAcQQgsgBw0HIAggATYCPCABQQFqIQdBfyEQAkAgASwAAUEwayIKQQlLDQAgAS0AAkEkRw0AIAFBA2ohB0EBIRIgCiEQCyAIIAc2AjxBACEMAkAgBywAACILQSBrIgFBH0sEQCAHIQoMAQsgByEKQQEgAXQiAUGJ0QRxRQ0AA0AgCCAHQQFqIgo2AjwgASAMciEMIAcsAAEiC0EgayIBQSBPDQEgCiEHQQEgAXQiAUGJ0QRxDQALCwJAIAtBKkYEQAJ/AkAgCiwAAUEwayIBQQlLDQAgCi0AAkEkRw0AAn8gAEUEQCAEIAFBAnRqQQo2AgBBAAwBCyADIAFBA3RqKAIACyEPIApBA2ohAUEBDAELIBINBiAKQQFqIQEgAEUEQCAIIAE2AjxBACESQQAhDwwDCyACIAIoAgAiB0EEajYCACAHKAIAIQ9BAAshEiAIIAE2AjwgD0EATg0BQQAgD2shDyAMQYDAAHIhDAwBCyAIQTxqEM8DIg9BAEgNCiAIKAI8IQELQQAhB0F/IQkCf0EAIAEtAABBLkcNABogAS0AAUEqRgRAAn8CQCABLAACQTBrIgpBCUsNACABLQADQSRHDQAgAUEEaiEBAn8gAEUEQCAEIApBAnRqQQo2AgBBAAwBCyADIApBA3RqKAIACwwBCyASDQYgAUECaiEBQQAgAEUNABogAiACKAIAIgpBBGo2AgAgCigCAAshCSAIIAE2AjwgCUEATgwBCyAIIAFBAWo2AjwgCEE8ahDPAyEJIAgoAjwhAUEBCyEUA0AgByEVQRwhCiABIhMsAAAiB0H7AGtBRkkNCyABQQFqIQEgByAVQTpsakHv8ABqLQAAIgdBAWtB/wFxQQhJDQALIAggATYCPAJAIAdBG0cEQCAHRQ0MIBBBAE4EQCAARQRAIAQgEEECdGogBzYCAAwMCyAIIAMgEEEDdGopAwA3AzAMAgsgAEUNCCAIQTBqIAcgAiAGEM4DDAELIBBBAE4NC0EAIQcgAEUNCAsgAC0AAEEgcQ0LIAxB//97cSILIAwgDEGAwABxGyEMQQAhEEHuCCEWIBEhCgJAAkACfwJAAkACQAJAAkACQAJ/AkACQAJAAkACQAJAAkAgEy0AACIHwCITQVNxIBMgB0EPcUEDRhsgEyAVGyIHQdgAaw4hBBYWFhYWFhYWEBYJBhAQEBYGFhYWFgIFAxYWChYBFhYEAAsCQCAHQcEAaw4HEBYLFhAQEAALIAdB0wBGDQsMFQsgCCkDMCEbQe4IDAULQQAhBwJAAkACQAJAAkACQAJAIBUOCAABAgMEHAUGHAsgCCgCMCAONgIADBsLIAgoAjAgDjYCAAwaCyAIKAIwIA6sNwMADBkLIAgoAjAgDjsBAAwYCyAIKAIwIA46AAAMFwsgCCgCMCAONgIADBYLIAgoAjAgDqw3AwAMFQtBCCAJIAlBCE0bIQkgDEEIciEMQfgAIQcLIBEhASAHQSBxIQsgCCkDMCIbIhpQRQRAA0AgAUEBayIBIBqnQQ9xLQCAdSALcjoAACAaQg9WIBpCBIghGg0ACwsgASENIAxBCHFFIBtQcg0DIAdBBHZB7ghqIRZBAiEQDAMLIBEhASAIKQMwIhsiGlBFBEADQCABQQFrIgEgGqdBB3FBMHI6AAAgGkIHViAaQgOIIRoNAAsLIAEhDSAMQQhxRQ0CIAkgFyABayIBIAEgCUgbIQkMAgsgCCkDMCIbQgBTBEAgCEIAIBt9Ihs3AzBBASEQQe4IDAELIAxBgBBxBEBBASEQQe8IDAELQfAIQe4IIAxBAXEiEBsLIRYgGyAREKYBIQ0LIBQgCUEASHENESAMQf//e3EgDCAUGyEMIBtCAFIgCXJFBEAgESENQQAhCQwOCyAJIBtQIBEgDWtqIgEgASAJSBshCQwNCyAILQAwIQcMCwsgCCgCMCIBQZUcIAEbIg1BAEH/////ByAJIAlB/////wdPGyIHEOABIgEgDWsgByABGyIBIA1qIQogCUEATgRAIAshDCABIQkMDAsgCyEMIAEhCSAKLQAADQ8MCwsgCCkDMCIaUEUNAUEAIQcMCQsgCQRAIAgoAjAMAgtBACEHIABBICAPQQAgDBBFDAILIAhBADYCDCAIIBo+AgggCCAIQQhqIgc2AjBBfyEJIAcLIQtBACEHA0ACQCALKAIAIg1FDQAgCEEEaiANEMwDIg1BAEgNDyANIAkgB2tLDQAgC0EEaiELIAcgDWoiByAJSQ0BCwtBPSEKIAdBAEgNDCAAQSAgDyAHIAwQRSAHRQRAQQAhBwwBC0EAIQogCCgCMCELA0AgCygCACINRQ0BIAhBBGoiCSANEMwDIg0gCmoiCiAHSw0BIAAgCSANEEIgC0EEaiELIAcgCksNAAsLIABBICAPIAcgDEGAwABzEEUgDyAHIAcgD0gbIQcMCAsgFCAJQQBIcQ0JQT0hCiAAIAgrAzAgDyAJIAwgByAFESAAIgdBAE4NBwwKCyAHLQABIQsgB0EBaiEHDAALAAsgAA0JIBJFDQNBASEHA0AgBCAHQQJ0aigCACIABEAgAyAHQQN0aiAAIAIgBhDOA0EBIQ4gB0EBaiIHQQpHDQEMCwsLIAdBCk8EQEEBIQ4MCgsDQCAEIAdBAnRqKAIADQFBASEOIAdBAWoiB0EKRw0ACwwJC0EcIQoMBgsgCCAHOgAnQQEhCSAYIQ0gCyEMCyAJIAogDWsiCyAJIAtKGyIBIBBB/////wdzSg0DQT0hCiAPIAEgEGoiCSAJIA9IGyIHIBlLDQQgAEEgIAcgCSAMEEUgACAWIBAQQiAAQTAgByAJIAxBgIAEcxBFIABBMCABIAtBABBFIAAgDSALEEIgAEEgIAcgCSAMQYDAAHMQRSAIKAI8IQEMAQsLC0EAIQ4MAwtBPSEKC0GI6gEgCjYCAAtBfyEOCyAIQUBrJAAgDgvCAgEEfyMAQdABayIFJAAgBSACNgLMASAFQaABaiICQQBBKPwLACAFIAUoAswBNgLIAQJAQQAgASAFQcgBaiAFQdAAaiACIAMgBBDQA0EASARAQX8hBAwBCyAAKAJMQQBIIAAgACgCACIIQV9xNgIAAn8CQAJAIAAoAjBFBEAgAEHQADYCMCAAQQA2AhwgAEIANwMQIAAoAiwhBiAAIAU2AiwMAQsgACgCEA0BC0F/IAAQ3wENARoLIAAgASAFQcgBaiAFQdAAaiAFQaABaiADIAQQ0AMLIQIgBgRAIABBAEEAIAAoAiQRAwAaIABBADYCMCAAIAY2AiwgAEEANgIcIAAoAhQhASAAQgA3AxAgAkF/IAEbIQILIAAgACgCACIAIAhBIHFyNgIAQX8gAiAAQSBxGyEEDQALIAVB0AFqJAAgBAt/AgF/AX4gAL0iA0I0iKdB/w9xIgJB/w9HBHwgAkUEQCABIABEAAAAAAAAAABhBH9BAAUgAEQAAAAAAADwQ6IgARDSAyEAIAEoAgBBQGoLNgIAIAAPCyABIAJB/gdrNgIAIANC/////////4eAf4NCgICAgICAgPA/hL8FIAALCz4BAX8jAEEQayIBJAAgASAANgIMAn8gAEEETwRAQZ0fIAFBDGoQlwJBAAwBCyAAQQJ0KAKILQsgAUEQaiQACwYAIAEQLQsJACABIAJsEDQLJQECfyAAKAIEIgAQqAFBAWoiARA0IgIEfyACIAAgARBxBUEACwsNACAAKAIEIAAoAgBrCzABAX8jAEEQayIEJAAgACgCACEAIAQgAzoADyABIAIgBEEPaiAAEQMAIARBEGokAAuNAgIBfwF8IwBBEGsiAyQAIANBDmogASACIAAoAgARBQAgAyADLwAOOwEMIwBBEGsiASQAAkAgAy0ADUEBRgRAIwBBEGsiAiQAQazgAS0AAEEBcUUEQEECQYQsQQMQDyEAQazgAUEBOgAAQajgASAANgIACyACIAMtAAw2AgggAkEANgIEQajgASgCAEEAQQAgAkEEaiACQQhqEA4hBCACIAIoAgQ2AgAgAUEIaiIAIAT8AzYCBCAAQfzgATYCACACEJ8CIAJBEGokACAAKAIEIQIgAEEANgIEIAAQtQEMAQsgAUEANgIMIAFB/OABNgIIIAFBCGoQtQFBAiECCyABQRBqJAAgA0EQaiQAIAILVAECfyMAQRBrIgQkACABIAAoAgQiBUEBdWohASAAKAIAIQAgBUEBcQRAIAEoAgAgAGooAgAhAAsgBCADOgAPIAEgAiAEQQ9qIAARBQAgBEEQaiQAC1IBAn8jAEEQayIDJAAgASAAKAIEIgRBAXVqIQEgACgCACEAIARBAXEEQCABKAIAIABqKAIAIQALIAMgAjoADyABIANBD2ogABEBACADQRBqJAALMAEBfyMAQRBrIgQkACAAKAIAIQAgBCADOAIMIAEgAiAEQQxqIAARAwAgBEEQaiQAC40CAgF/AXwjAEEQayIDJAAgA0EIaiABIAIgACgCABEFACADIAMpAgg3AwAjAEEQayIBJAACQCADLQAEQQFGBEAjAEEQayICJABBoOABLQAAQQFxRQRAQQJBxCZBAxAPIQBBoOABQQE6AABBnOABIAA2AgALIAIgAyoCADgCCCACQQA2AgRBnOABKAIAQQBBACACQQRqIAJBCGoQDiEEIAIgAigCBDYCACABQQhqIgAgBPwDNgIEIABB/OABNgIAIAIQnwIgAkEQaiQAIAAoAgQhAiAAQQA2AgQgABC1AQwBCyABQQA2AgwgAUH84AE2AgggAUEIahC1AUECIQILIAFBEGokACADQRBqJAAgAgtUAQJ/IwBBEGsiBCQAIAEgACgCBCIFQQF1aiEBIAAoAgAhACAFQQFxBEAgASgCACAAaigCACEACyAEIAM4AgwgASACIARBDGogABEFACAEQRBqJAALUgECfyMAQRBrIgMkACABIAAoAgQiBEEBdWohASAAKAIAIQAgBEEBcQRAIAEoAgAgAGooAgAhAAsgAyACOAIMIAEgA0EMaiAAEQEAIANBEGokAAsbACAAIAEoAgggBRA7BEAgASACIAMgBBDnAQsLOAAgACABKAIIIAUQOwRAIAEgAiADIAQQ5wEPCyAAKAIIIgAgASACIAMgBCAFIAAoAgAoAhQRCgALkgIBBn8gACABKAIIIAUQOwRAIAEgAiADIAQQ5wEPCyABLQA1IAAoAgwhBiABQQA6ADUgAS0ANCABQQA6ADQgAEEQaiIJIAEgAiADIAQgBRDlASABLQA0IgpyIQggAS0ANSILciEHAkAgBkECSQ0AIAkgBkEDdGohCSAAQRhqIQYDQCABLQA2DQECQCAKQQFxBEAgASgCGEEBRg0DIAAtAAhBAnENAQwDCyALQQFxRQ0AIAAtAAhBAXFFDQILIAFBADsBNCAGIAEgAiADIAQgBRDlASABLQA1IgsgB3JBAXEhByABLQA0IgogCHJBAXEhCCAGQQhqIgYgCUkNAAsLIAEgB0EBcToANSABIAhBAXE6ADQLkgEAIAAgASgCCCAEEDsEQCABIAIgAxDmAQ8LAkAgACABKAIAIAQQO0UNAAJAIAEoAhAgAkcEQCACIAEoAhRHDQELIANBAUcNASABQQE2AiAPCyABIAI2AhQgASADNgIgIAEgASgCKEEBajYCKAJAIAEoAiRBAUcNACABKAIYQQJHDQAgAUEBOgA2CyABQQQ2AiwLC/YBACAAIAEoAgggBBA7BEAgASACIAMQ5gEPCwJAIAAgASgCACAEEDsEQAJAIAEoAhAgAkcEQCACIAEoAhRHDQELIANBAUcNAiABQQE2AiAPCyABIAM2AiACQCABKAIsQQRGDQAgAUEAOwE0IAAoAggiACABIAIgAkEBIAQgACgCACgCFBEKACABLQA1QQFGBEAgAUEDNgIsIAEtADRFDQEMAwsgAUEENgIsCyABIAI2AhQgASABKAIoQQFqNgIoIAEoAiRBAUcNASABKAIYQQJHDQEgAUEBOgA2DwsgACgCCCIAIAEgAiADIAQgACgCACgCGBELAAsLrwQBA38gACABKAIIIAQQOwRAIAEgAiADEOYBDwsCQAJAIAAgASgCACAEEDsEQAJAIAEoAhAgAkcEQCACIAEoAhRHDQELIANBAUcNAyABQQE2AiAPCyABIAM2AiAgASgCLEEERg0BIABBEGoiBSAAKAIMQQN0aiEHQQAhAwNAAkACQCABAn8CQCAFIAdPDQAgAUEAOwE0IAUgASACIAJBASAEEOUBIAEtADYNACABLQA1QQFHDQMgAS0ANEEBRgRAIAEoAhhBAUYNA0EBIQNBASEGIAAtAAhBAnFFDQMMBAtBASEDIAAtAAhBAXENA0EDDAELQQNBBCADGws2AiwgBg0FDAQLIAFBAzYCLAwECyAFQQhqIQUMAAsACyAAKAIMIQUgAEEQaiIGIAEgAiADIAQQtwEgBUECSQ0BIAYgBUEDdGohBiAAQRhqIQUCQCAAKAIIIgBBAnFFBEAgASgCJEEBRw0BCwNAIAEtADYNAyAFIAEgAiADIAQQtwEgBUEIaiIFIAZJDQALDAILIABBAXFFBEADQCABLQA2DQMgASgCJEEBRg0DIAUgASACIAMgBBC3ASAFQQhqIgUgBkkNAAwDCwALA0AgAS0ANg0CIAEoAiRBAUYEQCABKAIYQQFGDQMLIAUgASACIAMgBBC3ASAFQQhqIgUgBkkNAAsMAQsgASACNgIUIAEgASgCKEEBajYCKCABKAIkQQFHDQAgASgCGEECRw0AIAFBAToANgsLjgUBBH8jAEFAaiIEJAACQCABQaDZAUEAEDsEQCACQQA2AgBBASEFDAELAkAgACABIAAtAAhBGHEEf0EBBSABRQ0BIAFB9NYBEFIiA0UNASADLQAIQRhxQQBHCxA7IQYLIAYEQEEBIQUgAigCACIARQ0BIAIgACgCADYCAAwBCwJAIAFFDQAgAUGk1wEQUiIGRQ0BIAIoAgAiAQRAIAIgASgCADYCAAsgBigCCCIDIAAoAggiAUF/c3FBB3EgA0F/cyABcUHgAHFyDQFBASEFIAAoAgwgBigCDEEAEDsNASAAKAIMQZTZAUEAEDsEQCAGKAIMIgBFDQIgAEHU1wEQUkUhBQwCCyAAKAIMIgNFDQBBACEFIANBpNcBEFIiAQRAIAAtAAhBAXFFDQICfyAGKAIMIQBBACECAkADQEEAIABFDQIaIABBpNcBEFIiA0UNASADKAIIIAEoAghBf3NxDQFBASABKAIMIAMoAgxBABA7DQIaIAEtAAhBAXFFDQEgASgCDCIARQ0BIABBpNcBEFIiAQRAIAMoAgwhAAwBCwsgAEGI2AEQUiIARQ0AIAAgAygCDBCpAiECCyACCyEFDAILIANBiNgBEFIiAQRAIAAtAAhBAXFFDQIgASAGKAIMEKkCIQUMAgsgA0HE1gEQUiIBRQ0BIAYoAgwiAEUNASAAQcTWARBSIgBFDQEgAigCACEDIARBCGpBAEE4/AsAIAQgA0EARzoAOyAEQX82AhAgBCABNgIMIAQgADYCBCAEQQE2AjQgACAEQQRqIANBASAAKAIAKAIcEQgAIAQoAhwiAEEBRgRAIAIgBCgCFEEAIAMbNgIACyAAQQFGIQUMAQtBACEFCyAEQUBrJAAgBQtvAQJ/IAAgASgCCEEAEDsEQCABIAIgAxDpAQ8LIAAoAgwhBCAAQRBqIgUgASACIAMQqwICQCAEQQJJDQAgBSAEQQN0aiEEIABBGGohAANAIAAgASACIAMQqwIgAS0ANg0BIABBCGoiACAESQ0ACwsLMgAgACABKAIIQQAQOwRAIAEgAiADEOkBDwsgACgCCCIAIAEgAiADIAAoAgAoAhwRCAALGQAgACABKAIIQQAQOwRAIAEgAiADEOkBCwvIAQECfyMAQdAAayIDJAACQAJ/QQEgACABQQAQOw0AGkEAIAFFDQAaQQAgAUHE1gEQUiIBRQ0AGiACKAIAIgRFDQEgA0EYakEAQTj8CwAgA0EBOgBLIANBfzYCICADIAA2AhwgAyABNgIUIANBATYCRCABIANBFGogBEEBIAEoAgAoAhwRCAAgAygCLCIAQQFGBEAgAiADKAIkNgIACyAAQQFGCyADQdAAaiQADwsgA0GeFjYCCCADQecDNgIEIANBig02AgAQPQALAwAACxEBAX9BBBBTIgBBADYCACAACwkAQaD0ARA5GgslAEGs9AEtAABFBEBBoPQBQdisARCRAUGs9AFBAToAAAtBoPQBCwkAQZD0ARAgGgskAEGc9AEtAABFBEBBkPQBQc4NELABQZz0AUEBOgAAC0GQ9AELCQBBgPQBEDkaCyUAQYz0AS0AAEUEQEGA9AFBhKwBEJEBQYz0AUEBOgAAC0GA9AELCQBB8PMBECAaCyQAQfzzAS0AAEUEQEHw8wFBmRUQsAFB/PMBQQE6AAALQfDzAQsJAEHg8wEQORoLqQIBBH8gAiABIAAoAgBqIgBHBEACQCACKAIEIgQgAigCACIBa0ECdSIGIAAoAgggACgCACICa0ECdU0EQCAGIAAoAgQiAyACayIFQQJ1SwRAIAIgA0cEQCAFBEAgAiABIAX8CgAACyAAKAIEIQMLIAQgASAFaiIBayICRSABIARGckUEQCADIAEgAvwKAAALIAAgAiADajYCBAwCCyAEIAFrIgNFIAEgBEZyRQRAIAIgASAD/AoAAAsgACACIANqNgIEDAELIAAoAgAiAgRAIAAgAjYCBCAAKAIIGiACEC0gAEEANgIIIABCADcCAAsgACAAIAYQtgEQrgMgACgCBCECIAQgAWsiA0UgASAERnJFBEAgAiABIAP8CgAACyAAIAIgA2o2AgQLCwslAEHs8wEtAABFBEBB4PMBQeCrARCRAUHs8wFBAToAAAtB4PMBCwkAQeTeARAgGgsaAEHd8wEtAABFBEBB3fMBQQE6AAALQeTeAQsJAEHQ8wEQORoLJQBB3PMBLQAARQRAQdDzAUG8qwEQkQFB3PMBQQE6AAALQdDzAQsJAEHY3gEQIBoLGgBBzfMBLQAARQRAQc3zAUEBOgAAC0HY3gELGwBBqPwBIQADQCAAQQxrEDkiAEGQ/AFHDQALC1QAQczzAS0AAARAQcjzASgCAA8LQaj8AS0AAEUEQEGo/AFBAToAAAtBkPwBQfjUARApQZz8AUGE1QEQKUHM8wFBAToAAEHI8wFBkPwBNgIAQZD8AQsbAEGI/AEhAANAIABBDGsQICIAQfD7AUcNAAsLFQAgASAAKAIAaiEAQQwQUyAAEIEBC1IAQcTzAS0AAARAQcDzASgCAA8LQYj8AS0AAEUEQEGI/AFBAToAAAtB8PsBQdEVECpB/PsBQc4VECpBxPMBQQE6AABBwPMBQfD7ATYCAEHw+wELGwBB4PsBIQADQCAAQQxrEDkiAEHA+QFHDQALC7ACAEG88wEtAAAEQEG48wEoAgAPC0Hg+wEtAABFBEBB4PsBQQE6AAALQcD5AUHw0AEQKUHM+QFBkNEBEClB2PkBQbTRARApQeT5AUHM0QEQKUHw+QFB5NEBEClB/PkBQfTRARApQYj6AUGI0gEQKUGU+gFBnNIBEClBoPoBQbjSARApQaz6AUHg0gEQKUG4+gFBgNMBEClBxPoBQaTTARApQdD6AUHI0wEQKUHc+gFB2NMBEClB6PoBQejTARApQfT6AUH40wEQKUGA+wFB5NEBEClBjPsBQYjUARApQZj7AUGY1AEQKUGk+wFBqNQBEClBsPsBQbjUARApQbz7AUHI1AEQKUHI+wFB2NQBEClB1PsBQejUARApQbzzAUEBOgAAQbjzAUHA+QE2AgBBwPkBCxsAQbD5ASEAA0AgAEEMaxAgIgBBkPcBRw0ACwuYAgBBtPMBLQAABEBBsPMBKAIADwtBsPkBLQAARQRAQbD5AUEBOgAAC0GQ9wFBmwgQKkGc9wFBkggQKkGo9wFBzQ8QKkG09wFBnA4QKkHA9wFB4QgQKkHM9wFBhxEQKkHY9wFBowgQKkHk9wFBkwkQKkHw9wFB1QwQKkH89wFBxAwQKkGI+AFBzAwQKkGU+AFB3wwQKkGg+AFB6g0QKkGs+AFBlRUQKkG4+AFBhg0QKkHE+AFB9gsQKkHQ+AFB4QgQKkHc+AFB3g0QKkHo+AFBkA4QKkH0+AFB0w8QKkGA+QFByg0QKkGM+QFBngoQKkGY+QFBiwkQKkGk+QFB+BQQKkG08wFBAToAAEGw8wFBkPcBNgIAQZD3AQsbAEGI9wEhAANAIABBDGsQOSIAQeD1AUcNAAsLzAEAQazzAS0AAARAQajzASgCAA8LQYj3AS0AAEUEQEGI9wFBAToAAAtB4PUBQZzOARApQez1AUG4zgEQKUH49QFB1M4BEClBhPYBQfTOARApQZD2AUGczwEQKUGc9gFBwM8BEClBqPYBQdzPARApQbT2AUGA0AEQKUHA9gFBkNABEClBzPYBQaDQARApQdj2AUGw0AEQKUHk9gFBwNABEClB8PYBQdDQARApQfz2AUHg0AEQKUGs8wFBAToAAEGo8wFB4PUBNgIAQeD1AQsbAEHY9QEhAANAIABBDGsQICIAQbD0AUcNAAsLvgEAQaTzAS0AAARAQaDzASgCAA8LQdj1AS0AAEUEQEHY9QFBAToAAAtBsPQBQcwIECpBvPQBQdMIECpByPQBQbEIECpB1PQBQbkIECpB4PQBQagIECpB7PQBQdoIECpB+PQBQcMIECpBhPUBQdoNECpBkPUBQeINECpBnPUBQeoQECpBqPUBQasTECpBtPUBQY8JECpBwPUBQbIPECpBzPUBQcIKECpBpPMBQQE6AABBoPMBQbD0ATYCAEGw9AELDwAgASAAKAIAaiACOgAACwsAIABBpKsBEJEBCwoAIABB7hAQsAELCwAgAEGQqwEQkQELCgAgAEHlEBCwAQsMACAAIAFBEGoQ5AELDAAgACABQQxqEOQBCwcAIAAsAAkLBwAgACwACAsJACAAEMMCEC0LDQAgASAAKAIAai0AAAsJACAAEMQCEC0LFQAgACgCCCIARQRAQQEPCyAAEMwCC44BAQZ/A0ACQCACIANGIAQgCE1yDQBBASEGIAAoAgghByMAQRBrIgUkACAFIAc2AgwgBUEIaiAFQQxqEGNBACACIAMgAmsgAUH07wEgARsQ0gEhChBiIAVBEGokAAJAAkAgCiIFQQJqDgMCAgEACyAFIQYLIAhBAWohCCAGIAlqIQkgAiAGaiECDAELCyAJC0YBAn8gACgCCCECIwBBEGsiASQAIAEgAjYCDCABQQhqIAFBDGoQYxBiIAFBEGokACAAKAIIIgBFBEBBAQ8LIAAQzAJBAUYLiQEBAn8jAEEQayIGJAAgBCACNgIAAn9BAiAGQQxqIgVBACAAKAIIEO4BIgBBAWpBAkkNABpBASAAQQFrIgIgAyAEKAIAa0sNABoDfyACBH8gBS0AACEAIAQgBCgCACIBQQFqNgIAIAEgADoAACACQQFrIQIgBUEBaiEFDAEFQQALCwsgBkEQaiQAC7kGAQ1/IwBBEGsiESQAIAIhCANAAkAgAyAIRgRAIAMhCAwBCyAILQAARQ0AIAhBAWohCAwBCwsgByAFNgIAIAQgAjYCAANAAkACfwJAIAIgA0YgBSAGRnINACARIAEpAgA3AwggACgCCCEJIwBBEGsiECQAIBAgCTYCDCAQQQhqIBBBDGoQYyAIIAJrIQ5BACELIwBBkAhrIgwkACAMIAQoAgAiCTYCDCAFIAxBEGogBRshDwJAAkACQCAJRSAGIAVrQQJ1QYACIAUbIg1FckUEQANAIA5BgwFLIA5BAnYiCiANT3JFBEAgCSEKDAQLIA8gDEEMaiAKIA0gCiANSRsgARCbAyESIAwoAgwhCiASQX9GBEBBACENQX8hCwwDCyANIBJBACAPIAxBEGpHGyIUayENIA8gFEECdGohDyAJIA5qIAprQQAgChshDiALIBJqIQsgCkUNAiAKIQkgDQ0ADAILAAsgCSEKCyAKRQ0BCyANRSAORXINACALIQkDQAJAAkAgDyAKIA4gARDSASILQQJqQQJNBEACQAJAIAtBAWoOAgYAAQsgDEEANgIMDAILIAFBADYCAAwBCyAMIAwoAgwgC2oiCjYCDCAJQQFqIQkgDUEBayINDQELIAkhCwwCCyAPQQRqIQ8gDiALayEOIAkhCyAODQALCyAFBEAgBCAMKAIMNgIACyAMQZAIaiQAEGIgEEEQaiQAAkACQAJAAkAgCyIJQX9GBEADQCAHIAU2AgAgAiAEKAIARg0GQQEhBgJAAkACQCAFIAIgCCACayARQQhqIAAoAggQzQIiAUECag4DBwACAQsgBCACNgIADAQLIAEhBgsgAiAGaiECIAcoAgBBBGohBQwACwALIAcgBygCACAJQQJ0aiIFNgIAIAUgBkYNAyAEKAIAIQIgAyAIRg0GIAUgAkEBIAEgACgCCBDNAkUNAQtBAgwECyAHIAcoAgBBBGoiBTYCACAEIAQoAgBBAWoiAjYCACACIQgDQCADIAhGDQUgCC0AAEUNBiAIQQFqIQgMAAsACyAEIAI2AgBBAQwCCyAEKAIAIQILIAIgA0cLIBFBEGokAA8LIAMhCAwACwALpgUBDH8jAEEQayIPJAAgAiEIA0ACQCADIAhGBEAgAyEIDAELIAgoAgBFDQAgCEEEaiEIDAELCyAHIAU2AgAgBCACNgIAAkADQAJAAkAgAiADRiAFIAZGcgR/IAIFIA8gASkCADcDCEEBIRAgBSEJIAYgBWshCyAAKAIIIQpBACENIwBBEGsiDiQAIA4gCjYCDCAOQQhqIA5BDGoQYyMAQRBrIhEkAAJAIAQoAgAiCkUgCCACa0ECdSISRXINACALQQAgBRshCwNAIBFBDGogCSALQQRJGyAKKAIAEJYCIgxBf0YEQEF/IQ0MAgsgCQR/IAtBA00EQCALIAxJDQMgCSARQQxqIAwQcRoLIAsgDGshCyAJIAxqBUEACyEJIAooAgBFBEBBACEKDAILIAwgDWohDSAKQQRqIQogEkEBayISDQALCyAJBEAgBCAKNgIACyARQRBqJAAQYiAOQRBqJAACQAJAAkACQCANIglBAWoOAgAIAQsgByAFNgIAA0AgAiAEKAIARg0CIAUgAigCACAAKAIIEO4BIgFBf0YNAiAHIAcoAgAgAWoiBTYCACACQQRqIQIMAAsACyAHIAcoAgAgCWoiBTYCACAFIAZGDQEgAyAIRgRAIAQoAgAhAiADIQgMBgsgD0EEaiICQQAgACgCCBDuASIIQX9GDQQgBiAHKAIAayAISQ0GA0AgCARAIAItAAAhBSAHIAcoAgAiCUEBajYCACAJIAU6AAAgCEEBayEIIAJBAWohAgwBCwsgBCAEKAIAQQRqIgI2AgAgAiEIA0AgAyAIRgRAIAMhCAwFCyAIKAIARQ0EIAhBBGohCAwACwALIAQgAjYCAAwDCyAEKAIACyADRyEQDAMLIAcoAgAhBQwBCwtBAiEQCyAPQRBqJAAgEAsJACAAENsCEC0LMwAjAEEQayIAJAAgACAENgIMIAAgAyACazYCCCAAQQxqIABBCGoQtQMoAgAgAEEQaiQACzsAA0AgASACRkUEQCADIQAgBCABLAAAEEwEfyABLQAABSAACzoAACAEQQFqIQQgAUEBaiEBDAELCyABCwsAIAEgAiABEEwbCyoAA0AgASACRkUEQCADIAEtAAA6AAAgA0EBaiEDIAFBAWohAQwBCwsgAQsPACAAIAEgAkGgkAEQpgILHQAgARBMBH9BoJABKAIAIAFBAnRqKAIABSABC8ALDwAgACABIAJBmIQBEKYCCyEAIAEQTAR/QZiEASgCACABQf8BcUECdGooAgAFIAELwAsJACAAENACEC0LOwADQCABIAJGRQRAIAMhACAEIAEoAgAQTAR/IAEoAgAFIAALOgAAIARBAWohBCABQQRqIQEMAQsLIAELDAAgASACIAEQTBvACyoAA0AgASACRkUEQCADIAEsAAA2AgAgA0EEaiEDIAFBAWohAQwBCwsgAQsPACAAIAEgAkGgkAEQpwILHAAgARBMBH9BoJABKAIAIAFBAnRqKAIABSABCwsPACAAIAEgAkGYhAEQpwILHAAgARBMBH9BmIQBKAIAIAFBAnRqKAIABSABCwsQACAABEAgABDHAwsgABAtCzoAA0ACQCACIANGDQAgAigCABBMRQ0AIAIoAgBBAnRBkKIBaigCACABcUUNACACQQRqIQIMAQsLIAILOQADQAJAIAIgA0YNACACKAIAEEwEQCACKAIAQQJ0QZCiAWooAgAgAXENAQsgAkEEaiECDAELCyACC0YAA0AgASACRkUEQEEAIQAgAyABKAIAEEwEfyABKAIAQQJ0QZCiAWooAgAFQQALNgIAIANBBGohAyABQQRqIQEMAQsLIAELIwBBACEAIAIQTAR/IAJBAnRBkKIBaigCACABcUEARwVBAAsLDwAgACAAKAIAKAIEEQIACwkAIAAQ1gIQLQsVAQF/QdQAEFMiAEEAQdQA/AsAIAALFAAgACgCACABaiACLQAAOgAAQQELrgEAAkAgBRBHRQRAIAAgBSkCADcCACAAIAUoAgg2AgggABBeGgwBCyAFKAIAIQQgBSgCBCECIwBBEGsiAyQAAkACQAJAIAIQvQEEQCAAIgEgAhBQDAELIAJB9////wNLDQEgA0EIaiACEJABQQFqEI8BIAMoAgwaIAAgAygCCCIBNgIAIAAgAygCDBBcIAAgAjYCBAsgASAEIAJBAWoQZSADQRBqJAAMAQsQWwALCwsJACAAIAUQ5AELhAMBCH8jAEHgA2siACQAIABB3ANqIgYgAxAnIAYQSCEKIAUQHwRAIAVBABDMASgCACAKQS0QS0YhCwsgAiALIABB3ANqIABB2ANqIABB1ANqIABB0ANqIABBxANqECQiDCAAQbgDahAkIgYgAEGsA2oQJCIHIABBqANqEN8CIABB4wA2AhAgAEEIakEAIABBEGoiAhA2IQgCQAJ/IAUQHyAAKAKoA0oEQCAFEB8hCSAAKAKoAyENIAcQHyAJIA1rQQF0aiAGEB9qIAAoAqgDakEBagwBCyAHEB8gBhAfaiAAKAKoA2pBAmoLIglB5QBJDQAgCCAJQQJ0EDQQPCAIKAIAIgINABA9AAsgAiAAQQRqIAAgAygCBCAFECMgBRAjIAUQH0ECdGogCiALIABB2ANqIAAoAtQDIAAoAtADIAwgBiAHIAAoAqgDEN4CIAEgAiAAKAIEIAAoAgAgAyAEEIUBIAgQNSAHEDkaIAYQORogDBAgGiAAQdwDahAlIABB4ANqJAALvgQBC38jAEGgCGsiACQAIAAgBjcDmAggACAFNwOQCCAAIAU3AwAgACAGNwMIIAAgAEGgB2oiBzYCnAcgB0HAECAAEIYBIQcgAEHjADYCgAQgAEH4A2pBACAAQYAEaiIJEDYhDiAAQeMANgKABCAAQfADakEAIAkQNiEKAkAgB0HkAE8EQCAAQZwHahAuQcAQIABBkAhqEMgBIgdBf0YNASAOIAAoApwHEDwgCiAHQQJ0EDQQPCAKEOQCDQEgCigCACEJCyAAQewDaiIIIAMQJyAIEEgiESAAKAKcByIIIAcgCGogCRBvIAdBAEoEQCAAKAKcBy0AAEEtRiEPCyACIA8gAEHsA2ogAEHoA2ogAEHkA2ogAEHgA2ogAEHUA2oQJCIQIABByANqECQiCCAAQbwDahAkIgsgAEG4A2oQ3wIgAEHjADYCICAAQRhqQQAgAEEgaiICEDYhDAJ/IAAoArgDIg0gB0gEQCALEB8gByANa0EBdGogCBAfaiAAKAK4A2pBAWoMAQsgCxAfIAgQH2ogACgCuANqQQJqCyINQeUATwRAIAwgDUECdBA0EDwgDCgCACICRQ0BCyACIABBFGogAEEQaiADKAIEIAkgCSAHQQJ0aiARIA8gAEHoA2ogACgC5AMgACgC4AMgECAIIAsgACgCuAMQ3gIgASACIAAoAhQgACgCECADIAQQhQEgDBA1IAsQORogCBA5GiAQECAaIABB7ANqECUgChA1IA4QNSAAQaAIaiQADwsQPQALMwECfyABKAIEIAEoAgAiAWsgAksEQEEBIQQgASACai0AACEDCyAAIAQ6AAEgACADOgAAC/wCAQh/IwBBsAFrIgAkACAAQawBaiIGIAMQJyAGEEkhCiAFEB8EQCAFQQAQIi0AACAKQS0QQUH/AXFGIQsLIAIgCyAAQawBaiAAQagBaiAAQacBaiAAQaYBaiAAQZgBahAkIgwgAEGMAWoQJCIGIABBgAFqECQiByAAQfwAahDjAiAAQeMANgIQIABBCGpBACAAQRBqIgIQNiEIAkACfyAFEB8gACgCfEoEQCAFEB8hCSAAKAJ8IQ0gBxAfIAkgDWtBAXRqIAYQH2ogACgCfGpBAWoMAQsgBxAfIAYQH2ogACgCfGpBAmoLIglB5QBJDQAgCCAJEDQQPCAIKAIAIgINABA9AAsgAiAAQQRqIAAgAygCBCAFECMgBRAjIAUQH2ogCiALIABBqAFqIAAsAKcBIAAsAKYBIAwgBiAHIAAoAnwQ4gIgASACIAAoAgQgACgCACADIAQQgAEgCBA1IAcQIBogBhAgGiAMECAaIABBrAFqECUgAEGwAWokAAu1BAELfyMAQcADayIAJAAgACAGNwO4AyAAIAU3A7ADIAAgBTcDACAAIAY3AwggACAAQcACaiIHNgK8AiAHQcAQIAAQhgEhByAAQeMANgLQASAAQcgBakEAIABB0AFqIgkQNiEOIABB4wA2AtABIABBwAFqQQAgCRA2IQoCQCAHQeQATwRAIABBvAJqEC5BwBAgAEGwA2oQyAEiB0F/Rg0BIA4gACgCvAIQPCAKIAcQNBA8IAoQ5AINASAKKAIAIQkLIABBvAFqIgggAxAnIAgQSSIRIAAoArwCIgggByAIaiAJEHkgB0EASgRAIAAoArwCLQAAQS1GIQ8LIAIgDyAAQbwBaiAAQbgBaiAAQbcBaiAAQbYBaiAAQagBahAkIhAgAEGcAWoQJCIIIABBkAFqECQiCyAAQYwBahDjAiAAQeMANgIgIABBGGpBACAAQSBqIgIQNiEMAn8gACgCjAEiDSAHSARAIAsQHyAHIA1rQQF0aiAIEB9qIAAoAowBakEBagwBCyALEB8gCBAfaiAAKAKMAWpBAmoLIg1B5QBPBEAgDCANEDQQPCAMKAIAIgJFDQELIAIgAEEUaiAAQRBqIAMoAgQgCSAHIAlqIBEgDyAAQbgBaiAALAC3ASAALAC2ASAQIAggCyAAKAKMARDiAiABIAIgACgCFCAAKAIQIAMgBBCAASAMEDUgCxAgGiAIECAaIBAQIBogAEG8AWoQJSAKEDUgDhA1IABBwANqJAAPCxA9AAvtAQEDfyAAKAIEIAAoAgAiBGsiAyABSQRAIwBBIGsiBCQAAkAgASADayIDIAAoAgggACgCBCIBa00EQCADIAAoAgQiAWohAwNAIAEgA0YEQCAAIAM2AgQFIAEgAi0AADoAACABQQFqIQEMAQsLDAELIAMgBEEMaiAAIAEgA2ogACgCAGsQtAEgACgCBCAAKAIAayAAEMYBIgUoAggiAWohAwNAIAEgA0cEQCABIAItAAA6AAAgAUEBaiEBDAELCyAFIAM2AgggACAFEO8BIAUQugELIARBIGokAA8LIAEgA0kEQCAAIAEgBGo2AgQLC4EFAQR/IwBBwANrIgAkACAAIAI2ArgDIAAgATYCvAMgAEHkADYCFCAAQRhqIABBIGogAEEUaiIIEDYhCiAAQRBqIgEgBBAnIAEQSCEHIABBADoADyAAQbwDaiACIAMgASAEKAIEIAUgAEEPaiAHIAogCCAAQbADahDqAgRAIwBBEGsiASQAIAYQHxoCQCAGEEcEQCAGKAIAIAFBADYCDCABQQxqEFYgBkEANgIEDAELIAFBADYCCCAGIAFBCGoQViAGQQAQUAsgAUEQaiQAIAAtAA9BAUYEQCAGIAdBLRBLEOoBCyAHQTAQSyEBIAooAgAhAiAAKAIUIgNBBGshBANAAkAgAiAETw0AIAIoAgAgAUcNACACQQRqIQIMAQsLIwBBEGsiBCQAIAYQHyEBIAYQ8QEhBwJAIAIgAxD1ASIIRQ0AIAYQIyAGECMgBhAfQQJ0akEEaiACEL4CRQRAIAggByABa0sEQCAGIAcgASAHayAIaiABIAEQ6AILIAIgAyAGECMgAUECdGoQ5wIgBEEANgIEIARBBGoQViAGIAEgCGoQgwEMAQsgBEEEaiIBIAIgAxCZAyABECMhCCABEB8hAiMAQRBrIgckAAJAIAIgBhDxASIJIAYQHyIDa00EQCACRQ0BIAYQIyIJIANBAnRqIAggAhBlIAYgAiADaiICEIMBIAdBADYCDCAJIAJBAnRqIAdBDGoQVgwBCyAGIAkgAiAJayADaiADIANBACACIAgQrwILIAdBEGokACABEDkaCyAEQRBqJAALIABBvANqIABBuANqECsEQCAFIAUoAgBBAnI2AgALIAAoArwDIABBEGoQJSAKEDUgAEHAA2okAAvRAwEDfyMAQfAEayIAJAAgACACNgLoBCAAIAE2AuwEIABB5AA2AhAgAEHIAWogAEHQAWogAEEQaiIBEDYhByAAQcABaiIIIAQQJyAIEEghCSAAQQA6AL8BAkAgAEHsBGogAiADIAggBCgCBCAFIABBvwFqIAkgByAAQcQBaiAAQeAEahDqAkUNACAAQcsbKAAANgC3ASAAQcQbKQAANwOwASAJIABBsAFqIABBugFqIABBgAFqEG8gAEHjADYCECAAQQhqQQAgARA2IQMgASEEAkAgACgCxAEgBygCAGsiAUGJA04EQCADIAFBAnVBAmoQNBA8IAMoAgBFDQEgAygCACEECyAALQC/AUEBRgRAIARBLToAACAEQQFqIQQLIAcoAgAhAgNAIAAoAsQBIAJNBEACQCAEQQA6AAAgACAGNgIAIABBEGogABCjA0EBRw0AIAMQNQwECwUgBCAAQbABaiAAQYABaiIBIAFBKGogAhD5ASABa0ECdWotAAA6AAAgBEEBaiEEIAJBBGohAgwBCwsQPQALED0ACyAAQewEaiAAQegEahArBEAgBSAFKAIAQQJyNgIACyAAKALsBCAAQcABahAlIAcQNSAAQfAEaiQAC5ABAQJ/IAACfyAAKAIEIgIgACgCCEkEQCACIAEtAAA6AAAgAkEBagwBCyMAQSBrIgMkACADQQxqIAAgACgCBCAAKAIAa0EBahC0ASAAKAIEIAAoAgBrIAAQxgEiAigCCCABLQAAOgAAIAIgAigCCEEBajYCCCAAIAIQ7wEgACgCBCACELoBIANBIGokAAs2AgQLBQBBpCoL0AQBA38jAEGQAWsiACQAIAAgAjYCiAEgACABNgKMASAAQeQANgIUIABBGGogAEEgaiAAQRRqIgcQNiEJIABBEGoiCCAEECcgCBBJIQEgAEEAOgAPIABBjAFqIAIgAyAIIAQoAgQgBSAAQQ9qIAEgCSAHIABBhAFqEPACBEACQCAGLAALQQBIBEAgBigCAEEAOgAAIAZBADYCBAwBCyAGQQA6AAsgBkEAOgAACyAALQAPQQFGBEAgBiABQS0QQRC4AQsgAUEwEEEgCSgCACECIAAoAhQiBEEBayEDQf8BcSEBA0ACQCACIANPDQAgAi0AACABRw0AIAJBAWohAgwBCwsjAEEQayIBJAAgBhAfIQMgBhAoIQgCQCACIAQQigIiB0UNACAGECMgBhAjIAYQH2pBAWogAhC+AkUEQCAHIAggA2tLBEAgBiAIIAMgCGsgB2ogAyADEPQBCyACIAQgBhAjIANqELQDIAFBADoADyABQQ9qEF0gBiADIAdqEIMBDAELIAEgAiAEELgDIAEQIyEIIAEQHyECIwBBEGsiBCQAAkAgAiAGECgiByAGEB8iA2tNBEAgAkUNASAGECMiByADaiAIIAIQTSAGIAIgA2oiAhCDASAEQQA6AA8gAiAHaiAEQQ9qEF0MAQsgBiAHIAIgB2sgA2ogAyADQQAgAiAIELkBCyAEQRBqJAAgARAgGgsgAUEQaiQACyAAQYwBaiAAQYgBahAsBEAgBSAFKAIAQQJyNgIACyAAKAKMASAAQRBqECUgCRA1IABBkAFqJAALxwMBA38jAEGQAmsiACQAIAAgAjYCiAIgACABNgKMAiAAQeQANgIQIABBmAFqIABBoAFqIABBEGoiARA2IQcgAEGQAWoiCCAEECcgCBBJIQkgAEEAOgCPAQJAIABBjAJqIAIgAyAIIAQoAgQgBSAAQY8BaiAJIAcgAEGUAWogAEGEAmoQ8AJFDQAgAEHLGygAADYAhwEgAEHEGykAADcDgAEgCSAAQYABaiAAQYoBaiAAQfYAahB5IABB4wA2AhAgAEEIakEAIAEQNiEDIAEhBAJAIAAoApQBIAcoAgBrIgFB4wBOBEAgAyABQQJqEDQQPCADKAIARQ0BIAMoAgAhBAsgAC0AjwFBAUYEQCAEQS06AAAgBEEBaiEECyAHKAIAIQIDQCAAKAKUASACTQRAAkAgBEEAOgAAIAAgBjYCACAAQRBqIAAQowNBAUcNACADEDUMBAsFIAQgAEH2AGoiASABQQpqIAIQ/QEgAGsgAGotAAo6AAAgBEEBaiEEIAJBAWohAgwBCwsQPQALED0ACyAAQYwCaiAAQYgCahAsBEAgBSAFKAIAQQJyNgIACyAAKAKMAiAAQZABahAlIAcQNSAAQZACaiQACxcAIAAoAgAgAUECdGogAioCADgCAEEBC5EDAQJ/IwBBoANrIgckACAHIAdBoANqIgM2AgwjAEGQAWsiAiQAIAIgAkGEAWo2AhwgAEEIaiACQSBqIgggAkEcaiAEIAUgBhD0AiACQgA3AxAgAiAINgIMIAdBEGoiBSAHKAIMEPUBIQQgACgCCCEGIwBBEGsiACQAIAAgBjYCDCAAQQhqIABBDGoQYyAFIAJBDGogBCACQRBqEJsDIQQQYiAAQRBqJAAgBEF/RgRAED0ACyAHIAUgBEECdGo2AgwgAkGQAWokACAHKAIMIQIjAEEQayIGJAAjAEEgayIAJAAgAEEYaiAFIAIQvwIgAEEQaiAAKAIYIQIgACgCHCEIIwBBEGsiBCQAIAQgAjYCCCAEIAE2AgwDQCACIAhHBEAgBEEMaiACKAIAELsDIAQgAkEEaiICNgIIDAELCyAEQQhqIARBDGoQZiAEQRBqJAAgACAFIAAoAhAQjgE2AgwgACAAKAIUNgIIIAZBCGogAEEMaiAAQQhqEGYgAEEgaiQAIAYoAgwgBkEQaiQAIAMkAAuAAgECfyMAQYABayICJAAgAiACQfQAajYCDCAAQQhqIAJBEGoiAyACQQxqIAQgBSAGEPQCIAIoAgwhBCMAQRBrIgYkACMAQSBrIgAkACAAQRhqIAMgBBC/AiAAQRBqIAAoAhghBCAAKAIcIQgjAEEQayIFJAAgBSAENgIIIAUgATYCDANAIAQgCEcEQCAFQQxqIAQsAAAQvwMgBSAEQQFqIgQ2AggMAQsLIAVBCGogBUEMahBmIAVBEGokACAAIAMgACgCEBCOATYCDCAAIAAoAhQ2AgggBkEIaiAAQQxqIABBCGoQZiAAQSBqJAAgBigCDCAGQRBqJAAgAkGAAWokAAvdDAEBfyMAQTBrIgckACAHIAE2AiwgBEEANgIAIAcgAxAnIAcQSCEIIAcQJQJ/AkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQCAGQcEAaw45AAEXBBcFFwYHFxcXChcXFxcODxAXFxcTFRcXFxcXFxcAAQIDAxcXARcIFxcJCxcMFw0XCxcXERIUFgsgACAFQRhqIAdBLGogAiAEIAgQ9wIMGAsgACAFQRBqIAdBLGogAiAEIAgQ9gIMFwsgAEEIaiAAKAIIKAIMEQAAIQEgByAAIAcoAiwgAiADIAQgBSABECMgARAjIAEQH0ECdGoQbTYCLAwWCyAHQSxqIAIgBCAIQQIQZyEAAkAgBCgCACIBQQRxIABBAWtBHktyRQRAIAUgADYCDAwBCyAEIAFBBHI2AgALDBULIAdBqKABKQMANwMYIAdBoKABKQMANwMQIAdBmKABKQMANwMIIAdBkKABKQMANwMAIAcgACABIAIgAyAEIAUgByAHQSBqEG02AiwMFAsgB0HIoAEpAwA3AxggB0HAoAEpAwA3AxAgB0G4oAEpAwA3AwggB0GwoAEpAwA3AwAgByAAIAEgAiADIAQgBSAHIAdBIGoQbTYCLAwTCyAHQSxqIAIgBCAIQQIQZyEAAkAgBCgCACIBQQRxIABBF0pyRQRAIAUgADYCCAwBCyAEIAFBBHI2AgALDBILIAdBLGogAiAEIAhBAhBnIQACQCAEKAIAIgFBBHEgAEEBa0ELS3JFBEAgBSAANgIIDAELIAQgAUEEcjYCAAsMEQsgB0EsaiACIAQgCEEDEGchAAJAIAQoAgAiAUEEcSAAQe0CSnJFBEAgBSAANgIcDAELIAQgAUEEcjYCAAsMEAsgB0EsaiACIAQgCEECEGchAAJAIAQoAgAiAUEEcSAAQQFrIgBBC0tyRQRAIAUgADYCEAwBCyAEIAFBBHI2AgALDA8LIAdBLGogAiAEIAhBAhBnIQACQCAEKAIAIgFBBHEgAEE7SnJFBEAgBSAANgIEDAELIAQgAUEEcjYCAAsMDgsgB0EsaiEAIwBBEGsiASQAIAEgAjYCDANAAkAgACABQQxqECsNACAIQQEgABA3EF9FDQAgABA+GgwBCwsgACABQQxqECsEQCAEIAQoAgBBAnI2AgALIAFBEGokAAwNCyAHQSxqIQECQCAAQQhqIAAoAggoAggRAAAiABAfQQAgAEEMahAfa0YEQCAEIAQoAgBBBHI2AgAMAQsgASACIAAgAEEYaiAIIARBABDNASICIABHIAUoAggiAUEMR3JFBEAgBUEANgIIDAELIAIgAGtBDEcgAUELSnJFBEAgBSABQQxqNgIICwsMDAsgB0HQoAFBLPwKAAAgByAAIAEgAiADIAQgBSAHIAdBLGoQbTYCLAwLCyAHQZChASgCADYCECAHQYihASkDADcDCCAHQYChASkDADcDACAHIAAgASACIAMgBCAFIAcgB0EUahBtNgIsDAoLIAdBLGogAiAEIAhBAhBnIQACQCAEKAIAIgFBBHEgAEE8SnJFBEAgBSAANgIADAELIAQgAUEEcjYCAAsMCQsgB0G4oQEpAwA3AxggB0GwoQEpAwA3AxAgB0GooQEpAwA3AwggB0GgoQEpAwA3AwAgByAAIAEgAiADIAQgBSAHIAdBIGoQbTYCLAwICyAHQSxqIAIgBCAIQQEQZyEAAkAgBCgCACIBQQRxIABBBkpyRQRAIAUgADYCGAwBCyAEIAFBBHI2AgALDAcLIAAgASACIAMgBCAFIAAoAgAoAhQRBgAMBwsgAEEIaiAAKAIIKAIYEQAAIQEgByAAIAcoAiwgAiADIAQgBSABECMgARAjIAEQH0ECdGoQbTYCLAwFCyAFQRRqIAdBLGogAiAEIAgQ9QIMBAsgB0EsaiACIAQgCEEEEGchACAELQAAQQRxRQRAIAUgAEHsDms2AhQLDAMLIAZBJUYNAQsgBCAEKAIAQQRyNgIADAELIwBBEGsiACQAIAAgAjYCDAJAIAQCf0EGIAdBLGoiASAAQQxqIgIQKw0AGkEEIAggARA3EJQBQSVHDQAaIAEQPiACECtFDQFBAgsgBCgCAHI2AgALIABBEGokAAsgBygCLAsgB0EwaiQACz0AIAACfyABKAIEIAEoAgAiAWtBAnUgAksEQCAAIAEgAkECdGoqAgA4AgBBAQwBCyAAQQA6AABBAAs6AAQLSAECfyMAQRBrIgYkACAGIAE2AgwgBkEIaiIHIAMQJyAHEEghASAHECUgBUEUaiAGQQxqIAIgBCABEPUCIAYoAgwgBkEQaiQAC0oBAn8jAEEQayIGJAAgBiABNgIMIAZBCGoiByADECcgBxBIIQEgBxAlIAAgBUEQaiAGQQxqIAIgBCABEPYCIAYoAgwgBkEQaiQAC0oBAn8jAEEQayIGJAAgBiABNgIMIAZBCGoiByADECcgBxBIIQEgBxAlIAAgBUEYaiAGQQxqIAIgBCABEPcCIAYoAgwgBkEQaiQACzAAIAAgASACIAMgBCAFIABBCGogACgCCCgCFBEAACIAECMgABAjIAAQH0ECdGoQbQtYAQF/IwBBIGsiBiQAIAZBuKEBKQMANwMYIAZBsKEBKQMANwMQIAZBqKEBKQMANwMIIAZBoKEBKQMANwMAIAAgASACIAMgBCAFIAYgBkEgaiIBEG0gASQAC4ICAQN/IAAoAgQgACgCACIEa0ECdSIDIAFJBEAjAEEgayIEJAACQCABIANrIgMgACgCCCAAKAIEIgFrQQJ1TQRAIAAoAgQiASADQQJ0aiEDA0AgASADRgRAIAAgAzYCBAUgASACKgIAOAIAIAFBBGohAQwBCwsMAQsgBEEMaiAAIAEgACgCAGtBAnUgA2oQtgEgACgCBCAAKAIAa0ECdSAAEIcCIgUoAggiASADQQJ0aiEDA0AgASADRwRAIAEgAioCADgCACABQQRqIQEMAQsLIAUgAzYCCCAAIAUQhQIgBRCBAgsgBEEgaiQADwsgASADSQRAIAAgBCABQQJ0ajYCBAsL9wsBAX8jAEEQayIHJAAgByABNgIMIARBADYCACAHIAMQJyAHEEkhCCAHECUCfwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAgBkHBAGsOOQABFwQXBRcGBxcXFwoXFxcXDg8QFxcXExUXFxcXFxcXAAECAwMXFwEXCBcXCQsXDBcNFwsXFxESFBYLIAAgBUEYaiAHQQxqIAIgBCAIEPoCDBgLIAAgBUEQaiAHQQxqIAIgBCAIEPkCDBcLIABBCGogACgCCCgCDBEAACEBIAcgACAHKAIMIAIgAyAEIAUgARAjIAEQIyABEB9qEG42AgwMFgsgB0EMaiACIAQgCEECEGghAAJAIAQoAgAiAUEEcSAAQQFrQR5LckUEQCAFIAA2AgwMAQsgBCABQQRyNgIACwwVCyAHQqXavanC7MuS+QA3AwAgByAAIAEgAiADIAQgBSAHIAdBCGoQbjYCDAwUCyAHQqWytanSrcuS5AA3AwAgByAAIAEgAiADIAQgBSAHIAdBCGoQbjYCDAwTCyAHQQxqIAIgBCAIQQIQaCEAAkAgBCgCACIBQQRxIABBF0pyRQRAIAUgADYCCAwBCyAEIAFBBHI2AgALDBILIAdBDGogAiAEIAhBAhBoIQACQCAEKAIAIgFBBHEgAEEBa0ELS3JFBEAgBSAANgIIDAELIAQgAUEEcjYCAAsMEQsgB0EMaiACIAQgCEEDEGghAAJAIAQoAgAiAUEEcSAAQe0CSnJFBEAgBSAANgIcDAELIAQgAUEEcjYCAAsMEAsgB0EMaiACIAQgCEECEGghAAJAIAQoAgAiAUEEcSAAQQFrIgBBC0tyRQRAIAUgADYCEAwBCyAEIAFBBHI2AgALDA8LIAdBDGogAiAEIAhBAhBoIQACQCAEKAIAIgFBBHEgAEE7SnJFBEAgBSAANgIEDAELIAQgAUEEcjYCAAsMDgsgB0EMaiEAIwBBEGsiASQAIAEgAjYCDANAAkAgACABQQxqECwNACAIQQEgABA4EGBFDQAgABA/GgwBCwsgACABQQxqECwEQCAEIAQoAgBBAnI2AgALIAFBEGokAAwNCyAHQQxqIQECQCAAQQhqIAAoAggoAggRAAAiABAfQQAgAEEMahAfa0YEQCAEIAQoAgBBBHI2AgAMAQsgASACIAAgAEEYaiAIIARBABDPASICIABHIAUoAggiAUEMR3JFBEAgBUEANgIIDAELIAIgAGtBDEcgAUELSnJFBEAgBSABQQxqNgIICwsMDAsgB0H4nwEoAAA2AAcgB0HxnwEpAAA3AwAgByAAIAEgAiADIAQgBSAHIAdBC2oQbjYCDAwLCyAHQYCgAS0AADoABCAHQfyfASgAADYCACAHIAAgASACIAMgBCAFIAcgB0EFahBuNgIMDAoLIAdBDGogAiAEIAhBAhBoIQACQCAEKAIAIgFBBHEgAEE8SnJFBEAgBSAANgIADAELIAQgAUEEcjYCAAsMCQsgB0KlkOmp0snOktMANwMAIAcgACABIAIgAyAEIAUgByAHQQhqEG42AgwMCAsgB0EMaiACIAQgCEEBEGghAAJAIAQoAgAiAUEEcSAAQQZKckUEQCAFIAA2AhgMAQsgBCABQQRyNgIACwwHCyAAIAEgAiADIAQgBSAAKAIAKAIUEQYADAcLIABBCGogACgCCCgCGBEAACEBIAcgACAHKAIMIAIgAyAEIAUgARAjIAEQIyABEB9qEG42AgwMBQsgBUEUaiAHQQxqIAIgBCAIEPgCDAQLIAdBDGogAiAEIAhBBBBoIQAgBC0AAEEEcUUEQCAFIABB7A5rNgIUCwwDCyAGQSVGDQELIAQgBCgCAEEEcjYCAAwBCyMAQRBrIgAkACAAIAI2AgwCQCAEAn9BBiAHQQxqIgEgAEEMaiICECwNABpBBCAIIAEQOBCVAUElRw0AGiABED8gAhAsRQ0BQQILIAQoAgByNgIACyAAQRBqJAALIAcoAgwLIAdBEGokAAtIAQJ/IwBBEGsiBiQAIAYgATYCDCAGQQhqIgcgAxAnIAcQSSEBIAcQJSAFQRRqIAZBDGogAiAEIAEQ+AIgBigCDCAGQRBqJAALSgECfyMAQRBrIgYkACAGIAE2AgwgBkEIaiIHIAMQJyAHEEkhASAHECUgACAFQRBqIAZBDGogAiAEIAEQ+QIgBigCDCAGQRBqJAALSgECfyMAQRBrIgYkACAGIAE2AgwgBkEIaiIHIAMQJyAHEEkhASAHECUgACAFQRhqIAZBDGogAiAEIAEQ+gIgBigCDCAGQRBqJAALLQAgACABIAIgAyAEIAUgAEEIaiAAKAIIKAIUEQAAIgAQIyAAECMgABAfahBuCzsBAX8jAEEQayIGJAAgBkKlkOmp0snOktMANwMIIAAgASACIAMgBCAFIAZBCGogBkEQaiIBEG4gASQAC4MBAQR/IwBBwAFrIgAkACAAIAQ2ArwBIABBoAFqIgUgBSAFQRQQLkHXDSAAQbwBahDKASIHaiIEIAIQaSEGIAAgAhAnIAAQSCAAECUgBSAEIAAQbyABIAAgACAHQQJ0aiIBIAAgBiAFa0ECdGogBCAGRhsgASACIAMQhQEgAEHAAWokAAvRAwEHfwJ/IwBB0AJrIgYkACAGIAU3A8gCIAYgBDcDwAIgBkIlNwO4AiAGQbgCaiIHQQFyQd8VIAIoAgQQyQEhCCAGIAZBkAJqIgk2AowCEC4hAAJ/IAgEQCAGIAIoAgg2AiAgCSAAIAcgBkEgaiAGQcACahCDAwwBCyAGQZACaiAAIAZBuAJqIAZBwAJqEIIDCyEAIAZB4wA2AiAgBkGEAmpBACAGQSBqIgoQNiEJIAZBkAJqIQcCQCAAQR5OBEAQLiEAAn8gCARAIAYgAigCCDYCICAGQYwCaiAAIAZBuAJqIAogBkHAAmoQgQMMAQsgBkGMAmogACAGQbgCaiAGQcACahDIAQsiAEF/Rg0BIAkgBigCjAIQPCAGKAKMAiEHCyAHIAAgB2oiCyACEGkhDCAGQeMANgIgIAZBGGpBACAGQSBqIgcQNiEIAkAgBigCjAIiCiAGQZACakYEQCAHIQAMAQsgAEEDdBA0IgBFDQEgCCAAEDwgBigCjAIhCgsgBkEMaiIHIAIQJyAKIAwgCyAAIAZBFGogBkEQaiAHEP4CIAcQJSABIAAgBigCFCAGKAIQIAIgAxCFASAIEDUgCRA1IAZB0AJqJAAMAQsQPQALC8kDAQd/An8jAEHAAmsiBSQAIAUgBDkDuAIgBUIlNwOwAiAFQbACaiIGQQFyQcYfIAIoAgQQyQEhByAFIAVBkAJqIgg2AowCEC4hAAJ/IAcEQCAFIAIoAgg2AiAgCCAAIAYgBUEgaiAFQbgCahCIAwwBCyAFQZACaiAAIAVBsAJqIAVBuAJqEIcDCyEAIAVB4wA2AiAgBUGEAmpBACAFQSBqIgkQNiEIIAVBkAJqIQYCQCAAQR5OBEAQLiEAAn8gBwRAIAUgAigCCDYCICAFQYwCaiAAIAVBsAJqIAkgBUG4AmoQhgMMAQsgBUGMAmogACAFQbACaiAFQbgCahCFAwsiAEF/Rg0BIAggBSgCjAIQPCAFKAKMAiEGCyAGIAAgBmoiCiACEGkhCyAFQeMANgIgIAVBGGpBACAFQSBqIgYQNiEHAkAgBSgCjAIiCSAFQZACakYEQCAGIQAMAQsgAEEDdBA0IgBFDQEgByAAEDwgBSgCjAIhCQsgBUEMaiIGIAIQJyAJIAsgCiAAIAVBFGogBUEQaiAGEP4CIAYQJSABIAAgBSgCFCAFKAIQIAIgAxCFASAHEDUgCBA1IAVBwAJqJAAMAQsQPQALCxEAIAAgASACIAMgBEEAEKECCxEAIAAgASACIAMgBEEAEKICCxEAIAAgASACIAMgBEEBEKECCxEAIAAgASACIAMgBEEBEKICC8kBAQF/IwBBIGsiBSQAIAUgATYCHAJAIAIoAgRBAXFFBEAgACABIAIgAyAEIAAoAgAoAhgRBwAhAgwBCyAFQRBqIgAgAhAnIAAQmQEhASAAECUCQCAEBEAgACABEHwMAQsgBUEQaiABEHsLIAUgBUEQahBONgIMA0AgBSAFQRBqIgAQdTYCCCAFQQxqIAVBCGoQdgRAIAUoAhwhAiAAEDkaBSAFQRxqIAVBDGoiACgCACgCABC7AyAAEPYBDAELCwsgBUEgaiQAIAILBQBB7CALewEEfyMAQdAAayIAJAAgACAENgJMIABBMGoiBSAFIAVBFBAuQdcNIABBzABqEMoBIgdqIgQgAhBpIQYgACACECcgABBJIAAQJSAFIAQgABB5IAEgACAAIAdqIgEgACAGIAVraiAEIAZGGyABIAIgAxCAASAAQdAAaiQAC8wDAQd/An8jAEGwAWsiBiQAIAYgBTcDqAEgBiAENwOgASAGQiU3A5gBIAZBmAFqIgdBAXJB3xUgAigCBBDJASEIIAYgBkHwAGoiCTYCbBAuIQACfyAIBEAgBiACKAIINgIgIAkgACAHIAZBIGogBkGgAWoQgwMMAQsgBkHwAGogACAGQZgBaiAGQaABahCCAwshACAGQeMANgIgIAZB5ABqQQAgBkEgaiIKEDYhCSAGQfAAaiEHAkAgAEEeTgRAEC4hAAJ/IAgEQCAGIAIoAgg2AiAgBkHsAGogACAGQZgBaiAKIAZBoAFqEIEDDAELIAZB7ABqIAAgBkGYAWogBkGgAWoQyAELIgBBf0YNASAJIAYoAmwQPCAGKAJsIQcLIAcgACAHaiILIAIQaSEMIAZB4wA2AiAgBkEYakEAIAZBIGoiBxA2IQgCQCAGKAJsIgogBkHwAGpGBEAgByEADAELIABBAXQQNCIARQ0BIAggABA8IAYoAmwhCgsgBkEMaiIHIAIQJyAKIAwgCyAAIAZBFGogBkEQaiAHEIQDIAcQJSABIAAgBigCFCAGKAIQIAIgAxCAASAIEDUgCRA1IAZBsAFqJAAMAQsQPQALCwkAIAEgABEAAAvEAwEHfwJ/IwBBoAFrIgUkACAFIAQ5A5gBIAVCJTcDkAEgBUGQAWoiBkEBckHGHyACKAIEEMkBIQcgBSAFQfAAaiIINgJsEC4hAAJ/IAcEQCAFIAIoAgg2AiAgCCAAIAYgBUEgaiAFQZgBahCIAwwBCyAFQfAAaiAAIAVBkAFqIAVBmAFqEIcDCyEAIAVB4wA2AiAgBUHkAGpBACAFQSBqIgkQNiEIIAVB8ABqIQYCQCAAQR5OBEAQLiEAAn8gBwRAIAUgAigCCDYCICAFQewAaiAAIAVBkAFqIAkgBUGYAWoQhgMMAQsgBUHsAGogACAFQZABaiAFQZgBahCFAwsiAEF/Rg0BIAggBSgCbBA8IAUoAmwhBgsgBiAAIAZqIgogAhBpIQsgBUHjADYCICAFQRhqQQAgBUEgaiIGEDYhBwJAIAUoAmwiCSAFQfAAakYEQCAGIQAMAQsgAEEBdBA0IgBFDQEgByAAEDwgBSgCbCEJCyAFQQxqIgYgAhAnIAkgCyAKIAAgBUEUaiAFQRBqIAYQhAMgBhAlIAEgACAFKAIUIAUoAhAgAiADEIABIAcQNSAIEDUgBUGgAWokAAwBCxA9AAsLEQAgACABIAIgAyAEQQAQowILEQAgACABIAIgAyAEQQAQpAILEQAgACABIAIgAyAEQQEQowILoQEBAn8jAEHgAGsiBSQAIAVBDGoiBCABIAIgAygCACAAEQgAQdQAEFMiACAEKQIANwIAIAAgBC0ACDoACCAAQQxqIARBDGoQgQEaIABBGGogBEEYahCBARogAEEkaiAEQSRqEIEBGiAAQTBqIARBMGoQgQEaIABBPGogBEE8ahCBARogAEHIAGogBEHIAGoQgQEaIAQQxwMgBUHgAGokACAACxEAIAAgASACIAMgBEEBEKQCC8kBAQF/IwBBIGsiBSQAIAUgATYCHAJAIAIoAgRBAXFFBEAgACABIAIgAyAEIAAoAgAoAhgRBwAhAgwBCyAFQRBqIgAgAhAnIAAQmwEhASAAECUCQCAEBEAgACABEHwMAQsgBUEQaiABEHsLIAUgBUEQahBONgIMA0AgBSAFQRBqIgAQdzYCCCAFQQxqIAVBCGoQdgRAIAUoAhwhAiAAECAaBSAFQRxqIAVBDGoiACgCACwAABC/AyAAEPgBDAELCwsgBUEgaiQAIAIL5gIBAX8jAEHAAmsiACQAIAAgAjYCuAIgACABNgK8AiAAQcQBahAkIQYgAEEQaiICIAMQJyACEEhB0J8BQeqfASAAQdABahBvIAIQJSAAQbgBahAkIgMgAxAoECEgACADQQAQIiIBNgK0ASAAIAI2AgwgAEEANgIIA0ACQCAAQbwCaiAAQbgCahArDQAgACgCtAEgAxAfIAFqRgRAIAMQHyECIAMgAxAfQQF0ECEgAyADECgQISAAIAIgA0EAECIiAWo2ArQBCyAAQbwCaiICEDdBECABIABBtAFqIABBCGpBACAGIABBEGogAEEMaiAAQdABahCYAQ0AIAIQPhoMAQsLIAMgACgCtAEgAWsQISADECMQLiAAIAU2AgQgAEEEahCNA0EBRwRAIARBBDYCAAsgAEG8AmogAEG4AmoQKwRAIAQgBCgCAEECcjYCAAsgACgCvAIgAxAgGiAGECAaIABBwAJqJAAL4QQCA38BfgJ/IwBB8AJrIgAkACAAIAI2AugCIAAgATYC7AIgAEHcAWogAyAAQfABaiAAQewBaiAAQegBahD7ASAAQdABahAkIgEgARAoECEgACABQQAQIiICNgLMASAAIABBIGo2AhwgAEEANgIYIABBAToAFyAAQcUAOgAWQQAhAwNAAkACQAJAIABB7AJqIABB6AJqECsNACAAKALMASABEB8gAmpGBEAgARAfIQYgASABEB9BAXQQISABIAEQKBAhIAAgBiABQQAQIiICajYCzAELIABB7AJqEDcgAEEXaiAAQRZqIAIgAEHMAWogACgC7AEgACgC6AEgAEHcAWogAEEgaiAAQRxqIABBGGogAEHwAWoQ+gENACADDQFBACEDIAAoAswBIAJrIgdBAEwNAgJAAkAgAi0AACIGQStrIggOAwEAAQALIAZBLkYNAkEBIQMgBkEwa0H/AXFBCkkNAwwBCyAHQQFGDQICQCAIDgMAAwADCyACLQABIgZBLkYNAUEBIQMgBkEwa0H/AXFBCU0NAgsCQCAAQdwBahAfRQ0AIAAtABdBAXFFDQAgACgCHCIDIABBIGprQZ8BSg0AIAAgA0EEajYCHCADIAAoAhg2AgALIAAgAiAAKALMASAEEI4DIAApAwAhCSAFIAApAwg3AwggBSAJNwMAIABB3AFqIABBIGogACgCHCAEEEMgAEHsAmogAEHoAmoQKwRAIAQgBCgCAEECcjYCAAsgACgC7AIgARAgGiAAQdwBahAgGiAAQfACaiQADAMLQQEhAwsgAEHsAmoQPhoMAAsACwvKBAEDfwJ/IwBB4AJrIgAkACAAIAI2AtgCIAAgATYC3AIgAEHMAWogAyAAQeABaiAAQdwBaiAAQdgBahD7ASAAQcABahAkIgEgARAoECEgACABQQAQIiICNgK8ASAAIABBEGo2AgwgAEEANgIIIABBAToAByAAQcUAOgAGQQAhAwNAAkACQAJAIABB3AJqIABB2AJqECsNACAAKAK8ASABEB8gAmpGBEAgARAfIQYgASABEB9BAXQQISABIAEQKBAhIAAgBiABQQAQIiICajYCvAELIABB3AJqEDcgAEEHaiAAQQZqIAIgAEG8AWogACgC3AEgACgC2AEgAEHMAWogAEEQaiAAQQxqIABBCGogAEHgAWoQ+gENACADDQFBACEDIAAoArwBIAJrIgdBAEwNAgJAAkAgAi0AACIGQStrIggOAwEAAQALIAZBLkYNAkEBIQMgBkEwa0H/AXFBCkkNAwwBCyAHQQFGDQICQCAIDgMAAwADCyACLQABIgZBLkYNAUEBIQMgBkEwa0H/AXFBCU0NAgsCQCAAQcwBahAfRQ0AIAAtAAdBAXFFDQAgACgCDCIDIABBEGprQZ8BSg0AIAAgA0EEajYCDCADIAAoAgg2AgALIAUgAiAAKAK8ASAEEI8DOQMAIABBzAFqIABBEGogACgCDCAEEEMgAEHcAmogAEHYAmoQKwRAIAQgBCgCAEECcjYCAAsgACgC3AIgARAgGiAAQcwBahAgGiAAQeACaiQADAMLQQEhAwsgAEHcAmoQPhoMAAsACwvKBAEDfwJ/IwBB4AJrIgAkACAAIAI2AtgCIAAgATYC3AIgAEHMAWogAyAAQeABaiAAQdwBaiAAQdgBahD7ASAAQcABahAkIgEgARAoECEgACABQQAQIiICNgK8ASAAIABBEGo2AgwgAEEANgIIIABBAToAByAAQcUAOgAGQQAhAwNAAkACQAJAIABB3AJqIABB2AJqECsNACAAKAK8ASABEB8gAmpGBEAgARAfIQYgASABEB9BAXQQISABIAEQKBAhIAAgBiABQQAQIiICajYCvAELIABB3AJqEDcgAEEHaiAAQQZqIAIgAEG8AWogACgC3AEgACgC2AEgAEHMAWogAEEQaiAAQQxqIABBCGogAEHgAWoQ+gENACADDQFBACEDIAAoArwBIAJrIgdBAEwNAgJAAkAgAi0AACIGQStrIggOAwEAAQALIAZBLkYNAkEBIQMgBkEwa0H/AXFBCkkNAwwBCyAHQQFGDQICQCAIDgMAAwADCyACLQABIgZBLkYNAUEBIQMgBkEwa0H/AXFBCU0NAgsCQCAAQcwBahAfRQ0AIAAtAAdBAXFFDQAgACgCDCIDIABBEGprQZ8BSg0AIAAgA0EEajYCDCADIAAoAgg2AgALIAUgAiAAKAK8ASAEEJEDOAIAIABBzAFqIABBEGogACgCDCAEEEMgAEHcAmogAEHYAmoQKwRAIAQgBCgCAEECcjYCAAsgACgC3AIgARAgGiAAQcwBahAgGiAAQeACaiQADAMLQQEhAwsgAEHcAmoQPhoMAAsACwuWAwECfyMAQdACayIAJAAgACACNgLIAiAAIAE2AswCIAMQaiEGIAMgAEHQAWoQrgEhByAAQcQBaiADIABBxAJqEK0BIABBuAFqECQiASABECgQISAAIAFBABAiIgI2ArQBIAAgAEEQajYCDCAAQQA2AggDQAJAIABBzAJqIABByAJqECsNACAAKAK0ASABEB8gAmpGBEAgARAfIQMgASABEB9BAXQQISABIAEQKBAhIAAgAyABQQAQIiICajYCtAELIABBzAJqIgMQNyAGIAIgAEG0AWogAEEIaiAAKALEAiAAQcQBaiAAQRBqIABBDGogBxCYAQ0AIAMQPhoMAQsLAkAgAEHEAWoQH0UNACAAKAIMIgMgAEEQamtBnwFKDQAgACADQQRqNgIMIAMgACgCCDYCAAsgBSACIAAoArQBIAQgBhCSAzcDACAAQcQBaiAAQRBqIAAoAgwgBBBDIABBzAJqIABByAJqECsEQCAEIAQoAgBBAnI2AgALIAAoAswCIAEQIBogAEHEAWoQIBogAEHQAmokAAuWAwECfyMAQdACayIAJAAgACACNgLIAiAAIAE2AswCIAMQaiEGIAMgAEHQAWoQrgEhByAAQcQBaiADIABBxAJqEK0BIABBuAFqECQiASABECgQISAAIAFBABAiIgI2ArQBIAAgAEEQajYCDCAAQQA2AggDQAJAIABBzAJqIABByAJqECsNACAAKAK0ASABEB8gAmpGBEAgARAfIQMgASABEB9BAXQQISABIAEQKBAhIAAgAyABQQAQIiICajYCtAELIABBzAJqIgMQNyAGIAIgAEG0AWogAEEIaiAAKALEAiAAQcQBaiAAQRBqIABBDGogBxCYAQ0AIAMQPhoMAQsLAkAgAEHEAWoQH0UNACAAKAIMIgMgAEEQamtBnwFKDQAgACADQQRqNgIMIAMgACgCCDYCAAsgBSACIAAoArQBIAQgBhCVAzsBACAAQcQBaiAAQRBqIAAoAgwgBBBDIABBzAJqIABByAJqECsEQCAEIAQoAgBBAnI2AgALIAAoAswCIAEQIBogAEHEAWoQIBogAEHQAmokAAuWAwECfyMAQdACayIAJAAgACACNgLIAiAAIAE2AswCIAMQaiEGIAMgAEHQAWoQrgEhByAAQcQBaiADIABBxAJqEK0BIABBuAFqECQiASABECgQISAAIAFBABAiIgI2ArQBIAAgAEEQajYCDCAAQQA2AggDQAJAIABBzAJqIABByAJqECsNACAAKAK0ASABEB8gAmpGBEAgARAfIQMgASABEB9BAXQQISABIAEQKBAhIAAgAyABQQAQIiICajYCtAELIABBzAJqIgMQNyAGIAIgAEG0AWogAEEIaiAAKALEAiAAQcQBaiAAQRBqIABBDGogBxCYAQ0AIAMQPhoMAQsLAkAgAEHEAWoQH0UNACAAKAIMIgMgAEEQamtB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DCECDAYLIANBIHIhAyABQQRqIQIgBEEEayEEIAEtAAMgCHQgB2ohBwsCQCAFQQRxRQ0AIAcgBigCIEYNACAKQd4ONgIYIAZB0f4ANgIEIAIhASAGKAIEIQUMAQsLIAIhAUEAIQdBACEDCyAGQdD+ADYCBAtBASECDAELQQAhBCAMIQILIAogDzYCECAKIBA2AgwgCiAENgIEIAogATYCACAGIAM2AkAgBiAHNgI8AkACQCAGKAIsRQRAIA8gFUYNASAGKAIEQdD+AEsNAQsCfyAVIA9rIQMCQAJAIAooAhwiASgCOCIMRQRAQQEhBSABIAooAihBASABKAIodEEBIAooAiARAwAiDDYCOCAMRQ0BCyABKAIsIgRFBEAgAUIANwIwIAFBASABKAIodCIENgIsCyADIARPBEAgBARAIAwgECAEayAE/AoAAAsgAUEANgI0DAILIAQgASgCNCIIayIFIAMgAyAFSxsiBARAIAggDGogECADayAE/AoAAAsgAyAFSwRAIAMgBGsiAwRAIAEoAjggECADayAD/AoAAAsgASADNgI0DAILQQAhBSABIAEoAjQgBGoiA0EAIAMgASgCLCIMRxs2AjQgDCABKAIwIgNNDQAgASADIARqNgIwCyAFDAELIAEgASgCLDYCMEEACw0BIAooAhAhDyAKKAIEIQQLIAogCigCCCAkIARrajYCCCAKIBUgD2siASAKKAIUajYCFCAGIAYoAiAgAWo2AiAgBi0ADEEEcUUgDyAVRnJFBEAgCigCDCABayEDIAYoAhwhBSAGAn8gBigCFARAIAUgAyABEFEMAQsgBSADIAEQswELIgE2AhwgCiABNgIwCyAKIAYoAkBBwABBACAGKAIIG2pBgAFBACAGKAIEIgFBv/4ARhtqQYACQYACQQAgAUHC/gBGGyABQcf+AEYbajYCLCACQXsgAhsgAiAPIBVGGyACIAQgJEYbIRwMAgsgBkHS/gA2AgQLQXwhHAsgF0EQaiQAIBxBAUsNASATQagBaiEBIBMoAqwBIQMgGigCACEJIBooAgQgEygCFGshDCMAQSBrIggkAAJAIAwgCWsiBUEATA0AIAEoAgggASgCBCICayAFTgRAIAIgA2siBCAFSARAIAwgBCAJaiIHayILRSAHIAxGckUEQCACIAcgC/wKAAALIAEgAiALajYCBCAE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eQAtKyAgIDBYMHgALTBYKzBYIDBYLTB4KzB4IDB4AE5vdgBUaHUAQXVndXN0AHVuc2lnbmVkIHNob3J0AHVuc2lnbmVkIGludABpbnZhbGlkIGxpdGVyYWwvbGVuZ3RocyBzZXQAaW52YWxpZCBjb2RlIGxlbmd0aHMgc2V0AHVua25vd24gaGVhZGVyIGZsYWdzIHNldABpbnZhbGlkIGRpc3RhbmNlcyBzZXQAZ2V0AE9jdABmbG9hdABpbnZhbGlkIGJpdCBsZW5ndGggcmVwZWF0AFNhdABudW1Qb2ludHMAY29sb3JzAFVucGFja09wdGlvbnMAcG9zaXRpb25zAHJvdGF0aW9ucwB0b28gbWFueSBsZW5ndGggb3IgZGlzdGFuY2Ugc3ltYm9scwBpbnZhbGlkIHN0b3JlZCBibG9jayBsZW5ndGhzAHNjYWxlcwBhbHBoYXMAW1NQWjogRVJST1JdIENoZWNrIGZhaWxlZDogJXM6JWQ6ICVzAHZmMzJfcHRyAEFwcgB2ZWN0b3IAbW9uZXlfZ2V0IGVycm9yAFtTUFogRVJST1JdIGRlc2VyaWFsaXplUGFja2VkR2F1c3NpYW5zOiByZWFkIGVycm9yAE9jdG9iZXIATm92ZW1iZXIAU2VwdGVtYmVyAERlY2VtYmVyAHVuc2lnbmVkIGNoYXIAaW9zX2Jhc2U6OmNsZWFyAE1hcgAvZW1zZGsvZW1zY3JpcHRlbi9zeXN0ZW0vbGliL2xpYmN4eGFiaS9zcmMvcHJpdmF0ZV90eXBlaW5mby5jcHAAU2VwACVJOiVNOiVTICVwAFN1bgBKdW4ATW9uAG5hbgBKYW4AY29vcmRpbmF0ZVN5c3RlbQBDb29yZGluYXRlU3lzdGVtAEp1bABib29sAGxsAEFwcmlsAGludmFsaWQgY29kZSAtLSBtaXNzaW5nIGVuZC1vZi1ibG9jawBpbmNvcnJlY3QgaGVhZGVyIGNoZWNrAGluY29ycmVjdCBsZW5ndGggY2hlY2sAaW5jb3JyZWN0IGRhdGEgY2hlY2sAcHVzaF9iYWNrAGludmFsaWQgZGlzdGFuY2UgdG9vIGZhciBiYWNrAEZyaQBzaABoZWFkZXIgY3JjIG1pc21hdGNoAE1hcmNoAEF1ZwB1bnNpZ25lZCBsb25nIGxvbmcAdW5zaWduZWQgbG9uZwBzdGQ6OndzdHJpbmcAYmFzaWNfc3RyaW5nAHN0ZDo6c3RyaW5nAHN0ZDo6dTE2c3RyaW5nAHN0ZDo6dTMyc3RyaW5nAGluZgAlLjBMZgAlTGYAcmVzaXplAGludmFsaWQgd2luZG93IHNpemUAdHJ1ZQBUdWUAZmFsc2UAaW52YWxpZCBibG9jayB0eXBlAEp1bmUAZG91YmxlAHNoRGVncmVlAGJhZF9hcnJheV9uZXdfbGVuZ3RoIHdhcyB0aHJvd24gaW4gLWZuby1leGNlcHRpb25zIG1vZGUAaW52YWxpZCBsaXRlcmFsL2xlbmd0aCBjb2RlAGludmFsaWQgZGlzdGFuY2UgY29kZQBSYXdHYXVzc2lhbkNsb3VkAHVua25vd24gY29tcHJlc3Npb24gbWV0aG9kAFtTUFogRVJST1JdIGRlc2VyaWFsaXplUGFja2VkR2F1c3NpYW5zOiBoZWFkZXIgbm90IGZvdW5kACUwKmxsZAAlKmxsZAArJWxsZAAlKy40bGQAdm9pZABsb2NhbGUgbm90IHN1cHBvcnRlZABhbnRpYWxpYXNlZABXZWQAJVktJW0tJWQAW1NQWiBFUlJPUl0gZGVzZXJpYWxpemVQYWNrZWRHYXVzc2lhbnM6IFRvbyBtYW55IHBvaW50czogJWQAW1NQWiBFUlJPUl0gZGVzZXJpYWxpemVQYWNrZWRHYXVzc2lhbnM6IFVuc3VwcG9ydGVkIFNIIGRlZ3JlZTogJWQAW1NQWiBFUlJPUl0gZGVzZXJpYWxpemVQYWNrZWRHYXVzc2lhbnM6IHZlcnNpb24gbm90IHN1cHBvcnRlZDogJWQARGVjAC4vc3B6L3NyYy9jYy9sb2FkLXNwei5jYwBGZWIAJWEgJWIgJWQgJUg6JU06JVMgJVkAUE9TSVgAVmVjdG9yVUludDhUACVIOiVNOiVTAE5BTgBQTQBBTQAlSDolTQBMQ19BTEwAQVNDSUkATEFORwBSVUYATFVGAElORgBSREYATERGAFVOU1BFQ0lGSUVEAEMAUlVCAExVQgBSREIATERCAGNhdGNoaW5nIGEgY2xhc3Mgd2l0aG91dCBhbiBvYmplY3Q/AGVtc2NyaXB0ZW46Om1lbW9yeV92aWV3PHNob3J0PgBlbXNjcmlwdGVuOjptZW1vcnlfdmlldzx1bnNpZ25lZCBzaG9ydD4AZW1zY3JpcHRlbjo6bWVtb3J5X3ZpZXc8aW50PgBlbXNjcmlwdGVuOjptZW1vcnlfdmlldzx1bnNpZ25lZCBpbnQ+AGVtc2NyaXB0ZW46Om1lbW9yeV92aWV3PGZsb2F0PgBlbXNjcmlwdGVuOjptZW1vcnlfdmlldzx1aW50OF90PgBlbXNjcmlwdGVuOjptZW1vcnlfdmlldzxpbnQ4X3Q+AGVtc2NyaXB0ZW46Om1lbW9yeV92aWV3PHVpbnQxNl90PgBlbXNjcmlwdGVuOjptZW1vcnlfdmlldzxpbnQxNl90PgBlbXNjcmlwdGVuOjptZW1vcnlfdmlldzx1aW50NjRfdD4AZW1zY3JpcHRlbjo6bWVtb3J5X3ZpZXc8aW50NjRfdD4AZW1zY3JpcHRlbjo6bWVtb3J5X3ZpZXc8dWludDMyX3Q+AGVtc2NyaXB0ZW46Om1lbW9yeV92aWV3PGludDMyX3Q+AGVtc2NyaXB0ZW46Om1lbW9yeV92aWV3PGNoYXI+AGVtc2NyaXB0ZW46Om1lbW9yeV92aWV3PHVuc2lnbmVkIGNoYXI+AGVtc2NyaXB0ZW46Om1lbW9yeV92aWV3PHNpZ25lZCBjaGFyPgBlbXNjcmlwdGVuOjptZW1vcnlfdmlldzxsb25nPgBlbXNjcmlwdGVuOjptZW1vcnlfdmlldzx1bnNpZ25lZCBsb25nPgBlbXNjcmlwdGVuOjptZW1vcnlfdmlldzxkb3VibGU+ADAxMjM0NTY3ODkAQy5VVEYtOABWZWN0b3JGbG9hdDMyADEuMy4xAC4ALQAocGFja2VkLmFscGhhcy5zaXplKCkpID09IChudW1Qb2ludHMpAChudWxsKQAocGFja2VkLmNvbG9ycy5zaXplKCkpID09IChudW1Qb2ludHMgKiAzKQAocGFja2VkLnNjYWxlcy5zaXplKCkpID09IChudW1Qb2ludHMgKiAzKQAocGFja2VkLnNoLnNpemUoKSkgPT0gKG51bVBvaW50cyAqIHNoRGltICogMykAKHBhY2tlZC5yb3RhdGlvbnMuc2l6ZSgpKSA9PSAobnVtUG9pbnRzICogKHBhY2tlZC51c2VzUXVhdGVybmlvblNtYWxsZXN0VGhyZWUgPyA0IDogMykpAChwYWNrZWQucG9zaXRpb25zLnNpemUoKSkgPT0gKG51bVBvaW50cyAqIDMgKiAodXNlc0Zsb2F0MTYgPyAyIDogMykpACUAbGVuZ3RoX2Vycm9yIHdhcyB0aHJvd24gaW4gLWZuby1leGNlcHRpb25zIG1vZGUgd2l0aCBtZXNzYWdlICIlcyIAUHVyZSB2aXJ0dWFsIGZ1bmN0aW9uIGNhbGxlZCEAW1NQWjogRVJST1JdIFVuc3VwcG9ydGVkIFNIIGRlZ3JlZTogJWQKAAkAAAAAgD8AAIA/AACAPwAAgD8AAIA/AACAPwAAgD8AAIA/AACAPwAAgD8AAIA/AACAPwAAgD8AAIA/AACAPwBBkCALthMgEAAA9GwAAPRsAABAEAAAqG0AACgQAABOM3NwejEzR2F1c3NpYW5DbG91ZEUAAACobQAASBAAAE4zc3B6MTNVbnBhY2tPcHRpb25zRQBwcGlpcAD0bAAAbBAAAKhtAAB0EAAATlN0M19fMjZ2ZWN0b3JJZk5TXzlhbGxvY2F0b3JJZkVFRUUAaXBwACxuAADEEAAAAAAAAAMAAADcEAAAAAAAACgSAAAAAAAAWBIAAAAAAABOU3QzX18yOG9wdGlvbmFsSWZFRQAAAADQbQAA6BAAABgRAABOU3QzX18yMjdfX29wdGlvbmFsX21vdmVfYXNzaWduX2Jhc2VJZkxiMUVFRQAAAADQbQAAJBEAAFQRAABOU3QzX18yMjdfX29wdGlvbmFsX2NvcHlfYXNzaWduX2Jhc2VJZkxiMUVFRQAAAADQbQAAYBEAAIgRAABOU3QzX18yMjBfX29wdGlvbmFsX21vdmVfYmFzZUlmTGIxRUVFAAAA0G0AAJQRAAC8EQAATlN0M19fMjIwX19vcHRpb25hbF9jb3B5X2Jhc2VJZkxiMUVFRQAAANBtAADIEQAA9BEAAE5TdDNfXzIyM19fb3B0aW9uYWxfc3RvcmFnZV9iYXNlSWZMYjBFRUUAAAAAqG0AAPwRAABOU3QzX18yMjRfX29wdGlvbmFsX2Rlc3RydWN0X2Jhc2VJZkxiMUVFRQAAAKhtAAAwEgAATlN0M19fMjE4X19zZmluYWVfY3Rvcl9iYXNlSUxiMUVMYjFFRUUAAKhtAABgEgAATlN0M19fMjIwX19zZmluYWVfYXNzaWduX2Jhc2VJTGIxRUxiMUVFRQAAAACIbgAAnBIAAAAAAABsEAAAUE5TdDNfXzI2dmVjdG9ySWZOU185YWxsb2NhdG9ySWZFRUVFAAAAAIhuAADUEgAAAQAAAGwQAABQS05TdDNfXzI2dmVjdG9ySWZOU185YWxsb2NhdG9ySWZFRUVFAHBwAHYAdnAAAACMEgAAcHAAAJRsAACMEgAAPG0AAHZwcGQAAAAAlGwAAIwSAAAYbQAAPG0AAHZwcHBkAAAAGG0AAMQSAABwcHAATBMAADxtAACobQAAVBMAAE4xMGVtc2NyaXB0ZW4zdmFsRQAAnBAAAGwQAAAYbQAAcHBwcAAAAAAAAAAArGwAAGwQAAAYbQAAPG0AAGlwcHBkAAAALG4AAMATAAAAAAAAAwAAANgTAAAAAAAAKBIAAAAAAABYEgAAAAAAAE5TdDNfXzI4b3B0aW9uYWxJaEVFAAAAANBtAADkEwAAFBQAAE5TdDNfXzIyN19fb3B0aW9uYWxfbW92ZV9hc3NpZ25fYmFzZUloTGIxRUVFAAAAANBtAAAgFAAAUBQAAE5TdDNfXzIyN19fb3B0aW9uYWxfY29weV9hc3NpZ25fYmFzZUloTGIxRUVFAAAAANBtAABcFAAAhBQAAE5TdDNfXzIyMF9fb3B0aW9uYWxfbW92ZV9iYXNlSWhMYjFFRUUAAADQbQAAkBQAALgUAABOU3QzX18yMjBfX29wdGlvbmFsX2NvcHlfYmFzZUloTGIxRUVFAAAA0G0AAMQUAADwFAAATlN0M19fMjIzX19vcHRpb25hbF9zdG9yYWdlX2Jhc2VJaExiMEVFRQAAAACobQAA+BQAAE5TdDNfXzIyNF9fb3B0aW9uYWxfZGVzdHJ1Y3RfYmFzZUloTGIxRUVFAAAAqG0AACwVAABOU3QzX18yNnZlY3RvckloTlNfOWFsbG9jYXRvckloRUVFRQCIbgAAYBUAAAAAAAAkFQAAUE5TdDNfXzI2dmVjdG9ySWhOU185YWxsb2NhdG9ySWhFRUVFAAAAAIhuAACYFQAAAQAAACQVAABQS05TdDNfXzI2dmVjdG9ySWhOU185YWxsb2NhdG9ySWhFRUVFAHBwAHZwAFAVAABwcAAAlGwAAFAVAADEbAAAdnBwaQAAAACUbAAAUBUAABhtAADEbAAAdnBwcGkAAAAYbQAAiBUAAHBwcABMEwAAxGwAAJgTAAAkFQAAGG0AAHBwcHAAAAAArGwAACQVAAAYbQAAxGwAAGlwcHBpAHAAdnAAaXBwAHZwcGkAaXBwAHZwcGkAcHBwAHZwcHAAAABcbQAAYBYAAE4zc3B6MTZDb29yZGluYXRlU3lzdGVtRQBwAHZwAGlwcAB2cHBpAAAAAAAAAwAAAAgAAAAPAAAAqG0AAKAWAABOU3QzX18yMTJiYXNpY19zdHJpbmdJY05TXzExY2hhcl90cmFpdHNJY0VFTlNfOWFsbG9jYXRvckljRUVFRQAAqG0AAOgWAABOU3QzX18yMTJiYXNpY19zdHJpbmdJd05TXzExY2hhcl90cmFpdHNJd0VFTlNfOWFsbG9jYXRvckl3RUVFRQAAqG0AADAXAABOU3QzX18yMTJiYXNpY19zdHJpbmdJRHNOU18xMWNoYXJfdHJhaXRzSURzRUVOU185YWxsb2NhdG9ySURzRUVFRQAAAKhtAAB8FwAATlN0M19fMjEyYmFzaWNfc3RyaW5nSURpTlNfMTFjaGFyX3RyYWl0c0lEaUVFTlNfOWFsbG9jYXRvcklEaUVFRUUAAACobQAAyBcAAE4xMGVtc2NyaXB0ZW4xMW1lbW9yeV92aWV3SWNFRQAAqG0AAPAXAABOMTBlbXNjcmlwdGVuMTFtZW1vcnlfdmlld0lhRUUAAKhtAAAYGAAATjEwZW1zY3JpcHRlbjExbWVtb3J5X3ZpZXdJaEVFAACobQAAQBgAAE4xMGVtc2NyaXB0ZW4xMW1lbW9yeV92aWV3SXNFRQAAqG0AAGgYAABOMTBlbXNjcmlwdGVuMTFtZW1vcnlfdmlld0l0RUUAAKhtAACQGAAATjEwZW1zY3JpcHRlbjExbWVtb3J5X3ZpZXdJaUVFAACobQAAuBgAAE4xMGVtc2NyaXB0ZW4xMW1lbW9yeV92aWV3SWpFRQAAqG0AAOAYAABOMTBlbXNjcmlwdGVuMTFtZW1vcnlfdmlld0lsRUUAAKhtAAAIGQAATjEwZW1zY3JpcHRlbjExbWVtb3J5X3ZpZXdJbUVFAACobQAAMBkAAE4xMGVtc2NyaXB0ZW4xMW1lbW9yeV92aWV3SXhFRQAAqG0AAFgZAABOMTBlbXNjcmlwdGVuMTFtZW1vcnlfdmlld0l5RUUAAKhtAACAGQAATjEwZW1zY3Jp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AAAJqAAACAQAAAiEAAAIRAAACegAEAcIAAAIXAAACBwAAAmYABQHUwAACHwAAAg8AAAJ2AASBxcAAAhsAAAILAAACbgAAAgMAAAIjAAACEwAAAn4ABAHAwAACFIAAAgSABUIowATByMAAAhyAAAIMgAACcQAEQcLAAAIYgAACCIAAAmkAAAIAgAACIIAAAhCAAAJ5AAQBwcAAAhaAAAIGgAACZQAFAdDAAAIegAACDoAAAnUABIHEwAACGoAAAgqAAAJtAAACAoAAAiKAAAISgAACfQAEAcFAAAIVgAACBYAQAgAABMHMwAACHYAAAg2AAAJzAARBw8AAAhmAAAIJgAACawAAAgGAAAIhgAACEYAAAnsABAHCQAACF4AAAgeAAAJnAAUB2MAAAh+AAAIPgAACdwAEgcbAAAIbgAACC4AAAm8AAAIDgAACI4AAAhOAAAJ/ABgBwAAAAhRAAAIEQAVCIMAEgcfAAAIcQAACDEAAAnCABAHCgAACGEAAAghAAAJogAACAEAAAiBAAAIQQAACeIAEAcGAAAIWQAACBkAAAmSABMHOwAACHkAAAg5AAAJ0gARBxEAAAhpAAAIKQAACbIAAAgJAAAIiQAACEkAAAnyABAHBAAACFUAAAgVABAIAgETBysAAAh1AAAINQAACcoAEQcNAAAIZQAACCUAAAmqAAAIBQAACIUAAAhFAAAJ6gAQBwgAAAhdAAAIHQAACZoAFAdTAAAIfQAACD0AAAnaABIHFwAACG0AAAgtAAAJugAACA0AAAiNAAAITQAACfoAEAcDAAAIUwAACBMAFQjDABMHIwAACHMAAAgzAAAJxgARBwsAAAhjAAAIIwAACaYAAAgDAAAIgwAACEMAAAnmABAHBwAACFsAAAgbAAAJlgAUB0MAAAh7AAAIOwAACdYAEgcTAAAIawAACCsAAAm2AAAICwAACIsAAAhLAAAJ9gAQBwUAAAhXAAAIFwBACAAAEwczAAAIdwAACDcAAAnOABEHDwAACGcAAAgnAAAJrgAACAcAAAiHAAAIRwAACe4AEAcJAAAIXwAACB8AAAmeABQHYwAACH8AAAg/AAAJ3gASBxsAAAhvAAAILwAACb4AAAgPAAAIjwAACE8AAAn+AGAHAAAACFAAAAgQABQIcwASBx8AAAhwAAAIMAAACcEAEAcKAAAIYAAACCAAAAmhAAAIAAAACIAAAAhAAAAJ4QAQBwYAAAhYAAAIGAAACZEAEwc7AAAIeAAACDgAAAnRABEHEQAACGgAAAgoAAAJsQAACAgAAAiIAAAISAAACfEAEAcEAAAIVAAACBQAFQjjABMHKwAACHQAAAg0AAAJyQARBw0AAAhkAAAIJAAACakAAAgEAAAIhAAACEQAAAnpABAHCAAACFwAAAgcAAAJmQAUB1MAAAh8AAAIPAAACdkAEgcXAAAIbAAACCwAAAm5AAAIDAAACIwAAAhMAAAJ+QAQBwMAAAhSAAAIEgAVCKMAEwcjAAAIcgAACDIAAAnFABEHCwAACGIAAAgiAAAJpQAACAIAAAiCAAAIQgAACeUAEAcHAAAIWgAACBoAAAmVABQHQwAACHoAAAg6AAAJ1QASBxMAAAhqAAAIKgAACbUAAAgKAAAIigAACEoAAAn1ABAHBQAACFYAAAgWAEAIAAATBzMAAAh2AAAINgAACc0AEQcPAAAIZgAACCYAAAmtAAAIBgAACIYAAAhGAAAJ7QAQBwkAAAheAAAIHgAACZ0AFAdjAAAIfgAACD4AAAndABIHGwAACG4AAAguAAAJvQAACA4AAAiOAAAITgAACf0AYAcAAAAIUQAACBEAFQiDABIHHwAACHEAAAgxAAAJwwAQBwoAAAhhAAAIIQAACaMAAAgBAAAIgQAACEEAAAnjABAHBgAACFkAAAgZAAAJkwATBzsAAAh5AAAIOQAACdMAEQcRAAAIaQAACCkAAAmzAAAICQAACIkAAAhJAAAJ8wAQBwQAAAhVAAAIFQAQCAIBEwcrAAAIdQAACDUAAAnLABEHDQAACGUAAAglAAAJqwAACAUAAAiFAAAIRQAACesAEAcIAAAIXQAACB0AAAmbABQHUwAACH0AAAg9AAAJ2wASBxcAAAhtAAAILQAACbsAAAgNAAAIjQAACE0AAAn7ABAHAwAACFMAAAgTABUIwwATByMAAAhzAAAIMwAACccAEQcLAAAIYwAACCMAAAmnAAAIAwAACIMAAAhDAAAJ5wAQBwcAAAhbAAAIGwAACZcAFAdDAAAIewAACDsAAAnXABIHEwAACGsAAAgrAAAJtwAACAsAAAiLAAAISwAACfcAEAcFAAAIVwAACBcAQAgAABMHMwAACHcAAAg3AAAJzwARBw8AAAhnAAAIJwAACa8AAAgH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Y05TXzExY2hhcl90cmFpdHNJY0VFRUUA0G0AAHg9AAAAPAAATlN0M19fMjE1YmFzaWNfc3RyaW5nYnVmSWNOU18xMWNoYXJfdHJhaXRzSWNFRU5TXzlhbGxvY2F0b3JJY0VFRUUAAABAAAAAAAAAAKw+AABZAAAAWgAAADgAAAD4////rD4AAFsAAABcAAAAwP///8D///+sPgAAXQAAAF4AAADIPQAALD4AAGg+AAB8PgAAkD4AAKQ+AABUPgAAQD4AAPA9AADcPQAAQAAAAAAAAAAcPQAATAAAAE0AAAA4AAAA+P///xw9AABOAAAATwAAAMD////A////HD0AAFAAAABRAAAAQAAAAAAAAAA8PAAARAAAAEUAAADA////wP///zw8AABGAAAARwAAADgAAAAAAAAAhDwAAEgAAABJAAAAyP///8j///+EPAAASgAAAEsAAADQbQAAuD4AABw9AABOU3QzX18yMThiYXNpY19zdHJpbmdzdHJlYW1JY05TXzExY2hhcl90cmFpdHNJY0VFTlNfOWFsbG9jYXRvckljRUVFRQAAAAAAAAAAED8AAF8AAABgAAAAqG0AABg/AABOU3QzX18yOGlvc19iYXNlRQAAAAAAAADRdJ4AV529KoBwUg///z4nCgAAAGQAAADoAwAAECcAAKCGAQBAQg8AgJaYAADh9QUYAAAANQAAAHEAAABr////zvv//5K///8AAAAAAAAAAP////////////////////////////////////////////////////////////////8AAQIDBAUGBwgJ/////////woLDA0ODxAREhMUFRYXGBkaGxwdHh8gISIj////////CgsMDQ4PEBESExQVFhcYGRobHB0eHyAhIiP/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////AAECBAcDBgUAAAAAAAAAAgAAwAMAAMAEAADABQAAwAYAAMAHAADACAAAwAkAAMAKAADACwAAwAwAAMANAADADgAAwA8AAMAQAADAEQAAwBIAAMATAADA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")),Y((await q(oe)).instance))})();function Mb(){function K(){var Y;if(i.calledRun=!0,!C){if(B=!0,eh.G(),I?.(i),(Y=i.onRuntimeInitialized)==null||Y.call(i),i.postRun)for(typeof i.postRun=="function"&&(i.postRun=[i.postRun]);i.postRun.length;){var oe=i.postRun.shift();H.push(oe)}$(H)}}if(0<v)F=Mb;else{if(i.preRun)for(typeof i.preRun=="function"&&(i.preRun=[i.preRun]);i.preRun.length;)ee();$(Z),0<v?F=Mb:i.setStatus?(i.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>i.setStatus(""),1),K()},1)):K()}}if(i.preInit)for(typeof i.preInit=="function"&&(i.preInit=[i.preInit]);0<i.preInit.length;)i.preInit.shift()();return Mb(),B?n=i:n=new Promise((K,Y)=>{I=K,b=Y}),n}var kh=(e,t,n=i=>i)=>{let i=e.vf32_ptr(t),o=t.size();return new Float32Array(e.HEAPF32.buffer,i,o).map(n)},Koe=e=>1/(1+Math.exp(-e)),Xoe=e=>t=>t*e+.5,Zoe=(e,t,n)=>{let i=n?.colorScaleFactor??.282;return{numPoints:t.numPoints,shDegree:t.shDegree,antialiased:t.antialiased,positions:kh(e,t.positions),scales:kh(e,t.scales,Math.exp),rotations:kh(e,t.rotations),alphas:kh(e,t.alphas,Koe),colors:kh(e,t.colors,Xoe(i)),sh:kh(e,t.sh)}},$oe=(e,t)=>{e._free(e.vf32_ptr(t.positions)),e._free(e.vf32_ptr(t.scales)),e._free(e.vf32_ptr(t.rotations)),e._free(e.vf32_ptr(t.alphas)),e._free(e.vf32_ptr(t.colors)),e._free(e.vf32_ptr(t.sh))},d2=async(e,t)=>{var n;let i=await Joe(),o=e instanceof Uint8Array?e:new Uint8Array(e),r=null;try{if(r=i._malloc(Uint8Array.BYTES_PER_ELEMENT*o.length),r===null)throw new Error("couldn't allocate memory");i.HEAPU8.set(o,r/Uint8Array.BYTES_PER_ELEMENT);let a=i.CoordinateSystem[((n=t?.unpackOptions)==null?void 0:n.coordinateSystem)??"UNSPECIFIED"],s=i.load_spz(r,o.length,{coordinateSystem:a}),A=Zoe(i,s,t);return $oe(i,s),A}catch(a){throw a}finally{r!==null&&i._free(r)}};var ere=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));function Ju(e){e=e??G.EMPTY_OBJECT;let t=e.resourceCache,n=e.gltf,i=e.primitive,o=e.spz,r=e.gltfResource,a=e.baseResource,s=e.cacheKey;this._resourceCache=t,this._gltfResource=r,this._baseResource=a,this._gltf=n,this._primitive=i,this._spz=o,this._cacheKey=s,this._bufferViewLoader=void 0,this._bufferViewTypedArray=void 0,this._decodePromise=void 0,this._decodedData=void 0,this._state=ke.UNLOADED,this._promise=void 0,this._spzError=void 0}c(Object.create)&&(Ju.prototype=Object.create(Ln.prototype),Ju.prototype.constructor=Ju);Object.defineProperties(Ju.prototype,{cacheKey:{get:function(){return this._cacheKey}},decodedData:{get:function(){return this._decodedData}}});async function tre(e){let t=e._resourceCache;try{let n=t.getBufferViewLoader({gltf:e._gltf,bufferViewId:0,gltfResource:e._gltfResource,baseResource:e._baseResource});return e._bufferViewLoader=n,await n.load(),e.isDestroyed()?void 0:(e._bufferViewTypedArray=n.typedArray,e._state=ke.PROCESSING,e)}catch(n){if(e.isDestroyed())return;h2(e,n)}}Ju.prototype.load=async function(){return c(this._promise)?this._promise:(this._state=ke.LOADING,this._promise=tre(this),this._promise)};function h2(e,t){throw e.unload(),e._state=ke.FAILED,e.getError("Failed to load SPZ",t)}async function nre(e,t){try{let n=await t;return e.isDestroyed()?void 0:(e.unload(),e._decodedData={gcloud:n},e._state=ke.READY,e._baseResource)}catch(n){if(e.isDestroyed())return;e._spzError=n}}Ju.prototype.process=function(e){if(this._state===ke.READY)return!0;if(this._state!==ke.PROCESSING||(c(this._spzError)&&h2(this,this._spzError),!c(this._bufferViewTypedArray))||c(this._decodePromise))return!1;let t=d2(this._bufferViewTypedArray,{unpackOptions:{coordinateSystem:"UNSPECIFIED"}});if(!c(t))return!1;this._decodePromise=nre(this,t)};Ju.prototype.unload=function(){c(this._bufferViewLoader)&&this._resourceCache.unload(this._bufferViewLoader),this._bufferViewLoader=void 0,this._bufferViewTypedArray=void 0,this._decodedData=void 0,this._gltf=void 0,this._primitive=void 0};var m2=Ju;function wg(e){e=e??G.EMPTY_OBJECT;let t=e.id,n=e.properties??{},i={};for(let o in n)if(n.hasOwnProperty(o)){let r=n[o];c(r.semantic)&&(i[r.semantic]=r)}this._id=t,this._name=e.name,this._description=e.description,this._properties=n,this._propertiesBySemantic=i,this._extras=Re(e.extras,!0),this._extensions=Re(e.extensions,!0)}wg.fromJson=function(e){e=e??G.EMPTY_OBJECT;let t=e.id,n=e.class,i={};for(let o in n.properties)if(n.properties.hasOwnProperty(o)){let r=Cg.fromJson({id:o,property:n.properties[o],enums:e.enums});i[o]=r}return new wg({id:t,name:n.name,description:n.description,properties:i,extras:n.extras,extensions:n.extensions})};Object.defineProperties(wg.prototype,{properties:{get:function(){return this._properties}},propertiesBySemantic:{get:function(){return this._propertiesBySemantic}},id:{get:function(){return this._id}},name:{get:function(){return this._name}},description:{get:function(){return this._description}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}}});wg.BATCH_TABLE_CLASS_NAME="_batchTable";var Ku=wg;function pI(e){e=e??G.EMPTY_OBJECT;let t=e.value,n=e.name;this._value=t,this._name=n,this._description=e.description,this._extras=Re(e.extras,!0),this._extensions=Re(e.extensions,!0)}pI.fromJson=function(e){return new pI({value:e.value,name:e.name,description:e.description,extras:e.extras,extensions:e.extensions})};Object.defineProperties(pI.prototype,{value:{get:function(){return this._value}},name:{get:function(){return this._name}},description:{get:function(){return this._description}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}}});var p2=pI;function gI(e){e=e??G.EMPTY_OBJECT;let t=e.id,n=e.values,i={},o={},r=n.length;for(let s=0;s<r;++s){let A=n[s];i[A.value]=A.name,o[A.name]=A.value}let a=e.valueType??Vt.UINT16;this._values=n,this._namesByValue=i,this._valuesByName=o,this._valueType=a,this._id=t,this._name=e.name,this._description=e.description,this._extras=Re(e.extras,!0),this._extensions=Re(e.extensions,!0)}gI.fromJson=function(e){e=e??G.EMPTY_OBJECT;let t=e.id,n=e.enum,i=n.values.map(function(o){return p2.fromJson(o)});return new gI({id:t,values:i,valueType:Vt[n.valueType],name:n.name,description:n.description,extras:n.extras,extensions:n.extensions})};Object.defineProperties(gI.prototype,{values:{get:function(){return this._values}},namesByValue:{get:function(){return this._namesByValue}},valuesByName:{get:function(){return this._valuesByName}},valueType:{get:function(){return this._valueType}},id:{get:function(){return this._id}},name:{get:function(){return this._name}},description:{get:function(){return this._description}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}}});var g2=gI;function CI(e){e=e??G.EMPTY_OBJECT;let t=e.classes??{},n=e.enums??{};this._classes=t,this._enums=n,this._id=e.id,this._name=e.name,this._description=e.description,this._version=e.version,this._extras=Re(e.extras,!0),this._extensions=Re(e.extensions,!0)}CI.fromJson=function(e){let t={};if(c(e.enums))for(let i in e.enums)e.enums.hasOwnProperty(i)&&(t[i]=g2.fromJson({id:i,enum:e.enums[i]}));let n={};if(c(e.classes))for(let i in e.classes)e.classes.hasOwnProperty(i)&&(n[i]=Ku.fromJson({id:i,class:e.classes[i],enums:t}));return new CI({id:e.id,name:e.name,description:e.description,version:e.version,classes:n,enums:t,extras:e.extras,extensions:e.extensions})};Object.defineProperties(CI.prototype,{classes:{get:function(){return this._classes}},enums:{get:function(){return this._enums}},id:{get:function(){return this._id}},name:{get:function(){return this._name}},description:{get:function(){return this._description}},version:{get:function(){return this._version}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}}});var QA=CI;function Ed(e){e=e??G.EMPTY_OBJECT;let t=e.schema,n=e.resource,i=e.cacheKey;this._schema=c(t)?QA.fromJson(t):void 0,this._resource=n,this._cacheKey=i,this._state=ke.UNLOADED,this._promise=void 0}c(Object.create)&&(Ed.prototype=Object.create(Ln.prototype),Ed.prototype.constructor=Ed);Object.defineProperties(Ed.prototype,{cacheKey:{get:function(){return this._cacheKey}},schema:{get:function(){return this._schema}}});Ed.prototype.load=async function(){return c(this._promise)?this._promise:c(this._schema)?(this._promise=Promise.resolve(this),this._promise):(this._promise=ire(this),this._promise)};async function ire(e){let t=e._resource;e._state=ke.LOADING;try{let n=await t.fetchJson();return e.isDestroyed()?void 0:(e._schema=QA.fromJson(n),e._state=ke.READY,e)}catch(n){if(e.isDestroyed())return;e._state=ke.FAILED;let i=`Failed to load schema: ${t.url}`;throw e.getError(i,n)}}Ed.prototype.unload=function(){this._schema=void 0};var Xx=Ed;var nc={};function Uh(e){return Pf(e.url)}function Dg(e){let{byteOffset:t,byteLength:n}=e;if(Gn(e,"EXT_meshopt_compression")){let i=e.extensions.EXT_meshopt_compression;t=i.byteOffset??0,n=i.byteLength}return`${t}-${t+n}`}function ore(e,t){let n=t.byteOffset+e.byteOffset,{componentType:i,type:o,count:r}=e;return`${n}-${i}-${o}-${r}`}function C2(e,t){return`${Uh(e)}-buffer-id-${t}`}function zh(e,t,n,i){if(c(e.uri)){let o=i.getDerivedResource({url:e.uri});return Uh(o)}return C2(n,t)}function Zx(e,t,n,i){let o=t.bufferView,r=e.bufferViews[o],a=r.buffer,s=e.buffers[a],A=zh(s,a,n,i),l=Dg(r);return`${A}-range-${l}`}function E2(e,t,n,i){let r=e.bufferViews[0],a=r.buffer,s=e.buffers[a],A=zh(s,a,n,i),l=Dg(r);return`${A}-range-${l}`}function _2(e,t,n,i){let o=e.images[t],r=o.bufferView,a=o.uri;if(c(a)){let p=i.getDerivedResource({url:a});return Uh(p)}let s=e.bufferViews[r],A=s.buffer,l=e.buffers[A],d=zh(l,A,n,i),m=Dg(s);return`${d}-range-${m}`}function rre(e,t){let n=Vc.createSampler({gltf:e,textureInfo:t});return`${n.wrapS}-${n.wrapT}-${n.minificationFilter}-${n.magnificationFilter}`}nc.getSchemaCacheKey=function(e){let{schema:t,resource:n}=e;return c(t)?`embedded-schema:${JSON.stringify(t)}`:`external-schema:${Uh(n)}`};nc.getExternalBufferCacheKey=function(e){e=e??G.EMPTY_OBJECT;let{resource:t}=e;return`external-buffer:${Uh(t)}`};nc.getEmbeddedBufferCacheKey=function(e){e=e??G.EMPTY_OBJECT;let{parentResource:t,bufferId:n}=e;return`embedded-buffer:${C2(t,n)}`};nc.getGltfCacheKey=function(e){e=e??G.EMPTY_OBJECT;let{gltfResource:t}=e;return`gltf:${Uh(t)}`};nc.getBufferViewCacheKey=function(e){e=e??G.EMPTY_OBJECT;let{gltf:t,bufferViewId:n,gltfResource:i,baseResource:o}=e,r=t.bufferViews[n],a=r.buffer,s=t.buffers[a];Gn(r,"EXT_meshopt_compression")&&(a=r.extensions.EXT_meshopt_compression.buffer);let A=zh(s,a,i,o),l=Dg(r);return`buffer-view:${A}-range-${l}`};nc.getDracoCacheKey=function(e){e=e??G.EMPTY_OBJECT;let{gltf:t,draco:n,gltfResource:i,baseResource:o}=e;return`draco:${Zx(t,n,i,o)}`};nc.getSpzCacheKey=function(e){e=e??G.EMPTY_OBJECT;let{gltf:t,primitive:n,gltfResource:i,baseResource:o}=e;return`spz:${E2(t,n,i,o)}`};nc.getVertexBufferCacheKey=function(e){e=e??G.EMPTY_OBJECT;let{gltf:t,gltfResource:n,baseResource:i,frameState:o,bufferViewId:r,draco:a,spz:s,attributeSemantic:A,dequantize:l=!1,loadBuffer:d=!1,loadTypedArray:m=!1}=e,p="";if(l&&(p+="-dequantize"),d&&(p+="-buffer",p+=`-context-${o.context.id}`),m&&(p+="-typed-array"),c(a))return`vertex-buffer:${Zx(t,a,n,i)}-draco-${A}${p}`;if(s)return`vertex-buffer:${E2(t,s,n,i)}-spz-${A}${p}`;let g=t.bufferViews[r],h=g.buffer,C=t.buffers[h],_=zh(C,h,n,i),I=Dg(g);return`vertex-buffer:${_}-range-${I}${p}`};nc.getIndexBufferCacheKey=function(e){e=e??G.EMPTY_OBJECT;let{gltf:t,accessorId:n,gltfResource:i,baseResource:o,frameState:r,draco:a,loadBuffer:s=!1,loadTypedArray:A=!1}=e,l="";if(s&&(l+="-buffer",l+=`-context-${r.context.id}`),A&&(l+="-typed-array"),c(a))return`index-buffer:${Zx(t,a,i,o)}-draco${l}`;let d=t.accessors[n],m=d.bufferView,p=t.bufferViews[m],g=p.buffer,h=t.buffers[g],C=zh(h,g,i,o),_=ore(d,p);return`index-buffer:${C}-accessor-${_}${l}`};nc.getImageCacheKey=function(e){e=e??G.EMPTY_OBJECT;let{gltf:t,imageId:n,gltfResource:i,baseResource:o}=e;return`image:${_2(t,n,i,o)}`};nc.getTextureCacheKey=function(e){e=e??G.EMPTY_OBJECT;let{gltf:t,textureInfo:n,gltfResource:i,baseResource:o,supportedImageFormats:r,frameState:a}=e,s=n.index,A=Vc.getImageIdFromTexture({gltf:t,textureId:s,supportedImageFormats:r}),l=_2(t,A,i,o),d=rre(t,n);return`texture:${l}-sampler-${d}-context-${a.context.id}`};var ic=nc;function Qg(){this.geometryByteLength=0,this.texturesByteLength=0,this._geometrySizes={},this._textureSizes={}}Qg.prototype.clear=function(){this.geometryByteLength=0,this.texturesByteLength=0,this._geometrySizes={},this._textureSizes={}};Qg.prototype.addGeometryLoader=function(e){let t=e.cacheKey;if(this._geometrySizes.hasOwnProperty(t))return;this._geometrySizes[t]=0;let n=e.buffer,i=e.typedArray,o=0;c(n)&&(o+=n.sizeInBytes),c(i)&&(o+=i.byteLength),this.geometryByteLength+=o,this._geometrySizes[t]=o};Qg.prototype.addTextureLoader=function(e){let t=e.cacheKey;if(this._textureSizes.hasOwnProperty(t))return;this._textureSizes[t]=0;let n=e.texture.sizeInBytes;this.texturesByteLength+=e.texture.sizeInBytes,this._textureSizes[t]=n};Qg.prototype.removeLoader=function(e){let t=e.cacheKey,n=this._geometrySizes[t];delete this._geometrySizes[t],c(n)&&(this.geometryByteLength-=n);let i=this._textureSizes[t];delete this._textureSizes[t],c(i)&&(this.texturesByteLength-=i)};var I2=Qg;function Nt(){}Nt.cacheEntries={};Nt.statistics=new I2;function are(e){this.referenceCount=1,this.resourceLoader=e,this._statisticsPromise=void 0}Nt.get=function(e){let t=Nt.cacheEntries[e];if(c(t))return++t.referenceCount,t.resourceLoader};Nt.add=function(e){let t=e.cacheKey;return Nt.cacheEntries[t]=new are(e),e};Nt.unload=function(e){let t=e.cacheKey,n=Nt.cacheEntries[t];--n.referenceCount,n.referenceCount===0&&(Nt.statistics.removeLoader(e),e.destroy(),delete Nt.cacheEntries[t])};Nt.getSchemaLoader=function(e){e=e??G.EMPTY_OBJECT;let{schema:t,resource:n}=e,i=ic.getSchemaCacheKey({schema:t,resource:n}),o=Nt.get(i);return c(o)?o:(o=new Xx({schema:t,resource:n,cacheKey:i}),Nt.add(o))};Nt.getEmbeddedBufferLoader=function(e){e=e??G.EMPTY_OBJECT;let{parentResource:t,bufferId:n,typedArray:i}=e,o=ic.getEmbeddedBufferCacheKey({parentResource:t,bufferId:n}),r=Nt.get(o);return c(r)?r:(r=new tI({typedArray:i,cacheKey:o}),Nt.add(r))};Nt.getExternalBufferLoader=function(e){e=e??G.EMPTY_OBJECT;let{resource:t}=e,n=ic.getExternalBufferCacheKey({resource:t}),i=Nt.get(n);return c(i)?i:(i=new tI({resource:t,cacheKey:n}),Nt.add(i))};Nt.getGltfJsonLoader=function(e){e=e??G.EMPTY_OBJECT;let{gltfResource:t,baseResource:n,typedArray:i,gltfJson:o}=e,r=ic.getGltfCacheKey({gltfResource:t}),a=Nt.get(r);return c(a)?a:(a=new jx({resourceCache:Nt,gltfResource:t,baseResource:n,typedArray:i,gltfJson:o,cacheKey:r}),Nt.add(a))};Nt.getBufferViewLoader=function(e){e=e??G.EMPTY_OBJECT;let{gltf:t,bufferViewId:n,gltfResource:i,baseResource:o}=e,r=ic.getBufferViewCacheKey({gltf:t,bufferViewId:n,gltfResource:i,baseResource:o}),a=Nt.get(r);return c(a)?a:(a=new Rx({resourceCache:Nt,gltf:t,bufferViewId:n,gltfResource:i,baseResource:o,cacheKey:r}),Nt.add(a))};Nt.getDracoLoader=function(e){e=e??G.EMPTY_OBJECT;let{gltf:t,primitive:n,draco:i,gltfResource:o,baseResource:r}=e,a=ic.getDracoCacheKey({gltf:t,draco:i,gltfResource:o,baseResource:r}),s=Nt.get(a);return c(s)?s:(s=new vx({resourceCache:Nt,gltf:t,primitive:n,draco:i,gltfResource:o,baseResource:r,cacheKey:a}),Nt.add(s))};Nt.getSpzLoader=function(e){e=e??G.EMPTY_OBJECT;let{gltf:t,primitive:n,spz:i,gltfResource:o,baseResource:r}=e,a=ic.getSpzCacheKey({gltf:t,primitive:n,gltfResource:o,baseResource:r}),s=Nt.get(a);return c(s)?s:(s=new m2({resourceCache:Nt,gltf:t,primitive:n,spz:i,gltfResource:o,baseResource:r,cacheKey:a}),Nt.add(s))};Nt.getVertexBufferLoader=function(e){e=e??G.EMPTY_OBJECT;let{gltf:t,gltfResource:n,baseResource:i,frameState:o,bufferViewId:r,primitive:a,draco:s,spz:A,attributeSemantic:l,accessorId:d,asynchronous:m=!0,dequantize:p=!1,loadBuffer:g=!1,loadTypedArray:h=!1}=e,C=ic.getVertexBufferCacheKey({gltf:t,gltfResource:n,baseResource:i,frameState:o,bufferViewId:r,draco:s,spz:A,attributeSemantic:l,dequantize:p,loadBuffer:g,loadTypedArray:h}),_=Nt.get(C);return c(_)?_:(_=new Kx({resourceCache:Nt,gltf:t,gltfResource:n,baseResource:i,bufferViewId:r,primitive:a,draco:s,spz:A,attributeSemantic:l,accessorId:d,cacheKey:C,asynchronous:m,dequantize:p,loadBuffer:g,loadTypedArray:h}),Nt.add(_))};Nt.getIndexBufferLoader=function(e){e=e??G.EMPTY_OBJECT;let{gltf:t,accessorId:n,gltfResource:i,baseResource:o,frameState:r,primitive:a,draco:s,asynchronous:A=!0,loadBuffer:l=!1,loadTypedArray:d=!1}=e,m=ic.getIndexBufferCacheKey({gltf:t,accessorId:n,gltfResource:i,baseResource:o,frameState:r,draco:s,loadBuffer:l,loadTypedArray:d}),p=Nt.get(m);return c(p)?p:(p=new Lx({resourceCache:Nt,gltf:t,accessorId:n,gltfResource:i,baseResource:o,primitive:a,draco:s,cacheKey:m,asynchronous:A,loadBuffer:l,loadTypedArray:d}),Nt.add(p))};Nt.getImageLoader=function(e){e=e??G.EMPTY_OBJECT;let{gltf:t,imageId:n,gltfResource:i,baseResource:o}=e,r=ic.getImageCacheKey({gltf:t,imageId:n,gltfResource:i,baseResource:o}),a=Nt.get(r);return c(a)?a:(a=new Mx({resourceCache:Nt,gltf:t,imageId:n,gltfResource:i,baseResource:o,cacheKey:r}),Nt.add(a))};Nt.getTextureLoader=function(e){e=e??G.EMPTY_OBJECT;let{gltf:t,textureInfo:n,gltfResource:i,baseResource:o,supportedImageFormats:r,frameState:a,asynchronous:s=!0}=e,A=ic.getTextureCacheKey({gltf:t,textureInfo:n,gltfResource:i,baseResource:o,supportedImageFormats:r,frameState:a}),l=Nt.get(A);return c(l)?l:(l=new qx({resourceCache:Nt,gltf:t,textureInfo:n,gltfResource:i,baseResource:o,supportedImageFormats:r,cacheKey:A,asynchronous:s}),Nt.add(l))};Nt.clearForSpecs=function(){let e=[Kx,Lx,vx,qx,Mx,Rx,tI,Xx,jx],t,n=Nt.cacheEntries,i=[];for(t in n)n.hasOwnProperty(t)&&i.push(n[t]);i.sort(function(r,a){let s=e.indexOf(r.resourceLoader.constructor),A=e.indexOf(a.resourceLoader.constructor);return s-A});let o=i.length;for(let r=0;r<o;++r){let a=i[r];t=a.resourceLoader.cacheKey,c(n[t])&&(a.resourceLoader.destroy(),delete n[t])}Nt.statistics.clear()};var hi=Nt;function Ir(e,t,n){this._resource=e,this._subtreeJson=void 0,this._bufferLoader=void 0,this._tileAvailability=void 0,this._contentAvailabilityBitstreams=[],this._childSubtreeAvailability=void 0,this._implicitCoordinates=n,this._subtreeLevels=t.subtreeLevels,this._subdivisionScheme=t.subdivisionScheme,this._branchingFactor=t.branchingFactor,this._metadata=void 0,this._tileMetadataTable=void 0,this._tilePropertyTableJson=void 0,this._contentMetadataTables=[],this._contentPropertyTableJsons=[],this._tileJumpBuffer=void 0,this._contentJumpBuffers=[],this._ready=!1}Object.defineProperties(Ir.prototype,{ready:{get:function(){return this._ready}},metadata:{get:function(){return this._metadata}},tileMetadataTable:{get:function(){return this._tileMetadataTable}},tilePropertyTableJson:{get:function(){return this._tilePropertyTableJson}},contentMetadataTables:{get:function(){return this._contentMetadataTables}},contentPropertyTableJsons:{get:function(){return this._contentPropertyTableJsons}},implicitCoordinates:{get:function(){return this._implicitCoordinates}}});Ir.prototype.tileIsAvailableAtIndex=function(e){return this._tileAvailability.getBit(e)};Ir.prototype.tileIsAvailableAtCoordinates=function(e){let t=this.getTileIndex(e);return this.tileIsAvailableAtIndex(t)};Ir.prototype.contentIsAvailableAtIndex=function(e,t){return t=t??0,this._contentAvailabilityBitstreams[t].getBit(e)};Ir.prototype.contentIsAvailableAtCoordinates=function(e,t){let n=this.getTileIndex(e);return this.contentIsAvailableAtIndex(n,t)};Ir.prototype.childSubtreeIsAvailableAtIndex=function(e){return this._childSubtreeAvailability.getBit(e)};Ir.prototype.childSubtreeIsAvailableAtCoordinates=function(e){let t=this.getChildSubtreeIndex(e);return this.childSubtreeIsAvailableAtIndex(t)};Ir.prototype.getLevelOffset=function(e){let t=this._branchingFactor;return(Math.pow(t,e)-1)/(t-1)};Ir.prototype.getParentMortonIndex=function(e){let t=2;return this._subdivisionScheme===sr.OCTREE&&(t=3),e>>t};Ir.fromSubtreeJson=async function(e,t,n,i,o){let r=new Ir(e,i,o),a;c(t)?a={json:t,binary:void 0}:a=sre(n);let s=a.json;r._subtreeJson=s;let A;if(Gn(s,"3DTILES_metadata"))A=s.extensions["3DTILES_metadata"];else if(c(s.tileMetadata)){let b=s.tileMetadata;A=s.propertyTables[b]}let l=[];if(c(s.contentMetadata)){let b=s.contentMetadata.length;for(let x=0;x<b;x++){let T=s.contentMetadata[x];l.push(s.propertyTables[T])}}let d,m=i.metadataSchema,p=s.subtreeMetadata;if(c(p)){let b=p.class,x=m.classes[b];d=new m1({subtreeMetadata:p,class:x})}r._metadata=d,r._tilePropertyTableJson=A,r._contentPropertyTableJsons=l;let g={constant:0};s.contentAvailabilityHeaders=[],Gn(s,"3DTILES_multiple_contents")?s.contentAvailabilityHeaders=s.extensions["3DTILES_multiple_contents"].contentAvailability:Array.isArray(s.contentAvailability)?s.contentAvailabilityHeaders=s.contentAvailability:s.contentAvailabilityHeaders.push(s.contentAvailability??g);let h=cre(s.buffers),C=Are(s.bufferViews,h);lre(s,C),c(A)&&y2(A,C);for(let b=0;b<l.length;b++){let x=l[b];y2(x,C)}let _=await ure(r,h,a.binary),I=dre(C,_);return hre(r,s,i,I),c(A)&&(mre(r,i,I),gre(r)),pre(r,i,I),Cre(r),r._ready=!0,r};function sre(e){let n=new DataView(e.buffer,e.byteOffset),i=8,o=n.getUint32(i,!0);i+=8;let r=n.getUint32(i,!0);i+=8;let a=Fo(e,i,o);i+=o;let s=e.subarray(i,i+r);return{json:a,binary:s}}function cre(e){e=c(e)?e:[];for(let t=0;t<e.length;t++){let n=e[t];n.isExternal=c(n.uri),n.isActive=!1}return e}function Are(e,t){e=c(e)?e:[];for(let n=0;n<e.length;n++){let i=e[n],o=t[i.buffer];i.bufferHeader=o,i.isActive=!1}return e}function lre(e,t){let n,i=e.tileAvailability;c(i.bitstream)?n=t[i.bitstream]:c(i.bufferView)&&(n=t[i.bufferView]),c(n)&&(n.isActive=!0,n.bufferHeader.isActive=!0);let o=e.contentAvailabilityHeaders;for(let a=0;a<o.length;a++)n=void 0,c(o[a].bitstream)?n=t[o[a].bitstream]:c(o[a].bufferView)&&(n=t[o[a].bufferView]),c(n)&&(n.isActive=!0,n.bufferHeader.isActive=!0);n=void 0;let r=e.childSubtreeAvailability;c(r.bitstream)?n=t[r.bitstream]:c(r.bufferView)&&(n=t[r.bufferView]),c(n)&&(n.isActive=!0,n.bufferHeader.isActive=!0)}function y2(e,t){let n=e.properties,i;for(let o in n)if(n.hasOwnProperty(o)){let r=n[o],a=r.values??r.bufferView;i=t[a],i.isActive=!0,i.bufferHeader.isActive=!0;let s=r.stringOffsets??r.stringOffsetBufferView;c(s)&&(i=t[s],i.isActive=!0,i.bufferHeader.isActive=!0);let A=r.arrayOffsets??r.arrayOffsetBufferView;c(A)&&(i=t[A],i.isActive=!0,i.bufferHeader.isActive=!0)}}function ure(e,t,n){let i=[];for(let o=0;o<t.length;o++){let r=t[o];if(!r.isActive)i.push(Promise.resolve(void 0));else if(r.isExternal){let a=fre(e,r);i.push(a)}else i.push(Promise.resolve(n))}return Promise.all(i).then(function(o){let r={};for(let a=0;a<o.length;a++){let s=o[a];c(s)&&(r[a]=s)}return r})}async function fre(e,t){let i=e._resource.getDerivedResource({url:t.uri}),o=hi.getExternalBufferLoader({resource:i});e._bufferLoader=o;try{await o.load()}catch(r){if(o.isDestroyed())return;throw r}return o.typedArray}function dre(e,t){let n={};for(let i=0;i<e.length;i++){let o=e[i];if(!o.isActive)continue;let r=o.byteOffset,a=r+o.byteLength,A=t[o.buffer].subarray(r,a);n[i]=A}return n}function hre(e,t,n,i){let o=n.branchingFactor,r=n.subtreeLevels,a=(Math.pow(o,r)-1)/(o-1),s=Math.pow(o,r),A=Gn(t,"3DTILES_metadata"),l=c(e._tilePropertyTableJson),d=A||l;e._tileAvailability=$x(t.tileAvailability,i,a,d);let m=e._contentPropertyTableJsons.length>0;d=d||m;for(let p=0;p<t.contentAvailabilityHeaders.length;p++){let g=$x(t.contentAvailabilityHeaders[p],i,a,d);e._contentAvailabilityBitstreams.push(g)}e._childSubtreeAvailability=$x(t.childSubtreeAvailability,i,s)}function $x(e,t,n,i){if(c(e.constant))return new bx({constant:!!e.constant,lengthBits:n,availableCount:e.availableCount});let o;return c(e.bitstream)?o=t[e.bitstream]:c(e.bufferView)&&(o=t[e.bufferView]),new bx({bitstream:o,lengthBits:n,availableCount:e.availableCount,computeAvailableCountEnabled:i})}function mre(e,t,n){let i=e._tilePropertyTableJson,o=e._tileAvailability.availableCount,r=t.metadataSchema,a=i.class,s=r.classes[a];e._tileMetadataTable=new Sl({class:s,count:o,properties:i.properties,bufferViews:n})}function pre(e,t,n){let i=e._contentPropertyTableJsons,o=e._contentAvailabilityBitstreams,r=t.metadataSchema,a=e._contentMetadataTables;for(let s=0;s<i.length;s++){let A=i[s],d=o[s].availableCount,m=A.class,p=r.classes[m],g=new Sl({class:p,count:d,properties:A.properties,bufferViews:n});a.push(g)}}function b2(e){let t=0,n=e.lengthBits,i=e.availableCount,o;i<256?o=new Uint8Array(n):i<65536?o=new Uint16Array(n):o=new Uint32Array(n);for(let r=0;r<e.lengthBits;r++)e.getBit(r)&&(o[r]=t,t++);return o}function gre(e){let t=b2(e._tileAvailability);e._tileJumpBuffer=t}function Cre(e){let t=e._contentJumpBuffers,n=e._contentAvailabilityBitstreams;for(let i=0;i<n.length;i++){let o=n[i],r=b2(o);t.push(r)}}Ir.prototype.getTileIndex=function(e){let t=e.level-this._implicitCoordinates.level;if(t<0||this._subtreeLevels<=t)throw new ae("level is out of bounds for this subtree");return e.getSubtreeCoordinates().getOffsetCoordinates(e).tileIndex};Ir.prototype.getChildSubtreeIndex=function(e){if(e.level-this._implicitCoordinates.level!==this._implicitCoordinates.subtreeLevels)throw new ae("level is out of bounds for this subtree");return e.getParentSubtreeCoordinates().getOffsetCoordinates(e).mortonIndex};function Ere(e,t){if(!c(e._tileMetadataTable))return;let n=e.getTileIndex(t);if(e._tileAvailability.getBit(n))return e._tileJumpBuffer[n]}function _re(e,t,n){let i=e._contentMetadataTables;if(!c(i))return;let o=i[n];if(!c(o))return;let r=e._contentAvailabilityBitstreams[n],a=e.getTileIndex(t);if(r.getBit(a))return e._contentJumpBuffers[n][a]}Ir.prototype.getTileMetadataView=function(e){let t=Ere(this,e);if(!c(t))return;let n=this._tileMetadataTable;return new Bx({class:n.class,metadataTable:n,entityId:t,propertyTableJson:this._tilePropertyTableJson})};Ir.prototype.getContentMetadataView=function(e,t){let n=_re(this,e,t);if(!c(n))return;let i=this._contentMetadataTables[t],o=this._contentPropertyTableJsons[t];return new Bx({class:i.class,metadataTable:i,entityId:n,contentIndex:t,propertyTableJson:o})};Ir.prototype.isDestroyed=function(){return!1};Ir.prototype.destroy=function(){return c(this._bufferLoader)&&hi.unload(this._bufferLoader),me(this)};var B2=Ir;var Ire={ID:"ID",NAME:"NAME",DESCRIPTION:"DESCRIPTION",TILESET_TILE_COUNT:"TILESET_TILE_COUNT",TILE_BOUNDING_BOX:"TILE_BOUNDING_BOX",TILE_BOUNDING_REGION:"TILE_BOUNDING_REGION",TILE_BOUNDING_SPHERE:"TILE_BOUNDING_SPHERE",TILE_MINIMUM_HEIGHT:"TILE_MINIMUM_HEIGHT",TILE_MAXIMUM_HEIGHT:"TILE_MAXIMUM_HEIGHT",TILE_HORIZON_OCCLUSION_POINT:"TILE_HORIZON_OCCLUSION_POINT",TILE_GEOMETRIC_ERROR:"TILE_GEOMETRIC_ERROR",CONTENT_BOUNDING_BOX:"CONTENT_BOUNDING_BOX",CONTENT_BOUNDING_REGION:"CONTENT_BOUNDING_REGION",CONTENT_BOUNDING_SPHERE:"CONTENT_BOUNDING_SPHERE",CONTENT_MINIMUM_HEIGHT:"CONTENT_MINIMUM_HEIGHT",CONTENT_MAXIMUM_HEIGHT:"CONTENT_MAXIMUM_HEIGHT",CONTENT_HORIZON_OCCLUSION_POINT:"CONTENT_HORIZON_OCCLUSION_POINT"},x2=Object.freeze(Ire);var jc={};jc.parseAllBoundingVolumeSemantics=function(e){return{tile:{boundingVolume:jc.parseBoundingVolumeSemantic("TILE",e),minimumHeight:jc._parseMinimumHeight("TILE",e),maximumHeight:jc._parseMaximumHeight("TILE",e)},content:{boundingVolume:jc.parseBoundingVolumeSemantic("CONTENT",e),minimumHeight:jc._parseMinimumHeight("CONTENT",e),maximumHeight:jc._parseMaximumHeight("CONTENT",e)}}};jc.parseBoundingVolumeSemantic=function(e,t){let n=`${e}_BOUNDING_BOX`,i=t.getPropertyBySemantic(n);if(c(i))return{box:i};let o=`${e}_BOUNDING_REGION`,r=t.getPropertyBySemantic(o);if(c(r))return{region:r};let a=`${e}_BOUNDING_SPHERE`,s=t.getPropertyBySemantic(a);if(c(s))return{sphere:s}};jc._parseMinimumHeight=function(e,t){let n=`${e}_MINIMUM_HEIGHT`;return t.getPropertyBySemantic(n)};jc._parseMaximumHeight=function(e,t){let n=`${e}_MAXIMUM_HEIGHT`;return t.getPropertyBySemantic(n)};var EI=jc;function xa(e,t,n){let i=t.implicitTileset,o=t.implicitCoordinates;this._implicitTileset=i,this._implicitCoordinates=o,this._implicitSubtree=void 0,this._tileset=e,this._tile=t,this._resource=n,this._metadata=void 0,this.featurePropertiesDirty=!1,this._group=void 0;let r=o.getTemplateValues(),a=i.subtreeUriTemplate.getDerivedResource({templateValues:r});this._url=a.getUrlComponent(!0),this._ready=!1}Object.defineProperties(xa.prototype,{featuresLength:{get:function(){return 0}},pointsLength:{get:function(){return 0}},trianglesLength:{get:function(){return 0}},geometryByteLength:{get:function(){return 0}},texturesByteLength:{get:function(){return 0}},batchTableByteLength:{get:function(){return 0}},innerContents:{get:function(){}},ready:{get:function(){return this._ready}},tileset:{get:function(){return this._tileset}},tile:{get:function(){return this._tile}},url:{get:function(){return this._url}},metadata:{get:function(){},set:function(){}},batchTable:{get:function(){}},group:{get:function(){return this._group},set:function(e){this._group=e}}});xa.fromSubtreeJson=async function(e,t,n,i,o,r){r=r??0;let a;c(o)&&(a=new Uint8Array(o,r));let s=t.implicitTileset,A=t.implicitCoordinates,l=await B2.fromSubtreeJson(n,i,a,s,A),d=new xa(e,t,n);return d._implicitSubtree=l,yre(d,l),d._ready=!0,d};function yre(e,t){let n=e._tile,i=e._implicitCoordinates.childIndex,o=Bre(e,t,n,i),r=e._tileset.statistics;n.children.push(o.rootTile),r.numberOfTilesTotal++;let a=bre(e,t,o.bottomRow);for(let s=0;s<a.length;s++){let A=a[s],l=A.tile,d=Mre(e,l,A.childIndex);l.children.push(d),r.numberOfTilesTotal++}}function bre(e,t,n){let i=[],o=e._implicitTileset.branchingFactor;for(let r=0;r<n.length;r++){let a=n[r];if(c(a))for(let s=0;s<o;s++){let A=r*o+s;t.childSubtreeIsAvailableAtIndex(A)&&i.push({tile:a,childIndex:s})}}return i}function Bre(e,t,n,i){let a=T2(e,t,n,i,0,!0),s=e._tileset.statistics,A=[a],l=[],d=e._implicitTileset;for(let m=1;m<d.subtreeLevels;m++){let p=t.getLevelOffset(m),g=d.branchingFactor*A.length;for(let h=0;h<g;h++){let C=p+h;if(!t.tileIsAvailableAtIndex(C)){l.push(void 0);continue}let _=t.getParentMortonIndex(h),I=A[_],b=h%d.branchingFactor,x=T2(e,t,I,b,C);I.children.push(x),s.numberOfTilesTotal++,l.push(x)}A=l,l=[]}return{rootTile:a,bottomRow:A}}function S2(e,t,n){let i=x2.TILE_GEOMETRIC_ERROR;return c(e)&&e.hasPropertyBySemantic(i)?e.getPropertyBySemantic(i):t.geometricError/Math.pow(2,n.level)}function T2(e,t,n,i,o,r){let a=e._implicitTileset,s;r??!1?s=n.implicitCoordinates:s=n.implicitCoordinates.getChildCoordinates(i);let A,l,d;if(c(t.tilePropertyTableJson)){A=t.getTileMetadataView(s);let R=EI.parseAllBoundingVolumeSemantics(A);l=R.tile,d=R.content}let p=t.contentPropertyTableJsons.length,g=!1;for(let R=0;R<p;R++)if(t.contentIsAvailableAtCoordinates(s,R)){g=!0;break}let h=Sre(a,s,i,r,n,l),C=[];for(let R=0;R<a.contentCount;R++){if(!t.contentIsAvailableAtIndex(o,R))continue;let N={uri:a.contentUriTemplates[R].getDerivedResource({templateValues:s.getTemplateValues()}).url},O=wre(h,d);c(O)&&(N.boundingVolume=O),C.push(dt(N,a.contentHeaders[R]))}let _=S2(A,a,s),I={boundingVolume:h,geometricError:_,refine:a.refine,contents:C},b=!0,x=Re(a.tileHeader,b);delete x.boundingVolume,delete x.transform,delete x.metadata;let T=dt(I,x,b),w=v2(e,a.baseResource,T,n);return w.implicitCoordinates=s,w.implicitSubtree=t,w.metadata=A,w.hasImplicitContentMetadata=g,w}function _I(e,t){return c(e)&&c(t)&&(c(t.minimumHeight)||c(t.maximumHeight))&&(Gn(e,"3DTILES_bounding_volume_S2")||c(e.region))}function tT(e,t){c(t)&&(Gn(e,"3DTILES_bounding_volume_S2")?Tre(e.extensions["3DTILES_bounding_volume_S2"],t.minimumHeight,t.maximumHeight):c(e.region)&&xre(e.region,t.minimumHeight,t.maximumHeight))}function xre(e,t,n){c(t)&&(e[4]=t),c(n)&&(e[5]=n)}function Tre(e,t,n){c(t)&&(e.minimumHeight=t),c(n)&&(e.maximumHeight=n)}function Sre(e,t,n,i,o,r){let a;return!c(r)||!c(r.boundingVolume)||!_I(r.boundingVolume,r)&&_I(e.boundingVolume,r)?a=w2(e,t,n,i??!1,o):a=r.boundingVolume,tT(a,r),a}function wre(e,t){let n;return c(t)&&(n=t.boundingVolume),_I(n,t)?tT(n,t):_I(e,t)&&(n=Re(e,!0),tT(n,t)),n}function w2(e,t,n,i,o){let r=e.boundingVolume;return Gn(r,"3DTILES_bounding_volume_S2")?D2(i,o,n,t.level,t.x,t.y,t.z):c(r.region)?{region:R2(r.region,t.level,t.x,t.y,t.z)}:{box:Q2(r.box,t.level,t.x,t.y,t.z)}}function D2(e,t,n,i,o,r,a){let s=t._boundingVolume;if(e)return{extensions:{"3DTILES_bounding_volume_S2":{token:Lh.getTokenFromId(s.s2Cell._cellId),minimumHeight:s.minimumHeight,maximumHeight:s.maximumHeight}}};let A=Number(t._boundingVolume.s2Cell._cellId>>BigInt(61)),l=A%2===0?_x.encode2D(i,o,r):_x.encode2D(i,r,o),d=Lh.fromFacePositionLevel(A,BigInt(l),i),m,p;if(c(a)){let g=(s.maximumHeight+s.minimumHeight)/2;m=n<4?s.minimumHeight:g,p=n<4?g:s.maximumHeight}else m=s.minimumHeight,p=s.maximumHeight;return{extensions:{"3DTILES_bounding_volume_S2":{token:Lh.getTokenFromId(d._cellId),minimumHeight:m,maximumHeight:p}}}}var Dre=new f,Qre=new f,eT=new f,Rre=new ne;function Q2(e,t,n,i,o){if(t===0)return e;let r=f.unpack(e,0,Qre),a=ne.unpack(e,3,Rre),s=Math.pow(2,-t),A=-1+(2*n+1)*s,l=-1+(2*i+1)*s,d=0,m=f.fromElements(s,s,1,Dre);c(o)&&(d=-1+(2*o+1)*s,m.z=s);let p=f.fromElements(A,l,d,eT);p=ne.multiplyByVector(a,p,eT),p=f.add(p,r,eT);let g=ne.clone(a);g=ne.multiplyByScale(g,m,g);let h=new Array(12);return f.pack(p,h),ne.pack(g,h,3),h}var vre=new de;function R2(e,t,n,i,o){if(t===0)return e.slice();let r=de.unpack(e,0,vre),a=e[4],s=e[5],A=Math.pow(2,-t),l=A*r.width,d=S.negativePiToPi(r.west+n*l),m=S.negativePiToPi(d+l),p=A*r.height,g=S.negativePiToPi(r.south+i*p),h=S.negativePiToPi(g+p),C=a,_=s;if(c(o)){let I=A*(s-a);C+=o*I,_=C+I}return[d,g,m,h,C,_]}function Mre(e,t,n){let i=e._implicitTileset,o=t.implicitCoordinates.getChildCoordinates(n),r=w2(i,o,n,!1,t),a=S2(void 0,i,o),s=i.subtreeUriTemplate.getDerivedResource({templateValues:o.getTemplateValues()}).url,A={boundingVolume:r,geometricError:a,refine:i.refine,contents:[{uri:s}]},l=v2(e,i.baseResource,A,t);return l.implicitTileset=i,l.implicitCoordinates=o,l}function v2(e,t,n,i){let o=e._tile.constructor;return new o(e._tileset,t,n,i)}xa.prototype.hasProperty=function(e,t){return!1};xa.prototype.getFeature=function(e){};xa.prototype.applyDebugSettings=function(e,t){};xa.prototype.applyStyle=function(e){};xa.prototype.update=function(e,t){};xa.prototype.pick=function(e,t,n){};xa.prototype.isDestroyed=function(){return!1};xa.prototype.destroy=function(){return this._implicitSubtree=this._implicitSubtree&&this._implicitSubtree.destroy(),me(this)};xa._deriveBoundingBox=Q2;xa._deriveBoundingRegion=R2;xa._deriveBoundingVolumeS2=D2;var nT=xa;var Pre={NONE:0,REPEAT:1,MIRRORED_REPEAT:2},Rl=Object.freeze(Pre);function Gh(e,t){this._distance=t,this._normal=new M2(e,this),this.onChangeCallback=void 0,this.index=-1}Object.defineProperties(Gh.prototype,{distance:{get:function(){return this._distance},set:function(e){c(this.onChangeCallback)&&e!==this._distance&&this.onChangeCallback(this.index),this._distance=e}},normal:{get:function(){return this._normal},set:function(e){c(this.onChangeCallback)&&!f.equals(this._normal._cartesian3,e)&&this.onChangeCallback(this.index),f.clone(e,this._normal._cartesian3)}}});Gh.fromPlane=function(e,t){return c(t)?(t.normal=e.normal,t.distance=e.distance):t=new Gh(e.normal,e.distance),t};Gh.clone=function(e,t){return c(t)?(t.normal=e.normal,t.distance=e.distance,t):new Gh(e.normal,e.distance)};function M2(e,t){this._clippingPlane=t,this._cartesian3=f.clone(e)}Object.defineProperties(M2.prototype,{x:{get:function(){return this._cartesian3.x},set:function(e){c(this._clippingPlane.onChangeCallback)&&e!==this._cartesian3.x&&this._clippingPlane.onChangeCallback(this._clippingPlane.index),this._cartesian3.x=e}},y:{get:function(){return this._cartesian3.y},set:function(e){c(this._clippingPlane.onChangeCallback)&&e!==this._cartesian3.y&&this._clippingPlane.onChangeCallback(this._clippingPlane.index),this._cartesian3.y=e}},z:{get:function(){return this._cartesian3.z},set:function(e){c(this._clippingPlane.onChangeCallback)&&e!==this._cartesian3.z&&this._clippingPlane.onChangeCallback(this._clippingPlane.index),this._cartesian3.z=e}}});var II=Gh;function $r(e){e=e??G.EMPTY_OBJECT,this._planes=[],this._dirtyIndex=-1,this._multipleDirtyPlanes=!1,this._enabled=e.enabled??!0,this.modelMatrix=Q.clone(e.modelMatrix??Q.IDENTITY),this.edgeColor=J.clone(e.edgeColor??J.WHITE),this.edgeWidth=e.edgeWidth??0,this.planeAdded=new Le,this.planeRemoved=new Le,this._owner=void 0;let t=e.unionClippingRegions??!1;this._unionClippingRegions=t,this._testIntersection=t?O2:k2,this._uint8View=void 0,this._float32View=void 0,this._clippingPlanesTexture=void 0;let n=e.planes;if(c(n)){let i=n.length;for(let o=0;o<i;++o)this.add(n[o])}}function O2(e){return e===bt.OUTSIDE}function k2(e){return e===bt.INSIDE}Object.defineProperties($r.prototype,{length:{get:function(){return this._planes.length}},unionClippingRegions:{get:function(){return this._unionClippingRegions},set:function(e){this._unionClippingRegions!==e&&(this._unionClippingRegions=e,this._testIntersection=e?O2:k2)}},enabled:{get:function(){return this._enabled},set:function(e){this._enabled!==e&&(this._enabled=e)}},texture:{get:function(){return this._clippingPlanesTexture}},owner:{get:function(){return this._owner}},clippingPlanesState:{get:function(){return this._unionClippingRegions?this._planes.length:-this._planes.length}}});function P2(e,t){e._multipleDirtyPlanes=e._multipleDirtyPlanes||e._dirtyIndex!==-1&&e._dirtyIndex!==t,e._dirtyIndex=t}$r.prototype.add=function(e){let t=this._planes.length,n=this;e.onChangeCallback=function(i){P2(n,i)},e.index=t,P2(this,t),this._planes.push(e),this.planeAdded.raiseEvent(e,t)};$r.prototype.get=function(e){return this._planes[e]};function U2(e,t){let n=e.length;for(let i=0;i<n;++i)if(Ze.equals(e[i],t))return i;return-1}$r.prototype.contains=function(e){return U2(this._planes,e)!==-1};$r.prototype.remove=function(e){let t=this._planes,n=U2(t,e);if(n===-1)return!1;e instanceof II&&(e.onChangeCallback=void 0,e.index=-1);let i=t.length-1;for(let o=n;o<i;++o){let r=t[o+1];t[o]=r,r instanceof II&&(r.index=o)}return this._multipleDirtyPlanes=!0,t.length=i,this.planeRemoved.raiseEvent(e,n),!0};$r.prototype.removeAll=function(){let e=this._planes,t=e.length;for(let n=0;n<t;++n){let i=e[n];i instanceof II&&(i.onChangeCallback=void 0,i.index=-1),this.planeRemoved.raiseEvent(i,n)}this._multipleDirtyPlanes=!0,this._planes=[]};var Nre=new re,Lre=new re;function N2(e,t,n){let i=e._uint8View,o=e._planes,r=0;for(let a=t;a<n;++a){let s=o[a],A=Yt.octEncodeToCartesian4(s.normal,Lre);i[r]=A.x,i[r+1]=A.y,i[r+2]=A.z,i[r+3]=A.w;let l=re.packFloat(s.distance,Nre);i[r+4]=l.x,i[r+5]=l.y,i[r+6]=l.z,i[r+7]=l.w,r+=8}}function L2(e,t,n){let i=e._float32View,o=e._planes,r=0;for(let a=t;a<n;++a){let s=o[a],A=s.normal;i[r]=A.x,i[r+1]=A.y,i[r+2]=A.z,i[r+3]=s.distance,r+=4}}function z2(e,t){let n=rn.maximumTextureSize;return t.x=Math.min(e,n),t.y=Math.ceil(e/t.x),t}var Fre=new L;$r.prototype.update=function(e){let t=this._clippingPlanesTexture,n=e.context,i=$r.useFloatTexture(n),o=i?this.length:this.length*2;if(c(t)){let a=t.width*t.height;(a<o||o<.25*a)&&(t.destroy(),t=void 0,this._clippingPlanesTexture=void 0)}if(this.length===0)return;if(!c(t)){let a=z2(o,Fre);a.y*=2,i?(t=new on({context:n,width:a.x,height:a.y,pixelFormat:_t.RGBA,pixelDatatype:mt.FLOAT,sampler:nn.NEAREST,flipY:!1}),this._float32View=new Float32Array(a.x*a.y*4)):(t=new on({context:n,width:a.x,height:a.y,pixelFormat:_t.RGBA,pixelDatatype:mt.UNSIGNED_BYTE,sampler:nn.NEAREST,flipY:!1}),this._uint8View=new Uint8Array(a.x*a.y*4)),this._clippingPlanesTexture=t,this._multipleDirtyPlanes=!0}let r=this._dirtyIndex;if(!(!this._multipleDirtyPlanes&&r===-1)){if(this._multipleDirtyPlanes)i?(L2(this,0,this._planes.length),t.copyFrom({source:{width:t.width,height:t.height,arrayBufferView:this._float32View}})):(N2(this,0,this._planes.length),t.copyFrom({source:{width:t.width,height:t.height,arrayBufferView:this._uint8View}}));else{let a=0,s=0;i?(s=Math.floor(r/t.width),a=Math.floor(r-s*t.width),L2(this,r,r+1),t.copyFrom({source:{width:1,height:1,arrayBufferView:this._float32View},xOffset:a,yOffset:s})):(s=Math.floor(r*2/t.width),a=Math.floor(r*2-s*t.width),N2(this,r,r+1),t.copyFrom({source:{width:2,height:1,arrayBufferView:this._uint8View},xOffset:a,yOffset:s}))}this._multipleDirtyPlanes=!1,this._dirtyIndex=-1}};var Ore=new Q,F2=new Ze(f.UNIT_X,0);$r.prototype.computeIntersectionWithBoundingVolume=function(e,t){let n=this._planes,i=n.length,o=this.modelMatrix;c(t)&&(o=Q.multiply(t,o,Ore));let r=bt.INSIDE;!this.unionClippingRegions&&i>0&&(r=bt.OUTSIDE);for(let a=0;a<i;++a){let s=n[a];Ze.transform(s,o,F2);let A=e.intersectPlane(F2);if(A===bt.INTERSECTING)r=A;else if(this._testIntersection(A))return A}return r};$r.setOwner=function(e,t,n){e!==t[n]&&(t[n]=t[n]&&t[n].destroy(),c(e)&&(e._owner=t,t[n]=e))};$r.useFloatTexture=function(e){return e.floatingPointTexture};$r.getTextureResolution=function(e,t,n){let i=e.texture;if(c(i))return n.x=i.width,n.y=i.height,n;let o=$r.useFloatTexture(t)?e.length:e.length*2,r=z2(o,n);return r.y*=2,r};$r.prototype.isDestroyed=function(){return!1};$r.prototype.destroy=function(){return this._clippingPlanesTexture=this._clippingPlanesTexture&&this._clippingPlanesTexture.destroy(),me(this)};var Yc=$r;function rT(e,t,n=2){let i=t&&t.length,o=i?t[0]*n:e.length,r=H2(e,0,o,n,!0),a=[];if(!r||r.next===r.prev)return a;let s,A,l;if(i&&(r=Hre(e,t,r,n)),e.length>80*n){s=e[0],A=e[1];let d=s,m=A;for(let p=n;p<o;p+=n){let g=e[p],h=e[p+1];g<s&&(s=g),h<A&&(A=h),g>d&&(d=g),h>m&&(m=h)}l=Math.max(d-s,m-A),l=l!==0?32767/l:0}return vg(r,a,n,s,A,l,0),a}function H2(e,t,n,i,o){let r;if(o===eae(e,t,n,i)>0)for(let a=t;a<n;a+=i)r=G2(a/i|0,e[a],e[a+1],r);else for(let a=n-i;a>=t;a-=i)r=G2(a/i|0,e[a],e[a+1],r);return r&&Hh(r,r.next)&&(Pg(r),r=r.next),r}function _d(e,t){if(!e)return e;t||(t=e);let n=e,i;do if(i=!1,!n.steiner&&(Hh(n,n.next)||lo(n.prev,n,n.next)===0)){if(Pg(n),n=t=n.prev,n===n.next)break;i=!0}else n=n.next;while(i||n!==t);return t}function vg(e,t,n,i,o,r,a){if(!e)return;!a&&r&&qre(e,i,o,r);let s=e;for(;e.prev!==e.next;){let A=e.prev,l=e.next;if(r?Ure(e,i,o,r):kre(e)){t.push(A.i,e.i,l.i),Pg(e),e=l.next,s=l.next;continue}if(e=l,e===s){a?a===1?(e=zre(_d(e),t),vg(e,t,n,i,o,r,2)):a===2&&Gre(e,t,n,i,o,r):vg(_d(e),t,n,i,o,r,1);break}}}function kre(e){let t=e.prev,n=e,i=e.next;if(lo(t,n,i)>=0)return!1;let o=t.x,r=n.x,a=i.x,s=t.y,A=n.y,l=i.y,d=Math.min(o,r,a),m=Math.min(s,A,l),p=Math.max(o,r,a),g=Math.max(s,A,l),h=i.next;for(;h!==t;){if(h.x>=d&&h.x<=p&&h.y>=m&&h.y<=g&&Rg(o,s,r,A,a,l,h.x,h.y)&&lo(h.prev,h,h.next)>=0)return!1;h=h.next}return!0}function Ure(e,t,n,i){let o=e.prev,r=e,a=e.next;if(lo(o,r,a)>=0)return!1;let s=o.x,A=r.x,l=a.x,d=o.y,m=r.y,p=a.y,g=Math.min(s,A,l),h=Math.min(d,m,p),C=Math.max(s,A,l),_=Math.max(d,m,p),I=iT(g,h,t,n,i),b=iT(C,_,t,n,i),x=e.prevZ,T=e.nextZ;for(;x&&x.z>=I&&T&&T.z<=b;){if(x.x>=g&&x.x<=C&&x.y>=h&&x.y<=_&&x!==o&&x!==a&&Rg(s,d,A,m,l,p,x.x,x.y)&&lo(x.prev,x,x.next)>=0||(x=x.prevZ,T.x>=g&&T.x<=C&&T.y>=h&&T.y<=_&&T!==o&&T!==a&&Rg(s,d,A,m,l,p,T.x,T.y)&&lo(T.prev,T,T.next)>=0))return!1;T=T.nextZ}for(;x&&x.z>=I;){if(x.x>=g&&x.x<=C&&x.y>=h&&x.y<=_&&x!==o&&x!==a&&Rg(s,d,A,m,l,p,x.x,x.y)&&lo(x.prev,x,x.next)>=0)return!1;x=x.prevZ}for(;T&&T.z<=b;){if(T.x>=g&&T.x<=C&&T.y>=h&&T.y<=_&&T!==o&&T!==a&&Rg(s,d,A,m,l,p,T.x,T.y)&&lo(T.prev,T,T.next)>=0)return!1;T=T.nextZ}return!0}function zre(e,t){let n=e;do{let i=n.prev,o=n.next.next;!Hh(i,o)&&j2(i,n,n.next,o)&&Mg(i,o)&&Mg(o,i)&&(t.push(i.i,n.i,o.i),Pg(n),Pg(n.next),n=e=o),n=n.next}while(n!==e);return _d(n)}function Gre(e,t,n,i,o,r){let a=e;do{let s=a.next.next;for(;s!==a.prev;){if(a.i!==s.i&&Xre(a,s)){let A=Y2(a,s);a=_d(a,a.next),A=_d(A,A.next),vg(a,t,n,i,o,r,0),vg(A,t,n,i,o,r,0);return}s=s.next}a=a.next}while(a!==e)}function Hre(e,t,n,i){let o=[];for(let r=0,a=t.length;r<a;r++){let s=t[r]*i,A=r<a-1?t[r+1]*i:e.length,l=H2(e,s,A,i,!1);l===l.next&&(l.steiner=!0),o.push(Kre(l))}o.sort(Vre);for(let r=0;r<o.length;r++)n=jre(o[r],n);return n}function Vre(e,t){let n=e.x-t.x;if(n===0&&(n=e.y-t.y,n===0)){let i=(e.next.y-e.y)/(e.next.x-e.x),o=(t.next.y-t.y)/(t.next.x-t.x);n=i-o}return n}function jre(e,t){let n=Yre(e,t);if(!n)return t;let i=Y2(n,e);return _d(i,i.next),_d(n,n.next)}function Yre(e,t){let n=t,i=e.x,o=e.y,r=-1/0,a;if(Hh(e,n))return n;do{if(Hh(e,n.next))return n.next;if(o<=n.y&&o>=n.next.y&&n.next.y!==n.y){let m=n.x+(o-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(m<=i&&m>r&&(r=m,a=n.x<n.next.x?n:n.next,m===i))return a}n=n.next}while(n!==t);if(!a)return null;let s=a,A=a.x,l=a.y,d=1/0;n=a;do{if(i>=n.x&&n.x>=A&&i!==n.x&&V2(o<l?i:r,o,A,l,o<l?r:i,o,n.x,n.y)){let m=Math.abs(o-n.y)/(i-n.x);Mg(n,e)&&(m<d||m===d&&(n.x>a.x||n.x===a.x&&Wre(a,n)))&&(a=n,d=m)}n=n.next}while(n!==s);return a}function Wre(e,t){return lo(e.prev,e,t.prev)<0&&lo(t.next,e,e.next)<0}function qre(e,t,n,i){let o=e;do o.z===0&&(o.z=iT(o.x,o.y,t,n,i)),o.prevZ=o.prev,o.nextZ=o.next,o=o.next;while(o!==e);o.prevZ.nextZ=null,o.prevZ=null,Jre(o)}function Jre(e){let t,n=1;do{let i=e,o;e=null;let r=null;for(t=0;i;){t++;let a=i,s=0;for(let l=0;l<n&&(s++,a=a.nextZ,!!a);l++);let A=n;for(;s>0||A>0&&a;)s!==0&&(A===0||!a||i.z<=a.z)?(o=i,i=i.nextZ,s--):(o=a,a=a.nextZ,A--),r?r.nextZ=o:e=o,o.prevZ=r,r=o;i=a}r.nextZ=null,n*=2}while(t>1);return e}function iT(e,t,n,i,o){return e=(e-n)*o|0,t=(t-i)*o|0,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e|t<<1}function Kre(e){let t=e,n=e;do(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next;while(t!==e);return n}function V2(e,t,n,i,o,r,a,s){return(o-a)*(t-s)>=(e-a)*(r-s)&&(e-a)*(i-s)>=(n-a)*(t-s)&&(n-a)*(r-s)>=(o-a)*(i-s)}function Rg(e,t,n,i,o,r,a,s){return!(e===a&&t===s)&&V2(e,t,n,i,o,r,a,s)}function Xre(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!Zre(e,t)&&(Mg(e,t)&&Mg(t,e)&&$re(e,t)&&(lo(e.prev,e,t.prev)||lo(e,t.prev,t))||Hh(e,t)&&lo(e.prev,e,e.next)>0&&lo(t.prev,t,t.next)>0)}function lo(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function Hh(e,t){return e.x===t.x&&e.y===t.y}function j2(e,t,n,i){let o=bI(lo(e,t,n)),r=bI(lo(e,t,i)),a=bI(lo(n,i,e)),s=bI(lo(n,i,t));return!!(o!==r&&a!==s||o===0&&yI(e,n,t)||r===0&&yI(e,i,t)||a===0&&yI(n,e,i)||s===0&&yI(n,t,i))}function yI(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function bI(e){return e>0?1:e<0?-1:0}function Zre(e,t){let n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&j2(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}function Mg(e,t){return lo(e.prev,e,e.next)<0?lo(e,t,e.next)>=0&&lo(e,e.prev,t)>=0:lo(e,t,e.prev)<0||lo(e,e.next,t)<0}function $re(e,t){let n=e,i=!1,o=(e.x+t.x)/2,r=(e.y+t.y)/2;do n.y>r!=n.next.y>r&&n.next.y!==n.y&&o<(n.next.x-n.x)*(r-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next;while(n!==e);return i}function Y2(e,t){let n=oT(e.i,e.x,e.y),i=oT(t.i,t.x,t.y),o=e.next,r=t.prev;return e.next=t,t.prev=e,n.next=o,o.prev=n,i.next=n,n.prev=i,r.next=i,i.prev=r,i}function G2(e,t,n,i){let o=oT(e,t,n);return i?(o.next=i.next,o.prev=i,i.next.prev=o,i.next=o):(o.prev=o,o.next=o),o}function Pg(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function oT(e,t,n){return{i:e,x:t,y:n,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function eae(e,t,n,i){let o=0;for(let r=t,a=n-i;r<n;r+=i)o+=(e[a]-e[r])*(e[r+1]+e[a+1]),a=r;return o}var tae=new f,nae=new f,Xu={};Xu.computeArea2D=function(e){let t=e.length,n=0;for(let i=t-1,o=0;o<t;i=o++){let r=e[i],a=e[o];n+=r.x*a.y-a.x*r.y}return n*.5};Xu.computeWindingOrder2D=function(e){return Xu.computeArea2D(e)>0?Rc.COUNTER_CLOCKWISE:Rc.CLOCKWISE};Xu.triangulate=function(e,t){let n=L.packArray(e);return rT(n,t,2)};var K2=new f,X2=new f,Z2=new f,W2=new f,q2=new f,J2=new f,vl=new f,$2=new L,ek=new L,tk=new L,Vh=new L;Xu.computeSubdivision=function(e,t,n,i,o){o=o??S.RADIANS_PER_DEGREE;let r=c(i),a=n.slice(0),s,A=t.length,l=new Array(A*3),d=new Array(A*2),m=0,p=0;for(s=0;s<A;s++){let x=t[s];if(l[m++]=x.x,l[m++]=x.y,l[m++]=x.z,r){let T=i[s];d[p++]=T.x,d[p++]=T.y}}let g=[],h={},C=e.maximumRadius,_=S.chordLength(o,C),I=_*_;for(;a.length>0;){let x=a.pop(),T=a.pop(),w=a.pop(),R=f.fromArray(l,w*3,K2),z=f.fromArray(l,T*3,X2),M=f.fromArray(l,x*3,Z2),N,O,u;r&&(N=L.fromArray(d,w*2,$2),O=L.fromArray(d,T*2,ek),u=L.fromArray(d,x*2,tk));let E=f.multiplyByScalar(f.normalize(R,W2),C,W2),y=f.multiplyByScalar(f.normalize(z,q2),C,q2),B=f.multiplyByScalar(f.normalize(M,J2),C,J2),D=f.magnitudeSquared(f.subtract(E,y,vl)),v=f.magnitudeSquared(f.subtract(y,B,vl)),F=f.magnitudeSquared(f.subtract(B,E,vl)),P=Math.max(D,v,F),U,k,j;P>I?D===P?(U=`${Math.min(w,T)} ${Math.max(w,T)}`,s=h[U],c(s)||(k=f.add(R,z,vl),f.multiplyByScalar(k,.5,k),l.push(k.x,k.y,k.z),s=l.length/3-1,h[U]=s,r&&(j=L.add(N,O,Vh),L.multiplyByScalar(j,.5,j),d.push(j.x,j.y))),a.push(w,s,x),a.push(s,T,x)):v===P?(U=`${Math.min(T,x)} ${Math.max(T,x)}`,s=h[U],c(s)||(k=f.add(z,M,vl),f.multiplyByScalar(k,.5,k),l.push(k.x,k.y,k.z),s=l.length/3-1,h[U]=s,r&&(j=L.add(O,u,Vh),L.multiplyByScalar(j,.5,j),d.push(j.x,j.y))),a.push(T,s,w),a.push(s,x,w)):F===P&&(U=`${Math.min(x,w)} ${Math.max(x,w)}`,s=h[U],c(s)||(k=f.add(M,R,vl),f.multiplyByScalar(k,.5,k),l.push(k.x,k.y,k.z),s=l.length/3-1,h[U]=s,r&&(j=L.add(u,N,Vh),L.multiplyByScalar(j,.5,j),d.push(j.x,j.y))),a.push(x,s,T),a.push(s,w,T)):(g.push(w),g.push(T),g.push(x))}let b={attributes:{position:new rt({componentDatatype:V.DOUBLE,componentsPerAttribute:3,values:l})},indices:g,primitiveType:Me.TRIANGLES};return r&&(b.attributes.st=new rt({componentDatatype:V.FLOAT,componentsPerAttribute:2,values:d})),new Dt(b)};var iae=new ue,oae=new ue,rae=new ue,aT=new ue;Xu.computeRhumbLineSubdivision=function(e,t,n,i,o){o=o??S.RADIANS_PER_DEGREE;let r=c(i),a=n.slice(0),s,A=t.length,l=new Array(A*3),d=new Array(A*2),m=0,p=0;for(s=0;s<A;s++){let w=t[s];if(l[m++]=w.x,l[m++]=w.y,l[m++]=w.z,r){let R=i[s];d[p++]=R.x,d[p++]=R.y}}let g=[],h={},C=e.maximumRadius,_=S.chordLength(o,C),I=new Za(void 0,void 0,e),b=new Za(void 0,void 0,e),x=new Za(void 0,void 0,e);for(;a.length>0;){let w=a.pop(),R=a.pop(),z=a.pop(),M=f.fromArray(l,z*3,K2),N=f.fromArray(l,R*3,X2),O=f.fromArray(l,w*3,Z2),u,E,y;r&&(u=L.fromArray(d,z*2,$2),E=L.fromArray(d,R*2,ek),y=L.fromArray(d,w*2,tk));let B=e.cartesianToCartographic(M,iae),D=e.cartesianToCartographic(N,oae),v=e.cartesianToCartographic(O,rae);I.setEndPoints(B,D);let F=I.surfaceDistance;b.setEndPoints(D,v);let P=b.surfaceDistance;x.setEndPoints(v,B);let U=x.surfaceDistance,k=Math.max(F,P,U),j,q,$,H,Z;k>_?F===k?(j=`${Math.min(z,R)} ${Math.max(z,R)}`,s=h[j],c(s)||(q=I.interpolateUsingFraction(.5,aT),$=(B.height+D.height)*.5,H=f.fromRadians(q.longitude,q.latitude,$,e,vl),l.push(H.x,H.y,H.z),s=l.length/3-1,h[j]=s,r&&(Z=L.add(u,E,Vh),L.multiplyByScalar(Z,.5,Z),d.push(Z.x,Z.y))),a.push(z,s,w),a.push(s,R,w)):P===k?(j=`${Math.min(R,w)} ${Math.max(R,w)}`,s=h[j],c(s)||(q=b.interpolateUsingFraction(.5,aT),$=(D.height+v.height)*.5,H=f.fromRadians(q.longitude,q.latitude,$,e,vl),l.push(H.x,H.y,H.z),s=l.length/3-1,h[j]=s,r&&(Z=L.add(E,y,Vh),L.multiplyByScalar(Z,.5,Z),d.push(Z.x,Z.y))),a.push(R,s,z),a.push(s,w,z)):U===k&&(j=`${Math.min(w,z)} ${Math.max(w,z)}`,s=h[j],c(s)||(q=x.interpolateUsingFraction(.5,aT),$=(v.height+B.height)*.5,H=f.fromRadians(q.longitude,q.latitude,$,e,vl),l.push(H.x,H.y,H.z),s=l.length/3-1,h[j]=s,r&&(Z=L.add(y,u,Vh),L.multiplyByScalar(Z,.5,Z),d.push(Z.x,Z.y))),a.push(w,s,R),a.push(s,z,R)):(g.push(z),g.push(R),g.push(w))}let T={attributes:{position:new rt({componentDatatype:V.DOUBLE,componentsPerAttribute:3,values:l})},indices:g,primitiveType:Me.TRIANGLES};return r&&(T.attributes.st=new rt({componentDatatype:V.FLOAT,componentsPerAttribute:2,values:d})),new Dt(T)};Xu.scaleToGeodeticHeight=function(e,t,n,i){n=n??pe.default;let o=tae,r=nae;if(t=t??0,i=i??!0,c(e)){let a=e.length;for(let s=0;s<a;s+=3)f.fromArray(e,s,r),i&&(r=n.scaleToGeodeticSurface(r,r)),t!==0&&(o=n.geodeticSurfaceNormal(r,o),f.multiplyByScalar(o,t,o),f.add(r,o,r)),e[s]=r.x,e[s+1]=r.y,e[s+2]=r.z}return e};var yr=Xu;function Zu(){this._array=[],this._offset=0,this._length=0}Object.defineProperties(Zu.prototype,{length:{get:function(){return this._length}}});Zu.prototype.enqueue=function(e){this._array.push(e),this._length++};Zu.prototype.dequeue=function(){if(this._length===0)return;let e=this._array,t=this._offset,n=e[t];return e[t]=void 0,t++,t>10&&t*2>e.length&&(this._array=e.slice(t),t=0),this._offset=t,this._length--,n};Zu.prototype.peek=function(){if(this._length!==0)return this._array[this._offset]};Zu.prototype.contains=function(e){return this._array.indexOf(e)!==-1};Zu.prototype.clear=function(){this._array.length=this._offset=this._length=0};Zu.prototype.sort=function(e){this._offset>0&&(this._array=this._array.slice(this._offset),this._offset=0),this._array.sort(e)};var Ng=Zu;var Ni={};Ni.computeHierarchyPackedLength=function(e,t){let n=0,i=[e];for(;i.length>0;){let o=i.pop();if(!c(o))continue;n+=2;let r=o.positions,a=o.holes;if(c(r)&&r.length>0&&(n+=r.length*t.packedLength),c(a)){let s=a.length;for(let A=0;A<s;++A)i.push(a[A])}}return n};Ni.packPolygonHierarchy=function(e,t,n,i){let o=[e];for(;o.length>0;){let r=o.pop();if(!c(r))continue;let a=r.positions,s=r.holes;if(t[n++]=c(a)?a.length:0,t[n++]=c(s)?s.length:0,c(a)){let A=a.length;for(let l=0;l<A;++l,n+=i.packedLength)i.pack(a[l],t,n)}if(c(s)){let A=s.length;for(let l=0;l<A;++l)o.push(s[l])}}return n};Ni.unpackPolygonHierarchy=function(e,t,n){let i=e[t++],o=e[t++],r=new Array(i),a=o>0?new Array(o):void 0;for(let s=0;s<i;++s,t+=n.packedLength)r[s]=n.unpack(e,t);for(let s=0;s<o;++s)a[s]=Ni.unpackPolygonHierarchy(e,t,n),t=a[s].startingIndex,delete a[s].startingIndex;return{positions:r,holes:a,startingIndex:t}};var Id=new L;function ok(e,t,n,i){return L.subtract(t,e,Id),L.multiplyByScalar(Id,n/i,Id),L.add(e,Id,Id),[Id.x,Id.y]}var $u=new f;function aae(e,t,n,i){return f.subtract(t,e,$u),f.multiplyByScalar($u,n/i,$u),f.add(e,$u,$u),[$u.x,$u.y,$u.z]}Ni.subdivideLineCount=function(e,t,n){let o=f.distance(e,t)/n,r=Math.max(0,Math.ceil(S.log2(o)));return Math.pow(2,r)};var xI=new ue,TI=new ue,sae=new ue,cae=new f,BI=new Za;Ni.subdivideRhumbLineCount=function(e,t,n,i){let o=e.cartesianToCartographic(t,xI),r=e.cartesianToCartographic(n,TI),s=new Za(o,r,e).surfaceDistance/i,A=Math.max(0,Math.ceil(S.log2(s)));return Math.pow(2,A)};Ni.subdivideTexcoordLine=function(e,t,n,i,o,r){let a=Ni.subdivideLineCount(n,i,o),s=L.distance(e,t),A=s/a,l=r;l.length=a*2;let d=0;for(let m=0;m<a;m++){let p=ok(e,t,m*A,s);l[d++]=p[0],l[d++]=p[1]}return l};Ni.subdivideLine=function(e,t,n,i){let o=Ni.subdivideLineCount(e,t,n),r=f.distance(e,t),a=r/o;c(i)||(i=[]);let s=i;s.length=o*3;let A=0;for(let l=0;l<o;l++){let d=aae(e,t,l*a,r);s[A++]=d[0],s[A++]=d[1],s[A++]=d[2]}return s};Ni.subdivideTexcoordRhumbLine=function(e,t,n,i,o,r,a){let s=n.cartesianToCartographic(i,xI),A=n.cartesianToCartographic(o,TI);BI.setEndPoints(s,A);let l=BI.surfaceDistance/r,d=Math.max(0,Math.ceil(S.log2(l))),m=Math.pow(2,d),p=L.distance(e,t),g=p/m,h=a;h.length=m*2;let C=0;for(let _=0;_<m;_++){let I=ok(e,t,_*g,p);h[C++]=I[0],h[C++]=I[1]}return h};Ni.subdivideRhumbLine=function(e,t,n,i,o){let r=e.cartesianToCartographic(t,xI),a=e.cartesianToCartographic(n,TI),s=new Za(r,a,e);if(c(o)||(o=[]),s.surfaceDistance<=i)return o.length=3,o[0]=t.x,o[1]=t.y,o[2]=t.z,o;let A=s.surfaceDistance/i,l=Math.max(0,Math.ceil(S.log2(A))),d=Math.pow(2,l),m=s.surfaceDistance/d,p=o;p.length=d*3;let g=0;for(let h=0;h<d;h++){let C=s.interpolateUsingSurfaceDistance(h*m,sae),_=e.cartographicToCartesian(C,cae);p[g++]=_.x,p[g++]=_.y,p[g++]=_.z}return p};var Aae=new f,lae=new f,uae=new f,fae=new f;Ni.scaleToGeodeticHeightExtruded=function(e,t,n,i,o){i=i??pe.default;let r=Aae,a=lae,s=uae,A=fae;if(c(e)&&c(e.attributes)&&c(e.attributes.position)){let l=e.attributes.position.values,d=l.length/2;for(let m=0;m<d;m+=3)f.fromArray(l,m,s),i.geodeticSurfaceNormal(s,r),A=i.scaleToGeodeticSurface(s,A),a=f.multiplyByScalar(r,n,a),a=f.add(A,a,a),l[m+d]=a.x,l[m+1+d]=a.y,l[m+2+d]=a.z,o&&(A=f.clone(s,A)),a=f.multiplyByScalar(r,t,a),a=f.add(A,a,a),l[m]=a.x,l[m+1]=a.y,l[m+2]=a.z}return e};Ni.polygonOutlinesFromHierarchy=function(e,t,n){let i=[],o=new Ng;o.enqueue(e);let r,a,s;for(;o.length!==0;){let A=o.dequeue(),l=A.positions;if(t)for(s=l.length,r=0;r<s;r++)n.scaleToGeodeticSurface(l[r],l[r]);if(l=Jr(l,f.equalsEpsilon,!0),l.length<3)continue;let d=A.holes?A.holes.length:0;for(r=0;r<d;r++){let m=A.holes[r],p=m.positions;if(t)for(s=p.length,a=0;a<s;++a)n.scaleToGeodeticSurface(p[a],p[a]);if(p=Jr(p,f.equalsEpsilon,!0),p.length<3)continue;i.push(p);let g=0;for(c(m.holes)&&(g=m.holes.length),a=0;a<g;a++)o.enqueue(m.holes[a])}i.push(l)}return i};var dae=new ue;function hae(e,t,n){let i=n.cartesianToCartographic(e,xI),o=n.cartesianToCartographic(t,TI);if(Math.sign(i.latitude)===Math.sign(o.latitude))return;BI.setEndPoints(i,o);let r=BI.findIntersectionWithLatitude(0,dae);if(!c(r))return;let a=Math.min(i.longitude,o.longitude),s=Math.max(i.longitude,o.longitude);if(Math.abs(s-a)>S.PI){let A=a;a=s,s=A}if(!(r.longitude<a||r.longitude>s))return n.cartographicToCartesian(r)}function mae(e,t,n,i){if(i===ti.RHUMB)return hae(e,t,n);let o=en.lineSegmentPlane(e,t,Ze.ORIGIN_XY_PLANE);if(c(o))return n.scaleToGeodeticSurface(o,o)}var pae=new ue;function gae(e,t,n){let i=[],o,r,a,s,A,l=0;for(;l<e.length;){o=e[l],r=e[(l+1)%e.length],a=S.sign(o.z),s=S.sign(r.z);let d=m=>t.cartesianToCartographic(m,pae).longitude;if(a===0)i.push({position:l,type:a,visited:!1,next:s,theta:d(o)});else if(s!==0){if(A=mae(o,r,t,n),++l,!c(A))continue;e.splice(l,0,A),i.push({position:l,type:a,visited:!1,next:s,theta:d(A)})}++l}return i}function rk(e,t,n,i,o,r,a){let s=[],A=r,l=m=>p=>p.position===m,d=[];do{let m=n[A];s.push(m);let p=i.findIndex(l(A)),g=i[p];if(!c(g)){++A;continue}let{visited:h,type:C,next:_}=g;if(g.visited=!0,C===0){if(_===0){let T=i[p-(a?1:-1)];if(T?.position===A+1)T.visited=!0;else{++A;continue}}if(!h&&a&&_>0||r===A&&!a&&_<0){++A;continue}}if(!(a?C>=0:C<=0)){++A;continue}h||d.push(A);let b=p+(a?1:-1),x=i[b];if(!c(x)){++A;continue}A=x.position}while(A<n.length&&A>=0&&A!==r&&s.length<n.length);e.splice(t,o,s);for(let m of d)t=rk(e,++t,n,i,0,m,!a);return t}Ni.splitPolygonsOnEquator=function(e,t,n,i){c(i)||(i=[]),i.splice(0,0,...e),i.length=e.length;let o=0;for(;o<i.length;){let r=i[o],a=r.slice();if(r.length<3){i[o]=a,++o;continue}let s=gae(a,t,n);if(a.length===r.length||s.length<=1){i[o]=a,++o;continue}s.sort((l,d)=>l.theta-d.theta);let A=a[0].z>=0;o=rk(i,o,a,s,1,0,A)}return i};Ni.polygonsFromHierarchy=function(e,t,n,i,o,r){let a=[],s=[],A=new Ng;A.enqueue(e);let l=c(r);for(;A.length!==0;){let d=A.dequeue(),m=d.positions,p=d.holes,g,h;if(i)for(h=m.length,g=0;g<h;g++)o.scaleToGeodeticSurface(m[g],m[g]);if(t||(m=Jr(m,f.equalsEpsilon,!0)),m.length<3)continue;let C=n(m);if(!c(C))continue;let _=[],I=yr.computeWindingOrder2D(C);if(I===Rc.CLOCKWISE&&(C.reverse(),m=m.slice().reverse()),l){l=!1;let R=[m];if(R=r(R,R),R.length>1){for(let z of R)A.enqueue(new M_(z,p));continue}}let b=m.slice(),x=c(p)?p.length:0,T=[],w;for(g=0;g<x;g++){let R=p[g],z=R.positions;if(i)for(h=z.length,w=0;w<h;++w)o.scaleToGeodeticSurface(z[w],z[w]);if(t||(z=Jr(z,f.equalsEpsilon,!0)),z.length<3)continue;let M=n(z);if(!c(M))continue;I=yr.computeWindingOrder2D(M),I===Rc.CLOCKWISE&&(M.reverse(),z=z.slice().reverse()),T.push(z),_.push(b.length),b=b.concat(z),C=C.concat(M);let N=0;for(c(R.holes)&&(N=R.holes.length),w=0;w<N;w++)A.enqueue(R.holes[w])}a.push({outerRing:m,holes:T}),s.push({positions:b,positions2D:C,holes:_})}return{hierarchy:a,polygons:s}};var Cae=new L,Eae=new f,_ae=new gt,Iae=new ne;Ni.computeBoundingRectangle=function(e,t,n,i,o){let r=gt.fromAxisAngle(e,i,_ae),a=ne.fromQuaternion(r,Iae),s=Number.POSITIVE_INFINITY,A=Number.NEGATIVE_INFINITY,l=Number.POSITIVE_INFINITY,d=Number.NEGATIVE_INFINITY,m=n.length;for(let p=0;p<m;++p){let g=f.clone(n[p],Eae);ne.multiplyByVector(a,g,g);let h=t(g,Cae);c(h)&&(s=Math.min(s,h.x),A=Math.max(A,h.x),l=Math.min(l,h.y),d=Math.max(d,h.y))}return o.x=s,o.y=l,o.width=A-s,o.height=d-l,o};Ni.createGeometryFromPositions=function(e,t,n,i,o,r,a){let s=yr.triangulate(t.positions2D,t.holes);s.length<3&&(s=[0,1,2]);let A=t.positions,l=c(n),d=l?n.positions:void 0;if(o){let m=A.length,p=new Array(m*3),g=0;for(let _=0;_<m;_++){let I=A[_];p[g++]=I.x,p[g++]=I.y,p[g++]=I.z}let h={attributes:{position:new rt({componentDatatype:V.DOUBLE,componentsPerAttribute:3,values:p})},indices:s,primitiveType:Me.TRIANGLES};l&&(h.attributes.st=new rt({componentDatatype:V.FLOAT,componentsPerAttribute:2,values:L.packArray(d)}));let C=new Dt(h);return r.normal?li.computeNormal(C):C}if(a===ti.GEODESIC)return yr.computeSubdivision(e,A,s,d,i);if(a===ti.RHUMB)return yr.computeRhumbLineSubdivision(e,A,s,d,i)};var nk=[],ik=[],yae=new f,bae=new f;Ni.computeWallGeometry=function(e,t,n,i,o,r){let a,s,A,l,d,m,p,g,h,C=e.length,_=0,I=0,b=c(t),x=b?t.positions:void 0;if(o)for(s=C*3*2,a=new Array(s*2),b&&(h=C*2*2,g=new Array(h*2)),A=0;A<C;A++)l=e[A],d=e[(A+1)%C],a[_]=a[_+s]=l.x,++_,a[_]=a[_+s]=l.y,++_,a[_]=a[_+s]=l.z,++_,a[_]=a[_+s]=d.x,++_,a[_]=a[_+s]=d.y,++_,a[_]=a[_+s]=d.z,++_,b&&(m=x[A],p=x[(A+1)%C],g[I]=g[I+h]=m.x,++I,g[I]=g[I+h]=m.y,++I,g[I]=g[I+h]=p.x,++I,g[I]=g[I+h]=p.y,++I);else{let M=S.chordLength(i,n.maximumRadius),N=0;if(r===ti.GEODESIC)for(A=0;A<C;A++)N+=Ni.subdivideLineCount(e[A],e[(A+1)%C],M);else if(r===ti.RHUMB)for(A=0;A<C;A++)N+=Ni.subdivideRhumbLineCount(n,e[A],e[(A+1)%C],M);for(s=(N+C)*3,a=new Array(s*2),b&&(h=(N+C)*2,g=new Array(h*2)),A=0;A<C;A++){l=e[A],d=e[(A+1)%C];let O,u;b&&(m=x[A],p=x[(A+1)%C]),r===ti.GEODESIC?(O=Ni.subdivideLine(l,d,M,ik),b&&(u=Ni.subdivideTexcoordLine(m,p,l,d,M,nk))):r===ti.RHUMB&&(O=Ni.subdivideRhumbLine(n,l,d,M,ik),b&&(u=Ni.subdivideTexcoordRhumbLine(m,p,n,l,d,M,nk)));let E=O.length;for(let y=0;y<E;++y,++_)a[_]=O[y],a[_+s]=O[y];if(a[_]=d.x,a[_+s]=d.x,++_,a[_]=d.y,a[_+s]=d.y,++_,a[_]=d.z,a[_+s]=d.z,++_,b){let y=u.length;for(let B=0;B<y;++B,++I)g[I]=u[B],g[I+h]=u[B];g[I]=p.x,g[I+h]=p.x,++I,g[I]=p.y,g[I+h]=p.y,++I}}}C=a.length;let T=Ge.createTypedArray(C/3,C-e.length*6),w=0;for(C/=6,A=0;A<C;A++){let M=A,N=M+1,O=M+C,u=O+1;l=f.fromArray(a,M*3,yae),d=f.fromArray(a,N*3,bae),!f.equalsEpsilon(l,d,S.EPSILON10,S.EPSILON10)&&(T[w++]=M,T[w++]=O,T[w++]=N,T[w++]=N,T[w++]=O,T[w++]=u)}let R={attributes:new eo({position:new rt({componentDatatype:V.DOUBLE,componentsPerAttribute:3,values:a})}),indices:T,primitiveType:Me.TRIANGLES};return b&&(R.attributes.st=new rt({componentDatatype:V.FLOAT,componentsPerAttribute:2,values:g})),new Dt(R)};var Yn=Ni;function uo(e,t){this.position=e,c(this.position)||(this.position=new L),this.tangentPlane=t,c(this.tangentPlane)||(this.tangentPlane=uo.NORTH_POLE_TANGENT_PLANE)}Object.defineProperties(uo.prototype,{ellipsoid:{get:function(){return this.tangentPlane.ellipsoid}},x:{get:function(){return this.position.x}},y:{get:function(){return this.position.y}},conformalLatitude:{get:function(){let e=L.magnitude(this.position),t=2*this.ellipsoid.maximumRadius;return this.tangentPlane.plane.normal.z*(S.PI_OVER_TWO-2*Math.atan2(e,t))}},longitude:{get:function(){let e=S.PI_OVER_TWO+Math.atan2(this.y,this.x);return e>Math.PI&&(e-=S.TWO_PI),e}}});var jh=new ue,Bae=new f;uo.prototype.getLatitude=function(e){c(e)||(e=pe.default),jh.latitude=this.conformalLatitude,jh.longitude=this.longitude,jh.height=0;let t=this.ellipsoid.cartographicToCartesian(jh,Bae);return e.cartesianToCartographic(t,jh),jh.latitude};var xae=new ai,Tae=new f,Sae=new f;uo.fromCartesian=function(e,t){let n=S.signNotZero(e.z),i=uo.NORTH_POLE_TANGENT_PLANE,o=uo.SOUTH_POLE;n<0&&(i=uo.SOUTH_POLE_TANGENT_PLANE,o=uo.NORTH_POLE);let r=xae;r.origin=i.ellipsoid.scaleToGeocentricSurface(e,r.origin),r.direction=f.subtract(r.origin,o,Tae),f.normalize(r.direction,r.direction);let a=en.rayPlane(r,i.plane,Sae),s=f.subtract(a,o,a),A=f.dot(i.xAxis,s),l=n*f.dot(i.yAxis,s);return c(t)?(t.position=new L(A,l),t.tangentPlane=i,t):new uo(new L(A,l),i)};uo.fromCartesianArray=function(e,t){let n=e.length;c(t)?t.length=n:t=new Array(n);for(let i=0;i<n;i++)t[i]=uo.fromCartesian(e[i],t[i]);return t};uo.clone=function(e,t){if(c(e))return c(t)?(t.position=e.position,t.tangentPlane=e.tangentPlane,t):new uo(e.position,e.tangentPlane)};uo.HALF_UNIT_SPHERE=Object.freeze(new pe(.5,.5,.5));uo.NORTH_POLE=Object.freeze(new f(0,0,.5));uo.SOUTH_POLE=Object.freeze(new f(0,0,-.5));uo.NORTH_POLE_TANGENT_PLANE=Object.freeze(new Fc(uo.NORTH_POLE,uo.HALF_UNIT_SPHERE));uo.SOUTH_POLE_TANGENT_PLANE=Object.freeze(new Fc(uo.SOUTH_POLE,uo.HALF_UNIT_SPHERE));var _s=uo;var wae=new ue,ak=new ue;function Dae(e,t,n,i){let r=i.cartesianToCartographic(e,wae).height,a=i.cartesianToCartographic(t,ak);a.height=r,i.cartographicToCartesian(a,t);let s=i.cartesianToCartographic(n,ak);s.height=r-100,i.cartographicToCartesian(s,n)}var sk=new oi,Qae=new f,Rae=new f,vae=new f,Mae=new f,Pae=new f,Nae=new f,SI=new f,RA=new f,Yh=new f,Lae=new L,Fae=new L,Oae=new f,ck=new gt,kae=new ne,Uae=new ne;function sT(e){let t=e.vertexFormat,n=e.geometry,i=e.shadowVolume,o=n.attributes.position.values,r=c(n.attributes.st)?n.attributes.st.values:void 0,a=o.length,s=e.wall,A=e.top||s,l=e.bottom||s;if(t.st||t.normal||t.tangent||t.bitangent||i){let d=e.boundingRectangle,m=e.rotationAxis,p=e.projectTo2d,g=e.ellipsoid,h=e.stRotation,C=e.perPositionHeight,_=Lae;_.x=d.x,_.y=d.y;let I=t.st?new Float32Array(2*(a/3)):void 0,b;t.normal&&(C&&A&&!s?b=n.attributes.normal.values:b=new Float32Array(a));let x=t.tangent?new Float32Array(a):void 0,T=t.bitangent?new Float32Array(a):void 0,w=i?new Float32Array(a):void 0,R=0,z=0,M=Rae,N=vae,O=Mae,u=!0,E=kae,y=Uae;if(h!==0){let v=gt.fromAxisAngle(m,h,ck);E=ne.fromQuaternion(v,E),v=gt.fromAxisAngle(m,-h,ck),y=ne.fromQuaternion(v,y)}else E=ne.clone(ne.IDENTITY,E),y=ne.clone(ne.IDENTITY,y);let B=0,D=0;A&&l&&(B=a/2,D=a/3,a/=2);for(let v=0;v<a;v+=3){let F=f.fromArray(o,v,Oae);if(t.st&&!c(r)){let P=ne.multiplyByVector(E,F,Qae);P=g.scaleToGeodeticSurface(P,P);let U=p([P],Fae)[0];L.subtract(U,_,U);let k=S.clamp(U.x/d.width,0,1),j=S.clamp(U.y/d.height,0,1);l&&(I[R+D]=k,I[R+1+D]=j),A&&(I[R]=k,I[R+1]=j),R+=2}if(t.normal||t.tangent||t.bitangent||i){let P=z+1,U=z+2;if(s){if(v+3<a){let k=f.fromArray(o,v+3,Pae);if(u){let j=f.fromArray(o,v+a,Nae);C&&Dae(F,k,j,g),f.subtract(k,F,k),f.subtract(j,F,j),M=f.normalize(f.cross(j,k,M),M),u=!1}f.equalsEpsilon(k,F,S.EPSILON10)&&(u=!0)}(t.tangent||t.bitangent)&&(O=g.geodeticSurfaceNormal(F,O),t.tangent&&(N=f.normalize(f.cross(O,M,N),N)))}else M=g.geodeticSurfaceNormal(F,M),(t.tangent||t.bitangent)&&(C&&(SI=f.fromArray(b,z,SI),RA=f.cross(f.UNIT_Z,SI,RA),RA=f.normalize(ne.multiplyByVector(y,RA,RA),RA),t.bitangent&&(Yh=f.normalize(f.cross(SI,RA,Yh),Yh))),N=f.cross(f.UNIT_Z,M,N),N=f.normalize(ne.multiplyByVector(y,N,N),N),t.bitangent&&(O=f.normalize(f.cross(M,N,O),O)));t.normal&&(e.wall?(b[z+B]=M.x,b[P+B]=M.y,b[U+B]=M.z):l&&(b[z+B]=-M.x,b[P+B]=-M.y,b[U+B]=-M.z),(A&&!C||s)&&(b[z]=M.x,b[P]=M.y,b[U]=M.z)),i&&(s&&(M=g.geodeticSurfaceNormal(F,M)),w[z+B]=-M.x,w[P+B]=-M.y,w[U+B]=-M.z),t.tangent&&(e.wall?(x[z+B]=N.x,x[P+B]=N.y,x[U+B]=N.z):l&&(x[z+B]=-N.x,x[P+B]=-N.y,x[U+B]=-N.z),A&&(C?(x[z]=RA.x,x[P]=RA.y,x[U]=RA.z):(x[z]=N.x,x[P]=N.y,x[U]=N.z))),t.bitangent&&(l&&(T[z+B]=O.x,T[P+B]=O.y,T[U+B]=O.z),A&&(C?(T[z]=Yh.x,T[P]=Yh.y,T[U]=Yh.z):(T[z]=O.x,T[P]=O.y,T[U]=O.z))),z+=3}}t.st&&!c(r)&&(n.attributes.st=new rt({componentDatatype:V.FLOAT,componentsPerAttribute:2,values:I})),t.normal&&(n.attributes.normal=new rt({componentDatatype:V.FLOAT,componentsPerAttribute:3,values:b})),t.tangent&&(n.attributes.tangent=new rt({componentDatatype:V.FLOAT,componentsPerAttribute:3,values:x})),t.bitangent&&(n.attributes.bitangent=new rt({componentDatatype:V.FLOAT,componentsPerAttribute:3,values:T})),i&&(n.attributes.extrudeDirection=new rt({componentDatatype:V.FLOAT,componentsPerAttribute:3,values:w}))}if(e.extrude&&c(e.offsetAttribute)){let d=o.length/3,m=new Uint8Array(d);if(e.offsetAttribute===Pr.TOP)A&&l||s?m=m.fill(1,0,d/2):A&&(m=m.fill(1));else{let p=e.offsetAttribute===Pr.NONE?0:1;m=m.fill(p)}n.attributes.applyOffset=new rt({componentDatatype:V.UNSIGNED_BYTE,componentsPerAttribute:1,values:m})}return n}var Ak=[];function zae(e,t,n,i,o,r,a,s,A,l){let d={walls:[]},m;if(a||s){let b=Yn.createGeometryFromPositions(e,t,n,i,r,A,l),x=b.attributes.position.values,T=b.indices,w,R;if(a&&s){let z=x.concat(x);w=z.length/3,R=Ge.createTypedArray(w,T.length*2),R.set(T);let M=T.length,N=w/2;for(m=0;m<M;m+=3){let O=R[m]+N,u=R[m+1]+N,E=R[m+2]+N;R[m+M]=E,R[m+1+M]=u,R[m+2+M]=O}if(b.attributes.position.values=z,r&&A.normal){let O=b.attributes.normal.values;b.attributes.normal.values=new Float32Array(z.length),b.attributes.normal.values.set(O)}if(A.st&&c(n)){let O=b.attributes.st.values;b.attributes.st.values=new Float32Array(w*2),b.attributes.st.values=O.concat(O)}b.indices=R}else if(s){for(w=x.length/3,R=Ge.createTypedArray(w,T.length),m=0;m<T.length;m+=3)R[m]=T[m+2],R[m+1]=T[m+1],R[m+2]=T[m];b.indices=R}d.topAndBottom=new tn({geometry:b})}let p=o.outerRing,g=Fc.fromPoints(p,e),h=g.projectPointsOntoPlane(p,Ak),C=yr.computeWindingOrder2D(h);C===Rc.CLOCKWISE&&(p=p.slice().reverse());let _=Yn.computeWallGeometry(p,n,e,i,r,l);d.walls.push(new tn({geometry:_}));let I=o.holes;for(m=0;m<I.length;m++){let b=I[m];h=g.projectPointsOntoPlane(b,Ak),C=yr.computeWindingOrder2D(h),C===Rc.COUNTER_CLOCKWISE&&(b=b.slice().reverse()),_=Yn.computeWallGeometry(b,n,e,i,r,l),d.walls.push(new tn({geometry:_}))}return d}function rc(e){let t=e.polygonHierarchy,n=e.vertexFormat??Bt.DEFAULT,i=e.ellipsoid??pe.default,o=e.granularity??S.RADIANS_PER_DEGREE,r=e.stRotation??0,a=e.textureCoordinates,s=e.perPositionHeight??!1,A=s&&c(e.extrudedHeight),l=e.height??0,d=e.extrudedHeight??l;if(!A){let m=Math.max(l,d);d=Math.min(l,d),l=m}this._vertexFormat=Bt.clone(n),this._ellipsoid=pe.clone(i),this._granularity=o,this._stRotation=r,this._height=l,this._extrudedHeight=d,this._closeTop=e.closeTop??!0,this._closeBottom=e.closeBottom??!0,this._polygonHierarchy=t,this._perPositionHeight=s,this._perPositionHeightExtrude=A,this._shadowVolume=e.shadowVolume??!1,this._workerName="createPolygonGeometry",this._offsetAttribute=e.offsetAttribute,this._arcType=e.arcType??ti.GEODESIC,this._rectangle=void 0,this._textureCoordinateRotationPoints=void 0,this._textureCoordinates=a,this.packedLength=Yn.computeHierarchyPackedLength(t,f)+pe.packedLength+Bt.packedLength+(a?Yn.computeHierarchyPackedLength(a,L):1)+12}rc.fromPositions=function(e){e=e??G.EMPTY_OBJECT;let t={polygonHierarchy:{positions:e.positions},height:e.height,extrudedHeight:e.extrudedHeight,vertexFormat:e.vertexFormat,stRotation:e.stRotation,ellipsoid:e.ellipsoid,granularity:e.granularity,perPositionHeight:e.perPositionHeight,closeTop:e.closeTop,closeBottom:e.closeBottom,offsetAttribute:e.offsetAttribute,arcType:e.arcType,textureCoordinates:e.textureCoordinates};return new rc(t)};rc.pack=function(e,t,n){return n=n??0,n=Yn.packPolygonHierarchy(e._polygonHierarchy,t,n,f),pe.pack(e._ellipsoid,t,n),n+=pe.packedLength,Bt.pack(e._vertexFormat,t,n),n+=Bt.packedLength,t[n++]=e._height,t[n++]=e._extrudedHeight,t[n++]=e._granularity,t[n++]=e._stRotation,t[n++]=e._perPositionHeightExtrude?1:0,t[n++]=e._perPositionHeight?1:0,t[n++]=e._closeTop?1:0,t[n++]=e._closeBottom?1:0,t[n++]=e._shadowVolume?1:0,t[n++]=e._offsetAttribute??-1,t[n++]=e._arcType,c(e._textureCoordinates)?n=Yn.packPolygonHierarchy(e._textureCoordinates,t,n,L):t[n++]=-1,t[n++]=e.packedLength,t};var Gae=pe.clone(pe.UNIT_SPHERE),Hae=new Bt,Vae={polygonHierarchy:{}};rc.unpack=function(e,t,n){t=t??0;let i=Yn.unpackPolygonHierarchy(e,t,f);t=i.startingIndex,delete i.startingIndex;let o=pe.unpack(e,t,Gae);t+=pe.packedLength;let r=Bt.unpack(e,t,Hae);t+=Bt.packedLength;let a=e[t++],s=e[t++],A=e[t++],l=e[t++],d=e[t++]===1,m=e[t++]===1,p=e[t++]===1,g=e[t++]===1,h=e[t++]===1,C=e[t++],_=e[t++],I=e[t]===-1?void 0:Yn.unpackPolygonHierarchy(e,t,L);c(I)?(t=I.startingIndex,delete I.startingIndex):t++;let b=e[t++];return c(n)||(n=new rc(Vae)),n._polygonHierarchy=i,n._ellipsoid=pe.clone(o,n._ellipsoid),n._vertexFormat=Bt.clone(r,n._vertexFormat),n._height=a,n._extrudedHeight=s,n._granularity=A,n._stRotation=l,n._perPositionHeightExtrude=d,n._perPositionHeight=m,n._closeTop=p,n._closeBottom=g,n._shadowVolume=h,n._offsetAttribute=C===-1?void 0:C,n._arcType=_,n._textureCoordinates=I,n.packedLength=b,n};var jae=new L,Yae=new L,Wae=new _s;function lk(e,t,n,i,o,r){let a=e.longitude,s=a>=0?a:a+S.TWO_PI;o.westOverIdl=Math.min(o.westOverIdl,s),o.eastOverIdl=Math.max(o.eastOverIdl,s),r.west=Math.min(r.west,a),r.east=Math.max(r.east,a);let A=e.getLatitude(n),l=A;if(r.south=Math.min(r.south,A),r.north=Math.max(r.north,A),i!==ti.RHUMB){let p=L.subtract(t.position,e.position,jae),g=L.dot(t.position,p)/L.dot(p,p);if(g>0&&g<1){let h=L.add(t.position,L.multiplyByScalar(p,-g,p),Yae),C=_s.clone(t,Wae);C.position=h;let _=C.getLatitude(n);r.south=Math.min(r.south,_),r.north=Math.max(r.north,_),Math.abs(A)>Math.abs(_)&&(l=_)}}let d=t.x*e.y-e.x*t.y,m=Math.sign(d);m!==0&&(m*=L.angleBetween(t.position,e.position)),l>=0&&(o.northAngle+=m),l<=0&&(o.southAngle+=m)}var uk=new _s,qae=new _s,oc={northAngle:0,southAngle:0,westOverIdl:0,eastOverIdl:0};rc.computeRectangleFromPositions=function(e,t,n,i){if(c(i)||(i=new de),e.length<3)return i;i.west=Number.POSITIVE_INFINITY,i.east=Number.NEGATIVE_INFINITY,i.south=Number.POSITIVE_INFINITY,i.north=Number.NEGATIVE_INFINITY,oc.northAngle=0,oc.southAngle=0,oc.westOverIdl=Number.POSITIVE_INFINITY,oc.eastOverIdl=Number.NEGATIVE_INFINITY;let o=e.length,r=_s.fromCartesian(e[0],qae);for(let a=1;a<o;a++){let s=_s.fromCartesian(e[a],uk);lk(s,r,t,n,oc,i),r=_s.clone(s,r)}return lk(_s.fromCartesian(e[0],uk),r,t,n,oc,i),i.east-i.west>oc.eastOverIdl-oc.westOverIdl&&(i.west=oc.westOverIdl,i.east=oc.eastOverIdl,i.east>S.PI&&(i.east=i.east-S.TWO_PI),i.west>S.PI&&(i.west=i.west-S.TWO_PI)),S.equalsEpsilon(Math.abs(oc.northAngle),S.TWO_PI,S.EPSILON10)&&(i.north=S.PI_OVER_TWO,i.east=S.PI,i.west=-S.PI),S.equalsEpsilon(Math.abs(oc.southAngle),S.TWO_PI,S.EPSILON10)&&(i.south=-S.PI_OVER_TWO,i.east=S.PI,i.west=-S.PI),i};var Jae=new _s;function Kae(e,t,n){return e.height>=S.PI||e.width>=S.PI?_s.fromCartesian(t[0],Jae).tangentPlane:Fc.fromPoints(t,n)}var fk=new ue;function Xae(e,t,n){return(i,o)=>{if(e.height>=S.PI||e.width>=S.PI){if(e.south<0&&e.north>0){c(o)||(o=[]);for(let a=0;a<i.length;++a){let s=n.cartesianToCartographic(i[a],fk);o[a]=new L(s.longitude/S.PI,s.latitude/S.PI_OVER_TWO)}return o.length=i.length,o}return _s.fromCartesianArray(i,o)}return Fc.fromPoints(t,n).projectPointsOntoPlane(i,o)}}function Zae(e,t,n){if(e.height>=S.PI||e.width>=S.PI)return(o,r)=>{if(e.south<0&&e.north>0){let a=n.cartesianToCartographic(o,fk);return c(r)||(r=new L),r.x=a.longitude/S.PI,r.y=a.latitude/S.PI_OVER_TWO,r}return _s.fromCartesian(o,r)};let i=Fc.fromPoints(t,n);return(o,r)=>i.projectPointsOntoPlane(o,r)}function $ae(e,t,n,i){return(o,r)=>!i&&(e.height>=S.PI_OVER_TWO||e.width>=2*S.PI_OVER_THREE)?Yn.splitPolygonsOnEquator(o,t,n,r):o}function ese(e,t,n,i){if(t.height>=S.PI||t.width>=S.PI)return oi.fromRectangle(t,void 0,sk);let o=e,r=Fc.fromPoints(o,n);return Yn.computeBoundingRectangle(r.plane.normal,r.projectPointOntoPlane.bind(r),o,i,sk)}rc.createGeometry=function(e){let t=e._vertexFormat,n=e._ellipsoid,i=e._granularity,o=e._stRotation,r=e._polygonHierarchy,a=e._perPositionHeight,s=e._closeTop,A=e._closeBottom,l=e._arcType,d=e._textureCoordinates,m=c(d),p=r.positions;if(p.length<3)return;let g=e.rectangle,h=Yn.polygonsFromHierarchy(r,m,Xae(g,p,n),!a,n,$ae(g,n,l,a)),C=h.hierarchy,_=h.polygons,I=function(B){return B},b=m?Yn.polygonsFromHierarchy(d,!0,I,!1,n).polygons:void 0;if(C.length===0)return;let x=C[0].outerRing,T=ese(x,g,n,o),w=[],R=e._height,z=e._extrudedHeight,M=e._perPositionHeightExtrude||!S.equalsEpsilon(R,z,0,S.EPSILON2),N={perPositionHeight:a,vertexFormat:t,geometry:void 0,rotationAxis:Kae(g,x,n).plane.normal,projectTo2d:Zae(g,x,n),boundingRectangle:T,ellipsoid:n,stRotation:o,textureCoordinates:void 0,bottom:!1,top:!0,wall:!1,extrude:!1,arcType:l},O;if(M)for(N.extrude=!0,N.top=s,N.bottom=A,N.shadowVolume=e._shadowVolume,N.offsetAttribute=e._offsetAttribute,O=0;O<_.length;O++){let B=zae(n,_[O],m?b[O]:void 0,i,C[O],a,s,A,t,l),D;s&&A?(D=B.topAndBottom,N.geometry=Yn.scaleToGeodeticHeightExtruded(D.geometry,R,z,n,a)):s?(D=B.topAndBottom,D.geometry.attributes.position.values=yr.scaleToGeodeticHeight(D.geometry.attributes.position.values,R,n,!a),N.geometry=D.geometry):A&&(D=B.topAndBottom,D.geometry.attributes.position.values=yr.scaleToGeodeticHeight(D.geometry.attributes.position.values,z,n,!0),N.geometry=D.geometry),(s||A)&&(N.wall=!1,D.geometry=sT(N),w.push(D));let v=B.walls;N.wall=!0;for(let F=0;F<v.length;F++){let P=v[F];N.geometry=Yn.scaleToGeodeticHeightExtruded(P.geometry,R,z,n,a),P.geometry=sT(N),w.push(P)}}else for(O=0;O<_.length;O++){let B=new tn({geometry:Yn.createGeometryFromPositions(n,_[O],m?b[O]:void 0,i,a,t,l)});if(B.geometry.attributes.position.values=yr.scaleToGeodeticHeight(B.geometry.attributes.position.values,R,n,!a),N.geometry=B.geometry,B.geometry=sT(N),c(e._offsetAttribute)){let D=B.geometry.attributes.position.values.length,v=e._offsetAttribute===Pr.NONE?0:1,F=new Uint8Array(D/3).fill(v);B.geometry.attributes.applyOffset=new rt({componentDatatype:V.UNSIGNED_BYTE,componentsPerAttribute:1,values:F})}w.push(B)}let u=li.combineInstances(w)[0];u.attributes.position.values=new Float64Array(u.attributes.position.values),u.indices=Ge.createTypedArray(u.attributes.position.values.length/3,u.indices);let E=u.attributes,y=le.fromVertices(E.position.values);return t.position||delete E.position,new Dt({attributes:E,indices:u.indices,primitiveType:u.primitiveType,boundingSphere:y,offsetAttribute:e._offsetAttribute})};rc.createShadowVolume=function(e,t,n){let i=e._granularity,o=e._ellipsoid,r=t(i,o),a=n(i,o);return new rc({polygonHierarchy:e._polygonHierarchy,ellipsoid:o,stRotation:e._stRotation,granularity:i,perPositionHeight:!1,extrudedHeight:r,height:a,vertexFormat:Bt.POSITION_ONLY,shadowVolume:!0,arcType:e._arcType})};function tse(e){let t=-e._stRotation;if(t===0)return[0,0,0,1,1,0];let n=e._ellipsoid,i=e._polygonHierarchy.positions,o=e.rectangle;return Dt._textureCoordinateRotationPoints(i,t,n,o)}Object.defineProperties(rc.prototype,{rectangle:{get:function(){if(!c(this._rectangle)){let e=this._polygonHierarchy.positions;this._rectangle=rc.computeRectangleFromPositions(e,this._ellipsoid,this._arcType)}return this._rectangle}},textureCoordinateRotationPoints:{get:function(){return c(this._textureCoordinateRotationPoints)||(this._textureCoordinateRotationPoints=tse(this)),this._textureCoordinateRotationPoints}}});var Lg=rc;function yd(e){this._ellipsoid=e.ellipsoid??pe.default,this._positions=[...e.positions]}Object.defineProperties(yd.prototype,{length:{get:function(){return this._positions.length}},positions:{get:function(){return this._positions}},ellipsoid:{get:function(){return this._ellipsoid}}});yd.clone=function(e,t){return c(t)?(t._ellipsoid=e.ellipsoid,t._positions.length=0,t._positions.push(...e.positions),t):new yd({positions:e.positions,ellipsoid:e.ellipsoid})};yd.equals=function(e,t){return e.ellipsoid.equals(t.ellipsoid)&&e.positions===t.positions};yd.prototype.computeRectangle=function(e){return Lg.computeRectangleFromPositions(this.positions,this.ellipsoid,void 0,e)};var nse=new de,dk=new f;yd.prototype.computeSphericalExtents=function(e){c(e)||(e=new de);let t=this.computeRectangle(nse),n=ue.toCartesian(de.southwest(t),this.ellipsoid,dk),i=Math.sqrt(n.x*n.x+n.y*n.y),o=S.fastApproximateAtan2(i,n.z),r=S.fastApproximateAtan2(n.x,n.y);return e.south=o,e.west=r,n=ue.toCartesian(de.northeast(t),this.ellipsoid,dk),i=Math.sqrt(n.x*n.x+n.y*n.y),o=S.fastApproximateAtan2(i,n.z),r=S.fastApproximateAtan2(n.x,n.y),e.north=o,e.east=r,e};var cT=yd;var hk=`in vec2 v_textureCoordinates;

uniform int u_polygonsLength;
uniform int u_extentsLength;
uniform highp sampler2D u_polygonTexture;
uniform highp sampler2D u_extentsTexture;

int getPolygonIndex(float dimension, vec2 coord) {
   vec2 uv = coord.xy * dimension;
   return int(floor(uv.y) * dimension + floor(uv.x));
}

vec2 getLookupUv(ivec2 dimensions, int i) {
    int pixY = i / dimensions.x;
    int pixX = i - (pixY * dimensions.x);
    float pixelWidth = 1.0 / float(dimensions.x);
    float pixelHeight = 1.0 / float(dimensions.y);
    float u = (float(pixX) + 0.5) * pixelWidth; // sample from center of pixel
    float v = (float(pixY) + 0.5) * pixelHeight;
    return vec2(u, v);
}

vec4 getExtents(int i) {
    return texture(u_extentsTexture, getLookupUv(textureSize(u_extentsTexture, 0), i));
}

ivec2 getPositionsLengthAndExtentsIndex(int i) {
    vec2 uv = getLookupUv(textureSize(u_polygonTexture, 0), i);
    vec4 value = texture(u_polygonTexture, uv);
    return ivec2(int(value.x), int(value.y));
}

vec2 getPolygonPosition(int i) {
    vec2 uv = getLookupUv(textureSize(u_polygonTexture, 0), i);
    return texture(u_polygonTexture, uv).xy;
}

vec2 getCoordinates(vec2 textureCoordinates, vec4 extents) {
    float latitude = mix(extents.x, extents.x + 1.0 / extents.z, textureCoordinates.y);
    float longitude = mix(extents.y, extents.y + 1.0 / extents.w, textureCoordinates.x);
    return vec2(latitude, longitude);
}

void main() {
    int lastPolygonIndex = 0;
    out_FragColor = vec4(1.0);

    // Get the relevant region of the texture
    float dimension = float(u_extentsLength);
    if (u_extentsLength > 2) {
        dimension = ceil(log2(float(u_extentsLength)));
    }
    int regionIndex = getPolygonIndex(dimension, v_textureCoordinates);

    for (int polygonIndex = 0; polygonIndex < u_polygonsLength; polygonIndex++) {
        ivec2 positionsLengthAndExtents = getPositionsLengthAndExtentsIndex(lastPolygonIndex);
        int positionsLength = positionsLengthAndExtents.x;
        int polygonExtentsIndex = positionsLengthAndExtents.y;
        lastPolygonIndex += 1;

         // Only compute signed distance for the relevant part of the atlas
         if (polygonExtentsIndex == regionIndex) {
            float clipAmount = czm_infinity;
            vec4 extents = getExtents(polygonExtentsIndex);
            vec2 textureOffset = vec2(mod(float(polygonExtentsIndex), dimension), floor(float(polygonExtentsIndex) / dimension)) / dimension;
            vec2 p = getCoordinates((v_textureCoordinates - textureOffset) * dimension, extents);
            float s = 1.0;

            // Check each edge for absolute distance
            for (int i = 0, j = positionsLength - 1; i < positionsLength; j = i, i++) {
                vec2 a = getPolygonPosition(lastPolygonIndex + i);
                vec2 b = getPolygonPosition(lastPolygonIndex + j);
 
                vec2 ab = b - a;
                vec2 pa = p - a;
                float t = dot(pa, ab) / dot(ab, ab);
                t = clamp(t, 0.0, 1.0);

                vec2 pq = pa - t * ab;
                float d = length(pq);

                // Inside / outside computation to determine sign
                bvec3 cond = bvec3(p.y >= a.y, 
                            p.y < b.y, 
                            ab.x * pa.y > ab.y * pa.x);
                if (all(cond) || all(not(cond))) s = -s;
                if (abs(d) < abs(clipAmount)) {
                    clipAmount = d;
                }
            }

            // Normalize the range to [0,1]
            vec4 result = (s * vec4(clipAmount * length(extents.zw))) / 2.0 + 0.5;
            // In the case where we've iterated through multiple polygons, take the minimum
            out_FragColor = min(out_FragColor, result);
         }

        lastPolygonIndex += positionsLength;
    }
}`;function So(e){e=e??G.EMPTY_OBJECT,this._polygons=[],this._totalPositions=0,this.enabled=e.enabled??!0,this.inverse=e.inverse??!1,this.polygonAdded=new Le,this.polygonRemoved=new Le,this._owner=void 0,this._float32View=void 0,this._extentsFloat32View=void 0,this._extentsCount=0,this._polygonsTexture=void 0,this._extentsTexture=void 0,this._signedDistanceTexture=void 0,this._signedDistanceComputeCommand=void 0;let t=e.polygons;if(c(t)){let n=t.length;for(let i=0;i<n;++i)this._polygons.push(t[i])}}Object.defineProperties(So.prototype,{length:{get:function(){return this._polygons.length}},totalPositions:{get:function(){return this._totalPositions}},extentsTexture:{get:function(){return this._extentsTexture}},extentsCount:{get:function(){return this._extentsCount}},pixelsNeededForExtents:{get:function(){return this.length}},pixelsNeededForPolygonPositions:{get:function(){return this.totalPositions+this.length}},clippingTexture:{get:function(){return this._signedDistanceTexture}},owner:{get:function(){return this._owner}},clippingPolygonsState:{get:function(){return this.inverse?-this.extentsCount:this.extentsCount}}});So.prototype.add=function(e){let t=this._polygons.length;return this._polygons.push(e),this.polygonAdded.raiseEvent(e,t),e};So.prototype.get=function(e){return this._polygons[e]};So.prototype.contains=function(e){return this._polygons.some(t=>cT.equals(t,e))};So.prototype.remove=function(e){let t=this._polygons,n=t.findIndex(i=>cT.equals(i,e));return n===-1?!1:(t.splice(n,1),this.polygonRemoved.raiseEvent(e,n),!0)};var ise=new de;function ose(e){let t=[],n=[],i=e.length;for(let r=0;r<i;++r){let s=e[r].computeSphericalExtents(),A=Math.max(s.height*2.5,.001),l=Math.max(s.width*2.5,.001),d=de.clone(s);d.south-=A,d.west-=l,d.north+=A,d.east+=l,d.south=Math.max(d.south,-Math.PI),d.west=Math.max(d.west,-Math.PI),d.north=Math.min(d.north,Math.PI),d.east=Math.min(d.east,Math.PI);let m=[r];for(let p=0;p<t.length;++p){let g=t[p];if(c(g)&&c(de.simpleIntersection(g,d))&&!de.equals(g,d)){let h=n[p];m.push(...h),h.reduce((C,_)=>de.union(e[_].computeSphericalExtents(ise),C,C),s),t[p]=void 0,n[p]=void 0,A=Math.max(s.height*2.5,.001),l=Math.max(s.width*2.5,.001),d=de.clone(s,d),d.south-=A,d.west-=l,d.north+=A,d.east+=l,d.south=Math.max(d.south,-Math.PI),d.west=Math.max(d.west,-Math.PI),d.north=Math.min(d.north,Math.PI),d.east=Math.min(d.east,Math.PI),p=-1}}t.push(d),n.push(m)}let o=new Map;return n.filter(c).forEach((r,a)=>r.forEach(s=>o.set(s,a))),{extentsList:t.filter(c),extentsIndexByPolygon:o}}So.prototype.removeAll=function(){let e=this._polygons,t=e.length;for(let n=0;n<t;++n){let i=e[n];this.polygonRemoved.raiseEvent(i,n)}this._polygons=[]};function rse(e){let t=e._float32View,n=e._extentsFloat32View,i=e._polygons,{extentsList:o,extentsIndexByPolygon:r}=ose(i),a=0;for(let[A,l]of i.entries()){let d=l.length;t[a++]=d,t[a++]=r.get(A);for(let m=0;m<d;++m){let p=l.positions[m],g=Math.hypot(p.x,p.y),h=S.fastApproximateAtan2(g,p.z),C=S.fastApproximateAtan2(p.x,p.y);t[a++]=h,t[a++]=C}}let s=0;for(let A of o){let l=1/(A.east-A.west),d=1/(A.north-A.south);n[s++]=A.south,n[s++]=A.west,n[s++]=d,n[s++]=l}e._extentsCount=o.length}var AT=new L;So.prototype.update=function(e){let t=e.context;if(!So.isSupported(e))throw new ae("ClippingPolygonCollections are only supported for WebGL 2.");let n=this._polygons.reduce((a,s)=>a+s.length,0);if(n===this.totalPositions||(this._totalPositions=n,this.length===0))return;c(this._signedDistanceComputeCommand)&&(this._signedDistanceComputeCommand.canceled=!0,this._signedDistanceComputeCommand=void 0);let i=this._polygonsTexture,o=this._extentsTexture,r=this._signedDistanceTexture;if(c(i)){let a=i.width*i.height;(a<this.pixelsNeededForPolygonPositions||this.pixelsNeededForPolygonPositions<.25*a)&&(i.destroy(),i=void 0,this._polygonsTexture=void 0)}if(!c(i)){let a=So.getTextureResolution(i,this.pixelsNeededForPolygonPositions,AT);i=new on({context:t,width:a.x,height:a.y,pixelFormat:_t.RG,pixelDatatype:mt.FLOAT,sampler:nn.NEAREST,flipY:!1}),this._float32View=new Float32Array(a.x*a.y*2),this._polygonsTexture=i}if(c(o)){let a=o.width*o.height;(a<this.pixelsNeededForExtents||this.pixelsNeededForExtents<.25*a)&&(o.destroy(),o=void 0,this._extentsTexture=void 0)}if(!c(o)){let a=So.getTextureResolution(o,this.pixelsNeededForExtents,AT);o=new on({context:t,width:a.x,height:a.y,pixelFormat:_t.RGBA,pixelDatatype:mt.FLOAT,sampler:nn.NEAREST,flipY:!1}),this._extentsFloat32View=new Float32Array(a.x*a.y*4),this._extentsTexture=o}if(rse(this),o.copyFrom({source:{width:o.width,height:o.height,arrayBufferView:this._extentsFloat32View}}),i.copyFrom({source:{width:i.width,height:i.height,arrayBufferView:this._float32View}}),!c(r)){let a=So.getClippingDistanceTextureResolution(this,AT);r=new on({context:t,width:a.x,height:a.y,pixelFormat:t.webgl2?_t.RED:_t.LUMINANCE,pixelDatatype:mt.FLOAT,sampler:new nn({wrapS:ei.CLAMP_TO_EDGE,wrapT:ei.CLAMP_TO_EDGE,minificationFilter:Wt.LINEAR,magnificationFilter:yo.LINEAR}),flipY:!1}),this._signedDistanceTexture=r}this._signedDistanceComputeCommand=ase(this)};So.prototype.queueCommands=function(e){c(this._signedDistanceComputeCommand)&&e.commandList.push(this._signedDistanceComputeCommand)};function ase(e){let t=e._polygonsTexture,n=e._extentsTexture;return new pu({fragmentShaderSource:hk,outputTexture:e._signedDistanceTexture,uniformMap:{u_polygonsLength:function(){return e.length},u_extentsLength:function(){return e.extentsCount},u_extentsTexture:function(){return n},u_polygonTexture:function(){return t}},persists:!1,owner:e,postExecute:()=>{e._signedDistanceComputeCommand=void 0}})}var mk=new de,sse=new de;So.prototype.computeIntersectionWithBoundingVolume=function(e,t){let n=this._polygons,i=n.length,o=bt.OUTSIDE;this.inverse&&(o=bt.INSIDE);for(let r=0;r<i;++r){let s=n[r].computeRectangle(),A=e.rectangle;if(!c(A)&&c(e.boundingVolume?.computeCorners)){let d=e.boundingVolume.computeCorners();A=de.fromCartesianArray(d,t,mk)}c(A)||(A=de.fromBoundingSphere(e.boundingSphere,t,mk));let l=de.simpleIntersection(A,s,sse);c(l)&&(o=bt.INTERSECTING)}return o};So.setOwner=function(e,t,n){e!==t[n]&&(t[n]=t[n]&&t[n].destroy(),c(e)&&(e._owner=t,t[n]=e))};So.isSupported=function(e){return e?.context.webgl2};So.getTextureResolution=function(e,t,n){if(c(e))return n.x=e.width,n.y=e.height,n;let i=rn.maximumTextureSize;return n.x=Math.min(t,i),n.y=Math.ceil(t/n.x),n.y*=2,n};So.getClippingDistanceTextureResolution=function(e,t){let n=e.signedDistanceTexture;return c(n)?(t.x=n.width,t.y=n.height,t):(t.x=Math.min(rn.maximumTextureSize,4096),t.y=Math.min(rn.maximumTextureSize,4096),t)};So.getClippingExtentsTextureResolution=function(e,t){let n=e.extentsTexture;return c(n)?(t.x=n.width,t.y=n.height,t):So.getTextureResolution(n,e.pixelsNeededForExtents,t)};So.prototype.isDestroyed=function(){return!1};So.prototype.destroy=function(){return c(this._signedDistanceComputeCommand)&&(this._signedDistanceComputeCommand.canceled=!0),this._polygonsTexture=this._polygonsTexture&&this._polygonsTexture.destroy(),this._extentsTexture=this._extentsTexture&&this._extentsTexture.destroy(),this._signedDistanceTexture=this._signedDistanceTexture&&this._signedDistanceTexture.destroy(),me(this)};var ef=So;var Fg={NONE:0,SCENE_LIGHT:1,SUNLIGHT:2};Fg.fromGlobeFlags=function(e){return e.enableLighting&&e.dynamicAtmosphereLighting?e.dynamicAtmosphereLightingFromSun?Fg.SUNLIGHT:Fg.SCENE_LIGHT:Fg.NONE};var wI=Object.freeze(Fg);function pk(){this.lightIntensity=10,this.rayleighCoefficient=new f(55e-7,13e-6,284e-7),this.mieCoefficient=new f(21e-6,21e-6,21e-6),this.rayleighScaleHeight=1e4,this.mieScaleHeight=3200,this.mieAnisotropy=.9,this.hueShift=0,this.saturationShift=0,this.brightnessShift=0,this.dynamicLighting=wI.NONE}pk.requiresColorCorrect=function(e){return!(S.equalsEpsilon(e.hueShift,0,S.EPSILON7)&&S.equalsEpsilon(e.saturationShift,0,S.EPSILON7)&&S.equalsEpsilon(e.brightnessShift,0,S.EPSILON7))};var gk=pk;var Ck=`uniform vec3 u_radiiAndDynamicAtmosphereColor;

uniform float u_atmosphereLightIntensity;
uniform float u_atmosphereRayleighScaleHeight;
uniform float u_atmosphereMieScaleHeight;
uniform float u_atmosphereMieAnisotropy;
uniform vec3 u_atmosphereRayleighCoefficient;
uniform vec3 u_atmosphereMieCoefficient;

const float ATMOSPHERE_THICKNESS = 111e3; // The thickness of the atmosphere in meters.
const int PRIMARY_STEPS_MAX = 16; // Maximum number of times the ray from the camera to the world position (primary ray) is sampled.
const int LIGHT_STEPS_MAX = 4; // Maximum number of times the light is sampled from the light source's intersection with the atmosphere to a sample position on the primary ray.

/**
 * This function computes the colors contributed by Rayliegh and Mie scattering on a given ray, as well as
 * the transmittance value for the ray.
 *
 * @param {czm_ray} primaryRay The ray from the camera to the position.
 * @param {float} primaryRayLength The length of the primary ray.
 * @param {vec3} lightDirection The direction of the light to calculate the scattering from.
 * @param {vec3} rayleighColor The variable the Rayleigh scattering will be written to.
 * @param {vec3} mieColor The variable the Mie scattering will be written to.
 * @param {float} opacity The variable the transmittance will be written to.
 * @glslFunction
 */
void computeScattering(
    czm_ray primaryRay,
    float primaryRayLength,
    vec3 lightDirection,
    float atmosphereInnerRadius,
    out vec3 rayleighColor,
    out vec3 mieColor,
    out float opacity
) {

    // Initialize the default scattering amounts to 0.
    rayleighColor = vec3(0.0);
    mieColor = vec3(0.0);
    opacity = 0.0;

    float atmosphereOuterRadius = atmosphereInnerRadius + ATMOSPHERE_THICKNESS;

    vec3 origin = vec3(0.0);

    // Calculate intersection from the camera to the outer ring of the atmosphere.
    czm_raySegment primaryRayAtmosphereIntersect = czm_raySphereIntersectionInterval(primaryRay, origin, atmosphereOuterRadius);

    // Return empty colors if no intersection with the atmosphere geometry.
    if (primaryRayAtmosphereIntersect == czm_emptyRaySegment) {
        return;
    }

    // To deal with smaller values of PRIMARY_STEPS (e.g. 4)
    // we implement a split strategy: sky or horizon.
    // For performance reasons, instead of a if/else branch
    // a soft choice is implemented through a weight 0.0 <= w_stop_gt_lprl <= 1.0
    float x = 1e-7 * primaryRayAtmosphereIntersect.stop / length(primaryRayLength);
    // Value close to 0.0: close to the horizon
    // Value close to 1.0: above in the sky
    float w_stop_gt_lprl = 0.5 * (1.0 + czm_approximateTanh(x));

    // The ray should start from the first intersection with the outer atmopshere, or from the camera position, if it is inside the atmosphere.
    float start_0 = primaryRayAtmosphereIntersect.start;
    primaryRayAtmosphereIntersect.start = max(primaryRayAtmosphereIntersect.start, 0.0);
    // The ray should end at the exit from the atmosphere or at the distance to the vertex, whichever is smaller.
    primaryRayAtmosphereIntersect.stop = min(primaryRayAtmosphereIntersect.stop, length(primaryRayLength));

    // For the number of ray steps, distinguish inside or outside atmosphere (outer space)
    // (1) from outer space we have to use more ray steps to get a realistic rendering
    // (2) within atmosphere we need fewer steps for faster rendering
    float x_o_a = start_0 - ATMOSPHERE_THICKNESS; // ATMOSPHERE_THICKNESS used as an ad-hoc constant, no precise meaning here, only the order of magnitude matters
    float w_inside_atmosphere = 1.0 - 0.5 * (1.0 + czm_approximateTanh(x_o_a));
    int PRIMARY_STEPS = PRIMARY_STEPS_MAX - int(w_inside_atmosphere * 12.0); // Number of times the ray from the camera to the world position (primary ray) is sampled.
    int LIGHT_STEPS = LIGHT_STEPS_MAX - int(w_inside_atmosphere * 2.0); // Number of times the light is sampled from the light source's intersection with the atmosphere to a sample position on the primary ray.

    // Setup for sampling positions along the ray - starting from the intersection with the outer ring of the atmosphere.
    float rayPositionLength = primaryRayAtmosphereIntersect.start;
    // (1) Outside the atmosphere: constant rayStepLength
    // (2) Inside atmosphere: variable rayStepLength to compensate the rough rendering of the smaller number of ray steps
    float totalRayLength = primaryRayAtmosphereIntersect.stop - rayPositionLength;
    float rayStepLengthIncrease = w_inside_atmosphere * ((1.0 - w_stop_gt_lprl) * totalRayLength / (float(PRIMARY_STEPS * (PRIMARY_STEPS + 1)) / 2.0));
    float rayStepLength = max(1.0 - w_inside_atmosphere, w_stop_gt_lprl) * totalRayLength / max(7.0 * w_inside_atmosphere, float(PRIMARY_STEPS));

    vec3 rayleighAccumulation = vec3(0.0);
    vec3 mieAccumulation = vec3(0.0);
    vec2 opticalDepth = vec2(0.0);
    vec2 heightScale = vec2(u_atmosphereRayleighScaleHeight, u_atmosphereMieScaleHeight);

    // Sample positions on the primary ray.
    for (int i = 0; i < PRIMARY_STEPS_MAX; ++i) {

        // The loop should be: for (int i = 0; i < PRIMARY_STEPS; ++i) {...} but WebGL1 cannot
        // loop with non-constant condition, so it has to break early instead
        if (i >= PRIMARY_STEPS) {
            break;
        }

        // Calculate sample position along viewpoint ray.
        vec3 samplePosition = primaryRay.origin + primaryRay.direction * (rayPositionLength + rayStepLength);

        // Calculate height of sample position above ellipsoid.
        float sampleHeight = length(samplePosition) - atmosphereInnerRadius;

        // Calculate and accumulate density of particles at the sample position.
        vec2 sampleDensity = exp(-sampleHeight / heightScale) * rayStepLength;
        opticalDepth += sampleDensity;

        // Generate ray from the sample position segment to the light source, up to the outer ring of the atmosphere.
        czm_ray lightRay = czm_ray(samplePosition, lightDirection);
        czm_raySegment lightRayAtmosphereIntersect = czm_raySphereIntersectionInterval(lightRay, origin, atmosphereOuterRadius);

        float lightStepLength = lightRayAtmosphereIntersect.stop / float(LIGHT_STEPS);
        float lightPositionLength = 0.0;

        vec2 lightOpticalDepth = vec2(0.0);

        // Sample positions along the light ray, to accumulate incidence of light on the latest sample segment.
        for (int j = 0; j < LIGHT_STEPS_MAX; ++j) {

            // The loop should be: for (int j = 0; i < LIGHT_STEPS; ++j) {...} but WebGL1 cannot
            // loop with non-constant condition, so it has to break early instead
            if (j >= LIGHT_STEPS) {
                break;
            }

            // Calculate sample position along light ray.
            vec3 lightPosition = samplePosition + lightDirection * (lightPositionLength + lightStepLength * 0.5);

            // Calculate height of the light sample position above ellipsoid.
            float lightHeight = length(lightPosition) - atmosphereInnerRadius;

            // Calculate density of photons at the light sample position.
            lightOpticalDepth += exp(-lightHeight / heightScale) * lightStepLength;

            // Increment distance on light ray.
            lightPositionLength += lightStepLength;
        }

        // Compute attenuation via the primary ray and the light ray.
        vec3 attenuation = exp(-((u_atmosphereMieCoefficient * (opticalDepth.y + lightOpticalDepth.y)) + (u_atmosphereRayleighCoefficient * (opticalDepth.x + lightOpticalDepth.x))));

        // Accumulate the scattering.
        rayleighAccumulation += sampleDensity.x * attenuation;
        mieAccumulation += sampleDensity.y * attenuation;

        // Increment distance on primary ray.
        rayPositionLength += (rayStepLength += rayStepLengthIncrease);
    }

    // Compute the scattering amount.
    rayleighColor = u_atmosphereRayleighCoefficient * rayleighAccumulation;
    mieColor = u_atmosphereMieCoefficient * mieAccumulation;

    // Compute the transmittance i.e. how much light is passing through the atmosphere.
    opacity = length(exp(-((u_atmosphereMieCoefficient * opticalDepth.y) + (u_atmosphereRayleighCoefficient * opticalDepth.x))));
}

vec4 computeAtmosphereColor(
    vec3 positionWC,
    vec3 lightDirection,
    vec3 rayleighColor,
    vec3 mieColor,
    float opacity
) {
    // Setup the primary ray: from the camera position to the vertex position.
    vec3 cameraToPositionWC = positionWC - czm_viewerPositionWC;
    vec3 cameraToPositionWCDirection = normalize(cameraToPositionWC);

    float cosAngle = dot(cameraToPositionWCDirection, lightDirection);
    float cosAngleSq = cosAngle * cosAngle;

    float G = u_atmosphereMieAnisotropy;
    float GSq = G * G;

    // The Rayleigh phase function.
    float rayleighPhase = 3.0 / (50.2654824574) * (1.0 + cosAngleSq);
    // The Mie phase function.
    float miePhase = 3.0 / (25.1327412287) * ((1.0 - GSq) * (cosAngleSq + 1.0)) / (pow(1.0 + GSq - 2.0 * cosAngle * G, 1.5) * (2.0 + GSq));

    // The final color is generated by combining the effects of the Rayleigh and Mie scattering.
    vec3 rayleigh = rayleighPhase * rayleighColor;
    vec3 mie = miePhase * mieColor;

    vec3 color = (rayleigh + mie) * u_atmosphereLightIntensity;

    return vec4(color, opacity);
}
`;var Ek=`uniform samplerCube u_radianceMap;

in vec2 v_textureCoordinates;


const float twoSqrtPi = 2.0 * sqrt(czm_pi);

// Coutesy of https://www.ppsloan.org/publications/StupidSH36.pdf
float computeShBasis(int index, vec3 s) {
    if (index == 0) { // l = 0, m = 0
        return 1.0 / twoSqrtPi;
    }
    
    if (index == 1) { // l = 1, m = -1
        return -sqrt(3.0) * s.y / twoSqrtPi;
    }

    if (index == 2) { // l = 1, m = 0
        return sqrt(3.0) * s.z / twoSqrtPi;
    }

    if (index == 3) { // l = 1, m = 1
        return -sqrt(3.0) * s.x / twoSqrtPi;
    }

    if (index == 4) { // l = 2, m = -2
        return sqrt(15.0) * s.y * s.x / twoSqrtPi;
    }

    if (index == 5) { // l = 2, m = -1
        return -sqrt(15.0) * s.y * s.z / twoSqrtPi;
    }

    if (index == 6) { // l = 2, m = 0
        return sqrt(5.0) * (3.0 * s.z * s.z - 1.0) / 2.0 / twoSqrtPi;
    }

    if (index == 7) { // l = 2, m = 1
        return -sqrt(15.0) * s.x * s.z / twoSqrtPi;
    }

    if (index == 8) { // l = 2, m = 2
        return sqrt(15.0) * (s.x * s.x - s.y * s.y) / 2.0 / twoSqrtPi;
    }

    return 0.0;
}

float vdcRadicalInverse(int i)
{
    float r;
    float base = 2.0;
    float value = 0.0;
    float invBase = 1.0 / base;
    float invBi = invBase;
    for (int x = 0; x < 100; x++)
    {
        if (i <= 0)
        {
            break;
        }
        r = mod(float(i), base);
        value += r * invBi;
        invBi *= invBase;
        i = int(float(i) * invBase);
    }
    return value;
}

vec2 hammersley2D(int i, int N)
{
    return vec2(float(i) / float(N), vdcRadicalInverse(i));
}

// Sample count is relatively low for the sake of performance, but should still be enough to capture directionality needed for third-order harmonics
const int samples = 256; 
const float solidAngle = 1.0 / float(samples);

void main() {
    // Get the current coefficient based on the uv
   vec2 uv = v_textureCoordinates.xy * 3.0;
   int coefficientIndex = int(floor(uv.y) * 3.0 + floor(uv.x));

    for (int i = 0; i < samples; ++i) {
        vec2 xi = hammersley2D(i, samples);
        float phi = czm_twoPi * xi.x;
        float cosTheta = 1.0 - 2.0 * sqrt(1.0 - xi.y * xi.y);
        float sinTheta = sqrt(1.0 - cosTheta * cosTheta);
        vec3 direction = normalize(vec3(sinTheta * cos(phi), cosTheta, sinTheta * sin(phi)));

        // Generate the spherical harmonics basis from the direction
        float Ylm = computeShBasis(coefficientIndex, direction);

        vec3 lookupDirection = -direction.xyz;
        lookupDirection.z = -lookupDirection.z;

        vec4 color = czm_textureCube(u_radianceMap, lookupDirection, 0.0);

        // Use the relevant function for this coefficient
        out_FragColor += Ylm * color * solidAngle * sinTheta;
    }
    
}
`;var _k=`precision highp float;

in vec2 v_textureCoordinates;

uniform vec3 u_faceDirection; // Current cubemap face
uniform vec3 u_positionWC;
uniform mat4 u_enuToFixedFrame;
uniform vec4 u_brightnessSaturationGammaIntensity;
uniform vec4 u_groundColor; // alpha component represent albedo

vec4 getCubeMapDirection(vec2 uv, vec3 faceDir) {
    vec2 scaledUV = uv * 2.0 - 1.0;

    if (faceDir.x != 0.0) {
        return vec4(faceDir.x,  scaledUV.x * faceDir.x, -scaledUV.y, 0.0);
    } else if (faceDir.y != 0.0) {
        return vec4(scaledUV.x, -scaledUV.y * faceDir.y, faceDir.y, 0.0);
    } else {
        return vec4(scaledUV.x * faceDir.z, -faceDir.z, -scaledUV.y, 0.0); 
    }
}

void main() {    
    float height = length(u_positionWC);
    float atmosphereInnerRadius = u_radiiAndDynamicAtmosphereColor.y;
    float ellipsoidHeight = max(height - atmosphereInnerRadius, 0.0);

    // Scale the position to ensure the sky color is present, even when underground.
    vec3 positionWC = u_positionWC / height * (ellipsoidHeight + atmosphereInnerRadius);

    float atmosphereOuterRadius = u_radiiAndDynamicAtmosphereColor.x;
    float atmosphereHeight = atmosphereOuterRadius - atmosphereInnerRadius;

    vec3 direction = (u_enuToFixedFrame * getCubeMapDirection(v_textureCoordinates, u_faceDirection)).xyz;
    vec3 normalizedDirection = normalize(direction);

    czm_ray ray = czm_ray(positionWC, normalizedDirection);
    czm_raySegment intersection = czm_raySphereIntersectionInterval(ray, vec3(0.0), atmosphereInnerRadius);
    if (!czm_isEmpty(intersection)) {
        intersection = czm_rayEllipsoidIntersectionInterval(ray, vec3(0.0), czm_ellipsoidInverseRadii);
    }

    bool onEllipsoid = intersection.start >= 0.0;
    float rayLength = czm_branchFreeTernary(onEllipsoid, intersection.start, atmosphereOuterRadius);

    // Compute sky color for each position on a sphere at radius centered around the provided position's origin
    vec3 skyPositionWC = positionWC + normalizedDirection * rayLength;

    float lightEnum = u_radiiAndDynamicAtmosphereColor.z;
    vec3 lightDirectionWC = normalize(czm_getDynamicAtmosphereLightDirection(skyPositionWC, lightEnum));
    vec3 mieColor;
    vec3 rayleighColor;
    float opacity;
    czm_computeScattering(
        ray,
        rayLength,
        lightDirectionWC,
        atmosphereInnerRadius, 
        rayleighColor,
        mieColor,
        opacity
    );

    vec4 atmopshereColor = czm_computeAtmosphereColor(ray, lightDirectionWC, rayleighColor, mieColor, opacity);

#ifdef ATMOSPHERE_COLOR_CORRECT
    const bool ignoreBlackPixels = true;
    atmopshereColor.rgb = czm_applyHSBShift(atmopshereColor.rgb, czm_atmosphereHsbShift, ignoreBlackPixels);
#endif

    vec3 lookupDirection = -normalizedDirection;
     // Flipping the X vector is a cheap way to get the inverse of czm_temeToPseudoFixed, since that's a rotation about Z.
    lookupDirection.x = -lookupDirection.x;
    lookupDirection = -normalize(czm_temeToPseudoFixed * lookupDirection);
    lookupDirection.x = -lookupDirection.x;

    // Values outside the atmopshere are rendered as black, when they should be treated as transparent
    float skyAlpha = clamp((1.0 - ellipsoidHeight / atmosphereHeight) * atmopshereColor.a, 0.0, 1.0);
    skyAlpha = czm_branchFreeTernary(length(atmopshereColor.rgb) <= czm_epsilon7, 0.0, skyAlpha); // Treat black as transparent

    // Blend starmap with atmopshere scattering
    float intensity = u_brightnessSaturationGammaIntensity.w;
    vec4 sceneSkyBoxColor = czm_textureCube(czm_environmentMap, lookupDirection);
    vec3 skyBackgroundColor = mix(czm_backgroundColor.rgb, sceneSkyBoxColor.rgb, sceneSkyBoxColor.a);
    vec4 combinedSkyColor = vec4(mix(skyBackgroundColor, atmopshereColor.rgb * intensity, skyAlpha), 1.0);

    // Compute ground color based on amount of reflected light, then blend it with ground atmosphere based on height
    vec3 up = normalize(positionWC);
    float occlusion = max(dot(lightDirectionWC, up), 0.05);
    vec4 groundColor = vec4(u_groundColor.rgb * u_groundColor.a * (vec3(intensity * occlusion) + atmopshereColor.rgb), 1.0);
    vec4 blendedGroundColor = mix(groundColor, atmopshereColor, clamp(ellipsoidHeight / atmosphereHeight, 0.0, 1.0));

    vec4 color = czm_branchFreeTernary(onEllipsoid, blendedGroundColor, combinedSkyColor);

    float brightness = u_brightnessSaturationGammaIntensity.x;
    float saturation = u_brightnessSaturationGammaIntensity.y;
    float gamma = u_brightnessSaturationGammaIntensity.z;

#ifdef ENVIRONMENT_COLOR_CORRECT
    color.rgb = mix(vec3(0.0), color.rgb, brightness);
    color.rgb = czm_saturation(color.rgb, saturation);
#endif
    color.rgb = pow(color.rgb, vec3(gamma)); // Normally this would be in the ifdef above, but there is a precision issue with the atmopshere scattering transmittance (alpha). Having this line is a workaround for that issue, even when gamma is 1.0.
    color.rgb = czm_gammaCorrect(color.rgb);

    out_FragColor = color;
}
`;var Ik=`precision highp float;

in vec3 v_textureCoordinates;

uniform float u_roughness;
uniform samplerCube u_radianceTexture;
uniform vec3 u_faceDirection;

float vdcRadicalInverse(int i)
{
    float r;
    float base = 2.0;
    float value = 0.0;
    float invBase = 1.0 / base;
    float invBi = invBase;
    for (int x = 0; x < 100; x++)
    {
        if (i <= 0)
        {
            break;
        }
        r = mod(float(i), base);
        value += r * invBi;
        invBi *= invBase;
        i = int(float(i) * invBase);
    }
    return value;
}

vec2 hammersley2D(int i, int N)
{
    return vec2(float(i) / float(N), vdcRadicalInverse(i));
}

vec3 importanceSampleGGX(vec2 xi, float alphaRoughness, vec3 N)
{
    float alphaRoughnessSquared = alphaRoughness * alphaRoughness;
    float phi = czm_twoPi * xi.x;
    float cosTheta = sqrt((1.0 - xi.y) / (1.0 + (alphaRoughnessSquared - 1.0) * xi.y));
    float sinTheta = sqrt(1.0 - cosTheta * cosTheta);
    vec3 H = vec3(sinTheta * cos(phi), sinTheta * sin(phi), cosTheta);
    vec3 upVector = abs(N.z) < 0.999 ? vec3(0.0, 0.0, 1.0) : vec3(1.0, 0.0, 0.0);
    vec3 tangentX = normalize(cross(upVector, N));
    vec3 tangentY = cross(N, tangentX);
    return tangentX * H.x + tangentY * H.y + N * H.z;
}

// Sample count is relatively low for the sake of performance, but should still be enough to prevent artifacting in lower roughnesses
const int samples = 128;

void main() {
    vec3 normal = u_faceDirection;
    vec3 V = normalize(v_textureCoordinates);
    float roughness = u_roughness;

    vec4 color = vec4(0.0);
    float weight = 0.0;
    for (int i = 0; i < samples; ++i) {
            vec2 xi = hammersley2D(i, samples);
            vec3 H = importanceSampleGGX(xi, roughness, V);
            vec3 L = 2.0 * dot(V, H) * H - V; // reflected vector

            float NdotL = max(dot(V, L), 0.0);
            if (NdotL > 0.0) {
                color += vec4(czm_textureCube(u_radianceTexture, L).rgb, 1.0) * NdotL;
                weight += NdotL;
            }
        }
    out_FragColor = color / weight;
}
`;var yk=`in vec3 position;
out vec3 v_textureCoordinates;

uniform vec3 u_faceDirection;

vec3 getCubeMapDirection(vec2 uv, vec3 faceDir) {
    vec2 scaledUV = uv;

    if (faceDir.x != 0.0) {
        return vec3(faceDir.x, scaledUV.y, scaledUV.x * faceDir.x);
    } else if (faceDir.y != 0.0) {
        return vec3(scaledUV.x, -faceDir.y, -scaledUV.y * faceDir.y);
    } else {
        return vec3(scaledUV.x * faceDir.z, scaledUV.y, -faceDir.z); 
    }
}

void main() 
{
    v_textureCoordinates = getCubeMapDirection(position.xy, u_faceDirection);
    v_textureCoordinates.y = -v_textureCoordinates.y;
    v_textureCoordinates.z = -v_textureCoordinates.z;
    gl_Position = vec4(position, 1.0);
}
`;function an(e){this._position=void 0,this._radianceMapDirty=!1,this._radianceCommandsDirty=!1,this._convolutionsCommandsDirty=!1,this._irradianceCommandDirty=!1,this._irradianceTextureDirty=!1,this._sphericalHarmonicCoefficientsDirty=!1,this._shouldRegenerateShaders=!1,this._shouldReset=!1,e=e??G.EMPTY_OBJECT;let t=Math.min(e.mipmapLevels??7,Math.log2(rn.maximumCubeMapSize));this._mipmapLevels=t,this._radianceMapComputeCommands=new Array(6),this._convolutionComputeCommands=new Array((t-1)*6),this._irradianceComputeCommand=void 0,this._radianceMapFS=void 0,this._irradianceMapFS=void 0,this._convolveSP=void 0,this._va=void 0,this._radianceMapTextures=new Array(6),this._specularMapTextures=new Array((t-1)*6),this._radianceCubeMap=void 0,this._irradianceMapTexture=void 0,this._sphericalHarmonicCoefficients=an.DEFAULT_SPHERICAL_HARMONIC_COEFFICIENTS.slice(),this._lastTime=new Ue;let n=Math.pow(2,t-1);this._textureDimensions=new L(n,n),this._radiiAndDynamicAtmosphereColor=new f,this._sceneEnvironmentMap=void 0,this._backgroundColor=void 0,this._owner=void 0,this.enabled=e.enabled??!0,this.shouldUpdate=!0,this.maximumSecondsDifference=e.maximumSecondsDifference??3600,this.maximumPositionEpsilon=e.maximumPositionEpsilon??1e3,this.atmosphereScatteringIntensity=e.atmosphereScatteringIntensity??2,this.gamma=e.gamma??1,this.brightness=e.brightness??1,this.saturation=e.saturation??1,this.groundColor=e.groundColor??an.AVERAGE_EARTH_GROUND_COLOR,this.groundAlbedo=e.groundAlbedo??.31}Object.defineProperties(an.prototype,{owner:{get:function(){return this._owner}},shouldRegenerateShaders:{get:function(){return this._shouldRegenerateShaders}},position:{get:function(){return this._position},set:function(e){f.equalsEpsilon(e,this._position,0,this.maximumPositionEpsilon)||(this._position=f.clone(e,this._position),this._shouldReset=!0)}},radianceCubeMap:{get:function(){return this._radianceCubeMap}},maximumMipmapLevel:{get:function(){return this._mipmapLevels}},sphericalHarmonicCoefficients:{get:function(){return this._sphericalHarmonicCoefficients}}});an._maximumComputeCommandCount=8;an._activeComputeCommandCount=0;an._nextFrameCommandQueue=[];an._queueCommand=(e,t)=>{if(an._activeComputeCommandCount>=an._maximumComputeCommandCount){an._nextFrameCommandQueue.push(e);return}t.commandList.push(e),an._activeComputeCommandCount++};an._updateCommandQueue=e=>{if(an._maximumComputeCommandCount=Math.log2(rn.maximumCubeMapSize),an._nextFrameCommandQueue.length>0&&an._activeComputeCommandCount<an._maximumComputeCommandCount){let t=an._nextFrameCommandQueue.shift();for(;c(t)&&an._activeComputeCommandCount<an._maximumComputeCommandCount;){if(t.owner.isDestroyed()||t.canceled){t=an._nextFrameCommandQueue.shift();continue}e.commandList.push(t),an._activeComputeCommandCount++,t=an._nextFrameCommandQueue.shift()}c(t)&&an._nextFrameCommandQueue.push(t)}};an.setOwner=function(e,t,n){e!==t[n]&&(t[n]=t[n]&&t[n].destroy(),c(e)&&(e._owner=t,t[n]=e))};an.prototype.reset=function(){let e=this._radianceMapComputeCommands.length;for(let t=0;t<e;++t)c(this._radianceMapComputeCommands[t])&&(this._radianceMapComputeCommands[t].canceled=!0),this._radianceMapComputeCommands[t]=void 0;e=this._convolutionComputeCommands.length;for(let t=0;t<e;++t)c(this._convolutionComputeCommands[t])&&(this._convolutionComputeCommands[t].canceled=!0),this._convolutionComputeCommands[t]=void 0;c(this._irradianceComputeCommand)&&(this._irradianceComputeCommand.canceled=!0,this._irradianceComputeCommand=void 0),this._radianceMapDirty=!0,this._radianceCommandsDirty=!0,this._convolutionsCommandsDirty=!1,this._irradianceCommandDirty=!1};var cse=new f,Ase=new f;function lse(e,t){let n=e._position,i=t.atmosphere,o=t.mapProjection.ellipsoid,r=o.scaleToGeodeticSurface(n,Ase),a=1.025,s=cse,A=c(r)?f.magnitude(r):o.maximumRadius;return s.x=A*a,s.y=A,s.z=i.dynamicLighting,!f.equalsEpsilon(e._radiiAndDynamicAtmosphereColor,s)||t.environmentMap!==e._sceneEnvironmentMap||t.backgroundColor!==e._backgroundColor?(f.clone(s,e._radiiAndDynamicAtmosphereColor),e._sceneEnvironmentMap=t.environmentMap,e._backgroundColor=t.backgroundColor,!0):!1}var bk=new f,use=new Q,fse=new re,dse=new J;function hse(e,t){let n=t.context,i=e._textureDimensions;if(c(e._radianceCubeMap)||(e._radianceCubeMap=new ds({context:n,width:i.x,height:i.y,pixelDatatype:mt.UNSIGNED_BYTE,pixelFormat:_t.RGBA})),e._radianceCommandsDirty){let o=e._radianceMapFS;c(o)||(o=new It({sources:[Ck,_k]}),e._radianceMapFS=o),gk.requiresColorCorrect(t.atmosphere)&&o.defines.push("ATMOSPHERE_COLOR_CORRECT");let r=e._position,a=e._radiiAndDynamicAtmosphereColor,s=t.mapProjection.ellipsoid,A=sn.eastNorthUpToFixedFrame(r,s,use),l=fse;l.x=e.brightness,l.y=e.saturation,l.z=e.gamma,l.w=e.atmosphereScatteringIntensity,(e.brightness!==1||e.saturation!==1||e.gamma!==1)&&o.defines.push("ENVIRONMENT_COLOR_CORRECT");let d=0;for(let m of ds.faceNames()){let p=e._radianceMapTextures[d];c(p)&&!p.isDestroyed()&&p.destroy(),p=new on({context:n,width:i.x,height:i.y,pixelDatatype:mt.UNSIGNED_BYTE,pixelFormat:_t.RGBA}),e._radianceMapTextures[d]=p;let g=d,h=new pu({fragmentShaderSource:o,outputTexture:p,uniformMap:{u_radiiAndDynamicAtmosphereColor:()=>a,u_enuToFixedFrame:()=>A,u_faceDirection:()=>ds.getDirection(m,bk),u_positionWC:()=>r,u_brightnessSaturationGammaIntensity:()=>l,u_groundColor:()=>e.groundColor.withAlpha(e.groundAlbedo,dse)},owner:e});h.postExecute=()=>{if(e.isDestroyed()||h.canceled){an._activeComputeCommandCount--;return}let C=e._radianceMapComputeCommands;C[g]=void 0;let _=new Hs({context:n,colorTextures:[e._radianceMapTextures[g]]});_._bind(),e._radianceCubeMap[m].copyFromFramebuffer(),_._unBind(),_.destroy(),an._activeComputeCommandCount--,C.some(c)||(e._convolutionsCommandsDirty=!0,e._shouldRegenerateShaders=!0)},e._radianceMapComputeCommands[d]=h,an._queueCommand(h,t),d++}e._radianceCommandsDirty=!1}}function mse(e,t){let n=e._radianceCubeMap;n.generateMipmap();let i=e._mipmapLevels,o=e._textureDimensions,r=o.x/2,a=o.y/2,s=t.context,A=0,l=(m,p,g,h,C)=>()=>{if(e.isDestroyed()||m.canceled){an._activeComputeCommandCount--;return}let _=e._convolutionComputeCommands;_[p]=void 0,n.copyFace(t,g,h,C),A++,an._activeComputeCommandCount--,g.destroy(),e._specularMapTextures[p]=void 0;let I=e._specularMapTextures.length;A>=I&&(e._irradianceCommandDirty=!0,n.sampler=new nn({minificationFilter:Wt.LINEAR_MIPMAP_LINEAR}),e._shouldRegenerateShaders=!0,e._va.destroy(),e._va=void 0,e._convolveSP.destroy(),e._convolveSP=void 0)},d=0;for(let m=1;m<i;++m){for(let p of ds.faceNames()){c(e._specularMapTextures[d])&&e._specularMapTextures[d].destroy();let g=e._specularMapTextures[d]=new on({context:s,width:r,height:a,pixelDatatype:mt.UNSIGNED_BYTE,pixelFormat:_t.RGBA}),h=e._va;c(h)||(h=ds.createVertexArray(s,p),e._va=h);let C=e._convolveSP;c(C)||(C=gn.fromCache({context:s,vertexShaderSource:yk,fragmentShaderSource:Ik,attributeLocations:{positions:0}}),e._convolveSP=C);let _=new pu({shaderProgram:C,vertexArray:h,outputTexture:g,persists:!0,owner:e,uniformMap:{u_roughness:()=>m/(i-1),u_radianceTexture:()=>n??s.defaultTexture,u_faceDirection:()=>ds.getDirection(p,bk)}});_.postExecute=l(_,d,g,p,m),e._convolutionComputeCommands[d]=_,an._queueCommand(_,t),++d}r/=2,a/=2}}var Bk=new L(3,3);function pse(e,t){let n=t.context,i=Bk,o=e._irradianceMapTexture;c(o)&&!o.isDestroyed()&&o.destroy(),o=new on({context:n,width:i.x,height:i.y,pixelDatatype:mt.FLOAT,pixelFormat:_t.RGBA}),e._irradianceMapTexture=o;let r=e._irradianceMapFS;c(r)||(r=new It({sources:[Ek]}),e._irradianceMapFS=r);let a=new pu({fragmentShaderSource:r,outputTexture:o,owner:e,uniformMap:{u_radianceMap:()=>e._radianceCubeMap??n.defaultTexture}});a.postExecute=()=>{if(e.isDestroyed()||a.canceled){an._activeComputeCommandCount--;return}e._irradianceTextureDirty=!1,e._irradianceComputeCommand=void 0,e._sphericalHarmonicCoefficientsDirty=!0,e._irradianceMapFS=void 0,an._activeComputeCommandCount--},e._irradianceComputeCommand=a,an._queueCommand(a,t),e._irradianceTextureDirty=!0}function gse(e,t){let n=t.context;if(!c(e._irradianceMapTexture))return;let i=new Hs({context:n,colorTextures:[e._irradianceMapTexture],destroyAttachments:!1}),o=Bk,r=n.readPixels({x:0,y:0,width:o.x,height:o.y,framebuffer:i});for(let a=0;a<9;++a)e._sphericalHarmonicCoefficients[a]=f.unpack(r,a*4),f.multiplyByScalar(e._sphericalHarmonicCoefficients[a],e.atmosphereScatteringIntensity,e._sphericalHarmonicCoefficients[a]);i.destroy(),e._irradianceMapTexture.destroy(),e._irradianceMapTexture=void 0,e._shouldRegenerateShaders=!0}an.prototype.update=function(e){let t=e.mode;if(!an.isDynamicUpdateSupported(e)||!this.enabled||!this.shouldUpdate||!c(this._position)||t===Ee.MORPHING){this._shouldRegenerateShaders=!1;return}an._updateCommandQueue(e);let i=e.atmosphere.dynamicLighting,o=lse(this,e)||i===wI.SUNLIGHT&&!Ue.equalsEpsilon(e.time,this._lastTime,this.maximumSecondsDifference);if(this._shouldReset||o){this.reset(),this._shouldReset=!1,this._lastTime=Ue.clone(e.time,this._lastTime);return}if(this._radianceMapDirty&&(hse(this,e),this._radianceMapDirty=!1),this._convolutionsCommandsDirty&&(mse(this,e),this._convolutionsCommandsDirty=!1),this._irradianceCommandDirty&&(pse(this,e),this._irradianceCommandDirty=!1),this._irradianceTextureDirty){this._shouldRegenerateShaders=!1;return}if(this._sphericalHarmonicCoefficientsDirty){gse(this,e),this._sphericalHarmonicCoefficientsDirty=!1;return}this._shouldRegenerateShaders=!1};an.prototype.isDestroyed=function(){return!1};an.prototype.destroy=function(){let e=this._radianceMapComputeCommands.length;for(let t=0;t<e;++t)this._radianceMapComputeCommands[t]=void 0;e=this._convolutionComputeCommands.length;for(let t=0;t<e;++t)this._convolutionComputeCommands[t]=void 0;this._irradianceMapComputeCommand=void 0,e=this._radianceMapTextures.length;for(let t=0;t<e;++t)this._radianceMapTextures[t]=this._radianceMapTextures[t]&&!this._radianceMapTextures[t].isDestroyed()&&this._radianceMapTextures[t].destroy();e=this._specularMapTextures.length;for(let t=0;t<e;++t)this._specularMapTextures[t]=this._specularMapTextures[t]&&!this._specularMapTextures[t].isDestroyed()&&this._specularMapTextures[t].destroy();return this._radianceCubeMap=this._radianceCubeMap&&this._radianceCubeMap.destroy(),this._irradianceMapTexture=this._irradianceMapTexture&&!this._irradianceMapTexture.isDestroyed()&&this._irradianceMapTexture.destroy(),c(this._va)&&this._va.destroy(),c(this._convolveSP)&&this._convolveSP.destroy(),me(this)};an.isDynamicUpdateSupported=function(e){let t=e.context;return t.halfFloatingPointTexture||t.colorBufferFloat};an.AVERAGE_EARTH_GROUND_COLOR=Object.freeze(J.fromCssColorString("#717145"));an.DEFAULT_SPHERICAL_HARMONIC_COEFFICIENTS=Object.freeze([Object.freeze(new f(.35449,.35449,.35449)),f.ZERO,f.ZERO,f.ZERO,f.ZERO,f.ZERO,f.ZERO,f.ZERO,f.ZERO]);var Wh=an;var Og={HIGHLIGHT:0,REPLACE:1,MIX:2};Og.getColorBlend=function(e,t){if(e===Og.HIGHLIGHT)return 0;if(e===Og.REPLACE)return 1;if(e===Og.MIX)return S.clamp(t,S.EPSILON4,1)};var qh=Object.freeze(Og);var Cse={XTRANSLATE:"xTranslate",YTRANSLATE:"yTranslate",ZTRANSLATE:"zTranslate",XROTATE:"xRotate",YROTATE:"yRotate",ZROTATE:"zRotate",XSCALE:"xScale",YSCALE:"yScale",ZSCALE:"zScale",UNIFORMSCALE:"uniformScale"},Is=Object.freeze(Cse);var Ese={STEP:0,LINEAR:1,CUBICSPLINE:2},tf=Object.freeze(Ese);var xk={};function kg(e){this._count=e.count,this._properties=Re(e.properties,!0)}kg.prototype.hasProperty=function(e){return Kt.hasProperty(e,this._properties,xk)};kg.prototype.getPropertyIds=function(e){return Kt.getPropertyIds(this._properties,xk,e)};kg.prototype.getProperty=function(e,t){let n=this._properties[t];if(c(n))return Re(n[e],!0)};kg.prototype.setProperty=function(e,t,n){let i=this._properties[t];c(i)||(i=new Array(this._count),this._properties[t]=i),i[e]=Re(n,!0)};var Jh=kg;function ea(e){e=e??G.EMPTY_OBJECT,this._name=e.name,this._id=e.id,this._count=e.count,this._extras=e.extras,this._extensions=e.extensions,this._metadataTable=e.metadataTable,this._jsonMetadataTable=e.jsonMetadataTable,this._batchTableHierarchy=e.batchTableHierarchy}Object.defineProperties(ea.prototype,{name:{get:function(){return this._name}},id:{get:function(){return this._id}},count:{get:function(){return this._count}},class:{get:function(){if(c(this._metadataTable))return this._metadataTable.class}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}},byteLength:{get:function(){let e=0;return c(this._metadataTable)&&(e+=this._metadataTable.byteLength),c(this._batchTableHierarchy)&&(e+=this._batchTableHierarchy.byteLength),e}}});ea.prototype.hasProperty=function(e,t){return!!(c(this._metadataTable)&&this._metadataTable.hasProperty(t)||c(this._batchTableHierarchy)&&this._batchTableHierarchy.hasProperty(e,t)||c(this._jsonMetadataTable)&&this._jsonMetadataTable.hasProperty(t))};ea.prototype.hasPropertyBySemantic=function(e,t){return c(this._metadataTable)?this._metadataTable.hasPropertyBySemantic(t):!1};ea.prototype.propertyExists=function(e){return!!(c(this._metadataTable)&&this._metadataTable.hasProperty(e)||c(this._batchTableHierarchy)&&this._batchTableHierarchy.propertyExists(e)||c(this._jsonMetadataTable)&&this._jsonMetadataTable.hasProperty(e))};ea.prototype.propertyExistsBySemantic=function(e){return c(this._metadataTable)?this._metadataTable.hasPropertyBySemantic(e):!1};var lT=[];ea.prototype.getPropertyIds=function(e,t){if(t=c(t)?t:[],t.length=0,c(this._metadataTable)){let n=this._metadataTable.getPropertyIds(lT);Mn(t,n)}if(c(this._batchTableHierarchy)){let n=this._batchTableHierarchy.getPropertyIds(e,lT);Mn(t,n)}if(c(this._jsonMetadataTable)){let n=this._jsonMetadataTable.getPropertyIds(lT);Mn(t,n)}return t};ea.prototype.getProperty=function(e,t){let n;if(c(this._metadataTable)&&(n=this._metadataTable.getProperty(e,t),c(n))||c(this._batchTableHierarchy)&&(n=this._batchTableHierarchy.getProperty(e,t),c(n))||c(this._jsonMetadataTable)&&(n=this._jsonMetadataTable.getProperty(e,t),c(n)))return n};ea.prototype.setProperty=function(e,t,n){c(this._metadataTable)&&this._metadataTable.setProperty(e,t,n)||c(this._batchTableHierarchy)&&this._batchTableHierarchy.setProperty(e,t,n)||(c(this._jsonMetadataTable)||(this._jsonMetadataTable=new Jh({count:this._count,properties:{}})),this._jsonMetadataTable.setProperty(e,t,n))};ea.prototype.getPropertyBySemantic=function(e,t){if(c(this._metadataTable))return this._metadataTable.getPropertyBySemantic(e,t)};ea.prototype.setPropertyBySemantic=function(e,t,n){return c(this._metadataTable)?this._metadataTable.setPropertyBySemantic(e,t,n):!1};ea.prototype.getPropertyTypedArray=function(e){if(c(this._metadataTable))return this._metadataTable.getPropertyTypedArray(e)};ea.prototype.getPropertyTypedArrayBySemantic=function(e){if(c(this._metadataTable))return this._metadataTable.getPropertyTypedArrayBySemantic(e)};ea.prototype.isClass=function(e,t){let n=this._batchTableHierarchy;return c(n)?n.isClass(e,t):!1};ea.prototype.isExactClass=function(e,t){return this.getExactClassName(e)===t};ea.prototype.getExactClassName=function(e){let t=this._batchTableHierarchy;if(c(t))return t.getClassName(e)};var ac=ea;function Ug(e){e=e??G.EMPTY_OBJECT;let t=e.property,n=e.classProperty,i=e.textures,o=c(t.channels)?t.channels:[0],r=t,a=Vc.createModelTextureReader({textureInfo:r,channels:yse(o),texture:i[r.index]});this._min=t.min,this._max=t.max;let s=t.offset,A=t.scale,l=n.hasValueTransform||c(s)||c(A);s=s??n.offset,A=A??n.scale,s=n.unpackVectorAndMatrixTypes(s),A=n.unpackVectorAndMatrixTypes(A),this._offset=s,this._scale=A,this._hasValueTransform=l,this._textureReader=a,this._classProperty=n,this._extras=t.extras,this._extensions=t.extensions}Object.defineProperties(Ug.prototype,{textureReader:{get:function(){return this._textureReader}},hasValueTransform:{get:function(){return this._hasValueTransform}},offset:{get:function(){return this._offset}},scale:{get:function(){return this._scale}},classProperty:{get:function(){return this._classProperty}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}}});Ug.prototype.isGpuCompatible=function(){let e=this._classProperty,t=e.type,n=e.componentType;return e.isArray?e.isVariableLengthArray?(Nn(`Property texture property ${e.id} is a variable-length array, which is not supported`),!1):e.arrayLength>4?(Nn(`Property texture property ${e.id} is an array of length ${e.arrayLength}, but may have at most a length of 4`),!1):t!==jt.SCALAR?(Nn(`Property texture property ${e.id} is an array of type ${t}, but only SCALAR is supported`),!1):n!==Vt.UINT8?(Nn(`Property texture property ${e.id} is an array with component type ${n}, but only UINT8 is supported`),!1):!0:jt.isVectorType(t)||t===jt.SCALAR?n!==Vt.UINT8?(Nn(`Property texture property ${e.id} has component type ${n}, but only UINT8 is supported`),!1):!0:(Nn(`Property texture property ${e.id} has an unsupported type`),!1)};var _se=[void 0,"float","vec2","vec3","vec4"],Ise=[void 0,"int","ivec2","ivec3","ivec4"];Ug.prototype.getGlslType=function(){let e=this._classProperty,t=jt.getComponentCount(e.type);return e.isArray&&(t=e.arrayLength),e.normalized?_se[t]:Ise[t]};Ug.prototype.unpackInShader=function(e){return this._classProperty.normalized?e:`${this.getGlslType()}(255.0 * ${e})`};function yse(e){return e.map(function(t){return"rgba".charAt(t)}).join("")}var Tk=Ug;function uT(e){e=e??G.EMPTY_OBJECT;let t=e.propertyTexture,n=e.class,i=e.textures,o=t.extensions,r=t.extras,a={};if(c(t.properties))for(let s in t.properties)t.properties.hasOwnProperty(s)&&(a[s]=new Tk({property:t.properties[s],classProperty:n.properties[s],textures:i}));this._name=e.name,this._id=e.id,this._class=n,this._properties=a,this._extras=r,this._extensions=o}Object.defineProperties(uT.prototype,{name:{get:function(){return this._name}},id:{get:function(){return this._id}},class:{get:function(){return this._class}},properties:{get:function(){return this._properties}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}}});uT.prototype.getProperty=function(e){return this._properties[e]};var Kh=uT;function Sk(e){e=e??G.EMPTY_OBJECT;let t=e.property,n=e.classProperty;this._attribute=t.attribute,this._classProperty=n,this._min=t.min,this._max=t.max;let i=t.offset,o=t.scale,r=n.hasValueTransform||c(i)||c(o);i=i??n.offset,o=o??n.scale,i=n.unpackVectorAndMatrixTypes(i),o=n.unpackVectorAndMatrixTypes(o),this._offset=i,this._scale=o,this._hasValueTransform=r,this._extras=t.extras,this._extensions=t.extensions}Object.defineProperties(Sk.prototype,{attribute:{get:function(){return this._attribute}},hasValueTransform:{get:function(){return this._hasValueTransform}},offset:{get:function(){return this._offset}},scale:{get:function(){return this._scale}},classProperty:{get:function(){return this._classProperty}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}}});var wk=Sk;function fT(e){e=e??G.EMPTY_OBJECT;let t=e.propertyAttribute,n=e.class,i={};if(c(t.properties))for(let o in t.properties)t.properties.hasOwnProperty(o)&&(i[o]=new wk({property:t.properties[o],classProperty:n.properties[o]}));this._name=e.name,this._id=e.id,this._class=n,this._properties=i,this._extras=t.extras,this._extensions=t.extensions}Object.defineProperties(fT.prototype,{name:{get:function(){return this._name}},id:{get:function(){return this._id}},class:{get:function(){return this._class}},properties:{get:function(){return this._properties}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}}});fT.prototype.getProperty=function(e){return this._properties[e]};var DI=fT;function zg(e){e=e??G.EMPTY_OBJECT,this._schema=e.schema;let t=e.propertyTables;this._propertyTableCount=c(t)?t.length:0,this._propertyTables=t,this._propertyTextures=e.propertyTextures,this._propertyAttributes=e.propertyAttributes,this._statistics=e.statistics,this._extras=e.extras,this._extensions=e.extensions}Object.defineProperties(zg.prototype,{schema:{get:function(){return this._schema}},statistics:{get:function(){return this._statistics}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}},propertyTableCount:{get:function(){return this._propertyTableCount}},propertyTables:{get:function(){return this._propertyTables}},propertyTextures:{get:function(){return this._propertyTextures}},propertyAttributes:{get:function(){return this._propertyAttributes}},propertyTablesByteLength:{get:function(){if(!c(this._propertyTables))return 0;let e=0,t=this._propertyTables.length;for(let n=0;n<t;n++)e+=this._propertyTables[n].byteLength;return e}}});zg.prototype.getPropertyTable=function(e){return this._propertyTables[e]};zg.prototype.getPropertyTexture=function(e){return this._propertyTextures[e]};zg.prototype.getPropertyAttribute=function(e){return this._propertyAttributes[e]};var ta=zg;function bse(e){e=e??G.EMPTY_OBJECT;let t=e.extension,n=e.schema,i=[];if(c(t.propertyTables))for(let a=0;a<t.propertyTables.length;a++){let s=t.propertyTables[a],A=n.classes[s.class],l=new Sl({count:s.count,properties:s.properties,class:A,bufferViews:e.bufferViews});i.push(new ac({id:a,name:s.name,count:s.count,metadataTable:l,extras:s.extras,extensions:s.extensions}))}let o=[];if(c(t.propertyTextures))for(let a=0;a<t.propertyTextures.length;a++){let s=t.propertyTextures[a];o.push(new Kh({id:a,name:s.name,propertyTexture:s,class:n.classes[s.class],textures:e.textures}))}let r=[];if(c(t.propertyAttributes))for(let a=0;a<t.propertyAttributes.length;a++){let s=t.propertyAttributes[a];r.push(new DI({id:a,name:s.name,class:n.classes[s.class],propertyAttribute:s}))}return new ta({schema:n,propertyTables:i,propertyTextures:o,propertyAttributes:r,statistics:t.statistics,extras:t.extras,extensions:t.extensions})}var Dk=bse;function Bse(e){e=e??G.EMPTY_OBJECT;let t=e.extension,n=e.schema,i,o=[],r;if(c(t.featureTables))for(r=Object.keys(t.featureTables).sort(),i=0;i<r.length;i++){let s=r[i],A=t.featureTables[s],l=n.classes[A.class],d=new Sl({count:A.count,properties:A.properties,class:l,bufferViews:e.bufferViews});o.push(new ac({id:s,count:A.count,metadataTable:d,extras:A.extras,extensions:A.extensions}))}let a=[];if(c(t.featureTextures))for(r=Object.keys(t.featureTextures).sort(),i=0;i<r.length;i++){let s=r[i],A=t.featureTextures[s];a.push(new Kh({id:s,propertyTexture:xse(A),class:n.classes[A.class],textures:e.textures}))}return new ta({schema:n,propertyTables:o,propertyTextures:a,statistics:t.statistics,extras:t.extras,extensions:t.extensions})}function xse(e){let t={class:e.class,properties:{}},n=e.properties;for(let i in n)if(n.hasOwnProperty(i)){let o=n[i],r={channels:Tse(o.channels),extras:o.extras,extensions:o.extensions};t.properties[i]=dt(o.texture,r,!0)}return t}function Tse(e){let t=e.length,n=new Array(t);for(let i=0;i<t;i++)n[i]="rgba".indexOf(e[i]);return n}var Qk=Bse;function nf(e){e=e??G.EMPTY_OBJECT;let{gltf:t,extension:n,extensionLegacy:i,gltfResource:o,baseResource:r,supportedImageFormats:a,frameState:s,cacheKey:A,asynchronous:l=!0}=e;this._gltfResource=o,this._baseResource=r,this._gltf=t,this._extension=n,this._extensionLegacy=i,this._supportedImageFormats=a,this._frameState=s,this._cacheKey=A,this._asynchronous=l,this._bufferViewLoaders=[],this._bufferViewIds=[],this._textureLoaders=[],this._textureIds=[],this._schemaLoader=void 0,this._structuralMetadata=void 0,this._state=ke.UNLOADED,this._promise=void 0}c(Object.create)&&(nf.prototype=Object.create(Ln.prototype),nf.prototype.constructor=nf);Object.defineProperties(nf.prototype,{cacheKey:{get:function(){return this._cacheKey}},structuralMetadata:{get:function(){return this._structuralMetadata}}});async function Sse(e){try{let t=vse(e),n=Fse(e),i=Ose(e);return await Promise.all([t,n,i]),e.isDestroyed()?void 0:(e._gltf=void 0,e._state=ke.LOADED,e)}catch(t){if(e.isDestroyed())return;throw e.unload(),e._state=ke.FAILED,e.getError("Failed to load structural metadata",t)}}nf.prototype.load=function(){return c(this._promise)?this._promise:(this._state=ke.LOADING,this._promise=Sse(this),this._promise)};function wse(e,t){for(let n in e)if(e.hasOwnProperty(n)){let i=e[n],o=i.values,r=i.arrayOffsets,a=i.stringOffsets;c(o)&&(t[o]=!0),c(r)&&(t[r]=!0),c(a)&&(t[a]=!0)}}function Dse(e,t){for(let n in e)if(e.hasOwnProperty(n)){let i=e[n],o=i.bufferView,r=i.arrayOffsetBufferView,a=i.stringOffsetBufferView;c(o)&&(t[o]=!0),c(r)&&(t[r]=!0),c(a)&&(t[a]=!0)}}function Qse(e){let t=e.propertyTables,n={};if(c(t))for(let i=0;i<t.length;i++){let o=t[i];wse(o.properties,n)}return n}function Rse(e){let t=e.featureTables,n={};if(c(t)){for(let i in t)if(t.hasOwnProperty(i)){let r=t[i].properties;c(r)&&Dse(r,n)}}return n}async function vse(e){let t;c(e._extension)?t=Qse(e._extension):t=Rse(e._extensionLegacy);let n=[];for(let i in t)if(t.hasOwnProperty(i)){let o=hi.getBufferViewLoader({gltf:e._gltf,bufferViewId:parseInt(i),gltfResource:e._gltfResource,baseResource:e._baseResource});e._bufferViewLoaders.push(o),e._bufferViewIds.push(i),n.push(o.load())}return Promise.all(n)}function Mse(e){let t={},n=e.propertyTextures;if(c(n))for(let i=0;i<n.length;i++){let r=n[i].properties;c(r)&&Pse(r,t)}return t}function Pse(e,t){for(let n in e)if(e.hasOwnProperty(n)){let i=e[n];t[i.index]=i}}function Nse(e){let t={},n=e.featureTextures;if(c(n)){for(let i in n)if(n.hasOwnProperty(i)){let r=n[i].properties;c(r)&&Lse(r,t)}}return t}function Lse(e,t){for(let n in e)if(e.hasOwnProperty(n)){let o=e[n].texture;t[o.index]=o}}function Fse(e){let t;c(e._extension)?t=Mse(e._extension):t=Nse(e._extensionLegacy);let n=e._gltf,i=e._gltfResource,o=e._baseResource,r=e._supportedImageFormats,a=e._frameState,s=e._asynchronous,A=[];for(let l in t)if(t.hasOwnProperty(l)){let d=hi.getTextureLoader({gltf:n,textureInfo:t[l],gltfResource:i,baseResource:o,supportedImageFormats:r,frameState:a,asynchronous:s});e._textureLoaders.push(d),e._textureIds.push(l),A.push(d.load())}return Promise.all(A)}async function Ose(e){let t=e._extension??e._extensionLegacy,n;if(c(t.schemaUri)){let i=e._baseResource.getDerivedResource({url:t.schemaUri});n=hi.getSchemaLoader({resource:i})}else n=hi.getSchemaLoader({schema:t.schema});if(e._schemaLoader=n,await n.load(),!n.isDestroyed())return n.schema}nf.prototype.process=function(e){if(this._state===ke.READY)return!0;if(this._state!==ke.LOADED)return!1;let t=this._textureLoaders,n=t.length,i=!0;for(let s=0;s<n;++s){let l=t[s].process(e);i=i&&l}if(!i)return!1;let o=this._schemaLoader.schema,r={};for(let s=0;s<this._bufferViewIds.length;++s){let A=this._bufferViewIds[s],l=this._bufferViewLoaders[s];if(!l.isDestroyed()){let d=new Uint8Array(l.typedArray);r[A]=d}}let a={};for(let s=0;s<this._textureIds.length;++s){let A=this._textureIds[s],l=t[s];l.isDestroyed()||(a[A]=l.texture)}return c(this._extension)?this._structuralMetadata=Dk({extension:this._extension,schema:o,bufferViews:r,textures:a}):this._structuralMetadata=Qk({extension:this._extensionLegacy,schema:o,bufferViews:r,textures:a}),Rk(this),this._state=ke.READY,!0};function Rk(e){let t=e._bufferViewLoaders,n=t.length;for(let i=0;i<n;++i)hi.unload(t[i]);e._bufferViewLoaders.length=0,e._bufferViewIds.length=0}function kse(e){let t=e._textureLoaders,n=t.length;for(let i=0;i<n;++i)hi.unload(t[i]);e._textureLoaders.length=0,e._textureIds.length=0}nf.prototype.unload=function(){Rk(this),kse(this),c(this._schemaLoader)&&hi.unload(this._schemaLoader),this._schemaLoader=void 0,this._structuralMetadata=void 0};var vk=nf;var Xh={TRANSLATION:"TRANSLATION",ROTATION:"ROTATION",SCALE:"SCALE",FEATURE_ID:"_FEATURE_ID"};Xh.fromGltfSemantic=function(e){let t=e,i=/^(\w+)_\d+$/.exec(e);switch(i!==null&&(t=i[1]),t){case"TRANSLATION":return Xh.TRANSLATION;case"ROTATION":return Xh.ROTATION;case"SCALE":return Xh.SCALE;case"_FEATURE_ID":return Xh.FEATURE_ID}};var cr=Object.freeze(Xh);var Use=65534,zse=255;function QI(e){e=e??G.EMPTY_OBJECT;let t=e.triangleIndices,n=e.outlineIndices,i=e.originalVertexCount;this._triangleIndices=t,this._originalVertexCount=i,this._edges=new Nk(n,i),this._outlineCoordinatesTypedArray=void 0,this._extraVertices=[],Gse(this)}Object.defineProperties(QI.prototype,{updatedTriangleIndices:{get:function(){return this._triangleIndices}},outlineCoordinates:{get:function(){return this._outlineCoordinatesTypedArray}}});function Gse(e){let t=e._triangleIndices,n=e._edges,i=[],o=e._extraVertices,r=e._originalVertexCount,a={};for(let s=0;s<t.length;s+=3){let A=t[s],l=t[s+1],d=t[s+2],m=!1,p=m||n.hasEdge(A,l),g=m||n.hasEdge(l,d),h=m||n.hasEdge(d,A),C=Mk(i,A,l,d,p,g,h);for(;c(C);){let _=a[C];if(!c(_)){_=r+o.length;let I=C;for(;I>=r;)I=o[I-r];o.push(I),a[C]=_}_>Use&&(t instanceof Uint16Array||t instanceof Uint8Array)?t=new Uint32Array(t):_>zse&&t instanceof Uint8Array&&(t=new Uint16Array(t)),C===A?(A=_,t[s]=_):C===l?(l=_,t[s+1]=_):(d=_,t[s+2]=_),C=Mk(i,A,l,d,p,g,h)}}e._triangleIndices=t,e._outlineCoordinatesTypedArray=new Float32Array(i)}function Mk(e,t,n,i,o,r,a){let s=a?1:0,A=o?1:0,l=0,d=dT(e,t,s,A,l);if(d===0)return t;let m=0,p=o?1:0,g=r?1:0,h=dT(e,n,m,p,g);if(h===0)return n;let C=a?1:0,_=0,I=r?1:0,b=dT(e,i,C,_,I);if(b===0)return i;let x=d&h&b,T,w,R;if(x&1)T=0,w=1,R=2;else if(x&2)T=0,R=1,w=2;else if(x&4)w=0,T=1,R=2;else if(x&8)w=0,R=1,T=2;else if(x&16)R=0,T=1,w=2;else if(x&32)R=0,w=1,T=2;else{let O=hT(d),u=hT(h),E=hT(b);return O<u&&O<E?t:u<E?n:i}let z=t*3;e[z+T]=s,e[z+w]=A,e[z+R]=l;let M=n*3;e[M+T]=m,e[M+w]=p,e[M+R]=g;let N=i*3;e[N+T]=C,e[N+w]=_,e[N+R]=I}function dT(e,t,n,i,o){let r=t*3,a=e[r],s=e[r+1],A=e[r+2];return c(a)?(a===n&&s===i&&A===o)<<0|(a===n&&s===o&&A===i)<<1|(a===i&&s===n&&A===o)<<2|(a===i&&s===o&&A===n)<<3|(a===o&&s===n&&A===i)<<4|(a===o&&s===i&&A===n)<<5:63}function hT(e){return(e&1)+(e>>1&1)+(e>>2&1)+(e>>3&1)+(e>>4&1)+(e>>5&1)}QI.prototype.updateAttribute=function(e){let t=this._extraVertices,n=e.length,i=n/this._originalVertexCount,o=t.length,r=e.constructor,a=new r(e.length+o*i);a.set(e);for(let s=0;s<o;s++){let A=t[s]*i,l=n+s*i;for(let d=0;d<i;d++)a[l+d]=a[A+d]}return a};QI.createTexture=function(e){let t=e.cache.modelOutliningCache;if(c(t)||(t=e.cache.modelOutliningCache={}),c(t.outlineTexture))return t.outlineTexture;let n=Math.min(4096,rn.maximumTextureSize),i=n,o=Pk(i),r=[];for(;i>1;)i>>=1,r.push(Pk(i));let a=new on({context:e,source:{arrayBufferView:o,mipLevels:r},width:n,height:1,pixelFormat:_t.LUMINANCE,sampler:new nn({wrapS:ei.CLAMP_TO_EDGE,wrapT:ei.CLAMP_TO_EDGE,minificationFilter:Wt.LINEAR_MIPMAP_LINEAR,magnificationFilter:yo.LINEAR})});return t.outlineTexture=a,a};function Pk(e){let t=new Uint8Array(e);return t[e-1]=192,e===8?t[e-1]=96:e===4?t[e-1]=48:e===2?t[e-1]=24:e===1&&(t[e-1]=12),t}function Nk(e,t){this._originalVertexCount=t,this._edges=new Set;for(let n=0;n<e.length;n+=2){let i=e[n],o=e[n+1],r=Math.min(i,o),a=Math.max(i,o),s=r*this._originalVertexCount+a;this._edges.add(s)}}Nk.prototype.hasEdge=function(e,t){let n=Math.min(e,t),i=Math.max(e,t),o=n*this._originalVertexCount+i;return this._edges.has(o)};var RI=QI;function Lk(e){this.attribute=e,this.loadBuffer=!1,this.loadTypedArray=!1}function Hse(e){this.indices=e,this.loadBuffer=!1,this.loadTypedArray=!1}function vI(e){this.primitive=e,this.attributePlans=[],this.indicesPlan=void 0,this.needsOutlines=!1,this.outlineIndices=void 0,this.needsGaussianSplats=!1}vI.prototype.postProcess=function(e){this.needsOutlines&&(Vse(this),Wse(this,e)),this.needsGaussianSplats&&Yse(this,e)};function Vse(e){let t=e.primitive,n=t.indices,i=t.attributes[0].count,o=new RI({triangleIndices:n.typedArray,outlineIndices:e.outlineIndices,originalVertexCount:i});n.typedArray=o.updatedTriangleIndices,n.indexDatatype=Ge.fromTypedArray(n.typedArray);let r=jse(o.outlineCoordinates),a=new Lk(r);a.loadBuffer=!0,a.loadTypedArray=!1,e.attributePlans.push(a),t.outlineCoordinates=a.attribute;let s=e.attributePlans,A=e.attributePlans.length;for(let l=0;l<A;l++){let d=s[l].attribute;d.typedArray=o.updateAttribute(d.typedArray)}}function jse(e){let t=new Rt.Attribute;return t.name="_OUTLINE_COORDINATES",t.typedArray=e,t.componentDatatype=V.FLOAT,t.type=ct.VEC3,t.normalized=!1,t.count=e.length/3,t}function Yse(e,t){let n=e.attributePlans,i=n.length;for(let o=0;o<i;o++){let r=n[o];r.loadBuffer=!1,r.loadTypedArray=!0}}function Wse(e,t){qse(e.attributePlans,t),c(e.indicesPlan)&&Jse(e.indicesPlan,t)}function qse(e,t){let n=e.length;for(let i=0;i<n;i++){let o=e[i],r=o.attribute,a=r.typedArray;if(o.loadBuffer){let s=ut.createVertexBuffer({typedArray:a,context:t,usage:De.STATIC_DRAW});s.vertexArrayDestroyable=!1,r.buffer=s}o.loadTypedArray||(r.typedArray=void 0)}}function Jse(e,t){let n=e.indices;if(e.loadBuffer){let i=ut.createIndexBuffer({typedArray:n.typedArray,context:t,usage:De.STATIC_DRAW,indexDatatype:n.indexDatatype});n.buffer=i,i.vertexArrayDestroyable=!1}e.loadTypedArray||(n.typedArray=void 0)}vI.AttributeLoadPlan=Lk;vI.IndicesLoadPlan=Hse;var MI=vI;function Kse(e){e=e??G.EMPTY_OBJECT,this.webp=e.webp??!1,this.basis=e.basis??!1}var Fk=Kse;function Ok(e){this._position=e.position,this._adjustmentParams=e.adjustmentParams}Object.defineProperties(Ok.prototype,{position:{get:function(){return this._position}},adjustmentParams:{get:function(){return this._adjustmentParams}}});var kk=Ok;function Uk(e){this._position=e.position,this._adjustmentParams=e.adjustmentParams,this._covarianceMatrix=e.covarianceMatrix}Object.defineProperties(Uk.prototype,{position:{get:function(){return this._position}},adjustmentParams:{get:function(){return this._adjustmentParams}},covarianceMatrix:{get:function(){return this._covarianceMatrix}}});var zk=Uk;function Gk(e){this._groupFlags=e.groupFlags,this._rotationThetas=e.rotationThetas,this._params=e.params}Object.defineProperties(Gk.prototype,{groupFlags:{get:function(){return this._groupFlags}},rotationThetas:{get:function(){return this._rotationThetas}},params:{get:function(){return this._params}}});var Hk=Gk;var Xse={Direct:"Direct",Indirect:"Indirect"},Gg=Object.freeze(Xse);function Vk(e){this._storageType=e.storageType,this._anchorPointsIndirect=e.anchorPointsIndirect,this._anchorPointsDirect=e.anchorPointsDirect,this._intraTileCorrelationGroups=e.intraTileCorrelationGroups,this._covarianceDirect=e.covarianceDirect}Object.defineProperties(Vk.prototype,{storageType:{get:function(){return this._storageType}},anchorPointsIndirect:{get:function(){return this._anchorPointsIndirect}},anchorPointsDirect:{get:function(){return this._anchorPointsDirect}},intraTileCorrelationGroups:{get:function(){return this._intraTileCorrelationGroups}},covarianceDirect:{get:function(){return this._covarianceDirect}}});var mT=Vk;function jk(e){this._A=e.A,this._alpha=e.alpha,this._beta=e.beta,this._T=e.T}Object.defineProperties(jk.prototype,{A:{get:function(){return this._A}},alpha:{get:function(){return this._alpha}},beta:{get:function(){return this._beta}},T:{get:function(){return this._T}}});var Yk=jk;function Zh(){}function Wk(e){return new ne(e[0],e[1],e[3],e[1],e[2],e[4],e[3],e[4],e[5])}function Zse(e){let t=f.fromArray(e.position,0,new f),n=f.fromArray(e.adjustmentParams,0,new f);return new kk({position:t,adjustmentParams:n})}function $se(e){let t=f.fromArray(e.position,0,new f),n=f.fromArray(e.adjustmentParams,0,new f),i=Wk(e.covarianceMatrix);return new zk({position:t,adjustmentParams:n,covarianceMatrix:i})}function ece(e){let t=e.groupFlags,n=f.fromArray(e.rotationThetas,0,new f),i=[];for(let r of e.params){let a=new Yk({A:r.A,alpha:r.alpha,beta:r.beta,T:r.T});i.push(a)}return new Hk({groupFlags:t,rotationThetas:n,params:i})}Zh.load=function(e){let t=e.storageType;if(t===Gg.Direct)return Zh.loadDirect(e);if(t===Gg.Indirect)return Zh.loadIndirect(e);throw new ae(`Invalid storage type in NGA_gpm_local - expected 'Direct' or 'Indirect', but found ${t}`)};Zh.loadDirect=function(e){let t=[],n=e.anchorPointsDirect;for(let r of n){let a=Zse(r);t.push(a)}let i=Wk(e.covarianceDirectUpperTriangle);return new mT({storageType:Gg.Direct,anchorPointsDirect:t,covarianceDirect:i})};Zh.loadIndirect=function(e){let t=[],n=e.anchorPointsIndirect;for(let a of n){let s=$se(a);t.push(s)}let i=e.intraTileCorrelationGroups,o=[];for(let a of i){let s=ece(a);o.push(s)}return new mT({storageType:Gg.Indirect,anchorPointsIndirect:t,intraTileCorrelationGroups:o})};var qk=Zh;function Jk(e){this._traits=e.traits,this._noData=e.noData,this._offset=e.offset,this._scale=e.scale,this._index=e.index,this._texCoord=e.texCoord}Object.defineProperties(Jk.prototype,{traits:{get:function(){return this._traits}},noData:{get:function(){return this._noData}},offset:{get:function(){return this._offset}},scale:{get:function(){return this._scale}},index:{get:function(){return this._index}},texCoord:{get:function(){return this._texCoord}}});var Kk=Jk;function Xk(e){this._min=e.min,this._max=e.max,this._source=e.source}Object.defineProperties(Xk.prototype,{min:{get:function(){return this._min}},max:{get:function(){return this._max}},source:{get:function(){return this._source}}});var Zk=Xk;function $k(e){this._ppeTextures=e}Object.defineProperties($k.prototype,{ppeTextures:{get:function(){return this._ppeTextures}}});var eU=$k;function io(e){e=e??G.EMPTY_OBJECT;let t=e.gltf,n=e.extension,i=e.gltfResource,o=e.baseResource,r=e.supportedImageFormats,a=e.frameState,s=e.cacheKey,A=e.asynchronous??!0;this._gltfResource=i,this._baseResource=o,this._gltf=t,this._extension=n,this._supportedImageFormats=r,this._frameState=a,this._cacheKey=s,this._asynchronous=A,this._textureLoaders=[],this._textureIds=[],this._meshPrimitiveGpmLocal=void 0,this._structuralMetadata=void 0,this._state=ke.UNLOADED,this._promise=void 0}c(Object.create)&&(io.prototype=Object.create(Ln.prototype),io.prototype.constructor=io);Object.defineProperties(io.prototype,{cacheKey:{get:function(){return this._cacheKey}},meshPrimitiveGpmLocal:{get:function(){return this._meshPrimitiveGpmLocal}},structuralMetadata:{get:function(){return this._structuralMetadata}}});io.prototype._loadResources=async function(){try{return await this._loadTextures(),this.isDestroyed()?void 0:(this._gltf=void 0,this._state=ke.LOADED,this)}catch(e){if(this.isDestroyed())return;throw this.unload(),this._state=ke.FAILED,this.getError("Failed to load GPM data",e)}};io.prototype.load=function(){return c(this._promise)?this._promise:(this._state=ke.LOADING,this._promise=this._loadResources(this),this._promise)};function tce(e){let t={},n=e.ppeTextures;if(c(n))for(let i=0;i<n.length;i++){let o=n[i];t[o.index]=o}return t}io.prototype._loadTextures=function(){let e;c(this._extension)&&(e=tce(this._extension));let t=this._gltf,n=this._gltfResource,i=this._baseResource,o=this._supportedImageFormats,r=this._frameState,a=this._asynchronous,s=[];for(let A in e)if(e.hasOwnProperty(A)){let l=hi.getTextureLoader({gltf:t,textureInfo:e[A],gltfResource:n,baseResource:i,supportedImageFormats:o,frameState:r,asynchronous:a});this._textureLoaders.push(l),this._textureIds.push(A),s.push(l.load())}return Promise.all(s)};io.ppeTexturesMetadataSchemaCache=new Map;io._createPpeTextureClassJson=function(e,t){let n=e.traits,i=n.source,o=e.offset??0,r=(e.scale??1)*255;return{name:`PPE texture class ${t}`,properties:{[i]:{name:"PPE",type:"SCALAR",componentType:"UINT8",normalized:!0,offset:o,scale:r,min:n.min,max:n.max}}}};io._obtainPpeTexturesMetadataSchema=function(e){let n=io._collectPpeTexturePropertyIdentifiers(e).toString(),i=io.ppeTexturesMetadataSchemaCache.get(n);if(c(i))return i;let r={id:`PPE_TEXTURE_SCHEMA_${io.ppeTexturesMetadataSchemaCache.size}`,classes:{}},a=e.ppeTextures;for(let s=0;s<a.length;s++){let A=a[s],l=`ppeTexture_${s}`,d=io._createPpeTextureClassJson(A,s);r.classes[l]=d}return i=QA.fromJson(r),io.ppeTexturesMetadataSchemaCache.set(n,i),i};io._collectPpeTexturePropertyIdentifiers=function(e){let t=[],n=e.ppeTextures;for(let i=0;i<n.length;i++){let o=n[i],r=io._createPpeTextureClassJson(o,i),a=JSON.stringify(r);t.push(a)}return t};io._convertToStructuralMetadata=function(e,t){let n=[],i=io._obtainPpeTexturesMetadataSchema(e),o=e.ppeTextures;for(let a=0;a<o.length;a++){let s=o[a],A=`ppeTexture_${a}`,d=s.traits.source,m=i.classes[A],p={class:A,properties:{[d]:{index:s.index,texCoord:s.texCoord}}};n.push(new Kh({id:a,name:s.name,propertyTexture:p,class:m,textures:t}))}return new ta({schema:i,propertyTables:[],propertyTextures:n,propertyAttributes:[]})};io.prototype.process=function(e){if(this._state===ke.READY)return!0;if(this._state!==ke.LOADED)return!1;let t=this._textureLoaders,n=t.length,i=!0;for(let l=0;l<n;++l){let m=t[l].process(e);i=i&&m}if(!i)return!1;let o={};for(let l=0;l<this._textureIds.length;++l){let d=this._textureIds[l],m=t[l];m.isDestroyed()||(o[d]=m.texture)}let r=[],a=this._extension;if(c(a.ppeTextures)){let l=a.ppeTextures;for(let d of l){let m=d.traits,p=new Zk({min:m.min,max:m.max,source:m.source}),g=new Kk({traits:p,noData:d.noData,offset:d.offset,scale:d.scale,index:d.index,texCoord:d.texCoord});r.push(g)}}let s=new eU(r);this._meshPrimitiveGpmLocal=s;let A=io._convertToStructuralMetadata(s,o);return this._structuralMetadata=A,this._state=ke.READY,!0};io.prototype._unloadTextures=function(){let e=this._textureLoaders,t=e.length;for(let n=0;n<t;++n)hi.unload(e[n]);this._textureLoaders.length=0,this._textureIds.length=0};io.prototype.unload=function(){this._unloadTextures(),this._gltf=void 0,this._extension=void 0,this._structuralMetadata=void 0};var tU=io;function nce(e){let n=(e.extensions??G.EMPTY_OBJECT).EXT_mesh_primitive_restart,i=e.primitives;if(!c(n))return i;let o=[];Mn(o,i);for(let r of n.primitiveGroups){let a=r.primitives[0];if(!c(a)||!i[a])return i;let s={...i[a],indices:r.indices};switch(s.mode){case W.TRIANGLE_FAN:case W.TRIANGLE_STRIP:case W.LINE_STRIP:case W.LINE_LOOP:break;default:return i}for(let A of r.primitives){let l=o[A];if(!c(l?.indices)||l.mode!==s.mode)return i;o[A]=void 0}o[a]=s}return o.filter(c)}var nU=nce;var{Attribute:ice,Indices:oce,FeatureIdAttribute:iU,FeatureIdTexture:oU,FeatureIdImplicitRange:rU,MorphTarget:rce,Primitive:ace,Instances:sce,Skin:cce,Node:Ace,AnimatedPropertyType:lce,AnimationSampler:uce,AnimationTarget:fce,AnimationChannel:dce,Animation:hce,ArticulationStage:mce,Articulation:pce,Asset:gce,Scene:Cce,Components:Ece,MetallicRoughness:_ce,SpecularGlossiness:Ice,Specular:yce,Anisotropy:pT,Clearcoat:gT,Material:bce}=Rt,Ei={NOT_LOADED:0,LOADING:1,LOADED:2,PROCESSING:3,POST_PROCESSING:4,PROCESSED:5,READY:6,FAILED:7,UNLOADED:8};function Wc(e){e=e??G.EMPTY_OBJECT;let{gltfResource:t,typedArray:n,releaseGltfJson:i=!1,asynchronous:o=!0,incrementallyLoadTextures:r=!0,upAxis:a=fi.Y,forwardAxis:s=fi.Z,loadAttributesAsTypedArray:A=!1,loadAttributesFor2D:l=!1,enablePick:d=!1,loadIndicesForWireframe:m=!1,loadPrimitiveOutline:p=!0,loadForClassification:g=!1,renameBatchIdSemantic:h=!1}=e,{baseResource:C=t.clone()}=e;this._gltfJson=e.gltfJson,this._gltfResource=t,this._baseResource=C,this._typedArray=n,this._releaseGltfJson=i,this._asynchronous=o,this._incrementallyLoadTextures=r,this._upAxis=a,this._forwardAxis=s,this._loadAttributesAsTypedArray=A,this._loadAttributesFor2D=l,this._enablePick=d,this._loadIndicesForWireframe=m,this._loadPrimitiveOutline=p,this._loadForClassification=g,this._renameBatchIdSemantic=h,this._sortedPropertyTableIds=void 0,this._sortedFeatureTextureIds=void 0,this._gltfJsonLoader=void 0,this._state=Ei.NOT_LOADED,this._textureState=Ei.NOT_LOADED,this._promise=void 0,this._processError=void 0,this._textureErrors=[],this._primitiveLoadPlans=[],this._loaderPromises=[],this._textureLoaders=[],this._texturesPromises=[],this._textureCallbacks=[],this._bufferViewLoaders=[],this._geometryLoaders=[],this._geometryCallbacks=[],this._structuralMetadataLoader=void 0,this._meshPrimitiveGpmLoader=void 0,this._loadResourcesPromise=void 0,this._resourcesLoaded=!1,this._texturesLoaded=!1,this._supportedImageFormats=void 0,this._postProcessBuffers=[],this._components=void 0}c(Object.create)&&(Wc.prototype=Object.create(Ln.prototype),Wc.prototype.constructor=Wc);Object.defineProperties(Wc.prototype,{cacheKey:{get:function(){}},components:{get:function(){return this._components}},gltfJson:{get:function(){return c(this._gltfJsonLoader)?this._gltfJsonLoader.gltf:this._gltfJson}},incrementallyLoadTextures:{get:function(){return this._incrementallyLoadTextures}},texturesLoaded:{get:function(){return this._texturesLoaded}}});async function Bce(e){e._state=Ei.LOADING,e._textureState=Ei.LOADING;try{let t=hi.getGltfJsonLoader({gltfResource:e._gltfResource,baseResource:e._baseResource,typedArray:e._typedArray,gltfJson:e._gltfJson});return e._gltfJsonLoader=t,await t.load(),e.isDestroyed()||e.isUnloaded()||t.isDestroyed()?void 0:(e._state=Ei.LOADED,e._textureState=Ei.LOADED,e)}catch(t){if(e.isDestroyed())return;e._state=Ei.FAILED,e._textureState=Ei.FAILED,PI(e,t)}}async function xce(e,t){Ut.supportsWebP.initialized||await Ut.supportsWebP.initialize(),e._supportedImageFormats=new Fk({webp:Ut.supportsWebP(),basis:t.context.supportsBasis});let n=QAe(e,t);return e._state=Ei.PROCESSING,e._textureState=Ei.PROCESSING,c(e._gltfJsonLoader)&&e._releaseGltfJson&&(hi.unload(e._gltfJsonLoader),e._gltfJsonLoader=void 0),n}Wc.prototype.load=async function(){return c(this._promise)?this._promise:(this._promise=Bce(this),this._promise)};function PI(e,t){throw e.unload(),e.getError("Failed to load glTF",t)}function Tce(e,t){let n=!0,i=e._geometryLoaders;for(let a=0;a<i.length;++a){let s=i[a].process(t);s&&c(e._geometryCallbacks[a])&&(e._geometryCallbacks[a](),e._geometryCallbacks[a]=void 0),n=n&&s}let o=e._structuralMetadataLoader;if(c(o)){let a=o.process(t);a&&(e._components.structuralMetadata=o.structuralMetadata),n=n&&a}let r=e._meshPrimitiveGpmLoader;if(c(r)){let a=r.process(t);a&&(c(e._components.structuralMetadata)&&Nn("structural-metadata-gpm","The model defines both the 'EXT_structural_metadata' extension and the 'NGA_gpm_local' extension. The data from the 'EXT_structural_metadata' extension will be replaced with the data from the 'NGA_gpm_local' extension, and will no longer be available for styling and picking."),e._components.structuralMetadata=r.structuralMetadata),n=n&&a}n&&(e._state=Ei.POST_PROCESSING)}function Sce(e,t){let n=e._primitiveLoadPlans;for(let i=0;i<n.length;i++){let o=n[i];o.postProcess(t),(o.needsOutlines||o.needsGaussianSplats)&&wce(e,o)}}function wce(e,t){let n=e._postProcessBuffers,i=t.primitive,o=i.outlineCoordinates;c(o)&&n.push(o.buffer);let r=i.attributes;for(let s=0;s<r.length;s++){let A=r[s];c(A.buffer)&&n.push(A.buffer)}let a=i.indices;c(a)&&c(a.buffer)&&n.push(a.buffer)}Wc.prototype._process=function(e){return this._state===Ei.READY?!0:(this._state===Ei.PROCESSING&&Tce(this,e),this._resourcesLoaded&&this._state===Ei.POST_PROCESSING&&(Sce(this,e.context),this._state=Ei.PROCESSED),this._resourcesLoaded&&this._state===Ei.PROCESSED?(hU(this),this._typedArray=void 0,this._state=Ei.READY,!0):!1)};Wc.prototype._processTextures=function(e){if(this._textureState===Ei.READY)return!0;if(this._textureState!==Ei.PROCESSING)return!1;let t=!0,n=this._textureLoaders;for(let i=0;i<n.length;++i){let o=n[i].process(e);o&&c(this._textureCallbacks[i])&&(this._textureCallbacks[i](),this._textureCallbacks[i]=void 0),t=t&&o}return t?(this._textureState=Ei.READY,this._texturesLoaded=!0,!0):!1};Wc.prototype.process=function(e){if(this._state===Ei.LOADED&&!c(this._loadResourcesPromise)&&(this._loadResourcesPromise=xce(this,e).then(()=>{this._resourcesLoaded=!0}).catch(o=>{this._processError=o})),c(this._processError)){this._state=Ei.FAILED;let o=this._processError;this._processError=void 0,PI(this,o)}let t=this._textureErrors.pop();if(c(t)){let o=this.getError("Failed to load glTF texture",t);throw o.name="TextureError",o}if(this._state===Ei.FAILED)return!1;let n=!1;try{n=this._process(e)}catch(o){this._state=Ei.FAILED,PI(this,o)}let i=!1;try{i=this._processTextures(e)}catch(o){this._textureState=Ei.FAILED,PI(this,o)}return this._incrementallyLoadTextures?n:n&&i};function Dce(e,t,n,i,o,r,a,s,A){let l=e.gltfJson,m=l.accessors[t].bufferView;return hi.getVertexBufferLoader({gltf:l,gltfResource:e._gltfResource,baseResource:e._baseResource,frameState:A,bufferViewId:m,primitive:i,draco:o,spz:r,attributeSemantic:n,accessorId:t,asynchronous:e._asynchronous,loadBuffer:a,loadTypedArray:s})}function Qce(e,t,n,i,o,r,a){return hi.getIndexBufferLoader({gltf:e.gltfJson,accessorId:t,gltfResource:e._gltfResource,baseResource:e._baseResource,frameState:a,primitive:n,draco:i,asynchronous:e._asynchronous,loadBuffer:o,loadTypedArray:r})}function Rce(e,t){let n=hi.getBufferViewLoader({gltf:e.gltfJson,bufferViewId:t,gltfResource:e._gltfResource,baseResource:e._baseResource});return e._bufferViewLoaders.push(n),n}function aU(e,t,n){let i=t.byteOffset,o=Hc(e,t),r=t.count,a=SA(t.type),s=t.componentType,A=V.getSizeInBytes(s),l=A*a,d=r*a;if(o===l)return n=new Uint8Array(n),V.createArrayBufferView(s,n.buffer,n.byteOffset+i,d);let m=V.createTypedArray(s,d),p=new DataView(n.buffer),g=new Array(a),h=Oh(t.componentType);i=n.byteOffset+i;for(let C=0;C<r;++C){h(p,i,a,A,g);for(let _=0;_<a;++_)m[C*a+_]=g[_];i+=o}return m}function vce(e,t){let n=e.type;if(n===ct.SCALAR)return t.fill(0);let i=ct.getMathType(n);return t.fill(i.clone(i.ZERO))}function Mce(e,t,n,i){let o=e.type,r=e.count;if(o===ct.SCALAR)for(let a=0;a<r;a++)n[a]=t[a];else if(o===ct.VEC4&&i)for(let a=0;a<r;a++)n[a]=gt.unpack(t,a*4);else{let a=ct.getMathType(o),s=ct.getNumberOfComponents(o);for(let A=0;A<r;A++)n[A]=a.unpack(t,A*s)}return n}async function Pce(e,t,n,i,o){let{gltfJson:r}=e;if(await t.load(),e.isDestroyed())return;let a=aU(r,n,t.typedArray);i=i??!1,Mce(n,a,o,i)}function NI(e,t,n){let i=new Array(t.count),o=t.bufferView;if(c(o)){let r=Rce(e,o),a=Pce(e,r,t,n,i);return e._loaderPromises.push(a),i}return vce(t,i)}function ys(e,t){if(c(t))return e===Number?t[0]:e.unpack(t)}function Nce(e){return e===Number?0:new e}function Lce(e){switch(e){case V.BYTE:return 127;case V.UNSIGNED_BYTE:return 255;case V.SHORT:return 32767;case V.UNSIGNED_SHORT:return 65535;default:return 1}}var Fce={VEC2:new L(-1,-1),VEC3:new f(-1,-1,-1),VEC4:new re(-1,-1,-1,-1)};function Oce(e,t){let n=Lce(e.componentDatatype),i=Fce[e.type],o=e.min;c(o)&&(o=t.divideByScalar(o,n,o),o=t.maximumByComponent(o,i,o));let r=e.max;c(r)&&(r=t.divideByScalar(r,n,r),r=t.maximumByComponent(r,i,r)),e.min=o,e.max=r}function kce(e,t,n){let i=e.decodeMatrix,o=ys(n,e.decodedMin),r=ys(n,e.decodedMax);c(o)&&c(r)&&(t.min=o,t.max=r);let a=new Rt.Quantization;a.componentDatatype=t.componentDatatype,a.type=t.type,i.length===4?(a.quantizedVolumeOffset=i[2],a.quantizedVolumeStepSize=i[0]):i.length===9?(a.quantizedVolumeOffset=new L(i[6],i[7]),a.quantizedVolumeStepSize=new L(i[0],i[4])):i.length===16?(a.quantizedVolumeOffset=new f(i[12],i[13],i[14]),a.quantizedVolumeStepSize=new f(i[0],i[5],i[10])):i.length===25&&(a.quantizedVolumeOffset=new re(i[20],i[21],i[22],i[23]),a.quantizedVolumeStepSize=new re(i[0],i[6],i[12],i[18])),t.quantization=a}function Uce(e,t,n,i,o){let r=e.accessors[t],a=ct.getMathType(r.type),s=r.normalized??!1,A=new ice;A.name=n,A.semantic=i,A.setIndex=o,A.constant=Nce(a),A.componentDatatype=r.componentType,A.normalized=s,A.count=r.count,A.type=r.type,A.min=ys(a,r.min),A.max=ys(a,r.max),A.byteOffset=r.byteOffset,A.byteStride=Hc(e,r),Gn(r,"WEB3D_quantized_attributes")&&kce(r.extensions.WEB3D_quantized_attributes,A,a);let l=A.semantic===Pe.POSITION||A.semantic===Pe.NORMAL||A.semantic===Pe.TANGENT||A.semantic===Pe.TEXCOORD||A.semantic===Pe.FEATURE_ID||A.semantic===Pe.SCALE||A.semantic===Pe.ROTATION;return e.extensionsRequired?.includes("KHR_mesh_quantization")&&s&&l&&Oce(A,a),A}function sU(e){let n=/^\w+_(\d+)$/.exec(e);if(n!==null)return parseInt(n[1])}var zce={gltfSemantic:void 0,renamedSemantic:void 0,modelSemantic:void 0};function CT(e,t,n){let i=n;e._renameBatchIdSemantic&&(n==="_BATCHID"||n==="BATCHID")&&(i="_FEATURE_ID_0");let o=t.fromGltfSemantic(i),r=zce;return r.gltfSemantic=n,r.renamedSemantic=i,r.modelSemantic=o,r}function Gce(e){let t=e===Pe.POSITION,n=e===Pe.FEATURE_ID,i=e===Pe.TEXCOORD;return t||n||i}function Hce(e,t,n,i){if(e.byteOffset=0,e.byteStride=void 0,e.quantization=t.quantization,n&&(e.buffer=t.buffer),i){let o=c(t.quantization)?t.quantization.componentDatatype:e.componentDatatype;e.typedArray=V.createArrayBufferView(o,t.typedArray.buffer)}}function Vce(e,t,n,i){if(e.byteOffset=0,e.byteStride=void 0,n&&(e.buffer=t.buffer),i&&c(t.typedArray)&&(e.typedArray=V.createArrayBufferView(e.componentDatatype,t.typedArray.buffer)),e.semantic===Pe.POSITION){let o=a=>{let s=1/0,A=-1/0,l=1/0,d=-1/0,m=1/0,p=-1/0;for(let g=0;g<a.length;g+=3){let h=a[g],C=a[g+1],_=a[g+2];s=Math.min(s,h),A=Math.max(A,h),l=Math.min(l,C),d=Math.max(d,C),m=Math.min(m,_),p=Math.max(p,_)}return[new f(s,l,m),new f(A,d,p)]},r=e.typedArray;[e.min,e.max]=o(r)}}function jce(e,t,n,i,o,r){if(o&&(n.buffer=i.buffer),r){let a=i.typedArray;n.typedArray=aU(e,t,a),o||(n.byteOffset=0,n.byteStride=void 0)}}function cU(e,t,n,i,o,r,a,s,A){let l=e.gltfJson,d=l.accessors[t],m=d.bufferView,p=n.gltfSemantic,g=n.renamedSemantic,h=n.modelSemantic,C=c(h)?sU(g):void 0,I=Uce(l,t,p,h,C);if(!c(o)&&!c(m)&&!c(r))return I;let b=Dce(e,t,p,i,o,r,a,s,A),x=e._geometryLoaders.length;e._geometryLoaders.push(b);let T=b.load();return e._loaderPromises.push(T),e._geometryCallbacks[x]=()=>{c(o)&&c(o.attributes)&&c(o.attributes[p])?Hce(I,b,a,s):c(r)?Vce(I,b,a,s):jce(l,d,I,b,a,s)},I}function AU(e,t,n,i,o,r,a,s,A){let l=n.modelSemantic,d=l===Pe.POSITION,m=l===Pe.FEATURE_ID,p=d&&!a&&e._loadAttributesFor2D&&!A.scene3DOnly,g=d&&e._enablePick&&!A.context.webgl2,h=e._loadForClassification&&m,C=e._loadAttributesAsTypedArray,_=!C,I=C||p||g||h,T=cU(e,t,n,i,o,r,s?!1:_,s?!0:I,A),w=new MI.AttributeLoadPlan(T);return w.loadBuffer=_,w.loadTypedArray=I,w}function Yce(e,t,n,i,o){let r=e.gltfJson.accessors,a=c(n.ROTATION),s=c(n.TRANSLATION)&&c(r[n.TRANSLATION].min)&&c(r[n.TRANSLATION].max),A=CT(e,cr,i),l=A.modelSemantic,d=l===cr.TRANSLATION||l===cr.ROTATION||l===cr.SCALE,m=l===cr.TRANSLATION,p=e._loadAttributesAsTypedArray||a&&d||!o.context.instancedArrays,g=e._enablePick&&!o.context.webgl2,h=!p,C=e._loadAttributesFor2D&&!o.scene3DOnly;return cU(e,t,A,void 0,void 0,void 0,h,p||m&&(!s||C||g),o)}function Wce(e,t,n,i,o,r,a){let s=e.gltfJson.accessors[t],A=s.bufferView;if(!c(i)&&!c(A))return;let l=new oce;l.count=s.count;let d=e._loadAttributesAsTypedArray,m=(e._loadIndicesForWireframe||e._enablePick)&&!a.context.webgl2,p=e._loadForClassification&&o,h=!d,C=d||m||p,b=Qce(e,t,n,i,r?!1:h,r?!0:C,a),x=e._geometryLoaders.length;e._geometryLoaders.push(b);let T=b.load();e._loaderPromises.push(T),e._geometryCallbacks[x]=()=>{l.indexDatatype=b.indexDatatype,l.buffer=b.buffer,l.typedArray=b.typedArray};let w=new MI.IndicesLoadPlan(l);return w.loadBuffer=h,w.loadTypedArray=C,w}function Ta(e,t,n,i){let o=e.gltfJson,r=Vc.getImageIdFromTexture({gltf:o,textureId:t.index,supportedImageFormats:e._supportedImageFormats});if(!c(r))return;let a=hi.getTextureLoader({gltf:o,textureInfo:t,gltfResource:e._gltfResource,baseResource:e._baseResource,supportedImageFormats:e._supportedImageFormats,frameState:n,asynchronous:e._asynchronous}),s=Vc.createModelTextureReader({textureInfo:t}),A=e._textureLoaders.length;e._textureLoaders.push(a);let l=a.load().catch(d=>{if(!e.isDestroyed()){if(!e._incrementallyLoadTextures)throw d;e._textureState=Ei.FAILED,e._textureErrors.push(d)}});return e._texturesPromises.push(l),e._textureCallbacks[A]=()=>{s.texture=a.texture,c(i)&&(s.texture.sampler=i)},s}function qce(e,t,n){let{diffuseTexture:i,specularGlossinessTexture:o,diffuseFactor:r,specularFactor:a,glossinessFactor:s}=t,A=new Ice;return c(i)&&(A.diffuseTexture=Ta(e,i,n)),c(o)&&(A.specularGlossinessTexture=Ta(e,o,n)),A.diffuseFactor=ys(re,r),A.specularFactor=ys(f,a),A.glossinessFactor=s,A}function Jce(e,t,n){let{baseColorTexture:i,metallicRoughnessTexture:o,baseColorFactor:r,metallicFactor:a,roughnessFactor:s}=t,A=new _ce;return c(i)&&(A.baseColorTexture=Ta(e,i,n)),c(o)&&(A.metallicRoughnessTexture=Ta(e,o,n)),A.baseColorFactor=ys(re,r),A.metallicFactor=a,A.roughnessFactor=s,A}function Kce(e,t,n){let{specularFactor:i,specularTexture:o,specularColorFactor:r,specularColorTexture:a}=t,s=new yce;return c(o)&&(s.specularTexture=Ta(e,o,n)),c(a)&&(s.specularColorTexture=Ta(e,a,n)),s.specularFactor=i,s.specularColorFactor=ys(f,r),s}function Xce(e,t,n){let{anisotropyStrength:i=pT.DEFAULT_ANISOTROPY_STRENGTH,anisotropyRotation:o=pT.DEFAULT_ANISOTROPY_ROTATION,anisotropyTexture:r}=t,a=new pT;return c(r)&&(a.anisotropyTexture=Ta(e,r,n)),a.anisotropyStrength=i,a.anisotropyRotation=o,a}function Zce(e,t,n){let{clearcoatFactor:i=gT.DEFAULT_CLEARCOAT_FACTOR,clearcoatTexture:o,clearcoatRoughnessFactor:r=gT.DEFAULT_CLEARCOAT_ROUGHNESS_FACTOR,clearcoatRoughnessTexture:a,clearcoatNormalTexture:s}=t,A=new gT;return c(o)&&(A.clearcoatTexture=Ta(e,o,n)),c(a)&&(A.clearcoatRoughnessTexture=Ta(e,a,n)),c(s)&&(A.clearcoatNormalTexture=Ta(e,s,n)),A.clearcoatFactor=i,A.clearcoatRoughnessFactor=r,A}function $ce(e,t,n){let i=new bce,o=t.extensions??G.EMPTY_OBJECT,r=o.KHR_materials_pbrSpecularGlossiness,a=o.KHR_materials_specular,s=o.KHR_materials_anisotropy,A=o.KHR_materials_clearcoat,l=t.pbrMetallicRoughness;return i.unlit=c(o.KHR_materials_unlit),c(r)?i.specularGlossiness=qce(e,r,n):(c(l)&&(i.metallicRoughness=Jce(e,l,n)),c(a)&&!i.unlit&&(i.specular=Kce(e,a,n)),c(s)&&!i.unlit&&(i.anisotropy=Xce(e,s,n)),c(A)&&!i.unlit&&(i.clearcoat=Zce(e,A,n))),c(t.emissiveTexture)&&(i.emissiveTexture=Ta(e,t.emissiveTexture,n)),c(t.normalTexture)&&!e._loadForClassification&&(i.normalTexture=Ta(e,t.normalTexture,n)),c(t.occlusionTexture)&&(i.occlusionTexture=Ta(e,t.occlusionTexture,n)),i.emissiveFactor=ys(f,t.emissiveFactor),i.alphaMode=t.alphaMode,i.alphaCutoff=t.alphaCutoff,i.doubleSided=t.doubleSided,i}function lU(e,t){let n=new iU;return n.featureCount=e.featureCount,n.nullFeatureId=e.nullFeatureId,n.propertyTableId=e.propertyTable,n.setIndex=e.attribute,n.label=e.label,n.positionalLabel=t,n}function uU(e,t,n,i){let o=new iU,r=e.featureIds;return o.featureCount=n,o.propertyTableId=t,o.setIndex=sU(r.attribute),o.positionalLabel=i,o}function fU(e,t){let n=new rU;return n.propertyTableId=e.propertyTable,n.featureCount=e.featureCount,n.nullFeatureId=e.nullFeatureId,n.label=e.label,n.positionalLabel=t,n.offset=0,n.repeat=1,n}function dU(e,t,n,i){let o=new rU,r=e.featureIds;o.propertyTableId=t,o.featureCount=n,o.offset=r.constant??0;let a=r.divisor??0;return o.repeat=a===0?void 0:a,o.positionalLabel=i,o}function eAe(e,t,n,i){let o=new oU;o.featureCount=t.featureCount,o.nullFeatureId=t.nullFeatureId,o.propertyTableId=t.propertyTable,o.label=t.label,o.positionalLabel=i;let r=t.texture;o.textureReader=Ta(e,r,n,nn.NEAREST);let s=(c(r.channels)?r.channels:[0]).map(function(A){return"rgba".charAt(A)}).join("");return o.textureReader.channels=s,o}function tAe(e,t,n,i,o,r){let a=new oU,s=t.featureIds,A=s.texture;return a.featureCount=o,a.propertyTableId=n,a.textureReader=Ta(e,A,i,nn.NEAREST),a.textureReader.channels=s.channels,a.positionalLabel=r,a}function nAe(e,t,n,i,o){let r=new rce,a=void 0,s=void 0,A=void 0,l=!1;for(let d in t){if(!t.hasOwnProperty(d))continue;let m=t[d],p=CT(e,Pe,d),g=AU(e,m,p,a,s,A,l,n,o);r.attributes.push(g.attribute),i.attributePlans.push(g)}return r}function iAe(e){let i=e?.KHR_gaussian_splatting?.extensions?.KHR_gaussian_splatting_compression_spz_2;if(c(i))return i;let o=e?.KHR_spz_gaussian_splats_compression;if(c(o))return o}function oAe(e,t,n,i){let o=new ace,r=new MI(o);e._primitiveLoadPlans.push(r);let a=t.material;c(a)&&(o.material=$ce(e,e.gltfJson.materials[a],i));let s=t.extensions??G.EMPTY_OBJECT,A=!1,l=s.CESIUM_primitive_outline;e._loadPrimitiveOutline&&c(l)&&(A=!0,r.needsOutlines=!0,r.outlineIndices=rAe(e,l,r));let d=iAe(s);c(d)&&(A=!0,r.needsGaussianSplats=!0);let m=e._loadForClassification,p=s.KHR_draco_mesh_compression,g=!1,h=t.attributes;if(c(h))for(let R in h){if(!h.hasOwnProperty(R))continue;let z=h[R],M=CT(e,Pe,R),N=M.modelSemantic;if(m&&!Gce(N))continue;N===Pe.FEATURE_ID&&(g=!0);let O=AU(e,z,M,t,p,d,n,A,i);r.attributePlans.push(O),o.attributes.push(O.attribute)}let C=t.targets;if(c(C)&&!m)for(let R=0;R<C.length;++R)o.morphTargets.push(nAe(e,C[R],A,r,i));let _=t.indices;if(c(_)){let R=Wce(e,_,t,p,g,A,i);c(R)&&(r.indicesPlan=R,o.indices=R.indices)}let I=s.EXT_structural_metadata,b=s.EXT_mesh_features,x=s.EXT_feature_metadata,T=c(x);c(b)?aAe(e,o,b,i):T&&sAe(e,o,x,i),c(I)?cAe(o,I):T&&AAe(e,o,x);let w=t.mode;if(m&&w!==Me.TRIANGLES)throw new ae("Only triangle meshes can be used for classification.");return o.primitiveType=w,o}function rAe(e,t){let n=t.indices,i=e.gltfJson.accessors[n];return NI(e,i,!1)}function aAe(e,t,n,i){let o;c(n)&&c(n.featureIds)?o=n.featureIds:o=[];for(let r=0;r<o.length;r++){let a=o[r],s=`featureId_${r}`,A;c(a.texture)?A=eAe(e,a,i,s):c(a.attribute)?A=lU(a,s):A=fU(a,s),t.featureIds.push(A)}}function sAe(e,t,n,i){let{featureTables:o}=e.gltfJson.extensions.EXT_feature_metadata,r=0,a=n.featureIdAttributes;if(c(a))for(let A=0;A<a.length;++A){let l=a[A],d=l.featureTable,m=e._sortedPropertyTableIds.indexOf(d),p=o[d].count,g=`featureId_${r}`;r++;let h;c(l.featureIds.attribute)?h=uU(l,m,p,g):h=dU(l,m,p,g),t.featureIds.push(h)}let s=n.featureIdTextures;if(c(s))for(let A=0;A<s.length;++A){let l=s[A],d=l.featureTable,m=e._sortedPropertyTableIds.indexOf(d),p=o[d].count,g=`featureId_${r}`;r++;let h=tAe(e,l,m,i,p,g);t.featureIds.push(h)}}function cAe(e,t){if(!c(t))return;let{propertyTextures:n,propertyAttributes:i}=t;c(n)&&(e.propertyTextureIds=n),c(i)&&(e.propertyAttributeIds=i)}function AAe(e,t,n){c(n.featureTextures)&&(t.propertyTextureIds=n.featureTextures.map(function(i){return e._sortedFeatureTextureIds.indexOf(i)}))}function lAe(e,t,n){let i=t.EXT_mesh_gpu_instancing,o=new sce,r=i.attributes;if(c(r))for(let l in r){if(!r.hasOwnProperty(l))continue;let d=r[l];o.attributes.push(Yce(e,d,r,l,n))}let a=i.extensions??G.EMPTY_OBJECT,s=t.EXT_instance_features,A=a.EXT_feature_metadata;return c(s)?uAe(o,s):c(A)&&fAe(e.gltfJson,o,A,e._sortedPropertyTableIds),o}function uAe(e,t){let n=t.featureIds;for(let i=0;i<n.length;i++){let o=n[i],r=`instanceFeatureId_${i}`,a;c(o.attribute)?a=lU(o,r):a=fU(o,r),e.featureIds.push(a)}}function fAe(e,t,n,i){let o=e.extensions.EXT_feature_metadata.featureTables,r=n.featureIdAttributes;if(c(r))for(let a=0;a<r.length;++a){let s=r[a],A=s.featureTable,l=i.indexOf(A),d=o[A].count,m=`instanceFeatureId_${a}`,p;c(s.featureIds.attribute)?p=uU(s,l,d,m):p=dU(s,l,d,m),t.featureIds.push(p)}}function dAe(e,t,n){let i=new Ace;i.name=t.name,i.matrix=ys(Q,t.matrix),i.translation=ys(f,t.translation),i.rotation=ys(gt,t.rotation),i.scale=ys(f,t.scale);let o=t.extensions??G.EMPTY_OBJECT,r=o.EXT_mesh_gpu_instancing,a=o.AGI_articulations;if(c(r)){if(e._loadForClassification)throw new ae("Models with the EXT_mesh_gpu_instancing extension cannot be used for classification.");i.instances=lAe(e,o,n)}c(a)&&(i.articulationName=a.articulationName);let s=t.mesh;if(c(s)){let A=e.gltfJson.meshes[s],l=nU(A);for(let p=0;p<l.length;++p)i.primitives.push(oAe(e,l[p],c(i.instances),n));let d=t.weights??A.weights,m=i.primitives[0].morphTargets;i.morphWeights=c(d)?d.slice():new Array(m.length).fill(0)}return i}function hAe(e,t){let n=e.gltfJson.nodes;if(!c(n))return[];let i=n.map(function(o,r){let a=dAe(e,o,t);return a.index=r,a});for(let o=0;o<i.length;++o){let r=n[o].children;if(c(r))for(let a=0;a<r.length;++a)i[o].children.push(i[r[a]])}return i}function mAe(e,t,n){let i=new cce,o=t.joints;i.joints=o.map(a=>n[a]);let r=t.inverseBindMatrices;if(c(r)){let a=e.gltfJson.accessors[r];i.inverseBindMatrices=NI(e,a)}else i.inverseBindMatrices=new Array(o.length).fill(Q.IDENTITY);return i}function pAe(e,t){let n=e.gltfJson.skins;if(e._loadForClassification||!c(n))return[];let i=n.map(function(r,a){let s=mAe(e,r,t);return s.index=a,s}),o=e.gltfJson.nodes;for(let r=0;r<t.length;++r){let a=o[r].skin;c(a)&&(t[r].skin=i[a])}return i}async function gAe(e,t,n,i){let o=new vk({gltf:e.gltfJson,extension:t,extensionLegacy:n,gltfResource:e._gltfResource,baseResource:e._baseResource,supportedImageFormats:e._supportedImageFormats,frameState:i,asynchronous:e._asynchronous});return e._structuralMetadataLoader=o,o.load()}async function CAe(e,t,n,i){let o=new tU({gltf:t,extension:n,gltfResource:e._gltfResource,baseResource:e._baseResource,supportedImageFormats:e._supportedImageFormats,frameState:i,asynchronous:e._asynchronous});return e._meshPrimitiveGpmLoader=o,o.load()}function EAe(e,t){let n=new uce,i=e.gltfJson.accessors,o=i[t.input];n.input=NI(e,o);let r=t.interpolation;n.interpolation=tf[r]??tf.LINEAR;let a=i[t.output];return n.output=NI(e,a,!0),n}function _Ae(e,t){let n=new fce,i=e.node;if(!c(i))return;n.node=t[i];let o=e.path.toUpperCase();return n.path=lce[o],n}function IAe(e,t,n){let i=new dce,o=e.sampler;return i.sampler=t[o],i.target=_Ae(e.target,n),i}function yAe(e,t,n){let i=new hce;i.name=t.name;let o=t.samplers.map(function(a,s){let A=EAe(e,a);return A.index=s,A}),r=t.channels.map(function(a){return IAe(a,o,n)});return i.samplers=o,i.channels=r,i}function bAe(e,t){let n=e.gltfJson.animations;return e._loadForClassification||!c(n)?[]:n.map(function(o,r){let a=yAe(e,o,t);return a.index=r,a})}function BAe(e){let t=new mce;t.name=e.name;let n=e.type.toUpperCase();return t.type=Is[n],t.minimumValue=e.minimumValue,t.maximumValue=e.maximumValue,t.initialValue=e.initialValue,t}function xAe(e){let t=new pce;return t.name=e.name,t.stages=e.stages.map(BAe),t}function TAe(e){let n=(e.extensions??G.EMPTY_OBJECT).AGI_articulations?.articulations;return c(n)?n.map(xAe):[]}function SAe(e){let t;return c(e.scenes)&&c(e.scene)&&(t=e.scenes[e.scene].nodes),t=t??e.nodes,t=c(t)?t:[],t}function wAe(e,t){let n=new Cce,i=SAe(e);return n.nodes=i.map(function(o){return t[o]}),n}var DAe=new f;function QAe(e,t){let n=e.gltfJson,i=n.extensions??G.EMPTY_OBJECT,o=i.EXT_structural_metadata,r=i.EXT_feature_metadata,a=i.CESIUM_RTC;if(c(r)){let b=r.featureTables,x=r.featureTextures,T=c(b)?b:[],w=c(x)?x:[];e._sortedPropertyTableIds=Object.keys(T).sort(),e._sortedFeatureTextureIds=Object.keys(w).sort()}let s=hAe(e,t),A=pAe(e,s),l=bAe(e,s),d=TAe(n),m=wAe(n,s),p=new Ece,g=new gce,h=n.asset.copyright;if(c(h)){let b=h.split(";").map(function(x){return new fn(x.trim())});g.credits=b}if(p.asset=g,p.scene=m,p.nodes=s,p.skins=A,p.animations=l,p.articulations=d,p.upAxis=e._upAxis,p.forwardAxis=e._forwardAxis,c(a)){let b=f.fromArray(a.center,0,DAe);p.transform=Q.fromTranslation(b,p.transform)}if(e._components=p,c(o)||c(r)){let b=gAe(e,o,r,t);e._loaderPromises.push(b)}let C=i.NGA_gpm_local;if(c(C)){let b=qk.load(C);e._components.extensions.NGA_gpm_local=b}let _=n.meshes;if(c(_))for(let b of _){let x=b.primitives;if(c(x))for(let T of x){let w=T.extensions;if(c(w)){let R=w.NGA_gpm_local;if(c(R)){let z=CAe(e,n,R,t);e._loaderPromises.push(z)}}}}let I=[];return Mn(I,e._loaderPromises),e._incrementallyLoadTextures||Mn(I,e._texturesPromises),Promise.all(I)}function RAe(e){let t=e._textureLoaders;for(let n=0;n<t.length;++n)t[n]=!t[n].isDestroyed()&&hi.unload(t[n]);e._textureLoaders.length=0}function hU(e){let t=e._bufferViewLoaders;for(let n=0;n<t.length;++n)t[n]=!t[n].isDestroyed()&&hi.unload(t[n]);e._bufferViewLoaders.length=0}function vAe(e){let t=e._geometryLoaders;for(let n=0;n<t.length;++n)t[n]=!t[n].isDestroyed()&&hi.unload(t[n]);e._geometryLoaders.length=0}function MAe(e){let t=e._postProcessBuffers;for(let n=0;n<t.length;n++){let i=t[n];i.isDestroyed()||i.destroy()}t.length=0}function PAe(e){c(e._structuralMetadataLoader)&&!e._structuralMetadataLoader.isDestroyed()&&(e._structuralMetadataLoader.destroy(),e._structuralMetadataLoader=void 0)}function NAe(e){c(e._meshPrimitiveGpmLoader)&&!e._meshPrimitiveGpmLoader.isDestroyed()&&(e._meshPrimitiveGpmLoader.destroy(),e._meshPrimitiveGpmLoader=void 0)}Wc.prototype.isUnloaded=function(){return this._state===Ei.UNLOADED};Wc.prototype.unload=function(){c(this._gltfJsonLoader)&&!this._gltfJsonLoader.isDestroyed()&&hi.unload(this._gltfJsonLoader),this._gltfJsonLoader=void 0,RAe(this),hU(this),vAe(this),MAe(this),PAe(this),NAe(this),this._components=void 0,this._typedArray=void 0,this._state=Ei.UNLOADED};var of=Wc;var mU=`uniform sampler2D u_pointCloud_colorGBuffer;
uniform sampler2D u_pointCloud_depthGBuffer;
uniform vec2 u_distanceAndEdlStrength;
in vec2 v_textureCoordinates;

vec2 neighborContribution(float log2Depth, vec2 offset)
{
    float dist = u_distanceAndEdlStrength.x;
    vec2 texCoordOrig = v_textureCoordinates + offset * dist;
    vec2 texCoord0 = v_textureCoordinates + offset * floor(dist);
    vec2 texCoord1 = v_textureCoordinates + offset * ceil(dist);

    float depthOrLogDepth0 = czm_unpackDepth(texture(u_pointCloud_depthGBuffer, texCoord0));
    float depthOrLogDepth1 = czm_unpackDepth(texture(u_pointCloud_depthGBuffer, texCoord1));

    // ignore depth values that are the clear depth
    if (depthOrLogDepth0 == 0.0 || depthOrLogDepth1 == 0.0) {
        return vec2(0.0);
    }

    // interpolate the two adjacent depth values
    float depthMix = mix(depthOrLogDepth0, depthOrLogDepth1, fract(dist));
    vec4 eyeCoordinate = czm_windowToEyeCoordinates(texCoordOrig, depthMix);
    return vec2(max(0.0, log2Depth - log2(-eyeCoordinate.z / eyeCoordinate.w)), 1.0);
}

void main()
{
    float depthOrLogDepth = czm_unpackDepth(texture(u_pointCloud_depthGBuffer, v_textureCoordinates));

    vec4 eyeCoordinate = czm_windowToEyeCoordinates(gl_FragCoord.xy, depthOrLogDepth);
    eyeCoordinate /= eyeCoordinate.w;

    float log2Depth = log2(-eyeCoordinate.z);

    if (depthOrLogDepth == 0.0) // 0.0 is the clear value for the gbuffer
    {
        discard;
    }

    vec4 color = texture(u_pointCloud_colorGBuffer, v_textureCoordinates);

    // sample from neighbors left, right, down, up
    vec2 texelSize = 1.0 / czm_viewport.zw;

    vec2 responseAndCount = vec2(0.0);

    responseAndCount += neighborContribution(log2Depth, vec2(-texelSize.x, 0.0));
    responseAndCount += neighborContribution(log2Depth, vec2(+texelSize.x, 0.0));
    responseAndCount += neighborContribution(log2Depth, vec2(0.0, -texelSize.y));
    responseAndCount += neighborContribution(log2Depth, vec2(0.0, +texelSize.y));

    float response = responseAndCount.x / responseAndCount.y;
    float strength = u_distanceAndEdlStrength.y;
    float shade = exp(-response * 300.0 * strength);
    color.rgb *= shade;
    out_FragColor = vec4(color);

    // Input and output depth are the same.
    gl_FragDepth = depthOrLogDepth;
}
`;function $h(){this._framebuffer=new EN({colorAttachmentsLength:2,depth:!0,supportsDepthTexture:!0}),this._drawCommand=void 0,this._clearCommand=void 0,this._strength=1,this._radius=1}Object.defineProperties($h.prototype,{framebuffer:{get:function(){return this._framebuffer.framebuffer}},colorGBuffer:{get:function(){return this._framebuffer.getColorTexture(0)}},depthGBuffer:{get:function(){return this._framebuffer.getColorTexture(1)}}});function LAe(e){e._framebuffer.destroy(),e._drawCommand=void 0,e._clearCommand=void 0}var ET=new L;function FAe(e,t){let n=new It({defines:["LOG_DEPTH_WRITE"],sources:[mU]}),i={u_pointCloud_colorGBuffer:function(){return e.colorGBuffer},u_pointCloud_depthGBuffer:function(){return e.depthGBuffer},u_distanceAndEdlStrength:function(){return ET.x=e._radius,ET.y=e._strength,ET}},o=At.fromCache({blending:Pn.ALPHA_BLEND,depthMask:!0,depthTest:{enabled:!0},stencilTest:wt.setCesium3DTileBit(),stencilMask:wt.CESIUM_3D_TILE_MASK});e._drawCommand=t.createViewportQuadCommand(n,{uniformMap:i,renderState:o,pass:He.CESIUM_3D_TILE,owner:e}),e._clearCommand=new gE({framebuffer:e.framebuffer,color:new J(0,0,0,0),depth:1,renderState:At.fromCache(),pass:He.CESIUM_3D_TILE,owner:e})}function OAe(e,t){let n=t.drawingBufferWidth,i=t.drawingBufferHeight;e._framebuffer.update(t,n,i),FAe(e,t)}function pU(e){return e.drawBuffers&&e.fragmentDepth}$h.isSupported=pU;function kAe(e,t){let n=e.shaderCache.getDerivedShaderProgram(t,"EC");if(!c(n)){let i=t._attributeLocations,o=t.fragmentShaderSource.clone();o.sources.splice(0,0,`layout (location = 0) out vec4 out_FragData_0;
layout (location = 1) out vec4 out_FragData_1;`),o.sources=o.sources.map(function(r){return r=It.replaceMain(r,"czm_point_cloud_post_process_main"),r=r.replaceAll(/out_FragColor/g,"out_FragData_0"),r}),o.sources.push(`void main() 
{ 
    czm_point_cloud_post_process_main(); 
#ifdef LOG_DEPTH
    czm_writeLogDepth();
    out_FragData_1 = czm_packDepth(gl_FragDepth); 
#else
    out_FragData_1 = czm_packDepth(gl_FragCoord.z);
#endif
}`),n=e.shaderCache.createDerivedShaderProgram(t,"EC",{vertexShaderSource:t.vertexShaderSource,fragmentShaderSource:o,attributeLocations:i})}return n}$h.prototype.update=function(e,t,n,i){if(!pU(e.context))return;this._strength=n.eyeDomeLightingStrength,this._radius=n.eyeDomeLightingRadius*e.pixelRatio,OAe(this,e.context);let o,r=e.commandList,a=r.length;for(o=t;o<a;++o){let l=r[o];if(l.primitiveType!==Me.POINTS||l.pass===He.TRANSLUCENT)continue;let d,m,p=l.derivedCommands.pointCloudProcessor;c(p)&&(d=p.command,m=p.originalShaderProgram),(!c(d)||l.dirty||m!==l.shaderProgram||d.framebuffer!==this.framebuffer)&&(d=ft.shallowClone(l,d),d.framebuffer=this.framebuffer,d.shaderProgram=kAe(e.context,l.shaderProgram),d.castShadows=!1,d.receiveShadows=!1,c(p)||(p={command:d,originalShaderProgram:l.shaderProgram},l.derivedCommands.pointCloudProcessor=p),p.originalShaderProgram=l.shaderProgram),r[o]=d}let s=this._clearCommand,A=this._drawCommand;A.boundingVolume=i,r.push(A),r.push(s)};$h.prototype.isDestroyed=function(){return!1};$h.prototype.destroy=function(){return LAe(this),me(this)};var LI=$h;function gU(e){let t=e??{};this.attenuation=t.attenuation??!1,this.geometricErrorScale=t.geometricErrorScale??1,this.maximumAttenuation=t.maximumAttenuation,this.baseResolution=t.baseResolution,this.eyeDomeLighting=t.eyeDomeLighting??!0,this.eyeDomeLightingStrength=t.eyeDomeLightingStrength??1,this.eyeDomeLightingRadius=t.eyeDomeLightingRadius??1,this.backFaceCulling=t.backFaceCulling??!1,this.normalShading=t.normalShading??!0}gU.isSupported=function(e){return LI.isSupported(e.context)};var FI=gU;var Or={},UAe=new re(0,0,0,1),na=new re,zAe=new oi,_T=new L,IT=new L;Or.worldToWindowCoordinates=function(e,t,n){return Or.worldWithEyeOffsetToWindowCoordinates(e,t,f.ZERO,n)};var CU=new re,EU=new f;function Hg(e,t,n,i){let o=n.viewMatrix,r=Q.multiplyByVector(o,re.fromElements(e.x,e.y,e.z,1,CU),CU),a=f.multiplyComponents(t,f.normalize(r,EU),EU);return r.x+=t.x+a.x,r.y+=t.y+a.y,r.z+=a.z,Q.multiplyByVector(n.frustum.projectionMatrix,r,i)}var GAe=new ue(Math.PI,S.PI_OVER_TWO),HAe=new f,VAe=new f;Or.worldWithEyeOffsetToWindowCoordinates=function(e,t,n,i){let o=e.frameState,r=Or.computeActualEllipsoidPosition(o,t,UAe);if(!c(r))return;let a=e.canvas,s=zAe;s.x=0,s.y=0,s.width=a.clientWidth,s.height=a.clientHeight;let A=e.camera,l=!1;if(o.mode===Ee.SCENE2D){let d=e.mapProjection,m=GAe,p=d.project(m,HAe),g=f.clone(A.position,VAe),h=A.frustum.clone(),C=Q.computeViewportTransformation(s,0,1,new Q),_=A.frustum.projectionMatrix,I=A.positionWC.y,b=f.fromElements(S.sign(I)*p.x-I,0,-A.positionWC.x),x=sn.pointToGLWindowCoordinates(_,C,b);if(I===0||x.x<=0||x.x>=a.clientWidth)l=!0;else{if(x.x>a.clientWidth*.5){s.width=x.x,A.frustum.right=p.x-I,na=Hg(r,n,A,na),Or.clipToGLWindowCoordinates(s,na,_T),s.x+=x.x,A.position.x=-A.position.x;let T=A.frustum.right;A.frustum.right=-A.frustum.left,A.frustum.left=-T,na=Hg(r,n,A,na),Or.clipToGLWindowCoordinates(s,na,IT)}else{s.x+=x.x,s.width-=x.x,A.frustum.left=-p.x-I,na=Hg(r,n,A,na),Or.clipToGLWindowCoordinates(s,na,_T),s.x=s.x-s.width,A.position.x=-A.position.x;let T=A.frustum.left;A.frustum.left=-A.frustum.right,A.frustum.right=-T,na=Hg(r,n,A,na),Or.clipToGLWindowCoordinates(s,na,IT)}f.clone(g,A.position),A.frustum=h.clone(),i=L.clone(_T,i),(i.x<0||i.x>a.clientWidth)&&(i.x=IT.x)}}if(o.mode!==Ee.SCENE2D||l){if(na=Hg(r,n,A,na),na.z<0&&!(A.frustum instanceof Tu)&&!(A.frustum instanceof s_))return;i=Or.clipToGLWindowCoordinates(s,na,i)}return i.y=a.clientHeight-i.y,i};Or.worldToDrawingBufferCoordinates=function(e,t,n){if(n=Or.worldToWindowCoordinates(e,t,n),!!c(n))return Or.transformWindowToDrawingBuffer(e,n,n)};var Ml=new f,jAe=new ue;Or.computeActualEllipsoidPosition=function(e,t,n){let i=e.mode;if(i===Ee.SCENE3D)return f.clone(t,n);let o=e.mapProjection,r=o.ellipsoid.cartesianToCartographic(t,jAe);if(!c(r))return;if(o.project(r,Ml),i===Ee.COLUMBUS_VIEW)return f.fromElements(Ml.z,Ml.x,Ml.y,n);if(i===Ee.SCENE2D)return f.fromElements(0,Ml.x,Ml.y,n);let a=e.morphTime;return f.fromElements(S.lerp(Ml.z,t.x,a),S.lerp(Ml.x,t.y,a),S.lerp(Ml.y,t.z,a),n)};var _U=new f,IU=new f,yU=new Q;Or.clipToGLWindowCoordinates=function(e,t,n){return f.divideByScalar(t,t.w,_U),Q.computeViewportTransformation(e,0,1,yU),Q.multiplyByPoint(yU,_U,IU),L.fromCartesian3(IU,n)};Or.transformWindowToDrawingBuffer=function(e,t,n){let i=e.canvas,o=e.drawingBufferWidth/i.clientWidth,r=e.drawingBufferHeight/i.clientHeight;return L.fromElements(t.x*o,t.y*r,n)};var YAe=new re,bU=new re;Or.drawingBufferToWorldCoordinates=function(e,t,n,i){let r=e.context.uniformState,a=r.currentFrustum,s=a.x,A=a.y;if(e.frameState.useLogDepth){let g=n*r.log2FarDepthFromNearPlusOne,h=Math.pow(2,g)-1;n=A*(1-s/(h+s))/(A-s)}let l=e.view.passState.viewport,d=re.clone(re.UNIT_W,YAe);d.x=(t.x-l.x)/l.width*2-1,d.y=(t.y-l.y)/l.height*2-1,d.z=n*2-1,d.w=1;let m,p=e.camera.frustum;if(c(p.fovy)){m=Q.multiplyByVector(r.inverseViewProjection,d,bU);let g=1/m.w;f.multiplyByScalar(m,g,m)}else{let g=p.offCenterFrustum;c(g)&&(p=g),m=bU,m.x=(d.x*(p.right-p.left)+p.left+p.right)*.5,m.y=(d.y*(p.top-p.bottom)+p.bottom+p.top)*.5,m.z=(d.z*(s-A)-s-A)*.5,m.w=1,m=Q.multiplyByVector(r.inverseView,m,m)}return f.fromCartesian4(m,i)};var Fn=Or;var em={};em._deprecationWarning=Kr;var Pl=Uint32Array.BYTES_PER_ELEMENT;em.parse=function(e,t){let n=t??0;t=n;let i=new Uint8Array(e),o=new DataView(e);t+=Pl;let r=o.getUint32(t,!0);if(r!==1)throw new ae(`Only Batched 3D Model version 1 is supported.  Version ${r} is not.`);t+=Pl;let a=o.getUint32(t,!0);t+=Pl;let s=o.getUint32(t,!0);t+=Pl;let A=o.getUint32(t,!0);t+=Pl;let l=o.getUint32(t,!0);t+=Pl;let d=o.getUint32(t,!0);t+=Pl;let m;l>=570425344?(t-=Pl*2,m=s,l=A,d=0,s=0,A=0,em._deprecationWarning("b3dm-legacy-header","This b3dm header is using the legacy format [batchLength] [batchTableByteLength]. The new format is [featureTableJsonByteLength] [featureTableBinaryByteLength] [batchTableJsonByteLength] [batchTableBinaryByteLength] from https://github.com/CesiumGS/3d-tiles/tree/main/specification/TileFormats/Batched3DModel.")):d>=570425344&&(t-=Pl,m=l,l=s,d=A,s=0,A=0,em._deprecationWarning("b3dm-legacy-header","This b3dm header is using the legacy format [batchTableJsonByteLength] [batchTableBinaryByteLength] [batchLength]. The new format is [featureTableJsonByteLength] [featureTableBinaryByteLength] [batchTableJsonByteLength] [batchTableBinaryByteLength] from https://github.com/CesiumGS/3d-tiles/tree/main/specification/TileFormats/Batched3DModel."));let p;s===0?p={BATCH_LENGTH:m??0}:(p=Fo(i,t,s),t+=s);let g=new Uint8Array(e,t,A);t+=A;let h,C;l>0&&(h=Fo(i,t,l),t+=l,d>0&&(C=new Uint8Array(e,t,d),C=new Uint8Array(C),t+=d));let _=n+a-t;if(_===0)throw new ae("glTF byte length must be greater than 0.");let I;return t%4===0?I=new Uint8Array(e,t,_):(em._deprecationWarning("b3dm-glb-unaligned","The embedded glb is not aligned to a 4-byte boundary."),I=new Uint8Array(i.subarray(t,t+_))),{batchLength:m,featureTableJson:p,featureTableBinary:g,batchTableJson:h,batchTableBinary:C,gltf:I}};var BU=em;function Vg(e,t){this.json=e,this.buffer=t,this._cachedTypedArrays={},this.featuresLength=0}function xU(e,t,n,i,o,r){let a=e._cachedTypedArrays,s=a[t];return c(s)||(s=V.createArrayBufferView(n,e.buffer.buffer,e.buffer.byteOffset+r,o*i),a[t]=s),s}function WAe(e,t,n,i){let o=e._cachedTypedArrays,r=o[t];return c(r)||(r=V.createTypedArray(n,i),o[t]=r),r}Vg.prototype.getGlobalProperty=function(e,t,n){let i=this.json[e];if(c(i))return c(i.byteOffset)?(t=t??V.UNSIGNED_INT,n=n??1,xU(this,e,t,n,1,i.byteOffset)):i};Vg.prototype.hasProperty=function(e){return c(this.json[e])};Vg.prototype.getPropertyArray=function(e,t,n){let i=this.json[e];if(c(i))return c(i.byteOffset)?(c(i.componentType)&&(t=V.fromName(i.componentType)),xU(this,e,t,n,this.featuresLength,i.byteOffset)):WAe(this,e,t,i)};Vg.prototype.getProperty=function(e,t,n,i,o){let r=this.json[e];if(!c(r))return;let a=this.getPropertyArray(e,t,n);if(n===1)return a[i];for(let s=0;s<n;++s)o[s]=a[n*i+s];return o};var rf=Vg;function jg(e){let t=e.count,n=e.batchTable,i=e.binaryBody,o=e.parseAsPropertyAttributes??!1,r=e.customAttributeOutput,a=qAe(n),s;c(a.jsonProperties)&&(s=new Jh({count:t,properties:a.jsonProperties}));let A;c(a.hierarchy)&&(A=new G_({extension:a.hierarchy,binaryBody:i}));let l=Ku.BATCH_TABLE_CLASS_NAME,d=a.binaryProperties,m,p,g;if(o){let _=KAe(t,l,d,i,r);g=_.transcodedSchema,p=[new DI({propertyAttribute:_.propertyAttributeJson,class:_.transcodedClass})]}else{let _=JAe(t,l,d,i);g=_.transcodedSchema;let I=_.featureTableJson;m=new Sl({count:I.count,properties:I.properties,class:_.transcodedClass,bufferViews:_.bufferViewsTypedArrays}),p=[]}let h=[];if(c(m)||c(s)||c(A)){let _=new ac({id:0,name:"Batch Table",count:t,metadataTable:m,jsonMetadataTable:s,batchTableHierarchy:A});h.push(_)}let C={schema:g,propertyTables:h,propertyAttributes:p,extensions:a.extensions,extras:a.extras};return new ta(C)}function qAe(e){let t=e.HIERARCHY,n=e.extras,i=e.extensions,o;c(t)?(jg._deprecationWarning("batchTableHierarchyExtension","The batch table HIERARCHY property has been moved to an extension. Use extensions.3DTILES_batch_table_hierarchy instead."),o=t):c(i)&&(o=i["3DTILES_batch_table_hierarchy"]);let r,a={};for(let s in e){if(!e.hasOwnProperty(s)||s==="HIERARCHY"||s==="extensions"||s==="extras")continue;let A=e[s];Array.isArray(A)?(r=c(r)?r:{},r[s]=A):a[s]=A}return{binaryProperties:a,jsonProperties:r,hierarchy:o,extras:n,extensions:i}}function JAe(e,t,n,i){let o={},r={},a={},s=0;for(let m in n){if(!n.hasOwnProperty(m))continue;if(!c(i))throw new ae(`Property ${m} requires a batch table binary.`);let p=n[m],g=xA(p);r[m]={bufferView:s},o[m]=TU(p),a[s]=g.createArrayBufferView(i.buffer,i.byteOffset+p.byteOffset,e),s++}let A={classes:{}};A.classes[t]={properties:o};let l=QA.fromJson(A);return{featureTableJson:{class:t,count:e,properties:r},bufferViewsTypedArrays:a,transcodedSchema:l,transcodedClass:l.classes[t]}}function KAe(e,t,n,i,o){let r={},a={},s=0;for(let m in n){if(!n.hasOwnProperty(m))continue;let p=n[m];if(!c(i)&&!c(p.typedArray))throw new ae(`Property ${m} requires a batch table binary.`);let g=tt.sanitizeGlslIdentifier(m);(g===""||r.hasOwnProperty(g))&&(g=`property_${s}`,s++);let h=TU(p);h.name=m,r[g]=h;let C=g.toUpperCase();C.startsWith("_")||(C=`_${C}`);let _=p.typedArray;c(_)||(_=xA(p).createArrayBufferView(i.buffer,i.byteOffset+p.byteOffset,e));let I=new Rt.Attribute;I.name=C,I.count=e,I.type=p.type;let b=V.fromTypedArray(_);(b===V.INT||b===V.UNSIGNED_INT||b===V.DOUBLE)&&(jg._oneTimeWarning("Cast pnts property to floats",`Point cloud property "${C}" will be cast to a float array because INT, UNSIGNED_INT, and DOUBLE are not valid WebGL vertex attribute types. Some precision may be lost.`),_=new Float32Array(_)),I.componentDatatype=V.fromTypedArray(_),I.typedArray=_,o.push(I),a[g]={attribute:C}}let A={classes:{}};A.classes[t]={properties:r};let l=QA.fromJson(A);return{class:t,propertyAttributeJson:{properties:a},transcodedSchema:l,transcodedClass:l.classes[t]}}function TU(e){let t=XAe(e.componentType);return{type:e.type,componentType:t}}function XAe(e){switch(e){case"BYTE":return"INT8";case"UNSIGNED_BYTE":return"UINT8";case"SHORT":return"INT16";case"UNSIGNED_SHORT":return"UINT16";case"INT":return"INT32";case"UNSIGNED_INT":return"UINT32";case"FLOAT":return"FLOAT32";case"DOUBLE":return"FLOAT64"}}jg._deprecationWarning=Kr;jg._oneTimeWarning=Nn;var tm=jg;var bd={UNLOADED:0,LOADING:1,PROCESSING:2,READY:3,FAILED:4},ZAe=Rt.FeatureIdAttribute;function af(e){e=e??G.EMPTY_OBJECT;let t=e.b3dmResource,n=e.baseResource,i=e.arrayBuffer,o=e.byteOffset??0,r=e.releaseGltfJson??!1,a=e.asynchronous??!0,s=e.incrementallyLoadTextures??!0,A=e.upAxis??fi.Y,l=e.forwardAxis??fi.X,d=e.loadAttributesAsTypedArray??!1,m=e.loadAttributesFor2D??!1,p=e.enablePick??!1,g=e.loadIndicesForWireframe??!1,h=e.loadPrimitiveOutline??!0,C=e.loadForClassification??!1;n=c(n)?n:t.clone(),this._b3dmResource=t,this._baseResource=n,this._arrayBuffer=i,this._byteOffset=o,this._releaseGltfJson=r,this._asynchronous=a,this._incrementallyLoadTextures=s,this._upAxis=A,this._forwardAxis=l,this._loadAttributesAsTypedArray=d,this._loadAttributesFor2D=m,this._enablePick=p,this._loadIndicesForWireframe=g,this._loadPrimitiveOutline=h,this._loadForClassification=C,this._state=bd.UNLOADED,this._promise=void 0,this._gltfLoader=void 0,this._batchLength=0,this._propertyTable=void 0,this._batchTable=void 0,this._components=void 0,this._transform=Q.IDENTITY}c(Object.create)&&(af.prototype=Object.create(Ln.prototype),af.prototype.constructor=af);Object.defineProperties(af.prototype,{texturesLoaded:{get:function(){return this._gltfLoader?.texturesLoaded}},cacheKey:{get:function(){}},components:{get:function(){return this._components}}});af.prototype.load=function(){if(c(this._promise))return this._promise;let e=BU.parse(this._arrayBuffer,this._byteOffset),t=e.batchLength,n=e.featureTableJson,i=e.featureTableBinary,o=e.batchTableJson,r=e.batchTableBinary,a=new rf(n,i);t=a.getGlobalProperty("BATCH_LENGTH"),this._batchLength=t;let s=a.getGlobalProperty("RTC_CENTER",V.FLOAT,3);c(s)&&(this._transform=Q.fromTranslation(f.fromArray(s))),this._batchTable={json:o,binary:r};let A=new of({typedArray:e.gltf,upAxis:this._upAxis,forwardAxis:this._forwardAxis,gltfResource:this._b3dmResource,baseResource:this._baseResource,releaseGltfJson:this._releaseGltfJson,incrementallyLoadTextures:this._incrementallyLoadTextures,loadAttributesAsTypedArray:this._loadAttributesAsTypedArray,loadAttributesFor2D:this._loadAttributesFor2D,enablePick:this._enablePick,loadIndicesForWireframe:this._loadIndicesForWireframe,loadPrimitiveOutline:this._loadPrimitiveOutline,loadForClassification:this._loadForClassification,renameBatchIdSemantic:!0});this._gltfLoader=A,this._state=bd.LOADING;let l=this;return this._promise=A.load().then(function(){if(!l.isDestroyed())return l._state=bd.PROCESSING,l}).catch(function(d){if(!l.isDestroyed())return $Ae(l,d)}),this._promise};function $Ae(e,t){return e.unload(),e._state=bd.FAILED,t=e.getError("Failed to load b3dm",t),Promise.reject(t)}af.prototype.process=function(e){if(this._state===bd.READY)return!0;if(this._state!==bd.PROCESSING||!this._gltfLoader.process(e))return!1;let n=this._gltfLoader.components;return n.transform=Q.multiplyTransformation(this._transform,n.transform,n.transform),ele(this,n),this._components=n,this._arrayBuffer=void 0,this._state=bd.READY,!0};function ele(e,t){let n=e._batchTable,i=e._batchLength;if(i===0)return;let o;if(c(n.json))o=tm({count:i,batchTable:n.json,binaryBody:n.binary});else{let s=new ac({name:Ku.BATCH_TABLE_CLASS_NAME,count:i});o=new ta({schema:{},propertyTables:[s]})}let r=t.scene.nodes,a=r.length;for(let s=0;s<a;s++)SU(r[s]);t.structuralMetadata=o}function SU(e){let t=e.children.length;for(let i=0;i<t;i++)SU(e.children[i]);let n=e.primitives.length;for(let i=0;i<n;i++){let o=e.primitives[i],r=tt.getAttributeBySemantic(o,Pe.FEATURE_ID);if(c(r)){r.setIndex=0;let a=new ZAe;a.propertyTableId=0,a.setIndex=0,a.positionalLabel="featureId_0",o.featureIds.push(a)}}}af.prototype.unload=function(){c(this._gltfLoader)&&!this._gltfLoader.isDestroyed()&&this._gltfLoader.unload(),this._components=void 0,this._arrayBuffer=void 0};var wU=af;function sf(e){e=e??G.EMPTY_OBJECT,this._geoJson=e.geoJson,this._components=void 0}c(Object.create)&&(sf.prototype=Object.create(Ln.prototype),sf.prototype.constructor=sf);Object.defineProperties(sf.prototype,{cacheKey:{get:function(){}},components:{get:function(){return this._components}}});sf.prototype.load=function(){return Promise.resolve(this)};sf.prototype.process=function(e){return c(this._components)||(this._components=dle(this._geoJson,e),this._geoJson=void 0),!0};function tle(){this.lines=void 0,this.points=void 0,this.properties=void 0}function nle(){this.features=[]}function yT(e){let t=e[0],n=e[1],i=e[2]??0;return new f(t,n,i)}function bT(e){let t=e.length,n=new Array(t);for(let o=0;o<t;o++)n[o]=yT(e[o]);return[n]}function ile(e){let t=e.length,n=new Array(t);for(let i=0;i<t;i++)n[i]=bT(e[i])[0];return n}function DU(e){let t=e.length,n=new Array(t);for(let i=0;i<t;i++)n[i]=bT(e[i])[0];return n}function ole(e){let t=e.length,n=[];for(let i=0;i<t;i++){let o=DU(e[i]);Mn(n,o)}return n}function rle(e){return[yT(e)]}function ale(e){let t=e.length,n=new Array(t);for(let i=0;i<t;i++)n[i]=yT(e[i]);return n}var sle={LineString:bT,MultiLineString:ile,MultiPolygon:ole,Polygon:DU,MultiPoint:ale,Point:rle},cle={LineString:Me.LINES,MultiLineString:Me.LINES,MultiPolygon:Me.LINES,Polygon:Me.LINES,MultiPoint:Me.POINTS,Point:Me.POINTS};function QU(e,t){if(!c(e.geometry))return;let n=e.geometry.type,i=sle[n],o=cle[n],r=e.geometry.coordinates;if(!c(i)||!c(r))return;let a=new tle;o===Me.LINES?a.lines=i(r):o===Me.POINTS&&(a.points=i(r)),a.properties=e.properties,t.features.push(a)}function Ale(e,t){let n=e.features,i=n.length;for(let o=0;o<i;o++)QU(n[o],t)}var lle={FeatureCollection:Ale,Feature:QU},OI=new f;function ule(e,t,n){let i=0,o=0,r=e.length;for(let N=0;N<r;N++){let O=e[N];if(c(O.lines)){let u=O.lines.length;for(let E=0;E<u;E++){let y=O.lines[E];i+=y.length,o+=(y.length-1)*2}}}let a=new Float32Array(i*3),s=new Float32Array(i),A=Ge.createTypedArray(i,o),l=Ge.fromTypedArray(A),d=new f(Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY),m=new f(Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY),p=0,g=0;for(let N=0;N<r;N++){let O=e[N];if(!c(O.lines))continue;let u=O.lines.length;for(let E=0;E<u;E++){let y=O.lines[E],B=y.length;for(let D=0;D<B;D++){let v=y[D],F=f.fromDegrees(v.x,v.y,v.z,pe.WGS84,OI),P=Q.multiplyByPoint(t,F,OI);f.minimumByComponent(d,P,d),f.maximumByComponent(m,P,m),f.pack(P,a,p*3),s[p]=N,D<B-1&&(A[g*2]=p,A[g*2+1]=p+1,g++),p++}}}let h=ut.createVertexBuffer({typedArray:a,context:n.context,usage:De.STATIC_DRAW});h.vertexArrayDestroyable=!1;let C=ut.createVertexBuffer({typedArray:s,context:n.context,usage:De.STATIC_DRAW});C.vertexArrayDestroyable=!1;let _=ut.createIndexBuffer({typedArray:A,context:n.context,usage:De.STATIC_DRAW,indexDatatype:l});_.vertexArrayDestroyable=!1;let I=new Rt.Attribute;I.semantic=Pe.POSITION,I.componentDatatype=V.FLOAT,I.type=ct.VEC3,I.count=i,I.min=d,I.max=m,I.buffer=h;let b=new Rt.Attribute;b.semantic=Pe.FEATURE_ID,b.setIndex=0,b.componentDatatype=V.FLOAT,b.type=ct.SCALAR,b.count=i,b.buffer=C;let x=[I,b],T=new Rt.Material;T.unlit=!0;let w=new Rt.Indices;w.indexDatatype=l,w.count=A.length,w.buffer=_;let R=new Rt.FeatureIdAttribute;R.featureCount=r,R.propertyTableId=0,R.setIndex=0,R.positionalLabel="featureId_0";let z=[R],M=new Rt.Primitive;return M.attributes=x,M.indices=w,M.featureIds=z,M.primitiveType=Me.LINES,M.material=T,M}function fle(e,t,n){let i=0,o=e.length;for(let x=0;x<o;x++){let T=e[x];c(T.points)&&(i+=T.points.length)}let r=new Float32Array(i*3),a=new Float32Array(i),s=new f(Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY),A=new f(Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY),l=0;for(let x=0;x<o;x++){let T=e[x];if(!c(T.points))continue;let w=T.points.length;for(let R=0;R<w;R++){let z=T.points[R],M=f.fromDegrees(z.x,z.y,z.z,pe.WGS84,OI),N=Q.multiplyByPoint(t,M,OI);f.minimumByComponent(s,N,s),f.maximumByComponent(A,N,A),f.pack(N,r,l*3),a[l]=x,l++}}let d=ut.createVertexBuffer({typedArray:r,context:n.context,usage:De.STATIC_DRAW});d.vertexArrayDestroyable=!1;let m=ut.createVertexBuffer({typedArray:a,context:n.context,usage:De.STATIC_DRAW});m.vertexArrayDestroyable=!1;let p=new Rt.Attribute;p.semantic=Pe.POSITION,p.componentDatatype=V.FLOAT,p.type=ct.VEC3,p.count=i,p.min=s,p.max=A,p.buffer=d;let g=new Rt.Attribute;g.semantic=Pe.FEATURE_ID,g.setIndex=0,g.componentDatatype=V.FLOAT,g.type=ct.SCALAR,g.count=i,g.buffer=m;let h=[p,g],C=new Rt.Material;C.unlit=!0;let _=new Rt.FeatureIdAttribute;_.featureCount=o,_.propertyTableId=0,_.setIndex=0,_.positionalLabel="featureId_0";let I=[_],b=new Rt.Primitive;return b.attributes=h,b.featureIds=I,b.primitiveType=Me.POINTS,b.material=C,b}function dle(e,t){let n=new nle,i=lle[e.type];c(i)&&i(e,n);let o=n.features,r=o.length;if(r===0)throw new ae("GeoJSON must have at least one feature");let a={};for(let N=0;N<r;N++){let u=o[N].properties??G.EMPTY_OBJECT;for(let E in u)u.hasOwnProperty(E)&&(c(a[E])||(a[E]=new Array(r)))}for(let N=0;N<r;N++){let O=o[N];for(let u in a)if(a.hasOwnProperty(u)){let E=O.properties[u]??"";a[u][N]=E}}let s=new Jh({count:r,properties:a}),l=[new ac({id:0,count:r,jsonMetadataTable:s})],d=QA.fromJson({}),m=new ta({schema:d,propertyTables:l}),p=new f(Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY),g=new f(Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY),h=!1,C=!1;for(let N=0;N<r;N++){let O=o[N];if(c(O.lines)){h=!0;let u=O.lines.length;for(let E=0;E<u;E++){let y=O.lines[E],B=y.length;for(let D=0;D<B;D++)f.minimumByComponent(p,y[D],p),f.maximumByComponent(g,y[D],g)}}if(c(O.points)){C=!0;let u=O.points.length;for(let E=0;E<u;E++){let y=O.points[E];f.minimumByComponent(p,y,p),f.maximumByComponent(g,y,g)}}}let _=f.midpoint(p,g,new f),I=f.fromDegrees(_.x,_.y,_.z,pe.WGS84,new f),b=sn.eastNorthUpToFixedFrame(I,pe.WGS84,new Q),x=Q.inverseTransformation(b,new Q),T=[];h&&T.push(ule(o,x,t)),C&&T.push(fle(o,x,t));let w=new Rt.Node;w.index=0,w.primitives=T;let R=[w],z=new Rt.Scene;z.nodes=R;let M=new Rt.Components;return M.scene=z,M.nodes=R,M.transform=b,M.structuralMetadata=m,M}sf.prototype.unload=function(){this._components=void 0};var RU=sf;var kI={};kI._deprecationWarning=Kr;var cf=Uint32Array.BYTES_PER_ELEMENT;kI.parse=function(e,t){let n=t??0;t=n;let i=new Uint8Array(e),o=new DataView(e);t+=cf;let r=o.getUint32(t,!0);if(r!==1)throw new ae(`Only Instanced 3D Model version 1 is supported. Version ${r} is not.`);t+=cf;let a=o.getUint32(t,!0);t+=cf;let s=o.getUint32(t,!0);if(s===0)throw new ae("featureTableJsonByteLength is zero, the feature table must be defined.");t+=cf;let A=o.getUint32(t,!0);t+=cf;let l=o.getUint32(t,!0);t+=cf;let d=o.getUint32(t,!0);t+=cf;let m=o.getUint32(t,!0);if(m!==1&&m!==0)throw new ae(`Only glTF format 0 (uri) or 1 (embedded) are supported. Format ${m} is not.`);t+=cf;let p=Fo(i,t,s);t+=s;let g=new Uint8Array(e,t,A);t+=A;let h,C;l>0&&(h=Fo(i,t,l),t+=l,d>0&&(C=new Uint8Array(e,t,d),C=new Uint8Array(C),t+=d));let _=n+a-t;if(_===0)throw new ae("glTF byte length must be greater than 0.");let I;return t%4===0?I=new Uint8Array(e,t,_):(kI._deprecationWarning("i3dm-glb-unaligned","The embedded glb is not aligned to a 4-byte boundary."),I=new Uint8Array(i.subarray(t,t+_))),{gltfFormat:m,featureTableJson:p,featureTableBinary:g,batchTableJson:h,batchTableBinary:C,gltf:I}};var vU=kI;var Nl={NOT_LOADED:0,LOADING:1,PROCESSING:2,POST_PROCESSING:3,READY:4,FAILED:5,UNLOADED:6},UI=Rt.Attribute,hle=Rt.FeatureIdAttribute,PU=Rt.Instances;function Ll(e){e=e??G.EMPTY_OBJECT;let t=e.i3dmResource,n=e.arrayBuffer,i=e.baseResource,o=e.byteOffset??0,r=e.releaseGltfJson??!1,a=e.asynchronous??!0,s=e.incrementallyLoadTextures??!0,A=e.upAxis??fi.Y,l=e.forwardAxis??fi.X,d=e.loadAttributesAsTypedArray??!1,m=e.loadIndicesForWireframe??!1,p=e.loadPrimitiveOutline??!0,g=e.enablePick??!1;i=c(i)?i:t.clone(),this._i3dmResource=t,this._baseResource=i,this._arrayBuffer=n,this._byteOffset=o,this._releaseGltfJson=r,this._asynchronous=a,this._incrementallyLoadTextures=s,this._upAxis=A,this._forwardAxis=l,this._loadAttributesAsTypedArray=d,this._loadIndicesForWireframe=m,this._loadPrimitiveOutline=p,this._enablePick=g,this._state=Nl.NOT_LOADED,this._promise=void 0,this._gltfLoader=void 0,this._buffers=[],this._components=void 0,this._transform=Q.IDENTITY,this._batchTable=void 0,this._featureTable=void 0,this._instancesLength=0}c(Object.create)&&(Ll.prototype=Object.create(Ln.prototype),Ll.prototype.constructor=Ll);Object.defineProperties(Ll.prototype,{texturesLoaded:{get:function(){return this._gltfLoader?.texturesLoaded}},cacheKey:{get:function(){}},components:{get:function(){return this._components}}});Ll.prototype.load=function(){if(c(this._promise))return this._promise;let e=vU.parse(this._arrayBuffer,this._byteOffset),t=e.featureTableJson,n=e.featureTableBinary,i=e.batchTableJson,o=e.batchTableBinary,r=e.gltfFormat,a=new rf(t,n);this._featureTable=a;let s=a.getGlobalProperty("INSTANCES_LENGTH");if(a.featuresLength=s,!c(s))throw new ae("Feature table global property: INSTANCES_LENGTH must be defined");this._instancesLength=s;let A=a.getGlobalProperty("RTC_CENTER",V.FLOAT,3);c(A)&&(this._transform=Q.fromTranslation(f.fromArray(A))),this._batchTable={json:i,binary:o};let l={upAxis:this._upAxis,forwardAxis:this._forwardAxis,releaseGltfJson:this._releaseGltfJson,incrementallyLoadTextures:this._incrementallyLoadTextures,loadAttributesAsTypedArray:this._loadAttributesAsTypedArray,enablePick:this._enablePick,loadIndicesForWireframe:this._loadIndicesForWireframe,loadPrimitiveOutline:this._loadPrimitiveOutline};if(r===0){let m=Uc(e.gltf);m=m.replace(/[\s\0]+$/,"");let p=this._baseResource.getDerivedResource({url:m});l.gltfResource=p,l.baseResource=p}else l.gltfResource=this._i3dmResource,l.typedArray=e.gltf;let d=new of(l);return this._gltfLoader=d,this._state=Nl.LOADING,this._promise=d.load().then(()=>{if(!this.isDestroyed())return this._state=Nl.PROCESSING,this}).catch(m=>{if(!this.isDestroyed())throw mle(this,m)}),this._promise};function mle(e,t){return e.unload(),e._state=Nl.FAILED,e.getError("Failed to load i3dm",t)}Ll.prototype.process=function(e){if(this._state===Nl.READY)return!0;let t=this._gltfLoader,n=!1;if(this._state===Nl.PROCESSING&&(n=t.process(e)),!n)return!1;let i=t.components;return i.transform=Q.multiplyTransformation(this._transform,i.transform,i.transform),Cle(this,i,e),ple(this,i),this._components=i,this._arrayBuffer=void 0,this._state=Nl.READY,!0};function ple(e,t){let n=e._batchTable,i=e._instancesLength;if(i===0)return;let o;if(c(n.json))o=tm({count:i,batchTable:n.json,binaryBody:n.binary});else{let r=new ac({name:Ku.BATCH_TABLE_CLASS_NAME,count:i});o=new ta({schema:{},propertyTables:[r]})}t.structuralMetadata=o}var zI=new f,BT=new Array(4),gle=new Q;function Cle(e,t,n){let i,o=e._featureTable,r=e._instancesLength;if(r===0)return;let a=o.getGlobalProperty("RTC_CENTER",V.FLOAT,3),s=o.getGlobalProperty("EAST_NORTH_UP"),A=o.hasProperty("NORMAL_UP")||o.hasProperty("NORMAL_UP_OCT32P")||s,l=o.hasProperty("SCALE")||o.hasProperty("SCALE_NON_UNIFORM"),d=_le(o,r),m;A&&(m=new Float32Array(4*r));let p;l&&(p=new Float32Array(3*r));let g=new Float32Array(r),h=f.unpackArray(d),C=new f,_=new f,I=new f,b=new f,x=new ne,T=new gt,w=new Array(4),R=new f,z=new Array(3),M=new Q;if(!c(a)||f.equals(f.unpack(a),f.ZERO)){let P=le.fromPoints(h);for(i=0;i<h.length;i++)f.subtract(h[i],P.center,zI),d[3*i+0]=zI.x,d[3*i+1]=zI.y,d[3*i+2]=zI.z;let U=Q.fromTranslation(P.center,gle);t.transform=Q.multiplyTransformation(U,t.transform,t.transform)}for(i=0;i<r;i++){C=f.clone(h[i]),c(a)&&f.add(C,f.unpack(a),C),A&&(Ile(o,s,i,T,C,I,_,b,x,M),gt.pack(T,w,0),m[4*i+0]=w[0],m[4*i+1]=w[1],m[4*i+2]=w[2],m[4*i+3]=w[3]),l&&(yle(o,i,R),f.pack(R,z,0),p[3*i+0]=z[0],p[3*i+1]=z[1],p[3*i+2]=z[2]);let P=o.getProperty("BATCH_ID",V.UNSIGNED_SHORT,1,i);c(P)||(P=i),g[i]=P}let N=new PU;N.transformInWorldSpace=!0;let O=e._buffers,u=new UI;if(u.name="Instance Translation",u.semantic=cr.TRANSLATION,u.componentDatatype=V.FLOAT,u.type=ct.VEC3,u.count=r,u.typedArray=d,!A){let P=ut.createVertexBuffer({context:n.context,typedArray:d,usage:De.STATIC_DRAW});P.vertexArrayDestroyable=!1,O.push(P),u.buffer=P}if(N.attributes.push(u),A){let P=new UI;P.name="Instance Rotation",P.semantic=cr.ROTATION,P.componentDatatype=V.FLOAT,P.type=ct.VEC4,P.count=r,P.typedArray=m,N.attributes.push(P)}if(l){let P=new UI;if(P.name="Instance Scale",P.semantic=cr.SCALE,P.componentDatatype=V.FLOAT,P.type=ct.VEC3,P.count=r,A)P.typedArray=p;else{let U=ut.createVertexBuffer({context:n.context,typedArray:p,usage:De.STATIC_DRAW});U.vertexArrayDestroyable=!1,O.push(U),P.buffer=U}N.attributes.push(P)}let E=new UI;E.name="Instance Feature ID",E.setIndex=0,E.semantic=cr.FEATURE_ID,E.componentDatatype=V.FLOAT,E.type=ct.SCALAR,E.count=r;let y=ut.createVertexBuffer({context:n.context,typedArray:g,usage:De.STATIC_DRAW});y.vertexArrayDestroyable=!1,O.push(y),E.buffer=y,N.attributes.push(E);let B=new hle;B.propertyTableId=0,B.setIndex=0,B.positionalLabel="instanceFeatureId_0",N.featureIds.push(B);let D=t.nodes,v=D.length,F=!1;for(i=0;i<v;i++){let P=D[i];P.primitives.length>0&&(P.instances=F?Ele(N):N,F=!0)}}function Ele(e){let t=new PU;t.transformInWorldSpace=e.transformInWorldSpace;let n=e.attributes,i=n.length;for(let o=0;o<i;o++){let r=Re(n[o],!1);t.attributes.push(r)}return t.featureIds=e.featureIds,t}function _le(e,t){if(e.hasProperty("POSITION"))return e.getPropertyArray("POSITION",V.FLOAT,3);if(e.hasProperty("POSITION_QUANTIZED")){let n=e.getPropertyArray("POSITION_QUANTIZED",V.UNSIGNED_SHORT,3),i=e.getGlobalProperty("QUANTIZED_VOLUME_OFFSET",V.FLOAT,3);if(!c(i))throw new ae("Global property: QUANTIZED_VOLUME_OFFSET must be defined for quantized positions.");let o=e.getGlobalProperty("QUANTIZED_VOLUME_SCALE",V.FLOAT,3);if(!c(o))throw new ae("Global property: QUANTIZED_VOLUME_SCALE must be defined for quantized positions.");let r=new Float32Array(n.length);for(let a=0;a<n.length/3;a++)for(let s=0;s<3;s++){let A=3*a+s;r[A]=n[A]/65535*o[s]+i[s]}return r}else throw new ae("Either POSITION or POSITION_QUANTIZED must be defined for each instance.")}var MU=new Array(4);function Ile(e,t,n,i,o,r,a,s,A,l){let d=e.getProperty("NORMAL_UP",V.FLOAT,3,n,BT),m=e.getProperty("NORMAL_RIGHT",V.FLOAT,3,n,MU),p=!1;if(c(d)){if(!c(m))throw new ae("To define a custom orientation, both NORMAL_UP and NORMAL_RIGHT must be defined.");f.unpack(d,0,r),f.unpack(m,0,a),p=!0}else{let g=e.getProperty("NORMAL_UP_OCT32P",V.UNSIGNED_SHORT,2,n,BT),h=e.getProperty("NORMAL_RIGHT_OCT32P",V.UNSIGNED_SHORT,2,n,MU);if(c(g)){if(!c(h))throw new ae("To define a custom orientation with oct-encoded vectors, both NORMAL_UP_OCT32P and NORMAL_RIGHT_OCT32P must be defined.");Yt.octDecodeInRange(g[0],g[1],65535,r),Yt.octDecodeInRange(h[0],h[1],65535,a),p=!0}else t?(sn.eastNorthUpToFixedFrame(o,pe.WGS84,l),Q.getMatrix3(l,A)):ne.clone(ne.IDENTITY,A)}p&&(f.cross(a,r,s),f.normalize(s,s),ne.setColumn(A,0,a,A),ne.setColumn(A,1,r,A),ne.setColumn(A,2,s,A)),gt.fromRotationMatrix(A,i)}function yle(e,t,n){n=f.fromElements(1,1,1,n);let i=e.getProperty("SCALE",V.FLOAT,1,t);c(i)&&f.multiplyByScalar(n,i,n);let o=e.getProperty("SCALE_NON_UNIFORM",V.FLOAT,3,t,BT);c(o)&&(n.x*=o[0],n.y*=o[1],n.z*=o[2])}function ble(e){let t=e._buffers,n=t.length;for(let i=0;i<n;i++){let o=t[i];o.isDestroyed()||o.destroy()}t.length=0}Ll.prototype.isUnloaded=function(){return this._state===Nl.UNLOADED};Ll.prototype.unload=function(){c(this._gltfLoader)&&!this._gltfLoader.isDestroyed()&&this._gltfLoader.unload(),ble(this),this._components=void 0,this._arrayBuffer=void 0,this._state=Nl.UNLOADED};var NU=Ll;var Ble={STOPPED:0,ANIMATING:1},Af=Object.freeze(Ble);function nm(){this.times=void 0,this.points=void 0,be.throwInstantiationError()}nm.getPointType=function(e){if(typeof e=="number")return Number;if(e instanceof f)return f;if(e instanceof gt)return gt};nm.prototype.evaluate=be.throwInstantiationError;nm.prototype.findTimeInterval=function(e,t){let n=this.times,i=n.length;if(t=t??0,e>=n[t]){if(t+1<i&&e<n[t+1])return t;if(t+2<i&&e<n[t+2])return t+1}else if(t-1>=0&&e>=n[t-1])return t-1;let o;if(e>n[t])for(o=t;o<i-1&&!(e>=n[o]&&e<n[o+1]);++o);else for(o=t-1;o>=0&&!(e>=n[o]&&e<n[o+1]);--o);return o===i-1&&(o=i-2),o};nm.prototype.wrapTime=function(e){let t=this.times,n=t[t.length-1],i=t[0],o=n-i,r;return e<i&&(r=Math.floor((i-e)/o)+1,e+=r*o),e>n&&(r=Math.floor((e-n)/o)+1,e-=r*o),e};nm.prototype.clampTime=function(e){let t=this.times;return S.clamp(e,t[0],t[t.length-1])};var wo=nm;function im(e){this._value=e,this._valueType=wo.getPointType(e)}Object.defineProperties(im.prototype,{value:{get:function(){return this._value}}});im.prototype.findTimeInterval=function(e){};im.prototype.wrapTime=function(e){return 0};im.prototype.clampTime=function(e){return 0};im.prototype.evaluate=function(e,t){let n=this._value,i=this._valueType;return i===Number?n:i.clone(n,t)};var LU=im;function om(e){e=e??G.EMPTY_OBJECT;let t=e.points,n=e.times;this._times=n,this._points=t,this._pointType=wo.getPointType(t[0]),this._lastTimeIndex=0}Object.defineProperties(om.prototype,{times:{get:function(){return this._times}},points:{get:function(){return this._points}}});om.prototype.findTimeInterval=wo.prototype.findTimeInterval;om.prototype.wrapTime=wo.prototype.wrapTime;om.prototype.clampTime=wo.prototype.clampTime;om.prototype.evaluate=function(e,t){let n=this.points,i=this.times,o=this._lastTimeIndex=this.findTimeInterval(e,this._lastTimeIndex),r=(e-i[o])/(i[o+1]-i[o]);return this._pointType===Number?(1-r)*n[o]+r*n[o+1]:(c(t)||(t=new f),f.lerp(n[o],n[o+1],r,t))};var Yg=om;var FU={};FU.solve=function(e,t,n,i){let o=new Array(n.length),r=new Array(i.length),a=new Array(i.length),s;for(s=0;s<r.length;s++)r[s]=new f,a[s]=new f;o[0]=n[0]/t[0],r[0]=f.multiplyByScalar(i[0],1/t[0],r[0]);let A;for(s=1;s<o.length;++s)A=1/(t[s]-o[s-1]*e[s-1]),o[s]=n[s]*A,r[s]=f.subtract(i[s],f.multiplyByScalar(r[s-1],e[s-1],r[s]),r[s]),r[s]=f.multiplyByScalar(r[s],A,r[s]);for(A=1/(t[s]-o[s-1]*e[s-1]),r[s]=f.subtract(i[s],f.multiplyByScalar(r[s-1],e[s-1],r[s]),r[s]),r[s]=f.multiplyByScalar(r[s],A,r[s]),a[a.length-1]=r[r.length-1],s=a.length-2;s>=0;--s)a[s]=f.subtract(r[s],f.multiplyByScalar(a[s+1],o[s],a[s]),a[s]);return a};var xT=FU;var OU=[],kU=[],UU=[],zU=[];function xle(e,t,n){let i=OU,o=UU,r=kU,a=zU;i.length=o.length=e.length-1,r.length=a.length=e.length;let s;i[0]=r[0]=1,o[0]=0;let A=a[0];for(c(A)||(A=a[0]=new f),f.clone(t,A),s=1;s<i.length-1;++s)i[s]=o[s]=1,r[s]=4,A=a[s],c(A)||(A=a[s]=new f),f.subtract(e[s+1],e[s-1],A),f.multiplyByScalar(A,3,A);return i[s]=0,o[s]=1,r[s]=4,A=a[s],c(A)||(A=a[s]=new f),f.subtract(e[s+1],e[s-1],A),f.multiplyByScalar(A,3,A),r[s+1]=1,A=a[s+1],c(A)||(A=a[s+1]=new f),f.clone(n,A),xT.solve(i,r,o,a)}function Tle(e){let t=OU,n=UU,i=kU,o=zU;t.length=n.length=e.length-1,i.length=o.length=e.length;let r;t[0]=n[0]=1,i[0]=2;let a=o[0];for(c(a)||(a=o[0]=new f),f.subtract(e[1],e[0],a),f.multiplyByScalar(a,3,a),r=1;r<t.length;++r)t[r]=n[r]=1,i[r]=4,a=o[r],c(a)||(a=o[r]=new f),f.subtract(e[r+1],e[r-1],a),f.multiplyByScalar(a,3,a);return i[r]=2,a=o[r],c(a)||(a=o[r]=new f),f.subtract(e[r],e[r-1],a),f.multiplyByScalar(a,3,a),xT.solve(t,i,n,o)}function es(e){e=e??G.EMPTY_OBJECT;let t=e.points,n=e.times,i=e.inTangents,o=e.outTangents;this._times=n,this._points=t,this._pointType=wo.getPointType(t[0]),this._inTangents=i,this._outTangents=o,this._lastTimeIndex=0}Object.defineProperties(es.prototype,{times:{get:function(){return this._times}},points:{get:function(){return this._points}},inTangents:{get:function(){return this._inTangents}},outTangents:{get:function(){return this._outTangents}}});es.createC1=function(e){e=e??G.EMPTY_OBJECT;let t=e.times,n=e.points,i=e.tangents,o=i.slice(0,i.length-1),r=i.slice(1,i.length);return new es({times:t,points:n,inTangents:r,outTangents:o})};es.createNaturalCubic=function(e){e=e??G.EMPTY_OBJECT;let t=e.times,n=e.points;if(n.length<3)return new Yg({points:n,times:t});let i=Tle(n),o=i.slice(0,i.length-1),r=i.slice(1,i.length);return new es({times:t,points:n,inTangents:r,outTangents:o})};es.createClampedCubic=function(e){e=e??G.EMPTY_OBJECT;let t=e.times,n=e.points,i=e.firstTangent,o=e.lastTangent,r=wo.getPointType(n[0]);if(n.length<3)return new Yg({points:n,times:t});let a=xle(n,i,o),s=a.slice(0,a.length-1),A=a.slice(1,a.length);return new es({times:t,points:n,inTangents:A,outTangents:s})};es.hermiteCoefficientMatrix=new Q(2,-3,0,1,-2,3,0,0,1,-2,1,0,1,-1,0,0);es.prototype.findTimeInterval=wo.prototype.findTimeInterval;var Sle=new re,rm=new f;es.prototype.wrapTime=wo.prototype.wrapTime;es.prototype.clampTime=wo.prototype.clampTime;es.prototype.evaluate=function(e,t){let n=this.points,i=this.times,o=this.inTangents,r=this.outTangents;this._lastTimeIndex=this.findTimeInterval(e,this._lastTimeIndex);let a=this._lastTimeIndex,s=i[a+1]-i[a],A=(e-i[a])/s,l=Sle;l.z=A,l.y=A*A,l.x=l.y*A,l.w=1;let d=Q.multiplyByVector(es.hermiteCoefficientMatrix,l,l);d.z*=s,d.w*=s;let m=this._pointType;return m===Number?n[a]*d.x+n[a+1]*d.y+r[a]*d.z+o[a]*d.w:(c(t)||(t=new m),t=m.multiplyByScalar(n[a],d.x,t),m.multiplyByScalar(n[a+1],d.y,rm),m.add(t,rm,t),m.multiplyByScalar(r[a],d.z,rm),m.add(t,rm,t),m.multiplyByScalar(o[a],d.w,rm),m.add(t,rm,t))};var GU=es;function am(e){e=e??G.EMPTY_OBJECT;let t=e.points,n=e.times;this._times=n,this._points=t,this._pointType=wo.getPointType(t[0]),this._lastTimeIndex=0}Object.defineProperties(am.prototype,{times:{get:function(){return this._times}},points:{get:function(){return this._points}}});am.prototype.findTimeInterval=wo.prototype.findTimeInterval;am.prototype.wrapTime=wo.prototype.wrapTime;am.prototype.clampTime=wo.prototype.clampTime;am.prototype.evaluate=function(e,t){let n=this.points;this._lastTimeIndex=this.findTimeInterval(e,this._lastTimeIndex);let i=this._lastTimeIndex,o=this._pointType;return o===Number?n[i]:(c(t)||(t=new o),o.clone(n[i],t))};var HU=am;function wle(e){let t=e.points,n=e.times;return function(i,o){c(o)||(o=new gt);let r=e._lastTimeIndex=e.findTimeInterval(i,e._lastTimeIndex),a=(i-n[r])/(n[r+1]-n[r]),s=t[r],A=t[r+1];return gt.fastSlerp(s,A,a,o)}}function sm(e){e=e??G.EMPTY_OBJECT;let t=e.points,n=e.times;this._times=n,this._points=t,this._evaluateFunction=wle(this),this._lastTimeIndex=0}Object.defineProperties(sm.prototype,{times:{get:function(){return this._times}},points:{get:function(){return this._points}}});sm.prototype.findTimeInterval=wo.prototype.findTimeInterval;sm.prototype.wrapTime=wo.prototype.wrapTime;sm.prototype.clampTime=wo.prototype.clampTime;sm.prototype.evaluate=function(e,t){return this._evaluateFunction(e,t)};var VU=sm;var cm=Rt.AnimatedPropertyType;function TT(e){e=e??G.EMPTY_OBJECT;let t=e.channel,n=e.runtimeAnimation,i=e.runtimeNode;this._channel=t,this._runtimeAnimation=n,this._runtimeNode=i,this._splines=[],this._path=void 0,Mle(this)}Object.defineProperties(TT.prototype,{channel:{get:function(){return this._channel}},runtimeAnimation:{get:function(){return this._runtimeAnimation}},runtimeNode:{get:function(){return this._runtimeNode}},splines:{get:function(){return this._splines}}});function Dle(e,t){let n=[],i=[],o=[],r=t.length;for(let a=0;a<r;a+=3)i.push(t[a]),n.push(t[a+1]),o.push(t[a+2]);return i.splice(0,1),o.length=o.length-1,new GU({times:e,points:n,inTangents:i,outTangents:o})}function jU(e,t,n,i){if(e.length===1&&t.length===1)return new LU(t[0]);switch(n){case tf.STEP:return new HU({times:e,points:t});case tf.CUBICSPLINE:return Dle(e,t);case tf.LINEAR:return i===cm.ROTATION?new VU({times:e,points:t}):new Yg({times:e,points:t})}}function Qle(e,t,n,i,o){let r=[];if(i===cm.WEIGHTS){let s=t.length/o,A,l;for(A=0;A<o;A++){let d=new Array(s),m=A;if(n===tf.CUBICSPLINE)for(l=0;l<s;l+=3)d[l]=t[m],d[l+1]=t[m+o],d[l+2]=t[m+2*o],m+=o*3;else for(l=0;l<s;l++)d[l]=t[m],m+=o;r.push(jU(e,d,n,i))}}else r.push(jU(e,t,n,i));return r}var Rle=new f,vle=new gt;function Mle(e){let t=e._channel,n=t.sampler,i=n.input,o=n.output,r=n.interpolation,s=t.target.path,A=e._runtimeNode,l=c(A.morphWeights)?A.morphWeights.length:1,d=Qle(i,o,r,s,l);e._splines=d,e._path=s}TT.prototype.animate=function(e){let t=this._splines,n=this._path,i=this._runtimeAnimation.model,o=this._runtimeNode;if(n===cm.WEIGHTS){let r=o.morphWeights,a=r.length;for(let s=0;s<a;s++){let A=t[s],l=i.clampAnimations?A.clampTime(e):A.wrapTime(e);r[s]=A.evaluate(l)}}else{if(o.userAnimated)return;{let r=t[0],a=i.clampAnimations?r.clampTime(e):r.wrapTime(e);n===cm.TRANSLATION||n===cm.SCALE?o[n]=r.evaluate(a,Rle):n===cm.ROTATION&&(o[n]=r.evaluate(a,vle))}}};var YU=TT;function ST(e,t,n){this._animation=t,this._name=t.name,this._runtimeChannels=void 0,this._startTime=Ue.clone(n.startTime),this._delay=n.delay??0,this._stopTime=Ue.clone(n.stopTime),this.removeOnStop=n.removeOnStop??!1,this._multiplier=n.multiplier??1,this._reverse=n.reverse??!1,this._loop=n.loop??Rl.NONE,this._animationTime=n.animationTime,this._prevAnimationDelta=void 0,this.start=new Le,this.update=new Le,this.stop=new Le,this._state=Af.STOPPED,this._computedStartTime=void 0,this._duration=void 0;let i=this;this._raiseStartEvent=function(){i.start.raiseEvent(e,i)},this._updateEventTime=0,this._raiseUpdateEvent=function(){i.update.raiseEvent(e,i,i._updateEventTime)},this._raiseStopEvent=function(){i.stop.raiseEvent(e,i)},this._model=e,this._localStartTime=void 0,this._localStopTime=void 0,Ple(this)}Object.defineProperties(ST.prototype,{animation:{get:function(){return this._animation}},name:{get:function(){return this._name}},runtimeChannels:{get:function(){return this._runtimeChannels}},model:{get:function(){return this._model}},localStartTime:{get:function(){return this._localStartTime}},localStopTime:{get:function(){return this._localStopTime}},startTime:{get:function(){return this._startTime}},delay:{get:function(){return this._delay}},stopTime:{get:function(){return this._stopTime}},multiplier:{get:function(){return this._multiplier}},reverse:{get:function(){return this._reverse}},loop:{get:function(){return this._loop}},animationTime:{get:function(){return this._animationTime}}});function Ple(e){let t=Number.MAX_VALUE,n=-Number.MAX_VALUE,i=e._model.sceneGraph,r=e._animation.channels,a=r.length,s=[];for(let A=0;A<a;A++){let l=r[A],d=l.target;if(!c(d))continue;let m=d.node.index,p=i._runtimeNodes[m],g=new YU({channel:l,runtimeAnimation:e,runtimeNode:p}),h=l.sampler.input;t=Math.min(t,h[0]),n=Math.max(n,h[h.length-1]),s.push(g)}e._runtimeChannels=s,e._localStartTime=t,e._localStopTime=n}ST.prototype.animate=function(e){let t=this._runtimeChannels,n=t.length;for(let i=0;i<n;i++)t[i].animate(e)};var WU=ST;function Fl(e){this.animationAdded=new Le,this.animationRemoved=new Le,this.animateWhilePaused=!1,this._model=e,this._runtimeAnimations=[],this._previousTime=void 0}Object.defineProperties(Fl.prototype,{length:{get:function(){return this._runtimeAnimations.length}},model:{get:function(){return this._model}}});function wT(e,t,n){let i=e._model,o=new WU(i,t,n);return e._runtimeAnimations.push(o),e.animationAdded.raiseEvent(i,o),o}Fl.prototype.add=function(e){e=e??G.EMPTY_OBJECT;let n=this._model.sceneGraph.components.animations,i=e.index;if(c(i))return wT(this,n[i],e);let o=n.length;for(let r=0;r<o;++r)if(n[r].name===e.name){i=r;break}return wT(this,n[i],e)};Fl.prototype.addAll=function(e){e=e??G.EMPTY_OBJECT;let n=this._model.sceneGraph.components.animations,i=[],o=n.length;for(let r=0;r<o;++r){let a=wT(this,n[r],e);i.push(a)}return i};Fl.prototype.remove=function(e){if(!c(e))return!1;let t=this._runtimeAnimations,n=t.indexOf(e);return n!==-1?(t.splice(n,1),this.animationRemoved.raiseEvent(this._model,e),!0):!1};Fl.prototype.removeAll=function(){let e=this._model,t=this._runtimeAnimations,n=t.length;this._runtimeAnimations.length=0;for(let i=0;i<n;++i)this.animationRemoved.raiseEvent(e,t[i])};Fl.prototype.contains=function(e){return c(e)?this._runtimeAnimations.indexOf(e)!==-1:!1};Fl.prototype.get=function(e){return this._runtimeAnimations[e]};var GI=[];function Nle(e,t,n){return function(){e.animationRemoved.raiseEvent(t,n)}}Fl.prototype.update=function(e){let t=this._runtimeAnimations,n=t.length;if(n===0)return this._previousTime=void 0,!1;if(!this.animateWhilePaused&&Ue.equals(e.time,this._previousTime))return!1;this._previousTime=Ue.clone(e.time,this._previousTime);let i=!1,o=e.time,r=this._model;for(let a=0;a<n;++a){let s=t[a];c(s._computedStartTime)||(s._computedStartTime=Ue.addSeconds(s.startTime??o,s.delay,new Ue)),c(s._duration)||(s._duration=s.localStopTime*(1/s.multiplier));let A=s._computedStartTime,l=s._duration,d=s.stopTime,m=Ue.lessThanOrEquals(A,o),p=c(d)&&Ue.greaterThan(o,d),g=0;if(l!==0){let _=Ue.secondsDifference(p?d:o,A);g=c(s._animationTime)?s._animationTime(l,_):_/l}let h=s.loop===Rl.REPEAT||s.loop===Rl.MIRRORED_REPEAT,C=(m||h&&!c(s.startTime))&&(g<=1||h)&&!p;if(g===s._prevAnimationDelta){let _=s._state===Af.STOPPED;if(C!==_)continue}if(s._prevAnimationDelta=g,C||s._state===Af.ANIMATING){if(C&&s._state===Af.STOPPED&&(s._state=Af.ANIMATING,s.start.numberOfListeners>0&&e.afterRender.push(s._raiseStartEvent)),s.loop===Rl.REPEAT)g=g-Math.floor(g);else if(s.loop===Rl.MIRRORED_REPEAT){let I=Math.floor(g),b=g-I;g=I%2===1?1-b:b}s.reverse&&(g=1-g);let _=g*l*s.multiplier;_=S.clamp(_,s.localStartTime,s.localStopTime),s.animate(_),s.update.numberOfListeners>0&&(s._updateEventTime=_,e.afterRender.push(s._raiseUpdateEvent)),i=!0,C||(s._state=Af.STOPPED,s.stop.numberOfListeners>0&&e.afterRender.push(s._raiseStopEvent),s.removeOnStop&&GI.push(s))}}n=GI.length;for(let a=0;a<n;++a){let s=GI[a];t.splice(t.indexOf(s),1),e.afterRender.push(Nle(this,r,s))}return GI.length=0,i};var qU=Fl;function Bd(e){this._model=e.model,this._featureTable=e.featureTable,this._featureId=e.featureId,this._color=void 0}Object.defineProperties(Bd.prototype,{show:{get:function(){return this._featureTable.getShow(this._featureId)},set:function(e){this._featureTable.setShow(this._featureId,e)}},color:{get:function(){return c(this._color)||(this._color=new J),this._featureTable.getColor(this._featureId,this._color)},set:function(e){this._featureTable.setColor(this._featureId,e)}},primitive:{get:function(){return this._model}},featureTable:{get:function(){return this._featureTable}},featureId:{get:function(){return this._featureId}}});Bd.prototype.hasProperty=function(e){return this._featureTable.hasProperty(this._featureId,e)};Bd.prototype.getProperty=function(e){return this._featureTable.getProperty(this._featureId,e)};Bd.prototype.getPropertyInherited=function(e){return this._featureTable.hasPropertyBySemantic(this._featureId,e)?this._featureTable.getPropertyBySemantic(this._featureId,e):this._featureTable.getProperty(this._featureId,e)};Bd.prototype.getPropertyIds=function(e){return this._featureTable.getPropertyIds(e)};Bd.prototype.setProperty=function(e,t){return this._featureTable.setProperty(this._featureId,e,t)};var Wg=Bd;var qg={ALL_OPAQUE:0,ALL_TRANSLUCENT:1,OPAQUE_AND_TRANSLUCENT:2};qg.getStyleCommandsNeeded=function(e,t){return t===0?qg.ALL_OPAQUE:t===e?qg.ALL_TRANSLUCENT:qg.OPAQUE_AND_TRANSLUCENT};var lf=Object.freeze(qg);var uf={GLTF:"GLTF",TILE_GLTF:"TILE_GLTF",TILE_B3DM:"B3DM",TILE_I3DM:"I3DM",TILE_PNTS:"PNTS",TILE_GEOJSON:"TILE_GEOJSON"};uf.is3DTiles=function(e){switch(e){case uf.TILE_GLTF:case uf.TILE_B3DM:case uf.TILE_I3DM:case uf.TILE_PNTS:case uf.TILE_GEOJSON:return!0;case uf.GLTF:return!1}};var Do=Object.freeze(uf);function fo(e){let t=e.model,n=e.propertyTable;this._propertyTable=n,this._model=t,this._features=void 0,this._featuresLength=0,this._batchTexture=void 0,this._styleCommandsNeededDirty=!1,this._styleCommandsNeeded=lf.ALL_OPAQUE,Lle(this)}Object.defineProperties(fo.prototype,{batchTexture:{get:function(){return this._batchTexture}},featuresLength:{get:function(){return this._featuresLength}},batchTextureByteLength:{get:function(){return c(this._batchTexture)?this._batchTexture.byteLength:0}},styleCommandsNeededDirty:{get:function(){return this._styleCommandsNeededDirty}}});function Lle(e){let t=e._model,n=Do.is3DTiles(t.type),i=e._propertyTable.count;if(i===0)return;let o,r=new Array(i);if(n){let a=t.content;for(o=0;o<i;o++)r[o]=new Cs(a,o)}else for(o=0;o<i;o++)r[o]=new Wg({model:t,featureId:o,featureTable:e});e._features=r,e._featuresLength=i,e._batchTexture=new ec({featuresLength:i,owner:e,statistics:n?t.content.tileset.statistics:void 0})}fo.prototype.update=function(e){this._styleCommandsNeededDirty=!1,this._batchTexture.update(void 0,e);let t=lf.getStyleCommandsNeeded(this._featuresLength,this._batchTexture.translucentFeaturesLength);this._styleCommandsNeeded!==t&&(this._styleCommandsNeededDirty=!0,this._styleCommandsNeeded=t)};fo.prototype.setShow=function(e,t){this._batchTexture.setShow(e,t)};fo.prototype.setAllShow=function(e){this._batchTexture.setAllShow(e)};fo.prototype.getShow=function(e){return this._batchTexture.getShow(e)};fo.prototype.setColor=function(e,t){this._batchTexture.setColor(e,t)};fo.prototype.setAllColor=function(e){this._batchTexture.setAllColor(e)};fo.prototype.getColor=function(e,t){return this._batchTexture.getColor(e,t)};fo.prototype.getPickColor=function(e){return this._batchTexture.getPickColor(e)};fo.prototype.getFeature=function(e){return this._features[e]};fo.prototype.hasProperty=function(e,t){return this._propertyTable.hasProperty(e,t)};fo.prototype.hasPropertyBySemantic=function(e,t){return this._propertyTable.hasPropertyBySemantic(e,t)};fo.prototype.getProperty=function(e,t){return this._propertyTable.getProperty(e,t)};fo.prototype.getPropertyBySemantic=function(e,t){return this._propertyTable.getPropertyBySemantic(e,t)};fo.prototype.getPropertyIds=function(e){return this._propertyTable.getPropertyIds(e)};fo.prototype.setProperty=function(e,t,n){return this._propertyTable.setProperty(e,t,n)};fo.prototype.isClass=function(e,t){return this._propertyTable.isClass(e,t)};fo.prototype.isExactClass=function(e,t){return this._propertyTable.isExactClass(e,t)};fo.prototype.getExactClassName=function(e){return this._propertyTable.getExactClassName(e)};var Fle=new J;fo.prototype.applyStyle=function(e){if(!c(e)){this.setAllColor(ec.DEFAULT_COLOR_VALUE),this.setAllShow(ec.DEFAULT_SHOW_VALUE);return}for(let t=0;t<this._featuresLength;t++){let n=this.getFeature(t),i=c(e.color)?e.color.evaluateColor(n,Fle)??ec.DEFAULT_COLOR_VALUE:ec.DEFAULT_COLOR_VALUE,o=c(e.show)?e.show.evaluate(n)??ec.DEFAULT_SHOW_VALUE:ec.DEFAULT_SHOW_VALUE;this.setColor(t,i),this.setShow(t,o)}};fo.prototype.isDestroyed=function(){return!1};fo.prototype.destroy=function(e){this._batchTexture=this._batchTexture&&this._batchTexture.destroy(),me(this)};var JU=fo;var KU={name:"TilesetPipelineStage"};KU.process=function(e,t,n){if(t.hasSkipLevelOfDetail(n)){e.shaderBuilder.addDefine("POLYGON_OFFSET",void 0,ie.FRAGMENT);let r={u_polygonOffset:function(){return L.ZERO}};e.uniformMap=dt(r,e.uniformMap),e.hasSkipLevelOfDetail=!0}let i=e.renderStateOptions;i.stencilTest=wt.setCesium3DTileBit(),i.stencilMask=wt.CESIUM_3D_TILE_MASK};var XU=KU;var ZU=`// robust iterative solution without trig functions
// https://github.com/0xfaded/ellipse_demo/issues/1
// https://stackoverflow.com/questions/22959698/distance-from-given-point-to-given-ellipse
//
// This version uses only a single iteration for best performance. For fog
// rendering, the difference is negligible.
vec2 nearestPointOnEllipseFast(vec2 pos, vec2 radii) {
    vec2 p = abs(pos);
    vec2 inverseRadii = 1.0 / radii;
    vec2 evoluteScale = (radii.x * radii.x - radii.y * radii.y) * vec2(1.0, -1.0) * inverseRadii;

    // We describe the ellipse parametrically: v = radii * vec2(cos(t), sin(t))
    // but store the cos and sin of t in a vec2 for efficiency.
    // Initial guess: t = cos(pi/4)
    vec2 tTrigs = vec2(0.70710678118);
    vec2 v = radii * tTrigs;

    // Find the evolute of the ellipse (center of curvature) at v.
    vec2 evolute = evoluteScale * tTrigs * tTrigs * tTrigs;
    // Find the (approximate) intersection of p - evolute with the ellipsoid.
    vec2 q = normalize(p - evolute) * length(v - evolute);
    // Update the estimate of t.
    tTrigs = (q + evolute) * inverseRadii;
    tTrigs = normalize(clamp(tTrigs, 0.0, 1.0));
    v = radii * tTrigs;

    return v * sign(pos);
}

vec3 computeEllipsoidPositionWC(vec3 positionMC) {
    // Get the world-space position and project onto a meridian plane of
    // the ellipsoid
    vec3 positionWC = (czm_model * vec4(positionMC, 1.0)).xyz;

    vec2 positionEllipse = vec2(length(positionWC.xy), positionWC.z);
    vec2 nearestPoint = nearestPointOnEllipseFast(positionEllipse, czm_ellipsoidRadii.xz);

    // Reconstruct a 3D point in world space
    return vec3(nearestPoint.x * normalize(positionWC.xy), nearestPoint.y);
}

void applyFog(inout vec4 color, vec4 groundAtmosphereColor, vec3 lightDirection, float distanceToCamera) {

    vec3 fogColor = groundAtmosphereColor.rgb;

    // If there is dynamic lighting, apply that to the fog.
    const float NONE = 0.0;
    if (czm_atmosphereDynamicLighting != NONE) {
        float darken = clamp(dot(normalize(czm_viewerPositionWC), lightDirection), czm_fogMinimumBrightness, 1.0);
        fogColor *= darken;
    }

    // Tonemap if HDR rendering is disabled
    #ifndef HDR
        fogColor.rgb = czm_pbrNeutralTonemapping(fogColor.rgb);
        fogColor.rgb = czm_inverseGamma(fogColor.rgb);
    #endif

    vec3 withFog = czm_fog(distanceToCamera, color.rgb, fogColor, czm_fogVisualDensityScalar);
    color = vec4(withFog, color.a);
}

void atmosphereStage(inout vec4 color, in ProcessedAttributes attributes) {
    vec3 rayleighColor;
    vec3 mieColor;
    float opacity;

    vec3 positionWC;
    vec3 lightDirection;

    // When the camera is in space, compute the position per-fragment for
    // more accurate ground atmosphere. All other cases will use
    //
    // The if condition will be added in https://github.com/CesiumGS/cesium/issues/11717
    if (false) {
        positionWC = computeEllipsoidPositionWC(attributes.positionMC);
        lightDirection = czm_getDynamicAtmosphereLightDirection(positionWC, czm_atmosphereDynamicLighting);

        // The fog color is derived from the ground atmosphere color
        czm_computeGroundAtmosphereScattering(
            positionWC,
            lightDirection,
            rayleighColor,
            mieColor,
            opacity
        );
    } else {
        positionWC = attributes.positionWC;
        lightDirection = czm_getDynamicAtmosphereLightDirection(positionWC, czm_atmosphereDynamicLighting);
        rayleighColor = v_atmosphereRayleighColor;
        mieColor = v_atmosphereMieColor;
        opacity = v_atmosphereOpacity;
    }

    //color correct rayleigh and mie colors
    const bool ignoreBlackPixels = true;
    rayleighColor = czm_applyHSBShift(rayleighColor, czm_atmosphereHsbShift, ignoreBlackPixels);
    mieColor = czm_applyHSBShift(mieColor, czm_atmosphereHsbShift, ignoreBlackPixels);

    vec4 groundAtmosphereColor = czm_computeAtmosphereColor(positionWC, lightDirection, rayleighColor, mieColor, opacity);

    if (u_isInFog) {
        float distanceToCamera = length(attributes.positionEC);
        applyFog(color, groundAtmosphereColor, lightDirection, distanceToCamera);
    } else {
        // Ground atmosphere
    }
}
`;var $U=`void atmosphereStage(ProcessedAttributes attributes) {
    vec3 lightDirection = czm_getDynamicAtmosphereLightDirection(v_positionWC, czm_atmosphereDynamicLighting);

    czm_computeGroundAtmosphereScattering(
        // This assumes the geometry stage came before this.
        v_positionWC,
        lightDirection,
        v_atmosphereRayleighColor,
        v_atmosphereMieColor,
        v_atmosphereOpacity
    );
}
`;var e3={name:"AtmospherePipelineStage"};e3.process=function(e,t,n){let i=e.shaderBuilder;i.addDefine("HAS_ATMOSPHERE",void 0,ie.BOTH),i.addDefine("COMPUTE_POSITION_WC_ATMOSPHERE",void 0,ie.BOTH),i.addVarying("vec3","v_atmosphereRayleighColor"),i.addVarying("vec3","v_atmosphereMieColor"),i.addVarying("float","v_atmosphereOpacity"),i.addVertexLines([$U]),i.addFragmentLines([ZU]),i.addUniform("bool","u_isInFog",ie.FRAGMENT),e.uniformMap.u_isInFog=function(){let o=f.distance(n.camera.positionWC,t.boundingSphere.center);return S.fog(o,n.fog.density)>S.EPSILON3}};var t3=e3;var n3=`#ifdef DIFFUSE_IBL
vec3 sampleDiffuseEnvironment(vec3 cubeDir)
{
    #ifdef CUSTOM_SPHERICAL_HARMONICS
        return czm_sphericalHarmonics(cubeDir, model_sphericalHarmonicCoefficients); 
    #else
        return czm_sphericalHarmonics(cubeDir, czm_sphericalHarmonicCoefficients); 
    #endif
}
#endif

#ifdef SPECULAR_IBL
vec3 sampleSpecularEnvironment(vec3 cubeDir, float roughness)
{
    #ifdef CUSTOM_SPECULAR_IBL
        float lod = roughness * model_specularEnvironmentMapsMaximumLOD;
        return czm_textureCube(model_specularEnvironmentMaps, cubeDir, lod).rgb;
    #else
        float lod = roughness * czm_specularEnvironmentMapsMaximumLOD;
        return czm_textureCube(czm_specularEnvironmentMaps, cubeDir, lod).rgb;
    #endif
}
vec3 computeSpecularIBL(vec3 cubeDir, float NdotV, vec3 f0, float roughness)
{
    // see https://bruop.github.io/ibl/ at Single Scattering Results
    // Roughness dependent fresnel, from Fdez-Aguera
    vec3 f90 = max(vec3(1.0 - roughness), f0);
    vec3 F = fresnelSchlick2(f0, f90, NdotV);

    vec2 brdfLut = texture(czm_brdfLut, vec2(NdotV, roughness)).rg;
    vec3 specularSample = sampleSpecularEnvironment(cubeDir, roughness);

    return specularSample * (F * brdfLut.x + brdfLut.y);
}
#endif

#if defined(DIFFUSE_IBL) || defined(SPECULAR_IBL)
/**
 * Compute the light contributions from environment maps and spherical harmonic coefficients.
 * See Fdez-Aguera, https://www.jcgt.org/published/0008/01/03/paper.pdf, for explanation
 * of the single- and multi-scattering terms.
 *
 * @param {vec3} viewDirectionEC Unit vector pointing from the fragment to the eye position.
 * @param {vec3} normalEC The surface normal in eye coordinates.
 * @param {czm_modelMaterial} The material properties.
 * @return {vec3} The computed HDR color.
 */
vec3 textureIBL(vec3 viewDirectionEC, vec3 normalEC, czm_modelMaterial material) {
    vec3 f0 = material.specular;
    float roughness = material.roughness;
    float specularWeight = 1.0;
    #ifdef USE_SPECULAR
        specularWeight = material.specularWeight;
    #endif
    float NdotV = clamp(dot(normalEC, viewDirectionEC), 0.0, 1.0);

    // see https://bruop.github.io/ibl/ at Single Scattering Results
    // Roughness dependent fresnel, from Fdez-Aguera
    vec3 f90 = max(vec3(1.0 - roughness), f0);
    vec3 singleScatterFresnel = fresnelSchlick2(f0, f90, NdotV);

    vec2 brdfLut = texture(czm_brdfLut, vec2(NdotV, roughness)).rg;
    vec3 FssEss = specularWeight * (singleScatterFresnel * brdfLut.x + brdfLut.y);

    #ifdef DIFFUSE_IBL
        vec3 normalMC = normalize(model_iblReferenceFrameMatrix * normalEC);
        vec3 irradiance = sampleDiffuseEnvironment(normalMC);

        vec3 averageFresnel = f0 + (1.0 - f0) / 21.0;
        float Ems = specularWeight * (1.0 - brdfLut.x - brdfLut.y);
        vec3 FmsEms = FssEss * averageFresnel * Ems / (1.0 - averageFresnel * Ems);
        vec3 dielectricScattering = (1.0 - FssEss - FmsEms) * material.diffuse;
        vec3 diffuseContribution = irradiance * (FmsEms + dielectricScattering) * model_iblFactor.x;
    #else
        vec3 diffuseContribution = vec3(0.0);
    #endif

    #ifdef USE_ANISOTROPY
        // Bend normal to account for anisotropic distortion of specular reflection
        vec3 anisotropyDirection = material.anisotropicB;
        vec3 anisotropicTangent = cross(anisotropyDirection, viewDirectionEC);
        vec3 anisotropicNormal = cross(anisotropicTangent, anisotropyDirection);
        float bendFactor = 1.0 - material.anisotropyStrength * (1.0 - roughness);
        float bendFactorPow4 = bendFactor * bendFactor * bendFactor * bendFactor;
        vec3 bentNormal = normalize(mix(anisotropicNormal, normalEC, bendFactorPow4));
        vec3 reflectEC = reflect(-viewDirectionEC, bentNormal);
    #else
        vec3 reflectEC = reflect(-viewDirectionEC, normalEC);
    #endif

    #ifdef SPECULAR_IBL
        vec3 reflectMC = normalize(model_iblReferenceFrameMatrix * reflectEC);
        vec3 radiance = sampleSpecularEnvironment(reflectMC, roughness);
        vec3 specularContribution = radiance * FssEss * model_iblFactor.y;
    #else
        vec3 specularContribution = vec3(0.0);
    #endif

    return diffuseContribution + specularContribution;
}
#endif
`;var i3={name:"ImageBasedLightingPipelineStage"},Ole=new L;i3.process=function(e,t,n){let i=t.imageBasedLighting,o=t.environmentMapManager,r=e.shaderBuilder,a;c(i.specularEnvironmentMaps)||(a=o.radianceCubeMap);let s=i.sphericalHarmonicCoefficients??o.sphericalHarmonicCoefficients;r.addDefine("USE_IBL_LIGHTING",void 0,ie.FRAGMENT),r.addUniform("vec2","model_iblFactor",ie.FRAGMENT),fg.isSupported(n.context)&&((i.useSphericalHarmonics||i.useSpecularEnvironmentMaps||i.enabled)&&r.addUniform("mat3","model_iblReferenceFrameMatrix",ie.FRAGMENT),c(a)&&r.addDefine("COMPUTE_POSITION_WC_ATMOSPHERE",void 0,ie.BOTH),c(s)&&c(s[0])?(r.addDefine("DIFFUSE_IBL",void 0,ie.FRAGMENT),r.addDefine("CUSTOM_SPHERICAL_HARMONICS",void 0,ie.FRAGMENT),r.addUniform("vec3","model_sphericalHarmonicCoefficients[9]",ie.FRAGMENT)):i.useDefaultSphericalHarmonics&&r.addDefine("DIFFUSE_IBL",void 0,ie.FRAGMENT),c(i.specularEnvironmentCubeMap)&&i.specularEnvironmentCubeMap.ready||c(a)?(r.addDefine("SPECULAR_IBL",void 0,ie.FRAGMENT),r.addDefine("CUSTOM_SPECULAR_IBL",void 0,ie.FRAGMENT),r.addUniform("samplerCube","model_specularEnvironmentMaps",ie.FRAGMENT),r.addUniform("float","model_specularEnvironmentMapsMaximumLOD",ie.FRAGMENT)):t.useDefaultSpecularMaps&&r.addDefine("SPECULAR_IBL",void 0,ie.FRAGMENT)),r.addFragmentLines(n3);let A={model_iblFactor:function(){return L.multiplyByScalar(i.imageBasedLightingFactor,o?.intensity||1,Ole)},model_iblReferenceFrameMatrix:function(){return t._iblReferenceFrameMatrix},model_sphericalHarmonicCoefficients:function(){return s},model_specularEnvironmentMaps:function(){return i.specularEnvironmentCubeMap.texture},model_specularEnvironmentMapsMaximumLOD:function(){return i.specularEnvironmentCubeMap.maximumMipmapLevel}};c(a)&&(A.model_specularEnvironmentMaps=function(){return a},A.model_specularEnvironmentMapsMaximumLOD=function(){return o.maximumMipmapLevel}),e.uniformMap=dt(A,e.uniformMap)};var o3=i3;var kle=S.EPSILON16;function QT(e){e=e??G.EMPTY_OBJECT;let t=e.stage,n=e.runtimeArticulation;this._stage=t,this._runtimeArticulation=n,this._name=t.name,this._type=t.type,this._minimumValue=t.minimumValue,this._maximumValue=t.maximumValue,this._currentValue=t.initialValue}Object.defineProperties(QT.prototype,{stage:{get:function(){return this._stage}},runtimeArticulation:{get:function(){return this._runtimeArticulation}},name:{get:function(){return this._name}},type:{get:function(){return this._type}},minimumValue:{get:function(){return this._minimumValue}},maximumValue:{get:function(){return this._maximumValue}},currentValue:{get:function(){return this._currentValue},set:function(e){e=S.clamp(e,this.minimumValue,this.maximumValue),S.equalsEpsilon(this._currentValue,e,kle)||(this._currentValue=e,this.runtimeArticulation._dirty=!0)}}});var Ule=new f,DT=new ne;QT.prototype.applyStageToMatrix=function(e){let t=this.type,n=this.currentValue,i=Ule,o;switch(t){case Is.XROTATE:o=ne.fromRotationX(S.toRadians(n),DT),e=Q.multiplyByMatrix3(e,o,e);break;case Is.YROTATE:o=ne.fromRotationY(S.toRadians(n),DT),e=Q.multiplyByMatrix3(e,o,e);break;case Is.ZROTATE:o=ne.fromRotationZ(S.toRadians(n),DT),e=Q.multiplyByMatrix3(e,o,e);break;case Is.XTRANSLATE:i.x=n,i.y=0,i.z=0,e=Q.multiplyByTranslation(e,i,e);break;case Is.YTRANSLATE:i.x=0,i.y=n,i.z=0,e=Q.multiplyByTranslation(e,i,e);break;case Is.ZTRANSLATE:i.x=0,i.y=0,i.z=n,e=Q.multiplyByTranslation(e,i,e);break;case Is.XSCALE:i.x=n,i.y=1,i.z=1,e=Q.multiplyByScale(e,i,e);break;case Is.YSCALE:i.x=1,i.y=n,i.z=1,e=Q.multiplyByScale(e,i,e);break;case Is.ZSCALE:i.x=1,i.y=1,i.z=n,e=Q.multiplyByScale(e,i,e);break;case Is.UNIFORMSCALE:e=Q.multiplyByUniformScale(e,n,e);break;default:break}return e};var r3=QT;function HI(e){e=e??G.EMPTY_OBJECT;let t=e.articulation,n=e.sceneGraph;this._articulation=t,this._sceneGraph=n,this._name=t.name,this._runtimeStages=[],this._runtimeStagesByName={},this._runtimeNodes=[],this._dirty=!0,zle(this)}Object.defineProperties(HI.prototype,{articulation:{get:function(){return this._articulation}},sceneGraph:{get:function(){return this._sceneGraph}},name:{get:function(){return this._name}},runtimeStages:{get:function(){return this._runtimeStages}},runtimeNodes:{get:function(){return this._runtimeNodes}}});function zle(e){let n=e.articulation.stages,i=n.length,o=e._runtimeStages,r=e._runtimeStagesByName;for(let a=0;a<i;a++){let s=n[a],A=new r3({stage:s,runtimeArticulation:e});o.push(A);let l=s.name;r[l]=A}}HI.prototype.setArticulationStage=function(e,t){let n=this._runtimeStagesByName[e];c(n)&&(n.currentValue=t)};var Gle=new Q,Hle=new Q;HI.prototype.apply=function(){if(!this._dirty)return;this._dirty=!1;let e=Q.clone(Q.IDENTITY,Gle),t,n=this._runtimeStages,i=n.length;for(t=0;t<i;t++)e=n[t].applyStageToMatrix(e);let o=this._runtimeNodes,r=o.length;for(t=0;t<r;t++){let a=o[t],s=Q.multiplyTransformation(a.originalTransform,e,Hle);a.transform=s}};var a3=HI;var s3=`void modelColorStage(inout czm_modelMaterial material)
{
    material.diffuse = mix(material.diffuse, model_color.rgb, model_colorBlend);
    float highlight = ceil(model_colorBlend);
    material.diffuse *= mix(model_color.rgb, vec3(1.0), highlight);
    material.alpha *= model_color.a;
}
`;var Am={name:"ModelColorPipelineStage",COLOR_UNIFORM_NAME:"model_color",COLOR_BLEND_UNIFORM_NAME:"model_colorBlend"};Am.process=function(e,t,n){let i=e.shaderBuilder;i.addDefine("HAS_MODEL_COLOR",void 0,ie.FRAGMENT),i.addFragmentLines(s3);let o={},r=t.color;r.alpha===0&&!t.hasSilhouette(n)&&(e.renderStateOptions.colorMask={red:!1,green:!1,blue:!1,alpha:!1}),r.alpha<1&&(e.alphaOptions.pass=He.TRANSLUCENT),i.addUniform("vec4",Am.COLOR_UNIFORM_NAME,ie.FRAGMENT),o[Am.COLOR_UNIFORM_NAME]=function(){return t.color},i.addUniform("float",Am.COLOR_BLEND_UNIFORM_NAME,ie.FRAGMENT),o[Am.COLOR_BLEND_UNIFORM_NAME]=function(){return qh.getColorBlend(t.colorBlendMode,t.colorBlendAmount)},e.uniformMap=dt(o,e.uniformMap)};var Jg=Am;var c3=`#ifdef USE_CLIPPING_PLANES_FLOAT_TEXTURE
vec4 getClippingPlane(
    highp sampler2D packedClippingPlanes,
    int clippingPlaneNumber,
    mat4 transform
) {
    int pixY = clippingPlaneNumber / CLIPPING_PLANES_TEXTURE_WIDTH;
    int pixX = clippingPlaneNumber - (pixY * CLIPPING_PLANES_TEXTURE_WIDTH);
    float pixelWidth = 1.0 / float(CLIPPING_PLANES_TEXTURE_WIDTH);
    float pixelHeight = 1.0 / float(CLIPPING_PLANES_TEXTURE_HEIGHT);
    float u = (float(pixX) + 0.5) * pixelWidth; // sample from center of pixel
    float v = (float(pixY) + 0.5) * pixelHeight;
    vec4 plane = texture(packedClippingPlanes, vec2(u, v));
    return czm_transformPlane(plane, transform);
}
#else
// Handle uint8 clipping texture instead
vec4 getClippingPlane(
    highp sampler2D packedClippingPlanes,
    int clippingPlaneNumber,
    mat4 transform
) {
    int clippingPlaneStartIndex = clippingPlaneNumber * 2; // clipping planes are two pixels each
    int pixY = clippingPlaneStartIndex / CLIPPING_PLANES_TEXTURE_WIDTH;
    int pixX = clippingPlaneStartIndex - (pixY * CLIPPING_PLANES_TEXTURE_WIDTH);
    float pixelWidth = 1.0 / float(CLIPPING_PLANES_TEXTURE_WIDTH);
    float pixelHeight = 1.0 / float(CLIPPING_PLANES_TEXTURE_HEIGHT);
    float u = (float(pixX) + 0.5) * pixelWidth; // sample from center of pixel
    float v = (float(pixY) + 0.5) * pixelHeight;
    vec4 oct32 = texture(packedClippingPlanes, vec2(u, v)) * 255.0;
    vec2 oct = vec2(oct32.x * 256.0 + oct32.y, oct32.z * 256.0 + oct32.w);
    vec4 plane;
    plane.xyz = czm_octDecode(oct, 65535.0);
    plane.w = czm_unpackFloat(texture(packedClippingPlanes, vec2(u + pixelWidth, v)));
    return czm_transformPlane(plane, transform);
}
#endif

float clip(vec4 fragCoord, sampler2D clippingPlanes, mat4 clippingPlanesMatrix) {
    vec4 position = czm_windowToEyeCoordinates(fragCoord);
    vec3 clipNormal = vec3(0.0);
    vec3 clipPosition = vec3(0.0);
    float pixelWidth = czm_metersPerPixel(position);
    
    #ifdef UNION_CLIPPING_REGIONS
    float clipAmount; // For union planes, we want to get the min distance. So we set the initial value to the first plane distance in the loop below.
    #else
    float clipAmount = 0.0;
    bool clipped = true;
    #endif

    for (int i = 0; i < CLIPPING_PLANES_LENGTH; ++i) {
        vec4 clippingPlane = getClippingPlane(clippingPlanes, i, clippingPlanesMatrix);
        clipNormal = clippingPlane.xyz;
        clipPosition = -clippingPlane.w * clipNormal;
        float amount = dot(clipNormal, (position.xyz - clipPosition)) / pixelWidth;
        
        #ifdef UNION_CLIPPING_REGIONS
        clipAmount = czm_branchFreeTernary(i == 0, amount, min(amount, clipAmount));
        if (amount <= 0.0) {
            discard;
        }
        #else
        clipAmount = max(amount, clipAmount);
        clipped = clipped && (amount <= 0.0);
        #endif
    }

    #ifndef UNION_CLIPPING_REGIONS
    if (clipped) {
        discard;
    }
    #endif
    
    return clipAmount;
}

void modelClippingPlanesStage(inout vec4 color)
{
    float clipDistance = clip(gl_FragCoord, model_clippingPlanes, model_clippingPlanesMatrix);
    vec4 clippingPlanesEdgeColor = vec4(1.0);
    clippingPlanesEdgeColor.rgb = model_clippingPlanesEdgeStyle.rgb;
    float clippingPlanesEdgeWidth = model_clippingPlanesEdgeStyle.a;
    
    if (clipDistance > 0.0 && clipDistance < clippingPlanesEdgeWidth) {
        color = clippingPlanesEdgeColor;
    }
}
`;var A3={name:"ModelClippingPlanesPipelineStage"},Vle=new L;A3.process=function(e,t,n){let i=t.clippingPlanes,o=n.context,r=e.shaderBuilder;r.addDefine("HAS_CLIPPING_PLANES",void 0,ie.FRAGMENT),r.addDefine("CLIPPING_PLANES_LENGTH",i.length,ie.FRAGMENT),i.unionClippingRegions&&r.addDefine("UNION_CLIPPING_REGIONS",void 0,ie.FRAGMENT),Yc.useFloatTexture(o)&&r.addDefine("USE_CLIPPING_PLANES_FLOAT_TEXTURE",void 0,ie.FRAGMENT);let a=Yc.getTextureResolution(i,o,Vle);r.addDefine("CLIPPING_PLANES_TEXTURE_WIDTH",a.x,ie.FRAGMENT),r.addDefine("CLIPPING_PLANES_TEXTURE_HEIGHT",a.y,ie.FRAGMENT),r.addUniform("sampler2D","model_clippingPlanes",ie.FRAGMENT),r.addUniform("vec4","model_clippingPlanesEdgeStyle",ie.FRAGMENT),r.addUniform("mat4","model_clippingPlanesMatrix",ie.FRAGMENT),r.addFragmentLines(c3);let s={model_clippingPlanes:function(){return i.texture},model_clippingPlanesEdgeStyle:function(){let A=J.clone(i.edgeColor);return A.alpha=i.edgeWidth,A},model_clippingPlanesMatrix:function(){return t._clippingPlanesMatrix}};e.uniformMap=dt(s,e.uniformMap)};var l3=A3;var u3=`void modelClippingPolygonsStage(ProcessedAttributes attributes)
{
    vec2 sphericalLatLong = czm_approximateSphericalCoordinates(v_positionWC);
    sphericalLatLong.y = czm_branchFreeTernary(sphericalLatLong.y < czm_pi, sphericalLatLong.y, sphericalLatLong.y - czm_twoPi);

    vec2 minDistance = vec2(czm_infinity);
    v_regionIndex = -1;
    v_clippingPosition = vec2(czm_infinity);

    for (int regionIndex = 0; regionIndex < CLIPPING_POLYGON_REGIONS_LENGTH; regionIndex++) {
        vec4 extents = czm_unpackClippingExtents(model_clippingExtents, regionIndex);
        vec2 rectUv = (sphericalLatLong.yx - extents.yx) * extents.wz;

        vec2 clamped = clamp(rectUv, vec2(0.0), vec2(1.0));
        vec2 distance = abs(rectUv - clamped) * extents.wz;
        
        if (minDistance.x > distance.x || minDistance.y > distance.y) {
            minDistance = distance;
            v_clippingPosition = rectUv;
        }

        float threshold = 0.01;
        if (rectUv.x > threshold && rectUv.y > threshold && rectUv.x < 1.0 - threshold && rectUv.y < 1.0 - threshold) {
            v_regionIndex = regionIndex;
        }
    }
}
`;var f3=`void modelClippingPolygonsStage()
{
    vec2 clippingPosition = v_clippingPosition;
    int regionIndex = v_regionIndex;
    czm_clipPolygons(model_clippingDistance, CLIPPING_POLYGON_REGIONS_LENGTH, clippingPosition, regionIndex);
}
`;var d3={name:"ModelClippingPolygonsPipelineStage"};d3.process=function(e,t,n){let i=t.clippingPolygons,o=e.shaderBuilder;o.addDefine("ENABLE_CLIPPING_POLYGONS",void 0,ie.BOTH),i.inverse&&o.addDefine("CLIPPING_INVERSE",void 0,ie.FRAGMENT),o.addDefine("CLIPPING_POLYGON_REGIONS_LENGTH",i.extentsCount,ie.BOTH),o.addUniform("sampler2D","model_clippingDistance",ie.FRAGMENT),o.addUniform("sampler2D","model_clippingExtents",ie.VERTEX),o.addVarying("vec2","v_clippingPosition"),o.addVarying("int","v_regionIndex","flat"),o.addVertexLines(u3),o.addFragmentLines(f3);let r={model_clippingDistance:function(){return i.clippingTexture??n.context.defaultTexture},model_clippingExtents:function(){return i.extentsTexture??n.context.defaultTexture}};e.uniformMap=dt(r,e.uniformMap)};var h3=d3;function m3(e,t){this._model=e,this._runtimeNode=t}Object.defineProperties(m3.prototype,{name:{get:function(){return this._runtimeNode._name}},id:{get:function(){return this._runtimeNode._id}},show:{get:function(){return this._runtimeNode.show},set:function(e){this._runtimeNode.show=e}},matrix:{get:function(){return this._runtimeNode.transform},set:function(e){c(e)?(this._runtimeNode.transform=e,this._runtimeNode.userAnimated=!0,this._model._userAnimationDirty=!0):(this._runtimeNode.transform=this.originalMatrix,this._runtimeNode.userAnimated=!1)}},originalMatrix:{get:function(){return this._runtimeNode.originalTransform}}});var p3=m3;var g3=`mat4 getInstancingTransform()
{
    mat4 instancingTransform;

    #ifdef HAS_INSTANCE_MATRICES
    instancingTransform = mat4(
        a_instancingTransformRow0.x, a_instancingTransformRow1.x, a_instancingTransformRow2.x, 0.0, // Column 1
        a_instancingTransformRow0.y, a_instancingTransformRow1.y, a_instancingTransformRow2.y, 0.0, // Column 2
        a_instancingTransformRow0.z, a_instancingTransformRow1.z, a_instancingTransformRow2.z, 0.0, // Column 3
        a_instancingTransformRow0.w, a_instancingTransformRow1.w, a_instancingTransformRow2.w, 1.0  // Column 4
    );
    #else
    vec3 translation = vec3(0.0, 0.0, 0.0);
    vec3 scale = vec3(1.0, 1.0, 1.0);
    
        #ifdef HAS_INSTANCE_TRANSLATION
        translation = a_instanceTranslation;
        #endif
        #ifdef HAS_INSTANCE_SCALE
        scale = a_instanceScale;
        #endif

    instancingTransform = mat4(
        scale.x, 0.0, 0.0, 0.0,
        0.0, scale.y, 0.0, 0.0,
        0.0, 0.0, scale.z, 0.0,
        translation.x, translation.y, translation.z, 1.0
    ); 
    #endif

    return instancingTransform;
}

#ifdef USE_2D_INSTANCING
mat4 getInstancingTransform2D()
{
    mat4 instancingTransform2D;

    #ifdef HAS_INSTANCE_MATRICES
    instancingTransform2D = mat4(
        a_instancingTransform2DRow0.x, a_instancingTransform2DRow1.x, a_instancingTransform2DRow2.x, 0.0, // Column 1
        a_instancingTransform2DRow0.y, a_instancingTransform2DRow1.y, a_instancingTransform2DRow2.y, 0.0, // Column 2
        a_instancingTransform2DRow0.z, a_instancingTransform2DRow1.z, a_instancingTransform2DRow2.z, 0.0, // Column 3
        a_instancingTransform2DRow0.w, a_instancingTransform2DRow1.w, a_instancingTransform2DRow2.w, 1.0  // Column 4
    );
    #else
    vec3 translation2D = vec3(0.0, 0.0, 0.0);
    vec3 scale = vec3(1.0, 1.0, 1.0);
    
        #ifdef HAS_INSTANCE_TRANSLATION
        translation2D = a_instanceTranslation2D;
        #endif
        #ifdef HAS_INSTANCE_SCALE
        scale = a_instanceScale;
        #endif

    instancingTransform2D = mat4(
        scale.x, 0.0, 0.0, 0.0,
        0.0, scale.y, 0.0, 0.0,
        0.0, 0.0, scale.z, 0.0,
        translation2D.x, translation2D.y, translation2D.z, 1.0
    ); 
    #endif

    return instancingTransform2D;
}
#endif
`;var C3=`void instancingStage(inout ProcessedAttributes attributes) 
{
    vec3 positionMC = attributes.positionMC;
    
    mat4 instancingTransform = getInstancingTransform();
    
    attributes.positionMC = (instancingTransform * vec4(positionMC, 1.0)).xyz;

    #ifdef HAS_NORMALS
    vec3 normalMC = attributes.normalMC;
    attributes.normalMC = (instancingTransform * vec4(normalMC, 0.0)).xyz;
    #endif

    #ifdef USE_2D_INSTANCING
    mat4 instancingTransform2D = getInstancingTransform2D();
    attributes.position2D = (instancingTransform2D * vec4(positionMC, 1.0)).xyz;
    #endif
}
`;var E3=`void legacyInstancingStage(
    inout ProcessedAttributes attributes,
    out mat4 instanceModelView,
    out mat3 instanceModelViewInverseTranspose)
{
    vec3 positionMC = attributes.positionMC;

    mat4 instancingTransform = getInstancingTransform();
 
    mat4 instanceModel = instancingTransform * u_instance_nodeTransform;
    instanceModelView = u_instance_modifiedModelView;
    instanceModelViewInverseTranspose = mat3(u_instance_modifiedModelView * instanceModel);

    attributes.positionMC = (instanceModel * vec4(positionMC, 1.0)).xyz;
    
    #ifdef USE_2D_INSTANCING
    mat4 instancingTransform2D = getInstancingTransform2D();
    attributes.position2D = (instancingTransform2D * vec4(positionMC, 1.0)).xyz;
    #endif
}
`;var VI=new Q,jle=new Q,Yle=new Q,I3={name:"InstancingPipelineStage",_getInstanceTransformsAsMatrices:T3,_transformsToTypedArray:vT};I3.process=function(e,t,n){let i=t.instances,o=i.attributes[0].count,r=e.shaderBuilder;r.addDefine("HAS_INSTANCING"),r.addVertexLines(g3);let a=e.model,s=a.sceneGraph,A=e.runtimeNode,l=n.mode!==Ee.SCENE3D&&!n.scene3DOnly&&a._projectTo2D,d=a._enablePick&&!n.context.webgl2,m=[];sue(e,n,i,m,l,d),lue(e,n,i,m);let p={};if(i.transformInWorldSpace?(r.addDefine("USE_LEGACY_INSTANCING",void 0,ie.VERTEX),r.addUniform("mat4","u_instance_modifiedModelView",ie.VERTEX),r.addUniform("mat4","u_instance_nodeTransform",ie.VERTEX),p.u_instance_modifiedModelView=function(){let g=Q.multiplyTransformation(a.modelMatrix,s.components.transform,VI);return l?Q.multiplyTransformation(n.context.uniformState.view3D,g,VI):(n.mode!==Ee.SCENE3D&&(g=sn.basisTo2D(n.mapProjection,g,VI)),Q.multiplyTransformation(n.context.uniformState.view,g,VI))},p.u_instance_nodeTransform=function(){return Q.multiplyTransformation(s.axisCorrectionMatrix,A.computedTransform,jle)},r.addVertexLines(E3)):r.addVertexLines(C3),l){r.addDefine("USE_2D_INSTANCING",void 0,ie.VERTEX),r.addUniform("mat4","u_modelView2D",ie.VERTEX);let g=n.context,h=Q.fromTranslation(A.instancingReferencePoint2D,new Q);p.u_modelView2D=function(){return Q.multiplyTransformation(g.uniformState.view,h,Yle)}}e.uniformMap=dt(p,e.uniformMap),e.instanceCount=o,Mn(e.attributes,m)};var Kg=new Q,Wle=new f;function qle(e,t,n,i,o){let r=Q.multiplyTransformation(t,e,Kg);return r=Q.multiplyTransformation(r,n,Kg),o=sn.basisTo2D(i.mapProjection,r,o),o}function Jle(e,t,n,i,o){let r=Q.fromTranslation(e,Kg),a=Q.multiplyTransformation(t,r,Kg);a=Q.multiplyTransformation(a,n,Kg);let s=Q.getTranslation(a,Wle);return o=Fn.computeActualEllipsoidPosition(i,s,o),o}function y3(e,t,n){let i=e.model,o=i.sceneGraph;e.runtimeNode.node.instances.transformInWorldSpace?(t=Q.multiplyTransformation(i.modelMatrix,o.components.transform,t),n=Q.multiplyTransformation(o.axisCorrectionMatrix,e.runtimeNode.computedTransform,n)):(t=Q.clone(o.computedModelMatrix,t),t=Q.multiplyTransformation(t,e.runtimeNode.computedTransform,t),n=Q.clone(Q.IDENTITY,n))}var b3=new Q,B3=new Q,Kle=new Q,Xle=new f;function Zle(e,t,n,i){let o=b3,r=B3;y3(t,o,r);let s=t.runtimeNode.instancingReferencePoint2D,A=e.length;for(let l=0;l<A;l++){let d=e[l],m=qle(d,o,r,n,Kle),p=Q.getTranslation(m,Xle),g=f.subtract(p,s,p);i[l]=Q.setTranslation(m,g,i[l])}return i}function $le(e,t,n,i){let o=b3,r=B3;y3(t,o,r);let s=t.runtimeNode.instancingReferencePoint2D,A=e.length;for(let l=0;l<A;l++){let d=e[l],m=Jle(d,o,r,n,d);i[l]=f.subtract(m,s,i[l])}return i}var eue=new f,tue=new f;function x3(e,t){let n=e.runtimeNode,i=e.model.sceneGraph.computedModelMatrix,o=Q.multiplyByPoint(i,n.instancingTranslationMin,eue),r=Fn.computeActualEllipsoidPosition(t,o,o),a=Q.multiplyByPoint(i,n.instancingTranslationMax,tue),s=Fn.computeActualEllipsoidPosition(t,a,a);n.instancingReferencePoint2D=f.lerp(r,s,.5,new f)}function vT(e){let n=e.length,i=new Float32Array(n*12);for(let o=0;o<n;o++){let r=e[o],a=12*o;i[a+0]=r[0],i[a+1]=r[4],i[a+2]=r[8],i[a+3]=r[12],i[a+4]=r[1],i[a+5]=r[5],i[a+6]=r[9],i[a+7]=r[13],i[a+8]=r[2],i[a+9]=r[6],i[a+10]=r[10],i[a+11]=r[14]}return i}function nue(e){let n=e.length,i=new Float32Array(n*3);for(let o=0;o<n;o++){let r=e[o],a=3*o;i[a+0]=r[0],i[a+1]=r[4],i[a+2]=r[8]}return i}var iue=new f,oue=new gt,rue=new f;function T3(e,t,n){let i=new Array(t),o=tt.getAttributeBySemantic(e,cr.TRANSLATION),r=tt.getAttributeBySemantic(e,cr.ROTATION),a=tt.getAttributeBySemantic(e,cr.SCALE),s=new f(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE),A=new f(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),l=c(o),d=c(r),m=c(a),p=l?o.typedArray:new Float32Array(t*3),g=d?r.typedArray:new Float32Array(t*4);d&&r.normalized&&(g=Yt.dequantize(g,r.componentDatatype,r.type,t));let h;m?h=a.typedArray:(h=new Float32Array(t*3),h.fill(1));for(let _=0;_<t;_++){let I=new f(p[_*3],p[_*3+1],p[_*3+2],iue);f.maximumByComponent(s,I,s),f.minimumByComponent(A,I,A);let b=new gt(g[_*4],g[_*4+1],g[_*4+2],d?g[_*4+3]:1,oue),x=new f(h[_*3],h[_*3+1],h[_*3+2],rue),T=Q.fromTranslationQuaternionRotationScale(I,b,x,new Q);i[_]=T}let C=n.runtimeNode;return C.instancingTranslationMin=A,C.instancingTranslationMax=s,l&&(o.typedArray=void 0),d&&(r.typedArray=void 0),m&&(a.typedArray=void 0),i}function aue(e,t,n){let i=new Array(t),o=e.typedArray,r=new f(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),a=new f(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE);for(let A=0;A<t;A++){let l=new f(o[A*3],o[A*3+1],o[A*3+2]);i[A]=l,f.minimumByComponent(r,l,r),f.maximumByComponent(a,l,a)}let s=n.runtimeNode;return s.instancingTranslationMin=r,s.instancingTranslationMax=a,e.typedArray=void 0,i}function MT(e,t){let n=ut.createVertexBuffer({context:t.context,typedArray:e,usage:De.STATIC_DRAW});return n.vertexArrayDestroyable=!1,n}function sue(e,t,n,i,o,r){let a=tt.getAttributeBySemantic(n,cr.ROTATION);c(a)?cue(e,n,i,t,o,r):Aue(e,n,i,t,o)}function cue(e,t,n,i,o,r){let a=e.shaderBuilder,s=t.attributes[0].count,A=e.model,l=e.runtimeNode;a.addDefine("HAS_INSTANCE_MATRICES");let d="Transform",m,p=l.instancingTransformsBuffer;if(!c(p)){m=T3(t,s,e);let _=vT(m);p=MT(_,i),A._modelResources.push(p),r&&(l.transformsTypedArray=_),l.instancingTransformsBuffer=p}if(_3(e,p,n,d),!o)return;let g=Re(i);g.mode=Ee.COLUMBUS_VIEW,x3(e,g);let h=l.instancingTransformsBuffer2D;if(!c(h)){let _=Zle(m,e,g,m),I=vT(_);h=MT(I,i),A._modelResources.push(h),l.instancingTransformsBuffer2D=h}_3(e,h,n,"Transform2D")}function Aue(e,t,n,i,o,r){let a=e.shaderBuilder,s=e.runtimeNode,A=tt.getAttributeBySemantic(t,cr.TRANSLATION),l=tt.getAttributeBySemantic(t,cr.SCALE);if(c(l)&&(a.addDefine("HAS_INSTANCE_SCALE"),RT(e,l.buffer,l.byteOffset,l.byteStride,n,"Scale")),!c(A))return;let d,m=A.typedArray;if(c(m)?d=aue(A,A.count,e):c(s.instancingTranslationMin)||(s.instancingTranslationMin=A.min,s.instancingTranslationMax=A.max),a.addDefine("HAS_INSTANCE_TRANSLATION"),RT(e,A.buffer,A.byteOffset,A.byteStride,n,"Translation"),!o&&!r)return;let g=Re(i);g.mode=Ee.COLUMBUS_VIEW,x3(e,g);let h=s.instancingTranslationBuffer2D;if(!c(h)){let b=$le(d,e,g,d),x=nue(b);r&&(s.transformsTypedArray=x),h=MT(x,i),e.model._modelResources.push(h),s.instancingTranslationBuffer2D=h}if(!o)return;RT(e,h,0,void 0,n,"Translation2D")}function _3(e,t,n,i){let r=V.getSizeInBytes(V.FLOAT),a=r*12,s=[{index:e.attributeIndex++,vertexBuffer:t,componentsPerAttribute:4,componentDatatype:V.FLOAT,normalize:!1,offsetInBytes:0,strideInBytes:a,instanceDivisor:1},{index:e.attributeIndex++,vertexBuffer:t,componentsPerAttribute:4,componentDatatype:V.FLOAT,normalize:!1,offsetInBytes:r*4,strideInBytes:a,instanceDivisor:1},{index:e.attributeIndex++,vertexBuffer:t,componentsPerAttribute:4,componentDatatype:V.FLOAT,normalize:!1,offsetInBytes:r*8,strideInBytes:a,instanceDivisor:1}],A=e.shaderBuilder;A.addAttribute("vec4",`a_instancing${i}Row0`),A.addAttribute("vec4",`a_instancing${i}Row1`),A.addAttribute("vec4",`a_instancing${i}Row2`),Mn(n,s)}function RT(e,t,n,i,o,r){o.push({index:e.attributeIndex++,vertexBuffer:t,componentsPerAttribute:3,componentDatatype:V.FLOAT,normalize:!1,offsetInBytes:n,strideInBytes:i,instanceDivisor:1}),e.shaderBuilder.addAttribute("vec3",`a_instance${r}`)}function lue(e,t,n,i){let o=n.attributes,r=e.shaderBuilder;for(let a=0;a<o.length;a++){let s=o[a];s.semantic===cr.FEATURE_ID&&(s.setIndex>=e.featureIdVertexAttributeSetIndex&&(e.featureIdVertexAttributeSetIndex=s.setIndex+1),i.push({index:e.attributeIndex++,vertexBuffer:s.buffer,componentsPerAttribute:ct.getNumberOfComponents(s.type),componentDatatype:s.componentDatatype,normalize:!1,offsetInBytes:s.byteOffset,strideInBytes:s.byteStride,instanceDivisor:1}),r.addAttribute("float",`a_instanceFeatureId_${s.setIndex}`))}}var S3=I3;var PT={};PT.name="ModelMatrixUpdateStage";PT.update=function(e,t,n){let i=n.mode!==Ee.SCENE3D;if(!(i&&t._model._projectTo2D)&&e._transformDirty){let o=i?t._computedModelMatrix2D:t._computedModelMatrix;w3(e,t,o,e.transformToRoot),e._transformDirty=!1}};function uue(e,t,n){e.modelMatrix=Q.multiplyTransformation(t,n,e.modelMatrix),e.cullFace=tt.getCullFace(e.modelMatrix,e.primitiveType)}function w3(e,t,n,i){let o;i=Q.multiplyTransformation(i,e.transform,new Q),e.updateComputedTransform();let r=e.runtimePrimitives.length;for(o=0;o<r;o++){let s=e.runtimePrimitives[o];uue(s.drawCommand,n,i)}let a=e.children.length;for(o=0;o<a;o++){let s=t._runtimeNodes[e.children[o]];s._transformToRoot=Q.clone(i,s._transformToRoot),w3(s,t,n,i),s._transformDirty=!1}}var D3=PT;var Q3={name:"NodeStatisticsPipelineStage",_countInstancingAttributes:R3,_countGeneratedBuffers:v3};Q3.process=function(e,t,n){let i=e.model.statistics,o=t.instances,r=e.runtimeNode;R3(i,o),v3(i,r)};function R3(e,t){if(!c(t))return;let n=t.attributes,i=n.length;for(let o=0;o<i;o++){let r=n[o];c(r.buffer)&&e.addBuffer(r.buffer,!1)}}function v3(e,t){c(t.instancingTransformsBuffer)&&e.addBuffer(t.instancingTransformsBuffer,!1),c(t.instancingTransformsBuffer2D)&&e.addBuffer(t.instancingTransformsBuffer2D,!1),c(t.instancingTranslationBuffer2D)&&e.addBuffer(t.instancingTranslationBuffer2D,!1)}var M3=Q3;function lm(e){e=e??G.EMPTY_OBJECT;let t=e.node,n=e.transform,i=e.transformToRoot,o=e.sceneGraph,r=e.children;this._node=t,this._name=t.name,this._id=t.index,this._sceneGraph=o,this._children=r,this._originalTransform=Q.clone(n,this._originalTransform),this._transform=Q.clone(n,this._transform),this._transformToRoot=Q.clone(i,this._transformToRoot),this._computedTransform=new Q,this._transformDirty=!1,this._transformParameters=void 0,this._morphWeights=[],this._runtimeSkin=void 0,this._computedJointMatrices=[],this.show=!0,this.userAnimated=!1,this.pipelineStages=[],this.runtimePrimitives=[],this.updateStages=[],this.instancingTranslationMin=void 0,this.instancingTranslationMax=void 0,this.instancingTransformsBuffer=void 0,this.instancingTransformsBuffer2D=void 0,this.instancingTranslationBuffer2D=void 0,this.instancingReferencePoint2D=void 0,fue(this)}Object.defineProperties(lm.prototype,{node:{get:function(){return this._node}},sceneGraph:{get:function(){return this._sceneGraph}},children:{get:function(){return this._children}},transform:{get:function(){return this._transform},set:function(e){this._transformDirty=!0,this._transform=Q.clone(e,this._transform)}},transformToRoot:{get:function(){return this._transformToRoot}},computedTransform:{get:function(){return this._computedTransform}},originalTransform:{get:function(){return this._originalTransform}},translation:{get:function(){return c(this._transformParameters)?this._transformParameters.translation:void 0},set:function(e){let t=this._transformParameters,n=t.translation;f.equals(n,e)||(t.translation=f.clone(e,t.translation),NT(this,t))}},rotation:{get:function(){return c(this._transformParameters)?this._transformParameters.rotation:void 0},set:function(e){let t=this._transformParameters,n=t.rotation;gt.equals(n,e)||(t.rotation=gt.clone(e,t.rotation),NT(this,t))}},scale:{get:function(){return c(this._transformParameters)?this._transformParameters.scale:void 0},set:function(e){let t=this._transformParameters,n=t.scale;f.equals(n,e)||(t.scale=f.clone(e,t.scale),NT(this,t))}},morphWeights:{get:function(){return this._morphWeights},set:function(e){let t=e.length;for(let n=0;n<t;n++)this._morphWeights[n]=e[n]}},runtimeSkin:{get:function(){return this._runtimeSkin}},computedJointMatrices:{get:function(){return this._computedJointMatrices}}});function fue(e){let t=e.transform,n=e.transformToRoot,i=e._computedTransform;e._computedTransform=Q.multiply(n,t,i);let o=e.node;c(o.matrix)||(e._transformParameters=new Jp(o.translation,o.rotation,o.scale)),c(o.morphWeights)&&(e._morphWeights=o.morphWeights.slice());let r=o.articulationName;if(c(r)){let A=e.sceneGraph._runtimeArticulations[r];c(A)&&A.runtimeNodes.push(e)}}function NT(e,t){e._transformDirty=!0,e._transform=Q.fromTranslationRotationScale(t,e._transform)}lm.prototype.getChild=function(e){return this.sceneGraph._runtimeNodes[this.children[e]]};lm.prototype.configurePipeline=function(){let e=this.node,t=this.pipelineStages;t.length=0;let n=this.updateStages;n.length=0,c(e.instances)&&t.push(S3),t.push(M3),n.push(D3)};lm.prototype.updateComputedTransform=function(){this._computedTransform=Q.multiply(this._transformToRoot,this._transform,this._computedTransform)};lm.prototype.updateJointMatrices=function(){let e=this._runtimeSkin;if(!c(e))return;e.updateJointMatrices();let t=this._computedJointMatrices,n=e.jointMatrices,i=n.length;for(let o=0;o<i;o++){c(t[o])||(t[o]=new Q);let r=Q.multiplyTransformation(this.transformToRoot,this.transform,t[o]),a=Q.inverseTransformation(r,t[o]);t[o]=Q.multiplyTransformation(a,n[o],t[o])}};var P3=lm;var N3={name:"AlphaPipelineStage"};N3.process=function(e,t,n){let i=e.alphaOptions,o=e.model;i.pass=i.pass??o.opaquePass;let r=e.renderStateOptions;i.pass===He.TRANSLUCENT&&(r.cull.enabled=!1,r.depthMask=!1,r.blending=Pn.ALPHA_BLEND);let a=e.shaderBuilder,s=e.uniformMap;c(i.alphaCutoff)&&(a.addDefine("ALPHA_MODE_MASK",void 0,ie.FRAGMENT),a.addUniform("float","u_alphaCutoff",ie.FRAGMENT),s.u_alphaCutoff=function(){return i.alphaCutoff})};var L3=N3;var F3={name:"BatchTexturePipelineStage"};F3.process=function(e,t,n){let i=e.shaderBuilder,o={},r=e.model,a=r.featureTables[r.featureTableId],s=a.featuresLength;i.addUniform("int","model_featuresLength"),o.model_featuresLength=function(){return s};let A=a.batchTexture;i.addUniform("sampler2D","model_batchTexture"),o.model_batchTexture=function(){return A.batchTexture??A.defaultTexture},i.addUniform("vec4","model_textureStep"),o.model_textureStep=function(){return A.textureStep},A.textureDimensions.y>1&&(i.addDefine("MULTILINE_BATCH_TEXTURE"),i.addUniform("vec2","model_textureDimensions"),o.model_textureDimensions=function(){return A.textureDimensions}),e.uniformMap=dt(o,e.uniformMap)};var O3=F3;var k3={name:"ClassificationPipelineStage"};k3.process=function(e,t,n){e.shaderBuilder.addDefine("HAS_CLASSIFICATION",void 0,ie.BOTH);let o=e.runtimePrimitive;c(o.batchLengths)||due(t,o)};function due(e,t){let n=tt.getAttributeBySemantic(e,Pe.POSITION);if(!c(n))throw new ae("Primitives must have a position attribute to be used for classification.");let i,o=e.indices,r=c(o);r&&(i=o.typedArray,o.typedArray=void 0);let a=r?o.count:n.count,s=tt.getAttributeBySemantic(e,Pe.FEATURE_ID,0);if(!c(s)){t.batchLengths=[a],t.batchOffsets=[0];return}let A=s.typedArray;s.typedArray=void 0;let l=[],d=[0],m=r?i[0]:0,p=A[m],g=0;for(let C=1;C<a;C++){let _=r?i[C]:C,I=A[_];if(I!==p){let b=C-g,x=C;l.push(b),d.push(x),g=x,p=I}}let h=a-g;l.push(h),t.batchLengths=l,t.batchOffsets=d}var U3=k3;var z3=`void filterByPassType(inout vec3 positionMC, vec4 featureColor)
{
    bool styleTranslucent = (featureColor.a != 1.0);
    // Only render translucent features in the translucent pass (if the style or the original command has translucency).
    if (czm_pass == czm_passTranslucent && !styleTranslucent && !model_commandTranslucent)
    {
        // If the model has a translucent silhouette, it needs to render during the silhouette color command,
        // (i.e. the command where model_silhouettePass = true), even if the model isn't translucent.
        #ifdef HAS_SILHOUETTE
        positionMC *= float(model_silhouettePass);
        #else
        positionMC *= 0.0;
        #endif
    }
    // If the current pass is not the translucent pass and the style is not translucent, don't render the feature.
    else if (czm_pass != czm_passTranslucent && styleTranslucent)
    {
        positionMC *= 0.0;
    }
}

void cpuStylingStage(inout vec3 positionMC, inout SelectedFeature feature)
{
    float show = ceil(feature.color.a);
    positionMC *= show;

    #if defined(HAS_SELECTED_FEATURE_ID_ATTRIBUTE) && !defined(HAS_CLASSIFICATION)
    filterByPassType(positionMC, feature.color);
    #endif
}
`;var G3=`void filterByPassType(vec4 featureColor)
{
    bool styleTranslucent = (featureColor.a != 1.0);
    // Only render translucent features in the translucent pass (if the style or the original command has translucency).
    if (czm_pass == czm_passTranslucent && !styleTranslucent && !model_commandTranslucent)
    {   
        // If the model has a translucent silhouette, it needs to render during the silhouette color command,
        // (i.e. the command where model_silhouettePass = true), even if the model isn't translucent.
        #ifdef HAS_SILHOUETTE
        if(!model_silhouettePass) {
            discard;
        }
        #else
        discard;
        #endif
    }
    // If the current pass is not the translucent pass and the style is not translucent, don't render the feature.
    else if (czm_pass != czm_passTranslucent && styleTranslucent)
    {
        discard;
    }
}

void cpuStylingStage(inout czm_modelMaterial material, SelectedFeature feature)
{
    vec4 featureColor = feature.color;
    if (featureColor.a == 0.0)
    {
        discard;
    }

    // If a feature ID vertex attribute is used, the pass type filter is applied in the vertex shader.
    // So, we only apply in in the fragment shader if the feature ID texture is used.
    #if defined(HAS_SELECTED_FEATURE_ID_TEXTURE) && !defined(HAS_CLASSIFICATION)
    filterByPassType(featureColor);
    #endif

    featureColor = czm_gammaCorrect(featureColor);

    // Classification models compute the diffuse differently.
    #ifdef HAS_CLASSIFICATION
    material.diffuse = featureColor.rgb * featureColor.a;
    #else
    float highlight = ceil(model_colorBlend);
    material.diffuse *= mix(featureColor.rgb, vec3(1.0), highlight);
    #endif
    
    material.alpha *= featureColor.a;
}
`;var H3={name:"CPUStylingPipelineStage"};H3.process=function(e,t,n){let i=e.model,o=e.shaderBuilder;o.addVertexLines(z3),o.addFragmentLines(G3),o.addDefine("USE_CPU_STYLING",void 0,ie.BOTH),c(i.color)||(o.addUniform("float",Jg.COLOR_BLEND_UNIFORM_NAME,ie.FRAGMENT),e.uniformMap[Jg.COLOR_BLEND_UNIFORM_NAME]=function(){return qh.getColorBlend(i.colorBlendMode,i.colorBlendAmount)}),o.addUniform("bool","model_commandTranslucent",ie.BOTH),e.uniformMap.model_commandTranslucent=function(){return e.alphaOptions.pass===He.TRANSLUCENT}};var V3=H3;var j3={MODIFY_MATERIAL:"MODIFY_MATERIAL",REPLACE_MATERIAL:"REPLACE_MATERIAL"};j3.getDefineName=function(e){return`CUSTOM_SHADER_${e}`};var jI=Object.freeze(j3);var Y3=`void customShaderStage(
    inout czm_modelVertexOutput vsOutput, 
    inout ProcessedAttributes attributes, 
    FeatureIds featureIds,
    Metadata metadata,
    MetadataClass metadataClass,
    MetadataStatistics metadataStatistics
) {
    // VertexInput and initializeInputStruct() are dynamically generated in JS, 
    // see CustomShaderPipelineStage.js
    VertexInput vsInput;
    initializeInputStruct(vsInput, attributes);
    vsInput.featureIds = featureIds;
    vsInput.metadata = metadata;
    vsInput.metadataClass = metadataClass;
    vsInput.metadataStatistics = metadataStatistics;
    vertexMain(vsInput, vsOutput);
    attributes.positionMC = vsOutput.positionMC;
}
`;var W3=`void customShaderStage(
    inout czm_modelMaterial material,
    ProcessedAttributes attributes,
    FeatureIds featureIds,
    Metadata metadata,
    MetadataClass metadataClass,
    MetadataStatistics metadataStatistics
) {
    // FragmentInput and initializeInputStruct() are dynamically generated in JS, 
    // see CustomShaderPipelineStage.js
    FragmentInput fsInput;
    initializeInputStruct(fsInput, attributes);
    fsInput.featureIds = featureIds;
    fsInput.metadata = metadata;
    fsInput.metadataClass = metadataClass;
    fsInput.metadataStatistics = metadataStatistics;
    fragmentMain(fsInput, material);
}
`;var q3=`void featureIdStage(out FeatureIds featureIds, ProcessedAttributes attributes) {
  initializeFeatureIds(featureIds, attributes);
  initializeFeatureIdAliases(featureIds);
}
`;var J3=`void featureIdStage(out FeatureIds featureIds, ProcessedAttributes attributes) 
{
  initializeFeatureIds(featureIds, attributes);
  initializeFeatureIdAliases(featureIds);
  setFeatureIdVaryings();
}
`;var Qn={name:"FeatureIdPipelineStage",STRUCT_ID_FEATURE_IDS_VS:"FeatureIdsVS",STRUCT_ID_FEATURE_IDS_FS:"FeatureIdsFS",STRUCT_NAME_FEATURE_IDS:"FeatureIds",FUNCTION_ID_INITIALIZE_FEATURE_IDS_VS:"initializeFeatureIdsVS",FUNCTION_ID_INITIALIZE_FEATURE_IDS_FS:"initializeFeatureIdsFS",FUNCTION_ID_INITIALIZE_FEATURE_ID_ALIASES_VS:"initializeFeatureIdAliasesVS",FUNCTION_ID_INITIALIZE_FEATURE_ID_ALIASES_FS:"initializeFeatureIdAliasesFS",FUNCTION_SIGNATURE_INITIALIZE_FEATURE_IDS:"void initializeFeatureIds(out FeatureIds featureIds, ProcessedAttributes attributes)",FUNCTION_SIGNATURE_INITIALIZE_FEATURE_ID_ALIASES:"void initializeFeatureIdAliases(inout FeatureIds featureIds)",FUNCTION_ID_SET_FEATURE_ID_VARYINGS:"setFeatureIdVaryings",FUNCTION_SIGNATURE_SET_FEATURE_ID_VARYINGS:"void setFeatureIdVaryings()"};Qn.process=function(e,t,n){let i=e.shaderBuilder;hue(i);let o=e.runtimeNode.node.instances;c(o)&&mue(e,o,n),pue(e,t,n),i.addVertexLines(J3),i.addFragmentLines(q3)};function hue(e){e.addStruct(Qn.STRUCT_ID_FEATURE_IDS_VS,Qn.STRUCT_NAME_FEATURE_IDS,ie.VERTEX),e.addStruct(Qn.STRUCT_ID_FEATURE_IDS_FS,Qn.STRUCT_NAME_FEATURE_IDS,ie.FRAGMENT),e.addFunction(Qn.FUNCTION_ID_INITIALIZE_FEATURE_IDS_VS,Qn.FUNCTION_SIGNATURE_INITIALIZE_FEATURE_IDS,ie.VERTEX),e.addFunction(Qn.FUNCTION_ID_INITIALIZE_FEATURE_IDS_FS,Qn.FUNCTION_SIGNATURE_INITIALIZE_FEATURE_IDS,ie.FRAGMENT),e.addFunction(Qn.FUNCTION_ID_INITIALIZE_FEATURE_ID_ALIASES_VS,Qn.FUNCTION_SIGNATURE_INITIALIZE_FEATURE_ID_ALIASES,ie.VERTEX),e.addFunction(Qn.FUNCTION_ID_INITIALIZE_FEATURE_ID_ALIASES_FS,Qn.FUNCTION_SIGNATURE_INITIALIZE_FEATURE_ID_ALIASES,ie.FRAGMENT),e.addFunction(Qn.FUNCTION_ID_SET_FEATURE_ID_VARYINGS,Qn.FUNCTION_SIGNATURE_SET_FEATURE_ID_VARYINGS,ie.VERTEX)}function mue(e,t,n){let i=t.featureIds,o=t.attributes[0].count;for(let r=0;r<i.length;r++){let a=i[r],s=a.positionalLabel;a instanceof Rt.FeatureIdAttribute?gue(e,a,s):K3(e,a,s,o,1,n);let A=a.label;c(A)&&X3(e,s,A,ie.BOTH)}}function pue(e,t,n){let i=t.featureIds,r=tt.getAttributeBySemantic(t,Pe.POSITION).count;for(let a=0;a<i.length;a++){let s=i[a],A=s.positionalLabel,l=ie.BOTH;s instanceof Rt.FeatureIdAttribute?Cue(e,s,A):s instanceof Rt.FeatureIdImplicitRange?K3(e,s,A,r,void 0,n):(Eue(e,s,A,a,n),l=ie.FRAGMENT);let d=s.label;c(d)&&X3(e,A,d,l)}}function gue(e,t,n){let i=e.shaderBuilder;i.addStructField(Qn.STRUCT_ID_FEATURE_IDS_VS,"int",n),i.addStructField(Qn.STRUCT_ID_FEATURE_IDS_FS,"int",n);let o=t.setIndex,r=n.replace(/_\d+$/,"_"),a=`a_${r}${o}`,s=`v_${r}${o}`,A=`featureIds.${n} = int(czm_round(${a}));`,l=`featureIds.${n} = int(czm_round(${s}));`;i.addFunctionLines(Qn.FUNCTION_ID_INITIALIZE_FEATURE_IDS_VS,[A]),i.addFunctionLines(Qn.FUNCTION_ID_INITIALIZE_FEATURE_IDS_FS,[l]),i.addVarying("float",s),i.addFunctionLines(Qn.FUNCTION_ID_SET_FEATURE_ID_VARYINGS,[`${s} = ${a};`])}function Cue(e,t,n){let i=e.shaderBuilder;i.addStructField(Qn.STRUCT_ID_FEATURE_IDS_VS,"int",n),i.addStructField(Qn.STRUCT_ID_FEATURE_IDS_FS,"int",n);let o=t.setIndex,r=n.replace(/_\d+$/,"_"),a=[`featureIds.${n} = int(czm_round(attributes.${r}${o}));`];i.addFunctionLines(Qn.FUNCTION_ID_INITIALIZE_FEATURE_IDS_VS,a),i.addFunctionLines(Qn.FUNCTION_ID_INITIALIZE_FEATURE_IDS_FS,a)}function K3(e,t,n,i,o,r){_ue(e,t,i,o,r);let a=e.shaderBuilder,s=`a_implicit_${n}`;a.addAttribute("float",s);let A=`v_implicit_${n}`;a.addVarying("float",A),a.addStructField(Qn.STRUCT_ID_FEATURE_IDS_VS,"int",n),a.addStructField(Qn.STRUCT_ID_FEATURE_IDS_FS,"int",n),a.addFunctionLines(Qn.FUNCTION_ID_SET_FEATURE_ID_VARYINGS,[`${A} = ${s};`]),a.addFunctionLines(Qn.FUNCTION_ID_INITIALIZE_FEATURE_IDS_VS,[`featureIds.${n} = int(czm_round(${s}));`]),a.addFunctionLines(Qn.FUNCTION_ID_INITIALIZE_FEATURE_IDS_FS,[`featureIds.${n} = int(czm_round(${A}));`])}function Eue(e,t,n,i,o){let r=`u_featureIdTexture_${i}`,a=e.uniformMap,s=t.textureReader;a[r]=function(){return s.texture??o.context.defaultTexture};let A=s.channels,l=e.shaderBuilder;l.addStructField(Qn.STRUCT_ID_FEATURE_IDS_FS,"int",n),l.addUniform("sampler2D",r,ie.FRAGMENT);let m=`v_texCoord_${s.texCoord}`,p=m,g=s.transform;if(c(g)&&!ne.equals(g,ne.IDENTITY)){let _=`${r}Transform`;l.addUniform("mat3",_,ie.FRAGMENT),a[_]=function(){return g},p=`vec2(${_} * vec3(${m}, 1.0))`}let h=`texture(${r}, ${p}).${A}`,C=`featureIds.${n} = czm_unpackUint(${h});`;l.addFunctionLines(Qn.FUNCTION_ID_INITIALIZE_FEATURE_IDS_FS,[C])}function X3(e,t,n,i){let o=e.shaderBuilder,r=ie.includesVertexShader(i);r&&o.addStructField(Qn.STRUCT_ID_FEATURE_IDS_VS,"int",n),o.addStructField(Qn.STRUCT_ID_FEATURE_IDS_FS,"int",n);let a=[`featureIds.${n} = featureIds.${t};`];r&&o.addFunctionLines(Qn.FUNCTION_ID_INITIALIZE_FEATURE_ID_ALIASES_VS,a),o.addFunctionLines(Qn.FUNCTION_ID_INITIALIZE_FEATURE_ID_ALIASES_FS,a)}function _ue(e,t,n,i,o){let r=e.model,a,s;if(c(t.repeat)){let l=Iue(t,n);a=ut.createVertexBuffer({context:o.context,typedArray:l,usage:De.STATIC_DRAW}),a.vertexArrayDestroyable=!1,r._pipelineResources.push(a),r.statistics.addBuffer(a,!1)}else s=[t.offset];let A={index:e.attributeIndex++,instanceDivisor:i,value:s,vertexBuffer:a,normalize:!1,componentsPerAttribute:1,componentDatatype:V.FLOAT,strideInBytes:V.getSizeInBytes(V.FLOAT),offsetInBytes:0};e.attributes.push(A)}function Iue(e,t){let n=e.offset,i=e.repeat,o=new Float32Array(t);for(let r=0;r<t;r++)o[r]=n+Math.floor(r/i);return o}var Xg=Qn;var Z3=`void metadataStage(
  out Metadata metadata,
  out MetadataClass metadataClass,
  out MetadataStatistics metadataStatistics,
  ProcessedAttributes attributes
  )
{
  initializeMetadata(metadata, metadataClass, metadataStatistics, attributes);
}
`;var $3=`void metadataStage(
  out Metadata metadata,
  out MetadataClass metadataClass,
  out MetadataStatistics metadataStatistics,
  ProcessedAttributes attributes
  )
{
  initializeMetadata(metadata, metadataClass, metadataStatistics, attributes);
  setMetadataVaryings();
}
`;var bn={name:"MetadataPipelineStage",STRUCT_ID_METADATA_VS:"MetadataVS",STRUCT_ID_METADATA_FS:"MetadataFS",STRUCT_NAME_METADATA:"Metadata",STRUCT_ID_METADATA_CLASS_VS:"MetadataClassVS",STRUCT_ID_METADATA_CLASS_FS:"MetadataClassFS",STRUCT_NAME_METADATA_CLASS:"MetadataClass",STRUCT_ID_METADATA_STATISTICS_VS:"MetadataStatisticsVS",STRUCT_ID_METADATA_STATISTICS_FS:"MetadataStatisticsFS",STRUCT_NAME_METADATA_STATISTICS:"MetadataStatistics",FUNCTION_ID_INITIALIZE_METADATA_VS:"initializeMetadataVS",FUNCTION_ID_INITIALIZE_METADATA_FS:"initializeMetadataFS",FUNCTION_SIGNATURE_INITIALIZE_METADATA:"void initializeMetadata(out Metadata metadata, out MetadataClass metadataClass, out MetadataStatistics metadataStatistics, ProcessedAttributes attributes)",FUNCTION_ID_SET_METADATA_VARYINGS:"setMetadataVaryings",FUNCTION_SIGNATURE_SET_METADATA_VARYINGS:"void setMetadataVaryings()",METADATA_CLASS_FIELDS:[{specName:"noData",shaderName:"noData"},{specName:"default",shaderName:"defaultValue"},{specName:"min",shaderName:"minValue"},{specName:"max",shaderName:"maxValue"}],METADATA_STATISTICS_FIELDS:[{specName:"min",shaderName:"minValue"},{specName:"max",shaderName:"maxValue"},{specName:"mean",shaderName:"mean",type:"float"},{specName:"median",shaderName:"median"},{specName:"standardDeviation",shaderName:"standardDeviation",type:"float"},{specName:"variance",shaderName:"variance",type:"float"},{specName:"sum",shaderName:"sum"}]};bn.process=function(e,t,n){let{shaderBuilder:i,model:o}=e,{structuralMetadata:r={},content:a}=o,s=a?.tileset.metadataExtension?.statistics,A=yue(r.propertyAttributes,t,s),l=Bue(r.propertyTextures,s),d=A.concat(l);Tue(i,d),Due(i),i.addVertexLines($3),i.addFragmentLines(Z3);for(let m=0;m<A.length;m++){let p=A[m];Que(e,p)}for(let m=0;m<l.length;m++){let p=l[m];vue(e,p)}};function yue(e,t,n){return c(e)?e.flatMap(i=>bue(i,t,n)):[]}function bue(e,t,n){let{getAttributeByName:i,getAttributeInfo:o,sanitizeGlslIdentifier:r}=tt,a=e.class.id,s=n?.classes[a],A=Object.entries(e.properties),l=new Array(A.length);for(let d=0;d<A.length;d++){let[m,p]=A[d],g=i(t,p.attribute),{glslType:h,variableName:C}=o(g);l[d]={metadataVariable:r(m),property:p,type:p.classProperty.type,glslType:h,variableName:C,propertyStatistics:s?.properties[m],shaderDestination:ie.BOTH}}return l}function Bue(e,t){return c(e)?e.flatMap(n=>xue(n,t)):[]}function xue(e,t){let{sanitizeGlslIdentifier:n}=tt,i=e.class.id,o=t?.classes[i],r=Object.entries(e.properties).filter(([s,A])=>A.isGpuCompatible()),a=new Array(r.length);for(let s=0;s<r.length;s++){let[A,l]=r[s];a[s]={metadataVariable:n(A),property:l,type:l.classProperty.type,glslType:l.getGlslType(),propertyStatistics:o?.properties[A],shaderDestination:ie.FRAGMENT}}return a}function Tue(e,t){let n=new Set,i=new Set;for(let s=0;s<t.length;s++){let{type:A,glslType:l,propertyStatistics:d}=t[s];n.add(l),c(d)&&A!==jt.ENUM&&i.add(l)}let o=bn.METADATA_CLASS_FIELDS;for(let s of n){let A=`${s}MetadataClass`;a(A,s,o)}let r=bn.METADATA_STATISTICS_FIELDS;for(let s of i){let A=`${s}MetadataStatistics`;a(A,s,r)}function a(s,A,l){e.addStruct(s,s,ie.BOTH);for(let d=0;d<l.length;d++){let{shaderName:m}=l[d],p=l[d].type==="float"?wue(A):A;e.addStructField(s,p,m)}}}var Sue={int:"float",ivec2:"vec2",ivec3:"vec3",ivec4:"vec4"};function wue(e){let t=Sue[e];return c(t)?t:e}function Due(e){e.addStruct(bn.STRUCT_ID_METADATA_VS,bn.STRUCT_NAME_METADATA,ie.VERTEX),e.addStruct(bn.STRUCT_ID_METADATA_FS,bn.STRUCT_NAME_METADATA,ie.FRAGMENT),e.addStruct(bn.STRUCT_ID_METADATA_CLASS_VS,bn.STRUCT_NAME_METADATA_CLASS,ie.VERTEX),e.addStruct(bn.STRUCT_ID_METADATA_CLASS_FS,bn.STRUCT_NAME_METADATA_CLASS,ie.FRAGMENT),e.addStruct(bn.STRUCT_ID_METADATA_STATISTICS_VS,bn.STRUCT_NAME_METADATA_STATISTICS,ie.VERTEX),e.addStruct(bn.STRUCT_ID_METADATA_STATISTICS_FS,bn.STRUCT_NAME_METADATA_STATISTICS,ie.FRAGMENT),e.addFunction(bn.FUNCTION_ID_INITIALIZE_METADATA_VS,bn.FUNCTION_SIGNATURE_INITIALIZE_METADATA,ie.VERTEX),e.addFunction(bn.FUNCTION_ID_INITIALIZE_METADATA_FS,bn.FUNCTION_SIGNATURE_INITIALIZE_METADATA,ie.FRAGMENT),e.addFunction(bn.FUNCTION_ID_SET_METADATA_VARYINGS,bn.FUNCTION_SIGNATURE_SET_METADATA_VARYINGS,ie.VERTEX)}function Que(e,t){Rue(e,t),ez(e.shaderBuilder,t),tz(e.shaderBuilder,t)}function Rue(e,t){let{shaderBuilder:n}=e,{metadataVariable:i,property:o,glslType:r}=t,a=iz({valueExpression:`attributes.${t.variableName}`,renderResources:e,glslType:r,metadataVariable:i,shaderDestination:ie.BOTH,property:o});n.addStructField(bn.STRUCT_ID_METADATA_VS,r,i),n.addStructField(bn.STRUCT_ID_METADATA_FS,r,i);let s=`metadata.${i} = ${a};`;n.addFunctionLines(bn.FUNCTION_ID_INITIALIZE_METADATA_VS,[s]),n.addFunctionLines(bn.FUNCTION_ID_INITIALIZE_METADATA_FS,[s])}function vue(e,t){Mue(e,t),ez(e.shaderBuilder,t),tz(e.shaderBuilder,t)}function Mue(e,t){let{shaderBuilder:n,uniformMap:i}=e,{metadataVariable:o,glslType:r,property:a}=t,{texCoord:s,channels:A,index:l,texture:d,transform:m}=a.textureReader,p=`u_propertyTexture_${l}`;i.hasOwnProperty(p)||(n.addUniform("sampler2D",p,ie.FRAGMENT),i[p]=()=>d),n.addStructField(bn.STRUCT_ID_METADATA_FS,r,o);let g=`attributes.texCoord_${s}`,h=g;if(c(m)&&!ne.equals(m,ne.IDENTITY)){let x=`${p}Transform`;n.addUniform("mat3",x,ie.FRAGMENT),i[x]=function(){return m},h=`vec2(${x} * vec3(${g}, 1.0))`}let C=`texture(${p}, ${h}).${A}`,_=a.unpackInShader(C),I=iz({valueExpression:_,renderResources:e,glslType:r,metadataVariable:o,shaderDestination:ie.FRAGMENT,property:a}),b=`metadata.${o} = ${I};`;n.addFunctionLines(bn.FUNCTION_ID_INITIALIZE_METADATA_FS,[b])}function ez(e,t){let{classProperty:n}=t.property,{metadataVariable:i,glslType:o,shaderDestination:r}=t,a=nz(bn.METADATA_CLASS_FIELDS,n,`metadataClass.${i}`,o),s=`${o}MetadataClass`;e.addStructField(bn.STRUCT_ID_METADATA_CLASS_FS,s,i),e.addFunctionLines(bn.FUNCTION_ID_INITIALIZE_METADATA_FS,a),ie.includesVertexShader(r)&&(e.addStructField(bn.STRUCT_ID_METADATA_CLASS_VS,s,i),e.addFunctionLines(bn.FUNCTION_ID_INITIALIZE_METADATA_VS,a))}function tz(e,t){let{propertyStatistics:n}=t;if(!c(n))return;let{metadataVariable:i,type:o,glslType:r}=t;if(o===jt.ENUM)return;let a=bn.METADATA_STATISTICS_FIELDS,s=`metadataStatistics.${i}`,A=nz(a,n,s,r),l=`${r}MetadataStatistics`;e.addStructField(bn.STRUCT_ID_METADATA_STATISTICS_FS,l,i),e.addFunctionLines(bn.FUNCTION_ID_INITIALIZE_METADATA_FS,A),ie.includesVertexShader(t.shaderDestination)&&(e.addStructField(bn.STRUCT_ID_METADATA_STATISTICS_VS,l,i),e.addFunctionLines(bn.FUNCTION_ID_INITIALIZE_METADATA_VS,A))}function nz(e,t,n,i){function o(r){let a=t[r.specName];if(c(a))return`${n}.${r.shaderName} = ${i}(${a});`}return c(t)?e.map(o).filter(c):[]}function iz(e){let{valueExpression:t,property:n}=e;if(!n.hasValueTransform)return t;let i=e.metadataVariable,o=`u_${i}_offset`,r=`u_${i}_scale`,{shaderBuilder:a,uniformMap:s}=e.renderResources,{glslType:A,shaderDestination:l}=e;a.addUniform(A,o,l),a.addUniform(A,r,l);let{offset:d,scale:m}=n;return s[o]=()=>d,s[r]=()=>m,`czm_valueTransform(${o}, ${r}, ${t})`}var Ol=bn;var Pue={INHERIT:0,OPAQUE:1,TRANSLUCENT:2},LT=Object.freeze(Pue);var br={name:"CustomShaderPipelineStage",STRUCT_ID_ATTRIBUTES_VS:"AttributesVS",STRUCT_ID_ATTRIBUTES_FS:"AttributesFS",STRUCT_NAME_ATTRIBUTES:"Attributes",STRUCT_ID_VERTEX_INPUT:"VertexInput",STRUCT_NAME_VERTEX_INPUT:"VertexInput",STRUCT_ID_FRAGMENT_INPUT:"FragmentInput",STRUCT_NAME_FRAGMENT_INPUT:"FragmentInput",FUNCTION_ID_INITIALIZE_INPUT_STRUCT_VS:"initializeInputStructVS",FUNCTION_SIGNATURE_INITIALIZE_INPUT_STRUCT_VS:"void initializeInputStruct(out VertexInput vsInput, ProcessedAttributes attributes)",FUNCTION_ID_INITIALIZE_INPUT_STRUCT_FS:"initializeInputStructFS",FUNCTION_SIGNATURE_INITIALIZE_INPUT_STRUCT_FS:"void initializeInputStruct(out FragmentInput fsInput, ProcessedAttributes attributes)",_oneTimeWarning:Nn};br.process=function(e,t,n){let{shaderBuilder:i,model:o,alphaOptions:r}=e,{customShader:a}=o,{lightingModel:s,translucencyMode:A}=a;c(s)&&(e.lightingOptions.lightingModel=s),A===LT.TRANSLUCENT?r.pass=He.TRANSLUCENT:A===LT.OPAQUE&&(r.pass=void 0);let l=Gue(a,t);if(!l.customShaderEnabled)return;if(Yue(i,a,l),l.shouldComputePositionWC&&i.addDefine("COMPUTE_POSITION_WC_CUSTOM_SHADER",void 0,ie.BOTH),c(a.vertexShaderText)&&i.addDefine("HAS_CUSTOM_VERTEX_SHADER",void 0,ie.VERTEX),c(a.fragmentShaderText)){i.addDefine("HAS_CUSTOM_FRAGMENT_SHADER",void 0,ie.FRAGMENT);let p=jI.getDefineName(a.mode);i.addDefine(p,void 0,ie.FRAGMENT)}let d=a.uniforms;for(let p in d)if(d.hasOwnProperty(p)){let g=d[p];i.addUniform(g.type,p)}let m=a.varyings;for(let p in m)if(m.hasOwnProperty(p)){let g=m[p];i.addVarying(g,p)}e.uniformMap=dt(e.uniformMap,a.uniformMap)};function Nue(e){let t={};for(let n=0;n<e.length;n++){let i=tt.getAttributeInfo(e[n]);t[i.variableName]=i}return t}var Lue={position:"vec3",normal:"vec3",tangent:"vec3",bitangent:"vec3",texCoord:"vec2",color:"vec4",joints:"ivec4",weights:"vec4"},Fue={position:"vec3(0.0)",normal:"vec3(0.0, 0.0, 1.0)",tangent:"vec3(1.0, 0.0, 0.0)",bitangent:"vec3(0.0, 1.0, 0.0)",texCoord:"vec2(0.0)",color:"vec4(1.0)",joints:"ivec4(0)",weights:"vec4(0.0)"};function oz(e){let t=e.replace(/_[0-9]+$/,"");t=t.replace(/(MC|EC)$/,"");let n=Lue[t],i=Fue[t];if(c(n))return{attributeField:[n,e],value:i}}function Oue(e,t){if(!c(e.vertexShaderText))return{enabled:!1};let n=e.usedVariablesVertex.attributeSet,i=rz(t,n,!1),o=az(t,n,!1),r,a=[],s=[];for(let A in i){if(!i.hasOwnProperty(A))continue;let d=[i[A].glslType,A];a.push(d),r=`vsInput.attributes.${A} = attributes.${A};`,s.push(r)}for(let A=0;A<o.length;A++){let l=o[A],d=oz(l);if(!c(d))return br._oneTimeWarning("CustomShaderPipelineStage.incompatiblePrimitiveVS",`Primitive is missing attribute ${l}, disabling custom vertex shader`),{enabled:!1};a.push(d.attributeField),r=`vsInput.attributes.${l} = ${d.value};`,s.push(r)}return{enabled:!0,attributeFields:a,initializationLines:s}}function kue(e){let t=[],n=[],i=e.usedVariablesFragment.attributeSet;return i.hasOwnProperty("positionWC")&&(t.push(["vec3","positionWC"]),n.push("fsInput.attributes.positionWC = attributes.positionWC;")),i.hasOwnProperty("positionEC")&&(t.push(["vec3","positionEC"]),n.push("fsInput.attributes.positionEC = attributes.positionEC;")),{attributeFields:t,initializationLines:n}}function Uue(e,t){if(!c(e.fragmentShaderText))return{enabled:!1};let n=e.usedVariablesFragment.attributeSet,i=rz(t,n,!0),o=az(t,n,!0),r,a=[],s=[];for(let l in i){if(!i.hasOwnProperty(l))continue;let m=[i[l].glslType,l];a.push(m),r=`fsInput.attributes.${l} = attributes.${l};`,s.push(r)}for(let l=0;l<o.length;l++){let d=o[l],m=oz(d);if(!c(m))return br._oneTimeWarning("CustomShaderPipelineStage.incompatiblePrimitiveFS",`Primitive is missing attribute ${d}, disabling custom fragment shader.`),{enabled:!1};a.push(m.attributeField),r=`fsInput.attributes.${d} = ${m.value};`,s.push(r)}let A=kue(e);return{enabled:!0,attributeFields:a.concat(A.attributeFields),initializationLines:A.initializationLines.concat(s)}}var zue={positionWC:!0,positionEC:!0};function rz(e,t,n){let i={};for(let o in e){if(!e.hasOwnProperty(o))continue;let r=e[o],a=o;n&&o==="normalMC"?a="normalEC":n&&o==="tangentMC"&&(a="tangentEC",r.glslType="vec3"),t.hasOwnProperty(a)&&(i[a]=r)}return i}function az(e,t,n){let i=[];for(let o in t){if(!t.hasOwnProperty(o)||zue.hasOwnProperty(o))continue;let r=o;n&&o==="normalEC"?r="normalMC":n&&o==="tangentEC"&&(r="tangentMC"),e.hasOwnProperty(r)||i.push(o)}return i}function Gue(e,t){let n=Nue(t.attributes),i=Oue(e,n),o=Uue(e,n),a=e.usedVariablesFragment.attributeSet.hasOwnProperty("positionWC")&&o.enabled;return{vertexLines:i,fragmentLines:o,customShaderEnabled:i.enabled||o.enabled,shouldComputePositionWC:a}}function Hue(e,t){let n=br.STRUCT_ID_ATTRIBUTES_VS;e.addStruct(n,br.STRUCT_NAME_ATTRIBUTES,ie.VERTEX);let{attributeFields:i,initializationLines:o}=t;for(let a=0;a<i.length;a++){let[s,A]=i[a];e.addStructField(n,s,A)}n=br.STRUCT_ID_VERTEX_INPUT,e.addStruct(n,br.STRUCT_NAME_VERTEX_INPUT,ie.VERTEX),e.addStructField(n,br.STRUCT_NAME_ATTRIBUTES,"attributes"),e.addStructField(n,Xg.STRUCT_NAME_FEATURE_IDS,"featureIds"),e.addStructField(n,Ol.STRUCT_NAME_METADATA,"metadata"),e.addStructField(n,Ol.STRUCT_NAME_METADATA_CLASS,"metadataClass"),e.addStructField(n,Ol.STRUCT_NAME_METADATA_STATISTICS,"metadataStatistics");let r=br.FUNCTION_ID_INITIALIZE_INPUT_STRUCT_VS;e.addFunction(r,br.FUNCTION_SIGNATURE_INITIALIZE_INPUT_STRUCT_VS,ie.VERTEX),e.addFunctionLines(r,o)}function Vue(e,t){let n=br.STRUCT_ID_ATTRIBUTES_FS;e.addStruct(n,br.STRUCT_NAME_ATTRIBUTES,ie.FRAGMENT);let{attributeFields:i,initializationLines:o}=t;for(let a=0;a<i.length;a++){let[s,A]=i[a];e.addStructField(n,s,A)}n=br.STRUCT_ID_FRAGMENT_INPUT,e.addStruct(n,br.STRUCT_NAME_FRAGMENT_INPUT,ie.FRAGMENT),e.addStructField(n,br.STRUCT_NAME_ATTRIBUTES,"attributes"),e.addStructField(n,Xg.STRUCT_NAME_FEATURE_IDS,"featureIds"),e.addStructField(n,Ol.STRUCT_NAME_METADATA,"metadata"),e.addStructField(n,Ol.STRUCT_NAME_METADATA_CLASS,"metadataClass"),e.addStructField(n,Ol.STRUCT_NAME_METADATA_STATISTICS,"metadataStatistics");let r=br.FUNCTION_ID_INITIALIZE_INPUT_STRUCT_FS;e.addFunction(r,br.FUNCTION_SIGNATURE_INITIALIZE_INPUT_STRUCT_FS,ie.FRAGMENT),e.addFunctionLines(r,o)}var jue=[];function Yue(e,t,n){let{vertexLines:i,fragmentLines:o}=n,r=jue;i.enabled&&(Hue(e,i),r.length=0,r.push("#line 0",t.vertexShaderText,Y3),e.addVertexLines(r)),o.enabled&&(Vue(e,o),r.length=0,r.push("#line 0",t.fragmentShaderText,W3),e.addFragmentLines(r))}var sz=br;var Zg={name:"DequantizationPipelineStage",FUNCTION_ID_DEQUANTIZATION_STAGE_VS:"dequantizationStage",FUNCTION_SIGNATURE_DEQUANTIZATION_STAGE_VS:"void dequantizationStage(inout ProcessedAttributes attributes)"};Zg.process=function(e,t,n){let i=e.shaderBuilder,o=e.model,r=c(o.classificationType);i.addDefine("USE_DEQUANTIZATION",void 0,ie.VERTEX),i.addFunction(Zg.FUNCTION_ID_DEQUANTIZATION_STAGE_VS,Zg.FUNCTION_SIGNATURE_DEQUANTIZATION_STAGE_VS,ie.VERTEX);let a=t.attributes;for(let s=0;s<a.length;s++){let A=a[s],l=A.quantization;if(!c(l))continue;let d=A.semantic===Pe.POSITION,m=A.semantic===Pe.TEXCOORD;if(r&&!d&&!m)continue;let p=tt.getAttributeInfo(A);que(i,p),Wue(e,p)}};function Wue(e,t){let n=e.shaderBuilder,i=e.uniformMap,o=t.variableName,r=t.attribute.quantization;if(r.octEncoded){let a=`model_normalizationRange_${o}`;n.addUniform("float",a,ie.VERTEX),i[a]=function(){return r.normalizationRange}}else{let a=`model_quantizedVolumeOffset_${o}`,s=`model_quantizedVolumeStepSize_${o}`,A=t.glslType;n.addUniform(A,a,ie.VERTEX),n.addUniform(A,s,ie.VERTEX);let l=r.quantizedVolumeOffset,d=r.quantizedVolumeStepSize;/^color_\d+$/.test(o)&&(l=cz(l,0),d=cz(d,1)),i[a]=function(){return l},i[s]=function(){return d}}}function cz(e,t){return e instanceof re?e:new re(e.x,e.y,e.z,t)}function que(e,t){let n=t.variableName,i=t.attribute.quantization,o;i.octEncoded?o=Jue(n,i):o=Kue(n),e.addFunctionLines(Zg.FUNCTION_ID_DEQUANTIZATION_STAGE_VS,[o])}function Jue(e,t){let n=`attributes.${e}`,i=`a_quantized_${e}`,o=`model_normalizationRange_${e}`,r=t.octEncodedZXY?".zxy":".xyz";return`${n} = czm_octDecode(${i}, ${o})${r};`}function Kue(e){let t=`attributes.${e}`,n=`a_quantized_${e}`,i=`model_quantizedVolumeOffset_${e}`,o=`model_quantizedVolumeStepSize_${e}`;return`${t} = ${i} + ${n} * ${o};`}var Az=Zg;var lz=`void geometryStage(out ProcessedAttributes attributes)
{
  attributes.positionMC = v_positionMC;
  attributes.positionEC = v_positionEC;

  #if defined(COMPUTE_POSITION_WC_CUSTOM_SHADER) || defined(COMPUTE_POSITION_WC_STYLE) || defined(COMPUTE_POSITION_WC_ATMOSPHERE)
  attributes.positionWC = v_positionWC;
  #endif

  #ifdef HAS_NORMALS
  // renormalize after interpolation
  attributes.normalEC = normalize(v_normalEC);
  #endif

  #ifdef HAS_TANGENTS
  attributes.tangentEC = normalize(v_tangentEC);
  #endif

  #ifdef HAS_BITANGENTS
  attributes.bitangentEC = normalize(v_bitangentEC);
  #endif

  // Everything else is dynamically generated in GeometryPipelineStage
  setDynamicVaryings(attributes);
}
`;var uz=`vec4 geometryStage(inout ProcessedAttributes attributes, mat4 modelView, mat3 normal)
{
    vec4 computedPosition;

    // Compute positions in different coordinate systems
    vec3 positionMC = attributes.positionMC;
    v_positionMC = positionMC;
    v_positionEC = (modelView * vec4(positionMC, 1.0)).xyz;

    #if defined(USE_2D_POSITIONS) || defined(USE_2D_INSTANCING)
    vec3 position2D = attributes.position2D;
    vec3 positionEC = (u_modelView2D * vec4(position2D, 1.0)).xyz;
    computedPosition = czm_projection * vec4(positionEC, 1.0);
    #else
    computedPosition = czm_projection * vec4(v_positionEC, 1.0);
    #endif

    // Sometimes the custom shader and/or style needs this
    #if defined(COMPUTE_POSITION_WC_CUSTOM_SHADER) || defined(COMPUTE_POSITION_WC_STYLE) || defined(COMPUTE_POSITION_WC_ATMOSPHERE) || defined(ENABLE_CLIPPING_POLYGONS)
    // Note that this is a 32-bit position which may result in jitter on small
    // scales.
    v_positionWC = (czm_model * vec4(positionMC, 1.0)).xyz;
    #endif

    #ifdef HAS_NORMALS
    v_normalEC = normalize(normal * attributes.normalMC);
    #endif

    #ifdef HAS_TANGENTS
    v_tangentEC = normalize(normal * attributes.tangentMC);
    #endif

    #ifdef HAS_BITANGENTS
    v_bitangentEC = normalize(normal * attributes.bitangentMC);
    #endif

    // All other varyings need to be dynamically generated in
    // GeometryPipelineStage
    setDynamicVaryings(attributes);

    return computedPosition;
}
`;var FT=`vec2 computeSt(float featureId)
{
    float stepX = model_textureStep.x;
    float centerX = model_textureStep.y;

    #ifdef MULTILINE_BATCH_TEXTURE
    float stepY = model_textureStep.z;
    float centerY = model_textureStep.w;

    float xId = mod(featureId, model_textureDimensions.x); 
    float yId = floor(featureId / model_textureDimensions.x);
    
    return vec2(centerX + (xId * stepX), centerY + (yId * stepY));
    #else
    return vec2(centerX + (featureId * stepX), 0.5);
    #endif
}

void selectedFeatureIdStage(out SelectedFeature feature, FeatureIds featureIds)
{   
    int featureId = featureIds.SELECTED_FEATURE_ID;


    if (featureId < model_featuresLength)
    {
        vec2 featureSt = computeSt(float(featureId));

        feature.id = featureId;
        feature.st = featureSt;
        feature.color = texture(model_batchTexture, featureSt);
    }
    // Floating point comparisons can be unreliable in GLSL, so we
    // increment the feature ID to make sure it's always greater
    // then the model_featuresLength - a condition we check for in the
    // pick ID, to avoid sampling the pick texture if the feature ID is
    // greater than the number of features.
    else
    {
        feature.id = model_featuresLength + 1;
        feature.st = vec2(0.0);
        feature.color = vec4(1.0);
    }

    #ifdef HAS_NULL_FEATURE_ID
    if (featureId == model_nullFeatureId) {
        feature.id = featureId;
        feature.st = vec2(0.0);
        feature.color = vec4(1.0);
    }
    #endif
}
`;var $g={name:"SelectedFeatureIdPipelineStage",STRUCT_ID_SELECTED_FEATURE:"SelectedFeature",STRUCT_NAME_SELECTED_FEATURE:"SelectedFeature"};$g.process=function(e,t,n){let i=e.shaderBuilder;e.hasPropertyTable=!0;let o=e.model,r=e.runtimeNode.node,a=Xue(o,r,t),s=a.shaderDestination;i.addDefine("HAS_SELECTED_FEATURE_ID",void 0,s),i.addDefine("SELECTED_FEATURE_ID",a.variableName,s),i.addDefine(a.featureIdDefine,void 0,s),Zue(i);let A=a.featureIds.nullFeatureId,l=e.uniformMap;c(A)&&(i.addDefine("HAS_NULL_FEATURE_ID",void 0,s),i.addUniform("int","model_nullFeatureId",s),l.model_nullFeatureId=function(){return A}),a.shaderDestination===ie.BOTH&&i.addVertexLines(FT),i.addFragmentLines(FT)};function fz(e){return e instanceof Rt.FeatureIdTexture?"HAS_SELECTED_FEATURE_ID_TEXTURE":"HAS_SELECTED_FEATURE_ID_ATTRIBUTE"}function dz(e){return e instanceof Rt.FeatureIdTexture?ie.FRAGMENT:ie.BOTH}function Xue(e,t,n){let i,o;return c(t.instances)&&(o=tt.getFeatureIdsByLabel(t.instances.featureIds,e.instanceFeatureIdLabel),c(o))?(i=o.label??o.positionalLabel,{featureIds:o,variableName:i,shaderDestination:dz(o),featureIdDefine:fz(o)}):(o=tt.getFeatureIdsByLabel(n.featureIds,e.featureIdLabel),i=o.label??o.positionalLabel,{featureIds:o,variableName:i,shaderDestination:dz(o),featureIdDefine:fz(o)})}function Zue(e){e.addStructField($g.STRUCT_ID_SELECTED_FEATURE,"int","id"),e.addStructField($g.STRUCT_ID_SELECTED_FEATURE,"vec2","st"),e.addStructField($g.STRUCT_ID_SELECTED_FEATURE,"vec4","color")}var eC=$g;var Ar={name:"GeometryPipelineStage",STRUCT_ID_PROCESSED_ATTRIBUTES_VS:"ProcessedAttributesVS",STRUCT_ID_PROCESSED_ATTRIBUTES_FS:"ProcessedAttributesFS",STRUCT_NAME_PROCESSED_ATTRIBUTES:"ProcessedAttributes",FUNCTION_ID_INITIALIZE_ATTRIBUTES:"initializeAttributes",FUNCTION_SIGNATURE_INITIALIZE_ATTRIBUTES:"void initializeAttributes(out ProcessedAttributes attributes)",FUNCTION_ID_SET_DYNAMIC_VARYINGS_VS:"setDynamicVaryingsVS",FUNCTION_ID_SET_DYNAMIC_VARYINGS_FS:"setDynamicVaryingsFS",FUNCTION_SIGNATURE_SET_DYNAMIC_VARYINGS:"void setDynamicVaryings(inout ProcessedAttributes attributes)"};Ar.process=function(e,t,n){let{shaderBuilder:i,model:o}=e;i.addStruct(Ar.STRUCT_ID_PROCESSED_ATTRIBUTES_VS,"ProcessedAttributes",ie.VERTEX),i.addStruct(Ar.STRUCT_ID_PROCESSED_ATTRIBUTES_FS,"ProcessedAttributes",ie.FRAGMENT),i.addStruct(eC.STRUCT_ID_SELECTED_FEATURE,eC.STRUCT_NAME_SELECTED_FEATURE,ie.BOTH),i.addFunction(Ar.FUNCTION_ID_INITIALIZE_ATTRIBUTES,Ar.FUNCTION_SIGNATURE_INITIALIZE_ATTRIBUTES,ie.VERTEX),i.addVarying("vec3","v_positionWC"),i.addVarying("vec3","v_positionEC"),i.addStructField(Ar.STRUCT_ID_PROCESSED_ATTRIBUTES_FS,"vec3","positionWC"),i.addStructField(Ar.STRUCT_ID_PROCESSED_ATTRIBUTES_FS,"vec3","positionEC"),i.addFunction(Ar.FUNCTION_ID_SET_DYNAMIC_VARYINGS_VS,Ar.FUNCTION_SIGNATURE_SET_DYNAMIC_VARYINGS,ie.VERTEX),i.addFunction(Ar.FUNCTION_ID_SET_DYNAMIC_VARYINGS_FS,Ar.FUNCTION_SIGNATURE_SET_DYNAMIC_VARYINGS,ie.FRAGMENT),o.type===Do.TILE_PNTS&&i.addDefine("HAS_SRGB_COLOR",void 0,ie.FRAGMENT);let r=n.mode!==Ee.SCENE3D&&!n.scene3DOnly&&o._projectTo2D,a=c(e.runtimeNode.node.instances),s=r&&!a,A=t.attributes.length;for(let l=0;l<A;l++){let d=t.attributes[l],m=ct.getAttributeLocationCount(d.type),p=d.semantic===Pe.POSITION,g;m>1?(g=e.attributeIndex,e.attributeIndex+=m):p&&!s?g=0:g=e.attributeIndex++,$ue(e,d,g,m,r,a)}cfe(i,t.attributes),t.primitiveType===Me.POINTS&&i.addDefine("PRIMITIVE_TYPE_POINTS"),i.addVertexLines(uz),i.addFragmentLines(lz)};function $ue(e,t,n,i,o,r){let a=e.shaderBuilder,s=tt.getAttributeInfo(t),A=o&&!r;i>1?nfe(e,t,n,i):tfe(e,t,n,A),ofe(a,s,A),ife(a,s),c(t.semantic)&&efe(a,t),rfe(a,s,o),afe(a,s,A),sfe(a,s)}function efe(e,t){let{semantic:n,setIndex:i}=t;switch(n){case Pe.NORMAL:e.addDefine("HAS_NORMALS");break;case Pe.TANGENT:e.addDefine("HAS_TANGENTS");break;case Pe.FEATURE_ID:e.addDefine(`HAS${n}_${i}`);break;case Pe.TEXCOORD:case Pe.COLOR:e.addDefine(`HAS_${n}_${i}`)}}function tfe(e,t,n,i){let{quantization:o,semantic:r,setIndex:a}=t,{type:s,componentDatatype:A}=c(o)?o:t;r===Pe.FEATURE_ID&&a>=e.featureIdVertexAttributeSetIndex&&(e.featureIdVertexAttributeSetIndex=a+1);let l=r===Pe.POSITION,d=l?0:n,m=ct.getNumberOfComponents(s),p={index:d,value:c(t.buffer)?void 0:t.constant,vertexBuffer:t.buffer,count:t.count,componentsPerAttribute:m,componentDatatype:A,offsetInBytes:t.byteOffset,strideInBytes:t.byteStride,normalize:t.normalized};if(e.attributes.push(p),!l||!i)return;let g=e.runtimePrimitive.positionBuffer2D,h={index:n,vertexBuffer:g,count:t.count,componentsPerAttribute:m,componentDatatype:V.FLOAT,offsetInBytes:0,strideInBytes:void 0,normalize:t.normalized};e.attributes.push(h)}function nfe(e,t,n,i){let{quantization:o,normalized:r}=t,{type:a,componentDatatype:s}=c(o)?o:t,l=ct.getNumberOfComponents(a)/i,d=V.getSizeInBytes(s),m=l*d,p=t.byteStride;for(let g=0;g<i;g++){let h=t.byteOffset+g*m,C={index:n+g,vertexBuffer:t.buffer,componentsPerAttribute:l,componentDatatype:s,offsetInBytes:h,strideInBytes:p,normalize:r};e.attributes.push(C)}}function ife(e,t){let n=t.variableName,i=`v_${n}`,o;n==="normalMC"?(i="v_normalEC",o=t.glslType):n==="tangentMC"?(o="vec3",i="v_tangentEC"):o=t.glslType,e.addVarying(o,i)}function ofe(e,t,n){let i=t.attribute.semantic,o=t.variableName,r,a;t.isQuantized?(r=`a_quantized_${o}`,a=t.quantizedGlslType):(r=`a_${o}`,a=t.glslType);let s=i===Pe.POSITION;s?e.setPositionAttribute(a,r):e.addAttribute(a,r),s&&n&&e.addAttribute("vec3","a_position2D")}function rfe(e,t,n){let i=Ar.STRUCT_ID_PROCESSED_ATTRIBUTES_VS,o=Ar.STRUCT_ID_PROCESSED_ATTRIBUTES_FS,{variableName:r,glslType:a}=t;r==="tangentMC"?(e.addStructField(i,"vec3","tangentMC"),e.addStructField(i,"float","tangentSignMC"),e.addStructField(o,"vec3","tangentEC")):r==="normalMC"?(e.addStructField(i,"vec3","normalMC"),e.addStructField(o,"vec3","normalEC")):(e.addStructField(i,a,r),e.addStructField(o,a,r)),r==="positionMC"&&n&&e.addStructField(i,"vec3","position2D")}function afe(e,t,n){let i=Ar.FUNCTION_ID_INITIALIZE_ATTRIBUTES,o=t.variableName;if(o==="positionMC"&&n&&e.addFunctionLines(i,["attributes.position2D = a_position2D;"]),t.isQuantized)return;let a=[];o==="tangentMC"?(a.push("attributes.tangentMC = a_tangentMC.xyz;"),a.push("attributes.tangentSignMC = a_tangentMC.w;")):a.push(`attributes.${o} = a_${o};`),e.addFunctionLines(i,a)}function sfe(e,t){let{semantic:n,setIndex:i}=t.attribute;if(c(n)&&!c(i))return;let o=Ar.FUNCTION_ID_SET_DYNAMIC_VARYINGS_VS,r=t.variableName,a=`v_${r} = attributes.${r};`;e.addFunctionLines(o,[a]),o=Ar.FUNCTION_ID_SET_DYNAMIC_VARYINGS_FS,a=`attributes.${r} = v_${r};`,e.addFunctionLines(o,[a])}function cfe(e,t){let n=!1,i=!1;for(let o=0;o<t.length;o++){let r=t[o];r.semantic===Pe.NORMAL?n=!0:r.semantic===Pe.TANGENT&&(i=!0)}!n||!i||(e.addDefine("HAS_BITANGENTS"),e.addVarying("vec3","v_bitangentEC"),e.addStructField(Ar.STRUCT_ID_PROCESSED_ATTRIBUTES_VS,"vec3","bitangentMC"),e.addStructField(Ar.STRUCT_ID_PROCESSED_ATTRIBUTES_FS,"vec3","bitangentEC"))}var hz=Ar;function ff(e){if(e=e??G.EMPTY_OBJECT,this._ellipsoid=e.ellipsoid??pe.default,this._numberOfLevelZeroTilesX=e.numberOfLevelZeroTilesX??1,this._numberOfLevelZeroTilesY=e.numberOfLevelZeroTilesY??1,this._projection=new jn(this._ellipsoid),c(e.rectangleSouthwestInMeters)&&c(e.rectangleNortheastInMeters))this._rectangleSouthwestInMeters=e.rectangleSouthwestInMeters,this._rectangleNortheastInMeters=e.rectangleNortheastInMeters;else{let i=this._ellipsoid.maximumRadius*Math.PI;this._rectangleSouthwestInMeters=new L(-i,-i),this._rectangleNortheastInMeters=new L(i,i)}let t=this._projection.unproject(this._rectangleSouthwestInMeters),n=this._projection.unproject(this._rectangleNortheastInMeters);this._rectangle=new de(t.longitude,t.latitude,n.longitude,n.latitude)}Object.defineProperties(ff.prototype,{ellipsoid:{get:function(){return this._ellipsoid}},rectangle:{get:function(){return this._rectangle}},projection:{get:function(){return this._projection}}});ff.prototype.getNumberOfXTilesAtLevel=function(e){return this._numberOfLevelZeroTilesX<<e};ff.prototype.getNumberOfYTilesAtLevel=function(e){return this._numberOfLevelZeroTilesY<<e};ff.prototype.rectangleToNativeRectangle=function(e,t){let n=this._projection,i=n.project(de.southwest(e)),o=n.project(de.northeast(e));return c(t)?(t.west=i.x,t.south=i.y,t.east=o.x,t.north=o.y,t):new de(i.x,i.y,o.x,o.y)};ff.prototype.tileXYToNativeRectangle=function(e,t,n,i){let o=this.getNumberOfXTilesAtLevel(n),r=this.getNumberOfYTilesAtLevel(n),a=(this._rectangleNortheastInMeters.x-this._rectangleSouthwestInMeters.x)/o,s=this._rectangleSouthwestInMeters.x+e*a,A=this._rectangleSouthwestInMeters.x+(e+1)*a,l=(this._rectangleNortheastInMeters.y-this._rectangleSouthwestInMeters.y)/r,d=this._rectangleNortheastInMeters.y-t*l,m=this._rectangleNortheastInMeters.y-(t+1)*l;return c(i)?(i.west=s,i.south=m,i.east=A,i.north=d,i):new de(s,m,A,d)};ff.prototype.tileXYToRectangle=function(e,t,n,i){let o=this.tileXYToNativeRectangle(e,t,n,i),r=this._projection,a=r.unproject(new L(o.west,o.south)),s=r.unproject(new L(o.east,o.north));return o.west=a.longitude,o.south=a.latitude,o.east=s.longitude,o.north=s.latitude,o};ff.prototype.positionToTileXY=function(e,t,n){let i=this._rectangle;if(!de.contains(i,e))return;let o=this.getNumberOfXTilesAtLevel(t),r=this.getNumberOfYTilesAtLevel(t),s=(this._rectangleNortheastInMeters.x-this._rectangleSouthwestInMeters.x)/o,l=(this._rectangleNortheastInMeters.y-this._rectangleSouthwestInMeters.y)/r,m=this._projection.project(e),p=m.x-this._rectangleSouthwestInMeters.x,g=this._rectangleNortheastInMeters.y-m.y,h=p/s|0;h>=o&&(h=o-1);let C=g/l|0;return C>=r&&(C=r-1),c(n)?(n.x=h,n.y=C,n):new L(h,C)};var bs=ff;var OT,mz="AAPTxy8BH1VEsoebNVZXo8HurEOF051kAEKlhkOhBEc9BmRXcPUeuOd6ZTh-Z86vRv6teqZdBYLUWIxB6HTYajPhFtAlXhMdqTg07UwlBQ59KbiReC5wCeOF4LzLTW4oaSPp-t4pEcJHnFePlnFcIPXM7R565gTy6f6fMuZAXPvUEuZSMf8dvTqHyV9-Zd9eZGWokDzKC4uEtHME7OeAk3oyZ7vzkjEo8fpuIfFw0sH8vQU.AT1_PLgWE6Lc",um={};um.defaultAccessToken=mz;um.defaultWorldImageryServer=new Ye({url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"});um.defaultWorldHillshadeServer=new Ye({url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"});um.defaultWorldOceanServer=new Ye({url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer"});um.getDefaultTokenCredit=function(e){if(e===mz){if(!c(OT)){let t='<b>             This application is using a default ArcGIS access token. Please assign <i>Cesium.ArcGisMapService.defaultAccessToken</i>             with an API key from your ArcGIS Developer account before using the ArcGIS tile services.             You can sign up for a free ArcGIS Developer account at <a href="https://developers.arcgis.com/">https://developers.arcgis.com/</a>.</b>';OT=new fn(t,!0)}return OT}};var vA=um;function kT(e){e=e??G.EMPTY_OBJECT,this._pixelsToCheck=e.pixelsToCheck,this._missingImagePixels=void 0,this._missingImageByteLength=void 0,this._isReady=!1;let t=Ye.createIfNeeded(e.missingImageUrl),n=this;function i(r){c(r.blob)&&(n._missingImageByteLength=r.blob.size);let a=lh(r);if(e.disableCheckIfAllPixelsAreTransparent){let s=!0,A=r.width,l=e.pixelsToCheck;for(let d=0,m=l.length;s&&d<m;++d){let p=l[d],g=p.x*4+p.y*A;a[g+3]>0&&(s=!1)}s&&(a=void 0)}n._missingImagePixels=a,n._isReady=!0}function o(){n._missingImagePixels=void 0,n._isReady=!0}t.fetchImage({preferBlob:!0,preferImageBitmap:!0,flipY:!0}).then(i).catch(o)}kT.prototype.isReady=function(){return this._isReady};kT.prototype.shouldDiscardImage=function(e){let t=this._pixelsToCheck,n=this._missingImagePixels;if(!c(n)||c(e.blob)&&e.blob.size!==this._missingImageByteLength)return!1;let i=lh(e),o=e.width;for(let r=0,a=t.length;r<a;++r){let s=t[r],A=s.x*4+s.y*o;for(let l=0;l<4;++l){let d=A+l;if(i[d]!==n[d])return!1}}return!0};var pz=kT;function UT(){this.name=void 0,this.description=void 0,this.position=void 0,this.data=void 0,this.imageryLayer=void 0}UT.prototype.configureNameFromProperties=function(e){let t=10,n;for(let i in e)if(e.hasOwnProperty(i)&&e[i]){let o=i.toLowerCase();t>1&&o==="name"?(t=1,n=i):t>2&&o==="title"?(t=2,n=i):t>3&&/name/i.test(i)?(t=3,n=i):t>4&&/title/i.test(i)&&(t=4,n=i)}c(n)&&(this.name=e[n])};UT.prototype.configureDescriptionFromProperties=function(e){function t(n){let i='<table class="cesium-infoBox-defaultTable">';for(let o in n)if(n.hasOwnProperty(o)){let r=n[o];c(r)&&(typeof r=="object"?i+=`<tr><td>${o}</td><td>${t(r)}</td></tr>`:i+=`<tr><td>${o}</td><td>${r}</td></tr>`)}return i+="</table>",i}this.description=t(e)};var df=UT;function fm(){be.throwInstantiationError()}Object.defineProperties(fm.prototype,{rectangle:{get:be.throwInstantiationError},tileWidth:{get:be.throwInstantiationError},tileHeight:{get:be.throwInstantiationError},maximumLevel:{get:be.throwInstantiationError},minimumLevel:{get:be.throwInstantiationError},tilingScheme:{get:be.throwInstantiationError},tileDiscardPolicy:{get:be.throwInstantiationError},errorEvent:{get:be.throwInstantiationError},credit:{get:be.throwInstantiationError},proxy:{get:be.throwInstantiationError},hasAlphaChannel:{get:be.throwInstantiationError}});fm.prototype.getTileCredits=function(e,t,n){be.throwInstantiationError()};fm.prototype.requestImage=function(e,t,n,i){be.throwInstantiationError()};fm.prototype.pickFeatures=function(e,t,n,i,o){be.throwInstantiationError()};var Afe=/\.ktx2$/i;fm.loadImage=function(e,t){let n=Ye.createIfNeeded(t);return Afe.test(n.url)?ll(n):c(e)&&c(e.tileDiscardPolicy)?n.fetchImage({preferBlob:!0,preferImageBitmap:!0,flipY:!0}):n.fetchImage({preferImageBitmap:!0,flipY:!0})};var sc=fm;var lfe={SATELLITE:1,OCEANS:2,HILLSHADE:3},YI=Object.freeze(lfe);function gz(e){this.useTiles=e.usePreCachedTilesIfAvailable??!0;let t=e.ellipsoid;this.tilingScheme=e.tilingScheme??new Ja({ellipsoid:t}),this.rectangle=e.rectangle??this.tilingScheme.rectangle,this.ellipsoid=t;let n=e.credit;typeof n=="string"&&(n=new fn(n)),this.credit=n,this.tileCredits=void 0,this.tileDiscardPolicy=e.tileDiscardPolicy,this.tileWidth=e.tileWidth??256,this.tileHeight=e.tileHeight??256,this.maximumLevel=e.maximumLevel}gz.prototype.build=function(e){e._useTiles=this.useTiles,e._tilingScheme=this.tilingScheme,e._rectangle=this.rectangle,e._credit=this.credit,e._tileCredits=this.tileCredits,e._tileDiscardPolicy=this.tileDiscardPolicy,e._tileWidth=this.tileWidth,e._tileHeight=this.tileHeight,e._maximumLevel=this.maximumLevel,this.useTiles&&!c(this.tileDiscardPolicy)&&(e._tileDiscardPolicy=new pz({missingImageUrl:Cz(e,0,0,this.maximumLevel).url,pixelsToCheck:[new L(0,0),new L(200,20),new L(20,200),new L(80,110),new L(160,130)],disableCheckIfAllPixelsAreTransparent:!0}))};function ufe(e,t){let n=e.tileInfo;if(!c(n))t.useTiles=!1;else{if(t.tileWidth=n.rows,t.tileHeight=n.cols,n.spatialReference.wkid===102100||n.spatialReference.wkid===102113)t.tilingScheme=new bs({ellipsoid:t.ellipsoid});else if(e.tileInfo.spatialReference.wkid===4326)t.tilingScheme=new Ja({ellipsoid:t.ellipsoid});else{let i=`Tile spatial reference WKID ${e.tileInfo.spatialReference.wkid} is not supported.`;throw new ae(i)}if(t.maximumLevel=e.tileInfo.lods.length-1,c(e.fullExtent)){if(c(e.fullExtent.spatialReference)&&c(e.fullExtent.spatialReference.wkid))if(e.fullExtent.spatialReference.wkid===102100||e.fullExtent.spatialReference.wkid===102113){let i=new jn,o=e.fullExtent,r=i.unproject(new f(Math.max(o.xmin,-t.tilingScheme.ellipsoid.maximumRadius*Math.PI),Math.max(o.ymin,-t.tilingScheme.ellipsoid.maximumRadius*Math.PI),0)),a=i.unproject(new f(Math.min(o.xmax,t.tilingScheme.ellipsoid.maximumRadius*Math.PI),Math.min(o.ymax,t.tilingScheme.ellipsoid.maximumRadius*Math.PI),0));t.rectangle=new de(r.longitude,r.latitude,a.longitude,a.latitude)}else if(e.fullExtent.spatialReference.wkid===4326)t.rectangle=de.fromDegrees(e.fullExtent.xmin,e.fullExtent.ymin,e.fullExtent.xmax,e.fullExtent.ymax);else{let i=`fullExtent.spatialReference WKID ${e.fullExtent.spatialReference.wkid} is not supported.`;throw new ae(i)}}else t.rectangle=t.tilingScheme.rectangle;t.useTiles=!0}c(e.copyrightText)&&e.copyrightText.length>0&&(c(t.credit)?t.tileCredits=[new fn(e.copyrightText)]:t.credit=new fn(e.copyrightText))}function ffe(e,t){let n=`An error occurred while accessing ${e.url}`;throw c(t)&&c(t.message)&&(n+=`: ${t.message}`),new ae(n)}async function dfe(e,t){let n=e.getDerivedResource({queryParameters:{f:"json"}});try{let i=await n.fetchJson();ufe(i,t)}catch(i){ffe(e,i)}}function MA(e){e=e??G.EMPTY_OBJECT,this._defaultAlpha=void 0,this._defaultNightAlpha=void 0,this._defaultDayAlpha=void 0,this._defaultBrightness=void 0,this._defaultContrast=void 0,this._defaultHue=void 0,this._defaultSaturation=void 0,this._defaultGamma=void 0,this._defaultMinificationFilter=void 0,this._defaultMagnificationFilter=void 0,this._tileDiscardPolicy=e.tileDiscardPolicy,this._tileWidth=e.tileWidth??256,this._tileHeight=e.tileHeight??256,this._maximumLevel=e.maximumLevel,this._tilingScheme=e.tilingScheme??new Ja({ellipsoid:e.ellipsoid}),this._useTiles=e.usePreCachedTilesIfAvailable??!0,this._rectangle=e.rectangle??this._tilingScheme.rectangle,this._layers=e.layers,this._credit=e.credit,this._tileCredits=void 0;let t=e.credit;typeof t=="string"&&(t=new fn(t)),this.enablePickFeatures=e.enablePickFeatures??!0,this._errorEvent=new Le}MA.fromBasemapType=async function(e,t){t=t??G.EMPTY_OBJECT;let n,i,o;switch(e){case YI.SATELLITE:{n=t.token??vA.defaultAccessToken,i=Ye.createIfNeeded(vA.defaultWorldImageryServer),i.appendForwardSlash();let r=vA.getDefaultTokenCredit(n);c(r)&&(o=fn.clone(r))}break;case YI.OCEANS:{n=t.token??vA.defaultAccessToken,i=Ye.createIfNeeded(vA.defaultWorldOceanServer),i.appendForwardSlash();let r=vA.getDefaultTokenCredit(n);c(r)&&(o=fn.clone(r))}break;case YI.HILLSHADE:{n=t.token??vA.defaultAccessToken,i=Ye.createIfNeeded(vA.defaultWorldHillshadeServer),i.appendForwardSlash();let r=vA.getDefaultTokenCredit(n);c(r)&&(o=fn.clone(r))}break;default:}return MA.fromUrl(i,{...t,token:n,credit:o,usePreCachedTilesIfAvailable:!0})};function Cz(e,t,n,i,o){let r;if(e._useTiles)r=e._resource.getDerivedResource({url:`tile/${i}/${n}/${t}`,request:o});else{let a=e._tilingScheme.tileXYToNativeRectangle(t,n,i),A={bbox:`${a.west},${a.south},${a.east},${a.north}`,size:`${e._tileWidth},${e._tileHeight}`,format:"png32",transparent:!0,f:"image"};e._tilingScheme.projection instanceof Ai?(A.bboxSR=4326,A.imageSR=4326):(A.bboxSR=3857,A.imageSR=3857),e.layers&&(A.layers=`show:${e.layers}`),r=e._resource.getDerivedResource({url:"export",request:o,queryParameters:A})}return r}Object.defineProperties(MA.prototype,{url:{get:function(){return this._resource._url}},token:{get:function(){return this._resource.queryParameters.token}},proxy:{get:function(){return this._resource.proxy}},tileWidth:{get:function(){return this._tileWidth}},tileHeight:{get:function(){return this._tileHeight}},maximumLevel:{get:function(){return this._maximumLevel}},minimumLevel:{get:function(){return 0}},tilingScheme:{get:function(){return this._tilingScheme}},rectangle:{get:function(){return this._rectangle}},tileDiscardPolicy:{get:function(){return this._tileDiscardPolicy}},errorEvent:{get:function(){return this._errorEvent}},credit:{get:function(){return this._credit}},usingPrecachedTiles:{get:function(){return this._useTiles}},hasAlphaChannel:{get:function(){return!0}},layers:{get:function(){return this._layers}}});MA.fromUrl=async function(e,t){t=t??G.EMPTY_OBJECT;let n=Ye.createIfNeeded(e);n.appendForwardSlash(),c(t.token)&&n.setQueryParameters({token:t.token});let i=new MA(t);i._resource=n;let o=new gz(t);return(t.usePreCachedTilesIfAvailable??!0)&&await dfe(n,o),o.build(i),i};MA.prototype.getTileCredits=function(e,t,n){return this._tileCredits};MA.prototype.requestImage=function(e,t,n,i){return sc.loadImage(this,Cz(this,e,t,n,i))};MA.prototype.pickFeatures=function(e,t,n,i,o){if(!this.enablePickFeatures)return;let r=this._tilingScheme.tileXYToNativeRectangle(e,t,n),a,s,A;if(this._tilingScheme.projection instanceof Ai)a=S.toDegrees(i),s=S.toDegrees(o),A="4326";else{let p=this._tilingScheme.projection.project(new ue(i,o,0));a=p.x,s=p.y,A="3857"}let l="visible";c(this._layers)&&(l+=`:${this._layers}`);let d={f:"json",tolerance:2,geometryType:"esriGeometryPoint",geometry:`${a},${s}`,mapExtent:`${r.west},${r.south},${r.east},${r.north}`,imageDisplay:`${this._tileWidth},${this._tileHeight},96`,sr:A,layers:l};return this._resource.getDerivedResource({url:"identify",queryParameters:d}).fetchJson().then(function(p){let g=[],h=p.results;if(!c(h))return g;for(let C=0;C<h.length;++C){let _=h[C],I=new df;if(I.data=_,I.name=_.value,I.properties=_.attributes,I.configureDescriptionFromProperties(_.attributes),_.geometryType==="esriGeometryPoint"&&_.geometry){let b=_.geometry.spatialReference&&_.geometry.spatialReference.wkid?_.geometry.spatialReference.wkid:4326;if(b===4326||b===4283)I.position=ue.fromDegrees(_.geometry.x,_.geometry.y,_.geometry.z);else if(b===102100||b===900913||b===3857){let x=new jn;I.position=x.unproject(new f(_.geometry.x,_.geometry.y,_.geometry.z))}}g.push(I)}return g})};MA._metadataCache={};var Ez=MA;function hfe(e){let t,n=e.name,i=e.message;c(n)&&c(i)?t=`${n}: ${i}`:t=e.toString();let o=e.stack;return c(o)&&(t+=`
${o}`),t}var _z=hfe;function WI(e,t,n,i,o,r,a){this.provider=e,this.message=t,this.x=n,this.y=i,this.level=o,this.timesRetried=r??0,this.retry=!1,this.error=a}WI.reportError=function(e,t,n,i,o,r,a,s){let A=e;return c(e)?(A.provider=t,A.message=i,A.x=o,A.y=r,A.level=a,A.retry=!1,A.error=s,++A.timesRetried):A=new WI(t,i,o,r,a,0,s),c(n)&&n.numberOfListeners>0?n.raiseEvent(A):c(t)&&console.log(`An error occurred in "${t.constructor.name}": ${_z(i)}`),A};WI.reportSuccess=function(e){c(e)&&(e.timesRetried=-1)};var Sa=WI;var mfe={AERIAL:"Aerial",AERIAL_WITH_LABELS:"AerialWithLabels",AERIAL_WITH_LABELS_ON_DEMAND:"AerialWithLabelsOnDemand",ROAD:"Road",ROAD_ON_DEMAND:"RoadOnDemand",CANVAS_DARK:"CanvasDark",CANVAS_LIGHT:"CanvasLight",CANVAS_GRAY:"CanvasGray",ORDNANCE_SURVEY:"OrdnanceSurvey",COLLINS_BART:"CollinsBart"},zT=Object.freeze(mfe);function tC(e){}tC.prototype.isReady=function(){return!0};tC.prototype.shouldDiscardImage=function(e){return tC.EMPTY_IMAGE===e};var qI;Object.defineProperties(tC,{EMPTY_IMAGE:{get:function(){return c(qI)||(qI=new Image,qI.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII="),qI}}});var GT=tC;function Iz(e){this.tileWidth=void 0,this.tileHeight=void 0,this.maximumLevel=void 0,this.imageUrlSubdomains=void 0,this.imageUrlTemplate=void 0,this.attributionList=void 0}Iz.prototype.build=function(e){e._tileWidth=this.tileWidth,e._tileHeight=this.tileHeight,e._maximumLevel=this.maximumLevel,e._imageUrlSubdomains=this.imageUrlSubdomains,e._imageUrlTemplate=this.imageUrlTemplate;let t=e._attributionList=this.attributionList;t||(t=[]),e._attributionList=t;for(let n=0,i=t.length;n<i;++n){let o=t[n];if(o.credit instanceof fn)break;o.credit=new fn(o.attribution);let r=o.coverageAreas;for(let a=0,s=o.coverageAreas.length;a<s;++a){let A=r[a],l=A.bbox;A.bbox=new de(S.toRadians(l[1]),S.toRadians(l[0]),S.toRadians(l[3]),S.toRadians(l[2]))}}};function pfe(e,t){if(e.resourceSets.length!==1)throw new ae("metadata does not specify one resource in resourceSets");let n=e.resourceSets[0].resources[0];t.tileWidth=n.imageWidth,t.tileHeight=n.imageHeight,t.maximumLevel=n.zoomMax-1,t.imageUrlSubdomains=n.imageUrlSubdomains,t.imageUrlTemplate=n.imageUrl;let i=n.imageryProviders;c(n.imageryProviders)&&(i=n.imageryProviders.filter(o=>o.coverageAreas?.some(r=>c(r.bbox)))),t.attributionList=i}function gfe(e,t,n){let i=`An error occurred while accessing ${e.url}`;throw c(t)&&c(t.message)&&(i+=`: ${t.message}`),Sa.reportError(void 0,n,c(n)?n._errorEvent:void 0,i,void 0,void 0,void 0,t),new ae(i)}async function Cfe(e,t,n){let i=e.url,o=Wo._metadataCache[i];c(o)||(o=e.fetchJson(),Wo._metadataCache[i]=o);try{let r=await o;return pfe(r,t)}catch(r){gfe(e,r,n)}}function Wo(e){e=e??G.EMPTY_OBJECT,this._defaultAlpha=void 0,this._defaultNightAlpha=void 0,this._defaultDayAlpha=void 0,this._defaultBrightness=void 0,this._defaultContrast=void 0,this._defaultHue=void 0,this._defaultSaturation=void 0,this._defaultGamma=1,this._defaultMinificationFilter=void 0,this._defaultMagnificationFilter=void 0,this._mapStyle=e.mapStyle??zT.AERIAL,this._mapLayer=e.mapLayer,this._culture=e.culture??"",this._key=e.key,this._tileDiscardPolicy=e.tileDiscardPolicy,c(this._tileDiscardPolicy)||(this._tileDiscardPolicy=new GT),this._proxy=e.proxy,this._credit=new fn(`<a href="https://www.microsoft.com/en-us/maps/bing-maps/product"><img src="${Wo.logoUrl}" title="Bing Imagery"/></a>`),this._tilingScheme=new bs({numberOfLevelZeroTilesX:2,numberOfLevelZeroTilesY:2,ellipsoid:e.ellipsoid}),this._tileWidth=void 0,this._tileHeight=void 0,this._maximumLevel=void 0,this._imageUrlTemplate=void 0,this._imageUrlSubdomains=void 0,this._attributionList=void 0,this._errorEvent=new Le}Object.defineProperties(Wo.prototype,{url:{get:function(){return this._resource.url}},proxy:{get:function(){return this._resource.proxy}},key:{get:function(){return this._key}},mapStyle:{get:function(){return this._mapStyle}},mapLayer:{get:function(){return this._mapLayer}},culture:{get:function(){return this._culture}},tileWidth:{get:function(){return this._tileWidth}},tileHeight:{get:function(){return this._tileHeight}},maximumLevel:{get:function(){return this._maximumLevel}},minimumLevel:{get:function(){return 0}},tilingScheme:{get:function(){return this._tilingScheme}},rectangle:{get:function(){return this._tilingScheme.rectangle}},tileDiscardPolicy:{get:function(){return this._tileDiscardPolicy}},errorEvent:{get:function(){return this._errorEvent}},credit:{get:function(){return this._credit}},hasAlphaChannel:{get:function(){return c(this.mapLayer)}}});Wo.fromUrl=async function(e,t){t=t??G.EMPTY_OBJECT;let n=t.tileProtocol;c(n)?n.length>0&&n[n.length-1]===":"&&(n=n.substr(0,n.length-1)):n=document.location.protocol==="http:"?"http":"https";let i=t.mapStyle??zT.AERIAL,o=Ye.createIfNeeded(e);o.appendForwardSlash();let r={incl:"ImageryProviders",key:t.key,uriScheme:n};c(t.mapLayer)&&(r.mapLayer=t.mapLayer),c(t.culture)&&(r.culture=t.culture);let a=o.getDerivedResource({url:`REST/v1/Imagery/Metadata/${i}`,queryParameters:r}),s=new Wo(t);s._resource=o;let A=new Iz(t);return await Cfe(a,A),A.build(s),s};var Efe=new de;Wo.prototype.getTileCredits=function(e,t,n){let i=this._tilingScheme.tileXYToRectangle(e,t,n,Efe);return yfe(this._attributionList,n,i)};Wo.prototype.requestImage=function(e,t,n,i){let o=sc.loadImage(this,_fe(this,e,t,n,i));if(c(o))return o.catch(function(r){return c(r.blob)&&r.blob.size===0?GT.EMPTY_IMAGE:Promise.reject(r)})};Wo.prototype.pickFeatures=function(e,t,n,i,o){};Wo.tileXYToQuadKey=function(e,t,n){let i="";for(let o=n;o>=0;--o){let r=1<<o,a=0;(e&r)!==0&&(a|=1),(t&r)!==0&&(a|=2),i+=a}return i};Wo.quadKeyToTileXY=function(e){let t=0,n=0,i=e.length-1;for(let o=i;o>=0;--o){let r=1<<o,a=+e[i-o];(a&1)!==0&&(t|=r),(a&2)!==0&&(n|=r)}return{x:t,y:n,level:i}};Wo._logoUrl=void 0;Object.defineProperties(Wo,{logoUrl:{get:function(){return c(Wo._logoUrl)||(Wo._logoUrl=Ga("Assets/Images/bing_maps_credit.png")),Wo._logoUrl},set:function(e){Wo._logoUrl=e}}});function _fe(e,t,n,i,o){let r=e._imageUrlTemplate,a=e._imageUrlSubdomains,s=(t+n+i)%a.length;return e._resource.getDerivedResource({url:r,request:o,templateValues:{quadkey:Wo.tileXYToQuadKey(t,n,i),subdomain:a[s],culture:e._culture},queryParameters:{n:"z"}})}var Ife=new de;function yfe(e,t,n){++t;let i=[];for(let o=0,r=e.length;o<r;++o){let a=e[o],s=a.coverageAreas,A=!1;for(let l=0,d=a.coverageAreas.length;!A&&l<d;++l){let m=s[l];if(t>=m.zoomMin&&t<=m.zoomMax){let p=de.intersection(n,m.bbox,Ife);c(p)&&(A=!0)}}A&&i.push(a.credit)}return i}Wo._metadataCache={};var yz=Wo;var bz=/{[^}]+}/g,Bz={x:Tfe,y:wfe,z:Rfe,s:vfe,reverseX:Sfe,reverseY:Dfe,reverseZ:Qfe,westDegrees:Mfe,southDegrees:Pfe,eastDegrees:Nfe,northDegrees:Lfe,westProjected:Ffe,southProjected:Ofe,eastProjected:kfe,northProjected:Ufe,width:zfe,height:Gfe},bfe=dt(Bz,{i:Hfe,j:Vfe,reverseI:jfe,reverseJ:Yfe,longitudeDegrees:qfe,latitudeDegrees:Jfe,longitudeProjected:Kfe,latitudeProjected:Xfe,format:$fe});function nC(e){e=e??G.EMPTY_OBJECT,this._errorEvent=new Le;let t=Ye.createIfNeeded(e.url),n=Ye.createIfNeeded(e.pickFeaturesUrl);this._resource=t,this._urlSchemeZeroPadding=e.urlSchemeZeroPadding,this._getFeatureInfoFormats=e.getFeatureInfoFormats,this._pickFeaturesResource=n;let i=e.subdomains;Array.isArray(i)?i=i.slice():c(i)&&i.length>0?i=i.split(""):i=["a","b","c"],this._subdomains=i,this._tileWidth=e.tileWidth??256,this._tileHeight=e.tileHeight??256,this._minimumLevel=e.minimumLevel??0,this._maximumLevel=e.maximumLevel,this._tilingScheme=e.tilingScheme??new bs({ellipsoid:e.ellipsoid}),this._rectangle=e.rectangle??this._tilingScheme.rectangle,this._rectangle=de.intersection(this._rectangle,this._tilingScheme.rectangle),this._tileDiscardPolicy=e.tileDiscardPolicy;let o=e.credit;typeof o=="string"&&(o=new fn(o)),this._credit=o,this._hasAlphaChannel=e.hasAlphaChannel??!0;let r=e.customTags,a=dt(Bz,r),s=dt(bfe,r);this._tags=a,this._pickFeaturesTags=s,this._defaultAlpha=void 0,this._defaultNightAlpha=void 0,this._defaultDayAlpha=void 0,this._defaultBrightness=void 0,this._defaultContrast=void 0,this._defaultHue=void 0,this._defaultSaturation=void 0,this._defaultGamma=void 0,this._defaultMinificationFilter=void 0,this._defaultMagnificationFilter=void 0,this.enablePickFeatures=e.enablePickFeatures??!0}Object.defineProperties(nC.prototype,{url:{get:function(){return this._resource.url}},urlSchemeZeroPadding:{get:function(){return this._urlSchemeZeroPadding}},pickFeaturesUrl:{get:function(){return this._pickFeaturesResource.url}},proxy:{get:function(){return this._resource.proxy}},tileWidth:{get:function(){return this._tileWidth}},tileHeight:{get:function(){return this._tileHeight}},maximumLevel:{get:function(){return this._maximumLevel}},minimumLevel:{get:function(){return this._minimumLevel}},tilingScheme:{get:function(){return this._tilingScheme}},rectangle:{get:function(){return this._rectangle}},tileDiscardPolicy:{get:function(){return this._tileDiscardPolicy}},errorEvent:{get:function(){return this._errorEvent}},credit:{get:function(){return this._credit}},hasAlphaChannel:{get:function(){return this._hasAlphaChannel}}});nC.prototype.getTileCredits=function(e,t,n){};nC.prototype.requestImage=function(e,t,n,i){return sc.loadImage(this,Bfe(this,e,t,n,i))};nC.prototype.pickFeatures=function(e,t,n,i,o){if(!this.enablePickFeatures||!c(this._pickFeaturesResource)||this._getFeatureInfoFormats.length===0)return;let r=0,a=this;function s(l,d){return l.callback(d)}function A(){if(r>=a._getFeatureInfoFormats.length)return Promise.resolve([]);let l=a._getFeatureInfoFormats[r],d=xfe(a,e,t,n,i,o,l.format);return++r,l.type==="json"?d.fetchJson().then(l.callback).catch(A):l.type==="xml"?d.fetchXML().then(l.callback).catch(A):l.type==="text"||l.type==="html"?d.fetchText().then(l.callback).catch(A):d.fetch({responseType:l.format}).then(s.bind(void 0,l)).catch(A)}return A()};var JI=!1,Bs=new de,KI=!1,iC=new de;function Bfe(e,t,n,i,o){JI=!1,KI=!1;let r=e._resource,a=r.getUrlComponent(!0),s=e._tags,A={},l=a.match(bz);return c(l)&&l.forEach(function(d){let m=d.substring(1,d.length-1);c(s[m])&&(A[m]=s[m](e,t,n,i))}),r.getDerivedResource({request:o,templateValues:A})}var HT=!1,hm=new L,VT=!1;function xfe(e,t,n,i,o,r,a){JI=!1,KI=!1,HT=!1,VT=!1;let s=e._pickFeaturesResource,A=s.getUrlComponent(!0),l=e._pickFeaturesTags,d={},m=A.match(bz);return c(m)&&m.forEach(function(p){let g=p.substring(1,p.length-1);c(l[g])&&(d[g]=l[g](e,t,n,i,o,r,a))}),s.getDerivedResource({templateValues:d})}function mm(e,t,n){if(e&&e.urlSchemeZeroPadding&&e.urlSchemeZeroPadding.hasOwnProperty(t)){let i=e.urlSchemeZeroPadding[t];if(typeof i=="string"){let o=i.length;o>1&&(n=n.length>=o?n:new Array(o-n.toString().length+1).join("0")+n)}}return n}function Tfe(e,t,n,i){return mm(e,"{x}",t)}function Sfe(e,t,n,i){let o=e.tilingScheme.getNumberOfXTilesAtLevel(i)-t-1;return mm(e,"{reverseX}",o)}function wfe(e,t,n,i){return mm(e,"{y}",n)}function Dfe(e,t,n,i){let o=e.tilingScheme.getNumberOfYTilesAtLevel(i)-n-1;return mm(e,"{reverseY}",o)}function Qfe(e,t,n,i){let o=e.maximumLevel,r=c(o)&&i<o?o-i-1:i;return mm(e,"{reverseZ}",r)}function Rfe(e,t,n,i){return mm(e,"{z}",i)}function vfe(e,t,n,i){let o=(t+n+i)%e._subdomains.length;return e._subdomains[o]}function XI(e,t,n,i){JI||(e.tilingScheme.tileXYToRectangle(t,n,i,Bs),Bs.west=S.toDegrees(Bs.west),Bs.south=S.toDegrees(Bs.south),Bs.east=S.toDegrees(Bs.east),Bs.north=S.toDegrees(Bs.north),JI=!0)}function Mfe(e,t,n,i){return XI(e,t,n,i),Bs.west}function Pfe(e,t,n,i){return XI(e,t,n,i),Bs.south}function Nfe(e,t,n,i){return XI(e,t,n,i),Bs.east}function Lfe(e,t,n,i){return XI(e,t,n,i),Bs.north}function ZI(e,t,n,i){KI||(e.tilingScheme.tileXYToNativeRectangle(t,n,i,iC),KI=!0)}function Ffe(e,t,n,i){return ZI(e,t,n,i),iC.west}function Ofe(e,t,n,i){return ZI(e,t,n,i),iC.south}function kfe(e,t,n,i){return ZI(e,t,n,i),iC.east}function Ufe(e,t,n,i){return ZI(e,t,n,i),iC.north}function zfe(e,t,n,i){return e.tileWidth}function Gfe(e,t,n,i){return e.tileHeight}function Hfe(e,t,n,i,o,r,a){return $I(e,t,n,i,o,r),hm.x}function Vfe(e,t,n,i,o,r,a){return $I(e,t,n,i,o,r),hm.y}function jfe(e,t,n,i,o,r,a){return $I(e,t,n,i,o,r),e.tileWidth-hm.x-1}function Yfe(e,t,n,i,o,r,a){return $I(e,t,n,i,o,r),e.tileHeight-hm.y-1}var Wfe=new de,dm=new f;function $I(e,t,n,i,o,r,a){if(HT)return;jT(e,t,n,i,o,r);let s=dm,A=e.tilingScheme.tileXYToNativeRectangle(t,n,i,Wfe);hm.x=e.tileWidth*(s.x-A.west)/A.width|0,hm.y=e.tileHeight*(A.north-s.y)/A.height|0,HT=!0}function qfe(e,t,n,i,o,r,a){return S.toDegrees(o)}function Jfe(e,t,n,i,o,r,a){return S.toDegrees(r)}function Kfe(e,t,n,i,o,r,a){return jT(e,t,n,i,o,r),dm.x}function Xfe(e,t,n,i,o,r,a){return jT(e,t,n,i,o,r),dm.y}var Zfe=new ue;function jT(e,t,n,i,o,r,a){if(!VT){if(e.tilingScheme.projection instanceof Ai)dm.x=S.toDegrees(o),dm.y=S.toDegrees(r);else{let s=Zfe;s.longitude=o,s.latitude=r,e.tilingScheme.projection.project(s,dm)}VT=!0}}function $fe(e,t,n,i,o,r,a){return a}var kl=nC;function cc(e){kl.call(this,e)}cc._requestMetadata=async function(e,t,n,i){try{let o=await n.fetchXML();return cc._metadataSuccess(o,e,t,n,i)}catch(o){if(o instanceof Nf)return cc._metadataFailure(e,t);throw o}};cc.fromUrl=async function(e,t){let n=Ye.createIfNeeded(e);n.appendForwardSlash();let i=n,o=n.getDerivedResource({url:"tilemapresource.xml"});t=t??G.EMPTY_OBJECT;let r=await cc._requestMetadata(t,i,o);return new cc(r)};c(Object.create)&&(cc.prototype=Object.create(kl.prototype),cc.prototype.constructor=cc);function xz(e,t){return e.west<t.rectangle.west&&(e.west=t.rectangle.west),e.east>t.rectangle.east&&(e.east=t.rectangle.east),e.south<t.rectangle.south&&(e.south=t.rectangle.south),e.north>t.rectangle.north&&(e.north=t.rectangle.north),e}function Tz(e,t,n){let i=e.positionToTileXY(de.southwest(t),n),o=e.positionToTileXY(de.northeast(t),n);return(Math.abs(o.x-i.x)+1)*(Math.abs(o.y-i.y)+1)>4?0:n}cc._metadataSuccess=function(e,t,n,i,o){let r=/tileformat/i,a=/tileset/i,s=/tilesets/i,A=/boundingbox/i,l,d,m,p=[],g=e.childNodes[0].childNodes;for(let M=0;M<g.length;M++)if(r.test(g.item(M).nodeName))l=g.item(M);else if(s.test(g.item(M).nodeName)){m=g.item(M);let N=g.item(M).childNodes;for(let O=0;O<N.length;O++)a.test(N.item(O).nodeName)&&p.push(N.item(O))}else A.test(g.item(M).nodeName)&&(d=g.item(M));let h;if(!c(m)||!c(d))throw h=`Unable to find expected tilesets or bbox attributes in ${i.url}.`,c(o)&&Sa.reportError(void 0,o,o.errorEvent,h),new ae(h);let C=t.fileExtension??l.getAttribute("extension"),_=t.tileWidth??parseInt(l.getAttribute("width"),10),I=t.tileHeight??parseInt(l.getAttribute("height"),10),b=t.minimumLevel??parseInt(p[0].getAttribute("order"),10),x=t.maximumLevel??parseInt(p[p.length-1].getAttribute("order"),10),T=m.getAttribute("profile"),w=t.tilingScheme;if(!c(w))if(T==="geodetic"||T==="global-geodetic")w=new Ja({ellipsoid:t.ellipsoid});else if(T==="mercator"||T==="global-mercator")w=new bs({ellipsoid:t.ellipsoid});else throw h=`${i.url} specifies an unsupported profile attribute, ${T}.`,c(o)&&Sa.reportError(void 0,o,o.errorEvent,h),new ae(h);let R=de.clone(t.rectangle);if(!c(R)){let M,N,O,u;t.flipXY??!1?(O=new L(parseFloat(d.getAttribute("miny")),parseFloat(d.getAttribute("minx"))),u=new L(parseFloat(d.getAttribute("maxy")),parseFloat(d.getAttribute("maxx")))):(O=new L(parseFloat(d.getAttribute("minx")),parseFloat(d.getAttribute("miny"))),u=new L(parseFloat(d.getAttribute("maxx")),parseFloat(d.getAttribute("maxy"))));let y=T==="geodetic"||T==="mercator";if(w.projection instanceof Ai||y)M=ue.fromDegrees(O.x,O.y),N=ue.fromDegrees(u.x,u.y);else{let B=w.projection;M=B.unproject(O),N=B.unproject(u)}R=new de(M.longitude,M.latitude,N.longitude,N.latitude)}return R=xz(R,w),b=Tz(w,R,b),{url:n.getDerivedResource({url:`{z}/{x}/{reverseY}.${C}`}),tilingScheme:w,rectangle:R,tileWidth:_,tileHeight:I,minimumLevel:b,maximumLevel:x,tileDiscardPolicy:t.tileDiscardPolicy,credit:t.credit}};cc._metadataFailure=function(e,t){let n=e.fileExtension??"png",i=e.tileWidth??256,o=e.tileHeight??256,r=e.maximumLevel,a=c(e.tilingScheme)?e.tilingScheme:new bs({ellipsoid:e.ellipsoid}),s=e.rectangle??a.rectangle;s=xz(s,a);let A=Tz(a,s,e.minimumLevel);return{url:t.getDerivedResource({url:`{z}/{x}/{reverseY}.${n}`}),tilingScheme:a,rectangle:s,tileWidth:i,tileHeight:o,minimumLevel:A,maximumLevel:r,tileDiscardPolicy:e.tileDiscardPolicy,credit:e.credit}};var YT=cc;function Sz(e){this.channel=e.channel,this.ellipsoid=e.ellipsoid,this.tilingScheme=void 0,this.version=void 0}Sz.prototype.build=function(e){e._channel=this.channel,e._version=this.version,e._tilingScheme=this.tilingScheme};function ede(e,t){let n;try{n=JSON.parse(e)}catch{n=JSON.parse(e.replace(/([\[\{,])[\n\r ]*([A-Za-z0-9]+)[\n\r ]*:/g,'$1"$2":'))}let i;for(let o=0;o<n.layers.length;o++)if(n.layers[o].id===t.channel){i=n.layers[o];break}if(!c(i)){let o=`Could not find layer with channel (id) of ${t.channel}.`;throw new ae(o)}if(!c(i.version)){let o=`Could not find a version in channel (id) ${t.channel}.`;throw new ae(o)}if(t.version=i.version,c(n.projection)&&n.projection==="flat")t.tilingScheme=new Ja({numberOfLevelZeroTilesX:2,numberOfLevelZeroTilesY:2,rectangle:new de(-Math.PI,-Math.PI,Math.PI,Math.PI),ellipsoid:t.ellipsoid});else if(!c(n.projection)||n.projection==="mercator")t.tilingScheme=new bs({numberOfLevelZeroTilesX:2,numberOfLevelZeroTilesY:2,ellipsoid:t.ellipsoid});else{let o=`Unsupported projection ${n.projection}.`;throw new ae(o)}return!0}function tde(e,t,n){let i=`An error occurred while accessing ${t.url}.`;throw c(e)&&c(e.message)&&(i+=`: ${e.message}`),Sa.reportError(void 0,n,c(n)?n._errorEvent:void 0,i),new ae(i)}async function nde(e,t,n){try{let i=await e.fetchText();ede(i,t)}catch(i){tde(i,e,n)}}function ts(e){e=e??{},this._defaultAlpha=void 0,this._defaultNightAlpha=void 0,this._defaultDayAlpha=void 0,this._defaultBrightness=void 0,this._defaultContrast=void 0,this._defaultHue=void 0,this._defaultSaturation=void 0,this._defaultGamma=1.9,this._defaultMinificationFilter=void 0,this._defaultMagnificationFilter=void 0,this._tileDiscardPolicy=e.tileDiscardPolicy,this._channel=e.channel,this._requestType="ImageryMaps",this._credit=new fn(`<a href="http://www.google.com/enterprise/mapsearth/products/earthenterprise.html"><img src="${ts.logoUrl}" title="Google Imagery"/></a>`),this._tilingScheme=void 0,this._version=void 0,this._tileWidth=256,this._tileHeight=256,this._maximumLevel=e.maximumLevel,this._errorEvent=new Le}Object.defineProperties(ts.prototype,{url:{get:function(){return this._url}},path:{get:function(){return this._path}},proxy:{get:function(){return this._resource.proxy}},channel:{get:function(){return this._channel}},tileWidth:{get:function(){return this._tileWidth}},tileHeight:{get:function(){return this._tileHeight}},maximumLevel:{get:function(){return this._maximumLevel}},minimumLevel:{get:function(){return 0}},tilingScheme:{get:function(){return this._tilingScheme}},version:{get:function(){return this._version}},requestType:{get:function(){return this._requestType}},rectangle:{get:function(){return this._tilingScheme.rectangle}},tileDiscardPolicy:{get:function(){return this._tileDiscardPolicy}},errorEvent:{get:function(){return this._errorEvent}},credit:{get:function(){return this._credit}},hasAlphaChannel:{get:function(){return!0}}});ts.fromUrl=async function(e,t,n){n=n??{};let i=n.path??"/default_map",o=Ye.createIfNeeded(e).getDerivedResource({url:i[0]==="/"?i.substring(1):i});o.appendForwardSlash();let r=o.getDerivedResource({url:"query",queryParameters:{request:"Json",vars:"geeServerDefs",is2d:"t"}}),a=new Sz(n);a.channel=t,await nde(r,a);let s=new ts(n);return a.build(s),s._resource=o,s._url=e,s._path=i,s};ts.prototype.getTileCredits=function(e,t,n){};ts.prototype.requestImage=function(e,t,n,i){let o=this._resource.getDerivedResource({url:"query",request:i,queryParameters:{request:this._requestType,channel:this._channel,version:this._version,x:e,y:t,z:n+1}});return sc.loadImage(this,o)};ts.prototype.pickFeatures=function(e,t,n,i,o){};ts._logoUrl=void 0;Object.defineProperties(ts,{logoUrl:{get:function(){return c(ts._logoUrl)||(ts._logoUrl=Ga("Assets/Images/google_earth_credit.png")),ts._logoUrl},set:function(e){ts._logoUrl=e}}});var wz=ts;var ide=/\/$/,Dz=new fn('&copy; <a href="https://www.mapbox.com/about/maps/">Mapbox</a> &copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> <strong><a href="https://www.mapbox.com/map-feedback/">Improve this map</a></strong>');function pm(e){e=e??G.EMPTY_OBJECT;let t=e.mapId,n=e.accessToken;this._defaultAlpha=void 0,this._defaultNightAlpha=void 0,this._defaultDayAlpha=void 0,this._defaultBrightness=void 0,this._defaultContrast=void 0,this._defaultHue=void 0,this._defaultSaturation=void 0,this._defaultGamma=void 0,this._defaultMinificationFilter=void 0,this._defaultMagnificationFilter=void 0;let i=Ye.createIfNeeded(e.url??"https://{s}.tiles.mapbox.com/v4/");this._mapId=t,this._accessToken=n;let o=e.format??"png";/\./.test(o)||(o=`.${o}`),this._format=o;let r=i.getUrlComponent();ide.test(r)||(r+="/"),r+=`${t}/{z}/{x}/{y}${this._format}`,i.url=r,i.setQueryParameters({access_token:n});let a;c(e.credit)?(a=e.credit,typeof a=="string"&&(a=new fn(a))):a=Dz,this._resource=i,this._imageryProvider=new kl({url:i,credit:a,ellipsoid:e.ellipsoid,minimumLevel:e.minimumLevel,maximumLevel:e.maximumLevel,rectangle:e.rectangle})}Object.defineProperties(pm.prototype,{url:{get:function(){return this._imageryProvider.url}},rectangle:{get:function(){return this._imageryProvider.rectangle}},tileWidth:{get:function(){return this._imageryProvider.tileWidth}},tileHeight:{get:function(){return this._imageryProvider.tileHeight}},maximumLevel:{get:function(){return this._imageryProvider.maximumLevel}},minimumLevel:{get:function(){return this._imageryProvider.minimumLevel}},tilingScheme:{get:function(){return this._imageryProvider.tilingScheme}},tileDiscardPolicy:{get:function(){return this._imageryProvider.tileDiscardPolicy}},errorEvent:{get:function(){return this._imageryProvider.errorEvent}},credit:{get:function(){return this._imageryProvider.credit}},proxy:{get:function(){return this._imageryProvider.proxy}},hasAlphaChannel:{get:function(){return this._imageryProvider.hasAlphaChannel}}});pm.prototype.getTileCredits=function(e,t,n){};pm.prototype.requestImage=function(e,t,n,i){return this._imageryProvider.requestImage(e,t,n,i)};pm.prototype.pickFeatures=function(e,t,n,i,o){return this._imageryProvider.pickFeatures(e,t,n,i,o)};pm._defaultCredit=Dz;var Qz=pm;function xd(e){e=e??G.EMPTY_OBJECT,this._defaultAlpha=void 0,this._defaultNightAlpha=void 0,this._defaultDayAlpha=void 0,this._defaultBrightness=void 0,this._defaultContrast=void 0,this._defaultHue=void 0,this._defaultSaturation=void 0,this._defaultGamma=void 0,this._defaultMinificationFilter=void 0,this._defaultMagnificationFilter=void 0;let t=e.rectangle??de.MAX_VALUE,n=new Ja({rectangle:t,numberOfLevelZeroTilesX:1,numberOfLevelZeroTilesY:1,ellipsoid:e.ellipsoid});this._tilingScheme=n,this._image=void 0,this._texture=void 0,this._hasError=!1,this._errorEvent=new Le;let i=e.credit;typeof i=="string"&&(i=new fn(i)),this._credit=i;let o=Ye.createIfNeeded(e.url);this._resource=o,this._tileWidth=e.tileWidth,this._tileHeight=e.tileHeight}Object.defineProperties(xd.prototype,{url:{get:function(){return this._resource.url}},proxy:{get:function(){return this._resource.proxy}},tileWidth:{get:function(){return this._tileWidth}},tileHeight:{get:function(){return this._tileHeight}},maximumLevel:{get:function(){return 0}},minimumLevel:{get:function(){return 0}},tilingScheme:{get:function(){return this._tilingScheme}},rectangle:{get:function(){return this._tilingScheme.rectangle}},tileDiscardPolicy:{get:function(){}},errorEvent:{get:function(){return this._errorEvent}},credit:{get:function(){return this._credit}},hasAlphaChannel:{get:function(){return!0}}});function ode(e,t,n,i){let o=`Failed to load image ${e.url}`;c(t)&&c(t.message)&&(o+=`: ${t.message}`);let r=Sa.reportError(i,n,c(n)?n._errorEvent:void 0,o,0,0,0,t);if(r.retry)return WT(e,n,r);throw c(n)&&(n._hasError=!0),new ae(o)}async function WT(e,t,n){try{return await sc.loadImage(null,e)}catch(i){return ode(e,i,t,n)}}xd.fromUrl=async function(e,t){let n=Ye.createIfNeeded(e),i=await WT(n);t=t??G.EMPTY_OBJECT;let o=new xd({...t,url:e,tileWidth:i.width,tileHeight:i.height});return o._image=i,o};xd.prototype.getTileCredits=function(e,t,n){};xd.prototype.requestImage=async function(e,t,n,i){if(!this._hasError&&!c(this._image)){let o=await WT(this._resource,this);return this._image=o,Sa.reportSuccess(this._errorEvent),o}return this._image};xd.prototype.pickFeatures=function(e,t,n,i,o){};var Rz=xd;function rde(e,t,n){this.type=e,c(t)||(e==="json"?t="application/json":e==="xml"?t="text/xml":e==="html"?t="text/html":e==="text"&&(t="text/plain")),this.format=t,c(n)||(e==="json"?n=ade:e==="xml"?n=lde:(e==="html"||e==="text")&&(n=vz)),this.callback=n}function ade(e){let t=[],n=e.features;for(let i=0;i<n.length;++i){let o=n[i],r=new df;if(r.data=o,r.properties=o.properties,r.configureNameFromProperties(o.properties),r.configureDescriptionFromProperties(o.properties),c(o.geometry)&&o.geometry.type==="Point"){let a=o.geometry.coordinates[0],s=o.geometry.coordinates[1];r.position=ue.fromDegrees(a,s)}t.push(r)}return t}var qT="http://www.mapinfo.com/mxp",sde="http://www.esri.com/wms",cde="http://www.opengis.net/wfs",Ade="http://www.opengis.net/gml";function lde(e){let t=e.documentElement;if(t.localName==="MultiFeatureCollection"&&t.namespaceURI===qT)return ude(e);if(t.localName==="FeatureInfoResponse"&&t.namespaceURI===sde)return fde(e);if(t.localName==="FeatureCollection"&&t.namespaceURI===cde)return dde(e);if(t.localName==="ServiceExceptionReport")throw new ae(new XMLSerializer().serializeToString(t));return t.localName==="msGMLOutput"?hde(e):mde(e)}function ude(e){let t=[],i=e.documentElement.getElementsByTagNameNS(qT,"Feature");for(let o=0;o<i.length;++o){let r=i[o],a={},s=r.getElementsByTagNameNS(qT,"Val");for(let l=0;l<s.length;++l){let d=s[l];if(d.hasAttribute("ref")){let m=d.getAttribute("ref"),p=d.textContent.trim();a[m]=p}}let A=new df;A.data=r,A.properties=a,A.configureNameFromProperties(a),A.configureDescriptionFromProperties(a),t.push(A)}return t}function fde(e){let t=e.documentElement,n=[],i,o=t.getElementsByTagNameNS("*","FIELDS");if(o.length>0)for(let r=0;r<o.length;++r){let a=o[r];i={};let s=a.attributes;for(let A=0;A<s.length;++A){let l=s[A];i[l.name]=l.value}n.push(ey(a,i))}else{let r=t.getElementsByTagNameNS("*","FeatureInfo");for(let a=0;a<r.length;++a){let s=r[a];i={};let A=s.childNodes;for(let l=0;l<A.length;++l){let d=A[l];d.nodeType===Node.ELEMENT_NODE&&(i[d.localName]=d.textContent)}n.push(ey(s,i))}}return n}function dde(e){let t=[],i=e.documentElement.getElementsByTagNameNS(Ade,"featureMember");for(let o=0;o<i.length;++o){let r=i[o],a={};JT(r,a),t.push(ey(r,a))}return t}function hde(e){let t=[],n,i=e.documentElement.childNodes;for(let r=0;r<i.length;r++)if(i[r].nodeType===Node.ELEMENT_NODE){n=i[r];break}if(!c(n))throw new ae("Unable to find first child of the feature info xml document");let o=n.childNodes;for(let r=0;r<o.length;++r){let a=o[r];if(a.nodeType===Node.ELEMENT_NODE){let s={};JT(a,s),t.push(ey(a,s))}}return t}function JT(e,t){let n=!0;for(let i=0;i<e.childNodes.length;++i){let o=e.childNodes[i];o.nodeType===Node.ELEMENT_NODE&&(n=!1),!(o.localName==="Point"||o.localName==="LineString"||o.localName==="Polygon"||o.localName==="boundedBy")&&o.hasChildNodes()&&JT(o,t)&&(t[o.localName]=o.textContent)}return n}function ey(e,t){let n=new df;return n.data=e,n.properties=t,n.configureNameFromProperties(t),n.configureDescriptionFromProperties(t),n}function mde(e){let t=new XMLSerializer().serializeToString(e),n=document.createElement("div"),i=document.createElement("pre");i.textContent=t,n.appendChild(i);let o=new df;return o.data=e,o.description=n.innerHTML,[o]}var pde=/<body>\s*<\/body>/im,gde=/<ServiceExceptionReport([\s\S]*)<\/ServiceExceptionReport>/im,Cde=/<title>([\s\S]*)<\/title>/im;function vz(e){if(pde.test(e)||gde.test(e))return;let t,n=Cde.exec(e);n&&n.length>1&&(t=n[1]);let i=new df;return i.name=t,i.description=e,i.data=e,[i]}var ty=rde;function oC(e){e=e??G.EMPTY_OBJECT,this._tileCache={},this._tilesRequestedForInterval=[];let t=this._clock=e.clock;this._times=e.times,this._requestImageFunction=e.requestImageFunction,this._reloadFunction=e.reloadFunction,this._currentIntervalIndex=-1,t.onTick.addEventListener(this._clockOnTick,this),this._clockOnTick(t)}Object.defineProperties(oC.prototype,{clock:{get:function(){return this._clock},set:function(e){this._clock!==e&&(this._clock=e,this._clockOnTick(e),this._reloadFunction())}},times:{get:function(){return this._times},set:function(e){this._times!==e&&(this._times=e,this._clockOnTick(this._clock),this._reloadFunction())}},currentInterval:{get:function(){return this._times.get(this._currentIntervalIndex)}}});oC.prototype.getFromCache=function(e,t,n,i){let o=Mz(e,t,n),r,a=this._tileCache[this._currentIntervalIndex];if(c(a)&&c(a[o])){let s=a[o];r=s.promise.catch(function(A){throw i.state=s.request.state,A}),delete a[o]}return r};oC.prototype.checkApproachingInterval=function(e,t,n,i){let o=Mz(e,t,n),r=this._tilesRequestedForInterval,a=Pz(this),s={key:o,priorityFunction:i.priorityFunction};(!c(a)||!Nz(this,s,a))&&r.push(s),r.length>=512&&r.splice(0,256)};oC.prototype._clockOnTick=function(e){let t=e.currentTime,i=this._times.indexOf(t),o=this._currentIntervalIndex;if(i!==o){let a=this._tileCache[o];for(let s in a)a.hasOwnProperty(s)&&a[s].request.cancel();delete this._tileCache[o],this._tilesRequestedForInterval=[],this._currentIntervalIndex=i,this._reloadFunction();return}let r=Pz(this);if(c(r)){let a=this._tilesRequestedForInterval,s=!0;for(;s&&a.length!==0;){let A=a.pop();s=Nz(this,A,r),s||a.push(A)}}};function Mz(e,t,n){return`${e}-${t}-${n}`}function Ede(e){let t=e.split("-");if(t.length===3)return{x:Number(t[0]),y:Number(t[1]),level:Number(t[2])}}function Pz(e){let t=e._times;if(!c(t))return;let n=e._clock,i=n.currentTime,o=n.canAnimate&&n.shouldAnimate,r=n.multiplier;if(!o&&r!==0)return;let a,s=t.indexOf(i);if(s<0)return;let A=t.get(s);return r>0?(a=Ue.secondsDifference(A.stop,i),++s):(a=Ue.secondsDifference(A.start,i),--s),a/=r,s>=0&&a<=5?t.get(s):void 0}function Nz(e,t,n){let i=e._times.indexOf(n.start),o=e._tileCache,r=o[i];c(r)||(r=o[i]={});let a=t.key;if(c(r[a]))return!0;let s=Ede(a),A=new Gs({throttle:!1,throttleByServer:!0,type:zs.IMAGERY,priorityFunction:t.priorityFunction}),l=e._requestImageFunction(s.x,s.y,s.level,A,n);return c(l)?(r[a]={promise:l,request:A},!0):!1}var ny=oC;var _de=[3034,3035,3042,3043,3044],Ide=[4471,4559];function qc(e){if(e=e??G.EMPTY_OBJECT,c(e.times)&&!c(e.clock))throw new be("options.times was specified, so options.clock is required.");this._defaultAlpha=void 0,this._defaultNightAlpha=void 0,this._defaultDayAlpha=void 0,this._defaultBrightness=void 0,this._defaultContrast=void 0,this._defaultHue=void 0,this._defaultSaturation=void 0,this._defaultGamma=void 0,this._defaultMinificationFilter=void 0,this._defaultMagnificationFilter=void 0,this._getFeatureInfoUrl=e.getFeatureInfoUrl??e.url;let t=Ye.createIfNeeded(e.url),n=Ye.createIfNeeded(this._getFeatureInfoUrl);t.setQueryParameters(qc.DefaultParameters,!0),n.setQueryParameters(qc.GetFeatureInfoDefaultParameters,!0),c(e.parameters)&&t.setQueryParameters(Lz(e.parameters)),c(e.getFeatureInfoParameters)&&n.setQueryParameters(Lz(e.getFeatureInfoParameters));let i=this;this._reload=void 0,c(e.times)&&(this._timeDynamicImagery=new ny({clock:e.clock,times:e.times,requestImageFunction:function(a,s,A,l,d){return Fz(i,a,s,A,l,d)},reloadFunction:function(){c(i._reload)&&i._reload()}}));let o={};if(o.layers=e.layers,o.bbox="{westProjected},{southProjected},{eastProjected},{northProjected}",o.width="{width}",o.height="{height}",parseFloat(t.queryParameters.version)>=1.3){o.crs=e.crs??(e.tilingScheme&&e.tilingScheme.projection instanceof jn?"EPSG:3857":"CRS:84");let a=o.crs.split(":");if(a[0]==="EPSG"&&a.length===2){let s=Number(a[1]);(s>=4e3&&s<5e3&&!Ide.includes(s)||_de.includes(s))&&(o.bbox="{southProjected},{westProjected},{northProjected},{eastProjected}")}}else o.srs=e.srs??(e.tilingScheme&&e.tilingScheme.projection instanceof jn?"EPSG:3857":"EPSG:4326");t.setQueryParameters(o,!0),n.setQueryParameters(o,!0);let r={query_layers:e.layers,info_format:"{format}"};parseFloat(n.queryParameters.version)>=1.3?(r.i="{i}",r.j="{j}"):(r.x="{i}",r.y="{j}"),n.setQueryParameters(r,!0),this._resource=t,this._pickFeaturesResource=n,this._layers=e.layers,this._tileProvider=new kl({url:t,pickFeaturesUrl:n,tilingScheme:e.tilingScheme??new Ja({ellipsoid:e.ellipsoid}),rectangle:e.rectangle,tileWidth:e.tileWidth,tileHeight:e.tileHeight,minimumLevel:e.minimumLevel,maximumLevel:e.maximumLevel,subdomains:e.subdomains,tileDiscardPolicy:e.tileDiscardPolicy,credit:e.credit,getFeatureInfoFormats:e.getFeatureInfoFormats??qc.DefaultGetFeatureInfoFormats,enablePickFeatures:e.enablePickFeatures})}function Fz(e,t,n,i,o,r){let a=c(r)?r.data:void 0,s=e._tileProvider;return c(a)&&s._resource.setQueryParameters(a),s.requestImage(t,n,i,o)}function yde(e,t,n,i,o,r,a){let s=c(a)?a.data:void 0,A=e._tileProvider;return c(s)&&A._pickFeaturesResource.setQueryParameters(s),A.pickFeatures(t,n,i,o,r)}Object.defineProperties(qc.prototype,{url:{get:function(){return this._resource._url}},proxy:{get:function(){return this._resource.proxy}},layers:{get:function(){return this._layers}},tileWidth:{get:function(){return this._tileProvider.tileWidth}},tileHeight:{get:function(){return this._tileProvider.tileHeight}},maximumLevel:{get:function(){return this._tileProvider.maximumLevel}},minimumLevel:{get:function(){return this._tileProvider.minimumLevel}},tilingScheme:{get:function(){return this._tileProvider.tilingScheme}},rectangle:{get:function(){return this._tileProvider.rectangle}},tileDiscardPolicy:{get:function(){return this._tileProvider.tileDiscardPolicy}},errorEvent:{get:function(){return this._tileProvider.errorEvent}},credit:{get:function(){return this._tileProvider.credit}},hasAlphaChannel:{get:function(){return this._tileProvider.hasAlphaChannel}},enablePickFeatures:{get:function(){return this._tileProvider.enablePickFeatures},set:function(e){this._tileProvider.enablePickFeatures=e}},clock:{get:function(){return this._timeDynamicImagery.clock},set:function(e){this._timeDynamicImagery.clock=e}},times:{get:function(){return this._timeDynamicImagery.times},set:function(e){this._timeDynamicImagery.times=e}},getFeatureInfoUrl:{get:function(){return this._getFeatureInfoUrl}}});qc.prototype.getTileCredits=function(e,t,n){return this._tileProvider.getTileCredits(e,t,n)};qc.prototype.requestImage=function(e,t,n,i){let o,r=this._timeDynamicImagery,a;return c(r)&&(a=r.currentInterval,o=r.getFromCache(e,t,n,i)),c(o)||(o=Fz(this,e,t,n,i,a)),c(o)&&c(r)&&r.checkApproachingInterval(e,t,n,i),o};qc.prototype.pickFeatures=function(e,t,n,i,o){let r=this._timeDynamicImagery,a=c(r)?r.currentInterval:void 0;return yde(this,e,t,n,i,o,a)};qc.DefaultParameters=Object.freeze({service:"WMS",version:"1.1.1",request:"GetMap",styles:"",format:"image/jpeg"});qc.GetFeatureInfoDefaultParameters=Object.freeze({service:"WMS",version:"1.1.1",request:"GetFeatureInfo"});qc.DefaultGetFeatureInfoFormats=Object.freeze([Object.freeze(new ty("json","application/json")),Object.freeze(new ty("xml","text/xml")),Object.freeze(new ty("text","text/html"))]);function Lz(e){let t={};for(let n in e)e.hasOwnProperty(n)&&(t[n.toLowerCase()]=e[n]);return t}var Oz=qc;var bde=Object.freeze({service:"WMTS",version:"1.0.0",request:"GetTile"});function rC(e){e=e??G.EMPTY_OBJECT,this._defaultAlpha=void 0,this._defaultNightAlpha=void 0,this._defaultDayAlpha=void 0,this._defaultBrightness=void 0,this._defaultContrast=void 0,this._defaultHue=void 0,this._defaultSaturation=void 0,this._defaultGamma=void 0,this._defaultMinificationFilter=void 0,this._defaultMagnificationFilter=void 0;let t=Ye.createIfNeeded(e.url),n=e.style,i=e.tileMatrixSetID,o=t.url,r=o.match(/{/g);if(!c(r)||r.length===1&&/{s}/.test(o))t.setQueryParameters(bde),this._useKvp=!0;else{let A={style:n,Style:n,TileMatrixSet:i};t.setTemplateValues(A),this._useKvp=!1}this._resource=t,this._layer=e.layer,this._style=n,this._tileMatrixSetID=i,this._tileMatrixLabels=e.tileMatrixLabels,this._format=e.format??"image/jpeg",this._tileDiscardPolicy=e.tileDiscardPolicy,this._tilingScheme=c(e.tilingScheme)?e.tilingScheme:new bs({ellipsoid:e.ellipsoid}),this._tileWidth=e.tileWidth??256,this._tileHeight=e.tileHeight??256,this._minimumLevel=e.minimumLevel??0,this._maximumLevel=e.maximumLevel,this._rectangle=e.rectangle??this._tilingScheme.rectangle,this._dimensions=e.dimensions;let a=this;this._reload=void 0,c(e.times)&&(this._timeDynamicImagery=new ny({clock:e.clock,times:e.times,requestImageFunction:function(A,l,d,m,p){return kz(a,A,l,d,m,p)},reloadFunction:function(){c(a._reload)&&a._reload()}})),this._errorEvent=new Le;let s=e.credit;this._credit=typeof s=="string"?new fn(s):s,this._subdomains=e.subdomains,Array.isArray(this._subdomains)?this._subdomains=this._subdomains.slice():c(this._subdomains)&&this._subdomains.length>0?this._subdomains=this._subdomains.split(""):this._subdomains=["a","b","c"]}function kz(e,t,n,i,o,r){let a=e._tileMatrixLabels,s=c(a)?a[i]:i.toString(),A=e._subdomains,l=e._dimensions,d=c(r)?r.data:void 0,m,p;if(!e._useKvp)p={TileMatrix:s,TileRow:n.toString(),TileCol:t.toString(),s:A[(t+n+i)%A.length]},m=e._resource.getDerivedResource({request:o}),m.setTemplateValues(p),c(l)&&m.setTemplateValues(l),c(d)&&m.setTemplateValues(d);else{let g={};g.tilematrix=s,g.layer=e._layer,g.style=e._style,g.tilerow=n,g.tilecol=t,g.tilematrixset=e._tileMatrixSetID,g.format=e._format,c(l)&&(g=dt(g,l)),c(d)&&(g=dt(g,d)),p={s:A[(t+n+i)%A.length]},m=e._resource.getDerivedResource({queryParameters:g,request:o}),m.setTemplateValues(p)}return sc.loadImage(e,m)}Object.defineProperties(rC.prototype,{url:{get:function(){return this._resource.url}},proxy:{get:function(){return this._resource.proxy}},tileWidth:{get:function(){return this._tileWidth}},tileHeight:{get:function(){return this._tileHeight}},maximumLevel:{get:function(){return this._maximumLevel}},minimumLevel:{get:function(){return this._minimumLevel}},tilingScheme:{get:function(){return this._tilingScheme}},rectangle:{get:function(){return this._rectangle}},tileDiscardPolicy:{get:function(){return this._tileDiscardPolicy}},errorEvent:{get:function(){return this._errorEvent}},format:{get:function(){return this._format}},credit:{get:function(){return this._credit}},hasAlphaChannel:{get:function(){return!0}},clock:{get:function(){return this._timeDynamicImagery.clock},set:function(e){this._timeDynamicImagery.clock=e}},times:{get:function(){return this._timeDynamicImagery.times},set:function(e){this._timeDynamicImagery.times=e}},dimensions:{get:function(){return this._dimensions},set:function(e){this._dimensions!==e&&(this._dimensions=e,c(this._reload)&&this._reload())}}});rC.prototype.getTileCredits=function(e,t,n){};rC.prototype.requestImage=function(e,t,n,i){let o,r=this._timeDynamicImagery,a;return c(r)&&(a=r.currentInterval,o=r.getFromCache(e,t,n,i)),c(o)||(o=kz(this,e,t,n,i,a)),c(o)&&c(r)&&r.checkApproachingInterval(e,t,n,i),o};rC.prototype.pickFeatures=function(e,t,n,i,o){};var Uz=rC;var Bde={ARCGIS_MAPSERVER:Ez.fromUrl,BING:async(e,t)=>yz.fromUrl(e,t),GOOGLE_EARTH:async(e,t)=>{let n=t.channel;return delete t.channel,wz.fromUrl(e,n,t)},MAPBOX:(e,t)=>new Qz({url:e,...t}),SINGLE_TILE:Rz.fromUrl,TMS:YT.fromUrl,URL_TEMPLATE:(e,t)=>new kl({url:e,...t}),WMS:(e,t)=>new Oz({url:e,...t}),WMTS:(e,t)=>new Uz({url:e,...t})};function PA(e){e=e??G.EMPTY_OBJECT,this._defaultAlpha=void 0,this._defaultNightAlpha=void 0,this._defaultDayAlpha=void 0,this._defaultBrightness=void 0,this._defaultContrast=void 0,this._defaultHue=void 0,this._defaultSaturation=void 0,this._defaultGamma=void 0,this._defaultMinificationFilter=void 0,this._defaultMagnificationFilter=void 0,this._tileCredits=void 0,this._errorEvent=new Le}Object.defineProperties(PA.prototype,{rectangle:{get:function(){return this._imageryProvider.rectangle}},tileWidth:{get:function(){return this._imageryProvider.tileWidth}},tileHeight:{get:function(){return this._imageryProvider.tileHeight}},maximumLevel:{get:function(){return this._imageryProvider.maximumLevel}},minimumLevel:{get:function(){return this._imageryProvider.minimumLevel}},tilingScheme:{get:function(){return this._imageryProvider.tilingScheme}},tileDiscardPolicy:{get:function(){return this._imageryProvider.tileDiscardPolicy}},errorEvent:{get:function(){return this._errorEvent}},credit:{get:function(){return this._imageryProvider.credit}},hasAlphaChannel:{get:function(){return this._imageryProvider.hasAlphaChannel}},proxy:{get:function(){}}});PA.fromAssetId=async function(e,t){t=t??G.EMPTY_OBJECT;let n=vh._createEndpointResource(e,t),i=e.toString()+t.accessToken+t.server,o=PA._endpointCache[i];c(o)||(o=n.fetchJson(),PA._endpointCache[i]=o);let r=await o;if(r.type!=="IMAGERY")throw new ae(`Cesium ion asset ${e} is not an imagery asset.`);let a,s=r.externalType;if(!c(s))a=await YT.fromUrl(new vh(r,n));else{let l=Bde[s];if(!c(l))throw new ae(`Unrecognized Cesium ion imagery type: ${s}`);let d={...r.options},m=d.url;delete d.url,a=await l(m,d)}let A=new PA(t);return a.errorEvent.addEventListener(function(l){l.provider=A,A._errorEvent.raiseEvent(l)}),A._tileCredits=vh.getCreditsFromEndpoint(r,n),A._imageryProvider=a,A};PA.prototype.getTileCredits=function(e,t,n){let i=this._imageryProvider.getTileCredits(e,t,n);return c(i)?this._tileCredits.concat(i):this._tileCredits};PA.prototype.requestImage=function(e,t,n,i){return this._imageryProvider.requestImage(e,t,n,i)};PA.prototype.pickFeatures=function(e,t,n,i,o){return this._imageryProvider.pickFeatures(e,t,n,i,o)};PA._endpointCache={};var zz=PA;var xde={AERIAL:2,AERIAL_WITH_LABELS:3,ROAD:4},Gz=Object.freeze(xde);function Tde(e){e=e??G.EMPTY_OBJECT;let t=e.style??Gz.AERIAL;return zz.fromAssetId(t)}var Hz=Tde;function wa(){be.throwInstantiationError()}Object.defineProperties(wa.prototype,{errorEvent:{get:be.throwInstantiationError},credit:{get:be.throwInstantiationError},tilingScheme:{get:be.throwInstantiationError},hasWaterMask:{get:be.throwInstantiationError},hasVertexNormals:{get:be.throwInstantiationError},availability:{get:be.throwInstantiationError}});var Vz=[];wa.getRegularGridIndices=function(e,t){let n=Vz[e];c(n)||(Vz[e]=n=[]);let i=n[t];return c(i)||(e*t<S.SIXTY_FOUR_KILOBYTES?i=n[t]=new Uint16Array((e-1)*(t-1)*6):i=n[t]=new Uint32Array((e-1)*(t-1)*6),qz(e,t,i,0)),i};var jz=[];wa.getRegularGridIndicesAndEdgeIndices=function(e,t){let n=jz[e];c(n)||(jz[e]=n=[]);let i=n[t];if(!c(i)){let o=wa.getRegularGridIndices(e,t),r=Wz(e,t),a=r.westIndicesSouthToNorth,s=r.southIndicesEastToWest,A=r.eastIndicesNorthToSouth,l=r.northIndicesWestToEast;i=n[t]={indices:o,westIndicesSouthToNorth:a,southIndicesEastToWest:s,eastIndicesNorthToSouth:A,northIndicesWestToEast:l}}return i};var Yz=[];wa.getRegularGridAndSkirtIndicesAndEdgeIndices=function(e,t){let n=Yz[e];c(n)||(Yz[e]=n=[]);let i=n[t];if(!c(i)){let o=e*t,r=(e-1)*(t-1)*6,a=e*2+t*2,s=Math.max(0,a-4)*6,A=o+a,l=r+s,d=Wz(e,t),m=d.westIndicesSouthToNorth,p=d.southIndicesEastToWest,g=d.eastIndicesNorthToSouth,h=d.northIndicesWestToEast,C=Ge.createTypedArray(A,l);qz(e,t,C,0),wa.addSkirtIndices(m,p,g,h,o,C,r),i=n[t]={indices:C,westIndicesSouthToNorth:m,southIndicesEastToWest:p,eastIndicesNorthToSouth:g,northIndicesWestToEast:h,indexCountWithoutSkirts:r}}return i};wa.addSkirtIndices=function(e,t,n,i,o,r,a){let s=o;a=iy(e,s,r,a),s+=e.length,a=iy(t,s,r,a),s+=t.length,a=iy(n,s,r,a),s+=n.length,iy(i,s,r,a)};function Wz(e,t){let n=new Array(t),i=new Array(e),o=new Array(t),r=new Array(e),a;for(a=0;a<e;++a)r[a]=a,i[a]=e*t-1-a;for(a=0;a<t;++a)o[a]=(a+1)*e-1,n[a]=(t-a-1)*e;return{westIndicesSouthToNorth:n,southIndicesEastToWest:i,eastIndicesNorthToSouth:o,northIndicesWestToEast:r}}function qz(e,t,n,i){let o=0;for(let r=0;r<t-1;++r){for(let a=0;a<e-1;++a){let s=o,A=s+e,l=A+1,d=s+1;n[i++]=s,n[i++]=A,n[i++]=d,n[i++]=d,n[i++]=A,n[i++]=l,++o}++o}}function iy(e,t,n,i){let o=e[0],r=e.length;for(let a=1;a<r;++a){let s=e[a];n[i++]=o,n[i++]=s,n[i++]=t,n[i++]=t,n[i++]=s,n[i++]=t+1,o=s,++t}return i}wa.heightmapTerrainQuality=.25;wa.getEstimatedLevelZeroGeometricErrorForAHeightmap=function(e,t,n){return e.maximumRadius*2*Math.PI*wa.heightmapTerrainQuality/(t*n)};wa.prototype.requestTileGeometry=be.throwInstantiationError;wa.prototype.getLevelMaximumGeometricError=be.throwInstantiationError;wa.prototype.getTileDataAvailable=be.throwInstantiationError;wa.prototype.loadTileDataAvailability=be.throwInstantiationError;var Ul=wa;var Jz=`uniform sampler2D u_texture;

in vec2 v_textureCoordinates;

void main()
{
    out_FragColor = texture(u_texture, v_textureCoordinates);
}
`;var Kz=`in vec4 position;
in float webMercatorT;

uniform vec2 u_textureDimensions;

out vec2 v_textureCoordinates;

void main()
{
    v_textureCoordinates = vec2(position.x, webMercatorT);
    gl_Position = czm_viewportOrthographic * (position * vec4(u_textureDimensions, 1.0, 1.0));
}
`;var Sde={UNLOADED:0,TRANSITIONING:1,RECEIVED:2,TEXTURE_LOADED:3,READY:4,FAILED:5,INVALID:6,PLACEHOLDER:7},Xt=Object.freeze(Sde);function gm(e,t,n,i,o){if(this.imageryLayer=e,this.x=t,this.y=n,this.level=i,this.request=void 0,i!==0){let r=t/2|0,a=n/2|0,s=i-1;this.parent=e.getImageryFromCache(r,a,s)}this.state=Xt.UNLOADED,this.imageUrl=void 0,this.image=void 0,this.texture=void 0,this.textureWebMercator=void 0,this.credits=void 0,this.referenceCount=0,!c(o)&&e.ready&&(o=e.imageryProvider.tilingScheme.tileXYToRectangle(t,n,i)),this.rectangle=o}gm.createPlaceholder=function(e){let t=new gm(e,0,0,0);return t.addReference(),t.state=Xt.PLACEHOLDER,t};gm.prototype.addReference=function(){++this.referenceCount};gm.prototype.releaseReference=function(){return--this.referenceCount,this.referenceCount===0?(this.imageryLayer.removeImageryFromCache(this),c(this.parent)&&this.parent.releaseReference(),c(this.image)&&c(this.image.destroy)&&this.image.destroy(),c(this.texture)&&this.texture.destroy(),c(this.textureWebMercator)&&this.texture!==this.textureWebMercator&&this.textureWebMercator.destroy(),me(this),0):this.referenceCount};gm.prototype.processStateMachine=function(e,t,n){this.state===Xt.UNLOADED&&!n&&(this.state=Xt.TRANSITIONING,this.imageryLayer._requestImagery(this)),this.state===Xt.RECEIVED&&(this.state=Xt.TRANSITIONING,this.imageryLayer._createTexture(e.context,this));let i=this.state===Xt.READY&&t&&!this.texture;(this.state===Xt.TEXTURE_LOADED||i)&&(this.state=Xt.TRANSITIONING,this.imageryLayer._reprojectTexture(e,this,t))};var KT=gm;function XT(e,t,n){this.readyImagery=void 0,this.loadingImagery=e,this.textureCoordinateRectangle=t,this.textureTranslationAndScale=void 0,this.useWebMercatorT=n}XT.prototype.freeResources=function(){c(this.readyImagery)&&this.readyImagery.releaseReference(),c(this.loadingImagery)&&this.loadingImagery.releaseReference()};XT.prototype.processStateMachine=function(e,t,n){let i=this.loadingImagery,o=i.imageryLayer;if(i.processStateMachine(t,!this.useWebMercatorT,n),i.state===Xt.READY)return c(this.readyImagery)&&this.readyImagery.releaseReference(),this.readyImagery=this.loadingImagery,this.loadingImagery=void 0,this.textureTranslationAndScale=o._calculateTextureTranslationAndScale(e,this),!0;let r=i.parent,a;for(;c(r)&&(r.state!==Xt.READY||!this.useWebMercatorT&&!c(r.texture));)r.state!==Xt.FAILED&&r.state!==Xt.INVALID&&(a=a||r),r=r.parent;return this.readyImagery!==r&&(c(this.readyImagery)&&this.readyImagery.releaseReference(),this.readyImagery=r,c(r)&&(r.addReference(),this.textureTranslationAndScale=o._calculateTextureTranslationAndScale(e,this))),i.state===Xt.FAILED||i.state===Xt.INVALID?c(a)?(a.processStateMachine(t,!this.useWebMercatorT,n),!1):!0:!1};var ZT=XT;function En(e,t){this._imageryProvider=e,this._readyEvent=new Le,this._errorEvent=new Le,t=t??G.EMPTY_OBJECT,e=e??G.EMPTY_OBJECT,this.alpha=t.alpha??e._defaultAlpha??1,this.nightAlpha=t.nightAlpha??e._defaultNightAlpha??1,this.dayAlpha=t.dayAlpha??e._defaultDayAlpha??1,this.brightness=t.brightness??e._defaultBrightness??En.DEFAULT_BRIGHTNESS,this.contrast=t.contrast??e._defaultContrast??En.DEFAULT_CONTRAST,this.hue=t.hue??e._defaultHue??En.DEFAULT_HUE,this.saturation=t.saturation??e._defaultSaturation??En.DEFAULT_SATURATION,this.gamma=t.gamma??e._defaultGamma??En.DEFAULT_GAMMA,this.splitDirection=t.splitDirection??En.DEFAULT_SPLIT,this.minificationFilter=t.minificationFilter??e._defaultMinificationFilter??En.DEFAULT_MINIFICATION_FILTER,this.magnificationFilter=t.magnificationFilter??e._defaultMagnificationFilter??En.DEFAULT_MAGNIFICATION_FILTER,this.show=t.show??!0,this._minimumTerrainLevel=t.minimumTerrainLevel,this._maximumTerrainLevel=t.maximumTerrainLevel,this._rectangle=t.rectangle??de.MAX_VALUE,this._maximumAnisotropy=t.maximumAnisotropy,this._imageryCache={},this._skeletonPlaceholder=new ZT(KT.createPlaceholder(this)),this._show=!0,this._layerIndex=-1,this._isBaseLayer=!1,this._requestImageError=void 0,this._reprojectComputeCommands=[],this.cutoutRectangle=t.cutoutRectangle,this.colorToAlpha=t.colorToAlpha,this.colorToAlphaThreshold=t.colorToAlphaThreshold??En.DEFAULT_APPLY_COLOR_TO_ALPHA_THRESHOLD}Object.defineProperties(En.prototype,{imageryProvider:{get:function(){return this._imageryProvider}},ready:{get:function(){return c(this._imageryProvider)}},errorEvent:{get:function(){return this._errorEvent}},readyEvent:{get:function(){return this._readyEvent}},rectangle:{get:function(){return this._rectangle}}});En.DEFAULT_BRIGHTNESS=1;En.DEFAULT_CONTRAST=1;En.DEFAULT_HUE=0;En.DEFAULT_SATURATION=1;En.DEFAULT_GAMMA=1;En.DEFAULT_SPLIT=qa.NONE;En.DEFAULT_MINIFICATION_FILTER=Wt.LINEAR;En.DEFAULT_MAGNIFICATION_FILTER=yo.LINEAR;En.DEFAULT_APPLY_COLOR_TO_ALPHA_THRESHOLD=.004;En.fromProviderAsync=function(e,t){let n=new En(void 0,t);return vde(n,Promise.resolve(e)),n};En.fromWorldImagery=function(e){return e=e??G.EMPTY_OBJECT,En.fromProviderAsync(Hz({style:e.style}),e)};En.prototype.isBaseLayer=function(){return this._isBaseLayer};En.prototype.isDestroyed=function(){return!1};En.prototype.destroy=function(){return me(this)};var $z=new de,Xz=new de,$T=new de,eG=new de;En.prototype.getImageryRectangle=function(){let e=this._imageryProvider,t=this._rectangle;return de.intersection(e.rectangle,t)};En.prototype._createTileImagerySkeletons=function(e,t,n){let i=e.data;if(!c(t)||c(this._minimumTerrainLevel)&&e.level<this._minimumTerrainLevel||c(this._maximumTerrainLevel)&&e.level>this._maximumTerrainLevel)return!1;c(n)||(n=i.imagery.length);let o=this._imageryProvider;if(!this.ready)return this._skeletonPlaceholder.loadingImagery.addReference(),i.imagery.splice(n,0,this._skeletonPlaceholder),!0;let r=o.tilingScheme.projection instanceof jn&&e.rectangle.north<jn.MaximumLatitude&&e.rectangle.south>-jn.MaximumLatitude,a=de.intersection(o.rectangle,this._rectangle,$z),s=de.intersection(e.rectangle,a,Xz);if(!c(s)){if(!this.isBaseLayer())return!1;let y=a,B=e.rectangle;s=Xz,B.south>=y.north?s.north=s.south=y.north:B.north<=y.south?s.north=s.south=y.south:(s.south=Math.max(B.south,y.south),s.north=Math.min(B.north,y.north)),B.west>=y.east?s.west=s.east=y.east:B.east<=y.west?s.west=s.east=y.west:(s.west=Math.max(B.west,y.west),s.east=Math.min(B.east,y.east))}let A=0;s.south>0?A=s.south:s.north<0&&(A=s.north);let d=1*t.getLevelMaximumGeometricError(e.level),m=Qde(this,d,A);m=Math.max(0,m);let p=o.maximumLevel;if(m>p&&(m=p),c(o.minimumLevel)){let y=o.minimumLevel;m<y&&(m=y)}let g=o.tilingScheme,h=g.positionToTileXY(de.northwest(s),m),C=g.positionToTileXY(de.southeast(s),m),_=e.rectangle.width/512,I=e.rectangle.height/512,b=g.tileXYToRectangle(h.x,h.y,m);Math.abs(b.south-e.rectangle.north)<I&&h.y<C.y&&++h.y,Math.abs(b.east-e.rectangle.west)<_&&h.x<C.x&&++h.x;let x=g.tileXYToRectangle(C.x,C.y,m);Math.abs(x.north-e.rectangle.south)<I&&C.y>h.y&&--C.y,Math.abs(x.west-e.rectangle.east)<_&&C.x>h.x&&--C.x;let T=de.clone(e.rectangle,eG),w=g.tileXYToRectangle(h.x,h.y,m),R=de.intersection(w,a,$T),z;r?(g.rectangleToNativeRectangle(T,T),g.rectangleToNativeRectangle(w,w),g.rectangleToNativeRectangle(R,R),g.rectangleToNativeRectangle(a,a),z=g.tileXYToNativeRectangle.bind(g),_=T.width/512,I=T.height/512):z=g.tileXYToRectangle.bind(g);let M,N=0,O=1,u;!this.isBaseLayer()&&Math.abs(R.west-T.west)>=_&&(N=Math.min(1,(R.west-T.west)/T.width)),!this.isBaseLayer()&&Math.abs(R.north-T.north)>=I&&(O=Math.max(0,(R.north-T.south)/T.height));let E=O;for(let y=h.x;y<=C.x;y++)if(M=N,w=z(y,h.y,m),R=de.simpleIntersection(w,a,$T),!!c(R)){N=Math.min(1,(R.east-T.west)/T.width),y===C.x&&(this.isBaseLayer()||Math.abs(R.east-T.east)<_)&&(N=1),O=E;for(let B=h.y;B<=C.y;B++){if(u=O,w=z(y,B,m),R=de.simpleIntersection(w,a,$T),!c(R))continue;O=Math.max(0,(R.south-T.south)/T.height),B===C.y&&(this.isBaseLayer()||Math.abs(R.south-T.south)<I)&&(O=0);let D=new re(M,O,N,u),v=this.getImageryFromCache(y,B,m);i.imagery.splice(n,0,new ZT(v,D,r)),++n}}return!0};En.prototype._calculateTextureTranslationAndScale=function(e,t){let n=t.readyImagery.rectangle,i=e.rectangle;if(t.useWebMercatorT){let A=t.readyImagery.imageryLayer.imageryProvider.tilingScheme;n=A.rectangleToNativeRectangle(n,$z),i=A.rectangleToNativeRectangle(i,eG)}let o=i.width,r=i.height,a=o/n.width,s=r/n.height;return new re(a*(i.west-n.west)/o,s*(i.south-n.south)/r,a,s)};En.prototype._requestImagery=function(e){let t=this._imageryProvider,n=this;function i(a){if(!c(a))return o();e.image=a,e.state=Xt.RECEIVED,e.request=void 0,Sa.reportSuccess(n._requestImageError)}function o(a){if(e.request.state===vn.CANCELLED){e.state=Xt.UNLOADED,e.request=void 0;return}e.state=Xt.FAILED,e.request=void 0;let s=`Failed to obtain image tile X: ${e.x} Y: ${e.y} Level: ${e.level}.`;n._requestImageError=Sa.reportError(n._requestImageError,t,t.errorEvent,s,e.x,e.y,e.level,a),n._requestImageError.retry&&r()}function r(){let a=new Gs({throttle:!1,throttleByServer:!0,type:zs.IMAGERY});e.request=a,e.state=Xt.TRANSITIONING;let s=t.requestImage(e.x,e.y,e.level,a);if(!c(s)){e.state=Xt.UNLOADED,e.request=void 0;return}c(t.getTileCredits)&&(e.credits=t.getTileCredits(e.x,e.y,e.level)),s.then(function(A){i(A)}).catch(function(A){o(A)})}r()};En.prototype._createTextureWebGL=function(e,t){let n=new nn({minificationFilter:this.minificationFilter,magnificationFilter:this.magnificationFilter}),i=t.image;return c(i.internalFormat)?new on({context:e,pixelFormat:i.internalFormat,width:i.width,height:i.height,source:{arrayBufferView:i.bufferView},sampler:n}):new on({context:e,source:i,pixelFormat:this._imageryProvider.hasAlphaChannel?_t.RGBA:_t.RGB,sampler:n})};En.prototype._createTexture=function(e,t){let n=this._imageryProvider,i=t.image;if(c(n.tileDiscardPolicy)){let r=n.tileDiscardPolicy;if(c(r)){if(!r.isReady()){t.state=Xt.RECEIVED;return}if(r.shouldDiscardImage(i)){t.state=Xt.INVALID;return}}}let o=this._createTextureWebGL(e,t);n.tilingScheme.projection instanceof jn?t.textureWebMercator=o:t.texture=o,t.image=void 0,t.state=Xt.TEXTURE_LOADED};function Zz(e,t,n){return`${e}:${t}:${n}`}En.prototype._finalizeReprojectTexture=function(e,t){let n=this.minificationFilter,i=this.magnificationFilter;if(n===Wt.LINEAR&&i===yo.LINEAR&&!_t.isCompressedFormat(t.pixelFormat)&&S.isPowerOfTwo(t.width)&&S.isPowerOfTwo(t.height)){n=Wt.LINEAR_MIPMAP_LINEAR;let r=rn.maximumTextureFilterAnisotropy,a=Math.min(r,this._maximumAnisotropy??r),s=Zz(n,i,a),A=e.cache.imageryLayerMipmapSamplers;c(A)||(A={},e.cache.imageryLayerMipmapSamplers=A);let l=A[s];c(l)||(l=A[s]=new nn({wrapS:ei.CLAMP_TO_EDGE,wrapT:ei.CLAMP_TO_EDGE,minificationFilter:n,magnificationFilter:i,maximumAnisotropy:a})),t.generateMipmap(Yf.NICEST),t.sampler=l}else{let r=Zz(n,i,0),a=e.cache.imageryLayerNonMipmapSamplers;c(a)||(a={},e.cache.imageryLayerNonMipmapSamplers=a);let s=a[r];c(s)||(s=a[r]=new nn({wrapS:ei.CLAMP_TO_EDGE,wrapT:ei.CLAMP_TO_EDGE,minificationFilter:n,magnificationFilter:i})),t.sampler=s}};En.prototype._reprojectTexture=function(e,t,n){let i=t.textureWebMercator||t.texture,o=t.rectangle,r=e.context;if(n=n??!0,n&&!(this._imageryProvider.tilingScheme.projection instanceof Ai)&&o.width/i.width>1e-5){let a=this;t.addReference();let s=new pu({persists:!0,owner:this,preExecute:function(A){Dde(A,r,i,t.rectangle)},postExecute:function(A){t.texture=A,a._finalizeReprojectTexture(r,A),t.state=Xt.READY,t.releaseReference()},canceled:function(){t.state=Xt.TEXTURE_LOADED,t.releaseReference()}});this._reprojectComputeCommands.push(s)}else n&&(t.texture=i),this._finalizeReprojectTexture(r,i),t.state=Xt.READY};En.prototype.queueReprojectionCommands=function(e){let t=this._reprojectComputeCommands,n=t.length;for(let i=0;i<n;++i)e.commandList.push(t[i]);t.length=0};En.prototype.cancelReprojections=function(){this._reprojectComputeCommands.forEach(function(e){c(e.canceled)&&e.canceled()}),this._reprojectComputeCommands.length=0};En.prototype.getImageryFromCache=function(e,t,n,i){let o=tG(e,t,n),r=this._imageryCache[o];return c(r)||(r=new KT(this,e,t,n,i),this._imageryCache[o]=r),r.addReference(),r};En.prototype.removeImageryFromCache=function(e){let t=tG(e.x,e.y,e.level);delete this._imageryCache[t]};function tG(e,t,n){return JSON.stringify([e,t,n])}var oy={u_textureDimensions:function(){return this.textureDimensions},u_texture:function(){return this.texture},textureDimensions:new L,texture:void 0},wde=Ut.supportsTypedArrays()?new Float32Array(128):void 0;function Dde(e,t,n,i){let o=t.cache.imageryLayer_reproject;if(!c(o)){o=t.cache.imageryLayer_reproject={vertexArray:void 0,shaderProgram:void 0,sampler:void 0,destroy:function(){c(this.framebuffer)&&this.framebuffer.destroy(),c(this.vertexArray)&&this.vertexArray.destroy(),c(this.shaderProgram)&&this.shaderProgram.destroy()}};let _=new Float32Array(256),I=0;for(let R=0;R<64;++R){let z=R/63;_[I++]=0,_[I++]=z,_[I++]=1,_[I++]=z}let b={position:0,webMercatorT:1},x=Ul.getRegularGridIndices(2,64),T=ut.createIndexBuffer({context:t,typedArray:x,usage:De.STATIC_DRAW,indexDatatype:Ge.UNSIGNED_SHORT});o.vertexArray=new Yi({context:t,attributes:[{index:b.position,vertexBuffer:ut.createVertexBuffer({context:t,typedArray:_,usage:De.STATIC_DRAW}),componentsPerAttribute:2},{index:b.webMercatorT,vertexBuffer:ut.createVertexBuffer({context:t,sizeInBytes:512,usage:De.STREAM_DRAW}),componentsPerAttribute:1}],indexBuffer:T});let w=new It({sources:[Kz]});o.shaderProgram=gn.fromCache({context:t,vertexShaderSource:w,fragmentShaderSource:Jz,attributeLocations:b}),o.sampler=new nn({wrapS:ei.CLAMP_TO_EDGE,wrapT:ei.CLAMP_TO_EDGE,minificationFilter:Wt.LINEAR,magnificationFilter:yo.LINEAR})}n.sampler=o.sampler;let r=n.width,a=n.height;oy.textureDimensions.x=r,oy.textureDimensions.y=a,oy.texture=n;let s=Math.sin(i.south),A=.5*Math.log((1+s)/(1-s));s=Math.sin(i.north);let d=1/(.5*Math.log((1+s)/(1-s))-A),m=new on({context:t,width:r,height:a,pixelFormat:n.pixelFormat,pixelDatatype:n.pixelDatatype,preMultiplyAlpha:n.preMultiplyAlpha});S.isPowerOfTwo(r)&&S.isPowerOfTwo(a)&&m.generateMipmap(Yf.NICEST);let p=i.south,g=i.north,h=wde,C=0;for(let _=0;_<64;++_){let I=_/63,b=S.lerp(p,g,I);s=Math.sin(b);let T=(.5*Math.log((1+s)/(1-s))-A)*d;h[C++]=T,h[C++]=T}o.vertexArray.getAttribute(1).vertexBuffer.copyFromArrayView(h),e.shaderProgram=o.shaderProgram,e.outputTexture=m,e.uniformMap=oy,e.vertexArray=o.vertexArray}function Qde(e,t,n){let i=e._imageryProvider,o=i.tilingScheme,r=o.ellipsoid,a=e._imageryProvider.tilingScheme.projection instanceof Ai?1:Math.cos(n),s=o.rectangle,l=r.maximumRadius*s.width*a/(i.tileWidth*o.getNumberOfXTilesAtLevel(0))/t,d=Math.log(l)/Math.log(2);return Math.round(d)|0}function Rde(e,t){e.numberOfListeners>0?e.raiseEvent(t):console.error(t)}async function vde(e,t){let n;try{if(n=await Promise.resolve(t),e.isDestroyed())return;e._imageryProvider=n,e._readyEvent.raiseEvent(n)}catch(i){Rde(e._errorEvent,i)}}var ns=En;var eS=class{constructor(){this.alpha=!1,this.brightness=!1,this.contrast=!1,this.hue=!1,this.saturation=!1,this.gamma=!1,this.colorToAlpha=!1}},nG=eS;var tS=class{constructor(t,n,i,o){this._minX=t??0,this._minY=n??0,this._maxX=i??0,this._maxY=o??0}get minX(){return this._minX}set minX(t){this._minX=t}get minY(){return this._minY}set minY(t){this._minY=t}get maxX(){return this._maxX}set maxX(t){this._maxX=t}get maxY(){return this._maxY}set maxY(t){this._maxY=t}contains(t,n){return t>=this.minX&&t<this.maxX&&n>=this.minY&&n<this.maxY}containsExclusive(t,n){return t>this.minX&&t<this.maxX&&n>this.minY&&n<this.maxY}containsInclusive(t,n){return t>=this.minX&&t<=this.maxX&&n>=this.minY&&n<=this.maxY}},nS=tS;var Mde=new de,iG=new de,Pde=new de,Nde=new de,Lde=new de,Fde=new de,iS=class e{constructor(t,n,i,o,r){this._x=t,this._y=n,this._level=i,this._textureCoordinateRectangle=o,this._imagery=r}get x(){return this._x}get y(){return this._y}get level(){return this._level}get textureCoordinateRectangle(){return this._textureCoordinateRectangle}get imagery(){return this._imagery}static createImageryCoverages(t,n,i){if(!n.show)return[];let o=n.imageryProvider,r=e._clampImageryLevel(o,i),a=de.intersection(o.rectangle,n.rectangle,Mde),s=o.tilingScheme,A=e._computeImageryRange(t,a,s,r),l=Nde;s.rectangleToNativeRectangle(t,l);let d=Lde;s.rectangleToNativeRectangle(a,d);let m=(g,h,C)=>{let _=s.tileXYToRectangle(g,h,C),I=de.intersection(_,a,Pde);if(!c(I))return;let b=Fde;return s.rectangleToNativeRectangle(I,b),b};return e._computeImageryCoverages(n,A,r,l,m)}static _clampImageryLevel(t,n){let i=t.minimumLevel??0,o=t.maximumLevel??Number.POSITIVE_INFINITY,r=Math.min(o-1,Math.max(i,n));return Math.floor(r)}static _computeImageryRange(t,n,i,o){let r=e._computeOverlappedRectangle(t,n),a=i.positionToTileXY(de.northwest(r),o),s=i.positionToTileXY(de.southeast(r),o),A=new nS;A.minX=a.x,A.minY=a.y,A.maxX=s.x,A.maxY=s.y;let l=t.width/512,d=t.height/512,m=i.tileXYToRectangle(A.minX,A.minY,o);Math.abs(m.south-t.north)<d&&A.minY<A.maxY&&++A.minY,Math.abs(m.east-t.west)<l&&A.minX<A.maxX&&++A.minX;let h=i.tileXYToRectangle(A.maxX,A.maxY,o);return Math.abs(h.north-t.south)<d&&A.maxY>A.minY&&--A.maxY,Math.abs(h.west-t.east)<l&&A.maxX>A.minX&&--A.maxX,A}static _clampRectangle(t,n,i){return c(i)||(i=new de),t.south>=n.north?i.north=i.south=n.north:t.north<=n.south?i.north=i.south=n.south:(i.south=Math.max(t.south,n.south),i.north=Math.min(t.north,n.north)),t.west>=n.east?i.west=i.east=n.east:t.east<=n.west?i.west=i.east=n.west:(i.west=Math.max(t.west,n.west),i.east=Math.min(t.east,n.east)),i}static _computeOverlappedRectangle(t,n){let i=de.intersection(t,n,iG);return c(i)?i:e._clampRectangle(t,n,iG)}static _computeImageryCoverages(t,n,i,o,r){let a=[];for(let s=n.minX;s<=n.maxX;s++){let A=r(s,n.maxY,i);if(c(A))for(let l=n.minY;l<=n.maxY;l++){let d=r(s,l,i);if(!c(d))continue;let m=e._localizeToCartesianRectangle(d,o,void 0),p=t.getImageryFromCache(s,l,i),g=new e(s,l,i,m,p);a.push(g)}}return a}static _localizeToCartesianRectangle(t,n,i){c(i)||(i=new nS);let o=1/n.width,r=1/n.height;return i.minX=(t.west-n.west)*o,i.minY=(t.south-n.south)*r,i.maxX=(t.east-n.west)*o,i.maxY=(t.north-n.south)*r,i}},oS=iS;var rS=class e{static readAttributeAsTypedArray(t){let n=e.readAttributeAsRawCompactTypedArray(t),i=t.normalized,o=t.quantization;if(!c(o)&&!i)return n;let r=t.type,a=t.count,s=n;return i&&(s=Yt.dequantize(n,t.componentDatatype,r,a)),c(o)?e.dequantize(s,a,r,o):s}static readAttributeAsRawCompactTypedArray(t){let n=t.type,i=t.count,o=ct.getNumberOfComponents(n),r=i*o,a=t.componentDatatype,s=t.quantization;c(s)&&(a=s.componentDatatype);let A=t.buffer,l=t.byteOffset,d=t.byteStride,m=V.getSizeInBytes(a),p=o*m;if(!c(d)||d===p){let x=V.createTypedArray(a,r);return A.getBufferData(x,l),x}let g=new Uint8Array(A.sizeInBytes);A.getBufferData(g);let h=V.createTypedArray(a,r),C=d??p,_=new DataView(g.buffer,g.byteOffset,g.byteLength),I=new Array(o),b=e.createComponentsReader(a);for(let x=0;x<i;++x){let T=l+x*C;b(_,T,o,I);for(let w=0;w<o;++w)h[x*o+w]=I[w]}return h}static dequantize(t,n,i,o){if(o.octEncoded){let s=e.octDecode(t,n,o.normalizationRange,void 0);return o.octEncodedZXY&&e.convertZxyToXyz(s,s),s}let r=o.quantizedVolumeStepSize,a=o.quantizedVolumeOffset;if(i===ct.SCALAR)return e.dequantize1D(t,n,r,a,void 0);if(i===ct.VEC2)return e.dequantize2D(t,n,r,a,void 0);if(i===ct.VEC3)return e.dequantize3D(t,n,r,a,void 0);if(i===ct.VEC4)return e.dequantize4D(t,n,r,a,void 0);throw new be(`Element type for dequantization must be SCALAR, VEC2, VEC3, or VEC4, but is ${i}`)}static octDecode(t,n,i,o){c(o)||(o=new Float32Array(t.length));let r=new f;for(let a=0;a<n;a++)f.unpack(t,a*3,r),Yt.octDecodeInRange(r,i,r),f.pack(o,r,a*3);return o}static convertZxyToXyz(t,n,i){c(i)||(i=new Float32Array(t.length));let o=0;for(let r=0;r<n;r++,o+=3){let a=t[o+0],s=t[o+1],A=t[o+2];i[o+0]=s,i[o+1]=A,i[o+2]=a}return i}static dequantize1D(t,n,i,o,r){c(r)||(r=new Float32Array(t.length));for(let a=0;a<n;a++){let A=t[a]*i+o;r[a]=A}return r}static dequantize2D(t,n,i,o,r){c(r)||(r=new Float32Array(t.length));let a=new L;for(let s=0;s<n;s++)L.unpack(t,s*2,a),L.multiplyComponents(a,i,a),L.add(a,o,a),L.pack(a,r,s*2);return r}static dequantize3D(t,n,i,o,r){c(r)||(r=new Float32Array(t.length));let a=new f;for(let s=0;s<n;s++)f.unpack(t,s*3,a),f.multiplyComponents(a,i,a),f.add(a,o,a),f.pack(a,r,s*3);return r}static dequantize4D(t,n,i,o,r){c(r)||(r=new Float32Array(t.length));let a=new re;for(let s=0;s<n;s++)re.unpack(t,s*4,a),re.multiplyComponents(a,i,a),re.add(a,o,a),re.pack(a,r,s*4);return r}static createComponentsReader(t){let n=e.createComponentReader(t),i=V.getSizeInBytes(t);return function(o,r,a,s){let A=r;for(let l=0;l<a;++l)s[l]=n(o,A),A+=i}}static createComponentReader(t){switch(t){case V.BYTE:return function(n,i){return n.getInt8(i)};case V.UNSIGNED_BYTE:return function(n,i){return n.getUint8(i)};case V.SHORT:return function(n,i){return n.getInt16(i,!0)};case V.UNSIGNED_SHORT:return function(n,i){return n.getUint16(i,!0)};case V.INT:return function(n,i){return n.getInt32(i,!0)};case V.UNSIGNED_INT:return function(n,i){return n.getUint32(i,!0)};case V.FLOAT:return function(n,i){return n.getFloat32(i,!0)};case V.DOUBLE:return function(n,i){return n.getFloat64(i,!0)}}throw new be(`The componentType must be a valid ComponentDatatype, but is ${t}`)}static transform3D(t,n,i){c(i)||(i=new Float32Array(t.length));let o=new f,r=t.length/3;for(let a=0;a<r;a++)f.unpack(t,a*3,o),Q.multiplyByPoint(n,o,o),f.pack(o,i,a*3);return i}static readIndicesAsTypedArray(t){let n=t.typedArray;if(c(n))return n;let i=t.buffer,o=t.count,r=t.indexDatatype,a=e.createIndexTypedArray(r,o);return i.getBufferData(a),a}static readIndicesAsTriangleIndicesTypedArray(t,n){let i=e.readIndicesAsTypedArray(t);if(n===Me.TRIANGLES)return i;if(n===Me.TRIANGLE_STRIP)return e.convertTriangleStripToTriangleIndices(i);if(n===Me.TRIANGLE_FAN)return e.convertTriangleFanToTriangleIndices(i);throw new be(`The primitiveType must be TRIANGLES (${Me.TRIANGLES}, TRIANGLE_STRIP (${Me.TRIANGLE_STRIP}, or TRIANGLE_FAN (${Me.TRIANGLE_FAN}, but is ${n}`)}static convertTriangleStripToTriangleIndices(t){let n=t.constructor((t.length-2)*3);for(let i=0;i<t.length-2;i++)i%2===1?(n[i*3+0]=t[i+0],n[i*3+1]=t[i+2],n[i*3+2]=t[i+1]):(n[i*3+0]=t[i+0],n[i*3+1]=t[i+1],n[i*3+2]=t[i+2]);return n}static convertTriangleFanToTriangleIndices(t){let n=t.constructor((t.length-2)*3);for(let i=0;i<t.length-2;i++)n[i*3+0]=t[i+0],n[i*3+1]=t[i+1],n[i*3+2]=t[i+2];return n}static createIndexTypedArray(t,n){switch(t){case Ge.UNSIGNED_BYTE:return new Uint8Array(n);case Ge.UNSIGNED_SHORT:return new Uint16Array(n);case Ge.UNSIGNED_INT:return new Uint32Array(n)}throw new be(`The indexDatatype must be UNSIGNED_BYTE (${Ge.UNSIGNED_BYTE}, UNSIGNED_SHORT (${Ge.UNSIGNED_SHORT}, or UNSIGNED_INT (${Ge.UNSIGNED_INT}, but is ${t}`)}},oG=rS;var aS=class e{static createTextureCoordinatesForMappedPositions(t,n){let i=t.cartographicPositions,o=t.cartographicBoundingRectangle,r=t.numPositions;return e._createTextureCoordinates(i,r,o,n)}static _createTextureCoordinates(t,n,i,o){let r=new oi;oi.fromRectangle(i,o,r);let a=e.createProjectedPositions(t,o),s=e.computeTexCoords(a,r);return e.createTypedArrayFromCartesians2(n,s)}static createTextureCoordinatesAttributeForMappedPositions(t,n){let i=e.createTextureCoordinatesForMappedPositions(t,n);return e.createTexCoordAttribute(i)}static createCartographicPositions(t,n,i){let o=oG.readAttributeAsTypedArray(t),r=t.type,a=ct.getNumberOfComponents(r),s=e.createIterableCartesian3FromTypedArray(o,a),A=e.transformCartesians3(s,n);return e.transformToCartographic(A,i)}static createIterableCartesian3FromTypedArray(t,n){let i=new f,o=t.length/n;return{[Symbol.iterator]:function*(){for(let a=0;a<o;a++)i.x=t[a*n+0],i.y=t[a*n+1],i.z=t[a*n+2],yield i}}}static map(t,n){return{[Symbol.iterator]:function*(){for(let o of t)yield n(o)}}}static computeCartographicBoundingRectangle(t,n){c(n)||(n=new de);let i=Number.NEGATIVE_INFINITY,o=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY,a=Number.POSITIVE_INFINITY;for(let s of t)i=Math.max(i,s.latitude),o=Math.min(o,s.latitude),r=Math.max(r,s.longitude),a=Math.min(a,s.longitude);return n.north=i,n.south=o,n.east=r,n.west=a,n}static transformCartesians3(t,n){let i=new f;return e.map(t,r=>(Q.multiplyByPoint(n,r,i),i))}static transformToCartographic(t,n){let i=new ue;return e.map(t,r=>(n.cartesianToCartographic(r,i),i))}static createProjectedPositions(t,n){let i=new f;return e.map(t,r=>(n.project(r,i),i))}static computeTexCoords(t,n){let i=new L,o=1/n.width,r=1/n.height;return e.map(t,s=>{let A=(s.x-n.x)*o,l=(s.y-n.y)*r,d=Math.min(Math.max(A,0),1),m=Math.min(Math.max(l,0),1);return i.x=d,i.y=m,i})}static createTypedArrayFromCartesians2(t,n){let i=new Float32Array(t*2),o=0;for(let r of n)i[o*2+0]=r.x,i[o*2+1]=r.y,o++;return i}static createTexCoordAttribute(t){return{name:"Imagery Texture Coordinates",semantic:Pe.TEXCOORD,setIndex:0,componentDatatype:V.FLOAT,type:ct.VEC2,normalized:!1,count:t.length/2,min:void 0,max:void 0,constant:new L(0,0),quantization:void 0,typedArray:t,byteOffset:0,byteStride:void 0}}},ry=aS;var sS=class{constructor(t,n,i,o){this._cartographicPositions=t,this._numPositions=n,this._cartographicBoundingRectangle=i,this._ellipsoid=o}get cartographicPositions(){return this._cartographicPositions}get numPositions(){return this._numPositions}get cartographicBoundingRectangle(){return this._cartographicBoundingRectangle}get ellipsoid(){return this._ellipsoid}},rG=sS;var cS=class e{constructor(t,n,i){this._model=t,this._runtimeNode=n,this._runtimePrimitive=i,this._mappedPositionsPerEllipsoid=void 0,this._mappedPositionsModelMatrix=new Q,this._lastImageryLayersModificationCounter=0,this._imageryTexCoordAttributesPerProjection=void 0,this._currentImageryLayers=void 0,this._coveragesPerLayer=void 0,this._allImageriesReady=!1}coveragesForImageryLayer(t){let o=this._model.imageryLayers.indexOf(t);if(o===-1)throw new be("Imagery layer is not part of the model");let r=this._coveragesPerLayer;if(!c(r))throw new be("The coveragesPerLayer have not been computed yet");return r[o]}update(t){let n=this._model,r=n.content.tileset.imageryLayersModificationCounter;this._lastImageryLayersModificationCounter!==r&&(delete this._mappedPositionsPerEllipsoid,this._lastImageryLayersModificationCounter=r),this._mappedPositionsNeedUpdate&&(n.resetDrawCommands(),this._mappedPositionsPerEllipsoid=this._computeMappedPositionsPerEllipsoid(),this._deleteCoveragesPerLayer(),this._destroyImageryTexCoordAttributes()),c(this._imageryTexCoordAttributesPerProjection)||(this._imageryTexCoordAttributesPerProjection=this._computeImageryTexCoordsAttributesPerProjection(),this._uploadImageryTexCoordAttributes(t.context)),c(this._coveragesPerLayer)||(this._computeCoveragesPerLayer(),this._allImageriesReady=!1),this._allImageriesReady||this._updateImageries(t)}_deleteCoveragesPerLayer(){let t=this._coveragesPerLayer;if(!c(t))return;let n=this._currentImageryLayers,i=t.length;for(let o=0;o<i;o++){let r=n[o],a=t[o];this._deleteCoverages(r,a)}delete this._currentImageryLayers,delete this._coveragesPerLayer}_deleteCoverages(t,n){if(t.isDestroyed())return;let i=n.length;for(let o=0;o<i;o++)n[o].imagery.releaseReference()}_uploadImageryTexCoordAttributes(t){let n=this._imageryTexCoordAttributesPerProjection;if(!c(n))return;let i=n.length;for(let o=0;o<i;o++){let r=n[o],a=ut.createVertexBuffer({context:t,typedArray:r.typedArray,usage:De.STATIC_DRAW});a.vertexArrayDestroyable=!1,r.buffer=a}}_destroyImageryTexCoordAttributes(){let t=this._imageryTexCoordAttributesPerProjection;if(!c(t))return;let n=t.length;for(let i=0;i<n;i++){let o=t[i];c(o)&&(c(o.buffer)&&(o.buffer.isDestroyed()||o.buffer.destroy()),t[i]=void 0)}delete this._imageryTexCoordAttributesPerProjection}get _mappedPositionsNeedUpdate(){if(!c(this._mappedPositionsPerEllipsoid))return!0;let t=this._model,n=this._mappedPositionsModelMatrix;return!Q.equals(t.modelMatrix,n)}_computeMappedPositionsPerEllipsoid(){let t=this._model,n=this._runtimeNode,i=this._runtimePrimitive,o=e._obtainPrimitivePositionAttribute(i.primitive),r=o.count,a=e._computePrimitivePositionTransform(t,n,void 0),s=[],A=e._computeUniqueEllipsoids(t.imageryLayers),l=A.length;for(let d=0;d<l;d++){let m=A[d],p=ry.createCartographicPositions(o,a,m),g=ry.computeCartographicBoundingRectangle(p),h=new rG(p,r,g,m);s.push(h)}return Q.clone(t.modelMatrix,this._mappedPositionsModelMatrix),s}static _computeUniqueEllipsoids(t){let n=new Set,i=t.length;for(let o=0;o<i;o++){let r=t.get(o),a=e._getEllipsoid(r);n.add(a)}return[...n]}_computeImageryTexCoordsAttributesPerProjection(){let n=this._model.imageryLayers,i=e._extractProjections(n),o=[...new Set(i)];return this._createImageryTexCoordAttributes(o)}static _extractProjections(t){let n=[],i=t.length;for(let o=0;o<i;o++){let r=t.get(o),a=e._getProjection(r);n.push(a)}return n}static _getProjection(t){return t.imageryProvider.tilingScheme.projection}_createImageryTexCoordAttributes(t){let n=[],i=t.length;for(let o=0;o<i;o++){let r=t[o],a=r.ellipsoid,s=this.mappedPositionsForEllipsoid(a),A=ry.createTextureCoordinatesAttributeForMappedPositions(s,r);n.push(A)}return n}_computeCoveragesPerLayer(){let t=[],n=[],o=this._model.imageryLayers,r=o.length;for(let a=0;a<r;a++){let s=o.get(a),A=this._computeCoverage(s);t.push(A),n.push(s)}this._coveragesPerLayer=t,this._currentImageryLayers=n}_computeCoverage(t){let i=this.mappedPositionsForImageryLayer(t).cartographicBoundingRectangle,o=this._computeImageryLevel(t,i);return oS.createImageryCoverages(i,t,o)}_computeImageryLevel(t,n){let i=t.imageryProvider,r=i.tilingScheme.rectangle,a=1,s=n.width,A=r.width;n.height>n.width&&(s=n.height,A=r.height);let l=Math.log2(a*A/s);return oS._clampImageryLevel(i,l)}_updateImageries(t){let n=this._model,i=this._coveragesPerLayer,o=i.length,r=!0;for(let a=0;a<o;a++){let s=i[a],A=s.length;for(let l=0;l<A;l++){let m=s[l].imagery;m.state===Xt.READY||m.state===Xt.FAILED||m.state===Xt.INVALID||(r=!1,m.processStateMachine(t,!1,!1))}}r&&n.resetDrawCommands(),this._allImageriesReady=r}mappedPositionsForImageryLayer(t){let n=e._getEllipsoid(t);return this.mappedPositionsForEllipsoid(n)}mappedPositionsForEllipsoid(t){let n=this._mappedPositionsPerEllipsoid;if(!c(n))throw new be("The mappedPositions have not been computed yet");let i=n.length;for(let o=0;o<i;o++){let r=n[o];if(r.ellipsoid===t)return r}throw new be(`Could not find mapped positions for ellipsoid ${t}`)}imageryTexCoordAttributesPerProjection(){let t=this._imageryTexCoordAttributesPerProjection;if(!c(t))throw new be("The imagery texture coordinate attributes have not been computed yet");return this._imageryTexCoordAttributesPerProjection}get ready(){let t=this._coveragesPerLayer;return c(t)?this._allImageriesReady:!1}isDestroyed(){return!1}destroy(){if(!this.isDestroyed())return this._deleteCoveragesPerLayer(),this._destroyImageryTexCoordAttributes(),me(this)}static _computePrimitivePositionTransform(t,n,i){c(i)||(i=new Q);let o=t.sceneGraph;return Q.clone(Q.IDENTITY,i),Q.multiply(i,t.modelMatrix,i),Q.multiply(i,o.components.transform,i),Q.multiply(i,o.axisCorrectionMatrix,i),Q.multiply(i,n.computedTransform,i),i}static _obtainPrimitivePositionAttribute(t){let n=tt.getAttributeBySemantic(t,"POSITION");if(!c(n))throw new be("The primitive does not have a POSITION attribute");return n}static _getEllipsoid(t){return t.imageryProvider.tilingScheme.projection.ellipsoid}},ay=cS;var AS=class{constructor(t,n,i,o,r){this.imageryLayer=t,this.texture=n,this.textureTranslationAndScale=i,this.textureCoordinateRectangle=o,this.imageryTexCoordAttributeSetIndex=r}},aG=AS;var Ode=!1,kde=new de,Ude=new de,lS=class e{static process(t,n,i){let o=t.model,r=n.modelPrimitiveImagery;if(!c(r)||!r.ready)return;let a=o.imageryLayers,s=ay._extractProjections(a),A=[...new Set(s)],l=e._computeIndexMapping(s,A),d=e._createImageryInputs(a,r,l);if(d.length===0)return;d.length>10&&(Nn("imagery-texture-units",`Warning: Draped imagery requires ${d.length} texture units, truncating`),d.length=10),e._addImageryTexCoordAttributesToRenderResources(r,t);let m=[];for(let p=0;p<a.length;p++)m.push(a.get(p));e._processImageryInputs(m,t,d,A.length)}static _addImageryTexCoordAttributesToRenderResources(t,n){let i=t.imageryTexCoordAttributesPerProjection();for(let o of i)e._addImageryTexCoordAttributeToRenderResources(o,n)}static _addImageryTexCoordAttributeToRenderResources(t,n){let i=ct.getNumberOfComponents(t.type),o={index:n.attributeIndex++,value:c(t.buffer)?void 0:t.constant,vertexBuffer:t.buffer,count:t.count,componentsPerAttribute:i,componentDatatype:t.componentDatatype,offsetInBytes:t.byteOffset,strideInBytes:t.byteStride,normalize:t.normalized};n.attributes.push(o)}static _processImageryInputs(t,n,i,o){let r=n.shaderBuilder,a=e._computeImageryFlags(t),s=i.length;r.addDefine("HAS_IMAGERY"),r.addDefine(`IMAGERY_TEXTURE_UNITS ${s}`),e._addAttributes(r,o),e._defineUniforms(r,a),e._buildSampleAndBlendFunction(r,a),e._createMainImageryShader(r,i,a);let A=n.uniformMap,l=e._createImageryUniforms(i);e._setImageryUniforms(A,l)}static _addAttributes(t,n){for(let r=0;r<n;r++)t.addAttribute("vec2",`a_imagery_texCoord_${r}`),t.addVarying("vec2",`v_imagery_texCoord_${r}`);let i="initializeImageryAttributes",o=`void ${i}()`;t.addFunction(i,o,ie.VERTEX);for(let r=0;r<n;r++)t.addFunctionLines(i,[`v_imagery_texCoord_${r} = a_imagery_texCoord_${r};`])}static _computeImageryFlags(t){let n=new nG;for(let i=0;i<t.length;i++){let o=t[i];n.alpha|=o.alpha!==1,n.brightness|=o.brightness!==ns.DEFAULT_BRIGHTNESS,n.contrast|=o.contrast!==ns.DEFAULT_CONTRAST,n.hue|=o.hue!==ns.DEFAULT_HUE,n.saturation|=o.saturation!==ns.DEFAULT_SATURATION,n.gamma|=o.gamma!==ns.DEFAULT_GAMMA;let r=c(o.colorToAlpha)&&o.colorToAlphaThreshold>0;n.colorToAlpha|=r}return n}static _defineUniforms(t,n){t.addUniform("sampler2D","u_imageryTextures[IMAGERY_TEXTURE_UNITS]",ie.FRAGMENT),t.addUniform("vec4","u_imageryTextureCoordinateRectangle[IMAGERY_TEXTURE_UNITS]",ie.FRAGMENT),t.addUniform("vec4","u_imageryTextureTranslationAndScale[IMAGERY_TEXTURE_UNITS]",ie.FRAGMENT),n.alpha&&t.addUniform("float","u_imageryTextureAlpha[IMAGERY_TEXTURE_UNITS]",ie.FRAGMENT),n.brightness&&t.addUniform("float","u_imageryTextureBrightness[IMAGERY_TEXTURE_UNITS]",ie.FRAGMENT),n.contrast&&t.addUniform("float","u_imageryTextureContrast[IMAGERY_TEXTURE_UNITS]",ie.FRAGMENT),n.hue&&t.addUniform("float","u_imageryTextureHue[IMAGERY_TEXTURE_UNITS]",ie.FRAGMENT),n.saturation&&t.addUniform("float","u_imageryTextureSaturation[IMAGERY_TEXTURE_UNITS]",ie.FRAGMENT),n.gamma&&t.addUniform("float","u_imageryTextureOneOverGamma[IMAGERY_TEXTURE_UNITS]",ie.FRAGMENT),n.colorToAlpha&&t.addUniform("vec4","u_imageryTextureColorToAlpha[IMAGERY_TEXTURE_UNITS]",ie.FRAGMENT)}static _createSampleAndBlendFunctionSignature(t){let n="sampleAndBlend",i=[];i.push("vec4 previousColor"),i.push("sampler2D textureToSample"),i.push("vec2 textureCoordinates"),i.push("vec4 textureCoordinateRectangle"),i.push("vec4 textureCoordinateTranslationAndScale"),t.alpha&&i.push("float textureAlpha"),t.brightness&&i.push("float textureBrightness"),t.contrast&&i.push("float textureContrast"),t.hue&&i.push("float textureHue"),t.saturation&&i.push("float textureSaturation"),t.gamma&&i.push("float textureOneOverGamma"),t.colorToAlpha&&i.push("vec4 colorToAlpha");let o=i.join(", ");return`vec4 ${n}(${o})`}static _buildSampleAndBlendFunction(t,n){let i="sampleAndBlend",o=e._createSampleAndBlendFunctionSignature(n);t.addFunction(i,o,ie.FRAGMENT),t.addFunctionLines(i,["float effectiveAlpha = 1.0;"]),n.alpha&&t.addFunctionLines(i,["effectiveAlpha = textureAlpha;"]),t.addFunctionLines(i,["if (textureCoordinates.x < textureCoordinateRectangle.x) effectiveAlpha = 0.0;","if (textureCoordinates.x > textureCoordinateRectangle.z) effectiveAlpha = 0.0;","if (textureCoordinates.y < textureCoordinateRectangle.y) effectiveAlpha = 0.0;","if (textureCoordinates.y > textureCoordinateRectangle.w) effectiveAlpha = 0.0;","vec2 translation = textureCoordinateTranslationAndScale.xy;","vec2 scale = textureCoordinateTranslationAndScale.zw;","vec2 effectiveTextureCoordinates = textureCoordinates * scale + translation;","vec4 value = texture(textureToSample, effectiveTextureCoordinates);","value = czm_srgbToLinear(value);","vec3 color = value.rgb;","float alpha = value.a;"]),n.colorToAlpha&&t.addFunctionLines(i,["vec3 colorDiff = abs(color.rgb - colorToAlpha.rgb);","colorDiff.r = czm_maximumComponent(colorDiff);","alpha = czm_branchFreeTernary(colorDiff.r < colorToAlpha.a, 0.0, alpha);"]),n.gamma?t.addFunctionLines(i,["color = pow(color, vec3(textureOneOverGamma));"]):t.addFunctionLines(i,["vec4 tempColor = czm_gammaCorrect(vec4(color, alpha));","color = tempColor.rgb;","alpha = tempColor.a;"]),n.brightness&&t.addFunctionLines(i,["color = mix(vec3(0.0), color, textureBrightness);"]),n.contrast&&t.addFunctionLines(i,["color = mix(vec3(0.5), color, textureContrast);"]),n.hue&&t.addFunctionLines(i,["color = czm_hue(color, textureHue);"]),n.saturation&&t.addFunctionLines(i,["color = czm_saturation(color, textureSaturation);"]),t.addFunctionLines(i,["float sourceAlpha = alpha * effectiveAlpha;","float outAlpha = mix(previousColor.a, 1.0, sourceAlpha);","outAlpha += sign(outAlpha) - 1.0;","vec3 outColor = mix(previousColor.rgb * previousColor.a, color, sourceAlpha) / outAlpha;","vec4 result = vec4(outColor, max(outAlpha, 0.0));"]),Ode&&t.addFunctionLines(i,["if (abs(textureCoordinates.x - textureCoordinateRectangle.x) < (1.0/256.0) || ","    abs(textureCoordinates.x - textureCoordinateRectangle.z) < (1.0/256.0) || ","    abs(textureCoordinates.y - textureCoordinateRectangle.y) < (1.0/256.0) || ","    abs(textureCoordinates.y - textureCoordinateRectangle.w) < (1.0/256.0))","{","    result = vec4(1.0, 0.0, 0.0, effectiveAlpha);","}"]),t.addFunctionLines(i,["return result;"])}static _createSampleAndBlendCallArguments(t,n,i){let o=`v_imagery_texCoord_${n}`,r=[];return r.push("blendedBaseColor"),r.push(`u_imageryTextures[${i}]`),r.push(`${o}`),r.push(`u_imageryTextureCoordinateRectangle[${i}]`),r.push(`u_imageryTextureTranslationAndScale[${i}]`),t.alpha&&r.push(`u_imageryTextureAlpha[${i}]`),t.brightness&&r.push(`u_imageryTextureBrightness[${i}]`),t.contrast&&r.push(`u_imageryTextureContrast[${i}]`),t.hue&&r.push(`u_imageryTextureHue[${i}]`),t.saturation&&r.push(`u_imageryTextureSaturation[${i}]`),t.gamma&&r.push(`u_imageryTextureOneOverGamma[${i}]`),t.colorToAlpha&&r.push(`u_imageryTextureColorToAlpha[${i}]`),r.join(", ")}static _createMainImageryShader(t,n,i){let o="blendBaseColorWithImagery";t.addFunction(o,"vec4 blendBaseColorWithImagery(vec4 baseColorWithAlpha)",ie.FRAGMENT),t.addFunctionLines(o,["vec4 blendedBaseColor = baseColorWithAlpha;"]);for(let r=0;r<n.length;r++){let s=n[r].imageryTexCoordAttributeSetIndex,A=e._createSampleAndBlendCallArguments(i,s,r);t.addFunctionLines(o,[`blendedBaseColor = sampleAndBlend(${A});`])}t.addFunctionLines(o,["return blendedBaseColor;"])}static _createImageryUniforms(t){let n=t.length,i={};i.imageryTextures=Array(n),i.imageryTextureCoordinateRectangle=Array(n),i.imageryTextureTranslationAndScale=Array(n),i.imageryTextureAlpha=Array(n),i.imageryTextureBrightness=Array(n),i.imageryTextureContrast=Array(n),i.imageryTextureHue=Array(n),i.imageryTextureSaturation=Array(n),i.imageryTextureOneOverGamma=Array(n),i.imageryTextureColorToAlpha=Array(n);for(let o=0;o<n;o++){let r=t[o],a=r.imageryLayer,s=r.texture,A=r.textureCoordinateRectangle,l=r.textureTranslationAndScale;i.imageryTextures[o]=s,i.imageryTextureTranslationAndScale[o]=l,i.imageryTextureCoordinateRectangle[o]=A,i.imageryTextureAlpha[o]=a.alpha,i.imageryTextureBrightness[o]=a.brightness,i.imageryTextureContrast[o]=a.contrast,i.imageryTextureHue[o]=a.hue,i.imageryTextureSaturation[o]=a.saturation,i.imageryTextureOneOverGamma[o]=1/a.gamma;let d=i.imageryTextureColorToAlpha[o];if(c(d)||(d=new re,i.imageryTextureColorToAlpha[o]=d),c(a.colorToAlpha)&&a.colorToAlphaThreshold>0){let p=a.colorToAlpha;d.x=p.red,d.y=p.green,d.z=p.blue,d.w=a.colorToAlphaThreshold}else d.w=-1}return i}static _setImageryUniforms(t,n){for(let i in n)if(n.hasOwnProperty(i)){let o=`u_${i}`;t[o]=function(){return n[i]}}}static _createImageryInputs(t,n,i){let o=[];for(let r=0;r<t.length;r++){let a=t.get(r);if(!a.show)continue;let s=i[r],l=n.mappedPositionsForImageryLayer(a).cartographicBoundingRectangle,d=n.coveragesForImageryLayer(a);for(let m=0;m<d.length;m++){let p=d[m],g=e._createImageryInput(a,p,l,s);c(g)&&o.push(g)}}return o}static _createImageryInput(t,n,i,o){let r=n.imagery;if(r.state===Xt.FAILED||r.state===Xt.INVALID)return;let a=r.textureWebMercator;if(!c(a)&&(a=r.texture,!c(a))){r.state===Xt.READY&&console.log(`Imagery at ${n.x}, ${n.y} (level ${n.level}) does not have any texture - state ${r.state}`);return}let s=e._computeTextureTranslationAndScale(t,i,r.rectangle),A=n.textureCoordinateRectangle,l=new re(A.minX,A.minY,A.maxX,A.maxY);return new aG(t,a,s,l,o)}static _computeTextureTranslationAndScale(t,n,i){let o=t.imageryProvider.tilingScheme,r=o.rectangleToNativeRectangle(n,kde),a=o.rectangleToNativeRectangle(i,Ude);return e._computeTextureTranslationAndScaleFromNative(r,a)}static _computeTextureTranslationAndScaleFromNative(t,n){let i=1/n.width,o=1/n.height,r=t.west-n.west,a=t.south-n.south,s=r*i,A=a*o,l=t.width*i,d=t.height*o;return new re(s,A,l,d)}static _computeIndexMapping(t,n){let i=[],o=t.length;for(let r=0;r<o;r++){let a=t[r],s=n.indexOf(a);i.push(s)}return i}},sG=lS;var cG=`#ifdef USE_IBL_LIGHTING
vec3 computeIBL(vec3 position, vec3 normal, vec3 lightDirection, vec3 lightColorHdr, czm_modelMaterial material)
{
    #if defined(DIFFUSE_IBL) || defined(SPECULAR_IBL)
        // Environment maps were provided, use them for IBL
        vec3 viewDirection = -normalize(position);
        vec3 iblColor = textureIBL(viewDirection, normal, material);
        return iblColor;
    #endif
    
    return vec3(0.0);
}
#endif

#ifdef USE_CLEARCOAT
vec3 addClearcoatReflection(vec3 baseLayerColor, vec3 position, vec3 lightDirection, vec3 lightColorHdr, czm_modelMaterial material)
{
    vec3 viewDirection = -normalize(position);
    vec3 halfwayDirection = normalize(viewDirection + lightDirection);
    vec3 normal = material.clearcoatNormal;
    float NdotL = clamp(dot(normal, lightDirection), 0.001, 1.0);

    // clearcoatF0 = vec3(pow((ior - 1.0) / (ior + 1.0), 2.0)), but without KHR_materials_ior, ior is a constant 1.5.
    vec3 f0 = vec3(0.04);
    vec3 f90 = vec3(1.0);
    // Note: clearcoat Fresnel computed with dot(n, v) instead of dot(v, h).
    // This is to make it energy conserving with a simple layering function.
    float NdotV = clamp(dot(normal, viewDirection), 0.0, 1.0);
    vec3 F = fresnelSchlick2(f0, f90, NdotV);

    // compute specular reflection from direct lighting
    float roughness = material.clearcoatRoughness;
    float alphaRoughness = roughness * roughness;
    float directStrength = computeDirectSpecularStrength(normal, lightDirection, viewDirection, halfwayDirection, alphaRoughness);
    vec3 directReflection = F * directStrength * NdotL;
    vec3 color = lightColorHdr * directReflection;

    #ifdef SPECULAR_IBL
        // Find the direction in which to sample the environment map
        vec3 reflectMC = normalize(model_iblReferenceFrameMatrix * reflect(-viewDirection, normal));
        vec3 iblColor = computeSpecularIBL(reflectMC, NdotV, f0, roughness);
        color += iblColor * material.occlusion;
    #endif

    float clearcoatFactor = material.clearcoatFactor;
    vec3 clearcoatColor = color * clearcoatFactor;

    // Dim base layer based on transmission loss through clearcoat
    return baseLayerColor * (1.0 - clearcoatFactor * F) + clearcoatColor;
}
#endif

#if defined(LIGHTING_PBR) && defined(HAS_NORMALS)
vec3 computePbrLighting(in czm_modelMaterial material, in vec3 position)
{
    #ifdef USE_CUSTOM_LIGHT_COLOR
        vec3 lightColorHdr = model_lightColorHdr;
    #else
        vec3 lightColorHdr = czm_lightColorHdr;
    #endif

    vec3 viewDirection = -normalize(position);
    vec3 normal = material.normalEC;
    vec3 lightDirection = normalize(czm_lightDirectionEC);

    vec3 directLighting = czm_pbrLighting(viewDirection, normal, lightDirection, material);
    vec3 directColor = lightColorHdr * directLighting;

    // Accumulate colors from base layer
    vec3 color = directColor + material.emissive;
    #ifdef USE_IBL_LIGHTING
        color += computeIBL(position, normal, lightDirection, lightColorHdr, material);
    #endif

    #ifdef USE_CLEARCOAT
        color = addClearcoatReflection(color, position, lightDirection, lightColorHdr, material);
    #endif

    return color;
}
#endif

/**
 * Compute the material color under the current lighting conditions.
 * All other material properties are passed through so further stages
 * have access to them.
 *
 * @param {czm_modelMaterial} material The material properties from {@MaterialStageFS}
 * @param {ProcessedAttributes} attributes
 */
void lightingStage(inout czm_modelMaterial material, ProcessedAttributes attributes)
{
    #ifdef LIGHTING_PBR
        #ifdef HAS_NORMALS
            vec3 color = computePbrLighting(material, attributes.positionEC);
        #else
            vec3 color = material.diffuse * material.occlusion + material.emissive;
        #endif
        // In HDR mode, the frame buffer is in linear color space. The
        // post-processing stages (see PostProcessStageCollection) will handle
        // tonemapping. However, if HDR is not enabled, we must tonemap else large
        // values may be clamped to 1.0
        #ifndef HDR
            color = czm_pbrNeutralTonemapping(color);
        #endif
    #else // unlit
        vec3 color = material.diffuse;
    #endif

    #ifdef HAS_POINT_CLOUD_COLOR_STYLE
        // The colors resulting from point cloud styles are adjusted differently.
        color = czm_gammaCorrect(color);
    #elif !defined(HDR)
        // If HDR is not enabled, the frame buffer stores sRGB colors rather than
        // linear colors so the linear value must be converted.
        color = czm_linearToSrgb(color);
    #endif

    material.diffuse = color;
}
`;var zde={UNLIT:0,PBR:1},Td=Object.freeze(zde);var AG={name:"LightingPipelineStage"};AG.process=function(e,t){let{model:n,lightingOptions:i,shaderBuilder:o}=e;if(c(n.lightColor)){o.addDefine("USE_CUSTOM_LIGHT_COLOR",void 0,ie.FRAGMENT),o.addUniform("vec3","model_lightColorHdr",ie.FRAGMENT);let a=e.uniformMap;a.model_lightColorHdr=function(){return n.lightColor}}let{lightingModel:r}=i;r===Td.PBR?o.addDefine("LIGHTING_PBR",void 0,ie.FRAGMENT):o.addDefine("LIGHTING_UNLIT",void 0,ie.FRAGMENT),o.addFragmentLines(cG)};var lG=AG;var uG=`// If the style color is white, it implies the feature has not been styled.
bool isDefaultStyleColor(vec3 color)
{
    return all(greaterThan(color, vec3(1.0 - czm_epsilon3)));
}

vec3 blend(vec3 sourceColor, vec3 styleColor, float styleColorBlend)
{
    vec3 blendColor = mix(sourceColor, styleColor, styleColorBlend);
    vec3 color = isDefaultStyleColor(styleColor.rgb) ? sourceColor : blendColor;
    return color;
}

vec2 computeTextureTransform(vec2 texCoord, mat3 textureTransform)
{
    return vec2(textureTransform * vec3(texCoord, 1.0));
}

#ifdef HAS_NORMAL_TEXTURE
vec2 getNormalTexCoords()
{
    vec2 texCoord = TEXCOORD_NORMAL;
    #ifdef HAS_NORMAL_TEXTURE_TRANSFORM
        texCoord = vec2(u_normalTextureTransform * vec3(texCoord, 1.0));
    #endif
    return texCoord;
}
#endif

#if defined(HAS_NORMAL_TEXTURE) || defined(HAS_CLEARCOAT_NORMAL_TEXTURE)
vec3 computeTangent(in vec3 position, in vec2 normalTexCoords)
{
    vec2 tex_dx = dFdx(normalTexCoords);
    vec2 tex_dy = dFdy(normalTexCoords);
    float determinant = tex_dx.x * tex_dy.y - tex_dy.x * tex_dx.y;
    vec3 tangent = tex_dy.t * dFdx(position) - tex_dx.t * dFdy(position);
    return tangent / determinant;
}
#endif

#ifdef USE_ANISOTROPY
struct NormalInfo {
    vec3 tangent;
    vec3 bitangent;
    vec3 normal;
    vec3 geometryNormal;
};

NormalInfo getNormalInfo(ProcessedAttributes attributes)
{
    vec3 geometryNormal = attributes.normalEC;
    #ifdef HAS_NORMAL_TEXTURE
        vec2 normalTexCoords = getNormalTexCoords();
    #endif

    #ifdef HAS_BITANGENTS
        vec3 tangent = attributes.tangentEC;
        vec3 bitangent = attributes.bitangentEC;
    #else // Assume HAS_NORMAL_TEXTURE
        vec3 tangent = computeTangent(attributes.positionEC, normalTexCoords);
        tangent = normalize(tangent - geometryNormal * dot(geometryNormal, tangent));
        vec3 bitangent = normalize(cross(geometryNormal, tangent));
    #endif

    #ifdef HAS_NORMAL_TEXTURE
        mat3 tbn = mat3(tangent, bitangent, geometryNormal);
        vec3 normalSample = texture(u_normalTexture, normalTexCoords).rgb;
        normalSample = 2.0 * normalSample - 1.0;
        #ifdef HAS_NORMAL_TEXTURE_SCALE
            normalSample.xy *= u_normalTextureScale;
        #endif
        vec3 normal = normalize(tbn * normalSample);
    #else
        vec3 normal = geometryNormal;
    #endif

    #ifdef HAS_DOUBLE_SIDED_MATERIAL
        if (czm_backFacing()) {
            tangent *= -1.0;
            bitangent *= -1.0;
            normal *= -1.0;
            geometryNormal *= -1.0;
        }
    #endif

    NormalInfo normalInfo;
    normalInfo.tangent = tangent;
    normalInfo.bitangent = bitangent;
    normalInfo.normal = normal;
    normalInfo.geometryNormal = geometryNormal;

    return normalInfo;
}
#endif

#if defined(HAS_NORMAL_TEXTURE) && !defined(HAS_WIREFRAME)
vec3 getNormalFromTexture(ProcessedAttributes attributes, vec3 geometryNormal)
{
    vec2 normalTexCoords = getNormalTexCoords();

    // If HAS_BITANGENTS is set, then HAS_TANGENTS is also set
    #ifdef HAS_BITANGENTS
        vec3 t = attributes.tangentEC;
        vec3 b = attributes.bitangentEC;
    #else
        vec3 t = computeTangent(attributes.positionEC, normalTexCoords);
        t = normalize(t - geometryNormal * dot(geometryNormal, t));
        vec3 b = normalize(cross(geometryNormal, t));
    #endif

    mat3 tbn = mat3(t, b, geometryNormal);
    vec3 normalSample = texture(u_normalTexture, normalTexCoords).rgb;
    normalSample = 2.0 * normalSample - 1.0;
    #ifdef HAS_NORMAL_TEXTURE_SCALE
        normalSample.xy *= u_normalTextureScale;
    #endif
    return normalize(tbn * normalSample);
}
#endif

#ifdef HAS_CLEARCOAT_NORMAL_TEXTURE
vec3 getClearcoatNormalFromTexture(ProcessedAttributes attributes, vec3 geometryNormal)
{
    vec2 normalTexCoords = TEXCOORD_CLEARCOAT_NORMAL;
    #ifdef HAS_CLEARCOAT_NORMAL_TEXTURE_TRANSFORM
        normalTexCoords = vec2(u_clearcoatNormalTextureTransform * vec3(normalTexCoords, 1.0));
    #endif

    // If HAS_BITANGENTS is set, then HAS_TANGENTS is also set
    #ifdef HAS_BITANGENTS
        vec3 t = attributes.tangentEC;
        vec3 b = attributes.bitangentEC;
    #else
        vec3 t = computeTangent(attributes.positionEC, normalTexCoords);
        t = normalize(t - geometryNormal * dot(geometryNormal, t));
        vec3 b = normalize(cross(geometryNormal, t));
    #endif

    mat3 tbn = mat3(t, b, geometryNormal);
    vec3 normalSample = texture(u_clearcoatNormalTexture, normalTexCoords).rgb;
    normalSample = 2.0 * normalSample - 1.0;
    #ifdef HAS_CLEARCOAT_NORMAL_TEXTURE_SCALE
        normalSample.xy *= u_clearcoatNormalTextureScale;
    #endif
    return normalize(tbn * normalSample);
}
#endif

#ifdef HAS_NORMALS
vec3 computeNormal(ProcessedAttributes attributes)
{
    // Geometry normal. This is already normalized 
    vec3 normal = attributes.normalEC;

    #if defined(HAS_NORMAL_TEXTURE) && !defined(HAS_WIREFRAME)
        normal = getNormalFromTexture(attributes, normal);
    #endif

    #ifdef HAS_DOUBLE_SIDED_MATERIAL
        if (czm_backFacing()) {
            normal = -normal;
        }
    #endif

    return normal;
}
#endif

#ifdef HAS_BASE_COLOR_TEXTURE
vec4 getBaseColorFromTexture()
{
    vec2 baseColorTexCoords = TEXCOORD_BASE_COLOR;
    #ifdef HAS_BASE_COLOR_TEXTURE_TRANSFORM
        baseColorTexCoords = computeTextureTransform(baseColorTexCoords, u_baseColorTextureTransform);
    #endif

    vec4 baseColorWithAlpha = czm_srgbToLinear(texture(u_baseColorTexture, baseColorTexCoords));

    #ifdef HAS_BASE_COLOR_FACTOR
        baseColorWithAlpha *= u_baseColorFactor;
    #endif

    return baseColorWithAlpha;
}
#endif

#ifdef HAS_EMISSIVE_TEXTURE
vec3 getEmissiveFromTexture()
{
    vec2 emissiveTexCoords = TEXCOORD_EMISSIVE;
    #ifdef HAS_EMISSIVE_TEXTURE_TRANSFORM
        emissiveTexCoords = computeTextureTransform(emissiveTexCoords, u_emissiveTextureTransform);
    #endif

    vec3 emissive = czm_srgbToLinear(texture(u_emissiveTexture, emissiveTexCoords).rgb);
    #ifdef HAS_EMISSIVE_FACTOR
        emissive *= u_emissiveFactor;
    #endif

    return emissive;
}
#endif

#if defined(LIGHTING_PBR) && defined(USE_SPECULAR_GLOSSINESS)
void setSpecularGlossiness(inout czm_modelMaterial material)
{
    #ifdef HAS_SPECULAR_GLOSSINESS_TEXTURE
        vec2 specularGlossinessTexCoords = TEXCOORD_SPECULAR_GLOSSINESS;
        #ifdef HAS_SPECULAR_GLOSSINESS_TEXTURE_TRANSFORM
            specularGlossinessTexCoords = computeTextureTransform(specularGlossinessTexCoords, u_specularGlossinessTextureTransform);
        #endif

        vec4 specularGlossiness = czm_srgbToLinear(texture(u_specularGlossinessTexture, specularGlossinessTexCoords));
        vec3 specular = specularGlossiness.rgb;
        float glossiness = specularGlossiness.a;
        #ifdef HAS_LEGACY_SPECULAR_FACTOR
            specular *= u_legacySpecularFactor;
        #endif

        #ifdef HAS_GLOSSINESS_FACTOR
            glossiness *= u_glossinessFactor;
        #endif
    #else
        #ifdef HAS_LEGACY_SPECULAR_FACTOR
            vec3 specular = clamp(u_legacySpecularFactor, vec3(0.0), vec3(1.0));
        #else
            vec3 specular = vec3(1.0);
        #endif

        #ifdef HAS_GLOSSINESS_FACTOR
            float glossiness = clamp(u_glossinessFactor, 0.0, 1.0);
        #else
            float glossiness = 1.0;
        #endif
    #endif

    #ifdef HAS_DIFFUSE_TEXTURE
        vec2 diffuseTexCoords = TEXCOORD_DIFFUSE;
        #ifdef HAS_DIFFUSE_TEXTURE_TRANSFORM
            diffuseTexCoords = computeTextureTransform(diffuseTexCoords, u_diffuseTextureTransform);
        #endif

        vec4 diffuse = czm_srgbToLinear(texture(u_diffuseTexture, diffuseTexCoords));
        #ifdef HAS_DIFFUSE_FACTOR
            diffuse *= u_diffuseFactor;
        #endif
    #elif defined(HAS_DIFFUSE_FACTOR)
        vec4 diffuse = clamp(u_diffuseFactor, vec4(0.0), vec4(1.0));
    #else
        vec4 diffuse = vec4(1.0);
    #endif

    material.diffuse = diffuse.rgb * (1.0 - czm_maximumComponent(specular));
    // the specular glossiness extension's alpha overrides anything set
    // by the base material.
    material.alpha = diffuse.a;

    material.specular = specular;

    // glossiness is the opposite of roughness, but easier for artists to use.
    material.roughness = 1.0 - glossiness;
}
#elif defined(LIGHTING_PBR)
float setMetallicRoughness(inout czm_modelMaterial material)
{
    #ifdef HAS_METALLIC_ROUGHNESS_TEXTURE
        vec2 metallicRoughnessTexCoords = TEXCOORD_METALLIC_ROUGHNESS;
        #ifdef HAS_METALLIC_ROUGHNESS_TEXTURE_TRANSFORM
            metallicRoughnessTexCoords = computeTextureTransform(metallicRoughnessTexCoords, u_metallicRoughnessTextureTransform);
        #endif

        vec3 metallicRoughness = texture(u_metallicRoughnessTexture, metallicRoughnessTexCoords).rgb;
        float metalness = clamp(metallicRoughness.b, 0.0, 1.0);
        float roughness = clamp(metallicRoughness.g, 0.0, 1.0);
        #ifdef HAS_METALLIC_FACTOR
            metalness = clamp(metalness * u_metallicFactor, 0.0, 1.0);
        #endif

        #ifdef HAS_ROUGHNESS_FACTOR
            roughness = clamp(roughness * u_roughnessFactor, 0.0, 1.0);
        #endif
    #else
        #ifdef HAS_METALLIC_FACTOR
            float metalness = clamp(u_metallicFactor, 0.0, 1.0);
        #else
            float metalness = 1.0;
        #endif

        #ifdef HAS_ROUGHNESS_FACTOR
            float roughness = clamp(u_roughnessFactor, 0.0, 1.0);
        #else
            float roughness = 1.0;
        #endif
    #endif

    // dielectrics use f0 = 0.04, metals use albedo as f0
    const vec3 REFLECTANCE_DIELECTRIC = vec3(0.04);
    vec3 f0 = mix(REFLECTANCE_DIELECTRIC, material.baseColor.rgb, metalness);

    material.specular = f0;

    // diffuse only applies to dielectrics.
    material.diffuse = mix(material.baseColor.rgb, vec3(0.0), metalness);

    // This is perceptual roughness. The square of this value is used for direct lighting
    material.roughness = roughness;

    return metalness;
}
#ifdef USE_SPECULAR
void setSpecular(inout czm_modelMaterial material, in float metalness)
{
    #ifdef HAS_SPECULAR_TEXTURE
        vec2 specularTexCoords = TEXCOORD_SPECULAR;
        #ifdef HAS_SPECULAR_TEXTURE_TRANSFORM
            specularTexCoords = computeTextureTransform(specularTexCoords, u_specularTextureTransform);
        #endif
        float specularWeight = texture(u_specularTexture, specularTexCoords).a;
        #ifdef HAS_SPECULAR_FACTOR
            specularWeight *= u_specularFactor;
        #endif
    #else
        #ifdef HAS_SPECULAR_FACTOR
            float specularWeight = u_specularFactor;
        #else
            float specularWeight = 1.0;
        #endif
    #endif

    #ifdef HAS_SPECULAR_COLOR_TEXTURE
        vec2 specularColorTexCoords = TEXCOORD_SPECULAR_COLOR;
        #ifdef HAS_SPECULAR_COLOR_TEXTURE_TRANSFORM
            specularColorTexCoords = computeTextureTransform(specularColorTexCoords, u_specularColorTextureTransform);
        #endif
        vec3 specularColorSample = texture(u_specularColorTexture, specularColorTexCoords).rgb;
        vec3 specularColorFactor = czm_srgbToLinear(specularColorSample);
        #ifdef HAS_SPECULAR_COLOR_FACTOR
            specularColorFactor *= u_specularColorFactor;
        #endif
    #else
        #ifdef HAS_SPECULAR_COLOR_FACTOR
            vec3 specularColorFactor = u_specularColorFactor;
        #else
            vec3 specularColorFactor = vec3(1.0);
        #endif
    #endif
    material.specularWeight = specularWeight;
    vec3 f0 = material.specular;
    vec3 dielectricSpecularF0 = min(f0 * specularColorFactor, vec3(1.0));
    material.specular = mix(dielectricSpecularF0, material.baseColor.rgb, metalness);
}
#endif
#ifdef USE_ANISOTROPY
void setAnisotropy(inout czm_modelMaterial material, in NormalInfo normalInfo)
{
    mat2 rotation = mat2(u_anisotropy.xy, -u_anisotropy.y, u_anisotropy.x);
    float anisotropyStrength = u_anisotropy.z;

    vec2 direction = vec2(1.0, 0.0);
    #ifdef HAS_ANISOTROPY_TEXTURE
        vec2 anisotropyTexCoords = TEXCOORD_ANISOTROPY;
        #ifdef HAS_ANISOTROPY_TEXTURE_TRANSFORM
            anisotropyTexCoords = computeTextureTransform(anisotropyTexCoords, u_anisotropyTextureTransform);
        #endif
        vec3 anisotropySample = texture(u_anisotropyTexture, anisotropyTexCoords).rgb;
        direction = anisotropySample.rg * 2.0 - vec2(1.0);
        anisotropyStrength *= anisotropySample.b;
    #endif

    direction = rotation * direction;
    mat3 tbn = mat3(normalInfo.tangent, normalInfo.bitangent, normalInfo.normal);
    vec3 anisotropicT = tbn * normalize(vec3(direction, 0.0));
    vec3 anisotropicB = cross(normalInfo.geometryNormal, anisotropicT);

    material.anisotropicT = anisotropicT;
    material.anisotropicB = anisotropicB;
    material.anisotropyStrength = anisotropyStrength;
}
#endif
#ifdef USE_CLEARCOAT
void setClearcoat(inout czm_modelMaterial material, in ProcessedAttributes attributes)
{
    #ifdef HAS_CLEARCOAT_TEXTURE
        vec2 clearcoatTexCoords = TEXCOORD_CLEARCOAT;
        #ifdef HAS_CLEARCOAT_TEXTURE_TRANSFORM
            clearcoatTexCoords = computeTextureTransform(clearcoatTexCoords, u_clearcoatTextureTransform);
        #endif
        float clearcoatFactor = texture(u_clearcoatTexture, clearcoatTexCoords).r;
        #ifdef HAS_CLEARCOAT_FACTOR
            clearcoatFactor *= u_clearcoatFactor;
        #endif
    #else
        #ifdef HAS_CLEARCOAT_FACTOR
            float clearcoatFactor = u_clearcoatFactor;
        #else
            // PERFORMANCE_IDEA: this case should turn the whole extension off
            float clearcoatFactor = 0.0;
        #endif
    #endif

    #ifdef HAS_CLEARCOAT_ROUGHNESS_TEXTURE
        vec2 clearcoatRoughnessTexCoords = TEXCOORD_CLEARCOAT_ROUGHNESS;
        #ifdef HAS_CLEARCOAT_ROUGHNESS_TEXTURE_TRANSFORM
            clearcoatRoughnessTexCoords = computeTextureTransform(clearcoatRoughnessTexCoords, u_clearcoatRoughnessTextureTransform);
        #endif
        float clearcoatRoughness = texture(u_clearcoatRoughnessTexture, clearcoatRoughnessTexCoords).g;
        #ifdef HAS_CLEARCOAT_ROUGHNESS_FACTOR
            clearcoatRoughness *= u_clearcoatRoughnessFactor;
        #endif
    #else
        #ifdef HAS_CLEARCOAT_ROUGHNESS_FACTOR
            float clearcoatRoughness = u_clearcoatRoughnessFactor;
        #else
            float clearcoatRoughness = 0.0;
        #endif
    #endif

    material.clearcoatFactor = clearcoatFactor;
    // This is perceptual roughness. The square of this value is used for direct lighting
    material.clearcoatRoughness = clearcoatRoughness;
    #ifdef HAS_CLEARCOAT_NORMAL_TEXTURE
        material.clearcoatNormal = getClearcoatNormalFromTexture(attributes, attributes.normalEC);
    #else
        material.clearcoatNormal = attributes.normalEC;
    #endif
}
#endif
#endif

void materialStage(inout czm_modelMaterial material, ProcessedAttributes attributes, SelectedFeature feature)
{
    #ifdef USE_ANISOTROPY
        NormalInfo normalInfo = getNormalInfo(attributes);
        material.normalEC = normalInfo.normal;
    #elif defined(HAS_NORMALS)
        material.normalEC = computeNormal(attributes);
    #endif

    vec4 baseColorWithAlpha = vec4(1.0);
    // Regardless of whether we use PBR, set a base color
    #ifdef HAS_BASE_COLOR_TEXTURE
        baseColorWithAlpha = getBaseColorFromTexture();
    #elif defined(HAS_BASE_COLOR_FACTOR)
        baseColorWithAlpha = u_baseColorFactor;
    #endif

    #ifdef HAS_IMAGERY
    baseColorWithAlpha = blendBaseColorWithImagery(baseColorWithAlpha);
    #endif // HAS_IMAGERY

    #ifdef HAS_POINT_CLOUD_COLOR_STYLE
        baseColorWithAlpha = v_pointCloudColor;
    #elif defined(HAS_COLOR_0)
        vec4 color = attributes.color_0;
        // .pnts files store colors in the sRGB color space
        #ifdef HAS_SRGB_COLOR
            color = czm_srgbToLinear(color);
        #endif
        baseColorWithAlpha *= color;
    #endif

    #ifdef USE_CPU_STYLING
        baseColorWithAlpha.rgb = blend(baseColorWithAlpha.rgb, feature.color.rgb, model_colorBlend);
    #endif
    material.baseColor = baseColorWithAlpha;
    material.diffuse = baseColorWithAlpha.rgb;
    material.alpha = baseColorWithAlpha.a;

    #ifdef HAS_OCCLUSION_TEXTURE
        vec2 occlusionTexCoords = TEXCOORD_OCCLUSION;
        #ifdef HAS_OCCLUSION_TEXTURE_TRANSFORM
            occlusionTexCoords = computeTextureTransform(occlusionTexCoords, u_occlusionTextureTransform);
        #endif
        material.occlusion = texture(u_occlusionTexture, occlusionTexCoords).r;
    #endif

    #ifdef HAS_EMISSIVE_TEXTURE
        material.emissive = getEmissiveFromTexture();
    #elif defined(HAS_EMISSIVE_FACTOR)
        material.emissive = u_emissiveFactor;
    #endif

    #if defined(LIGHTING_PBR) && defined(USE_SPECULAR_GLOSSINESS)
        setSpecularGlossiness(material);
    #elif defined(LIGHTING_PBR)
        float metalness = setMetallicRoughness(material);
        #ifdef USE_SPECULAR
            setSpecular(material, metalness);
        #endif
        #ifdef USE_ANISOTROPY
            setAnisotropy(material, normalInfo);
        #endif
        #ifdef USE_CLEARCOAT
            setClearcoat(material, attributes);
        #endif
    #endif
}
`;var{Material:Gde,MetallicRoughness:uS,SpecularGlossiness:fS,Specular:fG,Clearcoat:dG}=Rt,hG={name:"MaterialPipelineStage",_processTexture:is,_processTextureTransform:mG};hG.process=function(e,t,n){let i=t.material,{model:o,uniformMap:r,shaderBuilder:a}=e,s=c(o.classificationType),A=s,{defaultTexture:l,defaultNormalTexture:d,defaultEmissiveTexture:m}=n.context;Vde(i,r,a,l,d,m,A),c(i.specularGlossiness)?jde(i.specularGlossiness,r,a,l,A):(c(i.specular)&&tt.supportedExtensions.KHR_materials_specular&&Yde(i.specular,r,a,l,A),c(i.anisotropy)&&tt.supportedExtensions.KHR_materials_anisotropy&&qde(i.anisotropy,r,a,l,A),c(i.clearcoat)&&tt.supportedExtensions.KHR_materials_clearcoat&&Jde(i.clearcoat,r,a,l,A),Kde(i.metallicRoughness,r,a,l,A));let p=tt.getAttributeBySemantic(t,Pe.NORMAL),g=c(o.pointCloudShading)&&!o.pointCloudShading.normalShading,h=e.lightingOptions;i.unlit||!p||s||g?h.lightingModel=Td.UNLIT:h.lightingModel=Td.PBR;let C=o.backFaceCulling&&!i.doubleSided;e.renderStateOptions.cull.enabled=C;let _=e.alphaOptions;i.alphaMode===gd.BLEND?_.pass=He.TRANSLUCENT:i.alphaMode===gd.MASK&&(_.alphaCutoff=i.alphaCutoff),a.addFragmentLines(uG),i.doubleSided&&a.addDefine("HAS_DOUBLE_SIDED_MATERIAL",void 0,ie.BOTH)};function mG(e,t,n,i,o){let r=`HAS_${o}_TEXTURE_TRANSFORM`;e.addDefine(r,void 0,ie.FRAGMENT);let a=`${i}Transform`;e.addUniform("mat3",a,ie.FRAGMENT),t[a]=function(){return n.transform}}function Hde(e,t,n,i,o){let r=`HAS_${o}_TEXTURE_SCALE`;e.addDefine(r,void 0,ie.FRAGMENT);let a=`${i}Scale`;e.addUniform("float",a,ie.FRAGMENT),t[a]=function(){return n.scale}}function is(e,t,n,i,o,r){e.addUniform("sampler2D",i,ie.FRAGMENT),t[i]=function(){return n.texture??r};let a=`HAS_${o}_TEXTURE`;e.addDefine(a,void 0,ie.FRAGMENT);let A=`v_texCoord_${n.texCoord}`,l=`TEXCOORD_${o}`;e.addDefine(l,A,ie.FRAGMENT);let d=n.transform;c(d)&&!ne.equals(d,ne.IDENTITY)&&mG(e,t,n,i,o);let{scale:m}=n;c(m)&&m!==1&&Hde(e,t,n,i,o)}function Vde(e,t,n,i,o,r,a){let{emissiveFactor:s,emissiveTexture:A,normalTexture:l,occlusionTexture:d}=e;c(s)&&!f.equals(s,Gde.DEFAULT_EMISSIVE_FACTOR)&&(n.addUniform("vec3","u_emissiveFactor",ie.FRAGMENT),t.u_emissiveFactor=function(){return e.emissiveFactor},n.addDefine("HAS_EMISSIVE_FACTOR",void 0,ie.FRAGMENT),c(A)&&!a&&is(n,t,A,"u_emissiveTexture","EMISSIVE",r)),c(l)&&!a&&is(n,t,l,"u_normalTexture","NORMAL",o),c(d)&&!a&&is(n,t,d,"u_occlusionTexture","OCCLUSION",i)}function jde(e,t,n,i,o){let{diffuseTexture:r,diffuseFactor:a,specularGlossinessTexture:s,specularFactor:A,glossinessFactor:l}=e;n.addDefine("USE_SPECULAR_GLOSSINESS",void 0,ie.FRAGMENT),c(r)&&!o&&is(n,t,r,"u_diffuseTexture","DIFFUSE",i),c(a)&&!re.equals(a,fS.DEFAULT_DIFFUSE_FACTOR)&&(n.addUniform("vec4","u_diffuseFactor",ie.FRAGMENT),t.u_diffuseFactor=function(){return e.diffuseFactor},n.addDefine("HAS_DIFFUSE_FACTOR",void 0,ie.FRAGMENT)),c(s)&&!o&&is(n,t,s,"u_specularGlossinessTexture","SPECULAR_GLOSSINESS",i),c(A)&&!f.equals(A,fS.DEFAULT_SPECULAR_FACTOR)&&(n.addUniform("vec3","u_legacySpecularFactor",ie.FRAGMENT),t.u_legacySpecularFactor=function(){return e.specularFactor},n.addDefine("HAS_LEGACY_SPECULAR_FACTOR",void 0,ie.FRAGMENT)),c(l)&&l!==fS.DEFAULT_GLOSSINESS_FACTOR&&(n.addUniform("float","u_glossinessFactor",ie.FRAGMENT),t.u_glossinessFactor=function(){return e.glossinessFactor},n.addDefine("HAS_GLOSSINESS_FACTOR",void 0,ie.FRAGMENT))}function Yde(e,t,n,i,o){let{specularTexture:r,specularFactor:a,specularColorTexture:s,specularColorFactor:A}=e;n.addDefine("USE_SPECULAR",void 0,ie.FRAGMENT),c(r)&&!o&&is(n,t,r,"u_specularTexture","SPECULAR",i),c(a)&&a!==fG.DEFAULT_SPECULAR_FACTOR&&(n.addUniform("float","u_specularFactor",ie.FRAGMENT),t.u_specularFactor=function(){return e.specularFactor},n.addDefine("HAS_SPECULAR_FACTOR",void 0,ie.FRAGMENT)),c(s)&&!o&&is(n,t,s,"u_specularColorTexture","SPECULAR_COLOR",i),c(A)&&!f.equals(A,fG.DEFAULT_SPECULAR_COLOR_FACTOR)&&(n.addUniform("vec3","u_specularColorFactor",ie.FRAGMENT),t.u_specularColorFactor=function(){return e.specularColorFactor},n.addDefine("HAS_SPECULAR_COLOR_FACTOR",void 0,ie.FRAGMENT))}var Wde=new f;function qde(e,t,n,i,o){let{anisotropyStrength:r,anisotropyRotation:a,anisotropyTexture:s}=e;n.addDefine("USE_ANISOTROPY",void 0,ie.FRAGMENT),c(s)&&!o&&is(n,t,s,"u_anisotropyTexture","ANISOTROPY",i);let A=Math.cos(a),l=Math.sin(a);n.addUniform("vec3","u_anisotropy",ie.FRAGMENT),t.u_anisotropy=function(){return f.fromElements(A,l,r,Wde)}}function Jde(e,t,n,i,o){let{clearcoatFactor:r,clearcoatTexture:a,clearcoatRoughnessFactor:s,clearcoatRoughnessTexture:A,clearcoatNormalTexture:l}=e;n.addDefine("USE_CLEARCOAT",void 0,ie.FRAGMENT),c(r)&&r!==dG.DEFAULT_CLEARCOAT_FACTOR&&(n.addUniform("float","u_clearcoatFactor",ie.FRAGMENT),t.u_clearcoatFactor=function(){return e.clearcoatFactor},n.addDefine("HAS_CLEARCOAT_FACTOR",void 0,ie.FRAGMENT)),c(a)&&!o&&is(n,t,a,"u_clearcoatTexture","CLEARCOAT",i),c(s)&&r!==dG.DEFAULT_CLEARCOAT_ROUGHNESS_FACTOR&&(n.addUniform("float","u_clearcoatRoughnessFactor",ie.FRAGMENT),t.u_clearcoatRoughnessFactor=function(){return e.clearcoatRoughnessFactor},n.addDefine("HAS_CLEARCOAT_ROUGHNESS_FACTOR",void 0,ie.FRAGMENT)),c(A)&&!o&&is(n,t,A,"u_clearcoatRoughnessTexture","CLEARCOAT_ROUGHNESS",i),c(l)&&!o&&is(n,t,l,"u_clearcoatNormalTexture","CLEARCOAT_NORMAL",i)}function Kde(e,t,n,i,o){n.addDefine("USE_METALLIC_ROUGHNESS",void 0,ie.FRAGMENT);let r=e.baseColorTexture;c(r)&&!o&&is(n,t,r,"u_baseColorTexture","BASE_COLOR",i);let a=e.baseColorFactor;c(a)&&!re.equals(a,uS.DEFAULT_BASE_COLOR_FACTOR)&&(n.addUniform("vec4","u_baseColorFactor",ie.FRAGMENT),t.u_baseColorFactor=function(){return e.baseColorFactor},n.addDefine("HAS_BASE_COLOR_FACTOR",void 0,ie.FRAGMENT));let s=e.metallicRoughnessTexture;c(s)&&!o&&is(n,t,s,"u_metallicRoughnessTexture","METALLIC_ROUGHNESS",i);let A=e.metallicFactor;c(A)&&A!==uS.DEFAULT_METALLIC_FACTOR&&(n.addUniform("float","u_metallicFactor",ie.FRAGMENT),t.u_metallicFactor=function(){return e.metallicFactor},n.addDefine("HAS_METALLIC_FACTOR",void 0,ie.FRAGMENT));let l=e.roughnessFactor;c(l)&&l!==uS.DEFAULT_ROUGHNESS_FACTOR&&(n.addUniform("float","u_roughnessFactor",ie.FRAGMENT),t.u_roughnessFactor=function(){return e.roughnessFactor},n.addDefine("HAS_ROUGHNESS_FACTOR",void 0,ie.FRAGMENT))}var pG=hG;var Da={name:"MetadataPickingPipelineStage",METADATA_PICKING_ENABLED:"METADATA_PICKING_ENABLED",METADATA_PICKING_VALUE_TYPE:"METADATA_PICKING_VALUE_TYPE",METADATA_PICKING_VALUE_STRING:"METADATA_PICKING_VALUE_STRING",METADATA_PICKING_VALUE_COMPONENT_X:"METADATA_PICKING_VALUE_COMPONENT_X",METADATA_PICKING_VALUE_COMPONENT_Y:"METADATA_PICKING_VALUE_COMPONENT_Y",METADATA_PICKING_VALUE_COMPONENT_Z:"METADATA_PICKING_VALUE_COMPONENT_Z",METADATA_PICKING_VALUE_COMPONENT_W:"METADATA_PICKING_VALUE_COMPONENT_W"};Da.process=function(e,t,n){let i=e.shaderBuilder;i.addDefine(Da.METADATA_PICKING_VALUE_TYPE,"float",ie.FRAGMENT),i.addDefine(Da.METADATA_PICKING_VALUE_STRING,"0.0",ie.FRAGMENT),i.addDefine(Da.METADATA_PICKING_VALUE_COMPONENT_X,"0.0",ie.FRAGMENT),i.addDefine(Da.METADATA_PICKING_VALUE_COMPONENT_Y,"0.0",ie.FRAGMENT),i.addDefine(Da.METADATA_PICKING_VALUE_COMPONENT_Z,"0.0",ie.FRAGMENT),i.addDefine(Da.METADATA_PICKING_VALUE_COMPONENT_W,"0.0",ie.FRAGMENT),i.addFunction("metadataPickingStage","void metadataPickingStage(Metadata metadata, MetadataClass metadataClass, inout vec4 metadataValues)",ie.FRAGMENT),i.addFunctionLines("metadataPickingStage",[`${Da.METADATA_PICKING_VALUE_TYPE} value = ${Da.METADATA_PICKING_VALUE_TYPE}(${Da.METADATA_PICKING_VALUE_STRING});`,`metadataValues.x = ${Da.METADATA_PICKING_VALUE_COMPONENT_X};`,`metadataValues.y = ${Da.METADATA_PICKING_VALUE_COMPONENT_Y};`,`metadataValues.z = ${Da.METADATA_PICKING_VALUE_COMPONENT_Z};`,`metadataValues.w = ${Da.METADATA_PICKING_VALUE_COMPONENT_W};`],ie.FRAGMENT)};var gG=Da;var CG=`void morphTargetsStage(inout ProcessedAttributes attributes) 
{
    vec3 positionMC = attributes.positionMC;
    attributes.positionMC = getMorphedPosition(positionMC);

    #ifdef HAS_NORMALS
    vec3 normalMC = attributes.normalMC;
    attributes.normalMC = getMorphedNormal(normalMC);
    #endif

    #ifdef HAS_TANGENTS
    vec3 tangentMC = attributes.tangentMC;
    attributes.tangentMC = getMorphedTangent(tangentMC);
    #endif
}`;var kr={name:"MorphTargetsPipelineStage",FUNCTION_ID_GET_MORPHED_POSITION:"getMorphedPosition",FUNCTION_SIGNATURE_GET_MORPHED_POSITION:"vec3 getMorphedPosition(in vec3 position)",FUNCTION_ID_GET_MORPHED_NORMAL:"getMorphedNormal",FUNCTION_SIGNATURE_GET_MORPHED_NORMAL:"vec3 getMorphedNormal(in vec3 normal)",FUNCTION_ID_GET_MORPHED_TANGENT:"getMorphedTangent",FUNCTION_SIGNATURE_GET_MORPHED_TANGENT:"vec3 getMorphedTangent(in vec3 tangent)"};kr.process=function(e,t){let n=e.shaderBuilder;n.addDefine("HAS_MORPH_TARGETS",void 0,ie.VERTEX),nhe(n);let i=t.morphTargets.length;for(let s=0;s<i;s++){let A=t.morphTargets[s].attributes,l=A.length;for(let d=0;d<l;d++){let m=A[d],p=m.semantic;p!==Pe.POSITION&&p!==Pe.NORMAL&&p!==Pe.TANGENT||(Zde(e,m,e.attributeIndex,s),e.attributeIndex++)}}ihe(n);let r=e.runtimeNode.morphWeights.length;n.addUniform("float",`u_morphWeights[${r}]`,ie.VERTEX),n.addVertexLines(CG);let a={u_morphWeights:function(){return e.runtimeNode.morphWeights}};e.uniformMap=dt(a,e.uniformMap)};var Xde={attributeString:void 0,functionId:void 0};function Zde(e,t,n,i){let o=e.shaderBuilder;$de(e,t,n);let r=ehe(t,Xde);the(o,r,i)}function $de(e,t,n){let i={index:n,value:c(t.buffer)?void 0:t.constant,vertexBuffer:t.buffer,componentsPerAttribute:ct.getNumberOfComponents(t.type),componentDatatype:t.componentDatatype,offsetInBytes:t.byteOffset,strideInBytes:t.byteStride,normalize:t.normalized};e.attributes.push(i)}function ehe(e,t){switch(e.semantic){case Pe.POSITION:t.attributeString="Position",t.functionId=kr.FUNCTION_ID_GET_MORPHED_POSITION;break;case Pe.NORMAL:t.attributeString="Normal",t.functionId=kr.FUNCTION_ID_GET_MORPHED_NORMAL;break;case Pe.TANGENT:t.attributeString="Tangent",t.functionId=kr.FUNCTION_ID_GET_MORPHED_TANGENT;break;default:break}return t}function the(e,t,n){let i=t.attributeString,o=`a_target${i}_${n}`,r=`morphed${i} += u_morphWeights[${n}] * a_target${i}_${n};`;e.addAttribute("vec3",o),e.addFunctionLines(t.functionId,[r])}function nhe(e){e.addFunction(kr.FUNCTION_ID_GET_MORPHED_POSITION,kr.FUNCTION_SIGNATURE_GET_MORPHED_POSITION,ie.VERTEX),e.addFunctionLines(kr.FUNCTION_ID_GET_MORPHED_POSITION,["vec3 morphedPosition = position;"]),e.addFunction(kr.FUNCTION_ID_GET_MORPHED_NORMAL,kr.FUNCTION_SIGNATURE_GET_MORPHED_NORMAL,ie.VERTEX),e.addFunctionLines(kr.FUNCTION_ID_GET_MORPHED_NORMAL,["vec3 morphedNormal = normal;"]),e.addFunction(kr.FUNCTION_ID_GET_MORPHED_TANGENT,kr.FUNCTION_SIGNATURE_GET_MORPHED_TANGENT,ie.VERTEX),e.addFunctionLines(kr.FUNCTION_ID_GET_MORPHED_TANGENT,["vec3 morphedTangent = tangent;"])}function ihe(e){e.addFunctionLines(kr.FUNCTION_ID_GET_MORPHED_POSITION,["return morphedPosition;"]),e.addFunctionLines(kr.FUNCTION_ID_GET_MORPHED_NORMAL,["return morphedNormal;"]),e.addFunctionLines(kr.FUNCTION_ID_GET_MORPHED_TANGENT,["return morphedTangent;"])}var EG=kr;var _G={name:"PickingPipelineStage"};_G.process=function(e,t,n){let i=n.context,o=e.runtimeNode,r=e.shaderBuilder,a=e.model,s=o.node.instances;if(e.hasPropertyTable)ohe(e,t,s,i);else if(c(s))rhe(e,i);else{let A=IG(e),l=i.createPickId(A);a._pipelineResources.push(l),a._pickIds.push(l),r.addUniform("vec4","czm_pickColor",ie.FRAGMENT);let d=e.uniformMap;d.czm_pickColor=function(){return l.color},e.pickId="czm_pickColor"}};function IG(e,t){let n=e.model;if(c(n.pickObject))return n.pickObject;let i={model:n,node:e.runtimeNode,primitive:e.runtimePrimitive},o;if(Do.is3DTiles(n.type)){let r=n.content;o={content:r,primitive:r.tileset,detail:i}}else o={primitive:n,detail:i};return o.id=n.id,c(t)&&(o.instanceId=t),o}function ohe(e,t,n){let i=e.model,o,r,a=i.featureIdLabel,s=i.instanceFeatureIdLabel;c(i.featureTableId)?o=i.featureTableId:c(n)?(r=tt.getFeatureIdsByLabel(n.featureIds,s),o=r.propertyTableId):(r=tt.getFeatureIdsByLabel(t.featureIds,a),o=r.propertyTableId);let A=i.featureTables[o];e.shaderBuilder.addUniform("sampler2D","model_pickTexture",ie.FRAGMENT);let d=A.batchTexture;e.uniformMap.model_pickTexture=function(){return d.pickTexture??d.defaultTexture},e.pickId="((selectedFeature.id < int(model_featuresLength)) ? texture(model_pickTexture, selectedFeature.st) : vec4(0.0))"}function rhe(e,t){let n=e.instanceCount,i=new Array(n),o=new Uint8Array(n*4),r=e.model,a=r._pipelineResources;for(let m=0;m<n;m++){let p=IG(e,m),g=t.createPickId(p);a.push(g),i[m]=g;let h=g.color;o[m*4+0]=J.floatToByte(h.red),o[m*4+1]=J.floatToByte(h.green),o[m*4+2]=J.floatToByte(h.blue),o[m*4+3]=J.floatToByte(h.alpha)}r._pickIds=i;let s=ut.createVertexBuffer({context:t,typedArray:o,usage:De.STATIC_DRAW});s.vertexArrayDestroyable=!1,r.statistics.addBuffer(s,!1),a.push(s);let l={index:e.attributeIndex++,vertexBuffer:s,componentsPerAttribute:4,componentDatatype:V.UNSIGNED_BYTE,normalize:!0,offsetInBytes:0,strideInBytes:0,instanceDivisor:1};e.attributes.push(l);let d=e.shaderBuilder;d.addDefine("USE_PICKING",void 0,ie.BOTH),d.addAttribute("vec4","a_pickColor"),d.addVarying("vec4","v_pickColor"),e.pickId="v_pickColor"}var yG=_G;var ahe={ADD:0,REPLACE:1},oo=Object.freeze(ahe);var bG=`float getPointSizeFromAttenuation(vec3 positionEC) {
  // Variables are packed into a single vector to minimize gl.uniformXXX() calls
  float pointSize = model_pointCloudParameters.x;
  float geometricError = model_pointCloudParameters.y;
  float depthMultiplier = model_pointCloudParameters.z;

  float depth = -positionEC.z;
  return min((geometricError / depth) * depthMultiplier, pointSize);
}

#ifdef HAS_POINT_CLOUD_SHOW_STYLE
float pointCloudShowStylingStage(in ProcessedAttributes attributes, in Metadata metadata) {
  float tiles3d_tileset_time = model_pointCloudParameters.w;
  return float(getShowFromStyle(attributes, metadata, tiles3d_tileset_time));
}
#endif

#ifdef HAS_POINT_CLOUD_COLOR_STYLE
vec4 pointCloudColorStylingStage(in ProcessedAttributes attributes, in Metadata metadata) {
  float tiles3d_tileset_time = model_pointCloudParameters.w;
  return getColorFromStyle(attributes, metadata, tiles3d_tileset_time);
}
#endif

#ifdef HAS_POINT_CLOUD_POINT_SIZE_STYLE
float pointCloudPointSizeStylingStage(in ProcessedAttributes attributes, in Metadata metadata) {
  float tiles3d_tileset_time = model_pointCloudParameters.w;
  return float(getPointSizeFromStyle(attributes, metadata, tiles3d_tileset_time));
}
#elif defined(HAS_POINT_CLOUD_ATTENUATION)
float pointCloudPointSizeStylingStage(in ProcessedAttributes attributes, in Metadata metadata) {
  return getPointSizeFromAttenuation(v_positionEC);
}
#endif

#ifdef HAS_POINT_CLOUD_BACK_FACE_CULLING
float pointCloudBackFaceCullingStage() {
  #if defined(HAS_NORMALS) && !defined(HAS_DOUBLE_SIDED_MATERIAL)
  // This needs to be computed in eye coordinates so we can't use attributes.normalMC
  return step(-v_normalEC.z, 0.0);
  #else
  return 1.0;
  #endif
}
#endif
`;var she=new re,xG={name:"PointCloudStylingPipelineStage"};xG.process=function(e,t,n){let i=e.shaderBuilder,o=e.model,r=o.style,a=o.structuralMetadata,s=c(a)?a.propertyAttributes:void 0,A=c(o.featureTableId)&&o.featureTables[o.featureTableId].featuresLength>0,l=!c(s)&&A;if(c(r)&&!l){let C=uhe(s),_=fhe(r,C);dhe(i,_);let b=hhe(_).indexOf("normalMC")>=0,x=tt.getAttributeBySemantic(t,Pe.NORMAL);if(b&&!x)throw new ae("Style references the NORMAL semantic but the point cloud does not have normals");i.addDefine("COMPUTE_POSITION_WC_STYLE",void 0,ie.VERTEX),_.styleTranslucent&&(e.alphaOptions.pass=He.TRANSLUCENT)}let d=o.pointCloudShading;d.attenuation&&i.addDefine("HAS_POINT_CLOUD_ATTENUATION",void 0,ie.VERTEX),d.backFaceCulling&&i.addDefine("HAS_POINT_CLOUD_BACK_FACE_CULLING",void 0,ie.VERTEX);let m,p,g;Do.is3DTiles(o.type)&&(p=!0,m=o.content,g=m.tile.refine===oo.ADD),i.addUniform("vec4","model_pointCloudParameters",ie.VERTEX),i.addVertexLines(bG);let h=e.uniformMap;h.model_pointCloudParameters=function(){let C=she,_=1;p&&(_=g?5:m.tileset.memoryAdjustedScreenSpaceError),C.x=d.maximumAttenuation??_,C.x*=n.pixelRatio;let I=che(e,t,d,m);C.y=I*d.geometricErrorScale;let b=n.context,x=n.camera.frustum,T;return n.mode===Ee.SCENE2D||x instanceof Tu?T=Number.POSITIVE_INFINITY:T=b.drawingBufferHeight/n.camera.frustum.sseDenominator,C.z=T,p&&(C.w=m.tileset.timeSinceLoad),C}};var BG=new f;function che(e,t,n,i){if(c(i)){let d=i.tile.geometricError;if(d>0)return d}if(c(n.baseResolution))return n.baseResolution;let o=tt.getAttributeBySemantic(t,Pe.POSITION),r=o.count,a=e.runtimeNode.transform,s=f.subtract(o.max,o.min,BG);s=Q.multiplyByPointAsVector(a,s,BG);let A=s.x*s.y*s.z;return S.cbrt(A/r)}var Ahe={colorStyleFunction:void 0,showStyleFunction:void 0,pointSizeStyleFunction:void 0,styleTranslucent:!1},lhe={POSITION:"attributes.positionMC",POSITION_ABSOLUTE:"v_positionWC",COLOR:"attributes.color_0",NORMAL:"attributes.normalMC"};function uhe(e){let t=Re(lhe);if(!c(e))return t;for(let n=0;n<e.length;n++){let o=e[n].properties;for(let r in o)o.hasOwnProperty(r)&&(t[r]=`metadata.${r}`)}return t}var dS="ProcessedAttributes attributes, Metadata metadata, float tiles3d_tileset_time";function fhe(e,t){let n=Ahe,i={translucent:!1};return n.colorStyleFunction=e.getColorShaderFunction(`getColorFromStyle(${dS})`,t,i),n.showStyleFunction=e.getShowShaderFunction(`getShowFromStyle(${dS})`,t,i),n.pointSizeStyleFunction=e.getPointSizeShaderFunction(`getPointSizeFromStyle(${dS})`,t,i),n.styleTranslucent=c(n.colorStyleFunction)&&i.translucent,n}function dhe(e,t){let n=t.colorStyleFunction;c(n)&&(e.addDefine("HAS_POINT_CLOUD_COLOR_STYLE",void 0,ie.BOTH),e.addVertexLines(n),e.addVarying("vec4","v_pointCloudColor"));let i=t.showStyleFunction;c(i)&&(e.addDefine("HAS_POINT_CLOUD_SHOW_STYLE",void 0,ie.BOTH),e.addVertexLines(i),e.addVarying("float","v_pointCloudShow"));let o=t.pointSizeStyleFunction;c(o)&&(e.addDefine("HAS_POINT_CLOUD_POINT_SIZE_STYLE",void 0,ie.VERTEX),e.addVertexLines(o))}function hS(e,t){let n=/attributes\.(\w+)/g,i=n.exec(e);for(;i!==null;){let o=i[1];t.indexOf(o)===-1&&t.push(o),i=n.exec(e)}}function hhe(e){let t=e.colorStyleFunction,n=e.showStyleFunction,i=e.pointSizeStyleFunction,o=[];return c(t)&&hS(t,o),c(n)&&hS(n,o),c(i)&&hS(i,o),o}var TG=xG;var SG=`void primitiveOutlineStage() {
    v_outlineCoordinates = a_outlineCoordinates;
}
`;var wG=`void primitiveOutlineStage(inout czm_modelMaterial material) {
    if (!model_showOutline) {
        return;
    }

    float outlineX = 
        texture(model_outlineTexture, vec2(v_outlineCoordinates.x, 0.5)).r;
    float outlineY = 
        texture(model_outlineTexture, vec2(v_outlineCoordinates.y, 0.5)).r;
    float outlineZ = 
        texture(model_outlineTexture, vec2(v_outlineCoordinates.z, 0.5)).r;
    float outlineness = max(outlineX, max(outlineY, outlineZ));

    material.diffuse = mix(material.diffuse, model_outlineColor.rgb, model_outlineColor.a * outlineness);
}

`;var DG={name:"PrimitiveOutlinePipelineStage"};DG.process=function(e,t,n){let i=e.shaderBuilder,o=e.uniformMap;i.addDefine("HAS_PRIMITIVE_OUTLINE",void 0,ie.BOTH),i.addAttribute("vec3","a_outlineCoordinates"),i.addVarying("vec3","v_outlineCoordinates");let r=t.outlineCoordinates,a={index:e.attributeIndex++,vertexBuffer:r.buffer,componentsPerAttribute:ct.getNumberOfComponents(r.type),componentDatatype:r.componentDatatype,offsetInBytes:r.byteOffset,strideInBytes:r.byteStride,normalize:r.normalized};e.attributes.push(a),i.addUniform("sampler2D","model_outlineTexture",ie.FRAGMENT);let s=RI.createTexture(n.context);o.model_outlineTexture=function(){return s};let A=e.model;i.addUniform("vec4","model_outlineColor",ie.FRAGMENT),o.model_outlineColor=function(){return A.outlineColor},i.addUniform("bool","model_showOutline",ie.FRAGMENT),o.model_showOutline=function(){return A.showOutline},i.addVertexLines(SG),i.addFragmentLines(wG)};var QG=DG;var RG={name:"PrimitiveStatisticsPipelineStage",_countGeometry:vG,_count2DPositions:MG,_countMorphTargetAttributes:PG,_countMaterialTextures:NG,_countFeatureIdTextures:LG,_countBinaryMetadata:FG};RG.process=function(e,t,n){let i=e.model,o=i.statistics;vG(o,t),MG(o,e.runtimePrimitive),PG(o,t),NG(o,t.material),LG(o,t.featureIds),FG(o,i)};function vG(e,t){let n=c(t.indices)?t.indices.count:tt.getAttributeBySemantic(t,"POSITION").count,i=t.primitiveType;i===Me.POINTS?e.pointsLength+=n:Me.isTriangles(i)&&(e.trianglesLength+=mhe(i,n));let o=t.attributes,r=o.length;for(let A=0;A<r;A++){let l=o[A];if(c(l.buffer)){let d=c(l.typedArray);e.addBuffer(l.buffer,d)}}let a=t.outlineCoordinates;c(a)&&c(a.buffer)&&e.addBuffer(a.buffer,!1);let s=t.indices;if(c(s)&&c(s.buffer)){let A=c(s.typedArray);e.addBuffer(s.buffer,A)}}function mhe(e,t){switch(e){case Me.TRIANGLES:return t/3;case Me.TRIANGLE_STRIP:case Me.TRIANGLE_FAN:return Math.max(t-2,0);default:return 0}}function MG(e,t){let n=t.positionBuffer2D;c(n)&&e.addBuffer(n,!0)}function PG(e,t){let n=t.morphTargets;if(!c(n))return;let i=!1,o=n.length;for(let r=0;r<o;r++){let a=n[r].attributes,s=a.length;for(let A=0;A<s;A++){let l=a[A];c(l.buffer)&&e.addBuffer(l.buffer,i)}}}function NG(e,t){let n=phe(t),i=n.length;for(let o=0;o<i;o++){let r=n[o];c(r)&&c(r.texture)&&e.addTexture(r.texture)}}function phe(e){let t=e.metallicRoughness,n=[e.emissiveTexture,e.normalTexture,e.occlusionTexture,t.baseColorTexture,t.metallicRoughnessTexture],i=e.specularGlossiness;return c(i)&&(n.push(i.diffuseTexture),n.push(i.specularGlossinessTexture)),n}function LG(e,t){let n=t.length;for(let i=0;i<n;i++){let o=t[i];if(o instanceof Rt.FeatureIdTexture){let r=o.textureReader;c(r.texture)&&e.addTexture(r.texture)}}}function FG(e,t){let n=t.structuralMetadata;c(n)&&(ghe(e,n),e.propertyTablesByteLength+=n.propertyTablesByteLength);let i=t.featureTables;if(!c(i))return;let o=i.length;for(let r=0;r<o;r++){let a=i[r];e.addBatchTexture(a.batchTexture)}}function ghe(e,t){let n=t.propertyTextures;if(!c(n))return;let i=n.length;for(let o=0;o<i;o++){let a=n[o].properties;for(let s in a)if(a.hasOwnProperty(s)){let l=a[s].textureReader;c(l.texture)&&e.addTexture(l.texture)}}}var OG=RG;var Che=new Q,Ehe=new Q,kG={name:"SceneMode2DPipelineStage"};kG.process=function(e,t,n){let i=tt.getAttributeBySemantic(t,Pe.POSITION),o=e.shaderBuilder,r=e.model,a=r.sceneGraph.computedModelMatrix,s=e.runtimeNode.computedTransform,A=Q.multiplyTransformation(a,s,Che),l=yhe(e,A,n),d=e.runtimePrimitive;d.boundingSphere2D=l;let m=e.runtimeNode.node.instances;if(c(m))return;if(c(i.typedArray)){let C=xhe(i,A,l,n);d.positionBuffer2D=C,r._modelResources.push(C),i.typedArray=void 0}o.addDefine("USE_2D_POSITIONS",void 0,ie.VERTEX),o.addUniform("mat4","u_modelView2D",ie.VERTEX);let p=Q.fromTranslation(l.center,new Q),g=n.context,h={u_modelView2D:function(){return Q.multiplyTransformation(g.uniformState.view,p,Ehe)}};e.uniformMap=dt(h,e.uniformMap)};var _he=new f,Ihe=new f;function yhe(e,t,n){let i=Q.multiplyByPoint(t,e.positionMin,_he),o=Fn.computeActualEllipsoidPosition(n,i,i),r=Q.multiplyByPoint(t,e.positionMax,Ihe),a=Fn.computeActualEllipsoidPosition(n,r,r);return le.fromCornerPoints(o,a,new le)}var UG=new f;function bhe(e,t){let n=e.length,i=new Float32Array(n),o=t.quantizedVolumeOffset,r=t.quantizedVolumeStepSize;for(let a=0;a<n;a+=3){let s=f.fromArray(e,a,UG),A=f.multiplyComponents(s,r,s),l=f.add(A,o,A);i[a]=l.x,i[a+1]=l.y,i[a+2]=l.z}return i}function Bhe(e,t,n,i){let o;c(e.quantization)?o=bhe(e.typedArray,e.quantization):o=e.typedArray.slice();let r=e.byteOffset/Float32Array.BYTES_PER_ELEMENT,a=o.length,s=c(e.byteStride)?e.byteStride/Float32Array.BYTES_PER_ELEMENT:3;for(let A=r;A<a;A+=s){let l=f.fromArray(o,A,UG);if(isNaN(l.x)||isNaN(l.y)||isNaN(l.z))continue;let d=Q.multiplyByPoint(t,l,l),m=Fn.computeActualEllipsoidPosition(i,d,d),p=f.subtract(m,n,m);o[A]=p.x,o[A+1]=p.y,o[A+2]=p.z}return o}function xhe(e,t,n,i){let o=Re(i);o.mode=Ee.COLUMBUS_VIEW;let r=n.center,a=Bhe(e,t,r,o),s=ut.createVertexBuffer({context:i.context,typedArray:a,usage:De.STATIC_DRAW});return s.vertexArrayDestroyable=!1,s}var zG=kG;var GG=`void skinningStage(inout ProcessedAttributes attributes) 
{
    mat4 skinningMatrix = getSkinningMatrix();
    mat3 skinningMatrixMat3 = mat3(skinningMatrix);

    vec4 positionMC = vec4(attributes.positionMC, 1.0);
    attributes.positionMC = vec3(skinningMatrix * positionMC);

    #ifdef HAS_NORMALS
    vec3 normalMC = attributes.normalMC;
    attributes.normalMC = skinningMatrixMat3 * normalMC;
    #endif

    #ifdef HAS_TANGENTS
    vec3 tangentMC = attributes.tangentMC;
    attributes.tangentMC = skinningMatrixMat3 * tangentMC;
    #endif
}`;var Sd={name:"SkinningPipelineStage",FUNCTION_ID_GET_SKINNING_MATRIX:"getSkinningMatrix",FUNCTION_SIGNATURE_GET_SKINNING_MATRIX:"mat4 getSkinningMatrix()"};Sd.process=function(e,t){let n=e.shaderBuilder;n.addDefine("HAS_SKINNING",void 0,ie.VERTEX),She(n,t);let i=e.runtimeNode,o=i.computedJointMatrices;n.addUniform("mat4",`u_jointMatrices[${o.length}]`,ie.VERTEX),n.addVertexLines(GG);let r={u_jointMatrices:function(){return i.computedJointMatrices}};e.uniformMap=dt(r,e.uniformMap)};function The(e){let t=-1,n=e.attributes,i=n.length;for(let o=0;o<i;o++){let r=n[o];(r.semantic===Pe.JOINTS||r.semantic===Pe.WEIGHTS)&&(t=Math.max(t,r.setIndex))}return t}function She(e,t){e.addFunction(Sd.FUNCTION_ID_GET_SKINNING_MATRIX,Sd.FUNCTION_SIGNATURE_GET_SKINNING_MATRIX,ie.VERTEX),e.addFunctionLines(Sd.FUNCTION_ID_GET_SKINNING_MATRIX,["mat4 skinnedMatrix = mat4(0);"]);let i,o,r=["x","y","z","w"],a=The(t);for(i=0;i<=a;i++)for(o=0;o<=3;o++){let A=r[o],l=`skinnedMatrix += a_weights_${i}.${A} * u_jointMatrices[int(a_joints_${i}.${A})];`;e.addFunctionLines(Sd.FUNCTION_ID_GET_SKINNING_MATRIX,[l])}e.addFunctionLines(Sd.FUNCTION_ID_GET_SKINNING_MATRIX,["return skinnedMatrix;"])}var HG=Sd;var VG=`void verticalExaggerationStage(
  inout ProcessedAttributes attributes
) {
  // Compute the distance from the camera to the local center of curvature.
  vec4 vertexPositionENU = czm_modelToEnu * vec4(attributes.positionMC, 1.0);
  vec2 vertexAzimuth = normalize(vertexPositionENU.xy);
  // Curvature = 1 / radius of curvature.
  float azimuthalCurvature = dot(vertexAzimuth * vertexAzimuth, czm_eyeEllipsoidCurvature);
  float eyeToCenter = 1.0 / azimuthalCurvature + czm_eyeHeight;

  // Compute the approximate ellipsoid normal at the vertex position.
  // Uses a circular approximation for the Earth curvature along the geodesic.
  vec3 vertexPositionEC = (czm_modelView * vec4(attributes.positionMC, 1.0)).xyz;
  vec3 centerToVertex = eyeToCenter * czm_eyeEllipsoidNormalEC + vertexPositionEC;
  vec3 vertexNormal = normalize(centerToVertex);

  // Estimate the (sine of the) angle between the camera direction and the vertex normal
  float verticalDistance = dot(vertexPositionEC, czm_eyeEllipsoidNormalEC);
  float horizontalDistance = length(vertexPositionEC - verticalDistance * czm_eyeEllipsoidNormalEC);
  float sinTheta = horizontalDistance / (eyeToCenter + verticalDistance);
  bool isSmallAngle = clamp(sinTheta, 0.0, 0.05) == sinTheta;

  // Approximate the change in height above the ellipsoid, from camera to vertex position.
  float exactVersine = 1.0 - dot(czm_eyeEllipsoidNormalEC, vertexNormal);
  float smallAngleVersine = 0.5 * sinTheta * sinTheta;
  float versine = isSmallAngle ? smallAngleVersine : exactVersine;
  float dHeight = dot(vertexPositionEC, vertexNormal) - eyeToCenter * versine;
  float vertexHeight = czm_eyeHeight + dHeight;

  // Transform the approximate vertex normal to model coordinates.
  vec3 vertexNormalMC = (czm_inverseModelView * vec4(vertexNormal, 0.0)).xyz;
  vertexNormalMC = normalize(vertexNormalMC);

  // Compute the exaggeration and apply it along the approximate vertex normal.
  float stretch = u_verticalExaggerationAndRelativeHeight.x;
  float shift = u_verticalExaggerationAndRelativeHeight.y;
  float exaggeration = (vertexHeight - shift) * (stretch - 1.0);
  attributes.positionMC += exaggeration * vertexNormalMC;
}
`;var jG={name:"VerticalExaggerationPipelineStage"},whe=new L;jG.process=function(e,t,n){let{shaderBuilder:i,uniformMap:o}=e;i.addVertexLines(VG),i.addDefine("HAS_VERTICAL_EXAGGERATION",void 0,ie.VERTEX),i.addUniform("vec2","u_verticalExaggerationAndRelativeHeight",ie.VERTEX),o.u_verticalExaggerationAndRelativeHeight=function(){return L.fromElements(n.verticalExaggeration,n.verticalExaggerationRelativeHeight,whe)}};var YG=jG;var mS={};function Dhe(e){let t=Ge.createTypedArray(e,e*2),n=e,i=0;for(let o=0;o<n;o+=3)t[i++]=o,t[i++]=o+1,t[i++]=o+1,t[i++]=o+2,t[i++]=o+2,t[i++]=o;return t}function Qhe(e,t){let n=t.length,i=Ge.createTypedArray(e,n*2),o=0;for(let r=0;r<n;r+=3){let a=t[r],s=t[r+1],A=t[r+2];i[o++]=a,i[o++]=s,i[o++]=s,i[o++]=A,i[o++]=A,i[o++]=a}return i}function Rhe(e){let t=e-2,n=2+t*4,i=Ge.createTypedArray(e,n),o=0;i[o++]=0,i[o++]=1;for(let r=0;r<t;r++)i[o++]=r+1,i[o++]=r+2,i[o++]=r+2,i[o++]=r;return i}function vhe(e,t){let i=t.length-2,o=2+i*4,r=Ge.createTypedArray(e,o),a=0;r[a++]=t[0],r[a++]=t[1];for(let s=0;s<i;s++){let A=t[s],l=t[s+1],d=t[s+2];r[a++]=l,r[a++]=d,r[a++]=d,r[a++]=A}return r}function Mhe(e){let t=e-2,n=2+t*4,i=Ge.createTypedArray(e,n),o=0;i[o++]=0,i[o++]=1;for(let r=0;r<t;r++)i[o++]=r+1,i[o++]=r+2,i[o++]=r+2,i[o++]=0;return i}function Phe(e,t){let i=t.length-2,o=2+i*4,r=Ge.createTypedArray(e,o),a=0,s=t[0];r[a++]=s,r[a++]=t[1];for(let A=0;A<i;A++){let l=t[A+1],d=t[A+2];r[a++]=l,r[a++]=d,r[a++]=d,r[a++]=s}return r}mS.createWireframeIndices=function(e,t,n){let i=c(n);if(e===Me.TRIANGLES)return i?Qhe(t,n):Dhe(t);if(e===Me.TRIANGLE_STRIP)return i?vhe(t,n):Rhe(t);if(e===Me.TRIANGLE_FAN)return i?Phe(t,n):Mhe(t)};mS.getWireframeIndicesCount=function(e,t){return e===Me.TRIANGLES?t*2:e===Me.TRIANGLE_STRIP||e===Me.TRIANGLE_FAN?2+(t-2)*4:t};var pS=mS;var WG={name:"WireframePipelineStage"};WG.process=function(e,t,n){e.shaderBuilder.addDefine("HAS_WIREFRAME",void 0,ie.FRAGMENT);let o=e.model,r=Nhe(t,e.indices,n);o._pipelineResources.push(r),e.wireframeIndexBuffer=r,o.statistics.addBuffer(r,!1);let s=e.primitiveType,A=e.count;e.primitiveType=Me.LINES,e.count=pS.getWireframeIndicesCount(s,A)};function Nhe(e,t,n){let o=tt.getAttributeBySemantic(e,Pe.POSITION).count,r=n.context.webgl2,a;if(c(t)){let d=t.buffer,m=t.count;c(d)&&r?(a=d.sizeInBytes===m?new Uint8Array(m):Ge.createTypedArray(o,m),d.getBufferData(a)):a=t.typedArray}let s=e.primitiveType,A=pS.createWireframeIndices(s,o,a),l=Ge.fromSizeInBytes(A.BYTES_PER_ELEMENT);return ut.createIndexBuffer({context:n.context,typedArray:A,usage:De.STATIC_DRAW,indexDatatype:l})}var qG=WG;function JG(e){e=e??G.EMPTY_OBJECT;let t=e.primitive,n=e.node,i=e.model;this.primitive=t,this.node=n,this.model=i,this.pipelineStages=[],this.drawCommand=void 0,this.boundingSphere=void 0,this.boundingSphere2D=void 0,this.positionBuffer2D=void 0,this.batchLengths=void 0,this.batchOffsets=void 0,this.updateStages=[]}JG.prototype.configurePipeline=function(e){let t=this.pipelineStages;t.length=0;let n=this.primitive,i=this.node,o=this.model,r=o.customShader,a=o.style,s=e.context.webgl2,l=e.mode!==Ee.SCENE3D&&!e.scene3DOnly&&o._projectTo2D,d=e.verticalExaggeration!==1&&o.hasVerticalExaggeration,m=c(n.morphTargets)&&n.morphTargets.length>0,p=c(i.skin),g=c(o.imageryLayers),h=c(r),_=!(h&&c(r.fragmentShaderText))||r.mode!==jI.REPLACE_MATERIAL,I=tt.hasQuantizedAttributes(n.attributes),b=o.debugWireframe&&Me.isTriangles(n.primitiveType)&&(o._enableDebugWireframe||s),x=o.pointCloudShading,T=c(x)&&x.attenuation,w=c(x)&&x.backFaceCulling,R=n.primitiveType===Me.POINTS&&(c(a)||T||w),z=o._enableShowOutline&&c(n.outlineCoordinates),M=Lhe(o,i,n),N=c(o.classificationType);l&&t.push(zG),t.push(hz),b&&t.push(qG),N&&t.push(U3),m&&t.push(EG),p&&t.push(HG),R&&t.push(TG),I&&t.push(Az),g&&(z?Nn("outlines-and-draping","Primitive outlines disable imagery draping"):t.push(sG)),_&&t.push(pG),t.push(Xg),t.push(Ol),t.push(gG),M.hasPropertyTable&&(t.push(eC),t.push(O3),t.push(V3)),d&&t.push(YG),h&&t.push(sz),t.push(lG),o.allowPicking&&t.push(yG),z&&t.push(QG),t.push(L3),t.push(OG)};function Lhe(e,t,n){let i;return c(t.instances)&&(i=tt.getFeatureIdsByLabel(t.instances.featureIds,e.instanceFeatureIdLabel),c(i))?{hasFeatureIds:!0,hasPropertyTable:c(i.propertyTableId)}:(i=tt.getFeatureIdsByLabel(n.featureIds,e.featureIdLabel),c(i)?{hasFeatureIds:!0,hasPropertyTable:c(i.propertyTableId)}:{hasFeatureIds:!1,hasPropertyTable:!1})}var KG=JG;function gS(e){e=e??G.EMPTY_OBJECT,this._sceneGraph=e.sceneGraph;let t=e.skin;this._skin=t,this._inverseBindMatrices=void 0,this._joints=[],this._jointMatrices=[],Fhe(this)}Object.defineProperties(gS.prototype,{skin:{get:function(){return this._skin}},sceneGraph:{get:function(){return this._sceneGraph}},inverseBindMatrices:{get:function(){return this._inverseBindMatrices}},joints:{get:function(){return this._joints}},jointMatrices:{get:function(){return this._jointMatrices}}});function Fhe(e){let t=e.skin,n=t.inverseBindMatrices;e._inverseBindMatrices=n;let i=t.joints,o=i.length,r=e.sceneGraph._runtimeNodes,a=e.joints,s=e._jointMatrices;for(let A=0;A<o;A++){let l=i[A].index,d=r[l];a.push(d);let m=n[A],p=XG(d,m,new Q);s.push(p)}}function XG(e,t,n){let i=Q.multiplyTransformation(e.transformToRoot,e.transform,n);return n=Q.multiplyTransformation(i,t,n),n}gS.prototype.updateJointMatrices=function(){let e=this._jointMatrices,t=e.length;for(let n=0;n<t;n++){let i=this.joints[n],o=this.inverseBindMatrices[n];e[n]=XG(i,o,e[n])}};var ZG=gS;function Ohe(){this.pass=void 0,this.alphaCutoff=void 0}var sy=Ohe;function khe(e){this.shaderBuilder=new A_,this.model=e,this.uniformMap={},this.alphaOptions=new sy,this.renderStateOptions=At.getState(At.fromCache({depthTest:{enabled:!0,func:ga.LESS_OR_EQUAL}})),this.hasSilhouette=!1,this.hasSkipLevelOfDetail=!1,this.nodeRenderResources=[]}var $G=khe;var e8=`void silhouetteStage(inout vec4 color) {
    if(model_silhouettePass) {
        color = czm_gammaCorrect(model_silhouetteColor);
    }
}`;var t8=`void silhouetteStage(in ProcessedAttributes attributes, inout vec4 positionClip) {
     #ifdef HAS_NORMALS
     if(model_silhouettePass) {
          vec3 normal = normalize(czm_normal3D * attributes.normalMC);
          normal.x *= czm_projection[0][0];
          normal.y *= czm_projection[1][1];
          positionClip.xy += normal.xy * positionClip.w * model_silhouetteSize * czm_pixelRatio / czm_viewport.z;
    }
    #endif
}
`;var cy={name:"ModelSilhouettePipelineStage"};cy.silhouettesLength=0;cy.process=function(e,t,n){c(t._silhouetteId)||(t._silhouetteId=++cy.silhouettesLength);let i=e.shaderBuilder;i.addDefine("HAS_SILHOUETTE",void 0,ie.BOTH),i.addVertexLines(t8),i.addFragmentLines(e8),i.addUniform("vec4","model_silhouetteColor",ie.FRAGMENT),i.addUniform("float","model_silhouetteSize",ie.VERTEX),i.addUniform("bool","model_silhouettePass",ie.BOTH);let o={model_silhouetteColor:function(){return t.silhouetteColor},model_silhouetteSize:function(){return t.silhouetteSize},model_silhouettePass:function(){return!1}};e.uniformMap=dt(o,e.uniformMap),e.hasSilhouette=!0};var n8=cy;var i8=`void modelSplitterStage()
{
    // Don't split when rendering the shadow map, because it is rendered from
    // the perspective of a totally different camera.
#ifndef SHADOW_MAP
    if (model_splitDirection < 0.0 && gl_FragCoord.x > czm_splitPosition) discard;
    if (model_splitDirection > 0.0 && gl_FragCoord.x < czm_splitPosition) discard;
#endif
}
`;var Ay={name:"ModelSplitterPipelineStage",SPLIT_DIRECTION_UNIFORM_NAME:"model_splitDirection"};Ay.process=function(e,t,n){let i=e.shaderBuilder;i.addDefine("HAS_MODEL_SPLITTER",void 0,ie.FRAGMENT),i.addFragmentLines(i8);let o={};i.addUniform("float",Ay.SPLIT_DIRECTION_UNIFORM_NAME,ie.FRAGMENT),o[Ay.SPLIT_DIRECTION_UNIFORM_NAME]=function(){return t.splitDirection},e.uniformMap=dt(o,e.uniformMap)};var o8=Ay;function Uhe(e,t){this.model=e.model,this.shaderBuilder=e.shaderBuilder.clone(),this.uniformMap=Re(e.uniformMap),this.alphaOptions=Re(e.alphaOptions),this.renderStateOptions=Re(e.renderStateOptions,!0),this.hasSilhouette=e.hasSilhouette,this.hasSkipLevelOfDetail=e.hasSkipLevelOfDetail,this.runtimeNode=t,this.attributes=[],this.attributeIndex=1,this.featureIdVertexAttributeSetIndex=0,this.instanceCount=0,this.primitiveRenderResources=[]}var r8=Uhe;function zhe(e){e=e??G.EMPTY_OBJECT,this.lightingModel=e.lightingModel??Td.UNLIT}var a8=zhe;function Ghe(e,t){this.model=e.model,this.runtimeNode=e.runtimeNode,this.attributes=e.attributes.slice(),this.attributeIndex=e.attributeIndex,this.featureIdVertexAttributeSetIndex=e.featureIdVertexAttributeSetIndex,this.uniformMap=Re(e.uniformMap),this.alphaOptions=Re(e.alphaOptions),this.renderStateOptions=Re(e.renderStateOptions,!0),this.hasSilhouette=e.hasSilhouette,this.hasSkipLevelOfDetail=e.hasSkipLevelOfDetail,this.shaderBuilder=e.shaderBuilder.clone(),this.instanceCount=e.instanceCount,this.runtimePrimitive=t;let n=t.primitive;this.count=c(n.indices)?n.indices.count:tt.getAttributeBySemantic(n,"POSITION").count,this.hasPropertyTable=!1,this.indices=n.indices,this.wireframeIndexBuffer=void 0,this.primitiveType=n.primitiveType;let i=tt.getPositionMinMax(n,this.runtimeNode.instancingTranslationMin,this.runtimeNode.instancingTranslationMax);this.positionMin=f.clone(i.min,new f),this.positionMax=f.clone(i.max,new f),this.boundingSphere=le.fromCornerPoints(this.positionMin,this.positionMax,new le),this.lightingOptions=new a8,this.pickId=void 0}var s8=Ghe;function ES(e){e=e??G.EMPTY_OBJECT;let t=e.command,n=e.primitiveRenderResources,i=n.model;this._command=t,this._model=i,this._runtimePrimitive=n.runtimePrimitive,this._modelMatrix=t.modelMatrix,this._boundingVolume=t.boundingVolume,this._cullFace=t.renderState.cull.face;let o=i.classificationType;this._classificationType=o,this._classifiesTerrain=o!==wn.CESIUM_3D_TILE,this._classifies3DTiles=o!==wn.TERRAIN,this._useDebugWireframe=i._enableDebugWireframe&&i.debugWireframe,this._pickId=n.pickId,this._commandListTerrain=[],this._commandList3DTiles=[],this._commandListIgnoreShow=[],this._commandListDebugWireframe=[],this._commandListTerrainPicking=[],this._commandList3DTilesPicking=[],Yhe(this)}function Hhe(e){return{colorMask:{red:!1,green:!1,blue:!1,alpha:!1},stencilTest:{enabled:!0,frontFunction:e,frontOperation:{fail:nt.KEEP,zFail:nt.DECREMENT_WRAP,zPass:nt.KEEP},backFunction:e,backOperation:{fail:nt.KEEP,zFail:nt.INCREMENT_WRAP,zPass:nt.KEEP},reference:wt.CESIUM_3D_TILE_MASK,mask:wt.CESIUM_3D_TILE_MASK},stencilMask:wt.CLASSIFICATION_MASK,depthTest:{enabled:!0,func:ga.LESS_OR_EQUAL},depthMask:!1}}var Vhe={stencilTest:{enabled:!0,frontFunction:Dn.NOT_EQUAL,frontOperation:{fail:nt.ZERO,zFail:nt.ZERO,zPass:nt.ZERO},backFunction:Dn.NOT_EQUAL,backOperation:{fail:nt.ZERO,zFail:nt.ZERO,zPass:nt.ZERO},reference:0,mask:wt.CLASSIFICATION_MASK},stencilMask:wt.CLASSIFICATION_MASK,depthTest:{enabled:!1},depthMask:!1,blending:Pn.PRE_MULTIPLIED_ALPHA_BLEND},jhe={stencilTest:{enabled:!0,frontFunction:Dn.NOT_EQUAL,frontOperation:{fail:nt.ZERO,zFail:nt.ZERO,zPass:nt.ZERO},backFunction:Dn.NOT_EQUAL,backOperation:{fail:nt.ZERO,zFail:nt.ZERO,zPass:nt.ZERO},reference:0,mask:wt.CLASSIFICATION_MASK},stencilMask:wt.CLASSIFICATION_MASK,depthTest:{enabled:!1},depthMask:!1},l8=[];function Yhe(e){let t=e._command,n=l8;if(e._useDebugWireframe){t.pass=He.OPAQUE,n.length=0,n.push(t),e._commandListDebugWireframe=aC(e,n,e._commandListDebugWireframe);let r=e._commandListDebugWireframe,a=r.length;for(let s=0;s<a;s++){let A=r[s];A.count*=2,A.offset*=2}return}let o=e.model.allowPicking;if(e._classifiesTerrain){let r=He.TERRAIN_CLASSIFICATION,a=CS(t,r),s=c8(t,r);n.length=0,n.push(a,s),e._commandListTerrain=aC(e,n,e._commandListTerrain),o&&(e._commandListTerrainPicking=A8(e,n,e._commandListTerrainPicking))}if(e._classifies3DTiles){let r=He.CESIUM_3D_TILE_CLASSIFICATION,a=CS(t,r),s=c8(t,r);n.length=0,n.push(a,s),e._commandList3DTiles=aC(e,n,e._commandList3DTiles),o&&(e._commandList3DTilesPicking=A8(e,n,e._commandList3DTilesPicking))}}function aC(e,t,n){let i=e._runtimePrimitive,o=i.batchLengths,r=i.batchOffsets,a=o.length,s=t.length;for(let A=0;A<a;A++){let l=o[A],d=r[A];for(let m=0;m<s;m++){let p=t[m],g=ft.shallowClone(p);g.count=l,g.offset=d,n.push(g)}}return n}function CS(e,t){let n=ft.shallowClone(e);n.cull=!1,n.pass=t;let i=t===He.TERRAIN_CLASSIFICATION?Dn.ALWAYS:Dn.EQUAL,o=Hhe(i);return n.renderState=At.fromCache(o),n}function c8(e,t){let n=ft.shallowClone(e);return n.cull=!1,n.pass=t,n.renderState=At.fromCache(Vhe),n}var Whe=[];function A8(e,t,n){let i=At.fromCache(jhe),o=t[0],r=t[1],a=ft.shallowClone(o);a.cull=!0,a.pickOnly=!0;let s=ft.shallowClone(r);s.cull=!0,s.pickOnly=!0,s.renderState=i,s.pickId=e._pickId;let A=Whe;return A.length=0,A.push(a,s),aC(e,A,n)}Object.defineProperties(ES.prototype,{command:{get:function(){return this._command}},runtimePrimitive:{get:function(){return this._runtimePrimitive}},batchLengths:{get:function(){return this._runtimePrimitive.batchLengths}},batchOffsets:{get:function(){return this._runtimePrimitive.batchOffsets}},model:{get:function(){return this._model}},classificationType:{get:function(){return this._classificationType}},modelMatrix:{get:function(){return this._modelMatrix},set:function(e){this._modelMatrix=Q.clone(e,this._modelMatrix);let t=this._runtimePrimitive.boundingSphere;this._boundingVolume=le.transform(t,this._modelMatrix,this._boundingVolume)}},boundingVolume:{get:function(){return this._boundingVolume}},cullFace:{get:function(){return this._cullFace},set:function(e){this._cullFace=e}}});ES.prototype.pushCommands=function(e,t){let n=e.passes;if(n.render){if(this._useDebugWireframe){Mn(t,this._commandListDebugWireframe);return}if(this._classifiesTerrain&&Mn(t,this._commandListTerrain),this._classifies3DTiles&&Mn(t,this._commandList3DTiles),e.invertClassification&&this._classifies3DTiles){if(this._commandListIgnoreShow.length===0){let o=He.CESIUM_3D_TILE_CLASSIFICATION_IGNORE_SHOW,r=CS(this._command,o),a=l8;a.length=0,a.push(r),this._commandListIgnoreShow=aC(this,a,this._commandListIgnoreShow)}Mn(t,this._commandListIgnoreShow)}}return n.pick&&(this._classifiesTerrain&&Mn(t,this._commandListTerrainPicking),this._classifies3DTiles&&Mn(t,this._commandList3DTilesPicking)),t};var u8=ES;function ly(e){e=e??G.EMPTY_OBJECT;let t=e.command,n=e.primitiveRenderResources,i=n.model;this._model=i;let o=n.runtimePrimitive;this._runtimePrimitive=o;let r=t.pass===He.TRANSLUCENT,s=!o.primitive.material.doubleSided&&!r,A=n.hasSilhouette,l=!r&&!A,d=n.hasSkipLevelOfDetail&&!r,m=A;this._command=t,this._modelMatrix=Q.clone(t.modelMatrix),this._boundingVolume=le.clone(t.boundingVolume),this._modelMatrix2D=new Q,this._boundingVolume2D=new le,this._modelMatrix2DDirty=!1,this._backFaceCulling=t.renderState.cull.enabled,this._cullFace=t.renderState.cull.face,this._shadows=i.shadows,this._debugShowBoundingVolume=t.debugShowBoundingVolume,this._usesBackFaceCulling=s,this._needsTranslucentCommand=l,this._needsSkipLevelOfDetailCommands=d,this._needsSilhouetteCommands=m,this._originalCommand=void 0,this._translucentCommand=void 0,this._skipLodBackfaceCommand=void 0,this._skipLodStencilCommand=void 0,this._silhouetteModelCommand=void 0,this._silhouetteColorCommand=void 0,this._derivedCommands=[],this._has2DCommands=!1,qhe(this)}function zl(e){this.command=e.command,this.updateShadows=e.updateShadows,this.updateBackFaceCulling=e.updateBackFaceCulling,this.updateCullFace=e.updateCullFace,this.updateDebugShowBoundingVolume=e.updateDebugShowBoundingVolume,this.is2D=e.is2D??!1,this.derivedCommand2D=void 0}zl.clone=function(e){return new zl({command:e.command,updateShadows:e.updateShadows,updateBackFaceCulling:e.updateBackFaceCulling,updateCullFace:e.updateCullFace,updateDebugShowBoundingVolume:e.updateDebugShowBoundingVolume,is2D:e.is2D,derivedCommand2D:e.derivedCommand2D})};function qhe(e){let t=e._command;t.modelMatrix=e._modelMatrix,t.boundingVolume=e._boundingVolume;let n=e._model,i=e._usesBackFaceCulling,o=e._derivedCommands;e._originalCommand=new zl({command:t,updateShadows:!0,updateBackFaceCulling:i,updateCullFace:i,updateDebugShowBoundingVolume:!0,is2D:!1}),o.push(e._originalCommand),e._needsTranslucentCommand&&(e._translucentCommand=new zl({command:tme(t),updateShadows:!0,updateBackFaceCulling:!1,updateCullFace:!1,updateDebugShowBoundingVolume:!0}),o.push(e._translucentCommand)),e._needsSkipLevelOfDetailCommands&&(e._skipLodBackfaceCommand=new zl({command:sme(t),updateShadows:!1,updateBackFaceCulling:!1,updateCullFace:i,updateDebugShowBoundingVolume:!1}),e._skipLodStencilCommand=new zl({command:cme(t,n),updateShadows:!0,updateBackFaceCulling:i,updateCullFace:i,updateDebugShowBoundingVolume:!0}),o.push(e._skipLodBackfaceCommand),o.push(e._skipLodStencilCommand)),e._needsSilhouetteCommands&&(e._silhouetteModelCommand=new zl({command:nme(t,n),updateShadows:!0,updateBackFaceCulling:i,updateCullFace:i,updateDebugShowBoundingVolume:!0}),e._silhouetteColorCommand=new zl({command:ime(t,n),updateShadows:!1,updateBackFaceCulling:!1,updateCullFace:!1,updateDebugShowBoundingVolume:!1}),o.push(e._silhouetteModelCommand),o.push(e._silhouetteColorCommand))}Object.defineProperties(ly.prototype,{command:{get:function(){return this._command}},runtimePrimitive:{get:function(){return this._runtimePrimitive}},model:{get:function(){return this._model}},primitiveType:{get:function(){return this._command.primitiveType}},modelMatrix:{get:function(){return this._modelMatrix},set:function(e){this._modelMatrix=Q.clone(e,this._modelMatrix),this._modelMatrix2DDirty=!0,this._boundingVolume=le.transform(this.runtimePrimitive.boundingSphere,this._modelMatrix,this._boundingVolume)}},boundingVolume:{get:function(){return this._boundingVolume}},shadows:{get:function(){return this._shadows},set:function(e){this._shadows=e,Khe(this)}},backFaceCulling:{get:function(){return this._backFaceCulling},set:function(e){this._backFaceCulling!==e&&(this._backFaceCulling=e,Xhe(this))}},cullFace:{get:function(){return this._cullFace},set:function(e){this._cullFace!==e&&(this._cullFace=e,Zhe(this))}},debugShowBoundingVolume:{get:function(){return this._debugShowBoundingVolume},set:function(e){this._debugShowBoundingVolume!==e&&(this._debugShowBoundingVolume=e,$he(this))}}});function Jhe(e,t){let n=e._modelMatrix;e._modelMatrix2D=Q.clone(n,e._modelMatrix2D),e._modelMatrix2D[13]-=S.sign(n[13])*2*S.PI*t.mapProjection.ellipsoid.maximumRadius,e._boundingVolume2D=le.transform(e.runtimePrimitive.boundingSphere,e._modelMatrix2D,e._boundingVolume2D)}function Khe(e){let t=e.shadows,n=Yo.castShadows(t),i=Yo.receiveShadows(t),o=e._derivedCommands;for(let r=0;r<o.length;++r){let a=o[r];if(a.updateShadows){let s=a.command;s.castShadows=n,s.receiveShadows=i}}}function Xhe(e){let t=e.backFaceCulling,n=e._derivedCommands;for(let i=0;i<n.length;++i){let o=n[i];if(o.updateBackFaceCulling){let r=o.command,a=Re(r.renderState,!0);a.cull.enabled=t,r.renderState=At.fromCache(a)}}}function Zhe(e){let t=e.cullFace,n=e._derivedCommands;for(let i=0;i<n.length;++i){let o=n[i];if(o.updateCullFace){let r=o.command,a=Re(r.renderState,!0);a.cull.face=t,r.renderState=At.fromCache(a)}}}function $he(e){let t=e.debugShowBoundingVolume,n=e._derivedCommands;for(let i=0;i<n.length;++i){let o=n[i];if(o.updateDebugShowBoundingVolume){let r=o.command;r.debugShowBoundingVolume=t}}}ly.prototype.pushCommands=function(e,t){let n=f8(this,e);n&&!this._has2DCommands&&(eme(this),this._has2DCommands=!0,this._modelMatrix2DDirty=!0),this._modelMatrix2DDirty&&(Jhe(this,e),this._modelMatrix2DDirty=!1);let i=this.model.styleCommandsNeeded;if(!(this._needsTranslucentCommand&&c(i)&&(i!==lf.ALL_OPAQUE&&Em(t,this._translucentCommand,n),i===lf.ALL_TRANSLUCENT))){if(this._needsSkipLevelOfDetailCommands){let{tileset:o,tile:r}=this._model.content;if(o.hasMixedContent){r._finalResolution||Em(o._backfaceCommands,this._skipLodBackfaceCommand,n),ome(this,r,n),Em(t,this._skipLodStencilCommand,n);return}}if(this._needsSilhouetteCommands){Em(t,this._silhouetteModelCommand,n);return}return Em(t,this._originalCommand,n),t}};ly.prototype.pushSilhouetteCommands=function(e,t){let n=f8(this,e);return Em(t,this._silhouetteColorCommand,n),t};function Em(e,t,n){e.push(t.command),n&&e.push(t.derivedCommand2D.command)}function f8(e,t){if(t.mode!==Ee.SCENE2D||e.model._projectTo2D)return!1;let i=e.model.sceneGraph._boundingSphere2D,o=i.center.y-i.radius,r=i.center.y+i.radius,a=t.mapProjection.ellipsoid.maximumRadius*S.PI;return o<a&&r>a||o<-a&&r>-a}function Cm(e,t){if(!c(t))return;let n=zl.clone(t),i=ft.shallowClone(t.command);return i.modelMatrix=e._modelMatrix2D,i.boundingVolume=e._boundingVolume2D,n.command=i,n.updateShadows=!1,n.is2D=!0,t.derivedCommand2D=n,e._derivedCommands.push(n),n}function eme(e){Cm(e,e._originalCommand),Cm(e,e._translucentCommand),Cm(e,e._skipLodBackfaceCommand),Cm(e,e._skipLodStencilCommand),Cm(e,e._silhouetteModelCommand),Cm(e,e._silhouetteColorCommand)}function tme(e){let t=ft.shallowClone(e);t.pass=He.TRANSLUCENT;let n=Re(e.renderState,!0);return n.cull.enabled=!1,n.depthMask=!1,n.blending=Pn.ALPHA_BLEND,t.renderState=At.fromCache(n),t}function nme(e,t){let n=t._silhouetteId%255,i=ft.shallowClone(e),o=Re(e.renderState,!0);return o.stencilTest={enabled:!0,frontFunction:W.ALWAYS,backFunction:W.ALWAYS,reference:n,mask:-1,frontOperation:{fail:W.KEEP,zFail:W.KEEP,zPass:W.REPLACE},backOperation:{fail:W.KEEP,zFail:W.KEEP,zPass:W.REPLACE}},t.isInvisible()&&(o.colorMask={red:!1,green:!1,blue:!1,alpha:!1}),i.renderState=At.fromCache(o),i}function ime(e,t){let n=t._silhouetteId%255,i=ft.shallowClone(e),o=Re(e.renderState,!0);o.cull.enabled=!1,(e.pass===He.TRANSLUCENT||t.silhouetteColor.alpha<1)&&(i.pass=He.TRANSLUCENT,o.depthMask=!1,o.blending=Pn.ALPHA_BLEND),o.stencilTest={enabled:!0,frontFunction:W.NOTEQUAL,backFunction:W.NOTEQUAL,reference:n,mask:-1,frontOperation:{fail:W.KEEP,zFail:W.KEEP,zPass:W.KEEP},backOperation:{fail:W.KEEP,zFail:W.KEEP,zPass:W.KEEP}};let a=Re(e.uniformMap);return a.model_silhouettePass=function(){return!0},i.renderState=At.fromCache(o),i.uniformMap=a,i.castShadows=!1,i.receiveShadows=!1,i}function ome(e,t,n){let i=e._skipLodStencilCommand,o=i.command,r=t._selectionDepth,a=rme(o);if(r!==a){let s=ame(r),A=Re(o.renderState,!0);A.stencilTest.reference=s,o.renderState=At.fromCache(A),n&&(i.derivedCommand2D.renderState=A)}}function rme(e){return(e.renderState.stencilTest.reference&wt.SKIP_LOD_MASK)>>>wt.SKIP_LOD_BIT_SHIFT}function ame(e){return wt.CESIUM_3D_TILE_MASK|e<<wt.SKIP_LOD_BIT_SHIFT}function sme(e){let t=ft.shallowClone(e),n=Re(e.renderState,!0);n.cull.enabled=!0,n.cull.face=or.FRONT,n.colorMask={red:!1,green:!1,blue:!1,alpha:!1},n.polygonOffset={enabled:!0,factor:5,units:5};let i=Re(t.uniformMap),o=new L(5,5);return i.u_polygonOffset=function(){return o},t.renderState=At.fromCache(n),t.uniformMap=i,t.castShadows=!1,t.receiveShadows=!1,t}function cme(e){let t=ft.shallowClone(e),n=Re(e.renderState,!0),{stencilTest:i}=n;return i.enabled=!0,i.mask=wt.SKIP_LOD_MASK,i.reference=wt.CESIUM_3D_TILE_MASK,i.frontFunction=Dn.GREATER_OR_EQUAL,i.frontOperation.zPass=nt.REPLACE,i.backFunction=Dn.GREATER_OR_EQUAL,i.backOperation.zPass=nt.REPLACE,n.stencilMask=wt.CESIUM_3D_TILE_MASK|wt.SKIP_LOD_MASK,t.renderState=At.fromCache(n),t}var d8=ly;var h8=`precision highp float;

czm_modelVertexOutput defaultVertexOutput(vec3 positionMC) {
    czm_modelVertexOutput vsOutput;
    vsOutput.positionMC = positionMC;
    vsOutput.pointSize = 1.0;
    return vsOutput;
}

void main()
{
    // Initialize the attributes struct with all
    // attributes except quantized ones.
    ProcessedAttributes attributes;
    initializeAttributes(attributes);

    #ifdef HAS_IMAGERY
    initializeImageryAttributes();
    #endif

    // Dequantize the quantized ones and add them to the
    // attributes struct.
    #ifdef USE_DEQUANTIZATION
    dequantizationStage(attributes);
    #endif

    #ifdef HAS_MORPH_TARGETS
    morphTargetsStage(attributes);
    #endif

    #ifdef HAS_SKINNING
    skinningStage(attributes);
    #endif

    #ifdef HAS_PRIMITIVE_OUTLINE
    primitiveOutlineStage();
    #endif

    // Compute the bitangent according to the formula in the glTF spec.
    // Normal and tangents can be affected by morphing and skinning, so
    // the bitangent should not be computed until their values are finalized.
    #ifdef HAS_BITANGENTS
    attributes.bitangentMC = normalize(cross(attributes.normalMC, attributes.tangentMC) * attributes.tangentSignMC);
    #endif

    FeatureIds featureIds;
    featureIdStage(featureIds, attributes);

    #ifdef HAS_SELECTED_FEATURE_ID
    SelectedFeature feature;
    selectedFeatureIdStage(feature, featureIds);
    // Handle any show properties that come from the style.
    cpuStylingStage(attributes.positionMC, feature);
    #endif

    #if defined(USE_2D_POSITIONS) || defined(USE_2D_INSTANCING)
    // The scene mode 2D pipeline stage and instancing stage add a different
    // model view matrix to accurately project the model to 2D. However, the
    // output positions and normals should be transformed by the 3D matrices
    // to keep the data the same for the fragment shader.
    mat4 modelView = czm_modelView3D;
    mat3 normal = czm_normal3D;
    #else
    // These are used for individual model projection because they will
    // automatically change based on the scene mode.
    mat4 modelView = czm_modelView;
    mat3 normal = czm_normal;
    #endif

    // Update the position for this instance in place
    #ifdef HAS_INSTANCING

        // The legacy instance stage is used when rendering i3dm models that
        // encode instances transforms in world space, as opposed to glTF models
        // that use EXT_mesh_gpu_instancing, where instance transforms are encoded
        // in object space.
        #ifdef USE_LEGACY_INSTANCING
        mat4 instanceModelView;
        mat3 instanceModelViewInverseTranspose;

        legacyInstancingStage(attributes, instanceModelView, instanceModelViewInverseTranspose);

        modelView = instanceModelView;
        normal = instanceModelViewInverseTranspose;
        #else
        instancingStage(attributes);
        #endif

        #ifdef USE_PICKING
        v_pickColor = a_pickColor;
        #endif

    #endif

    Metadata metadata;
    MetadataClass metadataClass;
    MetadataStatistics metadataStatistics;
    metadataStage(metadata, metadataClass, metadataStatistics, attributes);

    #ifdef HAS_VERTICAL_EXAGGERATION
    verticalExaggerationStage(attributes);
    #endif

    #ifdef HAS_CUSTOM_VERTEX_SHADER
    czm_modelVertexOutput vsOutput = defaultVertexOutput(attributes.positionMC);
    customShaderStage(vsOutput, attributes, featureIds, metadata, metadataClass, metadataStatistics);
    #endif

    // Compute the final position in each coordinate system needed.
    // This returns the value that will be assigned to gl_Position.
    vec4 positionClip = geometryStage(attributes, modelView, normal);

    // This must go after the geometry stage as it needs v_positionWC
    #ifdef HAS_ATMOSPHERE
    atmosphereStage(attributes);
    #endif

    #ifdef ENABLE_CLIPPING_POLYGONS
    modelClippingPolygonsStage(attributes);
    #endif

    #ifdef HAS_SILHOUETTE
    silhouetteStage(attributes, positionClip);
    #endif

    #ifdef HAS_POINT_CLOUD_SHOW_STYLE
    float show = pointCloudShowStylingStage(attributes, metadata);
    #else
    float show = 1.0;
    #endif

    #ifdef HAS_POINT_CLOUD_BACK_FACE_CULLING
    show *= pointCloudBackFaceCullingStage();
    #endif

    #ifdef HAS_POINT_CLOUD_COLOR_STYLE
    v_pointCloudColor = pointCloudColorStylingStage(attributes, metadata);
    #endif

    #ifdef PRIMITIVE_TYPE_POINTS
        #ifdef HAS_CUSTOM_VERTEX_SHADER
        gl_PointSize = vsOutput.pointSize;
        #elif defined(HAS_POINT_CLOUD_POINT_SIZE_STYLE) || defined(HAS_POINT_CLOUD_ATTENUATION)
        gl_PointSize = pointCloudPointSizeStylingStage(attributes, metadata);
        #else
        gl_PointSize = 1.0;
        #endif
        
        gl_PointSize *= show;
    #endif

    // Important NOT to compute gl_Position = show * positionClip or we hit:
    // https://github.com/CesiumGS/cesium/issues/11270
    //
    // We will discard points with v_pointCloudShow == 0 in the fragment shader.
    gl_Position = positionClip;

    #ifdef HAS_POINT_CLOUD_SHOW_STYLE
    v_pointCloudShow = show;
    #endif
}
`;var m8=`
precision highp float;

czm_modelMaterial defaultModelMaterial()
{
    czm_modelMaterial material;
    material.diffuse = vec3(0.0);
    material.specular = vec3(1.0);
    material.roughness = 1.0;
    material.occlusion = 1.0;
    material.normalEC = vec3(0.0, 0.0, 1.0);
    material.emissive = vec3(0.0);
    material.alpha = 1.0;
    return material;
}

vec4 handleAlpha(vec3 color, float alpha)
{
    #ifdef ALPHA_MODE_MASK
    if (alpha < u_alphaCutoff) {
        discard;
    }
    #endif

    return vec4(color, alpha);
}

SelectedFeature selectedFeature;

void main()
{
    #ifdef HAS_POINT_CLOUD_SHOW_STYLE
        if (v_pointCloudShow == 0.0)
        {
            discard;
        }
    #endif

    #ifdef HAS_MODEL_SPLITTER
    modelSplitterStage();
    #endif

    czm_modelMaterial material = defaultModelMaterial();

    ProcessedAttributes attributes;
    geometryStage(attributes);

    FeatureIds featureIds;
    featureIdStage(featureIds, attributes);

    Metadata metadata;
    MetadataClass metadataClass;
    MetadataStatistics metadataStatistics;
    metadataStage(metadata, metadataClass, metadataStatistics, attributes);

    //========================================================================
    // When not picking metadata START
    #ifndef METADATA_PICKING_ENABLED

    #ifdef HAS_SELECTED_FEATURE_ID
    selectedFeatureIdStage(selectedFeature, featureIds);
    #endif

    #ifndef CUSTOM_SHADER_REPLACE_MATERIAL
    materialStage(material, attributes, selectedFeature);
    #endif

    #ifdef HAS_CUSTOM_FRAGMENT_SHADER
    customShaderStage(material, attributes, featureIds, metadata, metadataClass, metadataStatistics);
    #endif

    lightingStage(material, attributes);

    #ifdef HAS_SELECTED_FEATURE_ID
    cpuStylingStage(material, selectedFeature);
    #endif

    #ifdef HAS_MODEL_COLOR
    modelColorStage(material);
    #endif

    #ifdef HAS_PRIMITIVE_OUTLINE
    primitiveOutlineStage(material);
    #endif

    vec4 color = handleAlpha(material.diffuse, material.alpha);

    // When not picking metadata END
    //========================================================================
    #else
    //========================================================================
    // When picking metadata START

    vec4 metadataValues = vec4(0.0, 0.0, 0.0, 0.0);
    metadataPickingStage(metadata, metadataClass, metadataValues);
    vec4 color = metadataValues;

    #endif
    // When picking metadata END
    //========================================================================

    #ifdef HAS_CLIPPING_PLANES
    modelClippingPlanesStage(color);
    #endif

    #ifdef ENABLE_CLIPPING_POLYGONS
    modelClippingPolygonsStage();
    #endif

    //========================================================================
    // When not picking metadata START
    #ifndef METADATA_PICKING_ENABLED

    #if defined(HAS_SILHOUETTE) && defined(HAS_NORMALS)
    silhouetteStage(color);
    #endif

    #ifdef HAS_ATMOSPHERE
    atmosphereStage(color, attributes);
    #endif

    #endif
    // When not picking metadata END
    //========================================================================

    out_FragColor = color;
}

`;function p8(){}p8.buildModelDrawCommand=function(e,t){let n=e.shaderBuilder,i=Ame(e,n,t),o=lme(e,i,t),r=e.model;return c(r.classificationType)?new u8({primitiveRenderResources:e,command:o}):new d8({primitiveRenderResources:e,command:o})};function Ame(e,t,n){t.addVertexLines(h8),t.addFragmentLines(m8);let i=e.model,o=t.buildShaderProgram(n.context);return i._pipelineResources.push(o),o}function lme(e,t,n){let i=ume(e),o=new Yi({context:n.context,indexBuffer:i,attributes:e.attributes}),r=e.model;r._pipelineResources.push(o);let a=e.alphaOptions.pass,s=r.sceneGraph,A=n.mode===Ee.SCENE3D,l,d;if(!A&&!n.scene3DOnly&&r._projectTo2D)l=Q.multiplyTransformation(s._computedModelMatrix,e.runtimeNode.computedTransform,new Q),d=e.runtimePrimitive.boundingSphere2D;else{let I=A?s._computedModelMatrix:s._computedModelMatrix2D;l=Q.multiplyTransformation(I,e.runtimeNode.computedTransform,new Q),d=le.transform(e.boundingSphere,l)}let m=Re(At.fromCache(e.renderStateOptions),!0);m.cull.face=tt.getCullFace(l,e.primitiveType),m=At.fromCache(m);let p=c(r.classificationType),g=p?!1:Yo.castShadows(r.shadows),h=p?!1:Yo.receiveShadows(r.shadows),C=p?void 0:e.pickId;return new ft({boundingVolume:d,modelMatrix:l,uniformMap:e.uniformMap,renderState:m,vertexArray:o,shaderProgram:t,cull:r.cull,pass:a,count:e.count,owner:r,pickId:C,pickMetadataAllowed:!0,instanceCount:e.instanceCount,primitiveType:e.primitiveType,debugShowBoundingVolume:r.debugShowBoundingVolume,castShadows:g,receiveShadows:h})}function ume(e){let t=e.wireframeIndexBuffer;if(c(t))return t;let n=e.indices;if(c(n))return n.buffer}var g8=p8;function ia(e){e=e??G.EMPTY_OBJECT;let t=e.modelComponents;this._model=e.model,this._components=t,this._pipelineStages=[],this._updateStages=[],this._runtimeNodes=[],this._rootNodes=[],this._skinnedNodes=[],this._runtimeSkins=[],this.modelPipelineStages=[],this._boundingSphere=void 0,this._boundingSphere2D=void 0,this._computedModelMatrix=Q.clone(Q.IDENTITY),this._computedModelMatrix2D=Q.clone(Q.IDENTITY),this._axisCorrectionMatrix=tt.getAxisCorrectionMatrix(t.upAxis,t.forwardAxis,new Q),this._runtimeArticulations={},fme(this)}Object.defineProperties(ia.prototype,{components:{get:function(){return this._components}},computedModelMatrix:{get:function(){return this._computedModelMatrix}},axisCorrectionMatrix:{get:function(){return this._axisCorrectionMatrix}},boundingSphere:{get:function(){return this._boundingSphere}}});function fme(e){let t=e._components,n=t.scene,o=e._model.modelMatrix;C8(e,o);let r=t.articulations,a=r.length,s=e._runtimeArticulations;for(let b=0;b<a;b++){let x=r[b],T=new a3({articulation:x,sceneGraph:e}),w=T.name;s[w]=T}let A=t.nodes,l=A.length;e._runtimeNodes=new Array(l);let m=n.nodes.length,p=Q.IDENTITY;for(let b=0;b<m;b++){let x=n.nodes[b],T=E8(e,x,p);e._rootNodes.push(T)}let g=t.skins,h=e._runtimeSkins,C=g.length;for(let b=0;b<C;b++){let x=g[b];h.push(new ZG({skin:x,sceneGraph:e}))}let _=e._skinnedNodes,I=_.length;for(let b=0;b<I;b++){let x=_[b],T=e._runtimeNodes[x],R=A[x].skin.index;T._runtimeSkin=h[R],T.updateJointMatrices()}e.applyArticulations()}function C8(e,t){let n=e._components,i=e._model;e._computedModelMatrix=Q.multiplyTransformation(t,n.transform,e._computedModelMatrix),e._computedModelMatrix=Q.multiplyTransformation(e._computedModelMatrix,e._axisCorrectionMatrix,e._computedModelMatrix),e._computedModelMatrix=Q.multiplyByUniformScale(e._computedModelMatrix,i.computedScale,e._computedModelMatrix)}var dme=new f;function hme(e,t){let n=e._computedModelMatrix,i=Q.getTranslation(n,dme);if(!f.equals(i,f.ZERO))e._computedModelMatrix2D=sn.basisTo2D(t.mapProjection,n,e._computedModelMatrix2D);else{let o=e.boundingSphere.center,r=sn.ellipsoidTo2DModelMatrix(t.mapProjection,o,e._computedModelMatrix2D);e._computedModelMatrix2D=Q.multiply(r,n,e._computedModelMatrix2D)}e._boundingSphere2D=le.transform(e._boundingSphere,e._computedModelMatrix2D,e._boundingSphere2D)}function E8(e,t,n){let i=[],o=tt.getNodeTransform(t),r=t.children.length;for(let d=0;d<r;d++){let m=t.children[d],p=Q.multiplyTransformation(n,o,new Q),g=E8(e,m,p);i.push(g)}let a=new P3({node:t,transform:o,transformToRoot:n,children:i,sceneGraph:e}),s=t.primitives.length;for(let d=0;d<s;d++)a.runtimePrimitives.push(new KG({primitive:t.primitives[d],node:t,model:e._model}));let A=t.index;e._runtimeNodes[A]=a,c(t.skin)&&e._skinnedNodes.push(A);let l=t.name;if(c(l)){let d=e._model,m=new p3(d,a);d._nodesByName[l]=m}return A}var mme=new f,pme=new f,gme=new f,Cme=new f;ia.prototype.buildDrawCommands=function(e){let t=this.buildRenderResources(e);this.computeBoundingVolumes(t),this.createDrawCommands(t,e)};ia.prototype.buildRenderResources=function(e){let t=this._model,n=new $G(t);t.statistics.clear(),this.configurePipeline(e);let i=this.modelPipelineStages;for(let o=0;o<i.length;o++)i[o].process(n,t,e);for(let o=0;o<this._runtimeNodes.length;o++){let r=this._runtimeNodes[o];if(!c(r))continue;r.configurePipeline();let a=r.pipelineStages,s=new r8(n,r);n.nodeRenderResources[o]=s;for(let A=0;A<a.length;A++)a[A].process(s,r.node,e);for(let A=0;A<r.runtimePrimitives.length;A++){let l=r.runtimePrimitives[A];l.configurePipeline(e);let d=l.pipelineStages,m=new s8(s,l);s.primitiveRenderResources[A]=m;for(let p=0;p<d.length;p++)d[p].process(m,l.primitive,e)}}return n};ia.prototype.computeBoundingVolumes=function(e){let t=this._model,n=f.fromElements(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE,mme),i=f.fromElements(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE,pme);for(let o=0;o<this._runtimeNodes.length;o++){let r=this._runtimeNodes[o];if(!c(r))continue;let a=e.nodeRenderResources[o],s=r.computedTransform;for(let A=0;A<r.runtimePrimitives.length;A++){let l=r.runtimePrimitives[A],d=a.primitiveRenderResources[A];l.boundingSphere=le.clone(d.boundingSphere,new le);let m=Q.multiplyByPoint(s,d.positionMin,gme),p=Q.multiplyByPoint(s,d.positionMax,Cme);f.minimumByComponent(n,m,n),f.maximumByComponent(i,p,i)}}this._boundingSphere=le.fromCornerPoints(n,i,new le),this._boundingSphere=le.transformWithoutScale(this._boundingSphere,this._axisCorrectionMatrix,this._boundingSphere),this._boundingSphere=le.transform(this._boundingSphere,this._components.transform,this._boundingSphere),t._boundingSphere=le.transform(this._boundingSphere,t.modelMatrix,t._boundingSphere),t._initialRadius=t._boundingSphere.radius,t._boundingSphere.radius*=t._clampedScale};ia.prototype.createDrawCommands=function(e,t){for(let n=0;n<this._runtimeNodes.length;n++){let i=this._runtimeNodes[n];if(!c(i))continue;let o=e.nodeRenderResources[n];for(let r=0;r<i.runtimePrimitives.length;r++){let a=i.runtimePrimitives[r],s=o.primitiveRenderResources[r],A=g8.buildModelDrawCommand(s,t);a.drawCommand=A}}};ia.prototype.configurePipeline=function(e){let t=this.modelPipelineStages;t.length=0;let n=this._model,i=e.fog.enabled&&e.fog.renderable;c(n.color)&&t.push(Jg),!c(n.classificationType)&&(n.imageBasedLighting.enabled&&t.push(o3),n.isClippingEnabled()&&t.push(l3),n.isClippingPolygonsEnabled()&&t.push(h3),n.hasSilhouette(e)&&t.push(n8),c(n.splitDirection)&&n.splitDirection!==qa.NONE&&t.push(o8),Do.is3DTiles(n.type)&&t.push(XU),i&&t.push(t3))};ia.prototype.update=function(e,t){let n,i,o;for(n=0;n<this._runtimeNodes.length;n++){let r=this._runtimeNodes[n];if(!c(r))continue;for(i=0;i<r.updateStages.length;i++)r.updateStages[i].update(r,this,e);let a=e.mode!==Ee.SCENE3D&&this._model._projectTo2D;for(t&&!a&&this.updateJointMatrices(),i=0;i<r.runtimePrimitives.length;i++){let s=r.runtimePrimitives[i];for(o=0;o<s.updateStages.length;o++)s.updateStages[o].update(s,this)}}};ia.prototype.updateModelMatrix=function(e,t){C8(this,e),t.mode!==Ee.SCENE3D&&hme(this,t);let n=this._rootNodes;for(let i=0;i<n.length;i++){let o=this._runtimeNodes[n[i]];o._transformDirty=!0}};ia.prototype.updateJointMatrices=function(){let e=this._skinnedNodes,t=e.length;for(let n=0;n<t;n++){let i=e[n];this._runtimeNodes[i].updateJointMatrices()}};function _8(e,t,n,i,o){if(n&&!t.show)return;let r=t.children.length;for(let A=0;A<r;A++){let l=t.getChild(A);_8(e,l,n,i,o)}let a=t.runtimePrimitives,s=a.length;for(let A=0;A<s;A++){let l=a[A];i(l,o)}}function uy(e,t,n,i){let o=e._rootNodes,r=o.length;for(let a=0;a<r;a++){let s=o[a],A=e._runtimeNodes[s];_8(e,A,t,n,i)}}var Eme={backFaceCulling:void 0};ia.prototype.updateBackFaceCulling=function(e){let t=Eme;t.backFaceCulling=e,uy(this,!1,_me,t)};function _me(e,t){let n=e.drawCommand;n.backFaceCulling=t.backFaceCulling}var Ime={shadowMode:void 0};ia.prototype.updateShadows=function(e){let t=Ime;t.shadowMode=e,uy(this,!1,yme,t)};function yme(e,t){let n=e.drawCommand;n.shadows=t.shadowMode}var bme={debugShowBoundingVolume:void 0};ia.prototype.updateShowBoundingVolume=function(e){let t=bme;t.debugShowBoundingVolume=e,uy(this,!1,Bme,t)};function Bme(e,t){let n=e.drawCommand;n.debugShowBoundingVolume=t.debugShowBoundingVolume}var I8=[],xme={frameState:void 0,hasSilhouette:void 0};ia.prototype.pushDrawCommands=function(e){let t=I8;t.length=0;let n=xme;n.hasSilhouette=this._model.hasSilhouette(e),n.frameState=e,uy(this,!0,Tme,n),Mn(e.commandList,t)};function Tme(e,t){let n=t.frameState,i=t.hasSilhouette,o=n.passes,r=I8,a=e.drawCommand;a.pushCommands(n,n.commandList),i&&!o.pick&&a.pushSilhouetteCommands(n,r)}ia.prototype.setArticulationStage=function(e,t){let n=e.split(" ");if(n.length!==2)return;let i=n[0],o=n[1],r=this._runtimeArticulations[i];c(r)&&r.setArticulationStage(o,t)};ia.prototype.applyArticulations=function(){let e=this._runtimeArticulations;for(let t in e)e.hasOwnProperty(t)&&e[t].apply()};var y8=ia;function hf(){this.pointsLength=0,this.trianglesLength=0,this.geometryByteLength=0,this.texturesByteLength=0,this.propertyTablesByteLength=0,this._bufferIdSet={},this._textureIdByteLengths={},this._batchTextureIdMap=new xp}Object.defineProperties(hf.prototype,{batchTexturesByteLength:{get:function(){let e=this._batchTextureIdMap.length,t=this._batchTextureIdMap.values,n=0;for(let i=0;i<e;i++)n+=t[i].byteLength;return n}}});hf.prototype.clear=function(){this.pointsLength=0,this.trianglesLength=0,this.geometryByteLength=0,this.texturesByteLength=0,this.propertyTablesByteLength=0,this._bufferIdSet={},this._textureIdByteLengths={},this._batchTextureIdMap.removeAll()};hf.prototype.addBuffer=function(e,t){if(!this._bufferIdSet.hasOwnProperty(e._id)){let n=t?2:1;this.geometryByteLength+=e.sizeInBytes*n}this._bufferIdSet[e._id]=!0};hf.prototype.addTexture=function(e){this._textureIdByteLengths.hasOwnProperty(e._id)||(this.texturesByteLength+=e.sizeInBytes,this._textureIdByteLengths[e._id]=e.sizeInBytes)};hf.prototype.getTextureIds=function(){return Object.keys(this._textureIdByteLengths)};hf.prototype.getTextureByteLengthById=function(e){return this._textureIdByteLengths[e]};hf.prototype.addBatchTexture=function(e){this._batchTextureIdMap.contains(e._id)||this._batchTextureIdMap.set(e._id,e)};var b8=hf;var w8=ls(Nb(),1);var B8={},wd=Uint32Array.BYTES_PER_ELEMENT;B8.parse=function(e,t){t=t??0;let n=new Uint8Array(e),i=new DataView(e);t+=wd;let o=i.getUint32(t,!0);if(o!==1)throw new ae(`Only Point Cloud tile version 1 is supported.  Version ${o} is not.`);t+=wd,t+=wd;let r=i.getUint32(t,!0);if(r===0)throw new ae("Feature table must have a byte length greater than zero");t+=wd;let a=i.getUint32(t,!0);t+=wd;let s=i.getUint32(t,!0);t+=wd;let A=i.getUint32(t,!0);t+=wd;let l=Fo(n,t,r);t+=r;let d=new Uint8Array(e,t,a);t+=a;let m,p;s>0&&(m=Fo(n,t,s),Object.keys(m).length===0&&(m=void 0),t+=s,A>0&&(p=new Uint8Array(e,t,A),p=new Uint8Array(p),t+=A));let g=new rf(l,d),h=g.getGlobalProperty("POINTS_LENGTH");if(g.featuresLength=h,!c(h))throw new ae("Feature table global property: POINTS_LENGTH must be defined");let C=g.getGlobalProperty("RTC_CENTER",V.FLOAT,3);c(C)&&(C=f.unpack(C));let _=Sme(g,m);if(_.rtcCenter=C,_.pointsLength=h,!_.hasPositions){let I=wme(g);_.positions=I,_.hasPositions=_.hasPositions||c(I)}if(!_.hasPositions)throw new ae("Either POSITION or POSITION_QUANTIZED must be defined.");if(!_.hasNormals){let I=Qme(g);_.normals=I,_.hasNormals=_.hasNormals||c(I)}if(!_.hasColors){let I=Dme(g);_.colors=I,_.hasColors=_.hasColors||c(I),_.hasConstantColor=c(_.constantColor),_.isTranslucent=c(I)&&I.isTranslucent}if(!_.hasBatchIds){let I=Rme(g);_.batchIds=I,_.hasBatchIds=_.hasBatchIds||c(I)}if(_.hasBatchIds){let I=g.getGlobalProperty("BATCH_LENGTH");if(!c(I))throw new ae("Global property: BATCH_LENGTH must be defined when BATCH_ID is defined.");_.batchLength=I}return(c(m)||c(p))&&(_.batchTableJson=m,_.batchTableBinary=p),_};function Sme(e,t){let n=e.json,i,o,r,a=c(n.extensions)?n.extensions["3DTILES_draco_point_compression"]:void 0,s=c(t)&&c(t.extensions)?t.extensions["3DTILES_draco_point_compression"]:void 0;c(s)&&(r=s.properties);let A,l,d,m,p;if(c(a)){o=a.properties;let h=a.byteOffset,C=a.byteLength;if(!c(o)||!c(h)||!c(C))throw new ae("Draco properties, byteOffset, and byteLength must be defined");i=e.buffer.slice(h,h+C),A=c(o.POSITION),l=c(o.RGB)||c(o.RGBA),d=c(o.NORMAL),m=c(o.BATCH_ID),p=c(o.RGBA)}let g;return c(i)&&(g={buffer:i,featureTableProperties:o,batchTableProperties:r,properties:dt(o,r),dequantizeInShader:!0}),{draco:g,hasPositions:A,hasColors:l,isTranslucent:p,hasNormals:d,hasBatchIds:m}}function wme(e){let t=e.json,n;if(c(t.POSITION))return n=e.getPropertyArray("POSITION",V.FLOAT,3),{name:Pe.POSITION,semantic:Pe.POSITION,typedArray:n,isQuantized:!1,componentDatatype:V.FLOAT,type:ct.VEC3};if(c(t.POSITION_QUANTIZED)){n=e.getPropertyArray("POSITION_QUANTIZED",V.UNSIGNED_SHORT,3);let i=e.getGlobalProperty("QUANTIZED_VOLUME_SCALE",V.FLOAT,3);if(!c(i))throw new ae("Global property: QUANTIZED_VOLUME_SCALE must be defined for quantized positions.");let o=65535,r=e.getGlobalProperty("QUANTIZED_VOLUME_OFFSET",V.FLOAT,3);if(!c(r))throw new ae("Global property: QUANTIZED_VOLUME_OFFSET must be defined for quantized positions.");return{name:Pe.POSITION,semantic:Pe.POSITION,typedArray:n,isQuantized:!0,componentDatatype:V.FLOAT,type:ct.VEC3,quantizedRange:o,quantizedVolumeOffset:f.unpack(r),quantizedVolumeScale:f.unpack(i),quantizedComponentDatatype:V.UNSIGNED_SHORT,quantizedType:ct.VEC3}}}function Dme(e){let t=e.json,n;if(c(t.RGBA))return n=e.getPropertyArray("RGBA",V.UNSIGNED_BYTE,4),{name:Pe.COLOR,semantic:Pe.COLOR,setIndex:0,typedArray:n,componentDatatype:V.UNSIGNED_BYTE,type:ct.VEC4,normalized:!0,isRGB565:!1,isTranslucent:!0};if(c(t.RGB))return n=e.getPropertyArray("RGB",V.UNSIGNED_BYTE,3),{name:"COLOR",semantic:Pe.COLOR,setIndex:0,typedArray:n,componentDatatype:V.UNSIGNED_BYTE,type:ct.VEC3,normalized:!0,isRGB565:!1,isTranslucent:!1};if(c(t.RGB565))return n=e.getPropertyArray("RGB565",V.UNSIGNED_SHORT,1),{name:"COLOR",semantic:Pe.COLOR,setIndex:0,typedArray:n,componentDatatype:V.FLOAT,type:ct.VEC3,normalized:!1,isRGB565:!0,isTranslucent:!1};if(c(t.CONSTANT_RGBA)){let i=e.getGlobalProperty("CONSTANT_RGBA",V.UNSIGNED_BYTE,4),o=i[3],r=J.fromBytes(i[0],i[1],i[2],o),a=o<255;return{name:Pe.COLOR,semantic:Pe.COLOR,setIndex:0,constantColor:r,componentDatatype:V.FLOAT,type:ct.VEC4,isQuantized:!1,isTranslucent:a}}}function Qme(e){let t=e.json,n;if(c(t.NORMAL))return n=e.getPropertyArray("NORMAL",V.FLOAT,3),{name:Pe.NORMAL,semantic:Pe.NORMAL,typedArray:n,octEncoded:!1,octEncodedZXY:!1,componentDatatype:V.FLOAT,type:ct.VEC3};if(c(t.NORMAL_OCT16P))return n=e.getPropertyArray("NORMAL_OCT16P",V.UNSIGNED_BYTE,2),{name:Pe.NORMAL,semantic:Pe.NORMAL,typedArray:n,octEncoded:!0,octEncodedZXY:!1,quantizedRange:(1<<8)-1,quantizedType:ct.VEC2,quantizedComponentDatatype:V.UNSIGNED_BYTE,componentDatatype:V.FLOAT,type:ct.VEC3}}function Rme(e){let t=e.json;if(c(t.BATCH_ID)){let n=e.getPropertyArray("BATCH_ID",V.UNSIGNED_SHORT,1);return{name:Pe.FEATURE_ID,semantic:Pe.FEATURE_ID,setIndex:0,typedArray:n,componentDatatype:V.fromTypedArray(n),type:ct.SCALAR}}}var x8=B8;var vme=Rt.Components,Mme=Rt.Scene,Pme=Rt.Node,Nme=Rt.Primitive,Lme=Rt.Attribute,T8=Rt.Quantization,Fme=Rt.FeatureIdAttribute,Ome=Rt.Material,kme=Rt.MetallicRoughness;function mf(e){e=e??G.EMPTY_OBJECT;let t=e.arrayBuffer,n=e.byteOffset??0;this._arrayBuffer=t,this._byteOffset=n,this._loadAttributesFor2D=e.loadAttributesFor2D??!1,this._parsedContent=void 0,this._decodePromise=void 0,this._decodedAttributes=void 0,this._promise=void 0,this._error=void 0,this._state=ke.UNLOADED,this._buffers=[],this._components=void 0,this._transform=Q.IDENTITY}c(Object.create)&&(mf.prototype=Object.create(Ln.prototype),mf.prototype.constructor=mf);Object.defineProperties(mf.prototype,{cacheKey:{get:function(){}},components:{get:function(){return this._components}},transform:{get:function(){return this._transform}}});mf.prototype.load=function(){if(c(this._promise))return this._promise;this._parsedContent=x8.parse(this._arrayBuffer,this._byteOffset),this._state=ke.PROCESSING,this._promise=Promise.resolve(this)};mf.prototype.process=function(e){if(c(this._error)){let t=this._error;throw this._error=void 0,t}if(this._state===ke.READY)return!0;if(this._state===ke.PROCESSING){if(c(this._decodePromise))return!1;this._decodePromise=Ume(this,e.context)}return!1};function Ume(e,t){let i=e._parsedContent.draco,o;if(c(i)?o=aI.decodePointCloud(i,t):o=Promise.resolve(),!!c(o))return e._decodePromise=o,o.then(function(r){if(!e.isDestroyed())return c(r)&&zme(e,i,r),Zme(e,t),e._state=ke.READY,e}).catch(function(r){e.unload(),e._state=ke.FAILED;let a="Failed to load Draco pnts";e._error=e.getError(a,r)})}function zme(e,t,n){e._state=ke.READY;let i=e._parsedContent,o;if(c(n.POSITION)){if(o={name:"POSITION",semantic:Pe.POSITION,typedArray:n.POSITION.array,componentDatatype:V.FLOAT,type:ct.VEC3,isQuantized:!1},c(n.POSITION.data.quantization)){let s=n.POSITION.data.quantization,A=s.range,l=f.fromElements(A,A,A),d=f.unpack(s.minValues),m=(1<<s.quantizationBits)-1;o.isQuantized=!0,o.quantizedRange=m,o.quantizedVolumeOffset=d,o.quantizedVolumeScale=l,o.quantizedComponentDatatype=m<=255?V.UNSIGNED_BYTE:V.UNSIGNED_SHORT,o.quantizedType=ct.VEC3}i.positions=o}if(c(n.NORMAL)){if(o={name:"NORMAL",semantic:Pe.NORMAL,typedArray:n.NORMAL.array,componentDatatype:V.FLOAT,type:ct.VEC3,isQuantized:!1,octEncoded:!1,octEncodedZXY:!1},c(n.NORMAL.data.quantization)){let s=(1<<n.NORMAL.data.quantization.quantizationBits)-1;o.quantizedRange=s,o.octEncoded=!0,o.octEncodedZXY=!0,o.quantizedComponentDatatype=V.UNSIGNED_BYTE,o.quantizedType=ct.VEC2}i.normals=o}if(c(n.RGBA)?i.colors={name:"COLOR",semantic:Pe.COLOR,setIndex:0,typedArray:n.RGBA.array,componentDatatype:V.UNSIGNED_BYTE,type:ct.VEC4,normalized:!0,isTranslucent:!0}:c(n.RGB)&&(i.colors={name:"COLOR",semantic:Pe.COLOR,setIndex:0,typedArray:n.RGB.array,componentDatatype:V.UNSIGNED_BYTE,type:ct.VEC3,normalized:!0,isTranslucent:!1}),c(n.BATCH_ID)){let s=n.BATCH_ID.array;i.batchIds={name:"_FEATURE_ID",semantic:Pe.FEATURE_ID,setIndex:0,typedArray:s,componentDatatype:V.fromTypedArray(s),type:ct.SCALAR}}let r=i.batchTableJson,a=t.batchTableProperties;for(let s in a)if(a.hasOwnProperty(s)){let A=n[s];c(r)||(r={}),i.hasDracoBatchTable=!0;let l=A.data;r[s]={byteOffset:l.byteOffset,type:Gme(l.componentsPerAttribute),componentType:Hme(l.componentDatatype),typedArray:A.array}}i.batchTableJson=r}function Gme(e){switch(e){case 1:return"SCALAR";case 2:return"VEC2";case 3:return"VEC3";case 4:return"VEC4"}}function Hme(e){switch(e){case W.BYTE:return"BYTE";case W.UNSIGNED_BYTE:return"UNSIGNED_BYTE";case W.SHORT:return"SHORT";case W.UNSIGNED_SHORT:return"UNSIGNED_SHORT";case W.INT:return"INT";case W.UNSIGNED_INT:return"UNSIGNED_INT";case W.DOUBLE:return"DOUBLE";case W.FLOAT:return"FLOAT"}}function sC(e,t,n){let i=t.typedArray,o;if(t.octEncoded&&(o=new T8,o.octEncoded=t.octEncoded,o.octEncodedZXY=t.octEncodedZXY,o.normalizationRange=t.quantizedRange,o.type=t.quantizedType,o.componentDatatype=t.quantizedComponentDatatype),t.isQuantized){o=new T8;let s=t.quantizedRange;o.normalizationRange=s,o.quantizedVolumeOffset=f.ZERO;let A=t.quantizedVolumeScale;o.quantizedVolumeDimensions=A,o.quantizedVolumeStepSize=f.divideByScalar(A,s,new f),o.componentDatatype=t.quantizedComponentDatatype,o.type=t.quantizedType}let r=new Lme;if(r.name=t.name,r.semantic=t.semantic,r.setIndex=t.setIndex,r.componentDatatype=t.componentDatatype,r.type=t.type,r.normalized=t.normalized??!1,r.min=t.min,r.max=t.max,r.quantization=o,t.isRGB565&&(i=Yt.decodeRGB565(i)),c(t.constantColor)){let s=new Array(4);r.constant=J.pack(t.constantColor,s)}else{let s=ut.createVertexBuffer({typedArray:i,context:n,usage:De.STATIC_DRAW});s.vertexArrayDestroyable=!1,e._buffers.push(s),r.buffer=s}let a=e._loadAttributesFor2D;return r.semantic===Pe.POSITION&&a&&(r.typedArray=i),r}var S8,fy;function Vme(e){if(!c(fy)){S8=new w8.default(0),fy=new Array(e);for(let t=0;t<e;++t)fy[t]=S8.random()}return fy}var jme=new f,Yme=new f,Wme=new f;function qme(e){let t=e.typedArray,n=20,i=t.length/3,o=Math.min(i,n),r=Vme(n),a=Number.MAX_VALUE,s=-Number.MAX_VALUE,A=f.fromElements(a,a,a,jme),l=f.fromElements(s,s,s,Yme),d,m,p;if(e.isQuantized)A=f.ZERO,l=e.quantizedVolumeScale;else for(d=0;d<o;++d)m=Math.floor(r[d]*i),p=f.unpack(t,m*3,Wme),f.minimumByComponent(A,p,A),f.maximumByComponent(l,p,l);e.min=f.clone(A),e.max=f.clone(l)}var Jme={name:Pe.COLOR,semantic:Pe.COLOR,setIndex:0,constantColor:J.DARKGRAY,componentDatatype:V.FLOAT,type:ct.VEC4,isQuantized:!1,isTranslucent:!1};function Kme(e,t,n){let i=[],o,r=t.positions;return c(r)&&(qme(r),o=sC(e,r,n),o.count=t.pointsLength,i.push(o)),c(t.normals)&&(o=sC(e,t.normals,n),i.push(o)),c(t.colors)?(o=sC(e,t.colors,n),i.push(o)):(o=sC(e,Jme,n),i.push(o)),c(t.batchIds)&&(o=sC(e,t.batchIds,n),i.push(o)),i}function Xme(e,t){let n=e.batchLength,i=e.pointsLength,o=e.batchTableJson,r=e.batchTableBinary,a=!c(e.batchIds);return c(r)||c(o)||e.hasDracoBatchTable?tm({count:n??i,batchTable:o,binaryBody:r,parseAsPropertyAttributes:a,customAttributeOutput:t}):new ta({schema:{},propertyTables:[]})}function Zme(e,t){let n=e._parsedContent,i=new kme;i.metallicFactor=0,i.roughnessFactor=.9;let o=new Ome;o.metallicRoughness=i;let r=n.colors;c(r)&&r.isTranslucent&&(o.alphaMode=gd.BLEND);let a=!c(n.normals);o.unlit=a;let s=new Nme;if(s.attributes=Kme(e,n,t),s.primitiveType=Me.POINTS,s.material=o,c(n.batchIds)){let g=new Fme;g.propertyTableId=0,g.setIndex=0,g.positionalLabel="featureId_0",s.featureIds.push(g)}let A=new Pme;A.index=0,A.primitives=[s];let l=new Mme;l.nodes=[A],l.upAxis=fi.Z,l.forwardAxis=fi.X;let d=new vme;d.scene=l,d.nodes=[A];let m=[];d.structuralMetadata=Xme(n,m),m.length>0&&$me(e,s,m,t),c(n.rtcCenter)&&(d.transform=Q.multiplyByTranslation(d.transform,n.rtcCenter,d.transform));let p=n.positions;c(p)&&p.isQuantized&&(d.transform=Q.multiplyByTranslation(d.transform,p.quantizedVolumeOffset,d.transform)),e._components=d,e._parsedContent=void 0,e._arrayBuffer=void 0}function $me(e,t,n,i){let o=t.attributes,r=n.length;for(let a=0;a<r;a++){let s=n[a],A=ut.createVertexBuffer({typedArray:s.typedArray,context:i,usage:De.STATIC_DRAW});A.vertexArrayDestroyable=!1,e._buffers.push(A),s.buffer=A,s.typedArray=void 0,o.push(s)}t.propertyAttributeIds=[0]}mf.prototype.unload=function(){let e=this._buffers;for(let t=0;t<e.length;t++)e[t].destroy();e.length=0,this._components=void 0,this._parsedContent=void 0,this._arrayBuffer=void 0};var D8=mf;var epe=new f,tpe=new f,npe=new f,ipe=new Q,ope=new Q,rpe=new Q,ape=new ue,spe=new le;function IS(e,t,n,i,o,r,a){if(!e._ready||n.mode===Ee.MORPHING)return;let s=Number.MAX_VALUE,A=e.sceneGraph,l=A._runtimeNodes;for(let d=0;d<l.length;d++){let m=l[d],p=m.node,g=Q.clone(m.computedTransform,ipe),h=Q.clone(A.computedModelMatrix,ope),C=p.instances;c(C)&&C.transformInWorldSpace&&(h=Q.multiplyTransformation(e.modelMatrix,A.components.transform,h),g=Q.multiplyTransformation(A.axisCorrectionMatrix,m.computedTransform,g));let _=Q.multiplyTransformation(h,g,rpe);n.mode!==Ee.SCENE3D&&(_=sn.basisTo2D(n.mapProjection,_,_));let I=[];if(c(C)){let x=C.attributes[0].count,T=C.attributes[0].componentDatatype,w=12,R=m.transformsTypedArray;if(!c(R)){let z=m.instancingTransformsBuffer;c(z)&&n.context.webgl2&&(R=V.createTypedArray(T,x*w),z.getBufferData(R))}if(c(R))for(let z=0;z<x;z++){let M=z*w,N=new Q(R[M],R[M+1],R[M+2],R[M+3],R[M+4],R[M+5],R[M+6],R[M+7],R[M+8],R[M+9],R[M+10],R[M+11],0,0,0,1);C.transformInWorldSpace?(Q.multiplyTransformation(N,g,N),Q.multiplyTransformation(h,N,N)):Q.multiplyTransformation(N,_,N),I.push(N)}}I.length===0&&I.push(_);let b=m.runtimePrimitives.length;for(let x=0;x<b;x++){let T=m.runtimePrimitives[x],w=T.primitive;if(c(T.boundingSphere)&&!c(C)){let q=le.transform(T.boundingSphere,_,spe),$=en.raySphere(t,q);if(!c($))continue}let R=tt.getAttributeBySemantic(w,Pe.POSITION),z=R.byteOffset,M=R.byteStride,N=R.count;if(!c(w.indices))continue;let O=w.indices.typedArray;if(!c(O)){let q=w.indices.buffer,$=w.indices.count,H=w.indices.indexDatatype;c(q)&&n.context.webgl2&&(H===Ge.UNSIGNED_BYTE?O=new Uint8Array($):H===Ge.UNSIGNED_SHORT?O=new Uint16Array($):H===Ge.UNSIGNED_INT&&(O=new Uint32Array($)),q.getBufferData(O))}let u=R.typedArray,E=R.componentDatatype,y=R.type,B=R.quantization;c(B)&&(E=R.quantization.componentDatatype,y=R.quantization.type);let D=ct.getNumberOfComponents(y),v=V.getSizeInBytes(E),F=!c(u)&&c(M)&&M!==D*v,P=D,U=0;F&&(P=M/v,U=z/v);let k=N*P;if(!c(u)){let q=R.buffer;c(q)&&n.context.webgl2&&(u=V.createTypedArray(E,k),q.getBufferData(u,F?0:z,0,k)),B&&R.normalized&&(u=Yt.dequantize(u,E,y,N))}if(!c(O)||!c(u))return;r=r??pe.default,i=i??1,o=o??0;let j=O.length;for(let q=0;q<j;q+=3){let $=O[q],H=O[q+1],Z=O[q+2];for(let ee of I){let Ae=_S(u,$,U,P,B,ee,i,o,r,epe),ge=_S(u,H,U,P,B,ee,i,o,r,tpe),ce=_S(u,Z,U,P,B,ee,i,o,r,npe),he=en.rayTriangleParametric(t,Ae,ge,ce,e.backFaceCulling??!0);c(he)&&he<s&&he>=0&&(s=he)}}}}if(s!==Number.MAX_VALUE){if(a=ai.getPoint(t,s,a),n.mode!==Ee.SCENE3D){f.fromElements(a.y,a.z,a.x,a);let d=n.mapProjection,m=d.ellipsoid,p=d.unproject(a,ape);m.cartographicToCartesian(p,a)}return a}}function _S(e,t,n,i,o,r,a,s,A,l){let d=n+t*i;if(l.x=e[d],l.y=e[d+1],l.z=e[d+2],c(o))if(o.octEncoded){if(l=Yt.octDecodeInRange(l,o.normalizationRange,l),o.octEncodedZXY){let m=l.x;l.x=l.z,l.z=l.y,l.y=m}}else l=f.multiplyComponents(l,o.quantizedVolumeStepSize,l),l=f.add(l,o.quantizedVolumeOffset,l);return l=Q.multiplyByPoint(r,l,l),a!==1&&pa.getPosition(l,A,a,s,l),l}var yS=class{constructor(t){this.show=t.show,this.alpha=t.alpha,this.brightness=t.brightness,this.contrast=t.contrast,this.hue=t.hue,this.saturation=t.saturation,this.gamma=t.gamma,this.colorToAlpha=t.colorToAlpha}},Q8=yS;var bS=class{constructor(t){this._model=t,this._modelPrimitiveImageries=void 0,this._imageryConfigurations=[]}update(t){this._hasImagery&&this._allImageryLayersReady&&(c(this._modelPrimitiveImageries)||(this._modelPrimitiveImageries=this._createModelPrimitiveImageries()),this._updateModelPrimitiveImageries(t),this._checkForModifiedImageryConfigurations())}_createModelPrimitiveImageries(){let t=this._model,n=this._collectRuntimeNodesAndPrimitives(),i=[],o=n.length;for(let r=0;r<o;r++){let a=n[r],s=a.runtimeNode,A=a.runtimePrimitive,l=new ay(t,s,A);A.primitive.modelPrimitiveImagery=l,i.push(l)}return i}_collectRuntimeNodesAndPrimitives(){let i=this._model.sceneGraph._runtimeNodes,o=[];for(let r=0;r<i.length;r++){let a=i[r];if(c(a))for(let s=0;s<a.runtimePrimitives.length;s++){let A=a.runtimePrimitives[s];o.push({runtimeNode:a,runtimePrimitive:A})}}return o}_updateModelPrimitiveImageries(t){if(!c(this._modelPrimitiveImageries))throw new be("The modelPrimitiveImageries have not been created");let n=this._modelPrimitiveImageries,i=n.length;for(let o=0;o<i;o++)n[o].update(t)}_deleteModelPrimitiveImageries(){let t=this._modelPrimitiveImageries;if(!c(t))return;let n=t.length;for(let i=0;i<n;i++)t[i].destroy();delete this._modelPrimitiveImageries}get ready(){return this._hasImagery?!(!this._allImageryLayersReady||!this._allModelPrimitiveImageriesReady):!0}get _hasImagery(){let n=this._model.imageryLayers;return c(n)&&n.length>0}get _allImageryLayersReady(){if(!this._hasImagery)return!0;let t=this._model.imageryLayers,n=t.length;for(let i=0;i<n;i++)if(!t.get(i).ready)return!1;return!0}get _allModelPrimitiveImageriesReady(){let t=this._modelPrimitiveImageries;if(!c(t))return!1;let n=t.length;for(let i=0;i<n;i++)if(!t[i].ready)return!1;return!0}_checkForModifiedImageryConfigurations(){this._imageryConfigurationsModified()&&(this._updateImageryConfigurations(),this._model.resetDrawCommands())}_imageryConfigurationsModified(){let n=this._model.imageryLayers,i=this._imageryConfigurations;if(n.length!==i.length)return!0;for(let o=0;o<n.length;o++){let r=n.get(o),a=i[o];if(r.show!==a.show||r.alpha!==a.alpha||r.brightness!==a.brightness||r.contrast!==a.contrast||r.hue!==a.hue||r.saturation!==a.saturation||r.gamma!==a.gamma||r.colorToAlpha!==a.colorToAlpha)return!0}return!1}_updateImageryConfigurations(){let n=this._model.imageryLayers,i=this._imageryConfigurations;i.length=n.length;for(let o=0;o<n.length;o++){let r=n.get(o);i[o]=new Q8(r)}}isDestroyed(){return!1}destroy(){if(!this.isDestroyed())return this._deleteModelPrimitiveImageries(),me(this)}},R8=bS;function Wn(e){e=e??G.EMPTY_OBJECT,this._loader=e.loader,this._resource=e.resource,this.type=e.type??Do.GLTF,this.modelMatrix=Q.clone(e.modelMatrix??Q.IDENTITY),this._modelMatrix=Q.clone(this.modelMatrix),this._scale=e.scale??1,this._minimumPixelSize=e.minimumPixelSize??0,this._maximumScale=e.maximumScale,this._clampedScale=c(this._maximumScale)?Math.min(this._scale,this._maximumScale):this._scale,this._computedScale=this._clampedScale,this._updateModelMatrix=!1,this.referenceMatrix=void 0,this._iblReferenceFrameMatrix=ne.clone(ne.IDENTITY),this._resourcesLoaded=!1,this._drawCommandsBuilt=!1,this._ready=!1,this._customShader=e.customShader,this._content=e.content,this._texturesLoaded=!1,this._defaultTexture=void 0,this._activeAnimations=new qU(this),this._clampAnimations=e.clampAnimations??!0,this._userAnimationDirty=!1,this._id=e.id,this._idDirty=!1,this._color=J.clone(e.color),this._colorBlendMode=e.colorBlendMode??qh.HIGHLIGHT,this._colorBlendAmount=e.colorBlendAmount??.5;let t=e.silhouetteColor??J.RED;this._silhouetteColor=J.clone(t),this._silhouetteSize=e.silhouetteSize??0,this._silhouetteDirty=!1,this._silhouetteId=void 0,this._cull=e.cull??!0,this._opaquePass=e.opaquePass??He.OPAQUE,this._allowPicking=e.allowPicking??!0,this._show=e.show??!0,this._style=void 0,this._styleDirty=!1,this._styleCommandsNeeded=void 0;let n=e.featureIdLabel??"featureId_0";typeof n=="number"&&(n=`featureId_${n}`),this._featureIdLabel=n;let i=e.instanceFeatureIdLabel??"instanceFeatureId_0";typeof i=="number"&&(i=`instanceFeatureId_${i}`),this._instanceFeatureIdLabel=i,this._featureTables=[],this._featureTableId=void 0,this._featureTableIdDirty=!0,this._pipelineResources=[],this._modelResources=[],this._pickIds=[],this._boundingSphere=new le,this._initialRadius=void 0,this._heightReference=e.heightReference??Nr.NONE,this._heightDirty=this._heightReference!==Nr.NONE,this._removeUpdateHeightCallback=void 0,this._enableVerticalExaggeration=e.enableVerticalExaggeration??!0,this._hasVerticalExaggeration=!1,this._clampedModelMatrix=void 0;let o=e.scene;c(o)&&c(o.terrainProviderChanged)&&(this._terrainProviderChangedCallback=o.terrainProviderChanged.addEventListener(()=>{this._heightDirty=!0})),this._scene=o,this._distanceDisplayCondition=e.distanceDisplayCondition;let r=new FI(e.pointCloudShading);this._pointCloudShading=r,this._attenuation=r.attenuation,this._pointCloudBackFaceCulling=r.backFaceCulling;let a=e.clippingPlanes;c(a)&&a.owner===void 0?Yc.setOwner(a,this,"_clippingPlanes"):this._clippingPlanes=a,this._clippingPlanesState=0,this._clippingPlanesMatrix=Q.clone(Q.IDENTITY);let s=e.clippingPolygons;c(s)&&s.owner===void 0?ef.setOwner(s,this,"_clippingPolygons"):this._clippingPolygons=s,this._clippingPolygonsState=0,this._modelImagery=new R8(this),this._lightColor=f.clone(e.lightColor),this._imageBasedLighting=c(e.imageBasedLighting)?e.imageBasedLighting:new O_,this._shouldDestroyImageBasedLighting=!c(e.imageBasedLighting),this._environmentMapManager=void 0;let A=new Wh(e.environmentMapOptions);Wh.setOwner(A,this,"_environmentMapManager"),this._backFaceCulling=e.backFaceCulling??!0,this._backFaceCullingDirty=!1,this._shadows=e.shadows??Yo.ENABLED,this._shadowsDirty=!1,this._debugShowBoundingVolumeDirty=!1,this._debugShowBoundingVolume=e.debugShowBoundingVolume??!1,this._enableDebugWireframe=e.enableDebugWireframe??!1,this._enableShowOutline=e.enableShowOutline??!0,this._debugWireframe=e.debugWireframe??!1,this._debugWireframe===!0&&this._enableDebugWireframe===!1&&this.type===Do.GLTF&&Nn("model-debug-wireframe-ignored","enableDebugWireframe must be set to true in Model.fromGltf, otherwise debugWireframe will be ignored.");let l=e.credit;typeof l=="string"&&(l=new fn(l)),this._credits=[],this._credit=l,this._resourceCredits=[],this._gltfCredits=[],this._showCreditsOnScreen=e.showCreditsOnScreen??!1,this._showCreditsOnScreenDirty=!0,this._splitDirection=e.splitDirection??qa.NONE,this._enableShowOutline=e.enableShowOutline??!0,this.showOutline=e.showOutline??!0,this.outlineColor=e.outlineColor??J.BLACK,this._classificationType=e.classificationType,this._statistics=new b8,this._sceneMode=void 0,this._projectTo2D=e.projectTo2D??!1,this._enablePick=e.enablePick??!1,this._fogRenderable=void 0,this._skipLevelOfDetail=!1,this._ignoreCommands=e.ignoreCommands??!1,this._errorEvent=new Le,this._readyEvent=new Le,this._texturesReadyEvent=new Le,this._sceneGraph=void 0,this._nodesByName={},this.pickObject=e.pickObject}function BS(e,t){if(e._errorEvent.numberOfListeners>0){e._errorEvent.raiseEvent(t);return}console.log(t)}function cpe(e,t){let n=e._featureTables,i=t.propertyTables,o=i.length;for(let r=0;r<o;r++){let a=i[r],s=new JU({model:e,propertyTable:a});n.push(s)}return n}function Ape(e,t){let n=t._featureIdLabel,i=t._instanceFeatureIdLabel,o,r,a,s;for(o=0;o<e.nodes.length;o++)if(s=e.nodes[o],c(s.instances)&&(a=tt.getFeatureIdsByLabel(s.instances.featureIds,i),c(a)&&c(a.propertyTableId)))return a.propertyTableId;for(o=0;o<e.nodes.length;o++)for(s=e.nodes[o],r=0;r<s.primitives.length;r++){let A=s.primitives[r],l=tt.getFeatureIdsByLabel(A.featureIds,n);if(c(l))return l.propertyTableId}if(t._featureTables.length===1)return 0}function SS(e,t){if(!c(e)&&!c(t))return!1;if(c(e)!==c(t))return!0;let n=e.alpha,i=t.alpha;return Math.floor(n)!==Math.floor(i)||Math.ceil(n)!==Math.ceil(i)}Object.defineProperties(Wn.prototype,{ready:{get:function(){return this._ready}},errorEvent:{get:function(){return this._errorEvent}},readyEvent:{get:function(){return this._readyEvent}},incrementallyLoadTextures:{get:function(){return this._loader.incrementallyLoadTextures??!1}},texturesReadyEvent:{get:function(){return this._texturesReadyEvent}},loader:{get:function(){return this._loader}},statistics:{get:function(){return this._statistics}},activeAnimations:{get:function(){return this._activeAnimations}},clampAnimations:{get:function(){return this._clampAnimations},set:function(e){this._clampAnimations=e}},cull:{get:function(){return this._cull}},opaquePass:{get:function(){return this._opaquePass}},pointCloudShading:{get:function(){return this._pointCloudShading},set:function(e){e!==this._pointCloudShading&&this.resetDrawCommands(),this._pointCloudShading=e}},customShader:{get:function(){return this._customShader},set:function(e){e!==this._customShader&&this.resetDrawCommands(),this._customShader=e}},sceneGraph:{get:function(){return this._sceneGraph}},content:{get:function(){return this._content}},heightReference:{get:function(){return this._heightReference},set:function(e){e!==this._heightReference&&(this._heightDirty=!0),this._heightReference=e}},distanceDisplayCondition:{get:function(){return this._distanceDisplayCondition},set:function(e){this._distanceDisplayCondition=to.clone(e,this._distanceDisplayCondition)}},structuralMetadata:{get:function(){return this._sceneGraph.components.structuralMetadata}},featureTableId:{get:function(){return this._featureTableId},set:function(e){this._featureTableId=e}},featureTables:{get:function(){return this._featureTables},set:function(e){this._featureTables=e}},id:{get:function(){return this._id},set:function(e){e!==this._id&&(this._idDirty=!0),this._id=e}},allowPicking:{get:function(){return this._allowPicking}},style:{get:function(){return this._style},set:function(e){this._style=e,this._styleDirty=!0}},color:{get:function(){return this._color},set:function(e){SS(e,this._color)&&this.resetDrawCommands(),this._color=J.clone(e,this._color)}},colorBlendMode:{get:function(){return this._colorBlendMode},set:function(e){this._colorBlendMode=e}},colorBlendAmount:{get:function(){return this._colorBlendAmount},set:function(e){this._colorBlendAmount=e}},silhouetteColor:{get:function(){return this._silhouetteColor},set:function(e){if(!J.equals(e,this._silhouetteColor)){let t=SS(e,this._silhouetteColor);this._silhouetteDirty=this._silhouetteDirty||t}this._silhouetteColor=J.clone(e,this._silhouetteColor)}},silhouetteSize:{get:function(){return this._silhouetteSize},set:function(e){if(e!==this._silhouetteSize){let t=this._silhouetteSize,n=e>0&&t===0||e===0&&t>0;this._silhouetteDirty=this._silhouetteDirty||n,this._backFaceCullingDirty=this._backFaceCullingDirty||n}this._silhouetteSize=e}},boundingSphere:{get:function(){let e=c(this._clampedModelMatrix)?this._clampedModelMatrix:this.modelMatrix;return P8(this,e),this._boundingSphere}},debugShowBoundingVolume:{get:function(){return this._debugShowBoundingVolume},set:function(e){this._debugShowBoundingVolume!==e&&(this._debugShowBoundingVolumeDirty=!0),this._debugShowBoundingVolume=e}},debugWireframe:{get:function(){return this._debugWireframe},set:function(e){this._debugWireframe!==e&&this.resetDrawCommands(),this._debugWireframe=e,this._debugWireframe===!0&&this._enableDebugWireframe===!1&&this.type===Do.GLTF&&Nn("model-debug-wireframe-ignored","enableDebugWireframe must be set to true in Model.fromGltfAsync, otherwise debugWireframe will be ignored.")}},show:{get:function(){return this._show},set:function(e){this._show=e}},featureIdLabel:{get:function(){return this._featureIdLabel},set:function(e){typeof e=="number"&&(e=`featureId_${e}`),e!==this._featureIdLabel&&(this._featureTableIdDirty=!0),this._featureIdLabel=e}},instanceFeatureIdLabel:{get:function(){return this._instanceFeatureIdLabel},set:function(e){typeof e=="number"&&(e=`instanceFeatureId_${e}`),e!==this._instanceFeatureIdLabel&&(this._featureTableIdDirty=!0),this._instanceFeatureIdLabel=e}},clippingPlanes:{get:function(){return this._clippingPlanes},set:function(e){e!==this._clippingPlanes&&(Yc.setOwner(e,this,"_clippingPlanes"),this.resetDrawCommands())}},clippingPolygons:{get:function(){return this._clippingPolygons},set:function(e){e!==this._clippingPolygons&&(ef.setOwner(e,this,"_clippingPolygons"),this.resetDrawCommands())}},enableVerticalExaggeration:{get:function(){return this._enableVerticalExaggeration},set:function(e){e!==this._enableVerticalExaggeration&&this.resetDrawCommands(),this._enableVerticalExaggeration=e}},hasVerticalExaggeration:{get:function(){return this._hasVerticalExaggeration}},imageryLayers:{get:function(){if(c(this._content)){let e=this._content.tileset;if(c(e))return e.imageryLayers}}},lightColor:{get:function(){return this._lightColor},set:function(e){c(e)!==c(this._lightColor)&&this.resetDrawCommands(),this._lightColor=f.clone(e,this._lightColor)}},imageBasedLighting:{get:function(){return this._imageBasedLighting},set:function(e){e!==this._imageBasedLighting&&(this._shouldDestroyImageBasedLighting&&!this._imageBasedLighting.isDestroyed()&&this._imageBasedLighting.destroy(),this._imageBasedLighting=e,this._shouldDestroyImageBasedLighting=!1,this.resetDrawCommands())}},environmentMapManager:{get:function(){return this._environmentMapManager},set:function(e){e!==this.environmentMapManager&&(Wh.setOwner(e,this,"_environmentMapManager"),this.resetDrawCommands())}},backFaceCulling:{get:function(){return this._backFaceCulling},set:function(e){e!==this._backFaceCulling&&(this._backFaceCullingDirty=!0),this._backFaceCulling=e}},scale:{get:function(){return this._scale},set:function(e){e!==this._scale&&(this._updateModelMatrix=!0),this._scale=e}},computedScale:{get:function(){return this._computedScale}},minimumPixelSize:{get:function(){return this._minimumPixelSize},set:function(e){e!==this._minimumPixelSize&&(this._updateModelMatrix=!0),this._minimumPixelSize=e}},maximumScale:{get:function(){return this._maximumScale},set:function(e){e!==this._maximumScale&&(this._updateModelMatrix=!0),this._maximumScale=e}},shadows:{get:function(){return this._shadows},set:function(e){e!==this._shadows&&(this._shadowsDirty=!0),this._shadows=e}},credit:{get:function(){return this._credit}},showCreditsOnScreen:{get:function(){return this._showCreditsOnScreen},set:function(e){this._showCreditsOnScreen!==e&&(this._showCreditsOnScreenDirty=!0),this._showCreditsOnScreen=e}},splitDirection:{get:function(){return this._splitDirection},set:function(e){this._splitDirection!==e&&this.resetDrawCommands(),this._splitDirection=e}},classificationType:{get:function(){return this._classificationType}},pickIds:{get:function(){return this._pickIds}},styleCommandsNeeded:{get:function(){return this._styleCommandsNeeded}}});Wn.prototype.getNode=function(e){return this._nodesByName[e]};Wn.prototype.setArticulationStage=function(e,t){this._sceneGraph.setArticulationStage(e,t)};Wn.prototype.applyArticulations=function(){this._sceneGraph.applyArticulations()};Wn.prototype.getExtension=function(e){return this._loader.components.extensions[e]};Wn.prototype.makeStyleDirty=function(){this._styleDirty=!0};Wn.prototype.resetDrawCommands=function(){this._drawCommandsBuilt=!1};var lpe=new Q,upe=new ne,fpe=new Q;Wn.prototype.update=function(e){let t=!1;try{t=dpe(this,e)}catch(i){if(!this._loader.incrementallyLoadTextures&&i.name==="TextureError")BS(this,i);else{let o=tt.getError("model",this._resource,i);BS(this,o)}}if(hpe(this,e),mpe(this,e),ppe(this,e),!this._resourcesLoaded&&t){this._resourcesLoaded=!0;let i=this._loader.components;if(!c(i)){if(this._loader.isUnloaded())return;let a=tt.getError("model",this._resource,new ae("Failed to load model."));BS(a),this._rejectLoad=this._rejectLoad&&this._rejectLoad(a)}let o=i.structuralMetadata;c(o)&&o.propertyTableCount>0&&cpe(this,o);let r=new y8({model:this,modelComponents:i});this._sceneGraph=r,this._gltfCredits=r.components.asset.credits}if(!this._resourcesLoaded||e.mode===Ee.MORPHING)return;let n=this._modelImagery;if(n.update(e),!(!n.ready&&!(this._content?.tileset?._asynchronouslyLoadImagery??!1))){if(gpe(this),Cpe(this),Epe(this,e),_pe(this),Ipe(this,e),ype(this,e),bpe(this,e),Bpe(this,e),xpe(this,e),Tpe(this,e),Spe(this,e),this._defaultTexture=e.context.defaultTexture,wpe(this,e),Dpe(this,e),Qpe(this),Rpe(this,e),Npe(this,e),!this._ready){e.afterRender.push(()=>{this._ready=!0,this._readyEvent.raiseEvent(this)});return}this._loader.incrementallyLoadTextures&&!this._texturesLoaded&&this._loader.texturesLoaded&&(this.resetDrawCommands(),this._texturesLoaded=!0,this._texturesReadyEvent.raiseEvent(this)),Mpe(this),Lpe(this,e),Fpe(this),Ope(this,e)}};function dpe(e,t){return!e._resourcesLoaded||e._loader.incrementallyLoadTextures&&!e._texturesLoaded?(t.afterRender.push(()=>!0),e._loader.process(t)):!0}function hpe(e,t){c(e._customShader)&&e._customShader.update(t)}function mpe(e,t){let n=e._environmentMapManager,i=t.passes.pick||t.passes.pickVoxel;e._ready&&n.owner===e&&!i&&(n.position=e._boundingSphere.center,n.shouldUpdate=!c(e._imageBasedLighting.sphericalHarmonicCoefficients)||!c(e._imageBasedLighting.specularEnvironmentMaps),n.update(t),n.shouldRegenerateShaders&&e.resetDrawCommands())}function ppe(e,t){e._imageBasedLighting.update(t),e._imageBasedLighting.shouldRegenerateShaders&&e.resetDrawCommands()}function gpe(e){if(!e._featureTableIdDirty)return;e._featureTableIdDirty=!1;let t=e._sceneGraph.components,n=t.structuralMetadata;c(n)&&n.propertyTableCount>0&&(e.featureTableId=Ape(t,e),e._styleDirty=!0,e.resetDrawCommands())}function Cpe(e){e._styleDirty&&(e.applyStyle(e._style),e._styleDirty=!1)}function Epe(e,t){let n=e._featureTables,i=n.length,o=!1;for(let r=0;r<i;r++)n[r].update(t),n[r].styleCommandsNeededDirty&&(o=!0);o&&M8(e)}function M8(e){let t=e.featureTables[e.featureTableId];e._styleCommandsNeeded=lf.getStyleCommandsNeeded(t.featuresLength,t.batchTexture.translucentFeaturesLength)}function _pe(e){let t=e.pointCloudShading;t.attenuation!==e._attenuation&&(e.resetDrawCommands(),e._attenuation=t.attenuation),t.backFaceCulling!==e._pointCloudBackFaceCulling&&(e.resetDrawCommands(),e._pointCloudBackFaceCulling=t.backFaceCulling)}function Ipe(e,t){e._silhouetteDirty&&(N8(t)&&e.resetDrawCommands(),e._silhouetteDirty=!1)}function ype(e,t){let n=e.hasSkipLevelOfDetail(t);n!==e._skipLevelOfDetail&&(e.resetDrawCommands(),e._skipLevelOfDetail=n)}function bpe(e,t){let n=0;e.isClippingEnabled()&&(e._clippingPlanes.owner===e&&e._clippingPlanes.update(t),n=e._clippingPlanes.clippingPlanesState),n!==e._clippingPlanesState&&(e.resetDrawCommands(),e._clippingPlanesState=n)}function Bpe(e,t){let n=0;e.isClippingPolygonsEnabled()&&(e._clippingPolygons.owner===e&&(e._clippingPolygons.update(t),e._clippingPolygons.queueCommands(t)),n=e._clippingPolygons.clippingPolygonsState),n!==e._clippingPolygonsState&&(e.resetDrawCommands(),e._clippingPolygonsState=n)}function xpe(e,t){t.mode!==e._sceneMode&&(e._projectTo2D?e.resetDrawCommands():e._updateModelMatrix=!0,e._sceneMode=t.mode)}function Tpe(e,t){let n=t.fog.enabled&&t.fog.renderable;n!==e._fogRenderable&&(e.resetDrawCommands(),e._fogRenderable=n)}function Spe(e,t){if(e.enableVerticalExaggeration){let n=t.verticalExaggeration!==1;e.hasVerticalExaggeration!==n&&(e.resetDrawCommands(),e._hasVerticalExaggeration=n)}else e.hasVerticalExaggeration&&(e.resetDrawCommands(),e._hasVerticalExaggeration=!1)}function wpe(e,t){e._drawCommandsBuilt||(e.destroyPipelineResources(),e._sceneGraph.buildDrawCommands(t),e._drawCommandsBuilt=!0)}function Dpe(e,t){Q.equals(e.modelMatrix,e._modelMatrix)||(e._updateModelMatrix=!0,e._modelMatrix=Q.clone(e.modelMatrix,e._modelMatrix))}var pf=new f,xS=new ue;function Qpe(e){if(!e._updateModelMatrix&&!e._heightDirty&&e._minimumPixelSize===0)return;c(e._removeUpdateHeightCallback)&&(e._removeUpdateHeightCallback(),e._removeUpdateHeightCallback=void 0);let t=e._scene;if(!c(t)||e.heightReference===Nr.NONE){e._clampedModelMatrix=void 0;return}let n=t.ellipsoid??pe.default,i=e.modelMatrix;pf.x=i[12],pf.y=i[13],pf.z=i[14];let o=n.cartesianToCartographic(pf);c(e._clampedModelMatrix)||(e._clampedModelMatrix=Q.clone(i,new Q)),e._removeUpdateHeightCallback=t.updateHeight(o,v8(e,n,o),e.heightReference);let r=t.getHeight(o,e.heightReference);if(c(r)){let a=v8(e,n,o);ue.clone(o,xS),xS.height=r,a(xS)}e._heightDirty=!1,e._updateModelMatrix=!0}function Rpe(e,t){if(!e._updateModelMatrix&&e._minimumPixelSize===0)return;let n=c(e._clampedModelMatrix)?e._clampedModelMatrix:e.modelMatrix;P8(e,n),vpe(e,n,t)}function P8(e,t){e._clampedScale=c(e._maximumScale)?Math.min(e._scale,e._maximumScale):e._scale,e._boundingSphere.center=f.multiplyByScalar(e._sceneGraph.boundingSphere.center,e._clampedScale,e._boundingSphere.center),e._boundingSphere.radius=e._initialRadius*e._clampedScale,e._boundingSphere=le.transform(e._boundingSphere,t,e._boundingSphere)}function vpe(e,t,n){let i=e.scale;if(e.minimumPixelSize!==0&&!e._projectTo2D){let o=n.context,r=Math.max(o.drawingBufferWidth,o.drawingBufferHeight);Q.getTranslation(t,pf),e._sceneMode!==Ee.SCENE3D&&Fn.computeActualEllipsoidPosition(n,pf,pf);let a=e._boundingSphere.radius,s=kpe(pf,a,n),A=1/s;Math.min(A*(2*a),r)<e.minimumPixelSize&&(i=e.minimumPixelSize*s/(2*e._initialRadius))}e._computedScale=c(e.maximumScale)?Math.min(e.maximumScale,i):i}function Mpe(e){if(!e._idDirty)return;e._idDirty=!1;let t=e._id,n=e._pickIds,i=n.length;for(let o=0;o<i;++o)n[o].object.id=t}var Ppe=new ne(1,0,0,0,0,1,0,-1,0);function Npe(e,t){let n=c(e._clampedModelMatrix)?e._clampedModelMatrix:e.modelMatrix,i=e.referenceMatrix??n,o=t.context,r=upe,a=lpe;if(a=Q.multiply(o.uniformState.view3D,i,a),r=Q.getRotation(a,r),r=ne.transpose(r,r),e._iblReferenceFrameMatrix=ne.multiply(Ppe,r,e._iblReferenceFrameMatrix),e.isClippingEnabled()){let s=fpe;s=Q.multiply(o.uniformState.view3D,i,s),s=Q.multiply(s,e._clippingPlanes.modelMatrix,s),e._clippingPlanesMatrix=Q.inverseTranspose(s,e._clippingPlanesMatrix)}}function Lpe(e,t){let n=e._sceneGraph;if(e._updateModelMatrix||e._minimumPixelSize!==0){let o=c(e._clampedModelMatrix)?e._clampedModelMatrix:e.modelMatrix;n.updateModelMatrix(o,t),e._updateModelMatrix=!1}e._backFaceCullingDirty&&(n.updateBackFaceCulling(e._backFaceCulling),e._backFaceCullingDirty=!1),e._shadowsDirty&&(n.updateShadows(e._shadows),e._shadowsDirty=!1),e._debugShowBoundingVolumeDirty&&(n.updateShowBoundingVolume(e._debugShowBoundingVolume),e._debugShowBoundingVolumeDirty=!1);let i=!1;c(e.classificationType)||(i=e._userAnimationDirty||e._activeAnimations.update(t)),n.update(t,i),e._userAnimationDirty=!1}function Fpe(e){if(!e._showCreditsOnScreenDirty)return;e._showCreditsOnScreenDirty=!1,e._credits.length=0;let t=e._showCreditsOnScreen;if(c(e._credit)){let a=fn.clone(e._credit);a.showOnScreen=a.showOnScreen||t,e._credits.push(a)}let n=e._resourceCredits,i=n.length;for(let a=0;a<i;a++){let s=fn.clone(n[a]);s.showOnScreen=s.showOnScreen||t,e._credits.push(s)}let o=e._gltfCredits,r=o.length;for(let a=0;a<r;a++){let s=fn.clone(o[a]);s.showOnScreen=s.showOnScreen||t,e._credits.push(s)}}function Ope(e,t){let n=zpe(e,t),i=e.isInvisible(),o=e.hasSilhouette(t),r=e._show&&e._computedScale!==0&&n&&(!i||o),a=t.passes,s=a.render||a.pick&&e.allowPicking;r&&!e._ignoreCommands&&s&&(Gpe(e,t),e._sceneGraph.pushDrawCommands(t))}var TS=new le;function kpe(e,t,n){return TS.center=e,TS.radius=t,n.camera.getPixelSize(TS,n.context.drawingBufferWidth,n.context.drawingBufferHeight)}var dy=new f;function v8(e,t,n){return function(i){f_(e.heightReference)&&(i.height+=n.height),t.cartographicToCartesian(i,dy);let o=e._clampedModelMatrix;Q.clone(e.modelMatrix,o),o[12]=dy.x,o[13]=dy.y,o[14]=dy.z,e._heightDirty=!0}}var Upe=new f;function zpe(e,t){let n=e.distanceDisplayCondition;if(!c(n))return!0;let i=n.near*n.near,o=n.far*n.far,r;if(t.mode===Ee.SCENE2D){let s=(t.camera.frustum.right-t.camera.frustum.left)*.5;r=s*s}else{let a=Q.getTranslation(e.modelMatrix,Upe);Fn.computeActualEllipsoidPosition(t,a,a),r=f.distanceSquared(a,t.camera.positionWC)}return r>=i&&r<=o}function Gpe(e,t){let n=t.creditDisplay,i=e._credits,o=i.length;for(let r=0;r<o;r++)n.addCreditToNextFrame(i[r])}Wn.prototype.isTranslucent=function(){let e=this.color;return c(e)&&e.alpha>0&&e.alpha<1};Wn.prototype.isInvisible=function(){let e=this.color;return c(e)&&e.alpha===0};function N8(e){return e.context.stencilBuffer}Wn.prototype.hasSilhouette=function(e){return N8(e)&&this._silhouetteSize>0&&this._silhouetteColor.alpha>0&&!c(this._classificationType)};Wn.prototype.hasSkipLevelOfDetail=function(e){if(!Do.is3DTiles(this.type))return!1;let t=e.context.stencilBuffer,n=this._content.tileset;return t&&n.isSkippingLevelOfDetail};Wn.prototype.isClippingEnabled=function(){let e=this._clippingPlanes;return c(e)&&e.enabled&&e.length!==0};Wn.prototype.pick=function(e,t,n,i,o){return IS(this,e,t,n,i,o)};Wn.prototype.isClippingPolygonsEnabled=function(){let e=this._clippingPolygons;return c(e)&&e.enabled&&e.length!==0};Wn.prototype.isDestroyed=function(){return!1};Wn.prototype.destroy=function(){let e=this._loader;c(e)&&e.destroy();let t=this._featureTables;if(c(t)){let r=t.length;for(let a=0;a<r;a++)t[a].destroy()}this.destroyPipelineResources(),this.destroyModelResources(),c(this._removeUpdateHeightCallback)&&(this._removeUpdateHeightCallback(),this._removeUpdateHeightCallback=void 0),c(this._terrainProviderChangedCallback)&&(this._terrainProviderChangedCallback(),this._terrainProviderChangedCallback=void 0);let n=this._clippingPlanes;c(n)&&!n.isDestroyed()&&n.owner===this&&n.destroy(),this._clippingPlanes=void 0;let i=this._clippingPolygons;c(i)&&!i.isDestroyed()&&i.owner===this&&i.destroy(),this._clippingPolygons=void 0,this._shouldDestroyImageBasedLighting&&!this._imageBasedLighting.isDestroyed()&&this._imageBasedLighting.destroy(),this._imageBasedLighting=void 0;let o=this._environmentMapManager;!o.isDestroyed()&&o.owner===this&&o.destroy(),this._environmentMapManager=void 0,me(this)};Wn.prototype.destroyPipelineResources=function(){let e=this._pipelineResources;for(let t=0;t<e.length;t++)e[t].destroy();this._pipelineResources.length=0,this._pickIds.length=0};Wn.prototype.destroyModelResources=function(){let e=this._modelResources;for(let t=0;t<e.length;t++)e[t].destroy();this._modelResources.length=0};Wn.fromGltfAsync=async function(e){e=e??G.EMPTY_OBJECT;let t=e.url??e.gltf,n={releaseGltfJson:e.releaseGltfJson,asynchronous:e.asynchronous,incrementallyLoadTextures:e.incrementallyLoadTextures,upAxis:e.upAxis,forwardAxis:e.forwardAxis,loadAttributesFor2D:e.projectTo2D,enablePick:e.enablePick,loadIndicesForWireframe:e.enableDebugWireframe,loadPrimitiveOutline:e.enableShowOutline,loadForClassification:c(e.classificationType)},i=e.basePath??"",o=Ye.createIfNeeded(i);c(t.asset)?(n.gltfJson=t,n.baseResource=o,n.gltfResource=o):t instanceof Uint8Array?(n.typedArray=t,n.baseResource=o,n.gltfResource=o):n.gltfResource=Ye.createIfNeeded(t);let r=new of(n),s=c(e.content)?Do.TILE_GLTF:Do.GLTF,A=n.gltfResource,l=cC(r,s,e);l.resource=A,l.environmentMapOptions=e.environmentMapOptions;try{await r.load()}catch(g){throw r.destroy(),tt.getError("model",A,g)}let d=e.gltfCallback;c(d)&&d(r.gltfJson);let m=new Wn(l),p=m._resource.credits;if(c(p)){let g=p.length;for(let h=0;h<g;h++)m._resourceCredits.push(fn.clone(p[h]))}return m};Wn.fromB3dm=async function(e){let t={b3dmResource:e.resource,arrayBuffer:e.arrayBuffer,byteOffset:e.byteOffset,releaseGltfJson:e.releaseGltfJson,asynchronous:e.asynchronous,incrementallyLoadTextures:e.incrementallyLoadTextures,upAxis:e.upAxis,forwardAxis:e.forwardAxis,loadAttributesFor2D:e.projectTo2D,enablePick:e.enablePick,loadIndicesForWireframe:e.enableDebugWireframe,loadPrimitiveOutline:e.enableShowOutline,loadForClassification:c(e.classificationType)},n=new wU(t);try{await n.load();let i=cC(n,Do.TILE_B3DM,e);return new Wn(i)}catch(i){throw n.destroy(),i}};Wn.fromPnts=async function(e){let t={arrayBuffer:e.arrayBuffer,byteOffset:e.byteOffset,loadAttributesFor2D:e.projectTo2D},n=new D8(t);try{await n.load();let i=cC(n,Do.TILE_PNTS,e);return new Wn(i)}catch(i){throw n.destroy(),i}};Wn.fromI3dm=async function(e){let t={i3dmResource:e.resource,arrayBuffer:e.arrayBuffer,byteOffset:e.byteOffset,releaseGltfJson:e.releaseGltfJson,asynchronous:e.asynchronous,incrementallyLoadTextures:e.incrementallyLoadTextures,upAxis:e.upAxis,forwardAxis:e.forwardAxis,loadAttributesFor2D:e.projectTo2D,enablePick:e.enablePick,loadIndicesForWireframe:e.enableDebugWireframe,loadPrimitiveOutline:e.enableShowOutline},n=new NU(t);try{await n.load();let i=cC(n,Do.TILE_I3DM,e);return new Wn(i)}catch(i){throw n.destroy(),i}};Wn.fromGeoJson=async function(e){let t={geoJson:e.geoJson},n=new RU(t),i=cC(n,Do.TILE_GEOJSON,e);return new Wn(i)};var Hpe=new J;Wn.prototype.applyColorAndShow=function(e){let t=J.clone(this._color,Hpe),n=c(e)&&c(e.color),i=c(e)&&c(e.show);this._color=n?e.color.evaluateColor(void 0,this._color):J.clone(J.WHITE,this._color),this._show=i?e.show.evaluate(void 0):!0,SS(t,this._color)&&this.resetDrawCommands()};Wn.prototype.applyStyle=function(e){let t=this.type===Do.TILE_PNTS,n=c(this.featureTableId)&&this.featureTables[this.featureTableId].featuresLength>0,i=c(this.structuralMetadata)?this.structuralMetadata.propertyAttributes:void 0,o=c(i)&&c(i[0]);if(t&&(!n||o)){this.resetDrawCommands();return}n?(this.featureTables[this.featureTableId].applyStyle(e),M8(this,e)):(this.applyColorAndShow(e),this._styleCommandsNeeded=void 0)};function cC(e,t,n){return{loader:e,type:t,resource:n.resource,show:n.show,modelMatrix:n.modelMatrix,scale:n.scale,enableVerticalExaggeration:n.enableVerticalExaggeration,minimumPixelSize:n.minimumPixelSize,maximumScale:n.maximumScale,id:n.id,allowPicking:n.allowPicking,clampAnimations:n.clampAnimations,shadows:n.shadows,debugShowBoundingVolume:n.debugShowBoundingVolume,enableDebugWireframe:n.enableDebugWireframe,debugWireframe:n.debugWireframe,cull:n.cull,opaquePass:n.opaquePass,customShader:n.customShader,content:n.content,heightReference:n.heightReference,scene:n.scene,distanceDisplayCondition:n.distanceDisplayCondition,color:n.color,colorBlendAmount:n.colorBlendAmount,colorBlendMode:n.colorBlendMode,silhouetteColor:n.silhouetteColor,silhouetteSize:n.silhouetteSize,enableShowOutline:n.enableShowOutline,showOutline:n.showOutline,outlineColor:n.outlineColor,clippingPlanes:n.clippingPlanes,clippingPolygons:n.clippingPolygons,lightColor:n.lightColor,imageBasedLighting:n.imageBasedLighting,backFaceCulling:n.backFaceCulling,credit:n.credit,showCreditsOnScreen:n.showCreditsOnScreen,splitDirection:n.splitDirection,projectTo2D:n.projectTo2D,enablePick:n.enablePick,featureIdLabel:n.featureIdLabel,instanceFeatureIdLabel:n.instanceFeatureIdLabel,pointCloudShading:n.pointCloudShading,classificationType:n.classificationType,pickObject:n.pickObject}}var Jc=Wn;function ho(e,t,n){this._tileset=e,this._tile=t,this._resource=n,this._model=void 0,this._metadata=void 0,this._group=void 0,this._ready=!1}Object.defineProperties(ho.prototype,{featuresLength:{get:function(){let e=this._model,t=e.featureTables,n=e.featureTableId;return c(t)&&c(t[n])?t[n].featuresLength:0}},pointsLength:{get:function(){return this._model.statistics.pointsLength}},trianglesLength:{get:function(){return this._model.statistics.trianglesLength}},geometryByteLength:{get:function(){return this._model.statistics.geometryByteLength}},texturesByteLength:{get:function(){return this._model.statistics.texturesByteLength}},batchTableByteLength:{get:function(){let e=this._model.statistics;return e.propertyTablesByteLength+e.batchTexturesByteLength}},innerContents:{get:function(){}},ready:{get:function(){return this._ready}},tileset:{get:function(){return this._tileset}},tile:{get:function(){return this._tile}},url:{get:function(){return this._resource.getUrlComponent(!0)}},batchTable:{get:function(){let e=this._model,t=e.featureTables,n=e.featureTableId;if(c(t)&&c(t[n]))return t[n]}},metadata:{get:function(){return this._metadata},set:function(e){this._metadata=e}},group:{get:function(){return this._group},set:function(e){this._group=e}}});ho.prototype.getTextureIds=function(){return this._model.statistics.getTextureIds()};ho.prototype.getTextureByteLengthById=function(e){return this._model.statistics.getTextureByteLengthById(e)};ho.prototype.getExtension=function(e){return this._model.getExtension(e)};ho.prototype.getFeature=function(e){let t=this._model,n=t.featureTableId;return t.featureTables[n].getFeature(e)};ho.prototype.hasProperty=function(e,t){let n=this._model,i=n.featureTableId;return c(i)?n.featureTables[i].hasProperty(e,t):!1};ho.prototype.applyDebugSettings=function(e,t){t=e?t:J.WHITE,this.featuresLength===0?this._model.color=t:c(this.batchTable)&&this.batchTable.setAllColor(t)};ho.prototype.applyStyle=function(e){this._model.style=e};ho.prototype.update=function(e,t){let n=this._model,i=this._tile;n.colorBlendAmount=e.colorBlendAmount,n.colorBlendMode=e.colorBlendMode,n.modelMatrix=i.computedTransform,n.customShader=e.customShader,n.featureIdLabel=e.featureIdLabel,n.instanceFeatureIdLabel=e.instanceFeatureIdLabel,n.lightColor=e.lightColor,n.imageBasedLighting=e.imageBasedLighting,n.backFaceCulling=e.backFaceCulling,n.shadows=e.shadows,n.showCreditsOnScreen=e.showCreditsOnScreen,n.splitDirection=e.splitDirection,n.debugWireframe=e.debugWireframe,n.showOutline=e.showOutline,n.outlineColor=e.outlineColor,n.pointCloudShading=e.pointCloudShading;let o=e.clippingPlanes;n.referenceMatrix=e.clippingPlanesOriginMatrix,c(o)&&i.clippingPlanesDirty&&(n._clippingPlanes=o.enabled&&i._isClipped?o:void 0);let r=e.environmentMapManager;n.environmentMapManager!==o&&(n._environmentMapManager=r),c(o)&&c(n._clippingPlanes)&&n._clippingPlanes!==o&&(n._clippingPlanes=o,n._clippingPlanesState=0);let a=e.clippingPolygons;c(a)&&i.clippingPolygonsDirty&&(n._clippingPolygons=a.enabled&&i._isClippedByPolygon?a:void 0),c(a)&&c(n._clippingPolygons)&&n._clippingPolygons!==a&&(n._clippingPolygons=a,n._clippingPolygonsState=0),n.update(t),!this._ready&&n.ready&&(n.activeAnimations.addAll({loop:Rl.REPEAT}),this._ready=!0)};ho.prototype.isDestroyed=function(){return!1};ho.prototype.destroy=function(){return this._model=this._model&&this._model.destroy(),me(this)};ho.fromGltf=async function(e,t,n,i){let o=new ho(e,t,n),a=AC(e,t,o,{gltf:i,basePath:n}),s=e.vectorClassificationOnly?void 0:e.classificationType;a.classificationType=s;let A=await Jc.fromGltfAsync(a);return o._model=A,o};ho.fromB3dm=async function(e,t,n,i,o){let r=new ho(e,t,n),s=AC(e,t,r,{arrayBuffer:i,byteOffset:o,resource:n}),A=e.vectorClassificationOnly?void 0:e.classificationType;s.classificationType=A;let l=await Jc.fromB3dm(s);return r._model=l,r};ho.fromI3dm=async function(e,t,n,i,o){let r=new ho(e,t,n),s=AC(e,t,r,{arrayBuffer:i,byteOffset:o,resource:n}),A=await Jc.fromI3dm(s);return r._model=A,r};ho.fromPnts=async function(e,t,n,i,o){let r=new ho(e,t,n),s=AC(e,t,r,{arrayBuffer:i,byteOffset:o,resource:n}),A=await Jc.fromPnts(s);return r._model=A,r};ho.fromGeoJson=async function(e,t,n,i){let o=new ho(e,t,n),a=AC(e,t,o,{geoJson:i,resource:n}),s=await Jc.fromGeoJson(a);return o._model=s,o};ho.prototype.pick=function(e,t,n){if(!c(this._model)||!this._ready)return;let i=t.verticalExaggeration,o=t.verticalExaggerationRelativeHeight;return this._model.pick(e,t,i,o,pe.WGS84,n)};function AC(e,t,n,i){let o={cull:!1,releaseGltfJson:!0,opaquePass:He.CESIUM_3D_TILE,modelMatrix:t.computedTransform,upAxis:e._modelUpAxis,forwardAxis:e._modelForwardAxis,incrementallyLoadTextures:!1,customShader:e.customShader,content:n,colorBlendMode:e.colorBlendMode,colorBlendAmount:e.colorBlendAmount,lightColor:e.lightColor,imageBasedLighting:e.imageBasedLighting,featureIdLabel:e.featureIdLabel,instanceFeatureIdLabel:e.instanceFeatureIdLabel,pointCloudShading:e.pointCloudShading,clippingPlanes:e.clippingPlanes,backFaceCulling:e.backFaceCulling,shadows:e.shadows,showCreditsOnScreen:e.showCreditsOnScreen,splitDirection:e.splitDirection,enableDebugWireframe:e._enableDebugWireframe,debugWireframe:e.debugWireframe,projectTo2D:e._projectTo2D,enablePick:e._enablePick,enableShowOutline:e._enableShowOutline,showOutline:e.showOutline,outlineColor:e.outlineColor};return dt(i,o)}var NA=ho;function Ac(e,t,n){this._tileset=e,this._tile=t,this._resource=n,this.featurePropertiesDirty=!1,this._metadata=void 0,this._group=void 0,this._ready=!1}Object.defineProperties(Ac.prototype,{featuresLength:{get:function(){return 0}},pointsLength:{get:function(){return 0}},trianglesLength:{get:function(){return 0}},geometryByteLength:{get:function(){return 0}},texturesByteLength:{get:function(){return 0}},batchTableByteLength:{get:function(){return 0}},innerContents:{get:function(){}},ready:{get:function(){return this._ready}},tileset:{get:function(){return this._tileset}},tile:{get:function(){return this._tile}},url:{get:function(){return this._resource.getUrlComponent(!0)}},batchTable:{get:function(){}},metadata:{get:function(){return this._metadata},set:function(e){this._metadata=e}},group:{get:function(){return this._group},set:function(e){this._group=e}}});Ac.fromJson=function(e,t,n,i){let o=new Ac(e,t,n);return o._tileset.loadTileset(o._resource,i,o._tile),o._ready=!0,o};Ac.prototype.hasProperty=function(e,t){return!1};Ac.prototype.getFeature=function(e){};Ac.prototype.applyDebugSettings=function(e,t){};Ac.prototype.applyStyle=function(e){};Ac.prototype.update=function(e,t){};Ac.prototype.pick=function(e,t,n){};Ac.prototype.isDestroyed=function(){return!1};Ac.prototype.destroy=function(){return me(this)};var L8=Ac;var F8=`uniform sampler2D u_atlas;

#ifdef VECTOR_TILE
uniform vec4 u_highlightColor;
#endif

in vec2 v_textureCoordinates;
in vec4 v_pickColor;
in vec4 v_color;
in float v_splitDirection;

#ifdef SDF
in vec4 v_outlineColor;
in float v_outlineWidth;
#endif

#ifdef FRAGMENT_DEPTH_CHECK
in vec4 v_textureCoordinateBounds;                  // the min and max x and y values for the texture coordinates
in vec4 v_originTextureCoordinateAndTranslate;      // texture coordinate at the origin, billboard translate (used for label glyphs)
in vec4 v_compressed;                               // x: eyeDepth, y: applyTranslate & enableDepthCheck, z: dimensions, w: imageSize
in mat2 v_rotationMatrix;

const float SHIFT_LEFT12 = 4096.0;
const float SHIFT_LEFT1 = 2.0;

const float SHIFT_RIGHT12 = 1.0 / 4096.0;
const float SHIFT_RIGHT1 = 1.0 / 2.0;

float getGlobeDepth(vec2 adjustedST, vec2 depthLookupST, bool applyTranslate, vec2 dimensions, vec2 imageSize)
{
    vec2 lookupVector = imageSize * (depthLookupST - adjustedST);
    lookupVector = v_rotationMatrix * lookupVector;
    vec2 labelOffset = (dimensions - imageSize) * (depthLookupST - vec2(0.0, v_originTextureCoordinateAndTranslate.y)); // aligns label glyph with bounding rectangle.  Will be zero for billboards because dimensions and imageSize will be equal

    vec2 translation = v_originTextureCoordinateAndTranslate.zw;

    if (applyTranslate)
    {
        // this is only needed for labels where the horizontal origin is not LEFT
        // it moves the label back to where the "origin" should be since all label glyphs are set to HorizontalOrigin.LEFT
        translation += (dimensions * v_originTextureCoordinateAndTranslate.xy * vec2(1.0, 0.0));
    }

    vec2 st = ((lookupVector - translation + labelOffset) + gl_FragCoord.xy) / czm_viewport.zw;
    float logDepthOrDepth = czm_unpackDepth(texture(czm_globeDepthTexture, st));

    if (logDepthOrDepth == 0.0)
    {
        return 0.0; // not on the globe
    }

    vec4 eyeCoordinate = czm_windowToEyeCoordinates(gl_FragCoord.xy, logDepthOrDepth);
    return eyeCoordinate.z / eyeCoordinate.w;
}
#endif


#ifdef SDF

// Get the distance from the edge of a glyph at a given position sampling an SDF texture.
float getDistance(vec2 position)
{
    return texture(u_atlas, position).r;
}

// Samples the sdf texture at the given position and produces a color based on the fill color and the outline.
vec4 getSDFColor(vec2 position, float outlineWidth, vec4 outlineColor, float smoothing)
{
    float distance = getDistance(position);

    if (outlineWidth > 0.0)
    {
        // Don't get the outline edge exceed the SDF_EDGE
        float outlineEdge = clamp(SDF_EDGE - outlineWidth, 0.0, SDF_EDGE);
        float outlineFactor = smoothstep(SDF_EDGE - smoothing, SDF_EDGE + smoothing, distance);
        vec4 sdfColor = mix(outlineColor, v_color, outlineFactor);
        float alpha = smoothstep(outlineEdge - smoothing, outlineEdge + smoothing, distance);
        return vec4(sdfColor.rgb, sdfColor.a * alpha);
    }
    else
    {
        float alpha = smoothstep(SDF_EDGE - smoothing, SDF_EDGE + smoothing, distance);
        return vec4(v_color.rgb, v_color.a * alpha);
    }
}
#endif

void main()
{
    if (v_splitDirection < 0.0 && gl_FragCoord.x > czm_splitPosition) discard;
    if (v_splitDirection > 0.0 && gl_FragCoord.x < czm_splitPosition) discard;
    
    vec4 color = texture(u_atlas, v_textureCoordinates);

#ifdef SDF
    float outlineWidth = v_outlineWidth;
    vec4 outlineColor = v_outlineColor;

    // Get the current distance
    float distance = getDistance(v_textureCoordinates);

#if (__VERSION__ == 300 || defined(GL_OES_standard_derivatives))
    float smoothing = fwidth(distance);
    // Get an offset that is approximately half the distance to the neighbor pixels
    // 0.354 is approximately half of 1/sqrt(2)
    vec2 sampleOffset = 0.354 * vec2(dFdx(v_textureCoordinates) + dFdy(v_textureCoordinates));

    // Sample the center point
    vec4 center = getSDFColor(v_textureCoordinates, outlineWidth, outlineColor, smoothing);

    // Sample the 4 neighbors
    vec4 color1 = getSDFColor(v_textureCoordinates + vec2(sampleOffset.x, sampleOffset.y), outlineWidth, outlineColor, smoothing);
    vec4 color2 = getSDFColor(v_textureCoordinates + vec2(-sampleOffset.x, sampleOffset.y), outlineWidth, outlineColor, smoothing);
    vec4 color3 = getSDFColor(v_textureCoordinates + vec2(-sampleOffset.x, -sampleOffset.y), outlineWidth, outlineColor, smoothing);
    vec4 color4 = getSDFColor(v_textureCoordinates + vec2(sampleOffset.x, -sampleOffset.y), outlineWidth, outlineColor, smoothing);

    // Equally weight the center sample and the 4 neighboring samples
    color = (center + color1 + color2 + color3 + color4)/5.0;
#else
    // If no derivatives available (IE 10?), just do a single sample
    float smoothing = 1.0/32.0;
    color = getSDFColor(v_textureCoordinates, outlineWidth, outlineColor, smoothing);
#endif

    color = czm_gammaCorrect(color);
#else
    color = czm_gammaCorrect(color);
    color *= czm_gammaCorrect(v_color);
#endif

// Fully transparent parts of the billboard are not pickable.
#if !defined(OPAQUE) && !defined(TRANSLUCENT)
    if (color.a < 0.005)   // matches 0/255 and 1/255
    {
        discard;
    }
#else
// The billboard is rendered twice. The opaque pass discards translucent fragments
// and the translucent pass discards opaque fragments.
#ifdef OPAQUE
    if (color.a < 0.995)   // matches < 254/255
    {
        discard;
    }
#else
    if (color.a >= 0.995)  // matches 254/255 and 255/255
    {
        discard;
    }
#endif
#endif

#ifdef VECTOR_TILE
    color *= u_highlightColor;
#endif
    out_FragColor = color;

#ifdef LOG_DEPTH
    czm_writeLogDepth();
#endif

#ifdef FRAGMENT_DEPTH_CHECK
    float temp = v_compressed.y;

    temp = temp * SHIFT_RIGHT1;

    float temp2 = (temp - floor(temp)) * SHIFT_LEFT1;
    bool enableDepthTest = temp2 != 0.0;
    bool applyTranslate = floor(temp) != 0.0;

    if (enableDepthTest) {
        temp = v_compressed.z;
        temp = temp * SHIFT_RIGHT12;

        vec2 dimensions;
        dimensions.y = (temp - floor(temp)) * SHIFT_LEFT12;
        dimensions.x = floor(temp);

        temp = v_compressed.w;
        temp = temp * SHIFT_RIGHT12;

        vec2 imageSize;
        imageSize.y = (temp - floor(temp)) * SHIFT_LEFT12;
        imageSize.x = floor(temp);

        vec2 adjustedST = v_textureCoordinates - v_textureCoordinateBounds.xy;
        adjustedST = adjustedST / vec2(v_textureCoordinateBounds.z - v_textureCoordinateBounds.x, v_textureCoordinateBounds.w - v_textureCoordinateBounds.y);

        float epsilonEyeDepth = v_compressed.x + czm_epsilon1;
        float globeDepth1 = getGlobeDepth(adjustedST, v_originTextureCoordinateAndTranslate.xy, applyTranslate, dimensions, imageSize);

        // negative values go into the screen
        if (globeDepth1 != 0.0 && globeDepth1 > epsilonEyeDepth)
        {
            float globeDepth2 = getGlobeDepth(adjustedST, vec2(0.0, 1.0), applyTranslate, dimensions, imageSize); // top left corner
            if (globeDepth2 != 0.0 && globeDepth2 > epsilonEyeDepth)
            {
                float globeDepth3 = getGlobeDepth(adjustedST, vec2(1.0, 1.0), applyTranslate, dimensions, imageSize); // top right corner
                if (globeDepth3 != 0.0 && globeDepth3 > epsilonEyeDepth)
                {
                    discard;
                }
            }
        }
    }
#endif

}
`;var O8=`#ifdef INSTANCED
in vec2 direction;
#endif
in vec4 positionHighAndScale;
in vec4 positionLowAndRotation;
in vec4 compressedAttribute0;                       // pixel offset, translate, horizontal origin, vertical origin, show, direction, texture coordinates (texture offset)
in vec4 compressedAttribute1;                       // aligned axis, translucency by distance, image width
in vec4 compressedAttribute2;                       // label horizontal origin, image height, color, pick color, size in meters, valid aligned axis, 13 bits free
in vec4 eyeOffset;                                  // eye offset in meters, 4 bytes free (texture range)
in vec4 scaleByDistance;                            // near, nearScale, far, farScale
in vec4 pixelOffsetScaleByDistance;                 // near, nearScale, far, farScale
in vec4 compressedAttribute3;                       // distance display condition near, far, disableDepthTestDistance, dimensions
in vec2 sdf;                                        // sdf outline color (rgb) and width (w)
in float splitDirection;                            // splitDirection
#if defined(VERTEX_DEPTH_CHECK) || defined(FRAGMENT_DEPTH_CHECK)
in vec4 textureCoordinateBoundsOrLabelTranslate;    // the min and max x and y values for the texture coordinates
#endif
#ifdef VECTOR_TILE
in float a_batchId;
#endif

out vec2 v_textureCoordinates;
#ifdef FRAGMENT_DEPTH_CHECK
out vec4 v_textureCoordinateBounds;
out vec4 v_originTextureCoordinateAndTranslate;
out vec4 v_compressed;                                 // x: eyeDepth, y: applyTranslate & enableDepthCheck, z: dimensions, w: imageSize
out mat2 v_rotationMatrix;
#endif

out vec4 v_pickColor;
out vec4 v_color;
out float v_splitDirection;
#ifdef SDF
out vec4 v_outlineColor;
out float v_outlineWidth;
#endif

const float UPPER_BOUND = 32768.0;

const float SHIFT_LEFT16 = 65536.0;
const float SHIFT_LEFT12 = 4096.0;
const float SHIFT_LEFT8 = 256.0;
const float SHIFT_LEFT7 = 128.0;
const float SHIFT_LEFT5 = 32.0;
const float SHIFT_LEFT3 = 8.0;
const float SHIFT_LEFT2 = 4.0;
const float SHIFT_LEFT1 = 2.0;

const float SHIFT_RIGHT12 = 1.0 / 4096.0;
const float SHIFT_RIGHT8 = 1.0 / 256.0;
const float SHIFT_RIGHT7 = 1.0 / 128.0;
const float SHIFT_RIGHT5 = 1.0 / 32.0;
const float SHIFT_RIGHT3 = 1.0 / 8.0;
const float SHIFT_RIGHT2 = 1.0 / 4.0;
const float SHIFT_RIGHT1 = 1.0 / 2.0;

vec4 addScreenSpaceOffset(vec4 positionEC, vec2 imageSize, float scale, vec2 direction, vec2 origin, vec2 translate, vec2 pixelOffset, vec3 alignedAxis, bool validAlignedAxis, float rotation, bool sizeInMeters, out mat2 rotationMatrix, out float mpp)
{
    // Note the halfSize cannot be computed in JavaScript because it is sent via
    // compressed vertex attributes that coerce it to an integer.
    vec2 halfSize = imageSize * scale * 0.5;
    halfSize *= ((direction * 2.0) - 1.0);

    vec2 originTranslate = origin * abs(halfSize);

#if defined(ROTATION) || defined(ALIGNED_AXIS)
    if (validAlignedAxis || rotation != 0.0)
    {
        float angle = rotation;
        if (validAlignedAxis)
        {
            vec4 projectedAlignedAxis = czm_modelView3D * vec4(alignedAxis, 0.0);
            angle += sign(-projectedAlignedAxis.x) * acos(sign(projectedAlignedAxis.y) * (projectedAlignedAxis.y * projectedAlignedAxis.y) /
                    (projectedAlignedAxis.x * projectedAlignedAxis.x + projectedAlignedAxis.y * projectedAlignedAxis.y));
        }

        float cosTheta = cos(angle);
        float sinTheta = sin(angle);
        rotationMatrix = mat2(cosTheta, sinTheta, -sinTheta, cosTheta);
        halfSize = rotationMatrix * halfSize;
    }
    else
    {
        rotationMatrix = mat2(1.0, 0.0, 0.0, 1.0);
    }
#endif

    mpp = czm_metersPerPixel(positionEC);
    positionEC.xy += (originTranslate + halfSize) * czm_branchFreeTernary(sizeInMeters, 1.0, mpp);
    positionEC.xy += (translate + pixelOffset) * mpp;

    return positionEC;
}

#ifdef VERTEX_DEPTH_CHECK
float getGlobeDepth(vec4 positionEC)
{
    vec4 posWC = czm_eyeToWindowCoordinates(positionEC);

    float globeDepth = czm_unpackDepth(texture(czm_globeDepthTexture, posWC.xy / czm_viewport.zw));

    if (globeDepth == 0.0)
    {
        return 0.0; // not on the globe
    }

    vec4 eyeCoordinate = czm_windowToEyeCoordinates(posWC.xy, globeDepth);
    return eyeCoordinate.z / eyeCoordinate.w;
}
#endif
void main()
{
    // Modifying this shader may also require modifications to Billboard._computeScreenSpacePosition

    // unpack attributes
    vec3 positionHigh = positionHighAndScale.xyz;
    vec3 positionLow = positionLowAndRotation.xyz;
    float scale = positionHighAndScale.w;

#if defined(ROTATION) || defined(ALIGNED_AXIS)
    float rotation = positionLowAndRotation.w;
#else
    float rotation = 0.0;
#endif

    float compressed = compressedAttribute0.x;

    vec2 pixelOffset;
    pixelOffset.x = floor(compressed * SHIFT_RIGHT7);
    compressed -= pixelOffset.x * SHIFT_LEFT7;
    pixelOffset.x -= UPPER_BOUND;

    vec2 origin;
    origin.x = floor(compressed * SHIFT_RIGHT5);
    compressed -= origin.x * SHIFT_LEFT5;

    origin.y = floor(compressed * SHIFT_RIGHT3);
    compressed -= origin.y * SHIFT_LEFT3;

#ifdef FRAGMENT_DEPTH_CHECK
    vec2 depthOrigin = origin.xy;
#endif
    origin -= vec2(1.0);

    float show = floor(compressed * SHIFT_RIGHT2);
    compressed -= show * SHIFT_LEFT2;

#ifdef INSTANCED
    vec2 textureCoordinatesBottomLeft = czm_decompressTextureCoordinates(compressedAttribute0.w);
    vec2 textureCoordinatesRange = czm_decompressTextureCoordinates(eyeOffset.w);
    vec2 textureCoordinates = textureCoordinatesBottomLeft + direction * textureCoordinatesRange;
#else
    vec2 direction;
    direction.x = floor(compressed * SHIFT_RIGHT1);
    direction.y = compressed - direction.x * SHIFT_LEFT1;

    vec2 textureCoordinates = czm_decompressTextureCoordinates(compressedAttribute0.w);
#endif

    float temp = compressedAttribute0.y  * SHIFT_RIGHT8;
    pixelOffset.y = -(floor(temp) - UPPER_BOUND);

    vec2 translate;
    translate.y = (temp - floor(temp)) * SHIFT_LEFT16;

    temp = compressedAttribute0.z * SHIFT_RIGHT8;
    translate.x = floor(temp) - UPPER_BOUND;

    translate.y += (temp - floor(temp)) * SHIFT_LEFT8;
    translate.y -= UPPER_BOUND;

    temp = compressedAttribute1.x * SHIFT_RIGHT8;
    float temp2 = floor(compressedAttribute2.w * SHIFT_RIGHT2);

    vec2 imageSize = vec2(floor(temp), temp2);

#ifdef FRAGMENT_DEPTH_CHECK
    float labelHorizontalOrigin = floor(compressedAttribute2.w - (temp2 * SHIFT_LEFT2));
    float applyTranslate = 0.0;
    if (labelHorizontalOrigin != 0.0) // is a billboard, so set apply translate to false
    {
        applyTranslate = 1.0;
        labelHorizontalOrigin -= 2.0;
        depthOrigin.x = labelHorizontalOrigin + 1.0;
    }

    depthOrigin = vec2(1.0) - (depthOrigin * 0.5);
#endif

#ifdef EYE_DISTANCE_TRANSLUCENCY
    vec4 translucencyByDistance;
    translucencyByDistance.x = compressedAttribute1.z;
    translucencyByDistance.z = compressedAttribute1.w;

    translucencyByDistance.y = ((temp - floor(temp)) * SHIFT_LEFT8) / 255.0;

    temp = compressedAttribute1.y * SHIFT_RIGHT8;
    translucencyByDistance.w = ((temp - floor(temp)) * SHIFT_LEFT8) / 255.0;
#endif

#if defined(VERTEX_DEPTH_CHECK) || defined(FRAGMENT_DEPTH_CHECK)
    temp = compressedAttribute3.w;
    temp = temp * SHIFT_RIGHT12;

    vec2 dimensions;
    dimensions.y = (temp - floor(temp)) * SHIFT_LEFT12;
    dimensions.x = floor(temp);
#endif

#ifdef ALIGNED_AXIS
    vec3 alignedAxis = czm_octDecode(floor(compressedAttribute1.y * SHIFT_RIGHT8));
    temp = compressedAttribute2.z * SHIFT_RIGHT5;
    bool validAlignedAxis = (temp - floor(temp)) * SHIFT_LEFT1 > 0.0;
#else
    vec3 alignedAxis = vec3(0.0);
    bool validAlignedAxis = false;
#endif

    vec4 pickColor;
    vec4 color;

    temp = compressedAttribute2.y;
    temp = temp * SHIFT_RIGHT8;
    pickColor.b = (temp - floor(temp)) * SHIFT_LEFT8;
    temp = floor(temp) * SHIFT_RIGHT8;
    pickColor.g = (temp - floor(temp)) * SHIFT_LEFT8;
    pickColor.r = floor(temp);

    temp = compressedAttribute2.x;
    temp = temp * SHIFT_RIGHT8;
    color.b = (temp - floor(temp)) * SHIFT_LEFT8;
    temp = floor(temp) * SHIFT_RIGHT8;
    color.g = (temp - floor(temp)) * SHIFT_LEFT8;
    color.r = floor(temp);

    temp = compressedAttribute2.z * SHIFT_RIGHT8;
    bool sizeInMeters = floor((temp - floor(temp)) * SHIFT_LEFT7) > 0.0;
    temp = floor(temp) * SHIFT_RIGHT8;

    pickColor.a = (temp - floor(temp)) * SHIFT_LEFT8;
    pickColor /= 255.0;

    color.a = floor(temp);
    color /= 255.0;

    ///////////////////////////////////////////////////////////////////////////

    vec4 p = czm_translateRelativeToEye(positionHigh, positionLow);
    vec4 positionEC = czm_modelViewRelativeToEye * p;

#if defined(FRAGMENT_DEPTH_CHECK) || defined(VERTEX_DEPTH_CHECK)
    float eyeDepth = positionEC.z;
#endif

    positionEC = czm_eyeOffset(positionEC, eyeOffset.xyz);
    positionEC.xyz *= show;

    ///////////////////////////////////////////////////////////////////////////

#if defined(EYE_DISTANCE_SCALING) || defined(EYE_DISTANCE_TRANSLUCENCY) || defined(EYE_DISTANCE_PIXEL_OFFSET) || defined(DISTANCE_DISPLAY_CONDITION) || defined(DISABLE_DEPTH_DISTANCE)
    float lengthSq;
    if (czm_sceneMode == czm_sceneMode2D)
    {
        // 2D camera distance is a special case
        // treat all billboards as flattened to the z=0.0 plane
        lengthSq = czm_eyeHeight2D.y;
    }
    else
    {
        lengthSq = dot(positionEC.xyz, positionEC.xyz);
    }
#endif

#ifdef EYE_DISTANCE_SCALING
    float distanceScale = czm_nearFarScalar(scaleByDistance, lengthSq);
    scale *= distanceScale;
    translate *= distanceScale;
    // push vertex behind near plane for clipping
    if (scale == 0.0)
    {
        positionEC.xyz = vec3(0.0);
    }
#endif

    float translucency = 1.0;
#ifdef EYE_DISTANCE_TRANSLUCENCY
    translucency = czm_nearFarScalar(translucencyByDistance, lengthSq);
    // push vertex behind near plane for clipping
    if (translucency == 0.0)
    {
        positionEC.xyz = vec3(0.0);
    }
#endif

#ifdef EYE_DISTANCE_PIXEL_OFFSET
    float pixelOffsetScale = czm_nearFarScalar(pixelOffsetScaleByDistance, lengthSq);
    pixelOffset *= pixelOffsetScale;
#endif

#ifdef DISTANCE_DISPLAY_CONDITION
    float nearSq = compressedAttribute3.x;
    float farSq = compressedAttribute3.y;
    if (lengthSq < nearSq || lengthSq > farSq)
    {
        positionEC.xyz = vec3(0.0);
    }
#endif

    mat2 rotationMatrix;
    float mpp;

#ifdef DISABLE_DEPTH_DISTANCE
    float disableDepthTestDistance = compressedAttribute3.z;
#endif

#ifdef VERTEX_DEPTH_CHECK
if (lengthSq < disableDepthTestDistance) {
    float depthsilon = 10.0;

    vec2 labelTranslate = textureCoordinateBoundsOrLabelTranslate.xy;
    vec4 pEC1 = addScreenSpaceOffset(positionEC, dimensions, scale, vec2(0.0), origin, labelTranslate, pixelOffset, alignedAxis, validAlignedAxis, rotation, sizeInMeters, rotationMatrix, mpp);
    float globeDepth1 = getGlobeDepth(pEC1);

    if (globeDepth1 != 0.0 && pEC1.z + depthsilon < globeDepth1)
    {
        vec4 pEC2 = addScreenSpaceOffset(positionEC, dimensions, scale, vec2(0.0, 1.0), origin, labelTranslate, pixelOffset, alignedAxis, validAlignedAxis, rotation, sizeInMeters, rotationMatrix, mpp);
        float globeDepth2 = getGlobeDepth(pEC2);

        if (globeDepth2 != 0.0 && pEC2.z + depthsilon < globeDepth2)
        {
            vec4 pEC3 = addScreenSpaceOffset(positionEC, dimensions, scale, vec2(1.0), origin, labelTranslate, pixelOffset, alignedAxis, validAlignedAxis, rotation, sizeInMeters, rotationMatrix, mpp);
            float globeDepth3 = getGlobeDepth(pEC3);
            if (globeDepth3 != 0.0 && pEC3.z + depthsilon < globeDepth3)
            {
                positionEC.xyz = vec3(0.0);
            }
        }
    }
}
#endif

    positionEC = addScreenSpaceOffset(positionEC, imageSize, scale, direction, origin, translate, pixelOffset, alignedAxis, validAlignedAxis, rotation, sizeInMeters, rotationMatrix, mpp);
    gl_Position = czm_projection * positionEC;
    v_textureCoordinates = textureCoordinates;

#ifdef LOG_DEPTH
    czm_vertexLogDepth();
#endif

#ifdef DISABLE_DEPTH_DISTANCE
    if (disableDepthTestDistance == 0.0 && czm_minimumDisableDepthTestDistance != 0.0)
    {
        disableDepthTestDistance = czm_minimumDisableDepthTestDistance;
    }

    if (disableDepthTestDistance != 0.0)
    {
        // Don't try to "multiply both sides" by w.  Greater/less-than comparisons won't work for negative values of w.
        float zclip = gl_Position.z / gl_Position.w;
        bool clipped = (zclip < -1.0 || zclip > 1.0);
        if (!clipped && (disableDepthTestDistance < 0.0 || (lengthSq > 0.0 && lengthSq < disableDepthTestDistance)))
        {
            // Position z on the near plane.
            gl_Position.z = -gl_Position.w;
#ifdef LOG_DEPTH
            v_depthFromNearPlusOne = 1.0;
#endif
        }
    }
#endif

#ifdef FRAGMENT_DEPTH_CHECK
    if (sizeInMeters) {
        translate /= mpp;
        dimensions /= mpp;
        imageSize /= mpp;
    }

#if defined(ROTATION) || defined(ALIGNED_AXIS)
    v_rotationMatrix = rotationMatrix;
#else
    v_rotationMatrix = mat2(1.0, 0.0, 0.0, 1.0);
#endif

    float enableDepthCheck = 0.0;
    if (lengthSq < disableDepthTestDistance)
    {
        enableDepthCheck = 1.0;
    }

    float dw = floor(clamp(dimensions.x, 0.0, SHIFT_LEFT12));
    float dh = floor(clamp(dimensions.y, 0.0, SHIFT_LEFT12));

    float iw = floor(clamp(imageSize.x, 0.0, SHIFT_LEFT12));
    float ih = floor(clamp(imageSize.y, 0.0, SHIFT_LEFT12));

    v_compressed.x = eyeDepth;
    v_compressed.y = applyTranslate * SHIFT_LEFT1 + enableDepthCheck;
    v_compressed.z = dw * SHIFT_LEFT12 + dh;
    v_compressed.w = iw * SHIFT_LEFT12 + ih;
    v_originTextureCoordinateAndTranslate.xy = depthOrigin;
    v_originTextureCoordinateAndTranslate.zw = translate;
    v_textureCoordinateBounds = textureCoordinateBoundsOrLabelTranslate;

#endif

#ifdef SDF
    vec4 outlineColor;
    float outlineWidth;

    temp = sdf.x;
    temp = temp * SHIFT_RIGHT8;
    outlineColor.b = (temp - floor(temp)) * SHIFT_LEFT8;
    temp = floor(temp) * SHIFT_RIGHT8;
    outlineColor.g = (temp - floor(temp)) * SHIFT_LEFT8;
    outlineColor.r = floor(temp);

    temp = sdf.y;
    temp = temp * SHIFT_RIGHT8;
    float temp3 = (temp - floor(temp)) * SHIFT_LEFT8;
    temp = floor(temp) * SHIFT_RIGHT8;
    outlineWidth = (temp - floor(temp)) * SHIFT_LEFT8;
    outlineColor.a = floor(temp);
    outlineColor /= 255.0;

    v_outlineWidth = outlineWidth / 255.0;
    v_outlineColor = outlineColor;
    v_outlineColor.a *= translucency;
#endif

    v_pickColor = pickColor;

    v_color = color;
    v_color.a *= translucency;
    v_splitDirection = splitDirection;
}
`;var Vpe=Object.freeze({NONE:0,LOADING:2,LOADED:3,ERROR:4,FAILED:5}),lr=Vpe;function Gl(e){this._billboardCollection=e,this._id=void 0,this._loadState=lr.NONE,this._loadError=void 0,this._index=-1,this._width=void 0,this._height=void 0,this._hasSubregion=!1,this.dirty=!1}Object.defineProperties(Gl.prototype,{loadError:{get:function(){return this._loadError}},loadState:{get:function(){return this._loadState}},ready:{get:function(){return this._loadState===lr.LOADED}},hasImage:{get:function(){return this._loadState!==lr.NONE}},id:{get:function(){return this._id}},width:{get:function(){return this._width}},height:{get:function(){return this._height}}});Gl.prototype.unload=async function(){this._loadState!==lr.NONE&&(this._id=void 0,this._loadError=void 0,this._loadState=lr.NONE,this._index=-1,this._width=void 0,this._height=void 0,this.dirty=!0)};Gl.prototype.loadImage=async function(e,t){if(this._id===e)return;let n=this._billboardCollection,i=n.billboardTextureCache,o=i.get(e);if(c(o)&&t.loadState===lr.LOADING||t.loadState===lr.LOADED){Gl.clone(o,this);return}c(o)||(o=new Gl(n),i.set(e,o)),o._id=this._id=e,o._loadState=this._loadState=lr.LOADING,o._loadError=this._loadError=void 0;let r,a=this._billboardCollection.textureAtlas;try{r=await a.addImage(e,t)}catch(A){if(o._loadState=lr.ERROR,o._loadError=A,this._id!==e)return;this._loadState=lr.ERROR,this._loadError=A;return}if(!c(r)||r===-1){if(o._loadState=lr.FAILED,o._index=-1,this._id!==e)return;this._loadState=lr.FAILED,this._index=-1;return}o._index=r,o._loadState=lr.LOADED;let s=a.rectangles[r];o._width=s.width,o._height=s.height,this._id===e&&(this._index=r,this._loadState=lr.LOADED,this._width=s.width,this._height=s.height,this.dirty=!0)};Gl.prototype.addImageSubRegion=async function(e,t){this._id=e,this._loadState=lr.LOADING,this._loadError=void 0,this._hasSubregion=!0;let n,i=this._billboardCollection.textureAtlas;try{n=await i.addImageSubRegion(e,t)}catch(o){this._loadState=lr.ERROR,this._loadError=o;return}if(!c(n)||n===-1){this._loadState=lr.FAILED,this._index=-1,this._width=void 0,this._height=void 0;return}this._width=t.width,this._height=t.height,this._index=n,this._loadState=lr.LOADED,this.dirty=!0};Gl.prototype.computeTextureCoordinates=function(e){return this._billboardCollection.textureAtlas.computeTextureCoordinates(this._index,e)};Gl.clone=function(e,t){if(t._id=e._id,t._loadState=e._loadState,t._loadError=void 0,t._index=e._index,t._width=e._width,t._height=e._height,t._hasSubregion=e._hasSubregion,e.ready){t.dirty=!0;return}return(async()=>{let i=e._id;await e._billboardCollection.textureAtlas._indexPromiseById.get(i),t._id===i&&(e._hasSubregion&&await Promise.resolve(),t._id=i,t._loadState=e._loadState,t._loadError=e._loadError,t._index=e._index,t._width=e._width,t._height=e._height,t.dirty=!0)})(),t};var _m=Gl;function pn(e,t){e=e??G.EMPTY_OBJECT;let n=e.translucencyByDistance,i=e.pixelOffsetScaleByDistance,o=e.scaleByDistance,r=e.distanceDisplayCondition;c(n)&&(n=mn.clone(n)),c(i)&&(i=mn.clone(i)),c(o)&&(o=mn.clone(o)),c(r)&&(r=to.clone(r)),this._show=e.show??!0,this._position=f.clone(e.position??f.ZERO),this._actualPosition=f.clone(this._position),this._pixelOffset=L.clone(e.pixelOffset??L.ZERO),this._translate=new L(0,0),this._eyeOffset=f.clone(e.eyeOffset??f.ZERO),this._heightReference=e.heightReference??Nr.NONE,this._verticalOrigin=e.verticalOrigin??qt.CENTER,this._horizontalOrigin=e.horizontalOrigin??Zt.CENTER,this._scale=e.scale??1,this._color=J.clone(e.color??J.WHITE),this._rotation=e.rotation??0,this._alignedAxis=f.clone(e.alignedAxis??f.ZERO),this._width=e.width,this._height=e.height,this._scaleByDistance=o,this._translucencyByDistance=n,this._pixelOffsetScaleByDistance=i,this._sizeInMeters=e.sizeInMeters??!1,this._distanceDisplayCondition=r,this._disableDepthTestDistance=e.disableDepthTestDistance,this._id=e.id,this._collection=e.collection??t,this._pickId=void 0,this._pickPrimitive=e._pickPrimitive??this,this._billboardCollection=t,this._dirty=!1,this._index=-1,this._batchIndex=void 0,this._imageTexture=new _m(t),this._imageWidth=void 0,this._imageHeight=void 0,this._labelDimensions=void 0,this._labelHorizontalOrigin=void 0,this._labelTranslate=void 0;let a=e.image,s=e.imageId;c(a)&&(c(s)||(typeof a=="string"?s=a:c(a.src)?s=a.src:s=ji()),this._imageTexture.loadImage(s,a)),c(e.imageSubRegion)&&this._imageTexture.addImageSubRegion(s,e.imageSubRegion),this._actualClampedPosition=void 0,this._removeCallbackFunc=void 0,this._mode=Ee.SCENE3D,this._clusterShow=!0,this._outlineColor=J.clone(e.outlineColor??J.BLACK),this._outlineWidth=e.outlineWidth??0,this._updateClamping(),this._splitDirection=e.splitDirection??qa.NONE}var k8=pn.SHOW_INDEX=0,my=pn.POSITION_INDEX=1,V8=pn.PIXEL_OFFSET_INDEX=2,jpe=pn.EYE_OFFSET_INDEX=3,Ype=pn.HORIZONTAL_ORIGIN_INDEX=4,Wpe=pn.VERTICAL_ORIGIN_INDEX=5,qpe=pn.SCALE_INDEX=6,U8=pn.IMAGE_INDEX_INDEX=7,z8=pn.COLOR_INDEX=8,Jpe=pn.ROTATION_INDEX=9,Kpe=pn.ALIGNED_AXIS_INDEX=10,Xpe=pn.SCALE_BY_DISTANCE_INDEX=11,Zpe=pn.TRANSLUCENCY_BY_DISTANCE_INDEX=12,$pe=pn.PIXEL_OFFSET_SCALE_BY_DISTANCE_INDEX=13,ege=pn.DISTANCE_DISPLAY_CONDITION=14,tge=pn.DISABLE_DEPTH_DISTANCE=15;pn.TEXTURE_COORDINATE_BOUNDS=16;var G8=pn.SDF_INDEX=17,nge=pn.SPLIT_DIRECTION_INDEX=18;pn.NUMBER_OF_PROPERTIES=19;function Li(e,t){let n=e._billboardCollection;c(n)&&(n._updateBillboard(e,t),e._dirty=!0)}Object.defineProperties(pn.prototype,{show:{get:function(){return this._show},set:function(e){this._show!==e&&(this._show=e,Li(this,k8))}},position:{get:function(){return this._position},set:function(e){let t=this._position;f.equals(t,e)||(f.clone(e,t),f.clone(e,this._actualPosition),this._updateClamping(),Li(this,my))}},heightReference:{get:function(){return this._heightReference},set:function(e){let t=this._heightReference;e!==t&&(this._heightReference=e,this._updateClamping(),Li(this,my))}},pixelOffset:{get:function(){return this._pixelOffset},set:function(e){let t=this._pixelOffset;L.equals(t,e)||(L.clone(e,t),Li(this,V8))}},scaleByDistance:{get:function(){return this._scaleByDistance},set:function(e){let t=this._scaleByDistance;mn.equals(t,e)||(this._scaleByDistance=mn.clone(e,t),Li(this,Xpe))}},translucencyByDistance:{get:function(){return this._translucencyByDistance},set:function(e){let t=this._translucencyByDistance;mn.equals(t,e)||(this._translucencyByDistance=mn.clone(e,t),Li(this,Zpe))}},pixelOffsetScaleByDistance:{get:function(){return this._pixelOffsetScaleByDistance},set:function(e){let t=this._pixelOffsetScaleByDistance;mn.equals(t,e)||(this._pixelOffsetScaleByDistance=mn.clone(e,t),Li(this,$pe))}},eyeOffset:{get:function(){return this._eyeOffset},set:function(e){let t=this._eyeOffset;f.equals(t,e)||(f.clone(e,t),Li(this,jpe))}},horizontalOrigin:{get:function(){return this._horizontalOrigin},set:function(e){this._horizontalOrigin!==e&&(this._horizontalOrigin=e,Li(this,Ype))}},verticalOrigin:{get:function(){return this._verticalOrigin},set:function(e){this._verticalOrigin!==e&&(this._verticalOrigin=e,Li(this,Wpe))}},scale:{get:function(){return this._scale},set:function(e){this._scale!==e&&(this._scale=e,Li(this,qpe))}},color:{get:function(){return this._color},set:function(e){let t=this._color;J.equals(t,e)||(J.clone(e,t),Li(this,z8))}},rotation:{get:function(){return this._rotation},set:function(e){this._rotation!==e&&(this._rotation=e,Li(this,Jpe))}},alignedAxis:{get:function(){return this._alignedAxis},set:function(e){let t=this._alignedAxis;f.equals(t,e)||(f.clone(e,t),Li(this,Kpe))}},width:{get:function(){return this._width??this._imageTexture.width},set:function(e){this._width!==e&&(this._width=e,Li(this,U8))}},height:{get:function(){return this._height??this._imageTexture.height},set:function(e){this._height!==e&&(this._height=e,Li(this,U8))}},sizeInMeters:{get:function(){return this._sizeInMeters},set:function(e){this._sizeInMeters!==e&&(this._sizeInMeters=e,Li(this,z8))}},distanceDisplayCondition:{get:function(){return this._distanceDisplayCondition},set:function(e){to.equals(e,this._distanceDisplayCondition)||(this._distanceDisplayCondition=to.clone(e,this._distanceDisplayCondition),Li(this,ege))}},disableDepthTestDistance:{get:function(){return this._disableDepthTestDistance},set:function(e){this._disableDepthTestDistance!==e&&(this._disableDepthTestDistance=e,Li(this,tge))}},id:{get:function(){return this._id},set:function(e){this._id=e,c(this._pickId)&&(this._pickId.object.id=e)}},pickPrimitive:{get:function(){return this._pickPrimitive},set:function(e){this._pickPrimitive=e,c(this._pickId)&&(this._pickId.object.primitive=e)}},pickId:{get:function(){return this._pickId}},image:{get:function(){return this._imageTexture.id},set:function(e){if(!c(e)){this._imageTexture.unload();return}let t;typeof e=="string"?t=e:e instanceof Ye?t=e._url:c(e.src)?t=e.src:t=ji(),this._imageTexture.loadImage(t,e)}},ready:{get:function(){return this._imageTexture.ready}},loadError:{get:function(){return this._imageTexture.loadError}},textureDirty:{get:function(){return this._imageTexture.dirty},set:function(e){this._imageTexture.dirty=e}},_clampedPosition:{get:function(){return this._actualClampedPosition},set:function(e){this._actualClampedPosition=f.clone(e,this._actualClampedPosition),Li(this,my)}},clusterShow:{get:function(){return this._clusterShow},set:function(e){this._clusterShow!==e&&(this._clusterShow=e,Li(this,k8))}},outlineColor:{get:function(){return this._outlineColor},set:function(e){let t=this._outlineColor;J.equals(t,e)||(J.clone(e,t),Li(this,G8))}},outlineWidth:{get:function(){return this._outlineWidth},set:function(e){this._outlineWidth!==e&&(this._outlineWidth=e,Li(this,G8))}},splitDirection:{get:function(){return this._splitDirection},set:function(e){this._splitDirection!==e&&(this._splitDirection=e,Li(this,nge))}}});pn.prototype.getPickId=function(e){return c(this._pickId)||(this._pickId=e.createPickId({primitive:this._pickPrimitive,collection:this._collection,id:this._id})),this._pickId};pn.prototype._updateClamping=function(){pn._updateClamping(this._billboardCollection,this)};var py=new ue;pn._updateClamping=function(e,t){if(!c(e)||!c(e._scene))return;let n=e._scene,i=n.ellipsoid??pe.default,o=n.frameState.mode,r=o!==t._mode;if(t._mode=o,(t._heightReference===Nr.NONE||r)&&c(t._removeCallbackFunc)&&(t._removeCallbackFunc(),t._removeCallbackFunc=void 0,t._clampedPosition=void 0),t._heightReference===Nr.NONE||!c(t._position))return;c(t._removeCallbackFunc)&&t._removeCallbackFunc();let a=i.cartesianToCartographic(t._position);if(!c(a)){t._actualClampedPosition=void 0;return}function s(l){let d=i.cartographicToCartesian(l,t._clampedPosition);f_(t._heightReference)&&(t._mode===Ee.SCENE3D?(l.height+=a.height,i.cartographicToCartesian(l,d)):d.x+=a.height),t._clampedPosition=d}t._removeCallbackFunc=n.updateHeight(a,s,t._heightReference),ue.clone(a,py);let A=n.getHeight(a,t._heightReference);c(A)&&(py.height=A),s(py)};pn.prototype.computeTextureCoordinates=function(e){return this._imageTexture.computeTextureCoordinates(e)};pn.prototype.setImage=function(e,t){this._imageTexture.loadImage(e,t)};pn.prototype.setImageTexture=function(e){_m.clone(e,this._imageTexture)};pn.prototype.setImageSubRegion=function(e,t){this._imageTexture.addImageSubRegion(e,t)};pn.prototype._setTranslate=function(e){let t=this._translate;L.equals(t,e)||(L.clone(e,t),Li(this,V8))};pn.prototype._getActualPosition=function(){return c(this._clampedPosition)?this._clampedPosition:this._actualPosition};pn.prototype._setActualPosition=function(e){c(this._clampedPosition)||f.clone(e,this._actualPosition),Li(this,my)};var H8=new re;pn._computeActualPosition=function(e,t,n,i){return c(e._clampedPosition)?(n.mode!==e._mode&&e._updateClamping(),e._clampedPosition):n.mode===Ee.SCENE3D?t:(Q.multiplyByPoint(i,t,H8),Fn.computeActualEllipsoidPosition(n,H8))};var j8=new f;pn._computeScreenSpacePosition=function(e,t,n,i,o,r){let a=Q.multiplyByPoint(e,t,j8),s=Fn.worldWithEyeOffsetToWindowCoordinates(o,a,n,r);if(c(s))return L.add(s,i,s),s};var hy=new L(0,0);pn.prototype.computeScreenSpacePosition=function(e,t){let n=this._billboardCollection;c(t)||(t=new L),L.clone(this._pixelOffset,hy),L.add(hy,this._translate,hy);let i=n.modelMatrix,o=this._position;if(c(this._clampedPosition)&&(o=this._clampedPosition,e.mode!==Ee.SCENE3D)){let a=e.mapProjection,s=a.ellipsoid,A=a.unproject(o,py);o=s.cartographicToCartesian(A,j8),i=Q.IDENTITY}return pn._computeScreenSpacePosition(i,o,this._eyeOffset,hy,e,t)};pn.getScreenSpaceBoundingBox=function(e,t,n){let i=e.width,o=e.height,r=e.scale;i*=r,o*=r;let a=t.x;e.horizontalOrigin===Zt.RIGHT?a-=i:e.horizontalOrigin===Zt.CENTER&&(a-=i*.5);let s=t.y;return e.verticalOrigin===qt.BOTTOM||e.verticalOrigin===qt.BASELINE?s-=o:e.verticalOrigin===qt.CENTER&&(s-=o*.5),c(n)||(n=new oi),n.x=a,n.y=s,n.width=i,n.height=o,n};pn.prototype.equals=function(e){return this===e||c(e)&&this._id===e._id&&f.equals(this._position,e._position)&&this.image===e.image&&this._show===e._show&&this._scale===e._scale&&this._verticalOrigin===e._verticalOrigin&&this._horizontalOrigin===e._horizontalOrigin&&this._heightReference===e._heightReference&&J.equals(this._color,e._color)&&L.equals(this._pixelOffset,e._pixelOffset)&&L.equals(this._translate,e._translate)&&f.equals(this._eyeOffset,e._eyeOffset)&&mn.equals(this._scaleByDistance,e._scaleByDistance)&&mn.equals(this._translucencyByDistance,e._translucencyByDistance)&&mn.equals(this._pixelOffsetScaleByDistance,e._pixelOffsetScaleByDistance)&&to.equals(this._distanceDisplayCondition,e._distanceDisplayCondition)&&this._disableDepthTestDistance===e._disableDepthTestDistance&&this._splitDirection===e._splitDirection};pn.prototype._destroy=function(){c(this._customData)&&(this._billboardCollection._scene.globe._surface.removeTileCustomData(this._customData),this._customData=void 0),c(this._removeCallbackFunc)&&(this._removeCallbackFunc(),this._removeCallbackFunc=void 0),this.image=void 0,this._pickId=this._pickId&&this._pickId.destroy(),this._billboardCollection=void 0};var Fi=pn;var ige={OPAQUE:0,TRANSLUCENT:1,OPAQUE_AND_TRANSLUCENT:2},Oi=Object.freeze(ige);var oge={FONT_SIZE:48,PADDING:10,RADIUS:8,CUTOFF:.25},oa=Object.freeze(oge);var rge=Fi.SHOW_INDEX,lC=Fi.POSITION_INDEX,Y8=Fi.PIXEL_OFFSET_INDEX,W8=Fi.EYE_OFFSET_INDEX,age=Fi.HORIZONTAL_ORIGIN_INDEX,sge=Fi.VERTICAL_ORIGIN_INDEX,cge=Fi.SCALE_INDEX,Dd=Fi.IMAGE_INDEX_INDEX,q8=Fi.COLOR_INDEX,Age=Fi.ROTATION_INDEX,lge=Fi.ALIGNED_AXIS_INDEX,J8=Fi.SCALE_BY_DISTANCE_INDEX,K8=Fi.TRANSLUCENCY_BY_DISTANCE_INDEX,X8=Fi.PIXEL_OFFSET_SCALE_BY_DISTANCE_INDEX,Z8=Fi.DISTANCE_DISPLAY_CONDITION,uge=Fi.DISABLE_DEPTH_DISTANCE,fge=Fi.TEXTURE_COORDINATE_BOUNDS,$8=Fi.SDF_INDEX,eH=Fi.SPLIT_DIRECTION_INDEX,PS=Fi.NUMBER_OF_PROPERTIES,qn,dge={positionHighAndScale:0,positionLowAndRotation:1,compressedAttribute0:2,compressedAttribute1:3,compressedAttribute2:4,eyeOffset:5,scaleByDistance:6,pixelOffsetScaleByDistance:7,compressedAttribute3:8,textureCoordinateBoundsOrLabelTranslate:9,a_batchId:10,sdf:11,splitDirection:12},hge={direction:0,positionHighAndScale:1,positionLowAndRotation:2,compressedAttribute0:3,compressedAttribute1:4,compressedAttribute2:5,eyeOffset:6,scaleByDistance:7,pixelOffsetScaleByDistance:8,compressedAttribute3:9,textureCoordinateBoundsOrLabelTranslate:10,a_batchId:11,sdf:12,splitDirection:13};function uc(e){e=e??G.EMPTY_OBJECT,this._scene=e.scene,this._batchTable=e.batchTable;let t=e.textureAtlas;c(t)||(t=new l_),this._textureAtlas=t,this._textureAtlasGUID=t.guid,this._destroyTextureAtlas=!0,this._billboardTextureCache=new Map,this._sp=void 0,this._spTranslucent=void 0,this._rsOpaque=void 0,this._rsTranslucent=void 0,this._vaf=void 0,this._billboards=[],this._billboardsToUpdate=[],this._billboardsToUpdateIndex=0,this._billboardsRemoved=!1,this._createVertexArray=!1,this._shaderRotation=!1,this._compiledShaderRotation=!1,this._shaderAlignedAxis=!1,this._compiledShaderAlignedAxis=!1,this._shaderScaleByDistance=!1,this._compiledShaderScaleByDistance=!1,this._shaderTranslucencyByDistance=!1,this._compiledShaderTranslucencyByDistance=!1,this._shaderPixelOffsetScaleByDistance=!1,this._compiledShaderPixelOffsetScaleByDistance=!1,this._shaderDistanceDisplayCondition=!1,this._compiledShaderDistanceDisplayCondition=!1,this._shaderDisableDepthDistance=!1,this._compiledShaderDisableDepthDistance=!1,this._shaderClampToGround=!1,this._compiledShaderClampToGround=!1,this._propertiesChanged=new Uint32Array(PS),this._maxSize=0,this._maxEyeOffset=0,this._maxScale=1,this._maxPixelOffset=0,this._allHorizontalCenter=!0,this._allVerticalCenter=!0,this._allSizedInMeters=!0,this._baseVolume=new le,this._baseVolumeWC=new le,this._baseVolume2D=new le,this._boundingVolume=new le,this._boundingVolumeDirty=!1,this._colorCommands=[],this._allBillboardsReady=!1,this.show=e.show??!0,this.modelMatrix=Q.clone(e.modelMatrix??Q.IDENTITY),this._modelMatrix=Q.clone(Q.IDENTITY),this.debugShowBoundingVolume=e.debugShowBoundingVolume??!1,this.debugShowTextureAtlas=e.debugShowTextureAtlas??!1,this.blendOption=e.blendOption??Oi.OPAQUE_AND_TRANSLUCENT,this._blendOption=void 0,this._mode=Ee.SCENE3D,this._buffersUsage=[De.STATIC_DRAW,De.STATIC_DRAW,De.STATIC_DRAW,De.STATIC_DRAW,De.STATIC_DRAW,De.STATIC_DRAW,De.STATIC_DRAW,De.STATIC_DRAW,De.STATIC_DRAW,De.STATIC_DRAW,De.STATIC_DRAW,De.STATIC_DRAW,De.STATIC_DRAW,De.STATIC_DRAW,De.STATIC_DRAW,De.STATIC_DRAW,De.STATIC_DRAW],this._highlightColor=J.clone(J.WHITE),this._uniforms={u_atlas:()=>this.textureAtlas.texture,u_highlightColor:()=>this._highlightColor};let n=this._scene;c(n)&&c(n.terrainProviderChanged)&&(this._removeCallbackFunc=n.terrainProviderChanged.addEventListener(function(){let i=this._billboards,o=i.length;for(let r=0;r<o;++r)c(i[r])&&i[r]._updateClamping()},this))}Object.defineProperties(uc.prototype,{length:{get:function(){return NS(this),this._billboards.length}},textureAtlas:{get:function(){return this._textureAtlas},set:function(e){this._textureAtlas!==e&&(this._textureAtlas=this._destroyTextureAtlas&&this._textureAtlas&&this._textureAtlas.destroy(),this._textureAtlas=e)}},destroyTextureAtlas:{get:function(){return this._destroyTextureAtlas},set:function(e){this._destroyTextureAtlas=e}},sizeInBytes:{get:function(){return this._textureAtlas.sizeInBytes}},ready:{get:function(){return this._allBillboardsReady}},billboardTextureCache:{get:function(){return this._billboardTextureCache}}});function tH(e){let t=e.length;for(let n=0;n<t;++n)e[n]&&e[n]._destroy()}uc.prototype.add=function(e){let t=new Fi(e,this);return t._index=this._billboards.length,this._billboards.push(t),this._createVertexArray=!0,t};uc.prototype.remove=function(e){return this.contains(e)?(this._billboards[e._index]=void 0,this._billboardsRemoved=!0,this._createVertexArray=!0,e._destroy(),!0):!1};uc.prototype.removeAll=function(){tH(this._billboards),this._billboards=[],this._billboardsToUpdate=[],this._billboardsToUpdateIndex=0,this._billboardsRemoved=!1,this._createVertexArray=!0};function NS(e){if(e._billboardsRemoved){e._billboardsRemoved=!1;let t=[],n=e._billboards,i=n.length;for(let o=0,r=0;o<i;++o){let a=n[o];c(a)&&(a._index=r++,t.push(a))}e._billboards=t}}uc.prototype._updateBillboard=function(e,t){e._dirty||(this._billboardsToUpdate[this._billboardsToUpdateIndex++]=e),++this._propertiesChanged[t]};uc.prototype.contains=function(e){return c(e)&&e._billboardCollection===this};uc.prototype.get=function(e){return NS(this),this._billboards[e]};var wS;function mge(e){let n=e.cache.billboardCollection_indexBufferBatched;if(c(n))return n;let i=16384*6-6,o=new Uint16Array(i);for(let r=0,a=0;r<i;r+=6,a+=4)o[r]=a,o[r+1]=a+1,o[r+2]=a+2,o[r+3]=a+0,o[r+4]=a+2,o[r+5]=a+3;return n=ut.createIndexBuffer({context:e,typedArray:o,usage:De.STATIC_DRAW,indexDatatype:Ge.UNSIGNED_SHORT}),n.vertexArrayDestroyable=!1,e.cache.billboardCollection_indexBufferBatched=n,n}function pge(e){let t=e.cache.billboardCollection_indexBufferInstanced;return c(t)||(t=ut.createIndexBuffer({context:e,typedArray:new Uint16Array([0,1,2,0,2,3]),usage:De.STATIC_DRAW,indexDatatype:Ge.UNSIGNED_SHORT}),t.vertexArrayDestroyable=!1,e.cache.billboardCollection_indexBufferInstanced=t),t}function gge(e){let t=e.cache.billboardCollection_vertexBufferInstanced;return c(t)||(t=ut.createVertexBuffer({context:e,typedArray:new Float32Array([0,0,1,0,1,1,0,1]),usage:De.STATIC_DRAW}),t.vertexArrayDestroyable=!1,e.cache.billboardCollection_vertexBufferInstanced=t),t}uc.prototype.computeNewBuffersUsage=function(){let e=this._buffersUsage,t=!1,n=this._propertiesChanged;for(let i=0;i<PS;++i){let o=n[i]===0?De.STATIC_DRAW:De.STREAM_DRAW;t=t||e[i]!==o,e[i]=o}return t};function Cge(e,t,n,i,o,r){let a=[{index:qn.positionHighAndScale,componentsPerAttribute:4,componentDatatype:V.FLOAT,usage:n[lC]},{index:qn.positionLowAndRotation,componentsPerAttribute:4,componentDatatype:V.FLOAT,usage:n[lC]},{index:qn.compressedAttribute0,componentsPerAttribute:4,componentDatatype:V.FLOAT,usage:n[Y8]},{index:qn.compressedAttribute1,componentsPerAttribute:4,componentDatatype:V.FLOAT,usage:n[K8]},{index:qn.compressedAttribute2,componentsPerAttribute:4,componentDatatype:V.FLOAT,usage:n[q8]},{index:qn.eyeOffset,componentsPerAttribute:4,componentDatatype:V.FLOAT,usage:n[W8]},{index:qn.scaleByDistance,componentsPerAttribute:4,componentDatatype:V.FLOAT,usage:n[J8]},{index:qn.pixelOffsetScaleByDistance,componentsPerAttribute:4,componentDatatype:V.FLOAT,usage:n[X8]},{index:qn.compressedAttribute3,componentsPerAttribute:4,componentDatatype:V.FLOAT,usage:n[Z8]},{index:qn.textureCoordinateBoundsOrLabelTranslate,componentsPerAttribute:4,componentDatatype:V.FLOAT,usage:n[fge]},{index:qn.splitDirection,componentsPerAttribute:1,componentDatatype:V.FLOAT,usage:n[eH]}];i&&a.push({index:qn.direction,componentsPerAttribute:2,componentDatatype:V.FLOAT,vertexBuffer:gge(e)}),c(o)&&a.push({index:qn.a_batchId,componentsPerAttribute:1,componentDatatype:V.FLOAT,bufferUsage:De.STATIC_DRAW}),r&&a.push({index:qn.sdf,componentsPerAttribute:2,componentDatatype:V.FLOAT,usage:n[$8]});let s=i?t:4*t;return new u_(e,a,s,i)}var DS=new Cn;function nH(e,t,n,i){let o,r=n[qn.positionHighAndScale],a=n[qn.positionLowAndRotation],s=i._getActualPosition();e._mode===Ee.SCENE3D&&(le.expand(e._baseVolume,s,e._baseVolume),e._boundingVolumeDirty=!0),Cn.fromCartesian(s,DS);let A=i.scale,l=i.rotation;l!==0&&(e._shaderRotation=!0),e._maxScale=Math.max(e._maxScale,A);let d=DS.high,m=DS.low;e._instanced?(o=i._index,r(o,d.x,d.y,d.z,A),a(o,m.x,m.y,m.z,l)):(o=i._index*4,r(o+0,d.x,d.y,d.z,A),r(o+1,d.x,d.y,d.z,A),r(o+2,d.x,d.y,d.z,A),r(o+3,d.x,d.y,d.z,A),a(o+0,m.x,m.y,m.z,l),a(o+1,m.x,m.y,m.z,l),a(o+2,m.x,m.y,m.z,l),a(o+3,m.x,m.y,m.z,l))}var os=new L,lc=32768,Im=65536,QS=4096,LA=256,Ege=128,_ge=32,Ige=8,iH=4,yge=1/256,oH=0,rH=2,aH=3,sH=1,LS=new oi;function cH(e,t,n,i){let o,r=n[qn.compressedAttribute0],a=i.pixelOffset,s=a.x,A=a.y,l=i._translate,d=l.x,m=l.y;e._maxPixelOffset=Math.max(e._maxPixelOffset,Math.abs(s+d),Math.abs(-A+m));let p=i.horizontalOrigin,g=i._verticalOrigin,h=i.show&&i.clusterShow;i.color.alpha===0&&(h=!1),g===qt.BASELINE&&(g=qt.BOTTOM),e._allHorizontalCenter=e._allHorizontalCenter&&p===Zt.CENTER,e._allVerticalCenter=e._allVerticalCenter&&g===qt.CENTER;let C=0,_=0,I=0,b=0;if(i.ready){let D=i.computeTextureCoordinates(LS);C=D.x,_=D.y,I=D.width,b=D.height}let x=C+I,T=_+b,w=Math.floor(S.clamp(s,-lc,lc)+lc)*Ege;w+=(p+1)*_ge,w+=(g+1)*Ige,w+=(h?1:0)*iH;let R=Math.floor(S.clamp(A,-lc,lc)+lc)*LA,z=Math.floor(S.clamp(d,-lc,lc)+lc)*LA,M=(S.clamp(m,-lc,lc)+lc)*yge,N=Math.floor(M),O=Math.floor((M-N)*LA);R+=N,z+=O,os.x=C,os.y=_;let u=Yt.compressTextureCoordinates(os);os.x=x;let E=Yt.compressTextureCoordinates(os);os.y=T;let y=Yt.compressTextureCoordinates(os);os.x=C;let B=Yt.compressTextureCoordinates(os);e._instanced?(o=i._index,r(o,w,R,z,u)):(o=i._index*4,r(o+0,w+oH,R,z,u),r(o+1,w+rH,R,z,E),r(o+2,w+aH,R,z,y),r(o+3,w+sH,R,z,B))}function AH(e,t,n,i){let o,r=n[qn.compressedAttribute1],a=i.alignedAxis;f.equals(a,f.ZERO)||(e._shaderAlignedAxis=!0);let s=0,A=1,l=1,d=1,m=i.translucencyByDistance;c(m)&&(s=m.near,A=m.nearValue,l=m.far,d=m.farValue,(A!==1||d!==1)&&(e._shaderTranslucencyByDistance=!0));let p=Math.round(i.width??0);e._maxSize=Math.max(e._maxSize,p);let g=S.clamp(p,0,Im),h=0;Math.abs(f.magnitudeSquared(a)-1)<S.EPSILON6&&(h=Yt.octEncodeFloat(a)),A=S.clamp(A,0,1),A=A===1?255:A*255|0,g=g*LA+A,d=S.clamp(d,0,1),d=d===1?255:d*255|0,h=h*LA+d,e._instanced?(o=i._index,r(o,g,h,s,l)):(o=i._index*4,r(o+0,g,h,s,l),r(o+1,g,h,s,l),r(o+2,g,h,s,l),r(o+3,g,h,s,l))}function vS(e,t,n,i){let o,r=n[qn.compressedAttribute2],a=i.color,s=c(e._batchTable)?J.WHITE:i.getPickId(t.context).color,A=i.sizeInMeters?1:0,l=Math.abs(f.magnitudeSquared(i.alignedAxis)-1)<S.EPSILON6?1:0;e._allSizedInMeters=e._allSizedInMeters&&A===1;let d=i.height??0;e._maxSize=Math.max(e._maxSize,d);let m=i._labelHorizontalOrigin??-2;m+=2;let p=d*iH+m,g=J.floatToByte(a.red),h=J.floatToByte(a.green),C=J.floatToByte(a.blue),_=g*Im+h*LA+C;g=J.floatToByte(s.red),h=J.floatToByte(s.green),C=J.floatToByte(s.blue);let I=g*Im+h*LA+C,b=J.floatToByte(a.alpha)*Im+J.floatToByte(s.alpha)*LA;b+=A*2+l,e._instanced?(o=i._index,r(o,_,I,b,p)):(o=i._index*4,r(o+0,_,I,b,p),r(o+1,_,I,b,p),r(o+2,_,I,b,p),r(o+3,_,I,b,p))}function MS(e,t,n,i){let o,r=n[qn.eyeOffset],a=i.eyeOffset,s=a.z;if(i._heightReference!==Nr.NONE&&(s*=1.005),e._maxEyeOffset=Math.max(e._maxEyeOffset,Math.abs(a.x),Math.abs(a.y),Math.abs(s)),e._instanced){if(os.x=0,os.y=0,i.ready){let l=i.computeTextureCoordinates(LS);os.x=l.width,os.y=l.height}let A=Yt.compressTextureCoordinates(os);o=i._index,r(o,a.x,a.y,s,A)}else o=i._index*4,r(o+0,a.x,a.y,s,0),r(o+1,a.x,a.y,s,0),r(o+2,a.x,a.y,s,0),r(o+3,a.x,a.y,s,0)}function lH(e,t,n,i){let o,r=n[qn.scaleByDistance],a=0,s=1,A=1,l=1,d=i.scaleByDistance;c(d)&&(a=d.near,s=d.nearValue,A=d.far,l=d.farValue,(s!==1||l!==1)&&(e._shaderScaleByDistance=!0)),e._instanced?(o=i._index,r(o,a,s,A,l)):(o=i._index*4,r(o+0,a,s,A,l),r(o+1,a,s,A,l),r(o+2,a,s,A,l),r(o+3,a,s,A,l))}function uH(e,t,n,i){let o,r=n[qn.pixelOffsetScaleByDistance],a=0,s=1,A=1,l=1,d=i.pixelOffsetScaleByDistance;c(d)&&(a=d.near,s=d.nearValue,A=d.far,l=d.farValue,(s!==1||l!==1)&&(e._shaderPixelOffsetScaleByDistance=!0)),e._instanced?(o=i._index,r(o,a,s,A,l)):(o=i._index*4,r(o+0,a,s,A,l),r(o+1,a,s,A,l),r(o+2,a,s,A,l),r(o+3,a,s,A,l))}function fH(e,t,n,i){let o,r=n[qn.compressedAttribute3],a=0,s=Number.MAX_VALUE,A=i.distanceDisplayCondition;c(A)&&(a=A.near,s=A.far,a*=a,s*=s,e._shaderDistanceDisplayCondition=!0);let l=i.disableDepthTestDistance,d=Zf(i.heightReference)&&t.context.depthTexture;c(l)||(l=d?5e3:0),l*=l,(d||l>0)&&(e._shaderDisableDepthDistance=!0,l===Number.POSITIVE_INFINITY&&(l=-1));let m,p;c(i._labelDimensions)?(p=i._labelDimensions.x,m=i._labelDimensions.y):(p=i.width??0,m=i.height??0);let g=Math.floor(S.clamp(p,0,QS)),h=Math.floor(S.clamp(m,0,QS)),C=g*QS+h;e._instanced?(o=i._index,r(o,a,s,l,C)):(o=i._index*4,r(o+0,a,s,l,C),r(o+1,a,s,l,C),r(o+2,a,s,l,C),r(o+3,a,s,l,C))}function dH(e,t,n,i){if(Zf(i.heightReference)){let p=e._scene,g=t.context,h=t.globeTranslucencyState.translucent,C=c(p.globe)&&p.globe.depthTestAgainstTerrain;e._shaderClampToGround=g.depthTexture&&!h&&C}let o,r=n[qn.textureCoordinateBoundsOrLabelTranslate];if(rn.maximumVertexTextureImageUnits>0){let p=0,g=0;c(i._labelTranslate)&&(p=i._labelTranslate.x,g=i._labelTranslate.y),e._instanced?(o=i._index,r(o,p,g,0,0)):(o=i._index*4,r(o+0,p,g,0,0),r(o+1,p,g,0,0),r(o+2,p,g,0,0),r(o+3,p,g,0,0));return}let a=0,s=0,A=0,l=0;if(i.ready){let p=i.computeTextureCoordinates(LS);a=p.x,s=p.y,A=p.width,l=p.height}let d=a+A,m=s+l;e._instanced?(o=i._index,r(o,a,s,d,m)):(o=i._index*4,r(o+0,a,s,d,m),r(o+1,a,s,d,m),r(o+2,a,s,d,m),r(o+3,a,s,d,m))}function bge(e,t,n,i){if(!c(e._batchTable))return;let o=n[qn.a_batchId],r=i._batchIndex,a;e._instanced?(a=i._index,o(a,r)):(a=i._index*4,o(a+0,r),o(a+1,r),o(a+2,r),o(a+3,r))}function hH(e,t,n,i){if(!e._sdf)return;let o,r=n[qn.sdf],a=i.outlineColor,s=i.outlineWidth,A=J.floatToByte(a.red),l=J.floatToByte(a.green),d=J.floatToByte(a.blue),m=A*Im+l*LA+d,p=s/oa.RADIUS,g=J.floatToByte(a.alpha)*Im+J.floatToByte(p)*LA;e._instanced?(o=i._index,r(o,m,g)):(o=i._index*4,r(o+0,m+oH,g),r(o+1,m+rH,g),r(o+2,m+aH,g),r(o+3,m+sH,g))}function mH(e,t,n,i){let o=n[qn.splitDirection],r=0,a=i.splitDirection;c(a)&&(r=a);let s;e._instanced?(s=i._index,o(s,r)):(s=i._index*4,o(s+0,r),o(s+1,r),o(s+2,r),o(s+3,r))}function Bge(e,t,n,i){nH(e,t,n,i),cH(e,t,n,i),AH(e,t,n,i),vS(e,t,n,i),MS(e,t,n,i),lH(e,t,n,i),uH(e,t,n,i),fH(e,t,n,i),dH(e,t,n,i),bge(e,t,n,i),hH(e,t,n,i),mH(e,t,n,i)}function RS(e,t,n,i,o,r){let a;i.mode===Ee.SCENE3D?(a=e._baseVolume,e._boundingVolumeDirty=!0):a=e._baseVolume2D;let s=[];for(let A=0;A<n;++A){let l=t[A],d=l.position,m=Fi._computeActualPosition(l,d,i,o);c(m)&&(l._setActualPosition(m),r?s.push(m):le.expand(a,m,a))}r&&le.fromPoints(s,a)}function xge(e,t){let n=t.mode,i=e._billboards,o=e._billboardsToUpdate,r=e._modelMatrix;e._createVertexArray||e._mode!==n||n!==Ee.SCENE3D&&!Q.equals(r,e.modelMatrix)?(e._mode=n,Q.clone(e.modelMatrix,r),e._createVertexArray=!0,(n===Ee.SCENE3D||n===Ee.SCENE2D||n===Ee.COLUMBUS_VIEW)&&RS(e,i,i.length,t,r,!0)):n===Ee.MORPHING?RS(e,i,i.length,t,r,!0):(n===Ee.SCENE2D||n===Ee.COLUMBUS_VIEW)&&RS(e,o,e._billboardsToUpdateIndex,t,r,!1)}function Tge(e,t,n){let i=1;(!e._allSizedInMeters||e._maxPixelOffset!==0)&&(i=t.camera.getPixelSize(n,t.context.drawingBufferWidth,t.context.drawingBufferHeight));let o=i*e._maxScale*e._maxSize*2;e._allHorizontalCenter&&e._allVerticalCenter&&(o*=.5);let r=i*e._maxPixelOffset+e._maxEyeOffset;n.radius+=o+r}function Sge(e,t){let i=t.createViewportQuadCommand(`uniform sampler2D billboard_texture; 
in vec2 v_textureCoordinates; 
void main() 
{ 
    out_FragColor = texture(billboard_texture, v_textureCoordinates); 
} 
`,{uniformMap:{billboard_texture:function(){return e.textureAtlas.texture}}});return i.pass=He.OVERLAY,i}var wge=[];uc.prototype.update=function(e){if(NS(this),!this.show)return;let t=e.context;this._instanced=t.instancedArrays,qn=this._instanced?hge:dge,wS=this._instanced?pge:mge;let n=this._billboards,i=n.length,o=!0;for(let M=0;M<i;++M){let N=n[M];c(N.loadError)&&(console.error(`Error loading image for billboard: ${N.loadError}`),N.image=void 0),N.textureDirty&&this._updateBillboard(N,Dd),N.show&&(o=o&&N.ready)}let r=this._textureAtlas;if(e.afterRender.push(()=>{if(!this.isDestroyed())return r.update(e.context)}),!c(r.texture))return;xge(this,e),n=this._billboards,i=n.length;let a=this._billboardsToUpdate,s=this._billboardsToUpdateIndex,A=this._propertiesChanged,l=r.guid,d=this._createVertexArray||this._textureAtlasGUID!==l;this._textureAtlasGUID=l;let m,p=e.passes,g=p.pick;if(d||!g&&this.computeNewBuffersUsage()){this._createVertexArray=!1;for(let M=0;M<PS;++M)A[M]=0;if(this._vaf=this._vaf&&this._vaf.destroy(),i>0){this._vaf=Cge(t,i,this._buffersUsage,this._instanced,this._batchTable,this._sdf),m=this._vaf.writers;for(let M=0;M<i;++M){let N=this._billboards[M];N._dirty=!1,N.textureDirty=!1,Bge(this,e,m,N)}this._vaf.commit(wS(t))}this._billboardsToUpdateIndex=0}else if(s>0){let M=wge;M.length=0,(A[lC]||A[Age]||A[cge])&&M.push(nH),(A[Dd]||A[Y8]||A[age]||A[sge]||A[rge])&&(M.push(cH),this._instanced&&M.push(MS)),(A[Dd]||A[lge]||A[K8])&&(M.push(AH),M.push(vS)),(A[Dd]||A[q8])&&M.push(vS),(A[Dd]||A[W8])&&M.push(MS),A[J8]&&M.push(lH),A[X8]&&M.push(uH),(A[Z8]||A[uge]||A[Dd]||A[lC])&&M.push(fH),(A[Dd]||A[lC])&&M.push(dH),A[$8]&&M.push(hH),A[eH]&&M.push(mH);let N=M.length;if(m=this._vaf.writers,s/i>.1){for(let O=0;O<s;++O){let u=a[O];u._dirty=!1,u.textureDirty=!1;for(let E=0;E<N;++E)M[E](this,e,m,u)}this._vaf.commit(wS(t))}else{for(let O=0;O<s;++O){let u=a[O];u._dirty=!1,u.textureDirty=!1;for(let E=0;E<N;++E)M[E](this,e,m,u);this._instanced?this._vaf.subCommit(u._index,1):this._vaf.subCommit(u._index*4,4)}this._vaf.endSubCommits()}this._billboardsToUpdateIndex=0}if(s>i*1.5&&(a.length=i),!c(this._vaf)||!c(this._vaf.va))return;this._boundingVolumeDirty&&(this._boundingVolumeDirty=!1,le.transform(this._baseVolume,this.modelMatrix,this._baseVolumeWC));let h,C=Q.IDENTITY;e.mode===Ee.SCENE3D?(C=this.modelMatrix,h=le.clone(this._baseVolumeWC,this._boundingVolume)):h=le.clone(this._baseVolume2D,this._boundingVolume),Tge(this,e,h);let _=this._blendOption!==this.blendOption;if(this._blendOption=this.blendOption,_){this._blendOption===Oi.OPAQUE||this._blendOption===Oi.OPAQUE_AND_TRANSLUCENT?this._rsOpaque=At.fromCache({depthTest:{enabled:!0,func:W.LESS},depthMask:!0}):this._rsOpaque=void 0;let M=this._blendOption===Oi.TRANSLUCENT;this._blendOption===Oi.TRANSLUCENT||this._blendOption===Oi.OPAQUE_AND_TRANSLUCENT?this._rsTranslucent=At.fromCache({depthTest:{enabled:!0,func:M?W.LEQUAL:W.LESS},depthMask:M,blending:Pn.ALPHA_BLEND}):this._rsTranslucent=void 0}this._shaderDisableDepthDistance=this._shaderDisableDepthDistance||e.minimumDisableDepthTestDistance!==0;let I,b,x,T,w,R=rn.maximumVertexTextureImageUnits>0;if(_||this._shaderRotation!==this._compiledShaderRotation||this._shaderAlignedAxis!==this._compiledShaderAlignedAxis||this._shaderScaleByDistance!==this._compiledShaderScaleByDistance||this._shaderTranslucencyByDistance!==this._compiledShaderTranslucencyByDistance||this._shaderPixelOffsetScaleByDistance!==this._compiledShaderPixelOffsetScaleByDistance||this._shaderDistanceDisplayCondition!==this._compiledShaderDistanceDisplayCondition||this._shaderDisableDepthDistance!==this._compiledShaderDisableDepthDistance||this._shaderClampToGround!==this._compiledShaderClampToGround||this._sdf!==this._compiledSDF){I=O8,b=F8,w=[],c(this._batchTable)&&(w.push("VECTOR_TILE"),I=this._batchTable.getVertexShaderCallback(!1,"a_batchId",void 0)(I),b=this._batchTable.getFragmentShaderCallback(!1,void 0)(b)),x=new It({defines:w,sources:[I]}),this._instanced&&x.defines.push("INSTANCED"),this._shaderRotation&&x.defines.push("ROTATION"),this._shaderAlignedAxis&&x.defines.push("ALIGNED_AXIS"),this._shaderScaleByDistance&&x.defines.push("EYE_DISTANCE_SCALING"),this._shaderTranslucencyByDistance&&x.defines.push("EYE_DISTANCE_TRANSLUCENCY"),this._shaderPixelOffsetScaleByDistance&&x.defines.push("EYE_DISTANCE_PIXEL_OFFSET"),this._shaderDistanceDisplayCondition&&x.defines.push("DISTANCE_DISPLAY_CONDITION"),this._shaderDisableDepthDistance&&x.defines.push("DISABLE_DEPTH_DISTANCE"),this._shaderClampToGround&&(R?x.defines.push("VERTEX_DEPTH_CHECK"):x.defines.push("FRAGMENT_DEPTH_CHECK"));let M=1-oa.CUTOFF;this._sdf&&x.defines.push("SDF");let N=c(this._batchTable)?"VECTOR_TILE":"";this._blendOption===Oi.OPAQUE_AND_TRANSLUCENT&&(T=new It({defines:["OPAQUE",N],sources:[b]}),this._shaderClampToGround&&(R?T.defines.push("VERTEX_DEPTH_CHECK"):T.defines.push("FRAGMENT_DEPTH_CHECK")),this._sdf&&(T.defines.push("SDF"),T.defines.push(`SDF_EDGE ${M}`)),this._sp=gn.replaceCache({context:t,shaderProgram:this._sp,vertexShaderSource:x,fragmentShaderSource:T,attributeLocations:qn}),T=new It({defines:["TRANSLUCENT",N],sources:[b]}),this._shaderClampToGround&&(R?T.defines.push("VERTEX_DEPTH_CHECK"):T.defines.push("FRAGMENT_DEPTH_CHECK")),this._sdf&&(T.defines.push("SDF"),T.defines.push(`SDF_EDGE ${M}`)),this._spTranslucent=gn.replaceCache({context:t,shaderProgram:this._spTranslucent,vertexShaderSource:x,fragmentShaderSource:T,attributeLocations:qn})),this._blendOption===Oi.OPAQUE&&(T=new It({defines:[N],sources:[b]}),this._shaderClampToGround&&(R?T.defines.push("VERTEX_DEPTH_CHECK"):T.defines.push("FRAGMENT_DEPTH_CHECK")),this._sdf&&(T.defines.push("SDF"),T.defines.push(`SDF_EDGE ${M}`)),this._sp=gn.replaceCache({context:t,shaderProgram:this._sp,vertexShaderSource:x,fragmentShaderSource:T,attributeLocations:qn})),this._blendOption===Oi.TRANSLUCENT&&(T=new It({defines:[N],sources:[b]}),this._shaderClampToGround&&(R?T.defines.push("VERTEX_DEPTH_CHECK"):T.defines.push("FRAGMENT_DEPTH_CHECK")),this._sdf&&(T.defines.push("SDF"),T.defines.push(`SDF_EDGE ${M}`)),this._spTranslucent=gn.replaceCache({context:t,shaderProgram:this._spTranslucent,vertexShaderSource:x,fragmentShaderSource:T,attributeLocations:qn})),this._compiledShaderRotation=this._shaderRotation,this._compiledShaderAlignedAxis=this._shaderAlignedAxis,this._compiledShaderScaleByDistance=this._shaderScaleByDistance,this._compiledShaderTranslucencyByDistance=this._shaderTranslucencyByDistance,this._compiledShaderPixelOffsetScaleByDistance=this._shaderPixelOffsetScaleByDistance,this._compiledShaderDistanceDisplayCondition=this._shaderDistanceDisplayCondition,this._compiledShaderDisableDepthDistance=this._shaderDisableDepthDistance,this._compiledShaderClampToGround=this._shaderClampToGround,this._compiledSDF=this._sdf}let z=e.commandList;if(p.render||p.pick){let M=this._colorCommands,N=this._blendOption===Oi.OPAQUE,O=this._blendOption===Oi.OPAQUE_AND_TRANSLUCENT,u=this._vaf.va,E=u.length,y=this._uniforms,B;c(this._batchTable)?(y=this._batchTable.getUniformMapCallback()(y),B=this._batchTable.getPickId()):B="v_pickColor",M.length=E;let D=O?E*2:E;for(let v=0;v<D;++v){let F=M[v];c(F)||(F=M[v]=new ft);let P=N||O&&v%2===0;F.pass=P||!O?He.OPAQUE:He.TRANSLUCENT,F.owner=this;let U=O?Math.floor(v/2):v;F.boundingVolume=h,F.modelMatrix=C,F.count=u[U].indicesCount,F.shaderProgram=P?this._sp:this._spTranslucent,F.uniformMap=y,F.vertexArray=u[U].va,F.renderState=P?this._rsOpaque:this._rsTranslucent,F.debugShowBoundingVolume=this.debugShowBoundingVolume,F.pickId=B,this._instanced&&(F.count=6,F.instanceCount=i),z.push(F)}this.debugShowTextureAtlas&&(c(this.debugCommand)||(this.debugCommand=Sge(this,e.context)),z.push(this.debugCommand))}this._allBillboardsReady=o};uc.prototype.isDestroyed=function(){return!1};uc.prototype.destroy=function(){return c(this._removeCallbackFunc)&&(this._removeCallbackFunc(),this._removeCallbackFunc=void 0),this._textureAtlas=this._destroyTextureAtlas&&this._textureAtlas&&this._textureAtlas.destroy(),this._sp=this._sp&&this._sp.destroy(),this._spTranslucent=this._spTranslucent&&this._spTranslucent.destroy(),this._vaf=this._vaf&&this._vaf.destroy(),tH(this._billboards),me(this)};var uC=uc;function Dge(e,t,n,i,o){return function(){let r=document.createElement("canvas"),a=o+2*i;r.height=r.width=a;let s=r.getContext("2d");return s.clearRect(0,0,a,a),i!==0&&(s.beginPath(),s.arc(a/2,a/2,a/2,0,2*Math.PI,!0),s.closePath(),s.fillStyle=n,s.fill(),e<1&&(s.save(),s.globalCompositeOperation="destination-out",s.beginPath(),s.arc(a/2,a/2,o/2,0,2*Math.PI,!0),s.closePath(),s.fillStyle="black",s.fill(),s.restore())),s.beginPath(),s.arc(a/2,a/2,o/2,0,2*Math.PI,!0),s.closePath(),s.fillStyle=t,s.fill(),r}}var pH=Dge;function Br(e,t,n,i,o){this._content=e,this._billboard=n,this._label=i,this._polyline=o,this._batchId=t,this._billboardImage=void 0,this._billboardColor=void 0,this._billboardOutlineColor=void 0,this._billboardOutlineWidth=void 0,this._billboardSize=void 0,this._pointSize=void 0,this._color=void 0,this._pointSize=void 0,this._pointOutlineColor=void 0,this._pointOutlineWidth=void 0,this._heightOffset=void 0,this._pickIds=new Array(3),ym(this)}var Qge=new ue;Object.defineProperties(Br.prototype,{show:{get:function(){return this._label.show},set:function(e){this._label.show=e,this._billboard.show=e,this._polyline.show=e}},color:{get:function(){return this._color},set:function(e){this._color=J.clone(e,this._color),ym(this)}},pointSize:{get:function(){return this._pointSize},set:function(e){this._pointSize=e,ym(this)}},pointOutlineColor:{get:function(){return this._pointOutlineColor},set:function(e){this._pointOutlineColor=J.clone(e,this._pointOutlineColor),ym(this)}},pointOutlineWidth:{get:function(){return this._pointOutlineWidth},set:function(e){this._pointOutlineWidth=e,ym(this)}},labelColor:{get:function(){return this._label.fillColor},set:function(e){this._label.fillColor=e,this._polyline.show=this._label.show&&e.alpha>0}},labelOutlineColor:{get:function(){return this._label.outlineColor},set:function(e){this._label.outlineColor=e}},labelOutlineWidth:{get:function(){return this._label.outlineWidth},set:function(e){this._label.outlineWidth=e}},font:{get:function(){return this._label.font},set:function(e){this._label.font=e}},labelStyle:{get:function(){return this._label.style},set:function(e){this._label.style=e}},labelText:{get:function(){return this._label.text},set:function(e){c(e)||(e=""),this._label.text=e}},backgroundColor:{get:function(){return this._label.backgroundColor},set:function(e){this._label.backgroundColor=e}},backgroundPadding:{get:function(){return this._label.backgroundPadding},set:function(e){this._label.backgroundPadding=e}},backgroundEnabled:{get:function(){return this._label.showBackground},set:function(e){this._label.showBackground=e}},scaleByDistance:{get:function(){return this._label.scaleByDistance},set:function(e){this._label.scaleByDistance=e,this._billboard.scaleByDistance=e}},translucencyByDistance:{get:function(){return this._label.translucencyByDistance},set:function(e){this._label.translucencyByDistance=e,this._billboard.translucencyByDistance=e}},distanceDisplayCondition:{get:function(){return this._label.distanceDisplayCondition},set:function(e){this._label.distanceDisplayCondition=e,this._polyline.distanceDisplayCondition=e,this._billboard.distanceDisplayCondition=e}},heightOffset:{get:function(){return this._heightOffset},set:function(e){let t=this._heightOffset??0,n=this._content.tileset.ellipsoid,i=n.cartesianToCartographic(this._billboard.position,Qge);i.height=i.height-t+e;let o=n.cartographicToCartesian(i);this._billboard.position=o,this._label.position=this._billboard.position,this._polyline.positions=[this._polyline.positions[0],o],this._heightOffset=e}},anchorLineEnabled:{get:function(){return this._polyline.show},set:function(e){this._polyline.show=e}},anchorLineColor:{get:function(){return this._polyline.material.uniforms.color},set:function(e){this._polyline.material.uniforms.color=J.clone(e,this._polyline.material.uniforms.color)}},image:{get:function(){return this._billboardImage},set:function(e){let t=this._billboardImage!==e;this._billboardImage=e,t&&ym(this)}},disableDepthTestDistance:{get:function(){return this._label.disableDepthTestDistance},set:function(e){this._label.disableDepthTestDistance=e,this._billboard.disableDepthTestDistance=e}},horizontalOrigin:{get:function(){return this._billboard.horizontalOrigin},set:function(e){this._billboard.horizontalOrigin=e}},verticalOrigin:{get:function(){return this._billboard.verticalOrigin},set:function(e){this._billboard.verticalOrigin=e}},labelHorizontalOrigin:{get:function(){return this._label.horizontalOrigin},set:function(e){this._label.horizontalOrigin=e}},labelVerticalOrigin:{get:function(){return this._label.verticalOrigin},set:function(e){this._label.verticalOrigin=e}},content:{get:function(){return this._content}},tileset:{get:function(){return this._content.tileset}},primitive:{get:function(){return this._content.tileset}},pickIds:{get:function(){let e=this._pickIds;return e[0]=this._billboard.pickId,e[1]=this._label.pickId,e[2]=this._polyline.pickId,e}}});Br.defaultColor=J.WHITE;Br.defaultPointOutlineColor=J.BLACK;Br.defaultPointOutlineWidth=0;Br.defaultPointSize=8;function ym(e){let t=e._billboard;if(c(e._billboardImage)&&e._billboardImage!==t.image){t.image=e._billboardImage;return}if(c(e._billboardImage))return;let n=e._color??Br.defaultColor,i=e._pointOutlineColor??Br.defaultPointOutlineColor,o=e._pointOutlineWidth??Br.defaultPointOutlineWidth,r=e._pointSize??Br.defaultPointSize,a=e._billboardColor,s=e._billboardOutlineColor,A=e._billboardOutlineWidth,l=e._billboardSize;if(J.equals(n,a)&&J.equals(i,s)&&o===A&&r===l)return;e._billboardColor=J.clone(n,e._billboardColor),e._billboardOutlineColor=J.clone(i,e._billboardOutlineColor),e._billboardOutlineWidth=o,e._billboardSize=r;let d=n.alpha,m=n.toCssColorString(),p=i.toCssColorString(),g=JSON.stringify([m,r,p,o]);t.setImage(g,pH(d,m,p,o,r))}Br.prototype.hasProperty=function(e){return this._content.batchTable.hasProperty(this._batchId,e)};Br.prototype.getPropertyIds=function(e){return this._content.batchTable.getPropertyIds(this._batchId,e)};Br.prototype.getProperty=function(e){return this._content.batchTable.getProperty(this._batchId,e)};Br.prototype.getPropertyInherited=function(e){return Cs.getPropertyInherited(this._content,this._batchId,e)};Br.prototype.setProperty=function(e,t){this._content.batchTable.setProperty(this._batchId,e,t),this._content.featurePropertiesDirty=!0};Br.prototype.isExactClass=function(e){return this._content.batchTable.isExactClass(this._batchId,e)};Br.prototype.isClass=function(e){return this._content.batchTable.isClass(this._batchId,e)};Br.prototype.getExactClassName=function(){return this._content.batchTable.getExactClassName(this._batchId)};var bm=Br;function Rge(e,t,n,i,o){let r=e.measureText(t);if(!!/\S/.test(t)){let s=document.defaultView.getComputedStyle(e.canvas).getPropertyValue("font-size").replace("px",""),A=document.createElement("canvas"),l=100,d=r.width+l|0,m=3*s,p=m/2;A.width=d,A.height=m;let g=A.getContext("2d");g.font=n,g.fillStyle="white",g.fillRect(0,0,A.width+1,A.height+1),i&&(g.strokeStyle="black",g.lineWidth=e.lineWidth,g.strokeText(t,l/2,p)),o&&(g.fillStyle="black",g.fillText(t,l/2,p));let h=g.getImageData(0,0,d,m).data,C=h.length,_=d*4,I,b,x,T;for(I=0;I<C;++I)if(h[I]!==255){x=I/_|0;break}for(I=C-1;I>=0;--I)if(h[I]!==255){T=I/_|0;break}let w=-1;for(I=0;I<d&&w===-1;++I)for(b=0;b<m;++b){let R=I*4+b*_;if(h[R]!==255||h[R+1]!==255||h[R+2]!==255||h[R+3]!==255){w=I;break}}return{width:r.width,height:T-x,ascent:p-x,descent:T-p,minx:w-l/2}}return{width:r.width,height:0,ascent:0,descent:0,minx:0}}var Qd;function vge(e,t){if(e==="")return;t=t??G.EMPTY_OBJECT;let n=t.font??"10px sans-serif",i=t.stroke??!1,o=t.fill??!0,r=t.strokeWidth??1,a=t.backgroundColor??J.TRANSPARENT,s=t.padding??0,A=s*2,l=document.createElement("canvas");l.width=1,l.height=1,l.style.font=n;let d=l.getContext("2d",{willReadFrequently:!0});c(Qd)||(c(d.imageSmoothingEnabled)?Qd="imageSmoothingEnabled":c(d.mozImageSmoothingEnabled)?Qd="mozImageSmoothingEnabled":c(d.webkitImageSmoothingEnabled)?Qd="webkitImageSmoothingEnabled":c(d.msImageSmoothingEnabled)&&(Qd="msImageSmoothingEnabled")),d.font=n,d.lineJoin="round",d.lineWidth=r,d[Qd]=!1,l.style.visibility="hidden",document.body.appendChild(l);let m=Rge(d,e,n,i,o);l.dimensions=m,document.body.removeChild(l),l.style.visibility="";let p=-m.minx,g=Math.ceil(m.width)+p+A,h=m.height+A,C=h-m.ascent+s,_=h-C+A;if(l.width=g,l.height=h,d.font=n,d.lineJoin="round",d.lineWidth=r,d[Qd]=!1,a!==J.TRANSPARENT&&(d.fillStyle=a.toCssColorString(),d.fillRect(0,0,l.width,l.height)),i){let I=t.strokeColor??J.BLACK;d.strokeStyle=I.toCssColorString(),d.strokeText(e,p+s,_)}if(o){let I=t.fillColor??J.WHITE;d.fillStyle=I.toCssColorString(),d.fillText(e,p+s,_)}return l}var gH=vge;var QH=ls(IH(),1);var Pge={FILL:0,OUTLINE:1,FILL_AND_OUTLINE:2},xs=Object.freeze(Pge);var yH={},bH=0,Nge=256,Lge=new J(.165,.165,.165,.8),Fge=new L(7,5),Oo=Object.freeze({LTR:0,RTL:1,WEAK:2,BRACKETS:3});function Rd(e){!e._rebindAllGlyphs&&!e._repositionAllGlyphs&&e._labelCollection._labelsToUpdate.push(e),e._rebindAllGlyphs=!0}function dC(e){!e._rebindAllGlyphs&&!e._repositionAllGlyphs&&e._labelCollection._labelsToUpdate.push(e),e._repositionAllGlyphs=!0}function hC(e,t){return document.defaultView.getComputedStyle(e,null).getPropertyValue(t)}function xH(e){let t=yH[e._font];if(!c(t)){let n=document.createElement("div");n.style.position="absolute",n.style.opacity=0,n.style.font=e._font,document.body.appendChild(n);let i=parseFloat(hC(n,"line-height"));isNaN(i)&&(i=void 0),t={family:hC(n,"font-family"),size:hC(n,"font-size").replace("px",""),style:hC(n,"font-style"),weight:hC(n,"font-weight"),lineHeight:i},document.body.removeChild(n),bH<Nge&&(yH[e._font]=t,bH++)}e._fontFamily=t.family,e._fontSize=t.size,e._fontStyle=t.style,e._fontWeight=t.weight,e._lineHeight=t.lineHeight}function Kc(e,t){e=e??G.EMPTY_OBJECT;let n=e.translucencyByDistance,i=e.pixelOffsetScaleByDistance,o=e.scaleByDistance,r=e.distanceDisplayCondition;c(n)&&(n=mn.clone(n)),c(i)&&(i=mn.clone(i)),c(o)&&(o=mn.clone(o)),c(r)&&(r=to.clone(r)),this._renderedText=void 0,this._text=void 0,this._show=e.show??!0,this._font=e.font??"30px sans-serif",this._fillColor=J.clone(e.fillColor??J.WHITE),this._outlineColor=J.clone(e.outlineColor??J.BLACK),this._outlineWidth=e.outlineWidth??1,this._showBackground=e.showBackground??!1,this._backgroundColor=J.clone(e.backgroundColor??Lge),this._backgroundPadding=L.clone(e.backgroundPadding??Fge),this._style=e.style??xs.FILL,this._verticalOrigin=e.verticalOrigin??qt.BASELINE,this._horizontalOrigin=e.horizontalOrigin??Zt.LEFT,this._pixelOffset=L.clone(e.pixelOffset??L.ZERO),this._eyeOffset=f.clone(e.eyeOffset??f.ZERO),this._position=f.clone(e.position??f.ZERO),this._scale=e.scale??1,this._id=e.id,this._translucencyByDistance=n,this._pixelOffsetScaleByDistance=i,this._scaleByDistance=o,this._heightReference=e.heightReference??Nr.NONE,this._distanceDisplayCondition=r,this._disableDepthTestDistance=e.disableDepthTestDistance,this._labelCollection=t,this._glyphs=[],this._backgroundBillboard=void 0,this._batchIndex=void 0,this._rebindAllGlyphs=!0,this._repositionAllGlyphs=!0,this._actualClampedPosition=void 0,this._removeCallbackFunc=void 0,this._mode=void 0,this._clusterShow=!0,this.text=e.text??"",this._relativeSize=1,xH(this),this._updateClamping()}Object.defineProperties(Kc.prototype,{show:{get:function(){return this._show},set:function(e){if(this._show!==e){this._show=e;let t=this._glyphs;for(let i=0,o=t.length;i<o;i++){let r=t[i].billboard;c(r)&&(r.show=e)}let n=this._backgroundBillboard;c(n)&&(n.show=e)}}},position:{get:function(){return this._position},set:function(e){let t=this._position;if(!f.equals(t,e)){f.clone(e,t);let n=this._glyphs;for(let o=0,r=n.length;o<r;o++){let a=n[o].billboard;c(a)&&(a.position=e)}let i=this._backgroundBillboard;c(i)&&(i.position=e),this._updateClamping()}}},heightReference:{get:function(){return this._heightReference},set:function(e){if(e!==this._heightReference){this._heightReference=e;let t=this._glyphs;for(let i=0,o=t.length;i<o;i++){let r=t[i].billboard;c(r)&&(r.heightReference=e)}let n=this._backgroundBillboard;c(n)&&(n.heightReference=e),dC(this),this._updateClamping()}}},text:{get:function(){return this._text},set:function(e){if(this._text!==e){this._text=e;let t=Kc.filterUnsupportedCharacters(e);this._renderedText=Kc.enableRightToLeftDetection?Hge(t):t,Rd(this)}}},font:{get:function(){return this._font},set:function(e){this._font!==e&&(this._font=e,Rd(this),xH(this))}},fillColor:{get:function(){return this._fillColor},set:function(e){let t=this._fillColor;J.equals(t,e)||(J.clone(e,t),Rd(this))}},outlineColor:{get:function(){return this._outlineColor},set:function(e){let t=this._outlineColor;J.equals(t,e)||(J.clone(e,t),Rd(this))}},outlineWidth:{get:function(){return this._outlineWidth},set:function(e){this._outlineWidth!==e&&(this._outlineWidth=e,Rd(this))}},showBackground:{get:function(){return this._showBackground},set:function(e){this._showBackground!==e&&(this._showBackground=e,Rd(this))}},backgroundColor:{get:function(){return this._backgroundColor},set:function(e){let t=this._backgroundColor;if(!J.equals(t,e)){J.clone(e,t);let n=this._backgroundBillboard;c(n)&&(n.color=t)}}},backgroundPadding:{get:function(){return this._backgroundPadding},set:function(e){let t=this._backgroundPadding;L.equals(t,e)||(L.clone(e,t),dC(this))}},style:{get:function(){return this._style},set:function(e){this._style!==e&&(this._style=e,Rd(this))}},pixelOffset:{get:function(){return this._pixelOffset},set:function(e){let t=this._pixelOffset;if(!L.equals(t,e)){L.clone(e,t);let n=this._glyphs;for(let o=0,r=n.length;o<r;o++){let a=n[o];c(a.billboard)&&(a.billboard.pixelOffset=e)}let i=this._backgroundBillboard;c(i)&&(i.pixelOffset=e)}}},translucencyByDistance:{get:function(){return this._translucencyByDistance},set:function(e){let t=this._translucencyByDistance;if(!mn.equals(t,e)){this._translucencyByDistance=mn.clone(e,t);let n=this._glyphs;for(let o=0,r=n.length;o<r;o++){let a=n[o];c(a.billboard)&&(a.billboard.translucencyByDistance=e)}let i=this._backgroundBillboard;c(i)&&(i.translucencyByDistance=e)}}},pixelOffsetScaleByDistance:{get:function(){return this._pixelOffsetScaleByDistance},set:function(e){let t=this._pixelOffsetScaleByDistance;if(!mn.equals(t,e)){this._pixelOffsetScaleByDistance=mn.clone(e,t);let n=this._glyphs;for(let o=0,r=n.length;o<r;o++){let a=n[o];c(a.billboard)&&(a.billboard.pixelOffsetScaleByDistance=e)}let i=this._backgroundBillboard;c(i)&&(i.pixelOffsetScaleByDistance=e)}}},scaleByDistance:{get:function(){return this._scaleByDistance},set:function(e){let t=this._scaleByDistance;if(!mn.equals(t,e)){this._scaleByDistance=mn.clone(e,t);let n=this._glyphs;for(let o=0,r=n.length;o<r;o++){let a=n[o];c(a.billboard)&&(a.billboard.scaleByDistance=e)}let i=this._backgroundBillboard;c(i)&&(i.scaleByDistance=e)}}},eyeOffset:{get:function(){return this._eyeOffset},set:function(e){let t=this._eyeOffset;if(!f.equals(t,e)){f.clone(e,t);let n=this._glyphs;for(let o=0,r=n.length;o<r;o++){let a=n[o];c(a.billboard)&&(a.billboard.eyeOffset=e)}let i=this._backgroundBillboard;c(i)&&(i.eyeOffset=e)}}},horizontalOrigin:{get:function(){return this._horizontalOrigin},set:function(e){this._horizontalOrigin!==e&&(this._horizontalOrigin=e,dC(this))}},verticalOrigin:{get:function(){return this._verticalOrigin},set:function(e){if(this._verticalOrigin!==e){this._verticalOrigin=e;let t=this._glyphs;for(let i=0,o=t.length;i<o;i++){let r=t[i];c(r.billboard)&&(r.billboard.verticalOrigin=e)}let n=this._backgroundBillboard;c(n)&&(n.verticalOrigin=e),dC(this)}}},scale:{get:function(){return this._scale},set:function(e){if(this._scale!==e){this._scale=e;let t=this._glyphs;for(let i=0,o=t.length;i<o;i++){let r=t[i];c(r.billboard)&&(r.billboard.scale=e*this._relativeSize)}let n=this._backgroundBillboard;c(n)&&(n.scale=e*this._relativeSize),dC(this)}}},totalScale:{get:function(){return this._scale*this._relativeSize}},distanceDisplayCondition:{get:function(){return this._distanceDisplayCondition},set:function(e){if(!to.equals(e,this._distanceDisplayCondition)){this._distanceDisplayCondition=to.clone(e,this._distanceDisplayCondition);let t=this._glyphs;for(let i=0,o=t.length;i<o;i++){let r=t[i];c(r.billboard)&&(r.billboard.distanceDisplayCondition=e)}let n=this._backgroundBillboard;c(n)&&(n.distanceDisplayCondition=e)}}},disableDepthTestDistance:{get:function(){return this._disableDepthTestDistance},set:function(e){if(this._disableDepthTestDistance!==e){this._disableDepthTestDistance=e;let t=this._glyphs;for(let i=0,o=t.length;i<o;i++){let r=t[i];c(r.billboard)&&(r.billboard.disableDepthTestDistance=e)}let n=this._backgroundBillboard;c(n)&&(n.disableDepthTestDistance=e)}}},id:{get:function(){return this._id},set:function(e){if(this._id!==e){this._id=e;let t=this._glyphs;for(let i=0,o=t.length;i<o;i++){let r=t[i];c(r.billboard)&&(r.billboard.id=e)}let n=this._backgroundBillboard;c(n)&&(n.id=e)}}},pickId:{get:function(){if(!(this._glyphs.length===0||!c(this._glyphs[0].billboard)))return this._glyphs[0].billboard.pickId}},_clampedPosition:{get:function(){return this._actualClampedPosition},set:function(e){this._actualClampedPosition=f.clone(e,this._actualClampedPosition);let t=this._glyphs;for(let i=0,o=t.length;i<o;i++){let r=t[i];c(r.billboard)&&(r.billboard._clampedPosition=e)}let n=this._backgroundBillboard;c(n)&&(n._clampedPosition=e)}},clusterShow:{get:function(){return this._clusterShow},set:function(e){if(this._clusterShow!==e){this._clusterShow=e;let t=this._glyphs;for(let i=0,o=t.length;i<o;i++){let r=t[i];c(r.billboard)&&(r.billboard.clusterShow=e)}let n=this._backgroundBillboard;c(n)&&(n.clusterShow=e)}}}});Kc.prototype._updateClamping=function(){Fi._updateClamping(this._labelCollection,this)};Kc.prototype.computeScreenSpacePosition=function(e,t){c(t)||(t=new L);let i=this._labelCollection.modelMatrix,o=c(this._actualClampedPosition)?this._actualClampedPosition:this._position;return Fi._computeScreenSpacePosition(i,o,this._eyeOffset,this._pixelOffset,e,t)};Kc.getScreenSpaceBoundingBox=function(e,t,n){let i=0,o=0,r=0,a=0,s=e.totalScale,A=e._backgroundBillboard;if(c(A))i=t.x+A._translate.x,o=t.y-A._translate.y,r=A.width*s,a=A.height*s,e.verticalOrigin===qt.BOTTOM||e.verticalOrigin===qt.BASELINE?o-=a:e.verticalOrigin===qt.CENTER&&(o-=a*.5);else{i=Number.POSITIVE_INFINITY,o=Number.POSITIVE_INFINITY;let l=0,d=0,m=e._glyphs,p=m.length;for(let g=0;g<p;++g){let h=m[g],C=h.billboard;if(!c(C))continue;let _=t.x+C._translate.x,I=t.y-C._translate.y,b=h.dimensions.width*s,x=h.dimensions.height*s;e.verticalOrigin===qt.BOTTOM||e.verticalOrigin===qt.BASELINE?I-=x:e.verticalOrigin===qt.CENTER&&(I-=x*.5),e._verticalOrigin===qt.TOP?I+=oa.PADDING*s:(e._verticalOrigin===qt.BOTTOM||e._verticalOrigin===qt.BASELINE)&&(I-=oa.PADDING*s),i=Math.min(i,_),o=Math.min(o,I),l=Math.max(l,_+b),d=Math.max(d,I+x)}r=l-i,a=d-o}return c(n)||(n=new oi),n.x=i,n.y=o,n.width=r,n.height=a,n};Kc.filterUnsupportedCharacters=function(e){let t=new RegExp(/[\u0000-\u0008\u000E-\u001F\u00ad\u202a-\u206f\u200b-\u200f]/,"g");return e.replace(t,"")};Kc.prototype.equals=function(e){return this===e||c(e)&&this._show===e._show&&this._scale===e._scale&&this._outlineWidth===e._outlineWidth&&this._showBackground===e._showBackground&&this._style===e._style&&this._verticalOrigin===e._verticalOrigin&&this._horizontalOrigin===e._horizontalOrigin&&this._heightReference===e._heightReference&&this._renderedText===e._renderedText&&this._font===e._font&&f.equals(this._position,e._position)&&J.equals(this._fillColor,e._fillColor)&&J.equals(this._outlineColor,e._outlineColor)&&J.equals(this._backgroundColor,e._backgroundColor)&&L.equals(this._backgroundPadding,e._backgroundPadding)&&L.equals(this._pixelOffset,e._pixelOffset)&&f.equals(this._eyeOffset,e._eyeOffset)&&mn.equals(this._translucencyByDistance,e._translucencyByDistance)&&mn.equals(this._pixelOffsetScaleByDistance,e._pixelOffsetScaleByDistance)&&mn.equals(this._scaleByDistance,e._scaleByDistance)&&to.equals(this._distanceDisplayCondition,e._distanceDisplayCondition)&&this._disableDepthTestDistance===e._disableDepthTestDistance&&this._id===e._id};Kc.prototype.isDestroyed=function(){return!1};Kc.enableRightToLeftDetection=!1;function Oge(e,t){let n=/[a-zA-Z0-9]/,i=/[()[\]{}<>]/,o=[],r="",a=Oo.LTR,s="",A=e.length;for(let l=0;l<A;++l){let d=e.charAt(l);t.test(d)?s=Oo.RTL:n.test(d)?s=Oo.LTR:i.test(d)?s=Oo.BRACKETS:s=Oo.WEAK,l===0&&(a=s),a===s&&s!==Oo.BRACKETS?r+=d:(r!==""&&o.push({Type:a,Word:r}),a=s,r=d)}return o.push({Type:s,Word:r}),o}function kge(e){return e.split("").reverse().join("")}function mC(e,t,n){return e.slice(0,t)+n+e.slice(t)}function Uge(e){switch(e){case"(":return")";case")":return"(";case"[":return"]";case"]":return"[";case"{":return"}";case"}":return"{";case"<":return">";case">":return"<"}}var zge="\u05D0-\u05EA",Gge="\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF",BH=new RegExp(`[${zge}${Gge}]`);function Hge(e){let t=e.split(`
`),n="";for(let i=0;i<t.length;i++){let o=t[i],r=BH.test(o.charAt(0)),a=Oge(o,BH),s=0,A="";for(let l=0;l<a.length;++l){let d=a[l],m=d.Type===Oo.BRACKETS?Uge(d.Word):kge(d.Word);r?d.Type===Oo.RTL?(A=m+A,s=0):d.Type===Oo.LTR?(A=mC(A,s,d.Word),s+=d.Word.length):(d.Type===Oo.WEAK||d.Type===Oo.BRACKETS)&&(d.Type===Oo.WEAK&&a[l-1].Type===Oo.BRACKETS?A=m+A:a[l-1].Type===Oo.RTL?(A=m+A,s=0):a.length>l+1?a[l+1].Type===Oo.RTL?(A=m+A,s=0):(A=mC(A,s,d.Word),s+=d.Word.length):A=mC(A,0,m)):d.Type===Oo.RTL?A=mC(A,s,m):d.Type===Oo.LTR?(A+=d.Word,s=A.length):(d.Type===Oo.WEAK||d.Type===Oo.BRACKETS)&&(l>0&&a[l-1].Type===Oo.RTL?a.length>l+1?a[l+1].Type===Oo.RTL?A=mC(A,s,m):(A+=d.Word,s=A.length):A+=d.Word:(A+=d.Word,s=A.length))}n+=A,i<t.length-1&&(n+=`
`)}return n}var TH=Kc;var RH=ls(SH(),1);function jge(){this.dimensions=void 0,this.billboardTexture=void 0,this.billboard=void 0}var Yge=1.2,wH="ID_WHITE_PIXEL",FS=new L(4,4),Wge=new oi(1,1,1,1);function qge(e,t){let n=t._backgroundBillboardTexture;if(!n.hasImage){let o=document.createElement("canvas");o.width=FS.x,o.height=FS.y;let r=o.getContext("2d");r.fillStyle="#fff",r.fillRect(0,0,o.width,o.height),n.loadImage(wH,o),n.addImageSubRegion(wH,Wge)}let i=e.add({collection:t});return i.setImageTexture(n),i}var Hl={};function Jge(e,t,n,i,o,r){return Hl.font=t,Hl.fillColor=n,Hl.strokeColor=i,Hl.strokeWidth=o,Hl.padding=oa.PADDING,Hl.fill=r===xs.FILL||r===xs.FILL_AND_OUTLINE,Hl.stroke=r===xs.OUTLINE||r===xs.FILL_AND_OUTLINE,Hl.backgroundColor=J.BLACK,gH(e,Hl)}function OS(e,t){let n=t.billboard;c(n)&&(n.show=!1,c(n._removeCallbackFunc)&&(n._removeCallbackFunc(),n._removeCallbackFunc=void 0),e._spareBillboards.push(n),t.billboard=void 0)}var Kge=new RH.default,Xge=/\s/;function Zge(e,t){let n=t._renderedText,i=Kge.splitGraphemes(n),o=i.length,r=t._glyphs,a=r.length;if(t._relativeSize=t._fontSize/oa.FONT_SIZE,o<a)for(let g=o;g<a;++g)OS(e,r[g]);r.length=o;let s=t.show&&t._showBackground&&n.split(`
`).join("").length>0,A=t._backgroundBillboard,l=e._backgroundBillboardCollection;s?(c(A)||(A=qge(l,e),t._backgroundBillboard=A),A.color=t._backgroundColor,A.show=t._show,A.position=t._position,A.eyeOffset=t._eyeOffset,A.pixelOffset=t._pixelOffset,A.horizontalOrigin=Zt.LEFT,A.verticalOrigin=t._verticalOrigin,A.heightReference=t._heightReference,A.scale=t.totalScale,A.pickPrimitive=t,A.id=t._id,A.translucencyByDistance=t._translucencyByDistance,A.pixelOffsetScaleByDistance=t._pixelOffsetScaleByDistance,A.scaleByDistance=t._scaleByDistance,A.distanceDisplayCondition=t._distanceDisplayCondition,A.disableDepthTestDistance=t._disableDepthTestDistance,A.clusterShow=t.clusterShow):c(A)&&(l.remove(A),t._backgroundBillboard=A=void 0);let d=e._glyphBillboardCollection,m=d.billboardTextureCache,p=e._textDimensionsCache;for(let g=0;g<o;++g){let h=i[g],C=t._verticalOrigin,_=JSON.stringify([h,t._fontFamily,t._fontStyle,t._fontWeight,+C]),I=p[_],b=m.get(_);if(!c(b)||!c(I)){b=new _m(d),m.set(_,b);let R=`${t._fontStyle} ${t._fontWeight} ${oa.FONT_SIZE}px ${t._fontFamily}`,z=Jge(h,R,J.WHITE,J.WHITE,0,xs.FILL);if(I=z.dimensions,p[_]=I,z.width>0&&z.height>0&&!Xge.test(h)){let M=(0,QH.default)(z,{cutoff:oa.CUTOFF,radius:oa.RADIUS}),N=z.getContext("2d"),O=z.width,u=z.height,E=N.getImageData(0,0,O,u);for(let y=0;y<O;y++)for(let B=0;B<u;B++){let D=B*O+y,v=M[D]*255,F=D*4;E.data[F+0]=v,E.data[F+1]=v,E.data[F+2]=v,E.data[F+3]=v}N.putImageData(E,0,0),b.loadImage(_,z)}}let x=r[g];if(c(x)||(x=new jge,x.dimensions=I,x.billboardTexture=b,r[g]=x),x.billboardTexture.id!==_&&(x.billboardTexture=b,x.dimensions=I),!b.hasImage){OS(e,x);continue}let T=x.billboard,w=e._spareBillboards;c(T)||(w.length>0?T=w.pop():(T=d.add({collection:e}),T._labelDimensions=new L,T._labelTranslate=new L),x.billboard=T),T.setImageTexture(b),T.show=t._show,T.position=t._position,T.eyeOffset=t._eyeOffset,T.pixelOffset=t._pixelOffset,T.horizontalOrigin=Zt.LEFT,T.verticalOrigin=t._verticalOrigin,T.heightReference=t._heightReference,T.scale=t.totalScale,T.pickPrimitive=t,T.id=t._id,T.translucencyByDistance=t._translucencyByDistance,T.pixelOffsetScaleByDistance=t._pixelOffsetScaleByDistance,T.scaleByDistance=t._scaleByDistance,T.distanceDisplayCondition=t._distanceDisplayCondition,T.disableDepthTestDistance=t._disableDepthTestDistance,T._batchIndex=t._batchIndex,T.outlineColor=t.outlineColor,t.style===xs.FILL_AND_OUTLINE?(T.color=t._fillColor,T.outlineWidth=t.outlineWidth):t.style===xs.FILL?(T.color=t._fillColor,T.outlineWidth=0):t.style===xs.OUTLINE&&(T.color=J.TRANSPARENT,T.outlineWidth=t.outlineWidth)}t._repositionAllGlyphs=!0}function DH(e,t,n){return t===Zt.CENTER?-e/2:t===Zt.RIGHT?-(e+n.x):n.x}var qi=new L,$ge=new L;function eCe(e){let t=e._glyphs,n=e._renderedText,i=0,o=0,r=[],a=Number.NEGATIVE_INFINITY,s=0,A=1,l=t.length,d=e._backgroundBillboard,m=L.clone(c(d)?e._backgroundPadding:L.ZERO,$ge);m.x/=e._relativeSize,m.y/=e._relativeSize;for(let N=0;N<l;++N){if(n.charAt(N)===`
`){r.push(i),++A,i=0;continue}let u=t[N].dimensions;c(u)&&(s=Math.max(s,u.height-u.descent),a=Math.max(a,u.descent),i+=u.width-u.minx,N<l-1&&(i+=t[N+1].dimensions.minx),o=Math.max(o,i))}r.push(i);let p=s+a,g=e.totalScale,h=e._horizontalOrigin,C=e._verticalOrigin,_=0,I=r[_],b=DH(I,h,m),x=(c(e._lineHeight)?e._lineHeight:Yge*e._fontSize)/e._relativeSize,T=x*(A-1),w=o,R=p+T;c(d)&&(w+=m.x*2,R+=m.y*2,d._labelHorizontalOrigin=h),qi.x=b*g,qi.y=0;let z=!0,M=0;for(let N=0;N<l;++N){if(n.charAt(N)===`
`){++_,M+=x,I=r[_],b=DH(I,h,m),qi.x=b*g,z=!0;continue}let O=t[N],u=O.dimensions;if(c(u)&&(C===qt.TOP?(qi.y=u.height-s-m.y,qi.y+=oa.PADDING):C===qt.CENTER?qi.y=(T+u.height-s)/2:C===qt.BASELINE?(qi.y=T,qi.y-=oa.PADDING):(qi.y=T+a+m.y,qi.y-=oa.PADDING),qi.y=(qi.y-u.descent-M)*g,z&&(qi.x-=oa.PADDING*g,z=!1),c(O.billboard)&&(O.billboard._setTranslate(qi),O.billboard._labelDimensions.x=w,O.billboard._labelDimensions.y=R,O.billboard._labelHorizontalOrigin=h),N<l-1)){let E=t[N+1];qi.x+=(u.width-u.minx+E.dimensions.minx)*g}}if(c(d)&&n.split(`
`).join("").length>0&&(h===Zt.CENTER?b=-o/2-m.x:h===Zt.RIGHT?b=-(o+m.x*2):b=0,qi.x=b*g,C===qt.TOP?qi.y=p-s-a:C===qt.CENTER?qi.y=(p-s)/2-a:C===qt.BASELINE?qi.y=-m.y-a:qi.y=0,qi.y=qi.y*g,d.width=w,d.height=R,d._setTranslate(qi),d._labelTranslate=L.clone(qi,d._labelTranslate)),Zf(e.heightReference))for(let N=0;N<l;++N){let u=t[N].billboard;c(u)&&(u._labelTranslate=L.clone(qi,u._labelTranslate))}}function vH(e,t){let n=t._glyphs;for(let i=0,o=n.length;i<o;++i)OS(e,n[i]);c(t._backgroundBillboard)&&(e._backgroundBillboardCollection.remove(t._backgroundBillboard),t._backgroundBillboard=void 0),t._labelCollection=void 0,c(t._removeCallbackFunc)&&t._removeCallbackFunc(),me(t)}function FA(e){e=e??G.EMPTY_OBJECT,this._scene=e.scene,this._batchTable=e.batchTable;let t=new uC({scene:this._scene,textureAtlas:new l_({initialSize:FS})});this._backgroundBillboardCollection=t,this._backgroundBillboardTexture=new _m(t),this._glyphBillboardCollection=new uC({scene:this._scene,batchTable:this._batchTable}),this._glyphBillboardCollection._sdf=!0,this._spareBillboards=[],this._textDimensionsCache={},this._labels=[],this._labelsToUpdate=[],this._totalGlyphCount=0,this._highlightColor=J.clone(J.WHITE),this.show=e.show??!0,this.modelMatrix=Q.clone(e.modelMatrix??Q.IDENTITY),this.debugShowBoundingVolume=e.debugShowBoundingVolume??!1,this.blendOption=e.blendOption??Oi.OPAQUE_AND_TRANSLUCENT}Object.defineProperties(FA.prototype,{length:{get:function(){return this._labels.length}},sizeInBytes:{get:function(){return this._glyphBillboardCollection.sizeInBytes+this._backgroundBillboardCollection.sizeInBytes}},ready:{get:function(){let e=this._backgroundBillboardCollection.get(0);return c(e)&&!e.ready?!1:this._glyphBillboardCollection.ready}}});FA.prototype.add=function(e){let t=new TH(e,this);return this._labels.push(t),this._labelsToUpdate.push(t),t};FA.prototype.remove=function(e){if(c(e)&&e._labelCollection===this){let t=this._labels.indexOf(e);if(t!==-1)return this._labels.splice(t,1),vH(this,e),!0}return!1};FA.prototype.removeAll=function(){let e=this._labels;for(let t=0,n=e.length;t<n;++t)vH(this,e[t]);e.length=0};FA.prototype.contains=function(e){return c(e)&&e._labelCollection===this};FA.prototype.get=function(e){return this._labels[e]};FA.prototype.update=function(e){if(!this.show)return;let t=this._glyphBillboardCollection,n=this._backgroundBillboardCollection;t.modelMatrix=this.modelMatrix,t.debugShowBoundingVolume=this.debugShowBoundingVolume,n.modelMatrix=this.modelMatrix,n.debugShowBoundingVolume=this.debugShowBoundingVolume;let i=this._labelsToUpdate.length;for(let r=0;r<i;++r){let a=this._labelsToUpdate[r];if(a.isDestroyed())continue;let s=a._glyphs.length;a._rebindAllGlyphs&&(Zge(this,a),a._rebindAllGlyphs=!1),a._repositionAllGlyphs&&(eCe(a),a._repositionAllGlyphs=!1);let A=a._glyphs.length-s;this._totalGlyphCount+=A}let o=n.length>0?Oi.TRANSLUCENT:this.blendOption;t.blendOption=o,n.blendOption=o,t._highlightColor=this._highlightColor,n._highlightColor=this._highlightColor,this._labelsToUpdate.length=0,n.update(e),t.update(e)};FA.prototype.isDestroyed=function(){return!1};FA.prototype.destroy=function(){return this.removeAll(),this._glyphBillboardCollection=this._glyphBillboardCollection.destroy(),this._backgroundBillboardCollection=this._backgroundBillboardCollection.destroy(),me(this)};var vd=FA;var MH=`in vec3 position3DHigh;
in vec3 position3DLow;
in vec3 position2DHigh;
in vec3 position2DLow;
in vec3 prevPosition3DHigh;
in vec3 prevPosition3DLow;
in vec3 prevPosition2DHigh;
in vec3 prevPosition2DLow;
in vec3 nextPosition3DHigh;
in vec3 nextPosition3DLow;
in vec3 nextPosition2DHigh;
in vec3 nextPosition2DLow;
in vec4 texCoordExpandAndBatchIndex;

out vec2  v_st;
out float v_width;
out vec4 v_pickColor;
out float v_polylineAngle;

void main()
{
    float texCoord = texCoordExpandAndBatchIndex.x;
    float expandDir = texCoordExpandAndBatchIndex.y;
    bool usePrev = texCoordExpandAndBatchIndex.z < 0.0;
    float batchTableIndex = texCoordExpandAndBatchIndex.w;

    vec2 widthAndShow = batchTable_getWidthAndShow(batchTableIndex);
    float width = widthAndShow.x + 0.5;
    float show = widthAndShow.y;

    if (width < 1.0)
    {
        show = 0.0;
    }

    vec4 pickColor = batchTable_getPickColor(batchTableIndex);

    vec4 p, prev, next;
    if (czm_morphTime == 1.0)
    {
        p = czm_translateRelativeToEye(position3DHigh.xyz, position3DLow.xyz);
        prev = czm_translateRelativeToEye(prevPosition3DHigh.xyz, prevPosition3DLow.xyz);
        next = czm_translateRelativeToEye(nextPosition3DHigh.xyz, nextPosition3DLow.xyz);
    }
    else if (czm_morphTime == 0.0)
    {
        p = czm_translateRelativeToEye(position2DHigh.zxy, position2DLow.zxy);
        prev = czm_translateRelativeToEye(prevPosition2DHigh.zxy, prevPosition2DLow.zxy);
        next = czm_translateRelativeToEye(nextPosition2DHigh.zxy, nextPosition2DLow.zxy);
    }
    else
    {
        p = czm_columbusViewMorph(
                czm_translateRelativeToEye(position2DHigh.zxy, position2DLow.zxy),
                czm_translateRelativeToEye(position3DHigh.xyz, position3DLow.xyz),
                czm_morphTime);
        prev = czm_columbusViewMorph(
                czm_translateRelativeToEye(prevPosition2DHigh.zxy, prevPosition2DLow.zxy),
                czm_translateRelativeToEye(prevPosition3DHigh.xyz, prevPosition3DLow.xyz),
                czm_morphTime);
        next = czm_columbusViewMorph(
                czm_translateRelativeToEye(nextPosition2DHigh.zxy, nextPosition2DLow.zxy),
                czm_translateRelativeToEye(nextPosition3DHigh.xyz, nextPosition3DLow.xyz),
                czm_morphTime);
    }

    #ifdef DISTANCE_DISPLAY_CONDITION
        vec3 centerHigh = batchTable_getCenterHigh(batchTableIndex);
        vec4 centerLowAndRadius = batchTable_getCenterLowAndRadius(batchTableIndex);
        vec3 centerLow = centerLowAndRadius.xyz;
        float radius = centerLowAndRadius.w;
        vec2 distanceDisplayCondition = batchTable_getDistanceDisplayCondition(batchTableIndex);

        float lengthSq;
        if (czm_sceneMode == czm_sceneMode2D)
        {
            lengthSq = czm_eyeHeight2D.y;
        }
        else
        {
            vec4 center = czm_translateRelativeToEye(centerHigh.xyz, centerLow.xyz);
            lengthSq = max(0.0, dot(center.xyz, center.xyz) - radius * radius);
        }

        float nearSq = distanceDisplayCondition.x * distanceDisplayCondition.x;
        float farSq = distanceDisplayCondition.y * distanceDisplayCondition.y;
        if (lengthSq < nearSq || lengthSq > farSq)
        {
            show = 0.0;
        }
    #endif

    float polylineAngle;
    vec4 positionWC = getPolylineWindowCoordinates(p, prev, next, expandDir, width, usePrev, polylineAngle);
    gl_Position = czm_viewportOrthographic * positionWC * show;

    v_st.s = texCoord;
    v_st.t = czm_writeNonPerspective(clamp(expandDir, 0.0, 1.0), gl_Position.w);

    v_width = width;
    v_pickColor = pickColor;
    v_polylineAngle = polylineAngle;
}
`;var Qa={};Qa.numberOfPoints=function(e,t,n){let i=f.distance(e,t);return Math.ceil(i/n)};Qa.numberOfPointsRhumbLine=function(e,t,n){let i=Math.pow(e.longitude-t.longitude,2)+Math.pow(e.latitude-t.latitude,2);return Math.max(1,Math.ceil(Math.sqrt(i/(n*n))))};var tCe=new ue;Qa.extractHeights=function(e,t){let n=e.length,i=new Array(n);for(let o=0;o<n;o++){let r=e[o];i[o]=t.cartesianToCartographic(r,tCe).height}return i};var nCe=new Q,iCe=new f,PH=new f,oCe=new Ze(f.UNIT_X,0),NH=new f,rCe=new Ze(f.UNIT_X,0),aCe=new f,sCe=new f,US=[];function FH(e,t,n){let i=US;i.length=e;let o;if(t===n){for(o=0;o<e;o++)i[o]=t;return i}let a=(n-t)/e;for(o=0;o<e;o++){let s=t+o*a;i[o]=s}return i}var Ey=new ue,Cy=new ue,gf=new f,zS=new f,cCe=new f,kS=new S_,pC=new Za;function ACe(e,t,n,i,o,r,a,s){let A=i.scaleToGeodeticSurface(e,zS),l=i.scaleToGeodeticSurface(t,cCe),d=Qa.numberOfPoints(e,t,n),m=i.cartesianToCartographic(A,Ey),p=i.cartesianToCartographic(l,Cy),g=FH(d,o,r);kS.setEndPoints(m,p);let h=kS.surfaceDistance/d,C=s;m.height=o;let _=i.cartographicToCartesian(m,gf);f.pack(_,a,C),C+=3;for(let I=1;I<d;I++){let b=kS.interpolateUsingSurfaceDistance(I*h,Cy);b.height=g[I],_=i.cartographicToCartesian(b,gf),f.pack(_,a,C),C+=3}return C}function lCe(e,t,n,i,o,r,a,s){let A=i.cartesianToCartographic(e,Ey),l=i.cartesianToCartographic(t,Cy),d=Qa.numberOfPointsRhumbLine(A,l,n);A.height=0,l.height=0;let m=FH(d,o,r);pC.ellipsoid.equals(i)||(pC=new Za(void 0,void 0,i)),pC.setEndPoints(A,l);let p=pC.surfaceDistance/d,g=s;A.height=o;let h=i.cartographicToCartesian(A,gf);f.pack(h,a,g),g+=3;for(let C=1;C<d;C++){let _=pC.interpolateUsingSurfaceDistance(C*p,Cy);_.height=m[C],h=i.cartographicToCartesian(_,gf),f.pack(h,a,g),g+=3}return g}Qa.wrapLongitude=function(e,t){let n=[],i=[];if(c(e)&&e.length>0){t=t??Q.IDENTITY;let o=Q.inverseTransformation(t,nCe),r=Q.multiplyByPoint(o,f.ZERO,iCe),a=f.normalize(Q.multiplyByPointAsVector(o,f.UNIT_Y,PH),PH),s=Ze.fromPointNormal(r,a,oCe),A=f.normalize(Q.multiplyByPointAsVector(o,f.UNIT_X,NH),NH),l=Ze.fromPointNormal(r,A,rCe),d=1;n.push(f.clone(e[0]));let m=n[0],p=e.length;for(let g=1;g<p;++g){let h=e[g];if(Ze.getPointDistance(l,m)<0||Ze.getPointDistance(l,h)<0){let C=en.lineSegmentPlane(m,h,s,aCe);if(c(C)){let _=f.multiplyByScalar(a,5e-9,sCe);Ze.getPointDistance(s,m)<0&&f.negate(_,_),n.push(f.add(C,_,new f)),i.push(d+1),f.negate(_,_),n.push(f.add(C,_,new f)),d=1}}n.push(f.clone(e[g])),d++,m=h}i.push(d)}return{positions:n,lengths:i}};Qa.generateArc=function(e){c(e)||(e={});let t=e.positions,n=t.length,i=e.ellipsoid??pe.default,o=e.height??0,r=Array.isArray(o);if(n<1)return[];if(n===1){let C=i.scaleToGeodeticSurface(t[0],zS);if(o=r?o[0]:o,o!==0){let _=i.geodeticSurfaceNormal(C,gf);f.multiplyByScalar(_,o,_),f.add(C,_,C)}return[C.x,C.y,C.z]}let a=e.minDistance;if(!c(a)){let C=e.granularity??S.RADIANS_PER_DEGREE;a=S.chordLength(C,i.maximumRadius)}let s=0,A;for(A=0;A<n-1;A++)s+=Qa.numberOfPoints(t[A],t[A+1],a);let l=(s+1)*3,d=new Array(l),m=0;for(A=0;A<n-1;A++){let C=t[A],_=t[A+1],I=r?o[A]:o,b=r?o[A+1]:o;m=ACe(C,_,a,i,I,b,d,m)}US.length=0;let p=t[n-1],g=i.cartesianToCartographic(p,Ey);g.height=r?o[n-1]:o;let h=i.cartographicToCartesian(g,gf);return f.pack(h,d,l-3),d};var LH=new ue,uCe=new ue;Qa.generateRhumbArc=function(e){c(e)||(e={});let t=e.positions,n=t.length,i=e.ellipsoid??pe.default,o=e.height??0,r=Array.isArray(o);if(n<1)return[];if(n===1){let I=i.scaleToGeodeticSurface(t[0],zS);if(o=r?o[0]:o,o!==0){let b=i.geodeticSurfaceNormal(I,gf);f.multiplyByScalar(b,o,b),f.add(I,b,I)}return[I.x,I.y,I.z]}let a=e.granularity??S.RADIANS_PER_DEGREE,s=0,A,l=i.cartesianToCartographic(t[0],LH),d;for(A=0;A<n-1;A++)d=i.cartesianToCartographic(t[A+1],uCe),s+=Qa.numberOfPointsRhumbLine(l,d,a),l=ue.clone(d,LH);let m=(s+1)*3,p=new Array(m),g=0;for(A=0;A<n-1;A++){let I=t[A],b=t[A+1],x=r?o[A]:o,T=r?o[A+1]:o;g=lCe(I,b,a,i,x,T,p,g)}US.length=0;let h=t[n-1],C=i.cartesianToCartographic(h,Ey);C.height=r?o[n-1]:o;let _=i.cartographicToCartesian(C,gf);return f.pack(_,p,m-3),p};Qa.generateCartesianArc=function(e){let t=Qa.generateArc(e),n=t.length/3,i=new Array(n);for(let o=0;o<n;o++)i[o]=f.unpack(t,o*3);return i};Qa.generateCartesianRhumbArc=function(e){let t=Qa.generateRhumbArc(e),n=t.length/3,i=new Array(n);for(let o=0;o<n;o++)i[o]=f.unpack(t,o*3);return i};var Vl=Qa;function Ts(e,t){e=e??G.EMPTY_OBJECT,this._show=e.show??!0,this._width=e.width??1,this._loop=e.loop??!1,this._distanceDisplayCondition=e.distanceDisplayCondition,this._material=e.material,c(this._material)||(this._material=Ci.fromType(Ci.ColorType,{color:new J(1,1,1,1)}));let n=e.positions;c(n)||(n=[]),this._positions=n,this._actualPositions=Jr(n,f.equalsEpsilon),this._loop&&this._actualPositions.length>2&&(this._actualPositions===this._positions&&(this._actualPositions=n.slice()),this._actualPositions.push(f.clone(this._actualPositions[0]))),this._length=this._actualPositions.length,this._id=e.id;let i;c(t)&&(i=Q.clone(t.modelMatrix)),this._modelMatrix=i,this._segments=Vl.wrapLongitude(this._actualPositions,i),this._actualLength=void 0,this._propertiesChanged=new Uint32Array(kH),this._polylineCollection=t,this._dirty=!1,this._pickId=void 0,this._boundingVolume=le.fromPoints(this._actualPositions),this._boundingVolumeWC=le.transform(this._boundingVolume,this._modelMatrix),this._boundingVolume2D=new le}var OH=Ts.POSITION_INDEX=0,fCe=Ts.SHOW_INDEX=1,dCe=Ts.WIDTH_INDEX=2,hCe=Ts.MATERIAL_INDEX=3,gC=Ts.POSITION_SIZE_INDEX=4,mCe=Ts.DISTANCE_DISPLAY_CONDITION=5,kH=Ts.NUMBER_OF_PROPERTIES=6;function jl(e,t){++e._propertiesChanged[t];let n=e._polylineCollection;c(n)&&(n._updatePolyline(e,t),e._dirty=!0)}Object.defineProperties(Ts.prototype,{show:{get:function(){return this._show},set:function(e){e!==this._show&&(this._show=e,jl(this,fCe))}},positions:{get:function(){return this._positions},set:function(e){let t=Jr(e,f.equalsEpsilon);this._loop&&t.length>2&&(t===e&&(t=e.slice()),t.push(f.clone(t[0]))),(this._actualPositions.length!==t.length||this._actualPositions.length!==this._length)&&jl(this,gC),this._positions=e,this._actualPositions=t,this._length=t.length,this._boundingVolume=le.fromPoints(this._actualPositions,this._boundingVolume),this._boundingVolumeWC=le.transform(this._boundingVolume,this._modelMatrix,this._boundingVolumeWC),jl(this,OH),this.update()}},material:{get:function(){return this._material},set:function(e){this._material!==e&&(this._material=e,jl(this,hCe))}},width:{get:function(){return this._width},set:function(e){let t=this._width;e!==t&&(this._width=e,jl(this,dCe))}},loop:{get:function(){return this._loop},set:function(e){if(e!==this._loop){let t=this._actualPositions;e?t.length>2&&!f.equals(t[0],t[t.length-1])&&(t.length===this._positions.length&&(this._actualPositions=t=this._positions.slice()),t.push(f.clone(t[0]))):t.length>2&&f.equals(t[0],t[t.length-1])&&(t.length-1===this._positions.length?this._actualPositions=this._positions:t.pop()),this._loop=e,jl(this,gC)}}},id:{get:function(){return this._id},set:function(e){this._id=e,c(this._pickId)&&(this._pickId.object.id=e)}},pickId:{get:function(){return this._pickId}},isDestroyed:{get:function(){return!c(this._polylineCollection)}},distanceDisplayCondition:{get:function(){return this._distanceDisplayCondition},set:function(e){to.equals(e,this._distanceDisplayCondition)||(this._distanceDisplayCondition=to.clone(e,this._distanceDisplayCondition),jl(this,mCe))}}});Ts.prototype.update=function(){let e=Q.IDENTITY;c(this._polylineCollection)&&(e=this._polylineCollection.modelMatrix);let t=this._segments.positions.length,n=this._segments.lengths,i=this._propertiesChanged[OH]>0||this._propertiesChanged[gC]>0;if((!Q.equals(e,this._modelMatrix)||i)&&(this._segments=Vl.wrapLongitude(this._actualPositions,e),this._boundingVolumeWC=le.transform(this._boundingVolume,e,this._boundingVolumeWC)),this._modelMatrix=Q.clone(e,this._modelMatrix),this._segments.positions.length!==t)jl(this,gC);else{let o=n.length;for(let r=0;r<o;++r)if(n[r]!==this._segments.lengths[r]){jl(this,gC);break}}};Ts.prototype.getPickId=function(e){return c(this._pickId)||(this._pickId=e.createPickId({primitive:this,collection:this._polylineCollection,id:this._id})),this._pickId};Ts.prototype._clean=function(){this._dirty=!1;let e=this._propertiesChanged;for(let t=0;t<kH-1;++t)e[t]=0};Ts.prototype._destroy=function(){this._pickId=this._pickId&&this._pickId.destroy(),this._material=this._material&&this._material.destroy(),this._polylineCollection=void 0};var Yl=Ts;var pCe=Yl.SHOW_INDEX,gCe=Yl.WIDTH_INDEX,HS=Yl.POSITION_INDEX,CCe=Yl.MATERIAL_INDEX,UH=Yl.POSITION_SIZE_INDEX,ECe=Yl.DISTANCE_DISPLAY_CONDITION,WH=Yl.NUMBER_OF_PROPERTIES,rs={texCoordExpandAndBatchIndex:0,position3DHigh:1,position3DLow:2,position2DHigh:3,position2DLow:4,prevPosition3DHigh:5,prevPosition3DLow:6,prevPosition2DHigh:7,prevPosition2DLow:8,nextPosition3DHigh:9,nextPosition3DLow:10,nextPosition2DHigh:11,nextPosition2DLow:12};function Xc(e){e=e??G.EMPTY_OBJECT,this.show=e.show??!0,this.modelMatrix=Q.clone(e.modelMatrix??Q.IDENTITY),this._modelMatrix=Q.clone(Q.IDENTITY),this.debugShowBoundingVolume=e.debugShowBoundingVolume??!1,this._opaqueRS=void 0,this._translucentRS=void 0,this._colorCommands=[],this._polylinesUpdated=!1,this._polylinesRemoved=!1,this._createVertexArray=!1,this._propertiesChanged=new Uint32Array(WH),this._polylines=[],this._polylineBuckets={},this._positionBufferUsage={bufferUsage:De.STATIC_DRAW,frameCount:0},this._mode=void 0,this._polylinesToUpdate=[],this._vertexArrays=[],this._positionBuffer=void 0,this._texCoordExpandAndBatchIndexBuffer=void 0,this._batchTable=void 0,this._createBatchTable=!1,this._useHighlightColor=!1,this._highlightColor=J.clone(J.WHITE);let t=this;this._uniformMap={u_highlightColor:function(){return t._highlightColor}}}Object.defineProperties(Xc.prototype,{length:{get:function(){return VS(this),this._polylines.length}}});Xc.prototype.add=function(e){let t=new Yl(e,this);return t._index=this._polylines.length,this._polylines.push(t),this._createVertexArray=!0,this._createBatchTable=!0,t};Xc.prototype.remove=function(e){if(this.contains(e)){if(this._polylinesRemoved=!0,this._createVertexArray=!0,this._createBatchTable=!0,c(e._bucket)){let t=e._bucket;t.shaderProgram=t.shaderProgram&&t.shaderProgram.destroy()}return e._destroy(),!0}return!1};Xc.prototype.removeAll=function(){jS(this),ZH(this),this._polylineBuckets={},this._polylinesRemoved=!1,this._polylines.length=0,this._polylinesToUpdate.length=0,this._createVertexArray=!0};Xc.prototype.contains=function(e){return c(e)&&e._polylineCollection===this};Xc.prototype.get=function(e){return VS(this),this._polylines[e]};function _Ce(e,t){c(e._batchTable)&&e._batchTable.destroy();let n=[{functionName:"batchTable_getWidthAndShow",componentDatatype:V.UNSIGNED_BYTE,componentsPerAttribute:2},{functionName:"batchTable_getPickColor",componentDatatype:V.UNSIGNED_BYTE,componentsPerAttribute:4,normalize:!0},{functionName:"batchTable_getCenterHigh",componentDatatype:V.FLOAT,componentsPerAttribute:3},{functionName:"batchTable_getCenterLowAndRadius",componentDatatype:V.FLOAT,componentsPerAttribute:4},{functionName:"batchTable_getDistanceDisplayCondition",componentDatatype:V.FLOAT,componentsPerAttribute:2}];e._batchTable=new __(t,n,e._polylines.length)}var qH=new Cn,JH=new re,KH=new L;Xc.prototype.update=function(e){if(VS(this),this._polylines.length===0||!this.show)return;TCe(this,e);let t=e.context,n=e.mapProjection,i,o=this._propertiesChanged;if(this._createBatchTable){if(rn.maximumVertexTextureImageUnits===0)throw new ae("Vertex texture fetch support is required to render polylines. The maximum number of vertex texture image units must be greater than zero.");_Ce(this,t),this._createBatchTable=!1}if(this._createVertexArray||yCe(this))HH(this,t,n);else if(this._polylinesUpdated){let A=this._polylinesToUpdate;if(this._mode!==Ee.SCENE3D){let l=A.length;for(let d=0;d<l;++d)i=A[d],i.update()}if(o[UH]||o[CCe])HH(this,t,n);else{let l=A.length,d=this._polylineBuckets;for(let m=0;m<l;++m){i=A[m],o=i._propertiesChanged;let p=i._bucket,g=0;for(let h in d)if(d.hasOwnProperty(h)){if(d[h]===p){o[HS]&&p.writeUpdate(g,i,this._positionBuffer,n);break}g+=d[h].lengthOfPositions}if((o[pCe]||o[gCe])&&this._batchTable.setBatchedAttribute(i._index,0,new L(i._width,i._show)),this._batchTable.attributes.length>2){if(o[HS]||o[UH]){let h=e.mode===Ee.SCENE2D?i._boundingVolume2D:i._boundingVolumeWC,C=Cn.fromCartesian(h.center,qH),_=re.fromElements(C.low.x,C.low.y,C.low.z,h.radius,JH);this._batchTable.setBatchedAttribute(i._index,2,C.high),this._batchTable.setBatchedAttribute(i._index,3,_)}if(o[ECe]){let h=KH;h.x=0,h.y=Number.MAX_VALUE;let C=i.distanceDisplayCondition;c(C)&&(h.x=C.near,h.y=C.far),this._batchTable.setBatchedAttribute(i._index,4,h)}}i._clean()}}A.length=0,this._polylinesUpdated=!1}o=this._propertiesChanged;for(let A=0;A<WH;++A)o[A]=0;let r=Q.IDENTITY;e.mode===Ee.SCENE3D&&(r=this.modelMatrix);let a=e.passes,s=e.morphTime!==0;if((!c(this._opaqueRS)||this._opaqueRS.depthTest.enabled!==s)&&(this._opaqueRS=At.fromCache({depthMask:s,depthTest:{enabled:s}})),(!c(this._translucentRS)||this._translucentRS.depthTest.enabled!==s)&&(this._translucentRS=At.fromCache({blending:Pn.ALPHA_BLEND,depthMask:!s,depthTest:{enabled:s}})),this._batchTable.update(e),a.render||a.pick){let A=this._colorCommands;ICe(this,e,A,r)}};var CC=new le,zH=new le;function ICe(e,t,n,i){let o=t.context,r=t.commandList,a=n.length,s=0,A=!0,l=e._vertexArrays,d=e.debugShowBoundingVolume,p=e._batchTable.getUniformMapCallback(),g=l.length;for(let h=0;h<g;++h){let C=l[h],_=C.buckets,I=_.length;for(let b=0;b<I;++b){let x=_[b],T=x.offset,w=x.bucket.shaderProgram,R=x.bucket.polylines,z=R.length,M,N,O=0,u,E;for(let y=0;y<z;++y){let B=R[y],D=BCe(B._material);if(D!==M){if(c(M)&&O>0){let U=N.isTranslucent();s>=a?(u=new ft({owner:e}),n.push(u)):u=n[s],++s,E=dt(p(N._uniforms),e._uniformMap),u.boundingVolume=le.clone(CC,u.boundingVolume),u.modelMatrix=i,u.shaderProgram=w,u.vertexArray=C.va,u.renderState=U?e._translucentRS:e._opaqueRS,u.pass=U?He.TRANSLUCENT:He.OPAQUE,u.debugShowBoundingVolume=d,u.pickId="v_pickColor",u.uniformMap=E,u.count=O,u.offset=T,T+=O,O=0,A=!0,r.push(u)}N=B._material,N.update(o),M=D}let v=B._locatorBuckets,F=v.length;for(let U=0;U<F;++U){let k=v[U];k.locator===x&&(O+=k.count)}let P;t.mode===Ee.SCENE3D?P=B._boundingVolumeWC:t.mode===Ee.COLUMBUS_VIEW?P=B._boundingVolume2D:t.mode===Ee.SCENE2D?c(B._boundingVolume2D)&&(P=le.clone(B._boundingVolume2D,zH),P.center.x=0):c(B._boundingVolumeWC)&&c(B._boundingVolume2D)&&(P=le.union(B._boundingVolumeWC,B._boundingVolume2D,zH)),A?(A=!1,le.clone(P,CC)):le.union(P,CC,CC)}c(M)&&O>0&&(s>=a?(u=new ft({owner:e}),n.push(u)):u=n[s],++s,E=dt(p(N._uniforms),e._uniformMap),u.boundingVolume=le.clone(CC,u.boundingVolume),u.modelMatrix=i,u.shaderProgram=w,u.vertexArray=C.va,u.renderState=N.isTranslucent()?e._translucentRS:e._opaqueRS,u.pass=N.isTranslucent()?He.TRANSLUCENT:He.OPAQUE,u.debugShowBoundingVolume=d,u.pickId="v_pickColor",u.uniformMap=E,u.count=O,u.offset=T,A=!0,r.push(u)),M=void 0}}n.length=s}Xc.prototype.isDestroyed=function(){return!1};Xc.prototype.destroy=function(){return XH(this),jS(this),ZH(this),this._batchTable=this._batchTable&&this._batchTable.destroy(),me(this)};function yCe(e){let t=!1,n=e._propertiesChanged,i=e._positionBufferUsage;return n[HS]?(i.bufferUsage!==De.STREAM_DRAW&&(t=!0,i.bufferUsage=De.STREAM_DRAW),i.frameCount=100):i.bufferUsage!==De.STATIC_DRAW&&(i.frameCount===0?(t=!0,i.bufferUsage=De.STATIC_DRAW):i.frameCount--),t}var GH=[0,0,0];function HH(e,t,n){e._createVertexArray=!1,jS(e),XH(e),xCe(e);let i=[[]],o=i[0],r=e._batchTable,a=e._useHighlightColor,s=[0],A=0,l=[[]],d=0,m=e._polylineBuckets,p,g;for(p in m)m.hasOwnProperty(p)&&(g=m[p],g.updateShader(t,r,a),d+=g.lengthOfPositions);if(d>0){let h=e._mode,C=new Float32Array(6*d*3),_=new Float32Array(d*4),I,b=0,x=0,T=0;for(p in m)if(m.hasOwnProperty(p)){g=m[p],g.write(C,_,b,x,T,r,t,n),h===Ee.MORPHING&&(c(I)||(I=new Float32Array(6*d*3)),g.writeForMorph(I,b));let E=g.lengthOfPositions;b+=6*E*3,x+=E*4,T+=E*4,A=g.updateIndices(i,s,l,A)}let w=e._positionBufferUsage.bufferUsage,R=De.STATIC_DRAW;e._positionBuffer=ut.createVertexBuffer({context:t,typedArray:C,usage:w});let z;c(I)&&(z=ut.createVertexBuffer({context:t,typedArray:I,usage:w})),e._texCoordExpandAndBatchIndexBuffer=ut.createVertexBuffer({context:t,typedArray:_,usage:R});let M=3*Float32Array.BYTES_PER_ELEMENT,N=4*Float32Array.BYTES_PER_ELEMENT,O=0,u=i.length;for(let E=0;E<u;++E)if(o=i[E],o.length>0){let y=new Uint16Array(o),B=ut.createIndexBuffer({context:t,typedArray:y,usage:De.STATIC_DRAW,indexDatatype:Ge.UNSIGNED_SHORT});O+=s[E];let D=6*(E*(M*S.SIXTY_FOUR_KILOBYTES)-O*M),v=M+D,F=M+v,P=M+F,U=M+P,k=M+U,j=E*(N*S.SIXTY_FOUR_KILOBYTES)-O*N,q=[{index:rs.position3DHigh,componentsPerAttribute:3,componentDatatype:V.FLOAT,offsetInBytes:D,strideInBytes:6*M},{index:rs.position3DLow,componentsPerAttribute:3,componentDatatype:V.FLOAT,offsetInBytes:v,strideInBytes:6*M},{index:rs.position2DHigh,componentsPerAttribute:3,componentDatatype:V.FLOAT,offsetInBytes:D,strideInBytes:6*M},{index:rs.position2DLow,componentsPerAttribute:3,componentDatatype:V.FLOAT,offsetInBytes:v,strideInBytes:6*M},{index:rs.prevPosition3DHigh,componentsPerAttribute:3,componentDatatype:V.FLOAT,offsetInBytes:F,strideInBytes:6*M},{index:rs.prevPosition3DLow,componentsPerAttribute:3,componentDatatype:V.FLOAT,offsetInBytes:P,strideInBytes:6*M},{index:rs.prevPosition2DHigh,componentsPerAttribute:3,componentDatatype:V.FLOAT,offsetInBytes:F,strideInBytes:6*M},{index:rs.prevPosition2DLow,componentsPerAttribute:3,componentDatatype:V.FLOAT,offsetInBytes:P,strideInBytes:6*M},{index:rs.nextPosition3DHigh,componentsPerAttribute:3,componentDatatype:V.FLOAT,offsetInBytes:U,strideInBytes:6*M},{index:rs.nextPosition3DLow,componentsPerAttribute:3,componentDatatype:V.FLOAT,offsetInBytes:k,strideInBytes:6*M},{index:rs.nextPosition2DHigh,componentsPerAttribute:3,componentDatatype:V.FLOAT,offsetInBytes:U,strideInBytes:6*M},{index:rs.nextPosition2DLow,componentsPerAttribute:3,componentDatatype:V.FLOAT,offsetInBytes:k,strideInBytes:6*M},{index:rs.texCoordExpandAndBatchIndex,componentsPerAttribute:4,componentDatatype:V.FLOAT,vertexBuffer:e._texCoordExpandAndBatchIndexBuffer,offsetInBytes:j}],$,H,Z,ee;h===Ee.SCENE3D?(H=e._positionBuffer,$="vertexBuffer",Z=GH,ee="value"):h===Ee.SCENE2D||h===Ee.COLUMBUS_VIEW?(H=GH,$="value",Z=e._positionBuffer,ee="vertexBuffer"):(H=z,$="vertexBuffer",Z=e._positionBuffer,ee="vertexBuffer"),q[0][$]=H,q[1][$]=H,q[2][ee]=Z,q[3][ee]=Z,q[4][$]=H,q[5][$]=H,q[6][ee]=Z,q[7][ee]=Z,q[8][$]=H,q[9][$]=H,q[10][ee]=Z,q[11][ee]=Z;let Ae=new Yi({context:t,attributes:q,indexBuffer:B});e._vertexArrays.push({va:Ae,buckets:l[E]})}}}function bCe(e,t){return t instanceof on?t.id:t}var _y=[];function BCe(e){let t=Ci._uniformList[e.type],n=t.length;_y.length=2*n;let i=0;for(let o=0;o<n;++o){let r=t[o];_y[i]=r,_y[i+1]=e._uniforms[r](),i+=2}return`${e.type}:${JSON.stringify(_y,bCe)}`}function xCe(e){let t=e._mode,n=e._modelMatrix,i=e._polylineBuckets={},o=e._polylines,r=o.length;for(let a=0;a<r;++a){let s=o[a];if(s._actualPositions.length>1){s.update();let A=s.material,l=i[A.type];c(l)||(l=i[A.type]=new OA(A,t,n)),l.addPolyline(s)}}}function TCe(e,t){let n=t.mode;(e._mode!==n||!Q.equals(e._modelMatrix,e.modelMatrix))&&(e._mode=n,e._modelMatrix=Q.clone(e.modelMatrix),e._createVertexArray=!0)}function VS(e){if(e._polylinesRemoved){e._polylinesRemoved=!1;let t=[],n=[],i=0,o,r=e._polylines.length;for(let a=0;a<r;++a)o=e._polylines[a],o.isDestroyed||(o._index=i++,n.push(o),t.push(o));e._polylines=t,e._polylinesToUpdate=n}}function jS(e){let t=e._polylines,n=t.length;for(let i=0;i<n;++i)if(!t[i].isDestroyed){let o=t[i]._bucket;c(o)&&(o.shaderProgram=o.shaderProgram&&o.shaderProgram.destroy())}}function XH(e){let t=e._vertexArrays.length;for(let n=0;n<t;++n)e._vertexArrays[n].va.destroy();e._vertexArrays.length=0}Xc.prototype._updatePolyline=function(e,t){this._polylinesUpdated=!0,e._dirty||this._polylinesToUpdate.push(e),++this._propertiesChanged[t]};function ZH(e){let t=e._polylines,n=t.length;for(let i=0;i<n;++i)t[i].isDestroyed||t[i]._destroy()}function GS(e,t,n){this.count=e,this.offset=t,this.bucket=n}function OA(e,t,n){this.polylines=[],this.lengthOfPositions=0,this.material=e,this.shaderProgram=void 0,this.mode=t,this.modelMatrix=n}OA.prototype.addPolyline=function(e){this.polylines.push(e),e._actualLength=this.getPolylinePositionsLength(e),this.lengthOfPositions+=e._actualLength,e._bucket=this};OA.prototype.updateShader=function(e,t,n){if(c(this.shaderProgram))return;let i=["DISTANCE_DISPLAY_CONDITION"];n&&i.push("VECTOR_TILE"),this.material.shaderSource.search(/in\s+float\s+v_polylineAngle;/g)!==-1&&i.push("POLYLINE_DASH"),Ut.isInternetExplorer()||i.push("CLIP_POLYLINE");let o=new It({defines:i,sources:[`in vec4 v_pickColor;
`,this.material.shaderSource,v_]}),r=t.getVertexShaderCallback()(MH),a=new It({defines:i,sources:[yA,r]});this.shaderProgram=gn.fromCache({context:e,vertexShaderSource:a,fragmentShaderSource:o,attributeLocations:rs})};function $H(e){return f.dot(f.UNIT_X,e._boundingVolume.center)<0||e._boundingVolume.intersectPlane(Ze.ORIGIN_ZX_PLANE)===bt.INTERSECTING}OA.prototype.getPolylinePositionsLength=function(e){let t;if(this.mode===Ee.SCENE3D||!$H(e))return t=e._actualPositions.length,t*4-4;let n=0,i=e._segments.lengths;t=i.length;for(let o=0;o<t;++o)n+=i[o]*4-4;return n};var qo=new f,fc=new f,dc=new f,Iy=new f,SCe=new re,wCe=new L;OA.prototype.write=function(e,t,n,i,o,r,a,s){let A=this.mode,l=s.ellipsoid.maximumRadius*S.PI,d=this.polylines,m=d.length;for(let p=0;p<m;++p){let g=d[p],h=g.width,C=g.show&&h>0,_=g._index,I=this.getSegments(g,s),b=I.positions,x=I.lengths,T=b.length,w=g.getPickId(a).color,R=0,z=0,M;for(let F=0;F<T;++F){F===0?g._loop?M=b[T-2]:(M=Iy,f.subtract(b[0],b[1],M),f.add(b[0],M,M)):M=b[F-1],f.clone(M,fc),f.clone(b[F],qo),F===T-1?g._loop?M=b[1]:(M=Iy,f.subtract(b[T-1],b[T-2],M),f.add(b[T-1],M,M)):M=b[F+1],f.clone(M,dc);let P=x[R];F===z+P&&(z+=P,++R);let U=F-z===0,k=F===z+x[R]-1;A===Ee.SCENE2D&&(fc.z=0,qo.z=0,dc.z=0),(A===Ee.SCENE2D||A===Ee.MORPHING)&&(U||k)&&l-Math.abs(qo.x)<1&&((qo.x<0&&fc.x>0||qo.x>0&&fc.x<0)&&f.clone(qo,fc),(qo.x<0&&dc.x>0||qo.x>0&&dc.x<0)&&f.clone(qo,dc));let j=U?2:0,q=k?2:4;for(let $=j;$<q;++$){Cn.writeElements(qo,e,n),Cn.writeElements(fc,e,n+6),Cn.writeElements(dc,e,n+12);let H=$-2<0?-1:1;t[o]=F/(T-1),t[o+1]=2*($%2)-1,t[o+2]=H,t[o+3]=_,n+=18,o+=4}}let N=SCe;N.x=J.floatToByte(w.red),N.y=J.floatToByte(w.green),N.z=J.floatToByte(w.blue),N.w=J.floatToByte(w.alpha);let O=wCe;O.x=h,O.y=C?1:0;let u=A===Ee.SCENE2D?g._boundingVolume2D:g._boundingVolumeWC,E=Cn.fromCartesian(u.center,qH),y=E.high,B=re.fromElements(E.low.x,E.low.y,E.low.z,u.radius,JH),D=KH;D.x=0,D.y=Number.MAX_VALUE;let v=g.distanceDisplayCondition;c(v)&&(D.x=v.near,D.y=v.far),r.setBatchedAttribute(_,0,O),r.setBatchedAttribute(_,1,N),r.attributes.length>2&&(r.setBatchedAttribute(_,2,y),r.setBatchedAttribute(_,3,B),r.setBatchedAttribute(_,4,D))}};var DCe=new f,QCe=new f,RCe=new f,VH=new f;OA.prototype.writeForMorph=function(e,t){let n=this.modelMatrix,i=this.polylines,o=i.length;for(let r=0;r<o;++r){let a=i[r],s=a._segments.positions,A=a._segments.lengths,l=s.length,d=0,m=0;for(let p=0;p<l;++p){let g;p===0?a._loop?g=s[l-2]:(g=VH,f.subtract(s[0],s[1],g),f.add(s[0],g,g)):g=s[p-1],g=Q.multiplyByPoint(n,g,QCe);let h=Q.multiplyByPoint(n,s[p],DCe),C;p===l-1?a._loop?C=s[1]:(C=VH,f.subtract(s[l-1],s[l-2],C),f.add(s[l-1],C,C)):C=s[p+1],C=Q.multiplyByPoint(n,C,RCe);let _=A[d];p===m+_&&(m+=_,++d);let I=p-m===0,b=p===m+A[d]-1,x=I?2:0,T=b?2:4;for(let w=x;w<T;++w)Cn.writeElements(h,e,t),Cn.writeElements(g,e,t+6),Cn.writeElements(C,e,t+12),t+=18}}};var vCe=new Array(1);OA.prototype.updateIndices=function(e,t,n,i){let o=n.length-1,r=new GS(0,i,this);n[o].push(r);let a=0,s=e[e.length-1],A=0;s.length>0&&(A=s[s.length-1]+1);let l=this.polylines,d=l.length;for(let m=0;m<d;++m){let p=l[m];p._locatorBuckets=[];let g;if(this.mode===Ee.SCENE3D){g=vCe;let C=p._actualPositions.length;if(C>0)g[0]=C;else continue}else g=p._segments.lengths;let h=g.length;if(h>0){let C=0;for(let _=0;_<h;++_){let I=g[_]-1;for(let b=0;b<I;++b)A+4>S.SIXTY_FOUR_KILOBYTES&&(p._locatorBuckets.push({locator:r,count:C}),C=0,t.push(4),s=[],e.push(s),A=0,r.count=a,a=0,i=0,r=new GS(0,0,this),n[++o]=[r]),s.push(A,A+2,A+1),s.push(A+1,A+2,A+3),C+=6,a+=6,i+=6,A+=4}p._locatorBuckets.push({locator:r,count:C}),A+4>S.SIXTY_FOUR_KILOBYTES&&(t.push(0),s=[],e.push(s),A=0,r.count=a,i=0,a=0,r=new GS(0,0,this),n[++o]=[r])}p._clean()}return r.count=a,i};OA.prototype.getPolylineStartIndex=function(e){let t=this.polylines,n=0,i=t.length;for(let o=0;o<i;++o){let r=t[o];if(r===e)break;n+=r._actualLength}return n};var Bm={positions:void 0,lengths:void 0},jH=new Array(1),MCe=new f,PCe=new ue;OA.prototype.getSegments=function(e,t){let n=e._actualPositions;if(this.mode===Ee.SCENE3D)return jH[0]=n.length,Bm.positions=n,Bm.lengths=jH,Bm;$H(e)&&(n=e._segments.positions);let i=t.ellipsoid,o=[],r=this.modelMatrix,a=n.length,s,A=MCe;for(let l=0;l<a;++l)s=n[l],A=Q.multiplyByPoint(r,s,A),o.push(t.project(i.cartesianToCartographic(A,PCe)));if(o.length>0){e._boundingVolume2D=le.fromPoints(o,e._boundingVolume2D);let l=e._boundingVolume2D.center;e._boundingVolume2D.center=new f(l.z,l.x,l.y)}return Bm.positions=o,Bm.lengths=e._segments.lengths,Bm};var YH;OA.prototype.writeUpdate=function(e,t,n,i){let o=this.mode,r=i.ellipsoid.maximumRadius*S.PI,a=t._actualLength;if(a){e+=this.getPolylineStartIndex(t);let s=YH,A=6*a*3;!c(s)||s.length<A?s=YH=new Float32Array(A):s.length>A&&(s=new Float32Array(s.buffer,0,A));let l=this.getSegments(t,i),d=l.positions,m=l.lengths,p=0,g=0,h=0,C;a=d.length;for(let _=0;_<a;++_){_===0?t._loop?C=d[a-2]:(C=Iy,f.subtract(d[0],d[1],C),f.add(d[0],C,C)):C=d[_-1],f.clone(C,fc),f.clone(d[_],qo),_===a-1?t._loop?C=d[1]:(C=Iy,f.subtract(d[a-1],d[a-2],C),f.add(d[a-1],C,C)):C=d[_+1],f.clone(C,dc);let I=m[g];_===h+I&&(h+=I,++g);let b=_-h===0,x=_===h+m[g]-1;o===Ee.SCENE2D&&(fc.z=0,qo.z=0,dc.z=0),(o===Ee.SCENE2D||o===Ee.MORPHING)&&(b||x)&&r-Math.abs(qo.x)<1&&((qo.x<0&&fc.x>0||qo.x>0&&fc.x<0)&&f.clone(qo,fc),(qo.x<0&&dc.x>0||qo.x>0&&dc.x<0)&&f.clone(qo,dc));let T=b?2:0,w=x?2:4;for(let R=T;R<w;++R)Cn.writeElements(qo,s,p),Cn.writeElements(fc,s,p+6),Cn.writeElements(dc,s,p+12),p+=18}n.copyFromArrayView(s,18*Float32Array.BYTES_PER_ELEMENT*e)}};var eV=Xc;function Cf(e){this._positions=e.positions,this._batchTable=e.batchTable,this._batchIds=e.batchIds,this._rectangle=e.rectangle,this._minHeight=e.minimumHeight,this._maxHeight=e.maximumHeight,this._heightReference=e.heightReference,this._billboardCollection=new uC({batchTable:e.batchTable,scene:e.scene}),this._labelCollection=new vd({batchTable:e.batchTable,scene:e.scene}),this._polylineCollection=new eV,this._polylineCollection._useHighlightColor=!0,this._packedBuffer=void 0,this._ready=!1,this._promise=void 0,this._error=void 0}Object.defineProperties(Cf.prototype,{ready:{get:function(){return this._ready}},pointsLength:{get:function(){return this._billboardCollection.length}},texturesByteLength:{get:function(){let e=this._billboardCollection.sizeInBytes,t=this._labelCollection.sizeInBytes;return e+t}}});function NCe(e,t){let n=e._rectangle,i=e._minHeight,o=e._maxHeight,r=2+de.packedLength+pe.packedLength,a=new Float64Array(r),s=0;return a[s++]=i,a[s++]=o,de.pack(n,a,s),s+=de.packedLength,pe.pack(t,a,s),a}var LCe=new $i("createVectorTilePoints",5),FCe=new f;function OCe(e,t){let n=e._positions,i=e._packedBuffer;c(i)||(n=e._positions=n.slice(),e._batchIds=e._batchIds.slice(),i=e._packedBuffer=NCe(e,t));let o=[n.buffer,i.buffer],r={positions:n.buffer,packedBuffer:i.buffer},a=LCe.scheduleTask(r,o);if(c(a))return a.then(s=>{if(e.isDestroyed())return;e._positions=new Float64Array(s.positions);let A=e._billboardCollection,l=e._labelCollection,d=e._polylineCollection;n=e._positions;let m=e._batchIds,p=n.length/3,g=e._heightReference??Nr.NONE;for(let h=0;h<p;++h){let C=m[h],_=f.unpack(n,h*3,FCe),I=A.add();I.position=_,I._batchIndex=C,I.heightReference=g;let b=l.add();b.text=" ",b.position=_,b._batchIndex=C,b.heightReference=g;let x=d.add();x.positions=[f.clone(_),f.clone(_)]}e._positions=void 0,e._packedBuffer=void 0,e._ready=!0}).catch(s=>{e.isDestroyed()||(e._error=s)})}Cf.prototype.createFeatures=function(e,t){let n=this._billboardCollection,i=this._labelCollection,o=this._polylineCollection,r=this._batchIds,a=r.length;for(let s=0;s<a;++s){let A=r[s],l=n.get(s),d=i.get(s),m=o.get(s);t[A]=new bm(e,A,l,d,m)}};Cf.prototype.applyDebugSettings=function(e,t){e?(J.clone(t,this._billboardCollection._highlightColor),J.clone(t,this._labelCollection._highlightColor),J.clone(t,this._polylineCollection._highlightColor)):(J.clone(J.WHITE,this._billboardCollection._highlightColor),J.clone(J.WHITE,this._labelCollection._highlightColor),J.clone(J.WHITE,this._polylineCollection._highlightColor))};function kCe(e,t){let n=e._batchIds,i=n.length;for(let o=0;o<i;++o){let r=n[o],a=t[r];a.show=!0,a.pointSize=bm.defaultPointSize,a.color=bm.defaultColor,a.pointOutlineColor=bm.defaultPointOutlineColor,a.pointOutlineWidth=bm.defaultPointOutlineWidth,a.labelColor=J.WHITE,a.labelOutlineColor=J.WHITE,a.labelOutlineWidth=1,a.font="30px sans-serif",a.labelStyle=xs.FILL,a.labelText=void 0,a.backgroundColor=new J(.165,.165,.165,.8),a.backgroundPadding=new L(7,5),a.backgroundEnabled=!1,a.scaleByDistance=void 0,a.translucencyByDistance=void 0,a.distanceDisplayCondition=void 0,a.heightOffset=0,a.anchorLineEnabled=!1,a.anchorLineColor=J.WHITE,a.image=void 0,a.disableDepthTestDistance=0,a.horizontalOrigin=Zt.CENTER,a.verticalOrigin=qt.CENTER,a.labelHorizontalOrigin=Zt.RIGHT,a.labelVerticalOrigin=qt.BASELINE}}var UCe=new J,zCe=new J,GCe=new J,HCe=new J,VCe=new J,jCe=new J,EC=new mn,_C=new mn,YS=new to;Cf.prototype.applyStyle=function(e,t){if(!c(e)){kCe(this,t);return}let n=this._batchIds,i=n.length;for(let o=0;o<i;++o){let r=n[o],a=t[r];if(c(e.show)&&(a.show=e.show.evaluate(a)),c(e.pointSize)&&(a.pointSize=e.pointSize.evaluate(a)),c(e.color)&&(a.color=e.color.evaluateColor(a,UCe)),c(e.pointOutlineColor)&&(a.pointOutlineColor=e.pointOutlineColor.evaluateColor(a,zCe)),c(e.pointOutlineWidth)&&(a.pointOutlineWidth=e.pointOutlineWidth.evaluate(a)),c(e.labelColor)&&(a.labelColor=e.labelColor.evaluateColor(a,GCe)),c(e.labelOutlineColor)&&(a.labelOutlineColor=e.labelOutlineColor.evaluateColor(a,HCe)),c(e.labelOutlineWidth)&&(a.labelOutlineWidth=e.labelOutlineWidth.evaluate(a)),c(e.font)&&(a.font=e.font.evaluate(a)),c(e.labelStyle)&&(a.labelStyle=e.labelStyle.evaluate(a)),c(e.labelText)?a.labelText=e.labelText.evaluate(a):a.labelText=void 0,c(e.backgroundColor)&&(a.backgroundColor=e.backgroundColor.evaluateColor(a,VCe)),c(e.backgroundPadding)&&(a.backgroundPadding=e.backgroundPadding.evaluate(a)),c(e.backgroundEnabled)&&(a.backgroundEnabled=e.backgroundEnabled.evaluate(a)),c(e.scaleByDistance)){let s=e.scaleByDistance.evaluate(a);c(s)?(EC.near=s.x,EC.nearValue=s.y,EC.far=s.z,EC.farValue=s.w,a.scaleByDistance=EC):a.scaleByDistance=void 0}else a.scaleByDistance=void 0;if(c(e.translucencyByDistance)){let s=e.translucencyByDistance.evaluate(a);c(s)?(_C.near=s.x,_C.nearValue=s.y,_C.far=s.z,_C.farValue=s.w,a.translucencyByDistance=_C):a.translucencyByDistance=void 0}else a.translucencyByDistance=void 0;if(c(e.distanceDisplayCondition)){let s=e.distanceDisplayCondition.evaluate(a);c(s)?(YS.near=s.x,YS.far=s.y,a.distanceDisplayCondition=YS):a.distanceDisplayCondition=void 0}else a.distanceDisplayCondition=void 0;c(e.heightOffset)&&(a.heightOffset=e.heightOffset.evaluate(a)),c(e.anchorLineEnabled)&&(a.anchorLineEnabled=e.anchorLineEnabled.evaluate(a)),c(e.anchorLineColor)&&(a.anchorLineColor=e.anchorLineColor.evaluateColor(a,jCe)),c(e.image)?a.image=e.image.evaluate(a):a.image=void 0,c(e.disableDepthTestDistance)&&(a.disableDepthTestDistance=e.disableDepthTestDistance.evaluate(a)),c(e.horizontalOrigin)&&(a.horizontalOrigin=e.horizontalOrigin.evaluate(a)),c(e.verticalOrigin)&&(a.verticalOrigin=e.verticalOrigin.evaluate(a)),c(e.labelHorizontalOrigin)&&(a.labelHorizontalOrigin=e.labelHorizontalOrigin.evaluate(a)),c(e.labelVerticalOrigin)&&(a.labelVerticalOrigin=e.labelVerticalOrigin.evaluate(a))}};Cf.prototype.update=function(e){if(!this._ready&&(c(this._promise)||(this._promise=OCe(this,e.mapProjection.ellipsoid)),c(this._error))){let t=this._error;throw this._error=void 0,t}this._polylineCollection.update(e),this._billboardCollection.update(e),this._labelCollection.update(e)};Cf.prototype.isDestroyed=function(){return!1};Cf.prototype.destroy=function(){return this._billboardCollection=this._billboardCollection&&this._billboardCollection.destroy(),this._labelCollection=this._labelCollection&&this._labelCollection.destroy(),this._polylineCollection=this._polylineCollection&&this._polylineCollection.destroy(),me(this)};var tV=Cf;function Wl(e){this._batchTable=e.batchTable,this._batchIds=e.batchIds,this._positions=e.positions,this._counts=e.counts,this._indices=e.indices,this._indexCounts=e.indexCounts,this._indexOffsets=void 0,this._batchTableColors=void 0,this._packedBuffer=void 0,this._batchedPositions=void 0,this._transferrableBatchIds=void 0,this._vertexBatchIds=void 0,this._ellipsoid=e.ellipsoid??pe.WGS84,this._minimumHeight=e.minimumHeight,this._maximumHeight=e.maximumHeight,this._polygonMinimumHeights=e.polygonMinimumHeights,this._polygonMaximumHeights=e.polygonMaximumHeights,this._center=e.center??f.ZERO,this._rectangle=e.rectangle,this._center=void 0,this._boundingVolume=e.boundingVolume,this._boundingVolumes=void 0,this._batchedIndices=void 0,this._ready=!1,this._promise=void 0,this._error=void 0,this._primitive=void 0,this.debugWireframe=!1,this.forceRebatch=!1,this.classificationType=wn.BOTH}Object.defineProperties(Wl.prototype,{trianglesLength:{get:function(){return c(this._primitive)?this._primitive.trianglesLength:0}},geometryByteLength:{get:function(){return c(this._primitive)?this._primitive.geometryByteLength:0}},ready:{get:function(){return this._ready}}});function YCe(e){let t=new Float64Array(3+f.packedLength+pe.packedLength+de.packedLength),n=0;return t[n++]=e._indices.BYTES_PER_ELEMENT,t[n++]=e._minimumHeight,t[n++]=e._maximumHeight,f.pack(e._center,t,n),n+=f.packedLength,pe.pack(e._ellipsoid,t,n),n+=pe.packedLength,de.pack(e._rectangle,t,n),t}function WCe(e,t){let n=1,i=t[n++],o=e._boundingVolumes=new Array(i);for(let s=0;s<i;++s)o[s]=ui.unpack(t,n),n+=ui.packedLength;let r=t[n++],a=e._batchedIndices=new Array(r);for(let s=0;s<r;++s){let A=J.unpack(t,n);n+=J.packedLength;let l=t[n++],d=t[n++],m=t[n++],p=new Array(m);for(let g=0;g<m;++g)p[g]=t[n++];a[s]=new Ad({color:A,offset:l,count:d,batchIds:p})}}var qCe=new $i("createVectorTilePolygons",5),JCe=new J;function KCe(e){if(c(e._primitive))return;let t=e._positions,n=e._counts,i=e._indexCounts,o=e._indices,r=e._transferrableBatchIds,a=e._batchTableColors,s=e._packedBuffer;if(!c(a)){t=e._positions=e._positions.slice(),n=e._counts=e._counts.slice(),i=e._indexCounts=e._indexCounts.slice(),o=e._indices=e._indices.slice(),e._center=e._ellipsoid.cartographicToCartesian(de.center(e._rectangle)),r=e._transferrableBatchIds=new Uint32Array(e._batchIds),a=e._batchTableColors=new Uint32Array(r.length);let g=e._batchTable,h=a.length;for(let C=0;C<h;++C){let _=g.getColor(C,JCe);a[C]=_.toRgba()}s=e._packedBuffer=YCe(e)}let A=[t.buffer,n.buffer,i.buffer,o.buffer,r.buffer,a.buffer,s.buffer],l={packedBuffer:s.buffer,positions:t.buffer,counts:n.buffer,indexCounts:i.buffer,indices:o.buffer,batchIds:r.buffer,batchTableColors:a.buffer},d=e._polygonMinimumHeights,m=e._polygonMaximumHeights;c(d)&&c(m)&&(d=d.slice(),m=m.slice(),A.push(d.buffer,m.buffer),l.minimumHeights=d,l.maximumHeights=m);let p=qCe.scheduleTask(l,A);if(c(p))return p.then(g=>{if(e.isDestroyed())return;e._positions=void 0,e._counts=void 0,e._polygonMinimumHeights=void 0,e._polygonMaximumHeights=void 0;let h=new Float64Array(g.packedBuffer),C=h[0];WCe(e,h),e._indices=Ge.getSizeInBytes(C)===2?new Uint16Array(g.indices):new Uint32Array(g.indices),e._indexOffsets=new Uint32Array(g.indexOffsets),e._indexCounts=new Uint32Array(g.indexCounts),e._batchedPositions=new Float32Array(g.positions),e._vertexBatchIds=new Uint16Array(g.batchIds),XCe(e),e._ready=!0}).catch(g=>{e.isDestroyed()||(e._error=g)})}function XCe(e){c(e._primitive)||(e._primitive=new K_({batchTable:e._batchTable,positions:e._batchedPositions,batchIds:e._batchIds,vertexBatchIds:e._vertexBatchIds,indices:e._indices,indexOffsets:e._indexOffsets,indexCounts:e._indexCounts,batchedIndices:e._batchedIndices,boundingVolume:e._boundingVolume,boundingVolumes:e._boundingVolumes,center:e._center}),e._batchTable=void 0,e._batchIds=void 0,e._positions=void 0,e._counts=void 0,e._indices=void 0,e._indexCounts=void 0,e._indexOffsets=void 0,e._batchTableColors=void 0,e._packedBuffer=void 0,e._batchedPositions=void 0,e._transferrableBatchIds=void 0,e._vertexBatchIds=void 0,e._ellipsoid=void 0,e._minimumHeight=void 0,e._maximumHeight=void 0,e._polygonMinimumHeights=void 0,e._polygonMaximumHeights=void 0,e._center=void 0,e._rectangle=void 0,e._boundingVolume=void 0,e._boundingVolumes=void 0,e._batchedIndices=void 0)}Wl.prototype.createFeatures=function(e,t){this._primitive.createFeatures(e,t)};Wl.prototype.applyDebugSettings=function(e,t){this._primitive.applyDebugSettings(e,t)};Wl.prototype.applyStyle=function(e,t){this._primitive.applyStyle(e,t)};Wl.prototype.updateCommands=function(e,t){this._primitive.updateCommands(e,t)};Wl.prototype.update=function(e){if(!this._ready){if(c(this._promise)||(this._promise=KCe(this)),c(this._error)){let t=this._error;throw this._error=void 0,t}return}this._primitive.debugWireframe=this.debugWireframe,this._primitive.forceRebatch=this.forceRebatch,this._primitive.classificationType=this.classificationType,this._primitive.update(e)};Wl.prototype.isDestroyed=function(){return!1};Wl.prototype.destroy=function(){return this._primitive=this._primitive&&this._primitive.destroy(),me(this)};var nV=Wl;var iV=`in vec4 currentPosition;
in vec4 previousPosition;
in vec4 nextPosition;
in vec2 expandAndWidth;
in float a_batchId;

uniform mat4 u_modifiedModelView;

void main()
{
    float expandDir = expandAndWidth.x;
    float width = abs(expandAndWidth.y) + 0.5;
    bool usePrev = expandAndWidth.y < 0.0;

    vec4 p = u_modifiedModelView * currentPosition;
    vec4 prev = u_modifiedModelView * previousPosition;
    vec4 next = u_modifiedModelView * nextPosition;

    float angle;
    vec4 positionWC = getPolylineWindowCoordinatesEC(p, prev, next, expandDir, width, usePrev, angle);
    gl_Position = czm_viewportOrthographic * positionWC;
}
`;function Zc(e){this._positions=e.positions,this._widths=e.widths,this._counts=e.counts,this._batchIds=e.batchIds,this._ellipsoid=e.ellipsoid??pe.WGS84,this._minimumHeight=e.minimumHeight,this._maximumHeight=e.maximumHeight,this._center=e.center,this._rectangle=e.rectangle,this._boundingVolume=e.boundingVolume,this._batchTable=e.batchTable,this._va=void 0,this._sp=void 0,this._rs=void 0,this._uniformMap=void 0,this._command=void 0,this._transferrableBatchIds=void 0,this._packedBuffer=void 0,this._keepDecodedPositions=e.keepDecodedPositions,this._decodedPositions=void 0,this._decodedPositionOffsets=void 0,this._currentPositions=void 0,this._previousPositions=void 0,this._nextPositions=void 0,this._expandAndWidth=void 0,this._vertexBatchIds=void 0,this._indices=void 0,this._constantColor=J.clone(J.WHITE),this._highlightColor=this._constantColor,this._trianglesLength=0,this._geometryByteLength=0,this._ready=!1,this._promise=void 0,this._error=void 0}Object.defineProperties(Zc.prototype,{trianglesLength:{get:function(){return this._trianglesLength}},geometryByteLength:{get:function(){return this._geometryByteLength}},ready:{get:function(){return this._ready}}});function ZCe(e){let t=e._rectangle,n=e._minimumHeight,i=e._maximumHeight,o=e._ellipsoid,r=e._center,a=2+de.packedLength+pe.packedLength+f.packedLength,s=new Float64Array(a),A=0;return s[A++]=n,s[A++]=i,de.pack(t,s,A),A+=de.packedLength,pe.pack(o,s,A),A+=pe.packedLength,f.pack(r,s,A),s}var $Ce=new $i("createVectorTilePolylines",5),xm={previousPosition:0,currentPosition:1,nextPosition:2,expandAndWidth:3,a_batchId:4};function eEe(e,t){if(c(e._va))return;let n=e._positions,i=e._widths,o=e._counts,r=e._transferrableBatchIds,a=e._packedBuffer;c(a)||(n=e._positions=n.slice(),i=e._widths=i.slice(),o=e._counts=o.slice(),r=e._transferrableBatchIds=e._batchIds.slice(),a=e._packedBuffer=ZCe(e));let s=[n.buffer,i.buffer,o.buffer,r.buffer,a.buffer],A={positions:n.buffer,widths:i.buffer,counts:o.buffer,batchIds:r.buffer,packedBuffer:a.buffer,keepDecodedPositions:e._keepDecodedPositions},l=$Ce.scheduleTask(A,s);if(c(l))return l.then(function(d){if(e.isDestroyed())return;e._keepDecodedPositions&&(e._decodedPositions=new Float64Array(d.decodedPositions),e._decodedPositionOffsets=new Uint32Array(d.decodedPositionOffsets)),e._currentPositions=new Float32Array(d.currentPositions),e._previousPositions=new Float32Array(d.previousPositions),e._nextPositions=new Float32Array(d.nextPositions),e._expandAndWidth=new Float32Array(d.expandAndWidth),e._vertexBatchIds=new Uint16Array(d.batchIds);let m=d.indexDatatype;e._indices=m===Ge.UNSIGNED_SHORT?new Uint16Array(d.indices):new Uint32Array(d.indices),tEe(e,t),e._ready=!0}).catch(d=>{e.isDestroyed()||(e._error=d)})}function tEe(e,t){if(!c(e._va)){let n=e._currentPositions,i=e._previousPositions,o=e._nextPositions,r=e._expandAndWidth,a=e._vertexBatchIds,s=e._indices,A=i.byteLength+n.byteLength+o.byteLength;A+=r.byteLength+a.byteLength+s.byteLength,e._trianglesLength=s.length/3,e._geometryByteLength=A;let l=ut.createVertexBuffer({context:t,typedArray:i,usage:De.STATIC_DRAW}),d=ut.createVertexBuffer({context:t,typedArray:n,usage:De.STATIC_DRAW}),m=ut.createVertexBuffer({context:t,typedArray:o,usage:De.STATIC_DRAW}),p=ut.createVertexBuffer({context:t,typedArray:r,usage:De.STATIC_DRAW}),g=ut.createVertexBuffer({context:t,typedArray:a,usage:De.STATIC_DRAW}),h=ut.createIndexBuffer({context:t,typedArray:s,usage:De.STATIC_DRAW,indexDatatype:s.BYTES_PER_ELEMENT===2?Ge.UNSIGNED_SHORT:Ge.UNSIGNED_INT}),C=[{index:xm.previousPosition,vertexBuffer:l,componentDatatype:V.FLOAT,componentsPerAttribute:3},{index:xm.currentPosition,vertexBuffer:d,componentDatatype:V.FLOAT,componentsPerAttribute:3},{index:xm.nextPosition,vertexBuffer:m,componentDatatype:V.FLOAT,componentsPerAttribute:3},{index:xm.expandAndWidth,vertexBuffer:p,componentDatatype:V.FLOAT,componentsPerAttribute:2},{index:xm.a_batchId,vertexBuffer:g,componentDatatype:V.UNSIGNED_SHORT,componentsPerAttribute:1}];e._va=new Yi({context:t,attributes:C,indexBuffer:h}),e._positions=void 0,e._widths=void 0,e._counts=void 0,e._ellipsoid=void 0,e._minimumHeight=void 0,e._maximumHeight=void 0,e._rectangle=void 0,e._transferrableBatchIds=void 0,e._packedBuffer=void 0,e._currentPositions=void 0,e._previousPositions=void 0,e._nextPositions=void 0,e._expandAndWidth=void 0,e._vertexBatchIds=void 0,e._indices=void 0}}var IC=new Q,oV=new f;function nEe(e,t){c(e._uniformMap)||(e._uniformMap={u_modifiedModelView:function(){let n=t.uniformState.view;return Q.clone(n,IC),Q.multiplyByPoint(IC,e._center,oV),Q.setTranslation(IC,oV,IC),IC},u_highlightColor:function(){return e._highlightColor}})}function iEe(e){if(c(e._rs))return;let t={enabled:!0,factor:-5,units:-5};e._rs=At.fromCache({blending:Pn.ALPHA_BLEND,depthMask:!1,depthTest:{enabled:!0},polygonOffset:t})}var oEe=`uniform vec4 u_highlightColor; 
void main()
{
    out_FragColor = u_highlightColor;
}
`;function rEe(e,t){if(c(e._sp))return;let n=e._batchTable,i=n.getVertexShaderCallback(!1,"a_batchId",void 0)(iV),o=n.getFragmentShaderCallback(!1,void 0,!1)(oEe),r=new It({defines:["VECTOR_TILE",Ut.isInternetExplorer()?"":"CLIP_POLYLINE"],sources:[yA,i]}),a=new It({defines:["VECTOR_TILE"],sources:[o]});e._sp=gn.fromCache({context:t,vertexShaderSource:r,fragmentShaderSource:a,attributeLocations:xm})}function aEe(e,t){if(!c(e._command)){let n=e._batchTable.getUniformMapCallback()(e._uniformMap);e._command=new ft({owner:e,vertexArray:e._va,renderState:e._rs,shaderProgram:e._sp,uniformMap:n,boundingVolume:e._boundingVolume,pass:He.TRANSLUCENT,pickId:e._batchTable.getPickId()})}t.commandList.push(e._command)}Zc.getPolylinePositions=function(e,t){let n=e._batchIds,i=e._decodedPositions,o=e._decodedPositionOffsets;if(!c(n)||!c(i))return;let r,a,s=n.length,A=0,l=0;for(r=0;r<s;++r)n[r]===t&&(A+=o[r+1]-o[r]);if(A===0)return;let d=new Float64Array(A*3);for(r=0;r<s;++r)if(n[r]===t){let m=o[r],p=o[r+1]-m;for(a=0;a<p;++a){let g=(m+a)*3;d[l++]=i[g],d[l++]=i[g+1],d[l++]=i[g+2]}}return d};Zc.prototype.getPositions=function(e){return Zc.getPolylinePositions(this,e)};Zc.prototype.createFeatures=function(e,t){let n=this._batchIds,i=n.length;for(let o=0;o<i;++o){let r=n[o];t[r]=new Cs(e,r)}};Zc.prototype.applyDebugSettings=function(e,t){this._highlightColor=e?t:this._constantColor};function sEe(e,t){let n=e._batchIds,i=n.length;for(let o=0;o<i;++o){let r=n[o],a=t[r];a.show=!0,a.color=J.WHITE}}var cEe=new J,AEe=J.WHITE,lEe=!0;Zc.prototype.applyStyle=function(e,t){if(!c(e)){sEe(this,t);return}let n=this._batchIds,i=n.length;for(let o=0;o<i;++o){let r=n[o],a=t[r];a.color=c(e.color)?e.color.evaluateColor(a,cEe):AEe,a.show=c(e.show)?e.show.evaluate(a):lEe}};Zc.prototype.update=function(e){let t=e.context;if(!this._ready){if(c(this._promise)||(this._promise=eEe(this,t)),c(this._error)){let i=this._error;throw this._error=void 0,i}return}nEe(this,t),rEe(this,t),iEe(this);let n=e.passes;(n.render||n.pick)&&aEe(this,e)};Zc.prototype.isDestroyed=function(){return!1};Zc.prototype.destroy=function(){return this._va=this._va&&this._va.destroy(),this._sp=this._sp&&this._sp.destroy(),me(this)};var yy=Zc;var rV=`in vec3 startEllipsoidNormal;
in vec3 endEllipsoidNormal;
in vec4 startPositionAndHeight;
in vec4 endPositionAndHeight;
in vec4 startFaceNormalAndVertexCorner;
in vec4 endFaceNormalAndHalfWidth;
in float a_batchId;

uniform mat4 u_modifiedModelView;
uniform vec2 u_minimumMaximumVectorHeights;

out vec4 v_startPlaneEC;
out vec4 v_endPlaneEC;
out vec4 v_rightPlaneEC;
out float v_halfWidth;
out vec3 v_volumeUpEC;

void main()
{
    // vertex corner IDs
    //          3-----------7
    //         /|   left   /|
    //        / | 1       / |
    //       2-----------6  5  end
    //       | /         | /
    // start |/  right   |/
    //       0-----------4
    //
    float isEnd = floor(startFaceNormalAndVertexCorner.w * 0.251); // 0 for front, 1 for end
    float isTop = floor(startFaceNormalAndVertexCorner.w * mix(0.51, 0.19, isEnd)); // 0 for bottom, 1 for top

    vec3 forward = endPositionAndHeight.xyz - startPositionAndHeight.xyz;
    vec3 right = normalize(cross(forward, startEllipsoidNormal));

    vec4 position = vec4(startPositionAndHeight.xyz, 1.0);
    position.xyz += forward * isEnd;

    v_volumeUpEC = czm_normal * normalize(cross(right, forward));

    // Push for volume height
    float offset;
    vec3 ellipsoidNormal = mix(startEllipsoidNormal, endEllipsoidNormal, isEnd);

    // offset height to create volume
    offset = mix(startPositionAndHeight.w, endPositionAndHeight.w, isEnd);
    offset = mix(u_minimumMaximumVectorHeights.y, u_minimumMaximumVectorHeights.x, isTop) - offset;
    position.xyz += offset * ellipsoidNormal;

    // move from RTC to EC
    position = u_modifiedModelView * position;
    right = czm_normal * right;

    // Push for width in a direction that is in the start or end plane and in a plane with right
    // N = normalEC ("right-facing" direction for push)
    // R = right
    // p = angle between N and R
    // w = distance to push along R if R == N
    // d = distance to push along N
    //
    //   N   R
    //  {  p| }      * cos(p) = dot(N, R) = w / d
    //  d  |  |w    * d = w / dot(N, R)
    //    { | }
    //       o---------- polyline segment ---->
    //
    vec3 scratchNormal = mix(-startFaceNormalAndVertexCorner.xyz, endFaceNormalAndHalfWidth.xyz, isEnd);
    scratchNormal = cross(scratchNormal, mix(startEllipsoidNormal, endEllipsoidNormal, isEnd));
    vec3 miterPushNormal = czm_normal * normalize(scratchNormal);

    offset = 2.0 * endFaceNormalAndHalfWidth.w * max(0.0, czm_metersPerPixel(position)); // offset = widthEC
    offset = offset / dot(miterPushNormal, right);
    position.xyz += miterPushNormal * (offset * sign(0.5 - mod(startFaceNormalAndVertexCorner.w, 2.0)));

    gl_Position = czm_depthClamp(czm_projection * position);

    position = u_modifiedModelView * vec4(startPositionAndHeight.xyz, 1.0);
    vec3 startNormalEC = czm_normal * startFaceNormalAndVertexCorner.xyz;
    v_startPlaneEC = vec4(startNormalEC, -dot(startNormalEC, position.xyz));
    v_rightPlaneEC = vec4(right, -dot(right, position.xyz));

    position = u_modifiedModelView * vec4(endPositionAndHeight.xyz, 1.0);
    vec3 endNormalEC = czm_normal * endFaceNormalAndHalfWidth.xyz;
    v_endPlaneEC = vec4(endNormalEC, -dot(endNormalEC, position.xyz));
    v_halfWidth = endFaceNormalAndHalfWidth.w;
}
`;var aV=`in vec4 v_startPlaneEC;
in vec4 v_endPlaneEC;
in vec4 v_rightPlaneEC;
in float v_halfWidth;
in vec3 v_volumeUpEC;

uniform vec4 u_highlightColor;
void main()
{
    float logDepthOrDepth = czm_branchFreeTernary(czm_sceneMode == czm_sceneMode2D, gl_FragCoord.z, czm_unpackDepth(texture(czm_globeDepthTexture, gl_FragCoord.xy / czm_viewport.zw)));

    // Discard for sky
    if (logDepthOrDepth == 0.0) {
#ifdef DEBUG_SHOW_VOLUME
        out_FragColor = vec4(0.0, 0.0, 1.0, 0.5);
        return;
#else // DEBUG_SHOW_VOLUME
        discard;
#endif // DEBUG_SHOW_VOLUME
    }

    vec4 eyeCoordinate = czm_windowToEyeCoordinates(gl_FragCoord.xy, logDepthOrDepth);
    eyeCoordinate /= eyeCoordinate.w;

    float halfMaxWidth = v_halfWidth * czm_metersPerPixel(eyeCoordinate);

    // Expand halfMaxWidth if direction to camera is almost perpendicular with the volume's up direction
    halfMaxWidth += halfMaxWidth * (1.0 - dot(-normalize(eyeCoordinate.xyz), v_volumeUpEC));

    // Check distance of the eye coordinate against the right-facing plane
    float widthwiseDistance = czm_planeDistance(v_rightPlaneEC, eyeCoordinate.xyz);

    // Check eye coordinate against the mitering planes
    float distanceFromStart = czm_planeDistance(v_startPlaneEC, eyeCoordinate.xyz);
    float distanceFromEnd = czm_planeDistance(v_endPlaneEC, eyeCoordinate.xyz);

    if (abs(widthwiseDistance) > halfMaxWidth || distanceFromStart < 0.0 || distanceFromEnd < 0.0) {
#ifdef DEBUG_SHOW_VOLUME
        out_FragColor = vec4(logDepthOrDepth, 0.0, 0.0, 0.5);
        return;
#else // DEBUG_SHOW_VOLUME
        discard;
#endif // DEBUG_SHOW_VOLUME
    }
    out_FragColor = u_highlightColor;

    czm_writeDepthClamp();
}
`;function ql(e){this._positions=e.positions,this._widths=e.widths,this._counts=e.counts,this._batchIds=e.batchIds,this._ellipsoid=e.ellipsoid??pe.WGS84,this._minimumHeight=e.minimumHeight,this._maximumHeight=e.maximumHeight,this._center=e.center,this._rectangle=e.rectangle,this._batchTable=e.batchTable,this._va=void 0,this._sp=void 0,this._rs=void 0,this._uniformMap=void 0,this._command=void 0,this._transferrableBatchIds=void 0,this._packedBuffer=void 0,this._minimumMaximumVectorHeights=new L(Bo._defaultMinTerrainHeight,Bo._defaultMaxTerrainHeight),this._boundingVolume=ui.fromRectangle(e.rectangle,Bo._defaultMinTerrainHeight,Bo._defaultMaxTerrainHeight,this._ellipsoid),this._classificationType=e.classificationType,this._keepDecodedPositions=e.keepDecodedPositions,this._decodedPositions=void 0,this._decodedPositionOffsets=void 0,this._startEllipsoidNormals=void 0,this._endEllipsoidNormals=void 0,this._startPositionAndHeights=void 0,this._startFaceNormalAndVertexCornerIds=void 0,this._endPositionAndHeights=void 0,this._endFaceNormalAndHalfWidths=void 0,this._vertexBatchIds=void 0,this._indices=void 0,this._constantColor=J.clone(J.WHITE),this._highlightColor=this._constantColor,this._trianglesLength=0,this._geometryByteLength=0,this._ready=!1,this._promise=void 0,this._error=void 0}Object.defineProperties(ql.prototype,{trianglesLength:{get:function(){return this._trianglesLength}},geometryByteLength:{get:function(){return this._geometryByteLength}},ready:{get:function(){return this._ready}}});function uEe(e,t,n){let i=Bo.getMinimumMaximumHeights(t,n),o=i.minimumTerrainHeight,r=i.maximumTerrainHeight,a=e._minimumMaximumVectorHeights;a.x=o,a.y=r;let s=e._boundingVolume,A=e._rectangle;ui.fromRectangle(A,o,r,n,s)}function fEe(e){let t=e._rectangle,n=e._minimumHeight,i=e._maximumHeight,o=e._ellipsoid,r=e._center,a=2+de.packedLength+pe.packedLength+f.packedLength,s=new Float64Array(a),A=0;return s[A++]=n,s[A++]=i,de.pack(t,s,A),A+=de.packedLength,pe.pack(o,s,A),A+=pe.packedLength,f.pack(r,s,A),s}var dEe=new $i("createVectorTileClampedPolylines"),Ef={startEllipsoidNormal:0,endEllipsoidNormal:1,startPositionAndHeight:2,endPositionAndHeight:3,startFaceNormalAndVertexCorner:4,endFaceNormalAndHalfWidth:5,a_batchId:6};function hEe(e,t){if(c(e._va))return;let n=e._positions,i=e._widths,o=e._counts,r=e._transferrableBatchIds,a=e._packedBuffer;c(a)||(n=e._positions=n.slice(),i=e._widths=i.slice(),o=e._counts=o.slice(),r=e._transferrableBatchIds=e._batchIds.slice(),a=e._packedBuffer=fEe(e));let s=[n.buffer,i.buffer,o.buffer,r.buffer,a.buffer],A={positions:n.buffer,widths:i.buffer,counts:o.buffer,batchIds:r.buffer,packedBuffer:a.buffer,keepDecodedPositions:e._keepDecodedPositions},l=dEe.scheduleTask(A,s);if(c(l))return l.then(function(d){if(e.isDestroyed())return;e._keepDecodedPositions&&(e._decodedPositions=new Float64Array(d.decodedPositions),e._decodedPositionOffsets=new Uint32Array(d.decodedPositionOffsets)),e._startEllipsoidNormals=new Float32Array(d.startEllipsoidNormals),e._endEllipsoidNormals=new Float32Array(d.endEllipsoidNormals),e._startPositionAndHeights=new Float32Array(d.startPositionAndHeights),e._startFaceNormalAndVertexCornerIds=new Float32Array(d.startFaceNormalAndVertexCornerIds),e._endPositionAndHeights=new Float32Array(d.endPositionAndHeights),e._endFaceNormalAndHalfWidths=new Float32Array(d.endFaceNormalAndHalfWidths),e._vertexBatchIds=new Uint16Array(d.vertexBatchIds);let m=d.indexDatatype;e._indices=m===Ge.UNSIGNED_SHORT?new Uint16Array(d.indices):new Uint32Array(d.indices),mEe(e,t),e._ready=!0}).catch(d=>{e.isDestroyed()||(e._error=d)})}function mEe(e,t){if(!c(e._va)){let n=e._startEllipsoidNormals,i=e._endEllipsoidNormals,o=e._startPositionAndHeights,r=e._endPositionAndHeights,a=e._startFaceNormalAndVertexCornerIds,s=e._endFaceNormalAndHalfWidths,A=e._vertexBatchIds,l=e._indices,d=n.byteLength+i.byteLength;d+=o.byteLength+r.byteLength,d+=a.byteLength+s.byteLength,d+=A.byteLength+l.byteLength,e._trianglesLength=l.length/3,e._geometryByteLength=d;let m=ut.createVertexBuffer({context:t,typedArray:n,usage:De.STATIC_DRAW}),p=ut.createVertexBuffer({context:t,typedArray:i,usage:De.STATIC_DRAW}),g=ut.createVertexBuffer({context:t,typedArray:o,usage:De.STATIC_DRAW}),h=ut.createVertexBuffer({context:t,typedArray:r,usage:De.STATIC_DRAW}),C=ut.createVertexBuffer({context:t,typedArray:a,usage:De.STATIC_DRAW}),_=ut.createVertexBuffer({context:t,typedArray:s,usage:De.STATIC_DRAW}),I=ut.createVertexBuffer({context:t,typedArray:A,usage:De.STATIC_DRAW}),b=ut.createIndexBuffer({context:t,typedArray:l,usage:De.STATIC_DRAW,indexDatatype:l.BYTES_PER_ELEMENT===2?Ge.UNSIGNED_SHORT:Ge.UNSIGNED_INT}),x=[{index:Ef.startEllipsoidNormal,vertexBuffer:m,componentDatatype:V.FLOAT,componentsPerAttribute:3},{index:Ef.endEllipsoidNormal,vertexBuffer:p,componentDatatype:V.FLOAT,componentsPerAttribute:3},{index:Ef.startPositionAndHeight,vertexBuffer:g,componentDatatype:V.FLOAT,componentsPerAttribute:4},{index:Ef.endPositionAndHeight,vertexBuffer:h,componentDatatype:V.FLOAT,componentsPerAttribute:4},{index:Ef.startFaceNormalAndVertexCorner,vertexBuffer:C,componentDatatype:V.FLOAT,componentsPerAttribute:4},{index:Ef.endFaceNormalAndHalfWidth,vertexBuffer:_,componentDatatype:V.FLOAT,componentsPerAttribute:4},{index:Ef.a_batchId,vertexBuffer:I,componentDatatype:V.UNSIGNED_SHORT,componentsPerAttribute:1}];e._va=new Yi({context:t,attributes:x,indexBuffer:b}),e._positions=void 0,e._widths=void 0,e._counts=void 0,e._ellipsoid=void 0,e._minimumHeight=void 0,e._maximumHeight=void 0,e._rectangle=void 0,e._transferrableBatchIds=void 0,e._packedBuffer=void 0,e._startEllipsoidNormals=void 0,e._endEllipsoidNormals=void 0,e._startPositionAndHeights=void 0,e._startFaceNormalAndVertexCornerIds=void 0,e._endPositionAndHeights=void 0,e._endFaceNormalAndHalfWidths=void 0,e._vertexBatchIds=void 0,e._indices=void 0}}var yC=new Q,sV=new f;function pEe(e,t){c(e._uniformMap)||(e._uniformMap={u_modifiedModelView:function(){let n=t.uniformState.view;return Q.clone(n,yC),Q.multiplyByPoint(yC,e._center,sV),Q.setTranslation(yC,sV,yC),yC},u_highlightColor:function(){return e._highlightColor},u_minimumMaximumVectorHeights:function(){return e._minimumMaximumVectorHeights}})}function cV(e){return At.fromCache({cull:{enabled:!0,face:or.FRONT},blending:Pn.PRE_MULTIPLIED_ALPHA_BLEND,depthMask:!1,stencilTest:{enabled:e,frontFunction:Dn.EQUAL,frontOperation:{fail:nt.KEEP,zFail:nt.KEEP,zPass:nt.KEEP},backFunction:Dn.EQUAL,backOperation:{fail:nt.KEEP,zFail:nt.KEEP,zPass:nt.KEEP},reference:wt.CESIUM_3D_TILE_MASK,mask:wt.CESIUM_3D_TILE_MASK}})}function gEe(e){c(e._rs)||(e._rs=cV(!1),e._rs3DTiles=cV(!0))}function CEe(e,t){if(c(e._sp))return;let n=e._batchTable,i=n.getVertexShaderCallback(!1,"a_batchId",void 0)(rV),o=n.getFragmentShaderCallback(!1,void 0,!0)(aV),r=new It({defines:["VECTOR_TILE",Ut.isInternetExplorer()?"":"CLIP_POLYLINE"],sources:[yA,i]}),a=new It({defines:["VECTOR_TILE"],sources:[o]});e._sp=gn.fromCache({context:t,vertexShaderSource:r,fragmentShaderSource:a,attributeLocations:Ef})}function EEe(e,t){let n=e._command;if(!c(e._command)){let o=e._batchTable.getUniformMapCallback()(e._uniformMap);n=e._command=new ft({owner:e,vertexArray:e._va,renderState:e._rs,shaderProgram:e._sp,uniformMap:o,boundingVolume:e._boundingVolume,pass:He.TERRAIN_CLASSIFICATION,pickId:e._batchTable.getPickId()});let r=ft.shallowClone(n,n.derivedCommands.tileset);r.renderState=e._rs3DTiles,r.pass=He.CESIUM_3D_TILE_CLASSIFICATION,n.derivedCommands.tileset=r}let i=e._classificationType;(i===wn.TERRAIN||i===wn.BOTH)&&t.commandList.push(n),(i===wn.CESIUM_3D_TILE||i===wn.BOTH)&&t.commandList.push(n.derivedCommands.tileset)}ql.prototype.getPositions=function(e){return yy.getPolylinePositions(this,e)};ql.prototype.createFeatures=function(e,t){let n=this._batchIds,i=n.length;for(let o=0;o<i;++o){let r=n[o];t[r]=new Cs(e,r)}};ql.prototype.applyDebugSettings=function(e,t){this._highlightColor=e?t:this._constantColor};function _Ee(e,t){let n=e._batchIds,i=n.length;for(let o=0;o<i;++o){let r=n[o],a=t[r];a.show=!0,a.color=J.WHITE}}var IEe=new J,yEe=J.WHITE,bEe=!0;ql.prototype.applyStyle=function(e,t){if(!c(e)){_Ee(this,t);return}let n=this._batchIds,i=n.length;for(let o=0;o<i;++o){let r=n[o],a=t[r];a.color=c(e.color)?e.color.evaluateColor(a,IEe):yEe,a.show=c(e.show)?e.show.evaluate(a):bEe}};function BEe(e){return Bo.initialize().then(function(){uEe(e,e._rectangle,e._ellipsoid)}).catch(t=>{e.isDestroyed()||(e._error=t)})}ql.prototype.update=function(e){let t=e.context;if(!this._ready){if(c(this._promise)||(this._promise=BEe(this).then(hEe(this,t))),c(this._error)){let i=this._error;throw this._error=void 0,i}return}pEe(this,t),CEe(this,t),gEe(this);let n=e.passes;(n.render||n.pick)&&EEe(this,e)};ql.prototype.isDestroyed=function(){return!1};ql.prototype.destroy=function(){return this._va=this._va&&this._va.destroy(),this._sp=this._sp&&this._sp.destroy(),me(this)};var AV=ql;var WS=32767,xEe=new ue,TEe=new f;function SEe(e,t,n,i,o){let r=e.length/3,a=e.subarray(0,r),s=e.subarray(r,2*r),A=e.subarray(2*r,3*r);Yt.zigZagDeltaDecode(a,s,A);let l=new Float64Array(e.length);for(let d=0;d<r;++d){let m=a[d],p=s[d],g=A[d],h=S.lerp(t.west,t.east,m/WS),C=S.lerp(t.south,t.north,p/WS),_=S.lerp(n,i,g/WS),I=ue.fromRadians(h,C,_,xEe),b=o.cartographicToCartesian(I,TEe);f.pack(b,l,d*3)}return l}var lV=SEe;function eA(e,t,n,i,o){this._tileset=e,this._tile=t,this._resource=n,this._polygons=void 0,this._polylines=void 0,this._points=void 0,this._metadata=void 0,this._batchTable=void 0,this._features=void 0,this.featurePropertiesDirty=!1,this._group=void 0,this._ready=!1,vEe(this,i,o)}Object.defineProperties(eA.prototype,{featuresLength:{get:function(){return c(this._batchTable)?this._batchTable.featuresLength:0}},pointsLength:{get:function(){return c(this._points)?this._points.pointsLength:0}},trianglesLength:{get:function(){let e=0;return c(this._polygons)&&(e+=this._polygons.trianglesLength),c(this._polylines)&&(e+=this._polylines.trianglesLength),e}},geometryByteLength:{get:function(){let e=0;return c(this._polygons)&&(e+=this._polygons.geometryByteLength),c(this._polylines)&&(e+=this._polylines.geometryByteLength),e}},texturesByteLength:{get:function(){return c(this._points)?this._points.texturesByteLength:0}},batchTableByteLength:{get:function(){return c(this._batchTable)?this._batchTable.batchTableByteLength:0}},innerContents:{get:function(){}},ready:{get:function(){return this._ready}},tileset:{get:function(){return this._tileset}},tile:{get:function(){return this._tile}},url:{get:function(){return this._resource.getUrlComponent(!0)}},metadata:{get:function(){return this._metadata},set:function(e){this._metadata=e}},batchTable:{get:function(){return this._batchTable}},group:{get:function(){return this._group},set:function(e){this._group=e}}});function wEe(e){return function(t,n){c(e._polygons)&&e._polygons.updateCommands(t,n)}}function DEe(e,t){let n,i,o,r,a=e.POLYGONS_LENGTH??0,s=e.POLYLINES_LENGTH??0,A=e.POINTS_LENGTH??0;if(a>0&&c(e.POLYGON_BATCH_IDS)){let p=t.byteOffset+e.POLYGON_BATCH_IDS.byteOffset;n=new Uint16Array(t.buffer,p,a)}if(s>0&&c(e.POLYLINE_BATCH_IDS)){let p=t.byteOffset+e.POLYLINE_BATCH_IDS.byteOffset;i=new Uint16Array(t.buffer,p,s)}if(A>0&&c(e.POINT_BATCH_IDS)){let p=t.byteOffset+e.POINT_BATCH_IDS.byteOffset;o=new Uint16Array(t.buffer,p,A)}let l=c(n)||c(i)||c(o),d=a>0&&!c(n)||s>0&&!c(i)||A>0&&!c(o);if(l&&d)throw new ae("If one group of batch ids is defined, then all batch ids must be defined");if(!c(n)&&!c(i)&&!c(o)){let p=0;if(!c(n)&&a>0)for(n=new Uint16Array(a),r=0;r<a;++r)n[r]=p++;if(!c(i)&&s>0)for(i=new Uint16Array(s),r=0;r<s;++r)i[r]=p++;if(!c(o)&&A>0)for(o=new Uint16Array(A),r=0;r<A;++r)o[r]=p++}return{polygons:n,polylines:i,points:o}}var $c=Uint32Array.BYTES_PER_ELEMENT;function QEe(e){return new yy(e)}function REe(e){return new AV(e)}function vEe(e,t,n){n=n??0;let i=new Uint8Array(t),o=new DataView(t);n+=$c;let r=o.getUint32(n,!0);if(r!==1)throw new ae(`Only Vector tile version 1 is supported.  Version ${r} is not.`);n+=$c;let a=o.getUint32(n,!0);if(n+=$c,a===0){e._ready=!0;return}let s=o.getUint32(n,!0);if(n+=$c,s===0)throw new ae("Feature table must have a byte length greater than zero");let A=o.getUint32(n,!0);n+=$c;let l=o.getUint32(n,!0);n+=$c;let d=o.getUint32(n,!0);n+=$c;let m=o.getUint32(n,!0);n+=$c;let p=o.getUint32(n,!0);n+=$c;let g=o.getUint32(n,!0);n+=$c;let h=o.getUint32(n,!0);n+=$c;let C=Fo(i,n,s);n+=s;let _=new Uint8Array(t,n,A);n+=A;let I,b;l>0&&(I=Fo(i,n,l),n+=l,d>0&&(b=new Uint8Array(t,n,d),b=new Uint8Array(b),n+=d));let x=C.POLYGONS_LENGTH??0,T=C.POLYLINES_LENGTH??0,w=C.POINTS_LENGTH??0,R=x+T+w,z=new H_(e,R,I,b,wEe(e));if(e._batchTable=z,R===0)return;let M=new rf(C,_),N=M.getGlobalProperty("REGION");if(!c(N))throw new ae("Feature table global property: REGION must be defined");let O=de.unpack(N),u=N[4],E=N[5],y=e._tile.computedTransform,B=M.getGlobalProperty("RTC_CENTER",V.FLOAT,3);c(B)?(B=f.unpack(B),Q.multiplyByPoint(y,B,B)):(B=de.center(O),B.height=S.lerp(u,E,.5),B=pe.WGS84.cartographicToCartesian(B));let D=DEe(C,_);if(n+=(4-n%4)%4,x>0){M.featuresLength=x;let F=M.getPropertyArray("POLYGON_COUNTS",V.UNSIGNED_INT,1)??M.getPropertyArray("POLYGON_COUNT",V.UNSIGNED_INT,1);if(!c(F))throw new ae("Feature table property: POLYGON_COUNTS must be defined when POLYGONS_LENGTH is greater than 0");let P=M.getPropertyArray("POLYGON_INDEX_COUNTS",V.UNSIGNED_INT,1)??M.getPropertyArray("POLYGON_INDEX_COUNT",V.UNSIGNED_INT,1);if(!c(P))throw new ae("Feature table property: POLYGON_INDEX_COUNTS must be defined when POLYGONS_LENGTH is greater than 0");let U=F.reduce(function(Z,ee){return Z+ee*2},0),k=P.reduce(function(Z,ee){return Z+ee},0),j=new Uint32Array(t,n,k);n+=m;let q=new Uint16Array(t,n,U);n+=p;let $,H;c(C.POLYGON_MINIMUM_HEIGHTS)&&c(C.POLYGON_MAXIMUM_HEIGHTS)&&($=M.getPropertyArray("POLYGON_MINIMUM_HEIGHTS",V.FLOAT,1),H=M.getPropertyArray("POLYGON_MAXIMUM_HEIGHTS",V.FLOAT,1)),e._polygons=new nV({positions:q,counts:F,indexCounts:P,indices:j,minimumHeight:u,maximumHeight:E,polygonMinimumHeights:$,polygonMaximumHeights:H,center:B,rectangle:O,boundingVolume:e.tile.boundingVolume.boundingVolume,batchTable:z,batchIds:D.polygons,modelMatrix:y})}let v=e._tileset;if(T>0){M.featuresLength=T;let F=M.getPropertyArray("POLYLINE_COUNTS",V.UNSIGNED_INT,1)??M.getPropertyArray("POLYLINE_COUNT",V.UNSIGNED_INT,1);if(!c(F))throw new ae("Feature table property: POLYLINE_COUNTS must be defined when POLYLINES_LENGTH is greater than 0");let P=M.getPropertyArray("POLYLINE_WIDTHS",V.UNSIGNED_SHORT,1);if(!c(P)){P=new Uint16Array(T);for(let $=0;$<T;++$)P[$]=2}let U=F.reduce(function($,H){return $+H*3},0),k=new Uint16Array(t,n,U);n+=g;let j=v.examineVectorLinesFunction;if(c(j)){let $=lV(new Uint16Array(k),O,u,E,pe.WGS84);MEe($,F,D.polylines,z,e.url,j)}let q=QEe;c(v.classificationType)&&(q=REe),e._polylines=q({positions:k,widths:P,counts:F,batchIds:D.polylines,minimumHeight:u,maximumHeight:E,center:B,rectangle:O,boundingVolume:e.tile.boundingVolume.boundingVolume,batchTable:z,classificationType:v.classificationType,keepDecodedPositions:v.vectorKeepDecodedPositions})}if(w>0){let F=new Uint16Array(t,n,w*3);n+=h,e._points=new tV({positions:F,batchIds:D.points,minimumHeight:u,maximumHeight:E,rectangle:O,batchTable:z,heightReference:v.heightReference,scene:v.scene})}}function qS(e){let t=e.featuresLength;if(!c(e._features)&&t>0){let n=new Array(t);c(e._polygons)&&e._polygons.createFeatures(e,n),c(e._polylines)&&e._polylines.createFeatures(e,n),c(e._points)&&e._points.createFeatures(e,n),e._features=n}}eA.prototype.hasProperty=function(e,t){return this._batchTable.hasProperty(e,t)};eA.prototype.getFeature=function(e){return c(this._features)||qS(this),this._features[e]};eA.prototype.applyDebugSettings=function(e,t){c(this._polygons)&&this._polygons.applyDebugSettings(e,t),c(this._polylines)&&this._polylines.applyDebugSettings(e,t),c(this._points)&&this._points.applyDebugSettings(e,t)};eA.prototype.applyStyle=function(e){c(this._features)||qS(this),c(this._polygons)&&this._polygons.applyStyle(e,this._features),c(this._polylines)&&this._polylines.applyStyle(e,this._features),c(this._points)&&this._points.applyStyle(e,this._features)};eA.prototype.update=function(e,t){let n=!0;c(this._polygons)&&(this._polygons.classificationType=this._tileset.classificationType,this._polygons.debugWireframe=this._tileset.debugWireframe,this._polygons.update(t),n=n&&this._polygons.ready),c(this._polylines)&&(this._polylines.update(t),n=n&&this._polylines.ready),c(this._points)&&(this._points.update(t),n=n&&this._points.ready),c(this._batchTable)&&n&&(c(this._features)||qS(this),this._batchTable.update(e,t),this._ready=!0)};eA.prototype.pick=function(e,t,n){};eA.prototype.getPolylinePositions=function(e){let t=this._polylines;if(c(t))return t.getPositions(e)};eA.prototype.isDestroyed=function(){return!1};eA.prototype.destroy=function(){return this._polygons=this._polygons&&this._polygons.destroy(),this._polylines=this._polylines&&this._polylines.destroy(),this._points=this._points&&this._points.destroy(),this._batchTable=this._batchTable&&this._batchTable.destroy(),me(this)};function MEe(e,t,n,i,o,r){let a=t.length,s=0;for(let A=0;A<a;A++){let l=t[A]*3,d=e.slice(s,s+l);s+=l,r(d,n[A],o,i)}}var uV=eA;function xr(){}xr._maxSortingConcurrency=Math.max(Ut.hardwareConcurrency-1,1);xr._sorterTaskProcessor=void 0;xr._taskProcessorReady=!1;xr._error=void 0;xr._getSorterTaskProcessor=function(){if(!c(xr._sorterTaskProcessor)){let e=new $i("gaussianSplatSorter",xr._maxSortingConcurrency);e.initWebAssemblyModule({wasmBinaryFile:"ThirdParty/wasm_splats_bg.wasm"}).then(function(t){t?xr._taskProcessorReady=!0:xr._error=new ae("Gaussian splat sorter could not be initialized.")}).catch(t=>{xr._error=t}),xr._sorterTaskProcessor=e}return xr._sorterTaskProcessor};xr.radixSortIndexes=function(e){let t=xr._getSorterTaskProcessor();if(c(xr._error))throw xr._error;if(xr._taskProcessorReady)return t.scheduleTask(e,[e.primitive.positions.buffer])};var JS=xr;function Tr(){}Tr._maxSortingConcurrency=Math.max(Ut.hardwareConcurrency-1,1);Tr._textureTaskProcessor=void 0;Tr._taskProcessorReady=!1;Tr._error=void 0;Tr._getTextureTaskProcessor=function(){if(!c(Tr._textureTaskProcessor)){let e=new $i("gaussianSplatTextureGenerator",Tr._maxSortingConcurrency);e.initWebAssemblyModule({wasmBinaryFile:"ThirdParty/wasm_splats_bg.wasm"}).then(function(t){t?Tr._taskProcessorReady=!0:Tr._error=new ae("Gaussian splat sorter could not be initialized.")}).catch(t=>{Tr._error=t}),Tr._textureTaskProcessor=e}return Tr._textureTaskProcessor};Tr.generateFromAttributes=function(e){let t=Tr._getTextureTaskProcessor();if(c(Tr._error))throw Tr._error;if(!Tr._taskProcessorReady)return;let{attributes:n}=e;return t.scheduleTask(e,[n.positions.buffer,n.scales.buffer,n.rotations.buffer,n.colors.buffer])};var fV=Tr;function PEe(e){let t=new A_;this.shaderBuilder=t,this.uniformMap={},this.renderStateOptions=At.getState(At.fromCache({depthTest:{enabled:!0,func:ga.LESS_OR_EQUAL}})),this.alphaOptions=new sy,this.hasSkipLevelOfDetail=!1,e._useLogDepth&&t.addDefine("LOG_DEPTH_READ_ONLY",void 0,ie.FRAGMENT)}var dV=PEe;var hV=`//
// Vertex shader for Gaussian splats.

// The splats are rendered as quads in view space. Splat attributes are loaded from a texture with precomputed 3D covariance.

// Passes local quad coordinates and color to the fragment shader for Gaussian evaluation. 
//
// Discards splats outside the view frustum or with negligible screen size.
//
#if defined(HAS_SPHERICAL_HARMONICS)
const uint coefficientCount[3] = uint[3](3u,8u,15u);
const float SH_C1 = 0.48860251;
const float SH_C2[5] = float[5](
         1.092548430,
        -1.09254843,
        0.315391565,
        -1.09254843,
        0.546274215
);

const float SH_C3[7] = float[7](
         -0.59004358,
        2.890611442,
        -0.45704579,
        0.373176332,
        -0.45704579,
        1.445305721,
        -0.59004358
);

//Retrieve SH coefficient. Currently RG32UI format
uvec2 loadSHCoeff(uint splatID, int index) {
    ivec2 shTexSize = textureSize(u_sphericalHarmonicsTexture, 0);
    uint dims = coefficientCount[uint(u_sphericalHarmonicsDegree)-1u];
    uint splatsPerRow = uint(shTexSize.x) / dims;
    uint shIndex = (splatID%splatsPerRow) * dims + uint(index);
    ivec2 shPosCoord = ivec2(shIndex, splatID / splatsPerRow);
    return texelFetch(u_sphericalHarmonicsTexture, shPosCoord, 0).rg;
}

//Unpack RG32UI half float coefficients to vec3
vec3 halfToVec3(uvec2 packed) {
    return vec3(unpackHalf2x16(packed.x), unpackHalf2x16(packed.y).x);
}

vec3 loadAndExpandSHCoeff(uint splatID, int index) {
    uvec2 coeff = loadSHCoeff(splatID, index);
    return halfToVec3(coeff);
}

vec3 evaluateSH(uint splatID, vec3 viewDir) {
    vec3 result = vec3(0.0);
    int coeffIndex = 0;
    float x = viewDir.x, y = viewDir.y, z = viewDir.z;

    if (u_sphericalHarmonicsDegree >= 1.) {
        vec3 sh1 = loadAndExpandSHCoeff(splatID, coeffIndex++);
        vec3 sh2 = loadAndExpandSHCoeff(splatID, coeffIndex++);
        vec3 sh3 = loadAndExpandSHCoeff(splatID, coeffIndex++);
        result += -SH_C1 * y * sh1 + SH_C1 * z * sh2 - SH_C1 * x * sh3;

        if (u_sphericalHarmonicsDegree >= 2.) {
            float xx = x * x;
            float yy = y * y;
            float zz = z * z;
            float xy = x * y;
            float yz = y * z;
            float xz = x * z;

            vec3 sh4 = loadAndExpandSHCoeff(splatID, coeffIndex++);
            vec3 sh5 = loadAndExpandSHCoeff(splatID, coeffIndex++);
            vec3 sh6 = loadAndExpandSHCoeff(splatID, coeffIndex++);
            vec3 sh7 = loadAndExpandSHCoeff(splatID, coeffIndex++);
            vec3 sh8 = loadAndExpandSHCoeff(splatID, coeffIndex++);
            result += SH_C2[0] * xy * sh4 +
                    SH_C2[1] * yz * sh5 +
                    SH_C2[2] * (2.0f * zz - xx - yy) * sh6 +
                    SH_C2[3] * xz * sh7 +
                    SH_C2[4] * (xx - yy) * sh8;

            if (u_sphericalHarmonicsDegree >= 3.) {
                vec3 sh9 = loadAndExpandSHCoeff(splatID, coeffIndex++);
                vec3 sh10 = loadAndExpandSHCoeff(splatID, coeffIndex++);
                vec3 sh11 = loadAndExpandSHCoeff(splatID, coeffIndex++);
                vec3 sh12 = loadAndExpandSHCoeff(splatID, coeffIndex++);
                vec3 sh13 = loadAndExpandSHCoeff(splatID, coeffIndex++);
                vec3 sh14 = loadAndExpandSHCoeff(splatID, coeffIndex++);
                vec3 sh15 = loadAndExpandSHCoeff(splatID, coeffIndex++);
                result += SH_C3[0] * y * (3.0f * xx - yy) * sh9 +
                        SH_C3[1] * xy * z * sh10 +
                        SH_C3[2] * y * (4.0f * zz - xx - yy) * sh11 +
                        SH_C3[3] * z * (2.0f * zz - 3.0f * xx - 3.0f * yy) * sh12 +
                        SH_C3[4] * x * (4.0f * zz - xx - yy) * sh13 +
                        SH_C3[5] * z * (xx - yy) * sh14 +
                        SH_C3[6] * x * (xx - 3.0f * yy) * sh15;
            }
        }
    }
    return result;
}
#endif

// Transforms and projects splat covariance into screen space and extracts the major and minor axes of the Gaussian ellipsoid
// which is used to calculate the vertex position in clip space.
vec4 calcCovVectors(vec3 viewPos, mat3 Vrk) {
    vec4 t = vec4(viewPos, 1.0);
    vec2 focal = vec2(czm_projection[0][0] * czm_viewport.z, czm_projection[1][1] * czm_viewport.w);

    vec2 J1 = focal / t.z;
    vec2 J2 = -focal * vec2(t.x, t.y) / (t.z * t.z);
    mat3 J = mat3(
        J1.x, 0.0, J2.x,
        0.0, J1.y, J2.y,
        0.0, 0.0, 0.0
    );

    mat3 R = mat3(czm_modelView);

    //transform our covariance into view space
    //ensures orientation is correct
    mat3 Vrk_view = R * Vrk * transpose(R);
    mat3 cov = transpose(J) * Vrk_view * J;

    float diagonal1 = cov[0][0] + .3;
    float offDiagonal = cov[0][1];
    float diagonal2 = cov[1][1] + .3;

    float mid = 0.5 * (diagonal1 + diagonal2);
    float radius = length(vec2((diagonal1 - diagonal2) * 0.5, offDiagonal));
    float lambda1 = mid + radius;
    float lambda2 = max(mid - radius, 0.1);

    vec2 diagonalVector = normalize(vec2(offDiagonal, lambda1 - diagonal1));

    return vec4(
        min(sqrt(2.0 * lambda1), 1024.0) * diagonalVector,
        min(sqrt(2.0 * lambda2), 1024.0) * vec2(diagonalVector.y, -diagonalVector.x)
    );
}

highp vec4 discardVec = vec4(0.0, 0.0, 2.0, 1.0);

void main() {
    uint texIdx = uint(a_splatIndex);
    ivec2 posCoord = ivec2((texIdx & 0x3ffu) << 1, texIdx >> 10);
    vec4 splatPosition = vec4( uintBitsToFloat(uvec4(texelFetch(u_splatAttributeTexture, posCoord, 0))) );

    vec4 splatViewPos = czm_modelView * vec4(splatPosition.xyz, 1.0);
    vec4 clipPosition = czm_projection * splatViewPos;

    float clip = 1.2 * clipPosition.w;
    if (clipPosition.z < -clip || clipPosition.x < -clip || clipPosition.x > clip ||
        clipPosition.y < -clip || clipPosition.y > clip) {
        gl_Position = vec4(0.0, 0.0, 2.0, 1.0);
        return;
    }

    ivec2 covCoord = ivec2(((texIdx & 0x3ffu) << 1) | 1u, texIdx >> 10);
    uvec4 covariance = uvec4(texelFetch(u_splatAttributeTexture, covCoord, 0));

    gl_Position = clipPosition;

    vec2 u1 = unpackHalf2x16(covariance.x) ;
    vec2 u2 = unpackHalf2x16(covariance.y);
    vec2 u3 = unpackHalf2x16(covariance.z);
    mat3 Vrk = mat3(u1.x, u1.y, u2.x, u1.y, u2.y, u3.x, u2.x, u3.x, u3.y);

    vec4 covVectors = calcCovVectors(splatViewPos.xyz, Vrk);

    if (dot(covVectors.xy, covVectors.xy) < 4.0 && dot(covVectors.zw, covVectors.zw) < 4.0) {
        gl_Position = discardVec;
        return;
    }

    vec2 corner = vec2((gl_VertexID << 1) & 2, gl_VertexID & 2) - 1.;

    gl_Position += vec4((corner.x * covVectors.xy + corner.y * covVectors.zw) / czm_viewport.zw * gl_Position.w, 0, 0);
    gl_Position.z = clamp(gl_Position.z, -abs(gl_Position.w), abs(gl_Position.w));

    v_vertPos = corner ;
    v_splatColor = vec4(covariance.w & 0xffu, (covariance.w >> 8) & 0xffu, (covariance.w >> 16) & 0xffu, (covariance.w >> 24) & 0xffu) / 255.0;
#if defined(HAS_SPHERICAL_HARMONICS)
    vec4 splatWC = czm_inverseView * splatViewPos;
    vec3 viewDirModel = normalize(u_inverseModelRotation * (splatWC.xyz - u_cameraPositionWC.xyz));

    v_splatColor.rgb += evaluateSH(texIdx, viewDirModel).rgb;
#endif
    v_splitDirection = u_splitDirection;
}`;var mV=`//
// Fragment shader for Gaussian splats.
// Renders a Gaussian splat within a quad, discarding fragments outside the unit circle.
// Applies an approximate Gaussian falloff based on distance from the center and outputs
// a color modulated by the alpha and Gaussian weight.
//
void main() {
    if (v_splitDirection < 0.0 && gl_FragCoord.x > czm_splitPosition) discard;
    if (v_splitDirection > 0.0 && gl_FragCoord.x < czm_splitPosition) discard;

    float A = -dot(v_vertPos, v_vertPos);
    if (A < -4.) {
        discard;
    }

    float B = exp(A * 4.) * v_splatColor.a ;
    out_FragColor = vec4(v_splatColor.rgb * B , B);
}
`;var Tm=new Q,gV=new Q,_f=new Q,NEe=new Q,as={IDLE:0,WAITING:1,SORTING:2,SORTED:3,ERROR:4};function LEe(e,t){return new on({context:e,source:{width:t.width,height:t.height,arrayBufferView:t.data},preMultiplyAlpha:!1,skipColorSpaceConversion:!0,pixelFormat:_t.RG_INTEGER,pixelDatatype:mt.UNSIGNED_INT,flipY:!1,sampler:nn.NEAREST})}function pV(e,t){return new on({context:e,source:{width:t.width,height:t.height,arrayBufferView:t.data},preMultiplyAlpha:!1,skipColorSpaceConversion:!0,pixelFormat:_t.RGBA_INTEGER,pixelDatatype:mt.UNSIGNED_INT,flipY:!1,sampler:nn.NEAREST})}function Ss(e){e=e??G.EMPTY_OBJECT,this._positions=void 0,this._rotations=void 0,this._scales=void 0,this._colors=void 0,this._indexes=void 0,this._numSplats=0,this._needsGaussianSplatTexture=!0,this._prevViewMatrix=new Q,this._debugShowBoundingVolume=e.debugShowBoundingVolume??!1,this.gaussianSplatTexture=void 0,this.sphericalHarmonicsTexture=void 0,this._lastTextureWidth=0,this._lastTextureHeight=0,this._vertexArray=void 0,this._vertexArrayLen=-1,this._splitDirection=qa.NONE,this._dirty=!1,this._tileset=e.tileset,this._baseTilesetUpdate=this._tileset.update,this._tileset.update=this._wrappedUpdate.bind(this),this._tileset.tileLoad.addEventListener(this.onTileLoad,this),this._tileset.tileVisible.addEventListener(this.onTileVisible,this),this.selectedTileLength=0,this._ready=!1,this._hasGaussianSplatTexture=!1,this._gaussianSplatTexturePending=!1,this._drawCommand=void 0,this._rootTransform=void 0,this._axisCorrectionMatrix=tt.getAxisCorrectionMatrix(fi.Y,fi.X,new Q),this._isDestroyed=!1,this._sorterState=as.IDLE,this._sorterPromise=void 0,this._sorterError=void 0}Object.defineProperties(Ss.prototype,{ready:{get:function(){return this._ready}},splitDirection:{get:function(){return this._splitDirection},set:function(e){this._splitDirection!==e&&(this._splitDirection=e,this._dirty=!0)}}});Ss.prototype._wrappedUpdate=function(e){this._baseTilesetUpdate.call(this._tileset,e),this.update(e)};Ss.prototype.destroy=function(){this._positions=void 0,this._rotations=void 0,this._scales=void 0,this._colors=void 0,this._indexes=void 0,c(this.gaussianSplatTexture)&&(this.gaussianSplatTexture.destroy(),this.gaussianSplatTexture=void 0);let e=this._drawCommand;return c(e)&&(e.shaderProgram=e.shaderProgram&&e.shaderProgram.destroy()),c(this._vertexArray)&&(this._vertexArray.destroy(),this._vertexArray=void 0),this._tileset.update=this._baseTilesetUpdate.bind(this._tileset),me(this)};Ss.prototype.isDestroyed=function(){return this._isDestroyed};Ss.prototype.onTileLoad=function(e){this._dirty=!0};Ss.prototype.onTileVisible=function(e){};Ss.transformTile=function(e){let t=e.computedTransform,n=e.content.gltfPrimitive,i=e.tileset.gaussianSplatPrimitive,o=Q.multiplyTransformation(t,i._axisCorrectionMatrix,Tm);Q.multiplyTransformation(o,e.content.worldTransform,o);let r=Q.multiply(e.tileset.modelMatrix,Q.fromArray(e.tileset.root.transform),gV),a=Q.inverse(r,_f),s=Q.multiplyTransformation(a,o,Tm),A=e.content._originalPositions,l=e.content._originalRotations,d=e.content._originalScales,m=tt.getAttributeBySemantic(n,Pe.POSITION).typedArray,p=tt.getAttributeBySemantic(n,Pe.ROTATION).typedArray,g=tt.getAttributeBySemantic(n,Pe.SCALE).typedArray,h=new f,C=new gt,_=new f;for(let I=0;I<A.length/3;++I)h.x=A[I*3],h.y=A[I*3+1],h.z=A[I*3+2],C.x=l[I*4],C.y=l[I*4+1],C.z=l[I*4+2],C.w=l[I*4+3],_.x=d[I*3],_.y=d[I*3+1],_.z=d[I*3+2],Q.fromTranslationQuaternionRotationScale(h,C,_,_f),Q.multiplyTransformation(s,_f,_f),Q.getTranslation(_f,h),Q.getRotation(_f,C),Q.getScale(_f,_),m[I*3]=h.x,m[I*3+1]=h.y,m[I*3+2]=h.z,p[I*4]=C.x,p[I*4+1]=C.y,p[I*4+2]=C.z,p[I*4+3]=C.w,g[I*3]=_.x,g[I*3+1]=_.y,g[I*3+2]=_.z};Ss.generateSplatTexture=function(e,t){e._gaussianSplatTexturePending=!0;let n=fV.generateFromAttributes({attributes:{positions:new Float32Array(e._positions),scales:new Float32Array(e._scales),rotations:new Float32Array(e._rotations),colors:new Uint8Array(e._colors)},count:e._numSplats});if(!c(n)){e._gaussianSplatTexturePending=!1;return}n.then(i=>{if(!e._gaussianSplatTexture)e.gaussianSplatTexture=pV(t.context,i);else if(e._lastTextureHeight!==i.height||e._lastTextureWidth!==i.width){let o=e.gaussianSplatTexture;e._gaussianSplatTexture=pV(t.context,i),o.destroy()}else e.gaussianSplatTexture.copyFrom({source:{width:i.width,height:i.height,arrayBufferView:i.data}});e._lastTextureHeight=i.height,e._lastTextureWidth=i.width,e._hasGaussianSplatTexture=!0,e._needsGaussianSplatTexture=!1,e._gaussianSplatTexturePending=!1,(!c(e._indexes)||e._indexes.length<e._numSplats)&&(e._indexes=new Uint32Array(e._numSplats));for(let o=0;o<e._numSplats;++o)e._indexes[o]=o}).catch(i=>{console.error("Error generating Gaussian splat texture:",i),e._gaussianSplatTexturePending=!1})};Ss.buildGSplatDrawCommand=function(e,t){let n=e._tileset,i=new dV(e),{shaderBuilder:o}=i,r=i.renderStateOptions;r.cull.enabled=!1,r.depthMask=!1,r.depthTest.enabled=!0,r.blending=Pn.PRE_MULTIPLIED_ALPHA_BLEND,i.alphaOptions.pass=He.GAUSSIAN_SPLATS,o.addAttribute("vec2","a_screenQuadPosition"),o.addAttribute("float","a_splatIndex"),o.addVarying("vec4","v_splatColor"),o.addVarying("vec2","v_vertPos"),o.addUniform("float","u_splitDirection",ie.VERTEX),o.addVarying("float","v_splitDirection"),o.addUniform("highp usampler2D","u_splatAttributeTexture",ie.VERTEX),o.addUniform("float","u_sphericalHarmonicsDegree",ie.VERTEX),o.addUniform("float","u_splatScale",ie.VERTEX),o.addUniform("vec3","u_cameraPositionWC",ie.VERTEX),o.addUniform("mat3","u_inverseModelRotation",ie.VERTEX);let a=i.uniformMap;a.u_splatAttributeTexture=function(){return e.gaussianSplatTexture},e._sphericalHarmonicsDegree>0&&(o.addDefine("HAS_SPHERICAL_HARMONICS","1",ie.VERTEX),o.addUniform("highp usampler2D","u_sphericalHarmonicsTexture",ie.VERTEX),a.u_sphericalHarmonicsTexture=function(){return e.sphericalHarmonicsTexture}),a.u_sphericalHarmonicsDegree=function(){return e._sphericalHarmonicsDegree},a.u_cameraPositionWC=function(){return f.clone(t.camera.positionWC)},a.u_inverseModelRotation=function(){let g=e._tileset,h=Q.multiply(g.modelMatrix,Q.fromArray(g.root.transform),Tm);return Q.getRotation(Q.inverse(h,_f),NEe)},a.u_splitDirection=function(){return e.splitDirection},i.instanceCount=e._numSplats,i.count=4,i.primitiveType=Me.TRIANGLE_STRIP,o.addVertexLines(hV),o.addFragmentLines(mV);let s=o.buildShaderProgram(t.context),A=Re(At.fromCache(i.renderStateOptions),!0);A.cull.face=tt.getCullFace(n.modelMatrix,Me.TRIANGLE_STRIP),A=At.fromCache(A);let l={screenQuadPosition:0,splatIndex:2},d=new Rt.Attribute;if(d.name="_SPLAT_INDEXES",d.typedArray=e._indexes,d.componentDatatype=V.UNSIGNED_INT,d.type=ct.SCALAR,d.normalized=!1,d.count=i.instanceCount,d.constant=0,d.instanceDivisor=1,!c(e._vertexArray)||e._indexes.length>e._vertexArrayLen){let g=new Dt({attributes:{screenQuadPosition:new rt({componentDatatype:V.FLOAT,componentsPerAttribute:2,values:[-1,-1,1,-1,1,1,-1,1],name:"_SCREEN_QUAD_POS",variableName:"screenQuadPosition"}),splatIndex:{...d,variableName:"splatIndex"}},primitiveType:Me.TRIANGLE_STRIP});e._vertexArray=Yi.fromGeometry({context:t.context,geometry:g,attributeLocations:l,bufferUsage:De.DYNAMIC_DRAW,interleave:!1})}else e._vertexArray.getAttribute(1).vertexBuffer.copyFromArrayView(e._indexes);e._vertexArrayLen=e._indexes.length;let m=Q.multiply(n.modelMatrix,Q.fromArray(n.root.transform),gV),p=new ft({boundingVolume:n.boundingSphere,modelMatrix:m,uniformMap:a,renderState:A,vertexArray:e._vertexArray,shaderProgram:s,cull:r.cull.enabled,pass:He.GAUSSIAN_SPLATS,count:i.count,owner:this,instanceCount:i.instanceCount,primitiveType:Me.TRIANGLE_STRIP,debugShowBoundingVolume:n.debugShowBoundingVolume,castShadows:!1,receiveShadows:!1});e._drawCommand=p};Ss.prototype.update=function(e){let t=this._tileset;if(c(this._rootTransform)||(this._rootTransform=t.root.computedTransform),!(!t.show||t._selectedTiles.length===0)){if(this._drawCommand&&e.commandList.push(this._drawCommand),t._modelMatrixChanged){this._dirty=!0;return}if(e.passes.pick!==!0){if(this.splitDirection!==t.splitDirection&&(this.splitDirection=t.splitDirection),this._sorterState===as.IDLE){if(!this._dirty&&Q.equals(e.camera.viewMatrix,this._prevViewMatrix))return;if(t._selectedTiles.length!==0&&t._selectedTiles.length!==this.selectedTileLength){this._numSplats=0,this._positions=void 0,this._rotations=void 0,this._scales=void 0,this._colors=void 0,this._indexes=void 0,this._shData=void 0,this._needsGaussianSplatTexture=!0,this._gaussianSplatTexturePending=!1;let n=t._selectedTiles,i=n.reduce((a,s)=>a+s.content.pointsLength,0),o=(a,s)=>{let A,l=0;for(let d of n){let m=d.content.gltfPrimitive,p=s(m);c(A)||(A=V.createTypedArray(a,i*ct.getNumberOfComponents(p.type))),A.set(p.typedArray,l),l+=p.typedArray.length}return A},r=()=>{let a=0;for(let s of n){let A=s.content.packedSphericalHarmonicsData;if(s.content.sphericalHarmonicsDegree>0){if(!c(this._shData)){let l;switch(s.content.sphericalHarmonicsDegree){case 1:l=9;break;case 2:l=24;break;case 3:l=45}this._shData=new Uint32Array(i*(l*(2/3)))}this._shData.set(A,a),a+=A.length}}};this._positions=o(V.FLOAT,a=>tt.getAttributeBySemantic(a,Pe.POSITION)),this._scales=o(V.FLOAT,a=>tt.getAttributeBySemantic(a,Pe.SCALE)),this._rotations=o(V.FLOAT,a=>tt.getAttributeBySemantic(a,Pe.ROTATION)),this._colors=o(V.UNSIGNED_BYTE,a=>tt.getAttributeBySemantic(a,Pe.COLOR)),r(),this._sphericalHarmonicsDegree=n[0].content.sphericalHarmonicsDegree,this._numSplats=i,this.selectedTileLength=t._selectedTiles.length}if(this._numSplats===0)return;if(this._needsGaussianSplatTexture){if(!this._gaussianSplatTexturePending&&(Ss.generateSplatTexture(this,e),c(this._shData))){let n=this.sphericalHarmonicsTexture,i=rn.maximumTextureSize,o=t._selectedTiles[0].content.sphericalHarmonicsCoefficientCount/3,r=Math.floor(i/o),a=r*(o*2),s=new Uint32Array(i*Math.ceil(this._numSplats/r)*2),A=0;for(let l=0;A<this._shData.length;l+=i*2)s.set(this._shData.subarray(A,A+a),l),A+=a;this.sphericalHarmonicsTexture=LEe(e.context,{data:s,width:i,height:Math.ceil(this._numSplats/r)}),c(n)&&n.destroy()}return}if(Q.clone(e.camera.viewMatrix,this._prevViewMatrix),Q.multiply(e.camera.viewMatrix,this._rootTransform,Tm),c(this._sorterPromise)||(this._sorterPromise=JS.radixSortIndexes({primitive:{positions:new Float32Array(this._positions),modelView:Float32Array.from(Tm),count:this._numSplats},sortType:"Index"})),!c(this._sorterPromise)){this._sorterState=as.WAITING;return}this._sorterPromise.catch(n=>{this._sorterState=as.ERROR,this._sorterError=n}),this._sorterPromise.then(n=>{this._indexes=n,this._sorterState=as.SORTED})}else if(this._sorterState===as.WAITING){if(c(this._sorterPromise)||(this._sorterPromise=JS.radixSortIndexes({primitive:{positions:new Float32Array(this._positions),modelView:Float32Array.from(Tm),count:this._numSplats},sortType:"Index"})),!c(this._sorterPromise)){this._sorterState=as.WAITING;return}this._sorterPromise.catch(n=>{this._sorterState=as.ERROR,this._sorterError=n}),this._sorterPromise.then(n=>{this._indexes=n,this._sorterState=as.SORTED}),this._sorterState=as.SORTING}else{if(this._sorterState===as.SORTING)return;if(this._sorterState===as.SORTED)Ss.buildGSplatDrawCommand(this,e),this._sorterState=as.IDLE,this._dirty=!1,this._sorterPromise=void 0;else if(this._sorterState===as.ERROR)throw this._sorterError}this._dirty=!1}}};var KS=Ss;function ws(e,t,n,i){this._tileset=t,this._tile=n,this._resource=i,this._loader=e,c(this._tileset.gaussianSplatPrimitive)||(this._tileset.gaussianSplatPrimitive=new KS({tileset:this._tileset})),this._originalPositions=void 0,this._originalRotations=void 0,this._originalScales=void 0,this.gltfPrimitive=void 0,this.worldTransform=void 0,this.featurePropertiesDirty=!1,this._metadata=void 0,this._group=void 0,this._ready=!1,this._transformed=!1,this._sphericalHarmonicsDegree=0,this._sphericalHarmonicsCoefficientCount=0,this._packedSphericalHarmonicsData=void 0}ws.tilesetRequiresGaussianSplattingExt=function(e){let t=!1,n=!1;return e.isGltfExtensionRequired instanceof Function&&(t=e.isGltfExtensionRequired("KHR_gaussian_splatting")&&e.isGltfExtensionRequired("KHR_gaussian_splatting_compression_spz_2"),n=e.isGltfExtensionRequired("KHR_spz_gaussian_splats_compression")),n&&Kr("KHR_spz_gaussian_splats_compression",`Support for the original KHR_spz_gaussian_splats_compression extension has been deprecated in favor of the up to date KHR_gaussian_splatting and KHR_gaussian_splatting_compression_spz_2 extensions and will be removed in CesiumJS 1.135.

Please retile your tileset with the KHR_gaussian_splatting and KHR_gaussian_splatting_compression_spz_2 extensions.`),t||n};Object.defineProperties(ws.prototype,{featuresLength:{get:function(){return 0}},pointsLength:{get:function(){return this.gltfPrimitive.attributes[0].count}},trianglesLength:{get:function(){return 0}},geometryByteLength:{get:function(){return this.gltfPrimitive.attributes.reduce((e,t)=>e+t.byteLength,0)}},texturesByteLength:{get:function(){let e=this._tileset.gaussianSplatPrimitive.gaussianSplatTexture,t=this._tileset.gaussianSplatPrimitive.selectedTileLength;return!c(e)||t===0?0:e.sizeInBytes/t}},batchTableByteLength:{get:function(){return 0}},innerContents:{get:function(){}},ready:{get:function(){return this._ready}},transformed:{get:function(){return this._transformed}},tileset:{get:function(){return this._tileset}},tile:{get:function(){return this._tile}},url:{get:function(){return this._resource.getUrlComponent(!0)}},batchTable:{get:function(){}},metadata:{get:function(){return this._metadata},set:function(e){this._metadata=e}},group:{get:function(){return this._group},set:function(e){this._group=e}},sphericalHarmonicsCoefficientCount:{get:function(){return this._sphericalHarmonicsCoefficientCount}},sphericalHarmonicsDegree:{get:function(){return this._sphericalHarmonicsDegree}},packedSphericalHarmonicsData:{get:function(){return this._packedSphericalHarmonicsData}}});function FEe(e){return`${e.startsWith("KHR_gaussian_splatting:")?"KHR_gaussian_splatting:":"_"}SH_DEGREE_`}function OEe(e){switch(e.filter(n=>n.name.includes("SH_DEGREE_")).length){default:case 0:return{l:0,n:0};case 3:return{l:1,n:9};case 8:return{l:2,n:24};case 15:return{l:3,n:45}}}var CV=new ArrayBuffer(4),kEe=new Float32Array(CV),UEe=new Uint32Array(CV);function XS(e){kEe[0]=e;let t=UEe[0],n=t>>31&1,i=t>>23&255,o=t&8388607,r;if(i===255)r=n<<15|31744|(o?512:0);else if(i===0)r=n<<15;else{let a=i-127+15;a>=31?r=n<<15|31744:a<=0?r=n<<15:r=n<<15|a<<10|o>>>13}return r}function zEe(e){let t=FEe(e),n="_COEF_",i=t.length,o=e.indexOf(n,i),r=parseInt(e.slice(i,o),10),a=parseInt(e.slice(o+n.length),10);return{l:r,n:a}}function GEe(e){let t=e.sphericalHarmonicsDegree,n=e.sphericalHarmonicsCoefficientCount,i=e.pointsLength*(n*(2/3)),o=new Uint32Array(i),r=e.gltfPrimitive.attributes.filter(l=>l.name.includes("SH_DEGREE_")),a=0,s=[0,9,24];switch(t){case 1:a=9;break;case 2:a=24;break;case 3:a=45;break}r.sort((l,d)=>l.name<d.name?-1:l.name>d.name?1:0);let A=a*(2/3);for(let l=0;l<r.length;l++){let{l:d,n:m}=zEe(r[l].name);for(let p=0;p<e.pointsLength;p++){let g=s[d-1]*2/3,h=p*A+g+m*2,C=p*3;o[h]=XS(r[l].typedArray[C])|XS(r[l].typedArray[C+1])<<16,o[h+1]=XS(r[l].typedArray[C+2])}}return o}ws.fromGltf=async function(e,t,n,i){let o=n,r=Ye.createIfNeeded(o),a={releaseGltfJson:!1,upAxis:fi.Y,forwardAxis:fi.Z};c(i.asset)?(a.gltfJson=i,a.baseResource=r,a.gltfResource=r):i instanceof Uint8Array?(a.typedArray=i,a.baseResource=r,a.gltfResource=r):a.gltfResource=Ye.createIfNeeded(i);let s=new of(a);try{await s.load()}catch(A){throw s.destroy(),new ae(`Failed to load glTF: ${A.message}`)}return new ws(s,e,t,n)};ws.prototype.update=function(e,t){let n=this._loader;if(this._ready){!this._transformed&&e.root.content.ready&&(KS.transformTile(this._tile),this._transformed=!0);return}if(t.afterRender.push(()=>!0),!c(n)){this._ready=!0;return}if(this._resourcesLoaded){this.gltfPrimitive=n.components.scene.nodes[0].primitives[0],this.worldTransform=n.components.scene.nodes[0].matrix,this._ready=!0,this._originalPositions=new Float32Array(tt.getAttributeBySemantic(this.gltfPrimitive,Pe.POSITION).typedArray),this._originalRotations=new Float32Array(tt.getAttributeBySemantic(this.gltfPrimitive,Pe.ROTATION).typedArray),this._originalScales=new Float32Array(tt.getAttributeBySemantic(this.gltfPrimitive,Pe.SCALE).typedArray);let{l:i,n:o}=OEe(this.gltfPrimitive.attributes);this._sphericalHarmonicsDegree=i,this._sphericalHarmonicsCoefficientCount=o,this._packedSphericalHarmonicsData=GEe(this);return}this._resourcesLoaded=n.process(t)};ws.prototype.hasProperty=function(e,t){return!1};ws.prototype.getFeature=function(e){};ws.prototype.applyDebugSettings=function(e,t){};ws.prototype.applyStyle=function(e){};ws.prototype.pick=function(e,t,n){};ws.prototype.isDestroyed=function(){return this.isDestroyed};ws.prototype.destroy=function(){return this.splatPrimitive=void 0,c(this._tileset.gaussianSplatPrimitive)&&!this._tileset.gaussianSplatPrimitive.isDestroyed()&&this._tileset.gaussianSplatPrimitive.destroy(),this._tileset.gaussianSplatPrimitive=void 0,this._tile=void 0,this._tileset=void 0,this._resource=void 0,this._ready=!1,this._group=void 0,this._metadata=void 0,this._resourcesLoaded=!1,c(this._loader)&&(this._loader.destroy(),this._loader=void 0),me(this)};var bC=ws;var EV={b3dm:function(e,t,n,i,o){return NA.fromB3dm(e,t,n,i,o)},pnts:function(e,t,n,i,o){return NA.fromPnts(e,t,n,i,o)},i3dm:function(e,t,n,i,o){return NA.fromI3dm(e,t,n,i,o)},cmpt:function(e,t,n,i,o){return zO.fromTileType(e,t,n,i,o,EV)},externalTileset:function(e,t,n,i){return L8.fromJson(e,t,n,i)},geom:function(e,t,n,i,o){return new a1(e,t,n,i,o)},vctr:function(e,t,n,i,o){return new uV(e,t,n,i,o)},subt:function(e,t,n,i,o){return nT.fromSubtreeJson(e,t,n,void 0,i,o)},subtreeJson:function(e,t,n,i){return nT.fromSubtreeJson(e,t,n,i)},glb:function(e,t,n,i,o){if(i.byteLength<12)throw new ae("Invalid glb content");let s=new DataView(i,o).getUint32(8,!0),A=new Uint8Array(i,o,s);return bC.tilesetRequiresGaussianSplattingExt(e)?bC.fromGltf(e,t,n,A):NA.fromGltf(e,t,n,A)},gltf:function(e,t,n,i){return bC.tilesetRequiresGaussianSplattingExt(e)?bC.fromGltf(e,t,n,i):NA.fromGltf(e,t,n,i)},geoJson:function(e,t,n,i){return NA.fromGeoJson(e,t,n,i)}},by=EV;var HEe={UNLOADED:0,LOADING:1,PROCESSING:2,READY:3,EXPIRED:4,FAILED:5},ro=Object.freeze(HEe);var tA={BATCHED_3D_MODEL:"b3dm",INSTANCED_3D_MODEL:"i3dm",COMPOSITE:"cmpt",POINT_CLOUD:"pnts",VECTOR:"vctr",GEOMETRY:"geom",GLTF:"gltf",GLTF_BINARY:"glb",IMPLICIT_SUBTREE:"subt",IMPLICIT_SUBTREE_JSON:"subtreeJson",EXTERNAL_TILESET:"externalTileset",MULTIPLE_CONTENT:"multipleContent",GEOJSON:"geoJson",VOXEL_BINARY:"voxl",VOXEL_JSON:"voxelJson"};tA.isBinaryFormat=function(e){switch(e){case tA.BATCHED_3D_MODEL:case tA.INSTANCED_3D_MODEL:case tA.COMPOSITE:case tA.POINT_CLOUD:case tA.VECTOR:case tA.GEOMETRY:case tA.IMPLICIT_SUBTREE:case tA.VOXEL_BINARY:case tA.GLTF_BINARY:return!0;default:return!1}};var Ur=Object.freeze(tA);var VEe={NOT_COMPUTED:-1,USE_OPTIMIZATION:1,SKIP_OPTIMIZATION:0},Jl=Object.freeze(VEe);var ur={RENDER:0,PICK:1,SHADOW:2,PRELOAD:3,PRELOAD_FLIGHT:4,REQUEST_RENDER_MODE_DEFER_CHECK:5,MOST_DETAILED_PRELOAD:6,MOST_DETAILED_PICK:7,NUMBER_OF_PASSES:8},Kl=new Array(ur.NUMBER_OF_PASSES);Kl[ur.RENDER]=Object.freeze({pass:ur.RENDER,isRender:!0,requestTiles:!0,ignoreCommands:!1});Kl[ur.PICK]=Object.freeze({pass:ur.PICK,isRender:!1,requestTiles:!1,ignoreCommands:!1});Kl[ur.SHADOW]=Object.freeze({pass:ur.SHADOW,isRender:!1,requestTiles:!0,ignoreCommands:!1});Kl[ur.PRELOAD]=Object.freeze({pass:ur.PRELOAD,isRender:!1,requestTiles:!0,ignoreCommands:!0});Kl[ur.PRELOAD_FLIGHT]=Object.freeze({pass:ur.PRELOAD_FLIGHT,isRender:!1,requestTiles:!0,ignoreCommands:!0});Kl[ur.REQUEST_RENDER_MODE_DEFER_CHECK]=Object.freeze({pass:ur.REQUEST_RENDER_MODE_DEFER_CHECK,isRender:!1,requestTiles:!0,ignoreCommands:!0});Kl[ur.MOST_DETAILED_PRELOAD]=Object.freeze({pass:ur.MOST_DETAILED_PRELOAD,isRender:!1,requestTiles:!0,ignoreCommands:!0});Kl[ur.MOST_DETAILED_PICK]=Object.freeze({pass:ur.MOST_DETAILED_PICK,isRender:!1,requestTiles:!1,ignoreCommands:!1});ur.getPassOptions=function(e){return Kl[e]};var Ds=Object.freeze(ur);function kA(e,t){this._tileset=e,this._tile=t,this.featurePropertiesDirty=!1}Object.defineProperties(kA.prototype,{featuresLength:{get:function(){return 0}},pointsLength:{get:function(){return 0}},trianglesLength:{get:function(){return 0}},geometryByteLength:{get:function(){return 0}},texturesByteLength:{get:function(){return 0}},batchTableByteLength:{get:function(){return 0}},innerContents:{get:function(){}},ready:{get:function(){return!0}},tileset:{get:function(){return this._tileset}},tile:{get:function(){return this._tile}},url:{get:function(){}},metadata:{get:function(){},set:function(e){}},batchTable:{get:function(){}},group:{get:function(){},set:function(e){}}});kA.prototype.hasProperty=function(e,t){return!1};kA.prototype.getFeature=function(e){};kA.prototype.applyDebugSettings=function(e,t){};kA.prototype.applyStyle=function(e){};kA.prototype.update=function(e,t){};kA.prototype.pick=function(e,t,n){};kA.prototype.isDestroyed=function(){return!1};kA.prototype.destroy=function(){return me(this)};var ZS=kA;function Xl(e){e=e??G.EMPTY_OBJECT;let t=e.content,n=e.class;this._class=n,this._properties=t.properties,this._extensions=t.extensions,this._extras=t.extras}Object.defineProperties(Xl.prototype,{class:{get:function(){return this._class}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}}});Xl.prototype.hasProperty=function(e){return Kt.hasProperty(e,this._properties,this._class)};Xl.prototype.hasPropertyBySemantic=function(e){return Kt.hasPropertyBySemantic(e,this._properties,this._class)};Xl.prototype.getPropertyIds=function(e){return Kt.getPropertyIds(this._properties,this._class,e)};Xl.prototype.getProperty=function(e){return Kt.getProperty(e,this._properties,this._class)};Xl.prototype.setProperty=function(e,t){return Kt.setProperty(e,t,this._properties,this._class)};Xl.prototype.getPropertyBySemantic=function(e){return Kt.getPropertyBySemantic(e,this._properties,this._class)};Xl.prototype.setPropertyBySemantic=function(e,t){return Kt.setPropertyBySemantic(e,t,this._properties,this._class)};var _V=Xl;function $S(e,t){let n=Gn(t,"3DTILES_metadata")?t.extensions["3DTILES_metadata"]:t.metadata;if(!c(n))return;if(!c(e.schema)){$S._oneTimeWarning("findContentMetadata-missing-root-schema","Could not find a metadata schema for content metadata. For tilesets that contain external tilesets, make sure the schema is added to the root tileset.json.");return}let i=e.schema.classes??G.EMPTY_OBJECT;if(c(n.class)){let o=i[n.class];return new _V({content:n,class:o})}}$S._oneTimeWarning=Nn;var By=$S;function jEe(e,t){let n=e.metadataExtension;if(!c(n))return;let i=n.groups,o=Gn(t,"3DTILES_metadata")?t.extensions["3DTILES_metadata"].group:t.group;if(typeof o=="number")return i[o];let r=n.groupIds.findIndex(function(a){return a===o});return r>=0?i[r]:void 0}var xy=jEe;function Zl(e){e=e??G.EMPTY_OBJECT;let t=e.tile,n=e.class;this._class=n,this._properties=t.properties,this._extensions=t.extensions,this._extras=t.extras}Object.defineProperties(Zl.prototype,{class:{get:function(){return this._class}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}}});Zl.prototype.hasProperty=function(e){return Kt.hasProperty(e,this._properties,this._class)};Zl.prototype.hasPropertyBySemantic=function(e){return Kt.hasPropertyBySemantic(e,this._properties,this._class)};Zl.prototype.getPropertyIds=function(e){return Kt.getPropertyIds(this._properties,this._class,e)};Zl.prototype.getProperty=function(e){return Kt.getProperty(e,this._properties,this._class)};Zl.prototype.setProperty=function(e,t){return Kt.setProperty(e,t,this._properties,this._class)};Zl.prototype.getPropertyBySemantic=function(e){return Kt.getPropertyBySemantic(e,this._properties,this._class)};Zl.prototype.setPropertyBySemantic=function(e,t){return Kt.setPropertyBySemantic(e,t,this._properties,this._class)};var IV=Zl;function ew(e,t){let n=Gn(t,"3DTILES_metadata")?t.extensions["3DTILES_metadata"]:t.metadata;if(!c(n))return;if(!c(e.schema)){ew._oneTimeWarning("findTileMetadata-missing-root-schema","Could not find a metadata schema for tile metadata. For tilesets that contain external tilesets, make sure the schema is added to the root tileset.json.");return}let i=e.schema.classes??G.EMPTY_OBJECT;if(c(n.class)){let o=i[n.class];return new IV({tile:n,class:o})}}ew._oneTimeWarning=Nn;var yV=ew;function YEe(e){let t=new Uint8Array(e),n=Nu(t);if(n==="glTF"&&(n="glb"),Ur.isBinaryFormat(n))return{contentType:n,binaryPayload:t};let i=WEe(t);if(c(i.root))return{contentType:Ur.EXTERNAL_TILESET,jsonPayload:i};if(c(i.asset))return{contentType:Ur.GLTF,jsonPayload:i};if(c(i.tileAvailability))return{contentType:Ur.IMPLICIT_SUBTREE_JSON,jsonPayload:i};if(c(i.type))return{contentType:Ur.GEOJSON,jsonPayload:i};if(c(i.voxelTable))return{contentType:Ur.VOXEL_JSON,jsonPayload:i};throw new ae("Invalid tile content.")}function WEe(e){let t;try{t=Fo(e)}catch{throw new ae("Invalid tile content.")}return t}var Ty=YEe;function hc(e,t,n,i){this._tileset=e,this._tile=t,this._tilesetResource=n,this._contents=[],this._contentsCreated=!1;let o=c(i.contents)?i.contents:i.content;this._innerContentHeaders=o,this._requestsInFlight=0,this._cancelCount=0,this._externalTilesetCount=0;let r=this._innerContentHeaders.length;this._arrayFetchPromises=new Array(r),this._requests=new Array(r),this._ready=!1,this._innerContentResources=new Array(r),this._serverKeys=new Array(r);for(let a=0;a<r;a++){let s=n.getDerivedResource({url:o[a].uri}),A=uA.getServerKey(s.getUrlComponent());this._innerContentResources[a]=s,this._serverKeys[a]=A}}Object.defineProperties(hc.prototype,{featurePropertiesDirty:{get:function(){let e=this._contents,t=e.length;for(let n=0;n<t;++n)if(e[n].featurePropertiesDirty)return!0;return!1},set:function(e){let t=this._contents,n=t.length;for(let i=0;i<n;++i)t[i].featurePropertiesDirty=e}},featuresLength:{get:function(){return 0}},pointsLength:{get:function(){return 0}},trianglesLength:{get:function(){return 0}},geometryByteLength:{get:function(){return 0}},texturesByteLength:{get:function(){return 0}},batchTableByteLength:{get:function(){return 0}},innerContents:{get:function(){return this._contents}},ready:{get:function(){return this._contentsCreated?this._ready:!1}},tileset:{get:function(){return this._tileset}},tile:{get:function(){return this._tile}},url:{get:function(){}},metadata:{get:function(){},set:function(){}},batchTable:{get:function(){}},group:{get:function(){},set:function(){}},innerContentUrls:{get:function(){return this._innerContentHeaders.map(function(e){return e.uri})}}});function tw(e,t){e._requestsInFlight+=t,e.tileset.statistics.numberOfPendingRequests+=t}function bV(e,t){e._cancelCount++,e._tile._contentState=t;let n=e.tileset.statistics;n.numberOfPendingRequests-=e._requestsInFlight,n.numberOfAttemptedRequests+=e._requestsInFlight,e._requestsInFlight=0;let i=e._innerContentHeaders.length;e._arrayFetchPromises=new Array(i)}hc.prototype.requestInnerContents=function(){if(!qEe(this._serverKeys)){this.tileset.statistics.numberOfAttemptedRequests+=this._serverKeys.length;return}let e=this._innerContentHeaders;tw(this,e.length);let t=this._cancelCount;for(let n=0;n<e.length;n++)this._arrayFetchPromises[n]=JEe(this,n,t,this._tile._contentState);return KEe(this)};function qEe(e){let t={};for(let n=0;n<e.length;n++){let i=e[n];c(t[i])?t[i]++:t[i]=1}for(let n in t)if(t.hasOwnProperty(n)&&!uA.serverHasOpenSlots(n,t[n]))return!1;return uA.heapHasOpenSlots(e.length)}function JEe(e,t,n,i){let o=e._innerContentResources[t].clone(),r=e.tile,a=function(){return r._priority},s=e._serverKeys[t],A=new Gs({throttle:!0,throttleByServer:!0,type:zs.TILES3D,priorityFunction:a,serverKey:s});o.request=A,e._requests[t]=A;let l=o.fetchArrayBuffer();if(c(l))return l.then(function(d){if(!(n<e._cancelCount)){if(o.request.cancelled||o.request.state===vn.CANCELLED){bV(e,i);return}return tw(e,-1),d}}).catch(function(d){if(!(n<e._cancelCount)){if(o.request.cancelled||o.request.state===vn.CANCELLED){bV(e,i);return}tw(e,-1),BV(e,t,d)}})}async function KEe(e){let t=e._cancelCount,n=await Promise.all(e._arrayFetchPromises);if(t<e._cancelCount)return;let i=n.map((r,a)=>XEe(e,r,a)),o=await Promise.all(i);if(e._contentsCreated=!0,e._contents=o.filter(c),e._externalTilesetCount===e._contents.length){let r=e._tile;r.hasRenderableContent=!1}return o}async function XEe(e,t,n){if(c(t))try{let i=Ty(t),o=e._tileset,r=e._innerContentResources[n],a=e._tile;i.contentType===Ur.EXTERNAL_TILESET&&(e._externalTilesetCount++,a.hasTilesetContent=!0),e._disableSkipLevelOfDetail=e._disableSkipLevelOfDetail||i.contentType===Ur.GEOMETRY||i.contentType===Ur.VECTOR;let s,A=by[i.contentType];c(i.binaryPayload)?s=await Promise.resolve(A(o,a,r,i.binaryPayload.buffer,0)):s=await Promise.resolve(A(o,a,r,i.jsonPayload));let l=e._innerContentHeaders[n];if(a.hasImplicitContentMetadata){let m=a.implicitSubtree,p=a.implicitCoordinates;s.metadata=m.getContentMetadataView(p,n)}else a.hasImplicitContent||(s.metadata=By(o,l));let d=xy(o,l);return c(d)&&(s.group=new z_({metadata:d})),s}catch(i){BV(e,n,i)}}function BV(e,t,n){let i=e._tileset,o=e._innerContentResources[t].url,r=c(n.message)?n.message:n.toString();i.tileFailed.numberOfListeners>0?i.tileFailed.raiseEvent({url:o,message:r}):(console.log(`A content failed to load: ${o}`),console.log(`Error: ${r}`))}hc.prototype.cancelRequests=function(){for(let e=0;e<this._requests.length;e++){let t=this._requests[e];c(t)&&t.cancel()}};hc.prototype.hasProperty=function(e,t){return!1};hc.prototype.getFeature=function(e){};hc.prototype.applyDebugSettings=function(e,t){let n=this._contents,i=n.length;for(let o=0;o<i;++o)n[o].applyDebugSettings(e,t)};hc.prototype.applyStyle=function(e){let t=this._contents,n=t.length;for(let i=0;i<n;++i)t[i].applyStyle(e)};hc.prototype.update=function(e,t){let n=this._contents,i=n.length,o=!0;for(let r=0;r<i;++r)n[r].update(e,t),o=o&&n[r].ready;!this._ready&&o&&(this._ready=!0)};hc.prototype.pick=function(e,t,n){if(!this._ready)return;let i,o=Number.POSITIVE_INFINITY,r=this._contents,a=r.length;for(let s=0;s<a;++s){let A=r[s].pick(e,t,n);if(!c(A))continue;let l=f.distance(e.origin,A);l<o&&(i=A,o=l)}if(c(i))return n};hc.prototype.isDestroyed=function(){return!1};hc.prototype.destroy=function(){let e=this._contents,t=e.length;for(let n=0;n<t;++n)e[n].destroy();return me(this)};var xV=hc;var TV=Math.cos,SV=Math.sin,ZEe=Math.sqrt,nw={};nw.computePosition=function(e,t,n,i,o,r,a){let s=t.radiiSquared,A=e.nwCorner,l=e.boundingRectangle,d=A.latitude-e.granYCos*i+o*e.granXSin,m=TV(d),p=SV(d),g=s.z*p,h=A.longitude+i*e.granYSin+o*e.granXCos,C=m*TV(h),_=m*SV(h),I=s.x*C,b=s.y*_,x=ZEe(I*C+b*_+g*p);if(r.x=I/x,r.y=b/x,r.z=g/x,n){let T=e.stNwCorner;c(T)?(d=T.latitude-e.stGranYCos*i+o*e.stGranXSin,h=T.longitude+i*e.stGranYSin+o*e.stGranXCos,a.x=(h-e.stWest)*e.lonScalar,a.y=(d-e.stSouth)*e.latScalar):(a.x=(h-l.west)*e.lonScalar,a.y=(d-l.south)*e.latScalar)}};var $Ee=new vi,mc=new f,e_e=new ue,Sy=new f,BC=new Ai;function wV(e,t,n,i,o,r,a){let s=Math.cos(t),A=i*s,l=n*s,d=Math.sin(t),m=i*d,p=n*d;BC._ellipsoid=pe.default,mc=BC.project(e,mc),mc=f.subtract(mc,Sy,mc);let g=vi.fromRotation(t,$Ee);mc=vi.multiplyByVector(g,mc,mc),mc=f.add(mc,Sy,mc),e=BC.unproject(mc,e),r-=1,a-=1;let h=e.latitude,C=h+r*p,_=h-A*a,I=h-A*a+r*p,b=Math.max(h,C,_,I),x=Math.min(h,C,_,I),T=e.longitude,w=T+r*l,R=T+a*m,z=T+a*m+r*l,M=Math.max(T,w,R,z),N=Math.min(T,w,R,z);return{north:b,south:x,east:M,west:N,granYCos:A,granYSin:m,granXCos:l,granXSin:p,nwCorner:e}}nw.computeOptions=function(e,t,n,i,o,r,a){let s=e.east,A=e.west,l=e.north,d=e.south,m=!1,p=!1;l===S.PI_OVER_TWO&&(m=!0),d===-S.PI_OVER_TWO&&(p=!0);let g,h=l-d;A>s?g=S.TWO_PI-A+s:g=s-A;let C=Math.ceil(g/t)+1,_=Math.ceil(h/t)+1,I=g/(C-1),b=h/(_-1),x=de.northwest(e,r),T=de.center(e,e_e);(n!==0||i!==0)&&(T.longitude<x.longitude&&(T.longitude+=S.TWO_PI),BC._ellipsoid=pe.default,Sy=BC.project(T,Sy));let w=b,R=I,z=0,M=0,N=de.clone(e,o),O={granYCos:w,granYSin:z,granXCos:R,granXSin:M,nwCorner:x,boundingRectangle:N,width:C,height:_,northCap:m,southCap:p};if(n!==0){let u=wV(x,n,I,b,T,C,_);l=u.north,d=u.south,s=u.east,A=u.west,O.granYCos=u.granYCos,O.granYSin=u.granYSin,O.granXCos=u.granXCos,O.granXSin=u.granXSin,N.north=l,N.south=d,N.east=s,N.west=A}if(i!==0){n=n-i;let u=de.northwest(N,a),E=wV(u,n,I,b,T,C,_);O.stGranYCos=E.granYCos,O.stGranXCos=E.granXCos,O.stGranYSin=E.granYSin,O.stGranXSin=E.granXSin,O.stNwCorner=u,O.stWest=E.west,O.stSouth=E.south}return O};var Md=nw;var t_e=new le,n_e=new le,i_e=new f,o_e=new de;function DV(e,t){let n=e._ellipsoid,i=t.height,o=t.width,r=t.northCap,a=t.southCap,s=i,A=2,l=0,d=4;r&&(A-=1,s-=1,l+=1,d-=2),a&&(A-=1,s-=1,l+=1,d-=2),l+=A*o+2*s-d;let m=new Float64Array(l*3),p=0,g=0,h,C=i_e;if(r)Md.computePosition(t,n,!1,g,0,C),m[p++]=C.x,m[p++]=C.y,m[p++]=C.z;else for(h=0;h<o;h++)Md.computePosition(t,n,!1,g,h,C),m[p++]=C.x,m[p++]=C.y,m[p++]=C.z;for(h=o-1,g=1;g<i;g++)Md.computePosition(t,n,!1,g,h,C),m[p++]=C.x,m[p++]=C.y,m[p++]=C.z;if(g=i-1,!a)for(h=o-2;h>=0;h--)Md.computePosition(t,n,!1,g,h,C),m[p++]=C.x,m[p++]=C.y,m[p++]=C.z;for(h=0,g=i-2;g>0;g--)Md.computePosition(t,n,!1,g,h,C),m[p++]=C.x,m[p++]=C.y,m[p++]=C.z;let _=m.length/3*2,I=Ge.createTypedArray(m.length/3,_),b=0;for(let T=0;T<m.length/3-1;T++)I[b++]=T,I[b++]=T+1;I[b++]=m.length/3-1,I[b++]=0;let x=new Dt({attributes:new eo,primitiveType:Me.LINES});return x.attributes.position=new rt({componentDatatype:V.DOUBLE,componentsPerAttribute:3,values:m}),x.indices=I,x}function r_e(e,t){let n=e._surfaceHeight,i=e._extrudedHeight,o=e._ellipsoid,r=DV(e,t),a=t.height,s=t.width,A=yr.scaleToGeodeticHeight(r.attributes.position.values,n,o,!1),l=A.length,d=new Float64Array(l*2);d.set(A);let m=yr.scaleToGeodeticHeight(r.attributes.position.values,i,o);d.set(m,l),r.attributes.position.values=d;let p=t.northCap,g=t.southCap,h=4;p&&(h-=1),g&&(h-=1);let C=(d.length/3+h)*2,_=Ge.createTypedArray(d.length/3,C);l=d.length/6;let I=0;for(let x=0;x<l-1;x++)_[I++]=x,_[I++]=x+1,_[I++]=x+l,_[I++]=x+l+1;_[I++]=l-1,_[I++]=0,_[I++]=l+l-1,_[I++]=l,_[I++]=0,_[I++]=l;let b;if(p)b=a-1;else{let x=s-1;_[I++]=x,_[I++]=x+l,b=s+a-2}if(_[I++]=b,_[I++]=b+l,!g){let x=s+b-1;_[I++]=x,_[I]=x+l}return r.indices=_,r}function wm(e){e=e??G.EMPTY_OBJECT;let t=e.rectangle,n=e.granularity??S.RADIANS_PER_DEGREE,i=e.ellipsoid??pe.default,o=e.rotation??0,r=e.height??0,a=e.extrudedHeight??r;this._rectangle=de.clone(t),this._granularity=n,this._ellipsoid=i,this._surfaceHeight=Math.max(r,a),this._rotation=o,this._extrudedHeight=Math.min(r,a),this._offsetAttribute=e.offsetAttribute,this._workerName="createRectangleOutlineGeometry"}wm.packedLength=de.packedLength+pe.packedLength+5;wm.pack=function(e,t,n){return n=n??0,de.pack(e._rectangle,t,n),n+=de.packedLength,pe.pack(e._ellipsoid,t,n),n+=pe.packedLength,t[n++]=e._granularity,t[n++]=e._surfaceHeight,t[n++]=e._rotation,t[n++]=e._extrudedHeight,t[n]=e._offsetAttribute??-1,t};var QV=new de,RV=pe.clone(pe.UNIT_SPHERE),Sm={rectangle:QV,ellipsoid:RV,granularity:void 0,height:void 0,rotation:void 0,extrudedHeight:void 0,offsetAttribute:void 0};wm.unpack=function(e,t,n){t=t??0;let i=de.unpack(e,t,QV);t+=de.packedLength;let o=pe.unpack(e,t,RV);t+=pe.packedLength;let r=e[t++],a=e[t++],s=e[t++],A=e[t++],l=e[t];return c(n)?(n._rectangle=de.clone(i,n._rectangle),n._ellipsoid=pe.clone(o,n._ellipsoid),n._surfaceHeight=a,n._rotation=s,n._extrudedHeight=A,n._offsetAttribute=l===-1?void 0:l,n):(Sm.granularity=r,Sm.height=a,Sm.rotation=s,Sm.extrudedHeight=A,Sm.offsetAttribute=l===-1?void 0:l,new wm(Sm))};var a_e=new ue;wm.createGeometry=function(e){let t=e._rectangle,n=e._ellipsoid,i=Md.computeOptions(t,e._granularity,e._rotation,0,o_e,a_e),o,r;if(S.equalsEpsilon(t.north,t.south,S.EPSILON10)||S.equalsEpsilon(t.east,t.west,S.EPSILON10))return;let a=e._surfaceHeight,s=e._extrudedHeight,A=!S.equalsEpsilon(a,s,0,S.EPSILON2),l;if(A){if(o=r_e(e,i),c(e._offsetAttribute)){let p=o.attributes.position.values.length/3,g=new Uint8Array(p);e._offsetAttribute===Pr.TOP?g=g.fill(1,0,p/2):(l=e._offsetAttribute===Pr.NONE?0:1,g=g.fill(l)),o.attributes.applyOffset=new rt({componentDatatype:V.UNSIGNED_BYTE,componentsPerAttribute:1,values:g})}let d=le.fromRectangle3D(t,n,a,n_e),m=le.fromRectangle3D(t,n,s,t_e);r=le.union(d,m)}else{if(o=DV(e,i),o.attributes.position.values=yr.scaleToGeodeticHeight(o.attributes.position.values,a,n,!1),c(e._offsetAttribute)){let d=o.attributes.position.values.length;l=e._offsetAttribute===Pr.NONE?0:1;let m=new Uint8Array(d/3).fill(l);o.attributes.applyOffset=new rt({componentDatatype:V.UNSIGNED_BYTE,componentsPerAttribute:1,values:m})}r=le.fromRectangle3D(t,n,a)}return new Dt({attributes:o.attributes,indices:o.indices,primitiveType:Me.LINES,boundingSphere:r,offsetAttribute:e._offsetAttribute})};var vV=wm;function Qm(e){this.rectangle=de.clone(e.rectangle),this.minimumHeight=e.minimumHeight??0,this.maximumHeight=e.maximumHeight??0,this.southwestCornerCartesian=new f,this.northeastCornerCartesian=new f,this.westNormal=new f,this.southNormal=new f,this.eastNormal=new f,this.northNormal=new f;let t=e.ellipsoid??pe.WGS84;u_e(this,e.rectangle,t),this._orientedBoundingBox=void 0,this._boundingSphere=void 0,(e.computeBoundingVolumes??!0)&&this.computeBoundingVolumes(t)}Object.defineProperties(Qm.prototype,{boundingVolume:{get:function(){return this._orientedBoundingBox}},boundingSphere:{get:function(){return this._boundingSphere}}});Qm.prototype.computeBoundingVolumes=function(e){this._orientedBoundingBox=ui.fromRectangle(this.rectangle,this.minimumHeight,this.maximumHeight,e),this._boundingSphere=le.fromOrientedBoundingBox(this._orientedBoundingBox)};var MV=new f,wy=new f,PV=new f,s_e=new f,c_e=new f,A_e=new f,l_e=new f,pc=new ue,NV=new Ze(f.UNIT_X,0),Dm=new ai;function u_e(e,t,n){n.cartographicToCartesian(de.southwest(t),e.southwestCornerCartesian),n.cartographicToCartesian(de.northeast(t),e.northeastCornerCartesian),pc.longitude=t.west,pc.latitude=(t.south+t.north)*.5,pc.height=0;let i=n.cartographicToCartesian(pc,A_e),o=f.cross(i,f.UNIT_Z,s_e);f.normalize(o,e.westNormal),pc.longitude=t.east;let r=n.cartographicToCartesian(pc,l_e),a=f.cross(f.UNIT_Z,r,MV);f.normalize(a,e.eastNormal);let s=f.subtract(i,r,MV);f.magnitude(s)===0&&(s=f.clone(o,s));let A=f.normalize(s,c_e),l=t.south,d;if(l>0){pc.longitude=(t.west+t.east)*.5,pc.latitude=l;let C=n.cartographicToCartesian(pc,Dm.origin);f.clone(A,Dm.direction);let _=Ze.fromPointNormal(e.southwestCornerCartesian,e.westNormal,NV);en.rayPlane(Dm,_,e.southwestCornerCartesian),d=n.geodeticSurfaceNormal(C,wy)}else d=n.geodeticSurfaceNormalCartographic(de.southeast(t),wy);let m=f.cross(d,s,PV);f.normalize(m,e.southNormal);let p=t.north,g;if(p<0){pc.longitude=(t.west+t.east)*.5,pc.latitude=p;let C=n.cartographicToCartesian(pc,Dm.origin);f.negate(A,Dm.direction);let _=Ze.fromPointNormal(e.northeastCornerCartesian,e.eastNormal,NV);en.rayPlane(Dm,_,e.northeastCornerCartesian),g=n.geodeticSurfaceNormal(C,wy)}else g=n.geodeticSurfaceNormalCartographic(de.northwest(t),wy);let h=f.cross(s,g,PV);f.normalize(h,e.northNormal)}var f_e=new f,d_e=new f,h_e=new f(0,-1,0),m_e=new f(0,0,-1),LV=new f;function p_e(e,t){let n=t.camera,i=n.positionWC,o=n.positionCartographic,r=0;if(!de.contains(e.rectangle,o)){let l=e.southwestCornerCartesian,d=e.northeastCornerCartesian,m=e.westNormal,p=e.southNormal,g=e.eastNormal,h=e.northNormal;t.mode!==Ee.SCENE3D&&(l=t.mapProjection.project(de.southwest(e.rectangle),f_e),l.z=l.y,l.y=l.x,l.x=0,d=t.mapProjection.project(de.northeast(e.rectangle),d_e),d.z=d.y,d.y=d.x,d.x=0,m=h_e,g=f.UNIT_Y,p=m_e,h=f.UNIT_Z);let C=f.subtract(i,l,LV),_=f.dot(C,m),I=f.dot(C,p),b=f.subtract(i,d,LV),x=f.dot(b,g),T=f.dot(b,h);_>0?r+=_*_:x>0&&(r+=x*x),I>0?r+=I*I:T>0&&(r+=T*T)}let a,s,A;if(t.mode===Ee.SCENE3D?(a=o.height,s=e.minimumHeight,A=e.maximumHeight):(a=i.x,s=0,A=0),a>A){let l=a-A;r+=l*l}else if(a<s){let l=s-a;r+=l*l}return Math.sqrt(r)}Qm.prototype.distanceToCamera=function(e){let t=p_e(this,e);if(e.mode===Ee.SCENE3D&&c(this._orientedBoundingBox)){let n=Math.sqrt(this._orientedBoundingBox.distanceSquaredTo(e.camera.positionWC));return Math.max(t,n)}return t};Qm.prototype.intersectPlane=function(e){return this._orientedBoundingBox.intersectPlane(e)};Qm.prototype.createDebugVolume=function(e){let t=new Q.clone(Q.IDENTITY),n=new vV({rectangle:this.rectangle,height:this.minimumHeight,extrudedHeight:this.maximumHeight}),i=new tn({geometry:n,id:"outline",modelMatrix:t,attributes:{color:In.fromColor(e)}});return new cn({geometryInstances:i,appearance:new Tn({translucent:!1,flat:!0}),asynchronous:!1})};var UA=Qm;var xC={},g_e=new f,FV=new f,OV=new f,kV=new f,UV=new ui;xC.validOutline=function(e){let n=ui.fromPoints(e,UV).halfAxes,i=ne.getColumn(n,0,FV),o=ne.getColumn(n,1,OV),r=ne.getColumn(n,2,kV),a=f.magnitude(i),s=f.magnitude(o),A=f.magnitude(r);return!(a===0&&(s===0||A===0)||s===0&&A===0)};xC.computeProjectTo2DArguments=function(e,t,n,i){let o=ui.fromPoints(e,UV),r=o.halfAxes,a=ne.getColumn(r,0,FV),s=ne.getColumn(r,1,OV),A=ne.getColumn(r,2,kV),l=f.magnitude(a),d=f.magnitude(s),m=f.magnitude(A),p=Math.min(l,d,m);if(l===0&&(d===0||m===0)||d===0&&m===0)return!1;let g,h;return(p===d||p===m)&&(g=a),p===l?g=s:p===m&&(h=s),(p===l||p===d)&&(h=A),f.normalize(g,n),f.normalize(h,i),f.clone(o.center,t),!0};function zV(e,t,n,i,o){let r=f.subtract(e,t,g_e),a=f.dot(n,r),s=f.dot(i,r);return L.fromElements(a,s,o)}xC.createProjectPointsTo2DFunction=function(e,t,n){return function(i){let o=new Array(i.length);for(let r=0;r<i.length;r++)o[r]=zV(i[r],e,t,n);return o}};xC.createProjectPointTo2DFunction=function(e,t,n){return function(i,o){return zV(i,e,t,n,o)}};var Rm=xC;function C_e(e){let t=e.length,n=new Float64Array(t*3),i=Ge.createTypedArray(t,t*2),o=0,r=0;for(let s=0;s<t;s++){let A=e[s];n[o++]=A.x,n[o++]=A.y,n[o++]=A.z,i[r++]=s,i[r++]=(s+1)%t}let a=new eo({position:new rt({componentDatatype:V.DOUBLE,componentsPerAttribute:3,values:n})});return new Dt({attributes:a,indices:i,primitiveType:Me.LINES})}function Pd(e){e=e??G.EMPTY_OBJECT;let t=e.polygonHierarchy;this._polygonHierarchy=t,this._workerName="createCoplanarPolygonOutlineGeometry",this.packedLength=Yn.computeHierarchyPackedLength(t,f)+1}Pd.fromPositions=function(e){e=e??G.EMPTY_OBJECT;let t={polygonHierarchy:{positions:e.positions}};return new Pd(t)};Pd.pack=function(e,t,n){return n=n??0,n=Yn.packPolygonHierarchy(e._polygonHierarchy,t,n,f),t[n]=e.packedLength,t};var E_e={polygonHierarchy:{}};Pd.unpack=function(e,t,n){t=t??0;let i=Yn.unpackPolygonHierarchy(e,t,f);t=i.startingIndex,delete i.startingIndex;let o=e[t];return c(n)||(n=new Pd(E_e)),n._polygonHierarchy=i,n.packedLength=o,n};Pd.createGeometry=function(e){let t=e._polygonHierarchy,n=t.positions;if(n=Jr(n,f.equalsEpsilon,!0),n.length<3||!Rm.validOutline(n))return;let o=Yn.polygonOutlinesFromHierarchy(t,!1);if(o.length===0)return;let r=[];for(let A=0;A<o.length;A++){let l=new tn({geometry:C_e(o[A])});r.push(l)}let a=li.combineInstances(r)[0],s=le.fromPoints(t.positions);return new Dt({attributes:a.attributes,indices:a.indices,primitiveType:a.primitiveType,boundingSphere:s})};var Nd=Pd;var Dy=new ue;function TC(e){let t=Lh.fromToken(e.token),n=e.minimumHeight??0,i=e.maximumHeight??0,o=e.ellipsoid??pe.WGS84;this.s2Cell=t,this.minimumHeight=n,this.maximumHeight=i,this.ellipsoid=o;let r=w_e(t,n,i,o);this._boundingPlanes=r;let a=v_e(r);this._vertices=a,this._edgeNormals=new Array(6),this._edgeNormals[0]=lw(r[0],a.slice(0,4));let s;for(s=0;s<4;s++)this._edgeNormals[0][s]=f.negate(this._edgeNormals[0][s],this._edgeNormals[0][s]);for(this._edgeNormals[1]=lw(r[1],a.slice(4,8)),s=0;s<4;s++)this._edgeNormals[2+s]=lw(r[2+s],[a[s%4],a[(s+1)%4],a[4+(s+1)%4],a[4+s]]);for(this._planeVertices=[this._vertices.slice(0,4),this._vertices.slice(4,8)],s=0;s<4;s++)this._planeVertices.push([this._vertices[s%4],this._vertices[(s+1)%4],this._vertices[4+(s+1)%4],this._vertices[4+s]]);let A=t.getCenter();Dy=o.cartesianToCartographic(A,Dy),Dy.height=(i+n)/2,this.center=o.cartographicToCartesian(Dy,A),this._boundingSphere=le.fromPoints(a)}var __e=new f,I_e=new ue,y_e=new f,b_e=new ue,B_e=new f,x_e=new f,T_e=new f,S_e=new f;function w_e(e,t,n,i){let o=new Array(6),r=e.getCenter(),a=i.geodeticSurfaceNormal(r,__e),s=i.cartesianToCartographic(r,I_e);s.height=n;let A=i.cartographicToCartesian(s,y_e),l=Ze.fromPointNormal(A,a);o[0]=l;let d=0,m,p=[],g,h;for(m=0;m<4;m++){g=e.getVertex(m),p[m]=g,h=i.cartesianToCartographic(g,b_e),h.height=t;let _=Ze.getPointDistance(l,i.cartographicToCartesian(h,B_e));_<d&&(d=_)}let C=Ze.clone(l);for(C.normal=f.negate(C.normal,C.normal),C.distance=C.distance*-1+d,o[1]=C,m=0;m<4;m++){g=p[m];let _=p[(m+1)%4],I=i.geodeticSurfaceNormal(g,x_e),b=f.subtract(_,g,S_e),x=f.cross(b,I,T_e);x=f.normalize(x,x),o[2+m]=Ze.fromPointNormal(g,x)}return o}var Ld=new f,Fd=new f,Od=new f,iw=new f,ow=new f,rw=new f,D_e=new f,Q_e=new f,R_e=new f,aw=new f,sw=new f,cw=new f,If=new f,zA=new ne;function GV(e,t,n){Ld=e.normal,Fd=t.normal,Od=n.normal,iw=f.multiplyByScalar(e.normal,-e.distance,iw),ow=f.multiplyByScalar(t.normal,-t.distance,ow),rw=f.multiplyByScalar(n.normal,-n.distance,rw),aw=f.multiplyByScalar(f.cross(Fd,Od,D_e),f.dot(iw,Ld),aw),sw=f.multiplyByScalar(f.cross(Od,Ld,Q_e),f.dot(ow,Fd),sw),cw=f.multiplyByScalar(f.cross(Ld,Fd,R_e),f.dot(rw,Od),cw),zA[0]=Ld.x,zA[1]=Fd.x,zA[2]=Od.x,zA[3]=Ld.y,zA[4]=Fd.y,zA[5]=Od.y,zA[6]=Ld.z,zA[7]=Fd.z,zA[8]=Od.z;let i=ne.determinant(zA);return If=f.add(aw,sw,If),If=f.add(If,cw,If),new f(If.x/i,If.y/i,If.z/i)}function v_e(e){let t=new Array(8);for(let n=0;n<4;n++)t[n]=GV(e[0],e[2+(n+3)%4],e[2+n%4]),t[n+4]=GV(e[1],e[2+(n+3)%4],e[2+n%4]);return t}var Aw=new f,vm=new f;function lw(e,t){let n=[];for(let i=0;i<4;i++)Aw=f.subtract(t[(i+1)%4],t[i],Aw),vm=f.cross(e.normal,Aw,vm),vm=f.normalize(vm,vm),n[i]=f.clone(vm);return n}Object.defineProperties(TC.prototype,{boundingVolume:{get:function(){return this}},boundingSphere:{get:function(){return this._boundingSphere}}});var uw=new f;TC.prototype.distanceToCamera=function(e){let t=e.camera.positionWC,n=[],i=[],o;Ze.getPointDistance(this._boundingPlanes[0],t)>0?(n.push(0),i.push(this._planeVertices[0]),o=this._edgeNormals[0]):Ze.getPointDistance(this._boundingPlanes[1],t)>0&&(n.push(1),i.push(this._planeVertices[1]),o=this._edgeNormals[1]);let r,a;for(r=0;r<4;r++)a=2+r,Ze.getPointDistance(this._boundingPlanes[a],t)>0&&(n.push(a),i.push(this._planeVertices[a]),o=this._edgeNormals[a]);if(n.length===0)return 0;let s,A;if(n.length===1)return A=this._boundingPlanes[n[0]],s=fw(Ze.projectPointOntoPlane(A,t,uw),i[0],A,o),f.distance(s,t);if(n.length===2){if(n[0]===0){let p=[this._vertices[4*n[0]+(n[1]-2)],this._vertices[4*n[0]+(n[1]-2+1)%4]];return s=HV(t,p[0],p[1]),f.distance(s,t)}let d=Number.MAX_VALUE,m;for(r=0;r<2;r++)A=this._boundingPlanes[n[r]],s=fw(Ze.projectPointOntoPlane(A,t,uw),i[r],A,this._edgeNormals[n[r]]),m=f.distanceSquared(s,t),m<d&&(d=m);return Math.sqrt(d)}else if(n.length>3)return s=fw(Ze.projectPointOntoPlane(this._boundingPlanes[1],t,uw),this._planeVertices[1],this._boundingPlanes[1],this._edgeNormals[1]),f.distance(s,t);let l=n[1]===2&&n[2]===5?0:1;return n[0]===0?f.distance(t,this._vertices[(n[1]-2+l)%4]):f.distance(t,this._vertices[4+(n[1]-2+l)%4])};var M_e=new f,P_e=new f;function HV(e,t,n){let i=f.subtract(n,t,M_e),o=f.subtract(e,t,P_e),r=f.dot(i,o);if(r<=0)return t;let a=f.dot(i,i);return r>=a?n:(r=r/a,new f((1-r)*t.x+r*n.x,(1-r)*t.y+r*n.y,(1-r)*t.z+r*n.z))}var N_e=new Ze(f.UNIT_X,0);function fw(e,t,n,i){let o=Number.MAX_VALUE,r,a,s;for(let A=0;A<t.length;A++){let l=Ze.fromPointNormal(t[A],i[A],N_e);Ze.getPointDistance(l,e)<0||(s=HV(e,t[A],t[(A+1)%4]),r=f.distance(e,s),r<o&&(o=r,a=s))}return c(a)?a:e}TC.prototype.intersectPlane=function(e){let t=0,n=0;for(let i=0;i<this._vertices.length;i++)f.dot(e.normal,this._vertices[i])+e.distance<0?n++:t++;return t===this._vertices.length?bt.INSIDE:n===this._vertices.length?bt.OUTSIDE:bt.INTERSECTING};TC.prototype.createDebugVolume=function(e){let t=new Q.clone(Q.IDENTITY),n=new Nd({polygonHierarchy:{positions:this._planeVertices[0]}}),i=Nd.createGeometry(n),o=new tn({geometry:i,id:"outline",modelMatrix:t,attributes:{color:In.fromColor(e)}}),r=new Nd({polygonHierarchy:{positions:this._planeVertices[1]}}),a=Nd.createGeometry(r),s=new tn({geometry:a,id:"outline",modelMatrix:t,attributes:{color:In.fromColor(e)}}),A=[];for(let l=0;l<4;l++){let d=new Nd({polygonHierarchy:{positions:this._planeVertices[2+l]}}),m=Nd.createGeometry(d);A[l]=new tn({geometry:m,id:"outline",modelMatrix:t,attributes:{color:In.fromColor(e)}})}return new cn({geometryInstances:[A[0],A[1],A[2],A[3],s,o],appearance:new Tn({translucent:!1,flat:!0}),asynchronous:!1})};var VV=TC;var L_e=new f(1,1,1),Qy=Math.cos,Ry=Math.sin;function Mm(e){e=e??G.EMPTY_OBJECT;let t=e.radii??L_e,n=e.innerRadii??t,i=e.minimumClock??0,o=e.maximumClock??S.TWO_PI,r=e.minimumCone??0,a=e.maximumCone??S.PI,s=Math.round(e.stackPartitions??10),A=Math.round(e.slicePartitions??8),l=Math.round(e.subdivisions??128);this._radii=f.clone(t),this._innerRadii=f.clone(n),this._minimumClock=i,this._maximumClock=o,this._minimumCone=r,this._maximumCone=a,this._stackPartitions=s,this._slicePartitions=A,this._subdivisions=l,this._offsetAttribute=e.offsetAttribute,this._workerName="createEllipsoidOutlineGeometry"}Mm.packedLength=2*f.packedLength+8;Mm.pack=function(e,t,n){return n=n??0,f.pack(e._radii,t,n),n+=f.packedLength,f.pack(e._innerRadii,t,n),n+=f.packedLength,t[n++]=e._minimumClock,t[n++]=e._maximumClock,t[n++]=e._minimumCone,t[n++]=e._maximumCone,t[n++]=e._stackPartitions,t[n++]=e._slicePartitions,t[n++]=e._subdivisions,t[n]=e._offsetAttribute??-1,t};var jV=new f,YV=new f,$l={radii:jV,innerRadii:YV,minimumClock:void 0,maximumClock:void 0,minimumCone:void 0,maximumCone:void 0,stackPartitions:void 0,slicePartitions:void 0,subdivisions:void 0,offsetAttribute:void 0};Mm.unpack=function(e,t,n){t=t??0;let i=f.unpack(e,t,jV);t+=f.packedLength;let o=f.unpack(e,t,YV);t+=f.packedLength;let r=e[t++],a=e[t++],s=e[t++],A=e[t++],l=e[t++],d=e[t++],m=e[t++],p=e[t];return c(n)?(n._radii=f.clone(i,n._radii),n._innerRadii=f.clone(o,n._innerRadii),n._minimumClock=r,n._maximumClock=a,n._minimumCone=s,n._maximumCone=A,n._stackPartitions=l,n._slicePartitions=d,n._subdivisions=m,n._offsetAttribute=p===-1?void 0:p,n):($l.minimumClock=r,$l.maximumClock=a,$l.minimumCone=s,$l.maximumCone=A,$l.stackPartitions=l,$l.slicePartitions=d,$l.subdivisions=m,$l.offsetAttribute=p===-1?void 0:p,new Mm($l))};Mm.createGeometry=function(e){let t=e._radii;if(t.x<=0||t.y<=0||t.z<=0)return;let n=e._innerRadii;if(n.x<=0||n.y<=0||n.z<=0)return;let i=e._minimumClock,o=e._maximumClock,r=e._minimumCone,a=e._maximumCone,s=e._subdivisions,A=pe.fromCartesian3(t),l=e._slicePartitions+1,d=e._stackPartitions+1;l=Math.round(l*Math.abs(o-i)/S.TWO_PI),d=Math.round(d*Math.abs(a-r)/S.PI),l<2&&(l=2),d<2&&(d=2);let m=0,p=1,g=n.x!==t.x||n.y!==t.y||n.z!==t.z,h=!1,C=!1;g&&(p=2,r>0&&(h=!0,m+=l),a<Math.PI&&(C=!0,m+=l));let _=s*p*(d+l),I=new Float64Array(_*3),b=2*(_+m-(l+d)*p),x=Ge.createTypedArray(_,b),T,w,R,z,M=0,N=new Array(d),O=new Array(d);for(T=0;T<d;T++)z=r+T*(a-r)/(d-1),N[T]=Ry(z),O[T]=Qy(z);let u=new Array(s),E=new Array(s);for(T=0;T<s;T++)R=i+T*(o-i)/(s-1),u[T]=Ry(R),E[T]=Qy(R);for(T=0;T<d;T++)for(w=0;w<s;w++)I[M++]=t.x*N[T]*E[w],I[M++]=t.y*N[T]*u[w],I[M++]=t.z*O[T];if(g)for(T=0;T<d;T++)for(w=0;w<s;w++)I[M++]=n.x*N[T]*E[w],I[M++]=n.y*N[T]*u[w],I[M++]=n.z*O[T];for(N.length=s,O.length=s,T=0;T<s;T++)z=r+T*(a-r)/(s-1),N[T]=Ry(z),O[T]=Qy(z);for(u.length=l,E.length=l,T=0;T<l;T++)R=i+T*(o-i)/(l-1),u[T]=Ry(R),E[T]=Qy(R);for(T=0;T<s;T++)for(w=0;w<l;w++)I[M++]=t.x*N[T]*E[w],I[M++]=t.y*N[T]*u[w],I[M++]=t.z*O[T];if(g)for(T=0;T<s;T++)for(w=0;w<l;w++)I[M++]=n.x*N[T]*E[w],I[M++]=n.y*N[T]*u[w],I[M++]=n.z*O[T];for(M=0,T=0;T<d*p;T++){let D=T*s;for(w=0;w<s-1;w++)x[M++]=D+w,x[M++]=D+w+1}let y=d*s*p;for(T=0;T<l;T++)for(w=0;w<s-1;w++)x[M++]=y+T+w*l,x[M++]=y+T+(w+1)*l;if(g)for(y=d*s*p+l*s,T=0;T<l;T++)for(w=0;w<s-1;w++)x[M++]=y+T+w*l,x[M++]=y+T+(w+1)*l;if(g){let D=d*s*p,v=D+s*l;if(h)for(T=0;T<l;T++)x[M++]=D+T,x[M++]=v+T;if(C)for(D+=s*l-l,v+=s*l-l,T=0;T<l;T++)x[M++]=D+T,x[M++]=v+T}let B=new eo({position:new rt({componentDatatype:V.DOUBLE,componentsPerAttribute:3,values:I})});if(c(e._offsetAttribute)){let D=I.length,v=e._offsetAttribute===Pr.NONE?0:1,F=new Uint8Array(D/3).fill(v);B.applyOffset=new rt({componentDatatype:V.UNSIGNED_BYTE,componentsPerAttribute:1,values:F})}return new Dt({attributes:B,indices:x,primitiveType:Me.LINES,boundingSphere:le.fromEllipsoid(A),offsetAttribute:e._offsetAttribute})};var yf=Mm;function Pm(e){let t=e.radius??1,i={radii:new f(t,t,t),stackPartitions:e.stackPartitions,slicePartitions:e.slicePartitions,subdivisions:e.subdivisions};this._ellipsoidGeometry=new yf(i),this._workerName="createSphereOutlineGeometry"}Pm.packedLength=yf.packedLength;Pm.pack=function(e,t,n){return yf.pack(e._ellipsoidGeometry,t,n)};var F_e=new yf,kd={radius:void 0,radii:new f,stackPartitions:void 0,slicePartitions:void 0,subdivisions:void 0};Pm.unpack=function(e,t,n){let i=yf.unpack(e,t,F_e);return kd.stackPartitions=i._stackPartitions,kd.slicePartitions=i._slicePartitions,kd.subdivisions=i._subdivisions,c(n)?(f.clone(i._radii,kd.radii),n._ellipsoidGeometry=new yf(kd),n):(kd.radius=i._radii.x,new Pm(kd))};Pm.createGeometry=function(e){return yf.createGeometry(e._ellipsoidGeometry)};var vy=Pm;function Nm(e,t){t===0&&(t=S.EPSILON7),this._boundingSphere=new le(e,t)}Object.defineProperties(Nm.prototype,{center:{get:function(){return this._boundingSphere.center}},radius:{get:function(){return this._boundingSphere.radius}},boundingVolume:{get:function(){return this._boundingSphere}},boundingSphere:{get:function(){return this._boundingSphere}}});Nm.prototype.distanceToCamera=function(e){let t=this._boundingSphere;return Math.max(0,f.distance(t.center,e.camera.positionWC)-t.radius)};Nm.prototype.intersectPlane=function(e){return le.intersectPlane(this._boundingSphere,e)};Nm.prototype.update=function(e,t){f.clone(e,this._boundingSphere.center),this._boundingSphere.radius=t};Nm.prototype.createDebugVolume=function(e){let t=new vy({radius:this.radius}),n=Q.fromTranslation(this.center,new Q.clone(Q.IDENTITY)),i=new tn({geometry:t,id:"outline",modelMatrix:n,attributes:{color:In.fromColor(e)}});return new cn({geometryInstances:i,appearance:new Tn({translucent:!1,flat:!0}),asynchronous:!1})};var Lm=Nm;var O_e=new f,k_e=new f,U_e=new f,z_e=new f;function Ud(e,t,n){n=f.cross(e,t,n);let i=f.magnitude(n);return f.multiplyByScalar(n,S.EPSILON7/i,n)}function dw(e,t){let n=f.normalize(e,z_e),i=f.equalsEpsilon(n,f.UNIT_X,S.EPSILON6)?f.UNIT_Y:f.UNIT_X;return Ud(e,i,t)}function WV(e){let t=ne.getColumn(e,0,O_e),n=ne.getColumn(e,1,k_e),i=ne.getColumn(e,2,U_e),o=f.equals(t,f.ZERO),r=f.equals(n,f.ZERO),a=f.equals(i,f.ZERO);return!o&&!r&&!a?e:o&&r&&a?(e[0]=S.EPSILON7,e[4]=S.EPSILON7,e[8]=S.EPSILON7,e):(o&&!r&&!a?t=Ud(n,i,t):!o&&r&&!a?n=Ud(t,i,n):!o&&!r&&a?i=Ud(n,t,i):o?r?a||(t=dw(i,t),n=Ud(i,t,n)):(t=dw(n,t),i=Ud(n,t,i)):(n=dw(t,n),i=Ud(n,t,i)),ne.setColumn(e,0,t,e),ne.setColumn(e,1,n,e),ne.setColumn(e,2,i,e),e)}function Fm(e,t){t=WV(t),this._orientedBoundingBox=new ui(e,t),this._boundingSphere=le.fromOrientedBoundingBox(this._orientedBoundingBox)}Object.defineProperties(Fm.prototype,{boundingVolume:{get:function(){return this._orientedBoundingBox}},boundingSphere:{get:function(){return this._boundingSphere}}});Fm.prototype.distanceToCamera=function(e){return Math.sqrt(this._orientedBoundingBox.distanceSquaredTo(e.camera.positionWC))};Fm.prototype.intersectPlane=function(e){return this._orientedBoundingBox.intersectPlane(e)};Fm.prototype.update=function(e,t){f.clone(e,this._orientedBoundingBox.center),t=WV(t),ne.clone(t,this._orientedBoundingBox.halfAxes),le.fromOrientedBoundingBox(this._orientedBoundingBox,this._boundingSphere)};Fm.prototype.createDebugVolume=function(e){let t=new d_({minimum:new f(-1,-1,-1),maximum:new f(1,1,1)}),n=Q.fromRotationTranslation(this.boundingVolume.halfAxes,this.boundingVolume.center),i=new tn({geometry:t,id:"outline",modelMatrix:n,attributes:{color:In.fromColor(e)}});return new cn({geometryInstances:i,appearance:new Tn({translucent:!1,flat:!0}),asynchronous:!1})};var nA=Fm;function ki(e,t,n,i){this._tileset=e,this._header=n;let o=c(n.contents),r=o&&n.contents.length>1||Gn(n,"3DTILES_multiple_contents"),a=o&&!r?n.contents[0]:n.content;this._contentHeader=a,this.transform=c(n.transform)?Q.unpack(n.transform):Q.clone(Q.IDENTITY);let s=c(i)?i.computedTransform:e.modelMatrix,A=Q.multiply(s,this.transform,new Q),l=c(i)?i._initialTransform:Q.IDENTITY;this._initialTransform=Q.multiply(l,this.transform,new Q),this.computedTransform=A,this.metadata=yV(e,n),this._verticalExaggeration=1,this._verticalExaggerationRelativeHeight=0,this._boundingVolume=this.createBoundingVolume(n.boundingVolume,A),this._boundingVolume2D=void 0;let d;c(a)&&c(a.boundingVolume)&&(d=this.createBoundingVolume(a.boundingVolume,A)),this._contentBoundingVolume=d,this._contentBoundingVolume2D=void 0;let m;c(n.viewerRequestVolume)&&(m=this.createBoundingVolume(n.viewerRequestVolume,A)),this._viewerRequestVolume=m,this.geometricError=n.geometricError,this._geometricError=n.geometricError,c(this._geometricError)||(this._geometricError=c(i)?i._geometricError:e._geometricError,ki._deprecationWarning("geometricErrorUndefined","Required property geometricError is undefined for this tile. Using parent's geometric error instead.")),this.updateGeometricErrorScale();let p;c(n.refine)?((n.refine==="replace"||n.refine==="add")&&ki._deprecationWarning("lowercase-refine",`This tile uses a lowercase refine "${n.refine}". Instead use "${n.refine.toUpperCase()}".`),p=n.refine.toUpperCase()==="REPLACE"?oo.REPLACE:oo.ADD):c(i)?p=i.refine:p=oo.REPLACE,this.refine=p,this.children=[],this.parent=i;let g,h=!1,C,_,I;if(t=Ye.createIfNeeded(t),r)C=ro.UNLOADED,_=t.clone();else if(c(a)){let w=a.uri;c(a.url)&&(ki._deprecationWarning("contentUrl",'This tileset JSON uses the "content.url" property which has been deprecated. Use "content.uri" instead.'),w=a.url),w===""?(ki._deprecationWarning("contentUriEmpty","content.uri property is an empty string, which creates a circular dependency, making this tileset invalid. Omit the content property instead"),g=new ZS(e,this),h=!0,C=ro.READY):(C=ro.UNLOADED,_=t.getDerivedResource({url:w}),I=uA.getServerKey(_.getUrlComponent()))}else g=new ZS(e,this),h=!0,C=ro.READY;this._content=g,this._contentResource=_,this._contentState=C,this._expiredContent=void 0,this._serverKey=I,this.hasEmptyContent=h,this.hasTilesetContent=!1,this.hasImplicitContent=!1,this.hasRenderableContent=!h,this.hasImplicitContentMetadata=!1,this.hasMultipleContents=r,this.cacheNode=void 0;let b=n.expire,x,T;c(b)&&(x=b.duration,c(b.date)&&(T=Ue.fromIso8601(b.date))),this.expireDuration=x,this.expireDate=T,this.lastStyleTime=0,this._optimChildrenWithinParent=Jl.NOT_COMPUTED,this.clippingPlanesDirty=!1,this.clippingPolygonsDirty=!1,this.priorityDeferred=!1,this.implicitTileset=void 0,this.implicitCoordinates=void 0,this.implicitSubtree=void 0,this._distanceToCamera=0,this._centerZDepth=0,this._screenSpaceError=0,this._screenSpaceErrorProgressiveResolution=0,this._visibilityPlaneMask=0,this._visible=!1,this._inRequestVolume=!1,this._finalResolution=!0,this._depth=0,this._stackLength=0,this._selectionDepth=0,this._updatedVisibilityFrame=0,this._touchedFrame=0,this._visitedFrame=0,this._selectedFrame=0,this._wasSelectedLastFrame=!1,this._requestedFrame=0,this._ancestorWithContent=void 0,this._ancestorWithContentAvailable=void 0,this._refines=!1,this._shouldSelect=!1,this._isClipped=!0,this._isClippedByPolygon=!1,this._clippingPlanesState=0,this._clippingPolygonsState=0,this._debugBoundingVolume=void 0,this._debugContentBoundingVolume=void 0,this._debugViewerRequestVolume=void 0,this._debugColor=J.fromRandom({alpha:1}),this._debugColorizeTiles=!1,this._priority=0,this._priorityHolder=this,this._priorityProgressiveResolution=!1,this._priorityProgressiveResolutionScreenSpaceErrorLeaf=!1,this._priorityReverseScreenSpaceError=0,this._foveatedFactor=0,this._wasMinPriorityChild=!1,this._loadTimestamp=new Ue,this._commandsLength=0,this._color=void 0,this._colorDirty=!1,this._request=void 0}ki._deprecationWarning=Kr;Object.defineProperties(ki.prototype,{tileset:{get:function(){return this._tileset}},content:{get:function(){return this._content}},boundingVolume:{get:function(){return this._boundingVolume}},contentBoundingVolume:{get:function(){return this._contentBoundingVolume??this._boundingVolume}},boundingSphere:{get:function(){return this._boundingVolume.boundingSphere}},isVisible:{get:function(){return this._visible&&this._inRequestVolume}},extras:{get:function(){return this._header.extras}},color:{get:function(){return c(this._color)||(this._color=new J),J.clone(this._color)},set:function(e){this._color=J.clone(e,this._color),this._colorDirty=!0}},contentAvailable:{get:function(){return this.contentReady&&this.hasRenderableContent||c(this._expiredContent)&&!this.contentFailed}},contentReady:{get:function(){return this._contentState===ro.READY}},contentUnloaded:{get:function(){return this._contentState===ro.UNLOADED}},hasUnloadedRenderableContent:{get:function(){return this.hasRenderableContent&&this.contentUnloaded}},contentExpired:{get:function(){return this._contentState===ro.EXPIRED}},contentFailed:{get:function(){return this._contentState===ro.FAILED}},commandsLength:{get:function(){return this._commandsLength}}});var bf=new f;function G_e(e,t){let{tileset:n,boundingSphere:i}=e,{radius:o,center:r}=i,{camera:a}=t,s=f.multiplyByScalar(a.directionWC,e._centerZDepth,bf),A=f.add(a.positionWC,s,bf),l=f.subtract(A,r,bf);if(f.magnitude(l)>o){let T=f.normalize(l,bf),w=f.multiplyByScalar(T,o,bf),R=f.add(r,w,bf),z=f.subtract(R,a.positionWC,bf),M=f.normalize(z,bf);e._foveatedFactor=1-Math.abs(f.dot(a.directionWC,M))}else e._foveatedFactor=0;let p=e.refine===oo.REPLACE,g=n.isSkippingLevelOfDetail;if(p&&!g||!n.foveatedScreenSpaceError||n.foveatedConeSize===1||e._priorityProgressiveResolution&&p&&g||n._pass===Ds.PRELOAD_FLIGHT||n._pass===Ds.PRELOAD)return!1;let h=1-Math.cos(a.frustum.fov*.5),C=n.foveatedConeSize*h;if(e._foveatedFactor<=C)return!1;let _=h-C,I=S.clamp((e._foveatedFactor-C)/_,0,1),b=n.foveatedInterpolationCallback(n.foveatedMinimumScreenSpaceErrorRelaxation,n.memoryAdjustedScreenSpaceError,I),x=e._screenSpaceError===0&&c(e.parent)?e.parent._screenSpaceError*.5:e._screenSpaceError;return n.memoryAdjustedScreenSpaceError-b<=x}var ZV=new Ue;ki.prototype.getScreenSpaceError=function(e,t,n){let i=this._tileset,o=n??1,r=c(this.parent)?this.parent.geometricError:i._scaledGeometricError,a=t?r:this.geometricError;if(a===0)return 0;let{camera:s,context:A}=e,l=s.frustum,d=A.drawingBufferWidth,m=A.drawingBufferHeight*o,p;if(e.mode===Ee.SCENE2D||l instanceof Tu){let g=l.offCenterFrustum;c(g)&&(l=g);let h=Math.max(l.top-l.bottom,l.right-l.left)/Math.max(d,m);p=a/h}else{let g=Math.max(this._distanceToCamera,S.EPSILON7),h=l.sseDenominator;if(p=a*m/(g*h),i.dynamicScreenSpaceError){let C=i._dynamicScreenSpaceErrorComputedDensity,_=i.dynamicScreenSpaceErrorFactor,I=S.fog(g,C)*_;p-=I}}return p/=e.pixelRatio,p};function H_e(e,t){if(e.progressiveResolutionHeightFraction<=0||e.progressiveResolutionHeightFraction>.5)return!1;let n=e.memoryAdjustedScreenSpaceError,i=t._screenSpaceErrorProgressiveResolution>n;t._priorityProgressiveResolutionScreenSpaceErrorLeaf=!1;let o=t.parent,r=t._screenSpaceErrorProgressiveResolution<=n,a=c(o)&&o._screenSpaceErrorProgressiveResolution>n;return r&&a&&(t._priorityProgressiveResolutionScreenSpaceErrorLeaf=!0,i=!0),i}function V_e(e,t){let n=t.parent,o=c(n)&&(!e.isSkippingLevelOfDetail||t._screenSpaceError===0||n.hasTilesetContent||n.hasImplicitContent)?n._screenSpaceError:t._screenSpaceError;return e.root._screenSpaceError-o}ki.prototype.updateVisibility=function(e){let{parent:t,tileset:n}=this;if(this._updatedVisibilityFrame===n._updatedVisibilityFrame)return;let i=c(t)?t.computedTransform:n.modelMatrix,o=c(t)?t._visibilityPlaneMask:Wf.MASK_INDETERMINATE;this.updateTransform(i,e),this._distanceToCamera=this.distanceToTile(e),this._centerZDepth=this.distanceToTileCenter(e),this._screenSpaceError=this.getScreenSpaceError(e,!1),this._screenSpaceErrorProgressiveResolution=this.getScreenSpaceError(e,!1,n.progressiveResolutionHeightFraction),this._visibilityPlaneMask=this.visibility(e,o),this._visible=this._visibilityPlaneMask!==Wf.MASK_OUTSIDE,this._inRequestVolume=this.insideViewerRequestVolume(e),this._priorityReverseScreenSpaceError=V_e(n,this),this._priorityProgressiveResolution=H_e(n,this),this.priorityDeferred=G_e(this,e),this._updatedVisibilityFrame=n._updatedVisibilityFrame};ki.prototype.updateExpiration=function(){if(c(this.expireDate)&&this.contentReady&&!this.hasEmptyContent&&!this.hasMultipleContents){let e=Ue.now(ZV);Ue.lessThan(this.expireDate,e)&&(this._contentState=ro.EXPIRED,this._expiredContent=this._content)}};function j_e(e){if(!c(e.expireDuration))return;let t=Ue.now(ZV);Ue.addSeconds(t,e.expireDuration,t),c(e.expireDate)?Ue.lessThan(e.expireDate,t)&&Ue.clone(t,e.expireDate):e.expireDate=Ue.clone(t)}function Y_e(e){return function(){return e._priority}}ki.prototype.requestContent=function(){if(!this.hasEmptyContent)return this.hasMultipleContents?W_e(this):J_e(this)};function W_e(e){let t=e._content,n=e._tileset;if(!c(t)){let o=Gn(e._header,"3DTILES_multiple_contents")?e._header.extensions["3DTILES_multiple_contents"]:e._header;t=new xV(n,e,e._contentResource.clone(),o),e._content=t}let i=t.requestInnerContents();if(c(i))return e._contentState=ro.LOADING,i.then(o=>{if(!e.isDestroyed()&&c(o))return e._contentState=ro.PROCESSING,t}).catch(o=>{if(!e.isDestroyed())throw e._contentState=ro.FAILED,o})}async function q_e(e,t,n,i,o){let r=e._contentState;e._contentState=ro.LOADING,++t.statistics.numberOfPendingRequests;let a;try{a=await o}catch(s){if(--t.statistics.numberOfPendingRequests,e.isDestroyed())return;if(n.cancelled||n.state===vn.CANCELLED){e._contentState=r,++t.statistics.numberOfAttemptedRequests;return}throw e._contentState=ro.FAILED,s}if(e.isDestroyed()){--t.statistics.numberOfPendingRequests;return}if(n.cancelled||n.state===vn.CANCELLED){e._contentState=r,--t.statistics.numberOfPendingRequests,++t.statistics.numberOfAttemptedRequests;return}try{let s=await K_e(e,a);return--t.statistics.numberOfPendingRequests,e.isDestroyed()?void 0:(i&&(e.expireDate=void 0),e._content=s,e._contentState=ro.PROCESSING,s)}catch(s){if(--t.statistics.numberOfPendingRequests,e.isDestroyed())return;throw e._contentState=ro.FAILED,s}}function J_e(e){let t=e._contentResource.clone(),n=e.contentExpired;n&&t.setQueryParameters({expired:e.expireDate.toString()});let i=new Gs({throttle:!0,throttleByServer:!0,type:zs.TILES3D,priorityFunction:Y_e(e),serverKey:e._serverKey});e._request=i,t.request=i;let o=e._tileset,r=t.fetchArrayBuffer();if(!c(r)){++o.statistics.numberOfAttemptedRequests;return}return q_e(e,o,i,n,r)}async function K_e(e,t){let n=Ty(t),i=e._tileset;i._disableSkipLevelOfDetail=i._disableSkipLevelOfDetail||n.contentType===Ur.GEOMETRY||n.contentType===Ur.VECTOR,(n.contentType===Ur.IMPLICIT_SUBTREE||n.contentType===Ur.IMPLICIT_SUBTREE_JSON)&&(e.hasImplicitContent=!0,e.hasRenderableContent=!1),n.contentType===Ur.EXTERNAL_TILESET&&(e.hasTilesetContent=!0,e.hasRenderableContent=!1);let o,r=by[n.contentType];if(e.isDestroyed())return;c(n.binaryPayload)?o=await Promise.resolve(r(i,e,e._contentResource,n.binaryPayload.buffer,0)):o=await Promise.resolve(r(i,e,e._contentResource,n.jsonPayload));let a=e._contentHeader;if(e.hasImplicitContentMetadata){let A=e.implicitSubtree,l=e.implicitCoordinates;o.metadata=A.getContentMetadataView(l,0)}else e.hasImplicitContent||(o.metadata=By(i,a));let s=xy(i,a);return c(s)&&(o.group=new z_({metadata:s})),o}ki.prototype.cancelRequests=function(){this.hasMultipleContents?this._content.cancelRequests():this._request.cancel()};ki.prototype.unloadContent=function(){this.hasRenderableContent&&(this._content=this._content&&this._content.destroy(),this._contentState=ro.UNLOADED,this.lastStyleTime=0,this.clippingPlanesDirty=this._clippingPlanesState===0,this._clippingPlanesState=0,this.clippingPolygonsDirty=this._clippingPolygonsState===0,this._clippingPolygonsState=0,this._debugColorizeTiles=!1,this._debugBoundingVolume=this._debugBoundingVolume&&this._debugBoundingVolume.destroy(),this._debugContentBoundingVolume=this._debugContentBoundingVolume&&this._debugContentBoundingVolume.destroy(),this._debugViewerRequestVolume=this._debugViewerRequestVolume&&this._debugViewerRequestVolume.destroy())};var $V=new le;function mw(e,t){if(t.mode!==Ee.SCENE3D&&!c(e._boundingVolume2D)){let n=e._boundingVolume.boundingSphere,i=le.projectTo2D(n,t.mapProjection,$V);e._boundingVolume2D=new Lm(i.center,i.radius)}return t.mode!==Ee.SCENE3D?e._boundingVolume2D:e._boundingVolume}function X_e(e,t){if(t.mode!==Ee.SCENE3D&&!c(e._contentBoundingVolume2D)){let n=e._contentBoundingVolume.boundingSphere,i=le.projectTo2D(n,t.mapProjection,$V);e._contentBoundingVolume2D=new Lm(i.center,i.radius)}return t.mode!==Ee.SCENE3D?e._contentBoundingVolume2D:e._contentBoundingVolume}ki.prototype.visibility=function(e,t){let n=e.cullingVolume,i=mw(this,e),o=this._tileset,r=o.clippingPlanes;if(c(r)&&r.enabled){let s=r.computeIntersectionWithBoundingVolume(i,o.clippingPlanesOriginMatrix);if(this._isClipped=s!==bt.INSIDE,s===bt.OUTSIDE)return Wf.MASK_OUTSIDE}let a=o.clippingPolygons;if(c(a)&&a.enabled){let s=a.computeIntersectionWithBoundingVolume(i);this._isClippedByPolygon=s!==bt.OUTSIDE}return n.computeVisibilityWithPlaneMask(i,t)};ki.prototype.contentVisibility=function(e){if(!c(this._contentBoundingVolume))return bt.INSIDE;if(this._visibilityPlaneMask===Wf.MASK_INSIDE)return bt.INSIDE;let t=e.cullingVolume,n=X_e(this,e),i=this._tileset,o=i.clippingPlanes;if(c(o)&&o.enabled){let a=o.computeIntersectionWithBoundingVolume(n,i.clippingPlanesOriginMatrix);if(this._isClipped=a!==bt.INSIDE,a===bt.OUTSIDE)return bt.OUTSIDE}let r=i.clippingPolygons;if(c(r)&&r.enabled){let a=r.computeIntersectionWithBoundingVolume(n);if(this._isClippedByPolygon=a!==bt.OUTSIDE,a===bt.INSIDE)return bt.OUTSIDE}return t.computeVisibility(n)};ki.prototype.distanceToTile=function(e){return mw(this,e).distanceToCamera(e)};var Z_e=new f;ki.prototype.distanceToTileCenter=function(e){let n=mw(this,e).boundingVolume,i=f.subtract(n.center,e.camera.positionWC,Z_e);return f.dot(e.camera.directionWC,i)};ki.prototype.insideViewerRequestVolume=function(e){let t=this._viewerRequestVolume;return!c(t)||t.distanceToCamera(e)===0};var e9=new ne,t9=new f,$_e=new ne,pw=new f,n9=new de,i9=new ui,hw=new Q;function eIe(e,t,n){let i=f.fromElements(e[0],e[1],e[2],pw),o=ne.fromArray(e,3,$_e);i=Q.multiplyByPoint(t,i,i);let r=Q.getMatrix3(t,e9);return o=ne.multiply(r,o,o),c(n)?(n.update(i,o),n):new nA(i,o)}function qV(e,t,n,i){let o=de.unpack(e,0,n9),r=e[4],a=e[5],s=ui.fromRectangle(o,r,a,pe.WGS84,i9),A=s.center,l=s.halfAxes;t=Q.multiplyTransformation(t,Q.inverseTransformation(n,hw),hw),A=Q.multiplyByPoint(t,A,A);let d=Q.getMatrix3(t,e9);return l=ne.multiply(d,l,l),c(i)&&i instanceof nA?(i.update(A,l),i):new nA(A,l)}function tIe(e,t,n,i){if(!Q.equalsEpsilon(t,n,S.EPSILON8))return i instanceof nA?qV(e,t,n,i):qV(e,t,n,void 0);let o=de.unpack(e,0,n9);return i instanceof UA?(i.rectangle=de.clone(o,i.rectangle),i.minimumHeight=e[4],i.maximumHeight=e[5],i.computeBoundingVolumes(pe.WGS84),i):new UA({rectangle:o,minimumHeight:e[4],maximumHeight:e[5]})}function nIe(e,t,n){let i=f.fromElements(e[0],e[1],e[2],pw),o=e[3];i=Q.multiplyByPoint(t,i,i);let r=Q.getScale(t,t9),a=f.maximumComponent(r);return o*=a,c(n)?(n.update(i,o),n):new Lm(i,o)}ki.prototype.createBoundingVolume=function(e,t,n){let i=this.metadata,o;if(c(i)&&(o=EI.parseBoundingVolumeSemantic("TILE",i)),c(o)&&(e=o),!c(e))throw new ae("boundingVolume must be defined");if(Gn(e,"3DTILES_bounding_volume_S2"))return new VV(e.extensions["3DTILES_bounding_volume_S2"]);let{box:r,region:a,sphere:s}=e;if(c(r)){let A=eIe(r,t,n);return this._verticalExaggeration!==1&&JV(A,this._verticalExaggeration,this._verticalExaggerationRelativeHeight),A}if(c(a)){let A=tIe(a,t,this._initialTransform,n);return this._verticalExaggeration===1||(A instanceof nA?JV(A,this._verticalExaggeration,this._verticalExaggerationRelativeHeight):(A.minimumHeight=pa.getHeight(A.minimumHeight,this._verticalExaggeration,this._verticalExaggerationRelativeHeight),A.maximumHeight=pa.getHeight(A.maximumHeight,this._verticalExaggeration,this._verticalExaggerationRelativeHeight),A.computeBoundingVolumes(pe.WGS84))),A}if(c(s)){let A=nIe(s,t,n);if(this._verticalExaggeration!==1){let l=pa.getPosition(A.center,pe.WGS84,this._verticalExaggeration,this._verticalExaggerationRelativeHeight,pw),d=A.radius*this._verticalExaggeration;A.update(l,d)}return A}throw new ae("boundingVolume must contain a sphere, region, or box")};var iIe=f.unpackArray(new Array(24).fill(0));function JV(e,t,n){let i=e.boundingVolume.computeCorners(iIe).map(r=>pa.getPosition(r,pe.WGS84,t,n,r)),o=ui.fromPoints(i,i9);e.update(o.center,o.halfAxes)}ki.prototype.updateTransform=function(e,t){e=e??Q.IDENTITY;let n=Q.multiplyTransformation(e,this.transform,hw),i=!Q.equals(n,this.computedTransform),o=c(t)&&(this._verticalExaggeration!==t.verticalExaggeration||this._verticalExaggerationRelativeHeight!==t.verticalExaggerationRelativeHeight);if(!i&&!o)return;i&&Q.clone(n,this.computedTransform),o&&(this._verticalExaggeration=t.verticalExaggeration,this._verticalExaggerationRelativeHeight=t.verticalExaggerationRelativeHeight);let r=this._header,a=this._contentHeader;this._boundingVolume=this.createBoundingVolume(r.boundingVolume,this.computedTransform,this._boundingVolume),c(this._contentBoundingVolume)&&(this._contentBoundingVolume=this.createBoundingVolume(a.boundingVolume,this.computedTransform,this._contentBoundingVolume)),c(this._viewerRequestVolume)&&(this._viewerRequestVolume=this.createBoundingVolume(r.viewerRequestVolume,this.computedTransform,this._viewerRequestVolume)),this.updateGeometricErrorScale(),this._debugBoundingVolume=this._debugBoundingVolume&&this._debugBoundingVolume.destroy(),this._debugContentBoundingVolume=this._debugContentBoundingVolume&&this._debugContentBoundingVolume.destroy(),this._debugViewerRequestVolume=this._debugViewerRequestVolume&&this._debugViewerRequestVolume.destroy()};ki.prototype.updateGeometricErrorScale=function(){let e=Q.getScale(this.computedTransform,t9),t=f.maximumComponent(e);if(this.geometricError=this._geometricError*t,!c(this.parent)){let n=this._tileset;n._scaledGeometricError=n._geometricError*t}};function oIe(e,t,n,i){if(!i.isRender)return;let o=c(e._contentHeader)&&c(e._contentHeader.boundingVolume),r=t.debugShowBoundingVolume||t.debugShowContentBoundingVolume&&!o;if(r){let A;e._finalResolution?e.hasRenderableContent?A=J.WHITE:A=J.DARKGRAY:A=J.YELLOW,c(e._debugBoundingVolume)||(e._debugBoundingVolume=e._boundingVolume.createDebugVolume(A)),e._debugBoundingVolume.update(n);let l=e._debugBoundingVolume.getGeometryInstanceAttributes("outline");l.color=In.toValue(A,l.color)}else!r&&c(e._debugBoundingVolume)&&(e._debugBoundingVolume=e._debugBoundingVolume.destroy());t.debugShowContentBoundingVolume&&o?(c(e._debugContentBoundingVolume)||(e._debugContentBoundingVolume=e._contentBoundingVolume.createDebugVolume(J.BLUE)),e._debugContentBoundingVolume.update(n)):!t.debugShowContentBoundingVolume&&c(e._debugContentBoundingVolume)&&(e._debugContentBoundingVolume=e._debugContentBoundingVolume.destroy()),t.debugShowViewerRequestVolume&&c(e._viewerRequestVolume)?(c(e._debugViewerRequestVolume)||(e._debugViewerRequestVolume=e._viewerRequestVolume.createDebugVolume(J.YELLOW)),e._debugViewerRequestVolume.update(n)):!t.debugShowViewerRequestVolume&&c(e._debugViewerRequestVolume)&&(e._debugViewerRequestVolume=e._debugViewerRequestVolume.destroy());let a=t.debugColorizeTiles&&!e._debugColorizeTiles||c(t._heatmap.tilePropertyName),s=!t.debugColorizeTiles&&e._debugColorizeTiles;a?(t._heatmap.colorize(e,n),e._debugColorizeTiles=!0,e.color=e._debugColor):s&&(e._debugColorizeTiles=!1,e.color=J.WHITE),e._colorDirty&&(e._colorDirty=!1,e._content.applyDebugSettings(!0,e._color)),s&&t.makeStyleDirty()}function rIe(e,t,n){let i=e._expiredContent;if(!e.hasMultipleContents&&c(i)){if(!e.contentReady){try{i.update(t,n)}catch{}return}e._expiredContent.destroy(),e._expiredContent=void 0}if(c(e.content))try{e.content.update(t,n)}catch(o){throw e._contentState=ro.FAILED,o}}function aIe(e,t){let n=t.clippingPlanes,i=0;c(n)&&e._isClipped&&n.enabled&&(i=n.clippingPlanesState),i!==e._clippingPlanesState&&(e._clippingPlanesState=i,e.clippingPlanesDirty=!0)}function sIe(e,t){let n=t.clippingPolygons,i=0;c(n)&&e._isClippedByPolygon&&n.enabled&&(i=n.clippingPolygonsState),i!==e._clippingPolygonsState&&(e._clippingPolygonsState=i,e.clippingPolygonsDirty=!0)}ki.prototype.update=function(e,t,n){let{commandList:i}=t,o=i.length;aIe(this,e),sIe(this,e),oIe(this,e,t,n),rIe(this,e,t);let r=i.length;this._commandsLength=r-o;for(let a=o;a<r;++a){let s=i[a],A=s.pass===He.TRANSLUCENT;s.depthForTranslucentClassification=A}this.clippingPlanesDirty=!1,this.clippingPolygonsDirty=!1};var KV=[];ki.prototype.process=function(e,t){!this.contentExpired&&!this.contentReady&&this._content.ready&&(j_e(this),this._selectedFrame=0,this.lastStyleTime=0,Ue.now(this._loadTimestamp),this._contentState=ro.READY,!this.hasTilesetContent&&!this.hasImplicitContent&&(e._statistics.incrementLoadCounts(this.content),++e._statistics.numberOfTilesWithContentReady,++e._statistics.numberOfLoadedTilesTotal,e._cache.add(this)));let n=t.commandList;t.commandList=KV;try{this._content.update(e,t)}catch(i){throw this._contentState=ro.FAILED,i}KV.length=0,t.commandList=n};function XV(e,t,n){let i=e*Math.pow(10,t);return parseInt(i)*Math.pow(10,n)}function My(e,t,n){return Math.max(S.normalize(e,t,n)-S.EPSILON7,0)}ki.prototype.updatePriority=function(){let e=this.tileset,t=e.preferLeaves,n=e._minimumPriority,i=e._maximumPriority,o=4,r=1,a=0,s=o,A=a+s,l=o,d=A+l,m=r,p=Math.pow(10,d),g=d+m,h=r,C=Math.pow(10,g),_=g+h,I=Math.pow(10,_),b=My(this._depth,n.depth,i.depth);b=t?1-b:b;let T=!e.isSkippingLevelOfDetail&&this.refine===oo.REPLACE?My(this._priorityHolder._distanceToCamera,n.distance,i.distance):My(this._priorityReverseScreenSpaceError,n.reverseScreenSpaceError,i.reverseScreenSpaceError),w=XV(T,s,a),R=this._priorityProgressiveResolution?0:p,z=My(this._priorityHolder._foveatedFactor,n.foveatedFactor,i.foveatedFactor),M=XV(z,l,A),N=this.priorityDeferred?C:0,O=e._pass===Ds.PRELOAD_FLIGHT?0:I;this._priority=b+w+R+M+N+O};ki.prototype.isDestroyed=function(){return!1};ki.prototype.destroy=function(){return this._content=this._content&&this._content.destroy(),this._expiredContent=this._expiredContent&&!this._expiredContent.isDestroyed()&&this._expiredContent.destroy(),this._debugBoundingVolume=this._debugBoundingVolume&&this._debugBoundingVolume.destroy(),this._debugContentBoundingVolume=this._debugContentBoundingVolume&&this._debugContentBoundingVolume.destroy(),this._debugViewerRequestVolume=this._debugViewerRequestVolume&&this._debugViewerRequestVolume.destroy(),me(this)};var gw=ki;function eu(e){e=e??G.EMPTY_OBJECT;let t=e.id,n=e.group,i=e.class,o=c(n.properties)?n.properties:{};this._class=i,this._properties=o,this._id=t,this._extras=n.extras,this._extensions=n.extensions}Object.defineProperties(eu.prototype,{class:{get:function(){return this._class}},id:{get:function(){return this._id}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}}});eu.prototype.hasProperty=function(e){return Kt.hasProperty(e,this._properties,this._class)};eu.prototype.hasPropertyBySemantic=function(e){return Kt.hasPropertyBySemantic(e,this._properties,this._class)};eu.prototype.getPropertyIds=function(e){return Kt.getPropertyIds(this._properties,this._class,e)};eu.prototype.getProperty=function(e){return Kt.getProperty(e,this._properties,this._class)};eu.prototype.setProperty=function(e,t){return Kt.setProperty(e,t,this._properties,this._class)};eu.prototype.getPropertyBySemantic=function(e){return Kt.getPropertyBySemantic(e,this._properties,this._class)};eu.prototype.setPropertyBySemantic=function(e,t){return Kt.setPropertyBySemantic(e,t,this._properties,this._class)};var Cw=eu;function tu(e){e=e??G.EMPTY_OBJECT;let t=e.tileset,n=e.class,i=c(t.properties)?t.properties:{};this._class=n,this._properties=i,this._extras=t.extras,this._extensions=t.extensions}Object.defineProperties(tu.prototype,{class:{get:function(){return this._class}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}}});tu.prototype.hasProperty=function(e){return Kt.hasProperty(e,this._properties,this._class)};tu.prototype.hasPropertyBySemantic=function(e){return Kt.hasPropertyBySemantic(e,this._properties,this._class)};tu.prototype.getPropertyIds=function(e){return Kt.getPropertyIds(this._properties,this._class,e)};tu.prototype.getProperty=function(e){return Kt.getProperty(e,this._properties,this._class)};tu.prototype.setProperty=function(e,t){return Kt.setProperty(e,t,this._properties,this._class)};tu.prototype.getPropertyBySemantic=function(e){return Kt.getPropertyBySemantic(e,this._properties,this._class)};tu.prototype.setPropertyBySemantic=function(e,t){return Kt.setPropertyBySemantic(e,t,this._properties,this._class)};var o9=tu;function r9(e){e=e??G.EMPTY_OBJECT;let t=e.metadataJson,n=e.schema,i=t.metadata??t.tileset,o;c(i)&&(o=new o9({tileset:i,class:n.classes[i.class]}));let r=[],a=[],s=t.groups;if(Array.isArray(s)){let A=s.length;for(let l=0;l<A;l++){let d=s[l];a.push(new Cw({group:d,class:n.classes[d.class]}))}}else if(c(s)){r=Object.keys(s).sort();let A=r.length;for(let l=0;l<A;l++){let d=r[l];if(s.hasOwnProperty(d)){let m=s[d];a.push(new Cw({id:d,group:s[d],class:n.classes[m.class]}))}}}this._schema=n,this._groups=a,this._groupIds=r,this._tileset=o,this._statistics=t.statistics,this._extras=t.extras,this._extensions=t.extensions}Object.defineProperties(r9.prototype,{schema:{get:function(){return this._schema}},groups:{get:function(){return this._groups}},groupIds:{get:function(){return this._groupIds}},tileset:{get:function(){return this._tileset}},statistics:{get:function(){return this._statistics}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}}});var a9=r9;var s9={},cIe=new f;s9.checkChildrenWithinParent=function(e){let t=e.children,n=t.length,i=e.boundingVolume;if(i instanceof nA||i instanceof UA){let o=i._orientedBoundingBox;e._optimChildrenWithinParent=Jl.USE_OPTIMIZATION;for(let r=0;r<n;++r){let s=t[r].boundingVolume;if(!(s instanceof nA||s instanceof UA)){e._optimChildrenWithinParent=Jl.SKIP_OPTIMIZATION;break}let A=s._orientedBoundingBox,l=f.subtract(A.center,o.center,cIe),d=f.magnitude(l);f.divideByScalar(l,d,l);let m=Math.abs(o.halfAxes[0]*l.x)+Math.abs(o.halfAxes[1]*l.y)+Math.abs(o.halfAxes[2]*l.z)+Math.abs(o.halfAxes[3]*l.x)+Math.abs(o.halfAxes[4]*l.y)+Math.abs(o.halfAxes[5]*l.z)+Math.abs(o.halfAxes[6]*l.x)+Math.abs(o.halfAxes[7]*l.y)+Math.abs(o.halfAxes[8]*l.z),p=Math.abs(A.halfAxes[0]*l.x)+Math.abs(A.halfAxes[1]*l.y)+Math.abs(A.halfAxes[2]*l.z)+Math.abs(A.halfAxes[3]*l.x)+Math.abs(A.halfAxes[4]*l.y)+Math.abs(A.halfAxes[5]*l.z)+Math.abs(A.halfAxes[6]*l.x)+Math.abs(A.halfAxes[7]*l.y)+Math.abs(A.halfAxes[8]*l.z);if(m<=p+d){e._optimChildrenWithinParent=Jl.SKIP_OPTIMIZATION;break}}}return e._optimChildrenWithinParent===Jl.USE_OPTIMIZATION};var c9=s9;function SC(){this.head=void 0,this.tail=void 0,this._length=0}Object.defineProperties(SC.prototype,{length:{get:function(){return this._length}}});function AIe(e,t,n){this.item=e,this.previous=t,this.next=n}SC.prototype.add=function(e){let t=new AIe(e,this.tail,void 0);return c(this.tail)?(this.tail.next=t,this.tail=t):(this.head=t,this.tail=t),++this._length,t};function A9(e,t){c(t.previous)&&c(t.next)?(t.previous.next=t.next,t.next.previous=t.previous):c(t.previous)?(t.previous.next=void 0,e.tail=t.previous):c(t.next)?(t.next.previous=void 0,e.head=t.next):(e.head=void 0,e.tail=void 0),t.next=void 0,t.previous=void 0}SC.prototype.remove=function(e){c(e)&&(A9(this,e),--this._length)};SC.prototype.splice=function(e,t){if(e===t)return;A9(this,t);let n=e.next;e.next=t,this.tail===e?this.tail=t:n.previous=t,t.next=n,t.previous=e};var l9=SC;function zd(){this._list=new l9,this._sentinel=this._list.add(),this._trimTiles=!1}zd.prototype.reset=function(){this._list.splice(this._list.tail,this._sentinel)};zd.prototype.touch=function(e){let t=e.cacheNode;c(t)&&this._list.splice(this._sentinel,t)};zd.prototype.add=function(e){c(e.cacheNode)||(e.cacheNode=this._list.add(e))};zd.prototype.unloadTile=function(e,t,n){let i=t.cacheNode;c(i)&&(this._list.remove(i),t.cacheNode=void 0,n(e,t))};zd.prototype.unloadTiles=function(e,t){let n=this._trimTiles;this._trimTiles=!1;let i=this._list,o=this._sentinel,r=i.head;for(;r!==o&&(e.totalMemoryUsageInBytes>e.cacheBytes||n);){let a=r.item;r=r.next,this.unloadTile(e,a,t)}};zd.prototype.trim=function(){this._trimTiles=!0};var u9=zd;function Py(e){this.tilePropertyName=e,this._minimum=Number.MAX_VALUE,this._maximum=-Number.MAX_VALUE,this._previousMinimum=Number.MAX_VALUE,this._previousMaximum=-Number.MAX_VALUE,this._referenceMinimum={},this._referenceMaximum={}}function _w(e,t){let n;return t==="_loadTimestamp"?n=Ue.toDate(e).getTime():n=e,n}Py.prototype.setReferenceMinimumMaximum=function(e,t,n){this._referenceMinimum[n]=_w(e,n),this._referenceMaximum[n]=_w(t,n)};function lIe(e,t){let n=e.tilePropertyName;if(c(n)){let i=_w(t[n],n);return c(i)?(e._maximum=Math.max(i,e._maximum),e._minimum=Math.min(i,e._minimum),i):(e.tilePropertyName=void 0,i)}}var Ew=[new J(.1,.1,.1,1),new J(.153,.278,.878,1),new J(.827,.231,.49,1),new J(.827,.188,.22,1),new J(1,.592,.259,1),new J(1,.843,0,1)];Py.prototype.colorize=function(e,t){let n=this.tilePropertyName;if(!c(n)||!e.contentAvailable||e._selectedFrame!==t.frameNumber)return;let i=lIe(this,e),o=this._previousMinimum,r=this._previousMaximum;if(o===Number.MAX_VALUE||r===-Number.MAX_VALUE)return;let a=r-o+S.EPSILON7,A=S.clamp(i-o,0,a)/a,l=Ew.length-1,d=A*l,m=Math.floor(d),p=Math.ceil(d),g=d-m,h=Ew[m],C=Ew[p],_=J.clone(J.WHITE);_.red=S.lerp(h.red,C.red,g),_.green=S.lerp(h.green,C.green,g),_.blue=S.lerp(h.blue,C.blue,g),e._debugColor=_};Py.prototype.resetMinimumMaximum=function(){let e=this.tilePropertyName;if(c(e)){let t=this._referenceMinimum[e],n=this._referenceMaximum[e],i=c(t)&&c(n);this._previousMinimum=i?t:this._minimum,this._previousMaximum=i?n:this._maximum,this._minimum=Number.MAX_VALUE,this._maximum=-Number.MAX_VALUE}};var f9=Py;function Om(){this.selected=0,this.visited=0,this.numberOfCommands=0,this.numberOfAttemptedRequests=0,this.numberOfPendingRequests=0,this.numberOfTilesProcessing=0,this.numberOfTilesWithContentReady=0,this.numberOfTilesTotal=0,this.numberOfLoadedTilesTotal=0,this.numberOfFeaturesSelected=0,this.numberOfFeaturesLoaded=0,this.numberOfPointsSelected=0,this.numberOfPointsLoaded=0,this.numberOfTrianglesSelected=0,this.numberOfTilesStyled=0,this.numberOfFeaturesStyled=0,this.numberOfTilesCulledWithChildrenUnion=0,this.geometryByteLength=0,this.texturesByteLength=0,this.texturesReferenceCounterById={},this.batchTableByteLength=0}Om.prototype.clear=function(){this.selected=0,this.visited=0,this.numberOfCommands=0,this.numberOfAttemptedRequests=0,this.numberOfFeaturesSelected=0,this.numberOfPointsSelected=0,this.numberOfTrianglesSelected=0,this.numberOfTilesStyled=0,this.numberOfFeaturesStyled=0,this.numberOfTilesCulledWithChildrenUnion=0};Om.prototype.incrementSelectionCounts=function(e){this.numberOfFeaturesSelected+=e.featuresLength,this.numberOfPointsSelected+=e.pointsLength,this.numberOfTrianglesSelected+=e.trianglesLength;let t=e.innerContents;if(c(t)){let n=t.length;for(let i=0;i<n;++i)this.incrementSelectionCounts(t[i])}};Om.prototype.incrementLoadCounts=function(e){if(this.numberOfFeaturesLoaded+=e.featuresLength,this.numberOfPointsLoaded+=e.pointsLength,this.geometryByteLength+=e.geometryByteLength,this.batchTableByteLength+=e.batchTableByteLength,!(e instanceof NA))this.texturesByteLength+=e.texturesByteLength;else{let n=e.getTextureIds();for(let i of n){let o=this.texturesReferenceCounterById[i]??0;if(o===0){let r=e.getTextureByteLengthById(i);this.texturesByteLength+=r}this.texturesReferenceCounterById[i]=o+1}}let t=e.innerContents;if(c(t)){let n=t.length;for(let i=0;i<n;++i)this.incrementLoadCounts(t[i])}};Om.prototype.decrementLoadCounts=function(e){if(this.numberOfFeaturesLoaded-=e.featuresLength,this.numberOfPointsLoaded-=e.pointsLength,this.geometryByteLength-=e.geometryByteLength,this.batchTableByteLength-=e.batchTableByteLength,!(e instanceof NA))this.texturesByteLength-=e.texturesByteLength;else{let n=e.getTextureIds();for(let i of n){let o=this.texturesReferenceCounterById[i];if(o===1){delete this.texturesReferenceCounterById[i];let r=e.getTextureByteLengthById(i);this.texturesByteLength-=r}else this.texturesReferenceCounterById[i]=o-1}}let t=e.innerContents;if(c(t)){let n=t.length;for(let i=0;i<n;++i)this.decrementLoadCounts(t[i])}};Om.clone=function(e,t){t.selected=e.selected,t.visited=e.visited,t.numberOfCommands=e.numberOfCommands,t.numberOfAttemptedRequests=e.numberOfAttemptedRequests,t.numberOfPendingRequests=e.numberOfPendingRequests,t.numberOfTilesProcessing=e.numberOfTilesProcessing,t.numberOfTilesWithContentReady=e.numberOfTilesWithContentReady,t.numberOfTilesTotal=e.numberOfTilesTotal,t.numberOfFeaturesSelected=e.numberOfFeaturesSelected,t.numberOfFeaturesLoaded=e.numberOfFeaturesLoaded,t.numberOfPointsSelected=e.numberOfPointsSelected,t.numberOfPointsLoaded=e.numberOfPointsLoaded,t.numberOfTrianglesSelected=e.numberOfTrianglesSelected,t.numberOfTilesStyled=e.numberOfTilesStyled,t.numberOfFeaturesStyled=e.numberOfFeaturesStyled,t.numberOfTilesCulledWithChildrenUnion=e.numberOfTilesCulledWithChildrenUnion,t.geometryByteLength=e.geometryByteLength,t.texturesByteLength=e.texturesByteLength,t.texturesReferenceCounterById={...e.texturesReferenceCounterById},t.batchTableByteLength=e.batchTableByteLength};var km=Om;function wC(){this._style=void 0,this._styleDirty=!1,this._lastStyleTime=0}Object.defineProperties(wC.prototype,{style:{get:function(){return this._style},set:function(e){e!==this._style&&(this._style=e,this._styleDirty=!0)}}});wC.prototype.makeDirty=function(){this._styleDirty=!0};wC.prototype.resetDirty=function(){this._styleDirty=!1};wC.prototype.applyStyle=function(e){if(!c(e.root)||c(this._style)&&!this._style._ready)return;let t=this._styleDirty;t&&++this._lastStyleTime;let n=this._lastStyleTime,i=e._statistics,o=t?e._selectedTiles:e._selectedTilesToStyle,r=o.length;for(let a=0;a<r;++a){let s=o[a];if(s.lastStyleTime!==n){let A=s.content;s.lastStyleTime=n,A.applyStyle(this._style),i.numberOfFeaturesStyled+=A.featuresLength,++i.numberOfTilesStyled}}};var d9=wC;function uIe(e,t,n){let i=Gn(t,"3DTILES_implicit_tiling")?t.extensions["3DTILES_implicit_tiling"]:t.implicitTiling;this.baseResource=e,this.geometricError=t.geometricError,this.metadataSchema=n;let o=t.boundingVolume;if(!c(o.box)&&!c(o.region)&&!Gn(o,"3DTILES_bounding_volume_S2")&&!Gn(o,"3DTILES_bounding_volume_cylinder"))throw new ae("Only box, region, 3DTILES_bounding_volume_S2, and 3DTILES_bounding_volume_cylinder are supported for implicit tiling");this.boundingVolume=o,this.refine=t.refine,this.subtreeUriTemplate=new Ye({url:i.subtrees.uri}),this.contentUriTemplates=[],this.contentHeaders=[];let r=fIe(t);for(let a=0;a<r.length;a++){let s=r[a];this.contentHeaders.push(Re(s,!0));let A=new Ye({url:s.uri});this.contentUriTemplates.push(A)}this.contentCount=this.contentHeaders.length,this.tileHeader=dIe(t),this.subdivisionScheme=sr[i.subdivisionScheme],this.branchingFactor=sr.getBranchingFactor(this.subdivisionScheme),this.subtreeLevels=i.subtreeLevels,c(i.availableLevels)?this.availableLevels=i.availableLevels:this.availableLevels=i.maximumLevel+1}function fIe(e){if(Gn(e,"3DTILES_multiple_contents")){let t=e.extensions["3DTILES_multiple_contents"];return c(t.contents)?t.contents:t.content}return c(e.contents)?e.contents:c(e.content)?[e.content]:[]}function dIe(e){let t=Re(e,!0);return c(t.extensions)&&(delete t.extensions["3DTILES_implicit_tiling"],delete t.extensions["3DTILES_multiple_contents"],Object.keys(t.extensions).length===0&&delete t.extensions),delete t.implicitTiling,delete t.contents,delete t.content,t}var h9=uIe;var DC={};function m9(e){return e=(e^e<<8)&16711935,e=(e^e<<4)&252645135,e=(e^e<<2)&858993459,e=(e^e<<1)&1431655765,e}function Iw(e){return e=(e^e<<16)&50331903,e=(e^e<<8)&50393103,e=(e^e<<4)&51130563,e=(e^e<<2)&153391689,e}function p9(e){return e&=1431655765,e=(e^e>>1)&858993459,e=(e^e>>2)&252645135,e=(e^e>>4)&16711935,e=(e^e>>8)&65535,e}function yw(e){return e&=153391689,e=(e^e>>2)&51130563,e=(e^e>>4)&50393103,e=(e^e>>8)&4278190335,e=(e^e>>16)&1023,e}DC.encode2D=function(e,t){return(m9(e)|m9(t)<<1)>>>0};DC.decode2D=function(e,t){return c(t)||(t=new Array(2)),t[0]=p9(e),t[1]=p9(e>>1),t};DC.encode3D=function(e,t,n){return Iw(e)|Iw(t)<<1|Iw(n)<<2};DC.decode3D=function(e,t){return c(t)||(t=new Array(3)),t[0]=yw(e),t[1]=yw(e>>1),t[2]=yw(e>>2),t};var QC=DC;function Di(e){this.subdivisionScheme=e.subdivisionScheme,this.subtreeLevels=e.subtreeLevels,this.level=e.level,this.x=e.x,this.y=e.y,this.z=void 0,e.subdivisionScheme===sr.OCTREE&&(this.z=e.z)}Object.defineProperties(Di.prototype,{childIndex:{get:function(){let e=0;return e|=this.x&1,e|=(this.y&1)<<1,this.subdivisionScheme===sr.OCTREE&&(e|=(this.z&1)<<2),e}},mortonIndex:{get:function(){return this.subdivisionScheme===sr.OCTREE?QC.encode3D(this.x,this.y,this.z):QC.encode2D(this.x,this.y)}},tileIndex:{get:function(){let e=this.subdivisionScheme===sr.OCTREE?((1<<3*this.level)-1)/7:((1<<2*this.level)-1)/3,t=this.mortonIndex;return e+t}}});Di.prototype.getDescendantCoordinates=function(e){let t=this.level+e.level,n=(this.x<<e.level)+e.x,i=(this.y<<e.level)+e.y;if(this.subdivisionScheme===sr.OCTREE){let o=(this.z<<e.level)+e.z;return new Di({subdivisionScheme:this.subdivisionScheme,subtreeLevels:this.subtreeLevels,level:t,x:n,y:i,z:o})}return new Di({subdivisionScheme:this.subdivisionScheme,subtreeLevels:this.subtreeLevels,level:t,x:n,y:i})};Di.prototype.getAncestorCoordinates=function(e){let t=1<<e,n=this.level-e,i=Math.floor(this.x/t),o=Math.floor(this.y/t);if(this.subdivisionScheme===sr.OCTREE){let r=Math.floor(this.z/t);return new Di({subdivisionScheme:this.subdivisionScheme,subtreeLevels:this.subtreeLevels,level:n,x:i,y:o,z:r})}return new Di({subdivisionScheme:this.subdivisionScheme,subtreeLevels:this.subtreeLevels,level:n,x:i,y:o})};Di.prototype.getOffsetCoordinates=function(e){let t=e.level-this.level,n=1<<t,i=e.x%n,o=e.y%n;if(this.subdivisionScheme===sr.OCTREE){let r=e.z%n;return new Di({subdivisionScheme:this.subdivisionScheme,subtreeLevels:this.subtreeLevels,level:t,x:i,y:o,z:r})}return new Di({subdivisionScheme:this.subdivisionScheme,subtreeLevels:this.subtreeLevels,level:t,x:i,y:o})};Di.prototype.getChildCoordinates=function(e){let t=this.level+1,n=2*this.x+e%2,i=2*this.y+Math.floor(e/2)%2;if(this.subdivisionScheme===sr.OCTREE){let o=2*this.z+Math.floor(e/4)%2;return new Di({subdivisionScheme:this.subdivisionScheme,subtreeLevels:this.subtreeLevels,level:t,x:n,y:i,z:o})}return new Di({subdivisionScheme:this.subdivisionScheme,subtreeLevels:this.subtreeLevels,level:t,x:n,y:i})};Di.prototype.getSubtreeCoordinates=function(){return this.getAncestorCoordinates(this.level%this.subtreeLevels)};Di.prototype.getParentSubtreeCoordinates=function(){return this.getAncestorCoordinates(this.level%this.subtreeLevels+this.subtreeLevels)};Di.prototype.isAncestor=function(e){let t=e.level-this.level;if(t<=0)return!1;let n=e.x>>t,i=e.y>>t,o=this.x===n,r=this.y===i;if(this.subdivisionScheme===sr.OCTREE){let a=e.z>>t,s=this.z===a;return o&&r&&s}return o&&r};Di.prototype.isEqual=function(e){return this.subdivisionScheme===e.subdivisionScheme&&this.subtreeLevels===e.subtreeLevels&&this.level===e.level&&this.x===e.x&&this.y===e.y&&(this.subdivisionScheme===sr.OCTREE?this.z===e.z:!0)};Di.prototype.isImplicitTilesetRoot=function(){return this.level===0};Di.prototype.isSubtreeRoot=function(){return this.level%this.subtreeLevels===0};Di.prototype.isBottomOfSubtree=function(){return this.level%this.subtreeLevels===this.subtreeLevels-1};Di.prototype.getTemplateValues=function(){let e={level:this.level,x:this.x,y:this.y};return this.subdivisionScheme===sr.OCTREE&&(e.z=this.z),e};var g9=[0,0,0];Di.fromMortonIndex=function(e,t,n,i){let o;return e===sr.OCTREE?(o=QC.decode3D(i,g9),new Di({subdivisionScheme:e,subtreeLevels:t,level:n,x:o[0],y:o[1],z:o[2]})):(o=QC.decode2D(i,g9),new Di({subdivisionScheme:e,subtreeLevels:t,level:n,x:o[0],y:o[1]}))};Di.fromTileIndex=function(e,t,n){let i,o,r;return e===sr.OCTREE?(i=Math.floor(S.log2(7*n+1)/3),o=((1<<3*i)-1)/7,r=n-o):(i=Math.floor(S.log2(3*n+1)/2),o=((1<<2*i)-1)/3,r=n-o),Di.fromMortonIndex(e,t,i,r)};var C9=Di;function nu(){}nu.selectTiles=function(e,t){be.throwInstantiationError()};nu.sortChildrenByDistanceToCamera=function(e,t){return t._distanceToCamera===0&&e._distanceToCamera===0?t._centerZDepth-e._centerZDepth:t._distanceToCamera-e._distanceToCamera};nu.canTraverse=function(e){return e.children.length===0?!1:e.hasTilesetContent||e.hasImplicitContent?!e.contentExpired:e._screenSpaceError>e.tileset.memoryAdjustedScreenSpaceError};nu.selectTile=function(e,t){if(e.contentVisibility(t)===bt.OUTSIDE)return;e._wasSelectedLastFrame=!0;let{content:n,tileset:i}=e;n.featurePropertiesDirty?(n.featurePropertiesDirty=!1,e.lastStyleTime=0,i._selectedTilesToStyle.push(e)):e._selectedFrame<t.frameNumber-1&&(i._selectedTilesToStyle.push(e),e._wasSelectedLastFrame=!1),e._selectedFrame=t.frameNumber,i._selectedTiles.push(e)};nu.visitTile=function(e,t){++e.tileset._statistics.visited,e._visitedFrame=t.frameNumber};nu.touchTile=function(e,t){e._touchedFrame!==t.frameNumber&&(e.tileset._cache.touch(e),e._touchedFrame=t.frameNumber)};nu.loadTile=function(e,t){let{tileset:n}=e;if(e._requestedFrame===t.frameNumber||!e.hasUnloadedRenderableContent&&!e.contentExpired||!hIe(e,t))return;let i=t.camera.timeSinceMoved<n.foveatedTimeDelay;e.priorityDeferred&&i||(e._requestedFrame=t.frameNumber,n._requestedTiles.push(e))};function hIe(e,t){let{tileset:n}=e;if(!n._cullRequestsWhileMoving)return!0;let{positionWCDeltaMagnitude:i,positionWCDeltaMagnitudeLastFrame:o}=t.camera,r=i!==0?i:o,a=Math.max(e.boundingSphere.radius*2,1);return n.cullRequestsWhileMovingMultiplier*r/a<1}nu.updateTile=function(e,t){E9(e,t),e.updateExpiration(),e._wasMinPriorityChild=!1,e._priorityHolder=e,gIe(e),e._shouldSelect=!1,e._finalResolution=!0};function E9(e,t){if(e.updateVisibility(t),!e.isVisible)return;let n=e.children.length>0;if((e.hasTilesetContent||e.hasImplicitContent)&&n){let r=e.children[0];E9(r,t),e._visible=r._visible;return}if(mIe(e,t)){e._visible=!1;return}let i=e.refine===oo.REPLACE,o=e._optimChildrenWithinParent===Jl.USE_OPTIMIZATION;if(i&&o&&n&&!pIe(e,t)){++e.tileset._statistics.numberOfTilesCulledWithChildrenUnion,e._visible=!1;return}}function mIe(e,t){let{parent:n,tileset:i}=e;return!c(n)||n.hasTilesetContent||n.hasImplicitContent||n.refine!==oo.ADD?!1:e.getScreenSpaceError(t,!0)<=i.memoryAdjustedScreenSpaceError}function pIe(e,t){let n=!1,i=e.children;for(let o=0;o<i.length;++o){let r=i[o];r.updateVisibility(t),n=n||r.isVisible}return n}function gIe(e){let t=e.tileset._minimumPriority,n=e.tileset._maximumPriority,i=e._priorityHolder;n.distance=Math.max(i._distanceToCamera,n.distance),t.distance=Math.min(i._distanceToCamera,t.distance),n.depth=Math.max(e._depth,n.depth),t.depth=Math.min(e._depth,t.depth),n.foveatedFactor=Math.max(i._foveatedFactor,n.foveatedFactor),t.foveatedFactor=Math.min(i._foveatedFactor,t.foveatedFactor),n.reverseScreenSpaceError=Math.max(e._priorityReverseScreenSpaceError,n.reverseScreenSpaceError),t.reverseScreenSpaceError=Math.min(e._priorityReverseScreenSpaceError,t.reverseScreenSpaceError)}var ra=nu;function _9(){}var RC={stack:new Ba,stackMaximumLength:0};_9.selectTiles=function(e,t){e._selectedTiles.length=0,e._requestedTiles.length=0,e.hasMixedContent=!1;let n=!0,i=e.root;if(i.updateVisibility(t),!i.isVisible)return n;let{touchTile:o,visitTile:r}=ra,a=RC.stack;for(a.push(i);a.length>0;){RC.stackMaximumLength=Math.max(RC.stackMaximumLength,a.length);let s=a.pop(),A=s.refine===oo.ADD,l=s.refine===oo.REPLACE,d=CIe(s);d&&EIe(s,a,t),(A||l&&!d)&&(_Ie(e,s),o(s,t),IIe(s,t),s.hasRenderableContent&&!s.contentAvailable&&(n=!1)),r(s,t)}return RC.stack.trim(RC.stackMaximumLength),n};function CIe(e){return e.children.length===0?!1:e.hasTilesetContent||e.hasImplicitContent?!e.contentExpired:(e.hasEmptyContent,!0)}function EIe(e,t,n){let{children:i}=e;for(let o=0;o<i.length;++o){let r=i[o];r.updateVisibility(n),r.isVisible&&t.push(r)}}function _Ie(e,t){(t.hasUnloadedRenderableContent||t.contentExpired)&&(t._priority=0,e._requestedTiles.push(t))}function IIe(e,t){e.contentAvailable&&e.contentVisibility(t)!==bt.OUTSIDE&&e.tileset._selectedTiles.push(e)}var I9=_9;function y9(){}var vC={stack:new Ba,stackMaximumLength:0},MC={stack:new Ba,stackMaximumLength:0};y9.selectTiles=function(e,t){if(e._requestedTiles.length=0,e.debugFreezeFrame)return;e._selectedTiles.length=0,e._selectedTilesToStyle.length=0,e._emptyTiles.length=0,e.hasMixedContent=!1;let n=e.root;if(ra.updateTile(n,t),!n.isVisible||n.getScreenSpaceError(t,!0)<=e.memoryAdjustedScreenSpaceError)return;bIe(n,t),vC.stack.trim(vC.stackMaximumLength),MC.stack.trim(MC.stackMaximumLength);let i=e._requestedTiles;for(let o=0;o<i.length;++o)i[o].updatePriority()};function bw(e,t){e.contentAvailable&&ra.selectTile(e,t)}function yIe(e,t,n){let i=e.refine===oo.REPLACE,{tileset:o,children:r}=e,{updateTile:a,loadTile:s,touchTile:A}=ra;for(let h=0;h<r.length;++h)a(r[h],n);r.sort(ra.sortChildrenByDistanceToCamera);let l=i&&e.hasRenderableContent,d=!0,m=!1,p=-1,g=Number.MAX_VALUE;for(let h=0;h<r.length;++h){let C=r[h];if(C.isVisible?(t.push(C),C._foveatedFactor<g&&(p=h,g=C._foveatedFactor),m=!0):(l||o.loadSiblings)&&(C._foveatedFactor<g&&(p=h,g=C._foveatedFactor),s(C,n),A(C,n)),l){let _;C._inRequestVolume?C.hasRenderableContent?_=C.contentAvailable:_=BIe(C,n):_=!1,d=d&&_}}if(m||(d=!1),p!==-1&&i){let h=r[p];h._wasMinPriorityChild=!0;let C=(e._wasMinPriorityChild||e===o.root)&&g<=e._priorityHolder._foveatedFactor?e._priorityHolder:e;C._foveatedFactor=Math.min(h._foveatedFactor,C._foveatedFactor),C._distanceToCamera=Math.min(h._distanceToCamera,C._distanceToCamera);for(let _=0;_<r.length;++_)r[_]._priorityHolder=C}return d}function bIe(e,t){let{tileset:n}=e,{canTraverse:i,loadTile:o,visitTile:r,touchTile:a}=ra,s=vC.stack;for(s.push(e);s.length>0;){vC.stackMaximumLength=Math.max(vC.stackMaximumLength,s.length);let A=s.pop(),l=A.parent,d=!c(l)||l._refines;A._refines=i(A)?yIe(A,s,t)&&d:!1;let m=!A._refines&&d;A.hasRenderableContent?A.refine===oo.ADD?(bw(A,t),o(A,t)):A.refine===oo.REPLACE&&(o(A,t),m&&bw(A,t)):(n._emptyTiles.push(A),o(A,t),m&&bw(A,t)),r(A,t),a(A,t)}}function BIe(e,t){let{canTraverse:n,updateTile:i,loadTile:o,touchTile:r}=ra,a=!0,s=MC.stack;for(s.push(e);s.length>0;){MC.stackMaximumLength=Math.max(MC.stackMaximumLength,s.length);let A=s.pop(),l=A.children,d=l.length,m=!A.hasRenderableContent&&n(A);if(!m&&!A.contentAvailable&&(a=!1),i(A,t),A.isVisible||(o(A,t),r(A,t)),m)for(let p=0;p<d;++p){let g=l[p];s.push(g)}}return e.hasEmptyContent||a}var b9=y9;function B9(){}var PC={stack:new Ba,stackMaximumLength:0},NC={stack:new Ba,stackMaximumLength:0},iu={stack:new Ba,stackMaximumLength:0,ancestorStack:new Ba,ancestorStackMaximumLength:0},xIe=2;B9.selectTiles=function(e,t){if(e._requestedTiles.length=0,e.debugFreezeFrame)return;e._selectedTiles.length=0,e._selectedTilesToStyle.length=0,e._emptyTiles.length=0,e.hasMixedContent=!1;let n=e.root;if(ra.updateTile(n,t),!n.isVisible||n.getScreenSpaceError(t,!0)<=e.memoryAdjustedScreenSpaceError)return;RIe(n,t),vIe(n,t),PC.stack.trim(PC.stackMaximumLength),NC.stack.trim(NC.stackMaximumLength),iu.stack.trim(iu.stackMaximumLength),iu.ancestorStack.trim(iu.ancestorStackMaximumLength);let i=e._requestedTiles;for(let o=0;o<i.length;++o)i[o].updatePriority()};function TIe(e,t){let{updateTile:n,touchTile:i,selectTile:o}=ra,r=NC.stack;for(r.push(e);r.length>0;){NC.stackMaximumLength=Math.max(NC.stackMaximumLength,r.length);let s=r.pop().children;for(let A=0;A<s.length;++A){let l=s[A];l.isVisible&&(l.contentAvailable?(n(l,t),i(l,t),o(l,t)):l._depth-e._depth<xIe&&r.push(l))}}}function Ny(e,t){let n=e.contentAvailable?e:e._ancestorWithContentAvailable;c(n)?n._shouldSelect=!0:TIe(e,t)}function SIe(e,t){e._ancestorWithContent=void 0,e._ancestorWithContentAvailable=void 0;let{parent:n}=e;if(!c(n))return;let i=!n.hasUnloadedRenderableContent||n._requestedFrame===t.frameNumber;e._ancestorWithContent=i?n:n._ancestorWithContent,e._ancestorWithContentAvailable=n.contentAvailable?n:n._ancestorWithContentAvailable}function wIe(e,t){let n=t._ancestorWithContent;return!e.immediatelyLoadDesiredLevelOfDetail&&(t._priorityProgressiveResolutionScreenSpaceErrorLeaf||c(n)&&t._screenSpaceError<n._screenSpaceError/e.skipScreenSpaceErrorFactor&&t._depth>n._depth+e.skipLevels)}function DIe(e,t,n){let{tileset:i,children:o}=e,{updateTile:r,loadTile:a,touchTile:s}=ra;for(let l=0;l<o.length;++l)r(o[l],n);o.sort(ra.sortChildrenByDistanceToCamera);let A=!1;for(let l=0;l<o.length;++l){let d=o[l];d.isVisible?(t.push(d),A=!0):i.loadSiblings&&(a(d,n),s(d,n))}return A}function QIe(e,t){let{tileset:n}=e;return n.immediatelyLoadDesiredLevelOfDetail?!1:c(e._ancestorWithContent)?e._screenSpaceError===0?e.parent._screenSpaceError>t:e._screenSpaceError>t:!0}function RIe(e,t){let{tileset:n}=e,i=n.immediatelyLoadDesiredLevelOfDetail?Number.MAX_VALUE:Math.max(n.baseScreenSpaceError,n.memoryAdjustedScreenSpaceError),{canTraverse:o,loadTile:r,visitTile:a,touchTile:s}=ra,A=PC.stack;for(A.push(e);A.length>0;){PC.stackMaximumLength=Math.max(PC.stackMaximumLength,A.length);let l=A.pop();SIe(l,t);let d=l.parent,m=!c(d)||d._refines;l._refines=o(l)?DIe(l,A,t)&&m:!1;let p=!l._refines&&m;l.hasRenderableContent?l.refine===oo.ADD?(Ny(l,t),r(l,t)):l.refine===oo.REPLACE&&(QIe(l,i)?(r(l,t),p&&Ny(l,t)):p?(Ny(l,t),r(l,t)):wIe(n,l)&&r(l,t)):(n._emptyTiles.push(l),r(l,t),p&&Ny(l,t)),a(l,t),s(l,t)}}function vIe(e,t){let{selectTile:n,canTraverse:i}=ra,{stack:o,ancestorStack:r}=iu,a;for(o.push(e);o.length>0||r.length>0;){if(iu.stackMaximumLength=Math.max(iu.stackMaximumLength,o.length),iu.ancestorStackMaximumLength=Math.max(iu.ancestorStackMaximumLength,r.length),r.length>0){let l=r.peek();if(l._stackLength===o.length){r.pop(),l!==a&&(l._finalResolution=!1),n(l,t);continue}}let s=o.pop();if(!c(s))continue;let A=i(s);if(s._shouldSelect)if(s.refine===oo.ADD)n(s,t);else{if(s._selectionDepth=r.length,s._selectionDepth>0&&(s.tileset.hasMixedContent=!0),a=s,!A){n(s,t);continue}r.push(s),s._stackLength=o.length}if(A){let l=s.children;for(let d=0;d<l.length;++d){let m=l[d];m.isVisible&&o.push(m)}}}}var x9=B9;function Jo(){this._layers=[],this.layerAdded=new Le,this.layerRemoved=new Le,this.layerMoved=new Le,this.layerShownOrHidden=new Le}Object.defineProperties(Jo.prototype,{length:{get:function(){return this._layers.length}}});Jo.prototype.add=function(e,t){c(t)?this._layers.splice(t,0,e):(t=this._layers.length,this._layers.push(e)),this._update(),this.layerAdded.raiseEvent(e,t);let i=e.readyEvent.addEventListener(()=>{this.layerShownOrHidden.raiseEvent(e,e._layerIndex,e.show),i()})};Jo.prototype.addImageryProvider=function(e,t){let n=new ns(e);return this.add(n,t),n};Jo.prototype.remove=function(e,t){t=t??!0;let n=this._layers.indexOf(e);return n!==-1?(this._layers.splice(n,1),this._update(),this.layerRemoved.raiseEvent(e,n),t&&e.destroy(),!0):!1};Jo.prototype.removeAll=function(e){e=e??!0;let t=this._layers;for(let n=0,i=t.length;n<i;n++){let o=t[n];this.layerRemoved.raiseEvent(o,n),e&&o.destroy()}this._layers=[]};Jo.prototype.contains=function(e){return this.indexOf(e)!==-1};Jo.prototype.indexOf=function(e){return this._layers.indexOf(e)};Jo.prototype.get=function(e){return this._layers[e]};function Ly(e,t){return e.indexOf(t)}function T9(e,t,n){let i=e._layers;if(t=S.clamp(t,0,i.length-1),n=S.clamp(n,0,i.length-1),t===n)return;let o=i[t];i[t]=i[n],i[n]=o,e._update(),e.layerMoved.raiseEvent(o,n,t)}Jo.prototype.raise=function(e){let t=Ly(this._layers,e);T9(this,t,t+1)};Jo.prototype.lower=function(e){let t=Ly(this._layers,e);T9(this,t,t-1)};Jo.prototype.raiseToTop=function(e){let t=Ly(this._layers,e);t!==this._layers.length-1&&(this._layers.splice(t,1),this._layers.push(e),this._update(),this.layerMoved.raiseEvent(e,this._layers.length-1,t))};Jo.prototype.lowerToBottom=function(e){let t=Ly(this._layers,e);t!==0&&(this._layers.splice(t,1),this._layers.splice(0,0,e),this._update(),this.layerMoved.raiseEvent(e,0,t))};var MIe=new de;function S9(e,t,n,i){let o=e.globe._surface._tilesToRender,r;for(let s=0;!c(r)&&s<o.length;++s){let A=o[s];de.contains(A.rectangle,t)&&(r=A)}if(!c(r))return;let a=r.data.imagery;for(let s=a.length-1;s>=0;--s){let A=a[s],l=A.readyImagery;if(!c(l)||!l.imageryLayer.ready)continue;let d=l.imageryLayer.imageryProvider;if(n&&!c(d.pickFeatures)||!de.contains(l.rectangle,t))continue;let m=MIe,p=1/1024;m.west=S.lerp(r.rectangle.west,r.rectangle.east,A.textureCoordinateRectangle.x-p),m.east=S.lerp(r.rectangle.west,r.rectangle.east,A.textureCoordinateRectangle.z+p),m.south=S.lerp(r.rectangle.south,r.rectangle.north,A.textureCoordinateRectangle.y-p),m.north=S.lerp(r.rectangle.south,r.rectangle.north,A.textureCoordinateRectangle.w+p),de.contains(m,t)&&i(l)}}Jo.prototype.pickImageryLayers=function(e,t){let n=t.globe.pick(e,t);if(!c(n))return;let i=t.ellipsoid.cartesianToCartographic(n),o=[];if(S9(t,i,!1,function(r){o.push(r.imageryLayer)}),o.length!==0)return o};Jo.prototype.pickImageryLayerFeatures=function(e,t){let n=t.globe.pick(e,t);if(!c(n))return;let i=t.ellipsoid.cartesianToCartographic(n),o=[],r=[];if(S9(t,i,!0,function(a){if(!a.imageryLayer.ready)return;let A=a.imageryLayer.imageryProvider.pickFeatures(a.x,a.y,a.level,i.longitude,i.latitude);c(A)&&(o.push(A),r.push(a.imageryLayer))}),o.length!==0)return Promise.all(o).then(function(a){let s=[];for(let A=0;A<a.length;++A){let l=a[A],d=r[A];if(c(l)&&l.length>0)for(let m=0;m<l.length;++m){let p=l[m];p.imageryLayer=d,c(p.position)||(p.position=i),s.push(p)}}return s})};Jo.prototype.queueReprojectionCommands=function(e){let t=this._layers;for(let n=0,i=t.length;n<i;++n)t[n].queueReprojectionCommands(e)};Jo.prototype.cancelReprojections=function(){let e=this._layers;for(let t=0,n=e.length;t<n;++t)e[t].cancelReprojections()};Jo.prototype.isDestroyed=function(){return!1};Jo.prototype.destroy=function(){return this.removeAll(!0),me(this)};Jo.prototype._update=function(){let e=!0,t=this._layers,n,i,o,r;for(o=0,r=t.length;o<r;++o)i=t[o],i._layerIndex=o,i.show?(i._isBaseLayer=e,e=!1):i._isBaseLayer=!1,i.show!==i._show&&(c(i._show)&&(c(n)||(n=[]),n.push(i)),i._show=i.show);if(c(n))for(o=0,r=n.length;o<r;++o)i=n[o],this.layerShownOrHidden.raiseEvent(i,i._layerIndex,i.show)};var w9=Jo;function _i(e){e=e??G.EMPTY_OBJECT,this._url=void 0,this._basePath=void 0,this._root=void 0,this._resource=void 0,this._asset=void 0,this._properties=void 0,this._geometricError=void 0,this._scaledGeometricError=void 0,this._extensionsUsed=void 0,this._extensions=void 0,this._modelUpAxis=void 0,this._modelForwardAxis=void 0,this._cache=new u9,this._processingQueue=[],this._selectedTiles=[],this._emptyTiles=[],this._requestedTiles=[],this._selectedTilesToStyle=[],this._loadTimestamp=void 0,this._timeSinceLoad=0,this._updatedVisibilityFrame=0,this._updatedModelMatrixFrame=0,this._modelMatrixChanged=!1,this._previousModelMatrix=void 0,this._extras=void 0,this._credits=void 0,this._showCreditsOnScreen=e.showCreditsOnScreen??!1,this._cullWithChildrenBounds=e.cullWithChildrenBounds??!0,this._allTilesAdditive=!0,this._hasMixedContent=!1,this._stencilClearCommand=void 0,this._backfaceCommands=new Ba,this._maximumScreenSpaceError=e.maximumScreenSpaceError??16,this._memoryAdjustedScreenSpaceError=this._maximumScreenSpaceError,this._cacheBytes=e.cacheBytes??512*1024*1024;let t=e.maximumCacheOverflowBytes??512*1024*1024;this._maximumCacheOverflowBytes=t,this._styleEngine=new d9,this._styleApplied=!1,this._modelMatrix=c(e.modelMatrix)?Q.clone(e.modelMatrix):Q.clone(Q.IDENTITY),this._addHeightCallbacks=[],this._statistics=new km,this._statisticsLast=new km,this._statisticsPerPass=new Array(Ds.NUMBER_OF_PASSES);for(let o=0;o<Ds.NUMBER_OF_PASSES;++o)this._statisticsPerPass[o]=new km;this._requestedTilesInFlight=[],this._maximumPriority={foveatedFactor:-Number.MAX_VALUE,depth:-Number.MAX_VALUE,distance:-Number.MAX_VALUE,reverseScreenSpaceError:-Number.MAX_VALUE},this._minimumPriority={foveatedFactor:Number.MAX_VALUE,depth:Number.MAX_VALUE,distance:Number.MAX_VALUE,reverseScreenSpaceError:Number.MAX_VALUE},this._heatmap=new f9(e.debugHeatmapTilePropertyName),this.cullRequestsWhileMoving=e.cullRequestsWhileMoving??!0,this._cullRequestsWhileMoving=!1,this.cullRequestsWhileMovingMultiplier=e.cullRequestsWhileMovingMultiplier??60,this.progressiveResolutionHeightFraction=S.clamp(e.progressiveResolutionHeightFraction??.3,0,.5),this.preferLeaves=e.preferLeaves??!1,this._tilesLoaded=!1,this._initialTilesLoaded=!1,this._tileDebugLabels=void 0,this._classificationType=e.classificationType,this._heightReference=e.heightReference,this._scene=e.scene,this._ellipsoid=e.ellipsoid??pe.WGS84,this._initialClippingPlanesOriginMatrix=Q.IDENTITY,this._clippingPlanesOriginMatrix=void 0,this._clippingPlanesOriginMatrixDirty=!0,this._vectorClassificationOnly=e.vectorClassificationOnly??!1,this._vectorKeepDecodedPositions=e.vectorKeepDecodedPositions??!1,this._imageryLayers=new w9(this),this._imageryLayersModificationCounter=0,this._imageryLayersListener=()=>{this._imageryLayersModificationCounter++},this.imageryLayers.layerAdded.addEventListener(this._imageryLayersListener),this.imageryLayers.layerRemoved.addEventListener(this._imageryLayersListener),this.imageryLayers.layerMoved.addEventListener(this._imageryLayersListener),this.imageryLayers.layerShownOrHidden.addEventListener(this._imageryLayersListener),this._asynchronouslyLoadImagery=e.asynchronouslyLoadImagery??!1,this.preloadWhenHidden=e.preloadWhenHidden??!1,this.preloadFlightDestinations=e.preloadFlightDestinations??!0,this._pass=void 0,this.dynamicScreenSpaceError=e.dynamicScreenSpaceError??!0,this.foveatedScreenSpaceError=e.foveatedScreenSpaceError??!0,this._foveatedConeSize=e.foveatedConeSize??.1,this._foveatedMinimumScreenSpaceErrorRelaxation=e.foveatedMinimumScreenSpaceErrorRelaxation??0,this.foveatedInterpolationCallback=e.foveatedInterpolationCallback??S.lerp,this.foveatedTimeDelay=e.foveatedTimeDelay??.2,this.dynamicScreenSpaceErrorDensity=e.dynamicScreenSpaceErrorDensity??2e-4,this.dynamicScreenSpaceErrorFactor=e.dynamicScreenSpaceErrorFactor??24,this.dynamicScreenSpaceErrorHeightFalloff=e.dynamicScreenSpaceErrorHeightFalloff??.25,this._dynamicScreenSpaceErrorComputedDensity=0,this.shadows=e.shadows??Yo.ENABLED,this.show=e.show??!0,this.colorBlendMode=Mh.HIGHLIGHT,this.colorBlendAmount=.5,this._pointCloudShading=new FI(e.pointCloudShading),this._pointCloudEyeDomeLighting=new LI,this.loadProgress=new Le,this.allTilesLoaded=new Le,this.initialTilesLoaded=new Le,this.tileLoad=new Le,this.tileUnload=new Le,this.tileFailed=new Le,this.tileVisible=new Le,this.skipLevelOfDetail=e.skipLevelOfDetail??!1,this._disableSkipLevelOfDetail=!1,this.baseScreenSpaceError=e.baseScreenSpaceError??1024,this.skipScreenSpaceErrorFactor=e.skipScreenSpaceErrorFactor??16,this.skipLevels=e.skipLevels??1,this.immediatelyLoadDesiredLevelOfDetail=e.immediatelyLoadDesiredLevelOfDetail??!1,this.loadSiblings=e.loadSiblings??!1,this._clippingPlanes=void 0,c(e.clippingPlanes)&&Yc.setOwner(e.clippingPlanes,this,"_clippingPlanes"),this._clippingPolygons=void 0,c(e.clippingPolygons)&&ef.setOwner(e.clippingPolygons,this,"_clippingPolygons"),c(e.imageBasedLighting)?(this._imageBasedLighting=e.imageBasedLighting,this._shouldDestroyImageBasedLighting=!1):(this._imageBasedLighting=new O_,this._shouldDestroyImageBasedLighting=!0),this._environmentMapManager=new Wh(e.environmentMapOptions),this.lightColor=e.lightColor,this.backFaceCulling=e.backFaceCulling??!0,this._enableShowOutline=e.enableShowOutline??!0,this.showOutline=e.showOutline??!0,this.outlineColor=e.outlineColor??J.BLACK,this.splitDirection=e.splitDirection??qa.NONE,this.enableCollision=e.enableCollision??!1,this._projectTo2D=e.projectTo2D??!1,this._enablePick=e.enablePick??!1,this.debugFreezeFrame=e.debugFreezeFrame??!1,this.debugColorizeTiles=e.debugColorizeTiles??!1,this._enableDebugWireframe=e.enableDebugWireframe??!1,this.debugWireframe=e.debugWireframe??!1,this.debugWireframe===!0&&this._enableDebugWireframe===!1&&Nn("tileset-debug-wireframe-ignored","enableDebugWireframe must be set to true in the Cesium3DTileset constructor, otherwise debugWireframe will be ignored."),this.debugShowBoundingVolume=e.debugShowBoundingVolume??!1,this.debugShowContentBoundingVolume=e.debugShowContentBoundingVolume??!1,this.debugShowViewerRequestVolume=e.debugShowViewerRequestVolume??!1,this._tileDebugLabels=void 0,this.debugPickedTileLabelOnly=!1,this.debugPickedTile=void 0,this.debugPickPosition=void 0,this.debugShowGeometricError=e.debugShowGeometricError??!1,this.debugShowRenderingStatistics=e.debugShowRenderingStatistics??!1,this.debugShowMemoryUsage=e.debugShowMemoryUsage??!1,this.debugShowUrl=e.debugShowUrl??!1,this.examineVectorLinesFunction=void 0,this._metadataExtension=void 0,this._customShader=e.customShader;let n=e.featureIdLabel??"featureId_0";typeof n=="number"&&(n=`featureId_${n}`),this._featureIdLabel=n;let i=e.instanceFeatureIdLabel??"instanceFeatureId_0";typeof i=="number"&&(i=`instanceFeatureId_${i}`),this._instanceFeatureIdLabel=i}Object.defineProperties(_i.prototype,{isCesium3DTileset:{get:function(){return!0}},asset:{get:function(){return this._asset}},extensions:{get:function(){return this._extensions}},clippingPlanes:{get:function(){return this._clippingPlanes},set:function(e){Yc.setOwner(e,this,"_clippingPlanes")}},clippingPolygons:{get:function(){return this._clippingPolygons},set:function(e){ef.setOwner(e,this,"_clippingPolygons")}},imageryLayers:{get:function(){return this._imageryLayers}},imageryLayersModificationCounter:{get:function(){return this._imageryLayersModificationCounter}},asynchronouslyLoadImagery:{get:function(){return this._asynchronouslyLoadImagery}},properties:{get:function(){return this._properties}},tilesLoaded:{get:function(){return this._tilesLoaded}},resource:{get:function(){return this._resource}},basePath:{get:function(){return Kr("Cesium3DTileset.basePath","Cesium3DTileset.basePath has been deprecated. All tiles are relative to the url of the tileset JSON file that contains them. Use the url property instead."),this._basePath}},style:{get:function(){return this._styleEngine.style},set:function(e){this._styleEngine.style=e}},customShader:{get:function(){return this._customShader},set:function(e){this._customShader=e}},hasMixedContent:{get:function(){return this._hasMixedContent},set:function(e){this._hasMixedContent=e}},isSkippingLevelOfDetail:{get:function(){return this.skipLevelOfDetail&&!c(this._classificationType)&&!this._disableSkipLevelOfDetail&&!this._allTilesAdditive}},metadataExtension:{get:function(){return this._metadataExtension}},metadata:{get:function(){if(c(this._metadataExtension))return this._metadataExtension.tileset}},schema:{get:function(){if(c(this._metadataExtension))return this._metadataExtension.schema}},maximumScreenSpaceError:{get:function(){return this._maximumScreenSpaceError},set:function(e){this._maximumScreenSpaceError=e,this._memoryAdjustedScreenSpaceError=e}},cacheBytes:{get:function(){return this._cacheBytes},set:function(e){this._cacheBytes=e}},maximumCacheOverflowBytes:{get:function(){return this._maximumCacheOverflowBytes},set:function(e){this._maximumCacheOverflowBytes=e}},memoryAdjustedScreenSpaceError:{get:function(){return this._memoryAdjustedScreenSpaceError}},pointCloudShading:{get:function(){return this._pointCloudShading},set:function(e){this._pointCloudShading=e}},root:{get:function(){return this._root}},boundingSphere:{get:function(){return this._root.updateTransform(this._modelMatrix),this._root.boundingSphere}},modelMatrix:{get:function(){return this._modelMatrix},set:function(e){this._modelMatrix=Q.clone(e,this._modelMatrix)}},timeSinceLoad:{get:function(){return this._timeSinceLoad}},totalMemoryUsageInBytes:{get:function(){let e=this._statistics;return e.texturesByteLength+e.geometryByteLength+e.batchTableByteLength}},clippingPlanesOriginMatrix:{get:function(){return c(this._clippingPlanesOriginMatrix)?(this._clippingPlanesOriginMatrixDirty&&(Q.multiply(this.root.computedTransform,this._initialClippingPlanesOriginMatrix,this._clippingPlanesOriginMatrix),this._clippingPlanesOriginMatrixDirty=!1),this._clippingPlanesOriginMatrix):Q.IDENTITY}},styleEngine:{get:function(){return this._styleEngine}},statistics:{get:function(){return this._statistics}},classificationType:{get:function(){return this._classificationType}},heightReference:{get:function(){return this._heightReference}},scene:{get:function(){return this._scene}},ellipsoid:{get:function(){return this._ellipsoid}},foveatedConeSize:{get:function(){return this._foveatedConeSize},set:function(e){this._foveatedConeSize=e}},foveatedMinimumScreenSpaceErrorRelaxation:{get:function(){return this._foveatedMinimumScreenSpaceErrorRelaxation},set:function(e){this._foveatedMinimumScreenSpaceErrorRelaxation=e}},extras:{get:function(){return this._extras}},imageBasedLighting:{get:function(){return this._imageBasedLighting},set:function(e){e!==this._imageBasedLighting&&(this._shouldDestroyImageBasedLighting&&!this._imageBasedLighting.isDestroyed()&&this._imageBasedLighting.destroy(),this._imageBasedLighting=e,this._shouldDestroyImageBasedLighting=!1)}},environmentMapManager:{get:function(){return this._environmentMapManager}},vectorClassificationOnly:{get:function(){return this._vectorClassificationOnly}},vectorKeepDecodedPositions:{get:function(){return this._vectorKeepDecodedPositions}},showCreditsOnScreen:{get:function(){return this._showCreditsOnScreen},set:function(e){this._showCreditsOnScreen=e,L9(this)}},featureIdLabel:{get:function(){return this._featureIdLabel},set:function(e){typeof e=="number"&&(e=`featureId_${e}`),this._featureIdLabel=e}},instanceFeatureIdLabel:{get:function(){return this._instanceFeatureIdLabel},set:function(e){typeof e=="number"&&(e=`instanceFeatureId_${e}`),this._instanceFeatureIdLabel=e}}});_i.fromIonAssetId=async function(e,t){let n=await vh.fromAssetId(e);return _i.fromUrl(n,t)};_i.fromUrl=async function(e,t){t=t??G.EMPTY_OBJECT;let n=Ye.createIfNeeded(e),i;n.extension==="json"?i=n.getBaseUri(!0):n.isDataUri&&(i="");let o=await _i.loadJson(n),r=await PIe(n,o),a=new _i(t);a._resource=n,a._url=n.url,a._basePath=i,a._metadataExtension=r,a._geometricError=o.geometricError,a._scaledGeometricError=o.geometricError;let s=o.asset;a._asset=s,a._extras=o.extras,L9(a);let A=c(o.asset.gltfUpAxis)?fi.fromName(o.asset.gltfUpAxis):fi.Y,l=t.modelUpAxis??A,d=t.modelForwardAxis??fi.X;a._properties=o.properties,a._extensionsUsed=o.extensionsUsed,a._extensions=o.extensions,a._modelUpAxis=l,a._modelForwardAxis=d,a._root=a.loadTileset(n,o);let p=a._root.createBoundingVolume(o.root.boundingVolume,Q.IDENTITY).boundingSphere.center,g=a._ellipsoid.cartesianToCartographic(p);return c(g)&&g.height>Bo._defaultMinTerrainHeight&&(a._initialClippingPlanesOriginMatrix=sn.eastNorthUpToFixedFrame(p)),a._clippingPlanesOriginMatrix=Q.clone(a._initialClippingPlanesOriginMatrix),a};_i.loadJson=function(e){return Ye.createIfNeeded(e).fetchJson()};_i.prototype.makeStyleDirty=function(){this._styleEngine.makeDirty()};_i.prototype.loadTileset=function(e,t,n){let i=t.asset;if(!c(i))throw new ae("Tileset must have an asset property.");if(i.version!=="0.0"&&i.version!=="1.0"&&i.version!=="1.1")throw new ae("The tileset must be 3D Tiles version 0.0, 1.0, or 1.1");c(t.extensionsRequired)&&_i.checkSupportedExtensions(t.extensionsRequired);let o=this._statistics,r=i.tilesetVersion;c(r)&&(this._basePath+=`?v=${r}`,e=e.clone(),e.setQueryParameters({v:r}));let a=D9(this,e,t.root,n);c(n)&&(n.children.push(a),a._depth=n._depth+1);let s=[];for(s.push(a);s.length>0;){let A=s.pop();++o.numberOfTilesTotal,this._allTilesAdditive=this._allTilesAdditive&&A.refine===oo.ADD;let l=A._header.children;if(c(l))for(let d=0;d<l.length;++d){let m=l[d],p=D9(this,e,m,A);A.children.push(p),p._depth=A._depth+1,s.push(p)}this._cullWithChildrenBounds&&c9.checkChildrenWithinParent(A)}return a};function D9(e,t,n,i){if(!(c(n.implicitTiling)||Gn(n,"3DTILES_implicit_tiling")))return new gw(e,t,n,i);let r=e.schema,a=new h9(t,n,r),s=new C9({subdivisionScheme:a.subdivisionScheme,subtreeLevels:a.subtreeLevels,level:0,x:0,y:0,z:0}),A=a.subtreeUriTemplate.getDerivedResource({templateValues:s.getTemplateValues()}).url,d=Re(n,!0);d.contents=[{uri:A}],delete d.content,delete d.extensions;let m=new gw(e,t,d,i);return m.implicitTileset=a,m.implicitCoordinates=s,m}async function PIe(e,t){let n=Gn(t,"3DTILES_metadata")?t.extensions["3DTILES_metadata"]:t,i;if(c(n.schemaUri))e=e.getDerivedResource({url:n.schemaUri}),i=hi.getSchemaLoader({resource:e});else if(c(n.schema))i=hi.getSchemaLoader({schema:n.schema});else return;await i.load();let o=new a9({schema:i.schema,metadataJson:n});return hi.unload(i),o}var Q9=new f,NIe=new ue,LIe=new Q,FIe=new f,OIe=new f,kIe=new f,UIe=new f;function zIe(e,t){let n,i,o,r,a,s=t.camera,A=e._root,l=A.contentBoundingVolume;if(l instanceof UA)n=f.normalize(s.positionWC,Q9),i=s.directionWC,o=s.positionCartographic.height,r=l.minimumHeight,a=l.maximumHeight;else{let C=Q.inverseTransformation(A.computedTransform,LIe),_=t.mapProjection.ellipsoid,I=l.boundingVolume,b=Q.multiplyByPoint(C,I.center,FIe);if(f.magnitude(b)>_.minimumRadius){let x=ue.fromCartesian(b,_,NIe);n=f.normalize(s.positionWC,Q9),i=s.directionWC,o=s.positionCartographic.height,r=0,a=x.height*2}else{let x=Q.multiplyByPoint(C,s.positionWC,OIe);if(n=f.UNIT_Z,i=Q.multiplyByPointAsVector(C,s.directionWC,kIe),i=f.normalize(i,i),o=x.z,l instanceof nA){let T=ne.getColumn(I.halfAxes,2,UIe),w=f.magnitude(T);r=b.z-w,a=b.z+w}else if(l instanceof Lm){let T=I.radius;r=b.z-T,a=b.z+T}}}let d=e.dynamicScreenSpaceErrorHeightFalloff,m=r+(a-r)*d,p=a,g=S.clamp((o-m)/(p-m),0,1),h=1-Math.abs(f.dot(i,n));h=h*(1-g),e._dynamicScreenSpaceErrorComputedDensity=e.dynamicScreenSpaceErrorDensity*h}function GIe(e,t){if(t.hasEmptyContent)return;let{statistics:n}=e,i=t.contentExpired,o=t.requestContent();c(o)&&(o.then(r=>{!c(r)||t.isDestroyed()||e.isDestroyed()||(e._processingQueue.push(t),++n.numberOfTilesProcessing)}).catch(r=>{M9(r,e,t)}),i&&(t.hasTilesetContent||t.hasImplicitContent?nye(e,t):(n.decrementLoadCounts(t.content),--n.numberOfTilesWithContentReady)),e._requestedTilesInFlight.push(t))}function v9(e,t){return e._priority-t._priority}_i.prototype.postPassesUpdate=function(e){c(this._root)&&(HIe(this,e),oye(this,e),this._cache.unloadTiles(this,N9),this._styleApplied&&this._styleEngine.resetDirty(),this._styleApplied=!1)};_i.prototype.prePassesUpdate=function(e){if(!c(this._root))return;KIe(this,e);let t=this._clippingPlanes;this._clippingPlanesOriginMatrixDirty=!0,c(t)&&t.enabled&&t.update(e);let n=this._clippingPolygons;c(n)&&n.enabled&&n.update(e),c(this._loadTimestamp)||(this._loadTimestamp=Ue.clone(e.time)),this._timeSinceLoad=Math.max(Ue.secondsDifference(e.time,this._loadTimestamp)*1e3,0),this.dynamicScreenSpaceError&&zIe(this,e),e.newFrame&&this._cache.reset()};function HIe(e,t){let n=e._requestedTilesInFlight,i=0;for(let o=0;o<n.length;++o){let r=n[o],a=t.frameNumber-r._touchedFrame>=1;if(r._contentState!==ro.LOADING){++i;continue}else if(a){r.cancelRequests(),++i;continue}i>0&&(n[o-i]=r)}n.length-=i}function VIe(e){let t=e._requestedTiles;t.sort(v9);for(let n=0;n<t.length;++n)GIe(e,t[n])}function M9(e,t,n){if(t.isDestroyed())return;let i;n.isDestroyed()||(i=n._contentResource.url);let o=c(e.message)?e.message:e.toString();t.tileFailed.numberOfListeners>0?t.tileFailed.raiseEvent({url:i,message:o}):(console.log(`A 3D tile failed to load: ${i}`),console.log(`Error: ${o}`),console.log(e.stack))}function jIe(e){let t=e._processingQueue,n=0;for(let i=0;i<t.length;++i){let o=t[i];if(o.isDestroyed()||o._contentState!==ro.PROCESSING){++n;continue}n>0&&(t[i-n]=o)}t.length-=n}var YIe=new ue,WIe=new ue,qIe=new f;function JIe(e,t,n){if(!e.enableCollision||!e.show)return;let i=e._addHeightCallbacks,o=t.boundingSphere;for(let r of i){if(r.invoked||t._wasSelectedLastFrame)continue;let a=r.ellipsoid,s=ue.clone(r.positionCartographic,YIe),A=ue.fromCartesian(o.center,a,WIe);c(A)&&(s.height=A.height);let l=ue.toCartesian(s,a,qIe);f.distance(l,o.center)<=o.radius&&(r.invoked=!0,n.afterRender.push(()=>{c(r.callback)&&r.callback(),r.invoked=!1}))}}function KIe(e,t){jIe(e);let n=e._processingQueue,{cacheBytes:i,maximumCacheOverflowBytes:o,statistics:r}=e,a=i+o,s=!1;for(let A=0;A<n.length;++A){if(e.totalMemoryUsageInBytes>a){s=!0;break}let l=n[A];try{l.process(e,t),l.contentReady&&(--r.numberOfTilesProcessing,e.tileLoad.raiseEvent(l))}catch(d){--r.numberOfTilesProcessing,M9(d,e,l)}}e.totalMemoryUsageInBytes<i?ZIe(e):s&&n.length>0&&XIe(e)}function XIe(e){e._memoryAdjustedScreenSpaceError*=1.02;let t=e._processingQueue;for(let n=0;n<t.length;++n)t[n].updatePriority();t.sort(v9)}function ZIe(e){e._memoryAdjustedScreenSpaceError=Math.max(e.memoryAdjustedScreenSpaceError/1.02,e.maximumScreenSpaceError)}var Fy=new f,$Ie={maximumFractionDigits:3};function R9(e){let t=e/1048576;return t<1?t.toLocaleString(void 0,$Ie):Math.round(t).toLocaleString()}function Bw(e){let{halfAxes:t,radius:n,center:i}=e.boundingVolume.boundingVolume,o=f.clone(i,Fy);if(c(t))o.x+=.75*(t[0]+t[3]+t[6]),o.y+=.75*(t[1]+t[4]+t[7]),o.z+=.75*(t[2]+t[5]+t[8]);else if(c(n)){let r=f.normalize(i,Fy);r=f.multiplyByScalar(r,.75*n,Fy),o=f.add(r,i,Fy)}return o}function xw(e,t,n){let i="",o=0;if(t.debugShowGeometricError&&(i+=`
Geometric error: ${e.geometricError}`,o++),t.debugShowRenderingStatistics&&(i+=`
Commands: ${e.commandsLength}`,o++,e.content.pointsLength>0&&(i+=`
Points: ${e.content.pointsLength}`,o++),e.content.trianglesLength>0&&(i+=`
Triangles: ${e.content.trianglesLength}`,o++),i+=`
Features: ${e.content.featuresLength}`,o++),t.debugShowMemoryUsage&&(i+=`
Texture Memory: ${R9(e.content.texturesByteLength)}`,i+=`
Geometry Memory: ${R9(e.content.geometryByteLength)}`,o+=2),t.debugShowUrl)if(e.hasMultipleContents){i+=`
Urls:`;let a=e.content.innerContentUrls;for(let s=0;s<a.length;s++)i+=`
- ${a[s]}`;o+=a.length}else i+=`
Url: ${e._contentHeader.uri}`,o++;let r={text:i.substring(1),position:n,font:`${19-o}px sans-serif`,showBackground:!0,disableDepthTestDistance:Number.POSITIVE_INFINITY};return t._tileDebugLabels.add(r)}function eye(e,t){let n=e._selectedTiles,i=n.length,o=e._emptyTiles,r=o.length;if(e._tileDebugLabels.removeAll(),e.debugPickedTileLabelOnly){if(c(e.debugPickedTile)){let a=c(e.debugPickPosition)?e.debugPickPosition:Bw(e.debugPickedTile),s=xw(e.debugPickedTile,e,a);s.pixelOffset=new L(15,-15)}}else{for(let a=0;a<i;++a){let s=n[a];xw(s,e,Bw(s))}for(let a=0;a<r;++a){let s=o[a];(s.hasTilesetContent||s.hasImplicitContent)&&xw(s,e,Bw(s))}}e._tileDebugLabels.update(t)}function tye(e,t,n){e._styleEngine.applyStyle(e),e._styleApplied=!0;let{commandList:i,context:o}=t,r=i.length,a=e._selectedTiles,s=e.isSkippingLevelOfDetail&&e._hasMixedContent&&o.stencilBuffer&&a.length>0;e._backfaceCommands.length=0,s&&(c(e._stencilClearCommand)||(e._stencilClearCommand=new gE({stencil:0,pass:He.CESIUM_3D_TILE,renderState:At.fromCache({stencilMask:wt.SKIP_LOD_MASK})})),i.push(e._stencilClearCommand));let{statistics:A,tileVisible:l}=e,d=n.isRender,m=i.length;for(let h=0;h<a.length;++h){let C=a[h];d&&l.raiseEvent(C),JIe(e,C,t),C.update(e,t,n),A.incrementSelectionCounts(C.content),++A.selected}let p=e._emptyTiles;for(let h=0;h<p.length;++h)p[h].update(e,t,n);let g=i.length-m;if(e._backfaceCommands.trim(),s){let h=e._backfaceCommands.values,C=h.length;i.length+=C;for(let _=g-1;_>=0;--_)i[m+C+_]=i[m+_];for(let _=0;_<C;++_)i[m+_]=h[_]}g=i.length-r,A.numberOfCommands=g,d&&(e.pointCloudShading.attenuation&&e.pointCloudShading.eyeDomeLighting&&g>0&&e._pointCloudEyeDomeLighting.update(t,r,e.pointCloudShading,e.boundingSphere),e.debugShowGeometricError||e.debugShowRenderingStatistics||e.debugShowMemoryUsage||e.debugShowUrl?(c(e._tileDebugLabels)||(e._tileDebugLabels=new vd),eye(e,t)):e._tileDebugLabels=e._tileDebugLabels&&e._tileDebugLabels.destroy())}var P9=[];function nye(e,t){let n=t,i=P9;for(i.push(t);i.length>0;){t=i.pop();let o=t.children;for(let r=0;r<o.length;++r)i.push(o[r]);t!==n&&(iye(e,t),--e._statistics.numberOfTilesTotal)}n.children=[]}function N9(e,t){e.tileUnload.raiseEvent(t),e._statistics.decrementLoadCounts(t.content),--e._statistics.numberOfTilesWithContentReady,t.unloadContent()}function iye(e,t){e._cache.unloadTile(e,t,N9),t.destroy()}_i.prototype.trimLoadedTiles=function(){this._cache.trim()};function oye(e,t){let n=e._statistics,i=e._statisticsLast,o=n.numberOfPendingRequests,r=n.numberOfTilesProcessing,a=i.numberOfPendingRequests,s=i.numberOfTilesProcessing;km.clone(n,i);let A=o!==a||r!==s;A&&t.afterRender.push(function(){return e.loadProgress.raiseEvent(o,r),!0}),e._tilesLoaded=n.numberOfPendingRequests===0&&n.numberOfTilesProcessing===0&&n.numberOfAttemptedRequests===0,A&&e._tilesLoaded&&(t.afterRender.push(function(){return e.allTilesLoaded.raiseEvent(),!0}),e._initialTilesLoaded||(e._initialTilesLoaded=!0,t.afterRender.push(function(){return e.initialTilesLoaded.raiseEvent(),!0})))}function rye(e){e._heatmap.resetMinimumMaximum(),e._minimumPriority.depth=Number.MAX_VALUE,e._maximumPriority.depth=-Number.MAX_VALUE,e._minimumPriority.foveatedFactor=Number.MAX_VALUE,e._maximumPriority.foveatedFactor=-Number.MAX_VALUE,e._minimumPriority.distance=Number.MAX_VALUE,e._maximumPriority.distance=-Number.MAX_VALUE,e._minimumPriority.reverseScreenSpaceError=Number.MAX_VALUE,e._maximumPriority.reverseScreenSpaceError=-Number.MAX_VALUE}function aye(e,t){t.frameNumber===e._updatedModelMatrixFrame&&c(e._previousModelMatrix)||(e._updatedModelMatrixFrame=t.frameNumber,e._modelMatrixChanged=!Q.equals(e.modelMatrix,e._previousModelMatrix),e._modelMatrixChanged&&(e._previousModelMatrix=Q.clone(e.modelMatrix,e._previousModelMatrix)))}function sye(e,t,n,i){if(t.mode===Ee.MORPHING||!c(e._root))return!1;let o=e._statistics;o.clear(),++e._updatedVisibilityFrame,rye(e),aye(e,t),e._cullRequestsWhileMoving=e.cullRequestsWhileMoving&&!e._modelMatrixChanged;let r=e.getTraversal(i).selectTiles(e,t);if(i.requestTiles&&VIe(e),tye(e,t,i),km.clone(o,n),i.isRender){let a=e._credits;if(c(a)&&o.selected!==0)for(let s=0;s<a.length;++s){let A=a[s];t.creditDisplay.addCreditToNextFrame(A)}}return r}function L9(e){let t=e._credits;c(t)||(t=[]),t.length=0,c(e.resource.credits)&&e.resource.credits.forEach(i=>{t.push(fn.clone(i))});let n=e.asset.extras;if(c(n)&&c(n.cesium)&&c(n.cesium.credits)){let i=n.cesium.credits;for(let o=0;o<i.length;++o){let r=i[o];t.push(new fn(r.html))}}t.forEach(i=>i.showOnScreen=i.showOnScreen||e._showCreditsOnScreen),e._credits=t}_i.prototype.getTraversal=function(e){let{pass:t}=e;return t===Ds.MOST_DETAILED_PRELOAD||t===Ds.MOST_DETAILED_PICK?I9:this.isSkippingLevelOfDetail?x9:b9};_i.prototype.update=function(e){this.updateForPass(e,e.tilesetPassState)};_i.prototype.updateForPass=function(e,t){this.imageryLayers._update();let n=t.pass;if(n===Ds.PRELOAD&&(!this.preloadWhenHidden||this.show)||n===Ds.PRELOAD_FLIGHT&&(!this.preloadFlightDestinations||!this.show&&!this.preloadWhenHidden)||n===Ds.REQUEST_RENDER_MODE_DEFER_CHECK&&(!this._cullRequestsWhileMoving&&this.foveatedTimeDelay<=0||!this.show))return;let i=e.commandList,o=e.camera,r=e.cullingVolume;t.ready=!1;let a=Ds.getPassOptions(n),s=a.ignoreCommands,A=t.commandList??i,l=A.length;if(e.commandList=A,e.camera=t.camera??o,e.cullingVolume=t.cullingVolume??r,a.isRender){let p=this._environmentMapManager;c(this._root)&&(p.position=this.boundingSphere.center),p.update(e)}let d=this._clippingPolygons;c(d)&&d.enabled&&d.queueCommands(e);let m=this._statisticsPerPass[n];(this.show||s)&&(this._pass=n,t.ready=sye(this,e,m,a)),s&&(A.length=l),e.commandList=i,e.camera=o,e.cullingVolume=r};_i.prototype.hasExtension=function(e){return c(this._extensionsUsed)?this._extensionsUsed.indexOf(e)>-1:!1};_i.prototype.isDestroyed=function(){return!1};_i.prototype.destroy=function(){if(this._tileDebugLabels=this._tileDebugLabels&&this._tileDebugLabels.destroy(),this._clippingPlanes=this._clippingPlanes&&this._clippingPlanes.destroy(),this._clippingPolygons=this._clippingPolygons&&this._clippingPolygons.destroy(),c(this._root)){let e=P9;for(e.push(this._root);e.length>0;){let t=e.pop();t.destroy();let n=t.children;for(let i=0;i<n.length;++i)e.push(n[i])}}return this._root=void 0,this._shouldDestroyImageBasedLighting&&!this._imageBasedLighting.isDestroyed()&&this._imageBasedLighting.destroy(),this._imageBasedLighting=void 0,this._environmentMapManager.isDestroyed()||this._environmentMapManager.destroy(),this._environmentMapManager=void 0,this._imageryLayers.isDestroyed()||(this.imageryLayers.layerAdded.removeEventListener(this._imageryLayersListener),this.imageryLayers.layerRemoved.removeEventListener(this._imageryLayersListener),this.imageryLayers.layerMoved.removeEventListener(this._imageryLayersListener),this.imageryLayers.layerShownOrHidden.removeEventListener(this._imageryLayersListener),this._imageryLayers.destroy()),this._imageryLayers=void 0,me(this)};_i.supportedExtensions={"3DTILES_metadata":!0,"3DTILES_implicit_tiling":!0,"3DTILES_content_gltf":!0,"3DTILES_multiple_contents":!0,"3DTILES_bounding_volume_S2":!0,"3DTILES_batch_table_hierarchy":!0,"3DTILES_draco_point_compression":!0,MAXAR_content_geojson:!0};_i.checkSupportedExtensions=function(e){for(let t=0;t<e.length;t++)if(!_i.supportedExtensions[e[t]])throw new ae(`Unsupported 3D Tiles Extension: ${e[t]}`)};var cye=new ai,Aye=new f,lye=new ue;_i.prototype.getHeight=function(e,t){let n=t.ellipsoid;c(n)||(n=pe.WGS84);let i=cye,o=n.cartographicToCartesian(e,i.direction);f.normalize(i.direction,i.direction),i.direction=f.normalize(o,i.direction),i.direction=f.negate(o,i.direction),i.origin=f.multiplyByScalar(i.direction,-2*n.maximumRadius,i.origin);let r=this.pick(i,t.frameState,Aye);if(c(r))return n.cartesianToCartographic(r,lye)?.height};_i.prototype.updateHeight=function(e,t,n){n=n??pe.WGS84;let i={positionCartographic:e,ellipsoid:n,callback:t,invoked:!1},o=()=>{let r=this._addHeightCallbacks,a=r.length;for(let s=0;s<a;++s)if(r[s]===i){r.splice(s,1);break}i.callback&&(i.callback=void 0)};return this._addHeightCallbacks.push(i),o};var uye=new Vs,fye=new f;_i.prototype.pick=function(e,t,n){if(!t.context.webgl2&&!this._enablePick)return;let i=this._selectedTiles,o=i.length,r=[];for(let A=0;A<o;++A){let l=i[A],d=en.raySphere(e,l.contentBoundingVolume.boundingSphere,uye);!c(d)||!c(l.content)||r.push(l)}let a=r.length;r.sort((A,l)=>{let d=le.distanceSquaredTo(A.contentBoundingVolume.boundingSphere,e.origin),m=le.distanceSquaredTo(l.contentBoundingVolume.boundingSphere,e.origin);return d-m});let s;for(let A=0;A<a;++A){let d=r[A].content.pick(e,t,fye);if(c(d))return s=f.clone(d,n),s}};_i.prototype.isGltfExtensionUsed=function(e){if(this.hasExtension("3DTILES_content_gltf")){if(!c(this.extensions))return!1;let t=this.extensions["3DTILES_content_gltf"]?.extensionsUsed;return c(t)?t.indexOf(e)>-1:!1}return!1};_i.prototype.isGltfExtensionRequired=function(e){if(this.isGltfExtensionUsed(e)){let t=this.extensions["3DTILES_content_gltf"].extensionsRequired;return c(t)?t.indexOf(e)>-1:!1}return!1};var LC=_i;function GA(e,t){this._ellipsoid=e,this._cameraPosition=new f,this._cameraPositionInScaledSpace=new f,this._distanceToLimbInScaledSpaceSquared=0,c(t)&&(this.cameraPosition=t)}Object.defineProperties(GA.prototype,{ellipsoid:{get:function(){return this._ellipsoid}},cameraPosition:{get:function(){return this._cameraPosition},set:function(e){let n=this._ellipsoid.transformPositionToScaledSpace(e,this._cameraPositionInScaledSpace),i=f.magnitudeSquared(n)-1;f.clone(e,this._cameraPosition),this._cameraPositionInScaledSpace=n,this._distanceToLimbInScaledSpaceSquared=i}}});var F9=new f;GA.prototype.isPointVisible=function(e){let n=this._ellipsoid.transformPositionToScaledSpace(e,F9);return Sw(n,this._cameraPositionInScaledSpace,this._distanceToLimbInScaledSpaceSquared)};GA.prototype.isScaledSpacePointVisible=function(e){return Sw(e,this._cameraPositionInScaledSpace,this._distanceToLimbInScaledSpaceSquared)};var dye=new f;GA.prototype.isScaledSpacePointVisiblePossiblyUnderEllipsoid=function(e,t){let n=this._ellipsoid,i,o;return c(t)&&t<0&&n.minimumRadius>-t?(o=dye,o.x=this._cameraPosition.x/(n.radii.x+t),o.y=this._cameraPosition.y/(n.radii.y+t),o.z=this._cameraPosition.z/(n.radii.z+t),i=o.x*o.x+o.y*o.y+o.z*o.z-1):(o=this._cameraPositionInScaledSpace,i=this._distanceToLimbInScaledSpaceSquared),Sw(e,o,i)};GA.prototype.computeHorizonCullingPoint=function(e,t,n){return U9(this._ellipsoid,e,t,n)};var O9=pe.clone(pe.UNIT_SPHERE);GA.prototype.computeHorizonCullingPointPossiblyUnderEllipsoid=function(e,t,n,i){let o=k9(this._ellipsoid,n,O9);return U9(o,e,t,i)};GA.prototype.computeHorizonCullingPointFromVertices=function(e,t,n,i,o){return z9(this._ellipsoid,e,t,n,i,o)};GA.prototype.computeHorizonCullingPointFromVerticesPossiblyUnderEllipsoid=function(e,t,n,i,o,r){let a=k9(this._ellipsoid,o,O9);return z9(a,e,t,n,i,r)};var hye=[];GA.prototype.computeHorizonCullingPointFromRectangle=function(e,t,n){let i=de.subsample(e,t,0,hye),o=le.fromPoints(i);if(!(f.magnitude(o.center)<.1*t.minimumRadius))return this.computeHorizonCullingPoint(o.center,i,n)};var mye=new f;function k9(e,t,n){if(c(t)&&t<0&&e.minimumRadius>-t){let i=f.fromElements(e.radii.x+t,e.radii.y+t,e.radii.z+t,mye);e=pe.fromCartesian3(i,n)}return e}function U9(e,t,n,i){c(i)||(i=new f);let o=V9(e,t),r=0;for(let a=0,s=n.length;a<s;++a){let A=n[a],l=G9(e,A,o);if(l<0)return;r=Math.max(r,l)}return H9(o,r,i)}var Oy=new f;function z9(e,t,n,i,o,r){c(r)||(r=new f),i=i??3,o=o??f.ZERO;let a=V9(e,t),s=0;for(let A=0,l=n.length;A<l;A+=i){Oy.x=n[A]+o.x,Oy.y=n[A+1]+o.y,Oy.z=n[A+2]+o.z;let d=G9(e,Oy,a);if(d<0)return;s=Math.max(s,d)}return H9(a,s,r)}function Sw(e,t,n){let i=t,o=n,r=f.subtract(e,i,F9),a=-f.dot(r,i);return!(o<0?a>0:a>o&&a*a/f.magnitudeSquared(r)>o)}var pye=new f,gye=new f;function G9(e,t,n){let i=e.transformPositionToScaledSpace(t,pye),o=f.magnitudeSquared(i),r=Math.sqrt(o),a=f.divideByScalar(i,r,gye);o=Math.max(1,o),r=Math.max(1,r);let s=f.dot(a,n),A=f.magnitude(f.cross(a,n,a)),l=1/r,d=Math.sqrt(o-1)*l;return 1/(s*l-A*d)}function H9(e,t,n){if(!(t<=0||t===1/0||t!==t))return f.multiplyByScalar(e,t,n)}var Tw=new f;function V9(e,t){return f.equals(t,f.ZERO)?t:(e.transformPositionToScaledSpace(t,Tw),f.normalize(Tw,Tw))}var j9=GA;function ao(e,t){e=e??G.EMPTY_OBJECT;let n=e.translucencyByDistance,i=e.scaleByDistance,o=e.distanceDisplayCondition;c(n)&&(n=mn.clone(n)),c(i)&&(i=mn.clone(i)),c(o)&&(o=to.clone(o)),this._show=e.show??!0,this._position=f.clone(e.position??f.ZERO),this._actualPosition=f.clone(this._position),this._color=J.clone(e.color??J.WHITE),this._outlineColor=J.clone(e.outlineColor??J.TRANSPARENT),this._outlineWidth=e.outlineWidth??0,this._pixelSize=e.pixelSize??10,this._scaleByDistance=i,this._translucencyByDistance=n,this._distanceDisplayCondition=o,this._disableDepthTestDistance=e.disableDepthTestDistance??0,this._id=e.id,this._collection=e.collection??t,this._clusterShow=!0,this._pickId=void 0,this._pointPrimitiveCollection=t,this._dirty=!1,this._index=-1,this._splitDirection=e.splitDirection??qa.NONE}var Y9=ao.SHOW_INDEX=0,J9=ao.POSITION_INDEX=1,Cye=ao.COLOR_INDEX=2,Eye=ao.OUTLINE_COLOR_INDEX=3,_ye=ao.OUTLINE_WIDTH_INDEX=4,Iye=ao.PIXEL_SIZE_INDEX=5,yye=ao.SCALE_BY_DISTANCE_INDEX=6,bye=ao.TRANSLUCENCY_BY_DISTANCE_INDEX=7,Bye=ao.DISTANCE_DISPLAY_CONDITION_INDEX=8,xye=ao.DISABLE_DEPTH_DISTANCE_INDEX=9,Tye=ao.SPLIT_DIRECTION_INDEX=10;ao.NUMBER_OF_PROPERTIES=11;function Qs(e,t){let n=e._pointPrimitiveCollection;c(n)&&(n._updatePointPrimitive(e,t),e._dirty=!0)}Object.defineProperties(ao.prototype,{show:{get:function(){return this._show},set:function(e){this._show!==e&&(this._show=e,Qs(this,Y9))}},position:{get:function(){return this._position},set:function(e){let t=this._position;f.equals(t,e)||(f.clone(e,t),f.clone(e,this._actualPosition),Qs(this,J9))}},scaleByDistance:{get:function(){return this._scaleByDistance},set:function(e){let t=this._scaleByDistance;mn.equals(t,e)||(this._scaleByDistance=mn.clone(e,t),Qs(this,yye))}},translucencyByDistance:{get:function(){return this._translucencyByDistance},set:function(e){let t=this._translucencyByDistance;mn.equals(t,e)||(this._translucencyByDistance=mn.clone(e,t),Qs(this,bye))}},pixelSize:{get:function(){return this._pixelSize},set:function(e){this._pixelSize!==e&&(this._pixelSize=e,Qs(this,Iye))}},color:{get:function(){return this._color},set:function(e){let t=this._color;J.equals(t,e)||(J.clone(e,t),Qs(this,Cye))}},outlineColor:{get:function(){return this._outlineColor},set:function(e){let t=this._outlineColor;J.equals(t,e)||(J.clone(e,t),Qs(this,Eye))}},outlineWidth:{get:function(){return this._outlineWidth},set:function(e){this._outlineWidth!==e&&(this._outlineWidth=e,Qs(this,_ye))}},distanceDisplayCondition:{get:function(){return this._distanceDisplayCondition},set:function(e){to.equals(this._distanceDisplayCondition,e)||(this._distanceDisplayCondition=to.clone(e,this._distanceDisplayCondition),Qs(this,Bye))}},disableDepthTestDistance:{get:function(){return this._disableDepthTestDistance},set:function(e){this._disableDepthTestDistance!==e&&(this._disableDepthTestDistance=e,Qs(this,xye))}},id:{get:function(){return this._id},set:function(e){this._id=e,c(this._pickId)&&(this._pickId.object.id=e)}},pickId:{get:function(){return this._pickId}},clusterShow:{get:function(){return this._clusterShow},set:function(e){this._clusterShow!==e&&(this._clusterShow=e,Qs(this,Y9))}},splitDirection:{get:function(){return this._splitDirection},set:function(e){this._splitDirection!==e&&(this._splitDirection=e,Qs(this,Tye))}}});ao.prototype.getPickId=function(e){return c(this._pickId)||(this._pickId=e.createPickId({primitive:this,collection:this._collection,id:this._id})),this._pickId};ao.prototype._getActualPosition=function(){return this._actualPosition};ao.prototype._setActualPosition=function(e){f.clone(e,this._actualPosition),Qs(this,J9)};var W9=new re;ao._computeActualPosition=function(e,t,n){return t.mode===Ee.SCENE3D?e:(Q.multiplyByPoint(n,e,W9),Fn.computeActualEllipsoidPosition(t,W9))};var q9=new re;ao._computeScreenSpacePosition=function(e,t,n,i){let o=Q.multiplyByVector(e,re.fromElements(t.x,t.y,t.z,1,q9),q9);return Fn.worldToWindowCoordinates(n,o,i)};ao.prototype.computeScreenSpacePosition=function(e,t){let n=this._pointPrimitiveCollection;c(t)||(t=new L);let i=n.modelMatrix,o=ao._computeScreenSpacePosition(i,this._actualPosition,e,t);if(c(o))return o.y=e.canvas.clientHeight-o.y,o};ao.getScreenSpaceBoundingBox=function(e,t,n){let i=e.pixelSize,o=i*.5,r=t.x-o,a=t.y-o,s=i,A=i;return c(n)||(n=new oi),n.x=r,n.y=a,n.width=s,n.height=A,n};ao.prototype.equals=function(e){return this===e||c(e)&&this._id===e._id&&f.equals(this._position,e._position)&&J.equals(this._color,e._color)&&this._pixelSize===e._pixelSize&&this._outlineWidth===e._outlineWidth&&this._show===e._show&&J.equals(this._outlineColor,e._outlineColor)&&mn.equals(this._scaleByDistance,e._scaleByDistance)&&mn.equals(this._translucencyByDistance,e._translucencyByDistance)&&to.equals(this._distanceDisplayCondition,e._distanceDisplayCondition)&&this._disableDepthTestDistance===e._disableDepthTestDistance&&this._splitDirection===e._splitDirection};ao.prototype._destroy=function(){this._pickId=this._pickId&&this._pickId.destroy(),this._pointPrimitiveCollection=void 0};var Ra=ao;var FC=`in vec4 v_color;
in vec4 v_outlineColor;
in float v_innerPercent;
in float v_pixelDistance;
in vec4 v_pickColor;
in float v_splitDirection;

void main()
{
    if (v_splitDirection < 0.0 && gl_FragCoord.x > czm_splitPosition) discard;
    if (v_splitDirection > 0.0 && gl_FragCoord.x < czm_splitPosition) discard;

    // The distance in UV space from this fragment to the center of the point, at most 0.5.
    float distanceToCenter = length(gl_PointCoord - vec2(0.5));
    // The max distance stops one pixel shy of the edge to leave space for anti-aliasing.
    float maxDistance = max(0.0, 0.5 - v_pixelDistance);
    float wholeAlpha = 1.0 - smoothstep(maxDistance, 0.5, distanceToCenter);
    float innerAlpha = 1.0 - smoothstep(maxDistance * v_innerPercent, 0.5 * v_innerPercent, distanceToCenter);

    vec4 color = mix(v_outlineColor, v_color, innerAlpha);
    color.a *= wholeAlpha;

// Fully transparent parts of the billboard are not pickable.
#if !defined(OPAQUE) && !defined(TRANSLUCENT)
    if (color.a < 0.005)   // matches 0/255 and 1/255
    {
        discard;
    }
#else
// The billboard is rendered twice. The opaque pass discards translucent fragments
// and the translucent pass discards opaque fragments.
#ifdef OPAQUE
    if (color.a < 0.995)   // matches < 254/255
    {
        discard;
    }
#else
    if (color.a >= 0.995)  // matches 254/255 and 255/255
    {
        discard;
    }
#endif
#endif

    out_FragColor = czm_gammaCorrect(color);
    czm_writeLogDepth();
}
`;var K9=`uniform float u_maxTotalPointSize;

in vec4 positionHighAndSize;
in vec4 positionLowAndOutline;
in vec4 compressedAttribute0;                                        // color, outlineColor, pick color
in vec4 compressedAttribute1;                                        // show, translucency by distance, some free space
in vec4 scaleByDistance;                                             // near, nearScale, far, farScale
in vec4 distanceDisplayConditionAndDisableDepthAndSplitDirection;    // near, far, disableDepthTestDistance, splitDirection

out vec4 v_color;
out vec4 v_outlineColor;
out float v_innerPercent;
out float v_pixelDistance;
out vec4 v_pickColor;
out float v_splitDirection;

const float SHIFT_LEFT8 = 256.0;
const float SHIFT_RIGHT8 = 1.0 / 256.0;

void main()
{
    // Modifying this shader may also require modifications to PointPrimitive._computeScreenSpacePosition

    // unpack attributes
    vec3 positionHigh = positionHighAndSize.xyz;
    vec3 positionLow = positionLowAndOutline.xyz;
    float outlineWidthBothSides = 2.0 * positionLowAndOutline.w;
    float totalSize = positionHighAndSize.w + outlineWidthBothSides;
    float outlinePercent = outlineWidthBothSides / totalSize;
    // Scale in response to browser-zoom.
    totalSize *= czm_pixelRatio;

    float temp = compressedAttribute1.x * SHIFT_RIGHT8;
    float show = floor(temp);

#ifdef EYE_DISTANCE_TRANSLUCENCY
    vec4 translucencyByDistance;
    translucencyByDistance.x = compressedAttribute1.z;
    translucencyByDistance.z = compressedAttribute1.w;

    translucencyByDistance.y = ((temp - floor(temp)) * SHIFT_LEFT8) / 255.0;

    temp = compressedAttribute1.y * SHIFT_RIGHT8;
    translucencyByDistance.w = ((temp - floor(temp)) * SHIFT_LEFT8) / 255.0;
#endif

    ///////////////////////////////////////////////////////////////////////////

    vec4 color;
    vec4 outlineColor;
    vec4 pickColor;

    // compressedAttribute0.z => pickColor.rgb

    temp = compressedAttribute0.z * SHIFT_RIGHT8;
    pickColor.b = (temp - floor(temp)) * SHIFT_LEFT8;
    temp = floor(temp) * SHIFT_RIGHT8;
    pickColor.g = (temp - floor(temp)) * SHIFT_LEFT8;
    pickColor.r = floor(temp);

    // compressedAttribute0.x => color.rgb

    temp = compressedAttribute0.x * SHIFT_RIGHT8;
    color.b = (temp - floor(temp)) * SHIFT_LEFT8;
    temp = floor(temp) * SHIFT_RIGHT8;
    color.g = (temp - floor(temp)) * SHIFT_LEFT8;
    color.r = floor(temp);

    // compressedAttribute0.y => outlineColor.rgb

    temp = compressedAttribute0.y * SHIFT_RIGHT8;
    outlineColor.b = (temp - floor(temp)) * SHIFT_LEFT8;
    temp = floor(temp) * SHIFT_RIGHT8;
    outlineColor.g = (temp - floor(temp)) * SHIFT_LEFT8;
    outlineColor.r = floor(temp);

    // compressedAttribute0.w => color.a, outlineColor.a, pickColor.a

    temp = compressedAttribute0.w * SHIFT_RIGHT8;
    pickColor.a = (temp - floor(temp)) * SHIFT_LEFT8;
    pickColor = pickColor / 255.0;

    temp = floor(temp) * SHIFT_RIGHT8;
    outlineColor.a = (temp - floor(temp)) * SHIFT_LEFT8;
    outlineColor /= 255.0;
    color.a = floor(temp);
    color /= 255.0;

    ///////////////////////////////////////////////////////////////////////////

    vec4 p = czm_translateRelativeToEye(positionHigh, positionLow);
    vec4 positionEC = czm_modelViewRelativeToEye * p;

    ///////////////////////////////////////////////////////////////////////////

#if defined(EYE_DISTANCE_SCALING) || defined(EYE_DISTANCE_TRANSLUCENCY) || defined(DISTANCE_DISPLAY_CONDITION) || defined(DISABLE_DEPTH_DISTANCE)
    float lengthSq;
    if (czm_sceneMode == czm_sceneMode2D)
    {
        // 2D camera distance is a special case
        // treat all billboards as flattened to the z=0.0 plane
        lengthSq = czm_eyeHeight2D.y;
    }
    else
    {
        lengthSq = dot(positionEC.xyz, positionEC.xyz);
    }
#endif

#ifdef EYE_DISTANCE_SCALING
    totalSize *= czm_nearFarScalar(scaleByDistance, lengthSq);
#endif
    if (totalSize > 0.0) {
        // Add padding for anti-aliasing on both sides.
        totalSize += 3.0;
    }

    // Clamp to max point size.
    totalSize = min(totalSize, u_maxTotalPointSize);
    // If size is too small, push vertex behind near plane for clipping.
    // Note that context.minimumAliasedPointSize "will be at most 1.0".
    if (totalSize < 1.0)
    {
        positionEC.xyz = vec3(0.0);
        totalSize = 1.0;
    }

    float translucency = 1.0;
#ifdef EYE_DISTANCE_TRANSLUCENCY
    translucency = czm_nearFarScalar(translucencyByDistance, lengthSq);
    // push vertex behind near plane for clipping
    if (translucency < 0.004)
    {
        positionEC.xyz = vec3(0.0);
    }
#endif

#ifdef DISTANCE_DISPLAY_CONDITION
    float nearSq = distanceDisplayConditionAndDisableDepthAndSplitDirection.x;
    float farSq = distanceDisplayConditionAndDisableDepthAndSplitDirection.y;
    if (lengthSq < nearSq || lengthSq > farSq) {
        // push vertex behind camera to force it to be clipped
        positionEC.xyz = vec3(0.0, 0.0, 1.0);
    }
#endif

    gl_Position = czm_projection * positionEC;
    czm_vertexLogDepth();

#ifdef DISABLE_DEPTH_DISTANCE
    float disableDepthTestDistance = distanceDisplayConditionAndDisableDepthAndSplitDirection.z;
    if (disableDepthTestDistance == 0.0 && czm_minimumDisableDepthTestDistance != 0.0)
    {
        disableDepthTestDistance = czm_minimumDisableDepthTestDistance;
    }

    if (disableDepthTestDistance != 0.0)
    {
        // Don't try to "multiply both sides" by w.  Greater/less-than comparisons won't work for negative values of w.
        float zclip = gl_Position.z / gl_Position.w;
        bool clipped = (zclip < -1.0 || zclip > 1.0);
        if (!clipped && (disableDepthTestDistance < 0.0 || (lengthSq > 0.0 && lengthSq < disableDepthTestDistance)))
        {
            // Position z on the near plane.
            gl_Position.z = -gl_Position.w;
#ifdef LOG_DEPTH
            czm_vertexLogDepth(vec4(czm_currentFrustum.x));
#endif
        }
    }
#endif

    v_color = color;
    v_color.a *= translucency * show;
    v_outlineColor = outlineColor;
    v_outlineColor.a *= translucency * show;

    v_innerPercent = 1.0 - outlinePercent;
    v_pixelDistance = 2.0 / totalSize;
    gl_PointSize = totalSize * show;
    gl_Position *= show;

    v_pickColor = pickColor;
    v_splitDirection = distanceDisplayConditionAndDisableDepthAndSplitDirection.w;
}
`;var Sye=Ra.SHOW_INDEX,Qw=Ra.POSITION_INDEX,X9=Ra.COLOR_INDEX,wye=Ra.OUTLINE_COLOR_INDEX,Dye=Ra.OUTLINE_WIDTH_INDEX,Qye=Ra.PIXEL_SIZE_INDEX,Z9=Ra.SCALE_BY_DISTANCE_INDEX,$9=Ra.TRANSLUCENCY_BY_DISTANCE_INDEX,e4=Ra.DISTANCE_DISPLAY_CONDITION_INDEX,Rye=Ra.DISABLE_DEPTH_DISTANCE_INDEX,vye=Ra.SPLIT_DIRECTION_INDEX,Rw=Ra.NUMBER_OF_PROPERTIES,aa={positionHighAndSize:0,positionLowAndOutline:1,compressedAttribute0:2,compressedAttribute1:3,scaleByDistance:4,distanceDisplayConditionAndDisableDepthAndSplitDirection:5};function gc(e){e=e??G.EMPTY_OBJECT,this._sp=void 0,this._spTranslucent=void 0,this._rsOpaque=void 0,this._rsTranslucent=void 0,this._vaf=void 0,this._pointPrimitives=[],this._pointPrimitivesToUpdate=[],this._pointPrimitivesToUpdateIndex=0,this._pointPrimitivesRemoved=!1,this._createVertexArray=!1,this._shaderScaleByDistance=!1,this._compiledShaderScaleByDistance=!1,this._shaderTranslucencyByDistance=!1,this._compiledShaderTranslucencyByDistance=!1,this._shaderDistanceDisplayCondition=!1,this._compiledShaderDistanceDisplayCondition=!1,this._shaderDisableDepthDistance=!1,this._compiledShaderDisableDepthDistance=!1,this._propertiesChanged=new Uint32Array(Rw),this._maxPixelSize=1,this._baseVolume=new le,this._baseVolumeWC=new le,this._baseVolume2D=new le,this._boundingVolume=new le,this._boundingVolumeDirty=!1,this._colorCommands=[],this.show=e.show??!0,this.modelMatrix=Q.clone(e.modelMatrix??Q.IDENTITY),this._modelMatrix=Q.clone(Q.IDENTITY),this.debugShowBoundingVolume=e.debugShowBoundingVolume??!1,this.blendOption=e.blendOption??Oi.OPAQUE_AND_TRANSLUCENT,this._blendOption=void 0,this._mode=Ee.SCENE3D,this._maxTotalPointSize=1,this._buffersUsage=[De.STATIC_DRAW,De.STATIC_DRAW,De.STATIC_DRAW,De.STATIC_DRAW,De.STATIC_DRAW,De.STATIC_DRAW,De.STATIC_DRAW,De.STATIC_DRAW,De.STATIC_DRAW];let t=this;this._uniforms={u_maxTotalPointSize:function(){return t._maxTotalPointSize}}}Object.defineProperties(gc.prototype,{length:{get:function(){return vw(this),this._pointPrimitives.length}}});function t4(e){let t=e.length;for(let n=0;n<t;++n)e[n]&&e[n]._destroy()}gc.prototype.add=function(e){let t=new Ra(e,this);return t._index=this._pointPrimitives.length,this._pointPrimitives.push(t),this._createVertexArray=!0,t};gc.prototype.remove=function(e){return this.contains(e)?(this._pointPrimitives[e._index]=null,this._pointPrimitivesRemoved=!0,this._createVertexArray=!0,e._destroy(),!0):!1};gc.prototype.removeAll=function(){t4(this._pointPrimitives),this._pointPrimitives=[],this._pointPrimitivesToUpdate=[],this._pointPrimitivesToUpdateIndex=0,this._pointPrimitivesRemoved=!1,this._createVertexArray=!0};function vw(e){if(e._pointPrimitivesRemoved){e._pointPrimitivesRemoved=!1;let t=[],n=e._pointPrimitives,i=n.length;for(let o=0,r=0;o<i;++o){let a=n[o];a&&(a._index=r++,t.push(a))}e._pointPrimitives=t}}gc.prototype._updatePointPrimitive=function(e,t){e._dirty||(this._pointPrimitivesToUpdate[this._pointPrimitivesToUpdateIndex++]=e),++this._propertiesChanged[t]};gc.prototype.contains=function(e){return c(e)&&e._pointPrimitiveCollection===this};gc.prototype.get=function(e){return vw(this),this._pointPrimitives[e]};gc.prototype.computeNewBuffersUsage=function(){let e=this._buffersUsage,t=!1,n=this._propertiesChanged;for(let i=0;i<Rw;++i){let o=n[i]===0?De.STATIC_DRAW:De.STREAM_DRAW;t=t||e[i]!==o,e[i]=o}return t};function Mye(e,t,n){return new u_(e,[{index:aa.positionHighAndSize,componentsPerAttribute:4,componentDatatype:V.FLOAT,usage:n[Qw]},{index:aa.positionLowAndShow,componentsPerAttribute:4,componentDatatype:V.FLOAT,usage:n[Qw]},{index:aa.compressedAttribute0,componentsPerAttribute:4,componentDatatype:V.FLOAT,usage:n[X9]},{index:aa.compressedAttribute1,componentsPerAttribute:4,componentDatatype:V.FLOAT,usage:n[$9]},{index:aa.scaleByDistance,componentsPerAttribute:4,componentDatatype:V.FLOAT,usage:n[Z9]},{index:aa.distanceDisplayConditionAndDisableDepthAndSplitDirection,componentsPerAttribute:4,componentDatatype:V.FLOAT,usage:n[e4]}],t)}var ww=new Cn;function n4(e,t,n,i){let o=i._index,r=i._getActualPosition();e._mode===Ee.SCENE3D&&(le.expand(e._baseVolume,r,e._baseVolume),e._boundingVolumeDirty=!0),Cn.fromCartesian(r,ww);let a=i.pixelSize,s=i.outlineWidth;e._maxPixelSize=Math.max(e._maxPixelSize,a+s);let A=n[aa.positionHighAndSize],l=ww.high;A(o,l.x,l.y,l.z,a);let d=n[aa.positionLowAndOutline],m=ww.low;d(o,m.x,m.y,m.z,s)}var ky=65536,OC=256;function i4(e,t,n,i){let o=i._index,r=i.color,a=i.getPickId(t).color,s=i.outlineColor,A=J.floatToByte(r.red),l=J.floatToByte(r.green),d=J.floatToByte(r.blue),m=A*ky+l*OC+d;A=J.floatToByte(s.red),l=J.floatToByte(s.green),d=J.floatToByte(s.blue);let p=A*ky+l*OC+d;A=J.floatToByte(a.red),l=J.floatToByte(a.green),d=J.floatToByte(a.blue);let g=A*ky+l*OC+d,h=J.floatToByte(r.alpha)*ky+J.floatToByte(s.alpha)*OC+J.floatToByte(a.alpha),C=n[aa.compressedAttribute0];C(o,m,p,g,h)}function o4(e,t,n,i){let o=i._index,r=0,a=1,s=1,A=1,l=i.translucencyByDistance;c(l)&&(r=l.near,a=l.nearValue,s=l.far,A=l.farValue,(a!==1||A!==1)&&(e._shaderTranslucencyByDistance=!0));let d=i.show&&i.clusterShow;i.color.alpha===0&&i.outlineColor.alpha===0&&(d=!1),a=S.clamp(a,0,1),a=a===1?255:a*255|0;let m=(d?1:0)*OC+a;A=S.clamp(A,0,1),A=A===1?255:A*255|0;let p=A,g=n[aa.compressedAttribute1];g(o,m,p,r,s)}function r4(e,t,n,i){let o=i._index,r=n[aa.scaleByDistance],a=0,s=1,A=1,l=1,d=i.scaleByDistance;c(d)&&(a=d.near,s=d.nearValue,A=d.far,l=d.farValue,(s!==1||l!==1)&&(e._shaderScaleByDistance=!0)),r(o,a,s,A,l)}function a4(e,t,n,i){let o=i._index,r=n[aa.distanceDisplayConditionAndDisableDepthAndSplitDirection],a=0,s=Number.MAX_VALUE,A=i.distanceDisplayCondition;c(A)&&(a=A.near,s=A.far,a*=a,s*=s,e._shaderDistanceDisplayCondition=!0);let l=i.disableDepthTestDistance;l*=l,l>0&&(e._shaderDisableDepthDistance=!0,l===Number.POSITIVE_INFINITY&&(l=-1));let d=0,m=i.splitDirection;c(m)&&(d=m),r(o,a,s,l,d)}function Pye(e,t,n,i){n4(e,t,n,i),i4(e,t,n,i),o4(e,t,n,i),r4(e,t,n,i),a4(e,t,n,i)}function Dw(e,t,n,i,o,r){let a;i.mode===Ee.SCENE3D?(a=e._baseVolume,e._boundingVolumeDirty=!0):a=e._baseVolume2D;let s=[];for(let A=0;A<n;++A){let l=t[A],d=l.position,m=Ra._computeActualPosition(d,i,o);c(m)&&(l._setActualPosition(m),r?s.push(m):le.expand(a,m,a))}r&&le.fromPoints(s,a)}function Nye(e,t){let n=t.mode,i=e._pointPrimitives,o=e._pointPrimitivesToUpdate,r=e._modelMatrix;e._createVertexArray||e._mode!==n||n!==Ee.SCENE3D&&!Q.equals(r,e.modelMatrix)?(e._mode=n,Q.clone(e.modelMatrix,r),e._createVertexArray=!0,(n===Ee.SCENE3D||n===Ee.SCENE2D||n===Ee.COLUMBUS_VIEW)&&Dw(e,i,i.length,t,r,!0)):n===Ee.MORPHING?Dw(e,i,i.length,t,r,!0):(n===Ee.SCENE2D||n===Ee.COLUMBUS_VIEW)&&Dw(e,o,e._pointPrimitivesToUpdateIndex,t,r,!1)}function Lye(e,t,n){let o=t.camera.getPixelSize(n,t.context.drawingBufferWidth,t.context.drawingBufferHeight)*e._maxPixelSize;n.radius+=o}var Fye=[];gc.prototype.update=function(e){if(vw(this),!this.show)return;this._maxTotalPointSize=rn.maximumAliasedPointSize,Nye(this,e);let n=this._pointPrimitives.length,i=this._pointPrimitivesToUpdate,o=this._pointPrimitivesToUpdateIndex,r=this._propertiesChanged,a=this._createVertexArray,s,A=e.context,l=e.passes,d=l.pick;if(a||!d&&this.computeNewBuffersUsage()){this._createVertexArray=!1;for(let w=0;w<Rw;++w)r[w]=0;if(this._vaf=this._vaf&&this._vaf.destroy(),n>0){this._vaf=Mye(A,n,this._buffersUsage),s=this._vaf.writers;for(let w=0;w<n;++w){let R=this._pointPrimitives[w];R._dirty=!1,Pye(this,A,s,R)}this._vaf.commit()}this._pointPrimitivesToUpdateIndex=0}else if(o>0){let w=Fye;w.length=0,(r[Qw]||r[Dye]||r[Qye])&&w.push(n4),(r[X9]||r[wye])&&w.push(i4),(r[Sye]||r[$9])&&w.push(o4),r[Z9]&&w.push(r4),(r[e4]||r[Rye]||r[vye])&&w.push(a4);let R=w.length;if(s=this._vaf.writers,o/n>.1){for(let z=0;z<o;++z){let M=i[z];M._dirty=!1;for(let N=0;N<R;++N)w[N](this,A,s,M)}this._vaf.commit()}else{for(let z=0;z<o;++z){let M=i[z];M._dirty=!1;for(let N=0;N<R;++N)w[N](this,A,s,M);this._vaf.subCommit(M._index,1)}this._vaf.endSubCommits()}this._pointPrimitivesToUpdateIndex=0}if(o>n*1.5&&(i.length=n),!c(this._vaf)||!c(this._vaf.va))return;this._boundingVolumeDirty&&(this._boundingVolumeDirty=!1,le.transform(this._baseVolume,this.modelMatrix,this._baseVolumeWC));let m,p=Q.IDENTITY;e.mode===Ee.SCENE3D?(p=this.modelMatrix,m=le.clone(this._baseVolumeWC,this._boundingVolume)):m=le.clone(this._baseVolume2D,this._boundingVolume),Lye(this,e,m);let g=this._blendOption!==this.blendOption;this._blendOption=this.blendOption,g&&(this._blendOption===Oi.OPAQUE||this._blendOption===Oi.OPAQUE_AND_TRANSLUCENT?this._rsOpaque=At.fromCache({depthTest:{enabled:!0,func:W.LEQUAL},depthMask:!0}):this._rsOpaque=void 0,this._blendOption===Oi.TRANSLUCENT||this._blendOption===Oi.OPAQUE_AND_TRANSLUCENT?this._rsTranslucent=At.fromCache({depthTest:{enabled:!0,func:W.LEQUAL},depthMask:!1,blending:Pn.ALPHA_BLEND}):this._rsTranslucent=void 0),this._shaderDisableDepthDistance=this._shaderDisableDepthDistance||e.minimumDisableDepthTestDistance!==0;let h,C;(g||this._shaderScaleByDistance&&!this._compiledShaderScaleByDistance||this._shaderTranslucencyByDistance&&!this._compiledShaderTranslucencyByDistance||this._shaderDistanceDisplayCondition&&!this._compiledShaderDistanceDisplayCondition||this._shaderDisableDepthDistance!==this._compiledShaderDisableDepthDistance)&&(h=new It({sources:[K9]}),this._shaderScaleByDistance&&h.defines.push("EYE_DISTANCE_SCALING"),this._shaderTranslucencyByDistance&&h.defines.push("EYE_DISTANCE_TRANSLUCENCY"),this._shaderDistanceDisplayCondition&&h.defines.push("DISTANCE_DISPLAY_CONDITION"),this._shaderDisableDepthDistance&&h.defines.push("DISABLE_DEPTH_DISTANCE"),this._blendOption===Oi.OPAQUE_AND_TRANSLUCENT&&(C=new It({defines:["OPAQUE"],sources:[FC]}),this._sp=gn.replaceCache({context:A,shaderProgram:this._sp,vertexShaderSource:h,fragmentShaderSource:C,attributeLocations:aa}),C=new It({defines:["TRANSLUCENT"],sources:[FC]}),this._spTranslucent=gn.replaceCache({context:A,shaderProgram:this._spTranslucent,vertexShaderSource:h,fragmentShaderSource:C,attributeLocations:aa})),this._blendOption===Oi.OPAQUE&&(C=new It({sources:[FC]}),this._sp=gn.replaceCache({context:A,shaderProgram:this._sp,vertexShaderSource:h,fragmentShaderSource:C,attributeLocations:aa})),this._blendOption===Oi.TRANSLUCENT&&(C=new It({sources:[FC]}),this._spTranslucent=gn.replaceCache({context:A,shaderProgram:this._spTranslucent,vertexShaderSource:h,fragmentShaderSource:C,attributeLocations:aa})),this._compiledShaderScaleByDistance=this._shaderScaleByDistance,this._compiledShaderTranslucencyByDistance=this._shaderTranslucencyByDistance,this._compiledShaderDistanceDisplayCondition=this._shaderDistanceDisplayCondition,this._compiledShaderDisableDepthDistance=this._shaderDisableDepthDistance);let _,I,b,x,T=e.commandList;if(l.render||d){let w=this._colorCommands,R=this._blendOption===Oi.OPAQUE,z=this._blendOption===Oi.OPAQUE_AND_TRANSLUCENT;_=this._vaf.va,I=_.length,w.length=I;let M=z?I*2:I;for(x=0;x<M;++x){let N=R||z&&x%2===0;b=w[x],c(b)||(b=w[x]=new ft),b.primitiveType=Me.POINTS,b.pass=N||!z?He.OPAQUE:He.TRANSLUCENT,b.owner=this;let O=z?Math.floor(x/2):x;b.boundingVolume=m,b.modelMatrix=p,b.shaderProgram=N?this._sp:this._spTranslucent,b.uniformMap=this._uniforms,b.vertexArray=_[O].va,b.renderState=N?this._rsOpaque:this._rsTranslucent,b.debugShowBoundingVolume=this.debugShowBoundingVolume,b.pickId="v_pickColor",T.push(b)}}};gc.prototype.isDestroyed=function(){return!1};gc.prototype.destroy=function(){return this._sp=this._sp&&this._sp.destroy(),this._spTranslucent=this._spTranslucent&&this._spTranslucent.destroy(),this._spPick=this._spPick&&this._spPick.destroy(),this._vaf=this._vaf&&this._vaf.destroy(),t4(this._pointPrimitives),me(this)};var ou=gc;var Mw;typeof performance<"u"&&typeof performance.now=="function"&&isFinite(performance.now())?Mw=function(){return performance.now()}:Mw=function(){return Date.now()};var Pw=Mw;function Sr(e){e=e??G.EMPTY_OBJECT,this._primitives=[],this._guid=ji(),this._primitiveAdded=new Le,this._primitiveRemoved=new Le,this._zIndex=void 0,this.show=e.show??!0,this.destroyPrimitives=e.destroyPrimitives??!0,this._countReferences=e.countReferences??!1}Object.defineProperties(Sr.prototype,{length:{get:function(){return this._primitives.length}},primitiveAdded:{get:function(){return this._primitiveAdded}},primitiveRemoved:{get:function(){return this._primitiveRemoved}}});Sr.prototype.add=function(e,t){let n=c(t),i=e._external=e._external||{},o=i._composites=i._composites||{};return o[this._guid]={collection:this},n?this._primitives.splice(t,0,e):this._primitives.push(e),this._countReferences&&(c(i._referenceCount)?++i._referenceCount:i._referenceCount=1),this._primitiveAdded.raiseEvent(e),e};Sr.prototype.remove=function(e){if(this.contains(e)){let t=this._primitives.indexOf(e);if(t!==-1)return this._primitives.splice(t,1),delete e._external._composites[this._guid],this._countReferences&&e._external._referenceCount--,this.destroyPrimitives&&(!this._countReferences||e._external._referenceCount<=0)&&e.destroy(),this._primitiveRemoved.raiseEvent(e),!0}return!1};Sr.prototype.removeAndDestroy=function(e){let t=this.remove(e);return t&&!this.destroyPrimitives&&e.destroy(),t};Sr.prototype.removeAll=function(){let e=this._primitives,t=e.length;for(let n=0;n<t;++n){let i=e[n];delete i._external._composites[this._guid],this._countReferences&&i._external._referenceCount--,this.destroyPrimitives&&(!this._countReferences||i._external._referenceCount<=0)&&i.destroy(),this._primitiveRemoved.raiseEvent(i)}this._primitives=[]};Sr.prototype.contains=function(e){return!!(c(e)&&e._external&&e._external._composites&&e._external._composites[this._guid])};function Uy(e,t){return e._primitives.indexOf(t)}Sr.prototype.raise=function(e){if(c(e)){let t=Uy(this,e),n=this._primitives;if(t!==n.length-1){let i=n[t];n[t]=n[t+1],n[t+1]=i}}};Sr.prototype.raiseToTop=function(e){if(c(e)){let t=Uy(this,e),n=this._primitives;t!==n.length-1&&(n.splice(t,1),n.push(e))}};Sr.prototype.lower=function(e){if(c(e)){let t=Uy(this,e),n=this._primitives;if(t!==0){let i=n[t];n[t]=n[t-1],n[t-1]=i}}};Sr.prototype.lowerToBottom=function(e){if(c(e)){let t=Uy(this,e),n=this._primitives;t!==0&&(n.splice(t,1),n.unshift(e))}};Sr.prototype.get=function(e){return this._primitives[e]};Sr.prototype.update=function(e){if(!this.show)return;let t=this._primitives;for(let n=0;n<t.length;++n)t[n].update(e)};Sr.prototype.prePassesUpdate=function(e){let t=this._primitives;for(let n=0;n<t.length;++n){let i=t[n];c(i.prePassesUpdate)&&i.prePassesUpdate(e)}};Sr.prototype.updateForPass=function(e,t){let n=this._primitives;for(let i=0;i<n.length;++i){let o=n[i];c(o.updateForPass)&&o.updateForPass(e,t)}};Sr.prototype.postPassesUpdate=function(e){let t=this._primitives;for(let n=0;n<t.length;++n){let i=t[n];c(i.postPassesUpdate)&&i.postPassesUpdate(e)}};Sr.prototype.isDestroyed=function(){return!1};Sr.prototype.destroy=function(){return this.removeAll(),me(this)};var Bf=Sr;function Um(e){e=e??G.EMPTY_OBJECT;let t=e.vertexFormat??Bt.DEFAULT;this._vertexFormat=t,this._workerName="createPlaneGeometry"}Um.packedLength=Bt.packedLength;Um.pack=function(e,t,n){return n=n??0,Bt.pack(e._vertexFormat,t,n),t};var s4=new Bt,Oye={vertexFormat:s4};Um.unpack=function(e,t,n){t=t??0;let i=Bt.unpack(e,t,s4);return c(n)?(n._vertexFormat=Bt.clone(i,n._vertexFormat),n):new Um(Oye)};var zy=new f(-.5,-.5,0),Gy=new f(.5,.5,0);Um.createGeometry=function(e){let t=e._vertexFormat,n=new eo,i,o;if(t.position){if(o=new Float64Array(12),o[0]=zy.x,o[1]=zy.y,o[2]=0,o[3]=Gy.x,o[4]=zy.y,o[5]=0,o[6]=Gy.x,o[7]=Gy.y,o[8]=0,o[9]=zy.x,o[10]=Gy.y,o[11]=0,n.position=new rt({componentDatatype:V.DOUBLE,componentsPerAttribute:3,values:o}),t.normal){let r=new Float32Array(12);r[0]=0,r[1]=0,r[2]=1,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=1,r[9]=0,r[10]=0,r[11]=1,n.normal=new rt({componentDatatype:V.FLOAT,componentsPerAttribute:3,values:r})}if(t.st){let r=new Float32Array(8);r[0]=0,r[1]=0,r[2]=1,r[3]=0,r[4]=1,r[5]=1,r[6]=0,r[7]=1,n.st=new rt({componentDatatype:V.FLOAT,componentsPerAttribute:2,values:r})}if(t.tangent){let r=new Float32Array(12);r[0]=1,r[1]=0,r[2]=0,r[3]=1,r[4]=0,r[5]=0,r[6]=1,r[7]=0,r[8]=0,r[9]=1,r[10]=0,r[11]=0,n.tangent=new rt({componentDatatype:V.FLOAT,componentsPerAttribute:3,values:r})}if(t.bitangent){let r=new Float32Array(12);r[0]=0,r[1]=1,r[2]=0,r[3]=0,r[4]=1,r[5]=0,r[6]=0,r[7]=1,r[8]=0,r[9]=0,r[10]=1,r[11]=0,n.bitangent=new rt({componentDatatype:V.FLOAT,componentsPerAttribute:3,values:r})}i=new Uint16Array(6),i[0]=0,i[1]=1,i[2]=2,i[3]=0,i[4]=2,i[5]=3}return new Dt({attributes:n,indices:i,primitiveType:Me.TRIANGLES,boundingSphere:new le(f.ZERO,Math.sqrt(2))})};var xf=Um;function zm(){this._workerName="createPlaneOutlineGeometry"}zm.packedLength=0;zm.pack=function(e,t){return t};zm.unpack=function(e,t,n){return c(n)?n:new zm};var Tf=new f(-.5,-.5,0),Hy=new f(.5,.5,0);zm.createGeometry=function(){let e=new eo,t=new Uint16Array(8),n=new Float64Array(12);return n[0]=Tf.x,n[1]=Tf.y,n[2]=Tf.z,n[3]=Hy.x,n[4]=Tf.y,n[5]=Tf.z,n[6]=Hy.x,n[7]=Hy.y,n[8]=Tf.z,n[9]=Tf.x,n[10]=Hy.y,n[11]=Tf.z,e.position=new rt({componentDatatype:V.DOUBLE,componentsPerAttribute:3,values:n}),t[0]=0,t[1]=1,t[2]=1,t[3]=2,t[4]=2,t[5]=3,t[6]=3,t[7]=0,new Dt({attributes:e,indices:t,primitiveType:Me.LINES,boundingSphere:new le(f.ZERO,Math.sqrt(2))})};var Gm=zm;var kye=new f,c4=new J;function Uye(e){this.id=e,this.vertexFormat=void 0,this.plane=void 0,this.dimensions=void 0}function Cc(e,t){P_.call(this,{entity:e,scene:t,geometryOptions:new Uye(e),geometryPropertyName:"plane",observedPropertyNames:["availability","position","orientation","plane"]}),this._onEntityPropertyChanged(e,"plane",e.plane,void 0)}c(Object.create)&&(Cc.prototype=Object.create(P_.prototype),Cc.prototype.constructor=Cc);Cc.prototype.createFillGeometryInstance=function(e){let t=this._entity,n=t.isAvailable(e),i,o,r=new IB(n&&t.isShowing&&this._showProperty.getValue(e)&&this._fillProperty.getValue(e)),a=this._distanceDisplayConditionProperty.getValue(e),s=_B.fromDistanceDisplayCondition(a);if(this._materialProperty instanceof _A){let g;c(this._materialProperty.color)&&(this._materialProperty.color.isConstant||n)&&(g=this._materialProperty.color.getValue(e,c4)),c(g)||(g=J.WHITE),o=In.fromColor(g),i={show:r,distanceDisplayCondition:s,color:o}}else i={show:r,distanceDisplayCondition:s};let A=t.plane,l=this._options,d=t.computeModelMatrix(e),m=Pt.getValueOrDefault(A.plane,e,l.plane),p=Pt.getValueOrUndefined(A.dimensions,e,l.dimensions);return l.plane=m,l.dimensions=p,d=Nw(m,p,d,d),new tn({id:t,geometry:new xf(this._options),modelMatrix:d,attributes:i})};Cc.prototype.createOutlineGeometryInstance=function(e){let t=this._entity,n=t.isAvailable(e),i=Pt.getValueOrDefault(this._outlineColorProperty,e,J.BLACK,c4),o=this._distanceDisplayConditionProperty.getValue(e),r=t.plane,a=this._options,s=t.computeModelMatrix(e),A=Pt.getValueOrDefault(r.plane,e,a.plane),l=Pt.getValueOrUndefined(r.dimensions,e,a.dimensions);return a.plane=A,a.dimensions=l,s=Nw(A,l,s,s),new tn({id:t,geometry:new Gm,modelMatrix:s,attributes:{show:new IB(n&&t.isShowing&&this._showProperty.getValue(e)&&this._showOutlineProperty.getValue(e)),color:In.fromColor(i),distanceDisplayCondition:_B.fromDistanceDisplayCondition(o)}})};Cc.prototype._isHidden=function(e,t){return!c(t.plane)||!c(t.dimensions)||!c(e.position)||P_.prototype._isHidden.call(this,e,t)};Cc.prototype._getIsClosed=function(e){return!1};Cc.prototype._isDynamic=function(e,t){return!e.position.isConstant||!Pt.isConstant(e.orientation)||!t.plane.isConstant||!t.dimensions.isConstant||!Pt.isConstant(t.outlineWidth)};Cc.prototype._setStaticOptions=function(e,t){let n=this._materialProperty instanceof _A,i=this._options;i.vertexFormat=n?Tn.VERTEX_FORMAT:m_.MaterialSupport.TEXTURED.vertexFormat,i.plane=t.plane.getValue(wu.MINIMUM_VALUE,i.plane),i.dimensions=t.dimensions.getValue(wu.MINIMUM_VALUE,i.dimensions)};Cc.DynamicGeometryUpdater=Hm;function Hm(e,t,n){T_.call(this,e,t,n)}c(Object.create)&&(Hm.prototype=Object.create(T_.prototype),Hm.prototype.constructor=Hm);Hm.prototype._isHidden=function(e,t,n){let i=this._options,o=Pt.getValueOrUndefined(e.position,n,kye);return!c(o)||!c(i.plane)||!c(i.dimensions)||T_.prototype._isHidden.call(this,e,t,n)};Hm.prototype._setOptions=function(e,t,n){let i=this._options;i.plane=Pt.getValueOrDefault(t.plane,n,i.plane),i.dimensions=Pt.getValueOrUndefined(t.dimensions,n,i.dimensions)};var zye=new f,Gye=new f,Hye=new f,Vye=new f,jye=new ne,Yye=new ne,Wye=new Q;function Nw(e,t,n,i){let o=e.normal,r=e.distance,a=f.multiplyByScalar(o,-r,Hye),s=f.clone(f.UNIT_Z,Gye);S.equalsEpsilon(Math.abs(f.dot(s,o)),1,S.EPSILON8)&&(s=f.clone(f.UNIT_Y,s));let A=f.cross(s,o,zye);s=f.cross(o,A,s),f.normalize(A,A),f.normalize(s,s);let l=jye;ne.setColumn(l,0,A,l),ne.setColumn(l,1,s,l),ne.setColumn(l,2,o,l);let d=f.fromElements(t.x,t.y,1,Vye),m=ne.multiplyByScale(l,d,Yye),p=Q.fromRotationTranslation(m,a,Wye);return Q.multiplyTransformation(n,p,i)}Cc.createPrimitiveMatrix=Nw;var Lw=Cc;var qye=new f,Jye=new oi,Kye=new L,Xye=new L,Zye=new f,$ye=new f,ebe=new f,kC=new f,tbe=new f,nbe=new f,A4=new gt,ibe=new ne,obe=new ne,rbe=new f;function abe(e,t,n,i,o,r,a,s,A){let l=e.positions,d=yr.triangulate(e.positions2D,e.holes);d.length<3&&(d=[0,1,2]);let m=Ge.createTypedArray(l.length,d.length);m.set(d);let p=ibe;if(i!==0){let u=gt.fromAxisAngle(a,i,A4);if(p=ne.fromQuaternion(u,p),t.tangent||t.bitangent){u=gt.fromAxisAngle(a,-i,A4);let E=ne.fromQuaternion(u,obe);s=f.normalize(ne.multiplyByVector(E,s,s),s),t.bitangent&&(A=f.normalize(f.cross(a,s,A),A))}}else p=ne.clone(ne.IDENTITY,p);let g=Xye;t.st&&(g.x=n.x,g.y=n.y);let h=l.length,C=h*3,_=new Float64Array(C),I=t.normal?new Float32Array(C):void 0,b=t.tangent?new Float32Array(C):void 0,x=t.bitangent?new Float32Array(C):void 0,T=t.st?new Float32Array(h*2):void 0,w=0,R=0,z=0,M=0,N=0;for(let u=0;u<h;u++){let E=l[u];if(_[w++]=E.x,_[w++]=E.y,_[w++]=E.z,t.st)if(c(o)&&o.positions.length===h)T[N++]=o.positions[u].x,T[N++]=o.positions[u].y;else{let y=ne.multiplyByVector(p,E,qye),B=r(y,Kye);L.subtract(B,g,B);let D=S.clamp(B.x/n.width,0,1),v=S.clamp(B.y/n.height,0,1);T[N++]=D,T[N++]=v}t.normal&&(I[R++]=a.x,I[R++]=a.y,I[R++]=a.z),t.tangent&&(b[M++]=s.x,b[M++]=s.y,b[M++]=s.z),t.bitangent&&(x[z++]=A.x,x[z++]=A.y,x[z++]=A.z)}let O=new eo;return t.position&&(O.position=new rt({componentDatatype:V.DOUBLE,componentsPerAttribute:3,values:_})),t.normal&&(O.normal=new rt({componentDatatype:V.FLOAT,componentsPerAttribute:3,values:I})),t.tangent&&(O.tangent=new rt({componentDatatype:V.FLOAT,componentsPerAttribute:3,values:b})),t.bitangent&&(O.bitangent=new rt({componentDatatype:V.FLOAT,componentsPerAttribute:3,values:x})),t.st&&(O.st=new rt({componentDatatype:V.FLOAT,componentsPerAttribute:2,values:T})),new Dt({attributes:O,indices:m,primitiveType:Me.TRIANGLES})}function Gd(e){e=e??G.EMPTY_OBJECT;let t=e.polygonHierarchy,n=e.textureCoordinates,i=e.vertexFormat??Bt.DEFAULT;this._vertexFormat=Bt.clone(i),this._polygonHierarchy=t,this._stRotation=e.stRotation??0,this._ellipsoid=pe.clone(e.ellipsoid??pe.default),this._workerName="createCoplanarPolygonGeometry",this._textureCoordinates=n,this.packedLength=Yn.computeHierarchyPackedLength(t,f)+Bt.packedLength+pe.packedLength+(c(n)?Yn.computeHierarchyPackedLength(n,L):1)+2}Gd.fromPositions=function(e){e=e??G.EMPTY_OBJECT;let t={polygonHierarchy:{positions:e.positions},vertexFormat:e.vertexFormat,stRotation:e.stRotation,ellipsoid:e.ellipsoid,textureCoordinates:e.textureCoordinates};return new Gd(t)};Gd.pack=function(e,t,n){return n=n??0,n=Yn.packPolygonHierarchy(e._polygonHierarchy,t,n,f),pe.pack(e._ellipsoid,t,n),n+=pe.packedLength,Bt.pack(e._vertexFormat,t,n),n+=Bt.packedLength,t[n++]=e._stRotation,c(e._textureCoordinates)?n=Yn.packPolygonHierarchy(e._textureCoordinates,t,n,L):t[n++]=-1,t[n++]=e.packedLength,t};var sbe=pe.clone(pe.UNIT_SPHERE),cbe=new Bt,Abe={polygonHierarchy:{}};Gd.unpack=function(e,t,n){t=t??0;let i=Yn.unpackPolygonHierarchy(e,t,f);t=i.startingIndex,delete i.startingIndex;let o=pe.unpack(e,t,sbe);t+=pe.packedLength;let r=Bt.unpack(e,t,cbe);t+=Bt.packedLength;let a=e[t++],s=e[t]===-1?void 0:Yn.unpackPolygonHierarchy(e,t,L);c(s)?(t=s.startingIndex,delete s.startingIndex):t++;let A=e[t++];return c(n)||(n=new Gd(Abe)),n._polygonHierarchy=i,n._ellipsoid=pe.clone(o,n._ellipsoid),n._vertexFormat=Bt.clone(r,n._vertexFormat),n._stRotation=a,n._textureCoordinates=s,n.packedLength=A,n};Gd.createGeometry=function(e){let t=e._vertexFormat,n=e._polygonHierarchy,i=e._stRotation,o=e._textureCoordinates,r=c(o),a=n.positions;if(a=Jr(a,f.equalsEpsilon,!0),a.length<3)return;let s=Zye,A=$ye,l=ebe,d=tbe,m=nbe;if(!Rm.computeProjectTo2DArguments(a,kC,d,m))return;if(s=f.cross(d,m,s),s=f.normalize(s,s),!f.equalsEpsilon(kC,f.ZERO,S.EPSILON6)){let N=e._ellipsoid.geodeticSurfaceNormal(kC,rbe);f.dot(s,N)<0&&(s=f.negate(s,s),d=f.negate(d,d))}let g=Rm.createProjectPointsTo2DFunction(kC,d,m),h=Rm.createProjectPointTo2DFunction(kC,d,m);t.tangent&&(A=f.clone(d,A)),t.bitangent&&(l=f.clone(m,l));let C=Yn.polygonsFromHierarchy(n,r,g,!1),_=C.hierarchy,I=C.polygons,b=function(N){return N},x=r?Yn.polygonsFromHierarchy(o,!0,b,!1).polygons:void 0;if(_.length===0)return;a=_[0].outerRing;let T=le.fromPoints(a),w=Yn.computeBoundingRectangle(s,h,a,i,Jye),R=[];for(let N=0;N<I.length;N++){let O=new tn({geometry:abe(I[N],t,w,i,r?x[N]:void 0,h,s,A,l)});R.push(O)}let z=li.combineInstances(R)[0];z.attributes.position.values=new Float64Array(z.attributes.position.values),z.indices=Ge.createTypedArray(z.attributes.position.values.length/3,z.indices);let M=z.attributes;return t.position||delete M.position,new Dt({attributes:M,indices:z.indices,primitiveType:z.primitiveType,boundingSphere:T})};var Vm=Gd;var h4=[];function lbe(e,t,n,i,o){let r=h4;r.length=o;let a,s=n.red,A=n.green,l=n.blue,d=n.alpha,m=i.red,p=i.green,g=i.blue,h=i.alpha;if(J.equals(n,i)){for(a=0;a<o;a++)r[a]=J.clone(n);return r}let C=(m-s)/o,_=(p-A)/o,I=(g-l)/o,b=(h-d)/o;for(a=0;a<o;a++)r[a]=new J(s+a*C,A+a*_,l+a*I,d+a*b);return r}function UC(e){e=e??G.EMPTY_OBJECT;let t=e.positions,n=e.colors,i=e.width??1,o=e.colorsPerVertex??!1;this._positions=t,this._colors=n,this._width=i,this._colorsPerVertex=o,this._vertexFormat=Bt.clone(e.vertexFormat??Bt.DEFAULT),this._arcType=e.arcType??ti.GEODESIC,this._granularity=e.granularity??S.RADIANS_PER_DEGREE,this._ellipsoid=pe.clone(e.ellipsoid??pe.default),this._workerName="createPolylineGeometry";let r=1+t.length*f.packedLength;r+=c(n)?1+n.length*J.packedLength:1,this.packedLength=r+pe.packedLength+Bt.packedLength+4}UC.pack=function(e,t,n){n=n??0;let i,o=e._positions,r=o.length;for(t[n++]=r,i=0;i<r;++i,n+=f.packedLength)f.pack(o[i],t,n);let a=e._colors;for(r=c(a)?a.length:0,t[n++]=r,i=0;i<r;++i,n+=J.packedLength)J.pack(a[i],t,n);return pe.pack(e._ellipsoid,t,n),n+=pe.packedLength,Bt.pack(e._vertexFormat,t,n),n+=Bt.packedLength,t[n++]=e._width,t[n++]=e._colorsPerVertex?1:0,t[n++]=e._arcType,t[n]=e._granularity,t};var m4=pe.clone(pe.UNIT_SPHERE),p4=new Bt,Hd={positions:void 0,colors:void 0,ellipsoid:m4,vertexFormat:p4,width:void 0,colorsPerVertex:void 0,arcType:void 0,granularity:void 0};UC.unpack=function(e,t,n){t=t??0;let i,o=e[t++],r=new Array(o);for(i=0;i<o;++i,t+=f.packedLength)r[i]=f.unpack(e,t);o=e[t++];let a=o>0?new Array(o):void 0;for(i=0;i<o;++i,t+=J.packedLength)a[i]=J.unpack(e,t);let s=pe.unpack(e,t,m4);t+=pe.packedLength;let A=Bt.unpack(e,t,p4);t+=Bt.packedLength;let l=e[t++],d=e[t++]===1,m=e[t++],p=e[t];return c(n)?(n._positions=r,n._colors=a,n._ellipsoid=pe.clone(s,n._ellipsoid),n._vertexFormat=Bt.clone(A,n._vertexFormat),n._width=l,n._colorsPerVertex=d,n._arcType=m,n._granularity=p,n):(Hd.positions=r,Hd.colors=a,Hd.width=l,Hd.colorsPerVertex=d,Hd.arcType=m,Hd.granularity=p,new UC(Hd))};var l4=new f,u4=new f,f4=new f,d4=new f;UC.createGeometry=function(e){let t=e._width,n=e._vertexFormat,i=e._colors,o=e._colorsPerVertex,r=e._arcType,a=e._granularity,s=e._ellipsoid,A,l,d,m=[],p=Jr(e._positions,f.equalsEpsilon,!1,m);if(c(i)&&m.length>0){let D=0,v=m[0];i=i.filter(function(F,P){let U=!1;return o?U=P===v||P===0&&v===1:U=P+1===v,U?(D++,v=m[D],!1):!0})}let g=p.length;if(g<2||t<=0)return;if(r===ti.GEODESIC||r===ti.RHUMB){let D,v;r===ti.GEODESIC?(D=S.chordLength(a,s.maximumRadius),v=Vl.numberOfPoints):(D=a,v=Vl.numberOfPointsRhumbLine);let F=Vl.extractHeights(p,s);if(c(i)){let P=1;for(A=0;A<g-1;++A)P+=v(p[A],p[A+1],D);let U=new Array(P),k=0;for(A=0;A<g-1;++A){let j=p[A],q=p[A+1],$=i[A],H=v(j,q,D);if(o&&A<P){let Z=i[A+1],ee=lbe(j,q,$,Z,H),Ae=ee.length;for(l=0;l<Ae;++l)U[k++]=ee[l]}else for(l=0;l<H;++l)U[k++]=J.clone($)}U[k]=J.clone(i[i.length-1]),i=U,h4.length=0}r===ti.GEODESIC?p=Vl.generateCartesianArc({positions:p,minDistance:D,ellipsoid:s,height:F}):p=Vl.generateCartesianRhumbArc({positions:p,granularity:D,ellipsoid:s,height:F})}g=p.length;let h=g*4-4,C=new Float64Array(h*3),_=new Float64Array(h*3),I=new Float64Array(h*3),b=new Float32Array(h*2),x=n.st?new Float32Array(h*2):void 0,T=c(i)?new Uint8Array(h*4):void 0,w=0,R=0,z=0,M=0,N;for(l=0;l<g;++l){l===0?(N=l4,f.subtract(p[0],p[1],N),f.add(p[0],N,N)):N=p[l-1],f.clone(N,f4),f.clone(p[l],u4),l===g-1?(N=l4,f.subtract(p[g-1],p[g-2],N),f.add(p[g-1],N,N)):N=p[l+1],f.clone(N,d4);let D,v;c(T)&&(l!==0&&!o?D=i[l-1]:D=i[l],l!==g-1&&(v=i[l]));let F=l===0?2:0,P=l===g-1?2:4;for(d=F;d<P;++d){f.pack(u4,C,w),f.pack(f4,_,w),f.pack(d4,I,w),w+=3;let U=d-2<0?-1:1;if(b[R++]=2*(d%2)-1,b[R++]=U*t,n.st&&(x[z++]=l/(g-1),x[z++]=Math.max(b[R-2],0)),c(T)){let k=d<2?D:v;T[M++]=J.floatToByte(k.red),T[M++]=J.floatToByte(k.green),T[M++]=J.floatToByte(k.blue),T[M++]=J.floatToByte(k.alpha)}}}let O=new eo;O.position=new rt({componentDatatype:V.DOUBLE,componentsPerAttribute:3,values:C}),O.prevPosition=new rt({componentDatatype:V.DOUBLE,componentsPerAttribute:3,values:_}),O.nextPosition=new rt({componentDatatype:V.DOUBLE,componentsPerAttribute:3,values:I}),O.expandAndWidth=new rt({componentDatatype:V.FLOAT,componentsPerAttribute:2,values:b}),n.st&&(O.st=new rt({componentDatatype:V.FLOAT,componentsPerAttribute:2,values:x})),c(T)&&(O.color=new rt({componentDatatype:V.UNSIGNED_BYTE,componentsPerAttribute:4,values:T,normalize:!0}));let u=Ge.createTypedArray(h,g*6-6),E=0,y=0,B=g-1;for(l=0;l<B;++l)u[y++]=E,u[y++]=E+2,u[y++]=E+1,u[y++]=E+1,u[y++]=E+2,u[y++]=E+3,E+=4;return new Dt({attributes:O,indices:u,primitiveType:Me.TRIANGLES,boundingSphere:le.fromPoints(p),geometryType:cl.POLYLINES})};var zC=UC;function ube(e){return typeof e=="string"&&(e=document.getElementById(e)),e}var GC=ube;var fbe={NONE:0,LERC:1},Vy=Object.freeze(fbe);var dbe={NONE:0,BITS12:1},ss=Object.freeze(dbe);var Vd=new f,hbe=new f,Ec=new L,jy=new Q,mbe=new Q,pbe=Math.pow(2,12);function sa(e,t,n,i,o,r,a,s,A,l){let d=ss.NONE,m,p;if(c(t)&&c(n)&&c(i)&&c(o)){let g=t.minimum,h=t.maximum,C=f.subtract(h,g,hbe),_=i-n;Math.max(f.maximumComponent(C),_)<pbe-1?d=ss.BITS12:d=ss.NONE,m=Q.inverseTransformation(o,new Q);let b=f.negate(g,Vd);Q.multiply(Q.fromTranslation(b,jy),m,m);let x=Vd;x.x=1/C.x,x.y=1/C.y,x.z=1/C.z,Q.multiply(Q.fromScale(x,jy),m,m),p=Q.clone(o),Q.setTranslation(p,f.ZERO,p),o=Q.clone(o,new Q);let T=Q.fromTranslation(g,jy),w=Q.fromScale(C,mbe),R=Q.multiply(T,w,jy);Q.multiply(o,R,o),Q.multiply(p,R,p)}this.quantization=d,this.minimumHeight=n,this.maximumHeight=i,this.center=f.clone(e),this.toScaledENU=m,this.fromScaledENU=o,this.matrix=p,this.hasVertexNormals=r,this.hasWebMercatorT=a??!1,this.hasGeodeticSurfaceNormals=s??!1,this.exaggeration=A??1,this.exaggerationRelativeHeight=l??0,this.stride=0,this._offsetGeodeticSurfaceNormal=0,this._offsetVertexNormal=0,this._calculateStrideAndOffsets()}sa.prototype.encode=function(e,t,n,i,o,r,a,s){let A=i.x,l=i.y;if(this.quantization===ss.BITS12){n=Q.multiplyByPoint(this.toScaledENU,n,Vd),n.x=S.clamp(n.x,0,1),n.y=S.clamp(n.y,0,1),n.z=S.clamp(n.z,0,1);let d=this.maximumHeight-this.minimumHeight,m=S.clamp((o-this.minimumHeight)/d,0,1);L.fromElements(n.x,n.y,Ec);let p=Yt.compressTextureCoordinates(Ec);L.fromElements(n.z,m,Ec);let g=Yt.compressTextureCoordinates(Ec);L.fromElements(A,l,Ec);let h=Yt.compressTextureCoordinates(Ec);if(e[t++]=p,e[t++]=g,e[t++]=h,this.hasWebMercatorT){L.fromElements(a,0,Ec);let C=Yt.compressTextureCoordinates(Ec);e[t++]=C}}else f.subtract(n,this.center,Vd),e[t++]=Vd.x,e[t++]=Vd.y,e[t++]=Vd.z,e[t++]=o,e[t++]=A,e[t++]=l,this.hasWebMercatorT&&(e[t++]=a);return this.hasVertexNormals&&(e[t++]=Yt.octPackFloat(r)),this.hasGeodeticSurfaceNormals&&(e[t++]=s.x,e[t++]=s.y,e[t++]=s.z),t};var gbe=new f,g4=new f;sa.prototype.addGeodeticSurfaceNormals=function(e,t,n){if(this.hasGeodeticSurfaceNormals)return;let i=this.stride,o=e.length/i;this.hasGeodeticSurfaceNormals=!0,this._calculateStrideAndOffsets();let r=this.stride;for(let a=0;a<o;a++){for(let d=0;d<i;d++){let m=a*i+d,p=a*r+d;t[p]=e[m]}let s=this.decodePosition(t,a,gbe),A=n.geodeticSurfaceNormal(s,g4),l=a*r+this._offsetGeodeticSurfaceNormal;t[l]=A.x,t[l+1]=A.y,t[l+2]=A.z}};sa.prototype.removeGeodeticSurfaceNormals=function(e,t){if(!this.hasGeodeticSurfaceNormals)return;let n=this.stride,i=e.length/n;this.hasGeodeticSurfaceNormals=!1,this._calculateStrideAndOffsets();let o=this.stride;for(let r=0;r<i;r++)for(let a=0;a<o;a++){let s=r*n+a,A=r*o+a;t[A]=e[s]}};sa.prototype.decodePosition=function(e,t,n){if(c(n)||(n=new f),t*=this.stride,this.quantization===ss.BITS12){let i=Yt.decompressTextureCoordinates(e[t],Ec);n.x=i.x,n.y=i.y;let o=Yt.decompressTextureCoordinates(e[t+1],Ec);return n.z=o.x,Q.multiplyByPoint(this.fromScaledENU,n,n)}return n.x=e[t],n.y=e[t+1],n.z=e[t+2],f.add(n,this.center,n)};sa.prototype.getExaggeratedPosition=function(e,t,n){n=this.decodePosition(e,t,n);let i=this.exaggeration,o=this.exaggerationRelativeHeight;if(i!==1&&this.hasGeodeticSurfaceNormals){let a=this.decodeGeodeticSurfaceNormal(e,t,g4),s=this.decodeHeight(e,t),A=pa.getHeight(s,i,o)-s;n.x+=a.x*A,n.y+=a.y*A,n.z+=a.z*A}return n};sa.prototype.decodeTextureCoordinates=function(e,t,n){return c(n)||(n=new L),t*=this.stride,this.quantization===ss.BITS12?Yt.decompressTextureCoordinates(e[t+2],n):L.fromElements(e[t+4],e[t+5],n)};sa.prototype.decodeHeight=function(e,t){return t*=this.stride,this.quantization===ss.BITS12?Yt.decompressTextureCoordinates(e[t+1],Ec).y*(this.maximumHeight-this.minimumHeight)+this.minimumHeight:e[t+3]};sa.prototype.decodeWebMercatorT=function(e,t){return t*=this.stride,this.quantization===ss.BITS12?Yt.decompressTextureCoordinates(e[t+3],Ec).x:e[t+6]};sa.prototype.getOctEncodedNormal=function(e,t,n){t=t*this.stride+this._offsetVertexNormal;let i=e[t]/256,o=Math.floor(i),r=(i-o)*256;return L.fromElements(o,r,n)};sa.prototype.decodeGeodeticSurfaceNormal=function(e,t,n){return t=t*this.stride+this._offsetGeodeticSurfaceNormal,n.x=e[t],n.y=e[t+1],n.z=e[t+2],n};sa.prototype._calculateStrideAndOffsets=function(){let e=0;switch(this.quantization){case ss.BITS12:e+=3;break;default:e+=6}this.hasWebMercatorT&&(e+=1),this.hasVertexNormals&&(this._offsetVertexNormal=e,e+=1),this.hasGeodeticSurfaceNormals&&(this._offsetGeodeticSurfaceNormal=e,e+=3),this.stride=e};var Yy={position3DAndHeight:0,textureCoordAndEncodedNormals:1,geodeticSurfaceNormal:2},Wy={compressed0:0,compressed1:1,geodeticSurfaceNormal:2};sa.prototype.getAttributes=function(e){let t=V.FLOAT,n=V.getSizeInBytes(t),i=this.stride*n,o=0,r=[];function a(s,A){r.push({index:s,vertexBuffer:e,componentDatatype:t,componentsPerAttribute:A,offsetInBytes:o,strideInBytes:i}),o+=A*n}if(this.quantization===ss.NONE){a(Yy.position3DAndHeight,4);let s=2;s+=this.hasWebMercatorT?1:0,s+=this.hasVertexNormals?1:0,a(Yy.textureCoordAndEncodedNormals,s),this.hasGeodeticSurfaceNormals&&a(Yy.geodeticSurfaceNormal,3)}else{let s=this.hasWebMercatorT||this.hasVertexNormals,A=this.hasWebMercatorT&&this.hasVertexNormals;a(Wy.compressed0,s?4:3),A&&a(Wy.compressed1,1),this.hasGeodeticSurfaceNormals&&a(Wy.geodeticSurfaceNormal,3)}return r};sa.prototype.getAttributeLocations=function(){return this.quantization===ss.NONE?Yy:Wy};sa.clone=function(e,t){if(c(e))return c(t)||(t=new sa),t.quantization=e.quantization,t.minimumHeight=e.minimumHeight,t.maximumHeight=e.maximumHeight,t.center=f.clone(e.center),t.toScaledENU=Q.clone(e.toScaledENU),t.fromScaledENU=Q.clone(e.fromScaledENU),t.matrix=Q.clone(e.matrix),t.hasVertexNormals=e.hasVertexNormals,t.hasWebMercatorT=e.hasWebMercatorT,t.hasGeodeticSurfaceNormals=e.hasGeodeticSurfaceNormals,t.exaggeration=e.exaggeration,t.exaggerationRelativeHeight=e.exaggerationRelativeHeight,t._calculateStrideAndOffsets(),t};var ru=sa;var HA={};HA.DEFAULT_STRUCTURE=Object.freeze({heightScale:1,heightOffset:0,elementsPerHeight:1,stride:1,elementMultiplier:256,isBigEndian:!1});var Fw=new f,Cbe=new Q,Ebe=new f,_be=new f;HA.computeVertices=function(e){let t=Math.cos,n=Math.sin,i=Math.sqrt,o=Math.atan,r=Math.exp,a=S.PI_OVER_TWO,s=S.toRadians,A=e.heightmap,l=e.width,d=e.height,m=e.skirtHeight,p=m>0,g=e.isGeographic??!0,h=e.ellipsoid??pe.default,C=1/h.maximumRadius,_=de.clone(e.nativeRectangle),I=de.clone(e.rectangle),b,x,T,w;c(I)?(b=I.west,x=I.south,T=I.east,w=I.north):g?(b=s(_.west),x=s(_.south),T=s(_.east),w=s(_.north)):(b=_.west*C,x=a-2*o(r(-_.south*C)),T=_.east*C,w=a-2*o(r(-_.north*C)));let R=e.relativeToCenter,z=c(R);R=z?R:f.ZERO;let M=e.includeWebMercatorT??!1,N=e.exaggeration??1,O=e.exaggerationRelativeHeight??0,E=N!==1,y=e.structure??HA.DEFAULT_STRUCTURE,B=y.heightScale??HA.DEFAULT_STRUCTURE.heightScale,D=y.heightOffset??HA.DEFAULT_STRUCTURE.heightOffset,v=y.elementsPerHeight??HA.DEFAULT_STRUCTURE.elementsPerHeight,F=y.stride??HA.DEFAULT_STRUCTURE.stride,P=y.elementMultiplier??HA.DEFAULT_STRUCTURE.elementMultiplier,U=y.isBigEndian??HA.DEFAULT_STRUCTURE.isBigEndian,k=de.computeWidth(_),j=de.computeHeight(_),q=k/(l-1),$=j/(d-1);g||(k*=C,j*=C);let H=h.radiiSquared,Z=H.x,ee=H.y,Ae=H.z,ge=65536,ce=-65536,he=sn.eastNorthUpToFixedFrame(R,h),Ie=Q.inverseTransformation(he,Cbe),Ne,_e;M&&(Ne=jn.geodeticLatitudeToMercatorAngle(x),_e=1/(jn.geodeticLatitudeToMercatorAngle(w)-Ne));let ve=Ebe;ve.x=Number.POSITIVE_INFINITY,ve.y=Number.POSITIVE_INFINITY,ve.z=Number.POSITIVE_INFINITY;let at=_be;at.x=Number.NEGATIVE_INFINITY,at.y=Number.NEGATIVE_INFINITY,at.z=Number.NEGATIVE_INFINITY;let Tt=Number.POSITIVE_INFINITY,st=l*d,Rn=m>0?l*2+d*2:0,Lt=st+Rn,$t=new Array(Lt),ci=new Array(Lt),Ft=new Array(Lt),pi=M?new Array(Lt):[],Kn=E?new Array(Lt):[],lt=0,Ct=d,yi=0,et=l;p&&(--lt,++Ct,--yi,++et);let Qo=1e-5;for(let Bn=lt;Bn<Ct;++Bn){let Zn=Bn;Zn<0&&(Zn=0),Zn>=d&&(Zn=d-1);let ni=_.north-$*Zn;g?ni=s(ni):ni=a-2*o(r(-ni*C));let Ji=(ni-x)/(w-x);Ji=S.clamp(Ji,0,1);let Qr=Bn===lt,Eo=Bn===Ct-1;m>0&&(Qr?ni+=Qo*j:Eo&&(ni-=Qo*j));let Aa=t(ni),Gr=n(ni),Jt=Ae*Gr,An;M&&(An=(jn.geodeticLatitudeToMercatorAngle(ni)-Ne)*_e);for(let vo=yi;vo<et;++vo){let bi=vo;bi<0&&(bi=0),bi>=l&&(bi=l-1);let hr=Zn*(l*F)+bi*F,kn;if(v===1)kn=A[hr];else{kn=0;let ii;if(U)for(ii=0;ii<v;++ii)kn=kn*P+A[hr+ii];else for(ii=v-1;ii>=0;--ii)kn=kn*P+A[hr+ii]}kn=kn*B+D,ce=Math.max(ce,kn),ge=Math.min(ge,kn);let Bi=_.west+q*bi;g?Bi=s(Bi):Bi=Bi*C;let Ns=(Bi-b)/(T-b);Ns=S.clamp(Ns,0,1);let Vi=Zn*l+bi;if(m>0){let ii=vo===yi,Et=vo===et-1,fe=Qr||Eo||ii||Et;if((Qr||Eo)&&(ii||Et))continue;fe&&(kn-=m,ii?(Vi=st+(d-Zn-1),Bi-=Qo*k):Eo?Vi=st+d+(l-bi-1):Et?(Vi=st+d+l+Zn,Bi+=Qo*k):Qr&&(Vi=st+d+l+d+bi))}let Mo=Aa*t(Bi),Go=Aa*n(Bi),Sc=Z*Mo,_o=ee*Go,vr=1/i(Sc*Mo+_o*Go+Jt*Gr),Ki=Sc*vr,ka=_o*vr,Ua=Jt*vr,$o=new f;$o.x=Ki+Mo*kn,$o.y=ka+Go*kn,$o.z=Ua+Gr*kn,Q.multiplyByPoint(Ie,$o,Fw),f.minimumByComponent(Fw,ve,ve),f.maximumByComponent(Fw,at,at),Tt=Math.min(Tt,kn),$t[Vi]=$o,Ft[Vi]=new L(Ns,Ji),ci[Vi]=kn,M&&(pi[Vi]=An),E&&(Kn[Vi]=h.geodeticSurfaceNormal($o))}}let Xo=le.fromPoints($t),Oa;c(I)&&(Oa=ui.fromRectangle(I,ge,ce,h));let Ro;z&&(Ro=new j9(h).computeHorizonCullingPointPossiblyUnderEllipsoid(R,$t,ge));let zo=new vp(ve,at,R),Xn=new ru(R,zo,Tt,ce,he,!1,M,E,N,O),Zo=new Float32Array(Lt*Xn.stride),gi=0;for(let Bn=0;Bn<Lt;++Bn)gi=Xn.encode(Zo,gi,$t[Bn],Ft[Bn],ci[Bn],void 0,pi[Bn],Kn[Bn]);return{vertices:Zo,maximumHeight:ce,minimumHeight:ge,encoding:Xn,boundingSphere3D:Xo,orientedBoundingBox:Oa,occludeePointInScaledSpace:Ro}};var Ow=HA;function Sf(){be.throwInstantiationError()}Object.defineProperties(Sf.prototype,{credits:{get:be.throwInstantiationError},waterMask:{get:be.throwInstantiationError}});Sf.prototype.interpolateHeight=be.throwInstantiationError;Sf.prototype.isChildAvailable=be.throwInstantiationError;Sf.prototype.createMesh=be.throwInstantiationError;Sf.prototype.upsample=be.throwInstantiationError;Sf.prototype.wasCreatedByUpsampling=be.throwInstantiationError;Sf.maximumAsynchronousTasks=5;var C4=Sf;function Ibe(e,t,n,i,o,r,a,s,A,l,d,m,p,g,h,C){this.center=e,this.vertices=t,this.stride=l??6,this.indices=n,this.indexCountWithoutSkirts=i,this.vertexCountWithoutSkirts=o,this.minimumHeight=r,this.maximumHeight=a,this.boundingSphere3D=s,this.occludeePointInScaledSpace=A,this.orientedBoundingBox=d,this.encoding=m,this.westIndicesSouthToNorth=p,this.southIndicesEastToWest=g,this.eastIndicesNorthToSouth=h,this.northIndicesWestToEast=C}var HC=Ibe;function au(e){this._buffer=e.buffer,this._width=e.width,this._height=e.height,this._childTileMask=e.childTileMask??15,this._encoding=e.encoding??Vy.NONE;let t=Ow.DEFAULT_STRUCTURE,n=e.structure;c(n)?n!==t&&(n.heightScale=n.heightScale??t.heightScale,n.heightOffset=n.heightOffset??t.heightOffset,n.elementsPerHeight=n.elementsPerHeight??t.elementsPerHeight,n.stride=n.stride??t.stride,n.elementMultiplier=n.elementMultiplier??t.elementMultiplier,n.isBigEndian=n.isBigEndian??t.isBigEndian):n=t,this._structure=n,this._createdByUpsampling=e.createdByUpsampling??!1,this._waterMask=e.waterMask,this._skirtHeight=void 0,this._bufferType=this._encoding===Vy.LERC?Float32Array:this._buffer.constructor,this._mesh=void 0}Object.defineProperties(au.prototype,{credits:{get:function(){}},waterMask:{get:function(){return this._waterMask}},childTileMask:{get:function(){return this._childTileMask}}});var E4="createVerticesFromHeightmap",ybe=new $i(E4),bbe=new $i(E4,C4.maximumAsynchronousTasks);au.prototype.createMesh=function(e){e=e??G.EMPTY_OBJECT;let t=e.tilingScheme,n=e.x,i=e.y,o=e.level,r=e.exaggeration??1,a=e.exaggerationRelativeHeight??0,s=e.throttle??!0,A=t.ellipsoid,l=t.tileXYToNativeRectangle(n,i,o),d=t.tileXYToRectangle(n,i,o),m=A.cartographicToCartesian(de.center(d)),p=this._structure,h=Ul.getEstimatedLevelZeroGeometricErrorForAHeightmap(A,this._width,t.getNumberOfXTilesAtLevel(0))/(1<<o);this._skirtHeight=Math.min(h*4,1e3);let _=(s?bbe:ybe).scheduleTask({heightmap:this._buffer,structure:p,includeWebMercatorT:!0,width:this._width,height:this._height,nativeRectangle:l,rectangle:d,relativeToCenter:m,ellipsoid:A,skirtHeight:this._skirtHeight,isGeographic:t.projection instanceof Ai,exaggeration:r,exaggerationRelativeHeight:a,encoding:this._encoding});if(!c(_))return;let I=this;return Promise.resolve(_).then(function(b){let x;I._skirtHeight>0?x=Ul.getRegularGridAndSkirtIndicesAndEdgeIndices(b.gridWidth,b.gridHeight):x=Ul.getRegularGridIndicesAndEdgeIndices(b.gridWidth,b.gridHeight);let T=b.gridWidth*b.gridHeight;return I._mesh=new HC(m,new Float32Array(b.vertices),x.indices,x.indexCountWithoutSkirts,T,b.minimumHeight,b.maximumHeight,le.clone(b.boundingSphere3D),f.clone(b.occludeePointInScaledSpace),b.numberOfAttributes,ui.clone(b.orientedBoundingBox),ru.clone(b.encoding),x.westIndicesSouthToNorth,x.southIndicesEastToWest,x.eastIndicesNorthToSouth,x.northIndicesWestToEast),I._buffer=void 0,I._mesh})};au.prototype._createMeshSync=function(e){let t=e.tilingScheme,n=e.x,i=e.y,o=e.level,r=e.exaggeration??1,a=e.exaggerationRelativeHeight??0,s=t.ellipsoid,A=t.tileXYToNativeRectangle(n,i,o),l=t.tileXYToRectangle(n,i,o),d=s.cartographicToCartesian(de.center(l)),m=this._structure,g=Ul.getEstimatedLevelZeroGeometricErrorForAHeightmap(s,this._width,t.getNumberOfXTilesAtLevel(0))/(1<<o);this._skirtHeight=Math.min(g*4,1e3);let h=Ow.computeVertices({heightmap:this._buffer,structure:m,includeWebMercatorT:!0,width:this._width,height:this._height,nativeRectangle:A,rectangle:l,relativeToCenter:d,ellipsoid:s,skirtHeight:this._skirtHeight,isGeographic:t.projection instanceof Ai,exaggeration:r,exaggerationRelativeHeight:a});this._buffer=void 0;let C;this._skirtHeight>0?C=Ul.getRegularGridAndSkirtIndicesAndEdgeIndices(this._width,this._height):C=Ul.getRegularGridIndicesAndEdgeIndices(this._width,this._height);let _=h.gridWidth*h.gridHeight;return this._mesh=new HC(d,h.vertices,C.indices,C.indexCountWithoutSkirts,_,h.minimumHeight,h.maximumHeight,h.boundingSphere3D,h.occludeePointInScaledSpace,h.encoding.stride,h.orientedBoundingBox,h.encoding,C.westIndicesSouthToNorth,C.southIndicesEastToWest,C.eastIndicesNorthToSouth,C.northIndicesWestToEast),this._mesh};au.prototype.interpolateHeight=function(e,t,n){let i=this._width,o=this._height,r=this._structure,a=r.stride,s=r.elementsPerHeight,A=r.elementMultiplier,l=r.isBigEndian,d=r.heightOffset,m=r.heightScale,p=c(this._mesh),g=this._encoding===Vy.LERC;if(!p&&g)return;let C;if(p){let _=this._mesh.vertices,I=this._mesh.encoding;C=_4(_,I,d,m,e,i,o,t,n)}else C=Bbe(this._buffer,s,A,a,l,e,i,o,t,n),C=C*m+d;return C};au.prototype.upsample=function(e,t,n,i,o,r,a){let s=this._mesh;if(!c(s))return;let A=this._width,l=this._height,d=this._structure,m=d.stride,p=new this._bufferType(A*l*m),g=s.vertices,h=s.encoding,C=e.tileXYToRectangle(t,n,i),_=e.tileXYToRectangle(o,r,a),I=d.heightOffset,b=d.heightScale,x=d.elementsPerHeight,T=d.elementMultiplier,w=d.isBigEndian,R=Math.pow(T,x-1);for(let z=0;z<l;++z){let M=S.lerp(_.north,_.south,z/(l-1));for(let N=0;N<A;++N){let O=S.lerp(_.west,_.east,N/(A-1)),u=_4(g,h,I,b,C,A,l,O,M);u=u<d.lowestEncodedHeight?d.lowestEncodedHeight:u,u=u>d.highestEncodedHeight?d.highestEncodedHeight:u,xbe(p,x,T,R,m,w,z*A+N,u)}}return Promise.resolve(new au({buffer:p,width:A,height:l,childTileMask:0,structure:this._structure,createdByUpsampling:!0}))};au.prototype.isChildAvailable=function(e,t,n,i){let o=2;return n!==e*2&&++o,i!==t*2&&(o-=2),(this._childTileMask&1<<o)!==0};au.prototype.wasCreatedByUpsampling=function(){return this._createdByUpsampling};function Bbe(e,t,n,i,o,r,a,s,A,l){let d=(A-r.west)*(a-1)/(r.east-r.west),m=(l-r.south)*(s-1)/(r.north-r.south),p=d|0,g=p+1;g>=a&&(g=a-1,p=a-2);let h=m|0,C=h+1;C>=s&&(C=s-1,h=s-2);let _=d-p,I=m-h;h=s-1-h,C=s-1-C;let b=qy(e,t,n,i,o,h*a+p),x=qy(e,t,n,i,o,h*a+g),T=qy(e,t,n,i,o,C*a+p),w=qy(e,t,n,i,o,C*a+g);return I4(_,I,b,x,T,w)}function _4(e,t,n,i,o,r,a,s,A){let l=(s-o.west)*(r-1)/(o.east-o.west),d=(A-o.south)*(a-1)/(o.north-o.south),m=l|0,p=m+1;p>=r&&(p=r-1,m=r-2);let g=d|0,h=g+1;h>=a&&(h=a-1,g=a-2);let C=l-m,_=d-g;g=a-1-g,h=a-1-h;let I=(t.decodeHeight(e,g*r+m)-n)/i,b=(t.decodeHeight(e,g*r+p)-n)/i,x=(t.decodeHeight(e,h*r+m)-n)/i,T=(t.decodeHeight(e,h*r+p)-n)/i;return I4(C,_,I,b,x,T)}function I4(e,t,n,i,o,r){return t<e?n+e*(i-n)+t*(r-i):n+e*(r-o)+t*(o-n)}function qy(e,t,n,i,o,r){r*=i;let a=0,s;if(o)for(s=0;s<t;++s)a=a*n+e[r+s];else for(s=t-1;s>=0;--s)a=a*n+e[r+s];return a}function xbe(e,t,n,i,o,r,a,s){a*=o;let A;if(r)for(A=0;A<t-1;++A)e[a+A]=s/i|0,s-=e[a+A]*i,i/=n;else for(A=t-1;A>0;--A)e[a+A]=s/i|0,s-=e[a+A]*i,i/=n;e[a+A]=s}var y4=au;var Tbe={NONE:-1,PARTIAL:0,FULL:1},_c=Object.freeze(Tbe);var Sbe={START:0,LOADING:1,DONE:2,FAILED:3},su=Object.freeze(Sbe);var wbe={FAILED:0,UNLOADED:1,RECEIVING:2,RECEIVED:3,TRANSFORMING:4,TRANSFORMED:5,READY:6},mi=Object.freeze(wbe);function Ui(){this.imagery=[],this.waterMaskTexture=void 0,this.waterMaskTranslationAndScale=new re(0,0,1,1),this.terrainData=void 0,this.vertexArray=void 0,this.tileBoundingRegion=void 0,this.occludeePointInScaledSpace=new f,this.boundingVolumeSourceTile=void 0,this.boundingVolumeIsFromMesh=!1,this.terrainState=mi.UNLOADED,this.mesh=void 0,this.fill=void 0,this.pickBoundingSphere=new le,this.surfaceShader=void 0,this.isClipped=!0,this.clippedByBoundaries=!1}Object.defineProperties(Ui.prototype,{eligibleForUnloading:{get:function(){let e=this.terrainState,n=!(e===mi.RECEIVING||e===mi.TRANSFORMING),i=this.imagery;for(let o=0,r=i.length;n&&o<r;++o){let a=i[o];n=!c(a.loadingImagery)||a.loadingImagery.state!==Xt.TRANSITIONING}return n}},renderedMesh:{get:function(){if(c(this.vertexArray))return this.mesh;if(c(this.fill))return this.fill.mesh}}});var Dbe=new ue;function kw(e,t,n,i,o,r){let a=e.getExaggeratedPosition(i,o,r);if(c(t)&&t!==Ee.SCENE3D){let A=n.ellipsoid.cartesianToCartographic(a,Dbe);a=n.project(A,r),a=f.fromElements(a.z,a.x,a.y,r)}return a}var Qbe=new f,Rbe=new f,vbe=new f;Ui.prototype.pick=function(e,t,n,i,o){let r=this.renderedMesh;if(!c(r))return;let a=r.vertices,s=r.indices,A=r.encoding,l=s.length,d=Number.MAX_VALUE;for(let m=0;m<l;m+=3){let p=s[m],g=s[m+1],h=s[m+2],C=kw(A,t,n,a,p,Qbe),_=kw(A,t,n,a,g,Rbe),I=kw(A,t,n,a,h,vbe),b=en.rayTriangleParametric(e,C,_,I,i);c(b)&&b<d&&b>=0&&(d=b)}return d!==Number.MAX_VALUE?ai.getPoint(e,d,o):void 0};Ui.prototype.freeResources=function(){c(this.waterMaskTexture)&&(--this.waterMaskTexture.referenceCount,this.waterMaskTexture.referenceCount===0&&this.waterMaskTexture.destroy(),this.waterMaskTexture=void 0),this.terrainData=void 0,this.terrainState=mi.UNLOADED,this.mesh=void 0,this.fill=this.fill&&this.fill.destroy();let e=this.imagery;for(let t=0,n=e.length;t<n;++t)e[t].freeResources();this.imagery.length=0,this.freeVertexArray()};Ui.prototype.freeVertexArray=function(){Ui._freeVertexArray(this.vertexArray),this.vertexArray=void 0,Ui._freeVertexArray(this.wireframeVertexArray),this.wireframeVertexArray=void 0};Ui.initialize=function(e,t,n){let i=e.data;c(i)||(i=e.data=new Ui),e.state===su.START&&(Mbe(e,t,n),e.state=su.LOADING)};Ui.processStateMachine=function(e,t,n,i,o,r,a){Ui.initialize(e,n,i);let s=e.data;if(e.state===su.LOADING&&Pbe(e,t,n,i,o,r),a)return;let A=e.renderable;e.renderable=c(s.vertexArray);let l=s.terrainState===mi.READY;e.upsampledFromParent=c(s.terrainData)&&s.terrainData.wasCreatedByUpsampling();let d=s.processImagery(e,n,t);if(l&&d){let m=e._loadedCallbacks,p={};for(let g in m)m.hasOwnProperty(g)&&(m[g](e)||(p[g]=m[g]));e._loadedCallbacks=p,e.state=su.DONE}A&&(e.renderable=!0)};Ui.prototype.processImagery=function(e,t,n,i){let o=e.data,r=e.upsampledFromParent,a=!1,s=!0,A=o.imagery,l,d;for(l=0,d=A.length;l<d;++l){let m=A[l];if(!c(m.loadingImagery)){r=!1;continue}if(m.loadingImagery.state===Xt.PLACEHOLDER){let g=m.loadingImagery.imageryLayer;if(g.ready){m.freeResources(),A.splice(l,1),g._createTileImagerySkeletons(e,t,l),--l,d=A.length;continue}else r=!1}let p=m.processStateMachine(e,n,i);s=s&&p,a=a||p||c(m.readyImagery),r=r&&c(m.loadingImagery)&&(m.loadingImagery.state===Xt.FAILED||m.loadingImagery.state===Xt.INVALID)}return e.upsampledFromParent=r,e.renderable=e.renderable&&(a||s),s};function b4(e,t,n,i){let o=e.renderedMesh,r=o.vertices,a=o.encoding,s=r.length/a.stride,A=ru.clone(a);A.hasGeodeticSurfaceNormals=t,A=ru.clone(A);let l=A.stride,d=new Float32Array(s*l);t?a.addGeodeticSurfaceNormals(r,d,n):a.removeGeodeticSurfaceNormals(r,d),o.vertices=d,o.stride=l,o!==e.mesh?(Ui._freeVertexArray(e.fill.vertexArray),e.fill.vertexArray=Ui._createVertexArrayForMesh(i.context,o)):(Ui._freeVertexArray(e.vertexArray),e.vertexArray=Ui._createVertexArrayForMesh(i.context,o)),Ui._freeVertexArray(e.wireframeVertexArray),e.wireframeVertexArray=void 0}Ui.prototype.addGeodeticSurfaceNormals=function(e,t){b4(this,!0,e,t)};Ui.prototype.removeGeodeticSurfaceNormals=function(e){b4(this,!1,void 0,e)};Ui.prototype.updateExaggeration=function(e,t,n){let i=this,o=i.renderedMesh;if(o===void 0)return;let r=t.verticalExaggeration,a=t.verticalExaggerationRelativeHeight,s=r!==1,A=o.encoding,l=A.exaggeration!==r,d=A.exaggerationRelativeHeight!==a;if(l||d){if(l)if(s&&!A.hasGeodeticSurfaceNormals){let m=e.tilingScheme.ellipsoid;i.addGeodeticSurfaceNormals(m,t)}else!s&&A.hasGeodeticSurfaceNormals&&i.removeGeodeticSurfaceNormals(t);if(A.exaggeration=r,A.exaggerationRelativeHeight=a,n!==void 0){n._tileToUpdateHeights.push(e);let m=e.customData,p=m.length;for(let g=0;g<p;g++){let h=m[g];h.level=-1}}}};function Mbe(e,t,n){let i=t.getTileDataAvailable(e.x,e.y,e.level);if(!c(i)&&c(e.parent)){let o=e.parent,r=o.data;c(r)&&c(r.terrainData)&&(i=r.terrainData.isChildAvailable(o.x,o.y,e.x,e.y))}i===!1&&(e.data.terrainState=mi.FAILED);for(let o=0,r=n.length;o<r;++o){let a=n.get(o);a.show&&a._createTileImagerySkeletons(e,t)}}function Pbe(e,t,n,i,o,r){let a=e.data,s=e.parent;if(a.terrainState===mi.FAILED&&s!==void 0&&(s.data!==void 0&&s.data.terrainData!==void 0&&s.data.terrainData.canUpsample!==!1||Ui.processStateMachine(s,t,n,i,o,r,!0)),a.terrainState===mi.FAILED&&Nbe(a,e,t,n,e.x,e.y,e.level),a.terrainState===mi.UNLOADED&&Lbe(a,n,e.x,e.y,e.level),a.terrainState===mi.RECEIVED&&Obe(a,t,n,e.x,e.y,e.level),a.terrainState===mi.TRANSFORMED&&(kbe(a,t.context,n,e.x,e.y,e.level,r),a.updateExaggeration(e,t,o)),a.terrainState>=mi.RECEIVED&&a.waterMaskTexture===void 0&&n.hasWaterMask)if(a.terrainData.waterMask!==void 0)zbe(t.context,a);else{let l=a._findAncestorTileWithTerrainData(e);c(l)&&c(l.data.waterMaskTexture)&&(a.waterMaskTexture=l.data.waterMaskTexture,++a.waterMaskTexture.referenceCount,a._computeWaterMaskTranslationAndScale(e,l,a.waterMaskTranslationAndScale))}}function Nbe(e,t,n,i,o,r,a){let s=t.parent;if(!s){t.state=su.FAILED;return}let A=s.data.terrainData,l=s.x,d=s.y,m=s.level;if(!c(A))return;let p=A.upsample(i.tilingScheme,l,d,m,o,r,a);c(p)&&(e.terrainState=mi.RECEIVING,Promise.resolve(p).then(function(g){c(g)&&(e.terrainData=g,e.terrainState=mi.RECEIVED)}).catch(function(){e.terrainState=mi.FAILED}))}function Lbe(e,t,n,i,o){function r(A){if(!c(A)){e.terrainState=mi.UNLOADED,e.request=void 0;return}e.terrainData=A,e.terrainState=mi.RECEIVED,e.request=void 0}function a(A){if(e.request.state===vn.CANCELLED){e.terrainData=void 0,e.terrainState=mi.UNLOADED,e.request=void 0;return}e.terrainState=mi.FAILED,e.request=void 0;let l=`Failed to obtain terrain tile X: ${n} Y: ${i} Level: ${o}. Error message: "${A}"`;t._requestError=Sa.reportError(t._requestError,t,t.errorEvent,l,n,i,o),t._requestError.retry&&s()}function s(){let A=new Gs({throttle:!1,throttleByServer:!0,type:zs.TERRAIN});e.request=A;let l=t.requestTileGeometry(n,i,o,A);c(l)?(e.terrainState=mi.RECEIVING,Promise.resolve(l).then(function(d){r(d)}).catch(function(d){a(d)})):(e.terrainState=mi.UNLOADED,e.request=void 0)}s()}var Fbe={tilingScheme:void 0,x:0,y:0,level:0,exaggeration:1,exaggerationRelativeHeight:0,throttle:!0};function Obe(e,t,n,i,o,r){let a=n.tilingScheme,s=Fbe;s.tilingScheme=a,s.x=i,s.y=o,s.level=r,s.exaggeration=t.verticalExaggeration,s.exaggerationRelativeHeight=t.verticalExaggerationRelativeHeight,s.throttle=!0;let l=e.terrainData.createMesh(s);c(l)&&(e.terrainState=mi.TRANSFORMING,Promise.resolve(l).then(function(d){e.mesh=d,e.terrainState=mi.TRANSFORMED}).catch(function(){e.terrainState=mi.FAILED}))}Ui._createVertexArrayForMesh=function(e,t){let n=t.vertices,i=ut.createVertexBuffer({context:e,typedArray:n,usage:De.STATIC_DRAW}),o=t.encoding.getAttributes(i),r=t.indices.indexBuffers||{},a=r[e.id];if(!c(a)||a.isDestroyed()){let s=t.indices;a=ut.createIndexBuffer({context:e,typedArray:s,usage:De.STATIC_DRAW,indexDatatype:Ge.fromSizeInBytes(s.BYTES_PER_ELEMENT)}),a.vertexArrayDestroyable=!1,a.referenceCount=1,r[e.id]=a,t.indices.indexBuffers=r}else++a.referenceCount;return new Yi({context:e,attributes:o,indexBuffer:a})};Ui._freeVertexArray=function(e){if(c(e)){let t=e.indexBuffer;e.isDestroyed()||e.destroy(),c(t)&&!t.isDestroyed()&&c(t.referenceCount)&&(--t.referenceCount,t.referenceCount===0&&t.destroy())}};function kbe(e,t,n,i,o,r,a){e.vertexArray=Ui._createVertexArrayForMesh(t,e.mesh),e.terrainState=mi.READY,e.fill=e.fill&&e.fill.destroy(a)}function Ube(e){let t=e.cache.tile_waterMaskData;if(!c(t)){let n=on.create({context:e,pixelFormat:_t.LUMINANCE,pixelDatatype:mt.UNSIGNED_BYTE,source:{arrayBufferView:new Uint8Array([255]),width:1,height:1}});n.referenceCount=1;let i=new nn({wrapS:ei.CLAMP_TO_EDGE,wrapT:ei.CLAMP_TO_EDGE,minificationFilter:Wt.LINEAR,magnificationFilter:yo.LINEAR});t={allWaterTexture:n,sampler:i,destroy:function(){this.allWaterTexture.destroy()}},e.cache.tile_waterMaskData=t}return t}function zbe(e,t){let n=t.terrainData.waterMask,i=Ube(e),o,r=n.length;if(r===1)if(n[0]!==0)o=i.allWaterTexture;else return;else{let a=Math.sqrt(r);o=on.create({context:e,pixelFormat:_t.LUMINANCE,pixelDatatype:mt.UNSIGNED_BYTE,source:{width:a,height:a,arrayBufferView:n},sampler:i.sampler,flipY:!1}),o.referenceCount=0}++o.referenceCount,t.waterMaskTexture=o,re.fromElements(0,0,1,1,t.waterMaskTranslationAndScale)}Ui.prototype._findAncestorTileWithTerrainData=function(e){let t=e.parent;for(;c(t)&&(!c(t.data)||!c(t.data.terrainData)||t.data.terrainData.wasCreatedByUpsampling());)t=t.parent;return t};Ui.prototype._computeWaterMaskTranslationAndScale=function(e,t,n){let i=t.rectangle,o=e.rectangle,r=o.width,a=o.height,s=r/i.width,A=a/i.height;return n.x=s*(o.west-i.west)/r,n.y=A*(o.south-i.south)/a,n.z=s,n.w=A,n};var cu=Ui;var Gbe={WEST:0,NORTH:1,EAST:2,SOUTH:3,NORTHWEST:4,NORTHEAST:5,SOUTHWEST:6,SOUTHEAST:7},Mt=Gbe;var B4={NONE:0,CULLED:1,RENDERED:2,REFINED:3,RENDERED_AND_KICKED:6,REFINED_AND_KICKED:7,CULLED_BUT_NEEDED:9,wasKicked:function(e){return e>=B4.RENDERED_AND_KICKED},originalResult:function(e){return e&3},kick:function(e){return e|4}},Rs=B4;function Ym(e){this.tile=e,this.frameLastUpdated=void 0,this.westMeshes=[],this.westTiles=[],this.southMeshes=[],this.southTiles=[],this.eastMeshes=[],this.eastTiles=[],this.northMeshes=[],this.northTiles=[],this.southwestMesh=void 0,this.southwestTile=void 0,this.southeastMesh=void 0,this.southeastTile=void 0,this.northwestMesh=void 0,this.northwestTile=void 0,this.northeastMesh=void 0,this.northeastTile=void 0,this.changedThisFrame=!0,this.visitedFrame=void 0,this.enqueuedFrame=void 0,this.mesh=void 0,this.vertexArray=void 0,this.waterMaskTexture=void 0,this.waterMaskTranslationAndScale=new re}Ym.prototype.update=function(e,t,n){this.changedThisFrame&&(R4(e,t,this.tile,n),this.changedThisFrame=!1)};Ym.prototype.destroy=function(e){this._destroyVertexArray(e),c(this.waterMaskTexture)&&(--this.waterMaskTexture.referenceCount,this.waterMaskTexture.referenceCount===0&&this.waterMaskTexture.destroy(),this.waterMaskTexture=void 0)};Ym.prototype._destroyVertexArray=function(e){c(this.vertexArray)&&(c(e)?e.push(this.vertexArray):cu._freeVertexArray(this.vertexArray),this.vertexArray=void 0)};var Hbe=new Ng;Ym.updateFillTiles=function(e,t,n,i){let o=e._quadtree,r=o._levelZeroTiles,a=o._lastSelectionFrameNumber,s=Hbe;s.clear();for(let l=0;l<t.length;++l){let d=t[l];c(d.data.vertexArray)&&s.enqueue(t[l])}let A=s.dequeue();for(;A!==void 0;){let l=A.findTileToWest(r),d=A.findTileToSouth(r),m=A.findTileToEast(r),p=A.findTileToNorth(r);Ko(e,n,A,l,a,Mt.EAST,!1,s,i),Ko(e,n,A,d,a,Mt.NORTH,!1,s,i),Ko(e,n,A,m,a,Mt.WEST,!1,s,i),Ko(e,n,A,p,a,Mt.SOUTH,!1,s,i);let g=l.findTileToNorth(r),h=l.findTileToSouth(r),C=m.findTileToNorth(r),_=m.findTileToSouth(r);Ko(e,n,A,g,a,Mt.SOUTHEAST,!1,s,i),Ko(e,n,A,C,a,Mt.SOUTHWEST,!1,s,i),Ko(e,n,A,h,a,Mt.NORTHEAST,!1,s,i),Ko(e,n,A,_,a,Mt.NORTHWEST,!1,s,i),A=s.dequeue()}};function Ko(e,t,n,i,o,r,a,s,A){if(i===void 0)return;let l=i;for(;l&&(l._lastSelectionResultFrame!==o||Rs.wasKicked(l._lastSelectionResult)||Rs.originalResult(l._lastSelectionResult)===Rs.CULLED);){if(a)return;let d=l.parent;if(r>=Mt.NORTHWEST&&d!==void 0)switch(r){case Mt.NORTHWEST:l=l===d.northwestChild?d:void 0;break;case Mt.NORTHEAST:l=l===d.northeastChild?d:void 0;break;case Mt.SOUTHWEST:l=l===d.southwestChild?d:void 0;break;case Mt.SOUTHEAST:l=l===d.southeastChild?d:void 0;break}else l=d}if(l!==void 0){if(l._lastSelectionResult===Rs.RENDERED){if(c(l.data.vertexArray))return;Vbe(e,t,n,l,r,o,s,A);return}if(Rs.originalResult(i._lastSelectionResult)!==Rs.CULLED)switch(r){case Mt.WEST:Ko(e,t,n,i.northwestChild,o,r,!0,s,A),Ko(e,t,n,i.southwestChild,o,r,!0,s,A);break;case Mt.EAST:Ko(e,t,n,i.southeastChild,o,r,!0,s,A),Ko(e,t,n,i.northeastChild,o,r,!0,s,A);break;case Mt.SOUTH:Ko(e,t,n,i.southwestChild,o,r,!0,s,A),Ko(e,t,n,i.southeastChild,o,r,!0,s,A);break;case Mt.NORTH:Ko(e,t,n,i.northeastChild,o,r,!0,s,A),Ko(e,t,n,i.northwestChild,o,r,!0,s,A);break;case Mt.NORTHWEST:Ko(e,t,n,i.northwestChild,o,r,!0,s,A);break;case Mt.NORTHEAST:Ko(e,t,n,i.northeastChild,o,r,!0,s,A);break;case Mt.SOUTHWEST:Ko(e,t,n,i.southwestChild,o,r,!0,s,A);break;case Mt.SOUTHEAST:Ko(e,t,n,i.southeastChild,o,r,!0,s,A);break;default:throw new be("Invalid edge")}}}function Vbe(e,t,n,i,o,r,a,s){let A=i.data;if(A.fill===void 0)A.fill=new Ym(i);else if(A.fill.visitedFrame===r)return;A.fill.enqueuedFrame!==r&&(A.fill.enqueuedFrame=r,A.fill.changedThisFrame=!1,a.enqueue(i)),jbe(e,t,n,i,o,s)}function jbe(e,t,n,i,o,r){let a=i.data.fill,s,A=n.data.fill;c(A)?(A.visitedFrame=t.frameNumber,A.changedThisFrame&&(R4(e,t,n,r),A.changedThisFrame=!1),s=n.data.fill.mesh):s=n.data.mesh;let l,d;switch(o){case Mt.WEST:l=a.westMeshes,d=a.westTiles;break;case Mt.SOUTH:l=a.southMeshes,d=a.southTiles;break;case Mt.EAST:l=a.eastMeshes,d=a.eastTiles;break;case Mt.NORTH:l=a.northMeshes,d=a.northTiles;break;case Mt.NORTHWEST:a.changedThisFrame=a.changedThisFrame||a.northwestMesh!==s,a.northwestMesh=s,a.northwestTile=n;return;case Mt.NORTHEAST:a.changedThisFrame=a.changedThisFrame||a.northeastMesh!==s,a.northeastMesh=s,a.northeastTile=n;return;case Mt.SOUTHWEST:a.changedThisFrame=a.changedThisFrame||a.southwestMesh!==s,a.southwestMesh=s,a.southwestTile=n;return;case Mt.SOUTHEAST:a.changedThisFrame=a.changedThisFrame||a.southeastMesh!==s,a.southeastMesh=s,a.southeastTile=n;return}if(n.level<=i.level){a.changedThisFrame=a.changedThisFrame||l[0]!==s||l.length!==1,l[0]=s,d[0]=n,l.length=1,d.length=1;return}let m,p,g,h,C=n.rectangle,_,I=i.rectangle;switch(o){case Mt.WEST:for(_=(I.north-I.south)*S.EPSILON5,m=0;m<d.length&&(g=d[m],h=g.rectangle,!S.greaterThan(C.north,h.south,_));++m);for(p=m;p<d.length&&(g=d[p],h=g.rectangle,!S.greaterThanOrEquals(C.south,h.north,_));++p);break;case Mt.SOUTH:for(_=(I.east-I.west)*S.EPSILON5,m=0;m<d.length&&(g=d[m],h=g.rectangle,!S.lessThan(C.west,h.east,_));++m);for(p=m;p<d.length&&(g=d[p],h=g.rectangle,!S.lessThanOrEquals(C.east,h.west,_));++p);break;case Mt.EAST:for(_=(I.north-I.south)*S.EPSILON5,m=0;m<d.length&&(g=d[m],h=g.rectangle,!S.lessThan(C.south,h.north,_));++m);for(p=m;p<d.length&&(g=d[p],h=g.rectangle,!S.lessThanOrEquals(C.north,h.south,_));++p);break;case Mt.NORTH:for(_=(I.east-I.west)*S.EPSILON5,m=0;m<d.length&&(g=d[m],h=g.rectangle,!S.greaterThan(C.east,h.west,_));++m);for(p=m;p<d.length&&(g=d[p],h=g.rectangle,!S.greaterThanOrEquals(C.west,h.east,_));++p);break}p-m===1?(a.changedThisFrame=a.changedThisFrame||l[m]!==s,l[m]=s,d[m]=n):(a.changedThisFrame=!0,l.splice(m,p-m,s),d.splice(m,p-m,n))}var jd=new ue,Ybe=new ue,jm=new f,Hw=new f,Uw=new L,zw=new L,vs=new L;function tb(){this.height=0,this.encodedNormal=new L}function Jy(e,t,n,i,o,r,a,s,A){if(c(o))return o;let l;if(c(r)&&c(a))l=(r.height+a.height)*.5;else if(c(r))l=r.height;else if(c(a))l=a.height;else if(c(s))l=s.height;else{let m=e.tile.data.tileBoundingRegion,p=0,g=0;c(m)&&(p=m.minimumHeight,g=m.maximumHeight),l=(p+g)*.5}return v4(e,t,n,i,l,A),A}var Wbe={minimumHeight:0,maximumHeight:0},qbe=new f,x4=new tb,T4=new tb,S4=new tb,w4=new tb,Jbe=typeof Uint8Array<"u"?new Uint8Array(81):void 0,Kbe={tilingScheme:void 0,x:0,y:0,level:0,exaggeration:1,exaggerationRelativeHeight:0};function R4(e,t,n,i){cu.initialize(n,e.terrainProvider,e._imageryLayers);let o=n.data,r=o.fill,a=n.rectangle,s=t.verticalExaggeration,A=t.verticalExaggerationRelativeHeight,l=s!==1,d=n.tilingScheme.ellipsoid,m=Xy(r,d,0,1,r.northwestTile,r.northwestMesh,r.northTiles,r.northMeshes,r.westTiles,r.westMeshes,S4),p=Xy(r,d,0,0,r.southwestTile,r.southwestMesh,r.westTiles,r.westMeshes,r.southTiles,r.southMeshes,x4),g=Xy(r,d,1,0,r.southeastTile,r.southeastMesh,r.southTiles,r.southMeshes,r.eastTiles,r.eastMeshes,T4),h=Xy(r,d,1,1,r.northeastTile,r.northeastMesh,r.eastTiles,r.eastMeshes,r.northTiles,r.northMeshes,w4);m=Jy(r,d,0,1,m,p,h,g,S4),p=Jy(r,d,0,0,p,m,g,h,x4),g=Jy(r,d,1,1,g,p,h,m,T4),h=Jy(r,d,1,1,h,g,m,p,w4);let C=p.height,_=g.height,I=m.height,b=h.height,x=Math.min(C,_,I,b),T=Math.max(C,_,I,b),w=(x+T)*.5,R,z,M=e.getLevelMaximumGeometricError(n.level),N=d.maximumRadius-M,O=Math.acos(N/d.maximumRadius)*4;if(O*=1.5,a.width>O&&T-x<=M){let y=new y4({width:9,height:9,buffer:Jbe,structure:{heightOffset:T}}),B=Kbe;B.tilingScheme=n.tilingScheme,B.x=n.x,B.y=n.y,B.level=n.level,B.exaggeration=s,B.exaggerationRelativeHeight=A,r.mesh=y._createMeshSync(B)}else{let y=l,B=de.center(a,Ybe);B.height=w;let D=d.cartographicToCartesian(B,qbe),v=new ru(D,void 0,void 0,void 0,void 0,!0,!0,y,s,A),F=5,P;for(P=r.westMeshes,R=0,z=P.length;R<z;++R)F+=P[R].eastIndicesNorthToSouth.length;for(P=r.southMeshes,R=0,z=P.length;R<z;++R)F+=P[R].northIndicesWestToEast.length;for(P=r.eastMeshes,R=0,z=P.length;R<z;++R)F+=P[R].westIndicesSouthToNorth.length;for(P=r.northMeshes,R=0,z=P.length;R<z;++R)F+=P[R].southIndicesEastToWest.length;let U=Wbe;U.minimumHeight=x,U.maximumHeight=T;let k=v.stride,j=new Float32Array(F*k),q=0,$=q;q=Ky(d,a,v,j,q,0,1,m.height,m.encodedNormal,1,U),q=$y(r,d,v,j,q,r.westTiles,r.westMeshes,Mt.EAST,U);let H=q;q=Ky(d,a,v,j,q,0,0,p.height,p.encodedNormal,0,U),q=$y(r,d,v,j,q,r.southTiles,r.southMeshes,Mt.NORTH,U);let Z=q;q=Ky(d,a,v,j,q,1,0,g.height,g.encodedNormal,0,U),q=$y(r,d,v,j,q,r.eastTiles,r.eastMeshes,Mt.WEST,U);let ee=q;q=Ky(d,a,v,j,q,1,1,h.height,h.encodedNormal,1,U),q=$y(r,d,v,j,q,r.northTiles,r.northMeshes,Mt.SOUTH,U),x=U.minimumHeight,T=U.maximumHeight;let Ae=ui.fromRectangle(a,x,T,n.tilingScheme.ellipsoid),ge=jn.geodeticLatitudeToMercatorAngle(a.south),ce=1/(jn.geodeticLatitudeToMercatorAngle(a.north)-ge),he=(jn.geodeticLatitudeToMercatorAngle(B.latitude)-ge)*ce,Ie=d.geodeticSurfaceNormalCartographic(jd,Hw),Ne=Yt.octEncode(Ie,Uw),_e=q;v.encode(j,q*k,Ae.center,L.fromElements(.5,.5,vs),w,Ne,he,Ie),++q;let ve=q,at=ve<256?1:2,Tt=(ve-1)*3,st=Tt*at,Rn=(j.length-ve*k)*Float32Array.BYTES_PER_ELEMENT,Lt;if(Rn>=st){let lt=ve*k*Float32Array.BYTES_PER_ELEMENT;Lt=ve<256?new Uint8Array(j.buffer,lt,Tt):new Uint16Array(j.buffer,lt,Tt)}else Lt=ve<256?new Uint8Array(Tt):new Uint16Array(Tt);j=new Float32Array(j.buffer,0,ve*k);let $t=0;for(R=0;R<ve-2;++R)Lt[$t++]=_e,Lt[$t++]=R,Lt[$t++]=R+1;Lt[$t++]=_e,Lt[$t++]=R,Lt[$t++]=0;let ci=[];for(R=H;R>=$;--R)ci.push(R);let Ft=[];for(R=Z;R>=H;--R)Ft.push(R);let pi=[];for(R=ee;R>=Z;--R)pi.push(R);let Kn=[];for(Kn.push(0),R=_e-1;R>=ee;--R)Kn.push(R);r.mesh=new HC(v.center,j,Lt,Tt,ve,x,T,le.fromOrientedBoundingBox(Ae),i0e(e,Ae.center,a,x,T),v.stride,Ae,v,ci,Ft,pi,Kn)}let u=t.context;r._destroyVertexArray(i),r.vertexArray=cu._createVertexArrayForMesh(u,r.mesh),o.processImagery(n,e.terrainProvider,t,!0);let E=r.waterMaskTexture;if(r.waterMaskTexture=void 0,e.terrainProvider.hasWaterMask){let y=o._findAncestorTileWithTerrainData(n);c(y)&&c(y.data.waterMaskTexture)&&(r.waterMaskTexture=y.data.waterMaskTexture,++r.waterMaskTexture.referenceCount,o._computeWaterMaskTranslationAndScale(n,y,r.waterMaskTranslationAndScale))}c(E)&&(--E.referenceCount,E.referenceCount===0&&E.destroy())}function Ky(e,t,n,i,o,r,a,s,A,l,d){let m=jd;m.longitude=S.lerp(t.west,t.east,r),m.latitude=S.lerp(t.south,t.north,a),m.height=s;let p=e.cartographicToCartesian(m,jm),g;n.hasGeodeticSurfaceNormals&&(g=e.geodeticSurfaceNormal(p,Hw));let h=zw;return h.x=r,h.y=a,n.encode(i,o*n.stride,p,h,s,A,l,g),d.minimumHeight=Math.min(d.minimumHeight,s),d.maximumHeight=Math.max(d.maximumHeight,s),o+1}var eb=new de;function VC(e,t,n,i){let o=e.rectangle,r=t.rectangle;t.x===0&&n.x===1&&e.x===e.tilingScheme.getNumberOfXTilesAtLevel(e.level)-1?(o=de.clone(e.rectangle,eb),o.west-=S.TWO_PI,o.east-=S.TWO_PI):e.x===0&&n.x===0&&t.x===t.tilingScheme.getNumberOfXTilesAtLevel(t.level)-1&&(o=de.clone(e.rectangle,eb),o.west+=S.TWO_PI,o.east+=S.TWO_PI);let a=o.east-o.west,s=(r.west-o.west)/a,A=(r.east-o.west)/a,l=o.north-o.south,d=(r.south-o.south)/l,m=(r.north-o.south)/l,p=(n.x-s)/(A-s),g=(n.y-d)/(m-d);return Math.abs(p)<Math.EPSILON5?p=0:Math.abs(p-1)<Math.EPSILON5&&(p=1),Math.abs(g)<Math.EPSILON5?g=0:Math.abs(g-1)<Math.EPSILON5&&(g=1),i.x=p,i.y=g,i}var Xbe=new L;function Gw(e,t,n,i,o){let r=e.encoding,a=e.vertices;if(o.height=r.decodeHeight(a,t),r.hasVertexNormals)r.getOctEncodedNormal(a,t,o.encodedNormal);else{let s=o.encodedNormal;s.x=0,s.y=0}}var Zbe=new L,$be=new f;function e0e(e,t,n,i,o,r,a,s,A,l){let d=i.encoding,m=i.vertices,p=VC(t,n,d.decodeTextureCoordinates(m,o,vs),vs),g=VC(t,n,d.decodeTextureCoordinates(m,r,zw),zw),h;A?h=(a-p.x)/(g.x-p.x):h=(s-p.y)/(g.y-p.y);let C=d.decodeHeight(m,o),_=d.decodeHeight(m,r),I=n.rectangle;jd.longitude=S.lerp(I.west,I.east,a),jd.latitude=S.lerp(I.south,I.north,s),l.height=jd.height=S.lerp(C,_,h);let b;if(d.hasVertexNormals){let x=d.getOctEncodedNormal(m,o,Xbe),T=d.getOctEncodedNormal(m,r,Zbe),w=Yt.octDecode(x.x,x.y,jm),R=Yt.octDecode(T.x,T.y,$be);b=f.lerp(w,R,h,jm),f.normalize(b,b),Yt.octEncode(b,l.encodedNormal)}else b=e.geodeticSurfaceNormalCartographic(jd,jm),Yt.octEncode(b,l.encodedNormal)}function v4(e,t,n,i,o,r){r.height=o;let a=t.geodeticSurfaceNormalCartographic(jd,jm);Yt.octEncode(a,r.encodedNormal)}function Xy(e,t,n,i,o,r,a,s,A,l,d){if(Q4(e,t,s,a,!1,n,i,d)||Q4(e,t,l,A,!0,n,i,d))return d;let p;if(Vw(o,r))return n===0?i===0?p=r.eastIndicesNorthToSouth[0]:p=r.southIndicesEastToWest[0]:i===0?p=r.northIndicesWestToEast[0]:p=r.westIndicesSouthToNorth[0],Gw(r,p,n,i,d),d;let g;if(n===0?i===0?g=Zy(e.westMeshes,e.westTiles,Mt.EAST,e.southMeshes,e.southTiles,Mt.NORTH,n,i):g=Zy(e.northMeshes,e.northTiles,Mt.SOUTH,e.westMeshes,e.westTiles,Mt.EAST,n,i):i===0?g=Zy(e.southMeshes,e.southTiles,Mt.NORTH,e.eastMeshes,e.eastTiles,Mt.WEST,n,i):g=Zy(e.eastMeshes,e.eastTiles,Mt.WEST,e.northMeshes,e.northTiles,Mt.SOUTH,n,i),c(g))return v4(e,t,n,i,g,d),d}function Zy(e,t,n,i,o,r,a,s){let A=D4(e,t,!1,n,a,s),l=D4(i,o,!0,r,a,s);return c(A)&&c(l)?(A+l)*.5:c(A)?A:l}function $y(e,t,n,i,o,r,a,s,A){for(let l=0;l<r.length;++l)o=t0e(e,t,n,i,o,r[l],a[l],s,A);return o}function t0e(e,t,n,i,o,r,a,s,A){let l=r.rectangle;s===Mt.EAST&&e.tile.x===0?(l=de.clone(r.rectangle,eb),l.west-=S.TWO_PI,l.east-=S.TWO_PI):s===Mt.WEST&&r.x===0&&(l=de.clone(r.rectangle,eb),l.west+=S.TWO_PI,l.east+=S.TWO_PI);let d=e.tile.rectangle,m,p;o>0&&(n.decodeTextureCoordinates(i,o-1,vs),m=vs.x,p=vs.y);let g,h;switch(s){case Mt.WEST:g=a.westIndicesSouthToNorth,h=!1;break;case Mt.NORTH:g=a.northIndicesWestToEast,h=!0;break;case Mt.EAST:g=a.eastIndicesNorthToSouth,h=!1;break;case Mt.SOUTH:g=a.southIndicesEastToWest,h=!0;break}let C=r,_=e.tile,I=a.encoding,b=a.vertices,x=n.stride,T,w;I.hasWebMercatorT&&(T=jn.geodeticLatitudeToMercatorAngle(d.south),w=1/(jn.geodeticLatitudeToMercatorAngle(d.north)-T));for(let R=0;R<g.length;++R){let z=g[R],M=I.decodeTextureCoordinates(b,z,vs);VC(C,_,M,M);let N=M.x,O=M.y,u=h?N:O;if(u<0||u>1||Math.abs(N-m)<S.EPSILON5&&Math.abs(O-p)<S.EPSILON5)continue;let E=Math.abs(N)<S.EPSILON5||Math.abs(N-1)<S.EPSILON5,y=Math.abs(O)<S.EPSILON5||Math.abs(O-1)<S.EPSILON5;if(E&&y)continue;let B=I.decodePosition(b,z,jm),D=I.decodeHeight(b,z),v;I.hasVertexNormals?v=I.getOctEncodedNormal(b,z,Uw):(v=Uw,v.x=0,v.y=0);let F=O;if(I.hasWebMercatorT){let U=S.lerp(d.south,d.north,O);F=(jn.geodeticLatitudeToMercatorAngle(U)-T)*w}let P;n.hasGeodeticSurfaceNormals&&(P=t.geodeticSurfaceNormal(B,Hw)),n.encode(i,o*x,B,M,D,v,F,P),A.minimumHeight=Math.min(A.minimumHeight,D),A.maximumHeight=Math.max(A.maximumHeight,D),++o}return o}function D4(e,t,n,i,o,r){let a,s,A;n?(a=0,s=e.length,A=1):(a=e.length-1,s=-1,A=-1);for(let l=a;l!==s;l+=A){let d=e[l],m=t[l];if(!Vw(m,d))continue;let p;switch(i){case Mt.WEST:p=d.westIndicesSouthToNorth;break;case Mt.SOUTH:p=d.southIndicesEastToWest;break;case Mt.EAST:p=d.eastIndicesNorthToSouth;break;case Mt.NORTH:p=d.northIndicesWestToEast;break}let g=p[n?0:p.length-1];if(c(g))return d.encoding.decodeHeight(d.vertices,g)}}function Vw(e,t){return c(t)&&(!c(e.data.fill)||!e.data.fill.changedThisFrame)}function Q4(e,t,n,i,o,r,a,s){let A,l,d,m,p,g=i[o?0:n.length-1],h=n[o?0:n.length-1];if(Vw(g,h)&&(r===0?a===0?(A=o?h.northIndicesWestToEast:h.eastIndicesNorthToSouth,l=o,d=o):(A=o?h.eastIndicesNorthToSouth:h.southIndicesEastToWest,l=!o,d=!1):a===0?(A=o?h.westIndicesSouthToNorth:h.northIndicesWestToEast,l=!o,d=!0):(A=o?h.southIndicesEastToWest:h.westIndicesSouthToNorth,l=o,d=!o),A.length>0)){m=o?0:A.length-1,p=A[m],h.encoding.decodeTextureCoordinates(h.vertices,p,vs);let C=VC(g,e.tile,vs,vs);if(C.x===r&&C.y===a)return Gw(h,p,r,a,s),!0;if(m=nl(A,l?r:a,function(_,I){h.encoding.decodeTextureCoordinates(h.vertices,_,vs);let b=VC(g,e.tile,vs,vs);return d?l?b.x-r:b.y-a:l?r-b.x:a-b.y}),m<0){if(m=~m,m>0&&m<A.length)return e0e(t,g,e.tile,h,A[m-1],A[m],r,a,l,s),!0}else return Gw(h,A[m],r,a,s),!0}return!1}var n0e=[new f,new f,new f,new f];function i0e(e,t,n,i,o,r){let a=e.quadtree._occluders.ellipsoid,s=a.ellipsoid,A=n0e;return f.fromRadians(n.west,n.south,o,s,A[0]),f.fromRadians(n.east,n.south,o,s,A[1]),f.fromRadians(n.west,n.north,o,s,A[2]),f.fromRadians(n.east,n.north,o,s,A[3]),a.computeHorizonCullingPointPossiblyUnderEllipsoid(t,A,i,r)}var jw=Ym;function zi(e){this.lightingFadeOutDistance=65e5,this.lightingFadeInDistance=9e6,this.hasWaterMask=!1,this.showWaterEffect=!1,this.oceanNormalMap=void 0,this.zoomedOutOceanSpecularIntensity=.5,this.enableLighting=!1,this.dynamicAtmosphereLighting=!1,this.dynamicAtmosphereLightingFromSun=!1,this.showGroundAtmosphere=!1,this.shadows=Yo.RECEIVE_ONLY,this.vertexShadowDarkness=.3,this.fillHighlightColor=void 0,this.hueShift=0,this.saturationShift=0,this.brightnessShift=0,this.showSkirts=!0,this.backFaceCulling=!0,this.undergroundColor=void 0,this.undergroundColorAlphaByDistance=void 0,this.lambertDiffuseMultiplier=0,this.materialUniformMap=void 0,this._materialUniformMap=void 0,this._quadtree=void 0,this._terrainProvider=e.terrainProvider,this._imageryLayers=e.imageryLayers,this._surfaceShaderSet=e.surfaceShaderSet,this._renderState=void 0,this._blendRenderState=void 0,this._disableCullingRenderState=void 0,this._disableCullingBlendRenderState=void 0,this._errorEvent=new Le,this._removeLayerAddedListener=this._imageryLayers.layerAdded.addEventListener(zi.prototype._onLayerAdded,this),this._removeLayerRemovedListener=this._imageryLayers.layerRemoved.addEventListener(zi.prototype._onLayerRemoved,this),this._removeLayerMovedListener=this._imageryLayers.layerMoved.addEventListener(zi.prototype._onLayerMoved,this),this._removeLayerShownListener=this._imageryLayers.layerShownOrHidden.addEventListener(zi.prototype._onLayerShownOrHidden,this),this._imageryLayersUpdatedEvent=new Le,this._layerOrderChanged=!1,this._tilesToRenderByTextureCount=[],this._drawCommands=[],this._uniformMaps=[],this._usedDrawCommands=0,this._vertexArraysToDestroy=[],this._debug={wireframe:!1,boundingSphereTile:void 0},this._baseColor=void 0,this._firstPassInitialColor=void 0,this.baseColor=new J(0,0,.5,1),this._clippingPlanes=void 0,this._clippingPolygons=void 0,this.cartographicLimitRectangle=de.clone(de.MAX_VALUE),this._hasLoadedTilesThisFrame=!1,this._hasFillTilesThisFrame=!1,this._oldVerticalExaggeration=void 0,this._oldVerticalExaggerationRelativeHeight=void 0}Object.defineProperties(zi.prototype,{baseColor:{get:function(){return this._baseColor},set:function(e){this._baseColor=e,this._firstPassInitialColor=re.fromColor(e,this._firstPassInitialColor)}},quadtree:{get:function(){return this._quadtree},set:function(e){this._quadtree=e}},tilingScheme:{get:function(){if(c(this._terrainProvider))return this._terrainProvider.tilingScheme}},errorEvent:{get:function(){return this._errorEvent}},imageryLayersUpdatedEvent:{get:function(){return this._imageryLayersUpdatedEvent}},terrainProvider:{get:function(){return this._terrainProvider},set:function(e){this._terrainProvider!==e&&(this._terrainProvider=e,c(this._quadtree)&&this._quadtree.invalidateAllTiles())}},clippingPlanes:{get:function(){return this._clippingPlanes},set:function(e){Yc.setOwner(e,this,"_clippingPlanes")}},clippingPolygons:{get:function(){return this._clippingPolygons},set:function(e){ef.setOwner(e,this,"_clippingPolygons")}}});function o0e(e,t){let n=e.loadingImagery;c(n)||(n=e.readyImagery);let i=t.loadingImagery;return c(i)||(i=t.readyImagery),n.imageryLayer._layerIndex-i.imageryLayer._layerIndex}zi.prototype.update=function(e){this._imageryLayers._update()};function r0e(e,t){let n=t.creditDisplay,i=e._terrainProvider;c(i)&&c(i.credit)&&n.addCreditToNextFrame(i.credit);let o=e._imageryLayers;for(let r=0,a=o.length;r<a;++r){let s=o.get(r);s.ready&&s.show&&c(s.imageryProvider.credit)&&n.addCreditToNextFrame(s.imageryProvider.credit)}}zi.prototype.initialize=function(e){this._imageryLayers.queueReprojectionCommands(e),this._layerOrderChanged&&(this._layerOrderChanged=!1,this._quadtree.forEachLoadedTile(function(i){i.data.imagery.sort(o0e)})),r0e(this,e);let t=this._vertexArraysToDestroy,n=t.length;for(let i=0;i<n;++i)cu._freeVertexArray(t[i]);t.length=0};zi.prototype.beginUpdate=function(e){let t=this._tilesToRenderByTextureCount;for(let o=0,r=t.length;o<r;++o){let a=t[o];c(a)&&(a.length=0)}let n=this._clippingPlanes;c(n)&&n.enabled&&n.update(e);let i=this._clippingPolygons;c(i)&&i.enabled&&(i.update(e),i.queueCommands(e)),this._usedDrawCommands=0,this._hasLoadedTilesThisFrame=!1,this._hasFillTilesThisFrame=!1};zi.prototype.endUpdate=function(e){if(!c(this._renderState)){this._renderState=At.fromCache({cull:{enabled:!0},depthTest:{enabled:!0,func:ga.LESS}}),this._blendRenderState=At.fromCache({cull:{enabled:!0},depthTest:{enabled:!0,func:ga.LESS_OR_EQUAL},blending:Pn.ALPHA_BLEND});let a=Re(this._renderState,!0);a.cull.enabled=!1,this._disableCullingRenderState=At.fromCache(a),a=Re(this._blendRenderState,!0),a.cull.enabled=!1,this._disableCullingBlendRenderState=At.fromCache(a)}this._hasFillTilesThisFrame&&this._hasLoadedTilesThisFrame&&jw.updateFillTiles(this,this._quadtree._tilesToRender,e,this._vertexArraysToDestroy);let t=this.quadtree,n=e.verticalExaggeration,i=e.verticalExaggerationRelativeHeight,o=this._oldVerticalExaggeration!==n||this._oldVerticalExaggerationRelativeHeight!==i;this._oldVerticalExaggeration=n,this._oldVerticalExaggerationRelativeHeight=i,o&&t.forEachLoadedTile(function(a){a.data.updateExaggeration(a,e,t)});let r=this._tilesToRenderByTextureCount;for(let a=0,s=r.length;a<s;++a){let A=r[a];if(c(A))for(let l=0,d=A.length;l<d;++l){let m=A[l],p=m.data.tileBoundingRegion;D0e(this,m,e),e.minimumTerrainHeight=Math.min(e.minimumTerrainHeight,p.minimumHeight)}}};function F4(e,t){let n=t.globeTranslucencyState;if(n.translucent){let i=e.renderState.blending.enabled;n.pushDerivedCommands(e,i,t)}else t.commandList.push(e)}zi.prototype.updateForPick=function(e){let t=this._drawCommands;for(let n=0,i=this._usedDrawCommands;n<i;++n)F4(t[n],e)};zi.prototype.cancelReprojections=function(){this._imageryLayers.cancelReprojections()};zi.prototype.getLevelMaximumGeometricError=function(e){return c(this._terrainProvider)?this._terrainProvider.getLevelMaximumGeometricError(e):0};zi.prototype.loadTile=function(e,t){let n=t.data,i=!0,o;c(n)&&(i=n.boundingVolumeSourceTile!==t||t._lastSelectionResult===Rs.CULLED_BUT_NEEDED,o=n.terrainState),cu.processStateMachine(t,e,this.terrainProvider,this._imageryLayers,this.quadtree,this._vertexArraysToDestroy,i),n=t.data,i&&o!==t.data.terrainState&&this.computeTileVisibility(t,e,this.quadtree.occluders)!==_c.NONE&&n.boundingVolumeSourceTile===t&&(i=!1,cu.processStateMachine(t,e,this.terrainProvider,this._imageryLayers,this.quadtree,this._vertexArraysToDestroy,i))};var a0e=new le,O4=new de,s0e=new de,c0e=new ue;function ib(e,t){if(t.west<t.east)return t;let n=de.clone(t,s0e);return de.center(e,c0e).longitude>0?n.east=S.PI:n.west=-S.PI,n}function k4(e,t){if(t.cameraUnderground||t.globeTranslucencyState.translucent)return!0;if(e.backFaceCulling)return!1;let n=e._clippingPlanes;if(c(n)&&n.enabled)return!0;let i=e._clippingPolygons;return!!(c(i)&&i.enabled||!de.equals(e.cartographicLimitRectangle,de.MAX_VALUE))}zi.prototype.computeTileVisibility=function(e,t,n){let i=this.computeDistanceToTile(e,t);e._distance=i;let o=k4(this,t);if(t.fog.enabled&&!o&&S.fog(i,t.fog.density)>=1)return _c.NONE;let r=e.data,a=r.tileBoundingRegion;if(r.boundingVolumeSourceTile===void 0)return _c.PARTIAL;let s=t.cullingVolume,A=a.boundingVolume;c(A)||(A=a.boundingSphere),r.clippedByBoundaries=!1;let l=ib(e.rectangle,this.cartographicLimitRectangle),d=de.simpleIntersection(l,e.rectangle,O4);if(!c(d))return _c.NONE;if(de.equals(d,e.rectangle)||(r.clippedByBoundaries=!0),t.mode!==Ee.SCENE3D&&(A=a0e,le.fromRectangleWithHeights2D(e.rectangle,t.mapProjection,a.minimumHeight,a.maximumHeight,A),f.fromElements(A.center.z,A.center.x,A.center.y,A.center),t.mode===Ee.MORPHING&&c(r.renderedMesh)&&(A=le.union(a.boundingSphere,A,A))),!c(A))return _c.PARTIAL;let m=this._clippingPlanes;if(c(m)&&m.enabled){let _=m.computeIntersectionWithBoundingVolume(A);if(e.isClipped=_!==bt.INSIDE,_===bt.OUTSIDE)return _c.NONE}let p=this._clippingPolygons;if(c(p)&&p.enabled){let _=p.computeIntersectionWithBoundingVolume(a);e.isClipped=_!==bt.OUTSIDE}let g,h=s.computeVisibility(A);if(h===bt.OUTSIDE?g=_c.NONE:h===bt.INTERSECTING?g=_c.PARTIAL:h===bt.INSIDE&&(g=_c.FULL),g===_c.NONE)return g;let C=t.mode===Ee.SCENE3D&&t.camera.frustum instanceof Tu;if(t.mode===Ee.SCENE3D&&!C&&c(n)&&!o){let _=r.occludeePointInScaledSpace;return!c(_)||n.ellipsoid.isScaledSpacePointVisiblePossiblyUnderEllipsoid(_,a.minimumHeight)?g:_c.NONE}return g};zi.prototype.canRefine=function(e){return c(e.data.terrainData)?!0:this.terrainProvider.getTileDataAvailable(e.x*2,e.y*2,e.level+1)!==void 0};var A0e=[],l0e=[];zi.prototype.canRenderWithoutLosingDetail=function(e,t){let n=e.data,i=A0e;i.length=this._imageryLayers.length;let o=!1,r=!1,a;c(n)&&(o=n.terrainState===mi.READY,r=!0,a=n.imagery);let s,A;for(s=0,A=i.length;s<A;++s)i[s]=r;if(c(a))for(s=0,A=a.length;s<A;++s){let m=a[s],p=m.loadingImagery,g=!c(p)||p.state===Xt.FAILED||p.state===Xt.INVALID,h=(m.loadingImagery||m.readyImagery).imageryLayer._layerIndex;i[h]=g&&i[h]}let l=this.quadtree._lastSelectionFrameNumber,d=l0e;for(d.length=0,d.push(e.southwestChild,e.southeastChild,e.northwestChild,e.northeastChild);d.length>0;){let m=d.pop(),p=m._lastSelectionResultFrame===l?m._lastSelectionResult:Rs.NONE;if(p===Rs.RENDERED){let g=m.data;if(!c(g))continue;if(!o&&m.data.terrainState===mi.READY)return!1;let h=m.data.imagery;for(s=0,A=h.length;s<A;++s){let C=h[s],_=C.loadingImagery,I=!c(_)||_.state===Xt.FAILED||_.state===Xt.INVALID,b=(C.loadingImagery||C.readyImagery).imageryLayer._layerIndex;if(I&&!i[b])return!1}}else p===Rs.REFINED&&d.push(m.southwestChild,m.southeastChild,m.northwestChild,m.northeastChild)}return!0};var u0e=new f;zi.prototype.computeTileLoadPriority=function(e,t){let n=e.data;if(n===void 0)return 0;let i=n.tileBoundingRegion.boundingVolume;if(i===void 0)return 0;let o=t.camera.positionWC,r=t.camera.directionWC,a=f.subtract(i.center,o,u0e),s=f.magnitude(a);return s<S.EPSILON5?0:(f.divideByScalar(a,s,a),(1-f.dot(a,r))*e._distance)};var M4=new Q,nb=new Q,f0e=new re,d0e=new re,h0e=new re,m0e=new f,P4=new f,p0e=new f,g0e=new f;zi.prototype.showTileThisFrame=function(e,t){let n=0,i=e.data.imagery;for(let s=0,A=i.length;s<A;++s){let l=i[s];c(l.readyImagery)&&l.readyImagery.imageryLayer.alpha!==0&&++n}let o=this._tilesToRenderByTextureCount[n];c(o)||(o=[],this._tilesToRenderByTextureCount[n]=o),o.push(e);let r=e.data;c(r.vertexArray)?this._hasLoadedTilesThisFrame=!0:this._hasFillTilesThisFrame=!0;let a=this._debug;++a.tilesRendered,a.texturesRendered+=n};var C0e=[new f,new f,new f,new f];function N4(e,t,n,i,o,r){let a=e.quadtree._occluders.ellipsoid,s=a.ellipsoid,A=C0e;return f.fromRadians(n.west,n.south,o,s,A[0]),f.fromRadians(n.east,n.south,o,s,A[1]),f.fromRadians(n.west,n.north,o,s,A[2]),f.fromRadians(n.east,n.north,o,s,A[3]),a.computeHorizonCullingPointPossiblyUnderEllipsoid(t,A,i,r)}zi.prototype.computeDistanceToTile=function(e,t){E0e(e,this,t);let n=e.data;if(n.boundingVolumeSourceTile===void 0)return 9999999999;let o=n.tileBoundingRegion,r=o.minimumHeight,a=o.maximumHeight;if(n.boundingVolumeSourceTile!==e){let A=t.camera.positionCartographic.height,l=Math.abs(A-r),d=Math.abs(A-a);l>d?(o.minimumHeight=r,o.maximumHeight=r):(o.minimumHeight=a,o.maximumHeight=a)}let s=o.distanceToCamera(t);return o.minimumHeight=r,o.maximumHeight=a,s};function E0e(e,t,n){let i=e.data;i===void 0&&(i=e.data=new cu);let o=e.tilingScheme.ellipsoid;i.tileBoundingRegion===void 0&&(i.tileBoundingRegion=new UA({computeBoundingVolumes:!1,rectangle:e.rectangle,ellipsoid:o,minimumHeight:0,maximumHeight:0}));let r=i.tileBoundingRegion,a=r.minimumHeight,s=r.maximumHeight,A=!1,l=e,d=i.mesh,m=i.terrainData;if(d!==void 0&&d.minimumHeight!==void 0&&d.maximumHeight!==void 0)r.minimumHeight=d.minimumHeight,r.maximumHeight=d.maximumHeight,A=!0;else if(m!==void 0&&m._minimumHeight!==void 0&&m._maximumHeight!==void 0)r.minimumHeight=m._minimumHeight,r.maximumHeight=m._maximumHeight;else{r.minimumHeight=Number.NaN,r.maximumHeight=Number.NaN;let p=e.parent;for(;p!==void 0;){let g=p.data;if(g!==void 0){let h=g.mesh,C=g.terrainData;if(h!==void 0&&h.minimumHeight!==void 0&&h.maximumHeight!==void 0){r.minimumHeight=h.minimumHeight,r.maximumHeight=h.maximumHeight;break}else if(C!==void 0&&C._minimumHeight!==void 0&&C._maximumHeight!==void 0){r.minimumHeight=C._minimumHeight,r.maximumHeight=C._maximumHeight;break}}p=p.parent}l=p}if(l!==void 0){let p=n.verticalExaggeration,g=n.verticalExaggerationRelativeHeight;if(p!==1&&(A=!1,r.minimumHeight=pa.getHeight(r.minimumHeight,p,g),r.maximumHeight=pa.getHeight(r.maximumHeight,p,g)),A)i.boundingVolumeIsFromMesh||(r._orientedBoundingBox=ui.clone(d.orientedBoundingBox,r._orientedBoundingBox),r._boundingSphere=le.clone(d.boundingSphere3D,r._boundingSphere),i.occludeePointInScaledSpace=f.clone(d.occludeePointInScaledSpace,i.occludeePointInScaledSpace),c(i.occludeePointInScaledSpace)||(i.occludeePointInScaledSpace=N4(t,r._orientedBoundingBox.center,e.rectangle,r.minimumHeight,r.maximumHeight,i.occludeePointInScaledSpace)));else{let C=r._orientedBoundingBox===void 0||r._boundingSphere===void 0;(r.minimumHeight!==a||r.maximumHeight!==s||C)&&(r.computeBoundingVolumes(o),i.occludeePointInScaledSpace=N4(t,r._orientedBoundingBox.center,e.rectangle,r.minimumHeight,r.maximumHeight,i.occludeePointInScaledSpace))}i.boundingVolumeSourceTile=l,i.boundingVolumeIsFromMesh=A}else i.boundingVolumeSourceTile=void 0,i.boundingVolumeIsFromMesh=!1}zi.prototype.isDestroyed=function(){return!1};zi.prototype.destroy=function(){return this._tileProvider=this._tileProvider&&this._tileProvider.destroy(),this._clippingPlanes=this._clippingPlanes&&this._clippingPlanes.destroy(),this._clippingPolygons=this._clippingPolygons&&this._clippingPolygons.destroy(),this._removeLayerAddedListener=this._removeLayerAddedListener&&this._removeLayerAddedListener(),this._removeLayerRemovedListener=this._removeLayerRemovedListener&&this._removeLayerRemovedListener(),this._removeLayerMovedListener=this._removeLayerMovedListener&&this._removeLayerMovedListener(),this._removeLayerShownListener=this._removeLayerShownListener&&this._removeLayerShownListener(),me(this)};function _0e(e,t,n){return function(i){let o,r,a=-1,s=i.data.imagery,A=s.length,l;for(l=0;l<A;++l)if(o=s[l],r=o.readyImagery??o.loadingImagery,r.imageryLayer===t){a=l;break}if(a!==-1){let d=a+e;if(o=s[d],r=c(o)?o.readyImagery??o.loadingImagery:void 0,!c(r)||r.imageryLayer!==t)return!t._createTileImagerySkeletons(i,n,d);for(l=a;l<d;++l)s[l].freeResources();s.splice(a,e)}return!0}}zi.prototype._onLayerAdded=function(e,t){if(!this.isDestroyed()&&e.show){let n=this._terrainProvider,i=this,o=this._imageryLayersUpdatedEvent,r=function(){e._imageryCache={},i._quadtree.forEachLoadedTile(function(a){if(c(a._loadedCallbacks[e._layerIndex]))return;let s,A=a.data.imagery,l=A.length,d=-1,m=0;for(s=0;s<l;++s){let g=A[s];if((g.readyImagery??g.loadingImagery).imageryLayer===e)d===-1&&(d=s),++m;else if(d!==-1)break}if(d===-1)return;let p=d+m;e._createTileImagerySkeletons(a,n,p)&&(a._loadedCallbacks[e._layerIndex]=_0e(m,e,n),a.state=su.LOADING)})};if(e.ready){let a=e.imageryProvider;a._reload=r}this._quadtree.forEachLoadedTile(function(a){e._createTileImagerySkeletons(a,n)&&(a.state=su.LOADING,a.level!==0&&(a._lastSelectionResultFrame!==i.quadtree._lastSelectionFrameNumber||a._lastSelectionResult!==Rs.RENDERED)&&(a.renderable=!1))}),this._layerOrderChanged=!0,o.raiseEvent()}};zi.prototype._onLayerRemoved=function(e,t){this._quadtree.forEachLoadedTile(function(n){let i=n.data.imagery,o=-1,r=0;for(let a=0,s=i.length;a<s;++a){let A=i[a],l=A.loadingImagery;if(c(l)||(l=A.readyImagery),l.imageryLayer===e)o===-1&&(o=a),A.freeResources(),++r;else if(o!==-1)break}o!==-1&&i.splice(o,r)}),c(e.imageryProvider)&&(e.imageryProvider._reload=void 0),this._imageryLayersUpdatedEvent.raiseEvent()};zi.prototype._onLayerMoved=function(e,t,n){this._layerOrderChanged=!0,this._imageryLayersUpdatedEvent.raiseEvent()};zi.prototype._onLayerShownOrHidden=function(e,t,n){n?this._onLayerAdded(e,t):this._onLayerRemoved(e,t)};var I0e=new Q,y0e=new Q;function L4(e,t){let n={u_initialColor:function(){return this.properties.initialColor},u_fillHighlightColor:function(){return this.properties.fillHighlightColor},u_zoomedOutOceanSpecularIntensity:function(){return this.properties.zoomedOutOceanSpecularIntensity},u_oceanNormalMap:function(){return this.properties.oceanNormalMap},u_atmosphereLightIntensity:function(){return this.properties.atmosphereLightIntensity},u_atmosphereRayleighCoefficient:function(){return this.properties.atmosphereRayleighCoefficient},u_atmosphereMieCoefficient:function(){return this.properties.atmosphereMieCoefficient},u_atmosphereRayleighScaleHeight:function(){return this.properties.atmosphereRayleighScaleHeight},u_atmosphereMieScaleHeight:function(){return this.properties.atmosphereMieScaleHeight},u_atmosphereMieAnisotropy:function(){return this.properties.atmosphereMieAnisotropy},u_lightingFadeDistance:function(){return this.properties.lightingFadeDistance},u_nightFadeDistance:function(){return this.properties.nightFadeDistance},u_center3D:function(){return this.properties.center3D},u_verticalExaggerationAndRelativeHeight:function(){return this.properties.verticalExaggerationAndRelativeHeight},u_tileRectangle:function(){return this.properties.tileRectangle},u_modifiedModelView:function(){let i=e.context.uniformState.view,o=Q.multiplyByPoint(i,this.properties.rtc,P4);return Q.setTranslation(i,o,M4),M4},u_modifiedModelViewProjection:function(){let i=e.context.uniformState.view,o=e.context.uniformState.projection,r=Q.multiplyByPoint(i,this.properties.rtc,P4);return Q.setTranslation(i,r,nb),Q.multiply(o,nb,nb),nb},u_dayTextures:function(){return this.properties.dayTextures},u_dayTextureTranslationAndScale:function(){return this.properties.dayTextureTranslationAndScale},u_dayTextureTexCoordsRectangle:function(){return this.properties.dayTextureTexCoordsRectangle},u_dayTextureUseWebMercatorT:function(){return this.properties.dayTextureUseWebMercatorT},u_dayTextureAlpha:function(){return this.properties.dayTextureAlpha},u_dayTextureNightAlpha:function(){return this.properties.dayTextureNightAlpha},u_dayTextureDayAlpha:function(){return this.properties.dayTextureDayAlpha},u_dayTextureBrightness:function(){return this.properties.dayTextureBrightness},u_dayTextureContrast:function(){return this.properties.dayTextureContrast},u_dayTextureHue:function(){return this.properties.dayTextureHue},u_dayTextureSaturation:function(){return this.properties.dayTextureSaturation},u_dayTextureOneOverGamma:function(){return this.properties.dayTextureOneOverGamma},u_dayIntensity:function(){return this.properties.dayIntensity},u_southAndNorthLatitude:function(){return this.properties.southAndNorthLatitude},u_southMercatorYAndOneOverHeight:function(){return this.properties.southMercatorYAndOneOverHeight},u_waterMask:function(){return this.properties.waterMask},u_waterMaskTranslationAndScale:function(){return this.properties.waterMaskTranslationAndScale},u_minMaxHeight:function(){return this.properties.minMaxHeight},u_scaleAndBias:function(){return this.properties.scaleAndBias},u_dayTextureSplit:function(){return this.properties.dayTextureSplit},u_dayTextureCutoutRectangles:function(){return this.properties.dayTextureCutoutRectangles},u_clippingPlanes:function(){let i=t._clippingPlanes;return c(i)&&c(i.texture)?i.texture:e.context.defaultTexture},u_cartographicLimitRectangle:function(){return this.properties.localizedCartographicLimitRectangle},u_clippingPlanesMatrix:function(){let i=t._clippingPlanes,o=c(i)?Q.multiply(e.context.uniformState.view,i.modelMatrix,I0e):Q.IDENTITY;return Q.inverseTranspose(o,y0e)},u_clippingPlanesEdgeStyle:function(){let i=this.properties.clippingPlanesEdgeColor;return i.alpha=this.properties.clippingPlanesEdgeWidth,i},u_clippingDistance:function(){let i=t._clippingPolygons.clippingTexture;return c(i)?i:e.context.defaultTexture},u_clippingExtents:function(){let i=t._clippingPolygons.extentsTexture;return c(i)?i:e.context.defaultTexture},u_minimumBrightness:function(){return e.fog.minimumBrightness},u_hsbShift:function(){return this.properties.hsbShift},u_colorsToAlpha:function(){return this.properties.colorsToAlpha},u_frontFaceAlphaByDistance:function(){return this.properties.frontFaceAlphaByDistance},u_backFaceAlphaByDistance:function(){return this.properties.backFaceAlphaByDistance},u_translucencyRectangle:function(){return this.properties.localizedTranslucencyRectangle},u_undergroundColor:function(){return this.properties.undergroundColor},u_undergroundColorAlphaByDistance:function(){return this.properties.undergroundColorAlphaByDistance},u_lambertDiffuseMultiplier:function(){return this.properties.lambertDiffuseMultiplier},u_vertexShadowDarkness:function(){return this.properties.vertexShadowDarkness},properties:{initialColor:new re(0,0,.5,1),fillHighlightColor:new J(0,0,0,0),zoomedOutOceanSpecularIntensity:.5,oceanNormalMap:void 0,lightingFadeDistance:new L(65e5,9e6),nightFadeDistance:new L(1e7,4e7),atmosphereLightIntensity:10,atmosphereRayleighCoefficient:new f(55e-7,13e-6,284e-7),atmosphereMieCoefficient:new f(21e-6,21e-6,21e-6),atmosphereRayleighScaleHeight:1e4,atmosphereMieScaleHeight:3200,atmosphereMieAnisotropy:.9,hsbShift:new f,center3D:void 0,rtc:new f,modifiedModelView:new Q,tileRectangle:new re,verticalExaggerationAndRelativeHeight:new L(1,0),dayTextures:[],dayTextureTranslationAndScale:[],dayTextureTexCoordsRectangle:[],dayTextureUseWebMercatorT:[],dayTextureAlpha:[],dayTextureNightAlpha:[],dayTextureDayAlpha:[],dayTextureBrightness:[],dayTextureContrast:[],dayTextureHue:[],dayTextureSaturation:[],dayTextureOneOverGamma:[],dayTextureSplit:[],dayTextureCutoutRectangles:[],dayIntensity:0,colorsToAlpha:[],southAndNorthLatitude:new L,southMercatorYAndOneOverHeight:new L,waterMask:void 0,waterMaskTranslationAndScale:new re,minMaxHeight:new L,scaleAndBias:new Q,clippingPlanesEdgeColor:J.clone(J.WHITE),clippingPlanesEdgeWidth:0,localizedCartographicLimitRectangle:new re,frontFaceAlphaByDistance:new re,backFaceAlphaByDistance:new re,localizedTranslucencyRectangle:new re,undergroundColor:J.clone(J.TRANSPARENT),undergroundColorAlphaByDistance:new re,lambertDiffuseMultiplier:0,vertexShadowDarkness:0}};return c(t.materialUniformMap)?dt(n,t.materialUniformMap):n}function b0e(e,t,n){let i=n.data,o,r;if(c(i.vertexArray)?(o=i.mesh,r=i.vertexArray):c(i.fill)&&c(i.fill.vertexArray)&&(o=i.fill.mesh,r=i.fill.vertexArray),!(!c(o)||!c(r))){if(c(i.wireframeVertexArray)){if(i.wireframeVertexArray.mesh===o)return;i.wireframeVertexArray.destroy(),i.wireframeVertexArray=void 0}i.wireframeVertexArray=B0e(e,r,o),i.wireframeVertexArray.mesh=o}}function B0e(e,t,n){let o={indices:n.indices,primitiveType:Me.TRIANGLES};li.toWireframe(o);let r=o.indices,a=ut.createIndexBuffer({context:e,typedArray:r,usage:De.STATIC_DRAW,indexDatatype:Ge.fromSizeInBytes(r.BYTES_PER_ELEMENT)});return new Yi({context:e,attributes:t._attributes,indexBuffer:a})}var U4,z4,ob;(function(){let e=new tn({geometry:d_.fromDimensions({dimensions:new f(2,2,2)})}),t=new tn({geometry:new vy({radius:1})}),n=new Q,i,o;function r(a){return new cn({geometryInstances:a,appearance:new Tn({translucent:!1,flat:!0}),asynchronous:!1})}U4=function(a,s){return a===i||(ob(),i=a,n=Q.fromRotationTranslation(a.halfAxes,a.center,n),e.modelMatrix=n,e.attributes.color=In.fromColor(s),o=r(e)),o},z4=function(a,s){return a===i||(ob(),i=a,n=Q.fromTranslation(a.center,n),n=Q.multiplyByUniformScale(n,a.radius,n),t.modelMatrix=n,t.attributes.color=In.fromColor(s),o=r(t)),o},ob=function(){c(o)&&(o.destroy(),o=void 0,i=void 0)}})();var x0e=new re(0,0,0,0),T0e={frameState:void 0,surfaceTile:void 0,numberOfDayTextures:void 0,applyBrightness:void 0,applyContrast:void 0,applyHue:void 0,applySaturation:void 0,applyGamma:void 0,applyAlpha:void 0,applyDayNightAlpha:void 0,applySplit:void 0,showReflectiveOcean:void 0,showOceanWaves:void 0,enableLighting:void 0,dynamicAtmosphereLighting:void 0,dynamicAtmosphereLightingFromSun:void 0,showGroundAtmosphere:void 0,perFragmentGroundAtmosphere:void 0,hasVertexNormals:void 0,useWebMercatorProjection:void 0,enableFog:void 0,enableClippingPlanes:void 0,clippingPlanes:void 0,enableClippingPolygons:void 0,clippingPolygons:void 0,clippedByBoundaries:void 0,hasImageryLayerCutout:void 0,colorCorrect:void 0,colorToAlpha:void 0,hasGeodeticSurfaceNormals:void 0,hasExaggeration:void 0},S0e=J.TRANSPARENT,w0e=new mn;function D0e(e,t,n){let i=t.data;c(i.vertexArray)||(i.fill===void 0&&(i.fill=new jw(t)),i.fill.update(e,n));let o=n.creditDisplay,r=i.terrainData;if(c(r)&&c(r.credits)){let lt=r.credits;for(let Ct=0,yi=lt.length;Ct<yi;++Ct)o.addCreditToNextFrame(lt[Ct])}let a=rn.maximumTextureImageUnits,s=i.waterMaskTexture,A=i.waterMaskTranslationAndScale;!c(s)&&c(i.fill)&&(s=i.fill.waterMaskTexture,A=i.fill.waterMaskTranslationAndScale);let l=n.cameraUnderground,d=n.globeTranslucencyState,m=d.translucent,p=d.frontFaceAlphaByDistance,g=d.backFaceAlphaByDistance,h=d.rectangle,C=e.undergroundColor??S0e,_=e.undergroundColorAlphaByDistance??w0e,I=k4(e,n)&&n.mode===Ee.SCENE3D&&C.alpha>0&&(_.nearValue>0||_.farValue>0),b=e.lambertDiffuseMultiplier,x=e.vertexShadowDarkness,T=e.hasWaterMask&&c(s),w=T&&e.showWaterEffect,R=e.oceanNormalMap,z=w&&c(R),M=e.terrainProvider,N=c(M)&&e.terrainProvider.hasVertexNormals,O=n.fog.enabled&&n.fog.renderable&&!l,u=e.showGroundAtmosphere&&n.mode===Ee.SCENE3D,E=Yo.castShadows(e.shadows)&&!m,y=Yo.receiveShadows(e.shadows)&&!m,B=e.hueShift,D=e.saturationShift,v=e.brightnessShift,F=!(S.equalsEpsilon(B,0,S.EPSILON7)&&S.equalsEpsilon(D,0,S.EPSILON7)&&S.equalsEpsilon(v,0,S.EPSILON7)),P=!1;if(u){let lt=f.magnitude(n.camera.positionWC),Ct=e.nightFadeOutDistance;P=lt>Ct}T&&--a,z&&--a,c(n.shadowState)&&n.shadowState.shadowsEnabled&&--a,c(e.clippingPlanes)&&e.clippingPlanes.enabled&&--a,c(e.clippingPolygons)&&e.clippingPolygons.enabled&&(--a,--a),a-=d.numberOfTextureUniforms;let U=i.renderedMesh,k=U.center,j=U.encoding,q=i.tileBoundingRegion,$=n.verticalExaggeration,H=n.verticalExaggerationRelativeHeight,Z=$!==1,ee=j.hasGeodeticSurfaceNormals,Ae=f0e,ge=0,ce=0,he=0,Ie=0,Ne=!1;if(n.mode!==Ee.SCENE3D){let lt=n.mapProjection,Ct=lt.project(de.southwest(t.rectangle),p0e),yi=lt.project(de.northeast(t.rectangle),g0e);if(Ae.x=Ct.x,Ae.y=Ct.y,Ae.z=yi.x,Ae.w=yi.y,n.mode!==Ee.MORPHING&&(k=m0e,k.x=0,k.y=(Ae.z+Ae.x)*.5,k.z=(Ae.w+Ae.y)*.5,Ae.x-=k.y,Ae.y-=k.z,Ae.z-=k.y,Ae.w-=k.z),n.mode===Ee.SCENE2D&&j.quantization===ss.BITS12){let et=1/(Math.pow(2,12)-1)*.5,Qo=(Ae.z-Ae.x)*et,Xo=(Ae.w-Ae.y)*et;Ae.x-=Qo,Ae.y-=Xo,Ae.z+=Qo,Ae.w+=Xo}lt instanceof jn&&(ge=t.rectangle.south,ce=t.rectangle.north,he=jn.geodeticLatitudeToMercatorAngle(ge),Ie=1/(jn.geodeticLatitudeToMercatorAngle(ce)-he),Ne=!0)}let _e=T0e;_e.frameState=n,_e.surfaceTile=i,_e.hasWaterMask=T,_e.showReflectiveOcean=w,_e.showOceanWaves=z,_e.enableLighting=e.enableLighting,_e.dynamicAtmosphereLighting=e.dynamicAtmosphereLighting,_e.dynamicAtmosphereLightingFromSun=e.dynamicAtmosphereLightingFromSun,_e.showGroundAtmosphere=u,_e.atmosphereLightIntensity=e.atmosphereLightIntensity,_e.atmosphereRayleighCoefficient=e.atmosphereRayleighCoefficient,_e.atmosphereMieCoefficient=e.atmosphereMieCoefficient,_e.atmosphereRayleighScaleHeight=e.atmosphereRayleighScaleHeight,_e.atmosphereMieScaleHeight=e.atmosphereMieScaleHeight,_e.atmosphereMieAnisotropy=e.atmosphereMieAnisotropy,_e.perFragmentGroundAtmosphere=P,_e.hasVertexNormals=N,_e.useWebMercatorProjection=Ne,_e.clippedByBoundaries=i.clippedByBoundaries,_e.hasGeodeticSurfaceNormals=ee,_e.hasExaggeration=Z;let ve=i.imagery,at=0,Tt=ve.length,st=e.showSkirts&&!l&&!m,Rn=e.backFaceCulling&&!l&&!m,Lt=Rn?e._renderState:e._disableCullingRenderState,$t=Rn?e._blendRenderState:e._disableCullingBlendRenderState,ci=Lt,Ft=e._firstPassInitialColor,pi=n.context;if(c(e._debug.boundingSphereTile)||ob(),e._materialUniformMap!==e.materialUniformMap){e._materialUniformMap=e.materialUniformMap;let lt=e._drawCommands.length;for(let Ct=0;Ct<lt;++Ct)e._uniformMaps[Ct]=L4(n,e)}do{let lt=0,Ct,yi;if(e._drawCommands.length<=e._usedDrawCommands?(Ct=new ft,Ct.owner=t,Ct.cull=!1,Ct.boundingVolume=new le,Ct.orientedBoundingBox=void 0,yi=L4(n,e),e._drawCommands.push(Ct),e._uniformMaps.push(yi)):(Ct=e._drawCommands[e._usedDrawCommands],yi=e._uniformMaps[e._usedDrawCommands]),Ct.owner=t,++e._usedDrawCommands,t===e._debug.boundingSphereTile){let _o=q.boundingVolume,Rr=q.boundingSphere;c(_o)?U4(_o,J.RED).update(n):c(Rr)&&z4(Rr,J.RED).update(n)}let et=yi.properties;re.clone(Ft,et.initialColor),et.oceanNormalMap=R,et.lightingFadeDistance.x=e.lightingFadeOutDistance,et.lightingFadeDistance.y=e.lightingFadeInDistance,et.nightFadeDistance.x=e.nightFadeOutDistance,et.nightFadeDistance.y=e.nightFadeInDistance,et.atmosphereLightIntensity=e.atmosphereLightIntensity,et.atmosphereRayleighCoefficient=e.atmosphereRayleighCoefficient,et.atmosphereMieCoefficient=e.atmosphereMieCoefficient,et.atmosphereRayleighScaleHeight=e.atmosphereRayleighScaleHeight,et.atmosphereMieScaleHeight=e.atmosphereMieScaleHeight,et.atmosphereMieAnisotropy=e.atmosphereMieAnisotropy,et.zoomedOutOceanSpecularIntensity=e.zoomedOutOceanSpecularIntensity;let Qo=l?g:p,Xo=l?p:g;c(Qo)&&(re.fromElements(Qo.near,Qo.nearValue,Qo.far,Qo.farValue,et.frontFaceAlphaByDistance),re.fromElements(Xo.near,Xo.nearValue,Xo.far,Xo.farValue,et.backFaceAlphaByDistance)),re.fromElements(_.near,_.nearValue,_.far,_.farValue,et.undergroundColorAlphaByDistance),J.clone(C,et.undergroundColor),et.lambertDiffuseMultiplier=b,et.vertexShadowDarkness=x;let Oa=!c(i.vertexArray)&&c(e.fillHighlightColor)&&e.fillHighlightColor.alpha>0;Oa&&J.clone(e.fillHighlightColor,et.fillHighlightColor),et.verticalExaggerationAndRelativeHeight.x=$,et.verticalExaggerationAndRelativeHeight.y=H,et.center3D=U.center,f.clone(k,et.rtc),re.clone(Ae,et.tileRectangle),et.southAndNorthLatitude.x=ge,et.southAndNorthLatitude.y=ce,et.southMercatorYAndOneOverHeight.x=he,et.southMercatorYAndOneOverHeight.y=Ie;let Ro=d0e,zo=ib(t.rectangle,e.cartographicLimitRectangle),Xn=h0e,Zo=ib(t.rectangle,h);f.fromElements(B,D,v,et.hsbShift);let gi=t.rectangle,Bn=1/gi.width,Zn=1/gi.height;Ro.x=(zo.west-gi.west)*Bn,Ro.y=(zo.south-gi.south)*Zn,Ro.z=(zo.east-gi.west)*Bn,Ro.w=(zo.north-gi.south)*Zn,re.clone(Ro,et.localizedCartographicLimitRectangle),Xn.x=(Zo.west-gi.west)*Bn,Xn.y=(Zo.south-gi.south)*Zn,Xn.z=(Zo.east-gi.west)*Bn,Xn.w=(Zo.north-gi.south)*Zn,re.clone(Xn,et.localizedTranslucencyRectangle);let ni=O&&S.fog(t._distance,n.fog.density)>S.EPSILON3;F=F&&(ni||u);let Ji=!1,Qr=!1,Eo=!1,Aa=!1,Gr=!1,Jt=!1,An=!1,vo=!1,bi=!1,hr=!1;for(;lt<a&&at<Tt;){let _o=ve[at],Rr=_o.readyImagery;if(++at,!c(Rr)||Rr.imageryLayer.alpha===0)continue;let vr=_o.useWebMercatorT?Rr.textureWebMercator:Rr.texture,Ki=Rr.imageryLayer;c(_o.textureTranslationAndScale)||(_o.textureTranslationAndScale=Ki._calculateTextureTranslationAndScale(t,_o)),et.dayTextures[lt]=vr,et.dayTextureTranslationAndScale[lt]=_o.textureTranslationAndScale,et.dayTextureTexCoordsRectangle[lt]=_o.textureCoordinateRectangle,et.dayTextureUseWebMercatorT[lt]=_o.useWebMercatorT,et.dayTextureAlpha[lt]=Ki.alpha,Jt=Jt||et.dayTextureAlpha[lt]!==1,et.dayTextureNightAlpha[lt]=Ki.nightAlpha,An=An||et.dayTextureNightAlpha[lt]!==1,et.dayTextureDayAlpha[lt]=Ki.dayAlpha,An=An||et.dayTextureDayAlpha[lt]!==1,et.dayTextureBrightness[lt]=Ki.brightness,Ji=Ji||et.dayTextureBrightness[lt]!==ns.DEFAULT_BRIGHTNESS,et.dayTextureContrast[lt]=Ki.contrast,Qr=Qr||et.dayTextureContrast[lt]!==ns.DEFAULT_CONTRAST,et.dayTextureHue[lt]=Ki.hue,Eo=Eo||et.dayTextureHue[lt]!==ns.DEFAULT_HUE,et.dayTextureSaturation[lt]=Ki.saturation,Aa=Aa||et.dayTextureSaturation[lt]!==ns.DEFAULT_SATURATION,et.dayTextureOneOverGamma[lt]=1/Ki.gamma,Gr=Gr||et.dayTextureOneOverGamma[lt]!==1/ns.DEFAULT_GAMMA,et.dayTextureSplit[lt]=Ki.splitDirection,vo=vo||et.dayTextureSplit[lt]!==0;let ka=et.dayTextureCutoutRectangles[lt];if(c(ka)||(ka=et.dayTextureCutoutRectangles[lt]=new re),re.clone(re.ZERO,ka),c(Ki.cutoutRectangle)){let ii=ib(gi,Ki.cutoutRectangle),Et=de.simpleIntersection(ii,gi,O4);bi=c(Et)||bi,ka.x=(ii.west-gi.west)*Bn,ka.y=(ii.south-gi.south)*Zn,ka.z=(ii.east-gi.west)*Bn,ka.w=(ii.north-gi.south)*Zn}let Ua=et.colorsToAlpha[lt];c(Ua)||(Ua=et.colorsToAlpha[lt]=new re);let $o=c(Ki.colorToAlpha)&&Ki.colorToAlphaThreshold>0;if(hr=hr||$o,$o){let ii=Ki.colorToAlpha;Ua.x=ii.red,Ua.y=ii.green,Ua.z=ii.blue,Ua.w=Ki.colorToAlphaThreshold}else Ua.w=-1;if(c(Rr.credits)){let ii=Rr.credits;for(let Et=0,fe=ii.length;Et<fe;++Et)o.addCreditToNextFrame(ii[Et])}++lt}et.dayTextures.length=lt,et.waterMask=s,re.clone(A,et.waterMaskTranslationAndScale),et.minMaxHeight.x=j.minimumHeight,et.minMaxHeight.y=j.maximumHeight,Q.clone(j.matrix,et.scaleAndBias);let kn=e._clippingPlanes,Bi=c(kn)&&kn.enabled&&t.isClipped;Bi&&(et.clippingPlanesEdgeColor=J.clone(kn.edgeColor,et.clippingPlanesEdgeColor),et.clippingPlanesEdgeWidth=kn.edgeWidth);let Ns=e._clippingPolygons,Vi=c(Ns)&&Ns.enabled&&t.isClipped;_e.numberOfDayTextures=lt,_e.applyBrightness=Ji,_e.applyContrast=Qr,_e.applyHue=Eo,_e.applySaturation=Aa,_e.applyGamma=Gr,_e.applyAlpha=Jt,_e.applyDayNightAlpha=An,_e.applySplit=vo,_e.enableFog=ni,_e.enableClippingPlanes=Bi,_e.clippingPlanes=kn,_e.enableClippingPolygons=Vi,_e.clippingPolygons=Ns,_e.hasImageryLayerCutout=bi,_e.colorCorrect=F,_e.highlightFillTile=Oa,_e.colorToAlpha=hr,_e.showUndergroundColor=I,_e.translucent=m;let Mo=i.renderedMesh.indices.length;st||(Mo=i.renderedMesh.indexCountWithoutSkirts),Ct.shaderProgram=e._surfaceShaderSet.getShaderProgram(_e),Ct.castShadows=E,Ct.receiveShadows=y,Ct.renderState=ci,Ct.primitiveType=Me.TRIANGLES,Ct.vertexArray=i.vertexArray||i.fill.vertexArray,Ct.count=Mo,Ct.uniformMap=yi,Ct.pass=He.GLOBE,e._debug.wireframe&&(b0e(pi,e,t),c(i.wireframeVertexArray)&&(Ct.vertexArray=i.wireframeVertexArray,Ct.primitiveType=Me.LINES,Ct.count=Mo*2));let Go=Ct.boundingVolume,Sc=Ct.orientedBoundingBox;n.mode!==Ee.SCENE3D?(le.fromRectangleWithHeights2D(t.rectangle,n.mapProjection,q.minimumHeight,q.maximumHeight,Go),f.fromElements(Go.center.z,Go.center.x,Go.center.y,Go.center),n.mode===Ee.MORPHING&&(Go=le.union(q.boundingSphere,Go,Go))):(Ct.boundingVolume=le.clone(q.boundingSphere,Go),Ct.orientedBoundingBox=ui.clone(q.boundingVolume,Sc)),Ct.dirty=!0,m&&d.updateDerivedCommands(Ct,n),F4(Ct,n),ci=$t,Ft=x0e}while(at<Tt)}var rb=zi;var Q0e={SHIFT:0,CTRL:1,ALT:2},VA=Object.freeze(Q0e);var R0e={LEFT_DOWN:0,LEFT_UP:1,LEFT_CLICK:2,LEFT_DOUBLE_CLICK:3,RIGHT_DOWN:5,RIGHT_UP:6,RIGHT_CLICK:7,MIDDLE_DOWN:10,MIDDLE_UP:11,MIDDLE_CLICK:12,MOUSE_MOVE:15,WHEEL:16,PINCH_START:17,PINCH_END:18,PINCH_MOVE:19},Gt=Object.freeze(R0e);function wf(e,t,n){let i=e._element;if(i===document)return n.x=t.clientX,n.y=t.clientY,n;let o=i.getBoundingClientRect();return n.x=t.clientX-o.left,n.y=t.clientY-o.top,n}function Xw(e,t){let n=e;return c(t)&&(n+=`+${t}`),n}function Yd(e){if(e.shiftKey)return VA.SHIFT;if(e.ctrlKey)return VA.CTRL;if(e.altKey)return VA.ALT}var mo={LEFT:0,MIDDLE:1,RIGHT:2};function Ms(e,t,n,i){function o(r){i(e,r)}Ut.isInternetExplorer()?n.addEventListener(t,o,!1):n.addEventListener(t,o,{capture:!1,passive:!1}),e._removalFunctions.push(function(){n.removeEventListener(t,o,!1)})}function v0e(e){let t=e._element,n=c(t.disableRootEvents)?t:document;Ut.supportsPointerEvents()?(Ms(e,"pointerdown",t,O0e),Ms(e,"pointerup",t,X4),Ms(e,"pointermove",t,k0e),Ms(e,"pointercancel",t,X4)):(Ms(e,"mousedown",t,Z4),Ms(e,"mouseup",n,$4),Ms(e,"mousemove",n,ej),Ms(e,"touchstart",t,L0e),Ms(e,"touchend",n,Y4),Ms(e,"touchmove",n,F0e),Ms(e,"touchcancel",n,Y4)),Ms(e,"dblclick",t,P0e);let i;"onwheel"in t?i="wheel":document.onmousewheel!==void 0?i="mousewheel":i="DOMMouseScroll",Ms(e,i,t,N0e)}function M0e(e){let t=e._removalFunctions;for(let n=0;n<t.length;++n)t[n]()}var G4={position:new L};function Zw(e){e._lastSeenTouchEvent=Pw()}function $w(e){return Pw()-e._lastSeenTouchEvent>iA.mouseEmulationIgnoreMilliseconds}function Kw(e,t,n){let i=e.x-t.x,o=e.y-t.y;return Math.sqrt(i*i+o*o)<n}function Z4(e,t){if(!$w(e))return;let n=t.button;e._buttonDown[n]=!0;let i;if(n===mo.LEFT)i=Gt.LEFT_DOWN;else if(n===mo.MIDDLE)i=Gt.MIDDLE_DOWN;else if(n===mo.RIGHT)i=Gt.RIGHT_DOWN;else return;let o=wf(e,t,e._primaryPosition);L.clone(o,e._primaryStartPosition),L.clone(o,e._primaryPreviousPosition);let r=Yd(t),a=e.getInputAction(i,r);c(a)&&(L.clone(o,G4.position),a(G4),t.preventDefault())}var H4={position:new L},V4={position:new L};function Yw(e,t,n,i){let o=Yd(i),r=e.getInputAction(t,o),a=e.getInputAction(n,o);if(c(r)||c(a)){let s=wf(e,i,e._primaryPosition);if(c(r)&&(L.clone(s,H4.position),r(H4)),c(a)){let A=e._primaryStartPosition;Kw(A,s,e._clickPixelTolerance)&&(L.clone(s,V4.position),a(V4))}}}function $4(e,t){if(!$w(e))return;let n=t.button;n!==mo.LEFT&&n!==mo.MIDDLE&&n!==mo.RIGHT||(e._buttonDown[mo.LEFT]&&(Yw(e,Gt.LEFT_UP,Gt.LEFT_CLICK,t),e._buttonDown[mo.LEFT]=!1),e._buttonDown[mo.MIDDLE]&&(Yw(e,Gt.MIDDLE_UP,Gt.MIDDLE_CLICK,t),e._buttonDown[mo.MIDDLE]=!1),e._buttonDown[mo.RIGHT]&&(Yw(e,Gt.RIGHT_UP,Gt.RIGHT_CLICK,t),e._buttonDown[mo.RIGHT]=!1))}var Ww={startPosition:new L,endPosition:new L};function ej(e,t){if(!$w(e))return;let n=Yd(t),i=wf(e,t,e._primaryPosition),o=e._primaryPreviousPosition,r=e.getInputAction(Gt.MOUSE_MOVE,n);c(r)&&(L.clone(o,Ww.startPosition),L.clone(i,Ww.endPosition),r(Ww)),L.clone(i,o),(e._buttonDown[mo.LEFT]||e._buttonDown[mo.MIDDLE]||e._buttonDown[mo.RIGHT])&&t.preventDefault()}var j4={position:new L};function P0e(e,t){let n=t.button,i;if(n===mo.LEFT)i=Gt.LEFT_DOUBLE_CLICK;else return;let o=Yd(t),r=e.getInputAction(i,o);c(r)&&(wf(e,t,j4.position),r(j4))}function N0e(e,t){let n;if(c(t.deltaY)){let r=t.deltaMode;r===t.DOM_DELTA_PIXEL?n=-t.deltaY:r===t.DOM_DELTA_LINE?n=-t.deltaY*40:n=-t.deltaY*120}else t.detail>0?n=t.detail*-120:n=t.wheelDelta;if(!c(n))return;let i=Yd(t),o=e.getInputAction(Gt.WHEEL,i);c(o)&&(o(n),t.preventDefault())}function L0e(e,t){Zw(e);let n=t.changedTouches,i,o=n.length,r,a,s=e._positions;for(i=0;i<o;++i)r=n[i],a=r.identifier,s.set(a,wf(e,r,new L));ab(e,t);let A=e._previousPositions;for(i=0;i<o;++i)r=n[i],a=r.identifier,A.set(a,L.clone(s.get(a)))}function Y4(e,t){Zw(e);let n=t.changedTouches,i,o=n.length,r,a,s=e._positions;for(i=0;i<o;++i)r=n[i],a=r.identifier,s.remove(a);ab(e,t);let A=e._previousPositions;for(i=0;i<o;++i)r=n[i],a=r.identifier,A.remove(a)}var W4={position:new L},qw={position1:new L,position2:new L},q4={position:new L},J4={position:new L},K4={position:new L};function ab(e,t){let n=Yd(t),i=e._positions,o=i.length,r,a,s=e._isPinching;if(o!==1&&e._buttonDown[mo.LEFT]){if(e._buttonDown[mo.LEFT]=!1,c(e._touchHoldTimer)&&(clearTimeout(e._touchHoldTimer),e._touchHoldTimer=void 0),r=e.getInputAction(Gt.LEFT_UP,n),c(r)&&(L.clone(e._primaryPosition,q4.position),r(q4)),o===0&&!e._isTouchHolding&&(a=e.getInputAction(Gt.LEFT_CLICK,n),c(a))){let A=e._primaryStartPosition,l=e._previousPositions.values[0];Kw(A,l,e._clickPixelTolerance)&&(L.clone(e._primaryPosition,J4.position),a(J4))}e._isTouchHolding=!1}if(o===0&&s&&(e._isPinching=!1,r=e.getInputAction(Gt.PINCH_END,n),c(r)&&r()),o===1&&!s){let A=i.values[0];L.clone(A,e._primaryPosition),L.clone(A,e._primaryStartPosition),L.clone(A,e._primaryPreviousPosition),e._buttonDown[mo.LEFT]=!0,r=e.getInputAction(Gt.LEFT_DOWN,n),c(r)&&(L.clone(A,W4.position),r(W4)),e._touchHoldTimer=setTimeout(function(){if(!e.isDestroyed()&&(e._touchHoldTimer=void 0,e._isTouchHolding=!0,a=e.getInputAction(Gt.RIGHT_CLICK,n),c(a))){let l=e._primaryStartPosition,d=e._previousPositions.values[0];Kw(l,d,e._holdPixelTolerance)&&(L.clone(e._primaryPosition,K4.position),a(K4))}},iA.touchHoldDelayMilliseconds),t.preventDefault()}o===2&&!s&&(e._isPinching=!0,r=e.getInputAction(Gt.PINCH_START,n),c(r)&&(L.clone(i.values[0],qw.position1),L.clone(i.values[1],qw.position2),r(qw),t.preventDefault()))}function F0e(e,t){Zw(e);let n=t.changedTouches,i,o=n.length,r,a,s=e._positions;for(i=0;i<o;++i){r=n[i],a=r.identifier;let l=s.get(a);c(l)&&wf(e,r,l)}tj(e,t);let A=e._previousPositions;for(i=0;i<o;++i)r=n[i],a=r.identifier,L.clone(s.get(a),A.get(a))}var Jw={startPosition:new L,endPosition:new L},jC={distance:{startPosition:new L,endPosition:new L},angleAndHeight:{startPosition:new L,endPosition:new L}};function tj(e,t){let n=Yd(t),i=e._positions,o=e._previousPositions,r=i.length,a;if(r===1&&e._buttonDown[mo.LEFT]){let s=i.values[0];L.clone(s,e._primaryPosition);let A=e._primaryPreviousPosition;a=e.getInputAction(Gt.MOUSE_MOVE,n),c(a)&&(L.clone(A,Jw.startPosition),L.clone(s,Jw.endPosition),a(Jw)),L.clone(s,A),t.preventDefault()}else if(r===2&&e._isPinching&&(a=e.getInputAction(Gt.PINCH_MOVE,n),c(a))){let s=i.values[0],A=i.values[1],l=o.values[0],d=o.values[1],m=A.x-s.x,p=A.y-s.y,g=Math.sqrt(m*m+p*p)*.25,h=d.x-l.x,C=d.y-l.y,_=Math.sqrt(h*h+C*C)*.25,I=(A.y+s.y)*.125,b=(d.y+l.y)*.125,x=Math.atan2(p,m),T=Math.atan2(C,h);L.fromElements(0,_,jC.distance.startPosition),L.fromElements(0,g,jC.distance.endPosition),L.fromElements(T,b,jC.angleAndHeight.startPosition),L.fromElements(x,I,jC.angleAndHeight.endPosition),a(jC)}}function O0e(e,t){if(t.target.setPointerCapture(t.pointerId),t.pointerType==="touch"){let n=e._positions,i=t.pointerId;n.set(i,wf(e,t,new L)),ab(e,t),e._previousPositions.set(i,L.clone(n.get(i)))}else Z4(e,t)}function X4(e,t){if(t.pointerType==="touch"){let n=e._positions,i=t.pointerId;n.remove(i),ab(e,t),e._previousPositions.remove(i)}else $4(e,t)}function k0e(e,t){if(t.pointerType==="touch"){let n=e._positions,i=t.pointerId,o=n.get(i);if(!c(o))return;wf(e,t,o),tj(e,t);let r=e._previousPositions;L.clone(n.get(i),r.get(i))}else ej(e,t)}function iA(e){this._inputEvents={},this._buttonDown={[mo.LEFT]:!1,[mo.MIDDLE]:!1,[mo.RIGHT]:!1},this._isPinching=!1,this._isTouchHolding=!1,this._lastSeenTouchEvent=-iA.mouseEmulationIgnoreMilliseconds,this._primaryStartPosition=new L,this._primaryPosition=new L,this._primaryPreviousPosition=new L,this._positions=new xp,this._previousPositions=new xp,this._removalFunctions=[],this._touchHoldTimer=void 0,this._clickPixelTolerance=5,this._holdPixelTolerance=25,this._element=e??document,v0e(this)}iA.prototype.setInputAction=function(e,t,n){let i=Xw(t,n);this._inputEvents[i]=e};iA.prototype.getInputAction=function(e,t){let n=Xw(e,t);return this._inputEvents[n]};iA.prototype.removeInputAction=function(e,t){let n=Xw(e,t);delete this._inputEvents[n]};iA.prototype.isDestroyed=function(){return!1};iA.prototype.destroy=function(){return M0e(this),me(this)};iA.mouseEmulationIgnoreMilliseconds=800;iA.touchHoldDelayMilliseconds=1500;var Wd=iA;function U0e(e,t,n){return function(){n.apply(e,arguments),t.apply(e,arguments)}}var eD=U0e;globalThis.CESIUM_VERSION="1.133.1";function YC(){this.states=new Ba,this.count=0}YC.prototype.hidePrimitiveCollection=function(e,t){let n=e.length,i=t??c;for(let o=0;o<n;++o){let r=e.get(o);if(r instanceof Bf){this.hidePrimitiveCollection(r,i);continue}this.states.push(r.show),!i(r)&&(r.show=!1)}};YC.prototype.restorePrimitiveCollection=function(e){let t=e.length;for(let n=0;n<t;++n){let i=e.get(n);if(i instanceof Bf){this.restorePrimitiveCollection(i);continue}i.show=this.states.get(this.count++)}};YC.prototype.hide=function(e,t){this.states.length=0,this.hidePrimitiveCollection(e.primitives,t),this.hidePrimitiveCollection(e.groundPrimitives,t)};YC.prototype.restore=function(e){this.count=0,this.restorePrimitiveCollection(e.primitives),this.restorePrimitiveCollection(e.groundPrimitives)};var sb=YC;function z0e(e){let t=document.createElement("div");return t.innerHTML=e,t.children.length===1?t.removeChild(t.firstChild):t}var Wm=z0e;var G0e=new f,H0e=new L,V0e=new f,j0e=new f;function Y0e(e,t,n){let i=e.context,o=e.camera.positionWC,r=f.distance(t,o),a=i.drawingBufferWidth,s=i.drawingBufferHeight;return e.camera.frustum.getPixelDimensions(a,s,r,e.pixelRatio,n)}function W0e(e,t,n,i,o){let r=1,a=1,s=1,A;return e.x>0&&(A=e.x*n.x,r=Math.min(A,t.x)/i.x),e.y>0&&(A=e.y*n.y,a=Math.min(A,t.y)/i.y),s=(r+a)/2,f.fromElements(r,a,s,o)}function oA(e,t,n,i,o){let r=Q.getTranslation(i,G0e),a=Y0e(n,r,H0e),s=Q.getScale(i,V0e),A=W0e(e,t,a,s,j0e);return Q.multiplyByScale(i,A,o)}var nj=new f,q0e=new ai,ij=new sb;function J0e(e,t,n,i){i=c(i)?i:new f;let o;if(e.pickPositionSupported){let a=n??c;ij.hide(e,a);let s=e.pick(t,1,1);if(ij.restore(e),a(s)&&(o=e.pickPosition(t,nj),c(o)))return f.clone(o,i)}if(!c(e.globe))return;let r=e.camera.getPickRay(t,q0e);if(o=e.globe.pick(r,e,nj),c(o))return f.clone(o,i)}var ca=J0e;var K0e=J.WHITE,X0e=J.RED.withAlpha(.2),Z0e=J.CYAN.withAlpha(.2),$0e=J.WHITE.withAlpha(.2),eBe=new L(100,100),tBe=new L(1/0,1/0),nBe=new L(50,50);function iBe(e,t,n){let i;return Q.equals(t,Q.IDENTITY)?i=Q.clone(Q.IDENTITY,e._modelMatrix):i=Lw.createPrimitiveMatrix(e._initialPlane,e._dimensions,t,e._modelMatrix),(e._pixelSize.x>0||e._pixelSize.y>0)&&(i=oA(e._pixelSize,e._maximumSizeInMeters,n,i,i)),i}var oBe=new Ze(new f(1,0,0),0);function rBe(e){let t=Ze.transform(e._initialPlane,e._localTransform,oBe);e._clippingPlane.normal=t.normal,e._clippingPlane.distance=t.distance}function qd(e){e=e??G.EMPTY_OBJECT;let t=e.clippingPlane,n=e.transform,i=L.clone(e.size??nBe),o=e.localTransform??Q.clone(Q.IDENTITY);this._worldTransform=Q.multiplyTransformation(n,o,new Q),this._worldNormalTransform=Q.inverseTranspose(this._worldTransform,new Q),this._normalWC=Q.multiplyByPointAsVector(this._worldNormalTransform,t.normal,new f),this._normalWC=f.normalize(this._normalWC,this._normalWC),this.show=e.show??!0,this._disableDepthFail=e.disableDepthFail??!1,this._outlineColor=e.outlineColor??K0e,this._frontColor=e.frontColor??X0e,this._backColor=e.backColor??Z0e,this._highlightColor=e.highlightColor??$0e,this._pixelSize=L.clone(e.pixelSize??eBe),this._maximumSizeInMeters=L.clone(e.maximumSizeInMeters??tBe),this._initialPlane=new Ze(t.normal,t.distance),this._clippingPlane=t,this._backPrimitiveId={name:"back",plane:this},this._frontPrimitiveId={name:"front",plane:this},this._primitiveOutlineId=ji(),this._modelMatrix=Q.IDENTITY.clone(),this._originalDistance=t.distance,this._transform=n,this._initialLocalTransform=Q.clone(o),this._localTransform=o,this._centerPositionScratch=new f,this._highlighted=!1,this._dimensions=i,this._backPrimitive=void 0,this._frontPrimitive=void 0,this._outlinePrimitive=void 0,this._update=!0}Object.defineProperties(qd.prototype,{size:{get:function(){return this._dimensions}},clippingPlane:{get:function(){return this._clippingPlane}},transform:{get:function(){return this._transform}},localTransform:{get:function(){return this._localTransform}},centerPosition:{get:function(){let e=this._centerPositionScratch;return f.clone(f.ZERO,e),Q.multiplyByPoint(this._modelMatrix,e,e)}},frontColor:{get:function(){return this._highlighted?this._highlightColor:this._frontColor}},backColor:{get:function(){return this._highlighted?this._highlightColor:this._backColor}},pixelSize:{get:function(){return this._pixelSize}},maximumSizeInMeters:{get:function(){return this._maximumSizeInMeters}}});qd.prototype.highlight=function(e){if(this._highlighted=e,c(this._backPrimitive)){let t,n=this.backColor,i=this._backPrimitive.getGeometryInstanceAttributes(this._backPrimitiveId).color;i[0]=J.floatToByte(n.red),i[1]=J.floatToByte(n.green),i[2]=J.floatToByte(n.blue),i[3]=J.floatToByte(n.alpha),this._backPrimitive.getGeometryInstanceAttributes(this._backPrimitiveId).color=i,this._disableDepthFail||(t=this._backPrimitive.getGeometryInstanceAttributes(this._backPrimitiveId).depthFailColor,t[0]=J.floatToByte(n.red),t[1]=J.floatToByte(n.green),t[2]=J.floatToByte(n.blue),t[3]=J.floatToByte(n.alpha),this._backPrimitive.getGeometryInstanceAttributes(this._backPrimitiveId).depthFailColor=t),n=this.frontColor,i=this._frontPrimitive.getGeometryInstanceAttributes(this._frontPrimitiveId).color,i[0]=J.floatToByte(n.red),i[1]=J.floatToByte(n.green),i[2]=J.floatToByte(n.blue),i[3]=J.floatToByte(n.alpha),this._frontPrimitive.getGeometryInstanceAttributes(this._frontPrimitiveId).color=i,this._disableDepthFail||(t=this._frontPrimitive.getGeometryInstanceAttributes(this._frontPrimitiveId).depthFailColor,t[0]=J.floatToByte(n.red),t[1]=J.floatToByte(n.green),t[2]=J.floatToByte(n.blue),t[3]=J.floatToByte(n.alpha),this._frontPrimitive.getGeometryInstanceAttributes(this._frontPrimitiveId).depthFailColor=t)}};qd.prototype.reset=function(){this._clippingPlane.normal=f.clone(this._initialPlane.normal,this._clippingPlane.normal),this._clippingPlane.distance=this._initialPlane.distance,this._localTransform=Q.clone(this._initialLocalTransform,this._localTransform),this._update=!0};qd.prototype.update=function(e){if(!this.show)return;let t=this._clippingPlane;this._worldTransform=Q.multiplyTransformation(this._transform,this._localTransform,this._worldTransform),this._worldNormalTransform=Q.inverseTranspose(this._worldTransform,this._worldNormalTransform),this._normalWC=Q.multiplyByPointAsVector(this._worldNormalTransform,t.normal,this._normalWC),f.normalize(this._normalWC,this._normalWC);let n=iBe(this,this._worldTransform,e);if(rBe(this),this._update){this._update=!1,this._frontPrimitive=this._frontPrimitive&&this._frontPrimitive.destroy(),this._backPrimitive=this._backPrimitive&&this._backPrimitive.destroy(),this._outlinePrimitive=this._outlinePrimitive&&this._outlinePrimitive.destroy();let i,o,r,a;this._disableDepthFail||(i=In.fromColor(this.backColor),o=new Tn({flat:!0,closed:!1,translucent:!0,renderState:{cull:{enabled:!0}}}),r=In.fromColor(this.frontColor),a=new Tn({flat:!0,closed:!1,translucent:!0,renderState:{cull:{enabled:!0,face:W.FRONT}}})),this._backPrimitive=new cn({geometryInstances:new tn({geometry:xf.createGeometry(new xf),attributes:{color:In.fromColor(this.backColor),depthFailColor:i},id:this._backPrimitiveId}),appearance:new Tn({flat:!0,closed:!1,translucent:!0,renderState:{cull:{enabled:!0}}}),depthFailAppearance:o,asynchronous:!1}),this._frontPrimitive=new cn({geometryInstances:new tn({geometry:xf.createGeometry(new xf),attributes:{color:In.fromColor(this.frontColor),depthFailColor:r},id:this._frontPrimitiveId}),appearance:new Tn({flat:!0,closed:!1,translucent:!0,renderState:{cull:{enabled:!0,face:W.FRONT}}}),depthFailAppearance:a,asynchronous:!1}),this._outlinePrimitive=new cn({geometryInstances:new tn({geometry:Gm.createGeometry(new Gm),attributes:{color:In.fromColor(this._outlineColor)},id:this._primitiveOutlineId}),appearance:new Tn({flat:!0,translucent:!1,renderState:{lineWidth:1}}),asynchronous:!1})}this._backPrimitive.modelMatrix=n,this._frontPrimitive.modelMatrix=n,this._outlinePrimitive.modelMatrix=n,this._backPrimitive.update(e),this._frontPrimitive.update(e),this._outlinePrimitive.update(e)};qd.prototype.isDestroyed=function(){return!1};qd.prototype.destroy=function(){return c(this._backPrimitive)&&this._backPrimitive.destroy(),c(this._frontPrimitive)&&this._frontPrimitive.destroy(),c(this._outlinePrimitive)&&this._outlinePrimitive.destroy(),me(this)};var qm=qd;var sj=new Ze(f.UNIT_X,0),aBe=new f,sBe=new f,cBe=new f,ABe=new Q,lBe=new Q,oj=new f,rj=new f,uBe=new f,fBe=new f,dBe=new f,aj=new ai;function hBe(e,t,n,i){let o=Ze.clone(n,sj);return o.distance=0,o=Ze.transform(o,e,o),f.subtract(t,f.multiplyByScalar(o.normal,Ze.getPointDistance(o,t),aBe),i)}function mBe(e,t,n){let i=Ze.clone(n,sj);i.distance=0,i=Ze.transform(i,e,i),n.distance=-Ze.getPointDistance(i,t)}function va(e){let t=e.scene,n=e.clippingPlanes,i=t.primitives.add(new Bf),o=this;this._removeAddEventListener=n.planeAdded.addEventListener(function(){o._addPlane()},this),this._removeRemoveEventListener=n.planeRemoved.addEventListener(va.prototype._removePlane,this),this._planeSizeInMeters=e.planeSizeInMeters,this._scene=t,this._sseh=new Wd(t.canvas),this._clippingPlanes=n,this._primitives=i,this._origin=e.origin,this._movePlanesToOrigin=e.movePlanesToOrigin??!0,this._primitiveOptions=e.primitiveOptions??G.EMPTY_OBJECT,this._active=!1,this._pickedPlane=void 0,this._hoverPlane=void 0,this._draggingPlane=new Ze(f.UNIT_X,0),this._pixelSize=e.pixelSize,this._maximumSizeInMeters=e.maximumSizeInMeters,this._target=void 0,this._transform=Q.clone(Q.IDENTITY),this._createPlanes()}Object.defineProperties(va.prototype,{active:{get:function(){return this._active}},scene:{get:function(){return this._scene}},clippingPlanes:{get:function(){return this._clippingPlanes}}});va.prototype.activate=function(){this._active=!0;let e=this._primitives;for(let n=0;n<e.length;n++)e.get(n).show=!0;let t=this._sseh;t.setInputAction(this._handleLeftDown.bind(this),Gt.LEFT_DOWN),t.setInputAction(this._handleLeftUp.bind(this),Gt.LEFT_UP),t.setInputAction(this._handleMouseMove.bind(this),Gt.MOUSE_MOVE)};va.prototype.deactivate=function(){let e=this._primitives;for(let n=0;n<e.length;n++)e.get(n).show=!1;let t=this._sseh;t.removeInputAction(Gt.LEFT_DOWN),t.removeInputAction(Gt.LEFT_UP),t.removeInputAction(Gt.MOUSE_MOVE),this._active=!1};va.prototype._createPlanes=function(){let e=this._clippingPlanes,t=e.owner;if(typeof t>"u"){let i=this._scene.preRender.addEventListener(()=>{i(),this.isDestroyed()||this._createPlanes()});return}this._target=t;let n=this._origin;if(t instanceof LC){this._transform=t.clippingPlanesOriginMatrix,c(n)||(this._origin=f.clone(t.boundingSphere.center));for(let i=0;i<e.length;i++)this._addPlane(e.get(i))}else if(t instanceof Jc){let i=()=>{this._transform=t.modelMatrix,c(n)||(this._origin=f.clone(t.boundingSphere.center));for(let r=0;r<e.length;r++)this._addPlane(e.get(r))};if(t.ready){i();return}let o=t.readyEvent.addEventListener(()=>{o(),!this.isDestroyed()&&i()})}else if(t instanceof rb){this._transform=e.modelMatrix,c(n)||(this._origin=Q.getTranslation(e.modelMatrix,new f));for(let i=0;i<e.length;i++)this._addPlane(e.get(i));return}};va.prototype._addPlane=function(e){let t=this,n=this._movePlanesToOrigin,i=this._primitives,o,r=this._planeSizeInMeters,a=this._pixelSize,s=this._maximumSizeInMeters,A=this._primitiveOptions,l=t._target,d=t._origin,m=t._transform,p=Q.inverse(m,ABe);Q.equals(m,Q.IDENTITY)?(o=d,n&&(e.distance=0)):(o=hBe(m,d,e,sBe),n&&mBe(m,d,e)),c(r)||(r=t._computePlaneSize(l));let g=Q.multiplyByPoint(p,o,dBe),h=Q.fromTranslation(g);i.add(new qm({transform:m,localTransform:h,clippingPlane:e,show:t._active,size:r,disableDepthFail:A.disableDepthFail,outlineColor:A.outlineColor,frontColor:A.frontColor,backColor:A.backColor,highlightColor:A.highlightColor,pixelSize:a,maximumSizeInMeters:s}))};va.prototype._computePlaneSize=function(e){if(e instanceof rb)return new L(200,200);let t=e.boundingSphere.radius*.5;return new L(t,t)};va.prototype._removePlane=function(e){let t=this._primitives;for(let n=0;n<t.length;n++){let i=t.get(n);if(i.clippingPlane===e){t.remove(i);break}}};va.prototype._handleLeftDown=function(e){let t=this._scene;if(t.mode!==Ee.SCENE3D)return;let n=t.pick(e.position);if(c(n)&&c(n.id)&&n.id.plane instanceof qm){let i=n.id.plane;i.highlight(!0);let o=i._normalWC,r=f.cross(o,t.camera.directionWC,cBe);r=f.cross(o,r,r),r=f.normalize(r,r),this._draggingPlane=Ze.fromPointNormal(i.centerPosition,r,this._draggingPlane),t.screenSpaceCameraController.enableInputs=!1,this._pickedPlane=i,t.requestRenderMode&&t.requestRender()}};va.prototype._handleLeftUp=function(){let e=this._scene;if(e.mode!==Ee.SCENE3D)return;let t=this._pickedPlane;c(t)&&(t.highlight(!1),this._pickedPlane=void 0,e.requestRenderMode&&e.requestRender()),e.screenSpaceCameraController.enableInputs=!0};va.prototype._handleMouseMove=function(e){let t=this._scene;if(t.mode!==Ee.SCENE3D)return;let n=this._pickedPlane;if(c(n)){let i=this._draggingPlane,o=t.camera.getPickRay(e.startPosition,aj),r=en.rayPlane(o,i,oj);if(!c(r))return;o=t.camera.getPickRay(e.endPosition,aj);let a=en.rayPlane(o,i,rj);if(!c(a))return;let s=f.subtract(r,n.centerPosition,oj);s=f.projectVector(s,n._normalWC,s);let A=f.subtract(a,n.centerPosition,rj);A=f.projectVector(A,n._normalWC,A);let l=f.subtract(A,s,uBe),d=Q.inverse(n.transform,lBe),m=Q.multiplyByPointAsVector(d,l,fBe);Q.multiplyByTranslation(n.localTransform,m,n.localTransform),t.requestRenderMode&&t.requestRender()}else{c(this._hoverPlane)&&this._hoverPlane.highlight(!1);let i=t.pick(e.endPosition);if(c(i)&&c(i.id)&&i.id.plane instanceof qm){let o=i.id.plane;o.highlight(!0),this._hoverPlane=o}}};va.prototype.reset=function(){let e=this._primitives;for(let t=0;t<e.length;t++)e.get(t).reset()};va.prototype.isDestroyed=function(){return!1};va.prototype.destroy=function(){return this.deactivate(),this._sseh.destroy(),this._scene.primitives.remove(this._primitives),this._removeAddEventListener(),this._removeRemoveEventListener(),me(this)};var cj=va;var pBe={BeforeDraw:0,Drawing:1,AfterDraw:2},Ii=Object.freeze(pBe);function tD(e,t,n){return c(e)?(n=c(n)?n:{},n.color=t,new Oc({material:Ci.fromType(e,n)})):new Cl}function Jd(e){e=e??G.EMPTY_OBJECT,this.show=e.show??!0,this._id=c(e.id)?e.id:ji(),this._ellipsoid=e.ellipsoid??pe.WGS84,this._width=e.width??3,this._color=J.clone(e.color??J.WHITE),this._depthFailColor=J.clone(e.depthFailColor??this._color),this._positions=e.positions??[],this._materialType=e.materialType,this._depthFailMaterialType=e.depthFailMaterialType??this._materialType,this._uniforms=e.uniforms??void 0,this._depthFailUniforms=e.depthFailUniforms??this._uniforms,this._loop=e.loop??!1,this._clampToGround=e.clampToGround??!1,this._classificationType=e.classificationType??wn.BOTH,this._allowPicking=e.allowPicking??!0,this._boundingSphere=new le,this._primitive=void 0,this._update=!0}Object.defineProperties(Jd.prototype,{positions:{get:function(){return this._positions},set:function(e){this._positions=e,this._update=!0}},color:{get:function(){return this._color},set:function(e){if(!J.equals(this._color,e)&&(this._color=J.clone(e,this._color),c(this._primitive))){let t=this._primitive.getGeometryInstanceAttributes(this._id).color;t=e.toBytes(t),this._primitive.getGeometryInstanceAttributes(this._id).color=t}}},depthFailColor:{get:function(){return this._depthFailColor},set:function(e){if(!J.equals(this._depthFailColor,e)&&(this._depthFailColor=J.clone(e,this._depthFailColor),c(this._primitive)&&!this._clampToGround)){let t=this._primitive.getGeometryInstanceAttributes(this._id).depthFailColor;t=e.toBytes(t),this._primitive.getGeometryInstanceAttributes(this._id).depthFailColor=t}}},materialType:{get:function(){return this._materialType},set:function(e){e!==this._materialType&&(this._materialType=e,this._update=!0)}},depthFailMaterialType:{get:function(){return this._depthFailMaterialType},set:function(e){e!==this._depthFailMaterialType&&(this._depthFailMaterialType=e,this._update=!0)}},uniforms:{get:function(){return this._uniforms},set:function(e){if(e===this._uniforms||(this._uniforms=e,!c(e)||!c(this._primitive)))return;let t=this._primitive.appearance.material.uniforms;for(let n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}},depthFailUniforms:{get:function(){return this._depthFailUniforms},set:function(e){if(e===this._depthFailUniforms||(this._depthFailUniforms=e,!c(e)||!c(this._primitive)))return;let t=this._primitive.depthFailAppearance.material.uniforms;for(let n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}},id:{get:function(){return this._id}},boundingVolume:{get:function(){return this._boundingSphere}},width:{get:function(){return this._width}},ellipsoid:{get:function(){return this._ellipsoid}},loop:{get:function(){return this._loop}},clampToGround:{get:function(){return this._clampToGround}},classificationType:{get:function(){return this._classificationType},set:function(e){this._classificationType=e,this._update=!0}},allowPicking:{get:function(){return this._allowPicking}}});Jd.prototype.update=function(e){if(!this.show)return;let t=this._positions;if(!c(t)||t.length<2){this._primitive=this._primitive&&this._primitive.destroy();return}this._update&&(this._update=!1,this._primitive=this._primitive&&this._primitive.destroy(),this._primitive=this._clampToGround?this._createGroundPolyline():this._createPolyline(),this._boundingSphere=le.fromPoints(t,this._boundingSphere)),this._primitive.update(e)};Jd.prototype._createPolyline=function(){let e=this._positions;return this._loop&&e.length>2&&(e=e.slice(),e.push(e[0])),new cn({geometryInstances:new tn({geometry:new zC({positions:e,width:this._width,vertexFormat:Oc.VERTEX_FORMAT,ellipsoid:this._ellipsoid,arcType:ti.NONE}),attributes:{color:In.fromColor(this._color),depthFailColor:In.fromColor(this._depthFailColor)},id:this._id}),appearance:tD(this._materialType,this._color,this._uniforms),depthFailAppearance:tD(this._depthFailMaterialType,this._depthFailColor,this._depthFailUniforms),asynchronous:!1,allowPicking:this._allowPicking})};Jd.prototype._createGroundPolyline=function(){let e=this._positions;this._loop&&e.length>2&&(e=e.slice(),e.push(e[0]));let t=new Up({positions:e,width:this._width,vertexFormat:Oc.VERTEX_FORMAT,ellipsoid:this._ellipsoid,arcType:ti.GEODESIC});return new zp({geometryInstances:new tn({geometry:t,attributes:{color:In.fromColor(this._color)},id:this._id}),appearance:tD(this._materialType,this._color,this._uniforms),asynchronous:!1,allowPicking:this._allowPicking,classificationType:this._classificationType})};Jd.prototype.isDestroyed=function(){return!1};Jd.prototype.destroy=function(){return this._primitive=this._primitive&&this._primitive.destroy(),me(this)};var zr=Jd;function Aj(e){return c(e)&&(e instanceof LC||e instanceof Jc)}function gBe(e){return Aj(e)||c(e)&&(e instanceof Cs||e instanceof Wg)?!0:c(e)&&Aj(e.primitive)}var po=gBe;var CBe=new L,lj=new f,EBe=10;function jA(e){e=e??G.EMPTY_OBJECT;let t=e.scene,n=e.primitives??t.primitives,i=e.points,o=!1;c(i)||(i=n.add(new ou),o=!0),this._scene=t,this._pointCollection=i,this._removePoints=o,this._polyline=n.add(new zr(e.polylineOptions)),this._primitives=n,this._pointOptions=e.pointOptions,this._positions=[],this._points=[],this._tempNextPos=new f,this._mode=Ii.BeforeDraw,this._lastClickPosition=new L(Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY)}jA.prototype.addPoint=function(e){let t=this._positions;t.push(e),this._polyline.positions=t;let n=this._pointCollection.add(this._pointOptions);n.position=e,n.show=!0,this._points.push(n)};jA.prototype.handleDoubleClick=function(){this._mode=Ii.AfterDraw,this._polyline.positions=this._positions};jA.prototype.handleClick=function(e){if(this._mode===Ii.AfterDraw)return;let t=this._lastClickPosition;if(L.magnitude(L.subtract(t,e,CBe))<EBe)return;let i=jA._getWorldPosition(this._scene,e,po,lj);if(c(i))return this.addPoint(f.clone(i,new f)),this._mode=Ii.Drawing,L.clone(e,t),i};jA.prototype.handleMouseMove=function(e){if(this._mode!==Ii.Drawing)return;let t=this._scene,n=jA._getWorldPosition(t,e,po,lj);if(!c(n))return;let i=this._positions.slice();return i.push(f.clone(n,this._tempNextPos)),this._polyline.positions=i,n};jA.prototype.isDestroyed=function(){return!1};jA.prototype.destroy=function(){if(this._removePoints)this._primitives.remove(this._points);else{let e=this._points,t=this._pointCollection;for(let n=0;n<e.length;n++)t.remove(e[n])}return this._primitives.remove(this._polyline),me(this)};jA._getWorldPosition=ca;var Ma=jA;var _Be=new L,nD=new f,IBe=new f,yBe=new f,bBe=new ai,BBe=new f,xBe=new f,WC=new ue,TBe=10;function rA(e){e=e??G.EMPTY_OBJECT,Ma.call(this,e);let t=e.polylineOptions??G.EMPTY_OBJECT,n={color:t.color,ellipsoid:t.ellipsoid,width:2,materialType:Ci.PolylineDashType,allowPicking:!1},i=this._primitives.add(new zr(n));i.positions=[new f,new f],i.show=!1,this._dashLineOptions=n,this._dashedLines=[],this._moveDashLine=i,this._heightPlane=new Ze(f.UNIT_X,0),this._heightPlaneCV=new Ze(f.UNIT_X,0),this._firstMove=!1,this._height=0}rA.prototype=Object.create(Ma.prototype);rA.prototype.constructor=rA;rA.prototype._setDashLinePositions=function(e,t){let n=this._scene.globe,i=this._scene.frameState.mapProjection.ellipsoid,o=e.positions;o[0]=f.clone(t,o[0]);let r=i.cartesianToCartographic(t,WC);c(n)?r.height=n.getHeight(r)??0:r.height=0,o[1]=i.cartographicToCartesian(r,o[1]),e.positions=o};rA.prototype.addPoint=function(e){Ma.prototype.addPoint.call(this,e);let t=this._primitives.add(new zr(this._dashLineOptions));t.positions=[new f,new f],this._dashedLines.push(t),this._setDashLinePositions(t,e)};rA.prototype.handleDoubleClick=function(){this._mode=Ii.AfterDraw,this._polyline.positions=this._positions,this._moveDashLine.show=!1};rA.prototype.handleClick=function(e){let t;if(this._positions.length===0){let n=this._scene,i=n.frameState.mapProjection.ellipsoid;if(t=Ma.prototype.handleClick.call(this,e),!c(t))return;this._heightPlane=Ze.fromPointNormal(t,i.geodeticSurfaceNormal(t,yBe),this._heightPlane);let o=i.cartesianToCartographic(t,WC),r=n.mapProjection.project(o,IBe),a=f.fromElements(r.z,r.x,r.y,r);this._heightPlaneCV=Ze.fromPointNormal(a,f.UNIT_X,this._heightPlaneCV),this._height=i.cartesianToCartographic(t,WC).height,this._firstMove=!0}else{let n=this._lastClickPosition;if(L.magnitude(L.subtract(n,e,_Be))<TBe)return;L.clone(e,n),t=f.clone(this._tempNextPos),this.addPoint(t),this._firstMove=!0}return t};rA.prototype.handleMouseMove=function(e,t){if(this._mode!==Ii.Drawing)return;let n=this._scene,i=n.frameState.mapProjection.ellipsoid,o=this._positions,r,a=n.camera.getPickRay(e,bBe);if(n.mode===Ee.SCENE3D)r=en.rayPlane(a,this._heightPlane,nD);else if(n.mode===Ee.COLUMBUS_VIEW){r=en.rayPlane(a,this._heightPlaneCV,nD),r=f.fromElements(r.y,r.z,r.x,r);let s=n.mapProjection.unproject(r,WC);r=i.cartographicToCartesian(s,r)}else if(r=n.camera.pickEllipsoid(e,i,nD),c(r)){let s=i.cartesianToCartographic(r,WC);s.height=this._height,r=i.cartographicToCartesian(s,r)}if(c(r)){if(!this._firstMove&&t){let s=o[o.length-1],A=this._tempNextPos,l=f.subtract(A,s,BBe),d=f.subtract(r,s,xBe);d=f.projectVector(d,l,d),r=f.add(s,d,r)}return o=o.slice(),o.push(f.clone(r,this._tempNextPos)),this._polyline.positions=o,this._firstMove=!1,this._moveDashLine.show=!0,this._setDashLinePositions(this._moveDashLine,r),r}};rA.prototype.isDestroyed=function(){return!1};rA.prototype.destroy=function(){let e=this._primitives,t=this._dashedLines;for(let n=0;n<t.length;n++)e.remove(t[n]);e.remove(this._moveDashLine),Ma.prototype.destroy.call(this)};var Au=rA;function iD(e){return new Tn({flat:!0,closed:!1,translucent:e.alpha<1})}function Kd(e){e=e??G.EMPTY_OBJECT,this.show=e.show??!0,this._id=c(e.id)?e.id:ji(),this._ellipsoid=e.ellipsoid??pe.WGS84,this._color=J.clone(e.color??J.WHITE),this._depthFailColor=J.clone(e.depthFailColor??this._color),this._positions=e.positions??[],this._clampToGround=e.clampToGround??!1,this._classificationType=e.classificationType??wn.BOTH,this._allowPicking=e.allowPicking??!0,this._boundingSphere=new le,this._primitive=void 0,this._update=!0}Object.defineProperties(Kd.prototype,{positions:{get:function(){return this._positions},set:function(e){this._positions=e,this._update=!0}},color:{get:function(){return this._color},set:function(e){if(!J.equals(this._color,e)&&(this._color=J.clone(e,this._color),c(this._primitive))){let t=this._primitive.getGeometryInstanceAttributes(this._id).color;t=e.toBytes(t),this._primitive.getGeometryInstanceAttributes(this._id).color=t}}},depthFailColor:{get:function(){return this._depthFailColor},set:function(e){if(!J.equals(this._depthFailColor,e)&&(this._depthFailColor=J.clone(e,this._depthFailColor),c(this._primitive)&&!this._clampToGround)){let t=this._primitive.getGeometryInstanceAttributes(this._id).depthFailColor;t=e.toBytes(t),this._primitive.getGeometryInstanceAttributes(this._id).depthFailColor=t}}},id:{get:function(){return this._id}},boundingVolume:{get:function(){return this._boundingSphere}},ellipsoid:{get:function(){return this._ellipsoid}},clampToGround:{get:function(){return this._clampToGround}},classificationType:{get:function(){return this._classificationType},set:function(e){this._classificationType=e,this._update=!0}},allowPicking:{get:function(){return this._allowPicking}}});Kd.prototype.update=function(e){if(!this.show)return;let t=this._positions;if(t.length<3){this._primitive=this._primitive&&this._primitive.destroy();return}this._update&&(this._update=!1,this._primitive=this._primitive&&this._primitive.destroy(),this._primitive=this._clampToGround?this._createGroundPolygon():this._createPolygon(),this._boundingSphere=le.fromPoints(t,this._boundingSphere)),this._primitive.update(e)};Kd.prototype._createPolygon=function(){return new cn({geometryInstances:new tn({geometry:Vm.fromPositions({positions:this._positions.map(function(e){return f.clone(e)}),vertexFormat:Tn.FLAT_VERTEX_FORMAT,ellipsoid:this._ellipsoid}),attributes:{color:In.fromColor(this._color),depthFailColor:In.fromColor(this._depthFailColor)},id:this._id}),appearance:iD(this._color),depthFailAppearance:iD(this._color),allowPicking:this._allowPicking,asynchronous:!1})};Kd.prototype._createGroundPolygon=function(){return new nd({geometryInstances:new tn({geometry:Lg.fromPositions({positions:this._positions.map(function(e){return f.clone(e)}),vertexFormat:Tn.FLAT_VERTEX_FORMAT,ellipsoid:this._ellipsoid}),attributes:{color:In.fromColor(this._color)},id:this._id}),appearance:iD(this._color),allowPicking:this._allowPicking,asynchronous:!1,classificationType:this._classificationType})};Kd.prototype.isDestroyed=function(){return!1};Kd.prototype.destroy=function(){return this._primitive=this._primitive&&this._primitive.destroy(),me(this)};var cb=Kd;var SBe=new L,uj=new f,wBe=10;function YA(e){e=e??G.EMPTY_OBJECT;let t=e.scene,n=e.primitives??t.primitives,i=!1,o=e.points;c(o)||(o=n.add(new ou),i=!0),this._polygon=n.add(new cb(e.polygonOptions)),this._polyline=n.add(new zr(dt({loop:!0},e.polylineOptions))),this._pointOptions=e.pointOptions,this._pointCollection=o,this._removePoints=i,this._scene=t,this._primitives=n,this._positions=[],this._points=[],this._tempNextPos=new f,this._mode=Ii.BeforeDraw,this._lastClickPosition=new L(Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY)}YA.prototype.addPoint=function(e){let t=this._positions;t.push(e),this._polyline.positions=t,this._polygon.positions=t;let n=this._pointCollection.add(this._pointOptions);n.position=e,n.show=!0,this._points.push(n)};YA.prototype.handleDoubleClick=function(){this._mode=Ii.AfterDraw;let e=this._positions;this._polyline.positions=e,this._polygon.positions=e};YA.prototype.handleClick=function(e){if(this._mode===Ii.AfterDraw)return;let t=this._lastClickPosition;if(L.magnitude(L.subtract(t,e,SBe))<wBe)return;let i=YA._getWorldPosition(this._scene,e,po,uj);if(c(i))return this.addPoint(f.clone(i,new f)),this._mode=Ii.Drawing,L.clone(e,t),i};YA.prototype.handleMouseMove=function(e){if(this._mode!==Ii.Drawing)return;let t=this._scene,n=YA._getWorldPosition(t,e,po,uj);if(!c(n))return;let i=this._positions.slice();return i.push(f.clone(n,this._tempNextPos)),this._polyline.positions=i,this._polygon.positions=i,n};YA.prototype.isDestroyed=function(){return!1};YA.prototype.destroy=function(){let e=this._primitives;if(this._removePoints)e.remove(this._points);else{let t=this._points,n=this._pointCollection;for(let i=0;i<t.length;i++)n.remove(t[i])}return e.remove(this._polygon),e.remove(this._polyline),me(this)};YA._getWorldPosition=ca;var lu=YA;var DBe={DEGREES:"DEGREES",RADIANS:"RADIANS",DEGREES_MINUTES_SECONDS:"DEGREES_MINUTES_SECONDS",GRADE:"GRADE",RATIO:"RATIO"},Gi=Object.freeze(DBe);function aA(e){e=e??G.EMPTY_OBJECT,this._labelCollection=e.labels,this._pointCollection=e.points,this._primitives=e.primitives,this._selectedUnits=e.units,this._selectedLocale=e.locale,this._scene=e.scene}Object.defineProperties(aA.prototype,{icon:{value:""},thumbnail:{value:""},type:{value:""},instructions:{value:[]},id:{value:""},selectedUnits:{get:function(){return this._selectedUnits},set:function(e){this._selectedUnits=e,this._refreshLabels()}}});aA.prototype._refreshLabels=be.throwInstantiationError;aA.prototype.handleDoubleClick=function(){};aA.prototype.handleClick=function(e){};aA.prototype.handleMouseMove=function(e){};aA.prototype.handleLeftDown=function(e){};aA.prototype.handleLeftUp=function(e){};aA.prototype.reset=be.throwInstantiationError;aA.prototype.isDestroyed=function(){return!1};aA.prototype.destroy=be.throwInstantiationError;var go=aA;var QBe=new L(0,-9),fr={};fr.color=J.YELLOW;fr.labelFont="16px Lucida Console";fr.textColor=J.WHITE;fr.backgroundColor=new J(.165,.165,.165,.8);fr.backgroundPadding=new L(7,5);fr.getPolylineOptions=function(e){return e=e??G.EMPTY_OBJECT,{show:e.show,ellipsoid:e.ellipsoid,width:e.width??3,color:e.color??fr.color,depthFailColor:e.depthFailColor??e.color??fr.color,id:e.id,positions:e.positions,materialType:e.materialType,depthFailMaterialType:e.depthFailMaterialType,loop:e.loop,clampToGround:e.clampToGround,classificationType:e.classificationType,allowPicking:e.allowPicking??!1}};fr.getPolygonOptions=function(e){return e=e??G.EMPTY_OBJECT,{show:e.show,ellipsoid:e.ellipsoid,color:e.color??fr.color,depthFailColor:e.depthFailColor??e.color??fr.color,id:e.id,positions:e.positions,clampToGround:e.clampToGround,classificationType:e.classificationType,allowPicking:e.allowPicking??!1}};fr.getPointOptions=function(){return{pixelSize:10,color:fr.color,position:new f,disableDepthTestDistance:Number.POSITIVE_INFINITY,show:!1}};fr.getLabelOptions=function(e){return e=e??G.EMPTY_OBJECT,{show:!1,font:fr.labelFont,scale:e.scale??1,fillColor:e.fillColor??fr.textColor,showBackground:!0,backgroundColor:e.backgroundColor??fr.backgroundColor,backgroundPadding:e.backgroundPadding??fr.backgroundPadding,horizontalOrigin:e.horizontalOrigin??Zt.CENTER,verticalOrigin:e.verticalOrigin??qt.BOTTOM,pixelOffset:c(e.pixelOffset)?e.pixelOffset:L.clone(QBe),disableDepthTestDistance:Number.POSITIVE_INFINITY,position:new f}};var _n=fr;var RBe={METERS:"METERS",CENTIMETERS:"CENTIMETERS",KILOMETERS:"KILOMETERS",FEET:"FEET",US_SURVEY_FEET:"US_SURVEY_FEET",INCHES:"INCHES",YARDS:"YARDS",MILES:"MILES"},Uo=Object.freeze(RBe);var vBe={SQUARE_METERS:"SQUARE_METERS",SQUARE_CENTIMETERS:"SQUARE_CENTIMETERS",SQUARE_KILOMETERS:"SQUARE_KILOMETERS",SQUARE_FEET:"SQUARE_FEET",SQUARE_INCHES:"SQUARE_INCHES",SQUARE_YARDS:"SQUARE_YARDS",SQUARE_MILES:"SQUARE_MILES",ACRES:"ACRES",HECTARES:"HECTARES"},Co=Object.freeze(vBe);var MBe={CUBIC_METERS:"CUBIC_METERS",CUBIC_CENTIMETERS:"CUBIC_CENTIMETERS",CUBIC_KILOMETERS:"CUBIC_KILOMETERS",CUBIC_FEET:"CUBIC_FEET",CUBIC_INCHES:"CUBIC_INCHES",CUBIC_YARDS:"CUBIC_YARDS",CUBIC_MILES:"CUBIC_MILES"},dr=Object.freeze(MBe);function Hn(e){e=e??G.EMPTY_OBJECT,this.distanceUnits=e.distanceUnits??Uo.METERS,this.areaUnits=e.areaUnits??Co.SQUARE_METERS,this.volumeUnits=e.volumeUnits??dr.CUBIC_METERS,this.angleUnits=e.angleUnits??Gi.DEGREES,this.slopeUnits=e.slopeUnits??Gi.DEGREES}Hn.convertDistance=function(e,t,n){if(t===n)return e;let i=fj(t),o=1/fj(n);return e*i*o};Hn.convertArea=function(e,t,n){if(t===n)return e;let i=dj(t),o=1/dj(n);return e*i*o};Hn.convertVolume=function(e,t,n){if(t===n)return e;let i=hj(t),o=1/hj(n);return e*i*o};Hn.convertAngle=function(e,t,n){if(t===n)return e;let i=FBe(e,t);return oD(i,n)};Hn.numberToString=function(e,t,n){return Xd(e,t,n)};Hn.distanceToString=function(e,t,n,i){let o=Hn.convertDistance(e,Uo.METERS,t);return Xd(o,n,i)+Hn.getDistanceUnitSpacing(t)+Hn.getDistanceUnitSymbol(t)};Hn.areaToString=function(e,t,n,i){let o=Hn.convertArea(e,Co.SQUARE_METERS,t);return Xd(o,n,i)+Hn.getAreaUnitSpacing(t)+Hn.getAreaUnitSymbol(t)};Hn.volumeToString=function(e,t,n,i){let o=Hn.convertVolume(e,dr.CUBIC_METERS,t);return Xd(o,n,i)+Hn.getVolumeUnitSpacing(t)+Hn.getVolumeUnitSymbol(t)};Hn.angleToString=function(e,t,n,i){if(t===Gi.DEGREES||t===Gi.RADIANS||t===Gi.GRADE){let o=oD(e,t);return Xd(o,n,i)+Hn.getAngleUnitSpacing(t)+Hn.getAngleUnitSymbol(t)}else if(t===Gi.DEGREES_MINUTES_SECONDS){let o=S.toDegrees(e),r=o<0?"-":"";o=Math.abs(o);let a=Math.floor(o),s=(o-a)*60,A=Math.floor(s),l=(s-A)*60;return l=Xd(l,void 0,i),`${r+a}\xB0 ${A}' ${l}"`}else if(t===Gi.RATIO){let r=1/oD(e,t),a=mj(i);return a.minimumFractionDigits=0,`1:${Xd(r,n,a)}`}};Hn.longitudeToString=function(e,t,n,i){return`${Hn.angleToString(Math.abs(e),t,n,i)} ${e<0?"W":"E"}`};Hn.latitudeToString=function(e,t,n,i){return`${Hn.angleToString(Math.abs(e),t,n,i)} ${e<0?"S":"N"}`};Hn.getDistanceUnitSymbol=function(e){if(e===Uo.METERS)return"m";if(e===Uo.CENTIMETERS)return"cm";if(e===Uo.KILOMETERS)return"km";if(e===Uo.FEET||e===Uo.US_SURVEY_FEET)return"ft";if(e===Uo.INCHES)return"in";if(e===Uo.YARDS)return"yd";if(e===Uo.MILES)return"mi"};Hn.getDistanceUnitSpacing=function(e){return" "};Hn.getAreaUnitSymbol=function(e){if(e===Co.SQUARE_METERS)return"m\xB2";if(e===Co.SQUARE_CENTIMETERS)return"cm\xB2";if(e===Co.SQUARE_KILOMETERS)return"km\xB2";if(e===Co.SQUARE_FEET)return"sq ft";if(e===Co.SQUARE_INCHES)return"sq in";if(e===Co.SQUARE_YARDS)return"sq yd";if(e===Co.SQUARE_MILES)return"sq mi";if(e===Co.ACRES)return"ac";if(e===Co.HECTARES)return"ha"};Hn.getAreaUnitSpacing=function(e){return" "};Hn.getVolumeUnitSymbol=function(e){if(e===dr.CUBIC_METERS)return"m\xB3";if(e===dr.CUBIC_CENTIMETERS)return"cm\xB3";if(e===dr.CUBIC_KILOMETERS)return"km\xB3";if(e===dr.CUBIC_FEET)return"cu ft";if(e===dr.CUBIC_INCHES)return"cu in";if(e===dr.CUBIC_YARDS)return"cu yd";if(e===dr.CUBIC_MILES)return"cu mi"};Hn.getVolumeUnitSpacing=function(e){return" "};Hn.getAngleUnitSymbol=function(e){if(e===Gi.DEGREES)return"\xB0";if(e===Gi.RADIANS)return"rad";if(e===Gi.GRADE)return"%"};Hn.getAngleUnitSpacing=function(e){return e===Gi.RADIANS?" ":""};function mj(e,t,n){e=e??2;let i={};return typeof e=="number"?i.maximumFractionDigits=i.minimumFractionDigits=e:typeof e=="function"?i=e(t,n):i=e,i}var PBe=-0,NBe=0;function Xd(e,t,n){let i=mj(n,e,t),o=e.toLocaleString(t,i),r=PBe.toLocaleString(t,i);return o===r?NBe.toLocaleString(t,i):o}function fj(e){if(e===Uo.METERS)return 1;if(e===Uo.CENTIMETERS)return .01;if(e===Uo.KILOMETERS)return 1e3;if(e===Uo.FEET)return .3048;if(e===Uo.US_SURVEY_FEET)return 1200/3937;if(e===Uo.INCHES)return .0254;if(e===Uo.YARDS)return .9144;if(e===Uo.MILES)return 1609.344}function dj(e){if(e===Co.SQUARE_METERS)return 1;if(e===Co.SQUARE_CENTIMETERS)return 1e-4;if(e===Co.SQUARE_KILOMETERS)return 1e6;if(e===Co.SQUARE_FEET)return .3048*.3048;if(e===Co.SQUARE_INCHES)return .0254*.0254;if(e===Co.SQUARE_YARDS)return .9144*.9144;if(e===Co.SQUARE_MILES)return 1609.344*1609.344;if(e===Co.ACRES)return 4046.85642232;if(e===Co.HECTARES)return 1e4}function hj(e){if(e===dr.CUBIC_METERS)return 1;if(e===dr.CUBIC_CENTIMETERS)return 1e-6;if(e===dr.CUBIC_KILOMETERS)return 1e9;if(e===dr.CUBIC_FEET)return .3048*.3048*.3048;if(e===dr.CUBIC_INCHES)return .0254*.0254*.0254;if(e===dr.CUBIC_YARDS)return .9144*.9144*.9144;if(e===dr.CUBIC_MILES)return 1609.344*1609.344*1609.344}var LBe=/(-?)(\d+)\s*°\s*(\d+)\s*'\s*([\d.,]+)"\s*([WENS]?)/i;function FBe(e,t){if(t===Gi.RADIANS)return e;if(t===Gi.DEGREES)return S.toRadians(e);if(t===Gi.GRADE)return e===Number.POSITIVE_INFINITY?S.PI_OVER_TWO:Math.atan(e/100);if(t===Gi.RATIO)return Math.atan(e);if(t===Gi.DEGREES_MINUTES_SECONDS){let n=LBe.exec(e);if(!c(n))throw new ae(`Could not convert angle to radians: ${e}`);let i=n[1].length>0?-1:1,o=parseInt(n[2]),r=parseInt(n[3]),a=parseFloat(n[4]),s=n[5];s.length===1&&(s=s.toUpperCase(),(s==="W"||s==="S")&&(i*=-1));let A=i*(o+r/60+a/3600);return S.toRadians(A)}}function oD(e,t){if(t===Gi.RADIANS)return e;if(t===Gi.DEGREES)return S.toDegrees(e);if(t===Gi.GRADE)return e=S.clamp(Math.abs(e),0,S.PI_OVER_TWO),e===S.PI_OVER_TWO?Number.POSITIVE_INFINITY:100*Math.tan(e);if(t===Gi.RATIO){let n=Math.sin(e),i=Math.cos(e);return n/i}}var Jn=Hn;var OBe=new L,kBe=new L,UBe=new f,zBe=new f,GBe=new f,HBe=new f,VBe=new f;function jBe(e,t,n){let i=f.subtract(e,t,HBe),o=f.subtract(n,t,VBe),r=f.cross(i,o,i);return f.magnitude(r)*.5}function Ps(e){e=e??G.EMPTY_OBJECT,e.polylineOptions=_n.getPolylineOptions({ellipsoid:e.ellipsoid}),e.pointOptions=_n.getPointOptions(),e.polygonOptions={color:_n.color.withAlpha(.8)},lu.call(this,e);let t=e.labels;this._labelCollection=t,this._label=t.add(_n.getLabelOptions()),this._selectedUnits=e.units,this._selectedLocale=e.locale,this._area=0;let n=this;this._removeEvent=this._scene.preRender.addEventListener(function(){n.updateLabel()})}Ps.prototype=Object.create(lu.prototype);Ps.prototype.constructor=Ps;Object.defineProperties(Ps.prototype,{area:{get:function(){return this._area}}});Ps.prototype.updateArea=function(e){let t=Vm.createGeometry(Vm.fromPositions({positions:e,vertexFormat:Bt.POSITION_ONLY}));if(!c(t)){this._label.text="";return}let n=t.attributes.position.values,i=t.indices,o=0;for(let r=0;r<i.length;r+=3){let a=i[r],s=i[r+1],A=i[r+2],l=f.unpack(n,a*3,UBe),d=f.unpack(n,s*3,zBe),m=f.unpack(n,A*3,GBe);o+=jBe(l,d,m)}this._area=o,this._refreshLabels()};Ps.prototype._refreshLabels=function(){let e=this._label;e.text=Jn.areaToString(this._area,this._selectedUnits.areaUnits,this._selectedLocale)};Ps.prototype.updateLabel=function(){let e=this._positions;if(e.length<2)return;let t=this._scene,n=e[0],i=Fn.worldToWindowCoordinates(t,n,OBe),o=c(i)?i.y:Number.POSITIVE_INFINITY;for(let r=1;r<e.length;r++){let a=Fn.worldToWindowCoordinates(t,e[r],kBe);c(a)&&a.y<o&&(o=a.y,n=e[r])}this._label.position=n};Ps.prototype.addPoint=function(e){lu.prototype.addPoint.call(this,e),this.updateArea(this._positions)};Ps.prototype.handleClick=function(e){this._mode===Ii.AfterDraw&&this.reset();let t=lu.prototype.handleClick.call(this,e);c(t)&&(this._label.show=!0,this._polygon.show=!0,this._polyline.show=!0)};Ps.prototype.handleMouseMove=function(e){let t=lu.prototype.handleMouseMove.call(this,e);if(!c(t))return;let n=this._positions.slice();n.push(t),this.updateArea(n)};Ps.prototype.reset=function(){this._label.show=!1,this._label.text="",this._positions=[],this._polyline.positions=[],this._polygon.positions=[],this._polyline.show=!1,this._polygon.show=!1,this._area=0;let e=this._points,t=this._pointCollection;for(let n=0;n<e.length;n++)t.remove(e[n]);e.length=0,this._mode=Ii.BeforeDraw,this._lastClickPosition.x=Number.POSITIVE_INFINITY,this._lastClickPosition.y=Number.POSITIVE_INFINITY};Ps.prototype.destroy=function(){this._removeEvent(),this._labelCollection.remove(this._label),lu.prototype.destroy.call(this)};var Ab=Ps;function pj(e){return`<svg viewBox="0 0 30 30" height="${e}px" width="${e}px">
                 <g transform="translate(0,-267)">
                   <circle r="2.0788691" cy="293.99896" cx="3.8532958"/>
                   <circle r="2.0788691" cy="282.76791" cx="26.927404"/>
                   <circle r="2.0788691" cy="270.20621" cx="4.0090437"/>
                   <path d="m 26.326048,283.77014 -9.394396,5.02295 -9.3943948,5.02295 0.3471933,-10.64726 0.3471933,-10.64726 9.0472022,5.62431 z" transform="matrix(1.1625734,0,0,0.99297729,-4.6787891,1.2180486)"/>
                 </g>
               </svg>`}function Ic(e){e=e??G.EMPTY_OBJECT,go.call(this,e),this._drawing=new Ab(e)}Ic.prototype=Object.create(go.prototype);Ic.prototype.constructor=Ic;Object.defineProperties(Ic.prototype,{area:{get:function(){return this._drawing.area}},icon:{value:pj(15)},thumbnail:{value:pj(25)},type:{value:"Area"},instructions:{value:["Click to start drawing a polygon","Keep clicking to add more points","Double click to finish drawing"]},id:{value:"areaMeasurement"}});Ic.prototype._refreshLabels=function(){this._drawing._refreshLabels()};Ic.prototype.handleDoubleClick=function(){this._drawing.handleDoubleClick()};Ic.prototype.handleClick=function(e){this._drawing.handleClick(e)};Ic.prototype.handleMouseMove=function(e){this._drawing.handleMouseMove(e)};Ic.prototype.reset=function(){this._drawing.reset()};Ic.prototype.isDestroyed=function(){return!1};Ic.prototype.destroy=function(){return this._drawing.destroy(),me(this)};var lb=Ic;var qA={BeforeDraw:0,Drawing:1,AfterDraw:2},YBe=new L,WBe=new L,gj=new ue,WA=new f,Cj=new f,qBe=new f;function Ej(e){return`<svg viewBox="0 0 30 30" height="${e}px" width="${e}px">
                 <g transform="translate(0,-267)">
                  <path d="m 4.934989,292.6549 20.67981,-20.80395"/>
                   <circle r="2.0788691" cy="270.1637" cx="27.025297"/>
                   <circle r="2.0788691" cy="294.07068" cx="3.1183045"/>
                 </g>
               </svg>
`}function _j(e){return`<svg viewBox="0 0 30 30" height="${e}px" width="${e}px">
                 <g transform="translate(0,-267)">
                   <path d="m 4.934989,292.6549 20.67981,-20.80395" />
                   <circle r="2.0788691" cy="270.1637" cx="27.025297" />
                   <circle r="2.0788691" cy="294.07068" cx="3.1183045" />
                   <path style="stroke-dasharray:2.00314951, 1.00157475;stroke-dashoffset:0;" d="m 3.3194019,292.73274 -0.046996,-22.53109 21.6420984,-0.0266" />
                 </g>
               </svg>
`}function wr(e){e=e??G.EMPTY_OBJECT,go.call(this,e);let t=this,n=this._pointCollection,i=this._labelCollection,o=this._primitives,r=this._scene,a=[new f,new f],s=[new f,new f,new f],A=[new f,new f,new f],l=new L(-9,0),d=new L(9,0),m=r.frameState.mapProjection.ellipsoid;this._startPoint=n.add(_n.getPointOptions()),this._endPoint=n.add(_n.getPointOptions()),this._positions=a,this._polyline=o.add(new zr(_n.getPolylineOptions({ellipsoid:m,width:3,show:!1,positions:a}))),this._xyPolylinePositions=s,this._xyPolyline=o.add(new zr(_n.getPolylineOptions({ellipsoid:m,width:2,positions:s,materialType:Ci.PolylineDashType}))),this._xyBoxPositions=A,this._xyBox=o.add(new zr(_n.getPolylineOptions({ellipsoid:m,width:1,positions:A}))),this._label=i.add(_n.getLabelOptions({horizontalOrigin:Zt.LEFT,verticalOrigin:qt.TOP,pixelOffset:new L(10,10)})),this._xPixelOffset=d,this._xLabel=i.add(_n.getLabelOptions()),this._xAngleLabel=i.add(_n.getLabelOptions({horizontalOrigin:Zt.LEFT,verticalOrigin:qt.MIDDLE,pixelOffset:d})),this._yPixelOffset=l,this._yLabel=i.add(_n.getLabelOptions({horizontalOrigin:Zt.RIGHT,pixelOffset:l})),this._yAngleLabel=i.add(_n.getLabelOptions({verticalOrigin:qt.TOP,pixelOffset:new L(0,9)})),this._distance=0,this._xDistance=0,this._yDistance=0,this._xAngle=0,this._yAngle=0,this._mode=qA.BeforeDraw,this._showComponentLines=e.showComponentLines??!1,this._removeEvent=r.preRender.addEventListener(function(){t._updateLabelPosition()})}wr.prototype=Object.create(go.prototype);wr.prototype.constructor=wr;Object.defineProperties(wr.prototype,{distance:{get:function(){return this._distance}},horizontalDistance:{get:function(){return this._xDistance}},verticalDistance:{get:function(){return this._yDistance}},angleFromHorizontal:{get:function(){return this._xAngle}},angleFromVertical:{get:function(){return this._yAngle}},icon:{get:function(){return this._showComponentLines?_j(15):Ej(15)}},thumbnail:{get:function(){return this._showComponentLines?_j(25):Ej(25)}},type:{get:function(){return this._showComponentLines?"Component Distance":"Distance"}},instructions:{value:["Click on the point cloud or the globe to set the start point and end points","To make a new measurement, click to clear the previous measurement"]},id:{get:function(){return this._showComponentLines?"componentDistanceMeasurement":"distanceMeasurement"}},showComponentLines:{get:function(){return this._showComponentLines},set:function(e){this._showComponentLines=e,this._mode!==qA.BeforeDraw&&this._updateComponents()}}});wr.prototype._refreshLabels=function(){this._refreshDistanceText(),this._refreshComponentsText()};wr.prototype._refreshDistanceText=function(){let e=this._label,t=this._distance;e.text=Jn.distanceToString(t,this._selectedUnits.distanceUnits,this._selectedLocale)};wr.prototype._refreshComponentsText=function(){let e=this._xLabel,t=this._yLabel,n=this._xAngleLabel,i=this._yAngleLabel,o=this._xDistance,r=this._yDistance,a=this._xAngle,s=this._yAngle,A=this._selectedUnits,l=this._selectedLocale;e.text=Jn.distanceToString(o,A.distanceUnits,l),t.text=Jn.distanceToString(r,A.distanceUnits,l),n.text=Jn.angleToString(a,A.slopeUnits,l),i.text=Jn.angleToString(s,A.slopeUnits,l)};wr.prototype._updateComponents=function(){let e=this._showComponentLines,t=this._xLabel,n=this._yLabel,i=this._xAngleLabel,o=this._yAngleLabel,r=this._xyPolyline,a=this._xyBox;if(t.show=!1,n.show=!1,i.show=!1,o.show=!1,r.show=!1,a.show=!1,!e)return;let s=this._scene.frameState.mapProjection.ellipsoid,A=this._positions,l=A[0],d=A[1],m=s.cartesianToCartographic(l,gj).height,p=s.cartesianToCartographic(d,gj).height,g,h,C,_;m<p?(g=l,h=d,C=p,_=m):(g=d,h=l,C=m,_=p);let I=this._xyPolylinePositions;I[0]=f.clone(g,I[0]),I[2]=f.clone(h,I[2]);let b=s.geodeticSurfaceNormal(g,WA);b=f.multiplyByScalar(b,C-_,b);let x=f.add(g,b,I[1]);if(r.positions=I,f.equalsEpsilon(x,h,S.EPSILON10)||f.equalsEpsilon(x,g,S.EPSILON10))return;n.show=!0,t.show=!0,o.show=!0,i.show=!0,r.show=!0,a.show=!0;let T=f.subtract(h,x,WA),w=f.subtract(g,x,Cj),R=Math.min(f.magnitude(T),f.magnitude(w)),z=R>15?R*.15:R*.25;T=f.normalize(T,T),w=f.normalize(w,w),T=f.multiplyByScalar(T,z,T),w=f.multiplyByScalar(w,z,w);let M=this._xyBoxPositions;M[0]=f.add(x,T,M[0]),M[1]=f.add(M[0],w,M[1]),M[2]=f.add(x,w,M[2]),a.positions=M,t.position=f.midpoint(x,h,WA),n.position=f.midpoint(g,x,WA),i.position=f.clone(h,WA),o.position=f.clone(g,WA);let N=f.subtract(x,h,Cj),O=f.subtract(x,g,WA),u=f.subtract(h,g,qBe),E=f.angleBetween(O,u);u=f.negate(u,u);let y=f.angleBetween(N,u),B=f.magnitude(N),D=f.magnitude(O);this._xDistance=B,this._yDistance=D,this._xAngle=y,this._yAngle=E,this._refreshComponentsText()};wr.prototype._updateLabelPosition=function(){let e=this._positions;if(this._mode===qA.BeforeDraw)return;let t=this._scene,n=e[0],i=e[1],o=Fn.worldToWindowCoordinates(t,n,YBe),r=Fn.worldToWindowCoordinates(t,i,WBe);if(!c(o)||!c(r))return;let a=this._label,s=this._yLabel,A=this._xAngleLabel;(o.y-r.y)/(r.x-o.x)>0?(this._yPixelOffset.x=-9,this._xPixelOffset.x=12,s.pixelOffset=this._yPixelOffset,s.horizontalOrigin=Zt.RIGHT,A.pixelOffset=this._xPixelOffset,A.horizontalOrigin=Zt.LEFT,a.horizontalOrigin=Zt.LEFT):(this._yPixelOffset.x=9,this._xPixelOffset.x=-12,s.pixelOffset=this._yPixelOffset,s.horizontalOrigin=Zt.LEFT,A.pixelOffset=this._xPixelOffset,A.horizontalOrigin=Zt.RIGHT,a.horizontalOrigin=Zt.RIGHT)};wr.prototype.handleClick=function(e){let t=this._scene;this._mode===qA.AfterDraw&&this.reset();let n=this._mode,i=this._positions;if(n===qA.BeforeDraw){let o=wr._getWorldPosition(t,e,po,i[0]);if(!c(o))return;this._polyline.show=!0,i[0]=o.clone(i[0]),i[1]=o.clone(i[1]),this._startPoint.position=o,this._startPoint.show=!0,this._mode=qA.Drawing,this._polyline.positions=i}else n===qA.Drawing&&(this._endPoint.position=i[1],this._endPoint.show=!0,this._polyline.positions=i,this._mode=qA.AfterDraw)};wr.prototype.handleMouseMove=function(e){if(this._mode!==qA.Drawing)return;let t=this._scene,n=this._positions,i=wr._getWorldPosition(t,e,po,WA);if(!c(i))return;let o=n[0],r=f.clone(i,n[1]),a=f.subtract(r,o,WA);this._distance=f.magnitude(a),this._polyline.positions=n;let s=this._label;s.position=f.midpoint(o,r,WA),s.show=!0,this._refreshDistanceText(),this._updateComponents()};wr.prototype.reset=function(){this._polyline.show=!1,this._xyPolyline.show=!1,this._xyBox.show=!1,this._label.show=!1,this._xLabel.show=!1,this._yLabel.show=!1,this._xAngleLabel.show=!1,this._yAngleLabel.show=!1,this._startPoint.show=!1,this._endPoint.show=!1,this._mode=qA.BeforeDraw,this._distance=0,this._xDistance=0,this._yDistance=0,this._xAngle=0,this._yAngle=0};wr.prototype.isDestroyed=function(){return!1};wr.prototype.destroy=function(){this._removeEvent();let e=this._primitives;e.remove(this._polyline),e.remove(this._xyPolyline),e.remove(this._xyBox);let t=this._pointCollection;t.remove(this._startPoint),t.remove(this._endPoint);let n=this._labelCollection;return n.remove(this._label),n.remove(this._xLabel),n.remove(this._yLabel),n.remove(this._xAngleLabel),n.remove(this._yAngleLabel),me(this)};wr._getWorldPosition=ca;var qC=wr;var JBe=new f,KBe=new ue;function Ij(e){return`<svg viewBox="0 0 30 30" height="${e}px" width="${e}px">
             <g transform="translate(0,-267)">
               <path d="m 15.042838,272.34414 0.01712,19.60575"/>
               <circle r="2.0788691" cy="270.01154" cx="15.078616"/>
               <path d="m 0.64901081,296.20687 8.80039389,-6.01044 7.9375003,3.1183 12.347278,-3.34365"/>
             </g>
           </svg>`}function yc(e){e=e??G.EMPTY_OBJECT,go.call(this,e);let t=[new f,new f],n=this._pointCollection;this._startPoint=n.add(_n.getPointOptions()),this._endPoint=n.add(_n.getPointOptions()),this._polyline=this._primitives.add(new zr(_n.getPolylineOptions({ellipsoid:this._scene.frameState.mapProjection.ellipsoid,positions:t}))),this._label=this._labelCollection.add(_n.getLabelOptions({horizontalOrigin:Zt.LEFT,verticalOrigin:qt.TOP,pixelOffset:new L(10,10)})),this._positions=t,this._distance=0}yc.prototype=Object.create(go.prototype);yc.prototype.constructor=yc;Object.defineProperties(yc.prototype,{distance:{get:function(){return this._distance}},icon:{value:Ij(15)},thumbnail:{value:Ij(25)},type:{value:"Height from terrain"},instructions:{value:["Click on the point cloud to get a distance from that point to terrain"]},id:{value:"heightMeasurement"}});yc.prototype.handleClick=function(e){let t=this._scene;this.reset();let n=this._positions,i=yc._getWorldPosition(t,e,po,n[0]);if(!c(i))return;let o=t.globe,r=t.frameState.mapProjection.ellipsoid,a=r.cartesianToCartographic(i,KBe);c(o)?a.height=o.getHeight(a)??0:a.height=0;let s=r.cartographicToCartesian(a,n[1]),A=f.subtract(s,i,JBe),l=f.magnitude(A),d=this._label;d.position=i,d.show=!0,this._polyline.positions=n,this._polyline.show=!0,this._startPoint.position=i,this._startPoint.show=!0,this._endPoint.position=s,this._endPoint.show=!0,this._distance=l,this._refreshLabels()};yc.prototype._refreshLabels=function(){let e=this._label;e.text=Jn.distanceToString(this._distance,this._selectedUnits.distanceUnits,this._selectedLocale)};yc.prototype.reset=function(){this._polyline.show=!1,this._label.show=!1,this._startPoint.show=!1,this._endPoint.show=!1,this._distance=0};yc.prototype.isDestroyed=function(){return!1};yc.prototype.destroy=function(){this._primitives.remove(this._polyline);let e=this._pointCollection;return e.remove(this._startPoint),e.remove(this._endPoint),this._labelCollection.remove(this._label),me(this)};yc._getWorldPosition=ca;var ub=yc;var XBe=new f,ZBe=new L,$Be=new L,yj=new L,exe=new f;function bc(e){e=e??G.EMPTY_OBJECT,Au.call(this,e);let t=e.labels;this._labelCollection=t,this._label=t.add(_n.getLabelOptions({horizontalOrigin:Zt.LEFT,verticalOrigin:qt.BOTTOM,pixelOffset:new L(10,-10)})),this._segmentLabels=[],this._segmentDistances=[],this._selectedUnits=e.units,this._selectedLocale=e.locale,this._previousDistance=0,this._distance=0;let n=this;this._removeEvent=this._scene.preRender.addEventListener(function(){n.updateLabels()})}bc.prototype=Object.create(Au.prototype);bc.prototype.constructor=bc;Object.defineProperties(bc.prototype,{distance:{get:function(){return this._distance}}});bc.prototype.updateLabels=function(){let e=this._positions;if(e.length<2)return;let t=this._scene,n=e[0],i=Fn.worldToWindowCoordinates(t,n,ZBe),o=c(i)?L.clone(i,yj):L.fromElements(Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,yj),r=o.y,a=this._segmentLabels;a[0].show=this._polyline.positions.length>2;for(let s=1;s<e.length;s++){let A=Fn.worldToWindowCoordinates(t,e[s],$Be);if(!c(A))continue;let l=(o.y-A.y)/(A.x-o.x),d=a[s-1];l>0?d.horizontalOrigin=Zt.LEFT:d.horizontalOrigin=Zt.RIGHT,A.y<r&&(r=A.y,n=e[s]),o=L.clone(A,o)}this._mode===Ii.AfterDraw&&(this._label.position=n)};bc.prototype.addPoint=function(e){let t=this._positions;if(t.length>0){this._previousDistance=this._distance;let n=this._labelCollection.add(_n.getLabelOptions({scale:.8,horizontalOrigin:Zt.LEFT,verticalOrigin:qt.TOP,pixelOffset:new L(5,5)})),i=t[t.length-1];n.position=f.midpoint(i,e,new f),n.text=Jn.distanceToString(f.distance(i,e),this._selectedUnits.distanceUnits,this._selectedLocale),n.show=!0,this._segmentDistances.push(f.distance(i,e)),this._segmentLabels.push(n)}Au.prototype.addPoint.call(this,e)};bc.prototype.handleClick=function(e){this._mode===Ii.AfterDraw&&this.reset();let t=Au.prototype.handleClick.call(this,e);c(t)&&(this._label.show=!0,this._polyline.show=!0)};bc.prototype._refreshLabels=function(){let e=this._label;e.text=Jn.distanceToString(this._distance,this._selectedUnits.distanceUnits,this._selectedLocale);let t=this._segmentLabels;for(let n=0;n<t.length;n++)t[n].text=Jn.distanceToString(this._segmentDistances[n],this._selectedUnits.distanceUnits,this._selectedLocale)};bc.prototype.handleMouseMove=function(e,t){let n=Au.prototype.handleMouseMove.call(this,e,t);if(!c(n))return;let i=this._positions,o=i[i.length-1],r=f.subtract(n,o,exe),a=this._previousDistance+f.magnitude(r),s=this._label;s.position=f.midpoint(o,n,XBe),s.text=Jn.distanceToString(a,this._selectedUnits.distanceUnits,this._selectedLocale),s.show=!0,this._distance=a};bc.prototype.reset=function(){let e,t=this._primitives,n=this._dashedLines;for(e=0;e<n.length;e++)t.remove(n[e]);this._dashedLines=[],this._polyline.positions=[],this._polyline.show=!1,this._label.show=!1,this._label.text="",this._previousDistance=0,this._distance=0,this._positions=[];let i=this._points,o=this._pointCollection;for(e=0;e<i.length;e++)o.remove(i[e]);i.length=0;let r=this._labelCollection,a=this._segmentLabels,s=this._segmentDistances;for(e=0;e<a.length;e++)r.remove(a[e]);a.length=0,s.length=0,this._moveDashLine.show=!1,this._mode=Ii.BeforeDraw,this._lastClickPosition.x=Number.POSITIVE_INFINITY,this._lastClickPosition.y=Number.POSITIVE_INFINITY};bc.prototype.destroy=function(){this._removeEvent();let e,t=this._labelCollection,n=this._segmentLabels;for(e=0;e<n.length;e++)t.remove(n[e]);let i=this._primitives,o=this._dashedLines;for(e=0;e<o.length;e++)i.remove(o[e]);this._labelCollection.remove(this._label),Au.prototype.destroy.call(this)};var fb=bc;function bj(e){return`<svg viewBox="0 0 30 30" height="${e}px" width="${e}px">
                 <g transform="translate(0,-267)">
                   <path d="m 5.5492003,281.78808 18.9375757,0.0497"/>
                   <circle r="2.0788691" cy="281.63776" cx="3.0514872"/>
                   <circle r="2.0788691" cy="281.71384" cx="26.985731"/>
                 </g>
               </svg>`}function Bc(e){e=e??G.EMPTY_OBJECT,go.call(this,e),this._drawing=new fb(e)}Bc.prototype=Object.create(go.prototype);Bc.prototype.constructor=Bc;Object.defineProperties(Bc.prototype,{distance:{get:function(){return this._drawing.distance}},icon:{value:bj(15)},thumbnail:{value:bj(25)},type:{value:"Horizontal distance"},instructions:{value:["Click on the point cloud or the globe to set the start point","Move the mouse to drag the line","Press this shift key to clamp the direction of the line","Click again to set the end point","To make a new measurement, click to clear the previous measurement"]},id:{value:"horizontalMeasurement"}});Bc.prototype._refreshLabels=function(){this._drawing._refreshLabels()};Bc.prototype.handleDoubleClick=function(){this._drawing.handleDoubleClick()};Bc.prototype.handleClick=function(e){this._drawing.handleClick(e)};Bc.prototype.handleMouseMove=function(e,t){this._drawing.handleMouseMove(e,t)};Bc.prototype.reset=function(){this._drawing.reset()};Bc.prototype.isDestroyed=function(){return!1};Bc.prototype.destroy=function(){return this._drawing.destroy(),me(this)};var db=Bc;var JC;typeof ko<"u"&&(JC=ko);(function(){/*!
 * Knockout JavaScript library v3.5.1
 * (c) The Knockout.js team - http://knockoutjs.com/
 * License: MIT (http://www.opensource.org/licenses/mit-license.php)
 */(function(){(function(e){var t=this||(0,eval)("this"),n=t.document,i=t.navigator,o=t.jQuery,r=t.JSON;o||typeof jQuery>"u"||(o=jQuery),(function(a){a(t.ko={})})(function(a,s){function A(u,E){return u===null||typeof u in C?u===E:!1}function l(u,E){var y;return function(){y||(y=h.a.setTimeout(function(){y=e,u()},E))}}function d(u,E){var y;return function(){clearTimeout(y),y=h.a.setTimeout(u,E)}}function m(u,E){E&&E!=="change"?E==="beforeChange"?this.pc(u):this.gb(u,E):this.qc(u)}function p(u,E){E!==null&&E.s&&E.s()}function g(u,E){var y=this.qd,B=y[T];B.ra||(this.Qb&&this.mb[E]?(y.uc(E,u,this.mb[E]),this.mb[E]=null,--this.Qb):B.I[E]||y.uc(E,u,B.J?{da:u}:y.$c(u)),u.Ja&&u.gd())}var h=typeof a<"u"?a:{};h.b=function(u,E){for(var y=u.split("."),B=h,D=0;D<y.length-1;D++)B=B[y[D]];B[y[y.length-1]]=E},h.L=function(u,E,y){u[E]=y},h.version="3.5.1",h.b("version",h.version),h.options={deferUpdates:!1,useOnlyNativeEvents:!1,foreachHidesDestroyed:!1},h.a=(function(){function u(H,Z){for(var ee in H)D.call(H,ee)&&Z(ee,H[ee])}function E(H,Z){if(Z)for(var ee in Z)D.call(Z,ee)&&(H[ee]=Z[ee]);return H}function y(H,Z){return H.__proto__=Z,H}function B(H,Z,ee,Ae){var ge=H[Z].match(q)||[];h.a.D(ee.match(q),function(ce){h.a.Na(ge,ce,Ae)}),H[Z]=ge.join(" ")}var D=Object.prototype.hasOwnProperty,v={__proto__:[]}instanceof Array,F=typeof Symbol=="function",P={},U={};P[i&&/Firefox\/2/i.test(i.userAgent)?"KeyboardEvent":"UIEvents"]=["keyup","keydown","keypress"],P.MouseEvents="click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave".split(" "),u(P,function(H,Z){if(Z.length)for(var ee=0,Ae=Z.length;ee<Ae;ee++)U[Z[ee]]=H});var k={propertychange:!0},j=n&&(function(){for(var H=3,Z=n.createElement("div"),ee=Z.getElementsByTagName("i");Z.innerHTML="<!--[if gt IE "+ ++H+"]><i></i><![endif]-->",ee[0];);return 4<H?H:e})(),q=/\S+/g,$;return{Jc:["authenticity_token",/^__RequestVerificationToken(_.*)?$/],D:function(H,Z,ee){for(var Ae=0,ge=H.length;Ae<ge;Ae++)Z.call(ee,H[Ae],Ae,H)},A:typeof Array.prototype.indexOf=="function"?function(H,Z){return Array.prototype.indexOf.call(H,Z)}:function(H,Z){for(var ee=0,Ae=H.length;ee<Ae;ee++)if(H[ee]===Z)return ee;return-1},Lb:function(H,Z,ee){for(var Ae=0,ge=H.length;Ae<ge;Ae++)if(Z.call(ee,H[Ae],Ae,H))return H[Ae];return e},Pa:function(H,Z){var ee=h.a.A(H,Z);0<ee?H.splice(ee,1):ee===0&&H.shift()},wc:function(H){var Z=[];return H&&h.a.D(H,function(ee){0>h.a.A(Z,ee)&&Z.push(ee)}),Z},Mb:function(H,Z,ee){var Ae=[];if(H)for(var ge=0,ce=H.length;ge<ce;ge++)Ae.push(Z.call(ee,H[ge],ge));return Ae},jb:function(H,Z,ee){var Ae=[];if(H)for(var ge=0,ce=H.length;ge<ce;ge++)Z.call(ee,H[ge],ge)&&Ae.push(H[ge]);return Ae},Nb:function(H,Z){if(Z instanceof Array)H.push.apply(H,Z);else for(var ee=0,Ae=Z.length;ee<Ae;ee++)H.push(Z[ee]);return H},Na:function(H,Z,ee){var Ae=h.a.A(h.a.bc(H),Z);0>Ae?ee&&H.push(Z):ee||H.splice(Ae,1)},Ba:v,extend:E,setPrototypeOf:y,Ab:v?y:E,P:u,Ga:function(H,Z,ee){if(!H)return H;var Ae={},ge;for(ge in H)D.call(H,ge)&&(Ae[ge]=Z.call(ee,H[ge],ge,H));return Ae},Tb:function(H){for(;H.firstChild;)h.removeNode(H.firstChild)},Yb:function(H){H=h.a.la(H);for(var Z=(H[0]&&H[0].ownerDocument||n).createElement("div"),ee=0,Ae=H.length;ee<Ae;ee++)Z.appendChild(h.oa(H[ee]));return Z},Ca:function(H,Z){for(var ee=0,Ae=H.length,ge=[];ee<Ae;ee++){var ce=H[ee].cloneNode(!0);ge.push(Z?h.oa(ce):ce)}return ge},va:function(H,Z){if(h.a.Tb(H),Z)for(var ee=0,Ae=Z.length;ee<Ae;ee++)H.appendChild(Z[ee])},Xc:function(H,Z){var ee=H.nodeType?[H]:H;if(0<ee.length){for(var Ae=ee[0],ge=Ae.parentNode,ce=0,he=Z.length;ce<he;ce++)ge.insertBefore(Z[ce],Ae);for(ce=0,he=ee.length;ce<he;ce++)h.removeNode(ee[ce])}},Ua:function(H,Z){if(H.length){for(Z=Z.nodeType===8&&Z.parentNode||Z;H.length&&H[0].parentNode!==Z;)H.splice(0,1);for(;1<H.length&&H[H.length-1].parentNode!==Z;)H.length--;if(1<H.length){var ee=H[0],Ae=H[H.length-1];for(H.length=0;ee!==Ae;)H.push(ee),ee=ee.nextSibling;H.push(Ae)}}return H},Zc:function(H,Z){7>j?H.setAttribute("selected",Z):H.selected=Z},Db:function(H){return H===null||H===e?"":H.trim?H.trim():H.toString().replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")},Ud:function(H,Z){return H=H||"",Z.length>H.length?!1:H.substring(0,Z.length)===Z},vd:function(H,Z){if(H===Z)return!0;if(H.nodeType===11)return!1;if(Z.contains)return Z.contains(H.nodeType!==1?H.parentNode:H);if(Z.compareDocumentPosition)return(Z.compareDocumentPosition(H)&16)==16;for(;H&&H!=Z;)H=H.parentNode;return!!H},Sb:function(H){return h.a.vd(H,H.ownerDocument.documentElement)},kd:function(H){return!!h.a.Lb(H,h.a.Sb)},R:function(H){return H&&H.tagName&&H.tagName.toLowerCase()},Ac:function(H){return h.onError?function(){try{return H.apply(this,arguments)}catch(Z){throw h.onError&&h.onError(Z),Z}}:H},setTimeout:function(H,Z){return setTimeout(h.a.Ac(H),Z)},Gc:function(H){setTimeout(function(){throw h.onError&&h.onError(H),H},0)},B:function(H,Z,ee){var Ae=h.a.Ac(ee);if(ee=k[Z],h.options.useOnlyNativeEvents||ee||!o)if(ee||typeof H.addEventListener!="function")if(typeof H.attachEvent<"u"){var ge=function(he){Ae.call(H,he)},ce="on"+Z;H.attachEvent(ce,ge),h.a.K.za(H,function(){H.detachEvent(ce,ge)})}else throw Error("Browser doesn't support addEventListener or attachEvent");else H.addEventListener(Z,Ae,!1);else $||($=typeof o(H).on=="function"?"on":"bind"),o(H)[$](Z,Ae)},Fb:function(H,Z){if(!H||!H.nodeType)throw Error("element must be a DOM node when calling triggerEvent");var ee;if(h.a.R(H)==="input"&&H.type&&Z.toLowerCase()=="click"?(ee=H.type,ee=ee=="checkbox"||ee=="radio"):ee=!1,h.options.useOnlyNativeEvents||!o||ee)if(typeof n.createEvent=="function")if(typeof H.dispatchEvent=="function")ee=n.createEvent(U[Z]||"HTMLEvents"),ee.initEvent(Z,!0,!0,t,0,0,0,0,0,!1,!1,!1,!1,0,H),H.dispatchEvent(ee);else throw Error("The supplied element doesn't support dispatchEvent");else if(ee&&H.click)H.click();else if(typeof H.fireEvent<"u")H.fireEvent("on"+Z);else throw Error("Browser doesn't support triggering events");else o(H).trigger(Z)},f:function(H){return h.O(H)?H():H},bc:function(H){return h.O(H)?H.v():H},Eb:function(H,Z,ee){var Ae;Z&&(typeof H.classList=="object"?(Ae=H.classList[ee?"add":"remove"],h.a.D(Z.match(q),function(ge){Ae.call(H.classList,ge)})):typeof H.className.baseVal=="string"?B(H.className,"baseVal",Z,ee):B(H,"className",Z,ee))},Bb:function(H,Z){var ee=h.a.f(Z);(ee===null||ee===e)&&(ee="");var Ae=h.h.firstChild(H);!Ae||Ae.nodeType!=3||h.h.nextSibling(Ae)?h.h.va(H,[H.ownerDocument.createTextNode(ee)]):Ae.data=ee,h.a.Ad(H)},Yc:function(H,Z){if(H.name=Z,7>=j)try{var ee=H.name.replace(/[&<>'"]/g,function(Ae){return"&#"+Ae.charCodeAt(0)+";"});H.mergeAttributes(n.createElement("<input name='"+ee+"'/>"),!1)}catch{}},Ad:function(H){9<=j&&(H=H.nodeType==1?H:H.parentNode,H.style&&(H.style.zoom=H.style.zoom))},wd:function(H){if(j){var Z=H.style.width;H.style.width=0,H.style.width=Z}},Pd:function(H,Z){H=h.a.f(H),Z=h.a.f(Z);for(var ee=[],Ae=H;Ae<=Z;Ae++)ee.push(Ae);return ee},la:function(H){for(var Z=[],ee=0,Ae=H.length;ee<Ae;ee++)Z.push(H[ee]);return Z},Da:function(H){return F?Symbol(H):H},Zd:j===6,$d:j===7,W:j,Lc:function(H,Z){for(var ee=h.a.la(H.getElementsByTagName("input")).concat(h.a.la(H.getElementsByTagName("textarea"))),Ae=typeof Z=="string"?function(he){return he.name===Z}:function(he){return Z.test(he.name)},ge=[],ce=ee.length-1;0<=ce;ce--)Ae(ee[ce])&&ge.push(ee[ce]);return ge},Nd:function(H){return typeof H=="string"&&(H=h.a.Db(H))?r&&r.parse?r.parse(H):new Function("return "+H)():null},hc:function(H,Z,ee){if(!r||!r.stringify)throw Error("Cannot find JSON.stringify(). Some browsers (e.g., IE < 8) don't support it natively, but you can overcome this by adding a script reference to json2.js, downloadable from http://www.json.org/json2.js");return r.stringify(h.a.f(H),Z,ee)},Od:function(H,Z,ee){ee=ee||{};var Ae=ee.params||{},ge=ee.includeFields||this.Jc,ce=H;if(typeof H=="object"&&h.a.R(H)==="form")for(var ce=H.action,he=ge.length-1;0<=he;he--)for(var Ie=h.a.Lc(H,ge[he]),Ne=Ie.length-1;0<=Ne;Ne--)Ae[Ie[Ne].name]=Ie[Ne].value;Z=h.a.f(Z);var _e=n.createElement("form");_e.style.display="none",_e.action=ce,_e.method="post";for(var ve in Z)H=n.createElement("input"),H.type="hidden",H.name=ve,H.value=h.a.hc(h.a.f(Z[ve])),_e.appendChild(H);u(Ae,function(at,Tt){var st=n.createElement("input");st.type="hidden",st.name=at,st.value=Tt,_e.appendChild(st)}),n.body.appendChild(_e),ee.submitter?ee.submitter(_e):_e.submit(),setTimeout(function(){_e.parentNode.removeChild(_e)},0)}}})(),h.b("utils",h.a),h.b("utils.arrayForEach",h.a.D),h.b("utils.arrayFirst",h.a.Lb),h.b("utils.arrayFilter",h.a.jb),h.b("utils.arrayGetDistinctValues",h.a.wc),h.b("utils.arrayIndexOf",h.a.A),h.b("utils.arrayMap",h.a.Mb),h.b("utils.arrayPushAll",h.a.Nb),h.b("utils.arrayRemoveItem",h.a.Pa),h.b("utils.cloneNodes",h.a.Ca),h.b("utils.createSymbolOrString",h.a.Da),h.b("utils.extend",h.a.extend),h.b("utils.fieldsIncludedWithJsonPost",h.a.Jc),h.b("utils.getFormFields",h.a.Lc),h.b("utils.objectMap",h.a.Ga),h.b("utils.peekObservable",h.a.bc),h.b("utils.postJson",h.a.Od),h.b("utils.parseJson",h.a.Nd),h.b("utils.registerEventHandler",h.a.B),h.b("utils.stringifyJson",h.a.hc),h.b("utils.range",h.a.Pd),h.b("utils.toggleDomNodeCssClass",h.a.Eb),h.b("utils.triggerEvent",h.a.Fb),h.b("utils.unwrapObservable",h.a.f),h.b("utils.objectForEach",h.a.P),h.b("utils.addOrRemoveItem",h.a.Na),h.b("utils.setTextContent",h.a.Bb),h.b("unwrap",h.a.f),Function.prototype.bind||(Function.prototype.bind=function(u){var E=this;if(arguments.length===1)return function(){return E.apply(u,arguments)};var y=Array.prototype.slice.call(arguments,1);return function(){var B=y.slice(0);return B.push.apply(B,arguments),E.apply(u,B)}}),h.a.g=new function(){var u=0,E="__ko__"+new Date().getTime(),y={},B,D;return h.a.W?(B=function(v,F){var P=v[E];if(!P||P==="null"||!y[P]){if(!F)return e;P=v[E]="ko"+u++,y[P]={}}return y[P]},D=function(v){var F=v[E];return F?(delete y[F],v[E]=null,!0):!1}):(B=function(v,F){var P=v[E];return!P&&F&&(P=v[E]={}),P},D=function(v){return v[E]?(delete v[E],!0):!1}),{get:function(v,F){var P=B(v,!1);return P&&P[F]},set:function(v,F,P){(v=B(v,P!==e))&&(v[F]=P)},Ub:function(v,F,P){return v=B(v,!0),v[F]||(v[F]=P)},clear:D,Z:function(){return u+++E}}},h.b("utils.domData",h.a.g),h.b("utils.domData.clear",h.a.g.clear),h.a.K=new function(){function u(F,P){var U=h.a.g.get(F,B);return U===e&&P&&(U=[],h.a.g.set(F,B,U)),U}function E(F){var P=u(F,!1);if(P)for(var P=P.slice(0),U=0;U<P.length;U++)P[U](F);h.a.g.clear(F),h.a.K.cleanExternalData(F),v[F.nodeType]&&y(F.childNodes,!0)}function y(F,P){for(var U=[],k,j=0;j<F.length;j++)if((!P||F[j].nodeType===8)&&(E(U[U.length]=k=F[j]),F[j]!==k))for(;j--&&h.a.A(U,F[j])==-1;);}var B=h.a.g.Z(),D={1:!0,8:!0,9:!0},v={1:!0,9:!0};return{za:function(F,P){if(typeof P!="function")throw Error("Callback must be a function");u(F,!0).push(P)},yb:function(F,P){var U=u(F,!1);U&&(h.a.Pa(U,P),U.length==0&&h.a.g.set(F,B,e))},oa:function(F){return h.u.G(function(){D[F.nodeType]&&(E(F),v[F.nodeType]&&y(F.getElementsByTagName("*")))}),F},removeNode:function(F){h.oa(F),F.parentNode&&F.parentNode.removeChild(F)},cleanExternalData:function(F){o&&typeof o.cleanData=="function"&&o.cleanData([F])}}},h.oa=h.a.K.oa,h.removeNode=h.a.K.removeNode,h.b("cleanNode",h.oa),h.b("removeNode",h.removeNode),h.b("utils.domNodeDisposal",h.a.K),h.b("utils.domNodeDisposal.addDisposeCallback",h.a.K.za),h.b("utils.domNodeDisposal.removeDisposeCallback",h.a.K.yb),(function(){var u=[0,"",""],E=[1,"<table>","</table>"],y=[3,"<table><tbody><tr>","</tr></tbody></table>"],B=[1,"<select multiple='multiple'>","</select>"],D={thead:E,tbody:E,tfoot:E,tr:[2,"<table><tbody>","</tbody></table>"],td:y,th:y,option:B,optgroup:B},v=8>=h.a.W;h.a.ua=function(F,P){var U;if(o){if(o.parseHTML)U=o.parseHTML(F,P)||[];else if((U=o.clean([F],P))&&U[0]){for(var k=U[0];k.parentNode&&k.parentNode.nodeType!==11;)k=k.parentNode;k.parentNode&&k.parentNode.removeChild(k)}}else{(U=P)||(U=n);var k=U.parentWindow||U.defaultView||t,j=h.a.Db(F).toLowerCase(),q=U.createElement("div"),$;for($=(j=j.match(/^(?:\x3c!--.*?--\x3e\s*?)*?<([a-z]+)[\s>]/))&&D[j[1]]||u,j=$[0],$="ignored<div>"+$[1]+F+$[2]+"</div>",typeof k.innerShiv=="function"?q.appendChild(k.innerShiv($)):(v&&U.body.appendChild(q),q.innerHTML=$,v&&q.parentNode.removeChild(q));j--;)q=q.lastChild;U=h.a.la(q.lastChild.childNodes)}return U},h.a.Md=function(F,P){var U=h.a.ua(F,P);return U.length&&U[0].parentElement||h.a.Yb(U)},h.a.fc=function(F,P){if(h.a.Tb(F),P=h.a.f(P),P!==null&&P!==e)if(typeof P!="string"&&(P=P.toString()),o)o(F).html(P);else for(var U=h.a.ua(P,F.ownerDocument),k=0;k<U.length;k++)F.appendChild(U[k])}})(),h.b("utils.parseHtmlFragment",h.a.ua),h.b("utils.setHtml",h.a.fc),h.aa=(function(){function u(y,B){if(y){if(y.nodeType==8){var D=h.aa.Uc(y.nodeValue);D!=null&&B.push({ud:y,Kd:D})}else if(y.nodeType==1)for(var D=0,v=y.childNodes,F=v.length;D<F;D++)u(v[D],B)}}var E={};return{Xb:function(y){if(typeof y!="function")throw Error("You can only pass a function to ko.memoization.memoize()");var B=(4294967296*(1+Math.random())|0).toString(16).substring(1)+(4294967296*(1+Math.random())|0).toString(16).substring(1);return E[B]=y,"<!--[ko_memo:"+B+"]-->"},bd:function(y,B){var D=E[y];if(D===e)throw Error("Couldn't find any memo with ID "+y+". Perhaps it's already been unmemoized.");try{return D.apply(null,B||[]),!0}finally{delete E[y]}},cd:function(y,B){var D=[];u(y,D);for(var v=0,F=D.length;v<F;v++){var P=D[v].ud,U=[P];B&&h.a.Nb(U,B),h.aa.bd(D[v].Kd,U),P.nodeValue="",P.parentNode&&P.parentNode.removeChild(P)}},Uc:function(y){return(y=y.match(/^\[ko_memo\:(.*?)\]$/))?y[1]:null}}})(),h.b("memoization",h.aa),h.b("memoization.memoize",h.aa.Xb),h.b("memoization.unmemoize",h.aa.bd),h.b("memoization.parseMemoText",h.aa.Uc),h.b("memoization.unmemoizeDomNodeAndDescendants",h.aa.cd),h.na=(function(){function u(){if(D){for(var P=D,U=0,k;F<D;)if(k=B[F++]){if(F>P){if(5e3<=++U){F=D,h.a.Gc(Error("'Too much recursion' after processing "+U+" task groups."));break}P=D}try{k()}catch(j){h.a.Gc(j)}}}}function E(){u(),F=D=B.length=0}var y,B=[],D=0,v=1,F=0;return t.MutationObserver?y=(function(P){var U=n.createElement("div");return new MutationObserver(P).observe(U,{attributes:!0}),function(){U.classList.toggle("foo")}})(E):y=n&&"onreadystatechange"in n.createElement("script")?function(P){var U=n.createElement("script");U.onreadystatechange=function(){U.onreadystatechange=null,n.documentElement.removeChild(U),U=null,P()},n.documentElement.appendChild(U)}:function(P){setTimeout(P,0)},{scheduler:y,zb:function(P){return D||h.na.scheduler(E),B[D++]=P,v++},cancel:function(P){P=P-(v-D),P>=F&&P<D&&(B[P]=null)},resetForTesting:function(){var P=D-F;return F=D=B.length=0,P},Sd:u}})(),h.b("tasks",h.na),h.b("tasks.schedule",h.na.zb),h.b("tasks.runEarly",h.na.Sd),h.Ta={throttle:function(u,E){u.throttleEvaluation=E;var y=null;return h.$({read:u,write:function(B){clearTimeout(y),y=h.a.setTimeout(function(){u(B)},E)}})},rateLimit:function(u,E){var y,B,D;typeof E=="number"?y=E:(y=E.timeout,B=E.method),u.Hb=!1,D=typeof B=="function"?B:B=="notifyWhenChangesStop"?d:l,u.ub(function(v){return D(v,y,E)})},deferred:function(u,E){if(E!==!0)throw Error("The 'deferred' extender only accepts the value 'true', because it is not supported to turn deferral off once enabled.");u.Hb||(u.Hb=!0,u.ub(function(y){var B,D=!1;return function(){if(!D){h.na.cancel(B),B=h.na.zb(y);try{D=!0,u.notifySubscribers(e,"dirty")}finally{D=!1}}}}))},notify:function(u,E){u.equalityComparer=E=="always"?null:A}};var C={undefined:1,boolean:1,number:1,string:1};h.b("extenders",h.Ta),h.ic=function(u,E,y){this.da=u,this.lc=E,this.mc=y,this.Ib=!1,this.fb=this.Jb=null,h.L(this,"dispose",this.s),h.L(this,"disposeWhenNodeIsRemoved",this.l)},h.ic.prototype.s=function(){this.Ib||(this.fb&&h.a.K.yb(this.Jb,this.fb),this.Ib=!0,this.mc(),this.da=this.lc=this.mc=this.Jb=this.fb=null)},h.ic.prototype.l=function(u){this.Jb=u,h.a.K.za(u,this.fb=this.s.bind(this))},h.T=function(){h.a.Ab(this,_),_.qb(this)};var _={qb:function(u){u.U={change:[]},u.sc=1},subscribe:function(u,E,y){var B=this;y=y||"change";var D=new h.ic(B,E?u.bind(E):u,function(){h.a.Pa(B.U[y],D),B.hb&&B.hb(y)});return B.Qa&&B.Qa(y),B.U[y]||(B.U[y]=[]),B.U[y].push(D),D},notifySubscribers:function(u,E){if(E=E||"change",E==="change"&&this.Gb(),this.Wa(E)){var y=E==="change"&&this.ed||this.U[E].slice(0);try{h.u.xc();for(var B=0,D;D=y[B];++B)D.Ib||D.lc(u)}finally{h.u.end()}}},ob:function(){return this.sc},Dd:function(u){return this.ob()!==u},Gb:function(){++this.sc},ub:function(u){var E=this,y=h.O(E),B,D,v,F,P;E.gb||(E.gb=E.notifySubscribers,E.notifySubscribers=m);var U=u(function(){E.Ja=!1,y&&F===E&&(F=E.nc?E.nc():E());var k=D||P&&E.sb(v,F);P=D=B=!1,k&&E.gb(v=F)});E.qc=function(k,j){j&&E.Ja||(P=!j),E.ed=E.U.change.slice(0),E.Ja=B=!0,F=k,U()},E.pc=function(k){B||(v=k,E.gb(k,"beforeChange"))},E.rc=function(){P=!0},E.gd=function(){E.sb(v,E.v(!0))&&(D=!0)}},Wa:function(u){return this.U[u]&&this.U[u].length},Bd:function(u){if(u)return this.U[u]&&this.U[u].length||0;var E=0;return h.a.P(this.U,function(y,B){y!=="dirty"&&(E+=B.length)}),E},sb:function(u,E){return!this.equalityComparer||!this.equalityComparer(u,E)},toString:function(){return"[object Object]"},extend:function(u){var E=this;return u&&h.a.P(u,function(y,B){var D=h.Ta[y];typeof D=="function"&&(E=D(E,B)||E)}),E}};h.L(_,"init",_.qb),h.L(_,"subscribe",_.subscribe),h.L(_,"extend",_.extend),h.L(_,"getSubscriptionsCount",_.Bd),h.a.Ba&&h.a.setPrototypeOf(_,Function.prototype),h.T.fn=_,h.Qc=function(u){return u!=null&&typeof u.subscribe=="function"&&typeof u.notifySubscribers=="function"},h.b("subscribable",h.T),h.b("isSubscribable",h.Qc),h.S=h.u=(function(){function u(v){y.push(B),B=v}function E(){B=y.pop()}var y=[],B,D=0;return{xc:u,end:E,cc:function(v){if(B){if(!h.Qc(v))throw Error("Only subscribable things can act as dependencies");B.od.call(B.pd,v,v.fd||(v.fd=++D))}},G:function(v,F,P){try{return u(),v.apply(F,P||[])}finally{E()}},qa:function(){if(B)return B.o.qa()},Va:function(){if(B)return B.o.Va()},Ya:function(){if(B)return B.Ya},o:function(){if(B)return B.o}}})(),h.b("computedContext",h.S),h.b("computedContext.getDependenciesCount",h.S.qa),h.b("computedContext.getDependencies",h.S.Va),h.b("computedContext.isInitial",h.S.Ya),h.b("computedContext.registerDependency",h.S.cc),h.b("ignoreDependencies",h.Yd=h.u.G);var I=h.a.Da("_latestValue");h.ta=function(u){function E(){return 0<arguments.length?(E.sb(E[I],arguments[0])&&(E.ya(),E[I]=arguments[0],E.xa()),this):(h.u.cc(E),E[I])}return E[I]=u,h.a.Ba||h.a.extend(E,h.T.fn),h.T.fn.qb(E),h.a.Ab(E,b),h.options.deferUpdates&&h.Ta.deferred(E,!0),E};var b={equalityComparer:A,v:function(){return this[I]},xa:function(){this.notifySubscribers(this[I],"spectate"),this.notifySubscribers(this[I])},ya:function(){this.notifySubscribers(this[I],"beforeChange")}};h.a.Ba&&h.a.setPrototypeOf(b,h.T.fn);var x=h.ta.Ma="__ko_proto__";b[x]=h.ta,h.O=function(u){if((u=typeof u=="function"&&u[x])&&u!==b[x]&&u!==h.o.fn[x])throw Error("Invalid object that looks like an observable; possibly from another Knockout instance");return!!u},h.Za=function(u){return typeof u=="function"&&(u[x]===b[x]||u[x]===h.o.fn[x]&&u.Nc)},h.b("observable",h.ta),h.b("isObservable",h.O),h.b("isWriteableObservable",h.Za),h.b("isWritableObservable",h.Za),h.b("observable.fn",b),h.L(b,"peek",b.v),h.L(b,"valueHasMutated",b.xa),h.L(b,"valueWillMutate",b.ya),h.Ha=function(u){if(u=u||[],typeof u!="object"||!("length"in u))throw Error("The argument passed when initializing an observable array must be an array, or null, or undefined.");return u=h.ta(u),h.a.Ab(u,h.Ha.fn),u.extend({trackArrayChanges:!0})},h.Ha.fn={remove:function(u){for(var E=this.v(),y=[],B=typeof u!="function"||h.O(u)?function(F){return F===u}:u,D=0;D<E.length;D++){var v=E[D];if(B(v)){if(y.length===0&&this.ya(),E[D]!==v)throw Error("Array modified during remove; cannot remove item");y.push(v),E.splice(D,1),D--}}return y.length&&this.xa(),y},removeAll:function(u){if(u===e){var E=this.v(),y=E.slice(0);return this.ya(),E.splice(0,E.length),this.xa(),y}return u?this.remove(function(B){return 0<=h.a.A(u,B)}):[]},destroy:function(u){var E=this.v(),y=typeof u!="function"||h.O(u)?function(v){return v===u}:u;this.ya();for(var B=E.length-1;0<=B;B--){var D=E[B];y(D)&&(D._destroy=!0)}this.xa()},destroyAll:function(u){return u===e?this.destroy(function(){return!0}):u?this.destroy(function(E){return 0<=h.a.A(u,E)}):[]},indexOf:function(u){var E=this();return h.a.A(E,u)},replace:function(u,E){var y=this.indexOf(u);0<=y&&(this.ya(),this.v()[y]=E,this.xa())},sorted:function(u){var E=this().slice(0);return u?E.sort(u):E.sort()},reversed:function(){return this().slice(0).reverse()}},h.a.Ba&&h.a.setPrototypeOf(h.Ha.fn,h.ta.fn),h.a.D("pop push reverse shift sort splice unshift".split(" "),function(u){h.Ha.fn[u]=function(){var E=this.v();this.ya(),this.zc(E,u,arguments);var y=E[u].apply(E,arguments);return this.xa(),y===E?this:y}}),h.a.D(["slice"],function(u){h.Ha.fn[u]=function(){var E=this();return E[u].apply(E,arguments)}}),h.Pc=function(u){return h.O(u)&&typeof u.remove=="function"&&typeof u.push=="function"},h.b("observableArray",h.Ha),h.b("isObservableArray",h.Pc),h.Ta.trackArrayChanges=function(u,E){function y(){function q(){if(P){var $=[].concat(u.v()||[]),H;u.Wa("arrayChange")&&((!D||1<P)&&(D=h.a.Pb(U,$,u.Ob)),H=D),U=$,D=null,P=0,H&&H.length&&u.notifySubscribers(H,"arrayChange")}}B?q():(B=!0,F=u.subscribe(function(){++P},null,"spectate"),U=[].concat(u.v()||[]),D=null,v=u.subscribe(q))}if(u.Ob={},E&&typeof E=="object"&&h.a.extend(u.Ob,E),u.Ob.sparse=!0,!u.zc){var B=!1,D=null,v,F,P=0,U,k=u.Qa,j=u.hb;u.Qa=function(q){k&&k.call(u,q),q==="arrayChange"&&y()},u.hb=function(q){j&&j.call(u,q),q!=="arrayChange"||u.Wa("arrayChange")||(v&&v.s(),F&&F.s(),F=v=null,B=!1,U=e)},u.zc=function(q,$,H){function Z(_e,ve,at){return ee[ee.length]={status:_e,value:ve,index:at}}if(B&&!P){var ee=[],Ae=q.length,ge=H.length,ce=0;switch($){case"push":ce=Ae;case"unshift":for($=0;$<ge;$++)Z("added",H[$],ce+$);break;case"pop":ce=Ae-1;case"shift":Ae&&Z("deleted",q[ce],ce);break;case"splice":$=Math.min(Math.max(0,0>H[0]?Ae+H[0]:H[0]),Ae);for(var Ae=ge===1?Ae:Math.min($+(H[1]||0),Ae),ge=$+ge-2,ce=Math.max(Ae,ge),he=[],Ie=[],Ne=2;$<ce;++$,++Ne)$<Ae&&Ie.push(Z("deleted",q[$],$)),$<ge&&he.push(Z("added",H[Ne],$));h.a.Kc(Ie,he);break;default:return}D=ee}}}};var T=h.a.Da("_state");h.o=h.$=function(u,E,y){function B(){if(0<arguments.length){if(typeof D=="function")D.apply(v.nb,arguments);else throw Error("Cannot write a value to a ko.computed unless you specify a 'write' option. If you wish to read the current value, don't pass any parameters.");return this}return v.ra||h.u.cc(B),(v.ka||v.J&&B.Xa())&&B.ha(),v.X}if(typeof u=="object"?y=u:(y=y||{},u&&(y.read=u)),typeof y.read!="function")throw Error("Pass a function that returns the value of the ko.computed");var D=y.write,v={X:e,sa:!0,ka:!0,rb:!1,jc:!1,ra:!1,wb:!1,J:!1,Wc:y.read,nb:E||y.owner,l:y.disposeWhenNodeIsRemoved||y.l||null,Sa:y.disposeWhen||y.Sa,Rb:null,I:{},V:0,Ic:null};return B[T]=v,B.Nc=typeof D=="function",h.a.Ba||h.a.extend(B,h.T.fn),h.T.fn.qb(B),h.a.Ab(B,w),y.pure?(v.wb=!0,v.J=!0,h.a.extend(B,R)):y.deferEvaluation&&h.a.extend(B,z),h.options.deferUpdates&&h.Ta.deferred(B,!0),v.l&&(v.jc=!0,v.l.nodeType||(v.l=null)),v.J||y.deferEvaluation||B.ha(),v.l&&B.ja()&&h.a.K.za(v.l,v.Rb=function(){B.s()}),B};var w={equalityComparer:A,qa:function(){return this[T].V},Va:function(){var u=[];return h.a.P(this[T].I,function(E,y){u[y.Ka]=y.da}),u},Vb:function(u){if(!this[T].V)return!1;var E=this.Va();return h.a.A(E,u)!==-1?!0:!!h.a.Lb(E,function(y){return y.Vb&&y.Vb(u)})},uc:function(u,E,y){if(this[T].wb&&E===this)throw Error("A 'pure' computed must not be called recursively");this[T].I[u]=y,y.Ka=this[T].V++,y.La=E.ob()},Xa:function(){var u,E,y=this[T].I;for(u in y)if(Object.prototype.hasOwnProperty.call(y,u)&&(E=y[u],this.Ia&&E.da.Ja||E.da.Dd(E.La)))return!0},Jd:function(){this.Ia&&!this[T].rb&&this.Ia(!1)},ja:function(){var u=this[T];return u.ka||0<u.V},Rd:function(){this.Ja?this[T].ka&&(this[T].sa=!0):this.Hc()},$c:function(u){if(u.Hb){var E=u.subscribe(this.Jd,this,"dirty"),y=u.subscribe(this.Rd,this);return{da:u,s:function(){E.s(),y.s()}}}return u.subscribe(this.Hc,this)},Hc:function(){var u=this,E=u.throttleEvaluation;E&&0<=E?(clearTimeout(this[T].Ic),this[T].Ic=h.a.setTimeout(function(){u.ha(!0)},E)):u.Ia?u.Ia(!0):u.ha(!0)},ha:function(u){var E=this[T],y=E.Sa,B=!1;if(!E.rb&&!E.ra){if(E.l&&!h.a.Sb(E.l)||y&&y()){if(!E.jc){this.s();return}}else E.jc=!1;E.rb=!0;try{B=this.zd(u)}finally{E.rb=!1}return B}},zd:function(u){var E=this[T],B=!1,y=E.wb?e:!E.V,B={qd:this,mb:E.I,Qb:E.V};h.u.xc({pd:B,od:g,o:this,Ya:y}),E.I={},E.V=0;var D=this.yd(E,B);return E.V?B=this.sb(E.X,D):(this.s(),B=!0),B&&(E.J?this.Gb():this.notifySubscribers(E.X,"beforeChange"),E.X=D,this.notifySubscribers(E.X,"spectate"),!E.J&&u&&this.notifySubscribers(E.X),this.rc&&this.rc()),y&&this.notifySubscribers(E.X,"awake"),B},yd:function(u,E){try{var y=u.Wc;return u.nb?y.call(u.nb):y()}finally{h.u.end(),E.Qb&&!u.J&&h.a.P(E.mb,p),u.sa=u.ka=!1}},v:function(u){var E=this[T];return(E.ka&&(u||!E.V)||E.J&&this.Xa())&&this.ha(),E.X},ub:function(u){h.T.fn.ub.call(this,u),this.nc=function(){return this[T].J||(this[T].sa?this.ha():this[T].ka=!1),this[T].X},this.Ia=function(E){this.pc(this[T].X),this[T].ka=!0,E&&(this[T].sa=!0),this.qc(this,!E)}},s:function(){var u=this[T];!u.J&&u.I&&h.a.P(u.I,function(E,y){y.s&&y.s()}),u.l&&u.Rb&&h.a.K.yb(u.l,u.Rb),u.I=e,u.V=0,u.ra=!0,u.sa=!1,u.ka=!1,u.J=!1,u.l=e,u.Sa=e,u.Wc=e,this.Nc||(u.nb=e)}},R={Qa:function(u){var E=this,y=E[T];if(!y.ra&&y.J&&u=="change"){if(y.J=!1,y.sa||E.Xa())y.I=null,y.V=0,E.ha()&&E.Gb();else{var B=[];h.a.P(y.I,function(D,v){B[v.Ka]=D}),h.a.D(B,function(D,v){var F=y.I[D],P=E.$c(F.da);P.Ka=v,P.La=F.La,y.I[D]=P}),E.Xa()&&E.ha()&&E.Gb()}y.ra||E.notifySubscribers(y.X,"awake")}},hb:function(u){var E=this[T];E.ra||u!="change"||this.Wa("change")||(h.a.P(E.I,function(y,B){B.s&&(E.I[y]={da:B.da,Ka:B.Ka,La:B.La},B.s())}),E.J=!0,this.notifySubscribers(e,"asleep"))},ob:function(){var u=this[T];return u.J&&(u.sa||this.Xa())&&this.ha(),h.T.fn.ob.call(this)}},z={Qa:function(u){u!="change"&&u!="beforeChange"||this.v()}};h.a.Ba&&h.a.setPrototypeOf(w,h.T.fn);var M=h.ta.Ma;w[M]=h.o,h.Oc=function(u){return typeof u=="function"&&u[M]===w[M]},h.Fd=function(u){return h.Oc(u)&&u[T]&&u[T].wb},h.b("computed",h.o),h.b("dependentObservable",h.o),h.b("isComputed",h.Oc),h.b("isPureComputed",h.Fd),h.b("computed.fn",w),h.L(w,"peek",w.v),h.L(w,"dispose",w.s),h.L(w,"isActive",w.ja),h.L(w,"getDependenciesCount",w.qa),h.L(w,"getDependencies",w.Va),h.xb=function(u,E){return typeof u=="function"?h.o(u,E,{pure:!0}):(u=h.a.extend({},u),u.pure=!0,h.o(u,E))},h.b("pureComputed",h.xb),(function(){function u(B,D,v){if(v=v||new y,B=D(B),typeof B!="object"||B===null||B===e||B instanceof RegExp||B instanceof Date||B instanceof String||B instanceof Number||B instanceof Boolean)return B;var F=B instanceof Array?[]:{};return v.save(B,F),E(B,function(P){var U=D(B[P]);switch(typeof U){case"boolean":case"number":case"string":case"function":F[P]=U;break;case"object":case"undefined":var k=v.get(U);F[P]=k!==e?k:u(U,D,v)}}),F}function E(B,D){if(B instanceof Array){for(var v=0;v<B.length;v++)D(v);typeof B.toJSON=="function"&&D("toJSON")}else for(v in B)D(v)}function y(){this.keys=[],this.values=[]}h.ad=function(B){if(arguments.length==0)throw Error("When calling ko.toJS, pass the object you want to convert.");return u(B,function(D){for(var v=0;h.O(D)&&10>v;v++)D=D();return D})},h.toJSON=function(B,D,v){return B=h.ad(B),h.a.hc(B,D,v)},y.prototype={constructor:y,save:function(B,D){var v=h.a.A(this.keys,B);0<=v?this.values[v]=D:(this.keys.push(B),this.values.push(D))},get:function(B){return B=h.a.A(this.keys,B),0<=B?this.values[B]:e}}})(),h.b("toJS",h.ad),h.b("toJSON",h.toJSON),h.Wd=function(u,E,y){function B(D){var v=h.xb(u,y).extend({ma:"always"}),F=v.subscribe(function(P){P&&(F.s(),D(P))});return v.notifySubscribers(v.v()),F}return typeof Promise!="function"||E?B(E.bind(y)):new Promise(B)},h.b("when",h.Wd),(function(){h.w={M:function(u){switch(h.a.R(u)){case"option":return u.__ko__hasDomDataOptionValue__===!0?h.a.g.get(u,h.c.options.$b):7>=h.a.W?u.getAttributeNode("value")&&u.getAttributeNode("value").specified?u.value:u.text:u.value;case"select":return 0<=u.selectedIndex?h.w.M(u.options[u.selectedIndex]):e;default:return u.value}},cb:function(u,E,y){switch(h.a.R(u)){case"option":typeof E=="string"?(h.a.g.set(u,h.c.options.$b,e),"__ko__hasDomDataOptionValue__"in u&&delete u.__ko__hasDomDataOptionValue__,u.value=E):(h.a.g.set(u,h.c.options.$b,E),u.__ko__hasDomDataOptionValue__=!0,u.value=typeof E=="number"?E:"");break;case"select":(E===""||E===null)&&(E=e);for(var B=-1,D=0,v=u.options.length,F;D<v;++D)if(F=h.w.M(u.options[D]),F==E||F===""&&E===e){B=D;break}(y||0<=B||E===e&&1<u.size)&&(u.selectedIndex=B,h.a.W===6&&h.a.setTimeout(function(){u.selectedIndex=B},0));break;default:(E===null||E===e)&&(E=""),u.value=E}}}})(),h.b("selectExtensions",h.w),h.b("selectExtensions.readValue",h.w.M),h.b("selectExtensions.writeValue",h.w.cb),h.m=(function(){function u(P){P=h.a.Db(P),P.charCodeAt(0)===123&&(P=P.slice(1,-1)),P+=`
,`;var U=[],k=P.match(B),j,q=[],$=0;if(1<k.length){for(var H=0,Z;Z=k[H];++H){var ee=Z.charCodeAt(0);if(ee===44){if(0>=$){U.push(j&&q.length?{key:j,value:q.join("")}:{unknown:j||q.join("")}),j=$=0,q=[];continue}}else if(ee===58){if(!$&&!j&&q.length===1){j=q.pop();continue}}else{if(ee===47&&1<Z.length&&(Z.charCodeAt(1)===47||Z.charCodeAt(1)===42))continue;ee===47&&H&&1<Z.length?(ee=k[H-1].match(D))&&!v[ee[0]]&&(P=P.substr(P.indexOf(Z)+1),k=P.match(B),H=-1,Z="/"):ee===40||ee===123||ee===91?++$:ee===41||ee===125||ee===93?--$:j||q.length||ee!==34&&ee!==39||(Z=Z.slice(1,-1))}q.push(Z)}if(0<$)throw Error("Unbalanced parentheses, braces, or brackets")}return U}var E=["true","false","null","undefined"],y=/^(?:[$_a-z][$\w]*|(.+)(\.\s*[$_a-z][$\w]*|\[.+\]))$/i,B=RegExp(`"(?:\\\\.|[^"])*"|'(?:\\\\.|[^'])*'|\`(?:\\\\.|[^\`])*\`|/\\*(?:[^*]|\\*+[^*/])*\\*+/|//.*
|/(?:\\\\.|[^/])+/w*|[^\\s:,/][^,"'\`{}()/:[\\]]*[^\\s,"'\`{}()/:[\\]]|[^\\s]`,"g"),D=/[\])"'A-Za-z0-9_$]+$/,v={in:1,return:1,typeof:1},F={};return{Ra:[],wa:F,ac:u,vb:function(P,U){function k(ee,Ae){var ge;if(!H){var ce=h.getBindingHandler(ee);if(ce&&ce.preprocess&&!(Ae=ce.preprocess(Ae,ee,k)))return;(ce=F[ee])&&(ge=Ae,0<=h.a.A(E,ge)?ge=!1:(ce=ge.match(y),ge=ce===null?!1:ce[1]?"Object("+ce[1]+")"+ce[2]:ge),ce=ge),ce&&q.push("'"+(typeof F[ee]=="string"?F[ee]:ee)+"':function(_z){"+ge+"=_z}")}$&&(Ae="function(){return "+Ae+" }"),j.push("'"+ee+"':"+Ae)}U=U||{};var j=[],q=[],$=U.valueAccessors,H=U.bindingParams,Z=typeof P=="string"?u(P):P;return h.a.D(Z,function(ee){k(ee.key||ee.unknown,ee.value)}),q.length&&k("_ko_property_writers","{"+q.join(",")+" }"),j.join(",")},Id:function(P,U){for(var k=0;k<P.length;k++)if(P[k].key==U)return!0;return!1},eb:function(P,U,k,j,q){P&&h.O(P)?!h.Za(P)||q&&P.v()===j||P(j):(P=U.get("_ko_property_writers"))&&P[k]&&P[k](j)}}})(),h.b("expressionRewriting",h.m),h.b("expressionRewriting.bindingRewriteValidators",h.m.Ra),h.b("expressionRewriting.parseObjectLiteral",h.m.ac),h.b("expressionRewriting.preProcessBindings",h.m.vb),h.b("expressionRewriting._twoWayBindings",h.m.wa),h.b("jsonExpressionRewriting",h.m),h.b("jsonExpressionRewriting.insertPropertyAccessorsIntoJson",h.m.vb),(function(){function u(k){return k.nodeType==8&&v.test(D?k.text:k.nodeValue)}function E(k){return k.nodeType==8&&F.test(D?k.text:k.nodeValue)}function y(k,j){for(var q=k,$=1,H=[];q=q.nextSibling;){if(E(q)&&(h.a.g.set(q,U,!0),$--,$===0))return H;H.push(q),u(q)&&$++}if(!j)throw Error("Cannot find closing comment tag to match: "+k.nodeValue);return null}function B(k,j){var q=y(k,j);return q?0<q.length?q[q.length-1].nextSibling:k.nextSibling:null}var D=n&&n.createComment("test").text==="<!--test-->",v=D?/^\x3c!--\s*ko(?:\s+([\s\S]+))?\s*--\x3e$/:/^\s*ko(?:\s+([\s\S]+))?\s*$/,F=D?/^\x3c!--\s*\/ko\s*--\x3e$/:/^\s*\/ko\s*$/,P={ul:!0,ol:!0},U="__ko_matchedEndComment__";h.h={ea:{},childNodes:function(k){return u(k)?y(k):k.childNodes},Ea:function(k){if(u(k)){k=h.h.childNodes(k);for(var j=0,q=k.length;j<q;j++)h.removeNode(k[j])}else h.a.Tb(k)},va:function(k,j){if(u(k)){h.h.Ea(k);for(var q=k.nextSibling,$=0,H=j.length;$<H;$++)q.parentNode.insertBefore(j[$],q)}else h.a.va(k,j)},Vc:function(k,j){var q;u(k)?(q=k.nextSibling,k=k.parentNode):q=k.firstChild,q?j!==q&&k.insertBefore(j,q):k.appendChild(j)},Wb:function(k,j,q){q?(q=q.nextSibling,u(k)&&(k=k.parentNode),q?j!==q&&k.insertBefore(j,q):k.appendChild(j)):h.h.Vc(k,j)},firstChild:function(k){if(u(k))return!k.nextSibling||E(k.nextSibling)?null:k.nextSibling;if(k.firstChild&&E(k.firstChild))throw Error("Found invalid end comment, as the first child of "+k);return k.firstChild},nextSibling:function(k){if(u(k)&&(k=B(k)),k.nextSibling&&E(k.nextSibling)){var j=k.nextSibling;if(E(j)&&!h.a.g.get(j,U))throw Error("Found end comment without a matching opening comment, as child of "+k);return null}return k.nextSibling},Cd:u,Vd:function(k){return(k=(D?k.text:k.nodeValue).match(v))?k[1]:null},Sc:function(k){if(P[h.a.R(k)]){var j=k.firstChild;if(j)do if(j.nodeType===1){var q;q=j.firstChild;var $=null;if(q)do if($)$.push(q);else if(u(q)){var H=B(q,!0);H?q=H:$=[q]}else E(q)&&($=[q]);while(q=q.nextSibling);if(q=$)for($=j.nextSibling,H=0;H<q.length;H++)$?k.insertBefore(q[H],$):k.appendChild(q[H])}while(j=j.nextSibling)}}}})(),h.b("virtualElements",h.h),h.b("virtualElements.allowedBindings",h.h.ea),h.b("virtualElements.emptyNode",h.h.Ea),h.b("virtualElements.insertAfter",h.h.Wb),h.b("virtualElements.prepend",h.h.Vc),h.b("virtualElements.setDomNodeChildren",h.h.va),(function(){h.ga=function(){this.nd={}},h.a.extend(h.ga.prototype,{nodeHasBindings:function(u){switch(u.nodeType){case 1:return u.getAttribute("data-bind")!=null||h.j.getComponentNameForNode(u);case 8:return h.h.Cd(u);default:return!1}},getBindings:function(u,E){var y=this.getBindingsString(u,E),y=y?this.parseBindingsString(y,E,u):null;return h.j.tc(y,u,E,!1)},getBindingAccessors:function(u,E){var y=this.getBindingsString(u,E),y=y?this.parseBindingsString(y,E,u,{valueAccessors:!0}):null;return h.j.tc(y,u,E,!0)},getBindingsString:function(u){switch(u.nodeType){case 1:return u.getAttribute("data-bind");case 8:return h.h.Vd(u);default:return null}},parseBindingsString:function(u,E,y,B){try{var D=this.nd,v=u+(B&&B.valueAccessors||""),F;if(!(F=D[v])){var P,U="with($context){with($data||{}){return{"+h.m.vb(u,B)+"}}}";P=new Function("$context","$element",U),F=D[v]=P}return F(E,y)}catch(k){throw k.message=`Unable to parse bindings.
Bindings value: `+u+`
Message: `+k.message,k}}}),h.ga.instance=new h.ga})(),h.b("bindingProvider",h.ga),(function(){function u(ce){var he=(ce=h.a.g.get(ce,ge))&&ce.N;he&&(ce.N=null,he.Tc())}function E(ce,he,Ie){this.node=ce,this.yc=he,this.kb=[],this.H=!1,he.N||h.a.K.za(ce,u),Ie&&Ie.N&&(Ie.N.kb.push(ce),this.Kb=Ie)}function y(ce){return function(){return ce}}function B(ce){return ce()}function D(ce){return h.a.Ga(h.u.G(ce),function(he,Ie){return function(){return ce()[Ie]}})}function v(ce,he,Ie){return typeof ce=="function"?D(ce.bind(null,he,Ie)):h.a.Ga(ce,y)}function F(ce,he){return D(this.getBindings.bind(this,ce,he))}function P(ce,he){var Ie=h.h.firstChild(he);if(Ie){var Ne,_e=h.ga.instance,ve=_e.preprocessNode;if(ve){for(;Ne=Ie;)Ie=h.h.nextSibling(Ne),ve.call(_e,Ne);Ie=h.h.firstChild(he)}for(;Ne=Ie;)Ie=h.h.nextSibling(Ne),U(ce,Ne)}h.i.ma(he,h.i.H)}function U(ce,he){var Ie=ce,Ne=he.nodeType===1;Ne&&h.h.Sc(he),(Ne||h.ga.instance.nodeHasBindings(he))&&(Ie=j(he,null,ce).bindingContextForDescendants),Ie&&!ee[h.a.R(he)]&&P(Ie,he)}function k(ce){var he=[],Ie={},Ne=[];return h.a.P(ce,function _e(ve){if(!Ie[ve]){var at=h.getBindingHandler(ve);at&&(at.after&&(Ne.push(ve),h.a.D(at.after,function(Tt){if(ce[Tt]){if(h.a.A(Ne,Tt)!==-1)throw Error("Cannot combine the following bindings, because they have a cyclic dependency: "+Ne.join(", "));_e(Tt)}}),Ne.length--),he.push({key:ve,Mc:at})),Ie[ve]=!0}}),he}function j(ce,he,Ie){var Ne=h.a.g.Ub(ce,ge,{}),_e=Ne.hd;if(!he){if(_e)throw Error("You cannot apply bindings multiple times to the same element.");Ne.hd=!0}_e||(Ne.context=Ie),Ne.Zb||(Ne.Zb={});var ve;if(he&&typeof he!="function")ve=he;else{var at=h.ga.instance,Tt=at.getBindingAccessors||F,st=h.$(function(){return(ve=he?he(Ie,ce):Tt.call(at,ce,Ie))&&(Ie[$]&&Ie[$](),Ie[Z]&&Ie[Z]()),ve},null,{l:ce});ve&&st.ja()||(st=null)}var Rn=Ie,Lt;if(ve){var $t=function(){return h.a.Ga(st?st():ve,B)},ci=st?function(Ft){return function(){return B(st()[Ft])}}:function(Ft){return ve[Ft]};$t.get=function(Ft){return ve[Ft]&&B(ci(Ft))},$t.has=function(Ft){return Ft in ve},h.i.H in ve&&h.i.subscribe(ce,h.i.H,function(){var Ft=(0,ve[h.i.H])();if(Ft){var pi=h.h.childNodes(ce);pi.length&&Ft(pi,h.Ec(pi[0]))}}),h.i.pa in ve&&(Rn=h.i.Cb(ce,Ie),h.i.subscribe(ce,h.i.pa,function(){var Ft=(0,ve[h.i.pa])();Ft&&h.h.firstChild(ce)&&Ft(ce)})),Ne=k(ve),h.a.D(Ne,function(Ft){var pi=Ft.Mc.init,Kn=Ft.Mc.update,lt=Ft.key;if(ce.nodeType===8&&!h.h.ea[lt])throw Error("The binding '"+lt+"' cannot be used with virtual elements");try{typeof pi=="function"&&h.u.G(function(){var Ct=pi(ce,ci(lt),$t,Rn.$data,Rn);if(Ct&&Ct.controlsDescendantBindings){if(Lt!==e)throw Error("Multiple bindings ("+Lt+" and "+lt+") are trying to control descendant bindings of the same element. You cannot use these bindings together on the same element.");Lt=lt}}),typeof Kn=="function"&&h.$(function(){Kn(ce,ci(lt),$t,Rn.$data,Rn)},null,{l:ce})}catch(Ct){throw Ct.message='Unable to process binding "'+lt+": "+ve[lt]+`"
Message: `+Ct.message,Ct}})}return Ne=Lt===e,{shouldBindDescendants:Ne,bindingContextForDescendants:Ne&&Rn}}function q(ce,he){return ce&&ce instanceof h.fa?ce:new h.fa(ce,e,e,he)}var $=h.a.Da("_subscribable"),H=h.a.Da("_ancestorBindingInfo"),Z=h.a.Da("_dataDependency");h.c={};var ee={script:!0,textarea:!0,template:!0};h.getBindingHandler=function(ce){return h.c[ce]};var Ae={};h.fa=function(ce,he,Ie,Ne,_e){function ve(){var ci=Rn?st():st,Ft=h.a.f(ci);return he?(h.a.extend(at,he),H in he&&(at[H]=he[H])):(at.$parents=[],at.$root=Ft,at.ko=h),at[$]=Lt,Tt?Ft=at.$data:(at.$rawData=ci,at.$data=Ft),Ie&&(at[Ie]=Ft),Ne&&Ne(at,he,Ft),he&&he[$]&&!h.S.o().Vb(he[$])&&he[$](),$t&&(at[Z]=$t),at.$data}var at=this,Tt=ce===Ae,st=Tt?e:ce,Rn=typeof st=="function"&&!h.O(st),Lt,$t=_e&&_e.dataDependency;_e&&_e.exportDependencies?ve():(Lt=h.xb(ve),Lt.v(),Lt.ja()?Lt.equalityComparer=null:at[$]=e)},h.fa.prototype.createChildContext=function(ce,he,Ie,Ne){if(!Ne&&he&&typeof he=="object"&&(Ne=he,he=Ne.as,Ie=Ne.extend),he&&Ne&&Ne.noChildContext){var _e=typeof ce=="function"&&!h.O(ce);return new h.fa(Ae,this,null,function(ve){Ie&&Ie(ve),ve[he]=_e?ce():ce},Ne)}return new h.fa(ce,this,he,function(ve,at){ve.$parentContext=at,ve.$parent=at.$data,ve.$parents=(at.$parents||[]).slice(0),ve.$parents.unshift(ve.$parent),Ie&&Ie(ve)},Ne)},h.fa.prototype.extend=function(ce,he){return new h.fa(Ae,this,null,function(Ie){h.a.extend(Ie,typeof ce=="function"?ce(Ie):ce)},he)};var ge=h.a.g.Z();E.prototype.Tc=function(){this.Kb&&this.Kb.N&&this.Kb.N.sd(this.node)},E.prototype.sd=function(ce){h.a.Pa(this.kb,ce),!this.kb.length&&this.H&&this.Cc()},E.prototype.Cc=function(){this.H=!0,this.yc.N&&!this.kb.length&&(this.yc.N=null,h.a.K.yb(this.node,u),h.i.ma(this.node,h.i.pa),this.Tc())},h.i={H:"childrenComplete",pa:"descendantsComplete",subscribe:function(ce,he,Ie,Ne,_e){var ve=h.a.g.Ub(ce,ge,{});return ve.Fa||(ve.Fa=new h.T),_e&&_e.notifyImmediately&&ve.Zb[he]&&h.u.G(Ie,Ne,[ce]),ve.Fa.subscribe(Ie,Ne,he)},ma:function(ce,he){var Ie=h.a.g.get(ce,ge);if(Ie&&(Ie.Zb[he]=!0,Ie.Fa&&Ie.Fa.notifySubscribers(ce,he),he==h.i.H)){if(Ie.N)Ie.N.Cc();else if(Ie.N===e&&Ie.Fa&&Ie.Fa.Wa(h.i.pa))throw Error("descendantsComplete event not supported for bindings on this node")}},Cb:function(ce,he){var Ie=h.a.g.Ub(ce,ge,{});return Ie.N||(Ie.N=new E(ce,Ie,he[H])),he[H]==Ie?he:he.extend(function(Ne){Ne[H]=Ie})}},h.Td=function(ce){return(ce=h.a.g.get(ce,ge))&&ce.context},h.ib=function(ce,he,Ie){return ce.nodeType===1&&h.h.Sc(ce),j(ce,he,q(Ie))},h.ld=function(ce,he,Ie){return Ie=q(Ie),h.ib(ce,v(he,Ie,ce),Ie)},h.Oa=function(ce,he){he.nodeType!==1&&he.nodeType!==8||P(q(ce),he)},h.vc=function(ce,he,Ie){if(!o&&t.jQuery&&(o=t.jQuery),2>arguments.length){if(he=n.body,!he)throw Error("ko.applyBindings: could not find document.body; has the document been loaded?")}else if(!he||he.nodeType!==1&&he.nodeType!==8)throw Error("ko.applyBindings: first parameter should be your view model; second parameter should be a DOM node");U(q(ce,Ie),he)},h.Dc=function(ce){return!ce||ce.nodeType!==1&&ce.nodeType!==8?e:h.Td(ce)},h.Ec=function(ce){return(ce=h.Dc(ce))?ce.$data:e},h.b("bindingHandlers",h.c),h.b("bindingEvent",h.i),h.b("bindingEvent.subscribe",h.i.subscribe),h.b("bindingEvent.startPossiblyAsyncContentBinding",h.i.Cb),h.b("applyBindings",h.vc),h.b("applyBindingsToDescendants",h.Oa),h.b("applyBindingAccessorsToNode",h.ib),h.b("applyBindingsToNode",h.ld),h.b("contextFor",h.Dc),h.b("dataFor",h.Ec)})(),(function(u){function E(F,P){var U=Object.prototype.hasOwnProperty.call(D,F)?D[F]:u,k;U?U.subscribe(P):(U=D[F]=new h.T,U.subscribe(P),y(F,function(j,q){var $=!(!q||!q.synchronous);v[F]={definition:j,Gd:$},delete D[F],k||$?U.notifySubscribers(j):h.na.zb(function(){U.notifySubscribers(j)})}),k=!0)}function y(F,P){B("getConfig",[F],function(U){U?B("loadComponent",[F,U],function(k){P(k,U)}):P(null,null)})}function B(F,P,U,k){k||(k=h.j.loaders.slice(0));var j=k.shift();if(j){var q=j[F];if(q){var $=!1;if(q.apply(j,P.concat(function(H){$?U(null):H!==null?U(H):B(F,P,U,k)}))!==u&&($=!0,!j.suppressLoaderExceptions))throw Error("Component loaders must supply values by invoking the callback, not by returning values synchronously.")}else B(F,P,U,k)}else U(null)}var D={},v={};h.j={get:function(F,P){var U=Object.prototype.hasOwnProperty.call(v,F)?v[F]:u;U?U.Gd?h.u.G(function(){P(U.definition)}):h.na.zb(function(){P(U.definition)}):E(F,P)},Bc:function(F){delete v[F]},oc:B},h.j.loaders=[],h.b("components",h.j),h.b("components.get",h.j.get),h.b("components.clearCachedDefinition",h.j.Bc)})(),(function(){function u(U,k,j,q){function $(){--Z===0&&q(H)}var H={},Z=2,ee=j.template;j=j.viewModel,ee?D(k,ee,function(Ae){h.j.oc("loadTemplate",[U,Ae],function(ge){H.template=ge,$()})}):$(),j?D(k,j,function(Ae){h.j.oc("loadViewModel",[U,Ae],function(ge){H[P]=ge,$()})}):$()}function E(U,k,j){if(typeof k=="function")j(function($){return new k($)});else if(typeof k[P]=="function")j(k[P]);else if("instance"in k){var q=k.instance;j(function(){return q})}else"viewModel"in k?E(U,k.viewModel,j):U("Unknown viewModel value: "+k)}function y(U){switch(h.a.R(U)){case"script":return h.a.ua(U.text);case"textarea":return h.a.ua(U.value);case"template":if(B(U.content))return h.a.Ca(U.content.childNodes)}return h.a.Ca(U.childNodes)}function B(U){return t.DocumentFragment?U instanceof DocumentFragment:U&&U.nodeType===11}function D(U,k,j){typeof k.require=="string"?s||t.require?(s||t.require)([k.require],function(q){q&&typeof q=="object"&&q.Xd&&q.default&&(q=q.default),j(q)}):U("Uses require, but no AMD loader is present"):j(k)}function v(U){return function(k){throw Error("Component '"+U+"': "+k)}}var F={};h.j.register=function(U,k){if(!k)throw Error("Invalid configuration for "+U);if(h.j.tb(U))throw Error("Component "+U+" is already registered");F[U]=k},h.j.tb=function(U){return Object.prototype.hasOwnProperty.call(F,U)},h.j.unregister=function(U){delete F[U],h.j.Bc(U)},h.j.Fc={getConfig:function(U,k){k(h.j.tb(U)?F[U]:null)},loadComponent:function(U,k,j){var q=v(U);D(q,k,function($){u(U,q,$,j)})},loadTemplate:function(U,k,j){if(U=v(U),typeof k=="string")j(h.a.ua(k));else if(k instanceof Array)j(k);else if(B(k))j(h.a.la(k.childNodes));else if(k.element)if(k=k.element,t.HTMLElement?k instanceof HTMLElement:k&&k.tagName&&k.nodeType===1)j(y(k));else if(typeof k=="string"){var q=n.getElementById(k);q?j(y(q)):U("Cannot find element with ID "+k)}else U("Unknown element type: "+k);else U("Unknown template value: "+k)},loadViewModel:function(U,k,j){E(v(U),k,j)}};var P="createViewModel";h.b("components.register",h.j.register),h.b("components.isRegistered",h.j.tb),h.b("components.unregister",h.j.unregister),h.b("components.defaultLoader",h.j.Fc),h.j.loaders.push(h.j.Fc),h.j.dd=F})(),(function(){function u(y,B){var D=y.getAttribute("params");if(D){var D=E.parseBindingsString(D,B,y,{valueAccessors:!0,bindingParams:!0}),D=h.a.Ga(D,function(P){return h.o(P,null,{l:y})}),v=h.a.Ga(D,function(P){var U=P.v();return P.ja()?h.o({read:function(){return h.a.f(P())},write:h.Za(U)&&function(k){P()(k)},l:y}):U});return Object.prototype.hasOwnProperty.call(v,"$raw")||(v.$raw=D),v}return{$raw:{}}}h.j.getComponentNameForNode=function(y){var B=h.a.R(y);if(h.j.tb(B)&&(B.indexOf("-")!=-1||""+y=="[object HTMLUnknownElement]"||8>=h.a.W&&y.tagName===B))return B},h.j.tc=function(y,B,D,v){if(B.nodeType===1){var F=h.j.getComponentNameForNode(B);if(F){if(y=y||{},y.component)throw Error('Cannot use the "component" binding on a custom element matching a component');var P={name:F,params:u(B,D)};y.component=v?function(){return P}:P}}return y};var E=new h.ga;9>h.a.W&&(h.j.register=(function(y){return function(B){return y.apply(this,arguments)}})(h.j.register),n.createDocumentFragment=(function(y){return function(){var B=y(),D=h.j.dd,v;for(v in D);return B}})(n.createDocumentFragment))})(),(function(){function u(B,D,v){if(D=D.template,!D)throw Error("Component '"+B+"' has no template");B=h.a.Ca(D),h.h.va(v,B)}function E(B,D,v){var F=B.createViewModel;return F?F.call(B,D,v):D}var y=0;h.c.component={init:function(B,D,v,F,P){function U(){var H=k&&k.dispose;typeof H=="function"&&H.call(k),q&&q.s(),j=k=q=null}var k,j,q,$=h.a.la(h.h.childNodes(B));return h.h.Ea(B),h.a.K.za(B,U),h.o(function(){var H=h.a.f(D()),Z,ee;if(typeof H=="string"?Z=H:(Z=h.a.f(H.name),ee=h.a.f(H.params)),!Z)throw Error("No component name specified");var Ae=h.i.Cb(B,P),ge=j=++y;h.j.get(Z,function(ce){if(j===ge){if(U(),!ce)throw Error("Unknown component '"+Z+"'");u(Z,ce,B);var he=E(ce,ee,{element:B,templateNodes:$});ce=Ae.createChildContext(he,{extend:function(Ie){Ie.$component=he,Ie.$componentTemplateNodes=$}}),he&&he.koDescendantsComplete&&(q=h.i.subscribe(B,h.i.pa,he.koDescendantsComplete,he)),k=he,h.Oa(ce,B)}})},null,{l:B}),{controlsDescendantBindings:!0}}},h.h.ea.component=!0})();var N={class:"className",for:"htmlFor"};h.c.attr={update:function(u,E){var y=h.a.f(E())||{};h.a.P(y,function(B,D){D=h.a.f(D);var v=B.indexOf(":"),v="lookupNamespaceURI"in u&&0<v&&u.lookupNamespaceURI(B.substr(0,v)),F=D===!1||D===null||D===e;F?v?u.removeAttributeNS(v,B):u.removeAttribute(B):D=D.toString(),8>=h.a.W&&B in N?(B=N[B],F?u.removeAttribute(B):u[B]=D):F||(v?u.setAttributeNS(v,B,D):u.setAttribute(B,D)),B==="name"&&h.a.Yc(u,F?"":D)})}},(function(){h.c.checked={after:["value","attr"],init:function(u,E,y){function B(){var H=u.checked,Z=v();if(!h.S.Ya()&&(H||!P&&!h.S.qa())){var ee=h.u.G(E);if(k){var Ae=j?ee.v():ee,ge=$;$=Z,ge!==Z?H&&(h.a.Na(Ae,Z,!0),h.a.Na(Ae,ge,!1)):h.a.Na(Ae,Z,H),j&&h.Za(ee)&&ee(Ae)}else F&&(Z===e?Z=H:H||(Z=e)),h.m.eb(ee,y,"checked",Z,!0)}}function D(){var H=h.a.f(E()),Z=v();k?(u.checked=0<=h.a.A(H,Z),$=Z):u.checked=F&&Z===e?!!H:v()===H}var v=h.xb(function(){if(y.has("checkedValue"))return h.a.f(y.get("checkedValue"));if(q)return y.has("value")?h.a.f(y.get("value")):u.value}),F=u.type=="checkbox",P=u.type=="radio";if(F||P){var U=E(),k=F&&h.a.f(U)instanceof Array,j=!(k&&U.push&&U.splice),q=P||k,$=k?v():e;P&&!u.name&&h.c.uniqueName.init(u,function(){return!0}),h.o(B,null,{l:u}),h.a.B(u,"click",B),h.o(D,null,{l:u}),U=e}}},h.m.wa.checked=!0,h.c.checkedValue={update:function(u,E){u.value=h.a.f(E())}}})(),h.c.class={update:function(u,E){var y=h.a.Db(h.a.f(E()));h.a.Eb(u,u.__ko__cssValue,!1),u.__ko__cssValue=y,h.a.Eb(u,y,!0)}},h.c.css={update:function(u,E){var y=h.a.f(E());y!==null&&typeof y=="object"?h.a.P(y,function(B,D){D=h.a.f(D),h.a.Eb(u,B,D)}):h.c.class.update(u,E)}},h.c.enable={update:function(u,E){var y=h.a.f(E());y&&u.disabled?u.removeAttribute("disabled"):y||u.disabled||(u.disabled=!0)}},h.c.disable={update:function(u,E){h.c.enable.update(u,function(){return!h.a.f(E())})}},h.c.event={init:function(u,E,y,B,D){var v=E()||{};h.a.P(v,function(F){typeof F=="string"&&h.a.B(u,F,function(P){var U,k=E()[F];if(k){try{var j=h.a.la(arguments);B=D.$data,j.unshift(B),U=k.apply(B,j)}finally{U!==!0&&(P.preventDefault?P.preventDefault():P.returnValue=!1)}y.get(F+"Bubble")===!1&&(P.cancelBubble=!0,P.stopPropagation&&P.stopPropagation())}})})}},h.c.foreach={Rc:function(u){return function(){var E=u(),y=h.a.bc(E);return!y||typeof y.length=="number"?{foreach:E,templateEngine:h.ba.Ma}:(h.a.f(E),{foreach:y.data,as:y.as,noChildContext:y.noChildContext,includeDestroyed:y.includeDestroyed,afterAdd:y.afterAdd,beforeRemove:y.beforeRemove,afterRender:y.afterRender,beforeMove:y.beforeMove,afterMove:y.afterMove,templateEngine:h.ba.Ma})}},init:function(u,E){return h.c.template.init(u,h.c.foreach.Rc(E))},update:function(u,E,y,B,D){return h.c.template.update(u,h.c.foreach.Rc(E),y,B,D)}},h.m.Ra.foreach=!1,h.h.ea.foreach=!0,h.c.hasfocus={init:function(u,E,y){function B(F){u.__ko_hasfocusUpdating=!0;var P=u.ownerDocument;if("activeElement"in P){var U;try{U=P.activeElement}catch{U=P.body}F=U===u}P=E(),h.m.eb(P,y,"hasfocus",F,!0),u.__ko_hasfocusLastValue=F,u.__ko_hasfocusUpdating=!1}var D=B.bind(null,!0),v=B.bind(null,!1);h.a.B(u,"focus",D),h.a.B(u,"focusin",D),h.a.B(u,"blur",v),h.a.B(u,"focusout",v),u.__ko_hasfocusLastValue=!1},update:function(u,E){var y=!!h.a.f(E());u.__ko_hasfocusUpdating||u.__ko_hasfocusLastValue===y||(y?u.focus():u.blur(),!y&&u.__ko_hasfocusLastValue&&u.ownerDocument.body.focus(),h.u.G(h.a.Fb,null,[u,y?"focusin":"focusout"]))}},h.m.wa.hasfocus=!0,h.c.hasFocus=h.c.hasfocus,h.m.wa.hasFocus="hasfocus",h.c.html={init:function(){return{controlsDescendantBindings:!0}},update:function(u,E){h.a.fc(u,E())}},(function(){function u(E,y,B){h.c[E]={init:function(D,v,F,P,U){var k,j,q={},$,H,Z;if(y){P=F.get("as");var ee=F.get("noChildContext");Z=!(P&&ee),q={as:P,noChildContext:ee,exportDependencies:Z}}return H=($=F.get("completeOn")=="render")||F.has(h.i.pa),h.o(function(){var Ae=h.a.f(v()),ge=!B!=!Ae,ce=!j,he;(Z||ge!==k)&&(H&&(U=h.i.Cb(D,U)),ge&&((!y||Z)&&(q.dataDependency=h.S.o()),he=y?U.createChildContext(typeof Ae=="function"?Ae:v,q):h.S.qa()?U.extend(null,q):U),ce&&h.S.qa()&&(j=h.a.Ca(h.h.childNodes(D),!0)),ge?(ce||h.h.va(D,h.a.Ca(j)),h.Oa(he,D)):(h.h.Ea(D),$||h.i.ma(D,h.i.H)),k=ge)},null,{l:D}),{controlsDescendantBindings:!0}}},h.m.Ra[E]=!1,h.h.ea[E]=!0}u("if"),u("ifnot",!1,!0),u("with",!0)})(),h.c.let={init:function(u,E,y,B,D){return E=D.extend(E),h.Oa(E,u),{controlsDescendantBindings:!0}}},h.h.ea.let=!0;var O={};h.c.options={init:function(u){if(h.a.R(u)!=="select")throw Error("options binding applies only to SELECT elements");for(;0<u.length;)u.remove(0);return{controlsDescendantBindings:!0}},update:function(u,E,y){function B(){return h.a.jb(u.options,function(ee){return ee.selected})}function D(ee,Ae,ge){var ce=typeof Ae;return ce=="function"?Ae(ee):ce=="string"?ee[Ae]:ge}function v(ee,Ae){if(H&&k)h.i.ma(u,h.i.H);else if($.length){var ge=0<=h.a.A($,h.w.M(Ae[0]));h.a.Zc(Ae[0],ge),H&&!ge&&h.u.G(h.a.Fb,null,[u,"change"])}}var F=u.multiple,P=u.length!=0&&F?u.scrollTop:null,U=h.a.f(E()),k=y.get("valueAllowUnset")&&y.has("value"),j=y.get("optionsIncludeDestroyed");E={};var q,$=[];k||(F?$=h.a.Mb(B(),h.w.M):0<=u.selectedIndex&&$.push(h.w.M(u.options[u.selectedIndex]))),U&&(typeof U.length>"u"&&(U=[U]),q=h.a.jb(U,function(ee){return j||ee===e||ee===null||!h.a.f(ee._destroy)}),y.has("optionsCaption")&&(U=h.a.f(y.get("optionsCaption")),U!==null&&U!==e&&q.unshift(O)));var H=!1;if(E.beforeRemove=function(ee){u.removeChild(ee)},U=v,y.has("optionsAfterRender")&&typeof y.get("optionsAfterRender")=="function"&&(U=function(ee,Ae){v(0,Ae),h.u.G(y.get("optionsAfterRender"),null,[Ae[0],ee!==O?ee:e])}),h.a.ec(u,q,function(ee,Ae,ge){return ge.length&&($=!k&&ge[0].selected?[h.w.M(ge[0])]:[],H=!0),Ae=u.ownerDocument.createElement("option"),ee===O?(h.a.Bb(Ae,y.get("optionsCaption")),h.w.cb(Ae,e)):(ge=D(ee,y.get("optionsValue"),ee),h.w.cb(Ae,h.a.f(ge)),ee=D(ee,y.get("optionsText"),ge),h.a.Bb(Ae,ee)),[Ae]},E,U),!k){var Z;F?Z=$.length&&B().length<$.length:Z=$.length&&0<=u.selectedIndex?h.w.M(u.options[u.selectedIndex])!==$[0]:$.length||0<=u.selectedIndex,Z&&h.u.G(h.a.Fb,null,[u,"change"])}(k||h.S.Ya())&&h.i.ma(u,h.i.H),h.a.wd(u),P&&20<Math.abs(P-u.scrollTop)&&(u.scrollTop=P)}},h.c.options.$b=h.a.g.Z(),h.c.selectedOptions={init:function(u,E,y){function B(){var F=E(),P=[];h.a.D(u.getElementsByTagName("option"),function(U){U.selected&&P.push(h.w.M(U))}),h.m.eb(F,y,"selectedOptions",P)}function D(){var F=h.a.f(E()),P=u.scrollTop;F&&typeof F.length=="number"&&h.a.D(u.getElementsByTagName("option"),function(U){var k=0<=h.a.A(F,h.w.M(U));U.selected!=k&&h.a.Zc(U,k)}),u.scrollTop=P}if(h.a.R(u)!="select")throw Error("selectedOptions binding applies only to SELECT elements");var v;h.i.subscribe(u,h.i.H,function(){v?B():(h.a.B(u,"change",B),v=h.o(D,null,{l:u}))},null,{notifyImmediately:!0})},update:function(){}},h.m.wa.selectedOptions=!0,h.c.style={update:function(u,E){var y=h.a.f(E()||{});h.a.P(y,function(B,D){if(D=h.a.f(D),(D===null||D===e||D===!1)&&(D=""),o)o(u).css(B,D);else if(/^--/.test(B))u.style.setProperty(B,D);else{B=B.replace(/-(\w)/g,function(F,P){return P.toUpperCase()});var v=u.style[B];u.style[B]=D,D===v||u.style[B]!=v||isNaN(D)||(u.style[B]=D+"px")}})}},h.c.submit={init:function(u,E,y,B,D){if(typeof E()!="function")throw Error("The value for a submit binding must be a function");h.a.B(u,"submit",function(v){var F,P=E();try{F=P.call(D.$data,u)}finally{F!==!0&&(v.preventDefault?v.preventDefault():v.returnValue=!1)}})}},h.c.text={init:function(){return{controlsDescendantBindings:!0}},update:function(u,E){h.a.Bb(u,E())}},h.h.ea.text=!0,(function(){if(t&&t.navigator){var u=function(q){if(q)return parseFloat(q[1])},E=t.navigator.userAgent,y,B,D,v,F;(y=t.opera&&t.opera.version&&parseInt(t.opera.version()))||(F=u(E.match(/Edge\/([^ ]+)$/)))||u(E.match(/Chrome\/([^ ]+)/))||(B=u(E.match(/Version\/([^ ]+) Safari/)))||(D=u(E.match(/Firefox\/([^ ]+)/)))||(v=h.a.W||u(E.match(/MSIE ([^ ]+)/)))||(v=u(E.match(/rv:([^ )]+)/)))}if(8<=v&&10>v)var P=h.a.g.Z(),U=h.a.g.Z(),k=function(q){var $=this.activeElement;($=$&&h.a.g.get($,U))&&$(q)},j=function(q,$){var H=q.ownerDocument;h.a.g.get(H,P)||(h.a.g.set(H,P,!0),h.a.B(H,"selectionchange",k)),h.a.g.set(q,U,$)};h.c.textInput={init:function(q,$,H){function Z(ve,at){h.a.B(q,ve,at)}function ee(){var ve=h.a.f($());(ve===null||ve===e)&&(ve=""),Ie!==e&&ve===Ie?h.a.setTimeout(ee,4):q.value!==ve&&(_e=!0,q.value=ve,_e=!1,ce=q.value)}function Ae(){he||(Ie=q.value,he=h.a.setTimeout(ge,4))}function ge(){clearTimeout(he),Ie=he=e;var ve=q.value;ce!==ve&&(ce=ve,h.m.eb($(),H,"textInput",ve))}var ce=q.value,he,Ie,Ne=h.a.W==9?Ae:ge,_e=!1;v&&Z("keypress",ge),11>v&&Z("propertychange",function(ve){_e||ve.propertyName!=="value"||Ne(ve)}),v==8&&(Z("keyup",ge),Z("keydown",ge)),j&&(j(q,Ne),Z("dragend",Ae)),(!v||9<=v)&&Z("input",Ne),5>B&&h.a.R(q)==="textarea"?(Z("keydown",Ae),Z("paste",Ae),Z("cut",Ae)):11>y?Z("keydown",Ae):4>D?(Z("DOMAutoComplete",ge),Z("dragdrop",ge),Z("drop",ge)):F&&q.type==="number"&&Z("keydown",Ae),Z("change",ge),Z("blur",ge),h.o(ee,null,{l:q})}},h.m.wa.textInput=!0,h.c.textinput={preprocess:function(q,$,H){H("textInput",q)}}})(),h.c.uniqueName={init:function(u,E){if(E()){var y="ko_unique_"+ ++h.c.uniqueName.rd;h.a.Yc(u,y)}}},h.c.uniqueName.rd=0,h.c.using={init:function(u,E,y,B,D){var v;return y.has("as")&&(v={as:y.get("as"),noChildContext:y.get("noChildContext")}),E=D.createChildContext(E,v),h.Oa(E,u),{controlsDescendantBindings:!0}}},h.h.ea.using=!0,h.c.value={init:function(u,E,y){var B=h.a.R(u),D=B=="input";if(!D||u.type!="checkbox"&&u.type!="radio"){var v=[],F=y.get("valueUpdate"),P=!1,U=null;F&&(typeof F=="string"?v=[F]:v=h.a.wc(F),h.a.Pa(v,"change"));var k=function(){U=null,P=!1;var $=E(),H=h.w.M(u);h.m.eb($,y,"value",H)};!h.a.W||!D||u.type!="text"||u.autocomplete=="off"||u.form&&u.form.autocomplete=="off"||h.a.A(v,"propertychange")!=-1||(h.a.B(u,"propertychange",function(){P=!0}),h.a.B(u,"focus",function(){P=!1}),h.a.B(u,"blur",function(){P&&k()})),h.a.D(v,function($){var H=k;h.a.Ud($,"after")&&(H=function(){U=h.w.M(u),h.a.setTimeout(k,0)},$=$.substring(5)),h.a.B(u,$,H)});var j;if(j=D&&u.type=="file"?function(){var $=h.a.f(E());$===null||$===e||$===""?u.value="":h.u.G(k)}:function(){var $=h.a.f(E()),H=h.w.M(u);U!==null&&$===U?h.a.setTimeout(j,0):($!==H||H===e)&&(B==="select"?(H=y.get("valueAllowUnset"),h.w.cb(u,$,H),H||$===h.w.M(u)||h.u.G(k)):h.w.cb(u,$))},B==="select"){var q;h.i.subscribe(u,h.i.H,function(){q?y.get("valueAllowUnset")?j():k():(h.a.B(u,"change",k),q=h.o(j,null,{l:u}))},null,{notifyImmediately:!0})}else h.a.B(u,"change",k),h.o(j,null,{l:u})}else h.ib(u,{checkedValue:E})},update:function(){}},h.m.wa.value=!0,h.c.visible={update:function(u,E){var y=h.a.f(E()),B=u.style.display!="none";y&&!B?u.style.display="":!y&&B&&(u.style.display="none")}},h.c.hidden={update:function(u,E){h.c.visible.update(u,function(){return!h.a.f(E())})}},(function(u){h.c[u]={init:function(E,y,B,D,v){return h.c.event.init.call(this,E,function(){var F={};return F[u]=y(),F},B,D,v)}}})("click"),h.ca=function(){},h.ca.prototype.renderTemplateSource=function(){throw Error("Override renderTemplateSource")},h.ca.prototype.createJavaScriptEvaluatorBlock=function(){throw Error("Override createJavaScriptEvaluatorBlock")},h.ca.prototype.makeTemplateSource=function(u,E){if(typeof u=="string"){E=E||n;var y=E.getElementById(u);if(!y)throw Error("Cannot find template with ID "+u);return new h.C.F(y)}if(u.nodeType==1||u.nodeType==8)return new h.C.ia(u);throw Error("Unknown template type: "+u)},h.ca.prototype.renderTemplate=function(u,E,y,B){return u=this.makeTemplateSource(u,B),this.renderTemplateSource(u,E,y,B)},h.ca.prototype.isTemplateRewritten=function(u,E){return this.allowTemplateRewriting===!1?!0:this.makeTemplateSource(u,E).data("isRewritten")},h.ca.prototype.rewriteTemplate=function(u,E,y){u=this.makeTemplateSource(u,y),E=E(u.text()),u.text(E),u.data("isRewritten",!0)},h.b("templateEngine",h.ca),h.kc=(function(){function u(B,D,v,F){B=h.m.ac(B);for(var P=h.m.Ra,U=0;U<B.length;U++){var k=B[U].key;if(Object.prototype.hasOwnProperty.call(P,k)){var j=P[k];if(typeof j=="function"){if(k=j(B[U].value))throw Error(k)}else if(!j)throw Error("This template engine does not support the '"+k+"' binding within its templates")}}return v="ko.__tr_ambtns(function($context,$element){return(function(){return{ "+h.m.vb(B,{valueAccessors:!0})+" } })()},'"+v.toLowerCase()+"')",F.createJavaScriptEvaluatorBlock(v)+D}var E=/(<([a-z]+\d*)(?:\s+(?!data-bind\s*=\s*)[a-z0-9\-]+(?:=(?:\"[^\"]*\"|\'[^\']*\'|[^>]*))?)*\s+)data-bind\s*=\s*(["'])([\s\S]*?)\3/gi,y=/\x3c!--\s*ko\b\s*([\s\S]*?)\s*--\x3e/g;return{xd:function(B,D,v){D.isTemplateRewritten(B,v)||D.rewriteTemplate(B,function(F){return h.kc.Ld(F,D)},v)},Ld:function(B,D){return B.replace(E,function(v,F,P,U,k){return u(k,F,P,D)}).replace(y,function(v,F){return u(F,"<!-- ko -->","#comment",D)})},md:function(B,D){return h.aa.Xb(function(v,F){var P=v.nextSibling;P&&P.nodeName.toLowerCase()===D&&h.ib(P,B,F)})}}})(),h.b("__tr_ambtns",h.kc.md),(function(){h.C={},h.C.F=function(y){if(this.F=y){var B=h.a.R(y);this.ab=B==="script"?1:B==="textarea"?2:B=="template"&&y.content&&y.content.nodeType===11?3:4}},h.C.F.prototype.text=function(){var y=this.ab===1?"text":this.ab===2?"value":"innerHTML";if(arguments.length==0)return this.F[y];var B=arguments[0];y==="innerHTML"?h.a.fc(this.F,B):this.F[y]=B};var u=h.a.g.Z()+"_";h.C.F.prototype.data=function(y){if(arguments.length===1)return h.a.g.get(this.F,u+y);h.a.g.set(this.F,u+y,arguments[1])};var E=h.a.g.Z();h.C.F.prototype.nodes=function(){var y=this.F;if(arguments.length==0){var B=h.a.g.get(y,E)||{},D=B.lb||(this.ab===3?y.content:this.ab===4?y:e);if(!D||B.jd){var v=this.text();v&&v!==B.bb&&(D=h.a.Md(v,y.ownerDocument),h.a.g.set(y,E,{lb:D,bb:v,jd:!0}))}return D}B=arguments[0],this.ab!==e&&this.text(""),h.a.g.set(y,E,{lb:B})},h.C.ia=function(y){this.F=y},h.C.ia.prototype=new h.C.F,h.C.ia.prototype.constructor=h.C.ia,h.C.ia.prototype.text=function(){if(arguments.length==0){var y=h.a.g.get(this.F,E)||{};return y.bb===e&&y.lb&&(y.bb=y.lb.innerHTML),y.bb}h.a.g.set(this.F,E,{bb:arguments[0]})},h.b("templateSources",h.C),h.b("templateSources.domElement",h.C.F),h.b("templateSources.anonymousTemplate",h.C.ia)})(),(function(){function u(U,k,j){var q;for(k=h.h.nextSibling(k);U&&(q=U)!==k;)U=h.h.nextSibling(q),j(q,U)}function E(U,k){if(U.length){var j=U[0],q=U[U.length-1],$=j.parentNode,H=h.ga.instance,Z=H.preprocessNode;if(Z){if(u(j,q,function(ee,Ae){var ge=ee.previousSibling,ce=Z.call(H,ee);ce&&(ee===j&&(j=ce[0]||Ae),ee===q&&(q=ce[ce.length-1]||ge))}),U.length=0,!j)return;j===q?U.push(j):(U.push(j,q),h.a.Ua(U,$))}u(j,q,function(ee){ee.nodeType!==1&&ee.nodeType!==8||h.vc(k,ee)}),u(j,q,function(ee){ee.nodeType!==1&&ee.nodeType!==8||h.aa.cd(ee,[k])}),h.a.Ua(U,$)}}function y(U){return U.nodeType?U:0<U.length?U[0]:null}function B(U,k,j,q,$){$=$||{};var H=(U&&y(U)||j||{}).ownerDocument,Z=$.templateEngine||v;if(h.kc.xd(j,Z,H),j=Z.renderTemplate(j,q,$,H),typeof j.length!="number"||0<j.length&&typeof j[0].nodeType!="number")throw Error("Template engine must return an array of DOM nodes");switch(H=!1,k){case"replaceChildren":h.h.va(U,j),H=!0;break;case"replaceNode":h.a.Xc(U,j),H=!0;break;case"ignoreTargetNode":break;default:throw Error("Unknown renderMode: "+k)}return H&&(E(j,q),$.afterRender&&h.u.G($.afterRender,null,[j,q[$.as||"$data"]]),k=="replaceChildren"&&h.i.ma(U,h.i.H)),j}function D(U,k,j){return h.O(U)?U():typeof U=="function"?U(k,j):U}var v;h.gc=function(U){if(U!=e&&!(U instanceof h.ca))throw Error("templateEngine must inherit from ko.templateEngine");v=U},h.dc=function(U,k,j,q,$){if(j=j||{},(j.templateEngine||v)==e)throw Error("Set a template engine before calling renderTemplate");if($=$||"replaceChildren",q){var H=y(q);return h.$(function(){var ee=k&&k instanceof h.fa?k:new h.fa(k,null,null,null,{exportDependencies:!0}),Z=D(U,ee.$data,ee),ee=B(q,$,Z,ee,j);$=="replaceNode"&&(q=ee,H=y(q))},null,{Sa:function(){return!H||!h.a.Sb(H)},l:H&&$=="replaceNode"?H.parentNode:H})}return h.aa.Xb(function(Z){h.dc(U,k,j,Z,"replaceNode")})},h.Qd=function(U,k,j,q,$){function H(Ie,Ne){h.u.G(h.a.ec,null,[q,Ie,ee,j,Z,Ne]),h.i.ma(q,h.i.H)}function Z(Ie,Ne){E(Ne,Ae),j.afterRender&&j.afterRender(Ne,Ie),Ae=null}function ee(Ie,Ne){Ae=$.createChildContext(Ie,{as:ge,noChildContext:j.noChildContext,extend:function(ve){ve.$index=Ne,ge&&(ve[ge+"Index"]=Ne)}});var _e=D(U,Ie,Ae);return B(q,"ignoreTargetNode",_e,Ae,j)}var Ae,ge=j.as,ce=j.includeDestroyed===!1||h.options.foreachHidesDestroyed&&!j.includeDestroyed;if(ce||j.beforeRemove||!h.Pc(k))return h.$(function(){var Ie=h.a.f(k)||[];typeof Ie.length>"u"&&(Ie=[Ie]),ce&&(Ie=h.a.jb(Ie,function(Ne){return Ne===e||Ne===null||!h.a.f(Ne._destroy)})),H(Ie)},null,{l:q});H(k.v());var he=k.subscribe(function(Ie){H(k(),Ie)},null,"arrayChange");return he.l(q),he};var F=h.a.g.Z(),P=h.a.g.Z();h.c.template={init:function(U,k){var j=h.a.f(k());if(typeof j=="string"||"name"in j)h.h.Ea(U);else if("nodes"in j){if(j=j.nodes||[],h.O(j))throw Error('The "nodes" option must be a plain, non-observable array.');var q=j[0]&&j[0].parentNode;q&&h.a.g.get(q,P)||(q=h.a.Yb(j),h.a.g.set(q,P,!0)),new h.C.ia(U).nodes(q)}else if(j=h.h.childNodes(U),0<j.length)q=h.a.Yb(j),new h.C.ia(U).nodes(q);else throw Error("Anonymous template defined, but no template content was provided");return{controlsDescendantBindings:!0}},update:function(U,k,j,q,$){var H=k();k=h.a.f(H),j=!0,q=null,typeof k=="string"?k={}:(H="name"in k?k.name:U,"if"in k&&(j=h.a.f(k.if)),j&&"ifnot"in k&&(j=!h.a.f(k.ifnot)),j&&!H&&(j=!1)),"foreach"in k?q=h.Qd(H,j&&k.foreach||[],k,U,$):j?(j=$,"data"in k&&(j=$.createChildContext(k.data,{as:k.as,noChildContext:k.noChildContext,exportDependencies:!0})),q=h.dc(H,j,k,U)):h.h.Ea(U),$=q,(k=h.a.g.get(U,F))&&typeof k.s=="function"&&k.s(),h.a.g.set(U,F,!$||$.ja&&!$.ja()?e:$)}},h.m.Ra.template=function(U){return U=h.m.ac(U),U.length==1&&U[0].unknown||h.m.Id(U,"name")?null:"This template engine does not support anonymous templates nested within its templates"},h.h.ea.template=!0})(),h.b("setTemplateEngine",h.gc),h.b("renderTemplate",h.dc),h.a.Kc=function(u,E,y){if(u.length&&E.length){var B,D,v,F,P;for(B=D=0;(!y||B<y)&&(F=u[D]);++D){for(v=0;P=E[v];++v)if(F.value===P.value){F.moved=P.index,P.moved=F.index,E.splice(v,1),B=v=0;break}B+=v}}},h.a.Pb=(function(){function u(E,y,B,D,v){var F=Math.min,P=Math.max,U=[],k,j=E.length,q,$=y.length,H=$-j||1,Z=j+$+1,ee,Ae,ge;for(k=0;k<=j;k++)for(Ae=ee,U.push(ee=[]),ge=F($,k+H),q=P(0,k-1);q<=ge;q++)ee[q]=q?k?E[k-1]===y[q-1]?Ae[q-1]:F(Ae[q]||Z,ee[q-1]||Z)+1:q+1:k+1;for(F=[],P=[],H=[],k=j,q=$;k||q;)$=U[k][q]-1,q&&$===U[k][q-1]?P.push(F[F.length]={status:B,value:y[--q],index:q}):k&&$===U[k-1][q]?H.push(F[F.length]={status:D,value:E[--k],index:k}):(--q,--k,v.sparse||F.push({status:"retained",value:y[q]}));return h.a.Kc(H,P,!v.dontLimitMoves&&10*j),F.reverse()}return function(E,y,B){return B=typeof B=="boolean"?{dontLimitMoves:B}:B||{},E=E||[],y=y||[],E.length<y.length?u(E,y,"added","deleted",B):u(y,E,"deleted","added",B)}})(),h.b("utils.compareArrays",h.a.Pb),(function(){function u(B,D,v,F,P){var U=[],k=h.$(function(){var j=D(v,P,h.a.Ua(U,B))||[];0<U.length&&(h.a.Xc(U,j),F&&h.u.G(F,null,[v,j,P])),U.length=0,h.a.Nb(U,j)},null,{l:B,Sa:function(){return!h.a.kd(U)}});return{Y:U,$:k.ja()?k:e}}var E=h.a.g.Z(),y=h.a.g.Z();h.a.ec=function(B,D,v,F,P,U){function k(Ft){_e={Aa:Ft,pb:h.ta(Ae++)},Z.push(_e),H||Ne.push(_e)}function j(Ft){_e=$[Ft],Ae!==_e.pb.v()&&Ie.push(_e),_e.pb(Ae++),h.a.Ua(_e.Y,B),Z.push(_e)}function q(Ft,pi){if(Ft)for(var Kn=0,lt=pi.length;Kn<lt;Kn++)h.a.D(pi[Kn].Y,function(Ct){Ft(Ct,Kn,pi[Kn].Aa)})}D=D||[],typeof D.length>"u"&&(D=[D]),F=F||{};var $=h.a.g.get(B,E),H=!$,Z=[],ee=0,Ae=0,ge=[],ce=[],he=[],Ie=[],Ne=[],_e,ve=0;if(H)h.a.D(D,k);else{if(!U||$&&$._countWaitingForRemove){var at=h.a.Mb($,function(Ft){return Ft.Aa});U=h.a.Pb(at,D,{dontLimitMoves:F.dontLimitMoves,sparse:!0})}for(var at=0,Tt,st,Rn;Tt=U[at];at++)switch(st=Tt.moved,Rn=Tt.index,Tt.status){case"deleted":for(;ee<Rn;)j(ee++);st===e&&(_e=$[ee],_e.$&&(_e.$.s(),_e.$=e),h.a.Ua(_e.Y,B).length&&(F.beforeRemove&&(Z.push(_e),ve++,_e.Aa===y?_e=null:he.push(_e)),_e&&ge.push.apply(ge,_e.Y))),ee++;break;case"added":for(;Ae<Rn;)j(ee++);st!==e?(ce.push(Z.length),j(st)):k(Tt.value)}for(;Ae<D.length;)j(ee++);Z._countWaitingForRemove=ve}h.a.g.set(B,E,Z),q(F.beforeMove,Ie),h.a.D(ge,F.beforeRemove?h.oa:h.removeNode);var Lt,$t,ci;try{ci=B.ownerDocument.activeElement}catch{}if(ce.length)for(;(at=ce.shift())!=e;){for(_e=Z[at],Lt=e;at;)if(($t=Z[--at].Y)&&$t.length){Lt=$t[$t.length-1];break}for(D=0;ee=_e.Y[D];Lt=ee,D++)h.h.Wb(B,ee,Lt)}for(at=0;_e=Z[at];at++){for(_e.Y||h.a.extend(_e,u(B,v,_e.Aa,P,_e.pb)),D=0;ee=_e.Y[D];Lt=ee,D++)h.h.Wb(B,ee,Lt);!_e.Ed&&P&&(P(_e.Aa,_e.Y,_e.pb),_e.Ed=!0,Lt=_e.Y[_e.Y.length-1])}for(ci&&B.ownerDocument.activeElement!=ci&&ci.focus(),q(F.beforeRemove,he),at=0;at<he.length;++at)he[at].Aa=y;q(F.afterMove,Ie),q(F.afterAdd,Ne)}})(),h.b("utils.setDomNodeChildrenFromArrayMapping",h.a.ec),h.ba=function(){this.allowTemplateRewriting=!1},h.ba.prototype=new h.ca,h.ba.prototype.constructor=h.ba,h.ba.prototype.renderTemplateSource=function(u,E,y,B){return(E=!(9>h.a.W)&&u.nodes?u.nodes():null)?h.a.la(E.cloneNode(!0).childNodes):(u=u.text(),h.a.ua(u,B))},h.ba.Ma=new h.ba,h.gc(h.ba.Ma),h.b("nativeTemplateEngine",h.ba),(function(){h.$a=function(){var E=this.Hd=(function(){if(!o||!o.tmpl)return 0;try{if(0<=o.tmpl.tag.tmpl.open.toString().indexOf("__"))return 2}catch{}return 1})();this.renderTemplateSource=function(y,B,D,v){if(v=v||n,D=D||{},2>E)throw Error("Your version of jQuery.tmpl is too old. Please upgrade to jQuery.tmpl 1.0.0pre or later.");var F=y.data("precompiled");return F||(F=y.text()||"",F=o.template(null,"{{ko_with $item.koBindingContext}}"+F+"{{/ko_with}}"),y.data("precompiled",F)),y=[B.$data],B=o.extend({koBindingContext:B},D.templateOptions),B=o.tmpl(F,y,B),B.appendTo(v.createElement("div")),o.fragments={},B},this.createJavaScriptEvaluatorBlock=function(y){return"{{ko_code ((function() { return "+y+" })()) }}"},this.addTemplate=function(y,B){n.write("<script type='text/html' id='"+y+"'>"+B+"</script>")},0<E&&(o.tmpl.tag.ko_code={open:"__.push($1 || '');"},o.tmpl.tag.ko_with={open:"with($1) {",close:"} "})},h.$a.prototype=new h.ca,h.$a.prototype.constructor=h.$a;var u=new h.$a;0<u.Hd&&h.gc(u),h.b("jqueryTmplTemplateEngine",h.$a)})()})})()})()})();var txe=ko;typeof window<"u"?(ko=window.ko,typeof JC<"u"?window.ko=JC:delete window.ko):(ko=global.ko,typeof JC<"u"?global.ko=JC:delete global.ko);var Jm=txe;/**
 * @license
 * Knockout ES5 plugin - https://github.com/SteveSanderson/knockout-es5
 * Copyright (c) Steve Sanderson
 * MIT license
 */var rD="__knockoutObservables",aD="__knockoutSubscribable";function Bj(e,t){if(!e)throw new Error("When calling ko.track, you must pass an object as the first parameter.");var n=this,i=xj(e,!0);return t=t||Object.getOwnPropertyNames(e),t.forEach(function(o){if(!(o===rD||o===aD)&&!(o in i)){var r=e[o],a=r instanceof Array,s=n.isObservable(r)?r:a?n.observableArray(r):n.observable(r);Object.defineProperty(e,o,{configurable:!0,enumerable:!0,get:s,set:n.isWriteableObservable(s)?s:void 0}),i[o]=s,a&&ixe(n,s)}}),e}function xj(e,t){var n=e[rD];return!n&&t&&(n={},Object.defineProperty(e,rD,{value:n})),n}function nxe(e,t,n){var i=this,o={owner:e,deferEvaluation:!0};if(typeof n=="function")o.read=n;else{if("value"in n)throw new Error('For ko.defineProperty, you must not specify a "value" for the property. You must provide a "get" function.');if(typeof n.get!="function")throw new Error('For ko.defineProperty, the third parameter must be either an evaluator function, or an options object containing a function called "get".');o.read=n.get,o.write=n.set}return e[t]=i.computed(o),Bj.call(i,e,[t]),e}function ixe(e,t){var n=null;e.computed(function(){n&&(n.dispose(),n=null);var i=t();i instanceof Array&&(n=oxe(e,t,i))})}function oxe(e,t,n){var i=rxe(e,n);return i.subscribe(t)}function rxe(e,t){var n=t[aD];if(!n){n=new e.subscribable,Object.defineProperty(t,aD,{value:n});var i={};axe(t,n,i),sxe(e,t,n,i)}return n}function axe(e,t,n){["pop","push","reverse","shift","sort","splice","unshift"].forEach(function(i){var o=e[i];e[i]=function(){var r=o.apply(this,arguments);return n.pause!==!0&&t.notifySubscribers(this),r}})}function sxe(e,t,n,i){["remove","removeAll","destroy","destroyAll","replace"].forEach(function(o){Object.defineProperty(t,o,{enumerable:!1,value:function(){var r;i.pause=!0;try{r=e.observableArray.fn[o].apply(e.observableArray(t),arguments)}finally{i.pause=!1}return n.notifySubscribers(t),r}})})}function Tj(e,t){if(!e)return null;var n=xj(e,!1);return n&&n[t]||null}function cxe(e,t){var n=Tj(e,t);n&&n.valueHasMutated()}function Axe(e){e.track=Bj,e.getObservable=Tj,e.valueHasMutated=cxe,e.defineProperty=nxe}var hb={attachToKo:Axe};hb.attachToKo(Jm);tE.register(Jm);var Hi=Jm;function Pa(e){this.selectedMeasurement=void 0,this._sseh=new Wd(e.canvas),this._scene=e}Object.defineProperties(Pa.prototype,{scene:{get:function(){return this._scene}}});Pa.prototype.activate=function(){let e=this._sseh;e.setInputAction(this._click.bind(this),Gt.LEFT_CLICK),e.setInputAction(this._clickShift.bind(this),Gt.LEFT_CLICK,VA.SHIFT),e.setInputAction(this._mouseMove.bind(this),Gt.MOUSE_MOVE),e.setInputAction(this._mouseMoveShift.bind(this),Gt.MOUSE_MOVE,VA.SHIFT),e.setInputAction(this._handleLeftDown.bind(this),Gt.LEFT_DOWN),e.setInputAction(this._handleLeftUp.bind(this),Gt.LEFT_UP),e.setInputAction(this._handleDoubleClick.bind(this),Gt.LEFT_DOUBLE_CLICK)};Pa.prototype.deactivate=function(){let e=this._sseh;e.removeInputAction(Gt.LEFT_CLICK),e.removeInputAction(Gt.LEFT_CLICK,VA.SHIFT),e.removeInputAction(Gt.MOUSE_MOVE),e.removeInputAction(Gt.MOUSE_MOVE,VA.SHIFT),e.removeInputAction(Gt.LEFT_DOWN),e.removeInputAction(Gt.LEFT_UP),e.removeInputAction(Gt.LEFT_DOUBLE_CLICK)};Pa.prototype._handleDoubleClick=function(e){this.selectedMeasurement.handleDoubleClick(e.position);let t=this._scene;t.requestRenderMode&&t.requestRender()};Pa.prototype._handleClick=function(e,t){this.selectedMeasurement.handleClick(e.position,t);let n=this._scene;n.requestRenderMode&&n.requestRender()};Pa.prototype._clickShift=function(e){this._handleClick(e,!0)};Pa.prototype._click=function(e){this._handleClick(e,!1)};Pa.prototype._handleMouseMove=function(e,t){this.selectedMeasurement.handleMouseMove(e.endPosition,t);let n=this._scene;n.requestRenderMode&&n.requestRender()};Pa.prototype._mouseMove=function(e){this._handleMouseMove(e,!1)};Pa.prototype._mouseMoveShift=function(e){this._handleMouseMove(e,!0)};Pa.prototype._handleLeftDown=function(e){this.selectedMeasurement.handleLeftDown(e.position);let t=this._scene;t.requestRenderMode&&t.requestRender()};Pa.prototype._handleLeftUp=function(e){this.selectedMeasurement.handleLeftUp(e.position);let t=this._scene;t.requestRenderMode&&t.requestRender()};Pa.prototype.isDestroyed=function(){return!1};Pa.prototype.destroy=function(){return this.deactivate(),this._sseh.destroy(),me(this)};var mb=Pa;var lxe=new f,uxe=new f,fxe=new f,pb=[new L,new L,new L,new L],KC=[new f,new f,new f,new f,new f];function Zd(e,t){$n.defined("scene",e),$n.defined("windowCoordinates",t);let n=Zd._getWorldPosition(e,t,po,lxe);if(!c(n))return;let i=1e4,o=2,r=.05,a=e.camera.position,s=f.distance(n,a);if(s>i)return;let A=KC[0],l=KC[1],d=KC[2],m=KC[3],p=e.frameState.mapProjection.ellipsoid.geodeticSurfaceNormal(n,uxe);p=f.negate(p,p);let g=L.clone(t,pb[0]);g.x-=o,g.y-=o;let h=L.clone(t,pb[1]);h.x-=o,h.y+=o;let C=L.clone(t,pb[2]);C.x+=o,C.y+=o;let _=L.clone(t,pb[3]);_.x+=o,_.y-=o;let I=Zd._getWorldPosition(e,g,po,A),b=Zd._getWorldPosition(e,h,po,l),x=Zd._getWorldPosition(e,C,po,d),T=Zd._getWorldPosition(e,_,po,m),w,R,z,M;if(c(I)){let u=f.subtract(I,n,A);w=f.magnitude(u)/s<=r?f.normalize(u,A):void 0}if(c(b)){let u=f.subtract(b,n,l);R=f.magnitude(u)/s<=r?f.normalize(u,l):void 0}if(c(x)){let u=f.subtract(x,n,d);z=f.magnitude(u)/s<=r?f.normalize(u,d):void 0}if(c(T)){let u=f.subtract(T,n,m);M=f.magnitude(u)/s<=r?f.normalize(u,m):void 0}let N=f.clone(f.ZERO,fxe),O=KC[4];if(c(w)&&c(R)&&(O=f.normalize(f.cross(w,R,O),O),N=f.add(N,O,N)),c(R)&&c(z)&&(O=f.normalize(f.cross(R,z,O),O),N=f.add(N,O,N)),c(z)&&c(M)&&(O=f.normalize(f.cross(z,M,O),O),N=f.add(N,O,N)),c(M)&&c(w)&&(O=f.normalize(f.cross(M,w,O),O),N=f.add(N,O,N)),!N.equals(f.ZERO))return N=f.normalize(N,N),S.asinClamped(Math.abs(Math.sin(f.angleBetween(N,p))))}Zd._getWorldPosition=ca;var gb=Zd;var dxe=new f,wj=new ue;function Sj(e){return`<svg viewBox="0 0 30 30" height="${e}px" width="${e}px">
                 <g transform="translate(0,-267)">
                   <circle r="2.0788691" cy="281.90503" cx="15.212251"/>
                 </g>
               </svg>`}function Na(e){e=e??G.EMPTY_OBJECT,go.call(this,e),this._point=this._pointCollection.add(_n.getPointOptions()),this._label=this._labelCollection.add(_n.getLabelOptions({horizontalOrigin:Zt.LEFT,verticalOrigin:qt.CENTER,pixelOffset:new L(10,0)})),this._position=new f,this._height=0,this._slope=0}Na.prototype=Object.create(go.prototype);Na.prototype.constructor=Na;Object.defineProperties(Na.prototype,{position:{get:function(){return this._position}},height:{get:function(){return this._height}},slope:{get:function(){return this._slope}},icon:{value:Sj(15)},thumbnail:{value:Sj(25)},type:{value:"Point coordinates"},instructions:{value:["Move the mouse to see the longitude, latitude and height of the point"]},id:{value:"pointMeasurement"}});Na.prototype._pickPositionSupported=function(){return this._scene.pickPositionSupported};Na.prototype.handleMouseMove=function(e){let t=this._scene;if(this.reset(),t.mode===Ee.MORPHING)return;this._point.show=!1;let n=Na._getWorldPosition(t,e,po,dxe);if(!c(n))return;this._point.position=n;let i=t.frameState.mapProjection.ellipsoid.cartesianToCartographic(n,wj),o=0;c(t.globe)&&(o=t.globe.getHeight(i)??0),o=i.height-o,S.equalsEpsilon(o,0,S.EPSILON3)&&(o=0);let r;t.mode!==Ee.SCENE2D&&(r=Na._getSlope(t,e,this._primitives)),this._point.show=!0;let a=this._label;a.position=n,a.show=!0,this._position=f.clone(n,this._position),this._height=o,this._slope=r,this._refreshLabels()};Na.prototype._refreshLabels=function(){let e=this._scene,t=this._label,n=e.frameState.mapProjection.ellipsoid.cartesianToCartographic(this._position,wj);t.text=`lon: ${Jn.angleToString(n.longitude,Gi.DEGREES_MINUTES_SECONDS,this._selectedLocale)}
lat: ${Jn.angleToString(n.latitude,Gi.DEGREES_MINUTES_SECONDS,this._selectedLocale)}`,e.mode!==Ee.SCENE2D&&this._pickPositionSupported()&&(t.text+=`
height: ${Jn.distanceToString(this._height,this._selectedUnits.distanceUnits,this._selectedLocale)}`,c(this._slope)&&(t.text+=`
slope: ${Jn.angleToString(this._slope,this._selectedUnits.slopeUnits,this._selectedLocale,3)}`))};Na.prototype.reset=function(){this._label.show=!1,this._point.show=!1,this._position=f.clone(f.ZERO,this._position)};Na.prototype.isDestroyed=function(){return!1};Na.prototype.destroy=function(){return this._labelCollection.remove(this._label),this._pointCollection.remove(this._point),me(this)};Na._getSlope=gb;Na._getWorldPosition=ca;var Cb=Na;var hxe=new L,mxe=new L,Dj=new L,pxe=new f;function xc(e){e=e??G.EMPTY_OBJECT,e.polylineOptions=_n.getPolylineOptions({ellipsoid:e.ellipsoid}),e.pointOptions=_n.getPointOptions(),Ma.call(this,e);let t=this._scene,n=e.labels;this._labelCollection=n,this._label=n.add(_n.getLabelOptions()),this._segmentLabels=[],this._segmentDistances=[],this._selectedUnits=e.units,this._selectedLocale=e.locale,this._previousDistance=0,this._distance=0;let i=this;this._removeEvent=t.preRender.addEventListener(function(){i.updateLabel()})}xc.prototype=Object.create(Ma.prototype);xc.prototype.constructor=xc;Object.defineProperties(xc.prototype,{distance:{get:function(){return this._distance}}});xc.prototype.updateLabel=function(){let e=this._positions;if(e.length<2)return;let t=this._scene,n=e[0],i=Fn.worldToWindowCoordinates(t,n,hxe),o=c(i)?L.clone(i,Dj):L.fromElements(Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Dj),r=o.y,a=this._segmentLabels;a[0].show=this._polyline.positions.length>2;for(let s=1;s<e.length;s++){let A=Fn.worldToWindowCoordinates(t,e[s],mxe);if(!c(A))continue;let l=(o.y-A.y)/(A.x-o.x),d=a[s-1];l>0?d.horizontalOrigin=Zt.LEFT:d.horizontalOrigin=Zt.RIGHT,A.y<r&&(r=A.y,n=e[s]),o=L.clone(A,o)}this._mode===Ii.AfterDraw&&(this._label.position=n)};xc.prototype.addPoint=function(e){let t=this._positions;if(t.length>0){this._previousDistance=this._distance;let n=this._labelCollection.add(_n.getLabelOptions({scale:.8,horizontalOrigin:Zt.LEFT,verticalOrigin:qt.TOP,pixelOffset:new L(5,5)})),i=t[t.length-1],o=f.distance(i,e);n.position=f.midpoint(i,e,new f),n.text=Jn.distanceToString(o,this._selectedUnits.distanceUnits,this._selectedLocale),n.show=!0,this._segmentDistances.push(o),this._segmentLabels.push(n)}Ma.prototype.addPoint.call(this,e)};xc.prototype.handleClick=function(e){this._mode===Ii.AfterDraw&&this.reset();let t=Ma.prototype.handleClick.call(this,e);c(t)&&(this._label.show=!0,this._polyline.show=!0)};xc.prototype.handleMouseMove=function(e){let t=Ma.prototype.handleMouseMove.call(this,e);if(!c(t))return;let n=this._positions[this._positions.length-1],i=t,o=f.subtract(i,n,pxe),r=this._previousDistance+f.magnitude(o),a=this._label;a.position=i,a.text=Jn.distanceToString(r,this._selectedUnits.distanceUnits,this._selectedLocale),a.show=!0,this._distance=r};xc.prototype._refreshLabels=function(){let e=this._label;e.text=Jn.distanceToString(this._distance,this._selectedUnits.distanceUnits,this._selectedLocale);let t=this._segmentLabels;for(let n=0;n<t.length;n++)t[n].text=Jn.distanceToString(this._segmentDistances[n],this._selectedUnits.distanceUnits,this._selectedLocale)};xc.prototype.reset=function(){this._label.show=!1,this._label.text="",this._positions=[],this._polyline.positions=[],this._polyline.show=!1,this._previousDistance=0,this._distance=0;let e,t=this._points,n=this._pointCollection;for(e=0;e<t.length;e++)n.remove(t[e]);t.length=0;let i=this._labelCollection,o=this._segmentLabels,r=this._segmentDistances;for(e=0;e<o.length;e++)i.remove(o[e]);o.length=0,r.length=0,this._mode=Ii.BeforeDraw,this._lastClickPosition.x=Number.POSITIVE_INFINITY,this._lastClickPosition.y=Number.POSITIVE_INFINITY};xc.prototype.destroy=function(){this._removeEvent();let e=this._labelCollection;e.remove(this._label);let t=this._segmentLabels;for(let n=0;n<t.length;n++)e.remove(t[n]);Ma.prototype.destroy.call(this)};var Eb=xc;function Qj(e){return`<svg viewBox="0 0 30 30" height="${e}px" width="${e}px">
                  <g transform="translate(0,-267)">
                   <circle cx="3.8532958" cy="293.99896" r="2.0788691" />
                   <circle cx="7.2651663" cy="276.26389" r="2.0788691" />
                   <circle cx="24.571842" cy="285.56577" r="2.0788691" />
                   <circle cx="26.916754" cy="270.38345" r="2.0788691" />
                   <path d="m 3.7523356,294.14823 3.602242,-17.81109 17.3608064,9.35582 2.401494,-15.00934" />
                 </g>
               </svg>`}function Tc(e){e=e??G.EMPTY_OBJECT,go.call(this,e),this._drawing=new Eb(e)}Tc.prototype=Object.create(go.prototype);Tc.prototype.constructor=Tc;Object.defineProperties(Tc.prototype,{distance:{get:function(){return this._drawing.distance}},icon:{value:Qj(15)},thumbnail:{value:Qj(25)},type:{value:"Polyline Distance"},instructions:{value:["Click to start drawing a polyline","Keep clicking to add more points","Double click to finish drawing"]},id:{value:"polylineMeasurement"}});Tc.prototype._refreshLabels=function(){this._drawing._refreshLabels()};Tc.prototype.handleDoubleClick=function(){this._drawing.handleDoubleClick()};Tc.prototype.handleClick=function(e){this._drawing.handleClick(e)};Tc.prototype.handleMouseMove=function(e){this._drawing.handleMouseMove(e)};Tc.prototype.reset=function(){this._drawing.reset()};Tc.prototype.isDestroyed=function(){return!1};Tc.prototype.destroy=function(){return this._drawing.destroy(),me(this)};var _b=Tc;var uu={BeforeDraw:0,Drawing:1,AfterDraw:2},Pj=new f,gxe=new L,Rj=new f,Km=new f,Cxe=new ai,Exe=new f,vj=new ue;function Mj(e){return`<svg viewBox="0 0 30 30" height="${e}px" width="${e}px">
                 <g transform="translate(0,-267)">
                   <path d="m 15.042838,272.34414 -0.0497,18.93758"/>
                   <circle r="2.0788691" cy="270.01154" cx="15.078616"/>
                   <circle r="2.0788691" cy="293.97095" cx="15.092237"/>
                 </g>
               </svg>`}function _xe(e,t){let n=e._positions,i=n[0],o=n[1],r=e._draggingPlane,a=e._surfaceNormal,s=e._scene,A=s.camera,l=A.direction,d=s.frameState.mapProjection.ellipsoid,m=i,p=a;if(s.mode===Ee.COLUMBUS_VIEW){p=f.UNIT_X;let _=d.cartesianToCartographic(i,vj);m=s.mapProjection.project(_,Pj),f.fromElements(m.z,m.x,m.y,m)}let g=f.cross(p,l,Rj);g=f.cross(p,g,g),g=f.normalize(g,g),r=Ze.fromPointNormal(m,g,r);let h=A.getPickRay(t,Cxe);if(o=en.rayPlane(h,r,o),!c(o))return;if(s.mode===Ee.COLUMBUS_VIEW){o=f.fromElements(o.y,o.z,o.x,o);let _=s.mapProjection.unproject(o,vj);o=d.cartographicToCartesian(_,o)}return Fn.worldToWindowCoordinates(s,n[0],gxe).y<t.y&&(a=f.negate(a,Rj)),Km=f.subtract(o,i,Km),Km=f.projectVector(Km,a,Km),o=f.add(i,Km,o),o}function La(e){e=e??G.EMPTY_OBJECT,go.call(this,e);let t=this._pointCollection,n=[new f,new f];this._startPoint=t.add(_n.getPointOptions()),this._endPoint=t.add(_n.getPointOptions()),this._positions=n,this._polyline=this._primitives.add(new zr(_n.getPolylineOptions({ellipsoid:this._scene.frameState.mapProjection.ellipsoid,positions:n}))),this._label=this._labelCollection.add(_n.getLabelOptions({horizontalOrigin:Zt.LEFT,verticalOrigin:qt.TOP,pixelOffset:new L(10,10)})),this._mode=uu.BeforeDraw,this._draggingPlane=new Ze(f.UNIT_X,0),this._surfaceNormal=new f,this._distance=0}La.prototype=Object.create(go.prototype);La.prototype.constructor=La;Object.defineProperties(La.prototype,{distance:{get:function(){return this._distance}},type:{value:"Vertical distance"},icon:{value:Mj(15)},thumbnail:{value:Mj(25)},instructions:{value:["Click on the point cloud or the globe to set the start point","Move the mouse to drag the line","Click again to set the end point","To make a new measurement, click to clear the previous measurement"]},id:{value:"verticalMeasurement"}});La.prototype.handleClick=function(e){let t=this._scene,n=t.frameState.mapProjection.ellipsoid;this._mode===uu.AfterDraw&&this.reset();let i=this._mode,o=this._positions;if(i===uu.BeforeDraw){let r=La._getWorldPosition(t,e,po,o[0]);if(!c(r))return;this._polyline.show=!0,o[0]=f.clone(r,o[0]),o[1]=f.clone(r,o[1]),this._startPoint.position=r,this._startPoint.show=!0,this._mode=uu.Drawing,this._polyline.positions=o,this._surfaceNormal=n.geodeticSurfaceNormal(r,this._surfaceNormal)}else i===uu.Drawing&&(this._endPoint.position=o[1],this._endPoint.show=!0,this._mode=uu.AfterDraw)};La.prototype.handleMouseMove=function(e){if(this._mode!==uu.Drawing)return;let t=this._label;if(this._scene.mode===Ee.SCENE2D){t.position=this._positions[0],t.text=Jn.distanceToString(0,this._selectedUnits.distanceUnits,this._selectedLocale),t.show=!0,this._mode=uu.AfterDraw;return}let n=La._getHeightPosition(this,e);if(!c(n))return;let i=this._positions,o=i[0],r=i[1],a=f.subtract(r,o,Pj),s=f.magnitude(a);t.position=f.midpoint(o,r,Exe),t.show=!0,this._polyline.positions=i,this._distance=s,this._refreshLabels()};La.prototype._refreshLabels=function(){let e=this._label;e.text=Jn.distanceToString(this._distance,this._selectedUnits.distanceUnits,this._selectedLocale)};La.prototype.reset=function(){this._polyline.show=!1,this._label.show=!1,this._startPoint.show=!1,this._endPoint.show=!1,this._mode=uu.BeforeDraw,this._distance=0};La.prototype.isDestroyed=function(){return!1};La.prototype.destroy=function(){this._primitives.remove(this._polyline);let e=this._pointCollection;return e.remove(this._startPoint),e.remove(this._endPoint),this._labelCollection.remove(this._label),me(this)};La._getWorldPosition=ca;La._getHeightPosition=_xe;var Ib=La;function sA(e){e=e??G.EMPTY_OBJECT;let t=e.scene,n=c(e.units)?e.units:new Jn,i=c(e.primitives)?e.primitives:t.primitives.add(new Bf),o=i.add(new ou),r=i.add(new vd),a=new mb(t),s={scene:t,units:n,locale:e.locale,points:o,labels:r,primitives:i},A=Re(s);A.showComponentLines=!0;let l=[new qC(s),new qC(A),new _b(s),new db(s),new Ib(s),new ub(s),new lb(s),new Cb(s)];this.expanded=!1;let d=Hi.observable(!1);Hi.defineProperty(this,"expanded",{get:function(){return d()},set:function(p){p!==d()&&(d(p),p?this._activate():this._deactivate())}}),this.instructionsVisible=!1,this.selectedMeasurement=void 0;let m=Hi.observable();Hi.defineProperty(this,"selectedMeasurement",{get:function(){return m()},set:function(p){let g=m();c(g)&&g.reset(),m(p),a.selectedMeasurement=p,t.requestRenderMode&&t.requestRender()}}),Hi.track(this,["expanded","instructionsVisible"]),this._measurements=l,this._units=n,this._mouseHandler=a,this._primitives=i,this._scene=t,this._removeListener=t.morphStart.addEventListener(sA.prototype.onMorph,this)}Object.defineProperties(sA.prototype,{scene:{get:function(){return this._scene}},measurements:{get:function(){return this._measurements}},units:{get:function(){return this._units},set:function(e){this._units=e,this.selectedMeasurement.selectedUnits=e}}});sA.prototype.toggleActive=function(){this.expanded=!this.expanded};sA.prototype.toggleInstructions=function(){this.instructionsVisible=!this.instructionsVisible};sA.prototype._activate=function(){this._mouseHandler.activate(),this.selectedMeasurement=this._measurements[0]};sA.prototype._deactivate=function(){this._mouseHandler.deactivate(),this.selectedMeasurement=void 0,this.reset()};sA.prototype.onMorph=function(e,t,n,i){this.reset()};sA.prototype.reset=function(){this.instructionsVisible=!1,this._measurements.forEach(function(e){e.reset()})};sA.prototype.isDestroyed=function(){return!1};sA.prototype.destroy=function(){return this._deactivate(),this._mouseHandler.destroy(),this._measurements.forEach(function(e){e.destroy()}),this._scene.primitives.remove(this._primitives),me(this)};var yb=sA;var Ixe=`<div class="cesium-measure-toolbar" data-bind="css: {expanded: expanded}">
                   <div class="cesium-measure-button cesium-measure-button-main" data-bind="click: toggleActive, attr: {title: expanded ? 'Collapse' : 'Expand'}">
                       <svg width="25px" height="25px" viewBox="0 0 30 30">                          <path d="M 14.851122,11.545456 25.578177,0.95157924 29.306163,4.6249483 18.537701,15.246448 M 15.097088,18.640104 4.1531358,29.434698 0.62547531,25.653101 11.515909,14.853004"/>                          <path d="M 22.983411,26.662767 0.8350882,3.9632787 4.2110211,0.77972226 26.222602,23.217308 Z"/>                          <path d="m 23.126668,26.856584 5.906658,2.311965 -2.630951,-5.79394"/>                          <path d="M 3.8120758,6.6472825 7.2277612,3.4338416"/>                          <path d="M 5.2416124,27.76234 3.6377555,26.08552"/>                          <path d="M 7.0148521,26.015847 5.4109952,24.339027"/>                          <path d="M 8.9787697,24.078675 7.3749129,22.401855"/>                          <path d="M 10.974467,22.173284 9.3706099,20.496464"/>                          <path d="m 12.990856,20.120081 -1.603857,-1.67682"/>                          <path d="m 19.676091,13.638423 -1.603857,-1.67682"/>                          <path d="M 21.449331,11.89193 19.845474,10.21511"/>                          <path d="M 23.413248,9.9547586 21.809392,8.2779376"/>                          <path d="M 25.448671,7.9858073 23.805089,6.3725466"/>                          <path d="M 27.425335,5.9961636 25.765864,4.3670131"/>                    </svg>               </div>
                   <!-- ko foreach: measurements -->
                   <div class="cesium-measure-button" data-bind="click: function($data) { $parent.selectedMeasurement = $data; }, attr: {title: type}, css: {active: $data === $parent.selectedMeasurement}, html: thumbnail"></div>
                   <!-- /ko -->
                   <div class="cesium-measure-button cesium-measure-help" title="Settings and Help" data-bind="click: toggleInstructions, css: {active: instructionsVisible}">
                       <svg width="20px" height="20px" viewBox="0 0 30 30">                            <g transform="translate(0,-267)">                            <g>                            <path d="M 16.891904,289.31984 H 11.7387 q -0.02021,-1.11147 -0.02021,-1.35398 0,-2.50587 0.828554,-4.12256 0.828555,-1.61669 3.314218,-3.63756 2.485663,-2.02086 2.970671,-2.64733 0.747719,-0.99022 0.747719,-2.18253 0,-1.65711 -1.33377,-2.82921 -1.313562,-1.19231 -3.556721,-1.19231 -2.162325,0 -3.617348,1.23273 -1.4550219,1.23272 -2.0006553,3.7588 l -5.2138301,-0.64667 q 0.2222951,-3.61735 3.0717138,-6.14343 2.8696274,-2.52608 7.5176156,-2.52608 4.890492,0 7.780328,2.5665 2.889836,2.54629 2.889836,5.94134 0,1.8794 -1.071058,3.55672 -1.05085,1.67732 -4.526737,4.56715 -1.798569,1.49544 -2.243159,2.40483 -0.424381,0.90939 -0.383964,3.25359 z m -5.153204,7.63887 v -5.67863 h 5.678629 v 5.67863 z" />                            </g>                            </g>                        </svg>                   </div>
               </div>
               <div class="cesium-measure-instructions" data-bind="visible: instructionsVisible">
                   <!-- ko foreach: measurements -->
                   <div><div class="cesium-measure-icon" data-bind="html: icon" style="display: inline"></div><span data-bind="text: type"></span></div>
                   <ul data-bind="foreach: instructions">
                       <li data-bind="text: $data"></li>
                   </ul>
                   <hr>
                   <!-- /ko -->
               </div>`;function bb(e){e=e??G.EMPTY_OBJECT;let t=e.container,n=Wm(Ixe);t=GC(t),n=t.appendChild(n);let i=new yb(e);Hi.applyBindings(i,t),this._viewModel=i,this._container=t,this._element=n,this._dropdown=n.getElementsByClassName("cesium-measure-instructions")[0]}Object.defineProperties(bb.prototype,{container:{get:function(){return this._container}},viewModel:{get:function(){return this._viewModel}},tilesetMeasurementSupported:{get:function(){return this._scene.pickPositionSupported}}});bb.prototype.isDestroyed=function(){return!1};bb.prototype.destroy=function(){return this._viewModel.destroy(),Hi.cleanNode(this._container),this._container.removeChild(this._element),me(this)};var Bb=bb;function XC(e){this.show=e.show??!0,this.id=e.id;let t=e.positions;e.loop&&(t=t.slice(),t.push(t[0]));let n=e.arrow??!1;this._width=c(e.width)?e.width:n?25:8,this._color=e.color,this._depthFailColor=e.color.withAlpha(.3),this._positions=t,this._arrow=n,this._depthFail=e.depthFail??!0,this._primitive=void 0,this._boundingSphere=le.fromPoints(t),this._transformedBoundingSphere=le.clone(this._boundingSphere),this._modelMatrix=Q.clone(Q.IDENTITY),this._update=!0}Object.defineProperties(XC.prototype,{modelMatrix:{get:function(){return this._modelMatrix},set:function(e){Q.equalsEpsilon(e,this._modelMatrix,S.EPSILON10)||(this._modelMatrix=Q.clone(e,this._modelMatrix),this._update=!0)}},positions:{get:function(){return this._positions},set:function(e){this._positions=e,this._update=!0}},color:{get:function(){return this._color}},width:{get:function(){return this._width}},boundingVolume:{get:function(){return this._transformedBoundingSphere}}});XC.prototype.update=function(e){if(this.show){if(this._update){this._update=!1,this._primitive=this._primitive&&this._primitive.destroy();let t=new zC({positions:this._positions,width:this._width,vertexFormat:Oc.VERTEX_FORMAT,arcType:ti.NONE}),n,i;this._arrow?(n=new Oc({material:Ci.fromType(Ci.PolylineArrowType,{color:this._color})}),this._depthFail&&(i=new Oc({material:Ci.fromType(Ci.PolylineArrowType,{color:this._depthFailColor})}))):(n=new Cl({translucent:this._color.alpha!==1}),this._depthFail&&(i=new Cl({translucent:this._depthFailColor.alpha!==1})));let o=this._modelMatrix;this._primitive=new cn({geometryInstances:new tn({geometry:t,attributes:{color:In.fromColor(this._color),depthFailColor:In.fromColor(this._depthFailColor)},id:this.id,modelMatrix:o}),appearance:n,depthFailAppearance:i,asynchronous:!1}),this._transformedBoundingSphere=le.transform(this._boundingSphere,o,this._transformedBoundingSphere)}this._primitive.update(e)}};XC.prototype.isDestroyed=function(){return!1};XC.prototype.destroy=function(){return this._primitive=this._primitive&&this._primitive.destroy(),me(this)};var JA=XC;var yxe={TRANSLATION:"translation",ROTATION:"rotation",SCALE:"scale"},KA=Object.freeze(yxe);var bxe=new f(1,1,1),Bxe=new Q,xxe=new f;function Txe(e,t,n){let i=Q.getScale(e,xxe),o=Q.setScale(e,bxe,Bxe);return Q.multiplyByPoint(o,f.multiplyComponents(t,i,n),n)}var cA=Txe;var $d={X:"X",Y:"Y",Z:"Z"};$d.getValue=function(e){return e===$d.X?f.UNIT_X:e===$d.Y?f.UNIT_Y:f.UNIT_Z};$d.getColor=function(e){return e===$d.X?J.RED:e===$d.Y?J.GREEN:J.BLUE};var On=Object.freeze($d);var Oj=new f(1,1,1),Nj=new f,Sxe=new f,wxe=new f,Dxe=new Q,Qxe=new Q,Rxe=new f,vxe=new f,cD=new L,kj=new L,Mxe=new us,Uj=new ai,Pxe=new f,Nxe=new gt,Lxe=new ne,Lj=100,Fj=1/0;function Fxe(){let e=[],t=[],n=[];for(let i=0;i<360;i++){let o=S.toRadians(i),r=Math.cos(o),a=Math.sin(o);e.push(new f(0,r,a)),t.push(new f(a,0,r)),n.push(new f(r,a,0))}return{x:e,y:t,z:n}}function zj(e,t,n,i,o){let r=Q.inverse(e,Qxe),a=Q.multiplyByPoint(r,i,Rxe),s=Q.multiplyByPoint(r,o,vxe);a=f.subtract(a,t,a),s=f.subtract(s,t,s);let A=cD,l=kj;n.x?(A.x=a.y,A.y=a.z,l.x=s.y,l.y=s.z):n.y?(A.x=-a.x,A.y=a.z,l.x=-s.x,l.y=s.z):(A.x=a.x,A.y=a.y,l.x=s.x,l.y=s.y);let d=A.x*l.y-A.y*l.x>=0,m=L.angleBetween(A,l);return d||(m=-m),m}function sD(e,t){return new JA({positions:e,color:On.getColor(t),loop:!0,show:!1,id:t})}function fu(e){e=e??G.EMPTY_OBJECT;let t=e.scene;this._vectorLine1=t.primitives.add(new JA({width:5,positions:[new f,new f],color:J.YELLOW,show:!1})),this._vectorLine2=t.primitives.add(new JA({width:5,positions:[new f,new f],color:J.YELLOW,show:!1}));let n=Fxe();this._polylineX=t.primitives.add(sD(n.x,On.X)),this._polylineY=t.primitives.add(sD(n.y,On.Y)),this._polylineZ=t.primitives.add(sD(n.z,On.Z)),this._modelMatrix=Q.clone(Q.IDENTITY),this.originOffset=e.originOffset,this._scene=t,this._setHPRCallback=e.setHeadingPitchRoll,this._setPositionCallback=e.setPosition,this._transform=e.transform,this._radius=e.radius,this._active=!1,this._dragging=!1,this._startTransform=new Q,this._startRotation=new ne,this._widgetOrigin=new f,this._modelOrigin=new f,this._rotationAxis=void 0,this._rotationPlane=new Ze(f.UNIT_X,0),this._rotationStartPoint=new f,this._pixelSize=c(e.pixelSize)?new L(e.pixelSize,e.pixelSize):new L(Lj,Lj),this._maximumSizeInMeters=c(e.maximumSizeInMeters)?new L(e.maximumSizeInMeters,e.maximumSizeInMeters):new L(Fj,Fj),this.update()}Object.defineProperties(fu.prototype,{active:{get:function(){return this._active},set:function(e){this._active=e,e?(this._polylineX.show=!0,this._polylineY.show=!0,this._polylineZ.show=!0):(this._polylineX.show=!1,this._polylineY.show=!1,this._polylineZ.show=!1,this._dragging=!1)}},pixelSize:{get:function(){return this._pixelSize.x}},maximumSizeInMeters:{get:function(){return this._maximumSizeInMeters.x}}});fu.prototype.update=function(){let e=this._transform,t=this._modelMatrix;t=Q.setScale(e,Oj,t);let n=cA(e,this.originOffset,Sxe);t=Q.setTranslation(t,n,t);let i=this._radius*Q.getMaximumScale(this._transform)*1.25;t=Q.multiplyByUniformScale(t,i,t),this._pixelSize.x>0&&(t=oA(this._pixelSize,this._maximumSizeInMeters,this._scene.frameState,t,t)),this._polylineX.modelMatrix=t,this._polylineY.modelMatrix=t,this._polylineZ.modelMatrix=t};fu.prototype.handleLeftDown=function(e){let t=this._scene,n=t.drillPick(e),i;for(let p=0;p<n.length;p++){let g=n[p];if(c(g.id)&&c(On[g.id])){i=g.id;break}}if(!c(i))return;let o=On.getValue(i),r=Q.setScale(this._transform,Oj,this._startTransform);this._startRotation=Q.getMatrix3(r,this._startRotation);let a=Q.getTranslation(r,this._modelOrigin),s=cA(this._transform,this.originOffset,this._widgetOrigin),A=Q.multiplyByPoint(r,o,wxe),l=f.subtract(A,a,A);l=f.normalize(l,l);let d=Ze.fromPointNormal(s,l,this._rotationPlane),m=en.rayPlane(t.camera.getPickRay(e,Uj),d,this._rotationStartPoint);this._dragging=c(m),this._rotationAxis=o,t.screenSpaceCameraController.enableInputs=!1};fu.prototype.handleMouseMove=function(e){if(!this._dragging)return;let t=this._scene,n=t.camera.getPickRay(e,Uj),i=en.rayPlane(n,this._rotationPlane,Pxe);if(!c(i))return;let o=this._widgetOrigin,r=this._modelOrigin,a=this._rotationStartPoint,s=this._vectorLine1,A=s.positions,l=this._vectorLine2,d=l.positions,m=f.subtract(a,o,cD),p=f.subtract(i,o,kj);p=f.normalize(p,p),p=f.multiplyByScalar(p,f.magnitude(m),p),i=f.add(o,p,i),A[0]=o,A[1]=a,d[0]=o,d[1]=i,s.positions=A,l.positions=d,s.show=!0,l.show=!0;let g=f.multiplyComponents(this.originOffset,Q.getScale(this._transform,Nj),Nj),h=this._rotationAxis,C=zj(this._startTransform,g,h,a,i),_=ne.fromQuaternion(gt.fromAxisAngle(h,C,Nxe),Lxe);_=ne.multiply(this._startRotation,_,_);let I=Q.fromRotationTranslation(_,r,Dxe);this._setHPRCallback(sn.fixedFrameToHeadingPitchRoll(I,t.mapProjection.ellipsoid,void 0,Mxe));let b=f.negate(g,cD);b=ne.multiplyByVector(_,b,b),r=f.add(b,o,r),this._setPositionCallback(r)};fu.prototype.handleLeftUp=function(){this._dragging=!1,this._vectorLine1.show=!1,this._vectorLine2.show=!1,this._scene.screenSpaceCameraController.enableInputs=!0};fu.prototype.isDestroyed=function(){return!1};fu.prototype.destroy=function(){this.active=!1;let e=this._scene;e.primitives.remove(this._vectorLine1),e.primitives.remove(this._vectorLine2),e.primitives.remove(this._polylineX),e.primitives.remove(this._polylineY),e.primitives.remove(this._polylineZ),me(this)};fu._getRotationAngle=zj;var xb=fu;var Oxe=new f,kxe=new f,Vj=new f,Uxe=new f,zxe=new f,Gxe=new f,Hxe=new f,jj=new ai,Vxe=new f(1,1,1),Fa=new f,Gj=100,Hj=1/0;function AD(e){return{position:On.getValue(e),show:!1,color:On.getColor(e),pixelSize:20,disableDepthTestDistance:Number.POSITIVE_INFINITY,id:e}}function lD(e){return new JA({positions:[f.ZERO,On.getValue(e)],color:On.getColor(e),id:e,show:!1})}function Df(e){e=e??G.EMPTY_OBJECT;let t=e.scene,n=e.transform,i=t.primitives.add(new ou);this.originOffset=e.originOffset,this._points=i,this._pointX=i.add(AD(On.X)),this._pointY=i.add(AD(On.Y)),this._pointZ=i.add(AD(On.Z)),this._polylineX=t.primitives.add(lD(On.X)),this._polylineY=t.primitives.add(lD(On.Y)),this._polylineZ=t.primitives.add(lD(On.Z)),this._scene=t,this._canvas=t.canvas,this._enableNonUniformScaling=e.enableNonUniformScaling,this._setPositionCallback=e.setPosition,this._setScaleCallback=e.setScale,this._modelMatrix=new Q,this._pickedAxis=void 0,this._dragAlongVector=void 0,this._offsetVector=new f,this._pickingPlane=new Ze(f.UNIT_X,0),this._dragging=!1,this._startPosition=new f,this._startScale=new f,this._startOffset=new f,this._startTransform=new Q,this._active=!1,this._transform=n,this._lineLength=e.radius*1.5,this._pixelSize=c(e.pixelSize)?new L(e.pixelSize,e.pixelSize):new L(Gj,Gj),this._maximumSizeInMeters=c(e.maximumSizeInMeters)?new L(e.maximumSizeInMeters,e.maximumSizeInMeters):new L(Hj,Hj),this.update()}Object.defineProperties(Df.prototype,{active:{get:function(){return this._active},set:function(e){this._active=e,e?(this._pointX.show=!0,this._pointY.show=!0,this._pointZ.show=!0,this._polylineX.show=!0,this._polylineY.show=!0,this._polylineZ.show=!0):(this._pointX.show=!1,this._pointY.show=!1,this._pointZ.show=!1,this._polylineX.show=!1,this._polylineY.show=!1,this._polylineZ.show=!1,this._dragging=!1)}},pixelSize:{get:function(){return this._pixelSize.x}},maximumSizeInMeters:{get:function(){return this._maximumSizeInMeters.x}}});Df.prototype.handleLeftDown=function(e){let t=this._scene,n=this._transform,i=t.camera,o=t.drillPick(e),r=Q.getTranslation(n,kxe),a;for(let h=0;h<o.length;h++){let C=o[h];if(c(C.id)&&c(On[C.id])){a=C.id;break}}if(!c(a))return;let s=On.getValue(a),A=Q.multiplyByPointAsVector(this._modelMatrix,s,Vj),l=Uxe;Math.abs(f.dot(i.upWC,A))>.7?l=f.cross(i.rightWC,A,l):l=f.cross(i.upWC,A,l),f.normalize(l,l);let d=Ze.fromPointNormal(r,l,this._pickingPlane),m=en.rayPlane(i.getPickRay(e,jj),d,this._startPosition);if(!c(m))return;this._offsetVector=f.subtract(m,r,this._offsetVector),this._dragging=!0;let p=Q.getScale(n,this._startScale),g;a===On.X?g=p.x:a===On.Y?g=p.y:g=p.z,this._startValue=g,this._startOffset=f.multiplyComponents(this.originOffset,p,this._startOffset),this._dragAlongVector=s,this._pickedAxis=a,this._startTransform=Q.setScale(n,Vxe,this._startTransform),t.screenSpaceCameraController.enableInputs=!1};Df.prototype.handleMouseMove=function(e){if(!this._dragging)return;let n=this._scene.camera,i=en.rayPlane(n.getPickRay(e,jj),this._pickingPlane,zxe);if(!c(i))return;let o=this._dragAlongVector,r=Q.multiplyByPointAsVector(this._modelMatrix,o,Vj),a=f.subtract(i,this._startPosition,Gxe);a=f.projectVector(a,r,a);let s=f.magnitude(a);if(f.dot(a,this._offsetVector)<0&&(s=-s),s/=this._lineLength,s+=this._startValue,s<=0)return;let A=this._pickedAxis,l=this._startScale;this._enableNonUniformScaling()?A===On.X?l.x=s:A===On.Y?l.y=s:l.z=s:(l.x=s,l.y=s,l.z=s);let d=f.multiplyComponents(this.originOffset,l,Hxe);d=f.subtract(this._startOffset,d,d),d=Q.multiplyByPoint(this._startTransform,d,d),this._setScaleCallback(l),this._setPositionCallback(d)};Df.prototype.handleLeftUp=function(){this._dragging=!1,this._scene.screenSpaceCameraController.enableInputs=!0};Df.prototype.update=function(){let e=this._transform,t=cA(e,this.originOffset,Oxe),n=this._modelMatrix;n=Q.multiplyByUniformScale(e,this._lineLength,n),n=Q.setTranslation(this._modelMatrix,t,n);let i=this._pixelSize.x>0;i&&(n=oA(this._pixelSize,this._maximumSizeInMeters,this._scene.frameState,n,n)),i&&this._enableNonUniformScaling&&(Fa=Q.getScale(n,Fa),Fa.x>=Fa.y?(Fa.y=Fa.x,Fa.z=Fa.x):Fa.y>=Fa.x&&(Fa.x=Fa.y,Fa.z=Fa.y),n=Q.setScale(n,Fa,n)),this._polylineX.modelMatrix=n,this._polylineY.modelMatrix=n,this._polylineZ.modelMatrix=n,this._points.modelMatrix=n};Df.prototype.isDestroyed=function(){return!1};Df.prototype.destroy=function(){this.active=!1;let e=this._scene;this._points.removeAll(),e.primitives.remove(this._polylineX),e.primitives.remove(this._polylineY),e.primitives.remove(this._polylineZ),e.primitives.remove(this._points),me(this)};var Tb=Df;var jxe=new f,fD=new f,qj=new f,Yxe=new f,Wxe=new f,qxe=new f,Jxe=new f,Jj=new ai,Yj=100,Wj=1/0;function uD(e){return new JA({positions:[f.ZERO,On.getValue(e)],arrow:!0,color:On.getColor(e),id:e,show:!1})}function Qf(e){e=e??G.EMPTY_OBJECT;let t=e.scene;this.originOffset=e.originOffset,this._polylineX=t.primitives.add(uD(On.X)),this._polylineY=t.primitives.add(uD(On.Y)),this._polylineZ=t.primitives.add(uD(On.Z)),this._scene=t,this._canvas=t.canvas,this._setPositionCallback=e.setPosition,this._modelMatrix=new Q,this._fixedFrame=new Q,this._hpr=new us,this._dragAlongVector=void 0,this._offsetVector=new f,this._pickingPlane=new Ze(f.UNIT_X,0),this._dragging=!1,this._active=!1,this._transform=e.transform,this._radius=e.radius,this._pixelSize=c(e.pixelSize)?new L(e.pixelSize,e.pixelSize):new L(Yj,Yj),this._maximumSizeInMeters=c(e.maximumSizeInMeters)?new L(e.maximumSizeInMeters,e.maximumSizeInMeters):new L(Wj,Wj),this.update()}Object.defineProperties(Qf.prototype,{active:{get:function(){return this._active},set:function(e){this._active=e,e?(this._polylineX.show=!0,this._polylineY.show=!0,this._polylineZ.show=!0):(this._polylineX.show=!1,this._polylineY.show=!1,this._polylineZ.show=!1,this._dragging=!1)}},pixelSize:{get:function(){return this._pixelSize.x}},maximumSizeInMeters:{get:function(){return this._maximumSizeInMeters.x}}});Qf.prototype.update=function(){let e=this._transform,t=this._scene.mapProjection.ellipsoid,n=this._modelMatrix,i=Q.getTranslation(e,fD),o=cA(e,this.originOffset,jxe),r=this._radius*Q.getMaximumScale(this._transform)*1.5,a=sn.fixedFrameToHeadingPitchRoll(this._transform,t,void 0,this._hpr);a.pitch=0,a.roll=0;let s=sn.headingPitchRollToFixedFrame(i,a,t,void 0,this._fixedFrame);s=Q.setTranslation(s,o,s),n=Q.multiplyByUniformScale(s,r,n),this._pixelSize.x>0&&(n=oA(this._pixelSize,this._maximumSizeInMeters,this._scene.frameState,n,n)),this._polylineX.modelMatrix=n,this._polylineY.modelMatrix=n,this._polylineZ.modelMatrix=n};Qf.prototype.handleLeftDown=function(e){let t=this._scene,n=t.camera,i=t.drillPick(e),o;for(let m=0;m<i.length;m++){let p=i[m];if(c(p.id)&&c(On[p.id])){o=p.id;break}}if(!c(o))return;let r=Q.getTranslation(this._transform,fD),a=On.getValue(o),s=Q.multiplyByPointAsVector(this._fixedFrame,a,qj),A=Yxe;Math.abs(f.dot(n.upWC,s))>.7?A=f.cross(n.rightWC,s,A):A=f.cross(n.upWC,s,A),f.normalize(A,A);let l=Ze.fromPointNormal(r,A,this._pickingPlane),d=en.rayPlane(n.getPickRay(e,Jj),l,this._offsetVector);c(d)&&(f.subtract(d,r,d),this._dragging=!0,this._dragAlongVector=a,t.screenSpaceCameraController.enableInputs=!1)};Qf.prototype.handleMouseMove=function(e){if(!this._dragging)return;let n=this._scene.camera,i=en.rayPlane(n.getPickRay(e,Jj),this._pickingPlane,Wxe);if(!c(i))return;let o=this._dragAlongVector,r=Q.getTranslation(this._transform,fD),a=Q.multiplyByPointAsVector(this._fixedFrame,o,qj),s=f.subtract(i,r,qxe);s=f.projectVector(s,a,s);let A=f.projectVector(this._offsetVector,a,Jxe);s=f.subtract(s,A,s),r=f.add(r,s,r),this._setPositionCallback(r)};Qf.prototype.handleLeftUp=function(){this._dragging=!1,this._scene.screenSpaceCameraController.enableInputs=!0};Qf.prototype.isDestroyed=function(){return!1};Qf.prototype.destroy=function(){this.active=!1;let e=this._scene;e.primitives.remove(this._polylineX),e.primitives.remove(this._polylineY),e.primitives.remove(this._polylineZ),me(this)};var Sb=Qf;var Kxe=new f,Xxe=new L,Zxe=new f(1,1,1),$xe=new Q,eTe=new f,tTe=new f,nTe=100,iTe=1/0,oTe=new gt,rTe=new gt,aTe=new f,sTe=new f,cTe=new f,ATe=new Q,lTe=new ne;function dD(e,t){let n=gt.fromHeadingPitchRoll(t,oTe),i=Q.getTranslation(e,aTe),o=Q.getScale(e,sTe),r=Q.multiplyByPoint(e,f.ZERO,cTe),a=sn.eastNorthUpToFixedFrame(r,void 0,ATe),s=Q.getMatrix3(a,lTe),A=gt.fromRotationMatrix(s,rTe),l=gt.multiply(A,n,s);return Q.fromTranslationQuaternionRotationScale(i,l,o,e)}function Dr(e){e=e??G.EMPTY_OBJECT;let t=e.scene,n=e.transform,i=e.boundingSphere.clone(),o=e.originOffset??f.ZERO,r=Q.getTranslation(n,new f),a=sn.fixedFrameToHeadingPitchRoll(n,t.mapProjection.ellipsoid,void 0,new us),s=Q.getScale(n,new f);f.equalsEpsilon(r,f.ZERO,S.EPSILON10)&&(r=f.fromDegrees(0,0,0,t.mapProjection.ellipsoid,r),n=Q.setTranslation(n,r,n),dD(n,a));let A=!0;S.equalsEpsilon(s.x,s.y,S.EPSILON10)&&S.equalsEpsilon(s.x,s.z,S.EPSILON10)&&(A=!1,s.y=s.x,s.z=s.x);let l=i.radius/f.maximumComponent(s);this._pixelSize=e.pixelSize??nTe,this._maximumSizeInMeters=e.maximumSizeInMeters??iTe,this.editorMode=void 0;let d=Hi.observable();Hi.defineProperty(this,"editorMode",{get:function(){return d()},set:function(_){d(_),c(this._activeEditor)&&(this._activeEditor.active=!1);let I;_===KA.ROTATION?I=this._rotationEditor:_===KA.TRANSLATION?I=this._translationEditor:_===KA.SCALE&&(I=this._scaleEditor),I.update(),I.active=!0,this._activeEditor=I}}),this.enableNonUniformScaling=A;let m=Hi.observable(this.enableNonUniformScaling);Hi.defineProperty(this,"enableNonUniformScaling",{get:function(){return m()},set:function(_){_!==m()&&(m(_),_||(this.scale=new f(s.x,s.x,s.x),t.requestRenderMode&&t.requestRender()))}}),this.position=r;let p=Hi.observable(this.position);Hi.defineProperty(this,"position",{get:function(){return p()},set:function(_){if(f.equals(_,this.position))return;let I=f.clone(_,this.position);p(I);let b=this._transform;b=Q.setTranslation(b,I,b),dD(b,this.headingPitchRoll),t.requestRenderMode&&t.requestRender()}}),this.headingPitchRoll=a;let g=Hi.observable(this.headingPitchRoll);Hi.defineProperty(this,"headingPitchRoll",{get:function(){return g()},set:function(_){if(us.equals(_,this.headingPitchRoll))return;let I=us.clone(_,this.headingPitchRoll);g(I),dD(this._transform,I),t.requestRenderMode&&t.requestRender()}}),this.scale=s;let h=Hi.observable(this.scale);Hi.defineProperty(this,"scale",{get:function(){return h()},set:function(_){if(f.equals(_,this.scale))return;let I=f.clone(_,this.scale);h(I),Q.setScale(this._transform,I,this._transform),this._translationEditor.update(),this._rotationEditor.update(),t.requestRenderMode&&t.requestRender()}}),this.menuExpanded=!1,this.left="0",this.top="0",this.active=!1,Hi.track(this,["menuExpanded","left","top","active"]);let C=this;this._rotationEditor=new xb({scene:t,transform:n,radius:l,pixelSize:this._pixelSize,maximumSizeInMeters:this._maximumSizeInMeters,originOffset:o,setPosition:function(_){C.position=_},setHeadingPitchRoll:function(_){C.headingPitchRoll=_}}),this._translationEditor=new Sb({scene:t,transform:n,radius:l,pixelSize:this._pixelSize,maximumSizeInMeters:this._maximumSizeInMeters,originOffset:o,setPosition:function(_){C.position=_}}),this._scaleEditor=new Tb({scene:t,transform:n,enableNonUniformScaling:m,radius:l,pixelSize:this._pixelSize,maximumSizeInMeters:this._maximumSizeInMeters,originOffset:o,setScale:function(_){C.scale=_},setPosition:function(_){C.position=_}}),this._sseh=new Wd(t.canvas),this._scene=t,this._transform=n,this._boundingSphere=i,this._active=!1,this._activeEditor=void 0,this._originOffset=o,this.position=r,this.headingPitchRoll=a,this.scale=s,this._removePostUpdateEvent=this._scene.preUpdate.addEventListener(Dr.prototype._update,this)}Object.defineProperties(Dr.prototype,{originOffset:{get:function(){return this._originOffset},set:function(e){this._originOffset=e,this._translationEditor.originOffset=e,this._rotationEditor.originOffset=e,this._scaleEditor.originOffset=e}},pixelSize:{get:function(){return this._pixelSize}},maximumSizeInMeters:{get:function(){return this._maximumSizeInMeters}}});Dr.prototype.setOriginPosition=function(e){let t=Q.setScale(this._transform,Zxe,$xe),n=Q.inverseTransformation(t,t),i=Q.multiplyByPoint(n,e,eTe),o=f.divideComponents(i,Q.getScale(this._transform,tTe),i);this.originOffset=o};Dr.prototype.activate=function(){let e=this._sseh,t=this._scene;e.setInputAction(this._leftDown.bind(this),Gt.LEFT_DOWN),e.setInputAction(this._leftUp.bind(this),Gt.LEFT_UP),e.setInputAction(this._mouseMove.bind(this),Gt.MOUSE_MOVE),this.active=!0,c(this._activeEditor)?this._activeEditor.active=!0:this.setModeTranslation(),t.requestRenderMode&&t.requestRender()};Dr.prototype.deactivate=function(){let e=this._sseh,t=this._scene;e.removeInputAction(Gt.LEFT_DOWN),e.removeInputAction(Gt.LEFT_UP),e.removeInputAction(Gt.MOUSE_MOVE),this.active=!1,c(this._activeEditor)&&(this._activeEditor.active=!1),t.requestRenderMode&&t.requestRender()};Dr.prototype.expandMenu=function(){this.menuExpanded=!0};Dr.prototype.setModeTranslation=function(){this.editorMode=KA.TRANSLATION,this.menuExpanded=!1};Dr.prototype.setModeRotation=function(){this.editorMode=KA.ROTATION,this.menuExpanded=!1};Dr.prototype.setModeScale=function(){this.editorMode=KA.SCALE,this.menuExpanded=!1};Dr.prototype.toggleNonUniformScaling=function(){this.enableNonUniformScaling=!this.enableNonUniformScaling};Dr.prototype._leftDown=function(e){this._activeEditor.handleLeftDown(e.position);let t=this._scene;t.requestRenderMode&&t.requestRender()};Dr.prototype._mouseMove=function(e){this._activeEditor.handleMouseMove(e.endPosition);let t=this._scene;t.requestRenderMode&&t.requestRender()};Dr.prototype._leftUp=function(e){this.menuExpanded=!1,this._activeEditor.handleLeftUp(e.position);let t=this._scene;t.requestRenderMode&&t.requestRender()};Dr.prototype._update=function(){if(!this.active)return;this._activeEditor.update();let e=this._scene,t=cA(this._transform,this._originOffset,Kxe),n=Fn.worldToWindowCoordinates(e,t,Xxe);c(n)&&(this.left=`${Math.floor(n.x-13)}px`,this.top=`${Math.floor(n.y)}px`)};Dr.prototype.isDestroyed=function(){return!1};Dr.prototype.destroy=function(){this.deactivate(),this._sseh.destroy(),this._rotationEditor.destroy(),this._translationEditor.destroy(),this._scaleEditor.destroy(),this._removePostUpdateEvent(),me(this)};Dr.EditorMode=KA;var wb=Dr;var uTe=`<div class="transform-editor-menu" data-bind="style: {left: left, top: top}, visible: active">        <div class="cesium-button transform-editor-button" data-bind="click: expandMenu, visible: !menuExpanded">            <svg width="20" height="20" viewBox="0 0 20 20">                <g>                    <circle cx="2" cy="10" r="2" />                    <circle cx="10" cy="10" r="2" />                    <circle cx="18" cy="10" r="2" />                </g>            </svg>        </div>        <div class="transform-editor-options" data-bind="visible: menuExpanded">            <div class="transform-editor-button-row">                <div title="Translation" data-bind="click: setModeTranslation, css: {selected: editorMode === 'translation'}">                    <svg viewBox="0 0 25 25" height="25" width="25">                        <g>                            <circle r="3" cy="22" cx="3" />                            <path d="M 19.543379,4.59439 3.9750205,19.96158 5.3793174,21.3854 20.947676,6.01822 Z"/>                            <path d="m 14.699824,3.80366 10.231411,-3.34922 -3.215586,10.03096 z"/>                        </g>                    </svg>                </div                ><div title="Rotation" data-bind="click: setModeRotation, css: {selected: editorMode === 'rotation'}">                    <svg viewBox="0 0 25 25" height="25" width="25">                        <g>                            <path d="M 13.033371,10.08295 2.6713568,7.16272 10.931013,0.62527 Z"/>                            <path d="m 13.741358,3.87055 c -0.747592,-0.006 -1.506137,0.0593 -2.263621,0.20287 l 0.484334,2.29127 c 4.712769,-0.89305 9.471467,2.11386 10.414021,6.57912 0.942553,4.46525 -2.229345,8.97402 -6.942115,9.86707 -4.71277,0.89305 -9.4731664,-2.11226 -10.4157205,-6.57752 l -2.4165696,0.45729 c 1.2119755,5.74161 7.2550484,9.55981 13.3149241,8.41149 6.059877,-1.14833 10.089725,-6.87562 8.87775,-12.61723 -1.060479,-5.02391 -5.819851,-8.57436 -11.053003,-8.61436 z"/>                        </g>                    </svg>               </div>            </div>            <div class="transform-editor-button-row">                <div title="Scale" data-bind="click: setModeScale, css: {selected: editorMode === 'scale'}">                    <svg width="25" height="25" viewBox="0 0 25 25">                        <g>                            <path d="M 19.543379,4.59439 3.9750205,19.96158 5.3793174,21.3854 20.947676,6.01822 Z"/>                            <path d="m 14.699824,3.80366 10.231411,-3.34922 -3.215586,10.03096 z" />                            <path d="M 10.333866,21.9809 0.10245523,25.33012 3.3180412,15.29916 Z" />                        </g>                    </svg>                </div                ><div data-bind="click: toggleNonUniformScaling">                    <div title="Switch to non-uniform scaling" data-bind="visible: !enableNonUniformScaling">                        <svg width="25" height="25" viewBox="0 0 25 25">                            <g>                                <path d="m 0.5,1.38477 h 1.9960938 v -1 H 0.5 c 0,0.33333 0,0.66667 0,1 z m 2.9941406,0 h 1.9980469 v -1 H 3.4941406 Z m 2.9960938,0 h 1.9960937 v -1 H 6.4902344 Z m 2.9960937,0 h 1.9960939 v -1 H 9.4863281 Z m 2.9941409,0 h 1.998047 v -1 h -1.998047 z m 2.996093,0 h 1.996094 v -1 h -1.996094 z m 2.994141,0 h 1.998047 v -1 h -1.998047 z m 2.996094,0 h 1.998047 v -1 h -1.998047 z m 2.535156,-0.5 v 1.95898 H 25 v -1.95898 z M 0,4.0332 h 0.99804688 v -1.99609 H 0 Z m 24.001953,1.80469 H 25 V 3.8418 H 24.001953 Z M 0,7.0293 h 0.99804688 v -1.99805 H 0 Z m 24.001953,1.80468 H 25 v -1.99609 H 24.001953 Z M 0,10.02344 h 0.99804688 v -1.9961 H 0 Z m 24.001953,1.80664 H 25 v -1.99805 H 24.001953 Z M 0,13.01953 h 0.99804688 v -1.99609 H 0 Z m 24.001953,1.80469 H 25 v -1.9961 H 24.001953 Z M 0,16.01562 h 0.99804688 v -1.99804 H 0 Z m 24.001953,1.80469 H 25 v -1.99804 H 24.001953 Z M 0,19.00977 h 0.99804688 v -1.9961 H 0 Z m 24.001953,1.80664 H 25 v -1.99805 H 24.001953 Z M 0,22.00586 h 0.99804688 v -1.99609 H 0 Z m 24.001953,1.80469 H 25 v -1.9961 H 24.001953 Z M 0,24.88672 v 0.49805 h 0.5 0.11523438 v -0.49805 h 0.3828125 v -1.88281 H 0 Z m 1.6132812,0.49805 H 3.609375 v -0.99805 H 1.6132812 Z m 2.9941407,0 h 1.9980469 v -0.99805 H 4.6074219 Z m 2.9960937,0 h 1.9980469 v -0.99805 H 7.6035156 Z m 2.9960934,0 h 1.996094 v -0.99805 h -1.996094 z m 2.994141,0 h 1.998047 v -0.99805 H 13.59375 Z m 2.996094,0 h 1.996094 v -0.99805 h -1.996094 z m 2.996094,0 h 1.996093 v -0.99805 h -1.996093 z m 2.99414,0 H 24.5 25 v -0.49805 -0.0781 h -0.5 v -0.42187 h -1.919922 z" />                                <path d="m 0,10.38477 v 1.02343 13.97657 h 15 v -15 z m 2.0449219,2.04492 H 12.955078 V 23.3418 H 2.0449219 Z"/>                                <g>                                    <path d="m 21.158203,3.81836 0.355469,0.35156 0.351562,-0.35547 -0.353515,-0.35156 z m -0.703125,0.70898 0.355469,0.35157 0.351562,-0.35352 -0.355468,-0.35351 z m -0.705078,0.71094 0.355469,0.35156 0.351562,-0.35546 -0.353515,-0.35157 z m -0.703125,0.70899 0.355469,0.35351 0.351562,-0.35547 -0.355468,-0.35156 z m -0.705078,0.71093 0.355469,0.35157 0.353515,-0.35547 -0.355469,-0.35157 z m -0.703125,0.71094 0.355469,0.35156 0.351562,-0.35547 -0.355469,-0.35156 z m -0.703125,0.70898 0.353515,0.35157 0.353516,-0.35352 -0.355469,-0.35351 z m -0.705078,0.71094 0.355469,0.35156 0.351562,-0.35546 -0.355469,-0.35157 z m -0.703125,0.70899 0.353515,0.35351 0.353516,-0.35547 -0.355469,-0.35351 z m -0.705078,0.71093 0.355468,0.35157 0.351563,-0.35547 -0.355469,-0.35156 z"/>                                    <path d="m 23.382049,1.93037 -1.015775,3.8652 -2.840556,-2.81624 z"/>                                </g>                            </g>                        </svg>                    </div>                    <div title="Switch to uniform scaling" data-bind="visible: enableNonUniformScaling">                        <svg width="25" height="25" viewBox="0 0 25 25">                            <g>                                <path d="M 0.49414062,10.87891 H 0 v 1.95117 h 0.98828125 v -1.45703 H 2.4707031 v -0.98828 H 0.49414062 Z m 2.96289058,0.49414 h 1.9765626 v -0.98828 H 3.4570312 Z m 2.9648438,0 h 1.9765625 v -0.98828 H 6.421875 Z m 2.9628906,0 h 1.9765624 v -0.98828 H 9.3847656 Z m 2.9648434,0 h 1.976563 v -0.98828 h -1.976563 z m 2.964844,0 h 1.974609 v -0.98828 h -1.974609 z m 2.962891,0 h 1.976562 v -0.98828 h -1.976562 z m 2.964844,0 h 1.974609 v -0.98828 h -1.974609 z m 2.96289,-0.49414 h -0.193359 v 1.67578 H 25 v -1.67578 -0.49414 h -0.494141 -0.300781 z m -0.193359,4.63867 H 25 v -1.97461 H 24.011719 Z M 0,15.79297 h 0.98828125 v -1.97461 H 0 Z m 24.011719,2.68945 H 25 v -1.97656 H 24.011719 Z M 0,18.75781 h 0.98828125 v -1.97656 H 0 Z m 24.011719,2.6875 H 25 V 19.4707 H 24.011719 Z M 0,21.7207 h 0.98828125 v -1.97461 H 0 Z m 24.011719,2.68946 H 25 v -1.97657 H 24.011719 Z M 0,24.68555 h 0.98828125 v -1.97657 H 0 Z m 1.2753906,0.69922 h 1.9765625 v -0.98829 H 1.2753906 Z m 2.9648438,0 h 1.9765625 v -0.98829 H 4.2402344 Z m 2.9628906,0 h 1.9765625 v -0.98829 H 7.203125 Z m 2.964844,0 h 1.976562 v -0.98829 h -1.976562 z m 2.96289,0 h 1.976563 v -0.98829 h -1.976563 z m 2.964844,0 h 1.976563 v -0.98829 h -1.976563 z m 2.962891,0 h 1.976562 v -0.98829 h -1.976562 z m 2.964844,0 H 24 v -0.98829 h -1.976562 z"/>                                <path d="m 0,10.38477 v 1.02343 13.97657 h 15 v -15 z m 2.0449219,2.04492 H 12.955078 V 23.3418 H 2.0449219 Z"/>                                <g>                                    <path d="m 22.251953,18.26172 h 0.179688 l -0.0039,-0.5 h -0.179687 z m -1.003906,-0.49024 0.0039,0.5 0.5,-0.004 -0.0039,-0.5 z m -1,0.008 0.0039,0.5 0.5,-0.004 -0.0039,-0.5 z m -1,0.01 0.0039,0.5 0.5,-0.006 -0.0039,-0.5 z m -1,0.008 0.0039,0.5 0.5,-0.004 -0.0039,-0.5 z m -1,0.008 0.0039,0.5 0.5,-0.004 -0.0039,-0.5 z m -1,0.01 0.0039,0.5 0.5,-0.004 -0.0039,-0.5 z m -1,0.008 0.0039,0.5 0.5,-0.004 -0.0039,-0.5 z"/>                                    <path d="m 23.885095,18.00809 -2.030696,1.17348 -0.02037,-2.31243 z"/>                                </g>                            </g>                        </svg>                    </div>                </div>            </div>        </div>    </div>`;function Db(e){e=e??G.EMPTY_OBJECT;let t=GC(e.container),n=Wm(uTe);t.appendChild(n);let i=new wb(e);Hi.applyBindings(i,n),this._viewModel=i,this._element=n,this._container=t}Object.defineProperties(Db.prototype,{container:{get:function(){return this._container}},viewModel:{get:function(){return this._viewModel}}});Db.prototype.isDestroyed=function(){return!1};Db.prototype.destroy=function(){return Hi.cleanNode(this._element),this._container.removeChild(this._element),this._viewModel.destroy(),me(this)};var Kj=Db;function fTe(e,t){t=t??G.EMPTY_OBJECT;let n=e.scene,i=document.createElement("div");i.className="cesium-viewer-measureContainer",e._toolbar.insertBefore(i,e._toolbar.firstChild),t=Re(t),t.container=i,t.scene=n;let o=new Bb(t),r=n.postUpdate.addEventListener(function(){let a=e._container.clientHeight-125;o._dropdown.style.maxHeight=`${a}px`});e.destroy=eD(e,e.destroy,function(){r(),o.destroy()}),Object.defineProperties(e,{measure:{get:function(){return o}}})}var Xj=fTe;globalThis.ION_SDK_VERSION="1.133";0&&(module.exports={AngleUnits,AreaMeasurement,AreaMeasurementDrawing,AreaUnits,AxisLinePrimitive,ClippingPlanePrimitive,ClippingPlanesEditor,DistanceMeasurement,DistanceUnits,DrawingMode,EditorMode,HeightMeasurement,HorizontalMeasurement,HorizontalMeasurementDrawing,HorizontalPolylineDrawing,Measure,MeasureUnits,MeasureViewModel,Measurement,MeasurementMouseHandler,MeasurementSettings,PointMeasurement,PolygonDrawing,PolygonPrimitive,PolylineDrawing,PolylineMeasurement,PolylineMeasurementDrawing,PolylinePrimitive,RotationEditor,ScaleEditor,SvgPathBindingHandler,TransformAxis,TransformEditor,TransformEditorViewModel,TranslationEditor,VerticalMeasurement,VisibilityState,VolumeUnits,createDomNode,filterPickForMeasurement,getScreenSpaceScalingMatrix,getSlope,getWidgetOrigin,getWorldPosition,knockout,knockout_3_5_1,knockout_es5,viewerMeasureMixin});
