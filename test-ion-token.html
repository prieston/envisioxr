<!DOCTYPE html>
<html>
<head>
    <title>Test Cesium Ion Token</title>
</head>
<body>
    <h1>Cesium Ion Token Tester</h1>
    <div>
        <label>Enter your Cesium Ion Access Token:</label><br>
        <input type="password" id="token" style="width: 500px" placeholder="Your access token">
        <button onclick="testToken()">Test Token</button>
    </div>
    <div id="results" style="margin-top: 20px; white-space: pre-wrap;"></div>

    <script>
        async function testToken() {
            const token = document.getElementById('token').value;
            const results = document.getElementById('results');

            if (!token) {
                results.textContent = 'Please enter a token';
                return;
            }

            results.textContent = 'Testing token...\n';

            // Test 1: List assets (GET)
            try {
                results.textContent += '\n1. Testing GET /v1/assets (list your assets)...\n';
                const listResponse = await fetch('https://api.cesium.com/v1/assets', {
                    method: 'GET',
                    headers: {
                        'Authorization': `Bearer ${token}`
                    }
                });

                results.textContent += `Status: ${listResponse.status}\n`;
                const listData = await listResponse.json();
                results.textContent += `Response: ${JSON.stringify(listData, null, 2)}\n`;

                if (listResponse.ok) {
                    results.textContent += '✅ GET request successful!\n';
                    results.textContent += `You have ${listData.items?.length || 0} assets\n`;
                } else {
                    results.textContent += '❌ GET request failed\n';
                }
            } catch (error) {
                results.textContent += `❌ Error: ${error.message}\n`;
            }

            // Test 2: Create asset (POST)
            try {
                results.textContent += '\n2. Testing POST /v1/assets (create asset)...\n';
                const createResponse = await fetch('https://api.cesium.com/v1/assets', {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${token}`,
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        name: 'Test Asset ' + Date.now(),
                        description: 'Test asset created by token tester',
                        type: 'GLTF'
                    })
                });

                results.textContent += `Status: ${createResponse.status}\n`;
                const createData = await createResponse.json();
                results.textContent += `Response: ${JSON.stringify(createData, null, 2)}\n`;

                if (createResponse.ok) {
                    results.textContent += '✅ POST request successful!\n';
                    results.textContent += `Asset ID: ${createData.assetId}\n`;
                    results.textContent += `View at: https://ion.cesium.com/assets/${createData.assetId}\n`;
                } else {
                    results.textContent += '❌ POST request failed\n';
                }
            } catch (error) {
                results.textContent += `❌ Error: ${error.message}\n`;
            }
        }
    </script>
</body>
</html>

